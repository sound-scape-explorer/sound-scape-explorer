import{g as hd}from"./audiobuffer-slice-6dad15f5.js";var Lh={exports:{}};(function(Ch,dd){/*! For license information please see plotly.min.js.LICENSE.txt */(function(Yc,bu){Ch.exports=bu()})(self,function(){return function(){var Yc={98847:function(K,z,e){var S=e(71828),k={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var l in k){var T=l.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");S.addStyleRule(T,k[l])}},98222:function(K,z,e){K.exports=e(82887)},27206:function(K,z,e){K.exports=e(60822)},59893:function(K,z,e){K.exports=e(23381)},5224:function(K,z,e){K.exports=e(83832)},59509:function(K,z,e){K.exports=e(72201)},75557:function(K,z,e){K.exports=e(91815)},40338:function(K,z,e){K.exports=e(21462)},35080:function(K,z,e){K.exports=e(51319)},61396:function(K,z,e){K.exports=e(57516)},40549:function(K,z,e){K.exports=e(98128)},49866:function(K,z,e){K.exports=e(99442)},36089:function(K,z,e){K.exports=e(93740)},19548:function(K,z,e){K.exports=e(8729)},35831:function(K,z,e){K.exports=e(93814)},61039:function(K,z,e){K.exports=e(14382)},97040:function(K,z,e){K.exports=e(51759)},77986:function(K,z,e){K.exports=e(10421)},24296:function(K,z,e){K.exports=e(43102)},58872:function(K,z,e){K.exports=e(92165)},29626:function(K,z,e){K.exports=e(3325)},65591:function(K,z,e){K.exports=e(36071)},69738:function(K,z,e){K.exports=e(43905)},92650:function(K,z,e){K.exports=e(35902)},35630:function(K,z,e){K.exports=e(69816)},73434:function(K,z,e){K.exports=e(94507)},27909:function(K,z,e){var S=e(19548);S.register([e(27206),e(5224),e(58872),e(65591),e(69738),e(92650),e(49866),e(25743),e(6197),e(97040),e(85461),e(73434),e(54201),e(81299),e(47645),e(35630),e(77986),e(83043),e(93005),e(96881),e(4534),e(50581),e(40549),e(77900),e(47582),e(35080),e(21641),e(17280),e(5861),e(29626),e(10021),e(65317),e(96268),e(61396),e(35831),e(16122),e(46163),e(40344),e(40338),e(48131),e(36089),e(55334),e(75557),e(19440),e(99488),e(59893),e(97393),e(98222),e(61039),e(24296),e(66398),e(59509)]),K.exports=S},46163:function(K,z,e){K.exports=e(15154)},96881:function(K,z,e){K.exports=e(64943)},50581:function(K,z,e){K.exports=e(21164)},55334:function(K,z,e){K.exports=e(54186)},65317:function(K,z,e){K.exports=e(94873)},10021:function(K,z,e){K.exports=e(67618)},54201:function(K,z,e){K.exports=e(58810)},5861:function(K,z,e){K.exports=e(20593)},16122:function(K,z,e){K.exports=e(29396)},83043:function(K,z,e){K.exports=e(13551)},48131:function(K,z,e){K.exports=e(46858)},47582:function(K,z,e){K.exports=e(17988)},21641:function(K,z,e){K.exports=e(68868)},96268:function(K,z,e){K.exports=e(20467)},19440:function(K,z,e){K.exports=e(91271)},99488:function(K,z,e){K.exports=e(21461)},97393:function(K,z,e){K.exports=e(85956)},25743:function(K,z,e){K.exports=e(52979)},66398:function(K,z,e){K.exports=e(32275)},17280:function(K,z,e){K.exports=e(6419)},77900:function(K,z,e){K.exports=e(61510)},81299:function(K,z,e){K.exports=e(87619)},93005:function(K,z,e){K.exports=e(93601)},40344:function(K,z,e){K.exports=e(96595)},47645:function(K,z,e){K.exports=e(70954)},6197:function(K,z,e){K.exports=e(47462)},4534:function(K,z,e){K.exports=e(17659)},85461:function(K,z,e){K.exports=e(19990)},82884:function(K){K.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},50215:function(K,z,e){var S=e(82884),k=e(41940),l=e(85555),T=e(44467).templatedArray;e(24695),K.exports=T("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:S.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:S.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",l.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",l.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",l.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",l.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:k({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},3749:function(K,z,e){var S=e(71828),k=e(89298),l=e(92605).draw;function T(d){var s=d._fullLayout;S.filterVisible(s.annotations).forEach(function(t){var o=k.getFromId(d,t.xref),r=k.getFromId(d,t.yref),n=k.getRefType(t.xref),a=k.getRefType(t.yref);t._extremes={},n==="range"&&b(t,o),a==="range"&&b(t,r)})}function b(d,s){var t,o=s._id,r=o.charAt(0),n=d[r],a=d["a"+r],i=d[r+"ref"],u=d["a"+r+"ref"],h=d["_"+r+"padplus"],f=d["_"+r+"padminus"],x={x:1,y:-1}[r]*d[r+"shift"],v=3*d.arrowsize*d.arrowwidth||0,g=v+x,y=v-x,p=3*d.startarrowsize*d.arrowwidth||0,m=p+x,w=p-x;if(u===i){var c=k.findExtremes(s,[s.r2c(n)],{ppadplus:g,ppadminus:y}),M=k.findExtremes(s,[s.r2c(a)],{ppadplus:Math.max(h,m),ppadminus:Math.max(f,w)});t={min:[c.min[0],M.min[0]],max:[c.max[0],M.max[0]]}}else m=a?m+a:m,w=a?w-a:w,t=k.findExtremes(s,[s.r2c(n)],{ppadplus:Math.max(h,g,m),ppadminus:Math.max(f,y,w)});d._extremes[o]=t}K.exports=function(d){var s=d._fullLayout;if(S.filterVisible(s.annotations).length&&d._fullData.length)return S.syncOrAsync([l,T],d)}},44317:function(K,z,e){var S=e(71828),k=e(73972),l=e(44467).arrayEditor;function T(d,s){var t,o,r,n,a,i,u,h=d._fullLayout.annotations,f=[],x=[],v=[],g=(s||[]).length;for(t=0;t<h.length;t++)if(n=(r=h[t]).clicktoshow){for(o=0;o<g;o++)if(i=(a=s[o]).xaxis,u=a.yaxis,i._id===r.xref&&u._id===r.yref&&i.d2r(a.x)===b(r._xclick,i)&&u.d2r(a.y)===b(r._yclick,u)){(r.visible?n==="onout"?x:v:f).push(t);break}o===g&&r.visible&&n==="onout"&&x.push(t)}return{on:f,off:x,explicitOff:v}}function b(d,s){return s.type==="log"?s.l2r(d):s.d2r(d)}K.exports={hasClickToShow:function(d,s){var t=T(d,s);return t.on.length>0||t.explicitOff.length>0},onClick:function(d,s){var t,o,r=T(d,s),n=r.on,a=r.off.concat(r.explicitOff),i={},u=d._fullLayout.annotations;if(n.length||a.length){for(t=0;t<n.length;t++)(o=l(d.layout,"annotations",u[n[t]])).modifyItem("visible",!0),S.extendFlat(i,o.getUpdateObj());for(t=0;t<a.length;t++)(o=l(d.layout,"annotations",u[a[t]])).modifyItem("visible",!1),S.extendFlat(i,o.getUpdateObj());return k.call("update",d,{},i)}}}},25625:function(K,z,e){var S=e(71828),k=e(7901);K.exports=function(l,T,b,d){d("opacity");var s=d("bgcolor"),t=d("bordercolor"),o=k.opacity(t);d("borderpad");var r=d("borderwidth"),n=d("showarrow");if(d("text",n?" ":b._dfltTitle.annotation),d("textangle"),S.coerceFont(d,"font",b.font),d("width"),d("align"),d("height")&&d("valign"),n){var a,i,u=d("arrowside");u.indexOf("end")!==-1&&(a=d("arrowhead"),i=d("arrowsize")),u.indexOf("start")!==-1&&(d("startarrowhead",a),d("startarrowsize",i)),d("arrowcolor",o?T.bordercolor:k.defaultLine),d("arrowwidth",2*(o&&r||1)),d("standoff"),d("startstandoff")}var h=d("hovertext"),f=b.hoverlabel||{};if(h){var x=d("hoverlabel.bgcolor",f.bgcolor||(k.opacity(s)?k.rgb(s):k.defaultLine)),v=d("hoverlabel.bordercolor",f.bordercolor||k.contrast(x));S.coerceFont(d,"hoverlabel.font",{family:f.font.family,size:f.font.size,color:f.font.color||v})}d("captureevents",!!h)}},94128:function(K,z,e){var S=e(92770),k=e(58163);K.exports=function(l,T,b,d){T=T||{};var s=b==="log"&&T.type==="linear",t=b==="linear"&&T.type==="log";if(s||t)for(var o,r,n=l._fullLayout.annotations,a=T._id.charAt(0),i=0;i<n.length;i++)o=n[i],r="annotations["+i+"].",o[a+"ref"]===T._id&&u(a),o["a"+a+"ref"]===T._id&&u("a"+a);function u(h){var f=o[h],x=null;x=s?k(f,T.range):Math.pow(10,f),S(x)||(x=null),d(r+h,x)}}},84046:function(K,z,e){var S=e(71828),k=e(89298),l=e(85501),T=e(25625),b=e(50215);function d(s,t,o){function r(M,_){return S.coerce(s,t,b,M,_)}var n=r("visible"),a=r("clicktoshow");if(n||a){T(s,t,o,r);for(var i=t.showarrow,u=["x","y"],h=[-10,-30],f={_fullLayout:o},x=0;x<2;x++){var v=u[x],g=k.coerceRef(s,t,f,v,"","paper");if(g!=="paper"&&k.getFromId(f,g)._annIndices.push(t._index),k.coercePosition(t,f,r,g,v,.5),i){var y="a"+v,p=k.coerceRef(s,t,f,y,"pixel",["pixel","paper"]);p!=="pixel"&&p!==g&&(p=t[y]="pixel");var m=p==="pixel"?h[x]:.4;k.coercePosition(t,f,r,p,y,m)}r(v+"anchor"),r(v+"shift")}if(S.noneOrAll(s,t,["x","y"]),i&&S.noneOrAll(s,t,["ax","ay"]),a){var w=r("xclick"),c=r("yclick");t._xclick=w===void 0?t.x:k.cleanPosition(w,f,t.xref),t._yclick=c===void 0?t.y:k.cleanPosition(c,f,t.yref)}}}K.exports=function(s,t){l(s,t,{name:"annotations",handleItemDefaults:d})}},92605:function(K,z,e){var S=e(39898),k=e(73972),l=e(74875),T=e(71828),b=T.strTranslate,d=e(89298),s=e(7901),t=e(91424),o=e(30211),r=e(63893),n=e(6964),a=e(28569),i=e(44467).arrayEditor,u=e(13011);function h(v,g){var y=v._fullLayout.annotations[g]||{},p=d.getFromId(v,y.xref),m=d.getFromId(v,y.yref);p&&p.setScale(),m&&m.setScale(),x(v,y,g,!1,p,m)}function f(v,g,y,p,m){var w=m[y],c=m[y+"ref"],M=y.indexOf("y")!==-1,_=d.getRefType(c)==="domain",E=M?p.h:p.w;return v?_?w+(M?-g:g)/v._length:v.p2r(v.r2p(w)+g):w+(M?-g:g)/E}function x(v,g,y,p,m,w){var c,M,_=v._fullLayout,E=v._fullLayout._size,L=v._context.edits;p?(c="annotation-"+p,M=p+".annotations"):(c="annotation",M="annotations");var C=i(v.layout,M,g),O=C.modifyBase,I=C.modifyItem,N=C.getUpdateObj;_._infolayer.selectAll("."+c+'[data-index="'+y+'"]').remove();var R="clip"+_._uid+"_ann"+y;if(g._input&&g.visible!==!1){var V={x:{},y:{}},F=+g.textangle||0,D=_._infolayer.append("g").classed(c,!0).attr("data-index",String(y)).style("opacity",g.opacity),U=D.append("g").classed("annotation-text-g",!0),j=L[g.showarrow?"annotationTail":"annotationPosition"],J=g.captureevents||L.annotationText||j,X=U.append("g").style("pointer-events",J?"all":null).call(n,"pointer").on("click",function(){v._dragging=!1,v.emit("plotly_clickannotation",ue(S.event))});g.hovertext&&X.on("mouseover",function(){var de=g.hoverlabel,Ce=de.font,xe=this.getBoundingClientRect(),_e=v.getBoundingClientRect();o.loneHover({x0:xe.left-_e.left,x1:xe.right-_e.left,y:(xe.top+xe.bottom)/2-_e.top,text:g.hovertext,color:de.bgcolor,borderColor:de.bordercolor,fontFamily:Ce.family,fontSize:Ce.size,fontColor:Ce.color},{container:_._hoverlayer.node(),outerContainer:_._paper.node(),gd:v})}).on("mouseout",function(){o.loneUnhover(_._hoverlayer.node())});var Z=g.borderwidth,Y=g.borderpad,W=Z+Y,Q=X.append("rect").attr("class","bg").style("stroke-width",Z+"px").call(s.stroke,g.bordercolor).call(s.fill,g.bgcolor),ne=g.width||g.height,re=_._topclips.selectAll("#"+R).data(ne?[0]:[]);re.enter().append("clipPath").classed("annclip",!0).attr("id",R).append("rect"),re.exit().remove();var ie=g.font,se=_._meta?T.templateString(g.text,_._meta):g.text,ge=X.append("text").classed("annotation-text",!0).text(se);L.annotationText?ge.call(r.makeEditable,{delegate:X,gd:v}).call(ce).on("edit",function(de){g.text=de,this.call(ce),I("text",de),m&&m.autorange&&O(m._name+".autorange",!0),w&&w.autorange&&O(w._name+".autorange",!0),k.call("_guiRelayout",v,N())}):ge.call(ce)}else S.selectAll("#"+R).remove();function ue(de){var Ce={index:y,annotation:g._input,fullAnnotation:g,event:de};return p&&(Ce.subplotId=p),Ce}function ce(de){return de.call(t.font,ie).attr({"text-anchor":{left:"start",right:"end"}[g.align]||"middle"}),r.convertToTspans(de,v,le),de}function le(){var de=ge.selectAll("a");de.size()===1&&de.text()===ge.text()&&X.insert("a",":first-child").attr({"xlink:xlink:href":de.attr("xlink:href"),"xlink:xlink:show":de.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(Q.node());var Ce=X.select(".annotation-text-math-group"),xe=!Ce.empty(),_e=t.bBox((xe?Ce:ge).node()),we=_e.width,Ae=_e.height,$=g.width||we,oe=g.height||Ae,pe=Math.round($+2*W),ye=Math.round(oe+2*W);function ke(kt,ht){return ht==="auto"&&(ht=kt<.3333333333333333?"left":kt>.6666666666666666?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[ht]}for(var De=!1,Pe=["x","y"],Re=0;Re<Pe.length;Re++){var fe,ve,Te,ze,He,Ve=Pe[Re],nt=g[Ve+"ref"]||Ve,tt=g["a"+Ve+"ref"],ot={x:m,y:w}[Ve],pt=(F+(Ve==="x"?0:-90))*Math.PI/180,Tt=pe*Math.cos(pt),yt=ye*Math.sin(pt),dt=Math.abs(Tt)+Math.abs(yt),Pt=g[Ve+"anchor"],Et=g[Ve+"shift"]*(Ve==="x"?1:-1),Ot=V[Ve],Nt=d.getRefType(nt);if(ot&&Nt!=="domain"){var zt=ot.r2fraction(g[Ve]);(zt<0||zt>1)&&(tt===nt?((zt=ot.r2fraction(g["a"+Ve]))<0||zt>1)&&(De=!0):De=!0),fe=ot._offset+ot.r2p(g[Ve]),ze=.5}else{var Ze=Nt==="domain";Ve==="x"?(Te=g[Ve],fe=Ze?ot._offset+ot._length*Te:fe=E.l+E.w*Te):(Te=1-g[Ve],fe=Ze?ot._offset+ot._length*Te:fe=E.t+E.h*Te),ze=g.showarrow?.5:Te}if(g.showarrow){Ot.head=fe;var Ye=g["a"+Ve];if(He=Tt*ke(.5,g.xanchor)-yt*ke(.5,g.yanchor),tt===nt){var je=d.getRefType(tt);je==="domain"?(Ve==="y"&&(Ye=1-Ye),Ot.tail=ot._offset+ot._length*Ye):je==="paper"?Ve==="y"?(Ye=1-Ye,Ot.tail=E.t+E.h*Ye):Ot.tail=E.l+E.w*Ye:Ot.tail=ot._offset+ot.r2p(Ye),ve=He}else Ot.tail=fe+Ye,ve=He+Ye;Ot.text=Ot.tail+He;var Ke=_[Ve==="x"?"width":"height"];if(nt==="paper"&&(Ot.head=T.constrain(Ot.head,1,Ke-1)),tt==="pixel"){var st=-Math.max(Ot.tail-3,Ot.text),Se=Math.min(Ot.tail+3,Ot.text)-Ke;st>0?(Ot.tail+=st,Ot.text+=st):Se>0&&(Ot.tail-=Se,Ot.text-=Se)}Ot.tail+=Et,Ot.head+=Et}else ve=He=dt*ke(ze,Pt),Ot.text=fe+He;Ot.text+=Et,He+=Et,ve+=Et,g["_"+Ve+"padplus"]=dt/2+ve,g["_"+Ve+"padminus"]=dt/2-ve,g["_"+Ve+"size"]=dt,g["_"+Ve+"shift"]=He}if(De)X.remove();else{var Ie=0,We=0;if(g.align!=="left"&&(Ie=($-we)*(g.align==="center"?.5:1)),g.valign!=="top"&&(We=(oe-Ae)*(g.valign==="middle"?.5:1)),xe)Ce.select("svg").attr({x:W+Ie-1,y:W+We}).call(t.setClipUrl,ne?R:null,v);else{var it=W+We-_e.top,lt=W+Ie-_e.left;ge.call(r.positionText,lt,it).call(t.setClipUrl,ne?R:null,v)}re.select("rect").call(t.setRect,W,W,$,oe),Q.call(t.setRect,Z/2,Z/2,pe-Z,ye-Z),X.call(t.setTranslate,Math.round(V.x.text-pe/2),Math.round(V.y.text-ye/2)),U.attr({transform:"rotate("+F+","+V.x.text+","+V.y.text+")"});var gt,At=function(kt,ht){D.selectAll(".annotation-arrow-g").remove();var St=V.x.head,vt=V.y.head,Mt=V.x.tail+kt,It=V.y.tail+ht,Ut=V.x.text+kt,jt=V.y.text+ht,qt=T.rotationXYMatrix(F,Ut,jt),Yt=T.apply2DTransform(qt),Kt=T.apply2DTransform2(qt),pn=+Q.attr("width"),nn=+Q.attr("height"),xn=Ut-.5*pn,jn=xn+pn,mn=jt-.5*nn,en=mn+nn,vn=[[xn,mn,xn,en],[xn,en,jn,en],[jn,en,jn,mn],[jn,mn,xn,mn]].map(Kt);if(!vn.reduce(function($n,lr){return $n^!!T.segmentsIntersect(St,vt,St+1e6,vt+1e6,lr[0],lr[1],lr[2],lr[3])},!1)){vn.forEach(function($n){var lr=T.segmentsIntersect(Mt,It,St,vt,$n[0],$n[1],$n[2],$n[3]);lr&&(Mt=lr.x,It=lr.y)});var on=g.arrowwidth,sn=g.arrowcolor,En=g.arrowside,kn=D.append("g").style({opacity:s.opacity(sn)}).classed("annotation-arrow-g",!0),zn=kn.append("path").attr("d","M"+Mt+","+It+"L"+St+","+vt).style("stroke-width",on+"px").call(s.stroke,s.rgb(sn));if(u(zn,En,g),L.annotationPosition&&zn.node().parentNode&&!p){var Fn=St,Bn=vt;if(g.standoff){var er=Math.sqrt(Math.pow(St-Mt,2)+Math.pow(vt-It,2));Fn+=g.standoff*(Mt-St)/er,Bn+=g.standoff*(It-vt)/er}var Xn,mr,ur=kn.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Mt-Fn)+","+(It-Bn),transform:b(Fn,Bn)}).style("stroke-width",on+6+"px").call(s.stroke,"rgba(0,0,0,0)").call(s.fill,"rgba(0,0,0,0)");a.init({element:ur.node(),gd:v,prepFn:function(){var $n=t.getTranslate(X);Xn=$n.x,mr=$n.y,m&&m.autorange&&O(m._name+".autorange",!0),w&&w.autorange&&O(w._name+".autorange",!0)},moveFn:function($n,lr){var hr=Yt(Xn,mr),Gt=hr[0]+$n,hn=hr[1]+lr;X.call(t.setTranslate,Gt,hn),I("x",f(m,$n,"x",E,g)),I("y",f(w,lr,"y",E,g)),g.axref===g.xref&&I("ax",f(m,$n,"ax",E,g)),g.ayref===g.yref&&I("ay",f(w,lr,"ay",E,g)),kn.attr("transform",b($n,lr)),U.attr({transform:"rotate("+F+","+Gt+","+hn+")"})},doneFn:function(){k.call("_guiRelayout",v,N());var $n=document.querySelector(".js-notes-box-panel");$n&&$n.redraw($n.selectedObj)}})}}};g.showarrow&&At(0,0),j&&a.init({element:X.node(),gd:v,prepFn:function(){gt=U.attr("transform")},moveFn:function(kt,ht){var St="pointer";if(g.showarrow)g.axref===g.xref?I("ax",f(m,kt,"ax",E,g)):I("ax",g.ax+kt),g.ayref===g.yref?I("ay",f(w,ht,"ay",E.w,g)):I("ay",g.ay+ht),At(kt,ht);else{if(p)return;var vt,Mt;if(m)vt=f(m,kt,"x",E,g);else{var It=g._xsize/E.w,Ut=g.x+(g._xshift-g.xshift)/E.w-It/2;vt=a.align(Ut+kt/E.w,It,0,1,g.xanchor)}if(w)Mt=f(w,ht,"y",E,g);else{var jt=g._ysize/E.h,qt=g.y-(g._yshift+g.yshift)/E.h-jt/2;Mt=a.align(qt-ht/E.h,jt,0,1,g.yanchor)}I("x",vt),I("y",Mt),m&&w||(St=a.getCursor(m?.5:vt,w?.5:Mt,g.xanchor,g.yanchor))}U.attr({transform:b(kt,ht)+gt}),n(X,St)},clickFn:function(kt,ht){g.captureevents&&v.emit("plotly_clickannotation",ue(ht))},doneFn:function(){n(X),k.call("_guiRelayout",v,N());var kt=document.querySelector(".js-notes-box-panel");kt&&kt.redraw(kt.selectedObj)}})}}}K.exports={draw:function(v){var g=v._fullLayout;g._infolayer.selectAll(".annotation").remove();for(var y=0;y<g.annotations.length;y++)g.annotations[y].visible&&h(v,y);return l.previousPromises(v)},drawOne:h,drawRaw:x}},13011:function(K,z,e){var S=e(39898),k=e(7901),l=e(82884),T=e(71828),b=T.strScale,d=T.strRotate,s=T.strTranslate;K.exports=function(t,o,r){var n,a,i,u,h=t.node(),f=l[r.arrowhead||0],x=l[r.startarrowhead||0],v=(r.arrowwidth||1)*(r.arrowsize||1),g=(r.arrowwidth||1)*(r.startarrowsize||1),y=o.indexOf("start")>=0,p=o.indexOf("end")>=0,m=f.backoff*v+r.standoff,w=x.backoff*g+r.startstandoff;if(h.nodeName==="line"){n={x:+t.attr("x1"),y:+t.attr("y1")},a={x:+t.attr("x2"),y:+t.attr("y2")};var c=n.x-a.x,M=n.y-a.y;if(u=(i=Math.atan2(M,c))+Math.PI,m&&w&&m+w>Math.sqrt(c*c+M*M))return void D();if(m){if(m*m>c*c+M*M)return void D();var _=m*Math.cos(i),E=m*Math.sin(i);a.x+=_,a.y+=E,t.attr({x2:a.x,y2:a.y})}if(w){if(w*w>c*c+M*M)return void D();var L=w*Math.cos(i),C=w*Math.sin(i);n.x-=L,n.y-=C,t.attr({x1:n.x,y1:n.y})}}else if(h.nodeName==="path"){var O=h.getTotalLength(),I="";if(O<m+w)return void D();var N=h.getPointAtLength(0),R=h.getPointAtLength(.1);i=Math.atan2(N.y-R.y,N.x-R.x),n=h.getPointAtLength(Math.min(w,O)),I="0px,"+w+"px,";var V=h.getPointAtLength(O),F=h.getPointAtLength(O-.1);u=Math.atan2(V.y-F.y,V.x-F.x),a=h.getPointAtLength(Math.max(0,O-m)),I+=O-(I?w+m:m)+"px,"+O+"px",t.style("stroke-dasharray",I)}function D(){t.style("stroke-dasharray","0px,100px")}function U(j,J,X,Z){j.path&&(j.noRotate&&(X=0),S.select(h.parentNode).append("path").attr({class:t.attr("class"),d:j.path,transform:s(J.x,J.y)+d(180*X/Math.PI)+b(Z)}).style({fill:k.rgb(r.arrowcolor),"stroke-width":0}))}y&&U(x,n,i,g),p&&U(f,a,u,v)}},32745:function(K,z,e){var S=e(92605),k=e(44317);K.exports={moduleType:"component",name:"annotations",layoutAttributes:e(50215),supplyLayoutDefaults:e(84046),includeBasePlot:e(76325)("annotations"),calcAutorange:e(3749),draw:S.draw,drawOne:S.drawOne,drawRaw:S.drawRaw,hasClickToShow:k.hasClickToShow,onClick:k.onClick,convertCoords:e(94128)}},26997:function(K,z,e){var S=e(50215),k=e(30962).overrideAll,l=e(44467).templatedArray;K.exports=k(l("annotation",{visible:S.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:S.xanchor,xshift:S.xshift,yanchor:S.yanchor,yshift:S.yshift,text:S.text,textangle:S.textangle,font:S.font,width:S.width,height:S.height,opacity:S.opacity,align:S.align,valign:S.valign,bgcolor:S.bgcolor,bordercolor:S.bordercolor,borderpad:S.borderpad,borderwidth:S.borderwidth,showarrow:S.showarrow,arrowcolor:S.arrowcolor,arrowhead:S.arrowhead,startarrowhead:S.startarrowhead,arrowside:S.arrowside,arrowsize:S.arrowsize,startarrowsize:S.startarrowsize,arrowwidth:S.arrowwidth,standoff:S.standoff,startstandoff:S.startstandoff,hovertext:S.hovertext,hoverlabel:S.hoverlabel,captureevents:S.captureevents}),"calc","from-root")},5485:function(K,z,e){var S=e(71828),k=e(89298);function l(T,b){var d=b.fullSceneLayout.domain,s=b.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};T._xa={},S.extendFlat(T._xa,t),k.setConvert(T._xa),T._xa._offset=s.l+d.x[0]*s.w,T._xa.l2p=function(){return .5*(1+T._pdata[0]/T._pdata[3])*s.w*(d.x[1]-d.x[0])},T._ya={},S.extendFlat(T._ya,t),k.setConvert(T._ya),T._ya._offset=s.t+(1-d.y[1])*s.h,T._ya.l2p=function(){return .5*(1-T._pdata[1]/T._pdata[3])*s.h*(d.y[1]-d.y[0])}}K.exports=function(T){for(var b=T.fullSceneLayout.annotations,d=0;d<b.length;d++)l(b[d],T);T.fullLayout._infolayer.selectAll(".annotation-"+T.id).remove()}},20226:function(K,z,e){var S=e(71828),k=e(89298),l=e(85501),T=e(25625),b=e(26997);function d(s,t,o,r){function n(i,u){return S.coerce(s,t,b,i,u)}function a(i){var u=i+"axis",h={_fullLayout:{}};return h._fullLayout[u]=o[u],k.coercePosition(t,h,n,i,i,.5)}n("visible")&&(T(s,t,r.fullLayout,n),a("x"),a("y"),a("z"),S.noneOrAll(s,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",n("xanchor"),n("yanchor"),n("xshift"),n("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",n("ax",-10),n("ay",-30),S.noneOrAll(s,t,["ax","ay"])))}K.exports=function(s,t,o){l(s,t,{name:"annotations",handleItemDefaults:d,fullLayout:o.fullLayout})}},82188:function(K,z,e){var S=e(92605).drawRaw,k=e(63538),l=["x","y","z"];K.exports=function(T){for(var b=T.fullSceneLayout,d=T.dataScale,s=b.annotations,t=0;t<s.length;t++){for(var o=s[t],r=!1,n=0;n<3;n++){var a=l[n],i=o[a],u=b[a+"axis"].r2fraction(i);if(u<0||u>1){r=!0;break}}r?T.fullLayout._infolayer.select(".annotation-"+T.id+'[data-index="'+t+'"]').remove():(o._pdata=k(T.glplot.cameraParams,[b.xaxis.r2l(o.x)*d[0],b.yaxis.r2l(o.y)*d[1],b.zaxis.r2l(o.z)*d[2]]),S(T.graphDiv,o,t,T.id,o._xa,o._ya))}}},2468:function(K,z,e){var S=e(73972),k=e(71828);K.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e(26997)}}},layoutAttributes:e(26997),handleDefaults:e(20226),includeBasePlot:function(l,T){var b=S.subplotsRegistry.gl3d;if(b)for(var d=b.attrRegex,s=Object.keys(l),t=0;t<s.length;t++){var o=s[t];d.test(o)&&(l[o].annotations||[]).length&&(k.pushUnique(T._basePlotModules,b),k.pushUnique(T._subplots.gl3d,o))}},convert:e(5485),draw:e(82188)}},7561:function(K,z,e){K.exports=e(63489),e(94338),e(3961),e(38751),e(86825),e(37715),e(99384),e(43805),e(88874),e(83290),e(29108),e(55422),e(94320),e(31320),e(51367),e(21457)},72201:function(K,z,e){var S=e(7561),k=e(71828),l=e(50606),T=l.EPOCHJD,b=l.ONEDAY,d={valType:"enumerated",values:k.sortObjectKeys(S.calendars),editType:"calc",dflt:"gregorian"},s=function(v,g,y,p){var m={};return m[y]=d,k.coerce(v,g,m,y,p)},t="##",o={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:t,w:t,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},r={};function n(v){var g=r[v];return g||(r[v]=S.instance(v))}function a(v){return k.extendFlat({},d,{description:v})}function i(v){return"Sets the calendar system to use with `"+v+"` date data."}var u={xcalendar:a(i("x"))},h=k.extendFlat({},u,{ycalendar:a(i("y"))}),f=k.extendFlat({},h,{zcalendar:a(i("z"))}),x=a(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));K.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:h,bar:h,box:h,heatmap:h,contour:h,histogram:h,histogram2d:h,histogram2dcontour:h,scatter3d:f,surface:f,mesh3d:f,scattergl:h,ohlc:u,candlestick:u},layout:{calendar:a(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:x},yaxis:{calendar:x},scene:{xaxis:{calendar:x},yaxis:{calendar:x},zaxis:{calendar:x}},polar:{radialaxis:{calendar:x}}},transforms:{filter:{valuecalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:d,handleDefaults:s,handleTraceDefaults:function(v,g,y,p){for(var m=0;m<y.length;m++)s(v,g,y[m]+"calendar",p.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:n,worldCalFmt:function(v,g,y){for(var p,m,w,c,M,_=Math.floor((g+.05)/b)+T,E=n(y).fromJD(_),L=0;(L=v.indexOf("%",L))!==-1;)(p=v.charAt(L+1))==="0"||p==="-"||p==="_"?(w=3,m=v.charAt(L+2),p==="_"&&(p="-")):(m=p,p="0",w=2),(c=o[m])?(M=c===t?t:E.formatDate(c[p]),v=v.substr(0,L)+M+v.substr(L+w),L+=M.length):L+=w;return v}}},22399:function(K,z){z.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],z.defaultLine="#444",z.lightLine="#eee",z.background="#fff",z.borderLine="#BEC8D9",z.lightFraction=90.9090909090909},7901:function(K,z,e){var S=e(84267),k=e(92770),l=e(73627).isTypedArray,T=K.exports={},b=e(22399);T.defaults=b.defaults;var d=T.defaultLine=b.defaultLine;T.lightLine=b.lightLine;var s=T.background=b.background;function t(o){if(k(o)||typeof o!="string")return o;var r=o.trim();if(r.substr(0,3)!=="rgb")return o;var n=r.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return o;var a=n[1].trim().split(/\s*[\s,]\s*/),i=r.charAt(3)==="a"&&a.length===4;if(!i&&a.length!==3)return o;for(var u=0;u<a.length;u++){if(!a[u].length||(a[u]=Number(a[u]),!(a[u]>=0)))return o;if(u===3)a[u]>1&&(a[u]=1);else if(a[u]>=1)return o}var h=Math.round(255*a[0])+", "+Math.round(255*a[1])+", "+Math.round(255*a[2]);return i?"rgba("+h+", "+a[3]+")":"rgb("+h+")"}T.tinyRGB=function(o){var r=o.toRgb();return"rgb("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+")"},T.rgb=function(o){return T.tinyRGB(S(o))},T.opacity=function(o){return o?S(o).getAlpha():0},T.addOpacity=function(o,r){var n=S(o).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+r+")"},T.combine=function(o,r){var n=S(o).toRgb();if(n.a===1)return S(o).toRgbString();var a=S(r||s).toRgb(),i=a.a===1?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a},u={r:i.r*(1-n.a)+n.r*n.a,g:i.g*(1-n.a)+n.g*n.a,b:i.b*(1-n.a)+n.b*n.a};return S(u).toRgbString()},T.contrast=function(o,r,n){var a=S(o);return a.getAlpha()!==1&&(a=S(T.combine(o,s))),(a.isDark()?r?a.lighten(r):s:n?a.darken(n):d).toString()},T.stroke=function(o,r){var n=S(r);o.style({stroke:T.tinyRGB(n),"stroke-opacity":n.getAlpha()})},T.fill=function(o,r){var n=S(r);o.style({fill:T.tinyRGB(n),"fill-opacity":n.getAlpha()})},T.clean=function(o){if(o&&typeof o=="object"){var r,n,a,i,u=Object.keys(o);for(r=0;r<u.length;r++)if(i=o[a=u[r]],a.substr(a.length-5)==="color")if(Array.isArray(i))for(n=0;n<i.length;n++)i[n]=t(i[n]);else o[a]=t(i);else if(a.substr(a.length-10)==="colorscale"&&Array.isArray(i))for(n=0;n<i.length;n++)Array.isArray(i[n])&&(i[n][1]=t(i[n][1]));else if(Array.isArray(i)){var h=i[0];if(!Array.isArray(h)&&h&&typeof h=="object")for(n=0;n<i.length;n++)T.clean(i[n])}else i&&typeof i=="object"&&!l(i)&&T.clean(i)}}},63583:function(K,z,e){var S=e(13838),k=e(41940),l=e(1426).extendFlat,T=e(30962).overrideAll;K.exports=T({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:S.linecolor,outlinewidth:S.linewidth,bordercolor:S.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:S.minor.tickmode,nticks:S.nticks,tick0:S.tick0,dtick:S.dtick,tickvals:S.tickvals,ticktext:S.ticktext,ticks:l({},S.ticks,{dflt:""}),ticklabeloverflow:l({},S.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:S.ticklen,tickwidth:S.tickwidth,tickcolor:S.tickcolor,ticklabelstep:S.ticklabelstep,showticklabels:S.showticklabels,labelalias:S.labelalias,tickfont:k({}),tickangle:S.tickangle,tickformat:S.tickformat,tickformatstops:S.tickformatstops,tickprefix:S.tickprefix,showtickprefix:S.showtickprefix,ticksuffix:S.ticksuffix,showticksuffix:S.showticksuffix,separatethousands:S.separatethousands,exponentformat:S.exponentformat,minexponent:S.minexponent,showexponent:S.showexponent,title:{text:{valType:"string"},font:k({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:k({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},30939:function(K){K.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},62499:function(K,z,e){var S=e(71828),k=e(44467),l=e(26218),T=e(38701),b=e(96115),d=e(89426),s=e(63583);K.exports=function(t,o,r){var n=k.newContainer(o,"colorbar"),a=t.colorbar||{};function i(M,_){return S.coerce(a,n,s,M,_)}var u=r.margin||{t:0,b:0,l:0,r:0},h=r.width-u.l-u.r,f=r.height-u.t-u.b,x=i("orientation")==="v",v=i("thicknessmode");i("thickness",v==="fraction"?30/(x?h:f):30);var g=i("lenmode");i("len",g==="fraction"?1:x?f:h),i("x",x?1.02:.5),i("xanchor",x?"left":"center"),i("xpad"),i("y",x?.5:1.02),i("yanchor",x?"middle":"bottom"),i("ypad"),S.noneOrAll(a,n,["x","y"]),i("outlinecolor"),i("outlinewidth"),i("bordercolor"),i("borderwidth"),i("bgcolor");var y=S.coerce(a,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:x?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");i("ticklabeloverflow",y.indexOf("inside")!==-1?"hide past domain":"hide past div"),l(a,n,i,"linear");var p=r.font,m={outerTicks:!1,font:p};y.indexOf("inside")!==-1&&(m.bgColor="black"),d(a,n,i,"linear",m),b(a,n,i,"linear",m),T(a,n,i,"linear",m),i("title.text",r._dfltTitle.colorbar);var w=n.showticklabels?n.tickfont:p,c=S.extendFlat({},w,{color:p.color,size:S.bigFont(w.size)});S.coerceFont(i,"title.font",c),i("title.side",x?"top":"right")}},98981:function(K,z,e){var S=e(39898),k=e(84267),l=e(74875),T=e(73972),b=e(89298),d=e(28569),s=e(71828),t=s.strTranslate,o=e(1426).extendFlat,r=e(6964),n=e(91424),a=e(7901),i=e(92998),u=e(63893),h=e(52075).flipScale,f=e(71453),x=e(52830),v=e(13838),g=e(18783),y=g.LINE_SPACING,p=g.FROM_TL,m=g.FROM_BR,w=e(30939).cn;K.exports={draw:function(c){var M=c._fullLayout._infolayer.selectAll("g."+w.colorbar).data(function(_){var E,L,C,O,I=_._fullLayout,N=_.calcdata,R=[];function V(ne){return o(ne,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function F(){typeof O.calc=="function"?O.calc(_,C,E):(E._fillgradient=L.reversescale?h(L.colorscale):L.colorscale,E._zrange=[L[O.min],L[O.max]])}for(var D=0;D<N.length;D++){var U=N[D],j=(C=U[0].trace)._module.colorbar;if(C.visible===!0&&j)for(var J=Array.isArray(j),X=J?j:[j],Z=0;Z<X.length;Z++){var Y=(O=X[Z]).container;(L=Y?C[Y]:C)&&L.showscale&&((E=V(L.colorbar))._id="cb"+C.uid+(J&&Y?"-"+Y:""),E._traceIndex=C.index,E._propPrefix=(Y?Y+".":"")+"colorbar.",E._meta=C._meta,F(),R.push(E))}}for(var W in I._colorAxes)if((L=I[W]).showscale){var Q=I._colorAxes[W];(E=V(L.colorbar))._id="cb"+W,E._propPrefix=W+".colorbar.",E._meta=I._meta,O={min:"cmin",max:"cmax"},Q[0]!=="heatmap"&&(C=Q[1],O.calc=C._module.colorbar.calc),F(),R.push(E)}return R}(c),function(_){return _._id});M.enter().append("g").attr("class",function(_){return _._id}).classed(w.colorbar,!0),M.each(function(_){var E=S.select(this);s.ensureSingle(E,"rect",w.cbbg),s.ensureSingle(E,"g",w.cbfills),s.ensureSingle(E,"g",w.cblines),s.ensureSingle(E,"g",w.cbaxis,function(C){C.classed(w.crisp,!0)}),s.ensureSingle(E,"g",w.cbtitleunshift,function(C){C.append("g").classed(w.cbtitle,!0)}),s.ensureSingle(E,"rect",w.cboutline);var L=function(C,O,I){var N=O.orientation==="v",R=O.len,V=O.lenmode,F=O.thickness,D=O.thicknessmode,U=O.outlinewidth,j=O.borderwidth,J=O.bgcolor,X=O.xanchor,Z=O.yanchor,Y=O.xpad,W=O.ypad,Q=O.x,ne=N?O.y:1-O.y,re=I._fullLayout,ie=re._size,se=O._fillcolor,ge=O._line,ue=O.title,ce=ue.side,le=O._zrange||S.extent((typeof se=="function"?se:ge.color).domain()),de=typeof ge.color=="function"?ge.color:function(){return ge.color},Ce=typeof se=="function"?se:function(){return se},xe=O._levels,_e=function(Nt,zt,Ze){var Ye,je,Ke=zt._levels,st=[],Se=[],Ie=Ke.end+Ke.size/100,We=Ke.size,it=1.001*Ze[0]-.001*Ze[1],lt=1.001*Ze[1]-.001*Ze[0];for(je=0;je<1e5&&(Ye=Ke.start+je*We,!(We>0?Ye>=Ie:Ye<=Ie));je++)Ye>it&&Ye<lt&&st.push(Ye);if(zt._fillgradient)Se=[0];else if(typeof zt._fillcolor=="function"){var gt=zt._filllevels;if(gt)for(Ie=gt.end+gt.size/100,We=gt.size,je=0;je<1e5&&(Ye=gt.start+je*We,!(We>0?Ye>=Ie:Ye<=Ie));je++)Ye>Ze[0]&&Ye<Ze[1]&&Se.push(Ye);else(Se=st.map(function(At){return At-Ke.size/2})).push(Se[Se.length-1]+Ke.size)}else zt._fillcolor&&typeof zt._fillcolor=="string"&&(Se=[0]);return Ke.size<0&&(st.reverse(),Se.reverse()),{line:st,fill:Se}}(0,O,le),we=_e.fill,Ae=_e.line,$=Math.round(F*(D==="fraction"?N?ie.w:ie.h:1)),oe=$/(N?ie.w:ie.h),pe=Math.round(R*(V==="fraction"?N?ie.h:ie.w:1)),ye=pe/(N?ie.h:ie.w),ke=Math.round(N?Q*ie.w+Y:ne*ie.h+W),De={center:.5,right:1}[X]||0,Pe={top:1,middle:.5}[Z]||0,Re=N?Q-De*oe:ne-Pe*oe,fe=N?ne-Pe*ye:Q-De*ye,ve=Math.round(N?ie.h*(1-fe):ie.w*fe);O._lenFrac=ye,O._thickFrac=oe,O._uFrac=Re,O._vFrac=fe;var Te=O._axis=function(Nt,zt,Ze){var Ye=Nt._fullLayout,je=zt.orientation==="v",Ke={type:"linear",range:Ze,tickmode:zt.tickmode,nticks:zt.nticks,tick0:zt.tick0,dtick:zt.dtick,tickvals:zt.tickvals,ticktext:zt.ticktext,ticks:zt.ticks,ticklen:zt.ticklen,tickwidth:zt.tickwidth,tickcolor:zt.tickcolor,showticklabels:zt.showticklabels,labelalias:zt.labelalias,ticklabelposition:zt.ticklabelposition,ticklabeloverflow:zt.ticklabeloverflow,ticklabelstep:zt.ticklabelstep,tickfont:zt.tickfont,tickangle:zt.tickangle,tickformat:zt.tickformat,exponentformat:zt.exponentformat,minexponent:zt.minexponent,separatethousands:zt.separatethousands,showexponent:zt.showexponent,showtickprefix:zt.showtickprefix,tickprefix:zt.tickprefix,showticksuffix:zt.showticksuffix,ticksuffix:zt.ticksuffix,title:zt.title,showline:!0,anchor:"free",side:je?"right":"bottom",position:1},st=je?"y":"x",Se={type:"linear",_id:st+zt._id},Ie={letter:st,font:Ye.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:Ye.calendar};function We(it,lt){return s.coerce(Ke,Se,v,it,lt)}return f(Ke,Se,We,Ie,Ye),x(Ke,Se,We,Ie),Se}(I,O,le);Te.position=oe+(N?Q+Y/ie.w:ne+W/ie.h);var ze=["top","bottom"].indexOf(ce)!==-1;if(N&&ze&&(Te.title.side=ce,Te.titlex=Q+Y/ie.w,Te.titley=fe+(ue.side==="top"?ye-W/ie.h:W/ie.h)),N||ze||(Te.title.side=ce,Te.titley=ne+W/ie.h,Te.titlex=fe+Y/ie.w),ge.color&&O.tickmode==="auto"){Te.tickmode="linear",Te.tick0=xe.start;var He=xe.size,Ve=s.constrain(pe/50,4,15)+1,nt=(le[1]-le[0])/((O.nticks||Ve)*He);if(nt>1){var tt=Math.pow(10,Math.floor(Math.log(nt)/Math.LN10));He*=tt*s.roundUp(nt/tt,[2,5,10]),(Math.abs(xe.start)/xe.size+1e-6)%1<2e-6&&(Te.tick0=0)}Te.dtick=He}Te.domain=N?[fe+W/ie.h,fe+ye-W/ie.h]:[fe+Y/ie.w,fe+ye-Y/ie.w],Te.setScale(),C.attr("transform",t(Math.round(ie.l),Math.round(ie.t)));var ot,pt=C.select("."+w.cbtitleunshift).attr("transform",t(-Math.round(ie.l),-Math.round(ie.t))),Tt=Te.ticklabelposition,yt=Te.title.font.size,dt=C.select("."+w.cbaxis),Pt=0,Et=0;function Ot(Nt,zt){var Ze={propContainer:Te,propName:O._propPrefix+"title",traceIndex:O._traceIndex,_meta:O._meta,placeholder:re._dfltTitle.colorbar,containerGroup:C.select("."+w.cbtitle)},Ye=Nt.charAt(0)==="h"?Nt.substr(1):"h"+Nt;C.selectAll("."+Ye+",."+Ye+"-math-group").remove(),i.draw(I,Nt,o(Ze,zt||{}))}return s.syncOrAsync([l.previousPromises,function(){var Nt,zt;(N&&ze||!N&&!ze)&&(ce==="top"&&(Nt=Y+ie.l+ie.w*Q,zt=W+ie.t+ie.h*(1-fe-ye)+3+.75*yt),ce==="bottom"&&(Nt=Y+ie.l+ie.w*Q,zt=W+ie.t+ie.h*(1-fe)-3-.25*yt),ce==="right"&&(zt=W+ie.t+ie.h*ne+3+.75*yt,Nt=Y+ie.l+ie.w*fe),Ot(Te._id+"title",{attributes:{x:Nt,y:zt,"text-anchor":N?"start":"middle"}}))},function(){if(!N&&!ze||N&&ze){var Nt,zt=C.select("."+w.cbtitle),Ze=zt.select("text"),Ye=[-U/2,U/2],je=zt.select(".h"+Te._id+"title-math-group").node(),Ke=15.6;if(Ze.node()&&(Ke=parseInt(Ze.node().style.fontSize,10)*y),je?(Nt=n.bBox(je),Et=Nt.width,(Pt=Nt.height)>Ke&&(Ye[1]-=(Pt-Ke)/2)):Ze.node()&&!Ze.classed(w.jsPlaceholder)&&(Nt=n.bBox(Ze.node()),Et=Nt.width,Pt=Nt.height),N){if(Pt){if(Pt+=5,ce==="top")Te.domain[1]-=Pt/ie.h,Ye[1]*=-1;else{Te.domain[0]+=Pt/ie.h;var st=u.lineCount(Ze);Ye[1]+=(1-st)*Ke}zt.attr("transform",t(Ye[0],Ye[1])),Te.setScale()}}else Et&&(ce==="right"&&(Te.domain[0]+=(Et+yt/2)/ie.w),zt.attr("transform",t(Ye[0],Ye[1])),Te.setScale())}C.selectAll("."+w.cbfills+",."+w.cblines).attr("transform",N?t(0,Math.round(ie.h*(1-Te.domain[1]))):t(Math.round(ie.w*Te.domain[0]),0)),dt.attr("transform",N?t(0,Math.round(-ie.t)):t(Math.round(-ie.l),0));var Se=C.select("."+w.cbfills).selectAll("rect."+w.cbfill).attr("style","").data(we);Se.enter().append("rect").classed(w.cbfill,!0).style("stroke","none"),Se.exit().remove();var Ie=le.map(Te.c2p).map(Math.round).sort(function(At,kt){return At-kt});Se.each(function(At,kt){var ht=[kt===0?le[0]:(we[kt]+we[kt-1])/2,kt===we.length-1?le[1]:(we[kt]+we[kt+1])/2].map(Te.c2p).map(Math.round);N&&(ht[1]=s.constrain(ht[1]+(ht[1]>ht[0])?1:-1,Ie[0],Ie[1]));var St=S.select(this).attr(N?"x":"y",ke).attr(N?"y":"x",S.min(ht)).attr(N?"width":"height",Math.max($,2)).attr(N?"height":"width",Math.max(S.max(ht)-S.min(ht),2));if(O._fillgradient)n.gradient(St,I,O._id,N?"vertical":"horizontalreversed",O._fillgradient,"fill");else{var vt=Ce(At).replace("e-","");St.attr("fill",k(vt).toHexString())}});var We=C.select("."+w.cblines).selectAll("path."+w.cbline).data(ge.color&&ge.width?Ae:[]);We.enter().append("path").classed(w.cbline,!0),We.exit().remove(),We.each(function(At){var kt=ke,ht=Math.round(Te.c2p(At))+ge.width/2%1;S.select(this).attr("d","M"+(N?kt+","+ht:ht+","+kt)+(N?"h":"v")+$).call(n.lineGroupStyle,ge.width,de(At),ge.dash)}),dt.selectAll("g."+Te._id+"tick,path").remove();var it=ke+$+(U||0)/2-(O.ticks==="outside"?1:0),lt=b.calcTicks(Te),gt=b.getTickSigns(Te)[2];return b.drawTicks(I,Te,{vals:Te.ticks==="inside"?b.clipEnds(Te,lt):lt,layer:dt,path:b.makeTickPath(Te,it,gt),transFn:b.makeTransTickFn(Te)}),b.drawLabels(I,Te,{vals:lt,layer:dt,transFn:b.makeTransTickLabelFn(Te),labelFns:b.makeLabelFns(Te,it)})},function(){if(N&&!ze||!N&&ze){var Nt,zt,Ze=Te.position||0,Ye=Te._offset+Te._length/2;if(ce==="right")zt=Ye,Nt=ie.l+ie.w*Ze+10+yt*(Te.showticklabels?1:.5);else if(Nt=Ye,ce==="bottom"&&(zt=ie.t+ie.h*Ze+10+(Tt.indexOf("inside")===-1?Te.tickfont.size:0)+(Te.ticks!=="intside"&&O.ticklen||0)),ce==="top"){var je=ue.text.split("<br>").length;zt=ie.t+ie.h*Ze+10-$-y*yt*je}Ot((N?"h":"v")+Te._id+"title",{avoid:{selection:S.select(I).selectAll("g."+Te._id+"tick"),side:ce,offsetTop:N?0:ie.t,offsetLeft:N?ie.l:0,maxShift:N?re.width:re.height},attributes:{x:Nt,y:zt,"text-anchor":"middle"},transform:{rotate:N?-90:0,offset:0}})}},l.previousPromises,function(){var Nt,zt=$+U/2;Tt.indexOf("inside")===-1&&(Nt=n.bBox(dt.node()),zt+=N?Nt.width:Nt.height),ot=pt.select("text");var Ze=0,Ye=N&&ce==="top",je=!N&&ce==="right",Ke=0;if(ot.node()&&!ot.classed(w.jsPlaceholder)){var st,Se=pt.select(".h"+Te._id+"title-math-group").node();Se&&(N&&ze||!N&&!ze)?(Ze=(Nt=n.bBox(Se)).width,st=Nt.height):(Ze=(Nt=n.bBox(pt.node())).right-ie.l-(N?ke:ve),st=Nt.bottom-ie.t-(N?ve:ke),N||ce!=="top"||(zt+=Nt.height,Ke=Nt.height)),je&&(ot.attr("transform",t(Ze/2+yt/2,0)),Ze*=2),zt=Math.max(zt,N?Ze:st)}var Ie=2*(N?Y:W)+zt+j+U/2,We=0;!N&&ue.text&&Z==="bottom"&&ne<=0&&(Ie+=We=Ie/2,Ke+=We),re._hColorbarMoveTitle=We,re._hColorbarMoveCBTitle=Ke;var it=j+U;C.select("."+w.cbbg).attr("x",(N?ke:ve)-it/2-(N?Y:0)).attr("y",(N?ve:ke)-(N?pe:W+Ke-We)).attr(N?"width":"height",Math.max(Ie-We,2)).attr(N?"height":"width",Math.max(pe+it,2)).call(a.fill,J).call(a.stroke,O.bordercolor).style("stroke-width",j);var lt=je?Math.max(Ze-10,0):0;if(C.selectAll("."+w.cboutline).attr("x",(N?ke:ve+Y)+lt).attr("y",(N?ve+W-pe:ke)+(Ye?Pt:0)).attr(N?"width":"height",Math.max($,2)).attr(N?"height":"width",Math.max(pe-(N?2*W+Pt:2*Y+lt),2)).call(a.stroke,O.outlinecolor).style({fill:"none","stroke-width":U}),C.attr("transform",t(ie.l-(N?De*Ie:0),ie.t-(N?0:(1-Pe)*Ie-Ke))),!N&&(j||k(J).getAlpha()&&!k.equals(re.paper_bgcolor,J))){var gt=dt.selectAll("text"),At=gt[0].length,kt=C.select("."+w.cbbg).node(),ht=n.bBox(kt),St=n.getTranslate(C);gt.each(function(Yt,Kt){var pn=At-1;if(Kt===0||Kt===pn){var nn,xn=n.bBox(this),jn=n.getTranslate(this);if(Kt===pn){var mn=xn.right+jn.x;(nn=ht.right+St.x+ve-j-2+Q-mn)>0&&(nn=0)}else if(Kt===0){var en=xn.left+jn.x;(nn=ht.left+St.x+ve+j+2-en)<0&&(nn=0)}nn&&(At<3?this.setAttribute("transform","translate("+nn+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var vt={},Mt=p[X],It=m[X],Ut=p[Z],jt=m[Z],qt=Ie-$;N?(V==="pixels"?(vt.y=ne,vt.t=pe*Ut,vt.b=pe*jt):(vt.t=vt.b=0,vt.yt=ne+R*Ut,vt.yb=ne-R*jt),D==="pixels"?(vt.x=Q,vt.l=Ie*Mt,vt.r=Ie*It):(vt.l=qt*Mt,vt.r=qt*It,vt.xl=Q-F*Mt,vt.xr=Q+F*It)):(V==="pixels"?(vt.x=Q,vt.l=pe*Mt,vt.r=pe*It):(vt.l=vt.r=0,vt.xl=Q+R*Mt,vt.xr=Q-R*It),D==="pixels"?(vt.y=1-ne,vt.t=Ie*Ut,vt.b=Ie*jt):(vt.t=qt*Ut,vt.b=qt*jt,vt.yt=ne-F*Ut,vt.yb=ne+F*jt)),l.autoMargin(I,O._id,vt)}],I)}(E,_,c);L&&L.then&&(c._promises||[]).push(L),c._context.edits.colorbarPosition&&function(C,O,I){var N,R,V,F=O.orientation==="v",D=I._fullLayout._size;d.init({element:C.node(),gd:I,prepFn:function(){N=C.attr("transform"),r(C)},moveFn:function(U,j){C.attr("transform",N+t(U,j)),R=d.align((F?O._uFrac:O._vFrac)+U/D.w,F?O._thickFrac:O._lenFrac,0,1,O.xanchor),V=d.align((F?O._vFrac:1-O._uFrac)-j/D.h,F?O._lenFrac:O._thickFrac,0,1,O.yanchor);var J=d.getCursor(R,V,O.xanchor,O.yanchor);r(C,J)},doneFn:function(){if(r(C),R!==void 0&&V!==void 0){var U={};U[O._propPrefix+"x"]=R,U[O._propPrefix+"y"]=V,O._traceIndex!==void 0?T.call("_guiRestyle",I,U,O._traceIndex):T.call("_guiRelayout",I,U)}}})}(E,_,c)}),M.exit().each(function(_){l.autoMargin(c,_._id)}).remove(),M.order()}}},76228:function(K,z,e){var S=e(71828);K.exports=function(k){return S.isPlainObject(k.colorbar)}},12311:function(K,z,e){K.exports={moduleType:"component",name:"colorbar",attributes:e(63583),supplyDefaults:e(62499),draw:e(98981).draw,hasColorbar:e(76228)}},50693:function(K,z,e){var S=e(63583),k=e(30587).counter,l=e(78607),T=e(63282).scales;function b(d){return"`"+d+"`"}l(T),K.exports=function(d,s){d=d||"";var t,o=(s=s||{}).cLetter||"c",r=("onlyIfNumerical"in s&&s.onlyIfNumerical,"noScale"in s?s.noScale:d==="marker.line"),n="showScaleDflt"in s?s.showScaleDflt:o==="z",a=typeof s.colorscaleDflt=="string"?T[s.colorscaleDflt]:null,i=s.editTypeOverride||"",u=d?d+".":"";"colorAttr"in s?(t=s.colorAttr,s.colorAttr):b(u+(t={z:"z",c:"color"}[o]));var h=o+"auto",f=o+"min",x=o+"max",v=o+"mid",g={};g[f]=g[x]=void 0;var y={};y[h]=!1;var p={};return t==="color"&&(p.color={valType:"color",arrayOk:!0,editType:i||"style"},s.anim&&(p.color.anim=!0)),p[h]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:g},p[f]={valType:"number",dflt:null,editType:i||"plot",impliedEdits:y},p[x]={valType:"number",dflt:null,editType:i||"plot",impliedEdits:y},p[v]={valType:"number",dflt:null,editType:"calc",impliedEdits:g},p.colorscale={valType:"colorscale",editType:"calc",dflt:a,impliedEdits:{autocolorscale:!1}},p.autocolorscale={valType:"boolean",dflt:s.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},p.reversescale={valType:"boolean",dflt:!1,editType:"plot"},r||(p.showscale={valType:"boolean",dflt:n,editType:"calc"},p.colorbar=S),s.noColorAxis||(p.coloraxis={valType:"subplotid",regex:k("coloraxis"),dflt:null,editType:"calc"}),p}},78803:function(K,z,e){var S=e(92770),k=e(71828),l=e(52075).extractOpts;K.exports=function(T,b,d){var s,t=T._fullLayout,o=d.vals,r=d.containerStr,n=r?k.nestedProperty(b,r).get():b,a=l(n),i=a.auto!==!1,u=a.min,h=a.max,f=a.mid,x=function(){return k.aggNums(Math.min,null,o)},v=function(){return k.aggNums(Math.max,null,o)};u===void 0?u=x():i&&(u=n._colorAx&&S(u)?Math.min(u,x()):x()),h===void 0?h=v():i&&(h=n._colorAx&&S(h)?Math.max(h,v()):v()),i&&f!==void 0&&(h-f>f-u?u=f-(h-f):h-f<f-u&&(h=f+(f-u))),u===h&&(u-=.5,h+=.5),a._sync("min",u),a._sync("max",h),a.autocolorscale&&(s=u*h<0?t.colorscale.diverging:u>=0?t.colorscale.sequential:t.colorscale.sequentialminus,a._sync("colorscale",s))}},33046:function(K,z,e){var S=e(71828),k=e(52075).hasColorscale,l=e(52075).extractOpts;K.exports=function(T,b){function d(i,u){var h=i["_"+u];h!==void 0&&(i[u]=h)}function s(i,u){var h=u.container?S.nestedProperty(i,u.container).get():i;if(h)if(h.coloraxis)h._colorAx=b[h.coloraxis];else{var f=l(h),x=f.auto;(x||f.min===void 0)&&d(h,u.min),(x||f.max===void 0)&&d(h,u.max),f.autocolorscale&&d(h,"colorscale")}}for(var t=0;t<T.length;t++){var o=T[t],r=o._module.colorbar;if(r)if(Array.isArray(r))for(var n=0;n<r.length;n++)s(o,r[n]);else s(o,r);k(o,"marker.line")&&s(o,{container:"marker.line",min:"cmin",max:"cmax"})}for(var a in b._colorAxes)s(b[a],{min:"cmin",max:"cmax"})}},1586:function(K,z,e){var S=e(92770),k=e(71828),l=e(76228),T=e(62499),b=e(63282).isValid,d=e(73972).traceIs;function s(t,o){var r=o.slice(0,o.length-1);return o?k.nestedProperty(t,r).get()||{}:t}K.exports=function t(o,r,n,a,i){var u=i.prefix,h=i.cLetter,f="_module"in r,x=s(o,u),v=s(r,u),g=s(r._template||{},u)||{},y=function(){return delete o.coloraxis,delete r.coloraxis,t(o,r,n,a,i)};if(f){var p=n._colorAxes||{},m=a(u+"coloraxis");if(m){var w=d(r,"contour")&&k.nestedProperty(r,"contours.coloring").get()||"heatmap",c=p[m];return void(c?(c[2].push(y),c[0]!==w&&(c[0]=!1,k.warn(["Ignoring coloraxis:",m,"setting","as it is linked to incompatible colorscales."].join(" ")))):p[m]=[w,r,[y]])}}var M=x[h+"min"],_=x[h+"max"],E=S(M)&&S(_)&&M<_;a(u+h+"auto",!E)?a(u+h+"mid"):(a(u+h+"min"),a(u+h+"max"));var L,C,O=x.colorscale,I=g.colorscale;O!==void 0&&(L=!b(O)),I!==void 0&&(L=!b(I)),a(u+"autocolorscale",L),a(u+"colorscale"),a(u+"reversescale"),u!=="marker.line."&&(u&&f&&(C=l(x)),a(u+"showscale",C)&&(u&&g&&(v._template=g),T(x,v,n)))}},52075:function(K,z,e){var S=e(39898),k=e(84267),l=e(92770),T=e(71828),b=e(7901),d=e(63282).isValid,s=["showscale","autocolorscale","colorscale","reversescale","colorbar"],t=["min","max","mid","auto"];function o(u){var h,f,x,v=u._colorAx,g=v||u,y={};for(f=0;f<s.length;f++)y[x=s[f]]=g[x];if(v)for(h="c",f=0;f<t.length;f++)y[x=t[f]]=g["c"+x];else{var p;for(f=0;f<t.length;f++)((p="c"+(x=t[f]))in g||(p="z"+x)in g)&&(y[x]=g[p]);h=p.charAt(0)}return y._sync=function(m,w){var c=t.indexOf(m)!==-1?h+m:m;g[c]=g["_"+c]=w},y}function r(u){for(var h=o(u),f=h.min,x=h.max,v=h.reversescale?n(h.colorscale):h.colorscale,g=v.length,y=new Array(g),p=new Array(g),m=0;m<g;m++){var w=v[m];y[m]=f+w[0]*(x-f),p[m]=w[1]}return{domain:y,range:p}}function n(u){for(var h=u.length,f=new Array(h),x=h-1,v=0;x>=0;x--,v++){var g=u[x];f[v]=[1-g[0],g[1]]}return f}function a(u,h){h=h||{};for(var f=u.domain,x=u.range,v=x.length,g=new Array(v),y=0;y<v;y++){var p=k(x[y]).toRgb();g[y]=[p.r,p.g,p.b,p.a]}var m,w=S.scale.linear().domain(f).range(g).clamp(!0),c=h.noNumericCheck,M=h.returnArray;return(m=c&&M?w:c?function(_){return i(w(_))}:M?function(_){return l(_)?w(_):k(_).isValid()?_:b.defaultLine}:function(_){return l(_)?i(w(_)):k(_).isValid()?_:b.defaultLine}).domain=w.domain,m.range=function(){return x},m}function i(u){var h={r:u[0],g:u[1],b:u[2],a:u[3]};return k(h).toRgbString()}K.exports={hasColorscale:function(u,h,f){var x=h?T.nestedProperty(u,h).get()||{}:u,v=x[f||"color"],g=!1;if(T.isArrayOrTypedArray(v)){for(var y=0;y<v.length;y++)if(l(v[y])){g=!0;break}}return T.isPlainObject(x)&&(g||x.showscale===!0||l(x.cmin)&&l(x.cmax)||d(x.colorscale)||T.isPlainObject(x.colorbar))},extractOpts:o,extractScale:r,flipScale:n,makeColorScaleFunc:a,makeColorScaleFuncFromTrace:function(u,h){return a(r(u),h)}}},21081:function(K,z,e){var S=e(63282),k=e(52075);K.exports={moduleType:"component",name:"colorscale",attributes:e(50693),layoutAttributes:e(72673),supplyLayoutDefaults:e(30959),handleDefaults:e(1586),crossTraceDefaults:e(33046),calc:e(78803),scales:S.scales,defaultScale:S.defaultScale,getScale:S.get,isValidScale:S.isValid,hasColorscale:k.hasColorscale,extractOpts:k.extractOpts,extractScale:k.extractScale,flipScale:k.flipScale,makeColorScaleFunc:k.makeColorScaleFunc,makeColorScaleFuncFromTrace:k.makeColorScaleFuncFromTrace}},72673:function(K,z,e){var S=e(1426).extendFlat,k=e(50693),l=e(63282).scales;K.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:l.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:l.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:l.RdBu,editType:"calc"}},coloraxis:S({_isSubplotObj:!0,editType:"calc"},k("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},30959:function(K,z,e){var S=e(71828),k=e(44467),l=e(72673),T=e(1586);K.exports=function(b,d){function s(h,f){return S.coerce(b,d,l,h,f)}s("colorscale.sequential"),s("colorscale.sequentialminus"),s("colorscale.diverging");var t,o,r=d._colorAxes;function n(h,f){return S.coerce(t,o,l.coloraxis,h,f)}for(var a in r){var i=r[a];if(i[0])t=b[a]||{},(o=k.newContainer(d,a,"coloraxis"))._name=a,T(t,o,d,n,{prefix:"",cLetter:"c"});else{for(var u=0;u<i[2].length;u++)i[2][u]();delete d._colorAxes[a]}}}},63282:function(K,z,e){var S=e(84267),k={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},l=k.RdBu;function T(b){var d=0;if(!Array.isArray(b)||b.length<2||!b[0]||!b[b.length-1]||+b[0][0]!=0||+b[b.length-1][0]!=1)return!1;for(var s=0;s<b.length;s++){var t=b[s];if(t.length!==2||+t[0]<d||!S(t[1]).isValid())return!1;d=+t[0]}return!0}K.exports={scales:k,defaultScale:l,get:function(b,d){if(d||(d=l),!b)return d;function s(){try{b=k[b]||JSON.parse(b)}catch{b=d}}return typeof b=="string"&&(s(),typeof b=="string"&&s()),T(b)?b:d},isValid:function(b){return k[b]!==void 0||T(b)}}},92807:function(K){K.exports=function(z,e,S,k,l){var T=(z-S)/(k-S),b=T+e/(k-S),d=(T+b)/2;return l==="left"||l==="bottom"?T:l==="center"||l==="middle"?d:l==="right"||l==="top"?b:T<.6666666666666666-d?T:b>1.3333333333333333-d?b:d}},70461:function(K,z,e){var S=e(71828),k=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];K.exports=function(l,T,b,d){return l=b==="left"?0:b==="center"?1:b==="right"?2:S.constrain(Math.floor(3*l),0,2),T=d==="bottom"?0:d==="middle"?1:d==="top"?2:S.constrain(Math.floor(3*T),0,2),k[T][l]}},64505:function(K,z){z.selectMode=function(e){return e==="lasso"||e==="select"},z.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"},z.openMode=function(e){return e==="drawline"||e==="drawopenpath"},z.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"},z.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"},z.selectingOrDrawing=function(e){return z.freeMode(e)||z.rectMode(e)}},28569:function(K,z,e){var S=e(48956),k=e(57035),l=e(38520),T=e(71828).removeElement,b=e(85555),d=K.exports={};d.align=e(92807),d.getCursor=e(70461);var s=e(26041);function t(){var r=document.createElement("div");r.className="dragcover";var n=r.style;return n.position="fixed",n.left=0,n.right=0,n.top=0,n.bottom=0,n.zIndex=999999999,n.background="none",document.body.appendChild(r),r}function o(r){return S(r.changedTouches?r.changedTouches[0]:r,document.body)}d.unhover=s.wrapped,d.unhoverRaw=s.raw,d.init=function(r){var n,a,i,u,h,f,x,v,g=r.gd,y=1,p=g._context.doubleClickDelay,m=r.element;g._mouseDownTime||(g._mouseDownTime=0),m.style.pointerEvents="all",m.onmousedown=c,l?(m._ontouchstart&&m.removeEventListener("touchstart",m._ontouchstart),m._ontouchstart=c,m.addEventListener("touchstart",c,{passive:!1})):m.ontouchstart=c;var w=r.clampFn||function(E,L,C){return Math.abs(E)<C&&(E=0),Math.abs(L)<C&&(L=0),[E,L]};function c(E){g._dragged=!1,g._dragging=!0;var L=o(E);n=L[0],a=L[1],x=E.target,f=E,v=E.buttons===2||E.ctrlKey,E.clientX===void 0&&E.clientY===void 0&&(E.clientX=n,E.clientY=a),(i=new Date().getTime())-g._mouseDownTime<p?y+=1:(y=1,g._mouseDownTime=i),r.prepFn&&r.prepFn(E,n,a),k&&!v?(h=t()).style.cursor=window.getComputedStyle(m).cursor:k||(h=document,u=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(m).cursor),document.addEventListener("mouseup",_),document.addEventListener("touchend",_),r.dragmode!==!1&&(E.preventDefault(),document.addEventListener("mousemove",M),document.addEventListener("touchmove",M,{passive:!1}))}function M(E){E.preventDefault();var L=o(E),C=r.minDrag||b.MINDRAG,O=w(L[0]-n,L[1]-a,C),I=O[0],N=O[1];(I||N)&&(g._dragged=!0,d.unhover(g,E)),g._dragged&&r.moveFn&&!v&&(g._dragdata={element:m,dx:I,dy:N},r.moveFn(I,N))}function _(E){if(delete g._dragdata,r.dragmode!==!1&&(E.preventDefault(),document.removeEventListener("mousemove",M),document.removeEventListener("touchmove",M)),document.removeEventListener("mouseup",_),document.removeEventListener("touchend",_),k?T(h):u&&(h.documentElement.style.cursor=u,u=null),g._dragging){if(g._dragging=!1,new Date().getTime()-g._mouseDownTime>p&&(y=Math.max(y-1,1)),g._dragged)r.doneFn&&r.doneFn();else if(r.clickFn&&r.clickFn(y,f),!v){var L;try{L=new MouseEvent("click",E)}catch{var C=o(E);(L=document.createEvent("MouseEvents")).initMouseEvent("click",E.bubbles,E.cancelable,E.view,E.detail,E.screenX,E.screenY,C[0],C[1],E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,E.relatedTarget)}x.dispatchEvent(L)}g._dragging=!1,g._dragged=!1}else g._dragged=!1}},d.coverSlip=t},26041:function(K,z,e){var S=e(11086),k=e(79990),l=e(24401).getGraphDiv,T=e(26675),b=K.exports={};b.wrapped=function(d,s,t){(d=l(d))._fullLayout&&k.clear(d._fullLayout._uid+T.HOVERID),b.raw(d,s,t)},b.raw=function(d,s){var t=d._fullLayout,o=d._hoverdata;s||(s={}),s.target&&!d._dragged&&S.triggerHandler(d,"plotly_beforehover",s)===!1||(t._hoverlayer.selectAll("g").remove(),t._hoverlayer.selectAll("line").remove(),t._hoverlayer.selectAll("circle").remove(),d._hoverdata=void 0,s.target&&o&&d.emit("plotly_unhover",{event:s,points:o}))}},79952:function(K,z){z.P={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},z.u={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},91424:function(K,z,e){var S=e(39898),k=e(71828),l=k.numberFormat,T=e(92770),b=e(84267),d=e(73972),s=e(7901),t=e(21081),o=k.strTranslate,r=e(63893),n=e(77922),a=e(18783).LINE_SPACING,i=e(37822).DESELECTDIM,u=e(34098),h=e(39984),f=e(23469).appendArrayPointValue,x=K.exports={};function v(xe,_e,we){var Ae=_e.fillpattern,$=Ae&&x.getPatternAttr(Ae.shape,0,"");if($){var oe=x.getPatternAttr(Ae.bgcolor,0,null),pe=x.getPatternAttr(Ae.fgcolor,0,null),ye=Ae.fgopacity,ke=x.getPatternAttr(Ae.size,0,8),De=x.getPatternAttr(Ae.solidity,0,.3),Pe=_e.uid;x.pattern(xe,"point",we,Pe,$,ke,De,void 0,Ae.fillmode,oe,pe,ye)}else _e.fillcolor&&xe.call(s.fill,_e.fillcolor)}x.font=function(xe,_e,we,Ae){k.isPlainObject(_e)&&(Ae=_e.color,we=_e.size,_e=_e.family),_e&&xe.style("font-family",_e),we+1&&xe.style("font-size",we+"px"),Ae&&xe.call(s.fill,Ae)},x.setPosition=function(xe,_e,we){xe.attr("x",_e).attr("y",we)},x.setSize=function(xe,_e,we){xe.attr("width",_e).attr("height",we)},x.setRect=function(xe,_e,we,Ae,$){xe.call(x.setPosition,_e,we).call(x.setSize,Ae,$)},x.translatePoint=function(xe,_e,we,Ae){var $=we.c2p(xe.x),oe=Ae.c2p(xe.y);return!!(T($)&&T(oe)&&_e.node())&&(_e.node().nodeName==="text"?_e.attr("x",$).attr("y",oe):_e.attr("transform",o($,oe)),!0)},x.translatePoints=function(xe,_e,we){xe.each(function(Ae){var $=S.select(this);x.translatePoint(Ae,$,_e,we)})},x.hideOutsideRangePoint=function(xe,_e,we,Ae,$,oe){_e.attr("display",we.isPtWithinRange(xe,$)&&Ae.isPtWithinRange(xe,oe)?null:"none")},x.hideOutsideRangePoints=function(xe,_e){if(_e._hasClipOnAxisFalse){var we=_e.xaxis,Ae=_e.yaxis;xe.each(function($){var oe=$[0].trace,pe=oe.xcalendar,ye=oe.ycalendar,ke=d.traceIs(oe,"bar-like")?".bartext":".point,.textpoint";xe.selectAll(ke).each(function(De){x.hideOutsideRangePoint(De,S.select(this),we,Ae,pe,ye)})})}},x.crispRound=function(xe,_e,we){return _e&&T(_e)?xe._context.staticPlot?_e:_e<1?1:Math.round(_e):we||0},x.singleLineStyle=function(xe,_e,we,Ae,$){_e.style("fill","none");var oe=(((xe||[])[0]||{}).trace||{}).line||{},pe=we||oe.width||0,ye=$||oe.dash||"";s.stroke(_e,Ae||oe.color),x.dashLine(_e,ye,pe)},x.lineGroupStyle=function(xe,_e,we,Ae){xe.style("fill","none").each(function($){var oe=((($||[])[0]||{}).trace||{}).line||{},pe=_e||oe.width||0,ye=Ae||oe.dash||"";S.select(this).call(s.stroke,we||oe.color).call(x.dashLine,ye,pe)})},x.dashLine=function(xe,_e,we){we=+we||0,_e=x.dashStyle(_e,we),xe.style({"stroke-dasharray":_e,"stroke-width":we+"px"})},x.dashStyle=function(xe,_e){_e=+_e||1;var we=Math.max(_e,3);return xe==="solid"?xe="":xe==="dot"?xe=we+"px,"+we+"px":xe==="dash"?xe=3*we+"px,"+3*we+"px":xe==="longdash"?xe=5*we+"px,"+5*we+"px":xe==="dashdot"?xe=3*we+"px,"+we+"px,"+we+"px,"+we+"px":xe==="longdashdot"&&(xe=5*we+"px,"+2*we+"px,"+we+"px,"+2*we+"px"),xe},x.singleFillStyle=function(xe,_e){var we=S.select(xe.node());v(xe,((we.data()[0]||[])[0]||{}).trace||{},_e)},x.fillGroupStyle=function(xe,_e){xe.style("stroke-width",0).each(function(we){var Ae=S.select(this);we[0].trace&&v(Ae,we[0].trace,_e)})};var g=e(90998);x.symbolNames=[],x.symbolFuncs=[],x.symbolBackOffs=[],x.symbolNeedLines={},x.symbolNoDot={},x.symbolNoFill={},x.symbolList=[],Object.keys(g).forEach(function(xe){var _e=g[xe],we=_e.n;x.symbolList.push(we,String(we),xe,we+100,String(we+100),xe+"-open"),x.symbolNames[we]=xe,x.symbolFuncs[we]=_e.f,x.symbolBackOffs[we]=_e.backoff||0,_e.needLine&&(x.symbolNeedLines[we]=!0),_e.noDot?x.symbolNoDot[we]=!0:x.symbolList.push(we+200,String(we+200),xe+"-dot",we+300,String(we+300),xe+"-open-dot"),_e.noFill&&(x.symbolNoFill[we]=!0)});var y=x.symbolNames.length;function p(xe,_e,we,Ae){var $=xe%100;return x.symbolFuncs[$](_e,we,Ae)+(xe>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}x.symbolNumber=function(xe){if(T(xe))xe=+xe;else if(typeof xe=="string"){var _e=0;xe.indexOf("-open")>0&&(_e=100,xe=xe.replace("-open","")),xe.indexOf("-dot")>0&&(_e+=200,xe=xe.replace("-dot","")),(xe=x.symbolNames.indexOf(xe))>=0&&(xe+=_e)}return xe%100>=y||xe>=400?0:Math.floor(Math.max(xe,0))};var m={x1:1,x2:0,y1:0,y2:0},w={x1:0,x2:0,y1:1,y2:0},c=l("~f"),M={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:m},horizontalreversed:{node:"linearGradient",attrs:m,reversed:!0},vertical:{node:"linearGradient",attrs:w},verticalreversed:{node:"linearGradient",attrs:w,reversed:!0}};x.gradient=function(xe,_e,we,Ae,$,oe){for(var pe=$.length,ye=M[Ae],ke=new Array(pe),De=0;De<pe;De++)ye.reversed?ke[pe-1-De]=[c(100*(1-$[De][0])),$[De][1]]:ke[De]=[c(100*$[De][0]),$[De][1]];var Pe=_e._fullLayout,Re="g"+Pe._uid+"-"+we,fe=Pe._defs.select(".gradients").selectAll("#"+Re).data([Ae+ke.join(";")],k.identity);fe.exit().remove(),fe.enter().append(ye.node).each(function(){var ve=S.select(this);ye.attrs&&ve.attr(ye.attrs),ve.attr("id",Re);var Te=ve.selectAll("stop").data(ke);Te.exit().remove(),Te.enter().append("stop"),Te.each(function(ze){var He=b(ze[1]);S.select(this).attr({offset:ze[0]+"%","stop-color":s.tinyRGB(He),"stop-opacity":He.getAlpha()})})}),xe.style(oe,X(Re,_e)).style(oe+"-opacity",null),xe.classed("gradient_filled",!0)},x.pattern=function(xe,_e,we,Ae,$,oe,pe,ye,ke,De,Pe,Re){var fe=_e==="legend";ye&&(ke==="overlay"?(De=ye,Pe=s.contrast(De)):(De=void 0,Pe=ye));var ve,Te,ze,He,Ve,nt,tt,ot,pt,Tt=we._fullLayout,yt="p"+Tt._uid+"-"+Ae,dt={},Pt=b(Pe),Et=s.tinyRGB(Pt),Ot=Re*Pt.getAlpha();switch($){case"/":ve=oe*Math.sqrt(2),Te=oe*Math.sqrt(2),nt="path",dt={d:ze="M-"+ve/4+","+Te/4+"l"+ve/2+",-"+Te/2+"M0,"+Te+"L"+ve+",0M"+ve/4*3+","+Te/4*5+"l"+ve/2+",-"+Te/2,opacity:Ot,stroke:Et,"stroke-width":(He=pe*oe)+"px"};break;case"\\":ve=oe*Math.sqrt(2),Te=oe*Math.sqrt(2),nt="path",dt={d:ze="M"+ve/4*3+",-"+Te/4+"l"+ve/2+","+Te/2+"M0,0L"+ve+","+Te+"M-"+ve/4+","+Te/4*3+"l"+ve/2+","+Te/2,opacity:Ot,stroke:Et,"stroke-width":(He=pe*oe)+"px"};break;case"x":ve=oe*Math.sqrt(2),Te=oe*Math.sqrt(2),ze="M-"+ve/4+","+Te/4+"l"+ve/2+",-"+Te/2+"M0,"+Te+"L"+ve+",0M"+ve/4*3+","+Te/4*5+"l"+ve/2+",-"+Te/2+"M"+ve/4*3+",-"+Te/4+"l"+ve/2+","+Te/2+"M0,0L"+ve+","+Te+"M-"+ve/4+","+Te/4*3+"l"+ve/2+","+Te/2,He=oe-oe*Math.sqrt(1-pe),nt="path",dt={d:ze,opacity:Ot,stroke:Et,"stroke-width":He+"px"};break;case"|":nt="path",nt="path",dt={d:ze="M"+(ve=oe)/2+",0L"+ve/2+","+(Te=oe),opacity:Ot,stroke:Et,"stroke-width":(He=pe*oe)+"px"};break;case"-":nt="path",nt="path",dt={d:ze="M0,"+(Te=oe)/2+"L"+(ve=oe)+","+Te/2,opacity:Ot,stroke:Et,"stroke-width":(He=pe*oe)+"px"};break;case"+":nt="path",ze="M"+(ve=oe)/2+",0L"+ve/2+","+(Te=oe)+"M0,"+Te/2+"L"+ve+","+Te/2,He=oe-oe*Math.sqrt(1-pe),nt="path",dt={d:ze,opacity:Ot,stroke:Et,"stroke-width":He+"px"};break;case".":ve=oe,Te=oe,pe<Math.PI/4?Ve=Math.sqrt(pe*oe*oe/Math.PI):(tt=pe,ot=Math.PI/4,Ve=(pt=oe/2)+(oe/Math.sqrt(2)-pt)*(tt-ot)/(1-ot)),nt="circle",dt={cx:ve/2,cy:Te/2,r:Ve,opacity:Ot,fill:Et}}var Nt=[$||"noSh",De||"noBg",Pe||"noFg",oe,pe].join(";"),zt=Tt._defs.select(".patterns").selectAll("#"+yt).data([Nt],k.identity);zt.exit().remove(),zt.enter().append("pattern").each(function(){var Ze=S.select(this);if(Ze.attr({id:yt,width:ve+"px",height:Te+"px",patternUnits:"userSpaceOnUse",patternTransform:fe?"scale(0.8)":""}),De){var Ye=b(De),je=s.tinyRGB(Ye),Ke=Ye.getAlpha(),st=Ze.selectAll("rect").data([0]);st.exit().remove(),st.enter().append("rect").attr({width:ve+"px",height:Te+"px",fill:je,"fill-opacity":Ke})}var Se=Ze.selectAll(nt).data([0]);Se.exit().remove(),Se.enter().append(nt).attr(dt)}),xe.style("fill",X(yt,we)).style("fill-opacity",null),xe.classed("pattern_filled",!0)},x.initGradients=function(xe){var _e=xe._fullLayout;k.ensureSingle(_e._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),S.select(xe).selectAll(".gradient_filled").classed("gradient_filled",!1)},x.initPatterns=function(xe){var _e=xe._fullLayout;k.ensureSingle(_e._defs,"g","patterns").selectAll("pattern").remove(),S.select(xe).selectAll(".pattern_filled").classed("pattern_filled",!1)},x.getPatternAttr=function(xe,_e,we){return xe&&k.isArrayOrTypedArray(xe)?_e<xe.length?xe[_e]:we:xe},x.pointStyle=function(xe,_e,we){if(xe.size()){var Ae=x.makePointStyleFns(_e);xe.each(function($){x.singlePointStyle($,S.select(this),_e,Ae,we)})}},x.singlePointStyle=function(xe,_e,we,Ae,$){var oe=we.marker,pe=oe.line;if(_e.style("opacity",Ae.selectedOpacityFn?Ae.selectedOpacityFn(xe):xe.mo===void 0?oe.opacity:xe.mo),Ae.ms2mrc){var ye;ye=xe.ms==="various"||oe.size==="various"?3:Ae.ms2mrc(xe.ms),xe.mrc=ye,Ae.selectedSizeFn&&(ye=xe.mrc=Ae.selectedSizeFn(xe));var ke=x.symbolNumber(xe.mx||oe.symbol)||0;xe.om=ke%200>=100;var De=Ce(xe,we),Pe=W(xe,we);_e.attr("d",p(ke,ye,De,Pe))}var Re,fe,ve,Te=!1;if(xe.so)ve=pe.outlierwidth,fe=pe.outliercolor,Re=oe.outliercolor;else{var ze=(pe||{}).width;ve=(xe.mlw+1||ze+1||(xe.trace?(xe.trace.marker.line||{}).width:0)+1)-1||0,fe="mlc"in xe?xe.mlcc=Ae.lineScale(xe.mlc):k.isArrayOrTypedArray(pe.color)?s.defaultLine:pe.color,k.isArrayOrTypedArray(oe.color)&&(Re=s.defaultLine,Te=!0),Re="mc"in xe?xe.mcc=Ae.markerScale(xe.mc):oe.color||"rgba(0,0,0,0)",Ae.selectedColorFn&&(Re=Ae.selectedColorFn(xe))}if(xe.om)_e.call(s.stroke,Re).style({"stroke-width":(ve||1)+"px",fill:"none"});else{_e.style("stroke-width",(xe.isBlank?0:ve)+"px");var He=oe.gradient,Ve=xe.mgt;Ve?Te=!0:Ve=He&&He.type,k.isArrayOrTypedArray(Ve)&&(Ve=Ve[0],M[Ve]||(Ve=0));var nt=oe.pattern,tt=nt&&x.getPatternAttr(nt.shape,xe.i,"");if(Ve&&Ve!=="none"){var ot=xe.mgc;ot?Te=!0:ot=He.color;var pt=we.uid;Te&&(pt+="-"+xe.i),x.gradient(_e,$,pt,Ve,[[0,ot],[1,Re]],"fill")}else if(tt){var Tt=x.getPatternAttr(nt.bgcolor,xe.i,null),yt=x.getPatternAttr(nt.fgcolor,xe.i,null),dt=nt.fgopacity,Pt=x.getPatternAttr(nt.size,xe.i,8),Et=x.getPatternAttr(nt.solidity,xe.i,.3),Ot=xe.mcc||k.isArrayOrTypedArray(nt.shape)||k.isArrayOrTypedArray(nt.bgcolor)||k.isArrayOrTypedArray(nt.size)||k.isArrayOrTypedArray(nt.solidity),Nt=we.uid;Ot&&(Nt+="-"+xe.i),x.pattern(_e,"point",$,Nt,tt,Pt,Et,xe.mcc,nt.fillmode,Tt,yt,dt)}else s.fill(_e,Re);ve&&s.stroke(_e,fe)}},x.makePointStyleFns=function(xe){var _e={},we=xe.marker;return _e.markerScale=x.tryColorscale(we,""),_e.lineScale=x.tryColorscale(we,"line"),d.traceIs(xe,"symbols")&&(_e.ms2mrc=u.isBubble(xe)?h(xe):function(){return(we.size||6)/2}),xe.selectedpoints&&k.extendFlat(_e,x.makeSelectedPointStyleFns(xe)),_e},x.makeSelectedPointStyleFns=function(xe){var _e={},we=xe.selected||{},Ae=xe.unselected||{},$=xe.marker||{},oe=we.marker||{},pe=Ae.marker||{},ye=$.opacity,ke=oe.opacity,De=pe.opacity,Pe=ke!==void 0,Re=De!==void 0;(k.isArrayOrTypedArray(ye)||Pe||Re)&&(_e.selectedOpacityFn=function(ot){var pt=ot.mo===void 0?$.opacity:ot.mo;return ot.selected?Pe?ke:pt:Re?De:i*pt});var fe=$.color,ve=oe.color,Te=pe.color;(ve||Te)&&(_e.selectedColorFn=function(ot){var pt=ot.mcc||fe;return ot.selected?ve||pt:Te||pt});var ze=$.size,He=oe.size,Ve=pe.size,nt=He!==void 0,tt=Ve!==void 0;return d.traceIs(xe,"symbols")&&(nt||tt)&&(_e.selectedSizeFn=function(ot){var pt=ot.mrc||ze/2;return ot.selected?nt?He/2:pt:tt?Ve/2:pt}),_e},x.makeSelectedTextStyleFns=function(xe){var _e={},we=xe.selected||{},Ae=xe.unselected||{},$=xe.textfont||{},oe=we.textfont||{},pe=Ae.textfont||{},ye=$.color,ke=oe.color,De=pe.color;return _e.selectedTextColorFn=function(Pe){var Re=Pe.tc||ye;return Pe.selected?ke||Re:De||(ke?Re:s.addOpacity(Re,i))},_e},x.selectedPointStyle=function(xe,_e){if(xe.size()&&_e.selectedpoints){var we=x.makeSelectedPointStyleFns(_e),Ae=_e.marker||{},$=[];we.selectedOpacityFn&&$.push(function(oe,pe){oe.style("opacity",we.selectedOpacityFn(pe))}),we.selectedColorFn&&$.push(function(oe,pe){s.fill(oe,we.selectedColorFn(pe))}),we.selectedSizeFn&&$.push(function(oe,pe){var ye=pe.mx||Ae.symbol||0,ke=we.selectedSizeFn(pe);oe.attr("d",p(x.symbolNumber(ye),ke,Ce(pe,_e),W(pe,_e))),pe.mrc2=ke}),$.length&&xe.each(function(oe){for(var pe=S.select(this),ye=0;ye<$.length;ye++)$[ye](pe,oe)})}},x.tryColorscale=function(xe,_e){var we=_e?k.nestedProperty(xe,_e).get():xe;if(we){var Ae=we.color;if((we.colorscale||we._colorAx)&&k.isArrayOrTypedArray(Ae))return t.makeColorScaleFuncFromTrace(we)}return k.identity};var _,E,L={start:1,end:-1,middle:0,bottom:1,top:-1};function C(xe,_e,we,Ae,$){var oe=S.select(xe.node().parentNode),pe=_e.indexOf("top")!==-1?"top":_e.indexOf("bottom")!==-1?"bottom":"middle",ye=_e.indexOf("left")!==-1?"end":_e.indexOf("right")!==-1?"start":"middle",ke=Ae?Ae/.8+1:0,De=(r.lineCount(xe)-1)*a+1,Pe=L[ye]*ke,Re=.75*we+L[pe]*ke+(L[pe]-1)*De*we/2;xe.attr("text-anchor",ye),$||oe.attr("transform",o(Pe,Re))}function O(xe,_e){var we=xe.ts||_e.textfont.size;return T(we)&&we>0?we:0}function I(xe,_e,we){return we&&(xe=U(xe)),_e?R(xe[1]):N(xe[0])}function N(xe){var _e=S.round(xe,2);return _=_e,_e}function R(xe){var _e=S.round(xe,2);return E=_e,_e}function V(xe,_e,we,Ae){var $=xe[0]-_e[0],oe=xe[1]-_e[1],pe=we[0]-_e[0],ye=we[1]-_e[1],ke=Math.pow($*$+oe*oe,.25),De=Math.pow(pe*pe+ye*ye,.25),Pe=(De*De*$-ke*ke*pe)*Ae,Re=(De*De*oe-ke*ke*ye)*Ae,fe=3*De*(ke+De),ve=3*ke*(ke+De);return[[N(_e[0]+(fe&&Pe/fe)),R(_e[1]+(fe&&Re/fe))],[N(_e[0]-(ve&&Pe/ve)),R(_e[1]-(ve&&Re/ve))]]}x.textPointStyle=function(xe,_e,we){if(xe.size()){var Ae;if(_e.selectedpoints){var $=x.makeSelectedTextStyleFns(_e);Ae=$.selectedTextColorFn}var oe=_e.texttemplate,pe=we._fullLayout;xe.each(function(ye){var ke=S.select(this),De=oe?k.extractOption(ye,_e,"txt","texttemplate"):k.extractOption(ye,_e,"tx","text");if(De||De===0){if(oe){var Pe=_e._module.formatLabels,Re=Pe?Pe(ye,_e,pe):{},fe={};f(fe,_e,ye.i);var ve=_e._meta||{};De=k.texttemplateString(De,Re,pe._d3locale,fe,ye,ve)}var Te=ye.tp||_e.textposition,ze=O(ye,_e),He=Ae?Ae(ye):ye.tc||_e.textfont.color;ke.call(x.font,ye.tf||_e.textfont.family,ze,He).text(De).call(r.convertToTspans,we).call(C,Te,ze,ye.mrc)}else ke.remove()})}},x.selectedTextStyle=function(xe,_e){if(xe.size()&&_e.selectedpoints){var we=x.makeSelectedTextStyleFns(_e);xe.each(function(Ae){var $=S.select(this),oe=we.selectedTextColorFn(Ae),pe=Ae.tp||_e.textposition,ye=O(Ae,_e);s.fill($,oe);var ke=d.traceIs(_e,"bar-like");C($,pe,ye,Ae.mrc2||Ae.mrc,ke)})}},x.smoothopen=function(xe,_e){if(xe.length<3)return"M"+xe.join("L");var we,Ae="M"+xe[0],$=[];for(we=1;we<xe.length-1;we++)$.push(V(xe[we-1],xe[we],xe[we+1],_e));for(Ae+="Q"+$[0][0]+" "+xe[1],we=2;we<xe.length-1;we++)Ae+="C"+$[we-2][1]+" "+$[we-1][0]+" "+xe[we];return Ae+"Q"+$[xe.length-3][1]+" "+xe[xe.length-1]},x.smoothclosed=function(xe,_e){if(xe.length<3)return"M"+xe.join("L")+"Z";var we,Ae="M"+xe[0],$=xe.length-1,oe=[V(xe[$],xe[0],xe[1],_e)];for(we=1;we<$;we++)oe.push(V(xe[we-1],xe[we],xe[we+1],_e));for(oe.push(V(xe[$-1],xe[$],xe[0],_e)),we=1;we<=$;we++)Ae+="C"+oe[we-1][1]+" "+oe[we][0]+" "+xe[we];return Ae+"C"+oe[$][1]+" "+oe[0][0]+" "+xe[0]+"Z"};var F={hv:function(xe,_e,we){return"H"+N(_e[0])+"V"+I(_e,1,we)},vh:function(xe,_e,we){return"V"+R(_e[1])+"H"+I(_e,0,we)},hvh:function(xe,_e,we){return"H"+N((xe[0]+_e[0])/2)+"V"+R(_e[1])+"H"+I(_e,0,we)},vhv:function(xe,_e,we){return"V"+R((xe[1]+_e[1])/2)+"H"+N(_e[0])+"V"+I(_e,1,we)}},D=function(xe,_e,we){return"L"+I(_e,0,we)+","+I(_e,1,we)};function U(xe,_e){var we=xe.backoff,Ae=xe.trace,$=xe.d,oe=xe.i;if(we&&Ae&&Ae.marker&&Ae.marker.angle%360==0&&Ae.line&&Ae.line.shape!=="spline"){var pe=k.isArrayOrTypedArray(we),ye=xe,ke=_e?_e[0]:_||0,De=_e?_e[1]:E||0,Pe=ye[0],Re=ye[1],fe=Pe-ke,ve=Re-De,Te=Math.atan2(ve,fe),ze=pe?we[oe]:we;if(ze==="auto"){var He=ye.i;Ae.type==="scatter"&&He--;var Ve=ye.marker,nt=Ve.symbol;k.isArrayOrTypedArray(nt)&&(nt=nt[He]);var tt=Ve.size;k.isArrayOrTypedArray(tt)&&(tt=tt[He]),ze=Ve?x.symbolBackOffs[x.symbolNumber(nt)]*tt:0,ze+=x.getMarkerStandoff($[He],Ae)||0}var ot=Pe-ze*Math.cos(Te),pt=Re-ze*Math.sin(Te);(ot<=Pe&&ot>=ke||ot>=Pe&&ot<=ke)&&(pt<=Re&&pt>=De||pt>=Re&&pt<=De)&&(xe=[ot,pt])}return xe}x.steps=function(xe){var _e=F[xe]||D;return function(we){for(var Ae="M"+N(we[0][0])+","+R(we[0][1]),$=we.length,oe=1;oe<$;oe++)Ae+=_e(we[oe-1],we[oe],oe===$-1);return Ae}},x.applyBackoff=U,x.makeTester=function(){var xe=k.ensureSingleById(S.select("body"),"svg","js-plotly-tester",function(we){we.attr(n.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),_e=k.ensureSingle(xe,"path","js-reference-point",function(we){we.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});x.tester=xe,x.testref=_e},x.savedBBoxes={};var j=0;function J(xe){var _e=xe.getAttribute("data-unformatted");if(_e!==null)return _e+xe.getAttribute("data-math")+xe.getAttribute("text-anchor")+xe.getAttribute("style")}function X(xe,_e){if(!xe)return null;var we=_e._context,Ae=we._exportedPlot?"":we._baseUrl||"";return Ae?"url('"+Ae+"#"+xe+"')":"url(#"+xe+")"}x.bBox=function(xe,_e,we){var Ae,$,oe;if(we||(we=J(xe)),we){if(Ae=x.savedBBoxes[we])return k.extendFlat({},Ae)}else if(xe.childNodes.length===1){var pe=xe.childNodes[0];if(we=J(pe)){var ye=+pe.getAttribute("x")||0,ke=+pe.getAttribute("y")||0,De=pe.getAttribute("transform");if(!De){var Pe=x.bBox(pe,!1,we);return ye&&(Pe.left+=ye,Pe.right+=ye),ke&&(Pe.top+=ke,Pe.bottom+=ke),Pe}if(we+="~"+ye+"~"+ke+"~"+De,Ae=x.savedBBoxes[we])return k.extendFlat({},Ae)}}_e?$=xe:(oe=x.tester.node(),$=xe.cloneNode(!0),oe.appendChild($)),S.select($).attr("transform",null).call(r.positionText,0,0);var Re=$.getBoundingClientRect(),fe=x.testref.node().getBoundingClientRect();_e||oe.removeChild($);var ve={height:Re.height,width:Re.width,left:Re.left-fe.left,top:Re.top-fe.top,right:Re.right-fe.left,bottom:Re.bottom-fe.top};return j>=1e4&&(x.savedBBoxes={},j=0),we&&(x.savedBBoxes[we]=ve),j++,k.extendFlat({},ve)},x.setClipUrl=function(xe,_e,we){xe.attr("clip-path",X(_e,we))},x.getTranslate=function(xe){var _e=(xe[xe.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(we,Ae,$){return[Ae,$].join(" ")}).split(" ");return{x:+_e[0]||0,y:+_e[1]||0}},x.setTranslate=function(xe,_e,we){var Ae=xe.attr?"attr":"getAttribute",$=xe.attr?"attr":"setAttribute",oe=xe[Ae]("transform")||"";return _e=_e||0,we=we||0,oe=oe.replace(/(\btranslate\(.*?\);?)/,"").trim(),oe=(oe+=o(_e,we)).trim(),xe[$]("transform",oe),oe},x.getScale=function(xe){var _e=(xe[xe.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(we,Ae,$){return[Ae,$].join(" ")}).split(" ");return{x:+_e[0]||1,y:+_e[1]||1}},x.setScale=function(xe,_e,we){var Ae=xe.attr?"attr":"getAttribute",$=xe.attr?"attr":"setAttribute",oe=xe[Ae]("transform")||"";return _e=_e||1,we=we||1,oe=oe.replace(/(\bscale\(.*?\);?)/,"").trim(),oe=(oe+="scale("+_e+","+we+")").trim(),xe[$]("transform",oe),oe};var Z=/\s*sc.*/;x.setPointGroupScale=function(xe,_e,we){if(_e=_e||1,we=we||1,xe){var Ae=_e===1&&we===1?"":"scale("+_e+","+we+")";xe.each(function(){var $=(this.getAttribute("transform")||"").replace(Z,"");$=($+=Ae).trim(),this.setAttribute("transform",$)})}};var Y=/translate\([^)]*\)\s*$/;function W(xe,_e){var we;return xe&&(we=xe.mf),we===void 0&&(we=_e.marker&&_e.marker.standoff||0),_e._geo||_e._xA?we:-we}x.setTextPointsScale=function(xe,_e,we){xe&&xe.each(function(){var Ae,$=S.select(this),oe=$.select("text");if(oe.node()){var pe=parseFloat(oe.attr("x")||0),ye=parseFloat(oe.attr("y")||0),ke=($.attr("transform")||"").match(Y);Ae=_e===1&&we===1?[]:[o(pe,ye),"scale("+_e+","+we+")",o(-pe,-ye)],ke&&Ae.push(ke),$.attr("transform",Ae.join(""))}})},x.getMarkerStandoff=W;var Q,ne,re,ie,se,ge,ue=Math.atan2,ce=Math.cos,le=Math.sin;function de(xe,_e){var we=_e[0],Ae=_e[1];return[we*ce(xe)-Ae*le(xe),we*le(xe)+Ae*ce(xe)]}function Ce(xe,_e){var we,Ae,$=xe.ma;$===void 0&&($=_e.marker.angle||0);var oe=_e.marker.angleref;if(oe==="previous"||oe==="north"){if(_e._geo){var pe=_e._geo.project(xe.lonlat);we=pe[0],Ae=pe[1]}else{var ye=_e._xA,ke=_e._yA;if(!ye||!ke)return 90;we=ye.c2p(xe.x),Ae=ke.c2p(xe.y)}if(_e._geo){var De,Pe=xe.lonlat[0],Re=xe.lonlat[1],fe=_e._geo.project([Pe,Re+1e-5]),ve=_e._geo.project([Pe+1e-5,Re]),Te=ue(ve[1]-Ae,ve[0]-we),ze=ue(fe[1]-Ae,fe[0]-we);if(oe==="north")De=$/180*Math.PI;else if(oe==="previous"){var He=Pe/180*Math.PI,Ve=Re/180*Math.PI,nt=Q/180*Math.PI,tt=ne/180*Math.PI,ot=nt-He,pt=ce(tt)*le(ot),Tt=le(tt)*ce(Ve)-ce(tt)*le(Ve)*ce(ot);De=-ue(pt,Tt)-Math.PI,Q=Pe,ne=Re}var yt=de(Te,[ce(De),0]),dt=de(ze,[le(De),0]);$=ue(yt[1]+dt[1],yt[0]+dt[0])/Math.PI*180,oe!=="previous"||ge===_e.uid&&xe.i===se+1||($=null)}if(oe==="previous"&&!_e._geo)if(ge===_e.uid&&xe.i===se+1&&T(we)&&T(Ae)){var Pt=we-re,Et=Ae-ie,Ot=_e.line&&_e.line.shape||"",Nt=Ot.slice(Ot.length-1);Nt==="h"&&(Et=0),Nt==="v"&&(Pt=0),$+=ue(Et,Pt)/Math.PI*180+90}else $=null}return re=we,ie=Ae,se=xe.i,ge=_e.uid,$}x.getMarkerAngle=Ce},90998:function(K,z,e){var S,k,l,T,b=e(95616),d=e(39898).round,s="M0,0Z",t=Math.sqrt(2),o=Math.sqrt(3),r=Math.PI,n=Math.cos,a=Math.sin;function i(h){return h===null}function u(h,f,x){if(!(h&&h%360!=0||f))return x;if(l===h&&T===f&&S===x)return k;function v(I,N){var R=n(I),V=a(I),F=N[0],D=N[1]+(f||0);return[F*R-D*V,F*V+D*R]}l=h,T=f,S=x;for(var g=h/180*r,y=0,p=0,m=b(x),w="",c=0;c<m.length;c++){var M=m[c],_=M[0],E=y,L=p;if(_==="M"||_==="L")y=+M[1],p=+M[2];else if(_==="m"||_==="l")y+=+M[1],p+=+M[2];else if(_==="H")y=+M[1];else if(_==="h")y+=+M[1];else if(_==="V")p=+M[1];else if(_==="v")p+=+M[1];else if(_==="A"){y=+M[1],p=+M[2];var C=v(g,[+M[6],+M[7]]);M[6]=C[0],M[7]=C[1],M[3]=+M[3]+h}_!=="H"&&_!=="V"||(_="L"),_!=="h"&&_!=="v"||(_="l"),_!=="m"&&_!=="l"||(y-=E,p-=L);var O=v(g,[y,p]);_!=="H"&&_!=="V"||(_="L"),_!=="M"&&_!=="L"&&_!=="m"&&_!=="l"||(M[1]=O[0],M[2]=O[1]),M[0]=_,w+=M[0]+M.slice(1).join(",")}return k=w,w}K.exports={circle:{n:0,f:function(h,f,x){if(i(f))return s;var v=d(h,2),g="M"+v+",0A"+v+","+v+" 0 1,1 0,-"+v+"A"+v+","+v+" 0 0,1 "+v+",0Z";return x?u(f,x,g):g}},square:{n:1,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return u(f,x,"M"+v+","+v+"H-"+v+"V-"+v+"H"+v+"Z")}},diamond:{n:2,f:function(h,f,x){if(i(f))return s;var v=d(1.3*h,2);return u(f,x,"M"+v+",0L0,"+v+"L-"+v+",0L0,-"+v+"Z")}},cross:{n:3,f:function(h,f,x){if(i(f))return s;var v=d(.4*h,2),g=d(1.2*h,2);return u(f,x,"M"+g+","+v+"H"+v+"V"+g+"H-"+v+"V"+v+"H-"+g+"V-"+v+"H-"+v+"V-"+g+"H"+v+"V-"+v+"H"+g+"Z")}},x:{n:4,f:function(h,f,x){if(i(f))return s;var v=d(.8*h/t,2),g="l"+v+","+v,y="l"+v+",-"+v,p="l-"+v+",-"+v,m="l-"+v+","+v;return u(f,x,"M0,"+v+g+y+p+y+p+m+p+m+g+m+g+"Z")}},"triangle-up":{n:5,f:function(h,f,x){if(i(f))return s;var v=d(2*h/o,2);return u(f,x,"M-"+v+","+d(h/2,2)+"H"+v+"L0,-"+d(h,2)+"Z")}},"triangle-down":{n:6,f:function(h,f,x){if(i(f))return s;var v=d(2*h/o,2);return u(f,x,"M-"+v+",-"+d(h/2,2)+"H"+v+"L0,"+d(h,2)+"Z")}},"triangle-left":{n:7,f:function(h,f,x){if(i(f))return s;var v=d(2*h/o,2);return u(f,x,"M"+d(h/2,2)+",-"+v+"V"+v+"L-"+d(h,2)+",0Z")}},"triangle-right":{n:8,f:function(h,f,x){if(i(f))return s;var v=d(2*h/o,2);return u(f,x,"M-"+d(h/2,2)+",-"+v+"V"+v+"L"+d(h,2)+",0Z")}},"triangle-ne":{n:9,f:function(h,f,x){if(i(f))return s;var v=d(.6*h,2),g=d(1.2*h,2);return u(f,x,"M-"+g+",-"+v+"H"+v+"V"+g+"Z")}},"triangle-se":{n:10,f:function(h,f,x){if(i(f))return s;var v=d(.6*h,2),g=d(1.2*h,2);return u(f,x,"M"+v+",-"+g+"V"+v+"H-"+g+"Z")}},"triangle-sw":{n:11,f:function(h,f,x){if(i(f))return s;var v=d(.6*h,2),g=d(1.2*h,2);return u(f,x,"M"+g+","+v+"H-"+v+"V-"+g+"Z")}},"triangle-nw":{n:12,f:function(h,f,x){if(i(f))return s;var v=d(.6*h,2),g=d(1.2*h,2);return u(f,x,"M-"+v+","+g+"V-"+v+"H"+g+"Z")}},pentagon:{n:13,f:function(h,f,x){if(i(f))return s;var v=d(.951*h,2),g=d(.588*h,2),y=d(-h,2),p=d(-.309*h,2);return u(f,x,"M"+v+","+p+"L"+g+","+d(.809*h,2)+"H-"+g+"L-"+v+","+p+"L0,"+y+"Z")}},hexagon:{n:14,f:function(h,f,x){if(i(f))return s;var v=d(h,2),g=d(h/2,2),y=d(h*o/2,2);return u(f,x,"M"+y+",-"+g+"V"+g+"L0,"+v+"L-"+y+","+g+"V-"+g+"L0,-"+v+"Z")}},hexagon2:{n:15,f:function(h,f,x){if(i(f))return s;var v=d(h,2),g=d(h/2,2),y=d(h*o/2,2);return u(f,x,"M-"+g+","+y+"H"+g+"L"+v+",0L"+g+",-"+y+"H-"+g+"L-"+v+",0Z")}},octagon:{n:16,f:function(h,f,x){if(i(f))return s;var v=d(.924*h,2),g=d(.383*h,2);return u(f,x,"M-"+g+",-"+v+"H"+g+"L"+v+",-"+g+"V"+g+"L"+g+","+v+"H-"+g+"L-"+v+","+g+"V-"+g+"Z")}},star:{n:17,f:function(h,f,x){if(i(f))return s;var v=1.4*h,g=d(.225*v,2),y=d(.951*v,2),p=d(.363*v,2),m=d(.588*v,2),w=d(-v,2),c=d(-.309*v,2),M=d(.118*v,2),_=d(.809*v,2);return u(f,x,"M"+g+","+c+"H"+y+"L"+p+","+M+"L"+m+","+_+"L0,"+d(.382*v,2)+"L-"+m+","+_+"L-"+p+","+M+"L-"+y+","+c+"H-"+g+"L0,"+w+"Z")}},hexagram:{n:18,f:function(h,f,x){if(i(f))return s;var v=d(.66*h,2),g=d(.38*h,2),y=d(.76*h,2);return u(f,x,"M-"+y+",0l-"+g+",-"+v+"h"+y+"l"+g+",-"+v+"l"+g+","+v+"h"+y+"l-"+g+","+v+"l"+g+","+v+"h-"+y+"l-"+g+","+v+"l-"+g+",-"+v+"h-"+y+"Z")}},"star-triangle-up":{n:19,f:function(h,f,x){if(i(f))return s;var v=d(h*o*.8,2),g=d(.8*h,2),y=d(1.6*h,2),p=d(4*h,2),m="A "+p+","+p+" 0 0 1 ";return u(f,x,"M-"+v+","+g+m+v+","+g+m+"0,-"+y+m+"-"+v+","+g+"Z")}},"star-triangle-down":{n:20,f:function(h,f,x){if(i(f))return s;var v=d(h*o*.8,2),g=d(.8*h,2),y=d(1.6*h,2),p=d(4*h,2),m="A "+p+","+p+" 0 0 1 ";return u(f,x,"M"+v+",-"+g+m+"-"+v+",-"+g+m+"0,"+y+m+v+",-"+g+"Z")}},"star-square":{n:21,f:function(h,f,x){if(i(f))return s;var v=d(1.1*h,2),g=d(2*h,2),y="A "+g+","+g+" 0 0 1 ";return u(f,x,"M-"+v+",-"+v+y+"-"+v+","+v+y+v+","+v+y+v+",-"+v+y+"-"+v+",-"+v+"Z")}},"star-diamond":{n:22,f:function(h,f,x){if(i(f))return s;var v=d(1.4*h,2),g=d(1.9*h,2),y="A "+g+","+g+" 0 0 1 ";return u(f,x,"M-"+v+",0"+y+"0,"+v+y+v+",0"+y+"0,-"+v+y+"-"+v+",0Z")}},"diamond-tall":{n:23,f:function(h,f,x){if(i(f))return s;var v=d(.7*h,2),g=d(1.4*h,2);return u(f,x,"M0,"+g+"L"+v+",0L0,-"+g+"L-"+v+",0Z")}},"diamond-wide":{n:24,f:function(h,f,x){if(i(f))return s;var v=d(1.4*h,2),g=d(.7*h,2);return u(f,x,"M0,"+g+"L"+v+",0L0,-"+g+"L-"+v+",0Z")}},hourglass:{n:25,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return u(f,x,"M"+v+","+v+"H-"+v+"L"+v+",-"+v+"H-"+v+"Z")},noDot:!0},bowtie:{n:26,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return u(f,x,"M"+v+","+v+"V-"+v+"L-"+v+","+v+"V-"+v+"Z")},noDot:!0},"circle-cross":{n:27,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return u(f,x,"M0,"+v+"V-"+v+"M"+v+",0H-"+v+"M"+v+",0A"+v+","+v+" 0 1,1 0,-"+v+"A"+v+","+v+" 0 0,1 "+v+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(h,f,x){if(i(f))return s;var v=d(h,2),g=d(h/t,2);return u(f,x,"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g+"M"+v+",0A"+v+","+v+" 0 1,1 0,-"+v+"A"+v+","+v+" 0 0,1 "+v+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return u(f,x,"M0,"+v+"V-"+v+"M"+v+",0H-"+v+"M"+v+","+v+"H-"+v+"V-"+v+"H"+v+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return u(f,x,"M"+v+","+v+"L-"+v+",-"+v+"M"+v+",-"+v+"L-"+v+","+v+"M"+v+","+v+"H-"+v+"V-"+v+"H"+v+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(h,f,x){if(i(f))return s;var v=d(1.3*h,2);return u(f,x,"M"+v+",0L0,"+v+"L-"+v+",0L0,-"+v+"ZM0,-"+v+"V"+v+"M-"+v+",0H"+v)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(h,f,x){if(i(f))return s;var v=d(1.3*h,2),g=d(.65*h,2);return u(f,x,"M"+v+",0L0,"+v+"L-"+v+",0L0,-"+v+"ZM-"+g+",-"+g+"L"+g+","+g+"M-"+g+","+g+"L"+g+",-"+g)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(h,f,x){if(i(f))return s;var v=d(1.4*h,2);return u(f,x,"M0,"+v+"V-"+v+"M"+v+",0H-"+v)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return u(f,x,"M"+v+","+v+"L-"+v+",-"+v+"M"+v+",-"+v+"L-"+v+","+v)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(h,f,x){if(i(f))return s;var v=d(1.2*h,2),g=d(.85*h,2);return u(f,x,"M0,"+v+"V-"+v+"M"+v+",0H-"+v+"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(h,f,x){if(i(f))return s;var v=d(h/2,2),g=d(h,2);return u(f,x,"M"+v+","+g+"V-"+g+"M"+(v-g)+",-"+g+"V"+g+"M"+g+","+v+"H-"+g+"M-"+g+","+(v-g)+"H"+g)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(h,f,x){if(i(f))return s;var v=d(1.2*h,2),g=d(1.6*h,2),y=d(.8*h,2);return u(f,x,"M-"+v+","+y+"L0,0M"+v+","+y+"L0,0M0,-"+g+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(h,f,x){if(i(f))return s;var v=d(1.2*h,2),g=d(1.6*h,2),y=d(.8*h,2);return u(f,x,"M-"+v+",-"+y+"L0,0M"+v+",-"+y+"L0,0M0,"+g+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(h,f,x){if(i(f))return s;var v=d(1.2*h,2),g=d(1.6*h,2),y=d(.8*h,2);return u(f,x,"M"+y+","+v+"L0,0M"+y+",-"+v+"L0,0M-"+g+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(h,f,x){if(i(f))return s;var v=d(1.2*h,2),g=d(1.6*h,2),y=d(.8*h,2);return u(f,x,"M-"+y+","+v+"L0,0M-"+y+",-"+v+"L0,0M"+g+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(h,f,x){if(i(f))return s;var v=d(1.4*h,2);return u(f,x,"M"+v+",0H-"+v)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(h,f,x){if(i(f))return s;var v=d(1.4*h,2);return u(f,x,"M0,"+v+"V-"+v)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return u(f,x,"M"+v+",-"+v+"L-"+v+","+v)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return u(f,x,"M"+v+","+v+"L-"+v+",-"+v)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return u(f,x,"M0,0L-"+v+","+d(2*h,2)+"H"+v+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return u(f,x,"M0,0L-"+v+",-"+d(2*h,2)+"H"+v+"Z")},noDot:!0},"arrow-left":{n:47,f:function(h,f,x){if(i(f))return s;var v=d(2*h,2),g=d(h,2);return u(f,x,"M0,0L"+v+",-"+g+"V"+g+"Z")},noDot:!0},"arrow-right":{n:48,f:function(h,f,x){if(i(f))return s;var v=d(2*h,2),g=d(h,2);return u(f,x,"M0,0L-"+v+",-"+g+"V"+g+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return u(f,x,"M-"+v+",0H"+v+"M0,0L-"+v+","+d(2*h,2)+"H"+v+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(h,f,x){if(i(f))return s;var v=d(h,2);return u(f,x,"M-"+v+",0H"+v+"M0,0L-"+v+",-"+d(2*h,2)+"H"+v+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(h,f,x){if(i(f))return s;var v=d(2*h,2),g=d(h,2);return u(f,x,"M0,-"+g+"V"+g+"M0,0L"+v+",-"+g+"V"+g+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(h,f,x){if(i(f))return s;var v=d(2*h,2),g=d(h,2);return u(f,x,"M0,-"+g+"V"+g+"M0,0L-"+v+",-"+g+"V"+g+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(h,f,x){if(i(f))return s;var v=r/2.5,g=2*h*n(v),y=2*h*a(v);return u(f,x,"M0,0L"+-g+","+y+"L"+g+","+y+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(h,f,x){if(i(f))return s;var v=r/4,g=2*h*n(v),y=2*h*a(v);return u(f,x,"M0,0L"+-g+","+y+"A "+2*h+","+2*h+" 0 0 1 "+g+","+y+"Z")},backoff:.4,noDot:!0}}},25673:function(K){K.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},84532:function(K,z,e){var S=e(92770),k=e(73972),l=e(89298),T=e(71828),b=e(45827);function d(s,t,o,r){var n=t["error_"+r]||{},a=[];if(n.visible&&["linear","log"].indexOf(o.type)!==-1){for(var i=b(n),u=0;u<s.length;u++){var h=s[u],f=h.i;if(f===void 0)f=u;else if(f===null)continue;var x=h[r];if(S(o.c2l(x))){var v=i(x,f);if(S(v[0])&&S(v[1])){var g=h[r+"s"]=x-v[0],y=h[r+"h"]=x+v[1];a.push(g,y)}}}var p=o._id,m=t._extremes[p],w=l.findExtremes(o,a,T.extendFlat({tozero:m.opts.tozero},{padded:!0}));m.min=m.min.concat(w.min),m.max=m.max.concat(w.max)}}K.exports=function(s){for(var t=s.calcdata,o=0;o<t.length;o++){var r=t[o],n=r[0].trace;if(n.visible===!0&&k.traceIs(n,"errorBarsOK")){var a=l.getFromId(s,n.xaxis),i=l.getFromId(s,n.yaxis);d(r,n,a,"x"),d(r,n,i,"y")}}}},45827:function(K){function z(e,S){return e==="percent"?function(k){return Math.abs(k*S/100)}:e==="constant"?function(){return Math.abs(S)}:e==="sqrt"?function(k){return Math.sqrt(Math.abs(k))}:void 0}K.exports=function(e){var S=e.type,k=e.symmetric;if(S==="data"){var l=e.array||[];if(k)return function(s,t){var o=+l[t];return[o,o]};var T=e.arrayminus||[];return function(s,t){var o=+l[t],r=+T[t];return isNaN(o)&&isNaN(r)?[NaN,NaN]:[r||0,o||0]}}var b=z(S,e.value),d=z(S,e.valueminus);return k||e.valueminus===void 0?function(s){var t=b(s);return[t,t]}:function(s){return[d(s),b(s)]}}},97587:function(K,z,e){var S=e(92770),k=e(73972),l=e(71828),T=e(44467),b=e(25673);K.exports=function(d,s,t,o){var r="error_"+o.axis,n=T.newContainer(s,r),a=d[r]||{};function i(x,v){return l.coerce(a,n,b,x,v)}if(i("visible",a.array!==void 0||a.value!==void 0||a.type==="sqrt")!==!1){var u=i("type","array"in a?"data":"percent"),h=!0;u!=="sqrt"&&(h=i("symmetric",!((u==="data"?"arrayminus":"valueminus")in a))),u==="data"?(i("array"),i("traceref"),h||(i("arrayminus"),i("tracerefminus"))):u!=="percent"&&u!=="constant"||(i("value"),h||i("valueminus"));var f="copy_"+o.inherit+"style";o.inherit&&(s["error_"+o.inherit]||{}).visible&&i(f,!(a.color||S(a.thickness)||S(a.width))),o.inherit&&n[f]||(i("color",t),i("thickness"),i("width",k.traceIs(s,"gl3d")?0:4))}}},37369:function(K,z,e){var S=e(71828),k=e(30962).overrideAll,l=e(25673),T={error_x:S.extendFlat({},l),error_y:S.extendFlat({},l)};delete T.error_x.copy_zstyle,delete T.error_y.copy_zstyle,delete T.error_y.copy_ystyle;var b={error_x:S.extendFlat({},l),error_y:S.extendFlat({},l),error_z:S.extendFlat({},l)};delete b.error_x.copy_ystyle,delete b.error_y.copy_ystyle,delete b.error_z.copy_ystyle,delete b.error_z.copy_zstyle,K.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:T,bar:T,histogram:T,scatter3d:k(b,"calc","nested"),scattergl:k(T,"calc","nested")}},supplyDefaults:e(97587),calc:e(84532),makeComputeError:e(45827),plot:e(19398),style:e(62662),hoverInfo:function(d,s,t){(s.error_y||{}).visible&&(t.yerr=d.yh-d.y,s.error_y.symmetric||(t.yerrneg=d.y-d.ys)),(s.error_x||{}).visible&&(t.xerr=d.xh-d.x,s.error_x.symmetric||(t.xerrneg=d.x-d.xs))}}},19398:function(K,z,e){var S=e(39898),k=e(92770),l=e(91424),T=e(34098);K.exports=function(b,d,s,t){var o=s.xaxis,r=s.yaxis,n=t&&t.duration>0,a=b._context.staticPlot;d.each(function(i){var u,h=i[0].trace,f=h.error_x||{},x=h.error_y||{};h.ids&&(u=function(p){return p.id});var v=T.hasMarkers(h)&&h.marker.maxdisplayed>0;x.visible||f.visible||(i=[]);var g=S.select(this).selectAll("g.errorbar").data(i,u);if(g.exit().remove(),i.length){f.visible||g.selectAll("path.xerror").remove(),x.visible||g.selectAll("path.yerror").remove(),g.style("opacity",1);var y=g.enter().append("g").classed("errorbar",!0);n&&y.style("opacity",0).transition().duration(t.duration).style("opacity",1),l.setClipUrl(g,s.layerClipId,b),g.each(function(p){var m=S.select(this),w=function(C,O,I){var N={x:O.c2p(C.x),y:I.c2p(C.y)};return C.yh!==void 0&&(N.yh=I.c2p(C.yh),N.ys=I.c2p(C.ys),k(N.ys)||(N.noYS=!0,N.ys=I.c2p(C.ys,!0))),C.xh!==void 0&&(N.xh=O.c2p(C.xh),N.xs=O.c2p(C.xs),k(N.xs)||(N.noXS=!0,N.xs=O.c2p(C.xs,!0))),N}(p,o,r);if(!v||p.vis){var c,M=m.select("path.yerror");if(x.visible&&k(w.x)&&k(w.yh)&&k(w.ys)){var _=x.width;c="M"+(w.x-_)+","+w.yh+"h"+2*_+"m-"+_+",0V"+w.ys,w.noYS||(c+="m-"+_+",0h"+2*_),M.size()?n&&(M=M.transition().duration(t.duration).ease(t.easing)):M=m.append("path").style("vector-effect",a?"none":"non-scaling-stroke").classed("yerror",!0),M.attr("d",c)}else M.remove();var E=m.select("path.xerror");if(f.visible&&k(w.y)&&k(w.xh)&&k(w.xs)){var L=(f.copy_ystyle?x:f).width;c="M"+w.xh+","+(w.y-L)+"v"+2*L+"m0,-"+L+"H"+w.xs,w.noXS||(c+="m0,-"+L+"v"+2*L),E.size()?n&&(E=E.transition().duration(t.duration).ease(t.easing)):E=m.append("path").style("vector-effect",a?"none":"non-scaling-stroke").classed("xerror",!0),E.attr("d",c)}else E.remove()}})}})}},62662:function(K,z,e){var S=e(39898),k=e(7901);K.exports=function(l){l.each(function(T){var b=T[0].trace,d=b.error_y||{},s=b.error_x||{},t=S.select(this);t.selectAll("path.yerror").style("stroke-width",d.thickness+"px").call(k.stroke,d.color),s.copy_ystyle&&(s=d),t.selectAll("path.xerror").style("stroke-width",s.thickness+"px").call(k.stroke,s.color)})}},77914:function(K,z,e){var S=e(41940),k=e(528).hoverlabel,l=e(1426).extendFlat;K.exports={hoverlabel:{bgcolor:l({},k.bgcolor,{arrayOk:!0}),bordercolor:l({},k.bordercolor,{arrayOk:!0}),font:S({arrayOk:!0,editType:"none"}),align:l({},k.align,{arrayOk:!0}),namelength:l({},k.namelength,{arrayOk:!0}),editType:"none"}}},30732:function(K,z,e){var S=e(71828),k=e(73972);function l(T,b,d,s){s=s||S.identity,Array.isArray(T)&&(b[0][d]=s(T))}K.exports=function(T){var b=T.calcdata,d=T._fullLayout;function s(a){return function(i){return S.coerceHoverinfo({hoverinfo:i},{_module:a._module},d)}}for(var t=0;t<b.length;t++){var o=b[t],r=o[0].trace;if(!k.traceIs(r,"pie-like")){var n=k.traceIs(r,"2dMap")?l:S.fillArray;n(r.hoverinfo,o,"hi",s(r)),r.hovertemplate&&n(r.hovertemplate,o,"ht"),r.hoverlabel&&(n(r.hoverlabel.bgcolor,o,"hbg"),n(r.hoverlabel.bordercolor,o,"hbc"),n(r.hoverlabel.font.size,o,"hts"),n(r.hoverlabel.font.color,o,"htc"),n(r.hoverlabel.font.family,o,"htf"),n(r.hoverlabel.namelength,o,"hnl"),n(r.hoverlabel.align,o,"hta"))}}}},75914:function(K,z,e){var S=e(73972),k=e(88335).hover;K.exports=function(l,T,b){var d=S.getComponentMethod("annotations","onClick")(l,l._hoverdata);function s(){l.emit("plotly_click",{points:l._hoverdata,event:T})}b!==void 0&&k(l,T,b,!0),l._hoverdata&&T&&T.target&&(d&&d.then?d.then(s):s(),T.stopImmediatePropagation&&T.stopImmediatePropagation())}},26675:function(K){K.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},54268:function(K,z,e){var S=e(71828),k=e(77914),l=e(38048);K.exports=function(T,b,d,s){var t=S.extendFlat({},s.hoverlabel);b.hovertemplate&&(t.namelength=-1),l(T,b,function(o,r){return S.coerce(T,b,k,o,r)},t)}},23469:function(K,z,e){var S=e(71828);z.getSubplot=function(s){return s.subplot||s.xaxis+s.yaxis||s.geo},z.isTraceInSubplots=function(s,t){if(s.type==="splom"){for(var o=s.xaxes||[],r=s.yaxes||[],n=0;n<o.length;n++)for(var a=0;a<r.length;a++)if(t.indexOf(o[n]+r[a])!==-1)return!0;return!1}return t.indexOf(z.getSubplot(s))!==-1},z.flat=function(s,t){for(var o=new Array(s.length),r=0;r<s.length;r++)o[r]=t;return o},z.p2c=function(s,t){for(var o=new Array(s.length),r=0;r<s.length;r++)o[r]=s[r].p2c(t);return o},z.getDistanceFunction=function(s,t,o,r){return s==="closest"?r||z.quadrature(t,o):s.charAt(0)==="x"?t:o},z.getClosest=function(s,t,o){if(o.index!==!1)o.index>=0&&o.index<s.length?o.distance=0:o.index=!1;else for(var r=0;r<s.length;r++){var n=t(s[r]);n<=o.distance&&(o.index=r,o.distance=n)}return o},z.inbox=function(s,t,o){return s*t<0||s===0?o:1/0},z.quadrature=function(s,t){return function(o){var r=s(o),n=t(o);return Math.sqrt(r*r+n*n)}},z.makeEventData=function(s,t,o){var r="index"in s?s.index:s.pointNumber,n={data:t._input,fullData:t,curveNumber:t.index,pointNumber:r};if(t._indexToPoints){var a=t._indexToPoints[r];a.length===1?n.pointIndex=a[0]:n.pointIndices=a}else n.pointIndex=r;return t._module.eventData?n=t._module.eventData(n,s,t,o,r):("xVal"in s?n.x=s.xVal:"x"in s&&(n.x=s.x),"yVal"in s?n.y=s.yVal:"y"in s&&(n.y=s.y),s.xa&&(n.xaxis=s.xa),s.ya&&(n.yaxis=s.ya),s.zLabelVal!==void 0&&(n.z=s.zLabelVal)),z.appendArrayPointValue(n,t,r),n},z.appendArrayPointValue=function(s,t,o){var r=t._arrayAttrs;if(r)for(var n=0;n<r.length;n++){var a=r[n],i=l(a);if(s[i]===void 0){var u=T(S.nestedProperty(t,a).get(),o);u!==void 0&&(s[i]=u)}}},z.appendArrayMultiPointValues=function(s,t,o){var r=t._arrayAttrs;if(r)for(var n=0;n<r.length;n++){var a=r[n],i=l(a);if(s[i]===void 0){for(var u=S.nestedProperty(t,a).get(),h=new Array(o.length),f=0;f<o.length;f++)h[f]=T(u,o[f]);s[i]=h}}};var k={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function l(s){return k[s]||s}function T(s,t){return Array.isArray(t)?Array.isArray(s)&&Array.isArray(s[t[0]])?s[t[0]][t[1]]:void 0:s[t]}var b={x:!0,y:!0},d={"x unified":!0,"y unified":!0};z.isUnifiedHover=function(s){return typeof s=="string"&&!!d[s]},z.isXYhover=function(s){return typeof s=="string"&&!!b[s]}},88335:function(K,z,e){var S=e(39898),k=e(92770),l=e(84267),T=e(71828),b=T.strTranslate,d=T.strRotate,s=e(11086),t=e(63893),o=e(39918),r=e(91424),n=e(7901),a=e(28569),i=e(89298),u=e(73972),h=e(23469),f=e(26675),x=e(99017),v=e(43969),g=f.YANGLE,y=Math.PI*g/180,p=1/Math.sin(y),m=Math.cos(y),w=Math.sin(y),c=f.HOVERARROWSIZE,M=f.HOVERTEXTPAD,_={box:!0,ohlc:!0,violin:!0,candlestick:!0},E={scatter:!0,scattergl:!0,splom:!0};function L(Y){return[Y.trace.index,Y.index,Y.x0,Y.y0,Y.name,Y.attr,Y.xa?Y.xa._id:"",Y.ya?Y.ya._id:""].join(",")}z.hover=function(Y,W,Q,ne){Y=T.getGraphDiv(Y);var re=W.target;T.throttle(Y._fullLayout._uid+f.HOVERID,f.HOVERMINTIME,function(){(function(ie,se,ge,ue,ce){ge||(ge="xy");var le=Array.isArray(ge)?ge:[ge],de=ie._fullLayout,Ce=de._plots||[],xe=Ce[ge],_e=de._has("cartesian");if(xe){var we=xe.overlays.map(function(Gt){return Gt.id});le=le.concat(we)}for(var Ae=le.length,$=new Array(Ae),oe=new Array(Ae),pe=!1,ye=0;ye<Ae;ye++){var ke=le[ye];if(Ce[ke])pe=!0,$[ye]=Ce[ke].xaxis,oe[ye]=Ce[ke].yaxis;else{if(!de[ke]||!de[ke]._subplot)return void T.warn("Unrecognized subplot: "+ke);var De=de[ke]._subplot;$[ye]=De.xaxis,oe[ye]=De.yaxis}}var Pe=se.hovermode||de.hovermode;if(Pe&&!pe&&(Pe="closest"),["x","y","closest","x unified","y unified"].indexOf(Pe)===-1||!ie.calcdata||ie.querySelector(".zoombox")||ie._dragging)return a.unhoverRaw(ie,se);var Re=de.hoverdistance;Re===-1&&(Re=1/0);var fe=de.spikedistance;fe===-1&&(fe=1/0);var ve,Te,ze,He,Ve,nt,tt,ot,pt,Tt,yt,dt,Pt,Et=[],Ot=[],Nt={hLinePoint:null,vLinePoint:null},zt=!1;if(Array.isArray(se))for(Pe="array",ze=0;ze<se.length;ze++)(Ve=ie.calcdata[se[ze].curveNumber||0])&&(nt=Ve[0].trace,Ve[0].trace.hoverinfo!=="skip"&&(Ot.push(Ve),nt.orientation==="h"&&(zt=!0)));else{for(He=0;He<ie.calcdata.length;He++)Ve=ie.calcdata[He],(nt=Ve[0].trace).hoverinfo!=="skip"&&h.isTraceInSubplots(nt,le)&&(Ot.push(Ve),nt.orientation==="h"&&(zt=!0));var Ze,Ye;if(ce){if(s.triggerHandler(ie,"plotly_beforehover",se)===!1)return;var je=ce.getBoundingClientRect();Ze=se.clientX-je.left,Ye=se.clientY-je.top,de._calcInverseTransform(ie);var Ke=T.apply3DTransform(de._invTransform)(Ze,Ye);if(Ze=Ke[0],Ye=Ke[1],Ze<0||Ze>$[0]._length||Ye<0||Ye>oe[0]._length)return a.unhoverRaw(ie,se)}else Ze="xpx"in se?se.xpx:$[0]._length/2,Ye="ypx"in se?se.ypx:oe[0]._length/2;if(se.pointerX=Ze+$[0]._offset,se.pointerY=Ye+oe[0]._offset,ve="xval"in se?h.flat(le,se.xval):h.p2c($,Ze),Te="yval"in se?h.flat(le,se.yval):h.p2c(oe,Ye),!k(ve[0])||!k(Te[0]))return T.warn("Fx.hover failed",se,ie),a.unhoverRaw(ie,se)}var st=1/0;function Se(Gt,hn){for(He=0;He<Ot.length;He++)if((Ve=Ot[He])&&Ve[0]&&Ve[0].trace&&(nt=Ve[0].trace).visible===!0&&nt._length!==0&&["carpet","contourcarpet"].indexOf(nt._module.name)===-1){if(nt.type==="splom"?tt=le[ot=0]:(tt=h.getSubplot(nt),ot=le.indexOf(tt)),pt=Pe,h.isUnifiedHover(pt)&&(pt=pt.charAt(0)),dt={cd:Ve,trace:nt,xa:$[ot],ya:oe[ot],maxHoverDistance:Re,maxSpikeDistance:fe,index:!1,distance:Math.min(st,Re),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:n.defaultLine,name:nt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},de[tt]&&(dt.subplot=de[tt]._subplot),de._splomScenes&&de._splomScenes[nt.uid]&&(dt.scene=de._splomScenes[nt.uid]),Pt=Et.length,pt==="array"){var An=se[He];"pointNumber"in An?(dt.index=An.pointNumber,pt="closest"):(pt="","xval"in An&&(Tt=An.xval,pt="x"),"yval"in An&&(yt=An.yval,pt=pt?"closest":"y"))}else Gt!==void 0&&hn!==void 0?(Tt=Gt,yt=hn):(Tt=ve[ot],yt=Te[ot]);if(Re!==0)if(nt._module&&nt._module.hoverPoints){var Tn=nt._module.hoverPoints(dt,Tt,yt,pt,{finiteRange:!0,hoverLayer:de._hoverlayer});if(Tn)for(var Rn,qn=0;qn<Tn.length;qn++)Rn=Tn[qn],k(Rn.x0)&&k(Rn.y0)&&Et.push(V(Rn,Pe))}else T.log("Unrecognized trace type in hover:",nt);if(Pe==="closest"&&Et.length>Pt&&(Et.splice(0,Pt),st=Et[0].distance),_e&&fe!==0&&Et.length===0){dt.distance=fe,dt.index=!1;var Un=nt._module.hoverPoints(dt,Tt,yt,"closest",{hoverLayer:de._hoverlayer});if(Un&&(Un=Un.filter(function(Zt){return Zt.spikeDistance<=fe})),Un&&Un.length){var Yn,or=Un.filter(function(Zt){return Zt.xa.showspikes&&Zt.xa.spikesnap!=="hovered data"});if(or.length){var Jt=or[0];k(Jt.x0)&&k(Jt.y0)&&(Yn=We(Jt),(!Nt.vLinePoint||Nt.vLinePoint.spikeDistance>Yn.spikeDistance)&&(Nt.vLinePoint=Yn))}var Mn=Un.filter(function(Zt){return Zt.ya.showspikes&&Zt.ya.spikesnap!=="hovered data"});if(Mn.length){var Rt=Mn[0];k(Rt.x0)&&k(Rt.y0)&&(Yn=We(Rt),(!Nt.hLinePoint||Nt.hLinePoint.spikeDistance>Yn.spikeDistance)&&(Nt.hLinePoint=Yn))}}}}}function Ie(Gt,hn,An){for(var Tn,Rn=null,qn=1/0,Un=0;Un<Gt.length;Un++)Tn=Gt[Un].spikeDistance,An&&Un===0&&(Tn=-1/0),Tn<=qn&&Tn<=hn&&(Rn=Gt[Un],qn=Tn);return Rn}function We(Gt){return Gt?{xa:Gt.xa,ya:Gt.ya,x:Gt.xSpike!==void 0?Gt.xSpike:(Gt.x0+Gt.x1)/2,y:Gt.ySpike!==void 0?Gt.ySpike:(Gt.y0+Gt.y1)/2,distance:Gt.distance,spikeDistance:Gt.spikeDistance,curveNumber:Gt.trace.index,color:Gt.color,pointNumber:Gt.index}:null}Se();var it={fullLayout:de,container:de._hoverlayer,event:se},lt=ie._spikepoints,gt={vLinePoint:Nt.vLinePoint,hLinePoint:Nt.hLinePoint};ie._spikepoints=gt;var At=function(){Et.sort(function(Gt,hn){return Gt.distance-hn.distance}),Et=function(Gt,hn){for(var An=hn.charAt(0),Tn=[],Rn=[],qn=[],Un=0;Un<Gt.length;Un++){var Yn=Gt[Un];u.traceIs(Yn.trace,"bar-like")||u.traceIs(Yn.trace,"box-violin")?qn.push(Yn):Yn.trace[An+"period"]?Rn.push(Yn):Tn.push(Yn)}return Tn.concat(Rn).concat(qn)}(Et,Pe)};At();var kt=Pe.charAt(0),ht=(kt==="x"||kt==="y")&&Et[0]&&E[Et[0].trace.type];if(_e&&fe!==0&&Et.length!==0){var St=Ie(Et.filter(function(Gt){return Gt.ya.showspikes}),fe,ht);Nt.hLinePoint=We(St);var vt=Ie(Et.filter(function(Gt){return Gt.xa.showspikes}),fe,ht);Nt.vLinePoint=We(vt)}if(Et.length===0){var Mt=a.unhoverRaw(ie,se);return!_e||Nt.hLinePoint===null&&Nt.vLinePoint===null||D(lt)&&F(ie,Nt,it),Mt}if(_e&&D(lt)&&F(ie,Nt,it),h.isXYhover(pt)&&Et[0].length!==0&&Et[0].trace.type!=="splom"){var It=Et[0],Ut=(Et=_[It.trace.type]?Et.filter(function(Gt){return Gt.trace.index===It.trace.index}):[It]).length;Se(j("x",It,de),j("y",It,de));var jt,qt=[],Yt={},Kt=0,pn=function(Gt){var hn=_[Gt.trace.type]?L(Gt):Gt.trace.index;if(Yt[hn]){var An=Yt[hn]-1,Tn=qt[An];An>0&&Math.abs(Gt.distance)<Math.abs(Tn.distance)&&(qt[An]=Gt)}else Kt++,Yt[hn]=Kt,qt.push(Gt)};for(jt=0;jt<Ut;jt++)pn(Et[jt]);for(jt=Et.length-1;jt>Ut-1;jt--)pn(Et[jt]);Et=qt,At()}var nn=ie._hoverdata,xn=[],jn=J(ie),mn=X(ie);for(ze=0;ze<Et.length;ze++){var en=Et[ze],vn=h.makeEventData(en,en.trace,en.cd);if(en.hovertemplate!==!1){var on=!1;en.cd[en.index]&&en.cd[en.index].ht&&(on=en.cd[en.index].ht),en.hovertemplate=on||en.trace.hovertemplate||!1}if(en.xa&&en.ya){var sn=en.x0+en.xa._offset,En=en.x1+en.xa._offset,kn=en.y0+en.ya._offset,zn=en.y1+en.ya._offset,Fn=Math.min(sn,En),Bn=Math.max(sn,En),er=Math.min(kn,zn),Xn=Math.max(kn,zn);vn.bbox={x0:Fn+mn,x1:Bn+mn,y0:er+jn,y1:Xn+jn}}en.eventData=[vn],xn.push(vn)}ie._hoverdata=xn;var mr=Pe==="y"&&(Ot.length>1||Et.length>1)||Pe==="closest"&&zt&&Et.length>1,ur=n.combine(de.plot_bgcolor||n.background,de.paper_bgcolor),$n=O(Et,{gd:ie,hovermode:Pe,rotateLabels:mr,bgColor:ur,container:de._hoverlayer,outerContainer:de._paper.node(),commonLabelOpts:de.hoverlabel,hoverdistance:de.hoverdistance}),lr=$n.hoverLabels;if(h.isUnifiedHover(Pe)||(function(Gt,hn,An,Tn){var Rn,qn,Un,Yn,or,Jt,Mn,Rt=hn?"xa":"ya",Zt=hn?"ya":"xa",rn=0,Ln=1,Sn=Gt.size(),wn=new Array(Sn),ln=0,gn=Tn.minX,un=Tn.maxX,fn=Tn.minY,bn=Tn.maxY,In=function(xr){return xr*An._invScaleX},Hn=function(xr){return xr*An._invScaleY};function Wn(xr){var Tr=xr[0],sr=xr[xr.length-1];if(qn=Tr.pmin-Tr.pos-Tr.dp+Tr.size,Un=sr.pos+sr.dp+sr.size-Tr.pmax,qn>.01){for(or=xr.length-1;or>=0;or--)xr[or].dp+=qn;Rn=!1}if(!(Un<.01)){if(qn<-.01){for(or=xr.length-1;or>=0;or--)xr[or].dp-=Un;Rn=!1}if(Rn){var kr=0;for(Yn=0;Yn<xr.length;Yn++)(Jt=xr[Yn]).pos+Jt.dp+Jt.size>Tr.pmax&&kr++;for(Yn=xr.length-1;Yn>=0&&!(kr<=0);Yn--)(Jt=xr[Yn]).pos>Tr.pmax-1&&(Jt.del=!0,kr--);for(Yn=0;Yn<xr.length&&!(kr<=0);Yn++)if((Jt=xr[Yn]).pos<Tr.pmin+1)for(Jt.del=!0,kr--,Un=2*Jt.size,or=xr.length-1;or>=0;or--)xr[or].dp-=Un;for(Yn=xr.length-1;Yn>=0&&!(kr<=0);Yn--)(Jt=xr[Yn]).pos+Jt.dp+Jt.size>Tr.pmax&&(Jt.del=!0,kr--)}}}for(Gt.each(function(xr){var Tr=xr[Rt],sr=xr[Zt],kr=Tr._id.charAt(0)==="x",Rr=Tr.range;ln===0&&Rr&&Rr[0]>Rr[1]!==kr&&(Ln=-1);var Qr=0,ci=kr?An.width:An.height;if(An.hovermode==="x"||An.hovermode==="y"){var pi,qi,Ei=N(xr,hn),oi=xr.anchor,la=oi==="end"?-1:1;if(oi==="middle")qi=(pi=xr.crossPos+(kr?Hn(Ei.y-xr.by/2):In(xr.bx/2+xr.tx2width/2)))+(kr?Hn(xr.by):In(xr.bx));else if(kr)qi=(pi=xr.crossPos+Hn(c+Ei.y)-Hn(xr.by/2-c))+Hn(xr.by);else{var Aa=In(la*c+Ei.x),no=Aa+In(la*xr.bx);pi=xr.crossPos+Math.min(Aa,no),qi=xr.crossPos+Math.max(Aa,no)}kr?fn!==void 0&&bn!==void 0&&Math.min(qi,bn)-Math.max(pi,fn)>1&&(sr.side==="left"?(Qr=sr._mainLinePosition,ci=An.width):ci=sr._mainLinePosition):gn!==void 0&&un!==void 0&&Math.min(qi,un)-Math.max(pi,gn)>1&&(sr.side==="top"?(Qr=sr._mainLinePosition,ci=An.height):ci=sr._mainLinePosition)}wn[ln++]=[{datum:xr,traceIndex:xr.trace.index,dp:0,pos:xr.pos,posref:xr.posref,size:xr.by*(kr?p:1)/2,pmin:Qr,pmax:ci}]}),wn.sort(function(xr,Tr){return xr[0].posref-Tr[0].posref||Ln*(Tr[0].traceIndex-xr[0].traceIndex)});!Rn&&rn<=Sn;){for(rn++,Rn=!0,Yn=0;Yn<wn.length-1;){var Gn=wn[Yn],nr=wn[Yn+1],tr=Gn[Gn.length-1],ar=nr[0];if((qn=tr.pos+tr.dp+tr.size-ar.pos-ar.dp+ar.size)>.01&&tr.pmin===ar.pmin&&tr.pmax===ar.pmax){for(or=nr.length-1;or>=0;or--)nr[or].dp+=qn;for(Gn.push.apply(Gn,nr),wn.splice(Yn+1,1),Mn=0,or=Gn.length-1;or>=0;or--)Mn+=Gn[or].dp;for(Un=Mn/Gn.length,or=Gn.length-1;or>=0;or--)Gn[or].dp-=Un;Rn=!1}else Yn++}wn.forEach(Wn)}for(Yn=wn.length-1;Yn>=0;Yn--){var ir=wn[Yn];for(or=ir.length-1;or>=0;or--){var cr=ir[or],br=cr.datum;br.offset=cr.dp,br.del=cr.del}}}(lr,mr,de,$n.commonLabelBoundingBox),R(lr,mr,de._invScaleX,de._invScaleY)),ce&&ce.tagName){var hr=u.getComponentMethod("annotations","hasClickToShow")(ie,xn);o(S.select(ce),hr?"pointer":"")}ce&&!ue&&function(Gt,hn,An){if(!An||An.length!==Gt._hoverdata.length)return!0;for(var Tn=An.length-1;Tn>=0;Tn--){var Rn=An[Tn],qn=Gt._hoverdata[Tn];if(Rn.curveNumber!==qn.curveNumber||String(Rn.pointNumber)!==String(qn.pointNumber)||String(Rn.pointNumbers)!==String(qn.pointNumbers))return!0}return!1}(ie,0,nn)&&(nn&&ie.emit("plotly_unhover",{event:se,points:nn}),ie.emit("plotly_hover",{event:se,points:ie._hoverdata,xaxes:$,yaxes:oe,xvals:ve,yvals:Te}))})(Y,W,Q,ne,re)})},z.loneHover=function(Y,W){var Q=!0;Array.isArray(Y)||(Q=!1,Y=[Y]);var ne=W.gd,re=J(ne),ie=X(ne),se=O(Y.map(function(ce){var le=ce._x0||ce.x0||ce.x||0,de=ce._x1||ce.x1||ce.x||0,Ce=ce._y0||ce.y0||ce.y||0,xe=ce._y1||ce.y1||ce.y||0,_e=ce.eventData;if(_e){var we=Math.min(le,de),Ae=Math.max(le,de),$=Math.min(Ce,xe),oe=Math.max(Ce,xe),pe=ce.trace;if(u.traceIs(pe,"gl3d")){var ye=ne._fullLayout[pe.scene]._scene.container,ke=ye.offsetLeft,De=ye.offsetTop;we+=ke,Ae+=ke,$+=De,oe+=De}_e.bbox={x0:we+ie,x1:Ae+ie,y0:$+re,y1:oe+re},W.inOut_bbox&&W.inOut_bbox.push(_e.bbox)}else _e=!1;return{color:ce.color||n.defaultLine,x0:ce.x0||ce.x||0,x1:ce.x1||ce.x||0,y0:ce.y0||ce.y||0,y1:ce.y1||ce.y||0,xLabel:ce.xLabel,yLabel:ce.yLabel,zLabel:ce.zLabel,text:ce.text,name:ce.name,idealAlign:ce.idealAlign,borderColor:ce.borderColor,fontFamily:ce.fontFamily,fontSize:ce.fontSize,fontColor:ce.fontColor,nameLength:ce.nameLength,textAlign:ce.textAlign,trace:ce.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:ce.hovertemplate||!1,hovertemplateLabels:ce.hovertemplateLabels||!1,eventData:_e}}),{gd:ne,hovermode:"closest",rotateLabels:!1,bgColor:W.bgColor||n.background,container:S.select(W.container),outerContainer:W.outerContainer||W.container}).hoverLabels,ge=0,ue=0;return se.sort(function(ce,le){return ce.y0-le.y0}).each(function(ce,le){var de=ce.y0-ce.by/2;ce.offset=de-5<ge?ge-de+5:0,ge=de+ce.by+ce.offset,le===W.anchorIndex&&(ue=ce.offset)}).each(function(ce){ce.offset-=ue}),R(se,!1,ne._fullLayout._invScaleX,ne._fullLayout._invScaleY),Q?se:se.node()};var C=/<extra>([\s\S]*)<\/extra>/;function O(Y,W){var Q=W.gd,ne=Q._fullLayout,re=W.hovermode,ie=W.rotateLabels,se=W.bgColor,ge=W.container,ue=W.outerContainer,ce=W.commonLabelOpts||{};if(Y.length===0)return[[]];var le=W.fontFamily||f.HOVERFONT,de=W.fontSize||f.HOVERFONTSIZE,Ce=Y[0],xe=Ce.xa,_e=Ce.ya,we=re.charAt(0),Ae=we+"Label",$=Ce[Ae];if($===void 0&&xe.type==="multicategory")for(var oe=0;oe<Y.length&&($=Y[oe][Ae])===void 0;oe++);var pe=Z(Q,ue),ye=pe.top,ke=pe.width,De=pe.height,Pe=$!==void 0&&Ce.distance<=W.hoverdistance&&(re==="x"||re==="y");if(Pe){var Re,fe,ve=!0;for(Re=0;Re<Y.length;Re++)if(ve&&Y[Re].zLabel===void 0&&(ve=!1),fe=Y[Re].hoverinfo||Y[Re].trace.hoverinfo){var Te=Array.isArray(fe)?fe:fe.split("+");if(Te.indexOf("all")===-1&&Te.indexOf(re)===-1){Pe=!1;break}}ve&&(Pe=!1)}var ze=ge.selectAll("g.axistext").data(Pe?[0]:[]);ze.enter().append("g").classed("axistext",!0),ze.exit().remove();var He={minX:0,maxX:0,minY:0,maxY:0};if(ze.each(function(){var Mt=S.select(this),It=T.ensureSingle(Mt,"path","",function(er){er.style({"stroke-width":"1px"})}),Ut=T.ensureSingle(Mt,"text","",function(er){er.attr("data-notex",1)}),jt=ce.bgcolor||n.defaultLine,qt=ce.bordercolor||n.contrast(jt),Yt=n.contrast(jt),Kt={family:ce.font.family||le,size:ce.font.size||de,color:ce.font.color||Yt};It.style({fill:jt,stroke:qt}),Ut.text($).call(r.font,Kt).call(t.positionText,0,0).call(t.convertToTspans,Q),Mt.attr("transform","");var pn,nn,xn=Z(Q,Ut.node());if(re==="x"){var jn=xe.side==="top"?"-":"";Ut.attr("text-anchor","middle").call(t.positionText,0,xe.side==="top"?ye-xn.bottom-c-M:ye-xn.top+c+M),pn=xe._offset+(Ce.x0+Ce.x1)/2,nn=_e._offset+(xe.side==="top"?0:_e._length);var mn=xn.width/2+M;pn<mn?(pn=mn,It.attr("d","M-"+(mn-c)+",0L-"+(mn-2*c)+","+jn+c+"H"+mn+"v"+jn+(2*M+xn.height)+"H-"+mn+"V"+jn+c+"Z")):pn>ne.width-mn?(pn=ne.width-mn,It.attr("d","M"+(mn-c)+",0L"+mn+","+jn+c+"v"+jn+(2*M+xn.height)+"H-"+mn+"V"+jn+c+"H"+(mn-2*c)+"Z")):It.attr("d","M0,0L"+c+","+jn+c+"H"+mn+"v"+jn+(2*M+xn.height)+"H-"+mn+"V"+jn+c+"H-"+c+"Z"),He.minX=pn-mn,He.maxX=pn+mn,xe.side==="top"?(He.minY=nn-(2*M+xn.height),He.maxY=nn-M):(He.minY=nn+M,He.maxY=nn+(2*M+xn.height))}else{var en,vn,on;_e.side==="right"?(en="start",vn=1,on="",pn=xe._offset+xe._length):(en="end",vn=-1,on="-",pn=xe._offset),nn=_e._offset+(Ce.y0+Ce.y1)/2,Ut.attr("text-anchor",en),It.attr("d","M0,0L"+on+c+","+c+"V"+(M+xn.height/2)+"h"+on+(2*M+xn.width)+"V-"+(M+xn.height/2)+"H"+on+c+"V-"+c+"Z"),He.minY=nn-(M+xn.height/2),He.maxY=nn+(M+xn.height/2),_e.side==="right"?(He.minX=pn+c,He.maxX=pn+c+(2*M+xn.width)):(He.minX=pn-c-(2*M+xn.width),He.maxX=pn-c);var sn,En=xn.height/2,kn=ye-xn.top-En,zn="clip"+ne._uid+"commonlabel"+_e._id;if(pn<xn.width+2*M+c){sn="M-"+(c+M)+"-"+En+"h-"+(xn.width-M)+"V"+En+"h"+(xn.width-M)+"Z";var Fn=xn.width-pn+M;t.positionText(Ut,Fn,kn),en==="end"&&Ut.selectAll("tspan").each(function(){var er=S.select(this),Xn=r.tester.append("text").text(er.text()).call(r.font,Kt),mr=Z(Q,Xn.node());Math.round(mr.width)<Math.round(xn.width)&&er.attr("x",Fn-mr.width),Xn.remove()})}else t.positionText(Ut,vn*(M+c),kn),sn=null;var Bn=ne._topclips.selectAll("#"+zn).data(sn?[0]:[]);Bn.enter().append("clipPath").attr("id",zn).append("path"),Bn.exit().remove(),Bn.select("path").attr("d",sn),r.setClipUrl(Ut,sn?zn:null,Q)}Mt.attr("transform",b(pn,nn))}),h.isUnifiedHover(re)){ge.selectAll("g.hovertext").remove();var Ve=Y.filter(function(Mt){return Mt.hoverinfo!=="none"});if(Ve.length===0)return;var nt=ne.hoverlabel,tt=nt.font,ot={showlegend:!0,legend:{title:{text:$,font:tt},font:tt,bgcolor:nt.bgcolor,bordercolor:nt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ne.legend?ne.legend.traceorder:void 0,orientation:"v"}},pt={font:tt};x(ot,pt,Q._fullData);var Tt=pt.legend;Tt.entries=[];for(var yt=0;yt<Ve.length;yt++){var dt=Ve[yt];if(dt.hoverinfo!=="none"){var Pt=I(dt,!0,re,ne,$),Et=Pt[0],Ot=Pt[1];dt.name=Ot,dt.text=Ot!==""?Ot+" : "+Et:Et;var Nt=dt.cd[dt.index];Nt&&(Nt.mc&&(dt.mc=Nt.mc),Nt.mcc&&(dt.mc=Nt.mcc),Nt.mlc&&(dt.mlc=Nt.mlc),Nt.mlcc&&(dt.mlc=Nt.mlcc),Nt.mlw&&(dt.mlw=Nt.mlw),Nt.mrc&&(dt.mrc=Nt.mrc),Nt.dir&&(dt.dir=Nt.dir)),dt._distinct=!0,Tt.entries.push([dt])}}Tt.entries.sort(function(Mt,It){return Mt[0].trace.index-It[0].trace.index}),Tt.layer=ge,Tt._inHover=!0,Tt._groupTitleFont=nt.grouptitlefont,v(Q,Tt);var zt,Ze,Ye,je,Ke=ge.select("g.legend"),st=Z(Q,Ke.node()),Se=st.width+2*M,Ie=st.height+2*M,We=Ve[0],it=(We.x0+We.x1)/2,lt=(We.y0+We.y1)/2,gt=!(u.traceIs(We.trace,"bar-like")||u.traceIs(We.trace,"box-violin"));we==="y"?gt?(Ze=lt-M,zt=lt+M):(Ze=Math.min.apply(null,Ve.map(function(Mt){return Math.min(Mt.y0,Mt.y1)})),zt=Math.max.apply(null,Ve.map(function(Mt){return Math.max(Mt.y0,Mt.y1)}))):Ze=zt=T.mean(Ve.map(function(Mt){return(Mt.y0+Mt.y1)/2}))-Ie/2,we==="x"?gt?(Ye=it+M,je=it-M):(Ye=Math.max.apply(null,Ve.map(function(Mt){return Math.max(Mt.x0,Mt.x1)})),je=Math.min.apply(null,Ve.map(function(Mt){return Math.min(Mt.x0,Mt.x1)}))):Ye=je=T.mean(Ve.map(function(Mt){return(Mt.x0+Mt.x1)/2}))-Se/2;var At,kt,ht=xe._offset,St=_e._offset;return je+=ht-Se,Ze+=St-Ie,At=(Ye+=ht)+Se<ke&&Ye>=0?Ye:je+Se<ke&&je>=0?je:ht+Se<ke?ht:Ye-it<it-je+Se?ke-Se:0,At+=M,kt=(zt+=St)+Ie<De&&zt>=0?zt:Ze+Ie<De&&Ze>=0?Ze:St+Ie<De?St:zt-lt<lt-Ze+Ie?De-Ie:0,kt+=M,Ke.attr("transform",b(At-1,kt-1)),Ke}var vt=ge.selectAll("g.hovertext").data(Y,function(Mt){return L(Mt)});return vt.enter().append("g").classed("hovertext",!0).each(function(){var Mt=S.select(this);Mt.append("rect").call(n.fill,n.addOpacity(se,.8)),Mt.append("text").classed("name",!0),Mt.append("path").style("stroke-width","1px"),Mt.append("text").classed("nums",!0).call(r.font,le,de)}),vt.exit().remove(),vt.each(function(Mt){var It=S.select(this).attr("transform",""),Ut=Mt.color;Array.isArray(Ut)&&(Ut=Ut[Mt.eventData[0].pointNumber]);var jt=Mt.bgcolor||Ut,qt=n.combine(n.opacity(jt)?jt:n.defaultLine,se),Yt=n.combine(n.opacity(Ut)?Ut:n.defaultLine,se),Kt=Mt.borderColor||n.contrast(qt),pn=I(Mt,Pe,re,ne,$,It),nn=pn[0],xn=pn[1],jn=It.select("text.nums").call(r.font,Mt.fontFamily||le,Mt.fontSize||de,Mt.fontColor||Kt).text(nn).attr("data-notex",1).call(t.positionText,0,0).call(t.convertToTspans,Q),mn=It.select("text.name"),en=0,vn=0;if(xn&&xn!==nn){mn.call(r.font,Mt.fontFamily||le,Mt.fontSize||de,Yt).text(xn).attr("data-notex",1).call(t.positionText,0,0).call(t.convertToTspans,Q);var on=Z(Q,mn.node());en=on.width+2*M,vn=on.height+2*M}else mn.remove(),It.select("rect").remove();It.select("path").style({fill:qt,stroke:Kt});var sn=Mt.xa._offset+(Mt.x0+Mt.x1)/2,En=Mt.ya._offset+(Mt.y0+Mt.y1)/2,kn=Math.abs(Mt.x1-Mt.x0),zn=Math.abs(Mt.y1-Mt.y0),Fn=Z(Q,jn.node()),Bn=Fn.width/ne._invScaleX,er=Fn.height/ne._invScaleY;Mt.ty0=(ye-Fn.top)/ne._invScaleY,Mt.bx=Bn+2*M,Mt.by=Math.max(er+2*M,vn),Mt.anchor="start",Mt.txwidth=Bn,Mt.tx2width=en,Mt.offset=0;var Xn,mr,ur=(Bn+c+M+en)*ne._invScaleX;if(ie)Mt.pos=sn,Xn=En+zn/2+ur<=De,mr=En-zn/2-ur>=0,Mt.idealAlign!=="top"&&Xn||!mr?Xn?(En+=zn/2,Mt.anchor="start"):Mt.anchor="middle":(En-=zn/2,Mt.anchor="end"),Mt.crossPos=En;else{if(Mt.pos=En,Xn=sn+kn/2+ur<=ke,mr=sn-kn/2-ur>=0,Mt.idealAlign!=="left"&&Xn||!mr)if(Xn)sn+=kn/2,Mt.anchor="start";else{Mt.anchor="middle";var $n=ur/2,lr=sn+$n-ke,hr=sn-$n;lr>0&&(sn-=lr),hr<0&&(sn+=-hr)}else sn-=kn/2,Mt.anchor="end";Mt.crossPos=sn}jn.attr("text-anchor",Mt.anchor),en&&mn.attr("text-anchor",Mt.anchor),It.attr("transform",b(sn,En)+(ie?d(g):""))}),{hoverLabels:vt,commonLabelBoundingBox:He}}function I(Y,W,Q,ne,re,ie){var se="",ge="";Y.nameOverride!==void 0&&(Y.name=Y.nameOverride),Y.name&&(Y.trace._meta&&(Y.name=T.templateString(Y.name,Y.trace._meta)),se=U(Y.name,Y.nameLength));var ue=Q.charAt(0),ce=ue==="x"?"y":"x";Y.zLabel!==void 0?(Y.xLabel!==void 0&&(ge+="x: "+Y.xLabel+"<br>"),Y.yLabel!==void 0&&(ge+="y: "+Y.yLabel+"<br>"),Y.trace.type!=="choropleth"&&Y.trace.type!=="choroplethmapbox"&&(ge+=(ge?"z: ":"")+Y.zLabel)):W&&Y[ue+"Label"]===re?ge=Y[ce+"Label"]||"":Y.xLabel===void 0?Y.yLabel!==void 0&&Y.trace.type!=="scattercarpet"&&(ge=Y.yLabel):ge=Y.yLabel===void 0?Y.xLabel:"("+Y.xLabel+", "+Y.yLabel+")",!Y.text&&Y.text!==0||Array.isArray(Y.text)||(ge+=(ge?"<br>":"")+Y.text),Y.extraText!==void 0&&(ge+=(ge?"<br>":"")+Y.extraText),ie&&ge===""&&!Y.hovertemplate&&(se===""&&ie.remove(),ge=se);var le=Y.hovertemplate||!1;if(le){var de=Y.hovertemplateLabels||Y;Y[ue+"Label"]!==re&&(de[ue+"other"]=de[ue+"Val"],de[ue+"otherLabel"]=de[ue+"Label"]),ge=(ge=T.hovertemplateString(le,de,ne._d3locale,Y.eventData[0]||{},Y.trace._meta)).replace(C,function(Ce,xe){return se=U(xe,Y.nameLength),""})}return[ge,se]}function N(Y,W){var Q=0,ne=Y.offset;return W&&(ne*=-w,Q=Y.offset*m),{x:Q,y:ne}}function R(Y,W,Q,ne){var re=function(se){return se*Q},ie=function(se){return se*ne};Y.each(function(se){var ge=S.select(this);if(se.del)return ge.remove();var ue,ce,le,de,Ce=ge.select("text.nums"),xe=se.anchor,_e=xe==="end"?-1:1,we=(de=(le=(ce={start:1,end:-1,middle:0}[(ue=se).anchor])*(c+M))+ce*(ue.txwidth+M),ue.anchor==="middle"&&(le-=ue.tx2width/2,de+=ue.txwidth/2+M),{alignShift:ce,textShiftX:le,text2ShiftX:de}),Ae=N(se,W),$=Ae.x,oe=Ae.y,pe=xe==="middle";ge.select("path").attr("d",pe?"M-"+re(se.bx/2+se.tx2width/2)+","+ie(oe-se.by/2)+"h"+re(se.bx)+"v"+ie(se.by)+"h-"+re(se.bx)+"Z":"M0,0L"+re(_e*c+$)+","+ie(c+oe)+"v"+ie(se.by/2-c)+"h"+re(_e*se.bx)+"v-"+ie(se.by)+"H"+re(_e*c+$)+"V"+ie(oe-c)+"Z");var ye=$+we.textShiftX,ke=oe+se.ty0-se.by/2+M,De=se.textAlign||"auto";De!=="auto"&&(De==="left"&&xe!=="start"?(Ce.attr("text-anchor","start"),ye=pe?-se.bx/2-se.tx2width/2+M:-se.bx-M):De==="right"&&xe!=="end"&&(Ce.attr("text-anchor","end"),ye=pe?se.bx/2-se.tx2width/2-M:se.bx+M)),Ce.call(t.positionText,re(ye),ie(ke)),se.tx2width&&(ge.select("text.name").call(t.positionText,re(we.text2ShiftX+we.alignShift*M+$),ie(oe+se.ty0-se.by/2+M)),ge.select("rect").call(r.setRect,re(we.text2ShiftX+(we.alignShift-1)*se.tx2width/2+$),ie(oe-se.by/2-1),re(se.tx2width),ie(se.by+2)))})}function V(Y,W){var Q=Y.index,ne=Y.trace||{},re=Y.cd[0],ie=Y.cd[Q]||{};function se(Ce){return Ce||k(Ce)&&Ce===0}var ge=Array.isArray(Q)?function(Ce,xe){var _e=T.castOption(re,Q,Ce);return se(_e)?_e:T.extractOption({},ne,"",xe)}:function(Ce,xe){return T.extractOption(ie,ne,Ce,xe)};function ue(Ce,xe,_e){var we=ge(xe,_e);se(we)&&(Y[Ce]=we)}if(ue("hoverinfo","hi","hoverinfo"),ue("bgcolor","hbg","hoverlabel.bgcolor"),ue("borderColor","hbc","hoverlabel.bordercolor"),ue("fontFamily","htf","hoverlabel.font.family"),ue("fontSize","hts","hoverlabel.font.size"),ue("fontColor","htc","hoverlabel.font.color"),ue("nameLength","hnl","hoverlabel.namelength"),ue("textAlign","hta","hoverlabel.align"),Y.posref=W==="y"||W==="closest"&&ne.orientation==="h"?Y.xa._offset+(Y.x0+Y.x1)/2:Y.ya._offset+(Y.y0+Y.y1)/2,Y.x0=T.constrain(Y.x0,0,Y.xa._length),Y.x1=T.constrain(Y.x1,0,Y.xa._length),Y.y0=T.constrain(Y.y0,0,Y.ya._length),Y.y1=T.constrain(Y.y1,0,Y.ya._length),Y.xLabelVal!==void 0&&(Y.xLabel="xLabel"in Y?Y.xLabel:i.hoverLabelText(Y.xa,Y.xLabelVal,ne.xhoverformat),Y.xVal=Y.xa.c2d(Y.xLabelVal)),Y.yLabelVal!==void 0&&(Y.yLabel="yLabel"in Y?Y.yLabel:i.hoverLabelText(Y.ya,Y.yLabelVal,ne.yhoverformat),Y.yVal=Y.ya.c2d(Y.yLabelVal)),Y.zLabelVal!==void 0&&Y.zLabel===void 0&&(Y.zLabel=String(Y.zLabelVal)),!(isNaN(Y.xerr)||Y.xa.type==="log"&&Y.xerr<=0)){var ce=i.tickText(Y.xa,Y.xa.c2l(Y.xerr),"hover").text;Y.xerrneg!==void 0?Y.xLabel+=" +"+ce+" / -"+i.tickText(Y.xa,Y.xa.c2l(Y.xerrneg),"hover").text:Y.xLabel+=" ± "+ce,W==="x"&&(Y.distance+=1)}if(!(isNaN(Y.yerr)||Y.ya.type==="log"&&Y.yerr<=0)){var le=i.tickText(Y.ya,Y.ya.c2l(Y.yerr),"hover").text;Y.yerrneg!==void 0?Y.yLabel+=" +"+le+" / -"+i.tickText(Y.ya,Y.ya.c2l(Y.yerrneg),"hover").text:Y.yLabel+=" ± "+le,W==="y"&&(Y.distance+=1)}var de=Y.hoverinfo||Y.trace.hoverinfo;return de&&de!=="all"&&((de=Array.isArray(de)?de:de.split("+")).indexOf("x")===-1&&(Y.xLabel=void 0),de.indexOf("y")===-1&&(Y.yLabel=void 0),de.indexOf("z")===-1&&(Y.zLabel=void 0),de.indexOf("text")===-1&&(Y.text=void 0),de.indexOf("name")===-1&&(Y.name=void 0)),Y}function F(Y,W,Q){var ne,re,ie=Q.container,se=Q.fullLayout,ge=se._size,ue=Q.event,ce=!!W.hLinePoint,le=!!W.vLinePoint;if(ie.selectAll(".spikeline").remove(),le||ce){var de=n.combine(se.plot_bgcolor,se.paper_bgcolor);if(ce){var Ce,xe,_e=W.hLinePoint;ne=_e&&_e.xa,(re=_e&&_e.ya).spikesnap==="cursor"?(Ce=ue.pointerX,xe=ue.pointerY):(Ce=ne._offset+_e.x,xe=re._offset+_e.y);var we,Ae,$=l.readability(_e.color,de)<1.5?n.contrast(de):_e.color,oe=re.spikemode,pe=re.spikethickness,ye=re.spikecolor||$,ke=i.getPxPosition(Y,re);if(oe.indexOf("toaxis")!==-1||oe.indexOf("across")!==-1){if(oe.indexOf("toaxis")!==-1&&(we=ke,Ae=Ce),oe.indexOf("across")!==-1){var De=re._counterDomainMin,Pe=re._counterDomainMax;re.anchor==="free"&&(De=Math.min(De,re.position),Pe=Math.max(Pe,re.position)),we=ge.l+De*ge.w,Ae=ge.l+Pe*ge.w}ie.insert("line",":first-child").attr({x1:we,x2:Ae,y1:xe,y2:xe,"stroke-width":pe,stroke:ye,"stroke-dasharray":r.dashStyle(re.spikedash,pe)}).classed("spikeline",!0).classed("crisp",!0),ie.insert("line",":first-child").attr({x1:we,x2:Ae,y1:xe,y2:xe,"stroke-width":pe+2,stroke:de}).classed("spikeline",!0).classed("crisp",!0)}oe.indexOf("marker")!==-1&&ie.insert("circle",":first-child").attr({cx:ke+(re.side!=="right"?pe:-pe),cy:xe,r:pe,fill:ye}).classed("spikeline",!0)}if(le){var Re,fe,ve=W.vLinePoint;ne=ve&&ve.xa,re=ve&&ve.ya,ne.spikesnap==="cursor"?(Re=ue.pointerX,fe=ue.pointerY):(Re=ne._offset+ve.x,fe=re._offset+ve.y);var Te,ze,He=l.readability(ve.color,de)<1.5?n.contrast(de):ve.color,Ve=ne.spikemode,nt=ne.spikethickness,tt=ne.spikecolor||He,ot=i.getPxPosition(Y,ne);if(Ve.indexOf("toaxis")!==-1||Ve.indexOf("across")!==-1){if(Ve.indexOf("toaxis")!==-1&&(Te=ot,ze=fe),Ve.indexOf("across")!==-1){var pt=ne._counterDomainMin,Tt=ne._counterDomainMax;ne.anchor==="free"&&(pt=Math.min(pt,ne.position),Tt=Math.max(Tt,ne.position)),Te=ge.t+(1-Tt)*ge.h,ze=ge.t+(1-pt)*ge.h}ie.insert("line",":first-child").attr({x1:Re,x2:Re,y1:Te,y2:ze,"stroke-width":nt,stroke:tt,"stroke-dasharray":r.dashStyle(ne.spikedash,nt)}).classed("spikeline",!0).classed("crisp",!0),ie.insert("line",":first-child").attr({x1:Re,x2:Re,y1:Te,y2:ze,"stroke-width":nt+2,stroke:de}).classed("spikeline",!0).classed("crisp",!0)}Ve.indexOf("marker")!==-1&&ie.insert("circle",":first-child").attr({cx:Re,cy:ot-(ne.side!=="top"?nt:-nt),r:nt,fill:tt}).classed("spikeline",!0)}}}function D(Y,W){return!W||W.vLinePoint!==Y._spikepoints.vLinePoint||W.hLinePoint!==Y._spikepoints.hLinePoint}function U(Y,W){return t.plainText(Y||"",{len:W,allowedTags:["br","sub","sup","b","i","em"]})}function j(Y,W,Q){var ne=W[Y+"a"],re=W[Y+"Val"],ie=W.cd[0];if(ne.type==="category"||ne.type==="multicategory")re=ne._categoriesMap[re];else if(ne.type==="date"){var se=W.trace[Y+"periodalignment"];if(se){var ge=W.cd[W.index],ue=ge[Y+"Start"];ue===void 0&&(ue=ge[Y]);var ce=ge[Y+"End"];ce===void 0&&(ce=ge[Y]);var le=ce-ue;se==="end"?re+=le:se==="middle"&&(re+=le/2)}re=ne.d2c(re)}return ie&&ie.t&&ie.t.posLetter===ne._id&&(Q.boxmode!=="group"&&Q.violinmode!=="group"||(re+=ie.t.dPos)),re}function J(Y){return Y.offsetTop+Y.clientTop}function X(Y){return Y.offsetLeft+Y.clientLeft}function Z(Y,W){var Q=Y._fullLayout,ne=W.getBoundingClientRect(),re=ne.left,ie=ne.top,se=re+ne.width,ge=ie+ne.height,ue=T.apply3DTransform(Q._invTransform)(re,ie),ce=T.apply3DTransform(Q._invTransform)(se,ge),le=ue[0],de=ue[1],Ce=ce[0],xe=ce[1];return{x:le,y:de,width:Ce-le,height:xe-de,top:Math.min(de,xe),left:Math.min(le,Ce),right:Math.max(le,Ce),bottom:Math.max(de,xe)}}},38048:function(K,z,e){var S=e(71828),k=e(7901),l=e(23469).isUnifiedHover;K.exports=function(T,b,d,s){s=s||{};var t=b.legend;function o(r){s.font[r]||(s.font[r]=t?b.legend.font[r]:b.font[r])}b&&l(b.hovermode)&&(s.font||(s.font={}),o("size"),o("family"),o("color"),t?(s.bgcolor||(s.bgcolor=k.combine(b.legend.bgcolor,b.paper_bgcolor)),s.bordercolor||(s.bordercolor=b.legend.bordercolor)):s.bgcolor||(s.bgcolor=b.paper_bgcolor)),d("hoverlabel.bgcolor",s.bgcolor),d("hoverlabel.bordercolor",s.bordercolor),d("hoverlabel.namelength",s.namelength),S.coerceFont(d,"hoverlabel.font",s.font),d("hoverlabel.align",s.align)}},98212:function(K,z,e){var S=e(71828),k=e(528);K.exports=function(l,T){function b(d,s){return T[d]!==void 0?T[d]:S.coerce(l,T,k,d,s)}return b("clickmode"),b("hovermode")}},30211:function(K,z,e){var S=e(39898),k=e(71828),l=e(28569),T=e(23469),b=e(528),d=e(88335);K.exports={moduleType:"component",name:"fx",constants:e(26675),schema:{layout:b},attributes:e(77914),layoutAttributes:b,supplyLayoutGlobalDefaults:e(22774),supplyDefaults:e(54268),supplyLayoutDefaults:e(34938),calc:e(30732),getDistanceFunction:T.getDistanceFunction,getClosest:T.getClosest,inbox:T.inbox,quadrature:T.quadrature,appendArrayPointValue:T.appendArrayPointValue,castHoverOption:function(s,t,o){return k.castOption(s,t,"hoverlabel."+o)},castHoverinfo:function(s,t,o){return k.castOption(s,o,"hoverinfo",function(r){return k.coerceHoverinfo({hoverinfo:r},{_module:s._module},t)})},hover:d.hover,unhover:l.unhover,loneHover:d.loneHover,loneUnhover:function(s){var t=k.isD3Selection(s)?s:S.select(s);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:e(75914)}},528:function(K,z,e){var S=e(26675),k=e(41940),l=k({editType:"none"});l.family.dflt=S.HOVERFONT,l.size.dflt=S.HOVERFONTSIZE,K.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:l,grouptitlefont:k({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},34938:function(K,z,e){var S=e(71828),k=e(528),l=e(98212),T=e(38048);K.exports=function(b,d){function s(n,a){return S.coerce(b,d,k,n,a)}l(b,d)&&(s("hoverdistance"),s("spikedistance")),s("dragmode")==="select"&&s("selectdirection");var t=d._has("mapbox"),o=d._has("geo"),r=d._basePlotModules.length;d.dragmode==="zoom"&&((t||o)&&r===1||t&&o&&r===2)&&(d.dragmode="pan"),T(b,d,s),S.coerceFont(s,"hoverlabel.grouptitlefont",d.hoverlabel.font)}},22774:function(K,z,e){var S=e(71828),k=e(38048),l=e(528);K.exports=function(T,b){k(T,b,function(d,s){return S.coerce(T,b,l,d,s)})}},83312:function(K,z,e){var S=e(71828),k=e(30587).counter,l=e(27670).Y,T=e(85555).idRegex,b=e(44467),d={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[k("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:l({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function s(r,n,a){var i=n[a+"axes"],u=Object.keys((r._splomAxes||{})[a]||{});return Array.isArray(i)?i:u.length?u:void 0}function t(r,n,a,i,u,h){var f=n(r+"gap",a),x=n("domain."+r);n(r+"side",i);for(var v=new Array(u),g=x[0],y=(x[1]-g)/(u-f),p=y*(1-f),m=0;m<u;m++){var w=g+y*m;v[h?u-1-m:m]=[w,w+p]}return v}function o(r,n,a,i,u){var h,f=new Array(a);function x(v,g){n.indexOf(g)!==-1&&i[g]===void 0?(f[v]=g,i[g]=v):f[v]=""}if(Array.isArray(r))for(h=0;h<a;h++)x(h,r[h]);else for(x(0,u),h=1;h<a;h++)x(h,u+(h+1));return f}K.exports={moduleType:"component",name:"grid",schema:{layout:{grid:d}},layoutAttributes:d,sizeDefaults:function(r,n){var a=r.grid||{},i=s(n,a,"x"),u=s(n,a,"y");if(r.grid||i||u){var h,f,x=Array.isArray(a.subplots)&&Array.isArray(a.subplots[0]),v=Array.isArray(i),g=Array.isArray(u),y=v&&i!==a.xaxes&&g&&u!==a.yaxes;x?(h=a.subplots.length,f=a.subplots[0].length):(g&&(h=u.length),v&&(f=i.length));var p=b.newContainer(n,"grid"),m=C("rows",h),w=C("columns",f);if(m*w>1){x||v||g||C("pattern")==="independent"&&(x=!0),p._hasSubplotGrid=x;var c,M,_=C("roworder")==="top to bottom",E=x?.2:.1,L=x?.3:.1;y&&n._splomGridDflt&&(c=n._splomGridDflt.xside,M=n._splomGridDflt.yside),p._domains={x:t("x",C,E,c,w),y:t("y",C,L,M,m,_)}}else delete n.grid}function C(O,I){return S.coerce(a,p,d,O,I)}},contentDefaults:function(r,n){var a=n.grid;if(a&&a._domains){var i,u,h,f,x,v,g,y=r.grid||{},p=n._subplots,m=a._hasSubplotGrid,w=a.rows,c=a.columns,M=a.pattern==="independent",_=a._axisMap={};if(m){var E=y.subplots||[];v=a.subplots=new Array(w);var L=1;for(i=0;i<w;i++){var C=v[i]=new Array(c),O=E[i]||[];for(u=0;u<c;u++)if(M?(x=L===1?"xy":"x"+L+"y"+L,L++):x=O[u],C[u]="",p.cartesian.indexOf(x)!==-1){if(g=x.indexOf("y"),h=x.slice(0,g),f=x.slice(g),_[h]!==void 0&&_[h]!==u||_[f]!==void 0&&_[f]!==i)continue;C[u]=x,_[h]=u,_[f]=i}}}else{var I=s(n,y,"x"),N=s(n,y,"y");a.xaxes=o(I,p.xaxis,c,_,"x"),a.yaxes=o(N,p.yaxis,w,_,"y")}var R=a._anchors={},V=a.roworder==="top to bottom";for(var F in _){var D,U,j,J=F.charAt(0),X=a[J+"side"];if(X.length<8)R[F]="free";else if(J==="x"){if(X.charAt(0)==="t"===V?(D=0,U=1,j=w):(D=w-1,U=-1,j=-1),m){var Z=_[F];for(i=D;i!==j;i+=U)if((x=v[i][Z])&&(g=x.indexOf("y"),x.slice(0,g)===F)){R[F]=x.slice(g);break}}else for(i=D;i!==j;i+=U)if(f=a.yaxes[i],p.cartesian.indexOf(F+f)!==-1){R[F]=f;break}}else if(X.charAt(0)==="l"?(D=0,U=1,j=c):(D=c-1,U=-1,j=-1),m){var Y=_[F];for(i=D;i!==j;i+=U)if((x=v[Y][i])&&(g=x.indexOf("y"),x.slice(g)===F)){R[F]=x.slice(0,g);break}}else for(i=D;i!==j;i+=U)if(h=a.xaxes[i],p.cartesian.indexOf(h+F)!==-1){R[F]=h;break}}}}}},69819:function(K,z,e){var S=e(85555),k=e(44467).templatedArray;e(24695),K.exports=k("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",S.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",S.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},75378:function(K,z,e){var S=e(92770),k=e(58163);K.exports=function(l,T,b,d){T=T||{};var s=b==="log"&&T.type==="linear",t=b==="linear"&&T.type==="log";if(s||t){for(var o,r,n=l._fullLayout.images,a=T._id.charAt(0),i=0;i<n.length;i++)if(r="images["+i+"].",(o=n[i])[a+"ref"]===T._id){var u=o[a],h=o["size"+a],f=null,x=null;if(s){f=k(u,T.range);var v=h/Math.pow(10,f)/2;x=2*Math.log(v+Math.sqrt(1+v*v))/Math.LN10}else x=(f=Math.pow(10,u))*(Math.pow(10,h/2)-Math.pow(10,-h/2));S(f)?S(x)||(x=null):(f=null,x=null),d(r+a,f),d(r+"size"+a,x)}}}},81603:function(K,z,e){var S=e(71828),k=e(89298),l=e(85501),T=e(69819);function b(d,s,t){function o(f,x){return S.coerce(d,s,T,f,x)}var r=o("source");if(!o("visible",!!r))return s;o("layer"),o("xanchor"),o("yanchor"),o("sizex"),o("sizey"),o("sizing"),o("opacity");for(var n={_fullLayout:t},a=["x","y"],i=0;i<2;i++){var u=a[i],h=k.coerceRef(d,s,n,u,"paper",void 0);h!=="paper"&&k.getFromId(n,h)._imgIndices.push(s._index),k.coercePosition(s,n,o,h,u,0)}return s}K.exports=function(d,s){l(d,s,{name:"images",handleItemDefaults:b})}},80750:function(K,z,e){var S=e(39898),k=e(91424),l=e(89298),T=e(41675),b=e(77922);K.exports=function(d){var s,t,o=d._fullLayout,r=[],n={},a=[];for(t=0;t<o.images.length;t++){var i=o.images[t];if(i.visible)if(i.layer==="below"&&i.xref!=="paper"&&i.yref!=="paper"){s=T.ref2id(i.xref)+T.ref2id(i.yref);var u=o._plots[s];if(!u){a.push(i);continue}u.mainplot&&(s=u.mainplot.id),n[s]||(n[s]=[]),n[s].push(i)}else i.layer==="above"?r.push(i):a.push(i)}var h={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},f={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function x(c){var M=S.select(this);if(this._imgSrc!==c.source)if(M.attr("xmlns",b.svg),c.source&&c.source.slice(0,5)==="data:")M.attr("xlink:href",c.source),this._imgSrc=c.source;else{var _=new Promise(function(E){var L=new Image;function C(){M.remove(),E()}this.img=L,L.setAttribute("crossOrigin","anonymous"),L.onerror=C,L.onload=function(){var O=document.createElement("canvas");O.width=this.width,O.height=this.height,O.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var I=O.toDataURL("image/png");M.attr("xlink:href",I),E()},M.on("error",C),L.src=c.source,this._imgSrc=c.source}.bind(this));d._promises.push(_)}}function v(c){var M,_,E=S.select(this),L=l.getFromId(d,c.xref),C=l.getFromId(d,c.yref),O=l.getRefType(c.xref)==="domain",I=l.getRefType(c.yref)==="domain",N=o._size;M=L!==void 0?typeof c.xref=="string"&&O?L._length*c.sizex:Math.abs(L.l2p(c.sizex)-L.l2p(0)):c.sizex*N.w,_=C!==void 0?typeof c.yref=="string"&&I?C._length*c.sizey:Math.abs(C.l2p(c.sizey)-C.l2p(0)):c.sizey*N.h;var R,V,F=M*h[c.xanchor].offset,D=_*f[c.yanchor].offset,U=h[c.xanchor].sizing+f[c.yanchor].sizing;switch(R=L!==void 0?typeof c.xref=="string"&&O?L._length*c.x+L._offset:L.r2p(c.x)+L._offset:c.x*N.w+N.l,R+=F,V=C!==void 0?typeof c.yref=="string"&&I?C._length*(1-c.y)+C._offset:C.r2p(c.y)+C._offset:N.h-c.y*N.h+N.t,V+=D,c.sizing){case"fill":U+=" slice";break;case"stretch":U="none"}E.attr({x:R,y:V,width:M,height:_,preserveAspectRatio:U,opacity:c.opacity});var j=(L&&l.getRefType(c.xref)!=="domain"?L._id:"")+(C&&l.getRefType(c.yref)!=="domain"?C._id:"");k.setClipUrl(E,j?"clip"+o._uid+j:null,d)}var g=o._imageLowerLayer.selectAll("image").data(a),y=o._imageUpperLayer.selectAll("image").data(r);g.enter().append("image"),y.enter().append("image"),g.exit().remove(),y.exit().remove(),g.each(function(c){x.bind(this)(c),v.bind(this)(c)}),y.each(function(c){x.bind(this)(c),v.bind(this)(c)});var p=Object.keys(o._plots);for(t=0;t<p.length;t++){s=p[t];var m=o._plots[s];if(m.imagelayer){var w=m.imagelayer.selectAll("image").data(n[s]||[]);w.enter().append("image"),w.exit().remove(),w.each(function(c){x.bind(this)(c),v.bind(this)(c)})}}}},68804:function(K,z,e){K.exports={moduleType:"component",name:"images",layoutAttributes:e(69819),supplyLayoutDefaults:e(81603),includeBasePlot:e(76325)("images"),draw:e(80750),convertCoords:e(75378)}},33030:function(K,z,e){var S=e(41940),k=e(22399);K.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:S({editType:"legend"}),grouptitlefont:S({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:S({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},14928:function(K){K.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},99017:function(K,z,e){var S=e(73972),k=e(71828),l=e(44467),T=e(9012),b=e(33030),d=e(10820),s=e(10130);function t(o,r,n,a){var i=r[o]||{},u=l.newContainer(n,o);function h(I,N){return k.coerce(i,u,b,I,N)}var f=k.coerceFont(h,"font",n.font);if(h("bgcolor",n.paper_bgcolor),h("bordercolor"),h("visible")){for(var x,v=function(I,N){var R=x._input,V=x;return k.coerce(R,V,T,I,N)},g=n.font||{},y=k.coerceFont(h,"grouptitlefont",k.extendFlat({},g,{size:Math.round(1.1*g.size)})),p=0,m=!1,w="normal",c=0;c<a.length;c++)(x=a[c]).visible&&((x.showlegend||x._dfltShowLegend&&!(x._module&&x._module.attributes&&x._module.attributes.showlegend&&x._module.attributes.showlegend.dflt===!1))&&(p++,x.showlegend&&(m=!0,(S.traceIs(x,"pie-like")||x._input.showlegend===!0)&&p++),k.coerceFont(v,"legendgrouptitle.font",y)),(S.traceIs(x,"bar")&&n.barmode==="stack"||["tonextx","tonexty"].indexOf(x.fill)!==-1)&&(w=s.isGrouped({traceorder:w})?"grouped+reversed":"reversed"),x.legendgroup!==void 0&&x.legendgroup!==""&&(w=s.isReversed({traceorder:w})?"reversed+grouped":"grouped"));var M=k.coerce(r,n,d,"showlegend",m&&p>1);if(M===!1&&(n.legend=void 0),(M!==!1||i.uirevision)&&(h("uirevision",n.uirevision),M!==!1)){h("borderwidth");var _,E,L,C=h("orientation")==="h";if(C?(_=0,S.getComponentMethod("rangeslider","isVisible")(r.xaxis)?(E=1.1,L="bottom"):(E=-.1,L="top")):(_=1.02,E=1,L="auto"),h("traceorder",w),s.isGrouped(n.legend)&&h("tracegroupgap"),h("entrywidth"),h("entrywidthmode"),h("itemsizing"),h("itemwidth"),h("itemclick"),h("itemdoubleclick"),h("groupclick"),h("x",_),h("xanchor"),h("y",E),h("yanchor",L),h("valign"),k.noneOrAll(i,u,["x","y"]),h("title.text")){h("title.side",C?"left":"top");var O=k.extendFlat({},f,{size:k.bigFont(f.size)});k.coerceFont(h,"title.font",O)}}}}K.exports=function(o,r,n){var a,i=["legend"];for(a=0;a<n.length;a++)k.pushUnique(i,n[a].legend);for(r._legends=[],a=0;a<i.length;a++){var u=i[a];t(u,o,r,n),r[u]&&r[u].visible&&(r[u]._id=u),r._legends.push(u)}}},43969:function(K,z,e){var S=e(39898),k=e(71828),l=e(74875),T=e(73972),b=e(11086),d=e(28569),s=e(91424),t=e(7901),o=e(63893),r=e(85167),n=e(14928),a=e(18783),i=a.LINE_SPACING,u=a.FROM_TL,h=a.FROM_BR,f=e(82424),x=e(53630),v=e(10130),g=/^legend[0-9]*$/;function y(O,I){var N,R,V=I||{},F=O._fullLayout,D=C(V),U=V._inHover;if(U?(R=V.layer,N="hover"):(R=F._infolayer,N=D),R){var j;if(N+=F._uid,O._legendMouseDownTime||(O._legendMouseDownTime=0),U){if(!V.entries)return;j=f(V.entries,V)}else{if(!O.calcdata)return;j=F.showlegend&&f(O.calcdata,V,F._legends.length>1)}var J=F.hiddenlabels||[];if(!(U||F.showlegend&&j.length))return R.selectAll("."+D).remove(),F._topdefs.select("#"+N).remove(),l.autoMargin(O,D);var X=k.ensureSingle(R,"g",D,function(ge){U||ge.attr("pointer-events","all")}),Z=k.ensureSingleById(F._topdefs,"clipPath",N,function(ge){ge.append("rect")}),Y=k.ensureSingle(X,"rect","bg",function(ge){ge.attr("shape-rendering","crispEdges")});Y.call(t.stroke,V.bordercolor).call(t.fill,V.bgcolor).style("stroke-width",V.borderwidth+"px");var W=k.ensureSingle(X,"g","scrollbox"),Q=V.title;if(V._titleWidth=0,V._titleHeight=0,Q.text){var ne=k.ensureSingle(W,"text",D+"titletext");ne.attr("text-anchor","start").call(s.font,Q.font).text(Q.text),_(ne,W,O,V,1)}else W.selectAll("."+D+"titletext").remove();var re=k.ensureSingle(X,"rect","scrollbar",function(ge){ge.attr(n.scrollBarEnterAttrs).call(t.fill,n.scrollBarColor)}),ie=W.selectAll("g.groups").data(j);ie.enter().append("g").attr("class","groups"),ie.exit().remove();var se=ie.selectAll("g.traces").data(k.identity);se.enter().append("g").attr("class","traces"),se.exit().remove(),se.style("opacity",function(ge){var ue=ge[0].trace;return T.traceIs(ue,"pie-like")?J.indexOf(ge[0].label)!==-1?.5:1:ue.visible==="legendonly"?.5:1}).each(function(){S.select(this).call(w,O,V)}).call(x,O,V).each(function(){U||S.select(this).call(M,O,D)}),k.syncOrAsync([l.previousPromises,function(){return function(ge,ue,ce,le){var de=ge._fullLayout,Ce=C(le);le||(le=de[Ce]);var xe=de._size,_e=v.isVertical(le),we=v.isGrouped(le),Ae=le.entrywidthmode==="fraction",$=le.borderwidth,oe=2*$,pe=n.itemGap,ye=le.itemwidth+2*pe,ke=2*($+pe),De=L(le),Pe=le.y<0||le.y===0&&De==="top",Re=le.y>1||le.y===1&&De==="bottom",fe=le.tracegroupgap,ve={};le._maxHeight=Math.max(Pe||Re?de.height/2:xe.h,30);var Te=0;le._width=0,le._height=0;var ze=function(Se){var Ie=0,We=0,it=Se.title.side;return it&&(it.indexOf("left")!==-1&&(Ie=Se._titleWidth),it.indexOf("top")!==-1&&(We=Se._titleHeight)),[Ie,We]}(le);if(_e)ce.each(function(Se){var Ie=Se[0].height;s.setTranslate(this,$+ze[0],$+ze[1]+le._height+Ie/2+pe),le._height+=Ie,le._width=Math.max(le._width,Se[0].width)}),Te=ye+le._width,le._width+=pe+ye+oe,le._height+=ke,we&&(ue.each(function(Se,Ie){s.setTranslate(this,0,Ie*le.tracegroupgap)}),le._height+=(le._lgroupsLength-1)*le.tracegroupgap);else{var He=E(le),Ve=le.x<0||le.x===0&&He==="right",nt=le.x>1||le.x===1&&He==="left",tt=Re||Pe,ot=de.width/2;le._maxWidth=Math.max(Ve?tt&&He==="left"?xe.l+xe.w:ot:nt?tt&&He==="right"?xe.r+xe.w:ot:xe.w,2*ye);var pt=0,Tt=0;ce.each(function(Se){var Ie=p(Se,le,ye);pt=Math.max(pt,Ie),Tt+=Ie}),Te=null;var yt=0;if(we){var dt=0,Pt=0,Et=0;ue.each(function(){var Se=0,Ie=0;S.select(this).selectAll("g.traces").each(function(it){var lt=p(it,le,ye),gt=it[0].height;s.setTranslate(this,ze[0],ze[1]+$+pe+gt/2+Ie),Ie+=gt,Se=Math.max(Se,lt),ve[it[0].trace.legendgroup]=Se});var We=Se+pe;Pt>0&&We+$+Pt>le._maxWidth?(yt=Math.max(yt,Pt),Pt=0,Et+=dt+fe,dt=Ie):dt=Math.max(dt,Ie),s.setTranslate(this,Pt,Et),Pt+=We}),le._width=Math.max(yt,Pt)+$,le._height=Et+dt+ke}else{var Ot=ce.size(),Nt=Tt+oe+(Ot-1)*pe<le._maxWidth,zt=0,Ze=0,Ye=0,je=0;ce.each(function(Se){var Ie=Se[0].height,We=p(Se,le,ye),it=Nt?We:pt;Ae||(it+=pe),it+$+Ze-pe>=le._maxWidth&&(yt=Math.max(yt,je),Ze=0,Ye+=zt,le._height+=zt,zt=0),s.setTranslate(this,ze[0]+$+Ze,ze[1]+$+Ye+Ie/2+pe),je=Ze+We+pe,Ze+=it,zt=Math.max(zt,Ie)}),Nt?(le._width=Ze+oe,le._height=zt+ke):(le._width=Math.max(yt,je)+oe,le._height+=zt+ke)}}le._width=Math.ceil(Math.max(le._width+ze[0],le._titleWidth+2*($+n.titlePad))),le._height=Math.ceil(Math.max(le._height+ze[1],le._titleHeight+2*($+n.itemGap))),le._effHeight=Math.min(le._height,le._maxHeight);var Ke=ge._context.edits,st=Ke.legendText||Ke.legendPosition;ce.each(function(Se){var Ie=S.select(this).select("."+Ce+"toggle"),We=Se[0].height,it=Se[0].trace.legendgroup,lt=p(Se,le,ye);we&&it!==""&&(lt=ve[it]);var gt=st?ye:Te||lt;_e||Ae||(gt+=pe/2),s.setRect(Ie,0,-We/2,gt,We)})}(O,ie,se,V)},function(){var ge,ue,ce,le,de=F._size,Ce=V.borderwidth;if(!U){var xe=function(Ve,nt){var tt=Ve._fullLayout[nt],ot=E(tt),pt=L(tt);return l.autoMargin(Ve,nt,{x:tt.x,y:tt.y,l:tt._width*u[ot],r:tt._width*h[ot],b:tt._effHeight*h[pt],t:tt._effHeight*u[pt]})}(O,D);if(xe)return;var _e=de.l+de.w*V.x-u[E(V)]*V._width,we=de.t+de.h*(1-V.y)-u[L(V)]*V._effHeight;if(F.margin.autoexpand){var Ae=_e,$=we;_e=k.constrain(_e,0,F.width-V._width),we=k.constrain(we,0,F.height-V._effHeight),_e!==Ae&&k.log("Constrain "+D+".x to make legend fit inside graph"),we!==$&&k.log("Constrain "+D+".y to make legend fit inside graph")}s.setTranslate(X,_e,we)}if(re.on(".drag",null),X.on("wheel",null),U||V._height<=V._maxHeight||O._context.staticPlot){var oe=V._effHeight;U&&(oe=V._height),Y.attr({width:V._width-Ce,height:oe-Ce,x:Ce/2,y:Ce/2}),s.setTranslate(W,0,0),Z.select("rect").attr({width:V._width-2*Ce,height:oe-2*Ce,x:Ce,y:Ce}),s.setClipUrl(W,N,O),s.setRect(re,0,0,0,0),delete V._scrollY}else{var pe,ye,ke,De=Math.max(n.scrollBarMinHeight,V._effHeight*V._effHeight/V._height),Pe=V._effHeight-De-2*n.scrollBarMargin,Re=V._height-V._effHeight,fe=Pe/Re,ve=Math.min(V._scrollY||0,Re);Y.attr({width:V._width-2*Ce+n.scrollBarWidth+n.scrollBarMargin,height:V._effHeight-Ce,x:Ce/2,y:Ce/2}),Z.select("rect").attr({width:V._width-2*Ce+n.scrollBarWidth+n.scrollBarMargin,height:V._effHeight-2*Ce,x:Ce,y:Ce+ve}),s.setClipUrl(W,N,O),He(ve,De,fe),X.on("wheel",function(){He(ve=k.constrain(V._scrollY+S.event.deltaY/Pe*Re,0,Re),De,fe),ve!==0&&ve!==Re&&S.event.preventDefault()});var Te=S.behavior.drag().on("dragstart",function(){var Ve=S.event.sourceEvent;pe=Ve.type==="touchstart"?Ve.changedTouches[0].clientY:Ve.clientY,ke=ve}).on("drag",function(){var Ve=S.event.sourceEvent;Ve.buttons===2||Ve.ctrlKey||(ye=Ve.type==="touchmove"?Ve.changedTouches[0].clientY:Ve.clientY,ve=function(nt,tt,ot){var pt=(ot-tt)/fe+nt;return k.constrain(pt,0,Re)}(ke,pe,ye),He(ve,De,fe))});re.call(Te);var ze=S.behavior.drag().on("dragstart",function(){var Ve=S.event.sourceEvent;Ve.type==="touchstart"&&(pe=Ve.changedTouches[0].clientY,ke=ve)}).on("drag",function(){var Ve=S.event.sourceEvent;Ve.type==="touchmove"&&(ye=Ve.changedTouches[0].clientY,ve=function(nt,tt,ot){var pt=(tt-ot)/fe+nt;return k.constrain(pt,0,Re)}(ke,pe,ye),He(ve,De,fe))});W.call(ze)}function He(Ve,nt,tt){V._scrollY=O._fullLayout[D]._scrollY=Ve,s.setTranslate(W,0,-Ve),s.setRect(re,V._width,n.scrollBarMargin+Ve*tt,n.scrollBarWidth,nt),Z.select("rect").attr("y",Ce+Ve)}O._context.edits.legendPosition&&(X.classed("cursor-move",!0),d.init({element:X.node(),gd:O,prepFn:function(){var Ve=s.getTranslate(X);ce=Ve.x,le=Ve.y},moveFn:function(Ve,nt){var tt=ce+Ve,ot=le+nt;s.setTranslate(X,tt,ot),ge=d.align(tt,V._width,de.l,de.l+de.w,V.xanchor),ue=d.align(ot+V._height,-V._height,de.t+de.h,de.t,V.yanchor)},doneFn:function(){if(ge!==void 0&&ue!==void 0){var Ve={};Ve[D+".x"]=ge,Ve[D+".y"]=ue,T.call("_guiRelayout",O,Ve)}},clickFn:function(Ve,nt){var tt=ie.selectAll("g.traces").filter(function(){var ot=this.getBoundingClientRect();return nt.clientX>=ot.left&&nt.clientX<=ot.right&&nt.clientY>=ot.top&&nt.clientY<=ot.bottom});tt.size()>0&&m(O,X,tt,Ve,nt)}}))}],O)}}function p(O,I,N){var R=O[0],V=R.width,F=I.entrywidthmode,D=R.trace.legendwidth||I.entrywidth;return F==="fraction"?I._maxWidth*D:N+(D||V)}function m(O,I,N,R,V){var F=N.data()[0][0].trace,D={event:V,node:N.node(),curveNumber:F.index,expandedIndex:F._expandedIndex,data:O.data,layout:O.layout,frames:O._transitionData._frames,config:O._context,fullData:O._fullData,fullLayout:O._fullLayout};F._group&&(D.group=F._group),T.traceIs(F,"pie-like")&&(D.label=N.datum()[0].label),b.triggerHandler(O,"plotly_legendclick",D)!==!1&&(R===1?I._clickTimeout=setTimeout(function(){O._fullLayout&&r(N,O,R)},O._context.doubleClickDelay):R===2&&(I._clickTimeout&&clearTimeout(I._clickTimeout),O._legendMouseDownTime=0,b.triggerHandler(O,"plotly_legenddoubleclick",D)!==!1&&r(N,O,R)))}function w(O,I,N){var R,V,F=C(N),D=O.data()[0][0],U=D.trace,j=T.traceIs(U,"pie-like"),J=!N._inHover&&I._context.edits.legendText&&!j,X=N._maxNameLength;D.groupTitle?(R=D.groupTitle.text,V=D.groupTitle.font):(V=N.font,N.entries?R=D.text:(R=j?D.label:U.name,U._meta&&(R=k.templateString(R,U._meta))));var Z=k.ensureSingle(O,"text",F+"text");Z.attr("text-anchor","start").call(s.font,V).text(J?c(R,X):R);var Y=N.itemwidth+2*n.itemGap;o.positionText(Z,Y,0),J?Z.call(o.makeEditable,{gd:I,text:R}).call(_,O,I,N).on("edit",function(W){this.text(c(W,X)).call(_,O,I,N);var Q=D.trace._fullInput||{},ne={};if(T.hasTransform(Q,"groupby")){var re=T.getTransformIndices(Q,"groupby"),ie=re[re.length-1],se=k.keyedContainer(Q,"transforms["+ie+"].styles","target","value.name");se.set(D.trace._group,W),ne=se.constructUpdate()}else ne.name=W;return T.call("_guiRestyle",I,ne,U.index)}):_(Z,O,I,N)}function c(O,I){var N=Math.max(4,I);if(O&&O.trim().length>=N/2)return O;for(var R=N-(O=O||"").length;R>0;R--)O+=" ";return O}function M(O,I,N){var R,V=I._context.doubleClickDelay,F=1,D=k.ensureSingle(O,"rect",N+"toggle",function(U){I._context.staticPlot||U.style("cursor","pointer").attr("pointer-events","all"),U.call(t.fill,"rgba(0,0,0,0)")});I._context.staticPlot||(D.on("mousedown",function(){(R=new Date().getTime())-I._legendMouseDownTime<V?F+=1:(F=1,I._legendMouseDownTime=R)}),D.on("mouseup",function(){if(!I._dragged&&!I._editing){var U=I._fullLayout[N];new Date().getTime()-I._legendMouseDownTime>V&&(F=Math.max(F-1,1)),m(I,U,O,F,S.event)}}))}function _(O,I,N,R,V){R._inHover&&O.attr("data-notex",!0),o.convertToTspans(O,N,function(){(function(F,D,U,j){var J=F.data()[0][0];if(U._inHover||!J||J.trace.showlegend){var X=F.select("g[class*=math-group]"),Z=X.node(),Y=C(U);U||(U=D._fullLayout[Y]);var W,Q,ne=U.borderwidth,re=(j===1?U.title.font:J.groupTitle?J.groupTitle.font:U.font).size*i;if(Z){var ie=s.bBox(Z);W=ie.height,Q=ie.width,j===1?s.setTranslate(X,ne,ne+.75*W):s.setTranslate(X,0,.25*W)}else{var se="."+Y+(j===1?"title":"")+"text",ge=F.select(se),ue=o.lineCount(ge),ce=ge.node();if(W=re*ue,Q=ce?s.bBox(ce).width:0,j===1)U.title.side==="left"&&(Q+=2*n.itemGap),o.positionText(ge,ne+n.titlePad,ne+re);else{var le=2*n.itemGap+U.itemwidth;J.groupTitle&&(le=n.itemGap,Q-=U.itemwidth),o.positionText(ge,le,-re*((ue-1)/2-.3))}}j===1?(U._titleWidth=Q,U._titleHeight=W):(J.lineHeight=re,J.height=Math.max(W,16)+3,J.width=Q)}else F.remove()})(I,N,R,V)})}function E(O){return k.isRightAnchor(O)?"right":k.isCenterAnchor(O)?"center":"left"}function L(O){return k.isBottomAnchor(O)?"bottom":k.isMiddleAnchor(O)?"middle":"top"}function C(O){return O._id||"legend"}K.exports=function(O,I){if(I)y(O,I);else{var N=O._fullLayout,R=N._legends;N._infolayer.selectAll('[class^="legend"]').each(function(){var D=S.select(this),U=D.attr("class").split(" ")[0];U.match(g)&&R.indexOf(U)===-1&&D.remove()});for(var V=0;V<R.length;V++){var F=R[V];y(O,O._fullLayout[F])}}}},82424:function(K,z,e){var S=e(73972),k=e(10130);K.exports=function(l,T,b){var d,s,t=T._inHover,o=k.isGrouped(T),r=k.isReversed(T),n={},a=[],i=!1,u={},h=0,f=0;function x(V,F,D){if(T.visible!==!1&&(!b||V===T._id))if(F!==""&&k.isGrouped(T))a.indexOf(F)===-1?(a.push(F),i=!0,n[F]=[D]):n[F].push(D);else{var U="~~i"+h;a.push(U),n[U]=[D],h++}}for(d=0;d<l.length;d++){var v=l[d],g=v[0],y=g.trace,p=y.legend,m=y.legendgroup;if(t||y.visible&&y.showlegend)if(S.traceIs(y,"pie-like"))for(u[m]||(u[m]={}),s=0;s<v.length;s++){var w=v[s].label;u[m][w]||(x(p,m,{label:w,color:v[s].color,i:v[s].i,trace:y,pts:v[s].pts}),u[m][w]=!0,f=Math.max(f,(w||"").length))}else x(p,m,g),f=Math.max(f,(y.name||"").length)}if(!a.length)return[];var c=!i||!o,M=[];for(d=0;d<a.length;d++){var _=n[a[d]];c?M.push(_[0]):M.push(_)}for(c&&(M=[M]),d=0;d<M.length;d++){var E=1/0;for(s=0;s<M[d].length;s++){var L=M[d][s].trace.legendrank;E>L&&(E=L)}M[d][0]._groupMinRank=E,M[d][0]._preGroupSort=d}var C=function(V,F){return V.trace.legendrank-F.trace.legendrank||V._preSort-F._preSort};for(M.forEach(function(V,F){V[0]._preGroupSort=F}),M.sort(function(V,F){return V[0]._groupMinRank-F[0]._groupMinRank||V[0]._preGroupSort-F[0]._preGroupSort}),d=0;d<M.length;d++){M[d].forEach(function(V,F){V._preSort=F}),M[d].sort(C);var O=M[d][0].trace,I=null;for(s=0;s<M[d].length;s++){var N=M[d][s].trace.legendgrouptitle;if(N&&N.text){I=N,t&&(N.font=T._groupTitleFont);break}}if(r&&M[d].reverse(),I){var R=!1;for(s=0;s<M[d].length;s++)if(S.traceIs(M[d][s].trace,"pie-like")){R=!0;break}M[d].unshift({i:-1,groupTitle:I,noClick:R,trace:{showlegend:O.showlegend,legendgroup:O.legendgroup,visible:T.groupclick==="toggleitem"||O.visible}})}for(s=0;s<M[d].length;s++)M[d][s]=[M[d][s]]}return T._lgroupsLength=M.length,T._maxNameLength=f,M}},85167:function(K,z,e){var S=e(71828),k=e(73972),l=!0;K.exports=function(T,b,d){var s=b._fullLayout;if(!b._dragged&&!b._editing){var t,o=s.legend.itemclick,r=s.legend.itemdoubleclick,n=s.legend.groupclick;if(d===1&&o==="toggle"&&r==="toggleothers"&&l&&b.data&&b._context.showTips&&S.notifier(S._(b,"Double-click on legend to isolate one trace"),"long"),l=!1,d===1?t=o:d===2&&(t=r),t){var a=n==="togglegroup",i=s.hiddenlabels?s.hiddenlabels.slice():[],u=T.data()[0][0];if(!u.groupTitle||!u.noClick){var h,f,x,v,g,y=b._fullData,p=u.trace,m=p.legendgroup,w={},c=[],M=[],_=[];if(k.traceIs(p,"pie-like")){var E=u.label,L=i.indexOf(E);t==="toggle"?L===-1?i.push(E):i.splice(L,1):t==="toggleothers"&&(i=[],b.calcdata[0].forEach(function(Y){E!==Y.label&&i.push(Y.label)}),b._fullLayout.hiddenlabels&&b._fullLayout.hiddenlabels.length===i.length&&L===-1&&(i=[])),k.call("_guiRelayout",b,"hiddenlabels",i)}else{var C,O=m&&m.length,I=[];if(O)for(h=0;h<y.length;h++)(C=y[h]).visible&&C.legendgroup===m&&I.push(h);if(t==="toggle"){var N;switch(p.visible){case!0:N="legendonly";break;case!1:N=!1;break;case"legendonly":N=!0}if(O)if(a)for(h=0;h<y.length;h++)y[h].visible!==!1&&y[h].legendgroup===m&&Z(y[h],N);else Z(p,N);else Z(p,N)}else if(t==="toggleothers"){var R,V,F,D,U=!0;for(h=0;h<y.length;h++)if(R=y[h]===p,F=y[h].showlegend!==!0,!(R||F||(V=O&&y[h].legendgroup===m)||y[h].visible!==!0||k.traceIs(y[h],"notLegendIsolatable"))){U=!1;break}for(h=0;h<y.length;h++)if(y[h].visible!==!1&&!k.traceIs(y[h],"notLegendIsolatable"))switch(p.visible){case"legendonly":Z(y[h],!0);break;case!0:D=!!U||"legendonly",R=y[h]===p,F=y[h].showlegend!==!0&&!y[h].legendgroup,V=R||O&&y[h].legendgroup===m,Z(y[h],!(!V&&!F)||D)}}for(h=0;h<M.length;h++)if(x=M[h]){var j=x.constructUpdate(),J=Object.keys(j);for(f=0;f<J.length;f++)v=J[f],(w[v]=w[v]||[])[_[h]]=j[v]}for(g=Object.keys(w),h=0;h<g.length;h++)for(v=g[h],f=0;f<c.length;f++)w[v].hasOwnProperty(f)||(w[v][f]=void 0);k.call("_guiRestyle",b,w,c)}}}}function X(Y,W,Q){var ne=c.indexOf(Y),re=w[W];return re||(re=w[W]=[]),c.indexOf(Y)===-1&&(c.push(Y),ne=c.length-1),re[ne]=Q,ne}function Z(Y,W){if(!u.groupTitle||a){var Q=Y._fullInput;if(k.hasTransform(Q,"groupby")){var ne=M[Q.index];if(!ne){var re=k.getTransformIndices(Q,"groupby"),ie=re[re.length-1];ne=S.keyedContainer(Q,"transforms["+ie+"].styles","target","value.visible"),M[Q.index]=ne}var se=ne.get(Y._group);se===void 0&&(se=!0),se!==!1&&ne.set(Y._group,W),_[Q.index]=X(Q.index,"visible",Q.visible!==!1)}else{var ge=Q.visible!==!1&&W;X(Q.index,"visible",ge)}}}}},10130:function(K,z){z.isGrouped=function(e){return(e.traceorder||"").indexOf("grouped")!==-1},z.isVertical=function(e){return e.orientation!=="h"},z.isReversed=function(e){return(e.traceorder||"").indexOf("reversed")!==-1}},2199:function(K,z,e){K.exports={moduleType:"component",name:"legend",layoutAttributes:e(33030),supplyLayoutDefaults:e(99017),draw:e(43969),style:e(53630)}},53630:function(K,z,e){var S=e(39898),k=e(73972),l=e(71828),T=l.strTranslate,b=e(91424),d=e(7901),s=e(52075).extractOpts,t=e(34098),o=e(63463),r=e(53581).castOption,n=e(14928);function a(h,f){return(f?"radial":"horizontal")+(h?"":"reversed")}function i(h){var f=h[0].trace,x=f.contours,v=t.hasLines(f),g=t.hasMarkers(f),y=f.visible&&f.fill&&f.fill!=="none",p=!1,m=!1;if(x){var w=x.coloring;w==="lines"?p=!0:v=w==="none"||w==="heatmap"||x.showlines,x.type==="constraint"?y=x._operation!=="=":w!=="fill"&&w!=="heatmap"||(m=!0)}return{showMarker:g,showLine:v,showFill:y,showGradientLine:p,showGradientFill:m,anyLine:v||p,anyFill:y||m}}function u(h,f,x){return h&&l.isArrayOrTypedArray(h)?f:h>x?x:h}K.exports=function(h,f,x){var v=f._fullLayout;x||(x=v.legend);var g=x.itemsizing==="constant",y=x.itemwidth,p=(y+2*n.itemGap)/2,m=T(p,0),w=function(_,E,L,C){var O;if(_+1)O=_;else{if(!(E&&E.width>0))return 0;O=E.width}return g?C:Math.min(O,L)};function c(_,E,L){var C=_[0].trace,O=C.marker||{},I=O.line||{},N=L?C.visible&&C.type===L:k.traceIs(C,"bar"),R=S.select(E).select("g.legendpoints").selectAll("path.legend"+L).data(N?[_]:[]);R.enter().append("path").classed("legend"+L,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),R.exit().remove(),R.each(function(V){var F=S.select(this),D=V[0],U=w(D.mlw,O.line,5,2);F.style("stroke-width",U+"px");var j=D.mcc;if(!x._inHover&&"mc"in D){var J=s(O),X=J.mid;X===void 0&&(X=(J.max+J.min)/2),j=b.tryColorscale(O,"")(X)}var Z=j||D.mc||O.color,Y=O.pattern,W=Y&&b.getPatternAttr(Y.shape,0,"");if(W){var Q=b.getPatternAttr(Y.bgcolor,0,null),ne=b.getPatternAttr(Y.fgcolor,0,null),re=Y.fgopacity,ie=u(Y.size,8,10),se=u(Y.solidity,.5,1),ge="legend-"+C.uid;F.call(b.pattern,"legend",f,ge,W,ie,se,j,Y.fillmode,Q,ne,re)}else F.call(d.fill,Z);U&&d.stroke(F,D.mlc||I.color)})}function M(_,E,L){var C=_[0],O=C.trace,I=L?O.visible&&O.type===L:k.traceIs(O,L),N=S.select(E).select("g.legendpoints").selectAll("path.legend"+L).data(I?[_]:[]);if(N.enter().append("path").classed("legend"+L,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),N.exit().remove(),N.size()){var R=(O.marker||{}).line,V=w(r(R.width,C.pts),R,5,2),F=l.minExtend(O,{marker:{line:{width:V}}});F.marker.line.color=R.color;var D=l.minExtend(C,{trace:F});o(N,D,F)}}h.each(function(_){var E=S.select(this),L=l.ensureSingle(E,"g","layers");L.style("opacity",_[0].trace.opacity);var C=x.valign,O=_[0].lineHeight,I=_[0].height;if(C!=="middle"&&O&&I){var N={top:1,bottom:-1}[C]*(.5*(O-I+3));L.attr("transform",T(0,N))}else L.attr("transform",null);L.selectAll("g.legendfill").data([_]).enter().append("g").classed("legendfill",!0),L.selectAll("g.legendlines").data([_]).enter().append("g").classed("legendlines",!0);var R=L.selectAll("g.legendsymbols").data([_]);R.enter().append("g").classed("legendsymbols",!0),R.selectAll("g.legendpoints").data([_]).enter().append("g").classed("legendpoints",!0)}).each(function(_){var E,L=_[0].trace,C=[];if(L.visible)switch(L.type){case"histogram2d":case"heatmap":C=[["M-15,-2V4H15V-2Z"]],E=!0;break;case"choropleth":case"choroplethmapbox":C=[["M-6,-6V6H6V-6Z"]],E=!0;break;case"densitymapbox":C=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],E="radial";break;case"cone":C=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],E=!1;break;case"streamtube":C=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],E=!1;break;case"surface":C=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],E=!0;break;case"mesh3d":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!1;break;case"volume":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!0;break;case"isosurface":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],E=!1}var O=S.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(C);O.enter().append("path").classed("legend3dandfriends",!0).attr("transform",m).style("stroke-miterlimit",1),O.exit().remove(),O.each(function(I,N){var R,V=S.select(this),F=s(L),D=F.colorscale,U=F.reversescale;if(D){if(!E){var j=D.length;R=N===0?D[U?j-1:0][1]:N===1?D[U?0:j-1][1]:D[Math.floor((j-1)/2)][1]}}else{var J=L.vertexcolor||L.facecolor||L.color;R=l.isArrayOrTypedArray(J)?J[N]||J[0]:J}V.attr("d",I[0]),R?V.call(d.fill,R):V.call(function(X){if(X.size()){var Z="legendfill-"+L.uid;b.gradient(X,f,Z,a(U,E==="radial"),D,"fill")}})})}).each(function(_){var E=_[0].trace,L=E.type==="waterfall";if(_[0]._distinct&&L){var C=_[0].trace[_[0].dir].marker;return _[0].mc=C.color,_[0].mlw=C.line.width,_[0].mlc=C.line.color,c(_,this,"waterfall")}var O=[];E.visible&&L&&(O=_[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var I=S.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(O);I.enter().append("path").classed("legendwaterfall",!0).attr("transform",m).style("stroke-miterlimit",1),I.exit().remove(),I.each(function(N){var R=S.select(this),V=E[N[0]].marker,F=w(void 0,V.line,5,2);R.attr("d",N[1]).style("stroke-width",F+"px").call(d.fill,V.color),F&&R.call(d.stroke,V.line.color)})}).each(function(_){c(_,this,"funnel")}).each(function(_){c(_,this)}).each(function(_){var E=_[0].trace,L=S.select(this).select("g.legendpoints").selectAll("path.legendbox").data(E.visible&&k.traceIs(E,"box-violin")?[_]:[]);L.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),L.exit().remove(),L.each(function(){var C=S.select(this);if(E.boxpoints!=="all"&&E.points!=="all"||d.opacity(E.fillcolor)!==0||d.opacity((E.line||{}).color)!==0){var O=w(void 0,E.line,5,2);C.style("stroke-width",O+"px").call(d.fill,E.fillcolor),O&&d.stroke(C,E.line.color)}else{var I=l.minExtend(E,{marker:{size:g?12:l.constrain(E.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});L.call(b.pointStyle,I,f)}})}).each(function(_){M(_,this,"funnelarea")}).each(function(_){M(_,this,"pie")}).each(function(_){var E,L,C=i(_),O=C.showFill,I=C.showLine,N=C.showGradientLine,R=C.showGradientFill,V=C.anyFill,F=C.anyLine,D=_[0],U=D.trace,j=s(U),J=j.colorscale,X=j.reversescale,Z=t.hasMarkers(U)||!V?"M5,0":F?"M5,-2":"M5,-3",Y=S.select(this),W=Y.select(".legendfill").selectAll("path").data(O||R?[_]:[]);if(W.enter().append("path").classed("js-fill",!0),W.exit().remove(),W.attr("d",Z+"h"+y+"v6h-"+y+"z").call(function(re){if(re.size())if(O)b.fillGroupStyle(re,f);else{var ie="legendfill-"+U.uid;b.gradient(re,f,ie,a(X),J,"fill")}}),I||N){var Q=w(void 0,U.line,10,5);L=l.minExtend(U,{line:{width:Q}}),E=[l.minExtend(D,{trace:L})]}var ne=Y.select(".legendlines").selectAll("path").data(I||N?[E]:[]);ne.enter().append("path").classed("js-line",!0),ne.exit().remove(),ne.attr("d",Z+(N?"l"+y+",0.0001":"h"+y)).call(I?b.lineGroupStyle:function(re){if(re.size()){var ie="legendline-"+U.uid;b.lineGroupStyle(re),b.gradient(re,f,ie,a(X),J,"stroke")}})}).each(function(_){var E,L,C=i(_),O=C.anyFill,I=C.anyLine,N=C.showLine,R=C.showMarker,V=_[0],F=V.trace,D=!R&&!I&&!O&&t.hasText(F);function U(ne,re,ie,se){var ge=l.nestedProperty(F,ne).get(),ue=l.isArrayOrTypedArray(ge)&&re?re(ge):ge;if(g&&ue&&se!==void 0&&(ue=se),ie){if(ue<ie[0])return ie[0];if(ue>ie[1])return ie[1]}return ue}function j(ne){return V._distinct&&V.index&&ne[V.index]?ne[V.index]:ne[0]}if(R||D||N){var J={},X={};if(R){J.mc=U("marker.color",j),J.mx=U("marker.symbol",j),J.mo=U("marker.opacity",l.mean,[.2,1]),J.mlc=U("marker.line.color",j),J.mlw=U("marker.line.width",l.mean,[0,5],2),X.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var Z=U("marker.size",l.mean,[2,16],12);J.ms=Z,X.marker.size=Z}N&&(X.line={width:U("line.width",j,[0,10],5)}),D&&(J.tx="Aa",J.tp=U("textposition",j),J.ts=10,J.tc=U("textfont.color",j),J.tf=U("textfont.family",j)),E=[l.minExtend(V,J)],(L=l.minExtend(F,X)).selectedpoints=null,L.texttemplate=null}var Y=S.select(this).select("g.legendpoints"),W=Y.selectAll("path.scatterpts").data(R?E:[]);W.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",m),W.exit().remove(),W.call(b.pointStyle,L,f),R&&(E[0].mrc=3);var Q=Y.selectAll("g.pointtext").data(D?E:[]);Q.enter().append("g").classed("pointtext",!0).append("text").attr("transform",m),Q.exit().remove(),Q.selectAll("text").call(b.textPointStyle,L,f)}).each(function(_){var E=_[0].trace,L=S.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(E.visible&&E.type==="candlestick"?[_,_]:[]);L.enter().append("path").classed("legendcandle",!0).attr("d",function(C,O){return O?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",m).style("stroke-miterlimit",1),L.exit().remove(),L.each(function(C,O){var I=S.select(this),N=E[O?"increasing":"decreasing"],R=w(void 0,N.line,5,2);I.style("stroke-width",R+"px").call(d.fill,N.fillcolor),R&&d.stroke(I,N.line.color)})}).each(function(_){var E=_[0].trace,L=S.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(E.visible&&E.type==="ohlc"?[_,_]:[]);L.enter().append("path").classed("legendohlc",!0).attr("d",function(C,O){return O?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",m).style("stroke-miterlimit",1),L.exit().remove(),L.each(function(C,O){var I=S.select(this),N=E[O?"increasing":"decreasing"],R=w(void 0,N.line,5,2);I.style("fill","none").call(b.dashLine,N.line.dash,R),R&&d.stroke(I,N.line.color)})})}},42068:function(K,z,e){e(93348),K.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},26023:function(K,z,e){var S=e(73972),k=e(74875),l=e(41675),T=e(24255),b=e(34031).eraseActiveShape,d=e(71828),s=d._,t=K.exports={};function o(v,g){var y,p,m=g.currentTarget,w=m.getAttribute("data-attr"),c=m.getAttribute("data-val")||!0,M=v._fullLayout,_={},E=l.list(v,null,!0),L=M._cartesianSpikesEnabled;if(w==="zoom"){var C,O=c==="in"?.5:2,I=(1+O)/2,N=(1-O)/2;for(p=0;p<E.length;p++)if(!(y=E[p]).fixedrange)if(C=y._name,c==="auto")_[C+".autorange"]=!0;else if(c==="reset"){if(y._rangeInitial===void 0)_[C+".autorange"]=!0;else{var R=y._rangeInitial.slice();_[C+".range[0]"]=R[0],_[C+".range[1]"]=R[1]}y._showSpikeInitial!==void 0&&(_[C+".showspikes"]=y._showSpikeInitial,L!=="on"||y._showSpikeInitial||(L="off"))}else{var V=[y.r2l(y.range[0]),y.r2l(y.range[1])],F=[I*V[0]+N*V[1],I*V[1]+N*V[0]];_[C+".range[0]"]=y.l2r(F[0]),_[C+".range[1]"]=y.l2r(F[1])}}else w!=="hovermode"||c!=="x"&&c!=="y"||(c=M._isHoriz?"y":"x",m.setAttribute("data-val",c)),_[w]=c;M._cartesianSpikesEnabled=L,S.call("_guiRelayout",v,_)}function r(v,g){for(var y=g.currentTarget,p=y.getAttribute("data-attr"),m=y.getAttribute("data-val")||!0,w=v._fullLayout._subplots.gl3d||[],c={},M=p.split("."),_=0;_<w.length;_++)c[w[_]+"."+M[1]]=m;var E=m==="pan"?m:"zoom";c.dragmode=E,S.call("_guiRelayout",v,c)}function n(v,g){for(var y=g.currentTarget.getAttribute("data-attr"),p=y==="resetLastSave",m=y==="resetDefault",w=v._fullLayout,c=w._subplots.gl3d||[],M={},_=0;_<c.length;_++){var E,L=c[_],C=L+".camera",O=L+".aspectratio",I=L+".aspectmode",N=w[L]._scene;p?(M[C+".up"]=N.viewInitial.up,M[C+".eye"]=N.viewInitial.eye,M[C+".center"]=N.viewInitial.center,E=!0):m&&(M[C+".up"]=null,M[C+".eye"]=null,M[C+".center"]=null,E=!0),E&&(M[O+".x"]=N.viewInitial.aspectratio.x,M[O+".y"]=N.viewInitial.aspectratio.y,M[O+".z"]=N.viewInitial.aspectratio.z,M[I]=N.viewInitial.aspectmode)}S.call("_guiRelayout",v,M)}function a(v,g){var y=g.currentTarget,p=y._previousVal,m=v._fullLayout,w=m._subplots.gl3d||[],c=["xaxis","yaxis","zaxis"],M={},_={};if(p)_=p,y._previousVal=null;else{for(var E=0;E<w.length;E++){var L=w[E],C=m[L],O=L+".hovermode";M[O]=C.hovermode,_[O]=!1;for(var I=0;I<3;I++){var N=c[I],R=L+"."+N+".showspikes";_[R]=!1,M[R]=C[N].showspikes}}y._previousVal=M}return _}function i(v,g){for(var y=g.currentTarget,p=y.getAttribute("data-attr"),m=y.getAttribute("data-val")||!0,w=v._fullLayout,c=w._subplots.geo||[],M=0;M<c.length;M++){var _=c[M],E=w[_];if(p==="zoom"){var L=E.projection.scale,C=m==="in"?2*L:.5*L;S.call("_guiRelayout",v,_+".projection.scale",C)}}p==="reset"&&x(v,"geo")}function u(v){var g=v._fullLayout;return!g.hovermode&&(g._has("cartesian")?g._isHoriz?"y":"x":"closest")}function h(v){var g=u(v);S.call("_guiRelayout",v,"hovermode",g)}function f(v,g){for(var y=g.currentTarget.getAttribute("data-val"),p=v._fullLayout,m=p._subplots.mapbox||[],w={},c=0;c<m.length;c++){var M=m[c],_=p[M].zoom,E=y==="in"?1.05*_:_/1.05;w[M+".zoom"]=E}S.call("_guiRelayout",v,w)}function x(v,g){for(var y=v._fullLayout,p=y._subplots[g]||[],m={},w=0;w<p.length;w++)for(var c=p[w],M=y[c]._subplot.viewInitial,_=Object.keys(M),E=0;E<_.length;E++){var L=_[E];m[c+"."+L]=M[L]}S.call("_guiRelayout",v,m)}t.toImage={name:"toImage",title:function(v){var g=(v._context.toImageButtonOptions||{}).format||"png";return s(v,g==="png"?"Download plot as a png":"Download plot")},icon:T.camera,click:function(v){var g=v._context.toImageButtonOptions,y={format:g.format||"png"};d.notifier(s(v,"Taking snapshot - this may take a few seconds"),"long"),y.format!=="svg"&&d.isIE()&&(d.notifier(s(v,"IE only supports svg.  Changing format to svg."),"long"),y.format="svg"),["filename","width","height","scale"].forEach(function(p){p in g&&(y[p]=g[p])}),S.call("downloadImage",v,y).then(function(p){d.notifier(s(v,"Snapshot succeeded")+" - "+p,"long")}).catch(function(){d.notifier(s(v,"Sorry, there was a problem downloading your snapshot!"),"long")})}},t.sendDataToCloud={name:"sendDataToCloud",title:function(v){return s(v,"Edit in Chart Studio")},icon:T.disk,click:function(v){k.sendDataToCloud(v)}},t.editInChartStudio={name:"editInChartStudio",title:function(v){return s(v,"Edit in Chart Studio")},icon:T.pencil,click:function(v){k.sendDataToCloud(v)}},t.zoom2d={name:"zoom2d",_cat:"zoom",title:function(v){return s(v,"Zoom")},attr:"dragmode",val:"zoom",icon:T.zoombox,click:o},t.pan2d={name:"pan2d",_cat:"pan",title:function(v){return s(v,"Pan")},attr:"dragmode",val:"pan",icon:T.pan,click:o},t.select2d={name:"select2d",_cat:"select",title:function(v){return s(v,"Box Select")},attr:"dragmode",val:"select",icon:T.selectbox,click:o},t.lasso2d={name:"lasso2d",_cat:"lasso",title:function(v){return s(v,"Lasso Select")},attr:"dragmode",val:"lasso",icon:T.lasso,click:o},t.drawclosedpath={name:"drawclosedpath",title:function(v){return s(v,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:T.drawclosedpath,click:o},t.drawopenpath={name:"drawopenpath",title:function(v){return s(v,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:T.drawopenpath,click:o},t.drawline={name:"drawline",title:function(v){return s(v,"Draw line")},attr:"dragmode",val:"drawline",icon:T.drawline,click:o},t.drawrect={name:"drawrect",title:function(v){return s(v,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:T.drawrect,click:o},t.drawcircle={name:"drawcircle",title:function(v){return s(v,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:T.drawcircle,click:o},t.eraseshape={name:"eraseshape",title:function(v){return s(v,"Erase active shape")},icon:T.eraseshape,click:b},t.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(v){return s(v,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:o},t.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(v){return s(v,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:o},t.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(v){return s(v,"Autoscale")},attr:"zoom",val:"auto",icon:T.autoscale,click:o},t.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(v){return s(v,"Reset axes")},attr:"zoom",val:"reset",icon:T.home,click:o},t.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(v){return s(v,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:o},t.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(v){return s(v,"Compare data on hover")},attr:"hovermode",val:function(v){return v._fullLayout._isHoriz?"y":"x"},icon:T.tooltip_compare,gravity:"ne",click:o},t.zoom3d={name:"zoom3d",_cat:"zoom",title:function(v){return s(v,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:T.zoombox,click:r},t.pan3d={name:"pan3d",_cat:"pan",title:function(v){return s(v,"Pan")},attr:"scene.dragmode",val:"pan",icon:T.pan,click:r},t.orbitRotation={name:"orbitRotation",title:function(v){return s(v,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:T["3d_rotate"],click:r},t.tableRotation={name:"tableRotation",title:function(v){return s(v,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:T["z-axis"],click:r},t.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(v){return s(v,"Reset camera to default")},attr:"resetDefault",icon:T.home,click:n},t.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(v){return s(v,"Reset camera to last save")},attr:"resetLastSave",icon:T.movie,click:n},t.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(v,g){var y=a(v,g);S.call("_guiRelayout",v,y)}},t.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(v){return s(v,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:i},t.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(v){return s(v,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:i},t.resetGeo={name:"resetGeo",_cat:"reset",title:function(v){return s(v,"Reset")},attr:"reset",val:null,icon:T.autoscale,click:i},t.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:h},t.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:h},t.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:h},t.resetViewSankey={name:"resetSankeyGroup",title:function(v){return s(v,"Reset view")},icon:T.home,click:function(v){for(var g={"node.groups":[],"node.x":[],"node.y":[]},y=0;y<v._fullData.length;y++){var p=v._fullData[y]._viewInitial;g["node.groups"].push(p.node.groups.slice()),g["node.x"].push(p.node.x.slice()),g["node.y"].push(p.node.y.slice())}S.call("restyle",v,g)}},t.toggleHover={name:"toggleHover",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(v,g){var y=a(v,g);y.hovermode=u(v),S.call("_guiRelayout",v,y)}},t.resetViews={name:"resetViews",title:function(v){return s(v,"Reset views")},icon:T.home,click:function(v,g){var y=g.currentTarget;y.setAttribute("data-attr","zoom"),y.setAttribute("data-val","reset"),o(v,g),y.setAttribute("data-attr","resetLastSave"),n(v,g),x(v,"geo"),x(v,"mapbox")}},t.toggleSpikelines={name:"toggleSpikelines",title:function(v){return s(v,"Toggle Spike Lines")},icon:T.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(v){var g=v._fullLayout,y=g._cartesianSpikesEnabled;g._cartesianSpikesEnabled=y==="on"?"off":"on",S.call("_guiRelayout",v,function(p){for(var m=p._fullLayout._cartesianSpikesEnabled==="on",w=l.list(p,null,!0),c={},M=0;M<w.length;M++){var _=w[M];c[_._name+".showspikes"]=!!m||_._showSpikeInitial}return c}(v))}},t.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(v){return s(v,"Reset view")},attr:"reset",icon:T.home,click:function(v){x(v,"mapbox")}},t.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(v){return s(v,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:f},t.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(v){return s(v,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:f}},93348:function(K,z,e){var S=e(26023),k=Object.keys(S),l=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],T=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(l),b=[];k.forEach(function(d){(function(s){if(T.indexOf(s._cat||s.name)===-1){var t=s.name,o=(s._cat||s.name).toLowerCase();b.indexOf(t)===-1&&b.push(t),b.indexOf(o)===-1&&b.push(o)}})(S[d])}),b.sort(),K.exports={DRAW_MODES:l,backButtons:T,foreButtons:b}},35750:function(K,z,e){var S=e(71828),k=e(7901),l=e(44467),T=e(42068);K.exports=function(b,d){var s=b.modebar||{},t=l.newContainer(d,"modebar");function o(n,a){return S.coerce(s,t,T,n,a)}o("orientation"),o("bgcolor",k.addOpacity(d.paper_bgcolor,.5));var r=k.contrast(k.rgb(d.modebar.bgcolor));o("color",k.addOpacity(r,.3)),o("activecolor",k.addOpacity(r,.7)),o("uirevision",d.uirevision),o("add"),o("remove")}},64168:function(K,z,e){K.exports={moduleType:"component",name:"modebar",layoutAttributes:e(42068),supplyLayoutDefaults:e(35750),manage:e(14192)}},14192:function(K,z,e){var S=e(41675),k=e(34098),l=e(73972),T=e(23469).isUnifiedHover,b=e(37676),d=e(26023),s=e(93348).DRAW_MODES,t=e(71828).extendDeep;K.exports=function(o){var r=o._fullLayout,n=o._context,a=r._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var i,u=n.modeBarButtons;i=Array.isArray(u)&&u.length?function(h){for(var f=t([],h),x=0;x<f.length;x++)for(var v=f[x],g=0;g<v.length;g++){var y=v[g];if(typeof y=="string"){if(d[y]===void 0)throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));f[x][g]=d[y]}}return f}(u):!n.displayModeBar&&n.watermark?[]:function(h){var f=h._fullLayout,x=h._fullData,v=h._context;function g(ge,ue){if(typeof ue=="string"){if(ue.toLowerCase()===ge.toLowerCase())return!0}else{var ce=ue.name,le=ue._cat||ue.name;if(ce===ge||le===ge.toLowerCase())return!0}return!1}var y=f.modebar.add;typeof y=="string"&&(y=[y]);var p=f.modebar.remove;typeof p=="string"&&(p=[p]);var m=v.modeBarButtonsToAdd.concat(y.filter(function(ge){for(var ue=0;ue<v.modeBarButtonsToRemove.length;ue++)if(g(ge,v.modeBarButtonsToRemove[ue]))return!1;return!0})),w=v.modeBarButtonsToRemove.concat(p.filter(function(ge){for(var ue=0;ue<v.modeBarButtonsToAdd.length;ue++)if(g(ge,v.modeBarButtonsToAdd[ue]))return!1;return!0})),c=f._has("cartesian"),M=f._has("gl3d"),_=f._has("geo"),E=f._has("pie"),L=f._has("funnelarea"),C=f._has("gl2d"),O=f._has("ternary"),I=f._has("mapbox"),N=f._has("polar"),R=f._has("smith"),V=f._has("sankey"),F=function(ge){for(var ue=S.list({_fullLayout:ge},null,!0),ce=0;ce<ue.length;ce++)if(!ue[ce].fixedrange)return!1;return!0}(f),D=T(f.hovermode),U=[];function j(ge){if(ge.length){for(var ue=[],ce=0;ce<ge.length;ce++){for(var le=ge[ce],de=d[le],Ce=de.name.toLowerCase(),xe=(de._cat||de.name).toLowerCase(),_e=!1,we=0;we<w.length;we++){var Ae=w[we].toLowerCase();if(Ae===Ce||Ae===xe){_e=!0;break}}_e||ue.push(d[le])}U.push(ue)}}var J=["toImage"];v.showEditInChartStudio?J.push("editInChartStudio"):v.showSendToCloud&&J.push("sendDataToCloud"),j(J);var X=[],Z=[],Y=[],W=[];(c||C||E||L||O)+_+M+I+N+R>1?(Z=["toggleHover"],Y=["resetViews"]):_?(X=["zoomInGeo","zoomOutGeo"],Z=["hoverClosestGeo"],Y=["resetGeo"]):M?(Z=["hoverClosest3d"],Y=["resetCameraDefault3d","resetCameraLastSave3d"]):I?(X=["zoomInMapbox","zoomOutMapbox"],Z=["toggleHover"],Y=["resetViewMapbox"]):C?Z=["hoverClosestGl2d"]:E?Z=["hoverClosestPie"]:V?(Z=["hoverClosestCartesian","hoverCompareCartesian"],Y=["resetViewSankey"]):Z=["toggleHover"],c&&(Z=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(ge){for(var ue=0;ue<ge.length;ue++)if(!l.traceIs(ge[ue],"noHover"))return!1;return!0}(x)||D)&&(Z=[]),!c&&!C||F||(X=["zoomIn2d","zoomOut2d","autoScale2d"],Y[0]!=="resetViews"&&(Y=["resetScale2d"])),M?W=["zoom3d","pan3d","orbitRotation","tableRotation"]:(c||C)&&!F||O?W=["zoom2d","pan2d"]:I||_?W=["pan2d"]:N&&(W=["zoom2d"]),function(ge){for(var ue=!1,ce=0;ce<ge.length&&!ue;ce++){var le=ge[ce];le._module&&le._module.selectPoints&&(l.traceIs(le,"scatter-like")?(k.hasMarkers(le)||k.hasText(le))&&(ue=!0):l.traceIs(le,"box-violin")&&le.boxpoints!=="all"&&le.points!=="all"||(ue=!0))}return ue}(x)&&W.push("select2d","lasso2d");var Q=[],ne=function(ge){Q.indexOf(ge)===-1&&Z.indexOf(ge)!==-1&&Q.push(ge)};if(Array.isArray(m)){for(var re=[],ie=0;ie<m.length;ie++){var se=m[ie];typeof se=="string"?(se=se.toLowerCase(),s.indexOf(se)!==-1?(f._has("mapbox")||f._has("cartesian"))&&W.push(se):se==="togglespikelines"?ne("toggleSpikelines"):se==="togglehover"?ne("toggleHover"):se==="hovercompare"?ne("hoverCompareCartesian"):se==="hoverclosest"?(ne("hoverClosestCartesian"),ne("hoverClosestGeo"),ne("hoverClosest3d"),ne("hoverClosestGl2d"),ne("hoverClosestPie")):se==="v1hovermode"&&(ne("toggleHover"),ne("hoverClosestCartesian"),ne("hoverCompareCartesian"),ne("hoverClosestGeo"),ne("hoverClosest3d"),ne("hoverClosestGl2d"),ne("hoverClosestPie"))):re.push(se)}m=re}return j(W),j(X.concat(Y)),j(Q),function(ge,ue){if(ue.length)if(Array.isArray(ue[0]))for(var ce=0;ce<ue.length;ce++)ge.push(ue[ce]);else ge.push(ue);return ge}(U,m)}(o),a?a.update(o,i):r._modeBar=b(o,i)}else a&&(a.destroy(),delete r._modeBar)}},37676:function(K,z,e){var S=e(39898),k=e(92770),l=e(71828),T=e(24255),b=e(11506).version,d=new DOMParser;function s(o){this.container=o.container,this.element=document.createElement("div"),this.update(o.graphInfo,o.buttons),this.container.appendChild(this.element)}var t=s.prototype;t.update=function(o,r){this.graphInfo=o;var n=this.graphInfo._context,a=this.graphInfo._fullLayout,i="modebar-"+a._uid;this.element.setAttribute("id",i),this._uid=i,this.element.className="modebar",n.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),a.modebar.orientation==="v"&&(this.element.className+=" vertical",r=r.reverse());var u=a.modebar,h=n.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";l.deleteRelatedStyleRule(i),l.addRelatedStyleRule(i,h+"#"+i+" .modebar-group","background-color: "+u.bgcolor),l.addRelatedStyleRule(i,"#"+i+" .modebar-btn .icon path","fill: "+u.color),l.addRelatedStyleRule(i,"#"+i+" .modebar-btn:hover .icon path","fill: "+u.activecolor),l.addRelatedStyleRule(i,"#"+i+" .modebar-btn.active .icon path","fill: "+u.activecolor);var f=!this.hasButtons(r),x=this.hasLogo!==n.displaylogo,v=this.locale!==n.locale;if(this.locale=n.locale,(f||x||v)&&(this.removeAllButtons(),this.updateButtons(r),n.watermark||n.displaylogo)){var g=this.getLogo();n.watermark&&(g.className=g.className+" watermark"),a.modebar.orientation==="v"?this.element.insertBefore(g,this.element.childNodes[0]):this.element.appendChild(g),this.hasLogo=!0}this.updateActiveButton()},t.updateButtons=function(o){var r=this;this.buttons=o,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(n){var a=r.createGroup();n.forEach(function(i){var u=i.name;if(!u)throw new Error("must provide button 'name' in button config");if(r.buttonsNames.indexOf(u)!==-1)throw new Error("button name '"+u+"' is taken");r.buttonsNames.push(u);var h=r.createButton(i);r.buttonElements.push(h),a.appendChild(h)}),r.element.appendChild(a)})},t.createGroup=function(){var o=document.createElement("div");return o.className="modebar-group",o},t.createButton=function(o){var r=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var a=o.title;a===void 0?a=o.name:typeof a=="function"&&(a=a(this.graphInfo)),(a||a===0)&&n.setAttribute("data-title",a),o.attr!==void 0&&n.setAttribute("data-attr",o.attr);var i=o.val;if(i!==void 0&&(typeof i=="function"&&(i=i(this.graphInfo)),n.setAttribute("data-val",i)),typeof o.click!="function")throw new Error("must provide button 'click' function in button config");n.addEventListener("click",function(h){o.click(r.graphInfo,h),r.updateActiveButton(h.currentTarget)}),n.setAttribute("data-toggle",o.toggle||!1),o.toggle&&S.select(n).classed("active",!0);var u=o.icon;return typeof u=="function"?n.appendChild(u()):n.appendChild(this.createIcon(u||T.question)),n.setAttribute("data-gravity",o.gravity||"n"),n},t.createIcon=function(o){var r,n=k(o.height)?Number(o.height):o.ascent-o.descent,a="http://www.w3.org/2000/svg";if(o.path){(r=document.createElementNS(a,"svg")).setAttribute("viewBox",[0,0,o.width,n].join(" ")),r.setAttribute("class","icon");var i=document.createElementNS(a,"path");i.setAttribute("d",o.path),o.transform?i.setAttribute("transform",o.transform):o.ascent!==void 0&&i.setAttribute("transform","matrix(1 0 0 -1 0 "+o.ascent+")"),r.appendChild(i)}return o.svg&&(r=d.parseFromString(o.svg,"application/xml").childNodes[0]),r.setAttribute("height","1em"),r.setAttribute("width","1em"),r},t.updateActiveButton=function(o){var r=this.graphInfo._fullLayout,n=o!==void 0?o.getAttribute("data-attr"):null;this.buttonElements.forEach(function(a){var i=a.getAttribute("data-val")||!0,u=a.getAttribute("data-attr"),h=a.getAttribute("data-toggle")==="true",f=S.select(a);if(h)u===n&&f.classed("active",!f.classed("active"));else{var x=u===null?u:l.nestedProperty(r,u).get();f.classed("active",x===i)}})},t.hasButtons=function(o){var r=this.buttons;if(!r||o.length!==r.length)return!1;for(var n=0;n<o.length;++n){if(o[n].length!==r[n].length)return!1;for(var a=0;a<o[n].length;a++)if(o[n][a].name!==r[n][a].name)return!1}return!0},t.getLogo=function(){var o=this.createGroup(),r=document.createElement("a");return r.href="https://plotly.com/",r.target="_blank",r.setAttribute("data-title",l._(this.graphInfo,"Produced with Plotly.js")+" (v"+b+")"),r.className="modebar-btn plotlyjsicon modebar-btn--logo",r.appendChild(this.createIcon(T.newplotlylogo)),o.appendChild(r),o},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){l.removeElement(this.container.querySelector(".modebar")),l.deleteRelatedStyleRule(this._uid)},K.exports=function(o,r){var n=o._fullLayout,a=new s({graphInfo:o,container:n._modebardiv.node(),buttons:r});return n._privateplot&&S.select(a.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),a}},37113:function(K,z,e){var S=e(41940),k=e(22399),l=(0,e(44467).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});K.exports={visible:{valType:"boolean",editType:"plot"},buttons:l,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:S({editType:"plot"}),bgcolor:{valType:"color",dflt:k.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},89573:function(K){K.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},28674:function(K,z,e){var S=e(71828),k=e(7901),l=e(44467),T=e(85501),b=e(37113),d=e(89573);function s(t,o,r,n){var a=n.calendar;function i(h,f){return S.coerce(t,o,b.buttons,h,f)}if(i("visible")){var u=i("step");u!=="all"&&(!a||a==="gregorian"||u!=="month"&&u!=="year"?i("stepmode"):o.stepmode="backward",i("count")),i("label")}}K.exports=function(t,o,r,n,a){var i=t.rangeselector||{},u=l.newContainer(o,"rangeselector");function h(v,g){return S.coerce(i,u,b,v,g)}if(h("visible",T(i,u,{name:"buttons",handleItemDefaults:s,calendar:a}).length>0)){var f=function(v,g,y){for(var p=y.filter(function(M){return g[M].anchor===v._id}),m=0,w=0;w<p.length;w++){var c=g[p[w]].domain;c&&(m=Math.max(c[1],m))}return[v.domain[0],m+d.yPad]}(o,r,n);h("x",f[0]),h("y",f[1]),S.noneOrAll(t,o,["x","y"]),h("xanchor"),h("yanchor"),S.coerceFont(h,"font",r.font);var x=h("bgcolor");h("activecolor",k.contrast(x,d.lightAmount,d.darkAmount)),h("bordercolor"),h("borderwidth")}}},21598:function(K,z,e){var S=e(39898),k=e(73972),l=e(74875),T=e(7901),b=e(91424),d=e(71828),s=d.strTranslate,t=e(63893),o=e(41675),r=e(18783),n=r.LINE_SPACING,a=r.FROM_TL,i=r.FROM_BR,u=e(89573),h=e(70565);function f(g){return g._id}function x(g,y,p){var m=d.ensureSingle(g,"rect","selector-rect",function(w){w.attr("shape-rendering","crispEdges")});m.attr({rx:u.rx,ry:u.ry}),m.call(T.stroke,y.bordercolor).call(T.fill,function(w,c){return c._isActive||c._isHovered?w.activecolor:w.bgcolor}(y,p)).style("stroke-width",y.borderwidth+"px")}function v(g,y,p,m){var w,c;d.ensureSingle(g,"text","selector-text",function(M){M.attr("text-anchor","middle")}).call(b.font,y.font).text((w=p,c=m._fullLayout._meta,w.label?c?d.templateString(w.label,c):w.label:w.step==="all"?"all":w.count+w.step.charAt(0))).call(function(M){t.convertToTspans(M,m)})}K.exports=function(g){var y=g._fullLayout._infolayer.selectAll(".rangeselector").data(function(p){for(var m=o.list(p,"x",!0),w=[],c=0;c<m.length;c++){var M=m[c];M.rangeselector&&M.rangeselector.visible&&w.push(M)}return w}(g),f);y.enter().append("g").classed("rangeselector",!0),y.exit().remove(),y.style({cursor:"pointer","pointer-events":"all"}),y.each(function(p){var m=S.select(this),w=p,c=w.rangeselector,M=m.selectAll("g.button").data(d.filterVisible(c.buttons));M.enter().append("g").classed("button",!0),M.exit().remove(),M.each(function(_){var E=S.select(this),L=h(w,_);_._isActive=function(C,O,I){if(O.step==="all")return C.autorange===!0;var N=Object.keys(I);return C.range[0]===I[N[0]]&&C.range[1]===I[N[1]]}(w,_,L),E.call(x,c,_),E.call(v,c,_,g),E.on("click",function(){g._dragged||k.call("_guiRelayout",g,L)}),E.on("mouseover",function(){_._isHovered=!0,E.call(x,c,_)}),E.on("mouseout",function(){_._isHovered=!1,E.call(x,c,_)})}),function(_,E,L,C,O){var I=0,N=0,R=L.borderwidth;E.each(function(){var J=S.select(this).select(".selector-text"),X=L.font.size*n,Z=Math.max(X*t.lineCount(J),16)+3;N=Math.max(N,Z)}),E.each(function(){var J=S.select(this),X=J.select(".selector-rect"),Z=J.select(".selector-text"),Y=Z.node()&&b.bBox(Z.node()).width,W=L.font.size*n,Q=t.lineCount(Z),ne=Math.max(Y+10,u.minButtonWidth);J.attr("transform",s(R+I,R)),X.attr({x:0,y:0,width:ne,height:N}),t.positionText(Z,ne/2,N/2-(Q-1)*W/2+3),I+=ne+5});var V=_._fullLayout._size,F=V.l+V.w*L.x,D=V.t+V.h*(1-L.y),U="left";d.isRightAnchor(L)&&(F-=I,U="right"),d.isCenterAnchor(L)&&(F-=I/2,U="center");var j="top";d.isBottomAnchor(L)&&(D-=N,j="bottom"),d.isMiddleAnchor(L)&&(D-=N/2,j="middle"),I=Math.ceil(I),N=Math.ceil(N),F=Math.round(F),D=Math.round(D),l.autoMargin(_,C+"-range-selector",{x:L.x,y:L.y,l:I*a[U],r:I*i[U],b:N*i[j],t:N*a[j]}),O.attr("transform",s(F,D))}(g,M,c,w._name,m)})}},70565:function(K,z,e){var S=e(81041),k=e(71828).titleCase;K.exports=function(l,T){var b=l._name,d={};if(T.step==="all")d[b+".autorange"]=!0;else{var s=function(t,o){var r,n=t.range,a=new Date(t.r2l(n[1])),i=o.step,u=S["utc"+k(i)],h=o.count;switch(o.stepmode){case"backward":r=t.l2r(+u.offset(a,-h));break;case"todate":var f=u.offset(a,-h);r=t.l2r(+u.ceil(f))}return[r,n[1]]}(l,T);d[b+".range[0]"]=s[0],d[b+".range[1]"]=s[1]}return d}},97218:function(K,z,e){K.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e(37113)}}},layoutAttributes:e(37113),handleDefaults:e(28674),draw:e(21598)}},75148:function(K,z,e){var S=e(22399);K.exports={bgcolor:{valType:"color",dflt:S.background,editType:"plot"},bordercolor:{valType:"color",dflt:S.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},88443:function(K,z,e){var S=e(41675).list,k=e(71739).getAutoRange,l=e(73251);K.exports=function(T){for(var b=S(T,"x",!0),d=0;d<b.length;d++){var s=b[d],t=s[l.name];t&&t.visible&&t.autorange&&(t._input.autorange=!0,t._input.range=t.range=k(T,s))}}},73251:function(K){K.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},26377:function(K,z,e){var S=e(71828),k=e(44467),l=e(41675),T=e(75148),b=e(47850);K.exports=function(d,s,t){var o=d[t],r=s[t];if(o.rangeslider||s._requestRangeslider[r._id]){S.isPlainObject(o.rangeslider)||(o.rangeslider={});var n,a,i=o.rangeslider,u=k.newContainer(r,"rangeslider");if(m("visible")){m("bgcolor",s.plot_bgcolor),m("bordercolor"),m("borderwidth"),m("thickness"),m("autorange",!r.isValidRange(i.range)),m("range");var h=s._subplots;if(h)for(var f=h.cartesian.filter(function(c){return c.substr(0,c.indexOf("y"))===l.name2id(t)}).map(function(c){return c.substr(c.indexOf("y"),c.length)}),x=S.simpleMap(f,l.id2name),v=0;v<x.length;v++){var g=x[v];n=i[g]||{},a=k.newContainer(u,g,"yaxis");var y,p=s[g];n.range&&p.isValidRange(n.range)&&(y="fixed"),w("rangemode",y)!=="match"&&w("range",p.range.slice())}u._input=i}}function m(c,M){return S.coerce(i,u,T,c,M)}function w(c,M){return S.coerce(n,a,b,c,M)}}},72413:function(K,z,e){var S=e(39898),k=e(73972),l=e(74875),T=e(71828),b=T.strTranslate,d=e(91424),s=e(7901),t=e(92998),o=e(93612),r=e(41675),n=e(28569),a=e(6964),i=e(73251);function u(y,p,m,w){var c=T.ensureSingle(y,"rect",i.bgClassName,function(L){L.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),M=w.borderwidth%2==0?w.borderwidth:w.borderwidth-1,_=-w._offsetShift,E=d.crispRound(p,w.borderwidth);c.attr({width:w._width+M,height:w._height+M,transform:b(_,_),"stroke-width":E}).call(s.stroke,w.bordercolor).call(s.fill,w.bgcolor)}function h(y,p,m,w){var c=p._fullLayout;T.ensureSingleById(c._topdefs,"clipPath",w._clipId,function(M){M.append("rect").attr({x:0,y:0})}).select("rect").attr({width:w._width,height:w._height})}function f(y,p,m,w){var c,M=p.calcdata,_=y.selectAll("g."+i.rangePlotClassName).data(m._subplotsWith,T.identity);_.enter().append("g").attr("class",function(E){return i.rangePlotClassName+" "+E}).call(d.setClipUrl,w._clipId,p),_.order(),_.exit().remove(),_.each(function(E,L){var C=S.select(this),O=L===0,I=r.getFromId(p,E,"y"),N=I._name,R=w[N],V={data:[],layout:{xaxis:{type:m.type,domain:[0,1],range:w.range.slice(),calendar:m.calendar},width:w._width,height:w._height,margin:{t:0,b:0,l:0,r:0}},_context:p._context};m.rangebreaks&&(V.layout.xaxis.rangebreaks=m.rangebreaks),V.layout[N]={type:I.type,domain:[0,1],range:R.rangemode!=="match"?R.range.slice():I.range.slice(),calendar:I.calendar},I.rangebreaks&&(V.layout[N].rangebreaks=I.rangebreaks),l.supplyDefaults(V);var F=V._fullLayout.xaxis,D=V._fullLayout[N];F.clearCalc(),F.setScale(),D.clearCalc(),D.setScale();var U={id:E,plotgroup:C,xaxis:F,yaxis:D,isRangePlot:!0};O?c=U:(U.mainplot="xy",U.mainplotinfo=c),o.rangePlot(p,U,function(j,J){for(var X=[],Z=0;Z<j.length;Z++){var Y=j[Z],W=Y[0].trace;W.xaxis+W.yaxis===J&&X.push(Y)}return X}(M,E))})}function x(y,p,m,w,c){T.ensureSingle(y,"rect",i.maskMinClassName,function(M){M.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",w._height).call(s.fill,i.maskColor),T.ensureSingle(y,"rect",i.maskMaxClassName,function(M){M.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",w._height).call(s.fill,i.maskColor),c.rangemode!=="match"&&(T.ensureSingle(y,"rect",i.maskMinOppAxisClassName,function(M){M.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",w._width).call(s.fill,i.maskOppAxisColor),T.ensureSingle(y,"rect",i.maskMaxOppAxisClassName,function(M){M.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",w._width).style("border-top",i.maskOppBorder).call(s.fill,i.maskOppAxisColor))}function v(y,p,m,w){p._context.staticPlot||T.ensureSingle(y,"rect",i.slideBoxClassName,function(c){c.attr({y:0,cursor:i.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:w._height,fill:i.slideBoxFill})}function g(y,p,m,w){var c=T.ensureSingle(y,"g",i.grabberMinClassName),M=T.ensureSingle(y,"g",i.grabberMaxClassName),_={x:0,width:i.handleWidth,rx:i.handleRadius,fill:s.background,stroke:s.defaultLine,"stroke-width":i.handleStrokeWidth,"shape-rendering":"crispEdges"},E={y:Math.round(w._height/4),height:Math.round(w._height/2)};T.ensureSingle(c,"rect",i.handleMinClassName,function(C){C.attr(_)}).attr(E),T.ensureSingle(M,"rect",i.handleMaxClassName,function(C){C.attr(_)}).attr(E);var L={width:i.grabAreaWidth,x:0,y:0,fill:i.grabAreaFill,cursor:p._context.staticPlot?void 0:i.grabAreaCursor};T.ensureSingle(c,"rect",i.grabAreaMinClassName,function(C){C.attr(L)}).attr("height",w._height),T.ensureSingle(M,"rect",i.grabAreaMaxClassName,function(C){C.attr(L)}).attr("height",w._height)}K.exports=function(y){for(var p=y._fullLayout,m=p._rangeSliderData,w=0;w<m.length;w++){var c=m[w][i.name];c._clipId=c._id+"-"+p._uid}var M=p._infolayer.selectAll("g."+i.containerClassName).data(m,function(_){return _._name});M.exit().each(function(_){var E=_[i.name];p._topdefs.select("#"+E._clipId).remove()}).remove(),m.length!==0&&(M.enter().append("g").classed(i.containerClassName,!0).attr("pointer-events","all"),M.each(function(_){var E=S.select(this),L=_[i.name],C=p[r.id2name(_.anchor)],O=L[r.id2name(_.anchor)];if(L.range){var I,N=T.simpleMap(L.range,_.r2l),R=T.simpleMap(_.range,_.r2l);I=R[0]<R[1]?[Math.min(N[0],R[0]),Math.max(N[1],R[1])]:[Math.max(N[0],R[0]),Math.min(N[1],R[1])],L.range=L._input.range=T.simpleMap(I,_.l2r)}_.cleanRange("rangeslider.range");var V=p._size,F=_.domain;L._width=V.w*(F[1]-F[0]);var D=Math.round(V.l+V.w*F[0]),U=Math.round(V.t+V.h*(1-_._counterDomainMin)+(_.side==="bottom"?_._depth:0)+L._offsetShift+i.extraPad);E.attr("transform",b(D,U)),L._rl=T.simpleMap(L.range,_.r2l);var j=L._rl[0],J=L._rl[1],X=J-j;if(L.p2d=function(ge){return ge/L._width*X+j},L.d2p=function(ge){return(ge-j)/X*L._width},_.rangebreaks){var Z=_.locateBreaks(j,J);if(Z.length){var Y,W,Q=0;for(Y=0;Y<Z.length;Y++)Q+=(W=Z[Y]).max-W.min;var ne=L._width/(J-j-Q),re=[-ne*j];for(Y=0;Y<Z.length;Y++)W=Z[Y],re.push(re[re.length-1]-ne*(W.max-W.min));for(L.d2p=function(ge){for(var ue=re[0],ce=0;ce<Z.length;ce++){var le=Z[ce];if(ge>=le.max)ue=re[ce+1];else if(ge<le.min)break}return ue+ne*ge},Y=0;Y<Z.length;Y++)(W=Z[Y]).pmin=L.d2p(W.min),W.pmax=L.d2p(W.max);L.p2d=function(ge){for(var ue=re[0],ce=0;ce<Z.length;ce++){var le=Z[ce];if(ge>=le.pmax)ue=re[ce+1];else if(ge<le.pmin)break}return(ge-ue)/ne}}}if(O.rangemode!=="match"){var ie=C.r2l(O.range[0]),se=C.r2l(O.range[1])-ie;L.d2pOppAxis=function(ge){return(ge-ie)/se*L._height}}E.call(u,y,_,L).call(h,y,_,L).call(f,y,_,L).call(x,y,_,L,O).call(v,y,_,L).call(g,y,_,L),function(ge,ue,ce,le){if(!ue._context.staticPlot){var de=ge.select("rect."+i.slideBoxClassName).node(),Ce=ge.select("rect."+i.grabAreaMinClassName).node(),xe=ge.select("rect."+i.grabAreaMaxClassName).node();ge.on("mousedown",_e),ge.on("touchstart",_e)}function _e(){var we=S.event,Ae=we.target,$=we.clientX||we.touches[0].clientX,oe=$-ge.node().getBoundingClientRect().left,pe=le.d2p(ce._rl[0]),ye=le.d2p(ce._rl[1]),ke=n.coverSlip();function De(Re){var fe,ve,Te,ze=+(Re.clientX||Re.touches[0].clientX)-$;switch(Ae){case de:if(Te="ew-resize",pe+ze>ce._length||ye+ze<0)return;fe=pe+ze,ve=ye+ze;break;case Ce:if(Te="col-resize",pe+ze>ce._length)return;fe=pe+ze,ve=ye;break;case xe:if(Te="col-resize",ye+ze<0)return;fe=pe,ve=ye+ze;break;default:Te="ew-resize",fe=oe,ve=oe+ze}if(ve<fe){var He=ve;ve=fe,fe=He}le._pixelMin=fe,le._pixelMax=ve,a(S.select(ke),Te),function(Ve,nt,tt,ot){function pt(dt){return tt.l2r(T.constrain(dt,ot._rl[0],ot._rl[1]))}var Tt=pt(ot.p2d(ot._pixelMin)),yt=pt(ot.p2d(ot._pixelMax));window.requestAnimationFrame(function(){k.call("_guiRelayout",nt,tt._name+".range",[Tt,yt])})}(0,ue,ce,le)}function Pe(){ke.removeEventListener("mousemove",De),ke.removeEventListener("mouseup",Pe),this.removeEventListener("touchmove",De),this.removeEventListener("touchend",Pe),T.removeElement(ke)}this.addEventListener("touchmove",De),this.addEventListener("touchend",Pe),ke.addEventListener("mousemove",De),ke.addEventListener("mouseup",Pe)}}(E,y,_,L),function(ge,ue,ce,le,de,Ce){var xe=i.handleWidth/2;function _e(Re){return T.constrain(Re,0,le._width)}function we(Re){return T.constrain(Re,0,le._height)}function Ae(Re){return T.constrain(Re,-xe,le._width+xe)}var $=_e(le.d2p(ce._rl[0])),oe=_e(le.d2p(ce._rl[1]));if(ge.select("rect."+i.slideBoxClassName).attr("x",$).attr("width",oe-$),ge.select("rect."+i.maskMinClassName).attr("width",$),ge.select("rect."+i.maskMaxClassName).attr("x",oe).attr("width",le._width-oe),Ce.rangemode!=="match"){var pe=le._height-we(le.d2pOppAxis(de._rl[1])),ye=le._height-we(le.d2pOppAxis(de._rl[0]));ge.select("rect."+i.maskMinOppAxisClassName).attr("x",$).attr("height",pe).attr("width",oe-$),ge.select("rect."+i.maskMaxOppAxisClassName).attr("x",$).attr("y",ye).attr("height",le._height-ye).attr("width",oe-$),ge.select("rect."+i.slideBoxClassName).attr("y",pe).attr("height",ye-pe)}var ke=.5,De=Math.round(Ae($-xe))-ke,Pe=Math.round(Ae(oe-xe))+ke;ge.select("g."+i.grabberMinClassName).attr("transform",b(De,ke)),ge.select("g."+i.grabberMaxClassName).attr("transform",b(Pe,ke))}(E,0,_,L,C,O),_.side==="bottom"&&t.draw(y,_._id+"title",{propContainer:_,propName:_._name+".title",placeholder:p._dfltTitle.x,attributes:{x:_._offset+_._length/2,y:U+L._height+L._offsetShift+10+1.5*_.title.font.size,"text-anchor":"middle"}})}))}},549:function(K,z,e){var S=e(41675),k=e(63893),l=e(73251),T=e(18783).LINE_SPACING,b=l.name;function d(s){var t=s&&s[b];return t&&t.visible}z.isVisible=d,z.makeData=function(s){var t=S.list({_fullLayout:s},"x",!0),o=s.margin,r=[];if(!s._has("gl2d"))for(var n=0;n<t.length;n++){var a=t[n];if(d(a)){r.push(a);var i=a[b];i._id=b+a._id,i._height=(s.height-o.b-o.t)*i.thickness,i._offsetShift=Math.floor(i.borderwidth/2)}}s._rangeSliderData=r},z.autoMarginOpts=function(s,t){var o=s._fullLayout,r=t[b],n=t._id.charAt(0),a=0,i=0;return t.side==="bottom"&&(a=t._depth,t.title.text!==o._dfltTitle[n]&&(i=1.5*t.title.font.size+10+r._offsetShift,i+=(t.title.text.match(k.BR_TAG_ALL)||[]).length*t.title.font.size*T)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:r._height+a+Math.max(o.margin.b,i),pad:l.extraPad+2*r._offsetShift}}},13137:function(K,z,e){var S=e(71828),k=e(75148),l=e(47850),T=e(549);K.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:S.extendFlat({},k,{yaxis:l})}}},layoutAttributes:e(75148),handleDefaults:e(26377),calcAutorange:e(88443),draw:e(72413),isVisible:T.isVisible,makeData:T.makeData,autoMarginOpts:T.autoMarginOpts}},47850:function(K){K.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},8389:function(K,z,e){var S=e(50215),k=e(82196).line,l=e(79952).P,T=e(1426).extendFlat,b=e(30962).overrideAll,d=e(44467).templatedArray;e(24695),K.exports=b(d("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:T({},S.xref,{}),yref:T({},S.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:k.color,width:T({},k.width,{min:1,dflt:1}),dash:T({},l,{dflt:"dot"})}}),"arraydraw","from-root")},34122:function(K){K.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},59402:function(K,z,e){var S=e(71828),k=e(89298),l=e(85501),T=e(8389),b=e(30477);function d(s,t,o){function r(E,L){return S.coerce(s,t,T,E,L)}var n=r("path"),a=r("type",n?"path":"rect")!=="path";a&&delete t.path,r("opacity"),r("line.color"),r("line.width"),r("line.dash");for(var i=["x","y"],u=0;u<2;u++){var h,f,x,v=i[u],g={_fullLayout:o},y=k.coerceRef(s,t,g,v);if((h=k.getFromId(g,y))._selectionIndices.push(t._index),x=b.rangeToShapePosition(h),f=b.shapePositionToRange(h),a){var p=v+"0",m=v+"1",w=s[p],c=s[m];s[p]=f(s[p],!0),s[m]=f(s[m],!0),k.coercePosition(t,g,r,y,p),k.coercePosition(t,g,r,y,m);var M=t[p],_=t[m];M!==void 0&&_!==void 0&&(t[p]=x(M),t[m]=x(_),s[p]=w,s[m]=c)}}a&&S.noneOrAll(s,t,["x0","x1","y0","y1"])}K.exports=function(s,t){l(s,t,{name:"selections",handleItemDefaults:d});for(var o=t.selections,r=0;r<o.length;r++){var n=o[r];n&&n.path===void 0&&(n.x0!==void 0&&n.x1!==void 0&&n.y0!==void 0&&n.y1!==void 0||(t.selections[r]=null))}}},32485:function(K,z,e){var S=e(60165).readPaths,k=e(42359),l=e(51873).clearOutlineControllers,T=e(7901),b=e(91424),d=e(44467).arrayEditor,s=e(30477),t=s.getPathString;function o(u){var h=u._fullLayout;for(var f in l(u),h._selectionLayer.selectAll("path").remove(),h._plots){var x=h._plots[f].selectionLayer;x&&x.selectAll("path").remove()}for(var v=0;v<h.selections.length;v++)n(u,v)}function r(u){return u._context.editSelection}function n(u,h){u._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+h+'"]').remove();var f=s.makeSelectionsOptionsAndPlotinfo(u,h),x=f.options,v=f.plotinfo;x._input&&function(g){var y=t(u,x),p={"data-index":h,"fill-rule":"evenodd",d:y},m=x.opacity,w="rgba(0,0,0,0)",c=x.line.color||T.contrast(u._fullLayout.plot_bgcolor),M=x.line.width,_=x.line.dash;M||(M=5,_="solid");var E=r(u)&&u._fullLayout._activeSelectionIndex===h;E&&(w=u._fullLayout.activeselection.fillcolor,m=u._fullLayout.activeselection.opacity);for(var L=[],C=1;C>=0;C--){var O=g.append("path").attr(p).style("opacity",C?.1:m).call(T.stroke,c).call(T.fill,w).call(b.dashLine,C?"solid":_,C?4+M:M);if(a(O,u,x),E){var I=d(u.layout,"selections",x);O.style({cursor:"move"});var N={element:O.node(),plotinfo:v,gd:u,editHelpers:I,isActiveSelection:!0},R=S(y,u);k(R,O,N)}else O.style("pointer-events",C?"all":"none");L[C]=O}var V=L[0];L[1].node().addEventListener("click",function(){return function(F,D){if(r(F)){var U=+D.node().getAttribute("data-index");if(U>=0){if(U===F._fullLayout._activeSelectionIndex)return void i(F);F._fullLayout._activeSelectionIndex=U,F._fullLayout._deactivateSelection=i,o(F)}}}(u,V)})}(u._fullLayout._selectionLayer)}function a(u,h,f){var x=f.xref+f.yref;b.setClipUrl(u,"clip"+h._fullLayout._uid+x,h)}function i(u){r(u)&&u._fullLayout._activeSelectionIndex>=0&&(l(u),delete u._fullLayout._activeSelectionIndex,o(u))}K.exports={draw:o,drawOne:n,activateLastSelection:function(u){if(r(u)){var h=u._fullLayout.selections.length-1;u._fullLayout._activeSelectionIndex=h,u._fullLayout._deactivateSelection=i,o(u)}}}},53777:function(K,z,e){var S=e(79952).P,k=e(1426).extendFlat;K.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:k({},S,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},90849:function(K){K.exports=function(z,e,S){S("newselection.mode"),S("newselection.line.width")&&(S("newselection.line.color"),S("newselection.line.dash")),S("activeselection.fillcolor"),S("activeselection.opacity")}},35855:function(K,z,e){var S=e(64505).selectMode,k=e(51873).clearOutline,l=e(60165),T=l.readPaths,b=l.writePaths,d=l.fixDatesForPaths;K.exports=function(s,t){if(s.length){var o=s[0][0];if(o){var r=o.getAttribute("d"),n=t.gd,a=n._fullLayout.newselection,i=t.plotinfo,u=i.xaxis,h=i.yaxis,f=t.isActiveSelection,x=t.dragmode,v=(n.layout||{}).selections||[];if(!S(x)&&f!==void 0){var g=n._fullLayout._activeSelectionIndex;if(g<v.length)switch(n._fullLayout.selections[g].type){case"rect":x="select";break;case"path":x="lasso"}}var y,p=T(r,n,i,f),m={xref:u._id,yref:h._id,opacity:a.opacity,line:{color:a.line.color,width:a.line.width,dash:a.line.dash}};p.length===1&&(y=p[0]),y&&y.length===5&&x==="select"?(m.type="rect",m.x0=y[0][1],m.y0=y[0][2],m.x1=y[2][1],m.y1=y[2][2]):(m.type="path",u&&h&&d(p,u,h),m.path=b(p),y=null),k(n);for(var w=t.editHelpers,c=(w||{}).modifyItem,M=[],_=0;_<v.length;_++){var E=n._fullLayout.selections[_];if(E){if(M[_]=E._input,f!==void 0&&_===n._fullLayout._activeSelectionIndex){var L=m;switch(E.type){case"rect":c("x0",L.x0),c("x1",L.x1),c("y0",L.y0),c("y1",L.y1);break;case"path":c("path",L.path)}}}else M[_]=E}return f===void 0?(M.push(m),M):w?w.getUpdateObj():{}}}}},75549:function(K,z,e){var S=e(71828).strTranslate;function k(l,T){switch(l.type){case"log":return l.p2d(T);case"date":return l.p2r(T,0,l.calendar);default:return l.p2r(T)}}K.exports={p2r:k,r2p:function(l,T){switch(l.type){case"log":return l.d2p(T);case"date":return l.r2p(T,0,l.calendar);default:return l.r2p(T)}},axValue:function(l){var T=l._id.charAt(0)==="y"?1:0;return function(b){return k(l,b[T])}},getTransform:function(l){return S(l.xaxis._offset,l.yaxis._offset)}}},47322:function(K,z,e){var S=e(32485),k=e(3937);K.exports={moduleType:"component",name:"selections",layoutAttributes:e(8389),supplyLayoutDefaults:e(59402),supplyDrawNewSelectionDefaults:e(90849),includeBasePlot:e(76325)("selections"),draw:S.draw,drawOne:S.drawOne,reselect:k.reselect,prepSelect:k.prepSelect,clearOutline:k.clearOutline,clearSelectionsCache:k.clearSelectionsCache,selectOnClick:k.selectOnClick}},3937:function(K,z,e){var S=e(52142),k=e(38258),l=e(73972),T=e(91424).dashStyle,b=e(7901),d=e(30211),s=e(23469).makeEventData,t=e(64505),o=t.freeMode,r=t.rectMode,n=t.drawMode,a=t.openMode,i=t.selectMode,u=e(30477),h=e(21459),f=e(42359),x=e(51873).clearOutline,v=e(60165),g=v.handleEllipse,y=v.readPaths,p=e(90551),m=e(35855),w=e(32485).activateLastSelection,c=e(71828),M=c.sorterAsc,_=e(61082),E=e(79990),L=e(41675).getFromId,C=e(33306),O=e(61549).redrawReglTraces,I=e(34122),N=I.MINSELECT,R=_.filter,V=_.tester,F=e(75549),D=F.p2r,U=F.axValue,j=F.getTransform;function J(Pe){return Pe.subplot!==void 0}function X(Pe,Re,fe,ve,Te,ze,He){var Ve,nt,tt,ot,pt,Tt,yt,dt,Pt,Et=Re._hoverdata,Ot=Re._fullLayout.clickmode.indexOf("event")>-1,Nt=[];if(function(Ke){return Ke&&Array.isArray(Ke)&&Ke[0].hoverOnBox!==!0}(Et)){Q(Pe,Re,ze);var zt=function(Ke,st){var Se,Ie,We=Ke[0],it=-1,lt=[];for(Ie=0;Ie<st.length;Ie++)if(Se=st[Ie],We.fullData._expandedIndex===Se.cd[0].trace._expandedIndex){if(We.hoverOnBox===!0)break;We.pointNumber!==void 0?it=We.pointNumber:We.binNumber!==void 0&&(it=We.binNumber,lt=We.pointNumbers);break}return{pointNumber:it,pointNumbers:lt,searchInfo:Se}}(Et,Ve=ie(Re,fe,ve,Te));if(zt.pointNumbers.length>0?function(Ke,st){var Se,Ie,We,it=[];for(We=0;We<Ke.length;We++)(Se=Ke[We]).cd[0].trace.selectedpoints&&Se.cd[0].trace.selectedpoints.length>0&&it.push(Se);if(it.length===1&&it[0]===st.searchInfo&&(Ie=st.searchInfo.cd[0].trace).selectedpoints.length===st.pointNumbers.length){for(We=0;We<st.pointNumbers.length;We++)if(Ie.selectedpoints.indexOf(st.pointNumbers[We])<0)return!1;return!0}return!1}(Ve,zt):function(Ke){var st,Se,Ie=0;for(Se=0;Se<Ke.length;Se++)if((st=Ke[Se].cd[0].trace).selectedpoints&&(st.selectedpoints.length>1||(Ie+=st.selectedpoints.length)>1))return!1;return Ie===1}(Ve)&&(Tt=ge(zt))){for(He&&He.remove(),Pt=0;Pt<Ve.length;Pt++)(nt=Ve[Pt])._module.selectPoints(nt,!1);ue(Re,Ve),ne(ze),Ot&&De(Re)}else{for(yt=Pe.shiftKey&&(Tt!==void 0?Tt:ge(zt)),tt=function(Ke,st,Se){return{pointNumber:Ke,searchInfo:st,subtract:!!Se}}(zt.pointNumber,zt.searchInfo,yt),ot=W(ze.selectionDefs.concat([tt])),Pt=0;Pt<Ve.length;Pt++)if(pt=le(Ve[Pt]._module.selectPoints(Ve[Pt],ot),Ve[Pt]),Nt.length)for(var Ze=0;Ze<pt.length;Ze++)Nt.push(pt[Ze]);else Nt=pt;if(ue(Re,Ve,dt={points:Nt}),tt&&ze&&ze.selectionDefs.push(tt),He){var Ye=ze.mergedPolygons,je=a(ze.dragmode);f(de(Ye,je),He,ze)}Ot&&ke(Re,dt)}}}function Z(Pe){return"pointNumber"in Pe&&"searchInfo"in Pe}function Y(Pe){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(Re,fe,ve,Te){var ze=Pe.searchInfo.cd[0].trace._expandedIndex;return Te.cd[0].trace._expandedIndex===ze&&ve===Pe.pointNumber},isRect:!1,degenerate:!1,subtract:!!Pe.subtract}}function W(Pe){if(Pe.length){for(var Re=[],fe=Z(Pe[0])?0:Pe[0][0][0],ve=fe,Te=Z(Pe[0])?0:Pe[0][0][1],ze=Te,He=0;He<Pe.length;He++)if(Z(Pe[He]))Re.push(Y(Pe[He]));else{var Ve=V(Pe[He]);Ve.subtract=!!Pe[He].subtract,Re.push(Ve),fe=Math.min(fe,Ve.xmin),ve=Math.max(ve,Ve.xmax),Te=Math.min(Te,Ve.ymin),ze=Math.max(ze,Ve.ymax)}return{xmin:fe,xmax:ve,ymin:Te,ymax:ze,pts:[],contains:function(nt,tt,ot,pt){for(var Tt=!1,yt=0;yt<Re.length;yt++)Re[yt].contains(nt,tt,ot,pt)&&(Tt=!Re[yt].subtract);return Tt},isRect:!1,degenerate:!1}}}function Q(Pe,Re,fe){var ve=Re._fullLayout,Te=fe.plotinfo,ze=fe.dragmode,He=ve._lastSelectedSubplot&&ve._lastSelectedSubplot===Te.id,Ve=(Pe.shiftKey||Pe.altKey)&&!(n(ze)&&a(ze));He&&Ve&&Te.selection&&Te.selection.selectionDefs&&!fe.selectionDefs?(fe.selectionDefs=Te.selection.selectionDefs,fe.mergedPolygons=Te.selection.mergedPolygons):Ve&&Te.selection||ne(fe),He||(x(Re),ve._lastSelectedSubplot=Te.id)}function ne(Pe,Re){var fe=Pe.dragmode,ve=Pe.plotinfo,Te=Pe.gd;(function(pt){return pt._fullLayout._activeShapeIndex>=0})(Te)&&Te._fullLayout._deactivateShape(Te),function(pt){return pt._fullLayout._activeSelectionIndex>=0}(Te)&&Te._fullLayout._deactivateSelection(Te);var ze=Te._fullLayout._zoomlayer,He=n(fe),Ve=i(fe);if(He||Ve){var nt,tt,ot=ze.selectAll(".select-outline-"+ve.id);ot&&Te._fullLayout._outlining&&(He&&(nt=p(ot,Pe)),nt&&l.call("_guiRelayout",Te,{shapes:nt}),Ve&&!J(Pe)&&(tt=m(ot,Pe)),tt&&(Te._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",Te,{selections:tt}).then(function(){Re&&w(Te)})),Te._fullLayout._outlining=!1)}ve.selection={},ve.selection.selectionDefs=Pe.selectionDefs=[],ve.selection.mergedPolygons=Pe.mergedPolygons=[]}function re(Pe){return Pe._id}function ie(Pe,Re,fe,ve){if(!Pe.calcdata)return[];var Te,ze,He,Ve=[],nt=Re.map(re),tt=fe.map(re);for(He=0;He<Pe.calcdata.length;He++)if((ze=(Te=Pe.calcdata[He])[0].trace).visible===!0&&ze._module&&ze._module.selectPoints)if(!J({subplot:ve})||ze.subplot!==ve&&ze.geo!==ve)if(ze.type==="splom"){if(ze._xaxes[nt[0]]&&ze._yaxes[tt[0]]){var ot=se(ze._module,Te,Re[0],fe[0]);ot.scene=Pe._fullLayout._splomScenes[ze.uid],Ve.push(ot)}}else if(ze.type==="sankey"){var pt=se(ze._module,Te,Re[0],fe[0]);Ve.push(pt)}else{if(nt.indexOf(ze.xaxis)===-1||tt.indexOf(ze.yaxis)===-1)continue;Ve.push(se(ze._module,Te,L(Pe,ze.xaxis),L(Pe,ze.yaxis)))}else Ve.push(se(ze._module,Te,Re[0],fe[0]));return Ve}function se(Pe,Re,fe,ve){return{_module:Pe,cd:Re,xaxis:fe,yaxis:ve}}function ge(Pe){var Re=Pe.searchInfo.cd[0].trace,fe=Pe.pointNumber,ve=Pe.pointNumbers,Te=ve.length>0?ve[0]:fe;return!!Re.selectedpoints&&Re.selectedpoints.indexOf(Te)>-1}function ue(Pe,Re,fe){var ve,Te;for(ve=0;ve<Re.length;ve++){var ze=Re[ve].cd[0].trace._fullInput,He=Pe._fullLayout._tracePreGUI[ze.uid]||{};He.selectedpoints===void 0&&(He.selectedpoints=ze._input.selectedpoints||null)}if(fe){var Ve=fe.points||[];for(ve=0;ve<Re.length;ve++)(Te=Re[ve].cd[0].trace)._input.selectedpoints=Te._fullInput.selectedpoints=[],Te._fullInput!==Te&&(Te.selectedpoints=[]);for(var nt=0;nt<Ve.length;nt++){var tt=Ve[nt],ot=tt.data,pt=tt.fullData,Tt=tt.pointIndex,yt=tt.pointIndices;yt?([].push.apply(ot.selectedpoints,yt),Te._fullInput!==Te&&[].push.apply(pt.selectedpoints,yt)):(ot.selectedpoints.push(Tt),Te._fullInput!==Te&&pt.selectedpoints.push(Tt))}}else for(ve=0;ve<Re.length;ve++)delete(Te=Re[ve].cd[0].trace).selectedpoints,delete Te._input.selectedpoints,Te._fullInput!==Te&&delete Te._fullInput.selectedpoints;(function(dt,Pt){for(var Et=!1,Ot=0;Ot<Pt.length;Ot++){var Nt=Pt[Ot],zt=Nt.cd;l.traceIs(zt[0].trace,"regl")&&(Et=!0);var Ze=Nt._module,Ye=Ze.styleOnSelect||Ze.style;Ye&&(Ye(dt,zt,zt[0].node3),zt[0].nodeRangePlot3&&Ye(dt,zt,zt[0].nodeRangePlot3))}Et&&(C(dt),O(dt))})(Pe,Re)}function ce(Pe,Re,fe){for(var ve=(fe?S.difference:S.union)({regions:Pe},{regions:[Re]}).regions.reverse(),Te=0;Te<ve.length;Te++){var ze=ve[Te];ze.subtract=$(ze,ve.slice(0,Te))}return ve}function le(Pe,Re){if(Array.isArray(Pe))for(var fe=Re.cd,ve=Re.cd[0].trace,Te=0;Te<Pe.length;Te++)Pe[Te]=s(Pe[Te],ve,fe);return Pe}function de(Pe,Re){for(var fe=[],ve=0;ve<Pe.length;ve++){fe[ve]=[];for(var Te=0;Te<Pe[ve].length;Te++){fe[ve][Te]=[],fe[ve][Te][0]=Te?"L":"M";for(var ze=0;ze<Pe[ve][Te].length;ze++)fe[ve][Te].push(Pe[ve][Te][ze])}Re||fe[ve].push(["Z",fe[ve][0][1],fe[ve][0][2]])}return fe}function Ce(Pe,Re){for(var fe,ve,Te=[],ze=[],He=0;He<Re.length;He++){var Ve=Re[He];ve=Ve._module.selectPoints(Ve,Pe),ze.push(ve),fe=le(ve,Ve),Te=Te.concat(fe)}return Te}function xe(Pe,Re,fe,ve,Te){var ze,He,Ve,nt=!!ve;Te&&(ze=Te.plotinfo,He=Te.xaxes[0]._id,Ve=Te.yaxes[0]._id);var tt=[],ot=[],pt=Ae(Pe),Tt=Pe._fullLayout;if(ze){var yt=Tt._zoomlayer,dt=Tt.dragmode,Pt=n(dt),Et=i(dt);if(Pt||Et){var Ot=L(Pe,He,"x"),Nt=L(Pe,Ve,"y");if(Ot&&Nt){var zt=yt.selectAll(".select-outline-"+ze.id);if(zt&&Pe._fullLayout._outlining&&zt.length){for(var Ze=zt[0][0].getAttribute("d"),Ye=y(Ze,Pe,ze),je=[],Ke=0;Ke<Ye.length;Ke++){for(var st=Ye[Ke],Se=[],Ie=0;Ie<st.length;Ie++)Se.push([oe(Ot,st[Ie][1]),oe(Nt,st[Ie][2])]);Se.xref=He,Se.yref=Ve,Se.subtract=$(Se,je),je.push(Se)}pt=pt.concat(je)}}}}var We=He&&Ve?[He+Ve]:Tt._subplots.cartesian;(function(zn){var Fn=zn.calcdata;if(Fn)for(var Bn=0;Bn<Fn.length;Bn++){var er=Fn[Bn][0].trace,Xn=zn._fullLayout._splomScenes;if(Xn){var mr=Xn[er.uid];mr&&(mr.selectBatch=[])}}})(Pe);for(var it={},lt=0;lt<We.length;lt++){var gt=We[lt],At=gt.indexOf("y"),kt=gt.slice(0,At),ht=gt.slice(At),St=He&&Ve?fe:void 0;if(St=we(pt,kt,ht,St)){var vt=ve;if(!nt){var Mt=L(Pe,kt,"x"),It=L(Pe,ht,"y");vt=ie(Pe,[Mt],[It],gt);for(var Ut=0;Ut<vt.length;Ut++){var jt=vt[Ut],qt=jt.cd[0],Yt=qt.trace;if(jt._module.name==="scattergl"&&!qt.t.xpx){var Kt=Yt.x,pn=Yt.y,nn=Yt._length;qt.t.xpx=[],qt.t.ypx=[];for(var xn=0;xn<nn;xn++)qt.t.xpx[xn]=Mt.c2p(Kt[xn]),qt.t.ypx[xn]=It.c2p(pn[xn])}jt._module.name==="splom"&&(it[Yt.uid]||(it[Yt.uid]=!0))}}var jn=Ce(St,vt);tt=tt.concat(jn),ot=ot.concat(vt)}}var mn={points:tt};ue(Pe,ot,mn);var en=Tt.clickmode.indexOf("event")>-1&&Re;if(!ze&&Re){var vn=Ae(Pe,!0);if(vn.length){var on=vn[0].xref,sn=vn[0].yref;if(on&&sn){var En=pe(vn);ye([L(Pe,on,"x"),L(Pe,sn,"y")])(mn,En)}}Pe._fullLayout._noEmitSelectedAtStart?Pe._fullLayout._noEmitSelectedAtStart=!1:en&&ke(Pe,mn),Tt._reselect=!1}if(!ze&&Tt._deselect){var kn=Tt._deselect;(function(zn,Fn,Bn){for(var er=0;er<Bn.length;er++){var Xn=Bn[er];if(Xn.xaxis&&Xn.xaxis._id===zn&&Xn.yaxis&&Xn.yaxis._id===Fn)return!0}return!1})(He=kn.xref,Ve=kn.yref,ot)||_e(Pe,He,Ve,ve),en&&(mn.points.length?ke(Pe,mn):De(Pe)),Tt._deselect=!1}return{eventData:mn,selectionTesters:fe}}function _e(Pe,Re,fe,ve){ve=ie(Pe,[L(Pe,Re,"x")],[L(Pe,fe,"y")],Re+fe);for(var Te=0;Te<ve.length;Te++){var ze=ve[Te];ze._module.selectPoints(ze,!1)}ue(Pe,ve)}function we(Pe,Re,fe,ve){for(var Te,ze=0;ze<Pe.length;ze++){var He=Pe[ze];Re===He.xref&&fe===He.yref&&(Te?ve=W(Te=ce(Te,He,!!He.subtract)):(Te=[He],ve=V(He)))}return ve}function Ae(Pe,Re){for(var fe=[],ve=Pe._fullLayout,Te=ve.selections,ze=Te.length,He=0;He<ze;He++)if(!Re||He===ve._activeSelectionIndex){var Ve=Te[He];if(Ve){var nt,tt,ot,pt,Tt,yt=Ve.xref,dt=Ve.yref,Pt=L(Pe,yt,"x"),Et=L(Pe,dt,"y");if(Ve.type==="rect"){Tt=[];var Ot=oe(Pt,Ve.x0),Nt=oe(Pt,Ve.x1),zt=oe(Et,Ve.y0),Ze=oe(Et,Ve.y1);Tt=[[Ot,zt],[Ot,Ze],[Nt,Ze],[Nt,zt]],nt=Math.min(Ot,Nt),tt=Math.max(Ot,Nt),ot=Math.min(zt,Ze),pt=Math.max(zt,Ze),Tt.xmin=nt,Tt.xmax=tt,Tt.ymin=ot,Tt.ymax=pt,Tt.xref=yt,Tt.yref=dt,Tt.subtract=!1,Tt.isRect=!0,fe.push(Tt)}else if(Ve.type==="path")for(var Ye=Ve.path.split("Z"),je=[],Ke=0;Ke<Ye.length;Ke++){var st=Ye[Ke];if(st){st+="Z";var Se=u.extractPathCoords(st,h.paramIsX,"raw"),Ie=u.extractPathCoords(st,h.paramIsY,"raw");nt=1/0,tt=-1/0,ot=1/0,pt=-1/0,Tt=[];for(var We=0;We<Se.length;We++){var it=oe(Pt,Se[We]),lt=oe(Et,Ie[We]);Tt.push([it,lt]),nt=Math.min(it,nt),tt=Math.max(it,tt),ot=Math.min(lt,ot),pt=Math.max(lt,pt)}Tt.xmin=nt,Tt.xmax=tt,Tt.ymin=ot,Tt.ymax=pt,Tt.xref=yt,Tt.yref=dt,Tt.subtract=$(Tt,je),je.push(Tt),fe.push(Tt)}}}}return fe}function $(Pe,Re){for(var fe=!1,ve=0;ve<Re.length;ve++)for(var Te=Re[ve],ze=0;ze<Pe.length;ze++)if(k(Pe[ze],Te)){fe=!fe;break}return fe}function oe(Pe,Re){return Pe.type==="date"&&(Re=Re.replace("_"," ")),Pe.type==="log"?Pe.c2p(Re):Pe.r2p(Re,null,Pe.calendar)}function pe(Pe){for(var Re=Pe.length,fe=[],ve=0;ve<Re;ve++){var Te=Pe[ve];fe=(fe=fe.concat(Te)).concat([Te[0]])}return(ze=fe).isRect=ze.length===5&&ze[0][0]===ze[4][0]&&ze[0][1]===ze[4][1]&&ze[0][0]===ze[1][0]&&ze[2][0]===ze[3][0]&&ze[0][1]===ze[3][1]&&ze[1][1]===ze[2][1]||ze[0][1]===ze[1][1]&&ze[2][1]===ze[3][1]&&ze[0][0]===ze[3][0]&&ze[1][0]===ze[2][0],ze.isRect&&(ze.xmin=Math.min(ze[0][0],ze[2][0]),ze.xmax=Math.max(ze[0][0],ze[2][0]),ze.ymin=Math.min(ze[0][1],ze[2][1]),ze.ymax=Math.max(ze[0][1],ze[2][1])),ze;var ze}function ye(Pe){return function(Re,fe){for(var ve,Te,ze=0;ze<Pe.length;ze++){var He=Pe[ze],Ve=He._id,nt=Ve.charAt(0);if(fe.isRect){ve||(ve={});var tt=fe[nt+"min"],ot=fe[nt+"max"];tt!==void 0&&ot!==void 0&&(ve[Ve]=[D(He,tt),D(He,ot)].sort(M))}else Te||(Te={}),Te[Ve]=fe.map(U(He))}ve&&(Re.range=ve),Te&&(Re.lassoPoints=Te)}}function ke(Pe,Re){Re&&(Re.selections=(Pe.layout||{}).selections||[]),Pe.emit("plotly_selected",Re)}function De(Pe){Pe.emit("plotly_deselect",null)}K.exports={reselect:xe,prepSelect:function(Pe,Re,fe,ve,Te){var ze=!J(ve),He=o(Te),Ve=r(Te),nt=a(Te),tt=n(Te),ot=i(Te),pt=Te==="drawcircle",Tt=Te==="drawline"||pt,yt=ve.gd,dt=yt._fullLayout,Pt=ot&&dt.newselection.mode==="immediate"&&ze,Et=dt._zoomlayer,Ot=ve.element.getBoundingClientRect(),Nt=ve.plotinfo,zt=j(Nt),Ze=Re-Ot.left,Ye=fe-Ot.top;dt._calcInverseTransform(yt);var je=c.apply3DTransform(dt._invTransform)(Ze,Ye);Ze=je[0],Ye=je[1];var Ke,st,Se,Ie,We,it,lt,gt=dt._invScaleX,At=dt._invScaleY,kt=Ze,ht=Ye,St="M"+Ze+","+Ye,vt=ve.xaxes[0],Mt=ve.yaxes[0],It=vt._length,Ut=Mt._length,jt=Pe.altKey&&!(n(Te)&&nt);Q(Pe,yt,ve),He&&(Ke=R([[Ze,Ye]],I.BENDPX));var qt=Et.selectAll("path.select-outline-"+Nt.id).data([1]),Yt=tt?dt.newshape:dt.newselection,Kt=tt&&!nt?Yt.fillcolor:"rgba(0,0,0,0)",pn=Yt.line.color||(ze?b.contrast(yt._fullLayout.plot_bgcolor):"#7f7f7f");qt.enter().append("path").attr("class","select-outline select-outline-"+Nt.id).style({opacity:tt?Yt.opacity/2:1,"stroke-dasharray":T(Yt.line.dash,Yt.line.width),"stroke-width":Yt.line.width+"px","shape-rendering":"crispEdges"}).call(b.stroke,pn).call(b.fill,Kt).attr("fill-rule","evenodd").classed("cursor-move",!!tt).attr("transform",zt).attr("d",St+"Z");var nn=Et.append("path").attr("class","zoombox-corners").style({fill:b.background,stroke:b.defaultLine,"stroke-width":1}).attr("transform",zt).attr("d","M0,0Z"),xn=dt._uid+I.SELECTID,jn=[],mn=ie(yt,ve.xaxes,ve.yaxes,ve.subplot);Pt&&!Pe.shiftKey&&(ve._clearSubplotSelections=function(){if(ze){var vn=vt._id,on=Mt._id;_e(yt,vn,on,mn);for(var sn=(yt.layout||{}).selections||[],En=[],kn=!1,zn=0;zn<sn.length;zn++){var Fn=dt.selections[zn];Fn.xref!==vn||Fn.yref!==on?En.push(sn[zn]):kn=!0}kn&&(yt._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",yt,{selections:En}))}});var en=function(vn){return vn.plotinfo.fillRangeItems||ye(vn.xaxes.concat(vn.yaxes))}(ve);ve.moveFn=function(vn,on){ve._clearSubplotSelections&&(ve._clearSubplotSelections(),ve._clearSubplotSelections=void 0),kt=Math.max(0,Math.min(It,gt*vn+Ze)),ht=Math.max(0,Math.min(Ut,At*on+Ye));var sn=Math.abs(kt-Ze),En=Math.abs(ht-Ye);if(Ve){var kn,zn,Fn;if(ot){var Bn=dt.selectdirection;switch(kn=Bn==="any"?En<Math.min(.6*sn,N)?"h":sn<Math.min(.6*En,N)?"v":"d":Bn){case"h":zn=pt?Ut/2:0,Fn=Ut;break;case"v":zn=pt?It/2:0,Fn=It}}if(tt)switch(dt.newshape.drawdirection){case"vertical":kn="h",zn=pt?Ut/2:0,Fn=Ut;break;case"horizontal":kn="v",zn=pt?It/2:0,Fn=It;break;case"ortho":sn<En?(kn="h",zn=Ye,Fn=ht):(kn="v",zn=Ze,Fn=kt);break;default:kn="d"}kn==="h"?((Ie=Tt?g(pt,[kt,zn],[kt,Fn]):[[Ze,zn],[Ze,Fn],[kt,Fn],[kt,zn]]).xmin=Tt?kt:Math.min(Ze,kt),Ie.xmax=Tt?kt:Math.max(Ze,kt),Ie.ymin=Math.min(zn,Fn),Ie.ymax=Math.max(zn,Fn),nn.attr("d","M"+Ie.xmin+","+(Ye-N)+"h-4v"+2*N+"h4ZM"+(Ie.xmax-1)+","+(Ye-N)+"h4v"+2*N+"h-4Z")):kn==="v"?((Ie=Tt?g(pt,[zn,ht],[Fn,ht]):[[zn,Ye],[zn,ht],[Fn,ht],[Fn,Ye]]).xmin=Math.min(zn,Fn),Ie.xmax=Math.max(zn,Fn),Ie.ymin=Tt?ht:Math.min(Ye,ht),Ie.ymax=Tt?ht:Math.max(Ye,ht),nn.attr("d","M"+(Ze-N)+","+Ie.ymin+"v-4h"+2*N+"v4ZM"+(Ze-N)+","+(Ie.ymax-1)+"v4h"+2*N+"v-4Z")):kn==="d"&&((Ie=Tt?g(pt,[Ze,Ye],[kt,ht]):[[Ze,Ye],[Ze,ht],[kt,ht],[kt,Ye]]).xmin=Math.min(Ze,kt),Ie.xmax=Math.max(Ze,kt),Ie.ymin=Math.min(Ye,ht),Ie.ymax=Math.max(Ye,ht),nn.attr("d","M0,0Z"))}else He&&(Ke.addPt([kt,ht]),Ie=Ke.filtered);if(ve.selectionDefs&&ve.selectionDefs.length?(Se=ce(ve.mergedPolygons,Ie,jt),Ie.subtract=jt,st=W(ve.selectionDefs.concat([Ie]))):(Se=[Ie],st=V(Ie)),f(de(Se,nt),qt,ve),ot){var er,Xn=xe(yt,!1),mr=Xn.eventData?Xn.eventData.points.slice():[];Xn=xe(yt,!1,st,mn,ve),st=Xn.selectionTesters,lt=Xn.eventData,er=Ke?Ke.filtered:pe(Se),E.throttle(xn,I.SELECTDELAY,function(){for(var ur=(jn=Ce(st,mn)).slice(),$n=0;$n<mr.length;$n++){for(var lr=mr[$n],hr=!1,Gt=0;Gt<ur.length;Gt++)if(ur[Gt].curveNumber===lr.curveNumber&&ur[Gt].pointNumber===lr.pointNumber){hr=!0;break}hr||ur.push(lr)}ur.length&&(lt||(lt={}),lt.points=ur),en(lt,er),function(hn,An){hn.emit("plotly_selecting",An)}(yt,lt)})}},ve.clickFn=function(vn,on){if(nn.remove(),yt._fullLayout._activeShapeIndex>=0)yt._fullLayout._deactivateShape(yt);else if(!tt){var sn=dt.clickmode;E.done(xn).then(function(){if(E.clear(xn),vn===2){for(qt.remove(),We=0;We<mn.length;We++)(it=mn[We])._module.selectPoints(it,!1);if(ue(yt,mn),ne(ve),De(yt),mn.length){var En=mn[0].xaxis,kn=mn[0].yaxis;if(En&&kn){for(var zn=[],Fn=yt._fullLayout.selections,Bn=0;Bn<Fn.length;Bn++){var er=Fn[Bn];er&&(er.xref===En._id&&er.yref===kn._id||zn.push(er))}zn.length<Fn.length&&(yt._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",yt,{selections:zn}))}}}else sn.indexOf("select")>-1&&X(on,yt,ve.xaxes,ve.yaxes,ve.subplot,ve,qt),sn==="event"&&ke(yt,void 0);d.click(yt,on)}).catch(c.error)}},ve.doneFn=function(){nn.remove(),E.done(xn).then(function(){E.clear(xn),!Pt&&Ie&&ve.selectionDefs&&(Ie.subtract=jt,ve.selectionDefs.push(Ie),ve.mergedPolygons.length=0,[].push.apply(ve.mergedPolygons,Se)),(Pt||tt)&&ne(ve,Pt),ve.doneFnCompleted&&ve.doneFnCompleted(jn),ot&&ke(yt,lt)}).catch(c.error)}},clearOutline:x,clearSelectionsCache:ne,selectOnClick:X}},89827:function(K,z,e){var S=e(50215),k=e(41940),l=e(82196).line,T=e(79952).P,b=e(1426).extendFlat,d=e(44467).templatedArray,s=(e(24695),e(5386).R),t=e(37281);K.exports=d("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:b({},S.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:b({},S.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:b({},l.color,{editType:"arraydraw"}),width:b({},l.width,{editType:"calc+arraydraw"}),dash:b({},T,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:s({},{keys:Object.keys(t)}),font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},5627:function(K,z,e){var S=e(71828),k=e(89298),l=e(21459),T=e(30477);function b(o){return s(o.line.width,o.xsizemode,o.x0,o.x1,o.path,!1)}function d(o){return s(o.line.width,o.ysizemode,o.y0,o.y1,o.path,!0)}function s(o,r,n,a,i,u){var h=o/2,f=u;if(r==="pixel"){var x=i?T.extractPathCoords(i,u?l.paramIsY:l.paramIsX):[n,a],v=S.aggNums(Math.max,null,x),g=S.aggNums(Math.min,null,x),y=g<0?Math.abs(g)+h:h,p=v>0?v+h:h;return{ppad:h,ppadplus:f?y:p,ppadminus:f?p:y}}return{ppad:h}}function t(o,r,n,a,i){var u=o.type==="category"||o.type==="multicategory"?o.r2c:o.d2c;if(r!==void 0)return[u(r),u(n)];if(a){var h,f,x,v,g=1/0,y=-1/0,p=a.match(l.segmentRE);for(o.type==="date"&&(u=T.decodeDate(u)),h=0;h<p.length;h++)(f=i[p[h].charAt(0)].drawn)!==void 0&&(!(x=p[h].substr(1).match(l.paramRE))||x.length<f||((v=u(x[f]))<g&&(g=v),v>y&&(y=v)));return y>=g?[g,y]:void 0}}K.exports=function(o){var r=o._fullLayout,n=S.filterVisible(r.shapes);if(n.length&&o._fullData.length)for(var a=0;a<n.length;a++){var i,u,h=n[a];h._extremes={};var f=k.getRefType(h.xref),x=k.getRefType(h.yref);if(h.xref!=="paper"&&f!=="domain"){var v=h.xsizemode==="pixel"?h.xanchor:h.x0,g=h.xsizemode==="pixel"?h.xanchor:h.x1;(u=t(i=k.getFromId(o,h.xref),v,g,h.path,l.paramIsX))&&(h._extremes[i._id]=k.findExtremes(i,u,b(h)))}if(h.yref!=="paper"&&x!=="domain"){var y=h.ysizemode==="pixel"?h.yanchor:h.y0,p=h.ysizemode==="pixel"?h.yanchor:h.y1;(u=t(i=k.getFromId(o,h.yref),y,p,h.path,l.paramIsY))&&(h._extremes[i._id]=k.findExtremes(i,u,d(h)))}}}},21459:function(K){K.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},84726:function(K,z,e){var S=e(71828),k=e(89298),l=e(85501),T=e(89827),b=e(30477);function d(s,t,o){function r(F,D){return S.coerce(s,t,T,F,D)}if(r("visible")){var n=r("path"),a=r("type",n?"path":"rect"),i=a!=="path";i&&delete t.path,r("editable"),r("layer"),r("opacity"),r("fillcolor"),r("fillrule"),r("line.width")&&(r("line.color"),r("line.dash"));for(var u=r("xsizemode"),h=r("ysizemode"),f=["x","y"],x=0;x<2;x++){var v,g,y,p=f[x],m=p+"anchor",w=p==="x"?u:h,c={_fullLayout:o},M=k.coerceRef(s,t,c,p,void 0,"paper");if(k.getRefType(M)==="range"?((v=k.getFromId(c,M))._shapeIndices.push(t._index),y=b.rangeToShapePosition(v),g=b.shapePositionToRange(v)):g=y=S.identity,i){var _=p+"0",E=p+"1",L=s[_],C=s[E];s[_]=g(s[_],!0),s[E]=g(s[E],!0),w==="pixel"?(r(_,0),r(E,10)):(k.coercePosition(t,c,r,M,_,.25),k.coercePosition(t,c,r,M,E,.75)),t[_]=y(t[_]),t[E]=y(t[E]),s[_]=L,s[E]=C}if(w==="pixel"){var O=s[m];s[m]=g(s[m],!0),k.coercePosition(t,c,r,M,m,.25),t[m]=y(t[m]),s[m]=O}}i&&S.noneOrAll(s,t,["x0","x1","y0","y1"]);var I,N,R=a==="line";if(i&&(I=r("label.texttemplate")),I||(N=r("label.text")),N||I){r("label.textangle");var V=r("label.textposition",R?"middle":"middle center");r("label.xanchor"),r("label.yanchor",function(F,D){return F?"bottom":D.indexOf("top")!==-1?"top":D.indexOf("bottom")!==-1?"bottom":"middle"}(R,V)),r("label.padding"),S.coerceFont(r,"label.font",o.font)}}}K.exports=function(s,t){l(s,t,{name:"shapes",handleItemDefaults:d})}},42359:function(K,z,e){var S=e(71828).strTranslate,k=e(28569),l=e(64505),T=l.drawMode,b=l.selectMode,d=e(73972),s=e(7901),t=e(89995),o=t.i000,r=t.i090,n=t.i180,a=t.i270,i=e(51873).clearOutlineControllers,u=e(60165),h=u.pointsOnRectangle,f=u.pointsOnEllipse,x=u.writePaths,v=e(90551),g=e(35855);function y(p,m){var w,c,M,_=p[m][1],E=p[m][2],L=p.length;return c=p[w=(m+1)%L][1],M=p[w][2],c===_&&M===E&&(c=p[w=(m+2)%L][1],M=p[w][2]),[w,c,M]}K.exports=function p(m,w,c,M){M||(M=0);var _=c.gd;function E(){p(m,w,c,M++),(f(m[0])||c.hasText)&&L({redrawing:!0})}function L(re){var ie={};c.isActiveShape!==void 0&&(c.isActiveShape=!1,ie=v(w,c)),c.isActiveSelection!==void 0&&(c.isActiveSelection=!1,ie=g(w,c),_._fullLayout._reselect=!0),Object.keys(ie).length&&d.call((re||{}).redrawing?"relayout":"_guiRelayout",_,ie)}var C,O,I,N,R,V=_._fullLayout._zoomlayer,F=c.dragmode,D=T(F),U=b(F);function j(re){I=+re.srcElement.getAttribute("data-i"),N=+re.srcElement.getAttribute("data-j"),C[I][N].moveFn=J}function J(re,ie){if(m.length){var se=R[I][N][1],ge=R[I][N][2],ue=m[I],ce=ue.length;if(h(ue)){var le=re,de=ie;c.isActiveSelection&&(y(ue,N)[1]===ue[N][1]?de=0:le=0);for(var Ce=0;Ce<ce;Ce++)if(Ce!==N){var xe=ue[Ce];xe[1]===ue[N][1]&&(xe[1]=se+le),xe[2]===ue[N][2]&&(xe[2]=ge+de)}if(ue[N][1]=se+le,ue[N][2]=ge+de,!h(ue))for(var _e=0;_e<ce;_e++)for(var we=0;we<ue[_e].length;we++)ue[_e][we]=R[I][_e][we]}else ue[N][1]=se+re,ue[N][2]=ge+ie;E()}}function X(){L()}function Z(re,ie){if(re===2){I=+ie.srcElement.getAttribute("data-i"),N=+ie.srcElement.getAttribute("data-j");var se=m[I];h(se)||f(se)||function(){if(m.length&&m[I]&&m[I].length){for(var ge=[],ue=0;ue<m[I].length;ue++)ue!==N&&ge.push(m[I][ue]);ge.length>1&&(ge.length!==2||ge[1][0]!=="Z")&&(N===0&&(ge[0][0]="M"),m[I]=ge,E(),L())}}()}}function Y(re,ie){(function(se,ge){if(m.length)for(var ue=0;ue<m.length;ue++)for(var ce=0;ce<m[ue].length;ce++)for(var le=0;le+2<m[ue][ce].length;le+=2)m[ue][ce][le+1]=R[ue][ce][le+1]+se,m[ue][ce][le+2]=R[ue][ce][le+2]+ge})(re,ie),E()}function W(re){(I=+re.srcElement.getAttribute("data-i"))||(I=0),O[I].moveFn=Y}function Q(){L()}function ne(re){re===2&&function(ie){if(b(ie._fullLayout.dragmode)){i(ie);var se=ie._fullLayout._activeSelectionIndex,ge=(ie.layout||{}).selections||[];if(se<ge.length){for(var ue=[],ce=0;ce<ge.length;ce++)ce!==se&&ue.push(ge[ce]);delete ie._fullLayout._activeSelectionIndex;var le=ie._fullLayout.selections[se];ie._fullLayout._deselect={xref:le.xref,yref:le.yref},d.call("_guiRelayout",ie,{selections:ue})}}}(_)}(D||U)&&(_._fullLayout._outlining=!0),i(_),w.attr("d",x(m)),M||!c.isActiveShape&&!c.isActiveSelection||(R=function(re,ie){for(var se=0;se<ie.length;se++){var ge=ie[se];re[se]=[];for(var ue=0;ue<ge.length;ue++){re[se][ue]=[];for(var ce=0;ce<ge[ue].length;ce++)re[se][ue][ce]=ge[ue][ce]}}return re}([],m),function(re){C=[];for(var ie=0;ie<m.length;ie++){var se=m[ie],ge=h(se),ue=!ge&&f(se);C[ie]=[];for(var ce=se.length,le=0;le<ce;le++)if(se[le][0]!=="Z"&&(!ue||le===o||le===r||le===n||le===a)){var de,Ce=ge&&c.isActiveSelection;Ce&&(de=y(se,le));var xe=se[le][1],_e=se[le][2],we=re.append(Ce?"rect":"circle").attr("data-i",ie).attr("data-j",le).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(Ce){var Ae=de[1]-xe,$=de[2]-_e,oe=$?5:Math.max(Math.min(25,Math.abs(Ae)-5),5),pe=Ae?5:Math.max(Math.min(25,Math.abs($)-5),5);we.classed($?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",oe).attr("height",pe).attr("x",xe-oe/2).attr("y",_e-pe/2).attr("transform",S(Ae/2,$/2))}else we.classed("cursor-grab",!0).attr("r",5).attr("cx",xe).attr("cy",_e);C[ie][le]={element:we.node(),gd:_,prepFn:j,doneFn:X,clickFn:Z},k.init(C[ie][le])}}}(V.append("g").attr("class","outline-controllers")),function(){O=[],m.length&&(O[0]={element:w[0][0],gd:_,prepFn:W,doneFn:Q,clickFn:ne},k.init(O[0]))}())}},34031:function(K,z,e){var S=e(39898),k=e(73972),l=e(71828),T=e(89298),b=e(60165).readPaths,d=e(42359),s=e(51873).clearOutlineControllers,t=e(7901),o=e(91424),r=e(44467).arrayEditor,n=e(28569),a=e(6964),i=e(63893),u=e(21459),h=e(30477),f=h.getPathString,x=e(37281),v=e(18783).FROM_TL;function g(E){var L=E._fullLayout;for(var C in L._shapeUpperLayer.selectAll("path").remove(),L._shapeLowerLayer.selectAll("path").remove(),L._shapeUpperLayer.selectAll("text").remove(),L._shapeLowerLayer.selectAll("text").remove(),L._plots){var O=L._plots[C].shapelayer;O&&(O.selectAll("path").remove(),O.selectAll("text").remove())}for(var I=0;I<L.shapes.length;I++)L.shapes[I].visible&&m(E,I)}function y(E){return!!E._fullLayout._outlining}function p(E){return!E._context.edits.shapePosition}function m(E,L){E._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+L+'"]').remove();var C=h.makeShapesOptionsAndPlotinfo(E,L),O=C.options,I=C.plotinfo;function N(R){var V=f(E,O),F={"data-index":L,"fill-rule":O.fillrule,d:V},D=O.opacity,U=O.fillcolor,j=O.line.width?O.line.color:"rgba(0,0,0,0)",J=O.line.width,X=O.line.dash;J||O.editable!==!0||(J=5,X="solid");var Z=V[V.length-1]!=="Z",Y=p(E)&&O.editable&&E._fullLayout._activeShapeIndex===L;Y&&(U=Z?"rgba(0,0,0,0)":E._fullLayout.activeshape.fillcolor,D=E._fullLayout.activeshape.opacity);var W,Q=R.append("g").classed("shape-group",!0).attr({"data-index":L}),ne=Q.append("path").attr(F).style("opacity",D).call(t.stroke,j).call(t.fill,U).call(o.dashLine,X,J);if(w(Q,E,O),c(E,L,O,Q),(Y||E._context.edits.shapePosition)&&(W=r(E.layout,"shapes",O)),Y){ne.style({cursor:"move"});var re={element:ne.node(),plotinfo:I,gd:E,editHelpers:W,hasText:O.label.text||O.label.texttemplate,isActiveShape:!0},ie=b(V,E);d(ie,ne,re)}else E._context.edits.shapePosition?function(se,ge,ue,ce,le,de){var Ce,xe,_e,we,Ae,$,oe,pe,ye,ke,De,Pe,Re,fe,ve,Te,ze=ue.xsizemode==="pixel",He=ue.ysizemode==="pixel",Ve=ue.type==="line",nt=ue.type==="path",tt=de.modifyItem,ot=S.select(ge.node().parentNode),pt=T.getFromId(se,ue.xref),Tt=T.getRefType(ue.xref),yt=T.getFromId(se,ue.yref),dt=T.getRefType(ue.yref),Pt=h.getDataToPixel(se,pt,!1,Tt),Et=h.getDataToPixel(se,yt,!0,dt),Ot=h.getPixelToData(se,pt,!1,Tt),Nt=h.getPixelToData(se,yt,!0,dt),zt=Ve?function(){var Ie=10,We=Math.max(ue.line.width,Ie),it=le.append("g").attr("data-index",ce).attr("drag-helper",!0);it.append("path").attr("d",ge.attr("d")).style({cursor:"move","stroke-width":We,"stroke-opacity":"0"});var lt={"fill-opacity":"0"},gt=Math.max(We/2,Ie);return it.append("circle").attr({"data-line-point":"start-point",cx:ze?Pt(ue.xanchor)+ue.x0:Pt(ue.x0),cy:He?Et(ue.yanchor)-ue.y0:Et(ue.y0),r:gt}).style(lt).classed("cursor-grab",!0),it.append("circle").attr({"data-line-point":"end-point",cx:ze?Pt(ue.xanchor)+ue.x1:Pt(ue.x1),cy:He?Et(ue.yanchor)-ue.y1:Et(ue.y1),r:gt}).style(lt).classed("cursor-grab",!0),it}():ge,Ze={element:zt.node(),gd:se,prepFn:function(Ie){y(se)||(ze&&(Ae=Pt(ue.xanchor)),He&&($=Et(ue.yanchor)),ue.type==="path"?ve=ue.path:(Ce=ze?ue.x0:Pt(ue.x0),xe=He?ue.y0:Et(ue.y0),_e=ze?ue.x1:Pt(ue.x1),we=He?ue.y1:Et(ue.y1)),Ce<_e?(ye=Ce,Re="x0",ke=_e,fe="x1"):(ye=_e,Re="x1",ke=Ce,fe="x0"),!He&&xe<we||He&&xe>we?(oe=xe,De="y0",pe=we,Pe="y1"):(oe=we,De="y1",pe=xe,Pe="y0"),Ye(Ie),st(le,ue),function(We,it,lt){var gt=it.xref,At=it.yref,kt=T.getFromId(lt,gt),ht=T.getFromId(lt,At),St="";gt==="paper"||kt.autorange||(St+=gt),At==="paper"||ht.autorange||(St+=At),o.setClipUrl(We,St?"clip"+lt._fullLayout._uid+St:null,lt)}(ge,ue,se),Ze.moveFn=Te==="move"?je:Ke,Ze.altKey=Ie.altKey)},doneFn:function(){y(se)||(a(ge),Se(le),w(ge,se,ue),k.call("_guiRelayout",se,de.getUpdateObj()))},clickFn:function(){y(se)||Se(le)}};function Ye(Ie){if(y(se))Te=null;else if(Ve)Te=Ie.target.tagName==="path"?"move":Ie.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var We=Ze.element.getBoundingClientRect(),it=We.right-We.left,lt=We.bottom-We.top,gt=Ie.clientX-We.left,At=Ie.clientY-We.top,kt=!nt&&it>10&&lt>10&&!Ie.shiftKey?n.getCursor(gt/it,1-At/lt):"move";a(ge,kt),Te=kt.split("-")[0]}}function je(Ie,We){if(ue.type==="path"){var it=function(At){return At},lt=it,gt=it;ze?tt("xanchor",ue.xanchor=Ot(Ae+Ie)):(lt=function(At){return Ot(Pt(At)+Ie)},pt&&pt.type==="date"&&(lt=h.encodeDate(lt))),He?tt("yanchor",ue.yanchor=Nt($+We)):(gt=function(At){return Nt(Et(At)+We)},yt&&yt.type==="date"&&(gt=h.encodeDate(gt))),tt("path",ue.path=M(ve,lt,gt))}else ze?tt("xanchor",ue.xanchor=Ot(Ae+Ie)):(tt("x0",ue.x0=Ot(Ce+Ie)),tt("x1",ue.x1=Ot(_e+Ie))),He?tt("yanchor",ue.yanchor=Nt($+We)):(tt("y0",ue.y0=Nt(xe+We)),tt("y1",ue.y1=Nt(we+We)));ge.attr("d",f(se,ue)),st(le,ue),c(se,ce,ue,ot)}function Ke(Ie,We){if(nt){var it=function(nn){return nn},lt=it,gt=it;ze?tt("xanchor",ue.xanchor=Ot(Ae+Ie)):(lt=function(nn){return Ot(Pt(nn)+Ie)},pt&&pt.type==="date"&&(lt=h.encodeDate(lt))),He?tt("yanchor",ue.yanchor=Nt($+We)):(gt=function(nn){return Nt(Et(nn)+We)},yt&&yt.type==="date"&&(gt=h.encodeDate(gt))),tt("path",ue.path=M(ve,lt,gt))}else if(Ve){if(Te==="resize-over-start-point"){var At=Ce+Ie,kt=He?xe-We:xe+We;tt("x0",ue.x0=ze?At:Ot(At)),tt("y0",ue.y0=He?kt:Nt(kt))}else if(Te==="resize-over-end-point"){var ht=_e+Ie,St=He?we-We:we+We;tt("x1",ue.x1=ze?ht:Ot(ht)),tt("y1",ue.y1=He?St:Nt(St))}}else{var vt=function(nn){return Te.indexOf(nn)!==-1},Mt=vt("n"),It=vt("s"),Ut=vt("w"),jt=vt("e"),qt=Mt?oe+We:oe,Yt=It?pe+We:pe,Kt=Ut?ye+Ie:ye,pn=jt?ke+Ie:ke;He&&(Mt&&(qt=oe-We),It&&(Yt=pe-We)),(!He&&Yt-qt>10||He&&qt-Yt>10)&&(tt(De,ue[De]=He?qt:Nt(qt)),tt(Pe,ue[Pe]=He?Yt:Nt(Yt))),pn-Kt>10&&(tt(Re,ue[Re]=ze?Kt:Ot(Kt)),tt(fe,ue[fe]=ze?pn:Ot(pn)))}ge.attr("d",f(se,ue)),st(le,ue),c(se,ce,ue,ot)}function st(Ie,We){(ze||He)&&function(){var it=We.type!=="path",lt=Ie.selectAll(".visual-cue").data([0]);lt.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var gt=Pt(ze?We.xanchor:l.midRange(it?[We.x0,We.x1]:h.extractPathCoords(We.path,u.paramIsX))),At=Et(He?We.yanchor:l.midRange(it?[We.y0,We.y1]:h.extractPathCoords(We.path,u.paramIsY)));if(gt=h.roundPositionForSharpStrokeRendering(gt,1),At=h.roundPositionForSharpStrokeRendering(At,1),ze&&He){var kt="M"+(gt-1-1)+","+(At-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";lt.attr("d",kt)}else if(ze){var ht="M"+(gt-1-1)+","+(At-9-1)+"v18 h2 v-18 Z";lt.attr("d",ht)}else{var St="M"+(gt-9-1)+","+(At-1-1)+"h18 v2 h-18 Z";lt.attr("d",St)}}()}function Se(Ie){Ie.selectAll(".visual-cue").remove()}n.init(Ze),zt.node().onmousemove=Ye}(E,ne,O,L,R,W):O.editable===!0&&ne.style("pointer-events",Z||t.opacity(U)*D<=.5?"stroke":"all");ne.node().addEventListener("click",function(){return function(se,ge){if(p(se)){var ue=+ge.node().getAttribute("data-index");if(ue>=0){if(ue===se._fullLayout._activeShapeIndex)return void _(se);se._fullLayout._activeShapeIndex=ue,se._fullLayout._deactivateShape=_,g(se)}}}(E,ne)})}O._input&&O.visible!==!1&&(O.layer!=="below"?N(E._fullLayout._shapeUpperLayer):O.xref==="paper"||O.yref==="paper"?N(E._fullLayout._shapeLowerLayer):I._hadPlotinfo?N((I.mainplotinfo||I).shapelayer):N(E._fullLayout._shapeLowerLayer))}function w(E,L,C){var O=(C.xref+C.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");o.setClipUrl(E,O?"clip"+L._fullLayout._uid+O:null,L)}function c(E,L,C,O){if(O.selectAll(".shape-label").remove(),C.label.text||C.label.texttemplate){var I;if(C.label.texttemplate){var N={};if(C.type!=="path"){var R=T.getFromId(E,C.xref),V=T.getFromId(E,C.yref);for(var F in x){var D=x[F](C,R,V);D!==void 0&&(N[F]=D)}}I=l.texttemplateStringForShapes(C.label.texttemplate,{},E._fullLayout._d3locale,N)}else I=C.label.text;var U,j,J,X,Z={"data-index":L},Y=C.label.font,W=O.append("g").attr(Z).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(I);if(C.path){var Q=f(E,C),ne=b(Q,E);U=1/0,J=1/0,j=-1/0,X=-1/0;for(var re=0;re<ne.length;re++)for(var ie=0;ie<ne[re].length;ie++)for(var se=ne[re][ie],ge=1;ge<se.length;ge+=2){var ue=se[ge],ce=se[ge+1];U=Math.min(U,ue),j=Math.max(j,ue),J=Math.min(J,ce),X=Math.max(X,ce)}}else{var le=T.getFromId(E,C.xref),de=T.getRefType(C.xref),Ce=T.getFromId(E,C.yref),xe=T.getRefType(C.yref),_e=h.getDataToPixel(E,le,!1,de),we=h.getDataToPixel(E,Ce,!0,xe);U=_e(C.x0),j=_e(C.x1),J=we(C.y0),X=we(C.y1)}var Ae=C.label.textangle;Ae==="auto"&&(Ae=C.type==="line"?function(ke,De,Pe,Re){var fe,ve;return ve=Math.abs(Pe-ke),fe=Pe>=ke?De-Re:Re-De,-180/Math.PI*Math.atan2(fe,ve)}(U,J,j,X):0),W.call(function(ke){return ke.call(o.font,Y).attr({}),i.convertToTspans(ke,E),ke});var $=function(ke,De,Pe,Re,fe,ve,Te){var ze,He,Ve,nt,tt=fe.label.textposition,ot=fe.label.textangle,pt=fe.label.padding,Tt=fe.type,yt=Math.PI/180*ve,dt=Math.sin(yt),Pt=Math.cos(yt),Et=fe.label.xanchor,Ot=fe.label.yanchor;if(Tt==="line"){tt==="start"?(ze=ke,He=De):tt==="end"?(ze=Pe,He=Re):(ze=(ke+Pe)/2,He=(De+Re)/2),Et==="auto"&&(Et=tt==="start"?ot==="auto"?Pe>ke?"left":Pe<ke?"right":"center":Pe>ke?"right":Pe<ke?"left":"center":tt==="end"?ot==="auto"?Pe>ke?"right":Pe<ke?"left":"center":Pe>ke?"left":Pe<ke?"right":"center":"center");var Nt={bottom:-1,middle:0,top:1};if(ot==="auto"){var zt=Nt[Ot];Ve=-pt*dt*zt,nt=pt*Pt*zt}else Ve=pt*{left:1,center:0,right:-1}[Et],nt=pt*Nt[Ot];ze+=Ve,He+=nt}else Ve=pt+3,tt.indexOf("right")!==-1?(ze=Math.max(ke,Pe)-Ve,Et==="auto"&&(Et="right")):tt.indexOf("left")!==-1?(ze=Math.min(ke,Pe)+Ve,Et==="auto"&&(Et="left")):(ze=(ke+Pe)/2,Et==="auto"&&(Et="center")),He=tt.indexOf("top")!==-1?Math.min(De,Re):tt.indexOf("bottom")!==-1?Math.max(De,Re):(De+Re)/2,nt=pt,Ot==="bottom"?He-=nt:Ot==="top"&&(He+=nt);var Ze=v[Ot],Ye=fe.label.font.size,je=Te.height;return{textx:ze+(je*Ze-Ye)*dt,texty:He+-(je*Ze-Ye)*Pt,xanchor:Et}}(U,J,j,X,C,Ae,o.bBox(W.node())),oe=$.textx,pe=$.texty,ye=$.xanchor;W.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[ye],y:pe,x:oe,transform:"rotate("+Ae+","+oe+","+pe+")"}).call(i.positionText,oe,pe)}}function M(E,L,C){return E.replace(u.segmentRE,function(O){var I=0,N=O.charAt(0),R=u.paramIsX[N],V=u.paramIsY[N],F=u.numParams[N];return N+O.substr(1).replace(u.paramRE,function(D){return I>=F||(R[I]?D=L(D):V[I]&&(D=C(D)),I++),D})})}function _(E){p(E)&&E._fullLayout._activeShapeIndex>=0&&(s(E),delete E._fullLayout._activeShapeIndex,g(E))}K.exports={draw:g,drawOne:m,eraseActiveShape:function(E){if(p(E)){s(E);var L=E._fullLayout._activeShapeIndex,C=(E.layout||{}).shapes||[];if(L<C.length){for(var O=[],I=0;I<C.length;I++)I!==L&&O.push(C[I]);delete E._fullLayout._activeShapeIndex,k.call("_guiRelayout",E,{shapes:O})}}},drawLabel:c}},29241:function(K,z,e){var S=e(41940),k=e(79952).P,l=e(1426).extendFlat,T=e(5386).R,b=e(37281);K.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:l({},k,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},label:{text:{valType:"string",dflt:"",editType:"none"},texttemplate:T({newshape:!0,editType:"none"},{keys:Object.keys(b)}),font:S({editType:"none"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"none"},textangle:{valType:"angle",dflt:"auto",editType:"none"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"none"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"none"},padding:{valType:"number",dflt:3,min:0,editType:"none"},editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},89995:function(K){K.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},45547:function(K,z,e){var S=e(7901),k=e(71828);K.exports=function(l,T,b){if(b("newshape.drawdirection"),b("newshape.layer"),b("newshape.fillcolor"),b("newshape.fillrule"),b("newshape.opacity"),b("newshape.line.width")){var d=(l||{}).plot_bgcolor||"#FFF";b("newshape.line.color",S.contrast(d)),b("newshape.line.dash")}var s=l.dragmode==="drawline",t=b("newshape.label.text"),o=b("newshape.label.texttemplate");if(t||o){b("newshape.label.textangle");var r=b("newshape.label.textposition",s?"middle":"middle center");b("newshape.label.xanchor"),b("newshape.label.yanchor",function(n,a){return n?"bottom":a.indexOf("top")!==-1?"top":a.indexOf("bottom")!==-1?"bottom":"middle"}(s,r)),b("newshape.label.padding"),k.coerceFont(b,"newshape.label.font",T.font)}b("activeshape.fillcolor"),b("activeshape.opacity")}},60165:function(K,z,e){var S=e(95616),k=e(89995),l=k.CIRCLE_SIDES,T=k.SQRT2,b=e(75549),d=b.p2r,s=b.r2p,t=[0,3,4,5,6,1,2],o=[0,3,4,1,2];function r(a,i){return Math.abs(a-i)<=1e-6}function n(a,i){var u=i[1]-a[1],h=i[2]-a[2];return Math.sqrt(u*u+h*h)}z.writePaths=function(a){var i=a.length;if(!i)return"M0,0Z";for(var u="",h=0;h<i;h++)for(var f=a[h].length,x=0;x<f;x++){var v=a[h][x][0];if(v==="Z")u+="Z";else for(var g=a[h][x].length,y=0;y<g;y++){var p=y;v==="Q"||v==="S"?p=o[y]:v==="C"&&(p=t[y]),u+=a[h][x][p],y>0&&y<g-1&&(u+=",")}}return u},z.readPaths=function(a,i,u,h){var f,x,v,g=S(a),y=[],p=-1,m=0,w=0,c=function(){x=m,v=w};c();for(var M=0;M<g.length;M++){var _,E,L,C,O=[],I=g[M][0],N=I;switch(I){case"M":y[++p]=[],m=+g[M][1],w=+g[M][2],O.push([N,m,w]),c();break;case"Q":case"S":_=+g[M][1],L=+g[M][2],m=+g[M][3],w=+g[M][4],O.push([N,m,w,_,L]);break;case"C":_=+g[M][1],L=+g[M][2],E=+g[M][3],C=+g[M][4],m=+g[M][5],w=+g[M][6],O.push([N,m,w,_,L,E,C]);break;case"T":case"L":m=+g[M][1],w=+g[M][2],O.push([N,m,w]);break;case"H":N="L",m=+g[M][1],O.push([N,m,w]);break;case"V":N="L",w=+g[M][1],O.push([N,m,w]);break;case"A":N="L";var R=+g[M][1],V=+g[M][2];+g[M][4]||(R=-R,V=-V);var F=m-R,D=w;for(f=1;f<=l/2;f++){var U=2*Math.PI*f/l;O.push([N,F+R*Math.cos(U),D+V*Math.sin(U)])}break;case"Z":m===x&&w===v||(m=x,w=v,O.push([N,m,w]))}for(var j=(u||{}).domain,J=i._fullLayout._size,X=u&&u.xsizemode==="pixel",Z=u&&u.ysizemode==="pixel",Y=h===!1,W=0;W<O.length;W++){for(f=0;f+2<7;f+=2){var Q=O[W][f+1],ne=O[W][f+2];Q!==void 0&&ne!==void 0&&(m=Q,w=ne,u&&(u.xaxis&&u.xaxis.p2r?(Y&&(Q-=u.xaxis._offset),Q=X?s(u.xaxis,u.xanchor)+Q:d(u.xaxis,Q)):(Y&&(Q-=J.l),j?Q=j.x[0]+Q/J.w:Q/=J.w),u.yaxis&&u.yaxis.p2r?(Y&&(ne-=u.yaxis._offset),ne=Z?s(u.yaxis,u.yanchor)-ne:d(u.yaxis,ne)):(Y&&(ne-=J.t),ne=j?j.y[1]-ne/J.h:1-ne/J.h)),O[W][f+1]=Q,O[W][f+2]=ne)}y[p].push(O[W].slice())}}return y},z.pointsOnRectangle=function(a){if(a.length!==5)return!1;for(var i=1;i<3;i++)if(!r(a[0][i]-a[1][i],a[3][i]-a[2][i])||!r(a[0][i]-a[3][i],a[1][i]-a[2][i]))return!1;return!(!r(a[0][1],a[1][1])&&!r(a[0][1],a[3][1])||!(n(a[0],a[1])*n(a[0],a[3])))},z.pointsOnEllipse=function(a){var i=a.length;if(i!==l+1)return!1;i=l;for(var u=0;u<i;u++){var h=(2*i-u)%i,f=(i/2+h)%i,x=(i/2+u)%i;if(!r(n(a[u],a[x]),n(a[h],a[f])))return!1}return!0},z.handleEllipse=function(a,i,u){if(!a)return[i,u];var h=z.ellipseOver({x0:i[0],y0:i[1],x1:u[0],y1:u[1]}),f=(h.x1+h.x0)/2,x=(h.y1+h.y0)/2,v=(h.x1-h.x0)/2,g=(h.y1-h.y0)/2;v||(v=g/=T),g||(g=v/=T);for(var y=[],p=0;p<l;p++){var m=2*p*Math.PI/l;y.push([f+v*Math.cos(m),x+g*Math.sin(m)])}return y},z.ellipseOver=function(a){var i=a.x0,u=a.y0,h=a.x1,f=a.y1,x=h-i,v=f-u,g=((i-=x)+h)/2,y=((u-=v)+f)/2;return{x0:g-(x*=T),y0:y-(v*=T),x1:g+x,y1:y+v}},z.fixDatesForPaths=function(a,i,u){var h=i.type==="date",f=u.type==="date";if(!h&&!f)return a;for(var x=0;x<a.length;x++)for(var v=0;v<a[x].length;v++)for(var g=0;g+2<a[x][v].length;g+=2)h&&(a[x][v][g+1]=a[x][v][g+1].replace(" ","_")),f&&(a[x][v][g+2]=a[x][v][g+2].replace(" ","_"));return a}},90551:function(K,z,e){var S=e(64505),k=S.drawMode,l=S.openMode,T=e(89995),b=T.i000,d=T.i090,s=T.i180,t=T.i270,o=T.cos45,r=T.sin45,n=e(75549),a=n.p2r,i=n.r2p,u=e(51873).clearOutline,h=e(60165),f=h.readPaths,x=h.writePaths,v=h.ellipseOver,g=h.fixDatesForPaths;K.exports=function(y,p){if(y.length){var m=y[0][0];if(m){var w=m.getAttribute("d"),c=p.gd,M=c._fullLayout.newshape,_=p.plotinfo,E=_.xaxis,L=_.yaxis,C=!!_.domain||!_.xaxis,O=!!_.domain||!_.yaxis,I=p.isActiveShape,N=p.dragmode,R=(c.layout||{}).shapes||[];if(!k(N)&&I!==void 0){var V=c._fullLayout._activeShapeIndex;if(V<R.length)switch(c._fullLayout.shapes[V].type){case"rect":N="drawrect";break;case"circle":N="drawcircle";break;case"line":N="drawline";break;case"path":var F=R[V].path||"";N=F[F.length-1]==="Z"?"drawclosedpath":"drawopenpath"}}var D,U=l(N),j=f(w,c,_,I),J={editable:!0,label:M.label,xref:C?"paper":E._id,yref:O?"paper":L._id,layer:M.layer,opacity:M.opacity,line:{color:M.line.color,width:M.line.width,dash:M.line.dash}};if(U||(J.fillcolor=M.fillcolor,J.fillrule=M.fillrule),j.length===1&&(D=j[0]),D&&D.length===5&&N==="drawrect")J.type="rect",J.x0=D[0][1],J.y0=D[0][2],J.x1=D[2][1],J.y1=D[2][2];else if(D&&N==="drawline")J.type="line",J.x0=D[0][1],J.y0=D[0][2],J.x1=D[1][1],J.y1=D[1][2];else if(D&&N==="drawcircle"){J.type="circle";var X=D[b][1],Z=D[d][1],Y=D[s][1],W=D[t][1],Q=D[b][2],ne=D[d][2],re=D[s][2],ie=D[t][2],se=_.xaxis&&(_.xaxis.type==="date"||_.xaxis.type==="log"),ge=_.yaxis&&(_.yaxis.type==="date"||_.yaxis.type==="log");se&&(X=i(_.xaxis,X),Z=i(_.xaxis,Z),Y=i(_.xaxis,Y),W=i(_.xaxis,W)),ge&&(Q=i(_.yaxis,Q),ne=i(_.yaxis,ne),re=i(_.yaxis,re),ie=i(_.yaxis,ie));var ue=(Z+W)/2,ce=(Q+re)/2,le=v({x0:ue,y0:ce,x1:ue+(W-Z+Y-X)/2*o,y1:ce+(ie-ne+re-Q)/2*r});se&&(le.x0=a(_.xaxis,le.x0),le.x1=a(_.xaxis,le.x1)),ge&&(le.y0=a(_.yaxis,le.y0),le.y1=a(_.yaxis,le.y1)),J.x0=le.x0,J.y0=le.y0,J.x1=le.x1,J.y1=le.y1}else J.type="path",E&&L&&g(j,E,L),J.path=x(j),D=null;u(c);for(var de=p.editHelpers,Ce=(de||{}).modifyItem,xe=[],_e=0;_e<R.length;_e++){var we=c._fullLayout.shapes[_e];if(xe[_e]=we._input,I!==void 0&&_e===c._fullLayout._activeShapeIndex){var Ae=J;switch(we.type){case"line":case"rect":case"circle":Ce("x0",Ae.x0),Ce("x1",Ae.x1),Ce("y0",Ae.y0),Ce("y1",Ae.y1);break;case"path":Ce("path",Ae.path)}}}return I===void 0?(xe.push(J),xe):de?de.getUpdateObj():{}}}}},51873:function(K){K.exports={clearOutlineControllers:function(z){var e=z._fullLayout._zoomlayer;e&&e.selectAll(".outline-controllers").remove()},clearOutline:function(z){var e=z._fullLayout._zoomlayer;e&&e.selectAll(".select-outline").remove(),z._fullLayout._outlining=!1}}},30477:function(K,z,e){var S=e(21459),k=e(71828),l=e(89298);z.rangeToShapePosition=function(T){return T.type==="log"?T.r2d:function(b){return b}},z.shapePositionToRange=function(T){return T.type==="log"?T.d2r:function(b){return b}},z.decodeDate=function(T){return function(b){return b.replace&&(b=b.replace("_"," ")),T(b)}},z.encodeDate=function(T){return function(b){return T(b).replace(" ","_")}},z.extractPathCoords=function(T,b,d){var s=[];return T.match(S.segmentRE).forEach(function(t){var o=b[t.charAt(0)].drawn;if(o!==void 0){var r=t.substr(1).match(S.paramRE);if(r&&!(r.length<o)){var n=r[o],a=d?n:k.cleanNumber(n);s.push(a)}}}),s},z.getDataToPixel=function(T,b,d,s){var t,o=T._fullLayout._size;if(b)if(s==="domain")t=function(n){return b._length*(d?1-n:n)+b._offset};else{var r=z.shapePositionToRange(b);t=function(n){return b._offset+b.r2p(r(n,!0))},b.type==="date"&&(t=z.decodeDate(t))}else t=d?function(n){return o.t+o.h*(1-n)}:function(n){return o.l+o.w*n};return t},z.getPixelToData=function(T,b,d,s){var t,o=T._fullLayout._size;if(b)if(s==="domain")t=function(n){var a=(n-b._offset)/b._length;return d?1-a:a};else{var r=z.rangeToShapePosition(b);t=function(n){return r(b.p2r(n-b._offset))}}else t=d?function(n){return 1-(n-o.t)/o.h}:function(n){return(n-o.l)/o.w};return t},z.roundPositionForSharpStrokeRendering=function(T,b){var d=Math.round(b%2)===1,s=Math.round(T);return d?s+.5:s},z.makeShapesOptionsAndPlotinfo=function(T,b){var d=T._fullLayout.shapes[b]||{},s=T._fullLayout._plots[d.xref+d.yref];return s?s._hadPlotinfo=!0:(s={},d.xref&&d.xref!=="paper"&&(s.xaxis=T._fullLayout[d.xref+"axis"]),d.yref&&d.yref!=="paper"&&(s.yaxis=T._fullLayout[d.yref+"axis"])),s.xsizemode=d.xsizemode,s.ysizemode=d.ysizemode,s.xanchor=d.xanchor,s.yanchor=d.yanchor,{options:d,plotinfo:s}},z.makeSelectionsOptionsAndPlotinfo=function(T,b){var d=T._fullLayout.selections[b]||{},s=T._fullLayout._plots[d.xref+d.yref];return s?s._hadPlotinfo=!0:(s={},d.xref&&(s.xaxis=T._fullLayout[d.xref+"axis"]),d.yref&&(s.yaxis=T._fullLayout[d.yref+"axis"])),{options:d,plotinfo:s}},z.getPathString=function(T,b){var d,s,t,o,r,n,a,i,u=b.type,h=l.getRefType(b.xref),f=l.getRefType(b.yref),x=l.getFromId(T,b.xref),v=l.getFromId(T,b.yref),g=T._fullLayout._size;if(x?h==="domain"?s=function(L){return x._offset+x._length*L}:(d=z.shapePositionToRange(x),s=function(L){return x._offset+x.r2p(d(L,!0))}):s=function(L){return g.l+g.w*L},v?f==="domain"?o=function(L){return v._offset+v._length*(1-L)}:(t=z.shapePositionToRange(v),o=function(L){return v._offset+v.r2p(t(L,!0))}):o=function(L){return g.t+g.h*(1-L)},u==="path")return x&&x.type==="date"&&(s=z.decodeDate(s)),v&&v.type==="date"&&(o=z.decodeDate(o)),function(L,C,O){var I=L.path,N=L.xsizemode,R=L.ysizemode,V=L.xanchor,F=L.yanchor;return I.replace(S.segmentRE,function(D){var U=0,j=D.charAt(0),J=S.paramIsX[j],X=S.paramIsY[j],Z=S.numParams[j],Y=D.substr(1).replace(S.paramRE,function(W){return J[U]?W=N==="pixel"?C(V)+Number(W):C(W):X[U]&&(W=R==="pixel"?O(F)-Number(W):O(W)),++U>Z&&(W="X"),W});return U>Z&&(Y=Y.replace(/[\s,]*X.*/,""),k.log("Ignoring extra params in segment "+D)),j+Y})}(b,s,o);if(b.xsizemode==="pixel"){var y=s(b.xanchor);r=y+b.x0,n=y+b.x1}else r=s(b.x0),n=s(b.x1);if(b.ysizemode==="pixel"){var p=o(b.yanchor);a=p-b.y0,i=p-b.y1}else a=o(b.y0),i=o(b.y1);if(u==="line")return"M"+r+","+a+"L"+n+","+i;if(u==="rect")return"M"+r+","+a+"H"+n+"V"+i+"H"+r+"Z";var m=(r+n)/2,w=(a+i)/2,c=Math.abs(m-r),M=Math.abs(w-a),_="A"+c+","+M,E=m+c+","+w;return"M"+E+_+" 0 1,1 "+m+","+(w-M)+_+" 0 0,1 "+E+"Z"}},89853:function(K,z,e){var S=e(34031);K.exports={moduleType:"component",name:"shapes",layoutAttributes:e(89827),supplyLayoutDefaults:e(84726),supplyDrawNewShapeDefaults:e(45547),includeBasePlot:e(76325)("shapes"),calcAutorange:e(5627),draw:S.draw,drawOne:S.drawOne}},37281:function(K){function z(l,T){return T?T.d2l(l):l}function e(l,T){return T?T.l2d(l):l}function S(l,T){return z(l.x1,T)-z(l.x0,T)}function k(l,T,b){return z(l.y1,b)-z(l.y0,b)}K.exports={x0:function(l){return l.x0},x1:function(l){return l.x1},y0:function(l){return l.y0},y1:function(l){return l.y1},slope:function(l,T,b){return l.type!=="line"?void 0:k(l,0,b)/S(l,T)},dx:S,dy:k,width:function(l,T){return Math.abs(S(l,T))},height:function(l,T,b){return Math.abs(k(l,0,b))},length:function(l,T,b){return l.type!=="line"?void 0:Math.sqrt(Math.pow(S(l,T),2)+Math.pow(k(l,0,b),2))},xcenter:function(l,T){return e((z(l.x1,T)+z(l.x0,T))/2,T)},ycenter:function(l,T,b){return e((z(l.y1,b)+z(l.y0,b))/2,b)}}},75067:function(K,z,e){var S=e(41940),k=e(35025),l=e(1426).extendDeepAll,T=e(30962).overrideAll,b=e(85594),d=e(44467).templatedArray,s=e(98292),t=d("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});K.exports=T(d("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:t,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:l(k({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:b.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:S({})},font:S({}),activebgcolor:{valType:"color",dflt:s.gripBgActiveColor},bgcolor:{valType:"color",dflt:s.railBgColor},bordercolor:{valType:"color",dflt:s.railBorderColor},borderwidth:{valType:"number",min:0,dflt:s.railBorderWidth},ticklen:{valType:"number",min:0,dflt:s.tickLength},tickcolor:{valType:"color",dflt:s.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:s.minorTickLength}}),"arraydraw","from-root")},98292:function(K){K.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},12343:function(K,z,e){var S=e(71828),k=e(85501),l=e(75067),T=e(98292).name,b=l.steps;function d(t,o,r){function n(f,x){return S.coerce(t,o,l,f,x)}for(var a=k(t,o,{name:"steps",handleItemDefaults:s}),i=0,u=0;u<a.length;u++)a[u].visible&&i++;if(i<2?o.visible=!1:n("visible")){o._stepCount=i;var h=o._visibleSteps=S.filterVisible(a);(a[n("active")]||{}).visible||(o.active=h[0]._index),n("x"),n("y"),S.noneOrAll(t,o,["x","y"]),n("xanchor"),n("yanchor"),n("len"),n("lenmode"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),S.coerceFont(n,"font",r.font),n("currentvalue.visible")&&(n("currentvalue.xanchor"),n("currentvalue.prefix"),n("currentvalue.suffix"),n("currentvalue.offset"),S.coerceFont(n,"currentvalue.font",o.font)),n("transition.duration"),n("transition.easing"),n("bgcolor"),n("activebgcolor"),n("bordercolor"),n("borderwidth"),n("ticklen"),n("tickwidth"),n("tickcolor"),n("minorticklen")}}function s(t,o){function r(a,i){return S.coerce(t,o,b,a,i)}if(t.method==="skip"||Array.isArray(t.args)?r("visible"):o.visible=!1){r("method"),r("args");var n=r("label","step-"+o._index);r("value",n),r("execute")}}K.exports=function(t,o){k(t,o,{name:T,handleItemDefaults:d})}},44504:function(K,z,e){var S=e(39898),k=e(74875),l=e(7901),T=e(91424),b=e(71828),d=b.strTranslate,s=e(63893),t=e(44467).arrayEditor,o=e(98292),r=e(18783),n=r.LINE_SPACING,a=r.FROM_TL,i=r.FROM_BR;function u(O){return o.autoMarginIdRoot+O._index}function h(O){return O._index}function f(O,I){var N=T.tester.selectAll("g."+o.labelGroupClass).data(I._visibleSteps);N.enter().append("g").classed(o.labelGroupClass,!0);var R=0,V=0;N.each(function(W){var Q=g(S.select(this),{step:W},I).node();if(Q){var ne=T.bBox(Q);V=Math.max(V,ne.height),R=Math.max(R,ne.width)}}),N.remove();var F=I._dims={};F.inputAreaWidth=Math.max(o.railWidth,o.gripHeight);var D=O._fullLayout._size;F.lx=D.l+D.w*I.x,F.ly=D.t+D.h*(1-I.y),I.lenmode==="fraction"?F.outerLength=Math.round(D.w*I.len):F.outerLength=I.len,F.inputAreaStart=0,F.inputAreaLength=Math.round(F.outerLength-I.pad.l-I.pad.r);var U=(F.inputAreaLength-2*o.stepInset)/(I._stepCount-1),j=R+o.labelPadding;if(F.labelStride=Math.max(1,Math.ceil(j/U)),F.labelHeight=V,F.currentValueMaxWidth=0,F.currentValueHeight=0,F.currentValueTotalHeight=0,F.currentValueMaxLines=1,I.currentvalue.visible){var J=T.tester.append("g");N.each(function(W){var Q=x(J,I,W.label),ne=Q.node()&&T.bBox(Q.node())||{width:0,height:0},re=s.lineCount(Q);F.currentValueMaxWidth=Math.max(F.currentValueMaxWidth,Math.ceil(ne.width)),F.currentValueHeight=Math.max(F.currentValueHeight,Math.ceil(ne.height)),F.currentValueMaxLines=Math.max(F.currentValueMaxLines,re)}),F.currentValueTotalHeight=F.currentValueHeight+I.currentvalue.offset,J.remove()}F.height=F.currentValueTotalHeight+o.tickOffset+I.ticklen+o.labelOffset+F.labelHeight+I.pad.t+I.pad.b;var X="left";b.isRightAnchor(I)&&(F.lx-=F.outerLength,X="right"),b.isCenterAnchor(I)&&(F.lx-=F.outerLength/2,X="center");var Z="top";b.isBottomAnchor(I)&&(F.ly-=F.height,Z="bottom"),b.isMiddleAnchor(I)&&(F.ly-=F.height/2,Z="middle"),F.outerLength=Math.ceil(F.outerLength),F.height=Math.ceil(F.height),F.lx=Math.round(F.lx),F.ly=Math.round(F.ly);var Y={y:I.y,b:F.height*i[Z],t:F.height*a[Z]};I.lenmode==="fraction"?(Y.l=0,Y.xl=I.x-I.len*a[X],Y.r=0,Y.xr=I.x+I.len*i[X]):(Y.x=I.x,Y.l=F.outerLength*a[X],Y.r=F.outerLength*i[X]),k.autoMargin(O,u(I),Y)}function x(O,I,N){if(I.currentvalue.visible){var R,V,F=I._dims;switch(I.currentvalue.xanchor){case"right":R=F.inputAreaLength-o.currentValueInset-F.currentValueMaxWidth,V="left";break;case"center":R=.5*F.inputAreaLength,V="middle";break;default:R=o.currentValueInset,V="left"}var D=b.ensureSingle(O,"text",o.labelClass,function(Y){Y.attr({"text-anchor":V,"data-notex":1})}),U=I.currentvalue.prefix?I.currentvalue.prefix:"";if(typeof N=="string")U+=N;else{var j=I.steps[I.active].label,J=I._gd._fullLayout._meta;J&&(j=b.templateString(j,J)),U+=j}I.currentvalue.suffix&&(U+=I.currentvalue.suffix),D.call(T.font,I.currentvalue.font).text(U).call(s.convertToTspans,I._gd);var X=s.lineCount(D),Z=(F.currentValueMaxLines+1-X)*I.currentvalue.font.size*n;return s.positionText(D,R,Z),D}}function v(O,I,N){b.ensureSingle(O,"rect",o.gripRectClass,function(R){R.call(w,I,O,N).style("pointer-events","all")}).attr({width:o.gripWidth,height:o.gripHeight,rx:o.gripRadius,ry:o.gripRadius}).call(l.stroke,N.bordercolor).call(l.fill,N.bgcolor).style("stroke-width",N.borderwidth+"px")}function g(O,I,N){var R=b.ensureSingle(O,"text",o.labelClass,function(D){D.attr({"text-anchor":"middle","data-notex":1})}),V=I.step.label,F=N._gd._fullLayout._meta;return F&&(V=b.templateString(V,F)),R.call(T.font,N.font).text(V).call(s.convertToTspans,N._gd),R}function y(O,I){var N=b.ensureSingle(O,"g",o.labelsClass),R=I._dims,V=N.selectAll("g."+o.labelGroupClass).data(R.labelSteps);V.enter().append("g").classed(o.labelGroupClass,!0),V.exit().remove(),V.each(function(F){var D=S.select(this);D.call(g,F,I),T.setTranslate(D,_(I,F.fraction),o.tickOffset+I.ticklen+I.font.size*n+o.labelOffset+R.currentValueTotalHeight)})}function p(O,I,N,R,V){var F=Math.round(R*(N._stepCount-1)),D=N._visibleSteps[F]._index;D!==N.active&&m(O,I,N,D,!0,V)}function m(O,I,N,R,V,F){var D=N.active;N.active=R,t(O.layout,o.name,N).applyUpdate("active",R);var U=N.steps[N.active];I.call(M,N,F),I.call(x,N),O.emit("plotly_sliderchange",{slider:N,step:N.steps[N.active],interaction:V,previousActive:D}),U&&U.method&&V&&(I._nextMethod?(I._nextMethod.step=U,I._nextMethod.doCallback=V,I._nextMethod.doTransition=F):(I._nextMethod={step:U,doCallback:V,doTransition:F},I._nextMethodRaf=window.requestAnimationFrame(function(){var j=I._nextMethod.step;j.method&&(j.execute&&k.executeAPICommand(O,j.method,j.args),I._nextMethod=null,I._nextMethodRaf=null)})))}function w(O,I,N){if(!I._context.staticPlot){var R=N.node(),V=S.select(I);O.on("mousedown",D),O.on("touchstart",D)}function F(){return N.data()[0]}function D(){var U=F();I.emit("plotly_sliderstart",{slider:U});var j=N.select("."+o.gripRectClass);S.event.stopPropagation(),S.event.preventDefault(),j.call(l.fill,U.activebgcolor);var J=E(U,S.mouse(R)[0]);function X(){var Y=F(),W=E(Y,S.mouse(R)[0]);p(I,N,Y,W,!1)}function Z(){var Y=F();Y._dragging=!1,j.call(l.fill,Y.bgcolor),V.on("mouseup",null),V.on("mousemove",null),V.on("touchend",null),V.on("touchmove",null),I.emit("plotly_sliderend",{slider:Y,step:Y.steps[Y.active]})}p(I,N,U,J,!0),U._dragging=!0,V.on("mousemove",X),V.on("touchmove",X),V.on("mouseup",Z),V.on("touchend",Z)}}function c(O,I){var N=O.selectAll("rect."+o.tickRectClass).data(I._visibleSteps),R=I._dims;N.enter().append("rect").classed(o.tickRectClass,!0),N.exit().remove(),N.attr({width:I.tickwidth+"px","shape-rendering":"crispEdges"}),N.each(function(V,F){var D=F%R.labelStride==0,U=S.select(this);U.attr({height:D?I.ticklen:I.minorticklen}).call(l.fill,I.tickcolor),T.setTranslate(U,_(I,F/(I._stepCount-1))-.5*I.tickwidth,(D?o.tickOffset:o.minorTickOffset)+R.currentValueTotalHeight)})}function M(O,I,N){for(var R=O.select("rect."+o.gripRectClass),V=0,F=0;F<I._stepCount;F++)if(I._visibleSteps[F]._index===I.active){V=F;break}var D=_(I,V/(I._stepCount-1));if(!I._invokingCommand){var U=R;N&&I.transition.duration>0&&(U=U.transition().duration(I.transition.duration).ease(I.transition.easing)),U.attr("transform",d(D-.5*o.gripWidth,I._dims.currentValueTotalHeight))}}function _(O,I){var N=O._dims;return N.inputAreaStart+o.stepInset+(N.inputAreaLength-2*o.stepInset)*Math.min(1,Math.max(0,I))}function E(O,I){var N=O._dims;return Math.min(1,Math.max(0,(I-o.stepInset-N.inputAreaStart)/(N.inputAreaLength-2*o.stepInset-2*N.inputAreaStart)))}function L(O,I,N){var R=N._dims,V=b.ensureSingle(O,"rect",o.railTouchRectClass,function(F){F.call(w,I,O,N).style("pointer-events","all")});V.attr({width:R.inputAreaLength,height:Math.max(R.inputAreaWidth,o.tickOffset+N.ticklen+R.labelHeight)}).call(l.fill,N.bgcolor).attr("opacity",0),T.setTranslate(V,0,R.currentValueTotalHeight)}function C(O,I){var N=I._dims,R=N.inputAreaLength-2*o.railInset,V=b.ensureSingle(O,"rect",o.railRectClass);V.attr({width:R,height:o.railWidth,rx:o.railRadius,ry:o.railRadius,"shape-rendering":"crispEdges"}).call(l.stroke,I.bordercolor).call(l.fill,I.bgcolor).style("stroke-width",I.borderwidth+"px"),T.setTranslate(V,o.railInset,.5*(N.inputAreaWidth-o.railWidth)+N.currentValueTotalHeight)}K.exports=function(O){var I=O._context.staticPlot,N=O._fullLayout,R=function(J,X){for(var Z=J[o.name],Y=[],W=0;W<Z.length;W++){var Q=Z[W];Q.visible&&(Q._gd=X,Y.push(Q))}return Y}(N,O),V=N._infolayer.selectAll("g."+o.containerClassName).data(R.length>0?[0]:[]);function F(J){J._commandObserver&&(J._commandObserver.remove(),delete J._commandObserver),k.autoMargin(O,u(J))}if(V.enter().append("g").classed(o.containerClassName,!0).style("cursor",I?null:"ew-resize"),V.exit().each(function(){S.select(this).selectAll("g."+o.groupClassName).each(F)}).remove(),R.length!==0){var D=V.selectAll("g."+o.groupClassName).data(R,h);D.enter().append("g").classed(o.groupClassName,!0),D.exit().each(F).remove();for(var U=0;U<R.length;U++){var j=R[U];f(O,j)}D.each(function(J){var X=S.select(this);(function(Z){var Y=Z._dims;Y.labelSteps=[];for(var W=Z._stepCount,Q=0;Q<W;Q+=Y.labelStride)Y.labelSteps.push({fraction:Q/(W-1),step:Z._visibleSteps[Q]})})(J),k.manageCommandObserver(O,J,J._visibleSteps,function(Z){var Y=X.data()[0];Y.active!==Z.index&&(Y._dragging||m(O,X,Y,Z.index,!1,!0))}),function(Z,Y,W){(W.steps[W.active]||{}).visible||(W.active=W._visibleSteps[0]._index),Y.call(x,W).call(C,W).call(y,W).call(c,W).call(L,Z,W).call(v,Z,W);var Q=W._dims;T.setTranslate(Y,Q.lx+W.pad.l,Q.ly+W.pad.t),Y.call(M,W,!1),Y.call(x,W)}(O,S.select(this),J)})}}},23243:function(K,z,e){var S=e(98292);K.exports={moduleType:"component",name:S.name,layoutAttributes:e(75067),supplyLayoutDefaults:e(12343),draw:e(44504)}},92998:function(K,z,e){var S=e(39898),k=e(92770),l=e(74875),T=e(73972),b=e(71828),d=b.strTranslate,s=e(91424),t=e(7901),o=e(63893),r=e(37822),n=e(18783).OPPOSITE_SIDE,a=/ [XY][0-9]* /;K.exports={draw:function(i,u,h){var f,x=h.propContainer,v=h.propName,g=h.placeholder,y=h.traceIndex,p=h.avoid||{},m=h.attributes,w=h.transform,c=h.containerGroup,M=i._fullLayout,_=1,E=!1,L=x.title,C=(L&&L.text?L.text:"").trim(),O=L&&L.font?L.font:{},I=O.family,N=O.size,R=O.color;v==="title.text"?f="titleText":v.indexOf("axis")!==-1?f="axisTitleText":v.indexOf(!0)&&(f="colorbarTitleText");var V=i._context.edits[f];C===""?_=0:C.replace(a," % ")===g.replace(a," % ")&&(_=.2,E=!0,V||(C="")),h._meta?C=b.templateString(C,h._meta):M._meta&&(C=b.templateString(C,M._meta));var F,D=C||V;c||(c=b.ensureSingle(M._infolayer,"g","g-"+u),F=M._hColorbarMoveTitle);var U=c.selectAll("text").data(D?[0]:[]);if(U.enter().append("text"),U.text(C).attr("class",u),U.exit().remove(),!D)return c;function j(Z){b.syncOrAsync([J,X],Z)}function J(Z){var Y;return!w&&F&&(w={}),w?(Y="",w.rotate&&(Y+="rotate("+[w.rotate,m.x,m.y]+")"),(w.offset||F)&&(Y+=d(0,(w.offset||0)-(F||0)))):Y=null,Z.attr("transform",Y),Z.style({"font-family":I,"font-size":S.round(N,2)+"px",fill:t.rgb(R),opacity:_*t.opacity(R),"font-weight":l.fontWeight}).attr(m).call(o.convertToTspans,i),l.previousPromises(i)}function X(Z){var Y=S.select(Z.node().parentNode);if(p&&p.selection&&p.side&&C){Y.attr("transform",null);var W=n[p.side],Q=p.side==="left"||p.side==="top"?-1:1,ne=k(p.pad)?p.pad:2,re=s.bBox(Y.node()),ie={t:0,b:0,l:0,r:0},se=i._fullLayout._reservedMargin;for(var ge in se)for(var ue in se[ge]){var ce=se[ge][ue];ie[ue]=Math.max(ie[ue],ce)}var le={left:ie.l,top:ie.t,right:M.width-ie.r,bottom:M.height-ie.b},de=p.maxShift||Q*(le[p.side]-re[p.side]),Ce=0;if(de<0)Ce=de;else{var xe=p.offsetLeft||0,_e=p.offsetTop||0;re.left-=xe,re.right-=xe,re.top-=_e,re.bottom-=_e,p.selection.each(function(){var Ae=s.bBox(this);b.bBoxIntersect(re,Ae,ne)&&(Ce=Math.max(Ce,Q*(Ae[p.side]-re[W])+ne))}),Ce=Math.min(de,Ce),x._titleScoot=Math.abs(Ce)}if(Ce>0||de<0){var we={left:[-Ce,0],right:[Ce,0],top:[0,-Ce],bottom:[0,Ce]}[p.side];Y.attr("transform",d(we[0],we[1]))}}}return U.call(j),V&&(C?U.on(".opacity",null):(_=0,E=!0,U.text(g).on("mouseover.opacity",function(){S.select(this).transition().duration(r.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){S.select(this).transition().duration(r.HIDE_PLACEHOLDER).style("opacity",0)})),U.call(o.makeEditable,{gd:i}).on("edit",function(Z){y!==void 0?T.call("_guiRestyle",i,v,Z,y):T.call("_guiRelayout",i,v,Z)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(j)}).on("input",function(Z){this.text(Z||" ").call(o.positionText,m.x,m.y)})),U.classed("js-placeholder",E),c}}},7163:function(K,z,e){var S=e(41940),k=e(22399),l=e(1426).extendFlat,T=e(30962).overrideAll,b=e(35025),d=e(44467).templatedArray,s=d("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});K.exports=T(d("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:s,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:l(b({editType:"arraydraw"}),{}),font:S({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:k.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},75909:function(K){K.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}},64897:function(K,z,e){var S=e(71828),k=e(85501),l=e(7163),T=e(75909).name,b=l.buttons;function d(t,o,r){function n(a,i){return S.coerce(t,o,l,a,i)}n("visible",k(t,o,{name:"buttons",handleItemDefaults:s}).length>0)&&(n("active"),n("direction"),n("type"),n("showactive"),n("x"),n("y"),S.noneOrAll(t,o,["x","y"]),n("xanchor"),n("yanchor"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),S.coerceFont(n,"font",r.font),n("bgcolor",r.paper_bgcolor),n("bordercolor"),n("borderwidth"))}function s(t,o){function r(n,a){return S.coerce(t,o,b,n,a)}r("visible",t.method==="skip"||Array.isArray(t.args))&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}K.exports=function(t,o){k(t,o,{name:T,handleItemDefaults:d})}},13689:function(K,z,e){var S=e(39898),k=e(74875),l=e(7901),T=e(91424),b=e(71828),d=e(63893),s=e(44467).arrayEditor,t=e(18783).LINE_SPACING,o=e(75909),r=e(25849);function n(_){return _._index}function a(_,E){return+_.attr(o.menuIndexAttrName)===E._index}function i(_,E,L,C,O,I,N,R){E.active=N,s(_.layout,o.name,E).applyUpdate("active",N),E.type==="buttons"?h(_,C,null,null,E):E.type==="dropdown"&&(O.attr(o.menuIndexAttrName,"-1"),u(_,C,O,I,E),R||h(_,C,O,I,E))}function u(_,E,L,C,O){var I=b.ensureSingle(E,"g",o.headerClassName,function(U){U.style("pointer-events","all")}),N=O._dims,R=O.active,V=O.buttons[R]||o.blankHeaderOpts,F={y:O.pad.t,yPad:0,x:O.pad.l,xPad:0,index:0},D={width:N.headerWidth,height:N.headerHeight};I.call(f,O,V,_).call(c,O,F,D),b.ensureSingle(E,"text",o.headerArrowClassName,function(U){U.attr("text-anchor","end").call(T.font,O.font).text(o.arrowSymbol[O.direction])}).attr({x:N.headerWidth-o.arrowOffsetX+O.pad.l,y:N.headerHeight/2+o.textOffsetY+O.pad.t}),I.on("click",function(){L.call(M,String(a(L,O)?-1:O._index)),h(_,E,L,C,O)}),I.on("mouseover",function(){I.call(y)}),I.on("mouseout",function(){I.call(p,O)}),T.setTranslate(E,N.lx,N.ly)}function h(_,E,L,C,O){L||(L=E).attr("pointer-events","all");var I=function(Y){return+Y.attr(o.menuIndexAttrName)==-1}(L)&&O.type!=="buttons"?[]:O.buttons,N=O.type==="dropdown"?o.dropdownButtonClassName:o.buttonClassName,R=L.selectAll("g."+N).data(b.filterVisible(I)),V=R.enter().append("g").classed(N,!0),F=R.exit();O.type==="dropdown"?(V.attr("opacity","0").transition().attr("opacity","1"),F.transition().attr("opacity","0").remove()):F.remove();var D=0,U=0,j=O._dims,J=["up","down"].indexOf(O.direction)!==-1;O.type==="dropdown"&&(J?U=j.headerHeight+o.gapButtonHeader:D=j.headerWidth+o.gapButtonHeader),O.type==="dropdown"&&O.direction==="up"&&(U=-o.gapButtonHeader+o.gapButton-j.openHeight),O.type==="dropdown"&&O.direction==="left"&&(D=-o.gapButtonHeader+o.gapButton-j.openWidth);var X={x:j.lx+D+O.pad.l,y:j.ly+U+O.pad.t,yPad:o.gapButton,xPad:o.gapButton,index:0},Z={l:X.x+O.borderwidth,t:X.y+O.borderwidth};R.each(function(Y,W){var Q=S.select(this);Q.call(f,O,Y,_).call(c,O,X),Q.on("click",function(){S.event.defaultPrevented||(Y.execute&&(Y.args2&&O.active===W?(i(_,O,0,E,L,C,-1),k.executeAPICommand(_,Y.method,Y.args2)):(i(_,O,0,E,L,C,W),k.executeAPICommand(_,Y.method,Y.args))),_.emit("plotly_buttonclicked",{menu:O,button:Y,active:O.active}))}),Q.on("mouseover",function(){Q.call(y)}),Q.on("mouseout",function(){Q.call(p,O),R.call(g,O)})}),R.call(g,O),J?(Z.w=Math.max(j.openWidth,j.headerWidth),Z.h=X.y-Z.t):(Z.w=X.x-Z.l,Z.h=Math.max(j.openHeight,j.headerHeight)),Z.direction=O.direction,C&&(R.size()?function(Y,W,Q,ne,re,ie){var se,ge,ue,ce=re.direction,le=ce==="up"||ce==="down",de=re._dims,Ce=re.active;if(le)for(ge=0,ue=0;ue<Ce;ue++)ge+=de.heights[ue]+o.gapButton;else for(se=0,ue=0;ue<Ce;ue++)se+=de.widths[ue]+o.gapButton;ne.enable(ie,se,ge),ne.hbar&&ne.hbar.attr("opacity","0").transition().attr("opacity","1"),ne.vbar&&ne.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,C,O,Z):function(Y){var W=!!Y.hbar,Q=!!Y.vbar;W&&Y.hbar.transition().attr("opacity","0").each("end",function(){W=!1,Q||Y.disable()}),Q&&Y.vbar.transition().attr("opacity","0").each("end",function(){Q=!1,W||Y.disable()})}(C))}function f(_,E,L,C){_.call(x,E).call(v,E,L,C)}function x(_,E){b.ensureSingle(_,"rect",o.itemRectClassName,function(L){L.attr({rx:o.rx,ry:o.ry,"shape-rendering":"crispEdges"})}).call(l.stroke,E.bordercolor).call(l.fill,E.bgcolor).style("stroke-width",E.borderwidth+"px")}function v(_,E,L,C){var O=b.ensureSingle(_,"text",o.itemTextClassName,function(R){R.attr({"text-anchor":"start","data-notex":1})}),I=L.label,N=C._fullLayout._meta;N&&(I=b.templateString(I,N)),O.call(T.font,E.font).text(I).call(d.convertToTspans,C)}function g(_,E){var L=E.active;_.each(function(C,O){var I=S.select(this);O===L&&E.showactive&&I.select("rect."+o.itemRectClassName).call(l.fill,o.activeColor)})}function y(_){_.select("rect."+o.itemRectClassName).call(l.fill,o.hoverColor)}function p(_,E){_.select("rect."+o.itemRectClassName).call(l.fill,E.bgcolor)}function m(_,E){var L=E._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},C=T.tester.selectAll("g."+o.dropdownButtonClassName).data(b.filterVisible(E.buttons));C.enter().append("g").classed(o.dropdownButtonClassName,!0);var O=["up","down"].indexOf(E.direction)!==-1;C.each(function(D,U){var j=S.select(this);j.call(f,E,D,_);var J=j.select("."+o.itemTextClassName),X=J.node()&&T.bBox(J.node()).width,Z=Math.max(X+o.textPadX,o.minWidth),Y=E.font.size*t,W=d.lineCount(J),Q=Math.max(Y*W,o.minHeight)+o.textOffsetY;Q=Math.ceil(Q),Z=Math.ceil(Z),L.widths[U]=Z,L.heights[U]=Q,L.height1=Math.max(L.height1,Q),L.width1=Math.max(L.width1,Z),O?(L.totalWidth=Math.max(L.totalWidth,Z),L.openWidth=L.totalWidth,L.totalHeight+=Q+o.gapButton,L.openHeight+=Q+o.gapButton):(L.totalWidth+=Z+o.gapButton,L.openWidth+=Z+o.gapButton,L.totalHeight=Math.max(L.totalHeight,Q),L.openHeight=L.totalHeight)}),O?L.totalHeight-=o.gapButton:L.totalWidth-=o.gapButton,L.headerWidth=L.width1+o.arrowPadX,L.headerHeight=L.height1,E.type==="dropdown"&&(O?(L.width1+=o.arrowPadX,L.totalHeight=L.height1):L.totalWidth=L.width1,L.totalWidth+=o.arrowPadX),C.remove();var I=L.totalWidth+E.pad.l+E.pad.r,N=L.totalHeight+E.pad.t+E.pad.b,R=_._fullLayout._size;L.lx=R.l+R.w*E.x,L.ly=R.t+R.h*(1-E.y);var V="left";b.isRightAnchor(E)&&(L.lx-=I,V="right"),b.isCenterAnchor(E)&&(L.lx-=I/2,V="center");var F="top";b.isBottomAnchor(E)&&(L.ly-=N,F="bottom"),b.isMiddleAnchor(E)&&(L.ly-=N/2,F="middle"),L.totalWidth=Math.ceil(L.totalWidth),L.totalHeight=Math.ceil(L.totalHeight),L.lx=Math.round(L.lx),L.ly=Math.round(L.ly),k.autoMargin(_,w(E),{x:E.x,y:E.y,l:I*({right:1,center:.5}[V]||0),r:I*({left:1,center:.5}[V]||0),b:N*({top:1,middle:.5}[F]||0),t:N*({bottom:1,middle:.5}[F]||0)})}function w(_){return o.autoMarginIdRoot+_._index}function c(_,E,L,C){C=C||{};var O=_.select("."+o.itemRectClassName),I=_.select("."+o.itemTextClassName),N=E.borderwidth,R=L.index,V=E._dims;T.setTranslate(_,N+L.x,N+L.y);var F=["up","down"].indexOf(E.direction)!==-1,D=C.height||(F?V.heights[R]:V.height1);O.attr({x:0,y:0,width:C.width||(F?V.width1:V.widths[R]),height:D});var U=E.font.size*t,j=(d.lineCount(I)-1)*U/2;d.positionText(I,o.textOffsetX,D/2-j+o.textOffsetY),F?L.y+=V.heights[R]+L.yPad:L.x+=V.widths[R]+L.xPad,L.index++}function M(_,E){_.attr(o.menuIndexAttrName,E||"-1").selectAll("g."+o.dropdownButtonClassName).remove()}K.exports=function(_){var E=_._fullLayout,L=b.filterVisible(E[o.name]);function C(U){k.autoMargin(_,w(U))}var O=E._menulayer.selectAll("g."+o.containerClassName).data(L.length>0?[0]:[]);if(O.enter().append("g").classed(o.containerClassName,!0).style("cursor","pointer"),O.exit().each(function(){S.select(this).selectAll("g."+o.headerGroupClassName).each(C)}).remove(),L.length!==0){var I=O.selectAll("g."+o.headerGroupClassName).data(L,n);I.enter().append("g").classed(o.headerGroupClassName,!0);for(var N=b.ensureSingle(O,"g",o.dropdownButtonGroupClassName,function(U){U.style("pointer-events","all")}),R=0;R<L.length;R++){var V=L[R];m(_,V)}var F="updatemenus"+E._uid,D=new r(_,N,F);I.enter().size()&&(N.node().parentNode.appendChild(N.node()),N.call(M)),I.exit().each(function(U){N.call(M),C(U)}).remove(),I.each(function(U){var j=S.select(this),J=U.type==="dropdown"?N:null;k.manageCommandObserver(_,U,U.buttons,function(X){i(_,U,U.buttons[X.index],j,J,D,X.index,!0)}),U.type==="dropdown"?(u(_,j,N,D,U),a(N,U)&&h(_,j,N,D,U)):h(_,j,null,null,U)})}}},20763:function(K,z,e){var S=e(75909);K.exports={moduleType:"component",name:S.name,layoutAttributes:e(7163),supplyLayoutDefaults:e(64897),draw:e(13689)}},25849:function(K,z,e){K.exports=b;var S=e(39898),k=e(7901),l=e(91424),T=e(71828);function b(d,s,t){this.gd=d,this.container=s,this.id=t,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}b.barWidth=2,b.barLength=20,b.barRadius=2,b.barPad=1,b.barColor="#808BA4",b.prototype.enable=function(d,s,t){var o=this.gd._fullLayout,r=o.width,n=o.height;this.position=d;var a,i,u,h,f=this.position.l,x=this.position.w,v=this.position.t,g=this.position.h,y=this.position.direction,p=y==="down",m=y==="left",w=y==="up",c=x,M=g;p||m||y==="right"||w||(this.position.direction="down",p=!0),p||w?(i=(a=f)+c,p?(u=v,M=(h=Math.min(u+M,n))-u):M=(h=v+M)-(u=Math.max(h-M,0))):(h=(u=v)+M,m?c=(i=f+c)-(a=Math.max(i-c,0)):(a=f,c=(i=Math.min(a+c,r))-a)),this._box={l:a,t:u,w:c,h:M};var _=x>c,E=b.barLength+2*b.barPad,L=b.barWidth+2*b.barPad,C=f,O=v+g;O+L>n&&(O=n-L);var I=this.container.selectAll("rect.scrollbar-horizontal").data(_?[0]:[]);I.exit().on(".drag",null).remove(),I.enter().append("rect").classed("scrollbar-horizontal",!0).call(k.fill,b.barColor),_?(this.hbar=I.attr({rx:b.barRadius,ry:b.barRadius,x:C,y:O,width:E,height:L}),this._hbarXMin=C+E/2,this._hbarTranslateMax=c-E):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var N=g>M,R=b.barWidth+2*b.barPad,V=b.barLength+2*b.barPad,F=f+x,D=v;F+R>r&&(F=r-R);var U=this.container.selectAll("rect.scrollbar-vertical").data(N?[0]:[]);U.exit().on(".drag",null).remove(),U.enter().append("rect").classed("scrollbar-vertical",!0).call(k.fill,b.barColor),N?(this.vbar=U.attr({rx:b.barRadius,ry:b.barRadius,x:F,y:D,width:R,height:V}),this._vbarYMin=D+V/2,this._vbarTranslateMax=M-V):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var j=this.id,J=a-.5,X=N?i+R+.5:i+.5,Z=u-.5,Y=_?h+L+.5:h+.5,W=o._topdefs.selectAll("#"+j).data(_||N?[0]:[]);if(W.exit().remove(),W.enter().append("clipPath").attr("id",j).append("rect"),_||N?(this._clipRect=W.select("rect").attr({x:Math.floor(J),y:Math.floor(Z),width:Math.ceil(X)-Math.floor(J),height:Math.ceil(Y)-Math.floor(Z)}),this.container.call(l.setClipUrl,j,this.gd),this.bg.attr({x:f,y:v,width:x,height:g})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(l.setClipUrl,null),delete this._clipRect),_||N){var Q=S.behavior.drag().on("dragstart",function(){S.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(Q);var ne=S.behavior.drag().on("dragstart",function(){S.event.sourceEvent.preventDefault(),S.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));_&&this.hbar.on(".drag",null).call(ne),N&&this.vbar.on(".drag",null).call(ne)}this.setTranslate(s,t)},b.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(l.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},b.prototype._onBoxDrag=function(){var d=this.translateX,s=this.translateY;this.hbar&&(d-=S.event.dx),this.vbar&&(s-=S.event.dy),this.setTranslate(d,s)},b.prototype._onBoxWheel=function(){var d=this.translateX,s=this.translateY;this.hbar&&(d+=S.event.deltaY),this.vbar&&(s+=S.event.deltaY),this.setTranslate(d,s)},b.prototype._onBarDrag=function(){var d=this.translateX,s=this.translateY;if(this.hbar){var t=d+this._hbarXMin,o=t+this._hbarTranslateMax;d=(T.constrain(S.event.x,t,o)-t)/(o-t)*(this.position.w-this._box.w)}if(this.vbar){var r=s+this._vbarYMin,n=r+this._vbarTranslateMax;s=(T.constrain(S.event.y,r,n)-r)/(n-r)*(this.position.h-this._box.h)}this.setTranslate(d,s)},b.prototype.setTranslate=function(d,s){var t=this.position.w-this._box.w,o=this.position.h-this._box.h;if(d=T.constrain(d||0,0,t),s=T.constrain(s||0,0,o),this.translateX=d,this.translateY=s,this.container.call(l.setTranslate,this._box.l-this.position.l-d,this._box.t-this.position.t-s),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+d-.5),y:Math.floor(this.position.t+s-.5)}),this.hbar){var r=d/t;this.hbar.call(l.setTranslate,d+r*this._hbarTranslateMax,s)}if(this.vbar){var n=s/o;this.vbar.call(l.setTranslate,d,s+n*this._vbarTranslateMax)}}},18783:function(K){K.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},24695:function(K){K.exports={axisRefDescription:function(z,e,S){return["If set to a",z,"axis id (e.g. *"+z+"* or","*"+z+"2*), the `"+z+"` position refers to a",z,"coordinate. If set to *paper*, the `"+z+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+S+"). If set to a",z,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+z+"2 domain* refers to the domain of the second",z," axis and a",z,"position of 0.5 refers to the","point between the",e,"and the",S,"of the domain of the","second",z,"axis."].join(" ")}}},22372:function(K){K.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"▲"},DECREASING:{COLOR:"#FF4136",SYMBOL:"▼"}}},31562:function(K){K.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},74808:function(K){K.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},29659:function(K){K.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87381:function(K){K.exports={circle:"●","circle-open":"○",square:"■","square-open":"□",diamond:"◆","diamond-open":"◇",cross:"+",x:"❌"}},37822:function(K){K.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},50606:function(K){K.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"−"}},77922:function(K,z){z.xmlns="http://www.w3.org/2000/xmlns/",z.svg="http://www.w3.org/2000/svg",z.xlink="http://www.w3.org/1999/xlink",z.svgAttrs={xmlns:z.svg,"xmlns:xlink":z.xlink}},8729:function(K,z,e){z.version=e(11506).version,e(7417),e(98847);for(var S=e(73972),k=z.register=S.register,l=e(10641),T=Object.keys(l),b=0;b<T.length;b++){var d=T[b];d.charAt(0)!=="_"&&(z[d]=l[d]),k({moduleType:"apiMethod",name:d,fn:l[d]})}k(e(67368)),k([e(2199),e(30211),e(32745),e(2468),e(47322),e(89853),e(68804),e(20763),e(23243),e(13137),e(97218),e(83312),e(37369),e(21081),e(12311),e(64168)]),k([e(92177),e(37815)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(k(window.PlotlyLocales),delete window.PlotlyLocales),z.Icons=e(24255);var s=e(30211),t=e(74875);z.Plots={resize:t.resize,graphJson:t.graphJson,sendDataToCloud:t.sendDataToCloud},z.Fx={hover:s.hover,unhover:s.unhover,loneHover:s.loneHover,loneUnhover:s.loneUnhover},z.Snapshot=e(44511),z.PlotSchema=e(86281)},24255:function(K){K.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},99863:function(K,z){z.isLeftAnchor=function(e){return e.xanchor==="left"||e.xanchor==="auto"&&e.x<=.3333333333333333},z.isCenterAnchor=function(e){return e.xanchor==="center"||e.xanchor==="auto"&&e.x>.3333333333333333&&e.x<.6666666666666666},z.isRightAnchor=function(e){return e.xanchor==="right"||e.xanchor==="auto"&&e.x>=.6666666666666666},z.isTopAnchor=function(e){return e.yanchor==="top"||e.yanchor==="auto"&&e.y>=.6666666666666666},z.isMiddleAnchor=function(e){return e.yanchor==="middle"||e.yanchor==="auto"&&e.y>.3333333333333333&&e.y<.6666666666666666},z.isBottomAnchor=function(e){return e.yanchor==="bottom"||e.yanchor==="auto"&&e.y<=.3333333333333333}},26348:function(K,z,e){var S=e(64872),k=S.mod,l=S.modHalf,T=Math.PI,b=2*T;function d(r){return Math.abs(r[1]-r[0])>b-1e-14}function s(r,n){return l(n-r,b)}function t(r,n){if(d(n))return!0;var a,i;n[0]<n[1]?(a=n[0],i=n[1]):(a=n[1],i=n[0]),(a=k(a,b))>(i=k(i,b))&&(i+=b);var u=k(r,b),h=u+b;return u>=a&&u<=i||h>=a&&h<=i}function o(r,n,a,i,u,h,f){u=u||0,h=h||0;var x,v,g,y,p,m=d([a,i]);function w(E,L){return[E*Math.cos(L)+u,h-E*Math.sin(L)]}m?(x=0,v=T,g=b):a<i?(x=a,g=i):(x=i,g=a),r<n?(y=r,p=n):(y=n,p=r);var c,M=Math.abs(g-x)<=T?0:1;function _(E,L,C){return"A"+[E,E]+" "+[0,M,C]+" "+w(E,L)}return m?c=y===null?"M"+w(p,x)+_(p,v,0)+_(p,g,0)+"Z":"M"+w(y,x)+_(y,v,0)+_(y,g,0)+"ZM"+w(p,x)+_(p,v,1)+_(p,g,1)+"Z":y===null?(c="M"+w(p,x)+_(p,g,0),f&&(c+="L0,0Z")):c="M"+w(y,x)+"L"+w(p,x)+_(p,g,0)+"L"+w(y,g)+_(y,x,1)+"Z",c}K.exports={deg2rad:function(r){return r/180*T},rad2deg:function(r){return r/T*180},angleDelta:s,angleDist:function(r,n){return Math.abs(s(r,n))},isFullCircle:d,isAngleInsideSector:t,isPtInsideSector:function(r,n,a,i){return!!t(n,i)&&(a[0]<a[1]?(u=a[0],h=a[1]):(u=a[1],h=a[0]),r>=u&&r<=h);var u,h},pathArc:function(r,n,a,i,u){return o(null,r,n,a,i,u,0)},pathSector:function(r,n,a,i,u){return o(null,r,n,a,i,u,1)},pathAnnulus:function(r,n,a,i,u,h){return o(r,n,a,i,u,h,1)}}},73627:function(K,z){var e=Array.isArray,S=ArrayBuffer,k=DataView;function l(d){return S.isView(d)&&!(d instanceof k)}function T(d){return e(d)||l(d)}function b(d,s,t){if(T(d)){if(T(d[0])){for(var o=t,r=0;r<d.length;r++)o=s(o,d[r].length);return o}return d.length}return 0}z.isTypedArray=l,z.isArrayOrTypedArray=T,z.isArray1D=function(d){return!T(d[0])},z.ensureArray=function(d,s){return e(d)||(d=[]),d.length=s,d},z.concat=function(){var d,s,t,o,r,n,a,i,u=[],h=!0,f=0;for(t=0;t<arguments.length;t++)(n=(o=arguments[t]).length)&&(s?u.push(o):(s=o,r=n),e(o)?d=!1:(h=!1,f?d!==o.constructor&&(d=!1):d=o.constructor),f+=n);if(!f)return[];if(!u.length)return s;if(h)return s.concat.apply(s,u);if(d){for((a=new d(f)).set(s),t=0;t<u.length;t++)o=u[t],a.set(o,r),r+=o.length;return a}for(a=new Array(f),i=0;i<s.length;i++)a[i]=s[i];for(t=0;t<u.length;t++){for(o=u[t],i=0;i<o.length;i++)a[r+i]=o[i];r+=i}return a},z.maxRowLength=function(d){return b(d,Math.max,0)},z.minRowLength=function(d){return b(d,Math.min,1/0)}},95218:function(K,z,e){var S=e(92770),k=e(50606).BADNUM,l=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;K.exports=function(T){return typeof T=="string"&&(T=T.replace(l,"")),S(T)?Number(T):k}},33306:function(K){K.exports=function(z){var e=z._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(S){S.regl&&S.regl.clear({color:!0,depth:!0})})}},86367:function(K){K.exports=function(z){z._responsiveChartHandler&&(window.removeEventListener("resize",z._responsiveChartHandler),delete z._responsiveChartHandler)}},96554:function(K,z,e){var S=e(92770),k=e(84267),l=e(9012),T=e(63282),b=e(7901),d=e(37822).DESELECTDIM,s=e(65487),t=e(30587).counter,o=e(64872).modHalf,r=e(73627).isArrayOrTypedArray;function n(a,i){var u=z.valObjectMeta[i.valType];if(i.arrayOk&&r(a))return!0;if(u.validateFunction)return u.validateFunction(a,i);var h={},f=h,x={set:function(v){f=v}};return u.coerceFunction(a,x,h,i),f!==h}z.valObjectMeta={data_array:{coerceFunction:function(a,i,u){r(a)?i.set(a):u!==void 0&&i.set(u)}},enumerated:{coerceFunction:function(a,i,u,h){h.coerceNumber&&(a=+a),h.values.indexOf(a)===-1?i.set(u):i.set(a)},validateFunction:function(a,i){i.coerceNumber&&(a=+a);for(var u=i.values,h=0;h<u.length;h++){var f=String(u[h]);if(f.charAt(0)==="/"&&f.charAt(f.length-1)==="/"){if(new RegExp(f.substr(1,f.length-2)).test(a))return!0}else if(a===u[h])return!0}return!1}},boolean:{coerceFunction:function(a,i,u){a===!0||a===!1?i.set(a):i.set(u)}},number:{coerceFunction:function(a,i,u,h){!S(a)||h.min!==void 0&&a<h.min||h.max!==void 0&&a>h.max?i.set(u):i.set(+a)}},integer:{coerceFunction:function(a,i,u,h){a%1||!S(a)||h.min!==void 0&&a<h.min||h.max!==void 0&&a>h.max?i.set(u):i.set(+a)}},string:{coerceFunction:function(a,i,u,h){if(typeof a!="string"){var f=typeof a=="number";h.strict!==!0&&f?i.set(String(a)):i.set(u)}else h.noBlank&&!a?i.set(u):i.set(a)}},color:{coerceFunction:function(a,i,u){k(a).isValid()?i.set(a):i.set(u)}},colorlist:{coerceFunction:function(a,i,u){Array.isArray(a)&&a.length&&a.every(function(h){return k(h).isValid()})?i.set(a):i.set(u)}},colorscale:{coerceFunction:function(a,i,u){i.set(T.get(a,u))}},angle:{coerceFunction:function(a,i,u){a==="auto"?i.set("auto"):S(a)?i.set(o(+a,360)):i.set(u)}},subplotid:{coerceFunction:function(a,i,u,h){var f=h.regex||t(u);typeof a=="string"&&f.test(a)?i.set(a):i.set(u)},validateFunction:function(a,i){var u=i.dflt;return a===u||typeof a=="string"&&!!t(u).test(a)}},flaglist:{coerceFunction:function(a,i,u,h){if((h.extras||[]).indexOf(a)===-1)if(typeof a=="string"){for(var f=a.split("+"),x=0;x<f.length;){var v=f[x];h.flags.indexOf(v)===-1||f.indexOf(v)<x?f.splice(x,1):x++}f.length?i.set(f.join("+")):i.set(u)}else i.set(u);else i.set(a)}},any:{coerceFunction:function(a,i,u){a===void 0?i.set(u):i.set(a)}},info_array:{coerceFunction:function(a,i,u,h){function f(O,I,N){var R,V={set:function(F){R=F}};return N===void 0&&(N=I.dflt),z.valObjectMeta[I.valType].coerceFunction(O,V,N,I),R}var x=h.dimensions===2||h.dimensions==="1-2"&&Array.isArray(a)&&Array.isArray(a[0]);if(Array.isArray(a)){var v,g,y,p,m,w,c=h.items,M=[],_=Array.isArray(c),E=_&&x&&Array.isArray(c[0]),L=x&&_&&!E,C=_&&!L?c.length:a.length;if(u=Array.isArray(u)?u:[],x)for(v=0;v<C;v++)for(M[v]=[],y=Array.isArray(a[v])?a[v]:[],m=L?c.length:_?c[v].length:y.length,g=0;g<m;g++)p=L?c[g]:_?c[v][g]:c,(w=f(y[g],p,(u[v]||[])[g]))!==void 0&&(M[v][g]=w);else for(v=0;v<C;v++)(w=f(a[v],_?c[v]:c,u[v]))!==void 0&&(M[v]=w);i.set(M)}else i.set(u)},validateFunction:function(a,i){if(!Array.isArray(a))return!1;var u=i.items,h=Array.isArray(u),f=i.dimensions===2;if(!i.freeLength&&a.length!==u.length)return!1;for(var x=0;x<a.length;x++)if(f){if(!Array.isArray(a[x])||!i.freeLength&&a[x].length!==u[x].length)return!1;for(var v=0;v<a[x].length;v++)if(!n(a[x][v],h?u[x][v]:u))return!1}else if(!n(a[x],h?u[x]:u))return!1;return!0}}},z.coerce=function(a,i,u,h,f){var x=s(u,h).get(),v=s(a,h),g=s(i,h),y=v.get(),p=i._template;if(y===void 0&&p&&(y=s(p,h).get(),p=0),f===void 0&&(f=x.dflt),x.arrayOk&&r(y))return g.set(y),y;var m=z.valObjectMeta[x.valType].coerceFunction;m(y,g,f,x);var w=g.get();return p&&w===f&&!n(y,x)&&(m(y=s(p,h).get(),g,f,x),w=g.get()),w},z.coerce2=function(a,i,u,h,f){var x=s(a,h),v=z.coerce(a,i,u,h,f);return x.get()!=null&&v},z.coerceFont=function(a,i,u){var h={};return u=u||{},h.family=a(i+".family",u.family),h.size=a(i+".size",u.size),h.color=a(i+".color",u.color),h},z.coercePattern=function(a,i,u,h){if(a(i+".shape")){a(i+".solidity"),a(i+".size");var f=a(i+".fillmode")==="overlay";if(!h){var x=a(i+".bgcolor",f?u:void 0);a(i+".fgcolor",f?b.contrast(x):u)}a(i+".fgopacity",f?.5:1)}},z.coerceHoverinfo=function(a,i,u){var h,f=i._module.attributes,x=f.hoverinfo?f:l,v=x.hoverinfo;if(u._dataLength===1){var g=v.dflt==="all"?v.flags.slice():v.dflt.split("+");g.splice(g.indexOf("name"),1),h=g.join("+")}return z.coerce(a,i,x,"hoverinfo",h)},z.coerceSelectionMarkerOpacity=function(a,i){if(a.marker){var u,h,f=a.marker.opacity;f!==void 0&&(r(f)||a.selected||a.unselected||(u=f,h=d*f),i("selected.marker.opacity",u),i("unselected.marker.opacity",h))}},z.validate=n},41631:function(K,z,e){var S,k,l=e(84096).i$,T=e(92770),b=e(47769),d=e(64872).mod,s=e(50606),t=s.BADNUM,o=s.ONEDAY,r=s.ONEHOUR,n=s.ONEMIN,a=s.ONESEC,i=s.EPOCHJD,u=e(73972),h=e(84096).g0,f=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,x=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,v=new Date().getFullYear()-70;function g(I){return I&&u.componentsRegistry.calendars&&typeof I=="string"&&I!=="gregorian"}function y(I,N){return String(I+Math.pow(10,N)).substr(1)}z.dateTick0=function(I,N){var R=function(F,D){return g(F)?D?u.getComponentMethod("calendars","CANONICAL_SUNDAY")[F]:u.getComponentMethod("calendars","CANONICAL_TICK")[F]:D?"2000-01-02":"2000-01-01"}(I,!!N);if(N<2)return R;var V=z.dateTime2ms(R,I);return V+=o*(N-1),z.ms2DateTime(V,0,I)},z.dfltRange=function(I){return g(I)?u.getComponentMethod("calendars","DFLTRANGE")[I]:["2000-01-01","2001-01-01"]},z.isJSDate=function(I){return typeof I=="object"&&I!==null&&typeof I.getTime=="function"},z.dateTime2ms=function(I,N){if(z.isJSDate(I)){var R=I.getTimezoneOffset()*n,V=(I.getUTCMinutes()-I.getMinutes())*n+(I.getUTCSeconds()-I.getSeconds())*a+(I.getUTCMilliseconds()-I.getMilliseconds());if(V){var F=3*n;R=R-F/2+d(V-R+F/2,F)}return(I=Number(I)-R)>=S&&I<=k?I:t}if(typeof I!="string"&&typeof I!="number")return t;I=String(I);var D=g(N),U=I.charAt(0);!D||U!=="G"&&U!=="g"||(I=I.substr(1),N="");var j=D&&N.substr(0,7)==="chinese",J=I.match(j?x:f);if(!J)return t;var X=J[1],Z=J[3]||"1",Y=Number(J[5]||1),W=Number(J[7]||0),Q=Number(J[9]||0),ne=Number(J[11]||0);if(D){if(X.length===2)return t;var re;X=Number(X);try{var ie=u.getComponentMethod("calendars","getCal")(N);if(j){var se=Z.charAt(Z.length-1)==="i";Z=parseInt(Z,10),re=ie.newDate(X,ie.toMonthIndex(X,Z,se),Y)}else re=ie.newDate(X,Number(Z),Y)}catch{return t}return re?(re.toJD()-i)*o+W*r+Q*n+ne*a:t}X=X.length===2?(Number(X)+2e3-v)%100+v:Number(X),Z-=1;var ge=new Date(Date.UTC(2e3,Z,Y,W,Q));return ge.setUTCFullYear(X),ge.getUTCMonth()!==Z||ge.getUTCDate()!==Y?t:ge.getTime()+ne*a},S=z.MIN_MS=z.dateTime2ms("-9999"),k=z.MAX_MS=z.dateTime2ms("9999-12-31 23:59:59.9999"),z.isDateTime=function(I,N){return z.dateTime2ms(I,N)!==t};var p=90*o,m=3*r,w=5*n;function c(I,N,R,V,F){if((N||R||V||F)&&(I+=" "+y(N,2)+":"+y(R,2),(V||F)&&(I+=":"+y(V,2),F))){for(var D=4;F%10==0;)D-=1,F/=10;I+="."+y(F,D)}return I}z.ms2DateTime=function(I,N,R){if(typeof I!="number"||!(I>=S&&I<=k))return t;N||(N=0);var V,F,D,U,j,J,X=Math.floor(10*d(I+.05,1)),Z=Math.round(I-X/10);if(g(R)){var Y=Math.floor(Z/o)+i,W=Math.floor(d(I,o));try{V=u.getComponentMethod("calendars","getCal")(R).fromJD(Y).formatDate("yyyy-mm-dd")}catch{V=h("G%Y-%m-%d")(new Date(Z))}if(V.charAt(0)==="-")for(;V.length<11;)V="-0"+V.substr(1);else for(;V.length<10;)V="0"+V;F=N<p?Math.floor(W/r):0,D=N<p?Math.floor(W%r/n):0,U=N<m?Math.floor(W%n/a):0,j=N<w?W%a*10+X:0}else J=new Date(Z),V=h("%Y-%m-%d")(J),F=N<p?J.getUTCHours():0,D=N<p?J.getUTCMinutes():0,U=N<m?J.getUTCSeconds():0,j=N<w?10*J.getUTCMilliseconds()+X:0;return c(V,F,D,U,j)},z.ms2DateTimeLocal=function(I){if(!(I>=S+o&&I<=k-o))return t;var N=Math.floor(10*d(I+.05,1)),R=new Date(Math.round(I-N/10));return c(l("%Y-%m-%d")(R),R.getHours(),R.getMinutes(),R.getSeconds(),10*R.getUTCMilliseconds()+N)},z.cleanDate=function(I,N,R){if(I===t)return N;if(z.isJSDate(I)||typeof I=="number"&&isFinite(I)){if(g(R))return b.error("JS Dates and milliseconds are incompatible with world calendars",I),N;if(!(I=z.ms2DateTimeLocal(+I))&&N!==void 0)return N}else if(!z.isDateTime(I,R))return b.error("unrecognized date",I),N;return I};var M=/%\d?f/g,_=/%h/g,E={1:"1",2:"1",3:"2",4:"2"};function L(I,N,R,V){I=I.replace(M,function(D){var U=Math.min(+D.charAt(1)||6,6);return(N/1e3%1+2).toFixed(U).substr(2).replace(/0+$/,"")||"0"});var F=new Date(Math.floor(N+.05));if(I=I.replace(_,function(){return E[R("%q")(F)]}),g(V))try{I=u.getComponentMethod("calendars","worldCalFmt")(I,N,V)}catch{return"Invalid"}return R(I)(F)}var C=[59,59.9,59.99,59.999,59.9999];z.formatDate=function(I,N,R,V,F,D){if(F=g(F)&&F,!N)if(R==="y")N=D.year;else if(R==="m")N=D.month;else{if(R!=="d")return function(U,j){var J=d(U+.05,o),X=y(Math.floor(J/r),2)+":"+y(d(Math.floor(J/n),60),2);if(j!=="M"){T(j)||(j=0);var Z=(100+Math.min(d(U/a,60),C[j])).toFixed(j).substr(1);j>0&&(Z=Z.replace(/0+$/,"").replace(/[\.]$/,"")),X+=":"+Z}return X}(I,R)+`
`+L(D.dayMonthYear,I,V,F);N=D.dayMonth+`
`+D.year}return L(N,I,V,F)};var O=3*o;z.incrementMonth=function(I,N,R){R=g(R)&&R;var V=d(I,o);if(I=Math.round(I-V),R)try{var F=Math.round(I/o)+i,D=u.getComponentMethod("calendars","getCal")(R),U=D.fromJD(F);return N%12?D.add(U,N,"m"):D.add(U,N/12,"y"),(U.toJD()-i)*o+V}catch{b.error("invalid ms "+I+" in calendar "+R)}var j=new Date(I+O);return j.setUTCMonth(j.getUTCMonth()+N)+V-O},z.findExactDates=function(I,N){for(var R,V,F=0,D=0,U=0,j=0,J=g(N)&&u.getComponentMethod("calendars","getCal")(N),X=0;X<I.length;X++)if(V=I[X],T(V)){if(!(V%o))if(J)try{(R=J.fromJD(V/o+i)).day()===1?R.month()===1?F++:D++:U++}catch{}else(R=new Date(V)).getUTCDate()===1?R.getUTCMonth()===0?F++:D++:U++}else j++;U+=D+=F;var Z=I.length-j;return{exactYears:F/Z,exactMonths:D/Z,exactDays:U/Z}}},24401:function(K,z,e){var S=e(39898),k=e(47769),l=e(35657),T=e(79576);function b(r){var n=r&&r.parentNode;n&&n.removeChild(r)}function d(r,n,a){var i="plotly.js-style-"+r,u=document.getElementById(i);u||((u=document.createElement("style")).setAttribute("id",i),u.appendChild(document.createTextNode("")),document.head.appendChild(u));var h=u.sheet;h.insertRule?h.insertRule(n+"{"+a+"}",0):h.addRule?h.addRule(n,a,0):k.warn("addStyleRule failed")}function s(r){var n=window.getComputedStyle(r,null),a=n.getPropertyValue("-webkit-transform")||n.getPropertyValue("-moz-transform")||n.getPropertyValue("-ms-transform")||n.getPropertyValue("-o-transform")||n.getPropertyValue("transform");return a==="none"?null:a.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(i){return+i})}function t(r){for(var n=[];o(r);)n.push(r),r=r.parentNode;return n}function o(r){return r&&(r instanceof Element||r instanceof HTMLElement)}K.exports={getGraphDiv:function(r){var n;if(typeof r=="string"){if((n=document.getElementById(r))===null)throw new Error("No DOM element with id '"+r+"' exists on the page.");return n}if(r==null)throw new Error("DOM element provided is null or undefined");return r},isPlotDiv:function(r){var n=S.select(r);return n.node()instanceof HTMLElement&&n.size()&&n.classed("js-plotly-plot")},removeElement:b,addStyleRule:function(r,n){d("global",r,n)},addRelatedStyleRule:d,deleteRelatedStyleRule:function(r){var n="plotly.js-style-"+r,a=document.getElementById(n);a&&b(a)},getFullTransformMatrix:function(r){var n=t(r),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return n.forEach(function(i){var u=s(i);if(u){var h=l.convertCssMatrix(u);a=T.multiply(a,a,h)}}),a},getElementTransformMatrix:s,getElementAndAncestors:t,equalDomRects:function(r,n){return r&&n&&r.top===n.top&&r.left===n.left&&r.right===n.right&&r.bottom===n.bottom}}},11086:function(K,z,e){var S=e(15398).EventEmitter,k={init:function(l){if(l._ev instanceof S)return l;var T=new S,b=new S;return l._ev=T,l._internalEv=b,l.on=T.on.bind(T),l.once=T.once.bind(T),l.removeListener=T.removeListener.bind(T),l.removeAllListeners=T.removeAllListeners.bind(T),l._internalOn=b.on.bind(b),l._internalOnce=b.once.bind(b),l._removeInternalListener=b.removeListener.bind(b),l._removeAllInternalListeners=b.removeAllListeners.bind(b),l.emit=function(d,s){typeof jQuery<"u"&&jQuery(l).trigger(d,s),T.emit(d,s),b.emit(d,s)},l},triggerHandler:function(l,T,b){var d,s;typeof jQuery<"u"&&(d=jQuery(l).triggerHandler(T,b));var t=l._ev;if(!t)return d;var o,r=t._events[T];if(!r)return d;function n(a){return a.listener?(t.removeListener(T,a.listener),a.fired?void 0:(a.fired=!0,a.listener.apply(t,[b]))):a.apply(t,[b])}for(r=Array.isArray(r)?r:[r],o=0;o<r.length-1;o++)n(r[o]);return s=n(r[o]),d!==void 0?d:s},purge:function(l){return delete l._ev,delete l.on,delete l.once,delete l.removeListener,delete l.removeAllListeners,delete l.emit,delete l._ev,delete l._internalEv,delete l._internalOn,delete l._internalOnce,delete l._removeInternalListener,delete l._removeAllInternalListeners,l}};K.exports=k},1426:function(K,z,e){var S=e(41965),k=Array.isArray;function l(T,b,d,s){var t,o,r,n,a,i,u,h=T[0],f=T.length;if(f===2&&k(h)&&k(T[1])&&h.length===0){if(u=function(v,g){var y,p;for(y=0;y<v.length;y++){if((p=v[y])!==null&&typeof p=="object")return!1;p!==void 0&&(g[y]=p)}return!0}(T[1],h),u)return h;h.splice(0,h.length)}for(var x=1;x<f;x++)for(o in t=T[x])r=h[o],n=t[o],s&&k(n)?h[o]=n:b&&n&&(S(n)||(a=k(n)))?(a?(a=!1,i=r&&k(r)?r:[]):i=r&&S(r)?r:{},h[o]=l([i,n],b,d,s)):(n!==void 0||d)&&(h[o]=n);return h}z.extendFlat=function(){return l(arguments,!1,!1,!1)},z.extendDeep=function(){return l(arguments,!0,!1,!1)},z.extendDeepAll=function(){return l(arguments,!0,!0,!1)},z.extendDeepNoArrays=function(){return l(arguments,!0,!1,!0)}},75744:function(K){K.exports=function(z){for(var e={},S=[],k=0,l=0;l<z.length;l++){var T=z[l];e[T]!==1&&(e[T]=1,S[k++]=T)}return S}},76756:function(K){function z(S){return S.visible===!0}function e(S){var k=S[0].trace;return k.visible===!0&&k._length!==0}K.exports=function(S){for(var k,l=(k=S,Array.isArray(k)&&Array.isArray(k[0])&&k[0][0]&&k[0][0].trace?e:z),T=[],b=0;b<S.length;b++){var d=S[b];l(d)&&T.push(d)}return T}},41327:function(K,z,e){var S=e(39898),k=e(24138),l=e(30774),T=e(29261),b=e(85268),d=e(23389),s=e(47769),t=e(41965),o=e(65487),r=e(61082),n=Object.keys(k),a={"ISO-3":d,"USA-states":d,"country names":function(u){for(var h=0;h<n.length;h++){var f=n[h];if(new RegExp(k[f]).test(u.trim().toLowerCase()))return f}return s.log("Unrecognized country name: "+u+"."),!1}};function i(u){var h=u.geojson,f=window.PlotlyGeoAssets||{},x=typeof h=="string"?f[h]:h;return t(x)?x:(s.error("Oops ... something went wrong when fetching "+h),!1)}K.exports={locationToFeature:function(u,h,f){if(!h||typeof h!="string")return!1;var x,v,g,y=a[u](h);if(y){if(u==="USA-states")for(x=[],g=0;g<f.length;g++)(v=f[g]).properties&&v.properties.gu&&v.properties.gu==="USA"&&x.push(v);else x=f;for(g=0;g<x.length;g++)if((v=x[g]).id===y)return v;s.log(["Location with id",y,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(u){var h,f,x,v,g=u.geometry,y=g.coordinates,p=u.id,m=[];function w(c){for(var M=0;M<c.length-1;M++)if(c[M][0]>0&&c[M+1][0]<0)return M;return null}switch(h=p==="RUS"||p==="FJI"?function(c){var M;if(w(c)===null)M=c;else for(M=new Array(c.length),v=0;v<c.length;v++)M[v]=[c[v][0]<0?c[v][0]+360:c[v][0],c[v][1]];m.push(r.tester(M))}:p==="ATA"?function(c){var M=w(c);if(M===null)return m.push(r.tester(c));var _=new Array(c.length+1),E=0;for(v=0;v<c.length;v++)v>M?_[E++]=[c[v][0]+360,c[v][1]]:v===M?(_[E++]=c[v],_[E++]=[c[v][0],-90]):_[E++]=c[v];var L=r.tester(_);L.pts.pop(),m.push(L)}:function(c){m.push(r.tester(c))},g.type){case"MultiPolygon":for(f=0;f<y.length;f++)for(x=0;x<y[f].length;x++)h(y[f][x]);break;case"Polygon":for(f=0;f<y.length;f++)h(y[f])}return m},getTraceGeojson:i,extractTraceFeature:function(u){var h=u[0].trace,f=i(h);if(!f)return!1;var x,v={},g=[];for(x=0;x<h._length;x++){var y=u[x];(y.loc||y.loc===0)&&(v[y.loc]=y)}function p(c){var M=o(c,h.featureidkey||"id").get(),_=v[M];if(_){var E=c.geometry;if(E.type==="Polygon"||E.type==="MultiPolygon"){var L={type:"Feature",id:M,geometry:E,properties:{}};L.properties.ct=function(C){var O,I=C.geometry;if(I.type==="MultiPolygon")for(var N=I.coordinates,R=0,V=0;V<N.length;V++){var F={type:"Polygon",coordinates:N[V]},D=l.default(F);D>R&&(R=D,O=F)}else O=I;return T.default(O).geometry.coordinates}(L),_.fIn=c,_.fOut=L,g.push(L)}else s.log(["Location",_.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete v[M]}switch(f.type){case"FeatureCollection":var m=f.features;for(x=0;x<m.length;x++)p(m[x]);break;case"Feature":p(f);break;default:return s.warn(["Invalid GeoJSON type",(f.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var w in v)s.log(["Location *"+w+"*","does not have a matching feature with id-key","*"+h.featureidkey+"*."].join(" "));return g},fetchTraceGeoData:function(u){var h=window.PlotlyGeoAssets||{},f=[];function x(p){return new Promise(function(m,w){S.json(p,function(c,M){if(c){delete h[p];var _=c.status===404?'GeoJSON at URL "'+p+'" does not exist.':"Unexpected error while fetching from "+p;return w(new Error(_))}return h[p]=M,m(M)})})}function v(p){return new Promise(function(m,w){var c=0,M=setInterval(function(){return h[p]&&h[p]!=="pending"?(clearInterval(M),m(h[p])):c>100?(clearInterval(M),w("Unexpected error while fetching from "+p)):void c++},50)})}for(var g=0;g<u.length;g++){var y=u[g][0].trace.geojson;typeof y=="string"&&(h[y]?h[y]==="pending"&&f.push(v(y)):(h[y]="pending",f.push(x(y))))}return f},computeBbox:function(u){return b.default(u)}}},18214:function(K,z,e){var S=e(50606).BADNUM;z.calcTraceToLineCoords=function(k){for(var l=k[0].trace.connectgaps,T=[],b=[],d=0;d<k.length;d++){var s=k[d].lonlat;s[0]!==S?b.push(s):!l&&b.length>0&&(T.push(b),b=[])}return b.length>0&&T.push(b),T},z.makeLine=function(k){return k.length===1?{type:"LineString",coordinates:k[0]}:{type:"MultiLineString",coordinates:k}},z.makePolygon=function(k){if(k.length===1)return{type:"Polygon",coordinates:k};for(var l=new Array(k.length),T=0;T<k.length;T++)l[T]=[k[T]];return{type:"MultiPolygon",coordinates:l}},z.makeBlank=function(){return{type:"Point",coordinates:[]}}},87642:function(K,z,e){var S,k,l,T=e(64872).mod;function b(s,t,o,r,n,a,i,u){var h=o-s,f=n-s,x=i-n,v=r-t,g=a-t,y=u-a,p=h*y-x*v;if(p===0)return null;var m=(f*y-x*g)/p,w=(f*v-h*g)/p;return w<0||w>1||m<0||m>1?null:{x:s+h*m,y:t+v*m}}function d(s,t,o,r,n){var a=r*s+n*t;if(a<0)return r*r+n*n;if(a>o){var i=r-s,u=n-t;return i*i+u*u}var h=r*t-n*s;return h*h/o}z.segmentsIntersect=b,z.segmentDistance=function(s,t,o,r,n,a,i,u){if(b(s,t,o,r,n,a,i,u))return 0;var h=o-s,f=r-t,x=i-n,v=u-a,g=h*h+f*f,y=x*x+v*v,p=Math.min(d(h,f,g,n-s,a-t),d(h,f,g,i-s,u-t),d(x,v,y,s-n,t-a),d(x,v,y,o-n,r-a));return Math.sqrt(p)},z.getTextLocation=function(s,t,o,r){if(s===k&&r===l||(S={},k=s,l=r),S[o])return S[o];var n=s.getPointAtLength(T(o-r/2,t)),a=s.getPointAtLength(T(o+r/2,t)),i=Math.atan((a.y-n.y)/(a.x-n.x)),u=s.getPointAtLength(T(o,t)),h={x:(4*u.x+n.x+a.x)/6,y:(4*u.y+n.y+a.y)/6,theta:i};return S[o]=h,h},z.clearLocationCache=function(){k=null},z.getVisibleSegment=function(s,t,o){var r,n,a=t.left,i=t.right,u=t.top,h=t.bottom,f=0,x=s.getTotalLength(),v=x;function g(p){var m=s.getPointAtLength(p);p===0?r=m:p===x&&(n=m);var w=m.x<a?a-m.x:m.x>i?m.x-i:0,c=m.y<u?u-m.y:m.y>h?m.y-h:0;return Math.sqrt(w*w+c*c)}for(var y=g(f);y;){if((f+=y+o)>v)return;y=g(f)}for(y=g(v);y;){if(f>(v-=y+o))return;y=g(v)}return{min:f,max:v,len:v-f,total:x,isClosed:f===0&&v===x&&Math.abs(r.x-n.x)<.1&&Math.abs(r.y-n.y)<.1}},z.findPointOnPath=function(s,t,o,r){for(var n,a,i,u=(r=r||{}).pathLength||s.getTotalLength(),h=r.tolerance||.001,f=r.iterationLimit||30,x=s.getPointAtLength(0)[o]>s.getPointAtLength(u)[o]?-1:1,v=0,g=0,y=u;v<f;){if(n=(g+y)/2,i=(a=s.getPointAtLength(n))[o]-t,Math.abs(i)<h)return a;x*i>0?y=n:g=n,v++}return a}},81697:function(K,z,e){var S=e(92770),k=e(84267),l=e(25075),T=e(21081),b=e(22399).defaultLine,d=e(73627).isArrayOrTypedArray,s=l(b);function t(n,a){var i=n;return i[3]*=a,i}function o(n){if(S(n))return s;var a=l(n);return a.length?a:s}function r(n){return S(n)?n:1}K.exports={formatColor:function(n,a,i){var u,h,f,x,v,g=n.color,y=d(g),p=d(a),m=T.extractOpts(n),w=[];if(u=m.colorscale!==void 0?T.makeColorScaleFuncFromTrace(n):o,h=y?function(M,_){return M[_]===void 0?s:l(u(M[_]))}:o,f=p?function(M,_){return M[_]===void 0?1:r(M[_])}:r,y||p)for(var c=0;c<i;c++)x=h(g,c),v=f(a,c),w[c]=t(x,v);else w=t(l(g),a);return w},parseColorScale:function(n){var a=T.extractOpts(n),i=a.colorscale;return a.reversescale&&(i=T.flipScale(a.colorscale)),i.map(function(u){var h=u[0],f=k(u[1]).toRgb();return{index:h,rgb:[f.r,f.g,f.b,f.a]}})}}},28984:function(K,z,e){var S=e(23389);function k(l){return[l]}K.exports={keyFun:function(l){return l.key},repeat:k,descend:S,wrap:k,unwrap:function(l){return l[0]}}},23389:function(K){K.exports=function(z){return z}},39240:function(K){K.exports=function(z,e){if(!e)return z;var S=1/Math.abs(e),k=S>1?(S*z+S*e)/S:z+e,l=String(k).length;if(l>16){var T=String(e).length;if(l>=String(z).length+T){var b=parseFloat(k).toPrecision(12);b.indexOf("e+")===-1&&(k=+b)}}return k}},71828:function(K,z,e){var S=e(39898),k=e(84096).g0,l=e(60721).WU,T=e(92770),b=e(50606),d=b.FP_SAFE,s=-d,t=b.BADNUM,o=K.exports={};o.adjustFormat=function(W){return!W||/^\d[.]\df/.test(W)||/[.]\d%/.test(W)?W:W==="0.f"?"~f":/^\d%/.test(W)?"~%":/^\ds/.test(W)?"~s":!/^[~,.0$]/.test(W)&&/[&fps]/.test(W)?"~"+W:W};var r={};o.warnBadFormat=function(W){var Q=String(W);r[Q]||(r[Q]=1,o.warn('encountered bad format: "'+Q+'"'))},o.noFormat=function(W){return String(W)},o.numberFormat=function(W){var Q;try{Q=l(o.adjustFormat(W))}catch{return o.warnBadFormat(W),o.noFormat}return Q},o.nestedProperty=e(65487),o.keyedContainer=e(66636),o.relativeAttr=e(6962),o.isPlainObject=e(41965),o.toLogRange=e(58163),o.relinkPrivateKeys=e(51332);var n=e(73627);o.isTypedArray=n.isTypedArray,o.isArrayOrTypedArray=n.isArrayOrTypedArray,o.isArray1D=n.isArray1D,o.ensureArray=n.ensureArray,o.concat=n.concat,o.maxRowLength=n.maxRowLength,o.minRowLength=n.minRowLength;var a=e(64872);o.mod=a.mod,o.modHalf=a.modHalf;var i=e(96554);o.valObjectMeta=i.valObjectMeta,o.coerce=i.coerce,o.coerce2=i.coerce2,o.coerceFont=i.coerceFont,o.coercePattern=i.coercePattern,o.coerceHoverinfo=i.coerceHoverinfo,o.coerceSelectionMarkerOpacity=i.coerceSelectionMarkerOpacity,o.validate=i.validate;var u=e(41631);o.dateTime2ms=u.dateTime2ms,o.isDateTime=u.isDateTime,o.ms2DateTime=u.ms2DateTime,o.ms2DateTimeLocal=u.ms2DateTimeLocal,o.cleanDate=u.cleanDate,o.isJSDate=u.isJSDate,o.formatDate=u.formatDate,o.incrementMonth=u.incrementMonth,o.dateTick0=u.dateTick0,o.dfltRange=u.dfltRange,o.findExactDates=u.findExactDates,o.MIN_MS=u.MIN_MS,o.MAX_MS=u.MAX_MS;var h=e(65888);o.findBin=h.findBin,o.sorterAsc=h.sorterAsc,o.sorterDes=h.sorterDes,o.distinctVals=h.distinctVals,o.roundUp=h.roundUp,o.sort=h.sort,o.findIndexOfMin=h.findIndexOfMin,o.sortObjectKeys=e(78607);var f=e(80038);o.aggNums=f.aggNums,o.len=f.len,o.mean=f.mean,o.median=f.median,o.midRange=f.midRange,o.variance=f.variance,o.stdev=f.stdev,o.interp=f.interp;var x=e(35657);o.init2dArray=x.init2dArray,o.transposeRagged=x.transposeRagged,o.dot=x.dot,o.translationMatrix=x.translationMatrix,o.rotationMatrix=x.rotationMatrix,o.rotationXYMatrix=x.rotationXYMatrix,o.apply3DTransform=x.apply3DTransform,o.apply2DTransform=x.apply2DTransform,o.apply2DTransform2=x.apply2DTransform2,o.convertCssMatrix=x.convertCssMatrix,o.inverseTransformMatrix=x.inverseTransformMatrix;var v=e(26348);o.deg2rad=v.deg2rad,o.rad2deg=v.rad2deg,o.angleDelta=v.angleDelta,o.angleDist=v.angleDist,o.isFullCircle=v.isFullCircle,o.isAngleInsideSector=v.isAngleInsideSector,o.isPtInsideSector=v.isPtInsideSector,o.pathArc=v.pathArc,o.pathSector=v.pathSector,o.pathAnnulus=v.pathAnnulus;var g=e(99863);o.isLeftAnchor=g.isLeftAnchor,o.isCenterAnchor=g.isCenterAnchor,o.isRightAnchor=g.isRightAnchor,o.isTopAnchor=g.isTopAnchor,o.isMiddleAnchor=g.isMiddleAnchor,o.isBottomAnchor=g.isBottomAnchor;var y=e(87642);o.segmentsIntersect=y.segmentsIntersect,o.segmentDistance=y.segmentDistance,o.getTextLocation=y.getTextLocation,o.clearLocationCache=y.clearLocationCache,o.getVisibleSegment=y.getVisibleSegment,o.findPointOnPath=y.findPointOnPath;var p=e(1426);o.extendFlat=p.extendFlat,o.extendDeep=p.extendDeep,o.extendDeepAll=p.extendDeepAll,o.extendDeepNoArrays=p.extendDeepNoArrays;var m=e(47769);o.log=m.log,o.warn=m.warn,o.error=m.error;var w=e(30587);o.counterRegex=w.counter;var c=e(79990);o.throttle=c.throttle,o.throttleDone=c.done,o.clearThrottle=c.clear;var M=e(24401);function _(W){var Q={};for(var ne in W)for(var re=W[ne],ie=0;ie<re.length;ie++)Q[re[ie]]=+ne;return Q}o.getGraphDiv=M.getGraphDiv,o.isPlotDiv=M.isPlotDiv,o.removeElement=M.removeElement,o.addStyleRule=M.addStyleRule,o.addRelatedStyleRule=M.addRelatedStyleRule,o.deleteRelatedStyleRule=M.deleteRelatedStyleRule,o.getFullTransformMatrix=M.getFullTransformMatrix,o.getElementTransformMatrix=M.getElementTransformMatrix,o.getElementAndAncestors=M.getElementAndAncestors,o.equalDomRects=M.equalDomRects,o.clearResponsive=e(86367),o.preserveDrawingBuffer=e(45142),o.makeTraceGroups=e(77310),o._=e(15867),o.notifier=e(75046),o.filterUnique=e(75744),o.filterVisible=e(76756),o.pushUnique=e(75138),o.increment=e(39240),o.cleanNumber=e(95218),o.ensureNumber=function(W){return T(W)?(W=Number(W))>d||W<s?t:W:t},o.isIndex=function(W,Q){return!(Q!==void 0&&W>=Q)&&T(W)&&W>=0&&W%1==0},o.noop=e(64213),o.identity=e(23389),o.repeat=function(W,Q){for(var ne=new Array(Q),re=0;re<Q;re++)ne[re]=W;return ne},o.swapAttrs=function(W,Q,ne,re){ne||(ne="x"),re||(re="y");for(var ie=0;ie<Q.length;ie++){var se=Q[ie],ge=o.nestedProperty(W,se.replace("?",ne)),ue=o.nestedProperty(W,se.replace("?",re)),ce=ge.get();ge.set(ue.get()),ue.set(ce)}},o.raiseToTop=function(W){W.parentNode.appendChild(W)},o.cancelTransition=function(W){return W.transition().duration(0)},o.constrain=function(W,Q,ne){return Q>ne?Math.max(ne,Math.min(Q,W)):Math.max(Q,Math.min(ne,W))},o.bBoxIntersect=function(W,Q,ne){return ne=ne||0,W.left<=Q.right+ne&&Q.left<=W.right+ne&&W.top<=Q.bottom+ne&&Q.top<=W.bottom+ne},o.simpleMap=function(W,Q,ne,re,ie){for(var se=W.length,ge=new Array(se),ue=0;ue<se;ue++)ge[ue]=Q(W[ue],ne,re,ie);return ge},o.randstr=function W(Q,ne,re,ie){if(re||(re=16),ne===void 0&&(ne=24),ne<=0)return"0";var se,ge,ue=Math.log(Math.pow(2,ne))/Math.log(re),ce="";for(se=2;ue===1/0;se*=2)ue=Math.log(Math.pow(2,ne/se))/Math.log(re)*se;var le=ue-Math.floor(ue);for(se=0;se<Math.floor(ue);se++)ce=Math.floor(Math.random()*re).toString(re)+ce;le&&(ge=Math.pow(re,le),ce=Math.floor(Math.random()*ge).toString(re)+ce);var de=parseInt(ce,re);return Q&&Q[ce]||de!==1/0&&de>=Math.pow(2,ne)?ie>10?(o.warn("randstr failed uniqueness"),ce):W(Q,ne,re,(ie||0)+1):ce},o.OptionControl=function(W,Q){W||(W={}),Q||(Q="opt");var ne={optionList:[],_newoption:function(re){re[Q]=W,ne[re.name]=re,ne.optionList.push(re)}};return ne["_"+Q]=W,ne},o.smooth=function(W,Q){if((Q=Math.round(Q)||0)<2)return W;var ne,re,ie,se,ge=W.length,ue=2*ge,ce=2*Q-1,le=new Array(ce),de=new Array(ge);for(ne=0;ne<ce;ne++)le[ne]=(1-Math.cos(Math.PI*(ne+1)/Q))/(2*Q);for(ne=0;ne<ge;ne++){for(se=0,re=0;re<ce;re++)(ie=ne+re+1-Q)<-ge?ie-=ue*Math.round(ie/ue):ie>=ue&&(ie-=ue*Math.floor(ie/ue)),ie<0?ie=-1-ie:ie>=ge&&(ie=ue-1-ie),se+=W[ie]*le[re];de[ne]=se}return de},o.syncOrAsync=function(W,Q,ne){var re;function ie(){return o.syncOrAsync(W,Q,ne)}for(;W.length;)if((re=(0,W.splice(0,1)[0])(Q))&&re.then)return re.then(ie);return ne&&ne(Q)},o.stripTrailingSlash=function(W){return W.substr(-1)==="/"?W.substr(0,W.length-1):W},o.noneOrAll=function(W,Q,ne){if(W){var re,ie=!1,se=!0;for(re=0;re<ne.length;re++)W[ne[re]]!=null?ie=!0:se=!1;if(ie&&!se)for(re=0;re<ne.length;re++)W[ne[re]]=Q[ne[re]]}},o.mergeArray=function(W,Q,ne,re){var ie=typeof re=="function";if(o.isArrayOrTypedArray(W))for(var se=Math.min(W.length,Q.length),ge=0;ge<se;ge++){var ue=W[ge];Q[ge][ne]=ie?re(ue):ue}},o.mergeArrayCastPositive=function(W,Q,ne){return o.mergeArray(W,Q,ne,function(re){var ie=+re;return isFinite(ie)&&ie>0?ie:0})},o.fillArray=function(W,Q,ne,re){if(re=re||o.identity,o.isArrayOrTypedArray(W))for(var ie=0;ie<Q.length;ie++)Q[ie][ne]=re(W[ie])},o.castOption=function(W,Q,ne,re){re=re||o.identity;var ie=o.nestedProperty(W,ne).get();return o.isArrayOrTypedArray(ie)?Array.isArray(Q)&&o.isArrayOrTypedArray(ie[Q[0]])?re(ie[Q[0]][Q[1]]):re(ie[Q]):ie},o.extractOption=function(W,Q,ne,re){if(ne in W)return W[ne];var ie=o.nestedProperty(Q,re).get();return Array.isArray(ie)?void 0:ie},o.tagSelected=function(W,Q,ne){var re,ie,se=Q.selectedpoints,ge=Q._indexToPoints;ge&&(re=_(ge));for(var ue=0;ue<se.length;ue++){var ce=se[ue];if(o.isIndex(ce)||o.isArrayOrTypedArray(ce)&&o.isIndex(ce[0])&&o.isIndex(ce[1])){var le=re?re[ce]:ce,de=ne?ne[le]:le;(ie=de)!==void 0&&ie<W.length&&(W[de].selected=1)}}},o.selIndices2selPoints=function(W){var Q=W.selectedpoints,ne=W._indexToPoints;if(ne){for(var re=_(ne),ie=[],se=0;se<Q.length;se++){var ge=Q[se];if(o.isIndex(ge)){var ue=re[ge];o.isIndex(ue)&&ie.push(ue)}}return ie}return Q},o.getTargetArray=function(W,Q){var ne=Q.target;if(typeof ne=="string"&&ne){var re=o.nestedProperty(W,ne).get();return!!Array.isArray(re)&&re}return!!Array.isArray(ne)&&ne},o.minExtend=function(W,Q){var ne={};typeof Q!="object"&&(Q={});var re,ie,se,ge=Object.keys(W);for(re=0;re<ge.length;re++)se=W[ie=ge[re]],ie.charAt(0)!=="_"&&typeof se!="function"&&(ie==="module"?ne[ie]=se:Array.isArray(se)?ne[ie]=ie==="colorscale"?se.slice():se.slice(0,3):o.isTypedArray(se)?ne[ie]=se.subarray(0,3):ne[ie]=se&&typeof se=="object"?o.minExtend(W[ie],Q[ie]):se);for(ge=Object.keys(Q),re=0;re<ge.length;re++)typeof(se=Q[ie=ge[re]])=="object"&&ie in ne&&typeof ne[ie]=="object"||(ne[ie]=se);return ne},o.titleCase=function(W){return W.charAt(0).toUpperCase()+W.substr(1)},o.containsAny=function(W,Q){for(var ne=0;ne<Q.length;ne++)if(W.indexOf(Q[ne])!==-1)return!0;return!1},o.isIE=function(){return window.navigator.msSaveBlob!==void 0};var E=/Version\/[\d\.]+.*Safari/;o.isSafari=function(){return E.test(window.navigator.userAgent)};var L=/iPad|iPhone|iPod/;o.isIOS=function(){return L.test(window.navigator.userAgent)};var C=/Firefox\/(\d+)\.\d+/;o.getFirefoxVersion=function(){var W=C.exec(window.navigator.userAgent);if(W&&W.length===2){var Q=parseInt(W[1]);if(!isNaN(Q))return Q}return null},o.isD3Selection=function(W){return W instanceof S.selection},o.ensureSingle=function(W,Q,ne,re){var ie=W.select(Q+(ne?"."+ne:""));if(ie.size())return ie;var se=W.append(Q);return ne&&se.classed(ne,!0),re&&se.call(re),se},o.ensureSingleById=function(W,Q,ne,re){var ie=W.select(Q+"#"+ne);if(ie.size())return ie;var se=W.append(Q).attr("id",ne);return re&&se.call(re),se},o.objectFromPath=function(W,Q){for(var ne,re=W.split("."),ie=ne={},se=0;se<re.length;se++){var ge=re[se],ue=null,ce=re[se].match(/(.*)\[([0-9]+)\]/);ce?(ge=ce[1],ue=ce[2],ne=ne[ge]=[],se===re.length-1?ne[ue]=Q:ne[ue]={},ne=ne[ue]):(se===re.length-1?ne[ge]=Q:ne[ge]={},ne=ne[ge])}return ie};var O=/^([^\[\.]+)\.(.+)?/,I=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;o.expandObjectPaths=function(W){var Q,ne,re,ie,se,ge,ue;if(typeof W=="object"&&!Array.isArray(W))for(ne in W)W.hasOwnProperty(ne)&&((Q=ne.match(O))?(ie=W[ne],re=Q[1],delete W[ne],W[re]=o.extendDeepNoArrays(W[re]||{},o.objectFromPath(ne,o.expandObjectPaths(ie))[re])):(Q=ne.match(I))?(ie=W[ne],re=Q[1],se=parseInt(Q[2]),delete W[ne],W[re]=W[re]||[],Q[3]==="."?(ue=Q[4],ge=W[re][se]=W[re][se]||{},o.extendDeepNoArrays(ge,o.objectFromPath(ue,o.expandObjectPaths(ie)))):W[re][se]=o.expandObjectPaths(ie)):W[ne]=o.expandObjectPaths(W[ne]));return W},o.numSeparate=function(W,Q,ne){if(ne||(ne=!1),typeof Q!="string"||Q.length===0)throw new Error("Separator string required for formatting!");typeof W=="number"&&(W=String(W));var re=/(\d+)(\d{3})/,ie=Q.charAt(0),se=Q.charAt(1),ge=W.split("."),ue=ge[0],ce=ge.length>1?ie+ge[1]:"";if(se&&(ge.length>1||ue.length>4||ne))for(;re.test(ue);)ue=ue.replace(re,"$1"+se+"$2");return ue+ce},o.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var N=/^\w*$/;o.templateString=function(W,Q){var ne={};return W.replace(o.TEMPLATE_STRING_REGEX,function(re,ie){var se;return N.test(ie)?se=Q[ie]:(ne[ie]=ne[ie]||o.nestedProperty(Q,ie).get,se=ne[ie]()),o.isValidTextValue(se)?se:""})};var R={max:10,count:0,name:"hovertemplate"};o.hovertemplateString=function(){return J.apply(R,arguments)};var V={max:10,count:0,name:"texttemplate"};o.texttemplateString=function(){return J.apply(V,arguments)};var F=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;function D(W){var Q=W.match(F);return Q?{key:Q[1],op:Q[2],number:Number(Q[3])}:{key:W,op:null,number:null}}var U={max:10,count:0,name:"texttemplate",parseMultDiv:!0};o.texttemplateStringForShapes=function(){return J.apply(U,arguments)};var j=/^[:|\|]/;function J(W,Q,ne){var re=this,ie=arguments;Q||(Q={});var se={};return W.replace(o.TEMPLATE_STRING_REGEX,function(ge,ue,ce){var le=ue==="_xother"||ue==="_yother",de=ue==="_xother_"||ue==="_yother_",Ce=ue==="xother_"||ue==="yother_",xe=ue==="xother"||ue==="yother"||le||Ce||de,_e=ue;(le||de)&&(_e=_e.substring(1)),(Ce||de)&&(_e=_e.substring(0,_e.length-1));var we,Ae,$,oe=null,pe=null;if(re.parseMultDiv){var ye=D(_e);_e=ye.key,oe=ye.op,pe=ye.number}if(xe){if((we=Q[_e])===void 0)return""}else for($=3;$<ie.length;$++)if(Ae=ie[$]){if(Ae.hasOwnProperty(_e)){we=Ae[_e];break}if(N.test(_e)||(we=o.nestedProperty(Ae,_e).get(),(we=se[_e]||o.nestedProperty(Ae,_e).get())&&(se[_e]=we)),we!==void 0)break}if(we!==void 0&&(oe==="*"&&(we*=pe),oe==="/"&&(we/=pe)),we===void 0&&re)return re.count<re.max&&(o.warn("Variable '"+_e+"' in "+re.name+" could not be found!"),we=ge),re.count===re.max&&o.warn("Too many "+re.name+" warnings - additional warnings will be suppressed"),re.count++,ge;if(ce){var ke;if(ce[0]===":"&&(we=(ke=ne?ne.numberFormat:o.numberFormat)(ce.replace(j,""))(we)),ce[0]==="|"){ke=ne?ne.timeFormat:k;var De=o.dateTime2ms(we);we=o.formatDate(De,ce.replace(j,""),!1,ke)}}else{var Pe=_e+"Label";Q.hasOwnProperty(Pe)&&(we=Q[Pe])}return xe&&(we="("+we+")",(le||de)&&(we=" "+we),(Ce||de)&&(we+=" ")),we})}o.subplotSort=function(W,Q){for(var ne=Math.min(W.length,Q.length)+1,re=0,ie=0,se=0;se<ne;se++){var ge=W.charCodeAt(se)||0,ue=Q.charCodeAt(se)||0,ce=ge>=48&&ge<=57,le=ue>=48&&ue<=57;if(ce&&(re=10*re+ge-48),le&&(ie=10*ie+ue-48),!ce||!le){if(re!==ie)return re-ie;if(ge!==ue)return ge-ue}}return ie-re};var X=2e9;o.seedPseudoRandom=function(){X=2e9},o.pseudoRandom=function(){var W=X;return X=(69069*X+1)%4294967296,Math.abs(X-W)<429496729?o.pseudoRandom():X/4294967296},o.fillText=function(W,Q,ne){var re=Array.isArray(ne)?function(ge){ne.push(ge)}:function(ge){ne.text=ge},ie=o.extractOption(W,Q,"htx","hovertext");if(o.isValidTextValue(ie))return re(ie);var se=o.extractOption(W,Q,"tx","text");return o.isValidTextValue(se)?re(se):void 0},o.isValidTextValue=function(W){return W||W===0},o.formatPercent=function(W,Q){Q=Q||0;for(var ne=(Math.round(100*W*Math.pow(10,Q))*Math.pow(.1,Q)).toFixed(Q)+"%",re=0;re<Q;re++)ne.indexOf(".")!==-1&&(ne=(ne=ne.replace("0%","%")).replace(".%","%"));return ne},o.isHidden=function(W){var Q=window.getComputedStyle(W).display;return!Q||Q==="none"},o.strTranslate=function(W,Q){return W||Q?"translate("+W+","+Q+")":""},o.strRotate=function(W){return W?"rotate("+W+")":""},o.strScale=function(W){return W!==1?"scale("+W+")":""},o.getTextTransform=function(W){var Q=W.noCenter,ne=W.textX,re=W.textY,ie=W.targetX,se=W.targetY,ge=W.anchorX||0,ue=W.anchorY||0,ce=W.rotate,le=W.scale;return le?le>1&&(le=1):le=0,o.strTranslate(ie-le*(ne+ge),se-le*(re+ue))+o.strScale(le)+(ce?"rotate("+ce+(Q?"":" "+ne+" "+re)+")":"")},o.setTransormAndDisplay=function(W,Q){W.attr("transform",o.getTextTransform(Q)),W.style("display",Q.scale?null:"none")},o.ensureUniformFontSize=function(W,Q){var ne=o.extendFlat({},Q);return ne.size=Math.max(Q.size,W._fullLayout.uniformtext.minsize||0),ne},o.join2=function(W,Q,ne){var re=W.length;return re>1?W.slice(0,-1).join(Q)+ne+W[re-1]:W.join(Q)},o.bigFont=function(W){return Math.round(1.2*W)};var Z=o.getFirefoxVersion(),Y=Z!==null&&Z<86;o.getPositionFromD3Event=function(){return Y?[S.event.layerX,S.event.layerY]:[S.event.offsetX,S.event.offsetY]}},41965:function(K){K.exports=function(z){return window&&window.process&&window.process.versions?Object.prototype.toString.call(z)==="[object Object]":Object.prototype.toString.call(z)==="[object Object]"&&Object.getPrototypeOf(z).hasOwnProperty("hasOwnProperty")}},66636:function(K,z,e){var S=e(65487),k=/^\w*$/;K.exports=function(l,T,b,d){var s,t,o;b=b||"name",d=d||"value";var r={};T&&T.length?(o=S(l,T),t=o.get()):t=l,T=T||"";var n={};if(t)for(s=0;s<t.length;s++)n[t[s][b]]=s;var a=k.test(d),i={set:function(u,h){var f=h===null?4:0;if(!t){if(!o||f===4)return;t=[],o.set(t)}var x=n[u];if(x===void 0){if(f===4)return;f|=3,x=t.length,n[u]=x}else h!==(a?t[x][d]:S(t[x],d).get())&&(f|=2);var v=t[x]=t[x]||{};return v[b]=u,a?v[d]=h:S(v,d).set(h),h!==null&&(f&=-5),r[x]=r[x]|f,i},get:function(u){if(t){var h=n[u];return h===void 0?void 0:a?t[h][d]:S(t[h],d).get()}},rename:function(u,h){var f=n[u];return f===void 0||(r[f]=1|r[f],n[h]=f,delete n[u],t[f][b]=h),i},remove:function(u){var h=n[u];if(h===void 0)return i;var f=t[h];if(Object.keys(f).length>2)return r[h]=2|r[h],i.set(u,null);if(a){for(s=h;s<t.length;s++)r[s]=3|r[s];for(s=h;s<t.length;s++)n[t[s][b]]--;t.splice(h,1),delete n[u]}else S(f,d).set(null),r[h]=6|r[h];return i},constructUpdate:function(){for(var u,h,f={},x=Object.keys(r),v=0;v<x.length;v++)h=x[v],u=T+"["+h+"]",t[h]?(1&r[h]&&(f[u+"."+b]=t[h][b]),2&r[h]&&(f[u+"."+d]=a?4&r[h]?null:t[h][d]:4&r[h]?null:S(t[h],d).get())):f[u]=null;return f}};return i}},15867:function(K,z,e){var S=e(73972);K.exports=function(k,l){for(var T=k._context.locale,b=0;b<2;b++){for(var d=k._context.locales,s=0;s<2;s++){var t=(d[T]||{}).dictionary;if(t){var o=t[l];if(o)return o}d=S.localeRegistry}var r=T.split("-")[0];if(r===T)break;T=r}return l}},47769:function(K,z,e){var S=e(72075).dfltConfig,k=e(75046),l=K.exports={};l.log=function(){var T;if(S.logging>1){var b=["LOG:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.trace.apply(console,b)}if(S.notifyOnLogging>1){var d=[];for(T=0;T<arguments.length;T++)d.push(arguments[T]);k(d.join("<br>"),"long")}},l.warn=function(){var T;if(S.logging>0){var b=["WARN:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.trace.apply(console,b)}if(S.notifyOnLogging>0){var d=[];for(T=0;T<arguments.length;T++)d.push(arguments[T]);k(d.join("<br>"),"stick")}},l.error=function(){var T;if(S.logging>0){var b=["ERROR:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.error.apply(console,b)}if(S.notifyOnLogging>0){var d=[];for(T=0;T<arguments.length;T++)d.push(arguments[T]);k(d.join("<br>"),"stick")}}},77310:function(K,z,e){var S=e(39898);K.exports=function(k,l,T){var b=k.selectAll("g."+T.replace(/\s/g,".")).data(l,function(s){return s[0].trace.uid});b.exit().remove(),b.enter().append("g").attr("class",T),b.order();var d=k.classed("rangeplot")?"nodeRangePlot3":"node3";return b.each(function(s){s[0][d]=S.select(this)}),b}},35657:function(K,z,e){var S=e(79576);z.init2dArray=function(k,l){for(var T=new Array(k),b=0;b<k;b++)T[b]=new Array(l);return T},z.transposeRagged=function(k){var l,T,b=0,d=k.length;for(l=0;l<d;l++)b=Math.max(b,k[l].length);var s=new Array(b);for(l=0;l<b;l++)for(s[l]=new Array(d),T=0;T<d;T++)s[l][T]=k[T][l];return s},z.dot=function(k,l){if(!k.length||!l.length||k.length!==l.length)return null;var T,b,d=k.length;if(k[0].length)for(T=new Array(d),b=0;b<d;b++)T[b]=z.dot(k[b],l);else if(l[0].length){var s=z.transposeRagged(l);for(T=new Array(s.length),b=0;b<s.length;b++)T[b]=z.dot(k,s[b])}else for(T=0,b=0;b<d;b++)T+=k[b]*l[b];return T},z.translationMatrix=function(k,l){return[[1,0,k],[0,1,l],[0,0,1]]},z.rotationMatrix=function(k){var l=k*Math.PI/180;return[[Math.cos(l),-Math.sin(l),0],[Math.sin(l),Math.cos(l),0],[0,0,1]]},z.rotationXYMatrix=function(k,l,T){return z.dot(z.dot(z.translationMatrix(l,T),z.rotationMatrix(k)),z.translationMatrix(-l,-T))},z.apply3DTransform=function(k){return function(){var l=arguments,T=arguments.length===1?l[0]:[l[0],l[1],l[2]||0];return z.dot(k,[T[0],T[1],T[2],1]).slice(0,3)}},z.apply2DTransform=function(k){return function(){var l=arguments;l.length===3&&(l=l[0]);var T=arguments.length===1?l[0]:[l[0],l[1]];return z.dot(k,[T[0],T[1],1]).slice(0,2)}},z.apply2DTransform2=function(k){var l=z.apply2DTransform(k);return function(T){return l(T.slice(0,2)).concat(l(T.slice(2,4)))}},z.convertCssMatrix=function(k){if(k){var l=k.length;if(l===16)return k;if(l===6)return[k[0],k[1],0,0,k[2],k[3],0,0,0,0,1,0,k[4],k[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},z.inverseTransformMatrix=function(k){var l=[];return S.invert(l,k),[[l[0],l[1],l[2],l[3]],[l[4],l[5],l[6],l[7]],[l[8],l[9],l[10],l[11]],[l[12],l[13],l[14],l[15]]]}},64872:function(K){K.exports={mod:function(z,e){var S=z%e;return S<0?S+e:S},modHalf:function(z,e){return Math.abs(z)>e/2?z-Math.round(z/e)*e:z}}},65487:function(K,z,e){var S=e(92770),k=e(73627).isArrayOrTypedArray;function l(r,n){return function(){var a,i,u,h,f,x=r;for(h=0;h<n.length-1;h++){if((a=n[h])===-1){for(i=!0,u=[],f=0;f<x.length;f++)u[f]=l(x[f],n.slice(h+1))(),u[f]!==u[0]&&(i=!1);return i?u[0]:u}if(typeof a=="number"&&!k(x)||typeof(x=x[a])!="object"||x===null)return}if(typeof x=="object"&&x!==null&&(u=x[n[h]])!==null)return u}}K.exports=function(r,n){if(S(n))n=String(n);else if(typeof n!="string"||n.substr(n.length-4)==="[-1]")throw"bad property string";for(var a,i,u,h=0,f=n.split(".");h<f.length;){if(a=String(f[h]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(a[1])f[h]=a[1];else{if(h!==0)throw"bad property string";f.splice(0,1)}for(i=a[2].substr(1,a[2].length-2).split("]["),u=0;u<i.length;u++)h++,f.splice(h,0,Number(i[u]))}h++}return typeof r!="object"?function(x,v,g){return{set:function(){throw"bad container"},get:function(){},astr:v,parts:g,obj:x}}(r,n,f):{set:d(r,f,n),get:l(r,f),astr:n,parts:f,obj:r}};var T=/(^|\.)args\[/;function b(r,n){return r===void 0||r===null&&!n.match(T)}function d(r,n,a){return function(i){var u,h,f=r,x="",v=b(i,a);for(h=0;h<n.length-1;h++){if(typeof(u=n[h])=="number"&&!k(f))throw"array index but container is not an array";if(u===-1){if(v=!t(f,n.slice(h+1),i,a))break;return}if(!o(f,u,n[h+1],v))break;if(typeof(f=f[u])!="object"||f===null)throw"container is not an object";x=s(x,u)}if(v){if(h===n.length-1&&(delete f[n[h]],Array.isArray(f)&&+n[h]==f.length-1))for(;f.length&&f[f.length-1]===void 0;)f.pop()}else f[n[h]]=i}}function s(r,n){var a=n;return S(n)?a="["+n+"]":r&&(a="."+n),r+a}function t(r,n,a,i){var u,h=k(a),f=!0,x=a,v=i.replace("-1",0),g=!h&&b(a,v),y=n[0];for(u=0;u<r.length;u++)v=i.replace("-1",u),h&&(g=b(x=a[u%a.length],v)),g&&(f=!1),o(r,u,y,g)&&d(r[u],n,i.replace("-1",u))(x);return f}function o(r,n,a,i){if(r[n]===void 0){if(i)return!1;r[n]=typeof a=="number"?[]:{}}return!0}},64213:function(K){K.exports=function(){}},75046:function(K,z,e){var S=e(39898),k=e(92770),l=[];K.exports=function(T,b){if(l.indexOf(T)===-1){l.push(T);var d=1e3;k(b)?d=b:b==="long"&&(d=3e3);var s=S.select("body").selectAll(".plotly-notifier").data([0]);s.enter().append("div").classed("plotly-notifier",!0),s.selectAll(".notifier-note").data(l).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(o){var r=S.select(this);r.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){r.transition().call(t)});for(var n=r.append("p"),a=o.split(/<br\s*\/?>/g),i=0;i<a.length;i++)i&&n.append("br"),n.append("span").text(a[i]);b==="stick"?r.transition().duration(350).style("opacity",1):r.transition().duration(700).style("opacity",1).transition().delay(d).call(t)})}function t(o){o.duration(700).style("opacity",0).each("end",function(r){var n=l.indexOf(r);n!==-1&&l.splice(n,1),S.select(this).remove()})}}},39918:function(K,z,e){var S=e(6964),k="data-savedcursor";K.exports=function(l,T){var b=l.attr(k);if(T){if(!b){for(var d=(l.attr("class")||"").split(" "),s=0;s<d.length;s++){var t=d[s];t.indexOf("cursor-")===0&&l.attr(k,t.substr(7)).classed(t,!1)}l.attr(k)||l.attr(k,"!!")}S(l,T)}else b&&(l.attr(k,null),b==="!!"?S(l):S(l,b))}},61082:function(K,z,e){var S=e(35657).dot,k=e(50606).BADNUM,l=K.exports={};l.tester=function(T){var b,d=T.slice(),s=d[0][0],t=s,o=d[0][1],r=o;for(d[d.length-1][0]===d[0][0]&&d[d.length-1][1]===d[0][1]||d.push(d[0]),b=1;b<d.length;b++)s=Math.min(s,d[b][0]),t=Math.max(t,d[b][0]),o=Math.min(o,d[b][1]),r=Math.max(r,d[b][1]);var n,a=!1;d.length===5&&(d[0][0]===d[1][0]?d[2][0]===d[3][0]&&d[0][1]===d[3][1]&&d[1][1]===d[2][1]&&(a=!0,n=function(h){return h[0]===d[0][0]}):d[0][1]===d[1][1]&&d[2][1]===d[3][1]&&d[0][0]===d[3][0]&&d[1][0]===d[2][0]&&(a=!0,n=function(h){return h[1]===d[0][1]}));var i=!0,u=d[0];for(b=1;b<d.length;b++)if(u[0]!==d[b][0]||u[1]!==d[b][1]){i=!1;break}return{xmin:s,xmax:t,ymin:o,ymax:r,pts:d,contains:a?function(h,f){var x=h[0],v=h[1];return!(x===k||x<s||x>t||v===k||v<o||v>r||f&&n(h))}:function(h,f){var x=h[0],v=h[1];if(x===k||x<s||x>t||v===k||v<o||v>r)return!1;var g,y,p,m,w,c=d.length,M=d[0][0],_=d[0][1],E=0;for(g=1;g<c;g++)if(y=M,p=_,M=d[g][0],_=d[g][1],!(x<(m=Math.min(y,M))||x>Math.max(y,M)||v>Math.max(p,_)))if(v<Math.min(p,_))x!==m&&E++;else{if(v===(w=M===y?v:p+(x-y)*(_-p)/(M-y)))return g!==1||!f;v<=w&&x!==m&&E++}return E%2==1},isRect:a,degenerate:i}},l.isSegmentBent=function(T,b,d,s){var t,o,r,n=T[b],a=[T[d][0]-n[0],T[d][1]-n[1]],i=S(a,a),u=Math.sqrt(i),h=[-a[1]/u,a[0]/u];for(t=b+1;t<d;t++)if(o=[T[t][0]-n[0],T[t][1]-n[1]],(r=S(o,a))<0||r>i||Math.abs(S(o,h))>s)return!0;return!1},l.filter=function(T,b){var d=[T[0]],s=0,t=0;function o(r){T.push(r);var n=d.length,a=s;d.splice(t+1);for(var i=a+1;i<T.length;i++)(i===T.length-1||l.isSegmentBent(T,a,i+1,b))&&(d.push(T[i]),d.length<n-2&&(s=i,t=d.length-1),a=i)}return T.length>1&&o(T.pop()),{addPt:o,raw:T,filtered:d}}},79749:function(K,z,e){var S=e(58617),k=e(98580);K.exports=function(l,T,b){var d=l._fullLayout,s=!0;return d._glcanvas.each(function(t){if(t.regl)t.regl.preloadCachedCode(b);else if(!t.pick||d._has("parcoords")){try{t.regl=k({canvas:this,attributes:{antialias:!t.pick,preserveDrawingBuffer:!0},pixelRatio:l._context.plotGlPixelRatio||e.g.devicePixelRatio,extensions:T||[],cachedCode:b||{}})}catch{s=!1}t.regl||(s=!1),s&&this.addEventListener("webglcontextlost",function(o){l&&l.emit&&l.emit("plotly_webglcontextlost",{event:o,layer:t.key})},!1)}}),s||S({container:d._glcontainer.node()}),s}},45142:function(K,z,e){var S=e(92770),k=e(35791);K.exports=function(l){var T;if(typeof(T=l&&l.hasOwnProperty("userAgent")?l.userAgent:function(){var n;return typeof navigator<"u"&&(n=navigator.userAgent),n&&n.headers&&typeof n.headers["user-agent"]=="string"&&(n=n.headers["user-agent"]),n}())!="string")return!0;var b=k({ua:{headers:{"user-agent":T}},tablet:!0,featureDetect:!1});if(!b){for(var d=T.split(" "),s=1;s<d.length;s++)if(d[s].indexOf("Safari")!==-1)for(var t=s-1;t>-1;t--){var o=d[t];if(o.substr(0,8)==="Version/"){var r=o.substr(8).split(".")[0];if(S(r)&&(r=+r),r>=13)return!0}}}return b}},75138:function(K){K.exports=function(z,e){if(e instanceof RegExp){for(var S=e.toString(),k=0;k<z.length;k++)if(z[k]instanceof RegExp&&z[k].toString()===S)return z;z.push(e)}else!e&&e!==0||z.indexOf(e)!==-1||z.push(e);return z}},10847:function(K,z,e){var S=e(71828),k=e(72075).dfltConfig,l={add:function(T,b,d,s,t){var o,r;T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},r=T.undoQueue.index,T.autoplay?T.undoQueue.inSequence||(T.autoplay=!1):(!T.undoQueue.sequence||T.undoQueue.beginSequence?(o={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},T.undoQueue.queue.splice(r,T.undoQueue.queue.length-r,o),T.undoQueue.index+=1):o=T.undoQueue.queue[r-1],T.undoQueue.beginSequence=!1,o&&(o.undo.calls.unshift(b),o.undo.args.unshift(d),o.redo.calls.push(s),o.redo.args.push(t)),T.undoQueue.queue.length>k.queueLength&&(T.undoQueue.queue.shift(),T.undoQueue.index--))},startSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!0,T.undoQueue.beginSequence=!0},stopSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!1,T.undoQueue.beginSequence=!1},undo:function(T){var b,d;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index<=0)){for(T.undoQueue.index--,b=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,d=0;d<b.undo.calls.length;d++)l.plotDo(T,b.undo.calls[d],b.undo.args[d]);T.undoQueue.inSequence=!1,T.autoplay=!1}},redo:function(T){var b,d;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index>=T.undoQueue.queue.length)){for(b=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,d=0;d<b.redo.calls.length;d++)l.plotDo(T,b.redo.calls[d],b.redo.args[d]);T.undoQueue.inSequence=!1,T.autoplay=!1,T.undoQueue.index++}},plotDo:function(T,b,d){T.autoplay=!0,d=function(s,t){for(var o,r=[],n=0;n<t.length;n++)o=t[n],r[n]=o===s?o:typeof o=="object"?Array.isArray(o)?S.extendDeep([],o):S.extendDeepAll({},o):o;return r}(T,d),b.apply(null,d)}};K.exports=l},30587:function(K,z){z.counter=function(e,S,k,l){var T=(S||"")+(k?"":"$"),b=l===!1?"":"^";return e==="xy"?new RegExp(b+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+T):new RegExp(b+e+"([2-9]|[1-9][0-9]+)?"+T)}},6962:function(K){var z=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,e=/^[^\.\[\]]+$/;K.exports=function(S,k){for(;k;){var l=S.match(z);if(l)S=l[1];else{if(!S.match(e))throw new Error("bad relativeAttr call:"+[S,k]);S=""}if(k.charAt(0)!=="^")break;k=k.slice(1)}return S&&k.charAt(0)!=="["?S+"."+k:S+k}},51332:function(K,z,e){var S=e(73627).isArrayOrTypedArray,k=e(41965);K.exports=function l(T,b){for(var d in b){var s=b[d],t=T[d];if(t!==s)if(d.charAt(0)==="_"||typeof s=="function"){if(d in T)continue;T[d]=s}else if(S(s)&&S(t)&&k(s[0])){if(d==="customdata"||d==="ids")continue;for(var o=Math.min(s.length,t.length),r=0;r<o;r++)t[r]!==s[r]&&k(s[r])&&k(t[r])&&l(t[r],s[r])}else k(s)&&k(t)&&(l(t,s),Object.keys(t).length||delete T[d])}}},65888:function(K,z,e){var S=e(92770),k=e(47769),l=e(23389),T=e(50606).BADNUM,b=1e-9;function d(r,n){return r<n}function s(r,n){return r<=n}function t(r,n){return r>n}function o(r,n){return r>=n}z.findBin=function(r,n,a){if(S(n.start))return a?Math.ceil((r-n.start)/n.size-b)-1:Math.floor((r-n.start)/n.size+b);var i,u,h=0,f=n.length,x=0,v=f>1?(n[f-1]-n[0])/(f-1):1;for(u=v>=0?a?d:s:a?o:t,r+=v*b*(a?-1:1)*(v>=0?1:-1);h<f&&x++<100;)u(n[i=Math.floor((h+f)/2)],r)?h=i+1:f=i;return x>90&&k.log("Long binary search..."),h-1},z.sorterAsc=function(r,n){return r-n},z.sorterDes=function(r,n){return n-r},z.distinctVals=function(r){var n,a=r.slice();for(a.sort(z.sorterAsc),n=a.length-1;n>-1&&a[n]===T;n--);for(var i,u=a[n]-a[0]||1,h=u/(n||1)/1e4,f=[],x=0;x<=n;x++){var v=a[x],g=v-i;i===void 0?(f.push(v),i=v):g>h&&(u=Math.min(u,g),f.push(v),i=v)}return{vals:f,minDiff:u}},z.roundUp=function(r,n,a){for(var i,u=0,h=n.length-1,f=0,x=a?0:1,v=a?1:0,g=a?Math.ceil:Math.floor;u<h&&f++<100;)n[i=g((u+h)/2)]<=r?u=i+x:h=i-v;return n[u]},z.sort=function(r,n){for(var a=0,i=0,u=1;u<r.length;u++){var h=n(r[u],r[u-1]);if(h<0?a=1:h>0&&(i=1),a&&i)return r.sort(n)}return i?r:r.reverse()},z.findIndexOfMin=function(r,n){n=n||l;for(var a,i=1/0,u=0;u<r.length;u++){var h=n(r[u]);h<i&&(i=h,a=u)}return a}},6964:function(K){K.exports=function(z,e){(z.attr("class")||"").split(" ").forEach(function(S){S.indexOf("cursor-")===0&&z.classed(S,!1)}),e&&z.classed("cursor-"+e,!0)}},58617:function(K,z,e){var S=e(7901),k=function(){};K.exports=function(l){for(var T in l)typeof l[T]=="function"&&(l[T]=k);l.destroy=function(){l.container.parentNode.removeChild(l.container)};var b=document.createElement("div");b.className="no-webgl",b.style.cursor="pointer",b.style.fontSize="24px",b.style.color=S.defaults[0],b.style.position="absolute",b.style.left=b.style.top="0px",b.style.width=b.style.height="100%",b.style["background-color"]=S.lightLine,b.style["z-index"]=30;var d=document.createElement("p");return d.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",d.style.position="relative",d.style.top="50%",d.style.left="50%",d.style.height="30%",d.style.width="50%",d.style.margin="-15% 0 0 -25%",b.appendChild(d),l.container.appendChild(b),l.container.style.background="#FFFFFF",l.container.onclick=function(){window.open("https://get.webgl.org")},!1}},78607:function(K){K.exports=function(z){return Object.keys(z).sort()}},80038:function(K,z,e){var S=e(92770),k=e(73627).isArrayOrTypedArray;z.aggNums=function(l,T,b,d){var s,t;if((!d||d>b.length)&&(d=b.length),S(T)||(T=!1),k(b[0])){for(t=new Array(d),s=0;s<d;s++)t[s]=z.aggNums(l,T,b[s]);b=t}for(s=0;s<d;s++)S(T)?S(b[s])&&(T=l(+T,+b[s])):T=b[s];return T},z.len=function(l){return z.aggNums(function(T){return T+1},0,l)},z.mean=function(l,T){return T||(T=z.len(l)),z.aggNums(function(b,d){return b+d},0,l)/T},z.midRange=function(l){if(l!==void 0&&l.length!==0)return(z.aggNums(Math.max,null,l)+z.aggNums(Math.min,null,l))/2},z.variance=function(l,T,b){return T||(T=z.len(l)),S(b)||(b=z.mean(l,T)),z.aggNums(function(d,s){return d+Math.pow(s-b,2)},0,l)/T},z.stdev=function(l,T,b){return Math.sqrt(z.variance(l,T,b))},z.median=function(l){var T=l.slice().sort();return z.interp(T,.5)},z.interp=function(l,T){if(!S(T))throw"n should be a finite number";if((T=T*l.length-.5)<0)return l[0];if(T>l.length-1)return l[l.length-1];var b=T%1;return b*l[Math.ceil(T)]+(1-b)*l[Math.floor(T)]}},78614:function(K,z,e){var S=e(25075);K.exports=function(k){return k?S(k):[0,0,0,1]}},63893:function(K,z,e){var S=e(39898),k=e(71828),l=k.strTranslate,T=e(77922),b=e(18783).LINE_SPACING,d=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;z.convertToTspans=function(I,N,R){var V=I.text(),F=!I.attr("data-notex")&&N&&N._context.typesetMath&&typeof MathJax<"u"&&V.match(d),D=S.select(I.node().parentNode);if(!D.empty()){var U=I.attr("class")?I.attr("class").split(" ")[0]:"text";return U+="-math",D.selectAll("svg."+U).remove(),D.selectAll("g."+U+"-group").remove(),I.style("display",null).attr({"data-unformatted":V,"data-math":"N"}),F?(N&&N._promises||[]).push(new Promise(function(J){I.style("display","none");var X=parseInt(I.node().style.fontSize,10),Z={fontSize:X};(function(Y,W,Q){var ne,re,ie,se,ge=parseInt((MathJax.version||"").split(".")[0]);if(ge===2||ge===3){var ue=function(){var le="math-output-"+k.randstr({},64),de=(se=S.select("body").append("div").attr({id:le}).style({visibility:"hidden",position:"absolute","font-size":W.fontSize+"px"}).text(Y.replace(s,"\\lt ").replace(t,"\\gt "))).node();return ge===2?MathJax.Hub.Typeset(de):MathJax.typeset([de])},ce=function(){var le=se.select(ge===2?".MathJax_SVG":".MathJax"),de=!le.empty()&&se.select("svg").node();if(de){var Ce,xe=de.getBoundingClientRect();Ce=ge===2?S.select("body").select("#MathJax_SVG_glyphs"):le.select("defs"),Q(le,Ce,xe)}else k.log("There was an error in the tex syntax.",Y),Q();se.remove()};ge===2?MathJax.Hub.Queue(function(){return re=k.extendDeepAll({},MathJax.Hub.config),ie=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:o},displayAlign:"left"})},function(){if((ne=MathJax.Hub.config.menuSettings.renderer)!=="SVG")return MathJax.Hub.setRenderer("SVG")},ue,ce,function(){if(ne!=="SVG")return MathJax.Hub.setRenderer(ne)},function(){return ie!==void 0&&(MathJax.Hub.processSectionDelay=ie),MathJax.Hub.Config(re)}):ge===3&&(re=k.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=o,(ne=MathJax.config.startup.output)!=="svg"&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){ue(),ce(),ne!=="svg"&&(MathJax.config.startup.output=ne),MathJax.config=re}))}else k.warn("No MathJax version:",MathJax.version)})(F[2],Z,function(Y,W,Q){D.selectAll("svg."+U).remove(),D.selectAll("g."+U+"-group").remove();var ne=Y&&Y.select("svg");if(!ne||!ne.node())return j(),void J();var re=D.append("g").classed(U+"-group",!0).attr({"pointer-events":"none","data-unformatted":V,"data-math":"Y"});re.node().appendChild(ne.node()),W&&W.node()&&ne.node().insertBefore(W.node().cloneNode(!0),ne.node().firstChild);var ie=Q.width,se=Q.height;ne.attr({class:U,height:se,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ge=I.node().style.fill||"black",ue=ne.select("g");ue.attr({fill:ge,stroke:ge});var ce=ue.node().getBoundingClientRect(),le=ce.width,de=ce.height;(le>ie||de>se)&&(ne.style("overflow","hidden"),le=(ce=ne.node().getBoundingClientRect()).width,de=ce.height);var Ce=+I.attr("x"),xe=+I.attr("y"),_e=-(X||I.node().getBoundingClientRect().height)/4;if(U[0]==="y")re.attr({transform:"rotate("+[-90,Ce,xe]+")"+l(-le/2,_e-de/2)});else if(U[0]==="l")xe=_e-de/2;else if(U[0]==="a"&&U.indexOf("atitle")!==0)Ce=0,xe=_e;else{var we=I.attr("text-anchor");Ce-=le*(we==="middle"?.5:we==="end"?1:0),xe=xe+_e-de/2}ne.attr({x:Ce,y:xe}),R&&R.call(I,re),J(re)})})):j(),I}function j(){D.empty()||(U=I.attr("class")+"-math",D.select("svg."+U).remove()),I.text("").style("white-space","pre");var J=function(X,Z){Z=Z.replace(h," ");var Y,W=!1,Q=[],ne=-1;function re(){ne++;var pe=document.createElementNS(T.svg,"tspan");S.select(pe).attr({class:"line",dy:ne*b+"em"}),X.appendChild(pe),Y=pe;var ye=Q;if(Q=[{node:pe}],ye.length>1)for(var ke=1;ke<ye.length;ke++)ie(ye[ke])}function ie(pe){var ye,ke=pe.type,De={};if(ke==="a"){ye="a";var Pe=pe.target,Re=pe.href,fe=pe.popup;Re&&(De={"xlink:xlink:show":Pe==="_blank"||Pe.charAt(0)!=="_"?"new":"replace",target:Pe,"xlink:xlink:href":Re},fe&&(De.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+fe+'");return false;'))}else ye="tspan";pe.style&&(De.style=pe.style);var ve=document.createElementNS(T.svg,ye);if(ke==="sup"||ke==="sub"){se(Y,i),Y.appendChild(ve);var Te=document.createElementNS(T.svg,"tspan");se(Te,i),S.select(Te).attr("dy",a[ke]),De.dy=n[ke],Y.appendChild(ve),Y.appendChild(Te)}else Y.appendChild(ve);S.select(ve).attr(De),Y=pe.node=ve,Q.push(pe)}function se(pe,ye){pe.appendChild(document.createTextNode(ye))}function ge(pe){if(Q.length!==1){var ye=Q.pop();pe!==ye.type&&k.log("Start tag <"+ye.type+"> doesnt match end tag <"+pe+">. Pretending it did match.",Z),Y=Q[Q.length-1].node}else k.log("Ignoring unexpected end tag </"+pe+">.",Z)}v.test(Z)?re():(Y=X,Q=[{node:X}]);for(var ue=Z.split(f),ce=0;ce<ue.length;ce++){var le=ue[ce],de=le.match(x),Ce=de&&de[2].toLowerCase(),xe=r[Ce];if(Ce==="br")re();else if(xe===void 0)se(Y,E(le));else if(de[1])ge(Ce);else{var _e=de[4],we={type:Ce},Ae=w(_e,g);if(Ae?(Ae=Ae.replace(c,"$1 fill:"),xe&&(Ae+=";"+xe)):xe&&(Ae=xe),Ae&&(we.style=Ae),Ce==="a"){W=!0;var $=w(_e,y);if($){var oe=L($);oe&&(we.href=oe,we.target=w(_e,p)||"_blank",we.popup=w(_e,m))}}ie(we)}}return W}(I.node(),V);J&&I.style("pointer-events","all"),z.positionText(I),R&&R.call(I)}};var s=/(<|&lt;|&#60;)/g,t=/(>|&gt;|&#62;)/g,o=[["$","$"],["\\(","\\)"]],r={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},n={sub:"0.3em",sup:"-0.6em"},a={sub:"-0.21em",sup:"0.42em"},i="​",u=["http:","https:","mailto:","",void 0,":"],h=z.NEWLINES=/(\r\n?|\n)/g,f=/(<[^<>]*>)/,x=/<(\/?)([^ >]*)(\s+(.*))?>/i,v=/<br(\s+.*)?>/i;z.BR_TAG_ALL=/<br(\s+.*)?>/gi;var g=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,y=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,p=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,m=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function w(I,N){if(!I)return null;var R=I.match(N),V=R&&(R[3]||R[4]);return V&&E(V)}var c=/(^|;)\s*color:/;z.plainText=function(I,N){for(var R=(N=N||{}).len!==void 0&&N.len!==-1?N.len:1/0,V=N.allowedTags!==void 0?N.allowedTags:["br"],F=3,D=I.split(f),U=[],j="",J=0,X=0;X<D.length;X++){var Z=D[X],Y=Z.match(x),W=Y&&Y[2].toLowerCase();if(W)V.indexOf(W)!==-1&&(U.push(Z),j=W);else{var Q=Z.length;if(J+Q<R)U.push(Z),J+=Q;else if(J<R){var ne=R-J;j&&(j!=="br"||ne<=F||Q<=F)&&U.pop(),R>F?U.push(Z.substr(0,ne-F)+"..."):U.push(Z.substr(0,ne));break}j=""}}return U.join("")};var M={mu:"μ",amp:"&",lt:"<",gt:">",nbsp:" ",times:"×",plusmn:"±",deg:"°"},_=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function E(I){return I.replace(_,function(N,R){return(R.charAt(0)==="#"?function(V){if(!(V>1114111)){var F=String.fromCodePoint;if(F)return F(V);var D=String.fromCharCode;return V<=65535?D(V):D(55232+(V>>10),V%1024+56320)}}(R.charAt(1)==="x"?parseInt(R.substr(2),16):parseInt(R.substr(1),10)):M[R])||N})}function L(I){var N=encodeURI(decodeURI(I)),R=document.createElement("a"),V=document.createElement("a");R.href=I,V.href=N;var F=R.protocol,D=V.protocol;return u.indexOf(F)!==-1&&u.indexOf(D)!==-1?N:""}function C(I,N,R){var V,F,D,U=R.horizontalAlign,j=R.verticalAlign||"top",J=I.node().getBoundingClientRect(),X=N.node().getBoundingClientRect();return F=j==="bottom"?function(){return J.bottom-V.height}:j==="middle"?function(){return J.top+(J.height-V.height)/2}:function(){return J.top},D=U==="right"?function(){return J.right-V.width}:U==="center"?function(){return J.left+(J.width-V.width)/2}:function(){return J.left},function(){V=this.node().getBoundingClientRect();var Z=D()-X.left,Y=F()-X.top,W=R.gd||{};if(R.gd){W._fullLayout._calcInverseTransform(W);var Q=k.apply3DTransform(W._fullLayout._invTransform)(Z,Y);Z=Q[0],Y=Q[1]}return this.style({top:Y+"px",left:Z+"px","z-index":1e3}),this}}z.convertEntities=E,z.sanitizeHTML=function(I){I=I.replace(h," ");for(var N=document.createElement("p"),R=N,V=[],F=I.split(f),D=0;D<F.length;D++){var U=F[D],j=U.match(x),J=j&&j[2].toLowerCase();if(J in r)if(j[1])V.length&&(R=V.pop());else{var X=j[4],Z=w(X,g),Y=Z?{style:Z}:{};if(J==="a"){var W=w(X,y);if(W){var Q=L(W);if(Q){Y.href=Q;var ne=w(X,p);ne&&(Y.target=ne)}}}var re=document.createElement(J);R.appendChild(re),S.select(re).attr(Y),R=re,V.push(re)}else R.appendChild(document.createTextNode(E(U)))}return N.innerHTML},z.lineCount=function(I){return I.selectAll("tspan.line").size()||1},z.positionText=function(I,N,R){return I.each(function(){var V=S.select(this);function F(j,J){return J===void 0?(J=V.attr(j))===null&&(V.attr(j,0),J=0):V.attr(j,J),J}var D=F("x",N),U=F("y",R);this.nodeName==="text"&&V.selectAll("tspan.line").attr({x:D,y:U})})};var O="1px ";z.makeTextShadow=function(I){return"1px 1px 1px "+I+", -1px -"+O+O+I+", 1px -"+O+O+I+", -"+O+O+O+I},z.makeEditable=function(I,N){var R=N.gd,V=N.delegate,F=S.dispatch("edit","input","cancel"),D=V||I;if(I.style({"pointer-events":V?"none":"all"}),I.size()!==1)throw new Error("boo");function U(){var J,X,Z,Y,W;J=S.select(R).select(".svg-container"),X=J.append("div"),Z=I.node().style,Y=parseFloat(Z.fontSize||12),(W=N.text)===void 0&&(W=I.attr("data-unformatted")),X.classed("plugin-editable editable",!0).style({position:"absolute","font-family":Z.fontFamily||"Arial","font-size":Y,color:N.fill||Z.fill||"black",opacity:1,"background-color":N.background||"transparent",outline:"#ffffff33 1px solid",margin:[-Y/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(W).call(C(I,J,N)).on("blur",function(){R._editing=!1,I.text(this.textContent).style({opacity:1});var re,ie=S.select(this).attr("class");(re=ie?"."+ie.split(" ")[0]+"-math-group":"[class*=-math-group]")&&S.select(I.node().parentNode).select(re).style({opacity:0});var se=this.textContent;S.select(this).transition().duration(0).remove(),S.select(document).on("mouseup",null),F.edit.call(I,se)}).on("focus",function(){var re=this;R._editing=!0,S.select(document).on("mouseup",function(){if(S.event.target===re)return!1;document.activeElement===X.node()&&X.node().blur()})}).on("keyup",function(){S.event.which===27?(R._editing=!1,I.style({opacity:1}),S.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),F.cancel.call(I,this.textContent)):(F.input.call(I,this.textContent),S.select(this).call(C(I,J,N)))}).on("keydown",function(){S.event.which===13&&this.blur()}).call(j),I.style({opacity:0});var Q,ne=D.attr("class");(Q=ne?"."+ne.split(" ")[0]+"-math-group":"[class*=-math-group]")&&S.select(I.node().parentNode).select(Q).style({opacity:0})}function j(J){var X=J.node(),Z=document.createRange();Z.selectNodeContents(X);var Y=window.getSelection();Y.removeAllRanges(),Y.addRange(Z),X.focus()}return N.immediate?U():D.on("click",U),S.rebind(I,F,"on")}},79990:function(K,z){var e={};function S(k){k&&k.timer!==null&&(clearTimeout(k.timer),k.timer=null)}z.throttle=function(k,l,T){var b=e[k],d=Date.now();if(!b){for(var s in e)e[s].ts<d-6e4&&delete e[s];b=e[k]={ts:0,timer:null}}function t(){T(),b.ts=Date.now(),b.onDone&&(b.onDone(),b.onDone=null)}S(b),d>b.ts+l?t():b.timer=setTimeout(function(){t(),b.timer=null},l)},z.done=function(k){var l=e[k];return l&&l.timer?new Promise(function(T){var b=l.onDone;l.onDone=function(){b&&b(),T(),l.onDone=null}}):Promise.resolve()},z.clear=function(k){if(k)S(e[k]),delete e[k];else for(var l in e)z.clear(l)}},58163:function(K,z,e){var S=e(92770);K.exports=function(k,l){if(k>0)return Math.log(k)/Math.LN10;var T=Math.log(Math.min(l[0],l[1]))/Math.LN10;return S(T)||(T=Math.log(Math.max(l[0],l[1]))/Math.LN10-6),T}},90973:function(K,z,e){var S=K.exports={},k=e(78776).locationmodeToLayer,l=e(96892).zL;S.getTopojsonName=function(T){return[T.scope.replace(/ /g,"-"),"_",T.resolution.toString(),"m"].join("")},S.getTopojsonPath=function(T,b){return T+b+".json"},S.getTopojsonFeatures=function(T,b){var d=k[T.locationmode],s=b.objects[d];return l(b,s).features}},37815:function(K){K.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},92177:function(K){K.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},14458:function(K,z,e){var S=e(73972);K.exports=function(k){for(var l,T,b=S.layoutArrayContainers,d=S.layoutArrayRegexes,s=k.split("[")[0],t=0;t<d.length;t++)if((T=k.match(d[t]))&&T.index===0){l=T[0];break}if(l||(l=b[b.indexOf(s)]),!l)return!1;var o=k.substr(l.length);return o?!!(T=o.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:l,index:Number(T[1]),property:T[3]||""}:{array:l,index:"",property:""}}},30962:function(K,z,e){var S=e(71828),k=S.extendFlat,l=S.isPlainObject,T={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},b={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},d=T.flags.slice().concat(["fullReplot"]),s=b.flags.slice().concat("layoutReplot");function t(n){for(var a={},i=0;i<n.length;i++)a[n[i]]=!1;return a}function o(n,a,i){var u=k({},n);for(var h in u){var f=u[h];l(f)&&(u[h]=r(f,a,0,h))}return i==="from-root"&&(u.editType=a),u}function r(n,a,i,u){if(n.valType){var h=k({},n);if(h.editType=a,Array.isArray(n.items)){h.items=new Array(n.items.length);for(var f=0;f<n.items.length;f++)h.items[f]=r(n.items[f],a)}return h}return o(n,a,u.charAt(0)==="_"?"nested":"from-root")}K.exports={traces:T,layout:b,traceFlags:function(){return t(d)},layoutFlags:function(){return t(s)},update:function(n,a){var i=a.editType;if(i&&i!=="none")for(var u=i.split("+"),h=0;h<u.length;h++)n[u[h]]=!0},overrideAll:o}},58377:function(K,z,e){var S=e(92770),k=e(27812),l=e(73972),T=e(71828),b=e(74875),d=e(41675),s=e(7901),t=d.cleanId,o=d.getFromTrace,r=l.traceIs;function n(y,p){var m=y[p],w=p.charAt(0);m&&m!=="paper"&&(y[p]=t(m,w,!0))}function a(y){function p(m,w){var c=y[m],M=y.title&&y.title[w];c&&!M&&(y.title||(y.title={}),y.title[w]=y[m],delete y[m])}y&&(typeof y.title!="string"&&typeof y.title!="number"||(y.title={text:y.title}),p("titlefont","font"),p("titleposition","position"),p("titleside","side"),p("titleoffset","offset"))}function i(y){if(!T.isPlainObject(y))return!1;var p=y.name;return delete y.name,delete y.showlegend,(typeof p=="string"||typeof p=="number")&&String(p)}function u(y,p,m,w){if(m&&!w)return y;if(w&&!m||!y.trim())return p;if(!p.trim())return y;var c,M=Math.min(y.length,p.length);for(c=0;c<M&&y.charAt(c)===p.charAt(c);c++);return y.substr(0,c).trim()}function h(y){var p="middle",m="center";return typeof y=="string"&&(y.indexOf("top")!==-1?p="top":y.indexOf("bottom")!==-1&&(p="bottom"),y.indexOf("left")!==-1?m="left":y.indexOf("right")!==-1&&(m="right")),p+" "+m}function f(y,p){return p in y&&typeof y[p]=="object"&&Object.keys(y[p]).length===0}z.clearPromiseQueue=function(y){Array.isArray(y._promises)&&y._promises.length>0&&T.log("Clearing previous rejected promises from queue."),y._promises=[]},z.cleanLayout=function(y){var p,m;y||(y={}),y.xaxis1&&(y.xaxis||(y.xaxis=y.xaxis1),delete y.xaxis1),y.yaxis1&&(y.yaxis||(y.yaxis=y.yaxis1),delete y.yaxis1),y.scene1&&(y.scene||(y.scene=y.scene1),delete y.scene1);var w=(b.subplotsRegistry.cartesian||{}).attrRegex,c=(b.subplotsRegistry.polar||{}).attrRegex,M=(b.subplotsRegistry.ternary||{}).attrRegex,_=(b.subplotsRegistry.gl3d||{}).attrRegex,E=Object.keys(y);for(p=0;p<E.length;p++){var L=E[p];if(w&&w.test(L)){var C=y[L];C.anchor&&C.anchor!=="free"&&(C.anchor=t(C.anchor)),C.overlaying&&(C.overlaying=t(C.overlaying)),C.type||(C.isdate?C.type="date":C.islog?C.type="log":C.isdate===!1&&C.islog===!1&&(C.type="linear")),C.autorange!=="withzero"&&C.autorange!=="tozero"||(C.autorange=!0,C.rangemode="tozero"),delete C.islog,delete C.isdate,delete C.categories,f(C,"domain")&&delete C.domain,C.autotick!==void 0&&(C.tickmode===void 0&&(C.tickmode=C.autotick?"auto":"linear"),delete C.autotick),a(C)}else if(c&&c.test(L))a(y[L].radialaxis);else if(M&&M.test(L)){var O=y[L];a(O.aaxis),a(O.baxis),a(O.caxis)}else if(_&&_.test(L)){var I=y[L],N=I.cameraposition;if(Array.isArray(N)&&N[0].length===4){var R=N[0],V=N[1],F=N[2],D=k([],R),U=[];for(m=0;m<3;++m)U[m]=V[m]+F*D[2+4*m];I.camera={eye:{x:U[0],y:U[1],z:U[2]},center:{x:V[0],y:V[1],z:V[2]},up:{x:0,y:0,z:1}},delete I.cameraposition}a(I.xaxis),a(I.yaxis),a(I.zaxis)}}var j=Array.isArray(y.annotations)?y.annotations.length:0;for(p=0;p<j;p++){var J=y.annotations[p];T.isPlainObject(J)&&(J.ref&&(J.ref==="paper"?(J.xref="paper",J.yref="paper"):J.ref==="data"&&(J.xref="x",J.yref="y"),delete J.ref),n(J,"xref"),n(J,"yref"))}var X=Array.isArray(y.shapes)?y.shapes.length:0;for(p=0;p<X;p++){var Z=y.shapes[p];T.isPlainObject(Z)&&(n(Z,"xref"),n(Z,"yref"))}var Y=Array.isArray(y.images)?y.images.length:0;for(p=0;p<Y;p++){var W=y.images[p];T.isPlainObject(W)&&(n(W,"xref"),n(W,"yref"))}var Q=y.legend;return Q&&(Q.x>3?(Q.x=1.02,Q.xanchor="left"):Q.x<-2&&(Q.x=-.02,Q.xanchor="right"),Q.y>3?(Q.y=1.02,Q.yanchor="bottom"):Q.y<-2&&(Q.y=-.02,Q.yanchor="top")),a(y),y.dragmode==="rotate"&&(y.dragmode="orbit"),s.clean(y),y.template&&y.template.layout&&z.cleanLayout(y.template.layout),y},z.cleanData=function(y){for(var p=0;p<y.length;p++){var m,w=y[p];if(w.type==="histogramy"&&"xbins"in w&&!("ybins"in w)&&(w.ybins=w.xbins,delete w.xbins),w.error_y&&"opacity"in w.error_y){var c=s.defaults,M=w.error_y.color||(r(w,"bar")?s.defaultLine:c[p%c.length]);w.error_y.color=s.addOpacity(s.rgb(M),s.opacity(M)*w.error_y.opacity),delete w.error_y.opacity}if("bardir"in w&&(w.bardir!=="h"||!r(w,"bar")&&w.type.substr(0,9)!=="histogram"||(w.orientation="h",z.swapXYData(w)),delete w.bardir),w.type==="histogramy"&&z.swapXYData(w),w.type!=="histogramx"&&w.type!=="histogramy"||(w.type="histogram"),"scl"in w&&!("colorscale"in w)&&(w.colorscale=w.scl,delete w.scl),"reversescl"in w&&!("reversescale"in w)&&(w.reversescale=w.reversescl,delete w.reversescl),w.xaxis&&(w.xaxis=t(w.xaxis,"x")),w.yaxis&&(w.yaxis=t(w.yaxis,"y")),r(w,"gl3d")&&w.scene&&(w.scene=b.subplotsRegistry.gl3d.cleanId(w.scene)),!r(w,"pie-like")&&!r(w,"bar-like"))if(Array.isArray(w.textposition))for(m=0;m<w.textposition.length;m++)w.textposition[m]=h(w.textposition[m]);else w.textposition&&(w.textposition=h(w.textposition));var _=l.getModule(w);if(_&&_.colorbar){var E=_.colorbar.container,L=E?w[E]:w;L&&L.colorscale&&(L.colorscale==="YIGnBu"&&(L.colorscale="YlGnBu"),L.colorscale==="YIOrRd"&&(L.colorscale="YlOrRd"))}if(w.type==="surface"&&T.isPlainObject(w.contours)){var C=["x","y","z"];for(m=0;m<C.length;m++){var O=w.contours[C[m]];T.isPlainObject(O)&&(O.highlightColor&&(O.highlightcolor=O.highlightColor,delete O.highlightColor),O.highlightWidth&&(O.highlightwidth=O.highlightWidth,delete O.highlightWidth))}}if(w.type==="candlestick"||w.type==="ohlc"){var I=(w.increasing||{}).showlegend!==!1,N=(w.decreasing||{}).showlegend!==!1,R=i(w.increasing),V=i(w.decreasing);if(R!==!1&&V!==!1){var F=u(R,V,I,N);F&&(w.name=F)}else!R&&!V||w.name||(w.name=R||V)}if(Array.isArray(w.transforms)){var D=w.transforms;for(m=0;m<D.length;m++){var U=D[m];if(T.isPlainObject(U))switch(U.type){case"filter":U.filtersrc&&(U.target=U.filtersrc,delete U.filtersrc),U.calendar&&(U.valuecalendar||(U.valuecalendar=U.calendar),delete U.calendar);break;case"groupby":if(U.styles=U.styles||U.style,U.styles&&!Array.isArray(U.styles)){var j=U.styles,J=Object.keys(j);U.styles=[];for(var X=0;X<J.length;X++)U.styles.push({target:J[X],value:j[J[X]]})}}}}f(w,"line")&&delete w.line,"marker"in w&&(f(w.marker,"line")&&delete w.marker.line,f(w,"marker")&&delete w.marker),s.clean(w),w.autobinx&&(delete w.autobinx,delete w.xbins),w.autobiny&&(delete w.autobiny,delete w.ybins),a(w),w.colorbar&&a(w.colorbar),w.marker&&w.marker.colorbar&&a(w.marker.colorbar),w.line&&w.line.colorbar&&a(w.line.colorbar),w.aaxis&&a(w.aaxis),w.baxis&&a(w.baxis)}},z.swapXYData=function(y){var p;if(T.swapAttrs(y,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(y.z)&&Array.isArray(y.z[0])&&(y.transpose?delete y.transpose:y.transpose=!0),y.error_x&&y.error_y){var m=y.error_y,w="copy_ystyle"in m?m.copy_ystyle:!(m.color||m.thickness||m.width);T.swapAttrs(y,["error_?.copy_ystyle"]),w&&T.swapAttrs(y,["error_?.color","error_?.thickness","error_?.width"])}if(typeof y.hoverinfo=="string"){var c=y.hoverinfo.split("+");for(p=0;p<c.length;p++)c[p]==="x"?c[p]="y":c[p]==="y"&&(c[p]="x");y.hoverinfo=c.join("+")}},z.coerceTraceIndices=function(y,p){if(S(p))return[p];if(!Array.isArray(p)||!p.length)return y.data.map(function(c,M){return M});if(Array.isArray(p)){for(var m=[],w=0;w<p.length;w++)T.isIndex(p[w],y.data.length)?m.push(p[w]):T.warn("trace index (",p[w],") is not a number or is out of bounds");return m}return p},z.manageArrayContainers=function(y,p,m){var w=y.obj,c=y.parts,M=c.length,_=c[M-1],E=S(_);if(E&&p===null){var L=c.slice(0,M-1).join(".");T.nestedProperty(w,L).get().splice(_,1)}else E&&y.get()===void 0&&y.get()===void 0&&(m[y.astr]=null),y.set(p)};var x=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function v(y){var p=y.search(x);if(p>0)return y.substr(0,p)}z.hasParent=function(y,p){for(var m=v(p);m;){if(m in y)return!0;m=v(m)}return!1};var g=["x","y","z"];z.clearAxisTypes=function(y,p,m){for(var w=0;w<p.length;w++)for(var c=y._fullData[w],M=0;M<3;M++){var _=o(y,c,g[M]);if(_&&_.type!=="log"){var E=_._name,L=_._id.substr(1);if(L.substr(0,5)==="scene"){if(m[L]!==void 0)continue;E=L+"."+E}var C=E+".type";m[E]===void 0&&m[C]===void 0&&T.nestedProperty(y.layout,C).set(null)}}}},10641:function(K,z,e){var S=e(72391);z._doPlot=S._doPlot,z.newPlot=S.newPlot,z.restyle=S.restyle,z.relayout=S.relayout,z.redraw=S.redraw,z.update=S.update,z._guiRestyle=S._guiRestyle,z._guiRelayout=S._guiRelayout,z._guiUpdate=S._guiUpdate,z._storeDirectGUIEdit=S._storeDirectGUIEdit,z.react=S.react,z.extendTraces=S.extendTraces,z.prependTraces=S.prependTraces,z.addTraces=S.addTraces,z.deleteTraces=S.deleteTraces,z.moveTraces=S.moveTraces,z.purge=S.purge,z.addFrames=S.addFrames,z.deleteFrames=S.deleteFrames,z.animate=S.animate,z.setPlotConfig=S.setPlotConfig,z.toImage=e(403),z.validate=e(84936),z.downloadImage=e(7239);var k=e(96318);z.makeTemplate=k.makeTemplate,z.validateTemplate=k.validateTemplate},6611:function(K,z,e){var S=e(41965),k=e(64213),l=e(47769),T=e(65888).sorterAsc,b=e(73972);z.containerArrayMatch=e(14458);var d=z.isAddVal=function(t){return t==="add"||S(t)},s=z.isRemoveVal=function(t){return t===null||t==="remove"};z.applyContainerArrayChanges=function(t,o,r,n,a){var i=o.astr,u=b.getComponentMethod(i,"supplyLayoutDefaults"),h=b.getComponentMethod(i,"draw"),f=b.getComponentMethod(i,"drawOne"),x=n.replot||n.recalc||u===k||h===k,v=t.layout,g=t._fullLayout;if(r[""]){Object.keys(r).length>1&&l.warn("Full array edits are incompatible with other edits",i);var y=r[""][""];if(s(y))o.set(null);else{if(!Array.isArray(y))return l.warn("Unrecognized full array edit value",i,y),!0;o.set(y)}return!x&&(u(v,g),h(t),!0)}var p,m,w,c,M,_,E,L,C=Object.keys(r).map(Number).sort(T),O=o.get(),I=O||[],N=a(g,i).get(),R=[],V=-1,F=I.length;for(p=0;p<C.length;p++)if(c=r[w=C[p]],M=Object.keys(c),_=c[""],E=d(_),w<0||w>I.length-(E?0:1))l.warn("index out of range",i,w);else if(_!==void 0)M.length>1&&l.warn("Insertion & removal are incompatible with edits to the same index.",i,w),s(_)?R.push(w):E?(_==="add"&&(_={}),I.splice(w,0,_),N&&N.splice(w,0,{})):l.warn("Unrecognized full object edit value",i,w,_),V===-1&&(V=w);else for(m=0;m<M.length;m++)L=i+"["+w+"].",a(I[w],M[m],L).set(c[M[m]]);for(p=R.length-1;p>=0;p--)I.splice(R[p],1),N&&N.splice(R[p],1);if(I.length?O||o.set(I):o.set(null),x)return!1;if(u(v,g),f!==k){var D;if(V===-1)D=C;else{for(F=Math.max(I.length,F),D=[],p=0;p<C.length&&!((w=C[p])>=V);p++)D.push(w);for(p=V;p<F;p++)D.push(p)}for(p=0;p<D.length;p++)f(t,D[p])}else h(t);return!0}},72391:function(K,z,e){var S=e(39898),k=e(92770),l=e(57035),T=e(71828),b=T.nestedProperty,d=e(11086),s=e(10847),t=e(73972),o=e(86281),r=e(74875),n=e(89298),a=e(91424),i=e(7901),u=e(4305).initInteractions,h=e(77922),f=e(47322).clearOutline,x=e(72075).dfltConfig,v=e(6611),g=e(58377),y=e(61549),p=e(30962),m=e(85555).AX_NAME_PATTERN,w=0;function c($){var oe=$._fullLayout;oe._redrawFromAutoMarginCount?oe._redrawFromAutoMarginCount--:$.emit("plotly_afterplot")}function M($,oe){try{$._fullLayout._paper.style("background",oe)}catch(pe){T.error(pe)}}function _($,oe){M($,i.combine(oe,"white"))}function E($,oe){if(!$._context){$._context=T.extendDeep({},x);var pe=S.select("base");$._context._baseUrl=pe.size()&&pe.attr("href")?window.location.href.split("#")[0]:""}var ye,ke,De,Pe=$._context;if(oe){for(ke=Object.keys(oe),ye=0;ye<ke.length;ye++)(De=ke[ye])!=="editable"&&De!=="edits"&&De in Pe&&(De==="setBackground"&&oe[De]==="opaque"?Pe[De]=_:Pe[De]=oe[De]);oe.plot3dPixelRatio&&!Pe.plotGlPixelRatio&&(Pe.plotGlPixelRatio=Pe.plot3dPixelRatio);var Re=oe.editable;if(Re!==void 0)for(Pe.editable=Re,ke=Object.keys(Pe.edits),ye=0;ye<ke.length;ye++)Pe.edits[ke[ye]]=Re;if(oe.edits)for(ke=Object.keys(oe.edits),ye=0;ye<ke.length;ye++)(De=ke[ye])in Pe.edits&&(Pe.edits[De]=oe.edits[De]);Pe._exportedPlot=oe._exportedPlot}Pe.staticPlot&&(Pe.editable=!1,Pe.edits={},Pe.autosizable=!1,Pe.scrollZoom=!1,Pe.doubleClick=!1,Pe.showTips=!1,Pe.showLink=!1,Pe.displayModeBar=!1),Pe.displayModeBar!=="hover"||l||(Pe.displayModeBar=!0),Pe.setBackground!=="transparent"&&typeof Pe.setBackground=="function"||(Pe.setBackground=M),Pe._hasZeroHeight=Pe._hasZeroHeight||$.clientHeight===0,Pe._hasZeroWidth=Pe._hasZeroWidth||$.clientWidth===0;var fe=Pe.scrollZoom,ve=Pe._scrollZoom={};if(fe===!0)ve.cartesian=1,ve.gl3d=1,ve.geo=1,ve.mapbox=1;else if(typeof fe=="string"){var Te=fe.split("+");for(ye=0;ye<Te.length;ye++)ve[Te[ye]]=1}else fe!==!1&&(ve.gl3d=1,ve.geo=1,ve.mapbox=1)}function L($,oe){var pe,ye,ke=oe+1,De=[];for(pe=0;pe<$.length;pe++)(ye=$[pe])<0?De.push(ke+ye):De.push(ye);return De}function C($,oe,pe){var ye,ke;for(ye=0;ye<oe.length;ye++){if((ke=oe[ye])!==parseInt(ke,10))throw new Error("all values in "+pe+" must be integers");if(ke>=$.data.length||ke<-$.data.length)throw new Error(pe+" must be valid indices for gd.data.");if(oe.indexOf(ke,ye+1)>-1||ke>=0&&oe.indexOf(-$.data.length+ke)>-1||ke<0&&oe.indexOf($.data.length+ke)>-1)throw new Error("each index in "+pe+" must be unique.")}}function O($,oe,pe){if(!Array.isArray($.data))throw new Error("gd.data must be an array.");if(oe===void 0)throw new Error("currentIndices is a required argument.");if(Array.isArray(oe)||(oe=[oe]),C($,oe,"currentIndices"),pe===void 0||Array.isArray(pe)||(pe=[pe]),pe!==void 0&&C($,pe,"newIndices"),pe!==void 0&&oe.length!==pe.length)throw new Error("current and new indices must be of equal length.")}function I($,oe,pe,ye,ke){(function(He,Ve,nt,tt){var ot=T.isPlainObject(tt);if(!Array.isArray(He.data))throw new Error("gd.data must be an array");if(!T.isPlainObject(Ve))throw new Error("update must be a key:value object");if(nt===void 0)throw new Error("indices must be an integer or array of integers");for(var pt in C(He,nt,"indices"),Ve){if(!Array.isArray(Ve[pt])||Ve[pt].length!==nt.length)throw new Error("attribute "+pt+" must be an array of length equal to indices array length");if(ot&&(!(pt in tt)||!Array.isArray(tt[pt])||tt[pt].length!==Ve[pt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}})($,oe,pe,ye);for(var De=function(He,Ve,nt,tt){var ot,pt,Tt,yt,dt,Pt=T.isPlainObject(tt),Et=[];for(var Ot in Array.isArray(nt)||(nt=[nt]),nt=L(nt,He.data.length-1),Ve)for(var Nt=0;Nt<nt.length;Nt++){if(ot=He.data[nt[Nt]],pt=(Tt=b(ot,Ot)).get(),yt=Ve[Ot][Nt],!T.isArrayOrTypedArray(yt))throw new Error("attribute: "+Ot+" index: "+Nt+" must be an array");if(!T.isArrayOrTypedArray(pt))throw new Error("cannot extend missing or non-array attribute: "+Ot);if(pt.constructor!==yt.constructor)throw new Error("cannot extend array with an array of a different type: "+Ot);dt=Pt?tt[Ot][Nt]:tt,k(dt)||(dt=-1),Et.push({prop:Tt,target:pt,insert:yt,maxp:Math.floor(dt)})}return Et}($,oe,pe,ye),Pe={},Re={},fe=0;fe<De.length;fe++){var ve=De[fe].prop,Te=De[fe].maxp,ze=ke(De[fe].target,De[fe].insert,Te);ve.set(ze[0]),Array.isArray(Pe[ve.astr])||(Pe[ve.astr]=[]),Pe[ve.astr].push(ze[1]),Array.isArray(Re[ve.astr])||(Re[ve.astr]=[]),Re[ve.astr].push(De[fe].target.length)}return{update:Pe,maxPoints:Re}}function N($,oe){var pe=new $.constructor($.length+oe.length);return pe.set($),pe.set(oe,$.length),pe}function R($,oe,pe,ye){$=T.getGraphDiv($),g.clearPromiseQueue($);var ke={};if(typeof oe=="string")ke[oe]=pe;else{if(!T.isPlainObject(oe))return T.warn("Restyle fail.",oe,pe,ye),Promise.reject();ke=T.extendFlat({},oe),ye===void 0&&(ye=pe)}Object.keys(ke).length&&($.changed=!0);var De=g.coerceTraceIndices($,ye),Pe=U($,ke,De),Re=Pe.flags;Re.calc&&($.calcdata=void 0),Re.clearAxisTypes&&g.clearAxisTypes($,De,{});var fe=[];Re.fullReplot?fe.push(z._doPlot):(fe.push(r.previousPromises),r.supplyDefaults($),Re.markerSize&&(r.doCalcdata($),Z(fe)),Re.style&&fe.push(y.doTraceStyle),Re.colorbars&&fe.push(y.doColorBars),fe.push(c)),fe.push(r.rehover,r.redrag,r.reselect),s.add($,R,[$,Pe.undoit,Pe.traces],R,[$,Pe.redoit,Pe.traces]);var ve=T.syncOrAsync(fe,$);return ve&&ve.then||(ve=Promise.resolve()),ve.then(function(){return $.emit("plotly_restyle",Pe.eventData),$})}function V($){return $===void 0?null:$}function F($,oe){return oe?function(pe,ye,ke){var De=b(pe,ye),Pe=De.set;return De.set=function(Re){D((ke||"")+ye,De.get(),Re,$),Pe(Re)},De}:b}function D($,oe,pe,ye){if(Array.isArray(oe)||Array.isArray(pe))for(var ke=Array.isArray(oe)?oe:[],De=Array.isArray(pe)?pe:[],Pe=Math.max(ke.length,De.length),Re=0;Re<Pe;Re++)D($+"["+Re+"]",ke[Re],De[Re],ye);else if(T.isPlainObject(oe)||T.isPlainObject(pe)){var fe=T.isPlainObject(oe)?oe:{},ve=T.isPlainObject(pe)?pe:{},Te=T.extendFlat({},fe,ve);for(var ze in Te)D($+"."+ze,fe[ze],ve[ze],ye)}else ye[$]===void 0&&(ye[$]=V(oe))}function U($,oe,pe){var ye,ke=$._fullLayout,De=$._fullData,Pe=$.data,Re=ke._guiEditing,fe=F(ke._preGUI,Re),ve=T.extendDeepAll({},oe);j(oe);var Te,ze=p.traceFlags(),He={},Ve={};function nt(){return pe.map(function(){})}function tt(qt){var Yt=n.id2name(qt);Te.indexOf(Yt)===-1&&Te.push(Yt)}function ot(qt){return"LAYOUT"+qt+".autorange"}function pt(qt){return"LAYOUT"+qt+".range"}function Tt(qt){for(var Yt=qt;Yt<De.length;Yt++)if(De[Yt]._input===Pe[qt])return De[Yt]}function yt(qt,Yt,Kt){if(Array.isArray(qt))qt.forEach(function(xn){yt(xn,Yt,Kt)});else if(!(qt in oe)&&!g.hasParent(oe,qt)){var pn;if(qt.substr(0,6)==="LAYOUT")pn=fe($.layout,qt.replace("LAYOUT",""));else{var nn=pe[Kt];pn=F(ke._tracePreGUI[Tt(nn)._fullInput.uid],Re)(Pe[nn],qt)}qt in Ve||(Ve[qt]=nt()),Ve[qt][Kt]===void 0&&(Ve[qt][Kt]=V(pn.get())),Yt!==void 0&&pn.set(Yt)}}function dt(qt){return function(Yt){return De[Yt][qt]}}function Pt(qt){return function(Yt,Kt){return Yt===!1?De[pe[Kt]][qt]:null}}for(var Et in oe){if(g.hasParent(oe,Et))throw new Error("cannot set "+Et+" and a parent attribute simultaneously");var Ot,Nt,zt,Ze,Ye,je,Ke=oe[Et];if(Et!=="autobinx"&&Et!=="autobiny"||(Et=Et.charAt(Et.length-1)+"bins",Ke=Array.isArray(Ke)?Ke.map(Pt(Et)):Ke===!1?pe.map(dt(Et)):null),He[Et]=Ke,Et.substr(0,6)!=="LAYOUT"){for(Ve[Et]=nt(),ye=0;ye<pe.length;ye++)if(Ot=Pe[pe[ye]],Nt=Tt(pe[ye]),Ze=(zt=F(ke._tracePreGUI[Nt._fullInput.uid],Re)(Ot,Et)).get(),(Ye=Array.isArray(Ke)?Ke[ye%Ke.length]:Ke)!==void 0){var st=zt.parts[zt.parts.length-1],Se=Et.substr(0,Et.length-st.length-1),Ie=Se?Se+".":"",We=Se?b(Nt,Se).get():Nt;if((je=o.getTraceValObject(Nt,zt.parts))&&je.impliedEdits&&Ye!==null)for(var it in je.impliedEdits)yt(T.relativeAttr(Et,it),je.impliedEdits[it],ye);else if(st!=="thicknessmode"&&st!=="lenmode"||Ze===Ye||Ye!=="fraction"&&Ye!=="pixels"||!We){if(Et==="type"&&(Ye==="pie"!=(Ze==="pie")||Ye==="funnelarea"!=(Ze==="funnelarea"))){var lt="x",gt="y";Ye!=="bar"&&Ze!=="bar"||Ot.orientation!=="h"||(lt="y",gt="x"),T.swapAttrs(Ot,["?","?src"],"labels",lt),T.swapAttrs(Ot,["d?","?0"],"label",lt),T.swapAttrs(Ot,["?","?src"],"values",gt),Ze==="pie"||Ze==="funnelarea"?(b(Ot,"marker.color").set(b(Ot,"marker.colors").get()),ke._pielayer.selectAll("g.trace").remove()):t.traceIs(Ot,"cartesian")&&b(Ot,"marker.colors").set(b(Ot,"marker.color").get())}}else{var At=ke._size,kt=We.orient,ht=kt==="top"||kt==="bottom";if(st==="thicknessmode"){var St=ht?At.h:At.w;yt(Ie+"thickness",We.thickness*(Ye==="fraction"?1/St:St),ye)}else{var vt=ht?At.w:At.h;yt(Ie+"len",We.len*(Ye==="fraction"?1/vt:vt),ye)}}if(Ve[Et][ye]=V(Ze),["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Et)!==-1){if(Et==="orientation"){zt.set(Ye);var Mt=Ot.x&&!Ot.y?"h":"v";if((zt.get()||Mt)===Nt.orientation)continue}else Et==="orientationaxes"&&(Ot.orientation={v:"h",h:"v"}[Nt.orientation]);g.swapXYData(Ot),ze.calc=ze.clearAxisTypes=!0}else r.dataArrayContainers.indexOf(zt.parts[0])!==-1?(g.manageArrayContainers(zt,Ye,Ve),ze.calc=!0):(je?je.arrayOk&&!t.traceIs(Nt,"regl")&&(T.isArrayOrTypedArray(Ye)||T.isArrayOrTypedArray(Ze))?ze.calc=!0:p.update(ze,je):ze.calc=!0,zt.set(Ye))}if(["swapxyaxes","orientationaxes"].indexOf(Et)!==-1&&n.swap($,pe),Et==="orientationaxes"){var It=b($.layout,"hovermode"),Ut=It.get();Ut==="x"?It.set("y"):Ut==="y"?It.set("x"):Ut==="x unified"?It.set("y unified"):Ut==="y unified"&&It.set("x unified")}if(["orientation","type"].indexOf(Et)!==-1){for(Te=[],ye=0;ye<pe.length;ye++){var jt=Pe[pe[ye]];t.traceIs(jt,"cartesian")&&(tt(jt.xaxis||"x"),tt(jt.yaxis||"y"))}yt(Te.map(ot),!0,0),yt(Te.map(pt),[0,1],0)}}else zt=fe($.layout,Et.replace("LAYOUT","")),Ve[Et]=[V(zt.get())],zt.set(Array.isArray(Ke)?Ke[0]:Ke),ze.calc=!0}return(ze.calc||ze.plot)&&(ze.fullReplot=!0),{flags:ze,undoit:Ve,redoit:He,traces:pe,eventData:T.extendDeepNoArrays([],[ve,pe])}}function j($){var oe,pe,ye,ke=T.counterRegex("axis",".title",!1,!1),De=/colorbar\.title$/,Pe=Object.keys($);for(oe=0;oe<Pe.length;oe++)pe=Pe[oe],ye=$[pe],pe!=="title"&&!ke.test(pe)&&!De.test(pe)||typeof ye!="string"&&typeof ye!="number"?pe.indexOf("titlefont")>-1&&pe.indexOf("grouptitlefont")===-1?Re(pe,pe.replace("titlefont","title.font")):pe.indexOf("titleposition")>-1?Re(pe,pe.replace("titleposition","title.position")):pe.indexOf("titleside")>-1?Re(pe,pe.replace("titleside","title.side")):pe.indexOf("titleoffset")>-1&&Re(pe,pe.replace("titleoffset","title.offset")):Re(pe,pe.replace("title","title.text"));function Re(fe,ve){$[ve]=$[fe],delete $[fe]}}function J($,oe,pe){$=T.getGraphDiv($),g.clearPromiseQueue($);var ye={};if(typeof oe=="string")ye[oe]=pe;else{if(!T.isPlainObject(oe))return T.warn("Relayout fail.",oe,pe),Promise.reject();ye=T.extendFlat({},oe)}Object.keys(ye).length&&($.changed=!0);var ke=ne($,ye),De=ke.flags;De.calc&&($.calcdata=void 0);var Pe=[r.previousPromises];De.layoutReplot?Pe.push(y.layoutReplot):Object.keys(ye).length&&(X($,De,ke)||r.supplyDefaults($),De.legend&&Pe.push(y.doLegend),De.layoutstyle&&Pe.push(y.layoutStyles),De.axrange&&Z(Pe,ke.rangesAltered),De.ticks&&Pe.push(y.doTicksRelayout),De.modebar&&Pe.push(y.doModeBar),De.camera&&Pe.push(y.doCamera),De.colorbars&&Pe.push(y.doColorBars),Pe.push(c)),Pe.push(r.rehover,r.redrag,r.reselect),s.add($,J,[$,ke.undoit],J,[$,ke.redoit]);var Re=T.syncOrAsync(Pe,$);return Re&&Re.then||(Re=Promise.resolve($)),Re.then(function(){return $.emit("plotly_relayout",ke.eventData),$})}function X($,oe,pe){var ye=$._fullLayout;if(!oe.axrange)return!1;for(var ke in oe)if(ke!=="axrange"&&oe[ke])return!1;for(var De in pe.rangesAltered){var Pe=n.id2name(De),Re=$.layout[Pe],fe=ye[Pe];if(fe.autorange=Re.autorange,Re.range&&(fe.range=Re.range.slice()),fe.cleanRange(),fe._matchGroup){for(var ve in fe._matchGroup)if(ve!==De){var Te=ye[n.id2name(ve)];Te.autorange=fe.autorange,Te.range=fe.range.slice(),Te._input.range=fe.range.slice()}}}return!0}function Z($,oe){var pe=oe?function(ye){var ke=[];for(var De in oe){var Pe=n.getFromId(ye,De);if(ke.push(De),(Pe.ticklabelposition||"").indexOf("inside")!==-1&&Pe._anchorAxis&&ke.push(Pe._anchorAxis._id),Pe._matchGroup)for(var Re in Pe._matchGroup)oe[Re]||ke.push(Re)}return n.draw(ye,ke,{skipTitle:!0})}:function(ye){return n.draw(ye,"redraw")};$.push(f,y.doAutoRangeAndConstraints,pe,y.drawData,y.finalDraw)}var Y=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,W=/^[xyz]axis[0-9]*\.autorange$/,Q=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ne($,oe){var pe,ye,ke,De=$.layout,Pe=$._fullLayout,Re=Pe._guiEditing,fe=F(Pe._preGUI,Re),ve=Object.keys(oe),Te=n.list($),ze=T.extendDeepAll({},oe),He={};for(j(oe),ve=Object.keys(oe),ye=0;ye<ve.length;ye++)if(ve[ye].indexOf("allaxes")===0){for(ke=0;ke<Te.length;ke++){var Ve=Te[ke]._id.substr(1),nt=Ve.indexOf("scene")!==-1?Ve+".":"",tt=ve[ye].replace("allaxes",nt+Te[ke]._name);oe[tt]||(oe[tt]=oe[ve[ye]])}delete oe[ve[ye]]}var ot=p.layoutFlags(),pt={},Tt={};function yt(nn,xn){if(Array.isArray(nn))nn.forEach(function(mn){yt(mn,xn)});else if(!(nn in oe)&&!g.hasParent(oe,nn)){var jn=fe(De,nn);nn in Tt||(Tt[nn]=V(jn.get())),xn!==void 0&&jn.set(xn)}}var dt,Pt={};function Et(nn){var xn=n.name2id(nn.split(".")[0]);return Pt[xn]=1,xn}for(var Ot in oe){if(g.hasParent(oe,Ot))throw new Error("cannot set "+Ot+" and a parent attribute simultaneously");for(var Nt=fe(De,Ot),zt=oe[Ot],Ze=Nt.parts.length-1;Ze>0&&typeof Nt.parts[Ze]!="string";)Ze--;var Ye=Nt.parts[Ze],je=Nt.parts[Ze-1]+"."+Ye,Ke=Nt.parts.slice(0,Ze).join("."),st=b($.layout,Ke).get(),Se=b(Pe,Ke).get(),Ie=Nt.get();if(zt!==void 0){pt[Ot]=zt,Tt[Ot]=Ye==="reverse"?zt:V(Ie);var We=o.getLayoutValObject(Pe,Nt.parts);if(We&&We.impliedEdits&&zt!==null)for(var it in We.impliedEdits)yt(T.relativeAttr(Ot,it),We.impliedEdits[it]);if(["width","height"].indexOf(Ot)!==-1)if(zt){yt("autosize",null);var lt=Ot==="height"?"width":"height";yt(lt,Pe[lt])}else Pe[Ot]=$._initialAutoSize[Ot];else if(Ot==="autosize")yt("width",zt?null:Pe.width),yt("height",zt?null:Pe.height);else if(je.match(Y))Et(je),b(Pe,Ke+"._inputRange").set(null);else if(je.match(W)){Et(je),b(Pe,Ke+"._inputRange").set(null);var gt=b(Pe,Ke).get();gt._inputDomain&&(gt._input.domain=gt._inputDomain.slice())}else je.match(Q)&&b(Pe,Ke+"._inputDomain").set(null);if(Ye==="type"){dt=st;var At=Se.type==="linear"&&zt==="log",kt=Se.type==="log"&&zt==="linear";if(At||kt){if(dt&&dt.range)if(Se.autorange)At&&(dt.range=dt.range[1]>dt.range[0]?[1,2]:[2,1]);else{var ht=dt.range[0],St=dt.range[1];At?(ht<=0&&St<=0&&yt(Ke+".autorange",!0),ht<=0?ht=St/1e6:St<=0&&(St=ht/1e6),yt(Ke+".range[0]",Math.log(ht)/Math.LN10),yt(Ke+".range[1]",Math.log(St)/Math.LN10)):(yt(Ke+".range[0]",Math.pow(10,ht)),yt(Ke+".range[1]",Math.pow(10,St)))}else yt(Ke+".autorange",!0);Array.isArray(Pe._subplots.polar)&&Pe._subplots.polar.length&&Pe[Nt.parts[0]]&&Nt.parts[1]==="radialaxis"&&delete Pe[Nt.parts[0]]._subplot.viewInitial["radialaxis.range"],t.getComponentMethod("annotations","convertCoords")($,Se,zt,yt),t.getComponentMethod("images","convertCoords")($,Se,zt,yt)}else yt(Ke+".autorange",!0),yt(Ke+".range",null);b(Pe,Ke+"._inputRange").set(null)}else if(Ye.match(m)){var vt=b(Pe,Ot).get(),Mt=(zt||{}).type;Mt&&Mt!=="-"||(Mt="linear"),t.getComponentMethod("annotations","convertCoords")($,vt,Mt,yt),t.getComponentMethod("images","convertCoords")($,vt,Mt,yt)}var It=v.containerArrayMatch(Ot);if(It){pe=It.array,ye=It.index;var Ut=It.property,jt=We||{editType:"calc"};ye!==""&&Ut===""&&(v.isAddVal(zt)?Tt[Ot]=null:v.isRemoveVal(zt)?Tt[Ot]=(b(De,pe).get()||[])[ye]:T.warn("unrecognized full object value",oe)),p.update(ot,jt),He[pe]||(He[pe]={});var qt=He[pe][ye];qt||(qt=He[pe][ye]={}),qt[Ut]=zt,delete oe[Ot]}else Ye==="reverse"?(st.range?st.range.reverse():(yt(Ke+".autorange",!0),st.range=[1,0]),Se.autorange?ot.calc=!0:ot.plot=!0):(Ot==="dragmode"&&(zt===!1&&Ie!==!1||zt!==!1&&Ie===!1)||Pe._has("scatter-like")&&Pe._has("regl")&&Ot==="dragmode"&&(zt==="lasso"||zt==="select")&&Ie!=="lasso"&&Ie!=="select"||Pe._has("gl2d")?ot.plot=!0:We?p.update(ot,We):ot.calc=!0,Nt.set(zt))}}for(pe in He)v.applyContainerArrayChanges($,fe(De,pe),He[pe],ot,fe)||(ot.plot=!0);for(var Yt in Pt){var Kt=(dt=n.getFromId($,Yt))&&dt._constraintGroup;if(Kt)for(var pn in ot.calc=!0,Kt)Pt[pn]||(n.getFromId($,pn)._constraintShrinkable=!0)}return(re($)||oe.height||oe.width)&&(ot.plot=!0),(ot.plot||ot.calc)&&(ot.layoutReplot=!0),{flags:ot,rangesAltered:Pt,undoit:Tt,redoit:pt,eventData:ze}}function re($){var oe=$._fullLayout,pe=oe.width,ye=oe.height;return $.layout.autosize&&r.plotAutoSize($,$.layout,oe),oe.width!==pe||oe.height!==ye}function ie($,oe,pe,ye){$=T.getGraphDiv($),g.clearPromiseQueue($),T.isPlainObject(oe)||(oe={}),T.isPlainObject(pe)||(pe={}),Object.keys(oe).length&&($.changed=!0),Object.keys(pe).length&&($.changed=!0);var ke=g.coerceTraceIndices($,ye),De=U($,T.extendFlat({},oe),ke),Pe=De.flags,Re=ne($,T.extendFlat({},pe)),fe=Re.flags;(Pe.calc||fe.calc)&&($.calcdata=void 0),Pe.clearAxisTypes&&g.clearAxisTypes($,ke,pe);var ve=[];fe.layoutReplot?ve.push(y.layoutReplot):Pe.fullReplot?ve.push(z._doPlot):(ve.push(r.previousPromises),X($,fe,Re)||r.supplyDefaults($),Pe.style&&ve.push(y.doTraceStyle),(Pe.colorbars||fe.colorbars)&&ve.push(y.doColorBars),fe.legend&&ve.push(y.doLegend),fe.layoutstyle&&ve.push(y.layoutStyles),fe.axrange&&Z(ve,Re.rangesAltered),fe.ticks&&ve.push(y.doTicksRelayout),fe.modebar&&ve.push(y.doModeBar),fe.camera&&ve.push(y.doCamera),ve.push(c)),ve.push(r.rehover,r.redrag,r.reselect),s.add($,ie,[$,De.undoit,Re.undoit,De.traces],ie,[$,De.redoit,Re.redoit,De.traces]);var Te=T.syncOrAsync(ve,$);return Te&&Te.then||(Te=Promise.resolve($)),Te.then(function(){return $.emit("plotly_update",{data:De.eventData,layout:Re.eventData}),$})}function se($){return function(oe){oe._fullLayout._guiEditing=!0;var pe=$.apply(null,arguments);return oe._fullLayout._guiEditing=!1,pe}}var ge=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],ue=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function ce($,oe){for(var pe=0;pe<oe.length;pe++){var ye=oe[pe],ke=$.match(ye.pattern);if(ke){var De=ke[1]||"";return{head:De,tail:$.substr(De.length+1),attr:ye.attr}}}}function le($,oe){var pe=b(oe,$).get();if(pe!==void 0)return pe;var ye=$.split(".");for(ye.pop();ye.length>1;)if(ye.pop(),(pe=b(oe,ye.join(".")+".uirevision").get())!==void 0)return pe;return oe.uirevision}function de($,oe){for(var pe=0;pe<oe.length;pe++)if(oe[pe]._fullInput.uid===$)return pe;return-1}function Ce($,oe,pe){for(var ye=0;ye<oe.length;ye++)if(oe[ye].uid===$)return ye;return!oe[pe]||oe[pe].uid?-1:pe}function xe($,oe){var pe=T.isPlainObject($),ye=Array.isArray($);return pe||ye?(pe&&T.isPlainObject(oe)||ye&&Array.isArray(oe))&&JSON.stringify($)===JSON.stringify(oe):$===oe}function _e($,oe,pe,ye){var ke,De,Pe,Re=ye.getValObject,fe=ye.flags,ve=ye.immutable,Te=ye.inArray,ze=ye.arrayIndex;function He(){var st=ke.editType;Te&&st.indexOf("arraydraw")!==-1?T.pushUnique(fe.arrays[Te],ze):(p.update(fe,ke),st!=="none"&&fe.nChanges++,ye.transition&&ke.anim&&fe.nChangesAnim++,(Y.test(Pe)||W.test(Pe))&&(fe.rangesAltered[pe[0]]=1),Q.test(Pe)&&b(oe,"_inputDomain").set(null),De==="datarevision"&&(fe.newDataRevision=1))}function Ve(st){return st.valType==="data_array"||st.arrayOk}for(De in $){if(fe.calc&&!ye.transition)return;var nt=$[De],tt=oe[De],ot=pe.concat(De);if(Pe=ot.join("."),De.charAt(0)!=="_"&&typeof nt!="function"&&nt!==tt){if((De==="tick0"||De==="dtick")&&pe[0]!=="geo"){var pt=oe.tickmode;if(pt==="auto"||pt==="array"||!pt)continue}if((De!=="range"||!oe.autorange)&&(De!=="zmin"&&De!=="zmax"||oe.type!=="contourcarpet")&&(ke=Re(ot))&&(!ke._compareAsJSON||JSON.stringify(nt)!==JSON.stringify(tt))){var Tt,yt=ke.valType,dt=Ve(ke),Pt=Array.isArray(nt),Et=Array.isArray(tt);if(Pt&&Et){var Ot="_input_"+De,Nt=$[Ot],zt=oe[Ot];if(Array.isArray(Nt)&&Nt===zt)continue}if(tt===void 0)dt&&Pt?fe.calc=!0:He();else if(ke._isLinkedToArray){var Ze=[],Ye=!1;Te||(fe.arrays[De]=Ze);var je=Math.min(nt.length,tt.length),Ke=Math.max(nt.length,tt.length);if(je!==Ke){if(ke.editType!=="arraydraw"){He();continue}Ye=!0}for(Tt=0;Tt<je;Tt++)_e(nt[Tt],tt[Tt],ot.concat(Tt),T.extendFlat({inArray:De,arrayIndex:Tt},ye));if(Ye)for(Tt=je;Tt<Ke;Tt++)Ze.push(Tt)}else!yt&&T.isPlainObject(nt)?_e(nt,tt,ot,ye):dt?Pt&&Et?(ve&&(fe.calc=!0),(ve||ye.newDataRevision)&&He()):Pt!==Et?fe.calc=!0:He():Pt&&Et&&nt.length===tt.length&&String(nt)===String(tt)||He()}}}for(De in oe)if(!(De in $)&&De.charAt(0)!=="_"&&typeof oe[De]!="function"){if(Ve(ke=Re(pe.concat(De)))&&Array.isArray(oe[De]))return void(fe.calc=!0);He()}}function we($,oe){var pe;for(pe in $)if(pe.charAt(0)!=="_"){var ye=$[pe],ke=oe[pe];if(ye!==ke)if(T.isPlainObject(ye)&&T.isPlainObject(ke)){if(we(ye,ke))return!0}else{if(!Array.isArray(ye)||!Array.isArray(ke)||ye.length!==ke.length)return!0;for(var De=0;De<ye.length;De++)if(ye[De]!==ke[De]&&(!T.isPlainObject(ye[De])||!T.isPlainObject(ke[De])||we(ye[De],ke[De])))return!0}}}function Ae($){var oe=$._fullLayout,pe=$.getBoundingClientRect();if(!T.equalDomRects(pe,oe._lastBBox)){var ye=oe._invTransform=T.inverseTransformMatrix(T.getFullTransformMatrix($));oe._invScaleX=Math.sqrt(ye[0][0]*ye[0][0]+ye[0][1]*ye[0][1]+ye[0][2]*ye[0][2]),oe._invScaleY=Math.sqrt(ye[1][0]*ye[1][0]+ye[1][1]*ye[1][1]+ye[1][2]*ye[1][2]),oe._lastBBox=pe}}z.animate=function($,oe,pe){if($=T.getGraphDiv($),!T.isPlotDiv($))throw new Error("This element is not a Plotly plot: "+$+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var ye=$._transitionData;ye._frameQueue||(ye._frameQueue=[]);var ke=(pe=r.supplyAnimationDefaults(pe)).transition,De=pe.frame;function Pe(ve){return Array.isArray(ke)?ve>=ke.length?ke[0]:ke[ve]:ke}function Re(ve){return Array.isArray(De)?ve>=De.length?De[0]:De[ve]:De}function fe(ve,Te){var ze=0;return function(){if(ve&&++ze===Te)return ve()}}return ye._frameWaitingCnt===void 0&&(ye._frameWaitingCnt=0),new Promise(function(ve,Te){function ze(){$.emit("plotly_animating"),ye._lastFrameAt=-1/0,ye._timeToNext=0,ye._runningTransitions=0,ye._currentFrame=null;var Ot=function(){ye._animationRaf=window.requestAnimationFrame(Ot),Date.now()-ye._lastFrameAt>ye._timeToNext&&function(){ye._currentFrame&&ye._currentFrame.onComplete&&ye._currentFrame.onComplete();var Nt=ye._currentFrame=ye._frameQueue.shift();if(Nt){var zt=Nt.name?Nt.name.toString():null;$._fullLayout._currentFrame=zt,ye._lastFrameAt=Date.now(),ye._timeToNext=Nt.frameOpts.duration,r.transition($,Nt.frame.data,Nt.frame.layout,g.coerceTraceIndices($,Nt.frame.traces),Nt.frameOpts,Nt.transitionOpts).then(function(){Nt.onComplete&&Nt.onComplete()}),$.emit("plotly_animatingframe",{name:zt,frame:Nt.frame,animation:{frame:Nt.frameOpts,transition:Nt.transitionOpts}})}else $.emit("plotly_animated"),window.cancelAnimationFrame(ye._animationRaf),ye._animationRaf=null}()};Ot()}var He,Ve,nt=0;function tt(Ot){return Array.isArray(ke)?nt>=ke.length?Ot.transitionOpts=ke[nt]:Ot.transitionOpts=ke[0]:Ot.transitionOpts=ke,nt++,Ot}var ot=[],pt=oe==null,Tt=Array.isArray(oe);if(pt||Tt||!T.isPlainObject(oe)){if(pt||["string","number"].indexOf(typeof oe)!==-1)for(He=0;He<ye._frames.length;He++)(Ve=ye._frames[He])&&(pt||String(Ve.group)===String(oe))&&ot.push({type:"byname",name:String(Ve.name),data:tt({name:Ve.name})});else if(Tt)for(He=0;He<oe.length;He++){var yt=oe[He];["number","string"].indexOf(typeof yt)!==-1?(yt=String(yt),ot.push({type:"byname",name:yt,data:tt({name:yt})})):T.isPlainObject(yt)&&ot.push({type:"object",data:tt(T.extendFlat({},yt))})}}else ot.push({type:"object",data:tt(T.extendFlat({},oe))});for(He=0;He<ot.length;He++)if((Ve=ot[He]).type==="byname"&&!ye._frameHash[Ve.data.name])return T.warn('animate failure: frame not found: "'+Ve.data.name+'"'),void Te();["next","immediate"].indexOf(pe.mode)!==-1&&function(){if(ye._frameQueue.length!==0){for(;ye._frameQueue.length;){var Ot=ye._frameQueue.pop();Ot.onInterrupt&&Ot.onInterrupt()}$.emit("plotly_animationinterrupted",[])}}(),pe.direction==="reverse"&&ot.reverse();var dt=$._fullLayout._currentFrame;if(dt&&pe.fromcurrent){var Pt=-1;for(He=0;He<ot.length;He++)if((Ve=ot[He]).type==="byname"&&Ve.name===dt){Pt=He;break}if(Pt>0&&Pt<ot.length-1){var Et=[];for(He=0;He<ot.length;He++)Ve=ot[He],(ot[He].type!=="byname"||He>Pt)&&Et.push(Ve);ot=Et}}ot.length>0?function(Ot){if(Ot.length!==0){for(var Nt=0;Nt<Ot.length;Nt++){var zt;zt=Ot[Nt].type==="byname"?r.computeFrame($,Ot[Nt].name):Ot[Nt].data;var Ze=Re(Nt),Ye=Pe(Nt);Ye.duration=Math.min(Ye.duration,Ze.duration);var je={frame:zt,name:Ot[Nt].name,frameOpts:Ze,transitionOpts:Ye};Nt===Ot.length-1&&(je.onComplete=fe(ve,2),je.onInterrupt=Te),ye._frameQueue.push(je)}pe.mode==="immediate"&&(ye._lastFrameAt=-1/0),ye._animationRaf||ze()}}(ot):($.emit("plotly_animated"),ve())})},z.addFrames=function($,oe,pe){if($=T.getGraphDiv($),oe==null)return Promise.resolve();if(!T.isPlotDiv($))throw new Error("This element is not a Plotly plot: "+$+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var ye,ke,De,Pe,Re=$._transitionData._frames,fe=$._transitionData._frameHash;if(!Array.isArray(oe))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+oe);var ve=Re.length+2*oe.length,Te=[],ze={};for(ye=oe.length-1;ye>=0;ye--)if(T.isPlainObject(oe[ye])){var He=oe[ye].name,Ve=(fe[He]||ze[He]||{}).name,nt=oe[ye].name,tt=fe[Ve]||ze[Ve];Ve&&nt&&typeof nt=="number"&&tt&&w<5&&(w++,T.warn('addFrames: overwriting frame "'+(fe[Ve]||ze[Ve]).name+'" with a frame whose name of type "number" also equates to "'+Ve+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),w===5&&T.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),ze[He]={name:He},Te.push({frame:r.supplyFrameDefaults(oe[ye]),index:pe&&pe[ye]!==void 0&&pe[ye]!==null?pe[ye]:ve+ye})}Te.sort(function(Ot,Nt){return Ot.index>Nt.index?-1:Ot.index<Nt.index?1:0});var ot=[],pt=[],Tt=Re.length;for(ye=Te.length-1;ye>=0;ye--){if(typeof(ke=Te[ye].frame).name=="number"&&T.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!ke.name)for(;fe[ke.name="frame "+$._transitionData._counter++];);if(fe[ke.name]){for(De=0;De<Re.length&&(Re[De]||{}).name!==ke.name;De++);ot.push({type:"replace",index:De,value:ke}),pt.unshift({type:"replace",index:De,value:Re[De]})}else Pe=Math.max(0,Math.min(Te[ye].index,Tt)),ot.push({type:"insert",index:Pe,value:ke}),pt.unshift({type:"delete",index:Pe}),Tt++}var yt=r.modifyFrames,dt=r.modifyFrames,Pt=[$,pt],Et=[$,ot];return s&&s.add($,yt,Pt,dt,Et),r.modifyFrames($,ot)},z.deleteFrames=function($,oe){if($=T.getGraphDiv($),!T.isPlotDiv($))throw new Error("This element is not a Plotly plot: "+$);var pe,ye,ke=$._transitionData._frames,De=[],Pe=[];if(!oe)for(oe=[],pe=0;pe<ke.length;pe++)oe.push(pe);for((oe=oe.slice()).sort(),pe=oe.length-1;pe>=0;pe--)ye=oe[pe],De.push({type:"delete",index:ye}),Pe.unshift({type:"insert",index:ye,value:ke[ye]});var Re=r.modifyFrames,fe=r.modifyFrames,ve=[$,Pe],Te=[$,De];return s&&s.add($,Re,ve,fe,Te),r.modifyFrames($,De)},z.addTraces=function $(oe,pe,ye){oe=T.getGraphDiv(oe);var ke,De,Pe=[],Re=z.deleteTraces,fe=$,ve=[oe,Pe],Te=[oe,pe];for(function(ze,He,Ve){var nt,tt;if(!Array.isArray(ze.data))throw new Error("gd.data must be an array.");if(He===void 0)throw new Error("traces must be defined.");for(Array.isArray(He)||(He=[He]),nt=0;nt<He.length;nt++)if(typeof(tt=He[nt])!="object"||Array.isArray(tt)||tt===null)throw new Error("all values in traces array must be non-array objects");if(Ve===void 0||Array.isArray(Ve)||(Ve=[Ve]),Ve!==void 0&&Ve.length!==He.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(oe,pe,ye),Array.isArray(pe)||(pe=[pe]),pe=pe.map(function(ze){return T.extendFlat({},ze)}),g.cleanData(pe),ke=0;ke<pe.length;ke++)oe.data.push(pe[ke]);for(ke=0;ke<pe.length;ke++)Pe.push(-pe.length+ke);if(ye===void 0)return De=z.redraw(oe),s.add(oe,Re,ve,fe,Te),De;Array.isArray(ye)||(ye=[ye]);try{O(oe,Pe,ye)}catch(ze){throw oe.data.splice(oe.data.length-pe.length,pe.length),ze}return s.startSequence(oe),s.add(oe,Re,ve,fe,Te),De=z.moveTraces(oe,Pe,ye),s.stopSequence(oe),De},z.deleteTraces=function $(oe,pe){oe=T.getGraphDiv(oe);var ye,ke,De=[],Pe=z.addTraces,Re=$,fe=[oe,De,pe],ve=[oe,pe];if(pe===void 0)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(pe)||(pe=[pe]),C(oe,pe,"indices"),(pe=L(pe,oe.data.length-1)).sort(T.sorterDes),ye=0;ye<pe.length;ye+=1)ke=oe.data.splice(pe[ye],1)[0],De.push(ke);var Te=z.redraw(oe);return s.add(oe,Pe,fe,Re,ve),Te},z.extendTraces=function $(oe,pe,ye,ke){function De(ve,Te,ze){var He,Ve;if(T.isTypedArray(ve))if(ze<0){var nt=new ve.constructor(0),tt=N(ve,Te);ze<0?(He=tt,Ve=nt):(He=nt,Ve=tt)}else if(He=new ve.constructor(ze),Ve=new ve.constructor(ve.length+Te.length-ze),ze===Te.length)He.set(Te),Ve.set(ve);else if(ze<Te.length){var ot=Te.length-ze;He.set(Te.subarray(ot)),Ve.set(ve),Ve.set(Te.subarray(0,ot),ve.length)}else{var pt=ze-Te.length,Tt=ve.length-pt;He.set(ve.subarray(Tt)),He.set(Te,pt),Ve.set(ve.subarray(0,Tt))}else He=ve.concat(Te),Ve=ze>=0&&ze<He.length?He.splice(0,He.length-ze):[];return[He,Ve]}var Pe=I(oe=T.getGraphDiv(oe),pe,ye,ke,De),Re=z.redraw(oe),fe=[oe,Pe.update,ye,Pe.maxPoints];return s.add(oe,z.prependTraces,fe,$,arguments),Re},z.moveTraces=function $(oe,pe,ye){var ke,De=[],Pe=[],Re=$,fe=$,ve=[oe=T.getGraphDiv(oe),ye,pe],Te=[oe,pe,ye];if(O(oe,pe,ye),pe=Array.isArray(pe)?pe:[pe],ye===void 0)for(ye=[],ke=0;ke<pe.length;ke++)ye.push(-pe.length+ke);for(ye=Array.isArray(ye)?ye:[ye],pe=L(pe,oe.data.length-1),ye=L(ye,oe.data.length-1),ke=0;ke<oe.data.length;ke++)pe.indexOf(ke)===-1&&De.push(oe.data[ke]);for(ke=0;ke<pe.length;ke++)Pe.push({newIndex:ye[ke],trace:oe.data[pe[ke]]});for(Pe.sort(function(He,Ve){return He.newIndex-Ve.newIndex}),ke=0;ke<Pe.length;ke+=1)De.splice(Pe[ke].newIndex,0,Pe[ke].trace);oe.data=De;var ze=z.redraw(oe);return s.add(oe,Re,ve,fe,Te),ze},z.prependTraces=function $(oe,pe,ye,ke){function De(ve,Te,ze){var He,Ve;if(T.isTypedArray(ve))if(ze<=0){var nt=new ve.constructor(0),tt=N(Te,ve);ze<0?(He=tt,Ve=nt):(He=nt,Ve=tt)}else if(He=new ve.constructor(ze),Ve=new ve.constructor(ve.length+Te.length-ze),ze===Te.length)He.set(Te),Ve.set(ve);else if(ze<Te.length){var ot=Te.length-ze;He.set(Te.subarray(0,ot)),Ve.set(Te.subarray(ot)),Ve.set(ve,ot)}else{var pt=ze-Te.length;He.set(Te),He.set(ve.subarray(0,pt),Te.length),Ve.set(ve.subarray(pt))}else He=Te.concat(ve),Ve=ze>=0&&ze<He.length?He.splice(ze,He.length):[];return[He,Ve]}var Pe=I(oe=T.getGraphDiv(oe),pe,ye,ke,De),Re=z.redraw(oe),fe=[oe,Pe.update,ye,Pe.maxPoints];return s.add(oe,z.extendTraces,fe,$,arguments),Re},z.newPlot=function($,oe,pe,ye){return $=T.getGraphDiv($),r.cleanPlot([],{},$._fullData||[],$._fullLayout||{}),r.purge($),z._doPlot($,oe,pe,ye)},z._doPlot=function($,oe,pe,ye){var ke;if($=T.getGraphDiv($),d.init($),T.isPlainObject(oe)){var De=oe;oe=De.data,pe=De.layout,ye=De.config,ke=De.frames}if(d.triggerHandler($,"plotly_beforeplot",[oe,pe,ye])===!1)return Promise.reject();oe||pe||T.isPlotDiv($)||T.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",$),E($,ye),pe||(pe={}),S.select($).classed("js-plotly-plot",!0),a.makeTester(),Array.isArray($._promises)||($._promises=[]);var Pe=($.data||[]).length===0&&Array.isArray(oe);Array.isArray(oe)&&(g.cleanData(oe),Pe?$.data=oe:$.data.push.apply($.data,oe),$.empty=!1),$.layout&&!Pe||($.layout=g.cleanLayout(pe)),r.supplyDefaults($);var Re=$._fullLayout,fe=Re._has("cartesian");Re._replotting=!0,(Pe||Re._shouldCreateBgLayer)&&(function(pt){var Tt=S.select(pt),yt=pt._fullLayout;if(yt._calcInverseTransform=Ae,yt._calcInverseTransform(pt),yt._container=Tt.selectAll(".plot-container").data([0]),yt._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),yt._paperdiv=yt._container.selectAll(".svg-container").data([0]),yt._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),yt._glcontainer=yt._paperdiv.selectAll(".gl-container").data([{}]),yt._glcontainer.enter().append("div").classed("gl-container",!0),yt._paperdiv.selectAll(".main-svg").remove(),yt._paperdiv.select(".modebar-container").remove(),yt._paper=yt._paperdiv.insert("svg",":first-child").classed("main-svg",!0),yt._toppaper=yt._paperdiv.append("svg").classed("main-svg",!0),yt._modebardiv=yt._paperdiv.append("div"),delete yt._modeBar,yt._hoverpaper=yt._paperdiv.append("svg").classed("main-svg",!0),!yt._uid){var dt={};S.selectAll("defs").each(function(){this.id&&(dt[this.id.split("-")[1]]=1)}),yt._uid=T.randstr(dt)}yt._paperdiv.selectAll(".main-svg").attr(h.svgAttrs),yt._defs=yt._paper.append("defs").attr("id","defs-"+yt._uid),yt._clips=yt._defs.append("g").classed("clips",!0),yt._topdefs=yt._toppaper.append("defs").attr("id","topdefs-"+yt._uid),yt._topclips=yt._topdefs.append("g").classed("clips",!0),yt._bgLayer=yt._paper.append("g").classed("bglayer",!0),yt._draggers=yt._paper.append("g").classed("draglayer",!0);var Pt=yt._paper.append("g").classed("layer-below",!0);yt._imageLowerLayer=Pt.append("g").classed("imagelayer",!0),yt._shapeLowerLayer=Pt.append("g").classed("shapelayer",!0),yt._cartesianlayer=yt._paper.append("g").classed("cartesianlayer",!0),yt._polarlayer=yt._paper.append("g").classed("polarlayer",!0),yt._smithlayer=yt._paper.append("g").classed("smithlayer",!0),yt._ternarylayer=yt._paper.append("g").classed("ternarylayer",!0),yt._geolayer=yt._paper.append("g").classed("geolayer",!0),yt._funnelarealayer=yt._paper.append("g").classed("funnelarealayer",!0),yt._pielayer=yt._paper.append("g").classed("pielayer",!0),yt._iciclelayer=yt._paper.append("g").classed("iciclelayer",!0),yt._treemaplayer=yt._paper.append("g").classed("treemaplayer",!0),yt._sunburstlayer=yt._paper.append("g").classed("sunburstlayer",!0),yt._indicatorlayer=yt._toppaper.append("g").classed("indicatorlayer",!0),yt._glimages=yt._paper.append("g").classed("glimages",!0);var Et=yt._toppaper.append("g").classed("layer-above",!0);yt._imageUpperLayer=Et.append("g").classed("imagelayer",!0),yt._shapeUpperLayer=Et.append("g").classed("shapelayer",!0),yt._selectionLayer=yt._toppaper.append("g").classed("selectionlayer",!0),yt._infolayer=yt._toppaper.append("g").classed("infolayer",!0),yt._menulayer=yt._toppaper.append("g").classed("menulayer",!0),yt._zoomlayer=yt._toppaper.append("g").classed("zoomlayer",!0),yt._hoverlayer=yt._hoverpaper.append("g").classed("hoverlayer",!0),yt._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),pt.emit("plotly_framework")}($),Re._shouldCreateBgLayer&&delete Re._shouldCreateBgLayer),a.initGradients($),a.initPatterns($),Pe&&n.saveShowSpikeInitial($);var ve=!$.calcdata||$.calcdata.length!==($._fullData||[]).length;ve&&r.doCalcdata($);for(var Te=0;Te<$.calcdata.length;Te++)$.calcdata[Te][0].trace=$._fullData[Te];$._context.responsive?$._responsiveChartHandler||($._responsiveChartHandler=function(){T.isHidden($)||r.resize($)},window.addEventListener("resize",$._responsiveChartHandler)):T.clearResponsive($);var ze=T.extendFlat({},Re._size),He=0;function Ve(){if(r.clearAutoMarginIds($),y.drawMarginPushers($),n.allowAutoMargin($),$._fullLayout.title.text&&$._fullLayout.title.automargin&&r.allowAutoMargin($,"title.automargin"),Re._has("pie"))for(var pt=$._fullData,Tt=0;Tt<pt.length;Tt++){var yt=pt[Tt];yt.type==="pie"&&yt.automargin&&r.allowAutoMargin($,"pie."+yt.uid+".automargin")}return r.doAutoMargin($),r.previousPromises($)}function nt(){$._transitioning||(y.doAutoRangeAndConstraints($),Pe&&n.saveRangeInitial($),t.getComponentMethod("rangeslider","calcAutorange")($))}var tt=[r.previousPromises,function(){if(ke)return z.addFrames($,ke)},function pt(){for(var Tt=Re._basePlotModules,yt=0;yt<Tt.length;yt++)Tt[yt].drawFramework&&Tt[yt].drawFramework($);!Re._glcanvas&&Re._has("gl")&&(Re._glcanvas=Re._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Ot){return Ot.key}),Re._glcanvas.enter().append("canvas").attr("class",function(Ot){return"gl-canvas gl-canvas-"+Ot.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var dt=$._context.plotGlPixelRatio;if(Re._glcanvas){Re._glcanvas.attr("width",Re.width*dt).attr("height",Re.height*dt).style("width",Re.width+"px").style("height",Re.height+"px");var Pt=Re._glcanvas.data()[0].regl;if(Pt&&(Math.floor(Re.width*dt)!==Pt._gl.drawingBufferWidth||Math.floor(Re.height*dt)!==Pt._gl.drawingBufferHeight)){var Et="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!He)return T.log(Et+" Clearing graph and plotting again."),r.cleanPlot([],{},$._fullData,Re),r.supplyDefaults($),Re=$._fullLayout,r.doCalcdata($),He++,pt();T.error(Et)}}return Re.modebar.orientation==="h"?Re._modebardiv.style("height",null).style("width","100%"):Re._modebardiv.style("width",null).style("height",Re.height+"px"),r.previousPromises($)},Ve,function(){if(r.didMarginChange(ze,Re._size))return T.syncOrAsync([Ve,y.layoutStyles],$)}];fe&&tt.push(function(){if(ve)return T.syncOrAsync([t.getComponentMethod("shapes","calcAutorange"),t.getComponentMethod("annotations","calcAutorange"),nt],$);nt()}),tt.push(y.layoutStyles),fe&&tt.push(function(){return n.draw($,Pe?"":"redraw")},function(pt){pt._fullLayout._insideTickLabelsAutorange&&J(pt,pt._fullLayout._insideTickLabelsAutorange).then(function(){pt._fullLayout._insideTickLabelsAutorange=void 0})}),tt.push(y.drawData,y.finalDraw,u,r.addLinks,r.rehover,r.redrag,r.reselect,r.doAutoMargin,function(pt){pt._fullLayout._insideTickLabelsAutorange&&Pe&&n.saveRangeInitial(pt,!0)},r.previousPromises);var ot=T.syncOrAsync(tt,$);return ot&&ot.then||(ot=Promise.resolve()),ot.then(function(){return c($),$})},z.purge=function($){var oe=($=T.getGraphDiv($))._fullLayout||{},pe=$._fullData||[];return r.cleanPlot([],{},pe,oe),r.purge($),d.purge($),oe._container&&oe._container.remove(),delete $._context,$},z.react=function($,oe,pe,ye){var ke,De;$=T.getGraphDiv($),g.clearPromiseQueue($);var Pe=$._fullData,Re=$._fullLayout;if(T.isPlotDiv($)&&Pe&&Re){if(T.isPlainObject(oe)){var fe=oe;oe=fe.data,pe=fe.layout,ye=fe.config,ke=fe.frames}var ve=!1;if(ye){var Te=T.extendDeep({},$._context);$._context=void 0,E($,ye),ve=we(Te,$._context)}$.data=oe||[],g.cleanData($.data),$.layout=pe||{},g.cleanLayout($.layout),function(Ke,st,Se,Ie){var We,it,lt,gt,At,kt,ht,St,vt,Mt,It=Ie._preGUI,Ut=[],jt={},qt={};for(We in It){if(At=ce(We,ge)){if(vt=At.head,Mt=At.tail,it=At.attr||vt+".uirevision",(gt=(lt=b(Ie,it).get())&&le(it,st))&&gt===lt){if((kt=It[We])===null&&(kt=void 0),xe(St=(ht=b(st,We)).get(),kt)){St===void 0&&Mt==="autorange"&&Ut.push(vt),ht.set(V(b(Ie,We).get()));continue}if(Mt==="autorange"||Mt.substr(0,6)==="range["){var Yt=It[vt+".range[0]"],Kt=It[vt+".range[1]"],pn=It[vt+".autorange"];if(pn||pn===null&&Yt===null&&Kt===null){if(!(vt in jt)){var nn=b(st,vt).get();jt[vt]=nn&&(nn.autorange||nn.autorange!==!1&&(!nn.range||nn.range.length!==2))}if(jt[vt]){ht.set(V(b(Ie,We).get()));continue}}}}}else T.warn("unrecognized GUI edit: "+We);delete It[We],At&&At.tail.substr(0,6)==="range["&&(qt[At.head]=1)}for(var xn=0;xn<Ut.length;xn++){var jn=Ut[xn];if(qt[jn]){var mn=b(st,jn).get();mn&&delete mn.autorange}}var en=Ie._tracePreGUI;for(var vn in en){var on,sn=en[vn],En=null;for(We in sn){if(!En){var kn=de(vn,Se);if(kn<0){delete en[vn];break}var zn=Ce(vn,Ke,(on=Se[kn]._fullInput).index);if(zn<0){delete en[vn];break}En=Ke[zn]}if(At=ce(We,ue)){if(At.attr?gt=(lt=b(Ie,At.attr).get())&&le(At.attr,st):(lt=on.uirevision,(gt=En.uirevision)===void 0&&(gt=st.uirevision)),gt&&gt===lt&&((kt=sn[We])===null&&(kt=void 0),xe(St=(ht=b(En,We)).get(),kt))){ht.set(V(b(on,We).get()));continue}}else T.warn("unrecognized GUI edit: "+We+" in trace uid "+vn);delete sn[We]}}}($.data,$.layout,Pe,Re),r.supplyDefaults($,{skipUpdateCalc:!0});var ze=$._fullData,He=$._fullLayout,Ve=He.datarevision===void 0,nt=He.transition,tt=function(Ke,st,Se,Ie,We){var it=p.layoutFlags();return it.arrays={},it.rangesAltered={},it.nChanges=0,it.nChangesAnim=0,_e(st,Se,[],{getValObject:function(lt){return o.getLayoutValObject(Se,lt)},flags:it,immutable:Ie,transition:We,gd:Ke}),(it.plot||it.calc)&&(it.layoutReplot=!0),We&&it.nChanges&&it.nChangesAnim&&(it.anim=it.nChanges===it.nChangesAnim?"all":"some"),it}($,Re,He,Ve,nt),ot=tt.newDataRevision,pt=function(Ke,st,Se,Ie,We,it){var lt=st.length===Se.length;if(!We&&!lt)return{fullReplot:!0,calc:!0};var gt,At,kt=p.traceFlags();kt.arrays={},kt.nChanges=0,kt.nChangesAnim=0;var ht={getValObject:function(vt){var Mt=o.getTraceValObject(At,vt);return!At._module.animatable&&Mt.anim&&(Mt.anim=!1),Mt},flags:kt,immutable:Ie,transition:We,newDataRevision:it,gd:Ke},St={};for(gt=0;gt<st.length;gt++)if(Se[gt]){if(At=Se[gt]._fullInput,r.hasMakesDataTransform(At)&&(At=Se[gt]),St[At.uid])continue;St[At.uid]=1,_e(st[gt]._fullInput,At,[],ht)}return(kt.calc||kt.plot)&&(kt.fullReplot=!0),We&&kt.nChanges&&kt.nChangesAnim&&(kt.anim=kt.nChanges===kt.nChangesAnim&&lt?"all":"some"),kt}($,Pe,ze,Ve,nt,ot);if(re($)&&(tt.layoutReplot=!0),pt.calc||tt.calc){$.calcdata=void 0;for(var Tt=Object.getOwnPropertyNames(He),yt=0;yt<Tt.length;yt++){var dt=Tt[yt],Pt=dt.substring(0,5);if(Pt==="xaxis"||Pt==="yaxis"){var Et=He[dt]._emptyCategories;Et&&Et()}}}else r.supplyDefaultsUpdateCalc($.calcdata,ze);var Ot=[];if(ke&&($._transitionData={},r.createTransitionData($),Ot.push(function(){return z.addFrames($,ke)})),He.transition&&!ve&&(pt.anim||tt.anim))tt.ticks&&Ot.push(y.doTicksRelayout),r.doCalcdata($),y.doAutoRangeAndConstraints($),Ot.push(function(){return r.transitionFromReact($,pt,tt,Re)});else if(pt.fullReplot||tt.layoutReplot||ve)$._fullLayout._skipDefaults=!0,Ot.push(z._doPlot);else{for(var Nt in tt.arrays){var zt=tt.arrays[Nt];if(zt.length){var Ze=t.getComponentMethod(Nt,"drawOne");if(Ze!==T.noop)for(var Ye=0;Ye<zt.length;Ye++)Ze($,zt[Ye]);else{var je=t.getComponentMethod(Nt,"draw");if(je===T.noop)throw new Error("cannot draw components: "+Nt);je($)}}}Ot.push(r.previousPromises),pt.style&&Ot.push(y.doTraceStyle),(pt.colorbars||tt.colorbars)&&Ot.push(y.doColorBars),tt.legend&&Ot.push(y.doLegend),tt.layoutstyle&&Ot.push(y.layoutStyles),tt.axrange&&Z(Ot),tt.ticks&&Ot.push(y.doTicksRelayout),tt.modebar&&Ot.push(y.doModeBar),tt.camera&&Ot.push(y.doCamera),Ot.push(c)}Ot.push(r.rehover,r.redrag,r.reselect),(De=T.syncOrAsync(Ot,$))&&De.then||(De=Promise.resolve($))}else De=z.newPlot($,oe,pe,ye);return De.then(function(){return $.emit("plotly_react",{data:oe,layout:pe}),$})},z.redraw=function($){if($=T.getGraphDiv($),!T.isPlotDiv($))throw new Error("This element is not a Plotly plot: "+$);return g.cleanData($.data),g.cleanLayout($.layout),$.calcdata=void 0,z._doPlot($).then(function(){return $.emit("plotly_redraw"),$})},z.relayout=J,z.restyle=R,z.setPlotConfig=function($){return T.extendFlat(x,$)},z.update=ie,z._guiRelayout=se(J),z._guiRestyle=se(R),z._guiUpdate=se(ie),z._storeDirectGUIEdit=function($,oe,pe){for(var ye in pe)D(ye,b($,ye).get(),pe[ye],oe)}},72075:function(K){var z={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},e={};(function S(k,l){for(var T in k){var b=k[T];b.valType?l[T]=b.dflt:(l[T]||(l[T]={}),S(b,l[T]))}})(z,e),K.exports={configAttributes:z,dfltConfig:e}},86281:function(K,z,e){var S=e(73972),k=e(71828),l=e(9012),T=e(10820),b=e(31391),d=e(85594),s=e(72075).configAttributes,t=e(30962),o=k.extendDeepAll,r=k.isPlainObject,n=k.isArrayOrTypedArray,a=k.nestedProperty,i=k.valObjectMeta,u="_isSubplotObj",h="_isLinkedToArray",f="_deprecated",x=[u,h,"_arrayAttrRegexps",f];function v(c,M,_){if(!c)return!1;if(c._isLinkedToArray){if(g(M[_]))_++;else if(_<M.length)return!1}for(;_<M.length;_++){var E=c[M[_]];if(!r(E)||(c=E,_===M.length-1))break;if(c._isLinkedToArray){if(!g(M[++_]))return!1}else if(c.valType==="info_array"){var L=M[++_];if(!g(L))return!1;var C=c.items;if(Array.isArray(C)){if(L>=C.length)return!1;if(c.dimensions===2){if(_++,M.length===_)return c;var O=M[_];if(!g(O))return!1;c=C[L][O]}else c=C[L]}else c=C}}return c}function g(c){return c===Math.round(c)&&c>=0}function y(){var c,M,_={};for(c in o(_,T),S.subplotsRegistry)if((M=S.subplotsRegistry[c]).layoutAttributes)if(Array.isArray(M.attr))for(var E=0;E<M.attr.length;E++)m(_,M,M.attr[E]);else m(_,M,M.attr==="subplot"?M.name:M.attr);for(c in S.componentsRegistry){var L=(M=S.componentsRegistry[c]).schema;if(L&&(L.subplots||L.layout)){var C=L.subplots;if(C&&C.xaxis&&!C.yaxis)for(var O in C.xaxis)delete _.yaxis[O];delete _.xaxis.shift,delete _.xaxis.autoshift}else M.name==="colorscale"?o(_,M.layoutAttributes):M.layoutAttributes&&w(_,M.layoutAttributes,M.name)}return{layoutAttributes:p(_)}}function p(c){return function(M){z.crawl(M,function(_,E,L){z.isValObject(_)?_.arrayOk!==!0&&_.valType!=="data_array"||(L[E+"src"]={valType:"string",editType:"none"}):r(_)&&(_.role="object")})}(c),function(M){z.crawl(M,function(_,E,L){if(_){var C=_._isLinkedToArray;C&&(delete _._isLinkedToArray,L[E]={items:{}},L[E].items[C]=_,L[E].role="object")}})}(c),function(M){(function _(E){for(var L in E)if(r(E[L]))_(E[L]);else if(Array.isArray(E[L]))for(var C=0;C<E[L].length;C++)_(E[L][C]);else E[L]instanceof RegExp&&(E[L]=E[L].toString())})(M)}(c),c}function m(c,M,_){var E=a(c,_),L=o({},M.layoutAttributes);L._isSubplotObj=!0,E.set(L)}function w(c,M,_){var E=a(c,_);E.set(o(E.get()||{},M))}z.IS_SUBPLOT_OBJ=u,z.IS_LINKED_TO_ARRAY=h,z.DEPRECATED=f,z.UNDERSCORE_ATTRS=x,z.get=function(){var c={};S.allTypes.forEach(function(E){c[E]=function(L){var C,O;O=(C=S.modules[L]._module).basePlotModule;var I={type:null},N=o({},l),R=o({},C.attributes);z.crawl(R,function(D,U,j,J,X){a(N,X).set(void 0),D===void 0&&a(R,X).set(void 0)}),o(I,N),S.traceIs(L,"noOpacity")&&delete I.opacity,S.traceIs(L,"showLegend")||(delete I.showlegend,delete I.legendgroup),S.traceIs(L,"noHover")&&(delete I.hoverinfo,delete I.hoverlabel),C.selectPoints||delete I.selectedpoints,o(I,R),O.attributes&&o(I,O.attributes),I.type=L;var V={meta:C.meta||{},categories:C.categories||{},animatable:!!C.animatable,type:L,attributes:p(I)};if(C.layoutAttributes){var F={};o(F,C.layoutAttributes),V.layoutAttributes=p(F)}return C.animatable||z.crawl(V,function(D){z.isValObject(D)&&"anim"in D&&delete D.anim}),V}(E)});var M,_={};return Object.keys(S.transformsRegistry).forEach(function(E){_[E]=function(L){var C=S.transformsRegistry[L],O=o({},C.attributes);return Object.keys(S.componentsRegistry).forEach(function(I){var N=S.componentsRegistry[I];N.schema&&N.schema.transforms&&N.schema.transforms[L]&&Object.keys(N.schema.transforms[L]).forEach(function(R){w(O,N.schema.transforms[L][R],R)})}),{attributes:p(O)}}(E)}),{defs:{valObjects:i,metaKeys:x.concat(["description","role","editType","impliedEdits"]),editType:{traces:t.traces,layout:t.layout},impliedEdits:{}},traces:c,layout:y(),transforms:_,frames:(M={frames:o({},b)},p(M),M.frames),animation:p(d),config:p(s)}},z.crawl=function(c,M,_,E){var L=_||0;E=E||"",Object.keys(c).forEach(function(C){var O=c[C];if(x.indexOf(C)===-1){var I=(E?E+".":"")+C;M(O,C,c,L,I),z.isValObject(O)||r(O)&&C!=="impliedEdits"&&z.crawl(O,M,L+1,I)}})},z.isValObject=function(c){return c&&c.valType!==void 0},z.findArrayAttributes=function(c){var M,_,E=[],L=[],C=[];function O(D,U,j,J){L=L.slice(0,J).concat([U]),C=C.slice(0,J).concat([D&&D._isLinkedToArray]),D&&(D.valType==="data_array"||D.arrayOk===!0)&&(L[J-1]!=="colorbar"||U!=="ticktext"&&U!=="tickvals")&&I(M,0,"")}function I(D,U,j){var J=D[L[U]],X=j+L[U];if(U===L.length-1)n(J)&&E.push(_+X);else if(C[U]){if(Array.isArray(J))for(var Z=0;Z<J.length;Z++)r(J[Z])&&I(J[Z],U+1,X+"["+Z+"].")}else r(J)&&I(J,U+1,X+".")}M=c,_="",z.crawl(l,O),c._module&&c._module.attributes&&z.crawl(c._module.attributes,O);var N=c.transforms;if(N)for(var R=0;R<N.length;R++){var V=N[R],F=V._module;F&&(_="transforms["+R+"].",M=V,z.crawl(F.attributes,O))}return E},z.getTraceValObject=function(c,M){var _,E,L=M[0],C=1;if(L==="transforms"){if(M.length===1)return l.transforms;var O=c.transforms;if(!Array.isArray(O)||!O.length)return!1;var I=M[1];if(!g(I)||I>=O.length)return!1;E=(_=(S.transformsRegistry[O[I].type]||{}).attributes)&&_[M[2]],C=3}else{var N=c._module;if(N||(N=(S.modules[c.type||l.type.dflt]||{})._module),!N)return!1;if(!(E=(_=N.attributes)&&_[L])){var R=N.basePlotModule;R&&R.attributes&&(E=R.attributes[L])}E||(E=l[L])}return v(E,M,C)},z.getLayoutValObject=function(c,M){var _=function(E,L){var C,O,I,N,R=E._basePlotModules;if(R){var V;for(C=0;C<R.length;C++){if((I=R[C]).attrRegex&&I.attrRegex.test(L)){if(I.layoutAttrOverrides)return I.layoutAttrOverrides;!V&&I.layoutAttributes&&(V=I.layoutAttributes)}var F=I.baseLayoutAttrOverrides;if(F&&L in F)return F[L]}if(V)return V}var D=E._modules;if(D){for(C=0;C<D.length;C++)if((N=D[C].layoutAttributes)&&L in N)return N[L]}for(O in S.componentsRegistry){if((I=S.componentsRegistry[O]).name==="colorscale"&&L.indexOf("coloraxis")===0)return I.layoutAttributes[L];if(!I.schema&&L===I.name)return I.layoutAttributes}return L in T&&T[L]}(c,M[0]);return v(_,M,1)}},44467:function(K,z,e){var S=e(71828),k=e(9012),l={name:{valType:"string",editType:"none"}};function T(d){return d&&typeof d=="string"}function b(d){var s=d.length-1;return d.charAt(s)!=="s"&&S.warn("bad argument to arrayDefaultKey: "+d),d.substr(0,d.length-1)+"defaults"}l.templateitemname={valType:"string",editType:"calc"},z.templatedArray=function(d,s){return s._isLinkedToArray=d,s.name=l.name,s.templateitemname=l.templateitemname,s},z.traceTemplater=function(d){var s,t,o={};for(s in d)t=d[s],Array.isArray(t)&&t.length&&(o[s]=0);return{newTrace:function(r){var n={type:s=S.coerce(r,{},k,"type"),_template:null};if(s in o){t=d[s];var a=o[s]%t.length;o[s]++,n._template=t[a]}return n}}},z.newContainer=function(d,s,t){var o=d._template,r=o&&(o[s]||t&&o[t]);return S.isPlainObject(r)||(r=null),d[s]={_template:r}},z.arrayTemplater=function(d,s,t){var o=d._template,r=o&&o[b(s)],n=o&&o[s];Array.isArray(n)&&n.length||(n=[]);var a={};return{newItem:function(i){var u={name:i.name,_input:i},h=u.templateitemname=i.templateitemname;if(!T(h))return u._template=r,u;for(var f=0;f<n.length;f++){var x=n[f];if(x.name===h)return a[h]=1,u._template=x,u}return u[t]=i[t]||!1,u._template=!1,u},defaultItems:function(){for(var i=[],u=0;u<n.length;u++){var h=n[u],f=h.name;if(T(f)&&!a[f]){var x={_template:h,name:f,_input:{_templateitemname:f}};x.templateitemname=h.templateitemname,i.push(x),a[f]=1}}return i}}},z.arrayDefaultKey=b,z.arrayEditor=function(d,s,t){var o=(S.nestedProperty(d,s).get()||[]).length,r=t._index,n=r>=o&&(t._input||{})._templateitemname;n&&(r=o);var a,i=s+"["+r+"]";function u(){a={},n&&(a[i]={},a[i].templateitemname=n)}function h(x,v){n?S.nestedProperty(a[i],x).set(v):a[i+"."+x]=v}function f(){var x=a;return u(),x}return u(),{modifyBase:function(x,v){a[x]=v},modifyItem:h,getUpdateObj:f,applyUpdate:function(x,v){x&&h(x,v);var g=f();for(var y in g)S.nestedProperty(d,y).set(g[y])}}}},61549:function(K,z,e){var S=e(39898),k=e(73972),l=e(74875),T=e(71828),b=e(63893),d=e(33306),s=e(7901),t=e(91424),o=e(92998),r=e(64168),n=e(89298),a=e(18783),i=e(99082),u=i.enforce,h=i.clean,f=e(71739).doAutoRange,x="start";function v(w,c,M){for(var _=0;_<M.length;_++){var E=M[_][0],L=M[_][1];if(!(E[0]>=w[1]||E[1]<=w[0])&&L[0]<c[1]&&L[1]>c[0])return!0}return!1}function g(w){var c,M,_,E,L,C,O=w._fullLayout,I=O._size,N=I.p,R=n.list(w,"",!0);if(O._paperdiv.style({width:w._context.responsive&&O.autosize&&!w._context._hasZeroWidth&&!w.layout.width?"100%":O.width+"px",height:w._context.responsive&&O.autosize&&!w._context._hasZeroHeight&&!w.layout.height?"100%":O.height+"px"}).selectAll(".main-svg").call(t.setSize,O.width,O.height),w._context.setBackground(w,O.paper_bgcolor),z.drawMainTitle(w),r.manage(w),!O._has("cartesian"))return l.previousPromises(w);function V(ze,He,Ve){var nt=ze._lw/2;return ze._id.charAt(0)==="x"?He?Ve==="top"?He._offset-N-nt:He._offset+He._length+N+nt:I.t+I.h*(1-(ze.position||0))+nt%1:He?Ve==="right"?He._offset+He._length+N+nt:He._offset-N-nt:I.l+I.w*(ze.position||0)+nt%1}for(c=0;c<R.length;c++){var F=(E=R[c])._anchorAxis;E._linepositions={},E._lw=t.crispRound(w,E.linewidth,1),E._mainLinePosition=V(E,F,E.side),E._mainMirrorPosition=E.mirror&&F?V(E,F,a.OPPOSITE_SIDE[E.side]):null}var D=[],U=[],j=[],J=s.opacity(O.paper_bgcolor)===1&&s.opacity(O.plot_bgcolor)===1&&O.paper_bgcolor===O.plot_bgcolor;for(M in O._plots)if((_=O._plots[M]).mainplot)_.bg&&_.bg.remove(),_.bg=void 0;else{var X=_.xaxis.domain,Z=_.yaxis.domain,Y=_.plotgroup;if(v(X,Z,j)){var W=Y.node(),Q=_.bg=T.ensureSingle(Y,"rect","bg");W.insertBefore(Q.node(),W.childNodes[0]),U.push(M)}else Y.select("rect.bg").remove(),j.push([X,Z]),J||(D.push(M),U.push(M))}var ne,re,ie,se,ge,ue,ce,le,de,Ce,xe,_e,we,Ae=O._bgLayer.selectAll(".bg").data(D);for(Ae.enter().append("rect").classed("bg",!0),Ae.exit().remove(),Ae.each(function(ze){O._plots[ze].bg=S.select(this)}),c=0;c<U.length;c++)_=O._plots[U[c]],L=_.xaxis,C=_.yaxis,_.bg&&L._offset!==void 0&&C._offset!==void 0&&_.bg.call(t.setRect,L._offset-N,C._offset-N,L._length+2*N,C._length+2*N).call(s.fill,O.plot_bgcolor).style("stroke-width",0);if(!O._hasOnlyLargeSploms)for(M in O._plots){_=O._plots[M],L=_.xaxis,C=_.yaxis;var $,oe,pe=_.clipId="clip"+O._uid+M+"plot",ye=T.ensureSingleById(O._clips,"clipPath",pe,function(ze){ze.classed("plotclip",!0).append("rect")});_.clipRect=ye.select("rect").attr({width:L._length,height:C._length}),t.setTranslate(_.plot,L._offset,C._offset),_._hasClipOnAxisFalse?($=null,oe=pe):($=pe,oe=null),t.setClipUrl(_.plot,$,w),_.layerClipId=oe}function ke(ze){return"M"+ne+","+ze+"H"+re}function De(ze){return"M"+L._offset+","+ze+"h"+L._length}function Pe(ze){return"M"+ze+","+le+"V"+ce}function Re(ze){return C._shift!==void 0&&(ze+=C._shift),"M"+ze+","+C._offset+"v"+C._length}function fe(ze,He,Ve){if(!ze.showline||M!==ze._mainSubplot)return"";if(!ze._anchorAxis)return Ve(ze._mainLinePosition);var nt=He(ze._mainLinePosition);return ze.mirror&&(nt+=He(ze._mainMirrorPosition)),nt}for(M in O._plots){_=O._plots[M],L=_.xaxis,C=_.yaxis;var ve="M0,0";y(L,M)&&(ge=m(L,"left",C,R),ne=L._offset-(ge?N+ge:0),ue=m(L,"right",C,R),re=L._offset+L._length+(ue?N+ue:0),ie=V(L,C,"bottom"),se=V(L,C,"top"),!(we=!L._anchorAxis||M!==L._mainSubplot)||L.mirror!=="allticks"&&L.mirror!=="all"||(L._linepositions[M]=[ie,se]),ve=fe(L,ke,De),we&&L.showline&&(L.mirror==="all"||L.mirror==="allticks")&&(ve+=ke(ie)+ke(se)),_.xlines.style("stroke-width",L._lw+"px").call(s.stroke,L.showline?L.linecolor:"rgba(0,0,0,0)")),_.xlines.attr("d",ve);var Te="M0,0";y(C,M)&&(xe=m(C,"bottom",L,R),ce=C._offset+C._length+(xe?N:0),_e=m(C,"top",L,R),le=C._offset-(_e?N:0),de=V(C,L,"left"),Ce=V(C,L,"right"),!(we=!C._anchorAxis||M!==C._mainSubplot)||C.mirror!=="allticks"&&C.mirror!=="all"||(C._linepositions[M]=[de,Ce]),Te=fe(C,Pe,Re),we&&C.showline&&(C.mirror==="all"||C.mirror==="allticks")&&(Te+=Pe(de)+Pe(Ce)),_.ylines.style("stroke-width",C._lw+"px").call(s.stroke,C.showline?C.linecolor:"rgba(0,0,0,0)")),_.ylines.attr("d",Te)}return n.makeClipPaths(w),l.previousPromises(w)}function y(w,c){return(w.ticks||w.showline)&&(c===w._mainSubplot||w.mirror==="all"||w.mirror==="allticks")}function p(w,c,M){if(!M.showline||!M._lw)return!1;if(M.mirror==="all"||M.mirror==="allticks")return!0;var _=M._anchorAxis;if(!_)return!1;var E=a.FROM_BL[c];return M.side===c?_.domain[E]===w.domain[E]:M.mirror&&_.domain[1-E]===w.domain[1-E]}function m(w,c,M,_){if(p(w,c,M))return M._lw;for(var E=0;E<_.length;E++){var L=_[E];if(L._mainAxis===M._mainAxis&&p(w,c,L))return L._lw}return 0}z.layoutStyles=function(w){return T.syncOrAsync([l.doAutoMargin,g],w)},z.drawMainTitle=function(w){var c,M=w._fullLayout.title,_=w._fullLayout,E=function(V){var F=V.title,D="middle";return T.isRightAnchor(F)?D="end":T.isLeftAnchor(F)&&(D=x),D}(_),L=function(V){var F=V.title,D="0em";return T.isTopAnchor(F)?D=a.CAP_SHIFT+"em":T.isMiddleAnchor(F)&&(D=a.MID_SHIFT+"em"),D}(_),C=function(V,F){var D=V.title,U=V._size,j=0;return F!=="0em"&&F?F===a.CAP_SHIFT+"em"&&(j=D.pad.t):j=-D.pad.b,D.y==="auto"?U.t/2:D.yref==="paper"?U.t+U.h-U.h*D.y+j:V.height-V.height*D.y+j}(_,L),O=function(V,F){var D=V.title,U=V._size,j=0;return F===x?j=D.pad.l:F==="end"&&(j=-D.pad.r),D.xref==="paper"?U.l+U.w*D.x+j:V.width*D.x+j}(_,E);if(o.draw(w,"gtitle",{propContainer:_,propName:"title.text",placeholder:_._dfltTitle.plot,attributes:{x:O,y:C,"text-anchor":E,dy:L}}),M.text&&M.automargin){var I=S.selectAll(".gtitle"),N=t.bBox(I.node()).height,R=function(V,F,D){var U=F.y,j=F.yanchor,J=U>.5?"t":"b",X=V._fullLayout.margin[J],Z=0;return F.yref==="paper"?Z=D+F.pad.t+F.pad.b:F.yref==="container"&&(Z=function(Y,W,Q,ne,re){var ie=0;return Q==="middle"&&(ie+=re/2),Y==="t"?(Q==="top"&&(ie+=re),ie+=ne-W*ne):(Q==="bottom"&&(ie+=re),ie+=W*ne),ie}(J,U,j,V._fullLayout.height,D)+F.pad.t+F.pad.b),Z>X?Z:0}(w,M,N);R>0&&(function(V,F,D,U){var j="title.automargin",J=V._fullLayout.title,X=J.y>.5?"t":"b",Z={x:J.x,y:J.y,t:0,b:0},Y={};J.yref==="paper"&&function(W,Q,ne,re,ie){var se=Q.yref==="paper"?W._fullLayout._size.h:W._fullLayout.height,ge=T.isTopAnchor(Q)?re:re-ie,ue=ne==="b"?se-ge:ge;return!(T.isTopAnchor(Q)&&ne==="t"||T.isBottomAnchor(Q)&&ne==="b")&&ue<ie}(V,J,X,F,U)?Z[X]=D:J.yref==="container"&&(Y[X]=D,V._fullLayout._reservedMargin[j]=Y),l.allowAutoMargin(V,j),l.autoMargin(V,j,Z)}(w,C,R,N),I.attr({x:O,y:C,"text-anchor":E,dy:(c=M.yanchor,c==="top"?a.CAP_SHIFT+.3+"em":c==="bottom"?"-0.3em":a.MID_SHIFT+"em")}).call(b.positionText,O,C))}},z.doTraceStyle=function(w){var c,M=w.calcdata,_=[];for(c=0;c<M.length;c++){var E=M[c],L=E[0]||{},C=L.trace||{},O=C._module||{},I=O.arraysToCalcdata;I&&I(E,C);var N=O.editStyle;N&&_.push({fn:N,cd0:L})}if(_.length){for(c=0;c<_.length;c++){var R=_[c];R.fn(w,R.cd0)}d(w),z.redrawReglTraces(w)}return l.style(w),k.getComponentMethod("legend","draw")(w),l.previousPromises(w)},z.doColorBars=function(w){return k.getComponentMethod("colorbar","draw")(w),l.previousPromises(w)},z.layoutReplot=function(w){var c=w.layout;return w.layout=void 0,k.call("_doPlot",w,"",c)},z.doLegend=function(w){return k.getComponentMethod("legend","draw")(w),l.previousPromises(w)},z.doTicksRelayout=function(w){return n.draw(w,"redraw"),w._fullLayout._hasOnlyLargeSploms&&(k.subplotsRegistry.splom.updateGrid(w),d(w),z.redrawReglTraces(w)),z.drawMainTitle(w),l.previousPromises(w)},z.doModeBar=function(w){var c=w._fullLayout;r.manage(w);for(var M=0;M<c._basePlotModules.length;M++){var _=c._basePlotModules[M].updateFx;_&&_(w)}return l.previousPromises(w)},z.doCamera=function(w){for(var c=w._fullLayout,M=c._subplots.gl3d,_=0;_<M.length;_++){var E=c[M[_]];E._scene.setViewport(E)}},z.drawData=function(w){var c=w._fullLayout;d(w);for(var M=c._basePlotModules,_=0;_<M.length;_++)M[_].plot(w);return z.redrawReglTraces(w),l.style(w),k.getComponentMethod("selections","draw")(w),k.getComponentMethod("shapes","draw")(w),k.getComponentMethod("annotations","draw")(w),k.getComponentMethod("images","draw")(w),c._replotting=!1,l.previousPromises(w)},z.redrawReglTraces=function(w){var c=w._fullLayout;if(c._has("regl")){var M,_,E=w._fullData,L=[],C=[];for(c._hasOnlyLargeSploms&&c._splomGrid.draw(),M=0;M<E.length;M++){var O=E[M];O.visible===!0&&O._length!==0&&(O.type==="splom"?c._splomScenes[O.uid].draw():O.type==="scattergl"?T.pushUnique(L,O.xaxis+O.yaxis):O.type==="scatterpolargl"&&T.pushUnique(C,O.subplot))}for(M=0;M<L.length;M++)(_=c._plots[L[M]])._scene&&_._scene.draw();for(M=0;M<C.length;M++)(_=c[C[M]]._subplot)._scene&&_._scene.draw()}},z.doAutoRangeAndConstraints=function(w){for(var c,M=n.list(w,"",!0),_={},E=0;E<M.length;E++)if(!_[(c=M[E])._id]){_[c._id]=1,h(w,c),f(w,c);var L=c._matchGroup;if(L)for(var C in L){var O=n.getFromId(w,C);f(w,O,c.range),_[C]=1}}u(w)},z.finalDraw=function(w){k.getComponentMethod("rangeslider","draw")(w),k.getComponentMethod("rangeselector","draw")(w)},z.drawMarginPushers=function(w){k.getComponentMethod("legend","draw")(w),k.getComponentMethod("rangeselector","draw")(w),k.getComponentMethod("sliders","draw")(w),k.getComponentMethod("updatemenus","draw")(w),k.getComponentMethod("colorbar","draw")(w)}},96318:function(K,z,e){var S=e(71828),k=S.isPlainObject,l=e(86281),T=e(74875),b=e(9012),d=e(44467),s=e(72075).dfltConfig;function t(f,x){f=S.extendDeep({},f);var v,g,y=Object.keys(f).sort();function p(_,E,L){if(k(E)&&k(_))t(_,E);else if(Array.isArray(E)&&Array.isArray(_)){var C=d.arrayTemplater({_template:f},L);for(g=0;g<E.length;g++){var O=E[g],I=C.newItem(O)._template;I&&t(I,O)}var N=C.defaultItems();for(g=0;g<N.length;g++)E.push(N[g]._template);for(g=0;g<E.length;g++)delete E[g].templateitemname}}for(v=0;v<y.length;v++){var m=y[v],w=f[m];if(m in x?p(w,x[m],m):x[m]=w,o(m)===m)for(var c in x){var M=o(c);c===M||M!==m||c in f||p(w,x[c],m)}}}function o(f){return f.replace(/[0-9]+$/,"")}function r(f,x,v,g,y){var p=y&&v(y);for(var m in f){var w=f[m],c=i(f,m,g),M=i(f,m,y),_=v(M);if(!_){var E=o(m);E!==m&&(_=v(M=i(f,E,y)))}if(!(p&&p===_||!_||_._noTemplating||_.valType==="data_array"||_.arrayOk&&Array.isArray(w)))if(!_.valType&&k(w))r(w,x,v,c,M);else if(_._isLinkedToArray&&Array.isArray(w))for(var L=!1,C=0,O={},I=0;I<w.length;I++){var N=w[I];if(k(N)){var R=N.name;if(R)O[R]||(r(N,x,v,i(w,C,c),i(w,C,M)),C++,O[R]=1);else if(!L){var V=i(f,d.arrayDefaultKey(m),g),F=i(w,C,c);r(N,x,v,F,i(w,C,M));var D=S.nestedProperty(x,F);S.nestedProperty(x,V).set(D.get()),D.set(null),L=!0}}}else S.nestedProperty(x,c).set(w)}}function n(f,x){return l.getLayoutValObject(f,S.nestedProperty({},x).parts)}function a(f,x){return l.getTraceValObject(f,S.nestedProperty({},x).parts)}function i(f,x,v){return v?Array.isArray(f)?v+"["+x+"]":v+"."+x:x}function u(f){for(var x=0;x<f.length;x++)if(k(f[x]))return!0}function h(f){var x;switch(f.code){case"data":x="The template has no key data.";break;case"layout":x="The template has no key layout.";break;case"missing":x=f.path?"There are no templates for item "+f.path+" with name "+f.templateitemname:"There are no templates for trace "+f.index+", of type "+f.traceType+".";break;case"unused":x=f.path?"The template item at "+f.path+" was not used in constructing the plot.":f.dataCount?"Some of the templates of type "+f.traceType+" were not used. The template has "+f.templateCount+" traces, the data only has "+f.dataCount+" of this type.":"The template has "+f.templateCount+" traces of type "+f.traceType+" but there are none in the data.";break;case"reused":x="Some of the templates of type "+f.traceType+" were used more than once. The template has "+f.templateCount+" traces, the data has "+f.dataCount+" of this type."}return f.msg=x,f}z.makeTemplate=function(f){f=S.isPlainObject(f)?f:S.getGraphDiv(f),f=S.extendDeep({_context:s},{data:f.data,layout:f.layout}),T.supplyDefaults(f);var x=f.data||[],v=f.layout||{};v._basePlotModules=f._fullLayout._basePlotModules,v._modules=f._fullLayout._modules;var g={data:{},layout:{}};x.forEach(function(C){var O={};r(C,O,a.bind(null,C));var I=S.coerce(C,{},b,"type"),N=g.data[I];N||(N=g.data[I]=[]),N.push(O)}),r(v,g.layout,n.bind(null,v)),delete g.layout.template;var y=v.template;if(k(y)){var p,m,w,c,M,_,E=y.layout;k(E)&&t(E,g.layout);var L=y.data;if(k(L)){for(m in g.data)if(w=L[m],Array.isArray(w)){for(_=(M=g.data[m]).length,c=w.length,p=0;p<_;p++)t(w[p%c],M[p]);for(p=_;p<c;p++)M.push(S.extendDeep({},w[p]))}for(m in L)m in g.data||(g.data[m]=S.extendDeep([],L[m]))}}return g},z.validateTemplate=function(f,x){var v=S.extendDeep({},{_context:s,data:f.data,layout:f.layout}),g=v.layout||{};k(x)||(x=g.template||{});var y=x.layout,p=x.data,m=[];v.layout=g,v.layout.template=x,T.supplyDefaults(v);var w=v._fullLayout,c=v._fullData,M={};if(k(y)?(function N(R,V){for(var F in R)if(F.charAt(0)!=="_"&&k(R[F])){var D,U=o(F),j=[];for(D=0;D<V.length;D++)j.push(i(R,F,V[D])),U!==F&&j.push(i(R,U,V[D]));for(D=0;D<j.length;D++)M[j[D]]=1;N(R[F],j)}}(w,["layout"]),function N(R,V){for(var F in R)if(F.indexOf("defaults")===-1&&k(R[F])){var D=i(R,F,V);M[D]?N(R[F],D):m.push({code:"unused",path:D})}}(y,"layout")):m.push({code:"layout"}),k(p)){for(var _,E={},L=0;L<c.length;L++){var C=c[L];E[_=C.type]=(E[_]||0)+1,C._fullInput._template||m.push({code:"missing",index:C._fullInput.index,traceType:_})}for(_ in p){var O=p[_].length,I=E[_]||0;O>I?m.push({code:"unused",traceType:_,templateCount:O,dataCount:I}):I>O&&m.push({code:"reused",traceType:_,templateCount:O,dataCount:I})}}else m.push({code:"data"});if(function N(R,V){for(var F in R)if(F.charAt(0)!=="_"){var D=R[F],U=i(R,F,V);k(D)?(Array.isArray(R)&&D._template===!1&&D.templateitemname&&m.push({code:"missing",path:U,templateitemname:D.templateitemname}),N(D,U)):Array.isArray(D)&&u(D)&&N(D,U)}}({data:c,layout:w},""),m.length)return m.map(h)}},403:function(K,z,e){var S=e(92770),k=e(72391),l=e(74875),T=e(71828),b=e(25095),d=e(5900),s=e(70942),t=e(11506).version,o={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};K.exports=function(r,n){var a,i,u,h;function f(I){return!(I in n)||T.validate(n[I],o[I])}if(n=n||{},T.isPlainObject(r)?(a=r.data||[],i=r.layout||{},u=r.config||{},h={}):(r=T.getGraphDiv(r),a=T.extendDeep([],r.data),i=T.extendDeep({},r.layout),u=r._context,h=r._fullLayout||{}),!f("width")&&n.width!==null||!f("height")&&n.height!==null)throw new Error("Height and width should be pixel values.");if(!f("format"))throw new Error("Export format is not "+T.join2(o.format.values,", "," or ")+".");var x={};function v(I,N){return T.coerce(n,x,o,I,N)}var g=v("format"),y=v("width"),p=v("height"),m=v("scale"),w=v("setBackground"),c=v("imageDataOnly"),M=document.createElement("div");M.style.position="absolute",M.style.left="-5000px",document.body.appendChild(M);var _=T.extendFlat({},i);y?_.width=y:n.width===null&&S(h.width)&&(_.width=h.width),p?_.height=p:n.height===null&&S(h.height)&&(_.height=h.height);var E=T.extendFlat({},u,{_exportedPlot:!0,staticPlot:!0,setBackground:w}),L=b.getRedrawFunc(M);function C(){return new Promise(function(I){setTimeout(I,b.getDelay(M._fullLayout))})}function O(){return new Promise(function(I,N){var R=d(M,g,m),V=M._fullLayout.width,F=M._fullLayout.height;function D(){k.purge(M),document.body.removeChild(M)}if(g==="full-json"){var U=l.graphJson(M,!1,"keepdata","object",!0,!0);return U.version=t,U=JSON.stringify(U),D(),I(c?U:b.encodeJSON(U))}if(D(),g==="svg")return I(c?R:b.encodeSVG(R));var j=document.createElement("canvas");j.id=T.randstr(),s({format:g,width:V,height:F,scale:m,canvas:j,svg:R,promise:!0}).then(I).catch(N)})}return new Promise(function(I,N){k.newPlot(M,a,_,E).then(L).then(C).then(O).then(function(R){I(function(V){return c?V.replace(b.IMAGE_URL_PREFIX,""):V}(R))}).catch(function(R){N(R)})})}},84936:function(K,z,e){var S=e(71828),k=e(74875),l=e(86281),T=e(72075).dfltConfig,b=S.isPlainObject,d=Array.isArray,s=S.isArrayOrTypedArray;function t(x,v,g,y,p,m){m=m||[];for(var w=Object.keys(x),c=0;c<w.length;c++){var M=w[c];if(M!=="transforms"){var _=m.slice();_.push(M);var E=x[M],L=v[M],C=u(g,M),O=(C||{}).valType,I=O==="info_array",N=O==="colorscale",R=(C||{}).items;if(i(g,M))if(b(E)&&b(L)&&O!=="any")t(E,L,C,y,p,_);else if(I&&d(E)){E.length>L.length&&y.push(a("unused",p,_.concat(L.length)));var V,F,D,U,j,J=L.length,X=Array.isArray(R);if(X&&(J=Math.min(J,R.length)),C.dimensions===2)for(F=0;F<J;F++)if(d(E[F])){E[F].length>L[F].length&&y.push(a("unused",p,_.concat(F,L[F].length)));var Z=L[F].length;for(V=0;V<(X?Math.min(Z,R[F].length):Z);V++)D=X?R[F][V]:R,U=E[F][V],j=L[F][V],S.validate(U,D)?j!==U&&j!==+U&&y.push(a("dynamic",p,_.concat(F,V),U,j)):y.push(a("value",p,_.concat(F,V),U))}else y.push(a("array",p,_.concat(F),E[F]));else for(F=0;F<J;F++)D=X?R[F]:R,U=E[F],j=L[F],S.validate(U,D)?j!==U&&j!==+U&&y.push(a("dynamic",p,_.concat(F),U,j)):y.push(a("value",p,_.concat(F),U))}else if(C.items&&!I&&d(E)){var Y,W,Q=R[Object.keys(R)[0]],ne=[];for(Y=0;Y<L.length;Y++){var re=L[Y]._index||Y;if((W=_.slice()).push(re),b(E[re])&&b(L[Y])){ne.push(re);var ie=E[re],se=L[Y];b(ie)&&ie.visible!==!1&&se.visible===!1?y.push(a("invisible",p,W)):t(ie,se,Q,y,p,W)}}for(Y=0;Y<E.length;Y++)(W=_.slice()).push(Y),b(E[Y])?ne.indexOf(Y)===-1&&y.push(a("unused",p,W)):y.push(a("object",p,W,E[Y]))}else!b(E)&&b(L)?y.push(a("object",p,_,E)):s(E)||!s(L)||I||N?M in v?S.validate(E,C)?C.valType==="enumerated"&&(C.coerceNumber&&E!==+L||E!==L)&&y.push(a("dynamic",p,_,E,L)):y.push(a("value",p,_,E)):y.push(a("unused",p,_,E)):y.push(a("array",p,_,E));else y.push(a("schema",p,_))}}return y}function o(x,v){for(var g=x.layout.layoutAttributes,y=0;y<v.length;y++){var p=v[y],m=x.traces[p.type],w=m.layoutAttributes;w&&(p.subplot?S.extendFlat(g[m.attributes.subplot.dflt],w):S.extendFlat(g,w))}return g}K.exports=function(x,v){x===void 0&&(x=[]),v===void 0&&(v={});var g,y,p=l.get(),m=[],w={_context:S.extendFlat({},T)};d(x)?(w.data=S.extendDeep([],x),g=x):(w.data=[],g=[],m.push(a("array","data"))),b(v)?(w.layout=S.extendDeep({},v),y=v):(w.layout={},y={},arguments.length>1&&m.push(a("object","layout"))),k.supplyDefaults(w);for(var c=w._fullData,M=g.length,_=0;_<M;_++){var E=g[_],L=["data",_];if(b(E)){var C=c[_],O=C.type,I=p.traces[O].attributes;I.type={valType:"enumerated",values:[O]},C.visible===!1&&E.visible!==!1&&m.push(a("invisible",L)),t(E,C,I,m,L);var N=E.transforms,R=C.transforms;if(N){d(N)||m.push(a("array",L,["transforms"])),L.push("transforms");for(var V=0;V<N.length;V++){var F=["transforms",V],D=N[V].type;if(b(N[V])){var U=p.transforms[D]?p.transforms[D].attributes:{};U.type={valType:"enumerated",values:Object.keys(p.transforms)},t(N[V],R[V],U,m,L,F)}else m.push(a("object",L,F))}}}else m.push(a("object",L))}var j=w._fullLayout,J=o(p,c);return t(y,j,J,m,"layout"),m.length===0?void 0:m};var r={object:function(x,v){return(x==="layout"&&v===""?"The layout argument":x[0]==="data"&&v===""?"Trace "+x[1]+" in the data argument":n(x)+"key "+v)+" must be linked to an object container"},array:function(x,v){return(x==="data"?"The data argument":n(x)+"key "+v)+" must be linked to an array container"},schema:function(x,v){return n(x)+"key "+v+" is not part of the schema"},unused:function(x,v,g){var y=b(g)?"container":"key";return n(x)+y+" "+v+" did not get coerced"},dynamic:function(x,v,g,y){return[n(x)+"key",v,"(set to '"+g+"')","got reset to","'"+y+"'","during defaults."].join(" ")},invisible:function(x,v){return(v?n(x)+"item "+v:"Trace "+x[1])+" got defaulted to be not visible"},value:function(x,v,g){return[n(x)+"key "+v,"is set to an invalid value ("+g+")"].join(" ")}};function n(x){return d(x)?"In data trace "+x[1]+", ":"In "+x+", "}function a(x,v,g,y,p){var m,w;g=g||"",d(v)?(m=v[0],w=v[1]):(m=v,w=null);var c=function(_){if(!d(_))return String(_);for(var E="",L=0;L<_.length;L++){var C=_[L];typeof C=="number"?E=E.substr(0,E.length-1)+"["+C+"]":E+=C,L<_.length-1&&(E+=".")}return E}(g),M=r[x](v,c,y,p);return S.log(M),{code:x,container:m,trace:w,path:g,astr:c,msg:M}}function i(x,v){var g=f(v),y=g.keyMinusId,p=g.id;return!!(y in x&&x[y]._isSubplotObj&&p)||v in x}function u(x,v){return v in x?x[v]:x[f(v).keyMinusId]}var h=S.counterRegex("([a-z]+)");function f(x){var v=x.match(h);return{keyMinusId:v&&v[1],id:v&&v[2]}}},85594:function(K){K.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},85501:function(K,z,e){var S=e(71828),k=e(44467);K.exports=function(l,T,b){var d,s,t=b.name,o=b.inclusionAttr||"visible",r=T[t],n=S.isArrayOrTypedArray(l[t])?l[t]:[],a=T[t]=[],i=k.arrayTemplater(T,t,o);for(d=0;d<n.length;d++){var u=n[d];S.isPlainObject(u)?s=i.newItem(u):(s=i.newItem({}))[o]=!1,s._index=d,s[o]!==!1&&b.handleItemDefaults(u,s,T,b),a.push(s)}var h=i.defaultItems();for(d=0;d<h.length;d++)(s=h[d])._index=a.length,b.handleItemDefaults({},s,T,b,{}),a.push(s);if(S.isArrayOrTypedArray(r)){var f=Math.min(r.length,a.length);for(d=0;d<f;d++)S.relinkPrivateKeys(a[d],r[d])}return a}},9012:function(K,z,e){var S=e(41940),k=e(77914);K.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:S({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:k.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},42973:function(K,z,e){var S=e(92770),k=e(71828),l=k.dateTime2ms,T=k.incrementMonth,b=e(50606).ONEAVGMONTH;K.exports=function(d,s,t,o){if(s.type!=="date")return{vals:o};var r=d[t+"periodalignment"];if(!r)return{vals:o};var n,a=d[t+"period"];if(S(a)){if((a=+a)<=0)return{vals:o}}else if(typeof a=="string"&&a.charAt(0)==="M"){var i=+a.substring(1);if(!(i>0&&Math.round(i)===i))return{vals:o};n=i}for(var u=s.calendar,h=r==="start",f=r==="end",x=d[t+"period0"],v=l(x,u)||0,g=[],y=[],p=[],m=o.length,w=0;w<m;w++){var c,M,_,E=o[w];if(n){for(c=Math.round((E-v)/(n*b)),_=T(v,n*c,u);_>E;)_=T(_,-n,u);for(;_<=E;)_=T(_,n,u);M=T(_,-n,u)}else{for(_=v+(c=Math.round((E-v)/a))*a;_>E;)_-=a;for(;_<=E;)_+=a;M=_-a}g[w]=h?M:f?_:(M+_)/2,y[w]=M,p[w]=_}return{vals:g,starts:y,ends:p}}},89502:function(K){K.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},71739:function(K,z,e){var S=e(39898),k=e(92770),l=e(71828),T=e(50606).FP_SAFE,b=e(73972),d=e(91424),s=e(41675),t=s.getFromId,o=s.isLinked;function r(y,p){var m,w,c=[],M=y._fullLayout,_=a(M,p,0),E=a(M,p,1),L=i(y,p),C=L.min,O=L.max;if(C.length===0||O.length===0)return l.simpleMap(p.range,p.r2l);var I=C[0].val,N=O[0].val;for(m=1;m<C.length&&I===N;m++)I=Math.min(I,C[m].val);for(m=1;m<O.length&&I===N;m++)N=Math.max(N,O[m].val);var R=!1;if(p.range){var V=l.simpleMap(p.range,p.r2l);R=V[1]<V[0]}p.autorange==="reversed"&&(R=!0,p.autorange=!0);var F,D,U,j,J,X,Z=p.rangemode,Y=Z==="tozero",W=Z==="nonnegative",Q=p._length,ne=Q/10,re=0;for(m=0;m<C.length;m++)for(F=C[m],w=0;w<O.length;w++)(X=(D=O[w]).val-F.val-n(p,F.val,D.val))>0&&((J=Q-_(F)-E(D))>ne?X/J>re&&(U=F,j=D,re=X/J):X/Q>re&&(U={val:F.val,nopad:1},j={val:D.val,nopad:1},re=X/Q));if(I===N){var ie=I-1,se=I+1;if(Y)if(I===0)c=[0,1];else{var ge=(I>0?O:C).reduce(function(ce,le){return Math.max(ce,E(le))},0),ue=I/(1-Math.min(.5,ge/Q));c=I>0?[0,ue]:[ue,0]}else c=W?[Math.max(0,ie),Math.max(1,se)]:[ie,se]}else Y?(U.val>=0&&(U={val:0,nopad:1}),j.val<=0&&(j={val:0,nopad:1})):W&&(U.val-re*_(U)<0&&(U={val:0,nopad:1}),j.val<=0&&(j={val:1,nopad:1})),re=(j.val-U.val-n(p,F.val,D.val))/(Q-_(U)-E(j)),c=[U.val-re*_(U),j.val+re*E(j)];return R&&c.reverse(),l.simpleMap(c,p.l2r||Number)}function n(y,p,m){var w=0;if(y.rangebreaks)for(var c=y.locateBreaks(p,m),M=0;M<c.length;M++){var _=c[M];w+=_.max-_.min}return w}function a(y,p,m){var w=.05*p._length,c=p._anchorAxis||{};if((p.ticklabelposition||"").indexOf("inside")!==-1||(c.ticklabelposition||"").indexOf("inside")!==-1){var M=p.autorange==="reversed";if(!M){var _=l.simpleMap(p.range,p.r2l);M=_[1]<_[0]}M&&(m=!m)}var E=0;return o(y,p._id)||(E=function(L,C,O){var I=0,N=C._id.charAt(0)==="x";for(var R in L._plots){var V=L._plots[R];if(C._id===V.xaxis._id||C._id===V.yaxis._id){var F=(N?V.yaxis:V.xaxis)||{};if((F.ticklabelposition||"").indexOf("inside")!==-1&&(!O&&(F.side==="left"||F.side==="bottom")||O&&(F.side==="top"||F.side==="right"))){if(F._vals){var D=l.deg2rad(F._tickAngles[F._id+"tick"]||0),U=Math.abs(Math.cos(D)),j=Math.abs(Math.sin(D));if(!F._vals[0].bb){var J=F._id+"tick";F._selections[J].each(function(Q){var ne=S.select(this);ne.select(".text-math-group").empty()&&(Q.bb=d.bBox(ne.node()))})}for(var X=0;X<F._vals.length;X++){var Z=F._vals[X].bb;if(Z){var Y=6+Z.width,W=6+Z.height;I=Math.max(I,N?Math.max(Y*U,W*j):Math.max(W*U,Y*j))}}}F.ticks==="inside"&&F.ticklabelposition==="inside"&&(I+=F.ticklen||0)}}}return I}(y,p,m)),w=Math.max(E,w),p.constrain==="domain"&&p._inputDomain&&(w*=(p._inputDomain[1]-p._inputDomain[0])/(p.domain[1]-p.domain[0])),function(L){return L.nopad?0:L.pad+(L.extrapad?w:E)}}function i(y,p,m){var w,c,M,_=p._id,E=y._fullData,L=y._fullLayout,C=[],O=[];function I(D,U){for(w=0;w<U.length;w++){var j=D[U[w]],J=(j._extremes||{})[_];if(j.visible===!0&&J){for(c=0;c<J.min.length;c++)M=J.min[c],u(C,M.val,M.pad,{extrapad:M.extrapad});for(c=0;c<J.max.length;c++)M=J.max[c],h(O,M.val,M.pad,{extrapad:M.extrapad})}}}if(I(E,p._traceIndices),I(L.annotations||[],p._annIndices||[]),I(L.shapes||[],p._shapeIndices||[]),p._matchGroup&&!m){for(var N in p._matchGroup)if(N!==p._id){var R=t(y,N),V=i(y,R,!0),F=p._length/R._length;for(c=0;c<V.min.length;c++)M=V.min[c],u(C,M.val,M.pad*F,{extrapad:M.extrapad});for(c=0;c<V.max.length;c++)M=V.max[c],h(O,M.val,M.pad*F,{extrapad:M.extrapad})}}return{min:C,max:O}}function u(y,p,m,w){f(y,p,m,w,v)}function h(y,p,m,w){f(y,p,m,w,g)}function f(y,p,m,w,c){for(var M=w.tozero,_=w.extrapad,E=!0,L=0;L<y.length&&E;L++){var C=y[L];if(c(C.val,p)&&C.pad>=m&&(C.extrapad||!_)){E=!1;break}c(p,C.val)&&C.pad<=m&&(_||!C.extrapad)&&(y.splice(L,1),L--)}if(E){var O=M&&p===0;y.push({val:p,pad:O?0:m,extrapad:!O&&_})}}function x(y){return k(y)&&Math.abs(y)<T}function v(y,p){return y<=p}function g(y,p){return y>=p}K.exports={getAutoRange:r,makePadFn:a,doAutoRange:function(y,p,m){if(p.setScale(),p.autorange){p.range=m?m.slice():r(y,p),p._r=p.range.slice(),p._rl=l.simpleMap(p._r,p.r2l);var w=p._input,c={};c[p._attr+".range"]=p.range,c[p._attr+".autorange"]=p.autorange,b.call("_storeDirectGUIEdit",y.layout,y._fullLayout._preGUI,c),w.range=p.range.slice(),w.autorange=p.autorange}var M=p._anchorAxis;if(M&&M.rangeslider){var _=M.rangeslider[p._name];_&&_.rangemode==="auto"&&(_.range=r(y,p)),M._input.rangeslider[p._name]=l.extendFlat({},_)}},findExtremes:function(y,p,m){m||(m={}),y._m||y.setScale();var w,c,M,_,E,L,C,O,I,N=[],R=[],V=p.length,F=m.padded||!1,D=m.tozero&&(y.type==="linear"||y.type==="-"),U=y.type==="log",j=!1,J=m.vpadLinearized||!1;function X(se){if(Array.isArray(se))return j=!0,function(ue){return Math.max(Number(se[ue]||0),0)};var ge=Math.max(Number(se||0),0);return function(){return ge}}var Z=X((y._m>0?m.ppadplus:m.ppadminus)||m.ppad||0),Y=X((y._m>0?m.ppadminus:m.ppadplus)||m.ppad||0),W=X(m.vpadplus||m.vpad),Q=X(m.vpadminus||m.vpad);if(!j){if(O=1/0,I=-1/0,U)for(w=0;w<V;w++)(c=p[w])<O&&c>0&&(O=c),c>I&&c<T&&(I=c);else for(w=0;w<V;w++)(c=p[w])<O&&c>-T&&(O=c),c>I&&c<T&&(I=c);p=[O,I],V=2}var ne={tozero:D,extrapad:F};function re(se){M=p[se],k(M)&&(L=Z(se),C=Y(se),J?(_=y.c2l(M)-Q(se),E=y.c2l(M)+W(se)):(O=M-Q(se),I=M+W(se),U&&O<I/10&&(O=I/10),_=y.c2l(O),E=y.c2l(I)),D&&(_=Math.min(0,_),E=Math.max(0,E)),x(_)&&u(N,_,C,ne),x(E)&&h(R,E,L,ne))}var ie=Math.min(6,V);for(w=0;w<ie;w++)re(w);for(w=V-1;w>=ie;w--)re(w);return{min:N,max:R,opts:m}},concatExtremes:i}},89298:function(K,z,e){var S=e(39898),k=e(92770),l=e(74875),T=e(73972),b=e(71828),d=b.strTranslate,s=e(63893),t=e(92998),o=e(7901),r=e(91424),n=e(13838),a=e(66287),i=e(50606),u=i.ONEMAXYEAR,h=i.ONEAVGYEAR,f=i.ONEMINYEAR,x=i.ONEMAXQUARTER,v=i.ONEAVGQUARTER,g=i.ONEMINQUARTER,y=i.ONEMAXMONTH,p=i.ONEAVGMONTH,m=i.ONEMINMONTH,w=i.ONEWEEK,c=i.ONEDAY,M=c/2,_=i.ONEHOUR,E=i.ONEMIN,L=i.ONESEC,C=i.MINUS_SIGN,O=i.BADNUM,I={K:"zeroline"},N={K:"gridline",L:"path"},R={K:"minor-gridline",L:"path"},V={K:"tick",L:"path"},F={K:"tick",L:"text"},D={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},U=e(18783),j=U.MID_SHIFT,J=U.CAP_SHIFT,X=U.LINE_SPACING,Z=U.OPPOSITE_SIDE,Y=K.exports={};Y.setConvert=e(21994);var W=e(4322),Q=e(41675),ne=Q.idSort,re=Q.isLinked;Y.id2name=Q.id2name,Y.name2id=Q.name2id,Y.cleanId=Q.cleanId,Y.list=Q.list,Y.listIds=Q.listIds,Y.getFromId=Q.getFromId,Y.getFromTrace=Q.getFromTrace;var ie=e(71739);function se(Se){var Ie=1e-4*(Se[1]-Se[0]);return[Se[0]-Ie,Se[1]+Ie]}Y.getAutoRange=ie.getAutoRange,Y.findExtremes=ie.findExtremes,Y.coerceRef=function(Se,Ie,We,it,lt,gt){var At=it.charAt(it.length-1),kt=We._fullLayout._subplots[At+"axis"],ht=it+"ref",St={};return lt||(lt=kt[0]||(typeof gt=="string"?gt:gt[0])),gt||(gt=lt),kt=kt.concat(kt.map(function(vt){return vt+" domain"})),St[ht]={valType:"enumerated",values:kt.concat(gt?typeof gt=="string"?[gt]:gt:[]),dflt:lt},b.coerce(Se,Ie,St,ht)},Y.getRefType=function(Se){return Se===void 0?Se:Se==="paper"?"paper":Se==="pixel"?"pixel":/( domain)$/.test(Se)?"domain":"range"},Y.coercePosition=function(Se,Ie,We,it,lt,gt){var At,kt;if(Y.getRefType(it)!=="range")At=b.ensureNumber,kt=We(lt,gt);else{var ht=Y.getFromId(Ie,it);kt=We(lt,gt=ht.fraction2r(gt)),At=ht.cleanPos}Se[lt]=At(kt)},Y.cleanPosition=function(Se,Ie,We){return(We==="paper"||We==="pixel"?b.ensureNumber:Y.getFromId(Ie,We).cleanPos)(Se)},Y.redrawComponents=function(Se,Ie){Ie=Ie||Y.listIds(Se);var We=Se._fullLayout;function it(lt,gt,At,kt){for(var ht=T.getComponentMethod(lt,gt),St={},vt=0;vt<Ie.length;vt++)for(var Mt=We[Y.id2name(Ie[vt])][At],It=0;It<Mt.length;It++){var Ut=Mt[It];if(!St[Ut]&&(ht(Se,Ut),St[Ut]=1,kt))return}}it("annotations","drawOne","_annIndices"),it("shapes","drawOne","_shapeIndices"),it("images","draw","_imgIndices",!0),it("selections","drawOne","_selectionIndices")};var ge=Y.getDataConversions=function(Se,Ie,We,it){var lt,gt=We==="x"||We==="y"||We==="z"?We:it;if(Array.isArray(gt)){if(lt={type:W(it,void 0,{autotypenumbers:Se._fullLayout.autotypenumbers}),_categories:[]},Y.setConvert(lt),lt.type==="category")for(var At=0;At<it.length;At++)lt.d2c(it[At])}else lt=Y.getFromTrace(Se,Ie,gt);return lt?{d2c:lt.d2c,c2d:lt.c2d}:gt==="ids"?{d2c:ce,c2d:ce}:{d2c:ue,c2d:ue}};function ue(Se){return+Se}function ce(Se){return String(Se)}function le(Se,Ie){return Math.abs((Se/Ie+.5)%1-.5)<.001}function de(Se,Ie){return Math.abs(Se/Ie-1)<.001}function Ce(Se){return+Se.substring(1)}function xe(Se,Ie){return Se.rangebreaks&&(Ie=Ie.filter(function(We){return Se.maskBreaks(We.x)!==O})),Ie}function _e(Se){var Ie=Se._mainAxis,We=[];if(Ie._vals){for(var it=0;it<Ie._vals.length;it++)if(!Ie._vals[it].noTick){var lt=Ie.l2p(Ie._vals[it].x),gt=Se.p2l(lt),At=Y.tickText(Se,gt);Ie._vals[it].minor&&(At.minor=!0,At.text=""),We.push(At)}}return xe(Se,We)}function we(Se){var Ie=se(b.simpleMap(Se.range,Se.r2l)),We=Math.min(Ie[0],Ie[1]),it=Math.max(Ie[0],Ie[1]),lt=Se.type==="category"?Se.d2l_noadd:Se.d2l;Se.type==="log"&&String(Se.dtick).charAt(0)!=="L"&&(Se.dtick="L"+Math.pow(10,Math.floor(Math.min(Se.range[0],Se.range[1]))-1));for(var gt=[],At=0;At<=1;At++)if(!At||Se.minor){var kt=At?Se.minor.tickvals:Se.tickvals,ht=At?[]:Se.ticktext;if(kt){Array.isArray(ht)||(ht=[]);for(var St=0;St<kt.length;St++){var vt=lt(kt[St]);if(vt>We&&vt<it){var Mt=ht[St]===void 0?Y.tickText(Se,vt):fe(Se,vt,String(ht[St]));At&&(Mt.minor=!0,Mt.text=""),gt.push(Mt)}}}}return xe(Se,gt)}Y.getDataToCoordFunc=function(Se,Ie,We,it){return ge(Se,Ie,We,it).d2c},Y.counterLetter=function(Se){var Ie=Se.charAt(0);return Ie==="x"?"y":Ie==="y"?"x":void 0},Y.minDtick=function(Se,Ie,We,it){["log","category","multicategory"].indexOf(Se.type)===-1&&it?Se._minDtick===void 0?(Se._minDtick=Ie,Se._forceTick0=We):Se._minDtick&&((Se._minDtick/Ie+1e-6)%1<2e-6&&((We-Se._forceTick0)/Ie%1+1.000001)%1<2e-6?(Se._minDtick=Ie,Se._forceTick0=We):((Ie/Se._minDtick+1e-6)%1>2e-6||((We-Se._forceTick0)/Se._minDtick%1+1.000001)%1>2e-6)&&(Se._minDtick=0)):Se._minDtick=0},Y.saveRangeInitial=function(Se,Ie){for(var We=Y.list(Se,"",!0),it=!1,lt=0;lt<We.length;lt++){var gt=We[lt],At=gt._rangeInitial===void 0,kt=At||!(gt.range[0]===gt._rangeInitial[0]&&gt.range[1]===gt._rangeInitial[1]);(At&&gt.autorange===!1||Ie&&kt)&&(gt._rangeInitial=gt.range.slice(),it=!0)}return it},Y.saveShowSpikeInitial=function(Se,Ie){for(var We=Y.list(Se,"",!0),it=!1,lt="on",gt=0;gt<We.length;gt++){var At=We[gt],kt=At._showSpikeInitial===void 0,ht=kt||At.showspikes!==At._showspikes;(kt||Ie&&ht)&&(At._showSpikeInitial=At.showspikes,it=!0),lt!=="on"||At.showspikes||(lt="off")}return Se._fullLayout._cartesianSpikesEnabled=lt,it},Y.autoBin=function(Se,Ie,We,it,lt,gt){var At,kt=b.aggNums(Math.min,null,Se),ht=b.aggNums(Math.max,null,Se);if(Ie.type==="category"||Ie.type==="multicategory")return{start:kt-.5,end:ht+.5,size:Math.max(1,Math.round(gt)||1),_dataSpan:ht-kt};if(lt||(lt=Ie.calendar),At=Ie.type==="log"?{type:"linear",range:[kt,ht]}:{type:Ie.type,range:b.simpleMap([kt,ht],Ie.c2r,0,lt),calendar:lt},Y.setConvert(At),gt=gt&&a.dtick(gt,At.type))At.dtick=gt,At.tick0=a.tick0(void 0,At.type,lt);else{var St;if(We)St=(ht-kt)/We;else{var vt=b.distinctVals(Se),Mt=Math.pow(10,Math.floor(Math.log(vt.minDiff)/Math.LN10)),It=Mt*b.roundUp(vt.minDiff/Mt,[.9,1.9,4.9,9.9],!0);St=Math.max(It,2*b.stdev(Se)/Math.pow(Se.length,it?.25:.4)),k(St)||(St=1)}Y.autoTicks(At,St)}var Ut,jt=At.dtick,qt=Y.tickIncrement(Y.tickFirst(At),jt,"reverse",lt);if(typeof jt=="number")qt=function(Yt,Kt,pn,nn,xn){var jn=0,mn=0,en=0,vn=0;function on(zn){return(1+100*(zn-Yt)/pn.dtick)%100<2}for(var sn=0;sn<Kt.length;sn++)Kt[sn]%1==0?en++:k(Kt[sn])||vn++,on(Kt[sn])&&jn++,on(Kt[sn]+pn.dtick/2)&&mn++;var En=Kt.length-vn;if(en===En&&pn.type!=="date")pn.dtick<1?Yt=nn-.5*pn.dtick:(Yt-=.5)+pn.dtick<nn&&(Yt+=pn.dtick);else if(mn<.1*En&&(jn>.3*En||on(nn)||on(xn))){var kn=pn.dtick/2;Yt+=Yt+kn<nn?kn:-kn}return Yt}(qt,Se,At,kt,ht),Ut=qt+(1+Math.floor((ht-qt)/jt))*jt;else for(At.dtick.charAt(0)==="M"&&(qt=function(Yt,Kt,pn,nn,xn){var jn=b.findExactDates(Kt,xn);if(jn.exactDays>.8){var mn=Number(pn.substr(1));jn.exactYears>.8&&mn%12==0?Yt=Y.tickIncrement(Yt,"M6","reverse")+1.5*c:jn.exactMonths>.8?Yt=Y.tickIncrement(Yt,"M1","reverse")+15.5*c:Yt-=M;var en=Y.tickIncrement(Yt,pn);if(en<=nn)return en}return Yt}(qt,Se,jt,kt,lt)),Ut=qt;Ut<=ht;)Ut=Y.tickIncrement(Ut,jt,!1,lt);return{start:Ie.c2r(qt,0,lt),end:Ie.c2r(Ut,0,lt),size:jt,_dataSpan:ht-kt}},Y.prepMinorTicks=function(Se,Ie,We){if(!Ie.minor.dtick){delete Se.dtick;var it,lt=Ie.dtick&&k(Ie._tmin);if(lt){var gt=Y.tickIncrement(Ie._tmin,Ie.dtick,!0);it=[Ie._tmin,.99*gt+.01*Ie._tmin]}else{var At=b.simpleMap(Ie.range,Ie.r2l);it=[At[0],.8*At[0]+.2*At[1]]}if(Se.range=b.simpleMap(it,Ie.l2r),Se._isMinor=!0,Y.prepTicks(Se,We),lt){var kt=k(Ie.dtick),ht=k(Se.dtick),St=kt?Ie.dtick:+Ie.dtick.substring(1),vt=ht?Se.dtick:+Se.dtick.substring(1);kt&&ht?le(St,vt)?St===2*w&&vt===2*c&&(Se.dtick=w):St===2*w&&vt===3*c?Se.dtick=w:St!==w||(Ie._input.minor||{}).nticks?de(St/vt,2.5)?Se.dtick=St/2:Se.dtick=St:Se.dtick=c:String(Ie.dtick).charAt(0)==="M"?ht?Se.dtick="M1":le(St,vt)?St>=12&&vt===2&&(Se.dtick="M3"):Se.dtick=Ie.dtick:String(Se.dtick).charAt(0)==="L"?String(Ie.dtick).charAt(0)==="L"?le(St,vt)||(Se.dtick=de(St/vt,2.5)?Ie.dtick/2:Ie.dtick):Se.dtick="D1":Se.dtick==="D2"&&+Ie.dtick>1&&(Se.dtick=1)}Se.range=Ie.range}Ie.minor._tick0Init===void 0&&(Se.tick0=Ie.tick0)},Y.prepTicks=function(Se,Ie){var We=b.simpleMap(Se.range,Se.r2l,void 0,void 0,Ie);if(Se.tickmode==="auto"||!Se.dtick){var it,lt=Se.nticks;lt||(Se.type==="category"||Se.type==="multicategory"?(it=Se.tickfont?b.bigFont(Se.tickfont.size||12):15,lt=Se._length/it):(it=Se._id.charAt(0)==="y"?40:80,lt=b.constrain(Se._length/it,4,9)+1),Se._name==="radialaxis"&&(lt*=2)),Se.minor&&Se.minor.tickmode!=="array"||Se.tickmode==="array"&&(lt*=100),Se._roughDTick=Math.abs(We[1]-We[0])/lt,Y.autoTicks(Se,Se._roughDTick),Se._minDtick>0&&Se.dtick<2*Se._minDtick&&(Se.dtick=Se._minDtick,Se.tick0=Se.l2r(Se._forceTick0))}Se.ticklabelmode==="period"&&function(gt){var At;function kt(){return!(k(gt.dtick)||gt.dtick.charAt(0)!=="M")}var ht=kt(),St=Y.getTickFormat(gt);if(St){var vt=gt._dtickInit!==gt.dtick;/%[fLQsSMX]/.test(St)||(/%[HI]/.test(St)?(At=_,vt&&!ht&&gt.dtick<_&&(gt.dtick=_)):/%p/.test(St)?(At=M,vt&&!ht&&gt.dtick<M&&(gt.dtick=M)):/%[Aadejuwx]/.test(St)?(At=c,vt&&!ht&&gt.dtick<c&&(gt.dtick=c)):/%[UVW]/.test(St)?(At=w,vt&&!ht&&gt.dtick<w&&(gt.dtick=w)):/%[Bbm]/.test(St)?(At=p,vt&&(ht?Ce(gt.dtick)<1:gt.dtick<m)&&(gt.dtick="M1")):/%[q]/.test(St)?(At=v,vt&&(ht?Ce(gt.dtick)<3:gt.dtick<g)&&(gt.dtick="M3")):/%[Yy]/.test(St)&&(At=h,vt&&(ht?Ce(gt.dtick)<12:gt.dtick<f)&&(gt.dtick="M12")))}(ht=kt())&&gt.tick0===gt._dowTick0&&(gt.tick0=gt._rawTick0),gt._definedDelta=At}(Se),Se.tick0||(Se.tick0=Se.type==="date"?"2000-01-01":0),Se.type==="date"&&Se.dtick<.1&&(Se.dtick=.1),Re(Se)},Y.calcTicks=function(Se,Ie){for(var We,it,lt=Se.type,gt=Se.calendar,At=Se.ticklabelstep,kt=Se.ticklabelmode==="period",ht=b.simpleMap(Se.range,Se.r2l,void 0,void 0,Ie),St=ht[1]<ht[0],vt=Math.min(ht[0],ht[1]),Mt=Math.max(ht[0],ht[1]),It=Math.max(1e3,Se._length||0),Ut=[],jt=[],qt=[],Yt=[],Kt=Se.minor&&(Se.minor.ticks||Se.minor.showgrid),pn=1;pn>=(Kt?0:1);pn--){var nn=!pn;pn?(Se._dtickInit=Se.dtick,Se._tick0Init=Se.tick0):(Se.minor._dtickInit=Se.minor.dtick,Se.minor._tick0Init=Se.minor.tick0);var xn=pn?Se:b.extendFlat({},Se,Se.minor);if(nn?Y.prepMinorTicks(xn,Se,Ie):Y.prepTicks(xn,Ie),xn.tickmode!=="array")if(xn.tickmode!=="sync"){var jn=se(ht),mn=jn[0],en=jn[1],vn=k(xn.dtick),on=lt==="log"&&!(vn||xn.dtick.charAt(0)==="L"),sn=Y.tickFirst(xn,Ie);if(pn){if(Se._tmin=sn,sn<mn!==St)break;lt!=="category"&&lt!=="multicategory"||(en=St?Math.max(-.5,en):Math.min(Se._categories.length-.5,en))}var En,kn,zn=null,Fn=sn;pn&&(vn?kn=Se.dtick:lt==="date"?typeof Se.dtick=="string"&&Se.dtick.charAt(0)==="M"&&(kn=p*Se.dtick.substring(1)):kn=Se._roughDTick,En=Math.round((Se.r2l(Fn)-Se.r2l(Se.tick0))/kn)-1);var Bn=xn.dtick;for(xn.rangebreaks&&xn._tick0Init!==xn.tick0&&(Fn=Ye(Fn,Se),St||(Fn=Y.tickIncrement(Fn,Bn,!St,gt))),pn&&kt&&(Fn=Y.tickIncrement(Fn,Bn,!St,gt),En--);St?Fn>=en:Fn<=en;Fn=Y.tickIncrement(Fn,Bn,St,gt)){if(pn&&En++,xn.rangebreaks&&!St){if(Fn<mn)continue;if(xn.maskBreaks(Fn)===O&&Ye(Fn,xn)>=Mt)break}if(qt.length>It||Fn===zn)break;zn=Fn;var er={value:Fn};pn?(on&&Fn!==(0|Fn)&&(er.simpleLabel=!0),At>1&&En%At&&(er.skipLabel=!0),qt.push(er)):(er.minor=!0,Yt.push(er))}}else qt=[],Ut=_e(Se);else pn?(qt=[],Ut=we(Se)):(Yt=[],jt=we(Se))}if(Kt&&!(Se.minor.ticks==="inside"&&Se.ticks==="outside"||Se.minor.ticks==="outside"&&Se.ticks==="inside")){for(var Xn=qt.map(function(Mn){return Mn.value}),mr=[],ur=0;ur<Yt.length;ur++){var $n=Yt[ur],lr=$n.value;if(Xn.indexOf(lr)===-1){for(var hr=!1,Gt=0;!hr&&Gt<qt.length;Gt++)1e7+qt[Gt].value===1e7+lr&&(hr=!0);hr||mr.push($n)}}Yt=mr}if(kt&&function(Mn,Rt,Zt){for(var rn=0;rn<Mn.length;rn++){var Ln=Mn[rn].value,Sn=rn,wn=rn+1;rn<Mn.length-1?(Sn=rn,wn=rn+1):rn>0?(Sn=rn-1,wn=rn):(Sn=rn,wn=rn);var ln,gn=Mn[Sn].value,un=Mn[wn].value,fn=Math.abs(un-gn),bn=Zt||fn,In=0;bn>=f?In=fn>=f&&fn<=u?fn:h:Zt===v&&bn>=g?In=fn>=g&&fn<=x?fn:v:bn>=m?In=fn>=m&&fn<=y?fn:p:Zt===w&&bn>=w?In=w:bn>=c?In=c:Zt===M&&bn>=M?In=M:Zt===_&&bn>=_&&(In=_),In>=fn&&(In=fn,ln=!0);var Hn=Ln+In;if(Rt.rangebreaks&&In>0){for(var Wn=0,Gn=0;Gn<84;Gn++){var nr=(Gn+.5)/84;Rt.maskBreaks(Ln*(1-nr)+nr*Hn)!==O&&Wn++}(In*=Wn/84)||(Mn[rn].drop=!0),ln&&fn>w&&(In=fn)}(In>0||rn===0)&&(Mn[rn].periodX=Ln+In/2)}}(qt,Se,Se._definedDelta),Se.rangebreaks){var hn=Se._id.charAt(0)==="y",An=1;Se.tickmode==="auto"&&(An=Se.tickfont?Se.tickfont.size:12);var Tn=NaN;for(We=qt.length-1;We>-1;We--)if(qt[We].drop)qt.splice(We,1);else{qt[We].value=Ye(qt[We].value,Se);var Rn=Se.c2p(qt[We].value);(hn?Tn>Rn-An:Tn<Rn+An)?qt.splice(St?We+1:We,1):Tn=Rn}}Ze(Se)&&Math.abs(ht[1]-ht[0])===360&&qt.pop(),Se._tmax=(qt[qt.length-1]||{}).value,Se._prevDateHead="",Se._inCalcTicks=!0;var qn,Un,Yn=function(Mn){Mn.text="",Se._prevDateHead=it};for(qt=qt.concat(Yt),We=0;We<qt.length;We++){var or=qt[We].minor,Jt=qt[We].value;or?jt.push({x:Jt,minor:!0}):(it=Se._prevDateHead,qn=Y.tickText(Se,Jt,!1,qt[We].simpleLabel),(Un=qt[We].periodX)!==void 0&&(qn.periodX=Un,(Un>Mt||Un<vt)&&(Un>Mt&&(qn.periodX=Mt),Un<vt&&(qn.periodX=vt),Yn(qn))),qt[We].skipLabel&&Yn(qn),Ut.push(qn))}return Ut=Ut.concat(jt),Se._inCalcTicks=!1,kt&&Ut.length&&(Ut[0].noTick=!0),Ut};var Ae=[2,5,10],$=[1,2,3,6,12],oe=[1,2,5,10,15,30],pe=[1,2,3,7,14],ye=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],ke=[-.301,0,.301,.699,1],De=[15,30,45,90,180];function Pe(Se,Ie,We){return Ie*b.roundUp(Se/Ie,We)}function Re(Se){var Ie=Se.dtick;if(Se._tickexponent=0,k(Ie)||typeof Ie=="string"||(Ie=1),Se.type!=="category"&&Se.type!=="multicategory"||(Se._tickround=null),Se.type==="date"){var We=Se.r2l(Se.tick0),it=Se.l2r(We).replace(/(^-|i)/g,""),lt=it.length;if(String(Ie).charAt(0)==="M")lt>10||it.substr(5)!=="01-01"?Se._tickround="d":Se._tickround=+Ie.substr(1)%12==0?"y":"m";else if(Ie>=c&&lt<=10||Ie>=15*c)Se._tickround="d";else if(Ie>=E&&lt<=16||Ie>=_)Se._tickround="M";else if(Ie>=L&&lt<=19||Ie>=E)Se._tickround="S";else{var gt=Se.l2r(We+Ie).replace(/^-/,"").length;Se._tickround=Math.max(lt,gt)-20,Se._tickround<0&&(Se._tickround=4)}}else if(k(Ie)||Ie.charAt(0)==="L"){var At=Se.range.map(Se.r2d||Number);k(Ie)||(Ie=Number(Ie.substr(1))),Se._tickround=2-Math.floor(Math.log(Ie)/Math.LN10+.01);var kt=Math.max(Math.abs(At[0]),Math.abs(At[1])),ht=Math.floor(Math.log(kt)/Math.LN10+.01),St=Se.minexponent===void 0?3:Se.minexponent;Math.abs(ht)>St&&(Te(Se.exponentformat)&&!ze(ht)?Se._tickexponent=3*Math.round((ht-1)/3):Se._tickexponent=ht)}else Se._tickround=null}function fe(Se,Ie,We){var it=Se.tickfont||{};return{x:Ie,dx:0,dy:0,text:We||"",fontSize:it.size,font:it.family,fontColor:it.color}}Y.autoTicks=function(Se,Ie,We){var it;function lt(Mt){return Math.pow(Mt,Math.floor(Math.log(Ie)/Math.LN10))}if(Se.type==="date"){Se.tick0=b.dateTick0(Se.calendar,0);var gt=2*Ie;if(gt>h)Ie/=h,it=lt(10),Se.dtick="M"+12*Pe(Ie,it,Ae);else if(gt>p)Ie/=p,Se.dtick="M"+Pe(Ie,1,$);else if(gt>c){if(Se.dtick=Pe(Ie,c,Se._hasDayOfWeekBreaks?[1,2,7,14]:pe),!We){var At=Y.getTickFormat(Se),kt=Se.ticklabelmode==="period";kt&&(Se._rawTick0=Se.tick0),/%[uVW]/.test(At)?Se.tick0=b.dateTick0(Se.calendar,2):Se.tick0=b.dateTick0(Se.calendar,1),kt&&(Se._dowTick0=Se.tick0)}}else gt>_?Se.dtick=Pe(Ie,_,$):gt>E?Se.dtick=Pe(Ie,E,oe):gt>L?Se.dtick=Pe(Ie,L,oe):(it=lt(10),Se.dtick=Pe(Ie,it,Ae))}else if(Se.type==="log"){Se.tick0=0;var ht=b.simpleMap(Se.range,Se.r2l);if(Se._isMinor&&(Ie*=1.5),Ie>.7)Se.dtick=Math.ceil(Ie);else if(Math.abs(ht[1]-ht[0])<1){var St=1.5*Math.abs((ht[1]-ht[0])/Ie);Ie=Math.abs(Math.pow(10,ht[1])-Math.pow(10,ht[0]))/St,it=lt(10),Se.dtick="L"+Pe(Ie,it,Ae)}else Se.dtick=Ie>.3?"D2":"D1"}else Se.type==="category"||Se.type==="multicategory"?(Se.tick0=0,Se.dtick=Math.ceil(Math.max(Ie,1))):Ze(Se)?(Se.tick0=0,it=1,Se.dtick=Pe(Ie,it,De)):(Se.tick0=0,it=lt(10),Se.dtick=Pe(Ie,it,Ae));if(Se.dtick===0&&(Se.dtick=1),!k(Se.dtick)&&typeof Se.dtick!="string"){var vt=Se.dtick;throw Se.dtick=1,"ax.dtick error: "+String(vt)}},Y.tickIncrement=function(Se,Ie,We,it){var lt=We?-1:1;if(k(Ie))return b.increment(Se,lt*Ie);var gt=Ie.charAt(0),At=lt*Number(Ie.substr(1));if(gt==="M")return b.incrementMonth(Se,At,it);if(gt==="L")return Math.log(Math.pow(10,Se)+At)/Math.LN10;if(gt==="D"){var kt=Ie==="D2"?ke:ye,ht=Se+.01*lt,St=b.roundUp(b.mod(ht,1),kt,We);return Math.floor(ht)+Math.log(S.round(Math.pow(10,St),1))/Math.LN10}throw"unrecognized dtick "+String(Ie)},Y.tickFirst=function(Se,Ie){var We=Se.r2l||Number,it=b.simpleMap(Se.range,We,void 0,void 0,Ie),lt=it[1]<it[0],gt=lt?Math.floor:Math.ceil,At=se(it)[0],kt=Se.dtick,ht=We(Se.tick0);if(k(kt)){var St=gt((At-ht)/kt)*kt+ht;return Se.type!=="category"&&Se.type!=="multicategory"||(St=b.constrain(St,0,Se._categories.length-1)),St}var vt=kt.charAt(0),Mt=Number(kt.substr(1));if(vt==="M"){for(var It,Ut,jt,qt=0,Yt=ht;qt<10;){if(((It=Y.tickIncrement(Yt,kt,lt,Se.calendar))-At)*(Yt-At)<=0)return lt?Math.min(Yt,It):Math.max(Yt,It);Ut=(At-(Yt+It)/2)/(It-Yt),jt=vt+(Math.abs(Math.round(Ut))||1)*Mt,Yt=Y.tickIncrement(Yt,jt,Ut<0?!lt:lt,Se.calendar),qt++}return b.error("tickFirst did not converge",Se),Yt}if(vt==="L")return Math.log(gt((Math.pow(10,At)-ht)/Mt)*Mt+ht)/Math.LN10;if(vt==="D"){var Kt=kt==="D2"?ke:ye,pn=b.roundUp(b.mod(At,1),Kt,lt);return Math.floor(At)+Math.log(S.round(Math.pow(10,pn),1))/Math.LN10}throw"unrecognized dtick "+String(kt)},Y.tickText=function(Se,Ie,We,it){var lt,gt=fe(Se,Ie),At=Se.tickmode==="array",kt=We||At,ht=Se.type,St=ht==="category"?Se.d2l_noadd:Se.d2l;if(At&&Array.isArray(Se.ticktext)){var vt=b.simpleMap(Se.range,Se.r2l),Mt=(Math.abs(vt[1]-vt[0])-(Se._lBreaks||0))/1e4;for(lt=0;lt<Se.ticktext.length&&!(Math.abs(Ie-St(Se.tickvals[lt]))<Mt);lt++);if(lt<Se.ticktext.length)return gt.text=String(Se.ticktext[lt]),gt}function It(Yt){if(Yt===void 0)return!0;if(We)return Yt==="none";var Kt={first:Se._tmin,last:Se._tmax}[Yt];return Yt!=="all"&&Ie!==Kt}var Ut=We?"never":Se.exponentformat!=="none"&&It(Se.showexponent)?"hide":"";if(ht==="date"?function(Yt,Kt,pn,nn){var xn=Yt._tickround,jn=pn&&Yt.hoverformat||Y.getTickFormat(Yt);nn&&(xn=k(xn)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[xn]);var mn,en=b.formatDate(Kt.x,jn,xn,Yt._dateFormat,Yt.calendar,Yt._extraFormat),vn=en.indexOf(`
`);if(vn!==-1&&(mn=en.substr(vn+1),en=en.substr(0,vn)),nn&&(en==="00:00:00"||en==="00:00"?(en=mn,mn=""):en.length===8&&(en=en.replace(/:00$/,""))),mn)if(pn)xn==="d"?en+=", "+mn:en=mn+(en?", "+en:"");else if(Yt._inCalcTicks&&Yt._prevDateHead===mn){var on=je(Yt),sn=Yt._trueSide||Yt.side;(!on&&sn==="top"||on&&sn==="bottom")&&(en+="<br> ")}else Yt._prevDateHead=mn,en+="<br>"+mn;Kt.text=en}(Se,gt,We,kt):ht==="log"?function(Yt,Kt,pn,nn,xn){var jn=Yt.dtick,mn=Kt.x,en=Yt.tickformat,vn=typeof jn=="string"&&jn.charAt(0);if(xn==="never"&&(xn=""),nn&&vn!=="L"&&(jn="L3",vn="L"),en||vn==="L")Kt.text=He(Math.pow(10,mn),Yt,xn,nn);else if(k(jn)||vn==="D"&&b.mod(mn+.01,1)<.1){var on=Math.round(mn),sn=Math.abs(on),En=Yt.exponentformat;En==="power"||Te(En)&&ze(on)?(Kt.text=on===0?1:on===1?"10":"10<sup>"+(on>1?"":C)+sn+"</sup>",Kt.fontSize*=1.25):(En==="e"||En==="E")&&sn>2?Kt.text="1"+En+(on>0?"+":C)+sn:(Kt.text=He(Math.pow(10,mn),Yt,"","fakehover"),jn==="D1"&&Yt._id.charAt(0)==="y"&&(Kt.dy-=Kt.fontSize/6))}else{if(vn!=="D")throw"unrecognized dtick "+String(jn);Kt.text=String(Math.round(Math.pow(10,b.mod(mn,1)))),Kt.fontSize*=.75}if(Yt.dtick==="D1"){var kn=String(Kt.text).charAt(0);kn!=="0"&&kn!=="1"||(Yt._id.charAt(0)==="y"?Kt.dx-=Kt.fontSize/4:(Kt.dy+=Kt.fontSize/2,Kt.dx+=(Yt.range[1]>Yt.range[0]?1:-1)*Kt.fontSize*(mn<0?.5:.25)))}}(Se,gt,0,kt,Ut):ht==="category"?function(Yt,Kt){var pn=Yt._categories[Math.round(Kt.x)];pn===void 0&&(pn=""),Kt.text=String(pn)}(Se,gt):ht==="multicategory"?function(Yt,Kt,pn){var nn=Math.round(Kt.x),xn=Yt._categories[nn]||[],jn=xn[1]===void 0?"":String(xn[1]),mn=xn[0]===void 0?"":String(xn[0]);pn?Kt.text=mn+" - "+jn:(Kt.text=jn,Kt.text2=mn)}(Se,gt,We):Ze(Se)?function(Yt,Kt,pn,nn,xn){if(Yt.thetaunit!=="radians"||pn)Kt.text=He(Kt.x,Yt,xn,nn);else{var jn=Kt.x/180;if(jn===0)Kt.text="0";else{var mn=function(vn){function on(zn,Fn){return Math.abs(zn-Fn)<=1e-6}var sn=function(zn){for(var Fn=1;!on(Math.round(zn*Fn)/Fn,zn);)Fn*=10;return Fn}(vn),En=vn*sn,kn=Math.abs(function zn(Fn,Bn){return on(Bn,0)?Fn:zn(Bn,Fn%Bn)}(En,sn));return[Math.round(En/kn),Math.round(sn/kn)]}(jn);if(mn[1]>=100)Kt.text=He(b.deg2rad(Kt.x),Yt,xn,nn);else{var en=Kt.x<0;mn[1]===1?mn[0]===1?Kt.text="π":Kt.text=mn[0]+"π":Kt.text=["<sup>",mn[0],"</sup>","⁄","<sub>",mn[1],"</sub>","π"].join(""),en&&(Kt.text=C+Kt.text)}}}}(Se,gt,We,kt,Ut):function(Yt,Kt,pn,nn,xn){xn==="never"?xn="":Yt.showexponent==="all"&&Math.abs(Kt.x/Yt.dtick)<1e-6&&(xn="hide"),Kt.text=He(Kt.x,Yt,xn,nn)}(Se,gt,0,kt,Ut),it||(Se.tickprefix&&!It(Se.showtickprefix)&&(gt.text=Se.tickprefix+gt.text),Se.ticksuffix&&!It(Se.showticksuffix)&&(gt.text+=Se.ticksuffix)),Se.labelalias&&Se.labelalias.hasOwnProperty(gt.text)){var jt=Se.labelalias[gt.text];typeof jt=="string"&&(gt.text=jt)}if(Se.tickson==="boundaries"||Se.showdividers){var qt=function(Yt){var Kt=Se.l2p(Yt);return Kt>=0&&Kt<=Se._length?Yt:null};gt.xbnd=[qt(gt.x-.5),qt(gt.x+Se.dtick-.5)]}return gt},Y.hoverLabelText=function(Se,Ie,We){We&&(Se=b.extendFlat({},Se,{hoverformat:We}));var it=Array.isArray(Ie)?Ie[0]:Ie,lt=Array.isArray(Ie)?Ie[1]:void 0;if(lt!==void 0&&lt!==it)return Y.hoverLabelText(Se,it,We)+" - "+Y.hoverLabelText(Se,lt,We);var gt=Se.type==="log"&&it<=0,At=Y.tickText(Se,Se.c2l(gt?-it:it),"hover").text;return gt?it===0?"0":C+At:At};var ve=["f","p","n","μ","m","","k","M","G","T"];function Te(Se){return Se==="SI"||Se==="B"}function ze(Se){return Se>14||Se<-15}function He(Se,Ie,We,it){var lt=Se<0,gt=Ie._tickround,At=We||Ie.exponentformat||"B",kt=Ie._tickexponent,ht=Y.getTickFormat(Ie),St=Ie.separatethousands;if(it){var vt={exponentformat:At,minexponent:Ie.minexponent,dtick:Ie.showexponent==="none"?Ie.dtick:k(Se)&&Math.abs(Se)||1,range:Ie.showexponent==="none"?Ie.range.map(Ie.r2d):[0,Se||1]};Re(vt),gt=(Number(vt._tickround)||0)+4,kt=vt._tickexponent,Ie.hoverformat&&(ht=Ie.hoverformat)}if(ht)return Ie._numFormat(ht)(Se).replace(/-/g,C);var Mt,It=Math.pow(10,-gt)/2;if(At==="none"&&(kt=0),(Se=Math.abs(Se))<It)Se="0",lt=!1;else{if(Se+=It,kt&&(Se*=Math.pow(10,-kt),gt+=kt),gt===0)Se=String(Math.floor(Se));else if(gt<0){Se=(Se=String(Math.round(Se))).substr(0,Se.length+gt);for(var Ut=gt;Ut<0;Ut++)Se+="0"}else{var jt=(Se=String(Se)).indexOf(".")+1;jt&&(Se=Se.substr(0,jt+gt).replace(/\.?0+$/,""))}Se=b.numSeparate(Se,Ie._separators,St)}return kt&&At!=="hide"&&(Te(At)&&ze(kt)&&(At="power"),Mt=kt<0?C+-kt:At!=="power"?"+"+kt:String(kt),At==="e"||At==="E"?Se+=At+Mt:At==="power"?Se+="×10<sup>"+Mt+"</sup>":At==="B"&&kt===9?Se+="B":Te(At)&&(Se+=ve[kt/3+5])),lt?C+Se:Se}function Ve(Se,Ie){if(Se){var We=Object.keys(D).reduce(function(it,lt){return Ie.indexOf(lt)!==-1&&D[lt].forEach(function(gt){it[gt]=1}),it},{});Object.keys(Se).forEach(function(it){We[it]||(it.length===1?Se[it]=0:delete Se[it])})}}function nt(Se,Ie){for(var We=[],it={},lt=0;lt<Ie.length;lt++){var gt=Ie[lt];it[gt.text2]?it[gt.text2].push(gt.x):it[gt.text2]=[gt.x]}for(var At in it)We.push(fe(Se,b.interp(it[At],.5),At));return We}function tt(Se){return Se.periodX!==void 0?Se.periodX:Se.x}function ot(Se){return[Se.text,Se.x,Se.axInfo,Se.font,Se.fontSize,Se.fontColor].join("_")}function pt(Se){var Ie=Se.title.font.size,We=(Se.title.text.match(s.BR_TAG_ALL)||[]).length;return Se.title.hasOwnProperty("standoff")?We?Ie*(J+We*X):Ie*J:We?Ie*(We+1)*X:Ie}function Tt(Se,Ie){var We=Se.l2p(Ie);return We>1&&We<Se._length-1}function yt(Se){var Ie=S.select(Se),We=Ie.select(".text-math-group");return We.empty()?Ie.select("text"):We}function dt(Se){return Se._id+".automargin"}function Pt(Se){return dt(Se)+".mirror"}function Et(Se){return Se._id+".rangeslider"}function Ot(Se,Ie){for(var We=0;We<Ie.length;We++)Se.indexOf(Ie[We])===-1&&Se.push(Ie[We])}function Nt(Se,Ie,We){var it,lt,gt=[],At=[],kt=Se.layout;for(it=0;it<Ie.length;it++)gt.push(Y.getFromId(Se,Ie[it]));for(it=0;it<We.length;it++)At.push(Y.getFromId(Se,We[it]));var ht=Object.keys(n),St=["anchor","domain","overlaying","position","side","tickangle","editType"],vt=["linear","log"];for(it=0;it<ht.length;it++){var Mt=ht[it],It=gt[0][Mt],Ut=At[0][Mt],jt=!0,qt=!1,Yt=!1;if(Mt.charAt(0)!=="_"&&typeof It!="function"&&St.indexOf(Mt)===-1){for(lt=1;lt<gt.length&&jt;lt++){var Kt=gt[lt][Mt];Mt==="type"&&vt.indexOf(It)!==-1&&vt.indexOf(Kt)!==-1&&It!==Kt?qt=!0:Kt!==It&&(jt=!1)}for(lt=1;lt<At.length&&jt;lt++){var pn=At[lt][Mt];Mt==="type"&&vt.indexOf(Ut)!==-1&&vt.indexOf(pn)!==-1&&Ut!==pn?Yt=!0:At[lt][Mt]!==Ut&&(jt=!1)}jt&&(qt&&(kt[gt[0]._name].type="linear"),Yt&&(kt[At[0]._name].type="linear"),zt(kt,Mt,gt,At,Se._fullLayout._dfltTitle))}}for(it=0;it<Se._fullLayout.annotations.length;it++){var nn=Se._fullLayout.annotations[it];Ie.indexOf(nn.xref)!==-1&&We.indexOf(nn.yref)!==-1&&b.swapAttrs(kt.annotations[it],["?"])}}function zt(Se,Ie,We,it,lt){var gt,At=b.nestedProperty,kt=At(Se[We[0]._name],Ie).get(),ht=At(Se[it[0]._name],Ie).get();for(Ie==="title"&&(kt&&kt.text===lt.x&&(kt.text=lt.y),ht&&ht.text===lt.y&&(ht.text=lt.x)),gt=0;gt<We.length;gt++)At(Se,We[gt]._name+"."+Ie).set(ht);for(gt=0;gt<it.length;gt++)At(Se,it[gt]._name+"."+Ie).set(kt)}function Ze(Se){return Se._id==="angularaxis"}function Ye(Se,Ie){for(var We=Ie._rangebreaks.length,it=0;it<We;it++){var lt=Ie._rangebreaks[it];if(Se>=lt.min&&Se<lt.max)return lt.max}return Se}function je(Se){return(Se.ticklabelposition||"").indexOf("inside")!==-1}function Ke(Se,Ie){je(Se._anchorAxis||{})&&Se._hideCounterAxisInsideTickLabels&&Se._hideCounterAxisInsideTickLabels(Ie)}function st(Se,Ie,We,it){var lt,gt=Se.anchor==="free"||Se.overlaying!==void 0&&Se.overlaying!==!1?Se.overlaying:Se._id;lt=it?Se.side==="right"?Ie:-Ie:Ie,gt in We||(We[gt]={}),Se.side in We[gt]||(We[gt][Se.side]=0),We[gt][Se.side]+=lt}Y.getTickFormat=function(Se){var Ie,We,it,lt,gt,At,kt,ht;function St(It){return typeof It!="string"?It:Number(It.replace("M",""))*p}function vt(It,Ut){var jt=["L","D"];if(typeof It==typeof Ut){if(typeof It=="number")return It-Ut;var qt=jt.indexOf(It.charAt(0)),Yt=jt.indexOf(Ut.charAt(0));return qt===Yt?Number(It.replace(/(L|D)/g,""))-Number(Ut.replace(/(L|D)/g,"")):qt-Yt}return typeof It=="number"?1:-1}function Mt(It,Ut){var jt=Ut[0]===null,qt=Ut[1]===null,Yt=vt(It,Ut[0])>=0,Kt=vt(It,Ut[1])<=0;return(jt||Yt)&&(qt||Kt)}if(Se.tickformatstops&&Se.tickformatstops.length>0)switch(Se.type){case"date":case"linear":for(Ie=0;Ie<Se.tickformatstops.length;Ie++)if((it=Se.tickformatstops[Ie]).enabled&&(lt=Se.dtick,gt=it.dtickrange,At=void 0,kt=void 0,ht=void 0,At=St||function(It){return It},kt=gt[0],ht=gt[1],(!kt&&typeof kt!="number"||At(kt)<=At(lt))&&(!ht&&typeof ht!="number"||At(ht)>=At(lt)))){We=it;break}break;case"log":for(Ie=0;Ie<Se.tickformatstops.length;Ie++)if((it=Se.tickformatstops[Ie]).enabled&&Mt(Se.dtick,it.dtickrange)){We=it;break}}return We?We.value:Se.tickformat},Y.getSubplots=function(Se,Ie){var We=Se._fullLayout._subplots,it=We.cartesian.concat(We.gl2d||[]),lt=Ie?Y.findSubplotsWithAxis(it,Ie):it;return lt.sort(function(gt,At){var kt=gt.substr(1).split("y"),ht=At.substr(1).split("y");return kt[0]===ht[0]?+kt[1]-+ht[1]:+kt[0]-+ht[0]}),lt},Y.findSubplotsWithAxis=function(Se,Ie){for(var We=new RegExp(Ie._id.charAt(0)==="x"?"^"+Ie._id+"y":Ie._id+"$"),it=[],lt=0;lt<Se.length;lt++){var gt=Se[lt];We.test(gt)&&it.push(gt)}return it},Y.makeClipPaths=function(Se){var Ie=Se._fullLayout;if(!Ie._hasOnlyLargeSploms){var We,it,lt={_offset:0,_length:Ie.width,_id:""},gt={_offset:0,_length:Ie.height,_id:""},At=Y.list(Se,"x",!0),kt=Y.list(Se,"y",!0),ht=[];for(We=0;We<At.length;We++)for(ht.push({x:At[We],y:gt}),it=0;it<kt.length;it++)We===0&&ht.push({x:lt,y:kt[it]}),ht.push({x:At[We],y:kt[it]});var St=Ie._clips.selectAll(".axesclip").data(ht,function(vt){return vt.x._id+vt.y._id});St.enter().append("clipPath").classed("axesclip",!0).attr("id",function(vt){return"clip"+Ie._uid+vt.x._id+vt.y._id}).append("rect"),St.exit().remove(),St.each(function(vt){S.select(this).select("rect").attr({x:vt.x._offset||0,y:vt.y._offset||0,width:vt.x._length||1,height:vt.y._length||1})})}},Y.draw=function(Se,Ie,We){var it=Se._fullLayout;Ie==="redraw"&&it._paper.selectAll("g.subplot").each(function(kt){var ht=kt[0],St=it._plots[ht];if(St){var vt=St.xaxis,Mt=St.yaxis;St.xaxislayer.selectAll("."+vt._id+"tick").remove(),St.yaxislayer.selectAll("."+Mt._id+"tick").remove(),St.xaxislayer.selectAll("."+vt._id+"tick2").remove(),St.yaxislayer.selectAll("."+Mt._id+"tick2").remove(),St.xaxislayer.selectAll("."+vt._id+"divider").remove(),St.yaxislayer.selectAll("."+Mt._id+"divider").remove(),St.minorGridlayer&&St.minorGridlayer.selectAll("path").remove(),St.gridlayer&&St.gridlayer.selectAll("path").remove(),St.zerolinelayer&&St.zerolinelayer.selectAll("path").remove(),it._infolayer.select(".g-"+vt._id+"title").remove(),it._infolayer.select(".g-"+Mt._id+"title").remove()}});var lt=Ie&&Ie!=="redraw"?Ie:Y.listIds(Se),gt=Y.list(Se).filter(function(kt){return kt.autoshift}).map(function(kt){return kt.overlaying});lt.map(function(kt){var ht=Y.getFromId(Se,kt);if(ht.tickmode==="sync"&&ht.overlaying){var St=lt.findIndex(function(vt){return vt===ht.overlaying});St>=0&&lt.unshift(lt.splice(St,1).shift())}});var At={false:{left:0,right:0}};return b.syncOrAsync(lt.map(function(kt){return function(){if(kt){var ht=Y.getFromId(Se,kt);We||(We={}),We.axShifts=At,We.overlayingShiftedAx=gt;var St=Y.drawOne(Se,ht,We);return ht._shiftPusher&&st(ht,ht._fullDepth||0,At,!0),ht._r=ht.range.slice(),ht._rl=b.simpleMap(ht._r,ht.r2l),St}}}))},Y.drawOne=function(Se,Ie,We){var it,lt,gt,At=(We=We||{}).axShifts||{},kt=We.overlayingShiftedAx||[];Ie.setScale();var ht=Se._fullLayout,St=Ie._id,vt=St.charAt(0),Mt=Y.counterLetter(St),It=ht._plots[Ie._mainSubplot];if(It){if(Ie._shiftPusher=Ie.autoshift||kt.indexOf(Ie._id)!==-1||kt.indexOf(Ie.overlaying)!==-1,Ie._shiftPusher&Ie.anchor==="free"){var Ut=Ie.linewidth/2||0;Ie.ticks==="inside"&&(Ut+=Ie.ticklen),st(Ie,Ut,At,!0),st(Ie,Ie.shift||0,At,!1)}We.skipTitle===!0&&Ie._shift!==void 0||(Ie._shift=function(wn,ln){return wn.autoshift?ln[wn.overlaying][wn.side]:wn.shift||0}(Ie,At));var jt=It[vt+"axislayer"],qt=Ie._mainLinePosition,Yt=qt+=Ie._shift,Kt=Ie._mainMirrorPosition,pn=Ie._vals=Y.calcTicks(Ie),nn=[Ie.mirror,Yt,Kt].join("_");for(it=0;it<pn.length;it++)pn[it].axInfo=nn;Ie._selections={},Ie._tickAngles&&(Ie._prevTickAngles=Ie._tickAngles),Ie._tickAngles={},Ie._depth=null;var xn={};if(Ie.visible){var jn,mn,en=Y.makeTransTickFn(Ie),vn=Y.makeTransTickLabelFn(Ie),on=Ie.ticks==="inside",sn=Ie.ticks==="outside";if(Ie.tickson==="boundaries"){var En=function(wn,ln){var gn,un=[],fn=function(bn,In){var Hn=bn.xbnd[In];Hn!==null&&un.push(b.extendFlat({},bn,{x:Hn}))};if(ln.length){for(gn=0;gn<ln.length;gn++)fn(ln[gn],0);fn(ln[gn-1],1)}return un}(0,pn);mn=Y.clipEnds(Ie,En),jn=on?mn:En}else mn=Y.clipEnds(Ie,pn),jn=on&&Ie.ticklabelmode!=="period"?mn:pn;var kn,zn=Ie._gridVals=mn,Fn=function(wn,ln){var gn,un,fn=[],bn=ln.length&&ln[ln.length-1].x<ln[0].x,In=function(Wn,Gn){var nr=Wn.xbnd[Gn];nr!==null&&fn.push(b.extendFlat({},Wn,{x:nr}))};if(wn.showdividers&&ln.length){for(gn=0;gn<ln.length;gn++){var Hn=ln[gn];Hn.text2!==un&&In(Hn,bn?1:0),un=Hn.text2}In(ln[gn-1],bn?0:1)}return fn}(Ie,pn);if(!ht._hasOnlyLargeSploms){var Bn=Ie._subplotsWith,er={};for(it=0;it<Bn.length;it++){lt=Bn[it];var Xn=(gt=ht._plots[lt])[Mt+"axis"],mr=Xn._mainAxis._id;if(!er[mr]){er[mr]=1;var ur=vt==="x"?"M0,"+Xn._offset+"v"+Xn._length:"M"+Xn._offset+",0h"+Xn._length;Y.drawGrid(Se,Ie,{vals:zn,counterAxis:Xn,layer:gt.gridlayer.select("."+St),minorLayer:gt.minorGridlayer.select("."+St),path:ur,transFn:en}),Y.drawZeroLine(Se,Ie,{counterAxis:Xn,layer:gt.zerolinelayer,path:ur,transFn:en})}}}var $n=Y.getTickSigns(Ie),lr=Y.getTickSigns(Ie,"minor");if(Ie.ticks||Ie.minor&&Ie.minor.ticks){var hr,Gt,hn,An,Tn=Y.makeTickPath(Ie,Yt,$n[2]),Rn=Y.makeTickPath(Ie,Yt,lr[2],{minor:!0});if(Ie._anchorAxis&&Ie.mirror&&Ie.mirror!==!0?(hr=Y.makeTickPath(Ie,Kt,$n[3]),Gt=Y.makeTickPath(Ie,Kt,lr[3],{minor:!0}),hn=Tn+hr,An=Rn+Gt):(hr="",Gt="",hn=Tn,An=Rn),Ie.showdividers&&sn&&Ie.tickson==="boundaries"){var qn={};for(it=0;it<Fn.length;it++)qn[Fn[it].x]=1;kn=function(wn){return qn[wn.x]?hr:hn}}else kn=function(wn){return wn.minor?An:hn}}if(Y.drawTicks(Se,Ie,{vals:jn,layer:jt,path:kn,transFn:en}),Ie.mirror==="allticks"){var Un=Object.keys(Ie._linepositions||{});for(it=0;it<Un.length;it++){lt=Un[it],gt=ht._plots[lt];var Yn=Ie._linepositions[lt]||[],or=Yn[0],Jt=Yn[1],Mn=Yn[2],Rt=Y.makeTickPath(Ie,or,Mn?$n[0]:lr[0],{minor:Mn})+Y.makeTickPath(Ie,Jt,Mn?$n[1]:lr[1],{minor:Mn});Y.drawTicks(Se,Ie,{vals:jn,layer:gt[vt+"axislayer"],path:Rt,transFn:en})}}var Zt=[];if(Zt.push(function(){return Y.drawLabels(Se,Ie,{vals:pn,layer:jt,plotinfo:gt,transFn:vn,labelFns:Y.makeLabelFns(Ie,Yt)})}),Ie.type==="multicategory"){var rn={x:2,y:10}[vt];Zt.push(function(){var wn={x:"height",y:"width"}[vt],ln=Sn()[wn]+rn+(Ie._tickAngles[St+"tick"]?Ie.tickfont.size*X:0);return Y.drawLabels(Se,Ie,{vals:nt(Ie,pn),layer:jt,cls:St+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:en,labelFns:Y.makeLabelFns(Ie,Yt+ln*$n[4])})}),Zt.push(function(){return Ie._depth=$n[4]*(Sn("tick2")[Ie.side]-Yt),function(wn,ln,gn){var un=ln._id+"divider",fn=gn.vals,bn=gn.layer.selectAll("path."+un).data(fn,ot);bn.exit().remove(),bn.enter().insert("path",":first-child").classed(un,1).classed("crisp",1).call(o.stroke,ln.dividercolor).style("stroke-width",r.crispRound(wn,ln.dividerwidth,1)+"px"),bn.attr("transform",gn.transFn).attr("d",gn.path)}(Se,Ie,{vals:Fn,layer:jt,path:Y.makeTickPath(Ie,Yt,$n[4],{len:Ie._depth}),transFn:en})})}else Ie.title.hasOwnProperty("standoff")&&Zt.push(function(){Ie._depth=$n[4]*(Sn()[Ie.side]-Yt)});var Ln=T.getComponentMethod("rangeslider","isVisible")(Ie);return We.skipTitle||Ln&&Ie.side==="bottom"||Zt.push(function(){return function(wn,ln){var gn,un=wn._fullLayout,fn=ln._id,bn=fn.charAt(0),In=ln.title.font.size;if(ln.title.hasOwnProperty("standoff"))gn=ln._depth+ln.title.standoff+pt(ln);else{var Hn=je(ln);if(ln.type==="multicategory")gn=ln._depth;else{var Wn=1.5*In;Hn&&(Wn=.5*In,ln.ticks==="outside"&&(Wn+=ln.ticklen)),gn=10+Wn+(ln.linewidth?ln.linewidth-1:0)}Hn||(gn+=bn==="x"?ln.side==="top"?In*(ln.showticklabels?1:0):In*(ln.showticklabels?1.5:.5):ln.side==="right"?In*(ln.showticklabels?1:.5):In*(ln.showticklabels?.5:0))}var Gn,nr,tr,ar,ir=Y.getPxPosition(wn,ln);if(bn==="x"?(nr=ln._offset+ln._length/2,tr=ln.side==="top"?ir-gn:ir+gn):(tr=ln._offset+ln._length/2,nr=ln.side==="right"?ir+gn:ir-gn,Gn={rotate:"-90",offset:0}),ln.type!=="multicategory"){var cr=ln._selections[ln._id+"tick"];if(ar={selection:cr,side:ln.side},cr&&cr.node()&&cr.node().parentNode){var br=r.getTranslate(cr.node().parentNode);ar.offsetLeft=br.x,ar.offsetTop=br.y}ln.title.hasOwnProperty("standoff")&&(ar.pad=0)}return ln._titleStandoff=gn,t.draw(wn,fn+"title",{propContainer:ln,propName:ln._name+".title.text",placeholder:un._dfltTitle[bn],avoid:ar,transform:Gn,attributes:{x:nr,y:tr,"text-anchor":"middle"}})}(Se,Ie)}),Zt.push(function(){var wn,ln,gn,un,fn=Ie.side.charAt(0),bn=Z[Ie.side].charAt(0),In=Y.getPxPosition(Se,Ie),Hn=sn?Ie.ticklen:0;(Ie.automargin||Ln||Ie._shiftPusher)&&(Ie.type==="multicategory"?wn=Sn("tick2"):(wn=Sn(),vt==="x"&&fn==="b"&&(Ie._depth=Math.max(wn.width>0?wn.bottom-In:0,Hn))));var Wn=0,Gn=0;if(Ie._shiftPusher&&(Wn=Math.max(Hn,wn.height>0?fn==="l"?In-wn.left:wn.right-In:0),Ie.title.text!==ht._dfltTitle[vt]&&(Gn=(Ie._titleStandoff||0)+(Ie._titleScoot||0),fn==="l"&&(Gn+=pt(Ie))),Ie._fullDepth=Math.max(Wn,Gn)),Ie.automargin){ln={x:0,y:0,r:0,l:0,t:0,b:0};var nr=[0,1],tr=typeof Ie._shift=="number"?Ie._shift:0;if(vt==="x"){if(fn==="b"?ln[fn]=Ie._depth:(ln[fn]=Ie._depth=Math.max(wn.width>0?In-wn.top:0,Hn),nr.reverse()),wn.width>0){var ar=wn.right-(Ie._offset+Ie._length);ar>0&&(ln.xr=1,ln.r=ar);var ir=Ie._offset-wn.left;ir>0&&(ln.xl=0,ln.l=ir)}}else if(fn==="l"?(Ie._depth=Math.max(wn.height>0?In-wn.left:0,Hn),ln[fn]=Ie._depth-tr):(Ie._depth=Math.max(wn.height>0?wn.right-In:0,Hn),ln[fn]=Ie._depth+tr,nr.reverse()),wn.height>0){var cr=wn.bottom-(Ie._offset+Ie._length);cr>0&&(ln.yb=0,ln.b=cr);var br=Ie._offset-wn.top;br>0&&(ln.yt=1,ln.t=br)}ln[Mt]=Ie.anchor==="free"?Ie.position:Ie._anchorAxis.domain[nr[0]],Ie.title.text!==ht._dfltTitle[vt]&&(ln[fn]+=pt(Ie)+(Ie.title.standoff||0)),Ie.mirror&&Ie.anchor!=="free"&&((gn={x:0,y:0,r:0,l:0,t:0,b:0})[bn]=Ie.linewidth,Ie.mirror&&Ie.mirror!==!0&&(gn[bn]+=Hn),Ie.mirror===!0||Ie.mirror==="ticks"?gn[Mt]=Ie._anchorAxis.domain[nr[1]]:Ie.mirror!=="all"&&Ie.mirror!=="allticks"||(gn[Mt]=[Ie._counterDomainMin,Ie._counterDomainMax][nr[1]]))}Ln&&(un=T.getComponentMethod("rangeslider","autoMarginOpts")(Se,Ie)),typeof Ie.automargin=="string"&&(Ve(ln,Ie.automargin),Ve(gn,Ie.automargin)),l.autoMargin(Se,dt(Ie),ln),l.autoMargin(Se,Pt(Ie),gn),l.autoMargin(Se,Et(Ie),un)}),b.syncOrAsync(Zt)}}function Sn(wn){var ln=St+(wn||"tick");return xn[ln]||(xn[ln]=function(gn,un){var fn,bn,In,Hn;return gn._selections[un].size()?(fn=1/0,bn=-1/0,In=1/0,Hn=-1/0,gn._selections[un].each(function(){var Wn=yt(this),Gn=r.bBox(Wn.node().parentNode);fn=Math.min(fn,Gn.top),bn=Math.max(bn,Gn.bottom),In=Math.min(In,Gn.left),Hn=Math.max(Hn,Gn.right)})):(fn=0,bn=0,In=0,Hn=0),{top:fn,bottom:bn,left:In,right:Hn,height:bn-fn,width:Hn-In}}(Ie,ln)),xn[ln]}},Y.getTickSigns=function(Se,Ie){var We=Se._id.charAt(0),it={x:"top",y:"right"}[We],lt=Se.side===it?1:-1,gt=[-1,1,lt,-lt];return(Ie?(Se.minor||{}).ticks:Se.ticks)!=="inside"==(We==="x")&&(gt=gt.map(function(At){return-At})),Se.side&&gt.push({l:-1,t:-1,r:1,b:1}[Se.side.charAt(0)]),gt},Y.makeTransTickFn=function(Se){return Se._id.charAt(0)==="x"?function(Ie){return d(Se._offset+Se.l2p(Ie.x),0)}:function(Ie){return d(0,Se._offset+Se.l2p(Ie.x))}},Y.makeTransTickLabelFn=function(Se){var Ie=function(lt){var gt=lt.ticklabelposition||"",At=function(Kt){return gt.indexOf(Kt)!==-1},kt=At("top"),ht=At("left"),St=At("right"),vt=At("bottom"),Mt=At("inside"),It=vt||ht||kt||St;if(!It&&!Mt)return[0,0];var Ut=lt.side,jt=It?(lt.tickwidth||0)/2:0,qt=3,Yt=lt.tickfont?lt.tickfont.size:12;return(vt||kt)&&(jt+=Yt*J,qt+=(lt.linewidth||0)/2),(ht||St)&&(jt+=(lt.linewidth||0)/2,qt+=3),Mt&&Ut==="top"&&(qt-=Yt*(1-J)),(ht||kt)&&(jt=-jt),Ut!=="bottom"&&Ut!=="right"||(qt=-qt),[It?jt:0,Mt?qt:0]}(Se),We=Ie[0],it=Ie[1];return Se._id.charAt(0)==="x"?function(lt){return d(We+Se._offset+Se.l2p(tt(lt)),it)}:function(lt){return d(it,We+Se._offset+Se.l2p(tt(lt)))}},Y.makeTickPath=function(Se,Ie,We,it){it||(it={});var lt=it.minor;if(lt&&!Se.minor)return"";var gt=it.len!==void 0?it.len:lt?Se.minor.ticklen:Se.ticklen,At=Se._id.charAt(0),kt=(Se.linewidth||1)/2;return At==="x"?"M0,"+(Ie+kt*We)+"v"+gt*We:"M"+(Ie+kt*We)+",0h"+gt*We},Y.makeLabelFns=function(Se,Ie,We){var it=Se.ticklabelposition||"",lt=function(En){return it.indexOf(En)!==-1},gt=lt("top"),At=lt("left"),kt=lt("right"),ht=lt("bottom")||At||gt||kt,St=lt("inside"),vt=it==="inside"&&Se.ticks==="inside"||!St&&Se.ticks==="outside"&&Se.tickson!=="boundaries",Mt=0,It=0,Ut=vt?Se.ticklen:0;if(St?Ut*=-1:ht&&(Ut=0),vt&&(Mt+=Ut,We)){var jt=b.deg2rad(We);Mt=Ut*Math.cos(jt)+1,It=Ut*Math.sin(jt)}Se.showticklabels&&(vt||Se.showline)&&(Mt+=.2*Se.tickfont.size);var qt,Yt,Kt,pn,nn,xn={labelStandoff:Mt+=(Se.linewidth||1)/2*(St?-1:1),labelShift:It},jn=0,mn=Se.side,en=Se._id.charAt(0),vn=Se.tickangle;if(en==="x")pn=(nn=!St&&mn==="bottom"||St&&mn==="top")?1:-1,St&&(pn*=-1),qt=It*pn,Yt=Ie+Mt*pn,Kt=nn?1:-.2,Math.abs(vn)===90&&(St?Kt+=j:Kt=vn===-90&&mn==="bottom"?J:vn===90&&mn==="top"?j:.5,jn=j/2*(vn/90)),xn.xFn=function(En){return En.dx+qt+jn*En.fontSize},xn.yFn=function(En){return En.dy+Yt+En.fontSize*Kt},xn.anchorFn=function(En,kn){if(ht){if(At)return"end";if(kt)return"start"}return k(kn)&&kn!==0&&kn!==180?kn*pn<0!==St?"end":"start":"middle"},xn.heightFn=function(En,kn,zn){return kn<-60||kn>60?-.5*zn:Se.side==="top"!==St?-zn:0};else if(en==="y"){if(pn=(nn=!St&&mn==="left"||St&&mn==="right")?1:-1,St&&(pn*=-1),qt=Mt,Yt=It*pn,Kt=0,St||Math.abs(vn)!==90||(Kt=vn===-90&&mn==="left"||vn===90&&mn==="right"?J:.5),St){var on=k(vn)?+vn:0;if(on!==0){var sn=b.deg2rad(on);jn=Math.abs(Math.sin(sn))*J*pn,Kt=0}}xn.xFn=function(En){return En.dx+Ie-(qt+En.fontSize*Kt)*pn+jn*En.fontSize},xn.yFn=function(En){return En.dy+Yt+En.fontSize*j},xn.anchorFn=function(En,kn){return k(kn)&&Math.abs(kn)===90?"middle":nn?"end":"start"},xn.heightFn=function(En,kn,zn){return Se.side==="right"&&(kn*=-1),kn<-30?-zn:kn<30?-.5*zn:0}}return xn},Y.drawTicks=function(Se,Ie,We){We=We||{};var it=Ie._id+"tick",lt=[].concat(Ie.minor&&Ie.minor.ticks?We.vals.filter(function(At){return At.minor&&!At.noTick}):[]).concat(Ie.ticks?We.vals.filter(function(At){return!At.minor&&!At.noTick}):[]),gt=We.layer.selectAll("path."+it).data(lt,ot);gt.exit().remove(),gt.enter().append("path").classed(it,1).classed("ticks",1).classed("crisp",We.crisp!==!1).each(function(At){return o.stroke(S.select(this),At.minor?Ie.minor.tickcolor:Ie.tickcolor)}).style("stroke-width",function(At){return r.crispRound(Se,At.minor?Ie.minor.tickwidth:Ie.tickwidth,1)+"px"}).attr("d",We.path).style("display",null),Ke(Ie,[V]),gt.attr("transform",We.transFn)},Y.drawGrid=function(Se,Ie,We){if(We=We||{},Ie.tickmode!=="sync"){var it=Ie._id+"grid",lt=Ie.minor&&Ie.minor.showgrid,gt=lt?We.vals.filter(function(Kt){return Kt.minor}):[],At=Ie.showgrid?We.vals.filter(function(Kt){return!Kt.minor}):[],kt=We.counterAxis;if(kt&&Y.shouldShowZeroLine(Se,Ie,kt))for(var ht=Ie.tickmode==="array",St=0;St<At.length;St++){var vt=At[St].x;if(ht?!vt:Math.abs(vt)<Ie.dtick/100){if(At=At.slice(0,St).concat(At.slice(St+1)),!ht)break;St--}}Ie._gw=r.crispRound(Se,Ie.gridwidth,1);for(var Mt=lt?r.crispRound(Se,Ie.minor.gridwidth,1):0,It=We.layer,Ut=We.minorLayer,jt=1;jt>=0;jt--){var qt=jt?It:Ut;if(qt){var Yt=qt.selectAll("path."+it).data(jt?At:gt,ot);Yt.exit().remove(),Yt.enter().append("path").classed(it,1).classed("crisp",We.crisp!==!1),Yt.attr("transform",We.transFn).attr("d",We.path).each(function(Kt){return o.stroke(S.select(this),Kt.minor?Ie.minor.gridcolor:Ie.gridcolor||"#ddd")}).style("stroke-dasharray",function(Kt){return r.dashStyle(Kt.minor?Ie.minor.griddash:Ie.griddash,Kt.minor?Ie.minor.gridwidth:Ie.gridwidth)}).style("stroke-width",function(Kt){return(Kt.minor?Mt:Ie._gw)+"px"}).style("display",null),typeof We.path=="function"&&Yt.attr("d",We.path)}}Ke(Ie,[N,R])}},Y.drawZeroLine=function(Se,Ie,We){We=We||We;var it=Ie._id+"zl",lt=Y.shouldShowZeroLine(Se,Ie,We.counterAxis),gt=We.layer.selectAll("path."+it).data(lt?[{x:0,id:Ie._id}]:[]);gt.exit().remove(),gt.enter().append("path").classed(it,1).classed("zl",1).classed("crisp",We.crisp!==!1).each(function(){We.layer.selectAll("path").sort(function(At,kt){return ne(At.id,kt.id)})}),gt.attr("transform",We.transFn).attr("d",We.path).call(o.stroke,Ie.zerolinecolor||o.defaultLine).style("stroke-width",r.crispRound(Se,Ie.zerolinewidth,Ie._gw||1)+"px").style("display",null),Ke(Ie,[I])},Y.drawLabels=function(Se,Ie,We){We=We||{};var it=Se._fullLayout,lt=Ie._id,gt=lt.charAt(0),At=We.cls||lt+"tick",kt=We.vals.filter(function(pn){return pn.text}),ht=We.labelFns,St=We.secondary?0:Ie.tickangle,vt=(Ie._prevTickAngles||{})[At],Mt=We.layer.selectAll("g."+At).data(Ie.showticklabels?kt:[],ot),It=[];function Ut(pn,nn){pn.each(function(xn){var jn=S.select(this),mn=jn.select(".text-math-group"),en=ht.anchorFn(xn,nn),vn=We.transFn.call(jn.node(),xn)+(k(nn)&&+nn!=0?" rotate("+nn+","+ht.xFn(xn)+","+(ht.yFn(xn)-xn.fontSize/2)+")":""),on=s.lineCount(jn),sn=X*xn.fontSize,En=ht.heightFn(xn,k(nn)?+nn:0,(on-1)*sn);if(En&&(vn+=d(0,En)),mn.empty()){var kn=jn.select("text");kn.attr({transform:vn,"text-anchor":en}),kn.style("opacity",1),Ie._adjustTickLabelsOverflow&&Ie._adjustTickLabelsOverflow()}else{var zn=r.bBox(mn.node()).width*{end:-.5,start:.5}[en];mn.attr("transform",vn+d(zn,0))}})}Mt.enter().append("g").classed(At,1).append("text").attr("text-anchor","middle").each(function(pn){var nn=S.select(this),xn=Se._promises.length;nn.call(s.positionText,ht.xFn(pn),ht.yFn(pn)).call(r.font,pn.font,pn.fontSize,pn.fontColor).text(pn.text).call(s.convertToTspans,Se),Se._promises[xn]?It.push(Se._promises.pop().then(function(){Ut(nn,St)})):Ut(nn,St)}),Ke(Ie,[F]),Mt.exit().remove(),We.repositionOnUpdate&&Mt.each(function(pn){S.select(this).select("text").call(s.positionText,ht.xFn(pn),ht.yFn(pn))}),Ie._adjustTickLabelsOverflow=function(){var pn=Ie.ticklabeloverflow;if(pn&&pn!=="allow"){var nn=pn.indexOf("hide")!==-1,xn=Ie._id.charAt(0)==="x",jn=0,mn=xn?Se._fullLayout.width:Se._fullLayout.height;if(pn.indexOf("domain")!==-1){var en=b.simpleMap(Ie.range,Ie.r2l);jn=Ie.l2p(en[0])+Ie._offset,mn=Ie.l2p(en[1])+Ie._offset}var vn=Math.min(jn,mn),on=Math.max(jn,mn),sn=Ie.side,En=1/0,kn=-1/0;for(var zn in Mt.each(function(er){var Xn=S.select(this);if(Xn.select(".text-math-group").empty()){var mr=r.bBox(Xn.node()),ur=0;xn?(mr.right>on||mr.left<vn)&&(ur=1):(mr.bottom>on||mr.top+(Ie.tickangle?0:er.fontSize/4)<vn)&&(ur=1);var $n=Xn.select("text");ur?nn&&$n.style("opacity",0):($n.style("opacity",1),En=sn==="bottom"||sn==="right"?Math.min(En,xn?mr.top:mr.left):-1/0,kn=sn==="top"||sn==="left"?Math.max(kn,xn?mr.bottom:mr.right):1/0)}}),it._plots){var Fn=it._plots[zn];if(Ie._id===Fn.xaxis._id||Ie._id===Fn.yaxis._id){var Bn=xn?Fn.yaxis:Fn.xaxis;Bn&&(Bn["_visibleLabelMin_"+Ie._id]=En,Bn["_visibleLabelMax_"+Ie._id]=kn)}}}},Ie._hideCounterAxisInsideTickLabels=function(pn){var nn=Ie._id.charAt(0)==="x",xn=[];for(var jn in it._plots){var mn=it._plots[jn];Ie._id!==mn.xaxis._id&&Ie._id!==mn.yaxis._id||xn.push(nn?mn.yaxis:mn.xaxis)}xn.forEach(function(en,vn){en&&je(en)&&(pn||[I,R,N,V,F]).forEach(function(on){var sn=on.K==="tick"&&on.L==="text"&&Ie.ticklabelmode==="period",En=it._plots[Ie._mainSubplot];(on.K===I.K?En.zerolinelayer.selectAll("."+Ie._id+"zl"):on.K===R.K?En.minorGridlayer.selectAll("."+Ie._id):on.K===N.K?En.gridlayer.selectAll("."+Ie._id):En[Ie._id.charAt(0)+"axislayer"]).each(function(){var kn=S.select(this);on.L&&(kn=kn.selectAll(on.L)),kn.each(function(zn){var Fn=Ie.l2p(sn?tt(zn):zn.x)+Ie._offset,Bn=S.select(this);Fn<Ie["_visibleLabelMax_"+en._id]&&Fn>Ie["_visibleLabelMin_"+en._id]?Bn.style("display","none"):on.K!=="tick"||vn||Bn.style("display",null)})})})})},Ut(Mt,vt+1?vt:St);var jt=null;Ie._selections&&(Ie._selections[At]=Mt);var qt=[function(){return It.length&&Promise.all(It)}];Ie.automargin&&it._redrawFromAutoMarginCount&&vt===90?(jt=90,qt.push(function(){Ut(Mt,vt)})):qt.push(function(){if(Ut(Mt,St),kt.length&&gt==="x"&&!k(St)&&(Ie.type!=="log"||String(Ie.dtick).charAt(0)!=="D")){jt=0;var pn,nn=0,xn=[];if(Mt.each(function(Xn){nn=Math.max(nn,Xn.fontSize);var mr=Ie.l2p(Xn.x),ur=yt(this),$n=r.bBox(ur.node());xn.push({top:0,bottom:10,height:10,left:mr-$n.width/2,right:mr+$n.width/2+2,width:$n.width+2})}),Ie.tickson!=="boundaries"&&!Ie.showdividers||We.secondary){var jn=kt.length,mn=Math.abs((kt[jn-1].x-kt[0].x)*Ie._m)/(jn-1),en=Ie.ticklabelposition||"",vn=function(Xn){return en.indexOf(Xn)!==-1},on=vn("top"),sn=vn("left"),En=vn("right"),kn=vn("bottom")||sn||on||En?(Ie.tickwidth||0)+6:0,zn=mn<2.5*nn||Ie.type==="multicategory"||Ie._name==="realaxis";for(pn=0;pn<xn.length-1;pn++)if(b.bBoxIntersect(xn[pn],xn[pn+1],kn)){jt=zn?90:30;break}}else{var Fn=2;for(Ie.ticks&&(Fn+=Ie.tickwidth/2),pn=0;pn<xn.length;pn++){var Bn=kt[pn].xbnd,er=xn[pn];if(Bn[0]!==null&&er.left-Ie.l2p(Bn[0])<Fn||Bn[1]!==null&&Ie.l2p(Bn[1])-er.right<Fn){jt=90;break}}}jt&&Ut(Mt,jt)}}),Ie._tickAngles&&qt.push(function(){Ie._tickAngles[At]=jt===null?k(St)?St:0:jt});var Yt=Ie._anchorAxis;Yt&&Yt.autorange&&je(Ie)&&!re(it,Ie._id)&&(it._insideTickLabelsAutorange||(it._insideTickLabelsAutorange={}),it._insideTickLabelsAutorange[Yt._name+".autorange"]=Yt.autorange,qt.push(function(){Mt.each(function(pn,nn){var xn=yt(this);xn.select(".text-math-group").empty()&&(Ie._vals[nn].bb=r.bBox(xn.node()))})}));var Kt=b.syncOrAsync(qt);return Kt&&Kt.then&&Se._promises.push(Kt),Kt},Y.getPxPosition=function(Se,Ie){var We,it=Se._fullLayout._size,lt=Ie._id.charAt(0),gt=Ie.side;return Ie.anchor!=="free"?We=Ie._anchorAxis:lt==="x"?We={_offset:it.t+(1-(Ie.position||0))*it.h,_length:0}:lt==="y"&&(We={_offset:it.l+(Ie.position||0)*it.w+Ie._shift,_length:0}),gt==="top"||gt==="left"?We._offset:gt==="bottom"||gt==="right"?We._offset+We._length:void 0},Y.shouldShowZeroLine=function(Se,Ie,We){var it=b.simpleMap(Ie.range,Ie.r2l);return it[0]*it[1]<=0&&Ie.zeroline&&(Ie.type==="linear"||Ie.type==="-")&&!(Ie.rangebreaks&&Ie.maskBreaks(0)===O)&&(Tt(Ie,0)||!function(lt,gt,At,kt){var ht=At._mainAxis;if(ht){var St=lt._fullLayout,vt=gt._id.charAt(0),Mt=Y.counterLetter(gt._id),It=gt._offset+(Math.abs(kt[0])<Math.abs(kt[1])==(vt==="x")?0:gt._length),Ut=St._plots[At._mainSubplot];if(!(Ut.mainplotinfo||Ut).overlays.length)return Kt(At);for(var jt=Y.list(lt,Mt),qt=0;qt<jt.length;qt++){var Yt=jt[qt];if(Yt._mainAxis===ht&&Kt(Yt))return!0}}function Kt(pn){if(!pn.showline||!pn.linewidth)return!1;var nn=Math.max((pn.linewidth+gt.zerolinewidth)/2,1);function xn(en){return typeof en=="number"&&Math.abs(en-It)<nn}if(xn(pn._mainLinePosition)||xn(pn._mainMirrorPosition))return!0;var jn=pn._linepositions||{};for(var mn in jn)if(xn(jn[mn][0])||xn(jn[mn][1]))return!0}}(Se,Ie,We,it)||function(lt,gt){for(var At=lt._fullData,kt=gt._mainSubplot,ht=gt._id.charAt(0),St=0;St<At.length;St++){var vt=At[St];if(vt.visible===!0&&vt.xaxis+vt.yaxis===kt&&(T.traceIs(vt,"bar-like")&&vt.orientation==={x:"h",y:"v"}[ht]||vt.fill&&vt.fill.charAt(vt.fill.length-1)===ht))return!0}return!1}(Se,Ie))},Y.clipEnds=function(Se,Ie){return Ie.filter(function(We){return Tt(Se,We.x)})},Y.allowAutoMargin=function(Se){for(var Ie=Y.list(Se,"",!0),We=0;We<Ie.length;We++){var it=Ie[We];it.automargin&&(l.allowAutoMargin(Se,dt(it)),it.mirror&&l.allowAutoMargin(Se,Pt(it))),T.getComponentMethod("rangeslider","isVisible")(it)&&l.allowAutoMargin(Se,Et(it))}},Y.swap=function(Se,Ie){for(var We=function(lt,gt){var At,kt,ht=[];for(At=0;At<gt.length;At++){var St=[],vt=lt._fullData[gt[At]].xaxis,Mt=lt._fullData[gt[At]].yaxis;if(vt&&Mt){for(kt=0;kt<ht.length;kt++)ht[kt].x.indexOf(vt)===-1&&ht[kt].y.indexOf(Mt)===-1||St.push(kt);if(St.length){var It,Ut=ht[St[0]];if(St.length>1)for(kt=1;kt<St.length;kt++)It=ht[St[kt]],Ot(Ut.x,It.x),Ot(Ut.y,It.y);Ot(Ut.x,[vt]),Ot(Ut.y,[Mt])}else ht.push({x:[vt],y:[Mt]})}}return ht}(Se,Ie),it=0;it<We.length;it++)Nt(Se,We[it].x,We[it].y)}},4322:function(K,z,e){var S=e(92770),k=e(71828),l=e(50606).BADNUM,T=k.isArrayOrTypedArray,b=k.isDateTime,d=k.cleanNumber,s=Math.round;function t(r,n){return n?S(r):typeof r=="number"}function o(r){return Math.max(1,(r-1)/1e3)}K.exports=function(r,n,a){var i=r,u=a.noMultiCategory;if(T(i)&&!i.length)return"-";if(!u&&function(g){return T(g[0])&&T(g[1])}(i))return"multicategory";if(u&&Array.isArray(i[0])){for(var h=[],f=0;f<i.length;f++)if(T(i[f]))for(var x=0;x<i[f].length;x++)h.push(i[f][x]);i=h}if(function(g,y){for(var p=g.length,m=o(p),w=0,c=0,M={},_=0;_<p;_+=m){var E=g[s(_)],L=String(E);M[L]||(M[L]=1,b(E,y)&&w++,S(E)&&c++)}return w>2*c}(i,n))return"date";var v=a.autotypenumbers!=="strict";return function(g,y){for(var p=g.length,m=o(p),w=0,c=0,M={},_=0;_<p;_+=m){var E=g[s(_)],L=String(E);if(!M[L]){M[L]=1;var C=typeof E;C==="boolean"?c++:(y?d(E)!==l:C==="number")?w++:C==="string"&&c++}}return c>2*w}(i,v)?"category":function(g,y){for(var p=g.length,m=0;m<p;m++)if(t(g[m],y))return!0;return!1}(i,v)?"linear":"-"}},71453:function(K,z,e){var S=e(92770),k=e(73972),l=e(71828),T=e(44467),b=e(85501),d=e(13838),s=e(26218),t=e(38701),o=e(96115),r=e(89426),n=e(15258),a=e(92128),i=e(21994),u=e(85555).WEEKDAY_PATTERN,h=e(85555).HOUR_PATTERN;function f(g,y,p){function m(O,I){return l.coerce(g,y,d.rangebreaks,O,I)}if(m("enabled")){var w=m("bounds");if(w&&w.length>=2){var c,M,_="";if(w.length===2){for(c=0;c<2;c++)if(M=v(w[c])){_=u;break}}var E=m("pattern",_);if(E===u)for(c=0;c<2;c++)(M=v(w[c]))&&(y.bounds[c]=w[c]=M-1);if(E)for(c=0;c<2;c++)switch(M=w[c],E){case u:if(!S(M)||(M=+M)!==Math.floor(M)||M<0||M>=7)return void(y.enabled=!1);y.bounds[c]=w[c]=M;break;case h:if(!S(M)||(M=+M)<0||M>24)return void(y.enabled=!1);y.bounds[c]=w[c]=M}if(p.autorange===!1){var L=p.range;if(L[0]<L[1]){if(w[0]<L[0]&&w[1]>L[1])return void(y.enabled=!1)}else if(w[0]>L[0]&&w[1]<L[1])return void(y.enabled=!1)}}else{var C=m("values");if(!C||!C.length)return void(y.enabled=!1);m("dvalue")}}}K.exports=function(g,y,p,m,w){var c,M=m.letter,_=m.font||{},E=m.splomStash||{},L=p("visible",!m.visibleDflt),C=y._template||{},O=y.type||C.type||"-";O==="date"&&(k.getComponentMethod("calendars","handleDefaults")(g,y,"calendar",m.calendar),m.noTicklabelmode||(c=p("ticklabelmode")));var I="";m.noTicklabelposition&&O!=="multicategory"||(I=l.coerce(g,y,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:c==="period"?["outside","inside"]:M==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),m.noTicklabeloverflow||p("ticklabeloverflow",I.indexOf("inside")!==-1?"hide past domain":O==="category"||O==="multicategory"?"allow":"hide past div"),i(y,w);var N=!y.isValidRange(g.range);N&&m.reverseDflt&&(N="reversed"),!p("autorange",N)||O!=="linear"&&O!=="-"||p("rangemode"),p("range"),y.cleanRange(),n(g,y,p,m),O==="category"||m.noHover||p("hoverformat");var R=p("color"),V=R!==d.color.dflt?R:_.color,F=E.label||w._dfltTitle[M];if(r(g,y,p,O,m),!L)return y;p("title.text",F),l.coerceFont(p,"title.font",{family:_.family,size:l.bigFont(_.size),color:V}),s(g,y,p,O);var D=m.hasMinor;if(D&&(T.newContainer(y,"minor"),s(g,y,p,O,{isMinor:!0})),o(g,y,p,O,m),t(g,y,p,m),D){var U=m.isMinor;m.isMinor=!0,t(g,y,p,m),m.isMinor=U}a(g,y,p,{dfltColor:R,bgColor:m.bgColor,showGrid:m.showGrid,hasMinor:D,attributes:d}),!D||y.minor.ticks||y.minor.showgrid||delete y.minor,(y.showline||y.ticks)&&p("mirror");var j,J=O==="multicategory";if(m.noTickson||O!=="category"&&!J||!y.ticks&&!y.showgrid||(J&&(j="boundaries"),p("tickson",j)==="boundaries"&&delete y.ticklabelposition),J&&p("showdividers")&&(p("dividercolor"),p("dividerwidth")),O==="date")if(b(g,y,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:f}),y.rangebreaks.length){for(var X=0;X<y.rangebreaks.length;X++)if(y.rangebreaks[X].pattern===u){y._hasDayOfWeekBreaks=!0;break}if(i(y,w),w._has("scattergl")||w._has("splom"))for(var Z=0;Z<m.data.length;Z++){var Y=m.data[Z];Y.type!=="scattergl"&&Y.type!=="splom"||(Y.visible=!1,l.warn(Y.type+" traces do not work on axes with rangebreaks. Setting trace "+Y.index+" to `visible: false`."))}}else delete y.rangebreaks;return y};var x={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function v(g){if(typeof g=="string")return x[g.substr(0,3).toLowerCase()]}},12663:function(K,z,e){var S=e(31562),k=S.FORMAT_LINK,l=S.DATE_FORMAT_LINK;function T(d,s){return["Sets the "+d+" formatting rule"+(s?"for `"+s+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+k+"."].join(" ")}function b(d,s){return T(d,s)+[" And for dates see: "+l+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}K.exports={axisHoverFormat:function(d,s){return{valType:"string",dflt:"",editType:"none",description:(s?T:b)("hover text",d)+["By default the values are formatted using "+(s?"generic number format":"`"+d+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:T,descriptionWithDates:b}},41675:function(K,z,e){var S=e(73972),k=e(85555);function l(T,b){if(b&&b.length){for(var d=0;d<b.length;d++)if(b[d][T])return!0}return!1}z.id2name=function(T){if(typeof T=="string"&&T.match(k.AX_ID_PATTERN)){var b=T.split(" ")[0].substr(1);return b==="1"&&(b=""),T.charAt(0)+"axis"+b}},z.name2id=function(T){if(T.match(k.AX_NAME_PATTERN)){var b=T.substr(5);return b==="1"&&(b=""),T.charAt(0)+b}},z.cleanId=function(T,b,d){var s=/( domain)$/.test(T);if(typeof T=="string"&&T.match(k.AX_ID_PATTERN)&&(!b||T.charAt(0)===b)&&(!s||d)){var t=T.split(" ")[0].substr(1).replace(/^0+/,"");return t==="1"&&(t=""),T.charAt(0)+t+(s&&d?" domain":"")}},z.list=function(T,b,d){var s=T._fullLayout;if(!s)return[];var t,o=z.listIds(T,b),r=new Array(o.length);for(t=0;t<o.length;t++){var n=o[t];r[t]=s[n.charAt(0)+"axis"+n.substr(1)]}if(!d){var a=s._subplots.gl3d||[];for(t=0;t<a.length;t++){var i=s[a[t]];b?r.push(i[b+"axis"]):r.push(i.xaxis,i.yaxis,i.zaxis)}}return r},z.listIds=function(T,b){var d=T._fullLayout;if(!d)return[];var s=d._subplots;return b?s[b+"axis"]:s.xaxis.concat(s.yaxis)},z.getFromId=function(T,b,d){var s=T._fullLayout;return b=b===void 0||typeof b!="string"?b:b.replace(" domain",""),d==="x"?b=b.replace(/y[0-9]*/,""):d==="y"&&(b=b.replace(/x[0-9]*/,"")),s[z.id2name(b)]},z.getFromTrace=function(T,b,d){var s=T._fullLayout,t=null;if(S.traceIs(b,"gl3d")){var o=b.scene;o.substr(0,5)==="scene"&&(t=s[o][d+"axis"])}else t=z.getFromId(T,b[d+"axis"]||d);return t},z.idSort=function(T,b){var d=T.charAt(0),s=b.charAt(0);return d!==s?d>s?1:-1:+(T.substr(1)||1)-+(b.substr(1)||1)},z.ref2id=function(T){return!!/^[xyz]/.test(T)&&T.split(" ")[0]},z.isLinked=function(T,b){return l(b,T._axisMatchGroups)||l(b,T._axisConstraintGroups)}},15258:function(K){K.exports=function(z,e,S,k){if(e.type==="category"){var l,T=z.categoryarray,b=Array.isArray(T)&&T.length>0;b&&(l="array");var d,s=S("categoryorder",l);s==="array"&&(d=S("categoryarray")),b||s!=="array"||(s=e.categoryorder="trace"),s==="trace"?e._initialCategories=[]:s==="array"?e._initialCategories=d.slice():(d=function(t,o){var r,n,a,i=o.dataAttr||t._id.charAt(0),u={};if(o.axData)r=o.axData;else for(r=[],n=0;n<o.data.length;n++){var h=o.data[n];h[i+"axis"]===t._id&&r.push(h)}for(n=0;n<r.length;n++){var f=r[n][i];for(a=0;a<f.length;a++){var x=f[a];x!=null&&(u[x]=1)}}return Object.keys(u)}(e,k).sort(),s==="category ascending"?e._initialCategories=d:s==="category descending"&&(e._initialCategories=d.reverse()))}}},66287:function(K,z,e){var S=e(92770),k=e(71828),l=e(50606),T=l.ONEDAY,b=l.ONEWEEK;z.dtick=function(d,s){var t=s==="log",o=s==="date",r=s==="category",n=o?T:1;if(!d)return n;if(S(d))return(d=Number(d))<=0?n:r?Math.max(1,Math.round(d)):o?Math.max(.1,d):d;if(typeof d!="string"||!o&&!t)return n;var a=d.charAt(0),i=d.substr(1);return(i=S(i)?Number(i):0)<=0||!(o&&a==="M"&&i===Math.round(i)||t&&a==="L"||t&&a==="D"&&(i===1||i===2))?n:d},z.tick0=function(d,s,t,o){return s==="date"?k.cleanDate(d,k.dateTick0(t,o%b==0?1:0)):o!=="D1"&&o!=="D2"?S(d)?Number(d):0:void 0}},85555:function(K,z,e){var S=e(30587).counter;K.exports={idRegex:{x:S("x","( domain)?"),y:S("y","( domain)?")},attrRegex:S("[xy]axis"),xAxisMatch:S("xaxis"),yAxisMatch:S("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},99082:function(K,z,e){var S=e(71828),k=e(71739),l=e(41675).id2name,T=e(13838),b=e(42449),d=e(21994),s=e(50606).ALMOST_EQUAL,t=e(18783).FROM_BL;function o(f,x,v){var g=v.axIds,y=v.layoutOut,p=v.hasImage,m=y._axisConstraintGroups,w=y._axisMatchGroups,c=x._id,M=c.charAt(0),_=((y._splomAxes||{})[M]||{})[c]||{},E=x._id,L=E.charAt(0)==="x";function C(W,Q){return S.coerce(f,x,T,W,Q)}x._matchGroup=null,x._constraintGroup=null,C("constrain",p?"domain":"range"),S.coerce(f,x,{constraintoward:{valType:"enumerated",values:L?["left","center","right"]:["bottom","middle","top"],dflt:L?"center":"middle"}},"constraintoward");var O,I,N=x.type,R=[];for(O=0;O<g.length;O++)(I=g[O])!==E&&y[l(I)].type===N&&R.push(I);var V=n(m,E);if(V){var F=[];for(O=0;O<R.length;O++)V[I=R[O]]||F.push(I);R=F}var D,U,j=R.length;j&&(f.matches||_.matches)&&(D=S.coerce(f,x,{matches:{valType:"enumerated",values:R,dflt:R.indexOf(_.matches)!==-1?_.matches:void 0}},"matches"));var J=p&&!L?x.anchor:void 0;if(j&&!D&&(f.scaleanchor||J)&&(U=S.coerce(f,x,{scaleanchor:{valType:"enumerated",values:R}},"scaleanchor",J)),D){x._matchGroup=a(w,E,D,1);var X=y[l(D)],Z=r(y,x)/r(y,X);L!==(D.charAt(0)==="x")&&(Z=(L?"x":"y")+Z),a(m,E,D,Z)}else f.matches&&g.indexOf(f.matches)!==-1&&S.warn("ignored "+x._name+'.matches: "'+f.matches+'" to avoid an infinite loop');if(U){var Y=C("scaleratio");Y||(Y=x.scaleratio=1),a(m,E,U,Y)}else f.scaleanchor&&g.indexOf(f.scaleanchor)!==-1&&S.warn("ignored "+x._name+'.scaleanchor: "'+f.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function r(f,x){var v=x.domain;return v||(v=f[l(x.overlaying)].domain),v[1]-v[0]}function n(f,x){for(var v=0;v<f.length;v++)if(f[v][x])return f[v];return null}function a(f,x,v,g){var y,p,m,w,c,M=n(f,x);M===null?((M={})[x]=1,c=f.length,f.push(M)):c=f.indexOf(M);var _=Object.keys(M);for(y=0;y<f.length;y++)if(m=f[y],y!==c&&m[v]){var E=m[v];for(p=0;p<_.length;p++)m[w=_[p]]=i(E,i(g,M[w]));return void f.splice(c,1)}if(g!==1)for(p=0;p<_.length;p++){var L=_[p];M[L]=i(g,M[L])}M[v]=1}function i(f,x){var v,g,y="",p="";typeof f=="string"&&(v=(y=f.match(/^[xy]*/)[0]).length,f=+f.substr(v)),typeof x=="string"&&(g=(p=x.match(/^[xy]*/)[0]).length,x=+x.substr(g));var m=f*x;return v||g?v&&g&&y.charAt(0)!==p.charAt(0)?v===g?m:(v>g?y.substr(g):p.substr(v))+m:y+p+f*x:m}function u(f,x){for(var v=x._size,g=v.h/v.w,y={},p=Object.keys(f),m=0;m<p.length;m++){var w=p[m],c=f[w];if(typeof c=="string"){var M=c.match(/^[xy]*/)[0],_=M.length;c=+c.substr(_);for(var E=M.charAt(0)==="y"?g:1/g,L=0;L<_;L++)c*=E}y[w]=c}return y}function h(f,x){var v=f._inputDomain,g=t[f.constraintoward],y=v[0]+(v[1]-v[0])*g;f.domain=f._input.domain=[y+(v[0]-y)/x,y+(v[1]-y)/x],f.setScale()}z.handleDefaults=function(f,x,v){var g,y,p,m,w,c,M,_,E=v.axIds,L=v.axHasImage,C=x._axisConstraintGroups=[],O=x._axisMatchGroups=[];for(g=0;g<E.length;g++)o(w=f[m=l(E[g])],c=x[m],{axIds:E,layoutOut:x,hasImage:L[m]});function I(X,Z){for(g=0;g<X.length;g++)for(p in y=X[g])x[l(p)][Z]=y}for(I(O,"_matchGroup"),g=0;g<C.length;g++)for(p in y=C[g])if((c=x[l(p)]).fixedrange){for(var N in y){var R=l(N);(f[R]||{}).fixedrange===!1&&S.warn("fixedrange was specified as false for axis "+R+" but was overridden because another axis in its constraint group has fixedrange true"),x[R].fixedrange=!0}break}for(g=0;g<C.length;){for(p in y=C[g]){(c=x[l(p)])._matchGroup&&Object.keys(c._matchGroup).length===Object.keys(y).length&&(C.splice(g,1),g--);break}g++}I(C,"_constraintGroup");var V=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],F=!1,D=!1;function U(){_=c[M],M==="rangebreaks"&&(D=c._hasDayOfWeekBreaks)}for(g=0;g<O.length;g++){y=O[g];for(var j=0;j<V.length;j++){var J;for(p in M=V[j],_=null,y)if(w=f[m=l(p)],c=x[m],M in c){if(!c.matches&&(J=c,M in w)){U();break}_===null&&M in w&&U()}if(M==="range"&&_&&(F=!0),M==="autorange"&&_===null&&F&&(_=!1),_===null&&M in J&&(_=J[M]),_!==null)for(p in y)(c=x[l(p)])[M]=M==="range"?_.slice():_,M==="rangebreaks"&&(c._hasDayOfWeekBreaks=D,d(c,x))}}},z.enforce=function(f){var x,v,g,y,p,m,w,c,M=f._fullLayout,_=M._axisConstraintGroups||[];for(x=0;x<_.length;x++){g=u(_[x],M);var E=Object.keys(g),L=1/0,C=0,O=1/0,I={},N={},R=!1;for(v=0;v<E.length;v++)N[y=E[v]]=p=M[l(y)],p._inputDomain?p.domain=p._inputDomain.slice():p._inputDomain=p.domain.slice(),p._inputRange||(p._inputRange=p.range.slice()),p.setScale(),I[y]=m=Math.abs(p._m)/g[y],L=Math.min(L,m),p.constrain!=="domain"&&p._constraintShrinkable||(O=Math.min(O,m)),delete p._constraintShrinkable,C=Math.max(C,m),p.constrain==="domain"&&(R=!0);if(!(L>s*C)||R){for(v=0;v<E.length;v++)if(m=I[y=E[v]],w=(p=N[y]).constrain,m!==O||w==="domain")if(c=m/O,w==="range")b(p,c);else{var V=p._inputDomain,F=(p.domain[1]-p.domain[0])/(V[1]-V[0]),D=(p.r2l(p.range[1])-p.r2l(p.range[0]))/(p.r2l(p._inputRange[1])-p.r2l(p._inputRange[0]));if((c/=F)*D<1){p.domain=p._input.domain=V.slice(),b(p,c);continue}if(D<1&&(p.range=p._input.range=p._inputRange.slice(),c*=D),p.autorange){var U=p.r2l(p.range[0]),j=p.r2l(p.range[1]),J=(U+j)/2,X=J,Z=J,Y=Math.abs(j-J),W=J-Y*c*1.0001,Q=J+Y*c*1.0001,ne=k.makePadFn(M,p,0),re=k.makePadFn(M,p,1);h(p,c);var ie,se,ge=Math.abs(p._m),ue=k.concatExtremes(f,p),ce=ue.min,le=ue.max;for(se=0;se<ce.length;se++)(ie=ce[se].val-ne(ce[se])/ge)>W&&ie<X&&(X=ie);for(se=0;se<le.length;se++)(ie=le[se].val+re(le[se])/ge)<Q&&ie>Z&&(Z=ie);c/=(Z-X)/(2*Y),X=p.l2r(X),Z=p.l2r(Z),p.range=p._input.range=U<j?[X,Z]:[Z,X]}h(p,c)}}}},z.getAxisGroup=function(f,x){for(var v=f._axisMatchGroups,g=0;g<v.length;g++)if(v[g][x])return"g"+g;return x},z.clean=function(f,x){if(x._inputDomain){for(var v=!1,g=x._id,y=f._fullLayout._axisConstraintGroups,p=0;p<y.length;p++)if(y[p][g]){v=!0;break}v&&x.constrain==="domain"||(x._input.domain=x.domain=x._inputDomain,delete x._inputDomain)}}},29323:function(K,z,e){var S=e(39898),k=e(71828),l=k.numberFormat,T=e(84267),b=e(38520),d=e(73972),s=k.strTranslate,t=e(63893),o=e(7901),r=e(91424),n=e(30211),a=e(89298),i=e(6964),u=e(28569),h=e(64505),f=h.selectingOrDrawing,x=h.freeMode,v=e(18783).FROM_TL,g=e(33306),y=e(61549).redrawReglTraces,p=e(74875),m=e(41675).getFromId,w=e(47322).prepSelect,c=e(47322).clearOutline,M=e(47322).selectOnClick,_=e(42449),E=e(85555),L=E.MINDRAG,C=E.MINZOOM,O=!0;function I(ie,se,ge,ue){var ce=k.ensureSingle(ie.draglayer,se,ge,function(le){le.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ie.id)});return ce.call(i,ue),ce.node()}function N(ie,se,ge,ue,ce,le,de){var Ce=I(ie,"rect",se,ge);return S.select(Ce).call(r.setRect,ue,ce,le,de),Ce}function R(ie,se){for(var ge=0;ge<ie.length;ge++)if(!ie[ge].fixedrange)return se;return""}function V(ie,se,ge,ue,ce){for(var le=0;le<ie.length;le++){var de=ie[le];if(!de.fixedrange)if(de.rangebreaks){var Ce=de._id.charAt(0)==="y",xe=Ce?1-se:se,_e=Ce?1-ge:ge;ue[de._name+".range[0]"]=de.l2r(de.p2l(xe*de._length)),ue[de._name+".range[1]"]=de.l2r(de.p2l(_e*de._length))}else{var we=de._rl[0],Ae=de._rl[1]-we;ue[de._name+".range[0]"]=de.l2r(we+Ae*se),ue[de._name+".range[1]"]=de.l2r(we+Ae*ge)}}if(ce&&ce.length){var $=(se+(1-ge))/2;V(ce,$,1-$,ue,[])}}function F(ie,se){for(var ge=0;ge<ie.length;ge++){var ue=ie[ge];if(!ue.fixedrange)if(ue.rangebreaks){var ce=ue._length,le=(ue.p2l(0+se)-ue.p2l(0)+(ue.p2l(ce+se)-ue.p2l(ce)))/2;ue.range=[ue.l2r(ue._rl[0]-le),ue.l2r(ue._rl[1]-le)]}else ue.range=[ue.l2r(ue._rl[0]-se/ue._m),ue.l2r(ue._rl[1]-se/ue._m)]}}function D(ie){return 1-(ie>=0?Math.min(ie,.9):1/(1/Math.max(ie,-.3)+3.222))}function U(ie,se,ge,ue,ce){return ie.append("path").attr("class","zoombox").style({fill:se>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",s(ge,ue)).attr("d",ce+"Z")}function j(ie,se,ge){return ie.append("path").attr("class","zoombox-corners").style({fill:o.background,stroke:o.defaultLine,"stroke-width":1,opacity:0}).attr("transform",s(se,ge)).attr("d","M0,0Z")}function J(ie,se,ge,ue,ce,le){ie.attr("d",ue+"M"+ge.l+","+ge.t+"v"+ge.h+"h"+ge.w+"v-"+ge.h+"h-"+ge.w+"Z"),X(ie,se,ce,le)}function X(ie,se,ge,ue){ge||(ie.transition().style("fill",ue>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),se.transition().style("opacity",1).duration(200))}function Z(ie){S.select(ie).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Y(ie){O&&ie.data&&ie._context.showTips&&(k.notifier(k._(ie,"Double-click to zoom back out"),"long"),O=!1)}function W(ie){var se=Math.floor(Math.min(ie.b-ie.t,ie.r-ie.l,C)/2);return"M"+(ie.l-3.5)+","+(ie.t-.5+se)+"h3v"+-se+"h"+se+"v-3h-"+(se+3)+"ZM"+(ie.r+3.5)+","+(ie.t-.5+se)+"h-3v"+-se+"h"+-se+"v-3h"+(se+3)+"ZM"+(ie.r+3.5)+","+(ie.b+.5-se)+"h-3v"+se+"h"+-se+"v3h"+(se+3)+"ZM"+(ie.l-3.5)+","+(ie.b+.5-se)+"h3v"+se+"h"+se+"v3h-"+(se+3)+"Z"}function Q(ie,se,ge,ue,ce){for(var le,de,Ce,xe,_e=!1,we={},Ae={},$=(ce||{}).xaHash,oe=(ce||{}).yaHash,pe=0;pe<se.length;pe++){var ye=se[pe];for(le in ge)if(ye[le]){for(Ce in ye)ce&&($[Ce]||oe[Ce])||(Ce.charAt(0)==="x"?ge:ue)[Ce]||(we[Ce]=le);for(de in ue)ce&&($[de]||oe[de])||!ye[de]||(_e=!0)}for(de in ue)if(ye[de])for(xe in ye)ce&&($[xe]||oe[xe])||(xe.charAt(0)==="x"?ge:ue)[xe]||(Ae[xe]=de)}_e&&(k.extendFlat(we,Ae),Ae={});var ke={},De=[];for(Ce in we){var Pe=m(ie,Ce);De.push(Pe),ke[Pe._id]=Pe}var Re={},fe=[];for(xe in Ae){var ve=m(ie,xe);fe.push(ve),Re[ve._id]=ve}return{xaHash:ke,yaHash:Re,xaxes:De,yaxes:fe,xLinks:we,yLinks:Ae,isSubplotConstrained:_e}}function ne(ie,se){if(b){var ge=ie.onwheel!==void 0?"wheel":"mousewheel";ie._onwheel&&ie.removeEventListener(ge,ie._onwheel),ie._onwheel=se,ie.addEventListener(ge,se,{passive:!1})}else ie.onwheel!==void 0?ie.onwheel=se:ie.onmousewheel!==void 0?ie.onmousewheel=se:ie.isAddedWheelEvent||(ie.isAddedWheelEvent=!0,ie.addEventListener("wheel",se,{passive:!1}))}function re(ie){var se=[];for(var ge in ie)se.push(ie[ge]);return se}K.exports={makeDragBox:function(ie,se,ge,ue,ce,le,de,Ce){var xe,_e,we,Ae,$,oe,pe,ye,ke,De,Pe,Re,fe,ve,Te,ze,He,Ve,nt,tt,ot,pt,Tt,yt=ie._fullLayout._zoomlayer,dt=de+Ce==="nsew",Pt=(de+Ce).length===1;function Et(){if(xe=se.xaxis,_e=se.yaxis,ke=xe._length,De=_e._length,pe=xe._offset,ye=_e._offset,(we={})[xe._id]=xe,(Ae={})[_e._id]=_e,de&&Ce)for(var en=se.overlays,vn=0;vn<en.length;vn++){var on=en[vn].xaxis;we[on._id]=on;var sn=en[vn].yaxis;Ae[sn._id]=sn}$=re(we),oe=re(Ae),fe=R($,Ce),ve=R(oe,de),Te=!ve&&!fe,Re=Q(ie,ie._fullLayout._axisMatchGroups,we,Ae);var En=(Pe=Q(ie,ie._fullLayout._axisConstraintGroups,we,Ae,Re)).isSubplotConstrained||Re.isSubplotConstrained;ze=Ce||En,He=de||En;var kn=ie._fullLayout;Ve=kn._has("scattergl"),nt=kn._has("splom"),tt=kn._has("svg")}ge+=se.yaxis._shift,Et();var Ot=function(en,vn,on){return en?en==="nsew"?on?"":vn==="pan"?"move":"crosshair":en.toLowerCase()+"-resize":"pointer"}(ve+fe,ie._fullLayout.dragmode,dt),Nt=N(se,de+Ce+"drag",Ot,ge,ue,ce,le);if(Te&&!dt)return Nt.onmousedown=null,Nt.style.pointerEvents="none",Nt;var zt,Ze,Ye,je,Ke,st,Se,Ie,We,it,lt={element:Nt,gd:ie,plotinfo:se};function gt(){lt.plotinfo.selection=!1,c(ie)}function At(en,vn){var on=lt.gd;if(on._fullLayout._activeShapeIndex>=0)on._fullLayout._deactivateShape(on);else{var sn=on._fullLayout.clickmode;if(Z(on),en!==2||Pt||Kt(),dt)sn.indexOf("select")>-1&&M(vn,on,$,oe,se.id,lt),sn.indexOf("event")>-1&&n.click(on,vn,se.id);else if(en===1&&Pt){var En=de?_e:xe,kn=de==="s"||Ce==="w"?0:1,zn=En._name+".range["+kn+"]",Fn=function(Xn,mr){var ur,$n=Xn.range[mr],lr=Math.abs($n-Xn.range[1-mr]);return Xn.type==="date"?$n:Xn.type==="log"?(ur=Math.ceil(Math.max(0,-Math.log(lr)/Math.LN10))+3,l("."+ur+"g")(Math.pow(10,$n))):(ur=Math.floor(Math.log(Math.abs($n))/Math.LN10)-Math.floor(Math.log(lr)/Math.LN10)+4,l("."+String(ur)+"g")($n))}(En,kn),Bn="left",er="middle";if(En.fixedrange)return;de?(er=de==="n"?"top":"bottom",En.side==="right"&&(Bn="right")):Ce==="e"&&(Bn="right"),on._context.showAxisRangeEntryBoxes&&S.select(Nt).call(t.makeEditable,{gd:on,immediate:!0,background:on._fullLayout.paper_bgcolor,text:String(Fn),fill:En.tickfont?En.tickfont.color:"#444",horizontalAlign:Bn,verticalAlign:er}).on("edit",function(Xn){var mr=En.d2r(Xn);mr!==void 0&&d.call("_guiRelayout",on,zn,mr)})}}}function kt(en,vn){if(ie._transitioningWithDuration)return!1;var on=Math.max(0,Math.min(ke,pt*en+zt)),sn=Math.max(0,Math.min(De,Tt*vn+Ze)),En=Math.abs(on-zt),kn=Math.abs(sn-Ze);function zn(){Se="",Ye.r=Ye.l,Ye.t=Ye.b,We.attr("d","M0,0Z")}if(Ye.l=Math.min(zt,on),Ye.r=Math.max(zt,on),Ye.t=Math.min(Ze,sn),Ye.b=Math.max(Ze,sn),Pe.isSubplotConstrained)En>C||kn>C?(Se="xy",En/ke>kn/De?(kn=En*De/ke,Ze>sn?Ye.t=Ze-kn:Ye.b=Ze+kn):(En=kn*ke/De,zt>on?Ye.l=zt-En:Ye.r=zt+En),We.attr("d",W(Ye))):zn();else if(Re.isSubplotConstrained)if(En>C||kn>C){Se="xy";var Fn=Math.min(Ye.l/ke,(De-Ye.b)/De),Bn=Math.max(Ye.r/ke,(De-Ye.t)/De);Ye.l=Fn*ke,Ye.r=Bn*ke,Ye.b=(1-Fn)*De,Ye.t=(1-Bn)*De,We.attr("d",W(Ye))}else zn();else!ve||kn<Math.min(Math.max(.6*En,L),C)?En<L||!fe?zn():(Ye.t=0,Ye.b=De,Se="x",We.attr("d",function(er,Xn){return"M"+(er.l-.5)+","+(Xn-C-.5)+"h-3v"+(2*C+1)+"h3ZM"+(er.r+.5)+","+(Xn-C-.5)+"h3v"+(2*C+1)+"h-3Z"}(Ye,Ze))):!fe||En<Math.min(.6*kn,C)?(Ye.l=0,Ye.r=ke,Se="y",We.attr("d",function(er,Xn){return"M"+(Xn-C-.5)+","+(er.t-.5)+"v-3h"+(2*C+1)+"v3ZM"+(Xn-C-.5)+","+(er.b+.5)+"v3h"+(2*C+1)+"v-3Z"}(Ye,zt))):(Se="xy",We.attr("d",W(Ye)));Ye.w=Ye.r-Ye.l,Ye.h=Ye.b-Ye.t,Se&&(it=!0),ie._dragged=it,J(Ie,We,Ye,Ke,st,je),ht(),ie.emit("plotly_relayouting",ot),st=!0}function ht(){ot={},Se!=="xy"&&Se!=="x"||(V($,Ye.l/ke,Ye.r/ke,ot,Pe.xaxes),qt("x",ot)),Se!=="xy"&&Se!=="y"||(V(oe,(De-Ye.b)/De,(De-Ye.t)/De,ot,Pe.yaxes),qt("y",ot))}function St(){ht(),Z(ie),pn(),Y(ie)}lt.prepFn=function(en,vn,on){var sn=lt.dragmode,En=ie._fullLayout.dragmode;En!==sn&&(lt.dragmode=En),Et(),pt=ie._fullLayout._invScaleX,Tt=ie._fullLayout._invScaleY,Te||(dt?en.shiftKey?En==="pan"?En="zoom":f(En)||(En="pan"):en.ctrlKey&&(En="pan"):En="pan"),x(En)?lt.minDrag=1:lt.minDrag=void 0,f(En)?(lt.xaxes=$,lt.yaxes=oe,w(en,vn,on,lt,En)):(lt.clickFn=At,f(sn)&&gt(),Te||(En==="zoom"?(lt.moveFn=kt,lt.doneFn=St,lt.minDrag=1,function(kn,zn,Fn){var Bn=Nt.getBoundingClientRect();zt=zn-Bn.left,Ze=Fn-Bn.top,ie._fullLayout._calcInverseTransform(ie);var er=k.apply3DTransform(ie._fullLayout._invTransform)(zt,Ze);zt=er[0],Ze=er[1],Ye={l:zt,r:zt,w:0,t:Ze,b:Ze,h:0},je=ie._hmpixcount?ie._hmlumcount/ie._hmpixcount:T(ie._fullLayout.plot_bgcolor).getLuminance(),st=!1,Se="xy",it=!1,Ie=U(yt,je,pe,ye,Ke="M0,0H"+ke+"V"+De+"H0V0"),We=j(yt,pe,ye)}(0,vn,on)):En==="pan"&&(lt.moveFn=jt,lt.doneFn=pn))),ie._fullLayout._redrag=function(){var kn=ie._dragdata;if(kn&&kn.element===Nt){var zn=ie._fullLayout.dragmode;f(zn)||(Et(),nn([0,0,ke,De]),lt.moveFn(kn.dx,kn.dy))}}},u.init(lt);var vt=[0,0,ke,De],Mt=null,It=E.REDRAWDELAY,Ut=se.mainplot?ie._fullLayout._plots[se.mainplot]:se;function jt(en,vn){if(en*=pt,vn*=Tt,!ie._transitioningWithDuration){if(ie._fullLayout._replotting=!0,fe==="ew"||ve==="ns"){var on=fe?-en:0,sn=ve?-vn:0;if(Re.isSubplotConstrained){if(fe&&ve){var En=(en/ke-vn/De)/2;on=-(en=En*ke),sn=-(vn=-En*De)}ve?on=-sn*ke/De:sn=-on*De/ke}return fe&&(F($,en),qt("x")),ve&&(F(oe,vn),qt("y")),nn([on,sn,ke,De]),Yt(),void ie.emit("plotly_relayouting",ot)}var kn,zn,Fn=fe==="w"==(ve==="n")?1:-1;if(fe&&ve&&(Pe.isSubplotConstrained||Re.isSubplotConstrained)){var Bn=(en/ke+Fn*vn/De)/2;en=Bn*ke,vn=Fn*Bn*De}if(fe==="w"?en=ur($,0,en):fe==="e"?en=ur($,1,-en):fe||(en=0),ve==="n"?vn=ur(oe,1,vn):ve==="s"?vn=ur(oe,0,-vn):ve||(vn=0),kn=fe==="w"?en:0,zn=ve==="n"?vn:0,Pe.isSubplotConstrained&&!Re.isSubplotConstrained||Re.isSubplotConstrained&&fe&&ve&&Fn>0){var er;if(Re.isSubplotConstrained||!fe&&ve.length===1){for(er=0;er<$.length;er++)$[er].range=$[er]._r.slice(),_($[er],1-vn/De);kn=(en=vn*ke/De)/2}if(Re.isSubplotConstrained||!ve&&fe.length===1){for(er=0;er<oe.length;er++)oe[er].range=oe[er]._r.slice(),_(oe[er],1-en/ke);zn=(vn=en*De/ke)/2}}Re.isSubplotConstrained&&ve||qt("x"),Re.isSubplotConstrained&&fe||qt("y");var Xn=ke-en,mr=De-vn;!Re.isSubplotConstrained||fe&&ve||(fe?(zn=kn?0:en*De/ke,mr=Xn*De/ke):(kn=zn?0:vn*ke/De,Xn=mr*ke/De)),nn([kn,zn,Xn,mr]),Yt(),ie.emit("plotly_relayouting",ot)}function ur($n,lr,hr){for(var Gt,hn,An=1-lr,Tn=0;Tn<$n.length;Tn++){var Rn=$n[Tn];if(!Rn.fixedrange){Gt=Rn,hn=Rn._rl[An]+(Rn._rl[lr]-Rn._rl[An])/D(hr/Rn._length);var qn=Rn.l2r(hn);qn!==!1&&qn!==void 0&&(Rn.range[lr]=qn)}}return Gt._length*(Gt._rl[lr]-hn)/(Gt._rl[lr]-Gt._rl[An])}}function qt(en,vn){for(var on=Re.isSubplotConstrained?{x:oe,y:$}[en]:Re[en+"axes"],sn=Re.isSubplotConstrained?{x:$,y:oe}[en]:[],En=0;En<on.length;En++){var kn=on[En],zn=kn._id,Fn=Re.xLinks[zn]||Re.yLinks[zn],Bn=sn[0]||we[Fn]||Ae[Fn];Bn&&(vn?(vn[kn._name+".range[0]"]=vn[Bn._name+".range[0]"],vn[kn._name+".range[1]"]=vn[Bn._name+".range[1]"]):kn.range=Bn.range.slice())}}function Yt(){var en,vn=[];function on(zn){for(en=0;en<zn.length;en++)zn[en].fixedrange||vn.push(zn[en]._id)}function sn(zn,Fn){for(en=0;en<zn.length;en++){var Bn=zn[en],er=Bn[Fn];Bn.fixedrange||er.tickmode!=="sync"||vn.push(er._id)}}for(ze&&(on($),on(Pe.xaxes),on(Re.xaxes),sn(se.overlays,"xaxis")),He&&(on(oe),on(Pe.yaxes),on(Re.yaxes),sn(se.overlays,"yaxis")),ot={},en=0;en<vn.length;en++){var En=vn[en],kn=m(ie,En);a.drawOne(ie,kn,{skipTitle:!0}),ot[kn._name+".range[0]"]=kn.range[0],ot[kn._name+".range[1]"]=kn.range[1]}a.redrawComponents(ie,vn)}function Kt(){if(!ie._transitioningWithDuration){var en=ie._context.doubleClick,vn=[];fe&&(vn=vn.concat($)),ve&&(vn=vn.concat(oe)),Re.xaxes&&(vn=vn.concat(Re.xaxes)),Re.yaxes&&(vn=vn.concat(Re.yaxes));var on,sn,En,kn={};if(en==="reset+autosize"){for(en="autosize",sn=0;sn<vn.length;sn++)if((on=vn[sn])._rangeInitial&&(on.range[0]!==on._rangeInitial[0]||on.range[1]!==on._rangeInitial[1])||!on._rangeInitial&&!on.autorange){en="reset";break}}if(en==="autosize")for(sn=0;sn<vn.length;sn++)(on=vn[sn]).fixedrange||(kn[on._name+".autorange"]=!0);else if(en==="reset")for((fe||Pe.isSubplotConstrained)&&(vn=vn.concat(Pe.xaxes)),ve&&!Pe.isSubplotConstrained&&(vn=vn.concat(Pe.yaxes)),Pe.isSubplotConstrained&&(fe?ve||(vn=vn.concat(oe)):vn=vn.concat($)),sn=0;sn<vn.length;sn++)(on=vn[sn]).fixedrange||(on._rangeInitial?(En=on._rangeInitial,kn[on._name+".range[0]"]=En[0],kn[on._name+".range[1]"]=En[1]):kn[on._name+".autorange"]=!0);ie.emit("plotly_doubleclick",null),d.call("_guiRelayout",ie,kn)}}function pn(){nn([0,0,ke,De]),k.syncOrAsync([p.previousPromises,function(){ie._fullLayout._replotting=!1,d.call("_guiRelayout",ie,ot)}],ie)}function nn(en){var vn,on,sn,En,kn=ie._fullLayout,zn=kn._plots,Fn=kn._subplots.cartesian;if(nt&&d.subplotsRegistry.splom.drag(ie),Ve){for(vn=0;vn<Fn.length;vn++)if(sn=(on=zn[Fn[vn]]).xaxis,En=on.yaxis,on._scene){var Bn=k.simpleMap(sn.range,sn.r2l),er=k.simpleMap(En.range,En.r2l);on._scene.update({range:[Bn[0],er[0],Bn[1],er[1]]})}}if((nt||Ve)&&(g(ie),y(ie)),tt){var Xn=en[2]/xe._length,mr=en[3]/_e._length;for(vn=0;vn<Fn.length;vn++){sn=(on=zn[Fn[vn]]).xaxis,En=on.yaxis;var ur,$n,lr,hr,Gt=(ze||Re.isSubplotConstrained)&&!sn.fixedrange&&we[sn._id],hn=(He||Re.isSubplotConstrained)&&!En.fixedrange&&Ae[En._id];if(Gt?(ur=Xn,lr=Ce||Re.isSubplotConstrained?en[0]:mn(sn,ur)):Re.xaHash[sn._id]?(ur=Xn,lr=en[0]*sn._length/xe._length):Re.yaHash[sn._id]?(ur=mr,lr=ve==="ns"?-en[1]*sn._length/_e._length:mn(sn,ur,{n:"top",s:"bottom"}[ve])):lr=jn(sn,ur=xn(sn,Xn,mr)),hn?($n=mr,hr=de||Re.isSubplotConstrained?en[1]:mn(En,$n)):Re.yaHash[En._id]?($n=mr,hr=en[1]*En._length/_e._length):Re.xaHash[En._id]?($n=Xn,hr=fe==="ew"?-en[0]*En._length/xe._length:mn(En,$n,{e:"right",w:"left"}[fe])):hr=jn(En,$n=xn(En,Xn,mr)),ur||$n){ur||(ur=1),$n||($n=1);var An=sn._offset-lr/ur,Tn=En._offset-hr/$n;on.clipRect.call(r.setTranslate,lr,hr).call(r.setScale,ur,$n),on.plot.call(r.setTranslate,An,Tn).call(r.setScale,1/ur,1/$n),ur===on.xScaleFactor&&$n===on.yScaleFactor||(r.setPointGroupScale(on.zoomScalePts,ur,$n),r.setTextPointsScale(on.zoomScaleTxt,ur,$n)),r.hideOutsideRangePoints(on.clipOnAxisFalseTraces,on),on.xScaleFactor=ur,on.yScaleFactor=$n}}}}function xn(en,vn,on){return en.fixedrange?0:ze&&Pe.xaHash[en._id]?vn:He&&(Pe.isSubplotConstrained?Pe.xaHash:Pe.yaHash)[en._id]?on:0}function jn(en,vn){return vn?(en.range=en._r.slice(),_(en,vn),mn(en,vn)):0}function mn(en,vn,on){return en._length*(1-vn)*v[on||en.constraintoward||"middle"]}return de.length*Ce.length!=1&&ne(Nt,function(en){if(ie._context._scrollZoom.cartesian||ie._fullLayout._enablescrollzoom){if(gt(),ie._transitioningWithDuration)return en.preventDefault(),void en.stopPropagation();Et(),clearTimeout(Mt);var vn=-en.deltaY;if(isFinite(vn)||(vn=en.wheelDelta/10),isFinite(vn)){var on,sn=Math.exp(-Math.min(Math.max(vn,-20),20)/200),En=Ut.draglayer.select(".nsewdrag").node().getBoundingClientRect(),kn=(en.clientX-En.left)/En.width,zn=(En.bottom-en.clientY)/En.height;if(ze){for(Ce||(kn=.5),on=0;on<$.length;on++)Fn($[on],kn,sn);qt("x"),vt[2]*=sn,vt[0]+=vt[2]*kn*(1/sn-1)}if(He){for(de||(zn=.5),on=0;on<oe.length;on++)Fn(oe[on],zn,sn);qt("y"),vt[3]*=sn,vt[1]+=vt[3]*(1-zn)*(1/sn-1)}nn(vt),Yt(),ie.emit("plotly_relayouting",ot),Mt=setTimeout(function(){ie._fullLayout&&(vt=[0,0,ke,De],pn())},It),en.preventDefault()}else k.log("Did not find wheel motion attributes: ",en)}function Fn(Bn,er,Xn){if(!Bn.fixedrange){var mr=k.simpleMap(Bn.range,Bn.r2l),ur=mr[0]+(mr[1]-mr[0])*er;Bn.range=mr.map(function($n){return Bn.l2r(ur+($n-ur)*Xn)})}}}),Nt},makeDragger:I,makeRectDragger:N,makeZoombox:U,makeCorners:j,updateZoombox:J,xyCorners:W,transitionZoombox:X,removeZoombox:Z,showDoubleClickNotifier:Y,attachWheelEventHandler:ne}},4305:function(K,z,e){var S=e(39898),k=e(30211),l=e(28569),T=e(6964),b=e(29323).makeDragBox,d=e(85555).DRAGGERSIZE;z.initInteractions=function(s){var t=s._fullLayout;if(s._context.staticPlot)S.select(s).selectAll(".drag").remove();else if(t._has("cartesian")||t._has("splom")){Object.keys(t._plots||{}).sort(function(r,n){if((t._plots[r].mainplot&&!0)===(t._plots[n].mainplot&&!0)){var a=r.split("y"),i=n.split("y");return a[0]===i[0]?Number(a[1]||1)-Number(i[1]||1):Number(a[0]||1)-Number(i[0]||1)}return t._plots[r].mainplot?1:-1}).forEach(function(r){var n=t._plots[r],a=n.xaxis,i=n.yaxis;if(!n.mainplot){var u=b(s,n,a._offset,i._offset,a._length,i._length,"ns","ew");u.onmousemove=function(x){s._fullLayout._rehover=function(){s._fullLayout._hoversubplot===r&&s._fullLayout._plots[r]&&k.hover(s,x,r)},k.hover(s,x,r),s._fullLayout._lasthover=u,s._fullLayout._hoversubplot=r},u.onmouseout=function(x){s._dragging||(s._fullLayout._hoversubplot=null,l.unhover(s,x))},s._context.showAxisDragHandles&&(b(s,n,a._offset-d,i._offset-d,d,d,"n","w"),b(s,n,a._offset+a._length,i._offset-d,d,d,"n","e"),b(s,n,a._offset-d,i._offset+i._length,d,d,"s","w"),b(s,n,a._offset+a._length,i._offset+i._length,d,d,"s","e"))}if(s._context.showAxisDragHandles){if(r===a._mainSubplot){var h=a._mainLinePosition;a.side==="top"&&(h-=d),b(s,n,a._offset+.1*a._length,h,.8*a._length,d,"","ew"),b(s,n,a._offset,h,.1*a._length,d,"","w"),b(s,n,a._offset+.9*a._length,h,.1*a._length,d,"","e")}if(r===i._mainSubplot){var f=i._mainLinePosition;i.side!=="right"&&(f-=d),b(s,n,f,i._offset+.1*i._length,d,.8*i._length,"ns",""),b(s,n,f,i._offset+.9*i._length,d,.1*i._length,"s",""),b(s,n,f,i._offset,d,.1*i._length,"n","")}}});var o=t._hoverlayer.node();o.onmousemove=function(r){r.target=s._fullLayout._lasthover,k.hover(s,r,t._hoversubplot)},o.onclick=function(r){r.target=s._fullLayout._lasthover,k.click(s,r)},o.onmousedown=function(r){s._fullLayout._lasthover.onmousedown(r)},z.updateFx(s)}},z.updateFx=function(s){var t=s._fullLayout,o=t.dragmode==="pan"?"move":"crosshair";T(t._draggers,o)}},76325:function(K,z,e){var S=e(73972),k=e(71828),l=e(41675);K.exports=function(T){return function(b,d){var s=b[T];if(Array.isArray(s))for(var t=S.subplotsRegistry.cartesian,o=t.idRegex,r=d._subplots,n=r.xaxis,a=r.yaxis,i=r.cartesian,u=d._has("cartesian")||d._has("gl2d"),h=0;h<s.length;h++){var f=s[h];if(k.isPlainObject(f)){var x=l.cleanId(f.xref,"x",!1),v=l.cleanId(f.yref,"y",!1),g=o.x.test(x),y=o.y.test(v);if(g||y){u||k.pushUnique(d._basePlotModules,t);var p=!1;g&&n.indexOf(x)===-1&&(n.push(x),p=!0),y&&a.indexOf(v)===-1&&(a.push(v),p=!0),p&&g&&y&&i.push(x+v)}}}}}},93612:function(K,z,e){var S=e(39898),k=e(73972),l=e(71828),T=e(74875),b=e(91424),d=e(27659).a0,s=e(41675),t=e(85555),o=e(77922),r=l.ensureSingle;function n(f,x,v){return l.ensureSingle(f,x,v,function(g){g.datum(v)})}function a(f,x,v,g,y){for(var p,m,w,c=t.traceLayerClasses,M=f._fullLayout,_=M._modules,E=[],L=[],C=0;C<_.length;C++){var O=(p=_[C]).name,I=k.modules[O].categories;if(I.svg){var N=p.layerName||O+"layer",R=p.plot;w=(m=d(v,R))[0],v=m[1],w.length&&E.push({i:c.indexOf(N),className:N,plotMethod:R,cdModule:w}),I.zoomScale&&L.push("."+N)}}E.sort(function(D,U){return D.i-U.i});var V=x.plot.selectAll("g.mlayer").data(E,function(D){return D.className});if(V.enter().append("g").attr("class",function(D){return D.className}).classed("mlayer",!0).classed("rangeplot",x.isRangePlot),V.exit().remove(),V.order(),V.each(function(D){var U=S.select(this),j=D.className;D.plotMethod(f,x,D.cdModule,U,g,y),t.clipOnAxisFalseQuery.indexOf("."+j)===-1&&b.setClipUrl(U,x.layerClipId,f)}),M._has("scattergl")&&(p=k.getModule("scattergl"),w=d(v,p)[0],p.plot(f,x,w)),!f._context.staticPlot&&(x._hasClipOnAxisFalse&&(x.clipOnAxisFalseTraces=x.plot.selectAll(t.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),L.length)){var F=x.plot.selectAll(L.join(",")).selectAll(".trace");x.zoomScalePts=F.selectAll("path.point"),x.zoomScaleTxt=F.selectAll(".textpoint")}}function i(f,x){var v=x.plotgroup,g=x.id,y=t.layerValue2layerClass[x.xaxis.layer],p=t.layerValue2layerClass[x.yaxis.layer],m=f._fullLayout._hasOnlyLargeSploms;if(x.mainplot){var w=x.mainplotinfo,c=w.plotgroup,M=g+"-x",_=g+"-y";x.minorGridlayer=w.minorGridlayer,x.gridlayer=w.gridlayer,x.zerolinelayer=w.zerolinelayer,r(w.overlinesBelow,"path",M),r(w.overlinesBelow,"path",_),r(w.overaxesBelow,"g",M),r(w.overaxesBelow,"g",_),x.plot=r(w.overplot,"g",g),r(w.overlinesAbove,"path",M),r(w.overlinesAbove,"path",_),r(w.overaxesAbove,"g",M),r(w.overaxesAbove,"g",_),x.xlines=c.select(".overlines-"+y).select("."+M),x.ylines=c.select(".overlines-"+p).select("."+_),x.xaxislayer=c.select(".overaxes-"+y).select("."+M),x.yaxislayer=c.select(".overaxes-"+p).select("."+_)}else if(m)x.xlines=r(v,"path","xlines-above"),x.ylines=r(v,"path","ylines-above"),x.xaxislayer=r(v,"g","xaxislayer-above"),x.yaxislayer=r(v,"g","yaxislayer-above");else{var E=r(v,"g","layer-subplot");x.shapelayer=r(E,"g","shapelayer"),x.imagelayer=r(E,"g","imagelayer"),x.minorGridlayer=r(v,"g","minor-gridlayer"),x.gridlayer=r(v,"g","gridlayer"),x.zerolinelayer=r(v,"g","zerolinelayer"),r(v,"path","xlines-below"),r(v,"path","ylines-below"),x.overlinesBelow=r(v,"g","overlines-below"),r(v,"g","xaxislayer-below"),r(v,"g","yaxislayer-below"),x.overaxesBelow=r(v,"g","overaxes-below"),x.plot=r(v,"g","plot"),x.overplot=r(v,"g","overplot"),x.xlines=r(v,"path","xlines-above"),x.ylines=r(v,"path","ylines-above"),x.overlinesAbove=r(v,"g","overlines-above"),r(v,"g","xaxislayer-above"),r(v,"g","yaxislayer-above"),x.overaxesAbove=r(v,"g","overaxes-above"),x.xlines=v.select(".xlines-"+y),x.ylines=v.select(".ylines-"+p),x.xaxislayer=v.select(".xaxislayer-"+y),x.yaxislayer=v.select(".yaxislayer-"+p)}m||(n(x.minorGridlayer,"g",x.xaxis._id),n(x.minorGridlayer,"g",x.yaxis._id),x.minorGridlayer.selectAll("g").map(function(L){return L[0]}).sort(s.idSort),n(x.gridlayer,"g",x.xaxis._id),n(x.gridlayer,"g",x.yaxis._id),x.gridlayer.selectAll("g").map(function(L){return L[0]}).sort(s.idSort)),x.xlines.style("fill","none").classed("crisp",!0),x.ylines.style("fill","none").classed("crisp",!0)}function u(f,x){if(f){var v={};for(var g in f.each(function(w){var c=w[0];S.select(this).remove(),h(c,x),v[c]=!0}),x._plots)for(var y=x._plots[g].overlays||[],p=0;p<y.length;p++){var m=y[p];v[m.id]&&m.plot.selectAll(".trace").remove()}}}function h(f,x){x._draggers.selectAll("g."+f).remove(),x._defs.select("#clip"+x._uid+f+"plot").remove()}z.name="cartesian",z.attr=["xaxis","yaxis"],z.idRoot=["x","y"],z.idRegex=t.idRegex,z.attrRegex=t.attrRegex,z.attributes=e(89502),z.layoutAttributes=e(13838),z.supplyLayoutDefaults=e(86763),z.transitionAxes=e(66847),z.finalizeSubplots=function(f,x){var v,g,y,p=x._subplots,m=p.xaxis,w=p.yaxis,c=p.cartesian,M=c.concat(p.gl2d||[]),_={},E={};for(v=0;v<M.length;v++){var L=M[v].split("y");_[L[0]]=1,E["y"+L[1]]=1}for(v=0;v<m.length;v++)_[g=m[v]]||(y=(f[s.id2name(g)]||{}).anchor,t.idRegex.y.test(y)||(y="y"),c.push(g+y),M.push(g+y),E[y]||(E[y]=1,l.pushUnique(w,y)));for(v=0;v<w.length;v++)E[y=w[v]]||(g=(f[s.id2name(y)]||{}).anchor,t.idRegex.x.test(g)||(g="x"),c.push(g+y),M.push(g+y),_[g]||(_[g]=1,l.pushUnique(m,g)));if(!M.length){for(var C in g="",y="",f)t.attrRegex.test(C)&&(C.charAt(0)==="x"?(!g||+C.substr(5)<+g.substr(5))&&(g=C):(!y||+C.substr(5)<+y.substr(5))&&(y=C));g=g?s.name2id(g):"x",y=y?s.name2id(y):"y",m.push(g),w.push(y),c.push(g+y)}},z.plot=function(f,x,v,g){var y,p=f._fullLayout,m=p._subplots.cartesian,w=f.calcdata;if(!Array.isArray(x))for(x=[],y=0;y<w.length;y++)x.push(y);for(y=0;y<m.length;y++){for(var c,M=m[y],_=p._plots[M],E=[],L=0;L<w.length;L++){var C=w[L],O=C[0].trace;O.xaxis+O.yaxis===M&&((x.indexOf(O.index)!==-1||O.carpet)&&(c&&c[0].trace.xaxis+c[0].trace.yaxis===M&&["tonextx","tonexty","tonext"].indexOf(O.fill)!==-1&&E.indexOf(c)===-1&&E.push(c),E.push(C)),c=C)}a(f,_,E,v,g)}},z.clean=function(f,x,v,g){var y,p,m,w=g._plots||{},c=x._plots||{},M=g._subplots||{};if(g._hasOnlyLargeSploms&&!x._hasOnlyLargeSploms)for(m in w)(y=w[m]).plotgroup&&y.plotgroup.remove();var _=g._has&&g._has("gl"),E=x._has&&x._has("gl");if(_&&!E)for(m in w)(y=w[m])._scene&&y._scene.destroy();if(M.xaxis&&M.yaxis){var L=s.listIds({_fullLayout:g});for(p=0;p<L.length;p++){var C=L[p];x[s.id2name(C)]||g._infolayer.selectAll(".g-"+C+"title").remove()}}var O=g._has&&g._has("cartesian"),I=x._has&&x._has("cartesian");if(O&&!I)u(g._cartesianlayer.selectAll(".subplot"),g),g._defs.selectAll(".axesclip").remove(),delete g._axisConstraintGroups,delete g._axisMatchGroups;else if(M.cartesian)for(p=0;p<M.cartesian.length;p++){var N=M.cartesian[p];if(!c[N]){var R="."+N+",."+N+"-x,."+N+"-y";g._cartesianlayer.selectAll(R).remove(),h(N,g)}}},z.drawFramework=function(f){var x=f._fullLayout,v=function(y){var p,m,w,c,M,_,E=y._fullLayout,L=E._subplots.cartesian,C=L.length,O=[],I=[];for(p=0;p<C;p++){w=L[p],M=(c=E._plots[w]).xaxis,_=c.yaxis;var N=M._mainAxis,R=_._mainAxis,V=N._id+R._id,F=E._plots[V];c.overlays=[],V!==w&&F?(c.mainplot=V,c.mainplotinfo=F,I.push(w)):(c.mainplot=void 0,c.mainplotinfo=void 0,O.push(w))}for(p=0;p<I.length;p++)w=I[p],(c=E._plots[w]).mainplotinfo.overlays.push(c);var D=O.concat(I),U=new Array(C);for(p=0;p<C;p++){w=D[p],M=(c=E._plots[w]).xaxis,_=c.yaxis;var j=[w,M.layer,_.layer,M.overlaying||"",_.overlaying||""];for(m=0;m<c.overlays.length;m++)j.push(c.overlays[m].id);U[p]=j}return U}(f),g=x._cartesianlayer.selectAll(".subplot").data(v,String);g.enter().append("g").attr("class",function(y){return"subplot "+y[0]}),g.order(),g.exit().call(u,x),g.each(function(y){var p=y[0],m=x._plots[p];m.plotgroup=S.select(this),i(f,m),m.draglayer=r(x._draggers,"g",p)})},z.rangePlot=function(f,x,v){i(f,x),a(f,x,v),T.style(f)},z.toSVG=function(f){var x=f._fullLayout._glimages,v=S.select(f).selectAll(".svg-container");v.filter(function(g,y){return y===v.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var g=this,y=g.toDataURL("image/png");x.append("svg:image").attr({xmlns:o.svg,"xlink:href":y,preserveAspectRatio:"none",x:0,y:0,width:g.style.width,height:g.style.height})})},z.updateFx=e(4305).updateFx},13838:function(K,z,e){var S=e(41940),k=e(22399),l=e(79952).P,T=e(1426).extendFlat,b=e(44467).templatedArray,d=e(12663).descriptionWithDates,s=e(50606).ONEDAY,t=e(85555),o=t.HOUR_PATTERN,r=t.WEEKDAY_PATTERN,n={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},a=T({},n,{values:n.values.slice().concat(["sync"])});function i(M){return{valType:"integer",min:0,dflt:M?5:0,editType:"ticks"}}var u={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},h={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},f={valType:"data_array",editType:"ticks"},x={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function v(M){var _={valType:"number",min:0,editType:"ticks"};return M||(_.dflt=5),_}function g(M){var _={valType:"number",min:0,editType:"ticks"};return M||(_.dflt=1),_}var y={valType:"color",dflt:k.defaultLine,editType:"ticks"},p={valType:"color",dflt:k.lightLine,editType:"ticks"};function m(M){var _={valType:"number",min:0,editType:"ticks"};return M||(_.dflt=1),_}var w=T({},l,{editType:"ticks"}),c={valType:"boolean",editType:"ticks"};K.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:k.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:S({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"calc"},rangebreaks:b("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[r,o,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:s},editType:"calc"}),tickmode:a,nticks:i(),tick0:u,dtick:h,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:f,ticktext:{valType:"data_array",editType:"ticks"},ticks:x,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:v(),tickwidth:g(),tickcolor:y,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:T({},l,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:S({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:d("tick label")},tickformatstops:b("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:d("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:c,gridcolor:p,gridwidth:m(),griddash:w,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},minor:{tickmode:n,nticks:i("minor"),tick0:u,dtick:h,tickvals:f,ticks:x,ticklen:v("minor"),tickwidth:g("minor"),tickcolor:y,gridcolor:p,gridwidth:m("minor"),griddash:w,showgrid:c,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:S({editType:"ticks"})}}},86763:function(K,z,e){var S=e(71828),k=e(7901),l=e(23469).isUnifiedHover,T=e(98212),b=e(44467),d=e(10820),s=e(13838),t=e(951),o=e(71453),r=e(99082),n=e(52830),a=e(41675),i=a.id2name,u=a.name2id,h=e(85555).AX_ID_PATTERN,f=e(73972),x=f.traceIs,v=f.getComponentMethod;function g(y,p,m){Array.isArray(y[p])?y[p].push(m):y[p]=[m]}K.exports=function(y,p,m){var w,c,M=p.autotypenumbers,_={},E={},L={},C={},O={},I={},N={},R={},V={},F={};for(w=0;w<m.length;w++){var D=m[w];if(x(D,"cartesian")||x(D,"gl2d")){var U,j;if(D.xaxis)U=i(D.xaxis),g(_,U,D);else if(D.xaxes)for(c=0;c<D.xaxes.length;c++)g(_,i(D.xaxes[c]),D);if(D.yaxis)j=i(D.yaxis),g(_,j,D);else if(D.yaxes)for(c=0;c<D.yaxes.length;c++)g(_,i(D.yaxes[c]),D);D.type==="funnel"?D.orientation==="h"?(U&&(E[U]=!0),j&&(N[j]=!0)):j&&(L[j]=!0):D.type==="image"?(j&&(R[j]=!0),U&&(R[U]=!0)):(j&&(O[j]=!0,I[j]=!0),x(D,"carpet")&&(D.type!=="carpet"||D._cheater)||U&&(C[U]=!0)),D.type==="carpet"&&D._cheater&&U&&(E[U]=!0),x(D,"2dMap")&&(V[U]=!0,V[j]=!0),x(D,"oriented")&&(F[D.orientation==="h"?j:U]=!0)}}var J=p._subplots,X=J.xaxis,Z=J.yaxis,Y=S.simpleMap(X,i),W=S.simpleMap(Z,i),Q=Y.concat(W),ne=k.background;X.length&&Z.length&&(ne=S.coerce(y,p,d,"plot_bgcolor"));var re,ie,se,ge,ue,ce=k.combine(ne,p.paper_bgcolor);function le(){var Pt=_[re]||[];ue._traceIndices=Pt.map(function(Et){return Et._expandedIndex}),ue._annIndices=[],ue._shapeIndices=[],ue._selectionIndices=[],ue._imgIndices=[],ue._subplotsWith=[],ue._counterAxes=[],ue._name=ue._attr=re,ue._id=ie}function de(Pt,Et){return S.coerce(ge,ue,s,Pt,Et)}function Ce(Pt,Et){return S.coerce2(ge,ue,s,Pt,Et)}function xe(Pt){return Pt==="x"?Z:X}function _e(Pt,Et){for(var Ot=Pt==="x"?Y:W,Nt=[],zt=0;zt<Ot.length;zt++){var Ze=Ot[zt];Ze===Et||(y[Ze]||{}).overlaying||Nt.push(u(Ze))}return Nt}var we={x:xe("x"),y:xe("y")},Ae=we.x.concat(we.y),$={},oe=[];function pe(){var Pt=ge.matches;h.test(Pt)&&Ae.indexOf(Pt)===-1&&($[Pt]=ge.type,oe=Object.keys($))}var ye=T(y,p),ke=l(ye);for(w=0;w<Q.length;w++){re=Q[w],ie=u(re),se=re.charAt(0),S.isPlainObject(y[re])||(y[re]={}),ge=y[re],ue=b.newContainer(p,re,se+"axis"),le();var De=se==="x"&&!C[re]&&E[re]||se==="y"&&!O[re]&&L[re],Pe=se==="y"&&(!I[re]&&N[re]||R[re]),Re={hasMinor:!0,letter:se,font:p.font,outerTicks:V[re],showGrid:!F[re],data:_[re]||[],bgColor:ce,calendar:p.calendar,automargin:!0,visibleDflt:De,reverseDflt:Pe,autotypenumbersDflt:M,splomStash:((p._splomAxes||{})[se]||{})[ie]};de("uirevision",p.uirevision),t(ge,ue,de,Re),o(ge,ue,de,Re,p);var fe=ke&&se===ye.charAt(0),ve=Ce("spikecolor",ke?ue.color:void 0),Te=Ce("spikethickness",ke?1.5:void 0),ze=Ce("spikedash",ke?"dot":void 0),He=Ce("spikemode",ke?"across":void 0),Ve=Ce("spikesnap");de("showspikes",!!(fe||ve||Te||ze||He||Ve))||(delete ue.spikecolor,delete ue.spikethickness,delete ue.spikedash,delete ue.spikemode,delete ue.spikesnap);var nt=i(ge.overlaying),tt=[0,1];if(p[nt]!==void 0){var ot=i(p[nt].anchor);p[ot]!==void 0&&(tt=p[ot].domain)}n(ge,ue,de,{letter:se,counterAxes:we[se],overlayableAxes:_e(se,re),grid:p.grid,overlayingDomain:tt}),de("title.standoff"),pe(),ue._input=ge}for(w=0;w<oe.length;){ie=oe[w++],se=(re=i(ie)).charAt(0),S.isPlainObject(y[re])||(y[re]={}),ge=y[re],ue=b.newContainer(p,re,se+"axis"),le();var pt={letter:se,font:p.font,outerTicks:V[re],showGrid:!F[re],data:[],bgColor:ce,calendar:p.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:M,splomStash:((p._splomAxes||{})[se]||{})[ie]};de("uirevision",p.uirevision),ue.type=$[ie]||"linear",o(ge,ue,de,pt,p),n(ge,ue,de,{letter:se,counterAxes:we[se],overlayableAxes:_e(se,re),grid:p.grid}),de("fixedrange"),pe(),ue._input=ge}var Tt=v("rangeslider","handleDefaults"),yt=v("rangeselector","handleDefaults");for(w=0;w<Y.length;w++)re=Y[w],ge=y[re],ue=p[re],Tt(y,p,re),ue.type==="date"&&yt(ge,ue,p,W,ue.calendar),de("fixedrange");for(w=0;w<W.length;w++){re=W[w],ge=y[re],ue=p[re];var dt=p[i(ue.anchor)];de("fixedrange",v("rangeslider","isVisible")(dt))}r.handleDefaults(y,p,{axIds:Ae.concat(oe).sort(a.idSort),axHasImage:R})}},92128:function(K,z,e){var S=e(84267).mix,k=e(22399),l=e(71828);K.exports=function(T,b,d,s){var t=(s=s||{}).dfltColor;function o(y,p){return l.coerce2(T,b,s.attributes,y,p)}var r=o("linecolor",t),n=o("linewidth");d("showline",s.showLine||!!r||!!n)||(delete b.linecolor,delete b.linewidth);var a=o("gridcolor",S(t,s.bgColor,s.blend||k.lightFraction).toRgbString()),i=o("gridwidth"),u=o("griddash");if(d("showgrid",s.showGrid||!!a||!!i||!!u)||(delete b.gridcolor,delete b.gridwidth,delete b.griddash),s.hasMinor){var h=o("minor.gridcolor",S(b.gridcolor,s.bgColor,67).toRgbString()),f=o("minor.gridwidth",b.gridwidth||1),x=o("minor.griddash",b.griddash||"solid");d("minor.showgrid",!!h||!!f||!!x)||(delete b.minor.gridcolor,delete b.minor.gridwidth,delete b.minor.griddash)}if(!s.noZeroLine){var v=o("zerolinecolor",t),g=o("zerolinewidth");d("zeroline",s.showGrid||!!v||!!g)||(delete b.zerolinecolor,delete b.zerolinewidth)}}},52830:function(K,z,e){var S=e(92770),k=e(71828);K.exports=function(l,T,b,d){var s,t,o,r,n,a,i=d.counterAxes||[],u=d.overlayableAxes||[],h=d.letter,f=d.grid,x=d.overlayingDomain;f&&(t=f._domains[h][f._axisMap[T._id]],s=f._anchors[T._id],t&&(o=f[h+"side"].split(" ")[0],r=f.domain[h][o==="right"||o==="top"?1:0])),t=t||[0,1],s=s||(S(l.position)?"free":i[0]||"free"),o=o||(h==="x"?"bottom":"left"),r=r||0,n=0,a=!1;var v=k.coerce(l,T,{anchor:{valType:"enumerated",values:["free"].concat(i),dflt:s}},"anchor"),g=k.coerce(l,T,{side:{valType:"enumerated",values:h==="x"?["bottom","top"]:["left","right"],dflt:o}},"side");v==="free"&&(h==="y"&&(b("autoshift")&&(r=g==="left"?x[0]:x[1],a=!T.automargin||T.automargin,n=g==="left"?-3:3),b("shift",n)),b("position",r)),b("automargin",a);var y=!1;if(u.length&&(y=k.coerce(l,T,{overlaying:{valType:"enumerated",values:[!1].concat(u),dflt:!1}},"overlaying")),!y){var p=b("domain",t);p[0]>p[1]-.000244140625&&(T.domain=t),k.noneOrAll(l.domain,T.domain,t),T.tickmode==="sync"&&(T.tickmode="auto")}return b("layer"),T}},89426:function(K,z,e){var S=e(59652);K.exports=function(k,l,T,b,d){d||(d={});var s=d.tickSuffixDflt,t=S(k);T("tickprefix")&&T("showtickprefix",t),T("ticksuffix",s)&&T("showticksuffix",t)}},42449:function(K,z,e){var S=e(18783).FROM_BL;K.exports=function(k,l,T){T===void 0&&(T=S[k.constraintoward||"center"]);var b=[k.r2l(k.range[0]),k.r2l(k.range[1])],d=b[0]+(b[1]-b[0])*T;k.range=k._input.range=[k.l2r(d+(b[0]-d)*l),k.l2r(d+(b[1]-d)*l)],k.setScale()}},21994:function(K,z,e){var S=e(39898),k=e(84096).g0,l=e(71828),T=l.numberFormat,b=e(92770),d=l.cleanNumber,s=l.ms2DateTime,t=l.dateTime2ms,o=l.ensureNumber,r=l.isArrayOrTypedArray,n=e(50606),a=n.FP_SAFE,i=n.BADNUM,u=n.LOG_CLIP,h=n.ONEWEEK,f=n.ONEDAY,x=n.ONEHOUR,v=n.ONEMIN,g=n.ONESEC,y=e(41675),p=e(85555),m=p.HOUR_PATTERN,w=p.WEEKDAY_PATTERN;function c(_){return Math.pow(10,_)}function M(_){return _!=null}K.exports=function(_,E){E=E||{};var L=_._id||"x",C=L.charAt(0);function O(Q,ne){if(Q>0)return Math.log(Q)/Math.LN10;if(Q<=0&&ne&&_.range&&_.range.length===2){var re=_.range[0],ie=_.range[1];return .5*(re+ie-2*u*Math.abs(re-ie))}return i}function I(Q,ne,re,ie){if((ie||{}).msUTC&&b(Q))return+Q;var se=t(Q,re||_.calendar);if(se===i){if(!b(Q))return i;Q=+Q;var ge=Math.floor(10*l.mod(Q+.05,1)),ue=Math.round(Q-ge/10);se=t(new Date(ue))+ge/10}return se}function N(Q,ne,re){return s(Q,ne,re||_.calendar)}function R(Q){return _._categories[Math.round(Q)]}function V(Q){if(M(Q)){if(_._categoriesMap===void 0&&(_._categoriesMap={}),_._categoriesMap[Q]!==void 0)return _._categoriesMap[Q];_._categories.push(typeof Q=="number"?String(Q):Q);var ne=_._categories.length-1;return _._categoriesMap[Q]=ne,ne}return i}function F(Q){if(_._categoriesMap)return _._categoriesMap[Q]}function D(Q){var ne=F(Q);return ne!==void 0?ne:b(Q)?+Q:void 0}function U(Q){return b(Q)?+Q:F(Q)}function j(Q,ne,re){return S.round(re+ne*Q,2)}function J(Q,ne,re){return(Q-re)/ne}var X=function(Q){return b(Q)?j(Q,_._m,_._b):i},Z=function(Q){return J(Q,_._m,_._b)};if(_.rangebreaks){var Y=C==="y";X=function(Q){if(!b(Q))return i;var ne=_._rangebreaks.length;if(!ne)return j(Q,_._m,_._b);var re=Y;_.range[0]>_.range[1]&&(re=!re);for(var ie=re?-1:1,se=ie*Q,ge=0,ue=0;ue<ne;ue++){var ce=ie*_._rangebreaks[ue].min,le=ie*_._rangebreaks[ue].max;if(se<ce)break;if(!(se>le)){ge=se<(ce+le)/2?ue:ue+1;break}ge=ue+1}var de=_._B[ge]||0;return isFinite(de)?j(Q,_._m2,de):0},Z=function(Q){var ne=_._rangebreaks.length;if(!ne)return J(Q,_._m,_._b);for(var re=0,ie=0;ie<ne&&!(Q<_._rangebreaks[ie].pmin);ie++)Q>_._rangebreaks[ie].pmax&&(re=ie+1);return J(Q,_._m2,_._B[re])}}_.c2l=_.type==="log"?O:o,_.l2c=_.type==="log"?c:o,_.l2p=X,_.p2l=Z,_.c2p=_.type==="log"?function(Q,ne){return X(O(Q,ne))}:X,_.p2c=_.type==="log"?function(Q){return c(Z(Q))}:Z,["linear","-"].indexOf(_.type)!==-1?(_.d2r=_.r2d=_.d2c=_.r2c=_.d2l=_.r2l=d,_.c2d=_.c2r=_.l2d=_.l2r=o,_.d2p=_.r2p=function(Q){return _.l2p(d(Q))},_.p2d=_.p2r=Z,_.cleanPos=o):_.type==="log"?(_.d2r=_.d2l=function(Q,ne){return O(d(Q),ne)},_.r2d=_.r2c=function(Q){return c(d(Q))},_.d2c=_.r2l=d,_.c2d=_.l2r=o,_.c2r=O,_.l2d=c,_.d2p=function(Q,ne){return _.l2p(_.d2r(Q,ne))},_.p2d=function(Q){return c(Z(Q))},_.r2p=function(Q){return _.l2p(d(Q))},_.p2r=Z,_.cleanPos=o):_.type==="date"?(_.d2r=_.r2d=l.identity,_.d2c=_.r2c=_.d2l=_.r2l=I,_.c2d=_.c2r=_.l2d=_.l2r=N,_.d2p=_.r2p=function(Q,ne,re){return _.l2p(I(Q,0,re))},_.p2d=_.p2r=function(Q,ne,re){return N(Z(Q),ne,re)},_.cleanPos=function(Q){return l.cleanDate(Q,i,_.calendar)}):_.type==="category"?(_.d2c=_.d2l=V,_.r2d=_.c2d=_.l2d=R,_.d2r=_.d2l_noadd=D,_.r2c=function(Q){var ne=U(Q);return ne!==void 0?ne:_.fraction2r(.5)},_.l2r=_.c2r=o,_.r2l=U,_.d2p=function(Q){return _.l2p(_.r2c(Q))},_.p2d=function(Q){return R(Z(Q))},_.r2p=_.d2p,_.p2r=Z,_.cleanPos=function(Q){return typeof Q=="string"&&Q!==""?Q:o(Q)}):_.type==="multicategory"&&(_.r2d=_.c2d=_.l2d=R,_.d2r=_.d2l_noadd=D,_.r2c=function(Q){var ne=D(Q);return ne!==void 0?ne:_.fraction2r(.5)},_.r2c_just_indices=F,_.l2r=_.c2r=o,_.r2l=D,_.d2p=function(Q){return _.l2p(_.r2c(Q))},_.p2d=function(Q){return R(Z(Q))},_.r2p=_.d2p,_.p2r=Z,_.cleanPos=function(Q){return Array.isArray(Q)||typeof Q=="string"&&Q!==""?Q:o(Q)},_.setupMultiCategory=function(Q){var ne,re,ie=_._traceIndices,se=_._matchGroup;if(se&&_._categories.length===0){for(var ge in se)if(ge!==L){var ue=E[y.id2name(ge)];ie=ie.concat(ue._traceIndices)}}var ce=[[0,{}],[0,{}]],le=[];for(ne=0;ne<ie.length;ne++){var de=Q[ie[ne]];if(C in de){var Ce=de[C],xe=de._length||l.minRowLength(Ce);if(r(Ce[0])&&r(Ce[1]))for(re=0;re<xe;re++){var _e=Ce[0][re],we=Ce[1][re];M(_e)&&M(we)&&(le.push([_e,we]),_e in ce[0][1]||(ce[0][1][_e]=ce[0][0]++),we in ce[1][1]||(ce[1][1][we]=ce[1][0]++))}}}for(le.sort(function(Ae,$){var oe=ce[0][1],pe=oe[Ae[0]]-oe[$[0]];if(pe)return pe;var ye=ce[1][1];return ye[Ae[1]]-ye[$[1]]}),ne=0;ne<le.length;ne++)V(le[ne])}),_.fraction2r=function(Q){var ne=_.r2l(_.range[0]),re=_.r2l(_.range[1]);return _.l2r(ne+Q*(re-ne))},_.r2fraction=function(Q){var ne=_.r2l(_.range[0]),re=_.r2l(_.range[1]);return(_.r2l(Q)-ne)/(re-ne)},_.cleanRange=function(Q,ne){ne||(ne={}),Q||(Q="range");var re,ie,se=l.nestedProperty(_,Q).get();if(ie=(ie=_.type==="date"?l.dfltRange(_.calendar):C==="y"?p.DFLTRANGEY:_._name==="realaxis"?[0,1]:ne.dfltRange||p.DFLTRANGEX).slice(),_.rangemode!=="tozero"&&_.rangemode!=="nonnegative"||(ie[0]=0),se&&se.length===2)for(_.type!=="date"||_.autorange||(se[0]=l.cleanDate(se[0],i,_.calendar),se[1]=l.cleanDate(se[1],i,_.calendar)),re=0;re<2;re++)if(_.type==="date"){if(!l.isDateTime(se[re],_.calendar)){_[Q]=ie;break}if(_.r2l(se[0])===_.r2l(se[1])){var ge=l.constrain(_.r2l(se[0]),l.MIN_MS+1e3,l.MAX_MS-1e3);se[0]=_.l2r(ge-1e3),se[1]=_.l2r(ge+1e3);break}}else{if(!b(se[re])){if(!b(se[1-re])){_[Q]=ie;break}se[re]=se[1-re]*(re?10:.1)}if(se[re]<-a?se[re]=-a:se[re]>a&&(se[re]=a),se[0]===se[1]){var ue=Math.max(1,Math.abs(1e-6*se[0]));se[0]-=ue,se[1]+=ue}}else l.nestedProperty(_,Q).set(ie)},_.setScale=function(Q){var ne=E._size;if(_.overlaying){var re=y.getFromId({_fullLayout:E},_.overlaying);_.domain=re.domain}var ie=Q&&_._r?"_r":"range",se=_.calendar;_.cleanRange(ie);var ge,ue,ce=_.r2l(_[ie][0],se),le=_.r2l(_[ie][1],se),de=C==="y";if(de?(_._offset=ne.t+(1-_.domain[1])*ne.h,_._length=ne.h*(_.domain[1]-_.domain[0]),_._m=_._length/(ce-le),_._b=-_._m*le):(_._offset=ne.l+_.domain[0]*ne.w,_._length=ne.w*(_.domain[1]-_.domain[0]),_._m=_._length/(le-ce),_._b=-_._m*ce),_._rangebreaks=[],_._lBreaks=0,_._m2=0,_._B=[],_.rangebreaks&&(_._rangebreaks=_.locateBreaks(Math.min(ce,le),Math.max(ce,le)),_._rangebreaks.length)){for(ge=0;ge<_._rangebreaks.length;ge++)ue=_._rangebreaks[ge],_._lBreaks+=Math.abs(ue.max-ue.min);var Ce=de;ce>le&&(Ce=!Ce),Ce&&_._rangebreaks.reverse();var xe=Ce?-1:1;for(_._m2=xe*_._length/(Math.abs(le-ce)-_._lBreaks),_._B.push(-_._m2*(de?le:ce)),ge=0;ge<_._rangebreaks.length;ge++)ue=_._rangebreaks[ge],_._B.push(_._B[_._B.length-1]-xe*_._m2*(ue.max-ue.min));for(ge=0;ge<_._rangebreaks.length;ge++)(ue=_._rangebreaks[ge]).pmin=X(ue.min),ue.pmax=X(ue.max)}if(!isFinite(_._m)||!isFinite(_._b)||_._length<0)throw E._replotting=!1,new Error("Something went wrong with axis scaling")},_.maskBreaks=function(Q){var ne,re,ie,se,ge,ue=_.rangebreaks||[];ue._cachedPatterns||(ue._cachedPatterns=ue.map(function(_e){return _e.enabled&&_e.bounds?l.simpleMap(_e.bounds,_e.pattern?d:_.d2c):null})),ue._cachedValues||(ue._cachedValues=ue.map(function(_e){return _e.enabled&&_e.values?l.simpleMap(_e.values,_.d2c).sort(l.sorterAsc):null}));for(var ce=0;ce<ue.length;ce++){var le=ue[ce];if(le.enabled){if(le.bounds){var de=le.pattern;switch(re=(ne=ue._cachedPatterns[ce])[0],ie=ne[1],de){case w:se=(ge=new Date(Q)).getUTCDay(),re>ie&&(ie+=7,se<re&&(se+=7));break;case m:se=(ge=new Date(Q)).getUTCHours()+(ge.getUTCMinutes()/60+ge.getUTCSeconds()/3600+ge.getUTCMilliseconds()/36e5),re>ie&&(ie+=24,se<re&&(se+=24));break;case"":se=Q}if(se>=re&&se<ie)return i}else for(var Ce=ue._cachedValues[ce],xe=0;xe<Ce.length;xe++)if(ie=(re=Ce[xe])+le.dvalue,Q>=re&&Q<ie)return i}}return Q},_.locateBreaks=function(Q,ne){var re,ie,se,ge,ue=[];if(!_.rangebreaks)return ue;var ce=_.rangebreaks.slice().sort(function(ye,ke){return ye.pattern===w&&ke.pattern===m?-1:ke.pattern===w&&ye.pattern===m?1:0}),le=function(ye,ke){if((ye=l.constrain(ye,Q,ne))!==(ke=l.constrain(ke,Q,ne))){for(var De=!0,Pe=0;Pe<ue.length;Pe++){var Re=ue[Pe];ye<Re.max&&ke>=Re.min&&(ye<Re.min&&(Re.min=ye),ke>Re.max&&(Re.max=ke),De=!1)}De&&ue.push({min:ye,max:ke})}};for(re=0;re<ce.length;re++){var de=ce[re];if(de.enabled)if(de.bounds){var Ce=Q,xe=ne;de.pattern&&(Ce=Math.floor(Ce)),se=(ie=l.simpleMap(de.bounds,de.pattern?d:_.r2l))[0],ge=ie[1];var _e,we,Ae=new Date(Ce);switch(de.pattern){case w:we=h,_e=(ge-se+(ge<se?7:0))*f,Ce+=se*f-(Ae.getUTCDay()*f+Ae.getUTCHours()*x+Ae.getUTCMinutes()*v+Ae.getUTCSeconds()*g+Ae.getUTCMilliseconds());break;case m:we=f,_e=(ge-se+(ge<se?24:0))*x,Ce+=se*x-(Ae.getUTCHours()*x+Ae.getUTCMinutes()*v+Ae.getUTCSeconds()*g+Ae.getUTCMilliseconds());break;default:Ce=Math.min(ie[0],ie[1]),_e=we=(xe=Math.max(ie[0],ie[1]))-Ce}for(var $=Ce;$<xe;$+=we)le($,$+_e)}else for(var oe=l.simpleMap(de.values,_.d2c),pe=0;pe<oe.length;pe++)le(se=oe[pe],ge=se+de.dvalue)}return ue.sort(function(ye,ke){return ye.min-ke.min}),ue},_.makeCalcdata=function(Q,ne,re){var ie,se,ge,ue,ce=_.type,le=ce==="date"&&Q[ne+"calendar"];if(ne in Q){if(ie=Q[ne],ue=Q._length||l.minRowLength(ie),l.isTypedArray(ie)&&(ce==="linear"||ce==="log")){if(ue===ie.length)return ie;if(ie.subarray)return ie.subarray(0,ue)}if(ce==="multicategory")return function(xe,_e){for(var we=new Array(_e),Ae=0;Ae<_e;Ae++){var $=(xe[0]||[])[Ae],oe=(xe[1]||[])[Ae];we[Ae]=F([$,oe])}return we}(ie,ue);for(se=new Array(ue),ge=0;ge<ue;ge++)se[ge]=_.d2c(ie[ge],0,le,re)}else{var de=ne+"0"in Q?_.d2c(Q[ne+"0"],0,le):0,Ce=Q["d"+ne]?Number(Q["d"+ne]):1;for(ie=Q[{x:"y",y:"x"}[ne]],ue=Q._length||ie.length,se=new Array(ue),ge=0;ge<ue;ge++)se[ge]=de+ge*Ce}if(_.rangebreaks)for(ge=0;ge<ue;ge++)se[ge]=_.maskBreaks(se[ge]);return se},_.isValidRange=function(Q){return Array.isArray(Q)&&Q.length===2&&b(_.r2l(Q[0]))&&b(_.r2l(Q[1]))},_.isPtWithinRange=function(Q,ne){var re=_.c2l(Q[C],null,ne),ie=_.r2l(_.range[0]),se=_.r2l(_.range[1]);return ie<se?ie<=re&&re<=se:se<=re&&re<=ie},_._emptyCategories=function(){_._categories=[],_._categoriesMap={}},_.clearCalc=function(){var Q=_._matchGroup;if(Q){var ne=null,re=null;for(var ie in Q){var se=E[y.id2name(ie)];if(se._categories){ne=se._categories,re=se._categoriesMap;break}}ne&&re?(_._categories=ne,_._categoriesMap=re):_._emptyCategories()}else _._emptyCategories();if(_._initialCategories)for(var ge=0;ge<_._initialCategories.length;ge++)V(_._initialCategories[ge])},_.sortByInitialCategories=function(){var Q=[];if(_._emptyCategories(),_._initialCategories)for(var ne=0;ne<_._initialCategories.length;ne++)V(_._initialCategories[ne]);Q=Q.concat(_._traceIndices);var re=_._matchGroup;for(var ie in re)if(L!==ie){var se=E[y.id2name(ie)];se._categories=_._categories,se._categoriesMap=_._categoriesMap,Q=Q.concat(se._traceIndices)}return Q};var W=E._d3locale;_.type==="date"&&(_._dateFormat=W?W.timeFormat:k,_._extraFormat=E._extraFormat),_._separators=E.separators,_._numFormat=W?W.numberFormat:T,delete _._minDtick,delete _._forceTick0}},59652:function(K){K.exports=function(z){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(S){return z[S]!==void 0});if(e.every(function(S){return z[S]===z[e[0]]})||e.length===1)return z[e[0]]}},96115:function(K,z,e){var S=e(71828),k=e(7901).contrast,l=e(13838),T=e(59652),b=e(85501);function d(s,t){function o(r,n){return S.coerce(s,t,l.tickformatstops,r,n)}o("enabled")&&(o("dtickrange"),o("value"))}K.exports=function(s,t,o,r,n){n||(n={});var a=o("labelalias");S.isPlainObject(a)||delete t.labelalias;var i=T(s);if(o("showticklabels")){var u=n.font||{},h=t.color,f=(t.ticklabelposition||"").indexOf("inside")!==-1?k(n.bgColor):h&&h!==l.color.dflt?h:u.color;if(S.coerceFont(o,"tickfont",{family:u.family,size:u.size,color:f}),n.noTicklabelstep||r==="multicategory"||r==="log"||o("ticklabelstep"),n.noAng||o("tickangle"),r!=="category"){var x=o("tickformat");b(s,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:d}),t.tickformatstops.length||delete t.tickformatstops,n.noExp||x||r==="date"||(o("showexponent",i),o("exponentformat"),o("minexponent"),o("separatethousands"))}}}},38701:function(K,z,e){var S=e(71828),k=e(13838);K.exports=function(l,T,b,d){var s=d.isMinor,t=s?l.minor||{}:l,o=s?T.minor:T,r=s?k.minor:k,n=s?"minor.":"",a=S.coerce2(t,o,r,"ticklen",s?.6*(T.ticklen||5):void 0),i=S.coerce2(t,o,r,"tickwidth",s?T.tickwidth||1:void 0),u=S.coerce2(t,o,r,"tickcolor",(s?T.tickcolor:void 0)||o.color);b(n+"ticks",!s&&d.outerTicks||a||i||u?"outside":"")||(delete o.ticklen,delete o.tickwidth,delete o.tickcolor)}},26218:function(K,z,e){var S=e(66287),k=e(71828).isArrayOrTypedArray;K.exports=function(l,T,b,d,s){s||(s={});var t=s.isMinor,o=t?l.minor||{}:l,r=t?T.minor:T,n=t?"minor.":"";function a(v){var g=o[v];return g!==void 0?g:(r._template||{})[v]}var i=a("tick0"),u=a("dtick"),h=a("tickvals"),f=b(n+"tickmode",k(h)?"array":u?"linear":"auto");if(f==="auto"||f==="sync")b(n+"nticks");else if(f==="linear"){var x=r.dtick=S.dtick(u,d);r.tick0=S.tick0(i,d,T.calendar,x)}else d!=="multicategory"&&(b(n+"tickvals")===void 0?r.tickmode="auto":t||b("ticktext"))}},66847:function(K,z,e){var S=e(39898),k=e(73972),l=e(71828),T=e(91424),b=e(89298);K.exports=function(d,s,t,o){var r=d._fullLayout;if(s.length!==0){var n,a,i,u;o&&(n=o());var h=S.ease(t.easing);return d._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(u),u=null,function(){for(var v={},g=0;g<s.length;g++){var y=s[g],p=y.plotinfo.xaxis,m=y.plotinfo.yaxis;y.xr0&&(v[p._name+".range"]=y.xr0.slice()),y.yr0&&(v[m._name+".range"]=y.yr0.slice())}return k.call("relayout",d,v).then(function(){for(var w=0;w<s.length;w++)f(s[w].plotinfo)})}()}),a=Date.now(),u=window.requestAnimationFrame(function v(){i=Date.now();for(var g=Math.min(1,(i-a)/t.duration),y=h(g),p=0;p<s.length;p++)x(s[p],y);i-a>t.duration?(function(){for(var m={},w=0;w<s.length;w++){var c=s[w],M=c.plotinfo.xaxis,_=c.plotinfo.yaxis;c.xr1&&(m[M._name+".range"]=c.xr1.slice()),c.yr1&&(m[_._name+".range"]=c.yr1.slice())}n&&n(),k.call("relayout",d,m).then(function(){for(var E=0;E<s.length;E++)f(s[E].plotinfo)})}(),u=window.cancelAnimationFrame(v)):u=window.requestAnimationFrame(v)}),Promise.resolve()}function f(v){var g=v.xaxis,y=v.yaxis;r._defs.select("#"+v.clipId+"> rect").call(T.setTranslate,0,0).call(T.setScale,1,1),v.plot.call(T.setTranslate,g._offset,y._offset).call(T.setScale,1,1);var p=v.plot.selectAll(".scatterlayer .trace");p.selectAll(".point").call(T.setPointGroupScale,1,1),p.selectAll(".textpoint").call(T.setTextPointsScale,1,1),p.call(T.hideOutsideRangePoints,v)}function x(v,g){var y=v.plotinfo,p=y.xaxis,m=y.yaxis,w=p._length,c=m._length,M=!!v.xr1,_=!!v.yr1,E=[];if(M){var L=l.simpleMap(v.xr0,p.r2l),C=l.simpleMap(v.xr1,p.r2l),O=L[1]-L[0],I=C[1]-C[0];E[0]=(L[0]*(1-g)+g*C[0]-L[0])/(L[1]-L[0])*w,E[2]=w*(1-g+g*I/O),p.range[0]=p.l2r(L[0]*(1-g)+g*C[0]),p.range[1]=p.l2r(L[1]*(1-g)+g*C[1])}else E[0]=0,E[2]=w;if(_){var N=l.simpleMap(v.yr0,m.r2l),R=l.simpleMap(v.yr1,m.r2l),V=N[1]-N[0],F=R[1]-R[0];E[1]=(N[1]*(1-g)+g*R[1]-N[1])/(N[0]-N[1])*c,E[3]=c*(1-g+g*F/V),m.range[0]=p.l2r(N[0]*(1-g)+g*R[0]),m.range[1]=m.l2r(N[1]*(1-g)+g*R[1])}else E[1]=0,E[3]=c;b.drawOne(d,p,{skipTitle:!0}),b.drawOne(d,m,{skipTitle:!0}),b.redrawComponents(d,[p._id,m._id]);var D=M?w/E[2]:1,U=_?c/E[3]:1,j=M?E[0]:0,J=_?E[1]:0,X=M?E[0]/E[2]*w:0,Z=_?E[1]/E[3]*c:0,Y=p._offset-X,W=m._offset-Z;y.clipRect.call(T.setTranslate,j,J).call(T.setScale,1/D,1/U),y.plot.call(T.setTranslate,Y,W).call(T.setScale,D,U),T.setPointGroupScale(y.zoomScalePts,1/D,1/U),T.setTextPointsScale(y.zoomScaleTxt,1/D,1/U)}b.redrawComponents(d)}},951:function(K,z,e){var S=e(73972).traceIs,k=e(4322);function l(b){return{v:"x",h:"y"}[b.orientation||"v"]}function T(b,d){var s=l(b),t=S(b,"box-violin"),o=S(b._fullInput||{},"candlestick");return t&&!o&&d===s&&b[s]===void 0&&b[s+"0"]===void 0}K.exports=function(b,d,s,t){s("autotypenumbers",t.autotypenumbersDflt),s("type",(t.splomStash||{}).type)==="-"&&(function(o,r){if(o.type==="-"){var n,a=o._id,i=a.charAt(0);a.indexOf("scene")!==-1&&(a=i);var u=function(m,w,c){for(var M=0;M<m.length;M++){var _=m[M];if(_.type==="splom"&&_._length>0&&(_["_"+c+"axes"]||{})[w]||(_[c+"axis"]||c)===w&&(T(_,c)||(_[c]||[]).length||_[c+"0"]))return _}}(r,a,i);if(u)if(u.type!=="histogram"||i!=={v:"y",h:"x"}[u.orientation||"v"]){var h=i+"calendar",f=u[h],x={noMultiCategory:!S(u,"cartesian")||S(u,"noMultiCategory")};if(u.type==="box"&&u._hasPreCompStats&&i==={h:"x",v:"y"}[u.orientation||"v"]&&(x.noMultiCategory=!0),x.autotypenumbers=o.autotypenumbers,T(u,i)){var v=l(u),g=[];for(n=0;n<r.length;n++){var y=r[n];S(y,"box-violin")&&(y[i+"axis"]||i)===a&&(y[v]!==void 0?g.push(y[v][0]):y.name!==void 0?g.push(y.name):g.push("text"),y[h]!==f&&(f=void 0))}o.type=k(g,f,x)}else if(u.type==="splom"){var p=u.dimensions[u._axesDim[a]];p.visible&&(o.type=k(p.values,f,x))}else o.type=k(u[i]||[u[i+"0"]],f,x)}else o.type="linear"}}(d,t.data),d.type==="-"?d.type="linear":b.type=d.type)}},31137:function(K,z,e){var S=e(73972),k=e(71828);function l(s,t,o){var r,n,a,i=!1;if(t.type==="data")r=s._fullData[t.traces!==null?t.traces[0]:0];else{if(t.type!=="layout")return!1;r=s._fullLayout}return n=k.nestedProperty(r,t.prop).get(),(a=o[t.type]=o[t.type]||{}).hasOwnProperty(t.prop)&&a[t.prop]!==n&&(i=!0),a[t.prop]=n,{changed:i,value:n}}function T(s,t){var o=[],r=t[0],n={};if(typeof r=="string")n[r]=t[1];else{if(!k.isPlainObject(r))return o;n=r}return d(n,function(a,i,u){o.push({type:"layout",prop:a,value:u})},"",0),o}function b(s,t){var o,r,n,a,i=[];if(r=t[0],n=t[1],o=t[2],a={},typeof r=="string")a[r]=n;else{if(!k.isPlainObject(r))return i;a=r,o===void 0&&(o=n)}return o===void 0&&(o=null),d(a,function(u,h,f){var x,v;if(Array.isArray(f)){v=f.slice();var g=Math.min(v.length,s.data.length);o&&(g=Math.min(g,o.length)),x=[];for(var y=0;y<g;y++)x[y]=o?o[y]:y}else v=f,x=o?o.slice():null;if(x===null)Array.isArray(v)&&(v=v[0]);else if(Array.isArray(x)){if(!Array.isArray(v)){var p=v;v=[];for(var m=0;m<x.length;m++)v[m]=p}v.length=Math.min(x.length,v.length)}i.push({type:"data",prop:u,traces:x,value:v})},"",0),i}function d(s,t,o,r){Object.keys(s).forEach(function(n){var a=s[n];if(n[0]!=="_"){var i=o+(r>0?".":"")+n;k.isPlainObject(a)?d(a,t,i,r+1):t(i,n,a)}})}z.manageCommandObserver=function(s,t,o,r){var n={},a=!0;t&&t._commandObserver&&(n=t._commandObserver),n.cache||(n.cache={}),n.lookupTable={};var i=z.hasSimpleAPICommandBindings(s,o,n.lookupTable);if(t&&t._commandObserver){if(i)return n;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,n}if(i){l(s,i,n.cache),n.check=function(){if(a){var f=l(s,i,n.cache);return f.changed&&r&&n.lookupTable[f.value]!==void 0&&(n.disable(),Promise.resolve(r({value:f.value,type:i.type,prop:i.prop,traces:i.traces,index:n.lookupTable[f.value]})).then(n.enable,n.enable)),f.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],h=0;h<u.length;h++)s._internalOn(u[h],n.check);n.remove=function(){for(var f=0;f<u.length;f++)s._removeInternalListener(u[f],n.check)}}else k.log("Unable to automatically bind plot updates to API command"),n.lookupTable={},n.remove=function(){};return n.disable=function(){a=!1},n.enable=function(){a=!0},t&&(t._commandObserver=n),n},z.hasSimpleAPICommandBindings=function(s,t,o){var r,n,a=t.length;for(r=0;r<a;r++){var i,u=t[r],h=u.method,f=u.args;if(Array.isArray(f)||(f=[]),!h)return!1;var x=z.computeAPICommandBindings(s,h,f);if(x.length!==1)return!1;if(n){if((i=x[0]).type!==n.type||i.prop!==n.prop)return!1;if(Array.isArray(n.traces)){if(!Array.isArray(i.traces))return!1;i.traces.sort();for(var v=0;v<n.traces.length;v++)if(n.traces[v]!==i.traces[v])return!1}else if(i.prop!==n.prop)return!1}else n=x[0],Array.isArray(n.traces)&&n.traces.sort();var g=(i=x[0]).value;if(Array.isArray(g)){if(g.length!==1)return!1;g=g[0]}o&&(o[g]=r)}return n},z.executeAPICommand=function(s,t,o){if(t==="skip")return Promise.resolve();var r=S.apiMethodRegistry[t],n=[s];Array.isArray(o)||(o=[]);for(var a=0;a<o.length;a++)n.push(o[a]);return r.apply(null,n).catch(function(i){return k.warn("API call to Plotly."+t+" rejected.",i),Promise.reject(i)})},z.computeAPICommandBindings=function(s,t,o){var r;switch(Array.isArray(o)||(o=[]),t){case"restyle":r=b(s,o);break;case"relayout":r=T(0,o);break;case"update":r=b(s,[o[0],o[2]]).concat(T(0,[o[1]]));break;case"animate":r=function(n,a){return Array.isArray(a[0])&&a[0].length===1&&["string","number"].indexOf(typeof a[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:a[0][0].toString()}]:[]}(0,o);break;default:r=[]}return r}},27670:function(K,z,e){var S=e(1426).extendFlat;z.Y=function(k,l){l=l||{};var T={valType:"info_array",editType:(k=k||{}).editType,items:[{valType:"number",min:0,max:1,editType:k.editType},{valType:"number",min:0,max:1,editType:k.editType}],dflt:[0,1]},b=(k.name&&k.name,k.trace,l.description&&l.description,{x:S({},T,{}),y:S({},T,{}),editType:k.editType});return k.noGridCell||(b.row={valType:"integer",min:0,dflt:0,editType:k.editType},b.column={valType:"integer",min:0,dflt:0,editType:k.editType}),b},z.c=function(k,l,T,b){var d=b&&b.x||[0,1],s=b&&b.y||[0,1],t=l.grid;if(t){var o=T("domain.column");o!==void 0&&(o<t.columns?d=t._domains.x[o]:delete k.domain.column);var r=T("domain.row");r!==void 0&&(r<t.rows?s=t._domains.y[r]:delete k.domain.row)}var n=T("domain.x",d),a=T("domain.y",s);n[0]<n[1]||(k.domain.x=d.slice()),a[0]<a[1]||(k.domain.y=s.slice())}},41940:function(K){K.exports=function(z){var e=z.editType,S=z.colorEditType;S===void 0&&(S=e);var k={family:{valType:"string",noBlank:!0,strict:!0,editType:e},size:{valType:"number",min:1,editType:e},color:{valType:"color",editType:S},editType:e};return z.autoSize&&(k.size.dflt="auto"),z.autoColor&&(k.color.dflt="auto"),z.arrayOk&&(k.family.arrayOk=!0,k.size.arrayOk=!0,k.color.arrayOk=!0),k}},31391:function(K){K.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},78776:function(K,z){z.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},z.axesNames=["lonaxis","lataxis"],z.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},z.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},z.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},z.clipPad=.001,z.precision=.1,z.landColor="#F0DC82",z.waterColor="#3399FF",z.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},z.sphereSVG={type:"Sphere"},z.fillLayers={ocean:1,land:1,lakes:1},z.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},z.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],z.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],z.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},69082:function(K,z,e){var S=e(39898),k=e(27362),l=k.geoPath,T=k.geoDistance,b=e(65704),d=e(73972),s=e(71828),t=s.strTranslate,o=e(7901),r=e(91424),n=e(30211),a=e(74875),i=e(89298),u=e(71739).getAutoRange,h=e(28569),f=e(47322).prepSelect,x=e(47322).clearOutline,v=e(47322).selectOnClick,g=e(74455),y=e(78776),p=e(41327),m=e(90973),w=e(96892).zL;function c(E){this.id=E.id,this.graphDiv=E.graphDiv,this.container=E.container,this.topojsonURL=E.topojsonURL,this.isStatic=E.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var M=c.prototype;function _(E,L){var C=y.clipPad,O=E[0]+C,I=E[1]-C,N=L[0]+C,R=L[1]-C;O>0&&I<0&&(I+=360);var V=(I-O)/4;return{type:"Polygon",coordinates:[[[O,N],[O,R],[O+V,R],[O+2*V,R],[O+3*V,R],[I,R],[I,N],[I-V,N],[I-2*V,N],[I-3*V,N],[O,N]]]}}K.exports=function(E){return new c(E)},M.plot=function(E,L,C,O){var I=this;if(O)return I.update(E,L,!0);I._geoCalcData=E,I._fullLayout=L;var N=L[this.id],R=[],V=!1;for(var F in y.layerNameToAdjective)if(F!=="frame"&&N["show"+F]){V=!0;break}for(var D=!1,U=0;U<E.length;U++){var j=E[0][0].trace;j._geo=I,j.locationmode&&(V=!0);var J=j.marker;if(J){var X=J.angle,Z=J.angleref;(X||Z==="north"||Z==="previous")&&(D=!0)}}if(this._hasMarkerAngles=D,V){var Y=m.getTopojsonName(N);I.topojson!==null&&Y===I.topojsonName||(I.topojsonName=Y,PlotlyGeoAssets.topojson[I.topojsonName]===void 0&&R.push(I.fetchTopojson()))}R=R.concat(p.fetchTraceGeoData(E)),C.push(new Promise(function(W,Q){Promise.all(R).then(function(){I.topojson=PlotlyGeoAssets.topojson[I.topojsonName],I.update(E,L),W()}).catch(Q)}))},M.fetchTopojson=function(){var E=this,L=m.getTopojsonPath(E.topojsonURL,E.topojsonName);return new Promise(function(C,O){S.json(L,function(I,N){if(I)return I.status===404?O(new Error(["plotly.js could not find topojson file at",L+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):O(new Error(["unexpected error while fetching topojson file at",L].join(" ")));PlotlyGeoAssets.topojson[E.topojsonName]=N,C()})})},M.update=function(E,L,C){var O=L[this.id];this.hasChoropleth=!1;for(var I=0;I<E.length;I++){var N=E[I],R=N[0].trace;R.type==="choropleth"&&(this.hasChoropleth=!0),R.visible===!0&&R._length>0&&R._module.calcGeoJSON(N,L)}if(!C){if(this.updateProjection(E,L))return;this.viewInitial&&this.scope===O.scope||this.saveViewInitial(O)}this.scope=O.scope,this.updateBaseLayers(L,O),this.updateDims(L,O),this.updateFx(L,O),a.generalUpdatePerTraceModule(this.graphDiv,this,E,O);var V=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=V.selectAll(".point"),this.dataPoints.text=V.selectAll("text"),this.dataPaths.line=V.selectAll(".js-line");var F=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=F.selectAll("path"),this._render()},M.updateProjection=function(E,L){var C=this.graphDiv,O=L[this.id],I=L._size,N=O.domain,R=O.projection,V=O.lonaxis,F=O.lataxis,D=V._ax,U=F._ax,j=this.projection=function(Ae){var $=Ae.projection,oe=$.type,pe=y.projNames[oe];pe="geo"+s.titleCase(pe);for(var ye=(k[pe]||b[pe])(),ke=Ae._isSatellite?180*Math.acos(1/$.distance)/Math.PI:Ae._isClipped?y.lonaxisSpan[oe]/2:null,De=["center","rotate","parallels","clipExtent"],Pe=function(ve){return ve?ye:[]},Re=0;Re<De.length;Re++){var fe=De[Re];typeof ye[fe]!="function"&&(ye[fe]=Pe)}return ye.isLonLatOverEdges=function(ve){if(ye(ve)===null)return!0;if(ke){var Te=ye.rotate();return T(ve,[-Te[0],-Te[1]])>ke*Math.PI/180}return!1},ye.getPath=function(){return l().projection(ye)},ye.getBounds=function(ve){return ye.getPath().bounds(ve)},ye.precision(y.precision),Ae._isSatellite&&ye.tilt($.tilt).distance($.distance),ke&&ye.clipAngle(ke-y.clipPad),ye}(O),J=[[I.l+I.w*N.x[0],I.t+I.h*(1-N.y[1])],[I.l+I.w*N.x[1],I.t+I.h*(1-N.y[0])]],X=O.center||{},Z=R.rotation||{},Y=V.range||[],W=F.range||[];if(O.fitbounds){D._length=J[1][0]-J[0][0],U._length=J[1][1]-J[0][1],D.range=u(C,D),U.range=u(C,U);var Q=(D.range[0]+D.range[1])/2,ne=(U.range[0]+U.range[1])/2;if(O._isScoped)X={lon:Q,lat:ne};else if(O._isClipped){X={lon:Q,lat:ne},Z={lon:Q,lat:ne,roll:Z.roll};var re=R.type,ie=y.lonaxisSpan[re]/2||180,se=y.lataxisSpan[re]/2||90;Y=[Q-ie,Q+ie],W=[ne-se,ne+se]}else X={lon:Q,lat:ne},Z={lon:Q,lat:Z.lat,roll:Z.roll}}j.center([X.lon-Z.lon,X.lat-Z.lat]).rotate([-Z.lon,-Z.lat,Z.roll]).parallels(R.parallels);var ge=_(Y,W);j.fitExtent(J,ge);var ue=this.bounds=j.getBounds(ge),ce=this.fitScale=j.scale(),le=j.translate();if(O.fitbounds){var de=j.getBounds(_(D.range,U.range)),Ce=Math.min((ue[1][0]-ue[0][0])/(de[1][0]-de[0][0]),(ue[1][1]-ue[0][1])/(de[1][1]-de[0][1]));isFinite(Ce)?j.scale(Ce*ce):s.warn("Something went wrong during"+this.id+"fitbounds computations.")}else j.scale(R.scale*ce);var xe=this.midPt=[(ue[0][0]+ue[1][0])/2,(ue[0][1]+ue[1][1])/2];if(j.translate([le[0]+(xe[0]-le[0]),le[1]+(xe[1]-le[1])]).clipExtent(ue),O._isAlbersUsa){var _e=j([X.lon,X.lat]),we=j.translate();j.translate([we[0]-(_e[0]-we[0]),we[1]-(_e[1]-we[1])])}},M.updateBaseLayers=function(E,L){var C=this,O=C.topojson,I=C.layers,N=C.basePaths;function R(j){return j==="lonaxis"||j==="lataxis"}function V(j){return!!y.lineLayers[j]}function F(j){return!!y.fillLayers[j]}var D=(this.hasChoropleth?y.layersForChoropleth:y.layers).filter(function(j){return V(j)||F(j)?L["show"+j]:!R(j)||L[j].showgrid}),U=C.framework.selectAll(".layer").data(D,String);U.exit().each(function(j){delete I[j],delete N[j],S.select(this).remove()}),U.enter().append("g").attr("class",function(j){return"layer "+j}).each(function(j){var J=I[j]=S.select(this);j==="bg"?C.bgRect=J.append("rect").style("pointer-events","all"):R(j)?N[j]=J.append("path").style("fill","none"):j==="backplot"?J.append("g").classed("choroplethlayer",!0):j==="frontplot"?J.append("g").classed("scatterlayer",!0):V(j)?N[j]=J.append("path").style("fill","none").style("stroke-miterlimit",2):F(j)&&(N[j]=J.append("path").style("stroke","none"))}),U.order(),U.each(function(j){var J=N[j],X=y.layerNameToAdjective[j];j==="frame"?J.datum(y.sphereSVG):V(j)||F(j)?J.datum(w(O,O.objects[j])):R(j)&&J.datum(function(Z,Y,W){var Q,ne,re,ie=Y[Z],se=y.scopeDefaults[Y.scope];Z==="lonaxis"?(Q=se.lonaxisRange,ne=se.lataxisRange,re=function(we,Ae){return[we,Ae]}):Z==="lataxis"&&(Q=se.lataxisRange,ne=se.lonaxisRange,re=function(we,Ae){return[Ae,we]});var ge={type:"linear",range:[Q[0],Q[1]-1e-6],tick0:ie.tick0,dtick:ie.dtick};i.setConvert(ge,W);var ue=i.calcTicks(ge);Y.isScoped||Z!=="lonaxis"||ue.pop();for(var ce=ue.length,le=new Array(ce),de=0;de<ce;de++)for(var Ce=ue[de].x,xe=le[de]=[],_e=ne[0];_e<ne[1]+2.5;_e+=2.5)xe.push(re(Ce,_e));return{type:"MultiLineString",coordinates:le}}(j,L,E)).call(o.stroke,L[j].gridcolor).call(r.dashLine,L[j].griddash,L[j].gridwidth),V(j)?J.call(o.stroke,L[X+"color"]).call(r.dashLine,"",L[X+"width"]):F(j)&&J.call(o.fill,L[X+"color"])})},M.updateDims=function(E,L){var C=this.bounds,O=(L.framewidth||0)/2,I=C[0][0]-O,N=C[0][1]-O,R=C[1][0]-I+O,V=C[1][1]-N+O;r.setRect(this.clipRect,I,N,R,V),this.bgRect.call(r.setRect,I,N,R,V).call(o.fill,L.bgcolor),this.xaxis._offset=I,this.xaxis._length=R,this.yaxis._offset=N,this.yaxis._length=V},M.updateFx=function(E,L){var C=this,O=C.graphDiv,I=C.bgRect,N=E.dragmode,R=E.clickmode;if(!C.isStatic){var V={element:C.bgRect.node(),gd:O,plotinfo:{id:C.id,xaxis:C.xaxis,yaxis:C.yaxis,fillRangeItems:function(D,U){U.isRect?(D.range={})[C.id]=[F([U.xmin,U.ymin]),F([U.xmax,U.ymax])]:(D.lassoPoints={})[C.id]=U.map(F)}},xaxes:[C.xaxis],yaxes:[C.yaxis],subplot:C.id,clickFn:function(D){D===2&&x(O)}};N==="pan"?(I.node().onmousedown=null,I.call(g(C,L)),I.on("dblclick.zoom",function(){var D=C.viewInitial,U={};for(var j in D)U[C.id+"."+j]=D[j];d.call("_guiRelayout",O,U),O.emit("plotly_doubleclick",null)}),O._context._scrollZoom.geo||I.on("wheel.zoom",null)):N!=="select"&&N!=="lasso"||(I.on(".zoom",null),V.prepFn=function(D,U,j){f(D,U,j,V,N)},h.init(V)),I.on("mousemove",function(){var D=C.projection.invert(s.getPositionFromD3Event());if(!D)return h.unhover(O,S.event);C.xaxis.p2c=function(){return D[0]},C.yaxis.p2c=function(){return D[1]},n.hover(O,S.event,C.id)}),I.on("mouseout",function(){O._dragging||h.unhover(O,S.event)}),I.on("click",function(){N!=="select"&&N!=="lasso"&&(R.indexOf("select")>-1&&v(S.event,O,[C.xaxis],[C.yaxis],C.id,V),R.indexOf("event")>-1&&n.click(O,S.event))})}function F(D){return C.projection.invert([D[0]+C.xaxis._offset,D[1]+C.yaxis._offset])}},M.makeFramework=function(){var E=this,L=E.graphDiv,C=L._fullLayout,O="clip"+C._uid+E.id;E.clipDef=C._clips.append("clipPath").attr("id",O),E.clipRect=E.clipDef.append("rect"),E.framework=S.select(E.container).append("g").attr("class","geo "+E.id).call(r.setClipUrl,O,L),E.project=function(I){var N=E.projection(I);return N?[N[0]-E.xaxis._offset,N[1]-E.yaxis._offset]:[null,null]},E.xaxis={_id:"x",c2p:function(I){return E.project(I)[0]}},E.yaxis={_id:"y",c2p:function(I){return E.project(I)[1]}},E.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},i.setConvert(E.mockAxis,C)},M.saveViewInitial=function(E){var L,C=E.center||{},O=E.projection,I=O.rotation||{};this.viewInitial={fitbounds:E.fitbounds,"projection.scale":O.scale},L=E._isScoped?{"center.lon":C.lon,"center.lat":C.lat}:E._isClipped?{"projection.rotation.lon":I.lon,"projection.rotation.lat":I.lat}:{"center.lon":C.lon,"center.lat":C.lat,"projection.rotation.lon":I.lon},s.extendFlat(this.viewInitial,L)},M.render=function(E){this._hasMarkerAngles&&E?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},M._render=function(){var E,L=this.projection,C=L.getPath();function O(N){var R=L(N.lonlat);return R?t(R[0],R[1]):null}function I(N){return L.isLonLatOverEdges(N.lonlat)?"none":null}for(E in this.basePaths)this.basePaths[E].attr("d",C);for(E in this.dataPaths)this.dataPaths[E].attr("d",function(N){return C(N.geojson)});for(E in this.dataPoints)this.dataPoints[E].attr("display",I).attr("transform",O)}},44622:function(K,z,e){var S=e(27659).AU,k=e(71828).counterRegex,l=e(69082),T="geo",b=k(T),d={};d.geo={valType:"subplotid",dflt:T,editType:"calc"},K.exports={attr:T,name:T,idRoot:T,idRegex:b,attrRegex:b,attributes:d,layoutAttributes:e(77519),supplyLayoutDefaults:e(82161),plot:function(s){for(var t=s._fullLayout,o=s.calcdata,r=t._subplots.geo,n=0;n<r.length;n++){var a=r[n],i=S(o,T,a),u=t[a]._subplot;u||(u=l({id:a,graphDiv:s,container:t._geolayer.node(),topojsonURL:s._context.topojsonURL,staticPlot:s._context.staticPlot}),t[a]._subplot=u),u.plot(i,t,s._promises)}},updateFx:function(s){for(var t=s._fullLayout,o=t._subplots.geo,r=0;r<o.length;r++){var n=t[o[r]];n._subplot.updateFx(t,n)}},clean:function(s,t,o,r){for(var n=r._subplots.geo||[],a=0;a<n.length;a++){var i=n[a],u=r[i]._subplot;!t[i]&&u&&(u.framework.remove(),u.clipDef.remove())}}}},77519:function(K,z,e){var S=e(22399),k=e(27670).Y,l=e(79952).P,T=e(78776),b=e(30962).overrideAll,d=e(78607),s={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:S.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:l};(K.exports=b({domain:k({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:d(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:d(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:S.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:S.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:S.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:S.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:S.background},lonaxis:s,lataxis:s},"plot","from-root")).uirevision={valType:"any",editType:"none"}},82161:function(K,z,e){var S=e(71828),k=e(49119),l=e(27659).NG,T=e(78776),b=e(77519),d=T.axesNames;function s(t,o,r,n){var a=l(n.fullData,"geo",n.id).map(function(Z){return Z._expandedIndex}),i=r("resolution"),u=r("scope"),h=T.scopeDefaults[u],f=r("projection.type",h.projType),x=o._isAlbersUsa=f==="albers usa";x&&(u=o.scope="usa");var v=o._isScoped=u!=="world",g=o._isSatellite=f==="satellite",y=o._isConic=f.indexOf("conic")!==-1||f==="albers",p=o._isClipped=!!T.lonaxisSpan[f];if(t.visible===!1){var m=S.extendDeep({},o._template);m.showcoastlines=!1,m.showcountries=!1,m.showframe=!1,m.showlakes=!1,m.showland=!1,m.showocean=!1,m.showrivers=!1,m.showsubunits=!1,m.lonaxis&&(m.lonaxis.showgrid=!1),m.lataxis&&(m.lataxis.showgrid=!1),o._template=m}for(var w=r("visible"),c=0;c<d.length;c++){var M,_=d[c],E=[30,10][c];if(v)M=h[_+"Range"];else{var L=T[_+"Span"],C=(L[f]||L["*"])/2,O=r("projection.rotation."+_.substr(0,3),h.projRotate[c]);M=[O-C,O+C]}var I=r(_+".range",M);r(_+".tick0"),r(_+".dtick",E),r(_+".showgrid",!!w&&void 0)&&(r(_+".gridcolor"),r(_+".gridwidth"),r(_+".griddash")),o[_]._ax={type:"linear",_id:_.slice(0,3),_traceIndices:a,setScale:S.identity,c2l:S.identity,r2l:S.identity,autorange:!0,range:I.slice(),_m:1,_input:{}}}var N=o.lonaxis.range,R=o.lataxis.range,V=N[0],F=N[1];V>0&&F<0&&(F+=360);var D,U,j,J=(V+F)/2;if(!x){var X=v?h.projRotate:[J,0,0];D=r("projection.rotation.lon",X[0]),r("projection.rotation.lat",X[1]),r("projection.rotation.roll",X[2]),r("showcoastlines",!v&&w)&&(r("coastlinecolor"),r("coastlinewidth")),r("showocean",!!w&&void 0)&&r("oceancolor")}x?(U=-96.6,j=38.7):(U=v?J:D,j=(R[0]+R[1])/2),r("center.lon",U),r("center.lat",j),g&&(r("projection.tilt"),r("projection.distance")),y&&r("projection.parallels",h.projParallels||[0,60]),r("projection.scale"),r("showland",!!w&&void 0)&&r("landcolor"),r("showlakes",!!w&&void 0)&&r("lakecolor"),r("showrivers",!!w&&void 0)&&(r("rivercolor"),r("riverwidth")),r("showcountries",v&&u!=="usa"&&w)&&(r("countrycolor"),r("countrywidth")),(u==="usa"||u==="north america"&&i===50)&&(r("showsubunits",w),r("subunitcolor"),r("subunitwidth")),v||r("showframe",w)&&(r("framecolor"),r("framewidth")),r("bgcolor"),r("fitbounds")&&(delete o.projection.scale,v?(delete o.center.lon,delete o.center.lat):p?(delete o.center.lon,delete o.center.lat,delete o.projection.rotation.lon,delete o.projection.rotation.lat,delete o.lonaxis.range,delete o.lataxis.range):(delete o.center.lon,delete o.center.lat,delete o.projection.rotation.lon))}K.exports=function(t,o,r){k(t,o,r,{type:"geo",attributes:b,handleDefaults:s,fullData:r,partition:"y"})}},74455:function(K,z,e){var S=e(39898),k=e(71828),l=e(73972),T=Math.PI/180,b=180/Math.PI,d={cursor:"pointer"},s={cursor:"auto"};function t(w,c){return S.behavior.zoom().translate(c.translate()).scale(c.scale())}function o(w,c,M){var _=w.id,E=w.graphDiv,L=E.layout,C=L[_],O=E._fullLayout,I=O[_],N={},R={};function V(F,D){N[_+"."+F]=k.nestedProperty(C,F).get(),l.call("_storeDirectGUIEdit",L,O._preGUI,N);var U=k.nestedProperty(I,F);U.get()!==D&&(U.set(D),k.nestedProperty(C,F).set(D),R[_+"."+F]=D)}M(V),V("projection.scale",c.scale()/w.fitScale),V("fitbounds",!1),E.emit("plotly_relayout",R)}function r(w,c){var M=t(0,c);function _(E){var L=c.invert(w.midPt);E("center.lon",L[0]),E("center.lat",L[1])}return M.on("zoomstart",function(){S.select(this).style(d)}).on("zoom",function(){c.scale(S.event.scale).translate(S.event.translate),w.render(!0);var E=c.invert(w.midPt);w.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":c.scale()/w.fitScale,"geo.center.lon":E[0],"geo.center.lat":E[1]})}).on("zoomend",function(){S.select(this).style(s),o(w,c,_)}),M}function n(w,c){var M,_,E,L,C,O,I,N,R,V=t(0,c);function F(U){return c.invert(U)}function D(U){var j=c.rotate(),J=c.invert(w.midPt);U("projection.rotation.lon",-j[0]),U("center.lon",J[0]),U("center.lat",J[1])}return V.on("zoomstart",function(){S.select(this).style(d),M=S.mouse(this),_=c.rotate(),E=c.translate(),L=_,C=F(M)}).on("zoom",function(){if(O=S.mouse(this),function(J){var X=F(J);if(!X)return!0;var Z=c(X);return Math.abs(Z[0]-J[0])>2||Math.abs(Z[1]-J[1])>2}(M))return V.scale(c.scale()),void V.translate(c.translate());c.scale(S.event.scale),c.translate([E[0],S.event.translate[1]]),C?F(O)&&(N=F(O),I=[L[0]+(N[0]-C[0]),_[1],_[2]],c.rotate(I),L=I):C=F(M=O),R=!0,w.render(!0);var U=c.rotate(),j=c.invert(w.midPt);w.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":c.scale()/w.fitScale,"geo.center.lon":j[0],"geo.center.lat":j[1],"geo.projection.rotation.lon":-U[0]})}).on("zoomend",function(){S.select(this).style(s),R&&o(w,c,D)}),V}function a(w,c){var M;c.rotate(),c.scale();var _=t(0,c),E=function(V){for(var F=0,D=arguments.length,U=[];++F<D;)U.push(arguments[F]);var j=S.dispatch.apply(null,U);return j.of=function(J,X){return function(Z){var Y;try{Y=Z.sourceEvent=S.event,Z.target=V,S.event=Z,j[Z.type].apply(J,X)}finally{S.event=Y}}},j}(_,"zoomstart","zoom","zoomend"),L=0,C=_.on;function O(V){L++||V({type:"zoomstart"})}function I(V){V({type:"zoom"})}function N(V){--L||V({type:"zoomend"})}function R(V){var F=c.rotate();V("projection.rotation.lon",-F[0]),V("projection.rotation.lat",-F[1])}return _.on("zoomstart",function(){S.select(this).style(d);var V=S.mouse(this),F=c.rotate(),D=F,U=c.translate(),j=u(F);M=i(c,V),C.call(_,"zoom",function(){var J=S.mouse(this);if(c.scale(S.event.scale),M){if(i(c,J)){c.rotate(F).translate(U);var X=i(c,J),Z=f(M,X),Y=p(h(j,Z)),W=x(Y,M,D);isFinite(W[0])&&isFinite(W[1])&&isFinite(W[2])||(W=D),c.rotate(W),D=W}}else M=i(c,V=J);I(E.of(this,arguments))}),O(E.of(this,arguments))}).on("zoomend",function(){S.select(this).style(s),C.call(_,"zoom",null),N(E.of(this,arguments)),o(w,c,R)}).on("zoom.redraw",function(){w.render(!0);var V=c.rotate();w.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":c.scale()/w.fitScale,"geo.projection.rotation.lon":-V[0],"geo.projection.rotation.lat":-V[1]})}),S.rebind(_,E,"on")}function i(w,c){var M=w.invert(c);return M&&isFinite(M[0])&&isFinite(M[1])&&function(_){var E=_[0]*T,L=_[1]*T,C=Math.cos(L);return[C*Math.cos(E),C*Math.sin(E),Math.sin(L)]}(M)}function u(w){var c=.5*w[0]*T,M=.5*w[1]*T,_=.5*w[2]*T,E=Math.sin(c),L=Math.cos(c),C=Math.sin(M),O=Math.cos(M),I=Math.sin(_),N=Math.cos(_);return[L*O*N+E*C*I,E*O*N-L*C*I,L*C*N+E*O*I,L*O*I-E*C*N]}function h(w,c){var M=w[0],_=w[1],E=w[2],L=w[3],C=c[0],O=c[1],I=c[2],N=c[3];return[M*C-_*O-E*I-L*N,M*O+_*C+E*N-L*I,M*I-_*N+E*C+L*O,M*N+_*I-E*O+L*C]}function f(w,c){if(w&&c){var M=function(C,O){return[C[1]*O[2]-C[2]*O[1],C[2]*O[0]-C[0]*O[2],C[0]*O[1]-C[1]*O[0]]}(w,c),_=Math.sqrt(m(M,M)),E=.5*Math.acos(Math.max(-1,Math.min(1,m(w,c)))),L=Math.sin(E)/_;return _&&[Math.cos(E),M[2]*L,-M[1]*L,M[0]*L]}}function x(w,c,M){var _=y(c,2,w[0]);_=y(_,1,w[1]),_=y(_,0,w[2]-M[2]);var E,L,C=c[0],O=c[1],I=c[2],N=_[0],R=_[1],V=_[2],F=Math.atan2(O,C)*b,D=Math.sqrt(C*C+O*O);Math.abs(R)>D?(L=(R>0?90:-90)-F,E=0):(L=Math.asin(R/D)*b-F,E=Math.sqrt(D*D-R*R));var U=180-L-2*F,j=(Math.atan2(V,N)-Math.atan2(I,E))*b,J=(Math.atan2(V,N)-Math.atan2(I,-E))*b;return v(M[0],M[1],L,j)<=v(M[0],M[1],U,J)?[L,j,M[2]]:[U,J,M[2]]}function v(w,c,M,_){var E=g(M-w),L=g(_-c);return Math.sqrt(E*E+L*L)}function g(w){return(w%360+540)%360-180}function y(w,c,M){var _=M*T,E=w.slice(),L=c===0?1:0,C=c===2?1:2,O=Math.cos(_),I=Math.sin(_);return E[L]=w[L]*O-w[C]*I,E[C]=w[C]*O+w[L]*I,E}function p(w){return[Math.atan2(2*(w[0]*w[1]+w[2]*w[3]),1-2*(w[1]*w[1]+w[2]*w[2]))*b,Math.asin(Math.max(-1,Math.min(1,2*(w[0]*w[2]-w[3]*w[1]))))*b,Math.atan2(2*(w[0]*w[3]+w[1]*w[2]),1-2*(w[2]*w[2]+w[3]*w[3]))*b]}function m(w,c){for(var M=0,_=0,E=w.length;_<E;++_)M+=w[_]*c[_];return M}K.exports=function(w,c){var M=w.projection;return(c._isScoped?r:c._isClipped?a:n)(w,M)}},27659:function(K,z,e){var S=e(73972),k=e(85555).SUBPLOT_PATTERN;z.AU=function(l,T,b){var d=S.subplotsRegistry[T];if(!d)return[];for(var s=d.attr,t=[],o=0;o<l.length;o++){var r=l[o];r[0].trace[s]===b&&t.push(r)}return t},z.a0=function(l,T){var b,d=[],s=[];if(!(b=typeof T=="string"?S.getModule(T).plot:typeof T=="function"?T:T.plot))return[d,l];for(var t=0;t<l.length;t++){var o=l[t],r=o[0].trace;r.visible===!0&&r._length!==0&&(r._module.plot===b?d.push(o):s.push(o))}return[d,s]},z.NG=function(l,T,b){if(!S.subplotsRegistry[T])return[];var d,s,t,o=S.subplotsRegistry[T].attr,r=[];if(T==="gl2d"){var n=b.match(k);s="x"+n[1],t="y"+n[2]}for(var a=0;a<l.length;a++)d=l[a],T==="gl2d"&&S.traceIs(d,"gl2d")?d[o[0]]===s&&d[o[1]]===t&&r.push(d):d[o]===b&&r.push(d);return r}},75071:function(K,z,e){var S=e(16825),k=e(1195),l=e(48956),T=e(85555),b=e(38520);function d(s,t){this.element=s,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}K.exports=function(s){var t=s.mouseContainer,o=s.glplot,r=new d(t,o);function n(){s.xaxis.autorange=!1,s.yaxis.autorange=!1}function a(i,u,h){var f,x,v=s.calcDataBox(),g=o.viewBox,y=r.lastPos[0],p=r.lastPos[1],m=T.MINDRAG*o.pixelRatio,w=T.MINZOOM*o.pixelRatio;function c(O,I,N){var R=Math.min(I,N),V=Math.max(I,N);R!==V?(v[O]=R,v[O+2]=V,r.dataBox=v,s.setRanges(v)):(s.selectBox.selectBox=[0,0,1,1],s.glplot.setDirty())}switch(u*=o.pixelRatio,h*=o.pixelRatio,h=g[3]-g[1]-h,s.fullLayout.dragmode){case"zoom":if(i){var M=u/(g[2]-g[0])*(v[2]-v[0])+v[0],_=h/(g[3]-g[1])*(v[3]-v[1])+v[1];r.boxInited||(r.boxStart[0]=M,r.boxStart[1]=_,r.dragStart[0]=u,r.dragStart[1]=h),r.boxEnd[0]=M,r.boxEnd[1]=_,r.boxInited=!0,r.boxEnabled||r.boxStart[0]===r.boxEnd[0]&&r.boxStart[1]===r.boxEnd[1]||(r.boxEnabled=!0);var E=Math.abs(r.dragStart[0]-u)<w,L=Math.abs(r.dragStart[1]-h)<w;if(!function(){for(var O=s.graphDiv._fullLayout._axisConstraintGroups,I=s.xaxis._id,N=s.yaxis._id,R=0;R<O.length;R++)if(O[R][I]!==-1){if(O[R][N]!==-1)return!0;break}return!1}()||E&&L)E&&(r.boxEnd[0]=r.boxStart[0]),L&&(r.boxEnd[1]=r.boxStart[1]);else{f=r.boxEnd[0]-r.boxStart[0],x=r.boxEnd[1]-r.boxStart[1];var C=(v[3]-v[1])/(v[2]-v[0]);Math.abs(f*C)>Math.abs(x)?(r.boxEnd[1]=r.boxStart[1]+Math.abs(f)*C*(x>=0?1:-1),r.boxEnd[1]<v[1]?(r.boxEnd[1]=v[1],r.boxEnd[0]=r.boxStart[0]+(v[1]-r.boxStart[1])/Math.abs(C)):r.boxEnd[1]>v[3]&&(r.boxEnd[1]=v[3],r.boxEnd[0]=r.boxStart[0]+(v[3]-r.boxStart[1])/Math.abs(C))):(r.boxEnd[0]=r.boxStart[0]+Math.abs(x)/C*(f>=0?1:-1),r.boxEnd[0]<v[0]?(r.boxEnd[0]=v[0],r.boxEnd[1]=r.boxStart[1]+(v[0]-r.boxStart[0])*Math.abs(C)):r.boxEnd[0]>v[2]&&(r.boxEnd[0]=v[2],r.boxEnd[1]=r.boxStart[1]+(v[2]-r.boxStart[0])*Math.abs(C)))}}else r.boxEnabled?(f=r.boxStart[0]!==r.boxEnd[0],x=r.boxStart[1]!==r.boxEnd[1],f||x?(f&&(c(0,r.boxStart[0],r.boxEnd[0]),s.xaxis.autorange=!1),x&&(c(1,r.boxStart[1],r.boxEnd[1]),s.yaxis.autorange=!1),s.relayoutCallback()):s.glplot.setDirty(),r.boxEnabled=!1,r.boxInited=!1):r.boxInited&&(r.boxInited=!1);break;case"pan":r.boxEnabled=!1,r.boxInited=!1,i?(r.panning||(r.dragStart[0]=u,r.dragStart[1]=h),Math.abs(r.dragStart[0]-u)<m&&(u=r.dragStart[0]),Math.abs(r.dragStart[1]-h)<m&&(h=r.dragStart[1]),f=(y-u)*(v[2]-v[0])/(o.viewBox[2]-o.viewBox[0]),x=(p-h)*(v[3]-v[1])/(o.viewBox[3]-o.viewBox[1]),v[0]+=f,v[2]+=f,v[1]+=x,v[3]+=x,s.setRanges(v),r.panning=!0,r.lastInputTime=Date.now(),n(),s.cameraChanged(),s.handleAnnotations()):r.panning&&(r.panning=!1,s.relayoutCallback())}r.lastPos[0]=u,r.lastPos[1]=h}return r.mouseListener=S(t,a),t.addEventListener("touchstart",function(i){var u=l(i.changedTouches[0],t);a(0,u[0],u[1]),a(1,u[0],u[1]),i.preventDefault()},!!b&&{passive:!1}),t.addEventListener("touchmove",function(i){i.preventDefault();var u=l(i.changedTouches[0],t);a(1,u[0],u[1]),i.preventDefault()},!!b&&{passive:!1}),t.addEventListener("touchend",function(i){a(0,r.lastPos[0],r.lastPos[1]),i.preventDefault()},!!b&&{passive:!1}),r.wheelListener=k(t,function(i,u){if(!s.scrollZoom)return!1;var h=s.calcDataBox(),f=o.viewBox,x=r.lastPos[0],v=r.lastPos[1],g=Math.exp(5*u/(f[3]-f[1])),y=x/(f[2]-f[0])*(h[2]-h[0])+h[0],p=v/(f[3]-f[1])*(h[3]-h[1])+h[1];return h[0]=(h[0]-y)*g+y,h[2]=(h[2]-y)*g+y,h[1]=(h[1]-p)*g+p,h[3]=(h[3]-p)*g+p,s.setRanges(h),r.lastInputTime=Date.now(),n(),s.cameraChanged(),s.handleAnnotations(),s.relayoutCallback(),!0},!0),r}},82961:function(K,z,e){var S=e(89298),k=e(78614);function l(d){this.scene=d,this.gl=d.gl,this.pixelRatio=d.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var T=l.prototype,b=["xaxis","yaxis"];T.merge=function(d){var s,t,o,r,n,a,i,u,h,f,x;for(this.titleEnable=!1,this.backgroundColor=k(d.plot_bgcolor),f=0;f<2;++f){var v=(s=b[f]).charAt(0);for(o=(t=d[this.scene[s]._name]).title.text===this.scene.fullLayout._dfltTitle[v]?"":t.title.text,x=0;x<=2;x+=2)this.labelEnable[f+x]=!1,this.labels[f+x]=o,this.labelColor[f+x]=k(t.title.font.color),this.labelFont[f+x]=t.title.font.family,this.labelSize[f+x]=t.title.font.size,this.labelPad[f+x]=this.getLabelPad(s,t),this.tickEnable[f+x]=!1,this.tickColor[f+x]=k((t.tickfont||{}).color),this.tickAngle[f+x]=t.tickangle==="auto"?0:Math.PI*-t.tickangle/180,this.tickPad[f+x]=this.getTickPad(t),this.tickMarkLength[f+x]=0,this.tickMarkWidth[f+x]=t.tickwidth||0,this.tickMarkColor[f+x]=k(t.tickcolor),this.borderLineEnable[f+x]=!1,this.borderLineColor[f+x]=k(t.linecolor),this.borderLineWidth[f+x]=t.linewidth||0;i=this.hasSharedAxis(t),n=this.hasAxisInDfltPos(s,t)&&!i,a=this.hasAxisInAltrPos(s,t)&&!i,r=t.mirror||!1,u=i?String(r).indexOf("all")!==-1:!!r,h=i?r==="allticks":String(r).indexOf("ticks")!==-1,n?this.labelEnable[f]=!0:a&&(this.labelEnable[f+2]=!0),n?this.tickEnable[f]=t.showticklabels:a&&(this.tickEnable[f+2]=t.showticklabels),(n||u)&&(this.borderLineEnable[f]=t.showline),(a||u)&&(this.borderLineEnable[f+2]=t.showline),(n||h)&&(this.tickMarkLength[f]=this.getTickMarkLength(t)),(a||h)&&(this.tickMarkLength[f+2]=this.getTickMarkLength(t)),this.gridLineEnable[f]=t.showgrid,this.gridLineColor[f]=k(t.gridcolor),this.gridLineWidth[f]=t.gridwidth,this.zeroLineEnable[f]=t.zeroline,this.zeroLineColor[f]=k(t.zerolinecolor),this.zeroLineWidth[f]=t.zerolinewidth}},T.hasSharedAxis=function(d){var s=this.scene,t=s.fullLayout._subplots.gl2d;return S.findSubplotsWithAxis(t,d).indexOf(s.id)!==0},T.hasAxisInDfltPos=function(d,s){var t=s.side;return d==="xaxis"?t==="bottom":d==="yaxis"?t==="left":void 0},T.hasAxisInAltrPos=function(d,s){var t=s.side;return d==="xaxis"?t==="top":d==="yaxis"?t==="right":void 0},T.getLabelPad=function(d,s){var t=1.5,o=s.title.font.size,r=s.showticklabels;return d==="xaxis"?s.side==="top"?o*(t+(r?1:0))-10:o*(t+(r?.5:0))-10:d==="yaxis"?s.side==="right"?10+o*(t+(r?1:.5)):10+o*(t+(r?.5:0)):void 0},T.getTickPad=function(d){return d.ticks==="outside"?10+d.ticklen:15},T.getTickMarkLength=function(d){if(!d.ticks)return 0;var s=d.ticklen;return d.ticks==="inside"?-s:s},K.exports=function(d){return new l(d)}},4796:function(K,z,e){var S=e(30962).overrideAll,k=e(92918),l=e(10820),T=e(77922),b=e(85555),d=e(93612),s=e(528),t=e(27659).NG;z.name="gl2d",z.attr=["xaxis","yaxis"],z.idRoot=["x","y"],z.idRegex=b.idRegex,z.attrRegex=b.attrRegex,z.attributes=e(89502),z.supplyLayoutDefaults=function(o,r,n){r._has("cartesian")||d.supplyLayoutDefaults(o,r,n)},z.layoutAttrOverrides=S(d.layoutAttributes,"plot","from-root"),z.baseLayoutAttrOverrides=S({plot_bgcolor:l.plot_bgcolor,hoverlabel:s.hoverlabel},"plot","nested"),z.plot=function(o){for(var r=o._fullLayout,n=o._fullData,a=r._subplots.gl2d,i=0;i<a.length;i++){var u=a[i],h=r._plots[u],f=t(n,"gl2d",u),x=h._scene2d;x===void 0&&(x=new k({id:u,graphDiv:o,container:o.querySelector(".gl-container"),staticPlot:o._context.staticPlot,plotGlPixelRatio:o._context.plotGlPixelRatio},r),h._scene2d=x),x.plot(f,o.calcdata,r,o.layout)}},z.clean=function(o,r,n,a){for(var i=a._subplots.gl2d||[],u=0;u<i.length;u++){var h=i[u],f=a._plots[h];if(f._scene2d){var x=t(o,"gl2d",h);x.length===0&&(f._scene2d.destroy(),delete a._plots[h])}}d.clean.apply(this,arguments)},z.drawFramework=function(o){o._context.staticPlot||d.drawFramework(o)},z.toSVG=function(o){for(var r=o._fullLayout,n=r._subplots.gl2d,a=0;a<n.length;a++){var i=r._plots[n[a]]._scene2d,u=i.toImage("png");r._glimages.append("svg:image").attr({xmlns:T.svg,"xlink:href":u,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),i.destroy()}},z.updateFx=function(o){for(var r=o._fullLayout,n=r._subplots.gl2d,a=0;a<n.length;a++)r._plots[n[a]]._scene2d.updateFx(r.dragmode)}},92918:function(K,z,e){var S,k,l=e(73972),T=e(89298),b=e(30211),d=e(9330).gl_plot2d,s=e(9330).gl_spikes2d,t=e(9330).gl_select_box,o=e(40372),r=e(82961),n=e(75071),a=e(58617),i=e(99082),u=i.enforce,h=i.clean,f=e(71739).doAutoRange,x=e(64505),v=x.drawMode,g=x.selectMode,y=["xaxis","yaxis"],p=e(85555).SUBPLOT_PATTERN;function m(c,M){this.container=c.container,this.graphDiv=c.graphDiv,this.pixelRatio=c.plotGlPixelRatio||window.devicePixelRatio,this.id=c.id,this.staticPlot=!!c.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(M),this.makeFramework(),this.stopped||(this.glplotOptions=r(this),this.glplotOptions.merge(M),this.glplot=d(this.glplotOptions),this.camera=n(this),this.traces={},this.spikes=s(this.glplot),this.selectBox=t(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}K.exports=m;var w=m.prototype;w.makeFramework=function(){if(this.staticPlot){if(!(k||(S=document.createElement("canvas"),k=o({canvas:S,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=S,this.gl=k}else{var c=this.container.querySelector(".gl-canvas-focus"),M=o({canvas:c,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!M)return a(this),void(this.stopped=!0);this.canvas=c,this.gl=M}var _=this.canvas;_.style.width="100%",_.style.height="100%",_.style.position="absolute",_.style.top="0px",_.style.left="0px",_.style["pointer-events"]="none",this.updateSize(_);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var L=this.mouseContainer=document.createElement("div");L.style.position="absolute",L.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var C=this.container;C.appendChild(E),C.appendChild(L);var O=this;L.addEventListener("mouseout",function(){O.isMouseOver=!1,O.unhover()}),L.addEventListener("mouseover",function(){O.isMouseOver=!0})},w.toImage=function(c){c||(c="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(S),this.updateSize(this.canvas);var M=this.glplot.gl,_=M.drawingBufferWidth,E=M.drawingBufferHeight;M.clearColor(1,1,1,0),M.clear(M.COLOR_BUFFER_BIT|M.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),M.bindFramebuffer(M.FRAMEBUFFER,null);var L=new Uint8Array(_*E*4);M.readPixels(0,0,_,E,M.RGBA,M.UNSIGNED_BYTE,L);for(var C=0,O=E-1;C<O;++C,--O)for(var I=0;I<_;++I)for(var N=0;N<4;++N){var R=L[4*(_*C+I)+N];L[4*(_*C+I)+N]=L[4*(_*O+I)+N],L[4*(_*O+I)+N]=R}var V=document.createElement("canvas");V.width=_,V.height=E;var F,D=V.getContext("2d",{willReadFrequently:!0}),U=D.createImageData(_,E);switch(U.data.set(L),D.putImageData(U,0,0),c){case"jpeg":F=V.toDataURL("image/jpeg");break;case"webp":F=V.toDataURL("image/webp");break;default:F=V.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(S),F},w.updateSize=function(c){c||(c=this.canvas);var M=this.pixelRatio,_=this.fullLayout,E=_.width,L=_.height,C=0|Math.ceil(M*E),O=0|Math.ceil(M*L);return c.width===C&&c.height===O||(c.width=C,c.height=O),c},w.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var c=[T.calcTicks(this.xaxis),T.calcTicks(this.yaxis)],M=0;M<2;++M)for(var _=0;_<c[M].length;++_)c[M][_].text=c[M][_].text+"";return c},w.updateRefs=function(c){this.fullLayout=c;var M=this.id.match(p),_="xaxis"+M[1],E="yaxis"+M[2];this.xaxis=this.fullLayout[_],this.yaxis=this.fullLayout[E]},w.relayoutCallback=function(){var c=this.graphDiv,M=this.xaxis,_=this.yaxis,E=c.layout,L={},C=L[M._name+".range"]=M.range.slice(),O=L[_._name+".range"]=_.range.slice();L[M._name+".autorange"]=M.autorange,L[_._name+".autorange"]=_.autorange,l.call("_storeDirectGUIEdit",c.layout,c._fullLayout._preGUI,L);var I=E[M._name];I.range=C,I.autorange=M.autorange;var N=E[_._name];N.range=O,N.autorange=_.autorange,L.lastInputTime=this.camera.lastInputTime,c.emit("plotly_relayout",L)},w.cameraChanged=function(){var c=this.camera;this.glplot.setDataBox(this.calcDataBox());var M=this.computeTickMarks();(function(_,E){for(var L=0;L<2;++L){var C=_[L],O=E[L];if(C.length!==O.length)return!0;for(var I=0;I<C.length;++I)if(C[I].x!==O[I].x)return!0}return!1})(M,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=M,this.glplotOptions.dataBox=c.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},w.handleAnnotations=function(){for(var c=this.graphDiv,M=this.fullLayout.annotations,_=0;_<M.length;_++){var E=M[_];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&l.getComponentMethod("annotations","drawOne")(c,_)}},w.destroy=function(){if(this.glplot){var c=this.traces;c&&Object.keys(c).map(function(M){c[M].dispose(),delete c[M]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},w.plot=function(c,M,_){var E=this.glplot;this.updateRefs(_),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(c,M),this.updateFx(_.dragmode);var L=_.width,C=_.height;this.updateSize(this.canvas);var O=this.glplotOptions;O.merge(_),O.screenBox=[0,0,L,C];var I={_fullLayout:{_axisConstraintGroups:_._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:_._size}};h(I,this.xaxis),h(I,this.yaxis);var N,R,V=_._size,F=this.xaxis.domain,D=this.yaxis.domain;for(O.viewBox=[V.l+F[0]*V.w,V.b+D[0]*V.h,L-V.r-(1-F[1])*V.w,C-V.t-(1-D[1])*V.h],this.mouseContainer.style.width=V.w*(F[1]-F[0])+"px",this.mouseContainer.style.height=V.h*(D[1]-D[0])+"px",this.mouseContainer.height=V.h*(D[1]-D[0]),this.mouseContainer.style.left=V.l+F[0]*V.w+"px",this.mouseContainer.style.top=V.t+(1-D[1])*V.h+"px",R=0;R<2;++R)(N=this[y[R]])._length=O.viewBox[R+2]-O.viewBox[R],f(this.graphDiv,N),N.setScale();u(I),O.ticks=this.computeTickMarks(),O.dataBox=this.calcDataBox(),O.merge(_),E.update(O),this.glplot.draw()},w.calcDataBox=function(){var c=this.xaxis,M=this.yaxis,_=c.range,E=M.range,L=c.r2l,C=M.r2l;return[L(_[0]),C(E[0]),L(_[1]),C(E[1])]},w.setRanges=function(c){var M=this.xaxis,_=this.yaxis,E=M.l2r,L=_.l2r;M.range=[E(c[0]),E(c[2])],_.range=[L(c[1]),L(c[3])]},w.updateTraces=function(c,M){var _,E,L,C=Object.keys(this.traces);this.fullData=c;e:for(_=0;_<C.length;_++){var O=C[_],I=this.traces[O];for(E=0;E<c.length;E++)if((L=c[E]).uid===O&&L.type===I.type)continue e;I.dispose(),delete this.traces[O]}for(_=0;_<c.length;_++){L=c[_];var N=M[_],R=this.traces[L.uid];R?R.update(L,N):(R=L._module.plot(this,L,N),this.traces[L.uid]=R)}this.glplot.objects.sort(function(V,F){return V._trace.index-F._trace.index})},w.updateFx=function(c){g(c)||v(c)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor=c==="pan"?"move":c==="zoom"?"crosshair":null},w.emitPointAction=function(c,M){for(var _,E=c.trace.uid,L=c.pointIndex,C=0;C<this.fullData.length;C++)this.fullData[C].uid===E&&(_=this.fullData[C]);var O={x:c.traceCoord[0],y:c.traceCoord[1],curveNumber:_.index,pointNumber:L,data:_._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};b.appendArrayPointValue(O,_,L),this.graphDiv.emit(M,{points:[O]})},w.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var c=this.glplot,M=this.camera,_=M.mouseListener,E=this.lastButtonState===1&&_.buttons===0,L=this.fullLayout;this.lastButtonState=_.buttons,this.cameraChanged();var C,O=_.x*c.pixelRatio,I=this.canvas.height-c.pixelRatio*_.y;if(M.boxEnabled&&L.dragmode==="zoom"){this.selectBox.enabled=!0;for(var N=this.selectBox.selectBox=[Math.min(M.boxStart[0],M.boxEnd[0]),Math.min(M.boxStart[1],M.boxEnd[1]),Math.max(M.boxStart[0],M.boxEnd[0]),Math.max(M.boxStart[1],M.boxEnd[1])],R=0;R<2;R++)M.boxStart[R]===M.boxEnd[R]&&(N[R]=c.dataBox[R],N[R+2]=c.dataBox[R+2]);c.setDirty()}else if(!M.panning&&this.isMouseOver){this.selectBox.enabled=!1;var V=L._size,F=this.xaxis.domain,D=this.yaxis.domain,U=(C=c.pick(O/c.pixelRatio+V.l+F[0]*V.w,I/c.pixelRatio-(V.t+(1-D[1])*V.h)))&&C.object._trace.handlePick(C);if(U&&E&&this.emitPointAction(U,"plotly_click"),C&&C.object._trace.hoverinfo!=="skip"&&L.hovermode&&U&&(!this.lastPickResult||this.lastPickResult.traceUid!==U.trace.uid||this.lastPickResult.dataCoord[0]!==U.dataCoord[0]||this.lastPickResult.dataCoord[1]!==U.dataCoord[1])){var j=U;this.lastPickResult={traceUid:U.trace?U.trace.uid:null,dataCoord:U.dataCoord.slice()},this.spikes.update({center:C.dataCoord}),j.screenCoord=[((c.viewBox[2]-c.viewBox[0])*(C.dataCoord[0]-c.dataBox[0])/(c.dataBox[2]-c.dataBox[0])+c.viewBox[0])/c.pixelRatio,(this.canvas.height-(c.viewBox[3]-c.viewBox[1])*(C.dataCoord[1]-c.dataBox[1])/(c.dataBox[3]-c.dataBox[1])-c.viewBox[1])/c.pixelRatio],this.emitPointAction(U,"plotly_hover");var J=this.fullData[j.trace.index]||{},X=j.pointIndex,Z=b.castHoverinfo(J,L,X);if(Z&&Z!=="all"){var Y=Z.split("+");Y.indexOf("x")===-1&&(j.traceCoord[0]=void 0),Y.indexOf("y")===-1&&(j.traceCoord[1]=void 0),Y.indexOf("z")===-1&&(j.traceCoord[2]=void 0),Y.indexOf("text")===-1&&(j.textLabel=void 0),Y.indexOf("name")===-1&&(j.name=void 0)}b.loneHover({x:j.screenCoord[0],y:j.screenCoord[1],xLabel:this.hoverFormatter("xaxis",j.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",j.traceCoord[1]),zLabel:j.traceCoord[2],text:j.textLabel,name:j.name,color:b.castHoverOption(J,X,"bgcolor")||j.color,borderColor:b.castHoverOption(J,X,"bordercolor"),fontFamily:b.castHoverOption(J,X,"font.family"),fontSize:b.castHoverOption(J,X,"font.size"),fontColor:b.castHoverOption(J,X,"font.color"),nameLength:b.castHoverOption(J,X,"namelength"),textAlign:b.castHoverOption(J,X,"align")},{container:this.svgContainer,gd:this.graphDiv})}}C||this.unhover(),c.draw()}},w.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),b.loneUnhover(this.svgContainer))},w.hoverFormatter=function(c,M){if(M!==void 0){var _=this[c];return T.tickText(_,_.c2l(M),"hover").text}}},58547:function(K,z,e){var S=e(30962).overrideAll,k=e(528),l=e(33539),T=e(27659).NG,b=e(71828),d=e(77922),s="gl3d",t="scene";z.name=s,z.attr=t,z.idRoot=t,z.idRegex=z.attrRegex=b.counterRegex("scene"),z.attributes=e(59084),z.layoutAttributes=e(65500),z.baseLayoutAttrOverrides=S({hoverlabel:k.hoverlabel},"plot","nested"),z.supplyLayoutDefaults=e(24682),z.plot=function(o){for(var r=o._fullLayout,n=o._fullData,a=r._subplots.gl3d,i=0;i<a.length;i++){var u=a[i],h=T(n,s,u),f=r[u],x=f.camera,v=f._scene;v||(v=new l({id:u,graphDiv:o,container:o.querySelector(".gl-container"),staticPlot:o._context.staticPlot,plotGlPixelRatio:o._context.plotGlPixelRatio,camera:x},r),f._scene=v),v.viewInitial||(v.viewInitial={up:{x:x.up.x,y:x.up.y,z:x.up.z},eye:{x:x.eye.x,y:x.eye.y,z:x.eye.z},center:{x:x.center.x,y:x.center.y,z:x.center.z}}),v.plot(h,r,o.layout)}},z.clean=function(o,r,n,a){for(var i=a._subplots.gl3d||[],u=0;u<i.length;u++){var h=i[u];!r[h]&&a[h]._scene&&(a[h]._scene.destroy(),a._infolayer&&a._infolayer.selectAll(".annotation-"+h).remove())}},z.toSVG=function(o){for(var r=o._fullLayout,n=r._subplots.gl3d,a=r._size,i=0;i<n.length;i++){var u=r[n[i]],h=u.domain,f=u._scene,x=f.toImage("png");r._glimages.append("svg:image").attr({xmlns:d.svg,"xlink:href":x,x:a.l+a.w*h.x[0],y:a.t+a.h*(1-h.y[1]),width:a.w*(h.x[1]-h.x[0]),height:a.h*(h.y[1]-h.y[0]),preserveAspectRatio:"none"}),f.destroy()}},z.cleanId=function(o){if(o.match(/^scene[0-9]*$/)){var r=o.substr(5);return r==="1"&&(r=""),t+r}},z.updateFx=function(o){for(var r=o._fullLayout,n=r._subplots.gl3d,a=0;a<n.length;a++)r[n[a]]._scene.updateFx(r.dragmode,r.hovermode)}},59084:function(K){K.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},77894:function(K,z,e){var S=e(7901),k=e(13838),l=e(1426).extendFlat,T=e(30962).overrideAll;K.exports=T({visible:k.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:S.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:k.color,categoryorder:k.categoryorder,categoryarray:k.categoryarray,title:{text:k.title.text,font:k.title.font},type:l({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorange:k.autorange,rangemode:k.rangemode,range:l({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,mirror:k.mirror,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,tickfont:k.tickfont,tickangle:k.tickangle,tickprefix:k.tickprefix,showtickprefix:k.showtickprefix,ticksuffix:k.ticksuffix,showticksuffix:k.showticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickformat:k.tickformat,tickformatstops:k.tickformatstops,hoverformat:k.hoverformat,showline:k.showline,linecolor:k.linecolor,linewidth:k.linewidth,showgrid:k.showgrid,gridcolor:l({},k.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:k.gridwidth,zeroline:k.zeroline,zerolinecolor:k.zerolinecolor,zerolinewidth:k.zerolinewidth,_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}},"plot","from-root")},3277:function(K,z,e){var S=e(84267).mix,k=e(71828),l=e(44467),T=e(77894),b=e(951),d=e(71453),s=["xaxis","yaxis","zaxis"];K.exports=function(t,o,r){var n,a;function i(f,x){return k.coerce(n,a,T,f,x)}for(var u=0;u<s.length;u++){var h=s[u];n=t[h]||{},(a=l.newContainer(o,h))._id=h[0]+r.scene,a._name=h,b(n,a,i,r),d(n,a,i,{font:r.font,letter:h[0],data:r.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:r.bgColor,calendar:r.calendar},r.fullLayout),i("gridcolor",S(a.color,r.bgColor,72.72727272727273).toRgbString()),i("title.text",h[0]),a.setScale=k.noop,i("showspikes")&&(i("spikesides"),i("spikethickness"),i("spikecolor",a.color)),i("showaxeslabels"),i("showbackground")&&i("backgroundcolor")}}},30422:function(K,z,e){var S=e(78614),k=e(71828),l=["xaxis","yaxis","zaxis"];function T(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}T.prototype.merge=function(b,d){for(var s=this,t=0;t<3;++t){var o=d[l[t]];o.visible?(s.labels[t]=b._meta?k.templateString(o.title.text,b._meta):o.title.text,"font"in o.title&&(o.title.font.color&&(s.labelColor[t]=S(o.title.font.color)),o.title.font.family&&(s.labelFont[t]=o.title.font.family),o.title.font.size&&(s.labelSize[t]=o.title.font.size)),"showline"in o&&(s.lineEnable[t]=o.showline),"linecolor"in o&&(s.lineColor[t]=S(o.linecolor)),"linewidth"in o&&(s.lineWidth[t]=o.linewidth),"showgrid"in o&&(s.gridEnable[t]=o.showgrid),"gridcolor"in o&&(s.gridColor[t]=S(o.gridcolor)),"gridwidth"in o&&(s.gridWidth[t]=o.gridwidth),o.type==="log"?s.zeroEnable[t]=!1:"zeroline"in o&&(s.zeroEnable[t]=o.zeroline),"zerolinecolor"in o&&(s.zeroLineColor[t]=S(o.zerolinecolor)),"zerolinewidth"in o&&(s.zeroLineWidth[t]=o.zerolinewidth),"ticks"in o&&o.ticks?s.lineTickEnable[t]=!0:s.lineTickEnable[t]=!1,"ticklen"in o&&(s.lineTickLength[t]=s._defaultLineTickLength[t]=o.ticklen),"tickcolor"in o&&(s.lineTickColor[t]=S(o.tickcolor)),"tickwidth"in o&&(s.lineTickWidth[t]=o.tickwidth),"tickangle"in o&&(s.tickAngle[t]=o.tickangle==="auto"?-3600:Math.PI*-o.tickangle/180),"showticklabels"in o&&(s.tickEnable[t]=o.showticklabels),"tickfont"in o&&(o.tickfont.color&&(s.tickColor[t]=S(o.tickfont.color)),o.tickfont.family&&(s.tickFont[t]=o.tickfont.family),o.tickfont.size&&(s.tickSize[t]=o.tickfont.size)),"mirror"in o?["ticks","all","allticks"].indexOf(o.mirror)!==-1?(s.lineTickMirror[t]=!0,s.lineMirror[t]=!0):o.mirror===!0?(s.lineTickMirror[t]=!1,s.lineMirror[t]=!0):(s.lineTickMirror[t]=!1,s.lineMirror[t]=!1):s.lineMirror[t]=!1,"showbackground"in o&&o.showbackground!==!1?(s.backgroundEnable[t]=!0,s.backgroundColor[t]=S(o.backgroundcolor)):s.backgroundEnable[t]=!1):(s.tickEnable[t]=!1,s.labelEnable[t]=!1,s.lineEnable[t]=!1,s.lineTickEnable[t]=!1,s.gridEnable[t]=!1,s.zeroEnable[t]=!1,s.backgroundEnable[t]=!1)}},K.exports=function(b,d){var s=new T;return s.merge(b,d),s}},24682:function(K,z,e){var S=e(71828),k=e(7901),l=e(73972),T=e(49119),b=e(3277),d=e(65500),s=e(27659).NG,t="gl3d";function o(r,n,a,i){for(var u=a("bgcolor"),h=k.combine(u,i.paper_bgcolor),f=["up","center","eye"],x=0;x<f.length;x++)a("camera."+f[x]+".x"),a("camera."+f[x]+".y"),a("camera."+f[x]+".z");a("camera.projection.type");var v=!!a("aspectratio.x")&&!!a("aspectratio.y")&&!!a("aspectratio.z"),g=a("aspectmode",v?"manual":"auto");v||(r.aspectratio=n.aspectratio={x:1,y:1,z:1},g==="manual"&&(n.aspectmode="auto"),r.aspectmode=n.aspectmode);var y=s(i.fullData,t,i.id);b(r,n,{font:i.font,scene:i.id,data:y,bgColor:h,calendar:i.calendar,autotypenumbersDflt:i.autotypenumbersDflt,fullLayout:i.fullLayout}),l.getComponentMethod("annotations3d","handleDefaults")(r,n,i);var p=i.getDfltFromLayout("dragmode");if(p!==!1&&!p)if(p="orbit",r.camera&&r.camera.up){var m=r.camera.up.x,w=r.camera.up.y,c=r.camera.up.z;c!==0&&(m&&w&&c?c/Math.sqrt(m*m+w*w+c*c)>.999&&(p="turntable"):p="turntable")}else p="turntable";a("dragmode",p),a("hovermode",i.getDfltFromLayout("hovermode"))}K.exports=function(r,n,a){var i=n._basePlotModules.length>1;T(r,n,a,{type:t,attributes:d,handleDefaults:o,fullLayout:n,font:n.font,fullData:a,getDfltFromLayout:function(u){if(!i)return S.validate(r[u],d[u])?r[u]:void 0},autotypenumbersDflt:n.autotypenumbers,paper_bgcolor:n.paper_bgcolor,calendar:n.calendar})}},65500:function(K,z,e){var S=e(77894),k=e(27670).Y,l=e(1426).extendFlat,T=e(71828).counterRegex;function b(d,s,t){return{x:{valType:"number",dflt:d,editType:"camera"},y:{valType:"number",dflt:s,editType:"camera"},z:{valType:"number",dflt:t,editType:"camera"},editType:"camera"}}K.exports={_arrayAttrRegexps:[T("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:l(b(0,0,1),{}),center:l(b(0,0,0),{}),eye:l(b(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:k({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:S,yaxis:S,zaxis:S,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},13133:function(K,z,e){var S=e(78614),k=["xaxis","yaxis","zaxis"];function l(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}l.prototype.merge=function(T){for(var b=0;b<3;++b){var d=T[k[b]];d.visible?(this.enabled[b]=d.showspikes,this.colors[b]=S(d.spikecolor),this.drawSides[b]=d.spikesides,this.lineWidth[b]=d.spikethickness):(this.enabled[b]=!1,this.drawSides[b]=!1)}},K.exports=function(T){var b=new l;return b.merge(T),b}},96085:function(K,z,e){K.exports=function(b){for(var d=b.axesOptions,s=b.glplot.axesPixels,t=b.fullSceneLayout,o=[[],[],[]],r=0;r<3;++r){var n=t[l[r]];if(n._length=(s[r].hi-s[r].lo)*s[r].pixelsPerDataUnit/b.dataScale[r],Math.abs(n._length)===1/0||isNaN(n._length))o[r]=[];else{n._input_range=n.range.slice(),n.range[0]=s[r].lo/b.dataScale[r],n.range[1]=s[r].hi/b.dataScale[r],n._m=1/(b.dataScale[r]*s[r].pixelsPerDataUnit),n.range[0]===n.range[1]&&(n.range[0]-=1,n.range[1]+=1);var a=n.tickmode;if(n.tickmode==="auto"){n.tickmode="linear";var i=n.nticks||k.constrain(n._length/40,4,9);S.autoTicks(n,Math.abs(n.range[1]-n.range[0])/i)}for(var u=S.calcTicks(n,{msUTC:!0}),h=0;h<u.length;++h)u[h].x=u[h].x*b.dataScale[r],n.type==="date"&&(u[h].text=u[h].text.replace(/\<br\>/g," "));o[r]=u,n.tickmode=a}}for(d.ticks=o,r=0;r<3;++r)for(T[r]=.5*(b.glplot.bounds[0][r]+b.glplot.bounds[1][r]),h=0;h<2;++h)d.bounds[h][r]=b.glplot.bounds[h][r];b.contourLevels=function(f){for(var x=new Array(3),v=0;v<3;++v){for(var g=f[v],y=new Array(g.length),p=0;p<g.length;++p)y[p]=g[p].x;x[v]=y}return x}(o)};var S=e(89298),k=e(71828),l=["xaxis","yaxis","zaxis"],T=[0,0,0]},63538:function(K){function z(e,S){var k,l,T=[0,0,0,0];for(k=0;k<4;++k)for(l=0;l<4;++l)T[l]+=e[4*k+l]*S[k];return T}K.exports=function(e,S){return z(e.projection,z(e.view,z(e.model,[S[0],S[1],S[2],1])))}},33539:function(K,z,e){var S,k,l=e(9330).gl_plot3d,T=l.createCamera,b=l.createScene,d=e(40372),s=e(38520),t=e(73972),o=e(71828),r=o.preserveDrawingBuffer(),n=e(89298),a=e(30211),i=e(78614),u=e(58617),h=e(63538),f=e(30422),x=e(13133),v=e(96085),g=!1;function y(M,_){var E=document.createElement("div"),L=M.container;this.graphDiv=M.graphDiv;var C=document.createElementNS("http://www.w3.org/2000/svg","svg");C.style.position="absolute",C.style.top=C.style.left="0px",C.style.width=C.style.height="100%",C.style["z-index"]=20,C.style["pointer-events"]="none",E.appendChild(C),this.svgContainer=C,E.id=M.id,E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",L.appendChild(E),this.fullLayout=_,this.id=M.id||"scene",this.fullSceneLayout=_[this.id],this.plotArgs=[[],{},{}],this.axesOptions=f(_,_[this.id]),this.spikeOptions=x(_[this.id]),this.container=E,this.staticMode=!!M.staticPlot,this.pixelRatio=this.pixelRatio||M.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=t.getComponentMethod("annotations3d","convert"),this.drawAnnotations=t.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var p=y.prototype;p.prepareOptions=function(){var M=this,_={canvas:M.canvas,gl:M.gl,glOptions:{preserveDrawingBuffer:r,premultipliedAlpha:!0,antialias:!0},container:M.container,axes:M.axesOptions,spikes:M.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:M.camera,pixelRatio:M.pixelRatio};if(M.staticMode){if(!(k||(S=document.createElement("canvas"),k=d({canvas:S,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");_.gl=k,_.canvas=S}return _};var m=!0;p.tryCreatePlot=function(){var M=this,_=M.prepareOptions(),E=!0;try{M.glplot=b(_)}catch{if(M.staticMode||!m||r)E=!1;else{o.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{r=_.glOptions.preserveDrawingBuffer=!0,M.glplot=b(_)}catch{r=_.glOptions.preserveDrawingBuffer=!1,E=!1}}}return m=!1,E},p.initializeGLCamera=function(){var M=this,_=M.fullSceneLayout.camera,E=_.projection.type==="orthographic";M.camera=T(M.container,{center:[_.center.x,_.center.y,_.center.z],eye:[_.eye.x,_.eye.y,_.eye.z],up:[_.up.x,_.up.y,_.up.z],_ortho:E,zoomMin:.01,zoomMax:100,mode:"orbit"})},p.initializeGLPlot=function(){var M=this;if(M.initializeGLCamera(),!M.tryCreatePlot())return u(M);M.traces={},M.make4thDimension();var _=M.graphDiv,E=_.layout,L=function(){var O={};return M.isCameraChanged(E)&&(O[M.id+".camera"]=M.getCamera()),M.isAspectChanged(E)&&(O[M.id+".aspectratio"]=M.glplot.getAspectratio(),E[M.id].aspectmode!=="manual"&&(M.fullSceneLayout.aspectmode=E[M.id].aspectmode=O[M.id+".aspectmode"]="manual")),O},C=function(O){if(O.fullSceneLayout.dragmode!==!1){var I=L();O.saveLayout(E),O.graphDiv.emit("plotly_relayout",I)}};return M.glplot.canvas&&(M.glplot.canvas.addEventListener("mouseup",function(){C(M)}),M.glplot.canvas.addEventListener("touchstart",function(){g=!0}),M.glplot.canvas.addEventListener("wheel",function(O){if(_._context._scrollZoom.gl3d){if(M.camera._ortho){var I=O.deltaX>O.deltaY?1.1:.9090909090909091,N=M.glplot.getAspectratio();M.glplot.setAspectratio({x:I*N.x,y:I*N.y,z:I*N.z})}C(M)}},!!s&&{passive:!1}),M.glplot.canvas.addEventListener("mousemove",function(){if(M.fullSceneLayout.dragmode!==!1&&M.camera.mouseListener.buttons!==0){var O=L();M.graphDiv.emit("plotly_relayouting",O)}}),M.staticMode||M.glplot.canvas.addEventListener("webglcontextlost",function(O){_&&_.emit&&_.emit("plotly_webglcontextlost",{event:O,layer:M.id})},!1)),M.glplot.oncontextloss=function(){M.recoverContext()},M.glplot.onrender=function(){M.render()},!0},p.render=function(){var M,_=this,E=_.graphDiv,L=_.svgContainer,C=_.container.getBoundingClientRect();E._fullLayout._calcInverseTransform(E);var O=E._fullLayout._invScaleX,I=E._fullLayout._invScaleY,N=C.width*O,R=C.height*I;L.setAttributeNS(null,"viewBox","0 0 "+N+" "+R),L.setAttributeNS(null,"width",N),L.setAttributeNS(null,"height",R),v(_),_.glplot.axes.update(_.axesOptions);for(var V=Object.keys(_.traces),F=null,D=_.glplot.selection,U=0;U<V.length;++U)(M=_.traces[V[U]]).data.hoverinfo!=="skip"&&M.handlePick(D)&&(F=M),M.setContourLevels&&M.setContourLevels();function j(ce,le,de){var Ce=_.fullSceneLayout[ce+"axis"];return Ce.type!=="log"&&(le=Ce.d2l(le)),n.hoverLabelText(Ce,le,de)}if(F!==null){var J=h(_.glplot.cameraParams,D.dataCoordinate);M=F.data;var X,Z=E._fullData[M.index],Y=D.index,W={xLabel:j("x",D.traceCoordinate[0],M.xhoverformat),yLabel:j("y",D.traceCoordinate[1],M.yhoverformat),zLabel:j("z",D.traceCoordinate[2],M.zhoverformat)},Q=a.castHoverinfo(Z,_.fullLayout,Y),ne=(Q||"").split("+"),re=Q&&Q==="all";Z.hovertemplate||re||(ne.indexOf("x")===-1&&(W.xLabel=void 0),ne.indexOf("y")===-1&&(W.yLabel=void 0),ne.indexOf("z")===-1&&(W.zLabel=void 0),ne.indexOf("text")===-1&&(D.textLabel=void 0),ne.indexOf("name")===-1&&(F.name=void 0));var ie=[];M.type==="cone"||M.type==="streamtube"?(W.uLabel=j("x",D.traceCoordinate[3],M.uhoverformat),(re||ne.indexOf("u")!==-1)&&ie.push("u: "+W.uLabel),W.vLabel=j("y",D.traceCoordinate[4],M.vhoverformat),(re||ne.indexOf("v")!==-1)&&ie.push("v: "+W.vLabel),W.wLabel=j("z",D.traceCoordinate[5],M.whoverformat),(re||ne.indexOf("w")!==-1)&&ie.push("w: "+W.wLabel),W.normLabel=D.traceCoordinate[6].toPrecision(3),(re||ne.indexOf("norm")!==-1)&&ie.push("norm: "+W.normLabel),M.type==="streamtube"&&(W.divergenceLabel=D.traceCoordinate[7].toPrecision(3),(re||ne.indexOf("divergence")!==-1)&&ie.push("divergence: "+W.divergenceLabel)),D.textLabel&&ie.push(D.textLabel),X=ie.join("<br>")):M.type==="isosurface"||M.type==="volume"?(W.valueLabel=n.hoverLabelText(_._mockAxis,_._mockAxis.d2l(D.traceCoordinate[3]),M.valuehoverformat),ie.push("value: "+W.valueLabel),D.textLabel&&ie.push(D.textLabel),X=ie.join("<br>")):X=D.textLabel;var se={x:D.traceCoordinate[0],y:D.traceCoordinate[1],z:D.traceCoordinate[2],data:Z._input,fullData:Z,curveNumber:Z.index,pointNumber:Y};a.appendArrayPointValue(se,Z,Y),M._module.eventData&&(se=Z._module.eventData(se,D,Z,{},Y));var ge={points:[se]};if(_.fullSceneLayout.hovermode){var ue=[];a.loneHover({trace:Z,x:(.5+.5*J[0]/J[3])*N,y:(.5-.5*J[1]/J[3])*R,xLabel:W.xLabel,yLabel:W.yLabel,zLabel:W.zLabel,text:X,name:F.name,color:a.castHoverOption(Z,Y,"bgcolor")||F.color,borderColor:a.castHoverOption(Z,Y,"bordercolor"),fontFamily:a.castHoverOption(Z,Y,"font.family"),fontSize:a.castHoverOption(Z,Y,"font.size"),fontColor:a.castHoverOption(Z,Y,"font.color"),nameLength:a.castHoverOption(Z,Y,"namelength"),textAlign:a.castHoverOption(Z,Y,"align"),hovertemplate:o.castOption(Z,Y,"hovertemplate"),hovertemplateLabels:o.extendFlat({},se,W),eventData:[se]},{container:L,gd:E,inOut_bbox:ue}),se.bbox=ue[0]}D.distance<5&&(D.buttons||g)?E.emit("plotly_click",ge):E.emit("plotly_hover",ge),this.oldEventData=ge}else a.loneUnhover(L),this.oldEventData&&E.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;_.drawAnnotations(_)},p.recoverContext=function(){var M=this;M.glplot.dispose();var _=function(){M.glplot.gl.isContextLost()?requestAnimationFrame(_):M.initializeGLPlot()?M.plot.apply(M,M.plotArgs):o.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(_)};var w=["xaxis","yaxis","zaxis"];function c(M,_,E){for(var L=M.fullSceneLayout,C=0;C<3;C++){var O=w[C],I=O.charAt(0),N=L[O],R=_[I],V=_[I+"calendar"],F=_["_"+I+"length"];if(o.isArrayOrTypedArray(R))for(var D,U=0;U<(F||R.length);U++)if(o.isArrayOrTypedArray(R[U]))for(var j=0;j<R[U].length;++j)D=N.d2l(R[U][j],0,V),!isNaN(D)&&isFinite(D)&&(E[0][C]=Math.min(E[0][C],D),E[1][C]=Math.max(E[1][C],D));else D=N.d2l(R[U],0,V),!isNaN(D)&&isFinite(D)&&(E[0][C]=Math.min(E[0][C],D),E[1][C]=Math.max(E[1][C],D));else E[0][C]=Math.min(E[0][C],0),E[1][C]=Math.max(E[1][C],F-1)}}p.plot=function(M,_,E){var L=this;if(L.plotArgs=[M,_,E],!L.glplot.contextLost){var C,O,I,N,R,V,F=_[L.id],D=E[L.id];L.fullLayout=_,L.fullSceneLayout=F,L.axesOptions.merge(_,F),L.spikeOptions.merge(F),L.setViewport(F),L.updateFx(F.dragmode,F.hovermode),L.camera.enableWheel=L.graphDiv._context._scrollZoom.gl3d,L.glplot.setClearColor(i(F.bgcolor)),L.setConvert(R),M?Array.isArray(M)||(M=[M]):M=[];var U=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(I=0;I<M.length;++I)(C=M[I]).visible===!0&&C._length!==0&&c(this,C,U);(function(ye,ke){for(var De=ye.fullSceneLayout,Pe=De.annotations||[],Re=0;Re<3;Re++)for(var fe=w[Re],ve=fe.charAt(0),Te=De[fe],ze=0;ze<Pe.length;ze++){var He=Pe[ze];if(He.visible){var Ve=Te.r2l(He[ve]);!isNaN(Ve)&&isFinite(Ve)&&(ke[0][Re]=Math.min(ke[0][Re],Ve),ke[1][Re]=Math.max(ke[1][Re],Ve))}}})(this,U);var j=[1,1,1];for(N=0;N<3;++N)U[1][N]===U[0][N]?j[N]=1:j[N]=1/(U[1][N]-U[0][N]);for(L.dataScale=j,L.convertAnnotations(this),I=0;I<M.length;++I)(C=M[I]).visible===!0&&C._length!==0&&((O=L.traces[C.uid])?O.data.type===C.type?O.update(C):(O.dispose(),O=C._module.plot(this,C),L.traces[C.uid]=O):(O=C._module.plot(this,C),L.traces[C.uid]=O),O.name=C.name);var J=Object.keys(L.traces);e:for(I=0;I<J.length;++I){for(N=0;N<M.length;++N)if(M[N].uid===J[I]&&M[N].visible===!0&&M[N]._length!==0)continue e;(O=L.traces[J[I]]).dispose(),delete L.traces[J[I]]}L.glplot.objects.sort(function(ye,ke){return ye._trace.data.index-ke._trace.data.index});var X,Z=[[0,0,0],[0,0,0]],Y=[],W={};for(I=0;I<3;++I){if((V=(R=F[w[I]]).type)in W?(W[V].acc*=j[I],W[V].count+=1):W[V]={acc:j[I],count:1},R.autorange){Z[0][I]=1/0,Z[1][I]=-1/0;var Q=L.glplot.objects,ne=L.fullSceneLayout.annotations||[],re=R._name.charAt(0);for(N=0;N<Q.length;N++){var ie=Q[N],se=ie.bounds,ge=ie._trace.data._pad||0;ie.constructor.name==="ErrorBars"&&R._lowerLogErrorBound?Z[0][I]=Math.min(Z[0][I],R._lowerLogErrorBound):Z[0][I]=Math.min(Z[0][I],se[0][I]/j[I]-ge),Z[1][I]=Math.max(Z[1][I],se[1][I]/j[I]+ge)}for(N=0;N<ne.length;N++){var ue=ne[N];if(ue.visible){var ce=R.r2l(ue[re]);Z[0][I]=Math.min(Z[0][I],ce),Z[1][I]=Math.max(Z[1][I],ce)}}if("rangemode"in R&&R.rangemode==="tozero"&&(Z[0][I]=Math.min(Z[0][I],0),Z[1][I]=Math.max(Z[1][I],0)),Z[0][I]>Z[1][I])Z[0][I]=-1,Z[1][I]=1;else{var le=Z[1][I]-Z[0][I];Z[0][I]-=le/32,Z[1][I]+=le/32}if(R.autorange==="reversed"){var de=Z[0][I];Z[0][I]=Z[1][I],Z[1][I]=de}}else{var Ce=R.range;Z[0][I]=R.r2l(Ce[0]),Z[1][I]=R.r2l(Ce[1])}Z[0][I]===Z[1][I]&&(Z[0][I]-=1,Z[1][I]+=1),Y[I]=Z[1][I]-Z[0][I],L.glplot.setBounds(I,{min:Z[0][I]*j[I],max:Z[1][I]*j[I]})}var xe=F.aspectmode;if(xe==="cube")X=[1,1,1];else if(xe==="manual"){var _e=F.aspectratio;X=[_e.x,_e.y,_e.z]}else{if(xe!=="auto"&&xe!=="data")throw new Error("scene.js aspectRatio was not one of the enumerated types");var we=[1,1,1];for(I=0;I<3;++I){var Ae=W[V=(R=F[w[I]]).type];we[I]=Math.pow(Ae.acc,1/Ae.count)/j[I]}X=xe==="data"||Math.max.apply(null,we)/Math.min.apply(null,we)<=4?we:[1,1,1]}F.aspectratio.x=D.aspectratio.x=X[0],F.aspectratio.y=D.aspectratio.y=X[1],F.aspectratio.z=D.aspectratio.z=X[2],L.glplot.setAspectratio(F.aspectratio),L.viewInitial.aspectratio||(L.viewInitial.aspectratio={x:F.aspectratio.x,y:F.aspectratio.y,z:F.aspectratio.z}),L.viewInitial.aspectmode||(L.viewInitial.aspectmode=F.aspectmode);var $=F.domain||null,oe=_._size||null;if($&&oe){var pe=L.container.style;pe.position="absolute",pe.left=oe.l+$.x[0]*oe.w+"px",pe.top=oe.t+(1-$.y[1])*oe.h+"px",pe.width=oe.w*($.x[1]-$.x[0])+"px",pe.height=oe.h*($.y[1]-$.y[0])+"px"}L.glplot.redraw()}},p.destroy=function(){var M=this;M.glplot&&(M.camera.mouseListener.enabled=!1,M.container.removeEventListener("wheel",M.camera.wheelListener),M.camera=null,M.glplot.dispose(),M.container.parentNode.removeChild(M.container),M.glplot=null)},p.getCamera=function(){var M,_=this;return _.camera.view.recalcMatrix(_.camera.view.lastT()),{up:{x:(M=_.camera).up[0],y:M.up[1],z:M.up[2]},center:{x:M.center[0],y:M.center[1],z:M.center[2]},eye:{x:M.eye[0],y:M.eye[1],z:M.eye[2]},projection:{type:M._ortho===!0?"orthographic":"perspective"}}},p.setViewport=function(M){var _,E=this,L=M.camera;E.camera.lookAt.apply(this,[[(_=L).eye.x,_.eye.y,_.eye.z],[_.center.x,_.center.y,_.center.z],[_.up.x,_.up.y,_.up.z]]),E.glplot.setAspectratio(M.aspectratio),L.projection.type==="orthographic"!==E.camera._ortho&&(E.glplot.redraw(),E.glplot.clearRGBA(),E.glplot.dispose(),E.initializeGLPlot())},p.isCameraChanged=function(M){var _=this.getCamera(),E=o.nestedProperty(M,this.id+".camera").get();function L(N,R,V,F){var D=["up","center","eye"],U=["x","y","z"];return R[D[V]]&&N[D[V]][U[F]]===R[D[V]][U[F]]}var C=!1;if(E===void 0)C=!0;else{for(var O=0;O<3;O++)for(var I=0;I<3;I++)if(!L(_,E,O,I)){C=!0;break}(!E.projection||_.projection&&_.projection.type!==E.projection.type)&&(C=!0)}return C},p.isAspectChanged=function(M){var _=this.glplot.getAspectratio(),E=o.nestedProperty(M,this.id+".aspectratio").get();return E===void 0||E.x!==_.x||E.y!==_.y||E.z!==_.z},p.saveLayout=function(M){var _,E,L,C,O,I,N=this,R=N.fullLayout,V=N.isCameraChanged(M),F=N.isAspectChanged(M),D=V||F;if(D){var U={};V&&(_=N.getCamera(),L=(E=o.nestedProperty(M,N.id+".camera")).get(),U[N.id+".camera"]=L),F&&(C=N.glplot.getAspectratio(),I=(O=o.nestedProperty(M,N.id+".aspectratio")).get(),U[N.id+".aspectratio"]=I),t.call("_storeDirectGUIEdit",M,R._preGUI,U),V&&(E.set(_),o.nestedProperty(R,N.id+".camera").set(_)),F&&(O.set(C),o.nestedProperty(R,N.id+".aspectratio").set(C),N.glplot.redraw())}return D},p.updateFx=function(M,_){var E=this,L=E.camera;if(L)if(M==="orbit")L.mode="orbit",L.keyBindingMode="rotate";else if(M==="turntable"){L.up=[0,0,1],L.mode="turntable",L.keyBindingMode="rotate";var C=E.graphDiv,O=C._fullLayout,I=E.fullSceneLayout.camera,N=I.up.x,R=I.up.y,V=I.up.z;if(V/Math.sqrt(N*N+R*R+V*V)<.999){var F=E.id+".camera.up",D={x:0,y:0,z:1},U={};U[F]=D;var j=C.layout;t.call("_storeDirectGUIEdit",j,O._preGUI,U),I.up=D,o.nestedProperty(j,F).set(D)}}else L.keyBindingMode=M;E.fullSceneLayout.hovermode=_},p.toImage=function(M){var _=this;M||(M="png"),_.staticMode&&_.container.appendChild(S),_.glplot.redraw();var E=_.glplot.gl,L=E.drawingBufferWidth,C=E.drawingBufferHeight;E.bindFramebuffer(E.FRAMEBUFFER,null);var O=new Uint8Array(L*C*4);E.readPixels(0,0,L,C,E.RGBA,E.UNSIGNED_BYTE,O),function(F,D,U){for(var j=0,J=U-1;j<J;++j,--J)for(var X=0;X<D;++X)for(var Z=0;Z<4;++Z){var Y=4*(D*j+X)+Z,W=4*(D*J+X)+Z,Q=F[Y];F[Y]=F[W],F[W]=Q}}(O,L,C),function(F,D,U){for(var j=0;j<U;++j)for(var J=0;J<D;++J){var X=4*(D*j+J),Z=F[X+3];if(Z>0)for(var Y=255/Z,W=0;W<3;++W)F[X+W]=Math.min(Y*F[X+W],255)}}(O,L,C);var I=document.createElement("canvas");I.width=L,I.height=C;var N,R=I.getContext("2d",{willReadFrequently:!0}),V=R.createImageData(L,C);switch(V.data.set(O),R.putImageData(V,0,0),M){case"jpeg":N=I.toDataURL("image/jpeg");break;case"webp":N=I.toDataURL("image/webp");break;default:N=I.toDataURL("image/png")}return _.staticMode&&_.container.removeChild(S),N},p.setConvert=function(){for(var M=0;M<3;M++){var _=this.fullSceneLayout[w[M]];n.setConvert(_,this.fullLayout),_.setScale=o.noop}},p.make4thDimension=function(){var M=this,_=M.graphDiv._fullLayout;M._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},n.setConvert(M._mockAxis,_)},K.exports=y},90060:function(K){K.exports=function(z,e,S,k){k=k||z.length;for(var l=new Array(k),T=0;T<k;T++)l[T]=[z[T],e[T],S[T]];return l}},10820:function(K,z,e){var S=e(41940),k=e(85594),l=e(22399),T=e(29241),b=e(53777),d=e(35025),s=e(1426).extendFlat,t=S({editType:"calc"});t.family.dflt='"Open Sans", verdana, arial, sans-serif',t.size.dflt=12,t.color.dflt=l.defaultLine,K.exports={font:t,title:{text:{valType:"string",editType:"layoutstyle"},font:S({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:s(d({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:l.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:l.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:l.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:T.newshape,activeshape:T.activeshape,newselection:b.newselection,activeselection:b.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:s({},k.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:S({editType:"layoutstyle"})}}},77734:function(K,z,e){var S=e(78607),k='© <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',l=['© <a target="_blank" href="https://carto.com/">Carto</a>',k].join(" "),T=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),b={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:k,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:l,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:l,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:T,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:T,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},d=S(b);K.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:b,styleValuesNonMapbox:d,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@1.10.1."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",d.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},13056:function(K,z,e){var S=e(71828);K.exports=function(k,l){var T=k.split(" "),b=T[0],d=T[1],s=S.isArrayOrTypedArray(l)?S.mean(l):l,t=.5+s/100,o=1.5+s/100,r=["",""],n=[0,0];switch(b){case"top":r[0]="top",n[1]=-o;break;case"bottom":r[0]="bottom",n[1]=o}switch(d){case"left":r[1]="right",n[0]=-t;break;case"right":r[1]="left",n[0]=t}return{anchor:r[0]&&r[1]?r.join("-"):r[0]?r[0]:r[1]?r[1]:"center",offset:n}}},50101:function(K,z,e){var S=e(44517),k=e(71828),l=k.strTranslate,T=k.strScale,b=e(27659).AU,d=e(77922),s=e(39898),t=e(91424),o=e(63893),r=e(10481),n="mapbox",a=z.constants=e(77734);function i(u){return typeof u=="string"&&(a.styleValuesMapbox.indexOf(u)!==-1||u.indexOf("mapbox://")===0)}z.name=n,z.attr="subplot",z.idRoot=n,z.idRegex=z.attrRegex=k.counterRegex(n),z.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},z.layoutAttributes=e(23585),z.supplyLayoutDefaults=e(77882),z.plot=function(u){var h=u._fullLayout,f=u.calcdata,x=h._subplots.mapbox;if(S.version!==a.requiredVersion)throw new Error(a.wrongVersionErrorMsg);var v=function(c,M){var _=c._fullLayout;if(c._context.mapboxAccessToken==="")return"";for(var E=[],L=[],C=!1,O=!1,I=0;I<M.length;I++){var N=_[M[I]],R=N.accesstoken;i(N.style)&&(R?k.pushUnique(E,R):(i(N._input.style)&&(k.error("Uses Mapbox map style, but did not set an access token."),C=!0),O=!0)),R&&k.pushUnique(L,R)}if(O){var V=C?a.noAccessTokenErrorMsg:a.missingStyleErrorMsg;throw k.error(V),new Error(V)}return E.length?(E.length>1&&k.warn(a.multipleTokensErrorMsg),E[0]):(L.length&&k.log(["Listed mapbox access token(s)",L.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(u,x);S.accessToken=v;for(var g=0;g<x.length;g++){var y=x[g],p=b(f,n,y),m=h[y],w=m._subplot;w||(w=new r(u,y),h[y]._subplot=w),w.viewInitial||(w.viewInitial={center:k.extendFlat({},m.center),zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),w.plot(p,h,u._promises)}},z.clean=function(u,h,f,x){for(var v=x._subplots.mapbox||[],g=0;g<v.length;g++){var y=v[g];!h[y]&&x[y]._subplot&&x[y]._subplot.destroy()}},z.toSVG=function(u){for(var h=u._fullLayout,f=h._subplots.mapbox,x=h._size,v=0;v<f.length;v++){var g=h[f[v]],y=g.domain,p=g._subplot.toImage("png");h._glimages.append("svg:image").attr({xmlns:d.svg,"xlink:href":p,x:x.l+x.w*y.x[0],y:x.t+x.h*(1-y.y[1]),width:x.w*(y.x[1]-y.x[0]),height:x.h*(y.y[1]-y.y[0]),preserveAspectRatio:"none"});var m=s.select(g._subplot.div);if(m.select(".mapboxgl-ctrl-logo").node().offsetParent!==null){var w=h._glimages.append("g");w.attr("transform",l(x.l+x.w*y.x[0]+10,x.t+x.h*(1-y.y[0])-31)),w.append("path").attr("d",a.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),w.append("path").attr("d",a.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),w.append("path").attr("d",a.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),w.append("polygon").attr("points",a.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var c=m.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),M=h._glimages.append("g"),_=M.append("text");_.text(c).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":c});var E=t.bBox(_.node()),L=x.w*(y.x[1]-y.x[0]);if(E.width>L/2){var C=c.split("|").join("<br>");_.text(C).attr("data-unformatted",C).call(o.convertToTspans,u),E=t.bBox(_.node())}_.attr("transform",l(-3,8-E.height)),M.insert("rect",".static-attribution").attr({x:-E.width-6,y:-E.height-3,width:E.width+6,height:E.height+3,fill:"rgba(255, 255, 255, 0.75)"});var O=1;E.width+6>L&&(O=L/(E.width+6));var I=[x.l+x.w*y.x[1],x.t+x.h*(1-y.y[0])];M.attr("transform",l(I[0],I[1])+T(O))}},z.updateFx=function(u){for(var h=u._fullLayout,f=h._subplots.mapbox,x=0;x<f.length;x++)h[f[x]]._subplot.updateFx(h)}},67911:function(K,z,e){var S=e(71828),k=e(63893).sanitizeHTML,l=e(13056),T=e(77734);function b(o,r){this.subplot=o,this.uid=o.uid+"-"+r,this.index=r,this.idSource="source-"+this.uid,this.idLayer=T.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var d=b.prototype;function s(o){if(!o.visible)return!1;var r=o.source;if(Array.isArray(r)&&r.length>0){for(var n=0;n<r.length;n++)if(typeof r[n]!="string"||r[n].length===0)return!1;return!0}return S.isPlainObject(r)||typeof r=="string"&&r.length>0}function t(o){var r={},n={};switch(o.type){case"circle":S.extendFlat(n,{"circle-radius":o.circle.radius,"circle-color":o.color,"circle-opacity":o.opacity});break;case"line":S.extendFlat(n,{"line-width":o.line.width,"line-color":o.color,"line-opacity":o.opacity,"line-dasharray":o.line.dash});break;case"fill":S.extendFlat(n,{"fill-color":o.color,"fill-outline-color":o.fill.outlinecolor,"fill-opacity":o.opacity});break;case"symbol":var a=o.symbol,i=l(a.textposition,a.iconsize);S.extendFlat(r,{"icon-image":a.icon+"-15","icon-size":a.iconsize/10,"text-field":a.text,"text-size":a.textfont.size,"text-anchor":i.anchor,"text-offset":i.offset,"symbol-placement":a.placement}),S.extendFlat(n,{"icon-color":o.color,"text-color":a.textfont.color,"text-opacity":o.opacity});break;case"raster":S.extendFlat(n,{"raster-fade-duration":0,"raster-opacity":o.opacity})}return{layout:r,paint:n}}d.update=function(o){this.visible?this.needsNewImage(o)?this.updateImage(o):this.needsNewSource(o)?(this.removeLayer(),this.updateSource(o),this.updateLayer(o)):this.needsNewLayer(o)?this.updateLayer(o):this.updateStyle(o):(this.updateSource(o),this.updateLayer(o)),this.visible=s(o)},d.needsNewImage=function(o){return this.subplot.map.getSource(this.idSource)&&this.sourceType==="image"&&o.sourcetype==="image"&&(this.source!==o.source||JSON.stringify(this.coordinates)!==JSON.stringify(o.coordinates))},d.needsNewSource=function(o){return this.sourceType!==o.sourcetype||JSON.stringify(this.source)!==JSON.stringify(o.source)||this.layerType!==o.type},d.needsNewLayer=function(o){return this.layerType!==o.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},d.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},d.updateImage=function(o){this.subplot.map.getSource(this.idSource).updateImage({url:o.source,coordinates:o.coordinates});var r=this.findFollowingMapboxLayerId(this.lookupBelow());r!==null&&this.subplot.map.moveLayer(this.idLayer,r)},d.updateSource=function(o){var r=this.subplot.map;if(r.getSource(this.idSource)&&r.removeSource(this.idSource),this.sourceType=o.sourcetype,this.source=o.source,s(o)){var n=function(a){var i,u=a.sourcetype,h=a.source,f={type:u};return u==="geojson"?i="data":u==="vector"?i=typeof h=="string"?"url":"tiles":u==="raster"?(i="tiles",f.tileSize=256):u==="image"&&(i="url",f.coordinates=a.coordinates),f[i]=h,a.sourceattribution&&(f.attribution=k(a.sourceattribution)),f}(o);r.addSource(this.idSource,n)}},d.findFollowingMapboxLayerId=function(o){if(o==="traces")for(var r=this.subplot.getMapLayers(),n=0;n<r.length;n++){var a=r[n].id;if(typeof a=="string"&&a.indexOf(T.traceLayerPrefix)===0){o=a;break}}return o},d.updateLayer=function(o){var r=this.subplot,n=t(o),a=this.lookupBelow(),i=this.findFollowingMapboxLayerId(a);this.removeLayer(),s(o)&&r.addLayer({id:this.idLayer,source:this.idSource,"source-layer":o.sourcelayer||"",type:o.type,minzoom:o.minzoom,maxzoom:o.maxzoom,layout:n.layout,paint:n.paint},i),this.layerType=o.type,this.below=a},d.updateStyle=function(o){if(s(o)){var r=t(o);this.subplot.setOptions(this.idLayer,"setLayoutProperty",r.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",r.paint)}},d.removeLayer=function(){var o=this.subplot.map;o.getLayer(this.idLayer)&&o.removeLayer(this.idLayer)},d.dispose=function(){var o=this.subplot.map;o.getLayer(this.idLayer)&&o.removeLayer(this.idLayer),o.getSource(this.idSource)&&o.removeSource(this.idSource)},K.exports=function(o,r,n){var a=new b(o,r);return a.update(n),a}},23585:function(K,z,e){var S=e(71828),k=e(7901).defaultLine,l=e(27670).Y,T=e(41940),b=e(82196).textposition,d=e(30962).overrideAll,s=e(44467).templatedArray,t=e(77734),o=T({});o.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(K.exports=d({_arrayAttrRegexps:[S.counterRegex("mapbox",".layers",!0)],domain:l({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:t.styleValuesMapbox.concat(t.styleValuesNonMapbox),dflt:t.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:s("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:k},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:k}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:o,textposition:S.extendFlat({},b,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},77882:function(K,z,e){var S=e(71828),k=e(49119),l=e(85501),T=e(23585);function b(s,t,o,r){o("accesstoken",r.accessToken),o("style"),o("center.lon"),o("center.lat"),o("zoom"),o("bearing"),o("pitch");var n=o("bounds.west"),a=o("bounds.east"),i=o("bounds.south"),u=o("bounds.north");n!==void 0&&a!==void 0&&i!==void 0&&u!==void 0||delete t.bounds,l(s,t,{name:"layers",handleItemDefaults:d}),t._input=s}function d(s,t){function o(u,h){return S.coerce(s,t,T.layers,u,h)}if(o("visible")){var r,n=o("sourcetype"),a=n==="raster"||n==="image";o("source"),o("sourceattribution"),n==="vector"&&o("sourcelayer"),n==="image"&&o("coordinates"),a&&(r="raster");var i=o("type",r);a&&i!=="raster"&&(i=t.type="raster",S.log("Source types *raster* and *image* must drawn *raster* layer type.")),o("below"),o("color"),o("opacity"),o("minzoom"),o("maxzoom"),i==="circle"&&o("circle.radius"),i==="line"&&(o("line.width"),o("line.dash")),i==="fill"&&o("fill.outlinecolor"),i==="symbol"&&(o("symbol.icon"),o("symbol.iconsize"),o("symbol.text"),S.coerceFont(o,"symbol.textfont"),o("symbol.textposition"),o("symbol.placement"))}}K.exports=function(s,t,o){k(s,t,o,{type:"mapbox",attributes:T,handleDefaults:b,partition:"y",accessToken:t._mapboxAccessToken})}},10481:function(K,z,e){var S=e(44517),k=e(71828),l=e(41327),T=e(73972),b=e(89298),d=e(28569),s=e(30211),t=e(64505),o=t.drawMode,r=t.selectMode,n=e(47322).prepSelect,a=e(47322).clearOutline,i=e(47322).clearSelectionsCache,u=e(47322).selectOnClick,h=e(77734),f=e(67911);function x(w,c){this.id=c,this.gd=w;var M=w._fullLayout,_=w._context;this.container=M._glcontainer.node(),this.isStatic=_.staticPlot,this.uid=M._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(M),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var v=x.prototype;v.plot=function(w,c,M){var _,E=this,L=c[E.id];E.map&&L.accesstoken!==E.accessToken&&(E.map.remove(),E.map=null,E.styleObj=null,E.traceHash={},E.layerList=[]),_=E.map?new Promise(function(C,O){E.updateMap(w,c,C,O)}):new Promise(function(C,O){E.createMap(w,c,C,O)}),M.push(_)},v.createMap=function(w,c,M,_){var E=this,L=c[E.id],C=E.styleObj=y(L.style);E.accessToken=L.accesstoken;var O=L.bounds,I=O?[[O.west,O.south],[O.east,O.north]]:null,N=E.map=new S.Map({container:E.div,style:C.style,center:m(L.center),zoom:L.zoom,bearing:L.bearing,pitch:L.pitch,maxBounds:I,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new S.AttributionControl({compact:!0}));N._canvas.style.left="0px",N._canvas.style.top="0px",E.rejectOnError(_),E.isStatic||E.initFx(w,c);var R=[];R.push(new Promise(function(V){N.once("load",V)})),R=R.concat(l.fetchTraceGeoData(w)),Promise.all(R).then(function(){E.fillBelowLookup(w,c),E.updateData(w),E.updateLayout(c),E.resolveOnRender(M)}).catch(_)},v.updateMap=function(w,c,M,_){var E=this,L=E.map,C=c[this.id];E.rejectOnError(_);var O=[],I=y(C.style);JSON.stringify(E.styleObj)!==JSON.stringify(I)&&(E.styleObj=I,L.setStyle(I.style),E.traceHash={},O.push(new Promise(function(N){L.once("styledata",N)}))),O=O.concat(l.fetchTraceGeoData(w)),Promise.all(O).then(function(){E.fillBelowLookup(w,c),E.updateData(w),E.updateLayout(c),E.resolveOnRender(M)}).catch(_)},v.fillBelowLookup=function(w,c){var M,_,E=c[this.id].layers,L=this.belowLookup={},C=!1;for(M=0;M<w.length;M++){var O=w[M][0].trace,I=O._module;typeof O.below=="string"?_=O.below:I.getBelow&&(_=I.getBelow(O,this)),_===""&&(C=!0),L["trace-"+O.uid]=_||""}for(M=0;M<E.length;M++){var N=E[M];_=typeof N.below=="string"?N.below:C?"traces":"",L["layout-"+M]=_}var R,V,F={};for(R in L)F[_=L[R]]?F[_].push(R):F[_]=[R];for(_ in F){var D=F[_];if(D.length>1)for(M=0;M<D.length;M++)(R=D[M]).indexOf("trace-")===0?(V=R.split("trace-")[1],this.traceHash[V]&&(this.traceHash[V].below=null)):R.indexOf("layout-")===0&&(V=R.split("layout-")[1],this.layerList[V]&&(this.layerList[V].below=null))}};var g={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function y(w){var c={};return k.isPlainObject(w)?(c.id=w.id,c.style=w):typeof w=="string"?(c.id=w,h.styleValuesMapbox.indexOf(w)!==-1?c.style=p(w):h.stylesNonMapbox[w]?c.style=h.stylesNonMapbox[w]:c.style=w):(c.id=h.styleValueDflt,c.style=p(h.styleValueDflt)),c.transition={duration:0,delay:0},c}function p(w){return h.styleUrlPrefix+w+"-"+h.styleUrlSuffix}function m(w){return[w.lon,w.lat]}v.updateData=function(w){var c,M,_,E,L=this.traceHash,C=w.slice().sort(function(V,F){return g[V[0].trace.type]-g[F[0].trace.type]});for(_=0;_<C.length;_++){var O=C[_],I=!1;(c=L[(M=O[0].trace).uid])&&(c.type===M.type?(c.update(O),I=!0):c.dispose()),!I&&M._module&&(L[M.uid]=M._module.plot(this,O))}var N=Object.keys(L);e:for(_=0;_<N.length;_++){var R=N[_];for(E=0;E<w.length;E++)if(R===(M=w[E][0].trace).uid)continue e;(c=L[R]).dispose(),delete L[R]}},v.updateLayout=function(w){var c=this.map,M=w[this.id];this.dragging||this.wheeling||(c.setCenter(m(M.center)),c.setZoom(M.zoom),c.setBearing(M.bearing),c.setPitch(M.pitch)),this.updateLayers(w),this.updateFramework(w),this.updateFx(w),this.map.resize(),this.gd._context._scrollZoom.mapbox?c.scrollZoom.enable():c.scrollZoom.disable()},v.resolveOnRender=function(w){var c=this.map;c.on("render",function M(){c.loaded()&&(c.off("render",M),setTimeout(w,10))})},v.rejectOnError=function(w){var c=this.map;function M(){w(new Error(h.mapOnErrorMsg))}c.once("error",M),c.once("style.error",M),c.once("source.error",M),c.once("tile.error",M),c.once("layer.error",M)},v.createFramework=function(w){var c=this,M=c.div=document.createElement("div");M.id=c.uid,M.style.position="absolute",c.container.appendChild(M),c.xaxis={_id:"x",c2p:function(_){return c.project(_).x}},c.yaxis={_id:"y",c2p:function(_){return c.project(_).y}},c.updateFramework(w),c.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},b.setConvert(c.mockAxis,w)},v.initFx=function(w,c){var M=this,_=M.gd,E=M.map;function L(){s.loneUnhover(c._hoverlayer)}function C(){var O=M.getView();_.emit("plotly_relayouting",M.getViewEditsWithDerived(O))}E.on("moveend",function(O){if(M.map){var I=_._fullLayout;if(O.originalEvent||M.wheeling){var N=I[M.id];T.call("_storeDirectGUIEdit",_.layout,I._preGUI,M.getViewEdits(N));var R=M.getView();N._input.center=N.center=R.center,N._input.zoom=N.zoom=R.zoom,N._input.bearing=N.bearing=R.bearing,N._input.pitch=N.pitch=R.pitch,_.emit("plotly_relayout",M.getViewEditsWithDerived(R))}O.originalEvent&&O.originalEvent.type==="mouseup"?M.dragging=!1:M.wheeling&&(M.wheeling=!1),I._rehover&&I._rehover()}}),E.on("wheel",function(){M.wheeling=!0}),E.on("mousemove",function(O){var I=M.div.getBoundingClientRect(),N=[O.originalEvent.offsetX,O.originalEvent.offsetY];O.target.getBoundingClientRect=function(){return I},M.xaxis.p2c=function(){return E.unproject(N).lng},M.yaxis.p2c=function(){return E.unproject(N).lat},_._fullLayout._rehover=function(){_._fullLayout._hoversubplot===M.id&&_._fullLayout[M.id]&&s.hover(_,O,M.id)},s.hover(_,O,M.id),_._fullLayout._hoversubplot=M.id}),E.on("dragstart",function(){M.dragging=!0,L()}),E.on("zoomstart",L),E.on("mouseout",function(){_._fullLayout._hoversubplot=null}),E.on("drag",C),E.on("zoom",C),E.on("dblclick",function(){var O=_._fullLayout[M.id];T.call("_storeDirectGUIEdit",_.layout,_._fullLayout._preGUI,M.getViewEdits(O));var I=M.viewInitial;E.setCenter(m(I.center)),E.setZoom(I.zoom),E.setBearing(I.bearing),E.setPitch(I.pitch);var N=M.getView();O._input.center=O.center=N.center,O._input.zoom=O.zoom=N.zoom,O._input.bearing=O.bearing=N.bearing,O._input.pitch=O.pitch=N.pitch,_.emit("plotly_doubleclick",null),_.emit("plotly_relayout",M.getViewEditsWithDerived(N))}),M.clearOutline=function(){i(M.dragOptions),a(M.dragOptions.gd)},M.onClickInPanFn=function(O){return function(I){var N=_._fullLayout.clickmode;N.indexOf("select")>-1&&u(I.originalEvent,_,[M.xaxis],[M.yaxis],M.id,O),N.indexOf("event")>-1&&s.click(_,I.originalEvent)}}},v.updateFx=function(w){var c=this,M=c.map,_=c.gd;if(!c.isStatic){var E,L=w.dragmode;E=function(I,N){N.isRect?(I.range={})[c.id]=[O([N.xmin,N.ymin]),O([N.xmax,N.ymax])]:(I.lassoPoints={})[c.id]=N.map(O)};var C=c.dragOptions;c.dragOptions=k.extendDeep(C||{},{dragmode:w.dragmode,element:c.div,gd:_,plotinfo:{id:c.id,domain:w[c.id].domain,xaxis:c.xaxis,yaxis:c.yaxis,fillRangeItems:E},xaxes:[c.xaxis],yaxes:[c.yaxis],subplot:c.id}),M.off("click",c.onClickInPanHandler),r(L)||o(L)?(M.dragPan.disable(),M.on("zoomstart",c.clearOutline),c.dragOptions.prepFn=function(I,N,R){n(I,N,R,c.dragOptions,L)},d.init(c.dragOptions)):(M.dragPan.enable(),M.off("zoomstart",c.clearOutline),c.div.onmousedown=null,c.div.ontouchstart=null,c.div.removeEventListener("touchstart",c.div._ontouchstart),c.onClickInPanHandler=c.onClickInPanFn(c.dragOptions),M.on("click",c.onClickInPanHandler))}function O(I){var N=c.map.unproject(I);return[N.lng,N.lat]}},v.updateFramework=function(w){var c=w[this.id].domain,M=w._size,_=this.div.style;_.width=M.w*(c.x[1]-c.x[0])+"px",_.height=M.h*(c.y[1]-c.y[0])+"px",_.left=M.l+c.x[0]*M.w+"px",_.top=M.t+(1-c.y[1])*M.h+"px",this.xaxis._offset=M.l+c.x[0]*M.w,this.xaxis._length=M.w*(c.x[1]-c.x[0]),this.yaxis._offset=M.t+(1-c.y[1])*M.h,this.yaxis._length=M.h*(c.y[1]-c.y[0])},v.updateLayers=function(w){var c,M=w[this.id].layers,_=this.layerList;if(M.length!==_.length){for(c=0;c<_.length;c++)_[c].dispose();for(_=this.layerList=[],c=0;c<M.length;c++)_.push(f(this,c,M[c]))}else for(c=0;c<M.length;c++)_[c].update(M[c])},v.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},v.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},v.setOptions=function(w,c,M){for(var _ in M)this.map[c](w,_,M[_])},v.getMapLayers=function(){return this.map.getStyle().layers},v.addLayer=function(w,c){var M=this.map;if(typeof c=="string"){if(c==="")return void M.addLayer(w,c);for(var _=this.getMapLayers(),E=0;E<_.length;E++)if(c===_[E].id)return void M.addLayer(w,c);k.warn(["Trying to add layer with *below* value",c,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}M.addLayer(w)},v.project=function(w){return this.map.project(new S.LngLat(w[0],w[1]))},v.getView=function(){var w=this.map,c=w.getCenter(),M={lon:c.lng,lat:c.lat},_=w.getCanvas(),E=parseInt(_.style.width),L=parseInt(_.style.height);return{center:M,zoom:w.getZoom(),bearing:w.getBearing(),pitch:w.getPitch(),_derived:{coordinates:[w.unproject([0,0]).toArray(),w.unproject([E,0]).toArray(),w.unproject([E,L]).toArray(),w.unproject([0,L]).toArray()]}}},v.getViewEdits=function(w){for(var c=this.id,M=["center","zoom","bearing","pitch"],_={},E=0;E<M.length;E++){var L=M[E];_[c+"."+L]=w[L]}return _},v.getViewEditsWithDerived=function(w){var c=this.id,M=this.getViewEdits(w);return M[c+"._derived"]=w._derived,M},K.exports=x},35025:function(K){K.exports=function(z){var e=z.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},74875:function(K,z,e){var S=e(39898),k=e(84096).Dq,l=e(60721).FF,T=e(92770),b=e(73972),d=e(86281),s=e(44467),t=e(71828),o=e(7901),r=e(50606).BADNUM,n=e(41675),a=e(51873).clearOutline,i=e(21479),u=e(85594),h=e(31391),f=e(27659).a0,x=t.relinkPrivateKeys,v=t._,g=K.exports={};t.extendFlat(g,b),g.attributes=e(9012),g.attributes.type.values=g.allTypes,g.fontAttrs=e(41940),g.layoutAttributes=e(10820),g.fontWeight="normal";var y=g.transformsRegistry,p=e(31137);g.executeAPICommand=p.executeAPICommand,g.computeAPICommandBindings=p.computeAPICommandBindings,g.manageCommandObserver=p.manageCommandObserver,g.hasSimpleAPICommandBindings=p.hasSimpleAPICommandBindings,g.redrawText=function(F){return F=t.getGraphDiv(F),new Promise(function(D){setTimeout(function(){F._fullLayout&&(b.getComponentMethod("annotations","draw")(F),b.getComponentMethod("legend","draw")(F),b.getComponentMethod("colorbar","draw")(F),D(g.previousPromises(F)))},300)})},g.resize=function(F){var D;F=t.getGraphDiv(F);var U=new Promise(function(j,J){F&&!t.isHidden(F)||J(new Error("Resize must be passed a displayed plot div element.")),F._redrawTimer&&clearTimeout(F._redrawTimer),F._resolveResize&&(D=F._resolveResize),F._resolveResize=j,F._redrawTimer=setTimeout(function(){if(!F.layout||F.layout.width&&F.layout.height||t.isHidden(F))j(F);else{delete F.layout.width,delete F.layout.height;var X=F.changed;F.autoplay=!0,b.call("relayout",F,{autosize:!0}).then(function(){F.changed=X,F._resolveResize===j&&(delete F._resolveResize,j(F))})}},100)});return D&&D(U),U},g.previousPromises=function(F){if((F._promises||[]).length)return Promise.all(F._promises).then(function(){F._promises=[]})},g.addLinks=function(F){if(F._context.showLink||F._context.showSources){var D=F._fullLayout,U=t.ensureSingle(D._paper,"text","js-plot-link-container",function(W){W.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:o.defaultLine,"pointer-events":"all"}).each(function(){var Q=S.select(this);Q.append("tspan").classed("js-link-to-tool",!0),Q.append("tspan").classed("js-link-spacer",!0),Q.append("tspan").classed("js-sourcelinks",!0)})}),j=U.node(),J={y:D._paper.attr("height")-9};document.body.contains(j)&&j.getComputedTextLength()>=D.width-20?(J["text-anchor"]="start",J.x=5):(J["text-anchor"]="end",J.x=D._paper.attr("width")-7),U.attr(J);var X=U.select(".js-link-to-tool"),Z=U.select(".js-link-spacer"),Y=U.select(".js-sourcelinks");F._context.showSources&&F._context.showSources(F),F._context.showLink&&function(W,Q){Q.text("");var ne=Q.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(W._context.linkText+" "+String.fromCharCode(187));if(W._context.sendData)ne.on("click",function(){g.sendDataToCloud(W)});else{var re=window.location.pathname.split("/"),ie=window.location.search;ne.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+re[2].split(".")[0]+"/"+re[1]+ie})}}(F,X),Z.text(X.text()&&Y.text()?" - ":"")}},g.sendDataToCloud=function(F){var D=(window.PLOTLYENV||{}).BASE_URL||F._context.plotlyServerURL;if(D){F.emit("plotly_beforeexport");var U=S.select(F).append("div").attr("id","hiddenform").style("display","none"),j=U.append("form").attr({action:D+"/external",method:"post",target:"_blank"});return j.append("input").attr({type:"text",name:"data"}).node().value=g.graphJson(F,!1,"keepdata"),j.node().submit(),U.remove(),F.emit("plotly_afterexport"),!1}};var m=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],w=["year","month","dayMonth","dayMonthYear"];function c(F,D){var U=F._context.locale;U||(U="en-US");var j=!1,J={};function X(re){for(var ie=!0,se=0;se<D.length;se++){var ge=D[se];J[ge]||(re[ge]?J[ge]=re[ge]:ie=!1)}ie&&(j=!0)}for(var Z=0;Z<2;Z++){for(var Y=F._context.locales,W=0;W<2;W++){var Q=(Y[U]||{}).format;if(Q&&(X(Q),j))break;Y=b.localeRegistry}var ne=U.split("-")[0];if(j||ne===U)break;U=ne}return j||X(b.localeRegistry.en.format),J}function M(F,D){var U={_fullLayout:D},j=F._id.charAt(0)==="x",J=F._mainAxis._anchorAxis,X="",Z="",Y="";if(J&&(Y=J._mainAxis._id,X=j?F._id+Y:Y+F._id),!X||!D._plots[X]){X="";for(var W=F._counterAxes,Q=0;Q<W.length;Q++){var ne=W[Q],re=j?F._id+ne:ne+F._id;Z||(Z=re);var ie=n.getFromId(U,ne);if(Y&&ie.overlaying===Y){X=re;break}}}return X||Z}function _(F){var D=F.transforms;if(Array.isArray(D)&&D.length)for(var U=0;U<D.length;U++){var j=D[U],J=j._module||y[j.type];if(J&&J.makesData)return!0}return!1}function E(F,D,U,j){for(var J=F.transforms,X=[F],Z=0;Z<J.length;Z++){var Y=J[Z],W=y[Y.type];W&&W.transform&&(X=W.transform(X,{transform:Y,fullTrace:F,fullData:D,layout:U,fullLayout:j,transformIndex:Z}))}return X}function L(F){return typeof F=="string"&&F.substr(F.length-2)==="px"&&parseFloat(F)}function C(F){var D=F.margin;if(!F._size){var U=F._size={l:Math.round(D.l),r:Math.round(D.r),t:Math.round(D.t),b:Math.round(D.b),p:Math.round(D.pad)};U.w=Math.round(F.width)-U.l-U.r,U.h=Math.round(F.height)-U.t-U.b}F._pushmargin||(F._pushmargin={}),F._pushmarginIds||(F._pushmarginIds={}),F._reservedMargin||(F._reservedMargin={})}g.supplyDefaults=function(F,D){var U=D&&D.skipUpdateCalc,j=F._fullLayout||{};if(j._skipDefaults)delete j._skipDefaults;else{var J,X=F._fullLayout={},Z=F.layout||{},Y=F._fullData||[],W=F._fullData=[],Q=F.data||[],ne=F.calcdata||[],re=F._context||{};F._transitionData||g.createTransitionData(F),X._dfltTitle={plot:v(F,"Click to enter Plot title"),x:v(F,"Click to enter X axis title"),y:v(F,"Click to enter Y axis title"),colorbar:v(F,"Click to enter Colorscale title"),annotation:v(F,"new text")},X._traceWord=v(F,"trace");var ie=c(F,m);if(X._mapboxAccessToken=re.mapboxAccessToken,j._initialAutoSizeIsDone){var se=j.width,ge=j.height;g.supplyLayoutGlobalDefaults(Z,X,ie),Z.width||(X.width=se),Z.height||(X.height=ge),g.sanitizeMargins(X)}else{g.supplyLayoutGlobalDefaults(Z,X,ie);var ue=!Z.width||!Z.height,ce=X.autosize,le=re.autosizable;ue&&(ce||le)?g.plotAutoSize(F,Z,X):ue&&g.sanitizeMargins(X),!ce&&ue&&(Z.width=X.width,Z.height=X.height)}X._d3locale=function(Te,ze){return Te.decimal=ze.charAt(0),Te.thousands=ze.charAt(1),{numberFormat:function(He){try{He=l(Te).format(t.adjustFormat(He))}catch{return t.warnBadFormat(He),t.noFormat}return He},timeFormat:k(Te).utcFormat}}(ie,X.separators),X._extraFormat=c(F,w),X._initialAutoSizeIsDone=!0,X._dataLength=Q.length,X._modules=[],X._visibleModules=[],X._basePlotModules=[];var de=X._subplots=function(){var Te,ze,He=b.collectableSubplotTypes,Ve={};if(!He){He=[];var nt=b.subplotsRegistry;for(var tt in nt){var ot=nt[tt].attr;if(ot&&(He.push(tt),Array.isArray(ot)))for(ze=0;ze<ot.length;ze++)t.pushUnique(He,ot[ze])}}for(Te=0;Te<He.length;Te++)Ve[He[Te]]=[];return Ve}(),Ce=X._splomAxes={x:{},y:{}},xe=X._splomSubplots={};X._splomGridDflt={},X._scatterStackOpts={},X._firstScatter={},X._alignmentOpts={},X._colorAxes={},X._requestRangeslider={},X._traceUids=function(Te,ze){var He,Ve,nt=ze.length,tt=[];for(He=0;He<Te.length;He++){var ot=Te[He]._fullInput;ot!==Ve&&tt.push(ot),Ve=ot}var pt=tt.length,Tt=new Array(nt),yt={};function dt(Ot,Nt){Tt[Nt]=Ot,yt[Ot]=1}function Pt(Ot,Nt){if(Ot&&typeof Ot=="string"&&!yt[Ot])return dt(Ot,Nt),!0}for(He=0;He<nt;He++){var Et=ze[He].uid;typeof Et=="number"&&(Et=String(Et)),Pt(Et,He)||He<pt&&Pt(tt[He].uid,He)||dt(t.randstr(yt),He)}return Tt}(Y,Q),X._globalTransforms=(F._context||{}).globalTransforms,g.supplyDataDefaults(Q,W,Z,X);var _e=Object.keys(Ce.x),we=Object.keys(Ce.y);if(_e.length>1&&we.length>1){for(b.getComponentMethod("grid","sizeDefaults")(Z,X),J=0;J<_e.length;J++)t.pushUnique(de.xaxis,_e[J]);for(J=0;J<we.length;J++)t.pushUnique(de.yaxis,we[J]);for(var Ae in xe)t.pushUnique(de.cartesian,Ae)}if(X._has=g._hasPlotType.bind(X),Y.length===W.length)for(J=0;J<W.length;J++)x(W[J],Y[J]);g.supplyLayoutModuleDefaults(Z,X,W,F._transitionData);var $=X._visibleModules,oe=[];for(J=0;J<$.length;J++){var pe=$[J].crossTraceDefaults;pe&&t.pushUnique(oe,pe)}for(J=0;J<oe.length;J++)oe[J](W,X);X._hasOnlyLargeSploms=X._basePlotModules.length===1&&X._basePlotModules[0].name==="splom"&&_e.length>15&&we.length>15&&X.shapes.length===0&&X.images.length===0,g.linkSubplots(W,X,Y,j),g.cleanPlot(W,X,Y,j);var ye=!(!j._has||!j._has("gl2d")),ke=!(!X._has||!X._has("gl2d")),De=!(!j._has||!j._has("cartesian"))||ye,Pe=!(!X._has||!X._has("cartesian"))||ke;De&&!Pe?j._bgLayer.remove():Pe&&!De&&(X._shouldCreateBgLayer=!0),j._zoomlayer&&!F._dragging&&a({_fullLayout:j}),function(Te,ze){var He,Ve=[];ze.meta&&(He=ze._meta={meta:ze.meta,layout:{meta:ze.meta}});for(var nt=0;nt<Te.length;nt++){var tt=Te[nt];tt.meta?Ve[tt.index]=tt._meta={meta:tt.meta}:ze.meta&&(tt._meta={meta:ze.meta}),ze.meta&&(tt._meta.layout={meta:ze.meta})}Ve.length&&(He||(He=ze._meta={}),He.data=Ve)}(W,X),x(X,j),b.getComponentMethod("colorscale","crossTraceDefaults")(W,X),X._preGUI||(X._preGUI={}),X._tracePreGUI||(X._tracePreGUI={});var Re,fe=X._tracePreGUI,ve={};for(Re in fe)ve[Re]="old";for(J=0;J<W.length;J++)ve[Re=W[J]._fullInput.uid]||(fe[Re]={}),ve[Re]="new";for(Re in ve)ve[Re]==="old"&&delete fe[Re];C(X),b.getComponentMethod("rangeslider","makeData")(X),U||ne.length!==W.length||g.supplyDefaultsUpdateCalc(ne,W)}},g.supplyDefaultsUpdateCalc=function(F,D){for(var U=0;U<D.length;U++){var j=D[U],J=(F[U]||[])[0];if(J&&J.trace){var X=J.trace;if(X._hasCalcTransform){var Z,Y,W,Q=X._arrayAttrs;for(Z=0;Z<Q.length;Z++)Y=Q[Z],W=t.nestedProperty(X,Y).get().slice(),t.nestedProperty(j,Y).set(W)}J.trace=j}}},g.createTransitionData=function(F){F._transitionData||(F._transitionData={}),F._transitionData._frames||(F._transitionData._frames=[]),F._transitionData._frameHash||(F._transitionData._frameHash={}),F._transitionData._counter||(F._transitionData._counter=0),F._transitionData._interruptCallbacks||(F._transitionData._interruptCallbacks=[])},g._hasPlotType=function(F){var D,U=this._basePlotModules||[];for(D=0;D<U.length;D++)if(U[D].name===F)return!0;var j=this._modules||[];for(D=0;D<j.length;D++){var J=j[D].name;if(J===F)return!0;var X=b.modules[J];if(X&&X.categories[F])return!0}return!1},g.cleanPlot=function(F,D,U,j){var J,X,Z=j._basePlotModules||[];for(J=0;J<Z.length;J++){var Y=Z[J];Y.clean&&Y.clean(F,D,U,j)}var W=j._has&&j._has("gl"),Q=D._has&&D._has("gl");W&&!Q&&j._glcontainer!==void 0&&(j._glcontainer.selectAll(".gl-canvas").remove(),j._glcontainer.selectAll(".no-webgl").remove(),j._glcanvas=null);var ne=!!j._infolayer;e:for(J=0;J<U.length;J++){var re=U[J].uid;for(X=0;X<F.length;X++)if(re===F[X].uid)continue e;ne&&j._infolayer.select(".cb"+re).remove()}},g.linkSubplots=function(F,D,U,j){var J,X,Z=j._plots||{},Y=D._plots={},W=D._subplots,Q={_fullData:F,_fullLayout:D},ne=W.cartesian.concat(W.gl2d||[]);for(J=0;J<ne.length;J++){var re,ie=ne[J],se=Z[ie],ge=n.getFromId(Q,ie,"x"),ue=n.getFromId(Q,ie,"y");for(se?re=Y[ie]=se:(re=Y[ie]={}).id=ie,ge._counterAxes.push(ue._id),ue._counterAxes.push(ge._id),ge._subplotsWith.push(ie),ue._subplotsWith.push(ie),re.xaxis=ge,re.yaxis=ue,re._hasClipOnAxisFalse=!1,X=0;X<F.length;X++){var ce=F[X];if(ce.xaxis===re.xaxis._id&&ce.yaxis===re.yaxis._id&&ce.cliponaxis===!1){re._hasClipOnAxisFalse=!0;break}}}var le,de=n.list(Q,null,!0);for(J=0;J<de.length;J++){var Ce=null;(le=de[J]).overlaying&&(Ce=n.getFromId(Q,le.overlaying))&&Ce.overlaying&&(le.overlaying=!1,Ce=null),le._mainAxis=Ce||le,Ce&&(le.domain=Ce.domain.slice()),le._anchorAxis=le.anchor==="free"?null:n.getFromId(Q,le.anchor)}for(J=0;J<de.length;J++)if((le=de[J])._counterAxes.sort(n.idSort),le._subplotsWith.sort(t.subplotSort),le._mainSubplot=M(le,D),le._counterAxes.length&&(le.spikemode&&le.spikemode.indexOf("across")!==-1||le.automargin&&le.mirror&&le.anchor!=="free"||b.getComponentMethod("rangeslider","isVisible")(le))){var xe=1,_e=0;for(X=0;X<le._counterAxes.length;X++){var we=n.getFromId(Q,le._counterAxes[X]);xe=Math.min(xe,we.domain[0]),_e=Math.max(_e,we.domain[1])}xe<_e&&(le._counterDomainMin=xe,le._counterDomainMax=_e)}},g.clearExpandedTraceDefaultColors=function(F){var D,U,j;for(U=[],(D=F._module._colorAttrs)||(F._module._colorAttrs=D=[],d.crawl(F._module.attributes,function(J,X,Z,Y){U[Y]=X,U.length=Y+1,J.valType==="color"&&J.dflt===void 0&&D.push(U.join("."))})),j=0;j<D.length;j++)t.nestedProperty(F,"_input."+D[j]).get()||t.nestedProperty(F,D[j]).set(null)},g.supplyDataDefaults=function(F,D,U,j){var J,X,Z,Y=j._modules,W=j._visibleModules,Q=j._basePlotModules,ne=0,re=0;function ie(Ae){D.push(Ae);var $=Ae._module;$&&(t.pushUnique(Y,$),Ae.visible===!0&&t.pushUnique(W,$),t.pushUnique(Q,Ae._module.basePlotModule),ne++,Ae._input.visible!==!1&&re++)}j._transformModules=[];var se={},ge=[],ue=(U.template||{}).data||{},ce=s.traceTemplater(ue);for(J=0;J<F.length;J++){if(Z=F[J],(X=ce.newTrace(Z)).uid=j._traceUids[J],g.supplyTraceDefaults(Z,X,re,j,J),X.index=J,X._input=Z,X._expandedIndex=ne,X.transforms&&X.transforms.length)for(var le=Z.visible!==!1&&X.visible===!1,de=E(X,D,U,j),Ce=0;Ce<de.length;Ce++){var xe=de[Ce],_e={_template:X._template,type:X.type,uid:X.uid+Ce};le&&xe.visible===!1&&delete xe.visible,g.supplyTraceDefaults(xe,_e,ne,j,J),x(_e,xe),_e.index=J,_e._input=Z,_e._fullInput=X,_e._expandedIndex=ne,_e._expandedInput=xe,ie(_e)}else X._fullInput=X,X._expandedInput=X,ie(X);b.traceIs(X,"carpetAxis")&&(se[X.carpet]=X),b.traceIs(X,"carpetDependent")&&ge.push(J)}for(J=0;J<ge.length;J++)if((X=D[ge[J]]).visible){var we=se[X.carpet];X._carpet=we,we&&we.visible?(X.xaxis=we.xaxis,X.yaxis=we.yaxis):X.visible=!1}},g.supplyAnimationDefaults=function(F){var D;F=F||{};var U={};function j(J,X){return t.coerce(F||{},U,u,J,X)}if(j("mode"),j("direction"),j("fromcurrent"),Array.isArray(F.frame))for(U.frame=[],D=0;D<F.frame.length;D++)U.frame[D]=g.supplyAnimationFrameDefaults(F.frame[D]||{});else U.frame=g.supplyAnimationFrameDefaults(F.frame||{});if(Array.isArray(F.transition))for(U.transition=[],D=0;D<F.transition.length;D++)U.transition[D]=g.supplyAnimationTransitionDefaults(F.transition[D]||{});else U.transition=g.supplyAnimationTransitionDefaults(F.transition||{});return U},g.supplyAnimationFrameDefaults=function(F){var D={};function U(j,J){return t.coerce(F||{},D,u.frame,j,J)}return U("duration"),U("redraw"),D},g.supplyAnimationTransitionDefaults=function(F){var D={};function U(j,J){return t.coerce(F||{},D,u.transition,j,J)}return U("duration"),U("easing"),D},g.supplyFrameDefaults=function(F){var D={};function U(j,J){return t.coerce(F,D,h,j,J)}return U("group"),U("name"),U("traces"),U("baseframe"),U("data"),U("layout"),D},g.supplyTraceDefaults=function(F,D,U,j,J){var X,Z=j.colorway||o.defaults,Y=Z[U%Z.length];function W(de,Ce){return t.coerce(F,D,g.attributes,de,Ce)}var Q=W("visible");W("type"),W("name",j._traceWord+" "+J),W("uirevision",j.uirevision);var ne=g.getModule(D);if(D._module=ne,ne){var re=ne.basePlotModule,ie=re.attr,se=re.attributes;if(ie&&se){var ge=j._subplots,ue="";if(Q||re.name!=="gl2d"){if(Array.isArray(ie))for(X=0;X<ie.length;X++){var ce=ie[X],le=t.coerce(F,D,se,ce);ge[ce]&&t.pushUnique(ge[ce],le),ue+=le}else ue=t.coerce(F,D,se,ie);ge[re.name]&&t.pushUnique(ge[re.name],ue)}}}return Q&&(W("customdata"),W("ids"),W("meta"),b.traceIs(D,"showLegend")?(t.coerce(F,D,ne.attributes.showlegend?ne.attributes:g.attributes,"showlegend"),W("legend"),W("legendwidth"),W("legendgroup"),W("legendgrouptitle.text"),W("legendrank"),D._dfltShowLegend=!0):D._dfltShowLegend=!1,ne&&ne.supplyDefaults(F,D,Y,j),b.traceIs(D,"noOpacity")||W("opacity"),b.traceIs(D,"notLegendIsolatable")&&(D.visible=!!D.visible),b.traceIs(D,"noHover")||(D.hovertemplate||t.coerceHoverinfo(F,D,j),D.type!=="parcats"&&b.getComponentMethod("fx","supplyDefaults")(F,D,Y,j)),ne&&ne.selectPoints&&W("selectedpoints"),g.supplyTransformDefaults(F,D,j)),D},g.hasMakesDataTransform=_,g.supplyTransformDefaults=function(F,D,U){if(D._length||_(F)){var j=U._globalTransforms||[],J=U._transformModules||[];if(Array.isArray(F.transforms)||j.length!==0)for(var X=F.transforms||[],Z=j.concat(X),Y=D.transforms=[],W=0;W<Z.length;W++){var Q,ne=Z[W],re=ne.type,ie=y[re],se=!(ne._module&&ne._module===ie),ge=ie&&typeof ie.transform=="function";ie||t.warn("Unrecognized transform type "+re+"."),ie&&ie.supplyDefaults&&(se||ge)?((Q=ie.supplyDefaults(ne,D,U,F)).type=re,Q._module=ie,t.pushUnique(J,ie)):Q=t.extendFlat({},ne),Y.push(Q)}}},g.supplyLayoutGlobalDefaults=function(F,D,U){function j(ne,re){return t.coerce(F,D,g.layoutAttributes,ne,re)}var J=F.template;t.isPlainObject(J)&&(D.template=J,D._template=J.layout,D._dataTemplate=J.data),j("autotypenumbers");var X=t.coerceFont(j,"font"),Z=X.size;t.coerceFont(j,"title.font",t.extendFlat({},X,{size:Math.round(1.4*Z)})),j("title.text",D._dfltTitle.plot),j("title.xref");var Y=j("title.yref");j("title.pad.t"),j("title.pad.r"),j("title.pad.b"),j("title.pad.l");var W=j("title.automargin");j("title.x"),j("title.xanchor"),j("title.y"),j("title.yanchor"),W&&(Y==="paper"&&(D.title.y!==0&&(D.title.y=1),D.title.yanchor==="auto"&&(D.title.yanchor=D.title.y===0?"top":"bottom")),Y==="container"&&(D.title.y==="auto"&&(D.title.y=1),D.title.yanchor==="auto"&&(D.title.yanchor=D.title.y<.5?"bottom":"top"))),j("uniformtext.mode")&&j("uniformtext.minsize"),j("autosize",!(F.width&&F.height)),j("width"),j("height"),j("minreducedwidth"),j("minreducedheight"),j("margin.l"),j("margin.r"),j("margin.t"),j("margin.b"),j("margin.pad"),j("margin.autoexpand"),F.width&&F.height&&g.sanitizeMargins(D),b.getComponentMethod("grid","sizeDefaults")(F,D),j("paper_bgcolor"),j("separators",U.decimal+U.thousands),j("hidesources"),j("colorway"),j("datarevision");var Q=j("uirevision");j("editrevision",Q),j("selectionrevision",Q),b.getComponentMethod("modebar","supplyLayoutDefaults")(F,D),b.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(F,D,j),b.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(F,D,j),j("meta"),t.isPlainObject(F.transition)&&(j("transition.duration"),j("transition.easing"),j("transition.ordering")),b.getComponentMethod("calendars","handleDefaults")(F,D,"calendar"),b.getComponentMethod("fx","supplyLayoutGlobalDefaults")(F,D,j),t.coerce(F,D,i,"scattermode")},g.plotAutoSize=function(F,D,U){var j,J,X=F._context||{},Z=X.frameMargins,Y=t.isPlotDiv(F);if(Y&&F.emit("plotly_autosize"),X.fillFrame)j=window.innerWidth,J=window.innerHeight,document.body.style.overflow="hidden";else{var W=Y?window.getComputedStyle(F):{};if(j=L(W.width)||L(W.maxWidth)||U.width,J=L(W.height)||L(W.maxHeight)||U.height,T(Z)&&Z>0){var Q=1-2*Z;j=Math.round(Q*j),J=Math.round(Q*J)}}var ne=g.layoutAttributes.width.min,re=g.layoutAttributes.height.min;j<ne&&(j=ne),J<re&&(J=re);var ie=!D.width&&Math.abs(U.width-j)>1,se=!D.height&&Math.abs(U.height-J)>1;(se||ie)&&(ie&&(U.width=j),se&&(U.height=J)),F._initialAutoSize||(F._initialAutoSize={width:j,height:J}),g.sanitizeMargins(U)},g.supplyLayoutModuleDefaults=function(F,D,U,j){var J,X,Z,Y=b.componentsRegistry,W=D._basePlotModules,Q=b.subplotsRegistry.cartesian;for(J in Y)(Z=Y[J]).includeBasePlot&&Z.includeBasePlot(F,D);for(var ne in W.length||W.push(Q),D._has("cartesian")&&(b.getComponentMethod("grid","contentDefaults")(F,D),Q.finalizeSubplots(F,D)),D._subplots)D._subplots[ne].sort(t.subplotSort);for(X=0;X<W.length;X++)(Z=W[X]).supplyLayoutDefaults&&Z.supplyLayoutDefaults(F,D,U);var re=D._modules;for(X=0;X<re.length;X++)(Z=re[X]).supplyLayoutDefaults&&Z.supplyLayoutDefaults(F,D,U);var ie=D._transformModules;for(X=0;X<ie.length;X++)(Z=ie[X]).supplyLayoutDefaults&&Z.supplyLayoutDefaults(F,D,U,j);for(J in Y)(Z=Y[J]).supplyLayoutDefaults&&Z.supplyLayoutDefaults(F,D,U)},g.purge=function(F){var D=F._fullLayout||{};D._glcontainer!==void 0&&(D._glcontainer.selectAll(".gl-canvas").remove(),D._glcontainer.remove(),D._glcanvas=null),D._modeBar&&D._modeBar.destroy(),F._transitionData&&(F._transitionData._interruptCallbacks&&(F._transitionData._interruptCallbacks.length=0),F._transitionData._animationRaf&&window.cancelAnimationFrame(F._transitionData._animationRaf)),t.clearThrottle(),t.clearResponsive(F),delete F.data,delete F.layout,delete F._fullData,delete F._fullLayout,delete F.calcdata,delete F.empty,delete F.fid,delete F.undoqueue,delete F.undonum,delete F.autoplay,delete F.changed,delete F._promises,delete F._redrawTimer,delete F._hmlumcount,delete F._hmpixcount,delete F._transitionData,delete F._transitioning,delete F._initialAutoSize,delete F._transitioningWithDuration,delete F._dragging,delete F._dragged,delete F._dragdata,delete F._hoverdata,delete F._snapshotInProgress,delete F._editing,delete F._mouseDownTime,delete F._legendMouseDownTime,F.removeAllListeners&&F.removeAllListeners()},g.style=function(F){var D,U=F._fullLayout._visibleModules,j=[];for(D=0;D<U.length;D++){var J=U[D];J.style&&t.pushUnique(j,J.style)}for(D=0;D<j.length;D++)j[D](F)},g.sanitizeMargins=function(F){if(F&&F.margin){var D,U=F.width,j=F.height,J=F.margin,X=U-(J.l+J.r),Z=j-(J.t+J.b);X<0&&(D=(U-1)/(J.l+J.r),J.l=Math.floor(D*J.l),J.r=Math.floor(D*J.r)),Z<0&&(D=(j-1)/(J.t+J.b),J.t=Math.floor(D*J.t),J.b=Math.floor(D*J.b))}},g.clearAutoMarginIds=function(F){F._fullLayout._pushmarginIds={}},g.allowAutoMargin=function(F,D){F._fullLayout._pushmarginIds[D]=1},g.autoMargin=function(F,D,U){var j=F._fullLayout,J=j.width,X=j.height,Z=j.margin,Y=j.minreducedwidth,W=j.minreducedheight,Q=t.constrain(J-Z.l-Z.r,2,Y),ne=t.constrain(X-Z.t-Z.b,2,W),re=Math.max(0,J-Q),ie=Math.max(0,X-ne),se=j._pushmargin,ge=j._pushmarginIds;if(Z.autoexpand!==!1){if(U){var ue=U.pad;if(ue===void 0&&(ue=Math.min(12,Z.l,Z.r,Z.t,Z.b)),re){var ce=(U.l+U.r)/re;ce>1&&(U.l/=ce,U.r/=ce)}if(ie){var le=(U.t+U.b)/ie;le>1&&(U.t/=le,U.b/=le)}var de=U.xl!==void 0?U.xl:U.x,Ce=U.xr!==void 0?U.xr:U.x,xe=U.yt!==void 0?U.yt:U.y,_e=U.yb!==void 0?U.yb:U.y;se[D]={l:{val:de,size:U.l+ue},r:{val:Ce,size:U.r+ue},b:{val:_e,size:U.b+ue},t:{val:xe,size:U.t+ue}},ge[D]=1}else delete se[D],delete ge[D];if(!j._replotting)return g.doAutoMargin(F)}},g.doAutoMargin=function(F){var D=F._fullLayout,U=D.width,j=D.height;D._size||(D._size={}),C(D);var J=D._size,X=D.margin,Z={t:0,b:0,l:0,r:0},Y=t.extendFlat({},J),W=F._fullLayout._reservedMargin;for(var Q in W)for(var ne in W[Q]){var re=W[Q][ne];Z[ne]=Math.max(Z[ne],re)}var ie=X.l,se=X.r,ge=X.t,ue=X.b,ce=D._pushmargin,le=D._pushmarginIds,de=D.minreducedwidth,Ce=D.minreducedheight;if(D.margin.autoexpand!==!1){for(var xe in ce)le[xe]||delete ce[xe];for(var _e in ce.base={l:{val:0,size:ie},r:{val:1,size:se},t:{val:1,size:ge},b:{val:0,size:ue}},ce){var we=ce[_e].l||{},Ae=ce[_e].b||{},$=we.val,oe=we.size,pe=Ae.val,ye=Ae.size,ke=U-Z.r-Z.l,De=j-Z.t-Z.b;for(var Pe in ce){if(T(oe)&&ce[Pe].r){var Re=ce[Pe].r.val,fe=ce[Pe].r.size;if(Re>$){var ve=(oe*Re+(fe-ke)*$)/(Re-$),Te=(fe*(1-$)+(oe-ke)*(1-Re))/(Re-$);ve+Te>ie+se&&(ie=ve,se=Te)}}if(T(ye)&&ce[Pe].t){var ze=ce[Pe].t.val,He=ce[Pe].t.size;if(ze>pe){var Ve=(ye*ze+(He-De)*pe)/(ze-pe),nt=(He*(1-pe)+(ye-De)*(1-ze))/(ze-pe);Ve+nt>ue+ge&&(ue=Ve,ge=nt)}}}}}var tt=t.constrain(U-X.l-X.r,2,de),ot=t.constrain(j-X.t-X.b,2,Ce),pt=Math.max(0,U-tt),Tt=Math.max(0,j-ot);if(pt){var yt=(ie+se)/pt;yt>1&&(ie/=yt,se/=yt)}if(Tt){var dt=(ue+ge)/Tt;dt>1&&(ue/=dt,ge/=dt)}if(J.l=Math.round(ie)+Z.l,J.r=Math.round(se)+Z.r,J.t=Math.round(ge)+Z.t,J.b=Math.round(ue)+Z.b,J.p=Math.round(X.pad),J.w=Math.round(U)-J.l-J.r,J.h=Math.round(j)-J.t-J.b,!D._replotting&&(g.didMarginChange(Y,J)||function(Et){if("_redrawFromAutoMarginCount"in Et._fullLayout)return!1;var Ot=n.list(Et,"",!0);for(var Nt in Ot)if(Ot[Nt].autoshift||Ot[Nt].shift)return!0;return!1}(F))){"_redrawFromAutoMarginCount"in D?D._redrawFromAutoMarginCount++:D._redrawFromAutoMarginCount=1;var Pt=3*(1+Object.keys(le).length);if(D._redrawFromAutoMarginCount<Pt)return b.call("_doPlot",F);D._size=Y,t.warn("Too many auto-margin redraws.")}(function(Et){var Ot=n.list(Et,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(Nt){for(var zt=0;zt<Ot.length;zt++){var Ze=Ot[zt][Nt];Ze&&Ze()}})})(F)};var O=["l","r","t","b","p","w","h"];function I(F,D,U){var j=!1,J=[g.previousPromises,function(){if(F._transitionData)return F._transitioning=!1,function(Z){var Y=Promise.resolve();if(!Z)return Y;for(;Z.length;)Y=Y.then(Z.shift());return Y}(F._transitionData._interruptCallbacks)},U.prepareFn,g.rehover,g.reselect,function(){return F.emit("plotly_transitioning",[]),new Promise(function(Z){F._transitioning=!0,D.duration>0&&(F._transitioningWithDuration=!0),F._transitionData._interruptCallbacks.push(function(){j=!0}),U.redraw&&F._transitionData._interruptCallbacks.push(function(){return b.call("redraw",F)}),F._transitionData._interruptCallbacks.push(function(){F.emit("plotly_transitioninterrupted",[])});var Y=0,W=0;function Q(){return Y++,function(){var ne;W++,j||W!==Y||(ne=Z,F._transitionData&&(function(re){if(re)for(;re.length;)re.shift()}(F._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(U.redraw)return b.call("redraw",F)}).then(function(){F._transitioning=!1,F._transitioningWithDuration=!1,F.emit("plotly_transitioned",[])}).then(ne)))}}U.runFn(Q),setTimeout(Q())})}],X=t.syncOrAsync(J,F);return X&&X.then||(X=Promise.resolve()),X.then(function(){return F})}g.didMarginChange=function(F,D){for(var U=0;U<O.length;U++){var j=O[U],J=F[j],X=D[j];if(!T(J)||Math.abs(X-J)>1)return!0}return!1},g.graphJson=function(F,D,U,j,J,X){(J&&D&&!F._fullData||J&&!D&&!F._fullLayout)&&g.supplyDefaults(F);var Z=J?F._fullData:F.data,Y=J?F._fullLayout:F.layout,W=(F._transitionData||{})._frames;function Q(ie,se){if(typeof ie=="function")return se?"_function_":null;if(t.isPlainObject(ie)){var ge,ue={};return Object.keys(ie).sort().forEach(function(ce){if(["_","["].indexOf(ce.charAt(0))===-1)if(typeof ie[ce]!="function"){if(U==="keepdata"){if(ce.substr(ce.length-3)==="src")return}else if(U==="keepstream"){if(typeof(ge=ie[ce+"src"])=="string"&&ge.indexOf(":")>0&&!t.isPlainObject(ie.stream))return}else if(U!=="keepall"&&typeof(ge=ie[ce+"src"])=="string"&&ge.indexOf(":")>0)return;ue[ce]=Q(ie[ce],se)}else se&&(ue[ce]="_function")}),ue}return Array.isArray(ie)?ie.map(function(ce){return Q(ce,se)}):t.isTypedArray(ie)?t.simpleMap(ie,t.identity):t.isJSDate(ie)?t.ms2DateTimeLocal(+ie):ie}var ne={data:(Z||[]).map(function(ie){var se=Q(ie);return D&&delete se.fit,se})};if(!D&&(ne.layout=Q(Y),J)){var re=Y._size;ne.layout.computed={margin:{b:re.b,l:re.l,r:re.r,t:re.t}}}return W&&(ne.frames=Q(W)),X&&(ne.config=Q(F._context,!0)),j==="object"?ne:JSON.stringify(ne)},g.modifyFrames=function(F,D){var U,j,J,X=F._transitionData._frames,Z=F._transitionData._frameHash;for(U=0;U<D.length;U++)switch((j=D[U]).type){case"replace":J=j.value;var Y=(X[j.index]||{}).name,W=J.name;X[j.index]=Z[W]=J,W!==Y&&(delete Z[Y],Z[W]=J);break;case"insert":Z[(J=j.value).name]=J,X.splice(j.index,0,J);break;case"delete":delete Z[(J=X[j.index]).name],X.splice(j.index,1)}return Promise.resolve()},g.computeFrame=function(F,D){var U,j,J,X,Z=F._transitionData._frameHash;if(!D)throw new Error("computeFrame must be given a string frame name");var Y=Z[D.toString()];if(!Y)return!1;for(var W=[Y],Q=[Y.name];Y.baseframe&&(Y=Z[Y.baseframe.toString()])&&Q.indexOf(Y.name)===-1;)W.push(Y),Q.push(Y.name);for(var ne={};Y=W.pop();)if(Y.layout&&(ne.layout=g.extendLayout(ne.layout,Y.layout)),Y.data){if(ne.data||(ne.data=[]),!(j=Y.traces))for(j=[],U=0;U<Y.data.length;U++)j[U]=U;for(ne.traces||(ne.traces=[]),U=0;U<Y.data.length;U++)(J=j[U])!=null&&((X=ne.traces.indexOf(J))===-1&&(X=ne.data.length,ne.traces[X]=J),ne.data[X]=g.extendTrace(ne.data[X],Y.data[U]))}return ne},g.recomputeFrameHash=function(F){for(var D=F._transitionData._frameHash={},U=F._transitionData._frames,j=0;j<U.length;j++){var J=U[j];J&&J.name&&(D[J.name]=J)}},g.extendObjectWithContainers=function(F,D,U){var j,J,X,Z,Y,W,Q,ne=t.extendDeepNoArrays({},D||{}),re=t.expandObjectPaths(ne),ie={};if(U&&U.length)for(X=0;X<U.length;X++)(J=(j=t.nestedProperty(re,U[X])).get())===void 0?t.nestedProperty(ie,U[X]).set(null):(j.set(null),t.nestedProperty(ie,U[X]).set(J));if(F=t.extendDeepNoArrays(F||{},re),U&&U.length){for(X=0;X<U.length;X++)if(W=t.nestedProperty(ie,U[X]).get()){for(Q=(Y=t.nestedProperty(F,U[X])).get(),Array.isArray(Q)||(Q=[],Y.set(Q)),Z=0;Z<W.length;Z++){var se=W[Z];Q[Z]=se===null?null:g.extendObjectWithContainers(Q[Z],se)}Y.set(Q)}}return F},g.dataArrayContainers=["transforms","dimensions"],g.layoutArrayContainers=b.layoutArrayContainers,g.extendTrace=function(F,D){return g.extendObjectWithContainers(F,D,g.dataArrayContainers)},g.extendLayout=function(F,D){return g.extendObjectWithContainers(F,D,g.layoutArrayContainers)},g.transition=function(F,D,U,j,J,X){var Z={redraw:J.redraw},Y={},W=[];return Z.prepareFn=function(){for(var Q=Array.isArray(D)?D.length:0,ne=j.slice(0,Q),re=0;re<ne.length;re++){var ie=ne[re],se=F._fullData[ie]._module;if(se){if(se.animatable){var ge=se.basePlotModule.name;Y[ge]||(Y[ge]=[]),Y[ge].push(ie)}F.data[ne[re]]=g.extendTrace(F.data[ne[re]],D[re])}}var ue=t.expandObjectPaths(t.extendDeepNoArrays({},U)),ce=/^[xy]axis[0-9]*$/;for(var le in ue)ce.test(le)&&delete ue[le].range;g.extendLayout(F.layout,ue),delete F.calcdata,g.supplyDefaults(F),g.doCalcdata(F);var de=t.expandObjectPaths(U);if(de){var Ce=F._fullLayout._plots;for(var xe in Ce){var _e=Ce[xe],we=_e.xaxis,Ae=_e.yaxis,$=we.range.slice(),oe=Ae.range.slice(),pe=null,ye=null,ke=null,De=null;Array.isArray(de[we._name+".range"])?pe=de[we._name+".range"].slice():Array.isArray((de[we._name]||{}).range)&&(pe=de[we._name].range.slice()),Array.isArray(de[Ae._name+".range"])?ye=de[Ae._name+".range"].slice():Array.isArray((de[Ae._name]||{}).range)&&(ye=de[Ae._name].range.slice()),$&&pe&&(we.r2l($[0])!==we.r2l(pe[0])||we.r2l($[1])!==we.r2l(pe[1]))&&(ke={xr0:$,xr1:pe}),oe&&ye&&(Ae.r2l(oe[0])!==Ae.r2l(ye[0])||Ae.r2l(oe[1])!==Ae.r2l(ye[1]))&&(De={yr0:oe,yr1:ye}),(ke||De)&&W.push(t.extendFlat({plotinfo:_e},ke,De))}}return Promise.resolve()},Z.runFn=function(Q){var ne,re,ie=F._fullLayout._basePlotModules,se=W.length;if(U)for(re=0;re<ie.length;re++)ie[re].transitionAxes&&ie[re].transitionAxes(F,W,X,Q);for(var ge in se?((ne=t.extendFlat({},X)).duration=0,delete Y.cartesian):ne=X,Y){var ue=Y[ge];F._fullData[ue[0]]._module.basePlotModule.plot(F,ue,ne,Q)}},I(F,X,Z)},g.transitionFromReact=function(F,D,U,j){var J=F._fullLayout,X=J.transition,Z={},Y=[];return Z.prepareFn=function(){var W=J._plots;for(var Q in Z.redraw=!1,D.anim==="some"&&(Z.redraw=!0),U.anim==="some"&&(Z.redraw=!0),W){var ne=W[Q],re=ne.xaxis,ie=ne.yaxis,se=j[re._name].range.slice(),ge=j[ie._name].range.slice(),ue=re.range.slice(),ce=ie.range.slice();re.setScale(),ie.setScale();var le=null,de=null;re.r2l(se[0])===re.r2l(ue[0])&&re.r2l(se[1])===re.r2l(ue[1])||(le={xr0:se,xr1:ue}),ie.r2l(ge[0])===ie.r2l(ce[0])&&ie.r2l(ge[1])===ie.r2l(ce[1])||(de={yr0:ge,yr1:ce}),(le||de)&&Y.push(t.extendFlat({plotinfo:ne},le,de))}return Promise.resolve()},Z.runFn=function(W){for(var Q,ne,re,ie=F._fullData,se=F._fullLayout._basePlotModules,ge=[],ue=0;ue<ie.length;ue++)ge.push(ue);function ce(){if(F._fullLayout)for(var de=0;de<se.length;de++)se[de].transitionAxes&&se[de].transitionAxes(F,Y,Q,W)}function le(){if(F._fullLayout)for(var de=0;de<se.length;de++)se[de].plot(F,re,ne,W)}Y.length&&D.anim?X.ordering==="traces first"?(Q=t.extendFlat({},X,{duration:0}),re=ge,ne=X,setTimeout(ce,X.duration),le()):(Q=X,re=null,ne=t.extendFlat({},X,{duration:0}),setTimeout(le,Q.duration),ce()):Y.length?(Q=X,ce()):D.anim&&(re=ge,ne=X,le())},I(F,X,Z)},g.doCalcdata=function(F,D){var U,j,J,X,Z=n.list(F),Y=F._fullData,W=F._fullLayout,Q=new Array(Y.length),ne=(F.calcdata||[]).slice();for(F.calcdata=Q,W._numBoxes=0,W._numViolins=0,W._violinScaleGroupStats={},F._hmpixcount=0,F._hmlumcount=0,W._piecolormap={},W._sunburstcolormap={},W._treemapcolormap={},W._iciclecolormap={},W._funnelareacolormap={},J=0;J<Y.length;J++)Array.isArray(D)&&D.indexOf(J)===-1&&(Q[J]=ne[J]);for(J=0;J<Y.length;J++)(U=Y[J])._arrayAttrs=d.findArrayAttributes(U),U._extremes={};var re=W._subplots.polar||[];for(J=0;J<re.length;J++)Z.push(W[re[J]].radialaxis,W[re[J]].angularaxis);for(var ie in W._colorAxes){var se=W[ie];se.cauto!==!1&&(delete se.cmin,delete se.cmax)}var ge=!1;function ue(de){if(U=Y[de],j=U._module,U.visible===!0&&U.transforms){if(j&&j.calc){var Ce=j.calc(F,U);Ce[0]&&Ce[0].t&&Ce[0].t._scene&&delete Ce[0].t._scene.dirty}for(X=0;X<U.transforms.length;X++){var xe=U.transforms[X];(j=y[xe.type])&&j.calcTransform&&(U._hasCalcTransform=!0,ge=!0,j.calcTransform(F,U,xe))}}}function ce(de,Ce){if(U=Y[de],!!(j=U._module).isContainer===Ce){var xe=[];if(U.visible===!0&&U._length!==0){delete U._indexToPoints;var _e=U.transforms||[];for(X=_e.length-1;X>=0;X--)if(_e[X].enabled){U._indexToPoints=_e[X]._indexToPoints;break}j&&j.calc&&(xe=j.calc(F,U))}Array.isArray(xe)&&xe[0]||(xe=[{x:r,y:r}]),xe[0].t||(xe[0].t={}),xe[0].trace=U,Q[de]=xe}}for(R(Z,Y,W),J=0;J<Y.length;J++)ce(J,!0);for(J=0;J<Y.length;J++)ue(J);for(ge&&R(Z,Y,W),J=0;J<Y.length;J++)ce(J,!0);for(J=0;J<Y.length;J++)ce(J,!1);V(F);var le=function(de,Ce){var xe,_e,we,Ae,$,oe=[];function pe(Ze,Ye,je){var Ke=Ye._id.charAt(0);if(Ze==="histogram2dcontour"){var st=Ye._counterAxes[0],Se=n.getFromId(Ce,st),Ie=Ke==="x"||st==="x"&&Se.type==="category",We=Ke==="y"||st==="y"&&Se.type==="category";return function(it,lt){return it===0||lt===0||Ie&&it===je[lt].length-1||We&&lt===je.length-1?-1:(Ke==="y"?lt:it)-1}}return function(it,lt){return Ke==="y"?lt:it}}var ye={min:function(Ze){return t.aggNums(Math.min,null,Ze)},max:function(Ze){return t.aggNums(Math.max,null,Ze)},sum:function(Ze){return t.aggNums(function(Ye,je){return Ye+je},null,Ze)},total:function(Ze){return t.aggNums(function(Ye,je){return Ye+je},null,Ze)},mean:function(Ze){return t.mean(Ze)},median:function(Ze){return t.median(Ze)}};for(xe=0;xe<de.length;xe++){var ke=de[xe];if(ke.type==="category"){var De=ke.categoryorder.match(N);if(De){var Pe=De[1],Re=De[2],fe=ke._id.charAt(0),ve=fe==="x",Te=[];for(_e=0;_e<ke._categories.length;_e++)Te.push([ke._categories[_e],[]]);for(_e=0;_e<ke._traceIndices.length;_e++){var ze=ke._traceIndices[_e],He=Ce._fullData[ze];if(He.visible===!0){var Ve=He.type;b.traceIs(He,"histogram")&&(delete He._xautoBinFinished,delete He._yautoBinFinished);var nt=Ve==="splom",tt=Ve==="scattergl",ot=Ce.calcdata[ze];for(we=0;we<ot.length;we++){var pt,Tt,yt=ot[we];if(nt){var dt=He._axesDim[ke._id];if(!ve){var Pt=He._diag[dt][0];Pt&&(ke=Ce._fullLayout[n.id2name(Pt)])}var Et=yt.trace.dimensions[dt].values;for(Ae=0;Ae<Et.length;Ae++)for(pt=ke._categoriesMap[Et[Ae]],$=0;$<yt.trace.dimensions.length;$++)if($!==dt){var Ot=yt.trace.dimensions[$];Te[pt][1].push(Ot.values[Ae])}}else if(tt){for(Ae=0;Ae<yt.t.x.length;Ae++)ve?(pt=yt.t.x[Ae],Tt=yt.t.y[Ae]):(pt=yt.t.y[Ae],Tt=yt.t.x[Ae]),Te[pt][1].push(Tt);yt.t&&yt.t._scene&&delete yt.t._scene.dirty}else if(yt.hasOwnProperty("z")){Tt=yt.z;var Nt=pe(He.type,ke,Tt);for(Ae=0;Ae<Tt.length;Ae++)for($=0;$<Tt[Ae].length;$++)(pt=Nt($,Ae))+1&&Te[pt][1].push(Tt[Ae][$])}else for((pt=yt.p)===void 0&&(pt=yt[fe]),(Tt=yt.s)===void 0&&(Tt=yt.v),Tt===void 0&&(Tt=ve?yt.y:yt.x),Array.isArray(Tt)||(Tt=Tt===void 0?[]:[Tt]),Ae=0;Ae<Tt.length;Ae++)Te[pt][1].push(Tt[Ae])}}}ke._categoriesValue=Te;var zt=[];for(_e=0;_e<Te.length;_e++)zt.push([Te[_e][0],ye[Pe](Te[_e][1])]);zt.sort(function(Ze,Ye){return Ze[1]-Ye[1]}),ke._categoriesAggregatedValue=zt,ke._initialCategories=zt.map(function(Ze){return Ze[0]}),Re==="descending"&&ke._initialCategories.reverse(),oe=oe.concat(ke.sortByInitialCategories())}}}return oe}(Z,F);if(le.length){for(W._numBoxes=0,W._numViolins=0,J=0;J<le.length;J++)ce(le[J],!0);for(J=0;J<le.length;J++)ce(le[J],!1);V(F)}b.getComponentMethod("fx","calc")(F),b.getComponentMethod("errorbars","calc")(F)};var N=/(total|sum|min|max|mean|median) (ascending|descending)/;function R(F,D,U){var j={};function J(W){W.clearCalc(),W.type==="multicategory"&&W.setupMultiCategory(D),j[W._id]=1}t.simpleMap(F,J);for(var X=U._axisMatchGroups||[],Z=0;Z<X.length;Z++)for(var Y in X[Z])j[Y]||J(U[n.id2name(Y)])}function V(F){var D,U,j,J=F._fullLayout,X=J._visibleModules,Z={};for(U=0;U<X.length;U++){var Y=X[U],W=Y.crossTraceCalc;if(W){var Q=Y.basePlotModule.name;Z[Q]?t.pushUnique(Z[Q],W):Z[Q]=[W]}}for(j in Z){var ne=Z[j],re=J._subplots[j];if(Array.isArray(re))for(D=0;D<re.length;D++){var ie=re[D],se=j==="cartesian"?J._plots[ie]:J[ie];for(U=0;U<ne.length;U++)ne[U](F,se,ie)}else for(U=0;U<ne.length;U++)ne[U](F)}}g.rehover=function(F){F._fullLayout._rehover&&F._fullLayout._rehover()},g.redrag=function(F){F._fullLayout._redrag&&F._fullLayout._redrag()},g.reselect=function(F){var D=F._fullLayout,U=(F.layout||{}).selections,j=D._previousSelections;D._previousSelections=U;var J=D._reselect||JSON.stringify(U)!==JSON.stringify(j);b.getComponentMethod("selections","reselect")(F,J)},g.generalUpdatePerTraceModule=function(F,D,U,j){var J,X=D.traceHash,Z={};for(J=0;J<U.length;J++){var Y=U[J],W=Y[0].trace;W.visible&&(Z[W.type]=Z[W.type]||[],Z[W.type].push(Y))}for(var Q in X)if(!Z[Q]){var ne=X[Q][0];ne[0].trace.visible=!1,Z[Q]=[ne]}for(var re in Z){var ie=Z[re];ie[0][0].trace._module.plot(F,D,t.filterVisible(ie),j)}D.traceHash=Z},g.plotBasePlot=function(F,D,U,j,J){var X=b.getModule(F),Z=f(D.calcdata,X)[0];X.plot(D,Z,j,J)},g.cleanBasePlot=function(F,D,U,j,J){var X=J._has&&J._has(F),Z=U._has&&U._has(F);X&&!Z&&J["_"+F+"layer"].selectAll("g.trace").remove()}},9813:function(K){K.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},10869:function(K,z,e){var S=e(71828),k=e(61082).tester,l=S.findIndexOfMin,T=S.isAngleInsideSector,b=S.angleDelta,d=S.angleDist;function s(n,a,i,u){var h,f,x=u[0],v=u[1],g=o(Math.sin(a)-Math.sin(n)),y=o(Math.cos(a)-Math.cos(n)),p=Math.tan(i),m=o(1/p),w=g/y,c=v-w*x;return m?g&&y?f=p*(h=c/(p-w)):y?(h=v*m,f=v):(h=x,f=x*p):g&&y?(h=0,f=c):y?(h=0,f=v):h=f=NaN,[h,f]}function t(n,a,i,u){return S.isFullCircle([a,i])?function(h,f){var x,v=f.length,g=new Array(v+1);for(x=0;x<v;x++){var y=f[x];g[x]=[h*Math.cos(y),h*Math.sin(y)]}return g[x]=g[0].slice(),g}(n,u):function(h,f,x,v){var g,y,p=v.length,m=[];function w(N){return[h*Math.cos(N),h*Math.sin(N)]}function c(N,R,V){return s(N,R,V,w(N))}function M(N){return S.mod(N,p)}function _(N){return T(N,[f,x])}var E=l(v,function(N){return _(N)?d(N,f):1/0}),L=c(v[E],v[M(E-1)],f);for(m.push(L),g=E,y=0;y<p;g++,y++){var C=v[M(g)];if(!_(C))break;m.push(w(C))}var O=l(v,function(N){return _(N)?d(N,x):1/0}),I=c(v[O],v[M(O+1)],x);return m.push(I),m.push([0,0]),m.push(m[0].slice()),m}(n,a,i,u)}function o(n){return Math.abs(n)>1e-10?n:0}function r(n,a,i){a=a||0,i=i||0;for(var u=n.length,h=new Array(u),f=0;f<u;f++){var x=n[f];h[f]=[a+x[0],i-x[1]]}return h}K.exports={isPtInsidePolygon:function(n,a,i,u,h){if(!T(a,u))return!1;var f,x;i[0]<i[1]?(f=i[0],x=i[1]):(f=i[1],x=i[0]);var v=k(t(f,u[0],u[1],h)),g=k(t(x,u[0],u[1],h)),y=[n*Math.cos(a),n*Math.sin(a)];return g.contains(y)&&!v.contains(y)},findPolygonOffset:function(n,a,i,u){for(var h=1/0,f=1/0,x=t(n,a,i,u),v=0;v<x.length;v++){var g=x[v];h=Math.min(h,g[0]),f=Math.min(f,-g[1])}return[h,f]},findEnclosingVertexAngles:function(n,a){var i=l(a,function(h){var f=b(h,n);return f>0?f:1/0}),u=S.mod(i+1,a.length);return[a[i],a[u]]},findIntersectionXY:s,findXYatLength:function(n,a,i,u){var h=-a*i,f=a*a+1,x=2*(a*h-i),v=h*h+i*i-n*n,g=Math.sqrt(x*x-4*f*v),y=(-x+g)/(2*f),p=(-x-g)/(2*f);return[[y,a*y+h+u],[p,a*p+h+u]]},clampTiny:o,pathPolygon:function(n,a,i,u,h,f){return"M"+r(t(n,a,i,u),h,f).join("L")},pathPolygonAnnulus:function(n,a,i,u,h,f,x){var v,g;n<a?(v=n,g=a):(v=a,g=n);var y=r(t(v,i,u,h),f,x);return"M"+r(t(g,i,u,h),f,x).reverse().join("L")+"M"+y.join("L")}}},23580:function(K,z,e){var S=e(27659).AU,k=e(71828).counterRegex,l=e(77997),T=e(9813),b=T.attr,d=T.name,s=k(d),t={};t[b]={valType:"subplotid",dflt:d,editType:"calc"},K.exports={attr:b,name:d,idRoot:d,idRegex:s,attrRegex:s,attributes:t,layoutAttributes:e(73812),supplyLayoutDefaults:e(68993),plot:function(o){for(var r=o._fullLayout,n=o.calcdata,a=r._subplots[d],i=0;i<a.length;i++){var u=a[i],h=S(n,d,u),f=r[u]._subplot;f||(f=l(o,u),r[u]._subplot=f),f.plot(h,r,o._promises)}},clean:function(o,r,n,a){for(var i=a._subplots[d]||[],u=a._has&&a._has("gl"),h=r._has&&r._has("gl"),f=u&&!h,x=0;x<i.length;x++){var v=i[x],g=a[v]._subplot;if(!r[v]&&g)for(var y in g.framework.remove(),g.layers["radial-axis-title"].remove(),g.clipPaths)g.clipPaths[y].remove();f&&g._scene&&(g._scene.destroy(),g._scene=null)}},toSVG:e(93612).toSVG}},73812:function(K,z,e){var S=e(22399),k=e(13838),l=e(27670).Y,T=e(71828).extendFlat,b=e(30962).overrideAll,d=b({color:k.color,showline:T({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:T({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),s=b({tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,ticklabelstep:k.ticklabelstep,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickfont:k.tickfont,tickangle:k.tickangle,tickformat:k.tickformat,tickformatstops:k.tickformatstops,layer:k.layer},"plot","from-root"),t={visible:T({},k.visible,{dflt:!0}),type:T({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorange:T({},k.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:T({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:k.categoryorder,categoryarray:k.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:T({},k.title.text,{editType:"plot",dflt:""}),font:T({},k.title.font,{editType:"plot"}),editType:"plot"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}};T(t,d,s);var o={visible:T({},k.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:k.autotypenumbers,categoryorder:k.categoryorder,categoryarray:k.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};T(o,d,s),K.exports={domain:l({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:S.background},radialaxis:t,angularaxis:o,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},68993:function(K,z,e){var S=e(71828),k=e(7901),l=e(44467),T=e(49119),b=e(27659).NG,d=e(26218),s=e(38701),t=e(96115),o=e(89426),r=e(15258),n=e(92128),a=e(4322),i=e(73812),u=e(12101),h=e(9813),f=h.axisNames;function x(g,y,p,m){var w=p("bgcolor");m.bgColor=k.combine(w,m.paper_bgcolor);var c=p("sector");p("hole");var M,_=b(m.fullData,h.name,m.id),E=m.layoutOut;function L(W,Q){return p(M+"."+W,Q)}for(var C=0;C<f.length;C++){M=f[C],S.isPlainObject(g[M])||(g[M]={});var O=g[M],I=l.newContainer(y,M);I._id=I._name=M,I._attr=m.id+"."+M,I._traceIndices=_.map(function(W){return W._expandedIndex});var N=h.axisName2dataArray[M],R=v(O,I,L,_,N,m);r(O,I,L,{axData:_,dataAttr:N});var V=L("visible");switch(u(I,y,E),L("uirevision",y.uirevision),I._m=1,M){case"radialaxis":var F=L("autorange",!I.isValidRange(O.range));O.autorange=F,!F||R!=="linear"&&R!=="-"||L("rangemode"),F==="reversed"&&(I._m=-1),L("range"),I.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(R==="date"){S.log("Polar plots do not support date angular axes yet.");for(var D=0;D<_.length;D++)_[D].visible=!1;R=O.type=I.type="linear"}L(R==="linear"?"thetaunit":"period");var U=L("direction");L("rotation",{counterclockwise:0,clockwise:90}[U])}if(o(O,I,L,I.type,{tickSuffixDflt:I.thetaunit==="degrees"?"°":void 0}),V){var j,J,X,Z,Y=m.font||{};J=(j=L("color"))===O.color?j:Y.color,X=Y.size,Z=Y.family,d(O,I,L,I.type),t(O,I,L,I.type,{font:{color:J,size:X,family:Z}}),s(O,I,L,{outerTicks:!0}),n(O,I,L,{dfltColor:j,bgColor:m.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:i[M]}),L("layer"),M==="radialaxis"&&(L("side"),L("angle",c[0]),L("title.text"),S.coerceFont(L,"title.font",{color:J,size:S.bigFont(X),family:Z}))}R!=="category"&&L("hoverformat"),I._input=O}y.angularaxis.type==="category"&&p("gridshape")}function v(g,y,p,m,w,c){var M=p("autotypenumbers",c.autotypenumbersDflt);if(p("type")==="-"){for(var _,E=0;E<m.length;E++)if(m[E].visible){_=m[E];break}_&&_[w]&&(y.type=a(_[w],"gregorian",{noMultiCategory:!0,autotypenumbers:M})),y.type==="-"?y.type="linear":g.type=y.type}return y.type}K.exports=function(g,y,p){T(g,y,p,{type:h.name,attributes:i,handleDefaults:x,font:y.font,autotypenumbersDflt:y.autotypenumbers,paper_bgcolor:y.paper_bgcolor,fullData:p,layoutOut:y})}},77997:function(K,z,e){var S=e(39898),k=e(84267),l=e(73972),T=e(71828),b=T.strRotate,d=T.strTranslate,s=e(7901),t=e(91424),o=e(74875),r=e(89298),n=e(21994),a=e(12101),i=e(71739).doAutoRange,u=e(29323),h=e(28569),f=e(30211),x=e(92998),v=e(47322).prepSelect,g=e(47322).selectOnClick,y=e(47322).clearOutline,p=e(6964),m=e(33306),w=e(61549).redrawReglTraces,c=e(18783).MID_SHIFT,M=e(9813),_=e(10869),E=e(23893),L=E.smith,C=E.reactanceArc,O=E.resistanceArc,I=E.smithTransform,N=T._,R=T.mod,V=T.deg2rad,F=T.rad2deg;function D(Z,Y,W){this.isSmith=W||!1,this.id=Y,this.gd=Z,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var Q=Z._fullLayout,ne="clip"+Q._uid+Y;this.clipIds.forTraces=ne+"-for-traces",this.clipPaths.forTraces=Q._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=Q["_"+(W?"smith":"polar")+"layer"].append("g").attr("class",Y),this.getHole=function(re){return this.isSmith?0:re.hole},this.getSector=function(re){return this.isSmith?[0,360]:re.sector},this.getRadial=function(re){return this.isSmith?re.realaxis:re.radialaxis},this.getAngular=function(re){return this.isSmith?re.imaginaryaxis:re.angularaxis},W||(this.radialTickLayout=null,this.angularTickLayout=null)}var U=D.prototype;function j(Z){var Y=Z.ticks+String(Z.ticklen)+String(Z.showticklabels);return"side"in Z&&(Y+=Z.side),Y}function J(Z,Y){return Y[T.findIndexOfMin(Y,function(W){return T.angleDist(Z,W)})]}function X(Z,Y,W){return Y?(Z.attr("display",null),Z.attr(W)):Z&&Z.attr("display","none"),Z}K.exports=function(Z,Y,W){return new D(Z,Y,W)},U.plot=function(Z,Y){for(var W=this,Q=Y[W.id],ne=!1,re=0;re<Z.length;re++)if(Z[re][0].trace.cliponaxis===!1){ne=!0;break}W._hasClipOnAxisFalse=ne,W.updateLayers(Y,Q),W.updateLayout(Y,Q),o.generalUpdatePerTraceModule(W.gd,W,Z,Q),W.updateFx(Y,Q),W.isSmith&&(delete Q.realaxis.range,delete Q.imaginaryaxis.range)},U.updateLayers=function(Z,Y){var W=this,Q=W.isSmith,ne=W.layers,re=W.getRadial(Y),ie=W.getAngular(Y),se=M.layerNames,ge=se.indexOf("frontplot"),ue=se.slice(0,ge),ce=ie.layer==="below traces",le=re.layer==="below traces";ce&&ue.push("angular-line"),le&&ue.push("radial-line"),ce&&ue.push("angular-axis"),le&&ue.push("radial-axis"),ue.push("frontplot"),ce||ue.push("angular-line"),le||ue.push("radial-line"),ce||ue.push("angular-axis"),le||ue.push("radial-axis");var de=(Q?"smith":"polar")+"sublayer",Ce=W.framework.selectAll("."+de).data(ue,String);Ce.enter().append("g").attr("class",function(xe){return de+" "+xe}).each(function(xe){var _e=ne[xe]=S.select(this);switch(xe){case"frontplot":Q||_e.append("g").classed("barlayer",!0),_e.append("g").classed("scatterlayer",!0);break;case"backplot":_e.append("g").classed("maplayer",!0);break;case"plotbg":ne.bg=_e.append("path");break;case"radial-grid":case"angular-grid":_e.style("fill","none");break;case"radial-line":_e.append("line").style("fill","none");break;case"angular-line":_e.append("path").style("fill","none")}}),Ce.order()},U.updateLayout=function(Z,Y){var W=this,Q=W.layers,ne=Z._size,re=W.getRadial(Y),ie=W.getAngular(Y),se=Y.domain.x,ge=Y.domain.y;W.xOffset=ne.l+ne.w*se[0],W.yOffset=ne.t+ne.h*(1-ge[1]);var ue=W.xLength=ne.w*(se[1]-se[0]),ce=W.yLength=ne.h*(ge[1]-ge[0]),le=W.getSector(Y);W.sectorInRad=le.map(V);var de,Ce,xe,_e,we,Ae=W.sectorBBox=function(tt){var ot,pt=tt[0],Tt=tt[1]-pt,yt=R(pt,360),dt=yt+Tt,Pt=Math.cos(V(yt)),Et=Math.sin(V(yt)),Ot=Math.cos(V(dt)),Nt=Math.sin(V(dt));return ot=yt<=90&&dt>=90||yt>90&&dt>=450?1:Et<=0&&Nt<=0?0:Math.max(Et,Nt),[yt<=180&&dt>=180||yt>180&&dt>=540?-1:Pt>=0&&Ot>=0?0:Math.min(Pt,Ot),yt<=270&&dt>=270||yt>270&&dt>=630?-1:Et>=0&&Nt>=0?0:Math.min(Et,Nt),dt>=360?1:Pt<=0&&Ot<=0?0:Math.max(Pt,Ot),ot]}(le),$=Ae[2]-Ae[0],oe=Ae[3]-Ae[1],pe=ce/ue,ye=Math.abs(oe/$);pe>ye?(de=ue,we=(ce-(Ce=ue*ye))/ne.h/2,xe=[se[0],se[1]],_e=[ge[0]+we,ge[1]-we]):(Ce=ce,we=(ue-(de=ce/ye))/ne.w/2,xe=[se[0]+we,se[1]-we],_e=[ge[0],ge[1]]),W.xLength2=de,W.yLength2=Ce,W.xDomain2=xe,W.yDomain2=_e;var ke,De=W.xOffset2=ne.l+ne.w*xe[0],Pe=W.yOffset2=ne.t+ne.h*(1-_e[1]),Re=W.radius=de/$,fe=W.innerRadius=W.getHole(Y)*Re,ve=W.cx=De-Re*Ae[0],Te=W.cy=Pe+Re*Ae[3],ze=W.cxx=ve-De,He=W.cyy=Te-Pe,Ve=re.side;Ve==="counterclockwise"?(ke=Ve,Ve="top"):Ve==="clockwise"&&(ke=Ve,Ve="bottom"),W.radialAxis=W.mockAxis(Z,Y,re,{_id:"x",side:Ve,_trueSide:ke,domain:[fe/ne.w,Re/ne.w]}),W.angularAxis=W.mockAxis(Z,Y,ie,{side:"right",domain:[0,Math.PI],autorange:!1}),W.doAutoRange(Z,Y),W.updateAngularAxis(Z,Y),W.updateRadialAxis(Z,Y),W.updateRadialAxisTitle(Z,Y),W.xaxis=W.mockCartesianAxis(Z,Y,{_id:"x",domain:xe}),W.yaxis=W.mockCartesianAxis(Z,Y,{_id:"y",domain:_e});var nt=W.pathSubplot();W.clipPaths.forTraces.select("path").attr("d",nt).attr("transform",d(ze,He)),Q.frontplot.attr("transform",d(De,Pe)).call(t.setClipUrl,W._hasClipOnAxisFalse?null:W.clipIds.forTraces,W.gd),Q.bg.attr("d",nt).attr("transform",d(ve,Te)).call(s.fill,Y.bgcolor)},U.mockAxis=function(Z,Y,W,Q){var ne=T.extendFlat({},W,Q);return a(ne,Y,Z),ne},U.mockCartesianAxis=function(Z,Y,W){var Q=this,ne=Q.isSmith,re=W._id,ie=T.extendFlat({type:"linear"},W);n(ie,Z);var se={x:[0,2],y:[1,3]};return ie.setRange=function(){var ge=Q.sectorBBox,ue=se[re],ce=Q.radialAxis._rl,le=(ce[1]-ce[0])/(1-Q.getHole(Y));ie.range=[ge[ue[0]]*le,ge[ue[1]]*le]},ie.isPtWithinRange=re!=="x"||ne?function(){return!0}:function(ge){return Q.isPtInside(ge)},ie.setRange(),ie.setScale(),ie},U.doAutoRange=function(Z,Y){var W=this,Q=W.gd,ne=W.radialAxis,re=W.getRadial(Y);i(Q,ne);var ie=ne.range;re.range=ie.slice(),re._input.range=ie.slice(),ne._rl=[ne.r2l(ie[0],null,"gregorian"),ne.r2l(ie[1],null,"gregorian")]},U.updateRadialAxis=function(Z,Y){var W=this,Q=W.gd,ne=W.layers,re=W.radius,ie=W.innerRadius,se=W.cx,ge=W.cy,ue=W.getRadial(Y),ce=R(W.getSector(Y)[0],360),le=W.radialAxis,de=ie<re,Ce=W.isSmith;Ce||(W.fillViewInitialKey("radialaxis.angle",ue.angle),W.fillViewInitialKey("radialaxis.range",le.range.slice()),le.setGeometry()),le.tickangle==="auto"&&ce>90&&ce<=270&&(le.tickangle=180);var xe=Ce?function(Pe){var Re=I(W,L([Pe.x,0]));return d(Re[0]-se,Re[1]-ge)}:function(Pe){return d(le.l2p(Pe.x)+ie,0)},_e=Ce?function(Pe){return O(W,Pe.x,-1/0,1/0)}:function(Pe){return W.pathArc(le.r2p(Pe.x)+ie)},we=j(ue);if(W.radialTickLayout!==we&&(ne["radial-axis"].selectAll(".xtick").remove(),W.radialTickLayout=we),de){le.setScale();var Ae=0,$=Ce?(le.tickvals||[]).filter(function(Pe){return Pe>=0}).map(function(Pe){return r.tickText(le,Pe,!0,!1)}):r.calcTicks(le),oe=Ce?$:r.clipEnds(le,$),pe=r.getTickSigns(le)[2];Ce&&((le.ticks==="top"&&le.side==="bottom"||le.ticks==="bottom"&&le.side==="top")&&(pe=-pe),le.ticks==="top"&&le.side==="top"&&(Ae=-le.ticklen),le.ticks==="bottom"&&le.side==="bottom"&&(Ae=le.ticklen)),r.drawTicks(Q,le,{vals:$,layer:ne["radial-axis"],path:r.makeTickPath(le,0,pe),transFn:xe,crisp:!1}),r.drawGrid(Q,le,{vals:oe,layer:ne["radial-grid"],path:_e,transFn:T.noop,crisp:!1}),r.drawLabels(Q,le,{vals:$,layer:ne["radial-axis"],transFn:xe,labelFns:r.makeLabelFns(le,Ae)})}var ye=W.radialAxisAngle=W.vangles?F(J(V(ue.angle),W.vangles)):ue.angle,ke=d(se,ge),De=ke+b(-ye);X(ne["radial-axis"],de&&(ue.showticklabels||ue.ticks),{transform:De}),X(ne["radial-grid"],de&&ue.showgrid,{transform:Ce?"":ke}),X(ne["radial-line"].select("line"),de&&ue.showline,{x1:Ce?-re:ie,y1:0,x2:re,y2:0,transform:De}).attr("stroke-width",ue.linewidth).call(s.stroke,ue.linecolor)},U.updateRadialAxisTitle=function(Z,Y,W){if(!this.isSmith){var Q=this,ne=Q.gd,re=Q.radius,ie=Q.cx,se=Q.cy,ge=Q.getRadial(Y),ue=Q.id+"title",ce=0;if(ge.title){var le=t.bBox(Q.layers["radial-axis"].node()).height,de=ge.title.font.size,Ce=ge.side;ce=Ce==="top"?de:Ce==="counterclockwise"?-(le+.4*de):le+.8*de}var xe=W!==void 0?W:Q.radialAxisAngle,_e=V(xe),we=Math.cos(_e),Ae=Math.sin(_e),$=ie+re/2*we+ce*Ae,oe=se-re/2*Ae+ce*we;Q.layers["radial-axis-title"]=x.draw(ne,ue,{propContainer:ge,propName:Q.id+".radialaxis.title",placeholder:N(ne,"Click to enter radial axis title"),attributes:{x:$,y:oe,"text-anchor":"middle"},transform:{rotate:-xe}})}},U.updateAngularAxis=function(Z,Y){var W=this,Q=W.gd,ne=W.layers,re=W.radius,ie=W.innerRadius,se=W.cx,ge=W.cy,ue=W.getAngular(Y),ce=W.angularAxis,le=W.isSmith;le||(W.fillViewInitialKey("angularaxis.rotation",ue.rotation),ce.setGeometry(),ce.setScale());var de=le?function(Pe){var Re=I(W,L([0,Pe.x]));return Math.atan2(Re[0]-se,Re[1]-ge)-Math.PI/2}:function(Pe){return ce.t2g(Pe.x)};ce.type==="linear"&&ce.thetaunit==="radians"&&(ce.tick0=F(ce.tick0),ce.dtick=F(ce.dtick));var Ce=function(Pe){return d(se+re*Math.cos(Pe),ge-re*Math.sin(Pe))},xe=le?function(Pe){var Re=I(W,L([0,Pe.x]));return d(Re[0],Re[1])}:function(Pe){return Ce(de(Pe))},_e=le?function(Pe){var Re=I(W,L([0,Pe.x])),fe=Math.atan2(Re[0]-se,Re[1]-ge)-Math.PI/2;return d(Re[0],Re[1])+b(-F(fe))}:function(Pe){var Re=de(Pe);return Ce(Re)+b(-F(Re))},we=le?function(Pe){return C(W,Pe.x,0,1/0)}:function(Pe){var Re=de(Pe),fe=Math.cos(Re),ve=Math.sin(Re);return"M"+[se+ie*fe,ge-ie*ve]+"L"+[se+re*fe,ge-re*ve]},Ae=r.makeLabelFns(ce,0).labelStandoff,$={xFn:function(Pe){var Re=de(Pe);return Math.cos(Re)*Ae},yFn:function(Pe){var Re=de(Pe),fe=Math.sin(Re)>0?.2:1;return-Math.sin(Re)*(Ae+Pe.fontSize*fe)+Math.abs(Math.cos(Re))*(Pe.fontSize*c)},anchorFn:function(Pe){var Re=de(Pe),fe=Math.cos(Re);return Math.abs(fe)<.1?"middle":fe>0?"start":"end"},heightFn:function(Pe,Re,fe){var ve=de(Pe);return-.5*(1+Math.sin(ve))*fe}},oe=j(ue);W.angularTickLayout!==oe&&(ne["angular-axis"].selectAll("."+ce._id+"tick").remove(),W.angularTickLayout=oe);var pe,ye=le?[1/0].concat(ce.tickvals||[]).map(function(Pe){return r.tickText(ce,Pe,!0,!1)}):r.calcTicks(ce);if(le&&(ye[0].text="∞",ye[0].fontSize*=1.75),Y.gridshape==="linear"?(pe=ye.map(de),T.angleDelta(pe[0],pe[1])<0&&(pe=pe.slice().reverse())):pe=null,W.vangles=pe,ce.type==="category"&&(ye=ye.filter(function(Pe){return T.isAngleInsideSector(de(Pe),W.sectorInRad)})),ce.visible){var ke=ce.ticks==="inside"?-1:1,De=(ce.linewidth||1)/2;r.drawTicks(Q,ce,{vals:ye,layer:ne["angular-axis"],path:"M"+ke*De+",0h"+ke*ce.ticklen,transFn:_e,crisp:!1}),r.drawGrid(Q,ce,{vals:ye,layer:ne["angular-grid"],path:we,transFn:T.noop,crisp:!1}),r.drawLabels(Q,ce,{vals:ye,layer:ne["angular-axis"],repositionOnUpdate:!0,transFn:xe,labelFns:$})}X(ne["angular-line"].select("path"),ue.showline,{d:W.pathSubplot(),transform:d(se,ge)}).attr("stroke-width",ue.linewidth).call(s.stroke,ue.linecolor)},U.updateFx=function(Z,Y){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(Z),this.updateRadialDrag(Z,Y,0),this.updateRadialDrag(Z,Y,1)),this.updateHoverAndMainDrag(Z))},U.updateHoverAndMainDrag=function(Z){var Y,W,Q=this,ne=Q.isSmith,re=Q.gd,ie=Q.layers,se=Z._zoomlayer,ge=M.MINZOOM,ue=M.OFFEDGE,ce=Q.radius,le=Q.innerRadius,de=Q.cx,Ce=Q.cy,xe=Q.cxx,_e=Q.cyy,we=Q.sectorInRad,Ae=Q.vangles,$=Q.radialAxis,oe=_.clampTiny,pe=_.findXYatLength,ye=_.findEnclosingVertexAngles,ke=M.cornerHalfWidth,De=M.cornerLen/2,Pe=u.makeDragger(ie,"path","maindrag",Z.dragmode===!1?"none":"crosshair");S.select(Pe).attr("d",Q.pathSubplot()).attr("transform",d(de,Ce)),Pe.onmousemove=function(Se){f.hover(re,Se,Q.id),re._fullLayout._lasthover=Pe,re._fullLayout._hoversubplot=Q.id},Pe.onmouseout=function(Se){re._dragging||h.unhover(re,Se)};var Re,fe,ve,Te,ze,He,Ve,nt,tt,ot={element:Pe,gd:re,subplot:Q.id,plotinfo:{id:Q.id,xaxis:Q.xaxis,yaxis:Q.yaxis},xaxes:[Q.xaxis],yaxes:[Q.yaxis]};function pt(Se,Ie){return Math.sqrt(Se*Se+Ie*Ie)}function Tt(Se,Ie){return pt(Se-xe,Ie-_e)}function yt(Se,Ie){return Math.atan2(_e-Ie,Se-xe)}function dt(Se,Ie){return[Se*Math.cos(Ie),Se*Math.sin(-Ie)]}function Pt(Se,Ie){if(Se===0)return Q.pathSector(2*ke);var We=De/Se,it=Ie-We,lt=Ie+We,gt=Math.max(0,Math.min(Se,ce)),At=gt-ke,kt=gt+ke;return"M"+dt(At,it)+"A"+[At,At]+" 0,0,0 "+dt(At,lt)+"L"+dt(kt,lt)+"A"+[kt,kt]+" 0,0,1 "+dt(kt,it)+"Z"}function Et(Se,Ie,We){if(Se===0)return Q.pathSector(2*ke);var it,lt,gt=dt(Se,Ie),At=dt(Se,We),kt=oe((gt[0]+At[0])/2),ht=oe((gt[1]+At[1])/2);if(kt&&ht){var St=ht/kt,vt=-1/St,Mt=pe(ke,St,kt,ht);it=pe(De,vt,Mt[0][0],Mt[0][1]),lt=pe(De,vt,Mt[1][0],Mt[1][1])}else{var It,Ut;ht?(It=De,Ut=ke):(It=ke,Ut=De),it=[[kt-It,ht-Ut],[kt+It,ht-Ut]],lt=[[kt-It,ht+Ut],[kt+It,ht+Ut]]}return"M"+it.join("L")+"L"+lt.reverse().join("L")+"Z"}function Ot(Se,Ie){return Ie=Math.max(Math.min(Ie,ce),le),Se<ue?Se=0:ce-Se<ue?Se=ce:Ie<ue?Ie=0:ce-Ie<ue&&(Ie=ce),Math.abs(Ie-Se)>ge?(Se<Ie?(ve=Se,Te=Ie):(ve=Ie,Te=Se),!0):(ve=null,Te=null,!1)}function Nt(Se,Ie){Se=Se||ze,Ie=Ie||"M0,0Z",nt.attr("d",Se),tt.attr("d",Ie),u.transitionZoombox(nt,tt,He,Ve),He=!0;var We={};Ke(We),re.emit("plotly_relayouting",We)}function zt(Se,Ie){var We,it,lt=Re+(Se*=Y),gt=fe+(Ie*=W),At=Tt(Re,fe),kt=Math.min(Tt(lt,gt),ce),ht=yt(Re,fe);Ot(At,kt)&&(We=ze+Q.pathSector(Te),ve&&(We+=Q.pathSector(ve)),it=Pt(ve,ht)+Pt(Te,ht)),Nt(We,it)}function Ze(Se,Ie,We,it){var lt=_.findIntersectionXY(We,it,We,[Se-xe,_e-Ie]);return pt(lt[0],lt[1])}function Ye(Se,Ie){var We,it,lt=Re+Se,gt=fe+Ie,At=yt(Re,fe),kt=yt(lt,gt),ht=ye(At,Ae),St=ye(kt,Ae);Ot(Ze(Re,fe,ht[0],ht[1]),Math.min(Ze(lt,gt,St[0],St[1]),ce))&&(We=ze+Q.pathSector(Te),ve&&(We+=Q.pathSector(ve)),it=[Et(ve,ht[0],ht[1]),Et(Te,ht[0],ht[1])].join(" ")),Nt(We,it)}function je(){if(u.removeZoombox(re),ve!==null&&Te!==null){var Se={};Ke(Se),u.showDoubleClickNotifier(re),l.call("_guiRelayout",re,Se)}}function Ke(Se){var Ie=$._rl,We=(Ie[1]-Ie[0])/(1-le/ce)/ce,it=[Ie[0]+(ve-le)*We,Ie[0]+(Te-le)*We];Se[Q.id+".radialaxis.range"]=it}function st(Se,Ie){var We=re._fullLayout.clickmode;if(u.removeZoombox(re),Se===2){var it={};for(var lt in Q.viewInitial)it[Q.id+"."+lt]=Q.viewInitial[lt];re.emit("plotly_doubleclick",null),l.call("_guiRelayout",re,it)}We.indexOf("select")>-1&&Se===1&&g(Ie,re,[Q.xaxis],[Q.yaxis],Q.id,ot),We.indexOf("event")>-1&&f.click(re,Ie,Q.id)}ot.prepFn=function(Se,Ie,We){var it=re._fullLayout.dragmode,lt=Pe.getBoundingClientRect();re._fullLayout._calcInverseTransform(re);var gt=re._fullLayout._invTransform;Y=re._fullLayout._invScaleX,W=re._fullLayout._invScaleY;var At=T.apply3DTransform(gt)(Ie-lt.left,We-lt.top);if(Re=At[0],fe=At[1],Ae){var kt=_.findPolygonOffset(ce,we[0],we[1],Ae);Re+=xe+kt[0],fe+=_e+kt[1]}switch(it){case"zoom":ot.clickFn=st,ne||(ot.moveFn=Ae?Ye:zt,ot.doneFn=je,function(){ve=null,Te=null,ze=Q.pathSubplot(),He=!1;var ht=re._fullLayout[Q.id];Ve=k(ht.bgcolor).getLuminance(),(nt=u.makeZoombox(se,Ve,de,Ce,ze)).attr("fill-rule","evenodd"),tt=u.makeCorners(se,de,Ce),y(re)}());break;case"select":case"lasso":v(Se,Ie,We,ot,it)}},h.init(ot)},U.updateRadialDrag=function(Z,Y,W){var Q=this,ne=Q.gd,re=Q.layers,ie=Q.radius,se=Q.innerRadius,ge=Q.cx,ue=Q.cy,ce=Q.radialAxis,le=M.radialDragBoxSize,de=le/2;if(ce.visible){var Ce,xe,_e,we=V(Q.radialAxisAngle),Ae=ce._rl,$=Ae[0],oe=Ae[1],pe=Ae[W],ye=.75*(Ae[1]-Ae[0])/(1-Q.getHole(Y))/ie;W?(Ce=ge+(ie+de)*Math.cos(we),xe=ue-(ie+de)*Math.sin(we),_e="radialdrag"):(Ce=ge+(se-de)*Math.cos(we),xe=ue-(se-de)*Math.sin(we),_e="radialdrag-inner");var ke,De,Pe,Re=u.makeRectDragger(re,_e,"crosshair",-de,-de,le,le),fe={element:Re,gd:ne};Z.dragmode===!1&&(fe.dragmode=!1),X(S.select(Re),ce.visible&&se<ie,{transform:d(Ce,xe)}),fe.prepFn=function(){ke=null,De=null,Pe=null,fe.moveFn=ve,fe.doneFn=Te,y(ne)},fe.clampFn=function(Ve,nt){return Math.sqrt(Ve*Ve+nt*nt)<M.MINDRAG&&(Ve=0,nt=0),[Ve,nt]},h.init(fe)}function ve(Ve,nt){if(ke)ke(Ve,nt);else{var tt=[Ve,-nt],ot=[Math.cos(we),Math.sin(we)],pt=Math.abs(T.dot(tt,ot)/Math.sqrt(T.dot(tt,tt)));isNaN(pt)||(ke=pt<.5?ze:He)}var Tt={};(function(yt){De!==null?yt[Q.id+".radialaxis.angle"]=De:Pe!==null&&(yt[Q.id+".radialaxis.range["+W+"]"]=Pe)})(Tt),ne.emit("plotly_relayouting",Tt)}function Te(){De!==null?l.call("_guiRelayout",ne,Q.id+".radialaxis.angle",De):Pe!==null&&l.call("_guiRelayout",ne,Q.id+".radialaxis.range["+W+"]",Pe)}function ze(Ve,nt){if(W!==0){var tt=Ce+Ve,ot=xe+nt;De=Math.atan2(ue-ot,tt-ge),Q.vangles&&(De=J(De,Q.vangles)),De=F(De);var pt=d(ge,ue)+b(-De);re["radial-axis"].attr("transform",pt),re["radial-line"].select("line").attr("transform",pt);var Tt=Q.gd._fullLayout,yt=Tt[Q.id];Q.updateRadialAxisTitle(Tt,yt,De)}}function He(Ve,nt){var tt=T.dot([Ve,-nt],[Math.cos(we),Math.sin(we)]);if(Pe=pe-ye*tt,ye>0==(W?Pe>$:Pe<oe)){var ot=ne._fullLayout,pt=ot[Q.id];ce.range[W]=Pe,ce._rl[W]=Pe,Q.updateRadialAxis(ot,pt),Q.xaxis.setRange(),Q.xaxis.setScale(),Q.yaxis.setRange(),Q.yaxis.setScale();var Tt=!1;for(var yt in Q.traceHash){var dt=Q.traceHash[yt],Pt=T.filterVisible(dt);dt[0][0].trace._module.plot(ne,Q,Pt,pt),l.traceIs(yt,"gl")&&Pt.length&&(Tt=!0)}Tt&&(m(ne),w(ne))}else Pe=null}},U.updateAngularDrag=function(Z){var Y=this,W=Y.gd,Q=Y.layers,ne=Y.radius,re=Y.angularAxis,ie=Y.cx,se=Y.cy,ge=Y.cxx,ue=Y.cyy,ce=M.angularDragBoxSize,le=u.makeDragger(Q,"path","angulardrag",Z.dragmode===!1?"none":"move"),de={element:le,gd:W};function Ce(fe,ve){return Math.atan2(ue+ce-ve,fe-ge-ce)}Z.dragmode===!1?de.dragmode=!1:S.select(le).attr("d",Y.pathAnnulus(ne,ne+ce)).attr("transform",d(ie,se)).call(p,"move");var xe,_e,we,Ae,$,oe,pe=Q.frontplot.select(".scatterlayer").selectAll(".trace"),ye=pe.selectAll(".point"),ke=pe.selectAll(".textpoint");function De(fe,ve){var Te=Y.gd._fullLayout,ze=Te[Y.id],He=Ce(xe+fe*Z._invScaleX,_e+ve*Z._invScaleY),Ve=F(He-oe);if(Ae=we+Ve,Q.frontplot.attr("transform",d(Y.xOffset2,Y.yOffset2)+b([-Ve,ge,ue])),Y.vangles){$=Y.radialAxisAngle+Ve;var nt=d(ie,se)+b(-Ve),tt=d(ie,se)+b(-$);Q.bg.attr("transform",nt),Q["radial-grid"].attr("transform",nt),Q["radial-axis"].attr("transform",tt),Q["radial-line"].select("line").attr("transform",tt),Y.updateRadialAxisTitle(Te,ze,$)}else Y.clipPaths.forTraces.select("path").attr("transform",d(ge,ue)+b(Ve));ye.each(function(){var Pt=S.select(this),Et=t.getTranslate(Pt);Pt.attr("transform",d(Et.x,Et.y)+b([Ve]))}),ke.each(function(){var Pt=S.select(this),Et=Pt.select("text"),Ot=t.getTranslate(Pt);Pt.attr("transform",b([Ve,Et.attr("x"),Et.attr("y")])+d(Ot.x,Ot.y))}),re.rotation=T.modHalf(Ae,360),Y.updateAngularAxis(Te,ze),Y._hasClipOnAxisFalse&&!T.isFullCircle(Y.sectorInRad)&&pe.call(t.hideOutsideRangePoints,Y);var ot=!1;for(var pt in Y.traceHash)if(l.traceIs(pt,"gl")){var Tt=Y.traceHash[pt],yt=T.filterVisible(Tt);Tt[0][0].trace._module.plot(W,Y,yt,ze),yt.length&&(ot=!0)}ot&&(m(W),w(W));var dt={};Pe(dt),W.emit("plotly_relayouting",dt)}function Pe(fe){fe[Y.id+".angularaxis.rotation"]=Ae,Y.vangles&&(fe[Y.id+".radialaxis.angle"]=$)}function Re(){ke.select("text").attr("transform",null);var fe={};Pe(fe),l.call("_guiRelayout",W,fe)}de.prepFn=function(fe,ve,Te){var ze=Z[Y.id];we=ze.angularaxis.rotation;var He=le.getBoundingClientRect();xe=ve-He.left,_e=Te-He.top,W._fullLayout._calcInverseTransform(W);var Ve=T.apply3DTransform(Z._invTransform)(xe,_e);xe=Ve[0],_e=Ve[1],oe=Ce(xe,_e),de.moveFn=De,de.doneFn=Re,y(W)},Y.vangles&&!T.isFullCircle(Y.sectorInRad)&&(de.prepFn=T.noop,p(S.select(le),null)),h.init(de)},U.isPtInside=function(Z){if(this.isSmith)return!0;var Y=this.sectorInRad,W=this.vangles,Q=this.angularAxis.c2g(Z.theta),ne=this.radialAxis,re=ne.c2l(Z.r),ie=ne._rl;return(W?_.isPtInsidePolygon:T.isPtInsideSector)(re,Q,ie,Y,W)},U.pathArc=function(Z){var Y=this.sectorInRad,W=this.vangles;return(W?_.pathPolygon:T.pathArc)(Z,Y[0],Y[1],W)},U.pathSector=function(Z){var Y=this.sectorInRad,W=this.vangles;return(W?_.pathPolygon:T.pathSector)(Z,Y[0],Y[1],W)},U.pathAnnulus=function(Z,Y){var W=this.sectorInRad,Q=this.vangles;return(Q?_.pathPolygonAnnulus:T.pathAnnulus)(Z,Y,W[0],W[1],Q)},U.pathSubplot=function(){var Z=this.innerRadius,Y=this.radius;return Z?this.pathAnnulus(Z,Y):this.pathSector(Y)},U.fillViewInitialKey=function(Z,Y){Z in this.viewInitial||(this.viewInitial[Z]=Y)}},12101:function(K,z,e){var S=e(71828),k=e(21994),l=S.deg2rad,T=S.rad2deg;K.exports=function(b,d,s){switch(k(b,s),b._id){case"x":case"radialaxis":(function(t,o){var r=o._subplot;t.setGeometry=function(){var n=t._rl[0],a=t._rl[1],i=r.innerRadius,u=(r.radius-i)/(a-n),h=i/u,f=n>a?function(x){return x<=0}:function(x){return x>=0};t.c2g=function(x){var v=t.c2l(x)-n;return(f(v)?v:0)+h},t.g2c=function(x){return t.l2c(x+n-h)},t.g2p=function(x){return x*u},t.c2p=function(x){return t.g2p(t.c2g(x))}}})(b,d);break;case"angularaxis":(function(t,o){var r=t.type;if(r==="linear"){var n=t.d2c,a=t.c2d;t.d2c=function(i,u){return function(h,f){return f==="degrees"?l(h):h}(n(i),u)},t.c2d=function(i,u){return a(function(h,f){return f==="degrees"?T(h):h}(i,u))}}t.makeCalcdata=function(i,u){var h,f,x=i[u],v=i._length,g=function(c){return t.d2c(c,i.thetaunit)};if(x){if(S.isTypedArray(x)&&r==="linear"){if(v===x.length)return x;if(x.subarray)return x.subarray(0,v)}for(h=new Array(v),f=0;f<v;f++)h[f]=g(x[f])}else{var y=u+"0",p="d"+u,m=y in i?g(i[y]):0,w=i[p]?g(i[p]):(t.period||2*Math.PI)/v;for(h=new Array(v),f=0;f<v;f++)h[f]=m+f*w}return h},t.setGeometry=function(){var i,u,h,f,x=o.sector,v=x.map(l),g={clockwise:-1,counterclockwise:1}[t.direction],y=l(t.rotation),p=function(M){return g*M+y},m=function(M){return(M-y)/g};switch(r){case"linear":u=i=S.identity,f=l,h=T,t.range=S.isFullCircle(v)?[x[0],x[0]+360]:v.map(m).map(T);break;case"category":var w=t._categories.length,c=t.period?Math.max(t.period,w):w;c===0&&(c=1),u=f=function(M){return 2*M*Math.PI/c},i=h=function(M){return M*c/Math.PI/2},t.range=[0,c]}t.c2g=function(M){return p(u(M))},t.g2c=function(M){return i(m(M))},t.t2g=function(M){return p(f(M))},t.g2t=function(M){return h(m(M))}}})(b,d)}}},39779:function(K){K.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},23893:function(K){function z(l){return l<0?-1:l>0?1:0}function e(l){var T=l[0],b=l[1];if(!isFinite(T)||!isFinite(b))return[1,0];var d=(T+1)*(T+1)+b*b;return[(T*T+b*b-1)/d,2*b/d]}function S(l,T){var b=T[0],d=T[1];return[b*l.radius+l.cx,-d*l.radius+l.cy]}function k(l,T){return T*l.radius}K.exports={smith:e,reactanceArc:function(l,T,b,d){var s=S(l,e([b,T])),t=s[0],o=s[1],r=S(l,e([d,T])),n=r[0],a=r[1];if(T===0)return["M"+t+","+o,"L"+n+","+a].join(" ");var i=k(l,1/Math.abs(T));return["M"+t+","+o,"A"+i+","+i+" 0 0,"+(T<0?1:0)+" "+n+","+a].join(" ")},resistanceArc:function(l,T,b,d){var s=k(l,1/(T+1)),t=S(l,e([T,b])),o=t[0],r=t[1],n=S(l,e([T,d])),a=n[0],i=n[1];if(z(b)!==z(d)){var u=S(l,e([T,0]));return["M"+o+","+r,"A"+s+","+s+" 0 0,"+(0<b?0:1)+" "+u[0]+","+u[1],"A"+s+","+s+" 0 0,"+(d<0?0:1)+a+","+i].join(" ")}return["M"+o+","+r,"A"+s+","+s+" 0 0,"+(d<b?0:1)+" "+a+","+i].join(" ")},smithTransform:S}},7504:function(K,z,e){var S=e(27659).AU,k=e(71828).counterRegex,l=e(77997),T=e(39779),b=T.attr,d=T.name,s=k(d),t={};t[b]={valType:"subplotid",dflt:d,editType:"calc"},K.exports={attr:b,name:d,idRoot:d,idRegex:s,attrRegex:s,attributes:t,layoutAttributes:e(33419),supplyLayoutDefaults:e(9558),plot:function(o){for(var r=o._fullLayout,n=o.calcdata,a=r._subplots[d],i=0;i<a.length;i++){var u=a[i],h=S(n,d,u),f=r[u]._subplot;f||(f=l(o,u,!0),r[u]._subplot=f),f.plot(h,r,o._promises)}},clean:function(o,r,n,a){for(var i=a._subplots[d]||[],u=0;u<i.length;u++){var h=i[u],f=a[h]._subplot;if(!r[h]&&f)for(var x in f.framework.remove(),f.clipPaths)f.clipPaths[x].remove()}},toSVG:e(93612).toSVG}},33419:function(K,z,e){var S=e(22399),k=e(13838),l=e(27670).Y,T=e(71828).extendFlat,b=e(30962).overrideAll,d=b({color:k.color,showline:T({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:T({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),s=b({ticklen:k.ticklen,tickwidth:T({},k.tickwidth,{dflt:2}),tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,tickfont:k.tickfont,tickformat:k.tickformat,hoverformat:k.hoverformat,layer:k.layer},"plot","from-root"),t=T({visible:T({},k.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:T({},k.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},d,s),o=T({visible:T({},k.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:k.ticks,editType:"calc"},d,s);K.exports={domain:l({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:S.background},realaxis:t,imaginaryaxis:o,editType:"calc"}},9558:function(K,z,e){var S,k,l,T=e(71828),b=e(7901),d=e(44467),s=e(49119),t=e(27659).NG,o=e(89426),r=e(96115),n=e(92128),a=e(21994),i=e(33419),u=e(39779),h=u.axisNames,f=(S=function(v){return v.slice().reverse().map(function(g){return-g}).concat([0]).concat(v)},k=String,l={},function(v){var g=k?k(v):v;if(g in l)return l[g];var y=S(v);return l[g]=y,y});function x(v,g,y,p){var m=y("bgcolor");p.bgColor=b.combine(m,p.paper_bgcolor);var w,c=t(p.fullData,u.name,p.id),M=p.layoutOut;function _(U,j){return y(w+"."+U,j)}for(var E=0;E<h.length;E++){w=h[E],T.isPlainObject(v[w])||(v[w]={});var L=v[w],C=d.newContainer(g,w);C._id=C._name=w,C._attr=p.id+"."+w,C._traceIndices=c.map(function(U){return U._expandedIndex});var O=_("visible");if(C.type="linear",a(C,M),o(L,C,_,C.type),O){var I,N,R,V,F=w==="realaxis";F&&_("side"),F?_("tickvals"):_("tickvals",f(g.realaxis.tickvals||i.realaxis.tickvals.dflt));var D=p.font||{};O&&(N=(I=_("color"))===L.color?I:D.color,R=D.size,V=D.family),r(L,C,_,C.type,{noTicklabelstep:!0,noAng:!F,noExp:!0,font:{color:N,size:R,family:V}}),T.coerce2(v,g,i,w+".ticklen"),T.coerce2(v,g,i,w+".tickwidth"),T.coerce2(v,g,i,w+".tickcolor",g.color),_("ticks")||(delete g[w].ticklen,delete g[w].tickwidth,delete g[w].tickcolor),n(L,C,_,{dfltColor:I,bgColor:p.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:i[w]}),_("layer")}_("hoverformat"),delete C.type,C._input=L}}K.exports=function(v,g,y){s(v,g,y,{noUirevision:!0,type:u.name,attributes:i,handleDefaults:x,font:g.font,paper_bgcolor:g.paper_bgcolor,fullData:y,layoutOut:g})}},49119:function(K,z,e){var S=e(71828),k=e(44467),l=e(27670).c;K.exports=function(T,b,d,s){var t,o,r=s.type,n=s.attributes,a=s.handleDefaults,i=s.partition||"x",u=b._subplots[r],h=u.length,f=h&&u[0].replace(/\d+$/,"");function x(p,m){return S.coerce(t,o,n,p,m)}for(var v=0;v<h;v++){var g=u[v];t=T[g]?T[g]:T[g]={},o=k.newContainer(b,g,f),s.noUirevision||x("uirevision",b.uirevision);var y={};y[i]=[v/h,(v+1)/h],l(o,b,x,y),s.id=g,a(t,o,x,s)}}},5386:function(K,z,e){var S=e(31562);function k(l){var T=l.description?" "+l.description:"",b=l.keys||[];if(b.length>0){for(var d=[],s=0;s<b.length;s++)d[s]="`"+b[s]+"`";T+="Finally, the template string has access to ",T=b.length===1?T+"variable "+d[0]:T+"variables "+d.slice(0,-1).join(", ")+" and "+d.slice(-1)+"."}return T}S.FORMAT_LINK,S.DATE_FORMAT_LINK,z.fF=function(l,T){l=l||{},k(T=T||{});var b={valType:"string",dflt:"",editType:l.editType||"none"};return l.arrayOk!==!1&&(b.arrayOk=!0),b},z.si=function(l,T){l=l||{},k(T=T||{});var b={valType:"string",dflt:"",editType:l.editType||"calc"};return l.arrayOk!==!1&&(b.arrayOk=!0),b},z.R=function(l,T){return T=T||{},(l=l||{}).newshape,k(T),{valType:"string",dflt:"",editType:l.editType||"arraydraw"}}},61639:function(K,z,e){var S=e(64380),k=e(27659).AU,l=e(71828).counterRegex,T="ternary";z.name=T;var b=z.attr="subplot";z.idRoot=T,z.idRegex=z.attrRegex=l(T),(z.attributes={})[b]={valType:"subplotid",dflt:"ternary",editType:"calc"},z.layoutAttributes=e(81367),z.supplyLayoutDefaults=e(25369),z.plot=function(d){for(var s=d._fullLayout,t=d.calcdata,o=s._subplots.ternary,r=0;r<o.length;r++){var n=o[r],a=k(t,T,n),i=s[n]._subplot;i||(i=new S({id:n,graphDiv:d,container:s._ternarylayer.node()},s),s[n]._subplot=i),i.plot(a,s,d._promises)}},z.clean=function(d,s,t,o){for(var r=o._subplots.ternary||[],n=0;n<r.length;n++){var a=r[n],i=o[a]._subplot;!s[a]&&i&&(i.plotContainer.remove(),i.clipDef.remove(),i.clipDefRelative.remove(),i.layers["a-title"].remove(),i.layers["b-title"].remove(),i.layers["c-title"].remove())}}},81367:function(K,z,e){var S=e(22399),k=e(27670).Y,l=e(13838),T=e(30962).overrideAll,b=e(1426).extendFlat,d={title:{text:l.title.text,font:l.title.font},color:l.color,tickmode:l.minor.tickmode,nticks:b({},l.nticks,{dflt:6,min:1}),tick0:l.tick0,dtick:l.dtick,tickvals:l.tickvals,ticktext:l.ticktext,ticks:l.ticks,ticklen:l.ticklen,tickwidth:l.tickwidth,tickcolor:l.tickcolor,ticklabelstep:l.ticklabelstep,showticklabels:l.showticklabels,labelalias:l.labelalias,showtickprefix:l.showtickprefix,tickprefix:l.tickprefix,showticksuffix:l.showticksuffix,ticksuffix:l.ticksuffix,showexponent:l.showexponent,exponentformat:l.exponentformat,minexponent:l.minexponent,separatethousands:l.separatethousands,tickfont:l.tickfont,tickangle:l.tickangle,tickformat:l.tickformat,tickformatstops:l.tickformatstops,hoverformat:l.hoverformat,showline:b({},l.showline,{dflt:!0}),linecolor:l.linecolor,linewidth:l.linewidth,showgrid:b({},l.showgrid,{dflt:!0}),gridcolor:l.gridcolor,gridwidth:l.gridwidth,griddash:l.griddash,layer:l.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:l._deprecated.title,titlefont:l._deprecated.titlefont}},s=K.exports=T({domain:k({name:"ternary"}),bgcolor:{valType:"color",dflt:S.background},sum:{valType:"number",dflt:1,min:0},aaxis:d,baxis:d,caxis:d},"plot","from-root");s.uirevision={valType:"any",editType:"none"},s.aaxis.uirevision=s.baxis.uirevision=s.caxis.uirevision={valType:"any",editType:"none"}},25369:function(K,z,e){var S=e(7901),k=e(44467),l=e(71828),T=e(49119),b=e(96115),d=e(89426),s=e(38701),t=e(26218),o=e(92128),r=e(81367),n=["aaxis","baxis","caxis"];function a(u,h,f,x){var v,g,y,p=f("bgcolor"),m=f("sum");x.bgColor=S.combine(p,x.paper_bgcolor);for(var w=0;w<n.length;w++)g=u[v=n[w]]||{},(y=k.newContainer(h,v))._name=v,i(g,y,x,h);var c=h.aaxis,M=h.baxis,_=h.caxis;c.min+M.min+_.min>=m&&(c.min=0,M.min=0,_.min=0,u.aaxis&&delete u.aaxis.min,u.baxis&&delete u.baxis.min,u.caxis&&delete u.caxis.min)}function i(u,h,f,x){var v=r[h._name];function g(M,_){return l.coerce(u,h,v,M,_)}g("uirevision",x.uirevision),h.type="linear";var y=g("color"),p=y!==v.color.dflt?y:f.font.color,m=h._name.charAt(0).toUpperCase(),w="Component "+m,c=g("title.text",w);h._hovertitle=c===w?c:m,l.coerceFont(g,"title.font",{family:f.font.family,size:l.bigFont(f.font.size),color:p}),g("min"),t(u,h,g,"linear"),d(u,h,g,"linear"),b(u,h,g,"linear"),s(u,h,g,{outerTicks:!0}),g("showticklabels")&&(l.coerceFont(g,"tickfont",{family:f.font.family,size:f.font.size,color:p}),g("tickangle"),g("tickformat")),o(u,h,g,{dfltColor:y,bgColor:f.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:v}),g("hoverformat"),g("layer")}K.exports=function(u,h,f){T(u,h,f,{type:"ternary",attributes:r,handleDefaults:a,font:h.font,paper_bgcolor:h.paper_bgcolor})}},64380:function(K,z,e){var S=e(39898),k=e(84267),l=e(73972),T=e(71828),b=T.strTranslate,d=T._,s=e(7901),t=e(91424),o=e(21994),r=e(1426).extendFlat,n=e(74875),a=e(89298),i=e(28569),u=e(30211),h=e(64505),f=h.freeMode,x=h.rectMode,v=e(92998),g=e(47322).prepSelect,y=e(47322).selectOnClick,p=e(47322).clearOutline,m=e(47322).clearSelectionsCache,w=e(85555);function c(R,V){this.id=R.id,this.graphDiv=R.graphDiv,this.init(V),this.makeFramework(V),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}K.exports=c;var M=c.prototype;M.init=function(R){this.container=R._ternarylayer,this.defs=R._defs,this.layoutId=R._uid,this.traceHash={},this.layers={}},M.plot=function(R,V){var F=this,D=V[F.id],U=V._size;F._hasClipOnAxisFalse=!1;for(var j=0;j<R.length;j++)if(R[j][0].trace.cliponaxis===!1){F._hasClipOnAxisFalse=!0;break}F.updateLayers(D),F.adjustLayout(D,U),n.generalUpdatePerTraceModule(F.graphDiv,F,R,D),F.layers.plotbg.select("path").call(s.fill,D.bgcolor)},M.makeFramework=function(R){var V=this,F=V.graphDiv,D=R[V.id],U=V.clipId="clip"+V.layoutId+V.id,j=V.clipIdRelative="clip-relative"+V.layoutId+V.id;V.clipDef=T.ensureSingleById(R._clips,"clipPath",U,function(J){J.append("path").attr("d","M0,0Z")}),V.clipDefRelative=T.ensureSingleById(R._clips,"clipPath",j,function(J){J.append("path").attr("d","M0,0Z")}),V.plotContainer=T.ensureSingle(V.container,"g",V.id),V.updateLayers(D),t.setClipUrl(V.layers.backplot,U,F),t.setClipUrl(V.layers.grids,U,F)},M.updateLayers=function(R){var V=this.layers,F=["draglayer","plotbg","backplot","grids"];R.aaxis.layer==="below traces"&&F.push("aaxis","aline"),R.baxis.layer==="below traces"&&F.push("baxis","bline"),R.caxis.layer==="below traces"&&F.push("caxis","cline"),F.push("frontplot"),R.aaxis.layer==="above traces"&&F.push("aaxis","aline"),R.baxis.layer==="above traces"&&F.push("baxis","bline"),R.caxis.layer==="above traces"&&F.push("caxis","cline");var D=this.plotContainer.selectAll("g.toplevel").data(F,String),U=["agrid","bgrid","cgrid"];D.enter().append("g").attr("class",function(j){return"toplevel "+j}).each(function(j){var J=S.select(this);V[j]=J,j==="frontplot"?J.append("g").classed("scatterlayer",!0):j==="backplot"?J.append("g").classed("maplayer",!0):j==="plotbg"?J.append("path").attr("d","M0,0Z"):j==="aline"||j==="bline"||j==="cline"?J.append("path"):j==="grids"&&U.forEach(function(X){V[X]=J.append("g").classed("grid "+X,!0)})}),D.order()};var _=Math.sqrt(4/3);M.adjustLayout=function(R,V){var F,D,U,j,J,X,Z=this,Y=R.domain,W=(Y.x[0]+Y.x[1])/2,Q=(Y.y[0]+Y.y[1])/2,ne=Y.x[1]-Y.x[0],re=Y.y[1]-Y.y[0],ie=ne*V.w,se=re*V.h,ge=R.sum,ue=R.aaxis.min,ce=R.baxis.min,le=R.caxis.min;ie>_*se?U=(j=se)*_:j=(U=ie)/_,J=ne*U/ie,X=re*j/se,F=V.l+V.w*W-U/2,D=V.t+V.h*(1-Q)-j/2,Z.x0=F,Z.y0=D,Z.w=U,Z.h=j,Z.sum=ge,Z.xaxis={type:"linear",range:[ue+2*le-ge,ge-ue-2*ce],domain:[W-J/2,W+J/2],_id:"x"},o(Z.xaxis,Z.graphDiv._fullLayout),Z.xaxis.setScale(),Z.xaxis.isPtWithinRange=function(ke){return ke.a>=Z.aaxis.range[0]&&ke.a<=Z.aaxis.range[1]&&ke.b>=Z.baxis.range[1]&&ke.b<=Z.baxis.range[0]&&ke.c>=Z.caxis.range[1]&&ke.c<=Z.caxis.range[0]},Z.yaxis={type:"linear",range:[ue,ge-ce-le],domain:[Q-X/2,Q+X/2],_id:"y"},o(Z.yaxis,Z.graphDiv._fullLayout),Z.yaxis.setScale(),Z.yaxis.isPtWithinRange=function(){return!0};var de=Z.yaxis.domain[0],Ce=Z.aaxis=r({},R.aaxis,{range:[ue,ge-ce-le],side:"left",tickangle:(+R.aaxis.tickangle||0)-30,domain:[de,de+X*_],anchor:"free",position:0,_id:"y",_length:U});o(Ce,Z.graphDiv._fullLayout),Ce.setScale();var xe=Z.baxis=r({},R.baxis,{range:[ge-ue-le,ce],side:"bottom",domain:Z.xaxis.domain,anchor:"free",position:0,_id:"x",_length:U});o(xe,Z.graphDiv._fullLayout),xe.setScale();var _e=Z.caxis=r({},R.caxis,{range:[ge-ue-ce,le],side:"right",tickangle:(+R.caxis.tickangle||0)+30,domain:[de,de+X*_],anchor:"free",position:0,_id:"y",_length:U});o(_e,Z.graphDiv._fullLayout),_e.setScale();var we="M"+F+","+(D+j)+"h"+U+"l-"+U/2+",-"+j+"Z";Z.clipDef.select("path").attr("d",we),Z.layers.plotbg.select("path").attr("d",we);var Ae="M0,"+j+"h"+U+"l-"+U/2+",-"+j+"Z";Z.clipDefRelative.select("path").attr("d",Ae);var $=b(F,D);Z.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",$),Z.clipDefRelative.select("path").attr("transform",null);var oe=b(F-xe._offset,D+j);Z.layers.baxis.attr("transform",oe),Z.layers.bgrid.attr("transform",oe);var pe=b(F+U/2,D)+"rotate(30)"+b(0,-Ce._offset);Z.layers.aaxis.attr("transform",pe),Z.layers.agrid.attr("transform",pe);var ye=b(F+U/2,D)+"rotate(-30)"+b(0,-_e._offset);Z.layers.caxis.attr("transform",ye),Z.layers.cgrid.attr("transform",ye),Z.drawAxes(!0),Z.layers.aline.select("path").attr("d",Ce.showline?"M"+F+","+(D+j)+"l"+U/2+",-"+j:"M0,0").call(s.stroke,Ce.linecolor||"#000").style("stroke-width",(Ce.linewidth||0)+"px"),Z.layers.bline.select("path").attr("d",xe.showline?"M"+F+","+(D+j)+"h"+U:"M0,0").call(s.stroke,xe.linecolor||"#000").style("stroke-width",(xe.linewidth||0)+"px"),Z.layers.cline.select("path").attr("d",_e.showline?"M"+(F+U/2)+","+D+"l"+U/2+","+j:"M0,0").call(s.stroke,_e.linecolor||"#000").style("stroke-width",(_e.linewidth||0)+"px"),Z.graphDiv._context.staticPlot||Z.initInteractions(),t.setClipUrl(Z.layers.frontplot,Z._hasClipOnAxisFalse?null:Z.clipId,Z.graphDiv)},M.drawAxes=function(R){var V=this,F=V.graphDiv,D=V.id.substr(7)+"title",U=V.layers,j=V.aaxis,J=V.baxis,X=V.caxis;if(V.drawAx(j),V.drawAx(J),V.drawAx(X),R){var Z=Math.max(j.showticklabels?j.tickfont.size/2:0,(X.showticklabels?.75*X.tickfont.size:0)+(X.ticks==="outside"?.87*X.ticklen:0)),Y=(J.showticklabels?J.tickfont.size:0)+(J.ticks==="outside"?J.ticklen:0)+3;U["a-title"]=v.draw(F,"a"+D,{propContainer:j,propName:V.id+".aaxis.title",placeholder:d(F,"Click to enter Component A title"),attributes:{x:V.x0+V.w/2,y:V.y0-j.title.font.size/3-Z,"text-anchor":"middle"}}),U["b-title"]=v.draw(F,"b"+D,{propContainer:J,propName:V.id+".baxis.title",placeholder:d(F,"Click to enter Component B title"),attributes:{x:V.x0-Y,y:V.y0+V.h+.83*J.title.font.size+Y,"text-anchor":"middle"}}),U["c-title"]=v.draw(F,"c"+D,{propContainer:X,propName:V.id+".caxis.title",placeholder:d(F,"Click to enter Component C title"),attributes:{x:V.x0+V.w+Y,y:V.y0+V.h+.83*X.title.font.size+Y,"text-anchor":"middle"}})}},M.drawAx=function(R){var V,F=this,D=F.graphDiv,U=R._name,j=U.charAt(0),J=R._id,X=F.layers[U],Z=j+"tickLayout",Y=(V=R).ticks+String(V.ticklen)+String(V.showticklabels);F[Z]!==Y&&(X.selectAll("."+J+"tick").remove(),F[Z]=Y),R.setScale();var W=a.calcTicks(R),Q=a.clipEnds(R,W),ne=a.makeTransTickFn(R),re=a.getTickSigns(R)[2],ie=T.deg2rad(30),se=re*(R.linewidth||1)/2,ge=re*R.ticklen,ue=F.w,ce=F.h,le=j==="b"?"M0,"+se+"l"+Math.sin(ie)*ge+","+Math.cos(ie)*ge:"M"+se+",0l"+Math.cos(ie)*ge+","+-Math.sin(ie)*ge,de={a:"M0,0l"+ce+",-"+ue/2,b:"M0,0l-"+ue/2+",-"+ce,c:"M0,0l-"+ce+","+ue/2}[j];a.drawTicks(D,R,{vals:R.ticks==="inside"?Q:W,layer:X,path:le,transFn:ne,crisp:!1}),a.drawGrid(D,R,{vals:Q,layer:F.layers[j+"grid"],path:de,transFn:ne,crisp:!1}),a.drawLabels(D,R,{vals:W,layer:X,transFn:ne,labelFns:a.makeLabelFns(R,0,30)})};var E=w.MINZOOM/2+.87,L="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(.87*E+4.5)+"l2.6,1.5l-"+E/2+","+.87*E+"Z",C="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-2.6,1.5l"+E/2+","+.87*E+"Z",O="m0,1l"+E/2+","+.87*E+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-"+(E/2+2.6)+","+(.87*E+4.5)+"l2.6,1.5l"+E/2+",-"+.87*E+"Z",I=!0;function N(R){S.select(R).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}M.clearOutline=function(){m(this.dragOptions),p(this.dragOptions.gd)},M.initInteractions=function(){var R,V,F,D,U,j,J,X,Z,Y,W,Q,ne=this,re=ne.layers.plotbg.select("path").node(),ie=ne.graphDiv,se=ie._fullLayout._zoomlayer;function ge(Ae){var $={};return $[ne.id+".aaxis.min"]=Ae.a,$[ne.id+".baxis.min"]=Ae.b,$[ne.id+".caxis.min"]=Ae.c,$}function ue(Ae,$){var oe=ie._fullLayout.clickmode;N(ie),Ae===2&&(ie.emit("plotly_doubleclick",null),l.call("_guiRelayout",ie,ge({a:0,b:0,c:0}))),oe.indexOf("select")>-1&&Ae===1&&y($,ie,[ne.xaxis],[ne.yaxis],ne.id,ne.dragOptions),oe.indexOf("event")>-1&&u.click(ie,$,ne.id)}function ce(Ae,$){return 1-$/ne.h}function le(Ae,$){return 1-(Ae+(ne.h-$)/Math.sqrt(3))/ne.w}function de(Ae,$){return(Ae-(ne.h-$)/Math.sqrt(3))/ne.w}function Ce(Ae,$){var oe=F+Ae*R,pe=D+$*V,ye=Math.max(0,Math.min(1,ce(0,D),ce(0,pe))),ke=Math.max(0,Math.min(1,le(F,D),le(oe,pe))),De=Math.max(0,Math.min(1,de(F,D),de(oe,pe))),Pe=(ye/2+De)*ne.w,Re=(1-ye/2-ke)*ne.w,fe=(Pe+Re)/2,ve=Re-Pe,Te=(1-ye)*ne.h,ze=Te-ve/_;ve<w.MINZOOM?(J=U,W.attr("d",Z),Q.attr("d","M0,0Z")):(J={a:U.a+ye*j,b:U.b+ke*j,c:U.c+De*j},W.attr("d",Z+"M"+Pe+","+Te+"H"+Re+"L"+fe+","+ze+"L"+Pe+","+Te+"Z"),Q.attr("d","M"+F+","+D+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Pe+","+Te+L+"M"+Re+","+Te+C+"M"+fe+","+ze+O)),Y||(W.transition().style("fill",X>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),Q.transition().style("opacity",1).duration(200),Y=!0),ie.emit("plotly_relayouting",ge(J))}function xe(){N(ie),J!==U&&(l.call("_guiRelayout",ie,ge(J)),I&&ie.data&&ie._context.showTips&&(T.notifier(d(ie,"Double-click to zoom back out"),"long"),I=!1))}function _e(Ae,$){var oe=Ae/ne.xaxis._m,pe=$/ne.yaxis._m,ye=[(J={a:U.a-pe,b:U.b+(oe+pe)/2,c:U.c-(oe-pe)/2}).a,J.b,J.c].sort(T.sorterAsc),ke=ye.indexOf(J.a),De=ye.indexOf(J.b),Pe=ye.indexOf(J.c);ye[0]<0&&(ye[1]+ye[0]/2<0?(ye[2]+=ye[0]+ye[1],ye[0]=ye[1]=0):(ye[2]+=ye[0]/2,ye[1]+=ye[0]/2,ye[0]=0),J={a:ye[ke],b:ye[De],c:ye[Pe]},$=(U.a-J.a)*ne.yaxis._m,Ae=(U.c-J.c-U.b+J.b)*ne.xaxis._m);var Re=b(ne.x0+Ae,ne.y0+$);ne.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Re);var fe=b(-Ae,-$);ne.clipDefRelative.select("path").attr("transform",fe),ne.aaxis.range=[J.a,ne.sum-J.b-J.c],ne.baxis.range=[ne.sum-J.a-J.c,J.b],ne.caxis.range=[ne.sum-J.a-J.b,J.c],ne.drawAxes(!1),ne._hasClipOnAxisFalse&&ne.plotContainer.select(".scatterlayer").selectAll(".trace").call(t.hideOutsideRangePoints,ne),ie.emit("plotly_relayouting",ge(J))}function we(){l.call("_guiRelayout",ie,ge(J))}this.dragOptions={element:re,gd:ie,plotinfo:{id:ne.id,domain:ie._fullLayout[ne.id].domain,xaxis:ne.xaxis,yaxis:ne.yaxis},subplot:ne.id,prepFn:function(Ae,$,oe){ne.dragOptions.xaxes=[ne.xaxis],ne.dragOptions.yaxes=[ne.yaxis],R=ie._fullLayout._invScaleX,V=ie._fullLayout._invScaleY;var pe=ne.dragOptions.dragmode=ie._fullLayout.dragmode;f(pe)?ne.dragOptions.minDrag=1:ne.dragOptions.minDrag=void 0,pe==="zoom"?(ne.dragOptions.moveFn=Ce,ne.dragOptions.clickFn=ue,ne.dragOptions.doneFn=xe,function(ye,ke,De){var Pe=re.getBoundingClientRect();F=ke-Pe.left,D=De-Pe.top,ie._fullLayout._calcInverseTransform(ie);var Re=ie._fullLayout._invTransform,fe=T.apply3DTransform(Re)(F,D);F=fe[0],D=fe[1],U={a:ne.aaxis.range[0],b:ne.baxis.range[1],c:ne.caxis.range[1]},J=U,j=ne.aaxis.range[1]-U.a,X=k(ne.graphDiv._fullLayout[ne.id].bgcolor).getLuminance(),Z="M0,"+ne.h+"L"+ne.w/2+", 0L"+ne.w+","+ne.h+"Z",Y=!1,W=se.append("path").attr("class","zoombox").attr("transform",b(ne.x0,ne.y0)).style({fill:X>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",Z),Q=se.append("path").attr("class","zoombox-corners").attr("transform",b(ne.x0,ne.y0)).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),ne.clearOutline(ie)}(0,$,oe)):pe==="pan"?(ne.dragOptions.moveFn=_e,ne.dragOptions.clickFn=ue,ne.dragOptions.doneFn=we,U={a:ne.aaxis.range[0],b:ne.baxis.range[1],c:ne.caxis.range[1]},J=U,ne.clearOutline(ie)):(x(pe)||f(pe))&&g(Ae,$,oe,ne.dragOptions,pe)}},re.onmousemove=function(Ae){u.hover(ie,Ae,ne.id),ie._fullLayout._lasthover=re,ie._fullLayout._hoversubplot=ne.id},re.onmouseout=function(Ae){ie._dragging||i.unhover(ie,Ae)},i.init(this.dragOptions)}},73972:function(K,z,e){var S=e(47769),k=e(64213),l=e(75138),T=e(41965),b=e(24401).addStyleRule,d=e(1426),s=e(9012),t=e(10820),o=d.extendFlat,r=d.extendDeepAll;function n(y){var p=y.name,m=y.categories,w=y.meta;if(z.modules[p])S.log("Type "+p+" already registered");else{z.subplotsRegistry[y.basePlotModule.name]||function(I){var N=I.name;if(z.subplotsRegistry[N])S.log("Plot type "+N+" already registered.");else for(var R in h(I),z.subplotsRegistry[N]=I,z.componentsRegistry)v(R,I.name)}(y.basePlotModule);for(var c={},M=0;M<m.length;M++)c[m[M]]=!0,z.allCategories[m[M]]=!0;for(var _ in z.modules[p]={_module:y,categories:c},w&&Object.keys(w).length&&(z.modules[p].meta=w),z.allTypes.push(p),z.componentsRegistry)f(_,p);y.layoutAttributes&&o(z.traceLayoutAttributes,y.layoutAttributes);var E=y.basePlotModule,L=E.name;if(L==="mapbox"){var C=E.constants.styleRules;for(var O in C)b(".js-plotly-plot .plotly .mapboxgl-"+O,C[O])}L!=="geo"&&L!=="mapbox"||window.PlotlyGeoAssets!==void 0||(window.PlotlyGeoAssets={topojson:{}})}}function a(y){if(typeof y.name!="string")throw new Error("Component module *name* must be a string.");var p=y.name;for(var m in z.componentsRegistry[p]=y,y.layoutAttributes&&(y.layoutAttributes._isLinkedToArray&&l(z.layoutArrayContainers,p),h(y)),z.modules)f(p,m);for(var w in z.subplotsRegistry)v(p,w);for(var c in z.transformsRegistry)x(p,c);y.schema&&y.schema.layout&&r(t,y.schema.layout)}function i(y){if(typeof y.name!="string")throw new Error("Transform module *name* must be a string.");var p="Transform module "+y.name,m=typeof y.transform=="function",w=typeof y.calcTransform=="function";if(!m&&!w)throw new Error(p+" is missing a *transform* or *calcTransform* method.");for(var c in m&&w&&S.log([p+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),T(y.attributes)||S.log(p+" registered without an *attributes* object."),typeof y.supplyDefaults!="function"&&S.log(p+" registered without a *supplyDefaults* method."),z.transformsRegistry[y.name]=y,z.componentsRegistry)x(c,y.name)}function u(y){var p=y.name,m=p.split("-")[0],w=y.dictionary,c=y.format,M=w&&Object.keys(w).length,_=c&&Object.keys(c).length,E=z.localeRegistry,L=E[p];if(L||(E[p]=L={}),m!==p){var C=E[m];C||(E[m]=C={}),M&&C.dictionary===L.dictionary&&(C.dictionary=w),_&&C.format===L.format&&(C.format=c)}M&&(L.dictionary=w),_&&(L.format=c)}function h(y){if(y.layoutAttributes){var p=y.layoutAttributes._arrayAttrRegexps;if(p)for(var m=0;m<p.length;m++)l(z.layoutArrayRegexes,p[m])}}function f(y,p){var m=z.componentsRegistry[y].schema;if(m&&m.traces){var w=m.traces[p];w&&r(z.modules[p]._module.attributes,w)}}function x(y,p){var m=z.componentsRegistry[y].schema;if(m&&m.transforms){var w=m.transforms[p];w&&r(z.transformsRegistry[p].attributes,w)}}function v(y,p){var m=z.componentsRegistry[y].schema;if(m&&m.subplots){var w=z.subplotsRegistry[p],c=w.layoutAttributes,M=w.attr==="subplot"?w.name:w.attr;Array.isArray(M)&&(M=M[0]);var _=m.subplots[M];c&&_&&r(c,_)}}function g(y){return typeof y=="object"&&(y=y.type),y}z.modules={},z.allCategories={},z.allTypes=[],z.subplotsRegistry={},z.transformsRegistry={},z.componentsRegistry={},z.layoutArrayContainers=[],z.layoutArrayRegexes=[],z.traceLayoutAttributes={},z.localeRegistry={},z.apiMethodRegistry={},z.collectableSubplotTypes=null,z.register=function(y){if(z.collectableSubplotTypes=null,!y)throw new Error("No argument passed to Plotly.register.");y&&!Array.isArray(y)&&(y=[y]);for(var p=0;p<y.length;p++){var m=y[p];if(!m)throw new Error("Invalid module was attempted to be registered!");switch(m.moduleType){case"trace":n(m);break;case"transform":i(m);break;case"component":a(m);break;case"locale":u(m);break;case"apiMethod":var w=m.name;z.apiMethodRegistry[w]=m.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},z.getModule=function(y){var p=z.modules[g(y)];return!!p&&p._module},z.traceIs=function(y,p){if((y=g(y))==="various")return!1;var m=z.modules[y];return m||(y&&S.log("Unrecognized trace type "+y+"."),m=z.modules[s.type.dflt]),!!m.categories[p]},z.getTransformIndices=function(y,p){for(var m=[],w=y.transforms||[],c=0;c<w.length;c++)w[c].type===p&&m.push(c);return m},z.hasTransform=function(y,p){for(var m=y.transforms||[],w=0;w<m.length;w++)if(m[w].type===p)return!0;return!1},z.getComponentMethod=function(y,p){var m=z.componentsRegistry[y];return m&&m[p]||k},z.call=function(){var y=arguments[0],p=[].slice.call(arguments,1);return z.apiMethodRegistry[y].apply(null,p)}},61914:function(K,z,e){var S=e(73972),k=e(71828),l=k.extendFlat,T=k.extendDeep;function b(d){var s;switch(d){case"themes__thumb":s={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":s={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:s={}}return s}K.exports=function(d,s){var t,o,r=d.data,n=d.layout,a=T([],r),i=T({},n,b(s.tileClass)),u=d._context||{};if(s.width&&(i.width=s.width),s.height&&(i.height=s.height),s.tileClass==="thumbnail"||s.tileClass==="themes__thumb"){i.annotations=[];var h=Object.keys(i);for(t=0;t<h.length;t++)o=h[t],["xaxis","yaxis","zaxis"].indexOf(o.slice(0,5))>-1&&(i[h[t]].title={text:""});for(t=0;t<a.length;t++){var f=a[t];f.showscale=!1,f.marker&&(f.marker.showscale=!1),S.traceIs(f,"pie-like")&&(f.textposition="none")}}if(Array.isArray(s.annotations))for(t=0;t<s.annotations.length;t++)i.annotations.push(s.annotations[t]);var x=Object.keys(i).filter(function(m){return m.match(/^scene\d*$/)});if(x.length){var v={};for(s.tileClass==="thumbnail"&&(v={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),t=0;t<x.length;t++){var g=i[x[t]];g.xaxis||(g.xaxis={}),g.yaxis||(g.yaxis={}),g.zaxis||(g.zaxis={}),l(g.xaxis,v),l(g.yaxis,v),l(g.zaxis,v),g._scene=null}}var y=document.createElement("div");s.tileClass&&(y.className=s.tileClass);var p={gd:y,td:y,layout:i,data:a,config:{staticPlot:s.staticPlot===void 0||s.staticPlot,plotGlPixelRatio:s.plotGlPixelRatio===void 0?2:s.plotGlPixelRatio,displaylogo:s.displaylogo||!1,showLink:s.showLink||!1,showTips:s.showTips||!1,mapboxAccessToken:u.mapboxAccessToken}};return s.setBackground!=="transparent"&&(p.config.setBackground=s.setBackground||"opaque"),p.gd.defaultLayout=b(s.tileClass),p}},7239:function(K,z,e){var S=e(71828),k=e(403),l=e(22435),T=e(25095);K.exports=function(b,d){var s;return S.isPlainObject(b)||(s=S.getGraphDiv(b)),(d=d||{}).format=d.format||"png",d.width=d.width||null,d.height=d.height||null,d.imageDataOnly=!0,new Promise(function(t,o){s&&s._snapshotInProgress&&o(new Error("Snapshotting already in progress.")),S.isIE()&&d.format!=="svg"&&o(new Error(T.MSG_IE_BAD_FORMAT)),s&&(s._snapshotInProgress=!0);var r=k(b,d),n=d.filename||b.fn||"newplot";n+="."+d.format.replace("-","."),r.then(function(a){return s&&(s._snapshotInProgress=!1),l(a,n,d.format)}).then(function(a){t(a)}).catch(function(a){s&&(s._snapshotInProgress=!1),o(a)})})}},22435:function(K,z,e){var S=e(71828),k=e(25095);K.exports=function(l,T,b){var d=document.createElement("a"),s="download"in d;return new Promise(function(t,o){var r,n;if(S.isIE())return r=k.createBlob(l,"svg"),window.navigator.msSaveBlob(r,T),r=null,t(T);if(s)return r=k.createBlob(l,b),n=k.createObjectURL(r),d.href=n,d.download=T,document.body.appendChild(d),d.click(),document.body.removeChild(d),k.revokeObjectURL(n),r=null,t(T);if(S.isSafari()){var a=b==="svg"?",":";base64,";return k.octetStream(a+encodeURIComponent(l)),t(T)}o(new Error("download error"))})}},25095:function(K,z,e){var S=e(73972);z.getDelay=function(l){return l._has&&(l._has("gl3d")||l._has("gl2d")||l._has("mapbox"))?500:0},z.getRedrawFunc=function(l){return function(){S.getComponentMethod("colorbar","draw")(l)}},z.encodeSVG=function(l){return"data:image/svg+xml,"+encodeURIComponent(l)},z.encodeJSON=function(l){return"data:application/json,"+encodeURIComponent(l)};var k=window.URL||window.webkitURL;z.createObjectURL=function(l){return k.createObjectURL(l)},z.revokeObjectURL=function(l){return k.revokeObjectURL(l)},z.createBlob=function(l,T){if(T==="svg")return new window.Blob([l],{type:"image/svg+xml;charset=utf-8"});if(T==="full-json")return new window.Blob([l],{type:"application/json;charset=utf-8"});var b=function(d){for(var s=d.length,t=new ArrayBuffer(s),o=new Uint8Array(t),r=0;r<s;r++)o[r]=d.charCodeAt(r);return t}(window.atob(l));return new window.Blob([b],{type:"image/"+T})},z.octetStream=function(l){document.location.href="data:application/octet-stream"+l},z.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,z.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},44511:function(K,z,e){var S=e(25095),k={getDelay:S.getDelay,getRedrawFunc:S.getRedrawFunc,clone:e(61914),toSVG:e(5900),svgToImg:e(70942),toImage:e(56395),downloadImage:e(7239)};K.exports=k},70942:function(K,z,e){var S=e(71828),k=e(15398).EventEmitter,l=e(25095);K.exports=function(T){var b=T.emitter||new k,d=new Promise(function(s,t){var o=window.Image,r=T.svg,n=T.format||"png";if(S.isIE()&&n!=="svg"){var a=new Error(l.MSG_IE_BAD_FORMAT);return t(a),T.promise?d:b.emit("error",a)}var i,u,h=T.canvas,f=T.scale||1,x=T.width||300,v=T.height||150,g=f*x,y=f*v,p=h.getContext("2d",{willReadFrequently:!0}),m=new o;n==="svg"||S.isSafari()?u=l.encodeSVG(r):(i=l.createBlob(r,"svg"),u=l.createObjectURL(i)),h.width=g,h.height=y,m.onload=function(){var w;switch(i=null,l.revokeObjectURL(u),n!=="svg"&&p.drawImage(m,0,0,g,y),n){case"jpeg":w=h.toDataURL("image/jpeg");break;case"png":w=h.toDataURL("image/png");break;case"webp":w=h.toDataURL("image/webp");break;case"svg":w=u;break;default:var c="Image format is not jpeg, png, svg or webp.";if(t(new Error(c)),!T.promise)return b.emit("error",c)}s(w),T.promise||b.emit("success",w)},m.onerror=function(w){if(i=null,l.revokeObjectURL(u),t(w),!T.promise)return b.emit("error",w)},m.src=u});return T.promise?d:b}},56395:function(K,z,e){var S=e(15398).EventEmitter,k=e(73972),l=e(71828),T=e(25095),b=e(61914),d=e(5900),s=e(70942);K.exports=function(t,o){var r=new S,n=b(t,{format:"png"}),a=n.gd;a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a);var i=T.getRedrawFunc(a);return k.call("_doPlot",a,n.data,n.layout,n.config).then(i).then(function(){var u=T.getDelay(a._fullLayout);setTimeout(function(){var h=d(a),f=document.createElement("canvas");f.id=l.randstr(),(r=s({format:o.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:f,emitter:r,svg:h})).clean=function(){a&&document.body.removeChild(a)}},u)}).catch(function(u){r.emit("error",u)}),r}},5900:function(K,z,e){var S=e(39898),k=e(71828),l=e(91424),T=e(7901),b=e(77922),d=/"/g,s="TOBESTRIPPED",t=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");K.exports=function(o,r,n){var a,i=o._fullLayout,u=i._paper,h=i._toppaper,f=i.width,x=i.height;u.insert("rect",":first-child").call(l.setRect,0,0,f,x).call(T.fill,i.paper_bgcolor);var v=i._basePlotModules||[];for(a=0;a<v.length;a++){var g=v[a];g.toSVG&&g.toSVG(o)}if(h){var y=h.node().childNodes,p=Array.prototype.slice.call(y);for(a=0;a<p.length;a++){var m=p[a];m.childNodes.length&&u.node().appendChild(m)}}i._draggers&&i._draggers.remove(),u.node().style.background="",u.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var c=S.select(this);if(this.style.visibility!=="hidden"&&this.style.display!=="none"){c.style({visibility:null,display:null});var M=this.style.fontFamily;M&&M.indexOf('"')!==-1&&c.style("font-family",M.replace(d,s))}else c.remove()}),u.selectAll(".gradient_filled,.pattern_filled").each(function(){var c=S.select(this),M=this.style.fill;M&&M.indexOf("url(")!==-1&&c.style("fill",M.replace(d,s));var _=this.style.stroke;_&&_.indexOf("url(")!==-1&&c.style("stroke",_.replace(d,s))}),r!=="pdf"&&r!=="eps"||u.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),u.node().setAttributeNS(b.xmlns,"xmlns",b.svg),u.node().setAttributeNS(b.xmlns,"xmlns:xlink",b.xlink),r==="svg"&&n&&(u.attr("width",n*f),u.attr("height",n*x),u.attr("viewBox","0 0 "+f+" "+x));var w=new window.XMLSerializer().serializeToString(u.node());return w=(w=(w=function(c){var M=S.select("body").append("div").style({display:"none"}).html(""),_=c.replace(/(&[^;]*;)/gi,function(E){return E==="&lt;"?"&#60;":E==="&rt;"?"&#62;":E.indexOf("<")!==-1||E.indexOf(">")!==-1?"":M.html(E).text()});return M.remove(),_}(w)).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(t,"'"),k.isIE()&&(w=(w=(w=w.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),w}},75341:function(K,z,e){var S=e(71828);K.exports=function(k,l){for(var T=0;T<k.length;T++)k[T].i=T;S.mergeArray(l.text,k,"tx"),S.mergeArray(l.hovertext,k,"htx");var b=l.marker;if(b){S.mergeArray(b.opacity,k,"mo",!0),S.mergeArray(b.color,k,"mc");var d=b.line;d&&(S.mergeArray(d.color,k,"mlc"),S.mergeArrayCastPositive(d.width,k,"mlw"))}}},1486:function(K,z,e){var S=e(82196),k=e(12663).axisHoverFormat,l=e(5386).fF,T=e(5386).si,b=e(50693),d=e(41940),s=e(97313),t=e(79952).u,o=e(1426).extendFlat,r=d({editType:"calc",arrayOk:!0,colorEditType:"style"}),n=o({},S.marker.line.width,{dflt:0}),a=o({width:n,editType:"calc"},b("marker.line")),i=o({line:a,editType:"calc"},b("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:t});K.exports={x:S.x,x0:S.x0,dx:S.dx,y:S.y,y0:S.y0,dy:S.dy,xperiod:S.xperiod,yperiod:S.yperiod,xperiod0:S.xperiod0,yperiod0:S.yperiod0,xperiodalignment:S.xperiodalignment,yperiodalignment:S.yperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),text:S.text,texttemplate:T({editType:"plot"},{keys:s.eventDataKeys}),hovertext:S.hovertext,hovertemplate:l({},{keys:s.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:o({},r,{}),insidetextfont:o({},r,{}),outsidetextfont:o({},r,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:o({},S.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:i,offsetgroup:S.offsetgroup,alignmentgroup:S.alignmentgroup,selected:{marker:{opacity:S.selected.marker.opacity,color:S.selected.marker.color,editType:"style"},textfont:S.selected.textfont,editType:"style"},unselected:{marker:{opacity:S.unselected.marker.opacity,color:S.unselected.marker.color,editType:"style"},textfont:S.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},92290:function(K,z,e){var S=e(89298),k=e(42973),l=e(52075).hasColorscale,T=e(78803),b=e(75341),d=e(66279);K.exports=function(s,t){var o,r,n,a,i,u,h=S.getFromId(s,t.xaxis||"x"),f=S.getFromId(s,t.yaxis||"y"),x={msUTC:!(!t.base&&t.base!==0)};t.orientation==="h"?(o=h.makeCalcdata(t,"x",x),n=f.makeCalcdata(t,"y"),a=k(t,f,"y",n),i=!!t.yperiodalignment,u="y"):(o=f.makeCalcdata(t,"y",x),n=h.makeCalcdata(t,"x"),a=k(t,h,"x",n),i=!!t.xperiodalignment,u="x"),r=a.vals;for(var v=Math.min(r.length,o.length),g=new Array(v),y=0;y<v;y++)g[y]={p:r[y],s:o[y]},i&&(g[y].orig_p=n[y],g[y][u+"End"]=a.ends[y],g[y][u+"Start"]=a.starts[y]),t.ids&&(g[y].id=String(t.ids[y]));return l(t,"marker")&&T(s,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),l(t,"marker.line")&&T(s,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),b(g,t),d(g,t),g}},97313:function(K){K.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},11661:function(K,z,e){var S=e(92770),k=e(71828).isArrayOrTypedArray,l=e(50606).BADNUM,T=e(73972),b=e(89298),d=e(99082).getAxisGroup,s=e(61546);function t(v,g,y,p,m){if(p.length){var w,c,M,_;switch(function(E,L){var C,O;for(C=0;C<L.length;C++){var I,N=L[C],R=N[0].trace,V=R.type==="funnel"?R._base:R.base,F=R.orientation==="h"?R.xcalendar:R.ycalendar,D=E.type==="category"||E.type==="multicategory"?function(){return null}:E.d2c;if(k(V)){for(O=0;O<Math.min(V.length,N.length);O++)I=D(V[O],0,F),S(I)?(N[O].b=+I,N[O].hasB=1):N[O].b=0;for(;O<N.length;O++)N[O].b=0}else{I=D(V,0,F);var U=S(I);for(I=U?I:0,O=0;O<N.length;O++)N[O].b=I,U&&(N[O].hasB=1)}}}(y,p),m.mode){case"overlay":o(g,y,p,m);break;case"group":for(w=[],c=[],M=0;M<p.length;M++)(_=p[M])[0].trace.offset===void 0?c.push(_):w.push(_);c.length&&function(E,L,C,O,I){var N=new s(O,{posAxis:L,sepNegVal:!1,overlapNoMerge:!I.norm});(function(R,V,F,D){for(var U=R._fullLayout,j=F.positions,J=F.distinctPositions,X=F.minDiff,Z=F.traces,Y=Z.length,W=j.length!==J.length,Q=X*(1-D.gap),ne=d(U,V._id)+Z[0][0].trace.orientation,re=U._alignmentOpts[ne]||{},ie=0;ie<Y;ie++){var se,ge,ue=Z[ie],ce=ue[0].trace,le=re[ce.alignmentgroup]||{},de=Object.keys(le.offsetGroups||{}).length,Ce=(se=de?Q/de:W?Q/Y:Q)*(1-(D.groupgap||0));ge=de?((2*ce._offsetIndex+1-de)*se-Ce)/2:W?((2*ie+1-Y)*se-Ce)/2:-Ce/2;var xe=ue[0].t;xe.barwidth=Ce,xe.poffset=ge,xe.bargroupwidth=Q,xe.bardelta=X}F.binWidth=Z[0][0].t.barwidth/100,n(F),a(V,F),i(V,F,W)})(E,L,N,I),function(R,V){for(var F=R.traces,D=0;D<F.length;D++){var U=F[D];if(U[0].trace.base===void 0)for(var j=new s([U],{posAxis:V,sepNegVal:!0,overlapNoMerge:!0}),J=0;J<U.length;J++){var X=U[J];if(X.p!==l){var Z=j.put(X.p,X.b+X.s);Z&&(X.b=Z)}}}}(N,L),I.norm?(h(N),f(C,N,I)):u(C,N)}(v,g,y,c,m),w.length&&o(g,y,w,m);break;case"stack":case"relative":for(w=[],c=[],M=0;M<p.length;M++)(_=p[M])[0].trace.base===void 0?c.push(_):w.push(_);c.length&&function(E,L,C,O,I){var N=new s(O,{posAxis:L,sepNegVal:I.mode==="relative",overlapNoMerge:!(I.norm||I.mode==="stack"||I.mode==="relative")});r(L,N,I),function(U,j,J){var X,Z,Y,W,Q,ne,re=x(U),ie=j.traces;for(W=0;W<ie.length;W++)if((Z=(X=ie[W])[0].trace).type==="funnel")for(Q=0;Q<X.length;Q++)(ne=X[Q]).s!==l&&j.put(ne.p,-.5*ne.s);for(W=0;W<ie.length;W++){Y=(Z=(X=ie[W])[0].trace).type==="funnel";var se=[];for(Q=0;Q<X.length;Q++)if((ne=X[Q]).s!==l){var ge;ge=Y?ne.s:ne.s+ne.b;var ue=j.put(ne.p,ge),ce=ue+ge;ne.b=ue,ne[re]=ce,J.norm||(se.push(ce),ne.hasB&&se.push(ue))}J.norm||(Z._extremes[U._id]=b.findExtremes(U,se,{tozero:!0,padded:!0}))}}(C,N,I);for(var R=0;R<O.length;R++)for(var V=O[R],F=0;F<V.length;F++){var D=V[F];D.s!==l&&D.b+D.s===N.get(D.p,D.s)&&(D._outmost=!0)}I.norm&&f(C,N,I)}(0,g,y,c,m),w.length&&o(g,y,w,m)}(function(E,L){var C,O,I,N=x(L),R={},V=1/0,F=-1/0;for(C=0;C<E.length;C++)for(I=E[C],O=0;O<I.length;O++){var D=I[O].p;S(D)&&(V=Math.min(V,D),F=Math.max(F,D))}var U=1e4/(F-V),j=R.round=function(ne){return String(Math.round(U*(ne-V)))};for(C=0;C<E.length;C++){(I=E[C])[0].t.extents=R;var J=I[0].t.poffset,X=Array.isArray(J);for(O=0;O<I.length;O++){var Z=I[O],Y=Z[N]-Z.w/2;if(S(Y)){var W=Z[N]+Z.w/2,Q=j(Z.p);R[Q]?R[Q]=[Math.min(Y,R[Q][0]),Math.max(W,R[Q][1])]:R[Q]=[Y,W]}Z.p0=Z.p+(X?J[O]:J),Z.p1=Z.p0+Z.w,Z.s0=Z.b,Z.s1=Z.s0+Z.s}}})(p,g)}}function o(v,g,y,p){for(var m=0;m<y.length;m++){var w=y[m],c=new s([w],{posAxis:v,sepNegVal:!1,overlapNoMerge:!p.norm});r(v,c,p),p.norm?(h(c),f(g,c,p)):u(g,c)}}function r(v,g,y){for(var p=g.minDiff,m=g.traces,w=p*(1-y.gap),c=w*(1-(y.groupgap||0)),M=-c/2,_=0;_<m.length;_++){var E=m[_][0].t;E.barwidth=c,E.poffset=M,E.bargroupwidth=w,E.bardelta=p}g.binWidth=m[0][0].t.barwidth/100,n(g),a(v,g),i(v,g)}function n(v){var g,y,p=v.traces;for(g=0;g<p.length;g++){var m,w=p[g],c=w[0],M=c.trace,_=c.t,E=M._offset||M.offset,L=_.poffset;if(k(E)){for(m=Array.prototype.slice.call(E,0,w.length),y=0;y<m.length;y++)S(m[y])||(m[y]=L);for(y=m.length;y<w.length;y++)m.push(L);_.poffset=m}else E!==void 0&&(_.poffset=E);var C=M._width||M.width,O=_.barwidth;if(k(C)){var I=Array.prototype.slice.call(C,0,w.length);for(y=0;y<I.length;y++)S(I[y])||(I[y]=O);for(y=I.length;y<w.length;y++)I.push(O);if(_.barwidth=I,E===void 0){for(m=[],y=0;y<w.length;y++)m.push(L+(O-I[y])/2);_.poffset=m}}else C!==void 0&&(_.barwidth=C,E===void 0&&(_.poffset=L+(O-C)/2))}}function a(v,g){for(var y=g.traces,p=x(v),m=0;m<y.length;m++)for(var w=y[m],c=w[0].t,M=c.poffset,_=Array.isArray(M),E=c.barwidth,L=Array.isArray(E),C=0;C<w.length;C++){var O=w[C],I=O.w=L?E[C]:E;O.p===void 0&&(O.p=O[p],O["orig_"+p]=O[p]);var N=(_?M[C]:M)+I/2;O[p]=O.p+N}}function i(v,g,y){var p=g.traces,m=g.minDiff/2;b.minDtick(v,g.minDiff,g.distinctPositions[0],y);for(var w=0;w<p.length;w++){var c,M,_,E,L=p[w],C=L[0],O=C.trace,I=[];for(E=0;E<L.length;E++)M=(c=L[E]).p-m,_=c.p+m,I.push(M,_);if(O.width||O.offset){var N=C.t,R=N.poffset,V=N.barwidth,F=Array.isArray(R),D=Array.isArray(V);for(E=0;E<L.length;E++){c=L[E];var U=F?R[E]:R,j=D?V[E]:V;_=(M=c.p+U)+j,I.push(M,_)}}O._extremes[v._id]=b.findExtremes(v,I,{padded:!1})}}function u(v,g){for(var y=g.traces,p=x(v),m=0;m<y.length;m++){for(var w=y[m],c=w[0].trace,M=c.type==="scatter",_=c.orientation==="v",E=[],L=!1,C=0;C<w.length;C++){var O=w[C],I=M?0:O.b,N=M?_?O.y:O.x:I+O.s;O[p]=N,E.push(N),O.hasB&&E.push(I),O.hasB&&O.b||(L=!0)}c._extremes[v._id]=b.findExtremes(v,E,{tozero:L,padded:!0})}}function h(v){for(var g=v.traces,y=0;y<g.length;y++)for(var p=g[y],m=0;m<p.length;m++){var w=p[m];w.s!==l&&v.put(w.p,w.b+w.s)}}function f(v,g,y){var p=g.traces,m=x(v),w=y.norm==="fraction"?1:100,c=w/1e9,M=v.l2c(v.c2l(0)),_=y.mode==="stack"?w:M;function E(J){return S(v.c2l(J))&&(J<M-c||J>_+c||!S(M))}for(var L=0;L<p.length;L++){for(var C=p[L],O=C[0].trace,I=[],N=!1,R=!1,V=0;V<C.length;V++){var F=C[V];if(F.s!==l){var D=Math.abs(w/g.get(F.p,F.s));F.b*=D,F.s*=D;var U=F.b,j=U+F.s;F[m]=j,I.push(j),R=R||E(j),F.hasB&&(I.push(U),R=R||E(U)),F.hasB&&F.b||(N=!0)}}O._extremes[v._id]=b.findExtremes(v,I,{tozero:N,padded:R})}}function x(v){return v._id.charAt(0)}K.exports={crossTraceCalc:function(v,g){for(var y=g.xaxis,p=g.yaxis,m=v._fullLayout,w=v._fullData,c=v.calcdata,M=[],_=[],E=0;E<w.length;E++){var L=w[E];if(L.visible===!0&&T.traceIs(L,"bar")&&L.xaxis===y._id&&L.yaxis===p._id&&(L.orientation==="h"?M.push(c[E]):_.push(c[E]),L._computePh))for(var C=v.calcdata[E],O=0;O<C.length;O++)typeof C[O].ph0=="function"&&(C[O].ph0=C[O].ph0()),typeof C[O].ph1=="function"&&(C[O].ph1=C[O].ph1())}var I={xCat:y.type==="category"||y.type==="multicategory",yCat:p.type==="category"||p.type==="multicategory",mode:m.barmode,norm:m.barnorm,gap:m.bargap,groupgap:m.bargroupgap};t(v,y,p,_,I),t(v,p,y,M,I)},setGroupPositions:t}},90769:function(K,z,e){var S=e(71828),k=e(7901),l=e(73972),T=e(67513),b=e(73927),d=e(98340),s=e(26125),t=e(1486),o=S.coerceFont;function r(n,a,i,u,h,f){var x=(f=f||{}).moduleHasSelected!==!1,v=f.moduleHasUnselected!==!1,g=f.moduleHasConstrain!==!1,y=f.moduleHasCliponaxis!==!1,p=f.moduleHasTextangle!==!1,m=f.moduleHasInsideanchor!==!1,w=!!f.hasPathbar,c=Array.isArray(h)||h==="auto",M=c||h==="inside",_=c||h==="outside";if(M||_){var E=o(u,"textfont",i.font),L=S.extendFlat({},E),C=!(n.textfont&&n.textfont.color);if(C&&delete L.color,o(u,"insidetextfont",L),w){var O=S.extendFlat({},E);C&&delete O.color,o(u,"pathbar.textfont",O)}_&&o(u,"outsidetextfont",E),x&&u("selected.textfont.color"),v&&u("unselected.textfont.color"),g&&u("constraintext"),y&&u("cliponaxis"),p&&u("textangle"),u("texttemplate")}M&&m&&u("insidetextanchor")}K.exports={supplyDefaults:function(n,a,i,u){function h(g,y){return S.coerce(n,a,t,g,y)}if(T(n,a,u,h)){b(n,a,u,h),h("xhoverformat"),h("yhoverformat"),h("orientation",a.x&&!a.y?"h":"v"),h("base"),h("offset"),h("width"),h("text"),h("hovertext"),h("hovertemplate");var f=h("textposition");r(n,0,u,h,f,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),d(n,a,h,i,u);var x=(a.marker.line||{}).color,v=l.getComponentMethod("errorbars","supplyDefaults");v(n,a,x||k.defaultLine,{axis:"y"}),v(n,a,x||k.defaultLine,{axis:"x",inherit:"y"}),S.coerceSelectionMarkerOpacity(a,h)}else a.visible=!1},crossTraceDefaults:function(n,a){var i,u;function h(x){return S.coerce(u._input,u,t,x)}if(a.barmode==="group")for(var f=0;f<n.length;f++)(u=n[f]).type==="bar"&&(i=u._input,s(i,u,a,h))},handleText:r}},58065:function(K){K.exports=function(z,e,S){return z.x="xVal"in e?e.xVal:e.x,z.y="yVal"in e?e.yVal:e.y,e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),S.orientation==="h"?(z.label=z.y,z.value=z.x):(z.label=z.x,z.value=z.y),z}},69383:function(K,z,e){var S=e(92770),k=e(84267),l=e(71828).isArrayOrTypedArray;z.coerceString=function(T,b,d){if(typeof b=="string"){if(b||!T.noBlank)return b}else if((typeof b=="number"||b===!0)&&!T.strict)return String(b);return d!==void 0?d:T.dflt},z.coerceNumber=function(T,b,d){if(S(b)){b=+b;var s=T.min,t=T.max;if(!(s!==void 0&&b<s||t!==void 0&&b>t))return b}return d!==void 0?d:T.dflt},z.coerceColor=function(T,b,d){return k(b).isValid()?b:d!==void 0?d:T.dflt},z.coerceEnumerated=function(T,b,d){return T.coerceNumber&&(b=+b),T.values.indexOf(b)!==-1?b:d!==void 0?d:T.dflt},z.getValue=function(T,b){var d;return Array.isArray(T)?b<T.length&&(d=T[b]):d=T,d},z.getLineWidth=function(T,b){return 0<b.mlw?b.mlw:l(T.marker.line.width)?0:T.marker.line.width}},95423:function(K,z,e){var S=e(30211),k=e(73972),l=e(7901),T=e(71828).fillText,b=e(69383).getLineWidth,d=e(89298).hoverLabelText,s=e(50606).BADNUM;function t(r,n,a,i,u){var h,f,x,v,g,y,p,m=r.cd,w=m[0].trace,c=m[0].t,M=i==="closest",_=w.type==="waterfall",E=r.maxHoverDistance,L=r.maxSpikeDistance;w.orientation==="h"?(h=a,f=n,x="y",v="x",g=X,y=j):(h=n,f=a,x="x",v="y",y=X,g=j);var C=w[x+"period"],O=M||C;function I(se){return R(se,-1)}function N(se){return R(se,1)}function R(se,ge){var ue=se.w;return se[x]+ge*ue/2}function V(se){return se[x+"End"]-se[x+"Start"]}var F=M?I:C?function(se){return se.p-V(se)/2}:function(se){return Math.min(I(se),se.p-c.bardelta/2)},D=M?N:C?function(se){return se.p+V(se)/2}:function(se){return Math.max(N(se),se.p+c.bardelta/2)};function U(se,ge,ue){return u.finiteRange&&(ue=0),S.inbox(se-h,ge-h,ue+Math.min(1,Math.abs(ge-se)/p)-1)}function j(se){return U(F(se),D(se),E)}function J(se){var ge=se[v];if(_){var ue=Math.abs(se.rawS)||0;f>0?ge+=ue:f<0&&(ge-=ue)}return ge}function X(se){var ge=f,ue=se.b,ce=J(se);return S.inbox(ue-ge,ce-ge,E+(ce-ge)/(ce-ue)-1)}var Z=r[x+"a"],Y=r[v+"a"];p=Math.abs(Z.r2c(Z.range[1])-Z.r2c(Z.range[0]));var W=S.getDistanceFunction(i,g,y,function(se){return(g(se)+y(se))/2});if(S.getClosest(m,W,r),r.index!==!1&&m[r.index].p!==s){O||(F=function(se){return Math.min(I(se),se.p-c.bargroupwidth/2)},D=function(se){return Math.max(N(se),se.p+c.bargroupwidth/2)});var Q=m[r.index],ne=w.base?Q.b+Q.s:Q.s;r[v+"0"]=r[v+"1"]=Y.c2p(Q[v],!0),r[v+"LabelVal"]=ne;var re=c.extents[c.extents.round(Q.p)];r[x+"0"]=Z.c2p(M?F(Q):re[0],!0),r[x+"1"]=Z.c2p(M?D(Q):re[1],!0);var ie=Q.orig_p!==void 0;return r[x+"LabelVal"]=ie?Q.orig_p:Q.p,r.labelLabel=d(Z,r[x+"LabelVal"],w[x+"hoverformat"]),r.valueLabel=d(Y,r[v+"LabelVal"],w[v+"hoverformat"]),r.baseLabel=d(Y,Q.b,w[v+"hoverformat"]),r.spikeDistance=(function(se){var ge=f,ue=se.b,ce=J(se);return S.inbox(ue-ge,ce-ge,L+(ce-ge)/(ce-ue)-1)}(Q)+function(se){return U(I(se),N(se),L)}(Q))/2,r[x+"Spike"]=Z.c2p(Q.p,!0),T(Q,w,r),r.hovertemplate=w.hovertemplate,r}}function o(r,n){var a=n.mcc||r.marker.color,i=n.mlcc||r.marker.line.color,u=b(r,n);return l.opacity(a)?a:l.opacity(i)&&u?i:void 0}K.exports={hoverPoints:function(r,n,a,i,u){var h=t(r,n,a,i,u);if(h){var f=h.cd,x=f[0].trace,v=f[h.index];return h.color=o(x,v),k.getComponentMethod("errorbars","hoverInfo")(v,x,h),[h]}},hoverOnBars:t,getTraceColor:o}},60822:function(K,z,e){K.exports={attributes:e(1486),layoutAttributes:e(43641),supplyDefaults:e(90769).supplyDefaults,crossTraceDefaults:e(90769).crossTraceDefaults,supplyLayoutDefaults:e(13957),calc:e(92290),crossTraceCalc:e(11661).crossTraceCalc,colorbar:e(4898),arraysToCalcdata:e(75341),plot:e(17295).plot,style:e(16688).style,styleOnSelect:e(16688).styleOnSelect,hoverPoints:e(95423).hoverPoints,eventData:e(58065),selectPoints:e(81974),moduleType:"trace",name:"bar",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},43641:function(K){K.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},13957:function(K,z,e){var S=e(73972),k=e(89298),l=e(71828),T=e(43641);K.exports=function(b,d,s){function t(x,v){return l.coerce(b,d,T,x,v)}for(var o=!1,r=!1,n=!1,a={},i=t("barmode"),u=0;u<s.length;u++){var h=s[u];if(S.traceIs(h,"bar")&&h.visible){if(o=!0,i==="group"){var f=h.xaxis+h.yaxis;a[f]&&(n=!0),a[f]=!0}h.visible&&h.type==="histogram"&&k.getFromId({_fullLayout:d},h[h.orientation==="v"?"xaxis":"yaxis"]).type!=="category"&&(r=!0)}}o?(i!=="overlay"&&t("barnorm"),t("bargap",r&&!n?0:.2),t("bargroupgap")):delete d.barmode}},17295:function(K,z,e){var S=e(39898),k=e(92770),l=e(71828),T=e(63893),b=e(7901),d=e(91424),s=e(73972),t=e(89298).tickText,o=e(72597),r=o.recordMinTextSize,n=o.clearMinTextSize,a=e(16688),i=e(69383),u=e(97313),h=e(1486),f=h.text,x=h.textposition,v=e(23469).appendArrayPointValue,g=u.TEXTPAD;function y(L){return L.id}function p(L){if(L.ids)return y}function m(L,C){return L<C?1:-1}function w(L,C,O,I){var N;return!C.uniformtext.mode&&c(O)?(I&&(N=I()),L.transition().duration(O.duration).ease(O.easing).each("end",function(){N&&N()}).each("interrupt",function(){N&&N()})):L}function c(L){return L&&L.duration>0}function M(L){return L==="auto"?0:L}function _(L,C){var O=Math.PI/180*C,I=Math.abs(Math.sin(O)),N=Math.abs(Math.cos(O));return{x:L.width*N+L.height*I,y:L.width*I+L.height*N}}function E(L,C,O,I,N,R){var V=!!R.isHorizontal,F=!!R.constrained,D=R.angle||0,U=R.anchor||"end",j=U==="end",J=U==="start",X=((R.leftToRight||0)+1)/2,Z=1-X,Y=N.width,W=N.height,Q=Math.abs(C-L),ne=Math.abs(I-O),re=Q>2*g&&ne>2*g?g:0;Q-=2*re,ne-=2*re;var ie=M(D);D!=="auto"||Y<=Q&&W<=ne||!(Y>Q||W>ne)||(Y>ne||W>Q)&&Y<W==Q<ne||(ie+=90);var se=_(N,ie),ge=1;F&&(ge=Math.min(1,Q/se.x,ne/se.y));var ue=N.left*Z+N.right*X,ce=(N.top+N.bottom)/2,le=(L+g)*Z+(C-g)*X,de=(O+I)/2,Ce=0,xe=0;if(J||j){var _e=(V?se.x:se.y)/2,we=V?m(L,C):m(O,I);V?J?(le=L+we*re,Ce=-we*_e):(le=C-we*re,Ce=we*_e):J?(de=O+we*re,xe=-we*_e):(de=I-we*re,xe=we*_e)}return{textX:ue,textY:ce,targetX:le,targetY:de,anchorX:Ce,anchorY:xe,scale:ge,rotate:ie}}K.exports={plot:function(L,C,O,I,N,R){var V=C.xaxis,F=C.yaxis,D=L._fullLayout,U=L._context.staticPlot;N||(N={mode:D.barmode,norm:D.barmode,gap:D.bargap,groupgap:D.bargroupgap},n("bar",D));var j=l.makeTraceGroups(I,O,"trace bars").each(function(J){var X=S.select(this),Z=J[0].trace,Y=Z.type==="waterfall",W=Z.type==="funnel",Q=Z.type==="bar"||W,ne=0;Y&&Z.connector.visible&&Z.connector.mode==="between"&&(ne=Z.connector.line.width/2);var re=Z.orientation==="h",ie=c(N),se=l.ensureSingle(X,"g","points"),ge=p(Z),ue=se.selectAll("g.point").data(l.identity,ge);ue.enter().append("g").classed("point",!0),ue.exit().remove(),ue.each(function(le,de){var Ce,xe,_e=S.select(this),we=function(ve,Te,ze,He){var Ve=[],nt=[],tt=He?Te:ze,ot=He?ze:Te;return Ve[0]=tt.c2p(ve.s0,!0),nt[0]=ot.c2p(ve.p0,!0),Ve[1]=tt.c2p(ve.s1,!0),nt[1]=ot.c2p(ve.p1,!0),He?[Ve,nt]:[nt,Ve]}(le,V,F,re),Ae=we[0][0],$=we[0][1],oe=we[1][0],pe=we[1][1],ye=(re?$-Ae:pe-oe)==0;if(ye&&Q&&i.getLineWidth(Z,le)&&(ye=!1),ye||(ye=!(k(Ae)&&k($)&&k(oe)&&k(pe))),le.isBlank=ye,ye&&(re?$=Ae:pe=oe),ne&&!ye&&(re?(Ae-=m(Ae,$)*ne,$+=m(Ae,$)*ne):(oe-=m(oe,pe)*ne,pe+=m(oe,pe)*ne)),Z.type==="waterfall"){if(!ye){var ke=Z[le.dir].marker;Ce=ke.line.width,xe=ke.color}}else Ce=i.getLineWidth(Z,le),xe=le.mc||Z.marker.color;function De(ve){var Te=S.round(Ce/2%1,2);return N.gap===0&&N.groupgap===0?S.round(Math.round(ve)-Te,2):ve}if(!L._context.staticPlot){var Pe=b.opacity(xe)<1||Ce>.01?De:function(ve,Te,ze){return ze&&ve===Te?ve:Math.abs(ve-Te)>=2?De(ve):ve>Te?Math.ceil(ve):Math.floor(ve)};Ae=Pe(Ae,$,re),$=Pe($,Ae,re),oe=Pe(oe,pe,!re),pe=Pe(pe,oe,!re)}var Re=w(l.ensureSingle(_e,"path"),D,N,R);if(Re.style("vector-effect",U?"none":"non-scaling-stroke").attr("d",isNaN(($-Ae)*(pe-oe))||ye&&L._context.staticPlot?"M0,0Z":"M"+Ae+","+oe+"V"+pe+"H"+$+"V"+oe+"Z").call(d.setClipUrl,C.layerClipId,L),!D.uniformtext.mode&&ie){var fe=d.makePointStyleFns(Z);d.singlePointStyle(le,Re,Z,fe,L)}(function(ve,Te,ze,He,Ve,nt,tt,ot,pt,Tt,yt){var dt,Pt=Te.xaxis,Et=Te.yaxis,Ot=ve._fullLayout;function Nt(Yt,Kt,pn){return l.ensureSingle(Yt,"text").text(Kt).attr({class:"bartext bartext-"+dt,"text-anchor":"middle","data-notex":1}).call(d.font,pn).call(T.convertToTspans,ve)}var zt=He[0].trace,Ze=zt.orientation==="h",Ye=function(Yt,Kt,pn,nn,xn){var jn,mn=Kt[0].trace;return jn=mn.texttemplate?function(en,vn,on,sn,En){var kn=vn[0].trace,zn=l.castOption(kn,on,"texttemplate");if(!zn)return"";var Fn,Bn,er,Xn,mr=kn.type==="histogram",ur=kn.type==="waterfall",$n=kn.type==="funnel",lr=kn.orientation==="h";function hr(Un){return t(Xn,Xn.c2l(Un),!0).text}lr?(Fn="y",Bn=En,er="x",Xn=sn):(Fn="x",Bn=sn,er="y",Xn=En);var Gt,hn=vn[on],An={};An.label=hn.p,An.labelLabel=An[Fn+"Label"]=(Gt=hn.p,t(Bn,Bn.c2l(Gt),!0).text);var Tn=l.castOption(kn,hn.i,"text");(Tn===0||Tn)&&(An.text=Tn),An.value=hn.s,An.valueLabel=An[er+"Label"]=hr(hn.s);var Rn={};v(Rn,kn,hn.i),(mr||Rn.x===void 0)&&(Rn.x=lr?An.value:An.label),(mr||Rn.y===void 0)&&(Rn.y=lr?An.label:An.value),(mr||Rn.xLabel===void 0)&&(Rn.xLabel=lr?An.valueLabel:An.labelLabel),(mr||Rn.yLabel===void 0)&&(Rn.yLabel=lr?An.labelLabel:An.valueLabel),ur&&(An.delta=+hn.rawS||hn.s,An.deltaLabel=hr(An.delta),An.final=hn.v,An.finalLabel=hr(An.final),An.initial=An.final-An.delta,An.initialLabel=hr(An.initial)),$n&&(An.value=hn.s,An.valueLabel=hr(An.value),An.percentInitial=hn.begR,An.percentInitialLabel=l.formatPercent(hn.begR),An.percentPrevious=hn.difR,An.percentPreviousLabel=l.formatPercent(hn.difR),An.percentTotal=hn.sumR,An.percenTotalLabel=l.formatPercent(hn.sumR));var qn=l.castOption(kn,hn.i,"customdata");return qn&&(An.customdata=qn),l.texttemplateString(zn,An,en._d3locale,Rn,An,kn._meta||{})}(Yt,Kt,pn,nn,xn):mn.textinfo?function(en,vn,on,sn){var En=en[0].trace,kn=En.orientation==="h",zn=En.type==="waterfall",Fn=En.type==="funnel";function Bn(qn){return t(kn?on:sn,+qn,!0).text}var er,Xn,mr=En.textinfo,ur=en[vn],$n=mr.split("+"),lr=[],hr=function(qn){return $n.indexOf(qn)!==-1};if(hr("label")&&lr.push((Xn=en[vn].p,t(kn?sn:on,Xn,!0).text)),hr("text")&&((er=l.castOption(En,ur.i,"text"))===0||er)&&lr.push(er),zn){var Gt=+ur.rawS||ur.s,hn=ur.v,An=hn-Gt;hr("initial")&&lr.push(Bn(An)),hr("delta")&&lr.push(Bn(Gt)),hr("final")&&lr.push(Bn(hn))}if(Fn){hr("value")&&lr.push(Bn(ur.s));var Tn=0;hr("percent initial")&&Tn++,hr("percent previous")&&Tn++,hr("percent total")&&Tn++;var Rn=Tn>1;hr("percent initial")&&(er=l.formatPercent(ur.begR),Rn&&(er+=" of initial"),lr.push(er)),hr("percent previous")&&(er=l.formatPercent(ur.difR),Rn&&(er+=" of previous"),lr.push(er)),hr("percent total")&&(er=l.formatPercent(ur.sumR),Rn&&(er+=" of total"),lr.push(er))}return lr.join("<br>")}(Kt,pn,nn,xn):i.getValue(mn.text,pn),i.coerceString(f,jn)}(Ot,He,Ve,Pt,Et);dt=function(Yt,Kt){var pn=i.getValue(Yt.textposition,Kt);return i.coerceEnumerated(x,pn)}(zt,Ve);var je=Tt.mode==="stack"||Tt.mode==="relative",Ke=He[Ve],st=!je||Ke._outmost;if(Ye&&dt!=="none"&&(!Ke.isBlank&&nt!==tt&&ot!==pt||dt!=="auto"&&dt!=="inside")){var Se=Ot.font,Ie=a.getBarColor(He[Ve],zt),We=a.getInsideTextFont(zt,Ve,Se,Ie),it=a.getOutsideTextFont(zt,Ve,Se),lt=ze.datum();Ze?Pt.type==="log"&&lt.s0<=0&&(nt=Pt.range[0]<Pt.range[1]?0:Pt._length):Et.type==="log"&&lt.s0<=0&&(ot=Et.range[0]<Et.range[1]?Et._length:0);var gt,At,kt,ht,St,vt=Math.abs(tt-nt)-2*g,Mt=Math.abs(pt-ot)-2*g;if(dt==="outside"&&(st||Ke.hasB||(dt="inside")),dt==="auto"&&(st?(dt="inside",gt=Nt(ze,Ye,St=l.ensureUniformFontSize(ve,We)),kt=(At=d.bBox(gt.node())).width,ht=At.height,kt>0&&ht>0&&(kt<=vt&&ht<=Mt||kt<=Mt&&ht<=vt||(Ze?vt>=kt*(Mt/ht):Mt>=ht*(vt/kt)))?dt="inside":(dt="outside",gt.remove(),gt=null)):dt="inside"),!gt){var It=(gt=Nt(ze,Ye,St=l.ensureUniformFontSize(ve,dt==="outside"?it:We))).attr("transform");if(gt.attr("transform",""),kt=(At=d.bBox(gt.node())).width,ht=At.height,gt.attr("transform",It),kt<=0||ht<=0)return void gt.remove()}var Ut,jt=zt.textangle;Ut=dt==="outside"?function(Yt,Kt,pn,nn,xn,jn){var mn,en=!!jn.isHorizontal,vn=!!jn.constrained,on=jn.angle||0,sn=xn.width,En=xn.height,kn=Math.abs(Kt-Yt),zn=Math.abs(nn-pn);mn=en?zn>2*g?g:0:kn>2*g?g:0;var Fn=1;vn&&(Fn=en?Math.min(1,zn/En):Math.min(1,kn/sn));var Bn=M(on),er=_(xn,Bn),Xn=(en?er.x:er.y)/2,mr=(xn.left+xn.right)/2,ur=(xn.top+xn.bottom)/2,$n=(Yt+Kt)/2,lr=(pn+nn)/2,hr=0,Gt=0,hn=en?m(Kt,Yt):m(pn,nn);return en?($n=Kt-hn*mn,hr=hn*Xn):(lr=nn+hn*mn,Gt=-hn*Xn),{textX:mr,textY:ur,targetX:$n,targetY:lr,anchorX:hr,anchorY:Gt,scale:Fn,rotate:Bn}}(nt,tt,ot,pt,At,{isHorizontal:Ze,constrained:zt.constraintext==="both"||zt.constraintext==="outside",angle:jt}):E(nt,tt,ot,pt,At,{isHorizontal:Ze,constrained:zt.constraintext==="both"||zt.constraintext==="inside",angle:jt,anchor:zt.insidetextanchor}),Ut.fontSize=St.size,r(zt.type==="histogram"?"bar":zt.type,Ut,Ot),Ke.transform=Ut;var qt=w(gt,Ot,Tt,yt);l.setTransormAndDisplay(qt,Ut)}else ze.select("text").remove()})(L,C,_e,J,de,Ae,$,oe,pe,N,R),C.layerClipId&&d.hideOutsideRangePoint(le,_e.select("text"),V,F,Z.xcalendar,Z.ycalendar)});var ce=Z.cliponaxis===!1;d.setClipUrl(X,ce?null:C.layerClipId,L)});s.getComponentMethod("errorbars","plot")(L,j,C,N)},toMoveInsideBar:E}},81974:function(K){function z(e,S,k,l,T){var b=S.c2p(l?e.s0:e.p0,!0),d=S.c2p(l?e.s1:e.p1,!0),s=k.c2p(l?e.p0:e.s0,!0),t=k.c2p(l?e.p1:e.s1,!0);return T?[(b+d)/2,(s+t)/2]:l?[d,(s+t)/2]:[(b+d)/2,t]}K.exports=function(e,S){var k,l=e.cd,T=e.xaxis,b=e.yaxis,d=l[0].trace,s=d.type==="funnel",t=d.orientation==="h",o=[];if(S===!1)for(k=0;k<l.length;k++)l[k].selected=0;else for(k=0;k<l.length;k++){var r=l[k],n="ct"in r?r.ct:z(r,T,b,t,s);S.contains(n,!1,k,e)?(o.push({pointNumber:k,x:T.c2d(r.x),y:b.c2d(r.y)}),r.selected=1):r.selected=0}return o}},61546:function(K,z,e){K.exports=k;var S=e(71828).distinctVals;function k(l,T){this.traces=l,this.sepNegVal=T.sepNegVal,this.overlapNoMerge=T.overlapNoMerge;for(var b=1/0,d=T.posAxis._id.charAt(0),s=[],t=0;t<l.length;t++){for(var o=l[t],r=0;r<o.length;r++){var n=o[r],a=n.p;a===void 0&&(a=n[d]),a!==void 0&&s.push(a)}o[0]&&o[0].width1&&(b=Math.min(o[0].width1,b))}this.positions=s;var i=S(s);this.distinctPositions=i.vals,i.vals.length===1&&b!==1/0?this.minDiff=b:this.minDiff=Math.min(i.minDiff,b);var u=(T.posAxis||{}).type;u!=="category"&&u!=="multicategory"||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}k.prototype.put=function(l,T){var b=this.getLabel(l,T),d=this.bins[b]||0;return this.bins[b]=d+T,d},k.prototype.get=function(l,T){var b=this.getLabel(l,T);return this.bins[b]||0},k.prototype.getLabel=function(l,T){return(T<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?l:Math.round(l/this.binWidth))}},16688:function(K,z,e){var S=e(39898),k=e(7901),l=e(91424),T=e(71828),b=e(73972),d=e(72597).resizeText,s=e(1486),t=s.textfont,o=s.insidetextfont,r=s.outsidetextfont,n=e(69383);function a(y,p,m){l.pointStyle(y.selectAll("path"),p,m),i(y,p,m)}function i(y,p,m){y.selectAll("text").each(function(w){var c=S.select(this),M=T.ensureUniformFontSize(m,u(c,w,p,m));l.font(c,M)})}function u(y,p,m,w){var c=w._fullLayout.font,M=m.textfont;if(y.classed("bartext-inside")){var _=g(p,m);M=f(m,p.i,c,_)}else y.classed("bartext-outside")&&(M=x(m,p.i,c));return M}function h(y,p,m){return v(t,y.textfont,p,m)}function f(y,p,m,w){var c=h(y,p,m);return(y._input.textfont===void 0||y._input.textfont.color===void 0||Array.isArray(y.textfont.color)&&y.textfont.color[p]===void 0)&&(c={color:k.contrast(w),family:c.family,size:c.size}),v(o,y.insidetextfont,p,c)}function x(y,p,m){var w=h(y,p,m);return v(r,y.outsidetextfont,p,w)}function v(y,p,m,w){p=p||{};var c=n.getValue(p.family,m),M=n.getValue(p.size,m),_=n.getValue(p.color,m);return{family:n.coerceString(y.family,c,w.family),size:n.coerceNumber(y.size,M,w.size),color:n.coerceColor(y.color,_,w.color)}}function g(y,p){return p.type==="waterfall"?p[y.dir].marker.color:y.mcc||y.mc||p.marker.color}K.exports={style:function(y){var p=S.select(y).selectAll("g.barlayer").selectAll("g.trace");d(y,p,"bar");var m=p.size(),w=y._fullLayout;p.style("opacity",function(c){return c[0].trace.opacity}).each(function(c){(w.barmode==="stack"&&m>1||w.bargap===0&&w.bargroupgap===0&&!c[0].trace.marker.line.width)&&S.select(this).attr("shape-rendering","crispEdges")}),p.selectAll("g.points").each(function(c){a(S.select(this),c[0].trace,y)}),b.getComponentMethod("errorbars","style")(p)},styleTextPoints:i,styleOnSelect:function(y,p,m){var w=p[0].trace;w.selectedpoints?function(c,M,_){l.selectedPointStyle(c.selectAll("path"),M),function(E,L,C){E.each(function(O){var I,N=S.select(this);if(O.selected){I=T.ensureUniformFontSize(C,u(N,O,L,C));var R=L.selected.textfont&&L.selected.textfont.color;R&&(I.color=R),l.font(N,I)}else l.selectedTextStyle(N,L)})}(c.selectAll("text"),M,_)}(m,w,y):(a(m,w,y),b.getComponentMethod("errorbars","style")(m))},getInsideTextFont:f,getOutsideTextFont:x,getBarColor:g,resizeText:d}},98340:function(K,z,e){var S=e(7901),k=e(52075).hasColorscale,l=e(1586),T=e(71828).coercePattern;K.exports=function(b,d,s,t,o){var r=s("marker.color",t),n=k(b,"marker");n&&l(b,d,o,s,{prefix:"marker.",cLetter:"c"}),s("marker.line.color",S.defaultLine),k(b,"marker.line")&&l(b,d,o,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width"),s("marker.opacity"),T(s,"marker.pattern",r,n),s("selected.marker.color"),s("unselected.marker.color")}},72597:function(K,z,e){var S=e(39898),k=e(71828);function l(T){return"_"+T+"Text_minsize"}K.exports={recordMinTextSize:function(T,b,d){if(d.uniformtext.mode){var s=l(T),t=d.uniformtext.minsize,o=b.scale*b.fontSize;b.hide=o<t,d[s]=d[s]||1/0,b.hide||(d[s]=Math.min(d[s],Math.max(o,t)))}},clearMinTextSize:function(T,b){b[l(T)]=void 0},resizeText:function(T,b,d){var s=T._fullLayout,t=s["_"+d+"Text_minsize"];if(t){var o,r=s.uniformtext.mode==="hide";switch(d){case"funnelarea":case"pie":case"sunburst":o="g.slice";break;case"treemap":case"icicle":o="g.slice, g.pathbar";break;default:o="g.points > g.point"}b.selectAll(o).each(function(n){var a=n.transform;if(a){a.scale=r&&a.hide?0:t/a.fontSize;var i=S.select(this).select("text");k.setTransormAndDisplay(i,a)}})}}}},55023:function(K,z,e){var S=e(5386).fF,k=e(1426).extendFlat,l=e(81245),T=e(1486);K.exports={r:l.r,theta:l.theta,r0:l.r0,dr:l.dr,theta0:l.theta0,dtheta:l.dtheta,thetaunit:l.thetaunit,base:k({},T.base,{}),offset:k({},T.offset,{}),width:k({},T.width,{}),text:k({},T.text,{}),hovertext:k({},T.hovertext,{}),marker:T.marker,hoverinfo:l.hoverinfo,hovertemplate:S(),selected:T.selected,unselected:T.unselected}},74692:function(K,z,e){var S=e(52075).hasColorscale,k=e(78803),l=e(75341),T=e(11661).setGroupPositions,b=e(66279),d=e(73972).traceIs,s=e(71828).extendFlat;K.exports={calc:function(t,o){for(var r=t._fullLayout,n=o.subplot,a=r[n].radialaxis,i=r[n].angularaxis,u=a.makeCalcdata(o,"r"),h=i.makeCalcdata(o,"theta"),f=o._length,x=new Array(f),v=u,g=h,y=0;y<f;y++)x[y]={p:g[y],s:v[y]};function p(m){var w=o[m];w!==void 0&&(o["_"+m]=Array.isArray(w)?i.makeCalcdata(o,m):i.d2c(w,o.thetaunit))}return i.type==="linear"&&(p("width"),p("offset")),S(o,"marker")&&k(t,o,{vals:o.marker.color,containerStr:"marker",cLetter:"c"}),S(o,"marker.line")&&k(t,o,{vals:o.marker.line.color,containerStr:"marker.line",cLetter:"c"}),l(x,o),b(x,o),x},crossTraceCalc:function(t,o,r){for(var n=t.calcdata,a=[],i=0;i<n.length;i++){var u=n[i],h=u[0].trace;h.visible===!0&&d(h,"bar")&&h.subplot===r&&a.push(u)}var f=s({},o.radialaxis,{_id:"x"}),x=o.angularaxis;T(t,x,f,a,{mode:o.barmode,norm:o.barnorm,gap:o.bargap,groupgap:o.bargroupgap})}}},6135:function(K,z,e){var S=e(71828),k=e(22184).handleRThetaDefaults,l=e(98340),T=e(55023);K.exports=function(b,d,s,t){function o(r,n){return S.coerce(b,d,T,r,n)}k(b,d,t,o)?(o("thetaunit"),o("base"),o("offset"),o("width"),o("text"),o("hovertext"),o("hovertemplate"),l(b,d,o,s,t),S.coerceSelectionMarkerOpacity(d,o)):d.visible=!1}},27379:function(K,z,e){var S=e(30211),k=e(71828),l=e(95423).getTraceColor,T=k.fillText,b=e(59150).makeHoverPointText,d=e(10869).isPtInsidePolygon;K.exports=function(s,t,o){var r=s.cd,n=r[0].trace,a=s.subplot,i=a.radialAxis,u=a.angularAxis,h=a.vangles,f=h?d:k.isPtInsideSector,x=s.maxHoverDistance,v=u._period||2*Math.PI,g=Math.abs(i.g2p(Math.sqrt(t*t+o*o))),y=Math.atan2(o,t);if(i.range[0]>i.range[1]&&(y+=Math.PI),S.getClosest(r,function(w){return f(g,y,[w.rp0,w.rp1],[w.thetag0,w.thetag1],h)?x+Math.min(1,Math.abs(w.thetag1-w.thetag0)/v)-1+(w.rp1-g)/(w.rp1-w.rp0)-1:1/0},s),s.index!==!1){var p=r[s.index];s.x0=s.x1=p.ct[0],s.y0=s.y1=p.ct[1];var m=k.extendFlat({},p,{r:p.s,theta:p.p});return T(p,n,s),b(m,n,a,s),s.hovertemplate=n.hovertemplate,s.color=l(n,p),s.xLabelVal=s.yLabelVal=void 0,p.s<0&&(s.idealAlign="left"),[s]}}},23381:function(K,z,e){K.exports={moduleType:"trace",name:"barpolar",basePlotModule:e(23580),categories:["polar","bar","showLegend"],attributes:e(55023),layoutAttributes:e(40151),supplyDefaults:e(6135),supplyLayoutDefaults:e(19860),calc:e(74692).calc,crossTraceCalc:e(74692).crossTraceCalc,plot:e(60173),colorbar:e(4898),formatLabels:e(98608),style:e(16688).style,styleOnSelect:e(16688).styleOnSelect,hoverPoints:e(27379),selectPoints:e(81974),meta:{}}},40151:function(K){K.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},19860:function(K,z,e){var S=e(71828),k=e(40151);K.exports=function(l,T,b){var d,s={};function t(n,a){return S.coerce(l[d]||{},T[d],k,n,a)}for(var o=0;o<b.length;o++){var r=b[o];r.type==="barpolar"&&r.visible===!0&&(s[d=r.subplot]||(t("barmode"),t("bargap"),s[d]=1))}}},60173:function(K,z,e){var S=e(39898),k=e(92770),l=e(71828),T=e(91424),b=e(10869);K.exports=function(d,s,t){var o=d._context.staticPlot,r=s.xaxis,n=s.yaxis,a=s.radialAxis,i=s.angularAxis,u=function(f){var x=f.cxx,v=f.cyy;return f.vangles?function(g,y,p,m){var w,c;l.angleDelta(p,m)>0?(w=p,c=m):(w=m,c=p);var M=[b.findEnclosingVertexAngles(w,f.vangles)[0],(w+c)/2,b.findEnclosingVertexAngles(c,f.vangles)[1]];return b.pathPolygonAnnulus(g,y,w,c,M,x,v)}:function(g,y,p,m){return l.pathAnnulus(g,y,p,m,x,v)}}(s),h=s.layers.frontplot.select("g.barlayer");l.makeTraceGroups(h,t,"trace bars").each(function(){var f=S.select(this),x=l.ensureSingle(f,"g","points").selectAll("g.point").data(l.identity);x.enter().append("g").style("vector-effect",o?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),x.exit().remove(),x.each(function(v){var g,y=S.select(this),p=v.rp0=a.c2p(v.s0),m=v.rp1=a.c2p(v.s1),w=v.thetag0=i.c2g(v.p0),c=v.thetag1=i.c2g(v.p1);if(k(p)&&k(m)&&k(w)&&k(c)&&p!==m&&w!==c){var M=a.c2g(v.s1),_=(w+c)/2;v.ct=[r.c2p(M*Math.cos(_)),n.c2p(M*Math.sin(_))],g=u(p,m,w,c)}else g="M0,0Z";l.ensureSingle(y,"path").attr("d",g)}),T.setClipUrl(f,s._hasClipOnAxisFalse?s.clipIds.forTraces:null,d)})}},53522:function(K,z,e){var S=e(82196),k=e(1486),l=e(22399),T=e(12663).axisHoverFormat,b=e(5386).fF,d=e(1426).extendFlat,s=S.marker,t=s.line;K.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:S.xperiod,yperiod:S.yperiod,xperiod0:S.xperiod0,yperiod0:S.yperiod0,xperiodalignment:S.xperiodalignment,yperiodalignment:S.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:d({},s.symbol,{arrayOk:!1,editType:"plot"}),opacity:d({},s.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:d({},s.angle,{arrayOk:!1,editType:"calc"}),size:d({},s.size,{arrayOk:!1,editType:"calc"}),color:d({},s.color,{arrayOk:!1,editType:"style"}),line:{color:d({},t.color,{arrayOk:!1,dflt:l.defaultLine,editType:"style"}),width:d({},t.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:S.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup,selected:{marker:S.selected.marker,editType:"style"},unselected:{marker:S.unselected.marker,editType:"style"},text:d({},S.text,{}),hovertext:d({},S.hovertext,{}),hovertemplate:b({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},48518:function(K,z,e){var S=e(92770),k=e(89298),l=e(42973),T=e(71828),b=e(50606).BADNUM,d=T._;K.exports=function(f,x){var v,g,y,p,m,w,c,M=f._fullLayout,_=k.getFromId(f,x.xaxis||"x"),E=k.getFromId(f,x.yaxis||"y"),L=[],C=x.type==="violin"?"_numViolins":"_numBoxes";x.orientation==="h"?(y=_,p="x",m=E,w="y",c=!!x.yperiodalignment):(y=E,p="y",m=_,w="x",c=!!x.xperiodalignment);var O,I,N,R,V,F,D=function(Te,ze,He,Ve){var nt,tt=ze+"0"in Te;if(ze in Te||tt&&"d"+ze in Te){var ot=He.makeCalcdata(Te,ze);return[l(Te,He,ze,ot).vals,ot]}nt=tt?Te[ze+"0"]:"name"in Te&&(He.type==="category"||S(Te.name)&&["linear","log"].indexOf(He.type)!==-1||T.isDateTime(Te.name)&&He.type==="date")?Te.name:Ve;for(var pt=He.type==="multicategory"?He.r2c_just_indices(nt):He.d2c(nt,0,Te[ze+"calendar"]),Tt=Te._length,yt=new Array(Tt),dt=0;dt<Tt;dt++)yt[dt]=pt;return[yt]}(x,w,m,M[C]),U=D[0],j=D[1],J=T.distinctVals(U,m),X=J.vals,Z=J.minDiff/2,Y=(x.boxpoints||x.points)==="all"?T.identity:function(Te){return Te.v<O.lf||Te.v>O.uf};if(x._hasPreCompStats){var W=x[p],Q=function(Te){return y.d2c((x[Te]||[])[v])},ne=1/0,re=-1/0;for(v=0;v<x._length;v++){var ie=U[v];if(S(ie)){if((O={}).pos=O[w]=ie,c&&j&&(O.orig_p=j[v]),O.q1=Q("q1"),O.med=Q("median"),O.q3=Q("q3"),I=[],W&&T.isArrayOrTypedArray(W[v]))for(g=0;g<W[v].length;g++)(F=y.d2c(W[v][g]))!==b&&(t(V={v:F,i:[v,g]},x,[v,g]),I.push(V));if(O.pts=I.sort(o),R=(N=O[p]=I.map(r)).length,O.med!==b&&O.q1!==b&&O.q3!==b&&O.med>=O.q1&&O.q3>=O.med){var se=Q("lowerfence");O.lf=se!==b&&se<=O.q1?se:n(O,N,R);var ge=Q("upperfence");O.uf=ge!==b&&ge>=O.q3?ge:a(O,N,R);var ue=Q("mean");O.mean=ue!==b?ue:R?T.mean(N,R):(O.q1+O.q3)/2;var ce=Q("sd");O.sd=ue!==b&&ce>=0?ce:R?T.stdev(N,R,O.mean):O.q3-O.q1,O.lo=i(O),O.uo=u(O);var le=Q("notchspan");le=le!==b&&le>0?le:h(O,R),O.ln=O.med-le,O.un=O.med+le;var de=O.lf,Ce=O.uf;x.boxpoints&&N.length&&(de=Math.min(de,N[0]),Ce=Math.max(Ce,N[R-1])),x.notched&&(de=Math.min(de,O.ln),Ce=Math.max(Ce,O.un)),O.min=de,O.max=Ce}else{var xe;T.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+O.q1,"median = "+O.med,"q3 = "+O.q3].join(`
`)),xe=O.med!==b?O.med:O.q1!==b?O.q3!==b?(O.q1+O.q3)/2:O.q1:O.q3!==b?O.q3:0,O.med=xe,O.q1=O.q3=xe,O.lf=O.uf=xe,O.mean=O.sd=xe,O.ln=O.un=xe,O.min=O.max=xe}ne=Math.min(ne,O.min),re=Math.max(re,O.max),O.pts2=I.filter(Y),L.push(O)}}x._extremes[y._id]=k.findExtremes(y,[ne,re],{padded:!0})}else{var _e=y.makeCalcdata(x,p),we=function(Te,ze){for(var He=Te.length,Ve=new Array(He+1),nt=0;nt<He;nt++)Ve[nt]=Te[nt]-ze;return Ve[He]=Te[He-1]+ze,Ve}(X,Z),Ae=X.length,$=function(Te){for(var ze=new Array(Te),He=0;He<Te;He++)ze[He]=[];return ze}(Ae);for(v=0;v<x._length;v++)if(F=_e[v],S(F)){var oe=T.findBin(U[v],we);oe>=0&&oe<Ae&&(t(V={v:F,i:v},x,v),$[oe].push(V))}var pe=1/0,ye=-1/0,ke=x.quartilemethod,De=ke==="exclusive",Pe=ke==="inclusive";for(v=0;v<Ae;v++)if($[v].length>0){var Re,fe;(O={}).pos=O[w]=X[v],I=O.pts=$[v].sort(o),R=(N=O[p]=I.map(r)).length,O.min=N[0],O.max=N[R-1],O.mean=T.mean(N,R),O.sd=T.stdev(N,R,O.mean),O.med=T.interp(N,.5),R%2&&(De||Pe)?(De?(Re=N.slice(0,R/2),fe=N.slice(R/2+1)):Pe&&(Re=N.slice(0,R/2+1),fe=N.slice(R/2)),O.q1=T.interp(Re,.5),O.q3=T.interp(fe,.5)):(O.q1=T.interp(N,.25),O.q3=T.interp(N,.75)),O.lf=n(O,N,R),O.uf=a(O,N,R),O.lo=i(O),O.uo=u(O);var ve=h(O,R);O.ln=O.med-ve,O.un=O.med+ve,pe=Math.min(pe,O.ln),ye=Math.max(ye,O.un),O.pts2=I.filter(Y),L.push(O)}x._extremes[y._id]=k.findExtremes(y,x.notched?_e.concat([pe,ye]):_e,{padded:!0})}return function(Te,ze){if(T.isArrayOrTypedArray(ze.selectedpoints))for(var He=0;He<Te.length;He++){for(var Ve=Te[He].pts||[],nt={},tt=0;tt<Ve.length;tt++)nt[Ve[tt].i]=tt;T.tagSelected(Ve,ze,nt)}}(L,x),L.length>0?(L[0].t={num:M[C],dPos:Z,posLetter:w,valLetter:p,labels:{med:d(f,"median:"),min:d(f,"min:"),q1:d(f,"q1:"),q3:d(f,"q3:"),max:d(f,"max:"),mean:x.boxmean==="sd"?d(f,"mean ± σ:"):d(f,"mean:"),lf:d(f,"lower fence:"),uf:d(f,"upper fence:")}},M[C]++,L):[{t:{empty:!0}}]};var s={text:"tx",hovertext:"htx"};function t(f,x,v){for(var g in s)T.isArrayOrTypedArray(x[g])&&(Array.isArray(v)?T.isArrayOrTypedArray(x[g][v[0]])&&(f[s[g]]=x[g][v[0]][v[1]]):f[s[g]]=x[g][v])}function o(f,x){return f.v-x.v}function r(f){return f.v}function n(f,x,v){return v===0?f.q1:Math.min(f.q1,x[Math.min(T.findBin(2.5*f.q1-1.5*f.q3,x,!0)+1,v-1)])}function a(f,x,v){return v===0?f.q3:Math.max(f.q3,x[Math.max(T.findBin(2.5*f.q3-1.5*f.q1,x),0)])}function i(f){return 4*f.q1-3*f.q3}function u(f){return 4*f.q3-3*f.q1}function h(f,x){return x===0?0:1.57*(f.q3-f.q1)/Math.sqrt(x)}},37188:function(K,z,e){var S=e(89298),k=e(71828),l=e(99082).getAxisGroup,T=["v","h"];function b(d,s,t,o){var r,n,a,i=s.calcdata,u=s._fullLayout,h=o._id,f=h.charAt(0),x=[],v=0;for(r=0;r<t.length;r++)for(a=i[t[r]],n=0;n<a.length;n++)x.push(o.c2l(a[n].pos,!0)),v+=(a[n].pts2||[]).length;if(x.length){var g=k.distinctVals(x);o.type!=="category"&&o.type!=="multicategory"||(g.minDiff=1);var y=g.minDiff/2;S.minDtick(o,g.minDiff,g.vals[0],!0);var p=u[d==="violin"?"_numViolins":"_numBoxes"],m=u[d+"mode"]==="group"&&p>1,w=1-u[d+"gap"],c=1-u[d+"groupgap"];for(r=0;r<t.length;r++){var M,_,E,L,C,O,I=(a=i[t[r]])[0].trace,N=a[0].t,R=I.width,V=I.side;if(R)M=_=L=R/2,E=0;else if(M=y,m){var F=l(u,o._id)+I.orientation,D=(u._alignmentOpts[F]||{})[I.alignmentgroup]||{},U=Object.keys(D.offsetGroups||{}).length,j=U||p;_=M*w*c/j,E=2*M*(((U?I._offsetIndex:N.num)+.5)/j-.5)*w,L=M*w/j}else _=M*w*c,E=0,L=M;N.dPos=M,N.bPos=E,N.bdPos=_,N.wHover=L;var J,X,Z,Y,W,Q,ne=E+_,re=!!R;if(V==="positive"?(C=M*(R?1:.5),J=ne,O=J=E):V==="negative"?(C=J=E,O=M*(R?1:.5),X=ne):(C=O=M,J=X=ne),(I.boxpoints||I.points)&&v>0){var ie=I.pointpos,se=I.jitter,ge=I.marker.size/2,ue=0;ie+se>=0&&((ue=ne*(ie+se))>C?(re=!0,W=ge,Z=ue):ue>J&&(W=ge,Z=C)),ue<=C&&(Z=C);var ce=0;ie-se<=0&&((ce=-ne*(ie-se))>O?(re=!0,Q=ge,Y=ce):ce>X&&(Q=ge,Y=O)),ce<=O&&(Y=O)}else Z=C,Y=O;var le=new Array(a.length);for(n=0;n<a.length;n++)le[n]=a[n].pos;I._extremes[h]=S.findExtremes(o,le,{padded:re,vpadminus:Y,vpadplus:Z,vpadLinearized:!0,ppadminus:{x:Q,y:W}[f],ppadplus:{x:W,y:Q}[f]})}}}K.exports={crossTraceCalc:function(d,s){for(var t=d.calcdata,o=s.xaxis,r=s.yaxis,n=0;n<T.length;n++){for(var a=T[n],i=a==="h"?r:o,u=[],h=0;h<t.length;h++){var f=t[h],x=f[0].t,v=f[0].trace;v.visible!==!0||v.type!=="box"&&v.type!=="candlestick"||x.empty||(v.orientation||"v")!==a||v.xaxis!==o._id||v.yaxis!==r._id||u.push(h)}b("box",d,u,i)}},setPositionOffset:b}},36411:function(K,z,e){var S=e(71828),k=e(73972),l=e(7901),T=e(73927),b=e(26125),d=e(4322),s=e(53522);function t(r,n,a,i){function u(V){var F=0;return V&&V.length&&(F+=1,S.isArrayOrTypedArray(V[0])&&V[0].length&&(F+=1)),F}function h(V){return S.validate(r[V],s[V])}var f,x=a("y"),v=a("x");if(n.type==="box"){var g=a("q1"),y=a("median"),p=a("q3");n._hasPreCompStats=g&&g.length&&y&&y.length&&p&&p.length,f=Math.min(S.minRowLength(g),S.minRowLength(y),S.minRowLength(p))}var m,w,c=u(x),M=u(v),_=c&&S.minRowLength(x),E=M&&S.minRowLength(v),L=i.calendar,C={autotypenumbers:i.autotypenumbers};if(n._hasPreCompStats)switch(String(M)+String(c)){case"00":var O=h("x0")||h("dx");m=!h("y0")&&!h("dy")||O?"v":"h",w=f;break;case"10":m="v",w=Math.min(f,E);break;case"20":m="h",w=Math.min(f,v.length);break;case"01":m="h",w=Math.min(f,_);break;case"02":m="v",w=Math.min(f,x.length);break;case"12":m="v",w=Math.min(f,E,x.length);break;case"21":m="h",w=Math.min(f,v.length,_);break;case"11":w=0;break;case"22":var I,N=!1;for(I=0;I<v.length;I++)if(d(v[I],L,C)==="category"){N=!0;break}if(N)m="v",w=Math.min(f,E,x.length);else{for(I=0;I<x.length;I++)if(d(x[I],L,C)==="category"){N=!0;break}N?(m="h",w=Math.min(f,v.length,_)):(m="v",w=Math.min(f,E,x.length))}}else c>0?(m="v",w=M>0?Math.min(E,_):Math.min(_)):M>0?(m="h",w=Math.min(E)):w=0;if(w){n._length=w;var R=a("orientation",m);n._hasPreCompStats?R==="v"&&M===0?(a("x0",0),a("dx",1)):R==="h"&&c===0&&(a("y0",0),a("dy",1)):R==="v"&&M===0?a("x0"):R==="h"&&c===0&&a("y0"),k.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y"],i)}else n.visible=!1}function o(r,n,a,i){var u=i.prefix,h=S.coerce2(r,n,s,"marker.outliercolor"),f=a("marker.line.outliercolor"),x="outliers";n._hasPreCompStats?x="all":(h||f)&&(x="suspectedoutliers");var v=a(u+"points",x);v?(a("jitter",v==="all"?.3:0),a("pointpos",v==="all"?-1.5:0),a("marker.symbol"),a("marker.opacity"),a("marker.size"),a("marker.angle"),a("marker.color",n.line.color),a("marker.line.color"),a("marker.line.width"),v==="suspectedoutliers"&&(a("marker.line.outliercolor",n.marker.color),a("marker.line.outlierwidth")),a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size"),a("text"),a("hovertext")):delete n.marker;var g=a("hoveron");g!=="all"&&g.indexOf("points")===-1||a("hovertemplate"),S.coerceSelectionMarkerOpacity(n,a)}K.exports={supplyDefaults:function(r,n,a,i){function u(p,m){return S.coerce(r,n,s,p,m)}if(t(r,n,u,i),n.visible!==!1){T(r,n,i,u),u("xhoverformat"),u("yhoverformat");var h=n._hasPreCompStats;h&&(u("lowerfence"),u("upperfence")),u("line.color",(r.marker||{}).color||a),u("line.width"),u("fillcolor",l.addOpacity(n.line.color,.5));var f=!1;if(h){var x=u("mean"),v=u("sd");x&&x.length&&(f=!0,v&&v.length&&(f="sd"))}u("boxmean",f),u("whiskerwidth"),u("width"),u("quartilemethod");var g=!1;if(h){var y=u("notchspan");y&&y.length&&(g=!0)}else S.validate(r.notchwidth,s.notchwidth)&&(g=!0);u("notched",g)&&u("notchwidth"),o(r,n,u,{prefix:"box"})}},crossTraceDefaults:function(r,n){var a,i;function u(x){return S.coerce(i._input,i,s,x)}for(var h=0;h<r.length;h++){var f=(i=r[h]).type;f!=="box"&&f!=="violin"||(a=i._input,n[f+"mode"]==="group"&&b(a,i,n,u))}},handleSampleDefaults:t,handlePointsDefaults:o}},74907:function(K){K.exports=function(z,e){return e.hoverOnBox&&(z.hoverOnBox=e.hoverOnBox),"xVal"in e&&(z.x=e.xVal),"yVal"in e&&(z.y=e.yVal),e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),z}},41868:function(K,z,e){var S=e(89298),k=e(71828),l=e(30211),T=e(7901),b=k.fillText;function d(t,o,r,n){var a,i,u,h,f,x,v,g,y,p,m,w,c,M,_=t.cd,E=t.xa,L=t.ya,C=_[0].trace,O=_[0].t,I=C.type==="violin",N=O.bdPos,R=O.wHover,V=function(xe){return u.c2l(xe.pos)+O.bPos-u.c2l(x)};I&&C.side!=="both"?(C.side==="positive"&&(y=function(xe){var _e=V(xe);return l.inbox(_e,_e+R,p)},w=N,c=0),C.side==="negative"&&(y=function(xe){var _e=V(xe);return l.inbox(_e-R,_e,p)},w=0,c=N)):(y=function(xe){var _e=V(xe);return l.inbox(_e-R,_e+R,p)},w=c=N),M=I?function(xe){return l.inbox(xe.span[0]-f,xe.span[1]-f,p)}:function(xe){return l.inbox(xe.min-f,xe.max-f,p)},C.orientation==="h"?(f=o,x=r,v=M,g=y,a="y",u=L,i="x",h=E):(f=r,x=o,v=y,g=M,a="x",u=E,i="y",h=L);var F=Math.min(1,N/Math.abs(u.r2c(u.range[1])-u.r2c(u.range[0])));function D(xe){return(v(xe)+g(xe))/2}p=t.maxHoverDistance-F,m=t.maxSpikeDistance-F;var U=l.getDistanceFunction(n,v,g,D);if(l.getClosest(_,U,t),t.index===!1)return[];var j=_[t.index],J=C.line.color,X=(C.marker||{}).color;T.opacity(J)&&C.line.width?t.color=J:T.opacity(X)&&C.boxpoints?t.color=X:t.color=C.fillcolor,t[a+"0"]=u.c2p(j.pos+O.bPos-c,!0),t[a+"1"]=u.c2p(j.pos+O.bPos+w,!0),t[a+"LabelVal"]=j.orig_p!==void 0?j.orig_p:j.pos;var Z=a+"Spike";t.spikeDistance=D(j)*m/p,t[Z]=u.c2p(j.pos,!0);var Y=C.boxmean||(C.meanline||{}).visible,W=C.boxpoints||C.points,Q=W&&Y?["max","uf","q3","med","mean","q1","lf","min"]:W&&!Y?["max","uf","q3","med","q1","lf","min"]:!W&&Y?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],ne=h.range[1]<h.range[0];C.orientation===(ne?"v":"h")&&Q.reverse();for(var re=t.spikeDistance,ie=t[Z],se=[],ge=0;ge<Q.length;ge++){var ue=Q[ge];if(ue in j){var ce=j[ue],le=h.c2p(ce,!0),de=k.extendFlat({},t);de.attr=ue,de[i+"0"]=de[i+"1"]=le,de[i+"LabelVal"]=ce,de[i+"Label"]=(O.labels?O.labels[ue]+" ":"")+S.hoverLabelText(h,ce,C[i+"hoverformat"]),de.hoverOnBox=!0,ue==="mean"&&"sd"in j&&C.boxmean==="sd"&&(de[i+"err"]=j.sd),de.hovertemplate=!1,se.push(de)}}t.name="",t.spikeDistance=void 0,t[Z]=void 0;for(var Ce=0;Ce<se.length;Ce++)se[Ce].attr!=="med"?(se[Ce].name="",se[Ce].spikeDistance=void 0,se[Ce][Z]=void 0):(se[Ce].spikeDistance=re,se[Ce][Z]=ie);return se}function s(t,o,r){for(var n,a,i,u=t.cd,h=t.xa,f=t.ya,x=u[0].trace,v=h.c2p(o),g=f.c2p(r),y=l.quadrature(function(I){var N=Math.max(3,I.mrc||0);return Math.max(Math.abs(h.c2p(I.x)-v)-N,1-3/N)},function(I){var N=Math.max(3,I.mrc||0);return Math.max(Math.abs(f.c2p(I.y)-g)-N,1-3/N)}),p=!1,m=0;m<u.length;m++){a=u[m];for(var w=0;w<(a.pts||[]).length;w++){var c=y(i=a.pts[w]);c<=t.distance&&(t.distance=c,p=[m,w])}}if(!p)return!1;i=(a=u[p[0]]).pts[p[1]];var M=h.c2p(i.x,!0),_=f.c2p(i.y,!0),E=i.mrc||1;n=k.extendFlat({},t,{index:i.i,color:(x.marker||{}).color,name:x.name,x0:M-E,x1:M+E,y0:_-E,y1:_+E,spikeDistance:t.distance,hovertemplate:x.hovertemplate});var L,C=a.orig_p,O=C!==void 0?C:a.pos;return x.orientation==="h"?(L=f,n.xLabelVal=i.x,n.yLabelVal=O):(L=h,n.xLabelVal=O,n.yLabelVal=i.y),n[L._id.charAt(0)+"Spike"]=L.c2p(a.pos,!0),b(i,x,n),n}K.exports={hoverPoints:function(t,o,r,n){var a,i=t.cd[0].trace.hoveron,u=[];return i.indexOf("boxes")!==-1&&(u=u.concat(d(t,o,r,n))),i.indexOf("points")!==-1&&(a=s(t,o,r)),n==="closest"?a?[a]:u:(a&&u.push(a),u)},hoverOnBoxes:d,hoverOnPoints:s}},83832:function(K,z,e){K.exports={attributes:e(53522),layoutAttributes:e(40094),supplyDefaults:e(36411).supplyDefaults,crossTraceDefaults:e(36411).crossTraceDefaults,supplyLayoutDefaults:e(4199).supplyLayoutDefaults,calc:e(48518),crossTraceCalc:e(37188).crossTraceCalc,plot:e(86047).plot,style:e(58063).style,styleOnSelect:e(58063).styleOnSelect,hoverPoints:e(41868).hoverPoints,eventData:e(74907),selectPoints:e(24626),moduleType:"trace",name:"box",basePlotModule:e(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},40094:function(K){K.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},4199:function(K,z,e){var S=e(73972),k=e(71828),l=e(40094);function T(b,d,s,t,o){for(var r=o+"Layout",n=!1,a=0;a<s.length;a++){var i=s[a];if(S.traceIs(i,r)){n=!0;break}}n&&(t(o+"mode"),t(o+"gap"),t(o+"groupgap"))}K.exports={supplyLayoutDefaults:function(b,d,s){T(0,0,s,function(t,o){return k.coerce(b,d,l,t,o)},"box")},_supply:T}},86047:function(K,z,e){var S=e(39898),k=e(71828),l=e(91424);function T(s,t,o,r,n){var a,i,u=o.orientation==="h",h=t.val,f=t.pos,x=!!f.rangebreaks,v=r.bPos,g=r.wdPos||0,y=r.bPosPxOffset||0,p=o.whiskerwidth||0,m=o.notched||!1,w=m?1-2*o.notchwidth:1;Array.isArray(r.bdPos)?(a=r.bdPos[0],i=r.bdPos[1]):(a=r.bdPos,i=r.bdPos);var c=s.selectAll("path.box").data(o.type!=="violin"||o.box.visible?k.identity:[]);c.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","box"),c.exit().remove(),c.each(function(M){if(M.empty)return"M0,0Z";var _=f.c2l(M.pos+v,!0),E=f.l2p(_-a)+y,L=f.l2p(_+i)+y,C=x?(E+L)/2:f.l2p(_)+y,O=o.whiskerwidth,I=x?E*O+(1-O)*C:f.l2p(_-g)+y,N=x?L*O+(1-O)*C:f.l2p(_+g)+y,R=f.l2p(_-a*w)+y,V=f.l2p(_+i*w)+y,F=h.c2p(M.q1,!0),D=h.c2p(M.q3,!0),U=k.constrain(h.c2p(M.med,!0),Math.min(F,D)+1,Math.max(F,D)-1),j=M.lf===void 0||o.boxpoints===!1,J=h.c2p(j?M.min:M.lf,!0),X=h.c2p(j?M.max:M.uf,!0),Z=h.c2p(M.ln,!0),Y=h.c2p(M.un,!0);u?S.select(this).attr("d","M"+U+","+R+"V"+V+"M"+F+","+E+"V"+L+(m?"H"+Z+"L"+U+","+V+"L"+Y+","+L:"")+"H"+D+"V"+E+(m?"H"+Y+"L"+U+","+R+"L"+Z+","+E:"")+"ZM"+F+","+C+"H"+J+"M"+D+","+C+"H"+X+(p===0?"":"M"+J+","+I+"V"+N+"M"+X+","+I+"V"+N)):S.select(this).attr("d","M"+R+","+U+"H"+V+"M"+E+","+F+"H"+L+(m?"V"+Z+"L"+V+","+U+"L"+L+","+Y:"")+"V"+D+"H"+E+(m?"V"+Y+"L"+R+","+U+"L"+E+","+Z:"")+"ZM"+C+","+F+"V"+J+"M"+C+","+D+"V"+X+(p===0?"":"M"+I+","+J+"H"+N+"M"+I+","+X+"H"+N))})}function b(s,t,o,r){var n=t.x,a=t.y,i=r.bdPos,u=r.bPos,h=o.boxpoints||o.points;k.seedPseudoRandom();var f=s.selectAll("g.points").data(h?function(v){return v.forEach(function(g){g.t=r,g.trace=o}),v}:[]);f.enter().append("g").attr("class","points"),f.exit().remove();var x=f.selectAll("path").data(function(v){var g,y,p=v.pts2,m=Math.max((v.max-v.min)/10,v.q3-v.q1),w=1e-9*m,c=.01*m,M=[],_=0;if(o.jitter){if(m===0)for(_=1,M=new Array(p.length),g=0;g<p.length;g++)M[g]=1;else for(g=0;g<p.length;g++){var E=Math.max(0,g-5),L=p[E].v,C=Math.min(p.length-1,g+5),O=p[C].v;h!=="all"&&(p[g].v<v.lf?O=Math.min(O,v.lf):L=Math.max(L,v.uf));var I=Math.sqrt(c*(C-E)/(O-L+w))||0;I=k.constrain(Math.abs(I),0,1),M.push(I),_=Math.max(I,_)}y=2*o.jitter/(_||1)}for(g=0;g<p.length;g++){var N=p[g],R=N.v,V=o.jitter?y*M[g]*(k.pseudoRandom()-.5):0,F=v.pos+u+i*(o.pointpos+V);o.orientation==="h"?(N.y=F,N.x=R):(N.x=F,N.y=R),h==="suspectedoutliers"&&R<v.uo&&R>v.lo&&(N.so=!0)}return p});x.enter().append("path").classed("point",!0),x.exit().remove(),x.call(l.translatePoints,n,a)}function d(s,t,o,r){var n,a,i=t.val,u=t.pos,h=!!u.rangebreaks,f=r.bPos,x=r.bPosPxOffset||0,v=o.boxmean||(o.meanline||{}).visible;Array.isArray(r.bdPos)?(n=r.bdPos[0],a=r.bdPos[1]):(n=r.bdPos,a=r.bdPos);var g=s.selectAll("path.mean").data(o.type==="box"&&o.boxmean||o.type==="violin"&&o.box.visible&&o.meanline.visible?k.identity:[]);g.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),g.exit().remove(),g.each(function(y){var p=u.c2l(y.pos+f,!0),m=u.l2p(p-n)+x,w=u.l2p(p+a)+x,c=h?(m+w)/2:u.l2p(p)+x,M=i.c2p(y.mean,!0),_=i.c2p(y.mean-y.sd,!0),E=i.c2p(y.mean+y.sd,!0);o.orientation==="h"?S.select(this).attr("d","M"+M+","+m+"V"+w+(v==="sd"?"m0,0L"+_+","+c+"L"+M+","+m+"L"+E+","+c+"Z":"")):S.select(this).attr("d","M"+m+","+M+"H"+w+(v==="sd"?"m0,0L"+c+","+_+"L"+m+","+M+"L"+c+","+E+"Z":""))})}K.exports={plot:function(s,t,o,r){var n=s._context.staticPlot,a=t.xaxis,i=t.yaxis;k.makeTraceGroups(r,o,"trace boxes").each(function(u){var h,f,x=S.select(this),v=u[0],g=v.t,y=v.trace;g.wdPos=g.bdPos*y.whiskerwidth,y.visible!==!0||g.empty?x.remove():(y.orientation==="h"?(h=i,f=a):(h=a,f=i),T(x,{pos:h,val:f},y,g,n),b(x,{x:a,y:i},y,g),d(x,{pos:h,val:f},y,g))})},plotBoxAndWhiskers:T,plotPoints:b,plotBoxMean:d}},24626:function(K){K.exports=function(z,e){var S,k,l=z.cd,T=z.xaxis,b=z.yaxis,d=[];if(e===!1)for(S=0;S<l.length;S++)for(k=0;k<(l[S].pts||[]).length;k++)l[S].pts[k].selected=0;else for(S=0;S<l.length;S++)for(k=0;k<(l[S].pts||[]).length;k++){var s=l[S].pts[k],t=T.c2p(s.x),o=b.c2p(s.y);e.contains([t,o],null,s.i,z)?(d.push({pointNumber:s.i,x:T.c2d(s.x),y:b.c2d(s.y)}),s.selected=1):s.selected=0}return d}},58063:function(K,z,e){var S=e(39898),k=e(7901),l=e(91424);K.exports={style:function(T,b,d){var s=d||S.select(T).selectAll("g.trace.boxes");s.style("opacity",function(t){return t[0].trace.opacity}),s.each(function(t){var o=S.select(this),r=t[0].trace,n=r.line.width;function a(h,f,x,v){h.style("stroke-width",f+"px").call(k.stroke,x).call(k.fill,v)}var i=o.selectAll("path.box");if(r.type==="candlestick")i.each(function(h){if(!h.empty){var f=S.select(this),x=r[h.dir];a(f,x.line.width,x.line.color,x.fillcolor),f.style("opacity",r.selectedpoints&&!h.selected?.3:1)}});else{a(i,n,r.line.color,r.fillcolor),o.selectAll("path.mean").style({"stroke-width":n,"stroke-dasharray":2*n+"px,"+n+"px"}).call(k.stroke,r.line.color);var u=o.selectAll("path.point");l.pointStyle(u,r,T)}})},styleOnSelect:function(T,b,d){var s=b[0].trace,t=d.selectAll("path.point");s.selectedpoints?l.selectedPointStyle(t,s):l.pointStyle(t,s,T)}}},75343:function(K,z,e){var S=e(71828).extendFlat,k=e(12663).axisHoverFormat,l=e(2522),T=e(53522);function b(d){return{line:{color:S({},T.line.color,{dflt:d}),width:T.line.width,editType:"style"},fillcolor:T.fillcolor,editType:"style"}}K.exports={xperiod:l.xperiod,xperiod0:l.xperiod0,xperiodalignment:l.xperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),x:l.x,open:l.open,high:l.high,low:l.low,close:l.close,line:{width:S({},T.line.width,{}),editType:"style"},increasing:b(l.increasing.line.color.dflt),decreasing:b(l.decreasing.line.color.dflt),text:l.text,hovertext:l.hovertext,whiskerwidth:S({},T.whiskerwidth,{dflt:0}),hoverlabel:l.hoverlabel}},41197:function(K,z,e){var S=e(71828),k=e(89298),l=e(42973),T=e(3485).calcCommon;function b(d,s,t,o){return{min:t,q1:Math.min(d,o),med:o,q3:Math.max(d,o),max:s}}K.exports=function(d,s){var t=d._fullLayout,o=k.getFromId(d,s.xaxis),r=k.getFromId(d,s.yaxis),n=o.makeCalcdata(s,"x"),a=l(s,o,"x",n).vals,i=T(d,s,n,a,r,b);return i.length?(S.extendFlat(i[0].t,{num:t._numBoxes,dPos:S.distinctVals(a).minDiff/2,posLetter:"x",valLetter:"y"}),t._numBoxes++,i):[{t:{empty:!0}}]}},1026:function(K,z,e){var S=e(71828),k=e(7901),l=e(14555),T=e(73927),b=e(75343);function d(s,t,o,r){var n=o(r+".line.color");o(r+".line.width",t.line.width),o(r+".fillcolor",k.addOpacity(n,.5))}K.exports=function(s,t,o,r){function n(a,i){return S.coerce(s,t,b,a,i)}l(s,t,n,r)?(T(s,t,r,n,{x:!0}),n("xhoverformat"),n("yhoverformat"),n("line.width"),d(0,t,n,"increasing"),d(0,t,n,"decreasing"),n("text"),n("hovertext"),n("whiskerwidth"),r._requestRangeslider[t.xaxis]=!0):t.visible=!1}},91815:function(K,z,e){K.exports={moduleType:"trace",name:"candlestick",basePlotModule:e(93612),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e(75343),layoutAttributes:e(40094),supplyLayoutDefaults:e(4199).supplyLayoutDefaults,crossTraceCalc:e(37188).crossTraceCalc,supplyDefaults:e(1026),calc:e(41197),plot:e(86047).plot,layerName:"boxlayer",style:e(58063).style,hoverPoints:e(66449).hoverPoints,selectPoints:e(67324)}},13145:function(K,z,e){var S=e(11500),k=e(44467);K.exports=function(l,T,b,d,s){d("a")||(d("da"),d("a0")),d("b")||(d("db"),d("b0")),function(t,o,r,n){["aaxis","baxis"].forEach(function(a){var i=a.charAt(0),u=t[a]||{},h=k.newContainer(o,a),f={noTicklabelstep:!0,tickfont:"x",id:i+"axis",letter:i,font:o.font,name:a,data:t[i],calendar:o.calendar,dfltColor:n,bgColor:r.paper_bgcolor,autotypenumbersDflt:r.autotypenumbers,fullLayout:r};S(u,h,f),h._categories=h._categories||[],t[a]||u.type==="-"||(t[a]={type:u.type})})}(l,T,b,s)}},402:function(K,z,e){var S=e(71828).isArrayOrTypedArray;function k(l,T){if(!S(l)||T>=10)return null;for(var b=1/0,d=-1/0,s=l.length,t=0;t<s;t++){var o=l[t];if(S(o)){var r=k(o,T+1);r&&(b=Math.min(r[0],b),d=Math.max(r[1],d))}else b=Math.min(o,b),d=Math.max(o,d)}return[b,d]}K.exports=function(l){return k(l,0)}},99798:function(K,z,e){var S=e(41940),k=e(1928),l=e(22399),T=S({editType:"calc"});T.family.dflt='"Open Sans", verdana, arial, sans-serif',T.size.dflt=12,T.color.dflt=l.defaultLine,K.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:k,baxis:k,font:T,color:{valType:"color",dflt:l.defaultLine,editType:"plot"},transforms:void 0}},4536:function(K,z,e){var S=e(71828).isArrayOrTypedArray;K.exports=function(k,l,T,b){var d,s,t,o,r,n,a,i,u,h,f,x,v,g=S(T)?"a":"b",y=(g==="a"?k.aaxis:k.baxis).smoothing,p=g==="a"?k.a2i:k.b2j,m=g==="a"?T:b,w=g==="a"?b:T,c=g==="a"?l.a.length:l.b.length,M=g==="a"?l.b.length:l.a.length,_=Math.floor(g==="a"?k.b2j(w):k.a2i(w)),E=g==="a"?function(J){return k.evalxy([],J,_)}:function(J){return k.evalxy([],_,J)};y&&(t=Math.max(0,Math.min(M-2,_)),o=_-t,s=g==="a"?function(J,X){return k.dxydi([],J,t,X,o)}:function(J,X){return k.dxydj([],t,J,o,X)});var L=p(m[0]),C=p(m[1]),O=L<C?1:-1,I=1e-8*(C-L),N=O>0?Math.floor:Math.ceil,R=O>0?Math.ceil:Math.floor,V=O>0?Math.min:Math.max,F=O>0?Math.max:Math.min,D=N(L+I),U=R(C-I),j=[[a=E(L)]];for(d=D;d*O<U*O;d+=O)r=[],f=F(L,d),v=(x=V(C,d+O))-f,n=Math.max(0,Math.min(c-2,Math.floor(.5*(f+x)))),i=E(x),y&&(u=s(n,f-n),h=s(n,x-n),r.push([a[0]+u[0]/3*v,a[1]+u[1]/3*v]),r.push([i[0]-h[0]/3*v,i[1]-h[1]/3*v])),r.push(i),j.push(r),a=i;return j}},1928:function(K,z,e){var S=e(41940),k=e(22399),l=e(13838),T=e(12663).descriptionWithDates,b=e(30962).overrideAll,d=e(79952).P,s=e(1426).extendFlat;K.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:S({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:l.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:s({},l.labelalias,{editType:"calc"}),tickfont:S({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:T("tick label")},tickformatstops:b(l.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:s({},d,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:s({},d,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:k.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:S({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},11500:function(K,z,e){var S=e(99798),k=e(7901).addOpacity,l=e(73972),T=e(71828),b=e(26218),d=e(96115),s=e(89426),t=e(15258),o=e(21994),r=e(4322);K.exports=function(n,a,i){var u=i.letter,h=i.font||{},f=S[u+"axis"];function x(O,I){return T.coerce(n,a,f,O,I)}function v(O,I){return T.coerce2(n,a,f,O,I)}i.name&&(a._name=i.name,a._id=i.name),x("autotypenumbers",i.autotypenumbersDflt);var g=x("type");g==="-"&&(i.data&&function(O,I){if(O.type==="-"){var N=O._id.charAt(0),R=O[N+"calendar"];O.type=r(I,R,{autotypenumbers:O.autotypenumbers})}}(a,i.data),a.type==="-"?a.type="linear":g=n.type=a.type),x("smoothing"),x("cheatertype"),x("showticklabels"),x("labelprefix",u+" = "),x("labelsuffix"),x("showtickprefix"),x("showticksuffix"),x("separatethousands"),x("tickformat"),x("exponentformat"),x("minexponent"),x("showexponent"),x("categoryorder"),x("tickmode"),x("tickvals"),x("ticktext"),x("tick0"),x("dtick"),a.tickmode==="array"&&(x("arraytick0"),x("arraydtick")),x("labelpadding"),a._hovertitle=u,g==="date"&&l.getComponentMethod("calendars","handleDefaults")(n,a,"calendar",i.calendar),o(a,i.fullLayout),a.c2p=T.identity;var y=x("color",i.dfltColor),p=y===n.color?y:h.color;x("title.text")&&(T.coerceFont(x,"title.font",{family:h.family,size:T.bigFont(h.size),color:p}),x("title.offset")),x("tickangle"),x("autorange",!a.isValidRange(n.range))&&x("rangemode"),x("range"),a.cleanRange(),x("fixedrange"),b(n,a,x,g),s(n,a,x,g,i),d(n,a,x,g,i),t(n,a,x,{data:i.data,dataAttr:u});var m=v("gridcolor",k(y,.3)),w=v("gridwidth"),c=v("griddash"),M=x("showgrid");M||(delete a.gridcolor,delete a.gridwidth,delete a.griddash);var _=v("startlinecolor",y),E=v("startlinewidth",w);x("startline",a.showgrid||!!_||!!E)||(delete a.startlinecolor,delete a.startlinewidth);var L=v("endlinecolor",y),C=v("endlinewidth",w);return x("endline",a.showgrid||!!L||!!C)||(delete a.endlinecolor,delete a.endlinewidth),M?(x("minorgridcount"),x("minorgridwidth",w),x("minorgriddash",c),x("minorgridcolor",k(m,.06)),a.minorgridcount||(delete a.minorgridwidth,delete a.minorgriddash,delete a.minorgridcolor)):(delete a.gridcolor,delete a.gridwidth,delete a.griddash),a.showticklabels==="none"&&(delete a.tickfont,delete a.tickangle,delete a.showexponent,delete a.exponentformat,delete a.minexponent,delete a.tickformat,delete a.showticksuffix,delete a.showtickprefix),a.showticksuffix||delete a.ticksuffix,a.showtickprefix||delete a.tickprefix,x("tickmode"),a}},25281:function(K,z,e){var S=e(89298),k=e(71828).isArray1D,l=e(53824),T=e(402),b=e(20347),d=e(83311),s=e(44807),t=e(4742),o=e(72505),r=e(68296),n=e(11435);K.exports=function(a,i){var u=S.getFromId(a,i.xaxis),h=S.getFromId(a,i.yaxis),f=i.aaxis,x=i.baxis,v=i.x,g=i.y,y=[];v&&k(v)&&y.push("x"),g&&k(g)&&y.push("y"),y.length&&r(i,f,x,"a","b",y);var p=i._a=i._a||i.a,m=i._b=i._b||i.b;v=i._x||i.x,g=i._y||i.y;var w={};if(i._cheater){var c=f.cheatertype==="index"?p.length:p,M=x.cheatertype==="index"?m.length:m;v=l(c,M,i.cheaterslope)}i._x=v=t(v),i._y=g=t(g),o(v,p,m),o(g,p,m),n(i),i.setScale();var _=T(v),E=T(g),L=.5*(_[1]-_[0]),C=.5*(_[1]+_[0]),O=.5*(E[1]-E[0]),I=.5*(E[1]+E[0]),N=1.3;return _=[C-L*N,C+L*N],E=[I-O*N,I+O*N],i._extremes[u._id]=S.findExtremes(u,_,{padded:!0}),i._extremes[h._id]=S.findExtremes(h,E,{padded:!0}),b(i,"a","b"),b(i,"b","a"),d(i,f),d(i,x),w.clipsegments=s(i._xctrl,i._yctrl,f,x),w.x=v,w.y=g,w.a=p,w.b=m,[w]}},44807:function(K){K.exports=function(z,e,S,k){var l,T,b,d=[],s=!!S.smoothing,t=!!k.smoothing,o=z[0].length-1,r=z.length-1;for(l=0,T=[],b=[];l<=o;l++)T[l]=z[0][l],b[l]=e[0][l];for(d.push({x:T,y:b,bicubic:s}),l=0,T=[],b=[];l<=r;l++)T[l]=z[l][o],b[l]=e[l][o];for(d.push({x:T,y:b,bicubic:t}),l=o,T=[],b=[];l>=0;l--)T[o-l]=z[r][l],b[o-l]=e[r][l];for(d.push({x:T,y:b,bicubic:s}),l=r,T=[],b=[];l>=0;l--)T[r-l]=z[l][0],b[r-l]=e[l][0];return d.push({x:T,y:b,bicubic:t}),d}},20347:function(K,z,e){var S=e(89298),k=e(1426).extendFlat;K.exports=function(l,T,b){var d,s,t,o,r,n,a,i,u,h,f,x,v,g,y=l["_"+T],p=l[T+"axis"],m=p._gridlines=[],w=p._minorgridlines=[],c=p._boundarylines=[],M=l["_"+b],_=l[b+"axis"];p.tickmode==="array"&&(p.tickvals=y.slice());var E=l._xctrl,L=l._yctrl,C=E[0].length,O=E.length,I=l._a.length,N=l._b.length;S.prepTicks(p),p.tickmode==="array"&&delete p.tickvals;var R=p.smoothing?3:1;function V(D){var U,j,J,X,Z,Y,W,Q,ne,re,ie,se,ge=[],ue=[],ce={};if(T==="b")for(j=l.b2j(D),J=Math.floor(Math.max(0,Math.min(N-2,j))),X=j-J,ce.length=N,ce.crossLength=I,ce.xy=function(le){return l.evalxy([],le,j)},ce.dxy=function(le,de){return l.dxydi([],le,J,de,X)},U=0;U<I;U++)Y=Math.min(I-2,U),W=U-Y,Q=l.evalxy([],U,j),_.smoothing&&U>0&&(ne=l.dxydi([],U-1,J,0,X),ge.push(Z[0]+ne[0]/3),ue.push(Z[1]+ne[1]/3),re=l.dxydi([],U-1,J,1,X),ge.push(Q[0]-re[0]/3),ue.push(Q[1]-re[1]/3)),ge.push(Q[0]),ue.push(Q[1]),Z=Q;else for(U=l.a2i(D),Y=Math.floor(Math.max(0,Math.min(I-2,U))),W=U-Y,ce.length=I,ce.crossLength=N,ce.xy=function(le){return l.evalxy([],U,le)},ce.dxy=function(le,de){return l.dxydj([],Y,le,W,de)},j=0;j<N;j++)J=Math.min(N-2,j),X=j-J,Q=l.evalxy([],U,j),_.smoothing&&j>0&&(ie=l.dxydj([],Y,j-1,W,0),ge.push(Z[0]+ie[0]/3),ue.push(Z[1]+ie[1]/3),se=l.dxydj([],Y,j-1,W,1),ge.push(Q[0]-se[0]/3),ue.push(Q[1]-se[1]/3)),ge.push(Q[0]),ue.push(Q[1]),Z=Q;return ce.axisLetter=T,ce.axis=p,ce.crossAxis=_,ce.value=D,ce.constvar=b,ce.index=i,ce.x=ge,ce.y=ue,ce.smoothing=_.smoothing,ce}function F(D){var U,j,J,X,Z,Y=[],W=[],Q={};if(Q.length=y.length,Q.crossLength=M.length,T==="b")for(J=Math.max(0,Math.min(N-2,D)),Z=Math.min(1,Math.max(0,D-J)),Q.xy=function(ne){return l.evalxy([],ne,D)},Q.dxy=function(ne,re){return l.dxydi([],ne,J,re,Z)},U=0;U<C;U++)Y[U]=E[D*R][U],W[U]=L[D*R][U];else for(j=Math.max(0,Math.min(I-2,D)),X=Math.min(1,Math.max(0,D-j)),Q.xy=function(ne){return l.evalxy([],D,ne)},Q.dxy=function(ne,re){return l.dxydj([],j,ne,X,re)},U=0;U<O;U++)Y[U]=E[U][D*R],W[U]=L[U][D*R];return Q.axisLetter=T,Q.axis=p,Q.crossAxis=_,Q.value=y[D],Q.constvar=b,Q.index=D,Q.x=Y,Q.y=W,Q.smoothing=_.smoothing,Q}if(p.tickmode==="array"){for(o=5e-15,n=(r=[Math.floor((y.length-1-p.arraytick0)/p.arraydtick*(1+o)),Math.ceil(-p.arraytick0/p.arraydtick/(1+o))].sort(function(D,U){return D-U}))[0]-1,a=r[1]+1,i=n;i<a;i++)(s=p.arraytick0+p.arraydtick*i)<0||s>y.length-1||m.push(k(F(s),{color:p.gridcolor,width:p.gridwidth,dash:p.griddash}));for(i=n;i<a;i++)if(t=p.arraytick0+p.arraydtick*i,f=Math.min(t+p.arraydtick,y.length-1),!(t<0||t>y.length-1||f<0||f>y.length-1))for(x=y[t],v=y[f],d=0;d<p.minorgridcount;d++)(g=f-t)<=0||(h=x+(v-x)*(d+1)/(p.minorgridcount+1)*(p.arraydtick/g))<y[0]||h>y[y.length-1]||w.push(k(V(h),{color:p.minorgridcolor,width:p.minorgridwidth,dash:p.minorgriddash}));p.startline&&c.push(k(F(0),{color:p.startlinecolor,width:p.startlinewidth})),p.endline&&c.push(k(F(y.length-1),{color:p.endlinecolor,width:p.endlinewidth}))}else{for(o=5e-15,n=(r=[Math.floor((y[y.length-1]-p.tick0)/p.dtick*(1+o)),Math.ceil((y[0]-p.tick0)/p.dtick/(1+o))].sort(function(D,U){return D-U}))[0],a=r[1],i=n;i<=a;i++)u=p.tick0+p.dtick*i,m.push(k(V(u),{color:p.gridcolor,width:p.gridwidth,dash:p.griddash}));for(i=n-1;i<a+1;i++)for(u=p.tick0+p.dtick*i,d=0;d<p.minorgridcount;d++)(h=u+p.dtick*(d+1)/(p.minorgridcount+1))<y[0]||h>y[y.length-1]||w.push(k(V(h),{color:p.minorgridcolor,width:p.minorgridwidth,dash:p.minorgriddash}));p.startline&&c.push(k(V(y[0]),{color:p.startlinecolor,width:p.startlinewidth})),p.endline&&c.push(k(V(y[y.length-1]),{color:p.endlinecolor,width:p.endlinewidth}))}}},83311:function(K,z,e){var S=e(89298),k=e(1426).extendFlat;K.exports=function(l,T){var b,d,s,t=T._labels=[],o=T._gridlines;for(b=0;b<o.length;b++)s=o[b],["start","both"].indexOf(T.showticklabels)!==-1&&(d=S.tickText(T,s.value),k(d,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:s.xy(0),dxy:s.dxy(0,0),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:b===0,isLast:b===o.length-1}),t.push(d)),["end","both"].indexOf(T.showticklabels)!==-1&&(d=S.tickText(T,s.value),k(d,{endAnchor:!1,xy:s.xy(s.crossLength-1),dxy:s.dxy(s.crossLength-2,1),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:b===0,isLast:b===o.length-1}),t.push(d))}},42048:function(K){K.exports=function(z,e,S,k){var l=z[0]-e[0],T=z[1]-e[1],b=S[0]-e[0],d=S[1]-e[1],s=Math.pow(l*l+T*T,.25),t=Math.pow(b*b+d*d,.25),o=(t*t*l-s*s*b)*k,r=(t*t*T-s*s*d)*k,n=t*(s+t)*3,a=s*(s+t)*3;return[[e[0]+(n&&o/n),e[1]+(n&&r/n)],[e[0]-(a&&o/a),e[1]-(a&&r/a)]]}},53824:function(K,z,e){var S=e(71828).isArrayOrTypedArray;K.exports=function(k,l,T){var b,d,s,t,o,r,n=[],a=S(k)?k.length:k,i=S(l)?l.length:l,u=S(k)?k:null,h=S(l)?l:null;u&&(s=(u.length-1)/(u[u.length-1]-u[0])/(a-1)),h&&(t=(h.length-1)/(h[h.length-1]-h[0])/(i-1));var f=1/0,x=-1/0;for(d=0;d<i;d++)for(n[d]=[],o=h?(h[d]-h[0])*t:d/(i-1),b=0;b<a;b++)r=(u?(u[b]-u[0])*s:b/(a-1))-o*T,f=Math.min(r,f),x=Math.max(r,x),n[d][b]=r;var v=1/(x-f),g=-f*v;for(d=0;d<i;d++)for(b=0;b<a;b++)n[d][b]=v*n[d][b]+g;return n}},45664:function(K,z,e){var S=e(42048),k=e(71828).ensureArray;function l(T,b,d){var s=-.5*d[0]+1.5*b[0],t=-.5*d[1]+1.5*b[1];return[(2*s+T[0])/3,(2*t+T[1])/3]}K.exports=function(T,b,d,s,t,o){var r,n,a,i,u,h,f,x,v,g,y=d[0].length,p=d.length,m=t?3*y-2:y,w=o?3*p-2:p;for(T=k(T,w),b=k(b,w),a=0;a<w;a++)T[a]=k(T[a],m),b[a]=k(b[a],m);for(n=0,i=0;n<p;n++,i+=o?3:1)for(u=T[i],h=b[i],f=d[n],x=s[n],r=0,a=0;r<y;r++,a+=t?3:1)u[a]=f[r],h[a]=x[r];if(t)for(n=0,i=0;n<p;n++,i+=o?3:1){for(r=1,a=3;r<y-1;r++,a+=3)v=S([d[n][r-1],s[n][r-1]],[d[n][r],s[n][r]],[d[n][r+1],s[n][r+1]],t),T[i][a-1]=v[0][0],b[i][a-1]=v[0][1],T[i][a+1]=v[1][0],b[i][a+1]=v[1][1];g=l([T[i][0],b[i][0]],[T[i][2],b[i][2]],[T[i][3],b[i][3]]),T[i][1]=g[0],b[i][1]=g[1],g=l([T[i][m-1],b[i][m-1]],[T[i][m-3],b[i][m-3]],[T[i][m-4],b[i][m-4]]),T[i][m-2]=g[0],b[i][m-2]=g[1]}if(o)for(a=0;a<m;a++){for(i=3;i<w-3;i+=3)v=S([T[i-3][a],b[i-3][a]],[T[i][a],b[i][a]],[T[i+3][a],b[i+3][a]],o),T[i-1][a]=v[0][0],b[i-1][a]=v[0][1],T[i+1][a]=v[1][0],b[i+1][a]=v[1][1];g=l([T[0][a],b[0][a]],[T[2][a],b[2][a]],[T[3][a],b[3][a]]),T[1][a]=g[0],b[1][a]=g[1],g=l([T[w-1][a],b[w-1][a]],[T[w-3][a],b[w-3][a]],[T[w-4][a],b[w-4][a]]),T[w-2][a]=g[0],b[w-2][a]=g[1]}if(t&&o)for(i=1;i<w;i+=(i+1)%3==0?2:1){for(a=3;a<m-3;a+=3)v=S([T[i][a-3],b[i][a-3]],[T[i][a],b[i][a]],[T[i][a+3],b[i][a+3]],t),T[i][a-1]=.5*(T[i][a-1]+v[0][0]),b[i][a-1]=.5*(b[i][a-1]+v[0][1]),T[i][a+1]=.5*(T[i][a+1]+v[1][0]),b[i][a+1]=.5*(b[i][a+1]+v[1][1]);g=l([T[i][0],b[i][0]],[T[i][2],b[i][2]],[T[i][3],b[i][3]]),T[i][1]=.5*(T[i][1]+g[0]),b[i][1]=.5*(b[i][1]+g[1]),g=l([T[i][m-1],b[i][m-1]],[T[i][m-3],b[i][m-3]],[T[i][m-4],b[i][m-4]]),T[i][m-2]=.5*(T[i][m-2]+g[0]),b[i][m-2]=.5*(b[i][m-2]+g[1])}return[T,b]}},35509:function(K){K.exports={RELATIVE_CULL_TOLERANCE:1e-6}},54495:function(K){K.exports=function(z,e,S){return e&&S?function(k,l,T,b,d){var s,t,o,r,n,a;k||(k=[]),l*=3,T*=3;var i=b*b,u=1-b,h=u*u,f=u*b*2,x=-3*h,v=3*(h-f),g=3*(f-i),y=3*i,p=d*d,m=p*d,w=1-d,c=w*w,M=c*w;for(a=0;a<z.length;a++)s=x*(n=z[a])[T][l]+v*n[T][l+1]+g*n[T][l+2]+y*n[T][l+3],t=x*n[T+1][l]+v*n[T+1][l+1]+g*n[T+1][l+2]+y*n[T+1][l+3],o=x*n[T+2][l]+v*n[T+2][l+1]+g*n[T+2][l+2]+y*n[T+2][l+3],r=x*n[T+3][l]+v*n[T+3][l+1]+g*n[T+3][l+2]+y*n[T+3][l+3],k[a]=M*s+3*(c*d*t+w*p*o)+m*r;return k}:e?function(k,l,T,b,d){var s,t,o,r;k||(k=[]),l*=3;var n=b*b,a=1-b,i=a*a,u=a*b*2,h=-3*i,f=3*(i-u),x=3*(u-n),v=3*n,g=1-d;for(o=0;o<z.length;o++)s=h*(r=z[o])[T][l]+f*r[T][l+1]+x*r[T][l+2]+v*r[T][l+3],t=h*r[T+1][l]+f*r[T+1][l+1]+x*r[T+1][l+2]+v*r[T+1][l+3],k[o]=g*s+d*t;return k}:S?function(k,l,T,b,d){var s,t,o,r,n,a;k||(k=[]),T*=3;var i=d*d,u=i*d,h=1-d,f=h*h,x=f*h;for(n=0;n<z.length;n++)s=(a=z[n])[T][l+1]-a[T][l],t=a[T+1][l+1]-a[T+1][l],o=a[T+2][l+1]-a[T+2][l],r=a[T+3][l+1]-a[T+3][l],k[n]=x*s+3*(f*d*t+h*i*o)+u*r;return k}:function(k,l,T,b,d){var s,t,o,r;k||(k=[]);var n=1-d;for(o=0;o<z.length;o++)s=(r=z[o])[T][l+1]-r[T][l],t=r[T+1][l+1]-r[T+1][l],k[o]=n*s+d*t;return k}}},73057:function(K){K.exports=function(z,e,S){return e&&S?function(k,l,T,b,d){var s,t,o,r,n,a;k||(k=[]),l*=3,T*=3;var i=b*b,u=i*b,h=1-b,f=h*h,x=f*h,v=d*d,g=1-d,y=g*g,p=g*d*2,m=-3*y,w=3*(y-p),c=3*(p-v),M=3*v;for(a=0;a<z.length;a++)s=m*(n=z[a])[T][l]+w*n[T+1][l]+c*n[T+2][l]+M*n[T+3][l],t=m*n[T][l+1]+w*n[T+1][l+1]+c*n[T+2][l+1]+M*n[T+3][l+1],o=m*n[T][l+2]+w*n[T+1][l+2]+c*n[T+2][l+2]+M*n[T+3][l+2],r=m*n[T][l+3]+w*n[T+1][l+3]+c*n[T+2][l+3]+M*n[T+3][l+3],k[a]=x*s+3*(f*b*t+h*i*o)+u*r;return k}:e?function(k,l,T,b,d){var s,t,o,r,n,a;k||(k=[]),l*=3;var i=d*d,u=i*d,h=1-d,f=h*h,x=f*h;for(n=0;n<z.length;n++)s=(a=z[n])[T+1][l]-a[T][l],t=a[T+1][l+1]-a[T][l+1],o=a[T+1][l+2]-a[T][l+2],r=a[T+1][l+3]-a[T][l+3],k[n]=x*s+3*(f*d*t+h*i*o)+u*r;return k}:S?function(k,l,T,b,d){var s,t,o,r;k||(k=[]),T*=3;var n=1-b,a=d*d,i=1-d,u=i*i,h=i*d*2,f=-3*u,x=3*(u-h),v=3*(h-a),g=3*a;for(o=0;o<z.length;o++)s=f*(r=z[o])[T][l]+x*r[T+1][l]+v*r[T+2][l]+g*r[T+3][l],t=f*r[T][l+1]+x*r[T+1][l+1]+v*r[T+2][l+1]+g*r[T+3][l+1],k[o]=n*s+b*t;return k}:function(k,l,T,b,d){var s,t,o,r;k||(k=[]);var n=1-b;for(o=0;o<z.length;o++)s=(r=z[o])[T+1][l]-r[T][l],t=r[T+1][l+1]-r[T][l+1],k[o]=n*s+b*t;return k}}},20349:function(K){K.exports=function(z,e,S,k,l){var T=e-2,b=S-2;return k&&l?function(d,s,t){var o,r,n,a,i,u;d||(d=[]);var h=Math.max(0,Math.min(Math.floor(s),T)),f=Math.max(0,Math.min(Math.floor(t),b)),x=Math.max(0,Math.min(1,s-h)),v=Math.max(0,Math.min(1,t-f));h*=3,f*=3;var g=x*x,y=g*x,p=1-x,m=p*p,w=m*p,c=v*v,M=c*v,_=1-v,E=_*_,L=E*_;for(u=0;u<z.length;u++)o=w*(i=z[u])[f][h]+3*(m*x*i[f][h+1]+p*g*i[f][h+2])+y*i[f][h+3],r=w*i[f+1][h]+3*(m*x*i[f+1][h+1]+p*g*i[f+1][h+2])+y*i[f+1][h+3],n=w*i[f+2][h]+3*(m*x*i[f+2][h+1]+p*g*i[f+2][h+2])+y*i[f+2][h+3],a=w*i[f+3][h]+3*(m*x*i[f+3][h+1]+p*g*i[f+3][h+2])+y*i[f+3][h+3],d[u]=L*o+3*(E*v*r+_*c*n)+M*a;return d}:k?function(d,s,t){d||(d=[]);var o,r,n,a,i,u,h=Math.max(0,Math.min(Math.floor(s),T)),f=Math.max(0,Math.min(Math.floor(t),b)),x=Math.max(0,Math.min(1,s-h)),v=Math.max(0,Math.min(1,t-f));h*=3;var g=x*x,y=g*x,p=1-x,m=p*p,w=m*p,c=1-v;for(i=0;i<z.length;i++)o=c*(u=z[i])[f][h]+v*u[f+1][h],r=c*u[f][h+1]+v*u[f+1][h+1],n=c*u[f][h+2]+v*u[f+1][h+1],a=c*u[f][h+3]+v*u[f+1][h+1],d[i]=w*o+3*(m*x*r+p*g*n)+y*a;return d}:l?function(d,s,t){d||(d=[]);var o,r,n,a,i,u,h=Math.max(0,Math.min(Math.floor(s),T)),f=Math.max(0,Math.min(Math.floor(t),b)),x=Math.max(0,Math.min(1,s-h)),v=Math.max(0,Math.min(1,t-f));f*=3;var g=v*v,y=g*v,p=1-v,m=p*p,w=m*p,c=1-x;for(i=0;i<z.length;i++)o=c*(u=z[i])[f][h]+x*u[f][h+1],r=c*u[f+1][h]+x*u[f+1][h+1],n=c*u[f+2][h]+x*u[f+2][h+1],a=c*u[f+3][h]+x*u[f+3][h+1],d[i]=w*o+3*(m*v*r+p*g*n)+y*a;return d}:function(d,s,t){d||(d=[]);var o,r,n,a,i=Math.max(0,Math.min(Math.floor(s),T)),u=Math.max(0,Math.min(Math.floor(t),b)),h=Math.max(0,Math.min(1,s-i)),f=Math.max(0,Math.min(1,t-u)),x=1-f,v=1-h;for(n=0;n<z.length;n++)o=v*(a=z[n])[u][i]+h*a[u][i+1],r=v*a[u+1][i]+h*a[u+1][i+1],d[n]=x*o+f*r;return d}}},92087:function(K,z,e){var S=e(71828),k=e(19237),l=e(13145),T=e(99798),b=e(22399);K.exports=function(d,s,t,o){function r(a,i){return S.coerce(d,s,T,a,i)}s._clipPathId="clip"+s.uid+"carpet";var n=r("color",b.defaultLine);S.coerceFont(r,"font"),r("carpet"),l(d,s,o,r,n),s.a&&s.b?(s.a.length<3&&(s.aaxis.smoothing=0),s.b.length<3&&(s.baxis.smoothing=0),k(d,s,r)||(s.visible=!1),s._cheater&&r("cheaterslope")):s.visible=!1}},21462:function(K,z,e){K.exports={attributes:e(99798),supplyDefaults:e(92087),plot:e(89740),calc:e(25281),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e(93612),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},22882:function(K){K.exports=function(z,e){for(var S,k=z._fullData.length,l=0;l<k;l++){var T=z._fullData[l];if(T.index!==e.index&&T.type==="carpet"&&(S||(S=T),T.carpet===e.carpet))return T}return S}},67961:function(K){K.exports=function(z,e,S){if(z.length===0)return"";var k,l=[],T=S?3:1;for(k=0;k<z.length;k+=T)l.push(z[k]+","+e[k]),S&&k<z.length-T&&(l.push("C"),l.push([z[k+1]+","+e[k+1],z[k+2]+","+e[k+2]+" "].join(" ")));return l.join(S?"":"L")}},27669:function(K,z,e){var S=e(71828).isArrayOrTypedArray;K.exports=function(k,l,T){var b;for(S(k)?k.length>l.length&&(k=k.slice(0,l.length)):k=[],b=0;b<l.length;b++)k[b]=T(l[b]);return k}},11651:function(K){K.exports=function(z,e,S,k,l,T){var b=l[0]*z.dpdx(e),d=l[1]*z.dpdy(S),s=1,t=1;if(T){var o=Math.sqrt(l[0]*l[0]+l[1]*l[1]),r=Math.sqrt(T[0]*T[0]+T[1]*T[1]),n=(l[0]*T[0]+l[1]*T[1])/o/r;t=Math.max(0,n)}var a=180*Math.atan2(d,b)/Math.PI;return a<-90?(a+=180,s=-s):a>90&&(a-=180,s=-s),{angle:a,flip:s,p:z.c2p(k,e,S),offsetMultplier:t}}},89740:function(K,z,e){var S=e(39898),k=e(91424),l=e(27669),T=e(67961),b=e(11651),d=e(63893),s=e(71828),t=s.strRotate,o=s.strTranslate,r=e(18783);function n(f,x,v,g,y,p,m){var w="const-"+y+"-lines",c=v.selectAll("."+w).data(p);c.enter().append("path").classed(w,!0).style("vector-effect",m?"none":"non-scaling-stroke"),c.each(function(M){var _=M,E=_.x,L=_.y,C=l([],E,f.c2p),O=l([],L,x.c2p),I="M"+T(C,O,_.smoothing);S.select(this).attr("d",I).style("stroke-width",_.width).style("stroke",_.color).style("stroke-dasharray",k.dashStyle(_.dash,_.width)).style("fill","none")}),c.exit().remove()}function a(f,x,v,g,y,p,m,w){var c=p.selectAll("text."+w).data(m);c.enter().append("text").classed(w,!0);var M=0,_={};return c.each(function(E,L){var C;if(E.axis.tickangle==="auto")C=b(g,x,v,E.xy,E.dxy);else{var O=(E.axis.tickangle+180)*Math.PI/180;C=b(g,x,v,E.xy,[Math.cos(O),Math.sin(O)])}L||(_={angle:C.angle,flip:C.flip});var I=(E.endAnchor?-1:1)*C.flip,N=S.select(this).attr({"text-anchor":I>0?"start":"end","data-notex":1}).call(k.font,E.font).text(E.text).call(d.convertToTspans,f),R=k.bBox(this);N.attr("transform",o(C.p[0],C.p[1])+t(C.angle)+o(E.axis.labelpadding*I,.3*R.height)),M=Math.max(M,R.width+E.axis.labelpadding)}),c.exit().remove(),_.maxExtent=M,_}K.exports=function(f,x,v,g){var y=f._context.staticPlot,p=x.xaxis,m=x.yaxis,w=f._fullLayout._clips;s.makeTraceGroups(g,v,"trace").each(function(c){var M=S.select(this),_=c[0],E=_.trace,L=E.aaxis,C=E.baxis,O=s.ensureSingle(M,"g","minorlayer"),I=s.ensureSingle(M,"g","majorlayer"),N=s.ensureSingle(M,"g","boundarylayer"),R=s.ensureSingle(M,"g","labellayer");M.style("opacity",E.opacity),n(p,m,I,0,"a",L._gridlines,!0),n(p,m,I,0,"b",C._gridlines,!0),n(p,m,O,0,"a",L._minorgridlines,!0),n(p,m,O,0,"b",C._minorgridlines,!0),n(p,m,N,0,"a-boundary",L._boundarylines,y),n(p,m,N,0,"b-boundary",C._boundarylines,y);var V=a(f,p,m,E,0,R,L._labels,"a-label"),F=a(f,p,m,E,0,R,C._labels,"b-label");(function(D,U,j,J,X,Z,Y,W){var Q,ne,re,ie,se=s.aggNums(Math.min,null,j.a),ge=s.aggNums(Math.max,null,j.a),ue=s.aggNums(Math.min,null,j.b),ce=s.aggNums(Math.max,null,j.b);Q=.5*(se+ge),ne=ue,re=j.ab2xy(Q,ne,!0),ie=j.dxyda_rough(Q,ne),Y.angle===void 0&&s.extendFlat(Y,b(j,X,Z,re,j.dxydb_rough(Q,ne))),h(D,U,j,0,re,ie,j.aaxis,X,Z,Y,"a-title"),Q=se,ne=.5*(ue+ce),re=j.ab2xy(Q,ne,!0),ie=j.dxydb_rough(Q,ne),W.angle===void 0&&s.extendFlat(W,b(j,X,Z,re,j.dxyda_rough(Q,ne))),h(D,U,j,0,re,ie,j.baxis,X,Z,W,"b-title")})(f,R,E,0,p,m,V,F),function(D,U,j,J,X){var Z,Y,W,Q,ne=j.select("#"+D._clipPathId);ne.size()||(ne=j.append("clipPath").classed("carpetclip",!0));var re=s.ensureSingle(ne,"path","carpetboundary"),ie=U.clipsegments,se=[];for(Q=0;Q<ie.length;Q++)Z=ie[Q],Y=l([],Z.x,J.c2p),W=l([],Z.y,X.c2p),se.push(T(Y,W,Z.bicubic));var ge="M"+se.join("L")+"Z";ne.attr("id",D._clipPathId),re.attr("d",ge)}(E,_,w,p,m)})};var i=r.LINE_SPACING,u=(1-r.MID_SHIFT)/i+1;function h(f,x,v,g,y,p,m,w,c,M,_){var E=[];m.title.text&&E.push(m.title.text);var L=x.selectAll("text."+_).data(E),C=M.maxExtent;L.enter().append("text").classed(_,!0),L.each(function(){var O=b(v,w,c,y,p);["start","both"].indexOf(m.showticklabels)===-1&&(C=0);var I=m.title.font.size;C+=I+m.title.offset;var N=(M.angle+(M.flip<0?180:0)-O.angle+450)%360,R=N>90&&N<270,V=S.select(this);V.text(m.title.text).call(d.convertToTspans,f),R&&(C=(-d.lineCount(V)+u)*i*I-C),V.attr("transform",o(O.p[0],O.p[1])+t(O.angle)+o(0,C)).attr("text-anchor","middle").call(k.font,m.title.font)}),L.exit().remove()}},11435:function(K,z,e){var S=e(35509),k=e(65888).findBin,l=e(45664),T=e(20349),b=e(54495),d=e(73057);K.exports=function(s){var t=s._a,o=s._b,r=t.length,n=o.length,a=s.aaxis,i=s.baxis,u=t[0],h=t[r-1],f=o[0],x=o[n-1],v=t[t.length-1]-t[0],g=o[o.length-1]-o[0],y=v*S.RELATIVE_CULL_TOLERANCE,p=g*S.RELATIVE_CULL_TOLERANCE;u-=y,h+=y,f-=p,x+=p,s.isVisible=function(m,w){return m>u&&m<h&&w>f&&w<x},s.isOccluded=function(m,w){return m<u||m>h||w<f||w>x},s.setScale=function(){var m=s._x,w=s._y,c=l(s._xctrl,s._yctrl,m,w,a.smoothing,i.smoothing);s._xctrl=c[0],s._yctrl=c[1],s.evalxy=T([s._xctrl,s._yctrl],r,n,a.smoothing,i.smoothing),s.dxydi=b([s._xctrl,s._yctrl],a.smoothing,i.smoothing),s.dxydj=d([s._xctrl,s._yctrl],a.smoothing,i.smoothing)},s.i2a=function(m){var w=Math.max(0,Math.floor(m[0]),r-2),c=m[0]-w;return(1-c)*t[w]+c*t[w+1]},s.j2b=function(m){var w=Math.max(0,Math.floor(m[1]),r-2),c=m[1]-w;return(1-c)*o[w]+c*o[w+1]},s.ij2ab=function(m){return[s.i2a(m[0]),s.j2b(m[1])]},s.a2i=function(m){var w=Math.max(0,Math.min(k(m,t),r-2)),c=t[w],M=t[w+1];return Math.max(0,Math.min(r-1,w+(m-c)/(M-c)))},s.b2j=function(m){var w=Math.max(0,Math.min(k(m,o),n-2)),c=o[w],M=o[w+1];return Math.max(0,Math.min(n-1,w+(m-c)/(M-c)))},s.ab2ij=function(m){return[s.a2i(m[0]),s.b2j(m[1])]},s.i2c=function(m,w){return s.evalxy([],m,w)},s.ab2xy=function(m,w,c){if(!c&&(m<t[0]||m>t[r-1]|w<o[0]||w>o[n-1]))return[!1,!1];var M=s.a2i(m),_=s.b2j(w),E=s.evalxy([],M,_);if(c){var L,C,O,I,N=0,R=0,V=[];m<t[0]?(L=0,C=0,N=(m-t[0])/(t[1]-t[0])):m>t[r-1]?(L=r-2,C=1,N=(m-t[r-1])/(t[r-1]-t[r-2])):C=M-(L=Math.max(0,Math.min(r-2,Math.floor(M)))),w<o[0]?(O=0,I=0,R=(w-o[0])/(o[1]-o[0])):w>o[n-1]?(O=n-2,I=1,R=(w-o[n-1])/(o[n-1]-o[n-2])):I=_-(O=Math.max(0,Math.min(n-2,Math.floor(_)))),N&&(s.dxydi(V,L,O,C,I),E[0]+=V[0]*N,E[1]+=V[1]*N),R&&(s.dxydj(V,L,O,C,I),E[0]+=V[0]*R,E[1]+=V[1]*R)}return E},s.c2p=function(m,w,c){return[w.c2p(m[0]),c.c2p(m[1])]},s.p2x=function(m,w,c){return[w.p2c(m[0]),c.p2c(m[1])]},s.dadi=function(m){var w=Math.max(0,Math.min(t.length-2,m));return t[w+1]-t[w]},s.dbdj=function(m){var w=Math.max(0,Math.min(o.length-2,m));return o[w+1]-o[w]},s.dxyda=function(m,w,c,M){var _=s.dxydi(null,m,w,c,M),E=s.dadi(m,c);return[_[0]/E,_[1]/E]},s.dxydb=function(m,w,c,M){var _=s.dxydj(null,m,w,c,M),E=s.dbdj(w,M);return[_[0]/E,_[1]/E]},s.dxyda_rough=function(m,w,c){var M=v*(c||.1),_=s.ab2xy(m+M,w,!0),E=s.ab2xy(m-M,w,!0);return[.5*(_[0]-E[0])/M,.5*(_[1]-E[1])/M]},s.dxydb_rough=function(m,w,c){var M=g*(c||.1),_=s.ab2xy(m,w+M,!0),E=s.ab2xy(m,w-M,!0);return[.5*(_[0]-E[0])/M,.5*(_[1]-E[1])/M]},s.dpdx=function(m){return m._m},s.dpdy=function(m){return m._m}}},72505:function(K,z,e){var S=e(71828);K.exports=function(k,l,T){var b,d,s,t=[],o=[],r=k[0].length,n=k.length;function a(D,U){var j,J=0,X=0;return D>0&&(j=k[U][D-1])!==void 0&&(X++,J+=j),D<r-1&&(j=k[U][D+1])!==void 0&&(X++,J+=j),U>0&&(j=k[U-1][D])!==void 0&&(X++,J+=j),U<n-1&&(j=k[U+1][D])!==void 0&&(X++,J+=j),J/Math.max(1,X)}var i,u,h,f,x,v,g,y,p,m,w,c=0;for(b=0;b<r;b++)for(d=0;d<n;d++)k[d][b]===void 0&&(t.push(b),o.push(d),k[d][b]=a(b,d)),c=Math.max(c,Math.abs(k[d][b]));if(!t.length)return k;var M=0,_=0,E=t.length;do{for(M=0,s=0;s<E;s++){b=t[s],d=o[s];var L,C,O,I,N,R,V=0,F=0;b===0?(O=l[N=Math.min(r-1,2)],I=l[1],L=k[d][N],F+=(C=k[d][1])+(C-L)*(l[0]-I)/(I-O),V++):b===r-1&&(O=l[N=Math.max(0,r-3)],I=l[r-2],L=k[d][N],F+=(C=k[d][r-2])+(C-L)*(l[r-1]-I)/(I-O),V++),(b===0||b===r-1)&&d>0&&d<n-1&&(i=T[d+1]-T[d],F+=((u=T[d]-T[d-1])*k[d+1][b]+i*k[d-1][b])/(u+i),V++),d===0?(O=T[R=Math.min(n-1,2)],I=T[1],L=k[R][b],F+=(C=k[1][b])+(C-L)*(T[0]-I)/(I-O),V++):d===n-1&&(O=T[R=Math.max(0,n-3)],I=T[n-2],L=k[R][b],F+=(C=k[n-2][b])+(C-L)*(T[n-1]-I)/(I-O),V++),(d===0||d===n-1)&&b>0&&b<r-1&&(i=l[b+1]-l[b],F+=((u=l[b]-l[b-1])*k[d][b+1]+i*k[d][b-1])/(u+i),V++),V?F/=V:(h=l[b+1]-l[b],f=l[b]-l[b-1],y=(x=T[d+1]-T[d])*(v=T[d]-T[d-1])*(x+v),F=((g=h*f*(h+f))*(v*k[d+1][b]+x*k[d-1][b])+y*(f*k[d][b+1]+h*k[d][b-1]))/(y*(f+h)+g*(v+x))),M+=(m=(p=F-k[d][b])/c)*m,w=V?0:.85,k[d][b]+=p*(1+w)}M=Math.sqrt(M)}while(_++<100&&M>1e-5);return S.log("Smoother converged to",M,"after",_,"iterations"),k}},19237:function(K,z,e){var S=e(71828).isArray1D;K.exports=function(k,l,T){var b=T("x"),d=b&&b.length,s=T("y"),t=s&&s.length;if(!d&&!t)return!1;if(l._cheater=!b,d&&!S(b)||t&&!S(s))l._length=null;else{var o=d?b.length:1/0;t&&(o=Math.min(o,s.length)),l.a&&l.a.length&&(o=Math.min(o,l.a.length)),l.b&&l.b.length&&(o=Math.min(o,l.b.length)),l._length=o}return!0}},69568:function(K,z,e){var S=e(5386).fF,k=e(19316),l=e(50693),T=e(9012),b=e(22399).defaultLine,d=e(1426).extendFlat,s=k.marker.line;K.exports=d({locations:{valType:"data_array",editType:"calc"},locationmode:k.locationmode,z:{valType:"data_array",editType:"calc"},geojson:d({},k.geojson,{}),featureidkey:k.featureidkey,text:d({},k.text,{}),hovertext:d({},k.hovertext,{}),marker:{line:{color:d({},s.color,{dflt:b}),width:d({},s.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:k.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:k.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:d({},T.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:S(),showlegend:d({},T.showlegend,{dflt:!1})},l("",{cLetter:"z",editTypeOverride:"calc"}))},38675:function(K,z,e){var S=e(92770),k=e(50606).BADNUM,l=e(78803),T=e(75225),b=e(66279);function d(s){return s&&typeof s=="string"}K.exports=function(s,t){var o,r=t._length,n=new Array(r);o=t.geojson?function(f){return d(f)||S(f)}:d;for(var a=0;a<r;a++){var i=n[a]={},u=t.locations[a],h=t.z[a];o(u)&&S(h)?(i.loc=u,i.z=h):(i.loc=null,i.z=k),i.index=a}return T(n,t),l(s,t,{vals:t.z,containerStr:"",cLetter:"z"}),b(n,t),n}},61869:function(K,z,e){var S=e(71828),k=e(1586),l=e(69568);K.exports=function(T,b,d,s){function t(i,u){return S.coerce(T,b,l,i,u)}var o=t("locations"),r=t("z");if(o&&o.length&&S.isArrayOrTypedArray(r)&&r.length){b._length=Math.min(o.length,r.length);var n,a=t("geojson");(typeof a=="string"&&a!==""||S.isPlainObject(a))&&(n="geojson-id"),t("locationmode",n)==="geojson-id"&&t("featureidkey"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(T,b,s,t,{prefix:"",cLetter:"z"}),S.coerceSelectionMarkerOpacity(b,t)}else b.visible=!1}},92069:function(K){K.exports=function(z,e,S,k,l){z.location=e.location,z.z=e.z;var T=k[l];return T.fIn&&T.fIn.properties&&(z.properties=T.fIn.properties),z.ct=T.ct,z}},42300:function(K,z,e){var S=e(89298),k=e(69568),l=e(71828).fillText;K.exports=function(T,b,d){var s,t,o,r,n=T.cd,a=n[0].trace,i=T.subplot,u=[b,d],h=[b+360,d];for(t=0;t<n.length;t++)if(r=!1,(s=n[t])._polygons){for(o=0;o<s._polygons.length;o++)s._polygons[o].contains(u)&&(r=!r),s._polygons[o].contains(h)&&(r=!r);if(r)break}if(r&&s)return T.x0=T.x1=T.xa.c2p(s.ct),T.y0=T.y1=T.ya.c2p(s.ct),T.index=s.index,T.location=s.loc,T.z=s.z,T.zLabel=S.tickText(i.mockAxis,i.mockAxis.c2l(s.z),"hover").text,T.hovertemplate=s.hovertemplate,function(f,x,v){if(!x.hovertemplate){var g=v.hi||x.hoverinfo,y=String(v.loc),p=g==="all"?k.hoverinfo.flags:g.split("+"),m=p.indexOf("name")!==-1,w=p.indexOf("location")!==-1,c=p.indexOf("z")!==-1,M=p.indexOf("text")!==-1,_=[];!m&&w?f.nameOverride=y:(m&&(f.nameOverride=x.name),w&&_.push(y)),c&&_.push(f.zLabel),M&&l(v,x,_),f.extraText=_.join("<br>")}}(T,a,s),[T]}},51319:function(K,z,e){K.exports={attributes:e(69568),supplyDefaults:e(61869),colorbar:e(61243),calc:e(38675),calcGeoJSON:e(99841).calcGeoJSON,plot:e(99841).plot,style:e(99636).style,styleOnSelect:e(99636).styleOnSelect,hoverPoints:e(42300),eventData:e(92069),selectPoints:e(81253),moduleType:"trace",name:"choropleth",basePlotModule:e(44622),categories:["geo","noOpacity","showLegend"],meta:{}}},99841:function(K,z,e){var S=e(39898),k=e(71828),l=e(41327),T=e(90973).getTopojsonFeatures,b=e(71739).findExtremes,d=e(99636).style;K.exports={calcGeoJSON:function(s,t){for(var o=s[0].trace,r=t[o.geo],n=r._subplot,a=o.locationmode,i=o._length,u=a==="geojson-id"?l.extractTraceFeature(s):T(o,n.topojson),h=[],f=[],x=0;x<i;x++){var v=s[x],g=a==="geojson-id"?v.fOut:l.locationToFeature(a,v.loc,u);if(g){v.geojson=g,v.ct=g.properties.ct,v._polygons=l.feature2polygons(g);var y=l.computeBbox(g);h.push(y[0],y[2]),f.push(y[1],y[3])}else v.geojson=null}if(r.fitbounds==="geojson"&&a==="geojson-id"){var p=l.computeBbox(l.getTraceGeojson(o));h=[p[0],p[2]],f=[p[1],p[3]]}var m={padded:!0};o._extremes.lon=b(r.lonaxis._ax,h,m),o._extremes.lat=b(r.lataxis._ax,f,m)},plot:function(s,t,o){var r=t.layers.backplot.select(".choroplethlayer");k.makeTraceGroups(r,o,"trace choropleth").each(function(n){var a=S.select(this).selectAll("path.choroplethlocation").data(k.identity);a.enter().append("path").classed("choroplethlocation",!0),a.exit().remove(),d(s,n)})}}},81253:function(K){K.exports=function(z,e){var S,k,l,T,b,d=z.cd,s=z.xaxis,t=z.yaxis,o=[];if(e===!1)for(S=0;S<d.length;S++)d[S].selected=0;else for(S=0;S<d.length;S++)(l=(k=d[S]).ct)&&(T=s.c2p(l),b=t.c2p(l),e.contains([T,b],null,S,z)?(o.push({pointNumber:S,lon:l[0],lat:l[1]}),k.selected=1):k.selected=0);return o}},99636:function(K,z,e){var S=e(39898),k=e(7901),l=e(91424),T=e(21081);function b(d,s){var t=s[0].trace,o=s[0].node3.selectAll(".choroplethlocation"),r=t.marker||{},n=r.line||{},a=T.makeColorScaleFuncFromTrace(t);o.each(function(i){S.select(this).attr("fill",a(i.z)).call(k.stroke,i.mlc||n.color).call(l.dashLine,"",i.mlw||n.width||0).style("opacity",r.opacity)}),l.selectedPointStyle(o,t)}K.exports={style:function(d,s){s&&b(0,s)},styleOnSelect:function(d,s){var t=s[0].node3,o=s[0].trace;o.selectedpoints?l.selectedPointStyle(t.selectAll(".choroplethlocation"),o):b(0,s)}}},64496:function(K,z,e){var S=e(69568),k=e(50693),l=e(5386).fF,T=e(9012),b=e(1426).extendFlat;K.exports=b({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:b({},S.featureidkey,{}),below:{valType:"string",editType:"plot"},text:S.text,hovertext:S.hovertext,marker:{line:{color:b({},S.marker.line.color,{editType:"plot"}),width:b({},S.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:b({},S.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:b({},S.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:b({},S.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:S.hoverinfo,hovertemplate:l({},{keys:["properties"]}),showlegend:b({},T.showlegend,{dflt:!1})},k("",{cLetter:"z",editTypeOverride:"calc"}))},82004:function(K,z,e){var S=e(92770),k=e(71828),l=e(21081),T=e(91424),b=e(18214).makeBlank,d=e(41327);function s(t){var o,r=t[0].trace,n=r._opts;if(r.selectedpoints){for(var a=T.makeSelectedPointStyleFns(r),i=0;i<t.length;i++){var u=t[i];u.fOut&&(u.fOut.properties.mo2=a.selectedOpacityFn(u))}o={type:"identity",property:"mo2"}}else o=k.isArrayOrTypedArray(r.marker.opacity)?{type:"identity",property:"mo"}:r.marker.opacity;return k.extendFlat(n.fill.paint,{"fill-opacity":o}),k.extendFlat(n.line.paint,{"line-opacity":o}),n}K.exports={convert:function(t){var o=t[0].trace,r=o.visible===!0&&o._length!==0,n={layout:{visibility:"none"},paint:{}},a={layout:{visibility:"none"},paint:{}},i=o._opts={fill:n,line:a,geojson:b()};if(!r)return i;var u=d.extractTraceFeature(t);if(!u)return i;var h,f,x,v=l.makeColorScaleFuncFromTrace(o),g=o.marker,y=g.line||{};k.isArrayOrTypedArray(g.opacity)&&(h=function(_){var E=_.mo;return S(E)?+k.constrain(E,0,1):0}),k.isArrayOrTypedArray(y.color)&&(f=function(_){return _.mlc}),k.isArrayOrTypedArray(y.width)&&(x=function(_){return _.mlw});for(var p=0;p<t.length;p++){var m=t[p],w=m.fOut;if(w){var c=w.properties;c.fc=v(m.z),h&&(c.mo=h(m)),f&&(c.mlc=f(m)),x&&(c.mlw=x(m)),m.ct=c.ct,m._polygons=d.feature2polygons(w)}}var M=h?{type:"identity",property:"mo"}:g.opacity;return k.extendFlat(n.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":M}),k.extendFlat(a.paint,{"line-color":f?{type:"identity",property:"mlc"}:y.color,"line-width":x?{type:"identity",property:"mlw"}:y.width,"line-opacity":M}),n.layout.visibility="visible",a.layout.visibility="visible",i.geojson={type:"FeatureCollection",features:u},s(t),i},convertOnSelect:s}},22654:function(K,z,e){var S=e(71828),k=e(1586),l=e(64496);K.exports=function(T,b,d,s){function t(a,i){return S.coerce(T,b,l,a,i)}var o=t("locations"),r=t("z"),n=t("geojson");S.isArrayOrTypedArray(o)&&o.length&&S.isArrayOrTypedArray(r)&&r.length&&(typeof n=="string"&&n!==""||S.isPlainObject(n))?(t("featureidkey"),b._length=Math.min(o.length,r.length),t("below"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(T,b,s,t,{prefix:"",cLetter:"z"}),S.coerceSelectionMarkerOpacity(b,t)):b.visible=!1}},57516:function(K,z,e){K.exports={attributes:e(64496),supplyDefaults:e(22654),colorbar:e(61243),calc:e(38675),plot:e(7852),hoverPoints:e(42300),eventData:e(92069),selectPoints:e(81253),styleOnSelect:function(S,k){k&&k[0].trace._glTrace.updateOnSelect(k)},getBelow:function(S,k){for(var l=k.getMapLayers(),T=l.length-2;T>=0;T--){var b=l[T].id;if(typeof b=="string"&&b.indexOf("water")===0){for(var d=T+1;d<l.length;d++)if(typeof(b=l[d].id)=="string"&&b.indexOf("plotly-")===-1)return b}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e(50101),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},7852:function(K,z,e){var S=e(82004).convert,k=e(82004).convertOnSelect,l=e(77734).traceLayerPrefix;function T(d,s){this.type="choroplethmapbox",this.subplot=d,this.uid=s,this.sourceId="source-"+s,this.layerList=[["fill",l+s+"-fill"],["line",l+s+"-line"]],this.below=null}var b=T.prototype;b.update=function(d){this._update(S(d)),d[0].trace._glTrace=this},b.updateOnSelect=function(d){this._update(k(d))},b._update=function(d){var s=this.subplot,t=this.layerList,o=s.belowLookup["trace-"+this.uid];s.map.getSource(this.sourceId).setData(d.geojson),o!==this.below&&(this._removeLayers(),this._addLayers(d,o),this.below=o);for(var r=0;r<t.length;r++){var n=t[r],a=n[0],i=n[1],u=d[a];s.setOptions(i,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&s.setOptions(i,"setPaintProperty",u.paint)}},b._addLayers=function(d,s){for(var t=this.subplot,o=this.layerList,r=this.sourceId,n=0;n<o.length;n++){var a=o[n],i=a[0],u=d[i];t.addLayer({type:i,id:a[1],source:r,layout:u.layout,paint:u.paint},s)}},b._removeLayers=function(){for(var d=this.subplot.map,s=this.layerList,t=s.length-1;t>=0;t--)d.removeLayer(s[t][1])},b.dispose=function(){var d=this.subplot.map;this._removeLayers(),d.removeSource(this.sourceId)},K.exports=function(d,s){var t=s[0].trace,o=new T(d,t.uid),r=o.sourceId,n=S(s),a=o.below=d.belowLookup["trace-"+t.uid];return d.map.addSource(r,{type:"geojson",data:n.geojson}),o._addLayers(n,a),s[0].trace._glTrace=o,o}},12674:function(K,z,e){var S=e(50693),k=e(12663).axisHoverFormat,l=e(5386).fF,T=e(2418),b=e(9012),d=e(1426).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:l({editType:"calc"},{keys:["norm"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:d({},b.showlegend,{dflt:!1})};d(s,S("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){s[t]=T[t]}),s.hoverinfo=d({},b.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,K.exports=s},31371:function(K,z,e){var S=e(78803);K.exports=function(k,l){for(var T=l.u,b=l.v,d=l.w,s=Math.min(l.x.length,l.y.length,l.z.length,T.length,b.length,d.length),t=-1/0,o=1/0,r=0;r<s;r++){var n=T[r],a=b[r],i=d[r],u=Math.sqrt(n*n+a*a+i*i);t=Math.max(t,u),o=Math.min(o,u)}l._len=s,l._normMax=t,S(k,l,{vals:[o,t],containerStr:"",cLetter:"c"})}},5453:function(K,z,e){var S=e(9330).gl_cone3d,k=e(9330).gl_cone3d.createConeMesh,l=e(71828).simpleMap,T=e(81697).parseColorScale,b=e(21081).extractOpts,d=e(90060);function s(i,u){this.scene=i,this.uid=u,this.mesh=null,this.data=null}var t=s.prototype;t.handlePick=function(i){if(i.object===this.mesh){var u=i.index=i.data.index,h=this.data.x[u],f=this.data.y[u],x=this.data.z[u],v=this.data.u[u],g=this.data.v[u],y=this.data.w[u];i.traceCoordinate=[h,f,x,v,g,y,Math.sqrt(v*v+g*g+y*y)];var p=this.data.hovertext||this.data.text;return Array.isArray(p)&&p[u]!==void 0?i.textLabel=p[u]:p&&(i.textLabel=p),!0}};var o={xaxis:0,yaxis:1,zaxis:2},r={tip:1,tail:0,cm:.25,center:.5},n={tip:1,tail:1,cm:.75,center:.5};function a(i,u){var h=i.fullSceneLayout,f=i.dataScale,x={};function v(m,w){var c=h[w],M=f[o[w]];return l(m,function(_){return c.d2l(_)*M})}x.vectors=d(v(u.u,"xaxis"),v(u.v,"yaxis"),v(u.w,"zaxis"),u._len),x.positions=d(v(u.x,"xaxis"),v(u.y,"yaxis"),v(u.z,"zaxis"),u._len);var g=b(u);x.colormap=T(u),x.vertexIntensityBounds=[g.min/u._normMax,g.max/u._normMax],x.coneOffset=r[u.anchor],u.sizemode==="scaled"?x.coneSize=u.sizeref||.5:x.coneSize=u.sizeref&&u._normMax?u.sizeref/u._normMax:.5;var y=S(x),p=u.lightposition;return y.lightPosition=[p.x,p.y,p.z],y.ambient=u.lighting.ambient,y.diffuse=u.lighting.diffuse,y.specular=u.lighting.specular,y.roughness=u.lighting.roughness,y.fresnel=u.lighting.fresnel,y.opacity=u.opacity,u._pad=n[u.anchor]*y.vectorScale*y.coneScale*u._normMax,y}t.update=function(i){this.data=i;var u=a(this.scene,i);this.mesh.update(u)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},K.exports=function(i,u){var h=i.glplot.gl,f=a(i,u),x=k(h,f),v=new s(i,u.uid);return v.mesh=x,v.data=u,x._trace=v,i.glplot.add(x),v}},91750:function(K,z,e){var S=e(71828),k=e(1586),l=e(12674);K.exports=function(T,b,d,s){function t(h,f){return S.coerce(T,b,l,h,f)}var o=t("u"),r=t("v"),n=t("w"),a=t("x"),i=t("y"),u=t("z");o&&o.length&&r&&r.length&&n&&n.length&&a&&a.length&&i&&i.length&&u&&u.length?(t("sizeref"),t("sizemode"),t("anchor"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(T,b,s,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),b._length=null):b.visible=!1}},98128:function(K,z,e){K.exports={moduleType:"trace",name:"cone",basePlotModule:e(58547),categories:["gl3d","showLegend"],attributes:e(12674),supplyDefaults:e(91750),colorbar:{min:"cmin",max:"cmax"},calc:e(31371),plot:e(5453),eventData:function(S,k){return S.norm=k.traceCoordinate[6],S},meta:{}}},70600:function(K,z,e){var S=e(21606),k=e(82196),l=e(12663),T=l.axisHoverFormat,b=l.descriptionOnlyNumbers,d=e(50693),s=e(79952).P,t=e(41940),o=e(1426).extendFlat,r=e(74808),n=r.COMPARISON_OPS2,a=r.INTERVAL_OPS,i=k.line;K.exports=o({z:S.z,x:S.x,x0:S.x0,dx:S.dx,y:S.y,y0:S.y0,dy:S.dy,xperiod:S.xperiod,yperiod:S.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:S.xperiodalignment,yperiodalignment:S.yperiodalignment,text:S.text,hovertext:S.hovertext,transpose:S.transpose,xtype:S.xtype,ytype:S.ytype,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:S.hovertemplate,texttemplate:o({},S.texttemplate,{}),textfont:o({},S.textfont,{}),hoverongaps:S.hoverongaps,connectgaps:o({},S.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:b("contour label")},operation:{valType:"enumerated",values:[].concat(n).concat(a),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:o({},i.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:s,smoothing:o({},i.smoothing,{}),editType:"plot"}},d("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},27529:function(K,z,e){var S=e(21081),k=e(90757),l=e(18670),T=e(53572);K.exports=function(b,d){var s=k(b,d),t=s[0].z;l(d,t);var o,r=d.contours,n=S.extractOpts(d);if(r.coloring==="heatmap"&&n.auto&&d.autocontour===!1){var a=r.start,i=T(r),u=r.size||1,h=Math.floor((i-a)/u)+1;isFinite(u)||(u=1,h=1);var f=a-u/2;o=[f,f+h*u]}else o=t;return S.calc(b,d,{vals:o,cLetter:"z"}),s}},20083:function(K){K.exports=function(z,e){var S,k=z[0],l=k.z;switch(e.type){case"levels":var T=Math.min(l[0][0],l[0][1]);for(S=0;S<z.length;S++){var b=z[S];b.prefixBoundary=!b.edgepaths.length&&(T>b.level||b.starts.length&&T===b.level)}break;case"constraint":if(k.prefixBoundary=!1,k.edgepaths.length)return;var d=k.x.length,s=k.y.length,t=-1/0,o=1/0;for(S=0;S<s;S++)o=Math.min(o,l[S][0]),o=Math.min(o,l[S][d-1]),t=Math.max(t,l[S][0]),t=Math.max(t,l[S][d-1]);for(S=1;S<d-1;S++)o=Math.min(o,l[0][S]),o=Math.min(o,l[s-1][S]),t=Math.max(t,l[0][S]),t=Math.max(t,l[s-1][S]);var r,n,a=e.value;switch(e._operation){case">":a>t&&(k.prefixBoundary=!0);break;case"<":(a<o||k.starts.length&&a===o)&&(k.prefixBoundary=!0);break;case"[]":r=Math.min(a[0],a[1]),((n=Math.max(a[0],a[1]))<o||r>t||k.starts.length&&n===o)&&(k.prefixBoundary=!0);break;case"][":r=Math.min(a[0],a[1]),n=Math.max(a[0],a[1]),r<o&&n>t&&(k.prefixBoundary=!0)}}}},90654:function(K,z,e){var S=e(21081),k=e(86068),l=e(53572);K.exports={min:"zmin",max:"zmax",calc:function(T,b,d){var s=b.contours,t=b.line,o=s.size||1,r=s.coloring,n=k(b,{isColorbar:!0});if(r==="heatmap"){var a=S.extractOpts(b);d._fillgradient=a.reversescale?S.flipScale(a.colorscale):a.colorscale,d._zrange=[a.min,a.max]}else r==="fill"&&(d._fillcolor=n);d._line={color:r==="lines"?n:t.color,width:s.showlines!==!1?t.width:0,dash:t.dash},d._levels={start:s.start,end:l(s),size:o}}}},36914:function(K){K.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},83179:function(K,z,e){var S=e(92770),k=e(14523),l=e(7901),T=l.addOpacity,b=l.opacity,d=e(74808),s=d.CONSTRAINT_REDUCTION,t=d.COMPARISON_OPS2;K.exports=function(o,r,n,a,i,u){var h,f,x,v=r.contours,g=n("contours.operation");v._operation=s[g],function(y,p){var m;t.indexOf(p.operation)===-1?(y("contours.value",[0,1]),Array.isArray(p.value)?p.value.length>2?p.value=p.value.slice(2):p.length===0?p.value=[0,1]:p.length<2?(m=parseFloat(p.value[0]),p.value=[m,m+1]):p.value=[parseFloat(p.value[0]),parseFloat(p.value[1])]:S(p.value)&&(m=parseFloat(p.value),p.value=[m,m+1])):(y("contours.value",0),S(p.value)||(Array.isArray(p.value)?p.value=parseFloat(p.value[0]):p.value=0))}(n,v),g==="="?h=v.showlines=!0:(h=n("contours.showlines"),x=n("fillcolor",T((o.line||{}).color||i,.5))),h&&(f=n("line.color",x&&b(x)?T(r.fillcolor,1):i),n("line.width",2),n("line.dash")),n("line.smoothing"),k(n,a,f,u)}},64237:function(K,z,e){var S=e(74808),k=e(92770);function l(d,s){var t,o=Array.isArray(s);function r(n){return k(n)?+n:null}return S.COMPARISON_OPS2.indexOf(d)!==-1?t=r(o?s[0]:s):S.INTERVAL_OPS.indexOf(d)!==-1?t=o?[r(s[0]),r(s[1])]:[r(s),r(s)]:S.SET_OPS.indexOf(d)!==-1&&(t=o?s.map(r):[r(s)]),t}function T(d){return function(s){s=l(d,s);var t=Math.min(s[0],s[1]),o=Math.max(s[0],s[1]);return{start:t,end:o,size:o-t}}}function b(d){return function(s){return{start:s=l(d,s),end:1/0,size:1/0}}}K.exports={"[]":T("[]"),"][":T("]["),">":b(">"),"<":b("<"),"=":b("=")}},67217:function(K){K.exports=function(z,e,S,k){var l=k("contours.start"),T=k("contours.end"),b=l===!1||T===!1,d=S("contours.size");!(b?e.autocontour=!0:S("autocontour",!1))&&d||S("ncontours")}},84857:function(K,z,e){var S=e(71828);function k(l){return S.extendFlat({},l,{edgepaths:S.extendDeep([],l.edgepaths),paths:S.extendDeep([],l.paths),starts:S.extendDeep([],l.starts)})}K.exports=function(l,T){var b,d,s,t=function(n){return n.reverse()},o=function(n){return n};switch(T){case"=":case"<":return l;case">":for(l.length!==1&&S.warn("Contour data invalid for the specified inequality operation."),d=l[0],b=0;b<d.edgepaths.length;b++)d.edgepaths[b]=t(d.edgepaths[b]);for(b=0;b<d.paths.length;b++)d.paths[b]=t(d.paths[b]);for(b=0;b<d.starts.length;b++)d.starts[b]=t(d.starts[b]);return l;case"][":var r=t;t=o,o=r;case"[]":for(l.length!==2&&S.warn("Contour data invalid for the specified inequality range operation."),d=k(l[0]),s=k(l[1]),b=0;b<d.edgepaths.length;b++)d.edgepaths[b]=t(d.edgepaths[b]);for(b=0;b<d.paths.length;b++)d.paths[b]=t(d.paths[b]);for(b=0;b<d.starts.length;b++)d.starts[b]=t(d.starts[b]);for(;s.edgepaths.length;)d.edgepaths.push(o(s.edgepaths.shift()));for(;s.paths.length;)d.paths.push(o(s.paths.shift()));for(;s.starts.length;)d.starts.push(o(s.starts.shift()));return[d]}}},13031:function(K,z,e){var S=e(71828),k=e(67684),l=e(73927),T=e(83179),b=e(67217),d=e(8724),s=e(58623),t=e(70600);K.exports=function(o,r,n,a){function i(h,f){return S.coerce(o,r,t,h,f)}if(k(o,r,i,a)){l(o,r,a,i),i("xhoverformat"),i("yhoverformat"),i("text"),i("hovertext"),i("hoverongaps"),i("hovertemplate");var u=i("contours.type")==="constraint";i("connectgaps",S.isArray1D(r.z)),u?T(o,r,i,a,n):(b(o,r,i,function(h){return S.coerce2(o,r,t,h)}),d(o,r,i,a)),r.contours&&r.contours.coloring==="heatmap"&&s(i,a)}else r.visible=!1}},87558:function(K,z,e){var S=e(71828),k=e(64237),l=e(53572);K.exports=function(T,b,d){for(var s=T.type==="constraint"?k[T._operation](T.value):T,t=s.size,o=[],r=l(s),n=d.trace._carpetTrace,a=n?{xaxis:n.aaxis,yaxis:n.baxis,x:d.a,y:d.b}:{xaxis:b.xaxis,yaxis:b.yaxis,x:d.x,y:d.y},i=s.start;i<r;i+=t)if(o.push(S.extendFlat({level:i,crossings:{},starts:[],edgepaths:[],paths:[],z:d.z,smoothing:d.trace.line.smoothing},a)),o.length>1e3){S.warn("Too many contours, clipping at 1000",T);break}return o}},53572:function(K){K.exports=function(z){return z.end+z.size/1e6}},81696:function(K,z,e){var S=e(71828),k=e(36914);function l(d,s,t,o){return Math.abs(d[0]-s[0])<t&&Math.abs(d[1]-s[1])<o}function T(d,s,t,o,r){var n,a=s.join(","),i=d.crossings[a],u=function(ne,re,ie){var se=0,ge=0;return ne>20&&re?ne===208||ne===1114?se=ie[0]===0?1:-1:ge=ie[1]===0?1:-1:k.BOTTOMSTART.indexOf(ne)!==-1?ge=1:k.LEFTSTART.indexOf(ne)!==-1?se=1:k.TOPSTART.indexOf(ne)!==-1?ge=-1:se=-1,[se,ge]}(i,t,s),h=[b(d,s,[-u[0],-u[1]])],f=d.z.length,x=d.z[0].length,v=s.slice(),g=u.slice();for(n=0;n<1e4;n++){if(i>20?(i=k.CHOOSESADDLE[i][(u[0]||u[1])<0?0:1],d.crossings[a]=k.SADDLEREMAINDER[i]):delete d.crossings[a],!(u=k.NEWDELTA[i])){S.log("Found bad marching index:",i,s,d.level);break}h.push(b(d,s,u)),s[0]+=u[0],s[1]+=u[1],a=s.join(","),l(h[h.length-1],h[h.length-2],o,r)&&h.pop();var y=u[0]&&(s[0]<0||s[0]>x-2)||u[1]&&(s[1]<0||s[1]>f-2);if(s[0]===v[0]&&s[1]===v[1]&&u[0]===g[0]&&u[1]===g[1]||t&&y)break;i=d.crossings[a]}n===1e4&&S.log("Infinite loop in contour?");var p,m,w,c,M,_,E,L,C,O,I,N,R,V,F,D=l(h[0],h[h.length-1],o,r),U=0,j=.2*d.smoothing,J=[],X=0;for(n=1;n<h.length;n++)N=h[n],R=h[n-1],V=N[2]-R[2],F=N[3]-R[3],U+=E=Math.sqrt(V*V+F*F),J.push(E);var Z=U/J.length*j;function Y(ne){return h[ne%h.length]}for(n=h.length-2;n>=X;n--)if((p=J[n])<Z){for(w=0,m=n-1;m>=X&&p+J[m]<Z;m--)p+=J[m];if(D&&n===h.length-2)for(w=0;w<m&&p+J[w]<Z;w++)p+=J[w];M=n-m+w+1,_=Math.floor((n+m+w+2)/2),c=D||n!==h.length-2?D||m!==-1?M%2?Y(_):[(Y(_)[0]+Y(_+1)[0])/2,(Y(_)[1]+Y(_+1)[1])/2]:h[0]:h[h.length-1],h.splice(m+1,n-m+1,c),n=m+1,w&&(X=w),D&&(n===h.length-2?h[w]=h[h.length-1]:n===0&&(h[h.length-1]=h[0]))}for(h.splice(0,X),n=0;n<h.length;n++)h[n].length=2;if(!(h.length<2))if(D)h.pop(),d.paths.push(h);else{t||S.log("Unclosed interior contour?",d.level,v.join(","),h.join("L"));var W=!1;for(L=0;L<d.edgepaths.length;L++)if(O=d.edgepaths[L],!W&&l(O[0],h[h.length-1],o,r)){h.pop(),W=!0;var Q=!1;for(C=0;C<d.edgepaths.length;C++)if(l((I=d.edgepaths[C])[I.length-1],h[0],o,r)){Q=!0,h.shift(),d.edgepaths.splice(L,1),C===L?d.paths.push(h.concat(I)):(C>L&&C--,d.edgepaths[C]=I.concat(h,O));break}Q||(d.edgepaths[L]=h.concat(O))}for(L=0;L<d.edgepaths.length&&!W;L++)l((O=d.edgepaths[L])[O.length-1],h[0],o,r)&&(h.shift(),d.edgepaths[L]=O.concat(h),W=!0);W||d.edgepaths.push(h)}}function b(d,s,t){var o=s[0]+Math.max(t[0],0),r=s[1]+Math.max(t[1],0),n=d.z[r][o],a=d.xaxis,i=d.yaxis;if(t[1]){var u=(d.level-n)/(d.z[r][o+1]-n),h=(u!==1?(1-u)*a.c2l(d.x[o]):0)+(u!==0?u*a.c2l(d.x[o+1]):0);return[a.c2p(a.l2c(h),!0),i.c2p(d.y[r],!0),o+u,r]}var f=(d.level-n)/(d.z[r+1][o]-n),x=(f!==1?(1-f)*i.c2l(d.y[r]):0)+(f!==0?f*i.c2l(d.y[r+1]):0);return[a.c2p(d.x[o],!0),i.c2p(i.l2c(x),!0),o,r+f]}K.exports=function(d,s,t){var o,r,n,a;for(s=s||.01,t=t||.01,r=0;r<d.length;r++){for(n=d[r],a=0;a<n.starts.length;a++)T(n,n.starts[a],"edge",s,t);for(o=0;Object.keys(n.crossings).length&&o<1e4;)o++,T(n,Object.keys(n.crossings)[0].split(",").map(Number),void 0,s,t);o===1e4&&S.log("Infinite loop in contour?")}}},52421:function(K,z,e){var S=e(7901),k=e(46248);K.exports=function(l,T,b,d,s){s||(s={}),s.isContour=!0;var t=k(l,T,b,d,s);return t&&t.forEach(function(o){var r=o.trace;r.contours.type==="constraint"&&(r.fillcolor&&S.opacity(r.fillcolor)?o.color=S.addOpacity(r.fillcolor,1):r.contours.showlines&&S.opacity(r.line.color)&&(o.color=S.addOpacity(r.line.color,1)))}),t}},99442:function(K,z,e){K.exports={attributes:e(70600),supplyDefaults:e(13031),calc:e(27529),plot:e(29854).plot,style:e(84426),colorbar:e(90654),hoverPoints:e(52421),moduleType:"trace",name:"contour",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},14523:function(K,z,e){var S=e(71828);K.exports=function(k,l,T,b){if(b||(b={}),k("contours.showlabels")){var d=l.font;S.coerceFont(k,"contours.labelfont",{family:d.family,size:d.size,color:T}),k("contours.labelformat")}b.hasHover!==!1&&k("zhoverformat")}},86068:function(K,z,e){var S=e(39898),k=e(21081),l=e(53572);K.exports=function(T){var b=T.contours,d=b.start,s=l(b),t=b.size||1,o=Math.floor((s-d)/t)+1,r=b.coloring==="lines"?0:1,n=k.extractOpts(T);isFinite(t)||(t=1,o=1);var a,i,u=n.reversescale?k.flipScale(n.colorscale):n.colorscale,h=u.length,f=new Array(h),x=new Array(h);if(b.coloring==="heatmap"){var v=n.min,g=n.max;for(i=0;i<h;i++)a=u[i],f[i]=a[0]*(g-v)+v,x[i]=a[1];var y=S.extent([v,g,b.start,b.start+t*(o-1)]),p=y[v<g?0:1],m=y[v<g?1:0];p!==v&&(f.splice(0,0,p),x.splice(0,0,x[0])),m!==g&&(f.push(m),x.push(x[x.length-1]))}else for(i=0;i<h;i++)a=u[i],f[i]=(a[0]*(o+r-1)-r/2)*t+d,x[i]=a[1];return k.makeColorScaleFunc({domain:f,range:x},{noNumericCheck:!0})}},87678:function(K,z,e){var S=e(36914);function k(l,T){var b=(T[0][0]>l?0:1)+(T[0][1]>l?0:2)+(T[1][1]>l?0:4)+(T[1][0]>l?0:8);return b===5||b===10?l>(T[0][0]+T[0][1]+T[1][0]+T[1][1])/4?b===5?713:1114:b===5?104:208:b===15?0:b}K.exports=function(l){var T,b,d,s,t,o,r,n,a,i=l[0].z,u=i.length,h=i[0].length,f=u===2||h===2;for(b=0;b<u-1;b++)for(s=[],b===0&&(s=s.concat(S.BOTTOMSTART)),b===u-2&&(s=s.concat(S.TOPSTART)),T=0;T<h-1;T++)for(d=s.slice(),T===0&&(d=d.concat(S.LEFTSTART)),T===h-2&&(d=d.concat(S.RIGHTSTART)),t=T+","+b,o=[[i[b][T],i[b][T+1]],[i[b+1][T],i[b+1][T+1]]],a=0;a<l.length;a++)(r=k((n=l[a]).level,o))&&(n.crossings[t]=r,d.indexOf(r)!==-1&&(n.starts.push([T,b]),f&&d.indexOf(r,d.indexOf(r)+1)!==-1&&n.starts.push([T,b])))}},29854:function(K,z,e){var S=e(39898),k=e(71828),l=e(91424),T=e(21081),b=e(63893),d=e(89298),s=e(21994),t=e(50347),o=e(87678),r=e(81696),n=e(87558),a=e(84857),i=e(20083),u=e(36914),h=u.LABELOPTIMIZER;function f(g,y){var p,m,w,c,M,_,E,L="",C=0,O=g.edgepaths.map(function(D,U){return U}),I=!0;function N(D){return Math.abs(D[1]-y[2][1])<.01}function R(D){return Math.abs(D[0]-y[0][0])<.01}function V(D){return Math.abs(D[0]-y[2][0])<.01}for(;O.length;){for(_=l.smoothopen(g.edgepaths[C],g.smoothing),L+=I?_:_.replace(/^M/,"L"),O.splice(O.indexOf(C),1),p=g.edgepaths[C][g.edgepaths[C].length-1],c=-1,w=0;w<4;w++){if(!p){k.log("Missing end?",C,g);break}for(E=p,Math.abs(E[1]-y[0][1])<.01&&!V(p)?m=y[1]:R(p)?m=y[0]:N(p)?m=y[3]:V(p)&&(m=y[2]),M=0;M<g.edgepaths.length;M++){var F=g.edgepaths[M][0];Math.abs(p[0]-m[0])<.01?Math.abs(p[0]-F[0])<.01&&(F[1]-p[1])*(m[1]-F[1])>=0&&(m=F,c=M):Math.abs(p[1]-m[1])<.01?Math.abs(p[1]-F[1])<.01&&(F[0]-p[0])*(m[0]-F[0])>=0&&(m=F,c=M):k.log("endpt to newendpt is not vert. or horz.",p,m,F)}if(p=m,c>=0)break;L+="L"+m}if(c===g.edgepaths.length){k.log("unclosed perimeter path");break}C=c,(I=O.indexOf(C)===-1)&&(C=O[0],L+="Z")}for(C=0;C<g.paths.length;C++)L+=l.smoothclosed(g.paths[C],g.smoothing);return L}function x(g,y,p,m){var w=y.width/2,c=y.height/2,M=g.x,_=g.y,E=g.theta,L=Math.cos(E)*w,C=Math.sin(E)*w,O=(M>m.center?m.right-M:M-m.left)/(L+Math.abs(Math.sin(E)*c)),I=(_>m.middle?m.bottom-_:_-m.top)/(Math.abs(C)+Math.cos(E)*c);if(O<1||I<1)return 1/0;var N=h.EDGECOST*(1/(O-1)+1/(I-1));N+=h.ANGLECOST*E*E;for(var R=M-L,V=_-C,F=M+L,D=_+C,U=0;U<p.length;U++){var j=p[U],J=Math.cos(j.theta)*j.width/2,X=Math.sin(j.theta)*j.width/2,Z=2*k.segmentDistance(R,V,F,D,j.x-J,j.y-X,j.x+J,j.y+X)/(y.height+j.height),Y=j.level===y.level,W=Y?h.SAMELEVELDISTANCE:1;if(Z<=W)return 1/0;N+=h.NEIGHBORCOST*(Y?h.SAMELEVELFACTOR:1)/(Z-W)}return N}function v(g){var y,p,m=g.trace._emptypoints,w=[],c=g.z.length,M=g.z[0].length,_=[];for(y=0;y<M;y++)_.push(1);for(y=0;y<c;y++)w.push(_.slice());for(y=0;y<m.length;y++)w[(p=m[y])[0]][p[1]]=0;return g.zmask=w,w}z.plot=function(g,y,p,m){var w=y.xaxis,c=y.yaxis;k.makeTraceGroups(m,p,"contour").each(function(M){var _=S.select(this),E=M[0],L=E.trace,C=E.x,O=E.y,I=L.contours,N=n(I,y,E),R=k.ensureSingle(_,"g","heatmapcoloring"),V=[];I.coloring==="heatmap"&&(V=[M]),t(g,y,V,R),o(N),r(N);var F=w.c2p(C[0],!0),D=w.c2p(C[C.length-1],!0),U=c.c2p(O[0],!0),j=c.c2p(O[O.length-1],!0),J=[[F,j],[D,j],[D,U],[F,U]],X=N;I.type==="constraint"&&(X=a(N,I._operation)),function(Z,Y,W){var Q=k.ensureSingle(Z,"g","contourbg").selectAll("path").data(W.coloring==="fill"?[0]:[]);Q.enter().append("path"),Q.exit().remove(),Q.attr("d","M"+Y.join("L")+"Z").style("stroke","none")}(_,J,I),function(Z,Y,W,Q){var ne=Q.coloring==="fill"||Q.type==="constraint"&&Q._operation!=="=",re="M"+W.join("L")+"Z";ne&&i(Y,Q);var ie=k.ensureSingle(Z,"g","contourfill").selectAll("path").data(ne?Y:[]);ie.enter().append("path"),ie.exit().remove(),ie.each(function(se){var ge=(se.prefixBoundary?re:"")+f(se,W);ge?S.select(this).attr("d",ge).style("stroke","none"):S.select(this).remove()})}(_,X,J,I),function(Z,Y,W,Q,ne){var re=W._context.staticPlot,ie=k.ensureSingle(Z,"g","contourlines"),se=ne.showlines!==!1,ge=ne.showlabels,ue=se&&ge,ce=z.createLines(ie,se||ge,Y,re),le=z.createLineClip(ie,ue,W,Q.trace.uid),de=Z.selectAll("g.contourlabels").data(ge?[0]:[]);if(de.exit().remove(),de.enter().append("g").classed("contourlabels",!0),ge){var Ce=[],xe=[];k.clearLocationCache();var _e=z.labelFormatter(W,Q),we=l.tester.append("text").attr("data-notex",1).call(l.font,ne.labelfont),Ae=Y[0].xaxis,$=Y[0].yaxis,oe=Ae._length,pe=$._length,ye=Ae.range,ke=$.range,De=k.aggNums(Math.min,null,Q.x),Pe=k.aggNums(Math.max,null,Q.x),Re=k.aggNums(Math.min,null,Q.y),fe=k.aggNums(Math.max,null,Q.y),ve=Math.max(Ae.c2p(De,!0),0),Te=Math.min(Ae.c2p(Pe,!0),oe),ze=Math.max($.c2p(fe,!0),0),He=Math.min($.c2p(Re,!0),pe),Ve={};ye[0]<ye[1]?(Ve.left=ve,Ve.right=Te):(Ve.left=Te,Ve.right=ve),ke[0]<ke[1]?(Ve.top=ze,Ve.bottom=He):(Ve.top=He,Ve.bottom=ze),Ve.middle=(Ve.top+Ve.bottom)/2,Ve.center=(Ve.left+Ve.right)/2,Ce.push([[Ve.left,Ve.top],[Ve.right,Ve.top],[Ve.right,Ve.bottom],[Ve.left,Ve.bottom]]);var nt=Math.sqrt(oe*oe+pe*pe),tt=u.LABELDISTANCE*nt/Math.max(1,Y.length/u.LABELINCREASE);ce.each(function(ot){var pt=z.calcTextOpts(ot.level,_e,we,W);S.select(this).selectAll("path").each(function(){var Tt=k.getVisibleSegment(this,Ve,pt.height/2);if(Tt&&!(Tt.len<(pt.width+pt.height)*u.LABELMIN))for(var yt=Math.min(Math.ceil(Tt.len/tt),u.LABELMAX),dt=0;dt<yt;dt++){var Pt=z.findBestTextLocation(this,Tt,pt,xe,Ve);if(!Pt)break;z.addLabelData(Pt,pt,xe,Ce)}})}),we.remove(),z.drawLabels(de,xe,W,le,ue?Ce:null)}ge&&!se&&ce.remove()}(_,N,g,E,I),function(Z,Y,W,Q,ne){var re=Q.trace,ie=W._fullLayout._clips,se="clip"+re.uid,ge=ie.selectAll("#"+se).data(re.connectgaps?[]:[0]);if(ge.enter().append("clipPath").classed("contourclip",!0).attr("id",se),ge.exit().remove(),re.connectgaps===!1){var ue={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:Y.xaxis,yaxis:Y.yaxis,x:Q.x,y:Q.y,z:v(Q),smoothing:0};o([ue]),r([ue]),i([ue],{type:"levels"}),k.ensureSingle(ge,"path","").attr("d",(ue.prefixBoundary?"M"+ne.join("L")+"Z":"")+f(ue,ne))}else se=null;l.setClipUrl(Z,se,W)}(_,y,g,E,J)})},z.createLines=function(g,y,p,m){var w=p[0].smoothing,c=g.selectAll("g.contourlevel").data(y?p:[]);if(c.exit().remove(),c.enter().append("g").classed("contourlevel",!0),y){var M=c.selectAll("path.openline").data(function(E){return E.pedgepaths||E.edgepaths});M.exit().remove(),M.enter().append("path").classed("openline",!0),M.attr("d",function(E){return l.smoothopen(E,w)}).style("stroke-miterlimit",1).style("vector-effect",m?"none":"non-scaling-stroke");var _=c.selectAll("path.closedline").data(function(E){return E.ppaths||E.paths});_.exit().remove(),_.enter().append("path").classed("closedline",!0),_.attr("d",function(E){return l.smoothclosed(E,w)}).style("stroke-miterlimit",1).style("vector-effect",m?"none":"non-scaling-stroke")}return c},z.createLineClip=function(g,y,p,m){var w=y?"clipline"+m:null,c=p._fullLayout._clips.selectAll("#"+w).data(y?[0]:[]);return c.exit().remove(),c.enter().append("clipPath").classed("contourlineclip",!0).attr("id",w),l.setClipUrl(g,w,p),c},z.labelFormatter=function(g,y){var p=g._fullLayout,m=y.trace,w=m.contours,c={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(w.labelformat)c.tickformat=w.labelformat,s(c,p);else{var M=T.extractOpts(m);if(M&&M.colorbar&&M.colorbar._axis)c=M.colorbar._axis;else{if(w.type==="constraint"){var _=w.value;Array.isArray(_)?c.range=[_[0],_[_.length-1]]:c.range=[_,_]}else c.range=[w.start,w.end],c.nticks=(w.end-w.start)/w.size;c.range[0]===c.range[1]&&(c.range[1]+=c.range[0]||1),c.nticks||(c.nticks=1e3),s(c,p),d.prepTicks(c),c._tmin=null,c._tmax=null}}return function(E){return d.tickText(c,E).text}},z.calcTextOpts=function(g,y,p,m){var w=y(g);p.text(w).call(b.convertToTspans,m);var c=p.node(),M=l.bBox(c,!0);return{text:w,width:M.width,height:M.height,fontSize:+c.style["font-size"].replace("px",""),level:g,dy:(M.top+M.bottom)/2}},z.findBestTextLocation=function(g,y,p,m,w){var c,M,_,E,L,C=p.width;y.isClosed?(M=y.len/h.INITIALSEARCHPOINTS,c=y.min+M/2,_=y.max):(M=(y.len-C)/(h.INITIALSEARCHPOINTS+1),c=y.min+M+C/2,_=y.max-(M+C)/2);for(var O=1/0,I=0;I<h.ITERATIONS;I++){for(var N=c;N<_;N+=M){var R=k.getTextLocation(g,y.total,N,C),V=x(R,p,m,w);V<O&&(O=V,L=R,E=N)}if(O>2*h.MAXCOST)break;I&&(M/=2),_=(c=E-M/2)+1.5*M}if(O<=h.MAXCOST)return L},z.addLabelData=function(g,y,p,m){var w=y.fontSize,c=y.width+w/3,M=Math.max(0,y.height-w/3),_=g.x,E=g.y,L=g.theta,C=Math.sin(L),O=Math.cos(L),I=function(R,V){return[_+R*O-V*C,E+R*C+V*O]},N=[I(-c/2,-M/2),I(-c/2,M/2),I(c/2,M/2),I(c/2,-M/2)];p.push({text:y.text,x:_,y:E,dy:y.dy,theta:L,level:y.level,width:c,height:M}),m.push(N)},z.drawLabels=function(g,y,p,m,w){var c=g.selectAll("text").data(y,function(E){return E.text+","+E.x+","+E.y+","+E.theta});if(c.exit().remove(),c.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(E){var L=E.x+Math.sin(E.theta)*E.dy,C=E.y-Math.cos(E.theta)*E.dy;S.select(this).text(E.text).attr({x:L,y:C,transform:"rotate("+180*E.theta/Math.PI+" "+L+" "+C+")"}).call(b.convertToTspans,p)}),w){for(var M="",_=0;_<w.length;_++)M+="M"+w[_].join("L")+"Z";k.ensureSingle(m,"path","").attr("d",M)}}},18670:function(K,z,e){var S=e(89298),k=e(71828);function l(T,b,d){var s={type:"linear",range:[T,b]};return S.autoTicks(s,(b-T)/(d||15)),s}K.exports=function(T,b){var d=T.contours;if(T.autocontour){var s=T.zmin,t=T.zmax;(T.zauto||s===void 0)&&(s=k.aggNums(Math.min,null,b)),(T.zauto||t===void 0)&&(t=k.aggNums(Math.max,null,b));var o=l(s,t,T.ncontours);d.size=o.dtick,d.start=S.tickFirst(o),o.range.reverse(),d.end=S.tickFirst(o),d.start===s&&(d.start+=d.size),d.end===t&&(d.end-=d.size),d.start>d.end&&(d.start=d.end=(d.start+d.end)/2),T._input.contours||(T._input.contours={}),k.extendFlat(T._input.contours,{start:d.start,end:d.end,size:d.size}),T._input.autocontour=!0}else if(d.type!=="constraint"){var r,n=d.start,a=d.end,i=T._input.contours;n>a&&(d.start=i.start=a,a=d.end=i.end=n,n=d.start),d.size>0||(r=n===a?1:l(n,a,T.ncontours).dtick,i.size=d.size=r)}}},84426:function(K,z,e){var S=e(39898),k=e(91424),l=e(70035),T=e(86068);K.exports=function(b){var d=S.select(b).selectAll("g.contour");d.style("opacity",function(s){return s[0].trace.opacity}),d.each(function(s){var t=S.select(this),o=s[0].trace,r=o.contours,n=o.line,a=r.size||1,i=r.start,u=r.type==="constraint",h=!u&&r.coloring==="lines",f=!u&&r.coloring==="fill",x=h||f?T(o):null;t.selectAll("g.contourlevel").each(function(y){S.select(this).selectAll("path").call(k.lineGroupStyle,n.width,h?x(y.level):n.color,n.dash)});var v=r.labelfont;if(t.selectAll("g.contourlabels text").each(function(y){k.font(S.select(this),{family:v.family,size:v.size,color:v.color||(h?x(y.level):n.color)})}),u)t.selectAll("g.contourfill path").style("fill",o.fillcolor);else if(f){var g;t.selectAll("g.contourfill path").style("fill",function(y){return g===void 0&&(g=y.level),x(y.level+.5*a)}),g===void 0&&(g=i),t.selectAll("g.contourbg path").style("fill",x(g-.5*a))}}),l(b)}},8724:function(K,z,e){var S=e(1586),k=e(14523);K.exports=function(l,T,b,d,s){var t,o=b("contours.coloring"),r="";o==="fill"&&(t=b("contours.showlines")),t!==!1&&(o!=="lines"&&(r=b("line.color","#000")),b("line.width",.5),b("line.dash")),o!=="none"&&(l.showlegend!==!0&&(T.showlegend=!1),T._dfltShowLegend=!1,S(l,T,d,b,{prefix:"",cLetter:"z"})),b("line.smoothing"),k(b,d,r,s)}},88085:function(K,z,e){var S=e(21606),k=e(70600),l=e(50693),T=e(1426).extendFlat,b=k.contours;K.exports=T({carpet:{valType:"string",editType:"calc"},z:S.z,a:S.x,a0:S.x0,da:S.dx,b:S.y,b0:S.y0,db:S.dy,text:S.text,hovertext:S.hovertext,transpose:S.transpose,atype:S.xtype,btype:S.ytype,fillcolor:k.fillcolor,autocontour:k.autocontour,ncontours:k.ncontours,contours:{type:b.type,start:b.start,end:b.end,size:b.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:b.showlines,showlabels:b.showlabels,labelfont:b.labelfont,labelformat:b.labelformat,operation:b.operation,value:b.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:k.line.color,width:k.line.width,dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},transforms:void 0},l("",{cLetter:"z",autoColorDflt:!1}))},59885:function(K,z,e){var S=e(78803),k=e(71828),l=e(68296),T=e(4742),b=e(824),d=e(43907),s=e(70769),t=e(75005),o=e(22882),r=e(18670);K.exports=function(n,a){var i=a._carpetTrace=o(n,a);if(i&&i.visible&&i.visible!=="legendonly"){if(!a.a||!a.b){var u=n.data[i.index],h=n.data[a.index];h.a||(h.a=u.a),h.b||(h.b=u.b),t(h,a,a._defaultColor,n._fullLayout)}var f=function(x,v){var g,y,p,m,w,c,M,_=v._carpetTrace,E=_.aaxis,L=_.baxis;E._minDtick=0,L._minDtick=0,k.isArray1D(v.z)&&l(v,E,L,"a","b",["z"]),g=v._a=v._a||v.a,m=v._b=v._b||v.b,g=g?E.makeCalcdata(v,"_a"):[],m=m?L.makeCalcdata(v,"_b"):[],y=v.a0||0,p=v.da||1,w=v.b0||0,c=v.db||1,M=v._z=T(v._z||v.z,v.transpose),v._emptypoints=d(M),b(M,v._emptypoints);var C=k.maxRowLength(M),O=v.xtype==="scaled"?"":g,I=s(v,O,y,p,C,E),N=v.ytype==="scaled"?"":m,R={a:I,b:s(v,N,w,c,M.length,L),z:M};return v.contours.type==="levels"&&v.contours.coloring!=="none"&&S(x,v,{vals:M,containerStr:"",cLetter:"z"}),[R]}(n,a);return r(a,a._z),f}}},75005:function(K,z,e){var S=e(71828),k=e(67684),l=e(88085),T=e(83179),b=e(67217),d=e(8724);K.exports=function(s,t,o,r){function n(a,i){return S.coerce(s,t,l,a,i)}if(n("carpet"),s.a&&s.b){if(!k(s,t,n,r,"a","b"))return void(t.visible=!1);n("text"),n("contours.type")==="constraint"?T(s,t,n,r,o,{hasHover:!1}):(b(s,t,n,function(a){return S.coerce2(s,t,l,a)}),d(s,t,n,r,{hasHover:!1}))}else t._defaultColor=o,t._length=null}},93740:function(K,z,e){K.exports={attributes:e(88085),supplyDefaults:e(75005),colorbar:e(90654),calc:e(59885),plot:e(51048),style:e(84426),moduleType:"trace",name:"contourcarpet",basePlotModule:e(93612),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},51048:function(K,z,e){var S=e(39898),k=e(27669),l=e(67961),T=e(91424),b=e(71828),d=e(87678),s=e(81696),t=e(29854),o=e(36914),r=e(84857),n=e(87558),a=e(20083),i=e(22882),u=e(4536);function h(v,g,y){var p=v.getPointAtLength(g),m=v.getPointAtLength(y),w=m.x-p.x,c=m.y-p.y,M=Math.sqrt(w*w+c*c);return[w/M,c/M]}function f(v){var g=Math.sqrt(v[0]*v[0]+v[1]*v[1]);return[v[0]/g,v[1]/g]}function x(v,g){var y=Math.abs(v[0]*g[0]+v[1]*g[1]);return Math.sqrt(1-y*y)/y}K.exports=function(v,g,y,p){var m=g.xaxis,w=g.yaxis;b.makeTraceGroups(p,y,"contour").each(function(c){var M=S.select(this),_=c[0],E=_.trace,L=E._carpetTrace=i(v,E),C=v.calcdata[L.index][0];if(L.visible&&L.visible!=="legendonly"){var O=_.a,I=_.b,N=E.contours,R=n(N,g,_),V=N.type==="constraint",F=N._operation,D=V?F==="="?"lines":"fill":N.coloring,U=[[O[0],I[I.length-1]],[O[O.length-1],I[I.length-1]],[O[O.length-1],I[0]],[O[0],I[0]]];d(R);var j=1e-8*(O[O.length-1]-O[0]),J=1e-8*(I[I.length-1]-I[0]);s(R,j,J);var X,Z,Y,W,Q=R;N.type==="constraint"&&(Q=r(R,F)),function(se,ge){var ue,ce,le,de,Ce,xe,_e,we,Ae;for(ue=0;ue<se.length;ue++){for(Ce=(de=se[ue]).pedgepaths=[],xe=de.ppaths=[],ce=0;ce<de.edgepaths.length;ce++){for(Ae=de.edgepaths[ce],_e=[],le=0;le<Ae.length;le++)_e[le]=ge(Ae[le]);Ce.push(_e)}for(ce=0;ce<de.paths.length;ce++){for(Ae=de.paths[ce],we=[],le=0;le<Ae.length;le++)we[le]=ge(Ae[le]);xe.push(we)}}}(R,ie);var ne=[];for(W=C.clipsegments.length-1;W>=0;W--)X=C.clipsegments[W],Z=k([],X.x,m.c2p),Y=k([],X.y,w.c2p),Z.reverse(),Y.reverse(),ne.push(l(Z,Y,X.bicubic));var re="M"+ne.join("L")+"Z";(function(se,ge,ue,ce,le,de){var Ce,xe,_e,we,Ae=b.ensureSingle(se,"g","contourbg").selectAll("path").data(de!=="fill"||le?[]:[0]);Ae.enter().append("path"),Ae.exit().remove();var $=[];for(we=0;we<ge.length;we++)Ce=ge[we],xe=k([],Ce.x,ue.c2p),_e=k([],Ce.y,ce.c2p),$.push(l(xe,_e,Ce.bicubic));Ae.attr("d","M"+$.join("L")+"Z").style("stroke","none")})(M,C.clipsegments,m,w,V,D),function(se,ge,ue,ce,le,de,Ce,xe,_e,we,Ae){var $=we==="fill";$&&a(le,se.contours);var oe=b.ensureSingle(ge,"g","contourfill").selectAll("path").data($?le:[]);oe.enter().append("path"),oe.exit().remove(),oe.each(function(pe){var ye=(pe.prefixBoundary?Ae:"")+function(ke,De,Pe,Re,fe,ve,Te,ze){var He,Ve,nt,tt,ot,pt,Tt,yt="",dt=De.edgepaths.map(function(Se,Ie){return Ie}),Pt=!0,Et=1e-4*Math.abs(Pe[0][0]-Pe[2][0]),Ot=1e-4*Math.abs(Pe[0][1]-Pe[2][1]);function Nt(Se){return Math.abs(Se[1]-Pe[0][1])<Ot}function zt(Se){return Math.abs(Se[1]-Pe[2][1])<Ot}function Ze(Se){return Math.abs(Se[0]-Pe[0][0])<Et}function Ye(Se){return Math.abs(Se[0]-Pe[2][0])<Et}function je(Se,Ie){var We,it,lt,gt,At="";for(Nt(Se)&&!Ye(Se)||zt(Se)&&!Ze(Se)?(gt=fe.aaxis,lt=u(fe,ve,[Se[0],Ie[0]],.5*(Se[1]+Ie[1]))):(gt=fe.baxis,lt=u(fe,ve,.5*(Se[0]+Ie[0]),[Se[1],Ie[1]])),We=1;We<lt.length;We++)for(At+=gt.smoothing?"C":"L",it=0;it<lt[We].length;it++){var kt=lt[We][it];At+=[Te.c2p(kt[0]),ze.c2p(kt[1])]+" "}return At}for(He=0,Ve=null;dt.length;){var Ke=De.edgepaths[He][0];for(Ve&&(yt+=je(Ve,Ke)),Tt=T.smoothopen(De.edgepaths[He].map(Re),De.smoothing),yt+=Pt?Tt:Tt.replace(/^M/,"L"),dt.splice(dt.indexOf(He),1),Ve=De.edgepaths[He][De.edgepaths[He].length-1],ot=-1,tt=0;tt<4;tt++){if(!Ve){b.log("Missing end?",He,De);break}for(Nt(Ve)&&!Ye(Ve)?nt=Pe[1]:Ze(Ve)?nt=Pe[0]:zt(Ve)?nt=Pe[3]:Ye(Ve)&&(nt=Pe[2]),pt=0;pt<De.edgepaths.length;pt++){var st=De.edgepaths[pt][0];Math.abs(Ve[0]-nt[0])<Et?Math.abs(Ve[0]-st[0])<Et&&(st[1]-Ve[1])*(nt[1]-st[1])>=0&&(nt=st,ot=pt):Math.abs(Ve[1]-nt[1])<Ot?Math.abs(Ve[1]-st[1])<Ot&&(st[0]-Ve[0])*(nt[0]-st[0])>=0&&(nt=st,ot=pt):b.log("endpt to newendpt is not vert. or horz.",Ve,nt,st)}if(ot>=0)break;yt+=je(Ve,nt),Ve=nt}if(ot===De.edgepaths.length){b.log("unclosed perimeter path");break}He=ot,(Pt=dt.indexOf(He)===-1)&&(He=dt[0],yt+=je(Ve,nt)+"Z",Ve=null)}for(He=0;He<De.paths.length;He++)yt+=T.smoothclosed(De.paths[He].map(Re),De.smoothing);return yt}(0,pe,de,Ce,xe,_e,ue,ce);ye?S.select(this).attr("d",ye).style("stroke","none"):S.select(this).remove()})}(E,M,m,w,Q,U,ie,L,C,D,re),function(se,ge,ue,ce,le,de,Ce){var xe=ue._context.staticPlot,_e=b.ensureSingle(se,"g","contourlines"),we=le.showlines!==!1,Ae=le.showlabels,$=we&&Ae,oe=t.createLines(_e,we||Ae,ge,xe),pe=t.createLineClip(_e,$,ue,ce.trace.uid),ye=se.selectAll("g.contourlabels").data(Ae?[0]:[]);if(ye.exit().remove(),ye.enter().append("g").classed("contourlabels",!0),Ae){var ke=de.xaxis,De=de.yaxis,Pe=ke._length,Re=De._length,fe=[[[0,0],[Pe,0],[Pe,Re],[0,Re]]],ve=[];b.clearLocationCache();var Te=t.labelFormatter(ue,ce),ze=T.tester.append("text").attr("data-notex",1).call(T.font,le.labelfont),He={left:0,right:Pe,center:Pe/2,top:0,bottom:Re,middle:Re/2},Ve=Math.sqrt(Pe*Pe+Re*Re),nt=o.LABELDISTANCE*Ve/Math.max(1,ge.length/o.LABELINCREASE);oe.each(function(tt){var ot=t.calcTextOpts(tt.level,Te,ze,ue);S.select(this).selectAll("path").each(function(pt){var Tt=this,yt=b.getVisibleSegment(Tt,He,ot.height/2);if(yt&&(function(Ot,Nt,zt,Ze,Ye,je){for(var Ke,st=0;st<zt.pedgepaths.length;st++)Nt===zt.pedgepaths[st]&&(Ke=zt.edgepaths[st]);if(Ke){var Se=Ye.a[0],Ie=Ye.a[Ye.a.length-1],We=Ye.b[0],it=Ye.b[Ye.b.length-1],lt=h(Ot,0,1),gt=h(Ot,Ze.total,Ze.total-1),At=ht(Ke[0],lt),kt=Ze.total-ht(Ke[Ke.length-1],gt);Ze.min<At&&(Ze.min=At),Ze.max>kt&&(Ze.max=kt),Ze.len=Ze.max-Ze.min}function ht(St,vt){var Mt,It=0,Ut=.1;return(Math.abs(St[0]-Se)<Ut||Math.abs(St[0]-Ie)<Ut)&&(Mt=f(Ye.dxydb_rough(St[0],St[1],Ut)),It=Math.max(It,je*x(vt,Mt)/2)),(Math.abs(St[1]-We)<Ut||Math.abs(St[1]-it)<Ut)&&(Mt=f(Ye.dxyda_rough(St[0],St[1],Ut)),It=Math.max(It,je*x(vt,Mt)/2)),It}}(Tt,pt,tt,yt,Ce,ot.height),!(yt.len<(ot.width+ot.height)*o.LABELMIN)))for(var dt=Math.min(Math.ceil(yt.len/nt),o.LABELMAX),Pt=0;Pt<dt;Pt++){var Et=t.findBestTextLocation(Tt,yt,ot,ve,He);if(!Et)break;t.addLabelData(Et,ot,ve,fe)}})}),ze.remove(),t.drawLabels(ye,ve,ue,pe,$?fe:null)}Ae&&!we&&oe.remove()}(M,R,v,_,N,g,L),T.setClipUrl(M,L._clipPathId,v)}function ie(se){var ge=L.ab2xy(se[0],se[1],!0);return[m.c2p(ge[0]),w.c2p(ge[1])]}})}},64096:function(K,z,e){var S=e(50693),k=e(5386).fF,l=e(9012),T=e(99181),b=e(1426).extendFlat;K.exports=b({lon:T.lon,lat:T.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,hoverinfo:b({},l.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:k(),showlegend:b({},l.showlegend,{dflt:!1})},S("",{cLetter:"z",editTypeOverride:"calc"}))},85070:function(K,z,e){var S=e(92770),k=e(71828).isArrayOrTypedArray,l=e(50606).BADNUM,T=e(78803),b=e(71828)._;K.exports=function(d,s){for(var t=s._length,o=new Array(t),r=s.z,n=k(r)&&r.length,a=0;a<t;a++){var i=o[a]={},u=s.lon[a],h=s.lat[a];if(i.lonlat=S(u)&&S(h)?[+u,+h]:[l,l],n){var f=r[a];i.z=S(f)?f:l}}return T(d,s,{vals:n?r:[0,1],containerStr:"",cLetter:"z"}),t&&(o[0].t={labels:{lat:b(d,"lat:")+" ",lon:b(d,"lon:")+" "}}),o}},52414:function(K,z,e){var S=e(92770),k=e(71828),l=e(7901),T=e(21081),b=e(50606).BADNUM,d=e(18214).makeBlank;K.exports=function(s){var t=s[0].trace,o=t.visible===!0&&t._length!==0,r=t._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:d()};if(!o)return r;var n,a=[],i=t.z,u=t.radius,h=k.isArrayOrTypedArray(i)&&i.length,f=k.isArrayOrTypedArray(u);for(n=0;n<s.length;n++){var x=s[n],v=x.lonlat;if(v[0]!==b){var g={};if(h){var y=x.z;g.z=y!==b?y:0}f&&(g.r=S(u[n])&&u[n]>0?+u[n]:0),a.push({type:"Feature",geometry:{type:"Point",coordinates:v},properties:g})}}var p=T.extractOpts(t),m=p.reversescale?T.flipScale(p.colorscale):p.colorscale,w=m[0][1],c=["interpolate",["linear"],["heatmap-density"],0,l.opacity(w)<1?w:l.addOpacity(w,0)];for(n=1;n<m.length;n++)c.push(m[n][0],m[n][1]);var M=["interpolate",["linear"],["get","z"],p.min,0,p.max,1];return k.extendFlat(r.heatmap.paint,{"heatmap-weight":h?M:1/(p.max-p.min),"heatmap-color":c,"heatmap-radius":f?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),r.geojson={type:"FeatureCollection",features:a},r.heatmap.layout.visibility="visible",r}},79429:function(K,z,e){var S=e(71828),k=e(1586),l=e(64096);K.exports=function(T,b,d,s){function t(a,i){return S.coerce(T,b,l,a,i)}var o=t("lon")||[],r=t("lat")||[],n=Math.min(o.length,r.length);n?(b._length=n,t("z"),t("radius"),t("below"),t("text"),t("hovertext"),t("hovertemplate"),k(T,b,s,t,{prefix:"",cLetter:"z"})):b.visible=!1}},62474:function(K){K.exports=function(z,e){return z.lon=e.lon,z.lat=e.lat,z.z=e.z,z}},84684:function(K,z,e){var S=e(89298),k=e(28178).hoverPoints,l=e(28178).getExtraText;K.exports=function(T,b,d){var s=k(T,b,d);if(s){var t=s[0],o=t.cd,r=o[0].trace,n=o[t.index];if(delete t.color,"z"in n){var a=t.subplot.mockAxis;t.z=n.z,t.zLabel=S.tickText(a,a.c2l(n.z),"hover").text}return t.extraText=l(r,n,o[0].t.labels),[t]}}},93814:function(K,z,e){K.exports={attributes:e(64096),supplyDefaults:e(79429),colorbar:e(61243),formatLabels:e(15636),calc:e(85070),plot:e(7336),hoverPoints:e(84684),eventData:e(62474),getBelow:function(S,k){for(var l=k.getMapLayers(),T=0;T<l.length;T++){var b=l[T],d=b.id;if(b.type==="symbol"&&typeof d=="string"&&d.indexOf("plotly-")===-1)return d}},moduleType:"trace",name:"densitymapbox",basePlotModule:e(50101),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},7336:function(K,z,e){var S=e(52414),k=e(77734).traceLayerPrefix;function l(b,d){this.type="densitymapbox",this.subplot=b,this.uid=d,this.sourceId="source-"+d,this.layerList=[["heatmap",k+d+"-heatmap"]],this.below=null}var T=l.prototype;T.update=function(b){var d=this.subplot,s=this.layerList,t=S(b),o=d.belowLookup["trace-"+this.uid];d.map.getSource(this.sourceId).setData(t.geojson),o!==this.below&&(this._removeLayers(),this._addLayers(t,o),this.below=o);for(var r=0;r<s.length;r++){var n=s[r],a=n[0],i=n[1],u=t[a];d.setOptions(i,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&d.setOptions(i,"setPaintProperty",u.paint)}},T._addLayers=function(b,d){for(var s=this.subplot,t=this.layerList,o=this.sourceId,r=0;r<t.length;r++){var n=t[r],a=n[0],i=b[a];s.addLayer({type:a,id:n[1],source:o,layout:i.layout,paint:i.paint},d)}},T._removeLayers=function(){for(var b=this.subplot.map,d=this.layerList,s=d.length-1;s>=0;s--)b.removeLayer(d[s][1])},T.dispose=function(){var b=this.subplot.map;this._removeLayers(),b.removeSource(this.sourceId)},K.exports=function(b,d){var s=d[0].trace,t=new l(b,s.uid),o=t.sourceId,r=S(d),n=t.below=b.belowLookup["trace-"+s.uid];return b.map.addSource(o,{type:"geojson",data:r.geojson}),t._addLayers(r,n),t}},49789:function(K,z,e){var S=e(71828);K.exports=function(k,l){for(var T=0;T<k.length;T++)k[T].i=T;S.mergeArray(l.text,k,"tx"),S.mergeArray(l.hovertext,k,"htx");var b=l.marker;if(b){S.mergeArray(b.opacity,k,"mo"),S.mergeArray(b.color,k,"mc");var d=b.line;d&&(S.mergeArray(d.color,k,"mlc"),S.mergeArrayCastPositive(d.width,k,"mlw"))}}},1285:function(K,z,e){var S,k=e(1486),l=e(82196).line,T=e(9012),b=e(12663).axisHoverFormat,d=e(5386).fF,s=e(5386).si,t=e(18517),o=e(1426).extendFlat,r=e(7901);K.exports={x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),hovertext:k.hovertext,hovertemplate:d({},{keys:t.eventDataKeys}),hoverinfo:o({},T.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:s({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),text:k.text,textposition:k.textposition,insidetextanchor:o({},k.insidetextanchor,{dflt:"middle"}),textangle:o({},k.textangle,{dflt:0}),textfont:k.textfont,insidetextfont:k.insidetextfont,outsidetextfont:k.outsidetextfont,constraintext:k.constraintext,cliponaxis:k.cliponaxis,orientation:o({},k.orientation,{}),offset:o({},k.offset,{arrayOk:!1}),width:o({},k.width,{arrayOk:!1}),marker:(S=o({},k.marker),delete S.pattern,S),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:o({},l.color,{dflt:r.defaultLine}),width:o({},l.width,{dflt:0,editType:"plot"}),dash:l.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup}},9532:function(K,z,e){var S=e(89298),k=e(42973),l=e(49789),T=e(66279),b=e(50606).BADNUM;function d(s){return s===b?0:s}K.exports=function(s,t){var o,r,n,a,i,u,h,f,x=S.getFromId(s,t.xaxis||"x"),v=S.getFromId(s,t.yaxis||"y");t.orientation==="h"?(o=x.makeCalcdata(t,"x"),n=v.makeCalcdata(t,"y"),a=k(t,v,"y",n),i=!!t.yperiodalignment,u="y"):(o=v.makeCalcdata(t,"y"),n=x.makeCalcdata(t,"x"),a=k(t,x,"x",n),i=!!t.xperiodalignment,u="x"),r=a.vals;var g,y=Math.min(r.length,o.length),p=new Array(y);for(t._base=[],h=0;h<y;h++){o[h]<0&&(o[h]=b);var m=!1;o[h]!==b&&h+1<y&&o[h+1]!==b&&(m=!0),f=p[h]={p:r[h],s:o[h],cNext:m},t._base[h]=-.5*f.s,i&&(p[h].orig_p=n[h],p[h][u+"End"]=a.ends[h],p[h][u+"Start"]=a.starts[h]),t.ids&&(f.id=String(t.ids[h])),h===0&&(p[0].vTotal=0),p[0].vTotal+=d(f.s),f.begR=d(f.s)/d(p[0].s)}for(h=0;h<y;h++)(f=p[h]).s!==b&&(f.sumR=f.s/p[0].vTotal,f.difR=g!==void 0?f.s/g:1,g=f.s);return l(p,t),T(p,t),p}},18517:function(K){K.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},8984:function(K,z,e){var S=e(11661).setGroupPositions;K.exports=function(k,l){var T,b,d=k._fullLayout,s=k._fullData,t=k.calcdata,o=l.xaxis,r=l.yaxis,n=[],a=[],i=[];for(b=0;b<s.length;b++){var u=s[b],h=u.orientation==="h";u.visible===!0&&u.xaxis===o._id&&u.yaxis===r._id&&u.type==="funnel"&&(T=t[b],h?i.push(T):a.push(T),n.push(T))}var f={mode:d.funnelmode,norm:d.funnelnorm,gap:d.funnelgap,groupgap:d.funnelgroupgap};for(S(k,o,r,a,f),S(k,r,o,i,f),b=0;b<n.length;b++){T=n[b];for(var x=0;x<T.length;x++)x+1<T.length&&(T[x].nextP0=T[x+1].p0,T[x].nextS0=T[x+1].s0,T[x].nextP1=T[x+1].p1,T[x].nextS1=T[x+1].s1)}}},26199:function(K,z,e){var S=e(71828),k=e(26125),l=e(90769).handleText,T=e(67513),b=e(73927),d=e(1285),s=e(7901);K.exports={supplyDefaults:function(t,o,r,n){function a(f,x){return S.coerce(t,o,d,f,x)}if(T(t,o,n,a)){b(t,o,n,a),a("xhoverformat"),a("yhoverformat"),a("orientation",o.y&&!o.x?"v":"h"),a("offset"),a("width");var i=a("text");a("hovertext"),a("hovertemplate");var u=a("textposition");l(t,o,n,a,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o.textposition==="none"||o.texttemplate||a("textinfo",Array.isArray(i)?"text+value":"value");var h=a("marker.color",r);a("marker.line.color",s.defaultLine),a("marker.line.width"),a("connector.visible")&&(a("connector.fillcolor",function(f){var x=S.isArrayOrTypedArray(f)?"#000":f;return s.addOpacity(x,.5*s.opacity(x))}(h)),a("connector.line.width")&&(a("connector.line.color"),a("connector.line.dash")))}else o.visible=!1},crossTraceDefaults:function(t,o){var r,n;function a(u){return S.coerce(n._input,n,d,u)}if(o.funnelmode==="group")for(var i=0;i<t.length;i++)r=(n=t[i])._input,k(r,n,o,a)}}},34598:function(K){K.exports=function(z,e){return z.x="xVal"in e?e.xVal:e.x,z.y="yVal"in e?e.yVal:e.y,"percentInitial"in e&&(z.percentInitial=e.percentInitial),"percentPrevious"in e&&(z.percentPrevious=e.percentPrevious),"percentTotal"in e&&(z.percentTotal=e.percentTotal),e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),z}},63341:function(K,z,e){var S=e(7901).opacity,k=e(95423).hoverOnBars,l=e(71828).formatPercent;K.exports=function(T,b,d,s,t){var o=k(T,b,d,s,t);if(o){var r=o.cd,n=r[0].trace,a=n.orientation==="h",i=r[o.index];o[(a?"x":"y")+"LabelVal"]=i.s,o.percentInitial=i.begR,o.percentInitialLabel=l(i.begR,1),o.percentPrevious=i.difR,o.percentPreviousLabel=l(i.difR,1),o.percentTotal=i.sumR,o.percentTotalLabel=l(i.sumR,1);var u=i.hi||n.hoverinfo,h=[];if(u&&u!=="none"&&u!=="skip"){var f=u==="all",x=u.split("+"),v=function(g){return f||x.indexOf(g)!==-1};v("percent initial")&&h.push(o.percentInitialLabel+" of initial"),v("percent previous")&&h.push(o.percentPreviousLabel+" of previous"),v("percent total")&&h.push(o.percentTotalLabel+" of total")}return o.extraText=h.join("<br>"),o.color=function(g,y){var p=g.marker,m=y.mc||p.color,w=y.mlc||p.line.color,c=y.mlw||p.line.width;return S(m)?m:S(w)&&c?w:void 0}(n,i),[o]}}},51759:function(K,z,e){K.exports={attributes:e(1285),layoutAttributes:e(10440),supplyDefaults:e(26199).supplyDefaults,crossTraceDefaults:e(26199).crossTraceDefaults,supplyLayoutDefaults:e(93138),calc:e(9532),crossTraceCalc:e(8984),plot:e(80461),style:e(68266).style,hoverPoints:e(63341),eventData:e(34598),selectPoints:e(81974),moduleType:"trace",name:"funnel",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},10440:function(K){K.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},93138:function(K,z,e){var S=e(71828),k=e(10440);K.exports=function(l,T,b){var d=!1;function s(r,n){return S.coerce(l,T,k,r,n)}for(var t=0;t<b.length;t++){var o=b[t];if(o.visible&&o.type==="funnel"){d=!0;break}}d&&(s("funnelmode"),s("funnelgap",.2),s("funnelgroupgap"))}},80461:function(K,z,e){var S=e(39898),k=e(71828),l=e(91424),T=e(50606).BADNUM,b=e(17295),d=e(72597).clearMinTextSize;function s(t,o,r,n){var a=[],i=[],u=n?o:r,h=n?r:o;return a[0]=u.c2p(t.s0,!0),i[0]=h.c2p(t.p0,!0),a[1]=u.c2p(t.s1,!0),i[1]=h.c2p(t.p1,!0),a[2]=u.c2p(t.nextS0,!0),i[2]=h.c2p(t.nextP0,!0),a[3]=u.c2p(t.nextS1,!0),i[3]=h.c2p(t.nextP1,!0),n?[a,i]:[i,a]}K.exports=function(t,o,r,n){var a=t._fullLayout;d("funnel",a),function(i,u,h,f){var x=u.xaxis,v=u.yaxis;k.makeTraceGroups(f,h,"trace bars").each(function(g){var y=S.select(this),p=g[0].trace,m=k.ensureSingle(y,"g","regions");if(p.connector&&p.connector.visible){var w=p.orientation==="h",c=m.selectAll("g.region").data(k.identity);c.enter().append("g").classed("region",!0),c.exit().remove();var M=c.size();c.each(function(_,E){if(E===M-1||_.cNext){var L=s(_,x,v,w),C=L[0],O=L[1],I="";C[0]!==T&&O[0]!==T&&C[1]!==T&&O[1]!==T&&C[2]!==T&&O[2]!==T&&C[3]!==T&&O[3]!==T&&(I+=w?"M"+C[0]+","+O[1]+"L"+C[2]+","+O[2]+"H"+C[3]+"L"+C[1]+","+O[1]+"Z":"M"+C[1]+","+O[1]+"L"+C[2]+","+O[3]+"V"+O[2]+"L"+C[1]+","+O[0]+"Z"),I===""&&(I="M0,0Z"),k.ensureSingle(S.select(this),"path").attr("d",I).call(l.setClipUrl,u.layerClipId,i)}})}else m.remove()})}(t,o,r,n),function(i,u,h,f){var x=u.xaxis,v=u.yaxis;k.makeTraceGroups(f,h,"trace bars").each(function(g){var y=S.select(this),p=g[0].trace,m=k.ensureSingle(y,"g","lines");if(p.connector&&p.connector.visible&&p.connector.line.width){var w=p.orientation==="h",c=m.selectAll("g.line").data(k.identity);c.enter().append("g").classed("line",!0),c.exit().remove();var M=c.size();c.each(function(_,E){if(E===M-1||_.cNext){var L=s(_,x,v,w),C=L[0],O=L[1],I="";C[3]!==void 0&&O[3]!==void 0&&(w?(I+="M"+C[0]+","+O[1]+"L"+C[2]+","+O[2],I+="M"+C[1]+","+O[1]+"L"+C[3]+","+O[2]):(I+="M"+C[1]+","+O[1]+"L"+C[2]+","+O[3],I+="M"+C[1]+","+O[0]+"L"+C[2]+","+O[2])),I===""&&(I="M0,0Z"),k.ensureSingle(S.select(this),"path").attr("d",I).call(l.setClipUrl,u.layerClipId,i)}})}else m.remove()})}(t,o,r,n),b.plot(t,o,r,n,{mode:a.funnelmode,norm:a.funnelmode,gap:a.funnelgap,groupgap:a.funnelgroupgap})}},68266:function(K,z,e){var S=e(39898),k=e(91424),l=e(7901),T=e(37822).DESELECTDIM,b=e(16688),d=e(72597).resizeText,s=b.styleTextPoints;K.exports={style:function(t,o,r){var n=r||S.select(t).selectAll("g.funnellayer").selectAll("g.trace");d(t,n,"funnel"),n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var i=S.select(this),u=a[0].trace;i.selectAll(".point > path").each(function(h){if(!h.isBlank){var f=u.marker;S.select(this).call(l.fill,h.mc||f.color).call(l.stroke,h.mlc||f.line.color).call(k.dashLine,f.line.dash,h.mlw||f.line.width).style("opacity",u.selectedpoints&&!h.selected?T:1)}}),s(i,u,t),i.selectAll(".regions").each(function(){S.select(this).selectAll("path").style("stroke-width",0).call(l.fill,u.connector.fillcolor)}),i.selectAll(".lines").each(function(){var h=u.connector.line;k.lineGroupStyle(S.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},86807:function(K,z,e){var S=e(34e3),k=e(9012),l=e(27670).Y,T=e(5386).fF,b=e(5386).si,d=e(1426).extendFlat;K.exports={labels:S.labels,label0:S.label0,dlabel:S.dlabel,values:S.values,marker:{colors:S.marker.colors,line:{color:d({},S.marker.line.color,{dflt:null}),width:d({},S.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:S.text,hovertext:S.hovertext,scalegroup:d({},S.scalegroup,{}),textinfo:d({},S.textinfo,{flags:["label","text","value","percent"]}),texttemplate:b({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:d({},k.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","text","percent"]}),textposition:d({},S.textposition,{values:["inside","none"],dflt:"inside"}),textfont:S.textfont,insidetextfont:S.insidetextfont,title:{text:S.title.text,font:S.title.font,position:d({},S.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:l({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},6452:function(K,z,e){var S=e(74875);z.name="funnelarea",z.plot=function(k,l,T,b){S.plotBasePlot(z.name,k,l,T,b)},z.clean=function(k,l,T,b){S.cleanBasePlot(z.name,k,l,T,b)}},89574:function(K,z,e){var S=e(32354);K.exports={calc:function(k,l){return S.calc(k,l)},crossTraceCalc:function(k){S.crossTraceCalc(k,{type:"funnelarea"})}}},86282:function(K,z,e){var S=e(71828),k=e(86807),l=e(27670).c,T=e(90769).handleText,b=e(37434).handleLabelsAndValues;K.exports=function(d,s,t,o){function r(g,y){return S.coerce(d,s,k,g,y)}var n=r("labels"),a=r("values"),i=b(n,a),u=i.len;if(s._hasLabels=i.hasLabels,s._hasValues=i.hasValues,!s._hasLabels&&s._hasValues&&(r("label0"),r("dlabel")),u){s._length=u,r("marker.line.width")&&r("marker.line.color",o.paper_bgcolor),r("marker.colors"),r("scalegroup");var h,f=r("text"),x=r("texttemplate");if(x||(h=r("textinfo",Array.isArray(f)?"text+percent":"percent")),r("hovertext"),r("hovertemplate"),x||h&&h!=="none"){var v=r("textposition");T(d,s,o,r,v,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}l(s,o,r),r("title.text")&&(r("title.position"),S.coerceFont(r,"title.font",o.font)),r("aspectratio"),r("baseratio")}else s.visible=!1}},10421:function(K,z,e){K.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e(6452),categories:["pie-like","funnelarea","showLegend"],attributes:e(86807),layoutAttributes:e(80097),supplyDefaults:e(86282),supplyLayoutDefaults:e(57402),calc:e(89574).calc,crossTraceCalc:e(89574).crossTraceCalc,plot:e(79187),style:e(71858),styleOne:e(63463),meta:{}}},80097:function(K,z,e){var S=e(92774).hiddenlabels;K.exports={hiddenlabels:S,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57402:function(K,z,e){var S=e(71828),k=e(80097);K.exports=function(l,T){function b(d,s){return S.coerce(l,T,k,d,s)}b("hiddenlabels"),b("funnelareacolorway",T.colorway),b("extendfunnelareacolors")}},79187:function(K,z,e){var S=e(39898),k=e(91424),l=e(71828),T=l.strScale,b=l.strTranslate,d=e(63893),s=e(17295).toMoveInsideBar,t=e(72597),o=t.recordMinTextSize,r=t.clearMinTextSize,n=e(53581),a=e(14575),i=a.attachFxHandlers,u=a.determineInsideTextFont,h=a.layoutAreas,f=a.prerenderTitles,x=a.positionTitleOutside,v=a.formatSliceLabel;function g(y,p){return"l"+(p[0]-y[0])+","+(p[1]-y[1])}K.exports=function(y,p){var m=y._context.staticPlot,w=y._fullLayout;r("funnelarea",w),f(p,y),h(p,w._size),l.makeTraceGroups(w._funnelarealayer,p,"trace").each(function(c){var M=S.select(this),_=c[0],E=_.trace;(function(L){if(L.length){var C=L[0],O=C.trace,I=O.aspectratio,N=O.baseratio;N>.999&&(N=.999);var R,V,F,D=Math.pow(N,2),U=C.vTotal,j=U,J=U*D/(1-D)/U,X=[];for(X.push(_e()),V=L.length-1;V>-1;V--)if(!(F=L[V]).hidden){var Z=F.v/j;J+=Z,X.push(_e())}var Y=1/0,W=-1/0;for(V=0;V<X.length;V++)R=X[V],Y=Math.min(Y,R[1]),W=Math.max(W,R[1]);for(V=0;V<X.length;V++)X[V][1]-=(W+Y)/2;var Q=X[X.length-1][0],ne=C.r,re=(W-Y)/2,ie=ne/Q,se=ne/re*I;for(C.r=se*re,V=0;V<X.length;V++)X[V][0]*=ie,X[V][1]*=se;var ge,ue,ce=[-(R=X[0])[0],R[1]],le=[R[0],R[1]],de=0;for(V=L.length-1;V>-1;V--)if(!(F=L[V]).hidden){var Ce=X[de+=1][0],xe=X[de][1];F.TL=[-Ce,xe],F.TR=[Ce,xe],F.BL=ce,F.BR=le,F.pxmid=(ge=F.TR,ue=F.BR,[.5*(ge[0]+ue[0]),.5*(ge[1]+ue[1])]),ce=F.TL,le=F.TR}}function _e(){var we,Ae={x:we=Math.sqrt(J),y:-we};return[Ae.x,Ae.y]}})(c),M.each(function(){var L=S.select(this).selectAll("g.slice").data(c);L.enter().append("g").classed("slice",!0),L.exit().remove(),L.each(function(O,I){if(O.hidden)S.select(this).selectAll("path,g").remove();else{O.pointNumber=O.i,O.curveNumber=E.index;var N=_.cx,R=_.cy,V=S.select(this),F=V.selectAll("path.surface").data([O]);F.enter().append("path").classed("surface",!0).style({"pointer-events":m?"none":"all"}),V.call(i,y,c);var D="M"+(N+O.TR[0])+","+(R+O.TR[1])+g(O.TR,O.BR)+g(O.BR,O.BL)+g(O.BL,O.TL)+"Z";F.attr("d",D),v(y,O,_);var U=n.castOption(E.textposition,O.pts),j=V.selectAll("g.slicetext").data(O.text&&U!=="none"?[0]:[]);j.enter().append("g").classed("slicetext",!0),j.exit().remove(),j.each(function(){var J=l.ensureSingle(S.select(this),"text","",function(ie){ie.attr("data-notex",1)}),X=l.ensureUniformFontSize(y,u(E,O,w.font));J.text(O.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(k.font,X).call(d.convertToTspans,y);var Z,Y,W,Q=k.bBox(J.node()),ne=Math.min(O.BL[1],O.BR[1])+R,re=Math.max(O.TL[1],O.TR[1])+R;Y=Math.max(O.TL[0],O.BL[0])+N,W=Math.min(O.TR[0],O.BR[0])+N,(Z=s(Y,W,ne,re,Q,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=X.size,o(E.type,Z,w),c[I].transform=Z,l.setTransormAndDisplay(J,Z)})}});var C=S.select(this).selectAll("g.titletext").data(E.title.text?[0]:[]);C.enter().append("g").classed("titletext",!0),C.exit().remove(),C.each(function(){var O=l.ensureSingle(S.select(this),"text","",function(R){R.attr("data-notex",1)}),I=E.title.text;E._meta&&(I=l.templateString(I,E._meta)),O.text(I).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(k.font,E.title.font).call(d.convertToTspans,y);var N=x(_,w._size);O.attr("transform",b(N.x,N.y)+T(Math.min(1,N.scale))+b(N.tx,N.ty))})})})}},71858:function(K,z,e){var S=e(39898),k=e(63463),l=e(72597).resizeText;K.exports=function(T){var b=T._fullLayout._funnelarealayer.selectAll(".trace");l(T,b,"funnelarea"),b.each(function(d){var s=d[0].trace,t=S.select(this);t.style({opacity:s.opacity}),t.selectAll("path.surface").each(function(o){S.select(this).call(k,o,s)})})}},21606:function(K,z,e){var S=e(82196),k=e(9012),l=e(41940),T=e(12663).axisHoverFormat,b=e(5386).fF,d=e(5386).si,s=e(50693),t=e(1426).extendFlat;K.exports=t({z:{valType:"data_array",editType:"calc"},x:t({},S.x,{impliedEdits:{xtype:"array"}}),x0:t({},S.x0,{impliedEdits:{xtype:"scaled"}}),dx:t({},S.dx,{impliedEdits:{xtype:"scaled"}}),y:t({},S.y,{impliedEdits:{ytype:"array"}}),y0:t({},S.y0,{impliedEdits:{ytype:"scaled"}}),dy:t({},S.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:t({},S.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:t({},S.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:t({},S.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:t({},S.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:t({},S.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:t({},S.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:b(),texttemplate:d({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:l({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:t({},k.showlegend,{dflt:!1})},{transforms:void 0},s("",{cLetter:"z",autoColorDflt:!1}))},90757:function(K,z,e){var S=e(73972),k=e(71828),l=e(89298),T=e(42973),b=e(17562),d=e(78803),s=e(68296),t=e(4742),o=e(824),r=e(43907),n=e(70769),a=e(50606).BADNUM;function i(u){for(var h=[],f=u.length,x=0;x<f;x++){var v=u[x];v!==a&&h.push(v)}return h}K.exports=function(u,h){var f,x,v,g,y,p,m,w,c,M,_,E=l.getFromId(u,h.xaxis||"x"),L=l.getFromId(u,h.yaxis||"y"),C=S.traceIs(h,"contour"),O=S.traceIs(h,"histogram"),I=S.traceIs(h,"gl2d"),N=C?"best":h.zsmooth;if(E._minDtick=0,L._minDtick=0,O)g=(_=b(u,h)).orig_x,f=_.x,x=_.x0,v=_.dx,w=_.orig_y,y=_.y,p=_.y0,m=_.dy,c=_.z;else{var R=h.z;k.isArray1D(R)?(s(h,E,L,"x","y",["z"]),f=h._x,y=h._y,R=h._z):(g=h.x?E.makeCalcdata(h,"x"):[],w=h.y?L.makeCalcdata(h,"y"):[],f=T(h,E,"x",g).vals,y=T(h,L,"y",w).vals,h._x=f,h._y=y),x=h.x0,v=h.dx,p=h.y0,m=h.dy,c=t(R,h,E,L)}function V(re){N=h._input.zsmooth=h.zsmooth=!1,k.warn('cannot use zsmooth: "fast": '+re)}if((E.rangebreaks||L.rangebreaks)&&(c=function(re,ie,se){for(var ge=[],ue=-1,ce=0;ce<se.length;ce++)if(ie[ce]!==a){ge[++ue]=[];for(var le=0;le<se[ce].length;le++)re[le]!==a&&ge[ue].push(se[ce][le])}return ge}(f,y,c),O||(f=i(f),y=i(y),h._x=f,h._y=y)),O||!C&&!h.connectgaps||(h._emptypoints=r(c),o(c,h._emptypoints)),N==="fast"){if(E.type==="log"||L.type==="log")V("log axis found");else if(!O){if(f.length){var F=(f[f.length-1]-f[0])/(f.length-1),D=Math.abs(F/100);for(M=0;M<f.length-1;M++)if(Math.abs(f[M+1]-f[M]-F)>D){V("x scale is not linear");break}}if(y.length&&N==="fast"){var U=(y[y.length-1]-y[0])/(y.length-1),j=Math.abs(U/100);for(M=0;M<y.length-1;M++)if(Math.abs(y[M+1]-y[M]-U)>j){V("y scale is not linear");break}}}}var J=k.maxRowLength(c),X=h.xtype==="scaled"?"":f,Z=n(h,X,x,v,J,E),Y=h.ytype==="scaled"?"":y,W=n(h,Y,p,m,c.length,L);I||(h._extremes[E._id]=l.findExtremes(E,Z),h._extremes[L._id]=l.findExtremes(L,W));var Q={x:Z,y:W,z:c,text:h._text||h.text,hovertext:h._hovertext||h.hovertext};if(h.xperiodalignment&&g&&(Q.orig_x=g),h.yperiodalignment&&w&&(Q.orig_y=w),X&&X.length===Z.length-1&&(Q.xCenter=X),Y&&Y.length===W.length-1&&(Q.yCenter=Y),O&&(Q.xRanges=_.xRanges,Q.yRanges=_.yRanges,Q.pts=_.pts),C||d(u,h,{vals:c,cLetter:"z"}),C&&h.contours&&h.contours.coloring==="heatmap"){var ne={type:h.type==="contour"?"heatmap":"histogram2d",xcalendar:h.xcalendar,ycalendar:h.ycalendar};Q.xfill=n(ne,X,x,v,J,E),Q.yfill=n(ne,Y,p,m,c.length,L)}return[Q]}},4742:function(K,z,e){var S=e(92770),k=e(71828),l=e(50606).BADNUM;K.exports=function(T,b,d,s){var t,o,r,n,a,i;function u(y){if(S(y))return+y}if(b&&b.transpose){for(t=0,a=0;a<T.length;a++)t=Math.max(t,T[a].length);if(t===0)return!1;r=function(y){return y.length},n=function(y,p,m){return(y[m]||[])[p]}}else t=T.length,r=function(y,p){return y[p].length},n=function(y,p,m){return(y[p]||[])[m]};var h=function(y,p,m){return p===l||m===l?l:n(y,p,m)};function f(y){if(b&&b.type!=="carpet"&&b.type!=="contourcarpet"&&y&&y.type==="category"&&b["_"+y._id.charAt(0)].length){var p=y._id.charAt(0),m={},w=b["_"+p+"CategoryMap"]||b[p];for(a=0;a<w.length;a++)m[w[a]]=a;return function(c){var M=m[y._categories[c]];return M+1?M:l}}return k.identity}var x=f(d),v=f(s);s&&s.type==="category"&&(t=s._categories.length);var g=new Array(t);for(a=0;a<t;a++)for(o=d&&d.type==="category"?d._categories.length:r(T,a),g[a]=new Array(o),i=0;i<o;i++)g[a][i]=u(h(T,v(a),x(i)));return g}},61243:function(K){K.exports={min:"zmin",max:"zmax"}},68296:function(K,z,e){var S=e(71828),k=e(50606).BADNUM,l=e(42973);K.exports=function(T,b,d,s,t,o){var r=T._length,n=b.makeCalcdata(T,s),a=d.makeCalcdata(T,t);n=l(T,b,s,n).vals,a=l(T,d,t,a).vals;var i,u,h,f,x=T.text,v=x!==void 0&&S.isArray1D(x),g=T.hovertext,y=g!==void 0&&S.isArray1D(g),p=S.distinctVals(n),m=p.vals,w=S.distinctVals(a),c=w.vals,M=[],_=c.length,E=m.length;for(i=0;i<o.length;i++)M[i]=S.init2dArray(_,E);v&&(h=S.init2dArray(_,E)),y&&(f=S.init2dArray(_,E));var L=S.init2dArray(_,E);for(i=0;i<r;i++)if(n[i]!==k&&a[i]!==k){var C=S.findBin(n[i]+p.minDiff/2,m),O=S.findBin(a[i]+w.minDiff/2,c);for(u=0;u<o.length;u++){var I=T[o[u]];M[u][O][C]=I[i],L[O][C]=i}v&&(h[O][C]=x[i]),y&&(f[O][C]=g[i])}for(T["_"+s]=m,T["_"+t]=c,u=0;u<o.length;u++)T["_"+o[u]]=M[u];v&&(T._text=h),y&&(T._hovertext=f),b&&b.type==="category"&&(T["_"+s+"CategoryMap"]=m.map(function(N){return b._categories[N]})),d&&d.type==="category"&&(T["_"+t+"CategoryMap"]=c.map(function(N){return d._categories[N]})),T._after2before=L}},76382:function(K,z,e){var S=e(71828),k=e(67684),l=e(58623),T=e(73927),b=e(49901),d=e(1586),s=e(21606);K.exports=function(t,o,r,n){function a(i,u){return S.coerce(t,o,s,i,u)}k(t,o,a,n)?(T(t,o,n,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hovertemplate"),l(a,n),b(t,o,a,n),a("hoverongaps"),a("connectgaps",S.isArray1D(o.z)&&o.zsmooth!==!1),d(t,o,n,a,{prefix:"",cLetter:"z"})):o.visible=!1}},43907:function(K,z,e){var S=e(71828).maxRowLength;K.exports=function(k){var l,T,b,d,s,t,o,r,n=[],a={},i=[],u=k[0],h=[],f=[0,0,0],x=S(k);for(T=0;T<k.length;T++)for(l=h,h=u,u=k[T+1]||[],b=0;b<x;b++)h[b]===void 0&&((t=(h[b-1]!==void 0?1:0)+(h[b+1]!==void 0?1:0)+(l[b]!==void 0?1:0)+(u[b]!==void 0?1:0))?(T===0&&t++,b===0&&t++,T===k.length-1&&t++,b===h.length-1&&t++,t<4&&(a[[T,b]]=[T,b,t]),n.push([T,b,t])):i.push([T,b]));for(;i.length;){for(o={},r=!1,s=i.length-1;s>=0;s--)(t=((a[[(T=(d=i[s])[0])-1,b=d[1]]]||f)[2]+(a[[T+1,b]]||f)[2]+(a[[T,b-1]]||f)[2]+(a[[T,b+1]]||f)[2])/20)&&(o[d]=[T,b,t],i.splice(s,1),r=!0);if(!r)throw"findEmpties iterated with no new neighbors";for(d in o)a[d]=o[d],n.push(o[d])}return n.sort(function(v,g){return g[2]-v[2]})}},46248:function(K,z,e){var S=e(30211),k=e(71828),l=e(89298),T=e(21081).extractOpts;K.exports=function(b,d,s,t,o){o||(o={});var r,n,a,i,u=o.isContour,h=b.cd[0],f=h.trace,x=b.xa,v=b.ya,g=h.x,y=h.y,p=h.z,m=h.xCenter,w=h.yCenter,c=h.zmask,M=f.zhoverformat,_=g,E=y;if(b.index!==!1){try{a=Math.round(b.index[1]),i=Math.round(b.index[0])}catch{return void k.error("Error hovering on heatmap, pointNumber must be [row,col], found:",b.index)}if(a<0||a>=p[0].length||i<0||i>p.length)return}else{if(S.inbox(d-g[0],d-g[g.length-1],0)>0||S.inbox(s-y[0],s-y[y.length-1],0)>0)return;if(u){var L;for(_=[2*g[0]-g[1]],L=1;L<g.length;L++)_.push((g[L]+g[L-1])/2);for(_.push([2*g[g.length-1]-g[g.length-2]]),E=[2*y[0]-y[1]],L=1;L<y.length;L++)E.push((y[L]+y[L-1])/2);E.push([2*y[y.length-1]-y[y.length-2]])}a=Math.max(0,Math.min(_.length-2,k.findBin(d,_))),i=Math.max(0,Math.min(E.length-2,k.findBin(s,E)))}var C,O,I=x.c2p(g[a]),N=x.c2p(g[a+1]),R=v.c2p(y[i]),V=v.c2p(y[i+1]);u?(C=h.orig_x||g,O=h.orig_y||y,N=I,r=C[a],V=R,n=O[i]):(C=h.orig_x||m||g,O=h.orig_y||w||y,r=m?C[a]:(C[a]+C[a+1])/2,n=w?O[i]:(O[i]+O[i+1])/2,x&&x.type==="category"&&(r=g[a]),v&&v.type==="category"&&(n=y[i]),f.zsmooth&&(I=N=x.c2p(r),R=V=v.c2p(n)));var F=p[i][a];if(c&&!c[i][a]&&(F=void 0),F!==void 0||f.hoverongaps){var D;Array.isArray(h.hovertext)&&Array.isArray(h.hovertext[i])?D=h.hovertext[i][a]:Array.isArray(h.text)&&Array.isArray(h.text[i])&&(D=h.text[i][a]);var U=T(f),j={type:"linear",range:[U.min,U.max],hoverformat:M,_separators:x._separators,_numFormat:x._numFormat},J=l.tickText(j,F,"hover").text;return[k.extendFlat(b,{index:f._after2before?f._after2before[i][a]:[i,a],distance:b.maxHoverDistance,spikeDistance:b.maxSpikeDistance,x0:I,x1:N,y0:R,y1:V,xLabelVal:r,yLabelVal:n,zLabelVal:F,zLabel:J,text:D})]}}},92165:function(K,z,e){K.exports={attributes:e(21606),supplyDefaults:e(76382),calc:e(90757),plot:e(50347),colorbar:e(61243),style:e(70035),hoverPoints:e(46248),moduleType:"trace",name:"heatmap",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},824:function(K,z,e){var S=e(71828),k=[[-1,0],[1,0],[0,-1],[0,1]];function l(b){return .5-.25*Math.min(1,.5*b)}function T(b,d,s){var t,o,r,n,a,i,u,h,f,x,v,g,y,p=0;for(n=0;n<d.length;n++){for(o=(t=d[n])[0],r=t[1],v=b[o][r],x=0,f=0,a=0;a<4;a++)(u=b[o+(i=k[a])[0]])&&(h=u[r+i[1]])!==void 0&&(x===0?g=y=h:(g=Math.min(g,h),y=Math.max(y,h)),f++,x+=h);if(f===0)throw"iterateInterp2d order is wrong: no defined neighbors";b[o][r]=x/f,v===void 0?f<4&&(p=1):(b[o][r]=(1+s)*b[o][r]-s*v,y>g&&(p=Math.max(p,Math.abs(b[o][r]-v)/(y-g))))}return p}K.exports=function(b,d){var s,t=1;for(T(b,d),s=0;s<d.length&&!(d[s][2]<4);s++);for(d=d.slice(s),s=0;s<100&&t>.01;s++)t=T(b,d,l(t));return t>.01&&S.log("interp2d didn't converge quickly",t),b}},58623:function(K,z,e){var S=e(71828);K.exports=function(k,l){k("texttemplate");var T=S.extendFlat({},l.font,{color:"auto",size:"auto"});S.coerceFont(k,"textfont",T)}},70769:function(K,z,e){var S=e(73972),k=e(71828).isArrayOrTypedArray;K.exports=function(l,T,b,d,s,t){var o,r,n,a=[],i=S.traceIs(l,"contour"),u=S.traceIs(l,"histogram"),h=S.traceIs(l,"gl2d");if(k(T)&&T.length>1&&!u&&t.type!=="category"){var f=T.length;if(!(f<=s))return i?T.slice(0,s):T.slice(0,s+1);if(i||h)a=T.slice(0,s);else if(s===1)a=[T[0]-.5,T[0]+.5];else{for(a=[1.5*T[0]-.5*T[1]],n=1;n<f;n++)a.push(.5*(T[n-1]+T[n]));a.push(1.5*T[f-1]-.5*T[f-2])}if(f<s){var x=a[a.length-1],v=x-a[a.length-2];for(n=f;n<s;n++)x+=v,a.push(x)}}else{var g=l[t._id.charAt(0)+"calendar"];for(o=u?t.r2c(b,0,g):k(T)&&T.length===1?T[0]:b===void 0?0:(t.type==="log"?t.d2c:t.r2c)(b,0,g),r=d||1,n=i||h?0:-.5;n<s;n++)a.push(o+r*n)}return a}},50347:function(K,z,e){var S=e(39898),k=e(84267),l=e(73972),T=e(91424),b=e(89298),d=e(71828),s=e(63893),t=e(8225),o=e(7901),r=e(21081).extractOpts,n=e(21081).makeColorScaleFuncFromTrace,a=e(77922),i=e(18783).LINE_SPACING,u="heatmap-label";function h(y){return y.selectAll("g."+u)}function f(y){h(y).remove()}function x(y,p){var m=p.length-2,w=d.constrain(d.findBin(y,p),0,m),c=p[w],M=p[w+1],_=d.constrain(w+(y-c)/(M-c)-.5,0,m),E=Math.round(_),L=Math.abs(_-E);return _&&_!==m&&L?{bin0:E,frac:L,bin1:Math.round(E+L/(_-E))}:{bin0:E,bin1:E,frac:0}}function v(y,p){var m=p.length-1,w=d.constrain(d.findBin(y,p),0,m),c=p[w],M=(y-c)/(p[w+1]-c)||0;return M<=0?{bin0:w,bin1:w,frac:0}:M<.5?{bin0:w,bin1:w+1,frac:M}:{bin0:w+1,bin1:w,frac:1-M}}function g(y,p,m){y[p]=m[0],y[p+1]=m[1],y[p+2]=m[2],y[p+3]=Math.round(255*m[3])}K.exports=function(y,p,m,w){var c=p.xaxis,M=p.yaxis;d.makeTraceGroups(w,m,"hm").each(function(_){var E,L,C,O,I,N,R,V,F=S.select(this),D=_[0],U=D.trace,j=U.xgap||0,J=U.ygap||0,X=D.z,Z=D.x,Y=D.y,W=D.xCenter,Q=D.yCenter,ne=l.traceIs(U,"contour"),re=ne?"best":U.zsmooth,ie=X.length,se=d.maxRowLength(X),ge=!1,ue=!1;for(N=0;E===void 0&&N<Z.length-1;)E=c.c2p(Z[N]),N++;for(N=Z.length-1;L===void 0&&N>0;)L=c.c2p(Z[N]),N--;for(L<E&&(C=L,L=E,E=C,ge=!0),N=0;O===void 0&&N<Y.length-1;)O=M.c2p(Y[N]),N++;for(N=Y.length-1;I===void 0&&N>0;)I=M.c2p(Y[N]),N--;if(I<O&&(C=O,O=I,I=C,ue=!0),ne&&(W=Z,Q=Y,Z=D.xfill,Y=D.yfill),re!=="fast"){var ce=re==="best"?0:.5;E=Math.max(-ce*c._length,E),L=Math.min((1+ce)*c._length,L),O=Math.max(-ce*M._length,O),I=Math.min((1+ce)*M._length,I)}var le,de,Ce=Math.round(L-E),xe=Math.round(I-O);if(Ce<=0||xe<=0)return F.selectAll("image").data([]).exit().remove(),void f(F);re==="fast"?(le=se,de=ie):(le=Ce,de=xe);var _e=document.createElement("canvas");_e.width=le,_e.height=de;var we,Ae,$=_e.getContext("2d"),oe=n(U,{noNumericCheck:!0,returnArray:!0});re==="fast"?(we=ge?function($n){return se-1-$n}:d.identity,Ae=ue?function($n){return ie-1-$n}:d.identity):(we=function($n){return d.constrain(Math.round(c.c2p(Z[$n])-E),0,Ce)},Ae=function($n){return d.constrain(Math.round(M.c2p(Y[$n])-O),0,xe)});var pe,ye,ke,De,Pe=Ae(0),Re=[Pe,Pe],fe=ge?0:1,ve=ue?0:1,Te=0,ze=0,He=0,Ve=0;function nt($n,lr){if($n!==void 0){var hr=oe($n);return hr[0]=Math.round(hr[0]),hr[1]=Math.round(hr[1]),hr[2]=Math.round(hr[2]),Te+=lr,ze+=hr[0]*lr,He+=hr[1]*lr,Ve+=hr[2]*lr,hr}return[0,0,0,0]}function tt($n,lr,hr,Gt){var hn=$n[hr.bin0];if(hn===void 0)return nt(void 0,1);var An,Tn=$n[hr.bin1],Rn=lr[hr.bin0],qn=lr[hr.bin1],Un=Tn-hn||0,Yn=Rn-hn||0;return An=Tn===void 0?qn===void 0?0:Rn===void 0?2*(qn-hn):2*(2*qn-Rn-hn)/3:qn===void 0?Rn===void 0?0:2*(2*hn-Tn-Rn)/3:Rn===void 0?2*(2*qn-Tn-hn)/3:qn+hn-Tn-Rn,nt(hn+hr.frac*Un+Gt.frac*(Yn+hr.frac*An))}if(re){var ot,pt=0;try{ot=new Uint8Array(le*de*4)}catch{ot=new Array(le*de*4)}if(re==="best"){var Tt,yt,dt,Pt=W||Z,Et=Q||Y,Ot=new Array(Pt.length),Nt=new Array(Et.length),zt=new Array(Ce),Ze=W?v:x,Ye=Q?v:x;for(N=0;N<Pt.length;N++)Ot[N]=Math.round(c.c2p(Pt[N])-E);for(N=0;N<Et.length;N++)Nt[N]=Math.round(M.c2p(Et[N])-O);for(N=0;N<Ce;N++)zt[N]=Ze(N,Ot);for(R=0;R<xe;R++)for(yt=X[(Tt=Ye(R,Nt)).bin0],dt=X[Tt.bin1],N=0;N<Ce;N++,pt+=4)g(ot,pt,De=tt(yt,dt,zt[N],Tt))}else for(R=0;R<ie;R++)for(ke=X[R],Re=Ae(R),N=0;N<se;N++)De=nt(ke[N],1),g(ot,pt=4*(Re*se+we(N)),De);var je=$.createImageData(le,de);try{je.data.set(ot)}catch{var Ke=je.data,st=Ke.length;for(R=0;R<st;R++)Ke[R]=ot[R]}$.putImageData(je,0,0)}else{var Se=Math.floor(j/2),Ie=Math.floor(J/2);for(R=0;R<ie;R++)if(ke=X[R],Re.reverse(),Re[ve]=Ae(R+1),Re[0]!==Re[1]&&Re[0]!==void 0&&Re[1]!==void 0)for(pe=[ye=we(0),ye],N=0;N<se;N++)pe.reverse(),pe[fe]=we(N+1),pe[0]!==pe[1]&&pe[0]!==void 0&&pe[1]!==void 0&&(De=nt(ke[N],(pe[1]-pe[0])*(Re[1]-Re[0])),$.fillStyle="rgba("+De.join(",")+")",$.fillRect(pe[0]+Se,Re[0]+Ie,pe[1]-pe[0]-j,Re[1]-Re[0]-J))}ze=Math.round(ze/Te),He=Math.round(He/Te),Ve=Math.round(Ve/Te);var We=k("rgb("+ze+","+He+","+Ve+")");y._hmpixcount=(y._hmpixcount||0)+Te,y._hmlumcount=(y._hmlumcount||0)+Te*We.getLuminance();var it=F.selectAll("image").data(_);it.enter().append("svg:image").attr({xmlns:a.svg,preserveAspectRatio:"none"}),it.attr({height:xe,width:Ce,x:E,y:O,"xlink:href":_e.toDataURL("image/png")}),f(F);var lt=U.texttemplate;if(lt){var gt=r(U),At={type:"linear",range:[gt.min,gt.max],_separators:c._separators,_numFormat:c._numFormat},kt=U.type==="histogram2dcontour",ht=U.type==="contour",St=ht?ie-1:ie,vt=ht?1:0,Mt=ht?se-1:se,It=[];for(N=ht?1:0;N<St;N++){var Ut;if(ht)Ut=D.y[N];else if(kt){if(N===0||N===ie-1)continue;Ut=D.y[N]}else if(D.yCenter)Ut=D.yCenter[N];else{if(N+1===ie&&D.y[N+1]===void 0)continue;Ut=(D.y[N]+D.y[N+1])/2}var jt=Math.round(M.c2p(Ut));if(!(0>jt||jt>M._length))for(R=vt;R<Mt;R++){var qt;if(ht)qt=D.x[R];else if(kt){if(R===0||R===se-1)continue;qt=D.x[R]}else if(D.xCenter)qt=D.xCenter[R];else{if(R+1===se&&D.x[R+1]===void 0)continue;qt=(D.x[R]+D.x[R+1])/2}var Yt=Math.round(c.c2p(qt));if(!(0>Yt||Yt>c._length)){var Kt=t({x:qt,y:Ut},U,y._fullLayout);Kt.x=qt,Kt.y=Ut;var pn=D.z[N][R];pn===void 0?(Kt.z="",Kt.zLabel=""):(Kt.z=pn,Kt.zLabel=b.tickText(At,pn,"hover").text);var nn=D.text&&D.text[N]&&D.text[N][R];nn!==void 0&&nn!==!1||(nn=""),Kt.text=nn;var xn=d.texttemplateString(lt,Kt,y._fullLayout._d3locale,Kt,U._meta||{});if(xn){var jn=xn.split("<br>"),mn=jn.length,en=0;for(V=0;V<mn;V++)en=Math.max(en,jn[V].length);It.push({l:mn,c:en,t:xn,x:Yt,y:jt,z:pn})}}}}var vn=U.textfont,on=vn.family,sn=vn.size,En=y._fullLayout.font.size;if(!sn||sn==="auto"){var kn=1/0,zn=1/0,Fn=0,Bn=0;for(V=0;V<It.length;V++){var er=It[V];if(Fn=Math.max(Fn,er.l),Bn=Math.max(Bn,er.c),V<It.length-1){var Xn=It[V+1],mr=Math.abs(Xn.x-er.x),ur=Math.abs(Xn.y-er.y);mr&&(kn=Math.min(kn,mr)),ur&&(zn=Math.min(zn,ur))}}isFinite(kn)&&isFinite(zn)?(kn-=j,zn-=J,kn/=Bn,zn/=Fn,kn/=i/2,zn/=i,sn=Math.min(Math.floor(kn),Math.floor(zn),En)):sn=En}if(sn<=0||!isFinite(sn))return;h(F).data(It).enter().append("g").classed(u,1).append("text").attr("text-anchor","middle").each(function($n){var lr=S.select(this),hr=vn.color;hr&&hr!=="auto"||(hr=o.contrast("rgba("+oe($n.z).join()+")")),lr.attr("data-notex",1).call(s.positionText,function(Gt){return Gt.x}($n),function(Gt){return Gt.y-sn*(Gt.l*i/2-1)}($n)).call(T.font,on,sn,hr).text($n.t).call(s.convertToTspans,y)})}})}},70035:function(K,z,e){var S=e(39898);K.exports=function(k){S.select(k).selectAll(".hm image").style("opacity",function(l){return l.trace.opacity})}},49901:function(K){K.exports=function(z,e,S){S("zsmooth")===!1&&(S("xgap"),S("ygap")),S("zhoverformat")}},67684:function(K,z,e){var S=e(92770),k=e(71828),l=e(73972);function T(b,d){var s=d(b);return(s?d(b+"type","array"):"scaled")==="scaled"&&(d(b+"0"),d("d"+b)),s}K.exports=function(b,d,s,t,o,r){var n,a,i=s("z");if(o=o||"x",r=r||"y",i===void 0||!i.length)return 0;if(k.isArray1D(b.z)){n=s(o),a=s(r);var u=k.minRowLength(n),h=k.minRowLength(a);if(u===0||h===0)return 0;d._length=Math.min(u,h,i.length)}else{if(n=T(o,s),a=T(r,s),!function(f){for(var x,v=!0,g=!1,y=!1,p=0;p<f.length;p++){if(x=f[p],!k.isArrayOrTypedArray(x)){v=!1;break}x.length>0&&(g=!0);for(var m=0;m<x.length;m++)if(S(x[m])){y=!0;break}}return v&&g&&y}(i))return 0;s("transpose"),d._length=null}return b.type==="heatmapgl"||l.getComponentMethod("calendars","handleTraceDefaults")(b,d,[o,r],t),!0}},16063:function(K,z,e){for(var S=e(21606),k=e(50693),l=e(1426).extendFlat,T=e(30962).overrideAll,b=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],d={},s=0;s<b.length;s++){var t=b[s];d[t]=S[t]}d.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},l(d,k("",{cLetter:"z",autoColorDflt:!1})),K.exports=T(d,"calc","nested")},59560:function(K,z,e){var S=e(9330).gl_heatmap2d,k=e(89298),l=e(78614);function T(d,s){this.scene=d,this.uid=s,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=S(d.glplot,this.options),this.heatmap._trace=this}var b=T.prototype;b.handlePick=function(d){var s=this.options,t=s.shape,o=d.pointId,r=o%t[0],n=Math.floor(o/t[0]),a=o;return{trace:this,dataCoord:d.dataCoord,traceCoord:[s.x[r],s.y[n],s.z[a]],textLabel:this.textLabels[o],name:this.name,pointIndex:[n,r],hoverinfo:this.hoverinfo}},b.update=function(d,s){var t=s[0];this.index=d.index,this.name=d.name,this.hoverinfo=d.hoverinfo;var o=t.z;this.options.z=[].concat.apply([],o);var r=o[0].length,n=o.length;this.options.shape=[r,n],this.options.x=t.x,this.options.y=t.y,this.options.zsmooth=d.zsmooth;var a=function(x){for(var v=x.colorscale,g=x.zmin,y=x.zmax,p=v.length,m=new Array(p),w=new Array(4*p),c=0;c<p;c++){var M=v[c],_=l(M[1]);m[c]=g+M[0]*(y-g);for(var E=0;E<4;E++)w[4*c+E]=_[E]}return{colorLevels:m,colorValues:w}}(d);this.options.colorLevels=a.colorLevels,this.options.colorValues=a.colorValues,this.textLabels=[].concat.apply([],d.text),this.heatmap.update(this.options);var i,u,h=this.scene.xaxis,f=this.scene.yaxis;d.zsmooth===!1&&(i={ppad:t.x[1]-t.x[0]},u={ppad:t.y[1]-t.y[0]}),d._extremes[h._id]=k.findExtremes(h,t.x,i),d._extremes[f._id]=k.findExtremes(f,t.y,u)},b.dispose=function(){this.heatmap.dispose()},K.exports=function(d,s,t){var o=new T(d,s.uid);return o.update(s,t),o}},19600:function(K,z,e){var S=e(71828),k=e(67684),l=e(1586),T=e(16063);K.exports=function(b,d,s,t){function o(r,n){return S.coerce(b,d,T,r,n)}k(b,d,o,t)?(o("text"),o("zsmooth"),l(b,d,t,o,{prefix:"",cLetter:"z"})):d.visible=!1}},3325:function(K,z,e){K.exports={attributes:e(16063),supplyDefaults:e(19600),colorbar:e(61243),calc:e(90757),plot:e(59560),moduleType:"trace",name:"heatmapgl",basePlotModule:e(4796),categories:["gl","gl2d","2dMap"],meta:{}}},7745:function(K,z,e){var S=e(1486),k=e(12663).axisHoverFormat,l=e(5386).fF,T=e(5386).si,b=e(41940),d=e(17656),s=e(72406),t=e(1426).extendFlat;K.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:k("x"),yhoverformat:k("y"),text:t({},S.text,{}),hovertext:t({},S.hovertext,{}),orientation:S.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:d("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:d("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:l({},{keys:s.eventDataKeys}),texttemplate:T({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:t({},S.textposition,{arrayOk:!1}),textfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:S.insidetextanchor,textangle:S.textangle,cliponaxis:S.cliponaxis,constraintext:S.constraintext,marker:S.marker,offsetgroup:S.offsetgroup,alignmentgroup:S.alignmentgroup,selected:S.selected,unselected:S.unselected,_deprecated:{bardir:S._deprecated.bardir}}},42174:function(K){K.exports=function(z,e){for(var S=z.length,k=0,l=0;l<S;l++)e[l]?(z[l]/=e[l],k+=z[l]):z[l]=null;return k}},17656:function(K){K.exports=function(z,e){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},59575:function(K,z,e){var S=e(92770);K.exports={count:function(k,l,T){return T[k]++,1},sum:function(k,l,T,b){var d=b[l];return S(d)?(d=Number(d),T[k]+=d,d):0},avg:function(k,l,T,b,d){var s=b[l];return S(s)&&(s=Number(s),T[k]+=s,d[k]++),0},min:function(k,l,T,b){var d=b[l];if(S(d)){if(d=Number(d),!S(T[k]))return T[k]=d,d;if(T[k]>d){var s=d-T[k];return T[k]=d,s}}return 0},max:function(k,l,T,b){var d=b[l];if(S(d)){if(d=Number(d),!S(T[k]))return T[k]=d,d;if(T[k]<d){var s=d-T[k];return T[k]=d,s}}return 0}}},40965:function(K,z,e){var S=e(50606),k=S.ONEAVGYEAR,l=S.ONEAVGMONTH,T=S.ONEDAY,b=S.ONEHOUR,d=S.ONEMIN,s=S.ONESEC,t=e(89298).tickIncrement;function o(i,u,h,f){if(i*u<=0)return 1/0;for(var x=Math.abs(u-i),v=h.type==="date",g=r(x,v),y=0;y<10;y++){var p=r(80*g,v);if(g===p||!n(p,i,u,v,h,f))break;g=p}return g}function r(i,u){return u&&i>s?i>T?i>1.1*k?k:i>1.1*l?l:T:i>b?b:i>d?d:s:Math.pow(10,Math.floor(Math.log(i)/Math.LN10))}function n(i,u,h,f,x,v){if(f&&i>T){var g=a(u,x,v),y=a(h,x,v),p=i===k?0:1;return g[p]!==y[p]}return Math.floor(h/i)-Math.floor(u/i)>.1}function a(i,u,h){var f=u.c2d(i,k,h).split("-");return f[0]===""&&(f.unshift(),f[0]="-"+f[0]),f}K.exports=function(i,u,h,f,x){var v,g,y=-1.1*u,p=-.1*u,m=i-p,w=h[0],c=h[1],M=Math.min(o(w+p,w+m,f,x),o(c+p,c+m,f,x)),_=Math.min(o(w+y,w+p,f,x),o(c+y,c+p,f,x));if(M>_&&_<Math.abs(c-w)/4e3?(v=M,g=!1):(v=Math.min(M,_),g=!0),f.type==="date"&&v>T){var E=v===k?1:6,L=v===k?"M12":"M1";return function(C,O){var I=f.c2d(C,k,x),N=I.indexOf("-",E);N>0&&(I=I.substr(0,N));var R=f.d2c(I,0,x);if(R<C){var V=t(R,L,!1,x);(R+V)/2<C+i&&(R=V)}return O&&g?t(R,L,!0,x):R}}return function(C,O){var I=v*Math.round(C/v);return I+v/10<C&&I+.9*v<C+i&&(I+=v),O&&g&&(I-=v),I}}},72138:function(K,z,e){var S=e(92770),k=e(71828),l=e(73972),T=e(89298),b=e(75341),d=e(59575),s=e(36362),t=e(42174),o=e(40965);function r(n,a,i,u,h){var f,x,v,g,y,p,m,w=u+"bins",c=n._fullLayout,M=a["_"+u+"bingroup"],_=c._histogramBinOpts[M],E=c.barmode==="overlay",L=function(le){return i.r2c(le,0,g)},C=function(le){return i.c2r(le,0,g)},O=i.type==="date"?function(le){return le||le===0?k.cleanDate(le,null,g):null}:function(le){return S(le)?Number(le):null};function I(le,de,Ce){de[le+"Found"]?(de[le]=O(de[le]),de[le]===null&&(de[le]=Ce[le])):(p[le]=de[le]=Ce[le],k.nestedProperty(x[0],w+"."+le).set(Ce[le]))}if(a["_"+u+"autoBinFinished"])delete a["_"+u+"autoBinFinished"];else{x=_.traces;var N=[],R=!0,V=!1,F=!1;for(f=0;f<x.length;f++)if((v=x[f]).visible){var D=_.dirs[f];y=v["_"+D+"pos0"]=i.makeCalcdata(v,D),N=k.concat(N,y),delete v["_"+u+"autoBinFinished"],a.visible===!0&&(R?R=!1:(delete v._autoBin,v["_"+u+"autoBinFinished"]=1),l.traceIs(v,"2dMap")&&(V=!0),v.type==="histogram2dcontour"&&(F=!0))}g=x[0][u+"calendar"];var U=T.autoBin(N,i,_.nbins,V,g,_.sizeFound&&_.size),j=x[0]._autoBin={};if(p=j[_.dirs[0]]={},F&&(_.size||(U.start=C(T.tickIncrement(L(U.start),U.size,!0,g))),_.end===void 0&&(U.end=C(T.tickIncrement(L(U.end),U.size,!1,g)))),E&&!l.traceIs(a,"2dMap")&&U._dataSpan===0&&i.type!=="category"&&i.type!=="multicategory"){if(h)return[U,y,!0];U=function(le,de,Ce,xe,_e){var we,Ae,$,oe=le._fullLayout,pe=function(nt,tt){for(var ot=tt.xaxis,pt=tt.yaxis,Tt=tt.orientation,yt=[],dt=nt._fullData,Pt=0;Pt<dt.length;Pt++){var Et=dt[Pt];Et.type==="histogram"&&Et.visible===!0&&Et.orientation===Tt&&Et.xaxis===ot&&Et.yaxis===pt&&yt.push(Et)}return yt}(le,de),ye=!1,ke=1/0,De=[de];for(we=0;we<pe.length;we++)if((Ae=pe[we])===de)ye=!0;else if(ye){var Pe=r(le,Ae,Ce,xe,!0),Re=Pe[0],fe=Pe[2];Ae["_"+xe+"autoBinFinished"]=1,Ae["_"+xe+"pos0"]=Pe[1],fe?De.push(Ae):ke=Math.min(ke,Re.size)}else $=oe._histogramBinOpts[Ae["_"+xe+"bingroup"]],ke=Math.min(ke,$.size||Ae[_e].size);var ve=new Array(De.length);for(we=0;we<De.length;we++)for(var Te=De[we]["_"+xe+"pos0"],ze=0;ze<Te.length;ze++)if(Te[ze]!==void 0){ve[we]=Te[ze];break}for(isFinite(ke)||(ke=k.distinctVals(ve).minDiff),we=0;we<De.length;we++){var He=(Ae=De[we])[xe+"calendar"],Ve={start:Ce.c2r(ve[we]-ke/2,0,He),end:Ce.c2r(ve[we]+ke/2,0,He),size:ke};Ae._input[_e]=Ae[_e]=Ve,($=oe._histogramBinOpts[Ae["_"+xe+"bingroup"]])&&k.extendFlat($,Ve)}return de[_e]}(n,a,i,u,w)}(m=v.cumulative||{}).enabled&&m.currentbin!=="include"&&(m.direction==="decreasing"?U.start=C(T.tickIncrement(L(U.start),U.size,!0,g)):U.end=C(T.tickIncrement(L(U.end),U.size,!1,g))),_.size=U.size,_.sizeFound||(p.size=U.size,k.nestedProperty(x[0],w+".size").set(U.size)),I("start",_,U),I("end",_,U)}y=a["_"+u+"pos0"],delete a["_"+u+"pos0"];var J=a._input[w]||{},X=k.extendFlat({},_),Z=_.start,Y=i.r2l(J.start),W=Y!==void 0;if((_.startFound||W)&&Y!==i.r2l(Z)){var Q=W?Y:k.aggNums(Math.min,null,y),ne={type:i.type==="category"||i.type==="multicategory"?"linear":i.type,r2l:i.r2l,dtick:_.size,tick0:Z,calendar:g,range:[Q,T.tickIncrement(Q,_.size,!1,g)].map(i.l2r)},re=T.tickFirst(ne);re>i.r2l(Q)&&(re=T.tickIncrement(re,_.size,!0,g)),X.start=i.l2r(re),W||k.nestedProperty(a,w+".start").set(X.start)}var ie=_.end,se=i.r2l(J.end),ge=se!==void 0;if((_.endFound||ge)&&se!==i.r2l(ie)){var ue=ge?se:k.aggNums(Math.max,null,y);X.end=i.l2r(ue),ge||k.nestedProperty(a,w+".start").set(X.end)}var ce="autobin"+u;return a._input[ce]===!1&&(a._input[w]=k.extendFlat({},a[w]||{}),delete a._input[ce],delete a[ce]),[X,y]}K.exports={calc:function(n,a){var i,u,h,f,x=[],v=[],g=a.orientation==="h",y=T.getFromId(n,g?a.yaxis:a.xaxis),p=g?"y":"x",m={x:"y",y:"x"}[p],w=a[p+"calendar"],c=a.cumulative,M=r(n,a,y,p),_=M[0],E=M[1],L=typeof _.size=="string",C=[],O=L?C:_,I=[],N=[],R=[],V=0,F=a.histnorm,D=a.histfunc,U=F.indexOf("density")!==-1;c.enabled&&U&&(F=F.replace(/ ?density$/,""),U=!1);var j,J=D==="max"||D==="min"?null:0,X=d.count,Z=s[F],Y=!1,W=function(Ae){return y.r2c(Ae,0,w)};for(k.isArrayOrTypedArray(a[m])&&D!=="count"&&(j=a[m],Y=D==="avg",X=d[D]),i=W(_.start),h=W(_.end)+(i-T.tickIncrement(i,_.size,!1,w))/1e6;i<h&&x.length<1e6&&(u=T.tickIncrement(i,_.size,!1,w),x.push((i+u)/2),v.push(J),R.push([]),C.push(i),U&&I.push(1/(u-i)),Y&&N.push(0),!(u<=i));)i=u;C.push(i),L||y.type!=="date"||(O={start:W(O.start),end:W(O.end),size:O.size}),n._fullLayout._roundFnOpts||(n._fullLayout._roundFnOpts={});var Q=a["_"+p+"bingroup"],ne={leftGap:1/0,rightGap:1/0};Q&&(n._fullLayout._roundFnOpts[Q]||(n._fullLayout._roundFnOpts[Q]=ne),ne=n._fullLayout._roundFnOpts[Q]);var re,ie=v.length,se=!0,ge=ne.leftGap,ue=ne.rightGap,ce={};for(i=0;i<E.length;i++){var le=E[i];(f=k.findBin(le,O))>=0&&f<ie&&(V+=X(f,i,v,j,N),se&&R[f].length&&le!==E[R[f][0]]&&(se=!1),R[f].push(i),ce[i]=f,ge=Math.min(ge,le-C[f]),ue=Math.min(ue,C[f+1]-le))}ne.leftGap=ge,ne.rightGap=ue,se||(re=function(Ae,$){return function(){var oe=n._fullLayout._roundFnOpts[Q];return o(oe.leftGap,oe.rightGap,C,y,w)(Ae,$)}}),Y&&(V=t(v,N)),Z&&Z(v,V,I),c.enabled&&function(Ae,$,oe){var pe,ye,ke;function De(Re){ke=Ae[Re],Ae[Re]/=2}function Pe(Re){ye=Ae[Re],Ae[Re]=ke+ye/2,ke+=ye}if(oe==="half")if($==="increasing")for(De(0),pe=1;pe<Ae.length;pe++)Pe(pe);else for(De(Ae.length-1),pe=Ae.length-2;pe>=0;pe--)Pe(pe);else if($==="increasing"){for(pe=1;pe<Ae.length;pe++)Ae[pe]+=Ae[pe-1];oe==="exclude"&&(Ae.unshift(0),Ae.pop())}else{for(pe=Ae.length-2;pe>=0;pe--)Ae[pe]+=Ae[pe+1];oe==="exclude"&&(Ae.push(0),Ae.shift())}}(v,c.direction,c.currentbin);var de=Math.min(x.length,v.length),Ce=[],xe=0,_e=de-1;for(i=0;i<de;i++)if(v[i]){xe=i;break}for(i=de-1;i>=xe;i--)if(v[i]){_e=i;break}for(i=xe;i<=_e;i++)if(S(x[i])&&S(v[i])){var we={p:x[i],s:v[i],b:0};c.enabled||(we.pts=R[i],se?we.ph0=we.ph1=R[i].length?E[R[i][0]]:x[i]:(a._computePh=!0,we.ph0=re(C[i]),we.ph1=re(C[i+1],!0))),Ce.push(we)}return Ce.length===1&&(Ce[0].width1=T.tickIncrement(Ce[0].p,_.size,!1,w)-Ce[0].p),b(Ce,a),k.isArrayOrTypedArray(a.selectedpoints)&&k.tagSelected(Ce,a,ce),Ce},calcAllAutoBins:r}},72406:function(K){K.exports={eventDataKeys:["binNumber"]}},82222:function(K,z,e){var S=e(71828),k=e(41675),l=e(73972).traceIs,T=e(26125),b=S.nestedProperty,d=e(99082).getAxisGroup,s=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],t=["x","y"];K.exports=function(o,r){var n,a,i,u,h,f,x,v=r._histogramBinOpts={},g=[],y={},p=[];function m(U,j){return S.coerce(n._input,n,n._module.attributes,U,j)}function w(U){return U.orientation==="v"?"x":"y"}function c(U,j,J){var X=U.uid+"__"+J;j||(j=X);var Z=function(ne,re){return k.getFromTrace({_fullLayout:r},ne,re).type}(U,J),Y=U[J+"calendar"]||"",W=v[j],Q=!0;W&&(Z===W.axType&&Y===W.calendar?(Q=!1,W.traces.push(U),W.dirs.push(J)):(j=X,Z!==W.axType&&S.warn(["Attempted to group the bins of trace",U.index,"set on a","type:"+Z,"axis","with bins on","type:"+W.axType,"axis."].join(" ")),Y!==W.calendar&&S.warn(["Attempted to group the bins of trace",U.index,"set with a",Y,"calendar","with bins",W.calendar?"on a "+W.calendar+" calendar":"w/o a set calendar"].join(" ")))),Q&&(v[j]={traces:[U],dirs:[J],axType:Z,calendar:U[J+"calendar"]||""}),U["_"+J+"bingroup"]=j}for(h=0;h<o.length;h++)n=o[h],l(n,"histogram")&&(g.push(n),delete n._xautoBinFinished,delete n._yautoBinFinished,l(n,"2dMap")||T(n._input,n,r,m));var M=r._alignmentOpts||{};for(h=0;h<g.length;h++){if(n=g[h],i="",!l(n,"2dMap")){if(u=w(n),r.barmode==="group"&&n.alignmentgroup){var _=n[u+"axis"],E=d(r,_)+n.orientation;(M[E]||{})[n.alignmentgroup]&&(i=E)}i||r.barmode==="overlay"||(i=d(r,n.xaxis)+d(r,n.yaxis)+w(n))}i?(y[i]||(y[i]=[]),y[i].push(n)):p.push(n)}for(i in y)if((a=y[i]).length!==1){var L=!1;for(a.length&&(n=a[0],L=m("bingroup")),i=L||i,h=0;h<a.length;h++){var C=(n=a[h])._input.bingroup;C&&C!==i&&S.warn(["Trace",n.index,"must match","within bingroup",i+".","Ignoring its bingroup:",C,"setting."].join(" ")),n.bingroup=i,c(n,i,w(n))}}else p.push(a[0]);for(h=0;h<p.length;h++){n=p[h];var O=m("bingroup");if(l(n,"2dMap"))for(x=0;x<2;x++){var I=m((u=t[x])+"bingroup",O?O+"__"+u:null);c(n,I,u)}else c(n,O,w(n))}for(i in v){var N=v[i];for(a=N.traces,f=0;f<s.length;f++){var R,V,F=s[f],D=F.name;if(D!=="nbins"||!N.sizeFound){for(h=0;h<a.length;h++){if(n=a[h],u=N.dirs[h],R=F.aStr[u],b(n._input,R).get()!==void 0){N[D]=m(R),N[D+"Found"]=!0;break}(V=(n._autoBin||{})[u]||{})[D]&&b(n,R).set(V[D])}if(D==="start"||D==="end")for(;h<a.length;h++)(n=a[h])["_"+u+"bingroup"]&&m(R,(V=(n._autoBin||{})[u]||{})[D]);D!=="nbins"||N.sizeFound||N.nbinsFound||(n=a[0],N[D]=m(R))}}}}},11385:function(K,z,e){var S=e(73972),k=e(71828),l=e(7901),T=e(90769).handleText,b=e(98340),d=e(7745);K.exports=function(s,t,o,r){function n(p,m){return k.coerce(s,t,d,p,m)}var a=n("x"),i=n("y");n("cumulative.enabled")&&(n("cumulative.direction"),n("cumulative.currentbin")),n("text");var u=n("textposition");T(s,t,r,n,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),n("hovertext"),n("hovertemplate"),n("xhoverformat"),n("yhoverformat");var h=n("orientation",i&&!a?"h":"v"),f=h==="v"?"x":"y",x=h==="v"?"y":"x",v=a&&i?Math.min(k.minRowLength(a)&&k.minRowLength(i)):k.minRowLength(t[f]||[]);if(v){t._length=v,S.getComponentMethod("calendars","handleTraceDefaults")(s,t,["x","y"],r),t[x]&&n("histfunc"),n("histnorm"),n("autobin"+f),b(s,t,n,o,r),k.coerceSelectionMarkerOpacity(t,n);var g=(t.marker.line||{}).color,y=S.getComponentMethod("errorbars","supplyDefaults");y(s,t,g||l.defaultLine,{axis:"y"}),y(s,t,g||l.defaultLine,{axis:"x",inherit:"y"})}else t.visible=!1}},84402:function(K){K.exports=function(z,e,S,k,l){if(z.x="xVal"in e?e.xVal:e.x,z.y="yVal"in e?e.yVal:e.y,"zLabelVal"in e&&(z.z=e.zLabelVal),e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),!(S.cumulative||{}).enabled){var T,b=Array.isArray(l)?k[0].pts[l[0]][l[1]]:k[l].pts;if(z.pointNumbers=b,z.binNumber=z.pointNumber,delete z.pointNumber,delete z.pointIndex,S._indexToPoints){T=[];for(var d=0;d<b.length;d++)T=T.concat(S._indexToPoints[b[d]])}else T=b;z.pointIndices=T}return z}},76440:function(K,z,e){var S=e(95423).hoverPoints,k=e(89298).hoverLabelText;K.exports=function(l,T,b,d,s){var t=S(l,T,b,d,s);if(t){var o=(l=t[0]).cd[l.index],r=l.cd[0].trace;if(!r.cumulative.enabled){var n=r.orientation==="h"?"y":"x";l[n+"Label"]=k(l[n+"a"],[o.ph0,o.ph1],r[n+"hoverformat"])}return t}}},36071:function(K,z,e){K.exports={attributes:e(7745),layoutAttributes:e(43641),supplyDefaults:e(11385),crossTraceDefaults:e(82222),supplyLayoutDefaults:e(13957),calc:e(72138).calc,crossTraceCalc:e(11661).crossTraceCalc,plot:e(17295).plot,layerName:"barlayer",style:e(16688).style,styleOnSelect:e(16688).styleOnSelect,colorbar:e(4898),hoverPoints:e(76440),selectPoints:e(81974),eventData:e(84402),moduleType:"trace",name:"histogram",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},36362:function(K){K.exports={percent:function(z,e){for(var S=z.length,k=100/e,l=0;l<S;l++)z[l]*=k},probability:function(z,e){for(var S=z.length,k=0;k<S;k++)z[k]/=e},density:function(z,e,S,k){var l=z.length;k=k||1;for(var T=0;T<l;T++)z[T]*=S[T]*k},"probability density":function(z,e,S,k){var l=z.length;k&&(e/=k);for(var T=0;T<l;T++)z[T]*=S[T]/e}}},35361:function(K,z,e){var S=e(7745),k=e(17656),l=e(21606),T=e(9012),b=e(12663).axisHoverFormat,d=e(5386).fF,s=e(5386).si,t=e(50693),o=e(1426).extendFlat;K.exports=o({x:S.x,y:S.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:S.histnorm,histfunc:S.histfunc,nbinsx:S.nbinsx,xbins:k("x"),nbinsy:S.nbinsy,ybins:k("y"),autobinx:S.autobinx,autobiny:S.autobiny,bingroup:o({},S.bingroup,{}),xbingroup:o({},S.bingroup,{}),ybingroup:o({},S.bingroup,{}),xgap:l.xgap,ygap:l.ygap,zsmooth:l.zsmooth,xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z",1),hovertemplate:d({},{keys:"z"}),texttemplate:s({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:l.textfont,showlegend:o({},T.showlegend,{dflt:!1})},t("",{cLetter:"z",autoColorDflt:!1}))},17562:function(K,z,e){var S=e(71828),k=e(89298),l=e(59575),T=e(36362),b=e(42174),d=e(40965),s=e(72138).calcAllAutoBins;function t(n,a,i,u){var h,f=new Array(n);if(u)for(h=0;h<n;h++)f[h]=1/(a[h+1]-a[h]);else{var x=1/i;for(h=0;h<n;h++)f[h]=x}return f}function o(n,a){return{start:n(a.start),end:n(a.end),size:a.size}}function r(n,a,i,u,h,f){var x,v=n.length-1,g=new Array(v),y=d(i,u,n,h,f);for(x=0;x<v;x++){var p=(a||[])[x];g[x]=p===void 0?[y(n[x]),y(n[x+1],!0)]:[p,p]}return g}K.exports=function(n,a){var i,u,h,f,x=k.getFromId(n,a.xaxis),v=k.getFromId(n,a.yaxis),g=a.xcalendar,y=a.ycalendar,p=function(pt){return x.r2c(pt,0,g)},m=function(pt){return v.r2c(pt,0,y)},w=s(n,a,x,"x"),c=w[0],M=w[1],_=s(n,a,v,"y"),E=_[0],L=_[1],C=a._length;M.length>C&&M.splice(C,M.length-C),L.length>C&&L.splice(C,L.length-C);var O=[],I=[],N=[],R=typeof c.size=="string",V=typeof E.size=="string",F=[],D=[],U=R?F:c,j=V?D:E,J=0,X=[],Z=[],Y=a.histnorm,W=a.histfunc,Q=Y.indexOf("density")!==-1,ne=W==="max"||W==="min"?null:0,re=l.count,ie=T[Y],se=!1,ge=[],ue=[],ce="z"in a?a.z:"marker"in a&&Array.isArray(a.marker.color)?a.marker.color:"";ce&&W!=="count"&&(se=W==="avg",re=l[W]);var le=c.size,de=p(c.start),Ce=p(c.end)+(de-k.tickIncrement(de,le,!1,g))/1e6;for(i=de;i<Ce;i=k.tickIncrement(i,le,!1,g))I.push(ne),F.push(i),se&&N.push(0);F.push(i);var xe,_e=I.length,we=(i-de)/_e,Ae=(xe=de+we/2,x.c2r(xe,0,g)),$=E.size,oe=m(E.start),pe=m(E.end)+(oe-k.tickIncrement(oe,$,!1,y))/1e6;for(i=oe;i<pe;i=k.tickIncrement(i,$,!1,y)){O.push(I.slice()),D.push(i);var ye=new Array(_e);for(u=0;u<_e;u++)ye[u]=[];Z.push(ye),se&&X.push(N.slice())}D.push(i);var ke=O.length,De=(i-oe)/ke,Pe=function(pt){return v.c2r(pt,0,y)}(oe+De/2);Q&&(ge=t(I.length,U,we,R),ue=t(O.length,j,De,V)),R||x.type!=="date"||(U=o(p,U)),V||v.type!=="date"||(j=o(m,j));var Re=!0,fe=!0,ve=new Array(_e),Te=new Array(ke),ze=1/0,He=1/0,Ve=1/0,nt=1/0;for(i=0;i<C;i++){var tt=M[i],ot=L[i];h=S.findBin(tt,U),f=S.findBin(ot,j),h>=0&&h<_e&&f>=0&&f<ke&&(J+=re(h,i,O[f],ce,X[f]),Z[f][h].push(i),Re&&(ve[h]===void 0?ve[h]=tt:ve[h]!==tt&&(Re=!1)),fe&&(Te[f]===void 0?Te[f]=ot:Te[f]!==ot&&(fe=!1)),ze=Math.min(ze,tt-F[h]),He=Math.min(He,F[h+1]-tt),Ve=Math.min(Ve,ot-D[f]),nt=Math.min(nt,D[f+1]-ot))}if(se)for(f=0;f<ke;f++)J+=b(O[f],X[f]);if(ie)for(f=0;f<ke;f++)ie(O[f],J,ge,ue[f]);return{x:M,xRanges:r(F,Re&&ve,ze,He,x,g),x0:Ae,dx:we,y:L,yRanges:r(D,fe&&Te,Ve,nt,v,y),y0:Pe,dy:De,z:O,pts:Z}}},93888:function(K,z,e){var S=e(71828),k=e(75238),l=e(49901),T=e(1586),b=e(58623),d=e(35361);K.exports=function(s,t,o,r){function n(a,i){return S.coerce(s,t,d,a,i)}k(s,t,n,r),t.visible!==!1&&(l(s,t,n,r),T(s,t,r,n,{prefix:"",cLetter:"z"}),n("hovertemplate"),b(n,r),n("xhoverformat"),n("yhoverformat"))}},76128:function(K,z,e){var S=e(46248),k=e(89298).hoverLabelText;K.exports=function(l,T,b,d,s){var t=S(l,T,b,d,s);if(t){var o=(l=t[0]).index,r=o[0],n=o[1],a=l.cd[0],i=a.trace,u=a.xRanges[n],h=a.yRanges[r];return l.xLabel=k(l.xa,[u[0],u[1]],i.xhoverformat),l.yLabel=k(l.ya,[h[0],h[1]],i.yhoverformat),t}}},43905:function(K,z,e){K.exports={attributes:e(35361),supplyDefaults:e(93888),crossTraceDefaults:e(82222),calc:e(90757),plot:e(50347),layerName:"heatmaplayer",colorbar:e(61243),style:e(70035),hoverPoints:e(76128),eventData:e(84402),moduleType:"trace",name:"histogram2d",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},75238:function(K,z,e){var S=e(73972),k=e(71828);K.exports=function(l,T,b,d){var s=b("x"),t=b("y"),o=k.minRowLength(s),r=k.minRowLength(t);o&&r?(T._length=Math.min(o,r),S.getComponentMethod("calendars","handleTraceDefaults")(l,T,["x","y"],d),(b("z")||b("marker.color"))&&b("histfunc"),b("histnorm"),b("autobinx"),b("autobiny")):T.visible=!1}},99066:function(K,z,e){var S=e(35361),k=e(70600),l=e(50693),T=e(12663).axisHoverFormat,b=e(1426).extendFlat;K.exports=b({x:S.x,y:S.y,z:S.z,marker:S.marker,histnorm:S.histnorm,histfunc:S.histfunc,nbinsx:S.nbinsx,xbins:S.xbins,nbinsy:S.nbinsy,ybins:S.ybins,autobinx:S.autobinx,autobiny:S.autobiny,bingroup:S.bingroup,xbingroup:S.xbingroup,ybingroup:S.ybingroup,autocontour:k.autocontour,ncontours:k.ncontours,contours:k.contours,line:{color:k.line.color,width:b({},k.line.width,{dflt:.5}),dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:S.hovertemplate,texttemplate:k.texttemplate,textfont:k.textfont},l("",{cLetter:"z",editTypeOverride:"calc"}))},62654:function(K,z,e){var S=e(71828),k=e(75238),l=e(67217),T=e(8724),b=e(58623),d=e(99066);K.exports=function(s,t,o,r){function n(a,i){return S.coerce(s,t,d,a,i)}k(s,t,n,r),t.visible!==!1&&(l(s,t,n,function(a){return S.coerce2(s,t,d,a)}),T(s,t,n,r),n("xhoverformat"),n("yhoverformat"),n("hovertemplate"),t.contours&&t.contours.coloring==="heatmap"&&b(n,r))}},35902:function(K,z,e){K.exports={attributes:e(99066),supplyDefaults:e(62654),crossTraceDefaults:e(82222),calc:e(27529),plot:e(29854).plot,layerName:"contourlayer",style:e(84426),colorbar:e(90654),hoverPoints:e(52421),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},46291:function(K,z,e){var S=e(5386).fF,k=e(5386).si,l=e(50693),T=e(27670).Y,b=e(34e3),d=e(57564),s=e(45802),t=e(43473),o=e(1426).extendFlat;K.exports={labels:d.labels,parents:d.parents,values:d.values,branchvalues:d.branchvalues,count:d.count,level:d.level,maxdepth:d.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:s.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:o({colors:d.marker.colors,line:d.marker.line,editType:"calc"},l("marker",{colorAttr:"colors",anim:!1})),leaf:d.leaf,pathbar:s.pathbar,text:b.text,textinfo:d.textinfo,texttemplate:k({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:b.hovertext,hoverinfo:d.hoverinfo,hovertemplate:S({},{keys:t.eventDataKeys}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:s.outsidetextfont,textposition:s.textposition,sort:b.sort,root:d.root,domain:T({name:"icicle",trace:!0,editType:"calc"})}},96346:function(K,z,e){var S=e(74875);z.name="icicle",z.plot=function(k,l,T,b){S.plotBasePlot(z.name,k,l,T,b)},z.clean=function(k,l,T,b){S.cleanBasePlot(z.name,k,l,T,b)}},46584:function(K,z,e){var S=e(52147);z.y=function(k,l){return S.calc(k,l)},z.T=function(k){return S._runCrossTraceCalc("icicle",k)}},56524:function(K,z,e){var S=e(71828),k=e(46291),l=e(7901),T=e(27670).c,b=e(90769).handleText,d=e(97313).TEXTPAD,s=e(21081),t=s.hasColorscale,o=s.handleDefaults;K.exports=function(r,n,a,i){function u(p,m){return S.coerce(r,n,k,p,m)}var h=u("labels"),f=u("parents");if(h&&h.length&&f&&f.length){var x=u("values");x&&x.length?u("branchvalues"):u("count"),u("level"),u("maxdepth"),u("tiling.orientation"),u("tiling.flip"),u("tiling.pad");var v=u("text");u("texttemplate"),n.texttemplate||u("textinfo",Array.isArray(v)?"text+label":"label"),u("hovertext"),u("hovertemplate");var g=u("pathbar.visible");b(r,n,i,u,"auto",{hasPathbar:g,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),u("textposition"),u("marker.line.width")&&u("marker.line.color",i.paper_bgcolor),u("marker.colors");var y=n._hasColorscale=t(r,"marker","colors")||(r.marker||{}).coloraxis;y&&o(r,n,i,u,{prefix:"marker.",cLetter:"c"}),u("leaf.opacity",y?1:.7),n._hovered={marker:{line:{width:2,color:l.contrast(i.paper_bgcolor)}}},g&&(u("pathbar.thickness",n.pathbar.textfont.size+2*d),u("pathbar.side"),u("pathbar.edgeshape")),u("sort"),u("root.color"),T(n,i,u),n._length=null}else n.visible=!1}},90666:function(K,z,e){var S=e(39898),k=e(71828),l=e(91424),T=e(63893),b=e(21538),d=e(82454).styleOne,s=e(43473),t=e(2791),o=e(83523),r=e(24714).formatSliceLabel,n=!1;K.exports=function(a,i,u,h,f){var x=f.width,v=f.height,g=f.viewX,y=f.viewY,p=f.pathSlice,m=f.toMoveInsideSlice,w=f.strTransform,c=f.hasTransition,M=f.handleSlicesExit,_=f.makeUpdateSliceInterpolator,E=f.makeUpdateTextInterpolator,L=f.prevEntry,C=a._context.staticPlot,O=a._fullLayout,I=i[0].trace,N=I.textposition.indexOf("left")!==-1,R=I.textposition.indexOf("right")!==-1,V=I.textposition.indexOf("bottom")!==-1,F=b(u,[x,v],{flipX:I.tiling.flip.indexOf("x")>-1,flipY:I.tiling.flip.indexOf("y")>-1,orientation:I.tiling.orientation,pad:{inner:I.tiling.pad},maxDepth:I._maxDepth}).descendants(),D=1/0,U=-1/0;F.forEach(function(Y){var W=Y.depth;W>=I._maxDepth?(Y.x0=Y.x1=(Y.x0+Y.x1)/2,Y.y0=Y.y1=(Y.y0+Y.y1)/2):(D=Math.min(D,W),U=Math.max(U,W))}),h=h.data(F,t.getPtId),I._maxVisibleLayers=isFinite(U)?U-D+1:0,h.enter().append("g").classed("slice",!0),M(h,n,{},[x,v],p),h.order();var j=null;if(c&&L){var J=t.getPtId(L);h.each(function(Y){j===null&&t.getPtId(Y)===J&&(j={x0:Y.x0,x1:Y.x1,y0:Y.y0,y1:Y.y1})})}var X=function(){return j||{x0:0,x1:x,y0:0,y1:v}},Z=h;return c&&(Z=Z.transition().each("end",function(){var Y=S.select(this);t.setSliceCursor(Y,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),Z.each(function(Y){Y._x0=g(Y.x0),Y._x1=g(Y.x1),Y._y0=y(Y.y0),Y._y1=y(Y.y1),Y._hoverX=g(Y.x1-I.tiling.pad),Y._hoverY=y(V?Y.y1-I.tiling.pad/2:Y.y0+I.tiling.pad/2);var W=S.select(this),Q=k.ensureSingle(W,"path","surface",function(se){se.style("pointer-events",C?"none":"all")});c?Q.transition().attrTween("d",function(se){var ge=_(se,n,X(),[x,v],{orientation:I.tiling.orientation,flipX:I.tiling.flip.indexOf("x")>-1,flipY:I.tiling.flip.indexOf("y")>-1});return function(ue){return p(ge(ue))}}):Q.attr("d",p),W.call(o,u,a,i,{styleOne:d,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{isTransitioning:a._transitioning}),Q.call(d,Y,I,{hovered:!1}),Y.x0===Y.x1||Y.y0===Y.y1?Y._text="":Y._text=r(Y,u,I,i,O)||"";var ne=k.ensureSingle(W,"g","slicetext"),re=k.ensureSingle(ne,"text","",function(se){se.attr("data-notex",1)}),ie=k.ensureUniformFontSize(a,t.determineTextFont(I,Y,O.font));re.text(Y._text||" ").classed("slicetext",!0).attr("text-anchor",R?"end":N?"start":"middle").call(l.font,ie).call(T.convertToTspans,a),Y.textBB=l.bBox(re.node()),Y.transform=m(Y,{fontSize:ie.size}),Y.transform.fontSize=ie.size,c?re.transition().attrTween("transform",function(se){var ge=E(se,n,X(),[x,v]);return function(ue){return w(ge(ue))}}):re.attr("transform",w(Y))}),j}},69816:function(K,z,e){K.exports={moduleType:"trace",name:"icicle",basePlotModule:e(96346),categories:[],animatable:!0,attributes:e(46291),layoutAttributes:e(92894),supplyDefaults:e(56524),supplyLayoutDefaults:e(21070),calc:e(46584).y,crossTraceCalc:e(46584).T,plot:e(85596),style:e(82454).style,colorbar:e(4898),meta:{}}},92894:function(K){K.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},21070:function(K,z,e){var S=e(71828),k=e(92894);K.exports=function(l,T){function b(d,s){return S.coerce(l,T,k,d,s)}b("iciclecolorway",T.colorway),b("extendiciclecolors")}},21538:function(K,z,e){var S=e(674),k=e(14102);K.exports=function(l,T,b){var d=b.flipX,s=b.flipY,t=b.orientation==="h",o=b.maxDepth,r=T[0],n=T[1];o&&(r=(l.height+1)*T[0]/Math.min(l.height+1,o),n=(l.height+1)*T[1]/Math.min(l.height+1,o));var a=S.partition().padding(b.pad.inner).size(t?[T[1],r]:[T[0],n])(l);return(t||d||s)&&k(a,T,{swapXY:t,flipX:d,flipY:s}),a}},85596:function(K,z,e){var S=e(80694),k=e(90666);K.exports=function(l,T,b,d){return S(l,T,b,d,{type:"icicle",drawDescendants:k})}},82454:function(K,z,e){var S=e(39898),k=e(7901),l=e(71828),T=e(72597).resizeText;function b(d,s,t){var o=s.data.data,r=!s.children,n=o.i,a=l.castOption(t,n,"marker.line.color")||k.defaultLine,i=l.castOption(t,n,"marker.line.width")||0;d.style("stroke-width",i).call(k.fill,o.color).call(k.stroke,a).style("opacity",r?t.leaf.opacity:null)}K.exports={style:function(d){var s=d._fullLayout._iciclelayer.selectAll(".trace");T(d,s,"icicle"),s.each(function(t){var o=S.select(this),r=t[0].trace;o.style("opacity",r.opacity),o.selectAll("path.surface").each(function(n){S.select(this).call(b,n,r)})})},styleOne:b}},17230:function(K,z,e){for(var S=e(9012),k=e(5386).fF,l=e(1426).extendFlat,T=e(51877).colormodel,b=["rgb","rgba","rgba256","hsl","hsla"],d=[],s=[],t=0;t<b.length;t++){var o=T[b[t]];d.push("For the `"+b[t]+"` colormodel, it is ["+(o.zminDflt||o.min).join(", ")+"]."),s.push("For the `"+b[t]+"` colormodel, it is ["+(o.zmaxDflt||o.max).join(", ")+"].")}K.exports=l({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:b,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:l({},S.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:k({},{keys:["z","color","colormodel"]}),transforms:void 0})},71113:function(K,z,e){var S=e(71828),k=e(51877),l=e(92770),T=e(89298),b=e(71828).maxRowLength,d=e(67395).A;function s(o,r,n,a){return function(i){return S.constrain((i-o)*r,n,a)}}function t(o,r){return function(n){return S.constrain(n,o,r)}}K.exports=function(o,r){var n,a;if(r._hasZ)n=r.z.length,a=b(r.z);else if(r._hasSource){var i=d(r.source);n=i.height,a=i.width}var u,h=T.getFromId(o,r.xaxis||"x"),f=T.getFromId(o,r.yaxis||"y"),x=h.d2c(r.x0)-r.dx/2,v=f.d2c(r.y0)-r.dy/2,g=[x,x+a*r.dx],y=[v,v+n*r.dy];if(h&&h.type==="log")for(u=0;u<a;u++)g.push(x+u*r.dx);if(f&&f.type==="log")for(u=0;u<n;u++)y.push(v+u*r.dy);return r._extremes[h._id]=T.findExtremes(h,g),r._extremes[f._id]=T.findExtremes(f,y),r._scaler=function(p){var m=k.colormodel[p.colormodel],w=(m.colormodel||p.colormodel).length;p._sArray=[];for(var c=0;c<w;c++)m.min[c]!==p.zmin[c]||m.max[c]!==p.zmax[c]?p._sArray.push(s(p.zmin[c],(m.max[c]-m.min[c])/(p.zmax[c]-p.zmin[c]),m.min[c],m.max[c])):p._sArray.push(t(m.min[c],m.max[c]));return function(M){for(var _=M.slice(0,w),E=0;E<w;E++){var L=_[E];if(!l(L))return!1;_[E]=p._sArray[E](L)}return _}}(r),[{x0:x,y0:v,z:r.z,w:a,h:n}]}},51877:function(K){K.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(z){return z.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(z){return z.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(z){return z.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(z){var e=z.slice(0,3);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["°","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(z){var e=z.slice(0,4);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["°","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},13245:function(K,z,e){var S=e(71828),k=e(17230),l=e(51877),T=e(25095).IMAGE_URL_PREFIX;K.exports=function(b,d){function s(r,n){return S.coerce(b,d,k,r,n)}s("source"),d.source&&!d.source.match(T)&&delete d.source,d._hasSource=!!d.source;var t,o=s("z");d._hasZ=!(o===void 0||!o.length||!o[0]||!o[0].length),d._hasZ||d._hasSource?(s("x0"),s("y0"),s("dx"),s("dy"),d._hasZ?(s("colormodel","rgb"),s("zmin",(t=l.colormodel[d.colormodel]).zminDflt||t.min),s("zmax",t.zmaxDflt||t.max)):d._hasSource&&(d.colormodel="rgba256",t=l.colormodel[d.colormodel],d.zmin=t.zminDflt,d.zmax=t.zmaxDflt),s("zsmooth"),s("text"),s("hovertext"),s("hovertemplate"),d._length=null):d.visible=!1}},30835:function(K){K.exports=function(z,e){return"xVal"in e&&(z.x=e.xVal),"yVal"in e&&(z.y=e.yVal),e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),z.color=e.color,z.colormodel=e.trace.colormodel,z.z||(z.z=e.color),z}},67395:function(K,z,e){var S=e(33575),k=e(25095).IMAGE_URL_PREFIX,l=e(12856).Buffer;z.A=function(T){var b=T.replace(k,""),d=new l(b,"base64");return S(d)}},28749:function(K,z,e){var S=e(30211),k=e(71828),l=e(51877);K.exports=function(T,b,d){var s=T.cd[0],t=s.trace,o=T.xa,r=T.ya;if(!(S.inbox(b-s.x0,b-(s.x0+s.w*t.dx),0)>0||S.inbox(d-s.y0,d-(s.y0+s.h*t.dy),0)>0)){var n,a=Math.floor((b-s.x0)/t.dx),i=Math.floor(Math.abs(d-s.y0)/t.dy);if(t._hasZ?n=s.z[i][a]:t._hasSource&&(n=t._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(a,i,1,1).data),n){var u,h=s.hi||t.hoverinfo;if(h){var f=h.split("+");f.indexOf("all")!==-1&&(f=["color"]),f.indexOf("color")!==-1&&(u=!0)}var x,v=l.colormodel[t.colormodel],g=v.colormodel||t.colormodel,y=g.length,p=t._scaler(n),m=v.suffix,w=[];(t.hovertemplate||u)&&(w.push("["+[p[0]+m[0],p[1]+m[1],p[2]+m[2]].join(", ")),y===4&&w.push(", "+p[3]+m[3]),w.push("]"),w=w.join(""),T.extraText=g.toUpperCase()+": "+w),Array.isArray(t.hovertext)&&Array.isArray(t.hovertext[i])?x=t.hovertext[i][a]:Array.isArray(t.text)&&Array.isArray(t.text[i])&&(x=t.text[i][a]);var c=r.c2p(s.y0+(i+.5)*t.dy),M=s.x0+(a+.5)*t.dx,_=s.y0+(i+.5)*t.dy,E="["+n.slice(0,t.colormodel.length).join(", ")+"]";return[k.extendFlat(T,{index:[i,a],x0:o.c2p(s.x0+a*t.dx),x1:o.c2p(s.x0+(a+1)*t.dx),y0:c,y1:c,color:p,xVal:M,xLabelVal:M,yVal:_,yLabelVal:_,zLabelVal:E,text:x,hovertemplateLabels:{zLabel:E,colorLabel:w,"color[0]Label":p[0]+m[0],"color[1]Label":p[1]+m[1],"color[2]Label":p[2]+m[2],"color[3]Label":p[3]+m[3]}})]}}}},94507:function(K,z,e){K.exports={attributes:e(17230),supplyDefaults:e(13245),calc:e(71113),plot:e(60775),style:e(12826),hoverPoints:e(28749),eventData:e(30835),moduleType:"trace",name:"image",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},60775:function(K,z,e){var S=e(39898),k=e(71828),l=k.strTranslate,T=e(77922),b=e(51877),d=k.isIOS()||k.isSafari()||k.isIE();K.exports=function(s,t,o,r){var n=t.xaxis,a=t.yaxis,i=!(d||s._context._exportedPlot);k.makeTraceGroups(r,o,"im").each(function(u){var h=S.select(this),f=u[0],x=f.trace,v=(x.zsmooth==="fast"||x.zsmooth===!1&&i)&&!x._hasZ&&x._hasSource&&n.type==="linear"&&a.type==="linear";x._realImage=v;var g,y,p,m,w,c,M=f.z,_=f.x0,E=f.y0,L=f.w,C=f.h,O=x.dx,I=x.dy;for(c=0;g===void 0&&c<L;)g=n.c2p(_+c*O),c++;for(c=L;y===void 0&&c>0;)y=n.c2p(_+c*O),c--;for(c=0;m===void 0&&c<C;)m=a.c2p(E+c*I),c++;for(c=C;w===void 0&&c>0;)w=a.c2p(E+c*I),c--;y<g&&(p=y,y=g,g=p),w<m&&(p=m,m=w,w=p),v||(g=Math.max(-.5*n._length,g),y=Math.min(1.5*n._length,y),m=Math.max(-.5*a._length,m),w=Math.min(1.5*a._length,w));var N=Math.round(y-g),R=Math.round(w-m);if(N<=0||R<=0)h.selectAll("image").data([]).exit().remove();else{var V=h.selectAll("image").data([u]);V.enter().append("svg:image").attr({xmlns:T.svg,preserveAspectRatio:"none"}),V.exit().remove();var F=x.zsmooth===!1?b.pixelatedStyle:"";if(v){var D=k.simpleMap(n.range,n.r2l),U=k.simpleMap(a.range,a.r2l),j=D[1]<D[0],J=U[1]>U[0];if(j||J){var X=g+N/2,Z=m+R/2;F+="transform:"+l(X+"px",Z+"px")+"scale("+(j?-1:1)+","+(J?-1:1)+")"+l(-X+"px",-Z+"px")+";"}}V.attr("style",F);var Y=new Promise(function(Q){if(x._hasZ)Q();else if(x._hasSource)if(x._canvas&&x._canvas.el.width===L&&x._canvas.el.height===C&&x._canvas.source===x.source)Q();else{var ne=document.createElement("canvas");ne.width=L,ne.height=C;var re=ne.getContext("2d",{willReadFrequently:!0});x._image=x._image||new Image;var ie=x._image;ie.onload=function(){re.drawImage(ie,0,0),x._canvas={el:ne,source:x.source},Q()},ie.setAttribute("src",x.source)}}).then(function(){var Q,ne;if(x._hasZ)ne=W(function(ie,se){return M[se][ie]}),Q=ne.toDataURL("image/png");else if(x._hasSource)if(v)Q=x.source;else{var re=x._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,L,C).data;ne=W(function(ie,se){var ge=4*(se*L+ie);return[re[ge],re[ge+1],re[ge+2],re[ge+3]]}),Q=ne.toDataURL("image/png")}V.attr({"xlink:href":Q,height:R,width:N,x:g,y:m})});s._promises.push(Y)}function W(Q){var ne=document.createElement("canvas");ne.width=N,ne.height=R;var re,ie=ne.getContext("2d",{willReadFrequently:!0}),se=function(Ae){return k.constrain(Math.round(n.c2p(_+Ae*O)-g),0,N)},ge=function(Ae){return k.constrain(Math.round(a.c2p(E+Ae*I)-m),0,R)},ue=b.colormodel[x.colormodel],ce=ue.colormodel||x.colormodel,le=ue.fmt;for(c=0;c<f.w;c++){var de=se(c),Ce=se(c+1);if(Ce!==de&&!isNaN(Ce)&&!isNaN(de))for(var xe=0;xe<f.h;xe++){var _e=ge(xe),we=ge(xe+1);we===_e||isNaN(we)||isNaN(_e)||!Q(c,xe)||(re=x._scaler(Q(c,xe)),ie.fillStyle=re?ce+"("+le(re).join(",")+")":"rgba(0,0,0,0)",ie.fillRect(de,_e,Ce-de,we-_e))}}return ne}})}},12826:function(K,z,e){var S=e(39898);K.exports=function(k){S.select(k).selectAll(".im image").style("opacity",function(l){return l[0].trace.opacity})}},54846:function(K,z,e){var S=e(1426).extendFlat,k=e(1426).extendDeep,l=e(30962).overrideAll,T=e(41940),b=e(22399),d=e(27670).Y,s=e(13838),t=e(44467).templatedArray,o=e(22372),r=e(12663).descriptionOnlyNumbers,n=T({editType:"plot",colorEditType:"plot"}),a={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:b.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},i={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},u=t("step",k({},a,{range:i}));K.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:d({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:S({},n,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:r("value")},font:S({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:r("value")},increasing:{symbol:{valType:"string",dflt:o.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:o.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:o.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:o.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:S({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:k({},a,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:l({range:i,visible:S({},s.visible,{dflt:!0}),tickmode:s.minor.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:S({},s.ticks,{dflt:"outside"}),ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,ticklabelstep:s.ticklabelstep,showticklabels:s.showticklabels,labelalias:s.labelalias,tickfont:T({}),tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,tickprefix:s.tickprefix,showtickprefix:s.showtickprefix,ticksuffix:s.ticksuffix,showticksuffix:s.showticksuffix,separatethousands:s.separatethousands,exponentformat:s.exponentformat,minexponent:s.minexponent,showexponent:s.showexponent,editType:"plot"},"plot"),steps:u,threshold:{line:{color:S({},a.line.color,{}),width:S({},a.line.width,{dflt:1}),editType:"plot"},thickness:S({},a.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},15970:function(K,z,e){var S=e(74875);z.name="indicator",z.plot=function(k,l,T,b){S.plotBasePlot(z.name,k,l,T,b)},z.clean=function(k,l,T,b){S.cleanBasePlot(z.name,k,l,T,b)}},24667:function(K){K.exports={calc:function(z,e){var S=[],k=e.value;typeof e._lastValue!="number"&&(e._lastValue=e.value);var l=e._lastValue,T=l;return e._hasDelta&&typeof e.delta.reference=="number"&&(T=e.delta.reference),S[0]={y:k,lastY:l,delta:k-T,relativeDelta:(k-T)/T},S}}},84577:function(K){K.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},94425:function(K,z,e){var S=e(71828),k=e(54846),l=e(27670).c,T=e(44467),b=e(85501),d=e(84577),s=e(26218),t=e(38701),o=e(96115),r=e(89426);function n(a,i){function u(h,f){return S.coerce(a,i,k.gauge.steps,h,f)}u("color"),u("line.color"),u("line.width"),u("range"),u("thickness")}K.exports={supplyDefaults:function(a,i,u,h){function f(L,C){return S.coerce(a,i,k,L,C)}l(i,h,f),f("mode"),i._hasNumber=i.mode.indexOf("number")!==-1,i._hasDelta=i.mode.indexOf("delta")!==-1,i._hasGauge=i.mode.indexOf("gauge")!==-1;var x=f("value");i._range=[0,typeof x=="number"?1.5*x:1];var v,g,y,p,m,w,c=new Array(2);function M(L,C){return S.coerce(y,p,k.gauge,L,C)}function _(L,C){return S.coerce(m,w,k.gauge.axis,L,C)}if(i._hasNumber&&(f("number.valueformat"),f("number.font.color",h.font.color),f("number.font.family",h.font.family),f("number.font.size"),i.number.font.size===void 0&&(i.number.font.size=d.defaultNumberFontSize,c[0]=!0),f("number.prefix"),f("number.suffix"),v=i.number.font.size),i._hasDelta&&(f("delta.font.color",h.font.color),f("delta.font.family",h.font.family),f("delta.font.size"),i.delta.font.size===void 0&&(i.delta.font.size=(i._hasNumber?.5:1)*(v||d.defaultNumberFontSize),c[1]=!0),f("delta.reference",i.value),f("delta.relative"),f("delta.valueformat",i.delta.relative?"2%":""),f("delta.increasing.symbol"),f("delta.increasing.color"),f("delta.decreasing.symbol"),f("delta.decreasing.color"),f("delta.position"),f("delta.prefix"),f("delta.suffix"),g=i.delta.font.size),i._scaleNumbers=(!i._hasNumber||c[0])&&(!i._hasDelta||c[1])||!1,f("title.font.color",h.font.color),f("title.font.family",h.font.family),f("title.font.size",.25*(v||g||d.defaultNumberFontSize)),f("title.text"),i._hasGauge){(y=a.gauge)||(y={}),p=T.newContainer(i,"gauge"),M("shape"),(i._isBullet=i.gauge.shape==="bullet")||f("title.align","center"),(i._isAngular=i.gauge.shape==="angular")||f("align","center"),M("bgcolor",h.paper_bgcolor),M("borderwidth"),M("bordercolor"),M("bar.color"),M("bar.line.color"),M("bar.line.width"),M("bar.thickness",d.valueThickness*(i.gauge.shape==="bullet"?.5:1)),b(y,p,{name:"steps",handleItemDefaults:n}),M("threshold.value"),M("threshold.thickness"),M("threshold.line.width"),M("threshold.line.color"),m={},y&&(m=y.axis||{}),w=T.newContainer(p,"axis"),_("visible"),i._range=_("range",i._range);var E={outerTicks:!0};s(m,w,_,"linear"),r(m,w,_,"linear",E),o(m,w,_,"linear",E),t(m,w,_,E)}else f("title.align","center"),f("align","center"),i._isAngular=i._isBullet=!1;i._length=null}}},15154:function(K,z,e){K.exports={moduleType:"trace",name:"indicator",basePlotModule:e(15970),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e(54846),supplyDefaults:e(94425).supplyDefaults,calc:e(24667).calc,plot:e(75634),meta:{}}},75634:function(K,z,e){var S=e(39898),k=e(81684).sX,l=e(81684).k4,T=e(71828),b=T.strScale,d=T.strTranslate,s=T.rad2deg,t=e(18783).MID_SHIFT,o=e(91424),r=e(84577),n=e(63893),a=e(89298),i=e(71453),u=e(52830),h=e(13838),f=e(7901),x={left:"start",center:"middle",right:"end"},v={left:0,center:.5,right:1},g=/[yzafpnµmkMGTPEZY]/;function y(_){return _&&_.duration>0}function p(_){_.each(function(E){f.stroke(S.select(this),E.line.color)}).each(function(E){f.fill(S.select(this),E.color)}).style("stroke-width",function(E){return E.line.width})}function m(_,E,L){var C=_._fullLayout,O=T.extendFlat({type:"linear",ticks:"outside",range:L,showline:!0},E),I={type:"linear",_id:"x"+E._id},N={letter:"x",font:C.font,noHover:!0,noTickson:!0};function R(V,F){return T.coerce(O,I,h,V,F)}return i(O,I,R,N,C),u(O,I,R,N),I}function w(_,E,L){return[Math.min(E/_.width,L/_.height),_,E+"x"+L]}function c(_,E,L,C){var O=document.createElementNS("http://www.w3.org/2000/svg","text"),I=S.select(O);return I.text(_).attr("x",0).attr("y",0).attr("text-anchor",L).attr("data-unformatted",_).call(n.convertToTspans,C).call(o.font,E),o.bBox(I.node())}function M(_,E,L,C,O,I){var N="_cache"+E;_[N]&&_[N].key===O||(_[N]={key:O,value:L});var R=T.aggNums(I,null,[_[N].value,C],2);return _[N].value=R,R}K.exports=function(_,E,L,C){var O,I=_._fullLayout;y(L)&&C&&(O=C()),T.makeTraceGroups(I._indicatorlayer,E,"trace").each(function(N){var R,V,F,D,U,j=N[0].trace,J=S.select(this),X=j._hasGauge,Z=j._isAngular,Y=j._isBullet,W=j.domain,Q={w:I._size.w*(W.x[1]-W.x[0]),h:I._size.h*(W.y[1]-W.y[0]),l:I._size.l+I._size.w*W.x[0],r:I._size.r+I._size.w*(1-W.x[1]),t:I._size.t+I._size.h*(1-W.y[1]),b:I._size.b+I._size.h*W.y[0]},ne=Q.l+Q.w/2,re=Q.t+Q.h/2,ie=Math.min(Q.w/2,Q.h),se=r.innerRadius*ie,ge=j.align||"center";if(V=re,X){if(Z&&(R=ne,V=re+ie/2,F=function(we){return function(Ae,$){return[$/Math.sqrt(Ae.width/2*(Ae.width/2)+Ae.height*Ae.height),Ae,$]}(we,.9*se)}),Y){var ue=r.bulletPadding,ce=1-r.bulletNumberDomainSize+ue;R=Q.l+(ce+(1-ce)*v[ge])*Q.w,F=function(we){return w(we,(r.bulletNumberDomainSize-ue)*Q.w,Q.h)}}}else R=Q.l+v[ge]*Q.w,F=function(we){return w(we,Q.w,Q.h)};(function(we,Ae,$,oe){var pe,ye,ke,De=$[0].trace,Pe=oe.numbersX,Re=oe.numbersY,fe=De.align||"center",ve=x[fe],Te=oe.transitionOpts,ze=oe.onComplete,He=T.ensureSingle(Ae,"g","numbers"),Ve=[];De._hasNumber&&Ve.push("number"),De._hasDelta&&(Ve.push("delta"),De.delta.position==="left"&&Ve.reverse());var nt=He.selectAll("text").data(Ve);function tt(Ot,Nt,zt,Ze){if(!Ot.match("s")||zt>=0==Ze>=0||Nt(zt).slice(-1).match(g)||Nt(Ze).slice(-1).match(g))return Nt;var Ye=Ot.slice().replace("s","f").replace(/\d+/,function(Ke){return parseInt(Ke)-1}),je=m(we,{tickformat:Ye});return function(Ke){return Math.abs(Ke)<1?a.tickText(je,Ke).text:Nt(Ke)}}nt.enter().append("text"),nt.attr("text-anchor",function(){return ve}).attr("class",function(Ot){return Ot}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),nt.exit().remove();var ot,pt=De.mode+De.align;if(De._hasDelta&&(ot=function(){var Ot=m(we,{tickformat:De.delta.valueformat},De._range);Ot.setScale(),a.prepTicks(Ot);var Nt=function(Ie){return a.tickText(Ot,Ie).text},zt=De.delta.suffix,Ze=De.delta.prefix,Ye=function(Ie){return De.delta.relative?Ie.relativeDelta:Ie.delta},je=function(Ie,We){return Ie===0||typeof Ie!="number"||isNaN(Ie)?"-":(Ie>0?De.delta.increasing.symbol:De.delta.decreasing.symbol)+Ze+We(Ie)+zt},Ke=function(Ie){return Ie.delta>=0?De.delta.increasing.color:De.delta.decreasing.color};De._deltaLastValue===void 0&&(De._deltaLastValue=Ye($[0]));var st=He.select("text.delta");function Se(){st.text(je(Ye($[0]),Nt)).call(f.fill,Ke($[0])).call(n.convertToTspans,we)}return st.call(o.font,De.delta.font).call(f.fill,Ke({delta:De._deltaLastValue})),y(Te)?st.transition().duration(Te.duration).ease(Te.easing).tween("text",function(){var Ie=S.select(this),We=Ye($[0]),it=De._deltaLastValue,lt=tt(De.delta.valueformat,Nt,it,We),gt=l(it,We);return De._deltaLastValue=We,function(At){Ie.text(je(gt(At),lt)),Ie.call(f.fill,Ke({delta:gt(At)}))}}).each("end",function(){Se(),ze&&ze()}).each("interrupt",function(){Se(),ze&&ze()}):Se(),ye=c(je(Ye($[0]),Nt),De.delta.font,ve,we),st}(),pt+=De.delta.position+De.delta.font.size+De.delta.font.family+De.delta.valueformat,pt+=De.delta.increasing.symbol+De.delta.decreasing.symbol,ke=ye),De._hasNumber&&(function(){var Ot=m(we,{tickformat:De.number.valueformat},De._range);Ot.setScale(),a.prepTicks(Ot);var Nt=function(Ke){return a.tickText(Ot,Ke).text},zt=De.number.suffix,Ze=De.number.prefix,Ye=He.select("text.number");function je(){var Ke=typeof $[0].y=="number"?Ze+Nt($[0].y)+zt:"-";Ye.text(Ke).call(o.font,De.number.font).call(n.convertToTspans,we)}y(Te)?Ye.transition().duration(Te.duration).ease(Te.easing).each("end",function(){je(),ze&&ze()}).each("interrupt",function(){je(),ze&&ze()}).attrTween("text",function(){var Ke=S.select(this),st=l($[0].lastY,$[0].y);De._lastValue=$[0].y;var Se=tt(De.number.valueformat,Nt,$[0].lastY,$[0].y);return function(Ie){Ke.text(Ze+Se(st(Ie))+zt)}}):je(),pe=c(Ze+Nt($[0].y)+zt,De.number.font,ve,we)}(),pt+=De.number.font.size+De.number.font.family+De.number.valueformat+De.number.suffix+De.number.prefix,ke=pe),De._hasDelta&&De._hasNumber){var Tt,yt,dt=[(pe.left+pe.right)/2,(pe.top+pe.bottom)/2],Pt=[(ye.left+ye.right)/2,(ye.top+ye.bottom)/2],Et=.75*De.delta.font.size;De.delta.position==="left"&&(Tt=M(De,"deltaPos",0,-1*(pe.width*v[De.align]+ye.width*(1-v[De.align])+Et),pt,Math.min),yt=dt[1]-Pt[1],ke={width:pe.width+ye.width+Et,height:Math.max(pe.height,ye.height),left:ye.left+Tt,right:pe.right,top:Math.min(pe.top,ye.top+yt),bottom:Math.max(pe.bottom,ye.bottom+yt)}),De.delta.position==="right"&&(Tt=M(De,"deltaPos",0,pe.width*(1-v[De.align])+ye.width*v[De.align]+Et,pt,Math.max),yt=dt[1]-Pt[1],ke={width:pe.width+ye.width+Et,height:Math.max(pe.height,ye.height),left:pe.left,right:ye.right+Tt,top:Math.min(pe.top,ye.top+yt),bottom:Math.max(pe.bottom,ye.bottom+yt)}),De.delta.position==="bottom"&&(Tt=null,yt=ye.height,ke={width:Math.max(pe.width,ye.width),height:pe.height+ye.height,left:Math.min(pe.left,ye.left),right:Math.max(pe.right,ye.right),top:pe.bottom-pe.height,bottom:pe.bottom+ye.height}),De.delta.position==="top"&&(Tt=null,yt=pe.top,ke={width:Math.max(pe.width,ye.width),height:pe.height+ye.height,left:Math.min(pe.left,ye.left),right:Math.max(pe.right,ye.right),top:pe.bottom-pe.height-ye.height,bottom:pe.bottom}),ot.attr({dx:Tt,dy:yt})}(De._hasNumber||De._hasDelta)&&He.attr("transform",function(){var Ot=oe.numbersScaler(ke);pt+=Ot[2];var Nt,zt=M(De,"numbersScale",1,Ot[0],pt,Math.min);De._scaleNumbers||(zt=1),Nt=De._isAngular?Re-zt*ke.bottom:Re-zt*(ke.top+ke.bottom)/2,De._numbersTop=zt*ke.top+Nt;var Ze=ke[fe];fe==="center"&&(Ze=(ke.left+ke.right)/2);var Ye=Pe-zt*Ze;return Ye=M(De,"numbersTranslate",0,Ye,pt,Math.max),d(Ye,Nt)+b(zt)})})(_,J,N,{numbersX:R,numbersY:V,numbersScaler:F,transitionOpts:L,onComplete:O}),X&&(D={range:j.gauge.axis.range,color:j.gauge.bgcolor,line:{color:j.gauge.bordercolor,width:0},thickness:1},U={range:j.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:j.gauge.bordercolor,width:j.gauge.borderwidth},thickness:1});var le=J.selectAll("g.angular").data(Z?N:[]);le.exit().remove();var de=J.selectAll("g.angularaxis").data(Z?N:[]);de.exit().remove(),Z&&function(we,Ae,$,oe){var pe,ye,ke,De,Pe=$[0].trace,Re=oe.size,fe=oe.radius,ve=oe.innerRadius,Te=oe.gaugeBg,ze=oe.gaugeOutline,He=[Re.l+Re.w/2,Re.t+Re.h/2+fe/2],Ve=oe.gauge,nt=oe.layer,tt=oe.transitionOpts,ot=oe.onComplete,pt=Math.PI/2;function Tt(At){var kt=Pe.gauge.axis.range[0],ht=(At-kt)/(Pe.gauge.axis.range[1]-kt)*Math.PI-pt;return ht<-pt?-pt:ht>pt?pt:ht}function yt(At){return S.svg.arc().innerRadius((ve+fe)/2-At/2*(fe-ve)).outerRadius((ve+fe)/2+At/2*(fe-ve)).startAngle(-pt)}function dt(At){At.attr("d",function(kt){return yt(kt.thickness).startAngle(Tt(kt.range[0])).endAngle(Tt(kt.range[1]))()})}Ve.enter().append("g").classed("angular",!0),Ve.attr("transform",d(He[0],He[1])),nt.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),nt.selectAll("g.xangularaxistick,path,text").remove(),(pe=m(we,Pe.gauge.axis)).type="linear",pe.range=Pe.gauge.axis.range,pe._id="xangularaxis",pe.ticklabeloverflow="allow",pe.setScale();var Pt=function(At){return(pe.range[0]-At.x)/(pe.range[1]-pe.range[0])*Math.PI+Math.PI},Et={},Ot=a.makeLabelFns(pe,0).labelStandoff;Et.xFn=function(At){var kt=Pt(At);return Math.cos(kt)*Ot},Et.yFn=function(At){var kt=Pt(At),ht=Math.sin(kt)>0?.2:1;return-Math.sin(kt)*(Ot+At.fontSize*ht)+Math.abs(Math.cos(kt))*(At.fontSize*t)},Et.anchorFn=function(At){var kt=Pt(At),ht=Math.cos(kt);return Math.abs(ht)<.1?"middle":ht>0?"start":"end"},Et.heightFn=function(At,kt,ht){var St=Pt(At);return-.5*(1+Math.sin(St))*ht};var Nt=function(At){return d(He[0]+fe*Math.cos(At),He[1]-fe*Math.sin(At))};if(ke=function(At){return Nt(Pt(At))},ye=a.calcTicks(pe),De=a.getTickSigns(pe)[2],pe.visible){De=pe.ticks==="inside"?-1:1;var zt=(pe.linewidth||1)/2;a.drawTicks(we,pe,{vals:ye,layer:nt,path:"M"+De*zt+",0h"+De*pe.ticklen,transFn:function(At){var kt=Pt(At);return Nt(kt)+"rotate("+-s(kt)+")"}}),a.drawLabels(we,pe,{vals:ye,layer:nt,transFn:ke,labelFns:Et})}var Ze=[Te].concat(Pe.gauge.steps),Ye=Ve.selectAll("g.bg-arc").data(Ze);Ye.enter().append("g").classed("bg-arc",!0).append("path"),Ye.select("path").call(dt).call(p),Ye.exit().remove();var je=yt(Pe.gauge.bar.thickness),Ke=Ve.selectAll("g.value-arc").data([Pe.gauge.bar]);Ke.enter().append("g").classed("value-arc",!0).append("path");var st,Se,Ie,We=Ke.select("path");y(tt)?(We.transition().duration(tt.duration).ease(tt.easing).each("end",function(){ot&&ot()}).each("interrupt",function(){ot&&ot()}).attrTween("d",(st=je,Se=Tt($[0].lastY),Ie=Tt($[0].y),function(){var At=k(Se,Ie);return function(kt){return st.endAngle(At(kt))()}})),Pe._lastValue=$[0].y):We.attr("d",typeof $[0].y=="number"?je.endAngle(Tt($[0].y)):"M0,0Z"),We.call(p),Ke.exit().remove(),Ze=[];var it=Pe.gauge.threshold.value;(it||it===0)&&Ze.push({range:[it,it],color:Pe.gauge.threshold.color,line:{color:Pe.gauge.threshold.line.color,width:Pe.gauge.threshold.line.width},thickness:Pe.gauge.threshold.thickness});var lt=Ve.selectAll("g.threshold-arc").data(Ze);lt.enter().append("g").classed("threshold-arc",!0).append("path"),lt.select("path").call(dt).call(p),lt.exit().remove();var gt=Ve.selectAll("g.gauge-outline").data([ze]);gt.enter().append("g").classed("gauge-outline",!0).append("path"),gt.select("path").call(dt).call(p),gt.exit().remove()}(_,0,N,{radius:ie,innerRadius:se,gauge:le,layer:de,size:Q,gaugeBg:D,gaugeOutline:U,transitionOpts:L,onComplete:O});var Ce=J.selectAll("g.bullet").data(Y?N:[]);Ce.exit().remove();var xe=J.selectAll("g.bulletaxis").data(Y?N:[]);xe.exit().remove(),Y&&function(we,Ae,$,oe){var pe,ye,ke,De,Pe,Re=$[0].trace,fe=oe.gauge,ve=oe.layer,Te=oe.gaugeBg,ze=oe.gaugeOutline,He=oe.size,Ve=Re.domain,nt=oe.transitionOpts,tt=oe.onComplete;fe.enter().append("g").classed("bullet",!0),fe.attr("transform",d(He.l,He.t)),ve.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),ve.selectAll("g.xbulletaxistick,path,text").remove();var ot=He.h,pt=Re.gauge.bar.thickness*ot,Tt=Ve.x[0],yt=Ve.x[0]+(Ve.x[1]-Ve.x[0])*(Re._hasNumber||Re._hasDelta?1-r.bulletNumberDomainSize:1);function dt(Ye){Ye.attr("width",function(je){return Math.max(0,pe.c2p(je.range[1])-pe.c2p(je.range[0]))}).attr("x",function(je){return pe.c2p(je.range[0])}).attr("y",function(je){return .5*(1-je.thickness)*ot}).attr("height",function(je){return je.thickness*ot})}(pe=m(we,Re.gauge.axis))._id="xbulletaxis",pe.domain=[Tt,yt],pe.setScale(),ye=a.calcTicks(pe),ke=a.makeTransTickFn(pe),De=a.getTickSigns(pe)[2],Pe=He.t+He.h,pe.visible&&(a.drawTicks(we,pe,{vals:pe.ticks==="inside"?a.clipEnds(pe,ye):ye,layer:ve,path:a.makeTickPath(pe,Pe,De),transFn:ke}),a.drawLabels(we,pe,{vals:ye,layer:ve,transFn:ke,labelFns:a.makeLabelFns(pe,Pe)}));var Pt=[Te].concat(Re.gauge.steps),Et=fe.selectAll("g.bg-bullet").data(Pt);Et.enter().append("g").classed("bg-bullet",!0).append("rect"),Et.select("rect").call(dt).call(p),Et.exit().remove();var Ot=fe.selectAll("g.value-bullet").data([Re.gauge.bar]);Ot.enter().append("g").classed("value-bullet",!0).append("rect"),Ot.select("rect").attr("height",pt).attr("y",(ot-pt)/2).call(p),y(nt)?Ot.select("rect").transition().duration(nt.duration).ease(nt.easing).each("end",function(){tt&&tt()}).each("interrupt",function(){tt&&tt()}).attr("width",Math.max(0,pe.c2p(Math.min(Re.gauge.axis.range[1],$[0].y)))):Ot.select("rect").attr("width",typeof $[0].y=="number"?Math.max(0,pe.c2p(Math.min(Re.gauge.axis.range[1],$[0].y))):0),Ot.exit().remove();var Nt=$.filter(function(){return Re.gauge.threshold.value||Re.gauge.threshold.value===0}),zt=fe.selectAll("g.threshold-bullet").data(Nt);zt.enter().append("g").classed("threshold-bullet",!0).append("line"),zt.select("line").attr("x1",pe.c2p(Re.gauge.threshold.value)).attr("x2",pe.c2p(Re.gauge.threshold.value)).attr("y1",(1-Re.gauge.threshold.thickness)/2*ot).attr("y2",(1-(1-Re.gauge.threshold.thickness)/2)*ot).call(f.stroke,Re.gauge.threshold.line.color).style("stroke-width",Re.gauge.threshold.line.width),zt.exit().remove();var Ze=fe.selectAll("g.gauge-outline").data([ze]);Ze.enter().append("g").classed("gauge-outline",!0).append("rect"),Ze.select("rect").call(dt).call(p),Ze.exit().remove()}(_,0,N,{gauge:Ce,layer:xe,size:Q,gaugeBg:D,gaugeOutline:U,transitionOpts:L,onComplete:O});var _e=J.selectAll("text.title").data(N);_e.exit().remove(),_e.enter().append("text").classed("title",!0),_e.attr("text-anchor",function(){return Y?x.right:x[j.title.align]}).text(j.title.text).call(o.font,j.title.font).call(n.convertToTspans,_),_e.attr("transform",function(){var we,Ae=Q.l+Q.w*v[j.title.align],$=r.titlePadding,oe=o.bBox(_e.node());return X?(Z&&(we=j.gauge.axis.visible?o.bBox(de.node()).top-$-oe.bottom:Q.t+Q.h/2-ie/2-oe.bottom-$),Y&&(we=V-(oe.top+oe.bottom)/2,Ae=Q.l-r.bulletPadding*Q.w)):we=j._numbersTop-$-oe.bottom,d(Ae,we)})})}},16249:function(K,z,e){var S=e(50693),k=e(12663).axisHoverFormat,l=e(5386).fF,T=e(2418),b=e(9012),d=e(1426).extendFlat,s=e(30962).overrideAll,t=K.exports=s(d({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:l(),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),valuehoverformat:k("value",1),showlegend:d({},b.showlegend,{dflt:!1})},S("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,lightposition:T.lightposition,lighting:T.lighting,flatshading:T.flatshading,contour:T.contour,hoverinfo:d({},b.hoverinfo)}),"calc","nested");t.flatshading.dflt=!0,t.lighting.facenormalsepsilon.dflt=0,t.x.editType=t.y.editType=t.z.editType=t.value.editType="calc+clearAxisTypes",t.transforms=void 0},56959:function(K,z,e){var S=e(78803),k=e(88489).processGrid,l=e(88489).filter;K.exports=function(T,b){b._len=Math.min(b.x.length,b.y.length,b.z.length,b.value.length),b._x=l(b.x,b._len),b._y=l(b.y,b._len),b._z=l(b.z,b._len),b._value=l(b.value,b._len);var d=k(b);b._gridFill=d.fill,b._Xs=d.Xs,b._Ys=d.Ys,b._Zs=d.Zs,b._len=d.len;for(var s=1/0,t=-1/0,o=0;o<b._len;o++){var r=b._value[o];s=Math.min(s,r),t=Math.max(t,r)}b._minValues=s,b._maxValues=t,b._vMin=b.isomin===void 0||b.isomin===null?s:b.isomin,b._vMax=b.isomax===void 0||b.isomin===null?t:b.isomax,S(T,b,{vals:[b._vMin,b._vMax],containerStr:"",cLetter:"c"})}},22674:function(K,z,e){var S=e(9330).gl_mesh3d,k=e(81697).parseColorScale,l=e(78614),T=e(21081).extractOpts,b=e(90060),d=function(n,a){for(var i=a.length-1;i>0;i--){var u=Math.min(a[i],a[i-1]),h=Math.max(a[i],a[i-1]);if(h>u&&u<n&&n<=h)return{id:i,distRatio:(h-n)/(h-u)}}return{id:0,distRatio:0}};function s(n,a,i){this.scene=n,this.uid=i,this.mesh=a,this.name="",this.data=null,this.showContour=!1}var t=s.prototype;t.handlePick=function(n){if(n.object===this.mesh){var a=n.data.index,i=this.data._meshX[a],u=this.data._meshY[a],h=this.data._meshZ[a],f=this.data._Ys.length,x=this.data._Zs.length,v=d(i,this.data._Xs).id,g=d(u,this.data._Ys).id,y=d(h,this.data._Zs).id,p=n.index=y+x*g+x*f*v;n.traceCoordinate=[this.data._meshX[p],this.data._meshY[p],this.data._meshZ[p],this.data._value[p]];var m=this.data.hovertext||this.data.text;return Array.isArray(m)&&m[p]!==void 0?n.textLabel=m[p]:m&&(n.textLabel=m),!0}},t.update=function(n){var a=this.scene,i=a.fullSceneLayout;function u(x,v,g,y){return v.map(function(p){return x.d2l(p,0,y)*g})}this.data=r(n);var h={positions:b(u(i.xaxis,n._meshX,a.dataScale[0],n.xcalendar),u(i.yaxis,n._meshY,a.dataScale[1],n.ycalendar),u(i.zaxis,n._meshZ,a.dataScale[2],n.zcalendar)),cells:b(n._meshI,n._meshJ,n._meshK),lightPosition:[n.lightposition.x,n.lightposition.y,n.lightposition.z],ambient:n.lighting.ambient,diffuse:n.lighting.diffuse,specular:n.lighting.specular,roughness:n.lighting.roughness,fresnel:n.lighting.fresnel,vertexNormalsEpsilon:n.lighting.vertexnormalsepsilon,faceNormalsEpsilon:n.lighting.facenormalsepsilon,opacity:n.opacity,contourEnable:n.contour.show,contourColor:l(n.contour.color).slice(0,3),contourWidth:n.contour.width,useFacetNormals:n.flatshading},f=T(n);h.vertexIntensity=n._meshIntensity,h.vertexIntensityBounds=[f.min,f.max],h.colormap=k(n),this.mesh.update(h)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var o=["xyz","xzy","yxz","yzx","zxy","zyx"];function r(n){n._meshI=[],n._meshJ=[],n._meshK=[];var a,i,u,h,f,x,v,g=n.surface.show,y=n.spaceframe.show,p=n.surface.fill,m=n.spaceframe.fill,w=!1,c=!1,M=0,_=n._Xs,E=n._Ys,L=n._Zs,C=_.length,O=E.length,I=L.length,N=o.indexOf(n._gridFill.replace(/-/g,"").replace(/\+/g,"")),R=function(Re,fe,ve){switch(N){case 5:return ve+I*fe+I*O*Re;case 4:return ve+I*Re+I*C*fe;case 3:return fe+O*ve+O*I*Re;case 2:return fe+O*Re+O*C*ve;case 1:return Re+C*ve+C*I*fe;default:return Re+C*fe+C*O*ve}},V=n._minValues,F=n._maxValues,D=n._vMin,U=n._vMax;function j(Re,fe,ve){for(var Te=x.length,ze=i;ze<Te;ze++)if(Re===u[ze]&&fe===h[ze]&&ve===f[ze])return ze;return-1}function J(){i=a}function X(){u=[],h=[],f=[],x=[],a=0,J()}function Z(Re,fe,ve,Te){return u.push(Re),h.push(fe),f.push(ve),x.push(Te),++a-1}function Y(Re,fe,ve){for(var Te=[],ze=0;ze<Re.length;ze++)Te[ze]=Re[ze]*(1-ve)+ve*fe[ze];return Te}function W(Re){v=Re}function Q(Re,fe){return Re==="all"||Re===null||Re.indexOf(fe)>-1}function ne(Re,fe){return Re===null?fe:Re}function re(Re,fe,ve){J();var Te,ze,He,Ve=[fe],nt=[ve];if(v>=1)Ve=[fe],nt=[ve];else if(v>0){var tt=function(Nt,zt){var Ze=Nt[0],Ye=Nt[1],je=Nt[2],Ke=function(At,kt,ht){for(var St=[],vt=0;vt<At.length;vt++)St[vt]=(At[vt]+kt[vt]+ht[vt])/3;return St}(Ze,Ye,je),st=Math.sqrt(1-v),Se=Y(Ke,Ze,st),Ie=Y(Ke,Ye,st),We=Y(Ke,je,st),it=zt[0],lt=zt[1],gt=zt[2];return{xyzv:[[Ze,Ye,Ie],[Ie,Se,Ze],[Ye,je,We],[We,Ie,Ye],[je,Ze,Se],[Se,We,je]],abc:[[it,lt,-1],[-1,-1,it],[lt,gt,-1],[-1,-1,lt],[gt,it,-1],[-1,-1,gt]]}}(fe,ve);Ve=tt.xyzv,nt=tt.abc}for(var ot=0;ot<Ve.length;ot++){fe=Ve[ot],ve=nt[ot];for(var pt=[],Tt=0;Tt<3;Tt++){var yt=fe[Tt][0],dt=fe[Tt][1],Pt=fe[Tt][2],Et=fe[Tt][3],Ot=ve[Tt]>-1?ve[Tt]:j(yt,dt,Pt);pt[Tt]=Ot>-1?Ot:Z(yt,dt,Pt,ne(Re,Et))}Te=pt[0],ze=pt[1],He=pt[2],n._meshI.push(Te),n._meshJ.push(ze),n._meshK.push(He),++M}}function ie(Re,fe,ve,Te){var ze=Re[3];ze<ve&&(ze=ve),ze>Te&&(ze=Te);for(var He=(Re[3]-ze)/(Re[3]-fe[3]+1e-9),Ve=[],nt=0;nt<4;nt++)Ve[nt]=(1-He)*Re[nt]+He*fe[nt];return Ve}function se(Re,fe,ve){return Re>=fe&&Re<=ve}function ge(Re){var fe=.001*(U-D);return Re>=D-fe&&Re<=U+fe}function ue(Re){for(var fe=[],ve=0;ve<4;ve++){var Te=Re[ve];fe.push([n._x[Te],n._y[Te],n._z[Te],n._value[Te]])}return fe}function ce(Re,fe,ve,Te,ze,He){He||(He=1),ve=[-1,-1,-1];var Ve=!1,nt=[se(fe[0][3],Te,ze),se(fe[1][3],Te,ze),se(fe[2][3],Te,ze)];if(!nt[0]&&!nt[1]&&!nt[2])return!1;var tt=function(pt,Tt,yt){return ge(Tt[0][3])&&ge(Tt[1][3])&&ge(Tt[2][3])?(re(pt,Tt,yt),!0):He<3&&ce(pt,Tt,yt,D,U,++He)};if(nt[0]&&nt[1]&&nt[2])return tt(Re,fe,ve)||Ve;var ot=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(pt){if(nt[pt[0]]&&nt[pt[1]]&&!nt[pt[2]]){var Tt=fe[pt[0]],yt=fe[pt[1]],dt=fe[pt[2]],Pt=ie(dt,Tt,Te,ze),Et=ie(dt,yt,Te,ze);Ve=tt(Re,[Et,Pt,Tt],[-1,-1,ve[pt[0]]])||Ve,Ve=tt(Re,[Tt,yt,Et],[ve[pt[0]],ve[pt[1]],-1])||Ve,ot=!0}}),ot||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(pt){if(nt[pt[0]]&&!nt[pt[1]]&&!nt[pt[2]]){var Tt=fe[pt[0]],yt=fe[pt[1]],dt=fe[pt[2]],Pt=ie(yt,Tt,Te,ze),Et=ie(dt,Tt,Te,ze);Ve=tt(Re,[Et,Pt,Tt],[-1,-1,ve[pt[0]]])||Ve,ot=!0}}),Ve}function le(Re,fe,ve,Te){var ze=!1,He=ue(fe),Ve=[se(He[0][3],ve,Te),se(He[1][3],ve,Te),se(He[2][3],ve,Te),se(He[3][3],ve,Te)];if(!(Ve[0]||Ve[1]||Ve[2]||Ve[3]))return ze;if(Ve[0]&&Ve[1]&&Ve[2]&&Ve[3])return c&&(ze=function(tt,ot,pt){var Tt=function(yt,dt,Pt){re(tt,[ot[yt],ot[dt],ot[Pt]],[pt[yt],pt[dt],pt[Pt]])};Tt(0,1,2),Tt(3,0,1),Tt(2,3,0),Tt(1,2,3)}(Re,He,fe)||ze),ze;var nt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(tt){if(Ve[tt[0]]&&Ve[tt[1]]&&Ve[tt[2]]&&!Ve[tt[3]]){var ot=He[tt[0]],pt=He[tt[1]],Tt=He[tt[2]],yt=He[tt[3]];if(c)ze=re(Re,[ot,pt,Tt],[fe[tt[0]],fe[tt[1]],fe[tt[2]]])||ze;else{var dt=ie(yt,ot,ve,Te),Pt=ie(yt,pt,ve,Te),Et=ie(yt,Tt,ve,Te);ze=re(null,[dt,Pt,Et],[-1,-1,-1])||ze}nt=!0}}),nt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(tt){if(Ve[tt[0]]&&Ve[tt[1]]&&!Ve[tt[2]]&&!Ve[tt[3]]){var ot=He[tt[0]],pt=He[tt[1]],Tt=He[tt[2]],yt=He[tt[3]],dt=ie(Tt,ot,ve,Te),Pt=ie(Tt,pt,ve,Te),Et=ie(yt,pt,ve,Te),Ot=ie(yt,ot,ve,Te);c?(ze=re(Re,[ot,Ot,dt],[fe[tt[0]],-1,-1])||ze,ze=re(Re,[pt,Pt,Et],[fe[tt[1]],-1,-1])||ze):ze=function(Nt,zt,Ze){var Ye=function(je,Ke,st){re(null,[zt[je],zt[Ke],zt[st]],[Ze[je],Ze[Ke],Ze[st]])};Ye(0,1,2),Ye(2,3,0)}(0,[dt,Pt,Et,Ot],[-1,-1,-1,-1])||ze,nt=!0}}),nt||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(tt){if(Ve[tt[0]]&&!Ve[tt[1]]&&!Ve[tt[2]]&&!Ve[tt[3]]){var ot=He[tt[0]],pt=He[tt[1]],Tt=He[tt[2]],yt=He[tt[3]],dt=ie(pt,ot,ve,Te),Pt=ie(Tt,ot,ve,Te),Et=ie(yt,ot,ve,Te);c?(ze=re(Re,[ot,dt,Pt],[fe[tt[0]],-1,-1])||ze,ze=re(Re,[ot,Pt,Et],[fe[tt[0]],-1,-1])||ze,ze=re(Re,[ot,Et,dt],[fe[tt[0]],-1,-1])||ze):ze=re(null,[dt,Pt,Et],[-1,-1,-1])||ze,nt=!0}})),ze}function de(Re,fe,ve,Te,ze,He,Ve,nt,tt,ot,pt){var Tt=!1;return w&&(Q(Re,"A")&&(Tt=le(null,[fe,ve,Te,He],ot,pt)||Tt),Q(Re,"B")&&(Tt=le(null,[ve,Te,ze,tt],ot,pt)||Tt),Q(Re,"C")&&(Tt=le(null,[ve,He,Ve,tt],ot,pt)||Tt),Q(Re,"D")&&(Tt=le(null,[Te,He,nt,tt],ot,pt)||Tt),Q(Re,"E")&&(Tt=le(null,[ve,Te,He,tt],ot,pt)||Tt)),c&&(Tt=le(Re,[ve,Te,He,tt],ot,pt)||Tt),Tt}function Ce(Re,fe,ve,Te,ze,He,Ve,nt){return[nt[0]===!0||ce(Re,ue([fe,ve,Te]),[fe,ve,Te],He,Ve),nt[1]===!0||ce(Re,ue([Te,ze,fe]),[Te,ze,fe],He,Ve)]}function xe(Re,fe,ve,Te,ze,He,Ve,nt,tt){return nt?Ce(Re,fe,ve,ze,Te,He,Ve,tt):Ce(Re,ve,ze,Te,fe,He,Ve,tt)}function _e(Re,fe,ve,Te,ze,He,Ve){var nt,tt,ot,pt,Tt=!1,yt=function(){Tt=ce(Re,[nt,tt,ot],[-1,-1,-1],ze,He)||Tt,Tt=ce(Re,[ot,pt,nt],[-1,-1,-1],ze,He)||Tt},dt=Ve[0],Pt=Ve[1],Et=Ve[2];return dt&&(nt=Y(ue([R(fe,ve-0,Te-0)])[0],ue([R(fe-1,ve-0,Te-0)])[0],dt),tt=Y(ue([R(fe,ve-0,Te-1)])[0],ue([R(fe-1,ve-0,Te-1)])[0],dt),ot=Y(ue([R(fe,ve-1,Te-1)])[0],ue([R(fe-1,ve-1,Te-1)])[0],dt),pt=Y(ue([R(fe,ve-1,Te-0)])[0],ue([R(fe-1,ve-1,Te-0)])[0],dt),yt()),Pt&&(nt=Y(ue([R(fe-0,ve,Te-0)])[0],ue([R(fe-0,ve-1,Te-0)])[0],Pt),tt=Y(ue([R(fe-0,ve,Te-1)])[0],ue([R(fe-0,ve-1,Te-1)])[0],Pt),ot=Y(ue([R(fe-1,ve,Te-1)])[0],ue([R(fe-1,ve-1,Te-1)])[0],Pt),pt=Y(ue([R(fe-1,ve,Te-0)])[0],ue([R(fe-1,ve-1,Te-0)])[0],Pt),yt()),Et&&(nt=Y(ue([R(fe-0,ve-0,Te)])[0],ue([R(fe-0,ve-0,Te-1)])[0],Et),tt=Y(ue([R(fe-0,ve-1,Te)])[0],ue([R(fe-0,ve-1,Te-1)])[0],Et),ot=Y(ue([R(fe-1,ve-1,Te)])[0],ue([R(fe-1,ve-1,Te-1)])[0],Et),pt=Y(ue([R(fe-1,ve-0,Te)])[0],ue([R(fe-1,ve-0,Te-1)])[0],Et),yt()),Tt}function we(Re,fe,ve,Te,ze,He,Ve,nt,tt,ot,pt,Tt){var yt=Re;return Tt?(w&&Re==="even"&&(yt=null),de(yt,fe,ve,Te,ze,He,Ve,nt,tt,ot,pt)):(w&&Re==="odd"&&(yt=null),de(yt,tt,nt,Ve,He,ze,Te,ve,fe,ot,pt))}function Ae(Re,fe,ve,Te,ze){for(var He=[],Ve=0,nt=0;nt<fe.length;nt++)for(var tt=fe[nt],ot=1;ot<I;ot++)for(var pt=1;pt<O;pt++)He.push(xe(Re,R(tt,pt-1,ot-1),R(tt,pt-1,ot),R(tt,pt,ot-1),R(tt,pt,ot),ve,Te,(tt+pt+ot)%2,ze&&ze[Ve]?ze[Ve]:[])),Ve++;return He}function $(Re,fe,ve,Te,ze){for(var He=[],Ve=0,nt=0;nt<fe.length;nt++)for(var tt=fe[nt],ot=1;ot<C;ot++)for(var pt=1;pt<I;pt++)He.push(xe(Re,R(ot-1,tt,pt-1),R(ot,tt,pt-1),R(ot-1,tt,pt),R(ot,tt,pt),ve,Te,(ot+tt+pt)%2,ze&&ze[Ve]?ze[Ve]:[])),Ve++;return He}function oe(Re,fe,ve,Te,ze){for(var He=[],Ve=0,nt=0;nt<fe.length;nt++)for(var tt=fe[nt],ot=1;ot<O;ot++)for(var pt=1;pt<C;pt++)He.push(xe(Re,R(pt-1,ot-1,tt),R(pt-1,ot,tt),R(pt,ot-1,tt),R(pt,ot,tt),ve,Te,(pt+ot+tt)%2,ze&&ze[Ve]?ze[Ve]:[])),Ve++;return He}function pe(Re,fe,ve){for(var Te=1;Te<I;Te++)for(var ze=1;ze<O;ze++)for(var He=1;He<C;He++)we(Re,R(He-1,ze-1,Te-1),R(He-1,ze-1,Te),R(He-1,ze,Te-1),R(He-1,ze,Te),R(He,ze-1,Te-1),R(He,ze-1,Te),R(He,ze,Te-1),R(He,ze,Te),fe,ve,(He+ze+Te)%2)}function ye(Re,fe,ve,Te,ze,He){for(var Ve=[],nt=0,tt=0;tt<fe.length;tt++)for(var ot=fe[tt],pt=1;pt<I;pt++)for(var Tt=1;Tt<O;Tt++)Ve.push(_e(Re,ot,Tt,pt,ve,Te,ze[tt],He&&He[nt]&&He[nt])),nt++;return Ve}function ke(Re,fe,ve,Te,ze,He){for(var Ve=[],nt=0,tt=0;tt<fe.length;tt++)for(var ot=fe[tt],pt=1;pt<C;pt++)for(var Tt=1;Tt<I;Tt++)Ve.push(_e(Re,pt,ot,Tt,ve,Te,ze[tt],He&&He[nt]&&He[nt])),nt++;return Ve}function De(Re,fe,ve,Te,ze,He){for(var Ve=[],nt=0,tt=0;tt<fe.length;tt++)for(var ot=fe[tt],pt=1;pt<O;pt++)for(var Tt=1;Tt<C;Tt++)Ve.push(_e(Re,Tt,pt,ot,ve,Te,ze[tt],He&&He[nt]&&He[nt])),nt++;return Ve}function Pe(Re,fe){for(var ve=[],Te=Re;Te<fe;Te++)ve.push(Te);return ve}return function(){X(),function(){for(var tt=0;tt<C;tt++)for(var ot=0;ot<O;ot++)for(var pt=0;pt<I;pt++){var Tt=R(tt,ot,pt);Z(n._x[Tt],n._y[Tt],n._z[Tt],n._value[Tt])}}();var Re=null;if(y&&m&&(W(m),c=!0,pe(Re,D,U),c=!1),g&&p){W(p);for(var fe=n.surface.pattern,ve=n.surface.count,Te=0;Te<ve;Te++){var ze=ve===1?.5:Te/(ve-1),He=(1-ze)*D+ze*U,Ve=Math.abs(He-V)>Math.abs(He-F)?[V,He]:[He,F];w=!0,pe(fe,Ve[0],Ve[1]),w=!1}}var nt=[[Math.min(D,F),Math.max(D,F)],[Math.min(V,U),Math.max(V,U)]];["x","y","z"].forEach(function(tt){for(var ot=[],pt=0;pt<nt.length;pt++){var Tt=0,yt=nt[pt][0],dt=nt[pt][1],Pt=n.slices[tt];if(Pt.show&&Pt.fill){W(Pt.fill);var Et=[],Ot=[],Nt=[];if(Pt.locations.length)for(var zt=0;zt<Pt.locations.length;zt++){var Ze=d(Pt.locations[zt],tt==="x"?_:tt==="y"?E:L);Ze.distRatio===0?Et.push(Ze.id):Ze.id>0&&(Ot.push(Ze.id),tt==="x"?Nt.push([Ze.distRatio,0,0]):tt==="y"?Nt.push([0,Ze.distRatio,0]):Nt.push([0,0,Ze.distRatio]))}else Et=Pe(1,tt==="x"?C-1:tt==="y"?O-1:I-1);Ot.length>0&&(ot[Tt]=tt==="x"?ye(Re,Ot,yt,dt,Nt,ot[Tt]):tt==="y"?ke(Re,Ot,yt,dt,Nt,ot[Tt]):De(Re,Ot,yt,dt,Nt,ot[Tt]),Tt++),Et.length>0&&(ot[Tt]=tt==="x"?Ae(Re,Et,yt,dt,ot[Tt]):tt==="y"?$(Re,Et,yt,dt,ot[Tt]):oe(Re,Et,yt,dt,ot[Tt]),Tt++)}var Ye=n.caps[tt];Ye.show&&Ye.fill&&(W(Ye.fill),ot[Tt]=tt==="x"?Ae(Re,[0,C-1],yt,dt,ot[Tt]):tt==="y"?$(Re,[0,O-1],yt,dt,ot[Tt]):oe(Re,[0,I-1],yt,dt,ot[Tt]),Tt++)}}),M===0&&X(),n._meshX=u,n._meshY=h,n._meshZ=f,n._meshIntensity=x,n._Xs=_,n._Ys=E,n._Zs=L}(),n}K.exports={findNearestOnAxis:d,generateIsoMeshes:r,createIsosurfaceTrace:function(n,a){var i=n.glplot.gl,u=S({gl:i}),h=new s(n,u,a.uid);return u._trace=h,h.update(a),n.glplot.add(u),h}}},82738:function(K,z,e){var S=e(71828),k=e(73972),l=e(16249),T=e(1586);function b(d,s,t,o,r){var n=r("isomin"),a=r("isomax");a!=null&&n!=null&&n>a&&(s.isomin=null,s.isomax=null);var i=r("x"),u=r("y"),h=r("z"),f=r("value");i&&i.length&&u&&u.length&&h&&h.length&&f&&f.length?(k.getComponentMethod("calendars","handleTraceDefaults")(d,s,["x","y","z"],o),r("valuehoverformat"),["x","y","z"].forEach(function(x){r(x+"hoverformat");var v="caps."+x;r(v+".show")&&r(v+".fill");var g="slices."+x;r(g+".show")&&(r(g+".fill"),r(g+".locations"))}),r("spaceframe.show")&&r("spaceframe.fill"),r("surface.show")&&(r("surface.count"),r("surface.fill"),r("surface.pattern")),r("contour.show")&&(r("contour.color"),r("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(x){r(x)}),T(d,s,o,r,{prefix:"",cLetter:"c"}),s._length=null):s.visible=!1}K.exports={supplyDefaults:function(d,s,t,o){b(d,s,0,o,function(r,n){return S.coerce(d,s,l,r,n)})},supplyIsoDefaults:b}},64943:function(K,z,e){K.exports={attributes:e(16249),supplyDefaults:e(82738).supplyDefaults,calc:e(56959),colorbar:{min:"cmin",max:"cmax"},plot:e(22674).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e(58547),categories:["gl3d","showLegend"],meta:{}}},2418:function(K,z,e){var S=e(50693),k=e(12663).axisHoverFormat,l=e(5386).fF,T=e(54532),b=e(9012),d=e(1426).extendFlat;K.exports=d({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:l({editType:"calc"}),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},S("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:d({},T.contours.x.show,{}),color:T.contours.x.color,width:T.contours.x.width,editType:"calc"},lightposition:{x:d({},T.lightposition.x,{dflt:1e5}),y:d({},T.lightposition.y,{dflt:1e5}),z:d({},T.lightposition.z,{dflt:0}),editType:"calc"},lighting:d({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},T.lighting),hoverinfo:d({},b.hoverinfo,{editType:"calc"}),showlegend:d({},b.showlegend,{dflt:!1})})},82932:function(K,z,e){var S=e(78803);K.exports=function(k,l){l.intensity&&S(k,l,{vals:l.intensity,containerStr:"",cLetter:"c"})}},91134:function(K,z,e){var S=e(9330).gl_mesh3d,k=e(9330).delaunay_triangulate,l=e(9330).alpha_shape,T=e(9330).convex_hull,b=e(81697).parseColorScale,d=e(78614),s=e(21081).extractOpts,t=e(90060);function o(h,f,x){this.scene=h,this.uid=x,this.mesh=f,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var r=o.prototype;function n(h){for(var f=[],x=h.length,v=0;v<x;v++)f[v]=d(h[v]);return f}function a(h,f,x,v){for(var g=[],y=f.length,p=0;p<y;p++)g[p]=h.d2l(f[p],0,v)*x;return g}function i(h){for(var f=[],x=h.length,v=0;v<x;v++)f[v]=Math.round(h[v]);return f}function u(h,f){for(var x=h.length,v=0;v<x;v++)if(h[v]<=-.5||h[v]>=f-.5)return!1;return!0}r.handlePick=function(h){if(h.object===this.mesh){var f=h.index=h.data.index;h.data._cellCenter?h.traceCoordinate=h.data.dataCoordinate:h.traceCoordinate=[this.data.x[f],this.data.y[f],this.data.z[f]];var x=this.data.hovertext||this.data.text;return Array.isArray(x)&&x[f]!==void 0?h.textLabel=x[f]:x&&(h.textLabel=x),!0}},r.update=function(h){var f=this.scene,x=f.fullSceneLayout;this.data=h;var v,g=h.x.length,y=t(a(x.xaxis,h.x,f.dataScale[0],h.xcalendar),a(x.yaxis,h.y,f.dataScale[1],h.ycalendar),a(x.zaxis,h.z,f.dataScale[2],h.zcalendar));if(h.i&&h.j&&h.k){if(h.i.length!==h.j.length||h.j.length!==h.k.length||!u(h.i,g)||!u(h.j,g)||!u(h.k,g))return;v=t(i(h.i),i(h.j),i(h.k))}else v=h.alphahull===0?T(y):h.alphahull>0?l(h.alphahull,y):function(c,M){for(var _=["x","y","z"].indexOf(c),E=[],L=M.length,C=0;C<L;C++)E[C]=[M[C][(_+1)%3],M[C][(_+2)%3]];return k(E)}(h.delaunayaxis,y);var p={positions:y,cells:v,lightPosition:[h.lightposition.x,h.lightposition.y,h.lightposition.z],ambient:h.lighting.ambient,diffuse:h.lighting.diffuse,specular:h.lighting.specular,roughness:h.lighting.roughness,fresnel:h.lighting.fresnel,vertexNormalsEpsilon:h.lighting.vertexnormalsepsilon,faceNormalsEpsilon:h.lighting.facenormalsepsilon,opacity:h.opacity,contourEnable:h.contour.show,contourColor:d(h.contour.color).slice(0,3),contourWidth:h.contour.width,useFacetNormals:h.flatshading};if(h.intensity){var m=s(h);this.color="#fff";var w=h.intensitymode;p[w+"Intensity"]=h.intensity,p[w+"IntensityBounds"]=[m.min,m.max],p.colormap=b(h)}else h.vertexcolor?(this.color=h.vertexcolor[0],p.vertexColors=n(h.vertexcolor)):h.facecolor?(this.color=h.facecolor[0],p.cellColors=n(h.facecolor)):(this.color=h.color,p.meshColor=d(h.color));this.mesh.update(p)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},K.exports=function(h,f){var x=h.glplot.gl,v=S({gl:x}),g=new o(h,v,f.uid);return v._trace=g,g.update(f),h.glplot.add(v),g}},58669:function(K,z,e){var S=e(73972),k=e(71828),l=e(1586),T=e(2418);K.exports=function(b,d,s,t){function o(n,a){return k.coerce(b,d,T,n,a)}function r(n){var a=n.map(function(i){var u=o(i);return u&&k.isArrayOrTypedArray(u)?u:null});return a.every(function(i){return i&&i.length===a[0].length})&&a}r(["x","y","z"])?(r(["i","j","k"]),(!d.i||d.j&&d.k)&&(!d.j||d.k&&d.i)&&(!d.k||d.i&&d.j)?(S.getComponentMethod("calendars","handleTraceDefaults")(b,d,["x","y","z"],t),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(n){o(n)}),o("contour.show")&&(o("contour.color"),o("contour.width")),"intensity"in b?(o("intensity"),o("intensitymode"),l(b,d,t,o,{prefix:"",cLetter:"c"})):(d.showscale=!1,"facecolor"in b?o("facecolor"):"vertexcolor"in b?o("vertexcolor"):o("color",s)),o("text"),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),d._length=null):d.visible=!1):d.visible=!1}},21164:function(K,z,e){K.exports={attributes:e(2418),supplyDefaults:e(58669),calc:e(82932),colorbar:{min:"cmin",max:"cmax"},plot:e(91134),moduleType:"trace",name:"mesh3d",basePlotModule:e(58547),categories:["gl3d","showLegend"],meta:{}}},2522:function(K,z,e){var S=e(71828).extendFlat,k=e(82196),l=e(12663).axisHoverFormat,T=e(79952).P,b=e(77914),d=e(22372),s=d.INCREASING.COLOR,t=d.DECREASING.COLOR,o=k.line;function r(n){return{line:{color:S({},o.color,{dflt:n}),width:o.width,dash:T,editType:"style"},editType:"style"}}K.exports={xperiod:k.xperiod,xperiod0:k.xperiod0,xperiodalignment:k.xperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:S({},o.width,{}),dash:S({},T,{}),editType:"style"},increasing:r(s),decreasing:r(t),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:S({},b.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},3485:function(K,z,e){var S=e(71828),k=S._,l=e(89298),T=e(42973),b=e(50606).BADNUM;function d(t,o,r,n){return{o:t,h:o,l:r,c:n}}function s(t,o,r,n,a,i){for(var u=a.makeCalcdata(o,"open"),h=a.makeCalcdata(o,"high"),f=a.makeCalcdata(o,"low"),x=a.makeCalcdata(o,"close"),v=Array.isArray(o.text),g=Array.isArray(o.hovertext),y=!0,p=null,m=!!o.xperiodalignment,w=[],c=0;c<n.length;c++){var M=n[c],_=u[c],E=h[c],L=f[c],C=x[c];if(M!==b&&_!==b&&E!==b&&L!==b&&C!==b){C===_?p!==null&&C!==p&&(y=C>p):y=C>_,p=C;var O=i(_,E,L,C);O.pos=M,O.yc=(_+C)/2,O.i=c,O.dir=y?"increasing":"decreasing",O.x=O.pos,O.y=[L,E],m&&(O.orig_p=r[c]),v&&(O.tx=o.text[c]),g&&(O.htx=o.hovertext[c]),w.push(O)}else w.push({pos:M,empty:!0})}return o._extremes[a._id]=l.findExtremes(a,S.concat(f,h),{padded:!0}),w.length&&(w[0].t={labels:{open:k(t,"open:")+" ",high:k(t,"high:")+" ",low:k(t,"low:")+" ",close:k(t,"close:")+" "}}),w}K.exports={calc:function(t,o){var r=l.getFromId(t,o.xaxis),n=l.getFromId(t,o.yaxis),a=function(x,v,g){var y=g._minDiff;if(!y){var p,m=x._fullData,w=[];for(y=1/0,p=0;p<m.length;p++){var c=m[p];if(c.type==="ohlc"&&c.visible===!0&&c.xaxis===v._id){w.push(c);var M=v.makeCalcdata(c,"x");c._origX=M;var _=T(g,v,"x",M).vals;c._xcalc=_;var E=S.distinctVals(_).minDiff;E&&isFinite(E)&&(y=Math.min(y,E))}}for(y===1/0&&(y=1),p=0;p<w.length;p++)w[p]._minDiff=y}return y*g.tickwidth}(t,r,o),i=o._minDiff;o._minDiff=null;var u=o._origX;o._origX=null;var h=o._xcalc;o._xcalc=null;var f=s(t,o,u,h,n,d);return o._extremes[r._id]=l.findExtremes(r,h,{vpad:i/2}),f.length?(S.extendFlat(f[0].t,{wHover:i/2,tickLen:a}),f):[{t:{empty:!0}}]},calcCommon:s}},16169:function(K,z,e){var S=e(71828),k=e(14555),l=e(73927),T=e(2522);function b(d,s,t,o){t(o+".line.color"),t(o+".line.width",s.line.width),t(o+".line.dash",s.line.dash)}K.exports=function(d,s,t,o){function r(n,a){return S.coerce(d,s,T,n,a)}k(d,s,r,o)?(l(d,s,o,r,{x:!0}),r("xhoverformat"),r("yhoverformat"),r("line.width"),r("line.dash"),b(0,s,r,"increasing"),b(0,s,r,"decreasing"),r("text"),r("hovertext"),r("tickwidth"),o._requestRangeslider[s.xaxis]=!0):s.visible=!1}},66449:function(K,z,e){var S=e(89298),k=e(71828),l=e(30211),T=e(7901),b=e(71828).fillText,d=e(22372),s={increasing:d.INCREASING.SYMBOL,decreasing:d.DECREASING.SYMBOL};function t(n,a,i,u){var h,f,x=n.cd,v=n.xa,g=x[0].trace,y=x[0].t,p=g.type,m=p==="ohlc"?"l":"min",w=p==="ohlc"?"h":"max",c=y.bPos||0,M=y.bdPos||y.tickLen,_=y.wHover,E=Math.min(1,M/Math.abs(v.r2c(v.range[1])-v.r2c(v.range[0])));function L(F){var D=function(U){return U.pos+c-a}(F);return l.inbox(D-_,D+_,h)}function C(F){var D=F[m],U=F[w];return D===U||l.inbox(D-i,U-i,h)}function O(F){return(L(F)+C(F))/2}h=n.maxHoverDistance-E,f=n.maxSpikeDistance-E;var I=l.getDistanceFunction(u,L,C,O);if(l.getClosest(x,I,n),n.index===!1)return null;var N=x[n.index];if(N.empty)return null;var R=g[N.dir],V=R.line.color;return T.opacity(V)&&R.line.width?n.color=V:n.color=R.fillcolor,n.x0=v.c2p(N.pos+c-M,!0),n.x1=v.c2p(N.pos+c+M,!0),n.xLabelVal=N.orig_p!==void 0?N.orig_p:N.pos,n.spikeDistance=O(N)*f/h,n.xSpike=v.c2p(N.pos,!0),n}function o(n,a,i,u){var h=n.cd,f=n.ya,x=h[0].trace,v=h[0].t,g=[],y=t(n,a,i,u);if(!y)return[];var p=h[y.index].hi||x.hoverinfo,m=p.split("+");if(p!=="all"&&m.indexOf("y")===-1)return[];for(var w=["high","open","close","low"],c={},M=0;M<w.length;M++){var _,E=w[M],L=x[E][y.index],C=f.c2p(L,!0);L in c?(_=c[L]).yLabel+="<br>"+v.labels[E]+S.hoverLabelText(f,L,x.yhoverformat):((_=k.extendFlat({},y)).y0=_.y1=C,_.yLabelVal=L,_.yLabel=v.labels[E]+S.hoverLabelText(f,L,x.yhoverformat),_.name="",g.push(_),c[L]=_)}return g}function r(n,a,i,u){var h=n.cd,f=n.ya,x=h[0].trace,v=h[0].t,g=t(n,a,i,u);if(!g)return[];var y=h[g.index],p=g.index=y.i,m=y.dir;function w(O){return v.labels[O]+S.hoverLabelText(f,x[O][p],x.yhoverformat)}var c=y.hi||x.hoverinfo,M=c.split("+"),_=c==="all",E=_||M.indexOf("y")!==-1,L=_||M.indexOf("text")!==-1,C=E?[w("open"),w("high"),w("low"),w("close")+"  "+s[m]]:[];return L&&b(y,x,C),g.extraText=C.join("<br>"),g.y0=g.y1=f.c2p(y.yc,!0),[g]}K.exports={hoverPoints:function(n,a,i,u){return n.cd[0].trace.hoverlabel.split?o(n,a,i,u):r(n,a,i,u)},hoverSplit:o,hoverOnPoints:r}},54186:function(K,z,e){K.exports={moduleType:"trace",name:"ohlc",basePlotModule:e(93612),categories:["cartesian","svg","showLegend"],meta:{},attributes:e(2522),supplyDefaults:e(16169),calc:e(3485).calc,plot:e(72314),style:e(53101),hoverPoints:e(66449).hoverPoints,selectPoints:e(67324)}},14555:function(K,z,e){var S=e(73972),k=e(71828);K.exports=function(l,T,b,d){var s=b("x"),t=b("open"),o=b("high"),r=b("low"),n=b("close");if(b("hoverlabel.split"),S.getComponentMethod("calendars","handleTraceDefaults")(l,T,["x"],d),t&&o&&r&&n){var a=Math.min(t.length,o.length,r.length,n.length);return s&&(a=Math.min(a,k.minRowLength(s))),T._length=a,a}}},72314:function(K,z,e){var S=e(39898),k=e(71828);K.exports=function(l,T,b,d){var s=T.yaxis,t=T.xaxis,o=!!t.rangebreaks;k.makeTraceGroups(d,b,"trace ohlc").each(function(r){var n=S.select(this),a=r[0],i=a.t;if(a.trace.visible!==!0||i.empty)n.remove();else{var u=i.tickLen,h=n.selectAll("path").data(k.identity);h.enter().append("path"),h.exit().remove(),h.attr("d",function(f){if(f.empty)return"M0,0Z";var x=t.c2p(f.pos-u,!0),v=t.c2p(f.pos+u,!0),g=o?(x+v)/2:t.c2p(f.pos,!0);return"M"+x+","+s.c2p(f.o,!0)+"H"+g+"M"+g+","+s.c2p(f.h,!0)+"V"+s.c2p(f.l,!0)+"M"+v+","+s.c2p(f.c,!0)+"H"+g})}})}},67324:function(K){K.exports=function(z,e){var S,k=z.cd,l=z.xaxis,T=z.yaxis,b=[],d=k[0].t.bPos||0;if(e===!1)for(S=0;S<k.length;S++)k[S].selected=0;else for(S=0;S<k.length;S++){var s=k[S];e.contains([l.c2p(s.pos+d),T.c2p(s.yc)],null,s.i,z)?(b.push({pointNumber:s.i,x:l.c2d(s.pos),y:T.c2d(s.yc)}),s.selected=1):s.selected=0}return b}},53101:function(K,z,e){var S=e(39898),k=e(91424),l=e(7901);K.exports=function(T,b,d){var s=d||S.select(T).selectAll("g.ohlclayer").selectAll("g.trace");s.style("opacity",function(t){return t[0].trace.opacity}),s.each(function(t){var o=t[0].trace;S.select(this).selectAll("path").each(function(r){if(!r.empty){var n=o[r.dir].line;S.select(this).style("fill","none").call(l.stroke,n.color).call(k.dashLine,n.dash,n.width).style("opacity",o.selectedpoints&&!r.selected?.3:1)}})})}},99506:function(K,z,e){var S=e(1426).extendFlat,k=e(9012),l=e(41940),T=e(50693),b=e(5386).fF,d=e(27670).Y,s=S({editType:"calc"},T("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:b({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});K.exports={domain:d({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:S({},k.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:b({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:l({editType:"calc"}),tickfont:l({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:s,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},27677:function(K,z,e){var S=e(27659).a0,k=e(45784),l="parcats";z.name=l,z.plot=function(T,b,d,s){var t=S(T.calcdata,l);if(t.length){var o=t[0];k(T,o,d,s)}},z.clean=function(T,b,d,s){var t=s._has&&s._has("parcats"),o=b._has&&b._has("parcats");t&&!o&&s._paperdiv.selectAll(".parcats").remove()}},28699:function(K,z,e){var S=e(28984).wrap,k=e(52075).hasColorscale,l=e(78803),T=e(75744),b=e(91424),d=e(71828),s=e(92770);function t(n,a,i){n.valueInds.push(a),n.count+=i}function o(n,a,i){return{categoryInds:n,color:a,rawColor:i,valueInds:[],count:0}}function r(n,a,i){n.valueInds.push(a),n.count+=i}K.exports=function(n,a){var i=d.filterVisible(a.dimensions);if(i.length===0)return[];var u,h,f,x=i.map(function(j){var J;if(j.categoryorder==="trace")J=null;else if(j.categoryorder==="array")J=j.categoryarray;else{J=T(j.values);for(var X=!0,Z=0;Z<J.length;Z++)if(!s(J[Z])){X=!1;break}J.sort(X?d.sorterAsc:void 0),j.categoryorder==="category descending"&&(J=J.reverse())}return function(Y,W){W=W==null?[]:W.map(function(ce){return ce});var Q={},ne={},re=[];W.forEach(function(ce,le){Q[ce]=0,ne[ce]=le});for(var ie=0;ie<Y.length;ie++){var se,ge=Y[ie];Q[ge]===void 0?(Q[ge]=1,se=W.push(ge)-1,ne[ge]=se):(Q[ge]++,se=ne[ge]),re.push(se)}var ue=W.map(function(ce){return Q[ce]});return{uniqueValues:W,uniqueCounts:ue,inds:re}}(j.values,J)});u=d.isArrayOrTypedArray(a.counts)?a.counts:[a.counts],function(j){var J,X=j.map(function(Z){return Z.displayindex});if(function(Z){for(var Y=new Array(Z.length),W=0;W<Z.length;W++){if(Z[W]<0||Z[W]>=Z.length||Y[Z[W]]!==void 0)return!1;Y[Z[W]]=!0}return!0}(X))for(J=0;J<j.length;J++)j[J]._displayindex=j[J].displayindex;else for(J=0;J<j.length;J++)j[J]._displayindex=J}(i),i.forEach(function(j,J){(function(X,Z){X._categoryarray=Z.uniqueValues,X.ticktext===null||X.ticktext===void 0?X._ticktext=[]:X._ticktext=X.ticktext.slice();for(var Y=X._ticktext.length;Y<Z.uniqueValues.length;Y++)X._ticktext.push(Z.uniqueValues[Y])})(j,x[J])});var v,g=a.line;g?(k(a,"line")&&l(n,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),v=b.tryColorscale(g)):v=d.identity;var y,p,m,w,c,M=i[0].values.length,_={},E=x.map(function(j){return j.inds});for(f=0,y=0;y<M;y++){var L=[];for(p=0;p<E.length;p++)L.push(E[p][y]);h=u[y%u.length],f+=h;var C=(m=y,w=void 0,c=void 0,d.isArrayOrTypedArray(g.color)?c=w=g.color[m%g.color.length]:w=g.color,{color:v(w),rawColor:c}),O=L+"-"+C.rawColor;_[O]===void 0&&(_[O]=o(L,C.color,C.rawColor)),r(_[O],y,h)}var I,N=i.map(function(j,J){return function(X,Z,Y,W,Q){return{dimensionInd:X,containerInd:Z,displayInd:Y,dimensionLabel:W,count:Q,categories:[],dragX:null}}(J,j._index,j._displayindex,j.label,f)});for(y=0;y<M;y++)for(h=u[y%u.length],p=0;p<N.length;p++){var R=N[p].containerInd,V=x[p].inds[y],F=N[p].categories;if(F[V]===void 0){var D=a.dimensions[R]._categoryarray[V],U=a.dimensions[R]._ticktext[V];F[V]={dimensionInd:p,categoryInd:I=V,categoryValue:D,displayInd:I,categoryLabel:U,valueInds:[],count:0,dragY:null}}t(F[V],y,h)}return S(function(j,J,X){var Z=j.map(function(Y){return Y.categories.length}).reduce(function(Y,W){return Math.max(Y,W)});return{dimensions:j,paths:J,trace:void 0,maxCats:Z,count:X}}(N,_,f))}},14647:function(K,z,e){var S=e(71828),k=e(52075).hasColorscale,l=e(1586),T=e(27670).c,b=e(85501),d=e(99506),s=e(94397);function t(o,r){function n(v,g){return S.coerce(o,r,d.dimensions,v,g)}var a=n("values"),i=n("visible");if(a&&a.length||(i=r.visible=!1),i){n("label"),n("displayindex",r._index);var u,h=o.categoryarray,f=Array.isArray(h)&&h.length>0;f&&(u="array");var x=n("categoryorder",u);x==="array"?(n("categoryarray"),n("ticktext")):(delete o.categoryarray,delete o.ticktext),f||x!=="array"||(r.categoryorder="trace")}}K.exports=function(o,r,n,a){function i(v,g){return S.coerce(o,r,d,v,g)}var u=b(o,r,{name:"dimensions",handleItemDefaults:t}),h=function(v,g,y,p,m){m("line.shape"),m("line.hovertemplate");var w=m("line.color",p.colorway[0]);if(k(v,"line")&&S.isArrayOrTypedArray(w)){if(w.length)return m("line.colorscale"),l(v,g,p,m,{prefix:"line.",cLetter:"c"}),w.length;g.line.color=y}return 1/0}(o,r,n,a,i);T(r,a,i),Array.isArray(u)&&u.length||(r.visible=!1),s(r,u,"values",h),i("hoveron"),i("hovertemplate"),i("arrangement"),i("bundlecolors"),i("sortpaths"),i("counts");var f={family:a.font.family,size:Math.round(a.font.size),color:a.font.color};S.coerceFont(i,"labelfont",f);var x={family:a.font.family,size:Math.round(a.font.size/1.2),color:a.font.color};S.coerceFont(i,"tickfont",x)}},94873:function(K,z,e){K.exports={attributes:e(99506),supplyDefaults:e(14647),calc:e(28699),plot:e(45784),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e(27677),categories:["noOpacity"],meta:{}}},45460:function(K,z,e){var S=e(39898),k=e(81684).k4,l=e(72391),T=e(30211),b=e(71828),d=b.strTranslate,s=e(91424),t=e(84267),o=e(63893);function r(X,Z,Y,W){var Q=Z._context.staticPlot,ne=X.map(F.bind(0,Z,Y)),re=W.selectAll("g.parcatslayer").data([null]);re.enter().append("g").attr("class","parcatslayer").style("pointer-events",Q?"none":"all");var ie=re.selectAll("g.trace.parcats").data(ne,n),se=ie.enter().append("g").attr("class","trace parcats");ie.attr("transform",function(we){return d(we.x,we.y)}),se.append("g").attr("class","paths");var ge=ie.select("g.paths").selectAll("path.path").data(function(we){return we.paths},n);ge.attr("fill",function(we){return we.model.color});var ue=ge.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(we){return we.model.color}).attr("fill-opacity",0);g(ue),ge.attr("d",function(we){return we.svgD}),ue.empty()||ge.sort(i),ge.exit().remove(),ge.on("mouseover",u).on("mouseout",h).on("click",v),se.append("g").attr("class","dimensions");var ce=ie.select("g.dimensions").selectAll("g.dimension").data(function(we){return we.dimensions},n);ce.enter().append("g").attr("class","dimension"),ce.attr("transform",function(we){return d(we.x,0)}),ce.exit().remove();var le=ce.selectAll("g.category").data(function(we){return we.categories},n),de=le.enter().append("g").attr("class","category");le.attr("transform",function(we){return d(0,we.y)}),de.append("rect").attr("class","catrect").attr("pointer-events","none"),le.select("rect.catrect").attr("fill","none").attr("width",function(we){return we.width}).attr("height",function(we){return we.height}),p(de);var Ce=le.selectAll("rect.bandrect").data(function(we){return we.bands},n);Ce.each(function(){b.raiseToTop(this)}),Ce.attr("fill",function(we){return we.color});var xe=Ce.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(we){return we.color}).attr("fill-opacity",0);Ce.attr("fill",function(we){return we.color}).attr("width",function(we){return we.width}).attr("height",function(we){return we.height}).attr("y",function(we){return we.y}).attr("cursor",function(we){return we.parcatsViewModel.arrangement==="fixed"?"default":we.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),m(xe),Ce.exit().remove(),de.append("text").attr("class","catlabel").attr("pointer-events","none");var _e=Z._fullLayout.paper_bgcolor;le.select("text.catlabel").attr("text-anchor",function(we){return a(we)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",o.makeTextShadow(_e)).style("fill","rgb(0, 0, 0)").attr("x",function(we){return a(we)?we.width+5:-5}).attr("y",function(we){return we.height/2}).text(function(we){return we.model.categoryLabel}).each(function(we){s.font(S.select(this),we.parcatsViewModel.categorylabelfont),o.convertToTspans(S.select(this),Z)}),de.append("text").attr("class","dimlabel"),le.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(we){return we.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(we){return we.width/2}).attr("y",-5).text(function(we,Ae){return Ae===0?we.parcatsViewModel.model.dimensions[we.model.dimensionInd].dimensionLabel:null}).each(function(we){s.font(S.select(this),we.parcatsViewModel.labelfont)}),le.selectAll("rect.bandrect").on("mouseover",E).on("mouseout",L),le.exit().remove(),ce.call(S.behavior.drag().origin(function(we){return{x:we.x,y:0}}).on("dragstart",C).on("drag",O).on("dragend",I)),ie.each(function(we){we.traceSelection=S.select(this),we.pathSelection=S.select(this).selectAll("g.paths").selectAll("path.path"),we.dimensionSelection=S.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ie.exit().remove()}function n(X){return X.key}function a(X){var Z=X.parcatsViewModel.dimensions.length,Y=X.parcatsViewModel.dimensions[Z-1].model.dimensionInd;return X.model.dimensionInd===Y}function i(X,Z){return X.model.rawColor>Z.model.rawColor?1:X.model.rawColor<Z.model.rawColor?-1:0}function u(X){if(!X.parcatsViewModel.dragDimension&&X.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){b.raiseToTop(this),y(S.select(this));var Z=f(X),Y=x(X);if(X.parcatsViewModel.graphDiv.emit("plotly_hover",{points:Z,event:S.event,constraints:Y}),X.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var W,Q,ne,re=S.mouse(this)[0],ie=X.parcatsViewModel.graphDiv,se=X.parcatsViewModel.trace,ge=ie._fullLayout,ue=ge._paperdiv.node().getBoundingClientRect(),ce=X.parcatsViewModel.graphDiv.getBoundingClientRect();for(ne=0;ne<X.leftXs.length-1;ne++)if(X.leftXs[ne]+X.dimWidths[ne]-2<=re&&re<=X.leftXs[ne+1]+2){var le=X.parcatsViewModel.dimensions[ne],de=X.parcatsViewModel.dimensions[ne+1];W=(le.x+le.width+de.x)/2,Q=(X.topYs[ne]+X.topYs[ne+1]+X.height)/2;break}var Ce=X.parcatsViewModel.x+W,xe=X.parcatsViewModel.y+Q,_e=t.mostReadable(X.model.color,["black","white"]),we=X.model.count,Ae=we/X.parcatsViewModel.model.count,$={countLabel:we,probabilityLabel:Ae.toFixed(3)},oe=[];X.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&oe.push(["Count:",$.countLabel].join(" ")),X.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&oe.push(["P:",$.probabilityLabel].join(" "));var pe=oe.join("<br>"),ye=S.mouse(ie)[0];T.loneHover({trace:se,x:Ce-ue.left+ce.left,y:xe-ue.top+ce.top,text:pe,color:X.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:_e,idealAlign:ye<Ce?"right":"left",hovertemplate:(se.line||{}).hovertemplate,hovertemplateLabels:$,eventData:[{data:se._input,fullData:se,count:we,probability:Ae}]},{container:ge._hoverlayer.node(),outerContainer:ge._paper.node(),gd:ie})}}}function h(X){if(!X.parcatsViewModel.dragDimension&&(g(S.select(this)),T.loneUnhover(X.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),X.parcatsViewModel.pathSelection.sort(i),X.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var Z=f(X),Y=x(X);X.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:Z,event:S.event,constraints:Y})}}function f(X){for(var Z=[],Y=N(X.parcatsViewModel),W=0;W<X.model.valueInds.length;W++){var Q=X.model.valueInds[W];Z.push({curveNumber:Y,pointNumber:Q})}return Z}function x(X){for(var Z={},Y=X.parcatsViewModel.model.dimensions,W=0;W<Y.length;W++){var Q=Y[W],ne=Q.categories[X.model.categoryInds[W]];Z[Q.containerInd]=ne.categoryValue}return X.model.rawColor!==void 0&&(Z.color=X.model.rawColor),Z}function v(X){if(X.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var Z=f(X),Y=x(X);X.parcatsViewModel.graphDiv.emit("plotly_click",{points:Z,event:S.event,constraints:Y})}}function g(X){X.attr("fill",function(Z){return Z.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function y(X){X.attr("fill-opacity",.8).attr("stroke",function(Z){return t.mostReadable(Z.model.color,["black","white"])}).attr("stroke-width",.3)}function p(X){X.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function m(X){X.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function w(X){var Z=X.parcatsViewModel.pathSelection,Y=X.categoryViewModel.model.dimensionInd,W=X.categoryViewModel.model.categoryInd;return Z.filter(function(Q){return Q.model.categoryInds[Y]===W&&Q.model.color===X.color})}function c(X,Z,Y){var W=S.select(X).datum(),Q=W.categoryViewModel.model,ne=W.parcatsViewModel.graphDiv,re=S.select(X.parentNode).selectAll("rect.bandrect"),ie=[];re.each(function(ge){w(ge).each(function(ue){Array.prototype.push.apply(ie,f(ue))})});var se={};se[Q.dimensionInd]=Q.categoryValue,ne.emit(Z,{points:ie,event:Y,constraints:se})}function M(X,Z,Y){var W=S.select(X).datum(),Q=W.categoryViewModel.model,ne=W.parcatsViewModel.graphDiv,re=w(W),ie=[];re.each(function(ge){Array.prototype.push.apply(ie,f(ge))});var se={};se[Q.dimensionInd]=Q.categoryValue,W.rawColor!==void 0&&(se.color=W.rawColor),ne.emit(Z,{points:ie,event:Y,constraints:se})}function _(X,Z,Y){X._fullLayout._calcInverseTransform(X);var W,Q,ne=X._fullLayout._invScaleX,re=X._fullLayout._invScaleY,ie=S.select(Y.parentNode).select("rect.catrect"),se=ie.node().getBoundingClientRect(),ge=ie.datum(),ue=ge.parcatsViewModel,ce=ue.model.dimensions[ge.model.dimensionInd],le=ue.trace,de=se.top+se.height/2;ue.dimensions.length>1&&ce.displayInd===ue.dimensions.length-1?(W=se.left,Q="left"):(W=se.left+se.width,Q="right");var Ce=ge.model.count,xe=ge.model.categoryLabel,_e=Ce/ge.parcatsViewModel.model.count,we={countLabel:Ce,categoryLabel:xe,probabilityLabel:_e.toFixed(3)},Ae=[];ge.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ae.push(["Count:",we.countLabel].join(" ")),ge.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ae.push(["P("+we.categoryLabel+"):",we.probabilityLabel].join(" "));var $=Ae.join("<br>");return{trace:le,x:ne*(W-Z.left),y:re*(de-Z.top),text:$,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:Q,hovertemplate:le.hovertemplate,hovertemplateLabels:we,eventData:[{data:le._input,fullData:le,count:Ce,category:xe,probability:_e}]}}function E(X){if(!X.parcatsViewModel.dragDimension&&X.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){if(S.mouse(this)[1]<-1)return;var Z,Y=X.parcatsViewModel.graphDiv,W=Y._fullLayout,Q=W._paperdiv.node().getBoundingClientRect(),ne=X.parcatsViewModel.hoveron,re=this;ne==="color"?(function(ie){var se=S.select(ie).datum(),ge=w(se);y(ge),ge.each(function(){b.raiseToTop(this)}),S.select(ie.parentNode).selectAll("rect.bandrect").filter(function(ue){return ue.color===se.color}).each(function(){b.raiseToTop(this),S.select(this).attr("stroke","black").attr("stroke-width",1.5)})}(re),M(re,"plotly_hover",S.event)):(function(ie){S.select(ie.parentNode).selectAll("rect.bandrect").each(function(se){var ge=w(se);y(ge),ge.each(function(){b.raiseToTop(this)})}),S.select(ie.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(re),c(re,"plotly_hover",S.event)),X.parcatsViewModel.hoverinfoItems.indexOf("none")===-1&&(ne==="category"?Z=_(Y,Q,re):ne==="color"?Z=function(ie,se,ge){ie._fullLayout._calcInverseTransform(ie);var ue,ce,le=ie._fullLayout._invScaleX,de=ie._fullLayout._invScaleY,Ce=ge.getBoundingClientRect(),xe=S.select(ge).datum(),_e=xe.categoryViewModel,we=_e.parcatsViewModel,Ae=we.model.dimensions[_e.model.dimensionInd],$=we.trace,oe=Ce.y+Ce.height/2;we.dimensions.length>1&&Ae.displayInd===we.dimensions.length-1?(ue=Ce.left,ce="left"):(ue=Ce.left+Ce.width,ce="right");var pe=_e.model.categoryLabel,ye=xe.parcatsViewModel.model.count,ke=0;xe.categoryViewModel.bands.forEach(function(nt){nt.color===xe.color&&(ke+=nt.count)});var De=_e.model.count,Pe=0;we.pathSelection.each(function(nt){nt.model.color===xe.color&&(Pe+=nt.model.count)});var Re=ke/ye,fe=ke/Pe,ve=ke/De,Te={countLabel:ye,categoryLabel:pe,probabilityLabel:Re.toFixed(3)},ze=[];_e.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&ze.push(["Count:",Te.countLabel].join(" ")),_e.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(ze.push("P(color ∩ "+pe+"): "+Te.probabilityLabel),ze.push("P("+pe+" | color): "+fe.toFixed(3)),ze.push("P(color | "+pe+"): "+ve.toFixed(3)));var He=ze.join("<br>"),Ve=t.mostReadable(xe.color,["black","white"]);return{trace:$,x:le*(ue-se.left),y:de*(oe-se.top),text:He,color:xe.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:Ve,fontSize:10,idealAlign:ce,hovertemplate:$.hovertemplate,hovertemplateLabels:Te,eventData:[{data:$._input,fullData:$,category:pe,count:ye,probability:Re,categorycount:De,colorcount:Pe,bandcolorcount:ke}]}}(Y,Q,re):ne==="dimension"&&(Z=function(ie,se,ge){var ue=[];return S.select(ge.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){ue.push(_(ie,se,this))}),ue}(Y,Q,re)),Z&&T.loneHover(Z,{container:W._hoverlayer.node(),outerContainer:W._paper.node(),gd:Y}))}}function L(X){var Z=X.parcatsViewModel;Z.dragDimension||(g(Z.pathSelection),p(Z.dimensionSelection.selectAll("g.category")),m(Z.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover(Z.graphDiv._fullLayout._hoverlayer.node()),Z.pathSelection.sort(i),Z.hoverinfoItems.indexOf("skip")!==-1)||(X.parcatsViewModel.hoveron==="color"?M(this,"plotly_unhover",S.event):c(this,"plotly_unhover",S.event))}function C(X){X.parcatsViewModel.arrangement!=="fixed"&&(X.dragDimensionDisplayInd=X.model.displayInd,X.initialDragDimensionDisplayInds=X.parcatsViewModel.model.dimensions.map(function(Z){return Z.displayInd}),X.dragHasMoved=!1,X.dragCategoryDisplayInd=null,S.select(this).selectAll("g.category").select("rect.catrect").each(function(Z){var Y=S.mouse(this)[0],W=S.mouse(this)[1];-2<=Y&&Y<=Z.width+2&&-2<=W&&W<=Z.height+2&&(X.dragCategoryDisplayInd=Z.model.displayInd,X.initialDragCategoryDisplayInds=X.model.categories.map(function(Q){return Q.displayInd}),Z.model.dragY=Z.y,b.raiseToTop(this.parentNode),S.select(this.parentNode).selectAll("rect.bandrect").each(function(Q){Q.y<W&&W<=Q.y+Q.height&&(X.potentialClickBand=this)}))}),X.parcatsViewModel.dragDimension=X,T.loneUnhover(X.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function O(X){if(X.parcatsViewModel.arrangement!=="fixed"&&(X.dragHasMoved=!0,X.dragDimensionDisplayInd!==null)){var Z=X.dragDimensionDisplayInd,Y=Z-1,W=Z+1,Q=X.parcatsViewModel.dimensions[Z];if(X.dragCategoryDisplayInd!==null){var ne=Q.categories[X.dragCategoryDisplayInd];ne.model.dragY+=S.event.dy;var re=ne.model.dragY,ie=ne.model.displayInd,se=Q.categories,ge=se[ie-1],ue=se[ie+1];ge!==void 0&&re<ge.y+ge.height/2&&(ne.model.displayInd=ge.model.displayInd,ge.model.displayInd=ie),ue!==void 0&&re+ne.height>ue.y+ue.height/2&&(ne.model.displayInd=ue.model.displayInd,ue.model.displayInd=ie),X.dragCategoryDisplayInd=ne.model.displayInd}if(X.dragCategoryDisplayInd===null||X.parcatsViewModel.arrangement==="freeform"){Q.model.dragX=S.event.x;var ce=X.parcatsViewModel.dimensions[Y],le=X.parcatsViewModel.dimensions[W];ce!==void 0&&Q.model.dragX<ce.x+ce.width&&(Q.model.displayInd=ce.model.displayInd,ce.model.displayInd=Z),le!==void 0&&Q.model.dragX+Q.width>le.x&&(Q.model.displayInd=le.model.displayInd,le.model.displayInd=X.dragDimensionDisplayInd),X.dragDimensionDisplayInd=Q.model.displayInd}j(X.parcatsViewModel),U(X.parcatsViewModel),V(X.parcatsViewModel),R(X.parcatsViewModel)}}function I(X){if(X.parcatsViewModel.arrangement!=="fixed"&&X.dragDimensionDisplayInd!==null){S.select(this).selectAll("text").attr("font-weight","normal");var Z={},Y=N(X.parcatsViewModel),W=X.parcatsViewModel.model.dimensions.map(function(ue){return ue.displayInd}),Q=X.initialDragDimensionDisplayInds.some(function(ue,ce){return ue!==W[ce]});Q&&W.forEach(function(ue,ce){var le=X.parcatsViewModel.model.dimensions[ce].containerInd;Z["dimensions["+le+"].displayindex"]=ue});var ne=!1;if(X.dragCategoryDisplayInd!==null){var re=X.model.categories.map(function(ue){return ue.displayInd});if(ne=X.initialDragCategoryDisplayInds.some(function(ue,ce){return ue!==re[ce]})){var ie=X.model.categories.slice().sort(function(ue,ce){return ue.displayInd-ce.displayInd}),se=ie.map(function(ue){return ue.categoryValue}),ge=ie.map(function(ue){return ue.categoryLabel});Z["dimensions["+X.model.containerInd+"].categoryarray"]=[se],Z["dimensions["+X.model.containerInd+"].ticktext"]=[ge],Z["dimensions["+X.model.containerInd+"].categoryorder"]="array"}}X.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!X.dragHasMoved&&X.potentialClickBand&&(X.parcatsViewModel.hoveron==="color"?M(X.potentialClickBand,"plotly_click",S.event.sourceEvent):c(X.potentialClickBand,"plotly_click",S.event.sourceEvent)),X.model.dragX=null,X.dragCategoryDisplayInd!==null&&(X.parcatsViewModel.dimensions[X.dragDimensionDisplayInd].categories[X.dragCategoryDisplayInd].model.dragY=null,X.dragCategoryDisplayInd=null),X.dragDimensionDisplayInd=null,X.parcatsViewModel.dragDimension=null,X.dragHasMoved=null,X.potentialClickBand=null,j(X.parcatsViewModel),U(X.parcatsViewModel),S.transition().duration(300).ease("cubic-in-out").each(function(){V(X.parcatsViewModel,!0),R(X.parcatsViewModel,!0)}).each("end",function(){(Q||ne)&&l.restyle(X.parcatsViewModel.graphDiv,Z,[Y])})}}function N(X){for(var Z,Y=X.graphDiv._fullData,W=0;W<Y.length;W++)if(X.key===Y[W].uid){Z=W;break}return Z}function R(X,Z){var Y;Z===void 0&&(Z=!1),X.pathSelection.data(function(W){return W.paths},n),(Y=X.pathSelection,Z?Y.transition():Y).attr("d",function(W){return W.svgD})}function V(X,Z){function Y(re){return Z?re.transition():re}Z===void 0&&(Z=!1),X.dimensionSelection.data(function(re){return re.dimensions},n);var W=X.dimensionSelection.selectAll("g.category").data(function(re){return re.categories},n);Y(X.dimensionSelection).attr("transform",function(re){return d(re.x,0)}),Y(W).attr("transform",function(re){return d(0,re.y)}),W.select(".dimlabel").text(function(re,ie){return ie===0?re.parcatsViewModel.model.dimensions[re.model.dimensionInd].dimensionLabel:null}),W.select(".catlabel").attr("text-anchor",function(re){return a(re)?"start":"end"}).attr("x",function(re){return a(re)?re.width+5:-5}).each(function(re){var ie,se;a(re)?(ie=re.width+5,se="start"):(ie=-5,se="end"),S.select(this).selectAll("tspan").attr("x",ie).attr("text-anchor",se)});var Q=W.selectAll("rect.bandrect").data(function(re){return re.bands},n),ne=Q.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(re){return re.color}).attr("fill-opacity",0);Q.attr("fill",function(re){return re.color}).attr("width",function(re){return re.width}).attr("height",function(re){return re.height}).attr("y",function(re){return re.y}),m(ne),Q.each(function(){b.raiseToTop(this)}),Q.exit().remove()}function F(X,Z,Y){var W,Q=Y[0],ne=Z.margin||{l:80,r:80,t:100,b:80},re=Q.trace,ie=re.domain,se=Z.width,ge=Z.height,ue=Math.floor(se*(ie.x[1]-ie.x[0])),ce=Math.floor(ge*(ie.y[1]-ie.y[0])),le=ie.x[0]*se+ne.l,de=Z.height-ie.y[1]*Z.height+ne.t,Ce=re.line.shape;W=re.hoverinfo==="all"?["count","probability"]:(re.hoverinfo||"").split("+");var xe={trace:re,key:re.uid,model:Q,x:le,y:de,width:ue,height:ce,hoveron:re.hoveron,hoverinfoItems:W,arrangement:re.arrangement,bundlecolors:re.bundlecolors,sortpaths:re.sortpaths,labelfont:re.labelfont,categorylabelfont:re.tickfont,pathShape:Ce,dragDimension:null,margin:ne,paths:[],dimensions:[],graphDiv:X,traceSelection:null,pathSelection:null,dimensionSelection:null};return Q.dimensions&&(j(xe),U(xe)),xe}function D(X,Z,Y,W,Q){var ne,re,ie=[],se=[];for(re=0;re<Y.length-1;re++)ne=k(Y[re]+X[re],X[re+1]),ie.push(ne(Q)),se.push(ne(1-Q));var ge="M "+X[0]+","+Z[0];for(ge+="l"+Y[0]+",0 ",re=1;re<Y.length;re++)ge+="C"+ie[re-1]+","+Z[re-1]+" "+se[re-1]+","+Z[re]+" "+X[re]+","+Z[re],ge+="l"+Y[re]+",0 ";for(ge+="l0,"+W+" ",ge+="l -"+Y[Y.length-1]+",0 ",re=Y.length-2;re>=0;re--)ge+="C"+se[re]+","+(Z[re+1]+W)+" "+ie[re]+","+(Z[re]+W)+" "+(X[re]+Y[re])+","+(Z[re]+W),ge+="l-"+Y[re]+",0 ";return ge+"Z"}function U(X){var Z=X.dimensions,Y=X.model,W=Z.map(function(Te){return Te.categories.map(function(ze){return ze.y})}),Q=X.model.dimensions.map(function(Te){return Te.categories.map(function(ze){return ze.displayInd})}),ne=X.model.dimensions.map(function(Te){return Te.displayInd}),re=X.dimensions.map(function(Te){return Te.model.dimensionInd}),ie=Z.map(function(Te){return Te.x}),se=Z.map(function(Te){return Te.width}),ge=[];for(var ue in Y.paths)Y.paths.hasOwnProperty(ue)&&ge.push(Y.paths[ue]);function ce(Te){var ze=Te.categoryInds.map(function(He,Ve){return Q[Ve][He]});return re.map(function(He){return ze[He]})}ge.sort(function(Te,ze){var He=ce(Te),Ve=ce(ze);return X.sortpaths==="backward"&&(He.reverse(),Ve.reverse()),He.push(Te.valueInds[0]),Ve.push(ze.valueInds[0]),X.bundlecolors&&(He.unshift(Te.rawColor),Ve.unshift(ze.rawColor)),He<Ve?-1:He>Ve?1:0});for(var le=new Array(ge.length),de=Z[0].model.count,Ce=Z[0].categories.map(function(Te){return Te.height}).reduce(function(Te,ze){return Te+ze}),xe=0;xe<ge.length;xe++){var _e,we=ge[xe];_e=de>0?Ce*(we.count/de):0;for(var Ae,$=new Array(W.length),oe=0;oe<we.categoryInds.length;oe++){var pe=we.categoryInds[oe],ye=Q[oe][pe],ke=ne[oe];$[ke]=W[ke][ye],W[ke][ye]+=_e;var De=X.dimensions[ke].categories[ye],Pe=De.bands.length,Re=De.bands[Pe-1];if(Re===void 0||we.rawColor!==Re.rawColor){var fe=Re===void 0?0:Re.y+Re.height;De.bands.push({key:fe,color:we.color,rawColor:we.rawColor,height:_e,width:De.width,count:we.count,y:fe,categoryViewModel:De,parcatsViewModel:X})}else{var ve=De.bands[Pe-1];ve.height+=_e,ve.count+=we.count}}Ae=X.pathShape==="hspline"?D(ie,$,se,_e,.5):D(ie,$,se,_e,0),le[xe]={key:we.valueInds[0],model:we,height:_e,leftXs:ie,topYs:$,dimWidths:se,svgD:Ae,parcatsViewModel:X}}X.paths=le}function j(X){var Z=X.model.dimensions.map(function(re){return{displayInd:re.displayInd,dimensionInd:re.dimensionInd}});Z.sort(function(re,ie){return re.displayInd-ie.displayInd});var Y=[];for(var W in Z){var Q=Z[W].dimensionInd,ne=X.model.dimensions[Q];Y.push(J(X,ne))}X.dimensions=Y}function J(X,Z){var Y,W=X.model.dimensions.length,Q=Z.displayInd;Y=40+(W>1?(X.width-80-16)/(W-1):0)*Q;var ne,re,ie,se,ge,ue=[],ce=X.model.maxCats,le=Z.categories.length,de=Z.count,Ce=X.height-8*(ce-1),xe=8*(ce-le)/2,_e=Z.categories.map(function(we){return{displayInd:we.displayInd,categoryInd:we.categoryInd}});for(_e.sort(function(we,Ae){return we.displayInd-Ae.displayInd}),ge=0;ge<le;ge++)se=_e[ge].categoryInd,re=Z.categories[se],ne=de>0?re.count/de*Ce:0,ie={key:re.valueInds[0],model:re,width:16,height:ne,y:re.dragY!==null?re.dragY:xe,bands:[],parcatsViewModel:X},xe=xe+ne+8,ue.push(ie);return{key:Z.dimensionInd,x:Z.dragX!==null?Z.dragX:Y,y:0,width:16,model:Z,categories:ue,parcatsViewModel:X,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}K.exports=function(X,Z,Y,W){r(Y,X,W,Z)}},45784:function(K,z,e){var S=e(45460);K.exports=function(k,l,T,b){var d=k._fullLayout,s=d._paper,t=d._size;S(k,s,l,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},T,b)}},73362:function(K,z,e){var S=e(50693),k=e(13838),l=e(41940),T=e(27670).Y,b=e(1426).extendFlat,d=e(44467).templatedArray;K.exports={domain:T({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:l({editType:"plot"}),tickfont:l({editType:"plot"}),rangefont:l({editType:"plot"}),dimensions:d("dimension",{label:{valType:"string",editType:"plot"},tickvals:b({},k.tickvals,{editType:"plot"}),ticktext:b({},k.ticktext,{editType:"plot"}),tickformat:b({},k.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:b({editType:"calc"},S("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},57920:function(K,z,e){var S=e(25706),k=e(39898),l=e(28984).keyFun,T=e(28984).repeat,b=e(71828).sorterAsc,d=e(71828).strTranslate,s=S.bar.snapRatio;function t(_,E){return _*(1-s)+E*s}var o=S.bar.snapClose;function r(_,E){return _*(1-o)+E*o}function n(_,E,L,C){if(function(J,X){for(var Z=0;Z<X.length;Z++)if(J>=X[Z][0]&&J<=X[Z][1])return!0;return!1}(L,C))return L;var O=_?-1:1,I=0,N=E.length-1;if(O<0){var R=I;I=N,N=R}for(var V=E[I],F=V,D=I;O*D<O*N;D+=O){var U=D+O,j=E[U];if(O*L<O*r(V,j))return t(V,F);if(O*L<O*j||U===N)return t(j,V);F=V,V=j}}function a(_){_.attr("x",-S.bar.captureWidth/2).attr("width",S.bar.captureWidth)}function i(_){_.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function u(_){if(!_.brush.filterSpecified)return"0,"+_.height;for(var E,L,C,O=h(_.brush.filter.getConsolidated(),_.height),I=[0],N=O.length?O[0][0]:null,R=0;R<O.length;R++)L=(E=O[R])[1]-E[0],I.push(N),I.push(L),(C=R+1)<O.length&&(N=O[C][0]-E[1]);return I.push(_.height),I}function h(_,E){return _.map(function(L){return L.map(function(C){return Math.max(0,C*E)}).sort(b)})}function f(){k.select(document.body).style("cursor",null)}function x(_){_.attr("stroke-dasharray",u)}function v(_,E){var L=k.select(_).selectAll(".highlight, .highlight-shadow");x(E?L.transition().duration(S.bar.snapDuration).each("end",E):L)}function g(_,E){var L,C=_.brush,O=NaN,I={};if(C.filterSpecified){var N=_.height,R=C.filter.getConsolidated(),V=h(R,N),F=NaN,D=NaN,U=NaN;for(L=0;L<=V.length;L++){var j=V[L];if(j&&j[0]<=E&&E<=j[1]){F=L;break}if(D=L?L-1:NaN,j&&j[0]>E){U=L;break}}if(O=F,isNaN(O)&&(O=isNaN(D)||isNaN(U)?isNaN(D)?U:D:E-V[D][1]<V[U][0]-E?D:U),!isNaN(O)){var J=V[O],X=function(Q,ne){var re=S.bar.handleHeight;if(!(ne>Q[1]+re||ne<Q[0]-re))return ne>=.9*Q[1]+.1*Q[0]?"n":ne<=.9*Q[0]+.1*Q[1]?"s":"ns"}(J,E);X&&(I.interval=R[O],I.intervalPix=J,I.region=X)}}if(_.ordinal&&!I.region){var Z=_.unitTickvals,Y=_.unitToPaddedPx.invert(E);for(L=0;L<Z.length;L++){var W=[.25*Z[Math.max(L-1,0)]+.75*Z[L],.25*Z[Math.min(L+1,Z.length-1)]+.75*Z[L]];if(Y>=W[0]&&Y<=W[1]){I.clickableOrdinalRange=W;break}}}return I}function y(_,E){k.event.sourceEvent.stopPropagation();var L=E.height-k.mouse(_)[1]-2*S.verticalPadding,C=E.brush.svgBrush;C.wasDragged=!0,C._dragging=!0,C.grabbingBar?C.newExtent=[L-C.grabPoint,L+C.barLength-C.grabPoint].map(E.unitToPaddedPx.invert):C.newExtent=[C.startExtent,E.unitToPaddedPx.invert(L)].sort(b),E.brush.filterSpecified=!0,C.extent=C.stayingIntervals.concat([C.newExtent]),C.brushCallback(E),v(_.parentNode)}function p(_,E){var L=g(E,E.height-k.mouse(_)[1]-2*S.verticalPadding),C="crosshair";L.clickableOrdinalRange?C="pointer":L.region&&(C=L.region+"-resize"),k.select(document.body).style("cursor",C)}function m(_){_.on("mousemove",function(E){k.event.preventDefault(),E.parent.inBrushDrag||p(this,E)}).on("mouseleave",function(E){E.parent.inBrushDrag||f()}).call(k.behavior.drag().on("dragstart",function(E){(function(L,C){k.event.sourceEvent.stopPropagation();var O=C.height-k.mouse(L)[1]-2*S.verticalPadding,I=C.unitToPaddedPx.invert(O),N=C.brush,R=g(C,O),V=R.interval,F=N.svgBrush;if(F.wasDragged=!1,F.grabbingBar=R.region==="ns",F.grabbingBar){var D=V.map(C.unitToPaddedPx);F.grabPoint=O-D[0]-S.verticalPadding,F.barLength=D[1]-D[0]}F.clickableOrdinalRange=R.clickableOrdinalRange,F.stayingIntervals=C.multiselect&&N.filterSpecified?N.filter.getConsolidated():[],V&&(F.stayingIntervals=F.stayingIntervals.filter(function(U){return U[0]!==V[0]&&U[1]!==V[1]})),F.startExtent=R.region?V[R.region==="s"?1:0]:I,C.parent.inBrushDrag=!0,F.brushStartCallback()})(this,E)}).on("drag",function(E){y(this,E)}).on("dragend",function(E){(function(L,C){var O=C.brush,I=O.filter,N=O.svgBrush;N._dragging||(p(L,C),y(L,C),C.brush.svgBrush.wasDragged=!1),N._dragging=!1,k.event.sourceEvent.stopPropagation();var R=N.grabbingBar;if(N.grabbingBar=!1,N.grabLocation=void 0,C.parent.inBrushDrag=!1,f(),!N.wasDragged)return N.wasDragged=void 0,N.clickableOrdinalRange?O.filterSpecified&&C.multiselect?N.extent.push(N.clickableOrdinalRange):(N.extent=[N.clickableOrdinalRange],O.filterSpecified=!0):R?(N.extent=N.stayingIntervals,N.extent.length===0&&c(O)):c(O),N.brushCallback(C),v(L.parentNode),void N.brushEndCallback(O.filterSpecified?I.getConsolidated():[]);var V=function(){I.set(I.getConsolidated())};if(C.ordinal){var F=C.unitTickvals;F[F.length-1]<F[0]&&F.reverse(),N.newExtent=[n(0,F,N.newExtent[0],N.stayingIntervals),n(1,F,N.newExtent[1],N.stayingIntervals)];var D=N.newExtent[1]>N.newExtent[0];N.extent=N.stayingIntervals.concat(D?[N.newExtent]:[]),N.extent.length||c(O),N.brushCallback(C),D?v(L.parentNode,V):(V(),v(L.parentNode))}else V();N.brushEndCallback(O.filterSpecified?I.getConsolidated():[])})(this,E)}))}function w(_,E){return _[0]-E[0]}function c(_){_.filterSpecified=!1,_.svgBrush.extent=[[-1/0,1/0]]}function M(_){for(var E,L=_.slice(),C=[],O=L.shift();O;){for(E=O.slice();(O=L.shift())&&O[0]<=E[1];)E[1]=Math.max(E[1],O[1]);C.push(E)}return C.length===1&&C[0][0]>C[0][1]&&(C=[]),C}K.exports={makeBrush:function(_,E,L,C,O,I){var N,R=function(){var V,F,D=[];return{set:function(U){(D=U.map(function(j){return j.slice().sort(b)}).sort(w)).length===1&&D[0][0]===-1/0&&D[0][1]===1/0&&(D=[[0,-1]]),V=M(D),F=D.reduce(function(j,J){return[Math.min(j[0],J[0]),Math.max(j[1],J[1])]},[1/0,-1/0])},get:function(){return D.slice()},getConsolidated:function(){return V},getBounds:function(){return F}}}();return R.set(L),{filter:R,filterSpecified:E,svgBrush:{extent:[],brushStartCallback:C,brushCallback:(N=O,function(V){var F=V.brush,D=function(j){return j.svgBrush.extent.map(function(J){return J.slice()})}(F),U=D.slice();F.filter.set(U),N()}),brushEndCallback:I}}},ensureAxisBrush:function(_,E,L){var C=_.selectAll("."+S.cn.axisBrush).data(T,l);C.enter().append("g").classed(S.cn.axisBrush,!0),function(O,I,N){var R=N._context.staticPlot,V=O.selectAll(".background").data(T);V.enter().append("rect").classed("background",!0).call(a).call(i).style("pointer-events",R?"none":"auto").attr("transform",d(0,S.verticalPadding)),V.call(m).attr("height",function(U){return U.height-S.verticalPadding});var F=O.selectAll(".highlight-shadow").data(T);F.enter().append("line").classed("highlight-shadow",!0).attr("x",-S.bar.width/2).attr("stroke-width",S.bar.width+S.bar.strokeWidth).attr("stroke",I).attr("opacity",S.bar.strokeOpacity).attr("stroke-linecap","butt"),F.attr("y1",function(U){return U.height}).call(x);var D=O.selectAll(".highlight").data(T);D.enter().append("line").classed("highlight",!0).attr("x",-S.bar.width/2).attr("stroke-width",S.bar.width-S.bar.strokeWidth).attr("stroke",S.bar.fillColor).attr("opacity",S.bar.fillOpacity).attr("stroke-linecap","butt"),D.attr("y1",function(U){return U.height}).call(x)}(C,E,L)},cleanRanges:function(_,E){if(Array.isArray(_[0])?(_=_.map(function(C){return C.sort(b)}),_=E.multiselect?M(_.sort(w)):[_[0]]):_=[_.sort(b)],E.tickvals){var L=E.tickvals.slice().sort(b);if(!(_=_.map(function(C){var O=[n(0,L,C[0],[]),n(1,L,C[1],[])];if(O[1]>O[0])return O}).filter(function(C){return C})).length)return}return _.length>1?_:_[0]}}},71791:function(K,z,e){K.exports={attributes:e(73362),supplyDefaults:e(3633),calc:e(24639),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e(49351),categories:["gl","regl","noOpacity","noHover"],meta:{}}},49351:function(K,z,e){var S=e(39898),k=e(27659).a0,l=e(21341),T=e(77922);z.name="parcoords",z.plot=function(b){var d=k(b.calcdata,"parcoords")[0];d.length&&l(b,d)},z.clean=function(b,d,s,t){var o=t._has&&t._has("parcoords"),r=d._has&&d._has("parcoords");o&&!r&&(t._paperdiv.selectAll(".parcoords").remove(),t._glimages.selectAll("*").remove())},z.toSVG=function(b){var d=b._fullLayout._glimages,s=S.select(b).selectAll(".svg-container");s.filter(function(t,o){return o===s.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this,o=t.toDataURL("image/png");d.append("svg:image").attr({xmlns:T.svg,"xlink:href":o,preserveAspectRatio:"none",x:0,y:0,width:t.style.width,height:t.style.height})}),window.setTimeout(function(){S.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},24639:function(K,z,e){var S=e(71828).isArrayOrTypedArray,k=e(21081),l=e(28984).wrap;K.exports=function(T,b){var d,s;return k.hasColorscale(b,"line")&&S(b.line.color)?(d=b.line.color,s=k.extractOpts(b.line).colorscale,k.calc(T,b,{vals:d,containerStr:"line",cLetter:"c"})):(d=function(t){for(var o=new Array(t),r=0;r<t;r++)o[r]=.5;return o}(b._length),s=[[0,b.line.color],[1,b.line.color]]),l({lineColor:d,cscale:s})}},25706:function(K){K.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},3633:function(K,z,e){var S=e(71828),k=e(52075).hasColorscale,l=e(1586),T=e(27670).c,b=e(85501),d=e(89298),s=e(73362),t=e(57920),o=e(25706).maxDimensionCount,r=e(94397);function n(a,i,u,h){function f(p,m){return S.coerce(a,i,s.dimensions,p,m)}var x=f("values"),v=f("visible");if(x&&x.length||(v=i.visible=!1),v){f("label"),f("tickvals"),f("ticktext"),f("tickformat");var g=f("range");i._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:g},d.setConvert(i._ax,h.layout),f("multiselect");var y=f("constraintrange");y&&(i.constraintrange=t.cleanRanges(y,i))}}K.exports=function(a,i,u,h){function f(p,m){return S.coerce(a,i,s,p,m)}var x=a.dimensions;Array.isArray(x)&&x.length>o&&(S.log("parcoords traces support up to "+o+" dimensions at the moment"),x.splice(o));var v=b(a,i,{name:"dimensions",layout:h,handleItemDefaults:n}),g=function(p,m,w,c,M){var _=M("line.color",w);if(k(p,"line")&&S.isArrayOrTypedArray(_)){if(_.length)return M("line.colorscale"),l(p,m,c,M,{prefix:"line.",cLetter:"c"}),_.length;m.line.color=w}return 1/0}(a,i,u,h,f);T(i,h,f),Array.isArray(v)&&v.length||(i.visible=!1),r(i,v,"values",g);var y={family:h.font.family,size:Math.round(h.font.size/1.2),color:h.font.color};S.coerceFont(f,"labelfont",y),S.coerceFont(f,"tickfont",y),S.coerceFont(f,"rangefont",y),f("labelangle"),f("labelside"),f("unselected.line.color"),f("unselected.line.opacity")}},1602:function(K,z,e){var S=e(71828).isTypedArray;z.convertTypedArray=function(k){return S(k)?Array.prototype.slice.call(k):k},z.isOrdinal=function(k){return!!k.tickvals},z.isVisible=function(k){return k.visible||!("visible"in k)}},67618:function(K,z,e){var S=e(71791);S.plot=e(21341),K.exports=S},83398:function(K,z,e){var S=e(56068),k=S([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),l=S([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),T=e(25706).maxDimensionCount,b=e(71828),d=new Uint8Array(4),s=new Uint8Array(4),t={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function o(v,g,y,p,m){var w=v._gl;w.enable(w.SCISSOR_TEST),w.scissor(g,y,p,m),v.clear({color:[0,0,0,0],depth:1})}function r(v,g,y,p,m,w){var c=w.key;y.drawCompleted||(function(M){M.read({x:0,y:0,width:1,height:1,data:d})}(v),y.drawCompleted=!0),function M(_){var E=Math.min(p,m-_*p);_===0&&(window.cancelAnimationFrame(y.currentRafs[c]),delete y.currentRafs[c],o(v,w.scissorX,w.scissorY,w.scissorWidth,w.viewBoxSize[1])),y.clearOnly||(w.count=2*E,w.offset=2*_*p,g(w),_*p+E<m&&(y.currentRafs[c]=window.requestAnimationFrame(function(){M(_+1)})),y.drawCompleted=!1)}(0)}function n(v,g){for(var y=new Array(256),p=0;p<256;p++)y[p]=v(p/255).concat(g);return y}function a(v,g){return(v>>>8*g)%256/255}function i(v,g,y){for(var p=new Array(8*g),m=0,w=0;w<g;w++)for(var c=0;c<2;c++)for(var M=0;M<4;M++){var _=4*v+M,E=y[64*w+_];_===63&&c===0&&(E*=-1),p[m++]=E}return p}function u(v){var g="0"+v;return g.substr(g.length-2)}function h(v){return v<T?"p"+u(v+1)+"_"+u(v+4):"colors"}function f(v,g,y,p,m,w,c,M,_,E,L,C,O,I){for(var N=[[],[]],R=0;R<64;R++)N[0][R]=R===m?1:0,N[1][R]=R===w?1:0;c*=I,M*=I,_*=I,E*=I;var V=v.lines.canvasOverdrag*I,F=v.domain,D=v.canvasWidth*I,U=v.canvasHeight*I,j=v.pad.l*I,J=v.pad.b*I,X=v.layoutHeight*I,Z=v.layoutWidth*I,Y=v.deselectedLines.color,W=v.deselectedLines.opacity;return b.extendFlat({key:L,resolution:[D,U],viewBoxPos:[c+V,M],viewBoxSize:[_,E],i0:m,i1:w,dim0A:N[0].slice(0,16),dim0B:N[0].slice(16,32),dim0C:N[0].slice(32,48),dim0D:N[0].slice(48,64),dim1A:N[1].slice(0,16),dim1B:N[1].slice(16,32),dim1C:N[1].slice(32,48),dim1D:N[1].slice(48,64),drwLayer:C,contextColor:[Y[0]/255,Y[1]/255,Y[2]/255,W!=="auto"?Y[3]*W:Math.max(.00392156862745098,Math.pow(1/v.lines.color.length,.3333333333333333))],scissorX:(p===g?0:c+V)+(j-V)+Z*F.x[0],scissorWidth:(p===y?D-c+V:_+.5)+(p===g?c+V:0),scissorY:M+J+X*F.y[0],scissorHeight:E,viewportX:j-V+Z*F.x[0],viewportY:J+X*F.y[0],viewportWidth:D,viewportHeight:U},O)}function x(v){var g=2047,y=Math.max(0,Math.floor(v[0]*g),0),p=Math.min(g,Math.ceil(v[1]*g),g);return[Math.min(y,p),Math.max(y,p)]}K.exports=function(v,g){var y,p,m,w,c,M=g.context,_=g.pick,E=g.regl,L=E._gl,C=L.getParameter(L.ALIASED_LINE_WIDTH_RANGE),O=Math.max(C[0],Math.min(C[1],g.viewModel.plotGlPixelRatio)),I={currentRafs:{},drawCompleted:!0,clearOnly:!1},N=function(U){for(var j={},J=0;J<=T;J+=4)j[h(J)]=U.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return j}(E),R=E.texture(t),V=[];D(g);var F=E({profile:!1,blend:{enable:M,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!M,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:E.prop("scissorX"),y:E.prop("scissorY"),width:E.prop("scissorWidth"),height:E.prop("scissorHeight")}},viewport:{x:E.prop("viewportX"),y:E.prop("viewportY"),width:E.prop("viewportWidth"),height:E.prop("viewportHeight")},dither:!1,vert:k,frag:l,primitive:"lines",lineWidth:O,attributes:N,uniforms:{resolution:E.prop("resolution"),viewBoxPos:E.prop("viewBoxPos"),viewBoxSize:E.prop("viewBoxSize"),dim0A:E.prop("dim0A"),dim1A:E.prop("dim1A"),dim0B:E.prop("dim0B"),dim1B:E.prop("dim1B"),dim0C:E.prop("dim0C"),dim1C:E.prop("dim1C"),dim0D:E.prop("dim0D"),dim1D:E.prop("dim1D"),loA:E.prop("loA"),hiA:E.prop("hiA"),loB:E.prop("loB"),hiB:E.prop("hiB"),loC:E.prop("loC"),hiC:E.prop("hiC"),loD:E.prop("loD"),hiD:E.prop("hiD"),palette:R,contextColor:E.prop("contextColor"),maskTexture:E.prop("maskTexture"),drwLayer:E.prop("drwLayer"),maskHeight:E.prop("maskHeight")},offset:E.prop("offset"),count:E.prop("count")});function D(U){y=U.model,p=U.viewModel,m=p.dimensions.slice(),w=m[0]?m[0].values.length:0;var j=y.lines,J=_?j.color.map(function(Z,Y){return Y/j.color.length}):j.color,X=function(Z,Y,W){for(var Q,ne=new Array(Z*(T+4)),re=0,ie=0;ie<Z;ie++){for(var se=0;se<T;se++)ne[re++]=se<Y.length?Y[se].paddedUnitValues[ie]:.5;ne[re++]=a(ie,2),ne[re++]=a(ie,1),ne[re++]=a(ie,0),ne[re++]=(Q=W[ie],Math.max(1e-6,Math.min(.999999,Q)))}return ne}(w,m,J);(function(Z,Y,W){for(var Q=0;Q<=T;Q+=4)Z[h(Q)](i(Q/4,Y,W))})(N,w,X),M||_||(R=E.texture(b.extendFlat({data:n(y.unitToColor,255)},t)))}return{render:function(U,j,J){var X,Z,Y,W=U.length,Q=1/0,ne=-1/0;for(X=0;X<W;X++)U[X].dim0.canvasX<Q&&(Q=U[X].dim0.canvasX,Z=X),U[X].dim1.canvasX>ne&&(ne=U[X].dim1.canvasX,Y=X);W===0&&o(E,0,0,y.canvasWidth,y.canvasHeight);var re=function(_e){var we,Ae,$,oe=[[],[]];for($=0;$<64;$++){var pe=!_e&&$<m.length?m[$].brush.filter.getBounds():[-1/0,1/0];oe[0][$]=pe[0],oe[1][$]=pe[1]}var ye=new Array(16384);for(we=0;we<16384;we++)ye[we]=255;if(!_e)for(we=0;we<m.length;we++){var ke=we%8,De=(we-ke)/8,Pe=Math.pow(2,ke),Re=m[we].brush.filter.get();if(!(Re.length<2)){var fe=x(Re[0])[1];for(Ae=1;Ae<Re.length;Ae++){var ve=x(Re[Ae]);for($=fe+1;$<ve[0];$++)ye[8*$+De]&=~Pe;fe=Math.max(fe,ve[1])}}}var Te={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:ye};return c?c(Te):c=E.texture(Te),{maskTexture:c,maskHeight:2048,loA:oe[0].slice(0,16),loB:oe[0].slice(16,32),loC:oe[0].slice(32,48),loD:oe[0].slice(48,64),hiA:oe[1].slice(0,16),hiB:oe[1].slice(16,32),hiC:oe[1].slice(32,48),hiD:oe[1].slice(48,64)}}(M);for(X=0;X<W;X++){var ie=U[X],se=ie.dim0.crossfilterDimensionIndex,ge=ie.dim1.crossfilterDimensionIndex,ue=ie.canvasX,ce=ie.canvasY,le=ue+ie.panelSizeX,de=ie.plotGlPixelRatio;if(j||!V[se]||V[se][0]!==ue||V[se][1]!==le){V[se]=[ue,le];var Ce=f(y,Z,Y,X,se,ge,ue,ce,ie.panelSizeX,ie.panelSizeY,ie.dim0.crossfilterDimensionIndex,M?0:_?2:1,re,de);I.clearOnly=J;var xe=j?y.lines.blockLineCount:w;r(E,F,I,xe,w,Ce)}}},readPixel:function(U,j){return E.read({x:U,y:j,width:1,height:1,data:s}),s},readPixels:function(U,j,J,X){var Z=new Uint8Array(4*J*X);return E.read({x:U,y:j,width:J,height:X,data:Z}),Z},destroy:function(){for(var U in v.style["pointer-events"]="none",R.destroy(),c&&c.destroy(),N)N[U].destroy()},update:D}}},94397:function(K){K.exports=function(z,e,S,k){var l,T;for(k||(k=1/0),l=0;l<e.length;l++)(T=e[l]).visible&&(k=Math.min(k,T[S].length));for(k===1/0&&(k=0),z._length=k,l=0;l<e.length;l++)(T=e[l]).visible&&(T._length=k);return k}},17171:function(K,z,e){var S=e(39898),k=e(71828),l=k.numberFormat,T=e(36652),b=e(89298),d=k.strRotate,s=k.strTranslate,t=e(63893),o=e(91424),r=e(21081),n=e(28984),a=n.keyFun,i=n.repeat,u=n.unwrap,h=e(1602),f=e(25706),x=e(57920),v=e(83398);function g(V,F,D){return k.aggNums(V,null,F,D)}function y(V,F){return m(g(Math.min,V,F),g(Math.max,V,F))}function p(V){var F=V.range;return F?m(F[0],F[1]):y(V.values,V._length)}function m(V,F){return!isNaN(V)&&isFinite(V)||(V=0),!isNaN(F)&&isFinite(F)||(F=0),V===F&&(V===0?(V-=1,F+=1):(V*=.9,F*=1.1)),[V,F]}function w(V,F,D,U,j){var J,X,Z=p(D);return U?S.scale.ordinal().domain(U.map((J=l(D.tickformat),X=j,X?function(Y,W){var Q=X[W];return Q??J(Y)}:J))).range(U.map(function(Y){var W=(Y-Z[0])/(Z[1]-Z[0]);return V-F+W*(2*F-V)})):S.scale.linear().domain(Z).range([V-F,F])}function c(V){if(V.tickvals){var F=p(V);return S.scale.ordinal().domain(V.tickvals).range(V.tickvals.map(function(D){return(D-F[0])/(F[1]-F[0])}))}}function M(V){var F=V.map(function(j){return j[0]}),D=V.map(function(j){var J=T(j[1]);return S.rgb("rgb("+J[0]+","+J[1]+","+J[2]+")")}),U="rgb".split("").map(function(j){return S.scale.linear().clamp(!0).domain(F).range(D.map((J=j,function(X){return X[J]})));var J});return function(j){return U.map(function(J){return J(j)})}}function _(V){return V.dimensions.some(function(F){return F.brush.filterSpecified})}function E(V,F,D){var U=u(F),j=U.trace,J=h.convertTypedArray(U.lineColor),X=j.line,Z={color:T(j.unselected.line.color),opacity:j.unselected.line.opacity},Y=r.extractOpts(X),W=Y.reversescale?r.flipScale(U.cscale):U.cscale,Q=j.domain,ne=j.dimensions,re=V.width,ie=j.labelangle,se=j.labelside,ge=j.labelfont,ue=j.tickfont,ce=j.rangefont,le=k.extendDeepNoArrays({},X,{color:J.map(S.scale.linear().domain(p({values:J,range:[Y.min,Y.max],_length:j._length}))),blockLineCount:f.blockLineCount,canvasOverdrag:f.overdrag*f.canvasPixelRatio}),de=Math.floor(re*(Q.x[1]-Q.x[0])),Ce=Math.floor(V.height*(Q.y[1]-Q.y[0])),xe=V.margin||{l:80,r:80,t:100,b:80},_e=de,we=Ce;return{key:D,colCount:ne.filter(h.isVisible).length,dimensions:ne,tickDistance:f.tickDistance,unitToColor:M(W),lines:le,deselectedLines:Z,labelAngle:ie,labelSide:se,labelFont:ge,tickFont:ue,rangeFont:ce,layoutWidth:re,layoutHeight:V.height,domain:Q,translateX:Q.x[0]*re,translateY:V.height-Q.y[1]*V.height,pad:xe,canvasWidth:_e*f.canvasPixelRatio+2*le.canvasOverdrag,canvasHeight:we*f.canvasPixelRatio,width:_e,height:we,canvasPixelRatio:f.canvasPixelRatio}}function L(V,F,D){var U=D.width,j=D.height,J=D.dimensions,X=D.canvasPixelRatio,Z=function(re){return U*re/Math.max(1,D.colCount-1)},Y=f.verticalPadding/j,W=function(re,ie){return S.scale.linear().range([ie,re-ie])}(j,f.verticalPadding),Q={key:D.key,xScale:Z,model:D,inBrushDrag:!1},ne={};return Q.dimensions=J.filter(h.isVisible).map(function(re,ie){var se=function(ye,ke){return S.scale.linear().domain(p(ye)).range([ke,1-ke])}(re,Y),ge=ne[re.label];ne[re.label]=(ge||0)+1;var ue=re.label+(ge?"__"+ge:""),ce=re.constraintrange,le=ce&&ce.length;le&&!Array.isArray(ce[0])&&(ce=[ce]);var de=le?ce.map(function(ye){return ye.map(se)}):[[-1/0,1/0]],Ce=re.values;Ce.length>re._length&&(Ce=Ce.slice(0,re._length));var xe,_e=re.tickvals;function we(ye,ke){return{val:ye,text:xe[ke]}}function Ae(ye,ke){return ye.val-ke.val}if(Array.isArray(_e)&&_e.length){xe=re.ticktext,Array.isArray(xe)&&xe.length?xe.length>_e.length?xe=xe.slice(0,_e.length):_e.length>xe.length&&(_e=_e.slice(0,xe.length)):xe=_e.map(l(re.tickformat));for(var $=1;$<_e.length;$++)if(_e[$]<_e[$-1]){for(var oe=_e.map(we).sort(Ae),pe=0;pe<_e.length;pe++)_e[pe]=oe[pe].val,xe[pe]=oe[pe].text;break}}else _e=void 0;return Ce=h.convertTypedArray(Ce),{key:ue,label:re.label,tickFormat:re.tickformat,tickvals:_e,ticktext:xe,ordinal:h.isOrdinal(re),multiselect:re.multiselect,xIndex:ie,crossfilterDimensionIndex:ie,visibleIndex:re._index,height:j,values:Ce,paddedUnitValues:Ce.map(se),unitTickvals:_e&&_e.map(se),xScale:Z,x:Z(ie),canvasX:Z(ie)*X,unitToPaddedPx:W,domainScale:w(j,f.verticalPadding,re,_e,xe),ordinalScale:c(re),parent:Q,model:D,brush:x.makeBrush(V,le,de,function(){V.linePickActive(!1)},function(){var ye=Q;ye.focusLayer&&ye.focusLayer.render(ye.panels,!0);var ke=_(ye);!V.contextShown()&&ke?(ye.contextLayer&&ye.contextLayer.render(ye.panels,!0),V.contextShown(!0)):V.contextShown()&&!ke&&(ye.contextLayer&&ye.contextLayer.render(ye.panels,!0,!0),V.contextShown(!1))},function(ye){if(Q.focusLayer.render(Q.panels,!0),Q.pickLayer&&Q.pickLayer.render(Q.panels,!0),V.linePickActive(!0),F&&F.filterChanged){var ke=se.invert,De=ye.map(function(Pe){return Pe.map(ke).sort(k.sorterAsc)}).sort(function(Pe,Re){return Pe[0]-Re[0]});F.filterChanged(Q.key,re._index,De)}})}}),Q}function C(V){V.classed(f.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function O(V,F){var D=F==="top"?1:-1,U=V*Math.PI/180;return{dir:D,dx:Math.sin(U),dy:Math.cos(U),degrees:V}}function I(V,F,D){for(var U=F.panels||(F.panels=[]),j=V.data(),J=0;J<j.length-1;J++){var X=U[J]||(U[J]={}),Z=j[J],Y=j[J+1];X.dim0=Z,X.dim1=Y,X.canvasX=Z.canvasX,X.panelSizeX=Y.canvasX-Z.canvasX,X.panelSizeY=F.model.canvasHeight,X.y=0,X.canvasY=0,X.plotGlPixelRatio=D}}function N(V,F){return b.tickText(V._ax,F,!1).text}function R(V,F){if(V.ordinal)return"";var D=V.domainScale.domain(),U=D[F?D.length-1:0];return N(V.model.dimensions[V.visibleIndex],U)}K.exports=function(V,F,D,U){var j=V._context.staticPlot,J=V._fullLayout,X=J._toppaper,Z=J._glcontainer,Y=V._context.plotGlPixelRatio,W=V._fullLayout.paper_bgcolor;(function(ye){for(var ke=0;ke<ye.length;ke++)for(var De=0;De<ye[ke].length;De++)for(var Pe=ye[ke][De].trace,Re=Pe.dimensions,fe=0;fe<Re.length;fe++){var ve=Re[fe].values,Te=Re[fe]._ax;Te&&(Te.range?Te.range=m(Te.range[0],Te.range[1]):Te.range=y(ve,Pe._length),Te.dtick||(Te.dtick=.01*(Math.abs(Te.range[1]-Te.range[0])||1)),Te.tickformat=Re[fe].tickformat,b.calcTicks(Te),Te.cleanRange())}})(F);var Q,ne,re=(Q=!0,ne=!1,{linePickActive:function(ye){return arguments.length?Q=!!ye:Q},contextShown:function(ye){return arguments.length?ne=!!ye:ne}}),ie=F.filter(function(ye){return u(ye).trace.visible}).map(E.bind(0,D)).map(L.bind(0,re,U));Z.each(function(ye,ke){return k.extendFlat(ye,ie[ke])});var se=Z.selectAll(".gl-canvas").each(function(ye){ye.viewModel=ie[0],ye.viewModel.plotGlPixelRatio=Y,ye.viewModel.paperColor=W,ye.model=ye.viewModel?ye.viewModel.model:null}),ge=null;se.filter(function(ye){return ye.pick}).style("pointer-events",j?"none":"auto").on("mousemove",function(ye){if(re.linePickActive()&&ye.lineLayer&&U&&U.hover){var ke=S.event,De=this.width,Pe=this.height,Re=S.mouse(this),fe=Re[0],ve=Re[1];if(fe<0||ve<0||fe>=De||ve>=Pe)return;var Te=ye.lineLayer.readPixel(fe,Pe-1-ve),ze=Te[3]!==0,He=ze?Te[2]+256*(Te[1]+256*Te[0]):null,Ve={x:fe,y:ve,clientX:ke.clientX,clientY:ke.clientY,dataIndex:ye.model.key,curveNumber:He};He!==ge&&(ze?U.hover(Ve):U.unhover&&U.unhover(Ve),ge=He)}}),se.style("opacity",function(ye){return ye.pick?0:1}),X.style("background","rgba(255, 255, 255, 0)");var ue=X.selectAll("."+f.cn.parcoords).data(ie,a);ue.exit().remove(),ue.enter().append("g").classed(f.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),ue.attr("transform",function(ye){return s(ye.model.translateX,ye.model.translateY)});var ce=ue.selectAll("."+f.cn.parcoordsControlView).data(i,a);ce.enter().append("g").classed(f.cn.parcoordsControlView,!0),ce.attr("transform",function(ye){return s(ye.model.pad.l,ye.model.pad.t)});var le=ce.selectAll("."+f.cn.yAxis).data(function(ye){return ye.dimensions},a);le.enter().append("g").classed(f.cn.yAxis,!0),ce.each(function(ye){I(le,ye,Y)}),se.each(function(ye){if(ye.viewModel){!ye.lineLayer||U?ye.lineLayer=v(this,ye):ye.lineLayer.update(ye),(ye.key||ye.key===0)&&(ye.viewModel[ye.key]=ye.lineLayer);var ke=!ye.context||U;ye.lineLayer.render(ye.viewModel.panels,ke)}}),le.attr("transform",function(ye){return s(ye.xScale(ye.xIndex),0)}),le.call(S.behavior.drag().origin(function(ye){return ye}).on("drag",function(ye){var ke=ye.parent;re.linePickActive(!1),ye.x=Math.max(-f.overdrag,Math.min(ye.model.width+f.overdrag,S.event.x)),ye.canvasX=ye.x*ye.model.canvasPixelRatio,le.sort(function(De,Pe){return De.x-Pe.x}).each(function(De,Pe){De.xIndex=Pe,De.x=ye===De?De.x:De.xScale(De.xIndex),De.canvasX=De.x*De.model.canvasPixelRatio}),I(le,ke,Y),le.filter(function(De){return Math.abs(ye.xIndex-De.xIndex)!==0}).attr("transform",function(De){return s(De.xScale(De.xIndex),0)}),S.select(this).attr("transform",s(ye.x,0)),le.each(function(De,Pe,Re){Re===ye.parent.key&&(ke.dimensions[Pe]=De)}),ke.contextLayer&&ke.contextLayer.render(ke.panels,!1,!_(ke)),ke.focusLayer.render&&ke.focusLayer.render(ke.panels)}).on("dragend",function(ye){var ke=ye.parent;ye.x=ye.xScale(ye.xIndex),ye.canvasX=ye.x*ye.model.canvasPixelRatio,I(le,ke,Y),S.select(this).attr("transform",function(De){return s(De.x,0)}),ke.contextLayer&&ke.contextLayer.render(ke.panels,!1,!_(ke)),ke.focusLayer&&ke.focusLayer.render(ke.panels),ke.pickLayer&&ke.pickLayer.render(ke.panels,!0),re.linePickActive(!0),U&&U.axesMoved&&U.axesMoved(ke.key,ke.dimensions.map(function(De){return De.crossfilterDimensionIndex}))})),le.exit().remove();var de=le.selectAll("."+f.cn.axisOverlays).data(i,a);de.enter().append("g").classed(f.cn.axisOverlays,!0),de.selectAll("."+f.cn.axis).remove();var Ce=de.selectAll("."+f.cn.axis).data(i,a);Ce.enter().append("g").classed(f.cn.axis,!0),Ce.each(function(ye){var ke=ye.model.height/ye.model.tickDistance,De=ye.domainScale,Pe=De.domain();S.select(this).call(S.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(ke,ye.tickFormat).tickValues(ye.ordinal?Pe:null).tickFormat(function(Re){return h.isOrdinal(ye)?Re:N(ye.model.dimensions[ye.visibleIndex],Re)}).scale(De)),o.font(Ce.selectAll("text"),ye.model.tickFont)}),Ce.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),Ce.selectAll("text").style("text-shadow",t.makeTextShadow(W)).style("cursor","default");var xe=de.selectAll("."+f.cn.axisHeading).data(i,a);xe.enter().append("g").classed(f.cn.axisHeading,!0);var _e=xe.selectAll("."+f.cn.axisTitle).data(i,a);_e.enter().append("text").classed(f.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",j?"none":"auto"),_e.text(function(ye){return ye.label}).each(function(ye){var ke=S.select(this);o.font(ke,ye.model.labelFont),t.convertToTspans(ke,V)}).attr("transform",function(ye){var ke=O(ye.model.labelAngle,ye.model.labelSide),De=f.axisTitleOffset;return(ke.dir>0?"":s(0,2*De+ye.model.height))+d(ke.degrees)+s(-De*ke.dx,-De*ke.dy)}).attr("text-anchor",function(ye){var ke=O(ye.model.labelAngle,ye.model.labelSide);return 2*Math.abs(ke.dx)>Math.abs(ke.dy)?ke.dir*ke.dx<0?"start":"end":"middle"});var we=de.selectAll("."+f.cn.axisExtent).data(i,a);we.enter().append("g").classed(f.cn.axisExtent,!0);var Ae=we.selectAll("."+f.cn.axisExtentTop).data(i,a);Ae.enter().append("g").classed(f.cn.axisExtentTop,!0),Ae.attr("transform",s(0,-f.axisExtentOffset));var $=Ae.selectAll("."+f.cn.axisExtentTopText).data(i,a);$.enter().append("text").classed(f.cn.axisExtentTopText,!0).call(C),$.text(function(ye){return R(ye,!0)}).each(function(ye){o.font(S.select(this),ye.model.rangeFont)});var oe=we.selectAll("."+f.cn.axisExtentBottom).data(i,a);oe.enter().append("g").classed(f.cn.axisExtentBottom,!0),oe.attr("transform",function(ye){return s(0,ye.model.height+f.axisExtentOffset)});var pe=oe.selectAll("."+f.cn.axisExtentBottomText).data(i,a);pe.enter().append("text").classed(f.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(C),pe.text(function(ye){return R(ye,!1)}).each(function(ye){o.font(S.select(this),ye.model.rangeFont)}),x.ensureAxisBrush(de,W,V)}},21341:function(K,z,e){var S=e(17171),k=e(79749),l=e(1602).isVisible,T={};function b(d,s,t){var o=s.indexOf(t),r=d.indexOf(o);return r===-1&&(r+=s.length),r}(K.exports=function(d,s){var t=d._fullLayout;if(k(d,[],T)){var o={},r={},n={},a={},i=t._size;s.forEach(function(u,h){var f=u[0].trace;n[h]=f.index;var x=a[h]=f._fullInput.index;o[h]=d.data[x].dimensions,r[h]=d.data[x].dimensions.slice()}),S(d,s,{width:i.w,height:i.h,margin:{t:i.t,r:i.r,b:i.b,l:i.l}},{filterChanged:function(u,h,f){var x=r[u][h],v=f.map(function(c){return c.slice()}),g="dimensions["+h+"].constraintrange",y=t._tracePreGUI[d._fullData[n[u]]._fullInput.uid];if(y[g]===void 0){var p=x.constraintrange;y[g]=p||null}var m=d._fullData[n[u]].dimensions[h];v.length?(v.length===1&&(v=v[0]),x.constraintrange=v,m.constraintrange=v.slice(),v=[v]):(delete x.constraintrange,delete m.constraintrange,v=null);var w={};w[g]=v,d.emit("plotly_restyle",[w,[a[u]]])},hover:function(u){d.emit("plotly_hover",u)},unhover:function(u){d.emit("plotly_unhover",u)},axesMoved:function(u,h){var f=function(x,v){return function(g,y){return b(x,v,g)-b(x,v,y)}}(h,r[u].filter(l));o[u].sort(f),r[u].filter(function(x){return!l(x)}).sort(function(x){return r[u].indexOf(x)}).forEach(function(x){o[u].splice(o[u].indexOf(x),1),o[u].splice(r[u].indexOf(x),0,x)}),d.emit("plotly_restyle",[{dimensions:[o[u]]},[a[u]]])}})}}).reglPrecompiled=T},34e3:function(K,z,e){var S=e(9012),k=e(27670).Y,l=e(41940),T=e(22399),b=e(5386).fF,d=e(5386).si,s=e(1426).extendFlat,t=l({editType:"plot",arrayOk:!0,colorEditType:"plot"});K.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:s({},S.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:b({},{keys:["label","color","value","percent","text"]}),texttemplate:d({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:s({},t,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:s({},t,{}),outsidetextfont:s({},t,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:s({},t,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:k({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:s({},t,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},13584:function(K,z,e){var S=e(74875);z.name="pie",z.plot=function(k,l,T,b){S.plotBasePlot(z.name,k,l,T,b)},z.clean=function(k,l,T,b){S.cleanBasePlot(z.name,k,l,T,b)}},32354:function(K,z,e){var S=e(92770),k=e(84267),l=e(7901),T={};function b(s){return function(t,o){return!!t&&!!(t=k(t)).isValid()&&(t=l.addOpacity(t,t.getAlpha()),s[o]||(s[o]=t),t)}}function d(s,t){var o,r=JSON.stringify(s),n=t[r];if(!n){for(n=s.slice(),o=0;o<s.length;o++)n.push(k(s[o]).lighten(20).toHexString());for(o=0;o<s.length;o++)n.push(k(s[o]).darken(20).toHexString());t[r]=n}return n}K.exports={calc:function(s,t){var o,r,n=[],a=s._fullLayout,i=a.hiddenlabels||[],u=t.labels,h=t.marker.colors||[],f=t.values,x=t._length,v=t._hasValues&&x;if(t.dlabel)for(u=new Array(x),o=0;o<x;o++)u[o]=String(t.label0+o*t.dlabel);var g={},y=b(a["_"+t.type+"colormap"]),p=0,m=!1;for(o=0;o<x;o++){var w,c,M;if(v){if(w=f[o],!S(w))continue;w=+w}else w=1;(c=u[o])!==void 0&&c!==""||(c=o);var _=g[c=String(c)];_===void 0?(g[c]=n.length,(M=i.indexOf(c)!==-1)||(p+=w),n.push({v:w,label:c,color:y(h[o],c),i:o,pts:[o],hidden:M})):(m=!0,(r=n[_]).v+=w,r.pts.push(o),r.hidden||(p+=w),r.color===!1&&h[o]&&(r.color=y(h[o],c)))}return n=n.filter(function(E){return E.v>=0}),(t.type==="funnelarea"?m:t.sort)&&n.sort(function(E,L){return L.v-E.v}),n[0]&&(n[0].vTotal=p),n},crossTraceCalc:function(s,t){var o=(t||{}).type;o||(o="pie");var r=s._fullLayout,n=s.calcdata,a=r[o+"colorway"],i=r["_"+o+"colormap"];r["extend"+o+"colors"]&&(a=d(a,T));for(var u=0,h=0;h<n.length;h++){var f=n[h];if(f[0].trace.type===o)for(var x=0;x<f.length;x++){var v=f[x];v.color===!1&&(i[v.label]?v.color=i[v.label]:(i[v.label]=v.color=a[u%a.length],u++))}}},makePullColorFn:b,generateExtendedColors:d}},37434:function(K,z,e){var S=e(92770),k=e(71828),l=e(34e3),T=e(27670).c,b=e(90769).handleText;function d(s,t){var o=Array.isArray(s),r=k.isArrayOrTypedArray(t),n=Math.min(o?s.length:1/0,r?t.length:1/0);if(isFinite(n)||(n=0),n&&r){for(var a,i=0;i<n;i++){var u=t[i];if(S(u)&&u>0){a=!0;break}}a||(n=0)}return{hasLabels:o,hasValues:r,len:n}}K.exports={handleLabelsAndValues:d,supplyDefaults:function(s,t,o,r){function n(y,p){return k.coerce(s,t,l,y,p)}var a=d(n("labels"),n("values")),i=a.len;if(t._hasLabels=a.hasLabels,t._hasValues=a.hasValues,!t._hasLabels&&t._hasValues&&(n("label0"),n("dlabel")),i){t._length=i,n("marker.line.width")&&n("marker.line.color"),n("marker.colors"),n("scalegroup");var u,h=n("text"),f=n("texttemplate");if(f||(u=n("textinfo",Array.isArray(h)?"text+percent":"percent")),n("hovertext"),n("hovertemplate"),f||u&&u!=="none"){var x=n("textposition");b(s,t,r,n,x,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(x)||x==="auto"||x==="outside")&&n("automargin"),(x==="inside"||x==="auto"||Array.isArray(x))&&n("insidetextorientation")}T(t,r,n);var v=n("hole");if(n("title.text")){var g=n("title.position",v?"middle center":"top center");v||g!=="middle center"||(t.title.position="top center"),k.coerceFont(n,"title.font",r.font)}n("sort"),n("direction"),n("rotation"),n("pull")}else t.visible=!1}}},20007:function(K,z,e){var S=e(23469).appendArrayMultiPointValues;K.exports=function(k,l){var T={curveNumber:l.index,pointNumbers:k.pts,data:l._input,fullData:l,label:k.label,color:k.color,value:k.v,percent:k.percent,text:k.text,bbox:k.bbox,v:k.v};return k.pts.length===1&&(T.pointNumber=T.i=k.pts[0]),S(T,l,k.pts),l.type==="funnelarea"&&(delete T.v,delete T.i),T}},53581:function(K,z,e){var S=e(71828);function k(l){return l.indexOf("e")!==-1?l.replace(/[.]?0+e/,"e"):l.indexOf(".")!==-1?l.replace(/[.]?0+$/,""):l}z.formatPiePercent=function(l,T){var b=k((100*l).toPrecision(3));return S.numSeparate(b,T)+"%"},z.formatPieValue=function(l,T){var b=k(l.toPrecision(10));return S.numSeparate(b,T)},z.getFirstFilled=function(l,T){if(Array.isArray(l))for(var b=0;b<T.length;b++){var d=l[T[b]];if(d||d===0||d==="")return d}},z.castOption=function(l,T){return Array.isArray(l)?z.getFirstFilled(l,T):l||void 0},z.getRotationAngle=function(l){return(l==="auto"?0:l)*Math.PI/180}},58810:function(K,z,e){K.exports={attributes:e(34e3),supplyDefaults:e(37434).supplyDefaults,supplyLayoutDefaults:e(92097),layoutAttributes:e(92774),calc:e(32354).calc,crossTraceCalc:e(32354).crossTraceCalc,plot:e(14575).plot,style:e(68357),styleOne:e(63463),moduleType:"trace",name:"pie",basePlotModule:e(13584),categories:["pie-like","pie","showLegend"],meta:{}}},92774:function(K){K.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},92097:function(K,z,e){var S=e(71828),k=e(92774);K.exports=function(l,T){function b(d,s){return S.coerce(l,T,k,d,s)}b("hiddenlabels"),b("piecolorway",T.colorway),b("extendpiecolors")}},14575:function(K,z,e){var S=e(39898),k=e(74875),l=e(30211),T=e(7901),b=e(91424),d=e(71828),s=d.strScale,t=d.strTranslate,o=e(63893),r=e(72597),n=r.recordMinTextSize,a=r.clearMinTextSize,i=e(97313).TEXTPAD,u=e(53581),h=e(20007),f=e(71828).isValidTextValue;function x(F,D,U){var j=U[0],J=j.cx,X=j.cy,Z=j.trace,Y=Z.type==="funnelarea";"_hasHoverLabel"in Z||(Z._hasHoverLabel=!1),"_hasHoverEvent"in Z||(Z._hasHoverEvent=!1),F.on("mouseover",function(W){var Q=D._fullLayout,ne=D._fullData[Z.index];if(!D._dragging&&Q.hovermode!==!1){var re=ne.hoverinfo;if(Array.isArray(re)&&(re=l.castHoverinfo({hoverinfo:[u.castOption(re,W.pts)],_module:Z._module},Q,0)),re==="all"&&(re="label+text+value+percent+name"),ne.hovertemplate||re!=="none"&&re!=="skip"&&re){var ie=W.rInscribed||0,se=J+W.pxmid[0]*(1-ie),ge=X+W.pxmid[1]*(1-ie),ue=Q.separators,ce=[];if(re&&re.indexOf("label")!==-1&&ce.push(W.label),W.text=u.castOption(ne.hovertext||ne.text,W.pts),re&&re.indexOf("text")!==-1){var le=W.text;d.isValidTextValue(le)&&ce.push(le)}W.value=W.v,W.valueLabel=u.formatPieValue(W.v,ue),re&&re.indexOf("value")!==-1&&ce.push(W.valueLabel),W.percent=W.v/j.vTotal,W.percentLabel=u.formatPiePercent(W.percent,ue),re&&re.indexOf("percent")!==-1&&ce.push(W.percentLabel);var de=ne.hoverlabel,Ce=de.font,xe=[];l.loneHover({trace:Z,x0:se-ie*j.r,x1:se+ie*j.r,y:ge,_x0:Y?J+W.TL[0]:se-ie*j.r,_x1:Y?J+W.TR[0]:se+ie*j.r,_y0:Y?X+W.TL[1]:ge-ie*j.r,_y1:Y?X+W.BL[1]:ge+ie*j.r,text:ce.join("<br>"),name:ne.hovertemplate||re.indexOf("name")!==-1?ne.name:void 0,idealAlign:W.pxmid[0]<0?"left":"right",color:u.castOption(de.bgcolor,W.pts)||W.color,borderColor:u.castOption(de.bordercolor,W.pts),fontFamily:u.castOption(Ce.family,W.pts),fontSize:u.castOption(Ce.size,W.pts),fontColor:u.castOption(Ce.color,W.pts),nameLength:u.castOption(de.namelength,W.pts),textAlign:u.castOption(de.align,W.pts),hovertemplate:u.castOption(ne.hovertemplate,W.pts),hovertemplateLabels:W,eventData:[h(W,ne)]},{container:Q._hoverlayer.node(),outerContainer:Q._paper.node(),gd:D,inOut_bbox:xe}),W.bbox=xe[0],Z._hasHoverLabel=!0}Z._hasHoverEvent=!0,D.emit("plotly_hover",{points:[h(W,ne)],event:S.event})}}),F.on("mouseout",function(W){var Q=D._fullLayout,ne=D._fullData[Z.index],re=S.select(this).datum();Z._hasHoverEvent&&(W.originalEvent=S.event,D.emit("plotly_unhover",{points:[h(re,ne)],event:S.event}),Z._hasHoverEvent=!1),Z._hasHoverLabel&&(l.loneUnhover(Q._hoverlayer.node()),Z._hasHoverLabel=!1)}),F.on("click",function(W){var Q=D._fullLayout,ne=D._fullData[Z.index];D._dragging||Q.hovermode===!1||(D._hoverdata=[h(W,ne)],l.click(D,S.event))})}function v(F,D,U){var j=u.castOption(F.insidetextfont.color,D.pts);!j&&F._input.textfont&&(j=u.castOption(F._input.textfont.color,D.pts));var J=u.castOption(F.insidetextfont.family,D.pts)||u.castOption(F.textfont.family,D.pts)||U.family,X=u.castOption(F.insidetextfont.size,D.pts)||u.castOption(F.textfont.size,D.pts)||U.size;return{color:j||T.contrast(D.color),family:J,size:X}}function g(F,D){for(var U,j,J=0;J<F.length;J++)if((j=(U=F[J][0]).trace).title.text){var X=j.title.text;j._meta&&(X=d.templateString(X,j._meta));var Z=b.tester.append("text").attr("data-notex",1).text(X).call(b.font,j.title.font).call(o.convertToTspans,D),Y=b.bBox(Z.node(),!0);U.titleBox={width:Y.width,height:Y.height},Z.remove()}}function y(F,D,U){var j=U.r||D.rpx1,J=D.rInscribed;if(D.startangle===D.stopangle)return{rCenter:1-J,scale:0,rotate:0,textPosAngle:0};var X,Z=D.ring,Y=Z===1&&Math.abs(D.startangle-D.stopangle)===2*Math.PI,W=D.halfangle,Q=D.midangle,ne=U.trace.insidetextorientation,re=ne==="horizontal",ie=ne==="tangential",se=ne==="radial",ge=ne==="auto",ue=[];if(!ge){var ce,le=function(Ae,$){if(function(ke,De){var Pe=ke.startangle,Re=ke.stopangle;return Pe>De&&De>Re||Pe<De&&De<Re}(D,Ae)){var oe=Math.abs(Ae-D.startangle),pe=Math.abs(Ae-D.stopangle),ye=oe<pe?oe:pe;(X=$==="tan"?m(F,j,Z,ye,0):p(F,j,Z,ye,Math.PI/2)).textPosAngle=Ae,ue.push(X)}};if(re||ie){for(ce=4;ce>=-4;ce-=2)le(Math.PI*ce,"tan");for(ce=4;ce>=-4;ce-=2)le(Math.PI*(ce+1),"tan")}if(re||se){for(ce=4;ce>=-4;ce-=2)le(Math.PI*(ce+1.5),"rad");for(ce=4;ce>=-4;ce-=2)le(Math.PI*(ce+.5),"rad")}}if(Y||ge||re){var de=Math.sqrt(F.width*F.width+F.height*F.height);if((X={scale:J*j*2/de,rCenter:1-J,rotate:0}).textPosAngle=(D.startangle+D.stopangle)/2,X.scale>=1)return X;ue.push(X)}(ge||se)&&((X=p(F,j,Z,W,Q)).textPosAngle=(D.startangle+D.stopangle)/2,ue.push(X)),(ge||ie)&&((X=m(F,j,Z,W,Q)).textPosAngle=(D.startangle+D.stopangle)/2,ue.push(X));for(var Ce=0,xe=0,_e=0;_e<ue.length;_e++){var we=ue[_e].scale;if(xe<we&&(xe=we,Ce=_e),!ge&&xe>=1)break}return ue[Ce]}function p(F,D,U,j,J){D=Math.max(0,D-2*i);var X=F.width/F.height,Z=M(X,j,D,U);return{scale:2*Z/F.height,rCenter:w(X,Z/D),rotate:c(J)}}function m(F,D,U,j,J){D=Math.max(0,D-2*i);var X=F.height/F.width,Z=M(X,j,D,U);return{scale:2*Z/F.width,rCenter:w(X,Z/D),rotate:c(J+Math.PI/2)}}function w(F,D){return Math.cos(D)-F*D}function c(F){return(180/Math.PI*F+720)%180-90}function M(F,D,U,j){var J=F+1/(2*Math.tan(D));return U*Math.min(1/(Math.sqrt(J*J+.5)+J),j/(Math.sqrt(F*F+j/2)+F))}function _(F,D){return F.v!==D.vTotal||D.trace.hole?Math.min(1/(1+1/Math.sin(F.halfangle)),F.ring/2):1}function E(F,D){var U=D.pxmid[0],j=D.pxmid[1],J=F.width/2,X=F.height/2;return U<0&&(J*=-1),j<0&&(X*=-1),{scale:1,rCenter:1,rotate:0,x:J+Math.abs(X)*(J>0?1:-1)/2,y:X/(1+U*U/(j*j)),outside:!0}}function L(F,D){var U,j,J,X=F.trace,Z={x:F.cx,y:F.cy},Y={tx:0,ty:0};Y.ty+=X.title.font.size,J=O(X),X.title.position.indexOf("top")!==-1?(Z.y-=(1+J)*F.r,Y.ty-=F.titleBox.height):X.title.position.indexOf("bottom")!==-1&&(Z.y+=(1+J)*F.r);var W,Q=F.r/((W=F.trace.aspectratio)===void 0?1:W),ne=D.w*(X.domain.x[1]-X.domain.x[0])/2;return X.title.position.indexOf("left")!==-1?(ne+=Q,Z.x-=(1+J)*Q,Y.tx+=F.titleBox.width/2):X.title.position.indexOf("center")!==-1?ne*=2:X.title.position.indexOf("right")!==-1&&(ne+=Q,Z.x+=(1+J)*Q,Y.tx-=F.titleBox.width/2),U=ne/F.titleBox.width,j=C(F,D)/F.titleBox.height,{x:Z.x,y:Z.y,scale:Math.min(U,j),tx:Y.tx,ty:Y.ty}}function C(F,D){var U=F.trace,j=D.h*(U.domain.y[1]-U.domain.y[0]);return Math.min(F.titleBox.height,j/2)}function O(F){var D,U=F.pull;if(!U)return 0;if(Array.isArray(U))for(U=0,D=0;D<F.pull.length;D++)F.pull[D]>U&&(U=F.pull[D]);return U}function I(F,D){for(var U=[],j=0;j<F.length;j++){var J=F[j][0],X=J.trace,Z=X.domain,Y=D.w*(Z.x[1]-Z.x[0]),W=D.h*(Z.y[1]-Z.y[0]);X.title.text&&X.title.position!=="middle center"&&(W-=C(J,D));var Q=Y/2,ne=W/2;X.type!=="funnelarea"||X.scalegroup||(ne/=X.aspectratio),J.r=Math.min(Q,ne)/(1+O(X)),J.cx=D.l+D.w*(X.domain.x[1]+X.domain.x[0])/2,J.cy=D.t+D.h*(1-X.domain.y[0])-W/2,X.title.text&&X.title.position.indexOf("bottom")!==-1&&(J.cy-=C(J,D)),X.scalegroup&&U.indexOf(X.scalegroup)===-1&&U.push(X.scalegroup)}(function(re,ie){for(var se,ge,ue,ce=0;ce<ie.length;ce++){var le=1/0,de=ie[ce];for(ge=0;ge<re.length;ge++)if((ue=(se=re[ge][0]).trace).scalegroup===de){var Ce;if(ue.type==="pie")Ce=se.r*se.r;else if(ue.type==="funnelarea"){var xe,_e;ue.aspectratio>1?_e=(xe=se.r)/ue.aspectratio:xe=(_e=se.r)*ue.aspectratio,Ce=(xe*=(1+ue.baseratio)/2)*_e}le=Math.min(le,Ce/se.vTotal)}for(ge=0;ge<re.length;ge++)if((ue=(se=re[ge][0]).trace).scalegroup===de){var we=le*se.vTotal;ue.type==="funnelarea"&&(we/=(1+ue.baseratio)/2,we/=ue.aspectratio),se.r=Math.sqrt(we)}}})(F,U)}function N(F,D){return[F*Math.sin(D),-F*Math.cos(D)]}function R(F,D,U){var j=F._fullLayout,J=U.trace,X=J.texttemplate,Z=J.textinfo;if(!X&&Z&&Z!=="none"){var Y,W=Z.split("+"),Q=function(Ce){return W.indexOf(Ce)!==-1},ne=Q("label"),re=Q("text"),ie=Q("value"),se=Q("percent"),ge=j.separators;if(Y=ne?[D.label]:[],re){var ue=u.getFirstFilled(J.text,D.pts);f(ue)&&Y.push(ue)}ie&&Y.push(u.formatPieValue(D.v,ge)),se&&Y.push(u.formatPiePercent(D.v/U.vTotal,ge)),D.text=Y.join("<br>")}if(X){var ce=d.castOption(J,D.i,"texttemplate");if(ce){var le=function(Ce){return{label:Ce.label,value:Ce.v,valueLabel:u.formatPieValue(Ce.v,j.separators),percent:Ce.v/U.vTotal,percentLabel:u.formatPiePercent(Ce.v/U.vTotal,j.separators),color:Ce.color,text:Ce.text,customdata:d.castOption(J,Ce.i,"customdata")}}(D),de=u.getFirstFilled(J.text,D.pts);(f(de)||de==="")&&(le.text=de),D.text=d.texttemplateString(ce,le,F._fullLayout._d3locale,le,J._meta||{})}else D.text=""}}function V(F,D){var U=F.rotate*Math.PI/180,j=Math.cos(U),J=Math.sin(U),X=(D.left+D.right)/2,Z=(D.top+D.bottom)/2;F.textX=X*j-Z*J,F.textY=X*J+Z*j,F.noCenter=!0}K.exports={plot:function(F,D){var U=F._context.staticPlot,j=F._fullLayout,J=j._size;a("pie",j),g(D,F),I(D,J);var X=d.makeTraceGroups(j._pielayer,D,"trace").each(function(Z){var Y=S.select(this),W=Z[0],Q=W.trace;(function(ne){var re,ie,se,ge=ne[0],ue=ge.r,ce=ge.trace,le=u.getRotationAngle(ce.rotation),de=2*Math.PI/ge.vTotal,Ce="px0",xe="px1";if(ce.direction==="counterclockwise"){for(re=0;re<ne.length&&ne[re].hidden;re++);if(re===ne.length)return;le+=de*ne[re].v,de*=-1,Ce="px1",xe="px0"}for(se=N(ue,le),re=0;re<ne.length;re++)(ie=ne[re]).hidden||(ie[Ce]=se,ie.startangle=le,le+=de*ie.v/2,ie.pxmid=N(ue,le),ie.midangle=le,se=N(ue,le+=de*ie.v/2),ie.stopangle=le,ie[xe]=se,ie.largeArc=ie.v>ge.vTotal/2?1:0,ie.halfangle=Math.PI*Math.min(ie.v/ge.vTotal,.5),ie.ring=1-ce.hole,ie.rInscribed=_(ie,ge))})(Z),Y.attr("stroke-linejoin","round"),Y.each(function(){var ne=S.select(this).selectAll("g.slice").data(Z);ne.enter().append("g").classed("slice",!0),ne.exit().remove();var re=[[[],[]],[[],[]]],ie=!1;ne.each(function(xe,_e){if(xe.hidden)S.select(this).selectAll("path,g").remove();else{xe.pointNumber=xe.i,xe.curveNumber=Q.index,re[xe.pxmid[1]<0?0:1][xe.pxmid[0]<0?0:1].push(xe);var we=W.cx,Ae=W.cy,$=S.select(this),oe=$.selectAll("path.surface").data([xe]);if(oe.enter().append("path").classed("surface",!0).style({"pointer-events":U?"none":"all"}),$.call(x,F,Z),Q.pull){var pe=+u.castOption(Q.pull,xe.pts)||0;pe>0&&(we+=pe*xe.pxmid[0],Ae+=pe*xe.pxmid[1])}xe.cxFinal=we,xe.cyFinal=Ae;var ye=Q.hole;if(xe.v===W.vTotal){var ke="M"+(we+xe.px0[0])+","+(Ae+xe.px0[1])+ve(xe.px0,xe.pxmid,!0,1)+ve(xe.pxmid,xe.px0,!0,1)+"Z";ye?oe.attr("d","M"+(we+ye*xe.px0[0])+","+(Ae+ye*xe.px0[1])+ve(xe.px0,xe.pxmid,!1,ye)+ve(xe.pxmid,xe.px0,!1,ye)+"Z"+ke):oe.attr("d",ke)}else{var De=ve(xe.px0,xe.px1,!0,1);if(ye){var Pe=1-ye;oe.attr("d","M"+(we+ye*xe.px1[0])+","+(Ae+ye*xe.px1[1])+ve(xe.px1,xe.px0,!1,ye)+"l"+Pe*xe.px0[0]+","+Pe*xe.px0[1]+De+"Z")}else oe.attr("d","M"+we+","+Ae+"l"+xe.px0[0]+","+xe.px0[1]+De+"Z")}R(F,xe,W);var Re=u.castOption(Q.textposition,xe.pts),fe=$.selectAll("g.slicetext").data(xe.text&&Re!=="none"?[0]:[]);fe.enter().append("g").classed("slicetext",!0),fe.exit().remove(),fe.each(function(){var Te=d.ensureSingle(S.select(this),"text","",function(Tt){Tt.attr("data-notex",1)}),ze=d.ensureUniformFontSize(F,Re==="outside"?function(Tt,yt,dt){return{color:u.castOption(Tt.outsidetextfont.color,yt.pts)||u.castOption(Tt.textfont.color,yt.pts)||dt.color,family:u.castOption(Tt.outsidetextfont.family,yt.pts)||u.castOption(Tt.textfont.family,yt.pts)||dt.family,size:u.castOption(Tt.outsidetextfont.size,yt.pts)||u.castOption(Tt.textfont.size,yt.pts)||dt.size}}(Q,xe,j.font):v(Q,xe,j.font));Te.text(xe.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(b.font,ze).call(o.convertToTspans,F);var He,Ve=b.bBox(Te.node());if(Re==="outside")He=E(Ve,xe);else if(He=y(Ve,xe,W),Re==="auto"&&He.scale<1){var nt=d.ensureUniformFontSize(F,Q.outsidetextfont);Te.call(b.font,nt),He=E(Ve=b.bBox(Te.node()),xe)}var tt=He.textPosAngle,ot=tt===void 0?xe.pxmid:N(W.r,tt);if(He.targetX=we+ot[0]*He.rCenter+(He.x||0),He.targetY=Ae+ot[1]*He.rCenter+(He.y||0),V(He,Ve),He.outside){var pt=He.targetY;xe.yLabelMin=pt-Ve.height/2,xe.yLabelMid=pt,xe.yLabelMax=pt+Ve.height/2,xe.labelExtraX=0,xe.labelExtraY=0,ie=!0}He.fontSize=ze.size,n(Q.type,He,j),Z[_e].transform=He,d.setTransormAndDisplay(Te,He)})}function ve(Te,ze,He,Ve){var nt=Ve*(ze[0]-Te[0]),tt=Ve*(ze[1]-Te[1]);return"a"+Ve*W.r+","+Ve*W.r+" 0 "+xe.largeArc+(He?" 1 ":" 0 ")+nt+","+tt}});var se=S.select(this).selectAll("g.titletext").data(Q.title.text?[0]:[]);if(se.enter().append("g").classed("titletext",!0),se.exit().remove(),se.each(function(){var xe,_e=d.ensureSingle(S.select(this),"text","",function(Ae){Ae.attr("data-notex",1)}),we=Q.title.text;Q._meta&&(we=d.templateString(we,Q._meta)),_e.text(we).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(b.font,Q.title.font).call(o.convertToTspans,F),xe=Q.title.position==="middle center"?function(Ae){var $=Math.sqrt(Ae.titleBox.width*Ae.titleBox.width+Ae.titleBox.height*Ae.titleBox.height);return{x:Ae.cx,y:Ae.cy,scale:Ae.trace.hole*Ae.r*2/$,tx:0,ty:-Ae.titleBox.height/2+Ae.trace.title.font.size}}(W):L(W,J),_e.attr("transform",t(xe.x,xe.y)+s(Math.min(1,xe.scale))+t(xe.tx,xe.ty))}),ie&&function(xe,_e){var we,Ae,$,oe,pe,ye,ke,De,Pe,Re,fe,ve,Te;function ze(tt,ot){return tt.pxmid[1]-ot.pxmid[1]}function He(tt,ot){return ot.pxmid[1]-tt.pxmid[1]}function Ve(tt,ot){ot||(ot={});var pt,Tt,yt,dt,Pt=ot.labelExtraY+(Ae?ot.yLabelMax:ot.yLabelMin),Et=Ae?tt.yLabelMin:tt.yLabelMax,Ot=Ae?tt.yLabelMax:tt.yLabelMin,Nt=tt.cyFinal+pe(tt.px0[1],tt.px1[1]),zt=Pt-Et;if(zt*ke>0&&(tt.labelExtraY=zt),Array.isArray(_e.pull))for(Tt=0;Tt<Re.length;Tt++)(yt=Re[Tt])===tt||(u.castOption(_e.pull,tt.pts)||0)>=(u.castOption(_e.pull,yt.pts)||0)||((tt.pxmid[1]-yt.pxmid[1])*ke>0?(zt=yt.cyFinal+pe(yt.px0[1],yt.px1[1])-Et-tt.labelExtraY)*ke>0&&(tt.labelExtraY+=zt):(Ot+tt.labelExtraY-Nt)*ke>0&&(pt=3*ye*Math.abs(Tt-Re.indexOf(tt)),(dt=yt.cxFinal+oe(yt.px0[0],yt.px1[0])+pt-(tt.cxFinal+tt.pxmid[0])-tt.labelExtraX)*ye>0&&(tt.labelExtraX+=dt)))}for(Ae=0;Ae<2;Ae++)for($=Ae?ze:He,pe=Ae?Math.max:Math.min,ke=Ae?1:-1,we=0;we<2;we++){for(oe=we?Math.max:Math.min,ye=we?1:-1,(De=xe[Ae][we]).sort($),Pe=xe[1-Ae][we],Re=Pe.concat(De),ve=[],fe=0;fe<De.length;fe++)De[fe].yLabelMid!==void 0&&ve.push(De[fe]);for(Te=!1,fe=0;Ae&&fe<Pe.length;fe++)if(Pe[fe].yLabelMid!==void 0){Te=Pe[fe];break}for(fe=0;fe<ve.length;fe++){var nt=fe&&ve[fe-1];Te&&!fe&&(nt=Te),Ve(ve[fe],nt)}}}(re,Q),function(xe,_e){xe.each(function(we){var Ae=S.select(this);if(we.labelExtraX||we.labelExtraY){var $=Ae.select("g.slicetext text");we.transform.targetX+=we.labelExtraX,we.transform.targetY+=we.labelExtraY,d.setTransormAndDisplay($,we.transform);var oe=we.cxFinal+we.pxmid[0],pe="M"+oe+","+(we.cyFinal+we.pxmid[1]),ye=(we.yLabelMax-we.yLabelMin)*(we.pxmid[0]<0?-1:1)/4;if(we.labelExtraX){var ke=we.labelExtraX*we.pxmid[1]/we.pxmid[0],De=we.yLabelMid+we.labelExtraY-(we.cyFinal+we.pxmid[1]);Math.abs(ke)>Math.abs(De)?pe+="l"+De*we.pxmid[0]/we.pxmid[1]+","+De+"H"+(oe+we.labelExtraX+ye):pe+="l"+we.labelExtraX+","+ke+"v"+(De-ke)+"h"+ye}else pe+="V"+(we.yLabelMid+we.labelExtraY)+"h"+ye;d.ensureSingle(Ae,"path","textline").call(T.stroke,_e.outsidetextfont.color).attr({"stroke-width":Math.min(2,_e.outsidetextfont.size/8),d:pe,fill:"none"})}else Ae.select("path.textline").remove()})}(ne,Q),ie&&Q.automargin){var ge=b.bBox(Y.node()),ue=Q.domain,ce=J.w*(ue.x[1]-ue.x[0]),le=J.h*(ue.y[1]-ue.y[0]),de=(.5*ce-W.r)/J.w,Ce=(.5*le-W.r)/J.h;k.autoMargin(F,"pie."+Q.uid+".automargin",{xl:ue.x[0]-de,xr:ue.x[1]+de,yb:ue.y[0]-Ce,yt:ue.y[1]+Ce,l:Math.max(W.cx-W.r-ge.left,0),r:Math.max(ge.right-(W.cx+W.r),0),b:Math.max(ge.bottom-(W.cy+W.r),0),t:Math.max(W.cy-W.r-ge.top,0),pad:5})}})});setTimeout(function(){X.selectAll("tspan").each(function(){var Z=S.select(this);Z.attr("dy")&&Z.attr("dy",Z.attr("dy"))})},0)},formatSliceLabel:R,transformInsideText:y,determineInsideTextFont:v,positionTitleOutside:L,prerenderTitles:g,layoutAreas:I,attachFxHandlers:x,computeTransform:V}},68357:function(K,z,e){var S=e(39898),k=e(63463),l=e(72597).resizeText;K.exports=function(T){var b=T._fullLayout._pielayer.selectAll(".trace");l(T,b,"pie"),b.each(function(d){var s=d[0].trace,t=S.select(this);t.style({opacity:s.opacity}),t.selectAll("path.surface").each(function(o){S.select(this).call(k,o,s)})})}},63463:function(K,z,e){var S=e(7901),k=e(53581).castOption;K.exports=function(l,T,b){var d=b.marker.line,s=k(d.color,T.pts)||S.defaultLine,t=k(d.width,T.pts)||0;l.style("stroke-width",t).call(S.fill,T.color).call(S.stroke,s)}},10959:function(K,z,e){var S=e(82196);K.exports={x:S.x,y:S.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:S.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},42743:function(K,z,e){var S=e(9330).gl_pointcloud2d,k=e(78614),l=e(71739).findExtremes,T=e(34603);function b(s,t){this.scene=s,this.uid=t,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=S(s.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var d=b.prototype;d.handlePick=function(s){var t=this.idToIndex[s.pointId];return{trace:this,dataCoord:s.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*t],this.pickXYData[2*t+1]]:[this.pickXData[t],this.pickYData[t]],textLabel:Array.isArray(this.textLabels)?this.textLabels[t]:this.textLabels,color:this.color,name:this.name,pointIndex:t,hoverinfo:this.hoverinfo}},d.update=function(s){this.index=s.index,this.textLabels=s.text,this.name=s.name,this.hoverinfo=s.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(s),this.color=T(s,{})},d.updateFast=function(s){var t,o,r,n,a,i,u=this.xData=this.pickXData=s.x,h=this.yData=this.pickYData=s.y,f=this.pickXYData=s.xy,x=s.xbounds&&s.ybounds,v=s.indices,g=this.bounds;if(f){if(r=f,t=f.length>>>1,x)g[0]=s.xbounds[0],g[2]=s.xbounds[1],g[1]=s.ybounds[0],g[3]=s.ybounds[1];else for(i=0;i<t;i++)n=r[2*i],a=r[2*i+1],n<g[0]&&(g[0]=n),n>g[2]&&(g[2]=n),a<g[1]&&(g[1]=a),a>g[3]&&(g[3]=a);if(v)o=v;else for(o=new Int32Array(t),i=0;i<t;i++)o[i]=i}else for(t=u.length,r=new Float32Array(2*t),o=new Int32Array(t),i=0;i<t;i++)n=u[i],a=h[i],o[i]=i,r[2*i]=n,r[2*i+1]=a,n<g[0]&&(g[0]=n),n>g[2]&&(g[2]=n),a<g[1]&&(g[1]=a),a>g[3]&&(g[3]=a);this.idToIndex=o,this.pointcloudOptions.idToIndex=o,this.pointcloudOptions.positions=r;var y=k(s.marker.color),p=k(s.marker.border.color),m=s.opacity*s.marker.opacity;y[3]*=m,this.pointcloudOptions.color=y;var w=s.marker.blend;w===null&&(w=u.length<100||h.length<100),this.pointcloudOptions.blend=w,p[3]*=m,this.pointcloudOptions.borderColor=p;var c=s.marker.sizemin,M=Math.max(s.marker.sizemax,s.marker.sizemin);this.pointcloudOptions.sizeMin=c,this.pointcloudOptions.sizeMax=M,this.pointcloudOptions.areaRatio=s.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var _=this.scene.xaxis,E=this.scene.yaxis,L=M/2||.5;s._extremes[_._id]=l(_,[g[0],g[2]],{ppad:L}),s._extremes[E._id]=l(E,[g[1],g[3]],{ppad:L})},d.dispose=function(){this.pointcloud.dispose()},K.exports=function(s,t){var o=new b(s,t.uid);return o.update(t),o}},33876:function(K,z,e){var S=e(71828),k=e(10959);K.exports=function(l,T,b){function d(s,t){return S.coerce(l,T,k,s,t)}d("x"),d("y"),d("xbounds"),d("ybounds"),l.xy&&l.xy instanceof Float32Array&&(T.xy=l.xy),l.indices&&l.indices instanceof Int32Array&&(T.indices=l.indices),d("text"),d("marker.color",b),d("marker.opacity"),d("marker.blend"),d("marker.sizemin"),d("marker.sizemax"),d("marker.border.color",b),d("marker.border.arearatio"),T._length=null}},20593:function(K,z,e){K.exports={attributes:e(10959),supplyDefaults:e(33876),calc:e(36563),plot:e(42743),moduleType:"trace",name:"pointcloud",basePlotModule:e(4796),categories:["gl","gl2d","showLegend"],meta:{}}},39953:function(K,z,e){var S=e(41940),k=e(9012),l=e(22399),T=e(77914),b=e(27670).Y,d=e(5386).fF,s=e(50693),t=e(44467).templatedArray,o=e(12663).descriptionOnlyNumbers,r=e(1426).extendFlat,n=e(30962).overrideAll;(K.exports=n({hoverinfo:r({},k.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:T.hoverlabel,domain:b({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:o("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:S({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:d({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:d({},{keys:["value","label"]}),colorscales:t("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:r(s().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},75536:function(K,z,e){var S=e(30962).overrideAll,k=e(27659).a0,l=e(60436),T=e(528),b=e(6964),d=e(28569),s=e(47322).prepSelect,t=e(71828),o=e(73972),r="sankey";function n(a,i){var u=a._fullData[i],h=a._fullLayout,f=h.dragmode,x=h.dragmode==="pan"?"move":"crosshair",v=u._bgRect;if(v&&f!=="pan"&&f!=="zoom"){b(v,x);var g={_id:"x",c2p:t.identity,_offset:u._sankey.translateX,_length:u._sankey.width},y={_id:"y",c2p:t.identity,_offset:u._sankey.translateY,_length:u._sankey.height},p={gd:a,element:v.node(),plotinfo:{id:i,xaxis:g,yaxis:y,fillRangeItems:t.noop},subplot:i,xaxes:[g],yaxes:[y],doneFnCompleted:function(m){var w,c=a._fullData[i],M=c.node.groups.slice(),_=[];function E(I){for(var N=c._sankey.graph.nodes,R=0;R<N.length;R++)if(N[R].pointNumber===I)return N[R]}for(var L=0;L<m.length;L++){var C=E(m[L].pointNumber);if(C)if(C.group){for(var O=0;O<C.childrenNodes.length;O++)_.push(C.childrenNodes[O].pointNumber);M[C.pointNumber-c.node._count]=!1}else _.push(C.pointNumber)}w=M.filter(Boolean).concat([_]),o.call("_guiRestyle",a,{"node.groups":[w]},i)},prepFn:function(m,w,c){s(m,w,c,p,f)}};d.init(p)}}z.name=r,z.baseLayoutAttrOverrides=S({hoverlabel:T.hoverlabel},"plot","nested"),z.plot=function(a){var i=k(a.calcdata,r)[0];l(a,i),z.updateFx(a)},z.clean=function(a,i,u,h){var f=h._has&&h._has(r),x=i._has&&i._has(r);f&&!x&&(h._paperdiv.selectAll(".sankey").remove(),h._paperdiv.selectAll(".bgsankey").remove())},z.updateFx=function(a){for(var i=0;i<a._fullData.length;i++)n(a,i)}},92930:function(K,z,e){var S=e(68664),k=e(71828),l=e(28984).wrap,T=k.isArrayOrTypedArray,b=k.isIndex,d=e(21081);K.exports=function(s,t){var o=function(r){var n,a=r.node,i=r.link,u=[],h=T(i.color),f=T(i.customdata),x={},v={},g=i.colorscales.length;for(n=0;n<g;n++){var y=i.colorscales[n],p=d.extractScale(y,{cLetter:"c"}),m=d.makeColorScaleFunc(p);v[y.label]=m}var w=0;for(n=0;n<i.value.length;n++)i.source[n]>w&&(w=i.source[n]),i.target[n]>w&&(w=i.target[n]);var c,M=w+1;r.node._count=M;var _=r.node.groups,E={};for(n=0;n<_.length;n++){var L=_[n];for(c=0;c<L.length;c++){var C=L[c],O=M+n;E.hasOwnProperty(C)?k.warn("Node "+C+" is already part of a group."):E[C]=O}}var I={source:[],target:[]};for(n=0;n<i.value.length;n++){var N=i.value[n],R=i.source[n],V=i.target[n];if(N>0&&b(R,M)&&b(V,M)&&(!E.hasOwnProperty(R)||!E.hasOwnProperty(V)||E[R]!==E[V])){E.hasOwnProperty(V)&&(V=E[V]),E.hasOwnProperty(R)&&(R=E[R]),V=+V,x[R=+R]=x[V]=!0;var F="";i.label&&i.label[n]&&(F=i.label[n]);var D=null;F&&v.hasOwnProperty(F)&&(D=v[F]),u.push({pointNumber:n,label:F,color:h?i.color[n]:i.color,customdata:f?i.customdata[n]:i.customdata,concentrationscale:D,source:R,target:V,value:+N}),I.source.push(R),I.target.push(V)}}var U=M+_.length,j=T(a.color),J=T(a.customdata),X=[];for(n=0;n<U;n++)if(x[n]){var Z=a.label[n];X.push({group:n>M-1,childrenNodes:[],pointNumber:n,label:Z,color:j?a.color[n]:a.color,customdata:J?a.customdata[n]:a.customdata})}var Y=!1;return function(W,Q,ne){for(var re=k.init2dArray(W,0),ie=0;ie<Math.min(Q.length,ne.length);ie++)if(k.isIndex(Q[ie],W)&&k.isIndex(ne[ie],W)){if(Q[ie]===ne[ie])return!0;re[Q[ie]].push(ne[ie])}return S(re).components.some(function(se){return se.length>1})}(U,I.source,I.target)&&(Y=!0),{circular:Y,links:u,nodes:X,groups:_,groupLookup:E}}(t);return l({circular:o.circular,_nodes:o.nodes,_links:o.links,_groups:o.groups,_groupLookup:o.groupLookup})}},85247:function(K){K.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},26857:function(K,z,e){var S=e(71828),k=e(39953),l=e(7901),T=e(84267),b=e(27670).c,d=e(38048),s=e(44467),t=e(85501);function o(r,n){function a(i,u){return S.coerce(r,n,k.link.colorscales,i,u)}a("label"),a("cmin"),a("cmax"),a("colorscale")}K.exports=function(r,n,a,i){function u(M,_){return S.coerce(r,n,k,M,_)}var h=S.extendDeep(i.hoverlabel,r.hoverlabel),f=r.node,x=s.newContainer(n,"node");function v(M,_){return S.coerce(f,x,k.node,M,_)}v("label"),v("groups"),v("x"),v("y"),v("pad"),v("thickness"),v("line.color"),v("line.width"),v("hoverinfo",r.hoverinfo),d(f,x,v,h),v("hovertemplate");var g=i.colorway;v("color",x.label.map(function(M,_){return l.addOpacity(function(E){return g[E%g.length]}(_),.8)})),v("customdata");var y=r.link||{},p=s.newContainer(n,"link");function m(M,_){return S.coerce(y,p,k.link,M,_)}m("label"),m("arrowlen"),m("source"),m("target"),m("value"),m("line.color"),m("line.width"),m("hoverinfo",r.hoverinfo),d(y,p,m,h),m("hovertemplate");var w,c=T(i.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";m("color",S.repeat(c,p.value.length)),m("customdata"),t(y,p,{name:"colorscales",handleItemDefaults:o}),b(n,i,u),u("orientation"),u("valueformat"),u("valuesuffix"),x.x.length&&x.y.length&&(w="freeform"),u("arrangement",w),S.coerceFont(u,"textfont",S.extendFlat({},i.font)),n._length=null}},29396:function(K,z,e){K.exports={attributes:e(39953),supplyDefaults:e(26857),calc:e(92930),plot:e(60436),moduleType:"trace",name:"sankey",basePlotModule:e(75536),selectPoints:e(84564),categories:["noOpacity"],meta:{}}},60436:function(K,z,e){var S=e(39898),k=e(71828),l=k.numberFormat,T=e(3393),b=e(30211),d=e(7901),s=e(85247).cn,t=k._;function o(y){return y!==""}function r(y,p){return y.filter(function(m){return m.key===p.traceId})}function n(y,p){S.select(y).select("path").style("fill-opacity",p),S.select(y).select("rect").style("fill-opacity",p)}function a(y){S.select(y).select("text.name").style("fill","black")}function i(y){return function(p){return y.node.sourceLinks.indexOf(p.link)!==-1||y.node.targetLinks.indexOf(p.link)!==-1}}function u(y){return function(p){return p.node.sourceLinks.indexOf(y.link)!==-1||p.node.targetLinks.indexOf(y.link)!==-1}}function h(y,p,m){p&&m&&r(m,p).selectAll("."+s.sankeyLink).filter(i(p)).call(x.bind(0,p,m,!1))}function f(y,p,m){p&&m&&r(m,p).selectAll("."+s.sankeyLink).filter(i(p)).call(v.bind(0,p,m,!1))}function x(y,p,m,w){var c=w.datum().link.label;w.style("fill-opacity",function(M){if(!M.link.concentrationscale)return .4}),c&&r(p,y).selectAll("."+s.sankeyLink).filter(function(M){return M.link.label===c}).style("fill-opacity",function(M){if(!M.link.concentrationscale)return .4}),m&&r(p,y).selectAll("."+s.sankeyNode).filter(u(y)).call(h)}function v(y,p,m,w){var c=w.datum().link.label;w.style("fill-opacity",function(M){return M.tinyColorAlpha}),c&&r(p,y).selectAll("."+s.sankeyLink).filter(function(M){return M.link.label===c}).style("fill-opacity",function(M){return M.tinyColorAlpha}),m&&r(p,y).selectAll(s.sankeyNode).filter(u(y)).call(f)}function g(y,p){var m=y.hoverlabel||{},w=k.nestedProperty(m,p).get();return!Array.isArray(w)&&w}K.exports=function(y,p){for(var m=y._fullLayout,w=m._paper,c=m._size,M=0;M<y._fullData.length;M++)if(y._fullData[M].visible&&y._fullData[M].type===s.sankey&&!y._fullData[M]._viewInitial){var _=y._fullData[M].node;y._fullData[M]._viewInitial={node:{groups:_.groups.slice(),x:_.x.slice(),y:_.y.slice()}}}var E=t(y,"source:")+" ",L=t(y,"target:")+" ",C=t(y,"concentration:")+" ",O=t(y,"incoming flow count:")+" ",I=t(y,"outgoing flow count:")+" ";T(y,w,p,{width:c.w,height:c.h,margin:{t:c.t,r:c.r,b:c.b,l:c.l}},{linkEvents:{hover:function(N,R,V){y._fullLayout.hovermode!==!1&&(S.select(N).call(x.bind(0,R,V,!0)),R.link.trace.link.hoverinfo!=="skip"&&(R.link.fullData=R.link.trace,y.emit("plotly_hover",{event:S.event,points:[R.link]})))},follow:function(N,R){if(y._fullLayout.hovermode!==!1){var V=R.link.trace.link;if(V.hoverinfo!=="none"&&V.hoverinfo!=="skip"){for(var F=[],D=0,U=0;U<R.flow.links.length;U++){var j=R.flow.links[U];if(y._fullLayout.hovermode!=="closest"||R.link.pointNumber===j.pointNumber){R.link.pointNumber===j.pointNumber&&(D=U),j.fullData=j.trace,V=R.link.trace.link;var J=Z(j),X={valueLabel:l(R.valueFormat)(j.value)+R.valueSuffix};F.push({x:J[0],y:J[1],name:X.valueLabel,text:[j.label||"",E+j.source.label,L+j.target.label,j.concentrationscale?C+l("%0.2f")(j.flow.labelConcentration):""].filter(o).join("<br>"),color:g(V,"bgcolor")||d.addOpacity(j.color,1),borderColor:g(V,"bordercolor"),fontFamily:g(V,"font.family"),fontSize:g(V,"font.size"),fontColor:g(V,"font.color"),nameLength:g(V,"namelength"),textAlign:g(V,"align"),idealAlign:S.event.x<J[0]?"right":"left",hovertemplate:V.hovertemplate,hovertemplateLabels:X,eventData:[j]})}}b.loneHover(F,{container:m._hoverlayer.node(),outerContainer:m._paper.node(),gd:y,anchorIndex:D}).each(function(){R.link.concentrationscale||n(this,.65),a(this)})}}function Z(Y){var W,Q;Y.circular?(W=(Y.circularPathData.leftInnerExtent+Y.circularPathData.rightInnerExtent)/2,Q=Y.circularPathData.verticalFullExtent):(W=(Y.source.x1+Y.target.x0)/2,Q=(Y.y0+Y.y1)/2);var ne=[W,Q];return Y.trace.orientation==="v"&&ne.reverse(),ne[0]+=R.parent.translateX,ne[1]+=R.parent.translateY,ne}},unhover:function(N,R,V){y._fullLayout.hovermode!==!1&&(S.select(N).call(v.bind(0,R,V,!0)),R.link.trace.link.hoverinfo!=="skip"&&(R.link.fullData=R.link.trace,y.emit("plotly_unhover",{event:S.event,points:[R.link]})),b.loneUnhover(m._hoverlayer.node()))},select:function(N,R){var V=R.link;V.originalEvent=S.event,y._hoverdata=[V],b.click(y,{target:!0})}},nodeEvents:{hover:function(N,R,V){y._fullLayout.hovermode!==!1&&(S.select(N).call(h,R,V),R.node.trace.node.hoverinfo!=="skip"&&(R.node.fullData=R.node.trace,y.emit("plotly_hover",{event:S.event,points:[R.node]})))},follow:function(N,R){if(y._fullLayout.hovermode!==!1){var V=R.node.trace.node;if(V.hoverinfo!=="none"&&V.hoverinfo!=="skip"){var F=S.select(N).select("."+s.nodeRect),D=y._fullLayout._paperdiv.node().getBoundingClientRect(),U=F.node().getBoundingClientRect(),j=U.left-2-D.left,J=U.right+2-D.left,X=U.top+U.height/4-D.top,Z={valueLabel:l(R.valueFormat)(R.node.value)+R.valueSuffix};R.node.fullData=R.node.trace,y._fullLayout._calcInverseTransform(y);var Y=y._fullLayout._invScaleX,W=y._fullLayout._invScaleY,Q=b.loneHover({x0:Y*j,x1:Y*J,y:W*X,name:l(R.valueFormat)(R.node.value)+R.valueSuffix,text:[R.node.label,O+R.node.targetLinks.length,I+R.node.sourceLinks.length].filter(o).join("<br>"),color:g(V,"bgcolor")||R.tinyColorHue,borderColor:g(V,"bordercolor"),fontFamily:g(V,"font.family"),fontSize:g(V,"font.size"),fontColor:g(V,"font.color"),nameLength:g(V,"namelength"),textAlign:g(V,"align"),idealAlign:"left",hovertemplate:V.hovertemplate,hovertemplateLabels:Z,eventData:[R.node]},{container:m._hoverlayer.node(),outerContainer:m._paper.node(),gd:y});n(Q,.85),a(Q)}}},unhover:function(N,R,V){y._fullLayout.hovermode!==!1&&(S.select(N).call(f,R,V),R.node.trace.node.hoverinfo!=="skip"&&(R.node.fullData=R.node.trace,y.emit("plotly_unhover",{event:S.event,points:[R.node]})),b.loneUnhover(m._hoverlayer.node()))},select:function(N,R,V){var F=R.node;F.originalEvent=S.event,y._hoverdata=[F],S.select(N).call(f,R,V),b.click(y,{target:!0})}}})}},3393:function(K,z,e){var S=e(49887),k=e(81684).k4,l=e(39898),T=e(30838),b=e(86781),d=e(85247),s=e(84267),t=e(7901),o=e(91424),r=e(71828),n=r.strTranslate,a=r.strRotate,i=e(28984),u=i.keyFun,h=i.repeat,f=i.unwrap,x=e(63893),v=e(73972),g=e(18783),y=g.CAP_SHIFT,p=g.LINE_SPACING;function m(U,j,J){var X,Z=f(j),Y=Z.trace,W=Y.domain,Q=Y.orientation==="h",ne=Y.node.pad,re=Y.node.thickness,ie=U.width*(W.x[1]-W.x[0]),se=U.height*(W.y[1]-W.y[0]),ge=Z._nodes,ue=Z._links,ce=Z.circular;(X=ce?b.sankeyCircular().circularLinkGap(0):T.sankey()).iterations(d.sankeyIterations).size(Q?[ie,se]:[se,ie]).nodeWidth(re).nodePadding(ne).nodeId(function(ye){return ye.pointNumber}).nodes(ge).links(ue);var le,de,Ce,xe=X();for(var _e in X.nodePadding()<ne&&r.warn("node.pad was reduced to ",X.nodePadding()," to fit within the figure."),Z._groupLookup){var we,Ae=parseInt(Z._groupLookup[_e]);for(le=0;le<xe.nodes.length;le++)if(xe.nodes[le].pointNumber===Ae){we=xe.nodes[le];break}if(we){var $={pointNumber:parseInt(_e),x0:we.x0,x1:we.x1,y0:we.y0,y1:we.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};xe.nodes.unshift($),we.childrenNodes.unshift($)}}if(function(){for(le=0;le<xe.nodes.length;le++){var ye,ke,De=xe.nodes[le],Pe={};for(de=0;de<De.targetLinks.length;de++)ye=(ke=De.targetLinks[de]).source.pointNumber+":"+ke.target.pointNumber,Pe.hasOwnProperty(ye)||(Pe[ye]=[]),Pe[ye].push(ke);var Re=Object.keys(Pe);for(de=0;de<Re.length;de++){var fe=Pe[ye=Re[de]],ve=0,Te={};for(Ce=0;Ce<fe.length;Ce++)Te[(ke=fe[Ce]).label]||(Te[ke.label]=0),Te[ke.label]+=ke.value,ve+=ke.value;for(Ce=0;Ce<fe.length;Ce++)(ke=fe[Ce]).flow={value:ve,labelConcentration:Te[ke.label]/ve,concentration:ke.value/ve,links:fe},ke.concentrationscale&&(ke.color=s(ke.concentrationscale(ke.flow.labelConcentration)))}var ze=0;for(de=0;de<De.sourceLinks.length;de++)ze+=De.sourceLinks[de].value;for(de=0;de<De.sourceLinks.length;de++)(ke=De.sourceLinks[de]).concentrationOut=ke.value/ze;var He=0;for(de=0;de<De.targetLinks.length;de++)He+=De.targetLinks[de].value;for(de=0;de<De.targetLinks.length;de++)(ke=De.targetLinks[de]).concenrationIn=ke.value/He}}(),Y.node.x.length&&Y.node.y.length){for(le=0;le<Math.min(Y.node.x.length,Y.node.y.length,xe.nodes.length);le++)if(Y.node.x[le]&&Y.node.y[le]){var oe=[Y.node.x[le]*ie,Y.node.y[le]*se];xe.nodes[le].x0=oe[0]-re/2,xe.nodes[le].x1=oe[0]+re/2;var pe=xe.nodes[le].y1-xe.nodes[le].y0;xe.nodes[le].y0=oe[1]-pe/2,xe.nodes[le].y1=oe[1]+pe/2}Y.arrangement==="snap"&&function(ye){var ke,De,Pe=ye.map(function(ze,He){return{x0:ze.x0,index:He}}).sort(function(ze,He){return ze.x0-He.x0}),Re=[],fe=-1,ve=-1/0;for(le=0;le<Pe.length;le++){var Te=ye[Pe[le].index];Te.x0>ve+re&&(fe+=1,ke=Te.x0),ve=Te.x0,Re[fe]||(Re[fe]=[]),Re[fe].push(Te),De=ke-Te.x0,Te.x0+=De,Te.x1+=De}return Re}(ge=xe.nodes).forEach(function(ye){var ke,De,Pe,Re=0,fe=ye.length;for(ye.sort(function(ve,Te){return ve.y0-Te.y0}),Pe=0;Pe<fe;++Pe)(ke=ye[Pe]).y0>=Re||(De=Re-ke.y0)>1e-6&&(ke.y0+=De,ke.y1+=De),Re=ke.y1+ne}),X.update(xe)}return{circular:ce,key:J,trace:Y,guid:r.randstr(),horizontal:Q,width:ie,height:se,nodePad:Y.node.pad,nodeLineColor:Y.node.line.color,nodeLineWidth:Y.node.line.width,linkLineColor:Y.link.line.color,linkLineWidth:Y.link.line.width,linkArrowLength:Y.link.arrowlen,valueFormat:Y.valueformat,valueSuffix:Y.valuesuffix,textFont:Y.textfont,translateX:W.x[0]*U.width+U.margin.l,translateY:U.height-W.y[1]*U.height+U.margin.t,dragParallel:Q?se:ie,dragPerpendicular:Q?ie:se,arrangement:Y.arrangement,sankey:X,graph:xe,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function w(U,j,J){var X=s(j.color),Z=j.source.label+"|"+j.target.label+"__"+J;return j.trace=U.trace,j.curveNumber=U.trace.index,{circular:U.circular,key:Z,traceId:U.key,pointNumber:j.pointNumber,link:j,tinyColorHue:t.tinyRGB(X),tinyColorAlpha:X.getAlpha(),linkPath:c,linkLineColor:U.linkLineColor,linkLineWidth:U.linkLineWidth,linkArrowLength:U.linkArrowLength,valueFormat:U.valueFormat,valueSuffix:U.valueSuffix,sankey:U.sankey,parent:U,interactionState:U.interactionState,flow:j.flow}}function c(){return function(U){var j=U.linkArrowLength;if(U.link.circular)return function(de,Ce){var xe=de.width/2,_e=de.circularPathData;return de.circularLinkType==="top"?"M "+(_e.targetX-Ce)+" "+(_e.targetY+xe)+" L"+(_e.rightInnerExtent-Ce)+" "+(_e.targetY+xe)+"A"+(_e.rightLargeArcRadius+xe)+" "+(_e.rightSmallArcRadius+xe)+" 0 0 1 "+(_e.rightFullExtent-xe-Ce)+" "+(_e.targetY-_e.rightSmallArcRadius)+"L"+(_e.rightFullExtent-xe-Ce)+" "+_e.verticalRightInnerExtent+"A"+(_e.rightLargeArcRadius+xe)+" "+(_e.rightLargeArcRadius+xe)+" 0 0 1 "+(_e.rightInnerExtent-Ce)+" "+(_e.verticalFullExtent-xe)+"L"+_e.leftInnerExtent+" "+(_e.verticalFullExtent-xe)+"A"+(_e.leftLargeArcRadius+xe)+" "+(_e.leftLargeArcRadius+xe)+" 0 0 1 "+(_e.leftFullExtent+xe)+" "+_e.verticalLeftInnerExtent+"L"+(_e.leftFullExtent+xe)+" "+(_e.sourceY-_e.leftSmallArcRadius)+"A"+(_e.leftLargeArcRadius+xe)+" "+(_e.leftSmallArcRadius+xe)+" 0 0 1 "+_e.leftInnerExtent+" "+(_e.sourceY+xe)+"L"+_e.sourceX+" "+(_e.sourceY+xe)+"L"+_e.sourceX+" "+(_e.sourceY-xe)+"L"+_e.leftInnerExtent+" "+(_e.sourceY-xe)+"A"+(_e.leftLargeArcRadius-xe)+" "+(_e.leftSmallArcRadius-xe)+" 0 0 0 "+(_e.leftFullExtent-xe)+" "+(_e.sourceY-_e.leftSmallArcRadius)+"L"+(_e.leftFullExtent-xe)+" "+_e.verticalLeftInnerExtent+"A"+(_e.leftLargeArcRadius-xe)+" "+(_e.leftLargeArcRadius-xe)+" 0 0 0 "+_e.leftInnerExtent+" "+(_e.verticalFullExtent+xe)+"L"+(_e.rightInnerExtent-Ce)+" "+(_e.verticalFullExtent+xe)+"A"+(_e.rightLargeArcRadius-xe)+" "+(_e.rightLargeArcRadius-xe)+" 0 0 0 "+(_e.rightFullExtent+xe-Ce)+" "+_e.verticalRightInnerExtent+"L"+(_e.rightFullExtent+xe-Ce)+" "+(_e.targetY-_e.rightSmallArcRadius)+"A"+(_e.rightLargeArcRadius-xe)+" "+(_e.rightSmallArcRadius-xe)+" 0 0 0 "+(_e.rightInnerExtent-Ce)+" "+(_e.targetY-xe)+"L"+(_e.targetX-Ce)+" "+(_e.targetY-xe)+(Ce>0?"L"+_e.targetX+" "+_e.targetY:"")+"Z":"M "+(_e.targetX-Ce)+" "+(_e.targetY-xe)+" L"+(_e.rightInnerExtent-Ce)+" "+(_e.targetY-xe)+"A"+(_e.rightLargeArcRadius+xe)+" "+(_e.rightSmallArcRadius+xe)+" 0 0 0 "+(_e.rightFullExtent-xe-Ce)+" "+(_e.targetY+_e.rightSmallArcRadius)+"L"+(_e.rightFullExtent-xe-Ce)+" "+_e.verticalRightInnerExtent+"A"+(_e.rightLargeArcRadius+xe)+" "+(_e.rightLargeArcRadius+xe)+" 0 0 0 "+(_e.rightInnerExtent-Ce)+" "+(_e.verticalFullExtent+xe)+"L"+_e.leftInnerExtent+" "+(_e.verticalFullExtent+xe)+"A"+(_e.leftLargeArcRadius+xe)+" "+(_e.leftLargeArcRadius+xe)+" 0 0 0 "+(_e.leftFullExtent+xe)+" "+_e.verticalLeftInnerExtent+"L"+(_e.leftFullExtent+xe)+" "+(_e.sourceY+_e.leftSmallArcRadius)+"A"+(_e.leftLargeArcRadius+xe)+" "+(_e.leftSmallArcRadius+xe)+" 0 0 0 "+_e.leftInnerExtent+" "+(_e.sourceY-xe)+"L"+_e.sourceX+" "+(_e.sourceY-xe)+"L"+_e.sourceX+" "+(_e.sourceY+xe)+"L"+_e.leftInnerExtent+" "+(_e.sourceY+xe)+"A"+(_e.leftLargeArcRadius-xe)+" "+(_e.leftSmallArcRadius-xe)+" 0 0 1 "+(_e.leftFullExtent-xe)+" "+(_e.sourceY+_e.leftSmallArcRadius)+"L"+(_e.leftFullExtent-xe)+" "+_e.verticalLeftInnerExtent+"A"+(_e.leftLargeArcRadius-xe)+" "+(_e.leftLargeArcRadius-xe)+" 0 0 1 "+_e.leftInnerExtent+" "+(_e.verticalFullExtent-xe)+"L"+(_e.rightInnerExtent-Ce)+" "+(_e.verticalFullExtent-xe)+"A"+(_e.rightLargeArcRadius-xe)+" "+(_e.rightLargeArcRadius-xe)+" 0 0 1 "+(_e.rightFullExtent+xe-Ce)+" "+_e.verticalRightInnerExtent+"L"+(_e.rightFullExtent+xe-Ce)+" "+(_e.targetY+_e.rightSmallArcRadius)+"A"+(_e.rightLargeArcRadius-xe)+" "+(_e.rightSmallArcRadius-xe)+" 0 0 1 "+(_e.rightInnerExtent-Ce)+" "+(_e.targetY+xe)+"L"+(_e.targetX-Ce)+" "+(_e.targetY+xe)+(Ce>0?"L"+_e.targetX+" "+_e.targetY:"")+"Z"}(U.link,j);var J=Math.abs((U.link.target.x0-U.link.source.x1)/2);j>J&&(j=J);var X=U.link.source.x1,Z=U.link.target.x0-j,Y=k(X,Z),W=Y(.5),Q=Y(.5),ne=U.link.y0-U.link.width/2,re=U.link.y0+U.link.width/2,ie=U.link.y1-U.link.width/2,se=U.link.y1+U.link.width/2,ge="M"+X+","+ne,ue="C"+W+","+ne+" "+Q+","+ie+" "+Z+","+ie,ce="C"+Q+","+se+" "+W+","+re+" "+X+","+re,le=j>0?"L"+(Z+j)+","+(ie+U.link.width/2):"";return ge+ue+(le+="L"+Z+","+se)+ce+"Z"}}function M(U,j){var J=s(j.color),X=d.nodePadAcross,Z=U.nodePad/2;j.dx=j.x1-j.x0,j.dy=j.y1-j.y0;var Y=j.dx,W=Math.max(.5,j.dy),Q="node_"+j.pointNumber;return j.group&&(Q=r.randstr()),j.trace=U.trace,j.curveNumber=U.trace.index,{index:j.pointNumber,key:Q,partOfGroup:j.partOfGroup||!1,group:j.group,traceId:U.key,trace:U.trace,node:j,nodePad:U.nodePad,nodeLineColor:U.nodeLineColor,nodeLineWidth:U.nodeLineWidth,textFont:U.textFont,size:U.horizontal?U.height:U.width,visibleWidth:Math.ceil(Y),visibleHeight:W,zoneX:-X,zoneY:-Z,zoneWidth:Y+2*X,zoneHeight:W+2*Z,labelY:U.horizontal?j.dy/2+1:j.dx/2+1,left:j.originalLayer===1,sizeAcross:U.width,forceLayouts:U.forceLayouts,horizontal:U.horizontal,darkBackground:J.getBrightness()<=128,tinyColorHue:t.tinyRGB(J),tinyColorAlpha:J.getAlpha(),valueFormat:U.valueFormat,valueSuffix:U.valueSuffix,sankey:U.sankey,graph:U.graph,arrangement:U.arrangement,uniqueNodeLabelPathId:[U.guid,U.key,Q].join("_"),interactionState:U.interactionState,figure:U}}function _(U){U.attr("transform",function(j){return n(j.node.x0.toFixed(3),j.node.y0.toFixed(3))})}function E(U){U.call(_)}function L(U,j){U.call(E),j.attr("d",c())}function C(U){U.attr("width",function(j){return j.node.x1-j.node.x0}).attr("height",function(j){return j.visibleHeight})}function O(U){return U.link.width>1||U.linkLineWidth>0}function I(U){return n(U.translateX,U.translateY)+(U.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function N(U,j,J){U.on(".basic",null).on("mouseover.basic",function(X){X.interactionState.dragInProgress||X.partOfGroup||(J.hover(this,X,j),X.interactionState.hovered=[this,X])}).on("mousemove.basic",function(X){X.interactionState.dragInProgress||X.partOfGroup||(J.follow(this,X),X.interactionState.hovered=[this,X])}).on("mouseout.basic",function(X){X.interactionState.dragInProgress||X.partOfGroup||(J.unhover(this,X,j),X.interactionState.hovered=!1)}).on("click.basic",function(X){X.interactionState.hovered&&(J.unhover(this,X,j),X.interactionState.hovered=!1),X.interactionState.dragInProgress||X.partOfGroup||J.select(this,X,j)})}function R(U,j,J,X){var Z=l.behavior.drag().origin(function(Y){return{x:Y.node.x0+Y.visibleWidth/2,y:Y.node.y0+Y.visibleHeight/2}}).on("dragstart",function(Y){if(Y.arrangement!=="fixed"&&(r.ensureSingle(X._fullLayout._infolayer,"g","dragcover",function(Q){X._fullLayout._dragCover=Q}),r.raiseToTop(this),Y.interactionState.dragInProgress=Y.node,F(Y.node),Y.interactionState.hovered&&(J.nodeEvents.unhover.apply(0,Y.interactionState.hovered),Y.interactionState.hovered=!1),Y.arrangement==="snap")){var W=Y.traceId+"|"+Y.key;Y.forceLayouts[W]?Y.forceLayouts[W].alpha(1):function(Q,ne,re,ie){(function(ge){for(var ue=0;ue<ge.length;ue++)ge[ue].y=(ge[ue].y0+ge[ue].y1)/2,ge[ue].x=(ge[ue].x0+ge[ue].x1)/2})(re.graph.nodes);var se=re.graph.nodes.filter(function(ge){return ge.originalX===re.node.originalX}).filter(function(ge){return!ge.partOfGroup});re.forceLayouts[ne]=S.forceSimulation(se).alphaDecay(0).force("collide",S.forceCollide().radius(function(ge){return ge.dy/2+re.nodePad/2}).strength(1).iterations(d.forceIterations)).force("constrain",function(ge,ue,ce,le){return function(){for(var de=0,Ce=0;Ce<ce.length;Ce++){var xe=ce[Ce];xe===le.interactionState.dragInProgress?(xe.x=xe.lastDraggedX,xe.y=xe.lastDraggedY):(xe.vx=(xe.originalX-xe.x)/d.forceTicksPerFrame,xe.y=Math.min(le.size-xe.dy/2,Math.max(xe.dy/2,xe.y))),de=Math.max(de,Math.abs(xe.vx),Math.abs(xe.vy))}!le.interactionState.dragInProgress&&de<.1&&le.forceLayouts[ue].alpha()>0&&le.forceLayouts[ue].alpha(0)}}(0,ne,se,re)).stop()}(0,W,Y),function(Q,ne,re,ie,se){window.requestAnimationFrame(function ge(){var ue;for(ue=0;ue<d.forceTicksPerFrame;ue++)re.forceLayouts[ie].tick();if(function(le){for(var de=0;de<le.length;de++)le[de].y0=le[de].y-le[de].dy/2,le[de].y1=le[de].y0+le[de].dy,le[de].x0=le[de].x-le[de].dx/2,le[de].x1=le[de].x0+le[de].dx}(re.graph.nodes),re.sankey.update(re.graph),L(Q.filter(D(re)),ne),re.forceLayouts[ie].alpha()>0)window.requestAnimationFrame(ge);else{var ce=re.node.originalX;re.node.x0=ce-re.visibleWidth/2,re.node.x1=ce+re.visibleWidth/2,V(re,se)}})}(U,j,Y,W,X)}}).on("drag",function(Y){if(Y.arrangement!=="fixed"){var W=l.event.x,Q=l.event.y;Y.arrangement==="snap"?(Y.node.x0=W-Y.visibleWidth/2,Y.node.x1=W+Y.visibleWidth/2,Y.node.y0=Q-Y.visibleHeight/2,Y.node.y1=Q+Y.visibleHeight/2):(Y.arrangement==="freeform"&&(Y.node.x0=W-Y.visibleWidth/2,Y.node.x1=W+Y.visibleWidth/2),Q=Math.max(0,Math.min(Y.size-Y.visibleHeight/2,Q)),Y.node.y0=Q-Y.visibleHeight/2,Y.node.y1=Q+Y.visibleHeight/2),F(Y.node),Y.arrangement!=="snap"&&(Y.sankey.update(Y.graph),L(U.filter(D(Y)),j))}}).on("dragend",function(Y){if(Y.arrangement!=="fixed"){Y.interactionState.dragInProgress=!1;for(var W=0;W<Y.node.childrenNodes.length;W++)Y.node.childrenNodes[W].x=Y.node.x,Y.node.childrenNodes[W].y=Y.node.y;Y.arrangement!=="snap"&&V(Y,X)}});U.on(".drag",null).call(Z)}function V(U,j){for(var J=[],X=[],Z=0;Z<U.graph.nodes.length;Z++){var Y=(U.graph.nodes[Z].x0+U.graph.nodes[Z].x1)/2,W=(U.graph.nodes[Z].y0+U.graph.nodes[Z].y1)/2;J.push(Y/U.figure.width),X.push(W/U.figure.height)}v.call("_guiRestyle",j,{"node.x":[J],"node.y":[X]},U.trace.index).then(function(){j._fullLayout._dragCover&&j._fullLayout._dragCover.remove()})}function F(U){U.lastDraggedX=U.x0+U.dx/2,U.lastDraggedY=U.y0+U.dy/2}function D(U){return function(j){return j.node.originalX===U.node.originalX}}K.exports=function(U,j,J,X,Z){var Y=U._context.staticPlot,W=!1;r.ensureSingle(U._fullLayout._infolayer,"g","first-render",function(){W=!0});var Q=U._fullLayout._dragCover,ne=J.filter(function(de){return f(de).trace.visible}).map(m.bind(null,X)),re=j.selectAll("."+d.cn.sankey).data(ne,u);re.exit().remove(),re.enter().append("g").classed(d.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",Y?"none":"auto").attr("transform",I),re.each(function(de,Ce){U._fullData[Ce]._sankey=de;var xe="bgsankey-"+de.trace.uid+"-"+Ce;r.ensureSingle(U._fullLayout._draggers,"rect",xe),U._fullData[Ce]._bgRect=l.select("."+xe),U._fullData[Ce]._bgRect.style("pointer-events",Y?"none":"all").attr("width",de.width).attr("height",de.height).attr("x",de.translateX).attr("y",de.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),re.transition().ease(d.ease).duration(d.duration).attr("transform",I);var ie=re.selectAll("."+d.cn.sankeyLinks).data(h,u);ie.enter().append("g").classed(d.cn.sankeyLinks,!0).style("fill","none");var se=ie.selectAll("."+d.cn.sankeyLink).data(function(de){return de.graph.links.filter(function(Ce){return Ce.value}).map(w.bind(null,de))},u);se.enter().append("path").classed(d.cn.sankeyLink,!0).call(N,re,Z.linkEvents),se.style("stroke",function(de){return O(de)?t.tinyRGB(s(de.linkLineColor)):de.tinyColorHue}).style("stroke-opacity",function(de){return O(de)?t.opacity(de.linkLineColor):de.tinyColorAlpha}).style("fill",function(de){return de.tinyColorHue}).style("fill-opacity",function(de){return de.tinyColorAlpha}).style("stroke-width",function(de){return O(de)?de.linkLineWidth:1}).attr("d",c()),se.style("opacity",function(){return U._context.staticPlot||W||Q?1:0}).transition().ease(d.ease).duration(d.duration).style("opacity",1),se.exit().transition().ease(d.ease).duration(d.duration).style("opacity",0).remove();var ge=re.selectAll("."+d.cn.sankeyNodeSet).data(h,u);ge.enter().append("g").classed(d.cn.sankeyNodeSet,!0),ge.style("cursor",function(de){switch(de.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var ue=ge.selectAll("."+d.cn.sankeyNode).data(function(de){var Ce=de.graph.nodes;return function(xe){var _e,we=[];for(_e=0;_e<xe.length;_e++)xe[_e].originalX=(xe[_e].x0+xe[_e].x1)/2,xe[_e].originalY=(xe[_e].y0+xe[_e].y1)/2,we.indexOf(xe[_e].originalX)===-1&&we.push(xe[_e].originalX);for(we.sort(function(Ae,$){return Ae-$}),_e=0;_e<xe.length;_e++)xe[_e].originalLayerIndex=we.indexOf(xe[_e].originalX),xe[_e].originalLayer=xe[_e].originalLayerIndex/(we.length-1)}(Ce),Ce.map(M.bind(null,de))},u);ue.enter().append("g").classed(d.cn.sankeyNode,!0).call(_).style("opacity",function(de){return!U._context.staticPlot&&!W||de.partOfGroup?0:1}),ue.call(N,re,Z.nodeEvents).call(R,se,Z,U),ue.transition().ease(d.ease).duration(d.duration).call(_).style("opacity",function(de){return de.partOfGroup?0:1}),ue.exit().transition().ease(d.ease).duration(d.duration).style("opacity",0).remove();var ce=ue.selectAll("."+d.cn.nodeRect).data(h);ce.enter().append("rect").classed(d.cn.nodeRect,!0).call(C),ce.style("stroke-width",function(de){return de.nodeLineWidth}).style("stroke",function(de){return t.tinyRGB(s(de.nodeLineColor))}).style("stroke-opacity",function(de){return t.opacity(de.nodeLineColor)}).style("fill",function(de){return de.tinyColorHue}).style("fill-opacity",function(de){return de.tinyColorAlpha}),ce.transition().ease(d.ease).duration(d.duration).call(C);var le=ue.selectAll("."+d.cn.nodeLabel).data(h);le.enter().append("text").classed(d.cn.nodeLabel,!0).style("cursor","default"),le.attr("data-notex",1).text(function(de){return de.node.label}).each(function(de){var Ce=l.select(this);o.font(Ce,de.textFont),x.convertToTspans(Ce,U)}).style("text-shadow",x.makeTextShadow(U._fullLayout.paper_bgcolor)).attr("text-anchor",function(de){return de.horizontal&&de.left?"end":"start"}).attr("transform",function(de){var Ce=l.select(this),xe=x.lineCount(Ce),_e=de.textFont.size*((xe-1)*p-y),we=de.nodeLineWidth/2+3,Ae=((de.horizontal?de.visibleHeight:de.visibleWidth)-_e)/2;de.horizontal&&(de.left?we=-we:we+=de.visibleWidth);var $=de.horizontal?"":"scale(-1,1)"+a(90);return n(de.horizontal?we:Ae,de.horizontal?Ae:we)+$}),le.transition().ease(d.ease).duration(d.duration)}},84564:function(K){K.exports=function(z,e){for(var S=[],k=z.cd[0].trace,l=k._sankey.graph.nodes,T=0;T<l.length;T++){var b=l[T];if(!b.partOfGroup){var d=[(b.x0+b.x1)/2,(b.y0+b.y1)/2];k.orientation==="v"&&d.reverse(),e&&e.contains(d,!1,T,z)&&S.push({pointNumber:b.pointNumber})}}return S}},75225:function(K,z,e){var S=e(71828);K.exports=function(k,l){for(var T=0;T<k.length;T++)k[T].i=T;S.mergeArray(l.text,k,"tx"),S.mergeArray(l.texttemplate,k,"txt"),S.mergeArray(l.hovertext,k,"htx"),S.mergeArray(l.customdata,k,"data"),S.mergeArray(l.textposition,k,"tp"),l.textfont&&(S.mergeArrayCastPositive(l.textfont.size,k,"ts"),S.mergeArray(l.textfont.color,k,"tc"),S.mergeArray(l.textfont.family,k,"tf"));var b=l.marker;if(b){S.mergeArrayCastPositive(b.size,k,"ms"),S.mergeArrayCastPositive(b.opacity,k,"mo"),S.mergeArray(b.symbol,k,"mx"),S.mergeArray(b.angle,k,"ma"),S.mergeArray(b.standoff,k,"mf"),S.mergeArray(b.color,k,"mc");var d=b.line;b.line&&(S.mergeArray(d.color,k,"mlc"),S.mergeArrayCastPositive(d.width,k,"mlw"));var s=b.gradient;s&&s.type!=="none"&&(S.mergeArray(s.type,k,"mgt"),S.mergeArray(s.color,k,"mgc"))}}},82196:function(K,z,e){var S=e(12663).axisHoverFormat,k=e(5386).si,l=e(5386).fF,T=e(50693),b=e(41940),d=e(79952).P,s=e(79952).u,t=e(91424),o=e(47581),r=e(1426).extendFlat;K.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:S("x"),yhoverformat:S("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:k({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:l({},{keys:o.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:r({},d,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:s,marker:r({symbol:{valType:"enumerated",values:t.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:r({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},T("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},T("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:b({editType:"calc",colorEditType:"style",arrayOk:!0})}},47761:function(K,z,e){var S=e(92770),k=e(71828),l=e(89298),T=e(42973),b=e(50606).BADNUM,d=e(34098),s=e(36922),t=e(75225),o=e(66279);function r(h,f,x,v,g,y,p){var m=f._length,w=h._fullLayout,c=x._id,M=v._id,_=w._firstScatter[i(f)]===f.uid,E=(u(f,w,x,v)||{}).orientation,L=f.fill;x._minDtick=0,v._minDtick=0;var C={padded:!0},O={padded:!0};p&&(C.ppad=O.ppad=p);var I=m<2||g[0]!==g[m-1]||y[0]!==y[m-1];I&&(L==="tozerox"||L==="tonextx"&&(_||E==="h"))?C.tozero=!0:(f.error_y||{}).visible||L!=="tonexty"&&L!=="tozeroy"&&(d.hasMarkers(f)||d.hasText(f))||(C.padded=!1,C.ppad=0),I&&(L==="tozeroy"||L==="tonexty"&&(_||E==="v"))?O.tozero=!0:L!=="tonextx"&&L!=="tozerox"||(O.padded=!1),c&&(f._extremes[c]=l.findExtremes(x,g,C)),M&&(f._extremes[M]=l.findExtremes(v,y,O))}function n(h,f){if(d.hasMarkers(h)){var x,v=h.marker,g=1.6*(h.marker.sizeref||1);if(x=h.marker.sizemode==="area"?function(c){return Math.max(Math.sqrt((c||0)/g),3)}:function(c){return Math.max((c||0)/g,3)},k.isArrayOrTypedArray(v.size)){var y={type:"linear"};l.setConvert(y);for(var p=y.makeCalcdata(h.marker,"size"),m=new Array(f),w=0;w<f;w++)m[w]=x(p[w]);return m}return x(v.size)}}function a(h,f){var x=i(f),v=h._firstScatter;v[x]||(v[x]=f.uid)}function i(h){var f=h.stackgroup;return h.xaxis+h.yaxis+h.type+(f?"-"+f:"")}function u(h,f,x,v){var g=h.stackgroup;if(g){var y=f._scatterStackOpts[x._id+v._id][g],p=y.orientation==="v"?v:x;return p.type==="linear"||p.type==="log"?y:void 0}}K.exports={calc:function(h,f){var x,v,g,y,p,m,w=h._fullLayout,c=f._xA=l.getFromId(h,f.xaxis||"x","x"),M=f._yA=l.getFromId(h,f.yaxis||"y","y"),_=c.makeCalcdata(f,"x"),E=M.makeCalcdata(f,"y"),L=T(f,c,"x",_),C=T(f,M,"y",E),O=L.vals,I=C.vals,N=f._length,R=new Array(N),V=f.ids,F=u(f,w,c,M),D=!1;a(w,f);var U,j="x",J="y";F?(k.pushUnique(F.traceIndices,f._expandedIndex),(x=F.orientation==="v")?(J="s",U="x"):(j="s",U="y"),p=F.stackgaps==="interpolate"):r(h,f,c,M,O,I,n(f,N));var X=!!f.xperiodalignment,Z=!!f.yperiodalignment;for(v=0;v<N;v++){var Y=R[v]={},W=S(O[v]),Q=S(I[v]);W&&Q?(Y[j]=O[v],Y[J]=I[v],X&&(Y.orig_x=_[v],Y.xEnd=L.ends[v],Y.xStart=L.starts[v]),Z&&(Y.orig_y=E[v],Y.yEnd=C.ends[v],Y.yStart=C.starts[v])):F&&(x?W:Q)?(Y[U]=x?O[v]:I[v],Y.gap=!0,p?(Y.s=b,D=!0):Y.s=0):Y[j]=Y[J]=b,V&&(Y.id=String(V[v]))}if(t(R,f),s(h,f),o(R,f),F){for(v=0;v<R.length;)R[v][U]===b?R.splice(v,1):v++;if(k.sort(R,function(se,ge){return se[U]-ge[U]||se.i-ge.i}),D){for(v=0;v<R.length-1&&R[v].gap;)v++;for((m=R[v].s)||(m=R[v].s=0),g=0;g<v;g++)R[g].s=m;for(y=R.length-1;y>v&&R[y].gap;)y--;for(m=R[y].s,g=R.length-1;g>y;g--)R[g].s=m;for(;v<y;)if(R[++v].gap){for(g=v+1;R[g].gap;)g++;for(var ne=R[v-1][U],re=R[v-1].s,ie=(R[g].s-re)/(R[g][U]-ne);v<g;)R[v].s=re+(R[v][U]-ne)*ie,v++}}}return R},calcMarkerSize:n,calcAxisExpansion:r,setFirstScatter:a,getStackOpts:u}},66279:function(K,z,e){var S=e(71828);K.exports=function(k,l){S.isArrayOrTypedArray(l.selectedpoints)&&S.tagSelected(k,l)}},36922:function(K,z,e){var S=e(52075).hasColorscale,k=e(78803),l=e(34098);K.exports=function(T,b){l.hasLines(b)&&S(b,"line")&&k(T,b,{vals:b.line.color,containerStr:"line",cLetter:"c"}),l.hasMarkers(b)&&(S(b,"marker")&&k(T,b,{vals:b.marker.color,containerStr:"marker",cLetter:"c"}),S(b,"marker.line")&&k(T,b,{vals:b.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},47581:function(K){K.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},72626:function(K,z,e){var S=e(47761),k=e(11661).setGroupPositions;function l(T,b,d,s,t,o,r){t[s]=!0;var n={i:null,gap:!0,s:0};if(n[r]=d,T.splice(b,0,n),b&&d===T[b-1][r]){var a=T[b-1];n.s=a.s,n.i=a.i,n.gap=a.gap}else o&&(n.s=function(i,u,h,f){var x=i[u-1],v=i[u+1];return v?x?x.s+(v.s-x.s)*(h-x[f])/(v[f]-x[f]):v.s:x.s}(T,b,d,r));b||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}K.exports=function(T,b){T._fullLayout.scattermode==="group"&&function(U,j){for(var J=j.xaxis,X=j.yaxis,Z=U._fullLayout,Y=U._fullData,W=U.calcdata,Q=[],ne=[],re=0;re<Y.length;re++){var ie=Y[re];ie.visible===!0&&ie.type==="scatter"&&ie.xaxis===J._id&&ie.yaxis===X._id&&(ie.orientation==="h"?Q.push(W[re]):ie.orientation==="v"&&ne.push(W[re]))}var se={mode:Z.scattermode,gap:Z.scattergap};k(U,J,X,ne,se),k(U,X,J,Q,se)}(T,b);var d=b.xaxis,s=b.yaxis,t=d._id+s._id,o=T._fullLayout._scatterStackOpts[t];if(o){var r,n,a,i,u,h,f,x,v,g,y,p,m,w,c,M=T.calcdata;for(var _ in o){var E=(g=o[_]).traceIndices;if(E.length){for(y=g.stackgaps==="interpolate",p=g.groupnorm,g.orientation==="v"?(m="x",w="y"):(m="y",w="x"),c=new Array(E.length),r=0;r<c.length;r++)c[r]=!1;h=M[E[0]];var L=new Array(h.length);for(r=0;r<h.length;r++)L[r]=h[r][m];for(r=1;r<E.length;r++){for(u=M[E[r]],n=a=0;n<u.length;n++){for(f=u[n][m];f>L[a]&&a<L.length;a++)l(u,n,L[a],r,c,y,m),n++;if(f!==L[a]){for(i=0;i<r;i++)l(M[E[i]],a,f,i,c,y,m);L.splice(a,0,f)}a++}for(;a<L.length;a++)l(u,n,L[a],r,c,y,m),n++}var C=L.length;for(n=0;n<h.length;n++){for(x=h[n][w]=h[n].s,r=1;r<E.length;r++)(u=M[E[r]])[0].trace._rawLength=u[0].trace._length,u[0].trace._length=C,x+=u[n].s,u[n][w]=x;if(p)for(v=(p==="fraction"?x:x/100)||1,r=0;r<E.length;r++){var O=M[E[r]][n];O[w]/=v,O.sNorm=O.s/v}}for(r=0;r<E.length;r++){var I=(u=M[E[r]])[0].trace,N=S.calcMarkerSize(I,I._rawLength),R=Array.isArray(N);if(N&&c[r]||R){var V=N;for(N=new Array(C),n=0;n<C;n++)N[n]=u[n].gap?0:R?V[u[n].i]:V}var F=new Array(C),D=new Array(C);for(n=0;n<C;n++)F[n]=u[n].x,D[n]=u[n].y;S.calcAxisExpansion(T,I,d,s,F,D,N),u[0].t.orientation=g.orientation}}}}}},34936:function(K,z,e){var S=e(71828),k=e(26125),l=e(82196);K.exports=function(T,b){var d,s,t;function o(u){return S.coerce(s._input,s,l,u)}if(b.scattermode==="group")for(t=0;t<T.length;t++)(s=T[t]).type==="scatter"&&(d=s._input,k(d,s,b,o));for(t=0;t<T.length;t++){var r=T[t];if(r.type==="scatter"){var n=r.fill;if(n!=="none"&&n!=="toself"&&(r.opacity=void 0,n==="tonexty"||n==="tonextx"))for(var a=t-1;a>=0;a--){var i=T[a];if(i.type==="scatter"&&i.xaxis===r.xaxis&&i.yaxis===r.yaxis){i.opacity=void 0;break}}}}}},17438:function(K,z,e){var S=e(71828),k=e(73972),l=e(82196),T=e(47581),b=e(34098),d=e(67513),s=e(73927),t=e(565),o=e(49508),r=e(11058),n=e(94039),a=e(82410),i=e(28908),u=e(71828).coercePattern;K.exports=function(h,f,x,v){function g(E,L){return S.coerce(h,f,l,E,L)}var y=d(h,f,v,g);if(y||(f.visible=!1),f.visible){s(h,f,v,g),g("xhoverformat"),g("yhoverformat");var p=t(h,f,v,g);v.scattermode==="group"&&f.orientation===void 0&&g("orientation","v");var m=!p&&y<T.PTS_LINESONLY?"lines+markers":"lines";g("text"),g("hovertext"),g("mode",m),b.hasLines(f)&&(r(h,f,x,v,g,{backoff:!0}),n(h,f,g),g("connectgaps"),g("line.simplify")),b.hasMarkers(f)&&o(h,f,x,v,g,{gradient:!0}),b.hasText(f)&&(g("texttemplate"),a(h,f,v,g));var w=[];(b.hasMarkers(f)||b.hasText(f))&&(g("cliponaxis"),g("marker.maxdisplayed"),w.push("points")),g("fill",p?p.fillDflt:"none"),f.fill!=="none"&&(i(h,f,x,g),b.hasLines(f)||n(h,f,g),u(g,"fillpattern",f.fillcolor,!1));var c=(f.line||{}).color,M=(f.marker||{}).color;f.fill!=="tonext"&&f.fill!=="toself"||w.push("fills"),g("hoveron",w.join("+")||"points"),f.hoveron!=="fills"&&g("hovertemplate");var _=k.getComponentMethod("errorbars","supplyDefaults");_(h,f,c||M||x,{axis:"y"}),_(h,f,c||M||x,{axis:"x",inherit:"y"}),S.coerceSelectionMarkerOpacity(f,g)}}},28908:function(K,z,e){var S=e(7901),k=e(71828).isArrayOrTypedArray;K.exports=function(l,T,b,d){var s=!1;if(T.marker){var t=T.marker.color,o=(T.marker.line||{}).color;t&&!k(t)?s=t:o&&!k(o)&&(s=o)}d("fillcolor",S.addOpacity((T.line||{}).color||s||b,.5))}},8225:function(K,z,e){var S=e(89298);K.exports=function(k,l,T){var b={},d={_fullLayout:T},s=S.getFromTrace(d,l,"x"),t=S.getFromTrace(d,l,"y"),o=k.orig_x;o===void 0&&(o=k.x);var r=k.orig_y;return r===void 0&&(r=k.y),b.xLabel=S.tickText(s,s.c2l(o),!0).text,b.yLabel=S.tickText(t,t.c2l(r),!0).text,b}},34603:function(K,z,e){var S=e(7901),k=e(34098);K.exports=function(l,T){var b,d;if(l.mode==="lines")return(b=l.line.color)&&S.opacity(b)?b:l.fillcolor;if(l.mode==="none")return l.fill?l.fillcolor:"";var s=T.mcc||(l.marker||{}).color,t=T.mlcc||((l.marker||{}).line||{}).color;return(d=s&&S.opacity(s)?s:t&&S.opacity(t)&&(T.mlw||((l.marker||{}).line||{}).width)?t:"")?S.opacity(d)<.3?S.addOpacity(d,.3):d:(b=(l.line||{}).color)&&S.opacity(b)&&k.hasLines(l)&&l.line.width?b:l.fillcolor}},26125:function(K,z,e){var S=e(99082).getAxisGroup;K.exports=function(k,l,T,b){var d=l.orientation,s=l[{v:"x",h:"y"}[d]+"axis"],t=S(T,s)+d,o=T._alignmentOpts||{},r=b("alignmentgroup"),n=o[t];n||(n=o[t]={});var a=n[r];a?a.traces.push(l):a=n[r]={traces:[l],alignmentIndex:Object.keys(n).length,offsetGroups:{}};var i=b("offsetgroup"),u=a.offsetGroups,h=u[i];i&&(h||(h=u[i]={offsetIndex:Object.keys(u).length}),l._offsetIndex=h.offsetIndex)}},33720:function(K,z,e){var S=e(71828),k=e(30211),l=e(73972),T=e(34603),b=e(7901),d=S.fillText;K.exports=function(s,t,o,r){var n=s.cd,a=n[0].trace,i=s.xa,u=s.ya,h=i.c2p(t),f=u.c2p(o),x=[h,f],v=a.hoveron||"",g=a.mode.indexOf("markers")!==-1?3:.5,y=!!a.xperiodalignment,p=!!a.yperiodalignment;if(v.indexOf("points")!==-1){var m=function(ue){var ce=Math.max(g,ue.mrc||0),le=i.c2p(ue.x)-h,de=u.c2p(ue.y)-f;return Math.max(Math.sqrt(le*le+de*de)-ce,1-g/ce)},w=k.getDistanceFunction(r,function(ue){if(y){var ce=i.c2p(ue.xStart),le=i.c2p(ue.xEnd);return h>=Math.min(ce,le)&&h<=Math.max(ce,le)?0:1/0}var de=Math.max(3,ue.mrc||0),Ce=1-1/de,xe=Math.abs(i.c2p(ue.x)-h);return xe<de?Ce*xe/de:xe-de+Ce},function(ue){if(p){var ce=u.c2p(ue.yStart),le=u.c2p(ue.yEnd);return f>=Math.min(ce,le)&&f<=Math.max(ce,le)?0:1/0}var de=Math.max(3,ue.mrc||0),Ce=1-1/de,xe=Math.abs(u.c2p(ue.y)-f);return xe<de?Ce*xe/de:xe-de+Ce},m);if(k.getClosest(n,w,s),s.index!==!1){var c=n[s.index],M=i.c2p(c.x,!0),_=u.c2p(c.y,!0),E=c.mrc||1;s.index=c.i;var L=n[0].t.orientation,C=L&&(c.sNorm||c.s),O=L==="h"?C:c.orig_x!==void 0?c.orig_x:c.x,I=L==="v"?C:c.orig_y!==void 0?c.orig_y:c.y;return S.extendFlat(s,{color:T(a,c),x0:M-E,x1:M+E,xLabelVal:O,y0:_-E,y1:_+E,yLabelVal:I,spikeDistance:m(c),hovertemplate:a.hovertemplate}),d(c,a,s),l.getComponentMethod("errorbars","hoverInfo")(c,a,s),[s]}}if(v.indexOf("fills")!==-1&&a._polygons){var N,R,V,F,D,U,j,J,X,Z=a._polygons,Y=[],W=!1,Q=1/0,ne=-1/0,re=1/0,ie=-1/0;for(N=0;N<Z.length;N++)(V=Z[N]).contains(x)&&(W=!W,Y.push(V),re=Math.min(re,V.ymin),ie=Math.max(ie,V.ymax));if(W){var se=((re=Math.max(re,0))+(ie=Math.min(ie,u._length)))/2;for(N=0;N<Y.length;N++)for(F=Y[N].pts,R=1;R<F.length;R++)(J=F[R-1][1])>se!=(X=F[R][1])>=se&&(U=F[R-1][0],j=F[R][0],X-J&&(D=U+(j-U)*(se-J)/(X-J),Q=Math.min(Q,D),ne=Math.max(ne,D)));Q=Math.max(Q,0),ne=Math.min(ne,i._length);var ge=b.defaultLine;return b.opacity(a.fillcolor)?ge=a.fillcolor:b.opacity((a.line||{}).color)&&(ge=a.line.color),S.extendFlat(s,{distance:s.maxHoverDistance,x0:Q,x1:ne,y0:se,y1:se,color:ge,hovertemplate:!1}),delete s.index,a.text&&!Array.isArray(a.text)?s.text=String(a.text):s.text=a.name,[s]}}}},67368:function(K,z,e){var S=e(34098);K.exports={hasLines:S.hasLines,hasMarkers:S.hasMarkers,hasText:S.hasText,isBubble:S.isBubble,attributes:e(82196),layoutAttributes:e(21479),supplyDefaults:e(17438),crossTraceDefaults:e(34936),supplyLayoutDefaults:e(79334),calc:e(47761).calc,crossTraceCalc:e(72626),arraysToCalcdata:e(75225),plot:e(32663),colorbar:e(4898),formatLabels:e(8225),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(33720),selectPoints:e(98002),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e(93612),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},21479:function(K){K.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},79334:function(K,z,e){var S=e(71828),k=e(21479);K.exports=function(l,T){var b,d=T.barmode==="group";T.scattermode==="group"&&(b=d?T.bargap:.2,S.coerce(l,T,k,"scattergap",b))}},11058:function(K,z,e){var S=e(71828).isArrayOrTypedArray,k=e(52075).hasColorscale,l=e(1586);K.exports=function(T,b,d,s,t,o){o||(o={});var r=(T.marker||{}).color;t("line.color",d),k(T,"line")?l(T,b,s,t,{prefix:"line.",cLetter:"c"}):t("line.color",!S(r)&&r||d),t("line.width"),o.noDash||t("line.dash"),o.backoff&&t("line.backoff")}},34621:function(K,z,e){var S=e(91424),k=e(50606),l=k.BADNUM,T=k.LOG_CLIP,b=T+.5,d=T-.5,s=e(71828),t=s.segmentsIntersect,o=s.constrain,r=e(47581);K.exports=function(n,a){var i,u,h,f,x,v,g,y,p,m,w,c,M,_,E,L,C,O,I=a.trace||{},N=a.xaxis,R=a.yaxis,V=N.type==="log",F=R.type==="log",D=N._length,U=R._length,j=a.backoff,J=I.marker,X=a.connectGaps,Z=a.baseTolerance,Y=a.shape,W=Y==="linear",Q=I.fill&&I.fill!=="none",ne=[],re=r.minTolerance,ie=n.length,se=new Array(ie),ge=0;function ue(zt){var Ze=n[zt];if(!Ze)return!1;var Ye=a.linearized?N.l2p(Ze.x):N.c2p(Ze.x),je=a.linearized?R.l2p(Ze.y):R.c2p(Ze.y);if(Ye===l){if(V&&(Ye=N.c2p(Ze.x,!0)),Ye===l)return!1;F&&je===l&&(Ye*=Math.abs(N._m*U*(N._m>0?b:d)/(R._m*D*(R._m>0?b:d)))),Ye*=1e3}if(je===l){if(F&&(je=R.c2p(Ze.y,!0)),je===l)return!1;je*=1e3}return[Ye,je]}function ce(zt,Ze,Ye,je){var Ke=Ye-zt,st=je-Ze,Se=.5-zt,Ie=.5-Ze,We=Ke*Ke+st*st,it=Ke*Se+st*Ie;if(it>0&&it<We){var lt=Se*st-Ie*Ke;if(lt*lt<We)return!0}}function le(zt,Ze){var Ye=zt[0]/D,je=zt[1]/U,Ke=Math.max(0,-Ye,Ye-1,-je,je-1);return Ke&&C!==void 0&&ce(Ye,je,C,O)&&(Ke=0),Ke&&Ze&&ce(Ye,je,Ze[0]/D,Ze[1]/U)&&(Ke=0),(1+r.toleranceGrowth*Ke)*Z}function de(zt,Ze){var Ye=zt[0]-Ze[0],je=zt[1]-Ze[1];return Math.sqrt(Ye*Ye+je*je)}var Ce,xe,_e,we,Ae,$,oe,pe=r.maxScreensAway,ye=-D*pe,ke=D*(1+pe),De=-U*pe,Pe=U*(1+pe),Re=[[ye,De,ke,De],[ke,De,ke,Pe],[ke,Pe,ye,Pe],[ye,Pe,ye,De]];function fe(zt){if(zt[0]<ye||zt[0]>ke||zt[1]<De||zt[1]>Pe)return[o(zt[0],ye,ke),o(zt[1],De,Pe)]}function ve(zt,Ze){return zt[0]===Ze[0]&&(zt[0]===ye||zt[0]===ke)||zt[1]===Ze[1]&&(zt[1]===De||zt[1]===Pe)||void 0}function Te(zt,Ze,Ye){return function(je,Ke){var st=fe(je),Se=fe(Ke),Ie=[];if(st&&Se&&ve(st,Se))return Ie;st&&Ie.push(st),Se&&Ie.push(Se);var We=2*s.constrain((je[zt]+Ke[zt])/2,Ze,Ye)-((st||je)[zt]+(Se||Ke)[zt]);return We&&((st&&Se?We>0==st[zt]>Se[zt]?st:Se:st||Se)[zt]+=We),Ie}}function ze(zt){var Ze=zt[0],Ye=zt[1],je=Ze===se[ge-1][0],Ke=Ye===se[ge-1][1];if(!je||!Ke)if(ge>1){var st=Ze===se[ge-2][0],Se=Ye===se[ge-2][1];je&&(Ze===ye||Ze===ke)&&st?Se?ge--:se[ge-1]=zt:Ke&&(Ye===De||Ye===Pe)&&Se?st?ge--:se[ge-1]=zt:se[ge++]=zt}else se[ge++]=zt}function He(zt){se[ge-1][0]!==zt[0]&&se[ge-1][1]!==zt[1]&&ze([_e,we]),ze(zt),Ae=null,_e=we=0}Y==="linear"||Y==="spline"?oe=function(zt,Ze){for(var Ye=[],je=0,Ke=0;Ke<4;Ke++){var st=Re[Ke],Se=t(zt[0],zt[1],Ze[0],Ze[1],st[0],st[1],st[2],st[3]);Se&&(!je||Math.abs(Se.x-Ye[0][0])>1||Math.abs(Se.y-Ye[0][1])>1)&&(Se=[Se.x,Se.y],je&&de(Se,zt)<de(Ye[0],zt)?Ye.unshift(Se):Ye.push(Se),je++)}return Ye}:Y==="hv"||Y==="vh"?oe=function(zt,Ze){var Ye=[],je=fe(zt),Ke=fe(Ze);return je&&Ke&&ve(je,Ke)||(je&&Ye.push(je),Ke&&Ye.push(Ke)),Ye}:Y==="hvh"?oe=Te(0,ye,ke):Y==="vhv"&&(oe=Te(1,De,Pe));var Ve=s.isArrayOrTypedArray(J);function nt(zt){if(zt&&j&&(zt.i=i,zt.d=n,zt.trace=I,zt.marker=Ve?J[zt.i]:J,zt.backoff=j),C=zt[0]/D,O=zt[1]/U,Ce=zt[0]<ye?ye:zt[0]>ke?ke:0,xe=zt[1]<De?De:zt[1]>Pe?Pe:0,Ce||xe){if(ge)if(Ae){var Ze=oe(Ae,zt);Ze.length>1&&(He(Ze[0]),se[ge++]=Ze[1])}else $=oe(se[ge-1],zt)[0],se[ge++]=$;else se[ge++]=[Ce||zt[0],xe||zt[1]];var Ye=se[ge-1];Ce&&xe&&(Ye[0]!==Ce||Ye[1]!==xe)?(Ae&&(_e!==Ce&&we!==xe?ze(_e&&we?(je=Ae,st=(Ke=zt)[0]-je[0],Se=(Ke[1]-je[1])/st,(je[1]*Ke[0]-Ke[1]*je[0])/st>0?[Se>0?ye:ke,Pe]:[Se>0?ke:ye,De]):[_e||Ce,we||xe]):_e&&we&&ze([_e,we])),ze([Ce,xe])):_e-Ce&&we-xe&&ze([Ce||_e,xe||we]),Ae=zt,_e=Ce,we=xe}else Ae&&He(oe(Ae,zt)[0]),se[ge++]=zt;var je,Ke,st,Se}for(i=0;i<ie;i++)if(u=ue(i)){for(ge=0,Ae=null,nt(u),i++;i<ie;i++){if(!(f=ue(i))){if(X)continue;break}if(W&&a.simplify){var tt=ue(i+1);if(m=de(f,u),Q&&(ge===0||ge===ie-1)||!(m<le(f,tt)*re)){for(y=[(f[0]-u[0])/m,(f[1]-u[1])/m],x=u,w=m,c=_=E=0,g=!1,h=f,i++;i<n.length;i++){if(v=tt,tt=ue(i+1),!v){if(X)continue;break}if(L=(p=[v[0]-u[0],v[1]-u[1]])[0]*y[1]-p[1]*y[0],_=Math.min(_,L),(E=Math.max(E,L))-_>le(v,tt))break;h=v,(M=p[0]*y[0]+p[1]*y[1])>w?(w=M,f=v,g=!1):M<c&&(c=M,x=v,g=!0)}if(g?(nt(f),h!==x&&nt(x)):(x!==u&&nt(x),h!==f&&nt(f)),nt(h),i>=n.length||!v)break;nt(v),u=v}}else nt(f)}Ae&&ze([_e||Ae[0],we||Ae[1]]),ne.push(se.slice(0,ge))}var ot=Y.slice(Y.length-1);if(j&&ot!=="h"&&ot!=="v"){for(var pt=!1,Tt=-1,yt=[],dt=0;dt<ne.length;dt++)for(var Pt=0;Pt<ne[dt].length-1;Pt++){var Et=ne[dt][Pt],Ot=ne[dt][Pt+1],Nt=S.applyBackoff(Ot,Et);Nt[0]===Ot[0]&&Nt[1]===Ot[1]||(pt=!0),yt[Tt+1]||(yt[++Tt]=[Et,[Nt[0],Nt[1]]])}return pt?yt:ne}return ne}},94039:function(K){K.exports=function(z,e,S){S("line.shape")==="spline"&&S("line.smoothing")}},68687:function(K){var z={tonextx:1,tonexty:1,tonext:1};K.exports=function(e,S,k){var l,T,b,d,s,t={},o=!1,r=-1,n=0,a=-1;for(T=0;T<k.length;T++)(b=(l=k[T][0].trace).stackgroup||"")?b in t?s=t[b]:(s=t[b]=n,n++):l.fill in z&&a>=0?s=a:(s=a=n,n++),s<r&&(o=!0),l._groupIndex=r=s;var i=k.slice();o&&i.sort(function(h,f){var x=h[0].trace,v=f[0].trace;return x._groupIndex-v._groupIndex||x.index-v.index});var u={};for(T=0;T<i.length;T++)b=(l=i[T][0].trace).stackgroup||"",l.visible===!0?(l._nexttrace=null,l.fill in z&&(d=u[b],l._prevtrace=d||null,d&&(d._nexttrace=l)),l._ownfill=l.fill&&(l.fill.substr(0,6)==="tozero"||l.fill==="toself"||l.fill.substr(0,2)==="to"&&!l._prevtrace),u[b]=l):l._prevtrace=l._nexttrace=l._ownfill=null;return i}},39984:function(K,z,e){var S=e(92770);K.exports=function(k,l){l||(l=2);var T=k.marker,b=T.sizeref||1,d=T.sizemin||0,s=T.sizemode==="area"?function(t){return Math.sqrt(t/b)}:function(t){return t/b};return function(t){var o=s(t/l);return S(o)&&o>0?Math.max(o,d):0}}},4898:function(K){K.exports={container:"marker",min:"cmin",max:"cmax"}},49508:function(K,z,e){var S=e(7901),k=e(52075).hasColorscale,l=e(1586),T=e(34098);K.exports=function(b,d,s,t,o,r){var n=T.isBubble(b),a=(b.line||{}).color;r=r||{},a&&(s=a),o("marker.symbol"),o("marker.opacity",n?.7:1),o("marker.size"),r.noAngle||(o("marker.angle"),r.noAngleRef||o("marker.angleref"),r.noStandOff||o("marker.standoff")),o("marker.color",s),k(b,"marker")&&l(b,d,t,o,{prefix:"marker.",cLetter:"c"}),r.noSelect||(o("selected.marker.color"),o("unselected.marker.color"),o("selected.marker.size"),o("unselected.marker.size")),r.noLine||(o("marker.line.color",a&&!Array.isArray(a)&&d.marker.color!==a?a:n?S.background:S.defaultLine),k(b,"marker.line")&&l(b,d,t,o,{prefix:"marker.line.",cLetter:"c"}),o("marker.line.width",n?1:0)),n&&(o("marker.sizeref"),o("marker.sizemin"),o("marker.sizemode")),r.gradient&&o("marker.gradient.type")!=="none"&&o("marker.gradient.color")}},73927:function(K,z,e){var S=e(71828).dateTick0,k=e(50606).ONEWEEK;function l(T,b){return S(b,T%k==0?1:0)}K.exports=function(T,b,d,s,t){if(t||(t={x:!0,y:!0}),t.x){var o=s("xperiod");o&&(s("xperiod0",l(o,b.xcalendar)),s("xperiodalignment"))}if(t.y){var r=s("yperiod");r&&(s("yperiod0",l(r,b.ycalendar)),s("yperiodalignment"))}}},32663:function(K,z,e){var S=e(39898),k=e(73972),l=e(71828),T=l.ensureSingle,b=l.identity,d=e(91424),s=e(34098),t=e(34621),o=e(68687),r=e(61082).tester;function n(a,i,u,h,f,x,v){var g,y=a._context.staticPlot;(function(oe,pe,ye,ke,De){var Pe=ye.xaxis,Re=ye.yaxis,fe=S.extent(l.simpleMap(Pe.range,Pe.r2c)),ve=S.extent(l.simpleMap(Re.range,Re.r2c)),Te=ke[0].trace;if(s.hasMarkers(Te)){var ze=Te.marker.maxdisplayed;if(ze!==0){var He=ke.filter(function(ot){return ot.x>=fe[0]&&ot.x<=fe[1]&&ot.y>=ve[0]&&ot.y<=ve[1]}),Ve=Math.ceil(He.length/ze),nt=0;De.forEach(function(ot,pt){var Tt=ot[0].trace;s.hasMarkers(Tt)&&Tt.marker.maxdisplayed>0&&pt<pe&&nt++});var tt=Math.round(nt*Ve/3+Math.floor(nt/3)*Ve/7.1);ke.forEach(function(ot){delete ot.vis}),He.forEach(function(ot,pt){Math.round((pt+tt)%Ve)===0&&(ot.vis=!0)})}}})(0,i,u,h,f);var p=!!v&&v.duration>0;function m(oe){return p?oe.transition():oe}var w=u.xaxis,c=u.yaxis,M=h[0].trace,_=M.line,E=S.select(x),L=T(E,"g","errorbars"),C=T(E,"g","lines"),O=T(E,"g","points"),I=T(E,"g","text");if(k.getComponentMethod("errorbars","plot")(a,L,u,v),M.visible===!0){var N,R;m(E).style("opacity",M.opacity);var V=M.fill.charAt(M.fill.length-1);V!=="x"&&V!=="y"&&(V=""),h[0][u.isRangePlot?"nodeRangePlot3":"node3"]=E;var F,D,U="",j=[],J=M._prevtrace;J&&(U=J._prevRevpath||"",R=J._nextFill,j=J._polygons);var X,Z,Y,W,Q,ne,re,ie="",se="",ge=[],ue=l.noop;if(N=M._ownFill,s.hasLines(M)||M.fill!=="none"){for(R&&R.datum(h),["hv","vh","hvh","vhv"].indexOf(_.shape)!==-1?(X=d.steps(_.shape),Z=d.steps(_.shape.split("").reverse().join(""))):X=Z=_.shape==="spline"?function(oe){var pe=oe[oe.length-1];return oe.length>1&&oe[0][0]===pe[0]&&oe[0][1]===pe[1]?d.smoothclosed(oe.slice(1),_.smoothing):d.smoothopen(oe,_.smoothing)}:function(oe){return"M"+oe.join("L")},Y=function(oe){return Z(oe.reverse())},ge=t(h,{xaxis:w,yaxis:c,trace:M,connectGaps:M.connectgaps,baseTolerance:Math.max(_.width||1,3)/4,shape:_.shape,backoff:_.backoff,simplify:_.simplify,fill:M.fill}),re=M._polygons=new Array(ge.length),g=0;g<ge.length;g++)M._polygons[g]=r(ge[g]);ge.length&&(W=ge[0][0],ne=(Q=ge[ge.length-1])[Q.length-1]),ue=function(oe){return function(pe){if(F=X(pe),D=Y(pe),ie?V?(ie+="L"+F.substr(1),se=D+"L"+se.substr(1)):(ie+="Z"+F,se=D+"Z"+se):(ie=F,se=D),s.hasLines(M)){var ye=S.select(this);if(ye.datum(h),oe)m(ye.style("opacity",0).attr("d",F).call(d.lineGroupStyle)).style("opacity",1);else{var ke=m(ye);ke.attr("d",F),d.singleLineStyle(h,ke)}}}}}var ce=C.selectAll(".js-line").data(ge);m(ce.exit()).style("opacity",0).remove(),ce.each(ue(!1)),ce.enter().append("path").classed("js-line",!0).style("vector-effect",y?"none":"non-scaling-stroke").call(d.lineGroupStyle).each(ue(!0)),d.setClipUrl(ce,u.layerClipId,a),ge.length?(N?(N.datum(h),W&&ne&&(V?(V==="y"?W[1]=ne[1]=c.c2p(0,!0):V==="x"&&(W[0]=ne[0]=w.c2p(0,!0)),m(N).attr("d","M"+ne+"L"+W+"L"+ie.substr(1)).call(d.singleFillStyle,a)):m(N).attr("d",ie+"Z").call(d.singleFillStyle,a))):R&&(M.fill.substr(0,6)==="tonext"&&ie&&U?(M.fill==="tonext"?m(R).attr("d",ie+"Z"+U+"Z").call(d.singleFillStyle,a):m(R).attr("d",ie+"L"+U.substr(1)+"Z").call(d.singleFillStyle,a),M._polygons=M._polygons.concat(j)):(de(R),M._polygons=null)),M._prevRevpath=se,M._prevPolygons=re):(N?de(N):R&&de(R),M._polygons=M._prevRevpath=M._prevPolygons=null),O.datum(h),I.datum(h),function(oe,pe,ye){var ke,De=ye[0].trace,Pe=s.hasMarkers(De),Re=s.hasText(De),fe=Ae(De),ve=$,Te=$;if(Pe||Re){var ze=b,He=De.stackgroup,Ve=He&&a._fullLayout._scatterStackOpts[w._id+c._id][He].stackgaps==="infer zero";De.marker.maxdisplayed||De._needsCull?ze=Ve?xe:Ce:He&&!Ve&&(ze=_e),Pe&&(ve=ze),Re&&(Te=ze)}var nt,tt=(ke=oe.selectAll("path.point").data(ve,fe)).enter().append("path").classed("point",!0);p&&tt.call(d.pointStyle,De,a).call(d.translatePoints,w,c).style("opacity",0).transition().style("opacity",1),ke.order(),Pe&&(nt=d.makePointStyleFns(De)),ke.each(function(ot){var pt=S.select(this),Tt=m(pt);d.translatePoint(ot,Tt,w,c)?(d.singlePointStyle(ot,Tt,De,nt,a),u.layerClipId&&d.hideOutsideRangePoint(ot,Tt,w,c,De.xcalendar,De.ycalendar),De.customdata&&pt.classed("plotly-customdata",ot.data!==null&&ot.data!==void 0)):Tt.remove()}),p?ke.exit().transition().style("opacity",0).remove():ke.exit().remove(),(ke=pe.selectAll("g").data(Te,fe)).enter().append("g").classed("textpoint",!0).append("text"),ke.order(),ke.each(function(ot){var pt=S.select(this),Tt=m(pt.select("text"));d.translatePoint(ot,Tt,w,c)?u.layerClipId&&d.hideOutsideRangePoint(ot,pt,w,c,De.xcalendar,De.ycalendar):pt.remove()}),ke.selectAll("text").call(d.textPointStyle,De,a).each(function(ot){var pt=w.c2p(ot.x),Tt=c.c2p(ot.y);S.select(this).selectAll("tspan.line").each(function(){m(S.select(this)).attr({x:pt,y:Tt})})}),ke.exit().remove()}(O,I,h);var le=M.cliponaxis===!1?null:u.layerClipId;d.setClipUrl(O,le,a),d.setClipUrl(I,le,a)}function de(oe){m(oe).attr("d","M0,0Z")}function Ce(oe){return oe.filter(function(pe){return!pe.gap&&pe.vis})}function xe(oe){return oe.filter(function(pe){return pe.vis})}function _e(oe){return oe.filter(function(pe){return!pe.gap})}function we(oe){return oe.id}function Ae(oe){if(oe.ids)return we}function $(){return!1}}K.exports=function(a,i,u,h,f,x){var v,g,y=!f,p=!!f&&f.duration>0,m=o(a,i,u);(v=h.selectAll("g.trace").data(m,function(w){return w[0].trace.uid})).enter().append("g").attr("class",function(w){return"trace scatter trace"+w[0].trace.uid}).style("stroke-miterlimit",2),v.order(),function(w,c,M){c.each(function(_){var E=T(S.select(this),"g","fills");d.setClipUrl(E,M.layerClipId,w);var L=_[0].trace,C=[];L._ownfill&&C.push("_ownFill"),L._nexttrace&&C.push("_nextFill");var O=E.selectAll("g").data(C,b);O.enter().append("g"),O.exit().each(function(I){L[I]=null}).remove(),O.order().each(function(I){L[I]=T(S.select(this),"path","js-fill")})})}(a,v,i),p?(x&&(g=x()),S.transition().duration(f.duration).ease(f.easing).each("end",function(){g&&g()}).each("interrupt",function(){g&&g()}).each(function(){h.selectAll("g.trace").each(function(w,c){n(a,c,i,w,m,this,f)})})):v.each(function(w,c){n(a,c,i,w,m,this,f)}),y&&v.exit().remove(),h.selectAll("path:not([d])").remove()}},98002:function(K,z,e){var S=e(34098);K.exports=function(k,l){var T,b,d,s,t=k.cd,o=k.xaxis,r=k.yaxis,n=[],a=t[0].trace;if(!S.hasMarkers(a)&&!S.hasText(a))return[];if(l===!1)for(T=0;T<t.length;T++)t[T].selected=0;else for(T=0;T<t.length;T++)b=t[T],d=o.c2p(b.x),s=r.c2p(b.y),b.i!==null&&l.contains([d,s],!1,T,k)?(n.push({pointNumber:b.i,x:o.c2d(b.x),y:r.c2d(b.y)}),b.selected=1):b.selected=0;return n}},565:function(K){var z=["orientation","groupnorm","stackgaps"];K.exports=function(e,S,k,l){var T=k._scatterStackOpts,b=l("stackgroup");if(b){var d=S.xaxis+S.yaxis,s=T[d];s||(s=T[d]={});var t=s[b],o=!1;t?t.traces.push(S):(t=s[b]={traceIndices:[],traces:[S]},o=!0);for(var r={orientation:S.x&&!S.y?"h":"v"},n=0;n<z.length;n++){var a=z[n],i=a+"Found";if(!t[i]){var u=e[a]!==void 0,h=a==="orientation";if((u||o)&&(t[a]=l(a,r[a]),h&&(t.fillDflt=t[a]==="h"?"tonextx":"tonexty"),u&&(t[i]=!0,!o&&(delete t.traces[0][a],h))))for(var f=0;f<t.traces.length-1;f++){var x=t.traces[f];x._input.fill!==x.fill&&(x.fill=t.fillDflt)}}}return t}}},16296:function(K,z,e){var S=e(39898),k=e(91424),l=e(73972);function T(d,s,t){k.pointStyle(d.selectAll("path.point"),s,t)}function b(d,s,t){k.textPointStyle(d.selectAll("text"),s,t)}K.exports={style:function(d){var s=S.select(d).selectAll("g.trace.scatter");s.style("opacity",function(t){return t[0].trace.opacity}),s.selectAll("g.points").each(function(t){T(S.select(this),t.trace||t[0].trace,d)}),s.selectAll("g.text").each(function(t){b(S.select(this),t.trace||t[0].trace,d)}),s.selectAll("g.trace path.js-line").call(k.lineGroupStyle),s.selectAll("g.trace path.js-fill").call(k.fillGroupStyle,d),l.getComponentMethod("errorbars","style")(s)},stylePoints:T,styleText:b,styleOnSelect:function(d,s,t){var o=s[0].trace;o.selectedpoints?(k.selectedPointStyle(t.selectAll("path.point"),o),k.selectedTextStyle(t.selectAll("text"),o)):(T(t,o,d),b(t,o,d))}}},34098:function(K,z,e){var S=e(71828);K.exports={hasLines:function(k){return k.visible&&k.mode&&k.mode.indexOf("lines")!==-1},hasMarkers:function(k){return k.visible&&(k.mode&&k.mode.indexOf("markers")!==-1||k.type==="splom")},hasText:function(k){return k.visible&&k.mode&&k.mode.indexOf("text")!==-1},isBubble:function(k){return S.isPlainObject(k.marker)&&S.isArrayOrTypedArray(k.marker.size)}}},82410:function(K,z,e){var S=e(71828);K.exports=function(k,l,T,b,d){d=d||{},b("textposition"),S.coerceFont(b,"textfont",T.font),d.noSelect||(b("selected.textfont.color"),b("unselected.textfont.color"))}},67513:function(K,z,e){var S=e(71828),k=e(73972);K.exports=function(l,T,b,d){var s,t=d("x"),o=d("y");if(k.getComponentMethod("calendars","handleTraceDefaults")(l,T,["x","y"],b),t){var r=S.minRowLength(t);o?s=Math.min(r,S.minRowLength(o)):(s=r,d("y0"),d("dy"))}else{if(!o)return 0;s=S.minRowLength(o),d("x0"),d("dx")}return T._length=s,s}},44542:function(K,z,e){var S=e(82196),k=e(50693),l=e(12663).axisHoverFormat,T=e(5386).fF,b=e(5386).si,d=e(9012),s=e(29659),t=e(87381),o=e(1426).extendFlat,r=e(30962).overrideAll,n=e(78607),a=S.line,i=S.marker,u=i.line,h=o({width:a.width,dash:{valType:"enumerated",values:n(s),dflt:"solid"}},k("line")),f=K.exports=r({x:S.x,y:S.y,z:{valType:"data_array"},text:o({},S.text,{}),texttemplate:b({},{}),hovertext:o({},S.hovertext,{}),hovertemplate:T(),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),mode:o({},S.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:S.connectgaps,line:h,marker:o({symbol:{valType:"enumerated",values:n(t),dflt:"circle",arrayOk:!0},size:o({},i.size,{dflt:8}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:o({},i.opacity,{arrayOk:!1}),colorbar:i.colorbar,line:o({width:o({},u.width,{arrayOk:!1})},k("marker.line"))},k("marker")),textposition:o({},S.textposition,{dflt:"top center"}),textfont:{color:S.textfont.color,size:S.textfont.size,family:o({},S.textfont.family,{arrayOk:!1})},opacity:d.opacity,hoverinfo:o({},d.hoverinfo)},"calc","nested");f.x.editType=f.y.editType=f.z.editType="calc+clearAxisTypes"},36563:function(K,z,e){var S=e(75225),k=e(36922);K.exports=function(l,T){var b=[{x:!1,y:!1,trace:T,t:{}}];return S(b,T),k(l,T),b}},67336:function(K,z,e){var S=e(73972);function k(l,T,b,d){if(!T||!T.visible)return null;for(var s=S.getComponentMethod("errorbars","makeComputeError")(T),t=new Array(l.length),o=0;o<l.length;o++){var r=s(+l[o],o);if(d.type==="log"){var n=d.c2l(l[o]),a=l[o]-r[0],i=l[o]+r[1];if(t[o]=[(d.c2l(a,!0)-n)*b,(d.c2l(i,!0)-n)*b],a>0){var u=d.c2l(a);d._lowerLogErrorBound||(d._lowerLogErrorBound=u),d._lowerErrorBound=Math.min(d._lowerLogErrorBound,u)}}else t[o]=[-r[0]*b,r[1]*b]}return t}K.exports=function(l,T,b){var d=[k(l.x,l.error_x,T[0],b.xaxis),k(l.y,l.error_y,T[1],b.yaxis),k(l.z,l.error_z,T[2],b.zaxis)],s=function(i){for(var u=0;u<i.length;u++)if(i[u])return i[u].length;return 0}(d);if(s===0)return null;for(var t=new Array(s),o=0;o<s;o++){for(var r=[[0,0,0],[0,0,0]],n=0;n<3;n++)if(d[n])for(var a=0;a<2;a++)r[a][n]=d[n][o][a];t[o]=r}return t}},58925:function(K,z,e){var S=e(9330).gl_line3d,k=e(9330).gl_scatter3d,l=e(9330).gl_error3d,T=e(9330).gl_mesh3d,b=e(9330).delaunay_triangulate,d=e(71828),s=e(78614),t=e(81697).formatColor,o=e(39984),r=e(29659),n=e(87381),a=e(89298),i=e(23469).appendArrayPointValue,u=e(67336);function h(c,M){this.scene=c,this.uid=M,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var f=h.prototype;function x(c){return c==null?0:c.indexOf("left")>-1?-1:c.indexOf("right")>-1?1:0}function v(c){return c==null?0:c.indexOf("top")>-1?-1:c.indexOf("bottom")>-1?1:0}function g(c,M){return M(4*c)}function y(c){return n[c]}function p(c,M,_,E,L){var C=null;if(d.isArrayOrTypedArray(c)){C=[];for(var O=0;O<M;O++)c[O]===void 0?C[O]=E:C[O]=_(c[O],L)}else C=_(c,d.identity);return C}function m(c){if(d.isArrayOrTypedArray(c)){var M=c[0];return d.isArrayOrTypedArray(M)&&(c=M),"rgb("+c.slice(0,3).map(function(_){return Math.round(255*_)})+")"}return null}function w(c){return d.isArrayOrTypedArray(c)?c.length===4&&typeof c[0]=="number"?m(c):c.map(m):null}f.handlePick=function(c){if(c.object&&(c.object===this.linePlot||c.object===this.delaunayMesh||c.object===this.textMarkers||c.object===this.scatterPlot)){var M=c.index=c.data.index;return c.object.highlight&&c.object.highlight(null),this.scatterPlot&&(c.object=this.scatterPlot,this.scatterPlot.highlight(c.data)),c.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[M]||this.textLabels[M]===0)&&(c.textLabel=this.textLabels[M]):c.textLabel=this.textLabels),c.traceCoordinate=[this.data.x[M],this.data.y[M],this.data.z[M]],!0}},f.update=function(c){var M,_,E,L,C=this.scene.glplot.gl,O=r.solid;this.data=c;var I=function(V,F){var D,U,j,J,X,Z,Y=[],W=V.fullSceneLayout,Q=V.dataScale,ne=W.xaxis,re=W.yaxis,ie=W.zaxis,se=F.marker,ge=F.line,ue=F.x||[],ce=F.y||[],le=F.z||[],de=ue.length,Ce=F.xcalendar,xe=F.ycalendar,_e=F.zcalendar;for(X=0;X<de;X++)D=ne.d2l(ue[X],0,Ce)*Q[0],U=re.d2l(ce[X],0,xe)*Q[1],j=ie.d2l(le[X],0,_e)*Q[2],Y[X]=[D,U,j];if(Array.isArray(F.text))Z=F.text;else if(F.text!==void 0)for(Z=new Array(de),X=0;X<de;X++)Z[X]=F.text;function we(He,Ve){var nt=W[He];return a.tickText(nt,nt.d2l(Ve),!0).text}var Ae=F.texttemplate;if(Ae){var $=V.fullLayout._d3locale,oe=Array.isArray(Ae),pe=oe?Math.min(Ae.length,de):de,ye=oe?function(He){return Ae[He]}:function(){return Ae};for(Z=new Array(pe),X=0;X<pe;X++){var ke={x:ue[X],y:ce[X],z:le[X]},De={xLabel:we("xaxis",ue[X]),yLabel:we("yaxis",ce[X]),zLabel:we("zaxis",le[X])},Pe={};i(Pe,F,X);var Re=F._meta||{};Z[X]=d.texttemplateString(ye(X),De,$,Pe,ke,Re)}}if(J={position:Y,mode:F.mode,text:Z},"line"in F&&(J.lineColor=t(ge,1,de),J.lineWidth=ge.width,J.lineDashes=ge.dash),"marker"in F){var fe=o(F);J.scatterColor=t(se,1,de),J.scatterSize=p(se.size,de,g,20,fe),J.scatterMarker=p(se.symbol,de,y,"●"),J.scatterLineWidth=se.line.width,J.scatterLineColor=t(se.line,1,de),J.scatterAngle=0}"textposition"in F&&(J.textOffset=function(He){var Ve=[0,0];if(Array.isArray(He))for(var nt=0;nt<He.length;nt++)Ve[nt]=[0,0],He[nt]&&(Ve[nt][0]=x(He[nt]),Ve[nt][1]=v(He[nt]));else Ve[0]=x(He),Ve[1]=v(He);return Ve}(F.textposition),J.textColor=t(F.textfont,1,de),J.textSize=p(F.textfont.size,de,d.identity,12),J.textFont=F.textfont.family,J.textAngle=0);var ve=["x","y","z"];for(J.project=[!1,!1,!1],J.projectScale=[1,1,1],J.projectOpacity=[1,1,1],X=0;X<3;++X){var Te=F.projection[ve[X]];(J.project[X]=Te.show)&&(J.projectOpacity[X]=Te.opacity,J.projectScale[X]=Te.scale)}J.errorBounds=u(F,Q,W);var ze=function(He){for(var Ve=[0,0,0],nt=[[0,0,0],[0,0,0],[0,0,0]],tt=[1,1,1],ot=0;ot<3;ot++){var pt=He[ot];pt&&pt.copy_zstyle!==!1&&He[2].visible!==!1&&(pt=He[2]),pt&&pt.visible&&(Ve[ot]=pt.width/2,nt[ot]=s(pt.color),tt[ot]=pt.thickness)}return{capSize:Ve,color:nt,lineWidth:tt}}([F.error_x,F.error_y,F.error_z]);return J.errorColor=ze.color,J.errorLineWidth=ze.lineWidth,J.errorCapSize=ze.capSize,J.delaunayAxis=F.surfaceaxis,J.delaunayColor=s(F.surfacecolor),J}(this.scene,c);"mode"in I&&(this.mode=I.mode),"lineDashes"in I&&I.lineDashes in r&&(O=r[I.lineDashes]),this.color=w(I.scatterColor)||w(I.lineColor),this.dataPoints=I.position,M={gl:this.scene.glplot.gl,position:I.position,color:I.lineColor,lineWidth:I.lineWidth||1,dashes:O[0],dashScale:O[1],opacity:c.opacity,connectGaps:c.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(M):(this.linePlot=S(M),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var N=c.opacity;if(c.marker&&c.marker.opacity!==void 0&&(N*=c.marker.opacity),_={gl:this.scene.glplot.gl,position:I.position,color:I.scatterColor,size:I.scatterSize,glyph:I.scatterMarker,opacity:N,orthographic:!0,lineWidth:I.scatterLineWidth,lineColor:I.scatterLineColor,project:I.project,projectScale:I.projectScale,projectOpacity:I.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(_):(this.scatterPlot=k(_),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),L={gl:this.scene.glplot.gl,position:I.position,glyph:I.text,color:I.textColor,size:I.textSize,angle:I.textAngle,alignment:I.textOffset,font:I.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:c.opacity},this.textLabels=c.hovertext||c.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(L):(this.textMarkers=k(L),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),E={gl:this.scene.glplot.gl,position:I.position,color:I.errorColor,error:I.errorBounds,lineWidth:I.errorLineWidth,capSize:I.errorCapSize,opacity:c.opacity},this.errorBars?I.errorBounds?this.errorBars.update(E):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):I.errorBounds&&(this.errorBars=l(E),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),I.delaunayAxis>=0){var R=function(V,F,D){var U,j=(D+1)%3,J=(D+2)%3,X=[],Z=[];for(U=0;U<V.length;++U){var Y=V[U];!isNaN(Y[j])&&isFinite(Y[j])&&!isNaN(Y[J])&&isFinite(Y[J])&&(X.push([Y[j],Y[J]]),Z.push(U))}var W=b(X);for(U=0;U<W.length;++U)for(var Q=W[U],ne=0;ne<Q.length;++ne)Q[ne]=Z[Q[ne]];return{positions:V,cells:W,meshColor:F}}(I.position,I.delaunayColor,I.delaunayAxis);R.opacity=c.opacity,this.delaunayMesh?this.delaunayMesh.update(R):(R.gl=C,this.delaunayMesh=T(R),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},f.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},K.exports=function(c,M){var _=new h(c,M.uid);return _.update(M),_}},21428:function(K,z,e){var S=e(73972),k=e(71828),l=e(34098),T=e(49508),b=e(11058),d=e(82410),s=e(44542);K.exports=function(t,o,r,n){function a(y,p){return k.coerce(t,o,s,y,p)}var i=function(y,p,m,w){var c=0,M=m("x"),_=m("y"),E=m("z");return S.getComponentMethod("calendars","handleTraceDefaults")(y,p,["x","y","z"],w),M&&_&&E&&(c=Math.min(M.length,_.length,E.length),p._length=p._xlength=p._ylength=p._zlength=c),c}(t,o,a,n);if(i){a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),a("mode"),l.hasLines(o)&&(a("connectgaps"),b(t,o,r,n,a)),l.hasMarkers(o)&&T(t,o,r,n,a,{noSelect:!0,noAngle:!0}),l.hasText(o)&&(a("texttemplate"),d(t,o,n,a,{noSelect:!0}));var u=(o.line||{}).color,h=(o.marker||{}).color;a("surfaceaxis")>=0&&a("surfacecolor",u||h);for(var f=["x","y","z"],x=0;x<3;++x){var v="projection."+f[x];a(v+".show")&&(a(v+".opacity"),a(v+".scale"))}var g=S.getComponentMethod("errorbars","supplyDefaults");g(t,o,u||h||r,{axis:"z"}),g(t,o,u||h||r,{axis:"y",inherit:"z"}),g(t,o,u||h||r,{axis:"x",inherit:"z"})}else o.visible=!1}},13551:function(K,z,e){K.exports={plot:e(58925),attributes:e(44542),markerSymbols:e(87381),supplyDefaults:e(21428),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e(36563),moduleType:"trace",name:"scatter3d",basePlotModule:e(58547),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},97001:function(K,z,e){var S=e(82196),k=e(9012),l=e(5386).fF,T=e(5386).si,b=e(50693),d=e(1426).extendFlat,s=S.marker,t=S.line,o=s.line;K.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:d({},S.mode,{dflt:"markers"}),text:d({},S.text,{}),texttemplate:T({editType:"plot"},{keys:["a","b","text"]}),hovertext:d({},S.hovertext,{}),line:{color:t.color,width:t.width,dash:t.dash,backoff:t.backoff,shape:d({},t.shape,{values:["linear","spline"]}),smoothing:t.smoothing,editType:"calc"},connectgaps:S.connectgaps,fill:d({},S.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:S.fillcolor,marker:d({symbol:s.symbol,opacity:s.opacity,maxdisplayed:s.maxdisplayed,angle:s.angle,angleref:s.angleref,standoff:s.standoff,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode,line:d({width:o.width,editType:"calc"},b("marker.line")),gradient:s.gradient,editType:"calc"},b("marker")),textfont:S.textfont,textposition:S.textposition,selected:S.selected,unselected:S.unselected,hoverinfo:d({},k.hoverinfo,{flags:["a","b","text","name"]}),hoveron:S.hoveron,hovertemplate:l()}},34618:function(K,z,e){var S=e(92770),k=e(36922),l=e(75225),T=e(66279),b=e(47761).calcMarkerSize,d=e(22882);K.exports=function(s,t){var o=t._carpetTrace=d(s,t);if(o&&o.visible&&o.visible!=="legendonly"){var r;t.xaxis=o.xaxis,t.yaxis=o.yaxis;var n,a,i=t._length,u=new Array(i),h=!1;for(r=0;r<i;r++)if(n=t.a[r],a=t.b[r],S(n)&&S(a)){var f=o.ab2xy(+n,+a,!0),x=o.isVisible(+n,+a);x||(h=!0),u[r]={x:f[0],y:f[1],a:n,b:a,vis:x}}else u[r]={x:!1,y:!1};return t._needsCull=h,u[0].carpet=o,u[0].trace=t,b(t,i),k(s,t),l(u,t),T(u,t),u}}},98965:function(K,z,e){var S=e(71828),k=e(47581),l=e(34098),T=e(49508),b=e(11058),d=e(94039),s=e(82410),t=e(28908),o=e(97001);K.exports=function(r,n,a,i){function u(g,y){return S.coerce(r,n,o,g,y)}u("carpet"),n.xaxis="x",n.yaxis="y";var h=u("a"),f=u("b"),x=Math.min(h.length,f.length);if(x){n._length=x,u("text"),u("texttemplate"),u("hovertext"),u("mode",x<k.PTS_LINESONLY?"lines+markers":"lines"),l.hasLines(n)&&(b(r,n,a,i,u,{backoff:!0}),d(r,n,u),u("connectgaps")),l.hasMarkers(n)&&T(r,n,a,i,u,{gradient:!0}),l.hasText(n)&&s(r,n,i,u);var v=[];(l.hasMarkers(n)||l.hasText(n))&&(u("marker.maxdisplayed"),v.push("points")),u("fill"),n.fill!=="none"&&(t(r,n,a,u),l.hasLines(n)||d(r,n,u)),n.fill!=="tonext"&&n.fill!=="toself"||v.push("fills"),u("hoveron",v.join("+")||"points")!=="fills"&&u("hovertemplate"),S.coerceSelectionMarkerOpacity(n,u)}else n.visible=!1}},16165:function(K){K.exports=function(z,e,S,k,l){var T=k[l];return z.a=T.a,z.b=T.b,z.y=T.y,z}},48953:function(K){K.exports=function(z,e){var S={},k=e._carpet,l=k.ab2ij([z.a,z.b]),T=Math.floor(l[0]),b=l[0]-T,d=Math.floor(l[1]),s=l[1]-d,t=k.evalxy([],T,d,b,s);return S.yLabel=t[1].toFixed(3),S}},22931:function(K,z,e){var S=e(33720),k=e(71828).fillText;K.exports=function(l,T,b,d){var s=S(l,T,b,d);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0){var o=1-t.y0/l.ya._length,r=l.xa._length,n=r*o/2,a=r-n;return t.x0=Math.max(Math.min(t.x0,a),n),t.x1=Math.max(Math.min(t.x1,a),n),s}var i=t.cd[t.index];t.a=i.a,t.b=i.b,t.xLabelVal=void 0,t.yLabelVal=void 0;var u=t.trace,h=u._carpet,f=u._module.formatLabels(i,u);t.yLabel=f.yLabel,delete t.text;var x=[];if(!u.hovertemplate){var v=(i.hi||u.hoverinfo).split("+");v.indexOf("all")!==-1&&(v=["a","b","text"]),v.indexOf("a")!==-1&&g(h.aaxis,i.a),v.indexOf("b")!==-1&&g(h.baxis,i.b),x.push("y: "+t.yLabel),v.indexOf("text")!==-1&&k(i,u,x),t.extraText=x.join("<br>")}return s}function g(y,p){var m;m=y.labelprefix&&y.labelprefix.length>0?y.labelprefix.replace(/ = $/,""):y._hovertitle,x.push(m+": "+p.toFixed(3)+y.labelsuffix)}}},46858:function(K,z,e){K.exports={attributes:e(97001),supplyDefaults:e(98965),colorbar:e(4898),formatLabels:e(48953),calc:e(34618),plot:e(1913),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(22931),selectPoints:e(98002),eventData:e(16165),moduleType:"trace",name:"scattercarpet",basePlotModule:e(93612),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},1913:function(K,z,e){var S=e(32663),k=e(89298),l=e(91424);K.exports=function(T,b,d,s){var t,o,r,n=d[0][0].carpet,a=k.getFromId(T,n.xaxis||"x"),i=k.getFromId(T,n.yaxis||"y"),u={xaxis:a,yaxis:i,plot:b.plot};for(t=0;t<d.length;t++)(o=d[t][0].trace)._xA=a,o._yA=i;for(S(T,u,d,s),t=0;t<d.length;t++)o=d[t][0].trace,r=s.selectAll("g.trace"+o.uid+" .js-line"),l.setClipUrl(r,d[t][0].carpet._clipPathId,T)}},19316:function(K,z,e){var S=e(5386).fF,k=e(5386).si,l=e(82196),T=e(9012),b=e(50693),d=e(79952).P,s=e(1426).extendFlat,t=e(30962).overrideAll,o=l.marker,r=l.line,n=o.line;K.exports=t({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:s({},l.mode,{dflt:"markers"}),text:s({},l.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:s({},l.hovertext,{}),textfont:l.textfont,textposition:l.textposition,line:{color:r.color,width:r.width,dash:d},connectgaps:l.connectgaps,marker:s({symbol:o.symbol,opacity:o.opacity,angle:o.angle,angleref:s({},o.angleref,{values:["previous","up","north"]}),standoff:o.standoff,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,colorbar:o.colorbar,line:s({width:n.width},b("marker.line")),gradient:o.gradient},b("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:l.fillcolor,selected:l.selected,unselected:l.unselected,hoverinfo:s({},T.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:S()},"calc","nested")},84622:function(K,z,e){var S=e(92770),k=e(50606).BADNUM,l=e(36922),T=e(75225),b=e(66279),d=e(71828)._;function s(t){return t&&typeof t=="string"}K.exports=function(t,o){var r,n=Array.isArray(o.locations),a=n?o.locations.length:o._length,i=new Array(a);r=o.geojson?function(g){return s(g)||S(g)}:s;for(var u=0;u<a;u++){var h=i[u]={};if(n){var f=o.locations[u];h.loc=r(f)?f:null}else{var x=o.lon[u],v=o.lat[u];S(x)&&S(v)?h.lonlat=[+x,+v]:h.lonlat=[k,k]}}return T(i,o),l(t,o),b(i,o),a&&(i[0].t={labels:{lat:d(t,"lat:")+" ",lon:d(t,"lon:")+" "}}),i}},10659:function(K,z,e){var S=e(71828),k=e(34098),l=e(49508),T=e(11058),b=e(82410),d=e(28908),s=e(19316);K.exports=function(t,o,r,n){function a(g,y){return S.coerce(t,o,s,g,y)}var i,u=a("locations");if(u&&u.length){var h,f=a("geojson");(typeof f=="string"&&f!==""||S.isPlainObject(f))&&(h="geojson-id"),a("locationmode",h)==="geojson-id"&&a("featureidkey"),i=u.length}else{var x=a("lon")||[],v=a("lat")||[];i=Math.min(x.length,v.length)}i?(o._length=i,a("text"),a("hovertext"),a("hovertemplate"),a("mode"),k.hasLines(o)&&(T(t,o,r,n,a),a("connectgaps")),k.hasMarkers(o)&&l(t,o,r,n,a,{gradient:!0}),k.hasText(o)&&(a("texttemplate"),b(t,o,n,a)),a("fill"),o.fill!=="none"&&d(t,o,r,a),S.coerceSelectionMarkerOpacity(o,a)):o.visible=!1}},84084:function(K){K.exports=function(z,e,S,k,l){z.lon=e.lon,z.lat=e.lat,z.location=e.loc?e.loc:null;var T=k[l];return T.fIn&&T.fIn.properties&&(z.properties=T.fIn.properties),z}},82719:function(K,z,e){var S=e(89298);K.exports=function(k,l,T){var b={},d=T[l.geo]._subplot.mockAxis,s=k.lonlat;return b.lonLabel=S.tickText(d,d.c2l(s[0]),!0).text,b.latLabel=S.tickText(d,d.c2l(s[1]),!0).text,b}},14977:function(K,z,e){var S=e(30211),k=e(50606).BADNUM,l=e(34603),T=e(71828).fillText,b=e(19316);K.exports=function(d,s,t){var o=d.cd,r=o[0].trace,n=d.xa,a=d.ya,i=d.subplot,u=i.projection.isLonLatOverEdges,h=i.project;if(S.getClosest(o,function(m){var w=m.lonlat;if(w[0]===k||u(w))return 1/0;var c=h(w),M=h([s,t]),_=Math.abs(c[0]-M[0]),E=Math.abs(c[1]-M[1]),L=Math.max(3,m.mrc||0);return Math.max(Math.sqrt(_*_+E*E)-L,1-3/L)},d),d.index!==!1){var f=o[d.index],x=f.lonlat,v=[n.c2p(x),a.c2p(x)],g=f.mrc||1;d.x0=v[0]-g,d.x1=v[0]+g,d.y0=v[1]-g,d.y1=v[1]+g,d.loc=f.loc,d.lon=x[0],d.lat=x[1];var y={};y[r.geo]={_subplot:i};var p=r._module.formatLabels(f,r,y);return d.lonLabel=p.lonLabel,d.latLabel=p.latLabel,d.color=l(r,f),d.extraText=function(m,w,c,M){if(!m.hovertemplate){var _=w.hi||m.hoverinfo,E=_==="all"?b.hoverinfo.flags:_.split("+"),L=E.indexOf("location")!==-1&&Array.isArray(m.locations),C=E.indexOf("lon")!==-1,O=E.indexOf("lat")!==-1,I=E.indexOf("text")!==-1,N=[];return L?N.push(w.loc):C&&O?N.push("("+R(c.latLabel)+", "+R(c.lonLabel)+")"):C?N.push(M.lon+R(c.lonLabel)):O&&N.push(M.lat+R(c.latLabel)),I&&T(w,m,N),N.join("<br>")}function R(V){return V+"°"}}(r,f,d,o[0].t.labels),d.hovertemplate=r.hovertemplate,[d]}}},17988:function(K,z,e){K.exports={attributes:e(19316),supplyDefaults:e(10659),colorbar:e(4898),formatLabels:e(82719),calc:e(84622),calcGeoJSON:e(89171).calcGeoJSON,plot:e(89171).plot,style:e(33095),styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(14977),eventData:e(84084),selectPoints:e(20548),moduleType:"trace",name:"scattergeo",basePlotModule:e(44622),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},89171:function(K,z,e){var S=e(39898),k=e(71828),l=e(90973).getTopojsonFeatures,T=e(18214),b=e(41327),d=e(71739).findExtremes,s=e(50606).BADNUM,t=e(47761).calcMarkerSize,o=e(34098),r=e(33095);K.exports={calcGeoJSON:function(n,a){var i,u,h=n[0].trace,f=a[h.geo],x=f._subplot,v=h._length;if(Array.isArray(h.locations)){var g=h.locationmode,y=g==="geojson-id"?b.extractTraceFeature(n):l(h,x.topojson);for(i=0;i<v;i++){u=n[i];var p=g==="geojson-id"?u.fOut:b.locationToFeature(g,u.loc,y);u.lonlat=p?p.properties.ct:[s,s]}}var m,w,c={padded:!0};if(f.fitbounds==="geojson"&&h.locationmode==="geojson-id"){var M=b.computeBbox(b.getTraceGeojson(h));m=[M[0],M[2]],w=[M[1],M[3]]}else{for(m=new Array(v),w=new Array(v),i=0;i<v;i++)u=n[i],m[i]=u.lonlat[0],w[i]=u.lonlat[1];c.ppad=t(h,v)}h._extremes.lon=d(f.lonaxis._ax,m,c),h._extremes.lat=d(f.lataxis._ax,w,c)},plot:function(n,a,i){var u=a.layers.frontplot.select(".scatterlayer"),h=k.makeTraceGroups(u,i,"trace scattergeo");function f(x,v){x.lonlat[0]===s&&S.select(v).remove()}h.selectAll("*").remove(),h.each(function(x){var v=S.select(this),g=x[0].trace;if(o.hasLines(g)||g.fill!=="none"){var y=T.calcTraceToLineCoords(x),p=g.fill!=="none"?T.makePolygon(y):T.makeLine(y);v.selectAll("path.js-line").data([{geojson:p,trace:g}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}o.hasMarkers(g)&&v.selectAll("path.point").data(k.identity).enter().append("path").classed("point",!0).each(function(m){f(m,this)}),o.hasText(g)&&v.selectAll("g").data(k.identity).enter().append("g").append("text").each(function(m){f(m,this)}),r(n,x)})}}},20548:function(K,z,e){var S=e(34098),k=e(50606).BADNUM;K.exports=function(l,T){var b,d,s,t,o,r=l.cd,n=l.xaxis,a=l.yaxis,i=[],u=r[0].trace;if(!S.hasMarkers(u)&&!S.hasText(u))return[];if(T===!1)for(o=0;o<r.length;o++)r[o].selected=0;else for(o=0;o<r.length;o++)(d=(b=r[o]).lonlat)[0]!==k&&(s=n.c2p(d),t=a.c2p(d),T.contains([s,t],null,o,l)?(i.push({pointNumber:o,lon:d[0],lat:d[1]}),b.selected=1):b.selected=0);return i}},33095:function(K,z,e){var S=e(39898),k=e(91424),l=e(7901),T=e(16296),b=T.stylePoints,d=T.styleText;K.exports=function(s,t){t&&function(o,r){var n=r[0].trace,a=r[0].node3;a.style("opacity",r[0].trace.opacity),b(a,n,o),d(a,n,o),a.selectAll("path.js-line").style("fill","none").each(function(i){var u=S.select(this),h=i.trace,f=h.line||{};u.call(l.stroke,f.color).call(k.dashLine,f.dash||"",f.width||0),h.fill!=="none"&&u.call(l.fill,h.fillcolor)})}(s,t)}},42341:function(K,z,e){var S=e(9012),k=e(82196),l=e(12663).axisHoverFormat,T=e(50693),b=e(78607),d=e(1426).extendFlat,s=e(30962).overrideAll,t=e(78232).DASHES,o=k.line,r=k.marker,n=r.line,a=K.exports=s({x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),text:k.text,hovertext:k.hovertext,textposition:k.textposition,textfont:k.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:o.color,width:o.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:b(t),dflt:"solid"}},marker:d({},T("marker"),{symbol:r.symbol,angle:r.angle,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:d({},T("marker.line"),{width:n.width})}),connectgaps:k.connectgaps,fill:d({},k.fill,{dflt:"none"}),fillcolor:k.fillcolor,selected:{marker:k.selected.marker,textfont:k.selected.textfont},unselected:{marker:k.unselected.marker,textfont:k.unselected.textfont},opacity:S.opacity},"calc","nested");a.x.editType=a.y.editType=a.x0.editType=a.y0.editType="calc+clearAxisTypes",a.hovertemplate=k.hovertemplate,a.texttemplate=k.texttemplate},72156:function(K,z,e){var S=e(20794);K.exports={moduleType:"trace",name:"scattergl",basePlotModule:e(93612),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e(42341),supplyDefaults:e(47148),crossTraceDefaults:e(34936),colorbar:e(4898),formatLabels:e(68101),calc:e(45032),hoverPoints:S.hoverPoints,selectPoints:e(58147),meta:{}}},45032:function(K,z,e){var S=e(88294),k=e(71828),l=e(41675),T=e(71739).findExtremes,b=e(42973),d=e(47761),s=d.calcMarkerSize,t=d.calcAxisExpansion,o=d.setFirstScatter,r=e(36922),n=e(19635),a=e(38967),i=e(50606).BADNUM,u=e(78232).TOO_MANY_POINTS;function h(f,x,v){var g=f._extremes[x._id],y=T(x,v._bnds,{padded:!0});g.min=g.min.concat(y.min),g.max=g.max.concat(y.max)}K.exports=function(f,x){var v,g=f._fullLayout,y=x._xA=l.getFromId(f,x.xaxis,"x"),p=x._yA=l.getFromId(f,x.yaxis,"y"),m=g._plots[x.xaxis+x.yaxis],w=x._length,c=w>=u,M=2*w,_={},E=y.makeCalcdata(x,"x"),L=p.makeCalcdata(x,"y"),C=b(x,y,"x",E),O=b(x,p,"y",L),I=C.vals,N=O.vals;x._x=I,x._y=N,x.xperiodalignment&&(x._origX=E,x._xStarts=C.starts,x._xEnds=C.ends),x.yperiodalignment&&(x._origY=L,x._yStarts=O.starts,x._yEnds=O.ends);var R=new Array(M),V=new Array(w);for(v=0;v<w;v++)R[2*v]=I[v]===i?NaN:I[v],R[2*v+1]=N[v]===i?NaN:N[v],V[v]=v;if(y.type==="log")for(v=0;v<M;v+=2)R[v]=y.c2l(R[v]);if(p.type==="log")for(v=1;v<M;v+=2)R[v]=p.c2l(R[v]);c&&y.type!=="log"&&p.type!=="log"?_.tree=S(R):_.ids=V,r(f,x);var F,D=function(j,J,X,Z,Y,W){var Q=n.style(j,X);if(Q.marker&&(Q.marker.positions=Z),Q.line&&Z.length>1&&k.extendFlat(Q.line,n.linePositions(j,X,Z)),Q.errorX||Q.errorY){var ne=n.errorBarPositions(j,X,Z,Y,W);Q.errorX&&k.extendFlat(Q.errorX,ne.x),Q.errorY&&k.extendFlat(Q.errorY,ne.y)}return Q.text&&(k.extendFlat(Q.text,{positions:Z},n.textPosition(j,X,Q.text,Q.marker)),k.extendFlat(Q.textSel,{positions:Z},n.textPosition(j,X,Q.text,Q.markerSel)),k.extendFlat(Q.textUnsel,{positions:Z},n.textPosition(j,X,Q.text,Q.markerUnsel))),Q}(f,0,x,R,I,N),U=a(f,m);return o(g,x),c?D.marker&&(F=D.marker.sizeAvg||Math.max(D.marker.size,3)):F=s(x,w),t(f,x,y,p,I,N,F),D.errorX&&h(x,y,D.errorX),D.errorY&&h(x,p,D.errorY),D.fill&&!U.fill2d&&(U.fill2d=!0),D.marker&&!U.scatter2d&&(U.scatter2d=!0),D.line&&!U.line2d&&(U.line2d=!0),!D.errorX&&!D.errorY||U.error2d||(U.error2d=!0),D.text&&!U.glText&&(U.glText=!0),D.marker&&(D.marker.snap=w),U.lineOptions.push(D.line),U.errorXOptions.push(D.errorX),U.errorYOptions.push(D.errorY),U.fillOptions.push(D.fill),U.markerOptions.push(D.marker),U.markerSelectedOptions.push(D.markerSel),U.markerUnselectedOptions.push(D.markerUnsel),U.textOptions.push(D.text),U.textSelectedOptions.push(D.textSel),U.textUnselectedOptions.push(D.textUnsel),U.selectBatch.push([]),U.unselectBatch.push([]),_._scene=U,_.index=U.count,_.x=I,_.y=N,_.positions=R,U.count++,[{x:!1,y:!1,t:_,trace:x}]}},78232:function(K){K.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},19635:function(K,z,e){var S=e(92770),k=e(82019),l=e(25075),T=e(73972),b=e(71828),d=e(91424),s=e(41675),t=e(81697).formatColor,o=e(34098),r=e(39984),n=e(68645),a=e(78232),i=e(37822).DESELECTDIM,u={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},h=e(23469).appendArrayPointValue;function f(E,L){var C,O=E._fullLayout,I=L._length,N=L.textfont,R=L.textposition,V=Array.isArray(R)?R:[R],F=N.color,D=N.size,U=N.family,j={},J=E._context.plotGlPixelRatio,X=L.texttemplate;if(X){j.text=[];var Z=O._d3locale,Y=Array.isArray(X),W=Y?Math.min(X.length,I):I,Q=Y?function(ce){return X[ce]}:function(){return X};for(C=0;C<W;C++){var ne={i:C},re=L._module.formatLabels(ne,L,O),ie={};h(ie,L,C);var se=L._meta||{};j.text.push(b.texttemplateString(Q(C),re,Z,ie,ne,se))}}else Array.isArray(L.text)&&L.text.length<I?j.text=L.text.slice():j.text=L.text;if(Array.isArray(j.text))for(C=j.text.length;C<I;C++)j.text[C]="";for(j.opacity=L.opacity,j.font={},j.align=[],j.baseline=[],C=0;C<V.length;C++){var ge=V[C].split(/\s+/);switch(ge[1]){case"left":j.align.push("right");break;case"right":j.align.push("left");break;default:j.align.push(ge[1])}switch(ge[0]){case"top":j.baseline.push("bottom");break;case"bottom":j.baseline.push("top");break;default:j.baseline.push(ge[0])}}if(Array.isArray(F))for(j.color=new Array(I),C=0;C<I;C++)j.color[C]=F[C];else j.color=F;if(b.isArrayOrTypedArray(D)||Array.isArray(U))for(j.font=new Array(I),C=0;C<I;C++){var ue=j.font[C]={};ue.size=(b.isTypedArray(D)?D[C]:Array.isArray(D)?S(D[C])?D[C]:0:D)*J,ue.family=Array.isArray(U)?U[C]:U}else j.font={size:D*J,family:U};return j}function x(E,L){var C,O,I=L._length,N=L.marker,R={},V=b.isArrayOrTypedArray(N.symbol),F=b.isArrayOrTypedArray(N.angle),D=b.isArrayOrTypedArray(N.color),U=b.isArrayOrTypedArray(N.line.color),j=b.isArrayOrTypedArray(N.opacity),J=b.isArrayOrTypedArray(N.size),X=b.isArrayOrTypedArray(N.line.width);if(V||(O=n.isOpenSymbol(N.symbol)),V||D||U||j||F){R.symbols=new Array(I),R.angles=new Array(I),R.colors=new Array(I),R.borderColors=new Array(I);var Z=N.symbol,Y=N.angle,W=t(N,N.opacity,I),Q=t(N.line,N.opacity,I);if(!Array.isArray(Q[0])){var ne=Q;for(Q=Array(I),C=0;C<I;C++)Q[C]=ne}if(!Array.isArray(W[0])){var re=W;for(W=Array(I),C=0;C<I;C++)W[C]=re}if(!Array.isArray(Z)){var ie=Z;for(Z=Array(I),C=0;C<I;C++)Z[C]=ie}if(!Array.isArray(Y)){var se=Y;for(Y=Array(I),C=0;C<I;C++)Y[C]=se}for(R.symbols=Z,R.angles=Y,R.colors=W,R.borderColors=Q,C=0;C<I;C++)V&&(O=n.isOpenSymbol(N.symbol[C])),O&&(Q[C]=W[C].slice(),W[C]=W[C].slice(),W[C][3]=0);for(R.opacity=L.opacity,R.markers=new Array(I),C=0;C<I;C++)R.markers[C]=_({mx:R.symbols[C],ma:R.angles[C]},L)}else O?(R.color=l(N.color,"uint8"),R.color[3]=0,R.borderColor=l(N.color,"uint8")):(R.color=l(N.color,"uint8"),R.borderColor=l(N.line.color,"uint8")),R.opacity=L.opacity*N.opacity,R.marker=_({mx:N.symbol,ma:N.angle},L);var ge,ue=r(L,1);if(J||X){var ce,le=R.sizes=new Array(I),de=R.borderSizes=new Array(I),Ce=0;if(J){for(C=0;C<I;C++)le[C]=ue(N.size[C]),Ce+=le[C];ce=Ce/I}else for(ge=ue(N.size),C=0;C<I;C++)le[C]=ge;if(X)for(C=0;C<I;C++)de[C]=N.line.width[C];else for(ge=N.line.width,C=0;C<I;C++)de[C]=ge;R.sizeAvg=ce}else R.size=ue(N&&N.size||10),R.borderSizes=ue(N.line.width);return R}function v(E,L,C){var O=L.marker,I={};return C&&(C.marker&&C.marker.symbol?I=x(0,b.extendFlat({},O,C.marker)):C.marker&&(C.marker.size&&(I.size=C.marker.size),C.marker.color&&(I.colors=C.marker.color),C.marker.opacity!==void 0&&(I.opacity=C.marker.opacity))),I}function g(E,L,C){var O={};if(!C)return O;if(C.textfont){var I={opacity:1,text:L.text,texttemplate:L.texttemplate,textposition:L.textposition,textfont:b.extendFlat({},L.textfont)};C.textfont&&b.extendFlat(I.textfont,C.textfont),O=f(E,I)}return O}function y(E,L,C){var O={capSize:2*L.width*C,lineWidth:L.thickness*C,color:L.color};return L.copy_ystyle&&(O=E.error_y),O}var p=a.SYMBOL_SDF_SIZE,m=a.SYMBOL_SIZE,w=a.SYMBOL_STROKE,c={},M=d.symbolFuncs[0](.05*m);function _(E,L){var C,O,I=E.mx;if(I==="circle")return null;var N=d.symbolNumber(I),R=d.symbolFuncs[N%100],V=!!d.symbolNoDot[N%100],F=!!d.symbolNoFill[N%100],D=n.isDotSymbol(I);if(E.ma&&(I+="_"+E.ma),c[I])return c[I];var U=d.getMarkerAngle(E,L);return C=D&&!V?R(1.1*m,U)+M:R(m,U),O=k(C,{w:p,h:p,viewBox:[-m,-m,m,m],stroke:F?w:-w}),c[I]=O,O||null}K.exports={style:function(E,L){var C,O={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},I=E._context.plotGlPixelRatio;if(L.visible!==!0)return O;if(o.hasText(L)&&(O.text=f(E,L),O.textSel=g(E,L,L.selected),O.textUnsel=g(E,L,L.unselected)),o.hasMarkers(L)&&(O.marker=x(0,L),O.markerSel=v(0,L,L.selected),O.markerUnsel=v(0,L,L.unselected),!L.unselected&&b.isArrayOrTypedArray(L.marker.opacity))){var N=L.marker.opacity;for(O.markerUnsel.opacity=new Array(N.length),C=0;C<N.length;C++)O.markerUnsel.opacity[C]=i*N[C]}if(o.hasLines(L)){O.line={overlay:!0,thickness:L.line.width*I,color:L.line.color,opacity:L.opacity};var R=(a.DASHES[L.line.dash]||[1]).slice();for(C=0;C<R.length;++C)R[C]*=L.line.width*I;O.line.dashes=R}return L.error_x&&L.error_x.visible&&(O.errorX=y(L,L.error_x,I)),L.error_y&&L.error_y.visible&&(O.errorY=y(L,L.error_y,I)),L.fill&&L.fill!=="none"&&(O.fill={closed:!0,fill:L.fillcolor,thickness:0}),O},markerStyle:x,markerSelection:v,linePositions:function(E,L,C){var O,I,N=C.length,R=N/2;if(o.hasLines(L)&&R)if(L.line.shape==="hv"){for(O=[],I=0;I<R-1;I++)isNaN(C[2*I])||isNaN(C[2*I+1])?O.push(NaN,NaN,NaN,NaN):(O.push(C[2*I],C[2*I+1]),isNaN(C[2*I+2])||isNaN(C[2*I+3])?O.push(NaN,NaN):O.push(C[2*I+2],C[2*I+1]));O.push(C[N-2],C[N-1])}else if(L.line.shape==="hvh"){for(O=[],I=0;I<R-1;I++)if(isNaN(C[2*I])||isNaN(C[2*I+1])||isNaN(C[2*I+2])||isNaN(C[2*I+3]))isNaN(C[2*I])||isNaN(C[2*I+1])?O.push(NaN,NaN):O.push(C[2*I],C[2*I+1]),O.push(NaN,NaN);else{var V=(C[2*I]+C[2*I+2])/2;O.push(C[2*I],C[2*I+1],V,C[2*I+1],V,C[2*I+3])}O.push(C[N-2],C[N-1])}else if(L.line.shape==="vhv"){for(O=[],I=0;I<R-1;I++)if(isNaN(C[2*I])||isNaN(C[2*I+1])||isNaN(C[2*I+2])||isNaN(C[2*I+3]))isNaN(C[2*I])||isNaN(C[2*I+1])?O.push(NaN,NaN):O.push(C[2*I],C[2*I+1]),O.push(NaN,NaN);else{var F=(C[2*I+1]+C[2*I+3])/2;O.push(C[2*I],C[2*I+1],C[2*I],F,C[2*I+2],F)}O.push(C[N-2],C[N-1])}else if(L.line.shape==="vh"){for(O=[],I=0;I<R-1;I++)isNaN(C[2*I])||isNaN(C[2*I+1])?O.push(NaN,NaN,NaN,NaN):(O.push(C[2*I],C[2*I+1]),isNaN(C[2*I+2])||isNaN(C[2*I+3])?O.push(NaN,NaN):O.push(C[2*I],C[2*I+3]));O.push(C[N-2],C[N-1])}else O=C;var D=!1;for(I=0;I<O.length;I++)if(isNaN(O[I])){D=!0;break}var U=D||O.length>a.TOO_MANY_POINTS||o.hasMarkers(L)?"rect":"round";if(D&&L.connectgaps){var j=O[0],J=O[1];for(I=0;I<O.length;I+=2)isNaN(O[I])||isNaN(O[I+1])?(O[I]=j,O[I+1]=J):(j=O[I],J=O[I+1])}return{join:U,positions:O}},errorBarPositions:function(E,L,C,O,I){var N=T.getComponentMethod("errorbars","makeComputeError"),R=s.getFromId(E,L.xaxis,"x"),V=s.getFromId(E,L.yaxis,"y"),F=C.length/2,D={};function U(j,J){var X=J._id.charAt(0),Z=L["error_"+X];if(Z&&Z.visible&&(J.type==="linear"||J.type==="log")){for(var Y=N(Z),W={x:0,y:1}[X],Q={x:[0,1,2,3],y:[2,3,0,1]}[X],ne=new Float64Array(4*F),re=1/0,ie=-1/0,se=0,ge=0;se<F;se++,ge+=4){var ue=j[se];if(S(ue)){var ce=C[2*se+W],le=Y(ue,se),de=le[0],Ce=le[1];if(S(de)&&S(Ce)){var xe=ue-de,_e=ue+Ce;ne[ge+Q[0]]=ce-J.c2l(xe),ne[ge+Q[1]]=J.c2l(_e)-ce,ne[ge+Q[2]]=0,ne[ge+Q[3]]=0,re=Math.min(re,ue-de),ie=Math.max(ie,ue+Ce)}}}D[X]={positions:C,errors:ne,_bnds:[re,ie]}}}return U(O,R),U(I,V),D},textPosition:function(E,L,C,O){var I,N=L._length,R={};if(o.hasMarkers(L)){var V=C.font,F=C.align,D=C.baseline;for(R.offset=new Array(N),I=0;I<N;I++){var U=O.sizes?O.sizes[I]:O.size,j=Array.isArray(V)?V[I].size:V.size,J=Array.isArray(F)?F.length>1?F[I]:F[0]:F,X=Array.isArray(D)?D.length>1?D[I]:D[0]:D,Z=u[J],Y=u[X],W=U?U/.8+1:0,Q=-Y*W-.5*Y;R.offset[I]=[Z*W/j,Q/j]}}return R}}},47148:function(K,z,e){var S=e(71828),k=e(73972),l=e(68645),T=e(42341),b=e(47581),d=e(34098),s=e(67513),t=e(73927),o=e(49508),r=e(11058),n=e(28908),a=e(82410);K.exports=function(i,u,h,f){function x(M,_){return S.coerce(i,u,T,M,_)}var v=!!i.marker&&l.isOpenSymbol(i.marker.symbol),g=d.isBubble(i),y=s(i,u,f,x);if(y){t(i,u,f,x),x("xhoverformat"),x("yhoverformat");var p=y<b.PTS_LINESONLY?"lines+markers":"lines";x("text"),x("hovertext"),x("hovertemplate"),x("mode",p),d.hasLines(u)&&(x("connectgaps"),r(i,u,h,f,x),x("line.shape")),d.hasMarkers(u)&&(o(i,u,h,f,x,{noAngleRef:!0,noStandOff:!0}),x("marker.line.width",v||g?1:0)),d.hasText(u)&&(x("texttemplate"),a(i,u,f,x));var m=(u.line||{}).color,w=(u.marker||{}).color;x("fill"),u.fill!=="none"&&n(i,u,h,x);var c=k.getComponentMethod("errorbars","supplyDefaults");c(i,u,m||w||h,{axis:"y"}),c(i,u,m||w||h,{axis:"x",inherit:"y"}),S.coerceSelectionMarkerOpacity(u,x)}else u.visible=!1}},5345:function(K,z,e){var S=e(71828),k=e(7901),l=e(37822).DESELECTDIM;K.exports={styleTextSelection:function(T){var b,d,s=T[0],t=s.trace,o=s.t,r=o._scene,n=o.index,a=r.selectBatch[n],i=r.unselectBatch[n],u=r.textOptions[n],h=r.textSelectedOptions[n]||{},f=r.textUnselectedOptions[n]||{},x=S.extendFlat({},u);if(a.length||i.length){var v=h.color,g=f.color,y=u.color,p=Array.isArray(y);for(x.color=new Array(t._length),b=0;b<a.length;b++)d=a[b],x.color[d]=v||(p?y[d]:y);for(b=0;b<i.length;b++){d=i[b];var m=p?y[d]:y;x.color[d]=g||(v?m:k.addOpacity(m,l))}}r.glText[n].update(x)}}},68101:function(K,z,e){var S=e(8225);K.exports=function(k,l,T){var b=k.i;return"x"in k||(k.x=l._x[b]),"y"in k||(k.y=l._y[b]),S(k,l,T)}},68645:function(K,z,e){var S=e(78232);z.isOpenSymbol=function(k){return typeof k=="string"?S.OPEN_RE.test(k):k%200>100},z.isDotSymbol=function(k){return typeof k=="string"?S.DOT_RE.test(k):k>200}},20794:function(K,z,e){var S=e(73972),k=e(71828),l=e(34603);function T(b,d,s,t){var o=b.xa,r=b.ya,n=b.distance,a=b.dxy,i=b.index,u={pointNumber:i,x:d[i],y:s[i]};u.tx=Array.isArray(t.text)?t.text[i]:t.text,u.htx=Array.isArray(t.hovertext)?t.hovertext[i]:t.hovertext,u.data=Array.isArray(t.customdata)?t.customdata[i]:t.customdata,u.tp=Array.isArray(t.textposition)?t.textposition[i]:t.textposition;var h=t.textfont;h&&(u.ts=k.isArrayOrTypedArray(h.size)?h.size[i]:h.size,u.tc=Array.isArray(h.color)?h.color[i]:h.color,u.tf=Array.isArray(h.family)?h.family[i]:h.family);var f=t.marker;f&&(u.ms=k.isArrayOrTypedArray(f.size)?f.size[i]:f.size,u.mo=k.isArrayOrTypedArray(f.opacity)?f.opacity[i]:f.opacity,u.mx=k.isArrayOrTypedArray(f.symbol)?f.symbol[i]:f.symbol,u.ma=k.isArrayOrTypedArray(f.angle)?f.angle[i]:f.angle,u.mc=k.isArrayOrTypedArray(f.color)?f.color[i]:f.color);var x=f&&f.line;x&&(u.mlc=Array.isArray(x.color)?x.color[i]:x.color,u.mlw=k.isArrayOrTypedArray(x.width)?x.width[i]:x.width);var v=f&&f.gradient;v&&v.type!=="none"&&(u.mgt=Array.isArray(v.type)?v.type[i]:v.type,u.mgc=Array.isArray(v.color)?v.color[i]:v.color);var g=o.c2p(u.x,!0),y=r.c2p(u.y,!0),p=u.mrc||1,m=t.hoverlabel;m&&(u.hbg=Array.isArray(m.bgcolor)?m.bgcolor[i]:m.bgcolor,u.hbc=Array.isArray(m.bordercolor)?m.bordercolor[i]:m.bordercolor,u.hts=k.isArrayOrTypedArray(m.font.size)?m.font.size[i]:m.font.size,u.htc=Array.isArray(m.font.color)?m.font.color[i]:m.font.color,u.htf=Array.isArray(m.font.family)?m.font.family[i]:m.font.family,u.hnl=k.isArrayOrTypedArray(m.namelength)?m.namelength[i]:m.namelength);var w=t.hoverinfo;w&&(u.hi=Array.isArray(w)?w[i]:w);var c=t.hovertemplate;c&&(u.ht=Array.isArray(c)?c[i]:c);var M={};M[b.index]=u;var _=t._origX,E=t._origY,L=k.extendFlat({},b,{color:l(t,u),x0:g-p,x1:g+p,xLabelVal:_?_[i]:u.x,y0:y-p,y1:y+p,yLabelVal:E?E[i]:u.y,cd:M,distance:n,spikeDistance:a,hovertemplate:u.ht});return u.htx?L.text=u.htx:u.tx?L.text=u.tx:t.text&&(L.text=t.text),k.fillText(u,t,L),S.getComponentMethod("errorbars","hoverInfo")(u,t,L),L}K.exports={hoverPoints:function(b,d,s,t){var o,r,n,a,i,u,h,f,x,v,g=b.cd,y=g[0].t,p=g[0].trace,m=b.xa,w=b.ya,c=y.x,M=y.y,_=m.c2p(d),E=w.c2p(s),L=b.distance;if(y.tree){var C=m.p2c(_-L),O=m.p2c(_+L),I=w.p2c(E-L),N=w.p2c(E+L);o=t==="x"?y.tree.range(Math.min(C,O),Math.min(w._rl[0],w._rl[1]),Math.max(C,O),Math.max(w._rl[0],w._rl[1])):y.tree.range(Math.min(C,O),Math.min(I,N),Math.max(C,O),Math.max(I,N))}else o=y.ids;var R=L;if(t==="x"){var V=!!p.xperiodalignment,F=!!p.yperiodalignment;for(u=0;u<o.length;u++){if(a=c[r=o[u]],h=Math.abs(m.c2p(a)-_),V){var D=m.c2p(p._xStarts[r]),U=m.c2p(p._xEnds[r]);h=_>=Math.min(D,U)&&_<=Math.max(D,U)?0:1/0}if(h<R){if(R=h,i=M[r],f=w.c2p(i)-E,F){var j=w.c2p(p._yStarts[r]),J=w.c2p(p._yEnds[r]);f=E>=Math.min(j,J)&&E<=Math.max(j,J)?0:1/0}v=Math.sqrt(h*h+f*f),n=o[u]}}}else for(u=o.length-1;u>-1;u--)a=c[r=o[u]],i=M[r],h=m.c2p(a)-_,f=w.c2p(i)-E,(x=Math.sqrt(h*h+f*f))<R&&(R=v=x,n=r);return b.index=n,b.distance=R,b.dxy=v,n===void 0?[b]:[T(b,c,M,p)]},calcHover:T}},68868:function(K,z,e){var S=e(72156);S.plot=e(26787),K.exports=S},26787:function(K,z,e){var S=e(11870),k=e(46075),l=e(3593),T=e(42505),b=e(71828),d=e(64505).selectMode,s=e(79749),t=e(34098),o=e(68687),r=e(5345).styleTextSelection,n={};function a(i,u,h,f){var x=i._size,v=i.width*f,g=i.height*f,y=x.l*f,p=x.b*f,m=x.r*f,w=x.t*f,c=x.w*f,M=x.h*f;return[y+u.domain[0]*c,p+h.domain[0]*M,v-m-(1-u.domain[1])*c,g-w-(1-h.domain[1])*M]}(K.exports=function(i,u,h){if(h.length){var f,x,v=i._fullLayout,g=u._scene,y=u.xaxis,p=u.yaxis;if(g)if(s(i,["ANGLE_instanced_arrays","OES_element_index_uint"],n)){var m=g.count,w=v._glcanvas.data()[0].regl;if(o(i,u,h),g.dirty){if(g.error2d===!0&&(g.error2d=l(w)),g.line2d===!0&&(g.line2d=k(w)),g.scatter2d===!0&&(g.scatter2d=S(w)),g.fill2d===!0&&(g.fill2d=k(w)),g.glText===!0)for(g.glText=new Array(m),f=0;f<m;f++)g.glText[f]=new T(w);if(g.glText){if(m>g.glText.length){var c=m-g.glText.length;for(f=0;f<c;f++)g.glText.push(new T(w))}else if(m<g.glText.length){var M=g.glText.length-m;g.glText.splice(m,M).forEach(function(ne){ne.destroy()})}for(f=0;f<m;f++)g.glText[f].update(g.textOptions[f])}if(g.line2d&&(g.line2d.update(g.lineOptions),g.lineOptions=g.lineOptions.map(function(ne){if(ne&&ne.positions){for(var re=ne.positions,ie=0;ie<re.length&&(isNaN(re[ie])||isNaN(re[ie+1]));)ie+=2;for(var se=re.length-2;se>ie&&(isNaN(re[se])||isNaN(re[se+1]));)se-=2;ne.positions=re.slice(ie,se+2)}return ne}),g.line2d.update(g.lineOptions)),g.error2d){var _=(g.errorXOptions||[]).concat(g.errorYOptions||[]);g.error2d.update(_)}g.scatter2d&&g.scatter2d.update(g.markerOptions),g.fillOrder=b.repeat(null,m),g.fill2d&&(g.fillOptions=g.fillOptions.map(function(ne,re){var ie=h[re];if(ne&&ie&&ie[0]&&ie[0].trace){var se,ge,ue=ie[0],ce=ue.trace,le=ue.t,de=g.lineOptions[re],Ce=[];ce._ownfill&&Ce.push(re),ce._nexttrace&&Ce.push(re+1),Ce.length&&(g.fillOrder[re]=Ce);var xe,_e,we=[],Ae=de&&de.positions||le.positions;if(ce.fill==="tozeroy"){for(xe=0;xe<Ae.length&&isNaN(Ae[xe+1]);)xe+=2;for(_e=Ae.length-2;_e>xe&&isNaN(Ae[_e+1]);)_e-=2;Ae[xe+1]!==0&&(we=[Ae[xe],0]),we=we.concat(Ae.slice(xe,_e+2)),Ae[_e+1]!==0&&(we=we.concat([Ae[_e],0]))}else if(ce.fill==="tozerox"){for(xe=0;xe<Ae.length&&isNaN(Ae[xe]);)xe+=2;for(_e=Ae.length-2;_e>xe&&isNaN(Ae[_e]);)_e-=2;Ae[xe]!==0&&(we=[0,Ae[xe+1]]),we=we.concat(Ae.slice(xe,_e+2)),Ae[_e]!==0&&(we=we.concat([0,Ae[_e+1]]))}else if(ce.fill==="toself"||ce.fill==="tonext"){for(we=[],se=0,ne.splitNull=!0,ge=0;ge<Ae.length;ge+=2)(isNaN(Ae[ge])||isNaN(Ae[ge+1]))&&((we=we.concat(Ae.slice(se,ge))).push(Ae[se],Ae[se+1]),we.push(null,null),se=ge+2);we=we.concat(Ae.slice(se)),se&&we.push(Ae[se],Ae[se+1])}else{var $=ce._nexttrace;if($){var oe=g.lineOptions[re+1];if(oe){var pe=oe.positions;if(ce.fill==="tonexty"){for(we=Ae.slice(),re=Math.floor(pe.length/2);re--;){var ye=pe[2*re],ke=pe[2*re+1];isNaN(ye)||isNaN(ke)||we.push(ye,ke)}ne.fill=$.fillcolor}}}}if(ce._prevtrace&&ce._prevtrace.fill==="tonext"){var De=g.lineOptions[re-1].positions,Pe=we.length/2,Re=[se=Pe];for(ge=0;ge<De.length;ge+=2)(isNaN(De[ge])||isNaN(De[ge+1]))&&(Re.push(ge/2+Pe+1),se=ge+2);we=we.concat(De),ne.hole=Re}return ne.fillmode=ce.fill,ne.opacity=ce.opacity,ne.positions=we,ne}}),g.fill2d.update(g.fillOptions))}var E=v.dragmode,L=d(E),C=v.clickmode.indexOf("select")>-1;for(f=0;f<m;f++){var O=h[f][0],I=O.trace,N=O.t,R=N.index,V=I._length,F=N.x,D=N.y;if(I.selectedpoints||L||C){if(L||(L=!0),I.selectedpoints){var U=g.selectBatch[R]=b.selIndices2selPoints(I),j={};for(x=0;x<U.length;x++)j[U[x]]=1;var J=[];for(x=0;x<V;x++)j[x]||J.push(x);g.unselectBatch[R]=J}var X=N.xpx=new Array(V),Z=N.ypx=new Array(V);for(x=0;x<V;x++)X[x]=y.c2p(F[x]),Z[x]=p.c2p(D[x])}else N.xpx=N.ypx=null}if(L){if(g.select2d||(g.select2d=S(v._glcanvas.data()[1].regl)),g.scatter2d){var Y=new Array(m);for(f=0;f<m;f++)Y[f]=g.selectBatch[f].length||g.unselectBatch[f].length?g.markerUnselectedOptions[f]:{};g.scatter2d.update(Y)}g.select2d&&(g.select2d.update(g.markerOptions),g.select2d.update(g.markerSelectedOptions)),g.glText&&h.forEach(function(ne){var re=((ne||[])[0]||{}).trace||{};t.hasText(re)&&r(ne)})}else g.scatter2d&&g.scatter2d.update(g.markerOptions);var W={viewport:a(v,y,p,i._context.plotGlPixelRatio),range:[(y._rl||y.range)[0],(p._rl||p.range)[0],(y._rl||y.range)[1],(p._rl||p.range)[1]]},Q=b.repeat(W,g.count);g.fill2d&&g.fill2d.update(Q),g.line2d&&g.line2d.update(Q),g.error2d&&g.error2d.update(Q.concat(Q)),g.scatter2d&&g.scatter2d.update(Q),g.select2d&&g.select2d.update(Q),g.glText&&g.glText.forEach(function(ne){ne.update(W)})}else g.init()}}).reglPrecompiled=n},38967:function(K,z,e){var S=e(71828);K.exports=function(k,l){var T=l._scene,b={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},d={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return l._scene||((T=l._scene={}).init=function(){S.extendFlat(T,d,b)},T.init(),T.update=function(s){var t=S.repeat(s,T.count);if(T.fill2d&&T.fill2d.update(t),T.scatter2d&&T.scatter2d.update(t),T.line2d&&T.line2d.update(t),T.error2d&&T.error2d.update(t.concat(t)),T.select2d&&T.select2d.update(t),T.glText)for(var o=0;o<T.count;o++)T.glText[o].update(s)},T.draw=function(){for(var s=T.count,t=T.fill2d,o=T.error2d,r=T.line2d,n=T.scatter2d,a=T.glText,i=T.select2d,u=T.selectBatch,h=T.unselectBatch,f=0;f<s;f++){if(t&&T.fillOrder[f]&&t.draw(T.fillOrder[f]),r&&T.lineOptions[f]&&r.draw(f),o&&(T.errorXOptions[f]&&o.draw(f),T.errorYOptions[f]&&o.draw(f+s)),n&&T.markerOptions[f])if(h[f].length){var x=S.repeat([],T.count);x[f]=h[f],n.draw(x)}else u[f].length||n.draw(f);a[f]&&T.textOptions[f]&&a[f].render()}i&&i.draw(u),T.dirty=!1},T.destroy=function(){T.fill2d&&T.fill2d.destroy&&T.fill2d.destroy(),T.scatter2d&&T.scatter2d.destroy&&T.scatter2d.destroy(),T.error2d&&T.error2d.destroy&&T.error2d.destroy(),T.line2d&&T.line2d.destroy&&T.line2d.destroy(),T.select2d&&T.select2d.destroy&&T.select2d.destroy(),T.glText&&T.glText.forEach(function(s){s.destroy&&s.destroy()}),T.lineOptions=null,T.fillOptions=null,T.markerOptions=null,T.markerSelectedOptions=null,T.markerUnselectedOptions=null,T.errorXOptions=null,T.errorYOptions=null,T.textOptions=null,T.textSelectedOptions=null,T.textUnselectedOptions=null,T.selectBatch=null,T.unselectBatch=null,l._scene=null}),T.dirty||S.extendFlat(T,b),T}},58147:function(K,z,e){var S=e(34098),k=e(5345).styleTextSelection;K.exports=function(l,T){var b=l.cd,d=l.xaxis,s=l.yaxis,t=[],o=b[0].trace,r=b[0].t,n=o._length,a=r.x,i=r.y,u=r._scene,h=r.index;if(!u)return t;var f=S.hasText(o),x=S.hasMarkers(o),v=!x&&!f;if(o.visible!==!0||v)return t;var g=[],y=[];if(T!==!1&&!T.degenerate)for(var p=0;p<n;p++)T.contains([r.xpx[p],r.ypx[p]],!1,p,l)?(g.push(p),t.push({pointNumber:p,x:d.c2d(a[p]),y:s.c2d(i[p])})):y.push(p);if(x){var m=u.scatter2d;if(g.length||y.length){if(!u.selectBatch[h].length&&!u.unselectBatch[h].length){var w=new Array(u.count);w[h]=u.markerUnselectedOptions[h],m.update.apply(m,w)}}else{var c=new Array(u.count);c[h]=u.markerOptions[h],m.update.apply(m,c)}}return u.selectBatch[h]=g,u.unselectBatch[h]=y,f&&k(b),t}},99181:function(K,z,e){var S=e(5386).fF,k=e(5386).si,l=e(19316),T=e(82196),b=e(23585),d=e(9012),s=e(50693),t=e(1426).extendFlat,o=e(30962).overrideAll,r=e(23585),n=l.line,a=l.marker;K.exports=o({lon:l.lon,lat:l.lat,cluster:{enabled:{valType:"boolean"},maxzoom:t({},r.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:t({},a.opacity,{dflt:1})},mode:t({},T.mode,{dflt:"markers"}),text:t({},T.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:t({},T.hovertext,{}),line:{color:n.color,width:n.width},connectgaps:T.connectgaps,marker:t({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:a.opacity,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode},s("marker")),fill:l.fill,fillcolor:T.fillcolor,textfont:b.layers.symbol.textfont,textposition:b.layers.symbol.textposition,below:{valType:"string"},selected:{marker:T.selected.marker},unselected:{marker:T.unselected.marker},hoverinfo:t({},d.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:S()},"calc","nested")},15790:function(K,z,e){var S=e(92770),k=e(71828),l=e(50606).BADNUM,T=e(18214),b=e(21081),d=e(91424),s=e(39984),t=e(34098),o=e(13056),r=e(23469).appendArrayPointValue,n=e(63893).NEWLINES,a=e(63893).BR_TAG_ALL;function i(v){return{type:v,geojson:T.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function u(v,g){return k.isArrayOrTypedArray(v)?g?function(y){return S(v[y])?+v[y]:0}:function(y){return v[y]}:v?function(){return v}:h}function h(){return""}function f(v){return v[0]===l}function x(v,g){var y;if(k.isArrayOrTypedArray(v)&&k.isArrayOrTypedArray(g)){y=["step",["get","point_count"],v[0]];for(var p=1;p<v.length;p++)y.push(g[p-1],v[p])}else y=v;return y}K.exports=function(v,g){var y,p=g[0].trace,m=p.visible===!0&&p._length!==0,w=p.fill!=="none",c=t.hasLines(p),M=t.hasMarkers(p),_=t.hasText(p),E=M&&p.marker.symbol==="circle",L=M&&p.marker.symbol!=="circle",C=p.cluster&&p.cluster.enabled,O=i("fill"),I=i("line"),N=i("circle"),R=i("symbol"),V={fill:O,line:I,circle:N,symbol:R};if(!m)return V;if((w||c)&&(y=T.calcTraceToLineCoords(g)),w&&(O.geojson=T.makePolygon(y),O.layout.visibility="visible",k.extendFlat(O.paint,{"fill-color":p.fillcolor})),c&&(I.geojson=T.makeLine(y),I.layout.visibility="visible",k.extendFlat(I.paint,{"line-width":p.line.width,"line-color":p.line.color,"line-opacity":p.opacity})),E){var F=function(j){var J,X,Z,Y,W=j[0].trace,Q=W.marker,ne=W.selectedpoints,re=k.isArrayOrTypedArray(Q.color),ie=k.isArrayOrTypedArray(Q.size),se=k.isArrayOrTypedArray(Q.opacity);function ge(we){return W.opacity*we}re&&(X=b.hasColorscale(W,"marker")?b.makeColorScaleFuncFromTrace(Q):k.identity),ie&&(Z=s(W)),se&&(Y=function(we){return ge(S(we)?+k.constrain(we,0,1):0)});var ue,ce,le=[];for(J=0;J<j.length;J++){var de=j[J],Ce=de.lonlat;if(!f(Ce)){var xe={};X&&(xe.mcc=de.mcc=X(de.mc)),Z&&(xe.mrc=de.mrc=Z(de.ms)),Y&&(xe.mo=Y(de.mo)),ne&&(xe.selected=de.selected||0),le.push({type:"Feature",id:J+1,geometry:{type:"Point",coordinates:Ce},properties:xe})}}if(ne)for(ue=d.makeSelectedPointStyleFns(W),J=0;J<le.length;J++){var _e=le[J].properties;ue.selectedOpacityFn&&(_e.mo=ge(ue.selectedOpacityFn(_e))),ue.selectedColorFn&&(_e.mcc=ue.selectedColorFn(_e)),ue.selectedSizeFn&&(_e.mrc=ue.selectedSizeFn(_e))}return{geojson:{type:"FeatureCollection",features:le},mcc:re||ue&&ue.selectedColorFn?{type:"identity",property:"mcc"}:Q.color,mrc:ie||ue&&ue.selectedSizeFn?{type:"identity",property:"mrc"}:(ce=Q.size,ce/2),mo:se||ue&&ue.selectedOpacityFn?{type:"identity",property:"mo"}:ge(Q.opacity)}}(g);N.geojson=F.geojson,N.layout.visibility="visible",C&&(N.filter=["!",["has","point_count"]],V.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":x(p.cluster.color,p.cluster.step),"circle-radius":x(p.cluster.size,p.cluster.step),"circle-opacity":x(p.cluster.opacity,p.cluster.step)}},V.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),k.extendFlat(N.paint,{"circle-color":F.mcc,"circle-radius":F.mrc,"circle-opacity":F.mo})}if(E&&C&&(N.filter=["!",["has","point_count"]]),(L||_)&&(R.geojson=function(j,J){for(var X=J._fullLayout,Z=j[0].trace,Y=Z.marker||{},W=Y.symbol,Q=Y.angle,ne=W!=="circle"?u(W):h,re=Q!=="auto"?u(Q,!0):h,ie=t.hasText(Z)?u(Z.text):h,se=[],ge=0;ge<j.length;ge++){var ue=j[ge];if(!f(ue.lonlat)){var ce,le=Z.texttemplate;if(le){var de=Array.isArray(le)?le[ge]||"":le,Ce=Z._module.formatLabels(ue,Z,X),xe={};r(xe,Z,ue.i);var _e=Z._meta||{};ce=k.texttemplateString(de,Ce,X._d3locale,xe,ue,_e)}else ce=ie(ge);ce&&(ce=ce.replace(n,"").replace(a,`
`)),se.push({type:"Feature",geometry:{type:"Point",coordinates:ue.lonlat},properties:{symbol:ne(ge),angle:re(ge),text:ce}})}}return{type:"FeatureCollection",features:se}}(g,v),k.extendFlat(R.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),L&&(k.extendFlat(R.layout,{"icon-size":p.marker.size/10}),"angle"in p.marker&&p.marker.angle!=="auto"&&k.extendFlat(R.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),R.layout["icon-allow-overlap"]=p.marker.allowoverlap,k.extendFlat(R.paint,{"icon-opacity":p.opacity*p.marker.opacity,"icon-color":p.marker.color})),_)){var D=(p.marker||{}).size,U=o(p.textposition,D);k.extendFlat(R.layout,{"text-size":p.textfont.size,"text-anchor":U.anchor,"text-offset":U.offset}),k.extendFlat(R.paint,{"text-color":p.textfont.color,"text-opacity":p.opacity})}return V}},76645:function(K,z,e){var S=e(71828),k=e(34098),l=e(49508),T=e(11058),b=e(82410),d=e(28908),s=e(99181);K.exports=function(t,o,r,n){function a(p,m){return S.coerce(t,o,s,p,m)}function i(p,m){return S.coerce2(t,o,s,p,m)}var u=function(p,m,w){var c=w("lon")||[],M=w("lat")||[],_=Math.min(c.length,M.length);return m._length=_,_}(0,o,a);if(u){if(a("text"),a("texttemplate"),a("hovertext"),a("hovertemplate"),a("mode"),a("below"),k.hasLines(o)&&(T(t,o,r,n,a,{noDash:!0}),a("connectgaps")),k.hasMarkers(o)){l(t,o,r,n,a,{noLine:!0,noAngle:!0}),a("marker.allowoverlap"),a("marker.angle");var h=o.marker;h.symbol!=="circle"&&(S.isArrayOrTypedArray(h.size)&&(h.size=h.size[0]),S.isArrayOrTypedArray(h.color)&&(h.color=h.color[0]))}var f=i("cluster.maxzoom"),x=i("cluster.step"),v=i("cluster.color",o.marker&&o.marker.color||r),g=i("cluster.size"),y=i("cluster.opacity");a("cluster.enabled",f!==!1||x!==!1||v!==!1||g!==!1||y!==!1),k.hasText(o)&&b(t,o,n,a,{noSelect:!0}),a("fill"),o.fill!=="none"&&d(t,o,r,a),S.coerceSelectionMarkerOpacity(o,a)}else o.visible=!1}},53353:function(K){K.exports=function(z,e){return z.lon=e.lon,z.lat=e.lat,z}},15636:function(K,z,e){var S=e(89298);K.exports=function(k,l,T){var b={},d=T[l.subplot]._subplot.mockAxis,s=k.lonlat;return b.lonLabel=S.tickText(d,d.c2l(s[0]),!0).text,b.latLabel=S.tickText(d,d.c2l(s[1]),!0).text,b}},28178:function(K,z,e){var S=e(30211),k=e(71828),l=e(34603),T=k.fillText,b=e(50606).BADNUM,d=e(77734).traceLayerPrefix;function s(t,o,r){if(!t.hovertemplate){var n=(o.hi||t.hoverinfo).split("+"),a=n.indexOf("all")!==-1,i=n.indexOf("lon")!==-1,u=n.indexOf("lat")!==-1,h=o.lonlat,f=[];return a||i&&u?f.push("("+x(h[1])+", "+x(h[0])+")"):i?f.push(r.lon+x(h[0])):u&&f.push(r.lat+x(h[1])),(a||n.indexOf("text")!==-1)&&T(o,t,f),f.join("<br>")}function x(v){return v+"°"}}K.exports={hoverPoints:function(t,o,r){var n=t.cd,a=n[0].trace,i=t.xa,u=t.ya,h=t.subplot,f=[],x=d+a.uid+"-circle",v=a.cluster&&a.cluster.enabled;if(v){var g=h.map.queryRenderedFeatures(null,{layers:[x]});f=g.map(function(O){return O.id})}var y=360*(o>=0?Math.floor((o+180)/360):Math.ceil((o-180)/360)),p=o-y;if(S.getClosest(n,function(O){var I=O.lonlat;if(I[0]===b||v&&f.indexOf(O.i+1)===-1)return 1/0;var N=k.modHalf(I[0],360),R=I[1],V=h.project([N,R]),F=V.x-i.c2p([p,R]),D=V.y-u.c2p([N,r]),U=Math.max(3,O.mrc||0);return Math.max(Math.sqrt(F*F+D*D)-U,1-3/U)},t),t.index!==!1){var m=n[t.index],w=m.lonlat,c=[k.modHalf(w[0],360)+y,w[1]],M=i.c2p(c),_=u.c2p(c),E=m.mrc||1;t.x0=M-E,t.x1=M+E,t.y0=_-E,t.y1=_+E;var L={};L[a.subplot]={_subplot:h};var C=a._module.formatLabels(m,a,L);return t.lonLabel=C.lonLabel,t.latLabel=C.latLabel,t.color=l(a,m),t.extraText=s(a,m,n[0].t.labels),t.hovertemplate=a.hovertemplate,[t]}},getExtraText:s}},20467:function(K,z,e){K.exports={attributes:e(99181),supplyDefaults:e(76645),colorbar:e(4898),formatLabels:e(15636),calc:e(84622),plot:e(86951),hoverPoints:e(28178).hoverPoints,eventData:e(53353),selectPoints:e(86387),styleOnSelect:function(S,k){k&&k[0].trace._glTrace.update(k)},moduleType:"trace",name:"scattermapbox",basePlotModule:e(50101),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},86951:function(K,z,e){var S=e(71828),k=e(15790),l=e(77734).traceLayerPrefix,T={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function b(s,t,o,r){this.type="scattermapbox",this.subplot=s,this.uid=t,this.clusterEnabled=o,this.isHidden=r,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:l+t+"-fill",line:l+t+"-line",circle:l+t+"-circle",symbol:l+t+"-symbol",cluster:l+t+"-cluster",clusterCount:l+t+"-cluster-count"},this.below=null}var d=b.prototype;d.addSource=function(s,t,o){var r={type:"geojson",data:t.geojson};o&&o.enabled&&S.extendFlat(r,{cluster:!0,clusterMaxZoom:o.maxzoom});var n=this.subplot.map.getSource(this.sourceIds[s]);n?n.setData(t.geojson):this.subplot.map.addSource(this.sourceIds[s],r)},d.setSourceData=function(s,t){this.subplot.map.getSource(this.sourceIds[s]).setData(t.geojson)},d.addLayer=function(s,t,o){var r={type:t.type,id:this.layerIds[s],source:this.sourceIds[s],layout:t.layout,paint:t.paint};t.filter&&(r.filter=t.filter);for(var n,a=this.layerIds[s],i=this.subplot.getMapLayers(),u=0;u<i.length;u++)if(i[u].id===a){n=!0;break}n?(this.subplot.setOptions(a,"setLayoutProperty",r.layout),r.layout.visibility==="visible"&&this.subplot.setOptions(a,"setPaintProperty",r.paint)):this.subplot.addLayer(r,o)},d.update=function(s){var t=s[0].trace,o=this.subplot,r=o.map,n=k(o.gd,s),a=o.belowLookup["trace-"+this.uid],i=!(!t.cluster||!t.cluster.enabled),u=!!this.clusterEnabled,h=this;function f(p){u?function(m){for(var w=T.cluster,c=w.length-1;c>=0;c--){var M=w[c];r.removeLayer(h.layerIds[M])}m||r.removeSource(h.sourceIds.circle)}(p):function(m){for(var w=T.nonCluster,c=w.length-1;c>=0;c--){var M=w[c];r.removeLayer(h.layerIds[M]),m||r.removeSource(h.sourceIds[M])}}(p)}function x(p){i?function(m){m||h.addSource("circle",n.circle,t.cluster);for(var w=T.cluster,c=0;c<w.length;c++){var M=w[c],_=n[M];h.addLayer(M,_,a)}}(p):function(m){for(var w=T.nonCluster,c=0;c<w.length;c++){var M=w[c],_=n[M];m||h.addSource(M,_),h.addLayer(M,_,a)}}(p)}function v(){for(var p=i?T.cluster:T.nonCluster,m=0;m<p.length;m++){var w=p[m],c=n[w];c&&(o.setOptions(h.layerIds[w],"setLayoutProperty",c.layout),c.layout.visibility==="visible"&&(w!=="cluster"&&h.setSourceData(w,c),o.setOptions(h.layerIds[w],"setPaintProperty",c.paint)))}}var g=this.isHidden,y=t.visible!==!0;y?g||f():g?y||x():u!==i?(f(),x()):(this.below!==a&&(f(!0),x(!0)),v()),this.clusterEnabled=i,this.isHidden=y,this.below=a,s[0].trace._glTrace=this},d.dispose=function(){for(var s=this.subplot.map,t=this.clusterEnabled?T.cluster:T.nonCluster,o=t.length-1;o>=0;o--){var r=t[o];s.removeLayer(this.layerIds[r]),s.removeSource(this.sourceIds[r])}},K.exports=function(s,t){var o,r,n,a=t[0].trace,i=a.cluster&&a.cluster.enabled,u=a.visible!==!0,h=new b(s,a.uid,i,u),f=k(s.gd,t),x=h.below=s.belowLookup["trace-"+a.uid];if(i)for(h.addSource("circle",f.circle,a.cluster),o=0;o<T.cluster.length;o++)n=f[r=T.cluster[o]],h.addLayer(r,n,x);else for(o=0;o<T.nonCluster.length;o++)n=f[r=T.nonCluster[o]],h.addSource(r,n,a.cluster),h.addLayer(r,n,x);return t[0].trace._glTrace=h,h}},86387:function(K,z,e){var S=e(71828),k=e(34098),l=e(50606).BADNUM;K.exports=function(T,b){var d,s=T.cd,t=T.xaxis,o=T.yaxis,r=[],n=s[0].trace;if(!k.hasMarkers(n))return[];if(b===!1)for(d=0;d<s.length;d++)s[d].selected=0;else for(d=0;d<s.length;d++){var a=s[d],i=a.lonlat;if(i[0]!==l){var u=[S.modHalf(i[0],360),i[1]],h=[t.c2p(u),o.c2p(u)];b.contains(h,null,d,T)?(r.push({pointNumber:d,lon:i[0],lat:i[1]}),a.selected=1):a.selected=0}}return r}},81245:function(K,z,e){var S=e(5386).fF,k=e(5386).si,l=e(1426).extendFlat,T=e(82196),b=e(9012),d=T.line;K.exports={mode:T.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:k({editType:"plot"},{keys:["r","theta","text"]}),hovertext:T.hovertext,line:{color:d.color,width:d.width,dash:d.dash,backoff:d.backoff,shape:l({},d.shape,{values:["linear","spline"]}),smoothing:d.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:l({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:l({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:l({},b.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:T.hoveron,hovertemplate:S(),selected:T.selected,unselected:T.unselected}},26442:function(K,z,e){var S=e(92770),k=e(50606).BADNUM,l=e(89298),T=e(36922),b=e(75225),d=e(66279),s=e(47761).calcMarkerSize;K.exports=function(t,o){for(var r=t._fullLayout,n=o.subplot,a=r[n].radialaxis,i=r[n].angularaxis,u=a.makeCalcdata(o,"r"),h=i.makeCalcdata(o,"theta"),f=o._length,x=new Array(f),v=0;v<f;v++){var g=u[v],y=h[v],p=x[v]={};S(g)&&S(y)?(p.r=g,p.theta=y):p.r=k}var m=s(o,f);return o._extremes.x=l.findExtremes(a,u,{ppad:m}),T(t,o),b(x,o),d(x,o),x}},22184:function(K,z,e){var S=e(71828),k=e(34098),l=e(49508),T=e(11058),b=e(94039),d=e(82410),s=e(28908),t=e(47581).PTS_LINESONLY,o=e(81245);function r(n,a,i,u){var h,f=u("r"),x=u("theta");if(f)x?h=Math.min(f.length,x.length):(h=f.length,u("theta0"),u("dtheta"));else{if(!x)return 0;h=a.theta.length,u("r0"),u("dr")}return a._length=h,h}K.exports={handleRThetaDefaults:r,supplyDefaults:function(n,a,i,u){function h(v,g){return S.coerce(n,a,o,v,g)}var f=r(0,a,0,h);if(f){h("thetaunit"),h("mode",f<t?"lines+markers":"lines"),h("text"),h("hovertext"),a.hoveron!=="fills"&&h("hovertemplate"),k.hasLines(a)&&(T(n,a,i,u,h,{backoff:!0}),b(n,a,h),h("connectgaps")),k.hasMarkers(a)&&l(n,a,i,u,h,{gradient:!0}),k.hasText(a)&&(h("texttemplate"),d(n,a,u,h));var x=[];(k.hasMarkers(a)||k.hasText(a))&&(h("cliponaxis"),h("marker.maxdisplayed"),x.push("points")),h("fill"),a.fill!=="none"&&(s(n,a,i,h),k.hasLines(a)||b(n,a,h)),a.fill!=="tonext"&&a.fill!=="toself"||x.push("fills"),h("hoveron",x.join("+")||"points"),S.coerceSelectionMarkerOpacity(a,h)}else a.visible=!1}}},98608:function(K,z,e){var S=e(71828),k=e(89298);K.exports=function(l,T,b){var d,s,t={},o=b[T.subplot]._subplot;o?(d=o.radialAxis,s=o.angularAxis):(d=(o=b[T.subplot]).radialaxis,s=o.angularaxis);var r=d.c2l(l.r);t.rLabel=k.tickText(d,r,!0).text;var n=s.thetaunit==="degrees"?S.rad2deg(l.theta):l.theta;return t.thetaLabel=k.tickText(s,n,!0).text,t}},59150:function(K,z,e){var S=e(33720);function k(l,T,b,d){var s=b.radialAxis,t=b.angularAxis;s._hovertitle="r",t._hovertitle="θ";var o={};o[T.subplot]={_subplot:b};var r=T._module.formatLabels(l,T,o);d.rLabel=r.rLabel,d.thetaLabel=r.thetaLabel;var n=l.hi||T.hoverinfo,a=[];function i(h,f){a.push(h._hovertitle+": "+f)}if(!T.hovertemplate){var u=n.split("+");u.indexOf("all")!==-1&&(u=["r","theta","text"]),u.indexOf("r")!==-1&&i(s,d.rLabel),u.indexOf("theta")!==-1&&i(t,d.thetaLabel),u.indexOf("text")!==-1&&d.text&&(a.push(d.text),delete d.text),d.extraText=a.join("<br>")}}K.exports={hoverPoints:function(l,T,b,d){var s=S(l,T,b,d);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0)return s;var o=l.subplot,r=t.cd[t.index],n=t.trace;if(o.isPtInside(r))return t.xLabelVal=void 0,t.yLabelVal=void 0,k(r,n,o,t),t.hovertemplate=n.hovertemplate,s}},makeHoverPointText:k}},91271:function(K,z,e){K.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e(23580),categories:["polar","symbols","showLegend","scatter-like"],attributes:e(81245),supplyDefaults:e(22184).supplyDefaults,colorbar:e(4898),formatLabels:e(98608),calc:e(26442),plot:e(45162),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(59150).hoverPoints,selectPoints:e(98002),meta:{}}},45162:function(K,z,e){var S=e(32663),k=e(50606).BADNUM;K.exports=function(l,T,b){for(var d=T.layers.frontplot.select("g.scatterlayer"),s=T.xaxis,t=T.yaxis,o={xaxis:s,yaxis:t,plot:T.framework,layerClipId:T._hasClipOnAxisFalse?T.clipIds.forTraces:null},r=T.radialAxis,n=T.angularAxis,a=0;a<b.length;a++)for(var i=b[a],u=0;u<i.length;u++){u===0&&(i[0].trace._xA=s,i[0].trace._yA=t);var h=i[u],f=h.r;if(f===k)h.x=h.y=k;else{var x=r.c2g(f),v=n.c2g(h.theta);h.x=x*Math.cos(v),h.y=x*Math.sin(v)}}S(l,o,b,d)}},53286:function(K,z,e){var S=e(81245),k=e(42341),l=e(5386).si;K.exports={mode:S.mode,r:S.r,theta:S.theta,r0:S.r0,dr:S.dr,theta0:S.theta0,dtheta:S.dtheta,thetaunit:S.thetaunit,text:S.text,texttemplate:l({editType:"plot"},{keys:["r","theta","text"]}),hovertext:S.hovertext,hovertemplate:S.hovertemplate,line:k.line,connectgaps:k.connectgaps,marker:k.marker,fill:k.fill,fillcolor:k.fillcolor,textposition:k.textposition,textfont:k.textfont,hoverinfo:S.hoverinfo,selected:S.selected,unselected:S.unselected}},65746:function(K,z,e){K.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e(23580),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e(53286),supplyDefaults:e(75485),colorbar:e(4898),formatLabels:e(46255),calc:e(37499),hoverPoints:e(29347).hoverPoints,selectPoints:e(58147),meta:{}}},37499:function(K,z,e){var S=e(36922),k=e(47761).calcMarkerSize,l=e(19635),T=e(89298),b=e(78232).TOO_MANY_POINTS;K.exports=function(d,s){var t=d._fullLayout,o=s.subplot,r=t[o].radialaxis,n=t[o].angularaxis,a=s._r=r.makeCalcdata(s,"r"),i=s._theta=n.makeCalcdata(s,"theta"),u=s._length,h={};u<a.length&&(a=a.slice(0,u)),u<i.length&&(i=i.slice(0,u)),h.r=a,h.theta=i,S(d,s);var f,x=h.opts=l.style(d,s);return u<b?f=k(s,u):x.marker&&(f=2*(x.marker.sizeAvg||Math.max(x.marker.size,3))),s._extremes.x=T.findExtremes(r,a,{ppad:f}),[{x:!1,y:!1,t:h,trace:s}]}},75485:function(K,z,e){var S=e(71828),k=e(34098),l=e(22184).handleRThetaDefaults,T=e(49508),b=e(11058),d=e(82410),s=e(28908),t=e(47581).PTS_LINESONLY,o=e(53286);K.exports=function(r,n,a,i){function u(f,x){return S.coerce(r,n,o,f,x)}var h=l(r,n,i,u);h?(u("thetaunit"),u("mode",h<t?"lines+markers":"lines"),u("text"),u("hovertext"),n.hoveron!=="fills"&&u("hovertemplate"),k.hasLines(n)&&(b(r,n,a,i,u),u("connectgaps")),k.hasMarkers(n)&&T(r,n,a,i,u,{noAngleRef:!0,noStandOff:!0}),k.hasText(n)&&(u("texttemplate"),d(r,n,i,u)),u("fill"),n.fill!=="none"&&s(r,n,a,u),S.coerceSelectionMarkerOpacity(n,u)):n.visible=!1}},46255:function(K,z,e){var S=e(98608);K.exports=function(k,l,T){var b=k.i;return"r"in k||(k.r=l._r[b]),"theta"in k||(k.theta=l._theta[b]),S(k,l,T)}},29347:function(K,z,e){var S=e(20794),k=e(59150).makeHoverPointText;K.exports={hoverPoints:function(l,T,b,d){var s=l.cd[0].t,t=s.r,o=s.theta,r=S.hoverPoints(l,T,b,d);if(r&&r[0].index!==!1){var n=r[0];if(n.index===void 0)return r;var a=l.subplot,i=n.cd[n.index],u=n.trace;if(i.r=t[n.index],i.theta=o[n.index],a.isPtInside(i))return n.xLabelVal=void 0,n.yLabelVal=void 0,k(i,u,a,n),r}}}},21461:function(K,z,e){var S=e(65746);S.plot=e(49741),K.exports=S},49741:function(K,z,e){var S=e(88294),k=e(92770),l=e(26787),T=e(38967),b=e(19635),d=e(71828),s=e(78232).TOO_MANY_POINTS;K.exports=function(t,o,r){if(r.length){var n=o.radialAxis,a=o.angularAxis,i=T(t,o);return r.forEach(function(u){if(u&&u[0]&&u[0].trace){var h,f=u[0],x=f.trace,v=f.t,g=x._length,y=v.r,p=v.theta,m=v.opts,w=y.slice(),c=p.slice();for(h=0;h<y.length;h++)o.isPtInside({r:y[h],theta:p[h]})||(w[h]=NaN,c[h]=NaN);var M=new Array(2*g),_=Array(g),E=Array(g);for(h=0;h<g;h++){var L,C,O=w[h];if(k(O)){var I=n.c2g(O),N=a.c2g(c[h],x.thetaunit);L=I*Math.cos(N),C=I*Math.sin(N)}else L=C=NaN;_[h]=M[2*h]=L,E[h]=M[2*h+1]=C}v.tree=S(M),m.marker&&g>=s&&(m.marker.cluster=v.tree),m.marker&&(m.markerSel.positions=m.markerUnsel.positions=m.marker.positions=M),m.line&&M.length>1&&d.extendFlat(m.line,b.linePositions(t,x,M)),m.text&&(d.extendFlat(m.text,{positions:M},b.textPosition(t,x,m.text,m.marker)),d.extendFlat(m.textSel,{positions:M},b.textPosition(t,x,m.text,m.markerSel)),d.extendFlat(m.textUnsel,{positions:M},b.textPosition(t,x,m.text,m.markerUnsel))),m.fill&&!i.fill2d&&(i.fill2d=!0),m.marker&&!i.scatter2d&&(i.scatter2d=!0),m.line&&!i.line2d&&(i.line2d=!0),m.text&&!i.glText&&(i.glText=!0),i.lineOptions.push(m.line),i.fillOptions.push(m.fill),i.markerOptions.push(m.marker),i.markerSelectedOptions.push(m.markerSel),i.markerUnselectedOptions.push(m.markerUnsel),i.textOptions.push(m.text),i.textSelectedOptions.push(m.textSel),i.textUnselectedOptions.push(m.textUnsel),i.selectBatch.push([]),i.unselectBatch.push([]),v.x=_,v.y=E,v.rawx=_,v.rawy=E,v.r=y,v.theta=p,v.positions=M,v._scene=i,v.index=i.count,i.count++}}),l(t,o,r)}},K.exports.reglPrecompiled={}},48300:function(K,z,e){var S=e(5386).fF,k=e(5386).si,l=e(1426).extendFlat,T=e(82196),b=e(9012),d=T.line;K.exports={mode:T.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:k({editType:"plot"},{keys:["real","imag","text"]}),hovertext:T.hovertext,line:{color:d.color,width:d.width,dash:d.dash,backoff:d.backoff,shape:l({},d.shape,{values:["linear","spline"]}),smoothing:d.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:l({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:l({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:l({},b.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:T.hoveron,hovertemplate:S(),selected:T.selected,unselected:T.unselected}},30621:function(K,z,e){var S=e(92770),k=e(50606).BADNUM,l=e(36922),T=e(75225),b=e(66279),d=e(47761).calcMarkerSize;K.exports=function(s,t){for(var o=s._fullLayout,r=t.subplot,n=o[r].realaxis,a=o[r].imaginaryaxis,i=n.makeCalcdata(t,"real"),u=a.makeCalcdata(t,"imag"),h=t._length,f=new Array(h),x=0;x<h;x++){var v=i[x],g=u[x],y=f[x]={};S(v)&&S(g)?(y.real=v,y.imag=g):y.real=k}return d(t,h),l(s,t),T(f,t),b(f,t),f}},65269:function(K,z,e){var S=e(71828),k=e(34098),l=e(49508),T=e(11058),b=e(94039),d=e(82410),s=e(28908),t=e(47581).PTS_LINESONLY,o=e(48300);K.exports=function(r,n,a,i){function u(x,v){return S.coerce(r,n,o,x,v)}var h=function(x,v,g,y){var p,m=y("real"),w=y("imag");return m&&w&&(p=Math.min(m.length,w.length)),v._length=p,p}(0,n,0,u);if(h){u("mode",h<t?"lines+markers":"lines"),u("text"),u("hovertext"),n.hoveron!=="fills"&&u("hovertemplate"),k.hasLines(n)&&(T(r,n,a,i,u,{backoff:!0}),b(r,n,u),u("connectgaps")),k.hasMarkers(n)&&l(r,n,a,i,u,{gradient:!0}),k.hasText(n)&&(u("texttemplate"),d(r,n,i,u));var f=[];(k.hasMarkers(n)||k.hasText(n))&&(u("cliponaxis"),u("marker.maxdisplayed"),f.push("points")),u("fill"),n.fill!=="none"&&(s(r,n,a,u),k.hasLines(n)||b(r,n,u)),n.fill!=="tonext"&&n.fill!=="toself"||f.push("fills"),u("hoveron",f.join("+")||"points"),S.coerceSelectionMarkerOpacity(n,u)}else n.visible=!1}},62047:function(K,z,e){var S=e(89298);K.exports=function(k,l,T){var b={},d=T[l.subplot]._subplot;return b.realLabel=S.tickText(d.radialAxis,k.real,!0).text,b.imagLabel=S.tickText(d.angularAxis,k.imag,!0).text,b}},11350:function(K,z,e){var S=e(33720);function k(l,T,b,d){var s=b.radialAxis,t=b.angularAxis;s._hovertitle="real",t._hovertitle="imag";var o={};o[T.subplot]={_subplot:b};var r=T._module.formatLabels(l,T,o);d.realLabel=r.realLabel,d.imagLabel=r.imagLabel;var n=l.hi||T.hoverinfo,a=[];function i(h,f){a.push(h._hovertitle+": "+f)}if(!T.hovertemplate){var u=n.split("+");u.indexOf("all")!==-1&&(u=["real","imag","text"]),u.indexOf("real")!==-1&&i(s,d.realLabel),u.indexOf("imag")!==-1&&i(t,d.imagLabel),u.indexOf("text")!==-1&&d.text&&(a.push(d.text),delete d.text),d.extraText=a.join("<br>")}}K.exports={hoverPoints:function(l,T,b,d){var s=S(l,T,b,d);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0)return s;var o=l.subplot,r=t.cd[t.index],n=t.trace;if(o.isPtInside(r))return t.xLabelVal=void 0,t.yLabelVal=void 0,k(r,n,o,t),t.hovertemplate=n.hovertemplate,s}},makeHoverPointText:k}},85956:function(K,z,e){K.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e(7504),categories:["smith","symbols","showLegend","scatter-like"],attributes:e(48300),supplyDefaults:e(65269),colorbar:e(4898),formatLabels:e(62047),calc:e(30621),plot:e(12480),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(11350).hoverPoints,selectPoints:e(98002),meta:{}}},12480:function(K,z,e){var S=e(32663),k=e(50606).BADNUM,l=e(23893).smith;K.exports=function(T,b,d){for(var s=b.layers.frontplot.select("g.scatterlayer"),t=b.xaxis,o=b.yaxis,r={xaxis:t,yaxis:o,plot:b.framework,layerClipId:b._hasClipOnAxisFalse?b.clipIds.forTraces:null},n=0;n<d.length;n++)for(var a=d[n],i=0;i<a.length;i++){i===0&&(a[0].trace._xA=t,a[0].trace._yA=o);var u=a[i],h=u.real;if(h===k)u.x=u.y=k;else{var f=l([h,u.imag]);u.x=f[0],u.y=f[1]}}S(T,r,d,s)}},50413:function(K,z,e){var S=e(5386).fF,k=e(5386).si,l=e(82196),T=e(9012),b=e(50693),d=e(79952).P,s=e(1426).extendFlat,t=l.marker,o=l.line,r=t.line;K.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:s({},l.mode,{dflt:"markers"}),text:s({},l.text,{}),texttemplate:k({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:s({},l.hovertext,{}),line:{color:o.color,width:o.width,dash:d,backoff:o.backoff,shape:s({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:l.connectgaps,cliponaxis:l.cliponaxis,fill:s({},l.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:l.fillcolor,marker:s({symbol:t.symbol,opacity:t.opacity,angle:t.angle,angleref:t.angleref,standoff:t.standoff,maxdisplayed:t.maxdisplayed,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:s({width:r.width,editType:"calc"},b("marker.line")),gradient:t.gradient,editType:"calc"},b("marker")),textfont:l.textfont,textposition:l.textposition,selected:l.selected,unselected:l.unselected,hoverinfo:s({},T.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:l.hoveron,hovertemplate:S()}},54337:function(K,z,e){var S=e(92770),k=e(36922),l=e(75225),T=e(66279),b=e(47761).calcMarkerSize,d=["a","b","c"],s={a:["b","c"],b:["a","c"],c:["a","b"]};K.exports=function(t,o){var r,n,a,i,u,h,f=t._fullLayout[o.subplot].sum,x=o.sum||f,v={a:o.a,b:o.b,c:o.c};for(r=0;r<d.length;r++)if(!v[a=d[r]]){for(u=v[s[a][0]],h=v[s[a][1]],i=new Array(u.length),n=0;n<u.length;n++)i[n]=x-u[n]-h[n];v[a]=i}var g,y,p,m,w,c,M=o._length,_=new Array(M);for(r=0;r<M;r++)g=v.a[r],y=v.b[r],p=v.c[r],S(g)&&S(y)&&S(p)?((m=f/((g=+g)+(y=+y)+(p=+p)))!=1&&(g*=m,y*=m,p*=m),c=g,w=p-y,_[r]={x:w,y:c,a:g,b:y,c:p}):_[r]={x:!1,y:!1};return b(o,M),k(t,o),l(_,o),T(_,o),_}},46008:function(K,z,e){var S=e(71828),k=e(47581),l=e(34098),T=e(49508),b=e(11058),d=e(94039),s=e(82410),t=e(28908),o=e(50413);K.exports=function(r,n,a,i){function u(y,p){return S.coerce(r,n,o,y,p)}var h,f=u("a"),x=u("b"),v=u("c");if(f?(h=f.length,x?(h=Math.min(h,x.length),v&&(h=Math.min(h,v.length))):h=v?Math.min(h,v.length):0):x&&v&&(h=Math.min(x.length,v.length)),h){n._length=h,u("sum"),u("text"),u("hovertext"),n.hoveron!=="fills"&&u("hovertemplate"),u("mode",h<k.PTS_LINESONLY?"lines+markers":"lines"),l.hasLines(n)&&(b(r,n,a,i,u,{backoff:!0}),d(r,n,u),u("connectgaps")),l.hasMarkers(n)&&T(r,n,a,i,u,{gradient:!0}),l.hasText(n)&&(u("texttemplate"),s(r,n,i,u));var g=[];(l.hasMarkers(n)||l.hasText(n))&&(u("cliponaxis"),u("marker.maxdisplayed"),g.push("points")),u("fill"),n.fill!=="none"&&(t(r,n,a,u),l.hasLines(n)||d(r,n,u)),n.fill!=="tonext"&&n.fill!=="toself"||g.push("fills"),u("hoveron",g.join("+")||"points"),S.coerceSelectionMarkerOpacity(n,u)}else n.visible=!1}},4524:function(K){K.exports=function(z,e,S,k,l){if(e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),k[l]){var T=k[l];z.a=T.a,z.b=T.b,z.c=T.c}else z.a=e.a,z.b=e.b,z.c=e.c;return z}},93645:function(K,z,e){var S=e(89298);K.exports=function(k,l,T){var b={},d=T[l.subplot]._subplot;return b.aLabel=S.tickText(d.aaxis,k.a,!0).text,b.bLabel=S.tickText(d.baxis,k.b,!0).text,b.cLabel=S.tickText(d.caxis,k.c,!0).text,b}},47250:function(K,z,e){var S=e(33720);K.exports=function(k,l,T,b){var d=S(k,l,T,b);if(d&&d[0].index!==!1){var s=d[0];if(s.index===void 0){var t=1-s.y0/k.ya._length,o=k.xa._length,r=o*t/2,n=o-r;return s.x0=Math.max(Math.min(s.x0,n),r),s.x1=Math.max(Math.min(s.x1,n),r),d}var a=s.cd[s.index],i=s.trace,u=s.subplot;s.a=a.a,s.b=a.b,s.c=a.c,s.xLabelVal=void 0,s.yLabelVal=void 0;var h={};h[i.subplot]={_subplot:u};var f=i._module.formatLabels(a,i,h);s.aLabel=f.aLabel,s.bLabel=f.bLabel,s.cLabel=f.cLabel;var x=a.hi||i.hoverinfo,v=[];if(!i.hovertemplate){var g=x.split("+");g.indexOf("all")!==-1&&(g=["a","b","c"]),g.indexOf("a")!==-1&&y(u.aaxis,s.aLabel),g.indexOf("b")!==-1&&y(u.baxis,s.bLabel),g.indexOf("c")!==-1&&y(u.caxis,s.cLabel)}return s.extraText=v.join("<br>"),s.hovertemplate=i.hovertemplate,d}function y(p,m){v.push(p._hovertitle+": "+m)}}},52979:function(K,z,e){K.exports={attributes:e(50413),supplyDefaults:e(46008),colorbar:e(4898),formatLabels:e(93645),calc:e(54337),plot:e(7507),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(47250),selectPoints:e(98002),eventData:e(4524),moduleType:"trace",name:"scatterternary",basePlotModule:e(61639),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},7507:function(K,z,e){var S=e(32663);K.exports=function(k,l,T){var b=l.plotContainer;b.select(".scatterlayer").selectAll("*").remove();for(var d=l.xaxis,s=l.yaxis,t={xaxis:d,yaxis:s,plot:b,layerClipId:l._hasClipOnAxisFalse?l.clipIdRelative:null},o=l.layers.frontplot.select("g.scatterlayer"),r=0;r<T.length;r++){var n=T[r];n.length&&(n[0].trace._xA=d,n[0].trace._yA=s)}S(k,t,T,o)}},46880:function(K,z,e){var S=e(82196),k=e(50693),l=e(12663).axisHoverFormat,T=e(5386).fF,b=e(42341),d=e(85555).idRegex,s=e(44467).templatedArray,t=e(1426).extendFlat,o=S.marker,r=o.line,n=t(k("marker.line",{editTypeOverride:"calc"}),{width:t({},r.width,{editType:"calc"}),editType:"calc"}),a=t(k("marker"),{symbol:o.symbol,angle:o.angle,size:t({},o.size,{editType:"markerSize"}),sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,opacity:o.opacity,colorbar:o.colorbar,line:n,editType:"calc"});function i(u){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:d[u],editType:"plot"}}}a.color.editType=a.cmin.editType=a.cmax.editType="style",K.exports={dimensions:s("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:t({},b.text,{}),hovertext:t({},b.hovertext,{}),hovertemplate:T(),xhoverformat:l("x"),yhoverformat:l("y"),marker:a,xaxes:i("x"),yaxes:i("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:b.selected.marker,editType:"calc"},unselected:{marker:b.unselected.marker,editType:"calc"},opacity:b.opacity}},65017:function(K,z,e){var S=e(73972),k=e(83312);K.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e(46880),supplyDefaults:e(25784),colorbar:e(4898),calc:e(87625),plot:e(79410),hoverPoints:e(8567).hoverPoints,selectPoints:e(8689),editStyle:e(28801),meta:{}},S.register(k)},16947:function(K,z,e){var S=e(46075),k=e(73972),l=e(79749),T=e(27659).a0,b=e(93612),d=e(41675).getFromId,s=e(89298).shouldShowZeroLine,t="splom",o={};function r(a,i,u){for(var h=u.matrixOptions.data.length,f=i._visibleDims,x=u.viewOpts.ranges=new Array(h),v=0;v<f.length;v++){var g=f[v],y=x[v]=new Array(4),p=d(a,i._diag[g][0]);p&&(y[0]=p.r2l(p.range[0]),y[2]=p.r2l(p.range[1]));var m=d(a,i._diag[g][1]);m&&(y[1]=m.r2l(m.range[0]),y[3]=m.r2l(m.range[1]))}u.selectBatch.length||u.unselectBatch.length?u.matrix.update({ranges:x},{ranges:x}):u.matrix.update({ranges:x})}function n(a){var i=a._fullLayout,u=i._glcanvas.data()[0].regl,h=i._splomGrid;h||(h=i._splomGrid=S(u)),h.update(function(f){var x,v=f._context.plotGlPixelRatio,g=f._fullLayout,y=g._size,p=[0,0,g.width*v,g.height*v],m={};function w(j,J,X,Z,Y,W){X*=v,Z*=v,Y*=v,W*=v;var Q=J[j+"color"],ne=J[j+"width"],re=String(Q+ne);re in m?m[re].data.push(NaN,NaN,X,Z,Y,W):m[re]={data:[X,Z,Y,W],join:"rect",thickness:ne*v,color:Q,viewport:p,range:p,overlay:!1}}for(x in g._splomSubplots){var c,M,_=g._plots[x],E=_.xaxis,L=_.yaxis,C=E._gridVals,O=L._gridVals,I=E._offset,N=E._length,R=L._length,V=y.b+L.domain[0]*y.h,F=-L._m,D=-F*L.r2l(L.range[0],L.calendar);if(E.showgrid)for(x=0;x<C.length;x++)c=I+E.l2p(C[x].x),w("grid",E,c,V,c,V+R);if(L.showgrid)for(x=0;x<O.length;x++)w("grid",L,I,M=V+D+F*O[x].x,I+N,M);s(f,E,L)&&(c=I+E.l2p(0),w("zeroline",E,c,V,c,V+R)),s(f,L,E)&&w("zeroline",L,I,M=V+D+0,I+N,M)}var U=[];for(x in m)U.push(m[x]);return U}(a))}K.exports={name:t,attr:b.attr,attrRegex:b.attrRegex,layoutAttributes:b.layoutAttributes,supplyLayoutDefaults:b.supplyLayoutDefaults,drawFramework:b.drawFramework,plot:function(a){var i=a._fullLayout,u=k.getModule(t),h=T(a.calcdata,u)[0];l(a,["ANGLE_instanced_arrays","OES_element_index_uint"],o)&&(i._hasOnlyLargeSploms&&n(a),u.plot(a,{},h))},drag:function(a){var i=a.calcdata,u=a._fullLayout;u._hasOnlyLargeSploms&&n(a);for(var h=0;h<i.length;h++){var f=i[h][0].trace,x=u._splomScenes[f.uid];f.type==="splom"&&x&&x.matrix&&r(a,f,x)}},updateGrid:n,clean:function(a,i,u,h){var f,x={};if(h._splomScenes){for(f=0;f<a.length;f++){var v=a[f];v.type==="splom"&&(x[v.uid]=1)}for(f=0;f<u.length;f++){var g=u[f];if(!x[g.uid]){var y=h._splomScenes[g.uid];y&&y.destroy&&y.destroy(),h._splomScenes[g.uid]=null,delete h._splomScenes[g.uid]}}}Object.keys(h._splomScenes||{}).length===0&&delete h._splomScenes,h._splomGrid&&!i._hasOnlyLargeSploms&&h._hasOnlyLargeSploms&&(h._splomGrid.destroy(),h._splomGrid=null,delete h._splomGrid),b.clean(a,i,u,h)},updateFx:b.updateFx,toSVG:b.toSVG,reglPrecompiled:o}},87625:function(K,z,e){var S=e(71828),k=e(41675),l=e(47761).calcMarkerSize,T=e(47761).calcAxisExpansion,b=e(36922),d=e(19635).markerSelection,s=e(19635).markerStyle,t=e(10164),o=e(50606).BADNUM,r=e(78232).TOO_MANY_POINTS;K.exports=function(n,a){var i,u,h,f,x,v,g=a.dimensions,y=a._length,p={},m=p.cdata=[],w=p.data=[],c=a._visibleDims=[];function M(E,L){for(var C=E.makeCalcdata({v:L.values,vcalendar:a.calendar},"v"),O=0;O<C.length;O++)C[O]=C[O]===o?NaN:C[O];m.push(C),w.push(E.type==="log"?S.simpleMap(C,E.c2l):C)}for(i=0;i<g.length;i++)if((h=g[i]).visible){if(f=k.getFromId(n,a._diag[i][0]),x=k.getFromId(n,a._diag[i][1]),f&&x&&f.type!==x.type){S.log("Skipping splom dimension "+i+" with conflicting axis types");continue}f?(M(f,h),x&&x.type==="category"&&(x._categories=f._categories.slice())):M(x,h),c.push(i)}for(b(n,a),S.extendFlat(p,s(n,a)),v=m.length*y>r?p.sizeAvg||Math.max(p.size,3):l(a,y),u=0;u<c.length;u++)h=g[i=c[u]],f=k.getFromId(n,a._diag[i][0])||{},x=k.getFromId(n,a._diag[i][1])||{},T(n,a,f,x,m[u],m[u],v);var _=t(n,a);return _.matrix||(_.matrix=!0),_.matrixOptions=p,_.selectedOptions=d(n,a,a.selected),_.unselectedOptions=d(n,a,a.unselected),[{x:!1,y:!1,t:{},trace:a}]}},25784:function(K,z,e){var S=e(71828),k=e(85501),l=e(46880),T=e(34098),b=e(49508),d=e(94397),s=e(68645).isOpenSymbol;function t(o,r){function n(i,u){return S.coerce(o,r,l.dimensions,i,u)}n("label");var a=n("values");a&&a.length?n("visible"):r.visible=!1,n("axis.type"),n("axis.matches")}K.exports=function(o,r,n,a){function i(y,p){return S.coerce(o,r,l,y,p)}var u=k(o,r,{name:"dimensions",handleItemDefaults:t}),h=i("diagonal.visible"),f=i("showupperhalf"),x=i("showlowerhalf");if(d(r,u,"values")&&(h||f||x)){i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),b(o,r,n,a,i,{noAngleRef:!0,noStandOff:!0});var v=s(r.marker.symbol),g=T.isBubble(r);i("marker.line.width",v||g?1:0),function(y,p,m,w){var c,M,_=p.dimensions,E=_.length,L=p.showupperhalf,C=p.showlowerhalf,O=p.diagonal.visible,I=new Array(E),N=new Array(E);for(c=0;c<E;c++){var R=c?c+1:"";I[c]="x"+R,N[c]="y"+R}var V=w("xaxes",I),F=w("yaxes",N),D=p._diag=new Array(E);p._xaxes={},p._yaxes={};var U=[],j=[];function J(se,ge,ue,ce){if(se){var le=se.charAt(0),de=m._splomAxes[le];if(p["_"+le+"axes"][se]=1,ce.push(se),!(se in de)){var Ce=de[se]={};ue&&(Ce.label=ue.label||"",ue.visible&&ue.axis&&(ue.axis.type&&(Ce.type=ue.axis.type),ue.axis.matches&&(Ce.matches=ge)))}}}var X=!O&&!C,Z=!O&&!L;for(p._axesDim={},c=0;c<E;c++){var Y=_[c],W=c===0,Q=c===E-1,ne=W&&X||Q&&Z?void 0:V[c],re=W&&Z||Q&&X?void 0:F[c];J(ne,re,Y,U),J(re,ne,Y,j),D[c]=[ne,re],p._axesDim[ne]=c,p._axesDim[re]=c}for(c=0;c<U.length;c++)for(M=0;M<j.length;M++){var ie=U[c]+j[M];c>M&&L||c<M&&C?m._splomSubplots[ie]=1:c!==M||!O&&C&&L||(m._splomSubplots[ie]=1)}(!C||!O&&L&&C)&&(m._splomGridDflt.xside="bottom",m._splomGridDflt.yside="left")}(0,r,a,i),S.coerceSelectionMarkerOpacity(r,i)}else r.visible=!1}},28801:function(K,z,e){var S=e(71828),k=e(36922),l=e(19635).markerStyle;K.exports=function(T,b){var d=b.trace,s=T._fullLayout._splomScenes[d.uid];if(s){k(T,d),S.extendFlat(s.matrixOptions,l(T,d));var t=S.extendFlat({},s.matrixOptions,s.viewOpts);s.matrix.update(t,null)}}},35948:function(K,z){z.getDimIndex=function(e,S){for(var k=S._id,l={x:0,y:1}[k.charAt(0)],T=e._visibleDims,b=0;b<T.length;b++){var d=T[b];if(e._diag[d][l]===k)return b}return!1}},8567:function(K,z,e){var S=e(35948),k=e(20794).calcHover;K.exports={hoverPoints:function(l,T,b){var d=l.cd[0].trace,s=l.scene.matrixOptions.cdata,t=l.xa,o=l.ya,r=t.c2p(T),n=o.c2p(b),a=l.distance,i=S.getDimIndex(d,t),u=S.getDimIndex(d,o);if(i===!1||u===!1)return[l];for(var h,f,x=s[i],v=s[u],g=a,y=0;y<x.length;y++){var p=x[y],m=v[y],w=t.c2p(p)-r,c=o.c2p(m)-n,M=Math.sqrt(w*w+c*c);M<g&&(g=f=M,h=y)}return l.index=h,l.distance=g,l.dxy=f,h===void 0?[l]:[k(l,x,v,d)]}}},6419:function(K,z,e){var S=e(65017);S.basePlotModule=e(16947),K.exports=S},79410:function(K,z,e){var S=e(60487),k=e(71828),l=e(41675),T=e(64505).selectMode;function b(d,s){var t,o,r,n,a,i=d._fullLayout,u=i._size,h=s.trace,f=s.t,x=i._splomScenes[h.uid],v=x.matrixOptions,g=v.cdata,y=i._glcanvas.data()[0].regl,p=i.dragmode;if(g.length!==0){v.lower=h.showupperhalf,v.upper=h.showlowerhalf,v.diagonal=h.diagonal.visible;var m=h._visibleDims,w=g.length,c=x.viewOpts={};for(c.ranges=new Array(w),c.domains=new Array(w),a=0;a<m.length;a++){r=m[a];var M=c.ranges[a]=new Array(4),_=c.domains[a]=new Array(4);(t=l.getFromId(d,h._diag[r][0]))&&(M[0]=t._rl[0],M[2]=t._rl[1],_[0]=t.domain[0],_[2]=t.domain[1]),(o=l.getFromId(d,h._diag[r][1]))&&(M[1]=o._rl[0],M[3]=o._rl[1],_[1]=o.domain[0],_[3]=o.domain[1])}var E=d._context.plotGlPixelRatio,L=u.l*E,C=u.b*E,O=u.w*E,I=u.h*E;c.viewport=[L,C,O+L,I+C],x.matrix===!0&&(x.matrix=S(y));var N=i.clickmode.indexOf("select")>-1,R=!0;if(T(p)||h.selectedpoints||N){var V=h._length;if(h.selectedpoints){x.selectBatch=h.selectedpoints;var F=h.selectedpoints,D={};for(r=0;r<F.length;r++)D[F[r]]=!0;var U=[];for(r=0;r<V;r++)D[r]||U.push(r);x.unselectBatch=U}var j=f.xpx=new Array(w),J=f.ypx=new Array(w);for(a=0;a<m.length;a++){if(r=m[a],t=l.getFromId(d,h._diag[r][0]))for(j[a]=new Array(V),n=0;n<V;n++)j[a][n]=t.c2p(g[a][n]);if(o=l.getFromId(d,h._diag[r][1]))for(J[a]=new Array(V),n=0;n<V;n++)J[a][n]=o.c2p(g[a][n])}if(x.selectBatch.length||x.unselectBatch.length){var X=k.extendFlat({},v,x.unselectedOptions,c),Z=k.extendFlat({},v,x.selectedOptions,c);x.matrix.update(X,Z),R=!1}}else f.xpx=f.ypx=null;if(R){var Y=k.extendFlat({},v,c);x.matrix.update(Y,null)}}}K.exports=function(d,s,t){if(t.length)for(var o=0;o<t.length;o++)b(d,t[o][0])}},10164:function(K,z,e){var S=e(71828);K.exports=function(k,l){var T=k._fullLayout,b=l.uid,d=T._splomScenes;d||(d=T._splomScenes={});var s={dirty:!0,selectBatch:[],unselectBatch:[]},t=d[l.uid];return t||((t=d[b]=S.extendFlat({},s,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){t.matrix&&t.matrix.draw&&(t.selectBatch.length||t.unselectBatch.length?t.matrix.draw(t.unselectBatch,t.selectBatch):t.matrix.draw()),t.dirty=!1},t.destroy=function(){t.matrix&&t.matrix.destroy&&t.matrix.destroy(),t.matrixOptions=null,t.selectBatch=null,t.unselectBatch=null,t=null}),t.dirty||S.extendFlat(t,s),t}},8689:function(K,z,e){var S=e(71828),k=S.pushUnique,l=e(34098),T=e(35948);K.exports=function(b,d){var s=b.cd,t=s[0].trace,o=s[0].t,r=b.scene,n=r.matrixOptions.cdata,a=b.xaxis,i=b.yaxis,u=[];if(!r)return u;var h=!l.hasMarkers(t)&&!l.hasText(t);if(t.visible!==!0||h)return u;var f=T.getDimIndex(t,a),x=T.getDimIndex(t,i);if(f===!1||x===!1)return u;var v=o.xpx[f],g=o.ypx[x],y=n[f],p=n[x],m=(b.scene.selectBatch||[]).slice(),w=[];if(d!==!1&&!d.degenerate)for(var c=0;c<y.length;c++)d.contains([v[c],g[c]],null,c,b)?(u.push({pointNumber:c,x:y[c],y:p[c]}),k(m,c)):m.indexOf(c)!==-1?k(m,c):w.push(c);var M=r.matrixOptions;return m.length||w.length?r.selectBatch.length||r.unselectBatch.length||r.matrix.update(r.unselectedOptions,S.extendFlat({},M,r.selectedOptions,r.viewOpts)):r.matrix.update(M,null),r.selectBatch=m,r.unselectBatch=w,u}},21850:function(K,z,e){var S=e(50693),k=e(12663).axisHoverFormat,l=e(5386).fF,T=e(2418),b=e(9012),d=e(1426).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:l({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:d({},b.showlegend,{dflt:!1})};d(s,S("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){s[t]=T[t]}),s.hoverinfo=d({},b.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,K.exports=s},88489:function(K,z,e){var S=e(71828),k=e(78803);function l(d){var s,t,o,r,n,a,i,u,h,f,x,v,g=d._x,y=d._y,p=d._z,m=d._len,w=-1/0,c=1/0,M=-1/0,_=1/0,E=-1/0,L=1/0,C="";for(m&&(i=g[0],h=y[0],x=p[0]),m>1&&(u=g[m-1],f=y[m-1],v=p[m-1]),s=0;s<m;s++)w=Math.max(w,g[s]),c=Math.min(c,g[s]),M=Math.max(M,y[s]),_=Math.min(_,y[s]),E=Math.max(E,p[s]),L=Math.min(L,p[s]),r||g[s]===i||(r=!0,C+="x"),n||y[s]===h||(n=!0,C+="y"),a||p[s]===x||(a=!0,C+="z");r||(C+="x"),n||(C+="y"),a||(C+="z");var O=T(d._x),I=T(d._y),N=T(d._z);C=(C=(C=C.replace("x",(i>u?"-":"+")+"x")).replace("y",(h>f?"-":"+")+"y")).replace("z",(x>v?"-":"+")+"z");var R=function(){m=0,O=[],I=[],N=[]};(!m||m<O.length*I.length*N.length)&&R();var V=function(le){return le==="x"?g:le==="y"?y:p},F=function(le){return le==="x"?O:le==="y"?I:N},D=function(le){return le[m-1]<le[0]?-1:1},U=V(C[1]),j=V(C[3]),J=V(C[5]),X=F(C[1]).length,Z=F(C[3]).length,Y=F(C[5]).length,W=!1,Q=function(le,de,Ce){return X*(Z*le+de)+Ce},ne=D(V(C[1])),re=D(V(C[3])),ie=D(V(C[5]));for(s=0;s<Y-1;s++){for(t=0;t<Z-1;t++){for(o=0;o<X-1;o++){var se=Q(s,t,o),ge=Q(s,t,o+1),ue=Q(s,t+1,o),ce=Q(s+1,t,o);if(U[se]*ne<U[ge]*ne&&j[se]*re<j[ue]*re&&J[se]*ie<J[ce]*ie||(W=!0),W)break}if(W)break}if(W)break}return W&&(S.warn("Encountered arbitrary coordinates! Unable to input data grid."),R()),{xMin:c,yMin:_,zMin:L,xMax:w,yMax:M,zMax:E,Xs:O,Ys:I,Zs:N,len:m,fill:C}}function T(d){return S.distinctVals(d).vals}function b(d,s){if(s===void 0&&(s=d.length),S.isTypedArray(d))return d.subarray(0,s);for(var t=[],o=0;o<s;o++)t[o]=+d[o];return t}K.exports={calc:function(d,s){s._len=Math.min(s.u.length,s.v.length,s.w.length,s.x.length,s.y.length,s.z.length),s._u=b(s.u,s._len),s._v=b(s.v,s._len),s._w=b(s.w,s._len),s._x=b(s.x,s._len),s._y=b(s.y,s._len),s._z=b(s.z,s._len);var t=l(s);s._gridFill=t.fill,s._Xs=t.Xs,s._Ys=t.Ys,s._Zs=t.Zs,s._len=t.len;var o,r,n,a=0;s.starts&&(o=b(s.starts.x||[]),r=b(s.starts.y||[]),n=b(s.starts.z||[]),a=Math.min(o.length,r.length,n.length)),s._startsX=o||[],s._startsY=r||[],s._startsZ=n||[];var i,u=0,h=1/0;for(i=0;i<s._len;i++){var f=s._u[i],x=s._v[i],v=s._w[i],g=Math.sqrt(f*f+x*x+v*v);u=Math.max(u,g),h=Math.min(h,g)}for(k(d,s,{vals:[h,u],containerStr:"",cLetter:"c"}),i=0;i<a;i++){var y=o[i];t.xMax=Math.max(t.xMax,y),t.xMin=Math.min(t.xMin,y);var p=r[i];t.yMax=Math.max(t.yMax,p),t.yMin=Math.min(t.yMin,p);var m=n[i];t.zMax=Math.max(t.zMax,m),t.zMin=Math.min(t.zMin,m)}s._slen=a,s._normMax=u,s._xbnds=[t.xMin,t.xMax],s._ybnds=[t.yMin,t.yMax],s._zbnds=[t.zMin,t.zMax]},filter:b,processGrid:l}},90154:function(K,z,e){var S=e(9330).gl_streamtube3d,k=S.createTubeMesh,l=e(71828),T=e(81697).parseColorScale,b=e(21081).extractOpts,d=e(90060),s={xaxis:0,yaxis:1,zaxis:2};function t(i,u){this.scene=i,this.uid=u,this.mesh=null,this.data=null}var o=t.prototype;function r(i){var u=i.length;return u>2?i.slice(1,u-1):u===2?[(i[0]+i[1])/2]:i}function n(i){var u=i.length;return u===1?[.5,.5]:[i[1]-i[0],i[u-1]-i[u-2]]}function a(i,u){var h=i.fullSceneLayout,f=i.dataScale,x=u._len,v={};function g(X,Z){var Y=h[Z],W=f[s[Z]];return l.simpleMap(X,function(Q){return Y.d2l(Q)*W})}if(v.vectors=d(g(u._u,"xaxis"),g(u._v,"yaxis"),g(u._w,"zaxis"),x),!x)return{positions:[],cells:[]};var y=g(u._Xs,"xaxis"),p=g(u._Ys,"yaxis"),m=g(u._Zs,"zaxis");if(v.meshgrid=[y,p,m],v.gridFill=u._gridFill,u._slen)v.startingPositions=d(g(u._startsX,"xaxis"),g(u._startsY,"yaxis"),g(u._startsZ,"zaxis"));else{for(var w=p[0],c=r(y),M=r(m),_=new Array(c.length*M.length),E=0,L=0;L<c.length;L++)for(var C=0;C<M.length;C++)_[E++]=[c[L],w,M[C]];v.startingPositions=_}v.colormap=T(u),v.tubeSize=u.sizeref,v.maxLength=u.maxdisplayed;var O=g(u._xbnds,"xaxis"),I=g(u._ybnds,"yaxis"),N=g(u._zbnds,"zaxis"),R=n(y),V=n(p),F=n(m),D=[[O[0]-R[0],I[0]-V[0],N[0]-F[0]],[O[1]+R[1],I[1]+V[1],N[1]+F[1]]],U=S(v,D),j=b(u);U.vertexIntensityBounds=[j.min/u._normMax,j.max/u._normMax];var J=u.lightposition;return U.lightPosition=[J.x,J.y,J.z],U.ambient=u.lighting.ambient,U.diffuse=u.lighting.diffuse,U.specular=u.lighting.specular,U.roughness=u.lighting.roughness,U.fresnel=u.lighting.fresnel,U.opacity=u.opacity,u._pad=U.tubeScale*u.sizeref*2,U}o.handlePick=function(i){var u=this.scene.fullSceneLayout,h=this.scene.dataScale;function f(g,y){var p=u[y],m=h[s[y]];return p.l2c(g)/m}if(i.object===this.mesh){var x=i.data.position,v=i.data.velocity;return i.traceCoordinate=[f(x[0],"xaxis"),f(x[1],"yaxis"),f(x[2],"zaxis"),f(v[0],"xaxis"),f(v[1],"yaxis"),f(v[2],"zaxis"),i.data.intensity*this.data._normMax,i.data.divergence],i.textLabel=this.data.hovertext||this.data.text,!0}},o.update=function(i){this.data=i;var u=a(this.scene,i);this.mesh.update(u)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},K.exports=function(i,u){var h=i.glplot.gl,f=a(i,u),x=k(h,f),v=new t(i,u.uid);return v.mesh=x,v.data=u,x._trace=v,i.glplot.add(x),v}},22459:function(K,z,e){var S=e(71828),k=e(1586),l=e(21850);K.exports=function(T,b,d,s){function t(h,f){return S.coerce(T,b,l,h,f)}var o=t("u"),r=t("v"),n=t("w"),a=t("x"),i=t("y"),u=t("z");o&&o.length&&r&&r.length&&n&&n.length&&a&&a.length&&i&&i.length&&u&&u.length?(t("starts.x"),t("starts.y"),t("starts.z"),t("maxdisplayed"),t("sizeref"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(T,b,s,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),b._length=null):b.visible=!1}},61510:function(K,z,e){K.exports={moduleType:"trace",name:"streamtube",basePlotModule:e(58547),categories:["gl3d","showLegend"],attributes:e(21850),supplyDefaults:e(22459),colorbar:{min:"cmin",max:"cmax"},calc:e(88489).calc,plot:e(90154),eventData:function(S,k){return S.tubex=S.x,S.tubey=S.y,S.tubez=S.z,S.tubeu=k.traceCoordinate[3],S.tubev=k.traceCoordinate[4],S.tubew=k.traceCoordinate[5],S.norm=k.traceCoordinate[6],S.divergence=k.traceCoordinate[7],delete S.x,delete S.y,delete S.z,S},meta:{}}},57564:function(K,z,e){var S=e(9012),k=e(5386).fF,l=e(5386).si,T=e(50693),b=e(27670).Y,d=e(34e3),s=e(7055),t=e(1426).extendFlat;K.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:t({colors:{valType:"data_array",editType:"calc"},line:{color:t({},d.marker.line.color,{dflt:null}),width:t({},d.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:d.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:l({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:d.hovertext,hoverinfo:t({},S.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:k({},{keys:s.eventDataKeys}),textfont:d.textfont,insidetextorientation:d.insidetextorientation,insidetextfont:d.insidetextfont,outsidetextfont:t({},d.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:d.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:b({name:"sunburst",trace:!0,editType:"calc"})}},66888:function(K,z,e){var S=e(74875);z.name="sunburst",z.plot=function(k,l,T,b){S.plotBasePlot(z.name,k,l,T,b)},z.clean=function(k,l,T,b){S.cleanBasePlot(z.name,k,l,T,b)}},52147:function(K,z,e){var S=e(674),k=e(92770),l=e(71828),T=e(21081).makeColorScaleFuncFromTrace,b=e(32354).makePullColorFn,d=e(32354).generateExtendedColors,s=e(21081).calc,t=e(50606).ALMOST_EQUAL,o={},r={},n={};function a(i,u,h){var f=0,x=i.children;if(x){for(var v=x.length,g=0;g<v;g++)f+=a(x[g],u,h);h.branches&&f++}else h.leaves&&f++;return i.value=i.data.data.value=f,u._values||(u._values=[]),u._values[i.data.data.i]=f,f}z.calc=function(i,u){var h,f,x,v,g,y,p=i._fullLayout,m=u.ids,w=l.isArrayOrTypedArray(m),c=u.labels,M=u.parents,_=u.values,E=l.isArrayOrTypedArray(_),L=[],C={},O={},I=function(ie){return ie||typeof ie=="number"},N=function(ie){return!E||k(_[ie])&&_[ie]>=0};w?(h=Math.min(m.length,M.length),f=function(ie){return I(m[ie])&&N(ie)},x=function(ie){return String(m[ie])}):(h=Math.min(c.length,M.length),f=function(ie){return I(c[ie])&&N(ie)},x=function(ie){return String(c[ie])}),E&&(h=Math.min(h,_.length));for(var R=0;R<h;R++)if(f(R)){var V=x(R),F=I(M[R])?String(M[R]):"",D={i:R,id:V,pid:F,label:I(c[R])?String(c[R]):""};E&&(D.v=+_[R]),L.push(D),g=V,C[v=F]?C[v].push(g):C[v]=[g],O[g]=1}if(C[""]){if(C[""].length>1){for(var U=l.randstr(),j=0;j<L.length;j++)L[j].pid===""&&(L[j].pid=U);L.unshift({hasMultipleRoots:!0,id:U,pid:"",label:""})}}else{var J,X=[];for(J in C)O[J]||X.push(J);if(X.length!==1)return l.warn(["Multiple implied roots, cannot build",u.type,"hierarchy of",u.name+".","These roots include:",X.join(", ")].join(" "));J=X[0],L.unshift({hasImpliedRoot:!0,id:J,pid:"",label:J})}try{y=S.stratify().id(function(ie){return ie.id}).parentId(function(ie){return ie.pid})(L)}catch(ie){return l.warn(["Failed to build",u.type,"hierarchy of",u.name+".","Error:",ie.message].join(" "))}var Z=S.hierarchy(y),Y=!1;if(E)switch(u.branchvalues){case"remainder":Z.sum(function(ie){return ie.data.v});break;case"total":Z.each(function(ie){var se=ie.data.data,ge=se.v;if(ie.children){var ue=ie.children.reduce(function(ce,le){return ce+le.data.data.v},0);if((se.hasImpliedRoot||se.hasMultipleRoots)&&(ge=ue),ge<ue*t)return Y=!0,l.warn(["Total value for node",ie.data.data.id,"of",u.name,"is smaller than the sum of its children.",`
parent value =`,ge,`
children sum =`,ue].join(" "))}ie.value=ge})}else a(Z,u,{branches:u.count.indexOf("branches")!==-1,leaves:u.count.indexOf("leaves")!==-1});if(!Y){var W,Q;u.sort&&Z.sort(function(ie,se){return se.value-ie.value});var ne=u.marker.colors||[],re=!!ne.length;return u._hasColorscale?(re||(ne=E?u.values:u._values),s(i,u,{vals:ne,containerStr:"marker",cLetter:"c"}),Q=T(u.marker)):W=b(p["_"+u.type+"colormap"]),Z.each(function(ie){var se=ie.data.data;se.color=u._hasColorscale?Q(ne[se.i]):W(ne[se.i],se.id)}),L[0].hierarchy=Z,L}},z._runCrossTraceCalc=function(i,u){var h=u._fullLayout,f=u.calcdata,x=h[i+"colorway"],v=h["_"+i+"colormap"];h["extend"+i+"colors"]&&(x=d(x,i==="icicle"?n:i==="treemap"?r:o));var g,y=0;function p(c){var M=c.data.data,_=M.id;M.color===!1&&(v[_]?M.color=v[_]:c.parent?c.parent.parent?M.color=c.parent.data.data.color:(v[_]=M.color=x[y%x.length],y++):M.color=g)}for(var m=0;m<f.length;m++){var w=f[m][0];w.trace.type===i&&w.hierarchy&&(g=w.trace.root.color,w.hierarchy.each(p))}},z.crossTraceCalc=function(i){return z._runCrossTraceCalc("sunburst",i)}},7055:function(K){K.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},17094:function(K,z,e){var S=e(71828),k=e(57564),l=e(27670).c,T=e(90769).handleText,b=e(21081),d=b.hasColorscale,s=b.handleDefaults;K.exports=function(t,o,r,n){function a(v,g){return S.coerce(t,o,k,v,g)}var i=a("labels"),u=a("parents");if(i&&i.length&&u&&u.length){var h=a("values");h&&h.length?a("branchvalues"):a("count"),a("level"),a("maxdepth"),a("marker.line.width")&&a("marker.line.color",n.paper_bgcolor),a("marker.colors");var f=o._hasColorscale=d(t,"marker","colors")||(t.marker||{}).coloraxis;f&&s(t,o,n,a,{prefix:"marker.",cLetter:"c"}),a("leaf.opacity",f?1:.7);var x=a("text");a("texttemplate"),o.texttemplate||a("textinfo",Array.isArray(x)?"text+label":"label"),a("hovertext"),a("hovertemplate"),T(t,o,n,a,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),a("insidetextorientation"),a("sort"),a("rotation"),a("root.color"),l(o,n,a),o._length=null}else o.visible=!1}},83523:function(K,z,e){var S=e(39898),k=e(73972),l=e(23469).appendArrayPointValue,T=e(30211),b=e(71828),d=e(11086),s=e(2791),t=e(53581).formatPieValue;function o(r,n,a){for(var i=r.data.data,u={curveNumber:n.index,pointNumber:i.i,data:n._input,fullData:n},h=0;h<a.length;h++){var f=a[h];f in r&&(u[f]=r[f])}return"parentString"in r&&!s.isHierarchyRoot(r)&&(u.parent=r.parentString),l(u,n,i.i),u}K.exports=function(r,n,a,i,u){var h=i[0],f=h.trace,x=h.hierarchy,v=f.type==="sunburst",g=f.type==="treemap"||f.type==="icicle";"_hasHoverLabel"in f||(f._hasHoverLabel=!1),"_hasHoverEvent"in f||(f._hasHoverEvent=!1),r.on("mouseover",function(y){var p=a._fullLayout;if(!a._dragging&&p.hovermode!==!1){var m,w=a._fullData[f.index],c=y.data.data,M=c.i,_=s.isHierarchyRoot(y),E=s.getParent(x,y),L=s.getValue(y),C=function(ne){return b.castOption(w,M,ne)},O=C("hovertemplate"),I=T.castHoverinfo(w,p,M),N=p.separators;if(O||I&&I!=="none"&&I!=="skip"){var R,V;v&&(R=h.cx+y.pxmid[0]*(1-y.rInscribed),V=h.cy+y.pxmid[1]*(1-y.rInscribed)),g&&(R=y._hoverX,V=y._hoverY);var F,D={},U=[],j=[],J=function(ne){return U.indexOf(ne)!==-1};I&&(U=I==="all"?w._module.attributes.hoverinfo.flags:I.split("+")),D.label=c.label,J("label")&&D.label&&j.push(D.label),c.hasOwnProperty("v")&&(D.value=c.v,D.valueLabel=t(D.value,N),J("value")&&j.push(D.valueLabel)),D.currentPath=y.currentPath=s.getPath(y.data),J("current path")&&!_&&j.push(D.currentPath);var X=[],Z=function(){X.indexOf(F)===-1&&(j.push(F),X.push(F))};D.percentParent=y.percentParent=L/s.getValue(E),D.parent=y.parentString=s.getPtLabel(E),J("percent parent")&&(F=s.formatPercent(D.percentParent,N)+" of "+D.parent,Z()),D.percentEntry=y.percentEntry=L/s.getValue(n),D.entry=y.entry=s.getPtLabel(n),!J("percent entry")||_||y.onPathbar||(F=s.formatPercent(D.percentEntry,N)+" of "+D.entry,Z()),D.percentRoot=y.percentRoot=L/s.getValue(x),D.root=y.root=s.getPtLabel(x),J("percent root")&&!_&&(F=s.formatPercent(D.percentRoot,N)+" of "+D.root,Z()),D.text=C("hovertext")||C("text"),J("text")&&(F=D.text,b.isValidTextValue(F)&&j.push(F)),m=[o(y,w,u.eventDataKeys)];var Y={trace:w,y:V,_x0:y._x0,_x1:y._x1,_y0:y._y0,_y1:y._y1,text:j.join("<br>"),name:O||J("name")?w.name:void 0,color:C("hoverlabel.bgcolor")||c.color,borderColor:C("hoverlabel.bordercolor"),fontFamily:C("hoverlabel.font.family"),fontSize:C("hoverlabel.font.size"),fontColor:C("hoverlabel.font.color"),nameLength:C("hoverlabel.namelength"),textAlign:C("hoverlabel.align"),hovertemplate:O,hovertemplateLabels:D,eventData:m};v&&(Y.x0=R-y.rInscribed*y.rpx1,Y.x1=R+y.rInscribed*y.rpx1,Y.idealAlign=y.pxmid[0]<0?"left":"right"),g&&(Y.x=R,Y.idealAlign=R<0?"left":"right");var W=[];T.loneHover(Y,{container:p._hoverlayer.node(),outerContainer:p._paper.node(),gd:a,inOut_bbox:W}),m[0].bbox=W[0],f._hasHoverLabel=!0}if(g){var Q=r.select("path.surface");u.styleOne(Q,y,w,{hovered:!0})}f._hasHoverEvent=!0,a.emit("plotly_hover",{points:m||[o(y,w,u.eventDataKeys)],event:S.event})}}),r.on("mouseout",function(y){var p=a._fullLayout,m=a._fullData[f.index],w=S.select(this).datum();if(f._hasHoverEvent&&(y.originalEvent=S.event,a.emit("plotly_unhover",{points:[o(w,m,u.eventDataKeys)],event:S.event}),f._hasHoverEvent=!1),f._hasHoverLabel&&(T.loneUnhover(p._hoverlayer.node()),f._hasHoverLabel=!1),g){var c=r.select("path.surface");u.styleOne(c,w,m,{hovered:!1})}}),r.on("click",function(y){var p=a._fullLayout,m=a._fullData[f.index],w=v&&(s.isHierarchyRoot(y)||s.isLeaf(y)),c=s.getPtId(y),M=s.isEntry(y)?s.findEntryWithChild(x,c):s.findEntryWithLevel(x,c),_=s.getPtId(M),E={points:[o(y,m,u.eventDataKeys)],event:S.event};w||(E.nextLevel=_);var L=d.triggerHandler(a,"plotly_"+f.type+"click",E);if(L!==!1&&p.hovermode&&(a._hoverdata=[o(y,m,u.eventDataKeys)],T.click(a,S.event)),!w&&L!==!1&&!a._dragging&&!a._transitioning){k.call("_storeDirectGUIEdit",m,p._tracePreGUI[m.uid],{level:m.level});var C={data:[{level:_}],traces:[f.index]},O={frame:{redraw:!1,duration:u.transitionTime},transition:{duration:u.transitionTime,easing:u.transitionEasing},mode:"immediate",fromcurrent:!0};T.loneUnhover(p._hoverlayer.node()),k.call("animate",a,C,O)}})}},2791:function(K,z,e){var S=e(71828),k=e(7901),l=e(6964),T=e(53581);function b(d){return d.data.data.pid}z.findEntryWithLevel=function(d,s){var t;return s&&d.eachAfter(function(o){if(z.getPtId(o)===s)return t=o.copy()}),t||d},z.findEntryWithChild=function(d,s){var t;return d.eachAfter(function(o){for(var r=o.children||[],n=0;n<r.length;n++){var a=r[n];if(z.getPtId(a)===s)return t=o.copy()}}),t||d},z.isEntry=function(d){return!d.parent},z.isLeaf=function(d){return!d.children},z.getPtId=function(d){return d.data.data.id},z.getPtLabel=function(d){return d.data.data.label},z.getValue=function(d){return d.value},z.isHierarchyRoot=function(d){return b(d)===""},z.setSliceCursor=function(d,s,t){var o=t.isTransitioning;if(!o){var r=d.datum();o=t.hideOnRoot&&z.isHierarchyRoot(r)||t.hideOnLeaves&&z.isLeaf(r)}l(d,o?null:"pointer")},z.getInsideTextFontKey=function(d,s,t,o,r){var n=(r||{}).onPathbar?"pathbar.textfont":"insidetextfont",a=t.data.data.i;return S.castOption(s,a,n+"."+d)||S.castOption(s,a,"textfont."+d)||o.size},z.getOutsideTextFontKey=function(d,s,t,o){var r=t.data.data.i;return S.castOption(s,r,"outsidetextfont."+d)||S.castOption(s,r,"textfont."+d)||o.size},z.isOutsideText=function(d,s){return!d._hasColorscale&&z.isHierarchyRoot(s)},z.determineTextFont=function(d,s,t,o){return z.isOutsideText(d,s)?function(r,n,a){return{color:z.getOutsideTextFontKey("color",r,n,a),family:z.getOutsideTextFontKey("family",r,n,a),size:z.getOutsideTextFontKey("size",r,n,a)}}(d,s,t):function(r,n,a,i){var u=(i||{}).onPathbar,h=n.data.data,f=h.i,x=S.castOption(r,f,(u?"pathbar.textfont":"insidetextfont")+".color");return!x&&r._input.textfont&&(x=S.castOption(r._input,f,"textfont.color")),{color:x||k.contrast(h.color),family:z.getInsideTextFontKey("family",r,n,a,i),size:z.getInsideTextFontKey("size",r,n,a,i)}}(d,s,t,o)},z.hasTransition=function(d){return!!(d&&d.duration>0)},z.getMaxDepth=function(d){return d.maxdepth>=0?d.maxdepth:1/0},z.isHeader=function(d,s){return!(z.isLeaf(d)||d.depth===s._maxDepth-1)},z.getParent=function(d,s){return z.findEntryWithLevel(d,b(s))},z.listPath=function(d,s){var t=d.parent;if(!t)return[];var o=s?[t.data[s]]:[t];return z.listPath(t,s).concat(o)},z.getPath=function(d){return z.listPath(d,"label").join("/")+"/"},z.formatValue=T.formatPieValue,z.formatPercent=function(d,s){var t=S.formatPercent(d,0);return t==="0%"&&(t=T.formatPiePercent(d,s)),t}},87619:function(K,z,e){K.exports={moduleType:"trace",name:"sunburst",basePlotModule:e(66888),categories:[],animatable:!0,attributes:e(57564),layoutAttributes:e(2654),supplyDefaults:e(17094),supplyLayoutDefaults:e(57034),calc:e(52147).calc,crossTraceCalc:e(52147).crossTraceCalc,plot:e(24714).plot,style:e(29969).style,colorbar:e(4898),meta:{}}},2654:function(K){K.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57034:function(K,z,e){var S=e(71828),k=e(2654);K.exports=function(l,T){function b(d,s){return S.coerce(l,T,k,d,s)}b("sunburstcolorway",T.colorway),b("extendsunburstcolors")}},24714:function(K,z,e){var S=e(39898),k=e(674),l=e(81684).sX,T=e(91424),b=e(71828),d=e(63893),s=e(72597),t=s.recordMinTextSize,o=s.clearMinTextSize,r=e(14575),n=e(53581).getRotationAngle,a=r.computeTransform,i=r.transformInsideText,u=e(29969).styleOne,h=e(16688).resizeText,f=e(83523),x=e(7055),v=e(2791);function g(p,m,w,c){var M=p._context.staticPlot,_=p._fullLayout,E=!_.uniformtext.mode&&v.hasTransition(c),L=S.select(w).selectAll("g.slice"),C=m[0],O=C.trace,I=C.hierarchy,N=v.findEntryWithLevel(I,O.level),R=v.getMaxDepth(O),V=_._size,F=O.domain,D=V.w*(F.x[1]-F.x[0]),U=V.h*(F.y[1]-F.y[0]),j=.5*Math.min(D,U),J=C.cx=V.l+V.w*(F.x[1]+F.x[0])/2,X=C.cy=V.t+V.h*(1-F.y[0])-U/2;if(!N)return L.remove();var Z=null,Y={};E&&L.each(function(Ae){Y[v.getPtId(Ae)]={rpx0:Ae.rpx0,rpx1:Ae.rpx1,x0:Ae.x0,x1:Ae.x1,transform:Ae.transform},!Z&&v.isEntry(Ae)&&(Z=Ae)});var W=function(Ae){return k.partition().size([2*Math.PI,Ae.height+1])(Ae)}(N).descendants(),Q=N.height+1,ne=0,re=R;C.hasMultipleRoots&&v.isHierarchyRoot(N)&&(W=W.slice(1),Q-=1,ne=1,re+=1),W=W.filter(function(Ae){return Ae.y1<=re});var ie=n(O.rotation);ie&&W.forEach(function(Ae){Ae.x0+=ie,Ae.x1+=ie});var se=Math.min(Q,R),ge=function(Ae){return(Ae-ne)/se*j},ue=function(Ae,$){return[Ae*Math.cos($),-Ae*Math.sin($)]},ce=function(Ae){return b.pathAnnulus(Ae.rpx0,Ae.rpx1,Ae.x0,Ae.x1,J,X)},le=function(Ae){return J+y(Ae)[0]*(Ae.transform.rCenter||0)+(Ae.transform.x||0)},de=function(Ae){return X+y(Ae)[1]*(Ae.transform.rCenter||0)+(Ae.transform.y||0)};(L=L.data(W,v.getPtId)).enter().append("g").classed("slice",!0),E?L.exit().transition().each(function(){var Ae=S.select(this);Ae.select("path.surface").transition().attrTween("d",function($){var oe=function(pe){var ye,ke=v.getPtId(pe),De=Y[ke],Pe=Y[v.getPtId(N)];if(Pe){var Re=(pe.x1>Pe.x1?2*Math.PI:0)+ie;ye=pe.rpx1<Pe.rpx1?{x0:pe.x0,x1:pe.x1,rpx0:0,rpx1:0}:{x0:Re,x1:Re,rpx0:pe.rpx0,rpx1:pe.rpx1}}else{var fe,ve=v.getPtId(pe.parent);L.each(function(nt){if(v.getPtId(nt)===ve)return fe=nt});var Te,ze=fe.children;ze.forEach(function(nt,tt){if(v.getPtId(nt)===ke)return Te=tt});var He=ze.length,Ve=l(fe.x0,fe.x1);ye={rpx0:j,rpx1:j,x0:Ve(Te/He),x1:Ve((Te+1)/He)}}return l(De,ye)}($);return function(pe){return ce(oe(pe))}}),Ae.select("g.slicetext").attr("opacity",0)}).remove():L.exit().remove(),L.order();var Ce=null;if(E&&Z){var xe=v.getPtId(Z);L.each(function(Ae){Ce===null&&v.getPtId(Ae)===xe&&(Ce=Ae.x1)})}var _e=L;function we(Ae){var $=Ae.parent,oe=Y[v.getPtId($)],pe={};if(oe){var ye=$.children,ke=ye.indexOf(Ae),De=ye.length,Pe=l(oe.x0,oe.x1);pe.x0=Pe(ke/De),pe.x1=Pe(ke/De)}else pe.x0=pe.x1=0;return pe}E&&(_e=_e.transition().each("end",function(){var Ae=S.select(this);v.setSliceCursor(Ae,p,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),_e.each(function(Ae){var $=S.select(this),oe=b.ensureSingle($,"path","surface",function(Re){Re.style("pointer-events",M?"none":"all")});Ae.rpx0=ge(Ae.y0),Ae.rpx1=ge(Ae.y1),Ae.xmid=(Ae.x0+Ae.x1)/2,Ae.pxmid=ue(Ae.rpx1,Ae.xmid),Ae.midangle=-(Ae.xmid-Math.PI/2),Ae.startangle=-(Ae.x0-Math.PI/2),Ae.stopangle=-(Ae.x1-Math.PI/2),Ae.halfangle=.5*Math.min(b.angleDelta(Ae.x0,Ae.x1)||Math.PI,Math.PI),Ae.ring=1-Ae.rpx0/Ae.rpx1,Ae.rInscribed=function(Re){return Re.rpx0===0&&b.isFullCircle([Re.x0,Re.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(Re.halfangle)),Re.ring/2))}(Ae),E?oe.transition().attrTween("d",function(Re){var fe=function(ve){var Te,ze=Y[v.getPtId(ve)],He={x0:ve.x0,x1:ve.x1,rpx0:ve.rpx0,rpx1:ve.rpx1};if(ze)Te=ze;else if(Z)if(ve.parent)if(Ce){var Ve=(ve.x1>Ce?2*Math.PI:0)+ie;Te={x0:Ve,x1:Ve}}else Te={rpx0:j,rpx1:j},b.extendFlat(Te,we(ve));else Te={rpx0:0,rpx1:0};else Te={x0:ie,x1:ie};return l(Te,He)}(Re);return function(ve){return ce(fe(ve))}}):oe.attr("d",ce),$.call(f,N,p,m,{eventDataKeys:x.eventDataKeys,transitionTime:x.CLICK_TRANSITION_TIME,transitionEasing:x.CLICK_TRANSITION_EASING}).call(v.setSliceCursor,p,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:p._transitioning}),oe.call(u,Ae,O);var pe=b.ensureSingle($,"g","slicetext"),ye=b.ensureSingle(pe,"text","",function(Re){Re.attr("data-notex",1)}),ke=b.ensureUniformFontSize(p,v.determineTextFont(O,Ae,_.font));ye.text(z.formatSliceLabel(Ae,N,O,m,_)).classed("slicetext",!0).attr("text-anchor","middle").call(T.font,ke).call(d.convertToTspans,p);var De=T.bBox(ye.node());Ae.transform=i(De,Ae,C),Ae.transform.targetX=le(Ae),Ae.transform.targetY=de(Ae);var Pe=function(Re,fe){var ve=Re.transform;return a(ve,fe),ve.fontSize=ke.size,t(O.type,ve,_),b.getTextTransform(ve)};E?ye.transition().attrTween("transform",function(Re){var fe=function(ve){var Te,ze=Y[v.getPtId(ve)],He=ve.transform;if(ze)Te=ze;else if(Te={rpx1:ve.rpx1,transform:{textPosAngle:He.textPosAngle,scale:0,rotate:He.rotate,rCenter:He.rCenter,x:He.x,y:He.y}},Z)if(ve.parent)if(Ce){var Ve=ve.x1>Ce?2*Math.PI:0;Te.x0=Te.x1=Ve}else b.extendFlat(Te,we(ve));else Te.x0=Te.x1=ie;else Te.x0=Te.x1=ie;var nt=l(Te.transform.textPosAngle,ve.transform.textPosAngle),tt=l(Te.rpx1,ve.rpx1),ot=l(Te.x0,ve.x0),pt=l(Te.x1,ve.x1),Tt=l(Te.transform.scale,He.scale),yt=l(Te.transform.rotate,He.rotate),dt=He.rCenter===0?3:Te.transform.rCenter===0?1/3:1,Pt=l(Te.transform.rCenter,He.rCenter);return function(Et){var Ot=tt(Et),Nt=ot(Et),zt=pt(Et),Ze=function(je){return Pt(Math.pow(je,dt))}(Et),Ye={pxmid:ue(Ot,(Nt+zt)/2),rpx1:Ot,transform:{textPosAngle:nt(Et),rCenter:Ze,x:He.x,y:He.y}};return t(O.type,He,_),{transform:{targetX:le(Ye),targetY:de(Ye),scale:Tt(Et),rotate:yt(Et),rCenter:Ze}}}}(Re);return function(ve){return Pe(fe(ve),De)}}):ye.attr("transform",Pe(Ae,De))})}function y(p){return m=p.rpx1,w=p.transform.textPosAngle,[m*Math.sin(w),-m*Math.cos(w)];var m,w}z.plot=function(p,m,w,c){var M,_,E=p._fullLayout,L=E._sunburstlayer,C=!w,O=!E.uniformtext.mode&&v.hasTransition(w);o("sunburst",E),(M=L.selectAll("g.trace.sunburst").data(m,function(I){return I[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),M.order(),O?(c&&(_=c()),S.transition().duration(w.duration).ease(w.easing).each("end",function(){_&&_()}).each("interrupt",function(){_&&_()}).each(function(){L.selectAll("g.trace").each(function(I){g(p,I,this,w)})})):(M.each(function(I){g(p,I,this,w)}),E.uniformtext.mode&&h(p,E._sunburstlayer.selectAll(".trace"),"sunburst")),C&&M.exit().remove()},z.formatSliceLabel=function(p,m,w,c,M){var _=w.texttemplate,E=w.textinfo;if(!(_||E&&E!=="none"))return"";var L=M.separators,C=c[0],O=p.data.data,I=C.hierarchy,N=v.isHierarchyRoot(p),R=v.getParent(I,p),V=v.getValue(p);if(!_){var F,D=E.split("+"),U=function(re){return D.indexOf(re)!==-1},j=[];if(U("label")&&O.label&&j.push(O.label),O.hasOwnProperty("v")&&U("value")&&j.push(v.formatValue(O.v,L)),!N){U("current path")&&j.push(v.getPath(p.data));var J=0;U("percent parent")&&J++,U("percent entry")&&J++,U("percent root")&&J++;var X=J>1;if(J){var Z,Y=function(re){F=v.formatPercent(Z,L),X&&(F+=" of "+re),j.push(F)};U("percent parent")&&!N&&(Z=V/v.getValue(R),Y("parent")),U("percent entry")&&(Z=V/v.getValue(m),Y("entry")),U("percent root")&&(Z=V/v.getValue(I),Y("root"))}}return U("text")&&(F=b.castOption(w,O.i,"text"),b.isValidTextValue(F)&&j.push(F)),j.join("<br>")}var W=b.castOption(w,O.i,"texttemplate");if(!W)return"";var Q={};O.label&&(Q.label=O.label),O.hasOwnProperty("v")&&(Q.value=O.v,Q.valueLabel=v.formatValue(O.v,L)),Q.currentPath=v.getPath(p.data),N||(Q.percentParent=V/v.getValue(R),Q.percentParentLabel=v.formatPercent(Q.percentParent,L),Q.parent=v.getPtLabel(R)),Q.percentEntry=V/v.getValue(m),Q.percentEntryLabel=v.formatPercent(Q.percentEntry,L),Q.entry=v.getPtLabel(m),Q.percentRoot=V/v.getValue(I),Q.percentRootLabel=v.formatPercent(Q.percentRoot,L),Q.root=v.getPtLabel(I),O.hasOwnProperty("color")&&(Q.color=O.color);var ne=b.castOption(w,O.i,"text");return(b.isValidTextValue(ne)||ne==="")&&(Q.text=ne),Q.customdata=b.castOption(w,O.i,"customdata"),b.texttemplateString(W,Q,M._d3locale,Q,w._meta||{})}},29969:function(K,z,e){var S=e(39898),k=e(7901),l=e(71828),T=e(72597).resizeText;function b(d,s,t){var o=s.data.data,r=!s.children,n=o.i,a=l.castOption(t,n,"marker.line.color")||k.defaultLine,i=l.castOption(t,n,"marker.line.width")||0;d.style("stroke-width",i).call(k.fill,o.color).call(k.stroke,a).style("opacity",r?t.leaf.opacity:null)}K.exports={style:function(d){var s=d._fullLayout._sunburstlayer.selectAll(".trace");T(d,s,"sunburst"),s.each(function(t){var o=S.select(this),r=t[0].trace;o.style("opacity",r.opacity),o.selectAll("path.surface").each(function(n){S.select(this).call(b,n,r)})})},styleOne:b}},54532:function(K,z,e){var S=e(7901),k=e(50693),l=e(12663).axisHoverFormat,T=e(5386).fF,b=e(9012),d=e(1426).extendFlat,s=e(30962).overrideAll;function t(r){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:S.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:S.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var o=K.exports=s(d({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},k("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:t(),y:t(),z:t()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:d({},k.zauto,{}),zmin:d({},k.zmin,{}),zmax:d({},k.zmax,{})},hoverinfo:d({},b.hoverinfo),showlegend:d({},b.showlegend,{dflt:!1})}),"calc","nested");o.x.editType=o.y.editType=o.z.editType="calc+clearAxisTypes",o.transforms=void 0},18396:function(K,z,e){var S=e(78803);K.exports=function(k,l){l.surfacecolor?S(k,l,{vals:l.surfacecolor,containerStr:"",cLetter:"c"}):S(k,l,{vals:l.z,containerStr:"",cLetter:"c"})}},43768:function(K,z,e){var S=e(9330).gl_surface3d,k=e(9330).ndarray,l=e(9330).ndarray_linear_interpolate.d2,T=e(824),b=e(43907),d=e(71828).isArrayOrTypedArray,s=e(81697).parseColorScale,t=e(78614),o=e(21081).extractOpts;function r(w,c,M){this.scene=w,this.uid=M,this.surface=c,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var n=r.prototype;n.getXat=function(w,c,M,_){var E=d(this.data.x)?d(this.data.x[0])?this.data.x[c][w]:this.data.x[w]:w;return M===void 0?E:_.d2l(E,0,M)},n.getYat=function(w,c,M,_){var E=d(this.data.y)?d(this.data.y[0])?this.data.y[c][w]:this.data.y[c]:c;return M===void 0?E:_.d2l(E,0,M)},n.getZat=function(w,c,M,_){var E=this.data.z[c][w];return E===null&&this.data.connectgaps&&this.data._interpolatedZ&&(E=this.data._interpolatedZ[c][w]),M===void 0?E:_.d2l(E,0,M)},n.handlePick=function(w){if(w.object===this.surface){var c=(w.data.index[0]-1)/this.dataScaleX-1,M=(w.data.index[1]-1)/this.dataScaleY-1,_=Math.max(Math.min(Math.round(c),this.data.z[0].length-1),0),E=Math.max(Math.min(Math.round(M),this.data._ylength-1),0);w.index=[_,E],w.traceCoordinate=[this.getXat(_,E),this.getYat(_,E),this.getZat(_,E)],w.dataCoordinate=[this.getXat(_,E,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(_,E,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(_,E,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var L=0;L<3;L++)w.dataCoordinate[L]!=null&&(w.dataCoordinate[L]*=this.scene.dataScale[L]);var C=this.data.hovertext||this.data.text;return Array.isArray(C)&&C[E]&&C[E][_]!==void 0?w.textLabel=C[E][_]:w.textLabel=C||"",w.data.dataCoordinate=w.dataCoordinate.slice(),this.surface.highlight(w.data),this.scene.glplot.spikes.position=w.dataCoordinate,!0}};var a=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function i(w,c){if(w<c)return 0;for(var M=0;Math.floor(w%c)===0;)w/=c,M++;return M}function u(w){for(var c=[],M=0;M<a.length;M++){var _=a[M];c.push(i(w,_))}return c}function h(w){for(var c=u(w),M=w,_=0;_<a.length;_++)if(c[_]>0){M=a[_];break}return M}function f(w,c){if(!(w<1||c<1)){for(var M=u(w),_=u(c),E=1,L=0;L<a.length;L++)E*=Math.pow(a[L],Math.max(M[L],_[L]));return E}}n.calcXnums=function(w){var c,M=[];for(c=1;c<w;c++){var _=this.getXat(c-1,0),E=this.getXat(c,0);M[c-1]=E!==_&&_!=null&&E!=null?Math.abs(E-_):0}var L=0;for(c=1;c<w;c++)L+=M[c-1];for(c=1;c<w;c++)M[c-1]===0?M[c-1]=1:M[c-1]=Math.round(L/M[c-1]);return M},n.calcYnums=function(w){var c,M=[];for(c=1;c<w;c++){var _=this.getYat(0,c-1),E=this.getYat(0,c);M[c-1]=E!==_&&_!=null&&E!=null?Math.abs(E-_):0}var L=0;for(c=1;c<w;c++)L+=M[c-1];for(c=1;c<w;c++)M[c-1]===0?M[c-1]=1:M[c-1]=Math.round(L/M[c-1]);return M};var x=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],v=x[9],g=x[13];function y(w,c,M){var _=M[8]+M[2]*c[0]+M[5]*c[1];return w[0]=(M[6]+M[0]*c[0]+M[3]*c[1])/_,w[1]=(M[7]+M[1]*c[0]+M[4]*c[1])/_,w}function p(w,c,M){return function(_,E,L,C){for(var O=[0,0],I=_.shape[0],N=_.shape[1],R=0;R<I;R++)for(var V=0;V<N;V++)L(O,[R,V],C),_.set(R,V,l(E,O[0],O[1]))}(w,c,y,M),w}function m(w,c){for(var M=!1,_=0;_<w.length;_++)if(c===w[_]){M=!0;break}M===!1&&w.push(c)}n.estimateScale=function(w,c){for(var M=1+function(E){if(E.length!==0){for(var L=1,C=0;C<E.length;C++)L=f(L,E[C]);return L}}(c===0?this.calcXnums(w):this.calcYnums(w));M<v;)M*=2;for(;M>g;)M--,M/=h(M),++M<v&&(M=g);var _=Math.round(M/w);return _>1?_:1},n.refineCoords=function(w){for(var c=this.dataScaleX,M=this.dataScaleY,_=w[0].shape[0],E=w[0].shape[1],L=0|Math.floor(w[0].shape[0]*c+1),C=0|Math.floor(w[0].shape[1]*M+1),O=1+_+1,I=1+E+1,N=k(new Float32Array(O*I),[O,I]),R=[1/c,0,0,0,1/M,0,0,0,1],V=0;V<w.length;++V){this.surface.padField(N,w[V]);var F=k(new Float32Array(L*C),[L,C]);p(F,N,R),w[V]=F}},n.setContourLevels=function(){var w,c,M,_=[[],[],[]],E=[!1,!1,!1],L=!1;for(w=0;w<3;++w)if(this.showContour[w]&&(L=!0,this.contourSize[w]>0&&this.contourStart[w]!==null&&this.contourEnd[w]!==null&&this.contourEnd[w]>this.contourStart[w]))for(E[w]=!0,c=this.contourStart[w];c<this.contourEnd[w];c+=this.contourSize[w])M=c*this.scene.dataScale[w],m(_[w],M);if(L){var C=[[],[],[]];for(w=0;w<3;++w)this.showContour[w]&&(C[w]=E[w]?_[w]:this.scene.contourLevels[w]);this.surface.update({levels:C})}},n.update=function(w){var c,M,_,E,L=this.scene,C=L.fullSceneLayout,O=this.surface,I=s(w),N=L.dataScale,R=w.z[0].length,V=w._ylength,F=L.contourLevels;this.data=w;var D=[];for(c=0;c<3;c++)for(D[c]=[],M=0;M<R;M++)D[c][M]=[];for(M=0;M<R;M++)for(_=0;_<V;_++)D[0][M][_]=this.getXat(M,_,w.xcalendar,C.xaxis),D[1][M][_]=this.getYat(M,_,w.ycalendar,C.yaxis),D[2][M][_]=this.getZat(M,_,w.zcalendar,C.zaxis);if(w.connectgaps)for(w._emptypoints=b(D[2]),T(D[2],w._emptypoints),w._interpolatedZ=[],M=0;M<R;M++)for(w._interpolatedZ[M]=[],_=0;_<V;_++)w._interpolatedZ[M][_]=D[2][M][_];for(c=0;c<3;c++)for(M=0;M<R;M++)for(_=0;_<V;_++)(E=D[c][M][_])==null?D[c][M][_]=NaN:E=D[c][M][_]*=N[c];for(c=0;c<3;c++)for(M=0;M<R;M++)for(_=0;_<V;_++)(E=D[c][M][_])!=null&&(this.minValues[c]>E&&(this.minValues[c]=E),this.maxValues[c]<E&&(this.maxValues[c]=E));for(c=0;c<3;c++)this.objectOffset[c]=.5*(this.minValues[c]+this.maxValues[c]);for(c=0;c<3;c++)for(M=0;M<R;M++)for(_=0;_<V;_++)(E=D[c][M][_])!=null&&(D[c][M][_]-=this.objectOffset[c]);var U=[k(new Float32Array(R*V),[R,V]),k(new Float32Array(R*V),[R,V]),k(new Float32Array(R*V),[R,V])];for(c=0;c<3;c++)for(M=0;M<R;M++)for(_=0;_<V;_++)U[c].set(M,_,D[c][M][_]);D=[];var j={colormap:I,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!w.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:w.opacityscale,opacity:w.opacity},J=o(w);if(j.intensityBounds=[J.min,J.max],w.surfacecolor){var X=k(new Float32Array(R*V),[R,V]);for(M=0;M<R;M++)for(_=0;_<V;_++)X.set(M,_,w.surfacecolor[_][M]);U.push(X)}else j.intensityBounds[0]*=N[2],j.intensityBounds[1]*=N[2];(g<U[0].shape[0]||g<U[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(U[0].shape[0],0),this.dataScaleY=this.estimateScale(U[0].shape[1],1),this.dataScaleX===1&&this.dataScaleY===1||this.refineCoords(U)),w.surfacecolor&&(j.intensity=U.pop());var Z=[!0,!0,!0],Y=["x","y","z"];for(c=0;c<3;++c){var W=w.contours[Y[c]];Z[c]=W.highlight,j.showContour[c]=W.show||W.highlight,j.showContour[c]&&(j.contourProject[c]=[W.project.x,W.project.y,W.project.z],W.show?(this.showContour[c]=!0,j.levels[c]=F[c],O.highlightColor[c]=j.contourColor[c]=t(W.color),W.usecolormap?O.highlightTint[c]=j.contourTint[c]=0:O.highlightTint[c]=j.contourTint[c]=1,j.contourWidth[c]=W.width,this.contourStart[c]=W.start,this.contourEnd[c]=W.end,this.contourSize[c]=W.size):(this.showContour[c]=!1,this.contourStart[c]=null,this.contourEnd[c]=null,this.contourSize[c]=0),W.highlight&&(j.dynamicColor[c]=t(W.highlightcolor),j.dynamicWidth[c]=W.highlightwidth))}(function(Q){var ne=Q[0].rgb,re=Q[Q.length-1].rgb;return ne[0]===re[0]&&ne[1]===re[1]&&ne[2]===re[2]&&ne[3]===re[3]})(I)&&(j.vertexColor=!0),j.objectOffset=this.objectOffset,j.coords=U,O.update(j),O.visible=w.visible,O.enableDynamic=Z,O.enableHighlight=Z,O.snapToData=!0,"lighting"in w&&(O.ambientLight=w.lighting.ambient,O.diffuseLight=w.lighting.diffuse,O.specularLight=w.lighting.specular,O.roughness=w.lighting.roughness,O.fresnel=w.lighting.fresnel),"lightposition"in w&&(O.lightPosition=[w.lightposition.x,w.lightposition.y,w.lightposition.z])},n.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},K.exports=function(w,c){var M=w.glplot.gl,_=S({gl:M}),E=new r(w,_,c.uid);return _._trace=E,E.update(c),w.glplot.add(_),E}},91831:function(K,z,e){var S=e(73972),k=e(71828),l=e(1586),T=e(54532);function b(s,t,o,r){var n=r("opacityscale");n==="max"?t.opacityscale=[[0,.1],[1,1]]:n==="min"?t.opacityscale=[[0,1],[1,.1]]:n==="extremes"?t.opacityscale=function(a,i){for(var u=[],h=0;h<32;h++){var f=h/31,x=.1+.9*(1-Math.pow(Math.sin(1*f*Math.PI),2));u.push([f,Math.max(0,Math.min(1,x))])}return u}():function(a){var i=0;if(!Array.isArray(a)||a.length<2||!a[0]||!a[a.length-1]||+a[0][0]!=0||+a[a.length-1][0]!=1)return!1;for(var u=0;u<a.length;u++){var h=a[u];if(h.length!==2||+h[0]<i)return!1;i=+h[0]}return!0}(n)||(t.opacityscale=void 0)}function d(s,t,o){t in s&&!(o in s)&&(s[o]=s[t])}K.exports={supplyDefaults:function(s,t,o,r){var n,a;function i(m,w){return k.coerce(s,t,T,m,w)}var u=i("x"),h=i("y"),f=i("z");if(!f||!f.length||u&&u.length<1||h&&h.length<1)t.visible=!1;else{t._xlength=Array.isArray(u)&&k.isArrayOrTypedArray(u[0])?f.length:f[0].length,t._ylength=f.length,S.getComponentMethod("calendars","handleTraceDefaults")(s,t,["x","y","z"],r),i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(m){i(m)});var x=i("surfacecolor"),v=["x","y","z"];for(n=0;n<3;++n){var g="contours."+v[n],y=i(g+".show"),p=i(g+".highlight");if(y||p)for(a=0;a<3;++a)i(g+".project."+v[a]);y&&(i(g+".color"),i(g+".width"),i(g+".usecolormap")),p&&(i(g+".highlightcolor"),i(g+".highlightwidth")),i(g+".start"),i(g+".end"),i(g+".size")}x||(d(s,"zmin","cmin"),d(s,"zmax","cmax"),d(s,"zauto","cauto")),l(s,t,r,i,{prefix:"",cLetter:"c"}),b(0,t,0,i),t._length=null}},opacityscaleDefaults:b}},93601:function(K,z,e){K.exports={attributes:e(54532),supplyDefaults:e(91831).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e(18396),plot:e(43768),moduleType:"trace",name:"surface",basePlotModule:e(58547),categories:["gl3d","2dMap","showLegend"],meta:{}}},44464:function(K,z,e){var S=e(50215),k=e(1426).extendFlat,l=e(30962).overrideAll,T=e(41940),b=e(27670).Y,d=e(12663).descriptionOnlyNumbers;(K.exports=l({domain:b({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:d("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:k({},S.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},T({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:d("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:k({},S.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},T({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},99469:function(K,z,e){var S=e(27659).a0,k=e(36736),l="table";z.name=l,z.plot=function(T){var b=S(T.calcdata,l)[0];b.length&&k(T,b)},z.clean=function(T,b,d,s){var t=s._has&&s._has(l),o=b._has&&b._has(l);t&&!o&&s._paperdiv.selectAll(".table").remove()}},76333:function(K,z,e){var S=e(28984).wrap;K.exports=function(){return S({})}},49850:function(K){K.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},51018:function(K,z,e){var S=e(49850),k=e(1426).extendFlat,l=e(92770);function T(n){if(Array.isArray(n)){for(var a=0,i=0;i<n.length;i++)a=Math.max(a,T(n[i]));return a}return n}function b(n,a){return n+a}function d(n){var a,i=n.slice(),u=1/0,h=0;for(a=0;a<i.length;a++)Array.isArray(i[a])||(i[a]=[i[a]]),u=Math.min(u,i[a].length),h=Math.max(h,i[a].length);if(u!==h)for(a=0;a<i.length;a++){var f=h-i[a].length;f&&(i[a]=i[a].concat(s(f)))}return i}function s(n){for(var a=new Array(n),i=0;i<n;i++)a[i]="";return a}function t(n){return n.calcdata.columns.reduce(function(a,i){return i.xIndex<n.xIndex?a+i.columnWidth:a},0)}function o(n,a){return Object.keys(n).map(function(i){return k({},n[i],{auxiliaryBlocks:a})})}function r(n,a){for(var i,u={},h=0,f=0,x={firstRowIndex:null,lastRowIndex:null,rows:[]},v=0,g=0,y=0;y<n.length;y++)i=n[y],x.rows.push({rowIndex:y,rowHeight:i}),((f+=i)>=a||y===n.length-1)&&(u[h]=x,x.key=g++,x.firstRowIndex=v,x.lastRowIndex=y,x={firstRowIndex:null,lastRowIndex:null,rows:[]},h+=f,v=y+1,f=0);return u}K.exports=function(n,a){var i=d(a.cells.values),u=function(N){return N.slice(a.header.values.length,N.length)},h=d(a.header.values);h.length&&!h[0].length&&(h[0]=[""],h=d(h));var f=h.concat(u(i).map(function(){return s((h[0]||[""]).length)})),x=a.domain,v=Math.floor(n._fullLayout._size.w*(x.x[1]-x.x[0])),g=Math.floor(n._fullLayout._size.h*(x.y[1]-x.y[0])),y=a.header.values.length?f[0].map(function(){return a.header.height}):[S.emptyHeaderHeight],p=i.length?i[0].map(function(){return a.cells.height}):[],m=y.reduce(b,0),w=r(p,g-m+S.uplift),c=o(r(y,m),[]),M=o(w,c),_={},E=a._fullInput.columnorder.concat(u(i.map(function(N,R){return R}))),L=f.map(function(N,R){var V=Array.isArray(a.columnwidth)?a.columnwidth[Math.min(R,a.columnwidth.length-1)]:a.columnwidth;return l(V)?Number(V):1}),C=L.reduce(b,0);L=L.map(function(N){return N/C*v});var O=Math.max(T(a.header.line.width),T(a.cells.line.width)),I={key:a.uid+n._context.staticPlot,translateX:x.x[0]*n._fullLayout._size.w,translateY:n._fullLayout._size.h*(1-x.y[1]),size:n._fullLayout._size,width:v,maxLineWidth:O,height:g,columnOrder:E,groupHeight:g,rowBlocks:M,headerRowBlocks:c,scrollY:0,cells:k({},a.cells,{values:i}),headerCells:k({},a.header,{values:f}),gdColumns:f.map(function(N){return N[0]}),gdColumnsOriginalOrder:f.map(function(N){return N[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:f.map(function(N,R){var V=_[N];return _[N]=(V||0)+1,{key:N+"__"+_[N],label:N,specIndex:R,xIndex:E[R],xScale:t,x:void 0,calcdata:void 0,columnWidth:L[R]}})};return I.columns.forEach(function(N){N.calcdata=I,N.x=t(N)}),I}},56269:function(K,z,e){var S=e(1426).extendFlat;z.splitToPanels=function(k){var l=[0,0],T=S({},k,{key:"header",type:"header",page:0,prevPages:l,currentRepaint:[null,null],dragHandle:!0,values:k.calcdata.headerCells.values[k.specIndex],rowBlocks:k.calcdata.headerRowBlocks,calcdata:S({},k.calcdata,{cells:k.calcdata.headerCells})});return[S({},k,{key:"cells1",type:"cells",page:0,prevPages:l,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),S({},k,{key:"cells2",type:"cells",page:1,prevPages:l,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),T]},z.splitToCells=function(k){var l=function(T){var b=T.rowBlocks[T.page],d=b?b.rows[0].rowIndex:0;return[d,b?d+b.rows.length:0]}(k);return(k.values||[]).slice(l[0],l[1]).map(function(T,b){return{keyWithinBlock:b+(typeof T=="string"&&T.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:l[0]+b,column:k,calcdata:k.calcdata,page:k.page,rowBlocks:k.rowBlocks,value:T}})}},39754:function(K,z,e){var S=e(71828),k=e(44464),l=e(27670).c;K.exports=function(T,b,d,s){function t(o,r){return S.coerce(T,b,k,o,r)}l(b,s,t),t("columnwidth"),t("header.values"),t("header.format"),t("header.align"),t("header.prefix"),t("header.suffix"),t("header.height"),t("header.line.width"),t("header.line.color"),t("header.fill.color"),S.coerceFont(t,"header.font",S.extendFlat({},s.font)),function(o,r){for(var n=o.columnorder||[],a=o.header.values.length,i=n.slice(0,a),u=i.slice().sort(function(x,v){return x-v}),h=i.map(function(x){return u.indexOf(x)}),f=h.length;f<a;f++)h.push(f);r("columnorder",h)}(b,t),t("cells.values"),t("cells.format"),t("cells.align"),t("cells.prefix"),t("cells.suffix"),t("cells.height"),t("cells.line.width"),t("cells.line.color"),t("cells.fill.color"),S.coerceFont(t,"cells.font",S.extendFlat({},s.font)),b._length=null}},96595:function(K,z,e){K.exports={attributes:e(44464),supplyDefaults:e(39754),calc:e(76333),plot:e(36736),moduleType:"trace",name:"table",basePlotModule:e(99469),categories:["noOpacity"],meta:{}}},36736:function(K,z,e){var S=e(49850),k=e(39898),l=e(71828).numberFormat,T=e(28984),b=e(91424),d=e(63893),s=e(71828).raiseToTop,t=e(71828).strTranslate,o=e(71828).cancelTransition,r=e(51018),n=e(56269),a=e(7901);function i(U){return Math.ceil(U.calcdata.maxLineWidth/2)}function u(U,j){return"clip"+U._fullLayout._uid+"_scrollAreaBottomClip_"+j.key}function h(U,j){return"clip"+U._fullLayout._uid+"_columnBoundaryClippath_"+j.calcdata.key+"_"+j.specIndex}function f(U){return[].concat.apply([],U.map(function(j){return j})).map(function(j){return j.__data__})}function x(U,j,J){var X=U.selectAll("."+S.cn.scrollbarKit).data(T.repeat,T.keyFun);X.enter().append("g").classed(S.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),X.each(function(ne){var re=ne.scrollbarState;re.totalHeight=function(ie){var se=ie.rowBlocks;return R(se,se.length-1)+(se.length?V(se[se.length-1],1/0):1)}(ne),re.scrollableAreaHeight=ne.groupHeight-M(ne),re.currentlyVisibleHeight=Math.min(re.totalHeight,re.scrollableAreaHeight),re.ratio=re.currentlyVisibleHeight/re.totalHeight,re.barLength=Math.max(re.ratio*re.currentlyVisibleHeight,S.goldenRatio*S.scrollbarWidth),re.barWiggleRoom=re.currentlyVisibleHeight-re.barLength,re.wiggleRoom=Math.max(0,re.totalHeight-re.scrollableAreaHeight),re.topY=re.barWiggleRoom===0?0:ne.scrollY/re.wiggleRoom*re.barWiggleRoom,re.bottomY=re.topY+re.barLength,re.dragMultiplier=re.wiggleRoom/re.barWiggleRoom}).attr("transform",function(ne){var re=ne.width+S.scrollbarWidth/2+S.scrollbarOffset;return t(re,M(ne))});var Z=X.selectAll("."+S.cn.scrollbar).data(T.repeat,T.keyFun);Z.enter().append("g").classed(S.cn.scrollbar,!0);var Y=Z.selectAll("."+S.cn.scrollbarSlider).data(T.repeat,T.keyFun);Y.enter().append("g").classed(S.cn.scrollbarSlider,!0),Y.attr("transform",function(ne){return t(0,ne.scrollbarState.topY||0)});var W=Y.selectAll("."+S.cn.scrollbarGlyph).data(T.repeat,T.keyFun);W.enter().append("line").classed(S.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",S.scrollbarWidth).attr("stroke-linecap","round").attr("y1",S.scrollbarWidth/2),W.attr("y2",function(ne){return ne.scrollbarState.barLength-S.scrollbarWidth/2}).attr("stroke-opacity",function(ne){return ne.columnDragInProgress||!ne.scrollbarState.barWiggleRoom||J?0:.4}),W.transition().delay(0).duration(0),W.transition().delay(S.scrollbarHideDelay).duration(S.scrollbarHideDuration).attr("stroke-opacity",0);var Q=Z.selectAll("."+S.cn.scrollbarCaptureZone).data(T.repeat,T.keyFun);Q.enter().append("line").classed(S.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",S.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ne){var re=k.event.y,ie=this.getBoundingClientRect(),se=ne.scrollbarState,ge=re-ie.top,ue=k.scale.linear().domain([0,se.scrollableAreaHeight]).range([0,se.totalHeight]).clamp(!0);se.topY<=ge&&ge<=se.bottomY||E(j,U,null,ue(ge-se.barLength/2))(ne)}).call(k.behavior.drag().origin(function(ne){return k.event.stopPropagation(),ne.scrollbarState.scrollbarScrollInProgress=!0,ne}).on("drag",E(j,U)).on("dragend",function(){})),Q.attr("y2",function(ne){return ne.scrollbarState.scrollableAreaHeight}),j._context.staticPlot&&(W.remove(),Q.remove())}function v(U,j,J,X){var Z=function(re){var ie=re.selectAll("."+S.cn.columnCells).data(T.repeat,T.keyFun);return ie.enter().append("g").classed(S.cn.columnCells,!0),ie.exit().remove(),ie}(J),Y=function(re){var ie=re.selectAll("."+S.cn.columnCell).data(n.splitToCells,function(se){return se.keyWithinBlock});return ie.enter().append("g").classed(S.cn.columnCell,!0),ie.exit().remove(),ie}(Z);(function(re){re.each(function(ie,se){var ge=ie.calcdata.cells.font,ue=ie.column.specIndex,ce={size:p(ge.size,ue,se),color:p(ge.color,ue,se),family:p(ge.family,ue,se)};ie.rowNumber=ie.key,ie.align=p(ie.calcdata.cells.align,ue,se),ie.cellBorderWidth=p(ie.calcdata.cells.line.width,ue,se),ie.font=ce})})(Y);var W=function(re){var ie=re.selectAll("."+S.cn.cellRect).data(T.repeat,function(se){return se.keyWithinBlock});return ie.enter().append("rect").classed(S.cn.cellRect,!0),ie}(Y);(function(re){re.attr("width",function(ie){return ie.column.columnWidth}).attr("stroke-width",function(ie){return ie.cellBorderWidth}).each(function(ie){var se=k.select(this);a.stroke(se,p(ie.calcdata.cells.line.color,ie.column.specIndex,ie.rowNumber)),a.fill(se,p(ie.calcdata.cells.fill.color,ie.column.specIndex,ie.rowNumber))})})(W);var Q=function(re){var ie=re.selectAll("."+S.cn.cellTextHolder).data(T.repeat,function(se){return se.keyWithinBlock});return ie.enter().append("g").classed(S.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ie}(Y),ne=function(re){var ie=re.selectAll("."+S.cn.cellText).data(T.repeat,function(se){return se.keyWithinBlock});return ie.enter().append("text").classed(S.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){k.event.stopPropagation()}),ie}(Q);(function(re){re.each(function(ie){b.font(k.select(this),ie.font)})})(ne),g(ne,j,X,U),N(Y)}function g(U,j,J,X){U.text(function(Z){var Y=Z.column.specIndex,W=Z.rowNumber,Q=Z.value,ne=typeof Q=="string",re=ne&&Q.match(/<br>/i),ie=!ne||re;Z.mayHaveMarkup=ne&&Q.match(/[<&>]/);var se,ge=typeof(se=Q)=="string"&&se.match(S.latexCheck);Z.latex=ge;var ue,ce,le=ge?"":p(Z.calcdata.cells.prefix,Y,W)||"",de=ge?"":p(Z.calcdata.cells.suffix,Y,W)||"",Ce=ge?null:p(Z.calcdata.cells.format,Y,W)||null,xe=le+(Ce?l(Ce)(Z.value):Z.value)+de;if(Z.wrappingNeeded=!Z.wrapped&&!ie&&!ge&&(ue=y(xe)),Z.cellHeightMayIncrease=re||ge||Z.mayHaveMarkup||(ue===void 0?y(xe):ue),Z.needsConvertToTspans=Z.mayHaveMarkup||Z.wrappingNeeded||Z.latex,Z.wrappingNeeded){var _e=(S.wrapSplitCharacter===" "?xe.replace(/<a href=/gi,"<a_href="):xe).split(S.wrapSplitCharacter),we=S.wrapSplitCharacter===" "?_e.map(function(Ae){return Ae.replace(/<a_href=/gi,"<a href=")}):_e;Z.fragments=we.map(function(Ae){return{text:Ae,width:null}}),Z.fragments.push({fragment:S.wrapSpacer,width:null}),ce=we.join(S.lineBreaker)+S.lineBreaker+S.wrapSpacer}else delete Z.fragments,ce=xe;return ce}).attr("dy",function(Z){return Z.needsConvertToTspans?0:"0.75em"}).each(function(Z){var Y=this,W=k.select(Y),Q=Z.wrappingNeeded?C:O;Z.needsConvertToTspans?d.convertToTspans(W,X,Q(J,Y,j,X,Z)):k.select(Y.parentNode).attr("transform",function(ne){return t(I(ne),S.cellPad)}).attr("text-anchor",function(ne){return{left:"start",center:"middle",right:"end"}[ne.align]})})}function y(U){return U.indexOf(S.wrapSplitCharacter)!==-1}function p(U,j,J){if(Array.isArray(U)){var X=U[Math.min(j,U.length-1)];return Array.isArray(X)?X[Math.min(J,X.length-1)]:X}return U}function m(U,j,J){U.transition().ease(S.releaseTransitionEase).duration(S.releaseTransitionDuration).attr("transform",t(j.x,J))}function w(U){return U.type==="cells"}function c(U){return U.type==="header"}function M(U){return(U.rowBlocks.length?U.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(j,J){return j+V(J,1/0)},0)}function _(U,j,J){var X=f(j)[0];if(X!==void 0){var Z=X.rowBlocks,Y=X.calcdata,W=R(Z,Z.length),Q=X.calcdata.groupHeight-M(X),ne=Y.scrollY=Math.max(0,Math.min(W-Q,Y.scrollY)),re=function(ie,se,ge){for(var ue=[],ce=0,le=0;le<ie.length;le++){for(var de=ie[le],Ce=de.rows,xe=0,_e=0;_e<Ce.length;_e++)xe+=Ce[_e].rowHeight;de.allRowsHeight=xe,se<ce+xe&&se+ge>ce&&ue.push(le),ce+=xe}return ue}(Z,ne,Q);re.length===1&&(re[0]===Z.length-1?re.unshift(re[0]-1):re.push(re[0]+1)),re[0]%2&&re.reverse(),j.each(function(ie,se){ie.page=re[se],ie.scrollY=ne}),j.attr("transform",function(ie){var se=R(ie.rowBlocks,ie.page)-ie.scrollY;return t(0,se)}),U&&(L(U,J,j,re,X.prevPages,X,0),L(U,J,j,re,X.prevPages,X,1),x(J,U))}}function E(U,j,J,X){return function(Z){var Y=Z.calcdata?Z.calcdata:Z,W=j.filter(function(ie){return Y.key===ie.key}),Q=J||Y.scrollbarState.dragMultiplier,ne=Y.scrollY;Y.scrollY=X===void 0?Y.scrollY+Q*k.event.dy:X;var re=W.selectAll("."+S.cn.yColumn).selectAll("."+S.cn.columnBlock).filter(w);return _(U,re,W),Y.scrollY===ne}}function L(U,j,J,X,Z,Y,W){X[W]!==Z[W]&&(clearTimeout(Y.currentRepaint[W]),Y.currentRepaint[W]=setTimeout(function(){var Q=J.filter(function(ne,re){return re===W&&X[re]!==Z[re]});v(U,j,Q,J),Z[W]=X[W]}))}function C(U,j,J,X){return function(){var Z=k.select(j.parentNode);Z.each(function(Y){var W=Y.fragments;Z.selectAll("tspan.line").each(function(ce,le){W[le].width=this.getComputedTextLength()});var Q,ne,re=W[W.length-1].width,ie=W.slice(0,-1),se=[],ge=0,ue=Y.column.columnWidth-2*S.cellPad;for(Y.value="";ie.length;)ge+(ne=(Q=ie.shift()).width+re)>ue&&(Y.value+=se.join(S.wrapSpacer)+S.lineBreaker,se=[],ge=0),se.push(Q.text),ge+=ne;ge&&(Y.value+=se.join(S.wrapSpacer)),Y.wrapped=!0}),Z.selectAll("tspan.line").remove(),g(Z.select("."+S.cn.cellText),J,U,X),k.select(j.parentNode.parentNode).call(N)}}function O(U,j,J,X,Z){return function(){if(!Z.settledY){var Y=k.select(j.parentNode),W=D(Z),Q=Z.key-W.firstRowIndex,ne=W.rows[Q].rowHeight,re=Z.cellHeightMayIncrease?j.parentNode.getBoundingClientRect().height+2*S.cellPad:ne,ie=Math.max(re,ne);ie-W.rows[Q].rowHeight&&(W.rows[Q].rowHeight=ie,U.selectAll("."+S.cn.columnCell).call(N),_(null,U.filter(w),0),x(J,X,!0)),Y.attr("transform",function(){var se=this,ge=se.parentNode.getBoundingClientRect(),ue=k.select(se.parentNode).select("."+S.cn.cellRect).node().getBoundingClientRect(),ce=se.transform.baseVal.consolidate(),le=ue.top-ge.top+(ce?ce.matrix.f:S.cellPad);return t(I(Z,k.select(se.parentNode).select("."+S.cn.cellTextHolder).node().getBoundingClientRect().width),le)}),Z.settledY=!0}}}function I(U,j){switch(U.align){case"left":default:return S.cellPad;case"right":return U.column.columnWidth-(j||0)-S.cellPad;case"center":return(U.column.columnWidth-(j||0))/2}}function N(U){U.attr("transform",function(j){var J=j.rowBlocks[0].auxiliaryBlocks.reduce(function(Z,Y){return Z+V(Y,1/0)},0),X=V(D(j),j.key);return t(0,X+J)}).selectAll("."+S.cn.cellRect).attr("height",function(j){return(J=D(j),X=j.key,J.rows[X-J.firstRowIndex]).rowHeight;var J,X})}function R(U,j){for(var J=0,X=j-1;X>=0;X--)J+=F(U[X]);return J}function V(U,j){for(var J=0,X=0;X<U.rows.length&&U.rows[X].rowIndex<j;X++)J+=U.rows[X].rowHeight;return J}function F(U){var j=U.allRowsHeight;if(j!==void 0)return j;for(var J=0,X=0;X<U.rows.length;X++)J+=U.rows[X].rowHeight;return U.allRowsHeight=J,J}function D(U){return U.rowBlocks[U.page]}K.exports=function(U,j){var J=!U._context.staticPlot,X=U._fullLayout._paper.selectAll("."+S.cn.table).data(j.map(function(de){var Ce=T.unwrap(de).trace;return r(U,Ce)}),T.keyFun);X.exit().remove(),X.enter().append("g").classed(S.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),X.attr("width",function(de){return de.width+de.size.l+de.size.r}).attr("height",function(de){return de.height+de.size.t+de.size.b}).attr("transform",function(de){return t(de.translateX,de.translateY)});var Z=X.selectAll("."+S.cn.tableControlView).data(T.repeat,T.keyFun),Y=Z.enter().append("g").classed(S.cn.tableControlView,!0).style("box-sizing","content-box");if(J){var W="onwheel"in document?"wheel":"mousewheel";Y.on("mousemove",function(de){Z.filter(function(Ce){return de===Ce}).call(x,U)}).on(W,function(de){if(!de.scrollbarState.wheeling){de.scrollbarState.wheeling=!0;var Ce=de.scrollY+k.event.deltaY;E(U,Z,null,Ce)(de)||(k.event.stopPropagation(),k.event.preventDefault()),de.scrollbarState.wheeling=!1}}).call(x,U,!0)}Z.attr("transform",function(de){return t(de.size.l,de.size.t)});var Q=Z.selectAll("."+S.cn.scrollBackground).data(T.repeat,T.keyFun);Q.enter().append("rect").classed(S.cn.scrollBackground,!0).attr("fill","none"),Q.attr("width",function(de){return de.width}).attr("height",function(de){return de.height}),Z.each(function(de){b.setClipUrl(k.select(this),u(U,de),U)});var ne=Z.selectAll("."+S.cn.yColumn).data(function(de){return de.columns},T.keyFun);ne.enter().append("g").classed(S.cn.yColumn,!0),ne.exit().remove(),ne.attr("transform",function(de){return t(de.x,0)}),J&&ne.call(k.behavior.drag().origin(function(de){return m(k.select(this),de,-S.uplift),s(this),de.calcdata.columnDragInProgress=!0,x(Z.filter(function(Ce){return de.calcdata.key===Ce.key}),U),de}).on("drag",function(de){var Ce=k.select(this),xe=function(_e){return(de===_e?k.event.x:_e.x)+_e.columnWidth/2};de.x=Math.max(-S.overdrag,Math.min(de.calcdata.width+S.overdrag-de.columnWidth,k.event.x)),f(ne).filter(function(_e){return _e.calcdata.key===de.calcdata.key}).sort(function(_e,we){return xe(_e)-xe(we)}).forEach(function(_e,we){_e.xIndex=we,_e.x=de===_e?_e.x:_e.xScale(_e)}),ne.filter(function(_e){return de!==_e}).transition().ease(S.transitionEase).duration(S.transitionDuration).attr("transform",function(_e){return t(_e.x,0)}),Ce.call(o).attr("transform",t(de.x,-S.uplift))}).on("dragend",function(de){var Ce=k.select(this),xe=de.calcdata;de.x=de.xScale(de),de.calcdata.columnDragInProgress=!1,m(Ce,de,0),function(_e,we,Ae){var $=we.gdColumnsOriginalOrder;we.gdColumns.sort(function(oe,pe){return Ae[$.indexOf(oe)]-Ae[$.indexOf(pe)]}),we.columnorder=Ae,_e.emit("plotly_restyle")}(U,xe,xe.columns.map(function(_e){return _e.xIndex}))})),ne.each(function(de){b.setClipUrl(k.select(this),h(U,de),U)});var re=ne.selectAll("."+S.cn.columnBlock).data(n.splitToPanels,T.keyFun);re.enter().append("g").classed(S.cn.columnBlock,!0).attr("id",function(de){return de.key}),re.style("cursor",function(de){return de.dragHandle?"ew-resize":de.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ie=re.filter(c),se=re.filter(w);J&&se.call(k.behavior.drag().origin(function(de){return k.event.stopPropagation(),de}).on("drag",E(U,Z,-1)).on("dragend",function(){})),v(U,Z,ie,re),v(U,Z,se,re);var ge=Z.selectAll("."+S.cn.scrollAreaClip).data(T.repeat,T.keyFun);ge.enter().append("clipPath").classed(S.cn.scrollAreaClip,!0).attr("id",function(de){return u(U,de)});var ue=ge.selectAll("."+S.cn.scrollAreaClipRect).data(T.repeat,T.keyFun);ue.enter().append("rect").classed(S.cn.scrollAreaClipRect,!0).attr("x",-S.overdrag).attr("y",-S.uplift).attr("fill","none"),ue.attr("width",function(de){return de.width+2*S.overdrag}).attr("height",function(de){return de.height+S.uplift}),ne.selectAll("."+S.cn.columnBoundary).data(T.repeat,T.keyFun).enter().append("g").classed(S.cn.columnBoundary,!0);var ce=ne.selectAll("."+S.cn.columnBoundaryClippath).data(T.repeat,T.keyFun);ce.enter().append("clipPath").classed(S.cn.columnBoundaryClippath,!0),ce.attr("id",function(de){return h(U,de)});var le=ce.selectAll("."+S.cn.columnBoundaryRect).data(T.repeat,T.keyFun);le.enter().append("rect").classed(S.cn.columnBoundaryRect,!0).attr("fill","none"),le.attr("width",function(de){return de.columnWidth+2*i(de)}).attr("height",function(de){return de.calcdata.height+2*i(de)+S.uplift}).attr("x",function(de){return-i(de)}).attr("y",function(de){return-i(de)}),_(null,se,Z)}},45802:function(K,z,e){var S=e(5386).fF,k=e(5386).si,l=e(50693),T=e(27670).Y,b=e(34e3),d=e(57564),s=e(43473),t=e(1426).extendFlat;K.exports={labels:d.labels,parents:d.parents,values:d.values,branchvalues:d.branchvalues,count:d.count,level:d.level,maxdepth:d.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:t({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:d.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:d.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},l("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:t({},b.textfont,{}),editType:"calc"},text:b.text,textinfo:d.textinfo,texttemplate:k({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:b.hovertext,hoverinfo:d.hoverinfo,hovertemplate:S({},{keys:s.eventDataKeys}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:t({},b.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:b.sort,root:d.root,domain:T({name:"treemap",trace:!0,editType:"calc"})}},78018:function(K,z,e){var S=e(74875);z.name="treemap",z.plot=function(k,l,T,b){S.plotBasePlot(z.name,k,l,T,b)},z.clean=function(k,l,T,b){S.cleanBasePlot(z.name,k,l,T,b)}},65039:function(K,z,e){var S=e(52147);z.y=function(k,l){return S.calc(k,l)},z.T=function(k){return S._runCrossTraceCalc("treemap",k)}},43473:function(K){K.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},91174:function(K,z,e){var S=e(71828),k=e(45802),l=e(7901),T=e(27670).c,b=e(90769).handleText,d=e(97313).TEXTPAD,s=e(21081),t=s.hasColorscale,o=s.handleDefaults;K.exports=function(r,n,a,i){function u(w,c){return S.coerce(r,n,k,w,c)}var h=u("labels"),f=u("parents");if(h&&h.length&&f&&f.length){var x=u("values");x&&x.length?u("branchvalues"):u("count"),u("level"),u("maxdepth"),u("tiling.packing")==="squarify"&&u("tiling.squarifyratio"),u("tiling.flip"),u("tiling.pad");var v=u("text");u("texttemplate"),n.texttemplate||u("textinfo",Array.isArray(v)?"text+label":"label"),u("hovertext"),u("hovertemplate");var g=u("pathbar.visible");b(r,n,i,u,"auto",{hasPathbar:g,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),u("textposition");var y=n.textposition.indexOf("bottom")!==-1;u("marker.line.width")&&u("marker.line.color",i.paper_bgcolor);var p=u("marker.colors");(n._hasColorscale=t(r,"marker","colors")||(r.marker||{}).coloraxis)?o(r,n,i,u,{prefix:"marker.",cLetter:"c"}):u("marker.depthfade",!(p||[]).length);var m=2*n.textfont.size;u("marker.pad.t",y?m/4:m),u("marker.pad.l",m/4),u("marker.pad.r",m/4),u("marker.pad.b",y?m:m/4),u("marker.cornerradius"),n._hovered={marker:{line:{width:2,color:l.contrast(i.paper_bgcolor)}}},g&&(u("pathbar.thickness",n.pathbar.textfont.size+2*d),u("pathbar.side"),u("pathbar.edgeshape")),u("sort"),u("root.color"),T(n,i,u),n._length=null}else n.visible=!1}},80694:function(K,z,e){var S=e(39898),k=e(2791),l=e(72597).clearMinTextSize,T=e(16688).resizeText,b=e(46650);K.exports=function(d,s,t,o,r){var n,a,i=r.type,u=r.drawDescendants,h=d._fullLayout,f=h["_"+i+"layer"],x=!t;l(i,h),(n=f.selectAll("g.trace."+i).data(s,function(v){return v[0].trace.uid})).enter().append("g").classed("trace",!0).classed(i,!0),n.order(),!h.uniformtext.mode&&k.hasTransition(t)?(o&&(a=o()),S.transition().duration(t.duration).ease(t.easing).each("end",function(){a&&a()}).each("interrupt",function(){a&&a()}).each(function(){f.selectAll("g.trace").each(function(v){b(d,v,this,t,u)})})):(n.each(function(v){b(d,v,this,t,u)}),h.uniformtext.mode&&T(d,f.selectAll(".trace"),i)),x&&n.exit().remove()}},66209:function(K,z,e){var S=e(39898),k=e(71828),l=e(91424),T=e(63893),b=e(37210),d=e(96362).styleOne,s=e(43473),t=e(2791),o=e(83523),r=!0;K.exports=function(n,a,i,u,h){var f=h.barDifY,x=h.width,v=h.height,g=h.viewX,y=h.viewY,p=h.pathSlice,m=h.toMoveInsideSlice,w=h.strTransform,c=h.hasTransition,M=h.handleSlicesExit,_=h.makeUpdateSliceInterpolator,E=h.makeUpdateTextInterpolator,L={},C=n._context.staticPlot,O=n._fullLayout,I=a[0],N=I.trace,R=I.hierarchy,V=x/N._entryDepth,F=t.listPath(i.data,"id"),D=b(R.copy(),[x,v],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(D=D.filter(function(j){var J=F.indexOf(j.data.id);return J!==-1&&(j.x0=V*J,j.x1=V*(J+1),j.y0=f,j.y1=f+v,j.onPathbar=!0,!0)})).reverse(),(u=u.data(D,t.getPtId)).enter().append("g").classed("pathbar",!0),M(u,r,L,[x,v],p),u.order();var U=u;c&&(U=U.transition().each("end",function(){var j=S.select(this);t.setSliceCursor(j,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),U.each(function(j){j._x0=g(j.x0),j._x1=g(j.x1),j._y0=y(j.y0),j._y1=y(j.y1),j._hoverX=g(j.x1-Math.min(x,v)/2),j._hoverY=y(j.y1-v/2);var J=S.select(this),X=k.ensureSingle(J,"path","surface",function(Q){Q.style("pointer-events",C?"none":"all")});c?X.transition().attrTween("d",function(Q){var ne=_(Q,r,L,[x,v]);return function(re){return p(ne(re))}}):X.attr("d",p),J.call(o,i,n,a,{styleOne:d,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:n._transitioning}),X.call(d,j,N,{hovered:!1}),j._text=(t.getPtLabel(j)||"").split("<br>").join(" ")||"";var Z=k.ensureSingle(J,"g","slicetext"),Y=k.ensureSingle(Z,"text","",function(Q){Q.attr("data-notex",1)}),W=k.ensureUniformFontSize(n,t.determineTextFont(N,j,O.font,{onPathbar:!0}));Y.text(j._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(l.font,W).call(T.convertToTspans,n),j.textBB=l.bBox(Y.node()),j.transform=m(j,{fontSize:W.size,onPathbar:!0}),j.transform.fontSize=W.size,c?Y.transition().attrTween("transform",function(Q){var ne=E(Q,r,L,[x,v]);return function(re){return w(ne(re))}}):Y.attr("transform",w(j))})}},52583:function(K,z,e){var S=e(39898),k=e(71828),l=e(91424),T=e(63893),b=e(37210),d=e(96362).styleOne,s=e(43473),t=e(2791),o=e(83523),r=e(24714).formatSliceLabel,n=!1;K.exports=function(a,i,u,h,f){var x=f.width,v=f.height,g=f.viewX,y=f.viewY,p=f.pathSlice,m=f.toMoveInsideSlice,w=f.strTransform,c=f.hasTransition,M=f.handleSlicesExit,_=f.makeUpdateSliceInterpolator,E=f.makeUpdateTextInterpolator,L=f.prevEntry,C=a._context.staticPlot,O=a._fullLayout,I=i[0].trace,N=I.textposition.indexOf("left")!==-1,R=I.textposition.indexOf("right")!==-1,V=I.textposition.indexOf("bottom")!==-1,F=!V&&!I.marker.pad.t||V&&!I.marker.pad.b,D=b(u,[x,v],{packing:I.tiling.packing,squarifyratio:I.tiling.squarifyratio,flipX:I.tiling.flip.indexOf("x")>-1,flipY:I.tiling.flip.indexOf("y")>-1,pad:{inner:I.tiling.pad,top:I.marker.pad.t,left:I.marker.pad.l,right:I.marker.pad.r,bottom:I.marker.pad.b}}).descendants(),U=1/0,j=-1/0;D.forEach(function(W){var Q=W.depth;Q>=I._maxDepth?(W.x0=W.x1=(W.x0+W.x1)/2,W.y0=W.y1=(W.y0+W.y1)/2):(U=Math.min(U,Q),j=Math.max(j,Q))}),h=h.data(D,t.getPtId),I._maxVisibleLayers=isFinite(j)?j-U+1:0,h.enter().append("g").classed("slice",!0),M(h,n,{},[x,v],p),h.order();var J=null;if(c&&L){var X=t.getPtId(L);h.each(function(W){J===null&&t.getPtId(W)===X&&(J={x0:W.x0,x1:W.x1,y0:W.y0,y1:W.y1})})}var Z=function(){return J||{x0:0,x1:x,y0:0,y1:v}},Y=h;return c&&(Y=Y.transition().each("end",function(){var W=S.select(this);t.setSliceCursor(W,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),Y.each(function(W){var Q=t.isHeader(W,I);W._x0=g(W.x0),W._x1=g(W.x1),W._y0=y(W.y0),W._y1=y(W.y1),W._hoverX=g(W.x1-I.marker.pad.r),W._hoverY=y(V?W.y1-I.marker.pad.b/2:W.y0+I.marker.pad.t/2);var ne=S.select(this),re=k.ensureSingle(ne,"path","surface",function(ue){ue.style("pointer-events",C?"none":"all")});c?re.transition().attrTween("d",function(ue){var ce=_(ue,n,Z(),[x,v]);return function(le){return p(ce(le))}}):re.attr("d",p),ne.call(o,u,a,i,{styleOne:d,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{isTransitioning:a._transitioning}),re.call(d,W,I,{hovered:!1}),W.x0===W.x1||W.y0===W.y1?W._text="":W._text=Q?F?"":t.getPtLabel(W)||"":r(W,u,I,i,O)||"";var ie=k.ensureSingle(ne,"g","slicetext"),se=k.ensureSingle(ie,"text","",function(ue){ue.attr("data-notex",1)}),ge=k.ensureUniformFontSize(a,t.determineTextFont(I,W,O.font));se.text(W._text||" ").classed("slicetext",!0).attr("text-anchor",R?"end":N||Q?"start":"middle").call(l.font,ge).call(T.convertToTspans,a),W.textBB=l.bBox(se.node()),W.transform=m(W,{fontSize:ge.size,isHeader:Q}),W.transform.fontSize=ge.size,c?se.transition().attrTween("transform",function(ue){var ce=E(ue,n,Z(),[x,v]);return function(le){return w(ce(le))}}):se.attr("transform",w(W))}),J}},14102:function(K){K.exports=function z(e,S,k){var l;k.swapXY&&(l=e.x0,e.x0=e.y0,e.y0=l,l=e.x1,e.x1=e.y1,e.y1=l),k.flipX&&(l=e.x0,e.x0=S[0]-e.x1,e.x1=S[0]-l),k.flipY&&(l=e.y0,e.y0=S[1]-e.y1,e.y1=S[1]-l);var T=e.children;if(T)for(var b=0;b<T.length;b++)z(T[b],S,k)}},70954:function(K,z,e){K.exports={moduleType:"trace",name:"treemap",basePlotModule:e(78018),categories:[],animatable:!0,attributes:e(45802),layoutAttributes:e(55479),supplyDefaults:e(91174),supplyLayoutDefaults:e(77182),calc:e(65039).y,crossTraceCalc:e(65039).T,plot:e(5893),style:e(96362).style,colorbar:e(4898),meta:{}}},55479:function(K){K.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77182:function(K,z,e){var S=e(71828),k=e(55479);K.exports=function(l,T){function b(d,s){return S.coerce(l,T,k,d,s)}b("treemapcolorway",T.colorway),b("extendtreemapcolors")}},37210:function(K,z,e){var S=e(674),k=e(14102);K.exports=function(l,T,b){var d,s=b.flipX,t=b.flipY,o=b.packing==="dice-slice",r=b.pad[t?"bottom":"top"],n=b.pad[s?"right":"left"],a=b.pad[s?"left":"right"],i=b.pad[t?"top":"bottom"];o&&(d=n,n=r,r=d,d=a,a=i,i=d);var u=S.treemap().tile(function(h,f){switch(h){case"squarify":return S.treemapSquarify.ratio(f);case"binary":return S.treemapBinary;case"dice":return S.treemapDice;case"slice":return S.treemapSlice;default:return S.treemapSliceDice}}(b.packing,b.squarifyratio)).paddingInner(b.pad.inner).paddingLeft(n).paddingRight(a).paddingTop(r).paddingBottom(i).size(o?[T[1],T[0]]:T)(l);return(o||s||t)&&k(u,T,{swapXY:o,flipX:s,flipY:t}),u}},5893:function(K,z,e){var S=e(80694),k=e(52583);K.exports=function(l,T,b,d){return S(l,T,b,d,{type:"treemap",drawDescendants:k})}},46650:function(K,z,e){var S=e(39898),k=e(81684).sX,l=e(2791),T=e(71828),b=e(97313).TEXTPAD,d=e(17295).toMoveInsideBar,s=e(72597).recordMinTextSize,t=e(43473),o=e(66209);function r(n){return l.isHierarchyRoot(n)?"":l.getPtId(n)}K.exports=function(n,a,i,u,h){var f=n._fullLayout,x=a[0],v=x.trace,g=v.type==="icicle",y=x.hierarchy,p=l.findEntryWithLevel(y,v.level),m=S.select(i),w=m.selectAll("g.pathbar"),c=m.selectAll("g.slice");if(!p)return w.remove(),void c.remove();var M=l.isHierarchyRoot(p),_=!f.uniformtext.mode&&l.hasTransition(u),E=l.getMaxDepth(v),L=f._size,C=v.domain,O=L.w*(C.x[1]-C.x[0]),I=L.h*(C.y[1]-C.y[0]),N=O,R=v.pathbar.thickness,V=v.marker.line.width+t.gapWithPathbar,F=v.pathbar.visible?v.pathbar.side.indexOf("bottom")>-1?I+V:-(R+V):0,D={x0:N,x1:N,y0:F,y1:F+R},U=function(fe,ve,Te){var ze=v.tiling.pad,He=function(ot){return ot-ze<=ve.x0},Ve=function(ot){return ot+ze>=ve.x1},nt=function(ot){return ot-ze<=ve.y0},tt=function(ot){return ot+ze>=ve.y1};return fe.x0===ve.x0&&fe.x1===ve.x1&&fe.y0===ve.y0&&fe.y1===ve.y1?{x0:fe.x0,x1:fe.x1,y0:fe.y0,y1:fe.y1}:{x0:He(fe.x0-ze)?0:Ve(fe.x0-ze)?Te[0]:fe.x0,x1:He(fe.x1+ze)?0:Ve(fe.x1+ze)?Te[0]:fe.x1,y0:nt(fe.y0-ze)?0:tt(fe.y0-ze)?Te[1]:fe.y0,y1:nt(fe.y1+ze)?0:tt(fe.y1+ze)?Te[1]:fe.y1}},j=null,J={},X={},Z=null,Y=function(fe,ve){return ve?J[r(fe)]:X[r(fe)]};x.hasMultipleRoots&&M&&E++,v._maxDepth=E,v._backgroundColor=f.paper_bgcolor,v._entryDepth=p.data.depth,v._atRootLevel=M;var W=-O/2+L.l+L.w*(C.x[1]+C.x[0])/2,Q=-I/2+L.t+L.h*(1-(C.y[1]+C.y[0])/2),ne=function(fe){return W+fe},re=function(fe){return Q+fe},ie=re(0),se=ne(0),ge=function(fe){return se+fe},ue=function(fe){return ie+fe};function ce(fe,ve){return fe+","+ve}var le=ge(0),de=function(fe){fe.x=Math.max(le,fe.x)},Ce=v.pathbar.edgeshape,xe=v[g?"tiling":"marker"].pad,_e=function(fe){return v.textposition.indexOf(fe)!==-1},we=_e("top"),Ae=_e("left"),$=_e("right"),oe=_e("bottom"),pe=function(fe,ve){var Te=fe.x0,ze=fe.x1,He=fe.y0,Ve=fe.y1,nt=fe.textBB,tt=we||ve.isHeader&&!oe?"start":oe?"end":"middle",ot=_e("right"),pt=_e("left")||ve.onPathbar?-1:ot?1:0;if(ve.isHeader){if((Te+=(g?xe:xe.l)-b)>=(ze-=(g?xe:xe.r)-b)){var Tt=(Te+ze)/2;Te=Tt,ze=Tt}var yt;oe?He<(yt=Ve-(g?xe:xe.b))&&yt<Ve&&(He=yt):He<(yt=He+(g?xe:xe.t))&&yt<Ve&&(Ve=yt)}var dt=d(Te,ze,He,Ve,nt,{isHorizontal:!1,constrained:!0,angle:0,anchor:tt,leftToRight:pt});return dt.fontSize=ve.fontSize,dt.targetX=ne(dt.targetX),dt.targetY=re(dt.targetY),isNaN(dt.targetX)||isNaN(dt.targetY)?{}:(Te!==ze&&He!==Ve&&s(v.type,dt,f),{scale:dt.scale,rotate:dt.rotate,textX:dt.textX,textY:dt.textY,anchorX:dt.anchorX,anchorY:dt.anchorY,targetX:dt.targetX,targetY:dt.targetY})},ye=function(fe,ve){for(var Te,ze=0,He=fe;!Te&&ze<E;)ze++,(He=He.parent)?Te=Y(He,ve):ze=E;return Te||{}},ke=function(fe,ve,Te,ze,He){var Ve,nt=Y(fe,ve);if(nt)Ve=nt;else if(ve)Ve=D;else if(j)if(fe.parent){var tt=Z||Te;tt&&!ve?Ve=U(fe,tt,ze):(Ve={},T.extendFlat(Ve,ye(fe,ve)))}else Ve=T.extendFlat({},fe),g&&(He.orientation==="h"?He.flipX?Ve.x0=fe.x1:Ve.x1=0:He.flipY?Ve.y0=fe.y1:Ve.y1=0);else Ve={};return k(Ve,{x0:fe.x0,x1:fe.x1,y0:fe.y0,y1:fe.y1})},De=function(fe,ve,Te,ze){var He=Y(fe,ve),Ve={},nt=function(ot,pt,Tt,yt){if(pt)return J[r(y)]||D;var dt=X[v.level]||Tt;return function(Pt){return Pt.data.depth-p.data.depth<E}(ot)?U(ot,dt,yt):{}}(fe,ve,Te,ze);T.extendFlat(Ve,{transform:pe({x0:nt.x0,x1:nt.x1,y0:nt.y0,y1:nt.y1,textBB:fe.textBB,_text:fe._text},{isHeader:l.isHeader(fe,v)})}),He?Ve=He:fe.parent&&T.extendFlat(Ve,ye(fe,ve));var tt=fe.transform;return fe.x0!==fe.x1&&fe.y0!==fe.y1&&s(v.type,tt,f),k(Ve,{transform:{scale:tt.scale,rotate:tt.rotate,textX:tt.textX,textY:tt.textY,anchorX:tt.anchorX,anchorY:tt.anchorY,targetX:tt.targetX,targetY:tt.targetY}})},Pe=function(fe,ve,Te,ze,He){var Ve=ze[0],nt=ze[1];_?fe.exit().transition().each(function(){var tt=S.select(this);tt.select("path.surface").transition().attrTween("d",function(ot){var pt=function(Tt,yt,dt,Pt){var Et,Ot=Y(Tt,yt);if(yt)Et=D;else{var Nt=Y(p,yt);Et=Nt?U(Tt,Nt,Pt):{}}return k(Ot,Et)}(ot,ve,0,[Ve,nt]);return function(Tt){return He(pt(Tt))}}),tt.select("g.slicetext").attr("opacity",0)}).remove():fe.exit().remove()},Re=function(fe){var ve=fe.transform;return fe.x0!==fe.x1&&fe.y0!==fe.y1&&s(v.type,ve,f),T.getTextTransform({textX:ve.textX,textY:ve.textY,anchorX:ve.anchorX,anchorY:ve.anchorY,targetX:ve.targetX,targetY:ve.targetY,scale:ve.scale,rotate:ve.rotate})};_&&(w.each(function(fe){J[r(fe)]={x0:fe.x0,x1:fe.x1,y0:fe.y0,y1:fe.y1},fe.transform&&(J[r(fe)].transform={textX:fe.transform.textX,textY:fe.transform.textY,anchorX:fe.transform.anchorX,anchorY:fe.transform.anchorY,targetX:fe.transform.targetX,targetY:fe.transform.targetY,scale:fe.transform.scale,rotate:fe.transform.rotate})}),c.each(function(fe){X[r(fe)]={x0:fe.x0,x1:fe.x1,y0:fe.y0,y1:fe.y1},fe.transform&&(X[r(fe)].transform={textX:fe.transform.textX,textY:fe.transform.textY,anchorX:fe.transform.anchorX,anchorY:fe.transform.anchorY,targetX:fe.transform.targetX,targetY:fe.transform.targetY,scale:fe.transform.scale,rotate:fe.transform.rotate}),!j&&l.isEntry(fe)&&(j=fe)})),Z=h(n,a,p,c,{width:O,height:I,viewX:ne,viewY:re,pathSlice:function(fe){var ve=ne(fe.x0),Te=ne(fe.x1),ze=re(fe.y0),He=re(fe.y1),Ve=Te-ve,nt=He-ze;if(!Ve||!nt)return"";var tt=v.marker.cornerradius||0,ot=Math.min(tt,Ve/2,nt/2);ot&&fe.data&&fe.data.data&&fe.data.data.label&&(we&&(ot=Math.min(ot,xe.t)),Ae&&(ot=Math.min(ot,xe.l)),$&&(ot=Math.min(ot,xe.r)),oe&&(ot=Math.min(ot,xe.b)));var pt=function(Tt,yt){return ot?"a"+ce(ot,ot)+" 0 0 1 "+ce(Tt,yt):""};return"M"+ce(ve,ze+ot)+pt(ot,-ot)+"L"+ce(Te-ot,ze)+pt(ot,ot)+"L"+ce(Te,He-ot)+pt(-ot,ot)+"L"+ce(ve+ot,He)+pt(-ot,-ot)+"Z"},toMoveInsideSlice:pe,prevEntry:j,makeUpdateSliceInterpolator:ke,makeUpdateTextInterpolator:De,handleSlicesExit:Pe,hasTransition:_,strTransform:Re}),v.pathbar.visible?o(n,a,p,w,{barDifY:F,width:N,height:R,viewX:ge,viewY:ue,pathSlice:function(fe){var ve=ge(Math.max(Math.min(fe.x0,fe.x0),0)),Te=ge(Math.min(Math.max(fe.x1,fe.x1),N)),ze=ue(fe.y0),He=ue(fe.y1),Ve=R/2,nt={},tt={};nt.x=ve,tt.x=Te,nt.y=tt.y=(ze+He)/2;var ot={x:ve,y:ze},pt={x:Te,y:ze},Tt={x:Te,y:He},yt={x:ve,y:He};return Ce===">"?(ot.x-=Ve,pt.x-=Ve,Tt.x-=Ve,yt.x-=Ve):Ce==="/"?(Tt.x-=Ve,yt.x-=Ve,nt.x-=Ve/2,tt.x-=Ve/2):Ce==="\\"?(ot.x-=Ve,pt.x-=Ve,nt.x-=Ve/2,tt.x-=Ve/2):Ce==="<"&&(nt.x-=Ve,tt.x-=Ve),de(ot),de(yt),de(nt),de(pt),de(Tt),de(tt),"M"+ce(ot.x,ot.y)+"L"+ce(pt.x,pt.y)+"L"+ce(tt.x,tt.y)+"L"+ce(Tt.x,Tt.y)+"L"+ce(yt.x,yt.y)+"L"+ce(nt.x,nt.y)+"Z"},toMoveInsideSlice:pe,makeUpdateSliceInterpolator:ke,makeUpdateTextInterpolator:De,handleSlicesExit:Pe,hasTransition:_,strTransform:Re}):w.remove()}},96362:function(K,z,e){var S=e(39898),k=e(7901),l=e(71828),T=e(2791),b=e(72597).resizeText;function d(s,t,o,r){var n,a,i=(r||{}).hovered,u=t.data.data,h=u.i,f=u.color,x=T.isHierarchyRoot(t),v=1;if(i)n=o._hovered.marker.line.color,a=o._hovered.marker.line.width;else if(x&&f===o.root.color)v=100,n="rgba(0,0,0,0)",a=0;else if(n=l.castOption(o,h,"marker.line.color")||k.defaultLine,a=l.castOption(o,h,"marker.line.width")||0,!o._hasColorscale&&!t.onPathbar){var g=o.marker.depthfade;if(g){var y,p=k.combine(k.addOpacity(o._backgroundColor,.75),f);if(g===!0){var m=T.getMaxDepth(o);y=isFinite(m)?T.isLeaf(t)?0:o._maxVisibleLayers-(t.data.depth-o._entryDepth):t.data.height+1}else y=t.data.depth-o._entryDepth,o._atRootLevel||y++;if(y>0)for(var w=0;w<y;w++){var c=.5*w/y;f=k.combine(k.addOpacity(p,c),f)}}}s.style("stroke-width",a).call(k.fill,f).call(k.stroke,n).style("opacity",v)}K.exports={style:function(s){var t=s._fullLayout._treemaplayer.selectAll(".trace");b(s,t,"treemap"),t.each(function(o){var r=S.select(this),n=o[0].trace;r.style("opacity",n.opacity),r.selectAll("path.surface").each(function(a){S.select(this).call(d,a,n,{hovered:!1})})})},styleOne:d}},68875:function(K,z,e){var S=e(53522),k=e(1426).extendFlat,l=e(12663).axisHoverFormat;K.exports={y:S.y,x:S.x,x0:S.x0,y0:S.y0,xhoverformat:l("x"),yhoverformat:l("y"),name:k({},S.name,{}),orientation:k({},S.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:S.fillcolor,points:k({},S.boxpoints,{}),jitter:k({},S.jitter,{}),pointpos:k({},S.pointpos,{}),width:k({},S.width,{}),marker:S.marker,text:S.text,hovertext:S.hovertext,hovertemplate:S.hovertemplate,quartilemethod:S.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:S.offsetgroup,alignmentgroup:S.alignmentgroup,selected:S.selected,unselected:S.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},38603:function(K,z,e){var S=e(71828),k=e(89298),l=e(48518),T=e(60168),b=e(50606).BADNUM;function d(t,o,r){var n=o.max-o.min;if(!n)return t.bandwidth?t.bandwidth:0;if(t.bandwidth)return Math.max(t.bandwidth,n/1e4);var a=r.length,i=S.stdev(r,a-1,o.mean);return Math.max(function(u,h,f){return 1.059*Math.min(h,f/1.349)*Math.pow(u,-.2)}(a,i,o.q3-o.q1),n/100)}function s(t,o,r,n){var a,i=t.spanmode,u=t.span||[],h=[o.min,o.max],f=[o.min-2*n,o.max+2*n];function x(g){var y=u[g],p=r.type==="multicategory"?r.r2c(y):r.d2c(y,0,t[o.valLetter+"calendar"]);return p===b?f[g]:p}var v={type:"linear",range:a=i==="soft"?f:i==="hard"?h:[x(0),x(1)]};return k.setConvert(v),v.cleanRange(),a}K.exports=function(t,o){var r=l(t,o);if(r[0].t.empty)return r;for(var n=t._fullLayout,a=k.getFromId(t,o[o.orientation==="h"?"xaxis":"yaxis"]),i=1/0,u=-1/0,h=0,f=0,x=0;x<r.length;x++){var v=r[x],g=v.pts.map(T.extractVal),y=v.bandwidth=d(o,v,g),p=v.span=s(o,v,a,y);if(v.min===v.max&&y===0)p=v.span=[v.min,v.max],v.density=[{v:1,t:p[0]}],v.bandwidth=y,h=Math.max(h,1);else{var m=p[1]-p[0],w=Math.ceil(m/(y/3)),c=m/w;if(!isFinite(c)||!isFinite(w))return S.error("Something went wrong with computing the violin span"),r[0].t.empty=!0,r;var M=T.makeKDE(v,o,g);v.density=new Array(w);for(var _=0,E=p[0];E<p[1]+c/2;_++,E+=c){var L=M(E);v.density[_]={v:L,t:E},h=Math.max(h,L)}}f=Math.max(f,g.length),i=Math.min(i,p[0]),u=Math.max(u,p[1])}var C=k.findExtremes(a,[i,u],{padded:!0});if(o._extremes[a._id]=C,o.width)r[0].t.maxKDE=h;else{var O=n._violinScaleGroupStats,I=o.scalegroup,N=O[I];N?(N.maxKDE=Math.max(N.maxKDE,h),N.maxCount=Math.max(N.maxCount,f)):O[I]={maxKDE:h,maxCount:f}}return r[0].t.labels.kde=S._(t,"kde:"),r}},86403:function(K,z,e){var S=e(37188).setPositionOffset,k=["v","h"];K.exports=function(l,T){for(var b=l.calcdata,d=T.xaxis,s=T.yaxis,t=0;t<k.length;t++){for(var o=k[t],r=o==="h"?s:d,n=[],a=0;a<b.length;a++){var i=b[a],u=i[0].t,h=i[0].trace;h.visible!==!0||h.type!=="violin"||u.empty||h.orientation!==o||h.xaxis!==d._id||h.yaxis!==s._id||n.push(a)}S("violin",l,n,r)}}},15899:function(K,z,e){var S=e(71828),k=e(7901),l=e(36411),T=e(68875);K.exports=function(b,d,s,t){function o(m,w){return S.coerce(b,d,T,m,w)}function r(m,w){return S.coerce2(b,d,T,m,w)}if(l.handleSampleDefaults(b,d,o,t),d.visible!==!1){o("bandwidth"),o("side"),o("width")||(o("scalegroup",d.name),o("scalemode"));var n,a=o("span");Array.isArray(a)&&(n="manual"),o("spanmode",n);var i=o("line.color",(b.marker||{}).color||s),u=o("line.width"),h=o("fillcolor",k.addOpacity(d.line.color,.5));l.handlePointsDefaults(b,d,o,{prefix:""});var f=r("box.width"),x=r("box.fillcolor",h),v=r("box.line.color",i),g=r("box.line.width",u);o("box.visible",!!(f||x||v||g))||(d.box={visible:!1});var y=r("meanline.color",i),p=r("meanline.width",u);o("meanline.visible",!!(y||p))||(d.meanline={visible:!1}),o("quartilemethod")}}},60168:function(K,z,e){var S=e(71828),k=function(l){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*l*l)};z.makeKDE=function(l,T,b){var d=b.length,s=k,t=l.bandwidth,o=1/(d*t);return function(r){for(var n=0,a=0;a<d;a++)n+=s((r-b[a])/t);return o*n}},z.getPositionOnKdePath=function(l,T,b){var d,s;T.orientation==="h"?(d="y",s="x"):(d="x",s="y");var t=S.findPointOnPath(l.path,b,s,{pathLength:l.pathLength}),o=l.posCenterPx,r=t[d];return[r,T.side==="both"?2*o-r:o]},z.getKdeValue=function(l,T,b){var d=l.pts.map(z.extractVal);return z.makeKDE(l,T,d)(b)/l.posDensityScale},z.extractVal=function(l){return l.v}},57634:function(K,z,e){var S=e(7901),k=e(71828),l=e(89298),T=e(41868),b=e(60168);K.exports=function(d,s,t,o,r){r||(r={});var n,a,i=r.hoverLayer,u=d.cd,h=u[0].trace,f=h.hoveron,x=f.indexOf("violins")!==-1,v=f.indexOf("kde")!==-1,g=[];if(x||v){var y=T.hoverOnBoxes(d,s,t,o);if(v&&y.length>0){var p,m,w,c,M,_=d.xa,E=d.ya;h.orientation==="h"?(M=s,p="y",w=E,m="x",c=_):(M=t,p="x",w=_,m="y",c=E);var L=u[d.index];if(M>=L.span[0]&&M<=L.span[1]){var C=k.extendFlat({},d),O=c.c2p(M,!0),I=b.getKdeValue(L,h,M),N=b.getPositionOnKdePath(L,h,O),R=w._offset,V=w._length;C[p+"0"]=N[0],C[p+"1"]=N[1],C[m+"0"]=C[m+"1"]=O,C[m+"Label"]=m+": "+l.hoverLabelText(c,M,h[m+"hoverformat"])+", "+u[0].t.labels.kde+" "+I.toFixed(3);for(var F=0,D=0;D<y.length;D++)if(y[D].attr==="med"){F=D;break}C.spikeDistance=y[F].spikeDistance;var U=p+"Spike";C[U]=y[F][U],y[F].spikeDistance=void 0,y[F][U]=void 0,C.hovertemplate=!1,g.push(C),(a={})[p+"1"]=k.constrain(R+N[0],R,R+V),a[p+"2"]=k.constrain(R+N[1],R,R+V),a[m+"1"]=a[m+"2"]=c._offset+O}}x&&(g=g.concat(y))}f.indexOf("points")!==-1&&(n=T.hoverOnPoints(d,s,t));var j=i.selectAll(".violinline-"+h.uid).data(a?[0]:[]);return j.enter().append("line").classed("violinline-"+h.uid,!0).attr("stroke-width",1.5),j.exit().remove(),j.attr(a).call(S.stroke,d.color),o==="closest"?n?[n]:g:(n&&g.push(n),g)}},47462:function(K,z,e){K.exports={attributes:e(68875),layoutAttributes:e(9228),supplyDefaults:e(15899),crossTraceDefaults:e(36411).crossTraceDefaults,supplyLayoutDefaults:e(33598),calc:e(38603),crossTraceCalc:e(86403),plot:e(28443),style:e(31847),styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(57634),selectPoints:e(24626),moduleType:"trace",name:"violin",basePlotModule:e(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},9228:function(K,z,e){var S=e(40094),k=e(71828).extendFlat;K.exports={violinmode:k({},S.boxmode,{}),violingap:k({},S.boxgap,{}),violingroupgap:k({},S.boxgroupgap,{})}},33598:function(K,z,e){var S=e(71828),k=e(9228),l=e(4199);K.exports=function(T,b,d){l._supply(T,b,d,function(s,t){return S.coerce(T,b,k,s,t)},"violin")}},28443:function(K,z,e){var S=e(39898),k=e(71828),l=e(91424),T=e(86047),b=e(34621),d=e(60168);K.exports=function(s,t,o,r){var n=s._context.staticPlot,a=s._fullLayout,i=t.xaxis,u=t.yaxis;function h(f,x){var v=b(f,{xaxis:i,yaxis:u,trace:x,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return l.smoothopen(v[0],1)}k.makeTraceGroups(r,o,"trace violins").each(function(f){var x=S.select(this),v=f[0],g=v.t,y=v.trace;if(y.visible!==!0||g.empty)x.remove();else{var p=g.bPos,m=g.bdPos,w=t[g.valLetter+"axis"],c=t[g.posLetter+"axis"],M=y.side==="both",_=M||y.side==="positive",E=M||y.side==="negative",L=x.selectAll("path.violin").data(k.identity);L.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","violin"),L.exit().remove(),L.each(function(D){var U,j,J,X,Z,Y,W,Q,ne=S.select(this),re=D.density,ie=re.length,se=c.c2l(D.pos+p,!0),ge=c.l2p(se);if(y.width)U=g.maxKDE/m;else{var ue=a._violinScaleGroupStats[y.scalegroup];U=y.scalemode==="count"?ue.maxKDE/m*(ue.maxCount/D.pts.length):ue.maxKDE/m}if(_){for(W=new Array(ie),Z=0;Z<ie;Z++)(Q=W[Z]={})[g.posLetter]=se+re[Z].v/U,Q[g.valLetter]=w.c2l(re[Z].t,!0);j=h(W,y)}if(E){for(W=new Array(ie),Y=0,Z=ie-1;Y<ie;Y++,Z--)(Q=W[Y]={})[g.posLetter]=se-re[Z].v/U,Q[g.valLetter]=w.c2l(re[Z].t,!0);J=h(W,y)}if(M)X=j+"L"+J.substr(1)+"Z";else{var ce=[ge,w.c2p(re[0].t)],le=[ge,w.c2p(re[ie-1].t)];y.orientation==="h"&&(ce.reverse(),le.reverse()),X=_?"M"+ce+"L"+j.substr(1)+"L"+le:"M"+le+"L"+J.substr(1)+"L"+ce}ne.attr("d",X),D.posCenterPx=ge,D.posDensityScale=U*m,D.path=ne.node(),D.pathLength=D.path.getTotalLength()/(M?2:1)});var C,O,I,N=y.box,R=N.width,V=(N.line||{}).width;M?(C=m*R,O=0):_?(C=[0,m*R/2],O=V*{x:1,y:-1}[g.posLetter]):(C=[m*R/2,0],O=V*{x:-1,y:1}[g.posLetter]),T.plotBoxAndWhiskers(x,{pos:c,val:w},y,{bPos:p,bdPos:C,bPosPxOffset:O}),T.plotBoxMean(x,{pos:c,val:w},y,{bPos:p,bdPos:C,bPosPxOffset:O}),!y.box.visible&&y.meanline.visible&&(I=k.identity);var F=x.selectAll("path.meanline").data(I||[]);F.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",n?"none":"non-scaling-stroke"),F.exit().remove(),F.each(function(D){var U=w.c2p(D.mean,!0),j=d.getPositionOnKdePath(D,y,U);S.select(this).attr("d",y.orientation==="h"?"M"+U+","+j[0]+"V"+j[1]:"M"+j[0]+","+U+"H"+j[1])}),T.plotPoints(x,{x:i,y:u},y,g)}})}},31847:function(K,z,e){var S=e(39898),k=e(7901),l=e(16296).stylePoints;K.exports=function(T){var b=S.select(T).selectAll("g.trace.violins");b.style("opacity",function(d){return d[0].trace.opacity}),b.each(function(d){var s=d[0].trace,t=S.select(this),o=s.box||{},r=o.line||{},n=s.meanline||{},a=n.width;t.selectAll("path.violin").style("stroke-width",s.line.width+"px").call(k.stroke,s.line.color).call(k.fill,s.fillcolor),t.selectAll("path.box").style("stroke-width",r.width+"px").call(k.stroke,r.color).call(k.fill,o.fillcolor);var i={"stroke-width":a+"px","stroke-dasharray":2*a+"px,"+a+"px"};t.selectAll("path.mean").style(i).call(k.stroke,n.color),t.selectAll("path.meanline").style(i).call(k.stroke,n.color),l(t,s,T)})}},16336:function(K,z,e){var S=e(50693),k=e(16249),l=e(54532),T=e(9012),b=e(1426).extendFlat,d=e(30962).overrideAll,s=K.exports=d(b({x:k.x,y:k.y,z:k.z,value:k.value,isomin:k.isomin,isomax:k.isomax,surface:k.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:k.slices,caps:k.caps,text:k.text,hovertext:k.hovertext,xhoverformat:k.xhoverformat,yhoverformat:k.yhoverformat,zhoverformat:k.zhoverformat,valuehoverformat:k.valuehoverformat,hovertemplate:k.hovertemplate},S("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:k.colorbar,opacity:k.opacity,opacityscale:l.opacityscale,lightposition:k.lightposition,lighting:k.lighting,flatshading:k.flatshading,contour:k.contour,hoverinfo:b({},T.hoverinfo),showlegend:b({},T.showlegend,{dflt:!1})}),"calc","nested");s.x.editType=s.y.editType=s.z.editType=s.value.editType="calc+clearAxisTypes",s.transforms=void 0},64809:function(K,z,e){var S=e(9330).gl_mesh3d,k=e(81697).parseColorScale,l=e(78614),T=e(21081).extractOpts,b=e(90060),d=e(22674).findNearestOnAxis,s=e(22674).generateIsoMeshes;function t(r,n,a){this.scene=r,this.uid=a,this.mesh=n,this.name="",this.data=null,this.showContour=!1}var o=t.prototype;o.handlePick=function(r){if(r.object===this.mesh){var n=r.data.index,a=this.data._meshX[n],i=this.data._meshY[n],u=this.data._meshZ[n],h=this.data._Ys.length,f=this.data._Zs.length,x=d(a,this.data._Xs).id,v=d(i,this.data._Ys).id,g=d(u,this.data._Zs).id,y=r.index=g+f*v+f*h*x;r.traceCoordinate=[this.data._meshX[y],this.data._meshY[y],this.data._meshZ[y],this.data._value[y]];var p=this.data.hovertext||this.data.text;return Array.isArray(p)&&p[y]!==void 0?r.textLabel=p[y]:p&&(r.textLabel=p),!0}},o.update=function(r){var n=this.scene,a=n.fullSceneLayout;function i(f,x,v,g){return x.map(function(y){return f.d2l(y,0,g)*v})}this.data=s(r);var u={positions:b(i(a.xaxis,r._meshX,n.dataScale[0],r.xcalendar),i(a.yaxis,r._meshY,n.dataScale[1],r.ycalendar),i(a.zaxis,r._meshZ,n.dataScale[2],r.zcalendar)),cells:b(r._meshI,r._meshJ,r._meshK),lightPosition:[r.lightposition.x,r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,diffuse:r.lighting.diffuse,specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,opacityscale:r.opacityscale,contourEnable:r.contour.show,contourColor:l(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading},h=T(r);u.vertexIntensity=r._meshIntensity,u.vertexIntensityBounds=[h.min,h.max],u.colormap=k(r),this.mesh.update(u)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},K.exports=function(r,n){var a=r.glplot.gl,i=S({gl:a}),u=new t(r,i,n.uid);return i._trace=u,u.update(n),r.glplot.add(i),u}},47651:function(K,z,e){var S=e(71828),k=e(16336),l=e(82738).supplyIsoDefaults,T=e(91831).opacityscaleDefaults;K.exports=function(b,d,s,t){function o(r,n){return S.coerce(b,d,k,r,n)}l(b,d,s,t,o),T(b,d,t,o)}},17659:function(K,z,e){K.exports={attributes:e(16336),supplyDefaults:e(47651),calc:e(56959),colorbar:{min:"cmin",max:"cmax"},plot:e(64809),moduleType:"trace",name:"volume",basePlotModule:e(58547),categories:["gl3d","showLegend"],meta:{}}},43037:function(K,z,e){var S=e(1486),k=e(82196).line,l=e(9012),T=e(12663).axisHoverFormat,b=e(5386).fF,d=e(5386).si,s=e(48334),t=e(1426).extendFlat,o=e(7901);function r(n){return{marker:{color:t({},S.marker.color,{arrayOk:!1,editType:"style"}),line:{color:t({},S.marker.line.color,{arrayOk:!1,editType:"style"}),width:t({},S.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}K.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:S.x,x0:S.x0,dx:S.dx,y:S.y,y0:S.y0,dy:S.dy,xperiod:S.xperiod,yperiod:S.yperiod,xperiod0:S.xperiod0,yperiod0:S.yperiod0,xperiodalignment:S.xperiodalignment,yperiodalignment:S.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:S.hovertext,hovertemplate:b({},{keys:s.eventDataKeys}),hoverinfo:t({},l.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:d({editType:"plot"},{keys:s.eventDataKeys.concat(["label"])}),text:S.text,textposition:S.textposition,insidetextanchor:S.insidetextanchor,textangle:S.textangle,textfont:S.textfont,insidetextfont:S.insidetextfont,outsidetextfont:S.outsidetextfont,constraintext:S.constraintext,cliponaxis:S.cliponaxis,orientation:S.orientation,offset:S.offset,width:S.width,increasing:r(),decreasing:r(),totals:r(),connector:{line:{color:t({},k.color,{dflt:o.defaultLine}),width:t({},k.width,{editType:"plot"}),dash:k.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:S.offsetgroup,alignmentgroup:S.alignmentgroup}},52752:function(K,z,e){var S=e(89298),k=e(42973),l=e(71828).mergeArray,T=e(66279),b=e(50606).BADNUM;function d(t){return t==="a"||t==="absolute"}function s(t){return t==="t"||t==="total"}K.exports=function(t,o){var r,n,a,i,u,h,f=S.getFromId(t,o.xaxis||"x"),x=S.getFromId(t,o.yaxis||"y");o.orientation==="h"?(r=f.makeCalcdata(o,"x"),a=x.makeCalcdata(o,"y"),i=k(o,x,"y",a),u=!!o.yperiodalignment,h="y"):(r=x.makeCalcdata(o,"y"),a=f.makeCalcdata(o,"x"),i=k(o,f,"x",a),u=!!o.xperiodalignment,h="x"),n=i.vals;for(var v,g=Math.min(n.length,r.length),y=new Array(g),p=0,m=!1,w=0;w<g;w++){var c=r[w]||0,M=!1;(r[w]!==b||s(o.measure[w])||d(o.measure[w]))&&w+1<g&&(r[w+1]!==b||s(o.measure[w+1])||d(o.measure[w+1]))&&(M=!0);var _=y[w]={i:w,p:n[w],s:c,rawS:c,cNext:M};d(o.measure[w])?(p=_.s,_.isSum=!0,_.dir="totals",_.s=p):s(o.measure[w])?(_.isSum=!0,_.dir="totals",_.s=p):(_.isSum=!1,_.dir=_.rawS<0?"decreasing":"increasing",v=_.s,_.s=p+v,p+=v),_.dir==="totals"&&(m=!0),u&&(y[w].orig_p=a[w],y[w][h+"End"]=i.ends[w],y[w][h+"Start"]=i.starts[w]),o.ids&&(_.id=String(o.ids[w])),_.v=(o.base||0)+p}return y.length&&(y[0].hasTotals=m),l(o.text,y,"tx"),l(o.hovertext,y,"htx"),T(y,o),y}},48334:function(K){K.exports={eventDataKeys:["initial","delta","final"]}},70766:function(K,z,e){var S=e(11661).setGroupPositions;K.exports=function(k,l){var T,b,d=k._fullLayout,s=k._fullData,t=k.calcdata,o=l.xaxis,r=l.yaxis,n=[],a=[],i=[];for(b=0;b<s.length;b++){var u=s[b];u.visible===!0&&u.xaxis===o._id&&u.yaxis===r._id&&u.type==="waterfall"&&(T=t[b],u.orientation==="h"?i.push(T):a.push(T),n.push(T))}var h={mode:d.waterfallmode,norm:d.waterfallnorm,gap:d.waterfallgap,groupgap:d.waterfallgroupgap};for(S(k,o,r,a,h),S(k,r,o,i,h),b=0;b<n.length;b++){T=n[b];for(var f=0;f<T.length;f++){var x=T[f];x.isSum===!1&&(x.s0+=f===0?0:T[f-1].s),f+1<T.length&&(T[f].nextP0=T[f+1].p0,T[f].nextS0=T[f+1].s0)}}}},83266:function(K,z,e){var S=e(71828),k=e(26125),l=e(90769).handleText,T=e(67513),b=e(73927),d=e(43037),s=e(7901),t=e(22372),o=t.INCREASING.COLOR,r=t.DECREASING.COLOR;function n(a,i,u){a(i+".marker.color",u),a(i+".marker.line.color",s.defaultLine),a(i+".marker.line.width")}K.exports={supplyDefaults:function(a,i,u,h){function f(v,g){return S.coerce(a,i,d,v,g)}if(T(a,i,h,f)){b(a,i,h,f),f("xhoverformat"),f("yhoverformat"),f("measure"),f("orientation",i.x&&!i.y?"h":"v"),f("base"),f("offset"),f("width"),f("text"),f("hovertext"),f("hovertemplate");var x=f("textposition");l(a,i,h,f,x,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i.textposition!=="none"&&(f("texttemplate"),i.texttemplate||f("textinfo")),n(f,"increasing",o),n(f,"decreasing",r),n(f,"totals","#4499FF"),f("connector.visible")&&(f("connector.mode"),f("connector.line.width")&&(f("connector.line.color"),f("connector.line.dash")))}else i.visible=!1},crossTraceDefaults:function(a,i){var u,h;function f(v){return S.coerce(h._input,h,d,v)}if(i.waterfallmode==="group")for(var x=0;x<a.length;x++)u=(h=a[x])._input,k(u,h,i,f)}}},58593:function(K){K.exports=function(z,e){return z.x="xVal"in e?e.xVal:e.x,z.y="yVal"in e?e.yVal:e.y,"initial"in e&&(z.initial=e.initial),"delta"in e&&(z.delta=e.delta),"final"in e&&(z.final=e.final),e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),z}},61326:function(K,z,e){var S=e(89298).hoverLabelText,k=e(7901).opacity,l=e(95423).hoverOnBars,T=e(22372),b=T.INCREASING.SYMBOL,d=T.DECREASING.SYMBOL;K.exports=function(s,t,o,r,n){var a=l(s,t,o,r,n);if(a){var i=a.cd,u=i[0].trace,h=u.orientation==="h",f=h?"x":"y",x=h?s.xa:s.ya,v=i[a.index],g=v.isSum?v.b+v.s:v.rawS;if(!v.isSum){a.initial=v.b+v.s-g,a.delta=g,a.final=a.initial+a.delta;var y=_(Math.abs(a.delta));a.deltaLabel=g<0?"("+y+")":y,a.finalLabel=_(a.final),a.initialLabel=_(a.initial)}var p=v.hi||u.hoverinfo,m=[];if(p&&p!=="none"&&p!=="skip"){var w=p==="all",c=p.split("+"),M=function(E){return w||c.indexOf(E)!==-1};v.isSum||(!M("final")||M(h?"x":"y")||m.push(a.finalLabel),M("delta")&&(g<0?m.push(a.deltaLabel+" "+d):m.push(a.deltaLabel+" "+b)),M("initial")&&m.push("Initial: "+a.initialLabel))}return m.length&&(a.extraText=m.join("<br>")),a.color=function(E,L){var C=E[L.dir].marker,O=C.color,I=C.line.color,N=C.line.width;return k(O)?O:k(I)&&N?I:void 0}(u,v),[a]}function _(E){return S(x,E,u[f+"hoverformat"])}}},19990:function(K,z,e){K.exports={attributes:e(43037),layoutAttributes:e(13494),supplyDefaults:e(83266).supplyDefaults,crossTraceDefaults:e(83266).crossTraceDefaults,supplyLayoutDefaults:e(5176),calc:e(52752),crossTraceCalc:e(70766),plot:e(30436),style:e(55750).style,hoverPoints:e(61326),eventData:e(58593),selectPoints:e(81974),moduleType:"trace",name:"waterfall",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},13494:function(K){K.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},5176:function(K,z,e){var S=e(71828),k=e(13494);K.exports=function(l,T,b){var d=!1;function s(r,n){return S.coerce(l,T,k,r,n)}for(var t=0;t<b.length;t++){var o=b[t];if(o.visible&&o.type==="waterfall"){d=!0;break}}d&&(s("waterfallmode"),s("waterfallgap",.2),s("waterfallgroupgap"))}},30436:function(K,z,e){var S=e(39898),k=e(71828),l=e(91424),T=e(50606).BADNUM,b=e(17295),d=e(72597).clearMinTextSize;K.exports=function(s,t,o,r){var n=s._fullLayout;d("waterfall",n),b.plot(s,t,o,r,{mode:n.waterfallmode,norm:n.waterfallmode,gap:n.waterfallgap,groupgap:n.waterfallgroupgap}),function(a,i,u,h){var f=i.xaxis,x=i.yaxis;k.makeTraceGroups(h,u,"trace bars").each(function(v){var g=S.select(this),y=v[0].trace,p=k.ensureSingle(g,"g","lines");if(y.connector&&y.connector.visible){var m=y.orientation==="h",w=y.connector.mode,c=p.selectAll("g.line").data(k.identity);c.enter().append("g").classed("line",!0),c.exit().remove();var M=c.size();c.each(function(_,E){if(E===M-1||_.cNext){var L=function(N,R,V,F){var D=[],U=[],j=F?R:V,J=F?V:R;return D[0]=j.c2p(N.s0,!0),U[0]=J.c2p(N.p0,!0),D[1]=j.c2p(N.s1,!0),U[1]=J.c2p(N.p1,!0),D[2]=j.c2p(N.nextS0,!0),U[2]=J.c2p(N.nextP0,!0),F?[D,U]:[U,D]}(_,f,x,m),C=L[0],O=L[1],I="";C[0]!==T&&O[0]!==T&&C[1]!==T&&O[1]!==T&&(w==="spanning"&&!_.isSum&&E>0&&(I+=m?"M"+C[0]+","+O[1]+"V"+O[0]:"M"+C[1]+","+O[0]+"H"+C[0]),w!=="between"&&(_.isSum||E<M-1)&&(I+=m?"M"+C[1]+","+O[0]+"V"+O[1]:"M"+C[0]+","+O[1]+"H"+C[1]),C[2]!==T&&O[2]!==T&&(I+=m?"M"+C[1]+","+O[1]+"V"+O[2]:"M"+C[1]+","+O[1]+"H"+C[2])),I===""&&(I="M0,0Z"),k.ensureSingle(S.select(this),"path").attr("d",I).call(l.setClipUrl,i.layerClipId,a)}})}else p.remove()})}(s,t,o,r)}},55750:function(K,z,e){var S=e(39898),k=e(91424),l=e(7901),T=e(37822).DESELECTDIM,b=e(16688),d=e(72597).resizeText,s=b.styleTextPoints;K.exports={style:function(t,o,r){var n=r||S.select(t).selectAll("g.waterfalllayer").selectAll("g.trace");d(t,n,"waterfall"),n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var i=S.select(this),u=a[0].trace;i.selectAll(".point > path").each(function(h){if(!h.isBlank){var f=u[h.dir].marker;S.select(this).call(l.fill,f.color).call(l.stroke,f.line.color).call(k.dashLine,f.line.dash,f.line.width).style("opacity",u.selectedpoints&&!h.selected?T:1)}}),s(i,u,t),i.selectAll(".lines").each(function(){var h=u.connector.line;k.lineGroupStyle(S.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},82887:function(K,z,e){var S=e(89298),k=e(71828),l=e(86281),T=e(79344).p,b=e(50606).BADNUM;z.moduleType="transform",z.name="aggregate";var d=z.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},s=d.aggregations;function t(a,i,u,h){if(h.enabled){for(var f=h.target,x=k.nestedProperty(i,f),v=x.get(),g=function(m,w){var c=m.func,M=w.d2c,_=w.c2d;switch(c){case"count":return o;case"first":return r;case"last":return n;case"sum":return function(E,L){for(var C=0,O=0;O<L.length;O++){var I=M(E[L[O]]);I!==b&&(C+=I)}return _(C)};case"avg":return function(E,L){for(var C=0,O=0,I=0;I<L.length;I++){var N=M(E[L[I]]);N!==b&&(C+=N,O++)}return O?_(C/O):b};case"min":return function(E,L){for(var C=1/0,O=0;O<L.length;O++){var I=M(E[L[O]]);I!==b&&(C=Math.min(C,I))}return C===1/0?b:_(C)};case"max":return function(E,L){for(var C=-1/0,O=0;O<L.length;O++){var I=M(E[L[O]]);I!==b&&(C=Math.max(C,I))}return C===-1/0?b:_(C)};case"range":return function(E,L){for(var C=1/0,O=-1/0,I=0;I<L.length;I++){var N=M(E[L[I]]);N!==b&&(C=Math.min(C,N),O=Math.max(O,N))}return O===-1/0||C===1/0?b:_(O-C)};case"change":return function(E,L){var C=M(E[L[0]]),O=M(E[L[L.length-1]]);return C===b||O===b?b:_(O-C)};case"median":return function(E,L){for(var C=[],O=0;O<L.length;O++){var I=M(E[L[O]]);I!==b&&C.push(I)}if(!C.length)return b;C.sort(k.sorterAsc);var N=(C.length-1)/2;return _((C[Math.floor(N)]+C[Math.ceil(N)])/2)};case"mode":return function(E,L){for(var C={},O=0,I=b,N=0;N<L.length;N++){var R=M(E[L[N]]);if(R!==b){var V=C[R]=(C[R]||0)+1;V>O&&(O=V,I=R)}}return O?_(I):b};case"rms":return function(E,L){for(var C=0,O=0,I=0;I<L.length;I++){var N=M(E[L[I]]);N!==b&&(C+=N*N,O++)}return O?_(Math.sqrt(C/O)):b};case"stddev":return function(E,L){var C,O=0,I=0,N=1,R=b;for(C=0;C<L.length&&R===b;C++)R=M(E[L[C]]);if(R===b)return b;for(;C<L.length;C++){var V=M(E[L[C]]);if(V!==b){var F=V-R;O+=F,I+=F*F,N++}}var D=m.funcmode==="sample"?N-1:N;return D?Math.sqrt((I-O*O/N)/D):0}}}(h,S.getDataConversions(a,i,f,v)),y=new Array(u.length),p=0;p<u.length;p++)y[p]=g(v,u[p]);x.set(y),h.func==="count"&&k.pushUnique(i._arrayAttrs,f)}}function o(a,i){return i.length}function r(a,i){return a[i[0]]}function n(a,i){return a[i[i.length-1]]}z.supplyDefaults=function(a,i){var u,h={};function f(_,E){return k.coerce(a,h,d,_,E)}if(!f("enabled"))return h;var x=l.findArrayAttributes(i),v={};for(u=0;u<x.length;u++)v[x[u]]=1;var g=f("groups");if(!Array.isArray(g)){if(!v[g])return h.enabled=!1,h;v[g]=0}var y,p=a.aggregations||[],m=h.aggregations=new Array(p.length);function w(_,E){return k.coerce(p[u],y,s,_,E)}for(u=0;u<p.length;u++){y={_index:u};var c=w("target"),M=w("func");w("enabled")&&c&&(v[c]||M==="count"&&v[c]===void 0)?(M==="stddev"&&w("funcmode"),v[c]=0,m[u]=y):m[u]={enabled:!1,_index:u}}for(u=0;u<x.length;u++)v[x[u]]&&m.push({target:x[u],func:s.func.dflt,enabled:!0,_index:-1});return h},z.calcTransform=function(a,i,u){if(u.enabled){var h=u.groups,f=k.getTargetArray(i,{target:h});if(f){var x,v,g,y,p={},m={},w=[],c=T(i.transforms,u),M=f.length;for(i._length&&(M=Math.min(M,i._length)),x=0;x<M;x++)(g=p[v=f[x]])===void 0?(p[v]=w.length,y=[x],w.push(y),m[p[v]]=c(x)):(w[g].push(x),m[p[v]]=(m[p[v]]||[]).concat(c(x)));u._indexToPoints=m;var _=u.aggregations;for(x=0;x<_.length;x++)t(a,i,w,_[x]);typeof h=="string"&&t(a,i,w,{target:h,func:"first",enabled:!0}),i._length=w.length}}}},14382:function(K,z,e){var S=e(71828),k=e(73972),l=e(89298),T=e(79344).p,b=e(74808),d=b.COMPARISON_OPS,s=b.INTERVAL_OPS,t=b.SET_OPS;z.moduleType="transform",z.name="filter",z.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(d).concat(s).concat(t),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},z.supplyDefaults=function(o){var r={};function n(u,h){return S.coerce(o,r,z.attributes,u,h)}if(n("enabled")){var a=n("target");if(S.isArrayOrTypedArray(a)&&a.length===0)return r.enabled=!1,r;n("preservegaps"),n("operation"),n("value");var i=k.getComponentMethod("calendars","handleDefaults");i(o,r,"valuecalendar",null),i(o,r,"targetcalendar",null)}return r},z.calcTransform=function(o,r,n){if(n.enabled){var a=S.getTargetArray(r,n);if(a){var i=n.target,u=a.length;r._length&&(u=Math.min(u,r._length));var h=n.targetcalendar,f=r._arrayAttrs,x=n.preservegaps;if(typeof i=="string"){var v=S.nestedProperty(r,i+"calendar").get();v&&(h=v)}var g,y,p=function(L,C,O){var I=L.operation,N=L.value,R=Array.isArray(N);function V(j){return j.indexOf(I)!==-1}var F,D=function(j){return C(j,0,L.valuecalendar)},U=function(j){return C(j,0,O)};switch(V(d)?F=D(R?N[0]:N):V(s)?F=R?[D(N[0]),D(N[1])]:[D(N),D(N)]:V(t)&&(F=R?N.map(D):[D(N)]),I){case"=":return function(j){return U(j)===F};case"!=":return function(j){return U(j)!==F};case"<":return function(j){return U(j)<F};case"<=":return function(j){return U(j)<=F};case">":return function(j){return U(j)>F};case">=":return function(j){return U(j)>=F};case"[]":return function(j){var J=U(j);return J>=F[0]&&J<=F[1]};case"()":return function(j){var J=U(j);return J>F[0]&&J<F[1]};case"[)":return function(j){var J=U(j);return J>=F[0]&&J<F[1]};case"(]":return function(j){var J=U(j);return J>F[0]&&J<=F[1]};case"][":return function(j){var J=U(j);return J<=F[0]||J>=F[1]};case")(":return function(j){var J=U(j);return J<F[0]||J>F[1]};case"](":return function(j){var J=U(j);return J<=F[0]||J>F[1]};case")[":return function(j){var J=U(j);return J<F[0]||J>=F[1]};case"{}":return function(j){return F.indexOf(U(j))!==-1};case"}{":return function(j){return F.indexOf(U(j))===-1}}}(n,l.getDataToCoordFunc(o,r,i,a),h),m={},w={},c=0;x?(g=function(L){m[L.astr]=S.extendDeep([],L.get()),L.set(new Array(u))},y=function(L,C){var O=m[L.astr][C];L.get()[C]=O}):(g=function(L){m[L.astr]=S.extendDeep([],L.get()),L.set([])},y=function(L,C){var O=m[L.astr][C];L.get().push(O)}),E(g);for(var M=T(r.transforms,n),_=0;_<u;_++)p(a[_])?(E(y,_),w[c++]=M(_)):x&&c++;n._indexToPoints=w,r._length=c}}function E(L,C){for(var O=0;O<f.length;O++)L(S.nestedProperty(r,f[O]),C)}}},43102:function(K,z,e){var S=e(71828),k=e(86281),l=e(74875),T=e(79344).p;function b(d,s){var t,o,r,n,a,i,u,h,f,x,v=s.transform,g=s.transformIndex,y=d.transforms[g].groups,p=T(d.transforms,v);if(!S.isArrayOrTypedArray(y)||y.length===0)return[d];var m=S.filterUnique(y),w=new Array(m.length),c=y.length,M=k.findArrayAttributes(d),_=v.styles||[],E={};for(t=0;t<_.length;t++)E[_[t].target]=_[t].value;v.styles&&(x=S.keyedContainer(v,"styles","target","value.name"));var L={},C={};for(t=0;t<m.length;t++){L[i=m[t]]=t,C[i]=0,(u=w[t]=S.extendDeepNoArrays({},d))._group=i,u.transforms[g]._indexToPoints={};var O=null;for(x&&(O=x.get(i)),u.name=O||O===""?O:S.templateString(v.nameformat,{trace:d.name,group:i}),h=u.transforms,u.transforms=[],o=0;o<h.length;o++)u.transforms[o]=S.extendDeepNoArrays({},h[o]);for(o=0;o<M.length;o++)S.nestedProperty(u,M[o]).set([])}for(r=0;r<M.length;r++){for(n=M[r],o=0,f=[];o<m.length;o++)f[o]=S.nestedProperty(w[o],n).get();for(a=S.nestedProperty(d,n).get(),o=0;o<c;o++)f[L[y[o]]].push(a[o])}for(o=0;o<c;o++)(u=w[L[y[o]]]).transforms[g]._indexToPoints[C[y[o]]]=p(o),C[y[o]]++;for(t=0;t<m.length;t++)i=m[t],u=w[t],l.clearExpandedTraceDefaultColors(u),u=S.extendDeepNoArrays(u,E[i]||{});return w}z.moduleType="transform",z.name="groupby",z.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},z.supplyDefaults=function(d,s,t){var o,r={};function n(f,x){return S.coerce(d,r,z.attributes,f,x)}if(!n("enabled"))return r;n("groups"),n("nameformat",t._dataLength>1?"%{group} (%{trace})":"%{group}");var a=d.styles,i=r.styles=[];if(a)for(o=0;o<a.length;o++){var u=i[o]={};S.coerce(a[o],i[o],z.attributes.styles,"target");var h=S.coerce(a[o],i[o],z.attributes.styles,"value");S.isPlainObject(h)?u.value=S.extendDeep({},h):h&&delete u.value}return r},z.transform=function(d,s){var t,o,r,n=[];for(o=0;o<d.length;o++)for(t=b(d[o],s),r=0;r<t.length;r++)n.push(t[r]);return n}},79344:function(K,z){z.p=function(e,S){for(var k,l,T=0;T<e.length&&(k=e[T])!==S;T++)k._indexToPoints&&k.enabled!==!1&&(l=k._indexToPoints);var b=l?function(d){return l[d]}:function(d){return[d]};return b}},32275:function(K,z,e){var S=e(71828),k=e(89298),l=e(79344).p,T=e(50606).BADNUM;z.moduleType="transform",z.name="sort",z.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},z.supplyDefaults=function(b){var d={};function s(t,o){return S.coerce(b,d,z.attributes,t,o)}return s("enabled")&&(s("target"),s("order")),d},z.calcTransform=function(b,d,s){if(s.enabled){var t=S.getTargetArray(d,s);if(t){var o=s.target,r=t.length;d._length&&(r=Math.min(r,d._length));var n,a,i=d._arrayAttrs,u=function(y,p,m,w){var c,M=new Array(w),_=new Array(w);for(c=0;c<w;c++)M[c]={v:p[c],i:c};for(M.sort(function(E,L){switch(E.order){case"ascending":return function(C,O){var I=L(C.v),N=L(O.v);return I===T?1:N===T?-1:I-N};case"descending":return function(C,O){var I=L(C.v),N=L(O.v);return I===T?1:N===T?-1:N-I}}}(y,m)),c=0;c<w;c++)_[c]=M[c].i;return _}(s,t,k.getDataToCoordFunc(b,d,o,t),r),h=l(d.transforms,s),f={};for(n=0;n<i.length;n++){var x=S.nestedProperty(d,i[n]),v=x.get(),g=new Array(r);for(a=0;a<r;a++)g[a]=v[u[a]];x.set(g)}for(a=0;a<r;a++)f[a]=h(u[a]);s._indexToPoints=f,d._length=r}}}},11506:function(K,z){z.version="2.22.0"},9330:function(K,z,e){var S,k=e(90386);S=function(){return function(){var l={7386:function(d,s,t){d.exports={alpha_shape:t(2350),convex_hull:t(5537),delaunay_triangulate:t(4419),gl_cone3d:t(1140),gl_error3d:t(3110),gl_heatmap2d:t(6386),gl_line3d:t(6086),gl_mesh3d:t(8116),gl_plot2d:t(2117),gl_plot3d:t(1059),gl_pointcloud2d:t(8271),gl_scatter3d:t(2182),gl_select_box:t(6623),gl_spikes2d:t(3050),gl_streamtube3d:t(7307),gl_surface3d:t(3754),ndarray:t(5050),ndarray_linear_interpolate:t(3581)}},2146:function(d,s,t){function o(fe,ve){if(!(fe instanceof ve))throw new TypeError("Cannot call a class as a function")}function r(fe,ve){for(var Te=0;Te<ve.length;Te++){var ze=ve[Te];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(fe,ze.key,ze)}}function n(fe,ve){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Te,ze){return Te.__proto__=ze,Te},n(fe,ve)}function a(fe,ve){if(ve&&(h(ve)==="object"||typeof ve=="function"))return ve;if(ve!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i(fe)}function i(fe){if(fe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return fe}function u(fe){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ve){return ve.__proto__||Object.getPrototypeOf(ve)},u(fe)}function h(fe){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ve){return typeof ve}:function(ve){return ve&&typeof Symbol=="function"&&ve.constructor===Symbol&&ve!==Symbol.prototype?"symbol":typeof ve},h(fe)}var f=t(3910),x=t(3187),v=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.lW=p,s.h2=50;var g=2147483647;function y(fe){if(fe>g)throw new RangeError('The value "'+fe+'" is invalid for option "size"');var ve=new Uint8Array(fe);return Object.setPrototypeOf(ve,p.prototype),ve}function p(fe,ve,Te){if(typeof fe=="number"){if(typeof ve=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return c(fe)}return m(fe,ve,Te)}function m(fe,ve,Te){if(typeof fe=="string")return function(Ve,nt){if(typeof nt=="string"&&nt!==""||(nt="utf8"),!p.isEncoding(nt))throw new TypeError("Unknown encoding: "+nt);var tt=0|L(Ve,nt),ot=y(tt),pt=ot.write(Ve,nt);return pt!==tt&&(ot=ot.slice(0,pt)),ot}(fe,ve);if(ArrayBuffer.isView(fe))return function(Ve){if(ye(Ve,Uint8Array)){var nt=new Uint8Array(Ve);return _(nt.buffer,nt.byteOffset,nt.byteLength)}return M(Ve)}(fe);if(fe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+h(fe));if(ye(fe,ArrayBuffer)||fe&&ye(fe.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ye(fe,SharedArrayBuffer)||fe&&ye(fe.buffer,SharedArrayBuffer)))return _(fe,ve,Te);if(typeof fe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ze=fe.valueOf&&fe.valueOf();if(ze!=null&&ze!==fe)return p.from(ze,ve,Te);var He=function(Ve){if(p.isBuffer(Ve)){var nt=0|E(Ve.length),tt=y(nt);return tt.length===0||Ve.copy(tt,0,0,nt),tt}return Ve.length!==void 0?typeof Ve.length!="number"||ke(Ve.length)?y(0):M(Ve):Ve.type==="Buffer"&&Array.isArray(Ve.data)?M(Ve.data):void 0}(fe);if(He)return He;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof fe[Symbol.toPrimitive]=="function")return p.from(fe[Symbol.toPrimitive]("string"),ve,Te);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+h(fe))}function w(fe){if(typeof fe!="number")throw new TypeError('"size" argument must be of type number');if(fe<0)throw new RangeError('The value "'+fe+'" is invalid for option "size"')}function c(fe){return w(fe),y(fe<0?0:0|E(fe))}function M(fe){for(var ve=fe.length<0?0:0|E(fe.length),Te=y(ve),ze=0;ze<ve;ze+=1)Te[ze]=255&fe[ze];return Te}function _(fe,ve,Te){if(ve<0||fe.byteLength<ve)throw new RangeError('"offset" is outside of buffer bounds');if(fe.byteLength<ve+(Te||0))throw new RangeError('"length" is outside of buffer bounds');var ze;return ze=ve===void 0&&Te===void 0?new Uint8Array(fe):Te===void 0?new Uint8Array(fe,ve):new Uint8Array(fe,ve,Te),Object.setPrototypeOf(ze,p.prototype),ze}function E(fe){if(fe>=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g.toString(16)+" bytes");return 0|fe}function L(fe,ve){if(p.isBuffer(fe))return fe.length;if(ArrayBuffer.isView(fe)||ye(fe,ArrayBuffer))return fe.byteLength;if(typeof fe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+h(fe));var Te=fe.length,ze=arguments.length>2&&arguments[2]===!0;if(!ze&&Te===0)return 0;for(var He=!1;;)switch(ve){case"ascii":case"latin1":case"binary":return Te;case"utf8":case"utf-8":return $(fe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Te;case"hex":return Te>>>1;case"base64":return oe(fe).length;default:if(He)return ze?-1:$(fe).length;ve=(""+ve).toLowerCase(),He=!0}}function C(fe,ve,Te){var ze=!1;if((ve===void 0||ve<0)&&(ve=0),ve>this.length||((Te===void 0||Te>this.length)&&(Te=this.length),Te<=0)||(Te>>>=0)<=(ve>>>=0))return"";for(fe||(fe="utf8");;)switch(fe){case"hex":return W(this,ve,Te);case"utf8":case"utf-8":return J(this,ve,Te);case"ascii":return Z(this,ve,Te);case"latin1":case"binary":return Y(this,ve,Te);case"base64":return j(this,ve,Te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,ve,Te);default:if(ze)throw new TypeError("Unknown encoding: "+fe);fe=(fe+"").toLowerCase(),ze=!0}}function O(fe,ve,Te){var ze=fe[ve];fe[ve]=fe[Te],fe[Te]=ze}function I(fe,ve,Te,ze,He){if(fe.length===0)return-1;if(typeof Te=="string"?(ze=Te,Te=0):Te>2147483647?Te=2147483647:Te<-2147483648&&(Te=-2147483648),ke(Te=+Te)&&(Te=He?0:fe.length-1),Te<0&&(Te=fe.length+Te),Te>=fe.length){if(He)return-1;Te=fe.length-1}else if(Te<0){if(!He)return-1;Te=0}if(typeof ve=="string"&&(ve=p.from(ve,ze)),p.isBuffer(ve))return ve.length===0?-1:N(fe,ve,Te,ze,He);if(typeof ve=="number")return ve&=255,typeof Uint8Array.prototype.indexOf=="function"?He?Uint8Array.prototype.indexOf.call(fe,ve,Te):Uint8Array.prototype.lastIndexOf.call(fe,ve,Te):N(fe,[ve],Te,ze,He);throw new TypeError("val must be string, number or Buffer")}function N(fe,ve,Te,ze,He){var Ve,nt=1,tt=fe.length,ot=ve.length;if(ze!==void 0&&((ze=String(ze).toLowerCase())==="ucs2"||ze==="ucs-2"||ze==="utf16le"||ze==="utf-16le")){if(fe.length<2||ve.length<2)return-1;nt=2,tt/=2,ot/=2,Te/=2}function pt(Pt,Et){return nt===1?Pt[Et]:Pt.readUInt16BE(Et*nt)}if(He){var Tt=-1;for(Ve=Te;Ve<tt;Ve++)if(pt(fe,Ve)===pt(ve,Tt===-1?0:Ve-Tt)){if(Tt===-1&&(Tt=Ve),Ve-Tt+1===ot)return Tt*nt}else Tt!==-1&&(Ve-=Ve-Tt),Tt=-1}else for(Te+ot>tt&&(Te=tt-ot),Ve=Te;Ve>=0;Ve--){for(var yt=!0,dt=0;dt<ot;dt++)if(pt(fe,Ve+dt)!==pt(ve,dt)){yt=!1;break}if(yt)return Ve}return-1}function R(fe,ve,Te,ze){Te=Number(Te)||0;var He=fe.length-Te;ze?(ze=Number(ze))>He&&(ze=He):ze=He;var Ve,nt=ve.length;for(ze>nt/2&&(ze=nt/2),Ve=0;Ve<ze;++Ve){var tt=parseInt(ve.substr(2*Ve,2),16);if(ke(tt))return Ve;fe[Te+Ve]=tt}return Ve}function V(fe,ve,Te,ze){return pe($(ve,fe.length-Te),fe,Te,ze)}function F(fe,ve,Te,ze){return pe(function(He){for(var Ve=[],nt=0;nt<He.length;++nt)Ve.push(255&He.charCodeAt(nt));return Ve}(ve),fe,Te,ze)}function D(fe,ve,Te,ze){return pe(oe(ve),fe,Te,ze)}function U(fe,ve,Te,ze){return pe(function(He,Ve){for(var nt,tt,ot,pt=[],Tt=0;Tt<He.length&&!((Ve-=2)<0);++Tt)tt=(nt=He.charCodeAt(Tt))>>8,ot=nt%256,pt.push(ot),pt.push(tt);return pt}(ve,fe.length-Te),fe,Te,ze)}function j(fe,ve,Te){return ve===0&&Te===fe.length?f.fromByteArray(fe):f.fromByteArray(fe.slice(ve,Te))}function J(fe,ve,Te){Te=Math.min(fe.length,Te);for(var ze=[],He=ve;He<Te;){var Ve=fe[He],nt=null,tt=Ve>239?4:Ve>223?3:Ve>191?2:1;if(He+tt<=Te){var ot=void 0,pt=void 0,Tt=void 0,yt=void 0;switch(tt){case 1:Ve<128&&(nt=Ve);break;case 2:(192&(ot=fe[He+1]))==128&&(yt=(31&Ve)<<6|63&ot)>127&&(nt=yt);break;case 3:ot=fe[He+1],pt=fe[He+2],(192&ot)==128&&(192&pt)==128&&(yt=(15&Ve)<<12|(63&ot)<<6|63&pt)>2047&&(yt<55296||yt>57343)&&(nt=yt);break;case 4:ot=fe[He+1],pt=fe[He+2],Tt=fe[He+3],(192&ot)==128&&(192&pt)==128&&(192&Tt)==128&&(yt=(15&Ve)<<18|(63&ot)<<12|(63&pt)<<6|63&Tt)>65535&&yt<1114112&&(nt=yt)}}nt===null?(nt=65533,tt=1):nt>65535&&(nt-=65536,ze.push(nt>>>10&1023|55296),nt=56320|1023&nt),ze.push(nt),He+=tt}return function(dt){var Pt=dt.length;if(Pt<=X)return String.fromCharCode.apply(String,dt);for(var Et="",Ot=0;Ot<Pt;)Et+=String.fromCharCode.apply(String,dt.slice(Ot,Ot+=X));return Et}(ze)}p.TYPED_ARRAY_SUPPORT=function(){try{var fe=new Uint8Array(1),ve={foo:function(){return 42}};return Object.setPrototypeOf(ve,Uint8Array.prototype),Object.setPrototypeOf(fe,ve),fe.foo()===42}catch{return!1}}(),p.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(fe,ve,Te){return m(fe,ve,Te)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(fe,ve,Te){return function(ze,He,Ve){return w(ze),ze<=0?y(ze):He!==void 0?typeof Ve=="string"?y(ze).fill(He,Ve):y(ze).fill(He):y(ze)}(fe,ve,Te)},p.allocUnsafe=function(fe){return c(fe)},p.allocUnsafeSlow=function(fe){return c(fe)},p.isBuffer=function(fe){return fe!=null&&fe._isBuffer===!0&&fe!==p.prototype},p.compare=function(fe,ve){if(ye(fe,Uint8Array)&&(fe=p.from(fe,fe.offset,fe.byteLength)),ye(ve,Uint8Array)&&(ve=p.from(ve,ve.offset,ve.byteLength)),!p.isBuffer(fe)||!p.isBuffer(ve))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(fe===ve)return 0;for(var Te=fe.length,ze=ve.length,He=0,Ve=Math.min(Te,ze);He<Ve;++He)if(fe[He]!==ve[He]){Te=fe[He],ze=ve[He];break}return Te<ze?-1:ze<Te?1:0},p.isEncoding=function(fe){switch(String(fe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(fe,ve){if(!Array.isArray(fe))throw new TypeError('"list" argument must be an Array of Buffers');if(fe.length===0)return p.alloc(0);var Te;if(ve===void 0)for(ve=0,Te=0;Te<fe.length;++Te)ve+=fe[Te].length;var ze=p.allocUnsafe(ve),He=0;for(Te=0;Te<fe.length;++Te){var Ve=fe[Te];if(ye(Ve,Uint8Array))He+Ve.length>ze.length?(p.isBuffer(Ve)||(Ve=p.from(Ve)),Ve.copy(ze,He)):Uint8Array.prototype.set.call(ze,Ve,He);else{if(!p.isBuffer(Ve))throw new TypeError('"list" argument must be an Array of Buffers');Ve.copy(ze,He)}He+=Ve.length}return ze},p.byteLength=L,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var fe=this.length;if(fe%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ve=0;ve<fe;ve+=2)O(this,ve,ve+1);return this},p.prototype.swap32=function(){var fe=this.length;if(fe%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ve=0;ve<fe;ve+=4)O(this,ve,ve+3),O(this,ve+1,ve+2);return this},p.prototype.swap64=function(){var fe=this.length;if(fe%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ve=0;ve<fe;ve+=8)O(this,ve,ve+7),O(this,ve+1,ve+6),O(this,ve+2,ve+5),O(this,ve+3,ve+4);return this},p.prototype.toString=function(){var fe=this.length;return fe===0?"":arguments.length===0?J(this,0,fe):C.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(fe){if(!p.isBuffer(fe))throw new TypeError("Argument must be a Buffer");return this===fe||p.compare(this,fe)===0},p.prototype.inspect=function(){var fe="",ve=s.h2;return fe=this.toString("hex",0,ve).replace(/(.{2})/g,"$1 ").trim(),this.length>ve&&(fe+=" ... "),"<Buffer "+fe+">"},v&&(p.prototype[v]=p.prototype.inspect),p.prototype.compare=function(fe,ve,Te,ze,He){if(ye(fe,Uint8Array)&&(fe=p.from(fe,fe.offset,fe.byteLength)),!p.isBuffer(fe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+h(fe));if(ve===void 0&&(ve=0),Te===void 0&&(Te=fe?fe.length:0),ze===void 0&&(ze=0),He===void 0&&(He=this.length),ve<0||Te>fe.length||ze<0||He>this.length)throw new RangeError("out of range index");if(ze>=He&&ve>=Te)return 0;if(ze>=He)return-1;if(ve>=Te)return 1;if(this===fe)return 0;for(var Ve=(He>>>=0)-(ze>>>=0),nt=(Te>>>=0)-(ve>>>=0),tt=Math.min(Ve,nt),ot=this.slice(ze,He),pt=fe.slice(ve,Te),Tt=0;Tt<tt;++Tt)if(ot[Tt]!==pt[Tt]){Ve=ot[Tt],nt=pt[Tt];break}return Ve<nt?-1:nt<Ve?1:0},p.prototype.includes=function(fe,ve,Te){return this.indexOf(fe,ve,Te)!==-1},p.prototype.indexOf=function(fe,ve,Te){return I(this,fe,ve,Te,!0)},p.prototype.lastIndexOf=function(fe,ve,Te){return I(this,fe,ve,Te,!1)},p.prototype.write=function(fe,ve,Te,ze){if(ve===void 0)ze="utf8",Te=this.length,ve=0;else if(Te===void 0&&typeof ve=="string")ze=ve,Te=this.length,ve=0;else{if(!isFinite(ve))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ve>>>=0,isFinite(Te)?(Te>>>=0,ze===void 0&&(ze="utf8")):(ze=Te,Te=void 0)}var He=this.length-ve;if((Te===void 0||Te>He)&&(Te=He),fe.length>0&&(Te<0||ve<0)||ve>this.length)throw new RangeError("Attempt to write outside buffer bounds");ze||(ze="utf8");for(var Ve=!1;;)switch(ze){case"hex":return R(this,fe,ve,Te);case"utf8":case"utf-8":return V(this,fe,ve,Te);case"ascii":case"latin1":case"binary":return F(this,fe,ve,Te);case"base64":return D(this,fe,ve,Te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,fe,ve,Te);default:if(Ve)throw new TypeError("Unknown encoding: "+ze);ze=(""+ze).toLowerCase(),Ve=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var X=4096;function Z(fe,ve,Te){var ze="";Te=Math.min(fe.length,Te);for(var He=ve;He<Te;++He)ze+=String.fromCharCode(127&fe[He]);return ze}function Y(fe,ve,Te){var ze="";Te=Math.min(fe.length,Te);for(var He=ve;He<Te;++He)ze+=String.fromCharCode(fe[He]);return ze}function W(fe,ve,Te){var ze=fe.length;(!ve||ve<0)&&(ve=0),(!Te||Te<0||Te>ze)&&(Te=ze);for(var He="",Ve=ve;Ve<Te;++Ve)He+=De[fe[Ve]];return He}function Q(fe,ve,Te){for(var ze=fe.slice(ve,Te),He="",Ve=0;Ve<ze.length-1;Ve+=2)He+=String.fromCharCode(ze[Ve]+256*ze[Ve+1]);return He}function ne(fe,ve,Te){if(fe%1!=0||fe<0)throw new RangeError("offset is not uint");if(fe+ve>Te)throw new RangeError("Trying to access beyond buffer length")}function re(fe,ve,Te,ze,He,Ve){if(!p.isBuffer(fe))throw new TypeError('"buffer" argument must be a Buffer instance');if(ve>He||ve<Ve)throw new RangeError('"value" argument is out of bounds');if(Te+ze>fe.length)throw new RangeError("Index out of range")}function ie(fe,ve,Te,ze,He){xe(ve,ze,He,fe,Te,7);var Ve=Number(ve&BigInt(4294967295));fe[Te++]=Ve,Ve>>=8,fe[Te++]=Ve,Ve>>=8,fe[Te++]=Ve,Ve>>=8,fe[Te++]=Ve;var nt=Number(ve>>BigInt(32)&BigInt(4294967295));return fe[Te++]=nt,nt>>=8,fe[Te++]=nt,nt>>=8,fe[Te++]=nt,nt>>=8,fe[Te++]=nt,Te}function se(fe,ve,Te,ze,He){xe(ve,ze,He,fe,Te,7);var Ve=Number(ve&BigInt(4294967295));fe[Te+7]=Ve,Ve>>=8,fe[Te+6]=Ve,Ve>>=8,fe[Te+5]=Ve,Ve>>=8,fe[Te+4]=Ve;var nt=Number(ve>>BigInt(32)&BigInt(4294967295));return fe[Te+3]=nt,nt>>=8,fe[Te+2]=nt,nt>>=8,fe[Te+1]=nt,nt>>=8,fe[Te]=nt,Te+8}function ge(fe,ve,Te,ze,He,Ve){if(Te+ze>fe.length)throw new RangeError("Index out of range");if(Te<0)throw new RangeError("Index out of range")}function ue(fe,ve,Te,ze,He){return ve=+ve,Te>>>=0,He||ge(fe,0,Te,4),x.write(fe,ve,Te,ze,23,4),Te+4}function ce(fe,ve,Te,ze,He){return ve=+ve,Te>>>=0,He||ge(fe,0,Te,8),x.write(fe,ve,Te,ze,52,8),Te+8}p.prototype.slice=function(fe,ve){var Te=this.length;(fe=~~fe)<0?(fe+=Te)<0&&(fe=0):fe>Te&&(fe=Te),(ve=ve===void 0?Te:~~ve)<0?(ve+=Te)<0&&(ve=0):ve>Te&&(ve=Te),ve<fe&&(ve=fe);var ze=this.subarray(fe,ve);return Object.setPrototypeOf(ze,p.prototype),ze},p.prototype.readUintLE=p.prototype.readUIntLE=function(fe,ve,Te){fe>>>=0,ve>>>=0,Te||ne(fe,ve,this.length);for(var ze=this[fe],He=1,Ve=0;++Ve<ve&&(He*=256);)ze+=this[fe+Ve]*He;return ze},p.prototype.readUintBE=p.prototype.readUIntBE=function(fe,ve,Te){fe>>>=0,ve>>>=0,Te||ne(fe,ve,this.length);for(var ze=this[fe+--ve],He=1;ve>0&&(He*=256);)ze+=this[fe+--ve]*He;return ze},p.prototype.readUint8=p.prototype.readUInt8=function(fe,ve){return fe>>>=0,ve||ne(fe,1,this.length),this[fe]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(fe,ve){return fe>>>=0,ve||ne(fe,2,this.length),this[fe]|this[fe+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(fe,ve){return fe>>>=0,ve||ne(fe,2,this.length),this[fe]<<8|this[fe+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(fe,ve){return fe>>>=0,ve||ne(fe,4,this.length),(this[fe]|this[fe+1]<<8|this[fe+2]<<16)+16777216*this[fe+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(fe,ve){return fe>>>=0,ve||ne(fe,4,this.length),16777216*this[fe]+(this[fe+1]<<16|this[fe+2]<<8|this[fe+3])},p.prototype.readBigUInt64LE=Pe(function(fe){_e(fe>>>=0,"offset");var ve=this[fe],Te=this[fe+7];ve!==void 0&&Te!==void 0||we(fe,this.length-8);var ze=ve+this[++fe]*Math.pow(2,8)+this[++fe]*Math.pow(2,16)+this[++fe]*Math.pow(2,24),He=this[++fe]+this[++fe]*Math.pow(2,8)+this[++fe]*Math.pow(2,16)+Te*Math.pow(2,24);return BigInt(ze)+(BigInt(He)<<BigInt(32))}),p.prototype.readBigUInt64BE=Pe(function(fe){_e(fe>>>=0,"offset");var ve=this[fe],Te=this[fe+7];ve!==void 0&&Te!==void 0||we(fe,this.length-8);var ze=ve*Math.pow(2,24)+this[++fe]*Math.pow(2,16)+this[++fe]*Math.pow(2,8)+this[++fe],He=this[++fe]*Math.pow(2,24)+this[++fe]*Math.pow(2,16)+this[++fe]*Math.pow(2,8)+Te;return(BigInt(ze)<<BigInt(32))+BigInt(He)}),p.prototype.readIntLE=function(fe,ve,Te){fe>>>=0,ve>>>=0,Te||ne(fe,ve,this.length);for(var ze=this[fe],He=1,Ve=0;++Ve<ve&&(He*=256);)ze+=this[fe+Ve]*He;return ze>=(He*=128)&&(ze-=Math.pow(2,8*ve)),ze},p.prototype.readIntBE=function(fe,ve,Te){fe>>>=0,ve>>>=0,Te||ne(fe,ve,this.length);for(var ze=ve,He=1,Ve=this[fe+--ze];ze>0&&(He*=256);)Ve+=this[fe+--ze]*He;return Ve>=(He*=128)&&(Ve-=Math.pow(2,8*ve)),Ve},p.prototype.readInt8=function(fe,ve){return fe>>>=0,ve||ne(fe,1,this.length),128&this[fe]?-1*(255-this[fe]+1):this[fe]},p.prototype.readInt16LE=function(fe,ve){fe>>>=0,ve||ne(fe,2,this.length);var Te=this[fe]|this[fe+1]<<8;return 32768&Te?4294901760|Te:Te},p.prototype.readInt16BE=function(fe,ve){fe>>>=0,ve||ne(fe,2,this.length);var Te=this[fe+1]|this[fe]<<8;return 32768&Te?4294901760|Te:Te},p.prototype.readInt32LE=function(fe,ve){return fe>>>=0,ve||ne(fe,4,this.length),this[fe]|this[fe+1]<<8|this[fe+2]<<16|this[fe+3]<<24},p.prototype.readInt32BE=function(fe,ve){return fe>>>=0,ve||ne(fe,4,this.length),this[fe]<<24|this[fe+1]<<16|this[fe+2]<<8|this[fe+3]},p.prototype.readBigInt64LE=Pe(function(fe){_e(fe>>>=0,"offset");var ve=this[fe],Te=this[fe+7];ve!==void 0&&Te!==void 0||we(fe,this.length-8);var ze=this[fe+4]+this[fe+5]*Math.pow(2,8)+this[fe+6]*Math.pow(2,16)+(Te<<24);return(BigInt(ze)<<BigInt(32))+BigInt(ve+this[++fe]*Math.pow(2,8)+this[++fe]*Math.pow(2,16)+this[++fe]*Math.pow(2,24))}),p.prototype.readBigInt64BE=Pe(function(fe){_e(fe>>>=0,"offset");var ve=this[fe],Te=this[fe+7];ve!==void 0&&Te!==void 0||we(fe,this.length-8);var ze=(ve<<24)+this[++fe]*Math.pow(2,16)+this[++fe]*Math.pow(2,8)+this[++fe];return(BigInt(ze)<<BigInt(32))+BigInt(this[++fe]*Math.pow(2,24)+this[++fe]*Math.pow(2,16)+this[++fe]*Math.pow(2,8)+Te)}),p.prototype.readFloatLE=function(fe,ve){return fe>>>=0,ve||ne(fe,4,this.length),x.read(this,fe,!0,23,4)},p.prototype.readFloatBE=function(fe,ve){return fe>>>=0,ve||ne(fe,4,this.length),x.read(this,fe,!1,23,4)},p.prototype.readDoubleLE=function(fe,ve){return fe>>>=0,ve||ne(fe,8,this.length),x.read(this,fe,!0,52,8)},p.prototype.readDoubleBE=function(fe,ve){return fe>>>=0,ve||ne(fe,8,this.length),x.read(this,fe,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(fe,ve,Te,ze){fe=+fe,ve>>>=0,Te>>>=0,ze||re(this,fe,ve,Te,Math.pow(2,8*Te)-1,0);var He=1,Ve=0;for(this[ve]=255&fe;++Ve<Te&&(He*=256);)this[ve+Ve]=fe/He&255;return ve+Te},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(fe,ve,Te,ze){fe=+fe,ve>>>=0,Te>>>=0,ze||re(this,fe,ve,Te,Math.pow(2,8*Te)-1,0);var He=Te-1,Ve=1;for(this[ve+He]=255&fe;--He>=0&&(Ve*=256);)this[ve+He]=fe/Ve&255;return ve+Te},p.prototype.writeUint8=p.prototype.writeUInt8=function(fe,ve,Te){return fe=+fe,ve>>>=0,Te||re(this,fe,ve,1,255,0),this[ve]=255&fe,ve+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(fe,ve,Te){return fe=+fe,ve>>>=0,Te||re(this,fe,ve,2,65535,0),this[ve]=255&fe,this[ve+1]=fe>>>8,ve+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(fe,ve,Te){return fe=+fe,ve>>>=0,Te||re(this,fe,ve,2,65535,0),this[ve]=fe>>>8,this[ve+1]=255&fe,ve+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(fe,ve,Te){return fe=+fe,ve>>>=0,Te||re(this,fe,ve,4,4294967295,0),this[ve+3]=fe>>>24,this[ve+2]=fe>>>16,this[ve+1]=fe>>>8,this[ve]=255&fe,ve+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(fe,ve,Te){return fe=+fe,ve>>>=0,Te||re(this,fe,ve,4,4294967295,0),this[ve]=fe>>>24,this[ve+1]=fe>>>16,this[ve+2]=fe>>>8,this[ve+3]=255&fe,ve+4},p.prototype.writeBigUInt64LE=Pe(function(fe){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ie(this,fe,ve,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeBigUInt64BE=Pe(function(fe){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return se(this,fe,ve,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeIntLE=function(fe,ve,Te,ze){if(fe=+fe,ve>>>=0,!ze){var He=Math.pow(2,8*Te-1);re(this,fe,ve,Te,He-1,-He)}var Ve=0,nt=1,tt=0;for(this[ve]=255&fe;++Ve<Te&&(nt*=256);)fe<0&&tt===0&&this[ve+Ve-1]!==0&&(tt=1),this[ve+Ve]=(fe/nt>>0)-tt&255;return ve+Te},p.prototype.writeIntBE=function(fe,ve,Te,ze){if(fe=+fe,ve>>>=0,!ze){var He=Math.pow(2,8*Te-1);re(this,fe,ve,Te,He-1,-He)}var Ve=Te-1,nt=1,tt=0;for(this[ve+Ve]=255&fe;--Ve>=0&&(nt*=256);)fe<0&&tt===0&&this[ve+Ve+1]!==0&&(tt=1),this[ve+Ve]=(fe/nt>>0)-tt&255;return ve+Te},p.prototype.writeInt8=function(fe,ve,Te){return fe=+fe,ve>>>=0,Te||re(this,fe,ve,1,127,-128),fe<0&&(fe=255+fe+1),this[ve]=255&fe,ve+1},p.prototype.writeInt16LE=function(fe,ve,Te){return fe=+fe,ve>>>=0,Te||re(this,fe,ve,2,32767,-32768),this[ve]=255&fe,this[ve+1]=fe>>>8,ve+2},p.prototype.writeInt16BE=function(fe,ve,Te){return fe=+fe,ve>>>=0,Te||re(this,fe,ve,2,32767,-32768),this[ve]=fe>>>8,this[ve+1]=255&fe,ve+2},p.prototype.writeInt32LE=function(fe,ve,Te){return fe=+fe,ve>>>=0,Te||re(this,fe,ve,4,2147483647,-2147483648),this[ve]=255&fe,this[ve+1]=fe>>>8,this[ve+2]=fe>>>16,this[ve+3]=fe>>>24,ve+4},p.prototype.writeInt32BE=function(fe,ve,Te){return fe=+fe,ve>>>=0,Te||re(this,fe,ve,4,2147483647,-2147483648),fe<0&&(fe=4294967295+fe+1),this[ve]=fe>>>24,this[ve+1]=fe>>>16,this[ve+2]=fe>>>8,this[ve+3]=255&fe,ve+4},p.prototype.writeBigInt64LE=Pe(function(fe){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ie(this,fe,ve,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeBigInt64BE=Pe(function(fe){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return se(this,fe,ve,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeFloatLE=function(fe,ve,Te){return ue(this,fe,ve,!0,Te)},p.prototype.writeFloatBE=function(fe,ve,Te){return ue(this,fe,ve,!1,Te)},p.prototype.writeDoubleLE=function(fe,ve,Te){return ce(this,fe,ve,!0,Te)},p.prototype.writeDoubleBE=function(fe,ve,Te){return ce(this,fe,ve,!1,Te)},p.prototype.copy=function(fe,ve,Te,ze){if(!p.isBuffer(fe))throw new TypeError("argument should be a Buffer");if(Te||(Te=0),ze||ze===0||(ze=this.length),ve>=fe.length&&(ve=fe.length),ve||(ve=0),ze>0&&ze<Te&&(ze=Te),ze===Te||fe.length===0||this.length===0)return 0;if(ve<0)throw new RangeError("targetStart out of bounds");if(Te<0||Te>=this.length)throw new RangeError("Index out of range");if(ze<0)throw new RangeError("sourceEnd out of bounds");ze>this.length&&(ze=this.length),fe.length-ve<ze-Te&&(ze=fe.length-ve+Te);var He=ze-Te;return this===fe&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ve,Te,ze):Uint8Array.prototype.set.call(fe,this.subarray(Te,ze),ve),He},p.prototype.fill=function(fe,ve,Te,ze){if(typeof fe=="string"){if(typeof ve=="string"?(ze=ve,ve=0,Te=this.length):typeof Te=="string"&&(ze=Te,Te=this.length),ze!==void 0&&typeof ze!="string")throw new TypeError("encoding must be a string");if(typeof ze=="string"&&!p.isEncoding(ze))throw new TypeError("Unknown encoding: "+ze);if(fe.length===1){var He=fe.charCodeAt(0);(ze==="utf8"&&He<128||ze==="latin1")&&(fe=He)}}else typeof fe=="number"?fe&=255:typeof fe=="boolean"&&(fe=Number(fe));if(ve<0||this.length<ve||this.length<Te)throw new RangeError("Out of range index");if(Te<=ve)return this;var Ve;if(ve>>>=0,Te=Te===void 0?this.length:Te>>>0,fe||(fe=0),typeof fe=="number")for(Ve=ve;Ve<Te;++Ve)this[Ve]=fe;else{var nt=p.isBuffer(fe)?fe:p.from(fe,ze),tt=nt.length;if(tt===0)throw new TypeError('The value "'+fe+'" is invalid for argument "value"');for(Ve=0;Ve<Te-ve;++Ve)this[Ve+ve]=nt[Ve%tt]}return this};var le={};function de(fe,ve,Te){le[fe]=function(ze){(function(Tt,yt){if(typeof yt!="function"&&yt!==null)throw new TypeError("Super expression must either be null or a function");Tt.prototype=Object.create(yt&&yt.prototype,{constructor:{value:Tt,writable:!0,configurable:!0}}),Object.defineProperty(Tt,"prototype",{writable:!1}),yt&&n(Tt,yt)})(pt,ze);var He,Ve,nt,tt,ot=(nt=pt,tt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Tt,yt=u(nt);if(tt){var dt=u(this).constructor;Tt=Reflect.construct(yt,arguments,dt)}else Tt=yt.apply(this,arguments);return a(this,Tt)});function pt(){var Tt;return o(this,pt),Tt=ot.call(this),Object.defineProperty(i(Tt),"message",{value:ve.apply(i(Tt),arguments),writable:!0,configurable:!0}),Tt.name="".concat(Tt.name," [").concat(fe,"]"),Tt.stack,delete Tt.name,Tt}return He=pt,(Ve=[{key:"code",get:function(){return fe},set:function(Tt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Tt,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(fe,"]: ").concat(this.message)}}])&&r(He.prototype,Ve),Object.defineProperty(He,"prototype",{writable:!1}),pt}(Te)}function Ce(fe){for(var ve="",Te=fe.length,ze=fe[0]==="-"?1:0;Te>=ze+4;Te-=3)ve="_".concat(fe.slice(Te-3,Te)).concat(ve);return"".concat(fe.slice(0,Te)).concat(ve)}function xe(fe,ve,Te,ze,He,Ve){if(fe>Te||fe<ve){var nt,tt=typeof ve=="bigint"?"n":"";throw nt=Ve>3?ve===0||ve===BigInt(0)?">= 0".concat(tt," and < 2").concat(tt," ** ").concat(8*(Ve+1)).concat(tt):">= -(2".concat(tt," ** ").concat(8*(Ve+1)-1).concat(tt,") and < 2 ** ")+"".concat(8*(Ve+1)-1).concat(tt):">= ".concat(ve).concat(tt," and <= ").concat(Te).concat(tt),new le.ERR_OUT_OF_RANGE("value",nt,fe)}(function(ot,pt,Tt){_e(pt,"offset"),ot[pt]!==void 0&&ot[pt+Tt]!==void 0||we(pt,ot.length-(Tt+1))})(ze,He,Ve)}function _e(fe,ve){if(typeof fe!="number")throw new le.ERR_INVALID_ARG_TYPE(ve,"number",fe)}function we(fe,ve,Te){throw Math.floor(fe)!==fe?(_e(fe,Te),new le.ERR_OUT_OF_RANGE(Te||"offset","an integer",fe)):ve<0?new le.ERR_BUFFER_OUT_OF_BOUNDS:new le.ERR_OUT_OF_RANGE(Te||"offset",">= ".concat(Te?1:0," and <= ").concat(ve),fe)}de("ERR_BUFFER_OUT_OF_BOUNDS",function(fe){return fe?"".concat(fe," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),de("ERR_INVALID_ARG_TYPE",function(fe,ve){return'The "'.concat(fe,'" argument must be of type number. Received type ').concat(h(ve))},TypeError),de("ERR_OUT_OF_RANGE",function(fe,ve,Te){var ze='The value of "'.concat(fe,'" is out of range.'),He=Te;return Number.isInteger(Te)&&Math.abs(Te)>Math.pow(2,32)?He=Ce(String(Te)):typeof Te=="bigint"&&(He=String(Te),(Te>Math.pow(BigInt(2),BigInt(32))||Te<-Math.pow(BigInt(2),BigInt(32)))&&(He=Ce(He)),He+="n"),ze+" It must be ".concat(ve,". Received ").concat(He)},RangeError);var Ae=/[^+/0-9A-Za-z-_]/g;function $(fe,ve){var Te;ve=ve||1/0;for(var ze=fe.length,He=null,Ve=[],nt=0;nt<ze;++nt){if((Te=fe.charCodeAt(nt))>55295&&Te<57344){if(!He){if(Te>56319){(ve-=3)>-1&&Ve.push(239,191,189);continue}if(nt+1===ze){(ve-=3)>-1&&Ve.push(239,191,189);continue}He=Te;continue}if(Te<56320){(ve-=3)>-1&&Ve.push(239,191,189),He=Te;continue}Te=65536+(He-55296<<10|Te-56320)}else He&&(ve-=3)>-1&&Ve.push(239,191,189);if(He=null,Te<128){if((ve-=1)<0)break;Ve.push(Te)}else if(Te<2048){if((ve-=2)<0)break;Ve.push(Te>>6|192,63&Te|128)}else if(Te<65536){if((ve-=3)<0)break;Ve.push(Te>>12|224,Te>>6&63|128,63&Te|128)}else{if(!(Te<1114112))throw new Error("Invalid code point");if((ve-=4)<0)break;Ve.push(Te>>18|240,Te>>12&63|128,Te>>6&63|128,63&Te|128)}}return Ve}function oe(fe){return f.toByteArray(function(ve){if((ve=(ve=ve.split("=")[0]).trim().replace(Ae,"")).length<2)return"";for(;ve.length%4!=0;)ve+="=";return ve}(fe))}function pe(fe,ve,Te,ze){var He;for(He=0;He<ze&&!(He+Te>=ve.length||He>=fe.length);++He)ve[He+Te]=fe[He];return He}function ye(fe,ve){return fe instanceof ve||fe!=null&&fe.constructor!=null&&fe.constructor.name!=null&&fe.constructor.name===ve.name}function ke(fe){return fe!=fe}var De=function(){for(var fe="0123456789abcdef",ve=new Array(256),Te=0;Te<16;++Te)for(var ze=16*Te,He=0;He<16;++He)ve[ze+He]=fe[Te]+fe[He];return ve}();function Pe(fe){return typeof BigInt>"u"?Re:fe}function Re(){throw new Error("BigInt not supported")}},2321:function(d){d.exports=r,d.exports.isMobile=r,d.exports.default=r;var s=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/CrOS/,o=/android|ipad|playbook|silk/i;function r(n){n||(n={});var a=n.ua;if(a||typeof navigator>"u"||(a=navigator.userAgent),a&&a.headers&&typeof a.headers["user-agent"]=="string"&&(a=a.headers["user-agent"]),typeof a!="string")return!1;var i=s.test(a)&&!t.test(a)||!!n.tablet&&o.test(a);return!i&&n.tablet&&n.featureDetect&&navigator&&navigator.maxTouchPoints>1&&a.indexOf("Macintosh")!==-1&&a.indexOf("Safari")!==-1&&(i=!0),i}},3910:function(d,s){s.byteLength=function(f){var x=u(f),v=x[0],g=x[1];return 3*(v+g)/4-g},s.toByteArray=function(f){var x,v,g=u(f),y=g[0],p=g[1],m=new r(function(M,_,E){return 3*(_+E)/4-E}(0,y,p)),w=0,c=p>0?y-4:y;for(v=0;v<c;v+=4)x=o[f.charCodeAt(v)]<<18|o[f.charCodeAt(v+1)]<<12|o[f.charCodeAt(v+2)]<<6|o[f.charCodeAt(v+3)],m[w++]=x>>16&255,m[w++]=x>>8&255,m[w++]=255&x;return p===2&&(x=o[f.charCodeAt(v)]<<2|o[f.charCodeAt(v+1)]>>4,m[w++]=255&x),p===1&&(x=o[f.charCodeAt(v)]<<10|o[f.charCodeAt(v+1)]<<4|o[f.charCodeAt(v+2)]>>2,m[w++]=x>>8&255,m[w++]=255&x),m},s.fromByteArray=function(f){for(var x,v=f.length,g=v%3,y=[],p=16383,m=0,w=v-g;m<w;m+=p)y.push(h(f,m,m+p>w?w:m+p));return g===1?(x=f[v-1],y.push(t[x>>2]+t[x<<4&63]+"==")):g===2&&(x=(f[v-2]<<8)+f[v-1],y.push(t[x>>10]+t[x>>4&63]+t[x<<2&63]+"=")),y.join("")};for(var t=[],o=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,i=n.length;a<i;++a)t[a]=n[a],o[n.charCodeAt(a)]=a;function u(f){var x=f.length;if(x%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=f.indexOf("=");return v===-1&&(v=x),[v,v===x?0:4-v%4]}function h(f,x,v){for(var g,y,p=[],m=x;m<v;m+=3)g=(f[m]<<16&16711680)+(f[m+1]<<8&65280)+(255&f[m+2]),p.push(t[(y=g)>>18&63]+t[y>>12&63]+t[y>>6&63]+t[63&y]);return p.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},3187:function(d,s){s.read=function(t,o,r,n,a){var i,u,h=8*a-n-1,f=(1<<h)-1,x=f>>1,v=-7,g=r?a-1:0,y=r?-1:1,p=t[o+g];for(g+=y,i=p&(1<<-v)-1,p>>=-v,v+=h;v>0;i=256*i+t[o+g],g+=y,v-=8);for(u=i&(1<<-v)-1,i>>=-v,v+=n;v>0;u=256*u+t[o+g],g+=y,v-=8);if(i===0)i=1-x;else{if(i===f)return u?NaN:1/0*(p?-1:1);u+=Math.pow(2,n),i-=x}return(p?-1:1)*u*Math.pow(2,i-n)},s.write=function(t,o,r,n,a,i){var u,h,f,x=8*i-a-1,v=(1<<x)-1,g=v>>1,y=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,m=n?1:-1,w=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(h=isNaN(o)?1:0,u=v):(u=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-u))<1&&(u--,f*=2),(o+=u+g>=1?y/f:y*Math.pow(2,1-g))*f>=2&&(u++,f/=2),u+g>=v?(h=0,u=v):u+g>=1?(h=(o*f-1)*Math.pow(2,a),u+=g):(h=o*Math.pow(2,g-1)*Math.pow(2,a),u=0));a>=8;t[r+p]=255&h,p+=m,h/=256,a-=8);for(u=u<<a|h,x+=a;x>0;t[r+p]=255&u,p+=m,u/=256,x-=8);t[r+p-m]|=128*w}},1152:function(d,s,t){d.exports=function(u){var h=(u=u||{}).eye||[0,0,1],f=u.center||[0,0,0],x=u.up||[0,1,0],v=u.distanceLimits||[0,1/0],g=u.mode||"turntable",y=o(),p=r(),m=n();return y.setDistanceLimits(v[0],v[1]),y.lookAt(0,h,f,x),p.setDistanceLimits(v[0],v[1]),p.lookAt(0,h,f,x),m.setDistanceLimits(v[0],v[1]),m.lookAt(0,h,f,x),new a({turntable:y,orbit:p,matrix:m},g)};var o=t(3440),r=t(7774),n=t(9298);function a(u,h){this._controllerNames=Object.keys(u),this._controllerList=this._controllerNames.map(function(f){return u[f]}),this._mode=h,this._active=u[h],this._active||(this._mode="turntable",this._active=u.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var i=a.prototype;i.flush=function(u){for(var h=this._controllerList,f=0;f<h.length;++f)h[f].flush(u)},i.idle=function(u){for(var h=this._controllerList,f=0;f<h.length;++f)h[f].idle(u)},i.lookAt=function(u,h,f,x){for(var v=this._controllerList,g=0;g<v.length;++g)v[g].lookAt(u,h,f,x)},i.rotate=function(u,h,f,x){for(var v=this._controllerList,g=0;g<v.length;++g)v[g].rotate(u,h,f,x)},i.pan=function(u,h,f,x){for(var v=this._controllerList,g=0;g<v.length;++g)v[g].pan(u,h,f,x)},i.translate=function(u,h,f,x){for(var v=this._controllerList,g=0;g<v.length;++g)v[g].translate(u,h,f,x)},i.setMatrix=function(u,h){for(var f=this._controllerList,x=0;x<f.length;++x)f[x].setMatrix(u,h)},i.setDistanceLimits=function(u,h){for(var f=this._controllerList,x=0;x<f.length;++x)f[x].setDistanceLimits(u,h)},i.setDistance=function(u,h){for(var f=this._controllerList,x=0;x<f.length;++x)f[x].setDistance(u,h)},i.recalcMatrix=function(u){this._active.recalcMatrix(u)},i.getDistance=function(u){return this._active.getDistance(u)},i.getDistanceLimits=function(u){return this._active.getDistanceLimits(u)},i.lastT=function(){return this._active.lastT()},i.setMode=function(u){if(u!==this._mode){var h=this._controllerNames.indexOf(u);if(!(h<0)){var f=this._active,x=this._controllerList[h],v=Math.max(f.lastT(),x.lastT());f.recalcMatrix(v),x.setMatrix(v,f.computedMatrix),this._active=x,this._mode=u,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},i.getMode=function(){return this._mode}},8126:function(d,s,t){var o=typeof WeakMap>"u"?t(5346):WeakMap,r=t(5827),n=t(2944),a=new o;d.exports=function(i){var u=a.get(i),h=u&&(u._triangleBuffer.handle||u._triangleBuffer.buffer);if(!h||!i.isBuffer(h)){var f=r(i,new Float32Array([-1,-1,-1,4,4,-1]));(u=n(i,[{buffer:f,type:i.FLOAT,size:2}]))._triangleBuffer=f,a.set(i,u)}u.bind(),i.drawArrays(i.TRIANGLES,0,3),u.unbind()}},8008:function(d,s,t){var o=t(4930);d.exports=function(r,n,a){n=typeof n=="number"?n:1,a=a||": ";var i=r.split(/\r?\n/),u=String(i.length+n-1).length;return i.map(function(h,f){var x=f+n,v=String(x).length;return o(x,u-v)+a+h}).join(`
`)}},2153:function(d,s,t){d.exports=function(n){var a=n.length;if(a===0)return[];if(a===1)return[0];for(var i=n[0].length,u=[n[0]],h=[0],f=1;f<a;++f)if(u.push(n[f]),r(u,i)){if(h.push(f),h.length===i+1)return h}else u.pop();return h};var o=t(417);function r(n,a){for(var i=new Array(a+1),u=0;u<n.length;++u)i[u]=n[u];for(u=0;u<=n.length;++u){for(var h=n.length;h<=a;++h){for(var f=new Array(a),x=0;x<a;++x)f[x]=Math.pow(h+1-u,x);i[h]=f}if(o.apply(void 0,i))return!0}return!1}},4653:function(d,s,t){d.exports=function(n,a){return o(a).filter(function(i){for(var u=new Array(i.length),h=0;h<i.length;++h)u[h]=a[i[h]];return r(u)*n<1})};var o=t(4419),r=t(1778)},2350:function(d,s,t){d.exports=function(n,a){return r(o(n,a))};var o=t(4653),r=t(8691)},7896:function(d){d.exports=function(s){return atob(s)}},957:function(d,s,t){d.exports=function(n,a){for(var i=a.length,u=new Array(i+1),h=0;h<i;++h){for(var f=new Array(i+1),x=0;x<=i;++x)f[x]=n[x][h];u[h]=f}for(u[i]=new Array(i+1),h=0;h<=i;++h)u[i][h]=1;var v=new Array(i+1);for(h=0;h<i;++h)v[h]=a[h];v[i]=1;var g=o(u,v),y=r(g[i+1]);y===0&&(y=1);var p=new Array(i+1);for(h=0;h<=i;++h)p[h]=r(g[h])/y;return p};var o=t(6606);function r(n){for(var a=0,i=0;i<n.length;++i)a+=n[i];return a}},1539:function(d,s,t){var o=t(8524);d.exports=function(r,n){return o(r[0].mul(n[1]).add(n[0].mul(r[1])),r[1].mul(n[1]))}},8846:function(d){d.exports=function(s,t){return s[0].mul(t[1]).cmp(t[0].mul(s[1]))}},9189:function(d,s,t){var o=t(8524);d.exports=function(r,n){return o(r[0].mul(n[1]),r[1].mul(n[0]))}},5125:function(d,s,t){var o=t(234),r=t(3218),n=t(5514),a=t(2813),i=t(8524),u=t(9189);d.exports=function h(f,x){if(o(f))return x?u(f,h(x)):[f[0].clone(),f[1].clone()];var v,g,y=0;if(r(f))v=f.clone();else if(typeof f=="string")v=a(f);else{if(f===0)return[n(0),n(1)];if(f===Math.floor(f))v=n(f);else{for(;f!==Math.floor(f);)f*=Math.pow(2,256),y-=256;v=n(f)}}if(o(x))v.mul(x[1]),g=x[0].clone();else if(r(x))g=x.clone();else if(typeof x=="string")g=a(x);else if(x)if(x===Math.floor(x))g=n(x);else{for(;x!==Math.floor(x);)x*=Math.pow(2,256),y+=256;g=n(x)}else g=n(1);return y>0?v=v.ushln(y):y<0&&(g=g.ushln(-y)),i(v,g)}},234:function(d,s,t){var o=t(3218);d.exports=function(r){return Array.isArray(r)&&r.length===2&&o(r[0])&&o(r[1])}},4275:function(d,s,t){var o=t(1928);d.exports=function(r){return r.cmp(new o(0))}},9958:function(d,s,t){var o=t(4275);d.exports=function(r){var n=r.length,a=r.words,i=0;if(n===1)i=a[0];else if(n===2)i=a[0]+67108864*a[1];else for(var u=0;u<n;u++)i+=a[u]*Math.pow(67108864,u);return o(r)*i}},1112:function(d,s,t){var o=t(8362),r=t(2288).countTrailingZeros;d.exports=function(n){var a=r(o.lo(n));if(a<32)return a;var i=r(o.hi(n));return i>20?52:i+32}},3218:function(d,s,t){t(1928),d.exports=function(o){return o&&typeof o=="object"&&!!o.words}},5514:function(d,s,t){var o=t(1928),r=t(8362);d.exports=function(n){var a=r.exponent(n);return a<52?new o(n):new o(n*Math.pow(2,52-a)).ushln(a-52)}},8524:function(d,s,t){var o=t(5514),r=t(4275);d.exports=function(n,a){var i=r(n),u=r(a);if(i===0)return[o(0),o(1)];if(u===0)return[o(0),o(0)];u<0&&(n=n.neg(),a=a.neg());var h=n.gcd(a);return h.cmpn(1)?[n.div(h),a.div(h)]:[n,a]}},2813:function(d,s,t){var o=t(1928);d.exports=function(r){return new o(r)}},3962:function(d,s,t){var o=t(8524);d.exports=function(r,n){return o(r[0].mul(n[0]),r[1].mul(n[1]))}},4951:function(d,s,t){var o=t(4275);d.exports=function(r){return o(r[0])*o(r[1])}},4354:function(d,s,t){var o=t(8524);d.exports=function(r,n){return o(r[0].mul(n[1]).sub(r[1].mul(n[0])),r[1].mul(n[1]))}},7999:function(d,s,t){var o=t(9958),r=t(1112);d.exports=function(n){var a=n[0],i=n[1];if(a.cmpn(0)===0)return 0;var u=a.abs().divmod(i.abs()),h=u.div,f=o(h),x=u.mod,v=a.negative!==i.negative?-1:1;if(x.cmpn(0)===0)return v*f;if(f){var g=r(f)+4,y=o(x.ushln(g).divRound(i));return v*(f+y*Math.pow(2,-g))}var p=i.bitLength()-x.bitLength()+53;return y=o(x.ushln(p).divRound(i)),p<1023?v*y*Math.pow(2,-p):v*(y*=Math.pow(2,-1023))*Math.pow(2,1023-p)}},5070:function(d){function s(i,u,h,f,x){for(var v=x+1;f<=x;){var g=f+x>>>1,y=i[g];(h!==void 0?h(y,u):y-u)>=0?(v=g,x=g-1):f=g+1}return v}function t(i,u,h,f,x){for(var v=x+1;f<=x;){var g=f+x>>>1,y=i[g];(h!==void 0?h(y,u):y-u)>0?(v=g,x=g-1):f=g+1}return v}function o(i,u,h,f,x){for(var v=f-1;f<=x;){var g=f+x>>>1,y=i[g];(h!==void 0?h(y,u):y-u)<0?(v=g,f=g+1):x=g-1}return v}function r(i,u,h,f,x){for(var v=f-1;f<=x;){var g=f+x>>>1,y=i[g];(h!==void 0?h(y,u):y-u)<=0?(v=g,f=g+1):x=g-1}return v}function n(i,u,h,f,x){for(;f<=x;){var v=f+x>>>1,g=i[v],y=h!==void 0?h(g,u):g-u;if(y===0)return v;y<=0?f=v+1:x=v-1}return-1}function a(i,u,h,f,x,v){return typeof h=="function"?v(i,u,h,f===void 0?0:0|f,x===void 0?i.length-1:0|x):v(i,u,void 0,h===void 0?0:0|h,f===void 0?i.length-1:0|f)}d.exports={ge:function(i,u,h,f,x){return a(i,u,h,f,x,s)},gt:function(i,u,h,f,x){return a(i,u,h,f,x,t)},lt:function(i,u,h,f,x){return a(i,u,h,f,x,o)},le:function(i,u,h,f,x){return a(i,u,h,f,x,r)},eq:function(i,u,h,f,x){return a(i,u,h,f,x,n)}}},2288:function(d,s){function t(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(r){return(r>0)-(r<0)},s.abs=function(r){var n=r>>31;return(r^n)-n},s.min=function(r,n){return n^(r^n)&-(r<n)},s.max=function(r,n){return r^(r^n)&-(r<n)},s.isPow2=function(r){return!(r&r-1||!r)},s.log2=function(r){var n,a;return n=(r>65535)<<4,n|=a=((r>>>=n)>255)<<3,n|=a=((r>>>=a)>15)<<2,(n|=a=((r>>>=a)>3)<<1)|(r>>>=a)>>1},s.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},s.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},s.countTrailingZeros=t,s.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},s.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},s.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var o=new Array(256);(function(r){for(var n=0;n<256;++n){var a=n,i=n,u=7;for(a>>>=1;a;a>>>=1)i<<=1,i|=1&a,--u;r[n]=i<<u&255}})(o),s.reverse=function(r){return o[255&r]<<24|o[r>>>8&255]<<16|o[r>>>16&255]<<8|o[r>>>24&255]},s.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},s.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},s.interleave3=function(r,n,a){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},s.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},s.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>t(r)+1}},1928:function(d,s,t){(function(o,r){function n(R,V){if(!R)throw new Error(V||"Assertion failed")}function a(R,V){R.super_=V;var F=function(){};F.prototype=V.prototype,R.prototype=new F,R.prototype.constructor=R}function i(R,V,F){if(i.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,R!==null&&(V!=="le"&&V!=="be"||(F=V,V=10),this._init(R||0,V||10,F||"be"))}var u;typeof o=="object"?o.exports=i:r.BN=i,i.BN=i,i.wordSize=26;try{u=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t(6601).Buffer}catch{}function h(R,V){var F=R.charCodeAt(V);return F>=65&&F<=70?F-55:F>=97&&F<=102?F-87:F-48&15}function f(R,V,F){var D=h(R,F);return F-1>=V&&(D|=h(R,F-1)<<4),D}function x(R,V,F,D){for(var U=0,j=Math.min(R.length,F),J=V;J<j;J++){var X=R.charCodeAt(J)-48;U*=D,U+=X>=49?X-49+10:X>=17?X-17+10:X}return U}i.isBN=function(R){return R instanceof i||R!==null&&typeof R=="object"&&R.constructor.wordSize===i.wordSize&&Array.isArray(R.words)},i.max=function(R,V){return R.cmp(V)>0?R:V},i.min=function(R,V){return R.cmp(V)<0?R:V},i.prototype._init=function(R,V,F){if(typeof R=="number")return this._initNumber(R,V,F);if(typeof R=="object")return this._initArray(R,V,F);V==="hex"&&(V=16),n(V===(0|V)&&V>=2&&V<=36);var D=0;(R=R.toString().replace(/\s+/g,""))[0]==="-"&&(D++,this.negative=1),D<R.length&&(V===16?this._parseHex(R,D,F):(this._parseBase(R,V,D),F==="le"&&this._initArray(this.toArray(),V,F)))},i.prototype._initNumber=function(R,V,F){R<0&&(this.negative=1,R=-R),R<67108864?(this.words=[67108863&R],this.length=1):R<4503599627370496?(this.words=[67108863&R,R/67108864&67108863],this.length=2):(n(R<9007199254740992),this.words=[67108863&R,R/67108864&67108863,1],this.length=3),F==="le"&&this._initArray(this.toArray(),V,F)},i.prototype._initArray=function(R,V,F){if(n(typeof R.length=="number"),R.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(R.length/3),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var U,j,J=0;if(F==="be")for(D=R.length-1,U=0;D>=0;D-=3)j=R[D]|R[D-1]<<8|R[D-2]<<16,this.words[U]|=j<<J&67108863,this.words[U+1]=j>>>26-J&67108863,(J+=24)>=26&&(J-=26,U++);else if(F==="le")for(D=0,U=0;D<R.length;D+=3)j=R[D]|R[D+1]<<8|R[D+2]<<16,this.words[U]|=j<<J&67108863,this.words[U+1]=j>>>26-J&67108863,(J+=24)>=26&&(J-=26,U++);return this.strip()},i.prototype._parseHex=function(R,V,F){this.length=Math.ceil((R.length-V)/6),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var U,j=0,J=0;if(F==="be")for(D=R.length-1;D>=V;D-=2)U=f(R,V,D)<<j,this.words[J]|=67108863&U,j>=18?(j-=18,J+=1,this.words[J]|=U>>>26):j+=8;else for(D=(R.length-V)%2==0?V+1:V;D<R.length;D+=2)U=f(R,V,D)<<j,this.words[J]|=67108863&U,j>=18?(j-=18,J+=1,this.words[J]|=U>>>26):j+=8;this.strip()},i.prototype._parseBase=function(R,V,F){this.words=[0],this.length=1;for(var D=0,U=1;U<=67108863;U*=V)D++;D--,U=U/V|0;for(var j=R.length-F,J=j%D,X=Math.min(j,j-J)+F,Z=0,Y=F;Y<X;Y+=D)Z=x(R,Y,Y+D,V),this.imuln(U),this.words[0]+Z<67108864?this.words[0]+=Z:this._iaddn(Z);if(J!==0){var W=1;for(Z=x(R,Y,R.length,V),Y=0;Y<J;Y++)W*=V;this.imuln(W),this.words[0]+Z<67108864?this.words[0]+=Z:this._iaddn(Z)}this.strip()},i.prototype.copy=function(R){R.words=new Array(this.length);for(var V=0;V<this.length;V++)R.words[V]=this.words[V];R.length=this.length,R.negative=this.negative,R.red=this.red},i.prototype.clone=function(){var R=new i(null);return this.copy(R),R},i.prototype._expand=function(R){for(;this.length<R;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(R,V,F){F.negative=V.negative^R.negative;var D=R.length+V.length|0;F.length=D,D=D-1|0;var U=0|R.words[0],j=0|V.words[0],J=U*j,X=67108863&J,Z=J/67108864|0;F.words[0]=X;for(var Y=1;Y<D;Y++){for(var W=Z>>>26,Q=67108863&Z,ne=Math.min(Y,V.length-1),re=Math.max(0,Y-R.length+1);re<=ne;re++){var ie=Y-re|0;W+=(J=(U=0|R.words[ie])*(j=0|V.words[re])+Q)/67108864|0,Q=67108863&J}F.words[Y]=0|Q,Z=0|W}return Z!==0?F.words[Y]=0|Z:F.length--,F.strip()}i.prototype.toString=function(R,V){var F;if(V=0|V||1,(R=R||10)===16||R==="hex"){F="";for(var D=0,U=0,j=0;j<this.length;j++){var J=this.words[j],X=(16777215&(J<<D|U)).toString(16);F=(U=J>>>24-D&16777215)!=0||j!==this.length-1?v[6-X.length]+X+F:X+F,(D+=2)>=26&&(D-=26,j--)}for(U!==0&&(F=U.toString(16)+F);F.length%V!=0;)F="0"+F;return this.negative!==0&&(F="-"+F),F}if(R===(0|R)&&R>=2&&R<=36){var Z=g[R],Y=y[R];F="";var W=this.clone();for(W.negative=0;!W.isZero();){var Q=W.modn(Y).toString(R);F=(W=W.idivn(Y)).isZero()?Q+F:v[Z-Q.length]+Q+F}for(this.isZero()&&(F="0"+F);F.length%V!=0;)F="0"+F;return this.negative!==0&&(F="-"+F),F}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var R=this.words[0];return this.length===2?R+=67108864*this.words[1]:this.length===3&&this.words[2]===1?R+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-R:R},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(R,V){return n(u!==void 0),this.toArrayLike(u,R,V)},i.prototype.toArray=function(R,V){return this.toArrayLike(Array,R,V)},i.prototype.toArrayLike=function(R,V,F){var D=this.byteLength(),U=F||Math.max(1,D);n(D<=U,"byte array longer than desired length"),n(U>0,"Requested array length <= 0"),this.strip();var j,J,X=V==="le",Z=new R(U),Y=this.clone();if(X){for(J=0;!Y.isZero();J++)j=Y.andln(255),Y.iushrn(8),Z[J]=j;for(;J<U;J++)Z[J]=0}else{for(J=0;J<U-D;J++)Z[J]=0;for(J=0;!Y.isZero();J++)j=Y.andln(255),Y.iushrn(8),Z[U-J-1]=j}return Z},Math.clz32?i.prototype._countBits=function(R){return 32-Math.clz32(R)}:i.prototype._countBits=function(R){var V=R,F=0;return V>=4096&&(F+=13,V>>>=13),V>=64&&(F+=7,V>>>=7),V>=8&&(F+=4,V>>>=4),V>=2&&(F+=2,V>>>=2),F+V},i.prototype._zeroBits=function(R){if(R===0)return 26;var V=R,F=0;return!(8191&V)&&(F+=13,V>>>=13),!(127&V)&&(F+=7,V>>>=7),!(15&V)&&(F+=4,V>>>=4),!(3&V)&&(F+=2,V>>>=2),!(1&V)&&F++,F},i.prototype.bitLength=function(){var R=this.words[this.length-1],V=this._countBits(R);return 26*(this.length-1)+V},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var R=0,V=0;V<this.length;V++){var F=this._zeroBits(this.words[V]);if(R+=F,F!==26)break}return R},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(R){return this.negative!==0?this.abs().inotn(R).iaddn(1):this.clone()},i.prototype.fromTwos=function(R){return this.testn(R-1)?this.notn(R).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(R){for(;this.length<R.length;)this.words[this.length++]=0;for(var V=0;V<R.length;V++)this.words[V]=this.words[V]|R.words[V];return this.strip()},i.prototype.ior=function(R){return n((this.negative|R.negative)==0),this.iuor(R)},i.prototype.or=function(R){return this.length>R.length?this.clone().ior(R):R.clone().ior(this)},i.prototype.uor=function(R){return this.length>R.length?this.clone().iuor(R):R.clone().iuor(this)},i.prototype.iuand=function(R){var V;V=this.length>R.length?R:this;for(var F=0;F<V.length;F++)this.words[F]=this.words[F]&R.words[F];return this.length=V.length,this.strip()},i.prototype.iand=function(R){return n((this.negative|R.negative)==0),this.iuand(R)},i.prototype.and=function(R){return this.length>R.length?this.clone().iand(R):R.clone().iand(this)},i.prototype.uand=function(R){return this.length>R.length?this.clone().iuand(R):R.clone().iuand(this)},i.prototype.iuxor=function(R){var V,F;this.length>R.length?(V=this,F=R):(V=R,F=this);for(var D=0;D<F.length;D++)this.words[D]=V.words[D]^F.words[D];if(this!==V)for(;D<V.length;D++)this.words[D]=V.words[D];return this.length=V.length,this.strip()},i.prototype.ixor=function(R){return n((this.negative|R.negative)==0),this.iuxor(R)},i.prototype.xor=function(R){return this.length>R.length?this.clone().ixor(R):R.clone().ixor(this)},i.prototype.uxor=function(R){return this.length>R.length?this.clone().iuxor(R):R.clone().iuxor(this)},i.prototype.inotn=function(R){n(typeof R=="number"&&R>=0);var V=0|Math.ceil(R/26),F=R%26;this._expand(V),F>0&&V--;for(var D=0;D<V;D++)this.words[D]=67108863&~this.words[D];return F>0&&(this.words[D]=~this.words[D]&67108863>>26-F),this.strip()},i.prototype.notn=function(R){return this.clone().inotn(R)},i.prototype.setn=function(R,V){n(typeof R=="number"&&R>=0);var F=R/26|0,D=R%26;return this._expand(F+1),this.words[F]=V?this.words[F]|1<<D:this.words[F]&~(1<<D),this.strip()},i.prototype.iadd=function(R){var V,F,D;if(this.negative!==0&&R.negative===0)return this.negative=0,V=this.isub(R),this.negative^=1,this._normSign();if(this.negative===0&&R.negative!==0)return R.negative=0,V=this.isub(R),R.negative=1,V._normSign();this.length>R.length?(F=this,D=R):(F=R,D=this);for(var U=0,j=0;j<D.length;j++)V=(0|F.words[j])+(0|D.words[j])+U,this.words[j]=67108863&V,U=V>>>26;for(;U!==0&&j<F.length;j++)V=(0|F.words[j])+U,this.words[j]=67108863&V,U=V>>>26;if(this.length=F.length,U!==0)this.words[this.length]=U,this.length++;else if(F!==this)for(;j<F.length;j++)this.words[j]=F.words[j];return this},i.prototype.add=function(R){var V;return R.negative!==0&&this.negative===0?(R.negative=0,V=this.sub(R),R.negative^=1,V):R.negative===0&&this.negative!==0?(this.negative=0,V=R.sub(this),this.negative=1,V):this.length>R.length?this.clone().iadd(R):R.clone().iadd(this)},i.prototype.isub=function(R){if(R.negative!==0){R.negative=0;var V=this.iadd(R);return R.negative=1,V._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(R),this.negative=1,this._normSign();var F,D,U=this.cmp(R);if(U===0)return this.negative=0,this.length=1,this.words[0]=0,this;U>0?(F=this,D=R):(F=R,D=this);for(var j=0,J=0;J<D.length;J++)j=(V=(0|F.words[J])-(0|D.words[J])+j)>>26,this.words[J]=67108863&V;for(;j!==0&&J<F.length;J++)j=(V=(0|F.words[J])+j)>>26,this.words[J]=67108863&V;if(j===0&&J<F.length&&F!==this)for(;J<F.length;J++)this.words[J]=F.words[J];return this.length=Math.max(this.length,J),F!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(R){return this.clone().isub(R)};var m=function(R,V,F){var D,U,j,J=R.words,X=V.words,Z=F.words,Y=0,W=0|J[0],Q=8191&W,ne=W>>>13,re=0|J[1],ie=8191&re,se=re>>>13,ge=0|J[2],ue=8191&ge,ce=ge>>>13,le=0|J[3],de=8191&le,Ce=le>>>13,xe=0|J[4],_e=8191&xe,we=xe>>>13,Ae=0|J[5],$=8191&Ae,oe=Ae>>>13,pe=0|J[6],ye=8191&pe,ke=pe>>>13,De=0|J[7],Pe=8191&De,Re=De>>>13,fe=0|J[8],ve=8191&fe,Te=fe>>>13,ze=0|J[9],He=8191&ze,Ve=ze>>>13,nt=0|X[0],tt=8191&nt,ot=nt>>>13,pt=0|X[1],Tt=8191&pt,yt=pt>>>13,dt=0|X[2],Pt=8191&dt,Et=dt>>>13,Ot=0|X[3],Nt=8191&Ot,zt=Ot>>>13,Ze=0|X[4],Ye=8191&Ze,je=Ze>>>13,Ke=0|X[5],st=8191&Ke,Se=Ke>>>13,Ie=0|X[6],We=8191&Ie,it=Ie>>>13,lt=0|X[7],gt=8191&lt,At=lt>>>13,kt=0|X[8],ht=8191&kt,St=kt>>>13,vt=0|X[9],Mt=8191&vt,It=vt>>>13;F.negative=R.negative^V.negative,F.length=19;var Ut=(Y+(D=Math.imul(Q,tt))|0)+((8191&(U=(U=Math.imul(Q,ot))+Math.imul(ne,tt)|0))<<13)|0;Y=((j=Math.imul(ne,ot))+(U>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,D=Math.imul(ie,tt),U=(U=Math.imul(ie,ot))+Math.imul(se,tt)|0,j=Math.imul(se,ot);var jt=(Y+(D=D+Math.imul(Q,Tt)|0)|0)+((8191&(U=(U=U+Math.imul(Q,yt)|0)+Math.imul(ne,Tt)|0))<<13)|0;Y=((j=j+Math.imul(ne,yt)|0)+(U>>>13)|0)+(jt>>>26)|0,jt&=67108863,D=Math.imul(ue,tt),U=(U=Math.imul(ue,ot))+Math.imul(ce,tt)|0,j=Math.imul(ce,ot),D=D+Math.imul(ie,Tt)|0,U=(U=U+Math.imul(ie,yt)|0)+Math.imul(se,Tt)|0,j=j+Math.imul(se,yt)|0;var qt=(Y+(D=D+Math.imul(Q,Pt)|0)|0)+((8191&(U=(U=U+Math.imul(Q,Et)|0)+Math.imul(ne,Pt)|0))<<13)|0;Y=((j=j+Math.imul(ne,Et)|0)+(U>>>13)|0)+(qt>>>26)|0,qt&=67108863,D=Math.imul(de,tt),U=(U=Math.imul(de,ot))+Math.imul(Ce,tt)|0,j=Math.imul(Ce,ot),D=D+Math.imul(ue,Tt)|0,U=(U=U+Math.imul(ue,yt)|0)+Math.imul(ce,Tt)|0,j=j+Math.imul(ce,yt)|0,D=D+Math.imul(ie,Pt)|0,U=(U=U+Math.imul(ie,Et)|0)+Math.imul(se,Pt)|0,j=j+Math.imul(se,Et)|0;var Yt=(Y+(D=D+Math.imul(Q,Nt)|0)|0)+((8191&(U=(U=U+Math.imul(Q,zt)|0)+Math.imul(ne,Nt)|0))<<13)|0;Y=((j=j+Math.imul(ne,zt)|0)+(U>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,D=Math.imul(_e,tt),U=(U=Math.imul(_e,ot))+Math.imul(we,tt)|0,j=Math.imul(we,ot),D=D+Math.imul(de,Tt)|0,U=(U=U+Math.imul(de,yt)|0)+Math.imul(Ce,Tt)|0,j=j+Math.imul(Ce,yt)|0,D=D+Math.imul(ue,Pt)|0,U=(U=U+Math.imul(ue,Et)|0)+Math.imul(ce,Pt)|0,j=j+Math.imul(ce,Et)|0,D=D+Math.imul(ie,Nt)|0,U=(U=U+Math.imul(ie,zt)|0)+Math.imul(se,Nt)|0,j=j+Math.imul(se,zt)|0;var Kt=(Y+(D=D+Math.imul(Q,Ye)|0)|0)+((8191&(U=(U=U+Math.imul(Q,je)|0)+Math.imul(ne,Ye)|0))<<13)|0;Y=((j=j+Math.imul(ne,je)|0)+(U>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,D=Math.imul($,tt),U=(U=Math.imul($,ot))+Math.imul(oe,tt)|0,j=Math.imul(oe,ot),D=D+Math.imul(_e,Tt)|0,U=(U=U+Math.imul(_e,yt)|0)+Math.imul(we,Tt)|0,j=j+Math.imul(we,yt)|0,D=D+Math.imul(de,Pt)|0,U=(U=U+Math.imul(de,Et)|0)+Math.imul(Ce,Pt)|0,j=j+Math.imul(Ce,Et)|0,D=D+Math.imul(ue,Nt)|0,U=(U=U+Math.imul(ue,zt)|0)+Math.imul(ce,Nt)|0,j=j+Math.imul(ce,zt)|0,D=D+Math.imul(ie,Ye)|0,U=(U=U+Math.imul(ie,je)|0)+Math.imul(se,Ye)|0,j=j+Math.imul(se,je)|0;var pn=(Y+(D=D+Math.imul(Q,st)|0)|0)+((8191&(U=(U=U+Math.imul(Q,Se)|0)+Math.imul(ne,st)|0))<<13)|0;Y=((j=j+Math.imul(ne,Se)|0)+(U>>>13)|0)+(pn>>>26)|0,pn&=67108863,D=Math.imul(ye,tt),U=(U=Math.imul(ye,ot))+Math.imul(ke,tt)|0,j=Math.imul(ke,ot),D=D+Math.imul($,Tt)|0,U=(U=U+Math.imul($,yt)|0)+Math.imul(oe,Tt)|0,j=j+Math.imul(oe,yt)|0,D=D+Math.imul(_e,Pt)|0,U=(U=U+Math.imul(_e,Et)|0)+Math.imul(we,Pt)|0,j=j+Math.imul(we,Et)|0,D=D+Math.imul(de,Nt)|0,U=(U=U+Math.imul(de,zt)|0)+Math.imul(Ce,Nt)|0,j=j+Math.imul(Ce,zt)|0,D=D+Math.imul(ue,Ye)|0,U=(U=U+Math.imul(ue,je)|0)+Math.imul(ce,Ye)|0,j=j+Math.imul(ce,je)|0,D=D+Math.imul(ie,st)|0,U=(U=U+Math.imul(ie,Se)|0)+Math.imul(se,st)|0,j=j+Math.imul(se,Se)|0;var nn=(Y+(D=D+Math.imul(Q,We)|0)|0)+((8191&(U=(U=U+Math.imul(Q,it)|0)+Math.imul(ne,We)|0))<<13)|0;Y=((j=j+Math.imul(ne,it)|0)+(U>>>13)|0)+(nn>>>26)|0,nn&=67108863,D=Math.imul(Pe,tt),U=(U=Math.imul(Pe,ot))+Math.imul(Re,tt)|0,j=Math.imul(Re,ot),D=D+Math.imul(ye,Tt)|0,U=(U=U+Math.imul(ye,yt)|0)+Math.imul(ke,Tt)|0,j=j+Math.imul(ke,yt)|0,D=D+Math.imul($,Pt)|0,U=(U=U+Math.imul($,Et)|0)+Math.imul(oe,Pt)|0,j=j+Math.imul(oe,Et)|0,D=D+Math.imul(_e,Nt)|0,U=(U=U+Math.imul(_e,zt)|0)+Math.imul(we,Nt)|0,j=j+Math.imul(we,zt)|0,D=D+Math.imul(de,Ye)|0,U=(U=U+Math.imul(de,je)|0)+Math.imul(Ce,Ye)|0,j=j+Math.imul(Ce,je)|0,D=D+Math.imul(ue,st)|0,U=(U=U+Math.imul(ue,Se)|0)+Math.imul(ce,st)|0,j=j+Math.imul(ce,Se)|0,D=D+Math.imul(ie,We)|0,U=(U=U+Math.imul(ie,it)|0)+Math.imul(se,We)|0,j=j+Math.imul(se,it)|0;var xn=(Y+(D=D+Math.imul(Q,gt)|0)|0)+((8191&(U=(U=U+Math.imul(Q,At)|0)+Math.imul(ne,gt)|0))<<13)|0;Y=((j=j+Math.imul(ne,At)|0)+(U>>>13)|0)+(xn>>>26)|0,xn&=67108863,D=Math.imul(ve,tt),U=(U=Math.imul(ve,ot))+Math.imul(Te,tt)|0,j=Math.imul(Te,ot),D=D+Math.imul(Pe,Tt)|0,U=(U=U+Math.imul(Pe,yt)|0)+Math.imul(Re,Tt)|0,j=j+Math.imul(Re,yt)|0,D=D+Math.imul(ye,Pt)|0,U=(U=U+Math.imul(ye,Et)|0)+Math.imul(ke,Pt)|0,j=j+Math.imul(ke,Et)|0,D=D+Math.imul($,Nt)|0,U=(U=U+Math.imul($,zt)|0)+Math.imul(oe,Nt)|0,j=j+Math.imul(oe,zt)|0,D=D+Math.imul(_e,Ye)|0,U=(U=U+Math.imul(_e,je)|0)+Math.imul(we,Ye)|0,j=j+Math.imul(we,je)|0,D=D+Math.imul(de,st)|0,U=(U=U+Math.imul(de,Se)|0)+Math.imul(Ce,st)|0,j=j+Math.imul(Ce,Se)|0,D=D+Math.imul(ue,We)|0,U=(U=U+Math.imul(ue,it)|0)+Math.imul(ce,We)|0,j=j+Math.imul(ce,it)|0,D=D+Math.imul(ie,gt)|0,U=(U=U+Math.imul(ie,At)|0)+Math.imul(se,gt)|0,j=j+Math.imul(se,At)|0;var jn=(Y+(D=D+Math.imul(Q,ht)|0)|0)+((8191&(U=(U=U+Math.imul(Q,St)|0)+Math.imul(ne,ht)|0))<<13)|0;Y=((j=j+Math.imul(ne,St)|0)+(U>>>13)|0)+(jn>>>26)|0,jn&=67108863,D=Math.imul(He,tt),U=(U=Math.imul(He,ot))+Math.imul(Ve,tt)|0,j=Math.imul(Ve,ot),D=D+Math.imul(ve,Tt)|0,U=(U=U+Math.imul(ve,yt)|0)+Math.imul(Te,Tt)|0,j=j+Math.imul(Te,yt)|0,D=D+Math.imul(Pe,Pt)|0,U=(U=U+Math.imul(Pe,Et)|0)+Math.imul(Re,Pt)|0,j=j+Math.imul(Re,Et)|0,D=D+Math.imul(ye,Nt)|0,U=(U=U+Math.imul(ye,zt)|0)+Math.imul(ke,Nt)|0,j=j+Math.imul(ke,zt)|0,D=D+Math.imul($,Ye)|0,U=(U=U+Math.imul($,je)|0)+Math.imul(oe,Ye)|0,j=j+Math.imul(oe,je)|0,D=D+Math.imul(_e,st)|0,U=(U=U+Math.imul(_e,Se)|0)+Math.imul(we,st)|0,j=j+Math.imul(we,Se)|0,D=D+Math.imul(de,We)|0,U=(U=U+Math.imul(de,it)|0)+Math.imul(Ce,We)|0,j=j+Math.imul(Ce,it)|0,D=D+Math.imul(ue,gt)|0,U=(U=U+Math.imul(ue,At)|0)+Math.imul(ce,gt)|0,j=j+Math.imul(ce,At)|0,D=D+Math.imul(ie,ht)|0,U=(U=U+Math.imul(ie,St)|0)+Math.imul(se,ht)|0,j=j+Math.imul(se,St)|0;var mn=(Y+(D=D+Math.imul(Q,Mt)|0)|0)+((8191&(U=(U=U+Math.imul(Q,It)|0)+Math.imul(ne,Mt)|0))<<13)|0;Y=((j=j+Math.imul(ne,It)|0)+(U>>>13)|0)+(mn>>>26)|0,mn&=67108863,D=Math.imul(He,Tt),U=(U=Math.imul(He,yt))+Math.imul(Ve,Tt)|0,j=Math.imul(Ve,yt),D=D+Math.imul(ve,Pt)|0,U=(U=U+Math.imul(ve,Et)|0)+Math.imul(Te,Pt)|0,j=j+Math.imul(Te,Et)|0,D=D+Math.imul(Pe,Nt)|0,U=(U=U+Math.imul(Pe,zt)|0)+Math.imul(Re,Nt)|0,j=j+Math.imul(Re,zt)|0,D=D+Math.imul(ye,Ye)|0,U=(U=U+Math.imul(ye,je)|0)+Math.imul(ke,Ye)|0,j=j+Math.imul(ke,je)|0,D=D+Math.imul($,st)|0,U=(U=U+Math.imul($,Se)|0)+Math.imul(oe,st)|0,j=j+Math.imul(oe,Se)|0,D=D+Math.imul(_e,We)|0,U=(U=U+Math.imul(_e,it)|0)+Math.imul(we,We)|0,j=j+Math.imul(we,it)|0,D=D+Math.imul(de,gt)|0,U=(U=U+Math.imul(de,At)|0)+Math.imul(Ce,gt)|0,j=j+Math.imul(Ce,At)|0,D=D+Math.imul(ue,ht)|0,U=(U=U+Math.imul(ue,St)|0)+Math.imul(ce,ht)|0,j=j+Math.imul(ce,St)|0;var en=(Y+(D=D+Math.imul(ie,Mt)|0)|0)+((8191&(U=(U=U+Math.imul(ie,It)|0)+Math.imul(se,Mt)|0))<<13)|0;Y=((j=j+Math.imul(se,It)|0)+(U>>>13)|0)+(en>>>26)|0,en&=67108863,D=Math.imul(He,Pt),U=(U=Math.imul(He,Et))+Math.imul(Ve,Pt)|0,j=Math.imul(Ve,Et),D=D+Math.imul(ve,Nt)|0,U=(U=U+Math.imul(ve,zt)|0)+Math.imul(Te,Nt)|0,j=j+Math.imul(Te,zt)|0,D=D+Math.imul(Pe,Ye)|0,U=(U=U+Math.imul(Pe,je)|0)+Math.imul(Re,Ye)|0,j=j+Math.imul(Re,je)|0,D=D+Math.imul(ye,st)|0,U=(U=U+Math.imul(ye,Se)|0)+Math.imul(ke,st)|0,j=j+Math.imul(ke,Se)|0,D=D+Math.imul($,We)|0,U=(U=U+Math.imul($,it)|0)+Math.imul(oe,We)|0,j=j+Math.imul(oe,it)|0,D=D+Math.imul(_e,gt)|0,U=(U=U+Math.imul(_e,At)|0)+Math.imul(we,gt)|0,j=j+Math.imul(we,At)|0,D=D+Math.imul(de,ht)|0,U=(U=U+Math.imul(de,St)|0)+Math.imul(Ce,ht)|0,j=j+Math.imul(Ce,St)|0;var vn=(Y+(D=D+Math.imul(ue,Mt)|0)|0)+((8191&(U=(U=U+Math.imul(ue,It)|0)+Math.imul(ce,Mt)|0))<<13)|0;Y=((j=j+Math.imul(ce,It)|0)+(U>>>13)|0)+(vn>>>26)|0,vn&=67108863,D=Math.imul(He,Nt),U=(U=Math.imul(He,zt))+Math.imul(Ve,Nt)|0,j=Math.imul(Ve,zt),D=D+Math.imul(ve,Ye)|0,U=(U=U+Math.imul(ve,je)|0)+Math.imul(Te,Ye)|0,j=j+Math.imul(Te,je)|0,D=D+Math.imul(Pe,st)|0,U=(U=U+Math.imul(Pe,Se)|0)+Math.imul(Re,st)|0,j=j+Math.imul(Re,Se)|0,D=D+Math.imul(ye,We)|0,U=(U=U+Math.imul(ye,it)|0)+Math.imul(ke,We)|0,j=j+Math.imul(ke,it)|0,D=D+Math.imul($,gt)|0,U=(U=U+Math.imul($,At)|0)+Math.imul(oe,gt)|0,j=j+Math.imul(oe,At)|0,D=D+Math.imul(_e,ht)|0,U=(U=U+Math.imul(_e,St)|0)+Math.imul(we,ht)|0,j=j+Math.imul(we,St)|0;var on=(Y+(D=D+Math.imul(de,Mt)|0)|0)+((8191&(U=(U=U+Math.imul(de,It)|0)+Math.imul(Ce,Mt)|0))<<13)|0;Y=((j=j+Math.imul(Ce,It)|0)+(U>>>13)|0)+(on>>>26)|0,on&=67108863,D=Math.imul(He,Ye),U=(U=Math.imul(He,je))+Math.imul(Ve,Ye)|0,j=Math.imul(Ve,je),D=D+Math.imul(ve,st)|0,U=(U=U+Math.imul(ve,Se)|0)+Math.imul(Te,st)|0,j=j+Math.imul(Te,Se)|0,D=D+Math.imul(Pe,We)|0,U=(U=U+Math.imul(Pe,it)|0)+Math.imul(Re,We)|0,j=j+Math.imul(Re,it)|0,D=D+Math.imul(ye,gt)|0,U=(U=U+Math.imul(ye,At)|0)+Math.imul(ke,gt)|0,j=j+Math.imul(ke,At)|0,D=D+Math.imul($,ht)|0,U=(U=U+Math.imul($,St)|0)+Math.imul(oe,ht)|0,j=j+Math.imul(oe,St)|0;var sn=(Y+(D=D+Math.imul(_e,Mt)|0)|0)+((8191&(U=(U=U+Math.imul(_e,It)|0)+Math.imul(we,Mt)|0))<<13)|0;Y=((j=j+Math.imul(we,It)|0)+(U>>>13)|0)+(sn>>>26)|0,sn&=67108863,D=Math.imul(He,st),U=(U=Math.imul(He,Se))+Math.imul(Ve,st)|0,j=Math.imul(Ve,Se),D=D+Math.imul(ve,We)|0,U=(U=U+Math.imul(ve,it)|0)+Math.imul(Te,We)|0,j=j+Math.imul(Te,it)|0,D=D+Math.imul(Pe,gt)|0,U=(U=U+Math.imul(Pe,At)|0)+Math.imul(Re,gt)|0,j=j+Math.imul(Re,At)|0,D=D+Math.imul(ye,ht)|0,U=(U=U+Math.imul(ye,St)|0)+Math.imul(ke,ht)|0,j=j+Math.imul(ke,St)|0;var En=(Y+(D=D+Math.imul($,Mt)|0)|0)+((8191&(U=(U=U+Math.imul($,It)|0)+Math.imul(oe,Mt)|0))<<13)|0;Y=((j=j+Math.imul(oe,It)|0)+(U>>>13)|0)+(En>>>26)|0,En&=67108863,D=Math.imul(He,We),U=(U=Math.imul(He,it))+Math.imul(Ve,We)|0,j=Math.imul(Ve,it),D=D+Math.imul(ve,gt)|0,U=(U=U+Math.imul(ve,At)|0)+Math.imul(Te,gt)|0,j=j+Math.imul(Te,At)|0,D=D+Math.imul(Pe,ht)|0,U=(U=U+Math.imul(Pe,St)|0)+Math.imul(Re,ht)|0,j=j+Math.imul(Re,St)|0;var kn=(Y+(D=D+Math.imul(ye,Mt)|0)|0)+((8191&(U=(U=U+Math.imul(ye,It)|0)+Math.imul(ke,Mt)|0))<<13)|0;Y=((j=j+Math.imul(ke,It)|0)+(U>>>13)|0)+(kn>>>26)|0,kn&=67108863,D=Math.imul(He,gt),U=(U=Math.imul(He,At))+Math.imul(Ve,gt)|0,j=Math.imul(Ve,At),D=D+Math.imul(ve,ht)|0,U=(U=U+Math.imul(ve,St)|0)+Math.imul(Te,ht)|0,j=j+Math.imul(Te,St)|0;var zn=(Y+(D=D+Math.imul(Pe,Mt)|0)|0)+((8191&(U=(U=U+Math.imul(Pe,It)|0)+Math.imul(Re,Mt)|0))<<13)|0;Y=((j=j+Math.imul(Re,It)|0)+(U>>>13)|0)+(zn>>>26)|0,zn&=67108863,D=Math.imul(He,ht),U=(U=Math.imul(He,St))+Math.imul(Ve,ht)|0,j=Math.imul(Ve,St);var Fn=(Y+(D=D+Math.imul(ve,Mt)|0)|0)+((8191&(U=(U=U+Math.imul(ve,It)|0)+Math.imul(Te,Mt)|0))<<13)|0;Y=((j=j+Math.imul(Te,It)|0)+(U>>>13)|0)+(Fn>>>26)|0,Fn&=67108863;var Bn=(Y+(D=Math.imul(He,Mt))|0)+((8191&(U=(U=Math.imul(He,It))+Math.imul(Ve,Mt)|0))<<13)|0;return Y=((j=Math.imul(Ve,It))+(U>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,Z[0]=Ut,Z[1]=jt,Z[2]=qt,Z[3]=Yt,Z[4]=Kt,Z[5]=pn,Z[6]=nn,Z[7]=xn,Z[8]=jn,Z[9]=mn,Z[10]=en,Z[11]=vn,Z[12]=on,Z[13]=sn,Z[14]=En,Z[15]=kn,Z[16]=zn,Z[17]=Fn,Z[18]=Bn,Y!==0&&(Z[19]=Y,F.length++),F};function w(R,V,F){return new c().mulp(R,V,F)}function c(R,V){this.x=R,this.y=V}Math.imul||(m=p),i.prototype.mulTo=function(R,V){var F,D=this.length+R.length;return F=this.length===10&&R.length===10?m(this,R,V):D<63?p(this,R,V):D<1024?function(U,j,J){J.negative=j.negative^U.negative,J.length=U.length+j.length;for(var X=0,Z=0,Y=0;Y<J.length-1;Y++){var W=Z;Z=0;for(var Q=67108863&X,ne=Math.min(Y,j.length-1),re=Math.max(0,Y-U.length+1);re<=ne;re++){var ie=Y-re,se=(0|U.words[ie])*(0|j.words[re]),ge=67108863&se;Q=67108863&(ge=ge+Q|0),Z+=(W=(W=W+(se/67108864|0)|0)+(ge>>>26)|0)>>>26,W&=67108863}J.words[Y]=Q,X=W,W=Z}return X!==0?J.words[Y]=X:J.length--,J.strip()}(this,R,V):w(this,R,V),F},c.prototype.makeRBT=function(R){for(var V=new Array(R),F=i.prototype._countBits(R)-1,D=0;D<R;D++)V[D]=this.revBin(D,F,R);return V},c.prototype.revBin=function(R,V,F){if(R===0||R===F-1)return R;for(var D=0,U=0;U<V;U++)D|=(1&R)<<V-U-1,R>>=1;return D},c.prototype.permute=function(R,V,F,D,U,j){for(var J=0;J<j;J++)D[J]=V[R[J]],U[J]=F[R[J]]},c.prototype.transform=function(R,V,F,D,U,j){this.permute(j,R,V,F,D,U);for(var J=1;J<U;J<<=1)for(var X=J<<1,Z=Math.cos(2*Math.PI/X),Y=Math.sin(2*Math.PI/X),W=0;W<U;W+=X)for(var Q=Z,ne=Y,re=0;re<J;re++){var ie=F[W+re],se=D[W+re],ge=F[W+re+J],ue=D[W+re+J],ce=Q*ge-ne*ue;ue=Q*ue+ne*ge,ge=ce,F[W+re]=ie+ge,D[W+re]=se+ue,F[W+re+J]=ie-ge,D[W+re+J]=se-ue,re!==X&&(ce=Z*Q-Y*ne,ne=Z*ne+Y*Q,Q=ce)}},c.prototype.guessLen13b=function(R,V){var F=1|Math.max(V,R),D=1&F,U=0;for(F=F/2|0;F;F>>>=1)U++;return 1<<U+1+D},c.prototype.conjugate=function(R,V,F){if(!(F<=1))for(var D=0;D<F/2;D++){var U=R[D];R[D]=R[F-D-1],R[F-D-1]=U,U=V[D],V[D]=-V[F-D-1],V[F-D-1]=-U}},c.prototype.normalize13b=function(R,V){for(var F=0,D=0;D<V/2;D++){var U=8192*Math.round(R[2*D+1]/V)+Math.round(R[2*D]/V)+F;R[D]=67108863&U,F=U<67108864?0:U/67108864|0}return R},c.prototype.convert13b=function(R,V,F,D){for(var U=0,j=0;j<V;j++)U+=0|R[j],F[2*j]=8191&U,U>>>=13,F[2*j+1]=8191&U,U>>>=13;for(j=2*V;j<D;++j)F[j]=0;n(U===0),n((-8192&U)==0)},c.prototype.stub=function(R){for(var V=new Array(R),F=0;F<R;F++)V[F]=0;return V},c.prototype.mulp=function(R,V,F){var D=2*this.guessLen13b(R.length,V.length),U=this.makeRBT(D),j=this.stub(D),J=new Array(D),X=new Array(D),Z=new Array(D),Y=new Array(D),W=new Array(D),Q=new Array(D),ne=F.words;ne.length=D,this.convert13b(R.words,R.length,J,D),this.convert13b(V.words,V.length,Y,D),this.transform(J,j,X,Z,D,U),this.transform(Y,j,W,Q,D,U);for(var re=0;re<D;re++){var ie=X[re]*W[re]-Z[re]*Q[re];Z[re]=X[re]*Q[re]+Z[re]*W[re],X[re]=ie}return this.conjugate(X,Z,D),this.transform(X,Z,ne,j,D,U),this.conjugate(ne,j,D),this.normalize13b(ne,D),F.negative=R.negative^V.negative,F.length=R.length+V.length,F.strip()},i.prototype.mul=function(R){var V=new i(null);return V.words=new Array(this.length+R.length),this.mulTo(R,V)},i.prototype.mulf=function(R){var V=new i(null);return V.words=new Array(this.length+R.length),w(this,R,V)},i.prototype.imul=function(R){return this.clone().mulTo(R,this)},i.prototype.imuln=function(R){n(typeof R=="number"),n(R<67108864);for(var V=0,F=0;F<this.length;F++){var D=(0|this.words[F])*R,U=(67108863&D)+(67108863&V);V>>=26,V+=D/67108864|0,V+=U>>>26,this.words[F]=67108863&U}return V!==0&&(this.words[F]=V,this.length++),this},i.prototype.muln=function(R){return this.clone().imuln(R)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(R){var V=function(j){for(var J=new Array(j.bitLength()),X=0;X<J.length;X++){var Z=X/26|0,Y=X%26;J[X]=(j.words[Z]&1<<Y)>>>Y}return J}(R);if(V.length===0)return new i(1);for(var F=this,D=0;D<V.length&&V[D]===0;D++,F=F.sqr());if(++D<V.length)for(var U=F.sqr();D<V.length;D++,U=U.sqr())V[D]!==0&&(F=F.mul(U));return F},i.prototype.iushln=function(R){n(typeof R=="number"&&R>=0);var V,F=R%26,D=(R-F)/26,U=67108863>>>26-F<<26-F;if(F!==0){var j=0;for(V=0;V<this.length;V++){var J=this.words[V]&U,X=(0|this.words[V])-J<<F;this.words[V]=X|j,j=J>>>26-F}j&&(this.words[V]=j,this.length++)}if(D!==0){for(V=this.length-1;V>=0;V--)this.words[V+D]=this.words[V];for(V=0;V<D;V++)this.words[V]=0;this.length+=D}return this.strip()},i.prototype.ishln=function(R){return n(this.negative===0),this.iushln(R)},i.prototype.iushrn=function(R,V,F){var D;n(typeof R=="number"&&R>=0),D=V?(V-V%26)/26:0;var U=R%26,j=Math.min((R-U)/26,this.length),J=67108863^67108863>>>U<<U,X=F;if(D-=j,D=Math.max(0,D),X){for(var Z=0;Z<j;Z++)X.words[Z]=this.words[Z];X.length=j}if(j!==0)if(this.length>j)for(this.length-=j,Z=0;Z<this.length;Z++)this.words[Z]=this.words[Z+j];else this.words[0]=0,this.length=1;var Y=0;for(Z=this.length-1;Z>=0&&(Y!==0||Z>=D);Z--){var W=0|this.words[Z];this.words[Z]=Y<<26-U|W>>>U,Y=W&J}return X&&Y!==0&&(X.words[X.length++]=Y),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(R,V,F){return n(this.negative===0),this.iushrn(R,V,F)},i.prototype.shln=function(R){return this.clone().ishln(R)},i.prototype.ushln=function(R){return this.clone().iushln(R)},i.prototype.shrn=function(R){return this.clone().ishrn(R)},i.prototype.ushrn=function(R){return this.clone().iushrn(R)},i.prototype.testn=function(R){n(typeof R=="number"&&R>=0);var V=R%26,F=(R-V)/26,D=1<<V;return!(this.length<=F||!(this.words[F]&D))},i.prototype.imaskn=function(R){n(typeof R=="number"&&R>=0);var V=R%26,F=(R-V)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=F)return this;if(V!==0&&F++,this.length=Math.min(F,this.length),V!==0){var D=67108863^67108863>>>V<<V;this.words[this.length-1]&=D}return this.strip()},i.prototype.maskn=function(R){return this.clone().imaskn(R)},i.prototype.iaddn=function(R){return n(typeof R=="number"),n(R<67108864),R<0?this.isubn(-R):this.negative!==0?this.length===1&&(0|this.words[0])<R?(this.words[0]=R-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(R),this.negative=1,this):this._iaddn(R)},i.prototype._iaddn=function(R){this.words[0]+=R;for(var V=0;V<this.length&&this.words[V]>=67108864;V++)this.words[V]-=67108864,V===this.length-1?this.words[V+1]=1:this.words[V+1]++;return this.length=Math.max(this.length,V+1),this},i.prototype.isubn=function(R){if(n(typeof R=="number"),n(R<67108864),R<0)return this.iaddn(-R);if(this.negative!==0)return this.negative=0,this.iaddn(R),this.negative=1,this;if(this.words[0]-=R,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var V=0;V<this.length&&this.words[V]<0;V++)this.words[V]+=67108864,this.words[V+1]-=1;return this.strip()},i.prototype.addn=function(R){return this.clone().iaddn(R)},i.prototype.subn=function(R){return this.clone().isubn(R)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(R,V,F){var D,U,j=R.length+F;this._expand(j);var J=0;for(D=0;D<R.length;D++){U=(0|this.words[D+F])+J;var X=(0|R.words[D])*V;J=((U-=67108863&X)>>26)-(X/67108864|0),this.words[D+F]=67108863&U}for(;D<this.length-F;D++)J=(U=(0|this.words[D+F])+J)>>26,this.words[D+F]=67108863&U;if(J===0)return this.strip();for(n(J===-1),J=0,D=0;D<this.length;D++)J=(U=-(0|this.words[D])+J)>>26,this.words[D]=67108863&U;return this.negative=1,this.strip()},i.prototype._wordDiv=function(R,V){var F=(this.length,R.length),D=this.clone(),U=R,j=0|U.words[U.length-1];(F=26-this._countBits(j))!=0&&(U=U.ushln(F),D.iushln(F),j=0|U.words[U.length-1]);var J,X=D.length-U.length;if(V!=="mod"){(J=new i(null)).length=X+1,J.words=new Array(J.length);for(var Z=0;Z<J.length;Z++)J.words[Z]=0}var Y=D.clone()._ishlnsubmul(U,1,X);Y.negative===0&&(D=Y,J&&(J.words[X]=1));for(var W=X-1;W>=0;W--){var Q=67108864*(0|D.words[U.length+W])+(0|D.words[U.length+W-1]);for(Q=Math.min(Q/j|0,67108863),D._ishlnsubmul(U,Q,W);D.negative!==0;)Q--,D.negative=0,D._ishlnsubmul(U,1,W),D.isZero()||(D.negative^=1);J&&(J.words[W]=Q)}return J&&J.strip(),D.strip(),V!=="div"&&F!==0&&D.iushrn(F),{div:J||null,mod:D}},i.prototype.divmod=function(R,V,F){return n(!R.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:this.negative!==0&&R.negative===0?(j=this.neg().divmod(R,V),V!=="mod"&&(D=j.div.neg()),V!=="div"&&(U=j.mod.neg(),F&&U.negative!==0&&U.iadd(R)),{div:D,mod:U}):this.negative===0&&R.negative!==0?(j=this.divmod(R.neg(),V),V!=="mod"&&(D=j.div.neg()),{div:D,mod:j.mod}):this.negative&R.negative?(j=this.neg().divmod(R.neg(),V),V!=="div"&&(U=j.mod.neg(),F&&U.negative!==0&&U.isub(R)),{div:j.div,mod:U}):R.length>this.length||this.cmp(R)<0?{div:new i(0),mod:this}:R.length===1?V==="div"?{div:this.divn(R.words[0]),mod:null}:V==="mod"?{div:null,mod:new i(this.modn(R.words[0]))}:{div:this.divn(R.words[0]),mod:new i(this.modn(R.words[0]))}:this._wordDiv(R,V);var D,U,j},i.prototype.div=function(R){return this.divmod(R,"div",!1).div},i.prototype.mod=function(R){return this.divmod(R,"mod",!1).mod},i.prototype.umod=function(R){return this.divmod(R,"mod",!0).mod},i.prototype.divRound=function(R){var V=this.divmod(R);if(V.mod.isZero())return V.div;var F=V.div.negative!==0?V.mod.isub(R):V.mod,D=R.ushrn(1),U=R.andln(1),j=F.cmp(D);return j<0||U===1&&j===0?V.div:V.div.negative!==0?V.div.isubn(1):V.div.iaddn(1)},i.prototype.modn=function(R){n(R<=67108863);for(var V=67108864%R,F=0,D=this.length-1;D>=0;D--)F=(V*F+(0|this.words[D]))%R;return F},i.prototype.idivn=function(R){n(R<=67108863);for(var V=0,F=this.length-1;F>=0;F--){var D=(0|this.words[F])+67108864*V;this.words[F]=D/R|0,V=D%R}return this.strip()},i.prototype.divn=function(R){return this.clone().idivn(R)},i.prototype.egcd=function(R){n(R.negative===0),n(!R.isZero());var V=this,F=R.clone();V=V.negative!==0?V.umod(R):V.clone();for(var D=new i(1),U=new i(0),j=new i(0),J=new i(1),X=0;V.isEven()&&F.isEven();)V.iushrn(1),F.iushrn(1),++X;for(var Z=F.clone(),Y=V.clone();!V.isZero();){for(var W=0,Q=1;!(V.words[0]&Q)&&W<26;++W,Q<<=1);if(W>0)for(V.iushrn(W);W-- >0;)(D.isOdd()||U.isOdd())&&(D.iadd(Z),U.isub(Y)),D.iushrn(1),U.iushrn(1);for(var ne=0,re=1;!(F.words[0]&re)&&ne<26;++ne,re<<=1);if(ne>0)for(F.iushrn(ne);ne-- >0;)(j.isOdd()||J.isOdd())&&(j.iadd(Z),J.isub(Y)),j.iushrn(1),J.iushrn(1);V.cmp(F)>=0?(V.isub(F),D.isub(j),U.isub(J)):(F.isub(V),j.isub(D),J.isub(U))}return{a:j,b:J,gcd:F.iushln(X)}},i.prototype._invmp=function(R){n(R.negative===0),n(!R.isZero());var V=this,F=R.clone();V=V.negative!==0?V.umod(R):V.clone();for(var D,U=new i(1),j=new i(0),J=F.clone();V.cmpn(1)>0&&F.cmpn(1)>0;){for(var X=0,Z=1;!(V.words[0]&Z)&&X<26;++X,Z<<=1);if(X>0)for(V.iushrn(X);X-- >0;)U.isOdd()&&U.iadd(J),U.iushrn(1);for(var Y=0,W=1;!(F.words[0]&W)&&Y<26;++Y,W<<=1);if(Y>0)for(F.iushrn(Y);Y-- >0;)j.isOdd()&&j.iadd(J),j.iushrn(1);V.cmp(F)>=0?(V.isub(F),U.isub(j)):(F.isub(V),j.isub(U))}return(D=V.cmpn(1)===0?U:j).cmpn(0)<0&&D.iadd(R),D},i.prototype.gcd=function(R){if(this.isZero())return R.abs();if(R.isZero())return this.abs();var V=this.clone(),F=R.clone();V.negative=0,F.negative=0;for(var D=0;V.isEven()&&F.isEven();D++)V.iushrn(1),F.iushrn(1);for(;;){for(;V.isEven();)V.iushrn(1);for(;F.isEven();)F.iushrn(1);var U=V.cmp(F);if(U<0){var j=V;V=F,F=j}else if(U===0||F.cmpn(1)===0)break;V.isub(F)}return F.iushln(D)},i.prototype.invm=function(R){return this.egcd(R).a.umod(R)},i.prototype.isEven=function(){return(1&this.words[0])==0},i.prototype.isOdd=function(){return(1&this.words[0])==1},i.prototype.andln=function(R){return this.words[0]&R},i.prototype.bincn=function(R){n(typeof R=="number");var V=R%26,F=(R-V)/26,D=1<<V;if(this.length<=F)return this._expand(F+1),this.words[F]|=D,this;for(var U=D,j=F;U!==0&&j<this.length;j++){var J=0|this.words[j];U=(J+=U)>>>26,J&=67108863,this.words[j]=J}return U!==0&&(this.words[j]=U,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(R){var V,F=R<0;if(this.negative!==0&&!F)return-1;if(this.negative===0&&F)return 1;if(this.strip(),this.length>1)V=1;else{F&&(R=-R),n(R<=67108863,"Number is too big");var D=0|this.words[0];V=D===R?0:D<R?-1:1}return this.negative!==0?0|-V:V},i.prototype.cmp=function(R){if(this.negative!==0&&R.negative===0)return-1;if(this.negative===0&&R.negative!==0)return 1;var V=this.ucmp(R);return this.negative!==0?0|-V:V},i.prototype.ucmp=function(R){if(this.length>R.length)return 1;if(this.length<R.length)return-1;for(var V=0,F=this.length-1;F>=0;F--){var D=0|this.words[F],U=0|R.words[F];if(D!==U){D<U?V=-1:D>U&&(V=1);break}}return V},i.prototype.gtn=function(R){return this.cmpn(R)===1},i.prototype.gt=function(R){return this.cmp(R)===1},i.prototype.gten=function(R){return this.cmpn(R)>=0},i.prototype.gte=function(R){return this.cmp(R)>=0},i.prototype.ltn=function(R){return this.cmpn(R)===-1},i.prototype.lt=function(R){return this.cmp(R)===-1},i.prototype.lten=function(R){return this.cmpn(R)<=0},i.prototype.lte=function(R){return this.cmp(R)<=0},i.prototype.eqn=function(R){return this.cmpn(R)===0},i.prototype.eq=function(R){return this.cmp(R)===0},i.red=function(R){return new I(R)},i.prototype.toRed=function(R){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),R.convertTo(this)._forceRed(R)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(R){return this.red=R,this},i.prototype.forceRed=function(R){return n(!this.red,"Already a number in reduction context"),this._forceRed(R)},i.prototype.redAdd=function(R){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,R)},i.prototype.redIAdd=function(R){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,R)},i.prototype.redSub=function(R){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,R)},i.prototype.redISub=function(R){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,R)},i.prototype.redShl=function(R){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,R)},i.prototype.redMul=function(R){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.mul(this,R)},i.prototype.redIMul=function(R){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.imul(this,R)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(R){return n(this.red&&!R.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,R)};var M={k256:null,p224:null,p192:null,p25519:null};function _(R,V){this.name=R,this.p=new i(V,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function L(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function C(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function O(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(R){if(typeof R=="string"){var V=i._prime(R);this.m=V.p,this.prime=V}else n(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}function N(R){I.call(this,R),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var R=new i(null);return R.words=new Array(Math.ceil(this.n/13)),R},_.prototype.ireduce=function(R){var V,F=R;do this.split(F,this.tmp),V=(F=(F=this.imulK(F)).iadd(this.tmp)).bitLength();while(V>this.n);var D=V<this.n?-1:F.ucmp(this.p);return D===0?(F.words[0]=0,F.length=1):D>0?F.isub(this.p):F.strip!==void 0?F.strip():F._strip(),F},_.prototype.split=function(R,V){R.iushrn(this.n,0,V)},_.prototype.imulK=function(R){return R.imul(this.k)},a(E,_),E.prototype.split=function(R,V){for(var F=4194303,D=Math.min(R.length,9),U=0;U<D;U++)V.words[U]=R.words[U];if(V.length=D,R.length<=9)return R.words[0]=0,void(R.length=1);var j=R.words[9];for(V.words[V.length++]=j&F,U=10;U<R.length;U++){var J=0|R.words[U];R.words[U-10]=(J&F)<<4|j>>>22,j=J}j>>>=22,R.words[U-10]=j,j===0&&R.length>10?R.length-=10:R.length-=9},E.prototype.imulK=function(R){R.words[R.length]=0,R.words[R.length+1]=0,R.length+=2;for(var V=0,F=0;F<R.length;F++){var D=0|R.words[F];V+=977*D,R.words[F]=67108863&V,V=64*D+(V/67108864|0)}return R.words[R.length-1]===0&&(R.length--,R.words[R.length-1]===0&&R.length--),R},a(L,_),a(C,_),a(O,_),O.prototype.imulK=function(R){for(var V=0,F=0;F<R.length;F++){var D=19*(0|R.words[F])+V,U=67108863&D;D>>>=26,R.words[F]=U,V=D}return V!==0&&(R.words[R.length++]=V),R},i._prime=function(R){if(M[R])return M[R];var V;if(R==="k256")V=new E;else if(R==="p224")V=new L;else if(R==="p192")V=new C;else{if(R!=="p25519")throw new Error("Unknown prime "+R);V=new O}return M[R]=V,V},I.prototype._verify1=function(R){n(R.negative===0,"red works only with positives"),n(R.red,"red works only with red numbers")},I.prototype._verify2=function(R,V){n((R.negative|V.negative)==0,"red works only with positives"),n(R.red&&R.red===V.red,"red works only with red numbers")},I.prototype.imod=function(R){return this.prime?this.prime.ireduce(R)._forceRed(this):R.umod(this.m)._forceRed(this)},I.prototype.neg=function(R){return R.isZero()?R.clone():this.m.sub(R)._forceRed(this)},I.prototype.add=function(R,V){this._verify2(R,V);var F=R.add(V);return F.cmp(this.m)>=0&&F.isub(this.m),F._forceRed(this)},I.prototype.iadd=function(R,V){this._verify2(R,V);var F=R.iadd(V);return F.cmp(this.m)>=0&&F.isub(this.m),F},I.prototype.sub=function(R,V){this._verify2(R,V);var F=R.sub(V);return F.cmpn(0)<0&&F.iadd(this.m),F._forceRed(this)},I.prototype.isub=function(R,V){this._verify2(R,V);var F=R.isub(V);return F.cmpn(0)<0&&F.iadd(this.m),F},I.prototype.shl=function(R,V){return this._verify1(R),this.imod(R.ushln(V))},I.prototype.imul=function(R,V){return this._verify2(R,V),this.imod(R.imul(V))},I.prototype.mul=function(R,V){return this._verify2(R,V),this.imod(R.mul(V))},I.prototype.isqr=function(R){return this.imul(R,R.clone())},I.prototype.sqr=function(R){return this.mul(R,R)},I.prototype.sqrt=function(R){if(R.isZero())return R.clone();var V=this.m.andln(3);if(n(V%2==1),V===3){var F=this.m.add(new i(1)).iushrn(2);return this.pow(R,F)}for(var D=this.m.subn(1),U=0;!D.isZero()&&D.andln(1)===0;)U++,D.iushrn(1);n(!D.isZero());var j=new i(1).toRed(this),J=j.redNeg(),X=this.m.subn(1).iushrn(1),Z=this.m.bitLength();for(Z=new i(2*Z*Z).toRed(this);this.pow(Z,X).cmp(J)!==0;)Z.redIAdd(J);for(var Y=this.pow(Z,D),W=this.pow(R,D.addn(1).iushrn(1)),Q=this.pow(R,D),ne=U;Q.cmp(j)!==0;){for(var re=Q,ie=0;re.cmp(j)!==0;ie++)re=re.redSqr();n(ie<ne);var se=this.pow(Y,new i(1).iushln(ne-ie-1));W=W.redMul(se),Y=se.redSqr(),Q=Q.redMul(Y),ne=ie}return W},I.prototype.invm=function(R){var V=R._invmp(this.m);return V.negative!==0?(V.negative=0,this.imod(V).redNeg()):this.imod(V)},I.prototype.pow=function(R,V){if(V.isZero())return new i(1).toRed(this);if(V.cmpn(1)===0)return R.clone();var F=new Array(16);F[0]=new i(1).toRed(this),F[1]=R;for(var D=2;D<F.length;D++)F[D]=this.mul(F[D-1],R);var U=F[0],j=0,J=0,X=V.bitLength()%26;for(X===0&&(X=26),D=V.length-1;D>=0;D--){for(var Z=V.words[D],Y=X-1;Y>=0;Y--){var W=Z>>Y&1;U!==F[0]&&(U=this.sqr(U)),W!==0||j!==0?(j<<=1,j|=W,(++J==4||D===0&&Y===0)&&(U=this.mul(U,F[j]),J=0,j=0)):J=0}X=26}return U},I.prototype.convertTo=function(R){var V=R.umod(this.m);return V===R?V.clone():V},I.prototype.convertFrom=function(R){var V=R.clone();return V.red=null,V},i.mont=function(R){return new N(R)},a(N,I),N.prototype.convertTo=function(R){return this.imod(R.ushln(this.shift))},N.prototype.convertFrom=function(R){var V=this.imod(R.mul(this.rinv));return V.red=null,V},N.prototype.imul=function(R,V){if(R.isZero()||V.isZero())return R.words[0]=0,R.length=1,R;var F=R.imul(V),D=F.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),U=F.isub(D).iushrn(this.shift),j=U;return U.cmp(this.m)>=0?j=U.isub(this.m):U.cmpn(0)<0&&(j=U.iadd(this.m)),j._forceRed(this)},N.prototype.mul=function(R,V){if(R.isZero()||V.isZero())return new i(0)._forceRed(this);var F=R.mul(V),D=F.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),U=F.isub(D).iushrn(this.shift),j=U;return U.cmp(this.m)>=0?j=U.isub(this.m):U.cmpn(0)<0&&(j=U.iadd(this.m)),j._forceRed(this)},N.prototype.invm=function(R){return this.imod(R._invmp(this.m).mul(this.r2))._forceRed(this)}})(d=t.nmd(d),this)},2692:function(d){d.exports=function(s){var t,o,r,n=s.length,a=0;for(t=0;t<n;++t)a+=s[t].length;var i=new Array(a),u=0;for(t=0;t<n;++t){var h=s[t],f=h.length;for(o=0;o<f;++o){var x=i[u++]=new Array(f-1),v=0;for(r=0;r<f;++r)r!==o&&(x[v++]=h[r]);if(1&o){var g=x[1];x[1]=x[0],x[0]=g}}}return i}},2569:function(d,s,t){d.exports=function(g,y,p){switch(arguments.length){case 1:return x(g);case 2:return typeof y=="function"?h(g,g,y,!0):v(g,y);case 3:return h(g,y,p,!1);default:throw new Error("box-intersect: Invalid arguments")}};var o,r=t(5306),n=t(1390),a=t(2337);function i(g,y){for(var p=0;p<g;++p)if(!(y[p]<=y[p+g]))return!0;return!1}function u(g,y,p,m){for(var w=0,c=0,M=0,_=g.length;M<_;++M){var E=g[M];if(!i(y,E)){for(var L=0;L<2*y;++L)p[w++]=E[L];m[c++]=M}}return c}function h(g,y,p,m){var w=g.length,c=y.length;if(!(w<=0||c<=0)){var M=g[0].length>>>1;if(!(M<=0)){var _,E=r.mallocDouble(2*M*w),L=r.mallocInt32(w);if((w=u(g,M,E,L))>0){if(M===1&&m)n.init(w),_=n.sweepComplete(M,p,0,w,E,L,0,w,E,L);else{var C=r.mallocDouble(2*M*c),O=r.mallocInt32(c);(c=u(y,M,C,O))>0&&(n.init(w+c),_=M===1?n.sweepBipartite(M,p,0,w,E,L,0,c,C,O):a(M,p,m,w,E,L,c,C,O),r.free(C),r.free(O))}r.free(E),r.free(L)}return _}}}function f(g,y){o.push([g,y])}function x(g){return o=[],h(g,g,f,!0),o}function v(g,y){return o=[],h(g,y,f,!1),o}},7333:function(d,s){function t(o){return o?function(r,n,a,i,u,h,f,x,v,g,y){return u-i>v-x?function(p,m,w,c,M,_,E,L,C,O,I){for(var N=2*p,R=c,V=N*c;R<M;++R,V+=N){var F=_[m+V],D=_[m+V+p],U=E[R];e:for(var j=L,J=N*L;j<C;++j,J+=N){var X=O[m+J],Z=O[m+J+p],Y=I[j];if(!(Z<F||D<X)){for(var W=m+1;W<p;++W){var Q=_[W+V],ne=_[W+p+V],re=O[W+J],ie=O[W+p+J];if(ne<re||ie<Q)continue e}var se=w(U,Y);if(se!==void 0)return se}}}}(r,n,a,i,u,h,f,x,v,g,y):function(p,m,w,c,M,_,E,L,C,O,I){for(var N=2*p,R=L,V=N*L;R<C;++R,V+=N){var F=O[m+V],D=O[m+V+p],U=I[R];e:for(var j=c,J=N*c;j<M;++j,J+=N){var X=_[m+J],Z=_[m+J+p],Y=E[j];if(!(D<X||Z<F)){for(var W=m+1;W<p;++W){var Q=_[W+J],ne=_[W+p+J],re=O[W+V],ie=O[W+p+V];if(ne<re||ie<Q)continue e}var se=w(Y,U);if(se!==void 0)return se}}}}(r,n,a,i,u,h,f,x,v,g,y)}:function(r,n,a,i,u,h,f,x,v,g,y,p){return h-u>g-v?i?function(m,w,c,M,_,E,L,C,O,I,N){for(var R=2*m,V=M,F=R*M;V<_;++V,F+=R){var D=E[w+F],U=E[w+F+m],j=L[V];e:for(var J=C,X=R*C;J<O;++J,X+=R){var Z=I[w+X],Y=N[J];if(!(Z<=D||U<Z)){for(var W=w+1;W<m;++W){var Q=E[W+F],ne=E[W+m+F],re=I[W+X],ie=I[W+m+X];if(ne<re||ie<Q)continue e}var se=c(Y,j);if(se!==void 0)return se}}}}(r,n,a,u,h,f,x,v,g,y,p):function(m,w,c,M,_,E,L,C,O,I,N){for(var R=2*m,V=M,F=R*M;V<_;++V,F+=R){var D=E[w+F],U=E[w+F+m],j=L[V];e:for(var J=C,X=R*C;J<O;++J,X+=R){var Z=I[w+X],Y=N[J];if(!(Z<D||U<Z)){for(var W=w+1;W<m;++W){var Q=E[W+F],ne=E[W+m+F],re=I[W+X],ie=I[W+m+X];if(ne<re||ie<Q)continue e}var se=c(j,Y);if(se!==void 0)return se}}}}(r,n,a,u,h,f,x,v,g,y,p):i?function(m,w,c,M,_,E,L,C,O,I,N){for(var R=2*m,V=C,F=R*C;V<O;++V,F+=R){var D=I[w+F],U=N[V];e:for(var j=M,J=R*M;j<_;++j,J+=R){var X=E[w+J],Z=E[w+J+m],Y=L[j];if(!(D<=X||Z<D)){for(var W=w+1;W<m;++W){var Q=E[W+J],ne=E[W+m+J],re=I[W+F],ie=I[W+m+F];if(ne<re||ie<Q)continue e}var se=c(U,Y);if(se!==void 0)return se}}}}(r,n,a,u,h,f,x,v,g,y,p):function(m,w,c,M,_,E,L,C,O,I,N){for(var R=2*m,V=C,F=R*C;V<O;++V,F+=R){var D=I[w+F],U=N[V];e:for(var j=M,J=R*M;j<_;++j,J+=R){var X=E[w+J],Z=E[w+J+m],Y=L[j];if(!(D<X||Z<D)){for(var W=w+1;W<m;++W){var Q=E[W+J],ne=E[W+m+J],re=I[W+F],ie=I[W+m+F];if(ne<re||ie<Q)continue e}var se=c(Y,U);if(se!==void 0)return se}}}}(r,n,a,u,h,f,x,v,g,y,p)}}s.partial=t(!1),s.full=t(!0)},2337:function(d,s,t){d.exports=function(L,C,O,I,N,R,V,F,D){(function(De,Pe){var Re=8*r.log2(Pe+1)*(De+1)|0,fe=r.nextPow2(6*Re);w.length<fe&&(o.free(w),w=o.mallocInt32(fe));var ve=r.nextPow2(2*Re);c.length<ve&&(o.free(c),c=o.mallocDouble(ve))})(L,I+V);var U,j=0,J=2*L;for(M(j++,0,0,I,0,V,O?16:0,-1/0,1/0),O||M(j++,0,0,V,0,I,1,-1/0,1/0);j>0;){var X=6*(j-=1),Z=w[X],Y=w[X+1],W=w[X+2],Q=w[X+3],ne=w[X+4],re=w[X+5],ie=2*j,se=c[ie],ge=c[ie+1],ue=1&re,ce=!!(16&re),le=N,de=R,Ce=F,xe=D;if(ue&&(le=F,de=D,Ce=N,xe=R),!(2&re&&(W=g(L,Z,Y,W,le,de,ge),Y>=W)||4&re&&(Y=y(L,Z,Y,W,le,de,se))>=W)){var _e=W-Y,we=ne-Q;if(ce){if(L*_e*(_e+we)<4194304){if((U=u.scanComplete(L,Z,C,Y,W,le,de,Q,ne,Ce,xe))!==void 0)return U;continue}}else{if(L*Math.min(_e,we)<128){if((U=a(L,Z,C,ue,Y,W,le,de,Q,ne,Ce,xe))!==void 0)return U;continue}if(L*_e*we<4194304){if((U=u.scanBipartite(L,Z,C,ue,Y,W,le,de,Q,ne,Ce,xe))!==void 0)return U;continue}}var Ae=x(L,Z,Y,W,le,de,se,ge);if(Y<Ae)if(L*(Ae-Y)<128){if((U=i(L,Z+1,C,Y,Ae,le,de,Q,ne,Ce,xe))!==void 0)return U}else if(Z===L-2){if((U=ue?u.sweepBipartite(L,C,Q,ne,Ce,xe,Y,Ae,le,de):u.sweepBipartite(L,C,Y,Ae,le,de,Q,ne,Ce,xe))!==void 0)return U}else M(j++,Z+1,Y,Ae,Q,ne,ue,-1/0,1/0),M(j++,Z+1,Q,ne,Y,Ae,1^ue,-1/0,1/0);if(Ae<W){var $=h(L,Z,Q,ne,Ce,xe),oe=Ce[J*$+Z],pe=v(L,Z,$,ne,Ce,xe,oe);if(pe<ne&&M(j++,Z,Ae,W,pe,ne,(4|ue)+(ce?16:0),oe,ge),Q<$&&M(j++,Z,Ae,W,Q,$,(2|ue)+(ce?16:0),se,oe),$+1===pe){if((U=ce?E(L,Z,C,Ae,W,le,de,$,Ce,xe[$]):_(L,Z,C,ue,Ae,W,le,de,$,Ce,xe[$]))!==void 0)return U}else if($<pe){var ye;if(ce){if(Ae<(ye=p(L,Z,Ae,W,le,de,oe))){var ke=v(L,Z,Ae,ye,le,de,oe);if(Z===L-2){if(Ae<ke&&(U=u.sweepComplete(L,C,Ae,ke,le,de,$,pe,Ce,xe))!==void 0||ke<ye&&(U=u.sweepBipartite(L,C,ke,ye,le,de,$,pe,Ce,xe))!==void 0)return U}else Ae<ke&&M(j++,Z+1,Ae,ke,$,pe,16,-1/0,1/0),ke<ye&&(M(j++,Z+1,ke,ye,$,pe,0,-1/0,1/0),M(j++,Z+1,$,pe,ke,ye,1,-1/0,1/0))}}else Ae<(ye=ue?m(L,Z,Ae,W,le,de,oe):p(L,Z,Ae,W,le,de,oe))&&(Z===L-2?U=ue?u.sweepBipartite(L,C,$,pe,Ce,xe,Ae,ye,le,de):u.sweepBipartite(L,C,Ae,ye,le,de,$,pe,Ce,xe):(M(j++,Z+1,Ae,ye,$,pe,ue,-1/0,1/0),M(j++,Z+1,$,pe,Ae,ye,1^ue,-1/0,1/0)))}}}}};var o=t(5306),r=t(2288),n=t(7333),a=n.partial,i=n.full,u=t(1390),h=t(2464),f=t(122),x=f("!(lo>=p0)&&!(p1>=hi)"),v=f("lo===p0"),g=f("lo<p0"),y=f("hi<=p0"),p=f("lo<=p0&&p0<=hi"),m=f("lo<p0&&p0<=hi"),w=o.mallocInt32(1024),c=o.mallocDouble(1024);function M(L,C,O,I,N,R,V,F,D){var U=6*L;w[U]=C,w[U+1]=O,w[U+2]=I,w[U+3]=N,w[U+4]=R,w[U+5]=V;var j=2*L;c[j]=F,c[j+1]=D}function _(L,C,O,I,N,R,V,F,D,U,j){var J=2*L,X=D*J,Z=U[X+C];e:for(var Y=N,W=N*J;Y<R;++Y,W+=J){var Q=V[W+C],ne=V[W+C+L];if(!(Z<Q||ne<Z||I&&Z===Q)){for(var re,ie=F[Y],se=C+1;se<L;++se){Q=V[W+se],ne=V[W+se+L];var ge=U[X+se],ue=U[X+se+L];if(ne<ge||ue<Q)continue e}if((re=I?O(j,ie):O(ie,j))!==void 0)return re}}}function E(L,C,O,I,N,R,V,F,D,U){var j=2*L,J=F*j,X=D[J+C];e:for(var Z=I,Y=I*j;Z<N;++Z,Y+=j){var W=V[Z];if(W!==U){var Q=R[Y+C],ne=R[Y+C+L];if(!(X<Q||ne<X)){for(var re=C+1;re<L;++re){Q=R[Y+re],ne=R[Y+re+L];var ie=D[J+re],se=D[J+re+L];if(ne<ie||se<Q)continue e}var ge=O(W,U);if(ge!==void 0)return ge}}}}},2464:function(d,s,t){d.exports=function(n,a,i,u,h,f){if(u<=i+1)return i;for(var x=i,v=u,g=u+i>>>1,y=2*n,p=g,m=h[y*g+a];x<v;){if(v-x<8){r(n,a,x,v,h,f),m=h[y*g+a];break}var w=v-x,c=Math.random()*w+x|0,M=h[y*c+a],_=Math.random()*w+x|0,E=h[y*_+a],L=Math.random()*w+x|0,C=h[y*L+a];M<=E?C>=E?(p=_,m=E):M>=C?(p=c,m=M):(p=L,m=C):E>=C?(p=_,m=E):C>=M?(p=c,m=M):(p=L,m=C);for(var O=y*(v-1),I=y*p,N=0;N<y;++N,++O,++I){var R=h[O];h[O]=h[I],h[I]=R}var V=f[v-1];for(f[v-1]=f[p],f[p]=V,O=y*(v-1),I=y*(p=o(n,a,x,v-1,h,f,m)),N=0;N<y;++N,++O,++I)R=h[O],h[O]=h[I],h[I]=R;if(V=f[v-1],f[v-1]=f[p],f[p]=V,g<p){for(v=p-1;x<v&&h[y*(v-1)+a]===m;)v-=1;v+=1}else{if(!(p<g))break;for(x=p+1;x<v&&h[y*x+a]===m;)x+=1}}return o(n,a,i,g,h,f,h[y*g+a])};var o=t(122)("lo<p0");function r(n,a,i,u,h,f){for(var x=2*n,v=x*(i+1)+a,g=i+1;g<u;++g,v+=x)for(var y=h[v],p=g,m=x*(g-1);p>i&&h[m+a]>y;--p,m-=x){for(var w=m,c=m+x,M=0;M<x;++M,++w,++c){var _=h[w];h[w]=h[c],h[c]=_}var E=f[p];f[p]=f[p-1],f[p-1]=E}}},122:function(d){d.exports=function(t){return s[t]};var s={"lo===p0":function(t,o,r,n,a,i,u){for(var h=2*t,f=h*r,x=f,v=r,g=o,y=r;n>y;++y,f+=h)if(a[f+g]===u)if(v===y)v+=1,x+=h;else{for(var p=0;h>p;++p){var m=a[f+p];a[f+p]=a[x],a[x++]=m}var w=i[y];i[y]=i[v],i[v++]=w}return v},"lo<p0":function(t,o,r,n,a,i,u){for(var h=2*t,f=h*r,x=f,v=r,g=o,y=r;n>y;++y,f+=h)if(a[f+g]<u)if(v===y)v+=1,x+=h;else{for(var p=0;h>p;++p){var m=a[f+p];a[f+p]=a[x],a[x++]=m}var w=i[y];i[y]=i[v],i[v++]=w}return v},"lo<=p0":function(t,o,r,n,a,i,u){for(var h=2*t,f=h*r,x=f,v=r,g=t+o,y=r;n>y;++y,f+=h)if(a[f+g]<=u)if(v===y)v+=1,x+=h;else{for(var p=0;h>p;++p){var m=a[f+p];a[f+p]=a[x],a[x++]=m}var w=i[y];i[y]=i[v],i[v++]=w}return v},"hi<=p0":function(t,o,r,n,a,i,u){for(var h=2*t,f=h*r,x=f,v=r,g=t+o,y=r;n>y;++y,f+=h)if(a[f+g]<=u)if(v===y)v+=1,x+=h;else{for(var p=0;h>p;++p){var m=a[f+p];a[f+p]=a[x],a[x++]=m}var w=i[y];i[y]=i[v],i[v++]=w}return v},"lo<p0&&p0<=hi":function(t,o,r,n,a,i,u){for(var h=2*t,f=h*r,x=f,v=r,g=o,y=t+o,p=r;n>p;++p,f+=h){var m=a[f+g],w=a[f+y];if(m<u&&u<=w)if(v===p)v+=1,x+=h;else{for(var c=0;h>c;++c){var M=a[f+c];a[f+c]=a[x],a[x++]=M}var _=i[p];i[p]=i[v],i[v++]=_}}return v},"lo<=p0&&p0<=hi":function(t,o,r,n,a,i,u){for(var h=2*t,f=h*r,x=f,v=r,g=o,y=t+o,p=r;n>p;++p,f+=h){var m=a[f+g],w=a[f+y];if(m<=u&&u<=w)if(v===p)v+=1,x+=h;else{for(var c=0;h>c;++c){var M=a[f+c];a[f+c]=a[x],a[x++]=M}var _=i[p];i[p]=i[v],i[v++]=_}}return v},"!(lo>=p0)&&!(p1>=hi)":function(t,o,r,n,a,i,u,h){for(var f=2*t,x=f*r,v=x,g=r,y=o,p=t+o,m=r;n>m;++m,x+=f){var w=a[x+y],c=a[x+p];if(!(w>=u||h>=c))if(g===m)g+=1,v+=f;else{for(var M=0;f>M;++M){var _=a[x+M];a[x+M]=a[v],a[v++]=_}var E=i[m];i[m]=i[g],i[g++]=E}}return g}}},309:function(d){function s(h,f,x){for(var v=2*(h+1),g=h+1;g<=f;++g){for(var y=x[v++],p=x[v++],m=g,w=v-2;m-- >h;){var c=x[w-2],M=x[w-1];if(c<y||c===y&&M<p)break;x[w]=c,x[w+1]=M,w-=2}x[w]=y,x[w+1]=p}}function t(h,f,x){f*=2;var v=x[h*=2],g=x[h+1];x[h]=x[f],x[h+1]=x[f+1],x[f]=v,x[f+1]=g}function o(h,f,x){f*=2,x[h*=2]=x[f],x[h+1]=x[f+1]}function r(h,f,x,v){f*=2,x*=2;var g=v[h*=2],y=v[h+1];v[h]=v[f],v[h+1]=v[f+1],v[f]=v[x],v[f+1]=v[x+1],v[x]=g,v[x+1]=y}function n(h,f,x,v,g){f*=2,g[h*=2]=g[f],g[f]=x,g[h+1]=g[f+1],g[f+1]=v}function a(h,f,x){f*=2;var v=x[h*=2],g=x[f];return!(v<g)&&(v!==g||x[h+1]>x[f+1])}function i(h,f,x,v){var g=v[h*=2];return g<f||g===f&&v[h+1]<x}function u(h,f,x){var v=(f-h+1)/6|0,g=h+v,y=f-v,p=h+f>>1,m=p-v,w=p+v,c=g,M=m,_=p,E=w,L=y,C=h+1,O=f-1,I=0;a(c,M,x)&&(I=c,c=M,M=I),a(E,L,x)&&(I=E,E=L,L=I),a(c,_,x)&&(I=c,c=_,_=I),a(M,_,x)&&(I=M,M=_,_=I),a(c,E,x)&&(I=c,c=E,E=I),a(_,E,x)&&(I=_,_=E,E=I),a(M,L,x)&&(I=M,M=L,L=I),a(M,_,x)&&(I=M,M=_,_=I),a(E,L,x)&&(I=E,E=L,L=I);for(var N=x[2*M],R=x[2*M+1],V=x[2*E],F=x[2*E+1],D=2*c,U=2*_,j=2*L,J=2*g,X=2*p,Z=2*y,Y=0;Y<2;++Y){var W=x[D+Y],Q=x[U+Y],ne=x[j+Y];x[J+Y]=W,x[X+Y]=Q,x[Z+Y]=ne}o(m,h,x),o(w,f,x);for(var re=C;re<=O;++re)if(i(re,N,R,x))re!==C&&t(re,C,x),++C;else if(!i(re,V,F,x))for(;;){if(i(O,V,F,x)){i(O,N,R,x)?(r(re,C,O,x),++C,--O):(t(re,O,x),--O);break}if(--O<re)break}n(h,C-1,N,R,x),n(f,O+1,V,F,x),C-2-h<=32?s(h,C-2,x):u(h,C-2,x),f-(O+2)<=32?s(O+2,f,x):u(O+2,f,x),O-C<=32?s(C,O,x):u(C,O,x)}d.exports=function(h,f){f<=128?s(0,f-1,h):u(0,f-1,h)}},1390:function(d,s,t){d.exports={init:function(w){var c=r.nextPow2(w);u.length<c&&(o.free(u),u=o.mallocInt32(c)),h.length<c&&(o.free(h),h=o.mallocInt32(c)),f.length<c&&(o.free(f),f=o.mallocInt32(c)),x.length<c&&(o.free(x),x=o.mallocInt32(c)),v.length<c&&(o.free(v),v=o.mallocInt32(c)),g.length<c&&(o.free(g),g=o.mallocInt32(c));var M=8*c;y.length<M&&(o.free(y),y=o.mallocDouble(M))},sweepBipartite:function(w,c,M,_,E,L,C,O,I,N){for(var R=0,V=2*w,F=w-1,D=V-1,U=M;U<_;++U){var j=L[U],J=V*U;y[R++]=E[J+F],y[R++]=-(j+1),y[R++]=E[J+D],y[R++]=j}for(U=C;U<O;++U){j=N[U]+a;var X=V*U;y[R++]=I[X+F],y[R++]=-j,y[R++]=I[X+D],y[R++]=j}var Z=R>>>1;n(y,Z);var Y=0,W=0;for(U=0;U<Z;++U){var Q=0|y[2*U+1];if(Q>=a)p(f,x,W--,Q=Q-a|0);else if(Q>=0)p(u,h,Y--,Q);else if(Q<=-268435456){Q=-Q-a|0;for(var ne=0;ne<Y;++ne)if((re=c(u[ne],Q))!==void 0)return re;m(f,x,W++,Q)}else{for(Q=-Q-1|0,ne=0;ne<W;++ne){var re;if((re=c(Q,f[ne]))!==void 0)return re}m(u,h,Y++,Q)}}},sweepComplete:function(w,c,M,_,E,L,C,O,I,N){for(var R=0,V=2*w,F=w-1,D=V-1,U=M;U<_;++U){var j=L[U]+1<<1,J=V*U;y[R++]=E[J+F],y[R++]=-j,y[R++]=E[J+D],y[R++]=j}for(U=C;U<O;++U){j=N[U]+1<<1;var X=V*U;y[R++]=I[X+F],y[R++]=1|-j,y[R++]=I[X+D],y[R++]=1|j}var Z=R>>>1;n(y,Z);var Y=0,W=0,Q=0;for(U=0;U<Z;++U){var ne=0|y[2*U+1],re=1&ne;if(U<Z-1&&ne>>1==y[2*U+3]>>1&&(re=2,U+=1),ne<0){for(var ie=-(ne>>1)-1,se=0;se<Q;++se)if((ge=c(v[se],ie))!==void 0)return ge;if(re!==0){for(se=0;se<Y;++se)if((ge=c(u[se],ie))!==void 0)return ge}if(re!==1)for(se=0;se<W;++se){var ge;if((ge=c(f[se],ie))!==void 0)return ge}re===0?m(u,h,Y++,ie):re===1?m(f,x,W++,ie):re===2&&m(v,g,Q++,ie)}else ie=(ne>>1)-1,re===0?p(u,h,Y--,ie):re===1?p(f,x,W--,ie):re===2&&p(v,g,Q--,ie)}},scanBipartite:function(w,c,M,_,E,L,C,O,I,N,R,V){var F=0,D=2*w,U=c,j=c+w,J=1,X=1;_?X=a:J=a;for(var Z=E;Z<L;++Z){var Y=Z+J,W=D*Z;y[F++]=C[W+U],y[F++]=-Y,y[F++]=C[W+j],y[F++]=Y}for(Z=I;Z<N;++Z){Y=Z+X;var Q=D*Z;y[F++]=R[Q+U],y[F++]=-Y}var ne=F>>>1;n(y,ne);var re=0;for(Z=0;Z<ne;++Z){var ie=0|y[2*Z+1];if(ie<0){var se=!1;if((Y=-ie)>=a?(se=!_,Y-=a):(se=!!_,Y-=1),se)m(u,h,re++,Y);else{var ge=V[Y],ue=D*Y,ce=R[ue+c+1],le=R[ue+c+1+w];e:for(var de=0;de<re;++de){var Ce=u[de],xe=D*Ce;if(!(le<C[xe+c+1]||C[xe+c+1+w]<ce)){for(var _e=c+2;_e<w;++_e)if(R[ue+_e+w]<C[xe+_e]||C[xe+_e+w]<R[ue+_e])continue e;var we,Ae=O[Ce];if((we=_?M(ge,Ae):M(Ae,ge))!==void 0)return we}}}}else p(u,h,re--,ie-J)}},scanComplete:function(w,c,M,_,E,L,C,O,I,N,R){for(var V=0,F=2*w,D=c,U=c+w,j=_;j<E;++j){var J=j+a,X=F*j;y[V++]=L[X+D],y[V++]=-J,y[V++]=L[X+U],y[V++]=J}for(j=O;j<I;++j){J=j+1;var Z=F*j;y[V++]=N[Z+D],y[V++]=-J}var Y=V>>>1;n(y,Y);var W=0;for(j=0;j<Y;++j){var Q=0|y[2*j+1];if(Q<0)if((J=-Q)>=a)u[W++]=J-a;else{var ne=R[J-=1],re=F*J,ie=N[re+c+1],se=N[re+c+1+w];e:for(var ge=0;ge<W;++ge){var ue=u[ge],ce=C[ue];if(ce===ne)break;var le=F*ue;if(!(se<L[le+c+1]||L[le+c+1+w]<ie)){for(var de=c+2;de<w;++de)if(N[re+de+w]<L[le+de]||L[le+de+w]<N[re+de])continue e;var Ce=M(ce,ne);if(Ce!==void 0)return Ce}}}else{for(J=Q-a,ge=W-1;ge>=0;--ge)if(u[ge]===J){for(de=ge+1;de<W;++de)u[de-1]=u[de];break}--W}}}};var o=t(5306),r=t(2288),n=t(309),a=1<<28,i=1024,u=o.mallocInt32(i),h=o.mallocInt32(i),f=o.mallocInt32(i),x=o.mallocInt32(i),v=o.mallocInt32(i),g=o.mallocInt32(i),y=o.mallocDouble(8192);function p(w,c,M,_){var E=c[_],L=w[M-1];w[E]=L,c[L]=E}function m(w,c,M,_){w[M]=_,c[_]=M}},7761:function(d,s,t){var o=t(9971),r=t(743),n=t(2161),a=t(7098);function i(f){return[Math.min(f[0],f[1]),Math.max(f[0],f[1])]}function u(f,x){return f[0]-x[0]||f[1]-x[1]}function h(f,x,v){return x in f?f[x]:v}d.exports=function(f,x,v){Array.isArray(x)?(v=v||{},x=x||[]):(v=x||{},x=[]);var g=!!h(v,"delaunay",!0),y=!!h(v,"interior",!0),p=!!h(v,"exterior",!0),m=!!h(v,"infinity",!1);if(!y&&!p||f.length===0)return[];var w=o(f,x);if(g||y!==p||m){for(var c=r(f.length,function(E){return E.map(i).sort(u)}(x)),M=0;M<w.length;++M){var _=w[M];c.addTriangle(_[0],_[1],_[2])}return g&&n(f,c),p?y?m?a(c,0,m):c.cells():a(c,1,m):a(c,-1)}return w}},2161:function(d,s,t){var o=t(2227)[4];function r(n,a,i,u,h,f){var x=a.opposite(u,h);if(!(x<0)){if(h<u){var v=u;u=h,h=v,v=f,f=x,x=v}a.isConstraint(u,h)||o(n[u],n[h],n[f],n[x])<0&&i.push(u,h)}}t(5070),d.exports=function(n,a){for(var i=[],u=n.length,h=a.stars,f=0;f<u;++f)for(var x=h[f],v=1;v<x.length;v+=2)if(!((m=x[v])<f||a.isConstraint(f,m))){for(var g=x[v-1],y=-1,p=1;p<x.length;p+=2)if(x[p-1]===m){y=x[p];break}y<0||o(n[f],n[m],n[g],n[y])<0&&i.push(f,m)}for(;i.length>0;){for(var m=i.pop(),w=(g=-1,y=-1,x=h[f=i.pop()],1);w<x.length;w+=2){var c=x[w-1],M=x[w];c===m?y=M:M===m&&(g=c)}g<0||y<0||o(n[f],n[m],n[g],n[y])>=0||(a.flip(f,m),r(n,a,i,g,f,y),r(n,a,i,f,y,g),r(n,a,i,y,m,g),r(n,a,i,m,g,y))}}},7098:function(d,s,t){var o,r=t(5070);function n(i,u,h,f,x,v,g){this.cells=i,this.neighbor=u,this.flags=f,this.constraint=h,this.active=x,this.next=v,this.boundary=g}function a(i,u){return i[0]-u[0]||i[1]-u[1]||i[2]-u[2]}d.exports=function(i,u,h){var f=function(C,O){for(var I=C.cells(),N=I.length,R=0;R<N;++R){var V=(Q=I[R])[0],F=Q[1],D=Q[2];F<D?F<V&&(Q[0]=F,Q[1]=D,Q[2]=V):D<V&&(Q[0]=D,Q[1]=V,Q[2]=F)}I.sort(a);var U=new Array(N);for(R=0;R<U.length;++R)U[R]=0;var j=[],J=[],X=new Array(3*N),Z=new Array(3*N),Y=null;O&&(Y=[]);var W=new n(I,X,Z,U,j,J,Y);for(R=0;R<N;++R)for(var Q=I[R],ne=0;ne<3;++ne){V=Q[ne],F=Q[(ne+1)%3];var re=X[3*R+ne]=W.locate(F,V,C.opposite(F,V)),ie=Z[3*R+ne]=C.isConstraint(V,F);re<0&&(ie?J.push(R):(j.push(R),U[R]=1),O&&Y.push([F,V,-1]))}return W}(i,h);if(u===0)return h?f.cells.concat(f.boundary):f.cells;for(var x=1,v=f.active,g=f.next,y=f.flags,p=f.cells,m=f.constraint,w=f.neighbor;v.length>0||g.length>0;){for(;v.length>0;){var c=v.pop();if(y[c]!==-x){y[c]=x,p[c];for(var M=0;M<3;++M){var _=w[3*c+M];_>=0&&y[_]===0&&(m[3*c+M]?g.push(_):(v.push(_),y[_]=x))}}}var E=g;g=v,v=E,g.length=0,x=-x}var L=function(C,O,I){for(var N=0,R=0;R<C.length;++R)O[R]===I&&(C[N++]=C[R]);return C.length=N,C}(p,y,u);return h?L.concat(f.boundary):L},n.prototype.locate=(o=[0,0,0],function(i,u,h){var f=i,x=u,v=h;return u<h?u<i&&(f=u,x=h,v=i):h<i&&(f=h,x=i,v=u),f<0?-1:(o[0]=f,o[1]=x,o[2]=v,r.eq(this.cells,o,a))})},9971:function(d,s,t){var o=t(5070),r=t(417)[3];function n(g,y,p,m,w){this.a=g,this.b=y,this.idx=p,this.lowerIds=m,this.upperIds=w}function a(g,y,p,m){this.a=g,this.b=y,this.type=p,this.idx=m}function i(g,y){var p=g.a[0]-y.a[0]||g.a[1]-y.a[1]||g.type-y.type;return p||(g.type!==0&&(p=r(g.a,g.b,y.b))?p:g.idx-y.idx)}function u(g,y){return r(g.a,g.b,y)}function h(g,y,p,m,w){for(var c=o.lt(y,m,u),M=o.gt(y,m,u),_=c;_<M;++_){for(var E=y[_],L=E.lowerIds,C=L.length;C>1&&r(p[L[C-2]],p[L[C-1]],m)>0;)g.push([L[C-1],L[C-2],w]),C-=1;L.length=C,L.push(w);var O=E.upperIds;for(C=O.length;C>1&&r(p[O[C-2]],p[O[C-1]],m)<0;)g.push([O[C-2],O[C-1],w]),C-=1;O.length=C,O.push(w)}}function f(g,y){var p;return(p=g.a[0]<y.a[0]?r(g.a,g.b,y.a):r(y.b,y.a,g.a))?p:(p=y.b[0]<g.b[0]?r(g.a,g.b,y.b):r(y.b,y.a,g.b))||g.idx-y.idx}function x(g,y,p){var m=o.le(g,p,f),w=g[m],c=w.upperIds,M=c[c.length-1];w.upperIds=[M],g.splice(m+1,0,new n(p.a,p.b,p.idx,[M],c))}function v(g,y,p){var m=p.a;p.a=p.b,p.b=m;var w=o.eq(g,p,f),c=g[w];g[w-1].upperIds=c.upperIds,g.splice(w,1)}d.exports=function(g,y){for(var p=g.length,m=y.length,w=[],c=0;c<p;++c)w.push(new a(g[c],null,0,c));for(c=0;c<m;++c){var M=y[c],_=g[M[0]],E=g[M[1]];_[0]<E[0]?w.push(new a(_,E,2,c),new a(E,_,1,c)):_[0]>E[0]&&w.push(new a(E,_,2,c),new a(_,E,1,c))}w.sort(i);for(var L=w[0].a[0]-(1+Math.abs(w[0].a[0]))*Math.pow(2,-52),C=[new n([L,1],[L,0],-1,[],[])],O=[],I=(c=0,w.length);c<I;++c){var N=w[c],R=N.type;R===0?h(O,C,g,N.a,N.idx):R===2?x(C,0,N):v(C,0,N)}return O}},743:function(d,s,t){var o=t(5070);function r(i,u){this.stars=i,this.edges=u}d.exports=function(i,u){for(var h=new Array(i),f=0;f<i;++f)h[f]=[];return new r(h,u)};var n=r.prototype;function a(i,u,h){for(var f=1,x=i.length;f<x;f+=2)if(i[f-1]===u&&i[f]===h)return i[f-1]=i[x-2],i[f]=i[x-1],void(i.length=x-2)}n.isConstraint=function(){var i=[0,0];function u(h,f){return h[0]-f[0]||h[1]-f[1]}return function(h,f){return i[0]=Math.min(h,f),i[1]=Math.max(h,f),o.eq(this.edges,i,u)>=0}}(),n.removeTriangle=function(i,u,h){var f=this.stars;a(f[i],u,h),a(f[u],h,i),a(f[h],i,u)},n.addTriangle=function(i,u,h){var f=this.stars;f[i].push(u,h),f[u].push(h,i),f[h].push(i,u)},n.opposite=function(i,u){for(var h=this.stars[u],f=1,x=h.length;f<x;f+=2)if(h[f]===i)return h[f-1];return-1},n.flip=function(i,u){var h=this.opposite(i,u),f=this.opposite(u,i);this.removeTriangle(i,u,h),this.removeTriangle(u,i,f),this.addTriangle(i,f,h),this.addTriangle(u,h,f)},n.edges=function(){for(var i=this.stars,u=[],h=0,f=i.length;h<f;++h)for(var x=i[h],v=0,g=x.length;v<g;v+=2)u.push([x[v],x[v+1]]);return u},n.cells=function(){for(var i=this.stars,u=[],h=0,f=i.length;h<f;++h)for(var x=i[h],v=0,g=x.length;v<g;v+=2){var y=x[v],p=x[v+1];h<Math.min(y,p)&&u.push([h,y,p])}return u}},9887:function(d){d.exports=function(s){for(var t=1,o=1;o<s.length;++o)for(var r=0;r<o;++r)if(s[o]<s[r])t=-t;else if(s[r]===s[o])return 0;return t}},9243:function(d,s,t){var o=t(3094),r=t(6606);function n(u,h){for(var f=0,x=u.length,v=0;v<x;++v)f+=u[v]*h[v];return f}function a(u){var h=u.length;if(h===0)return[];u[0].length;var f=o([u.length+1,u.length+1],1),x=o([u.length+1],1);f[h][h]=0;for(var v=0;v<h;++v){for(var g=0;g<=v;++g)f[g][v]=f[v][g]=2*n(u[v],u[g]);x[v]=n(u[v],u[v])}var y=r(f,x),p=0,m=y[h+1];for(v=0;v<m.length;++v)p+=m[v];var w=new Array(h);for(v=0;v<h;++v){m=y[v];var c=0;for(g=0;g<m.length;++g)c+=m[g];w[v]=c/p}return w}function i(u){if(u.length===0)return[];for(var h=u[0].length,f=o([h]),x=a(u),v=0;v<u.length;++v)for(var g=0;g<h;++g)f[g]+=u[v][g]*x[v];return f}i.barycenetric=a,d.exports=i},1778:function(d,s,t){d.exports=function(r){for(var n=o(r),a=0,i=0;i<r.length;++i)for(var u=r[i],h=0;h<n.length;++h)a+=Math.pow(u[h]-n[h],2);return Math.sqrt(a/r.length)};var o=t(9243)},197:function(d,s,t){d.exports=function(M,_,E){var L;if(E){L=_;for(var C=new Array(_.length),O=0;O<_.length;++O){var I=_[O];C[O]=[I[0],I[1],E[O]]}_=C}for(var N=function(R,V,F){var D=y(R,[],g(R));return w(V,D,F),!!D}(M,_,!!E);c(M,_,!!E);)N=!0;if(E&&N)for(L.length=0,E.length=0,O=0;O<_.length;++O)I=_[O],L.push([I[0],I[1]]),E.push(I[2]);return N};var o=t(1731),r=t(2569),n=t(4434),a=t(5125),i=t(8846),u=t(7999),h=t(2826),f=t(8551),x=t(5528);function v(M){var _=u(M);return[f(_,-1/0),f(_,1/0)]}function g(M){for(var _=new Array(M.length),E=0;E<M.length;++E){var L=M[E];_[E]=[f(L[0],-1/0),f(L[1],-1/0),f(L[0],1/0),f(L[1],1/0)]}return _}function y(M,_,E){for(var L=_.length,C=new o(L),O=[],I=0;I<_.length;++I){var N=_[I],R=v(N[0]),V=v(N[1]);O.push([f(R[0],-1/0),f(V[0],-1/0),f(R[1],1/0),f(V[1],1/0)])}r(O,function(J,X){C.link(J,X)});var F=!0,D=new Array(L);for(I=0;I<L;++I)(j=C.find(I))!==I&&(F=!1,M[j]=[Math.min(M[I][0],M[j][0]),Math.min(M[I][1],M[j][1])]);if(F)return null;var U=0;for(I=0;I<L;++I){var j;(j=C.find(I))===I?(D[I]=U,M[U++]=M[I]):D[I]=-1}for(M.length=U,I=0;I<L;++I)D[I]<0&&(D[I]=D[C.find(I)]);return D}function p(M,_){return M[0]-_[0]||M[1]-_[1]}function m(M,_){return M[0]-_[0]||M[1]-_[1]||(M[2]<_[2]?-1:M[2]>_[2]?1:0)}function w(M,_,E){if(M.length!==0){if(_)for(var L=0;L<M.length;++L){var C=_[(I=M[L])[0]],O=_[I[1]];I[0]=Math.min(C,O),I[1]=Math.max(C,O)}else for(L=0;L<M.length;++L){var I;C=(I=M[L])[0],O=I[1],I[0]=Math.min(C,O),I[1]=Math.max(C,O)}E?M.sort(m):M.sort(p);var N=1;for(L=1;L<M.length;++L){var R=M[L-1],V=M[L];(V[0]!==R[0]||V[1]!==R[1]||E&&V[2]!==R[2])&&(M[N++]=V)}M.length=N}}function c(M,_,E){var L=function(R,V){for(var F=new Array(V.length),D=0;D<V.length;++D){var U=V[D],j=R[U[0]],J=R[U[1]];F[D]=[f(Math.min(j[0],J[0]),-1/0),f(Math.min(j[1],J[1]),-1/0),f(Math.max(j[0],J[0]),1/0),f(Math.max(j[1],J[1]),1/0)]}return F}(M,_),C=function(R,V,F){var D=[];return r(F,function(U,j){var J=V[U],X=V[j];if(J[0]!==X[0]&&J[0]!==X[1]&&J[1]!==X[0]&&J[1]!==X[1]){var Z=R[J[0]],Y=R[J[1]],W=R[X[0]],Q=R[X[1]];n(Z,Y,W,Q)&&D.push([U,j])}}),D}(M,_,L),O=function(R,V,F,D){var U=[];return r(F,D,function(j,J){var X=V[j];if(X[0]!==J&&X[1]!==J){var Z=R[J],Y=R[X[0]],W=R[X[1]];n(Y,W,Z,Z)&&U.push([j,J])}}),U}(M,_,L,g(M)),I=function(R,V,F,D,U){var j,J,X=R.map(function(we){return[a(we[0]),a(we[1])]});for(j=0;j<F.length;++j){var Z=F[j];J=Z[0];var Y=Z[1],W=V[J],Q=V[Y],ne=x(h(R[W[0]]),h(R[W[1]]),h(R[Q[0]]),h(R[Q[1]]));if(ne){var re=R.length;R.push([u(ne[0]),u(ne[1])]),X.push(ne),D.push([J,re],[Y,re])}}for(D.sort(function(we,Ae){if(we[0]!==Ae[0])return we[0]-Ae[0];var $=X[we[1]],oe=X[Ae[1]];return i($[0],oe[0])||i($[1],oe[1])}),j=D.length-1;j>=0;--j){var ie=V[J=(xe=D[j])[0]],se=ie[0],ge=ie[1],ue=R[se],ce=R[ge];if((ue[0]-ce[0]||ue[1]-ce[1])<0){var le=se;se=ge,ge=le}ie[0]=se;var de,Ce=ie[1]=xe[1];for(U&&(de=ie[2]);j>0&&D[j-1][0]===J;){var xe,_e=(xe=D[--j])[1];U?V.push([Ce,_e,de]):V.push([Ce,_e]),Ce=_e}U?V.push([Ce,ge,de]):V.push([Ce,ge])}return X}(M,_,C,O,E),N=y(M,I);return w(_,N,E),!!N||C.length>0||O.length>0}},5528:function(d,s,t){d.exports=function(x,v,g,y){var p=i(v,x),m=i(y,g),w=f(p,m);if(a(w)===0)return null;var c=f(m,i(x,g)),M=r(c,w),_=h(p,M);return u(x,_)};var o=t(3962),r=t(9189),n=t(4354),a=t(4951),i=t(6695),u=t(7584),h=t(4469);function f(x,v){return n(o(x[0],v[1]),o(x[1],v[0]))}},5692:function(d){d.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},9156:function(d,s,t){var o=t(5692),r=t(3578);function n(u){return[u[0]/255,u[1]/255,u[2]/255,u[3]]}function a(u){for(var h,f="#",x=0;x<3;++x)f+=("00"+(h=(h=u[x]).toString(16))).substr(h.length);return f}function i(u){return"rgba("+u.join(",")+")"}d.exports=function(u){var h,f,x,v,g,y,p,m,w,c;if(u||(u={}),m=(u.nshades||72)-1,p=u.format||"hex",(y=u.colormap)||(y="jet"),typeof y=="string"){if(y=y.toLowerCase(),!o[y])throw Error(y+" not a supported colorscale");g=o[y]}else{if(!Array.isArray(y))throw Error("unsupported colormap option",y);g=y.slice()}if(g.length>m+1)throw new Error(y+" map requires nshades to be at least size "+g.length);w=Array.isArray(u.alpha)?u.alpha.length!==2?[1,1]:u.alpha.slice():typeof u.alpha=="number"?[u.alpha,u.alpha]:[1,1],h=g.map(function(C){return Math.round(C.index*m)}),w[0]=Math.min(Math.max(w[0],0),1),w[1]=Math.min(Math.max(w[1],0),1);var M=g.map(function(C,O){var I=g[O].index,N=g[O].rgb.slice();return N.length===4&&N[3]>=0&&N[3]<=1||(N[3]=w[0]+(w[1]-w[0])*I),N}),_=[];for(c=0;c<h.length-1;++c){v=h[c+1]-h[c],f=M[c],x=M[c+1];for(var E=0;E<v;E++){var L=E/v;_.push([Math.round(r(f[0],x[0],L)),Math.round(r(f[1],x[1],L)),Math.round(r(f[2],x[2],L)),r(f[3],x[3],L)])}}return _.push(g[g.length-1].rgb.concat(w[1])),p==="hex"?_=_.map(a):p==="rgbaString"?_=_.map(i):p==="float"&&(_=_.map(n)),_}},9398:function(d,s,t){d.exports=function(h,f,x,v){var g=o(f,x,v);if(g===0){var y=r(o(h,f,x)),p=r(o(h,f,v));if(y===p){if(y===0){var m=u(h,f,x);return m===u(h,f,v)?0:m?1:-1}return 0}return p===0?y>0||u(h,f,v)?-1:1:y===0?p>0||u(h,f,x)?1:-1:r(p-y)}var w=o(h,f,x);return w>0?g>0&&o(h,f,v)>0?1:-1:w<0?g>0||o(h,f,v)>0?1:-1:o(h,f,v)>0||u(h,f,x)?1:-1};var o=t(417),r=t(7538),n=t(87),a=t(2019),i=t(9662);function u(h,f,x){var v=n(h[0],-f[0]),g=n(h[1],-f[1]),y=n(x[0],-f[0]),p=n(x[1],-f[1]),m=i(a(v,y),a(g,p));return m[m.length-1]>=0}},7538:function(d){d.exports=function(s){return s<0?-1:s>0?1:0}},9209:function(d){d.exports=function(o,r){var n=o.length,a=o.length-r.length;if(a)return a;switch(n){case 0:return 0;case 1:return o[0]-r[0];case 2:return o[0]+o[1]-r[0]-r[1]||s(o[0],o[1])-s(r[0],r[1]);case 3:var i=o[0]+o[1],u=r[0]+r[1];if(a=i+o[2]-(u+r[2]))return a;var h=s(o[0],o[1]),f=s(r[0],r[1]);return s(h,o[2])-s(f,r[2])||s(h+o[2],i)-s(f+r[2],u);case 4:var x=o[0],v=o[1],g=o[2],y=o[3],p=r[0],m=r[1],w=r[2],c=r[3];return x+v+g+y-(p+m+w+c)||s(x,v,g,y)-s(p,m,w,c,p)||s(x+v,x+g,x+y,v+g,v+y,g+y)-s(p+m,p+w,p+c,m+w,m+c,w+c)||s(x+v+g,x+v+y,x+g+y,v+g+y)-s(p+m+w,p+m+c,p+w+c,m+w+c);default:for(var M=o.slice().sort(t),_=r.slice().sort(t),E=0;E<n;++E)if(a=M[E]-_[E])return a;return 0}};var s=Math.min;function t(o,r){return o-r}},1284:function(d,s,t){var o=t(9209),r=t(9887);d.exports=function(n,a){return o(n,a)||r(n)-r(a)}},5537:function(d,s,t){var o=t(8950),r=t(8722),n=t(3332);d.exports=function(a){var i=a.length;if(i===0)return[];if(i===1)return[[0]];var u=a[0].length;return u===0?[]:u===1?o(a):u===2?r(a):n(a,u)}},8950:function(d){d.exports=function(s){for(var t=0,o=0,r=1;r<s.length;++r)s[r][0]<s[t][0]&&(t=r),s[r][0]>s[o][0]&&(o=r);return t<o?[[t],[o]]:t>o?[[o],[t]]:[[t]]}},8722:function(d,s,t){d.exports=function(r){var n=o(r),a=n.length;if(a<=2)return[];for(var i=new Array(a),u=n[a-1],h=0;h<a;++h){var f=n[h];i[h]=[u,f],u=f}return i};var o=t(3266)},3332:function(d,s,t){d.exports=function(n,a){try{return o(n,!0)}catch{var i=r(n);if(i.length<=a)return[];var u=function(f,x){for(var v=f.length,g=new Array(v),y=0;y<x.length;++y)g[y]=f[x[y]];var p=x.length;for(y=0;y<v;++y)x.indexOf(y)<0&&(g[p++]=f[y]);return g}(n,i);return function(f,x){for(var v=f.length,g=x.length,y=0;y<v;++y)for(var p=f[y],m=0;m<p.length;++m){var w=p[m];if(w<g)p[m]=x[w];else{w-=g;for(var c=0;c<g;++c)w>=x[c]&&(w+=1);p[m]=w}}return f}(o(u,!0),i)}};var o=t(2183),r=t(2153)},9680:function(d){d.exports=function(s,t,o,r,n,a){var i=n-1,u=n*n,h=i*i,f=(1+2*n)*h,x=n*h,v=u*(3-2*n),g=u*i;if(s.length){a||(a=new Array(s.length));for(var y=s.length-1;y>=0;--y)a[y]=f*s[y]+x*t[y]+v*o[y]+g*r[y];return a}return f*s+x*t+v*o+g*r},d.exports.derivative=function(s,t,o,r,n,a){var i=6*n*n-6*n,u=3*n*n-4*n+1,h=-6*n*n+6*n,f=3*n*n-2*n;if(s.length){a||(a=new Array(s.length));for(var x=s.length-1;x>=0;--x)a[x]=i*s[x]+u*t[x]+h*o[x]+f*r[x];return a}return i*s+u*t+h*o[x]+f*r}},4419:function(d,s,t){var o=t(2183),r=t(1215);function n(i,u){this.point=i,this.index=u}function a(i,u){for(var h=i.point,f=u.point,x=h.length,v=0;v<x;++v){var g=f[v]-h[v];if(g)return g}return 0}d.exports=function(i,u){var h=i.length;if(h===0)return[];var f=i[0].length;if(f<1)return[];if(f===1)return function(I,N,R){if(I===1)return R?[[-1,0]]:[];var V=N.map(function(J,X){return[J[0],X]});V.sort(function(J,X){return J[0]-X[0]});for(var F=new Array(I-1),D=1;D<I;++D){var U=V[D-1],j=V[D];F[D-1]=[U[1],j[1]]}return R&&F.push([-1,F[0][1]],[F[I-1][1],-1]),F}(h,i,u);for(var x=new Array(h),v=1,g=0;g<h;++g){for(var y=i[g],p=new Array(f+1),m=0,w=0;w<f;++w){var c=y[w];p[w]=c,m+=c*c}p[f]=m,x[g]=new n(p,g),v=Math.max(m,v)}r(x,a),h=x.length;var M=new Array(h+f+1),_=new Array(h+f+1),E=(f+1)*(f+1)*v,L=new Array(f+1);for(g=0;g<=f;++g)L[g]=0;for(L[f]=E,M[0]=L.slice(),_[0]=-1,g=0;g<=f;++g)(p=L.slice())[g]=1,M[g+1]=p,_[g+1]=-1;for(g=0;g<h;++g){var C=x[g];M[g+f+1]=C.point,_[g+f+1]=C.index}var O=o(M,!1);if(O=u?O.filter(function(I){for(var N=0,R=0;R<=f;++R){var V=_[I[R]];if(V<0&&++N>=2)return!1;I[R]=V}return!0}):O.filter(function(I){for(var N=0;N<=f;++N){var R=_[I[N]];if(R<0)return!1;I[N]=R}return!0}),1&f)for(g=0;g<O.length;++g)p=(C=O[g])[0],C[0]=C[1],C[1]=p;return O}},8362:function(d){var s=!1;if(typeof Float64Array<"u"){var t=new Float64Array(1),o=new Uint32Array(t.buffer);t[0]=1,s=!0,o[1]===1072693248?(d.exports=function(n){return t[0]=n,[o[0],o[1]]},d.exports.pack=function(n,a){return o[0]=n,o[1]=a,t[0]},d.exports.lo=function(n){return t[0]=n,o[0]},d.exports.hi=function(n){return t[0]=n,o[1]}):o[0]===1072693248?(d.exports=function(n){return t[0]=n,[o[1],o[0]]},d.exports.pack=function(n,a){return o[1]=n,o[0]=a,t[0]},d.exports.lo=function(n){return t[0]=n,o[1]},d.exports.hi=function(n){return t[0]=n,o[0]}):s=!1}if(!s){var r=new Buffer(8);d.exports=function(n){return r.writeDoubleLE(n,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},d.exports.pack=function(n,a){return r.writeUInt32LE(n,0,!0),r.writeUInt32LE(a,4,!0),r.readDoubleLE(0,!0)},d.exports.lo=function(n){return r.writeDoubleLE(n,0,!0),r.readUInt32LE(0,!0)},d.exports.hi=function(n){return r.writeDoubleLE(n,0,!0),r.readUInt32LE(4,!0)}}d.exports.sign=function(n){return d.exports.hi(n)>>>31},d.exports.exponent=function(n){return(d.exports.hi(n)<<1>>>21)-1023},d.exports.fraction=function(n){var a=d.exports.lo(n),i=d.exports.hi(n),u=1048575&i;return 2146435072&i&&(u+=1048576),[a,u]},d.exports.denormalized=function(n){return!(2146435072&d.exports.hi(n))}},3094:function(d){function s(t,o,r){var n=0|t[r];if(n<=0)return[];var a,i=new Array(n);if(r===t.length-1)for(a=0;a<n;++a)i[a]=o;else for(a=0;a<n;++a)i[a]=s(t,o,r+1);return i}d.exports=function(t,o){switch(o===void 0&&(o=0),typeof t){case"number":if(t>0)return function(r,n){var a,i;for(a=new Array(r),i=0;i<r;++i)a[i]=n;return a}(0|t,o);break;case"object":if(typeof t.length=="number")return s(t,o,0)}return[]}},8348:function(d,s,t){d.exports=function(r,n){var a=r.length;if(typeof n!="number"){n=0;for(var i=0;i<a;++i){var u=r[i];n=Math.max(n,u[0],u[1])}n=1+(0|n)}n|=0;var h=new Array(n);for(i=0;i<n;++i)h[i]=[];for(i=0;i<a;++i)h[(u=r[i])[0]].push(u[1]),h[u[1]].push(u[0]);for(var f=0;f<n;++f)o(h[f],function(x,v){return x-v});return h};var o=t(1215)},5795:function(d){d.exports=function(s,t,o){var r=t||0,n=o||1;return[[s[12]+s[0],s[13]+s[1],s[14]+s[2],s[15]+s[3]],[s[12]-s[0],s[13]-s[1],s[14]-s[2],s[15]-s[3]],[s[12]+s[4],s[13]+s[5],s[14]+s[6],s[15]+s[7]],[s[12]-s[4],s[13]-s[5],s[14]-s[6],s[15]-s[7]],[r*s[12]+s[8],r*s[13]+s[9],r*s[14]+s[10],r*s[15]+s[11]],[n*s[12]-s[8],n*s[13]-s[9],n*s[14]-s[10],n*s[15]-s[11]]]}},8444:function(d,s,t){d.exports=function(h,f,x){switch(arguments.length){case 0:return new a([0],[0],0);case 1:return typeof h=="number"?new a(v=u(h),v,0):new a(h,u(h.length),0);case 2:if(typeof f=="number"){var v=u(h.length);return new a(h,v,+f)}x=0;case 3:if(h.length!==f.length)throw new Error("state and velocity lengths must match");return new a(h,f,x)}};var o=t(9680),r=t(5070);function n(h,f,x){return Math.min(f,Math.max(h,x))}function a(h,f,x){this.dimension=h.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var v=0;v<this.dimension;++v)this.bounds[0][v]=-1/0,this.bounds[1][v]=1/0;this._state=h.slice().reverse(),this._velocity=f.slice().reverse(),this._time=[x],this._scratch=[h.slice(),h.slice(),h.slice(),h.slice(),h.slice()]}var i=a.prototype;function u(h){for(var f=new Array(h),x=0;x<h;++x)f[x]=0;return f}i.flush=function(h){var f=r.gt(this._time,h)-1;f<=0||(this._time.splice(0,f),this._state.splice(0,f*this.dimension),this._velocity.splice(0,f*this.dimension))},i.curve=function(h){var f=this._time,x=f.length,v=r.le(f,h),g=this._scratch[0],y=this._state,p=this._velocity,m=this.dimension,w=this.bounds;if(v<0)for(var c=m-1,M=0;M<m;++M,--c)g[M]=y[c];else if(v>=x-1){c=y.length-1;var _=h-f[x-1];for(M=0;M<m;++M,--c)g[M]=y[c]+_*p[c]}else{c=m*(v+1)-1;var E=f[v],L=f[v+1]-E||1,C=this._scratch[1],O=this._scratch[2],I=this._scratch[3],N=this._scratch[4],R=!0;for(M=0;M<m;++M,--c)C[M]=y[c],I[M]=p[c]*L,O[M]=y[c+m],N[M]=p[c+m]*L,R=R&&C[M]===O[M]&&I[M]===N[M]&&I[M]===0;if(R)for(M=0;M<m;++M)g[M]=C[M];else o(C,I,O,N,(h-E)/L,g)}var V=w[0],F=w[1];for(M=0;M<m;++M)g[M]=n(V[M],F[M],g[M]);return g},i.dcurve=function(h){var f=this._time,x=f.length,v=r.le(f,h),g=this._scratch[0],y=this._state,p=this._velocity,m=this.dimension;if(v>=x-1)for(var w=y.length-1,c=(f[x-1],0);c<m;++c,--w)g[c]=p[w];else{w=m*(v+1)-1;var M=f[v],_=f[v+1]-M||1,E=this._scratch[1],L=this._scratch[2],C=this._scratch[3],O=this._scratch[4],I=!0;for(c=0;c<m;++c,--w)E[c]=y[w],C[c]=p[w]*_,L[c]=y[w+m],O[c]=p[w+m]*_,I=I&&E[c]===L[c]&&C[c]===O[c]&&C[c]===0;if(I)for(c=0;c<m;++c)g[c]=0;else for(o.derivative(E,C,L,O,(h-M)/_,g),c=0;c<m;++c)g[c]/=_}return g},i.lastT=function(){var h=this._time;return h[h.length-1]},i.stable=function(){for(var h=this._velocity,f=h.length,x=this.dimension-1;x>=0;--x)if(h[--f])return!1;return!0},i.jump=function(h){var f=this.lastT(),x=this.dimension;if(!(h<f||arguments.length!==x+1)){var v=this._state,g=this._velocity,y=v.length-this.dimension,p=this.bounds,m=p[0],w=p[1];this._time.push(f,h);for(var c=0;c<2;++c)for(var M=0;M<x;++M)v.push(v[y++]),g.push(0);for(this._time.push(h),M=x;M>0;--M)v.push(n(m[M-1],w[M-1],arguments[M])),g.push(0)}},i.push=function(h){var f=this.lastT(),x=this.dimension;if(!(h<f||arguments.length!==x+1)){var v=this._state,g=this._velocity,y=v.length-this.dimension,p=h-f,m=this.bounds,w=m[0],c=m[1],M=p>1e-6?1/p:0;this._time.push(h);for(var _=x;_>0;--_){var E=n(w[_-1],c[_-1],arguments[_]);v.push(E),g.push((E-v[y++])*M)}}},i.set=function(h){var f=this.dimension;if(!(h<this.lastT()||arguments.length!==f+1)){var x=this._state,v=this._velocity,g=this.bounds,y=g[0],p=g[1];this._time.push(h);for(var m=f;m>0;--m)x.push(n(y[m-1],p[m-1],arguments[m])),v.push(0)}},i.move=function(h){var f=this.lastT(),x=this.dimension;if(!(h<=f||arguments.length!==x+1)){var v=this._state,g=this._velocity,y=v.length-this.dimension,p=this.bounds,m=p[0],w=p[1],c=h-f,M=c>1e-6?1/c:0;this._time.push(h);for(var _=x;_>0;--_){var E=arguments[_];v.push(n(m[_-1],w[_-1],v[y++]+E)),g.push(E*M)}}},i.idle=function(h){var f=this.lastT();if(!(h<f)){var x=this.dimension,v=this._state,g=this._velocity,y=v.length-x,p=this.bounds,m=p[0],w=p[1],c=h-f;this._time.push(h);for(var M=x-1;M>=0;--M)v.push(n(m[M],w[M],v[y]+c*g[y])),g.push(0),y+=1}}},7080:function(d){function s(y,p,m,w,c,M){this._color=y,this.key=p,this.value=m,this.left=w,this.right=c,this._count=M}function t(y){return new s(y._color,y.key,y.value,y.left,y.right,y._count)}function o(y,p){return new s(y,p.key,p.value,p.left,p.right,p._count)}function r(y){y._count=1+(y.left?y.left._count:0)+(y.right?y.right._count:0)}function n(y,p){this._compare=y,this.root=p}d.exports=function(y){return new n(y||g,null)};var a=n.prototype;function i(y,p){var m;return p.left&&(m=i(y,p.left))?m:(m=y(p.key,p.value))||(p.right?i(y,p.right):void 0)}function u(y,p,m,w){if(p(y,w.key)<=0){var c;if(w.left&&(c=u(y,p,m,w.left))||(c=m(w.key,w.value)))return c}if(w.right)return u(y,p,m,w.right)}function h(y,p,m,w,c){var M,_=m(y,c.key),E=m(p,c.key);if(_<=0&&(c.left&&(M=h(y,p,m,w,c.left))||E>0&&(M=w(c.key,c.value))))return M;if(E>0&&c.right)return h(y,p,m,w,c.right)}function f(y,p){this.tree=y,this._stack=p}Object.defineProperty(a,"keys",{get:function(){var y=[];return this.forEach(function(p,m){y.push(p)}),y}}),Object.defineProperty(a,"values",{get:function(){var y=[];return this.forEach(function(p,m){y.push(m)}),y}}),Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}}),a.insert=function(y,p){for(var m=this._compare,w=this.root,c=[],M=[];w;){var _=m(y,w.key);c.push(w),M.push(_),w=_<=0?w.left:w.right}c.push(new s(0,y,p,null,null,1));for(var E=c.length-2;E>=0;--E)w=c[E],M[E]<=0?c[E]=new s(w._color,w.key,w.value,c[E+1],w.right,w._count+1):c[E]=new s(w._color,w.key,w.value,w.left,c[E+1],w._count+1);for(E=c.length-1;E>1;--E){var L=c[E-1];if(w=c[E],L._color===1||w._color===1)break;var C=c[E-2];if(C.left===L)if(L.left===w){if(!(O=C.right)||O._color!==0){C._color=0,C.left=L.right,L._color=1,L.right=C,c[E-2]=L,c[E-1]=w,r(C),r(L),E>=3&&((I=c[E-3]).left===C?I.left=L:I.right=L);break}L._color=1,C.right=o(1,O),C._color=0,E-=1}else{if(!(O=C.right)||O._color!==0){L.right=w.left,C._color=0,C.left=w.right,w._color=1,w.left=L,w.right=C,c[E-2]=w,c[E-1]=L,r(C),r(L),r(w),E>=3&&((I=c[E-3]).left===C?I.left=w:I.right=w);break}L._color=1,C.right=o(1,O),C._color=0,E-=1}else if(L.right===w){if(!(O=C.left)||O._color!==0){C._color=0,C.right=L.left,L._color=1,L.left=C,c[E-2]=L,c[E-1]=w,r(C),r(L),E>=3&&((I=c[E-3]).right===C?I.right=L:I.left=L);break}L._color=1,C.left=o(1,O),C._color=0,E-=1}else{var O;if(!(O=C.left)||O._color!==0){var I;L.left=w.right,C._color=0,C.right=w.left,w._color=1,w.right=L,w.left=C,c[E-2]=w,c[E-1]=L,r(C),r(L),r(w),E>=3&&((I=c[E-3]).right===C?I.right=w:I.left=w);break}L._color=1,C.left=o(1,O),C._color=0,E-=1}}return c[0]._color=1,new n(m,c[0])},a.forEach=function(y,p,m){if(this.root)switch(arguments.length){case 1:return i(y,this.root);case 2:return u(p,this._compare,y,this.root);case 3:return this._compare(p,m)>=0?void 0:h(p,m,this._compare,y,this.root)}},Object.defineProperty(a,"begin",{get:function(){for(var y=[],p=this.root;p;)y.push(p),p=p.left;return new f(this,y)}}),Object.defineProperty(a,"end",{get:function(){for(var y=[],p=this.root;p;)y.push(p),p=p.right;return new f(this,y)}}),a.at=function(y){if(y<0)return new f(this,[]);for(var p=this.root,m=[];;){if(m.push(p),p.left){if(y<p.left._count){p=p.left;continue}y-=p.left._count}if(!y)return new f(this,m);if(y-=1,!p.right||y>=p.right._count)break;p=p.right}return new f(this,[])},a.ge=function(y){for(var p=this._compare,m=this.root,w=[],c=0;m;){var M=p(y,m.key);w.push(m),M<=0&&(c=w.length),m=M<=0?m.left:m.right}return w.length=c,new f(this,w)},a.gt=function(y){for(var p=this._compare,m=this.root,w=[],c=0;m;){var M=p(y,m.key);w.push(m),M<0&&(c=w.length),m=M<0?m.left:m.right}return w.length=c,new f(this,w)},a.lt=function(y){for(var p=this._compare,m=this.root,w=[],c=0;m;){var M=p(y,m.key);w.push(m),M>0&&(c=w.length),m=M<=0?m.left:m.right}return w.length=c,new f(this,w)},a.le=function(y){for(var p=this._compare,m=this.root,w=[],c=0;m;){var M=p(y,m.key);w.push(m),M>=0&&(c=w.length),m=M<0?m.left:m.right}return w.length=c,new f(this,w)},a.find=function(y){for(var p=this._compare,m=this.root,w=[];m;){var c=p(y,m.key);if(w.push(m),c===0)return new f(this,w);m=c<=0?m.left:m.right}return new f(this,[])},a.remove=function(y){var p=this.find(y);return p?p.remove():this},a.get=function(y){for(var p=this._compare,m=this.root;m;){var w=p(y,m.key);if(w===0)return m.value;m=w<=0?m.left:m.right}};var x=f.prototype;function v(y,p){y.key=p.key,y.value=p.value,y.left=p.left,y.right=p.right,y._color=p._color,y._count=p._count}function g(y,p){return y<p?-1:y>p?1:0}Object.defineProperty(x,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(x,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),x.clone=function(){return new f(this.tree,this._stack.slice())},x.remove=function(){var y=this._stack;if(y.length===0)return this.tree;var p=new Array(y.length),m=y[y.length-1];p[p.length-1]=new s(m._color,m.key,m.value,m.left,m.right,m._count);for(var w=y.length-2;w>=0;--w)(m=y[w]).left===y[w+1]?p[w]=new s(m._color,m.key,m.value,p[w+1],m.right,m._count):p[w]=new s(m._color,m.key,m.value,m.left,p[w+1],m._count);if((m=p[p.length-1]).left&&m.right){var c=p.length;for(m=m.left;m.right;)p.push(m),m=m.right;var M=p[c-1];for(p.push(new s(m._color,M.key,M.value,m.left,m.right,m._count)),p[c-1].key=m.key,p[c-1].value=m.value,w=p.length-2;w>=c;--w)m=p[w],p[w]=new s(m._color,m.key,m.value,m.left,p[w+1],m._count);p[c-1].left=p[c]}if((m=p[p.length-1])._color===0){var _=p[p.length-2];for(_.left===m?_.left=null:_.right===m&&(_.right=null),p.pop(),w=0;w<p.length;++w)p[w]._count--;return new n(this.tree._compare,p[0])}if(m.left||m.right){for(m.left?v(m,m.left):m.right&&v(m,m.right),m._color=1,w=0;w<p.length-1;++w)p[w]._count--;return new n(this.tree._compare,p[0])}if(p.length===1)return new n(this.tree._compare,null);for(w=0;w<p.length;++w)p[w]._count--;var E=p[p.length-2];return function(L){for(var C,O,I,N,R=L.length-1;R>=0;--R){if(C=L[R],R===0)return void(C._color=1);if((O=L[R-1]).left===C){if((I=O.right).right&&I.right._color===0)return N=(I=O.right=t(I)).right=t(I.right),O.right=I.left,I.left=O,I.right=N,I._color=O._color,C._color=1,O._color=1,N._color=1,r(O),r(I),R>1&&((V=L[R-2]).left===O?V.left=I:V.right=I),void(L[R-1]=I);if(I.left&&I.left._color===0)return N=(I=O.right=t(I)).left=t(I.left),O.right=N.left,I.left=N.right,N.left=O,N.right=I,N._color=O._color,O._color=1,I._color=1,C._color=1,r(O),r(I),r(N),R>1&&((V=L[R-2]).left===O?V.left=N:V.right=N),void(L[R-1]=N);if(I._color===1){if(O._color===0)return O._color=1,void(O.right=o(0,I));O.right=o(0,I);continue}I=t(I),O.right=I.left,I.left=O,I._color=O._color,O._color=0,r(O),r(I),R>1&&((V=L[R-2]).left===O?V.left=I:V.right=I),L[R-1]=I,L[R]=O,R+1<L.length?L[R+1]=C:L.push(C),R+=2}else{if((I=O.left).left&&I.left._color===0)return N=(I=O.left=t(I)).left=t(I.left),O.left=I.right,I.right=O,I.left=N,I._color=O._color,C._color=1,O._color=1,N._color=1,r(O),r(I),R>1&&((V=L[R-2]).right===O?V.right=I:V.left=I),void(L[R-1]=I);if(I.right&&I.right._color===0)return N=(I=O.left=t(I)).right=t(I.right),O.left=N.right,I.right=N.left,N.right=O,N.left=I,N._color=O._color,O._color=1,I._color=1,C._color=1,r(O),r(I),r(N),R>1&&((V=L[R-2]).right===O?V.right=N:V.left=N),void(L[R-1]=N);if(I._color===1){if(O._color===0)return O._color=1,void(O.left=o(0,I));O.left=o(0,I);continue}var V;I=t(I),O.left=I.right,I.right=O,I._color=O._color,O._color=0,r(O),r(I),R>1&&((V=L[R-2]).right===O?V.right=I:V.left=I),L[R-1]=I,L[R]=O,R+1<L.length?L[R+1]=C:L.push(C),R+=2}}}(p),E.left===m?E.left=null:E.right=null,new n(this.tree._compare,p[0])},Object.defineProperty(x,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(x,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(x,"index",{get:function(){var y=0,p=this._stack;if(p.length===0){var m=this.tree.root;return m?m._count:0}p[p.length-1].left&&(y=p[p.length-1].left._count);for(var w=p.length-2;w>=0;--w)p[w+1]===p[w].right&&(++y,p[w].left&&(y+=p[w].left._count));return y},enumerable:!0}),x.next=function(){var y=this._stack;if(y.length!==0){var p=y[y.length-1];if(p.right)for(p=p.right;p;)y.push(p),p=p.left;else for(y.pop();y.length>0&&y[y.length-1].right===p;)p=y[y.length-1],y.pop()}},Object.defineProperty(x,"hasNext",{get:function(){var y=this._stack;if(y.length===0)return!1;if(y[y.length-1].right)return!0;for(var p=y.length-1;p>0;--p)if(y[p-1].left===y[p])return!0;return!1}}),x.update=function(y){var p=this._stack;if(p.length===0)throw new Error("Can't update empty node!");var m=new Array(p.length),w=p[p.length-1];m[m.length-1]=new s(w._color,w.key,y,w.left,w.right,w._count);for(var c=p.length-2;c>=0;--c)(w=p[c]).left===p[c+1]?m[c]=new s(w._color,w.key,w.value,m[c+1],w.right,w._count):m[c]=new s(w._color,w.key,w.value,w.left,m[c+1],w._count);return new n(this.tree._compare,m[0])},x.prev=function(){var y=this._stack;if(y.length!==0){var p=y[y.length-1];if(p.left)for(p=p.left;p;)y.push(p),p=p.right;else for(y.pop();y.length>0&&y[y.length-1].left===p;)p=y[y.length-1],y.pop()}},Object.defineProperty(x,"hasPrev",{get:function(){var y=this._stack;if(y.length===0)return!1;if(y[y.length-1].left)return!0;for(var p=y.length-1;p>0;--p)if(y[p-1].right===y[p])return!0;return!1}})},7453:function(d,s,t){d.exports=function(_,E){var L=new f(_);return L.update(E),L};var o=t(9557),r=t(1681),n=t(1011),a=t(2864),i=t(8468),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function h(_,E){return _[0]=E[0],_[1]=E[1],_[2]=E[2],_}function f(_){this.gl=_,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=n(_)}var x=f.prototype;function v(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}x.update=function(_){function E(J,X,Z){if(Z in _){var Y,W=_[Z],Q=this[Z];(J?Array.isArray(W)&&Array.isArray(W[0]):Array.isArray(W))?this[Z]=Y=[X(W[0]),X(W[1]),X(W[2])]:this[Z]=Y=[X(W),X(W),X(W)];for(var ne=0;ne<3;++ne)if(Y[ne]!==Q[ne])return!0}return!1}_=_||{};var L,C=E.bind(this,!1,Number),O=E.bind(this,!1,Boolean),I=E.bind(this,!1,String),N=E.bind(this,!0,function(J){if(Array.isArray(J)){if(J.length===3)return[+J[0],+J[1],+J[2],1];if(J.length===4)return[+J[0],+J[1],+J[2],+J[3]]}return[0,0,0,1]}),R=!1,V=!1;if("bounds"in _)for(var F=_.bounds,D=0;D<2;++D)for(var U=0;U<3;++U)F[D][U]!==this.bounds[D][U]&&(V=!0),this.bounds[D][U]=F[D][U];if("ticks"in _)for(L=_.ticks,R=!0,this.autoTicks=!1,D=0;D<3;++D)this.tickSpacing[D]=0;else C("tickSpacing")&&(this.autoTicks=!0,V=!0);if(this._firstInit&&("ticks"in _||"tickSpacing"in _||(this.autoTicks=!0),V=!0,R=!0,this._firstInit=!1),V&&this.autoTicks&&(L=i.create(this.bounds,this.tickSpacing),R=!0),R){for(D=0;D<3;++D)L[D].sort(function(J,X){return J.x-X.x});i.equal(L,this.ticks)?R=!1:this.ticks=L}O("tickEnable"),I("tickFont")&&(R=!0),C("tickSize"),C("tickAngle"),C("tickPad"),N("tickColor");var j=I("labels");I("labelFont")&&(j=!0),O("labelEnable"),C("labelSize"),C("labelPad"),N("labelColor"),O("lineEnable"),O("lineMirror"),C("lineWidth"),N("lineColor"),O("lineTickEnable"),O("lineTickMirror"),C("lineTickLength"),C("lineTickWidth"),N("lineTickColor"),O("gridEnable"),C("gridWidth"),N("gridColor"),O("zeroEnable"),N("zeroLineColor"),C("zeroLineWidth"),O("backgroundEnable"),N("backgroundColor"),this._text?this._text&&(j||R)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=o(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&R&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=r(this.gl,this.bounds,this.ticks))};var g=[new v,new v,new v];function y(_,E,L,C,O){for(var I=_.primalOffset,N=_.primalMinor,R=_.mirrorOffset,V=_.mirrorMinor,F=C[E],D=0;D<3;++D)if(E!==D){var U=I,j=R,J=N,X=V;F&1<<D&&(U=R,j=I,J=V,X=N),U[D]=L[0][D],j[D]=L[1][D],O[D]>0?(J[D]=-1,X[D]=0):(J[D]=0,X[D]=1)}}var p=[0,0,0],m={model:u,view:u,projection:u,_ortho:!1};x.isOpaque=function(){return!0},x.isTransparent=function(){return!1},x.drawTransparent=function(_){};var w=[0,0,0],c=[0,0,0],M=[0,0,0];x.draw=function(_){_=_||m;for(var E=this.gl,L=_.model||u,C=_.view||u,O=_.projection||u,I=this.bounds,N=_._ortho||!1,R=a(L,C,O,I,N),V=R.cubeEdges,F=R.axis,D=C[12],U=C[13],j=C[14],J=C[15],X=(N?2:1)*this.pixelRatio*(O[3]*D+O[7]*U+O[11]*j+O[15]*J)/E.drawingBufferHeight,Z=0;Z<3;++Z)this.lastCubeProps.cubeEdges[Z]=V[Z],this.lastCubeProps.axis[Z]=F[Z];var Y=g;for(Z=0;Z<3;++Z)y(g[Z],Z,this.bounds,V,F);E=this.gl;var W,Q,ne,re=p;for(Z=0;Z<3;++Z)this.backgroundEnable[Z]?re[Z]=F[Z]:re[Z]=0;for(this._background.draw(L,C,O,I,re,this.backgroundColor),this._lines.bind(L,C,O,this),Z=0;Z<3;++Z){var ie=[0,0,0];F[Z]>0?ie[Z]=I[1][Z]:ie[Z]=I[0][Z];for(var se=0;se<2;++se){var ge=(Z+1+se)%3,ue=(Z+1+(1^se))%3;this.gridEnable[ge]&&this._lines.drawGrid(ge,ue,this.bounds,ie,this.gridColor[ge],this.gridWidth[ge]*this.pixelRatio)}for(se=0;se<2;++se)ge=(Z+1+se)%3,ue=(Z+1+(1^se))%3,this.zeroEnable[ue]&&Math.min(I[0][ue],I[1][ue])<=0&&Math.max(I[0][ue],I[1][ue])>=0&&this._lines.drawZero(ge,ue,this.bounds,ie,this.zeroLineColor[ue],this.zeroLineWidth[ue]*this.pixelRatio)}for(Z=0;Z<3;++Z){this.lineEnable[Z]&&this._lines.drawAxisLine(Z,this.bounds,Y[Z].primalOffset,this.lineColor[Z],this.lineWidth[Z]*this.pixelRatio),this.lineMirror[Z]&&this._lines.drawAxisLine(Z,this.bounds,Y[Z].mirrorOffset,this.lineColor[Z],this.lineWidth[Z]*this.pixelRatio);var ce=h(w,Y[Z].primalMinor),le=h(c,Y[Z].mirrorMinor),de=this.lineTickLength;for(se=0;se<3;++se){var Ce=X/L[5*se];ce[se]*=de[se]*Ce,le[se]*=de[se]*Ce}this.lineTickEnable[Z]&&this._lines.drawAxisTicks(Z,Y[Z].primalOffset,ce,this.lineTickColor[Z],this.lineTickWidth[Z]*this.pixelRatio),this.lineTickMirror[Z]&&this._lines.drawAxisTicks(Z,Y[Z].mirrorOffset,le,this.lineTickColor[Z],this.lineTickWidth[Z]*this.pixelRatio)}function xe(pe){(ne=[0,0,0])[pe]=1}function _e(pe,ye,ke){var De=(pe+1)%3,Pe=(pe+2)%3,Re=ye[De],fe=ye[Pe],ve=ke[De],Te=ke[Pe];Re>0&&Te>0||Re>0&&Te<0||Re<0&&Te>0||Re<0&&Te<0?xe(De):(fe>0&&ve>0||fe>0&&ve<0||fe<0&&ve>0||fe<0&&ve<0)&&xe(Pe)}for(this._lines.unbind(),this._text.bind(L,C,O,this.pixelRatio),Z=0;Z<3;++Z){var we=Y[Z].primalMinor,Ae=Y[Z].mirrorMinor,$=h(M,Y[Z].primalOffset);for(se=0;se<3;++se)this.lineTickEnable[Z]&&($[se]+=X*we[se]*Math.max(this.lineTickLength[se],0)/L[5*se]);var oe=[0,0,0];if(oe[Z]=1,this.tickEnable[Z]){for(this.tickAngle[Z]===-3600?(this.tickAngle[Z]=0,this.tickAlign[Z]="auto"):this.tickAlign[Z]=-1,Q=1,(W=[this.tickAlign[Z],.5,Q])[0]==="auto"?W[0]=0:W[0]=parseInt(""+W[0]),ne=[0,0,0],_e(Z,we,Ae),se=0;se<3;++se)$[se]+=X*we[se]*this.tickPad[se]/L[5*se];this._text.drawTicks(Z,this.tickSize[Z],this.tickAngle[Z],$,this.tickColor[Z],oe,ne,W)}if(this.labelEnable[Z]){for(Q=0,ne=[0,0,0],this.labels[Z].length>4&&(xe(Z),Q=1),(W=[this.labelAlign[Z],.5,Q])[0]==="auto"?W[0]=0:W[0]=parseInt(""+W[0]),se=0;se<3;++se)$[se]+=X*we[se]*this.labelPad[se]/L[5*se];$[Z]+=.5*(I[0][Z]+I[1][Z]),this._text.drawLabel(Z,this.labelSize[Z],this.labelAngle[Z],$,this.labelColor[Z],[0,0,0],ne,W)}}this._text.unbind()},x.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},1011:function(d,s,t){d.exports=function(u){for(var h=[],f=[],x=0,v=0;v<3;++v)for(var g=(v+1)%3,y=(v+2)%3,p=[0,0,0],m=[0,0,0],w=-1;w<=1;w+=2){f.push(x,x+2,x+1,x+1,x+2,x+3),p[v]=w,m[v]=w;for(var c=-1;c<=1;c+=2){p[g]=c;for(var M=-1;M<=1;M+=2)p[y]=M,h.push(p[0],p[1],p[2],m[0],m[1],m[2]),x+=1}var _=g;g=y,y=_}var E=o(u,new Float32Array(h)),L=o(u,new Uint16Array(f),u.ELEMENT_ARRAY_BUFFER),C=r(u,[{buffer:E,type:u.FLOAT,size:3,offset:0,stride:24},{buffer:E,type:u.FLOAT,size:3,offset:12,stride:24}],L),O=n(u);return O.attributes.position.location=0,O.attributes.normal.location=1,new a(u,E,C,O)};var o=t(5827),r=t(2944),n=t(1943).bg;function a(u,h,f,x){this.gl=u,this.buffer=h,this.vao=f,this.shader=x}var i=a.prototype;i.draw=function(u,h,f,x,v,g){for(var y=!1,p=0;p<3;++p)y=y||v[p];if(y){var m=this.gl;m.enable(m.POLYGON_OFFSET_FILL),m.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:u,view:h,projection:f,bounds:x,enable:v,colors:g},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),m.disable(m.POLYGON_OFFSET_FILL)}},i.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},2864:function(d,s,t){d.exports=function(c,M,_,E,L){r(i,M,c),r(i,_,i);for(var C=0,O=0;O<2;++O){f[2]=E[O][2];for(var I=0;I<2;++I){f[1]=E[I][1];for(var N=0;N<2;++N)f[0]=E[N][0],v(u[C],f,i),C+=1}}var R=-1;for(O=0;O<8;++O){for(var V=u[O][3],F=0;F<3;++F)h[O][F]=u[O][F]/V;L&&(h[O][2]*=-1),V<0&&(R<0||h[O][2]<h[R][2])&&(R=O)}if(R<0){R=0;for(var D=0;D<3;++D){for(var U=(D+2)%3,j=(D+1)%3,J=-1,X=-1,Z=0;Z<2;++Z){var Y=(Q=Z<<D)+(Z<<U)+(1-Z<<j),W=Q+(1-Z<<U)+(Z<<j);a(h[Q],h[Y],h[W],x)<0||(Z?J=1:X=1)}if(J<0||X<0)X>J&&(R|=1<<D);else{for(Z=0;Z<2;++Z){Y=(Q=Z<<D)+(Z<<U)+(1-Z<<j),W=Q+(1-Z<<U)+(Z<<j);var Q,ne=y([u[Q],u[Y],u[W],u[Q+(1<<U)+(1<<j)]]);Z?J=ne:X=ne}X>J&&(R|=1<<D)}}}var re=7^R,ie=-1;for(O=0;O<8;++O)O!==R&&O!==re&&(ie<0||h[ie][1]>h[O][1])&&(ie=O);var se=-1;for(O=0;O<3;++O)(ue=ie^1<<O)!==R&&ue!==re&&(se<0&&(se=ue),(j=h[ue])[0]<h[se][0]&&(se=ue));var ge=-1;for(O=0;O<3;++O){var ue;(ue=ie^1<<O)!==R&&ue!==re&&ue!==se&&(ge<0&&(ge=ue),(j=h[ue])[0]>h[ge][0]&&(ge=ue))}var ce=p;ce[0]=ce[1]=ce[2]=0,ce[o.log2(se^ie)]=ie&se,ce[o.log2(ie^ge)]=ie&ge;var le=7^ge;le===R||le===re?(le=7^se,ce[o.log2(ge^le)]=le&ge):ce[o.log2(se^le)]=le&se;var de=m,Ce=R;for(D=0;D<3;++D)de[D]=Ce&1<<D?-1:1;return w};var o=t(2288),r=t(104),n=t(4670),a=t(417),i=new Array(16),u=new Array(8),h=new Array(8),f=new Array(3),x=[0,0,0];function v(c,M,_){for(var E=0;E<4;++E){c[E]=_[12+E];for(var L=0;L<3;++L)c[E]+=M[L]*_[4*L+E]}}(function(){for(var c=0;c<8;++c)u[c]=[1,1,1,1],h[c]=[1,1,1]})();var g=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function y(c){for(var M=0;M<g.length;++M)if((c=n.positive(c,g[M])).length<3)return 0;var _=c[0],E=_[0]/_[3],L=_[1]/_[3],C=0;for(M=1;M+1<c.length;++M){var O=c[M],I=c[M+1],N=O[0]/O[3]-E,R=O[1]/O[3]-L,V=I[0]/I[3]-E,F=I[1]/I[3]-L;C+=Math.abs(N*F-R*V)}return C}var p=[1,1,1],m=[0,0,0],w={cubeEdges:p,axis:m}},1681:function(d,s,t){d.exports=function(p,m,w){var c=[],M=[0,0,0],_=[0,0,0],E=[0,0,0],L=[0,0,0];c.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var C=0;C<3;++C){for(var O=c.length/3|0,I=0;I<w[C].length;++I){var N=+w[C][I].x;c.push(N,0,1,N,1,1,N,0,-1,N,0,-1,N,1,1,N,1,-1)}var R=c.length/3|0;M[C]=O,_[C]=R-O,O=c.length/3|0;for(var V=0;V<w[C].length;++V)N=+w[C][V].x,c.push(N,0,1,N,1,1,N,0,-1,N,0,-1,N,1,1,N,1,-1);R=c.length/3|0,E[C]=O,L[C]=R-O}var F=o(p,new Float32Array(c)),D=r(p,[{buffer:F,type:p.FLOAT,size:3,stride:0,offset:0}]),U=n(p);return U.attributes.position.location=0,new g(p,F,D,U,_,M,L,E)};var o=t(5827),r=t(2944),n=t(1943).j,a=[0,0,0],i=[0,0,0],u=[0,0,0],h=[0,0,0],f=[1,1];function x(p){return p[0]=p[1]=p[2]=0,p}function v(p,m){return p[0]=m[0],p[1]=m[1],p[2]=m[2],p}function g(p,m,w,c,M,_,E,L){this.gl=p,this.vertBuffer=m,this.vao=w,this.shader=c,this.tickCount=M,this.tickOffset=_,this.gridCount=E,this.gridOffset=L}var y=g.prototype;y.bind=function(p,m,w){this.shader.bind(),this.shader.uniforms.model=p,this.shader.uniforms.view=m,this.shader.uniforms.projection=w,f[0]=this.gl.drawingBufferWidth,f[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=f,this.vao.bind()},y.unbind=function(){this.vao.unbind()},y.drawAxisLine=function(p,m,w,c,M){var _=x(i);this.shader.uniforms.majorAxis=i,_[p]=m[1][p]-m[0][p],this.shader.uniforms.minorAxis=_;var E,L=v(h,w);L[p]+=m[0][p],this.shader.uniforms.offset=L,this.shader.uniforms.lineWidth=M,this.shader.uniforms.color=c,(E=x(u))[(p+2)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6),(E=x(u))[(p+1)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6)},y.drawAxisTicks=function(p,m,w,c,M){if(this.tickCount[p]){var _=x(a);_[p]=1,this.shader.uniforms.majorAxis=_,this.shader.uniforms.offset=m,this.shader.uniforms.minorAxis=w,this.shader.uniforms.color=c,this.shader.uniforms.lineWidth=M;var E=x(u);E[p]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[p],this.tickOffset[p])}},y.drawGrid=function(p,m,w,c,M,_){if(this.gridCount[p]){var E=x(i);E[m]=w[1][m]-w[0][m],this.shader.uniforms.minorAxis=E;var L=v(h,c);L[m]+=w[0][m],this.shader.uniforms.offset=L;var C=x(a);C[p]=1,this.shader.uniforms.majorAxis=C;var O=x(u);O[p]=1,this.shader.uniforms.screenAxis=O,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=M,this.vao.draw(this.gl.TRIANGLES,this.gridCount[p],this.gridOffset[p])}},y.drawZero=function(p,m,w,c,M,_){var E=x(i);this.shader.uniforms.majorAxis=E,E[p]=w[1][p]-w[0][p],this.shader.uniforms.minorAxis=E;var L=v(h,c);L[p]+=w[0][p],this.shader.uniforms.offset=L;var C=x(u);C[m]=1,this.shader.uniforms.screenAxis=C,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=M,this.vao.draw(this.gl.TRIANGLES,6)},y.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1943:function(d,s,t){var o=t(6832),r=t(5158),n=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),a=o([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.j=function(x){return r(x,n,a,null,[{name:"position",type:"vec3"}])};var i=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),u=o([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.f=function(x){return r(x,i,u,null,[{name:"position",type:"vec3"}])};var h=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),f=o([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);s.bg=function(x){return r(x,h,f,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},9557:function(d,s,t){d.exports=function(v,g,y,p,m,w){var c=o(v),M=r(v,[{buffer:c,size:3}]),_=a(v);_.attributes.position.location=0;var E=new h(v,_,c,M);return E.update(g,y,p,m,w),E};var o=t(5827),r=t(2944),n=t(875),a=t(1943).f,i=window||k.global||{},u=i.__TEXT_CACHE||{};function h(v,g,y,p){this.gl=v,this.shader=g,this.buffer=y,this.vao=p,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}i.__TEXT_CACHE={};var f=h.prototype,x=[0,0];f.bind=function(v,g,y,p){this.vao.bind(),this.shader.bind();var m=this.shader.uniforms;m.model=v,m.view=g,m.projection=y,m.pixelScale=p,x[0]=this.gl.drawingBufferWidth,x[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=x},f.unbind=function(){this.vao.unbind()},f.update=function(v,g,y,p,m){var w=[];function c(N,R,V,F,D,U){var j=u[V];j||(j=u[V]={});var J=j[R];J||(J=j[R]=function(se,ge){try{return n(se,ge)}catch(ue){return console.warn('error vectorizing text:"'+se+'" error:',ue),{cells:[],positions:[]}}}(R,{triangles:!0,font:V,textAlign:"center",textBaseline:"middle",lineSpacing:D,styletags:U}));for(var X=(F||12)/12,Z=J.positions,Y=J.cells,W=0,Q=Y.length;W<Q;++W)for(var ne=Y[W],re=2;re>=0;--re){var ie=Z[ne[re]];w.push(X*ie[0],-X*ie[1],N)}}for(var M=[0,0,0],_=[0,0,0],E=[0,0,0],L=[0,0,0],C={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},O=0;O<3;++O){E[O]=w.length/3|0,c(.5*(v[0][O]+v[1][O]),g[O],y[O],12,1.25,C),L[O]=(w.length/3|0)-E[O],M[O]=w.length/3|0;for(var I=0;I<p[O].length;++I)p[O][I].text&&c(p[O][I].x,p[O][I].text,p[O][I].font||m,p[O][I].fontSize||12,1.25,C);_[O]=(w.length/3|0)-M[O]}this.buffer.update(w),this.tickOffset=M,this.tickCount=_,this.labelOffset=E,this.labelCount=L},f.drawTicks=function(v,g,y,p,m,w,c,M){this.tickCount[v]&&(this.shader.uniforms.axis=w,this.shader.uniforms.color=m,this.shader.uniforms.angle=y,this.shader.uniforms.scale=g,this.shader.uniforms.offset=p,this.shader.uniforms.alignDir=c,this.shader.uniforms.alignOpt=M,this.vao.draw(this.gl.TRIANGLES,this.tickCount[v],this.tickOffset[v]))},f.drawLabel=function(v,g,y,p,m,w,c,M){this.labelCount[v]&&(this.shader.uniforms.axis=w,this.shader.uniforms.color=m,this.shader.uniforms.angle=y,this.shader.uniforms.scale=g,this.shader.uniforms.offset=p,this.shader.uniforms.alignDir=c,this.shader.uniforms.alignOpt=M,this.vao.draw(this.gl.TRIANGLES,this.labelCount[v],this.labelOffset[v]))},f.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},8468:function(d,s){function t(o,r){var n=o+"",a=n.indexOf("."),i=0;a>=0&&(i=n.length-a-1);var u=Math.pow(10,i),h=Math.round(o*r*u),f=h+"";if(f.indexOf("e")>=0)return f;var x=h/u,v=h%u;h<0?(x=0|-Math.ceil(x),v=0|-v):(x=0|Math.floor(x),v|=0);var g=""+x;if(h<0&&(g="-"+g),i){for(var y=""+v;y.length<i;)y="0"+y;return g+"."+y}return g}s.create=function(o,r){for(var n=[],a=0;a<3;++a){for(var i=[],u=(o[0][a],o[1][a],0);u*r[a]<=o[1][a];++u)i.push({x:u*r[a],text:t(r[a],u)});for(u=-1;u*r[a]>=o[0][a];--u)i.push({x:u*r[a],text:t(r[a],u)});n.push(i)}return n},s.equal=function(o,r){for(var n=0;n<3;++n){if(o[n].length!==r[n].length)return!1;for(var a=0;a<o[n].length;++a){var i=o[n][a],u=r[n][a];if(i.x!==u.x||i.text!==u.text||i.font!==u.font||i.fontColor!==u.fontColor||i.fontSize!==u.fontSize||i.dx!==u.dx||i.dy!==u.dy)return!1}}return!0}},2771:function(d,s,t){d.exports=function(w,c,M,_,E){var L=c.model||h,C=c.view||h,O=c.projection||h,I=c._ortho||!1,N=w.bounds,R=(E=E||n(L,C,O,N,I)).axis;a(f,C,L),a(f,O,f);for(var V=p,F=0;F<3;++F)V[F].lo=1/0,V[F].hi=-1/0,V[F].pixelsPerDataUnit=1/0;var D=o(i(f,f));i(f,f);for(var U=0;U<3;++U){var j=(U+1)%3,J=(U+2)%3,X=m;e:for(F=0;F<2;++F){var Z=[];if(R[U]<0!=!!F){X[U]=N[F][U];for(var Y=0;Y<2;++Y){X[j]=N[Y^F][j];for(var W=0;W<2;++W)X[J]=N[W^Y^F][J],Z.push(X.slice())}var Q=I?5:4;for(Y=Q;Y===Q;++Y){if(Z.length===0)continue e;Z=r.positive(Z,D[Y])}for(Y=0;Y<Z.length;++Y){J=Z[Y];var ne=y(m,f,J,M,_);for(W=0;W<3;++W)V[W].lo=Math.min(V[W].lo,J[W]),V[W].hi=Math.max(V[W].hi,J[W]),W!==U&&(V[W].pixelsPerDataUnit=Math.min(V[W].pixelsPerDataUnit,Math.abs(ne[W])))}}}}return V};var o=t(5795),r=t(4670),n=t(2864),a=t(104),i=t(2142),u=t(6342),h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),f=new Float32Array(16);function x(w,c,M){this.lo=w,this.hi=c,this.pixelsPerDataUnit=M}var v=[0,0,0,1],g=[0,0,0,1];function y(w,c,M,_,E){for(var L=0;L<3;++L){for(var C=v,O=g,I=0;I<3;++I)O[I]=C[I]=M[I];O[3]=C[3]=1,O[L]+=1,u(O,O,c),O[3]<0&&(w[L]=1/0),C[L]-=1,u(C,C,c),C[3]<0&&(w[L]=1/0);var N=(C[0]/C[3]-O[0]/O[3])*_,R=(C[1]/C[3]-O[1]/O[3])*E;w[L]=.25*Math.sqrt(N*N+R*R)}return w}var p=[new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0)],m=[0,0,0]},5827:function(d,s,t){var o=t(5306),r=t(7498),n=t(5050),a=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function i(x,v,g,y,p){this.gl=x,this.type=v,this.handle=g,this.length=y,this.usage=p}var u=i.prototype;function h(x,v,g,y,p,m){var w=p.length*p.BYTES_PER_ELEMENT;if(m<0)return x.bufferData(v,p,y),w;if(w+m>g)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return x.bufferSubData(v,m,p),g}function f(x,v){for(var g=o.malloc(x.length,v),y=x.length,p=0;p<y;++p)g[p]=x[p];return g}u.bind=function(){this.gl.bindBuffer(this.type,this.handle)},u.unbind=function(){this.gl.bindBuffer(this.type,null)},u.dispose=function(){this.gl.deleteBuffer(this.handle)},u.update=function(x,v){if(typeof v!="number"&&(v=-1),this.bind(),typeof x=="object"&&x.shape!==void 0){var g=x.dtype;if(a.indexOf(g)<0&&(g="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(g=gl.getExtension("OES_element_index_uint")&&g!=="uint16"?"uint32":"uint16"),g===x.dtype&&function(w,c){for(var M=1,_=c.length-1;_>=0;--_){if(c[_]!==M)return!1;M*=w[_]}return!0}(x.shape,x.stride))x.offset===0&&x.data.length===x.shape[0]?this.length=h(this.gl,this.type,this.length,this.usage,x.data,v):this.length=h(this.gl,this.type,this.length,this.usage,x.data.subarray(x.offset,x.shape[0]),v);else{var y=o.malloc(x.size,g),p=n(y,x.shape);r.assign(p,x),this.length=h(this.gl,this.type,this.length,this.usage,v<0?y:y.subarray(0,x.size),v),o.free(y)}}else if(Array.isArray(x)){var m;m=this.type===this.gl.ELEMENT_ARRAY_BUFFER?f(x,"uint16"):f(x,"float32"),this.length=h(this.gl,this.type,this.length,this.usage,v<0?m:m.subarray(0,x.length),v),o.free(m)}else if(typeof x=="object"&&typeof x.length=="number")this.length=h(this.gl,this.type,this.length,this.usage,x,v);else{if(typeof x!="number"&&x!==void 0)throw new Error("gl-buffer: Invalid data type");if(v>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(x|=0)<=0&&(x=1),this.gl.bufferData(this.type,0|x,this.usage),this.length=x}},d.exports=function(x,v,g,y){if(g=g||x.ARRAY_BUFFER,y=y||x.DYNAMIC_DRAW,g!==x.ARRAY_BUFFER&&g!==x.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(y!==x.DYNAMIC_DRAW&&y!==x.STATIC_DRAW&&y!==x.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var p=x.createBuffer(),m=new i(x,g,p,0,y);return m.update(v),m}},1140:function(d,s,t){var o=t(2858);d.exports=function(n,a){var i=n.positions,u=n.vectors,h={positions:[],vertexIntensity:[],vertexIntensityBounds:n.vertexIntensityBounds,vectors:[],cells:[],coneOffset:n.coneOffset,colormap:n.colormap};if(n.positions.length===0)return a&&(a[0]=[0,0,0],a[1]=[0,0,0]),h;for(var f=0,x=1/0,v=-1/0,g=1/0,y=-1/0,p=1/0,m=-1/0,w=null,c=null,M=[],_=1/0,E=!1,L=0;L<i.length;L++){var C=i[L];x=Math.min(C[0],x),v=Math.max(C[0],v),g=Math.min(C[1],g),y=Math.max(C[1],y),p=Math.min(C[2],p),m=Math.max(C[2],m);var O=u[L];if(o.length(O)>f&&(f=o.length(O)),L){var I=2*o.distance(w,C)/(o.length(c)+o.length(O));I?(_=Math.min(_,I),E=!1):E=!0}E||(w=C,c=O),M.push(O)}var N=[x,g,p],R=[v,y,m];a&&(a[0]=N,a[1]=R),f===0&&(f=1);var V=1/f;isFinite(_)||(_=1),h.vectorScale=_;var F=n.coneSize||.5;n.absoluteConeSize&&(F=n.absoluteConeSize*V),h.coneScale=F,L=0;for(var D=0;L<i.length;L++)for(var U=(C=i[L])[0],j=C[1],J=C[2],X=M[L],Z=o.length(X)*V,Y=0;Y<8;Y++){h.positions.push([U,j,J,D++]),h.positions.push([U,j,J,D++]),h.positions.push([U,j,J,D++]),h.positions.push([U,j,J,D++]),h.positions.push([U,j,J,D++]),h.positions.push([U,j,J,D++]),h.vectors.push(X),h.vectors.push(X),h.vectors.push(X),h.vectors.push(X),h.vectors.push(X),h.vectors.push(X),h.vertexIntensity.push(Z,Z,Z),h.vertexIntensity.push(Z,Z,Z);var W=h.positions.length;h.cells.push([W-6,W-5,W-4],[W-3,W-2,W-1])}return h};var r=t(7234);d.exports.createMesh=t(5028),d.exports.createConeMesh=function(n,a){return d.exports.createMesh(n,a,{shaders:r,traceType:"cone"})}},5028:function(d,s,t){var o=t(5158),r=t(5827),n=t(2944),a=t(8931),i=t(104),u=t(7437),h=t(5050),f=t(9156),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function v(m,w,c,M,_,E,L,C,O,I,N){this.gl=m,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=w,this.dirty=!0,this.triShader=c,this.pickShader=M,this.trianglePositions=_,this.triangleVectors=E,this.triangleColors=C,this.triangleUVs=O,this.triangleIds=L,this.triangleVAO=I,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=N,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=x,this._view=x,this._projection=x,this._resolution=[1,1]}var g=v.prototype;function y(m,w){var c=o(m,w.meshShader.vertex,w.meshShader.fragment,null,w.meshShader.attributes);return c.attributes.position.location=0,c.attributes.color.location=2,c.attributes.uv.location=3,c.attributes.vector.location=4,c}function p(m,w){var c=o(m,w.pickShader.vertex,w.pickShader.fragment,null,w.pickShader.attributes);return c.attributes.position.location=0,c.attributes.id.location=1,c.attributes.vector.location=4,c}g.isOpaque=function(){return this.opacity>=1},g.isTransparent=function(){return this.opacity<1},g.pickSlots=1,g.setPickBase=function(m){this.pickId=m},g.update=function(m){m=m||{};var w=this.gl;this.dirty=!0,"lightPosition"in m&&(this.lightPosition=m.lightPosition),"opacity"in m&&(this.opacity=m.opacity),"ambient"in m&&(this.ambientLight=m.ambient),"diffuse"in m&&(this.diffuseLight=m.diffuse),"specular"in m&&(this.specularLight=m.specular),"roughness"in m&&(this.roughness=m.roughness),"fresnel"in m&&(this.fresnel=m.fresnel),m.tubeScale!==void 0&&(this.tubeScale=m.tubeScale),m.vectorScale!==void 0&&(this.vectorScale=m.vectorScale),m.coneScale!==void 0&&(this.coneScale=m.coneScale),m.coneOffset!==void 0&&(this.coneOffset=m.coneOffset),m.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=w.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=w.LINEAR,this.texture.setPixels(function(ie){for(var se=f({colormap:ie,nshades:256,format:"rgba"}),ge=new Uint8Array(1024),ue=0;ue<256;++ue){for(var ce=se[ue],le=0;le<3;++le)ge[4*ue+le]=ce[le];ge[4*ue+3]=255*ce[3]}return h(ge,[256,256,4],[4,0,1])}(m.colormap)),this.texture.generateMipmap());var c=m.cells,M=m.positions,_=m.vectors;if(M&&c&&_){var E=[],L=[],C=[],O=[],I=[];this.cells=c,this.positions=M,this.vectors=_;var N=m.meshColor||[1,1,1,1],R=m.vertexIntensity,V=1/0,F=-1/0;if(R)if(m.vertexIntensityBounds)V=+m.vertexIntensityBounds[0],F=+m.vertexIntensityBounds[1];else for(var D=0;D<R.length;++D){var U=R[D];V=Math.min(V,U),F=Math.max(F,U)}else for(D=0;D<M.length;++D)U=M[D][2],V=Math.min(V,U),F=Math.max(F,U);for(this.intensity=R||function(ie){for(var se=ie.length,ge=new Array(se),ue=0;ue<se;++ue)ge[ue]=ie[ue][2];return ge}(M),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],D=0;D<M.length;++D)for(var j=M[D],J=0;J<3;++J)!isNaN(j[J])&&isFinite(j[J])&&(this.bounds[0][J]=Math.min(this.bounds[0][J],j[J]),this.bounds[1][J]=Math.max(this.bounds[1][J],j[J]));var X=0;e:for(D=0;D<c.length;++D){var Z=c[D];if(Z.length===3){for(J=0;J<3;++J){j=M[W=Z[J]];for(var Y=0;Y<3;++Y)if(isNaN(j[Y])||!isFinite(j[Y]))continue e}for(J=0;J<3;++J){var W;j=M[W=Z[2-J]],E.push(j[0],j[1],j[2],j[3]);var Q=_[W];L.push(Q[0],Q[1],Q[2],Q[3]||0);var ne,re=N;re.length===3?C.push(re[0],re[1],re[2],1):C.push(re[0],re[1],re[2],re[3]),ne=R?[(R[W]-V)/(F-V),0]:[(j[2]-V)/(F-V),0],O.push(ne[0],ne[1]),I.push(D)}X+=1}}this.triangleCount=X,this.trianglePositions.update(E),this.triangleVectors.update(L),this.triangleColors.update(C),this.triangleUVs.update(O),this.triangleIds.update(new Uint32Array(I))}},g.drawTransparent=g.draw=function(m){m=m||{};for(var w=this.gl,c=m.model||x,M=m.view||x,_=m.projection||x,E=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],L=0;L<3;++L)E[0][L]=Math.max(E[0][L],this.clipBounds[0][L]),E[1][L]=Math.min(E[1][L],this.clipBounds[1][L]);var C={model:c,view:M,projection:_,inverseModel:x.slice(),clipBounds:E,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};C.inverseModel=u(C.inverseModel,C.model),w.disable(w.CULL_FACE),this.texture.bind(0);var O=new Array(16);for(i(O,C.view,C.model),i(O,C.projection,O),u(O,O),L=0;L<3;++L)C.eyePosition[L]=O[12+L]/O[15];var I=O[15];for(L=0;L<3;++L)I+=this.lightPosition[L]*O[4*L+3];for(L=0;L<3;++L){for(var N=O[12+L],R=0;R<3;++R)N+=O[4*R+L]*this.lightPosition[R];C.lightPosition[L]=N/I}if(this.triangleCount>0){var V=this.triShader;V.bind(),V.uniforms=C,this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},g.drawPick=function(m){m=m||{};for(var w=this.gl,c=m.model||x,M=m.view||x,_=m.projection||x,E=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],L=0;L<3;++L)E[0][L]=Math.max(E[0][L],this.clipBounds[0][L]),E[1][L]=Math.min(E[1][L],this.clipBounds[1][L]);this._model=[].slice.call(c),this._view=[].slice.call(M),this._projection=[].slice.call(_),this._resolution=[w.drawingBufferWidth,w.drawingBufferHeight];var C={model:c,view:M,projection:_,clipBounds:E,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},O=this.pickShader;O.bind(),O.uniforms=C,this.triangleCount>0&&(this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},g.pick=function(m){if(!m||m.id!==this.pickId)return null;var w=m.value[0]+256*m.value[1]+65536*m.value[2],c=this.cells[w],M=this.positions[c[1]].slice(0,3),_={position:M,dataCoordinate:M,index:Math.floor(c[1]/48)};return this.traceType==="cone"?_.index=Math.floor(c[1]/48):this.traceType==="streamtube"&&(_.intensity=this.intensity[c[1]],_.velocity=this.vectors[c[1]].slice(0,3),_.divergence=this.vectors[c[1]][3],_.index=w),_},g.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},d.exports=function(m,w,c){var M=c.shaders;arguments.length===1&&(m=(w=m).gl);var _=y(m,M),E=p(m,M),L=a(m,h(new Uint8Array([255,255,255,255]),[1,1,4]));L.generateMipmap(),L.minFilter=m.LINEAR_MIPMAP_LINEAR,L.magFilter=m.LINEAR;var C=r(m),O=r(m),I=r(m),N=r(m),R=r(m),V=n(m,[{buffer:C,type:m.FLOAT,size:4},{buffer:R,type:m.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:I,type:m.FLOAT,size:4},{buffer:N,type:m.FLOAT,size:2},{buffer:O,type:m.FLOAT,size:4}]),F=new v(m,L,_,E,C,O,R,I,N,V,c.traceType||"cone");return F.update(w),F}},7234:function(d,s,t){var o=t(6832),r=o([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=o([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),a=o([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),i=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},s.pickShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},1950:function(d){d.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},6603:function(d,s,t){var o=t(1950);d.exports=function(r){return o[r]}},3110:function(d,s,t){d.exports=function(v){var g=v.gl,y=o(g),p=r(g,[{buffer:y,type:g.FLOAT,size:3,offset:0,stride:40},{buffer:y,type:g.FLOAT,size:4,offset:12,stride:40},{buffer:y,type:g.FLOAT,size:3,offset:28,stride:40}]),m=n(g);m.attributes.position.location=0,m.attributes.color.location=1,m.attributes.offset.location=2;var w=new i(g,y,p,m);return w.update(v),w};var o=t(5827),r=t(2944),n=t(7667),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function i(v,g,y,p){this.gl=v,this.shader=p,this.buffer=g,this.vao=y,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var u=i.prototype;function h(v,g){for(var y=0;y<3;++y)v[0][y]=Math.min(v[0][y],g[y]),v[1][y]=Math.max(v[1][y],g[y])}u.isOpaque=function(){return!this.hasAlpha},u.isTransparent=function(){return this.hasAlpha},u.drawTransparent=u.draw=function(v){var g=this.gl,y=this.shader.uniforms;this.shader.bind();var p=y.view=v.view||a,m=y.projection=v.projection||a;y.model=v.model||a,y.clipBounds=this.clipBounds,y.opacity=this.opacity;var w=p[12],c=p[13],M=p[14],_=p[15],E=(v._ortho?2:1)*this.pixelRatio*(m[3]*w+m[7]*c+m[11]*M+m[15]*_)/g.drawingBufferHeight;this.vao.bind();for(var L=0;L<3;++L)g.lineWidth(this.lineWidth[L]*this.pixelRatio),y.capSize=this.capSize[L]*E,this.lineCount[L]&&g.drawArrays(g.LINES,this.lineOffset[L],this.lineCount[L]);this.vao.unbind()};var f=function(){for(var v=new Array(3),g=0;g<3;++g){for(var y=[],p=1;p<=2;++p)for(var m=-1;m<=1;m+=2){var w=[0,0,0];w[(p+g)%3]=m,y.push(w)}v[g]=y}return v}();function x(v,g,y,p){for(var m=f[p],w=0;w<m.length;++w){var c=m[w];v.push(g[0],g[1],g[2],y[0],y[1],y[2],y[3],c[0],c[1],c[2])}return m.length}u.update=function(v){"lineWidth"in(v=v||{})&&(this.lineWidth=v.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in v&&(this.capSize=v.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in v&&(this.opacity=+v.opacity,this.opacity<1&&(this.hasAlpha=!0));var g=v.color||[[0,0,0],[0,0,0],[0,0,0]],y=v.position,p=v.error;if(Array.isArray(g[0])||(g=[g,g,g]),y&&p){var m=[],w=y.length,c=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var M=0;M<3;++M){this.lineOffset[M]=c;e:for(var _=0;_<w;++_){for(var E=y[_],L=0;L<3;++L)if(isNaN(E[L])||!isFinite(E[L]))continue e;var C,O=p[_],I=g[M];Array.isArray(I[0])&&(I=g[_]),I.length===3?I=[I[0],I[1],I[2],1]:I.length===4&&(I=[I[0],I[1],I[2],I[3]],!this.hasAlpha&&I[3]<1&&(this.hasAlpha=!0)),isNaN(O[0][M])||isNaN(O[1][M])||(O[0][M]<0&&((C=E.slice())[M]+=O[0][M],m.push(E[0],E[1],E[2],I[0],I[1],I[2],I[3],0,0,0,C[0],C[1],C[2],I[0],I[1],I[2],I[3],0,0,0),h(this.bounds,C),c+=2+x(m,C,I,M)),O[1][M]>0&&((C=E.slice())[M]+=O[1][M],m.push(E[0],E[1],E[2],I[0],I[1],I[2],I[3],0,0,0,C[0],C[1],C[2],I[0],I[1],I[2],I[3],0,0,0),h(this.bounds,C),c+=2+x(m,C,I,M)))}this.lineCount[M]=c-this.lineOffset[M]}this.buffer.update(m)}},u.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},7667:function(d,s,t){var o=t(6832),r=t(5158),n=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),a=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);d.exports=function(i){return r(i,n,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},4234:function(d,s,t){var o=t(8931);d.exports=function(w,c,M,_){r||(r=w.FRAMEBUFFER_UNSUPPORTED,n=w.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,a=w.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,i=w.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var E=w.getExtension("WEBGL_draw_buffers");if(!u&&E&&function(V,F){var D=V.getParameter(F.MAX_COLOR_ATTACHMENTS_WEBGL);u=new Array(D+1);for(var U=0;U<=D;++U){for(var j=new Array(D),J=0;J<U;++J)j[J]=V.COLOR_ATTACHMENT0+J;for(J=U;J<D;++J)j[J]=V.NONE;u[U]=j}}(w,E),Array.isArray(c)&&(_=M,M=0|c[1],c=0|c[0]),typeof c!="number")throw new Error("gl-fbo: Missing shape parameter");var L=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(c<0||c>L||M<0||M>L)throw new Error("gl-fbo: Parameters are too large for FBO");var C=1;if("color"in(_=_||{})){if((C=Math.max(0|_.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(C>1){if(!E)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(C>w.getParameter(E.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+C+" draw buffers")}}var O=w.UNSIGNED_BYTE,I=w.getExtension("OES_texture_float");if(_.float&&C>0){if(!I)throw new Error("gl-fbo: Context does not support floating point textures");O=w.FLOAT}else _.preferFloat&&C>0&&I&&(O=w.FLOAT);var N=!0;"depth"in _&&(N=!!_.depth);var R=!1;return"stencil"in _&&(R=!!_.stencil),new y(w,c,M,O,C,N,R,E)};var r,n,a,i,u=null;function h(w){return[w.getParameter(w.FRAMEBUFFER_BINDING),w.getParameter(w.RENDERBUFFER_BINDING),w.getParameter(w.TEXTURE_BINDING_2D)]}function f(w,c){w.bindFramebuffer(w.FRAMEBUFFER,c[0]),w.bindRenderbuffer(w.RENDERBUFFER,c[1]),w.bindTexture(w.TEXTURE_2D,c[2])}function x(w){switch(w){case r:throw new Error("gl-fbo: Framebuffer unsupported");case n:throw new Error("gl-fbo: Framebuffer incomplete attachment");case a:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case i:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function v(w,c,M,_,E,L){if(!_)return null;var C=o(w,c,M,E,_);return C.magFilter=w.NEAREST,C.minFilter=w.NEAREST,C.mipSamples=1,C.bind(),w.framebufferTexture2D(w.FRAMEBUFFER,L,w.TEXTURE_2D,C.handle,0),C}function g(w,c,M,_,E){var L=w.createRenderbuffer();return w.bindRenderbuffer(w.RENDERBUFFER,L),w.renderbufferStorage(w.RENDERBUFFER,_,c,M),w.framebufferRenderbuffer(w.FRAMEBUFFER,E,w.RENDERBUFFER,L),L}function y(w,c,M,_,E,L,C,O){this.gl=w,this._shape=[0|c,0|M],this._destroyed=!1,this._ext=O,this.color=new Array(E);for(var I=0;I<E;++I)this.color[I]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=_,this._useDepth=L,this._useStencil=C;var N=this,R=[0|c,0|M];Object.defineProperties(R,{0:{get:function(){return N._shape[0]},set:function(V){return N.width=V}},1:{get:function(){return N._shape[1]},set:function(V){return N.height=V}}}),this._shapeVector=R,function(V){var F=h(V.gl),D=V.gl,U=V.handle=D.createFramebuffer(),j=V._shape[0],J=V._shape[1],X=V.color.length,Z=V._ext,Y=V._useStencil,W=V._useDepth,Q=V._colorType;D.bindFramebuffer(D.FRAMEBUFFER,U);for(var ne=0;ne<X;++ne)V.color[ne]=v(D,j,J,Q,D.RGBA,D.COLOR_ATTACHMENT0+ne);X===0?(V._color_rb=g(D,j,J,D.RGBA4,D.COLOR_ATTACHMENT0),Z&&Z.drawBuffersWEBGL(u[0])):X>1&&Z.drawBuffersWEBGL(u[X]);var re=D.getExtension("WEBGL_depth_texture");re?Y?V.depth=v(D,j,J,re.UNSIGNED_INT_24_8_WEBGL,D.DEPTH_STENCIL,D.DEPTH_STENCIL_ATTACHMENT):W&&(V.depth=v(D,j,J,D.UNSIGNED_SHORT,D.DEPTH_COMPONENT,D.DEPTH_ATTACHMENT)):W&&Y?V._depth_rb=g(D,j,J,D.DEPTH_STENCIL,D.DEPTH_STENCIL_ATTACHMENT):W?V._depth_rb=g(D,j,J,D.DEPTH_COMPONENT16,D.DEPTH_ATTACHMENT):Y&&(V._depth_rb=g(D,j,J,D.STENCIL_INDEX,D.STENCIL_ATTACHMENT));var ie=D.checkFramebufferStatus(D.FRAMEBUFFER);if(ie!==D.FRAMEBUFFER_COMPLETE){for(V._destroyed=!0,D.bindFramebuffer(D.FRAMEBUFFER,null),D.deleteFramebuffer(V.handle),V.handle=null,V.depth&&(V.depth.dispose(),V.depth=null),V._depth_rb&&(D.deleteRenderbuffer(V._depth_rb),V._depth_rb=null),ne=0;ne<V.color.length;++ne)V.color[ne].dispose(),V.color[ne]=null;V._color_rb&&(D.deleteRenderbuffer(V._color_rb),V._color_rb=null),f(D,F),x(ie)}f(D,F)}(this)}var p=y.prototype;function m(w,c,M){if(w._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(w._shape[0]!==c||w._shape[1]!==M){var _=w.gl,E=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(c<0||c>E||M<0||M>E)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");w._shape[0]=c,w._shape[1]=M;for(var L=h(_),C=0;C<w.color.length;++C)w.color[C].shape=w._shape;w._color_rb&&(_.bindRenderbuffer(_.RENDERBUFFER,w._color_rb),_.renderbufferStorage(_.RENDERBUFFER,_.RGBA4,w._shape[0],w._shape[1])),w.depth&&(w.depth.shape=w._shape),w._depth_rb&&(_.bindRenderbuffer(_.RENDERBUFFER,w._depth_rb),w._useDepth&&w._useStencil?_.renderbufferStorage(_.RENDERBUFFER,_.DEPTH_STENCIL,w._shape[0],w._shape[1]):w._useDepth?_.renderbufferStorage(_.RENDERBUFFER,_.DEPTH_COMPONENT16,w._shape[0],w._shape[1]):w._useStencil&&_.renderbufferStorage(_.RENDERBUFFER,_.STENCIL_INDEX,w._shape[0],w._shape[1])),_.bindFramebuffer(_.FRAMEBUFFER,w.handle);var O=_.checkFramebufferStatus(_.FRAMEBUFFER);O!==_.FRAMEBUFFER_COMPLETE&&(w.dispose(),f(_,L),x(O)),f(_,L)}}Object.defineProperties(p,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(w){if(Array.isArray(w)||(w=[0|w,0|w]),w.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var c=0|w[0],M=0|w[1];return m(this,c,M),[c,M]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(w){return m(this,w|=0,this._shape[1]),w},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(w){return w|=0,m(this,this._shape[0],w),w},enumerable:!1}}),p.bind=function(){if(!this._destroyed){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,this.handle),w.viewport(0,0,this._shape[0],this._shape[1])}},p.dispose=function(){if(!this._destroyed){this._destroyed=!0;var w=this.gl;w.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(w.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var c=0;c<this.color.length;++c)this.color[c].dispose(),this.color[c]=null;this._color_rb&&(w.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},3530:function(d,s,t){var o=t(8974).sprintf,r=t(6603),n=t(9365),a=t(8008);d.exports=function(i,u,h){var f=n(u)||"of unknown name (see npm glsl-shader-name)",x="unknown type";h!==void 0&&(x=h===r.FRAGMENT_SHADER?"fragment":"vertex");for(var v=o(`Error compiling %s shader %s:
`,x,f),g=o("%s%s",v,i),y=i.split(`
`),p={},m=0;m<y.length;m++){var w=y[m];if(w!==""&&w!=="\0"){var c=parseInt(w.split(":")[2]);if(isNaN(c))throw new Error(o("Could not parse error: %s",w));p[c]=w}}var M=a(u).split(`
`);for(m=0;m<M.length;m++)if((p[m+3]||p[m+2]||p[m+1])&&(v+=M[m]+`
`,p[m+1])){var _=p[m+1];_=_.substr(_.split(":",3).join(":").length+1).trim(),v+=o(`^^^ %s

`,_)}return{long:v.trim(),short:g.trim()}}},6386:function(d,s,t){d.exports=function(g,y){var p=g.gl,m=new h(g,a(p,u.vertex,u.fragment),a(p,u.pickVertex,u.pickFragment),i(p),i(p),i(p),i(p));return m.update(y),g.addObject(m),m};var o=t(5070),r=t(9560),n=t(5306),a=t(5158),i=t(5827),u=t(1292);function h(g,y,p,m,w,c,M){this.plot=g,this.shader=y,this.pickShader=p,this.positionBuffer=m,this.weightBuffer=w,this.colorBuffer=c,this.idBuffer=M,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var f,x=h.prototype,v=[0,0,1,0,0,1,1,0,1,1,0,1];x.draw=(f=[1,0,0,0,1,0,0,0,1],function(){var g=this.plot,y=this.shader,p=this.bounds,m=this.numVertices;if(!(m<=0)){var w=g.gl,c=g.dataBox,M=p[2]-p[0],_=p[3]-p[1],E=c[2]-c[0],L=c[3]-c[1];f[0]=2*M/E,f[4]=2*_/L,f[6]=2*(p[0]-c[0])/E-1,f[7]=2*(p[1]-c[1])/L-1,y.bind();var C=y.uniforms;C.viewTransform=f,C.shape=this.shape;var O=y.attributes;this.positionBuffer.bind(),O.position.pointer(),this.weightBuffer.bind(),O.weight.pointer(w.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),O.color.pointer(w.UNSIGNED_BYTE,!0),w.drawArrays(w.TRIANGLES,0,m)}}),x.drawPick=function(){var g=[1,0,0,0,1,0,0,0,1],y=[0,0,0,0];return function(p){var m=this.plot,w=this.pickShader,c=this.bounds,M=this.numVertices;if(!(M<=0)){var _=m.gl,E=m.dataBox,L=c[2]-c[0],C=c[3]-c[1],O=E[2]-E[0],I=E[3]-E[1];g[0]=2*L/O,g[4]=2*C/I,g[6]=2*(c[0]-E[0])/O-1,g[7]=2*(c[1]-E[1])/I-1;for(var N=0;N<4;++N)y[N]=p>>8*N&255;this.pickOffset=p,w.bind();var R=w.uniforms;R.viewTransform=g,R.pickOffset=y,R.shape=this.shape;var V=w.attributes;return this.positionBuffer.bind(),V.position.pointer(),this.weightBuffer.bind(),V.weight.pointer(_.UNSIGNED_BYTE,!1),this.idBuffer.bind(),V.pickId.pointer(_.UNSIGNED_BYTE,!1),_.drawArrays(_.TRIANGLES,0,M),p+this.shape[0]*this.shape[1]}}}(),x.pick=function(g,y,p){var m=this.pickOffset,w=this.shape[0]*this.shape[1];if(p<m||p>=m+w)return null;var c=p-m,M=this.xData,_=this.yData;return{object:this,pointId:c,dataCoord:[M[c%this.shape[0]],_[c/this.shape[0]|0]]}},x.update=function(g){var y=(g=g||{}).shape||[0,0],p=g.x||r(y[0]),m=g.y||r(y[1]),w=g.z||new Float32Array(y[0]*y[1]),c=g.zsmooth!==!1;this.xData=p,this.yData=m;var M,_,E,L,C=g.colorLevels||[0],O=g.colorValues||[0,0,0,1],I=C.length,N=this.bounds;c?(M=N[0]=p[0],_=N[1]=m[0],E=N[2]=p[p.length-1],L=N[3]=m[m.length-1]):(M=N[0]=p[0]+(p[1]-p[0])/2,_=N[1]=m[0]+(m[1]-m[0])/2,E=N[2]=p[p.length-1]+(p[p.length-1]-p[p.length-2])/2,L=N[3]=m[m.length-1]+(m[m.length-1]-m[m.length-2])/2);var R=1/(E-M),V=1/(L-_),F=y[0],D=y[1];this.shape=[F,D];var U=(c?(F-1)*(D-1):F*D)*(v.length>>>1);this.numVertices=U;for(var j=n.mallocUint8(4*U),J=n.mallocFloat32(2*U),X=n.mallocUint8(2*U),Z=n.mallocUint32(U),Y=0,W=c?F-1:F,Q=c?D-1:D,ne=0;ne<Q;++ne){var re,ie;c?(re=V*(m[ne]-_),ie=V*(m[ne+1]-_)):(re=ne<D-1?V*(m[ne]-(m[ne+1]-m[ne])/2-_):V*(m[ne]-(m[ne]-m[ne-1])/2-_),ie=ne<D-1?V*(m[ne]+(m[ne+1]-m[ne])/2-_):V*(m[ne]+(m[ne]-m[ne-1])/2-_));for(var se=0;se<W;++se){var ge,ue;c?(ge=R*(p[se]-M),ue=R*(p[se+1]-M)):(ge=se<F-1?R*(p[se]-(p[se+1]-p[se])/2-M):R*(p[se]-(p[se]-p[se-1])/2-M),ue=se<F-1?R*(p[se]+(p[se+1]-p[se])/2-M):R*(p[se]+(p[se]-p[se-1])/2-M));for(var ce=0;ce<v.length;ce+=2){var le,de,Ce,xe,_e=v[ce],we=v[ce+1],Ae=w[c?(ne+we)*F+(se+_e):ne*F+se],$=o.le(C,Ae);if($<0)le=O[0],de=O[1],Ce=O[2],xe=O[3];else if($===I-1)le=O[4*I-4],de=O[4*I-3],Ce=O[4*I-2],xe=O[4*I-1];else{var oe=(Ae-C[$])/(C[$+1]-C[$]),pe=1-oe,ye=4*$,ke=4*($+1);le=pe*O[ye]+oe*O[ke],de=pe*O[ye+1]+oe*O[ke+1],Ce=pe*O[ye+2]+oe*O[ke+2],xe=pe*O[ye+3]+oe*O[ke+3]}j[4*Y]=255*le,j[4*Y+1]=255*de,j[4*Y+2]=255*Ce,j[4*Y+3]=255*xe,J[2*Y]=.5*ge+.5*ue,J[2*Y+1]=.5*re+.5*ie,X[2*Y]=_e,X[2*Y+1]=we,Z[Y]=ne*F+se,Y+=1}}}this.positionBuffer.update(J),this.weightBuffer.update(X),this.colorBuffer.update(j),this.idBuffer.update(Z),n.free(J),n.free(j),n.free(X),n.free(Z)},x.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},1292:function(d,s,t){var o=t(6832);d.exports={fragment:o([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:o([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},248:function(d,s,t){var o=t(6832),r=t(5158),n=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),a=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),i=o([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),u=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];s.createShader=function(h){return r(h,n,a,null,u)},s.createPickShader=function(h){return r(h,n,i,null,u)}},6086:function(d,s,t){d.exports=function(M){var _=M.gl||M.scene&&M.scene.gl,E=x(_);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;var L=v(_);L.attributes.position.location=0,L.attributes.nextPosition.location=1,L.attributes.arcLength.location=2,L.attributes.lineWidth.location=3,L.attributes.color.location=4;for(var C=o(_),O=r(_,[{buffer:C,size:3,offset:0,stride:48},{buffer:C,size:3,offset:12,stride:48},{buffer:C,size:1,offset:24,stride:48},{buffer:C,size:1,offset:28,stride:48},{buffer:C,size:4,offset:32,stride:48}]),I=h(new Array(1024),[256,1,4]),N=0;N<1024;++N)I.data[N]=255;var R=n(_,I);R.wrap=_.REPEAT;var V=new w(_,E,L,C,O,R);return V.update(M),V};var o=t(5827),r=t(2944),n=t(8931),a=new Uint8Array(4),i=new Float32Array(a.buffer),u=t(5070),h=t(5050),f=t(248),x=f.createShader,v=f.createPickShader,g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function y(M,_){for(var E=0,L=0;L<3;++L){var C=M[L]-_[L];E+=C*C}return Math.sqrt(E)}function p(M){for(var _=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)_[0][E]=Math.max(M[0][E],_[0][E]),_[1][E]=Math.min(M[1][E],_[1][E]);return _}function m(M,_,E,L){this.arcLength=M,this.position=_,this.index=E,this.dataCoordinate=L}function w(M,_,E,L,C,O){this.gl=M,this.shader=_,this.pickShader=E,this.buffer=L,this.vao=C,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=O,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var c=w.prototype;c.isTransparent=function(){return this.hasAlpha},c.isOpaque=function(){return!this.hasAlpha},c.pickSlots=1,c.setPickBase=function(M){this.pickId=M},c.drawTransparent=c.draw=function(M){if(this.vertexCount){var _=this.gl,E=this.shader,L=this.vao;E.bind(),E.uniforms={model:M.model||g,view:M.view||g,projection:M.projection||g,clipBounds:p(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(_.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},c.drawPick=function(M){if(this.vertexCount){var _=this.gl,E=this.pickShader,L=this.vao;E.bind(),E.uniforms={model:M.model||g,view:M.view||g,projection:M.projection||g,pickId:this.pickId,clipBounds:p(this.clipBounds),screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(_.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},c.update=function(M){var _,E;this.dirty=!0;var L=!!M.connectGaps;"dashScale"in M&&(this.dashScale=M.dashScale),this.hasAlpha=!1,"opacity"in M&&(this.opacity=+M.opacity,this.opacity<1&&(this.hasAlpha=!0));var C=[],O=[],I=[],N=0,R=0,V=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],F=M.position||M.positions;if(F){var D=M.color||M.colors||[0,0,0,1],U=M.lineWidth||1,j=!1;e:for(_=1;_<F.length;++_){var J,X,Z,Y=F[_-1],W=F[_];for(O.push(N),I.push(Y.slice()),E=0;E<3;++E){if(isNaN(Y[E])||isNaN(W[E])||!isFinite(Y[E])||!isFinite(W[E])){if(!L&&C.length>0){for(var Q=0;Q<24;++Q)C.push(C[C.length-12]);R+=2,j=!0}continue e}V[0][E]=Math.min(V[0][E],Y[E],W[E]),V[1][E]=Math.max(V[1][E],Y[E],W[E])}Array.isArray(D[0])?(J=D.length>_-1?D[_-1]:D.length>0?D[D.length-1]:[0,0,0,1],X=D.length>_?D[_]:D.length>0?D[D.length-1]:[0,0,0,1]):J=X=D,J.length===3&&(J=[J[0],J[1],J[2],1]),X.length===3&&(X=[X[0],X[1],X[2],1]),!this.hasAlpha&&J[3]<1&&(this.hasAlpha=!0),Z=Array.isArray(U)?U.length>_-1?U[_-1]:U.length>0?U[U.length-1]:[0,0,0,1]:U;var ne=N;if(N+=y(Y,W),j){for(E=0;E<2;++E)C.push(Y[0],Y[1],Y[2],W[0],W[1],W[2],ne,Z,J[0],J[1],J[2],J[3]);R+=2,j=!1}C.push(Y[0],Y[1],Y[2],W[0],W[1],W[2],ne,Z,J[0],J[1],J[2],J[3],Y[0],Y[1],Y[2],W[0],W[1],W[2],ne,-Z,J[0],J[1],J[2],J[3],W[0],W[1],W[2],Y[0],Y[1],Y[2],N,-Z,X[0],X[1],X[2],X[3],W[0],W[1],W[2],Y[0],Y[1],Y[2],N,Z,X[0],X[1],X[2],X[3]),R+=4}}if(this.buffer.update(C),O.push(N),I.push(F[F.length-1].slice()),this.bounds=V,this.vertexCount=R,this.points=I,this.arcLength=O,"dashes"in M){var re=M.dashes.slice();for(re.unshift(0),_=1;_<re.length;++_)re[_]=re[_-1]+re[_];var ie=h(new Array(1024),[256,1,4]);for(_=0;_<256;++_){for(E=0;E<4;++E)ie.set(_,0,E,0);1&u.le(re,re[re.length-1]*_/255)?ie.set(_,0,0,0):ie.set(_,0,0,255)}this.texture.setPixels(ie)}},c.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},c.pick=function(M){if(!M||M.id!==this.pickId)return null;var _=function(F,D,U,j){return a[0]=0,a[1]=U,a[2]=D,a[3]=F,i[0]}(M.value[0],M.value[1],M.value[2]),E=u.le(this.arcLength,_);if(E<0)return null;if(E===this.arcLength.length-1)return new m(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),E);for(var L=this.points[E],C=this.points[Math.min(E+1,this.points.length-1)],O=(_-this.arcLength[E])/(this.arcLength[E+1]-this.arcLength[E]),I=1-O,N=[0,0,0],R=0;R<3;++R)N[R]=I*L[R]+O*C[R];var V=Math.min(O<.5?E:E+1,this.points.length-1);return new m(_,N,V,this.points[V])}},7332:function(d){d.exports=function(s){var t=new Float32Array(16);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t}},9823:function(d){d.exports=function(){var s=new Float32Array(16);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7787:function(d){d.exports=function(s){var t=s[0],o=s[1],r=s[2],n=s[3],a=s[4],i=s[5],u=s[6],h=s[7],f=s[8],x=s[9],v=s[10],g=s[11],y=s[12],p=s[13],m=s[14],w=s[15];return(t*i-o*a)*(v*w-g*m)-(t*u-r*a)*(x*w-g*p)+(t*h-n*a)*(x*m-v*p)+(o*u-r*i)*(f*w-g*y)-(o*h-n*i)*(f*m-v*y)+(r*h-n*u)*(f*p-x*y)}},5950:function(d){d.exports=function(s,t){var o=t[0],r=t[1],n=t[2],a=t[3],i=o+o,u=r+r,h=n+n,f=o*i,x=r*i,v=r*u,g=n*i,y=n*u,p=n*h,m=a*i,w=a*u,c=a*h;return s[0]=1-v-p,s[1]=x+c,s[2]=g-w,s[3]=0,s[4]=x-c,s[5]=1-f-p,s[6]=y+m,s[7]=0,s[8]=g+w,s[9]=y-m,s[10]=1-f-v,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7280:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=t[3],u=r+r,h=n+n,f=a+a,x=r*u,v=r*h,g=r*f,y=n*h,p=n*f,m=a*f,w=i*u,c=i*h,M=i*f;return s[0]=1-(y+m),s[1]=v+M,s[2]=g-c,s[3]=0,s[4]=v-M,s[5]=1-(x+m),s[6]=p+w,s[7]=0,s[8]=g+c,s[9]=p-w,s[10]=1-(x+y),s[11]=0,s[12]=o[0],s[13]=o[1],s[14]=o[2],s[15]=1,s}},9947:function(d){d.exports=function(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7437:function(d){d.exports=function(s,t){var o=t[0],r=t[1],n=t[2],a=t[3],i=t[4],u=t[5],h=t[6],f=t[7],x=t[8],v=t[9],g=t[10],y=t[11],p=t[12],m=t[13],w=t[14],c=t[15],M=o*u-r*i,_=o*h-n*i,E=o*f-a*i,L=r*h-n*u,C=r*f-a*u,O=n*f-a*h,I=x*m-v*p,N=x*w-g*p,R=x*c-y*p,V=v*w-g*m,F=v*c-y*m,D=g*c-y*w,U=M*D-_*F+E*V+L*R-C*N+O*I;return U?(U=1/U,s[0]=(u*D-h*F+f*V)*U,s[1]=(n*F-r*D-a*V)*U,s[2]=(m*O-w*C+c*L)*U,s[3]=(g*C-v*O-y*L)*U,s[4]=(h*R-i*D-f*N)*U,s[5]=(o*D-n*R+a*N)*U,s[6]=(w*E-p*O-c*_)*U,s[7]=(x*O-g*E+y*_)*U,s[8]=(i*F-u*R+f*I)*U,s[9]=(r*R-o*F-a*I)*U,s[10]=(p*C-m*E+c*M)*U,s[11]=(v*E-x*C-y*M)*U,s[12]=(u*N-i*V-h*I)*U,s[13]=(o*V-r*N+n*I)*U,s[14]=(m*_-p*L-w*M)*U,s[15]=(x*L-v*_+g*M)*U,s):null}},3012:function(d,s,t){var o=t(9947);d.exports=function(r,n,a,i){var u,h,f,x,v,g,y,p,m,w,c=n[0],M=n[1],_=n[2],E=i[0],L=i[1],C=i[2],O=a[0],I=a[1],N=a[2];return Math.abs(c-O)<1e-6&&Math.abs(M-I)<1e-6&&Math.abs(_-N)<1e-6?o(r):(y=c-O,p=M-I,m=_-N,u=L*(m*=w=1/Math.sqrt(y*y+p*p+m*m))-C*(p*=w),h=C*(y*=w)-E*m,f=E*p-L*y,(w=Math.sqrt(u*u+h*h+f*f))?(u*=w=1/w,h*=w,f*=w):(u=0,h=0,f=0),x=p*f-m*h,v=m*u-y*f,g=y*h-p*u,(w=Math.sqrt(x*x+v*v+g*g))?(x*=w=1/w,v*=w,g*=w):(x=0,v=0,g=0),r[0]=u,r[1]=x,r[2]=y,r[3]=0,r[4]=h,r[5]=v,r[6]=p,r[7]=0,r[8]=f,r[9]=g,r[10]=m,r[11]=0,r[12]=-(u*c+h*M+f*_),r[13]=-(x*c+v*M+g*_),r[14]=-(y*c+p*M+m*_),r[15]=1,r)}},104:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=t[3],u=t[4],h=t[5],f=t[6],x=t[7],v=t[8],g=t[9],y=t[10],p=t[11],m=t[12],w=t[13],c=t[14],M=t[15],_=o[0],E=o[1],L=o[2],C=o[3];return s[0]=_*r+E*u+L*v+C*m,s[1]=_*n+E*h+L*g+C*w,s[2]=_*a+E*f+L*y+C*c,s[3]=_*i+E*x+L*p+C*M,_=o[4],E=o[5],L=o[6],C=o[7],s[4]=_*r+E*u+L*v+C*m,s[5]=_*n+E*h+L*g+C*w,s[6]=_*a+E*f+L*y+C*c,s[7]=_*i+E*x+L*p+C*M,_=o[8],E=o[9],L=o[10],C=o[11],s[8]=_*r+E*u+L*v+C*m,s[9]=_*n+E*h+L*g+C*w,s[10]=_*a+E*f+L*y+C*c,s[11]=_*i+E*x+L*p+C*M,_=o[12],E=o[13],L=o[14],C=o[15],s[12]=_*r+E*u+L*v+C*m,s[13]=_*n+E*h+L*g+C*w,s[14]=_*a+E*f+L*y+C*c,s[15]=_*i+E*x+L*p+C*M,s}},5268:function(d){d.exports=function(s,t,o,r,n,a,i){var u=1/(t-o),h=1/(r-n),f=1/(a-i);return s[0]=-2*u,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*h,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*f,s[11]=0,s[12]=(t+o)*u,s[13]=(n+r)*h,s[14]=(i+a)*f,s[15]=1,s}},1120:function(d){d.exports=function(s,t,o,r,n){var a=1/Math.tan(t/2),i=1/(r-n);return s[0]=a/o,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=a,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=(n+r)*i,s[11]=-1,s[12]=0,s[13]=0,s[14]=2*n*r*i,s[15]=0,s}},4422:function(d){d.exports=function(s,t,o,r){var n,a,i,u,h,f,x,v,g,y,p,m,w,c,M,_,E,L,C,O,I,N,R,V,F=r[0],D=r[1],U=r[2],j=Math.sqrt(F*F+D*D+U*U);return Math.abs(j)<1e-6?null:(F*=j=1/j,D*=j,U*=j,n=Math.sin(o),i=1-(a=Math.cos(o)),u=t[0],h=t[1],f=t[2],x=t[3],v=t[4],g=t[5],y=t[6],p=t[7],m=t[8],w=t[9],c=t[10],M=t[11],_=F*F*i+a,E=D*F*i+U*n,L=U*F*i-D*n,C=F*D*i-U*n,O=D*D*i+a,I=U*D*i+F*n,N=F*U*i+D*n,R=D*U*i-F*n,V=U*U*i+a,s[0]=u*_+v*E+m*L,s[1]=h*_+g*E+w*L,s[2]=f*_+y*E+c*L,s[3]=x*_+p*E+M*L,s[4]=u*C+v*O+m*I,s[5]=h*C+g*O+w*I,s[6]=f*C+y*O+c*I,s[7]=x*C+p*O+M*I,s[8]=u*N+v*R+m*V,s[9]=h*N+g*R+w*V,s[10]=f*N+y*R+c*V,s[11]=x*N+p*R+M*V,t!==s&&(s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s)}},6109:function(d){d.exports=function(s,t,o){var r=Math.sin(o),n=Math.cos(o),a=t[4],i=t[5],u=t[6],h=t[7],f=t[8],x=t[9],v=t[10],g=t[11];return t!==s&&(s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[4]=a*n+f*r,s[5]=i*n+x*r,s[6]=u*n+v*r,s[7]=h*n+g*r,s[8]=f*n-a*r,s[9]=x*n-i*r,s[10]=v*n-u*r,s[11]=g*n-h*r,s}},7115:function(d){d.exports=function(s,t,o){var r=Math.sin(o),n=Math.cos(o),a=t[0],i=t[1],u=t[2],h=t[3],f=t[8],x=t[9],v=t[10],g=t[11];return t!==s&&(s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=a*n-f*r,s[1]=i*n-x*r,s[2]=u*n-v*r,s[3]=h*n-g*r,s[8]=a*r+f*n,s[9]=i*r+x*n,s[10]=u*r+v*n,s[11]=h*r+g*n,s}},5240:function(d){d.exports=function(s,t,o){var r=Math.sin(o),n=Math.cos(o),a=t[0],i=t[1],u=t[2],h=t[3],f=t[4],x=t[5],v=t[6],g=t[7];return t!==s&&(s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=a*n+f*r,s[1]=i*n+x*r,s[2]=u*n+v*r,s[3]=h*n+g*r,s[4]=f*n-a*r,s[5]=x*n-i*r,s[6]=v*n-u*r,s[7]=g*n-h*r,s}},3668:function(d){d.exports=function(s,t,o){var r=o[0],n=o[1],a=o[2];return s[0]=t[0]*r,s[1]=t[1]*r,s[2]=t[2]*r,s[3]=t[3]*r,s[4]=t[4]*n,s[5]=t[5]*n,s[6]=t[6]*n,s[7]=t[7]*n,s[8]=t[8]*a,s[9]=t[9]*a,s[10]=t[10]*a,s[11]=t[11]*a,s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s}},998:function(d){d.exports=function(s,t,o){var r,n,a,i,u,h,f,x,v,g,y,p,m=o[0],w=o[1],c=o[2];return t===s?(s[12]=t[0]*m+t[4]*w+t[8]*c+t[12],s[13]=t[1]*m+t[5]*w+t[9]*c+t[13],s[14]=t[2]*m+t[6]*w+t[10]*c+t[14],s[15]=t[3]*m+t[7]*w+t[11]*c+t[15]):(r=t[0],n=t[1],a=t[2],i=t[3],u=t[4],h=t[5],f=t[6],x=t[7],v=t[8],g=t[9],y=t[10],p=t[11],s[0]=r,s[1]=n,s[2]=a,s[3]=i,s[4]=u,s[5]=h,s[6]=f,s[7]=x,s[8]=v,s[9]=g,s[10]=y,s[11]=p,s[12]=r*m+u*w+v*c+t[12],s[13]=n*m+h*w+g*c+t[13],s[14]=a*m+f*w+y*c+t[14],s[15]=i*m+x*w+p*c+t[15]),s}},2142:function(d){d.exports=function(s,t){if(s===t){var o=t[1],r=t[2],n=t[3],a=t[6],i=t[7],u=t[11];s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=o,s[6]=t[9],s[7]=t[13],s[8]=r,s[9]=a,s[11]=t[14],s[12]=n,s[13]=i,s[14]=u}else s[0]=t[0],s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=t[1],s[5]=t[5],s[6]=t[9],s[7]=t[13],s[8]=t[2],s[9]=t[6],s[10]=t[10],s[11]=t[14],s[12]=t[3],s[13]=t[7],s[14]=t[11],s[15]=t[15];return s}},4340:function(d,s,t){var o=t(957),r=t(7309);function n(u,h){for(var f=[0,0,0,0],x=0;x<4;++x)for(var v=0;v<4;++v)f[v]+=u[4*x+v]*h[x];return f}function a(u,h,f,x,v){for(var g=n(x,n(f,n(h,[u[0],u[1],u[2],1]))),y=0;y<3;++y)g[y]/=g[3];return[.5*v[0]*(1+g[0]),.5*v[1]*(1-g[1])]}function i(u,h){for(var f=[0,0,0],x=0;x<u.length;++x)for(var v=u[x],g=h[x],y=0;y<3;++y)f[y]+=g*v[y];return f}d.exports=function(u,h,f,x,v,g){if(u.length===1)return[0,u[0].slice()];for(var y=new Array(u.length),p=0;p<u.length;++p)y[p]=a(u[p],f,x,v,g);var m=0,w=1/0;for(p=0;p<y.length;++p){for(var c=0,M=0;M<2;++M)c+=Math.pow(y[p][M]-h[M],2);c<w&&(w=c,m=p)}var _=function(L,C){if(L.length===2){for(var O=0,I=0,N=0;N<2;++N)O+=Math.pow(C[N]-L[0][N],2),I+=Math.pow(C[N]-L[1][N],2);return(O=Math.sqrt(O))+(I=Math.sqrt(I))<1e-6?[1,0]:[I/(O+I),O/(I+O)]}if(L.length===3){var R=[0,0];return r(L[0],L[1],L[2],C,R),o(L,R)}return[]}(y,h),E=0;for(p=0;p<3;++p){if(_[p]<-.001||_[p]>1.0001)return null;E+=_[p]}return Math.abs(E-1)>.001?null:[m,i(u,_),_]}},2056:function(d,s,t){var o=t(6832),r=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),n=o([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),a=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),i=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),u=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),h=o([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),f=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),x=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),v=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),g=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),y=o([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.wireShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.pointShader={vertex:u,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},s.pickShader={vertex:f,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},s.pointPickShader={vertex:v,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},s.contourShader={vertex:g,fragment:y,attributes:[{name:"position",type:"vec3"}]}},8116:function(d,s,t){var o=t(5158),r=t(5827),n=t(2944),a=t(8931),i=t(115),u=t(104),h=t(7437),f=t(5050),x=t(9156),v=t(7212),g=t(5306),y=t(2056),p=t(4340),m=y.meshShader,w=y.wireShader,c=y.pointShader,M=y.pickShader,_=y.pointPickShader,E=y.contourShader,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function C(j,J,X,Z,Y,W,Q,ne,re,ie,se,ge,ue,ce,le,de,Ce,xe,_e,we,Ae,$,oe,pe,ye,ke,De){this.gl=j,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=J,this.dirty=!0,this.triShader=X,this.lineShader=Z,this.pointShader=Y,this.pickShader=W,this.pointPickShader=Q,this.contourShader=ne,this.trianglePositions=re,this.triangleColors=se,this.triangleNormals=ue,this.triangleUVs=ge,this.triangleIds=ie,this.triangleVAO=ce,this.triangleCount=0,this.lineWidth=1,this.edgePositions=le,this.edgeColors=Ce,this.edgeUVs=xe,this.edgeIds=de,this.edgeVAO=_e,this.edgeCount=0,this.pointPositions=we,this.pointColors=$,this.pointUVs=oe,this.pointSizes=pe,this.pointIds=Ae,this.pointVAO=ye,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=ke,this.contourVAO=De,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=L,this._view=L,this._projection=L,this._resolution=[1,1]}var O=C.prototype;function I(j,J){if(!J||!J.length)return 1;for(var X=0;X<J.length;++X){if(J.length<2)return 1;if(J[X][0]===j)return J[X][1];if(J[X][0]>j&&X>0){var Z=(J[X][0]-j)/(J[X][0]-J[X-1][0]);return J[X][1]*(1-Z)+Z*J[X-1][1]}}return 1}function N(j){var J=o(j,m.vertex,m.fragment);return J.attributes.position.location=0,J.attributes.color.location=2,J.attributes.uv.location=3,J.attributes.normal.location=4,J}function R(j){var J=o(j,w.vertex,w.fragment);return J.attributes.position.location=0,J.attributes.color.location=2,J.attributes.uv.location=3,J}function V(j){var J=o(j,c.vertex,c.fragment);return J.attributes.position.location=0,J.attributes.color.location=2,J.attributes.uv.location=3,J.attributes.pointSize.location=4,J}function F(j){var J=o(j,M.vertex,M.fragment);return J.attributes.position.location=0,J.attributes.id.location=1,J}function D(j){var J=o(j,_.vertex,_.fragment);return J.attributes.position.location=0,J.attributes.id.location=1,J.attributes.pointSize.location=4,J}function U(j){var J=o(j,E.vertex,E.fragment);return J.attributes.position.location=0,J}O.isOpaque=function(){return!this.hasAlpha},O.isTransparent=function(){return this.hasAlpha},O.pickSlots=1,O.setPickBase=function(j){this.pickId=j},O.highlight=function(j){if(j&&this.contourEnable){for(var J=v(this.cells,this.intensity,j.intensity),X=J.cells,Z=J.vertexIds,Y=J.vertexWeights,W=X.length,Q=g.mallocFloat32(6*W),ne=0,re=0;re<W;++re)for(var ie=X[re],se=0;se<2;++se){var ge=ie[0];ie.length===2&&(ge=ie[se]);for(var ue=Z[ge][0],ce=Z[ge][1],le=Y[ge],de=1-le,Ce=this.positions[ue],xe=this.positions[ce],_e=0;_e<3;++_e)Q[ne++]=le*Ce[_e]+de*xe[_e]}this.contourCount=ne/3|0,this.contourPositions.update(Q.subarray(0,ne)),g.free(Q)}else this.contourCount=0},O.update=function(j){j=j||{};var J=this.gl;this.dirty=!0,"contourEnable"in j&&(this.contourEnable=j.contourEnable),"contourColor"in j&&(this.contourColor=j.contourColor),"lineWidth"in j&&(this.lineWidth=j.lineWidth),"lightPosition"in j&&(this.lightPosition=j.lightPosition),this.hasAlpha=!1,"opacity"in j&&(this.opacity=j.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in j&&(this.opacityscale=j.opacityscale,this.hasAlpha=!0),"ambient"in j&&(this.ambientLight=j.ambient),"diffuse"in j&&(this.diffuseLight=j.diffuse),"specular"in j&&(this.specularLight=j.specular),"roughness"in j&&(this.roughness=j.roughness),"fresnel"in j&&(this.fresnel=j.fresnel),j.texture?(this.texture.dispose(),this.texture=a(J,j.texture)):j.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=J.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=J.LINEAR,this.texture.setPixels(function(zt,Ze){for(var Ye=x({colormap:zt,nshades:256,format:"rgba"}),je=new Uint8Array(1024),Ke=0;Ke<256;++Ke){for(var st=Ye[Ke],Se=0;Se<3;++Se)je[4*Ke+Se]=st[Se];je[4*Ke+3]=Ze?255*I(Ke/255,Ze):255*st[3]}return f(je,[256,256,4],[4,0,1])}(j.colormap,this.opacityscale)),this.texture.generateMipmap());var X=j.cells,Z=j.positions;if(Z&&X){var Y=[],W=[],Q=[],ne=[],re=[],ie=[],se=[],ge=[],ue=[],ce=[],le=[],de=[],Ce=[],xe=[];this.cells=X,this.positions=Z;var _e=j.vertexNormals,we=j.cellNormals,Ae=j.vertexNormalsEpsilon===void 0?1e-6:j.vertexNormalsEpsilon,$=j.faceNormalsEpsilon===void 0?1e-6:j.faceNormalsEpsilon;j.useFacetNormals&&!we&&(we=i.faceNormals(X,Z,$)),we||_e||(_e=i.vertexNormals(X,Z,Ae));var oe=j.vertexColors,pe=j.cellColors,ye=j.meshColor||[1,1,1,1],ke=j.vertexUVs,De=j.vertexIntensity,Pe=j.cellUVs,Re=j.cellIntensity,fe=1/0,ve=-1/0;if(!ke&&!Pe)if(De)if(j.vertexIntensityBounds)fe=+j.vertexIntensityBounds[0],ve=+j.vertexIntensityBounds[1];else for(var Te=0;Te<De.length;++Te){var ze=De[Te];fe=Math.min(fe,ze),ve=Math.max(ve,ze)}else if(Re)if(j.cellIntensityBounds)fe=+j.cellIntensityBounds[0],ve=+j.cellIntensityBounds[1];else for(Te=0;Te<Re.length;++Te)ze=Re[Te],fe=Math.min(fe,ze),ve=Math.max(ve,ze);else for(Te=0;Te<Z.length;++Te)ze=Z[Te][2],fe=Math.min(fe,ze),ve=Math.max(ve,ze);this.intensity=De||Re||function(zt){for(var Ze=zt.length,Ye=new Array(Ze),je=0;je<Ze;++je)Ye[je]=zt[je][2];return Ye}(Z),this.pickVertex=!(Re||pe);var He=j.pointSizes,Ve=j.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Te=0;Te<Z.length;++Te)for(var nt=Z[Te],tt=0;tt<3;++tt)!isNaN(nt[tt])&&isFinite(nt[tt])&&(this.bounds[0][tt]=Math.min(this.bounds[0][tt],nt[tt]),this.bounds[1][tt]=Math.max(this.bounds[1][tt],nt[tt]));var ot=0,pt=0,Tt=0;e:for(Te=0;Te<X.length;++Te){var yt=X[Te];switch(yt.length){case 1:for(nt=Z[Pt=yt[0]],tt=0;tt<3;++tt)if(isNaN(nt[tt])||!isFinite(nt[tt]))continue e;ce.push(nt[0],nt[1],nt[2]),Et=oe?oe[Pt]:pe?pe[Te]:ye,this.opacityscale&&De?W.push(Et[0],Et[1],Et[2],this.opacity*I((De[Pt]-fe)/(ve-fe),this.opacityscale)):Et.length===3?le.push(Et[0],Et[1],Et[2],this.opacity):(le.push(Et[0],Et[1],Et[2],Et[3]*this.opacity),Et[3]<1&&(this.hasAlpha=!0)),Ot=ke?ke[Pt]:De?[(De[Pt]-fe)/(ve-fe),0]:Pe?Pe[Te]:Re?[(Re[Te]-fe)/(ve-fe),0]:[(nt[2]-fe)/(ve-fe),0],de.push(Ot[0],Ot[1]),He?Ce.push(He[Pt]):Ce.push(Ve),xe.push(Te),Tt+=1;break;case 2:for(tt=0;tt<2;++tt){nt=Z[Pt=yt[tt]];for(var dt=0;dt<3;++dt)if(isNaN(nt[dt])||!isFinite(nt[dt]))continue e}for(tt=0;tt<2;++tt)nt=Z[Pt=yt[tt]],ie.push(nt[0],nt[1],nt[2]),Et=oe?oe[Pt]:pe?pe[Te]:ye,this.opacityscale&&De?W.push(Et[0],Et[1],Et[2],this.opacity*I((De[Pt]-fe)/(ve-fe),this.opacityscale)):Et.length===3?se.push(Et[0],Et[1],Et[2],this.opacity):(se.push(Et[0],Et[1],Et[2],Et[3]*this.opacity),Et[3]<1&&(this.hasAlpha=!0)),Ot=ke?ke[Pt]:De?[(De[Pt]-fe)/(ve-fe),0]:Pe?Pe[Te]:Re?[(Re[Te]-fe)/(ve-fe),0]:[(nt[2]-fe)/(ve-fe),0],ge.push(Ot[0],Ot[1]),ue.push(Te);pt+=1;break;case 3:for(tt=0;tt<3;++tt)for(nt=Z[Pt=yt[tt]],dt=0;dt<3;++dt)if(isNaN(nt[dt])||!isFinite(nt[dt]))continue e;for(tt=0;tt<3;++tt){var Pt,Et,Ot,Nt;nt=Z[Pt=yt[2-tt]],Y.push(nt[0],nt[1],nt[2]),(Et=oe?oe[Pt]:pe?pe[Te]:ye)?this.opacityscale&&De?W.push(Et[0],Et[1],Et[2],this.opacity*I((De[Pt]-fe)/(ve-fe),this.opacityscale)):Et.length===3?W.push(Et[0],Et[1],Et[2],this.opacity):(W.push(Et[0],Et[1],Et[2],Et[3]*this.opacity),Et[3]<1&&(this.hasAlpha=!0)):W.push(.5,.5,.5,1),Ot=ke?ke[Pt]:De?[(De[Pt]-fe)/(ve-fe),0]:Pe?Pe[Te]:Re?[(Re[Te]-fe)/(ve-fe),0]:[(nt[2]-fe)/(ve-fe),0],ne.push(Ot[0],Ot[1]),Nt=_e?_e[Pt]:we[Te],Q.push(Nt[0],Nt[1],Nt[2]),re.push(Te)}ot+=1}}this.pointCount=Tt,this.edgeCount=pt,this.triangleCount=ot,this.pointPositions.update(ce),this.pointColors.update(le),this.pointUVs.update(de),this.pointSizes.update(Ce),this.pointIds.update(new Uint32Array(xe)),this.edgePositions.update(ie),this.edgeColors.update(se),this.edgeUVs.update(ge),this.edgeIds.update(new Uint32Array(ue)),this.trianglePositions.update(Y),this.triangleColors.update(W),this.triangleUVs.update(ne),this.triangleNormals.update(Q),this.triangleIds.update(new Uint32Array(re))}},O.drawTransparent=O.draw=function(j){j=j||{};for(var J=this.gl,X=j.model||L,Z=j.view||L,Y=j.projection||L,W=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],Q=0;Q<3;++Q)W[0][Q]=Math.max(W[0][Q],this.clipBounds[0][Q]),W[1][Q]=Math.min(W[1][Q],this.clipBounds[1][Q]);var ne={model:X,view:Z,projection:Y,inverseModel:L.slice(),clipBounds:W,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};ne.inverseModel=h(ne.inverseModel,ne.model),J.disable(J.CULL_FACE),this.texture.bind(0);var re=new Array(16);for(u(re,ne.view,ne.model),u(re,ne.projection,re),h(re,re),Q=0;Q<3;++Q)ne.eyePosition[Q]=re[12+Q]/re[15];var ie,se=re[15];for(Q=0;Q<3;++Q)se+=this.lightPosition[Q]*re[4*Q+3];for(Q=0;Q<3;++Q){for(var ge=re[12+Q],ue=0;ue<3;++ue)ge+=re[4*ue+Q]*this.lightPosition[ue];ne.lightPosition[Q]=ge/se}this.triangleCount>0&&((ie=this.triShader).bind(),ie.uniforms=ne,this.triangleVAO.bind(),J.drawArrays(J.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((ie=this.lineShader).bind(),ie.uniforms=ne,this.edgeVAO.bind(),J.lineWidth(this.lineWidth*this.pixelRatio),J.drawArrays(J.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ie=this.pointShader).bind(),ie.uniforms=ne,this.pointVAO.bind(),J.drawArrays(J.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((ie=this.contourShader).bind(),ie.uniforms=ne,this.contourVAO.bind(),J.drawArrays(J.LINES,0,this.contourCount),this.contourVAO.unbind())},O.drawPick=function(j){j=j||{};for(var J=this.gl,X=j.model||L,Z=j.view||L,Y=j.projection||L,W=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],Q=0;Q<3;++Q)W[0][Q]=Math.max(W[0][Q],this.clipBounds[0][Q]),W[1][Q]=Math.min(W[1][Q],this.clipBounds[1][Q]);this._model=[].slice.call(X),this._view=[].slice.call(Z),this._projection=[].slice.call(Y),this._resolution=[J.drawingBufferWidth,J.drawingBufferHeight];var ne,re={model:X,view:Z,projection:Y,clipBounds:W,pickId:this.pickId/255};(ne=this.pickShader).bind(),ne.uniforms=re,this.triangleCount>0&&(this.triangleVAO.bind(),J.drawArrays(J.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),J.lineWidth(this.lineWidth*this.pixelRatio),J.drawArrays(J.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ne=this.pointPickShader).bind(),ne.uniforms=re,this.pointVAO.bind(),J.drawArrays(J.POINTS,0,this.pointCount),this.pointVAO.unbind())},O.pick=function(j){if(!j||j.id!==this.pickId)return null;for(var J=j.value[0]+256*j.value[1]+65536*j.value[2],X=this.cells[J],Z=this.positions,Y=new Array(X.length),W=0;W<X.length;++W)Y[W]=Z[X[W]];var Q=j.coord[0],ne=j.coord[1];if(!this.pickVertex){var re=this.positions[X[0]],ie=this.positions[X[1]],se=this.positions[X[2]],ge=[(re[0]+ie[0]+se[0])/3,(re[1]+ie[1]+se[1])/3,(re[2]+ie[2]+se[2])/3];return{_cellCenter:!0,position:[Q,ne],index:J,cell:X,cellId:J,intensity:this.intensity[J],dataCoordinate:ge}}var ue=p(Y,[Q*this.pixelRatio,this._resolution[1]-ne*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ue)return null;var ce=ue[2],le=0;for(W=0;W<X.length;++W)le+=ce[W]*this.intensity[X[W]];return{position:ue[1],index:X[ue[0]],cell:X,cellId:J,intensity:le,dataCoordinate:this.positions[X[ue[0]]]}},O.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},d.exports=function(j,J){arguments.length===1&&(j=(J=j).gl);var X=j.getExtension("OES_standard_derivatives")||j.getExtension("MOZ_OES_standard_derivatives")||j.getExtension("WEBKIT_OES_standard_derivatives");if(!X)throw new Error("derivatives not supported");var Z=N(j),Y=R(j),W=V(j),Q=F(j),ne=D(j),re=U(j),ie=a(j,f(new Uint8Array([255,255,255,255]),[1,1,4]));ie.generateMipmap(),ie.minFilter=j.LINEAR_MIPMAP_LINEAR,ie.magFilter=j.LINEAR;var se=r(j),ge=r(j),ue=r(j),ce=r(j),le=r(j),de=n(j,[{buffer:se,type:j.FLOAT,size:3},{buffer:le,type:j.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ge,type:j.FLOAT,size:4},{buffer:ue,type:j.FLOAT,size:2},{buffer:ce,type:j.FLOAT,size:3}]),Ce=r(j),xe=r(j),_e=r(j),we=r(j),Ae=n(j,[{buffer:Ce,type:j.FLOAT,size:3},{buffer:we,type:j.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:xe,type:j.FLOAT,size:4},{buffer:_e,type:j.FLOAT,size:2}]),$=r(j),oe=r(j),pe=r(j),ye=r(j),ke=r(j),De=n(j,[{buffer:$,type:j.FLOAT,size:3},{buffer:ke,type:j.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:oe,type:j.FLOAT,size:4},{buffer:pe,type:j.FLOAT,size:2},{buffer:ye,type:j.FLOAT,size:1}]),Pe=r(j),Re=n(j,[{buffer:Pe,type:j.FLOAT,size:3}]),fe=new C(j,ie,Z,Y,W,Q,ne,re,se,le,ge,ue,ce,de,Ce,we,xe,_e,Ae,$,ke,oe,pe,ye,De,Pe,Re);return fe.update(J),fe}},4554:function(d,s,t){d.exports=function(f){var x=f.gl;return new a(f,o(x,[0,0,0,1,1,0,1,1]),r(x,n.boxVert,n.lineFrag))};var o=t(5827),r=t(5158),n=t(2709);function a(f,x,v){this.plot=f,this.vbo=x,this.shader=v}var i,u,h=a.prototype;h.bind=function(){var f=this.shader;this.vbo.bind(),this.shader.bind(),f.attributes.coord.pointer(),f.uniforms.screenBox=this.plot.screenBox},h.drawBox=(i=[0,0],u=[0,0],function(f,x,v,g,y){var p=this.plot,m=this.shader,w=p.gl;i[0]=f,i[1]=x,u[0]=v,u[1]=g,m.uniforms.lo=i,m.uniforms.hi=u,m.uniforms.color=y,w.drawArrays(w.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3016:function(d,s,t){d.exports=function(p){var m=p.gl;return new i(p,o(m),r(m,a.gridVert,a.gridFrag),r(m,a.tickVert,a.gridFrag))};var o=t(5827),r=t(5158),n=t(5070),a=t(2709);function i(p,m,w,c){this.plot=p,this.vbo=m,this.shader=w,this.tickShader=c,this.ticks=[[],[]]}function u(p,m){return p-m}var h,f,x,v,g,y=i.prototype;y.draw=(h=[0,0],f=[0,0],x=[0,0],function(){for(var p=this.plot,m=this.vbo,w=this.shader,c=this.ticks,M=p.gl,_=p._tickBounds,E=p.dataBox,L=p.viewBox,C=p.gridLineWidth,O=p.gridLineColor,I=p.gridLineEnable,N=p.pixelRatio,R=0;R<2;++R){var V=_[R],F=_[R+2]-V,D=.5*(E[R+2]+E[R]),U=E[R+2]-E[R];f[R]=2*F/U,h[R]=2*(V-D)/U}w.bind(),m.bind(),w.attributes.dataCoord.pointer(),w.uniforms.dataShift=h,w.uniforms.dataScale=f;var j=0;for(R=0;R<2;++R){x[0]=x[1]=0,x[R]=1,w.uniforms.dataAxis=x,w.uniforms.lineWidth=C[R]/(L[R+2]-L[R])*N,w.uniforms.color=O[R];var J=6*c[R].length;I[R]&&J&&M.drawArrays(M.TRIANGLES,j,J),j+=J}}),y.drawTickMarks=function(){var p=[0,0],m=[0,0],w=[1,0],c=[0,1],M=[0,0],_=[0,0];return function(){for(var E=this.plot,L=this.vbo,C=this.tickShader,O=this.ticks,I=E.gl,N=E._tickBounds,R=E.dataBox,V=E.viewBox,F=E.pixelRatio,D=E.screenBox,U=D[2]-D[0],j=D[3]-D[1],J=V[2]-V[0],X=V[3]-V[1],Z=0;Z<2;++Z){var Y=N[Z],W=N[Z+2]-Y,Q=.5*(R[Z+2]+R[Z]),ne=R[Z+2]-R[Z];m[Z]=2*W/ne,p[Z]=2*(Y-Q)/ne}m[0]*=J/U,p[0]*=J/U,m[1]*=X/j,p[1]*=X/j,C.bind(),L.bind(),C.attributes.dataCoord.pointer();var re=C.uniforms;re.dataShift=p,re.dataScale=m;var ie=E.tickMarkLength,se=E.tickMarkWidth,ge=E.tickMarkColor,ue=6*O[0].length,ce=Math.min(n.ge(O[0],(R[0]-N[0])/(N[2]-N[0]),u),O[0].length),le=Math.min(n.gt(O[0],(R[2]-N[0])/(N[2]-N[0]),u),O[0].length),de=0+6*ce,Ce=6*Math.max(0,le-ce),xe=Math.min(n.ge(O[1],(R[1]-N[1])/(N[3]-N[1]),u),O[1].length),_e=Math.min(n.gt(O[1],(R[3]-N[1])/(N[3]-N[1]),u),O[1].length),we=ue+6*xe,Ae=6*Math.max(0,_e-xe);M[0]=2*(V[0]-ie[1])/U-1,M[1]=(V[3]+V[1])/j-1,_[0]=ie[1]*F/U,_[1]=se[1]*F/j,Ae&&(re.color=ge[1],re.tickScale=_,re.dataAxis=c,re.screenOffset=M,I.drawArrays(I.TRIANGLES,we,Ae)),M[0]=(V[2]+V[0])/U-1,M[1]=2*(V[1]-ie[0])/j-1,_[0]=se[0]*F/U,_[1]=ie[0]*F/j,Ce&&(re.color=ge[0],re.tickScale=_,re.dataAxis=w,re.screenOffset=M,I.drawArrays(I.TRIANGLES,de,Ce)),M[0]=2*(V[2]+ie[3])/U-1,M[1]=(V[3]+V[1])/j-1,_[0]=ie[3]*F/U,_[1]=se[3]*F/j,Ae&&(re.color=ge[3],re.tickScale=_,re.dataAxis=c,re.screenOffset=M,I.drawArrays(I.TRIANGLES,we,Ae)),M[0]=(V[2]+V[0])/U-1,M[1]=2*(V[3]+ie[2])/j-1,_[0]=se[2]*F/U,_[1]=ie[2]*F/j,Ce&&(re.color=ge[2],re.tickScale=_,re.dataAxis=w,re.screenOffset=M,I.drawArrays(I.TRIANGLES,de,Ce))}}(),y.update=(v=[1,1,-1,-1,1,-1],g=[1,-1,1,1,-1,-1],function(p){for(var m=p.ticks,w=p.bounds,c=new Float32Array(18*(m[0].length+m[1].length)),M=(this.plot.zeroLineEnable,0),_=[[],[]],E=0;E<2;++E)for(var L=_[E],C=m[E],O=w[E],I=w[E+2],N=0;N<C.length;++N){var R=(C[N].x-O)/(I-O);L.push(R);for(var V=0;V<6;++V)c[M++]=R,c[M++]=v[V],c[M++]=g[V]}this.ticks=_,this.vbo.update(c)}),y.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},1154:function(d,s,t){d.exports=function(f){var x=f.gl;return new a(f,o(x,[-1,-1,-1,1,1,-1,1,1]),r(x,n.lineVert,n.lineFrag))};var o=t(5827),r=t(5158),n=t(2709);function a(f,x,v){this.plot=f,this.vbo=x,this.shader=v}var i,u,h=a.prototype;h.bind=function(){var f=this.shader;this.vbo.bind(),this.shader.bind(),f.attributes.coord.pointer(),f.uniforms.screenBox=this.plot.screenBox},h.drawLine=(i=[0,0],u=[0,0],function(f,x,v,g,y,p){var m=this.plot,w=this.shader,c=m.gl;i[0]=f,i[1]=x,u[0]=v,u[1]=g,w.uniforms.start=i,w.uniforms.end=u,w.uniforms.width=y*m.pixelRatio,w.uniforms.color=p,c.drawArrays(c.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2709:function(d,s,t){var o=t(6832),r=o([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);d.exports={lineVert:o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:r,textVert:o([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:r,gridVert:o([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:r,boxVert:o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:o([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},5613:function(d,s,t){d.exports=function(m){var w=m.gl;return new u(m,o(w),r(w,i.textVert,i.textFrag))};var o=t(5827),r=t(5158),n=t(6946),a=t(5070),i=t(2709);function u(m,w,c){this.plot=m,this.vbo=w,this.shader=c,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var h,f,x,v,g,y,p=u.prototype;p.drawTicks=(h=[0,0],f=[0,0],x=[0,0],function(m){var w=this.plot,c=this.shader,M=this.tickX[m],_=this.tickOffset[m],E=w.gl,L=w.viewBox,C=w.dataBox,O=w.screenBox,I=w.pixelRatio,N=w.tickEnable,R=w.tickPad,V=w.tickColor,F=w.tickAngle,D=w.labelEnable,U=w.labelPad,j=w.labelColor,J=w.labelAngle,X=this.labelOffset[m],Z=this.labelCount[m],Y=a.lt(M,C[m]),W=a.le(M,C[m+2]);h[0]=h[1]=0,h[m]=1,f[m]=(L[2+m]+L[m])/(O[2+m]-O[m])-1;var Q=2/O[2+(1^m)]-O[1^m];f[1^m]=Q*L[1^m]-1,N[m]&&(f[1^m]-=Q*I*R[m],Y<W&&_[W]>_[Y]&&(c.uniforms.dataAxis=h,c.uniforms.screenOffset=f,c.uniforms.color=V[m],c.uniforms.angle=F[m],E.drawArrays(E.TRIANGLES,_[Y],_[W]-_[Y]))),D[m]&&Z&&(f[1^m]-=Q*I*U[m],c.uniforms.dataAxis=x,c.uniforms.screenOffset=f,c.uniforms.color=j[m],c.uniforms.angle=J[m],E.drawArrays(E.TRIANGLES,X,Z)),f[1^m]=Q*L[2+(1^m)]-1,N[m+2]&&(f[1^m]+=Q*I*R[m+2],Y<W&&_[W]>_[Y]&&(c.uniforms.dataAxis=h,c.uniforms.screenOffset=f,c.uniforms.color=V[m+2],c.uniforms.angle=F[m+2],E.drawArrays(E.TRIANGLES,_[Y],_[W]-_[Y]))),D[m+2]&&Z&&(f[1^m]+=Q*I*U[m+2],c.uniforms.dataAxis=x,c.uniforms.screenOffset=f,c.uniforms.color=j[m+2],c.uniforms.angle=J[m+2],E.drawArrays(E.TRIANGLES,X,Z))}),p.drawTitle=function(){var m=[0,0],w=[0,0];return function(){var c=this.plot,M=this.shader,_=c.gl,E=c.screenBox,L=c.titleCenter,C=c.titleAngle,O=c.titleColor,I=c.pixelRatio;if(this.titleCount){for(var N=0;N<2;++N)w[N]=2*(L[N]*I-E[N])/(E[2+N]-E[N])-1;M.bind(),M.uniforms.dataAxis=m,M.uniforms.screenOffset=w,M.uniforms.angle=C,M.uniforms.color=O,_.drawArrays(_.TRIANGLES,this.titleOffset,this.titleCount)}}}(),p.bind=(v=[0,0],g=[0,0],y=[0,0],function(){var m=this.plot,w=this.shader,c=m._tickBounds,M=m.dataBox,_=m.screenBox,E=m.viewBox;w.bind();for(var L=0;L<2;++L){var C=c[L],O=c[L+2]-C,I=.5*(M[L+2]+M[L]),N=M[L+2]-M[L],R=E[L],V=E[L+2]-R,F=_[L],D=_[L+2]-F;g[L]=2*O/N*V/D,v[L]=2*(C-I)/N*V/D}y[1]=2*m.pixelRatio/(_[3]-_[1]),y[0]=y[1]*(_[3]-_[1])/(_[2]-_[0]),w.uniforms.dataScale=g,w.uniforms.dataShift=v,w.uniforms.textScale=y,this.vbo.bind(),w.attributes.textCoordinate.pointer()}),p.update=function(m){var w,c,M,_,E,L=[],C=m.ticks,O=m.bounds;for(E=0;E<2;++E){var I=[Math.floor(L.length/3)],N=[-1/0],R=C[E];for(w=0;w<R.length;++w){var V=R[w],F=V.x,D=V.text,U=V.font||"sans-serif";_=V.fontSize||12;for(var j=1/(O[E+2]-O[E]),J=O[E],X=D.split(`
`),Z=0;Z<X.length;Z++)for(M=n(U,X[Z]).data,c=0;c<M.length;c+=2)L.push(M[c]*_,-M[c+1]*_-Z*_*1.2,(F-J)*j);I.push(Math.floor(L.length/3)),N.push(F)}this.tickOffset[E]=I,this.tickX[E]=N}for(E=0;E<2;++E){for(this.labelOffset[E]=Math.floor(L.length/3),M=n(m.labelFont[E],m.labels[E],{textAlign:"center"}).data,_=m.labelSize[E],w=0;w<M.length;w+=2)L.push(M[w]*_,-M[w+1]*_,0);this.labelCount[E]=Math.floor(L.length/3)-this.labelOffset[E]}for(this.titleOffset=Math.floor(L.length/3),M=n(m.titleFont,m.title).data,_=m.titleSize,w=0;w<M.length;w+=2)L.push(M[w]*_,-M[w+1]*_,0);this.titleCount=Math.floor(L.length/3)-this.titleOffset,this.vbo.update(L)},p.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2117:function(d,s,t){d.exports=function(v){var g=v.gl,y=new u(g,o(g,[g.drawingBufferWidth,g.drawingBufferHeight]));return y.grid=r(y),y.text=n(y),y.line=a(y),y.box=i(y),y.update(v),y};var o=t(2611),r=t(3016),n=t(5613),a=t(1154),i=t(4554);function u(v,g){this.gl=v,this.pickBuffer=g,this.screenBox=[0,0,v.drawingBufferWidth,v.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var h=u.prototype;function f(v){for(var g=v.slice(),y=0;y<g.length;++y)g[y]=g[y].slice();return g}function x(v,g){return v.x-g.x}h.setDirty=function(){this.dirty=this.pickDirty=!0},h.setOverlayDirty=function(){this.dirty=!0},h.nextDepthValue=function(){return this._depthCounter++/65536},h.draw=function(){var v=this.gl,g=this.screenBox,y=this.viewBox,p=this.dataBox,m=this.pixelRatio,w=this.grid,c=this.line,M=this.text,_=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,v.bindFramebuffer(v.FRAMEBUFFER,null),v.enable(v.SCISSOR_TEST),v.disable(v.DEPTH_TEST),v.depthFunc(v.LESS),v.depthMask(!1),v.enable(v.BLEND),v.blendEquation(v.FUNC_ADD,v.FUNC_ADD),v.blendFunc(v.ONE,v.ONE_MINUS_SRC_ALPHA),this.borderColor){v.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]);var E=this.borderColor;v.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),v.clear(v.COLOR_BUFFER_BIT|v.DEPTH_BUFFER_BIT)}v.scissor(y[0],y[1],y[2]-y[0],y[3]-y[1]),v.viewport(y[0],y[1],y[2]-y[0],y[3]-y[1]);var L=this.backgroundColor;v.clearColor(L[0]*L[3],L[1]*L[3],L[2]*L[3],L[3]),v.clear(v.COLOR_BUFFER_BIT),w.draw();var C=this.zeroLineEnable,O=this.zeroLineColor,I=this.zeroLineWidth;if(C[0]||C[1]){c.bind();for(var N=0;N<2;++N)if(C[N]&&p[N]<=0&&p[N+2]>=0){var R=g[N]-p[N]*(g[N+2]-g[N])/(p[N+2]-p[N]);N===0?c.drawLine(R,g[1],R,g[3],I[N],O[N]):c.drawLine(g[0],R,g[2],R,I[N],O[N])}}for(N=0;N<_.length;++N)_[N].draw();v.viewport(g[0],g[1],g[2]-g[0],g[3]-g[1]),v.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]),this.grid.drawTickMarks(),c.bind();var V=this.borderLineEnable,F=this.borderLineWidth,D=this.borderLineColor;for(V[1]&&c.drawLine(y[0],y[1]-.5*F[1]*m,y[0],y[3]+.5*F[3]*m,F[1],D[1]),V[0]&&c.drawLine(y[0]-.5*F[0]*m,y[1],y[2]+.5*F[2]*m,y[1],F[0],D[0]),V[3]&&c.drawLine(y[2],y[1]-.5*F[1]*m,y[2],y[3]+.5*F[3]*m,F[3],D[3]),V[2]&&c.drawLine(y[0]-.5*F[0]*m,y[3],y[2]+.5*F[2]*m,y[3],F[2],D[2]),M.bind(),N=0;N<2;++N)M.drawTicks(N);this.titleEnable&&M.drawTitle();var U=this.overlays;for(N=0;N<U.length;++N)U[N].draw();v.disable(v.SCISSOR_TEST),v.disable(v.BLEND),v.depthMask(!0)}},h.drawPick=function(){if(!this.static){var v=this.pickBuffer;this.gl,this._pickTimeout=null,v.begin();for(var g=1,y=this.objects,p=0;p<y.length;++p)g=y[p].drawPick(g);v.end()}},h.pick=function(v,g){if(!this.static){var y=this.pixelRatio,p=this.pickPixelRatio,m=this.viewBox,w=0|Math.round((v-m[0]/y)*p),c=0|Math.round((g-m[1]/y)*p),M=this.pickBuffer.query(w,c,this.pickRadius);if(!M)return null;for(var _=M.id+(M.value[0]<<8)+(M.value[1]<<16)+(M.value[2]<<24),E=this.objects,L=0;L<E.length;++L){var C=E[L].pick(w,c,_);if(C)return C}return null}},h.setScreenBox=function(v){var g=this.screenBox,y=this.pixelRatio;g[0]=0|Math.round(v[0]*y),g[1]=0|Math.round(v[1]*y),g[2]=0|Math.round(v[2]*y),g[3]=0|Math.round(v[3]*y),this.setDirty()},h.setDataBox=function(v){var g=this.dataBox;(g[0]!==v[0]||g[1]!==v[1]||g[2]!==v[2]||g[3]!==v[3])&&(g[0]=v[0],g[1]=v[1],g[2]=v[2],g[3]=v[3],this.setDirty())},h.setViewBox=function(v){var g=this.pixelRatio,y=this.viewBox;y[0]=0|Math.round(v[0]*g),y[1]=0|Math.round(v[1]*g),y[2]=0|Math.round(v[2]*g),y[3]=0|Math.round(v[3]*g);var p=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((v[2]-v[0])*p),0|Math.round((v[3]-v[1])*p)],this.setDirty()},h.update=function(v){v=v||{};var g=this.gl;this.pixelRatio=v.pixelRatio||1;var y=this.pixelRatio;this.pickPixelRatio=Math.max(y,1),this.setScreenBox(v.screenBox||[0,0,g.drawingBufferWidth/y,g.drawingBufferHeight/y]),this.screenBox,this.setViewBox(v.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/y,.125*(this.screenBox[3]-this.screenBox[1])/y,.875*(this.screenBox[2]-this.screenBox[0])/y,.875*(this.screenBox[3]-this.screenBox[1])/y]);var p=this.viewBox,m=(p[2]-p[0])/(p[3]-p[1]);this.setDataBox(v.dataBox||[-10,-10/m,10,10/m]),this.borderColor=v.borderColor!==!1&&(v.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(v.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(v.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(v.gridLineWidth||[1,1]).slice(),this.gridLineColor=f(v.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(v.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(v.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=f(v.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(v.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(v.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=f(v.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(v.titleCenter||[.5*(p[0]+p[2])/y,(p[3]+120)/y]).slice(),this.titleEnable=!("titleEnable"in v)||!!v.titleEnable,this.titleAngle=v.titleAngle||0,this.titleColor=(v.titleColor||[0,0,0,1]).slice(),this.labelPad=(v.labelPad||[15,15,15,15]).slice(),this.labelAngle=(v.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(v.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=f(v.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(v.tickPad||[15,15,15,15]).slice(),this.tickAngle=(v.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(v.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=f(v.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(v.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(v.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=f(v.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var w=v.ticks||[[],[]],c=this._tickBounds;c[0]=c[1]=1/0,c[2]=c[3]=-1/0;for(var M=0;M<2;++M){var _=w[M].slice(0);_.length!==0&&(_.sort(x),c[M]=Math.min(c[M],_[0].x),c[M+2]=Math.max(c[M+2],_[_.length-1].x))}this.grid.update({bounds:c,ticks:w}),this.text.update({bounds:c,ticks:w,labels:v.labels||["x","y"],labelSize:v.labelSize||[12,12],labelFont:v.labelFont||["sans-serif","sans-serif"],title:v.title||"",titleSize:v.titleSize||18,titleFont:v.titleFont||"sans-serif"}),this.static=!!v.static,this.setDirty()},h.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var v=this.objects.length-1;v>=0;--v)this.objects[v].dispose();for(this.objects.length=0,v=this.overlays.length-1;v>=0;--v)this.overlays[v].dispose();this.overlays.length=0,this.gl=null},h.addObject=function(v){this.objects.indexOf(v)<0&&(this.objects.push(v),this.setDirty())},h.removeObject=function(v){for(var g=this.objects,y=0;y<g.length;++y)if(g[y]===v){g.splice(y,1),this.setDirty();break}},h.addOverlay=function(v){this.overlays.indexOf(v)<0&&(this.overlays.push(v),this.setOverlayDirty())},h.removeOverlay=function(v){for(var g=this.overlays,y=0;y<g.length;++y)if(g[y]===v){g.splice(y,1),this.setOverlayDirty();break}}},4296:function(d,s,t){d.exports=function(h,f){h=h||document.body;var x=[.01,1/0];"distanceLimits"in(f=f||{})&&(x[0]=f.distanceLimits[0],x[1]=f.distanceLimits[1]),"zoomMin"in f&&(x[0]=f.zoomMin),"zoomMax"in f&&(x[1]=f.zoomMax);var v=r({center:f.center||[0,0,0],up:f.up||[0,1,0],eye:f.eye||[0,0,10],mode:f.mode||"orbit",distanceLimits:x}),g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=0,p=h.clientWidth,m=h.clientHeight,w={keyBindingMode:"rotate",enableWheel:!0,view:v,element:h,delay:f.delay||16,rotateSpeed:f.rotateSpeed||1,zoomSpeed:f.zoomSpeed||1,translateSpeed:f.translateSpeed||1,flipX:!!f.flipX,flipY:!!f.flipY,modes:v.modes,_ortho:f._ortho||f.projection&&f.projection.type==="orthographic"||!1,tick:function(){var c=o(),M=this.delay,_=c-2*M;v.idle(c-M),v.recalcMatrix(_),v.flush(c-(100+2*M));for(var E=!0,L=v.computedMatrix,C=0;C<16;++C)E=E&&g[C]===L[C],g[C]=L[C];var O=h.clientWidth===p&&h.clientHeight===m;return p=h.clientWidth,m=h.clientHeight,E?!O:(y=Math.exp(v.computedRadius[0]),!0)},lookAt:function(c,M,_){v.lookAt(v.lastT(),c,M,_)},rotate:function(c,M,_){v.rotate(v.lastT(),c,M,_)},pan:function(c,M,_){v.pan(v.lastT(),c,M,_)},translate:function(c,M,_){v.translate(v.lastT(),c,M,_)}};return Object.defineProperties(w,{matrix:{get:function(){return v.computedMatrix},set:function(c){return v.setMatrix(v.lastT(),c),v.computedMatrix},enumerable:!0},mode:{get:function(){return v.getMode()},set:function(c){var M=v.computedUp.slice(),_=v.computedEye.slice(),E=v.computedCenter.slice();if(v.setMode(c),c==="turntable"){var L=o();v._active.lookAt(L,_,E,M),v._active.lookAt(L+500,_,E,[0,0,1]),v._active.flush(L)}return v.getMode()},enumerable:!0},center:{get:function(){return v.computedCenter},set:function(c){return v.lookAt(v.lastT(),null,c),v.computedCenter},enumerable:!0},eye:{get:function(){return v.computedEye},set:function(c){return v.lookAt(v.lastT(),c),v.computedEye},enumerable:!0},up:{get:function(){return v.computedUp},set:function(c){return v.lookAt(v.lastT(),null,null,c),v.computedUp},enumerable:!0},distance:{get:function(){return y},set:function(c){return v.setDistance(v.lastT(),c),c},enumerable:!0},distanceLimits:{get:function(){return v.getDistanceLimits(x)},set:function(c){return v.setDistanceLimits(c),c},enumerable:!0}}),h.addEventListener("contextmenu",function(c){return c.preventDefault(),!1}),w._lastX=-1,w._lastY=-1,w._lastMods={shift:!1,control:!1,alt:!1,meta:!1},w.enableMouseListeners=function(){function c(M,_,E,L){var C=w.keyBindingMode;if(C!==!1){var O=C==="rotate",I=C==="pan",N=C==="zoom",R=!!L.control,V=!!L.alt,F=!!L.shift,D=!!(1&M),U=!!(2&M),j=!!(4&M),J=1/h.clientHeight,X=J*(_-w._lastX),Z=J*(E-w._lastY),Y=w.flipX?1:-1,W=w.flipY?1:-1,Q=Math.PI*w.rotateSpeed,ne=o();if(w._lastX!==-1&&w._lastY!==-1&&((O&&D&&!R&&!V&&!F||D&&!R&&!V&&F)&&v.rotate(ne,Y*Q*X,-W*Q*Z,0),(I&&D&&!R&&!V&&!F||U||D&&R&&!V&&!F)&&v.pan(ne,-w.translateSpeed*X*y,w.translateSpeed*Z*y,0),N&&D&&!R&&!V&&!F||j||D&&!R&&V&&!F)){var re=-w.zoomSpeed*Z/window.innerHeight*(ne-v.lastT())*100;v.pan(ne,0,0,y*(Math.exp(re)-1))}return w._lastX=_,w._lastY=E,w._lastMods=L,!0}}w.mouseListener=n(h,c),h.addEventListener("touchstart",function(M){var _=i(M.changedTouches[0],h);c(0,_[0],_[1],w._lastMods),c(1,_[0],_[1],w._lastMods)},!!u&&{passive:!0}),h.addEventListener("touchmove",function(M){var _=i(M.changedTouches[0],h);c(1,_[0],_[1],w._lastMods),M.preventDefault()},!!u&&{passive:!1}),h.addEventListener("touchend",function(M){c(0,w._lastX,w._lastY,w._lastMods)},!!u&&{passive:!0}),w.wheelListener=a(h,function(M,_){if(w.keyBindingMode!==!1&&w.enableWheel){var E=w.flipX?1:-1,L=w.flipY?1:-1,C=o();if(Math.abs(M)>Math.abs(_))v.rotate(C,0,0,-M*E*Math.PI*w.rotateSpeed/window.innerWidth);else if(!w._ortho){var O=-w.zoomSpeed*L*_/window.innerHeight*(C-v.lastT())/20;v.pan(C,0,0,y*(Math.exp(O)-1))}}},!0)},w.enableMouseListeners(),w};var o=t(8161),r=t(1152),n=t(6145),a=t(6475),i=t(2565),u=t(5233)},8245:function(d,s,t){var o=t(6832),r=t(5158),n=o([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),a=o([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);d.exports=function(i){return r(i,n,a,null,[{name:"position",type:"vec2"}])}},1059:function(d,s,t){var o=t(4296),r=t(7453),n=t(2771),a=t(6496),i=t(2611),u=t(4234),h=t(8126),f=t(6145),x=t(1120),v=t(5268),g=t(8245),y=t(2321)({tablet:!0,featureDetect:!0});function p(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function m(c){var M=Math.round(Math.log(Math.abs(c))/Math.log(10));if(M<0){var _=Math.round(Math.pow(10,-M));return Math.ceil(c*_)/_}return M>0?(_=Math.round(Math.pow(10,M)),Math.ceil(c/_)*_):Math.ceil(c)}function w(c){return typeof c!="boolean"||c}d.exports={createScene:function(c){(c=c||{}).camera=c.camera||{};var M=c.canvas;M||(M=document.createElement("canvas"),c.container?c.container.appendChild(M):document.body.appendChild(M));var _=c.gl;if(_||(c.glOptions&&(y=!!c.glOptions.preserveDrawingBuffer),_=function(Ce,xe){var _e=null;try{(_e=Ce.getContext("webgl",xe))||(_e=Ce.getContext("experimental-webgl",xe))}catch{return null}return _e}(M,c.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:y})),!_)throw new Error("webgl not supported");var E=c.bounds||[[-10,-10,-10],[10,10,10]],L=new p,C=u(_,_.drawingBufferWidth,_.drawingBufferHeight,{preferFloat:!y}),O=g(_),I=c.cameraObject&&c.cameraObject._ortho===!0||c.camera.projection&&c.camera.projection.type==="orthographic"||!1,N={eye:c.camera.eye||[2,0,0],center:c.camera.center||[0,0,0],up:c.camera.up||[0,1,0],zoomMin:c.camera.zoomMax||.1,zoomMax:c.camera.zoomMin||100,mode:c.camera.mode||"turntable",_ortho:I},R=c.axes||{},V=r(_,R);V.enable=!R.disable;var F=c.spikes||{},D=a(_,F),U=[],j=[],J=[],X=[],Z=!0,Y=!0,W={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},Q=(Y=!0,[_.drawingBufferWidth,_.drawingBufferHeight]),ne=c.cameraObject||o(M,N),re={gl:_,contextLost:!1,pixelRatio:c.pixelRatio||1,canvas:M,selection:L,camera:ne,axes:V,axesPixels:null,spikes:D,bounds:E,objects:U,shape:Q,aspect:c.aspectRatio||[1,1,1],pickRadius:c.pickRadius||10,zNear:c.zNear||.01,zFar:c.zFar||1e3,fovy:c.fovy||Math.PI/4,clearColor:c.clearColor||[0,0,0,0],autoResize:w(c.autoResize),autoBounds:w(c.autoBounds),autoScale:!!c.autoScale,autoCenter:w(c.autoCenter),clipToBounds:w(c.clipToBounds),snapToData:!!c.snapToData,onselect:c.onselect||null,onrender:c.onrender||null,onclick:c.onclick||null,cameraParams:W,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(Ce){this.aspect[0]=Ce.x,this.aspect[1]=Ce.y,this.aspect[2]=Ce.z,Y=!0},setBounds:function(Ce,xe){this.bounds[0][Ce]=xe.min,this.bounds[1][Ce]=xe.max},setClearColor:function(Ce){this.clearColor=Ce},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ie=[_.drawingBufferWidth/re.pixelRatio|0,_.drawingBufferHeight/re.pixelRatio|0];function se(){if(!re._stopped&&re.autoResize){var Ce=M.parentNode,xe=1,_e=1;Ce&&Ce!==document.body?(xe=Ce.clientWidth,_e=Ce.clientHeight):(xe=window.innerWidth,_e=window.innerHeight);var we=0|Math.ceil(xe*re.pixelRatio),Ae=0|Math.ceil(_e*re.pixelRatio);if(we!==M.width||Ae!==M.height){M.width=we,M.height=Ae;var $=M.style;$.position=$.position||"absolute",$.left="0px",$.top="0px",$.width=xe+"px",$.height=_e+"px",Z=!0}}}function ge(){for(var Ce=U.length,xe=X.length,_e=0;_e<xe;++_e)J[_e]=0;e:for(_e=0;_e<Ce;++_e){var we=U[_e],Ae=we.pickSlots;if(Ae){for(var $=0;$<xe;++$)if(J[$]+Ae<255){j[_e]=$,we.setPickBase(J[$]+1),J[$]+=Ae;continue e}var oe=i(_,Q);j[_e]=xe,X.push(oe),J.push(Ae),we.setPickBase(1),xe+=1}else j[_e]=-1}for(;xe>0&&J[xe-1]===0;)J.pop(),X.pop().dispose()}function ue(){if(re.contextLost)return!0;_.isContextLost()&&(re.contextLost=!0,re.mouseListener.enabled=!1,re.selection.object=null,re.oncontextloss&&re.oncontextloss())}re.autoResize&&se(),window.addEventListener("resize",se),re.update=function(Ce){re._stopped||(Z=!0,Y=!0)},re.add=function(Ce){re._stopped||(Ce.axes=V,U.push(Ce),j.push(-1),Z=!0,Y=!0,ge())},re.remove=function(Ce){if(!re._stopped){var xe=U.indexOf(Ce);xe<0||(U.splice(xe,1),j.pop(),Z=!0,Y=!0,ge())}},re.dispose=function(){if(!re._stopped&&(re._stopped=!0,window.removeEventListener("resize",se),M.removeEventListener("webglcontextlost",ue),re.mouseListener.enabled=!1,!re.contextLost)){V.dispose(),D.dispose();for(var Ce=0;Ce<U.length;++Ce)U[Ce].dispose();for(C.dispose(),Ce=0;Ce<X.length;++Ce)X[Ce].dispose();O.dispose(),_=null,V=null,D=null,U=[]}},re._mouseRotating=!1,re._prevButtons=0,re.enableMouseListeners=function(){re.mouseListener=f(M,function(Ce,xe,_e){if(!re._stopped){var we=X.length,Ae=U.length,$=L.object;L.distance=1/0,L.mouse[0]=xe,L.mouse[1]=_e,L.object=null,L.screen=null,L.dataCoordinate=L.dataPosition=null;var oe=!1;if(Ce&&re._prevButtons)re._mouseRotating=!0;else{re._mouseRotating&&(Y=!0),re._mouseRotating=!1;for(var pe=0;pe<we;++pe){var ye=X[pe].query(xe,ie[1]-_e-1,re.pickRadius);if(ye){if(ye.distance>L.distance)continue;for(var ke=0;ke<Ae;++ke){var De=U[ke];if(j[ke]===pe){var Pe=De.pick(ye);Pe&&(L.buttons=Ce,L.screen=ye.coord,L.distance=ye.distance,L.object=De,L.index=Pe.distance,L.dataPosition=Pe.position,L.dataCoordinate=Pe.dataCoordinate,L.data=Pe,oe=!0)}}}}}$&&$!==L.object&&($.highlight&&$.highlight(null),Z=!0),L.object&&(L.object.highlight&&L.object.highlight(L.data),Z=!0),(oe=oe||L.object!==$)&&re.onselect&&re.onselect(L),1&Ce&&!(1&re._prevButtons)&&re.onclick&&re.onclick(L),re._prevButtons=Ce}})},M.addEventListener("webglcontextlost",ue);var ce=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],le=[ce[0].slice(),ce[1].slice()];function de(){if(!ue()){se();var Ce=re.camera.tick();W.view=re.camera.matrix,Z=Z||Ce,Y=Y||Ce,V.pixelRatio=re.pixelRatio,D.pixelRatio=re.pixelRatio;var xe=U.length,_e=ce[0],we=ce[1];_e[0]=_e[1]=_e[2]=1/0,we[0]=we[1]=we[2]=-1/0;for(var Ae=0;Ae<xe;++Ae){(ze=U[Ae]).pixelRatio=re.pixelRatio,ze.axes=re.axes,Z=Z||!!ze.dirty,Y=Y||!!ze.dirty;var $=ze.bounds;if($)for(var oe=$[0],pe=$[1],ye=0;ye<3;++ye)_e[ye]=Math.min(_e[ye],oe[ye]),we[ye]=Math.max(we[ye],pe[ye])}var ke=re.bounds;if(re.autoBounds)for(ye=0;ye<3;++ye){if(we[ye]<_e[ye])_e[ye]=-1,we[ye]=1;else{_e[ye]===we[ye]&&(_e[ye]-=1,we[ye]+=1);var De=.05*(we[ye]-_e[ye]);_e[ye]=_e[ye]-De,we[ye]=we[ye]+De}ke[0][ye]=_e[ye],ke[1][ye]=we[ye]}var Pe=!1;for(ye=0;ye<3;++ye)Pe=Pe||le[0][ye]!==ke[0][ye]||le[1][ye]!==ke[1][ye],le[0][ye]=ke[0][ye],le[1][ye]=ke[1][ye];if(Y=Y||Pe,Z=Z||Pe){if(Pe){var Re=[0,0,0];for(Ae=0;Ae<3;++Ae)Re[Ae]=m((ke[1][Ae]-ke[0][Ae])/10);V.autoTicks?V.update({bounds:ke,tickSpacing:Re}):V.update({bounds:ke})}var fe=_.drawingBufferWidth,ve=_.drawingBufferHeight;for(Q[0]=fe,Q[1]=ve,ie[0]=0|Math.max(fe/re.pixelRatio,1),ie[1]=0|Math.max(ve/re.pixelRatio,1),function(He,Ve){var nt=He.bounds,tt=He.cameraParams,ot=tt.projection,pt=tt.model,Tt=He.gl.drawingBufferWidth,yt=He.gl.drawingBufferHeight,dt=He.zNear,Pt=He.zFar,Et=He.fovy,Ot=Tt/yt;Ve?(v(ot,-Ot,Ot,-1,1,dt,Pt),tt._ortho=!0):(x(ot,Et,Ot,dt,Pt),tt._ortho=!1);for(var Nt=0;Nt<16;++Nt)pt[Nt]=0;pt[15]=1;var zt=0;for(Nt=0;Nt<3;++Nt)zt=Math.max(zt,nt[1][Nt]-nt[0][Nt]);for(Nt=0;Nt<3;++Nt)He.autoScale?pt[5*Nt]=He.aspect[Nt]/(nt[1][Nt]-nt[0][Nt]):pt[5*Nt]=1/zt,He.autoCenter&&(pt[12+Nt]=.5*-pt[5*Nt]*(nt[0][Nt]+nt[1][Nt]))}(re,I),Ae=0;Ae<xe;++Ae)(ze=U[Ae]).axesBounds=ke,re.clipToBounds&&(ze.clipBounds=ke);L.object&&(re.snapToData?D.position=L.dataCoordinate:D.position=L.dataPosition,D.bounds=ke),Y&&(Y=!1,function(){if(!ue()){_.colorMask(!0,!0,!0,!0),_.depthMask(!0),_.disable(_.BLEND),_.enable(_.DEPTH_TEST),_.depthFunc(_.LEQUAL);for(var He=U.length,Ve=X.length,nt=0;nt<Ve;++nt){var tt=X[nt];tt.shape=ie,tt.begin();for(var ot=0;ot<He;++ot)if(j[ot]===nt){var pt=U[ot];pt.drawPick&&(pt.pixelRatio=1,pt.drawPick(W))}tt.end()}}}()),re.axesPixels=n(re.axes,W,fe,ve),re.onrender&&re.onrender(),_.bindFramebuffer(_.FRAMEBUFFER,null),_.viewport(0,0,fe,ve),re.clearRGBA(),_.depthMask(!0),_.colorMask(!0,!0,!0,!0),_.enable(_.DEPTH_TEST),_.depthFunc(_.LEQUAL),_.disable(_.BLEND),_.disable(_.CULL_FACE);var Te=!1;for(V.enable&&(Te=Te||V.isTransparent(),V.draw(W)),D.axes=V,L.object&&D.draw(W),_.disable(_.CULL_FACE),Ae=0;Ae<xe;++Ae)(ze=U[Ae]).axes=V,ze.pixelRatio=re.pixelRatio,ze.isOpaque&&ze.isOpaque()&&ze.draw(W),ze.isTransparent&&ze.isTransparent()&&(Te=!0);if(Te){for(C.shape=Q,C.bind(),_.clear(_.DEPTH_BUFFER_BIT),_.colorMask(!1,!1,!1,!1),_.depthMask(!0),_.depthFunc(_.LESS),V.enable&&V.isTransparent()&&V.drawTransparent(W),Ae=0;Ae<xe;++Ae)(ze=U[Ae]).isOpaque&&ze.isOpaque()&&ze.draw(W);for(_.enable(_.BLEND),_.blendEquation(_.FUNC_ADD),_.blendFunc(_.ONE,_.ONE_MINUS_SRC_ALPHA),_.colorMask(!0,!0,!0,!0),_.depthMask(!1),_.clearColor(0,0,0,0),_.clear(_.COLOR_BUFFER_BIT),V.isTransparent()&&V.drawTransparent(W),Ae=0;Ae<xe;++Ae){var ze;(ze=U[Ae]).isTransparent&&ze.isTransparent()&&ze.drawTransparent(W)}_.bindFramebuffer(_.FRAMEBUFFER,null),_.blendFunc(_.ONE,_.ONE_MINUS_SRC_ALPHA),_.disable(_.DEPTH_TEST),O.bind(),C.color[0].bind(0),O.uniforms.accumBuffer=0,h(_),_.disable(_.BLEND)}for(Z=!1,Ae=0;Ae<xe;++Ae)U[Ae].dirty=!1}}}return re.enableMouseListeners(),function Ce(){re._stopped||re.contextLost||(de(),requestAnimationFrame(Ce))}(),re.redraw=function(){re._stopped||(Z=!0,de())},re},createCamera:o}},8023:function(d,s,t){var o=t(6832);s.pointVertex=o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),s.pointFragment=o([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),s.pickVertex=o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),s.pickFragment=o([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},8271:function(d,s,t){var o=t(5158),r=t(5827),n=t(5306),a=t(8023);function i(x,v,g,y,p){this.plot=x,this.offsetBuffer=v,this.pickBuffer=g,this.shader=y,this.pickShader=p,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}d.exports=function(x,v){var g=x.gl,y=new i(x,r(g),r(g),o(g,a.pointVertex,a.pointFragment),o(g,a.pickVertex,a.pickFragment));return y.update(v),x.addObject(y),y};var u,h,f=i.prototype;f.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},f.update=function(x){var v;function g(_,E){return _ in x?x[_]:E}x=x||{},this.sizeMin=g("sizeMin",.5),this.sizeMax=g("sizeMax",20),this.color=g("color",[1,0,0,1]).slice(),this.areaRatio=g("areaRatio",1),this.borderColor=g("borderColor",[0,0,0,1]).slice(),this.blend=g("blend",!1);var y=x.positions.length>>>1,p=x.positions instanceof Float32Array,m=x.idToIndex instanceof Int32Array&&x.idToIndex.length>=y,w=x.positions,c=p?w:n.mallocFloat32(w.length),M=m?x.idToIndex:n.mallocInt32(y);if(p||c.set(w),!m)for(c.set(w),v=0;v<y;v++)M[v]=v;this.points=w,this.offsetBuffer.update(c),this.pickBuffer.update(M),p||n.free(c),m||n.free(M),this.pointCount=y,this.pickOffset=0},f.unifiedDraw=(u=[1,0,0,0,1,0,0,0,1],h=[0,0,0,0],function(x){var v=x!==void 0,g=v?this.pickShader:this.shader,y=this.plot.gl,p=this.plot.dataBox;if(this.pointCount===0)return x;var m=p[2]-p[0],w=p[3]-p[1],c=function(L,C){var O,I=0,N=L.length>>>1;for(O=0;O<N;O++){var R=L[2*O],V=L[2*O+1];R>=C[0]&&R<=C[2]&&V>=C[1]&&V<=C[3]&&I++}return I}(this.points,p),M=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(c,.33333)));u[0]=2/m,u[4]=2/w,u[6]=-2*p[0]/m-1,u[7]=-2*p[1]/w-1,this.offsetBuffer.bind(),g.bind(),g.attributes.position.pointer(),g.uniforms.matrix=u,g.uniforms.color=this.color,g.uniforms.borderColor=this.borderColor,g.uniforms.pointCloud=M<5,g.uniforms.pointSize=M,g.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),v&&(h[0]=255&x,h[1]=x>>8&255,h[2]=x>>16&255,h[3]=x>>24&255,this.pickBuffer.bind(),g.attributes.pickId.pointer(y.UNSIGNED_BYTE),g.uniforms.pickOffset=h,this.pickOffset=x);var _=y.getParameter(y.BLEND),E=y.getParameter(y.DITHER);return _&&!this.blend&&y.disable(y.BLEND),E&&y.disable(y.DITHER),y.drawArrays(y.POINTS,0,this.pointCount),_&&!this.blend&&y.enable(y.BLEND),E&&y.enable(y.DITHER),x+this.pointCount}),f.draw=f.unifiedDraw,f.drawPick=f.unifiedDraw,f.pick=function(x,v,g){var y=this.pickOffset,p=this.pointCount;if(g<y||g>=y+p)return null;var m=g-y,w=this.points;return{object:this,pointId:m,dataCoord:[w[2*m],w[2*m+1]]}}},6093:function(d){d.exports=function(s,t,o,r){var n,a,i,u,h,f=t[0],x=t[1],v=t[2],g=t[3],y=o[0],p=o[1],m=o[2],w=o[3];return(a=f*y+x*p+v*m+g*w)<0&&(a=-a,y=-y,p=-p,m=-m,w=-w),1-a>1e-6?(n=Math.acos(a),i=Math.sin(n),u=Math.sin((1-r)*n)/i,h=Math.sin(r*n)/i):(u=1-r,h=r),s[0]=u*f+h*y,s[1]=u*x+h*p,s[2]=u*v+h*m,s[3]=u*g+h*w,s}},8240:function(d){d.exports=function(s){return s||s===0?s.toString():""}},4123:function(d,s,t){var o=t(875);d.exports=function(n,a,i){var u=r[a];if(u||(u=r[a]={}),n in u)return u[n];var h={textAlign:"center",textBaseline:"middle",lineHeight:1,font:a,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},f=o(n,h);h.triangles=!1;var x,v,g=o(n,h);if(i&&i!==1){for(x=0;x<f.positions.length;++x)for(v=0;v<f.positions[x].length;++v)f.positions[x][v]/=i;for(x=0;x<g.positions.length;++x)for(v=0;v<g.positions[x].length;++v)g.positions[x][v]/=i}var y=[[1/0,1/0],[-1/0,-1/0]],p=g.positions.length;for(x=0;x<p;++x){var m=g.positions[x];for(v=0;v<2;++v)y[0][v]=Math.min(y[0][v],m[v]),y[1][v]=Math.max(y[1][v],m[v])}return u[n]=[f,g,y]};var r={}},9282:function(d,s,t){var o=t(5158),r=t(6832),n=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),a=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),i=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),u=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),h=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),f=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],x={vertex:n,fragment:u,attributes:f},v={vertex:a,fragment:u,attributes:f},g={vertex:i,fragment:u,attributes:f},y={vertex:n,fragment:h,attributes:f},p={vertex:a,fragment:h,attributes:f},m={vertex:i,fragment:h,attributes:f};function w(c,M){var _=o(c,M),E=_.attributes;return E.position.location=0,E.color.location=1,E.glyph.location=2,E.id.location=3,_}s.createPerspective=function(c){return w(c,x)},s.createOrtho=function(c){return w(c,v)},s.createProject=function(c){return w(c,g)},s.createPickPerspective=function(c){return w(c,y)},s.createPickOrtho=function(c){return w(c,p)},s.createPickProject=function(c){return w(c,m)}},2182:function(d,s,t){var o=t(3596),r=t(5827),n=t(2944),a=t(5306),i=t(104),u=t(9282),h=t(4123),f=t(8240),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function v(j,J){var X=j[0],Z=j[1],Y=j[2],W=j[3];return j[0]=J[0]*X+J[4]*Z+J[8]*Y+J[12]*W,j[1]=J[1]*X+J[5]*Z+J[9]*Y+J[13]*W,j[2]=J[2]*X+J[6]*Z+J[10]*Y+J[14]*W,j[3]=J[3]*X+J[7]*Z+J[11]*Y+J[15]*W,j}function g(j,J,X,Z){return v(Z,Z),v(Z,Z),v(Z,Z)}function y(j,J){this.index=j,this.dataCoordinate=this.position=J}function p(j){return j===!0||j>1?1:j}function m(j,J,X,Z,Y,W,Q,ne,re,ie,se,ge){this.gl=j,this.pixelRatio=1,this.shader=J,this.orthoShader=X,this.projectShader=Z,this.pointBuffer=Y,this.colorBuffer=W,this.glyphBuffer=Q,this.idBuffer=ne,this.vao=re,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=ie,this.pickOrthoShader=se,this.pickProjectShader=ge,this.points=[],this._selectResult=new y(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}d.exports=function(j){var J=j.gl,X=u.createPerspective(J),Z=u.createOrtho(J),Y=u.createProject(J),W=u.createPickPerspective(J),Q=u.createPickOrtho(J),ne=u.createPickProject(J),re=r(J),ie=r(J),se=r(J),ge=r(J),ue=new m(J,X,Z,Y,re,ie,se,ge,n(J,[{buffer:re,size:3,type:J.FLOAT},{buffer:ie,size:4,type:J.FLOAT},{buffer:se,size:2,type:J.FLOAT},{buffer:ge,size:4,type:J.UNSIGNED_BYTE,normalized:!0}]),W,Q,ne);return ue.update(j),ue};var w=m.prototype;w.pickSlots=1,w.setPickBase=function(j){this.pickId=j},w.isTransparent=function(){if(this.hasAlpha)return!0;for(var j=0;j<3;++j)if(this.axesProject[j]&&this.projectHasAlpha)return!0;return!1},w.isOpaque=function(){if(!this.hasAlpha)return!0;for(var j=0;j<3;++j)if(this.axesProject[j]&&!this.projectHasAlpha)return!0;return!1};var c=[0,0],M=[0,0,0],_=[0,0,0],E=[0,0,0,1],L=[0,0,0,1],C=x.slice(),O=[0,0,0],I=[[0,0,0],[0,0,0]];function N(j){return j[0]=j[1]=j[2]=0,j}function R(j,J){return j[0]=J[0],j[1]=J[1],j[2]=J[2],j[3]=1,j}function V(j,J,X,Z){return j[0]=J[0],j[1]=J[1],j[2]=J[2],j[X]=Z,j}var F=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function D(j,J,X,Z,Y,W,Q){var ne=X.gl;if((W===X.projectHasAlpha||Q)&&function(ie,se,ge,ue){var ce,le=se.axesProject,de=se.gl,Ce=ie.uniforms,xe=ge.model||x,_e=ge.view||x,we=ge.projection||x,Ae=se.axesBounds,$=function(nt){for(var tt=I,ot=0;ot<2;++ot)for(var pt=0;pt<3;++pt)tt[ot][pt]=Math.max(Math.min(nt[ot][pt],1e8),-1e8);return tt}(se.clipBounds);ce=se.axes&&se.axes.lastCubeProps?se.axes.lastCubeProps.axis:[1,1,1],c[0]=2/de.drawingBufferWidth,c[1]=2/de.drawingBufferHeight,ie.bind(),Ce.view=_e,Ce.projection=we,Ce.screenSize=c,Ce.highlightId=se.highlightId,Ce.highlightScale=se.highlightScale,Ce.clipBounds=$,Ce.pickGroup=se.pickId/255,Ce.pixelRatio=ue;for(var oe=0;oe<3;++oe)if(le[oe]){Ce.scale=se.projectScale[oe],Ce.opacity=se.projectOpacity[oe];for(var pe=C,ye=0;ye<16;++ye)pe[ye]=0;for(ye=0;ye<4;++ye)pe[5*ye]=1;pe[5*oe]=0,ce[oe]<0?pe[12+oe]=Ae[0][oe]:pe[12+oe]=Ae[1][oe],i(pe,xe,pe),Ce.model=pe;var ke=(oe+1)%3,De=(oe+2)%3,Pe=N(M),Re=N(_);Pe[ke]=1,Re[De]=1;var fe=g(0,0,0,R(E,Pe)),ve=g(0,0,0,R(L,Re));if(Math.abs(fe[1])>Math.abs(ve[1])){var Te=fe;fe=ve,ve=Te,Te=Pe,Pe=Re,Re=Te;var ze=ke;ke=De,De=ze}fe[0]<0&&(Pe[ke]=-1),ve[1]>0&&(Re[De]=-1);var He=0,Ve=0;for(ye=0;ye<4;++ye)He+=Math.pow(xe[4*ke+ye],2),Ve+=Math.pow(xe[4*De+ye],2);Pe[ke]/=Math.sqrt(He),Re[De]/=Math.sqrt(Ve),Ce.axes[0]=Pe,Ce.axes[1]=Re,Ce.fragClipBounds[0]=V(O,$[0],oe,-1e8),Ce.fragClipBounds[1]=V(O,$[1],oe,1e8),se.vao.bind(),se.vao.draw(de.TRIANGLES,se.vertexCount),se.lineWidth>0&&(de.lineWidth(se.lineWidth*ue),se.vao.draw(de.LINES,se.lineVertexCount,se.vertexCount)),se.vao.unbind()}}(J,X,Z,Y),W===X.hasAlpha||Q){j.bind();var re=j.uniforms;re.model=Z.model||x,re.view=Z.view||x,re.projection=Z.projection||x,c[0]=2/ne.drawingBufferWidth,c[1]=2/ne.drawingBufferHeight,re.screenSize=c,re.highlightId=X.highlightId,re.highlightScale=X.highlightScale,re.fragClipBounds=F,re.clipBounds=X.axes.bounds,re.opacity=X.opacity,re.pickGroup=X.pickId/255,re.pixelRatio=Y,X.vao.bind(),X.vao.draw(ne.TRIANGLES,X.vertexCount),X.lineWidth>0&&(ne.lineWidth(X.lineWidth*Y),X.vao.draw(ne.LINES,X.lineVertexCount,X.vertexCount)),X.vao.unbind()}}function U(j,J,X,Z){var Y;Y=Array.isArray(j)?J<j.length?j[J]:void 0:j,Y=f(Y);var W=!0;o(Y)&&(Y="▼",W=!1);var Q=h(Y,X,Z);return{mesh:Q[0],lines:Q[1],bounds:Q[2],visible:W}}w.draw=function(j){D(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,j,this.pixelRatio,!1,!1)},w.drawTransparent=function(j){D(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,j,this.pixelRatio,!0,!1)},w.drawPick=function(j){D(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,j,1,!0,!0)},w.pick=function(j){if(!j||j.id!==this.pickId)return null;var J=j.value[2]+(j.value[1]<<8)+(j.value[0]<<16);if(J>=this.pointCount||J<0)return null;var X=this.points[J],Z=this._selectResult;Z.index=J;for(var Y=0;Y<3;++Y)Z.position[Y]=Z.dataCoordinate[Y]=X[Y];return Z},w.highlight=function(j){if(j){var J=j.index,X=255&J,Z=J>>8&255,Y=J>>16&255;this.highlightId=[X/255,Z/255,Y/255,0]}else this.highlightId=[1,1,1,1]},w.update=function(j){if("perspective"in(j=j||{})&&(this.useOrtho=!j.perspective),"orthographic"in j&&(this.useOrtho=!!j.orthographic),"lineWidth"in j&&(this.lineWidth=j.lineWidth),"project"in j)if(Array.isArray(j.project))this.axesProject=j.project;else{var J=!!j.project;this.axesProject=[J,J,J]}if("projectScale"in j)if(Array.isArray(j.projectScale))this.projectScale=j.projectScale.slice();else{var X=+j.projectScale;this.projectScale=[X,X,X]}if(this.projectHasAlpha=!1,"projectOpacity"in j){Array.isArray(j.projectOpacity)?this.projectOpacity=j.projectOpacity.slice():(X=+j.projectOpacity,this.projectOpacity=[X,X,X]);for(var Z=0;Z<3;++Z)this.projectOpacity[Z]=p(this.projectOpacity[Z]),this.projectOpacity[Z]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in j&&(this.opacity=p(j.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var Y,W,Q=j.position,ne=j.font||"normal",re=j.alignment||[0,0];if(re.length===2)Y=re[0],W=re[1];else for(Y=[],W=[],Z=0;Z<re.length;++Z)Y[Z]=re[Z][0],W[Z]=re[Z][1];var ie=[1/0,1/0,1/0],se=[-1/0,-1/0,-1/0],ge=j.glyph,ue=j.color,ce=j.size,le=j.angle,de=j.lineColor,Ce=-1,xe=0,_e=0,we=0;if(Q.length){we=Q.length;e:for(Z=0;Z<we;++Z){for(var Ae=Q[Z],$=0;$<3;++$)if(isNaN(Ae[$])||!isFinite(Ae[$]))continue e;var oe=(tt=U(ge,Z,ne,this.pixelRatio)).mesh,pe=tt.lines,ye=tt.bounds;xe+=3*oe.cells.length,_e+=2*pe.edges.length}}var ke=xe+_e,De=a.mallocFloat(3*ke),Pe=a.mallocFloat(4*ke),Re=a.mallocFloat(2*ke),fe=a.mallocUint32(ke);if(ke>0){var ve=0,Te=xe,ze=[0,0,0,1],He=[0,0,0,1],Ve=Array.isArray(ue)&&Array.isArray(ue[0]),nt=Array.isArray(de)&&Array.isArray(de[0]);e:for(Z=0;Z<we;++Z){for(Ce+=1,Ae=Q[Z],$=0;$<3;++$){if(isNaN(Ae[$])||!isFinite(Ae[$]))continue e;se[$]=Math.max(se[$],Ae[$]),ie[$]=Math.min(ie[$],Ae[$])}oe=(tt=U(ge,Z,ne,this.pixelRatio)).mesh,pe=tt.lines,ye=tt.bounds;var tt,ot=tt.visible;if(ot)if(Array.isArray(ue)){if((pt=Ve?Z<ue.length?ue[Z]:[0,0,0,0]:ue).length===3){for($=0;$<3;++$)ze[$]=pt[$];ze[3]=1}else if(pt.length===4){for($=0;$<4;++$)ze[$]=pt[$];!this.hasAlpha&&pt[3]<1&&(this.hasAlpha=!0)}}else ze[0]=ze[1]=ze[2]=0,ze[3]=1;else ze=[1,1,1,0];if(ot)if(Array.isArray(de)){var pt;if((pt=nt?Z<de.length?de[Z]:[0,0,0,0]:de).length===3){for($=0;$<3;++$)He[$]=pt[$];He[$]=1}else if(pt.length===4){for($=0;$<4;++$)He[$]=pt[$];!this.hasAlpha&&pt[3]<1&&(this.hasAlpha=!0)}}else He[0]=He[1]=He[2]=0,He[3]=1;else He=[1,1,1,0];var Tt=.5;ot?Array.isArray(ce)?Tt=Z<ce.length?+ce[Z]:12:ce?Tt=+ce:this.useOrtho&&(Tt=12):Tt=0;var yt=0;Array.isArray(le)?yt=Z<le.length?+le[Z]:0:le&&(yt=+le);var dt=Math.cos(yt),Pt=Math.sin(yt);for(Ae=Q[Z],$=0;$<3;++$)se[$]=Math.max(se[$],Ae[$]),ie[$]=Math.min(ie[$],Ae[$]);var Et=Y,Ot=W;Et=0,Array.isArray(Y)?Et=Z<Y.length?Y[Z]:0:Y&&(Et=Y),Ot=0,Array.isArray(W)?Ot=Z<W.length?W[Z]:0:W&&(Ot=W);var Nt=[Et*=Et>0?1-ye[0][0]:Et<0?1+ye[1][0]:1,Ot*=Ot>0?1-ye[0][1]:Ot<0?1+ye[1][1]:1],zt=oe.cells||[],Ze=oe.positions||[];for($=0;$<zt.length;++$)for(var Ye=zt[$],je=0;je<3;++je){for(var Ke=0;Ke<3;++Ke)De[3*ve+Ke]=Ae[Ke];for(Ke=0;Ke<4;++Ke)Pe[4*ve+Ke]=ze[Ke];fe[ve]=Ce;var st=Ze[Ye[je]];Re[2*ve]=Tt*(dt*st[0]-Pt*st[1]+Nt[0]),Re[2*ve+1]=Tt*(Pt*st[0]+dt*st[1]+Nt[1]),ve+=1}for(zt=pe.edges,Ze=pe.positions,$=0;$<zt.length;++$)for(Ye=zt[$],je=0;je<2;++je){for(Ke=0;Ke<3;++Ke)De[3*Te+Ke]=Ae[Ke];for(Ke=0;Ke<4;++Ke)Pe[4*Te+Ke]=He[Ke];fe[Te]=Ce,st=Ze[Ye[je]],Re[2*Te]=Tt*(dt*st[0]-Pt*st[1]+Nt[0]),Re[2*Te+1]=Tt*(Pt*st[0]+dt*st[1]+Nt[1]),Te+=1}}}this.bounds=[ie,se],this.points=Q,this.pointCount=Q.length,this.vertexCount=xe,this.lineVertexCount=_e,this.pointBuffer.update(De),this.colorBuffer.update(Pe),this.glyphBuffer.update(Re),this.idBuffer.update(fe),a.free(De),a.free(Pe),a.free(Re),a.free(fe)},w.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},1884:function(d,s,t){var o=t(6832);s.boxVertex=o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),s.boxFragment=o([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},6623:function(d,s,t){var o=t(5158),r=t(5827),n=t(1884);function a(u,h,f){this.plot=u,this.boxBuffer=h,this.boxShader=f,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}d.exports=function(u,h){var f=u.gl,x=new a(u,r(f,[0,0,0,1,1,0,1,1]),o(f,n.boxVertex,n.boxFragment));return x.update(h),u.addOverlay(x),x};var i=a.prototype;i.draw=function(){if(this.enabled){var u=this.plot,h=this.selectBox,f=this.borderWidth,x=(this.innerFill,this.innerColor),v=(this.outerFill,this.outerColor),g=this.borderColor,y=u.box,p=u.screenBox,m=u.dataBox,w=u.viewBox,c=u.pixelRatio,M=(h[0]-m[0])*(w[2]-w[0])/(m[2]-m[0])+w[0],_=(h[1]-m[1])*(w[3]-w[1])/(m[3]-m[1])+w[1],E=(h[2]-m[0])*(w[2]-w[0])/(m[2]-m[0])+w[0],L=(h[3]-m[1])*(w[3]-w[1])/(m[3]-m[1])+w[1];if(M=Math.max(M,w[0]),_=Math.max(_,w[1]),E=Math.min(E,w[2]),L=Math.min(L,w[3]),!(E<M||L<_)){y.bind();var C=p[2]-p[0],O=p[3]-p[1];if(this.outerFill&&(y.drawBox(0,0,C,_,v),y.drawBox(0,_,M,L,v),y.drawBox(0,L,C,O,v),y.drawBox(E,_,C,L,v)),this.innerFill&&y.drawBox(M,_,E,L,x),f>0){var I=f*c;y.drawBox(M-I,_-I,E+I,_+I,g),y.drawBox(M-I,L-I,E+I,L+I,g),y.drawBox(M-I,_-I,M+I,L+I,g),y.drawBox(E-I,_-I,E+I,L+I,g)}}}},i.update=function(u){u=u||{},this.innerFill=!!u.innerFill,this.outerFill=!!u.outerFill,this.innerColor=(u.innerColor||[0,0,0,.5]).slice(),this.outerColor=(u.outerColor||[0,0,0,.5]).slice(),this.borderColor=(u.borderColor||[0,0,0,1]).slice(),this.borderWidth=u.borderWidth||0,this.selectBox=(u.selectBox||this.selectBox).slice()},i.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},2611:function(d,s,t){d.exports=function(f,x){var v=x[0],g=x[1];return new u(f,o(f,v,g,{}),r.mallocUint8(v*g*4))};var o=t(4234),r=t(5306),n=t(5050),a=t(2288).nextPow2;function i(f,x,v,g,y){this.coord=[f,x],this.id=v,this.value=g,this.distance=y}function u(f,x,v){this.gl=f,this.fbo=x,this.buffer=v,this._readTimeout=null;var g=this;this._readCallback=function(){g.gl&&(x.bind(),f.readPixels(0,0,x.shape[0],x.shape[1],f.RGBA,f.UNSIGNED_BYTE,g.buffer),g._readTimeout=null)}}var h=u.prototype;Object.defineProperty(h,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(f){if(this.gl){this.fbo.shape=f;var x=this.fbo.shape[0],v=this.fbo.shape[1];if(v*x*4>this.buffer.length){r.free(this.buffer);for(var g=this.buffer=r.mallocUint8(a(v*x*4)),y=0;y<v*x*4;++y)g[y]=255}return f}}}),h.begin=function(){var f=this.gl;this.shape,f&&(this.fbo.bind(),f.clearColor(1,1,1,1),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT))},h.end=function(){var f=this.gl;f&&(f.bindFramebuffer(f.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},h.query=function(f,x,v){if(!this.gl)return null;var g=this.fbo.shape.slice();f|=0,x|=0,typeof v!="number"&&(v=1);var y=0|Math.min(Math.max(f-v,0),g[0]),p=0|Math.min(Math.max(f+v,0),g[0]),m=0|Math.min(Math.max(x-v,0),g[1]),w=0|Math.min(Math.max(x+v,0),g[1]);if(p<=y||w<=m)return null;var c=[p-y,w-m],M=n(this.buffer,[c[0],c[1],4],[4,4*g[0],1],4*(y+g[0]*m)),_=function(C,O,I){for(var N=1e8,R=-1,V=-1,F=C.shape[0],D=C.shape[1],U=0;U<F;U++)for(var j=0;j<D;j++){var J=C.get(U,j,0),X=C.get(U,j,1),Z=C.get(U,j,2),Y=C.get(U,j,3);if(J<255||X<255||Z<255||Y<255){var W=O-U,Q=I-j,ne=W*W+Q*Q;ne<N&&(N=ne,R=U,V=j)}}return[R,V,N]}(M.hi(c[0],c[1],1),v,v),E=_[0],L=_[1];return E<0||Math.pow(this.radius,2)<_[2]?null:new i(E+y|0,L+m|0,M.get(E,L,0),[M.get(E,L,1),M.get(E,L,2),M.get(E,L,3)],Math.sqrt(_[2]))},h.dispose=function(){this.gl&&(this.fbo.dispose(),r.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},5158:function(d,s,t){var o=t(9016),r=t(4280),n=t(3984),a=t(1628),i=t(2631),u=t(9068);function h(v){this.gl=v,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var f=h.prototype;function x(v,g){return v.name<g.name?-1:1}f.bind=function(){var v;this.program||this._relink();var g=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),y=this.gl.lastAttribCount;if(g>y)for(v=y;v<g;v++)this.gl.enableVertexAttribArray(v);else if(y>g)for(v=g;v<y;v++)this.gl.disableVertexAttribArray(v);this.gl.lastAttribCount=g,this.gl.useProgram(this.program)},f.dispose=function(){for(var v=this.gl.lastAttribCount,g=0;g<v;g++)this.gl.disableVertexAttribArray(g);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},f.update=function(v,g,y,p){if(!g||arguments.length===1){var m=v;v=m.vertex,g=m.fragment,y=m.uniforms,p=m.attributes}var w=this,c=w.gl,M=w._vref;w._vref=a.shader(c,c.VERTEX_SHADER,v),M&&M.dispose(),w.vertShader=w._vref.shader;var _=this._fref;if(w._fref=a.shader(c,c.FRAGMENT_SHADER,g),_&&_.dispose(),w.fragShader=w._fref.shader,!y||!p){var E=c.createProgram();if(c.attachShader(E,w.fragShader),c.attachShader(E,w.vertShader),c.linkProgram(E),!c.getProgramParameter(E,c.LINK_STATUS)){var L=c.getProgramInfoLog(E);throw new u(L,"Error linking program:"+L)}y=y||i.uniforms(c,E),p=p||i.attributes(c,E),c.deleteProgram(E)}(p=p.slice()).sort(x);var C,O=[],I=[],N=[];for(C=0;C<p.length;++C){var R=p[C];if(R.type.indexOf("mat")>=0){for(var V=0|R.type.charAt(R.type.length-1),F=new Array(V),D=0;D<V;++D)F[D]=N.length,I.push(R.name+"["+D+"]"),typeof R.location=="number"?N.push(R.location+D):Array.isArray(R.location)&&R.location.length===V&&typeof R.location[D]=="number"?N.push(0|R.location[D]):N.push(-1);O.push({name:R.name,type:R.type,locations:F})}else O.push({name:R.name,type:R.type,locations:[N.length]}),I.push(R.name),typeof R.location=="number"?N.push(0|R.location):N.push(-1)}var U=0;for(C=0;C<N.length;++C)if(N[C]<0){for(;N.indexOf(U)>=0;)U+=1;N[C]=U}var j=new Array(y.length);function J(){w.program=a.program(c,w._vref,w._fref,I,N);for(var X=0;X<y.length;++X)j[X]=c.getUniformLocation(w.program,y[X].name)}J(),w._relink=J,w.types={uniforms:n(y),attributes:n(p)},w.attributes=r(c,w,O,N),Object.defineProperty(w,"uniforms",o(c,w,y,j))},d.exports=function(v,g,y,p,m){var w=new h(v);return w.update(g,y,p,m),w}},9068:function(d){function s(t,o,r){this.shortMessage=o||"",this.longMessage=r||"",this.rawError=t||"",this.message="gl-shader: "+(o||t||"")+(r?`
`+r:""),this.stack=new Error().stack}s.prototype=new Error,s.prototype.name="GLError",s.prototype.constructor=s,d.exports=s},4280:function(d,s,t){d.exports=function(h,f,x,v){for(var g={},y=0,p=x.length;y<p;++y){var m=x[y],w=m.name,c=m.type,M=m.locations;switch(c){case"bool":case"int":case"float":i(h,f,M[0],v,1,g,w);break;default:if(c.indexOf("vec")>=0){if((_=c.charCodeAt(c.length-1)-48)<2||_>4)throw new o("","Invalid data type for attribute "+w+": "+c);i(h,f,M[0],v,_,g,w)}else{if(!(c.indexOf("mat")>=0))throw new o("","Unknown data type for attribute "+w+": "+c);var _;if((_=c.charCodeAt(c.length-1)-48)<2||_>4)throw new o("","Invalid data type for attribute "+w+": "+c);u(h,f,M,v,_,g,w)}}}return g};var o=t(9068);function r(h,f,x,v,g,y){this._gl=h,this._wrapper=f,this._index=x,this._locations=v,this._dimension=g,this._constFunc=y}var n=r.prototype;n.pointer=function(h,f,x,v){var g=this,y=g._gl,p=g._locations[g._index];y.vertexAttribPointer(p,g._dimension,h||y.FLOAT,!!f,x||0,v||0),y.enableVertexAttribArray(p)},n.set=function(h,f,x,v){return this._constFunc(this._locations[this._index],h,f,x,v)},Object.defineProperty(n,"location",{get:function(){return this._locations[this._index]},set:function(h){return h!==this._locations[this._index]&&(this._locations[this._index]=0|h,this._wrapper.program=null),0|h}});var a=[function(h,f,x){return x.length===void 0?h.vertexAttrib1f(f,x):h.vertexAttrib1fv(f,x)},function(h,f,x,v){return x.length===void 0?h.vertexAttrib2f(f,x,v):h.vertexAttrib2fv(f,x)},function(h,f,x,v,g){return x.length===void 0?h.vertexAttrib3f(f,x,v,g):h.vertexAttrib3fv(f,x)},function(h,f,x,v,g,y){return x.length===void 0?h.vertexAttrib4f(f,x,v,g,y):h.vertexAttrib4fv(f,x)}];function i(h,f,x,v,g,y,p){var m=a[g],w=new r(h,f,x,v,g,m);Object.defineProperty(y,p,{set:function(c){return h.disableVertexAttribArray(v[x]),m(h,v[x],c),c},get:function(){return w},enumerable:!0})}function u(h,f,x,v,g,y,p){for(var m=new Array(g),w=new Array(g),c=0;c<g;++c)i(h,f,x[c],v,g,m,c),w[c]=m[c];Object.defineProperty(m,"location",{set:function(E){if(Array.isArray(E))for(var L=0;L<g;++L)w[L].location=E[L];else for(L=0;L<g;++L)w[L].location=E+L;return E},get:function(){for(var E=new Array(g),L=0;L<g;++L)E[L]=v[x[L]];return E},enumerable:!0}),m.pointer=function(E,L,C,O){E=E||h.FLOAT,L=!!L,C=C||g*g,O=O||0;for(var I=0;I<g;++I){var N=v[x[I]];h.vertexAttribPointer(N,g,E,L,C,O+I*g),h.enableVertexAttribArray(N)}};var M=new Array(g),_=h["vertexAttrib"+g+"fv"];Object.defineProperty(y,p,{set:function(E){for(var L=0;L<g;++L){var C=v[x[L]];if(h.disableVertexAttribArray(C),Array.isArray(E[0]))_.call(h,C,E[L]);else{for(var O=0;O<g;++O)M[O]=E[g*L+O];_.call(h,C,M)}}return E},get:function(){return m},enumerable:!0})}},9016:function(d,s,t){var o=t(3984),r=t(9068);function n(i){return function(){return i}}function a(i,u){for(var h=new Array(i),f=0;f<i;++f)h[f]=u;return h}d.exports=function(i,u,h,f){function x(m){return function(w){for(var c=v("",m),M=0;M<c.length;++M){var _=c[M],E=_[0],L=_[1];if(f[L]){var C=w;if(typeof E=="string"&&(E.indexOf(".")===0||E.indexOf("[")===0)){var O=E;if(E.indexOf(".")===0&&(O=E.slice(1)),O.indexOf("]")===O.length-1){var I=O.indexOf("["),N=O.slice(0,I),R=O.slice(I+1,O.length-1);C=N?w[N][R]:w[R]}else C=w[O]}var V,F=h[L].type;switch(F){case"bool":case"int":case"sampler2D":case"samplerCube":i.uniform1i(f[L],C);break;case"float":i.uniform1f(f[L],C);break;default:var D=F.indexOf("vec");if(!(0<=D&&D<=1&&F.length===4+D)){if(F.indexOf("mat")===0&&F.length===4){if((V=F.charCodeAt(F.length-1)-48)<2||V>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+F);i["uniformMatrix"+V+"fv"](f[L],!1,C);break}throw new r("","Unknown uniform data type for "+name+": "+F)}if((V=F.charCodeAt(F.length-1)-48)<2||V>4)throw new r("","Invalid data type");switch(F.charAt(0)){case"b":case"i":i["uniform"+V+"iv"](f[L],C);break;case"v":i["uniform"+V+"fv"](f[L],C);break;default:throw new r("","Unrecognized data type for vector "+name+": "+F)}}}}}}function v(m,w){if(typeof w!="object")return[[m,w]];var c=[];for(var M in w){var _=w[M],E=m;parseInt(M)+""===M?E+="["+M+"]":E+="."+M,typeof _=="object"?c.push.apply(c,v(E,_)):c.push([E,_])}return c}function g(m,w,c){if(typeof c=="object"){var M=y(c);Object.defineProperty(m,w,{get:n(M),set:x(c),enumerable:!0,configurable:!1})}else f[c]?Object.defineProperty(m,w,{get:(_=c,function(E,L,C){return E.getUniform(L.program,C[_])}),set:x(c),enumerable:!0,configurable:!1}):m[w]=function(E){switch(E){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var L=E.indexOf("vec");if(0<=L&&L<=1&&E.length===4+L){if((C=E.charCodeAt(E.length-1)-48)<2||C>4)throw new r("","Invalid data type");return E.charAt(0)==="b"?a(C,!1):a(C,0)}if(E.indexOf("mat")===0&&E.length===4){var C;if((C=E.charCodeAt(E.length-1)-48)<2||C>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+E);return a(C*C,0)}throw new r("","Unknown uniform data type for "+name+": "+E)}}(h[c].type);var _}function y(m){var w;if(Array.isArray(m)){w=new Array(m.length);for(var c=0;c<m.length;++c)g(w,c,m[c])}else for(var M in w={},m)g(w,M,m[M]);return w}var p=o(h,!0);return{get:n(y(p)),set:x(p),enumerable:!0,configurable:!0}}},3984:function(d){d.exports=function(s,t){for(var o={},r=0;r<s.length;++r)for(var n=s[r].name.split("."),a=o,i=0;i<n.length;++i){var u=n[i].split("[");if(u.length>1){u[0]in a||(a[u[0]]=[]),a=a[u[0]];for(var h=1;h<u.length;++h){var f=parseInt(u[h]);h<u.length-1||i<n.length-1?(f in a||(h<u.length-1?a[f]=[]:a[f]={}),a=a[f]):a[f]=t?r:s[r].type}}else i<n.length-1?(u[0]in a||(a[u[0]]={}),a=a[u[0]]):a[u[0]]=t?r:s[r].type}return o}},2631:function(d,s){s.uniforms=function(n,a){for(var i=n.getProgramParameter(a,n.ACTIVE_UNIFORMS),u=[],h=0;h<i;++h){var f=n.getActiveUniform(a,h);if(f){var x=r(n,f.type);if(f.size>1)for(var v=0;v<f.size;++v)u.push({name:f.name.replace("[0]","["+v+"]"),type:x});else u.push({name:f.name,type:x})}}return u},s.attributes=function(n,a){for(var i=n.getProgramParameter(a,n.ACTIVE_ATTRIBUTES),u=[],h=0;h<i;++h){var f=n.getActiveAttrib(a,h);f&&u.push({name:f.name,type:r(n,f.type)})}return u};var t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},o=null;function r(n,a){if(!o){var i=Object.keys(t);o={};for(var u=0;u<i.length;++u){var h=i[u];o[n[h]]=t[h]}}return o[a]}},1628:function(d,s,t){s.shader=function(x,v,g){return f(x).getShaderReference(v,g)},s.program=function(x,v,g,y,p){return f(x).getProgram(v,g,y,p)};var o=t(9068),r=t(3530),n=new(typeof WeakMap>"u"?t(4037):WeakMap),a=0;function i(x,v,g,y,p,m,w){this.id=x,this.src=v,this.type=g,this.shader=y,this.count=m,this.programs=[],this.cache=w}function u(x){this.gl=x,this.shaders=[{},{}],this.programs={}}i.prototype.dispose=function(){if(--this.count==0){for(var x=this.cache,v=x.gl,g=this.programs,y=0,p=g.length;y<p;++y){var m=x.programs[g[y]];m&&(delete x.programs[y],v.deleteProgram(m))}v.deleteShader(this.shader),delete x.shaders[this.type===v.FRAGMENT_SHADER|0][this.src]}};var h=u.prototype;function f(x){var v=n.get(x);return v||(v=new u(x),n.set(x,v)),v}h.getShaderReference=function(x,v){var g=this.gl,y=this.shaders[x===g.FRAGMENT_SHADER|0],p=y[v];if(p&&g.isShader(p.shader))p.count+=1;else{var m=function(w,c,M){var _=w.createShader(c);if(w.shaderSource(_,M),w.compileShader(_),!w.getShaderParameter(_,w.COMPILE_STATUS)){var E=w.getShaderInfoLog(_);try{var L=r(E,M,c)}catch(C){throw console.warn("Failed to format compiler error: "+C),new o(E,`Error compiling shader:
`+E)}throw new o(E,L.short,L.long)}return _}(g,x,v);p=y[v]=new i(a++,v,x,m,[],1,this)}return p},h.getProgram=function(x,v,g,y){var p=[x.id,v.id,g.join(":"),y.join(":")].join("@"),m=this.programs[p];return m&&this.gl.isProgram(m)||(this.programs[p]=m=function(w,c,M,_,E){var L=w.createProgram();w.attachShader(L,c),w.attachShader(L,M);for(var C=0;C<_.length;++C)w.bindAttribLocation(L,E[C],_[C]);if(w.linkProgram(L),!w.getProgramParameter(L,w.LINK_STATUS)){var O=w.getProgramInfoLog(L);throw new o(O,"Error linking program: "+O)}return L}(this.gl,x.shader,v.shader,g,y),x.programs.push(p),v.programs.push(p)),m}},3050:function(d){function s(o){this.plot=o,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}d.exports=function(o,r){var n=new s(o);return n.update(r),o.addOverlay(n),n};var t=s.prototype;t.update=function(o){o=o||{},this.enable=(o.enable||[!0,!0,!1,!1]).slice(),this.width=(o.width||[1,1,1,1]).slice(),this.color=(o.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(o.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},t.draw=function(){var o=this.enable,r=this.width,n=this.color,a=this.center,i=this.plot,u=i.line,h=i.dataBox,f=i.viewBox;if(u.bind(),h[0]<=a[0]&&a[0]<=h[2]&&h[1]<=a[1]&&a[1]<=h[3]){var x=f[0]+(a[0]-h[0])/(h[2]-h[0])*(f[2]-f[0]),v=f[1]+(a[1]-h[1])/(h[3]-h[1])*(f[3]-f[1]);o[0]&&u.drawLine(x,v,f[0],v,r[0],n[0]),o[1]&&u.drawLine(x,v,x,f[1],r[1],n[1]),o[2]&&u.drawLine(x,v,f[2],v,r[2],n[2]),o[3]&&u.drawLine(x,v,x,f[3],r[3],n[3])}},t.dispose=function(){this.plot.removeOverlay(this)}},3540:function(d,s,t){var o=t(6832),r=t(5158),n=o([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),a=o([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);d.exports=function(i){return r(i,n,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},6496:function(d,s,t){var o=t(5827),r=t(2944),n=t(3540);d.exports=function(v,g){var y=[];function p(_,E,L,C,O,I){var N=[_,E,L,0,0,0,1];N[C+3]=1,N[C]=O,y.push.apply(y,N),N[6]=-1,y.push.apply(y,N),N[C]=I,y.push.apply(y,N),y.push.apply(y,N),N[6]=1,y.push.apply(y,N),N[C]=O,y.push.apply(y,N)}p(0,0,0,0,0,1),p(0,0,0,1,0,1),p(0,0,0,2,0,1),p(1,0,0,1,-1,1),p(1,0,0,2,-1,1),p(0,1,0,0,-1,1),p(0,1,0,2,-1,1),p(0,0,1,0,-1,1),p(0,0,1,1,-1,1);var m=o(v,y),w=r(v,[{type:v.FLOAT,buffer:m,size:3,offset:0,stride:28},{type:v.FLOAT,buffer:m,size:3,offset:12,stride:28},{type:v.FLOAT,buffer:m,size:1,offset:24,stride:28}]),c=n(v);c.attributes.position.location=0,c.attributes.color.location=1,c.attributes.weight.location=2;var M=new i(v,m,w,c);return M.update(g),M};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function i(v,g,y,p){this.gl=v,this.buffer=g,this.vao=y,this.shader=p,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var u=i.prototype,h=[0,0,0],f=[0,0,0],x=[0,0];u.isTransparent=function(){return!1},u.drawTransparent=function(v){},u.draw=function(v){var g=this.gl,y=this.vao,p=this.shader;y.bind(),p.bind();var m,w=v.model||a,c=v.view||a,M=v.projection||a;this.axes&&(m=this.axes.lastCubeProps.axis);for(var _=h,E=f,L=0;L<3;++L)m&&m[L]<0?(_[L]=this.bounds[0][L],E[L]=this.bounds[1][L]):(_[L]=this.bounds[1][L],E[L]=this.bounds[0][L]);for(x[0]=g.drawingBufferWidth,x[1]=g.drawingBufferHeight,p.uniforms.model=w,p.uniforms.view=c,p.uniforms.projection=M,p.uniforms.coordinates=[this.position,_,E],p.uniforms.colors=this.colors,p.uniforms.screenShape=x,L=0;L<3;++L)p.uniforms.lineWidth=this.lineWidth[L]*this.pixelRatio,this.enabled[L]&&(y.draw(g.TRIANGLES,6,6*L),this.drawSides[L]&&y.draw(g.TRIANGLES,12,18+12*L));y.unbind()},u.update=function(v){v&&("bounds"in v&&(this.bounds=v.bounds),"position"in v&&(this.position=v.position),"lineWidth"in v&&(this.lineWidth=v.lineWidth),"colors"in v&&(this.colors=v.colors),"enabled"in v&&(this.enabled=v.enabled),"drawSides"in v&&(this.drawSides=v.drawSides))},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},9578:function(d,s,t){var o=t(6832),r=o([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=o([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),a=o([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),i=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},s.pickShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7307:function(d,s,t){var o=t(2858),r=t(4020),n=["xyz","xzy","yxz","yzx","zxy","zyx"],a=function(x,v){var g,y=x.length;for(g=0;g<y;g++){var p=x[g];if(p===v)return g;if(p>v)return g-1}return g},i=function(x,v,g){return x<v?v:x>g?g:x},u=function(x){var v=1/0;x.sort(function(m,w){return m-w});for(var g=x.length,y=1;y<g;y++){var p=Math.abs(x[y]-x[y-1]);p<v&&(v=p)}return v};d.exports=function(x,v){var g=x.startingPositions,y=x.maxLength||1e3,p=x.tubeSize||1,m=x.absoluteTubeSize,w=x.gridFill||"+x+y+z",c={};w.indexOf("-x")!==-1&&(c.reversedX=!0),w.indexOf("-y")!==-1&&(c.reversedY=!0),w.indexOf("-z")!==-1&&(c.reversedZ=!0),c.filled=n.indexOf(w.replace(/-/g,"").replace(/\+/g,""));var M=x.getVelocity||function(de){return function(Ce,xe,_e){var we=xe.vectors,Ae=xe.meshgrid,$=Ce[0],oe=Ce[1],pe=Ce[2],ye=Ae[0].length,ke=Ae[1].length,De=Ae[2].length,Pe=a(Ae[0],$),Re=a(Ae[1],oe),fe=a(Ae[2],pe),ve=Pe+1,Te=Re+1,ze=fe+1;if(Pe=i(Pe,0,ye-1),ve=i(ve,0,ye-1),Re=i(Re,0,ke-1),Te=i(Te,0,ke-1),fe=i(fe,0,De-1),ze=i(ze,0,De-1),Pe<0||Re<0||fe<0||ve>ye-1||Te>ke-1||ze>De-1)return o.create();var He,Ve,nt,tt,ot,pt,Tt=Ae[0][Pe],yt=Ae[0][ve],dt=Ae[1][Re],Pt=Ae[1][Te],Et=Ae[2][fe],Ot=($-Tt)/(yt-Tt),Nt=(oe-dt)/(Pt-dt),zt=(pe-Et)/(Ae[2][ze]-Et);switch(isFinite(Ot)||(Ot=.5),isFinite(Nt)||(Nt=.5),isFinite(zt)||(zt=.5),_e.reversedX&&(Pe=ye-1-Pe,ve=ye-1-ve),_e.reversedY&&(Re=ke-1-Re,Te=ke-1-Te),_e.reversedZ&&(fe=De-1-fe,ze=De-1-ze),_e.filled){case 5:ot=fe,pt=ze,nt=Re*De,tt=Te*De,He=Pe*De*ke,Ve=ve*De*ke;break;case 4:ot=fe,pt=ze,He=Pe*De,Ve=ve*De,nt=Re*De*ye,tt=Te*De*ye;break;case 3:nt=Re,tt=Te,ot=fe*ke,pt=ze*ke,He=Pe*ke*De,Ve=ve*ke*De;break;case 2:nt=Re,tt=Te,He=Pe*ke,Ve=ve*ke,ot=fe*ke*ye,pt=ze*ke*ye;break;case 1:He=Pe,Ve=ve,ot=fe*ye,pt=ze*ye,nt=Re*ye*De,tt=Te*ye*De;break;default:He=Pe,Ve=ve,nt=Re*ye,tt=Te*ye,ot=fe*ye*ke,pt=ze*ye*ke}var Ze=we[He+nt+ot],Ye=we[He+nt+pt],je=we[He+tt+ot],Ke=we[He+tt+pt],st=we[Ve+nt+ot],Se=we[Ve+nt+pt],Ie=we[Ve+tt+ot],We=we[Ve+tt+pt],it=o.create(),lt=o.create(),gt=o.create(),At=o.create();o.lerp(it,Ze,st,Ot),o.lerp(lt,Ye,Se,Ot),o.lerp(gt,je,Ie,Ot),o.lerp(At,Ke,We,Ot);var kt=o.create(),ht=o.create();o.lerp(kt,it,gt,Nt),o.lerp(ht,lt,At,Nt);var St=o.create();return o.lerp(St,kt,ht,zt),St}(de,x,c)},_=x.getDivergence||function(de,Ce){var xe=o.create(),_e=1e-4;o.add(xe,de,[_e,0,0]);var we=M(xe);o.subtract(we,we,Ce),o.scale(we,we,1/_e),o.add(xe,de,[0,_e,0]);var Ae=M(xe);o.subtract(Ae,Ae,Ce),o.scale(Ae,Ae,1/_e),o.add(xe,de,[0,0,_e]);var $=M(xe);return o.subtract($,$,Ce),o.scale($,$,1/_e),o.add(xe,we,Ae),o.add(xe,xe,$),xe},E=[],L=v[0][0],C=v[0][1],O=v[0][2],I=v[1][0],N=v[1][1],R=v[1][2],V=function(de){var Ce=de[0],xe=de[1],_e=de[2];return!(Ce<L||Ce>I||xe<C||xe>N||_e<O||_e>R)},F=10*o.distance(v[0],v[1])/y,D=F*F,U=1,j=0,J=g.length;J>1&&(U=function(de){for(var Ce=[],xe=[],_e=[],we={},Ae={},$={},oe=de.length,pe=0;pe<oe;pe++){var ye=de[pe],ke=ye[0],De=ye[1],Pe=ye[2];we[ke]||(Ce.push(ke),we[ke]=!0),Ae[De]||(xe.push(De),Ae[De]=!0),$[Pe]||(_e.push(Pe),$[Pe]=!0)}var Re=u(Ce),fe=u(xe),ve=u(_e),Te=Math.min(Re,fe,ve);return isFinite(Te)?Te:1}(g));for(var X=0;X<J;X++){var Z=o.create();o.copy(Z,g[X]);var Y=[Z],W=[],Q=M(Z),ne=Z;W.push(Q);var re=[],ie=_(Z,Q),se=o.length(ie);isFinite(se)&&se>j&&(j=se),re.push(se),E.push({points:Y,velocities:W,divergences:re});for(var ge=0;ge<100*y&&Y.length<y&&V(Z);){ge++;var ue=o.clone(Q),ce=o.squaredLength(ue);if(ce===0)break;ce>D&&o.scale(ue,ue,F/Math.sqrt(ce)),o.add(ue,ue,Z),Q=M(ue),o.squaredDistance(ne,ue)-D>-1e-4*D&&(Y.push(ue),ne=ue,W.push(Q),ie=_(ue,Q),se=o.length(ie),isFinite(se)&&se>j&&(j=se),re.push(se)),Z=ue}}var le=function(de,Ce,xe,_e){for(var we=0,Ae=0;Ae<de.length;Ae++)for(var $=de[Ae].velocities,oe=0;oe<$.length;oe++)we=Math.max(we,o.length($[oe]));var pe=de.map(function(He){return function(Ve,nt,tt,ot){for(var pt=Ve.points,Tt=Ve.velocities,yt=Ve.divergences,dt=[],Pt=[],Et=[],Ot=[],Nt=[],zt=[],Ze=0,Ye=0,je=r.create(),Ke=r.create(),st=0;st<pt.length;st++){var Se=pt[st],Ie=Tt[st],We=yt[st];nt===0&&(We=.05*tt),Ye=o.length(Ie)/ot,je=r.create(),o.copy(je,Ie),je[3]=We;for(var it=0;it<8;it++)Nt[it]=[Se[0],Se[1],Se[2],it];if(Ot.length>0)for(it=0;it<8;it++){var lt=(it+1)%8;dt.push(Ot[it],Nt[it],Nt[lt],Nt[lt],Ot[lt],Ot[it]),Et.push(Ke,je,je,je,Ke,Ke),zt.push(Ze,Ye,Ye,Ye,Ze,Ze);var gt=dt.length;Pt.push([gt-6,gt-5,gt-4],[gt-3,gt-2,gt-1])}var At=Ot;Ot=Nt,Nt=At;var kt=Ke;Ke=je,je=kt;var ht=Ze;Ze=Ye,Ye=ht}return{positions:dt,cells:Pt,vectors:Et,vertexIntensity:zt}}(He,xe,_e,we)}),ye=[],ke=[],De=[],Pe=[];for(Ae=0;Ae<pe.length;Ae++){var Re=pe[Ae],fe=ye.length;for(ye=ye.concat(Re.positions),De=De.concat(Re.vectors),Pe=Pe.concat(Re.vertexIntensity),oe=0;oe<Re.cells.length;oe++){var ve=Re.cells[oe],Te=[];ke.push(Te);for(var ze=0;ze<ve.length;ze++)Te.push(ve[ze]+fe)}}return{positions:ye,cells:ke,vectors:De,vertexIntensity:Pe,colormap:Ce}}(E,x.colormap,j,U);return m?le.tubeScale=m:(j===0&&(j=1),le.tubeScale=.5*p*U/j),le};var h=t(9578),f=t(1140).createMesh;d.exports.createTubeMesh=function(x,v){return f(x,v,{shaders:h,traceType:"streamtube"})}},9054:function(d,s,t){var o=t(5158),r=t(6832),n=r([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),a=r([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color — in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),i=r([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),u=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);s.createShader=function(h){var f=o(h,n,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f.attributes.normal.location=2,f},s.createPickShader=function(h){var f=o(h,n,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f.attributes.normal.location=2,f},s.createContourShader=function(h){var f=o(h,i,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f},s.createPickContourShader=function(h){var f=o(h,i,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f}},3754:function(d,s,t){d.exports=function(ne){var re=ne.gl,ie=c(re),se=_(re),ge=M(re),ue=E(re),ce=r(re),le=n(re,[{buffer:ce,size:4,stride:40,offset:0},{buffer:ce,size:3,stride:40,offset:16},{buffer:ce,size:3,stride:40,offset:28}]),de=r(re),Ce=n(re,[{buffer:de,size:4,stride:20,offset:0},{buffer:de,size:1,stride:20,offset:16}]),xe=r(re),_e=n(re,[{buffer:xe,size:2,type:re.FLOAT}]),we=a(re,1,256,re.RGBA,re.UNSIGNED_BYTE);we.minFilter=re.LINEAR,we.magFilter=re.LINEAR;var Ae=new N(re,[0,0],[[0,0,0],[0,0,0]],ie,se,ce,le,we,ge,ue,de,Ce,xe,_e,[0,0,0]),$={levels:[[],[],[]]};for(var oe in ne)$[oe]=ne[oe];return $.colormap=$.colormap||"jet",Ae.update($),Ae};var o=t(2288),r=t(5827),n=t(2944),a=t(8931),i=t(5306),u=t(9156),h=t(7498),f=t(7382),x=t(5050),v=t(4162),g=t(104),y=t(7437),p=t(5070),m=t(9144),w=t(9054),c=w.createShader,M=w.createContourShader,_=w.createPickShader,E=w.createPickContourShader,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],C=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],O=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function I(ne,re,ie,se,ge){this.position=ne,this.index=re,this.uv=ie,this.level=se,this.dataCoordinate=ge}function N(ne,re,ie,se,ge,ue,ce,le,de,Ce,xe,_e,we,Ae,$){this.gl=ne,this.shape=re,this.bounds=ie,this.objectOffset=$,this.intensityBounds=[],this._shader=se,this._pickShader=ge,this._coordinateBuffer=ue,this._vao=ce,this._colorMap=le,this._contourShader=de,this._contourPickShader=Ce,this._contourBuffer=xe,this._contourVAO=_e,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new I([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=we,this._dynamicVAO=Ae,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[x(i.mallocFloat(1024),[0,0]),x(i.mallocFloat(1024),[0,0]),x(i.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}(function(){for(var ne=0;ne<3;++ne){var re=O[ne],ie=(ne+2)%3;re[(ne+1)%3+0]=1,re[ie+3]=1,re[ne+6]=1}})();var R=N.prototype;R.genColormap=function(ne,re){var ie=!1,se=f([u({colormap:ne,nshades:256,format:"rgba"}).map(function(ge,ue){var ce=re?function(le,de){if(!de||!de.length)return 1;for(var Ce=0;Ce<de.length;++Ce){if(de.length<2)return 1;if(de[Ce][0]===le)return de[Ce][1];if(de[Ce][0]>le&&Ce>0){var xe=(de[Ce][0]-le)/(de[Ce][0]-de[Ce-1][0]);return de[Ce][1]*(1-xe)+xe*de[Ce-1][1]}}return 1}(ue/255,re):ge[3];return ce<1&&(ie=!0),[ge[0],ge[1],ge[2],255*ce]})]);return h.divseq(se,255),this.hasAlphaScale=ie,se},R.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},R.isOpaque=function(){return!this.isTransparent()},R.pickSlots=1,R.setPickBase=function(ne){this.pickId=ne};var V=[0,0,0],F={showSurface:!1,showContour:!1,projections:[L.slice(),L.slice(),L.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function D(ne,re){var ie,se,ge,ue=re.axes&&re.axes.lastCubeProps.axis||V,ce=re.showSurface,le=re.showContour;for(ie=0;ie<3;++ie)for(ce=ce||re.surfaceProject[ie],se=0;se<3;++se)le=le||re.contourProject[ie][se];for(ie=0;ie<3;++ie){var de=F.projections[ie];for(se=0;se<16;++se)de[se]=0;for(se=0;se<4;++se)de[5*se]=1;de[5*ie]=0,de[12+ie]=re.axesBounds[+(ue[ie]>0)][ie],g(de,ne.model,de);var Ce=F.clipBounds[ie];for(ge=0;ge<2;++ge)for(se=0;se<3;++se)Ce[ge][se]=ne.clipBounds[ge][se];Ce[0][ie]=-1e8,Ce[1][ie]=1e8}return F.showSurface=ce,F.showContour=le,F}var U={model:L,view:L,projection:L,inverseModel:L.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},j=L.slice(),J=[1,0,0,0,1,0,0,0,1];function X(ne,re){ne=ne||{};var ie=this.gl;ie.disable(ie.CULL_FACE),this._colorMap.bind(0);var se=U;se.model=ne.model||L,se.view=ne.view||L,se.projection=ne.projection||L,se.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],se.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],se.objectOffset=this.objectOffset,se.contourColor=this.contourColor[0],se.inverseModel=y(se.inverseModel,se.model);for(var ge=0;ge<2;++ge)for(var ue=se.clipBounds[ge],ce=0;ce<3;++ce)ue[ce]=Math.min(Math.max(this.clipBounds[ge][ce],-1e8),1e8);se.kambient=this.ambientLight,se.kdiffuse=this.diffuseLight,se.kspecular=this.specularLight,se.roughness=this.roughness,se.fresnel=this.fresnel,se.opacity=this.opacity,se.height=0,se.permutation=J,se.vertexColor=this.vertexColor;var le=j;for(g(le,se.view,se.model),g(le,se.projection,le),y(le,le),ge=0;ge<3;++ge)se.eyePosition[ge]=le[12+ge]/le[15];var de=le[15];for(ge=0;ge<3;++ge)de+=this.lightPosition[ge]*le[4*ge+3];for(ge=0;ge<3;++ge){var Ce=le[12+ge];for(ce=0;ce<3;++ce)Ce+=le[4*ce+ge]*this.lightPosition[ce];se.lightPosition[ge]=Ce/de}var xe=D(se,this);if(xe.showSurface){for(this._shader.bind(),this._shader.uniforms=se,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ie.TRIANGLES,this._vertexCount),ge=0;ge<3;++ge)this.surfaceProject[ge]&&this.vertexCount&&(this._shader.uniforms.model=xe.projections[ge],this._shader.uniforms.clipBounds=xe.clipBounds[ge],this._vao.draw(ie.TRIANGLES,this._vertexCount));this._vao.unbind()}if(xe.showContour){var _e=this._contourShader;se.kambient=1,se.kdiffuse=0,se.kspecular=0,se.opacity=1,_e.bind(),_e.uniforms=se;var we=this._contourVAO;for(we.bind(),ge=0;ge<3;++ge)for(_e.uniforms.permutation=O[ge],ie.lineWidth(this.contourWidth[ge]*this.pixelRatio),ce=0;ce<this.contourLevels[ge].length;++ce)ce===this.highlightLevel[ge]?(_e.uniforms.contourColor=this.highlightColor[ge],_e.uniforms.contourTint=this.highlightTint[ge]):ce!==0&&ce-1!==this.highlightLevel[ge]||(_e.uniforms.contourColor=this.contourColor[ge],_e.uniforms.contourTint=this.contourTint[ge]),this._contourCounts[ge][ce]&&(_e.uniforms.height=this.contourLevels[ge][ce],we.draw(ie.LINES,this._contourCounts[ge][ce],this._contourOffsets[ge][ce]));for(ge=0;ge<3;++ge)for(_e.uniforms.model=xe.projections[ge],_e.uniforms.clipBounds=xe.clipBounds[ge],ce=0;ce<3;++ce)if(this.contourProject[ge][ce]){_e.uniforms.permutation=O[ce],ie.lineWidth(this.contourWidth[ce]*this.pixelRatio);for(var Ae=0;Ae<this.contourLevels[ce].length;++Ae)Ae===this.highlightLevel[ce]?(_e.uniforms.contourColor=this.highlightColor[ce],_e.uniforms.contourTint=this.highlightTint[ce]):Ae!==0&&Ae-1!==this.highlightLevel[ce]||(_e.uniforms.contourColor=this.contourColor[ce],_e.uniforms.contourTint=this.contourTint[ce]),this._contourCounts[ce][Ae]&&(_e.uniforms.height=this.contourLevels[ce][Ae],we.draw(ie.LINES,this._contourCounts[ce][Ae],this._contourOffsets[ce][Ae]))}for(we.unbind(),(we=this._dynamicVAO).bind(),ge=0;ge<3;++ge)if(this._dynamicCounts[ge]!==0)for(_e.uniforms.model=se.model,_e.uniforms.clipBounds=se.clipBounds,_e.uniforms.permutation=O[ge],ie.lineWidth(this.dynamicWidth[ge]*this.pixelRatio),_e.uniforms.contourColor=this.dynamicColor[ge],_e.uniforms.contourTint=this.dynamicTint[ge],_e.uniforms.height=this.dynamicLevel[ge],we.draw(ie.LINES,this._dynamicCounts[ge],this._dynamicOffsets[ge]),ce=0;ce<3;++ce)this.contourProject[ce][ge]&&(_e.uniforms.model=xe.projections[ce],_e.uniforms.clipBounds=xe.clipBounds[ce],we.draw(ie.LINES,this._dynamicCounts[ge],this._dynamicOffsets[ge]));we.unbind()}}R.draw=function(ne){return X.call(this,ne,!1)},R.drawTransparent=function(ne){return X.call(this,ne,!0)};var Z={model:L,view:L,projection:L,inverseModel:L,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function Y(ne,re){return Array.isArray(ne)?[re(ne[0]),re(ne[1]),re(ne[2])]:[re(ne),re(ne),re(ne)]}function W(ne){return Array.isArray(ne)?ne.length===3?[ne[0],ne[1],ne[2],1]:[ne[0],ne[1],ne[2],ne[3]]:[0,0,0,1]}function Q(ne){if(Array.isArray(ne)){if(Array.isArray(ne))return[W(ne[0]),W(ne[1]),W(ne[2])];var re=W(ne);return[re.slice(),re.slice(),re.slice()]}}R.drawPick=function(ne){ne=ne||{};var re=this.gl;re.disable(re.CULL_FACE);var ie=Z;ie.model=ne.model||L,ie.view=ne.view||L,ie.projection=ne.projection||L,ie.shape=this._field[2].shape,ie.pickId=this.pickId/255,ie.lowerBound=this.bounds[0],ie.upperBound=this.bounds[1],ie.objectOffset=this.objectOffset,ie.permutation=J;for(var se=0;se<2;++se)for(var ge=ie.clipBounds[se],ue=0;ue<3;++ue)ge[ue]=Math.min(Math.max(this.clipBounds[se][ue],-1e8),1e8);var ce=D(ie,this);if(ce.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ie,this._vao.bind(),this._vao.draw(re.TRIANGLES,this._vertexCount),se=0;se<3;++se)this.surfaceProject[se]&&(this._pickShader.uniforms.model=ce.projections[se],this._pickShader.uniforms.clipBounds=ce.clipBounds[se],this._vao.draw(re.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ce.showContour){var le=this._contourPickShader;le.bind(),le.uniforms=ie;var de=this._contourVAO;for(de.bind(),ue=0;ue<3;++ue)for(re.lineWidth(this.contourWidth[ue]*this.pixelRatio),le.uniforms.permutation=O[ue],se=0;se<this.contourLevels[ue].length;++se)this._contourCounts[ue][se]&&(le.uniforms.height=this.contourLevels[ue][se],de.draw(re.LINES,this._contourCounts[ue][se],this._contourOffsets[ue][se]));for(se=0;se<3;++se)for(le.uniforms.model=ce.projections[se],le.uniforms.clipBounds=ce.clipBounds[se],ue=0;ue<3;++ue)if(this.contourProject[se][ue]){le.uniforms.permutation=O[ue],re.lineWidth(this.contourWidth[ue]*this.pixelRatio);for(var Ce=0;Ce<this.contourLevels[ue].length;++Ce)this._contourCounts[ue][Ce]&&(le.uniforms.height=this.contourLevels[ue][Ce],de.draw(re.LINES,this._contourCounts[ue][Ce],this._contourOffsets[ue][Ce]))}de.unbind()}},R.pick=function(ne){if(!ne||ne.id!==this.pickId)return null;var re=this._field[2].shape,ie=this._pickResult,se=re[0]*(ne.value[0]+(ne.value[2]>>4)/16)/255,ge=Math.floor(se),ue=se-ge,ce=re[1]*(ne.value[1]+(15&ne.value[2])/16)/255,le=Math.floor(ce),de=ce-le;ge+=1,le+=1;var Ce=ie.position;Ce[0]=Ce[1]=Ce[2]=0;for(var xe=0;xe<2;++xe)for(var _e=xe?ue:1-ue,we=0;we<2;++we)for(var Ae=ge+xe,$=le+we,oe=_e*(we?de:1-de),pe=0;pe<3;++pe)Ce[pe]+=this._field[pe].get(Ae,$)*oe;for(var ye=this._pickResult.level,ke=0;ke<3;++ke)if(ye[ke]=p.le(this.contourLevels[ke],Ce[ke]),ye[ke]<0)this.contourLevels[ke].length>0&&(ye[ke]=0);else if(ye[ke]<this.contourLevels[ke].length-1){var De=this.contourLevels[ke][ye[ke]],Pe=this.contourLevels[ke][ye[ke]+1];Math.abs(De-Ce[ke])>Math.abs(Pe-Ce[ke])&&(ye[ke]+=1)}for(ie.index[0]=ue<.5?ge:ge+1,ie.index[1]=de<.5?le:le+1,ie.uv[0]=se/re[0],ie.uv[1]=ce/re[1],pe=0;pe<3;++pe)ie.dataCoordinate[pe]=this._field[pe].get(ie.index[0],ie.index[1]);return ie},R.padField=function(ne,re){var ie=re.shape.slice(),se=ne.shape.slice();h.assign(ne.lo(1,1).hi(ie[0],ie[1]),re),h.assign(ne.lo(1).hi(ie[0],1),re.hi(ie[0],1)),h.assign(ne.lo(1,se[1]-1).hi(ie[0],1),re.lo(0,ie[1]-1).hi(ie[0],1)),h.assign(ne.lo(0,1).hi(1,ie[1]),re.hi(1)),h.assign(ne.lo(se[0]-1,1).hi(1,ie[1]),re.lo(ie[0]-1)),ne.set(0,0,re.get(0,0)),ne.set(0,se[1]-1,re.get(0,ie[1]-1)),ne.set(se[0]-1,0,re.get(ie[0]-1,0)),ne.set(se[0]-1,se[1]-1,re.get(ie[0]-1,ie[1]-1))},R.update=function(ne){ne=ne||{},this.objectOffset=ne.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in ne&&(this.contourWidth=Y(ne.contourWidth,Number)),"showContour"in ne&&(this.showContour=Y(ne.showContour,Boolean)),"showSurface"in ne&&(this.showSurface=!!ne.showSurface),"contourTint"in ne&&(this.contourTint=Y(ne.contourTint,Boolean)),"contourColor"in ne&&(this.contourColor=Q(ne.contourColor)),"contourProject"in ne&&(this.contourProject=Y(ne.contourProject,function(mn){return Y(mn,Boolean)})),"surfaceProject"in ne&&(this.surfaceProject=ne.surfaceProject),"dynamicColor"in ne&&(this.dynamicColor=Q(ne.dynamicColor)),"dynamicTint"in ne&&(this.dynamicTint=Y(ne.dynamicTint,Number)),"dynamicWidth"in ne&&(this.dynamicWidth=Y(ne.dynamicWidth,Number)),"opacity"in ne&&(this.opacity=ne.opacity),"opacityscale"in ne&&(this.opacityscale=ne.opacityscale),"colorBounds"in ne&&(this.colorBounds=ne.colorBounds),"vertexColor"in ne&&(this.vertexColor=ne.vertexColor?1:0),"colormap"in ne&&this._colorMap.setPixels(this.genColormap(ne.colormap,this.opacityscale));var re=ne.field||ne.coords&&ne.coords[2]||null,ie=!1;if(re||(re=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in ne||"coords"in ne){var se=(re.shape[0]+2)*(re.shape[1]+2);se>this._field[2].data.length&&(i.freeFloat(this._field[2].data),this._field[2].data=i.mallocFloat(o.nextPow2(se))),this._field[2]=x(this._field[2].data,[re.shape[0]+2,re.shape[1]+2]),this.padField(this._field[2],re),this.shape=re.shape.slice();for(var ge=this.shape,ue=0;ue<2;++ue)this._field[2].size>this._field[ue].data.length&&(i.freeFloat(this._field[ue].data),this._field[ue].data=i.mallocFloat(this._field[2].size)),this._field[ue]=x(this._field[ue].data,[ge[0]+2,ge[1]+2]);if(ne.coords){var ce=ne.coords;if(!Array.isArray(ce)||ce.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(ue=0;ue<2;++ue){var le=ce[ue];for(we=0;we<2;++we)if(le.shape[we]!==ge[we])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[ue],le)}}else if(ne.ticks){var de=ne.ticks;if(!Array.isArray(de)||de.length!==2)throw new Error("gl-surface: invalid ticks");for(ue=0;ue<2;++ue){var Ce=de[ue];if((Array.isArray(Ce)||Ce.length)&&(Ce=x(Ce)),Ce.shape[0]!==ge[ue])throw new Error("gl-surface: invalid tick length");var xe=x(Ce.data,ge);xe.stride[ue]=Ce.stride[0],xe.stride[1^ue]=0,this.padField(this._field[ue],xe)}}else{for(ue=0;ue<2;++ue){var _e=[0,0];_e[ue]=1,this._field[ue]=x(this._field[ue].data,[ge[0]+2,ge[1]+2],_e,0)}this._field[0].set(0,0,0);for(var we=0;we<ge[0];++we)this._field[0].set(we+1,0,we);for(this._field[0].set(ge[0]+1,0,ge[0]-1),this._field[1].set(0,0,0),we=0;we<ge[1];++we)this._field[1].set(0,we+1,we);this._field[1].set(0,ge[1]+1,ge[1]-1)}var Ae=this._field,$=x(i.mallocFloat(3*Ae[2].size*2),[3,ge[0]+2,ge[1]+2,2]);for(ue=0;ue<3;++ue)m($.pick(ue),Ae[ue],"mirror");var oe=x(i.mallocFloat(3*Ae[2].size),[ge[0]+2,ge[1]+2,3]);for(ue=0;ue<ge[0]+2;++ue)for(we=0;we<ge[1]+2;++we){var pe=$.get(0,ue,we,0),ye=$.get(0,ue,we,1),ke=$.get(1,ue,we,0),De=$.get(1,ue,we,1),Pe=$.get(2,ue,we,0),Re=$.get(2,ue,we,1),fe=ke*Re-De*Pe,ve=Pe*ye-Re*pe,Te=pe*De-ye*ke,ze=Math.sqrt(fe*fe+ve*ve+Te*Te);ze<1e-8?(ze=Math.max(Math.abs(fe),Math.abs(ve),Math.abs(Te)))<1e-8?(Te=1,ve=fe=0,ze=1):ze=1/ze:ze=1/Math.sqrt(ze),oe.set(ue,we,0,fe*ze),oe.set(ue,we,1,ve*ze),oe.set(ue,we,2,Te*ze)}i.free($.data);var He=[1/0,1/0,1/0],Ve=[-1/0,-1/0,-1/0],nt=1/0,tt=-1/0,ot=(ge[0]-1)*(ge[1]-1)*6,pt=i.mallocFloat(o.nextPow2(10*ot)),Tt=0,yt=0;for(ue=0;ue<ge[0]-1;++ue)e:for(we=0;we<ge[1]-1;++we){for(var dt=0;dt<2;++dt)for(var Pt=0;Pt<2;++Pt)for(var Et=0;Et<3;++Et){var Ot=this._field[Et].get(1+ue+dt,1+we+Pt);if(isNaN(Ot)||!isFinite(Ot))continue e}for(Et=0;Et<6;++Et){var Nt=ue+C[Et][0],zt=we+C[Et][1],Ze=this._field[0].get(Nt+1,zt+1),Ye=this._field[1].get(Nt+1,zt+1);Ot=this._field[2].get(Nt+1,zt+1),fe=oe.get(Nt+1,zt+1,0),ve=oe.get(Nt+1,zt+1,1),Te=oe.get(Nt+1,zt+1,2),ne.intensity&&(je=ne.intensity.get(Nt,zt));var je=ne.intensity?ne.intensity.get(Nt,zt):Ot+this.objectOffset[2];pt[Tt++]=Nt,pt[Tt++]=zt,pt[Tt++]=Ze,pt[Tt++]=Ye,pt[Tt++]=Ot,pt[Tt++]=0,pt[Tt++]=je,pt[Tt++]=fe,pt[Tt++]=ve,pt[Tt++]=Te,He[0]=Math.min(He[0],Ze+this.objectOffset[0]),He[1]=Math.min(He[1],Ye+this.objectOffset[1]),He[2]=Math.min(He[2],Ot+this.objectOffset[2]),nt=Math.min(nt,je),Ve[0]=Math.max(Ve[0],Ze+this.objectOffset[0]),Ve[1]=Math.max(Ve[1],Ye+this.objectOffset[1]),Ve[2]=Math.max(Ve[2],Ot+this.objectOffset[2]),tt=Math.max(tt,je),yt+=1}}for(ne.intensityBounds&&(nt=+ne.intensityBounds[0],tt=+ne.intensityBounds[1]),ue=6;ue<Tt;ue+=10)pt[ue]=(pt[ue]-nt)/(tt-nt);this._vertexCount=yt,this._coordinateBuffer.update(pt.subarray(0,Tt)),i.freeFloat(pt),i.free(oe.data),this.bounds=[He,Ve],this.intensity=ne.intensity||this._field[2],this.intensityBounds[0]===nt&&this.intensityBounds[1]===tt||(ie=!0),this.intensityBounds=[nt,tt]}if("levels"in ne){var Ke=ne.levels;for(Ke=Array.isArray(Ke[0])?Ke.slice():[[],[],Ke],ue=0;ue<3;++ue)Ke[ue]=Ke[ue].slice(),Ke[ue].sort(function(mn,en){return mn-en});for(ue=0;ue<3;++ue)for(we=0;we<Ke[ue].length;++we)Ke[ue][we]-=this.objectOffset[ue];e:for(ue=0;ue<3;++ue){if(Ke[ue].length!==this.contourLevels[ue].length){ie=!0;break}for(we=0;we<Ke[ue].length;++we)if(Ke[ue][we]!==this.contourLevels[ue][we]){ie=!0;break e}}this.contourLevels=Ke}if(ie){Ae=this._field,ge=this.shape;for(var st=[],Se=0;Se<3;++Se){var Ie=this.contourLevels[Se],We=[],it=[],lt=[0,0,0];for(ue=0;ue<Ie.length;++ue){var gt=v(this._field[Se],Ie[ue]);We.push(st.length/5|0),yt=0;e:for(we=0;we<gt.cells.length;++we){var At=gt.cells[we];for(Et=0;Et<2;++Et){var kt=gt.positions[At[Et]],ht=kt[0],St=0|Math.floor(ht),vt=ht-St,Mt=kt[1],It=0|Math.floor(Mt),Ut=Mt-It,jt=!1;t:for(var qt=0;qt<3;++qt){lt[qt]=0;var Yt=(Se+qt+1)%3;for(dt=0;dt<2;++dt){var Kt=dt?vt:1-vt;for(Nt=0|Math.min(Math.max(St+dt,0),ge[0]),Pt=0;Pt<2;++Pt){var pn=Pt?Ut:1-Ut;if(zt=0|Math.min(Math.max(It+Pt,0),ge[1]),Ot=qt<2?this._field[Yt].get(Nt,zt):(this.intensity.get(Nt,zt)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Ot)||isNaN(Ot)){jt=!0;break t}var nn=Kt*pn;lt[qt]+=nn*Ot}}}if(jt){if(Et>0){for(var xn=0;xn<5;++xn)st.pop();yt-=1}continue e}st.push(lt[0],lt[1],kt[0],kt[1],lt[2]),yt+=1}}it.push(yt)}this._contourOffsets[Se]=We,this._contourCounts[Se]=it}var jn=i.mallocFloat(st.length);for(ue=0;ue<st.length;++ue)jn[ue]=st[ue];this._contourBuffer.update(jn),i.freeFloat(jn)}},R.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var ne=0;ne<3;++ne)i.freeFloat(this._field[ne].data)},R.highlight=function(ne){var re,ie;if(!ne)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(re=0;re<3;++re)this.enableHighlight[re]?this.highlightLevel[re]=ne.level[re]:this.highlightLevel[re]=-1;for(ie=this.snapToData?ne.dataCoordinate:ne.position,re=0;re<3;++re)ie[re]-=this.objectOffset[re];if(this.enableDynamic[0]&&ie[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&ie[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&ie[2]!==this.dynamicLevel[2]){for(var se=0,ge=this.shape,ue=i.mallocFloat(12*ge[0]*ge[1]),ce=0;ce<3;++ce)if(this.enableDynamic[ce]){this.dynamicLevel[ce]=ie[ce];var le=(ce+1)%3,de=(ce+2)%3,Ce=this._field[ce],xe=this._field[le],_e=this._field[de],we=v(Ce,ie[ce]),Ae=we.cells,$=we.positions;for(this._dynamicOffsets[ce]=se,re=0;re<Ae.length;++re)for(var oe=Ae[re],pe=0;pe<2;++pe){var ye=$[oe[pe]],ke=+ye[0],De=0|ke,Pe=0|Math.min(De+1,ge[0]),Re=ke-De,fe=1-Re,ve=+ye[1],Te=0|ve,ze=0|Math.min(Te+1,ge[1]),He=ve-Te,Ve=1-He,nt=fe*Ve,tt=fe*He,ot=Re*Ve,pt=Re*He,Tt=nt*xe.get(De,Te)+tt*xe.get(De,ze)+ot*xe.get(Pe,Te)+pt*xe.get(Pe,ze),yt=nt*_e.get(De,Te)+tt*_e.get(De,ze)+ot*_e.get(Pe,Te)+pt*_e.get(Pe,ze);if(isNaN(Tt)||isNaN(yt)){pe&&(se-=1);break}ue[2*se+0]=Tt,ue[2*se+1]=yt,se+=1}this._dynamicCounts[ce]=se-this._dynamicOffsets[ce]}else this.dynamicLevel[ce]=NaN,this._dynamicCounts[ce]=0;this._dynamicBuffer.update(ue.subarray(0,2*se)),i.freeFloat(ue)}}},8931:function(d,s,t){var o=t(5050),r=t(7498),n=t(5306);d.exports=function(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(a||h(_),typeof arguments[1]=="number")return w(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return w(_,0|arguments[1][0],0|arguments[1][1],arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var E=arguments[1],L=f(E)?E:E.raw;if(L)return c(_,L,0|E.width,0|E.height,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(E.shape&&E.data&&E.stride)return M(_,E)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var a=null,i=null,u=null;function h(_){a=[_.LINEAR,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_NEAREST],i=[_.NEAREST,_.LINEAR,_.NEAREST_MIPMAP_NEAREST,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_LINEAR],u=[_.REPEAT,_.CLAMP_TO_EDGE,_.MIRRORED_REPEAT]}function f(_){return typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&_ instanceof HTMLVideoElement||typeof ImageData<"u"&&_ instanceof ImageData}var x=function(_,E){r.muls(_,E,255)};function v(_,E,L){var C=_.gl,O=C.getParameter(C.MAX_TEXTURE_SIZE);if(E<0||E>O||L<0||L>O)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[E,L],_.bind(),C.texImage2D(C.TEXTURE_2D,0,_.format,E,L,0,_.format,_.type,null),_._mipLevels=[0],_}function g(_,E,L,C,O,I){this.gl=_,this.handle=E,this.format=O,this.type=I,this._shape=[L,C],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var N=this,R=[this._wrapS,this._wrapT];Object.defineProperties(R,[{get:function(){return N._wrapS},set:function(F){return N.wrapS=F}},{get:function(){return N._wrapT},set:function(F){return N.wrapT=F}}]),this._wrapVector=R;var V=[this._shape[0],this._shape[1]];Object.defineProperties(V,[{get:function(){return N._shape[0]},set:function(F){return N.width=F}},{get:function(){return N._shape[1]},set:function(F){return N.height=F}}]),this._shapeVector=V}var y=g.prototype;function p(_,E){return _.length===3?E[2]===1&&E[1]===_[0]*_[2]&&E[0]===_[2]:E[0]===1&&E[1]===_[0]}function m(_){var E=_.createTexture();return _.bindTexture(_.TEXTURE_2D,E),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),E}function w(_,E,L,C,O){var I=_.getParameter(_.MAX_TEXTURE_SIZE);if(E<0||E>I||L<0||L>I)throw new Error("gl-texture2d: Invalid texture shape");if(O===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var N=m(_);return _.texImage2D(_.TEXTURE_2D,0,C,E,L,0,C,O,null),new g(_,N,E,L,C,O)}function c(_,E,L,C,O,I){var N=m(_);return _.texImage2D(_.TEXTURE_2D,0,O,O,I,E),new g(_,N,L,C,O,I)}function M(_,E){var L=E.dtype,C=E.shape.slice(),O=_.getParameter(_.MAX_TEXTURE_SIZE);if(C[0]<0||C[0]>O||C[1]<0||C[1]>O)throw new Error("gl-texture2d: Invalid texture size");var I=p(C,E.stride.slice()),N=0;L==="float32"?N=_.FLOAT:L==="float64"?(N=_.FLOAT,I=!1,L="float32"):L==="uint8"?N=_.UNSIGNED_BYTE:(N=_.UNSIGNED_BYTE,I=!1,L="uint8");var R,V,F=0;if(C.length===2)F=_.LUMINANCE,C=[C[0],C[1],1],E=o(E.data,C,[E.stride[0],E.stride[1],1],E.offset);else{if(C.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(C[2]===1)F=_.ALPHA;else if(C[2]===2)F=_.LUMINANCE_ALPHA;else if(C[2]===3)F=_.RGB;else{if(C[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");F=_.RGBA}}N!==_.FLOAT||_.getExtension("OES_texture_float")||(N=_.UNSIGNED_BYTE,I=!1);var D=E.size;if(I)R=E.offset===0&&E.data.length===D?E.data:E.data.subarray(E.offset,E.offset+D);else{var U=[C[2],C[2]*C[0],1];V=n.malloc(D,L);var j=o(V,C,U,0);L!=="float32"&&L!=="float64"||N!==_.UNSIGNED_BYTE?r.assign(j,E):x(j,E),R=V.subarray(0,D)}var J=m(_);return _.texImage2D(_.TEXTURE_2D,0,F,C[0],C[1],0,F,N,R),I||n.free(V),new g(_,J,C[0],C[1],F,N)}Object.defineProperties(y,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var E=this.gl;if(this.type===E.FLOAT&&a.indexOf(_)>=0&&(E.getExtension("OES_texture_float_linear")||(_=E.NEAREST)),i.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var E=this.gl;if(this.type===E.FLOAT&&a.indexOf(_)>=0&&(E.getExtension("OES_texture_float_linear")||(_=E.NEAREST)),i.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var E=this._anisoSamples;if(this._anisoSamples=0|Math.max(_,1),E!==this._anisoSamples){var L=this.gl.getExtension("EXT_texture_filter_anisotropic");L&&this.gl.texParameterf(this.gl.TEXTURE_2D,L.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),u.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),u.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),_.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var E=0;E<2;++E)if(u.indexOf(_[E])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var L=this.gl;return this.bind(),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,this._wrapS),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(Array.isArray(_)){if(_.length!==2)throw new Error("gl-texture2d: Invalid texture shape")}else _=[0|_,0|_];return v(this,0|_[0],0|_[1]),[0|_[0],0|_[1]]}},width:{get:function(){return this._shape[0]},set:function(_){return v(this,_|=0,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return _|=0,v(this,this._shape[0],_),_}}}),y.bind=function(_){var E=this.gl;return _!==void 0&&E.activeTexture(E.TEXTURE0+(0|_)),E.bindTexture(E.TEXTURE_2D,this.handle),_!==void 0?0|_:E.getParameter(E.ACTIVE_TEXTURE)-E.TEXTURE0},y.dispose=function(){this.gl.deleteTexture(this.handle)},y.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),E=0;_>0;++E,_>>>=1)this._mipLevels.indexOf(E)<0&&this._mipLevels.push(E)},y.setPixels=function(_,E,L,C){var O=this.gl;this.bind(),Array.isArray(E)?(C=L,L=0|E[1],E=0|E[0]):(E=E||0,L=L||0),C=C||0;var I=f(_)?_:_.raw;if(I)this._mipLevels.indexOf(C)<0?(O.texImage2D(O.TEXTURE_2D,0,this.format,this.format,this.type,I),this._mipLevels.push(C)):O.texSubImage2D(O.TEXTURE_2D,C,E,L,this.format,this.type,I);else{if(!(_.shape&&_.stride&&_.data))throw new Error("gl-texture2d: Unsupported data type");if(_.shape.length<2||E+_.shape[1]>this._shape[1]>>>C||L+_.shape[0]>this._shape[0]>>>C||E<0||L<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");(function(N,R,V,F,D,U,j,J){var X=J.dtype,Z=J.shape.slice();if(Z.length<2||Z.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var Y=0,W=0,Q=p(Z,J.stride.slice());if(X==="float32"?Y=N.FLOAT:X==="float64"?(Y=N.FLOAT,Q=!1,X="float32"):X==="uint8"?Y=N.UNSIGNED_BYTE:(Y=N.UNSIGNED_BYTE,Q=!1,X="uint8"),Z.length===2)W=N.LUMINANCE,Z=[Z[0],Z[1],1],J=o(J.data,Z,[J.stride[0],J.stride[1],1],J.offset);else{if(Z.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(Z[2]===1)W=N.ALPHA;else if(Z[2]===2)W=N.LUMINANCE_ALPHA;else if(Z[2]===3)W=N.RGB;else{if(Z[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");W=N.RGBA}Z[2]}if(W!==N.LUMINANCE&&W!==N.ALPHA||D!==N.LUMINANCE&&D!==N.ALPHA||(W=D),W!==D)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var ne=J.size,re=j.indexOf(F)<0;if(re&&j.push(F),Y===U&&Q)J.offset===0&&J.data.length===ne?re?N.texImage2D(N.TEXTURE_2D,F,D,Z[0],Z[1],0,D,U,J.data):N.texSubImage2D(N.TEXTURE_2D,F,R,V,Z[0],Z[1],D,U,J.data):re?N.texImage2D(N.TEXTURE_2D,F,D,Z[0],Z[1],0,D,U,J.data.subarray(J.offset,J.offset+ne)):N.texSubImage2D(N.TEXTURE_2D,F,R,V,Z[0],Z[1],D,U,J.data.subarray(J.offset,J.offset+ne));else{var ie;ie=U===N.FLOAT?n.mallocFloat32(ne):n.mallocUint8(ne);var se=o(ie,Z,[Z[2],Z[2]*Z[0],1]);Y===N.FLOAT&&U===N.UNSIGNED_BYTE?x(se,J):r.assign(se,J),re?N.texImage2D(N.TEXTURE_2D,F,D,Z[0],Z[1],0,D,U,ie.subarray(0,ne)):N.texSubImage2D(N.TEXTURE_2D,F,R,V,Z[0],Z[1],D,U,ie.subarray(0,ne)),U===N.FLOAT?n.freeFloat32(ie):n.freeUint8(ie)}})(O,E,L,C,this.format,this.type,this._mipLevels,_)}}},3056:function(d){d.exports=function(s,t,o){t?t.bind():s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,null);var r=0|s.getParameter(s.MAX_VERTEX_ATTRIBS);if(o){if(o.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var n=0;n<o.length;++n){var a=o[n];if(a.buffer){var i=a.buffer,u=a.size||4,h=a.type||s.FLOAT,f=!!a.normalized,x=a.stride||0,v=a.offset||0;i.bind(),s.enableVertexAttribArray(n),s.vertexAttribPointer(n,u,h,f,x,v)}else{if(typeof a=="number")s.vertexAttrib1f(n,a);else if(a.length===1)s.vertexAttrib1f(n,a[0]);else if(a.length===2)s.vertexAttrib2f(n,a[0],a[1]);else if(a.length===3)s.vertexAttrib3f(n,a[0],a[1],a[2]);else{if(a.length!==4)throw new Error("gl-vao: Invalid vertex attribute");s.vertexAttrib4f(n,a[0],a[1],a[2],a[3])}s.disableVertexAttribArray(n)}}for(;n<r;++n)s.disableVertexAttribArray(n)}else for(s.bindBuffer(s.ARRAY_BUFFER,null),n=0;n<r;++n)s.disableVertexAttribArray(n)}},7220:function(d,s,t){var o=t(3056);function r(n){this.gl=n,this._elements=null,this._attributes=null,this._elementsType=n.UNSIGNED_SHORT}r.prototype.bind=function(){o(this.gl,this._elements,this._attributes)},r.prototype.update=function(n,a,i){this._elements=a,this._attributes=n,this._elementsType=i||this.gl.UNSIGNED_SHORT},r.prototype.dispose=function(){},r.prototype.unbind=function(){},r.prototype.draw=function(n,a,i){i=i||0;var u=this.gl;this._elements?u.drawElements(n,a,this._elementsType,i):u.drawArrays(n,i,a)},d.exports=function(n){return new r(n)}},3778:function(d,s,t){var o=t(3056);function r(a,i,u,h,f,x){this.location=a,this.dimension=i,this.a=u,this.b=h,this.c=f,this.d=x}function n(a,i,u){this.gl=a,this._ext=i,this.handle=u,this._attribs=[],this._useElements=!1,this._elementsType=a.UNSIGNED_SHORT}r.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)},n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},n.prototype.update=function(a,i,u){if(this.bind(),o(this.gl,i,a),this.unbind(),this._attribs.length=0,a)for(var h=0;h<a.length;++h){var f=a[h];typeof f=="number"?this._attribs.push(new r(h,1,f)):Array.isArray(f)&&this._attribs.push(new r(h,f.length,f[0],f[1],f[2],f[3]))}this._useElements=!!i,this._elementsType=u||this.gl.UNSIGNED_SHORT},n.prototype.draw=function(a,i,u){u=u||0;var h=this.gl;this._useElements?h.drawElements(a,i,this._elementsType,u):h.drawArrays(a,u,i)},d.exports=function(a,i){return new n(a,i,i.createVertexArrayOES())}},2944:function(d,s,t){var o=t(3778),r=t(7220);function n(a){this.bindVertexArrayOES=a.bindVertexArray.bind(a),this.createVertexArrayOES=a.createVertexArray.bind(a),this.deleteVertexArrayOES=a.deleteVertexArray.bind(a)}d.exports=function(a,i,u,h){var f,x=a.createVertexArray?new n(a):a.getExtension("OES_vertex_array_object");return(f=x?o(a,x):r(a)).update(i,u,h),f}},2598:function(d){d.exports=function(s,t,o){return s[0]=t[0]+o[0],s[1]=t[1]+o[1],s[2]=t[2]+o[2],s}},5879:function(d,s,t){d.exports=function(a,i){var u=o(a[0],a[1],a[2]),h=o(i[0],i[1],i[2]);r(u,u),r(h,h);var f=n(u,h);return f>1?0:Math.acos(f)};var o=t(5415),r=t(899),n=t(9305)},8827:function(d){d.exports=function(s,t){return s[0]=Math.ceil(t[0]),s[1]=Math.ceil(t[1]),s[2]=Math.ceil(t[2]),s}},7622:function(d){d.exports=function(s){var t=new Float32Array(3);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t}},8782:function(d){d.exports=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s}},8501:function(d){d.exports=function(){var s=new Float32Array(3);return s[0]=0,s[1]=0,s[2]=0,s}},903:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=o[0],u=o[1],h=o[2];return s[0]=n*h-a*u,s[1]=a*i-r*h,s[2]=r*u-n*i,s}},5981:function(d,s,t){d.exports=t(8288)},8288:function(d){d.exports=function(s,t){var o=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2];return Math.sqrt(o*o+r*r+n*n)}},8629:function(d,s,t){d.exports=t(7979)},7979:function(d){d.exports=function(s,t,o){return s[0]=t[0]/o[0],s[1]=t[1]/o[1],s[2]=t[2]/o[2],s}},9305:function(d){d.exports=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]}},154:function(d){d.exports=1e-6},4932:function(d,s,t){d.exports=function(r,n){var a=r[0],i=r[1],u=r[2],h=n[0],f=n[1],x=n[2];return Math.abs(a-h)<=o*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(i-f)<=o*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(u-x)<=o*Math.max(1,Math.abs(u),Math.abs(x))};var o=t(154)},5777:function(d){d.exports=function(s,t){return s[0]===t[0]&&s[1]===t[1]&&s[2]===t[2]}},3306:function(d){d.exports=function(s,t){return s[0]=Math.floor(t[0]),s[1]=Math.floor(t[1]),s[2]=Math.floor(t[2]),s}},7447:function(d,s,t){d.exports=function(r,n,a,i,u,h){var f,x;for(n||(n=3),a||(a=0),x=i?Math.min(i*n+a,r.length):r.length,f=a;f<x;f+=n)o[0]=r[f],o[1]=r[f+1],o[2]=r[f+2],u(o,o,h),r[f]=o[0],r[f+1]=o[1],r[f+2]=o[2];return r};var o=t(8501)()},5415:function(d){d.exports=function(s,t,o){var r=new Float32Array(3);return r[0]=s,r[1]=t,r[2]=o,r}},2858:function(d,s,t){d.exports={EPSILON:t(154),create:t(8501),clone:t(7622),angle:t(5879),fromValues:t(5415),copy:t(8782),set:t(831),equals:t(4932),exactEquals:t(5777),add:t(2598),subtract:t(911),sub:t(8921),multiply:t(105),mul:t(5733),divide:t(7979),div:t(8629),min:t(3605),max:t(1716),floor:t(3306),ceil:t(8827),round:t(1624),scale:t(5685),scaleAndAdd:t(6722),distance:t(8288),dist:t(5981),squaredDistance:t(6403),sqrDist:t(5294),length:t(4693),len:t(1468),squaredLength:t(4337),sqrLen:t(3303),negate:t(435),inverse:t(2073),normalize:t(899),dot:t(9305),cross:t(903),lerp:t(1868),random:t(6660),transformMat4:t(3255),transformMat3:t(9908),transformQuat:t(6568),rotateX:t(392),rotateY:t(3222),rotateZ:t(3388),forEach:t(7447)}},2073:function(d){d.exports=function(s,t){return s[0]=1/t[0],s[1]=1/t[1],s[2]=1/t[2],s}},1468:function(d,s,t){d.exports=t(4693)},4693:function(d){d.exports=function(s){var t=s[0],o=s[1],r=s[2];return Math.sqrt(t*t+o*o+r*r)}},1868:function(d){d.exports=function(s,t,o,r){var n=t[0],a=t[1],i=t[2];return s[0]=n+r*(o[0]-n),s[1]=a+r*(o[1]-a),s[2]=i+r*(o[2]-i),s}},1716:function(d){d.exports=function(s,t,o){return s[0]=Math.max(t[0],o[0]),s[1]=Math.max(t[1],o[1]),s[2]=Math.max(t[2],o[2]),s}},3605:function(d){d.exports=function(s,t,o){return s[0]=Math.min(t[0],o[0]),s[1]=Math.min(t[1],o[1]),s[2]=Math.min(t[2],o[2]),s}},5733:function(d,s,t){d.exports=t(105)},105:function(d){d.exports=function(s,t,o){return s[0]=t[0]*o[0],s[1]=t[1]*o[1],s[2]=t[2]*o[2],s}},435:function(d){d.exports=function(s,t){return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s}},899:function(d){d.exports=function(s,t){var o=t[0],r=t[1],n=t[2],a=o*o+r*r+n*n;return a>0&&(a=1/Math.sqrt(a),s[0]=t[0]*a,s[1]=t[1]*a,s[2]=t[2]*a),s}},6660:function(d){d.exports=function(s,t){t=t||1;var o=2*Math.random()*Math.PI,r=2*Math.random()-1,n=Math.sqrt(1-r*r)*t;return s[0]=Math.cos(o)*n,s[1]=Math.sin(o)*n,s[2]=r*t,s}},392:function(d){d.exports=function(s,t,o,r){var n=o[1],a=o[2],i=t[1]-n,u=t[2]-a,h=Math.sin(r),f=Math.cos(r);return s[0]=t[0],s[1]=n+i*f-u*h,s[2]=a+i*h+u*f,s}},3222:function(d){d.exports=function(s,t,o,r){var n=o[0],a=o[2],i=t[0]-n,u=t[2]-a,h=Math.sin(r),f=Math.cos(r);return s[0]=n+u*h+i*f,s[1]=t[1],s[2]=a+u*f-i*h,s}},3388:function(d){d.exports=function(s,t,o,r){var n=o[0],a=o[1],i=t[0]-n,u=t[1]-a,h=Math.sin(r),f=Math.cos(r);return s[0]=n+i*f-u*h,s[1]=a+i*h+u*f,s[2]=t[2],s}},1624:function(d){d.exports=function(s,t){return s[0]=Math.round(t[0]),s[1]=Math.round(t[1]),s[2]=Math.round(t[2]),s}},5685:function(d){d.exports=function(s,t,o){return s[0]=t[0]*o,s[1]=t[1]*o,s[2]=t[2]*o,s}},6722:function(d){d.exports=function(s,t,o,r){return s[0]=t[0]+o[0]*r,s[1]=t[1]+o[1]*r,s[2]=t[2]+o[2]*r,s}},831:function(d){d.exports=function(s,t,o,r){return s[0]=t,s[1]=o,s[2]=r,s}},5294:function(d,s,t){d.exports=t(6403)},3303:function(d,s,t){d.exports=t(4337)},6403:function(d){d.exports=function(s,t){var o=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2];return o*o+r*r+n*n}},4337:function(d){d.exports=function(s){var t=s[0],o=s[1],r=s[2];return t*t+o*o+r*r}},8921:function(d,s,t){d.exports=t(911)},911:function(d){d.exports=function(s,t,o){return s[0]=t[0]-o[0],s[1]=t[1]-o[1],s[2]=t[2]-o[2],s}},9908:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2];return s[0]=r*o[0]+n*o[3]+a*o[6],s[1]=r*o[1]+n*o[4]+a*o[7],s[2]=r*o[2]+n*o[5]+a*o[8],s}},3255:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=o[3]*r+o[7]*n+o[11]*a+o[15];return i=i||1,s[0]=(o[0]*r+o[4]*n+o[8]*a+o[12])/i,s[1]=(o[1]*r+o[5]*n+o[9]*a+o[13])/i,s[2]=(o[2]*r+o[6]*n+o[10]*a+o[14])/i,s}},6568:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=o[0],u=o[1],h=o[2],f=o[3],x=f*r+u*a-h*n,v=f*n+h*r-i*a,g=f*a+i*n-u*r,y=-i*r-u*n-h*a;return s[0]=x*f+y*-i+v*-h-g*-u,s[1]=v*f+y*-u+g*-i-x*-h,s[2]=g*f+y*-h+x*-u-v*-i,s}},3433:function(d){d.exports=function(s,t,o){return s[0]=t[0]+o[0],s[1]=t[1]+o[1],s[2]=t[2]+o[2],s[3]=t[3]+o[3],s}},1413:function(d){d.exports=function(s){var t=new Float32Array(4);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t}},3470:function(d){d.exports=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s}},5313:function(d){d.exports=function(){var s=new Float32Array(4);return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s}},5446:function(d){d.exports=function(s,t){var o=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2],a=t[3]-s[3];return Math.sqrt(o*o+r*r+n*n+a*a)}},205:function(d){d.exports=function(s,t,o){return s[0]=t[0]/o[0],s[1]=t[1]/o[1],s[2]=t[2]/o[2],s[3]=t[3]/o[3],s}},4242:function(d){d.exports=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]+s[3]*t[3]}},5680:function(d){d.exports=function(s,t,o,r){var n=new Float32Array(4);return n[0]=s,n[1]=t,n[2]=o,n[3]=r,n}},4020:function(d,s,t){d.exports={create:t(5313),clone:t(1413),fromValues:t(5680),copy:t(3470),set:t(6453),add:t(3433),subtract:t(2705),multiply:t(746),divide:t(205),min:t(2170),max:t(3030),scale:t(5510),scaleAndAdd:t(4224),distance:t(5446),squaredDistance:t(1542),length:t(8177),squaredLength:t(9037),negate:t(6459),inverse:t(8057),normalize:t(381),dot:t(4242),lerp:t(8746),random:t(3770),transformMat4:t(6342),transformQuat:t(5022)}},8057:function(d){d.exports=function(s,t){return s[0]=1/t[0],s[1]=1/t[1],s[2]=1/t[2],s[3]=1/t[3],s}},8177:function(d){d.exports=function(s){var t=s[0],o=s[1],r=s[2],n=s[3];return Math.sqrt(t*t+o*o+r*r+n*n)}},8746:function(d){d.exports=function(s,t,o,r){var n=t[0],a=t[1],i=t[2],u=t[3];return s[0]=n+r*(o[0]-n),s[1]=a+r*(o[1]-a),s[2]=i+r*(o[2]-i),s[3]=u+r*(o[3]-u),s}},3030:function(d){d.exports=function(s,t,o){return s[0]=Math.max(t[0],o[0]),s[1]=Math.max(t[1],o[1]),s[2]=Math.max(t[2],o[2]),s[3]=Math.max(t[3],o[3]),s}},2170:function(d){d.exports=function(s,t,o){return s[0]=Math.min(t[0],o[0]),s[1]=Math.min(t[1],o[1]),s[2]=Math.min(t[2],o[2]),s[3]=Math.min(t[3],o[3]),s}},746:function(d){d.exports=function(s,t,o){return s[0]=t[0]*o[0],s[1]=t[1]*o[1],s[2]=t[2]*o[2],s[3]=t[3]*o[3],s}},6459:function(d){d.exports=function(s,t){return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s[3]=-t[3],s}},381:function(d){d.exports=function(s,t){var o=t[0],r=t[1],n=t[2],a=t[3],i=o*o+r*r+n*n+a*a;return i>0&&(i=1/Math.sqrt(i),s[0]=o*i,s[1]=r*i,s[2]=n*i,s[3]=a*i),s}},3770:function(d,s,t){var o=t(381),r=t(5510);d.exports=function(n,a){return a=a||1,n[0]=Math.random(),n[1]=Math.random(),n[2]=Math.random(),n[3]=Math.random(),o(n,n),r(n,n,a),n}},5510:function(d){d.exports=function(s,t,o){return s[0]=t[0]*o,s[1]=t[1]*o,s[2]=t[2]*o,s[3]=t[3]*o,s}},4224:function(d){d.exports=function(s,t,o,r){return s[0]=t[0]+o[0]*r,s[1]=t[1]+o[1]*r,s[2]=t[2]+o[2]*r,s[3]=t[3]+o[3]*r,s}},6453:function(d){d.exports=function(s,t,o,r,n){return s[0]=t,s[1]=o,s[2]=r,s[3]=n,s}},1542:function(d){d.exports=function(s,t){var o=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2],a=t[3]-s[3];return o*o+r*r+n*n+a*a}},9037:function(d){d.exports=function(s){var t=s[0],o=s[1],r=s[2],n=s[3];return t*t+o*o+r*r+n*n}},2705:function(d){d.exports=function(s,t,o){return s[0]=t[0]-o[0],s[1]=t[1]-o[1],s[2]=t[2]-o[2],s[3]=t[3]-o[3],s}},6342:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=t[3];return s[0]=o[0]*r+o[4]*n+o[8]*a+o[12]*i,s[1]=o[1]*r+o[5]*n+o[9]*a+o[13]*i,s[2]=o[2]*r+o[6]*n+o[10]*a+o[14]*i,s[3]=o[3]*r+o[7]*n+o[11]*a+o[15]*i,s}},5022:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=o[0],u=o[1],h=o[2],f=o[3],x=f*r+u*a-h*n,v=f*n+h*r-i*a,g=f*a+i*n-u*r,y=-i*r-u*n-h*a;return s[0]=x*f+y*-i+v*-h-g*-u,s[1]=v*f+y*-u+g*-i-x*-h,s[2]=g*f+y*-h+x*-u-v*-i,s[3]=t[3],s}},9365:function(d,s,t){var o=t(8096),r=t(7896);d.exports=function(n){for(var a=Array.isArray(n)?n:o(n),i=0;i<a.length;i++){var u=a[i];if(u.type==="preprocessor"){var h=u.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(h&&h[2]){var f=h[1],x=h[2];return(f?r(x):x).trim()}}}}},3193:function(d,s,t){d.exports=function(x){var v,g,y,p=0,m=0,w=u,c=[],M=[],_=1,E=0,L=0,C=!1,O=!1,I="",N=n,R=o;(x=x||{}).version==="300 es"&&(N=i,R=a);var V={},F={};for(p=0;p<N.length;p++)V[N[p]]=!0;for(p=0;p<R.length;p++)F[R[p]]=!0;return function(ie){return M=[],ie!==null?function(se){var ge;for(p=0,se.toString&&(se=se.toString()),I+=se.replace(/\r\n/g,`
`),y=I.length;v=I[p],p<y;){switch(ge=p,w){case 0:p=X();break;case 1:case 2:p=J();break;case 3:p=Z();break;case 4:p=Q();break;case 11:p=W();break;case 5:p=ne();break;case h:p=re();break;case 9:p=j();break;case u:p=U()}ge!==p&&(I[ge]===`
`?(E=0,++_):++E)}return m+=p,I=I.slice(p),M}(ie):(c.length&&D(c.join("")),w=10,D("(eof)"),M)};function D(ie){ie.length&&M.push({type:f[w],data:ie,position:L,line:_,column:E})}function U(){return c=c.length?[]:c,g==="/"&&v==="*"?(L=m+p-1,w=0,g=v,p+1):g==="/"&&v==="/"?(L=m+p-1,w=1,g=v,p+1):v==="#"?(w=2,L=m+p,p):/\s/.test(v)?(w=9,L=m+p,p):(C=/\d/.test(v),O=/[^\w_]/.test(v),L=m+p,w=C?4:O?3:h,p)}function j(){return/[^\s]/g.test(v)?(D(c.join("")),w=u,p):(c.push(v),g=v,p+1)}function J(){return v!=="\r"&&v!==`
`||g==="\\"?(c.push(v),g=v,p+1):(D(c.join("")),w=u,p)}function X(){return v==="/"&&g==="*"?(c.push(v),D(c.join("")),w=u,p+1):(c.push(v),g=v,p+1)}function Z(){if(g==="."&&/\d/.test(v))return w=5,p;if(g==="/"&&v==="*")return w=0,p;if(g==="/"&&v==="/")return w=1,p;if(v==="."&&c.length){for(;Y(c););return w=5,p}if(v===";"||v===")"||v==="("){if(c.length)for(;Y(c););return D(v),w=u,p+1}var ie=c.length===2&&v!=="=";if(/[\w_\d\s]/.test(v)||ie){for(;Y(c););return w=u,p}return c.push(v),g=v,p+1}function Y(ie){for(var se,ge,ue=0;;){if(se=r.indexOf(ie.slice(0,ie.length+ue).join("")),ge=r[se],se===-1){if(ue--+ie.length>0)continue;ge=ie.slice(0,1).join("")}return D(ge),L+=ge.length,(c=c.slice(ge.length)).length}}function W(){return/[^a-fA-F0-9]/.test(v)?(D(c.join("")),w=u,p):(c.push(v),g=v,p+1)}function Q(){return v==="."||/[eE]/.test(v)?(c.push(v),w=5,g=v,p+1):v==="x"&&c.length===1&&c[0]==="0"?(w=11,c.push(v),g=v,p+1):/[^\d]/.test(v)?(D(c.join("")),w=u,p):(c.push(v),g=v,p+1)}function ne(){return v==="f"&&(c.push(v),g=v,p+=1),/[eE]/.test(v)?(c.push(v),g=v,p+1):(v!=="-"&&v!=="+"||!/[eE]/.test(g))&&/[^\d]/.test(v)?(D(c.join("")),w=u,p):(c.push(v),g=v,p+1)}function re(){if(/[^\d\w_]/.test(v)){var ie=c.join("");return w=F[ie]?8:V[ie]?7:6,D(c.join("")),w=u,p}return c.push(v),g=v,p+1}};var o=t(399),r=t(9746),n=t(9525),a=t(9458),i=t(3585),u=999,h=9999,f=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3585:function(d,s,t){var o=t(9525);o=o.slice().filter(function(r){return!/^(gl\_|texture)/.test(r)}),d.exports=o.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},9525:function(d){d.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},9458:function(d,s,t){var o=t(399);d.exports=o.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},399:function(d){d.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},9746:function(d){d.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},8096:function(d,s,t){var o=t(3193);d.exports=function(r,n){var a=o(n),i=[];return(i=i.concat(a(r))).concat(a(null))}},6832:function(d){d.exports=function(s){typeof s=="string"&&(s=[s]);for(var t=[].slice.call(arguments,1),o=[],r=0;r<s.length-1;r++)o.push(s[r],t[r]||"");return o.push(s[r]),o.join("")}},5233:function(d,s,t){var o=t(4846);d.exports=o&&function(){var r=!1;try{var n=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{r=!1}return r}()},2183:function(d,s,t){d.exports=function(x,v){var g=x.length;if(g===0)throw new Error("Must have at least d+1 points");var y=x[0].length;if(g<=y)throw new Error("Must input at least d+1 points");var p=x.slice(0,y+1),m=o.apply(void 0,p);if(m===0)throw new Error("Input not in general position");for(var w=new Array(y+1),c=0;c<=y;++c)w[c]=c;m<0&&(w[0]=1,w[1]=0);var M=new n(w,new Array(y+1),!1),_=M.adjacent,E=new Array(y+2);for(c=0;c<=y;++c){for(var L=w.slice(),C=0;C<=y;++C)C===c&&(L[C]=-1);var O=L[0];L[0]=L[1],L[1]=O;var I=new n(L,new Array(y+1),!0);_[c]=I,E[c]=I}for(E[y+1]=M,c=0;c<=y;++c){L=_[c].vertices;var N=_[c].adjacent;for(C=0;C<=y;++C){var R=L[C];if(R<0)N[C]=M;else for(var V=0;V<=y;++V)_[V].vertices.indexOf(R)<0&&(N[C]=_[V])}}var F=new h(y,p,E),D=!!v;for(c=y+1;c<g;++c)F.insert(x[c],D);return F.boundary()};var o=t(417),r=t(8211).H;function n(x,v,g){this.vertices=x,this.adjacent=v,this.boundary=g,this.lastVisited=-1}function a(x,v,g){this.vertices=x,this.cell=v,this.index=g}function i(x,v){return r(x.vertices,v.vertices)}n.prototype.flip=function(){var x=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=x;var v=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=v};var u=[];function h(x,v,g){this.dimension=x,this.vertices=v,this.simplices=g,this.interior=g.filter(function(w){return!w.boundary}),this.tuple=new Array(x+1);for(var y=0;y<=x;++y)this.tuple[y]=this.vertices[y];var p,m=u[x];m||(m=u[x]=((p=o[x+1])||(p=o),function(w){return function(){var c=this.tuple;return w.apply(this,c)}}(p))),this.orient=m}var f=h.prototype;f.handleBoundaryDegeneracy=function(x,v){var g=this.dimension,y=this.vertices.length-1,p=this.tuple,m=this.vertices,w=[x];for(x.lastVisited=-y;w.length>0;)for(var c=(x=w.pop()).adjacent,M=0;M<=g;++M){var _=c[M];if(_.boundary&&!(_.lastVisited<=-y)){for(var E=_.vertices,L=0;L<=g;++L){var C=E[L];p[L]=C<0?v:m[C]}var O=this.orient();if(O>0)return _;_.lastVisited=-y,O===0&&w.push(_)}}return null},f.walk=function(x,v){var g=this.vertices.length-1,y=this.dimension,p=this.vertices,m=this.tuple,w=v?this.interior.length*Math.random()|0:this.interior.length-1,c=this.interior[w];e:for(;!c.boundary;){for(var M=c.vertices,_=c.adjacent,E=0;E<=y;++E)m[E]=p[M[E]];for(c.lastVisited=g,E=0;E<=y;++E){var L=_[E];if(!(L.lastVisited>=g)){var C=m[E];m[E]=x;var O=this.orient();if(m[E]=C,O<0){c=L;continue e}L.boundary?L.lastVisited=-g:L.lastVisited=g}}return}return c},f.addPeaks=function(x,v){var g=this.vertices.length-1,y=this.dimension,p=this.vertices,m=this.tuple,w=this.interior,c=this.simplices,M=[v];v.lastVisited=g,v.vertices[v.vertices.indexOf(-1)]=g,v.boundary=!1,w.push(v);for(var _=[];M.length>0;){var E=(v=M.pop()).vertices,L=v.adjacent,C=E.indexOf(g);if(!(C<0)){for(var O=0;O<=y;++O)if(O!==C){var I=L[O];if(I.boundary&&!(I.lastVisited>=g)){var N=I.vertices;if(I.lastVisited!==-g){for(var R=0,V=0;V<=y;++V)N[V]<0?(R=V,m[V]=x):m[V]=p[N[V]];if(this.orient()>0){N[R]=g,I.boundary=!1,w.push(I),M.push(I),I.lastVisited=g;continue}I.lastVisited=-g}var F=I.adjacent,D=E.slice(),U=L.slice(),j=new n(D,U,!0);c.push(j);var J=F.indexOf(v);if(!(J<0))for(F[J]=j,U[C]=I,D[O]=-1,U[O]=v,L[O]=j,j.flip(),V=0;V<=y;++V){var X=D[V];if(!(X<0||X===g)){for(var Z=new Array(y-1),Y=0,W=0;W<=y;++W){var Q=D[W];Q<0||W===V||(Z[Y++]=Q)}_.push(new a(Z,j,V))}}}}}}for(_.sort(i),O=0;O+1<_.length;O+=2){var ne=_[O],re=_[O+1],ie=ne.index,se=re.index;ie<0||se<0||(ne.cell.adjacent[ne.index]=re.cell,re.cell.adjacent[re.index]=ne.cell)}},f.insert=function(x,v){var g=this.vertices;g.push(x);var y=this.walk(x,v);if(y){for(var p=this.dimension,m=this.tuple,w=0;w<=p;++w){var c=y.vertices[w];m[w]=c<0?x:g[c]}var M=this.orient(m);M<0||(M!==0||(y=this.handleBoundaryDegeneracy(y,x)))&&this.addPeaks(x,y)}},f.boundary=function(){for(var x=this.dimension,v=[],g=this.simplices,y=g.length,p=0;p<y;++p){var m=g[p];if(m.boundary){for(var w=new Array(x),c=m.vertices,M=0,_=0,E=0;E<=x;++E)c[E]>=0?w[M++]=c[E]:_=1&E;if(_===(1&x)){var L=w[0];w[0]=w[1],w[1]=L}v.push(w)}}return v}},9014:function(d,s,t){var o=t(5070);function r(M,_,E,L,C){this.mid=M,this.left=_,this.right=E,this.leftPoints=L,this.rightPoints=C,this.count=(_?_.count:0)+(E?E.count:0)+L.length}d.exports=function(M){return M&&M.length!==0?new w(m(M)):new w(null)};var n=r.prototype;function a(M,_){M.mid=_.mid,M.left=_.left,M.right=_.right,M.leftPoints=_.leftPoints,M.rightPoints=_.rightPoints,M.count=_.count}function i(M,_){var E=m(_);M.mid=E.mid,M.left=E.left,M.right=E.right,M.leftPoints=E.leftPoints,M.rightPoints=E.rightPoints,M.count=E.count}function u(M,_){var E=M.intervals([]);E.push(_),i(M,E)}function h(M,_){var E=M.intervals([]),L=E.indexOf(_);return L<0?0:(E.splice(L,1),i(M,E),1)}function f(M,_,E){for(var L=0;L<M.length&&M[L][0]<=_;++L){var C=E(M[L]);if(C)return C}}function x(M,_,E){for(var L=M.length-1;L>=0&&M[L][1]>=_;--L){var C=E(M[L]);if(C)return C}}function v(M,_){for(var E=0;E<M.length;++E){var L=_(M[E]);if(L)return L}}function g(M,_){return M-_}function y(M,_){return M[0]-_[0]||M[1]-_[1]}function p(M,_){return M[1]-_[1]||M[0]-_[0]}function m(M){if(M.length===0)return null;for(var _=[],E=0;E<M.length;++E)_.push(M[E][0],M[E][1]);_.sort(g);var L=_[_.length>>1],C=[],O=[],I=[];for(E=0;E<M.length;++E){var N=M[E];N[1]<L?C.push(N):L<N[0]?O.push(N):I.push(N)}var R=I,V=I.slice();return R.sort(y),V.sort(p),new r(L,m(C),m(O),R,V)}function w(M){this.root=M}n.intervals=function(M){return M.push.apply(M,this.leftPoints),this.left&&this.left.intervals(M),this.right&&this.right.intervals(M),M},n.insert=function(M){var _=this.count-this.leftPoints.length;if(this.count+=1,M[1]<this.mid)this.left?4*(this.left.count+1)>3*(_+1)?u(this,M):this.left.insert(M):this.left=m([M]);else if(M[0]>this.mid)this.right?4*(this.right.count+1)>3*(_+1)?u(this,M):this.right.insert(M):this.right=m([M]);else{var E=o.ge(this.leftPoints,M,y),L=o.ge(this.rightPoints,M,p);this.leftPoints.splice(E,0,M),this.rightPoints.splice(L,0,M)}},n.remove=function(M){var _=this.count-this.leftPoints;if(M[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(_-1)?h(this,M):(O=this.left.remove(M))===2?(this.left=null,this.count-=1,1):(O===1&&(this.count-=1),O):0;if(M[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(_-1)?h(this,M):(O=this.right.remove(M))===2?(this.right=null,this.count-=1,1):(O===1&&(this.count-=1),O):0;if(this.count===1)return this.leftPoints[0]===M?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===M){if(this.left&&this.right){for(var E=this,L=this.left;L.right;)E=L,L=L.right;if(E===this)L.right=this.right;else{var C=this.left,O=this.right;E.count-=L.count,E.right=L.left,L.left=C,L.right=O}a(this,L),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?a(this,this.left):a(this,this.right);return 1}for(C=o.ge(this.leftPoints,M,y);C<this.leftPoints.length&&this.leftPoints[C][0]===M[0];++C)if(this.leftPoints[C]===M){for(this.count-=1,this.leftPoints.splice(C,1),O=o.ge(this.rightPoints,M,p);O<this.rightPoints.length&&this.rightPoints[O][1]===M[1];++O)if(this.rightPoints[O]===M)return this.rightPoints.splice(O,1),1}return 0},n.queryPoint=function(M,_){return M<this.mid?this.left&&(E=this.left.queryPoint(M,_))?E:f(this.leftPoints,M,_):M>this.mid?this.right&&(E=this.right.queryPoint(M,_))?E:x(this.rightPoints,M,_):v(this.leftPoints,_);var E},n.queryInterval=function(M,_,E){var L;return M<this.mid&&this.left&&(L=this.left.queryInterval(M,_,E))||_>this.mid&&this.right&&(L=this.right.queryInterval(M,_,E))?L:_<this.mid?f(this.leftPoints,_,E):M>this.mid?x(this.rightPoints,M,E):v(this.leftPoints,E)};var c=w.prototype;c.insert=function(M){this.root?this.root.insert(M):this.root=new r(M[0],null,null,[M],[M])},c.remove=function(M){if(this.root){var _=this.root.remove(M);return _===2&&(this.root=null),_!==0}return!1},c.queryPoint=function(M,_){if(this.root)return this.root.queryPoint(M,_)},c.queryInterval=function(M,_,E){if(M<=_&&this.root)return this.root.queryInterval(M,_,E)},Object.defineProperty(c,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(c,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},9560:function(d){d.exports=function(s){for(var t=new Array(s),o=0;o<s;++o)t[o]=o;return t}},4846:function(d){d.exports=!0},4780:function(d){function s(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}d.exports=function(t){return t!=null&&(s(t)||function(o){return typeof o.readFloatLE=="function"&&typeof o.slice=="function"&&s(o.slice(0,0))}(t)||!!t._isBuffer)}},3596:function(d){d.exports=function(s){for(var t,o=s.length,r=0;r<o;r++)if(((t=s.charCodeAt(r))<9||t>13)&&t!==32&&t!==133&&t!==160&&t!==5760&&t!==6158&&(t<8192||t>8205)&&t!==8232&&t!==8233&&t!==8239&&t!==8287&&t!==8288&&t!==12288&&t!==65279)return!1;return!0}},3578:function(d){d.exports=function(s,t,o){return s*(1-o)+t*o}},7191:function(d,s,t){var o=t(4690),r=t(9823),n=t(7332),a=t(7787),i=t(7437),u=t(2142),h={length:t(4693),normalize:t(899),dot:t(9305),cross:t(903)},f=r(),x=r(),v=[0,0,0,0],g=[[0,0,0],[0,0,0],[0,0,0]],y=[0,0,0];function p(m,w,c,M,_){m[0]=w[0]*M+c[0]*_,m[1]=w[1]*M+c[1]*_,m[2]=w[2]*M+c[2]*_}d.exports=function(m,w,c,M,_,E){if(w||(w=[0,0,0]),c||(c=[0,0,0]),M||(M=[0,0,0]),_||(_=[0,0,0,1]),E||(E=[0,0,0,1]),!o(f,m)||(n(x,f),x[3]=0,x[7]=0,x[11]=0,x[15]=1,Math.abs(a(x)<1e-8)))return!1;var L,C,O,I,N,R,V,F=f[3],D=f[7],U=f[11],j=f[12],J=f[13],X=f[14],Z=f[15];if(F!==0||D!==0||U!==0){if(v[0]=F,v[1]=D,v[2]=U,v[3]=Z,!i(x,x))return!1;u(x,x),L=_,O=x,I=(C=v)[0],N=C[1],R=C[2],V=C[3],L[0]=O[0]*I+O[4]*N+O[8]*R+O[12]*V,L[1]=O[1]*I+O[5]*N+O[9]*R+O[13]*V,L[2]=O[2]*I+O[6]*N+O[10]*R+O[14]*V,L[3]=O[3]*I+O[7]*N+O[11]*R+O[15]*V}else _[0]=_[1]=_[2]=0,_[3]=1;if(w[0]=j,w[1]=J,w[2]=X,function(W,Q){W[0][0]=Q[0],W[0][1]=Q[1],W[0][2]=Q[2],W[1][0]=Q[4],W[1][1]=Q[5],W[1][2]=Q[6],W[2][0]=Q[8],W[2][1]=Q[9],W[2][2]=Q[10]}(g,f),c[0]=h.length(g[0]),h.normalize(g[0],g[0]),M[0]=h.dot(g[0],g[1]),p(g[1],g[1],g[0],1,-M[0]),c[1]=h.length(g[1]),h.normalize(g[1],g[1]),M[0]/=c[1],M[1]=h.dot(g[0],g[2]),p(g[2],g[2],g[0],1,-M[1]),M[2]=h.dot(g[1],g[2]),p(g[2],g[2],g[1],1,-M[2]),c[2]=h.length(g[2]),h.normalize(g[2],g[2]),M[1]/=c[2],M[2]/=c[2],h.cross(y,g[1],g[2]),h.dot(g[0],y)<0)for(var Y=0;Y<3;Y++)c[Y]*=-1,g[Y][0]*=-1,g[Y][1]*=-1,g[Y][2]*=-1;return E[0]=.5*Math.sqrt(Math.max(1+g[0][0]-g[1][1]-g[2][2],0)),E[1]=.5*Math.sqrt(Math.max(1-g[0][0]+g[1][1]-g[2][2],0)),E[2]=.5*Math.sqrt(Math.max(1-g[0][0]-g[1][1]+g[2][2],0)),E[3]=.5*Math.sqrt(Math.max(1+g[0][0]+g[1][1]+g[2][2],0)),g[2][1]>g[1][2]&&(E[0]=-E[0]),g[0][2]>g[2][0]&&(E[1]=-E[1]),g[1][0]>g[0][1]&&(E[2]=-E[2]),!0}},4690:function(d){d.exports=function(s,t){var o=t[15];if(o===0)return!1;for(var r=1/o,n=0;n<16;n++)s[n]=t[n]*r;return!0}},7649:function(d,s,t){var o=t(1868),r=t(1102),n=t(7191),a=t(7787),i=t(1116),u=x(),h=x(),f=x();function x(){return{translate:v(),scale:v(1),skew:v(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function v(g){return[g||0,g||0,g||0]}d.exports=function(g,y,p,m){if(a(y)===0||a(p)===0)return!1;var w=n(y,u.translate,u.scale,u.skew,u.perspective,u.quaternion),c=n(p,h.translate,h.scale,h.skew,h.perspective,h.quaternion);return!(!w||!c||(o(f.translate,u.translate,h.translate,m),o(f.skew,u.skew,h.skew,m),o(f.scale,u.scale,h.scale,m),o(f.perspective,u.perspective,h.perspective,m),i(f.quaternion,u.quaternion,h.quaternion,m),r(g,f.translate,f.scale,f.skew,f.perspective,f.quaternion),0))}},1102:function(d,s,t){var o={identity:t(9947),translate:t(998),multiply:t(104),create:t(9823),scale:t(3668),fromRotationTranslation:t(7280)},r=(o.create(),o.create());d.exports=function(n,a,i,u,h,f){return o.identity(n),o.fromRotationTranslation(n,f,a),n[3]=h[0],n[7]=h[1],n[11]=h[2],n[15]=h[3],o.identity(r),u[2]!==0&&(r[9]=u[2],o.multiply(n,n,r)),u[1]!==0&&(r[9]=0,r[8]=u[1],o.multiply(n,n,r)),u[0]!==0&&(r[8]=0,r[4]=u[0],o.multiply(n,n,r)),o.scale(n,n,i),n}},9298:function(d,s,t){var o=t(5070),r=t(7649),n=t(7437),a=t(6109),i=t(7115),u=t(5240),h=t(3012),f=t(998),x=(t(3668),t(899)),v=[0,0,0];function g(m){this._components=m.slice(),this._time=[0],this.prevMatrix=m.slice(),this.nextMatrix=m.slice(),this.computedMatrix=m.slice(),this.computedInverse=m.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}d.exports=function(m){return new g((m=m||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var y=g.prototype;y.recalcMatrix=function(m){var w=this._time,c=o.le(w,m),M=this.computedMatrix;if(!(c<0)){var _=this._components;if(c===w.length-1)for(var E=16*c,L=0;L<16;++L)M[L]=_[E++];else{var C=w[c+1]-w[c],O=(E=16*c,this.prevMatrix),I=!0;for(L=0;L<16;++L)O[L]=_[E++];var N=this.nextMatrix;for(L=0;L<16;++L)N[L]=_[E++],I=I&&O[L]===N[L];if(C<1e-6||I)for(L=0;L<16;++L)M[L]=O[L];else r(M,O,N,(m-w[c])/C)}var R=this.computedUp;R[0]=M[1],R[1]=M[5],R[2]=M[9],x(R,R);var V=this.computedInverse;n(V,M);var F=this.computedEye,D=V[15];F[0]=V[12]/D,F[1]=V[13]/D,F[2]=V[14]/D;var U=this.computedCenter,j=Math.exp(this.computedRadius[0]);for(L=0;L<3;++L)U[L]=F[L]-M[2+4*L]*j}},y.idle=function(m){if(!(m<this.lastT())){for(var w=this._components,c=w.length-16,M=0;M<16;++M)w.push(w[c++]);this._time.push(m)}},y.flush=function(m){var w=o.gt(this._time,m)-2;w<0||(this._time.splice(0,w),this._components.splice(0,16*w))},y.lastT=function(){return this._time[this._time.length-1]},y.lookAt=function(m,w,c,M){this.recalcMatrix(m),w=w||this.computedEye,c=c||v,M=M||this.computedUp,this.setMatrix(m,h(this.computedMatrix,w,c,M));for(var _=0,E=0;E<3;++E)_+=Math.pow(c[E]-w[E],2);_=Math.log(Math.sqrt(_)),this.computedRadius[0]=_},y.rotate=function(m,w,c,M){this.recalcMatrix(m);var _=this.computedInverse;w&&i(_,_,w),c&&a(_,_,c),M&&u(_,_,M),this.setMatrix(m,n(this.computedMatrix,_))};var p=[0,0,0];y.pan=function(m,w,c,M){p[0]=-(w||0),p[1]=-(c||0),p[2]=-(M||0),this.recalcMatrix(m);var _=this.computedInverse;f(_,_,p),this.setMatrix(m,n(_,_))},y.translate=function(m,w,c,M){p[0]=w||0,p[1]=c||0,p[2]=M||0,this.recalcMatrix(m);var _=this.computedMatrix;f(_,_,p),this.setMatrix(m,_)},y.setMatrix=function(m,w){if(!(m<this.lastT())){this._time.push(m);for(var c=0;c<16;++c)this._components.push(w[c])}},y.setDistance=function(m,w){this.computedRadius[0]=w},y.setDistanceLimits=function(m,w){var c=this._limits;c[0]=m,c[1]=w},y.getDistanceLimits=function(m){var w=this._limits;return m?(m[0]=w[0],m[1]=w[1],m):w}},3266:function(d,s,t){d.exports=function(r){var n=r.length;if(n<3){for(var a=new Array(n),i=0;i<n;++i)a[i]=i;return n===2&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:a}var u=new Array(n);for(i=0;i<n;++i)u[i]=i;u.sort(function(w,c){return r[w][0]-r[c][0]||r[w][1]-r[c][1]});var h=[u[0],u[1]],f=[u[0],u[1]];for(i=2;i<n;++i){for(var x=u[i],v=r[x],g=h.length;g>1&&o(r[h[g-2]],r[h[g-1]],v)<=0;)g-=1,h.pop();for(h.push(x),g=f.length;g>1&&o(r[f[g-2]],r[f[g-1]],v)>=0;)g-=1,f.pop();f.push(x)}a=new Array(f.length+h.length-2);for(var y=0,p=(i=0,h.length);i<p;++i)a[y++]=h[i];for(var m=f.length-2;m>0;--m)a[y++]=f[m];return a};var o=t(417)[3]},6145:function(d,s,t){d.exports=function(r,n){n||(n=r,r=window);var a=0,i=0,u=0,h={shift:!1,alt:!1,control:!1,meta:!1},f=!1;function x(E){var L=!1;return"altKey"in E&&(L=L||E.altKey!==h.alt,h.alt=!!E.altKey),"shiftKey"in E&&(L=L||E.shiftKey!==h.shift,h.shift=!!E.shiftKey),"ctrlKey"in E&&(L=L||E.ctrlKey!==h.control,h.control=!!E.ctrlKey),"metaKey"in E&&(L=L||E.metaKey!==h.meta,h.meta=!!E.metaKey),L}function v(E,L){var C=o.x(L),O=o.y(L);"buttons"in L&&(E=0|L.buttons),(E!==a||C!==i||O!==u||x(L))&&(a=0|E,i=C||0,u=O||0,n&&n(a,i,u,h))}function g(E){v(0,E)}function y(){(a||i||u||h.shift||h.alt||h.meta||h.control)&&(i=u=0,a=0,h.shift=h.alt=h.control=h.meta=!1,n&&n(0,0,0,h))}function p(E){x(E)&&n&&n(a,i,u,h)}function m(E){o.buttons(E)===0?v(0,E):v(a,E)}function w(E){v(a|o.buttons(E),E)}function c(E){v(a&~o.buttons(E),E)}function M(){f||(f=!0,r.addEventListener("mousemove",m),r.addEventListener("mousedown",w),r.addEventListener("mouseup",c),r.addEventListener("mouseleave",g),r.addEventListener("mouseenter",g),r.addEventListener("mouseout",g),r.addEventListener("mouseover",g),r.addEventListener("blur",y),r.addEventListener("keyup",p),r.addEventListener("keydown",p),r.addEventListener("keypress",p),r!==window&&(window.addEventListener("blur",y),window.addEventListener("keyup",p),window.addEventListener("keydown",p),window.addEventListener("keypress",p)))}M();var _={element:r};return Object.defineProperties(_,{enabled:{get:function(){return f},set:function(E){E?M():f&&(f=!1,r.removeEventListener("mousemove",m),r.removeEventListener("mousedown",w),r.removeEventListener("mouseup",c),r.removeEventListener("mouseleave",g),r.removeEventListener("mouseenter",g),r.removeEventListener("mouseout",g),r.removeEventListener("mouseover",g),r.removeEventListener("blur",y),r.removeEventListener("keyup",p),r.removeEventListener("keydown",p),r.removeEventListener("keypress",p),r!==window&&(window.removeEventListener("blur",y),window.removeEventListener("keyup",p),window.removeEventListener("keydown",p),window.removeEventListener("keypress",p)))},enumerable:!0},buttons:{get:function(){return a},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return u},enumerable:!0},mods:{get:function(){return h},enumerable:!0}}),_};var o=t(4110)},2565:function(d){var s={left:0,top:0};d.exports=function(t,o,r){o=o||t.currentTarget||t.srcElement,Array.isArray(r)||(r=[0,0]);var n,a=t.clientX||0,i=t.clientY||0,u=(n=o)===window||n===document||n===document.body?s:n.getBoundingClientRect();return r[0]=a-u.left,r[1]=i-u.top,r}},4110:function(d,s){function t(o){return o.target||o.srcElement||window}s.buttons=function(o){if(typeof o=="object"){if("buttons"in o)return o.buttons;if("which"in o){if((r=o.which)===2)return 4;if(r===3)return 2;if(r>0)return 1<<r-1}else if("button"in o){var r;if((r=o.button)===1)return 4;if(r===2)return 2;if(r>=0)return 1<<r}}return 0},s.element=t,s.x=function(o){if(typeof o=="object"){if("offsetX"in o)return o.offsetX;var r=t(o).getBoundingClientRect();return o.clientX-r.left}return 0},s.y=function(o){if(typeof o=="object"){if("offsetY"in o)return o.offsetY;var r=t(o).getBoundingClientRect();return o.clientY-r.top}return 0}},6475:function(d,s,t){var o=t(14);d.exports=function(r,n,a){typeof r=="function"&&(a=!!n,n=r,r=window);var i=o("ex",r),u=function(h){a&&h.preventDefault();var f=h.deltaX||0,x=h.deltaY||0,v=h.deltaZ||0,g=1;switch(h.deltaMode){case 1:g=i;break;case 2:g=window.innerHeight}if(x*=g,v*=g,(f*=g)||x||v)return n(f,x,v,h)};return r.addEventListener("wheel",u),u}},9284:function(d,s,t){var o=t(5306);d.exports=function(n){function a(v){throw new Error("ndarray-extract-contour: "+v)}typeof n!="object"&&a("Must specify arguments");var i=n.order;Array.isArray(i)||a("Must specify order");var u=n.arrayArguments||1;u<1&&a("Must have at least one array argument"),(n.scalarArguments||0)<0&&a("Scalar arg count must be > 0"),typeof n.vertex!="function"&&a("Must specify vertex creation function"),typeof n.cell!="function"&&a("Must specify cell creation function"),typeof n.phase!="function"&&a("Must specify phase function");for(var h=n.getters||[],f=new Array(u),x=0;x<u;++x)h.indexOf(x)>=0?f[x]=!0:f[x]=!1;return function(v,g,y,p,m,w){var c=[w,m].join(",");return(0,r[c])(v,g,y,o.mallocUint32,o.freeUint32)}(n.vertex,n.cell,n.phase,0,i,f)};var r={"false,0,1":function(n,a,i,u,h){return function(f,x,v,g){var y,p=0|f.shape[0],m=0|f.shape[1],w=f.data,c=0|f.offset,M=0|f.stride[0],_=0|f.stride[1],E=c,L=0|-M,C=0,O=0|-_,I=0,N=-M-_|0,R=0,V=0|M,F=_-M*p|0,D=0,U=0,j=0,J=2*p|0,X=u(J),Z=u(J),Y=0,W=0,Q=-1,ne=-1,re=0,ie=0|-p,se=0|p,ge=0,ue=-p-1|0,ce=p-1|0,le=0,de=0,Ce=0;for(D=0;D<p;++D)X[Y++]=i(w[E],x,v,g),E+=V;if(E+=F,m>0){if(U=1,X[Y++]=i(w[E],x,v,g),E+=V,p>0)for(D=1,y=w[E],W=X[Y]=i(y,x,v,g),re=X[Y+Q],ge=X[Y+ie],le=X[Y+ue],W===re&&W===ge&&W===le||(C=w[E+L],I=w[E+O],R=w[E+N],n(D,U,y,C,I,R,W,re,ge,le,x,v,g),de=Z[Y]=j++),Y+=1,E+=V,D=2;D<p;++D)y=w[E],W=X[Y]=i(y,x,v,g),re=X[Y+Q],ge=X[Y+ie],le=X[Y+ue],W===re&&W===ge&&W===le||(C=w[E+L],I=w[E+O],R=w[E+N],n(D,U,y,C,I,R,W,re,ge,le,x,v,g),de=Z[Y]=j++,le!==re&&a(Z[Y+Q],de,R,C,le,re,x,v,g)),Y+=1,E+=V;for(E+=F,Y=0,Ce=Q,Q=ne,ne=Ce,Ce=ie,ie=se,se=Ce,Ce=ue,ue=ce,ce=Ce,U=2;U<m;++U){if(X[Y++]=i(w[E],x,v,g),E+=V,p>0)for(D=1,y=w[E],W=X[Y]=i(y,x,v,g),re=X[Y+Q],ge=X[Y+ie],le=X[Y+ue],W===re&&W===ge&&W===le||(C=w[E+L],I=w[E+O],R=w[E+N],n(D,U,y,C,I,R,W,re,ge,le,x,v,g),de=Z[Y]=j++,le!==ge&&a(Z[Y+ie],de,I,R,ge,le,x,v,g)),Y+=1,E+=V,D=2;D<p;++D)y=w[E],W=X[Y]=i(y,x,v,g),re=X[Y+Q],ge=X[Y+ie],le=X[Y+ue],W===re&&W===ge&&W===le||(C=w[E+L],I=w[E+O],R=w[E+N],n(D,U,y,C,I,R,W,re,ge,le,x,v,g),de=Z[Y]=j++,le!==ge&&a(Z[Y+ie],de,I,R,ge,le,x,v,g),le!==re&&a(Z[Y+Q],de,R,C,le,re,x,v,g)),Y+=1,E+=V;1&U&&(Y=0),Ce=Q,Q=ne,ne=Ce,Ce=ie,ie=se,se=Ce,Ce=ue,ue=ce,ce=Ce,E+=F}}h(Z),h(X)}},"false,1,0":function(n,a,i,u,h){return function(f,x,v,g){var y,p=0|f.shape[0],m=0|f.shape[1],w=f.data,c=0|f.offset,M=0|f.stride[0],_=0|f.stride[1],E=c,L=0|-M,C=0,O=0|-_,I=0,N=-M-_|0,R=0,V=0|_,F=M-_*m|0,D=0,U=0,j=0,J=2*m|0,X=u(J),Z=u(J),Y=0,W=0,Q=-1,ne=-1,re=0,ie=0|-m,se=0|m,ge=0,ue=-m-1|0,ce=m-1|0,le=0,de=0,Ce=0;for(U=0;U<m;++U)X[Y++]=i(w[E],x,v,g),E+=V;if(E+=F,p>0){if(D=1,X[Y++]=i(w[E],x,v,g),E+=V,m>0)for(U=1,y=w[E],W=X[Y]=i(y,x,v,g),ge=X[Y+ie],re=X[Y+Q],le=X[Y+ue],W===ge&&W===re&&W===le||(C=w[E+L],I=w[E+O],R=w[E+N],n(D,U,y,C,I,R,W,ge,re,le,x,v,g),de=Z[Y]=j++),Y+=1,E+=V,U=2;U<m;++U)y=w[E],W=X[Y]=i(y,x,v,g),ge=X[Y+ie],re=X[Y+Q],le=X[Y+ue],W===ge&&W===re&&W===le||(C=w[E+L],I=w[E+O],R=w[E+N],n(D,U,y,C,I,R,W,ge,re,le,x,v,g),de=Z[Y]=j++,le!==re&&a(Z[Y+Q],de,I,R,re,le,x,v,g)),Y+=1,E+=V;for(E+=F,Y=0,Ce=ie,ie=se,se=Ce,Ce=Q,Q=ne,ne=Ce,Ce=ue,ue=ce,ce=Ce,D=2;D<p;++D){if(X[Y++]=i(w[E],x,v,g),E+=V,m>0)for(U=1,y=w[E],W=X[Y]=i(y,x,v,g),ge=X[Y+ie],re=X[Y+Q],le=X[Y+ue],W===ge&&W===re&&W===le||(C=w[E+L],I=w[E+O],R=w[E+N],n(D,U,y,C,I,R,W,ge,re,le,x,v,g),de=Z[Y]=j++,le!==ge&&a(Z[Y+ie],de,R,C,le,ge,x,v,g)),Y+=1,E+=V,U=2;U<m;++U)y=w[E],W=X[Y]=i(y,x,v,g),ge=X[Y+ie],re=X[Y+Q],le=X[Y+ue],W===ge&&W===re&&W===le||(C=w[E+L],I=w[E+O],R=w[E+N],n(D,U,y,C,I,R,W,ge,re,le,x,v,g),de=Z[Y]=j++,le!==re&&a(Z[Y+Q],de,I,R,re,le,x,v,g),le!==ge&&a(Z[Y+ie],de,R,C,le,ge,x,v,g)),Y+=1,E+=V;1&D&&(Y=0),Ce=ie,ie=se,se=Ce,Ce=Q,Q=ne,ne=Ce,Ce=ue,ue=ce,ce=Ce,E+=F}}h(Z),h(X)}}}},9144:function(d,s,t){var o=t(3094),r={zero:function(p,m,w,c){var M=p[0];c|=0;var _=0,E=w[0];for(_=0;_<M;++_)m[c]=0,c+=E},fdTemplate1:function(p,m,w,c,M,_,E){var L=p[0],C=w[0],O=-1*C,I=C;c|=0,E|=0;var N=0,R=C,V=_[0];for(N=0;N<L;++N)M[E]=.5*(m[c+O]-m[c+I]),c+=R,E+=V},fdTemplate2:function(p,m,w,c,M,_,E,L,C,O){var I=p[0],N=p[1],R=w[0],V=w[1],F=_[0],D=_[1],U=C[0],j=C[1],J=-1*R,X=R,Z=-1*V,Y=V;c|=0,E|=0,O|=0;var W=0,Q=0,ne=V,re=R-N*V,ie=D,se=F-N*D,ge=j,ue=U-N*j;for(Q=0;Q<I;++Q){for(W=0;W<N;++W)M[E]=.5*(m[c+J]-m[c+X]),L[O]=.5*(m[c+Z]-m[c+Y]),c+=ne,E+=ie,O+=ge;c+=re,E+=se,O+=ue}}},n={cdiff:function(p){var m={};return function(w,c,M){var _=w.dtype,E=w.order,L=c.dtype,C=c.order,O=M.dtype,I=M.order,N=[_,E.join(),L,C.join(),O,I.join()].join(),R=m[N];return R||(m[N]=R=p([_,E,L,C,O,I])),R(w.shape.slice(0),w.data,w.stride,0|w.offset,c.data,c.stride,0|c.offset,M.data,M.stride,0|M.offset)}},zero:function(p){var m={};return function(w){var c=w.dtype,M=w.order,_=[c,M.join()].join(),E=m[_];return E||(m[_]=E=p([c,M])),E(w.shape.slice(0),w.data,w.stride,0|w.offset)}},fdTemplate1:function(p){var m={};return function(w,c){var M=w.dtype,_=w.order,E=c.dtype,L=c.order,C=[M,_.join(),E,L.join()].join(),O=m[C];return O||(m[C]=O=p([M,_,E,L])),O(w.shape.slice(0),w.data,w.stride,0|w.offset,c.data,c.stride,0|c.offset)}},fdTemplate2:function(p){var m={};return function(w,c,M){var _=w.dtype,E=w.order,L=c.dtype,C=c.order,O=M.dtype,I=M.order,N=[_,E.join(),L,C.join(),O,I.join()].join(),R=m[N];return R||(m[N]=R=p([_,E,L,C,O,I])),R(w.shape.slice(0),w.data,w.stride,0|w.offset,c.data,c.stride,0|c.offset,M.data,M.stride,0|M.offset)}}};function a(p){return(0,n[p.funcName])(i.bind(void 0,p))}function i(p){return r[p.funcName]}function u(p){return a({funcName:p.funcName})}var h={},f={},x=u({funcName:"cdiff"}),v=u({funcName:"zero"});function g(p){return p in h?h[p]:h[p]=u({funcName:"fdTemplate"+p})}function y(p,m,w,c){return function(M,_){var E=_.shape.slice();return E[0]>2&&E[1]>2&&c(_.pick(-1,-1).lo(1,1).hi(E[0]-2,E[1]-2),M.pick(-1,-1,0).lo(1,1).hi(E[0]-2,E[1]-2),M.pick(-1,-1,1).lo(1,1).hi(E[0]-2,E[1]-2)),E[1]>2&&(w(_.pick(0,-1).lo(1).hi(E[1]-2),M.pick(0,-1,1).lo(1).hi(E[1]-2)),m(M.pick(0,-1,0).lo(1).hi(E[1]-2))),E[1]>2&&(w(_.pick(E[0]-1,-1).lo(1).hi(E[1]-2),M.pick(E[0]-1,-1,1).lo(1).hi(E[1]-2)),m(M.pick(E[0]-1,-1,0).lo(1).hi(E[1]-2))),E[0]>2&&(w(_.pick(-1,0).lo(1).hi(E[0]-2),M.pick(-1,0,0).lo(1).hi(E[0]-2)),m(M.pick(-1,0,1).lo(1).hi(E[0]-2))),E[0]>2&&(w(_.pick(-1,E[1]-1).lo(1).hi(E[0]-2),M.pick(-1,E[1]-1,0).lo(1).hi(E[0]-2)),m(M.pick(-1,E[1]-1,1).lo(1).hi(E[0]-2))),M.set(0,0,0,0),M.set(0,0,1,0),M.set(E[0]-1,0,0,0),M.set(E[0]-1,0,1,0),M.set(0,E[1]-1,0,0),M.set(0,E[1]-1,1,0),M.set(E[0]-1,E[1]-1,0,0),M.set(E[0]-1,E[1]-1,1,0),M}}d.exports=function(p,m,w){return Array.isArray(w)||(w=o(m.dimension,typeof w=="string"?w:"clamp")),m.size===0?p:m.dimension===0?(p.set(0),p):function(c){var M=c.join();if(C=f[M])return C;for(var _=c.length,E=[x,v],L=1;L<=_;++L)E.push(g(L));var C=y.apply(void 0,E);return f[M]=C,C}(w)(p,m)}},3581:function(d){function s(n,a){var i=Math.floor(a),u=a-i,h=0<=i&&i<n.shape[0],f=0<=i+1&&i+1<n.shape[0];return(1-u)*(h?+n.get(i):0)+u*(f?+n.get(i+1):0)}function t(n,a,i){var u=Math.floor(a),h=a-u,f=0<=u&&u<n.shape[0],x=0<=u+1&&u+1<n.shape[0],v=Math.floor(i),g=i-v,y=0<=v&&v<n.shape[1],p=0<=v+1&&v+1<n.shape[1],m=f&&y?n.get(u,v):0,w=f&&p?n.get(u,v+1):0;return(1-g)*((1-h)*m+h*(x&&y?n.get(u+1,v):0))+g*((1-h)*w+h*(x&&p?n.get(u+1,v+1):0))}function o(n,a,i,u){var h=Math.floor(a),f=a-h,x=0<=h&&h<n.shape[0],v=0<=h+1&&h+1<n.shape[0],g=Math.floor(i),y=i-g,p=0<=g&&g<n.shape[1],m=0<=g+1&&g+1<n.shape[1],w=Math.floor(u),c=u-w,M=0<=w&&w<n.shape[2],_=0<=w+1&&w+1<n.shape[2],E=x&&p&&M?n.get(h,g,w):0,L=x&&m&&M?n.get(h,g+1,w):0,C=v&&p&&M?n.get(h+1,g,w):0,O=v&&m&&M?n.get(h+1,g+1,w):0,I=x&&p&&_?n.get(h,g,w+1):0,N=x&&m&&_?n.get(h,g+1,w+1):0;return(1-c)*((1-y)*((1-f)*E+f*C)+y*((1-f)*L+f*O))+c*((1-y)*((1-f)*I+f*(v&&p&&_?n.get(h+1,g,w+1):0))+y*((1-f)*N+f*(v&&m&&_?n.get(h+1,g+1,w+1):0)))}function r(n){var a,i,u=0|n.shape.length,h=new Array(u),f=new Array(u),x=new Array(u),v=new Array(u);for(a=0;a<u;++a)i=+arguments[a+1],h[a]=Math.floor(i),f[a]=i-h[a],x[a]=0<=h[a]&&h[a]<n.shape[a],v[a]=0<=h[a]+1&&h[a]+1<n.shape[a];var g,y,p,m=0;e:for(a=0;a<1<<u;++a){for(y=1,p=n.offset,g=0;g<u;++g)if(a&1<<g){if(!v[g])continue e;y*=f[g],p+=n.stride[g]*(h[g]+1)}else{if(!x[g])continue e;y*=1-f[g],p+=n.stride[g]*h[g]}m+=y*n.data[p]}return m}d.exports=function(n,a,i,u){switch(n.shape.length){case 0:return 0;case 1:return s(n,a);case 2:return t(n,a,i);case 3:return o(n,a,i,u);default:return r.apply(void 0,arguments)}},d.exports.d1=s,d.exports.d2=t,d.exports.d3=o},7498:function(d,s){var t={"float64,2,1,0":function(){return function(i,u,h,f,x){var v=i[0],g=i[1],y=i[2],p=h[0],m=h[1],w=h[2];f|=0;var c=0,M=0,_=0,E=w,L=m-y*w,C=p-g*m;for(_=0;_<v;++_){for(M=0;M<g;++M){for(c=0;c<y;++c)u[f]/=x,f+=E;f+=L}f+=C}}},"uint8,2,0,1,float64,2,1,0":function(){return function(i,u,h,f,x,v,g,y){for(var p=i[0],m=i[1],w=i[2],c=h[0],M=h[1],_=h[2],E=v[0],L=v[1],C=v[2],O=f|=0,I=g|=0,N=0|i[0];N>0;){N<64?(p=N,N=0):(p=64,N-=64);for(var R=0|i[1];R>0;){R<64?(m=R,R=0):(m=64,R-=64),f=O+N*c+R*M,g=I+N*E+R*L;var V=0,F=0,D=0,U=_,j=c-w*_,J=M-p*c,X=C,Z=E-w*C,Y=L-p*E;for(D=0;D<m;++D){for(F=0;F<p;++F){for(V=0;V<w;++V)u[f]=x[g]*y,f+=U,g+=X;f+=j,g+=Z}f+=J,g+=Y}}}}},"float32,1,0,float32,1,0":function(){return function(i,u,h,f,x,v,g){var y=i[0],p=i[1],m=h[0],w=h[1],c=v[0],M=v[1];f|=0,g|=0;var _=0,E=0,L=w,C=m-p*w,O=M,I=c-p*M;for(E=0;E<y;++E){for(_=0;_<p;++_)u[f]=x[g],f+=L,g+=O;f+=C,g+=I}}},"float32,1,0,float32,0,1":function(){return function(i,u,h,f,x,v,g){for(var y=i[0],p=i[1],m=h[0],w=h[1],c=v[0],M=v[1],_=f|=0,E=g|=0,L=0|i[1];L>0;){L<64?(p=L,L=0):(p=64,L-=64);for(var C=0|i[0];C>0;){C<64?(y=C,C=0):(y=64,C-=64),f=_+L*w+C*m,g=E+L*M+C*c;var O=0,I=0,N=w,R=m-p*w,V=M,F=c-p*M;for(I=0;I<y;++I){for(O=0;O<p;++O)u[f]=x[g],f+=N,g+=V;f+=R,g+=F}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(i,u,h,f,x,v,g){for(var y=i[0],p=i[1],m=i[2],w=h[0],c=h[1],M=h[2],_=v[0],E=v[1],L=v[2],C=f|=0,O=g|=0,I=0|i[2];I>0;){I<64?(m=I,I=0):(m=64,I-=64);for(var N=0|i[0];N>0;){N<64?(y=N,N=0):(y=64,N-=64);for(var R=0|i[1];R>0;){R<64?(p=R,R=0):(p=64,R-=64),f=C+I*M+N*w+R*c,g=O+I*L+N*_+R*E;var V=0,F=0,D=0,U=M,j=w-m*M,J=c-y*w,X=L,Z=_-m*L,Y=E-y*_;for(D=0;D<p;++D){for(F=0;F<y;++F){for(V=0;V<m;++V)u[f]=x[g],f+=U,g+=X;f+=j,g+=Z}f+=J,g+=Y}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(i,u,h,f,x,v,g){var y=i[0],p=i[1],m=i[2],w=h[0],c=h[1],M=h[2],_=v[0],E=v[1],L=v[2];f|=0,g|=0;var C=0,O=0,I=0,N=M,R=w-m*M,V=c-y*w,F=L,D=_-m*L,U=E-y*_;for(I=0;I<p;++I){for(O=0;O<y;++O){for(C=0;C<m;++C)u[f]=x[g],f+=N,g+=F;f+=R,g+=D}f+=V,g+=U}}}},o=function(i,u){var h=u.join(",");return(0,t[h])()},r={mul:function(i){var u={};return function(h,f,x){var v=h.dtype,g=h.order,y=f.dtype,p=f.order,m=x.dtype,w=x.order,c=[v,g.join(),y,p.join(),m,w.join()].join(),M=u[c];return M||(u[c]=M=i([v,g,y,p,m,w])),M(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset,x.data,x.stride,0|x.offset)}},muls:function(i){var u={};return function(h,f,x){var v=h.dtype,g=h.order,y=f.dtype,p=f.order,m=[v,g.join(),y,p.join()].join(),w=u[m];return w||(u[m]=w=i([v,g,y,p])),w(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset,x)}},mulseq:function(i){var u={};return function(h,f){var x=h.dtype,v=h.order,g=[x,v.join()].join(),y=u[g];return y||(u[g]=y=i([x,v])),y(h.shape.slice(0),h.data,h.stride,0|h.offset,f)}},div:function(i){var u={};return function(h,f,x){var v=h.dtype,g=h.order,y=f.dtype,p=f.order,m=x.dtype,w=x.order,c=[v,g.join(),y,p.join(),m,w.join()].join(),M=u[c];return M||(u[c]=M=i([v,g,y,p,m,w])),M(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset,x.data,x.stride,0|x.offset)}},divs:function(i){var u={};return function(h,f,x){var v=h.dtype,g=h.order,y=f.dtype,p=f.order,m=[v,g.join(),y,p.join()].join(),w=u[m];return w||(u[m]=w=i([v,g,y,p])),w(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset,x)}},divseq:function(i){var u={};return function(h,f){var x=h.dtype,v=h.order,g=[x,v.join()].join(),y=u[g];return y||(u[g]=y=i([x,v])),y(h.shape.slice(0),h.data,h.stride,0|h.offset,f)}},assign:function(i){var u={};return function(h,f){var x=h.dtype,v=h.order,g=f.dtype,y=f.order,p=[x,v.join(),g,y.join()].join(),m=u[p];return m||(u[p]=m=i([x,v,g,y])),m(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset)}}};function n(i){return u={funcName:i.funcName},(0,r[u.funcName])(o.bind(void 0,u));var u}var a={mul:"*",div:"/"};(function(){for(var i in a)s[i]=n({funcName:i}),s[i+"s"]=n({funcName:i+"s"}),s[i+"seq"]=n({funcName:i+"seq"})})(),s.assign=n({funcName:"assign"})},7382:function(d,s,t){var o=t(5050),r=t(9262);d.exports=function(n,a){for(var i=[],u=n,h=1;Array.isArray(u);)i.push(u.length),h*=u.length,u=u[0];return i.length===0?o():(a||(a=o(new Float64Array(h),i)),r(a,n),a)}},9262:function(d){d.exports=function(s){var t={};return function(o,r){var n=o.dtype,a=o.order,i=[n,a.join()].join(),u=t[i];return u||(t[i]=u=s([n,a])),u(o.shape.slice(0),o.data,o.stride,0|o.offset,r)}}(function(){return function(s,t,o,r,n){var a=s[0],i=s[1],u=s[2],h=o[0],f=o[1],x=o[2],v=[0,0,0];r|=0;var g=0,y=0,p=0,m=x,w=f-u*x,c=h-i*f;for(p=0;p<a;++p){for(y=0;y<i;++y){for(g=0;g<u;++g){var M,_=n;for(M=0;M<v.length-1;++M)_=_[v[M]];t[r]=_[v[v.length-1]],r+=m,++v[2]}r+=w,v[2]-=u,++v[1]}r+=c,v[1]-=i,++v[0]}}}.bind(void 0,{funcName:"convert"}))},8139:function(d,s,t){var o=t(5306);function r(u){return u==="uint32"?[o.mallocUint32,o.freeUint32]:null}var n={"uint32,1,0":function(u,h){return function(f,x,v,g,y,p,m,w,c,M,_){var E,L,C,O,I,N,R,V,F=f*y+g,D=u(w);for(E=f+1;E<=x;++E){for(L=E,C=F+=y,I=0,N=F,O=0;O<w;++O)D[I++]=v[N],N+=c;e:for(;L-- >f;){I=0,N=C-y;t:for(O=0;O<w;++O){if((R=v[N])<(V=D[I]))break e;if(R>V)break t;N+=M,I+=_}for(I=C,N=C-y,O=0;O<w;++O)v[I]=v[N],I+=c,N+=c;C-=y}for(I=C,N=0,O=0;O<w;++O)v[I]=D[N++],I+=c}h(D)}}},a={"uint32,1,0":function(u,h,f){return function x(v,g,y,p,m,w,c,M,_,E,L){var C,O,I,N,R,V,F,D,U,j,J,X,Z,Y,W,Q,ne,re,ie,se,ge,ue,ce,le,de,Ce=(g-v+1)/6|0,xe=v+Ce,_e=g-Ce,we=v+g>>1,Ae=we-Ce,$=we+Ce,oe=xe,pe=Ae,ye=we,ke=$,De=_e,Pe=v+1,Re=g-1,fe=!0,ve=0,Te=0,ze=0,He=M,Ve=h(He),nt=h(He);J=m*oe,X=m*pe,de=p;e:for(j=0;j<M;++j){if(D=X+de,(ze=y[F=J+de]-y[D])>0){O=oe,oe=pe,pe=O;break e}if(ze<0)break e;de+=E}J=m*ke,X=m*De,de=p;e:for(j=0;j<M;++j){if(D=X+de,(ze=y[F=J+de]-y[D])>0){O=ke,ke=De,De=O;break e}if(ze<0)break e;de+=E}J=m*oe,X=m*ye,de=p;e:for(j=0;j<M;++j){if(D=X+de,(ze=y[F=J+de]-y[D])>0){O=oe,oe=ye,ye=O;break e}if(ze<0)break e;de+=E}J=m*pe,X=m*ye,de=p;e:for(j=0;j<M;++j){if(D=X+de,(ze=y[F=J+de]-y[D])>0){O=pe,pe=ye,ye=O;break e}if(ze<0)break e;de+=E}J=m*oe,X=m*ke,de=p;e:for(j=0;j<M;++j){if(D=X+de,(ze=y[F=J+de]-y[D])>0){O=oe,oe=ke,ke=O;break e}if(ze<0)break e;de+=E}J=m*ye,X=m*ke,de=p;e:for(j=0;j<M;++j){if(D=X+de,(ze=y[F=J+de]-y[D])>0){O=ye,ye=ke,ke=O;break e}if(ze<0)break e;de+=E}J=m*pe,X=m*De,de=p;e:for(j=0;j<M;++j){if(D=X+de,(ze=y[F=J+de]-y[D])>0){O=pe,pe=De,De=O;break e}if(ze<0)break e;de+=E}J=m*pe,X=m*ye,de=p;e:for(j=0;j<M;++j){if(D=X+de,(ze=y[F=J+de]-y[D])>0){O=pe,pe=ye,ye=O;break e}if(ze<0)break e;de+=E}J=m*ke,X=m*De,de=p;e:for(j=0;j<M;++j){if(D=X+de,(ze=y[F=J+de]-y[D])>0){O=ke,ke=De,De=O;break e}if(ze<0)break e;de+=E}for(J=m*oe,X=m*pe,Z=m*ye,Y=m*ke,W=m*De,Q=m*xe,ne=m*we,re=m*_e,le=0,de=p,j=0;j<M;++j)F=J+de,D=X+de,U=Z+de,ie=Y+de,se=W+de,ge=Q+de,ue=ne+de,ce=re+de,Ve[le]=y[D],nt[le]=y[ie],fe=fe&&Ve[le]===nt[le],I=y[F],N=y[U],R=y[se],y[ge]=I,y[ue]=N,y[ce]=R,++le,de+=_;for(J=m*Ae,X=m*v,de=p,j=0;j<M;++j)D=X+de,y[F=J+de]=y[D],de+=_;for(J=m*$,X=m*g,de=p,j=0;j<M;++j)D=X+de,y[F=J+de]=y[D],de+=_;if(fe)for(V=Pe;V<=Re;++V){for(F=p+V*m,le=0,j=0;j<M&&(ze=y[F]-Ve[le])==0;++j)le+=L,F+=E;if(ze!==0)if(ze<0){if(V!==Pe)for(J=m*V,X=m*Pe,de=p,j=0;j<M;++j)D=X+de,C=y[F=J+de],y[F]=y[D],y[D]=C,de+=_;++Pe}else for(;;){for(F=p+Re*m,le=0,j=0;j<M&&(ze=y[F]-Ve[le])==0;++j)le+=L,F+=E;if(!(ze>0)){if(ze<0){for(J=m*V,X=m*Pe,Z=m*Re,de=p,j=0;j<M;++j)D=X+de,U=Z+de,C=y[F=J+de],y[F]=y[D],y[D]=y[U],y[U]=C,de+=_;++Pe,--Re;break}for(J=m*V,X=m*Re,de=p,j=0;j<M;++j)D=X+de,C=y[F=J+de],y[F]=y[D],y[D]=C,de+=_;--Re;break}Re--}}else for(V=Pe;V<=Re;++V){for(F=p+V*m,le=0,j=0;j<M&&(ve=y[F]-Ve[le])==0;++j)le+=L,F+=E;if(ve<0){if(V!==Pe)for(J=m*V,X=m*Pe,de=p,j=0;j<M;++j)D=X+de,C=y[F=J+de],y[F]=y[D],y[D]=C,de+=_;++Pe}else{for(F=p+V*m,le=0,j=0;j<M&&(Te=y[F]-nt[le])==0;++j)le+=L,F+=E;if(Te>0)for(;;){for(F=p+Re*m,le=0,j=0;j<M&&(ze=y[F]-nt[le])==0;++j)le+=L,F+=E;if(!(ze>0)){for(F=p+Re*m,le=0,j=0;j<M&&(ze=y[F]-Ve[le])==0;++j)le+=L,F+=E;if(ze<0){for(J=m*V,X=m*Pe,Z=m*Re,de=p,j=0;j<M;++j)D=X+de,U=Z+de,C=y[F=J+de],y[F]=y[D],y[D]=y[U],y[U]=C,de+=_;++Pe,--Re}else{for(J=m*V,X=m*Re,de=p,j=0;j<M;++j)D=X+de,C=y[F=J+de],y[F]=y[D],y[D]=C,de+=_;--Re}break}if(--Re<V)break}}}for(J=m*v,X=m*(Pe-1),le=0,de=p,j=0;j<M;++j)D=X+de,y[F=J+de]=y[D],y[D]=Ve[le],++le,de+=_;for(J=m*g,X=m*(Re+1),le=0,de=p,j=0;j<M;++j)D=X+de,y[F=J+de]=y[D],y[D]=nt[le],++le,de+=_;if(Pe-2-v<=32?u(v,Pe-2,y,p,m,w,c,M,_,E,L):x(v,Pe-2,y,p,m,w,c,M,_,E,L),g-(Re+2)<=32?u(Re+2,g,y,p,m,w,c,M,_,E,L):x(Re+2,g,y,p,m,w,c,M,_,E,L),fe)return f(Ve),void f(nt);if(Pe<xe&&Re>_e){e:for(;;){for(F=p+Pe*m,le=0,de=p,j=0;j<M;++j){if(y[F]!==Ve[le])break e;++le,F+=_}++Pe}e:for(;;){for(F=p+Re*m,le=0,de=p,j=0;j<M;++j){if(y[F]!==nt[le])break e;++le,F+=_}--Re}for(V=Pe;V<=Re;++V){for(F=p+V*m,le=0,j=0;j<M&&(ve=y[F]-Ve[le])==0;++j)le+=L,F+=E;if(ve===0){if(V!==Pe)for(J=m*V,X=m*Pe,de=p,j=0;j<M;++j)D=X+de,C=y[F=J+de],y[F]=y[D],y[D]=C,de+=_;++Pe}else{for(F=p+V*m,le=0,j=0;j<M&&(Te=y[F]-nt[le])==0;++j)le+=L,F+=E;if(Te===0)for(;;){for(F=p+Re*m,le=0,j=0;j<M&&(ze=y[F]-nt[le])==0;++j)le+=L,F+=E;if(ze!==0){for(F=p+Re*m,le=0,j=0;j<M&&(ze=y[F]-Ve[le])==0;++j)le+=L,F+=E;if(ze<0){for(J=m*V,X=m*Pe,Z=m*Re,de=p,j=0;j<M;++j)D=X+de,U=Z+de,C=y[F=J+de],y[F]=y[D],y[D]=y[U],y[U]=C,de+=_;++Pe,--Re}else{for(J=m*V,X=m*Re,de=p,j=0;j<M;++j)D=X+de,C=y[F=J+de],y[F]=y[D],y[D]=C,de+=_;--Re}break}if(--Re<V)break}}}}f(Ve),f(nt),Re-Pe<=32?u(Pe,Re,y,p,m,w,c,M,_,E,L):x(Pe,Re,y,p,m,w,c,M,_,E,L)}}},i={"uint32,1,0":function(u,h){return function(f){var x=f.data,v=0|f.offset,g=f.shape,y=f.stride,p=0|y[0],m=0|g[0],w=0|y[1],c=0|g[1],M=w,_=w;m<=32?u(0,m-1,x,v,p,w,m,c,M,_,1):h(0,m-1,x,v,p,w,m,c,M,_,1)}}};d.exports=function(u,h){var f=[h,u].join(","),x=i[f],v=function(y,p){var m=r(p),w=[p,y].join(","),c=n[w];return m?c(m[0],m[1]):c()}(u,h),g=function(y,p,m){var w=r(p),c=[p,y].join(","),M=a[c];return y.length>1&&w?M(m,w[0],w[1]):M(m)}(u,h,v);return x(v,g)}},8729:function(d,s,t){var o=t(8139),r={};d.exports=function(n){var a=n.order,i=n.dtype,u=[a,i].join(":"),h=r[u];return h||(r[u]=h=o(a,i)),h(n),n}},5050:function(d,s,t){var o=t(4780),r=typeof Float64Array<"u";function n(f,x){return f[0]-x[0]}function a(){var f,x=this.stride,v=new Array(x.length);for(f=0;f<v.length;++f)v[f]=[Math.abs(x[f]),f];v.sort(n);var g=new Array(v.length);for(f=0;f<g.length;++f)g[f]=v[f][1];return g}var i={T:function(f){function x(g){this.data=g}var v=x.prototype;return v.dtype=f,v.index=function(){return-1},v.size=0,v.dimension=-1,v.shape=v.stride=v.order=[],v.lo=v.hi=v.transpose=v.step=function(){return new x(this.data)},v.get=v.set=function(){},v.pick=function(){return null},function(g){return new x(g)}},0:function(f,x){function v(y,p){this.data=y,this.offset=p}var g=v.prototype;return g.dtype=f,g.index=function(){return this.offset},g.dimension=0,g.size=1,g.shape=g.stride=g.order=[],g.lo=g.hi=g.transpose=g.step=function(){return new v(this.data,this.offset)},g.pick=function(){return x(this.data)},g.valueOf=g.get=function(){return f==="generic"?this.data.get(this.offset):this.data[this.offset]},g.set=function(y){return f==="generic"?this.data.set(this.offset,y):this.data[this.offset]=y},function(y,p,m,w){return new v(y,w)}},1:function(f,x,v){function g(p,m,w,c){this.data=p,this.shape=[m],this.stride=[w],this.offset=0|c}var y=g.prototype;return y.dtype=f,y.dimension=1,Object.defineProperty(y,"size",{get:function(){return this.shape[0]}}),y.order=[0],y.set=function(p,m){return f==="generic"?this.data.set(this.offset+this.stride[0]*p,m):this.data[this.offset+this.stride[0]*p]=m},y.get=function(p){return f==="generic"?this.data.get(this.offset+this.stride[0]*p):this.data[this.offset+this.stride[0]*p]},y.index=function(p){return this.offset+this.stride[0]*p},y.hi=function(p){return new g(this.data,typeof p!="number"||p<0?this.shape[0]:0|p,this.stride[0],this.offset)},y.lo=function(p){var m=this.offset,w=0,c=this.shape[0],M=this.stride[0];return typeof p=="number"&&p>=0&&(m+=M*(w=0|p),c-=w),new g(this.data,c,M,m)},y.step=function(p){var m=this.shape[0],w=this.stride[0],c=this.offset,M=0,_=Math.ceil;return typeof p=="number"&&((M=0|p)<0?(c+=w*(m-1),m=_(-m/M)):m=_(m/M),w*=M),new g(this.data,m,w,c)},y.transpose=function(p){p=p===void 0?0:0|p;var m=this.shape,w=this.stride;return new g(this.data,m[p],w[p],this.offset)},y.pick=function(p){var m=[],w=[],c=this.offset;return typeof p=="number"&&p>=0?c=c+this.stride[0]*p|0:(m.push(this.shape[0]),w.push(this.stride[0])),(0,x[m.length+1])(this.data,m,w,c)},function(p,m,w,c){return new g(p,m[0],w[0],c)}},2:function(f,x,v){function g(p,m,w,c,M,_){this.data=p,this.shape=[m,w],this.stride=[c,M],this.offset=0|_}var y=g.prototype;return y.dtype=f,y.dimension=2,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(y,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),y.set=function(p,m,w){return f==="generic"?this.data.set(this.offset+this.stride[0]*p+this.stride[1]*m,w):this.data[this.offset+this.stride[0]*p+this.stride[1]*m]=w},y.get=function(p,m){return f==="generic"?this.data.get(this.offset+this.stride[0]*p+this.stride[1]*m):this.data[this.offset+this.stride[0]*p+this.stride[1]*m]},y.index=function(p,m){return this.offset+this.stride[0]*p+this.stride[1]*m},y.hi=function(p,m){return new g(this.data,typeof p!="number"||p<0?this.shape[0]:0|p,typeof m!="number"||m<0?this.shape[1]:0|m,this.stride[0],this.stride[1],this.offset)},y.lo=function(p,m){var w=this.offset,c=0,M=this.shape[0],_=this.shape[1],E=this.stride[0],L=this.stride[1];return typeof p=="number"&&p>=0&&(w+=E*(c=0|p),M-=c),typeof m=="number"&&m>=0&&(w+=L*(c=0|m),_-=c),new g(this.data,M,_,E,L,w)},y.step=function(p,m){var w=this.shape[0],c=this.shape[1],M=this.stride[0],_=this.stride[1],E=this.offset,L=0,C=Math.ceil;return typeof p=="number"&&((L=0|p)<0?(E+=M*(w-1),w=C(-w/L)):w=C(w/L),M*=L),typeof m=="number"&&((L=0|m)<0?(E+=_*(c-1),c=C(-c/L)):c=C(c/L),_*=L),new g(this.data,w,c,M,_,E)},y.transpose=function(p,m){p=p===void 0?0:0|p,m=m===void 0?1:0|m;var w=this.shape,c=this.stride;return new g(this.data,w[p],w[m],c[p],c[m],this.offset)},y.pick=function(p,m){var w=[],c=[],M=this.offset;return typeof p=="number"&&p>=0?M=M+this.stride[0]*p|0:(w.push(this.shape[0]),c.push(this.stride[0])),typeof m=="number"&&m>=0?M=M+this.stride[1]*m|0:(w.push(this.shape[1]),c.push(this.stride[1])),(0,x[w.length+1])(this.data,w,c,M)},function(p,m,w,c){return new g(p,m[0],m[1],w[0],w[1],c)}},3:function(f,x,v){function g(p,m,w,c,M,_,E,L){this.data=p,this.shape=[m,w,c],this.stride=[M,_,E],this.offset=0|L}var y=g.prototype;return y.dtype=f,y.dimension=3,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(y,"order",{get:function(){var p=Math.abs(this.stride[0]),m=Math.abs(this.stride[1]),w=Math.abs(this.stride[2]);return p>m?m>w?[2,1,0]:p>w?[1,2,0]:[1,0,2]:p>w?[2,0,1]:w>m?[0,1,2]:[0,2,1]}}),y.set=function(p,m,w,c){return f==="generic"?this.data.set(this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w,c):this.data[this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w]=c},y.get=function(p,m,w){return f==="generic"?this.data.get(this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w):this.data[this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w]},y.index=function(p,m,w){return this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w},y.hi=function(p,m,w){return new g(this.data,typeof p!="number"||p<0?this.shape[0]:0|p,typeof m!="number"||m<0?this.shape[1]:0|m,typeof w!="number"||w<0?this.shape[2]:0|w,this.stride[0],this.stride[1],this.stride[2],this.offset)},y.lo=function(p,m,w){var c=this.offset,M=0,_=this.shape[0],E=this.shape[1],L=this.shape[2],C=this.stride[0],O=this.stride[1],I=this.stride[2];return typeof p=="number"&&p>=0&&(c+=C*(M=0|p),_-=M),typeof m=="number"&&m>=0&&(c+=O*(M=0|m),E-=M),typeof w=="number"&&w>=0&&(c+=I*(M=0|w),L-=M),new g(this.data,_,E,L,C,O,I,c)},y.step=function(p,m,w){var c=this.shape[0],M=this.shape[1],_=this.shape[2],E=this.stride[0],L=this.stride[1],C=this.stride[2],O=this.offset,I=0,N=Math.ceil;return typeof p=="number"&&((I=0|p)<0?(O+=E*(c-1),c=N(-c/I)):c=N(c/I),E*=I),typeof m=="number"&&((I=0|m)<0?(O+=L*(M-1),M=N(-M/I)):M=N(M/I),L*=I),typeof w=="number"&&((I=0|w)<0?(O+=C*(_-1),_=N(-_/I)):_=N(_/I),C*=I),new g(this.data,c,M,_,E,L,C,O)},y.transpose=function(p,m,w){p=p===void 0?0:0|p,m=m===void 0?1:0|m,w=w===void 0?2:0|w;var c=this.shape,M=this.stride;return new g(this.data,c[p],c[m],c[w],M[p],M[m],M[w],this.offset)},y.pick=function(p,m,w){var c=[],M=[],_=this.offset;return typeof p=="number"&&p>=0?_=_+this.stride[0]*p|0:(c.push(this.shape[0]),M.push(this.stride[0])),typeof m=="number"&&m>=0?_=_+this.stride[1]*m|0:(c.push(this.shape[1]),M.push(this.stride[1])),typeof w=="number"&&w>=0?_=_+this.stride[2]*w|0:(c.push(this.shape[2]),M.push(this.stride[2])),(0,x[c.length+1])(this.data,c,M,_)},function(p,m,w,c){return new g(p,m[0],m[1],m[2],w[0],w[1],w[2],c)}},4:function(f,x,v){function g(p,m,w,c,M,_,E,L,C,O){this.data=p,this.shape=[m,w,c,M],this.stride=[_,E,L,C],this.offset=0|O}var y=g.prototype;return y.dtype=f,y.dimension=4,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(y,"order",{get:v}),y.set=function(p,m,w,c,M){return f==="generic"?this.data.set(this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*c,M):this.data[this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*c]=M},y.get=function(p,m,w,c){return f==="generic"?this.data.get(this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*c):this.data[this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*c]},y.index=function(p,m,w,c){return this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*c},y.hi=function(p,m,w,c){return new g(this.data,typeof p!="number"||p<0?this.shape[0]:0|p,typeof m!="number"||m<0?this.shape[1]:0|m,typeof w!="number"||w<0?this.shape[2]:0|w,typeof c!="number"||c<0?this.shape[3]:0|c,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},y.lo=function(p,m,w,c){var M=this.offset,_=0,E=this.shape[0],L=this.shape[1],C=this.shape[2],O=this.shape[3],I=this.stride[0],N=this.stride[1],R=this.stride[2],V=this.stride[3];return typeof p=="number"&&p>=0&&(M+=I*(_=0|p),E-=_),typeof m=="number"&&m>=0&&(M+=N*(_=0|m),L-=_),typeof w=="number"&&w>=0&&(M+=R*(_=0|w),C-=_),typeof c=="number"&&c>=0&&(M+=V*(_=0|c),O-=_),new g(this.data,E,L,C,O,I,N,R,V,M)},y.step=function(p,m,w,c){var M=this.shape[0],_=this.shape[1],E=this.shape[2],L=this.shape[3],C=this.stride[0],O=this.stride[1],I=this.stride[2],N=this.stride[3],R=this.offset,V=0,F=Math.ceil;return typeof p=="number"&&((V=0|p)<0?(R+=C*(M-1),M=F(-M/V)):M=F(M/V),C*=V),typeof m=="number"&&((V=0|m)<0?(R+=O*(_-1),_=F(-_/V)):_=F(_/V),O*=V),typeof w=="number"&&((V=0|w)<0?(R+=I*(E-1),E=F(-E/V)):E=F(E/V),I*=V),typeof c=="number"&&((V=0|c)<0?(R+=N*(L-1),L=F(-L/V)):L=F(L/V),N*=V),new g(this.data,M,_,E,L,C,O,I,N,R)},y.transpose=function(p,m,w,c){p=p===void 0?0:0|p,m=m===void 0?1:0|m,w=w===void 0?2:0|w,c=c===void 0?3:0|c;var M=this.shape,_=this.stride;return new g(this.data,M[p],M[m],M[w],M[c],_[p],_[m],_[w],_[c],this.offset)},y.pick=function(p,m,w,c){var M=[],_=[],E=this.offset;return typeof p=="number"&&p>=0?E=E+this.stride[0]*p|0:(M.push(this.shape[0]),_.push(this.stride[0])),typeof m=="number"&&m>=0?E=E+this.stride[1]*m|0:(M.push(this.shape[1]),_.push(this.stride[1])),typeof w=="number"&&w>=0?E=E+this.stride[2]*w|0:(M.push(this.shape[2]),_.push(this.stride[2])),typeof c=="number"&&c>=0?E=E+this.stride[3]*c|0:(M.push(this.shape[3]),_.push(this.stride[3])),(0,x[M.length+1])(this.data,M,_,E)},function(p,m,w,c){return new g(p,m[0],m[1],m[2],m[3],w[0],w[1],w[2],w[3],c)}},5:function(f,x,v){function g(p,m,w,c,M,_,E,L,C,O,I,N){this.data=p,this.shape=[m,w,c,M,_],this.stride=[E,L,C,O,I],this.offset=0|N}var y=g.prototype;return y.dtype=f,y.dimension=5,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(y,"order",{get:v}),y.set=function(p,m,w,c,M,_){return f==="generic"?this.data.set(this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*c+this.stride[4]*M,_):this.data[this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*c+this.stride[4]*M]=_},y.get=function(p,m,w,c,M){return f==="generic"?this.data.get(this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*c+this.stride[4]*M):this.data[this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*c+this.stride[4]*M]},y.index=function(p,m,w,c,M){return this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*c+this.stride[4]*M},y.hi=function(p,m,w,c,M){return new g(this.data,typeof p!="number"||p<0?this.shape[0]:0|p,typeof m!="number"||m<0?this.shape[1]:0|m,typeof w!="number"||w<0?this.shape[2]:0|w,typeof c!="number"||c<0?this.shape[3]:0|c,typeof M!="number"||M<0?this.shape[4]:0|M,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},y.lo=function(p,m,w,c,M){var _=this.offset,E=0,L=this.shape[0],C=this.shape[1],O=this.shape[2],I=this.shape[3],N=this.shape[4],R=this.stride[0],V=this.stride[1],F=this.stride[2],D=this.stride[3],U=this.stride[4];return typeof p=="number"&&p>=0&&(_+=R*(E=0|p),L-=E),typeof m=="number"&&m>=0&&(_+=V*(E=0|m),C-=E),typeof w=="number"&&w>=0&&(_+=F*(E=0|w),O-=E),typeof c=="number"&&c>=0&&(_+=D*(E=0|c),I-=E),typeof M=="number"&&M>=0&&(_+=U*(E=0|M),N-=E),new g(this.data,L,C,O,I,N,R,V,F,D,U,_)},y.step=function(p,m,w,c,M){var _=this.shape[0],E=this.shape[1],L=this.shape[2],C=this.shape[3],O=this.shape[4],I=this.stride[0],N=this.stride[1],R=this.stride[2],V=this.stride[3],F=this.stride[4],D=this.offset,U=0,j=Math.ceil;return typeof p=="number"&&((U=0|p)<0?(D+=I*(_-1),_=j(-_/U)):_=j(_/U),I*=U),typeof m=="number"&&((U=0|m)<0?(D+=N*(E-1),E=j(-E/U)):E=j(E/U),N*=U),typeof w=="number"&&((U=0|w)<0?(D+=R*(L-1),L=j(-L/U)):L=j(L/U),R*=U),typeof c=="number"&&((U=0|c)<0?(D+=V*(C-1),C=j(-C/U)):C=j(C/U),V*=U),typeof M=="number"&&((U=0|M)<0?(D+=F*(O-1),O=j(-O/U)):O=j(O/U),F*=U),new g(this.data,_,E,L,C,O,I,N,R,V,F,D)},y.transpose=function(p,m,w,c,M){p=p===void 0?0:0|p,m=m===void 0?1:0|m,w=w===void 0?2:0|w,c=c===void 0?3:0|c,M=M===void 0?4:0|M;var _=this.shape,E=this.stride;return new g(this.data,_[p],_[m],_[w],_[c],_[M],E[p],E[m],E[w],E[c],E[M],this.offset)},y.pick=function(p,m,w,c,M){var _=[],E=[],L=this.offset;return typeof p=="number"&&p>=0?L=L+this.stride[0]*p|0:(_.push(this.shape[0]),E.push(this.stride[0])),typeof m=="number"&&m>=0?L=L+this.stride[1]*m|0:(_.push(this.shape[1]),E.push(this.stride[1])),typeof w=="number"&&w>=0?L=L+this.stride[2]*w|0:(_.push(this.shape[2]),E.push(this.stride[2])),typeof c=="number"&&c>=0?L=L+this.stride[3]*c|0:(_.push(this.shape[3]),E.push(this.stride[3])),typeof M=="number"&&M>=0?L=L+this.stride[4]*M|0:(_.push(this.shape[4]),E.push(this.stride[4])),(0,x[_.length+1])(this.data,_,E,L)},function(p,m,w,c){return new g(p,m[0],m[1],m[2],m[3],m[4],w[0],w[1],w[2],w[3],w[4],c)}}};function u(f,x){var v=x===-1?"T":String(x),g=i[v];return x===-1?g(f):x===0?g(f,h[f][0]):g(f,h[f],a)}var h={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};d.exports=function(f,x,v,g){if(f===void 0)return(0,h.array[0])([]);typeof f=="number"&&(f=[f]),x===void 0&&(x=[f.length]);var y=x.length;if(v===void 0){v=new Array(y);for(var p=y-1,m=1;p>=0;--p)v[p]=m,m*=x[p]}if(g===void 0)for(g=0,p=0;p<y;++p)v[p]<0&&(g-=(x[p]-1)*v[p]);for(var w=function(M){if(o(M))return"buffer";if(r)switch(Object.prototype.toString.call(M)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(M)?"array":"generic"}(f),c=h[w];c.length<=y+1;)c.push(u(w,c.length-1));return(0,c[y+1])(f,x,v,g)}},8551:function(d,s,t){var o=t(8362),r=Math.pow(2,-1074),n=-1>>>0;d.exports=function(a,i){if(isNaN(a)||isNaN(i))return NaN;if(a===i)return a;if(a===0)return i<0?-r:r;var u=o.hi(a),h=o.lo(a);return i>a==a>0?h===n?(u+=1,h=0):h+=1:h===0?(h=n,u-=1):h-=1,o.pack(h,u)}},115:function(d,s){s.vertexNormals=function(t,o,r){for(var n=o.length,a=new Array(n),i=r===void 0?1e-6:r,u=0;u<n;++u)a[u]=[0,0,0];for(u=0;u<t.length;++u)for(var h=t[u],f=0,x=h[h.length-1],v=h[0],g=0;g<h.length;++g){f=x,x=v,v=h[(g+1)%h.length];for(var y=o[f],p=o[x],m=o[v],w=new Array(3),c=0,M=new Array(3),_=0,E=0;E<3;++E)w[E]=y[E]-p[E],c+=w[E]*w[E],M[E]=m[E]-p[E],_+=M[E]*M[E];if(c*_>i){var L=a[x],C=1/Math.sqrt(c*_);for(E=0;E<3;++E){var O=(E+1)%3,I=(E+2)%3;L[E]+=C*(M[O]*w[I]-M[I]*w[O])}}}for(u=0;u<n;++u){L=a[u];var N=0;for(E=0;E<3;++E)N+=L[E]*L[E];if(N>i)for(C=1/Math.sqrt(N),E=0;E<3;++E)L[E]*=C;else for(E=0;E<3;++E)L[E]=0}return a},s.faceNormals=function(t,o,r){for(var n=t.length,a=new Array(n),i=r===void 0?1e-6:r,u=0;u<n;++u){for(var h=t[u],f=new Array(3),x=0;x<3;++x)f[x]=o[h[x]];var v=new Array(3),g=new Array(3);for(x=0;x<3;++x)v[x]=f[1][x]-f[0][x],g[x]=f[2][x]-f[0][x];var y=new Array(3),p=0;for(x=0;x<3;++x){var m=(x+1)%3,w=(x+2)%3;y[x]=v[m]*g[w]-v[w]*g[m],p+=y[x]*y[x]}for(p=p>i?1/Math.sqrt(p):0,x=0;x<3;++x)y[x]*=p;a[u]=y}return a}},567:function(d){d.exports=function(s,t,o,r,n,a,i,u,h,f){var x=t+a+f;if(v>0){var v=Math.sqrt(x+1);s[0]=.5*(i-h)/v,s[1]=.5*(u-r)/v,s[2]=.5*(o-a)/v,s[3]=.5*v}else{var g=Math.max(t,a,f);v=Math.sqrt(2*g-x+1),t>=g?(s[0]=.5*v,s[1]=.5*(n+o)/v,s[2]=.5*(u+r)/v,s[3]=.5*(i-h)/v):a>=g?(s[0]=.5*(o+n)/v,s[1]=.5*v,s[2]=.5*(h+i)/v,s[3]=.5*(u-r)/v):(s[0]=.5*(r+u)/v,s[1]=.5*(i+h)/v,s[2]=.5*v,s[3]=.5*(o-n)/v)}return s}},7774:function(d,s,t){d.exports=function(g){var y=(g=g||{}).center||[0,0,0],p=g.rotation||[0,0,0,1],m=g.radius||1;y=[].slice.call(y,0,3),f(p=[].slice.call(p,0,4),p);var w=new x(p,y,Math.log(m));return w.setDistanceLimits(g.zoomMin,g.zoomMax),("eye"in g||"up"in g)&&w.lookAt(0,g.eye,g.center,g.up),w};var o=t(8444),r=t(3012),n=t(5950),a=t(7437),i=t(567);function u(g,y,p){return Math.sqrt(Math.pow(g,2)+Math.pow(y,2)+Math.pow(p,2))}function h(g,y,p,m){return Math.sqrt(Math.pow(g,2)+Math.pow(y,2)+Math.pow(p,2)+Math.pow(m,2))}function f(g,y){var p=y[0],m=y[1],w=y[2],c=y[3],M=h(p,m,w,c);M>1e-6?(g[0]=p/M,g[1]=m/M,g[2]=w/M,g[3]=c/M):(g[0]=g[1]=g[2]=0,g[3]=1)}function x(g,y,p){this.radius=o([p]),this.center=o(y),this.rotation=o(g),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var v=x.prototype;v.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},v.recalcMatrix=function(g){this.radius.curve(g),this.center.curve(g),this.rotation.curve(g);var y=this.computedRotation;f(y,y);var p=this.computedMatrix;n(p,y);var m=this.computedCenter,w=this.computedEye,c=this.computedUp,M=Math.exp(this.computedRadius[0]);w[0]=m[0]+M*p[2],w[1]=m[1]+M*p[6],w[2]=m[2]+M*p[10],c[0]=p[1],c[1]=p[5],c[2]=p[9];for(var _=0;_<3;++_){for(var E=0,L=0;L<3;++L)E+=p[_+4*L]*w[L];p[12+_]=-E}},v.getMatrix=function(g,y){this.recalcMatrix(g);var p=this.computedMatrix;if(y){for(var m=0;m<16;++m)y[m]=p[m];return y}return p},v.idle=function(g){this.center.idle(g),this.radius.idle(g),this.rotation.idle(g)},v.flush=function(g){this.center.flush(g),this.radius.flush(g),this.rotation.flush(g)},v.pan=function(g,y,p,m){y=y||0,p=p||0,m=m||0,this.recalcMatrix(g);var w=this.computedMatrix,c=w[1],M=w[5],_=w[9],E=u(c,M,_);c/=E,M/=E,_/=E;var L=w[0],C=w[4],O=w[8],I=L*c+C*M+O*_,N=u(L-=c*I,C-=M*I,O-=_*I);L/=N,C/=N,O/=N,w[2],w[6],w[10];var R=L*y+c*p,V=C*y+M*p,F=O*y+_*p;this.center.move(g,R,V,F);var D=Math.exp(this.computedRadius[0]);D=Math.max(1e-4,D+m),this.radius.set(g,Math.log(D))},v.rotate=function(g,y,p,m){this.recalcMatrix(g),y=y||0,p=p||0;var w=this.computedMatrix,c=w[0],M=w[4],_=w[8],E=w[1],L=w[5],C=w[9],O=w[2],I=w[6],N=w[10],R=y*c+p*E,V=y*M+p*L,F=y*_+p*C,D=-(I*F-N*V),U=-(N*R-O*F),j=-(O*V-I*R),J=Math.sqrt(Math.max(0,1-Math.pow(D,2)-Math.pow(U,2)-Math.pow(j,2))),X=h(D,U,j,J);X>1e-6?(D/=X,U/=X,j/=X,J/=X):(D=U=j=0,J=1);var Z=this.computedRotation,Y=Z[0],W=Z[1],Q=Z[2],ne=Z[3],re=Y*J+ne*D+W*j-Q*U,ie=W*J+ne*U+Q*D-Y*j,se=Q*J+ne*j+Y*U-W*D,ge=ne*J-Y*D-W*U-Q*j;if(m){D=O,U=I,j=N;var ue=Math.sin(m)/u(D,U,j);D*=ue,U*=ue,j*=ue,ge=ge*(J=Math.cos(y))-(re=re*J+ge*D+ie*j-se*U)*D-(ie=ie*J+ge*U+se*D-re*j)*U-(se=se*J+ge*j+re*U-ie*D)*j}var ce=h(re,ie,se,ge);ce>1e-6?(re/=ce,ie/=ce,se/=ce,ge/=ce):(re=ie=se=0,ge=1),this.rotation.set(g,re,ie,se,ge)},v.lookAt=function(g,y,p,m){this.recalcMatrix(g),p=p||this.computedCenter,y=y||this.computedEye,m=m||this.computedUp;var w=this.computedMatrix;r(w,y,p,m);var c=this.computedRotation;i(c,w[0],w[1],w[2],w[4],w[5],w[6],w[8],w[9],w[10]),f(c,c),this.rotation.set(g,c[0],c[1],c[2],c[3]);for(var M=0,_=0;_<3;++_)M+=Math.pow(p[_]-y[_],2);this.radius.set(g,.5*Math.log(Math.max(M,1e-6))),this.center.set(g,p[0],p[1],p[2])},v.translate=function(g,y,p,m){this.center.move(g,y||0,p||0,m||0)},v.setMatrix=function(g,y){var p=this.computedRotation;i(p,y[0],y[1],y[2],y[4],y[5],y[6],y[8],y[9],y[10]),f(p,p),this.rotation.set(g,p[0],p[1],p[2],p[3]);var m=this.computedMatrix;a(m,y);var w=m[15];if(Math.abs(w)>1e-6){var c=m[12]/w,M=m[13]/w,_=m[14]/w;this.recalcMatrix(g);var E=Math.exp(this.computedRadius[0]);this.center.set(g,c-m[2]*E,M-m[6]*E,_-m[10]*E),this.radius.idle(g)}else this.center.idle(g),this.radius.idle(g)},v.setDistance=function(g,y){y>0&&this.radius.set(g,Math.log(y))},v.setDistanceLimits=function(g,y){g=g>0?Math.log(g):-1/0,y=y>0?Math.log(y):1/0,y=Math.max(y,g),this.radius.bounds[0][0]=g,this.radius.bounds[1][0]=y},v.getDistanceLimits=function(g){var y=this.radius.bounds;return g?(g[0]=Math.exp(y[0][0]),g[1]=Math.exp(y[1][0]),g):[Math.exp(y[0][0]),Math.exp(y[1][0])]},v.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},v.fromJSON=function(g){var y=this.lastT(),p=g.center;p&&this.center.set(y,p[0],p[1],p[2]);var m=g.rotation;m&&this.rotation.set(y,m[0],m[1],m[2],m[3]);var w=g.distance;w&&w>0&&this.radius.set(y,Math.log(w)),this.setDistanceLimits(g.zoomMin,g.zoomMax)}},4930:function(d,s,t){var o=t(6184);d.exports=function(r,n,a){return o(a=a!==void 0?a+"":" ",n)+r}},4405:function(d){d.exports=function(s,t){t||(t=[0,""]),s=String(s);var o=parseFloat(s,10);return t[0]=o,t[1]=s.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},4166:function(d,s,t){d.exports=function(r,n){for(var a=0|n.length,i=r.length,u=[new Array(a),new Array(a)],h=0;h<a;++h)u[0][h]=[],u[1][h]=[];for(h=0;h<i;++h){var f=r[h];u[0][f[0]].push(f),u[1][f[1]].push(f)}var x=[];for(h=0;h<a;++h)u[0][h].length+u[1][h].length===0&&x.push([h]);function v(M,_){var E=u[_][M[_]];E.splice(E.indexOf(M),1)}function g(M,_,E){for(var L,C,O,I=0;I<2;++I)if(u[I][_].length>0){L=u[I][_][0],O=I;break}C=L[1^O];for(var N=0;N<2;++N)for(var R=u[N][_],V=0;V<R.length;++V){var F=R[V],D=F[1^N];o(n[M],n[_],n[C],n[D])>0&&(L=F,C=D,O=N)}return E||L&&v(L,O),C}function y(M,_){var E=u[_][M][0],L=[M];v(E,_);for(var C=E[1^_];;){for(;C!==M;)L.push(C),C=g(L[L.length-2],C,!1);if(u[0][M].length+u[1][M].length===0)break;var O=L[L.length-1],I=M,N=L[1],R=g(O,I,!0);if(o(n[O],n[I],n[N],n[R])<0)break;L.push(M),C=g(O,I)}return L}function p(M,_){return _[1]===_[_.length-1]}for(h=0;h<a;++h)for(var m=0;m<2;++m){for(var w=[];u[m][h].length>0;){u[0][h].length;var c=y(h,m);p(0,c)?w.push.apply(w,c):(w.length>0&&x.push(w),w=c)}w.length>0&&x.push(w)}return x};var o=t(9398)},3959:function(d,s,t){d.exports=function(r,n){for(var a=o(r,n.length),i=new Array(n.length),u=new Array(n.length),h=[],f=0;f<n.length;++f){var x=a[f].length;u[f]=x,i[f]=!0,x<=1&&h.push(f)}for(;h.length>0;){var v=h.pop();i[v]=!1;var g=a[v];for(f=0;f<g.length;++f){var y=g[f];--u[y]==0&&h.push(y)}}var p=new Array(n.length),m=[];for(f=0;f<n.length;++f)i[f]?(v=m.length,p[f]=v,m.push(n[f])):p[f]=-1;var w=[];for(f=0;f<r.length;++f){var c=r[f];i[c[0]]&&i[c[1]]&&w.push([p[c[0]],p[c[1]]])}return[w,m]};var o=t(8348)},8040:function(d,s,t){d.exports=function(x,v){var g=h(x,v);x=g[0];for(var y=(v=g[1]).length,p=(x.length,o(x,v.length)),m=0;m<y;++m)if(p[m].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var w=r(x,v),c=(w=w.filter(function(Ce){for(var xe=Ce.length,_e=[0],we=0;we<xe;++we){var Ae=v[Ce[we]],$=v[Ce[(we+1)%xe]],oe=a(-Ae[0],Ae[1]),pe=a(-Ae[0],$[1]),ye=a($[0],Ae[1]),ke=a($[0],$[1]);_e=i(_e,i(i(oe,pe),i(ye,ke)))}return _e[_e.length-1]>0})).length,M=new Array(c),_=new Array(c);for(m=0;m<c;++m){M[m]=m;var E=new Array(c),L=w[m].map(function(Ce){return v[Ce]}),C=n([L]),O=0;e:for(var I=0;I<c;++I)if(E[I]=0,m!==I){for(var N=(le=w[I]).length,R=0;R<N;++R){var V=C(v[le[R]]);if(V!==0){V<0&&(E[I]=1,O+=1);continue e}}E[I]=1,O+=1}_[m]=[O,m,E]}for(_.sort(function(Ce,xe){return xe[0]-Ce[0]}),m=0;m<c;++m){var F=(E=_[m])[1],D=E[2];for(I=0;I<c;++I)D[I]&&(M[I]=F)}var U=function(Ce){for(var xe=new Array(Ce),_e=0;_e<Ce;++_e)xe[_e]=[];return xe}(c);for(m=0;m<c;++m)U[m].push(M[m]),U[M[m]].push(m);var j={},J=f(y,!1);for(m=0;m<c;++m)for(N=(le=w[m]).length,I=0;I<N;++I){var X=le[I],Z=le[(I+1)%N],Y=Math.min(X,Z)+":"+Math.max(X,Z);if(Y in j){var W=j[Y];U[W].push(m),U[m].push(W),J[X]=J[Z]=!0}else j[Y]=m}function Q(Ce){for(var xe=Ce.length,_e=0;_e<xe;++_e)if(!J[Ce[_e]])return!1;return!0}var ne=[],re=f(c,-1);for(m=0;m<c;++m)M[m]!==m||Q(w[m])?re[m]=-1:(ne.push(m),re[m]=0);for(g=[];ne.length>0;){var ie=ne.pop(),se=U[ie];u(se,function(Ce,xe){return Ce-xe});var ge,ue=se.length,ce=re[ie];if(ce===0){var le=w[ie];ge=[le]}for(m=0;m<ue;++m){var de=se[m];re[de]>=0||(re[de]=1^ce,ne.push(de),ce===0&&(Q(le=w[de])||(le.reverse(),ge.push(le))))}ce===0&&g.push(ge)}return g};var o=t(8348),r=t(4166),n=t(211),a=t(9660),i=t(9662),u=t(1215),h=t(3959);function f(x,v){for(var g=new Array(x),y=0;y<x;++y)g[y]=v;return g}},211:function(d,s,t){d.exports=function(f){for(var x=f.length,v=[],g=[],y=0;y<x;++y)for(var p=f[y],m=p.length,w=m-1,c=0;c<m;w=c++){var M=p[w],_=p[c];M[0]===_[0]?g.push([M,_]):v.push([M,_])}if(v.length===0)return g.length===0?h:(E=u(g),function(O){return E(O[0],O[1])?0:1});var E,L=r(v),C=function(O,I){return function(N){var R=a.le(I,N[0]);if(R<0)return 1;var V=O[R];if(!V){if(!(R>0&&I[R]===N[0]))return 1;V=O[R-1]}for(var F=1;V;){var D=V.key,U=o(N,D[0],D[1]);if(D[0][0]<D[1][0])if(U<0)V=V.left;else{if(!(U>0))return 0;F=-1,V=V.right}else if(U>0)V=V.left;else{if(!(U<0))return 0;F=1,V=V.right}}return F}}(L.slabs,L.coordinates);return g.length===0?C:function(O,I){return function(N){return O(N[0],N[1])?0:I(N)}}(u(g),C)};var o=t(417)[3],r=t(4385),n=t(9014),a=t(5070);function i(){return!0}function u(f){for(var x={},v=0;v<f.length;++v){var g=f[v],y=g[0][0],p=g[0][1],m=g[1][1],w=[Math.min(p,m),Math.max(p,m)];y in x?x[y].push(w):x[y]=[w]}var c={},M=Object.keys(x);for(v=0;v<M.length;++v){var _=x[M[v]];c[M[v]]=n(_)}return function(E){return function(L,C){var O=E[L];return!!O&&!!O.queryPoint(C,i)}}(c)}function h(f){return 1}},7309:function(d){var s=new Float64Array(4),t=new Float64Array(4),o=new Float64Array(4);d.exports=function(r,n,a,i,u){s.length<i.length&&(s=new Float64Array(i.length),t=new Float64Array(i.length),o=new Float64Array(i.length));for(var h=0;h<i.length;++h)s[h]=r[h]-i[h],t[h]=n[h]-r[h],o[h]=a[h]-r[h];var f=0,x=0,v=0,g=0,y=0,p=0;for(h=0;h<i.length;++h){var m=t[h],w=o[h],c=s[h];f+=m*m,x+=m*w,v+=w*w,g+=c*m,y+=c*w,p+=c*c}var M,_,E,L,C,O=Math.abs(f*v-x*x),I=x*y-v*g,N=x*g-f*y;if(I+N<=O)if(I<0)N<0&&g<0?(N=0,-g>=f?(I=1,M=f+2*g+p):M=g*(I=-g/f)+p):(I=0,y>=0?(N=0,M=p):-y>=v?(N=1,M=v+2*y+p):M=y*(N=-y/v)+p);else if(N<0)N=0,g>=0?(I=0,M=p):-g>=f?(I=1,M=f+2*g+p):M=g*(I=-g/f)+p;else{var R=1/O;M=(I*=R)*(f*I+x*(N*=R)+2*g)+N*(x*I+v*N+2*y)+p}else I<0?(E=v+y)>(_=x+g)?(L=E-_)>=(C=f-2*x+v)?(I=1,N=0,M=f+2*g+p):M=(I=L/C)*(f*I+x*(N=1-I)+2*g)+N*(x*I+v*N+2*y)+p:(I=0,E<=0?(N=1,M=v+2*y+p):y>=0?(N=0,M=p):M=y*(N=-y/v)+p):N<0?(E=f+g)>(_=x+y)?(L=E-_)>=(C=f-2*x+v)?(N=1,I=0,M=v+2*y+p):M=(I=1-(N=L/C))*(f*I+x*N+2*g)+N*(x*I+v*N+2*y)+p:(N=0,E<=0?(I=1,M=f+2*g+p):g>=0?(I=0,M=p):M=g*(I=-g/f)+p):(L=v+y-x-g)<=0?(I=0,N=1,M=v+2*y+p):L>=(C=f-2*x+v)?(I=1,N=0,M=f+2*g+p):M=(I=L/C)*(f*I+x*(N=1-I)+2*g)+N*(x*I+v*N+2*y)+p;var V=1-I-N;for(h=0;h<i.length;++h)u[h]=V*r[h]+I*n[h]+N*a[h];return M<0?0:M}},1116:function(d,s,t){d.exports=t(6093)},7584:function(d,s,t){var o=t(1539);d.exports=function(r,n){for(var a=r.length,i=new Array(a),u=0;u<a;++u)i[u]=o(r[u],n[u]);return i}},2826:function(d,s,t){d.exports=function(r){for(var n=new Array(r.length),a=0;a<r.length;++a)n[a]=o(r[a]);return n};var o=t(5125)},4469:function(d,s,t){var o=t(5125),r=t(3962);d.exports=function(n,a){for(var i=o(a),u=n.length,h=new Array(u),f=0;f<u;++f)h[f]=r(n[f],i);return h}},6695:function(d,s,t){var o=t(4354);d.exports=function(r,n){for(var a=r.length,i=new Array(a),u=0;u<a;++u)i[u]=o(r[u],n[u]);return i}},7037:function(d,s,t){var o=t(9209),r=t(1284),n=t(9887);d.exports=function(a){a.sort(r);for(var i=a.length,u=0,h=0;h<i;++h){var f=a[h],x=n(f);if(x!==0){if(u>0){var v=a[u-1];if(o(f,v)===0&&n(v)!==x){u-=1;continue}}a[u++]=f}}return a.length=u,a}},6184:function(d){var s,t="";d.exports=function(o,r){if(typeof o!="string")throw new TypeError("expected a string");if(r===1)return o;if(r===2)return o+o;var n=o.length*r;if(s!==o||s===void 0)s=o,t="";else if(t.length>=n)return t.substr(0,n);for(;n>t.length&&r>1;)1&r&&(t+=o),r>>=1,o+=o;return t=(t+=o).substr(0,n)}},8161:function(d,s,t){d.exports=t.g.performance&&t.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},402:function(d){d.exports=function(s){for(var t=s.length,o=s[s.length-1],r=t,n=t-2;n>=0;--n){var a=o,i=s[n];(h=i-((o=a+i)-a))&&(s[--r]=o,o=h)}var u=0;for(n=r;n<t;++n){var h;(h=(i=o)-((o=(a=s[n])+i)-a))&&(s[u++]=h)}return s[u++]=o,s.length=u,s}},8167:function(d,s,t){var o=t(9660),r=t(9662),n=t(8289),a=t(402);function i(y,p,m,w){return function(c){return w(y(m(c[0][0],c[1][1]),m(-c[0][1],c[1][0])))}}function u(y,p,m,w){return function(c){return w(y(p(y(m(c[1][1],c[2][2]),m(-c[1][2],c[2][1])),c[0][0]),y(p(y(m(c[1][0],c[2][2]),m(-c[1][2],c[2][0])),-c[0][1]),p(y(m(c[1][0],c[2][1]),m(-c[1][1],c[2][0])),c[0][2]))))}}function h(y,p,m,w){return function(c){return w(y(y(p(y(p(y(m(c[2][2],c[3][3]),m(-c[2][3],c[3][2])),c[1][1]),y(p(y(m(c[2][1],c[3][3]),m(-c[2][3],c[3][1])),-c[1][2]),p(y(m(c[2][1],c[3][2]),m(-c[2][2],c[3][1])),c[1][3]))),c[0][0]),p(y(p(y(m(c[2][2],c[3][3]),m(-c[2][3],c[3][2])),c[1][0]),y(p(y(m(c[2][0],c[3][3]),m(-c[2][3],c[3][0])),-c[1][2]),p(y(m(c[2][0],c[3][2]),m(-c[2][2],c[3][0])),c[1][3]))),-c[0][1])),y(p(y(p(y(m(c[2][1],c[3][3]),m(-c[2][3],c[3][1])),c[1][0]),y(p(y(m(c[2][0],c[3][3]),m(-c[2][3],c[3][0])),-c[1][1]),p(y(m(c[2][0],c[3][1]),m(-c[2][1],c[3][0])),c[1][3]))),c[0][2]),p(y(p(y(m(c[2][1],c[3][2]),m(-c[2][2],c[3][1])),c[1][0]),y(p(y(m(c[2][0],c[3][2]),m(-c[2][2],c[3][0])),-c[1][1]),p(y(m(c[2][0],c[3][1]),m(-c[2][1],c[3][0])),c[1][2]))),-c[0][3]))))}}function f(y,p,m,w){return function(c){return w(y(y(p(y(y(p(y(p(y(m(c[3][3],c[4][4]),m(-c[3][4],c[4][3])),c[2][2]),y(p(y(m(c[3][2],c[4][4]),m(-c[3][4],c[4][2])),-c[2][3]),p(y(m(c[3][2],c[4][3]),m(-c[3][3],c[4][2])),c[2][4]))),c[1][1]),p(y(p(y(m(c[3][3],c[4][4]),m(-c[3][4],c[4][3])),c[2][1]),y(p(y(m(c[3][1],c[4][4]),m(-c[3][4],c[4][1])),-c[2][3]),p(y(m(c[3][1],c[4][3]),m(-c[3][3],c[4][1])),c[2][4]))),-c[1][2])),y(p(y(p(y(m(c[3][2],c[4][4]),m(-c[3][4],c[4][2])),c[2][1]),y(p(y(m(c[3][1],c[4][4]),m(-c[3][4],c[4][1])),-c[2][2]),p(y(m(c[3][1],c[4][2]),m(-c[3][2],c[4][1])),c[2][4]))),c[1][3]),p(y(p(y(m(c[3][2],c[4][3]),m(-c[3][3],c[4][2])),c[2][1]),y(p(y(m(c[3][1],c[4][3]),m(-c[3][3],c[4][1])),-c[2][2]),p(y(m(c[3][1],c[4][2]),m(-c[3][2],c[4][1])),c[2][3]))),-c[1][4]))),c[0][0]),p(y(y(p(y(p(y(m(c[3][3],c[4][4]),m(-c[3][4],c[4][3])),c[2][2]),y(p(y(m(c[3][2],c[4][4]),m(-c[3][4],c[4][2])),-c[2][3]),p(y(m(c[3][2],c[4][3]),m(-c[3][3],c[4][2])),c[2][4]))),c[1][0]),p(y(p(y(m(c[3][3],c[4][4]),m(-c[3][4],c[4][3])),c[2][0]),y(p(y(m(c[3][0],c[4][4]),m(-c[3][4],c[4][0])),-c[2][3]),p(y(m(c[3][0],c[4][3]),m(-c[3][3],c[4][0])),c[2][4]))),-c[1][2])),y(p(y(p(y(m(c[3][2],c[4][4]),m(-c[3][4],c[4][2])),c[2][0]),y(p(y(m(c[3][0],c[4][4]),m(-c[3][4],c[4][0])),-c[2][2]),p(y(m(c[3][0],c[4][2]),m(-c[3][2],c[4][0])),c[2][4]))),c[1][3]),p(y(p(y(m(c[3][2],c[4][3]),m(-c[3][3],c[4][2])),c[2][0]),y(p(y(m(c[3][0],c[4][3]),m(-c[3][3],c[4][0])),-c[2][2]),p(y(m(c[3][0],c[4][2]),m(-c[3][2],c[4][0])),c[2][3]))),-c[1][4]))),-c[0][1])),y(p(y(y(p(y(p(y(m(c[3][3],c[4][4]),m(-c[3][4],c[4][3])),c[2][1]),y(p(y(m(c[3][1],c[4][4]),m(-c[3][4],c[4][1])),-c[2][3]),p(y(m(c[3][1],c[4][3]),m(-c[3][3],c[4][1])),c[2][4]))),c[1][0]),p(y(p(y(m(c[3][3],c[4][4]),m(-c[3][4],c[4][3])),c[2][0]),y(p(y(m(c[3][0],c[4][4]),m(-c[3][4],c[4][0])),-c[2][3]),p(y(m(c[3][0],c[4][3]),m(-c[3][3],c[4][0])),c[2][4]))),-c[1][1])),y(p(y(p(y(m(c[3][1],c[4][4]),m(-c[3][4],c[4][1])),c[2][0]),y(p(y(m(c[3][0],c[4][4]),m(-c[3][4],c[4][0])),-c[2][1]),p(y(m(c[3][0],c[4][1]),m(-c[3][1],c[4][0])),c[2][4]))),c[1][3]),p(y(p(y(m(c[3][1],c[4][3]),m(-c[3][3],c[4][1])),c[2][0]),y(p(y(m(c[3][0],c[4][3]),m(-c[3][3],c[4][0])),-c[2][1]),p(y(m(c[3][0],c[4][1]),m(-c[3][1],c[4][0])),c[2][3]))),-c[1][4]))),c[0][2]),y(p(y(y(p(y(p(y(m(c[3][2],c[4][4]),m(-c[3][4],c[4][2])),c[2][1]),y(p(y(m(c[3][1],c[4][4]),m(-c[3][4],c[4][1])),-c[2][2]),p(y(m(c[3][1],c[4][2]),m(-c[3][2],c[4][1])),c[2][4]))),c[1][0]),p(y(p(y(m(c[3][2],c[4][4]),m(-c[3][4],c[4][2])),c[2][0]),y(p(y(m(c[3][0],c[4][4]),m(-c[3][4],c[4][0])),-c[2][2]),p(y(m(c[3][0],c[4][2]),m(-c[3][2],c[4][0])),c[2][4]))),-c[1][1])),y(p(y(p(y(m(c[3][1],c[4][4]),m(-c[3][4],c[4][1])),c[2][0]),y(p(y(m(c[3][0],c[4][4]),m(-c[3][4],c[4][0])),-c[2][1]),p(y(m(c[3][0],c[4][1]),m(-c[3][1],c[4][0])),c[2][4]))),c[1][2]),p(y(p(y(m(c[3][1],c[4][2]),m(-c[3][2],c[4][1])),c[2][0]),y(p(y(m(c[3][0],c[4][2]),m(-c[3][2],c[4][0])),-c[2][1]),p(y(m(c[3][0],c[4][1]),m(-c[3][1],c[4][0])),c[2][2]))),-c[1][4]))),-c[0][3]),p(y(y(p(y(p(y(m(c[3][2],c[4][3]),m(-c[3][3],c[4][2])),c[2][1]),y(p(y(m(c[3][1],c[4][3]),m(-c[3][3],c[4][1])),-c[2][2]),p(y(m(c[3][1],c[4][2]),m(-c[3][2],c[4][1])),c[2][3]))),c[1][0]),p(y(p(y(m(c[3][2],c[4][3]),m(-c[3][3],c[4][2])),c[2][0]),y(p(y(m(c[3][0],c[4][3]),m(-c[3][3],c[4][0])),-c[2][2]),p(y(m(c[3][0],c[4][2]),m(-c[3][2],c[4][0])),c[2][3]))),-c[1][1])),y(p(y(p(y(m(c[3][1],c[4][3]),m(-c[3][3],c[4][1])),c[2][0]),y(p(y(m(c[3][0],c[4][3]),m(-c[3][3],c[4][0])),-c[2][1]),p(y(m(c[3][0],c[4][1]),m(-c[3][1],c[4][0])),c[2][3]))),c[1][2]),p(y(p(y(m(c[3][1],c[4][2]),m(-c[3][2],c[4][1])),c[2][0]),y(p(y(m(c[3][0],c[4][2]),m(-c[3][2],c[4][0])),-c[2][1]),p(y(m(c[3][0],c[4][1]),m(-c[3][1],c[4][0])),c[2][2]))),-c[1][3]))),c[0][4])))))}}function x(y){return(y===2?i:y===3?u:y===4?h:y===5?f:void 0)(r,n,o,a)}var v=[function(){return[0]},function(y){return[y[0][0]]}];function g(y,p,m,w,c,M,_,E){return function(L){switch(L.length){case 0:return y(L);case 1:return p(L);case 2:return m(L);case 3:return w(L);case 4:return c(L);case 5:return M(L)}var C=_[L.length];return C||(C=_[L.length]=E(L.length)),C(L)}}(function(){for(;v.length<6;)v.push(x(v.length));d.exports=g.apply(void 0,v.concat([v,x]));for(var y=0;y<v.length;++y)d.exports[y]=v[y]})()},9130:function(d,s,t){var o=t(9660),r=t(9662);d.exports=function(n,a){for(var i=o(n[0],a[0]),u=1;u<n.length;++u)i=r(i,o(n[u],a[u]));return i}},2227:function(d,s,t){var o=t(9660),r=t(9662),n=t(4078),a=t(8289);function i(p){return(p===3?u:p===4?h:p===5?f:x)(r,n,o,a)}function u(p,m,w,c){return function(M,_,E){var L=w(M[0],M[0]),C=c(L,_[0]),O=c(L,E[0]),I=w(_[0],_[0]),N=c(I,M[0]),R=c(I,E[0]),V=w(E[0],E[0]),F=c(V,M[0]),D=c(V,_[0]),U=p(m(D,R),m(N,C)),j=m(F,O),J=m(U,j);return J[J.length-1]}}function h(p,m,w,c){return function(M,_,E,L){var C=p(w(M[0],M[0]),w(M[1],M[1])),O=c(C,_[0]),I=c(C,E[0]),N=c(C,L[0]),R=p(w(_[0],_[0]),w(_[1],_[1])),V=c(R,M[0]),F=c(R,E[0]),D=c(R,L[0]),U=p(w(E[0],E[0]),w(E[1],E[1])),j=c(U,M[0]),J=c(U,_[0]),X=c(U,L[0]),Z=p(w(L[0],L[0]),w(L[1],L[1])),Y=c(Z,M[0]),W=c(Z,_[0]),Q=c(Z,E[0]),ne=p(p(c(m(Q,X),_[1]),p(c(m(W,D),-E[1]),c(m(J,F),L[1]))),p(c(m(W,D),M[1]),p(c(m(Y,N),-_[1]),c(m(V,O),L[1])))),re=p(p(c(m(Q,X),M[1]),p(c(m(Y,N),-E[1]),c(m(j,I),L[1]))),p(c(m(J,F),M[1]),p(c(m(j,I),-_[1]),c(m(V,O),E[1])))),ie=m(ne,re);return ie[ie.length-1]}}function f(p,m,w,c){return function(M,_,E,L,C){var O=p(w(M[0],M[0]),p(w(M[1],M[1]),w(M[2],M[2]))),I=c(O,_[0]),N=c(O,E[0]),R=c(O,L[0]),V=c(O,C[0]),F=p(w(_[0],_[0]),p(w(_[1],_[1]),w(_[2],_[2]))),D=c(F,M[0]),U=c(F,E[0]),j=c(F,L[0]),J=c(F,C[0]),X=p(w(E[0],E[0]),p(w(E[1],E[1]),w(E[2],E[2]))),Z=c(X,M[0]),Y=c(X,_[0]),W=c(X,L[0]),Q=c(X,C[0]),ne=p(w(L[0],L[0]),p(w(L[1],L[1]),w(L[2],L[2]))),re=c(ne,M[0]),ie=c(ne,_[0]),se=c(ne,E[0]),ge=c(ne,C[0]),ue=p(w(C[0],C[0]),p(w(C[1],C[1]),w(C[2],C[2]))),ce=c(ue,M[0]),le=c(ue,_[0]),de=c(ue,E[0]),Ce=c(ue,L[0]),xe=p(p(p(c(p(c(m(Ce,ge),E[1]),p(c(m(de,Q),-L[1]),c(m(se,W),C[1]))),_[2]),p(c(p(c(m(Ce,ge),_[1]),p(c(m(le,J),-L[1]),c(m(ie,j),C[1]))),-E[2]),c(p(c(m(de,Q),_[1]),p(c(m(le,J),-E[1]),c(m(Y,U),C[1]))),L[2]))),p(c(p(c(m(se,W),_[1]),p(c(m(ie,j),-E[1]),c(m(Y,U),L[1]))),-C[2]),p(c(p(c(m(Ce,ge),_[1]),p(c(m(le,J),-L[1]),c(m(ie,j),C[1]))),M[2]),c(p(c(m(Ce,ge),M[1]),p(c(m(ce,V),-L[1]),c(m(re,R),C[1]))),-_[2])))),p(p(c(p(c(m(le,J),M[1]),p(c(m(ce,V),-_[1]),c(m(D,I),C[1]))),L[2]),p(c(p(c(m(ie,j),M[1]),p(c(m(re,R),-_[1]),c(m(D,I),L[1]))),-C[2]),c(p(c(m(se,W),_[1]),p(c(m(ie,j),-E[1]),c(m(Y,U),L[1]))),M[2]))),p(c(p(c(m(se,W),M[1]),p(c(m(re,R),-E[1]),c(m(Z,N),L[1]))),-_[2]),p(c(p(c(m(ie,j),M[1]),p(c(m(re,R),-_[1]),c(m(D,I),L[1]))),E[2]),c(p(c(m(Y,U),M[1]),p(c(m(Z,N),-_[1]),c(m(D,I),E[1]))),-L[2]))))),_e=p(p(p(c(p(c(m(Ce,ge),E[1]),p(c(m(de,Q),-L[1]),c(m(se,W),C[1]))),M[2]),c(p(c(m(Ce,ge),M[1]),p(c(m(ce,V),-L[1]),c(m(re,R),C[1]))),-E[2])),p(c(p(c(m(de,Q),M[1]),p(c(m(ce,V),-E[1]),c(m(Z,N),C[1]))),L[2]),c(p(c(m(se,W),M[1]),p(c(m(re,R),-E[1]),c(m(Z,N),L[1]))),-C[2]))),p(p(c(p(c(m(de,Q),_[1]),p(c(m(le,J),-E[1]),c(m(Y,U),C[1]))),M[2]),c(p(c(m(de,Q),M[1]),p(c(m(ce,V),-E[1]),c(m(Z,N),C[1]))),-_[2])),p(c(p(c(m(le,J),M[1]),p(c(m(ce,V),-_[1]),c(m(D,I),C[1]))),E[2]),c(p(c(m(Y,U),M[1]),p(c(m(Z,N),-_[1]),c(m(D,I),E[1]))),-C[2])))),we=m(xe,_e);return we[we.length-1]}}function x(p,m,w,c){return function(M,_,E,L,C,O){var I=p(p(w(M[0],M[0]),w(M[1],M[1])),p(w(M[2],M[2]),w(M[3],M[3]))),N=c(I,_[0]),R=c(I,E[0]),V=c(I,L[0]),F=c(I,C[0]),D=c(I,O[0]),U=p(p(w(_[0],_[0]),w(_[1],_[1])),p(w(_[2],_[2]),w(_[3],_[3]))),j=c(U,M[0]),J=c(U,E[0]),X=c(U,L[0]),Z=c(U,C[0]),Y=c(U,O[0]),W=p(p(w(E[0],E[0]),w(E[1],E[1])),p(w(E[2],E[2]),w(E[3],E[3]))),Q=c(W,M[0]),ne=c(W,_[0]),re=c(W,L[0]),ie=c(W,C[0]),se=c(W,O[0]),ge=p(p(w(L[0],L[0]),w(L[1],L[1])),p(w(L[2],L[2]),w(L[3],L[3]))),ue=c(ge,M[0]),ce=c(ge,_[0]),le=c(ge,E[0]),de=c(ge,C[0]),Ce=c(ge,O[0]),xe=p(p(w(C[0],C[0]),w(C[1],C[1])),p(w(C[2],C[2]),w(C[3],C[3]))),_e=c(xe,M[0]),we=c(xe,_[0]),Ae=c(xe,E[0]),$=c(xe,L[0]),oe=c(xe,O[0]),pe=p(p(w(O[0],O[0]),w(O[1],O[1])),p(w(O[2],O[2]),w(O[3],O[3]))),ye=c(pe,M[0]),ke=c(pe,_[0]),De=c(pe,E[0]),Pe=c(pe,L[0]),Re=c(pe,C[0]),fe=p(p(p(c(p(p(c(p(c(m(Re,oe),L[1]),p(c(m(Pe,Ce),-C[1]),c(m($,de),O[1]))),E[2]),c(p(c(m(Re,oe),E[1]),p(c(m(De,se),-C[1]),c(m(Ae,ie),O[1]))),-L[2])),p(c(p(c(m(Pe,Ce),E[1]),p(c(m(De,se),-L[1]),c(m(le,re),O[1]))),C[2]),c(p(c(m($,de),E[1]),p(c(m(Ae,ie),-L[1]),c(m(le,re),C[1]))),-O[2]))),_[3]),p(c(p(p(c(p(c(m(Re,oe),L[1]),p(c(m(Pe,Ce),-C[1]),c(m($,de),O[1]))),_[2]),c(p(c(m(Re,oe),_[1]),p(c(m(ke,Y),-C[1]),c(m(we,Z),O[1]))),-L[2])),p(c(p(c(m(Pe,Ce),_[1]),p(c(m(ke,Y),-L[1]),c(m(ce,X),O[1]))),C[2]),c(p(c(m($,de),_[1]),p(c(m(we,Z),-L[1]),c(m(ce,X),C[1]))),-O[2]))),-E[3]),c(p(p(c(p(c(m(Re,oe),E[1]),p(c(m(De,se),-C[1]),c(m(Ae,ie),O[1]))),_[2]),c(p(c(m(Re,oe),_[1]),p(c(m(ke,Y),-C[1]),c(m(we,Z),O[1]))),-E[2])),p(c(p(c(m(De,se),_[1]),p(c(m(ke,Y),-E[1]),c(m(ne,J),O[1]))),C[2]),c(p(c(m(Ae,ie),_[1]),p(c(m(we,Z),-E[1]),c(m(ne,J),C[1]))),-O[2]))),L[3]))),p(p(c(p(p(c(p(c(m(Pe,Ce),E[1]),p(c(m(De,se),-L[1]),c(m(le,re),O[1]))),_[2]),c(p(c(m(Pe,Ce),_[1]),p(c(m(ke,Y),-L[1]),c(m(ce,X),O[1]))),-E[2])),p(c(p(c(m(De,se),_[1]),p(c(m(ke,Y),-E[1]),c(m(ne,J),O[1]))),L[2]),c(p(c(m(le,re),_[1]),p(c(m(ce,X),-E[1]),c(m(ne,J),L[1]))),-O[2]))),-C[3]),c(p(p(c(p(c(m($,de),E[1]),p(c(m(Ae,ie),-L[1]),c(m(le,re),C[1]))),_[2]),c(p(c(m($,de),_[1]),p(c(m(we,Z),-L[1]),c(m(ce,X),C[1]))),-E[2])),p(c(p(c(m(Ae,ie),_[1]),p(c(m(we,Z),-E[1]),c(m(ne,J),C[1]))),L[2]),c(p(c(m(le,re),_[1]),p(c(m(ce,X),-E[1]),c(m(ne,J),L[1]))),-C[2]))),O[3])),p(c(p(p(c(p(c(m(Re,oe),L[1]),p(c(m(Pe,Ce),-C[1]),c(m($,de),O[1]))),_[2]),c(p(c(m(Re,oe),_[1]),p(c(m(ke,Y),-C[1]),c(m(we,Z),O[1]))),-L[2])),p(c(p(c(m(Pe,Ce),_[1]),p(c(m(ke,Y),-L[1]),c(m(ce,X),O[1]))),C[2]),c(p(c(m($,de),_[1]),p(c(m(we,Z),-L[1]),c(m(ce,X),C[1]))),-O[2]))),M[3]),c(p(p(c(p(c(m(Re,oe),L[1]),p(c(m(Pe,Ce),-C[1]),c(m($,de),O[1]))),M[2]),c(p(c(m(Re,oe),M[1]),p(c(m(ye,D),-C[1]),c(m(_e,F),O[1]))),-L[2])),p(c(p(c(m(Pe,Ce),M[1]),p(c(m(ye,D),-L[1]),c(m(ue,V),O[1]))),C[2]),c(p(c(m($,de),M[1]),p(c(m(_e,F),-L[1]),c(m(ue,V),C[1]))),-O[2]))),-_[3])))),p(p(p(c(p(p(c(p(c(m(Re,oe),_[1]),p(c(m(ke,Y),-C[1]),c(m(we,Z),O[1]))),M[2]),c(p(c(m(Re,oe),M[1]),p(c(m(ye,D),-C[1]),c(m(_e,F),O[1]))),-_[2])),p(c(p(c(m(ke,Y),M[1]),p(c(m(ye,D),-_[1]),c(m(j,N),O[1]))),C[2]),c(p(c(m(we,Z),M[1]),p(c(m(_e,F),-_[1]),c(m(j,N),C[1]))),-O[2]))),L[3]),c(p(p(c(p(c(m(Pe,Ce),_[1]),p(c(m(ke,Y),-L[1]),c(m(ce,X),O[1]))),M[2]),c(p(c(m(Pe,Ce),M[1]),p(c(m(ye,D),-L[1]),c(m(ue,V),O[1]))),-_[2])),p(c(p(c(m(ke,Y),M[1]),p(c(m(ye,D),-_[1]),c(m(j,N),O[1]))),L[2]),c(p(c(m(ce,X),M[1]),p(c(m(ue,V),-_[1]),c(m(j,N),L[1]))),-O[2]))),-C[3])),p(c(p(p(c(p(c(m($,de),_[1]),p(c(m(we,Z),-L[1]),c(m(ce,X),C[1]))),M[2]),c(p(c(m($,de),M[1]),p(c(m(_e,F),-L[1]),c(m(ue,V),C[1]))),-_[2])),p(c(p(c(m(we,Z),M[1]),p(c(m(_e,F),-_[1]),c(m(j,N),C[1]))),L[2]),c(p(c(m(ce,X),M[1]),p(c(m(ue,V),-_[1]),c(m(j,N),L[1]))),-C[2]))),O[3]),c(p(p(c(p(c(m(Pe,Ce),E[1]),p(c(m(De,se),-L[1]),c(m(le,re),O[1]))),_[2]),c(p(c(m(Pe,Ce),_[1]),p(c(m(ke,Y),-L[1]),c(m(ce,X),O[1]))),-E[2])),p(c(p(c(m(De,se),_[1]),p(c(m(ke,Y),-E[1]),c(m(ne,J),O[1]))),L[2]),c(p(c(m(le,re),_[1]),p(c(m(ce,X),-E[1]),c(m(ne,J),L[1]))),-O[2]))),M[3]))),p(p(c(p(p(c(p(c(m(Pe,Ce),E[1]),p(c(m(De,se),-L[1]),c(m(le,re),O[1]))),M[2]),c(p(c(m(Pe,Ce),M[1]),p(c(m(ye,D),-L[1]),c(m(ue,V),O[1]))),-E[2])),p(c(p(c(m(De,se),M[1]),p(c(m(ye,D),-E[1]),c(m(Q,R),O[1]))),L[2]),c(p(c(m(le,re),M[1]),p(c(m(ue,V),-E[1]),c(m(Q,R),L[1]))),-O[2]))),-_[3]),c(p(p(c(p(c(m(Pe,Ce),_[1]),p(c(m(ke,Y),-L[1]),c(m(ce,X),O[1]))),M[2]),c(p(c(m(Pe,Ce),M[1]),p(c(m(ye,D),-L[1]),c(m(ue,V),O[1]))),-_[2])),p(c(p(c(m(ke,Y),M[1]),p(c(m(ye,D),-_[1]),c(m(j,N),O[1]))),L[2]),c(p(c(m(ce,X),M[1]),p(c(m(ue,V),-_[1]),c(m(j,N),L[1]))),-O[2]))),E[3])),p(c(p(p(c(p(c(m(De,se),_[1]),p(c(m(ke,Y),-E[1]),c(m(ne,J),O[1]))),M[2]),c(p(c(m(De,se),M[1]),p(c(m(ye,D),-E[1]),c(m(Q,R),O[1]))),-_[2])),p(c(p(c(m(ke,Y),M[1]),p(c(m(ye,D),-_[1]),c(m(j,N),O[1]))),E[2]),c(p(c(m(ne,J),M[1]),p(c(m(Q,R),-_[1]),c(m(j,N),E[1]))),-O[2]))),-L[3]),c(p(p(c(p(c(m(le,re),_[1]),p(c(m(ce,X),-E[1]),c(m(ne,J),L[1]))),M[2]),c(p(c(m(le,re),M[1]),p(c(m(ue,V),-E[1]),c(m(Q,R),L[1]))),-_[2])),p(c(p(c(m(ce,X),M[1]),p(c(m(ue,V),-_[1]),c(m(j,N),L[1]))),E[2]),c(p(c(m(ne,J),M[1]),p(c(m(Q,R),-_[1]),c(m(j,N),E[1]))),-L[2]))),O[3]))))),ve=p(p(p(c(p(p(c(p(c(m(Re,oe),L[1]),p(c(m(Pe,Ce),-C[1]),c(m($,de),O[1]))),E[2]),c(p(c(m(Re,oe),E[1]),p(c(m(De,se),-C[1]),c(m(Ae,ie),O[1]))),-L[2])),p(c(p(c(m(Pe,Ce),E[1]),p(c(m(De,se),-L[1]),c(m(le,re),O[1]))),C[2]),c(p(c(m($,de),E[1]),p(c(m(Ae,ie),-L[1]),c(m(le,re),C[1]))),-O[2]))),M[3]),p(c(p(p(c(p(c(m(Re,oe),L[1]),p(c(m(Pe,Ce),-C[1]),c(m($,de),O[1]))),M[2]),c(p(c(m(Re,oe),M[1]),p(c(m(ye,D),-C[1]),c(m(_e,F),O[1]))),-L[2])),p(c(p(c(m(Pe,Ce),M[1]),p(c(m(ye,D),-L[1]),c(m(ue,V),O[1]))),C[2]),c(p(c(m($,de),M[1]),p(c(m(_e,F),-L[1]),c(m(ue,V),C[1]))),-O[2]))),-E[3]),c(p(p(c(p(c(m(Re,oe),E[1]),p(c(m(De,se),-C[1]),c(m(Ae,ie),O[1]))),M[2]),c(p(c(m(Re,oe),M[1]),p(c(m(ye,D),-C[1]),c(m(_e,F),O[1]))),-E[2])),p(c(p(c(m(De,se),M[1]),p(c(m(ye,D),-E[1]),c(m(Q,R),O[1]))),C[2]),c(p(c(m(Ae,ie),M[1]),p(c(m(_e,F),-E[1]),c(m(Q,R),C[1]))),-O[2]))),L[3]))),p(p(c(p(p(c(p(c(m(Pe,Ce),E[1]),p(c(m(De,se),-L[1]),c(m(le,re),O[1]))),M[2]),c(p(c(m(Pe,Ce),M[1]),p(c(m(ye,D),-L[1]),c(m(ue,V),O[1]))),-E[2])),p(c(p(c(m(De,se),M[1]),p(c(m(ye,D),-E[1]),c(m(Q,R),O[1]))),L[2]),c(p(c(m(le,re),M[1]),p(c(m(ue,V),-E[1]),c(m(Q,R),L[1]))),-O[2]))),-C[3]),c(p(p(c(p(c(m($,de),E[1]),p(c(m(Ae,ie),-L[1]),c(m(le,re),C[1]))),M[2]),c(p(c(m($,de),M[1]),p(c(m(_e,F),-L[1]),c(m(ue,V),C[1]))),-E[2])),p(c(p(c(m(Ae,ie),M[1]),p(c(m(_e,F),-E[1]),c(m(Q,R),C[1]))),L[2]),c(p(c(m(le,re),M[1]),p(c(m(ue,V),-E[1]),c(m(Q,R),L[1]))),-C[2]))),O[3])),p(c(p(p(c(p(c(m(Re,oe),E[1]),p(c(m(De,se),-C[1]),c(m(Ae,ie),O[1]))),_[2]),c(p(c(m(Re,oe),_[1]),p(c(m(ke,Y),-C[1]),c(m(we,Z),O[1]))),-E[2])),p(c(p(c(m(De,se),_[1]),p(c(m(ke,Y),-E[1]),c(m(ne,J),O[1]))),C[2]),c(p(c(m(Ae,ie),_[1]),p(c(m(we,Z),-E[1]),c(m(ne,J),C[1]))),-O[2]))),M[3]),c(p(p(c(p(c(m(Re,oe),E[1]),p(c(m(De,se),-C[1]),c(m(Ae,ie),O[1]))),M[2]),c(p(c(m(Re,oe),M[1]),p(c(m(ye,D),-C[1]),c(m(_e,F),O[1]))),-E[2])),p(c(p(c(m(De,se),M[1]),p(c(m(ye,D),-E[1]),c(m(Q,R),O[1]))),C[2]),c(p(c(m(Ae,ie),M[1]),p(c(m(_e,F),-E[1]),c(m(Q,R),C[1]))),-O[2]))),-_[3])))),p(p(p(c(p(p(c(p(c(m(Re,oe),_[1]),p(c(m(ke,Y),-C[1]),c(m(we,Z),O[1]))),M[2]),c(p(c(m(Re,oe),M[1]),p(c(m(ye,D),-C[1]),c(m(_e,F),O[1]))),-_[2])),p(c(p(c(m(ke,Y),M[1]),p(c(m(ye,D),-_[1]),c(m(j,N),O[1]))),C[2]),c(p(c(m(we,Z),M[1]),p(c(m(_e,F),-_[1]),c(m(j,N),C[1]))),-O[2]))),E[3]),c(p(p(c(p(c(m(De,se),_[1]),p(c(m(ke,Y),-E[1]),c(m(ne,J),O[1]))),M[2]),c(p(c(m(De,se),M[1]),p(c(m(ye,D),-E[1]),c(m(Q,R),O[1]))),-_[2])),p(c(p(c(m(ke,Y),M[1]),p(c(m(ye,D),-_[1]),c(m(j,N),O[1]))),E[2]),c(p(c(m(ne,J),M[1]),p(c(m(Q,R),-_[1]),c(m(j,N),E[1]))),-O[2]))),-C[3])),p(c(p(p(c(p(c(m(Ae,ie),_[1]),p(c(m(we,Z),-E[1]),c(m(ne,J),C[1]))),M[2]),c(p(c(m(Ae,ie),M[1]),p(c(m(_e,F),-E[1]),c(m(Q,R),C[1]))),-_[2])),p(c(p(c(m(we,Z),M[1]),p(c(m(_e,F),-_[1]),c(m(j,N),C[1]))),E[2]),c(p(c(m(ne,J),M[1]),p(c(m(Q,R),-_[1]),c(m(j,N),E[1]))),-C[2]))),O[3]),c(p(p(c(p(c(m($,de),E[1]),p(c(m(Ae,ie),-L[1]),c(m(le,re),C[1]))),_[2]),c(p(c(m($,de),_[1]),p(c(m(we,Z),-L[1]),c(m(ce,X),C[1]))),-E[2])),p(c(p(c(m(Ae,ie),_[1]),p(c(m(we,Z),-E[1]),c(m(ne,J),C[1]))),L[2]),c(p(c(m(le,re),_[1]),p(c(m(ce,X),-E[1]),c(m(ne,J),L[1]))),-C[2]))),M[3]))),p(p(c(p(p(c(p(c(m($,de),E[1]),p(c(m(Ae,ie),-L[1]),c(m(le,re),C[1]))),M[2]),c(p(c(m($,de),M[1]),p(c(m(_e,F),-L[1]),c(m(ue,V),C[1]))),-E[2])),p(c(p(c(m(Ae,ie),M[1]),p(c(m(_e,F),-E[1]),c(m(Q,R),C[1]))),L[2]),c(p(c(m(le,re),M[1]),p(c(m(ue,V),-E[1]),c(m(Q,R),L[1]))),-C[2]))),-_[3]),c(p(p(c(p(c(m($,de),_[1]),p(c(m(we,Z),-L[1]),c(m(ce,X),C[1]))),M[2]),c(p(c(m($,de),M[1]),p(c(m(_e,F),-L[1]),c(m(ue,V),C[1]))),-_[2])),p(c(p(c(m(we,Z),M[1]),p(c(m(_e,F),-_[1]),c(m(j,N),C[1]))),L[2]),c(p(c(m(ce,X),M[1]),p(c(m(ue,V),-_[1]),c(m(j,N),L[1]))),-C[2]))),E[3])),p(c(p(p(c(p(c(m(Ae,ie),_[1]),p(c(m(we,Z),-E[1]),c(m(ne,J),C[1]))),M[2]),c(p(c(m(Ae,ie),M[1]),p(c(m(_e,F),-E[1]),c(m(Q,R),C[1]))),-_[2])),p(c(p(c(m(we,Z),M[1]),p(c(m(_e,F),-_[1]),c(m(j,N),C[1]))),E[2]),c(p(c(m(ne,J),M[1]),p(c(m(Q,R),-_[1]),c(m(j,N),E[1]))),-C[2]))),-L[3]),c(p(p(c(p(c(m(le,re),_[1]),p(c(m(ce,X),-E[1]),c(m(ne,J),L[1]))),M[2]),c(p(c(m(le,re),M[1]),p(c(m(ue,V),-E[1]),c(m(Q,R),L[1]))),-_[2])),p(c(p(c(m(ce,X),M[1]),p(c(m(ue,V),-_[1]),c(m(j,N),L[1]))),E[2]),c(p(c(m(ne,J),M[1]),p(c(m(Q,R),-_[1]),c(m(j,N),E[1]))),-L[2]))),C[3]))))),Te=m(fe,ve);return Te[Te.length-1]}}var v=[function(){return 0},function(){return 0},function(){return 0}];function g(p){var m=v[p.length];return m||(m=v[p.length]=i(p.length)),m.apply(void 0,p)}function y(p,m,w,c,M,_,E,L){return function(C,O,I,N,R,V){switch(arguments.length){case 0:case 1:return 0;case 2:return c(C,O);case 3:return M(C,O,I);case 4:return _(C,O,I,N);case 5:return E(C,O,I,N,R);case 6:return L(C,O,I,N,R,V)}for(var F=new Array(arguments.length),D=0;D<arguments.length;++D)F[D]=arguments[D];return p(F)}}(function(){for(;v.length<=6;)v.push(i(v.length));d.exports=y.apply(void 0,[g].concat(v));for(var p=0;p<=6;++p)d.exports[p]=v[p]})()},6606:function(d,s,t){var o=t(8167);function r(v){return(v===2?n:v===3?a:v===4?i:v===5?u:h)(v<6?o[v]:o)}function n(v){return function(g,y){return[v([[+y[0],+g[0][1]],[+y[1],+g[1][1]]]),v([[+g[0][0],+y[0]],[+g[1][0],+y[1]]]),v(g)]}}function a(v){return function(g,y){return[v([[+y[0],+g[0][1],+g[0][2]],[+y[1],+g[1][1],+g[1][2]],[+y[2],+g[2][1],+g[2][2]]]),v([[+g[0][0],+y[0],+g[0][2]],[+g[1][0],+y[1],+g[1][2]],[+g[2][0],+y[2],+g[2][2]]]),v([[+g[0][0],+g[0][1],+y[0]],[+g[1][0],+g[1][1],+y[1]],[+g[2][0],+g[2][1],+y[2]]]),v(g)]}}function i(v){return function(g,y){return[v([[+y[0],+g[0][1],+g[0][2],+g[0][3]],[+y[1],+g[1][1],+g[1][2],+g[1][3]],[+y[2],+g[2][1],+g[2][2],+g[2][3]],[+y[3],+g[3][1],+g[3][2],+g[3][3]]]),v([[+g[0][0],+y[0],+g[0][2],+g[0][3]],[+g[1][0],+y[1],+g[1][2],+g[1][3]],[+g[2][0],+y[2],+g[2][2],+g[2][3]],[+g[3][0],+y[3],+g[3][2],+g[3][3]]]),v([[+g[0][0],+g[0][1],+y[0],+g[0][3]],[+g[1][0],+g[1][1],+y[1],+g[1][3]],[+g[2][0],+g[2][1],+y[2],+g[2][3]],[+g[3][0],+g[3][1],+y[3],+g[3][3]]]),v([[+g[0][0],+g[0][1],+g[0][2],+y[0]],[+g[1][0],+g[1][1],+g[1][2],+y[1]],[+g[2][0],+g[2][1],+g[2][2],+y[2]],[+g[3][0],+g[3][1],+g[3][2],+y[3]]]),v(g)]}}function u(v){return function(g,y){return[v([[+y[0],+g[0][1],+g[0][2],+g[0][3],+g[0][4]],[+y[1],+g[1][1],+g[1][2],+g[1][3],+g[1][4]],[+y[2],+g[2][1],+g[2][2],+g[2][3],+g[2][4]],[+y[3],+g[3][1],+g[3][2],+g[3][3],+g[3][4]],[+y[4],+g[4][1],+g[4][2],+g[4][3],+g[4][4]]]),v([[+g[0][0],+y[0],+g[0][2],+g[0][3],+g[0][4]],[+g[1][0],+y[1],+g[1][2],+g[1][3],+g[1][4]],[+g[2][0],+y[2],+g[2][2],+g[2][3],+g[2][4]],[+g[3][0],+y[3],+g[3][2],+g[3][3],+g[3][4]],[+g[4][0],+y[4],+g[4][2],+g[4][3],+g[4][4]]]),v([[+g[0][0],+g[0][1],+y[0],+g[0][3],+g[0][4]],[+g[1][0],+g[1][1],+y[1],+g[1][3],+g[1][4]],[+g[2][0],+g[2][1],+y[2],+g[2][3],+g[2][4]],[+g[3][0],+g[3][1],+y[3],+g[3][3],+g[3][4]],[+g[4][0],+g[4][1],+y[4],+g[4][3],+g[4][4]]]),v([[+g[0][0],+g[0][1],+g[0][2],+y[0],+g[0][4]],[+g[1][0],+g[1][1],+g[1][2],+y[1],+g[1][4]],[+g[2][0],+g[2][1],+g[2][2],+y[2],+g[2][4]],[+g[3][0],+g[3][1],+g[3][2],+y[3],+g[3][4]],[+g[4][0],+g[4][1],+g[4][2],+y[4],+g[4][4]]]),v([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+y[0]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+y[1]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+y[2]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+y[3]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+y[4]]]),v(g)]}}function h(v){return function(g,y){return[v([[+y[0],+g[0][1],+g[0][2],+g[0][3],+g[0][4],+g[0][5]],[+y[1],+g[1][1],+g[1][2],+g[1][3],+g[1][4],+g[1][5]],[+y[2],+g[2][1],+g[2][2],+g[2][3],+g[2][4],+g[2][5]],[+y[3],+g[3][1],+g[3][2],+g[3][3],+g[3][4],+g[3][5]],[+y[4],+g[4][1],+g[4][2],+g[4][3],+g[4][4],+g[4][5]],[+y[5],+g[5][1],+g[5][2],+g[5][3],+g[5][4],+g[5][5]]]),v([[+g[0][0],+y[0],+g[0][2],+g[0][3],+g[0][4],+g[0][5]],[+g[1][0],+y[1],+g[1][2],+g[1][3],+g[1][4],+g[1][5]],[+g[2][0],+y[2],+g[2][2],+g[2][3],+g[2][4],+g[2][5]],[+g[3][0],+y[3],+g[3][2],+g[3][3],+g[3][4],+g[3][5]],[+g[4][0],+y[4],+g[4][2],+g[4][3],+g[4][4],+g[4][5]],[+g[5][0],+y[5],+g[5][2],+g[5][3],+g[5][4],+g[5][5]]]),v([[+g[0][0],+g[0][1],+y[0],+g[0][3],+g[0][4],+g[0][5]],[+g[1][0],+g[1][1],+y[1],+g[1][3],+g[1][4],+g[1][5]],[+g[2][0],+g[2][1],+y[2],+g[2][3],+g[2][4],+g[2][5]],[+g[3][0],+g[3][1],+y[3],+g[3][3],+g[3][4],+g[3][5]],[+g[4][0],+g[4][1],+y[4],+g[4][3],+g[4][4],+g[4][5]],[+g[5][0],+g[5][1],+y[5],+g[5][3],+g[5][4],+g[5][5]]]),v([[+g[0][0],+g[0][1],+g[0][2],+y[0],+g[0][4],+g[0][5]],[+g[1][0],+g[1][1],+g[1][2],+y[1],+g[1][4],+g[1][5]],[+g[2][0],+g[2][1],+g[2][2],+y[2],+g[2][4],+g[2][5]],[+g[3][0],+g[3][1],+g[3][2],+y[3],+g[3][4],+g[3][5]],[+g[4][0],+g[4][1],+g[4][2],+y[4],+g[4][4],+g[4][5]],[+g[5][0],+g[5][1],+g[5][2],+y[5],+g[5][4],+g[5][5]]]),v([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+y[0],+g[0][5]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+y[1],+g[1][5]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+y[2],+g[2][5]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+y[3],+g[3][5]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+y[4],+g[4][5]],[+g[5][0],+g[5][1],+g[5][2],+g[5][3],+y[5],+g[5][5]]]),v([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+g[0][4],+y[0]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+g[1][4],+y[1]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+g[2][4],+y[2]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+g[3][4],+y[3]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+g[4][4],+y[4]],[+g[5][0],+g[5][1],+g[5][2],+g[5][3],+g[5][4],+y[5]]]),v(g)]}}var f=[function(){return[[0]]},function(v,g){return[[g[0]],[v[0][0]]]}];function x(v,g,y,p,m,w,c,M){return function(_,E){switch(_.length){case 0:return v(_,E);case 1:return g(_,E);case 2:return y(_,E);case 3:return p(_,E);case 4:return m(_,E);case 5:return w(_,E)}var L=c[_.length];return L||(L=c[_.length]=M(_.length)),L(_,E)}}(function(){for(;f.length<6;)f.push(r(f.length));d.exports=x.apply(void 0,f.concat([f,r]));for(var v=0;v<6;++v)d.exports[v]=f[v]})()},417:function(d,s,t){var o=t(9660),r=t(9662),n=t(8289),a=t(4078);function i(m,w,c,M){return function(_,E,L){var C=m(m(w(E[1],L[0]),w(-L[1],E[0])),m(w(_[1],E[0]),w(-E[1],_[0]))),O=m(w(_[1],L[0]),w(-L[1],_[0])),I=M(C,O);return I[I.length-1]}}function u(m,w,c,M){return function(_,E,L,C){var O=m(m(c(m(w(L[1],C[0]),w(-C[1],L[0])),E[2]),m(c(m(w(E[1],C[0]),w(-C[1],E[0])),-L[2]),c(m(w(E[1],L[0]),w(-L[1],E[0])),C[2]))),m(c(m(w(E[1],C[0]),w(-C[1],E[0])),_[2]),m(c(m(w(_[1],C[0]),w(-C[1],_[0])),-E[2]),c(m(w(_[1],E[0]),w(-E[1],_[0])),C[2])))),I=m(m(c(m(w(L[1],C[0]),w(-C[1],L[0])),_[2]),m(c(m(w(_[1],C[0]),w(-C[1],_[0])),-L[2]),c(m(w(_[1],L[0]),w(-L[1],_[0])),C[2]))),m(c(m(w(E[1],L[0]),w(-L[1],E[0])),_[2]),m(c(m(w(_[1],L[0]),w(-L[1],_[0])),-E[2]),c(m(w(_[1],E[0]),w(-E[1],_[0])),L[2])))),N=M(O,I);return N[N.length-1]}}function h(m,w,c,M){return function(_,E,L,C,O){var I=m(m(m(c(m(c(m(w(C[1],O[0]),w(-O[1],C[0])),L[2]),m(c(m(w(L[1],O[0]),w(-O[1],L[0])),-C[2]),c(m(w(L[1],C[0]),w(-C[1],L[0])),O[2]))),E[3]),m(c(m(c(m(w(C[1],O[0]),w(-O[1],C[0])),E[2]),m(c(m(w(E[1],O[0]),w(-O[1],E[0])),-C[2]),c(m(w(E[1],C[0]),w(-C[1],E[0])),O[2]))),-L[3]),c(m(c(m(w(L[1],O[0]),w(-O[1],L[0])),E[2]),m(c(m(w(E[1],O[0]),w(-O[1],E[0])),-L[2]),c(m(w(E[1],L[0]),w(-L[1],E[0])),O[2]))),C[3]))),m(c(m(c(m(w(L[1],C[0]),w(-C[1],L[0])),E[2]),m(c(m(w(E[1],C[0]),w(-C[1],E[0])),-L[2]),c(m(w(E[1],L[0]),w(-L[1],E[0])),C[2]))),-O[3]),m(c(m(c(m(w(C[1],O[0]),w(-O[1],C[0])),E[2]),m(c(m(w(E[1],O[0]),w(-O[1],E[0])),-C[2]),c(m(w(E[1],C[0]),w(-C[1],E[0])),O[2]))),_[3]),c(m(c(m(w(C[1],O[0]),w(-O[1],C[0])),_[2]),m(c(m(w(_[1],O[0]),w(-O[1],_[0])),-C[2]),c(m(w(_[1],C[0]),w(-C[1],_[0])),O[2]))),-E[3])))),m(m(c(m(c(m(w(E[1],O[0]),w(-O[1],E[0])),_[2]),m(c(m(w(_[1],O[0]),w(-O[1],_[0])),-E[2]),c(m(w(_[1],E[0]),w(-E[1],_[0])),O[2]))),C[3]),m(c(m(c(m(w(E[1],C[0]),w(-C[1],E[0])),_[2]),m(c(m(w(_[1],C[0]),w(-C[1],_[0])),-E[2]),c(m(w(_[1],E[0]),w(-E[1],_[0])),C[2]))),-O[3]),c(m(c(m(w(L[1],C[0]),w(-C[1],L[0])),E[2]),m(c(m(w(E[1],C[0]),w(-C[1],E[0])),-L[2]),c(m(w(E[1],L[0]),w(-L[1],E[0])),C[2]))),_[3]))),m(c(m(c(m(w(L[1],C[0]),w(-C[1],L[0])),_[2]),m(c(m(w(_[1],C[0]),w(-C[1],_[0])),-L[2]),c(m(w(_[1],L[0]),w(-L[1],_[0])),C[2]))),-E[3]),m(c(m(c(m(w(E[1],C[0]),w(-C[1],E[0])),_[2]),m(c(m(w(_[1],C[0]),w(-C[1],_[0])),-E[2]),c(m(w(_[1],E[0]),w(-E[1],_[0])),C[2]))),L[3]),c(m(c(m(w(E[1],L[0]),w(-L[1],E[0])),_[2]),m(c(m(w(_[1],L[0]),w(-L[1],_[0])),-E[2]),c(m(w(_[1],E[0]),w(-E[1],_[0])),L[2]))),-C[3]))))),N=m(m(m(c(m(c(m(w(C[1],O[0]),w(-O[1],C[0])),L[2]),m(c(m(w(L[1],O[0]),w(-O[1],L[0])),-C[2]),c(m(w(L[1],C[0]),w(-C[1],L[0])),O[2]))),_[3]),c(m(c(m(w(C[1],O[0]),w(-O[1],C[0])),_[2]),m(c(m(w(_[1],O[0]),w(-O[1],_[0])),-C[2]),c(m(w(_[1],C[0]),w(-C[1],_[0])),O[2]))),-L[3])),m(c(m(c(m(w(L[1],O[0]),w(-O[1],L[0])),_[2]),m(c(m(w(_[1],O[0]),w(-O[1],_[0])),-L[2]),c(m(w(_[1],L[0]),w(-L[1],_[0])),O[2]))),C[3]),c(m(c(m(w(L[1],C[0]),w(-C[1],L[0])),_[2]),m(c(m(w(_[1],C[0]),w(-C[1],_[0])),-L[2]),c(m(w(_[1],L[0]),w(-L[1],_[0])),C[2]))),-O[3]))),m(m(c(m(c(m(w(L[1],O[0]),w(-O[1],L[0])),E[2]),m(c(m(w(E[1],O[0]),w(-O[1],E[0])),-L[2]),c(m(w(E[1],L[0]),w(-L[1],E[0])),O[2]))),_[3]),c(m(c(m(w(L[1],O[0]),w(-O[1],L[0])),_[2]),m(c(m(w(_[1],O[0]),w(-O[1],_[0])),-L[2]),c(m(w(_[1],L[0]),w(-L[1],_[0])),O[2]))),-E[3])),m(c(m(c(m(w(E[1],O[0]),w(-O[1],E[0])),_[2]),m(c(m(w(_[1],O[0]),w(-O[1],_[0])),-E[2]),c(m(w(_[1],E[0]),w(-E[1],_[0])),O[2]))),L[3]),c(m(c(m(w(E[1],L[0]),w(-L[1],E[0])),_[2]),m(c(m(w(_[1],L[0]),w(-L[1],_[0])),-E[2]),c(m(w(_[1],E[0]),w(-E[1],_[0])),L[2]))),-O[3])))),R=M(I,N);return R[R.length-1]}}function f(m){return(m===3?i:m===4?u:h)(r,o,n,a)}var x=f(3),v=f(4),g=[function(){return 0},function(){return 0},function(m,w){return w[0]-m[0]},function(m,w,c){var M,_=(m[1]-c[1])*(w[0]-c[0]),E=(m[0]-c[0])*(w[1]-c[1]),L=_-E;if(_>0){if(E<=0)return L;M=_+E}else{if(!(_<0)||E>=0)return L;M=-(_+E)}var C=33306690738754716e-32*M;return L>=C||L<=-C?L:x(m,w,c)},function(m,w,c,M){var _=m[0]-M[0],E=w[0]-M[0],L=c[0]-M[0],C=m[1]-M[1],O=w[1]-M[1],I=c[1]-M[1],N=m[2]-M[2],R=w[2]-M[2],V=c[2]-M[2],F=E*I,D=L*O,U=L*C,j=_*I,J=_*O,X=E*C,Z=N*(F-D)+R*(U-j)+V*(J-X),Y=7771561172376103e-31*((Math.abs(F)+Math.abs(D))*Math.abs(N)+(Math.abs(U)+Math.abs(j))*Math.abs(R)+(Math.abs(J)+Math.abs(X))*Math.abs(V));return Z>Y||-Z>Y?Z:v(m,w,c,M)}];function y(m){var w=g[m.length];return w||(w=g[m.length]=f(m.length)),w.apply(void 0,m)}function p(m,w,c,M,_,E,L){return function(C,O,I,N,R){switch(arguments.length){case 0:case 1:return 0;case 2:return M(C,O);case 3:return _(C,O,I);case 4:return E(C,O,I,N);case 5:return L(C,O,I,N,R)}for(var V=new Array(arguments.length),F=0;F<arguments.length;++F)V[F]=arguments[F];return m(V)}}(function(){for(;g.length<=5;)g.push(f(g.length));d.exports=p.apply(void 0,[y].concat(g));for(var m=0;m<=5;++m)d.exports[m]=g[m]})()},2019:function(d,s,t){var o=t(9662),r=t(8289);d.exports=function(n,a){if(n.length===1)return r(a,n[0]);if(a.length===1)return r(n,a[0]);if(n.length===0||a.length===0)return[0];var i=[0];if(n.length<a.length)for(var u=0;u<n.length;++u)i=o(i,r(a,n[u]));else for(u=0;u<a.length;++u)i=o(i,r(n,a[u]));return i}},8289:function(d,s,t){var o=t(9660),r=t(87);d.exports=function(n,a){var i=n.length;if(i===1){var u=o(n[0],a);return u[0]?u:[u[1]]}var h=new Array(2*i),f=[.1,.1],x=[.1,.1],v=0;o(n[0],a,f),f[0]&&(h[v++]=f[0]);for(var g=1;g<i;++g){o(n[g],a,x);var y=f[1];r(y,x[0],f),f[0]&&(h[v++]=f[0]);var p=x[1],m=f[1],w=p+m,c=m-(w-p);f[1]=w,c&&(h[v++]=c)}return f[1]&&(h[v++]=f[1]),v===0&&(h[v++]=0),h.length=v,h}},4434:function(d,s,t){d.exports=function(r,n,a,i){var u=o(r,a,i),h=o(n,a,i);if(u>0&&h>0||u<0&&h<0)return!1;var f=o(a,r,n),x=o(i,r,n);return!(f>0&&x>0||f<0&&x<0)&&(u!==0||h!==0||f!==0||x!==0||function(v,g,y,p){for(var m=0;m<2;++m){var w=v[m],c=g[m],M=Math.min(w,c),_=Math.max(w,c),E=y[m],L=p[m],C=Math.min(E,L);if(Math.max(E,L)<M||_<C)return!1}return!0}(r,n,a,i))};var o=t(417)[3]},4078:function(d){d.exports=function(s,t){var o=0|s.length,r=0|t.length;if(o===1&&r===1)return function(C,O){var I=C+O,N=I-C,R=C-(I-N)+(O-N);return R?[R,I]:[I]}(s[0],-t[0]);var n,a,i=new Array(o+r),u=0,h=0,f=0,x=Math.abs,v=s[h],g=x(v),y=-t[f],p=x(y);g<p?(a=v,(h+=1)<o&&(g=x(v=s[h]))):(a=y,(f+=1)<r&&(p=x(y=-t[f]))),h<o&&g<p||f>=r?(n=v,(h+=1)<o&&(g=x(v=s[h]))):(n=y,(f+=1)<r&&(p=x(y=-t[f])));for(var m,w,c=n+a,M=c-n,_=a-M,E=_,L=c;h<o&&f<r;)g<p?(n=v,(h+=1)<o&&(g=x(v=s[h]))):(n=y,(f+=1)<r&&(p=x(y=-t[f]))),(_=(a=E)-(M=(c=n+a)-n))&&(i[u++]=_),E=L-((m=L+c)-(w=m-L))+(c-w),L=m;for(;h<o;)(_=(a=E)-(M=(c=(n=v)+a)-n))&&(i[u++]=_),E=L-((m=L+c)-(w=m-L))+(c-w),L=m,(h+=1)<o&&(v=s[h]);for(;f<r;)(_=(a=E)-(M=(c=(n=y)+a)-n))&&(i[u++]=_),E=L-((m=L+c)-(w=m-L))+(c-w),L=m,(f+=1)<r&&(y=-t[f]);return E&&(i[u++]=E),L&&(i[u++]=L),u||(i[u++]=0),i.length=u,i}},9662:function(d){d.exports=function(s,t){var o=0|s.length,r=0|t.length;if(o===1&&r===1)return function(C,O){var I=C+O,N=I-C,R=C-(I-N)+(O-N);return R?[R,I]:[I]}(s[0],t[0]);var n,a,i=new Array(o+r),u=0,h=0,f=0,x=Math.abs,v=s[h],g=x(v),y=t[f],p=x(y);g<p?(a=v,(h+=1)<o&&(g=x(v=s[h]))):(a=y,(f+=1)<r&&(p=x(y=t[f]))),h<o&&g<p||f>=r?(n=v,(h+=1)<o&&(g=x(v=s[h]))):(n=y,(f+=1)<r&&(p=x(y=t[f])));for(var m,w,c=n+a,M=c-n,_=a-M,E=_,L=c;h<o&&f<r;)g<p?(n=v,(h+=1)<o&&(g=x(v=s[h]))):(n=y,(f+=1)<r&&(p=x(y=t[f]))),(_=(a=E)-(M=(c=n+a)-n))&&(i[u++]=_),E=L-((m=L+c)-(w=m-L))+(c-w),L=m;for(;h<o;)(_=(a=E)-(M=(c=(n=v)+a)-n))&&(i[u++]=_),E=L-((m=L+c)-(w=m-L))+(c-w),L=m,(h+=1)<o&&(v=s[h]);for(;f<r;)(_=(a=E)-(M=(c=(n=y)+a)-n))&&(i[u++]=_),E=L-((m=L+c)-(w=m-L))+(c-w),L=m,(f+=1)<r&&(y=t[f]);return E&&(i[u++]=E),L&&(i[u++]=L),u||(i[u++]=0),i.length=u,i}},8691:function(d,s,t){d.exports=function(n){return r(o(n))};var o=t(2692),r=t(7037)},7212:function(d,s,t){d.exports=function(i,u,h,f){if(h=h||0,f===void 0&&(f=function(c){for(var M=c.length,_=0,E=0;E<M;++E)_=0|Math.max(_,c[E].length);return _-1}(i)),i.length===0||f<1)return{cells:[],vertexIds:[],vertexWeights:[]};var x=function(c,M){for(var _=c.length,E=r.mallocUint8(_),L=0;L<_;++L)E[L]=c[L]<M|0;return E}(u,+h),v=function(c,M){for(var _=c.length,E=M*(M+1)/2*_|0,L=r.mallocUint32(2*E),C=0,O=0;O<_;++O)for(var I=c[O],N=(M=I.length,0);N<M;++N)for(var R=0;R<N;++R){var V=I[R],F=I[N];L[C++]=0|Math.min(V,F),L[C++]=0|Math.max(V,F)}n(o(L,[C/2|0,2]));var D=2;for(O=2;O<C;O+=2)L[O-2]===L[O]&&L[O-1]===L[O+1]||(L[D++]=L[O],L[D++]=L[O+1]);return o(L,[D/2|0,2])}(i,f),g=function(c,M,_,E){for(var L=c.data,C=c.shape[0],O=r.mallocDouble(C),I=0,N=0;N<C;++N){var R=L[2*N],V=L[2*N+1];if(_[R]!==_[V]){var F=M[R],D=M[V];L[2*I]=R,L[2*I+1]=V,O[I++]=(D-E)/(D-F)}}return c.shape[0]=I,o(O,[I])}(v,u,x,+h),y=function(c,M){var _=r.mallocInt32(2*M),E=c.shape[0],L=c.data;_[0]=0;for(var C=0,O=0;O<E;++O){var I=L[2*O];if(I!==C){for(_[2*C+1]=O;++C<I;)_[2*C]=O,_[2*C+1]=O;_[2*C]=O}}for(_[2*C+1]=E;++C<M;)_[2*C]=_[2*C+1]=E;return _}(v,0|u.length),p=a(f)(i,v.data,y,x),m=function(c){for(var M=0|c.shape[0],_=c.data,E=new Array(M),L=0;L<M;++L)E[L]=[_[2*L],_[2*L+1]];return E}(v),w=[].slice.call(g.data,0,g.shape[0]);return r.free(x),r.free(v.data),r.free(g.data),r.free(y),{cells:p,vertexIds:m,vertexWeights:w}};var o=t(5050),r=t(5306),n=t(8729),a=t(1168)},1168:function(d){d.exports=function(t){return s[t]()};var s=[function(){return function(t,o,r,n){for(var a=t.length,i=0;i<a;++i)t[i].length;return[]}},function(){function t(o,r,n,a){for(var i=0|Math.min(n,a),u=0|Math.max(n,a),h=o[2*i],f=o[2*i+1];h<f;){var x=h+f>>1,v=r[2*x+1];if(v===u)return x;u<v?f=x:h=x+1}return h}return function(o,r,n,a){for(var i=o.length,u=[],h=0;h<i;++h){var f=o[h];if(f.length===2){var x=(a[f[0]]<<0)+(a[f[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:case 3:break;case 1:u.push([t(n,r,f[0],f[1])]);break;case 2:u.push([t(n,r,f[1],f[0])])}}}return u}},function(){function t(o,r,n,a){for(var i=0|Math.min(n,a),u=0|Math.max(n,a),h=o[2*i],f=o[2*i+1];h<f;){var x=h+f>>1,v=r[2*x+1];if(v===u)return x;u<v?f=x:h=x+1}return h}return function(o,r,n,a){for(var i=o.length,u=[],h=0;h<i;++h){var f=o[h],x=f.length;if(x===3){if((v=(a[f[0]]<<0)+(a[f[1]]<<1)+(a[f[2]]<<2))==0||v===7)continue;switch(v){case 0:case 7:break;case 1:u.push([t(n,r,f[0],f[2]),t(n,r,f[0],f[1])]);break;case 2:u.push([t(n,r,f[1],f[0]),t(n,r,f[1],f[2])]);break;case 3:u.push([t(n,r,f[0],f[2]),t(n,r,f[1],f[2])]);break;case 4:u.push([t(n,r,f[2],f[1]),t(n,r,f[2],f[0])]);break;case 5:u.push([t(n,r,f[2],f[1]),t(n,r,f[0],f[1])]);break;case 6:u.push([t(n,r,f[1],f[0]),t(n,r,f[2],f[0])])}}else if(x===2){var v;if((v=(a[f[0]]<<0)+(a[f[1]]<<1))==0||v===3)continue;switch(v){case 0:case 3:break;case 1:u.push([t(n,r,f[0],f[1])]);break;case 2:u.push([t(n,r,f[1],f[0])])}}}return u}},function(){function t(o,r,n,a){for(var i=0|Math.min(n,a),u=0|Math.max(n,a),h=o[2*i],f=o[2*i+1];h<f;){var x=h+f>>1,v=r[2*x+1];if(v===u)return x;u<v?f=x:h=x+1}return h}return function(o,r,n,a){for(var i=o.length,u=[],h=0;h<i;++h){var f=o[h],x=f.length;if(x===4){if((v=(a[f[0]]<<0)+(a[f[1]]<<1)+(a[f[2]]<<2)+(a[f[3]]<<3))==0||v===15)continue;switch(v){case 0:case 15:break;case 1:u.push([t(n,r,f[0],f[1]),t(n,r,f[0],f[2]),t(n,r,f[0],f[3])]);break;case 2:u.push([t(n,r,f[1],f[2]),t(n,r,f[1],f[0]),t(n,r,f[1],f[3])]);break;case 3:u.push([t(n,r,f[1],f[2]),t(n,r,f[0],f[2]),t(n,r,f[0],f[3])],[t(n,r,f[1],f[3]),t(n,r,f[1],f[2]),t(n,r,f[0],f[3])]);break;case 4:u.push([t(n,r,f[2],f[0]),t(n,r,f[2],f[1]),t(n,r,f[2],f[3])]);break;case 5:u.push([t(n,r,f[0],f[1]),t(n,r,f[2],f[1]),t(n,r,f[0],f[3])],[t(n,r,f[2],f[1]),t(n,r,f[2],f[3]),t(n,r,f[0],f[3])]);break;case 6:u.push([t(n,r,f[2],f[0]),t(n,r,f[1],f[0]),t(n,r,f[1],f[3])],[t(n,r,f[2],f[3]),t(n,r,f[2],f[0]),t(n,r,f[1],f[3])]);break;case 7:u.push([t(n,r,f[0],f[3]),t(n,r,f[1],f[3]),t(n,r,f[2],f[3])]);break;case 8:u.push([t(n,r,f[3],f[1]),t(n,r,f[3],f[0]),t(n,r,f[3],f[2])]);break;case 9:u.push([t(n,r,f[3],f[1]),t(n,r,f[0],f[1]),t(n,r,f[0],f[2])],[t(n,r,f[3],f[2]),t(n,r,f[3],f[1]),t(n,r,f[0],f[2])]);break;case 10:u.push([t(n,r,f[1],f[0]),t(n,r,f[3],f[0]),t(n,r,f[1],f[2])],[t(n,r,f[3],f[0]),t(n,r,f[3],f[2]),t(n,r,f[1],f[2])]);break;case 11:u.push([t(n,r,f[1],f[2]),t(n,r,f[0],f[2]),t(n,r,f[3],f[2])]);break;case 12:u.push([t(n,r,f[3],f[0]),t(n,r,f[2],f[0]),t(n,r,f[2],f[1])],[t(n,r,f[3],f[1]),t(n,r,f[3],f[0]),t(n,r,f[2],f[1])]);break;case 13:u.push([t(n,r,f[0],f[1]),t(n,r,f[2],f[1]),t(n,r,f[3],f[1])]);break;case 14:u.push([t(n,r,f[2],f[0]),t(n,r,f[1],f[0]),t(n,r,f[3],f[0])])}}else if(x===3){if((v=(a[f[0]]<<0)+(a[f[1]]<<1)+(a[f[2]]<<2))==0||v===7)continue;switch(v){case 0:case 7:break;case 1:u.push([t(n,r,f[0],f[2]),t(n,r,f[0],f[1])]);break;case 2:u.push([t(n,r,f[1],f[0]),t(n,r,f[1],f[2])]);break;case 3:u.push([t(n,r,f[0],f[2]),t(n,r,f[1],f[2])]);break;case 4:u.push([t(n,r,f[2],f[1]),t(n,r,f[2],f[0])]);break;case 5:u.push([t(n,r,f[2],f[1]),t(n,r,f[0],f[1])]);break;case 6:u.push([t(n,r,f[1],f[0]),t(n,r,f[2],f[0])])}}else if(x===2){var v;if((v=(a[f[0]]<<0)+(a[f[1]]<<1))==0||v===3)continue;switch(v){case 0:case 3:break;case 1:u.push([t(n,r,f[0],f[1])]);break;case 2:u.push([t(n,r,f[1],f[0])])}}}return u}}]},8211:function(d,s,t){t(2288),t(1731),s.H=function(o,r){var n=o.length,a=o.length-r.length,i=Math.min;if(a)return a;switch(n){case 0:return 0;case 1:return o[0]-r[0];case 2:return(f=o[0]+o[1]-r[0]-r[1])||i(o[0],o[1])-i(r[0],r[1]);case 3:var u=o[0]+o[1],h=r[0]+r[1];if(f=u+o[2]-(h+r[2]))return f;var f,x=i(o[0],o[1]),v=i(r[0],r[1]);return(f=i(x,o[2])-i(v,r[2]))||i(x+o[2],u)-i(v+r[2],h);default:var g=o.slice(0);g.sort();var y=r.slice(0);y.sort();for(var p=0;p<n;++p)if(a=g[p]-y[p])return a;return 0}}},9392:function(d,s){function t(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(r){return(r>0)-(r<0)},s.abs=function(r){var n=r>>31;return(r^n)-n},s.min=function(r,n){return n^(r^n)&-(r<n)},s.max=function(r,n){return r^(r^n)&-(r<n)},s.isPow2=function(r){return!(r&r-1||!r)},s.log2=function(r){var n,a;return n=(r>65535)<<4,n|=a=((r>>>=n)>255)<<3,n|=a=((r>>>=a)>15)<<2,(n|=a=((r>>>=a)>3)<<1)|(r>>>=a)>>1},s.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},s.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},s.countTrailingZeros=t,s.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},s.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},s.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var o=new Array(256);(function(r){for(var n=0;n<256;++n){var a=n,i=n,u=7;for(a>>>=1;a;a>>>=1)i<<=1,i|=1&a,--u;r[n]=i<<u&255}})(o),s.reverse=function(r){return o[255&r]<<24|o[r>>>8&255]<<16|o[r>>>16&255]<<8|o[r>>>24&255]},s.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},s.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},s.interleave3=function(r,n,a){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},s.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},s.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>t(r)+1}},6656:function(d,s,t){var o=t(9392),r=t(9521);function n(v,g){var y=v.length,p=v.length-g.length,m=Math.min;if(p)return p;switch(y){case 0:return 0;case 1:return v[0]-g[0];case 2:return(M=v[0]+v[1]-g[0]-g[1])||m(v[0],v[1])-m(g[0],g[1]);case 3:var w=v[0]+v[1],c=g[0]+g[1];if(M=w+v[2]-(c+g[2]))return M;var M,_=m(v[0],v[1]),E=m(g[0],g[1]);return(M=m(_,v[2])-m(E,g[2]))||m(_+v[2],w)-m(E+g[2],c);default:var L=v.slice(0);L.sort();var C=g.slice(0);C.sort();for(var O=0;O<y;++O)if(p=L[O]-C[O])return p;return 0}}function a(v,g){return n(v[0],g[0])}function i(v,g){if(g){for(var y=v.length,p=new Array(y),m=0;m<y;++m)p[m]=[v[m],g[m]];for(p.sort(a),m=0;m<y;++m)v[m]=p[m][0],g[m]=p[m][1];return v}return v.sort(n),v}function u(v){if(v.length===0)return[];for(var g=1,y=v.length,p=1;p<y;++p){var m=v[p];if(n(m,v[p-1])){if(p===g){g++;continue}v[g++]=m}}return v.length=g,v}function h(v,g){for(var y=0,p=v.length-1,m=-1;y<=p;){var w=y+p>>1,c=n(v[w],g);c<=0?(c===0&&(m=w),y=w+1):c>0&&(p=w-1)}return m}function f(v,g){for(var y=new Array(v.length),p=0,m=y.length;p<m;++p)y[p]=[];for(var w=[],c=(p=0,g.length);p<c;++p)for(var M=g[p],_=M.length,E=1,L=1<<_;E<L;++E){w.length=o.popCount(E);for(var C=0,O=0;O<_;++O)E&1<<O&&(w[C++]=M[O]);var I=h(v,w);if(!(I<0))for(;y[I++].push(p),!(I>=v.length||n(v[I],w)!==0););}return y}function x(v,g){if(g<0)return[];for(var y=[],p=(1<<g+1)-1,m=0;m<v.length;++m)for(var w=v[m],c=p;c<1<<w.length;c=o.nextCombination(c)){for(var M=new Array(g+1),_=0,E=0;E<w.length;++E)c&1<<E&&(M[_++]=w[E]);y.push(M)}return i(y)}s.dimension=function(v){for(var g=0,y=Math.max,p=0,m=v.length;p<m;++p)g=y(g,v[p].length);return g-1},s.countVertices=function(v){for(var g=-1,y=Math.max,p=0,m=v.length;p<m;++p)for(var w=v[p],c=0,M=w.length;c<M;++c)g=y(g,w[c]);return g+1},s.cloneCells=function(v){for(var g=new Array(v.length),y=0,p=v.length;y<p;++y)g[y]=v[y].slice(0);return g},s.compareCells=n,s.normalize=i,s.unique=u,s.findCell=h,s.incidence=f,s.dual=function(v,g){if(!g)return f(u(x(v,0)),v);for(var y=new Array(g),p=0;p<g;++p)y[p]=[];p=0;for(var m=v.length;p<m;++p)for(var w=v[p],c=0,M=w.length;c<M;++c)y[w[c]].push(p);return y},s.explode=function(v){for(var g=[],y=0,p=v.length;y<p;++y)for(var m=v[y],w=0|m.length,c=1,M=1<<w;c<M;++c){for(var _=[],E=0;E<w;++E)c>>>E&1&&_.push(m[E]);g.push(_)}return i(g)},s.skeleton=x,s.boundary=function(v){for(var g=[],y=0,p=v.length;y<p;++y)for(var m=v[y],w=0,c=m.length;w<c;++w){for(var M=new Array(m.length-1),_=0,E=0;_<c;++_)_!==w&&(M[E++]=m[_]);g.push(M)}return i(g)},s.connectedComponents=function(v,g){return g?function(y,p){for(var m=new r(p),w=0;w<y.length;++w)for(var c=y[w],M=0;M<c.length;++M)for(var _=M+1;_<c.length;++_)m.link(c[M],c[_]);var E=[],L=m.ranks;for(w=0;w<L.length;++w)L[w]=-1;for(w=0;w<y.length;++w){var C=m.find(y[w][0]);L[C]<0?(L[C]=E.length,E.push([y[w].slice(0)])):E[L[C]].push(y[w].slice(0))}return E}(v,g):function(y){for(var p=u(i(x(y,0))),m=new r(p.length),w=0;w<y.length;++w)for(var c=y[w],M=0;M<c.length;++M)for(var _=h(p,[c[M]]),E=M+1;E<c.length;++E)m.link(_,h(p,[c[E]]));var L=[],C=m.ranks;for(w=0;w<C.length;++w)C[w]=-1;for(w=0;w<y.length;++w){var O=m.find(h(p,[y[w][0]]));C[O]<0?(C[O]=L.length,L.push([y[w].slice(0)])):L[C[O]].push(y[w].slice(0))}return L}(v)}},9521:function(d){function s(t){this.roots=new Array(t),this.ranks=new Array(t);for(var o=0;o<t;++o)this.roots[o]=o,this.ranks[o]=0}d.exports=s,s.prototype.length=function(){return this.roots.length},s.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},s.prototype.find=function(t){for(var o=this.roots;o[t]!==t;){var r=o[t];o[t]=o[r],t=r}return t},s.prototype.link=function(t,o){var r=this.find(t),n=this.find(o);if(r!==n){var a=this.ranks,i=this.roots,u=a[r],h=a[n];u<h?i[r]=n:h<u?i[n]=r:(i[n]=r,++a[r])}}},8243:function(d,s,t){d.exports=function(n,a,i){for(var u=a.length,h=n.length,f=new Array(u),x=new Array(u),v=new Array(u),g=new Array(u),y=0;y<u;++y)f[y]=x[y]=-1,v[y]=1/0,g[y]=!1;for(y=0;y<h;++y){var p=n[y];if(p.length!==2)throw new Error("Input must be a graph");var m=p[1],w=p[0];x[w]!==-1?x[w]=-2:x[w]=m,f[m]!==-1?f[m]=-2:f[m]=w}function c(X){if(g[X])return 1/0;var Z,Y,W,Q=f[X],ne=x[X];return Q<0||ne<0?1/0:(Z=a[X],Y=a[Q],W=a[ne],Math.abs(o(Z,Y,W))/Math.sqrt(Math.pow(Y[0]-W[0],2)+Math.pow(Y[1]-W[1],2)))}function M(X,Z){var Y=R[X],W=R[Z];R[X]=W,R[Z]=Y,V[Y]=Z,V[W]=X}function _(X){return v[R[X]]}function E(X){return 1&X?X-1>>1:(X>>1)-1}function L(X){for(var Z=_(X);;){var Y=Z,W=2*X+1,Q=2*(X+1),ne=X;if(W<F){var re=_(W);re<Y&&(ne=W,Y=re)}if(Q<F&&_(Q)<Y&&(ne=Q),ne===X)return X;M(X,ne),X=ne}}function C(X){for(var Z=_(X);X>0;){var Y=E(X);if(!(Y>=0&&Z<_(Y)))return X;M(X,Y),X=Y}}function O(){if(F>0){var X=R[0];return M(0,F-1),F-=1,L(0),X}return-1}function I(X,Z){var Y=R[X];return v[Y]===Z?X:(v[Y]=-1/0,C(X),O(),v[Y]=Z,C((F+=1)-1))}function N(X){if(!g[X]){g[X]=!0;var Z=f[X],Y=x[X];f[Y]>=0&&(f[Y]=Z),x[Z]>=0&&(x[Z]=Y),V[Z]>=0&&I(V[Z],c(Z)),V[Y]>=0&&I(V[Y],c(Y))}}var R=[],V=new Array(u);for(y=0;y<u;++y)(v[y]=c(y))<1/0?(V[y]=R.length,R.push(y)):V[y]=-1;var F=R.length;for(y=F>>1;y>=0;--y)L(y);for(;;){var D=O();if(D<0||v[D]>i)break;N(D)}var U=[];for(y=0;y<u;++y)g[y]||(V[y]=U.length,U.push(a[y].slice()));function j(X,Z){if(X[Z]<0)return Z;var Y=Z,W=Z;do{var Q=X[W];if(!g[W]||Q<0||Q===W||(Q=X[W=Q],!g[W]||Q<0||Q===W))break;W=Q,Y=X[Y]}while(Y!==W);for(var ne=Z;ne!==W;ne=X[ne])X[ne]=W;return W}U.length;var J=[];return n.forEach(function(X){var Z=j(f,X[0]),Y=j(x,X[1]);if(Z>=0&&Y>=0&&Z!==Y){var W=V[Z],Q=V[Y];W!==Q&&J.push([W,Q])}}),r.unique(r.normalize(J)),{positions:U,edges:J}};var o=t(417),r=t(6656)},6638:function(d,s,t){d.exports=function(n,a){var i,u,h,f;if(a[0][0]<a[1][0])i=a[0],u=a[1];else{if(!(a[0][0]>a[1][0]))return r(a,n);i=a[1],u=a[0]}if(n[0][0]<n[1][0])h=n[0],f=n[1];else{if(!(n[0][0]>n[1][0]))return-r(n,a);h=n[1],f=n[0]}var x=o(i,u,f),v=o(i,u,h);if(x<0){if(v<=0)return x}else if(x>0){if(v>=0)return x}else if(v)return v;if(x=o(f,h,u),v=o(f,h,i),x<0){if(v<=0)return x}else if(x>0){if(v>=0)return x}else if(v)return v;return u[0]-f[0]};var o=t(417);function r(n,a){var i,u,h,f;if(a[0][0]<a[1][0])i=a[0],u=a[1];else{if(!(a[0][0]>a[1][0])){var x=Math.min(n[0][1],n[1][1]),v=Math.max(n[0][1],n[1][1]),g=Math.min(a[0][1],a[1][1]),y=Math.max(a[0][1],a[1][1]);return v<g?v-g:x>y?x-y:v-y}i=a[1],u=a[0]}n[0][1]<n[1][1]?(h=n[0],f=n[1]):(h=n[1],f=n[0]);var p=o(u,i,h);return p||(p=o(u,i,f))||f-u}},4385:function(d,s,t){d.exports=function(v){for(var g=v.length,y=2*g,p=new Array(y),m=0;m<g;++m){var w=v[m],c=w[0][0]<w[1][0];p[2*m]=new x(w[0][0],w,c,m),p[2*m+1]=new x(w[1][0],w,!c,m)}p.sort(function(N,R){var V=N.x-R.x;return V||(V=N.create-R.create)||Math.min(N.segment[0][1],N.segment[1][1])-Math.min(R.segment[0][1],R.segment[1][1])});var M=r(a),_=[],E=[],L=[];for(m=0;m<y;){for(var C=p[m].x,O=[];m<y;){var I=p[m];if(I.x!==C)break;m+=1,I.segment[0][0]===I.x&&I.segment[1][0]===I.x?I.create&&(I.segment[0][1]<I.segment[1][1]?(O.push(new f(I.segment[0][1],I.index,!0,!0)),O.push(new f(I.segment[1][1],I.index,!1,!1))):(O.push(new f(I.segment[1][1],I.index,!0,!1)),O.push(new f(I.segment[0][1],I.index,!1,!0)))):M=I.create?M.insert(I.segment,I.index):M.remove(I.segment)}_.push(M.root),E.push(C),L.push(O)}return new i(_,E,L)};var o=t(5070),r=t(7080),n=t(417),a=t(6638);function i(v,g,y){this.slabs=v,this.coordinates=g,this.horizontal=y}function u(v,g){return v.y-g}function h(v,g){for(var y=null;v;){var p,m,w=v.key;w[0][0]<w[1][0]?(p=w[0],m=w[1]):(p=w[1],m=w[0]);var c=n(p,m,g);if(c<0)v=v.left;else if(c>0)if(g[0]!==w[1][0])y=v,v=v.right;else{if(M=h(v.right,g))return M;v=v.left}else{if(g[0]!==w[1][0])return v;var M;if(M=h(v.right,g))return M;v=v.left}}return y}function f(v,g,y,p){this.y=v,this.index=g,this.start=y,this.closed=p}function x(v,g,y,p){this.x=v,this.segment=g,this.create=y,this.index=p}i.prototype.castUp=function(v){var g=o.le(this.coordinates,v[0]);if(g<0)return-1;this.slabs[g];var y=h(this.slabs[g],v),p=-1;if(y&&(p=y.value),this.coordinates[g]===v[0]){var m=null;if(y&&(m=y.key),g>0){var w=h(this.slabs[g-1],v);w&&(m?a(w.key,m)>0&&(m=w.key,p=w.value):(p=w.value,m=w.key))}var c=this.horizontal[g];if(c.length>0){var M=o.ge(c,v[1],u);if(M<c.length){var _=c[M];if(v[1]===_.y){if(_.closed)return _.index;for(;M<c.length-1&&c[M+1].y===v[1];)if((_=c[M+=1]).closed)return _.index;if(_.y===v[1]&&!_.start){if((M+=1)>=c.length)return p;_=c[M]}}if(_.start)if(m){var E=n(m[0],m[1],[v[0],_.y]);m[0][0]>m[1][0]&&(E=-E),E>0&&(p=_.index)}else p=_.index;else _.y!==v[1]&&(p=_.index)}}}return p}},4670:function(d,s,t){var o=t(9130),r=t(9662);function n(i,u){var h=r(o(i,u),[u[u.length-1]]);return h[h.length-1]}function a(i,u,h,f){var x=-u/(f-u);x<0?x=0:x>1&&(x=1);for(var v=1-x,g=i.length,y=new Array(g),p=0;p<g;++p)y[p]=x*i[p]+v*h[p];return y}d.exports=function(i,u){for(var h=[],f=[],x=n(i[i.length-1],u),v=i[i.length-1],g=i[0],y=0;y<i.length;++y,v=g){var p=n(g=i[y],u);if(x<0&&p>0||x>0&&p<0){var m=a(v,p,g,x);h.push(m),f.push(m.slice())}p<0?f.push(g.slice()):p>0?h.push(g.slice()):(h.push(g.slice()),f.push(g.slice())),x=p}return{positive:h,negative:f}},d.exports.positive=function(i,u){for(var h=[],f=n(i[i.length-1],u),x=i[i.length-1],v=i[0],g=0;g<i.length;++g,x=v){var y=n(v=i[g],u);(f<0&&y>0||f>0&&y<0)&&h.push(a(x,y,v,f)),y>=0&&h.push(v.slice()),f=y}return h},d.exports.negative=function(i,u){for(var h=[],f=n(i[i.length-1],u),x=i[i.length-1],v=i[0],g=0;g<i.length;++g,x=v){var y=n(v=i[g],u);(f<0&&y>0||f>0&&y<0)&&h.push(a(x,y,v,f)),y<=0&&h.push(v.slice()),f=y}return h}},8974:function(d,s,t){var o;(function(){var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(f){return i(h(f),arguments)}function a(f,x){return n.apply(null,[f].concat(x||[]))}function i(f,x){var v,g,y,p,m,w,c,M,_,E=1,L=f.length,C="";for(g=0;g<L;g++)if(typeof f[g]=="string")C+=f[g];else if(typeof f[g]=="object"){if((p=f[g]).keys)for(v=x[E],y=0;y<p.keys.length;y++){if(v==null)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',p.keys[y],p.keys[y-1]));v=v[p.keys[y]]}else v=p.param_no?x[p.param_no]:x[E++];if(r.not_type.test(p.type)&&r.not_primitive.test(p.type)&&v instanceof Function&&(v=v()),r.numeric_arg.test(p.type)&&typeof v!="number"&&isNaN(v))throw new TypeError(n("[sprintf] expecting number but found %T",v));switch(r.number.test(p.type)&&(M=v>=0),p.type){case"b":v=parseInt(v,10).toString(2);break;case"c":v=String.fromCharCode(parseInt(v,10));break;case"d":case"i":v=parseInt(v,10);break;case"j":v=JSON.stringify(v,null,p.width?parseInt(p.width):0);break;case"e":v=p.precision?parseFloat(v).toExponential(p.precision):parseFloat(v).toExponential();break;case"f":v=p.precision?parseFloat(v).toFixed(p.precision):parseFloat(v);break;case"g":v=p.precision?String(Number(v.toPrecision(p.precision))):parseFloat(v);break;case"o":v=(parseInt(v,10)>>>0).toString(8);break;case"s":v=String(v),v=p.precision?v.substring(0,p.precision):v;break;case"t":v=String(!!v),v=p.precision?v.substring(0,p.precision):v;break;case"T":v=Object.prototype.toString.call(v).slice(8,-1).toLowerCase(),v=p.precision?v.substring(0,p.precision):v;break;case"u":v=parseInt(v,10)>>>0;break;case"v":v=v.valueOf(),v=p.precision?v.substring(0,p.precision):v;break;case"x":v=(parseInt(v,10)>>>0).toString(16);break;case"X":v=(parseInt(v,10)>>>0).toString(16).toUpperCase()}r.json.test(p.type)?C+=v:(!r.number.test(p.type)||M&&!p.sign?_="":(_=M?"+":"-",v=v.toString().replace(r.sign,"")),w=p.pad_char?p.pad_char==="0"?"0":p.pad_char.charAt(1):" ",c=p.width-(_+v).length,m=p.width&&c>0?w.repeat(c):"",C+=p.align?_+v+m:w==="0"?_+m+v:m+_+v)}return C}var u=Object.create(null);function h(f){if(u[f])return u[f];for(var x,v=f,g=[],y=0;v;){if((x=r.text.exec(v))!==null)g.push(x[0]);else if((x=r.modulo.exec(v))!==null)g.push("%");else{if((x=r.placeholder.exec(v))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(x[2]){y|=1;var p=[],m=x[2],w=[];if((w=r.key.exec(m))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");for(p.push(w[1]);(m=m.substring(w[0].length))!=="";)if((w=r.key_access.exec(m))!==null)p.push(w[1]);else{if((w=r.index_access.exec(m))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");p.push(w[1])}x[2]=p}else y|=2;if(y===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");g.push({placeholder:x[0],param_no:x[1],keys:x[2],sign:x[3],pad_char:x[4],align:x[5],width:x[6],precision:x[7],type:x[8]})}v=v.substring(x[0].length)}return u[f]=g}s.sprintf=n,s.vsprintf=a,typeof window<"u"&&(window.sprintf=n,window.vsprintf=a,(o=function(){return{sprintf:n,vsprintf:a}}.call(s,t,s,d))===void 0||(d.exports=o))})()},4162:function(d,s,t){d.exports=function(i,u){if(i.dimension<=0)return{positions:[],cells:[]};if(i.dimension===1)return function(x,v){for(var g=r(x,v),y=g.length,p=new Array(y),m=new Array(y),w=0;w<y;++w)p[w]=[g[w]],m[w]=[w];return{positions:p,cells:m}}(i,u);var h=i.order.join()+"-"+i.dtype,f=a[h];return u=+u||0,f||(f=a[h]=function(x,v){var g=x.length+"d",y=n[g];if(y)return y(o,x,v)}(i.order,i.dtype)),f(i,u)};var o=t(9284),r=t(9584),n={"2d":function(i,u,h){var f=i({order:u,scalarArguments:3,getters:h==="generic"?[0]:void 0,phase:function(x,v,g,y){return x>y|0},vertex:function(x,v,g,y,p,m,w,c,M,_,E,L,C){var O=(w<<0)+(c<<1)+(M<<2)+(_<<3)|0;if(O!==0&&O!==15)switch(O){case 0:case 15:E.push([x-.5,v-.5]);break;case 1:E.push([x-.25-.25*(y+g-2*C)/(g-y),v-.25-.25*(p+g-2*C)/(g-p)]);break;case 2:E.push([x-.75-.25*(-y-g+2*C)/(y-g),v-.25-.25*(m+y-2*C)/(y-m)]);break;case 3:E.push([x-.5,v-.5-.5*(p+g+m+y-4*C)/(g-p+y-m)]);break;case 4:E.push([x-.25-.25*(m+p-2*C)/(p-m),v-.75-.25*(-p-g+2*C)/(p-g)]);break;case 5:E.push([x-.5-.5*(y+g+m+p-4*C)/(g-y+p-m),v-.5]);break;case 6:E.push([x-.5-.25*(-y-g+m+p)/(y-g+p-m),v-.5-.25*(-p-g+m+y)/(p-g+y-m)]);break;case 7:E.push([x-.75-.25*(m+p-2*C)/(p-m),v-.75-.25*(m+y-2*C)/(y-m)]);break;case 8:E.push([x-.75-.25*(-m-p+2*C)/(m-p),v-.75-.25*(-m-y+2*C)/(m-y)]);break;case 9:E.push([x-.5-.25*(y+g+-m-p)/(g-y+m-p),v-.5-.25*(p+g+-m-y)/(g-p+m-y)]);break;case 10:E.push([x-.5-.5*(-y-g-m-p+4*C)/(y-g+m-p),v-.5]);break;case 11:E.push([x-.25-.25*(-m-p+2*C)/(m-p),v-.75-.25*(p+g-2*C)/(g-p)]);break;case 12:E.push([x-.5,v-.5-.5*(-p-g-m-y+4*C)/(p-g+m-y)]);break;case 13:E.push([x-.75-.25*(y+g-2*C)/(g-y),v-.25-.25*(-m-y+2*C)/(m-y)]);break;case 14:E.push([x-.25-.25*(-y-g+2*C)/(y-g),v-.25-.25*(-p-g+2*C)/(p-g)])}},cell:function(x,v,g,y,p,m,w,c,M){p?c.push([x,v]):c.push([v,x])}});return function(x,v){var g=[],y=[];return f(x,g,y,v),{positions:g,cells:y}}}},a={}},6946:function(d,s,t){d.exports=function a(i,u,h){h=h||{};var f=n[i];f||(f=n[i]={" ":{data:new Float32Array(0),shape:.2}});var x=f[u];if(!x)if(u.length<=1||!/\d/.test(u))x=f[u]=function(L){for(var C=L.cells,O=L.positions,I=new Float32Array(6*C.length),N=0,R=0,V=0;V<C.length;++V)for(var F=C[V],D=0;D<3;++D){var U=O[F[D]];I[N++]=U[0],I[N++]=U[1]+1.4,R=Math.max(U[0],R)}return{data:I,shape:R}}(o(u,{triangles:!0,font:i,textAlign:h.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var v=u.split(/(\d|\s)/),g=new Array(v.length),y=0,p=0,m=0;m<v.length;++m)g[m]=a(i,v[m]),y+=g[m].data.length,p+=g[m].shape,m>0&&(p+=.02);var w=new Float32Array(y),c=0,M=-.5*p;for(m=0;m<g.length;++m){for(var _=g[m].data,E=0;E<_.length;E+=2)w[c++]=_[E]+M,w[c++]=_[E+1];M+=g[m].shape+.02}x=f[u]={data:w,shape:p}}return x};var o=t(875),r=window||k.global||{},n=r.__TEXT_CACHE||{};r.__TEXT_CACHE={}},14:function(d,s,t){var o=t(4405);function r(a,i){var u=o(getComputedStyle(a).getPropertyValue(i));return u[0]*n(u[1],a)}function n(a,i){switch(i=i||document.body,a=(a||"px").trim().toLowerCase(),i!==window&&i!==document||(i=document.body),a){case"%":return i.clientHeight/100;case"ch":case"ex":return function(u,h){var f=document.createElement("div");f.style["font-size"]="128"+u,h.appendChild(f);var x=r(f,"font-size")/128;return h.removeChild(f),x}(a,i);case"em":return r(i,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 37.79527559055118;case"mm":return 3.7795275590551185;case"pt":return 1.3333333333333333;case"pc":return 16}return 1}d.exports=n},3440:function(d,s,t){d.exports=function(p){var m=(p=p||{}).center||[0,0,0],w=p.up||[0,1,0],c=p.right||x(w),M=p.radius||1,_=p.theta||0,E=p.phi||0;if(m=[].slice.call(m,0,3),w=[].slice.call(w,0,3),i(w,w),c=[].slice.call(c,0,3),i(c,c),"eye"in p){var L=p.eye,C=[L[0]-m[0],L[1]-m[1],L[2]-m[2]];a(c,C,w),h(c[0],c[1],c[2])<1e-6?c=x(w):i(c,c),M=h(C[0],C[1],C[2]);var O=u(w,C)/M,I=u(c,C)/M;E=Math.acos(O),_=Math.acos(I)}return M=Math.log(M),new v(p.zoomMin,p.zoomMax,m,w,c,M,_,E)};var o=t(8444),r=t(7437),n=t(4422),a=t(903),i=t(899),u=t(9305);function h(p,m,w){return Math.sqrt(Math.pow(p,2)+Math.pow(m,2)+Math.pow(w,2))}function f(p){return Math.min(1,Math.max(-1,p))}function x(p){var m=Math.abs(p[0]),w=Math.abs(p[1]),c=Math.abs(p[2]),M=[0,0,0];m>Math.max(w,c)?M[2]=1:w>Math.max(m,c)?M[0]=1:M[1]=1;for(var _=0,E=0,L=0;L<3;++L)_+=p[L]*p[L],E+=M[L]*p[L];for(L=0;L<3;++L)M[L]-=E/_*p[L];return i(M,M),M}function v(p,m,w,c,M,_,E,L){this.center=o(w),this.up=o(c),this.right=o(M),this.radius=o([_]),this.angle=o([E,L]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(p,m),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var C=0;C<16;++C)this.computedMatrix[C]=.5;this.recalcMatrix(0)}var g=v.prototype;g.setDistanceLimits=function(p,m){p=p>0?Math.log(p):-1/0,m=m>0?Math.log(m):1/0,m=Math.max(m,p),this.radius.bounds[0][0]=p,this.radius.bounds[1][0]=m},g.getDistanceLimits=function(p){var m=this.radius.bounds[0];return p?(p[0]=Math.exp(m[0][0]),p[1]=Math.exp(m[1][0]),p):[Math.exp(m[0][0]),Math.exp(m[1][0])]},g.recalcMatrix=function(p){this.center.curve(p),this.up.curve(p),this.right.curve(p),this.radius.curve(p),this.angle.curve(p);for(var m=this.computedUp,w=this.computedRight,c=0,M=0,_=0;_<3;++_)M+=m[_]*w[_],c+=m[_]*m[_];var E=Math.sqrt(c),L=0;for(_=0;_<3;++_)w[_]-=m[_]*M/c,L+=w[_]*w[_],m[_]/=E;var C=Math.sqrt(L);for(_=0;_<3;++_)w[_]/=C;var O=this.computedToward;a(O,m,w),i(O,O);var I=Math.exp(this.computedRadius[0]),N=this.computedAngle[0],R=this.computedAngle[1],V=Math.cos(N),F=Math.sin(N),D=Math.cos(R),U=Math.sin(R),j=this.computedCenter,J=V*D,X=F*D,Z=U,Y=-V*U,W=-F*U,Q=D,ne=this.computedEye,re=this.computedMatrix;for(_=0;_<3;++_){var ie=J*w[_]+X*O[_]+Z*m[_];re[4*_+1]=Y*w[_]+W*O[_]+Q*m[_],re[4*_+2]=ie,re[4*_+3]=0}var se=re[1],ge=re[5],ue=re[9],ce=re[2],le=re[6],de=re[10],Ce=ge*de-ue*le,xe=ue*ce-se*de,_e=se*le-ge*ce,we=h(Ce,xe,_e);for(Ce/=we,xe/=we,_e/=we,re[0]=Ce,re[4]=xe,re[8]=_e,_=0;_<3;++_)ne[_]=j[_]+re[2+4*_]*I;for(_=0;_<3;++_){L=0;for(var Ae=0;Ae<3;++Ae)L+=re[_+4*Ae]*ne[Ae];re[12+_]=-L}re[15]=1},g.getMatrix=function(p,m){this.recalcMatrix(p);var w=this.computedMatrix;if(m){for(var c=0;c<16;++c)m[c]=w[c];return m}return w};var y=[0,0,0];g.rotate=function(p,m,w,c){if(this.angle.move(p,m,w),c){this.recalcMatrix(p);var M=this.computedMatrix;y[0]=M[2],y[1]=M[6],y[2]=M[10];for(var _=this.computedUp,E=this.computedRight,L=this.computedToward,C=0;C<3;++C)M[4*C]=_[C],M[4*C+1]=E[C],M[4*C+2]=L[C];for(n(M,M,c,y),C=0;C<3;++C)_[C]=M[4*C],E[C]=M[4*C+1];this.up.set(p,_[0],_[1],_[2]),this.right.set(p,E[0],E[1],E[2])}},g.pan=function(p,m,w,c){m=m||0,w=w||0,c=c||0,this.recalcMatrix(p);var M=this.computedMatrix,_=(Math.exp(this.computedRadius[0]),M[1]),E=M[5],L=M[9],C=h(_,E,L);_/=C,E/=C,L/=C;var O=M[0],I=M[4],N=M[8],R=O*_+I*E+N*L,V=h(O-=_*R,I-=E*R,N-=L*R),F=(O/=V)*m+_*w,D=(I/=V)*m+E*w,U=(N/=V)*m+L*w;this.center.move(p,F,D,U);var j=Math.exp(this.computedRadius[0]);j=Math.max(1e-4,j+c),this.radius.set(p,Math.log(j))},g.translate=function(p,m,w,c){this.center.move(p,m||0,w||0,c||0)},g.setMatrix=function(p,m,w,c){var M=1;typeof w=="number"&&(M=0|w),(M<0||M>3)&&(M=1);var _=(M+2)%3;m||(this.recalcMatrix(p),m=this.computedMatrix);var E=m[M],L=m[M+4],C=m[M+8];if(c){var O=Math.abs(E),I=Math.abs(L),N=Math.abs(C),R=Math.max(O,I,N);O===R?(E=E<0?-1:1,L=C=0):N===R?(C=C<0?-1:1,E=L=0):(L=L<0?-1:1,E=C=0)}else{var V=h(E,L,C);E/=V,L/=V,C/=V}var F,D,U=m[_],j=m[_+4],J=m[_+8],X=U*E+j*L+J*C,Z=h(U-=E*X,j-=L*X,J-=C*X),Y=L*(J/=Z)-C*(j/=Z),W=C*(U/=Z)-E*J,Q=E*j-L*U,ne=h(Y,W,Q);if(Y/=ne,W/=ne,Q/=ne,this.center.jump(p,ye,ke,De),this.radius.idle(p),this.up.jump(p,E,L,C),this.right.jump(p,U,j,J),M===2){var re=m[1],ie=m[5],se=m[9],ge=re*U+ie*j+se*J,ue=re*Y+ie*W+se*Q;F=Ce<0?-Math.PI/2:Math.PI/2,D=Math.atan2(ue,ge)}else{var ce=m[2],le=m[6],de=m[10],Ce=ce*E+le*L+de*C,xe=ce*U+le*j+de*J,_e=ce*Y+le*W+de*Q;F=Math.asin(f(Ce)),D=Math.atan2(_e,xe)}this.angle.jump(p,D,F),this.recalcMatrix(p);var we=m[2],Ae=m[6],$=m[10],oe=this.computedMatrix;r(oe,m);var pe=oe[15],ye=oe[12]/pe,ke=oe[13]/pe,De=oe[14]/pe,Pe=Math.exp(this.computedRadius[0]);this.center.jump(p,ye-we*Pe,ke-Ae*Pe,De-$*Pe)},g.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},g.idle=function(p){this.center.idle(p),this.up.idle(p),this.right.idle(p),this.radius.idle(p),this.angle.idle(p)},g.flush=function(p){this.center.flush(p),this.up.flush(p),this.right.flush(p),this.radius.flush(p),this.angle.flush(p)},g.setDistance=function(p,m){m>0&&this.radius.set(p,Math.log(m))},g.lookAt=function(p,m,w,c){this.recalcMatrix(p),m=m||this.computedEye,w=w||this.computedCenter;var M=(c=c||this.computedUp)[0],_=c[1],E=c[2],L=h(M,_,E);if(!(L<1e-6)){M/=L,_/=L,E/=L;var C=m[0]-w[0],O=m[1]-w[1],I=m[2]-w[2],N=h(C,O,I);if(!(N<1e-6)){C/=N,O/=N,I/=N;var R=this.computedRight,V=R[0],F=R[1],D=R[2],U=M*V+_*F+E*D,j=h(V-=U*M,F-=U*_,D-=U*E);if(!(j<.01&&(j=h(V=_*I-E*O,F=E*C-M*I,D=M*O-_*C))<1e-6)){V/=j,F/=j,D/=j,this.up.set(p,M,_,E),this.right.set(p,V,F,D),this.center.set(p,w[0],w[1],w[2]),this.radius.set(p,Math.log(N));var J=_*D-E*F,X=E*V-M*D,Z=M*F-_*V,Y=h(J,X,Z),W=M*C+_*O+E*I,Q=V*C+F*O+D*I,ne=(J/=Y)*C+(X/=Y)*O+(Z/=Y)*I,re=Math.asin(f(W)),ie=Math.atan2(ne,Q),se=this.angle._state,ge=se[se.length-1],ue=se[se.length-2];ge%=2*Math.PI;var ce=Math.abs(ge+2*Math.PI-ie),le=Math.abs(ge-ie),de=Math.abs(ge-2*Math.PI-ie);ce<le&&(ge+=2*Math.PI),de<le&&(ge-=2*Math.PI),this.angle.jump(this.angle.lastT(),ge,ue),this.angle.set(p,ie,re)}}}}},9660:function(d){d.exports=function(t,o,r){var n=t*o,a=s*t,i=a-(a-t),u=t-i,h=s*o,f=h-(h-o),x=o-f,v=u*x-(n-i*f-u*f-i*x);return r?(r[0]=v,r[1]=n,r):[v,n]};var s=+(Math.pow(2,27)+1)},87:function(d){d.exports=function(s,t,o){var r=s+t,n=r-s,a=t-n,i=s-(r-n);return o?(o[0]=i+a,o[1]=r,o):[i+a,r]}},5306:function(d,s,t){var o=t(2288),r=t(3094),n=t(2146).lW;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:r([32,0]),UINT16:r([32,0]),UINT32:r([32,0]),BIGUINT64:r([32,0]),INT8:r([32,0]),INT16:r([32,0]),INT32:r([32,0]),BIGINT64:r([32,0]),FLOAT:r([32,0]),DOUBLE:r([32,0]),DATA:r([32,0]),UINT8C:r([32,0]),BUFFER:r([32,0])});var a=typeof Uint8ClampedArray<"u",i=typeof BigUint64Array<"u",u=typeof BigInt64Array<"u",h=t.g.__TYPEDARRAY_POOL;h.UINT8C||(h.UINT8C=r([32,0])),h.BIGUINT64||(h.BIGUINT64=r([32,0])),h.BIGINT64||(h.BIGINT64=r([32,0])),h.BUFFER||(h.BUFFER=r([32,0]));var f=h.DATA,x=h.BUFFER;function v(R){if(R){var V=R.length||R.byteLength,F=o.log2(V);f[F].push(R)}}function g(R){R=o.nextPow2(R);var V=o.log2(R),F=f[V];return F.length>0?F.pop():new ArrayBuffer(R)}function y(R){return new Uint8Array(g(R),0,R)}function p(R){return new Uint16Array(g(2*R),0,R)}function m(R){return new Uint32Array(g(4*R),0,R)}function w(R){return new Int8Array(g(R),0,R)}function c(R){return new Int16Array(g(2*R),0,R)}function M(R){return new Int32Array(g(4*R),0,R)}function _(R){return new Float32Array(g(4*R),0,R)}function E(R){return new Float64Array(g(8*R),0,R)}function L(R){return a?new Uint8ClampedArray(g(R),0,R):y(R)}function C(R){return i?new BigUint64Array(g(8*R),0,R):null}function O(R){return u?new BigInt64Array(g(8*R),0,R):null}function I(R){return new DataView(g(R),0,R)}function N(R){R=o.nextPow2(R);var V=o.log2(R),F=x[V];return F.length>0?F.pop():new n(R)}s.free=function(R){if(n.isBuffer(R))x[o.log2(R.length)].push(R);else{if(Object.prototype.toString.call(R)!=="[object ArrayBuffer]"&&(R=R.buffer),!R)return;var V=R.length||R.byteLength,F=0|o.log2(V);f[F].push(R)}},s.freeUint8=s.freeUint16=s.freeUint32=s.freeBigUint64=s.freeInt8=s.freeInt16=s.freeInt32=s.freeBigInt64=s.freeFloat32=s.freeFloat=s.freeFloat64=s.freeDouble=s.freeUint8Clamped=s.freeDataView=function(R){v(R.buffer)},s.freeArrayBuffer=v,s.freeBuffer=function(R){x[o.log2(R.length)].push(R)},s.malloc=function(R,V){if(V===void 0||V==="arraybuffer")return g(R);switch(V){case"uint8":return y(R);case"uint16":return p(R);case"uint32":return m(R);case"int8":return w(R);case"int16":return c(R);case"int32":return M(R);case"float":case"float32":return _(R);case"double":case"float64":return E(R);case"uint8_clamped":return L(R);case"bigint64":return O(R);case"biguint64":return C(R);case"buffer":return N(R);case"data":case"dataview":return I(R);default:return null}return null},s.mallocArrayBuffer=g,s.mallocUint8=y,s.mallocUint16=p,s.mallocUint32=m,s.mallocInt8=w,s.mallocInt16=c,s.mallocInt32=M,s.mallocFloat32=s.mallocFloat=_,s.mallocFloat64=s.mallocDouble=E,s.mallocUint8Clamped=L,s.mallocBigUint64=C,s.mallocBigInt64=O,s.mallocDataView=I,s.mallocBuffer=N,s.clearCache=function(){for(var R=0;R<32;++R)h.UINT8[R].length=0,h.UINT16[R].length=0,h.UINT32[R].length=0,h.INT8[R].length=0,h.INT16[R].length=0,h.INT32[R].length=0,h.FLOAT[R].length=0,h.DOUBLE[R].length=0,h.BIGUINT64[R].length=0,h.BIGINT64[R].length=0,h.UINT8C[R].length=0,f[R].length=0,x[R].length=0}},1731:function(d){function s(o){this.roots=new Array(o),this.ranks=new Array(o);for(var r=0;r<o;++r)this.roots[r]=r,this.ranks[r]=0}d.exports=s;var t=s.prototype;Object.defineProperty(t,"length",{get:function(){return this.roots.length}}),t.makeSet=function(){var o=this.roots.length;return this.roots.push(o),this.ranks.push(0),o},t.find=function(o){for(var r=o,n=this.roots;n[o]!==o;)o=n[o];for(;n[r]!==o;){var a=n[r];n[r]=o,r=a}return o},t.link=function(o,r){var n=this.find(o),a=this.find(r);if(n!==a){var i=this.ranks,u=this.roots,h=i[n],f=i[a];h<f?u[n]=a:f<h?u[a]=n:(u[a]=n,++i[n])}}},1215:function(d){d.exports=function(s,t,o){return s.length===0?s:t?(o||s.sort(t),function(r,n){for(var a=1,i=r.length,u=r[0],h=r[0],f=1;f<i;++f)if(h=u,n(u=r[f],h)){if(f===a){a++;continue}r[a++]=u}return r.length=a,r}(s,t)):(o||s.sort(),function(r){for(var n=1,a=r.length,i=r[0],u=r[0],h=1;h<a;++h,u=i)if(u=i,(i=r[h])!==u){if(h===n){n++;continue}r[n++]=i}return r.length=n,r}(s))}},875:function(d,s,t){d.exports=function(a,i){return typeof i=="object"&&i!==null||(i={}),o(a,i.canvas||r,i.context||n,i)};var o=t(712),r=null,n=null;typeof document<"u"&&((r=document.createElement("canvas")).width=8192,r.height=1024,n=r.getContext("2d"))},712:function(d,s,t){d.exports=function(p,m,w,c){var M=64,_=1.25,E={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return c&&(c.size&&c.size>0&&(M=c.size),c.lineSpacing&&c.lineSpacing>0&&(_=c.lineSpacing),c.styletags&&c.styletags.breaklines&&(E.breaklines=!!c.styletags.breaklines),c.styletags&&c.styletags.bolds&&(E.bolds=!!c.styletags.bolds),c.styletags&&c.styletags.italics&&(E.italics=!!c.styletags.italics),c.styletags&&c.styletags.subscripts&&(E.subscripts=!!c.styletags.subscripts),c.styletags&&c.styletags.superscripts&&(E.superscripts=!!c.styletags.superscripts)),w.font=[c.fontStyle,c.fontVariant,c.fontWeight,M+"px",c.font].filter(function(L){return L}).join(" "),w.textAlign="start",w.textBaseline="alphabetic",w.direction="ltr",y(function(L,C,O,I,N,R){O=O.replace(/\n/g,""),O=R.breaklines===!0?O.replace(/\<br\>/g,`
`):O.replace(/\<br\>/g," ");var V="",F=[];for(J=0;J<O.length;++J)F[J]=V;R.bolds===!0&&(F=x("b",h,O,F)),R.italics===!0&&(F=x("i",f,O,F)),R.superscripts===!0&&(F=x("sup","+1",O,F)),R.subscripts===!0&&(F=x("sub","-1",O,F));var D=[],U="";for(J=0;J<O.length;++J)F[J]!==null&&(U+=O[J],D.push(F[J]));var j,J,X,Z,Y,W=U.split(`
`),Q=W.length,ne=Math.round(N*I),re=I,ie=2*I,se=0,ge=Q*ne+ie;L.height<ge&&(L.height=ge),C.fillStyle="#000",C.fillRect(0,0,L.width,L.height),C.fillStyle="#fff";var ue=0,ce="";function le(){if(ce!==""){var oe=C.measureText(ce).width;C.fillText(ce,re+X,ie+Z),X+=oe}}function de(){return Math.round(Y)+"px "}function Ce(oe,pe){var ye=""+C.font;if(R.subscripts===!0){var ke=oe.indexOf("-"),De=pe.indexOf("-"),Pe=ke>-1?parseInt(oe[1+ke]):0,Re=De>-1?parseInt(pe[1+De]):0;Pe!==Re&&(ye=ye.replace(de(),"?px "),Y*=Math.pow(.75,Re-Pe),ye=ye.replace("?px ",de())),Z+=.25*ne*(Re-Pe)}if(R.superscripts===!0){var fe=oe.indexOf("+"),ve=pe.indexOf("+"),Te=fe>-1?parseInt(oe[1+fe]):0,ze=ve>-1?parseInt(pe[1+ve]):0;Te!==ze&&(ye=ye.replace(de(),"?px "),Y*=Math.pow(.75,ze-Te),ye=ye.replace("?px ",de())),Z-=.25*ne*(ze-Te)}if(R.bolds===!0){var He=oe.indexOf(h)>-1,Ve=pe.indexOf(h)>-1;!He&&Ve&&(ye=nt?ye.replace("italic ","italic bold "):"bold "+ye),He&&!Ve&&(ye=ye.replace("bold ",""))}if(R.italics===!0){var nt=oe.indexOf(f)>-1,tt=pe.indexOf(f)>-1;!nt&&tt&&(ye="italic "+ye),nt&&!tt&&(ye=ye.replace("italic ",""))}C.font=ye}for(j=0;j<Q;++j){var xe=W[j]+`
`;for(X=0,Z=j*ne,Y=I,ce="",J=0;J<xe.length;++J){var _e=J+ue<D.length?D[J+ue]:D[D.length-1];V===_e?ce+=xe[J]:(le(),ce=xe[J],_e!==void 0&&(Ce(V,_e),V=_e))}le(),ue+=xe.length;var we=0|Math.round(X+2*re);se<we&&(se=we)}var Ae=se,$=ie+ne*Q;return r(C.getImageData(0,0,Ae,$).data,[$,Ae,4]).pick(-1,-1,0).transpose(1,0)}(m,w,p,M,_,E),c,M)},d.exports.processPixels=y;var o=t(4162),r=t(5050),n=t(8243),a=t(197),i=t(7761),u=t(8040),h="b|",f="i|";function x(p,m,w,c){for(var M="<"+p+">",_="</"+p+">",E=M.length,L=_.length,C=m[0]==="+"||m[0]==="-",O=0,I=-L;O>-1&&(O=w.indexOf(M,O))!==-1&&(I=w.indexOf(_,O+E))!==-1&&!(I<=O);){for(var N=O;N<I+L;++N)if(N<O+E||N>=I)c[N]=null,w=w.substr(0,N)+" "+w.substr(N+1);else if(c[N]!==null){var R=c[N].indexOf(m[0]);R===-1?c[N]+=m:C&&(c[N]=c[N].substr(0,R+1)+(1+parseInt(c[N][R+1]))+c[N].substr(R+2))}var V=O+E,F=w.substr(V,I-V).indexOf(M);O=F!==-1?F:I+L}return c}function v(p,m){var w=o(p,128);return m?n(w.cells,w.positions,.25):{edges:w.cells,positions:w.positions}}function g(p,m,w,c){var M=v(p,c),_=function(j,J,X){for(var Z=J.textAlign||"start",Y=J.textBaseline||"alphabetic",W=[1<<30,1<<30],Q=[0,0],ne=j.length,re=0;re<ne;++re)for(var ie=j[re],se=0;se<2;++se)W[se]=0|Math.min(W[se],ie[se]),Q[se]=0|Math.max(Q[se],ie[se]);var ge=0;switch(Z){case"center":ge=-.5*(W[0]+Q[0]);break;case"right":case"end":ge=-Q[0];break;case"left":case"start":ge=-W[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+Z+"'")}var ue=0;switch(Y){case"hanging":case"top":ue=-W[1];break;case"middle":ue=-.5*(W[1]+Q[1]);break;case"alphabetic":case"ideographic":ue=-3*X;break;case"bottom":ue=-Q[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+Y+"'")}var ce=1/X;return"lineHeight"in J?ce*=+J.lineHeight:"width"in J?ce=J.width/(Q[0]-W[0]):"height"in J&&(ce=J.height/(Q[1]-W[1])),j.map(function(le){return[ce*(le[0]+ge),ce*(le[1]+ue)]})}(M.positions,m,w),E=M.edges,L=m.orientation==="ccw";if(a(_,E),m.polygons||m.polygon||m.polyline){for(var C=u(E,_),O=new Array(C.length),I=0;I<C.length;++I){for(var N=C[I],R=new Array(N.length),V=0;V<N.length;++V){for(var F=N[V],D=new Array(F.length),U=0;U<F.length;++U)D[U]=_[F[U]].slice();L&&D.reverse(),R[V]=D}O[I]=R}return O}return m.triangles||m.triangulate||m.triangle?{cells:i(_,E,{delaunay:!1,exterior:!1,interior:!0}),positions:_}:{edges:E,positions:_}}function y(p,m,w){try{return g(p,m,w,!0)}catch{}try{return g(p,m,w,!1)}catch{}return m.polygons||m.polyline||m.polygon?[]:m.triangles||m.triangulate||m.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},5346:function(d){(function(){if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=m);var s=!1;if(typeof WeakMap=="function"){var t=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var o=new t,r=Object.freeze({});if(o.set(r,1),o.get(r)===1)return void(d.exports=WeakMap);s=!0}}var n=Object.getOwnPropertyNames,a=Object.defineProperty,i=Object.isExtensible,u="weakmap:",h="weakmap:ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var f=new ArrayBuffer(25),x=new Uint8Array(f);crypto.getRandomValues(x),h="weakmap:rand:"+Array.prototype.map.call(x,function(E){return(E%36).toString(36)}).join("")+"___"}if(a(Object,"getOwnPropertyNames",{value:function(E){return n(E).filter(w)}}),"getPropertyNames"in Object){var v=Object.getPropertyNames;a(Object,"getPropertyNames",{value:function(E){return v(E).filter(w)}})}(function(){var E=Object.freeze;a(Object,"freeze",{value:function(O){return c(O),E(O)}});var L=Object.seal;a(Object,"seal",{value:function(O){return c(O),L(O)}});var C=Object.preventExtensions;a(Object,"preventExtensions",{value:function(O){return c(O),C(O)}})})();var g=!1,y=0,p=function(){this instanceof p||_();var E=[],L=[],C=y++;return Object.create(p.prototype,{get___:{value:M(function(O,I){var N,R=c(O);return R?C in R?R[C]:I:(N=E.indexOf(O))>=0?L[N]:I})},has___:{value:M(function(O){var I=c(O);return I?C in I:E.indexOf(O)>=0})},set___:{value:M(function(O,I){var N,R=c(O);return R?R[C]=I:(N=E.indexOf(O))>=0?L[N]=I:(N=E.length,L[N]=I,E[N]=O),this})},delete___:{value:M(function(O){var I,N,R=c(O);return R?C in R&&delete R[C]:!((I=E.indexOf(O))<0||(N=E.length-1,E[I]=void 0,L[I]=L[N],E[I]=E[N],E.length=N,L.length=N,0))})}})};p.prototype=Object.create(Object.prototype,{get:{value:function(E,L){return this.get___(E,L)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,L){return this.set___(E,L)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),typeof t=="function"?function(){function E(){this instanceof p||_();var L,C=new t,O=void 0,I=!1;return L=s?function(N,R){return C.set(N,R),C.has(N)||(O||(O=new p),O.set(N,R)),this}:function(N,R){if(I)try{C.set(N,R)}catch{O||(O=new p),O.set___(N,R)}else C.set(N,R);return this},Object.create(p.prototype,{get___:{value:M(function(N,R){return O?C.has(N)?C.get(N):O.get___(N,R):C.get(N,R)})},has___:{value:M(function(N){return C.has(N)||!!O&&O.has___(N)})},set___:{value:M(L)},delete___:{value:M(function(N){var R=!!C.delete(N);return O&&O.delete___(N)||R})},permitHostObjects___:{value:M(function(N){if(N!==m)throw new Error("bogus call to permitHostObjects___");I=!0})}})}s&&typeof Proxy<"u"&&(Proxy=void 0),E.prototype=p.prototype,d.exports=E,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),d.exports=p)}function m(E){E.permitHostObjects___&&E.permitHostObjects___(m)}function w(E){return!(E.substr(0,u.length)==u&&E.substr(E.length-3)==="___")}function c(E){if(E!==Object(E))throw new TypeError("Not an object: "+E);var L=E[h];if(L&&L.key===E)return L;if(i(E)){L={key:E};try{return a(E,h,{value:L,writable:!1,enumerable:!1,configurable:!1}),L}catch{return}}}function M(E){return E.prototype=null,Object.freeze(E)}function _(){g||typeof console>"u"||(g=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}})()},9222:function(d,s,t){var o=t(7178);d.exports=function(){var r={};return function(n){if((typeof n!="object"||n===null)&&typeof n!="function")throw new Error("Weakmap-shim: Key must be object");var a=n.valueOf(r);return a&&a.identity===r?a:o(n,r)}}},7178:function(d){d.exports=function(s,t){var o={identity:t},r=s.valueOf;return Object.defineProperty(s,"valueOf",{value:function(n){return n!==t?r.apply(this,arguments):o},writable:!0}),o}},4037:function(d,s,t){var o=t(9222);d.exports=function(){var r=o();return{get:function(n,a){var i=r(n);return i.hasOwnProperty("value")?i.value:a},set:function(n,a){return r(n).value=a,this},has:function(n){return"value"in r(n)},delete:function(n){return delete r(n).value}}}},6183:function(d){d.exports=function(s){var t={};return function(o,r,n){var a=o.dtype,i=o.order,u=[a,i.join()].join(),h=t[u];return h||(t[u]=h=s([a,i])),h(o.shape.slice(0),o.data,o.stride,0|o.offset,r,n)}}(function(){return function(s,t,o,r,n,a){var i=s[0],u=o[0],h=[0],f=u;r|=0;var x=0,v=u;for(x=0;x<i;++x){var g=t[r]-a,y=t[r+f]-a;g>=0!=y>=0&&n.push(h[0]+.5+.5*(g+y)/(g-y)),r+=v,++h[0]}}}.bind(void 0,{funcName:"zeroCrossings"}))},9584:function(d,s,t){d.exports=function(r,n){var a=[];return n=+n||0,o(r.hi(r.shape[0]-1),a,n),a};var o=t(6183)},6601:function(){}},T={};function b(d){var s=T[d];if(s!==void 0)return s.exports;var t=T[d]={id:d,loaded:!1,exports:{}};return l[d].call(t.exports,t,t.exports,b),t.loaded=!0,t.exports}return b.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),b.nmd=function(d){return d.paths=[],d.children||(d.children=[]),d},b(7386)}()},K.exports=S()},12856:function(K,z,e){function S($,oe){if(!($ instanceof oe))throw new TypeError("Cannot call a class as a function")}function k($,oe){for(var pe=0;pe<oe.length;pe++){var ye=oe[pe];ye.enumerable=ye.enumerable||!1,ye.configurable=!0,"value"in ye&&(ye.writable=!0),Object.defineProperty($,ye.key,ye)}}function l($,oe){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(pe,ye){return pe.__proto__=ye,pe},l($,oe)}function T($,oe){if(oe&&(s(oe)==="object"||typeof oe=="function"))return oe;if(oe!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b($)}function b($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function d($){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(oe){return oe.__proto__||Object.getPrototypeOf(oe)},d($)}function s($){return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(oe){return typeof oe}:function(oe){return oe&&typeof Symbol=="function"&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe},s($)}var t=e(95341),o=e(95280),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;z.Buffer=i,z.SlowBuffer=function($){return+$!=$&&($=0),i.alloc(+$)},z.INSPECT_MAX_BYTES=50;var n=2147483647;function a($){if($>n)throw new RangeError('The value "'+$+'" is invalid for option "size"');var oe=new Uint8Array($);return Object.setPrototypeOf(oe,i.prototype),oe}function i($,oe,pe){if(typeof $=="number"){if(typeof oe=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f($)}return u($,oe,pe)}function u($,oe,pe){if(typeof $=="string")return function(De,Pe){if(typeof Pe=="string"&&Pe!==""||(Pe="utf8"),!i.isEncoding(Pe))throw new TypeError("Unknown encoding: "+Pe);var Re=0|y(De,Pe),fe=a(Re),ve=fe.write(De,Pe);return ve!==Re&&(fe=fe.slice(0,ve)),fe}($,oe);if(ArrayBuffer.isView($))return function(De){if(Ce(De,Uint8Array)){var Pe=new Uint8Array(De);return v(Pe.buffer,Pe.byteOffset,Pe.byteLength)}return x(De)}($);if($==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+s($));if(Ce($,ArrayBuffer)||$&&Ce($.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ce($,SharedArrayBuffer)||$&&Ce($.buffer,SharedArrayBuffer)))return v($,oe,pe);if(typeof $=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ye=$.valueOf&&$.valueOf();if(ye!=null&&ye!==$)return i.from(ye,oe,pe);var ke=function(De){if(i.isBuffer(De)){var Pe=0|g(De.length),Re=a(Pe);return Re.length===0||De.copy(Re,0,0,Pe),Re}return De.length!==void 0?typeof De.length!="number"||xe(De.length)?a(0):x(De):De.type==="Buffer"&&Array.isArray(De.data)?x(De.data):void 0}($);if(ke)return ke;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof $[Symbol.toPrimitive]=="function")return i.from($[Symbol.toPrimitive]("string"),oe,pe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+s($))}function h($){if(typeof $!="number")throw new TypeError('"size" argument must be of type number');if($<0)throw new RangeError('The value "'+$+'" is invalid for option "size"')}function f($){return h($),a($<0?0:0|g($))}function x($){for(var oe=$.length<0?0:0|g($.length),pe=a(oe),ye=0;ye<oe;ye+=1)pe[ye]=255&$[ye];return pe}function v($,oe,pe){if(oe<0||$.byteLength<oe)throw new RangeError('"offset" is outside of buffer bounds');if($.byteLength<oe+(pe||0))throw new RangeError('"length" is outside of buffer bounds');var ye;return ye=oe===void 0&&pe===void 0?new Uint8Array($):pe===void 0?new Uint8Array($,oe):new Uint8Array($,oe,pe),Object.setPrototypeOf(ye,i.prototype),ye}function g($){if($>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|$}function y($,oe){if(i.isBuffer($))return $.length;if(ArrayBuffer.isView($)||Ce($,ArrayBuffer))return $.byteLength;if(typeof $!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+s($));var pe=$.length,ye=arguments.length>2&&arguments[2]===!0;if(!ye&&pe===0)return 0;for(var ke=!1;;)switch(oe){case"ascii":case"latin1":case"binary":return pe;case"utf8":case"utf-8":return ce($).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*pe;case"hex":return pe>>>1;case"base64":return le($).length;default:if(ke)return ye?-1:ce($).length;oe=(""+oe).toLowerCase(),ke=!0}}function p($,oe,pe){var ye=!1;if((oe===void 0||oe<0)&&(oe=0),oe>this.length||((pe===void 0||pe>this.length)&&(pe=this.length),pe<=0)||(pe>>>=0)<=(oe>>>=0))return"";for($||($="utf8");;)switch($){case"hex":return F(this,oe,pe);case"utf8":case"utf-8":return I(this,oe,pe);case"ascii":return R(this,oe,pe);case"latin1":case"binary":return V(this,oe,pe);case"base64":return O(this,oe,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,oe,pe);default:if(ye)throw new TypeError("Unknown encoding: "+$);$=($+"").toLowerCase(),ye=!0}}function m($,oe,pe){var ye=$[oe];$[oe]=$[pe],$[pe]=ye}function w($,oe,pe,ye,ke){if($.length===0)return-1;if(typeof pe=="string"?(ye=pe,pe=0):pe>2147483647?pe=2147483647:pe<-2147483648&&(pe=-2147483648),xe(pe=+pe)&&(pe=ke?0:$.length-1),pe<0&&(pe=$.length+pe),pe>=$.length){if(ke)return-1;pe=$.length-1}else if(pe<0){if(!ke)return-1;pe=0}if(typeof oe=="string"&&(oe=i.from(oe,ye)),i.isBuffer(oe))return oe.length===0?-1:c($,oe,pe,ye,ke);if(typeof oe=="number")return oe&=255,typeof Uint8Array.prototype.indexOf=="function"?ke?Uint8Array.prototype.indexOf.call($,oe,pe):Uint8Array.prototype.lastIndexOf.call($,oe,pe):c($,[oe],pe,ye,ke);throw new TypeError("val must be string, number or Buffer")}function c($,oe,pe,ye,ke){var De,Pe=1,Re=$.length,fe=oe.length;if(ye!==void 0&&((ye=String(ye).toLowerCase())==="ucs2"||ye==="ucs-2"||ye==="utf16le"||ye==="utf-16le")){if($.length<2||oe.length<2)return-1;Pe=2,Re/=2,fe/=2,pe/=2}function ve(Ve,nt){return Pe===1?Ve[nt]:Ve.readUInt16BE(nt*Pe)}if(ke){var Te=-1;for(De=pe;De<Re;De++)if(ve($,De)===ve(oe,Te===-1?0:De-Te)){if(Te===-1&&(Te=De),De-Te+1===fe)return Te*Pe}else Te!==-1&&(De-=De-Te),Te=-1}else for(pe+fe>Re&&(pe=Re-fe),De=pe;De>=0;De--){for(var ze=!0,He=0;He<fe;He++)if(ve($,De+He)!==ve(oe,He)){ze=!1;break}if(ze)return De}return-1}function M($,oe,pe,ye){pe=Number(pe)||0;var ke=$.length-pe;ye?(ye=Number(ye))>ke&&(ye=ke):ye=ke;var De,Pe=oe.length;for(ye>Pe/2&&(ye=Pe/2),De=0;De<ye;++De){var Re=parseInt(oe.substr(2*De,2),16);if(xe(Re))return De;$[pe+De]=Re}return De}function _($,oe,pe,ye){return de(ce(oe,$.length-pe),$,pe,ye)}function E($,oe,pe,ye){return de(function(ke){for(var De=[],Pe=0;Pe<ke.length;++Pe)De.push(255&ke.charCodeAt(Pe));return De}(oe),$,pe,ye)}function L($,oe,pe,ye){return de(le(oe),$,pe,ye)}function C($,oe,pe,ye){return de(function(ke,De){for(var Pe,Re,fe,ve=[],Te=0;Te<ke.length&&!((De-=2)<0);++Te)Re=(Pe=ke.charCodeAt(Te))>>8,fe=Pe%256,ve.push(fe),ve.push(Re);return ve}(oe,$.length-pe),$,pe,ye)}function O($,oe,pe){return oe===0&&pe===$.length?t.fromByteArray($):t.fromByteArray($.slice(oe,pe))}function I($,oe,pe){pe=Math.min($.length,pe);for(var ye=[],ke=oe;ke<pe;){var De=$[ke],Pe=null,Re=De>239?4:De>223?3:De>191?2:1;if(ke+Re<=pe){var fe=void 0,ve=void 0,Te=void 0,ze=void 0;switch(Re){case 1:De<128&&(Pe=De);break;case 2:(192&(fe=$[ke+1]))==128&&(ze=(31&De)<<6|63&fe)>127&&(Pe=ze);break;case 3:fe=$[ke+1],ve=$[ke+2],(192&fe)==128&&(192&ve)==128&&(ze=(15&De)<<12|(63&fe)<<6|63&ve)>2047&&(ze<55296||ze>57343)&&(Pe=ze);break;case 4:fe=$[ke+1],ve=$[ke+2],Te=$[ke+3],(192&fe)==128&&(192&ve)==128&&(192&Te)==128&&(ze=(15&De)<<18|(63&fe)<<12|(63&ve)<<6|63&Te)>65535&&ze<1114112&&(Pe=ze)}}Pe===null?(Pe=65533,Re=1):Pe>65535&&(Pe-=65536,ye.push(Pe>>>10&1023|55296),Pe=56320|1023&Pe),ye.push(Pe),ke+=Re}return function(He){var Ve=He.length;if(Ve<=N)return String.fromCharCode.apply(String,He);for(var nt="",tt=0;tt<Ve;)nt+=String.fromCharCode.apply(String,He.slice(tt,tt+=N));return nt}(ye)}z.kMaxLength=n,i.TYPED_ARRAY_SUPPORT=function(){try{var $=new Uint8Array(1),oe={foo:function(){return 42}};return Object.setPrototypeOf(oe,Uint8Array.prototype),Object.setPrototypeOf($,oe),$.foo()===42}catch{return!1}}(),i.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),i.poolSize=8192,i.from=function($,oe,pe){return u($,oe,pe)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function($,oe,pe){return function(ye,ke,De){return h(ye),ye<=0?a(ye):ke!==void 0?typeof De=="string"?a(ye).fill(ke,De):a(ye).fill(ke):a(ye)}($,oe,pe)},i.allocUnsafe=function($){return f($)},i.allocUnsafeSlow=function($){return f($)},i.isBuffer=function($){return $!=null&&$._isBuffer===!0&&$!==i.prototype},i.compare=function($,oe){if(Ce($,Uint8Array)&&($=i.from($,$.offset,$.byteLength)),Ce(oe,Uint8Array)&&(oe=i.from(oe,oe.offset,oe.byteLength)),!i.isBuffer($)||!i.isBuffer(oe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if($===oe)return 0;for(var pe=$.length,ye=oe.length,ke=0,De=Math.min(pe,ye);ke<De;++ke)if($[ke]!==oe[ke]){pe=$[ke],ye=oe[ke];break}return pe<ye?-1:ye<pe?1:0},i.isEncoding=function($){switch(String($).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function($,oe){if(!Array.isArray($))throw new TypeError('"list" argument must be an Array of Buffers');if($.length===0)return i.alloc(0);var pe;if(oe===void 0)for(oe=0,pe=0;pe<$.length;++pe)oe+=$[pe].length;var ye=i.allocUnsafe(oe),ke=0;for(pe=0;pe<$.length;++pe){var De=$[pe];if(Ce(De,Uint8Array))ke+De.length>ye.length?(i.isBuffer(De)||(De=i.from(De)),De.copy(ye,ke)):Uint8Array.prototype.set.call(ye,De,ke);else{if(!i.isBuffer(De))throw new TypeError('"list" argument must be an Array of Buffers');De.copy(ye,ke)}ke+=De.length}return ye},i.byteLength=y,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var $=this.length;if($%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var oe=0;oe<$;oe+=2)m(this,oe,oe+1);return this},i.prototype.swap32=function(){var $=this.length;if($%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var oe=0;oe<$;oe+=4)m(this,oe,oe+3),m(this,oe+1,oe+2);return this},i.prototype.swap64=function(){var $=this.length;if($%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var oe=0;oe<$;oe+=8)m(this,oe,oe+7),m(this,oe+1,oe+6),m(this,oe+2,oe+5),m(this,oe+3,oe+4);return this},i.prototype.toString=function(){var $=this.length;return $===0?"":arguments.length===0?I(this,0,$):p.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function($){if(!i.isBuffer($))throw new TypeError("Argument must be a Buffer");return this===$||i.compare(this,$)===0},i.prototype.inspect=function(){var $="",oe=z.INSPECT_MAX_BYTES;return $=this.toString("hex",0,oe).replace(/(.{2})/g,"$1 ").trim(),this.length>oe&&($+=" ... "),"<Buffer "+$+">"},r&&(i.prototype[r]=i.prototype.inspect),i.prototype.compare=function($,oe,pe,ye,ke){if(Ce($,Uint8Array)&&($=i.from($,$.offset,$.byteLength)),!i.isBuffer($))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+s($));if(oe===void 0&&(oe=0),pe===void 0&&(pe=$?$.length:0),ye===void 0&&(ye=0),ke===void 0&&(ke=this.length),oe<0||pe>$.length||ye<0||ke>this.length)throw new RangeError("out of range index");if(ye>=ke&&oe>=pe)return 0;if(ye>=ke)return-1;if(oe>=pe)return 1;if(this===$)return 0;for(var De=(ke>>>=0)-(ye>>>=0),Pe=(pe>>>=0)-(oe>>>=0),Re=Math.min(De,Pe),fe=this.slice(ye,ke),ve=$.slice(oe,pe),Te=0;Te<Re;++Te)if(fe[Te]!==ve[Te]){De=fe[Te],Pe=ve[Te];break}return De<Pe?-1:Pe<De?1:0},i.prototype.includes=function($,oe,pe){return this.indexOf($,oe,pe)!==-1},i.prototype.indexOf=function($,oe,pe){return w(this,$,oe,pe,!0)},i.prototype.lastIndexOf=function($,oe,pe){return w(this,$,oe,pe,!1)},i.prototype.write=function($,oe,pe,ye){if(oe===void 0)ye="utf8",pe=this.length,oe=0;else if(pe===void 0&&typeof oe=="string")ye=oe,pe=this.length,oe=0;else{if(!isFinite(oe))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");oe>>>=0,isFinite(pe)?(pe>>>=0,ye===void 0&&(ye="utf8")):(ye=pe,pe=void 0)}var ke=this.length-oe;if((pe===void 0||pe>ke)&&(pe=ke),$.length>0&&(pe<0||oe<0)||oe>this.length)throw new RangeError("Attempt to write outside buffer bounds");ye||(ye="utf8");for(var De=!1;;)switch(ye){case"hex":return M(this,$,oe,pe);case"utf8":case"utf-8":return _(this,$,oe,pe);case"ascii":case"latin1":case"binary":return E(this,$,oe,pe);case"base64":return L(this,$,oe,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,$,oe,pe);default:if(De)throw new TypeError("Unknown encoding: "+ye);ye=(""+ye).toLowerCase(),De=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var N=4096;function R($,oe,pe){var ye="";pe=Math.min($.length,pe);for(var ke=oe;ke<pe;++ke)ye+=String.fromCharCode(127&$[ke]);return ye}function V($,oe,pe){var ye="";pe=Math.min($.length,pe);for(var ke=oe;ke<pe;++ke)ye+=String.fromCharCode($[ke]);return ye}function F($,oe,pe){var ye=$.length;(!oe||oe<0)&&(oe=0),(!pe||pe<0||pe>ye)&&(pe=ye);for(var ke="",De=oe;De<pe;++De)ke+=_e[$[De]];return ke}function D($,oe,pe){for(var ye=$.slice(oe,pe),ke="",De=0;De<ye.length-1;De+=2)ke+=String.fromCharCode(ye[De]+256*ye[De+1]);return ke}function U($,oe,pe){if($%1!=0||$<0)throw new RangeError("offset is not uint");if($+oe>pe)throw new RangeError("Trying to access beyond buffer length")}function j($,oe,pe,ye,ke,De){if(!i.isBuffer($))throw new TypeError('"buffer" argument must be a Buffer instance');if(oe>ke||oe<De)throw new RangeError('"value" argument is out of bounds');if(pe+ye>$.length)throw new RangeError("Index out of range")}function J($,oe,pe,ye,ke){ie(oe,ye,ke,$,pe,7);var De=Number(oe&BigInt(4294967295));$[pe++]=De,De>>=8,$[pe++]=De,De>>=8,$[pe++]=De,De>>=8,$[pe++]=De;var Pe=Number(oe>>BigInt(32)&BigInt(4294967295));return $[pe++]=Pe,Pe>>=8,$[pe++]=Pe,Pe>>=8,$[pe++]=Pe,Pe>>=8,$[pe++]=Pe,pe}function X($,oe,pe,ye,ke){ie(oe,ye,ke,$,pe,7);var De=Number(oe&BigInt(4294967295));$[pe+7]=De,De>>=8,$[pe+6]=De,De>>=8,$[pe+5]=De,De>>=8,$[pe+4]=De;var Pe=Number(oe>>BigInt(32)&BigInt(4294967295));return $[pe+3]=Pe,Pe>>=8,$[pe+2]=Pe,Pe>>=8,$[pe+1]=Pe,Pe>>=8,$[pe]=Pe,pe+8}function Z($,oe,pe,ye,ke,De){if(pe+ye>$.length)throw new RangeError("Index out of range");if(pe<0)throw new RangeError("Index out of range")}function Y($,oe,pe,ye,ke){return oe=+oe,pe>>>=0,ke||Z($,0,pe,4),o.write($,oe,pe,ye,23,4),pe+4}function W($,oe,pe,ye,ke){return oe=+oe,pe>>>=0,ke||Z($,0,pe,8),o.write($,oe,pe,ye,52,8),pe+8}i.prototype.slice=function($,oe){var pe=this.length;($=~~$)<0?($+=pe)<0&&($=0):$>pe&&($=pe),(oe=oe===void 0?pe:~~oe)<0?(oe+=pe)<0&&(oe=0):oe>pe&&(oe=pe),oe<$&&(oe=$);var ye=this.subarray($,oe);return Object.setPrototypeOf(ye,i.prototype),ye},i.prototype.readUintLE=i.prototype.readUIntLE=function($,oe,pe){$>>>=0,oe>>>=0,pe||U($,oe,this.length);for(var ye=this[$],ke=1,De=0;++De<oe&&(ke*=256);)ye+=this[$+De]*ke;return ye},i.prototype.readUintBE=i.prototype.readUIntBE=function($,oe,pe){$>>>=0,oe>>>=0,pe||U($,oe,this.length);for(var ye=this[$+--oe],ke=1;oe>0&&(ke*=256);)ye+=this[$+--oe]*ke;return ye},i.prototype.readUint8=i.prototype.readUInt8=function($,oe){return $>>>=0,oe||U($,1,this.length),this[$]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function($,oe){return $>>>=0,oe||U($,2,this.length),this[$]|this[$+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function($,oe){return $>>>=0,oe||U($,2,this.length),this[$]<<8|this[$+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function($,oe){return $>>>=0,oe||U($,4,this.length),(this[$]|this[$+1]<<8|this[$+2]<<16)+16777216*this[$+3]},i.prototype.readUint32BE=i.prototype.readUInt32BE=function($,oe){return $>>>=0,oe||U($,4,this.length),16777216*this[$]+(this[$+1]<<16|this[$+2]<<8|this[$+3])},i.prototype.readBigUInt64LE=we(function($){se($>>>=0,"offset");var oe=this[$],pe=this[$+7];oe!==void 0&&pe!==void 0||ge($,this.length-8);var ye=oe+this[++$]*Math.pow(2,8)+this[++$]*Math.pow(2,16)+this[++$]*Math.pow(2,24),ke=this[++$]+this[++$]*Math.pow(2,8)+this[++$]*Math.pow(2,16)+pe*Math.pow(2,24);return BigInt(ye)+(BigInt(ke)<<BigInt(32))}),i.prototype.readBigUInt64BE=we(function($){se($>>>=0,"offset");var oe=this[$],pe=this[$+7];oe!==void 0&&pe!==void 0||ge($,this.length-8);var ye=oe*Math.pow(2,24)+this[++$]*Math.pow(2,16)+this[++$]*Math.pow(2,8)+this[++$],ke=this[++$]*Math.pow(2,24)+this[++$]*Math.pow(2,16)+this[++$]*Math.pow(2,8)+pe;return(BigInt(ye)<<BigInt(32))+BigInt(ke)}),i.prototype.readIntLE=function($,oe,pe){$>>>=0,oe>>>=0,pe||U($,oe,this.length);for(var ye=this[$],ke=1,De=0;++De<oe&&(ke*=256);)ye+=this[$+De]*ke;return ye>=(ke*=128)&&(ye-=Math.pow(2,8*oe)),ye},i.prototype.readIntBE=function($,oe,pe){$>>>=0,oe>>>=0,pe||U($,oe,this.length);for(var ye=oe,ke=1,De=this[$+--ye];ye>0&&(ke*=256);)De+=this[$+--ye]*ke;return De>=(ke*=128)&&(De-=Math.pow(2,8*oe)),De},i.prototype.readInt8=function($,oe){return $>>>=0,oe||U($,1,this.length),128&this[$]?-1*(255-this[$]+1):this[$]},i.prototype.readInt16LE=function($,oe){$>>>=0,oe||U($,2,this.length);var pe=this[$]|this[$+1]<<8;return 32768&pe?4294901760|pe:pe},i.prototype.readInt16BE=function($,oe){$>>>=0,oe||U($,2,this.length);var pe=this[$+1]|this[$]<<8;return 32768&pe?4294901760|pe:pe},i.prototype.readInt32LE=function($,oe){return $>>>=0,oe||U($,4,this.length),this[$]|this[$+1]<<8|this[$+2]<<16|this[$+3]<<24},i.prototype.readInt32BE=function($,oe){return $>>>=0,oe||U($,4,this.length),this[$]<<24|this[$+1]<<16|this[$+2]<<8|this[$+3]},i.prototype.readBigInt64LE=we(function($){se($>>>=0,"offset");var oe=this[$],pe=this[$+7];oe!==void 0&&pe!==void 0||ge($,this.length-8);var ye=this[$+4]+this[$+5]*Math.pow(2,8)+this[$+6]*Math.pow(2,16)+(pe<<24);return(BigInt(ye)<<BigInt(32))+BigInt(oe+this[++$]*Math.pow(2,8)+this[++$]*Math.pow(2,16)+this[++$]*Math.pow(2,24))}),i.prototype.readBigInt64BE=we(function($){se($>>>=0,"offset");var oe=this[$],pe=this[$+7];oe!==void 0&&pe!==void 0||ge($,this.length-8);var ye=(oe<<24)+this[++$]*Math.pow(2,16)+this[++$]*Math.pow(2,8)+this[++$];return(BigInt(ye)<<BigInt(32))+BigInt(this[++$]*Math.pow(2,24)+this[++$]*Math.pow(2,16)+this[++$]*Math.pow(2,8)+pe)}),i.prototype.readFloatLE=function($,oe){return $>>>=0,oe||U($,4,this.length),o.read(this,$,!0,23,4)},i.prototype.readFloatBE=function($,oe){return $>>>=0,oe||U($,4,this.length),o.read(this,$,!1,23,4)},i.prototype.readDoubleLE=function($,oe){return $>>>=0,oe||U($,8,this.length),o.read(this,$,!0,52,8)},i.prototype.readDoubleBE=function($,oe){return $>>>=0,oe||U($,8,this.length),o.read(this,$,!1,52,8)},i.prototype.writeUintLE=i.prototype.writeUIntLE=function($,oe,pe,ye){$=+$,oe>>>=0,pe>>>=0,ye||j(this,$,oe,pe,Math.pow(2,8*pe)-1,0);var ke=1,De=0;for(this[oe]=255&$;++De<pe&&(ke*=256);)this[oe+De]=$/ke&255;return oe+pe},i.prototype.writeUintBE=i.prototype.writeUIntBE=function($,oe,pe,ye){$=+$,oe>>>=0,pe>>>=0,ye||j(this,$,oe,pe,Math.pow(2,8*pe)-1,0);var ke=pe-1,De=1;for(this[oe+ke]=255&$;--ke>=0&&(De*=256);)this[oe+ke]=$/De&255;return oe+pe},i.prototype.writeUint8=i.prototype.writeUInt8=function($,oe,pe){return $=+$,oe>>>=0,pe||j(this,$,oe,1,255,0),this[oe]=255&$,oe+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function($,oe,pe){return $=+$,oe>>>=0,pe||j(this,$,oe,2,65535,0),this[oe]=255&$,this[oe+1]=$>>>8,oe+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function($,oe,pe){return $=+$,oe>>>=0,pe||j(this,$,oe,2,65535,0),this[oe]=$>>>8,this[oe+1]=255&$,oe+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function($,oe,pe){return $=+$,oe>>>=0,pe||j(this,$,oe,4,4294967295,0),this[oe+3]=$>>>24,this[oe+2]=$>>>16,this[oe+1]=$>>>8,this[oe]=255&$,oe+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function($,oe,pe){return $=+$,oe>>>=0,pe||j(this,$,oe,4,4294967295,0),this[oe]=$>>>24,this[oe+1]=$>>>16,this[oe+2]=$>>>8,this[oe+3]=255&$,oe+4},i.prototype.writeBigUInt64LE=we(function($){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return J(this,$,oe,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=we(function($){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return X(this,$,oe,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function($,oe,pe,ye){if($=+$,oe>>>=0,!ye){var ke=Math.pow(2,8*pe-1);j(this,$,oe,pe,ke-1,-ke)}var De=0,Pe=1,Re=0;for(this[oe]=255&$;++De<pe&&(Pe*=256);)$<0&&Re===0&&this[oe+De-1]!==0&&(Re=1),this[oe+De]=($/Pe>>0)-Re&255;return oe+pe},i.prototype.writeIntBE=function($,oe,pe,ye){if($=+$,oe>>>=0,!ye){var ke=Math.pow(2,8*pe-1);j(this,$,oe,pe,ke-1,-ke)}var De=pe-1,Pe=1,Re=0;for(this[oe+De]=255&$;--De>=0&&(Pe*=256);)$<0&&Re===0&&this[oe+De+1]!==0&&(Re=1),this[oe+De]=($/Pe>>0)-Re&255;return oe+pe},i.prototype.writeInt8=function($,oe,pe){return $=+$,oe>>>=0,pe||j(this,$,oe,1,127,-128),$<0&&($=255+$+1),this[oe]=255&$,oe+1},i.prototype.writeInt16LE=function($,oe,pe){return $=+$,oe>>>=0,pe||j(this,$,oe,2,32767,-32768),this[oe]=255&$,this[oe+1]=$>>>8,oe+2},i.prototype.writeInt16BE=function($,oe,pe){return $=+$,oe>>>=0,pe||j(this,$,oe,2,32767,-32768),this[oe]=$>>>8,this[oe+1]=255&$,oe+2},i.prototype.writeInt32LE=function($,oe,pe){return $=+$,oe>>>=0,pe||j(this,$,oe,4,2147483647,-2147483648),this[oe]=255&$,this[oe+1]=$>>>8,this[oe+2]=$>>>16,this[oe+3]=$>>>24,oe+4},i.prototype.writeInt32BE=function($,oe,pe){return $=+$,oe>>>=0,pe||j(this,$,oe,4,2147483647,-2147483648),$<0&&($=4294967295+$+1),this[oe]=$>>>24,this[oe+1]=$>>>16,this[oe+2]=$>>>8,this[oe+3]=255&$,oe+4},i.prototype.writeBigInt64LE=we(function($){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return J(this,$,oe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=we(function($){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return X(this,$,oe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeFloatLE=function($,oe,pe){return Y(this,$,oe,!0,pe)},i.prototype.writeFloatBE=function($,oe,pe){return Y(this,$,oe,!1,pe)},i.prototype.writeDoubleLE=function($,oe,pe){return W(this,$,oe,!0,pe)},i.prototype.writeDoubleBE=function($,oe,pe){return W(this,$,oe,!1,pe)},i.prototype.copy=function($,oe,pe,ye){if(!i.isBuffer($))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),ye||ye===0||(ye=this.length),oe>=$.length&&(oe=$.length),oe||(oe=0),ye>0&&ye<pe&&(ye=pe),ye===pe||$.length===0||this.length===0)return 0;if(oe<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(ye<0)throw new RangeError("sourceEnd out of bounds");ye>this.length&&(ye=this.length),$.length-oe<ye-pe&&(ye=$.length-oe+pe);var ke=ye-pe;return this===$&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(oe,pe,ye):Uint8Array.prototype.set.call($,this.subarray(pe,ye),oe),ke},i.prototype.fill=function($,oe,pe,ye){if(typeof $=="string"){if(typeof oe=="string"?(ye=oe,oe=0,pe=this.length):typeof pe=="string"&&(ye=pe,pe=this.length),ye!==void 0&&typeof ye!="string")throw new TypeError("encoding must be a string");if(typeof ye=="string"&&!i.isEncoding(ye))throw new TypeError("Unknown encoding: "+ye);if($.length===1){var ke=$.charCodeAt(0);(ye==="utf8"&&ke<128||ye==="latin1")&&($=ke)}}else typeof $=="number"?$&=255:typeof $=="boolean"&&($=Number($));if(oe<0||this.length<oe||this.length<pe)throw new RangeError("Out of range index");if(pe<=oe)return this;var De;if(oe>>>=0,pe=pe===void 0?this.length:pe>>>0,$||($=0),typeof $=="number")for(De=oe;De<pe;++De)this[De]=$;else{var Pe=i.isBuffer($)?$:i.from($,ye),Re=Pe.length;if(Re===0)throw new TypeError('The value "'+$+'" is invalid for argument "value"');for(De=0;De<pe-oe;++De)this[De+oe]=Pe[De%Re]}return this};var Q={};function ne($,oe,pe){Q[$]=function(ye){(function(Te,ze){if(typeof ze!="function"&&ze!==null)throw new TypeError("Super expression must either be null or a function");Te.prototype=Object.create(ze&&ze.prototype,{constructor:{value:Te,writable:!0,configurable:!0}}),Object.defineProperty(Te,"prototype",{writable:!1}),ze&&l(Te,ze)})(ve,ye);var ke,De,Pe,Re,fe=(Pe=ve,Re=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Te,ze=d(Pe);if(Re){var He=d(this).constructor;Te=Reflect.construct(ze,arguments,He)}else Te=ze.apply(this,arguments);return T(this,Te)});function ve(){var Te;return S(this,ve),Te=fe.call(this),Object.defineProperty(b(Te),"message",{value:oe.apply(b(Te),arguments),writable:!0,configurable:!0}),Te.name="".concat(Te.name," [").concat($,"]"),Te.stack,delete Te.name,Te}return ke=ve,(De=[{key:"code",get:function(){return $},set:function(Te){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Te,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat($,"]: ").concat(this.message)}}])&&k(ke.prototype,De),Object.defineProperty(ke,"prototype",{writable:!1}),ve}(pe)}function re($){for(var oe="",pe=$.length,ye=$[0]==="-"?1:0;pe>=ye+4;pe-=3)oe="_".concat($.slice(pe-3,pe)).concat(oe);return"".concat($.slice(0,pe)).concat(oe)}function ie($,oe,pe,ye,ke,De){if($>pe||$<oe){var Pe,Re=typeof oe=="bigint"?"n":"";throw Pe=De>3?oe===0||oe===BigInt(0)?">= 0".concat(Re," and < 2").concat(Re," ** ").concat(8*(De+1)).concat(Re):">= -(2".concat(Re," ** ").concat(8*(De+1)-1).concat(Re,") and < 2 ** ")+"".concat(8*(De+1)-1).concat(Re):">= ".concat(oe).concat(Re," and <= ").concat(pe).concat(Re),new Q.ERR_OUT_OF_RANGE("value",Pe,$)}(function(fe,ve,Te){se(ve,"offset"),fe[ve]!==void 0&&fe[ve+Te]!==void 0||ge(ve,fe.length-(Te+1))})(ye,ke,De)}function se($,oe){if(typeof $!="number")throw new Q.ERR_INVALID_ARG_TYPE(oe,"number",$)}function ge($,oe,pe){throw Math.floor($)!==$?(se($,pe),new Q.ERR_OUT_OF_RANGE(pe||"offset","an integer",$)):oe<0?new Q.ERR_BUFFER_OUT_OF_BOUNDS:new Q.ERR_OUT_OF_RANGE(pe||"offset",">= ".concat(pe?1:0," and <= ").concat(oe),$)}ne("ERR_BUFFER_OUT_OF_BOUNDS",function($){return $?"".concat($," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),ne("ERR_INVALID_ARG_TYPE",function($,oe){return'The "'.concat($,'" argument must be of type number. Received type ').concat(s(oe))},TypeError),ne("ERR_OUT_OF_RANGE",function($,oe,pe){var ye='The value of "'.concat($,'" is out of range.'),ke=pe;return Number.isInteger(pe)&&Math.abs(pe)>Math.pow(2,32)?ke=re(String(pe)):typeof pe=="bigint"&&(ke=String(pe),(pe>Math.pow(BigInt(2),BigInt(32))||pe<-Math.pow(BigInt(2),BigInt(32)))&&(ke=re(ke)),ke+="n"),ye+" It must be ".concat(oe,". Received ").concat(ke)},RangeError);var ue=/[^+/0-9A-Za-z-_]/g;function ce($,oe){var pe;oe=oe||1/0;for(var ye=$.length,ke=null,De=[],Pe=0;Pe<ye;++Pe){if((pe=$.charCodeAt(Pe))>55295&&pe<57344){if(!ke){if(pe>56319){(oe-=3)>-1&&De.push(239,191,189);continue}if(Pe+1===ye){(oe-=3)>-1&&De.push(239,191,189);continue}ke=pe;continue}if(pe<56320){(oe-=3)>-1&&De.push(239,191,189),ke=pe;continue}pe=65536+(ke-55296<<10|pe-56320)}else ke&&(oe-=3)>-1&&De.push(239,191,189);if(ke=null,pe<128){if((oe-=1)<0)break;De.push(pe)}else if(pe<2048){if((oe-=2)<0)break;De.push(pe>>6|192,63&pe|128)}else if(pe<65536){if((oe-=3)<0)break;De.push(pe>>12|224,pe>>6&63|128,63&pe|128)}else{if(!(pe<1114112))throw new Error("Invalid code point");if((oe-=4)<0)break;De.push(pe>>18|240,pe>>12&63|128,pe>>6&63|128,63&pe|128)}}return De}function le($){return t.toByteArray(function(oe){if((oe=(oe=oe.split("=")[0]).trim().replace(ue,"")).length<2)return"";for(;oe.length%4!=0;)oe+="=";return oe}($))}function de($,oe,pe,ye){var ke;for(ke=0;ke<ye&&!(ke+pe>=oe.length||ke>=$.length);++ke)oe[ke+pe]=$[ke];return ke}function Ce($,oe){return $ instanceof oe||$!=null&&$.constructor!=null&&$.constructor.name!=null&&$.constructor.name===oe.name}function xe($){return $!=$}var _e=function(){for(var $="0123456789abcdef",oe=new Array(256),pe=0;pe<16;++pe)for(var ye=16*pe,ke=0;ke<16;++ke)oe[ye+ke]=$[pe]+$[ke];return oe}();function we($){return typeof BigInt>"u"?Ae:$}function Ae(){throw new Error("BigInt not supported")}},35791:function(K){K.exports=k,K.exports.isMobile=k,K.exports.default=k;var z=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,S=/android|ipad|playbook|silk/i;function k(l){l||(l={});var T=l.ua;if(T||typeof navigator>"u"||(T=navigator.userAgent),T&&T.headers&&typeof T.headers["user-agent"]=="string"&&(T=T.headers["user-agent"]),typeof T!="string")return!1;var b=z.test(T)&&!e.test(T)||!!l.tablet&&S.test(T);return!b&&l.tablet&&l.featureDetect&&navigator&&navigator.maxTouchPoints>1&&T.indexOf("Macintosh")!==-1&&T.indexOf("Safari")!==-1&&(b=!0),b}},86781:function(K,z,e){e.r(z),e.d(z,{sankeyCenter:function(){return r},sankeyCircular:function(){return E},sankeyJustify:function(){return o},sankeyLeft:function(){return s},sankeyRight:function(){return t}});var S=e(33064),k=e(15140),l=e(45879),T=e(2502),b=e.n(T);function d(le){return le.target.depth}function s(le){return le.depth}function t(le,de){return de-1-le.height}function o(le,de){return le.sourceLinks.length?le.depth:de-1}function r(le){return le.targetLinks.length?le.depth:le.sourceLinks.length?(0,S.VV)(le.sourceLinks,d)-1:0}function n(le){return function(){return le}}var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(le){return typeof le}:function(le){return le&&typeof Symbol=="function"&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le};function i(le,de){return h(le.source,de.source)||le.index-de.index}function u(le,de){return h(le.target,de.target)||le.index-de.index}function h(le,de){return le.partOfCycle===de.partOfCycle?le.y0-de.y0:le.circularLinkType==="top"||de.circularLinkType==="bottom"?-1:1}function f(le){return le.value}function x(le){return(le.y0+le.y1)/2}function v(le){return x(le.source)}function g(le){return x(le.target)}function y(le){return le.index}function p(le){return le.nodes}function m(le){return le.links}function w(le,de){var Ce=le.get(de);if(!Ce)throw new Error("missing: "+de);return Ce}function c(le,de){return de(le)}var M=25,_=10;function E(){var le,de,Ce=0,xe=0,_e=1,we=1,Ae=24,$=y,oe=o,pe=p,ye=m,ke=32,De=2,Pe=null;function Re(){var Ve={nodes:pe.apply(null,arguments),links:ye.apply(null,arguments)};fe(Ve),L(Ve,0,Pe),ve(Ve),Te(Ve),C(Ve,$),ze(Ve,ke,$),He(Ve);for(var nt=4,tt=0;tt<nt;tt++)re(Ve,we,$),ie(Ve,0,$),Q(Ve,xe,we,$),re(Ve,we,$),ie(Ve,0,$);return ce(Ve,xe,we),V(Ve,De,we,$),Ve}function fe(Ve){Ve.nodes.forEach(function(tt,ot){tt.index=ot,tt.sourceLinks=[],tt.targetLinks=[]});var nt=(0,k.UI)(Ve.nodes,$);return Ve.links.forEach(function(tt,ot){tt.index=ot;var pt=tt.source,Tt=tt.target;(pt===void 0?"undefined":a(pt))!=="object"&&(pt=tt.source=w(nt,pt)),(Tt===void 0?"undefined":a(Tt))!=="object"&&(Tt=tt.target=w(nt,Tt)),pt.sourceLinks.push(tt),Tt.targetLinks.push(tt)}),Ve}function ve(Ve){Ve.nodes.forEach(function(nt){nt.partOfCycle=!1,nt.value=Math.max((0,S.Sm)(nt.sourceLinks,f),(0,S.Sm)(nt.targetLinks,f)),nt.sourceLinks.forEach(function(tt){tt.circular&&(nt.partOfCycle=!0,nt.circularLinkType=tt.circularLinkType)}),nt.targetLinks.forEach(function(tt){tt.circular&&(nt.partOfCycle=!0,nt.circularLinkType=tt.circularLinkType)})})}function Te(Ve){var nt,tt,ot;for(nt=Ve.nodes,tt=[],ot=0;nt.length;++ot,nt=tt,tt=[])nt.forEach(function(pt){pt.depth=ot,pt.sourceLinks.forEach(function(Tt){tt.indexOf(Tt.target)<0&&!Tt.circular&&tt.push(Tt.target)})});for(nt=Ve.nodes,tt=[],ot=0;nt.length;++ot,nt=tt,tt=[])nt.forEach(function(pt){pt.height=ot,pt.targetLinks.forEach(function(Tt){tt.indexOf(Tt.source)<0&&!Tt.circular&&tt.push(Tt.source)})});Ve.nodes.forEach(function(pt){pt.column=Math.floor(oe.call(null,pt,ot))})}function ze(Ve,nt,tt){var ot=(0,k.b1)().key(function(Pt){return Pt.column}).sortKeys(S.j2).entries(Ve.nodes).map(function(Pt){return Pt.values});(function(Pt){if(de){var Et=1/0;ot.forEach(function(Ze){var Ye=we*de/(Ze.length+1);Et=Ye<Et?Ye:Et}),le=Et}var Ot=(0,S.VV)(ot,function(Ze){return(we-xe-(Ze.length-1)*le)/(0,S.Sm)(Ze,f)});Ot*=.3,Ve.links.forEach(function(Ze){Ze.width=Ze.value*Ot});var Nt=function(Ze){var Ye=0,je=0,Ke=0,st=0,Se=(0,S.Fp)(Ze.nodes,function(Ie){return Ie.column});return Ze.links.forEach(function(Ie){Ie.circular&&(Ie.circularLinkType=="top"?Ye+=Ie.width:je+=Ie.width,Ie.target.column==0&&(st+=Ie.width),Ie.source.column==Se&&(Ke+=Ie.width))}),{top:Ye=Ye>0?Ye+M+_:Ye,bottom:je=je>0?je+M+_:je,left:st=st>0?st+M+_:st,right:Ke=Ke>0?Ke+M+_:Ke}}(Ve),zt=function(Ze,Ye){var je=(0,S.Fp)(Ze.nodes,function(We){return We.column}),Ke=_e-Ce,st=we-xe,Se=Ke/(Ke+Ye.right+Ye.left),Ie=st/(st+Ye.top+Ye.bottom);return Ce=Ce*Se+Ye.left,_e=Ye.right==0?_e:_e*Se,xe=xe*Ie+Ye.top,we*=Ie,Ze.nodes.forEach(function(We){We.x0=Ce+We.column*((_e-Ce-Ae)/je),We.x1=We.x0+Ae}),Ie}(Ve,Nt);Ot*=zt,Ve.links.forEach(function(Ze){Ze.width=Ze.value*Ot}),ot.forEach(function(Ze){var Ye=Ze.length;Ze.forEach(function(je,Ke){je.depth==ot.length-1&&Ye==1||je.depth==0&&Ye==1?(je.y0=we/2-je.value*Ot,je.y1=je.y0+je.value*Ot):je.partOfCycle?I(je,Pt)==0?(je.y0=we/2+Ke,je.y1=je.y0+je.value*Ot):je.circularLinkType=="top"?(je.y0=xe+Ke,je.y1=je.y0+je.value*Ot):(je.y0=we-je.value*Ot-Ke,je.y1=je.y0+je.value*Ot):Nt.top==0||Nt.bottom==0?(je.y0=(we-xe)/Ye*Ke,je.y1=je.y0+je.value*Ot):(je.y0=(we-xe)/2-Ye/2+Ke,je.y1=je.y0+je.value*Ot)})})})(tt),dt();for(var pt=1,Tt=nt;Tt>0;--Tt)yt(pt*=.99,tt),dt();function yt(Pt,Et){var Ot=ot.length;ot.forEach(function(Nt){var zt=Nt.length,Ze=Nt[0].depth;Nt.forEach(function(Ye){var je;if((Ye.sourceLinks.length||Ye.targetLinks.length)&&!(Ye.partOfCycle&&I(Ye,Et)>0))if(Ze==0&&zt==1)je=Ye.y1-Ye.y0,Ye.y0=we/2-je/2,Ye.y1=we/2+je/2;else if(Ze==Ot-1&&zt==1)je=Ye.y1-Ye.y0,Ye.y0=we/2-je/2,Ye.y1=we/2+je/2;else{var Ke=(0,S.J6)(Ye.sourceLinks,g),st=(0,S.J6)(Ye.targetLinks,v),Se=((Ke&&st?(Ke+st)/2:Ke||st)-x(Ye))*Pt;Ye.y0+=Se,Ye.y1+=Se}})})}function dt(){ot.forEach(function(Pt){var Et,Ot,Nt,zt=xe,Ze=Pt.length;for(Pt.sort(h),Nt=0;Nt<Ze;++Nt)(Ot=zt-(Et=Pt[Nt]).y0)>0&&(Et.y0+=Ot,Et.y1+=Ot),zt=Et.y1+le;if((Ot=zt-le-we)>0)for(zt=Et.y0-=Ot,Et.y1-=Ot,Nt=Ze-2;Nt>=0;--Nt)(Ot=(Et=Pt[Nt]).y1+le-zt)>0&&(Et.y0-=Ot,Et.y1-=Ot),zt=Et.y0})}}function He(Ve){Ve.nodes.forEach(function(nt){nt.sourceLinks.sort(u),nt.targetLinks.sort(i)}),Ve.nodes.forEach(function(nt){var tt=nt.y0,ot=tt,pt=nt.y1,Tt=pt;nt.sourceLinks.forEach(function(yt){yt.circular?(yt.y0=pt-yt.width/2,pt-=yt.width):(yt.y0=tt+yt.width/2,tt+=yt.width)}),nt.targetLinks.forEach(function(yt){yt.circular?(yt.y1=Tt-yt.width/2,Tt-=yt.width):(yt.y1=ot+yt.width/2,ot+=yt.width)})})}return Re.nodeId=function(Ve){return arguments.length?($=typeof Ve=="function"?Ve:n(Ve),Re):$},Re.nodeAlign=function(Ve){return arguments.length?(oe=typeof Ve=="function"?Ve:n(Ve),Re):oe},Re.nodeWidth=function(Ve){return arguments.length?(Ae=+Ve,Re):Ae},Re.nodePadding=function(Ve){return arguments.length?(le=+Ve,Re):le},Re.nodes=function(Ve){return arguments.length?(pe=typeof Ve=="function"?Ve:n(Ve),Re):pe},Re.links=function(Ve){return arguments.length?(ye=typeof Ve=="function"?Ve:n(Ve),Re):ye},Re.size=function(Ve){return arguments.length?(Ce=xe=0,_e=+Ve[0],we=+Ve[1],Re):[_e-Ce,we-xe]},Re.extent=function(Ve){return arguments.length?(Ce=+Ve[0][0],_e=+Ve[1][0],xe=+Ve[0][1],we=+Ve[1][1],Re):[[Ce,xe],[_e,we]]},Re.iterations=function(Ve){return arguments.length?(ke=+Ve,Re):ke},Re.circularLinkGap=function(Ve){return arguments.length?(De=+Ve,Re):De},Re.nodePaddingRatio=function(Ve){return arguments.length?(de=+Ve,Re):de},Re.sortNodes=function(Ve){return arguments.length?(Pe=Ve,Re):Pe},Re.update=function(Ve){return C(Ve,$),He(Ve),Ve.links.forEach(function(nt){nt.circular&&(nt.circularLinkType=nt.y0+nt.y1<we?"top":"bottom",nt.source.circularLinkType=nt.circularLinkType,nt.target.circularLinkType=nt.circularLinkType)}),re(Ve,we,$,!1),ie(Ve,0,$),V(Ve,De,we,$),Ve},Re}function L(le,de,Ce){var xe=0;if(Ce===null){for(var _e=[],we=0;we<le.links.length;we++){var Ae=le.links[we],$=Ae.source.index,oe=Ae.target.index;_e[$]||(_e[$]=[]),_e[oe]||(_e[oe]=[]),_e[$].indexOf(oe)===-1&&_e[$].push(oe)}var pe=b()(_e);pe.sort(function(De,Pe){return De.length-Pe.length});var ye={};for(we=0;we<pe.length;we++){var ke=pe[we].slice(-2);ye[ke[0]]||(ye[ke[0]]={}),ye[ke[0]][ke[1]]=!0}le.links.forEach(function(De){var Pe=De.target.index,Re=De.source.index;Pe===Re||ye[Re]&&ye[Re][Pe]?(De.circular=!0,De.circularLinkID=xe,xe+=1):De.circular=!1})}else le.links.forEach(function(De){De.source[Ce]<De.target[Ce]?De.circular=!1:(De.circular=!0,De.circularLinkID=xe,xe+=1)})}function C(le,de){var Ce=0,xe=0;le.links.forEach(function(_e){_e.circular&&(_e.source.circularLinkType||_e.target.circularLinkType?_e.circularLinkType=_e.source.circularLinkType?_e.source.circularLinkType:_e.target.circularLinkType:_e.circularLinkType=Ce<xe?"top":"bottom",_e.circularLinkType=="top"?Ce+=1:xe+=1,le.nodes.forEach(function(we){c(we,de)!=c(_e.source,de)&&c(we,de)!=c(_e.target,de)||(we.circularLinkType=_e.circularLinkType)}))}),le.links.forEach(function(_e){_e.circular&&(_e.source.circularLinkType==_e.target.circularLinkType&&(_e.circularLinkType=_e.source.circularLinkType),ue(_e,de)&&(_e.circularLinkType=_e.source.circularLinkType))})}function O(le){var de=Math.abs(le.y1-le.y0),Ce=Math.abs(le.target.x0-le.source.x1);return Math.atan(Ce/de)}function I(le,de){var Ce=0;le.sourceLinks.forEach(function(_e){Ce=_e.circular&&!ue(_e,de)?Ce+1:Ce});var xe=0;return le.targetLinks.forEach(function(_e){xe=_e.circular&&!ue(_e,de)?xe+1:xe}),Ce+xe}function N(le){var de=le.source.sourceLinks,Ce=0;de.forEach(function(we){Ce=we.circular?Ce+1:Ce});var xe=le.target.targetLinks,_e=0;return xe.forEach(function(we){_e=we.circular?_e+1:_e}),!(Ce>1||_e>1)}function R(le,de,Ce){return le.sort(F),le.forEach(function(xe,_e){var we,Ae,$=0;if(ue(xe,Ce)&&N(xe))xe.circularPathData.verticalBuffer=$+xe.width/2;else{for(var oe=0;oe<_e;oe++)if(we=le[_e],Ae=le[oe],!(we.source.column<Ae.target.column||we.target.column>Ae.source.column)){var pe=le[oe].circularPathData.verticalBuffer+le[oe].width/2+de;$=pe>$?pe:$}xe.circularPathData.verticalBuffer=$+xe.width/2}}),le}function V(le,de,Ce,xe){var _e=(0,S.VV)(le.links,function(we){return we.source.y0});le.links.forEach(function(we){we.circular&&(we.circularPathData={})}),R(le.links.filter(function(we){return we.circularLinkType=="top"}),de,xe),R(le.links.filter(function(we){return we.circularLinkType=="bottom"}),de,xe),le.links.forEach(function(we){if(we.circular){if(we.circularPathData.arcRadius=we.width+_,we.circularPathData.leftNodeBuffer=5,we.circularPathData.rightNodeBuffer=5,we.circularPathData.sourceWidth=we.source.x1-we.source.x0,we.circularPathData.sourceX=we.source.x0+we.circularPathData.sourceWidth,we.circularPathData.targetX=we.target.x0,we.circularPathData.sourceY=we.y0,we.circularPathData.targetY=we.y1,ue(we,xe)&&N(we))we.circularPathData.leftSmallArcRadius=_+we.width/2,we.circularPathData.leftLargeArcRadius=_+we.width/2,we.circularPathData.rightSmallArcRadius=_+we.width/2,we.circularPathData.rightLargeArcRadius=_+we.width/2,we.circularLinkType=="bottom"?(we.circularPathData.verticalFullExtent=we.source.y1+M+we.circularPathData.verticalBuffer,we.circularPathData.verticalLeftInnerExtent=we.circularPathData.verticalFullExtent-we.circularPathData.leftLargeArcRadius,we.circularPathData.verticalRightInnerExtent=we.circularPathData.verticalFullExtent-we.circularPathData.rightLargeArcRadius):(we.circularPathData.verticalFullExtent=we.source.y0-M-we.circularPathData.verticalBuffer,we.circularPathData.verticalLeftInnerExtent=we.circularPathData.verticalFullExtent+we.circularPathData.leftLargeArcRadius,we.circularPathData.verticalRightInnerExtent=we.circularPathData.verticalFullExtent+we.circularPathData.rightLargeArcRadius);else{var Ae=we.source.column,$=we.circularLinkType,oe=le.links.filter(function(ke){return ke.source.column==Ae&&ke.circularLinkType==$});we.circularLinkType=="bottom"?oe.sort(U):oe.sort(D);var pe=0;oe.forEach(function(ke,De){ke.circularLinkID==we.circularLinkID&&(we.circularPathData.leftSmallArcRadius=_+we.width/2+pe,we.circularPathData.leftLargeArcRadius=_+we.width/2+De*de+pe),pe+=ke.width}),Ae=we.target.column,oe=le.links.filter(function(ke){return ke.target.column==Ae&&ke.circularLinkType==$}),we.circularLinkType=="bottom"?oe.sort(J):oe.sort(j),pe=0,oe.forEach(function(ke,De){ke.circularLinkID==we.circularLinkID&&(we.circularPathData.rightSmallArcRadius=_+we.width/2+pe,we.circularPathData.rightLargeArcRadius=_+we.width/2+De*de+pe),pe+=ke.width}),we.circularLinkType=="bottom"?(we.circularPathData.verticalFullExtent=Math.max(Ce,we.source.y1,we.target.y1)+M+we.circularPathData.verticalBuffer,we.circularPathData.verticalLeftInnerExtent=we.circularPathData.verticalFullExtent-we.circularPathData.leftLargeArcRadius,we.circularPathData.verticalRightInnerExtent=we.circularPathData.verticalFullExtent-we.circularPathData.rightLargeArcRadius):(we.circularPathData.verticalFullExtent=_e-M-we.circularPathData.verticalBuffer,we.circularPathData.verticalLeftInnerExtent=we.circularPathData.verticalFullExtent+we.circularPathData.leftLargeArcRadius,we.circularPathData.verticalRightInnerExtent=we.circularPathData.verticalFullExtent+we.circularPathData.rightLargeArcRadius)}we.circularPathData.leftInnerExtent=we.circularPathData.sourceX+we.circularPathData.leftNodeBuffer,we.circularPathData.rightInnerExtent=we.circularPathData.targetX-we.circularPathData.rightNodeBuffer,we.circularPathData.leftFullExtent=we.circularPathData.sourceX+we.circularPathData.leftLargeArcRadius+we.circularPathData.leftNodeBuffer,we.circularPathData.rightFullExtent=we.circularPathData.targetX-we.circularPathData.rightLargeArcRadius-we.circularPathData.rightNodeBuffer}if(we.circular)we.path=function(ke){return ke.circularLinkType=="top"?"M"+ke.circularPathData.sourceX+" "+ke.circularPathData.sourceY+" L"+ke.circularPathData.leftInnerExtent+" "+ke.circularPathData.sourceY+" A"+ke.circularPathData.leftLargeArcRadius+" "+ke.circularPathData.leftSmallArcRadius+" 0 0 0 "+ke.circularPathData.leftFullExtent+" "+(ke.circularPathData.sourceY-ke.circularPathData.leftSmallArcRadius)+" L"+ke.circularPathData.leftFullExtent+" "+ke.circularPathData.verticalLeftInnerExtent+" A"+ke.circularPathData.leftLargeArcRadius+" "+ke.circularPathData.leftLargeArcRadius+" 0 0 0 "+ke.circularPathData.leftInnerExtent+" "+ke.circularPathData.verticalFullExtent+" L"+ke.circularPathData.rightInnerExtent+" "+ke.circularPathData.verticalFullExtent+" A"+ke.circularPathData.rightLargeArcRadius+" "+ke.circularPathData.rightLargeArcRadius+" 0 0 0 "+ke.circularPathData.rightFullExtent+" "+ke.circularPathData.verticalRightInnerExtent+" L"+ke.circularPathData.rightFullExtent+" "+(ke.circularPathData.targetY-ke.circularPathData.rightSmallArcRadius)+" A"+ke.circularPathData.rightLargeArcRadius+" "+ke.circularPathData.rightSmallArcRadius+" 0 0 0 "+ke.circularPathData.rightInnerExtent+" "+ke.circularPathData.targetY+" L"+ke.circularPathData.targetX+" "+ke.circularPathData.targetY:"M"+ke.circularPathData.sourceX+" "+ke.circularPathData.sourceY+" L"+ke.circularPathData.leftInnerExtent+" "+ke.circularPathData.sourceY+" A"+ke.circularPathData.leftLargeArcRadius+" "+ke.circularPathData.leftSmallArcRadius+" 0 0 1 "+ke.circularPathData.leftFullExtent+" "+(ke.circularPathData.sourceY+ke.circularPathData.leftSmallArcRadius)+" L"+ke.circularPathData.leftFullExtent+" "+ke.circularPathData.verticalLeftInnerExtent+" A"+ke.circularPathData.leftLargeArcRadius+" "+ke.circularPathData.leftLargeArcRadius+" 0 0 1 "+ke.circularPathData.leftInnerExtent+" "+ke.circularPathData.verticalFullExtent+" L"+ke.circularPathData.rightInnerExtent+" "+ke.circularPathData.verticalFullExtent+" A"+ke.circularPathData.rightLargeArcRadius+" "+ke.circularPathData.rightLargeArcRadius+" 0 0 1 "+ke.circularPathData.rightFullExtent+" "+ke.circularPathData.verticalRightInnerExtent+" L"+ke.circularPathData.rightFullExtent+" "+(ke.circularPathData.targetY+ke.circularPathData.rightSmallArcRadius)+" A"+ke.circularPathData.rightLargeArcRadius+" "+ke.circularPathData.rightSmallArcRadius+" 0 0 1 "+ke.circularPathData.rightInnerExtent+" "+ke.circularPathData.targetY+" L"+ke.circularPathData.targetX+" "+ke.circularPathData.targetY}(we);else{var ye=(0,l.h5)().source(function(ke){return[ke.source.x0+(ke.source.x1-ke.source.x0),ke.y0]}).target(function(ke){return[ke.target.x0,ke.y1]});we.path=ye(we)}})}function F(le,de){return X(le)==X(de)?le.circularLinkType=="bottom"?U(le,de):D(le,de):X(de)-X(le)}function D(le,de){return le.y0-de.y0}function U(le,de){return de.y0-le.y0}function j(le,de){return le.y1-de.y1}function J(le,de){return de.y1-le.y1}function X(le){return le.target.column-le.source.column}function Z(le){return le.target.x0-le.source.x1}function Y(le,de){var Ce=O(le),xe=Z(de)/Math.tan(Ce);return ge(le)=="up"?le.y1+xe:le.y1-xe}function W(le,de){var Ce=O(le),xe=Z(de)/Math.tan(Ce);return ge(le)=="up"?le.y1-xe:le.y1+xe}function Q(le,de,Ce,xe){le.links.forEach(function(_e){if(!_e.circular&&_e.target.column-_e.source.column>1){var we=_e.source.column+1,Ae=_e.target.column-1,$=1,oe=Ae-we+1;for($=1;we<=Ae;we++,$++)le.nodes.forEach(function(pe){if(pe.column==we){var ye,ke=$/(oe+1),De=Math.pow(1-ke,3),Pe=3*ke*Math.pow(1-ke,2),Re=3*Math.pow(ke,2)*(1-ke),fe=Math.pow(ke,3),ve=De*_e.y0+Pe*_e.y0+Re*_e.y1+fe*_e.y1,Te=ve-_e.width/2,ze=ve+_e.width/2;Te>pe.y0&&Te<pe.y1?(ye=pe.y1-Te+10,ye=pe.circularLinkType=="bottom"?ye:-ye,pe=ne(pe,ye,de,Ce),le.nodes.forEach(function(He){var Ve,nt;c(He,xe)!=c(pe,xe)&&He.column==pe.column&&(nt=He,(Ve=pe).y0>nt.y0&&Ve.y0<nt.y1||Ve.y1>nt.y0&&Ve.y1<nt.y1||Ve.y0<nt.y0&&Ve.y1>nt.y1)&&ne(He,ye,de,Ce)})):(ze>pe.y0&&ze<pe.y1||Te<pe.y0&&ze>pe.y1)&&(ye=ze-pe.y0+10,pe=ne(pe,ye,de,Ce),le.nodes.forEach(function(He){c(He,xe)!=c(pe,xe)&&He.column==pe.column&&He.y0<pe.y1&&He.y1>pe.y1&&ne(He,ye,de,Ce)}))}})}})}function ne(le,de,Ce,xe){return le.y0+de>=Ce&&le.y1+de<=xe&&(le.y0=le.y0+de,le.y1=le.y1+de,le.targetLinks.forEach(function(_e){_e.y1=_e.y1+de}),le.sourceLinks.forEach(function(_e){_e.y0=_e.y0+de})),le}function re(le,de,Ce,xe){le.nodes.forEach(function(_e){xe&&_e.y+(_e.y1-_e.y0)>de&&(_e.y=_e.y-(_e.y+(_e.y1-_e.y0)-de));var we=le.links.filter(function(oe){return c(oe.source,Ce)==c(_e,Ce)}),Ae=we.length;Ae>1&&we.sort(function(oe,pe){if(!oe.circular&&!pe.circular){if(oe.target.column==pe.target.column||!se(oe,pe))return oe.y1-pe.y1;if(oe.target.column>pe.target.column){var ye=W(pe,oe);return oe.y1-ye}if(pe.target.column>oe.target.column)return W(oe,pe)-pe.y1}return oe.circular&&!pe.circular?oe.circularLinkType=="top"?-1:1:pe.circular&&!oe.circular?pe.circularLinkType=="top"?1:-1:oe.circular&&pe.circular?oe.circularLinkType===pe.circularLinkType&&oe.circularLinkType=="top"?oe.target.column===pe.target.column?oe.target.y1-pe.target.y1:pe.target.column-oe.target.column:oe.circularLinkType===pe.circularLinkType&&oe.circularLinkType=="bottom"?oe.target.column===pe.target.column?pe.target.y1-oe.target.y1:oe.target.column-pe.target.column:oe.circularLinkType=="top"?-1:1:void 0});var $=_e.y0;we.forEach(function(oe){oe.y0=$+oe.width/2,$+=oe.width}),we.forEach(function(oe,pe){if(oe.circularLinkType=="bottom"){for(var ye=pe+1,ke=0;ye<Ae;ye++)ke+=we[ye].width;oe.y0=_e.y1-ke-oe.width/2}})})}function ie(le,de,Ce){le.nodes.forEach(function(xe){var _e=le.links.filter(function($){return c($.target,Ce)==c(xe,Ce)}),we=_e.length;we>1&&_e.sort(function($,oe){if(!$.circular&&!oe.circular){if($.source.column==oe.source.column||!se($,oe))return $.y0-oe.y0;if(oe.source.column<$.source.column){var pe=Y(oe,$);return $.y0-pe}if($.source.column<oe.source.column)return Y($,oe)-oe.y0}return $.circular&&!oe.circular?$.circularLinkType=="top"?-1:1:oe.circular&&!$.circular?oe.circularLinkType=="top"?1:-1:$.circular&&oe.circular?$.circularLinkType===oe.circularLinkType&&$.circularLinkType=="top"?$.source.column===oe.source.column?$.source.y1-oe.source.y1:$.source.column-oe.source.column:$.circularLinkType===oe.circularLinkType&&$.circularLinkType=="bottom"?$.source.column===oe.source.column?$.source.y1-oe.source.y1:oe.source.column-$.source.column:$.circularLinkType=="top"?-1:1:void 0});var Ae=xe.y0;_e.forEach(function($){$.y1=Ae+$.width/2,Ae+=$.width}),_e.forEach(function($,oe){if($.circularLinkType=="bottom"){for(var pe=oe+1,ye=0;pe<we;pe++)ye+=_e[pe].width;$.y1=xe.y1-ye-$.width/2}})})}function se(le,de){return ge(le)==ge(de)}function ge(le){return le.y0-le.y1>0?"up":"down"}function ue(le,de){return c(le.source,de)==c(le.target,de)}function ce(le,de,Ce){var xe=le.nodes,_e=le.links,we=!1,Ae=!1;if(_e.forEach(function(pe){pe.circularLinkType=="top"?we=!0:pe.circularLinkType=="bottom"&&(Ae=!0)}),we==0||Ae==0){var $=(0,S.VV)(xe,function(pe){return pe.y0}),oe=(Ce-de)/((0,S.Fp)(xe,function(pe){return pe.y1})-$);xe.forEach(function(pe){var ye=(pe.y1-pe.y0)*oe;pe.y0=(pe.y0-$)*oe,pe.y1=pe.y0+ye}),_e.forEach(function(pe){pe.y0=(pe.y0-$)*oe,pe.y1=(pe.y1-$)*oe,pe.width=pe.width*oe})}}},30838:function(K,z,e){e.r(z),e.d(z,{sankey:function(){return y},sankeyCenter:function(){return s},sankeyJustify:function(){return d},sankeyLeft:function(){return T},sankeyLinkHorizontal:function(){return c},sankeyRight:function(){return b}});var S=e(33064),k=e(15140);function l(M){return M.target.depth}function T(M){return M.depth}function b(M,_){return _-1-M.height}function d(M,_){return M.sourceLinks.length?M.depth:_-1}function s(M){return M.targetLinks.length?M.depth:M.sourceLinks.length?(0,S.VV)(M.sourceLinks,l)-1:0}function t(M){return function(){return M}}function o(M,_){return n(M.source,_.source)||M.index-_.index}function r(M,_){return n(M.target,_.target)||M.index-_.index}function n(M,_){return M.y0-_.y0}function a(M){return M.value}function i(M){return(M.y0+M.y1)/2}function u(M){return i(M.source)*M.value}function h(M){return i(M.target)*M.value}function f(M){return M.index}function x(M){return M.nodes}function v(M){return M.links}function g(M,_){var E=M.get(_);if(!E)throw new Error("missing: "+_);return E}function y(){var M=0,_=0,E=1,L=1,C=24,O=8,I=f,N=d,R=x,V=v,F=32;function D(){var Y={nodes:R.apply(null,arguments),links:V.apply(null,arguments)};return U(Y),j(Y),J(Y),X(Y),Z(Y),Y}function U(Y){Y.nodes.forEach(function(Q,ne){Q.index=ne,Q.sourceLinks=[],Q.targetLinks=[]});var W=(0,k.UI)(Y.nodes,I);Y.links.forEach(function(Q,ne){Q.index=ne;var re=Q.source,ie=Q.target;typeof re!="object"&&(re=Q.source=g(W,re)),typeof ie!="object"&&(ie=Q.target=g(W,ie)),re.sourceLinks.push(Q),ie.targetLinks.push(Q)})}function j(Y){Y.nodes.forEach(function(W){W.value=Math.max((0,S.Sm)(W.sourceLinks,a),(0,S.Sm)(W.targetLinks,a))})}function J(Y){var W,Q,ne;for(W=Y.nodes,Q=[],ne=0;W.length;++ne,W=Q,Q=[])W.forEach(function(ie){ie.depth=ne,ie.sourceLinks.forEach(function(se){Q.indexOf(se.target)<0&&Q.push(se.target)})});for(W=Y.nodes,Q=[],ne=0;W.length;++ne,W=Q,Q=[])W.forEach(function(ie){ie.height=ne,ie.targetLinks.forEach(function(se){Q.indexOf(se.source)<0&&Q.push(se.source)})});var re=(E-M-C)/(ne-1);Y.nodes.forEach(function(ie){ie.x1=(ie.x0=M+Math.max(0,Math.min(ne-1,Math.floor(N.call(null,ie,ne))))*re)+C})}function X(Y){var W=(0,k.b1)().key(function(ge){return ge.x0}).sortKeys(S.j2).entries(Y.nodes).map(function(ge){return ge.values});(function(){var ge=(0,S.Fp)(W,function(le){return le.length}),ue=.6666666666666666*(L-_)/(ge-1);O>ue&&(O=ue);var ce=(0,S.VV)(W,function(le){return(L-_-(le.length-1)*O)/(0,S.Sm)(le,a)});W.forEach(function(le){le.forEach(function(de,Ce){de.y1=(de.y0=Ce)+de.value*ce})}),Y.links.forEach(function(le){le.width=le.value*ce})})(),se();for(var Q=1,ne=F;ne>0;--ne)ie(Q*=.99),se(),re(Q),se();function re(ge){W.forEach(function(ue){ue.forEach(function(ce){if(ce.targetLinks.length){var le=((0,S.Sm)(ce.targetLinks,u)/(0,S.Sm)(ce.targetLinks,a)-i(ce))*ge;ce.y0+=le,ce.y1+=le}})})}function ie(ge){W.slice().reverse().forEach(function(ue){ue.forEach(function(ce){if(ce.sourceLinks.length){var le=((0,S.Sm)(ce.sourceLinks,h)/(0,S.Sm)(ce.sourceLinks,a)-i(ce))*ge;ce.y0+=le,ce.y1+=le}})})}function se(){W.forEach(function(ge){var ue,ce,le,de=_,Ce=ge.length;for(ge.sort(n),le=0;le<Ce;++le)(ce=de-(ue=ge[le]).y0)>0&&(ue.y0+=ce,ue.y1+=ce),de=ue.y1+O;if((ce=de-O-L)>0)for(de=ue.y0-=ce,ue.y1-=ce,le=Ce-2;le>=0;--le)(ce=(ue=ge[le]).y1+O-de)>0&&(ue.y0-=ce,ue.y1-=ce),de=ue.y0})}}function Z(Y){Y.nodes.forEach(function(W){W.sourceLinks.sort(r),W.targetLinks.sort(o)}),Y.nodes.forEach(function(W){var Q=W.y0,ne=Q;W.sourceLinks.forEach(function(re){re.y0=Q+re.width/2,Q+=re.width}),W.targetLinks.forEach(function(re){re.y1=ne+re.width/2,ne+=re.width})})}return D.update=function(Y){return Z(Y),Y},D.nodeId=function(Y){return arguments.length?(I=typeof Y=="function"?Y:t(Y),D):I},D.nodeAlign=function(Y){return arguments.length?(N=typeof Y=="function"?Y:t(Y),D):N},D.nodeWidth=function(Y){return arguments.length?(C=+Y,D):C},D.nodePadding=function(Y){return arguments.length?(O=+Y,D):O},D.nodes=function(Y){return arguments.length?(R=typeof Y=="function"?Y:t(Y),D):R},D.links=function(Y){return arguments.length?(V=typeof Y=="function"?Y:t(Y),D):V},D.size=function(Y){return arguments.length?(M=_=0,E=+Y[0],L=+Y[1],D):[E-M,L-_]},D.extent=function(Y){return arguments.length?(M=+Y[0][0],E=+Y[1][0],_=+Y[0][1],L=+Y[1][1],D):[[M,_],[E,L]]},D.iterations=function(Y){return arguments.length?(F=+Y,D):F},D}var p=e(45879);function m(M){return[M.source.x1,M.y0]}function w(M){return[M.target.x0,M.y1]}function c(){return(0,p.h5)().source(m).target(w)}},39898:function(K,z,e){var S,k;(function(){var l={version:"3.8.0"},T=[].slice,b=function(ee){return T.call(ee)},d=self.document;function s(ee){return ee&&(ee.ownerDocument||ee.document||ee).documentElement}function t(ee){return ee&&(ee.ownerDocument&&ee.ownerDocument.defaultView||ee.document&&ee||ee.defaultView)}if(d)try{b(d.documentElement.childNodes)[0].nodeType}catch{b=function(he){for(var Me=he.length,Oe=new Array(Me);Me--;)Oe[Me]=he[Me];return Oe}}if(Date.now||(Date.now=function(){return+new Date}),d)try{d.createElement("DIV").style.setProperty("opacity",0,"")}catch{var o=this.Element.prototype,r=o.setAttribute,n=o.setAttributeNS,a=this.CSSStyleDeclaration.prototype,i=a.setProperty;o.setAttribute=function(he,Me){r.call(this,he,Me+"")},o.setAttributeNS=function(he,Me,Oe){n.call(this,he,Me,Oe+"")},a.setProperty=function(he,Me,Oe){i.call(this,he,Me+"",Oe)}}function u(ee,he){return ee<he?-1:ee>he?1:ee>=he?0:NaN}function h(ee){return ee===null?NaN:+ee}function f(ee){return!isNaN(ee)}function x(ee){return{left:function(he,Me,Oe,Fe){for(arguments.length<3&&(Oe=0),arguments.length<4&&(Fe=he.length);Oe<Fe;){var Ue=Oe+Fe>>>1;ee(he[Ue],Me)<0?Oe=Ue+1:Fe=Ue}return Oe},right:function(he,Me,Oe,Fe){for(arguments.length<3&&(Oe=0),arguments.length<4&&(Fe=he.length);Oe<Fe;){var Ue=Oe+Fe>>>1;ee(he[Ue],Me)>0?Fe=Ue:Oe=Ue+1}return Oe}}}l.ascending=u,l.descending=function(ee,he){return he<ee?-1:he>ee?1:he>=ee?0:NaN},l.min=function(ee,he){var Me,Oe,Fe=-1,Ue=ee.length;if(arguments.length===1){for(;++Fe<Ue;)if((Oe=ee[Fe])!=null&&Oe>=Oe){Me=Oe;break}for(;++Fe<Ue;)(Oe=ee[Fe])!=null&&Me>Oe&&(Me=Oe)}else{for(;++Fe<Ue;)if((Oe=he.call(ee,ee[Fe],Fe))!=null&&Oe>=Oe){Me=Oe;break}for(;++Fe<Ue;)(Oe=he.call(ee,ee[Fe],Fe))!=null&&Me>Oe&&(Me=Oe)}return Me},l.max=function(ee,he){var Me,Oe,Fe=-1,Ue=ee.length;if(arguments.length===1){for(;++Fe<Ue;)if((Oe=ee[Fe])!=null&&Oe>=Oe){Me=Oe;break}for(;++Fe<Ue;)(Oe=ee[Fe])!=null&&Oe>Me&&(Me=Oe)}else{for(;++Fe<Ue;)if((Oe=he.call(ee,ee[Fe],Fe))!=null&&Oe>=Oe){Me=Oe;break}for(;++Fe<Ue;)(Oe=he.call(ee,ee[Fe],Fe))!=null&&Oe>Me&&(Me=Oe)}return Me},l.extent=function(ee,he){var Me,Oe,Fe,Ue=-1,Ge=ee.length;if(arguments.length===1){for(;++Ue<Ge;)if((Oe=ee[Ue])!=null&&Oe>=Oe){Me=Fe=Oe;break}for(;++Ue<Ge;)(Oe=ee[Ue])!=null&&(Me>Oe&&(Me=Oe),Fe<Oe&&(Fe=Oe))}else{for(;++Ue<Ge;)if((Oe=he.call(ee,ee[Ue],Ue))!=null&&Oe>=Oe){Me=Fe=Oe;break}for(;++Ue<Ge;)(Oe=he.call(ee,ee[Ue],Ue))!=null&&(Me>Oe&&(Me=Oe),Fe<Oe&&(Fe=Oe))}return[Me,Fe]},l.sum=function(ee,he){var Me,Oe=0,Fe=ee.length,Ue=-1;if(arguments.length===1)for(;++Ue<Fe;)f(Me=+ee[Ue])&&(Oe+=Me);else for(;++Ue<Fe;)f(Me=+he.call(ee,ee[Ue],Ue))&&(Oe+=Me);return Oe},l.mean=function(ee,he){var Me,Oe=0,Fe=ee.length,Ue=-1,Ge=Fe;if(arguments.length===1)for(;++Ue<Fe;)f(Me=h(ee[Ue]))?Oe+=Me:--Ge;else for(;++Ue<Fe;)f(Me=h(he.call(ee,ee[Ue],Ue)))?Oe+=Me:--Ge;if(Ge)return Oe/Ge},l.quantile=function(ee,he){var Me=(ee.length-1)*he+1,Oe=Math.floor(Me),Fe=+ee[Oe-1],Ue=Me-Oe;return Ue?Fe+Ue*(ee[Oe]-Fe):Fe},l.median=function(ee,he){var Me,Oe=[],Fe=ee.length,Ue=-1;if(arguments.length===1)for(;++Ue<Fe;)f(Me=h(ee[Ue]))&&Oe.push(Me);else for(;++Ue<Fe;)f(Me=h(he.call(ee,ee[Ue],Ue)))&&Oe.push(Me);if(Oe.length)return l.quantile(Oe.sort(u),.5)},l.variance=function(ee,he){var Me,Oe,Fe=ee.length,Ue=0,Ge=0,Je=-1,rt=0;if(arguments.length===1)for(;++Je<Fe;)f(Me=h(ee[Je]))&&(Ge+=(Oe=Me-Ue)*(Me-(Ue+=Oe/++rt)));else for(;++Je<Fe;)f(Me=h(he.call(ee,ee[Je],Je)))&&(Ge+=(Oe=Me-Ue)*(Me-(Ue+=Oe/++rt)));if(rt>1)return Ge/(rt-1)},l.deviation=function(){var ee=l.variance.apply(this,arguments);return ee&&Math.sqrt(ee)};var v=x(u);function g(ee){return ee.length}l.bisectLeft=v.left,l.bisect=l.bisectRight=v.right,l.bisector=function(ee){return x(ee.length===1?function(he,Me){return u(ee(he),Me)}:ee)},l.shuffle=function(ee,he,Me){(Ue=arguments.length)<3&&(Me=ee.length,Ue<2&&(he=0));for(var Oe,Fe,Ue=Me-he;Ue;)Fe=Math.random()*Ue--|0,Oe=ee[Ue+he],ee[Ue+he]=ee[Fe+he],ee[Fe+he]=Oe;return ee},l.permute=function(ee,he){for(var Me=he.length,Oe=new Array(Me);Me--;)Oe[Me]=ee[he[Me]];return Oe},l.pairs=function(ee){for(var he=0,Me=ee.length-1,Oe=ee[0],Fe=new Array(Me<0?0:Me);he<Me;)Fe[he]=[Oe,Oe=ee[++he]];return Fe},l.transpose=function(ee){if(!(Fe=ee.length))return[];for(var he=-1,Me=l.min(ee,g),Oe=new Array(Me);++he<Me;)for(var Fe,Ue=-1,Ge=Oe[he]=new Array(Fe);++Ue<Fe;)Ge[Ue]=ee[Ue][he];return Oe},l.zip=function(){return l.transpose(arguments)},l.keys=function(ee){var he=[];for(var Me in ee)he.push(Me);return he},l.values=function(ee){var he=[];for(var Me in ee)he.push(ee[Me]);return he},l.entries=function(ee){var he=[];for(var Me in ee)he.push({key:Me,value:ee[Me]});return he},l.merge=function(ee){for(var he,Me,Oe,Fe=ee.length,Ue=-1,Ge=0;++Ue<Fe;)Ge+=ee[Ue].length;for(Me=new Array(Ge);--Fe>=0;)for(he=(Oe=ee[Fe]).length;--he>=0;)Me[--Ge]=Oe[he];return Me};var y=Math.abs;function p(ee){for(var he=1;ee*he%1;)he*=10;return he}function m(ee,he){for(var Me in he)Object.defineProperty(ee.prototype,Me,{value:he[Me],enumerable:!1})}function w(){this._=Object.create(null)}function c(ee){return(ee+="")=="__proto__"||ee[0]==="\0"?"\0"+ee:ee}function M(ee){return(ee+="")[0]==="\0"?ee.slice(1):ee}function _(ee){return c(ee)in this._}function E(ee){return(ee=c(ee))in this._&&delete this._[ee]}function L(){var ee=[];for(var he in this._)ee.push(M(he));return ee}function C(){var ee=0;for(var he in this._)++ee;return ee}function O(){for(var ee in this._)return!1;return!0}function I(){this._=Object.create(null)}function N(ee){return ee}function R(ee,he,Me){return function(){var Oe=Me.apply(he,arguments);return Oe===he?ee:Oe}}function V(ee,he){if(he in ee)return he;he=he.charAt(0).toUpperCase()+he.slice(1);for(var Me=0,Oe=F.length;Me<Oe;++Me){var Fe=F[Me]+he;if(Fe in ee)return Fe}}l.range=function(ee,he,Me){if(arguments.length<3&&(Me=1,arguments.length<2&&(he=ee,ee=0)),(he-ee)/Me==1/0)throw new Error("infinite range");var Oe,Fe=[],Ue=p(y(Me)),Ge=-1;if(ee*=Ue,he*=Ue,(Me*=Ue)<0)for(;(Oe=ee+Me*++Ge)>he;)Fe.push(Oe/Ue);else for(;(Oe=ee+Me*++Ge)<he;)Fe.push(Oe/Ue);return Fe},l.map=function(ee,he){var Me=new w;if(ee instanceof w)ee.forEach(function(Je,rt){Me.set(Je,rt)});else if(Array.isArray(ee)){var Oe,Fe=-1,Ue=ee.length;if(arguments.length===1)for(;++Fe<Ue;)Me.set(Fe,ee[Fe]);else for(;++Fe<Ue;)Me.set(he.call(ee,Oe=ee[Fe],Fe),Oe)}else for(var Ge in ee)Me.set(Ge,ee[Ge]);return Me},m(w,{has:_,get:function(ee){return this._[c(ee)]},set:function(ee,he){return this._[c(ee)]=he},remove:E,keys:L,values:function(){var ee=[];for(var he in this._)ee.push(this._[he]);return ee},entries:function(){var ee=[];for(var he in this._)ee.push({key:M(he),value:this._[he]});return ee},size:C,empty:O,forEach:function(ee){for(var he in this._)ee.call(this,M(he),this._[he])}}),l.nest=function(){var ee,he,Me={},Oe=[],Fe=[];function Ue(Je,rt,ct){if(ct>=Oe.length)return he?he.call(Me,rt):ee?rt.sort(ee):rt;for(var Ct,Dt,Ft,Wt,cn=-1,Xt=rt.length,tn=Oe[ct++],$t=new w;++cn<Xt;)(Wt=$t.get(Ct=tn(Dt=rt[cn])))?Wt.push(Dt):$t.set(Ct,[Dt]);return Je?(Dt=Je(),Ft=function(_n,dn){Dt.set(_n,Ue(Je,dn,ct))}):(Dt={},Ft=function(_n,dn){Dt[_n]=Ue(Je,dn,ct)}),$t.forEach(Ft),Dt}function Ge(Je,rt){if(rt>=Oe.length)return Je;var ct=[],Ct=Fe[rt++];return Je.forEach(function(Dt,Ft){ct.push({key:Dt,values:Ge(Ft,rt)})}),Ct?ct.sort(function(Dt,Ft){return Ct(Dt.key,Ft.key)}):ct}return Me.map=function(Je,rt){return Ue(rt,Je,0)},Me.entries=function(Je){return Ge(Ue(l.map,Je,0),0)},Me.key=function(Je){return Oe.push(Je),Me},Me.sortKeys=function(Je){return Fe[Oe.length-1]=Je,Me},Me.sortValues=function(Je){return ee=Je,Me},Me.rollup=function(Je){return he=Je,Me},Me},l.set=function(ee){var he=new I;if(ee)for(var Me=0,Oe=ee.length;Me<Oe;++Me)he.add(ee[Me]);return he},m(I,{has:_,add:function(ee){return this._[c(ee+="")]=!0,ee},remove:E,values:L,size:C,empty:O,forEach:function(ee){for(var he in this._)ee.call(this,M(he))}}),l.behavior={},l.rebind=function(ee,he){for(var Me,Oe=1,Fe=arguments.length;++Oe<Fe;)ee[Me=arguments[Oe]]=R(ee,he,he[Me]);return ee};var F=["webkit","ms","moz","Moz","o","O"];function D(){}function U(){}function j(ee){var he=[],Me=new w;function Oe(){for(var Fe,Ue=he,Ge=-1,Je=Ue.length;++Ge<Je;)(Fe=Ue[Ge].on)&&Fe.apply(this,arguments);return ee}return Oe.on=function(Fe,Ue){var Ge,Je=Me.get(Fe);return arguments.length<2?Je&&Je.on:(Je&&(Je.on=null,he=he.slice(0,Ge=he.indexOf(Je)).concat(he.slice(Ge+1)),Me.remove(Fe)),Ue&&he.push(Me.set(Fe,{on:Ue})),ee)},Oe}function J(){l.event.preventDefault()}function X(){for(var ee,he=l.event;ee=he.sourceEvent;)he=ee;return he}function Z(ee){for(var he=new U,Me=0,Oe=arguments.length;++Me<Oe;)he[arguments[Me]]=j(he);return he.of=function(Fe,Ue){return function(Ge){try{var Je=Ge.sourceEvent=l.event;Ge.target=ee,l.event=Ge,he[Ge.type].apply(Fe,Ue)}finally{l.event=Je}}},he}l.dispatch=function(){for(var ee=new U,he=-1,Me=arguments.length;++he<Me;)ee[arguments[he]]=j(ee);return ee},U.prototype.on=function(ee,he){var Me=ee.indexOf("."),Oe="";if(Me>=0&&(Oe=ee.slice(Me+1),ee=ee.slice(0,Me)),ee)return arguments.length<2?this[ee].on(Oe):this[ee].on(Oe,he);if(arguments.length===2){if(he==null)for(ee in this)this.hasOwnProperty(ee)&&this[ee].on(Oe,null);return this}},l.event=null,l.requote=function(ee){return ee.replace(Y,"\\$&")};var Y=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,W={}.__proto__?function(ee,he){ee.__proto__=he}:function(ee,he){for(var Me in he)ee[Me]=he[Me]};function Q(ee){return W(ee,se),ee}var ne=function(ee,he){return he.querySelector(ee)},re=function(ee,he){return he.querySelectorAll(ee)},ie=function(ee,he){var Me=ee.matches||ee[V(ee,"matchesSelector")];return ie=function(Oe,Fe){return Me.call(Oe,Fe)},ie(ee,he)};typeof Sizzle=="function"&&(ne=function(ee,he){return Sizzle(ee,he)[0]||null},re=Sizzle,ie=Sizzle.matchesSelector),l.selection=function(){return l.select(d.documentElement)};var se=l.selection.prototype=[];function ge(ee){return typeof ee=="function"?ee:function(){return ne(ee,this)}}function ue(ee){return typeof ee=="function"?ee:function(){return re(ee,this)}}se.select=function(ee){var he,Me,Oe,Fe,Ue=[];ee=ge(ee);for(var Ge=-1,Je=this.length;++Ge<Je;){Ue.push(he=[]),he.parentNode=(Oe=this[Ge]).parentNode;for(var rt=-1,ct=Oe.length;++rt<ct;)(Fe=Oe[rt])?(he.push(Me=ee.call(Fe,Fe.__data__,rt,Ge)),Me&&"__data__"in Fe&&(Me.__data__=Fe.__data__)):he.push(null)}return Q(Ue)},se.selectAll=function(ee){var he,Me,Oe=[];ee=ue(ee);for(var Fe=-1,Ue=this.length;++Fe<Ue;)for(var Ge=this[Fe],Je=-1,rt=Ge.length;++Je<rt;)(Me=Ge[Je])&&(Oe.push(he=b(ee.call(Me,Me.__data__,Je,Fe))),he.parentNode=Me);return Q(Oe)};var ce="http://www.w3.org/1999/xhtml",le={svg:"http://www.w3.org/2000/svg",xhtml:ce,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function de(ee,he){return ee=l.ns.qualify(ee),he==null?ee.local?function(){this.removeAttributeNS(ee.space,ee.local)}:function(){this.removeAttribute(ee)}:typeof he=="function"?ee.local?function(){var Me=he.apply(this,arguments);Me==null?this.removeAttributeNS(ee.space,ee.local):this.setAttributeNS(ee.space,ee.local,Me)}:function(){var Me=he.apply(this,arguments);Me==null?this.removeAttribute(ee):this.setAttribute(ee,Me)}:ee.local?function(){this.setAttributeNS(ee.space,ee.local,he)}:function(){this.setAttribute(ee,he)}}function Ce(ee){return ee.trim().replace(/\s+/g," ")}function xe(ee){return new RegExp("(?:^|\\s+)"+l.requote(ee)+"(?:\\s+|$)","g")}function _e(ee){return(ee+"").trim().split(/^|\s+/)}function we(ee,he){var Me=(ee=_e(ee).map(Ae)).length;return typeof he=="function"?function(){for(var Oe=-1,Fe=he.apply(this,arguments);++Oe<Me;)ee[Oe](this,Fe)}:function(){for(var Oe=-1;++Oe<Me;)ee[Oe](this,he)}}function Ae(ee){var he=xe(ee);return function(Me,Oe){if(Fe=Me.classList)return Oe?Fe.add(ee):Fe.remove(ee);var Fe=Me.getAttribute("class")||"";Oe?(he.lastIndex=0,he.test(Fe)||Me.setAttribute("class",Ce(Fe+" "+ee))):Me.setAttribute("class",Ce(Fe.replace(he," ")))}}function $(ee,he,Me){return he==null?function(){this.style.removeProperty(ee)}:typeof he=="function"?function(){var Oe=he.apply(this,arguments);Oe==null?this.style.removeProperty(ee):this.style.setProperty(ee,Oe,Me)}:function(){this.style.setProperty(ee,he,Me)}}function oe(ee,he){return he==null?function(){delete this[ee]}:typeof he=="function"?function(){var Me=he.apply(this,arguments);Me==null?delete this[ee]:this[ee]=Me}:function(){this[ee]=he}}function pe(ee){return typeof ee=="function"?ee:(ee=l.ns.qualify(ee)).local?function(){return this.ownerDocument.createElementNS(ee.space,ee.local)}:function(){var he=this.ownerDocument,Me=this.namespaceURI;return Me===ce&&he.documentElement.namespaceURI===ce?he.createElement(ee):he.createElementNS(Me,ee)}}function ye(){var ee=this.parentNode;ee&&ee.removeChild(this)}function ke(ee){return{__data__:ee}}function De(ee){return function(){return ie(this,ee)}}function Pe(ee){return arguments.length||(ee=u),function(he,Me){return he&&Me?ee(he.__data__,Me.__data__):!he-!Me}}function Re(ee,he){for(var Me=0,Oe=ee.length;Me<Oe;Me++)for(var Fe,Ue=ee[Me],Ge=0,Je=Ue.length;Ge<Je;Ge++)(Fe=Ue[Ge])&&he(Fe,Ge,Me);return ee}function fe(ee){return W(ee,ve),ee}l.ns={prefix:le,qualify:function(ee){var he=ee.indexOf(":"),Me=ee;return he>=0&&(Me=ee.slice(0,he))!=="xmlns"&&(ee=ee.slice(he+1)),le.hasOwnProperty(Me)?{space:le[Me],local:ee}:ee}},se.attr=function(ee,he){if(arguments.length<2){if(typeof ee=="string"){var Me=this.node();return(ee=l.ns.qualify(ee)).local?Me.getAttributeNS(ee.space,ee.local):Me.getAttribute(ee)}for(he in ee)this.each(de(he,ee[he]));return this}return this.each(de(ee,he))},se.classed=function(ee,he){if(arguments.length<2){if(typeof ee=="string"){var Me=this.node(),Oe=(ee=_e(ee)).length,Fe=-1;if(he=Me.classList){for(;++Fe<Oe;)if(!he.contains(ee[Fe]))return!1}else for(he=Me.getAttribute("class");++Fe<Oe;)if(!xe(ee[Fe]).test(he))return!1;return!0}for(he in ee)this.each(we(he,ee[he]));return this}return this.each(we(ee,he))},se.style=function(ee,he,Me){var Oe=arguments.length;if(Oe<3){if(typeof ee!="string"){for(Me in Oe<2&&(he=""),ee)this.each($(Me,ee[Me],he));return this}if(Oe<2){var Fe=this.node();return t(Fe).getComputedStyle(Fe,null).getPropertyValue(ee)}Me=""}return this.each($(ee,he,Me))},se.property=function(ee,he){if(arguments.length<2){if(typeof ee=="string")return this.node()[ee];for(he in ee)this.each(oe(he,ee[he]));return this}return this.each(oe(ee,he))},se.text=function(ee){return arguments.length?this.each(typeof ee=="function"?function(){var he=ee.apply(this,arguments);this.textContent=he??""}:ee==null?function(){this.textContent=""}:function(){this.textContent=ee}):this.node().textContent},se.html=function(ee){return arguments.length?this.each(typeof ee=="function"?function(){var he=ee.apply(this,arguments);this.innerHTML=he??""}:ee==null?function(){this.innerHTML=""}:function(){this.innerHTML=ee}):this.node().innerHTML},se.append=function(ee){return ee=pe(ee),this.select(function(){return this.appendChild(ee.apply(this,arguments))})},se.insert=function(ee,he){return ee=pe(ee),he=ge(he),this.select(function(){return this.insertBefore(ee.apply(this,arguments),he.apply(this,arguments)||null)})},se.remove=function(){return this.each(ye)},se.data=function(ee,he){var Me,Oe,Fe=-1,Ue=this.length;if(!arguments.length){for(ee=new Array(Ue=(Me=this[0]).length);++Fe<Ue;)(Oe=Me[Fe])&&(ee[Fe]=Oe.__data__);return ee}function Ge(Ct,Dt){var Ft,Wt,cn,Xt=Ct.length,tn=Dt.length,$t=Math.min(Xt,tn),_n=new Array(tn),dn=new Array(tn),Qt=new Array(Xt);if(he){var Cn,Dn=new w,Jn=new Array(Xt);for(Ft=-1;++Ft<Xt;)(Wt=Ct[Ft])&&(Dn.has(Cn=he.call(Wt,Wt.__data__,Ft))?Qt[Ft]=Wt:Dn.set(Cn,Wt),Jn[Ft]=Cn);for(Ft=-1;++Ft<tn;)(Wt=Dn.get(Cn=he.call(Dt,cn=Dt[Ft],Ft)))?Wt!==!0&&(_n[Ft]=Wt,Wt.__data__=cn):dn[Ft]=ke(cn),Dn.set(Cn,!0);for(Ft=-1;++Ft<Xt;)Ft in Jn&&Dn.get(Jn[Ft])!==!0&&(Qt[Ft]=Ct[Ft])}else{for(Ft=-1;++Ft<$t;)Wt=Ct[Ft],cn=Dt[Ft],Wt?(Wt.__data__=cn,_n[Ft]=Wt):dn[Ft]=ke(cn);for(;Ft<tn;++Ft)dn[Ft]=ke(Dt[Ft]);for(;Ft<Xt;++Ft)Qt[Ft]=Ct[Ft]}dn.update=_n,dn.parentNode=_n.parentNode=Qt.parentNode=Ct.parentNode,Je.push(dn),rt.push(_n),ct.push(Qt)}var Je=fe([]),rt=Q([]),ct=Q([]);if(typeof ee=="function")for(;++Fe<Ue;)Ge(Me=this[Fe],ee.call(Me,Me.parentNode.__data__,Fe));else for(;++Fe<Ue;)Ge(Me=this[Fe],ee);return rt.enter=function(){return Je},rt.exit=function(){return ct},rt},se.datum=function(ee){return arguments.length?this.property("__data__",ee):this.property("__data__")},se.filter=function(ee){var he,Me,Oe,Fe=[];typeof ee!="function"&&(ee=De(ee));for(var Ue=0,Ge=this.length;Ue<Ge;Ue++){Fe.push(he=[]),he.parentNode=(Me=this[Ue]).parentNode;for(var Je=0,rt=Me.length;Je<rt;Je++)(Oe=Me[Je])&&ee.call(Oe,Oe.__data__,Je,Ue)&&he.push(Oe)}return Q(Fe)},se.order=function(){for(var ee=-1,he=this.length;++ee<he;)for(var Me,Oe=this[ee],Fe=Oe.length-1,Ue=Oe[Fe];--Fe>=0;)(Me=Oe[Fe])&&(Ue&&Ue!==Me.nextSibling&&Ue.parentNode.insertBefore(Me,Ue),Ue=Me);return this},se.sort=function(ee){ee=Pe.apply(this,arguments);for(var he=-1,Me=this.length;++he<Me;)this[he].sort(ee);return this.order()},se.each=function(ee){return Re(this,function(he,Me,Oe){ee.call(he,he.__data__,Me,Oe)})},se.call=function(ee){var he=b(arguments);return ee.apply(he[0]=this,he),this},se.empty=function(){return!this.node()},se.node=function(){for(var ee=0,he=this.length;ee<he;ee++)for(var Me=this[ee],Oe=0,Fe=Me.length;Oe<Fe;Oe++){var Ue=Me[Oe];if(Ue)return Ue}return null},se.size=function(){var ee=0;return Re(this,function(){++ee}),ee};var ve=[];function Te(ee){var he,Me;return function(Oe,Fe,Ue){var Ge,Je=ee[Ue].update,rt=Je.length;for(Ue!=Me&&(Me=Ue,he=0),Fe>=he&&(he=Fe+1);!(Ge=Je[he])&&++he<rt;);return Ge}}function ze(ee,he,Me){var Oe="__on"+ee,Fe=ee.indexOf("."),Ue=Ve;Fe>0&&(ee=ee.slice(0,Fe));var Ge=He.get(ee);function Je(){var rt=this[Oe];rt&&(this.removeEventListener(ee,rt,rt.$),delete this[Oe])}return Ge&&(ee=Ge,Ue=nt),Fe?he?function(){var rt=Ue(he,b(arguments));Je.call(this),this.addEventListener(ee,this[Oe]=rt,rt.$=Me),rt._=he}:Je:he?D:function(){var rt,ct=new RegExp("^__on([^.]+)"+l.requote(ee)+"$");for(var Ct in this)if(rt=Ct.match(ct)){var Dt=this[Ct];this.removeEventListener(rt[1],Dt,Dt.$),delete this[Ct]}}}l.selection.enter=fe,l.selection.enter.prototype=ve,ve.append=se.append,ve.empty=se.empty,ve.node=se.node,ve.call=se.call,ve.size=se.size,ve.select=function(ee){for(var he,Me,Oe,Fe,Ue,Ge=[],Je=-1,rt=this.length;++Je<rt;){Oe=(Fe=this[Je]).update,Ge.push(he=[]),he.parentNode=Fe.parentNode;for(var ct=-1,Ct=Fe.length;++ct<Ct;)(Ue=Fe[ct])?(he.push(Oe[ct]=Me=ee.call(Fe.parentNode,Ue.__data__,ct,Je)),Me.__data__=Ue.__data__):he.push(null)}return Q(Ge)},ve.insert=function(ee,he){return arguments.length<2&&(he=Te(this)),se.insert.call(this,ee,he)},l.select=function(ee){var he;return typeof ee=="string"?(he=[ne(ee,d)]).parentNode=d.documentElement:(he=[ee]).parentNode=s(ee),Q([he])},l.selectAll=function(ee){var he;return typeof ee=="string"?(he=b(re(ee,d))).parentNode=d.documentElement:(he=b(ee)).parentNode=null,Q([he])},se.on=function(ee,he,Me){var Oe=arguments.length;if(Oe<3){if(typeof ee!="string"){for(Me in Oe<2&&(he=!1),ee)this.each(ze(Me,ee[Me],he));return this}if(Oe<2)return(Oe=this.node()["__on"+ee])&&Oe._;Me=!1}return this.each(ze(ee,he,Me))};var He=l.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ve(ee,he){return function(Me){var Oe=l.event;l.event=Me,he[0]=this.__data__;try{ee.apply(this,he)}finally{l.event=Oe}}}function nt(ee,he){var Me=Ve(ee,he);return function(Oe){var Fe=this,Ue=Oe.relatedTarget;Ue&&(Ue===Fe||8&Ue.compareDocumentPosition(Fe))||Me.call(Fe,Oe)}}d&&He.forEach(function(ee){"on"+ee in d&&He.remove(ee)});var tt,ot=0;function pt(ee){var he=".dragsuppress-"+ ++ot,Me="click"+he,Oe=l.select(t(ee)).on("touchmove"+he,J).on("dragstart"+he,J).on("selectstart"+he,J);if(tt==null&&(tt=!("onselectstart"in ee)&&V(ee.style,"userSelect")),tt){var Fe=s(ee).style,Ue=Fe[tt];Fe[tt]="none"}return function(Ge){if(Oe.on(he,null),tt&&(Fe[tt]=Ue),Ge){var Je=function(){Oe.on(Me,null)};Oe.on(Me,function(){J(),Je()},!0),setTimeout(Je,0)}}}l.mouse=function(ee){return yt(ee,X())};var Tt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function yt(ee,he){he.changedTouches&&(he=he.changedTouches[0]);var Me=ee.ownerSVGElement||ee;if(Me.createSVGPoint){var Oe=Me.createSVGPoint();if(Tt<0){var Fe=t(ee);if(Fe.scrollX||Fe.scrollY){var Ue=(Me=l.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Tt=!(Ue.f||Ue.e),Me.remove()}}return Tt?(Oe.x=he.pageX,Oe.y=he.pageY):(Oe.x=he.clientX,Oe.y=he.clientY),[(Oe=Oe.matrixTransform(ee.getScreenCTM().inverse())).x,Oe.y]}var Ge=ee.getBoundingClientRect();return[he.clientX-Ge.left-ee.clientLeft,he.clientY-Ge.top-ee.clientTop]}function dt(){return l.event.changedTouches[0].identifier}l.touch=function(ee,he,Me){if(arguments.length<3&&(Me=he,he=X().changedTouches),he){for(var Oe,Fe=0,Ue=he.length;Fe<Ue;++Fe)if((Oe=he[Fe]).identifier===Me)return yt(ee,Oe)}},l.behavior.drag=function(){var ee=Z(Fe,"drag","dragstart","dragend"),he=null,Me=Ue(D,l.mouse,t,"mousemove","mouseup"),Oe=Ue(dt,l.touch,N,"touchmove","touchend");function Fe(){this.on("mousedown.drag",Me).on("touchstart.drag",Oe)}function Ue(Ge,Je,rt,ct,Ct){return function(){var Dt,Ft=this,Wt=l.event.target.correspondingElement||l.event.target,cn=Ft.parentNode,Xt=ee.of(Ft,arguments),tn=0,$t=Ge(),_n=".drag"+($t==null?"":"-"+$t),dn=l.select(rt(Wt)).on(ct+_n,Dn).on(Ct+_n,Jn),Qt=pt(Wt),Cn=Je(cn,$t);function Dn(){var Kn,vr,yr=Je(cn,$t);yr&&(Kn=yr[0]-Cn[0],vr=yr[1]-Cn[1],tn|=Kn|vr,Cn=yr,Xt({type:"drag",x:yr[0]+Dt[0],y:yr[1]+Dt[1],dx:Kn,dy:vr}))}function Jn(){Je(cn,$t)&&(dn.on(ct+_n,null).on(Ct+_n,null),Qt(tn),Xt({type:"dragend"}))}Dt=he?[(Dt=he.apply(Ft,arguments)).x-Cn[0],Dt.y-Cn[1]]:[0,0],Xt({type:"dragstart"})}}return Fe.origin=function(Ge){return arguments.length?(he=Ge,Fe):he},l.rebind(Fe,ee,"on")},l.touches=function(ee,he){return arguments.length<2&&(he=X().touches),he?b(he).map(function(Me){var Oe=yt(ee,Me);return Oe.identifier=Me.identifier,Oe}):[]};var Pt=1e-6,Et=Math.PI,Ot=2*Et,Nt=Ot-Pt,zt=Et/2,Ze=Et/180,Ye=180/Et;function je(ee){return ee>1?zt:ee<-1?-zt:Math.asin(ee)}function Ke(ee){return((ee=Math.exp(ee))+1/ee)/2}var st=Math.SQRT2;l.interpolateZoom=function(ee,he){var Me,Oe,Fe=ee[0],Ue=ee[1],Ge=ee[2],Je=he[0],rt=he[1],ct=he[2],Ct=Je-Fe,Dt=rt-Ue,Ft=Ct*Ct+Dt*Dt;if(Ft<1e-12)Oe=Math.log(ct/Ge)/st,Me=function(_n){return[Fe+_n*Ct,Ue+_n*Dt,Ge*Math.exp(st*_n*Oe)]};else{var Wt=Math.sqrt(Ft),cn=(ct*ct-Ge*Ge+4*Ft)/(2*Ge*2*Wt),Xt=(ct*ct-Ge*Ge-4*Ft)/(2*ct*2*Wt),tn=Math.log(Math.sqrt(cn*cn+1)-cn),$t=Math.log(Math.sqrt(Xt*Xt+1)-Xt);Oe=($t-tn)/st,Me=function(_n){var dn,Qt=_n*Oe,Cn=Ke(tn),Dn=Ge/(2*Wt)*(Cn*(dn=st*Qt+tn,((dn=Math.exp(2*dn))-1)/(dn+1))-function(Jn){return((Jn=Math.exp(Jn))-1/Jn)/2}(tn));return[Fe+Dn*Ct,Ue+Dn*Dt,Ge*Cn/Ke(st*Qt+tn)]}}return Me.duration=1e3*Oe,Me},l.behavior.zoom=function(){var ee,he,Me,Oe,Fe,Ue,Ge,Je,rt,ct={x:0,y:0,k:1},Ct=[960,500],Dt=We,Ft=250,Wt=0,cn="mousedown.zoom",Xt="mousemove.zoom",tn="mouseup.zoom",$t="touchstart.zoom",_n=Z(dn,"zoomstart","zoom","zoomend");function dn(pr){pr.on(cn,gr).on(Ie+".zoom",Vr).on("dblclick.zoom",Hr).on($t,Sr)}function Qt(pr){return[(pr[0]-ct.x)/ct.k,(pr[1]-ct.y)/ct.k]}function Cn(pr){ct.k=Math.max(Dt[0],Math.min(Dt[1],pr))}function Dn(pr,Er){Er=function(Fr){return[Fr[0]*ct.k+ct.x,Fr[1]*ct.k+ct.y]}(Er),ct.x+=pr[0]-Er[0],ct.y+=pr[1]-Er[1]}function Jn(pr,Er,Fr,Dr){pr.__chart__={x:ct.x,y:ct.y,k:ct.k},Cn(Math.pow(2,Dr)),Dn(he=Er,Fr),pr=l.select(pr),Ft>0&&(pr=pr.transition().duration(Ft)),pr.call(dn.event)}function Kn(){Ge&&Ge.domain(Ue.range().map(function(pr){return(pr-ct.x)/ct.k}).map(Ue.invert)),rt&&rt.domain(Je.range().map(function(pr){return(pr-ct.y)/ct.k}).map(Je.invert))}function vr(pr){Wt++||pr({type:"zoomstart"})}function yr(pr){Kn(),pr({type:"zoom",scale:ct.k,translate:[ct.x,ct.y]})}function fr(pr){--Wt||(pr({type:"zoomend"}),he=null)}function gr(){var pr=this,Er=_n.of(pr,arguments),Fr=0,Dr=l.select(t(pr)).on(Xt,$r).on(tn,fi),Yr=Qt(l.mouse(pr)),Zr=pt(pr);function $r(){Fr=1,Dn(l.mouse(pr),Yr),yr(Er)}function fi(){Dr.on(Xt,null).on(tn,null),Zr(Fr),fr(Er)}di.call(pr),vr(Er)}function Sr(){var pr,Er=this,Fr=_n.of(Er,arguments),Dr={},Yr=0,Zr=".zoom-"+l.event.changedTouches[0].identifier,$r="touchmove"+Zr,fi="touchend"+Zr,bi=[],gi=l.select(Er),ui=pt(Er);function hi(){var Bi=l.touches(Er);return pr=ct.k,Bi.forEach(function(Nr){Nr.identifier in Dr&&(Dr[Nr.identifier]=Qt(Nr))}),Bi}function vi(){var Bi=l.event.target;l.select(Bi).on($r,Li).on(fi,So),bi.push(Bi);for(var Nr=l.event.changedTouches,Zi=0,ea=Nr.length;Zi<ea;++Zi)Dr[Nr[Zi].identifier]=null;var Mi=hi(),Za=Date.now();if(Mi.length===1){if(Za-Fe<500){var Wr=Mi[0];Jn(Er,Wr,Dr[Wr.identifier],Math.floor(Math.log(ct.k)/Math.LN2)+1),J()}Fe=Za}else if(Mi.length>1){Wr=Mi[0];var Ni=Mi[1],da=Wr[0]-Ni[0],Ds=Wr[1]-Ni[1];Yr=da*da+Ds*Ds}}function Li(){var Bi,Nr,Zi,ea,Mi=l.touches(Er);di.call(Er);for(var Za=0,Wr=Mi.length;Za<Wr;++Za,ea=null)if(Zi=Mi[Za],ea=Dr[Zi.identifier]){if(Nr)break;Bi=Zi,Nr=ea}if(ea){var Ni=(Ni=Zi[0]-Bi[0])*Ni+(Ni=Zi[1]-Bi[1])*Ni,da=Yr&&Math.sqrt(Ni/Yr);Bi=[(Bi[0]+Zi[0])/2,(Bi[1]+Zi[1])/2],Nr=[(Nr[0]+ea[0])/2,(Nr[1]+ea[1])/2],Cn(da*pr)}Fe=null,Dn(Bi,Nr),yr(Fr)}function So(){if(l.event.touches.length){for(var Bi=l.event.changedTouches,Nr=0,Zi=Bi.length;Nr<Zi;++Nr)delete Dr[Bi[Nr].identifier];for(var ea in Dr)return void hi()}l.selectAll(bi).on(Zr,null),gi.on(cn,gr).on($t,Sr),ui(),fr(Fr)}vi(),vr(Fr),gi.on(cn,null).on($t,vi)}function Vr(){var pr=_n.of(this,arguments);Oe?clearTimeout(Oe):(di.call(this),ee=Qt(he=Me||l.mouse(this)),vr(pr)),Oe=setTimeout(function(){Oe=null,fr(pr)},50),J(),Cn(Math.pow(2,.002*Se())*ct.k),Dn(he,ee),yr(pr)}function Hr(){var pr=l.mouse(this),Er=Math.log(ct.k)/Math.LN2;Jn(this,pr,Qt(pr),l.event.shiftKey?Math.ceil(Er)-1:Math.floor(Er)+1)}return Ie||(Ie="onwheel"in d?(Se=function(){return-l.event.deltaY*(l.event.deltaMode?120:1)},"wheel"):"onmousewheel"in d?(Se=function(){return l.event.wheelDelta},"mousewheel"):(Se=function(){return-l.event.detail},"MozMousePixelScroll")),dn.event=function(pr){pr.each(function(){var Er=_n.of(this,arguments),Fr=ct;$e?l.select(this).transition().each("start.zoom",function(){ct=this.__chart__||{x:0,y:0,k:1},vr(Er)}).tween("zoom:zoom",function(){var Dr=Ct[0],Yr=Ct[1],Zr=he?he[0]:Dr/2,$r=he?he[1]:Yr/2,fi=l.interpolateZoom([(Zr-ct.x)/ct.k,($r-ct.y)/ct.k,Dr/ct.k],[(Zr-Fr.x)/Fr.k,($r-Fr.y)/Fr.k,Dr/Fr.k]);return function(bi){var gi=fi(bi),ui=Dr/gi[2];this.__chart__=ct={x:Zr-gi[0]*ui,y:$r-gi[1]*ui,k:ui},yr(Er)}}).each("interrupt.zoom",function(){fr(Er)}).each("end.zoom",function(){fr(Er)}):(this.__chart__=ct,vr(Er),yr(Er),fr(Er))})},dn.translate=function(pr){return arguments.length?(ct={x:+pr[0],y:+pr[1],k:ct.k},Kn(),dn):[ct.x,ct.y]},dn.scale=function(pr){return arguments.length?(ct={x:ct.x,y:ct.y,k:null},Cn(+pr),Kn(),dn):ct.k},dn.scaleExtent=function(pr){return arguments.length?(Dt=pr==null?We:[+pr[0],+pr[1]],dn):Dt},dn.center=function(pr){return arguments.length?(Me=pr&&[+pr[0],+pr[1]],dn):Me},dn.size=function(pr){return arguments.length?(Ct=pr&&[+pr[0],+pr[1]],dn):Ct},dn.duration=function(pr){return arguments.length?(Ft=+pr,dn):Ft},dn.x=function(pr){return arguments.length?(Ge=pr,Ue=pr.copy(),ct={x:0,y:0,k:1},dn):Ge},dn.y=function(pr){return arguments.length?(rt=pr,Je=pr.copy(),ct={x:0,y:0,k:1},dn):rt},l.rebind(dn,_n,"on")};var Se,Ie,We=[0,1/0];function it(){}function lt(ee,he,Me){return this instanceof lt?(this.h=+ee,this.s=+he,void(this.l=+Me)):arguments.length<2?ee instanceof lt?new lt(ee.h,ee.s,ee.l):on(""+ee,sn,lt):new lt(ee,he,Me)}l.color=it,it.prototype.toString=function(){return this.rgb()+""},l.hsl=lt;var gt=lt.prototype=new it;function At(ee,he,Me){var Oe,Fe;function Ue(Ge){return Math.round(255*function(Je){return Je>360?Je-=360:Je<0&&(Je+=360),Je<60?Oe+(Fe-Oe)*Je/60:Je<180?Fe:Je<240?Oe+(Fe-Oe)*(240-Je)/60:Oe}(Ge))}return ee=isNaN(ee)?0:(ee%=360)<0?ee+360:ee,he=isNaN(he)||he<0?0:he>1?1:he,Oe=2*(Me=Me<0?0:Me>1?1:Me)-(Fe=Me<=.5?Me*(1+he):Me+he-Me*he),new xn(Ue(ee+120),Ue(ee),Ue(ee-120))}function kt(ee,he,Me){return this instanceof kt?(this.h=+ee,this.c=+he,void(this.l=+Me)):arguments.length<2?ee instanceof kt?new kt(ee.h,ee.c,ee.l):Yt(ee instanceof vt?ee.l:(ee=En((ee=l.rgb(ee)).r,ee.g,ee.b)).l,ee.a,ee.b):new kt(ee,he,Me)}gt.brighter=function(ee){return ee=Math.pow(.7,arguments.length?ee:1),new lt(this.h,this.s,this.l/ee)},gt.darker=function(ee){return ee=Math.pow(.7,arguments.length?ee:1),new lt(this.h,this.s,ee*this.l)},gt.rgb=function(){return At(this.h,this.s,this.l)},l.hcl=kt;var ht=kt.prototype=new it;function St(ee,he,Me){return isNaN(ee)&&(ee=0),isNaN(he)&&(he=0),new vt(Me,Math.cos(ee*=Ze)*he,Math.sin(ee)*he)}function vt(ee,he,Me){return this instanceof vt?(this.l=+ee,this.a=+he,void(this.b=+Me)):arguments.length<2?ee instanceof vt?new vt(ee.l,ee.a,ee.b):ee instanceof kt?St(ee.h,ee.c,ee.l):En((ee=xn(ee)).r,ee.g,ee.b):new vt(ee,he,Me)}ht.brighter=function(ee){return new kt(this.h,this.c,Math.min(100,this.l+Mt*(arguments.length?ee:1)))},ht.darker=function(ee){return new kt(this.h,this.c,Math.max(0,this.l-Mt*(arguments.length?ee:1)))},ht.rgb=function(){return St(this.h,this.c,this.l).rgb()},l.lab=vt;var Mt=18,It=.95047,Ut=1.08883,jt=vt.prototype=new it;function qt(ee,he,Me){var Oe=(ee+16)/116,Fe=Oe+he/500,Ue=Oe-Me/200;return new xn(nn(3.2404542*(Fe=Kt(Fe)*It)-1.5371385*(Oe=1*Kt(Oe))-.4985314*(Ue=Kt(Ue)*Ut)),nn(-.969266*Fe+1.8760108*Oe+.041556*Ue),nn(.0556434*Fe-.2040259*Oe+1.0572252*Ue))}function Yt(ee,he,Me){return ee>0?new kt(Math.atan2(Me,he)*Ye,Math.sqrt(he*he+Me*Me),ee):new kt(NaN,NaN,ee)}function Kt(ee){return ee>.206893034?ee*ee*ee:(ee-.13793103448275862)/7.787037}function pn(ee){return ee>.008856?Math.pow(ee,.3333333333333333):7.787037*ee+.13793103448275862}function nn(ee){return Math.round(255*(ee<=.00304?12.92*ee:1.055*Math.pow(ee,.4166666666666667)-.055))}function xn(ee,he,Me){return this instanceof xn?(this.r=~~ee,this.g=~~he,void(this.b=~~Me)):arguments.length<2?ee instanceof xn?new xn(ee.r,ee.g,ee.b):on(""+ee,xn,At):new xn(ee,he,Me)}function jn(ee){return new xn(ee>>16,ee>>8&255,255&ee)}function mn(ee){return jn(ee)+""}jt.brighter=function(ee){return new vt(Math.min(100,this.l+Mt*(arguments.length?ee:1)),this.a,this.b)},jt.darker=function(ee){return new vt(Math.max(0,this.l-Mt*(arguments.length?ee:1)),this.a,this.b)},jt.rgb=function(){return qt(this.l,this.a,this.b)},l.rgb=xn;var en=xn.prototype=new it;function vn(ee){return ee<16?"0"+Math.max(0,ee).toString(16):Math.min(255,ee).toString(16)}function on(ee,he,Me){var Oe,Fe,Ue,Ge=0,Je=0,rt=0;if(Oe=/([a-z]+)\((.*)\)/.exec(ee=ee.toLowerCase()))switch(Fe=Oe[2].split(","),Oe[1]){case"hsl":return Me(parseFloat(Fe[0]),parseFloat(Fe[1])/100,parseFloat(Fe[2])/100);case"rgb":return he(zn(Fe[0]),zn(Fe[1]),zn(Fe[2]))}return(Ue=Fn.get(ee))?he(Ue.r,Ue.g,Ue.b):(ee==null||ee.charAt(0)!=="#"||isNaN(Ue=parseInt(ee.slice(1),16))||(ee.length===4?(Ge=(3840&Ue)>>4,Ge|=Ge>>4,Je=240&Ue,Je|=Je>>4,rt=15&Ue,rt|=rt<<4):ee.length===7&&(Ge=(16711680&Ue)>>16,Je=(65280&Ue)>>8,rt=255&Ue)),he(Ge,Je,rt))}function sn(ee,he,Me){var Oe,Fe,Ue=Math.min(ee/=255,he/=255,Me/=255),Ge=Math.max(ee,he,Me),Je=Ge-Ue,rt=(Ge+Ue)/2;return Je?(Fe=rt<.5?Je/(Ge+Ue):Je/(2-Ge-Ue),Oe=ee==Ge?(he-Me)/Je+(he<Me?6:0):he==Ge?(Me-ee)/Je+2:(ee-he)/Je+4,Oe*=60):(Oe=NaN,Fe=rt>0&&rt<1?0:Oe),new lt(Oe,Fe,rt)}function En(ee,he,Me){var Oe=pn((.4124564*(ee=kn(ee))+.3575761*(he=kn(he))+.1804375*(Me=kn(Me)))/It),Fe=pn((.2126729*ee+.7151522*he+.072175*Me)/1);return vt(116*Fe-16,500*(Oe-Fe),200*(Fe-pn((.0193339*ee+.119192*he+.9503041*Me)/Ut)))}function kn(ee){return(ee/=255)<=.04045?ee/12.92:Math.pow((ee+.055)/1.055,2.4)}function zn(ee){var he=parseFloat(ee);return ee.charAt(ee.length-1)==="%"?Math.round(2.55*he):he}en.brighter=function(ee){ee=Math.pow(.7,arguments.length?ee:1);var he=this.r,Me=this.g,Oe=this.b,Fe=30;return he||Me||Oe?(he&&he<Fe&&(he=Fe),Me&&Me<Fe&&(Me=Fe),Oe&&Oe<Fe&&(Oe=Fe),new xn(Math.min(255,he/ee),Math.min(255,Me/ee),Math.min(255,Oe/ee))):new xn(Fe,Fe,Fe)},en.darker=function(ee){return new xn((ee=Math.pow(.7,arguments.length?ee:1))*this.r,ee*this.g,ee*this.b)},en.hsl=function(){return sn(this.r,this.g,this.b)},en.toString=function(){return"#"+vn(this.r)+vn(this.g)+vn(this.b)};var Fn=l.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Bn(ee){return typeof ee=="function"?ee:function(){return ee}}function er(ee){return function(he,Me,Oe){return arguments.length===2&&typeof Me=="function"&&(Oe=Me,Me=null),Xn(he,Me,ee,Oe)}}function Xn(ee,he,Me,Oe){var Fe={},Ue=l.dispatch("beforesend","progress","load","error"),Ge={},Je=new XMLHttpRequest,rt=null;function ct(){var Ct,Dt=Je.status;if(!Dt&&function(Ft){var Wt=Ft.responseType;return Wt&&Wt!=="text"?Ft.response:Ft.responseText}(Je)||Dt>=200&&Dt<300||Dt===304){try{Ct=Me.call(Fe,Je)}catch(Ft){return void Ue.error.call(Fe,Ft)}Ue.load.call(Fe,Ct)}else Ue.error.call(Fe,Je)}return self.XDomainRequest&&!("withCredentials"in Je)&&/^(http(s)?:)?\/\//.test(ee)&&(Je=new XDomainRequest),"onload"in Je?Je.onload=Je.onerror=ct:Je.onreadystatechange=function(){Je.readyState>3&&ct()},Je.onprogress=function(Ct){var Dt=l.event;l.event=Ct;try{Ue.progress.call(Fe,Je)}finally{l.event=Dt}},Fe.header=function(Ct,Dt){return Ct=(Ct+"").toLowerCase(),arguments.length<2?Ge[Ct]:(Dt==null?delete Ge[Ct]:Ge[Ct]=Dt+"",Fe)},Fe.mimeType=function(Ct){return arguments.length?(he=Ct==null?null:Ct+"",Fe):he},Fe.responseType=function(Ct){return arguments.length?(rt=Ct,Fe):rt},Fe.response=function(Ct){return Me=Ct,Fe},["get","post"].forEach(function(Ct){Fe[Ct]=function(){return Fe.send.apply(Fe,[Ct].concat(b(arguments)))}}),Fe.send=function(Ct,Dt,Ft){if(arguments.length===2&&typeof Dt=="function"&&(Ft=Dt,Dt=null),Je.open(Ct,ee,!0),he==null||"accept"in Ge||(Ge.accept=he+",*/*"),Je.setRequestHeader)for(var Wt in Ge)Je.setRequestHeader(Wt,Ge[Wt]);return he!=null&&Je.overrideMimeType&&Je.overrideMimeType(he),rt!=null&&(Je.responseType=rt),Ft!=null&&Fe.on("error",Ft).on("load",function(cn){Ft(null,cn)}),Ue.beforesend.call(Fe,Je),Je.send(Dt??null),Fe},Fe.abort=function(){return Je.abort(),Fe},l.rebind(Fe,Ue,"on"),Oe==null?Fe:Fe.get(function(Ct){return Ct.length===1?function(Dt,Ft){Ct(Dt==null?Ft:null)}:Ct}(Oe))}Fn.forEach(function(ee,he){Fn.set(ee,jn(he))}),l.functor=Bn,l.xhr=er(N),l.dsv=function(ee,he){var Me=new RegExp('["'+ee+`
]`),Oe=ee.charCodeAt(0);function Fe(ct,Ct,Dt){arguments.length<3&&(Dt=Ct,Ct=null);var Ft=Xn(ct,he,Ct==null?Ue:Ge(Ct),Dt);return Ft.row=function(Wt){return arguments.length?Ft.response((Ct=Wt)==null?Ue:Ge(Wt)):Ct},Ft}function Ue(ct){return Fe.parse(ct.responseText)}function Ge(ct){return function(Ct){return Fe.parse(Ct.responseText,ct)}}function Je(ct){return ct.map(rt).join(ee)}function rt(ct){return Me.test(ct)?'"'+ct.replace(/\"/g,'""')+'"':ct}return Fe.parse=function(ct,Ct){var Dt;return Fe.parseRows(ct,function(Ft,Wt){if(Dt)return Dt(Ft,Wt-1);var cn=function(Xt){for(var tn={},$t=Ft.length,_n=0;_n<$t;++_n)tn[Ft[_n]]=Xt[_n];return tn};Dt=Ct?function(Xt,tn){return Ct(cn(Xt),tn)}:cn})},Fe.parseRows=function(ct,Ct){var Dt,Ft,Wt={},cn={},Xt=[],tn=ct.length,$t=0,_n=0;function dn(){if($t>=tn)return cn;if(Ft)return Ft=!1,Wt;var Cn=$t;if(ct.charCodeAt(Cn)===34){for(var Dn=Cn;Dn++<tn;)if(ct.charCodeAt(Dn)===34){if(ct.charCodeAt(Dn+1)!==34)break;++Dn}return $t=Dn+2,(Jn=ct.charCodeAt(Dn+1))===13?(Ft=!0,ct.charCodeAt(Dn+2)===10&&++$t):Jn===10&&(Ft=!0),ct.slice(Cn+1,Dn).replace(/""/g,'"')}for(;$t<tn;){var Jn,Kn=1;if((Jn=ct.charCodeAt($t++))===10)Ft=!0;else if(Jn===13)Ft=!0,ct.charCodeAt($t)===10&&(++$t,++Kn);else if(Jn!==Oe)continue;return ct.slice(Cn,$t-Kn)}return ct.slice(Cn)}for(;(Dt=dn())!==cn;){for(var Qt=[];Dt!==Wt&&Dt!==cn;)Qt.push(Dt),Dt=dn();Ct&&(Qt=Ct(Qt,_n++))==null||Xt.push(Qt)}return Xt},Fe.format=function(ct){if(Array.isArray(ct[0]))return Fe.formatRows(ct);var Ct=new I,Dt=[];return ct.forEach(function(Ft){for(var Wt in Ft)Ct.has(Wt)||Dt.push(Ct.add(Wt))}),[Dt.map(rt).join(ee)].concat(ct.map(function(Ft){return Dt.map(function(Wt){return rt(Ft[Wt])}).join(ee)})).join(`
`)},Fe.formatRows=function(ct){return ct.map(Je).join(`
`)},Fe},l.csv=l.dsv(",","text/csv"),l.tsv=l.dsv("	","text/tab-separated-values");var mr,ur,$n,lr,hr=this[V(this,"requestAnimationFrame")]||function(ee){setTimeout(ee,17)};function Gt(ee,he,Me){var Oe=arguments.length;Oe<2&&(he=0),Oe<3&&(Me=Date.now());var Fe=Me+he,Ue={c:ee,t:Fe,n:null};return ur?ur.n=Ue:mr=Ue,ur=Ue,$n||(lr=clearTimeout(lr),$n=1,hr(hn)),Ue}function hn(){var ee=An(),he=Tn()-ee;he>24?(isFinite(he)&&(clearTimeout(lr),lr=setTimeout(hn,he)),$n=0):($n=1,hr(hn))}function An(){for(var ee=Date.now(),he=mr;he;)ee>=he.t&&he.c(ee-he.t)&&(he.c=null),he=he.n;return ee}function Tn(){for(var ee,he=mr,Me=1/0;he;)he.c?(he.t<Me&&(Me=he.t),he=(ee=he).n):he=ee?ee.n=he.n:mr=he.n;return ur=ee,Me}function Rn(ee){return ee[0]}function qn(ee){return ee[1]}function Un(ee){for(var he,Me,Oe,Fe=ee.length,Ue=[0,1],Ge=2,Je=2;Je<Fe;Je++){for(;Ge>1&&(he=ee[Ue[Ge-2]],Me=ee[Ue[Ge-1]],Oe=ee[Je],(Me[0]-he[0])*(Oe[1]-he[1])-(Me[1]-he[1])*(Oe[0]-he[0])<=0);)--Ge;Ue[Ge++]=Je}return Ue.slice(0,Ge)}function Yn(ee,he){return ee[0]-he[0]||ee[1]-he[1]}l.timer=function(){Gt.apply(this,arguments)},l.timer.flush=function(){An(),Tn()},l.round=function(ee,he){return he?Math.round(ee*(he=Math.pow(10,he)))/he:Math.round(ee)},l.geom={},l.geom.hull=function(ee){var he=Rn,Me=qn;if(arguments.length)return Oe(ee);function Oe(Fe){if(Fe.length<3)return[];var Ue,Ge=Bn(he),Je=Bn(Me),rt=Fe.length,ct=[],Ct=[];for(Ue=0;Ue<rt;Ue++)ct.push([+Ge.call(this,Fe[Ue],Ue),+Je.call(this,Fe[Ue],Ue),Ue]);for(ct.sort(Yn),Ue=0;Ue<rt;Ue++)Ct.push([ct[Ue][0],-ct[Ue][1]]);var Dt=Un(ct),Ft=Un(Ct),Wt=Ft[0]===Dt[0],cn=Ft[Ft.length-1]===Dt[Dt.length-1],Xt=[];for(Ue=Dt.length-1;Ue>=0;--Ue)Xt.push(Fe[ct[Dt[Ue]][2]]);for(Ue=+Wt;Ue<Ft.length-cn;++Ue)Xt.push(Fe[ct[Ft[Ue]][2]]);return Xt}return Oe.x=function(Fe){return arguments.length?(he=Fe,Oe):he},Oe.y=function(Fe){return arguments.length?(Me=Fe,Oe):Me},Oe},l.geom.polygon=function(ee){return W(ee,or),ee};var or=l.geom.polygon.prototype=[];function Jt(ee,he,Me){return(Me[0]-he[0])*(ee[1]-he[1])<(Me[1]-he[1])*(ee[0]-he[0])}function Mn(ee,he,Me,Oe){var Fe=ee[0],Ue=Me[0],Ge=he[0]-Fe,Je=Oe[0]-Ue,rt=ee[1],ct=Me[1],Ct=he[1]-rt,Dt=Oe[1]-ct,Ft=(Je*(rt-ct)-Dt*(Fe-Ue))/(Dt*Ge-Je*Ct);return[Fe+Ft*Ge,rt+Ft*Ct]}function Rt(ee){var he=ee[0],Me=ee[ee.length-1];return!(he[0]-Me[0]||he[1]-Me[1])}or.area=function(){for(var ee,he=-1,Me=this.length,Oe=this[Me-1],Fe=0;++he<Me;)ee=Oe,Oe=this[he],Fe+=ee[1]*Oe[0]-ee[0]*Oe[1];return .5*Fe},or.centroid=function(ee){var he,Me,Oe=-1,Fe=this.length,Ue=0,Ge=0,Je=this[Fe-1];for(arguments.length||(ee=-1/(6*this.area()));++Oe<Fe;)he=Je,Je=this[Oe],Me=he[0]*Je[1]-Je[0]*he[1],Ue+=(he[0]+Je[0])*Me,Ge+=(he[1]+Je[1])*Me;return[Ue*ee,Ge*ee]},or.clip=function(ee){for(var he,Me,Oe,Fe,Ue,Ge,Je=Rt(ee),rt=-1,ct=this.length-Rt(this),Ct=this[ct-1];++rt<ct;){for(he=ee.slice(),ee.length=0,Fe=this[rt],Ue=he[(Oe=he.length-Je)-1],Me=-1;++Me<Oe;)Jt(Ge=he[Me],Ct,Fe)?(Jt(Ue,Ct,Fe)||ee.push(Mn(Ue,Ge,Ct,Fe)),ee.push(Ge)):Jt(Ue,Ct,Fe)&&ee.push(Mn(Ue,Ge,Ct,Fe)),Ue=Ge;Je&&ee.push(ee[0]),Ct=Fe}return ee};var Zt,rn,Ln,Sn,wn,ln=[],gn=[];function un(){Qr(this),this.edge=this.site=this.circle=null}function fn(ee){var he=ln.pop()||new un;return he.site=ee,he}function bn(ee){cr(ee),Ln.remove(ee),ln.push(ee),Qr(ee)}function In(ee){var he=ee.circle,Me=he.x,Oe=he.cy,Fe={x:Me,y:Oe},Ue=ee.P,Ge=ee.N,Je=[ee];bn(ee);for(var rt=Ue;rt.circle&&y(Me-rt.circle.x)<Pt&&y(Oe-rt.circle.cy)<Pt;)Ue=rt.P,Je.unshift(rt),bn(rt),rt=Ue;Je.unshift(rt),cr(rt);for(var ct=Ge;ct.circle&&y(Me-ct.circle.x)<Pt&&y(Oe-ct.circle.cy)<Pt;)Ge=ct.N,Je.push(ct),bn(ct),ct=Ge;Je.push(ct),cr(ct);var Ct,Dt=Je.length;for(Ct=1;Ct<Dt;++Ct)ct=Je[Ct],rt=Je[Ct-1],sr(ct.edge,rt.site,ct.site,Fe);rt=Je[0],(ct=Je[Dt-1]).edge=Tr(rt.site,ct.site,null,Fe),ir(rt),ir(ct)}function Hn(ee){for(var he,Me,Oe,Fe,Ue=ee.x,Ge=ee.y,Je=Ln._;Je;)if((Oe=Wn(Je,Ge)-Ue)>Pt)Je=Je.L;else{if(!((Fe=Ue-Gn(Je,Ge))>Pt)){Oe>-Pt?(he=Je.P,Me=Je):Fe>-Pt?(he=Je,Me=Je.N):he=Me=Je;break}if(!Je.R){he=Je;break}Je=Je.R}var rt=fn(ee);if(Ln.insert(he,rt),he||Me){if(he===Me)return cr(he),Me=fn(he.site),Ln.insert(rt,Me),rt.edge=Me.edge=Tr(he.site,rt.site),ir(he),void ir(Me);if(Me){cr(he),cr(Me);var ct=he.site,Ct=ct.x,Dt=ct.y,Ft=ee.x-Ct,Wt=ee.y-Dt,cn=Me.site,Xt=cn.x-Ct,tn=cn.y-Dt,$t=2*(Ft*tn-Wt*Xt),_n=Ft*Ft+Wt*Wt,dn=Xt*Xt+tn*tn,Qt={x:(tn*_n-Wt*dn)/$t+Ct,y:(Ft*dn-Xt*_n)/$t+Dt};sr(Me.edge,ct,cn,Qt),rt.edge=Tr(ct,ee,null,Qt),Me.edge=Tr(ee,cn,null,Qt),ir(he),ir(Me)}else rt.edge=Tr(he.site,rt.site)}}function Wn(ee,he){var Me=ee.site,Oe=Me.x,Fe=Me.y,Ue=Fe-he;if(!Ue)return Oe;var Ge=ee.P;if(!Ge)return-1/0;var Je=(Me=Ge.site).x,rt=Me.y,ct=rt-he;if(!ct)return Je;var Ct=Je-Oe,Dt=1/Ue-1/ct,Ft=Ct/ct;return Dt?(-Ft+Math.sqrt(Ft*Ft-2*Dt*(Ct*Ct/(-2*ct)-rt+ct/2+Fe-Ue/2)))/Dt+Oe:(Oe+Je)/2}function Gn(ee,he){var Me=ee.N;if(Me)return Wn(Me,he);var Oe=ee.site;return Oe.y===he?Oe.x:1/0}function nr(ee){this.site=ee,this.edges=[]}function tr(ee,he){return he.angle-ee.angle}function ar(){Qr(this),this.x=this.y=this.arc=this.site=this.cy=null}function ir(ee){var he=ee.P,Me=ee.N;if(he&&Me){var Oe=he.site,Fe=ee.site,Ue=Me.site;if(Oe!==Ue){var Ge=Fe.x,Je=Fe.y,rt=Oe.x-Ge,ct=Oe.y-Je,Ct=Ue.x-Ge,Dt=2*(rt*(tn=Ue.y-Je)-ct*Ct);if(!(Dt>=-1e-12)){var Ft=rt*rt+ct*ct,Wt=Ct*Ct+tn*tn,cn=(tn*Ft-ct*Wt)/Dt,Xt=(rt*Wt-Ct*Ft)/Dt,tn=Xt+Je,$t=gn.pop()||new ar;$t.arc=ee,$t.site=Fe,$t.x=cn+Ge,$t.y=tn+Math.sqrt(cn*cn+Xt*Xt),$t.cy=tn,ee.circle=$t;for(var _n=null,dn=wn._;dn;)if($t.y<dn.y||$t.y===dn.y&&$t.x<=dn.x){if(!dn.L){_n=dn.P;break}dn=dn.L}else{if(!dn.R){_n=dn;break}dn=dn.R}wn.insert(_n,$t),_n||(Sn=$t)}}}}function cr(ee){var he=ee.circle;he&&(he.P||(Sn=he.N),wn.remove(he),gn.push(he),Qr(he),ee.circle=null)}function br(ee,he){var Me=ee.b;if(Me)return!0;var Oe,Fe,Ue=ee.a,Ge=he[0][0],Je=he[1][0],rt=he[0][1],ct=he[1][1],Ct=ee.l,Dt=ee.r,Ft=Ct.x,Wt=Ct.y,cn=Dt.x,Xt=Dt.y,tn=(Ft+cn)/2,$t=(Wt+Xt)/2;if(Xt===Wt){if(tn<Ge||tn>=Je)return;if(Ft>cn){if(Ue){if(Ue.y>=ct)return}else Ue={x:tn,y:rt};Me={x:tn,y:ct}}else{if(Ue){if(Ue.y<rt)return}else Ue={x:tn,y:ct};Me={x:tn,y:rt}}}else if(Fe=$t-(Oe=(Ft-cn)/(Xt-Wt))*tn,Oe<-1||Oe>1)if(Ft>cn){if(Ue){if(Ue.y>=ct)return}else Ue={x:(rt-Fe)/Oe,y:rt};Me={x:(ct-Fe)/Oe,y:ct}}else{if(Ue){if(Ue.y<rt)return}else Ue={x:(ct-Fe)/Oe,y:ct};Me={x:(rt-Fe)/Oe,y:rt}}else if(Wt<Xt){if(Ue){if(Ue.x>=Je)return}else Ue={x:Ge,y:Oe*Ge+Fe};Me={x:Je,y:Oe*Je+Fe}}else{if(Ue){if(Ue.x<Ge)return}else Ue={x:Je,y:Oe*Je+Fe};Me={x:Ge,y:Oe*Ge+Fe}}return ee.a=Ue,ee.b=Me,!0}function xr(ee,he){this.l=ee,this.r=he,this.a=this.b=null}function Tr(ee,he,Me,Oe){var Fe=new xr(ee,he);return Zt.push(Fe),Me&&sr(Fe,ee,he,Me),Oe&&sr(Fe,he,ee,Oe),rn[ee.i].edges.push(new kr(Fe,ee,he)),rn[he.i].edges.push(new kr(Fe,he,ee)),Fe}function sr(ee,he,Me,Oe){ee.a||ee.b?ee.l===Me?ee.b=Oe:ee.a=Oe:(ee.a=Oe,ee.l=he,ee.r=Me)}function kr(ee,he,Me){var Oe=ee.a,Fe=ee.b;this.edge=ee,this.site=he,this.angle=Me?Math.atan2(Me.y-he.y,Me.x-he.x):ee.l===he?Math.atan2(Fe.x-Oe.x,Oe.y-Fe.y):Math.atan2(Oe.x-Fe.x,Fe.y-Oe.y)}function Rr(){this._=null}function Qr(ee){ee.U=ee.C=ee.L=ee.R=ee.P=ee.N=null}function ci(ee,he){var Me=he,Oe=he.R,Fe=Me.U;Fe?Fe.L===Me?Fe.L=Oe:Fe.R=Oe:ee._=Oe,Oe.U=Fe,Me.U=Oe,Me.R=Oe.L,Me.R&&(Me.R.U=Me),Oe.L=Me}function pi(ee,he){var Me=he,Oe=he.L,Fe=Me.U;Fe?Fe.L===Me?Fe.L=Oe:Fe.R=Oe:ee._=Oe,Oe.U=Fe,Me.U=Oe,Me.L=Oe.R,Me.L&&(Me.L.U=Me),Oe.R=Me}function qi(ee){for(;ee.L;)ee=ee.L;return ee}function Ei(ee,he){var Me,Oe,Fe,Ue=ee.sort(oi).pop();for(Zt=[],rn=new Array(ee.length),Ln=new Rr,wn=new Rr;;)if(Fe=Sn,Ue&&(!Fe||Ue.y<Fe.y||Ue.y===Fe.y&&Ue.x<Fe.x))Ue.x===Me&&Ue.y===Oe||(rn[Ue.i]=new nr(Ue),Hn(Ue),Me=Ue.x,Oe=Ue.y),Ue=ee.pop();else{if(!Fe)break;In(Fe.arc)}he&&(function(Je){for(var rt,ct,Ct,Dt,Ft,Wt=Zt,cn=(ct=Je[0][0],Ct=Je[0][1],Dt=Je[1][0],Ft=Je[1][1],function(tn){var $t,_n=tn.a,dn=tn.b,Qt=_n.x,Cn=_n.y,Dn=0,Jn=1,Kn=dn.x-Qt,vr=dn.y-Cn;if($t=ct-Qt,Kn||!($t>0)){if($t/=Kn,Kn<0){if($t<Dn)return;$t<Jn&&(Jn=$t)}else if(Kn>0){if($t>Jn)return;$t>Dn&&(Dn=$t)}if($t=Dt-Qt,Kn||!($t<0)){if($t/=Kn,Kn<0){if($t>Jn)return;$t>Dn&&(Dn=$t)}else if(Kn>0){if($t<Dn)return;$t<Jn&&(Jn=$t)}if($t=Ct-Cn,vr||!($t>0)){if($t/=vr,vr<0){if($t<Dn)return;$t<Jn&&(Jn=$t)}else if(vr>0){if($t>Jn)return;$t>Dn&&(Dn=$t)}if($t=Ft-Cn,vr||!($t<0)){if($t/=vr,vr<0){if($t>Jn)return;$t>Dn&&(Dn=$t)}else if(vr>0){if($t<Dn)return;$t<Jn&&(Jn=$t)}return Dn>0&&(tn.a={x:Qt+Dn*Kn,y:Cn+Dn*vr}),Jn<1&&(tn.b={x:Qt+Jn*Kn,y:Cn+Jn*vr}),tn}}}}}),Xt=Wt.length;Xt--;)(!br(rt=Wt[Xt],Je)||!cn(rt)||y(rt.a.x-rt.b.x)<Pt&&y(rt.a.y-rt.b.y)<Pt)&&(rt.a=rt.b=null,Wt.splice(Xt,1))}(he),function(Je){for(var rt,ct,Ct,Dt,Ft,Wt,cn,Xt,tn,$t,_n=Je[0][0],dn=Je[1][0],Qt=Je[0][1],Cn=Je[1][1],Dn=rn,Jn=Dn.length;Jn--;)if((Ft=Dn[Jn])&&Ft.prepare())for(Xt=(cn=Ft.edges).length,Wt=0;Wt<Xt;)Ct=($t=cn[Wt].end()).x,Dt=$t.y,rt=(tn=cn[++Wt%Xt].start()).x,ct=tn.y,(y(Ct-rt)>Pt||y(Dt-ct)>Pt)&&(cn.splice(Wt,0,new kr((Kn=Ft.site,vr=$t,yr=y(Ct-_n)<Pt&&Cn-Dt>Pt?{x:_n,y:y(rt-_n)<Pt?ct:Cn}:y(Dt-Cn)<Pt&&dn-Ct>Pt?{x:y(ct-Cn)<Pt?rt:dn,y:Cn}:y(Ct-dn)<Pt&&Dt-Qt>Pt?{x:dn,y:y(rt-dn)<Pt?ct:Qt}:y(Dt-Qt)<Pt&&Ct-_n>Pt?{x:y(ct-Qt)<Pt?rt:_n,y:Qt}:null,fr=void 0,(fr=new xr(Kn,null)).a=vr,fr.b=yr,Zt.push(fr),fr),Ft.site,null)),++Xt);var Kn,vr,yr,fr}(he));var Ge={cells:rn,edges:Zt};return Ln=wn=Zt=rn=null,Ge}function oi(ee,he){return he.y-ee.y||he.x-ee.x}nr.prototype.prepare=function(){for(var ee,he=this.edges,Me=he.length;Me--;)(ee=he[Me].edge).b&&ee.a||he.splice(Me,1);return he.sort(tr),he.length},kr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Rr.prototype={insert:function(ee,he){var Me,Oe,Fe;if(ee){if(he.P=ee,he.N=ee.N,ee.N&&(ee.N.P=he),ee.N=he,ee.R){for(ee=ee.R;ee.L;)ee=ee.L;ee.L=he}else ee.R=he;Me=ee}else this._?(ee=qi(this._),he.P=null,he.N=ee,ee.P=ee.L=he,Me=ee):(he.P=he.N=null,this._=he,Me=null);for(he.L=he.R=null,he.U=Me,he.C=!0,ee=he;Me&&Me.C;)Me===(Oe=Me.U).L?(Fe=Oe.R)&&Fe.C?(Me.C=Fe.C=!1,Oe.C=!0,ee=Oe):(ee===Me.R&&(ci(this,Me),Me=(ee=Me).U),Me.C=!1,Oe.C=!0,pi(this,Oe)):(Fe=Oe.L)&&Fe.C?(Me.C=Fe.C=!1,Oe.C=!0,ee=Oe):(ee===Me.L&&(pi(this,Me),Me=(ee=Me).U),Me.C=!1,Oe.C=!0,ci(this,Oe)),Me=ee.U;this._.C=!1},remove:function(ee){ee.N&&(ee.N.P=ee.P),ee.P&&(ee.P.N=ee.N),ee.N=ee.P=null;var he,Me,Oe,Fe=ee.U,Ue=ee.L,Ge=ee.R;if(Me=Ue?Ge?qi(Ge):Ue:Ge,Fe?Fe.L===ee?Fe.L=Me:Fe.R=Me:this._=Me,Ue&&Ge?(Oe=Me.C,Me.C=ee.C,Me.L=Ue,Ue.U=Me,Me!==Ge?(Fe=Me.U,Me.U=ee.U,ee=Me.R,Fe.L=ee,Me.R=Ge,Ge.U=Me):(Me.U=Fe,Fe=Me,ee=Me.R)):(Oe=ee.C,ee=Me),ee&&(ee.U=Fe),!Oe)if(ee&&ee.C)ee.C=!1;else{do{if(ee===this._)break;if(ee===Fe.L){if((he=Fe.R).C&&(he.C=!1,Fe.C=!0,ci(this,Fe),he=Fe.R),he.L&&he.L.C||he.R&&he.R.C){he.R&&he.R.C||(he.L.C=!1,he.C=!0,pi(this,he),he=Fe.R),he.C=Fe.C,Fe.C=he.R.C=!1,ci(this,Fe),ee=this._;break}}else if((he=Fe.L).C&&(he.C=!1,Fe.C=!0,pi(this,Fe),he=Fe.L),he.L&&he.L.C||he.R&&he.R.C){he.L&&he.L.C||(he.R.C=!1,he.C=!0,ci(this,he),he=Fe.L),he.C=Fe.C,Fe.C=he.L.C=!1,pi(this,Fe),ee=this._;break}he.C=!0,ee=Fe,Fe=Fe.U}while(!ee.C);ee&&(ee.C=!1)}}},l.geom.voronoi=function(ee){var he=Rn,Me=qn,Oe=he,Fe=Me,Ue=la;if(ee)return Ge(ee);function Ge(rt){var ct=new Array(rt.length),Ct=Ue[0][0],Dt=Ue[0][1],Ft=Ue[1][0],Wt=Ue[1][1];return Ei(Je(rt),Ue).cells.forEach(function(cn,Xt){var tn=cn.edges,$t=cn.site;(ct[Xt]=tn.length?tn.map(function(_n){var dn=_n.start();return[dn.x,dn.y]}):$t.x>=Ct&&$t.x<=Ft&&$t.y>=Dt&&$t.y<=Wt?[[Ct,Wt],[Ft,Wt],[Ft,Dt],[Ct,Dt]]:[]).point=rt[Xt]}),ct}function Je(rt){return rt.map(function(ct,Ct){return{x:Math.round(Oe(ct,Ct)/Pt)*Pt,y:Math.round(Fe(ct,Ct)/Pt)*Pt,i:Ct}})}return Ge.links=function(rt){return Ei(Je(rt)).edges.filter(function(ct){return ct.l&&ct.r}).map(function(ct){return{source:rt[ct.l.i],target:rt[ct.r.i]}})},Ge.triangles=function(rt){var ct=[];return Ei(Je(rt)).cells.forEach(function(Ct,Dt){for(var Ft,Wt,cn,Xt,tn=Ct.site,$t=Ct.edges.sort(tr),_n=-1,dn=$t.length,Qt=$t[dn-1].edge,Cn=Qt.l===tn?Qt.r:Qt.l;++_n<dn;)Ft=Cn,Cn=(Qt=$t[_n].edge).l===tn?Qt.r:Qt.l,Dt<Ft.i&&Dt<Cn.i&&(cn=Ft,Xt=Cn,((Wt=tn).x-Xt.x)*(cn.y-Wt.y)-(Wt.x-cn.x)*(Xt.y-Wt.y)<0)&&ct.push([rt[Dt],rt[Ft.i],rt[Cn.i]])}),ct},Ge.x=function(rt){return arguments.length?(Oe=Bn(he=rt),Ge):he},Ge.y=function(rt){return arguments.length?(Fe=Bn(Me=rt),Ge):Me},Ge.clipExtent=function(rt){return arguments.length?(Ue=rt??la,Ge):Ue===la?null:Ue},Ge.size=function(rt){return arguments.length?Ge.clipExtent(rt&&[[0,0],rt]):Ue===la?null:Ue&&Ue[1]},Ge};var la=[[-1e6,-1e6],[1e6,1e6]];function Aa(ee){return ee.x}function no(ee){return ee.y}function Go(ee,he,Me,Oe,Fe,Ue){if(!ee(he,Me,Oe,Fe,Ue)){var Ge=.5*(Me+Fe),Je=.5*(Oe+Ue),rt=he.nodes;rt[0]&&Go(ee,rt[0],Me,Oe,Ge,Je),rt[1]&&Go(ee,rt[1],Ge,Oe,Fe,Je),rt[2]&&Go(ee,rt[2],Me,Je,Ge,Ue),rt[3]&&Go(ee,rt[3],Ge,Je,Fe,Ue)}}function il(ee,he,Me,Oe,Fe,Ue,Ge){var Je,rt=1/0;return function ct(Ct,Dt,Ft,Wt,cn){if(!(Dt>Ue||Ft>Ge||Wt<Oe||cn<Fe)){if(Xt=Ct.point){var Xt,tn=he-Ct.x,$t=Me-Ct.y,_n=tn*tn+$t*$t;if(_n<rt){var dn=Math.sqrt(rt=_n);Oe=he-dn,Fe=Me-dn,Ue=he+dn,Ge=Me+dn,Je=Xt}}for(var Qt=Ct.nodes,Cn=.5*(Dt+Wt),Dn=.5*(Ft+cn),Jn=(Me>=Dn)<<1|he>=Cn,Kn=Jn+4;Jn<Kn;++Jn)if(Ct=Qt[3&Jn])switch(3&Jn){case 0:ct(Ct,Dt,Ft,Cn,Dn);break;case 1:ct(Ct,Cn,Ft,Wt,Dn);break;case 2:ct(Ct,Dt,Dn,Cn,cn);break;case 3:ct(Ct,Cn,Dn,Wt,cn)}}}(ee,Oe,Fe,Ue,Ge),Je}function Us(ee,he){ee=l.rgb(ee),he=l.rgb(he);var Me=ee.r,Oe=ee.g,Fe=ee.b,Ue=he.r-Me,Ge=he.g-Oe,Je=he.b-Fe;return function(rt){return"#"+vn(Math.round(Me+Ue*rt))+vn(Math.round(Oe+Ge*rt))+vn(Math.round(Fe+Je*rt))}}function Zo(ee,he){var Me,Oe={},Fe={};for(Me in ee)Me in he?Oe[Me]=xa(ee[Me],he[Me]):Fe[Me]=ee[Me];for(Me in he)Me in ee||(Fe[Me]=he[Me]);return function(Ue){for(Me in Oe)Fe[Me]=Oe[Me](Ue);return Fe}}function Ma(ee,he){return ee=+ee,he=+he,function(Me){return ee*(1-Me)+he*Me}}function Vs(ee,he){var Me,Oe,Fe,Ue=Di.lastIndex=ss.lastIndex=0,Ge=-1,Je=[],rt=[];for(ee+="",he+="";(Me=Di.exec(ee))&&(Oe=ss.exec(he));)(Fe=Oe.index)>Ue&&(Fe=he.slice(Ue,Fe),Je[Ge]?Je[Ge]+=Fe:Je[++Ge]=Fe),(Me=Me[0])===(Oe=Oe[0])?Je[Ge]?Je[Ge]+=Oe:Je[++Ge]=Oe:(Je[++Ge]=null,rt.push({i:Ge,x:Ma(Me,Oe)})),Ue=ss.lastIndex;return Ue<he.length&&(Fe=he.slice(Ue),Je[Ge]?Je[Ge]+=Fe:Je[++Ge]=Fe),Je.length<2?rt[0]?(he=rt[0].x,function(ct){return he(ct)+""}):function(){return he}:(he=rt.length,function(ct){for(var Ct,Dt=0;Dt<he;++Dt)Je[(Ct=rt[Dt]).i]=Ct.x(ct);return Je.join("")})}l.geom.delaunay=function(ee){return l.geom.voronoi().triangles(ee)},l.geom.quadtree=function(ee,he,Me,Oe,Fe){var Ue,Ge=Rn,Je=qn;if(Ue=arguments.length)return Ge=Aa,Je=no,Ue===3&&(Fe=Me,Oe=he,Me=he=0),rt(ee);function rt(ct){var Ct,Dt,Ft,Wt,cn,Xt,tn,$t,_n,dn=Bn(Ge),Qt=Bn(Je);if(he!=null)Xt=he,tn=Me,$t=Oe,_n=Fe;else if($t=_n=-(Xt=tn=1/0),Dt=[],Ft=[],cn=ct.length,Ue)for(Wt=0;Wt<cn;++Wt)(Ct=ct[Wt]).x<Xt&&(Xt=Ct.x),Ct.y<tn&&(tn=Ct.y),Ct.x>$t&&($t=Ct.x),Ct.y>_n&&(_n=Ct.y),Dt.push(Ct.x),Ft.push(Ct.y);else for(Wt=0;Wt<cn;++Wt){var Cn=+dn(Ct=ct[Wt],Wt),Dn=+Qt(Ct,Wt);Cn<Xt&&(Xt=Cn),Dn<tn&&(tn=Dn),Cn>$t&&($t=Cn),Dn>_n&&(_n=Dn),Dt.push(Cn),Ft.push(Dn)}var Jn=$t-Xt,Kn=_n-tn;function vr(gr,Sr,Vr,Hr,pr,Er,Fr,Dr){if(!isNaN(Vr)&&!isNaN(Hr))if(gr.leaf){var Yr=gr.x,Zr=gr.y;if(Yr!=null)if(y(Yr-Vr)+y(Zr-Hr)<.01)yr(gr,Sr,Vr,Hr,pr,Er,Fr,Dr);else{var $r=gr.point;gr.x=gr.y=gr.point=null,yr(gr,$r,Yr,Zr,pr,Er,Fr,Dr),yr(gr,Sr,Vr,Hr,pr,Er,Fr,Dr)}else gr.x=Vr,gr.y=Hr,gr.point=Sr}else yr(gr,Sr,Vr,Hr,pr,Er,Fr,Dr)}function yr(gr,Sr,Vr,Hr,pr,Er,Fr,Dr){var Yr=.5*(pr+Fr),Zr=.5*(Er+Dr),$r=Vr>=Yr,fi=Hr>=Zr,bi=fi<<1|$r;gr.leaf=!1,$r?pr=Yr:Fr=Yr,fi?Er=Zr:Dr=Zr,vr(gr=gr.nodes[bi]||(gr.nodes[bi]={leaf:!0,nodes:[],point:null,x:null,y:null}),Sr,Vr,Hr,pr,Er,Fr,Dr)}Jn>Kn?_n=tn+Jn:$t=Xt+Kn;var fr={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(gr){vr(fr,gr,+dn(gr,++Wt),+Qt(gr,Wt),Xt,tn,$t,_n)},visit:function(gr){Go(gr,fr,Xt,tn,$t,_n)},find:function(gr){return il(fr,gr[0],gr[1],Xt,tn,$t,_n)}};if(Wt=-1,he==null){for(;++Wt<cn;)vr(fr,ct[Wt],Dt[Wt],Ft[Wt],Xt,tn,$t,_n);--Wt}else ct.forEach(fr.add);return Dt=Ft=ct=Ct=null,fr}return rt.x=function(ct){return arguments.length?(Ge=ct,rt):Ge},rt.y=function(ct){return arguments.length?(Je=ct,rt):Je},rt.extent=function(ct){return arguments.length?(ct==null?he=Me=Oe=Fe=null:(he=+ct[0][0],Me=+ct[0][1],Oe=+ct[1][0],Fe=+ct[1][1]),rt):he==null?null:[[he,Me],[Oe,Fe]]},rt.size=function(ct){return arguments.length?(ct==null?he=Me=Oe=Fe=null:(he=Me=0,Oe=+ct[0],Fe=+ct[1]),rt):he==null?null:[Oe-he,Fe-Me]},rt},l.interpolateRgb=Us,l.interpolateObject=Zo,l.interpolateNumber=Ma,l.interpolateString=Vs;var Di=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ss=new RegExp(Di.source,"g");function xa(ee,he){for(var Me,Oe=l.interpolators.length;--Oe>=0&&!(Me=l.interpolators[Oe](ee,he)););return Me}function Sa(ee,he){var Me,Oe=[],Fe=[],Ue=ee.length,Ge=he.length,Je=Math.min(ee.length,he.length);for(Me=0;Me<Je;++Me)Oe.push(xa(ee[Me],he[Me]));for(;Me<Ue;++Me)Fe[Me]=ee[Me];for(;Me<Ge;++Me)Fe[Me]=he[Me];return function(rt){for(Me=0;Me<Je;++Me)Fe[Me]=Oe[Me](rt);return Fe}}l.interpolate=xa,l.interpolators=[function(ee,he){var Me=typeof he;return(Me==="string"?Fn.has(he.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(he)?Us:Vs:he instanceof it?Us:Array.isArray(he)?Sa:Me==="object"&&isNaN(he)?Zo:Ma)(ee,he)}],l.interpolateArray=Sa;var mo=function(){return N},ei=l.map({linear:mo,poly:function(ee){return function(he){return Math.pow(he,ee)}},quad:function(){return ls},cubic:function(){return al},sin:function(){return ol},exp:function(){return sl},circle:function(){return vl},elastic:function(ee,he){var Me;return arguments.length<2&&(he=.45),arguments.length?Me=he/Ot*Math.asin(1/ee):(ee=1,Me=he/4),function(Oe){return 1+ee*Math.pow(2,-10*Oe)*Math.sin((Oe-Me)*Ot/he)}},back:function(ee){return ee||(ee=1.70158),function(he){return he*he*((ee+1)*he-ee)}},bounce:function(){return Hs}}),yo=l.map({in:N,out:Va,"in-out":Xa,"out-in":function(ee){return Xa(Va(ee))}});function Pa(ee){return function(he){return he<=0?0:he>=1?1:ee(he)}}function Va(ee){return function(he){return 1-ee(1-he)}}function Xa(ee){return function(he){return .5*(he<.5?ee(2*he):2-ee(2-2*he))}}function ls(ee){return ee*ee}function al(ee){return ee*ee*ee}function ro(ee){if(ee<=0)return 0;if(ee>=1)return 1;var he=ee*ee,Me=he*ee;return 4*(ee<.5?Me:3*(ee-he)+Me-.75)}function ol(ee){return 1-Math.cos(ee*zt)}function sl(ee){return Math.pow(2,10*(ee-1))}function vl(ee){return 1-Math.sqrt(1-ee*ee)}function Hs(ee){return ee<.36363636363636365?7.5625*ee*ee:ee<.7272727272727273?7.5625*(ee-=.5454545454545454)*ee+.75:ee<.9090909090909091?7.5625*(ee-=.8181818181818182)*ee+.9375:7.5625*(ee-=.9545454545454546)*ee+.984375}function ll(ee,he){return he-=ee,function(Me){return Math.round(ee+he*Me)}}function qs(ee){var he,Me,Oe,Fe=[ee.a,ee.b],Ue=[ee.c,ee.d],Ge=ao(Fe),Je=io(Fe,Ue),rt=ao(((he=Ue)[0]+=(Oe=-Je)*(Me=Fe)[0],he[1]+=Oe*Me[1],he))||0;Fe[0]*Ue[1]<Ue[0]*Fe[1]&&(Fe[0]*=-1,Fe[1]*=-1,Ge*=-1,Je*=-1),this.rotate=(Ge?Math.atan2(Fe[1],Fe[0]):Math.atan2(-Ue[0],Ue[1]))*Ye,this.translate=[ee.e,ee.f],this.scale=[Ge,rt],this.skew=rt?Math.atan2(Je,rt)*Ye:0}function io(ee,he){return ee[0]*he[0]+ee[1]*he[1]}function ao(ee){var he=Math.sqrt(io(ee,ee));return he&&(ee[0]/=he,ee[1]/=he),he}l.ease=function(ee){var he=ee.indexOf("-"),Me=he>=0?ee.slice(0,he):ee,Oe=he>=0?ee.slice(he+1):"in";return Me=ei.get(Me)||mo,Pa((Oe=yo.get(Oe)||N)(Me.apply(null,T.call(arguments,1))))},l.interpolateHcl=function(ee,he){ee=l.hcl(ee),he=l.hcl(he);var Me=ee.h,Oe=ee.c,Fe=ee.l,Ue=he.h-Me,Ge=he.c-Oe,Je=he.l-Fe;return isNaN(Ge)&&(Ge=0,Oe=isNaN(Oe)?he.c:Oe),isNaN(Ue)?(Ue=0,Me=isNaN(Me)?he.h:Me):Ue>180?Ue-=360:Ue<-180&&(Ue+=360),function(rt){return St(Me+Ue*rt,Oe+Ge*rt,Fe+Je*rt)+""}},l.interpolateHsl=function(ee,he){ee=l.hsl(ee),he=l.hsl(he);var Me=ee.h,Oe=ee.s,Fe=ee.l,Ue=he.h-Me,Ge=he.s-Oe,Je=he.l-Fe;return isNaN(Ge)&&(Ge=0,Oe=isNaN(Oe)?he.s:Oe),isNaN(Ue)?(Ue=0,Me=isNaN(Me)?he.h:Me):Ue>180?Ue-=360:Ue<-180&&(Ue+=360),function(rt){return At(Me+Ue*rt,Oe+Ge*rt,Fe+Je*rt)+""}},l.interpolateLab=function(ee,he){ee=l.lab(ee),he=l.lab(he);var Me=ee.l,Oe=ee.a,Fe=ee.b,Ue=he.l-Me,Ge=he.a-Oe,Je=he.b-Fe;return function(rt){return qt(Me+Ue*rt,Oe+Ge*rt,Fe+Je*rt)+""}},l.interpolateRound=ll,l.transform=function(ee){var he=d.createElementNS(l.ns.prefix.svg,"g");return(l.transform=function(Me){if(Me!=null){he.setAttribute("transform",Me);var Oe=he.transform.baseVal.consolidate()}return new qs(Oe?Oe.matrix:Yo)})(ee)},qs.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Yo={a:1,b:0,c:0,d:1,e:0,f:0};function oo(ee){return ee.length?ee.pop()+",":""}function Gs(ee,he){var Me=[],Oe=[];return ee=l.transform(ee),he=l.transform(he),function(Fe,Ue,Ge,Je){if(Fe[0]!==Ue[0]||Fe[1]!==Ue[1]){var rt=Ge.push("translate(",null,",",null,")");Je.push({i:rt-4,x:Ma(Fe[0],Ue[0])},{i:rt-2,x:Ma(Fe[1],Ue[1])})}else(Ue[0]||Ue[1])&&Ge.push("translate("+Ue+")")}(ee.translate,he.translate,Me,Oe),function(Fe,Ue,Ge,Je){Fe!==Ue?(Fe-Ue>180?Ue+=360:Ue-Fe>180&&(Fe+=360),Je.push({i:Ge.push(oo(Ge)+"rotate(",null,")")-2,x:Ma(Fe,Ue)})):Ue&&Ge.push(oo(Ge)+"rotate("+Ue+")")}(ee.rotate,he.rotate,Me,Oe),function(Fe,Ue,Ge,Je){Fe!==Ue?Je.push({i:Ge.push(oo(Ge)+"skewX(",null,")")-2,x:Ma(Fe,Ue)}):Ue&&Ge.push(oo(Ge)+"skewX("+Ue+")")}(ee.skew,he.skew,Me,Oe),function(Fe,Ue,Ge,Je){if(Fe[0]!==Ue[0]||Fe[1]!==Ue[1]){var rt=Ge.push(oo(Ge)+"scale(",null,",",null,")");Je.push({i:rt-4,x:Ma(Fe[0],Ue[0])},{i:rt-2,x:Ma(Fe[1],Ue[1])})}else Ue[0]===1&&Ue[1]===1||Ge.push(oo(Ge)+"scale("+Ue+")")}(ee.scale,he.scale,Me,Oe),ee=he=null,function(Fe){for(var Ue,Ge=-1,Je=Oe.length;++Ge<Je;)Me[(Ue=Oe[Ge]).i]=Ue.x(Fe);return Me.join("")}}function Zs(ee,he){return he=(he-=ee=+ee)||1/he,function(Me){return(Me-ee)/he}}function Po(ee,he){return he=(he-=ee=+ee)||1/he,function(Me){return Math.max(0,Math.min(1,(Me-ee)/he))}}function Ms(ee){for(var he=ee.source,Me=ee.target,Oe=function(Ge,Je){if(Ge===Je)return Ge;for(var rt=xo(Ge),ct=xo(Je),Ct=rt.pop(),Dt=ct.pop(),Ft=null;Ct===Dt;)Ft=Ct,Ct=rt.pop(),Dt=ct.pop();return Ft}(he,Me),Fe=[he];he!==Oe;)he=he.parent,Fe.push(he);for(var Ue=Fe.length;Me!==Oe;)Fe.splice(Ue,0,Me),Me=Me.parent;return Fe}function xo(ee){for(var he=[],Me=ee.parent;Me!=null;)he.push(ee),ee=Me,Me=Me.parent;return he.push(ee),he}function Wo(ee){ee.fixed|=2}function Oo(ee){ee.fixed&=-7}function so(ee){ee.fixed|=4,ee.px=ee.x,ee.py=ee.y}function ti(ee){ee.fixed&=-5}function bo(ee,he,Me){var Oe=0,Fe=0;if(ee.charge=0,!ee.leaf)for(var Ue,Ge=ee.nodes,Je=Ge.length,rt=-1;++rt<Je;)(Ue=Ge[rt])!=null&&(bo(Ue,he,Me),ee.charge+=Ue.charge,Oe+=Ue.charge*Ue.cx,Fe+=Ue.charge*Ue.cy);if(ee.point){ee.leaf||(ee.point.x+=Math.random()-.5,ee.point.y+=Math.random()-.5);var ct=he*Me[ee.point.index];ee.charge+=ee.pointCharge=ct,Oe+=ct*ee.point.x,Fe+=ct*ee.point.y}ee.cx=Oe/ee.charge,ee.cy=Fe/ee.charge}l.interpolateTransform=Gs,l.layout={},l.layout.bundle=function(){return function(ee){for(var he=[],Me=-1,Oe=ee.length;++Me<Oe;)he.push(Ms(ee[Me]));return he}},l.layout.chord=function(){var ee,he,Me,Oe,Fe,Ue,Ge,Je={},rt=0;function ct(){var Dt,Ft,Wt,cn,Xt,tn={},$t=[],_n=l.range(Oe),dn=[];for(ee=[],he=[],Dt=0,cn=-1;++cn<Oe;){for(Ft=0,Xt=-1;++Xt<Oe;)Ft+=Me[cn][Xt];$t.push(Ft),dn.push(l.range(Oe)),Dt+=Ft}for(Fe&&_n.sort(function(fr,gr){return Fe($t[fr],$t[gr])}),Ue&&dn.forEach(function(fr,gr){fr.sort(function(Sr,Vr){return Ue(Me[gr][Sr],Me[gr][Vr])})}),Dt=(Ot-rt*Oe)/Dt,Ft=0,cn=-1;++cn<Oe;){for(Wt=Ft,Xt=-1;++Xt<Oe;){var Qt=_n[cn],Cn=dn[Qt][Xt],Dn=Me[Qt][Cn],Jn=Ft,Kn=Ft+=Dn*Dt;tn[Qt+"-"+Cn]={index:Qt,subindex:Cn,startAngle:Jn,endAngle:Kn,value:Dn}}he[Qt]={index:Qt,startAngle:Wt,endAngle:Ft,value:$t[Qt]},Ft+=rt}for(cn=-1;++cn<Oe;)for(Xt=cn-1;++Xt<Oe;){var vr=tn[cn+"-"+Xt],yr=tn[Xt+"-"+cn];(vr.value||yr.value)&&ee.push(vr.value<yr.value?{source:yr,target:vr}:{source:vr,target:yr})}Ge&&Ct()}function Ct(){ee.sort(function(Dt,Ft){return Ge((Dt.source.value+Dt.target.value)/2,(Ft.source.value+Ft.target.value)/2)})}return Je.matrix=function(Dt){return arguments.length?(Oe=(Me=Dt)&&Me.length,ee=he=null,Je):Me},Je.padding=function(Dt){return arguments.length?(rt=Dt,ee=he=null,Je):rt},Je.sortGroups=function(Dt){return arguments.length?(Fe=Dt,ee=he=null,Je):Fe},Je.sortSubgroups=function(Dt){return arguments.length?(Ue=Dt,ee=null,Je):Ue},Je.sortChords=function(Dt){return arguments.length?(Ge=Dt,ee&&Ct(),Je):Ge},Je.chords=function(){return ee||ct(),ee},Je.groups=function(){return he||ct(),he},Je},l.layout.force=function(){var ee,he,Me,Oe,Fe,Ue,Ge={},Je=l.dispatch("start","tick","end"),rt=[1,1],ct=.9,Ct=ml,Dt=Ss,Ft=-30,Wt=us,cn=.1,Xt=.64,tn=[],$t=[];function _n(Qt){return function(Cn,Dn,Jn,Kn){if(Cn.point!==Qt){var vr=Cn.cx-Qt.x,yr=Cn.cy-Qt.y,fr=Kn-Dn,gr=vr*vr+yr*yr;if(fr*fr/Xt<gr){if(gr<Wt){var Sr=Cn.charge/gr;Qt.px-=vr*Sr,Qt.py-=yr*Sr}return!0}Cn.point&&gr&&gr<Wt&&(Sr=Cn.pointCharge/gr,Qt.px-=vr*Sr,Qt.py-=yr*Sr)}return!Cn.charge}}function dn(Qt){Qt.px=l.event.x,Qt.py=l.event.y,Ge.resume()}return Ge.tick=function(){if((Me*=.99)<.005)return ee=null,Je.end({type:"end",alpha:Me=0}),!0;var Qt,Cn,Dn,Jn,Kn,vr,yr,fr,gr,Sr=tn.length,Vr=$t.length;for(Cn=0;Cn<Vr;++Cn)Jn=(Dn=$t[Cn]).source,(vr=(fr=(Kn=Dn.target).x-Jn.x)*fr+(gr=Kn.y-Jn.y)*gr)&&(fr*=vr=Me*Fe[Cn]*((vr=Math.sqrt(vr))-Oe[Cn])/vr,gr*=vr,Kn.x-=fr*(yr=Jn.weight+Kn.weight?Jn.weight/(Jn.weight+Kn.weight):.5),Kn.y-=gr*yr,Jn.x+=fr*(yr=1-yr),Jn.y+=gr*yr);if((yr=Me*cn)&&(fr=rt[0]/2,gr=rt[1]/2,Cn=-1,yr))for(;++Cn<Sr;)(Dn=tn[Cn]).x+=(fr-Dn.x)*yr,Dn.y+=(gr-Dn.y)*yr;if(Ft)for(bo(Qt=l.geom.quadtree(tn),Me,Ue),Cn=-1;++Cn<Sr;)(Dn=tn[Cn]).fixed||Qt.visit(_n(Dn));for(Cn=-1;++Cn<Sr;)(Dn=tn[Cn]).fixed?(Dn.x=Dn.px,Dn.y=Dn.py):(Dn.x-=(Dn.px-(Dn.px=Dn.x))*ct,Dn.y-=(Dn.py-(Dn.py=Dn.y))*ct);Je.tick({type:"tick",alpha:Me})},Ge.nodes=function(Qt){return arguments.length?(tn=Qt,Ge):tn},Ge.links=function(Qt){return arguments.length?($t=Qt,Ge):$t},Ge.size=function(Qt){return arguments.length?(rt=Qt,Ge):rt},Ge.linkDistance=function(Qt){return arguments.length?(Ct=typeof Qt=="function"?Qt:+Qt,Ge):Ct},Ge.distance=Ge.linkDistance,Ge.linkStrength=function(Qt){return arguments.length?(Dt=typeof Qt=="function"?Qt:+Qt,Ge):Dt},Ge.friction=function(Qt){return arguments.length?(ct=+Qt,Ge):ct},Ge.charge=function(Qt){return arguments.length?(Ft=typeof Qt=="function"?Qt:+Qt,Ge):Ft},Ge.chargeDistance=function(Qt){return arguments.length?(Wt=Qt*Qt,Ge):Math.sqrt(Wt)},Ge.gravity=function(Qt){return arguments.length?(cn=+Qt,Ge):cn},Ge.theta=function(Qt){return arguments.length?(Xt=Qt*Qt,Ge):Math.sqrt(Xt)},Ge.alpha=function(Qt){return arguments.length?(Qt=+Qt,Me?Qt>0?Me=Qt:(ee.c=null,ee.t=NaN,ee=null,Je.end({type:"end",alpha:Me=0})):Qt>0&&(Je.start({type:"start",alpha:Me=Qt}),ee=Gt(Ge.tick)),Ge):Me},Ge.start=function(){var Qt,Cn,Dn,Jn=tn.length,Kn=$t.length,vr=rt[0],yr=rt[1];for(Qt=0;Qt<Jn;++Qt)(Dn=tn[Qt]).index=Qt,Dn.weight=0;for(Qt=0;Qt<Kn;++Qt)typeof(Dn=$t[Qt]).source=="number"&&(Dn.source=tn[Dn.source]),typeof Dn.target=="number"&&(Dn.target=tn[Dn.target]),++Dn.source.weight,++Dn.target.weight;for(Qt=0;Qt<Jn;++Qt)Dn=tn[Qt],isNaN(Dn.x)&&(Dn.x=fr("x",vr)),isNaN(Dn.y)&&(Dn.y=fr("y",yr)),isNaN(Dn.px)&&(Dn.px=Dn.x),isNaN(Dn.py)&&(Dn.py=Dn.y);if(Oe=[],typeof Ct=="function")for(Qt=0;Qt<Kn;++Qt)Oe[Qt]=+Ct.call(this,$t[Qt],Qt);else for(Qt=0;Qt<Kn;++Qt)Oe[Qt]=Ct;if(Fe=[],typeof Dt=="function")for(Qt=0;Qt<Kn;++Qt)Fe[Qt]=+Dt.call(this,$t[Qt],Qt);else for(Qt=0;Qt<Kn;++Qt)Fe[Qt]=Dt;if(Ue=[],typeof Ft=="function")for(Qt=0;Qt<Jn;++Qt)Ue[Qt]=+Ft.call(this,tn[Qt],Qt);else for(Qt=0;Qt<Jn;++Qt)Ue[Qt]=Ft;function fr(gr,Sr){if(!Cn){for(Cn=new Array(Jn),Er=0;Er<Jn;++Er)Cn[Er]=[];for(Er=0;Er<Kn;++Er){var Vr=$t[Er];Cn[Vr.source.index].push(Vr.target),Cn[Vr.target.index].push(Vr.source)}}for(var Hr,pr=Cn[Qt],Er=-1,Fr=pr.length;++Er<Fr;)if(!isNaN(Hr=pr[Er][gr]))return Hr;return Math.random()*Sr}return Ge.resume()},Ge.resume=function(){return Ge.alpha(.1)},Ge.stop=function(){return Ge.alpha(0)},Ge.drag=function(){if(he||(he=l.behavior.drag().origin(N).on("dragstart.force",Wo).on("drag.force",dn).on("dragend.force",Oo)),!arguments.length)return he;this.on("mouseover.force",so).on("mouseout.force",ti).call(he)},l.rebind(Ge,Je,"on")};var ml=20,Ss=1,us=1/0;function Io(ee,he){return l.rebind(ee,he,"sort","children","value"),ee.nodes=ee,ee.links=fs,ee}function Xo(ee,he){for(var Me=[ee];(ee=Me.pop())!=null;)if(he(ee),(Fe=ee.children)&&(Oe=Fe.length))for(var Oe,Fe;--Oe>=0;)Me.push(Fe[Oe])}function Oa(ee,he){for(var Me=[ee],Oe=[];(ee=Me.pop())!=null;)if(Oe.push(ee),(Ue=ee.children)&&(Fe=Ue.length))for(var Fe,Ue,Ge=-1;++Ge<Fe;)Me.push(Ue[Ge]);for(;(ee=Oe.pop())!=null;)he(ee)}function Ys(ee){return ee.children}function cs(ee){return ee.value}function Jo(ee,he){return he.value-ee.value}function fs(ee){return l.merge(ee.map(function(he){return(he.children||[]).map(function(Me){return{source:he,target:Me}})}))}l.layout.hierarchy=function(){var ee=Jo,he=Ys,Me=cs;function Oe(Fe){var Ue,Ge=[Fe],Je=[];for(Fe.depth=0;(Ue=Ge.pop())!=null;)if(Je.push(Ue),(ct=he.call(Oe,Ue,Ue.depth))&&(rt=ct.length)){for(var rt,ct,Ct;--rt>=0;)Ge.push(Ct=ct[rt]),Ct.parent=Ue,Ct.depth=Ue.depth+1;Me&&(Ue.value=0),Ue.children=ct}else Me&&(Ue.value=+Me.call(Oe,Ue,Ue.depth)||0),delete Ue.children;return Oa(Fe,function(Dt){var Ft,Wt;ee&&(Ft=Dt.children)&&Ft.sort(ee),Me&&(Wt=Dt.parent)&&(Wt.value+=Dt.value)}),Je}return Oe.sort=function(Fe){return arguments.length?(ee=Fe,Oe):ee},Oe.children=function(Fe){return arguments.length?(he=Fe,Oe):he},Oe.value=function(Fe){return arguments.length?(Me=Fe,Oe):Me},Oe.revalue=function(Fe){return Me&&(Xo(Fe,function(Ue){Ue.children&&(Ue.value=0)}),Oa(Fe,function(Ue){var Ge;Ue.children||(Ue.value=+Me.call(Oe,Ue,Ue.depth)||0),(Ge=Ue.parent)&&(Ge.value+=Ue.value)})),Fe},Oe},l.layout.partition=function(){var ee=l.layout.hierarchy(),he=[1,1];function Me(Ue,Ge,Je,rt){var ct=Ue.children;if(Ue.x=Ge,Ue.y=Ue.depth*rt,Ue.dx=Je,Ue.dy=rt,ct&&(Ct=ct.length)){var Ct,Dt,Ft,Wt=-1;for(Je=Ue.value?Je/Ue.value:0;++Wt<Ct;)Me(Dt=ct[Wt],Ge,Ft=Dt.value*Je,rt),Ge+=Ft}}function Oe(Ue){var Ge=Ue.children,Je=0;if(Ge&&(rt=Ge.length))for(var rt,ct=-1;++ct<rt;)Je=Math.max(Je,Oe(Ge[ct]));return 1+Je}function Fe(Ue,Ge){var Je=ee.call(this,Ue,Ge);return Me(Je[0],0,he[0],he[1]/Oe(Je[0])),Je}return Fe.size=function(Ue){return arguments.length?(he=Ue,Fe):he},Io(Fe,ee)},l.layout.pie=function(){var ee=Number,he=zo,Me=0,Oe=Ot,Fe=0;function Ue(Ge){var Je,rt=Ge.length,ct=Ge.map(function(_n,dn){return+ee.call(Ue,_n,dn)}),Ct=+(typeof Me=="function"?Me.apply(this,arguments):Me),Dt=(typeof Oe=="function"?Oe.apply(this,arguments):Oe)-Ct,Ft=Math.min(Math.abs(Dt)/rt,+(typeof Fe=="function"?Fe.apply(this,arguments):Fe)),Wt=Ft*(Dt<0?-1:1),cn=l.sum(ct),Xt=cn?(Dt-rt*Wt)/cn:0,tn=l.range(rt),$t=[];return he!=null&&tn.sort(he===zo?function(_n,dn){return ct[dn]-ct[_n]}:function(_n,dn){return he(Ge[_n],Ge[dn])}),tn.forEach(function(_n){$t[_n]={data:Ge[_n],value:Je=ct[_n],startAngle:Ct,endAngle:Ct+=Je*Xt+Wt,padAngle:Ft}}),$t}return Ue.value=function(Ge){return arguments.length?(ee=Ge,Ue):ee},Ue.sort=function(Ge){return arguments.length?(he=Ge,Ue):he},Ue.startAngle=function(Ge){return arguments.length?(Me=Ge,Ue):Me},Ue.endAngle=function(Ge){return arguments.length?(Oe=Ge,Ue):Oe},Ue.padAngle=function(Ge){return arguments.length?(Fe=Ge,Ue):Fe},Ue};var zo={};function Ro(ee){return ee.x}function Ko(ee){return ee.y}function hs(ee,he,Me){ee.y0=he,ee.y=Me}l.layout.stack=function(){var ee=N,he=ds,Me=gs,Oe=hs,Fe=Ro,Ue=Ko;function Ge(Je,rt){if(!(Ft=Je.length))return Je;var ct=Je.map(function(_n,dn){return ee.call(Ge,_n,dn)}),Ct=ct.map(function(_n){return _n.map(function(dn,Qt){return[Fe.call(Ge,dn,Qt),Ue.call(Ge,dn,Qt)]})}),Dt=he.call(Ge,Ct,rt);ct=l.permute(ct,Dt),Ct=l.permute(Ct,Dt);var Ft,Wt,cn,Xt,tn=Me.call(Ge,Ct,rt),$t=ct[0].length;for(cn=0;cn<$t;++cn)for(Oe.call(Ge,ct[0][cn],Xt=tn[cn],Ct[0][cn][1]),Wt=1;Wt<Ft;++Wt)Oe.call(Ge,ct[Wt][cn],Xt+=Ct[Wt-1][cn][1],Ct[Wt][cn][1]);return Je}return Ge.values=function(Je){return arguments.length?(ee=Je,Ge):ee},Ge.order=function(Je){return arguments.length?(he=typeof Je=="function"?Je:ps.get(Je)||ds,Ge):he},Ge.offset=function(Je){return arguments.length?(Me=typeof Je=="function"?Je:Ia.get(Je)||gs,Ge):Me},Ge.x=function(Je){return arguments.length?(Fe=Je,Ge):Fe},Ge.y=function(Je){return arguments.length?(Ue=Je,Ge):Ue},Ge.out=function(Je){return arguments.length?(Oe=Je,Ge):Oe},Ge};var ps=l.map({"inside-out":function(ee){var he,Me,Oe=ee.length,Fe=ee.map(Ws),Ue=ee.map(_o),Ge=l.range(Oe).sort(function(Dt,Ft){return Fe[Dt]-Fe[Ft]}),Je=0,rt=0,ct=[],Ct=[];for(he=0;he<Oe;++he)Me=Ge[he],Je<rt?(Je+=Ue[Me],ct.push(Me)):(rt+=Ue[Me],Ct.push(Me));return Ct.reverse().concat(ct)},reverse:function(ee){return l.range(ee.length).reverse()},default:ds}),Ia=l.map({silhouette:function(ee){var he,Me,Oe,Fe=ee.length,Ue=ee[0].length,Ge=[],Je=0,rt=[];for(Me=0;Me<Ue;++Me){for(he=0,Oe=0;he<Fe;he++)Oe+=ee[he][Me][1];Oe>Je&&(Je=Oe),Ge.push(Oe)}for(Me=0;Me<Ue;++Me)rt[Me]=(Je-Ge[Me])/2;return rt},wiggle:function(ee){var he,Me,Oe,Fe,Ue,Ge,Je,rt,ct,Ct=ee.length,Dt=ee[0],Ft=Dt.length,Wt=[];for(Wt[0]=rt=ct=0,Me=1;Me<Ft;++Me){for(he=0,Fe=0;he<Ct;++he)Fe+=ee[he][Me][1];for(he=0,Ue=0,Je=Dt[Me][0]-Dt[Me-1][0];he<Ct;++he){for(Oe=0,Ge=(ee[he][Me][1]-ee[he][Me-1][1])/(2*Je);Oe<he;++Oe)Ge+=(ee[Oe][Me][1]-ee[Oe][Me-1][1])/Je;Ue+=Ge*ee[he][Me][1]}Wt[Me]=rt-=Fe?Ue/Fe*Je:0,rt<ct&&(ct=rt)}for(Me=0;Me<Ft;++Me)Wt[Me]-=ct;return Wt},expand:function(ee){var he,Me,Oe,Fe=ee.length,Ue=ee[0].length,Ge=1/Fe,Je=[];for(Me=0;Me<Ue;++Me){for(he=0,Oe=0;he<Fe;he++)Oe+=ee[he][Me][1];if(Oe)for(he=0;he<Fe;he++)ee[he][Me][1]/=Oe;else for(he=0;he<Fe;he++)ee[he][Me][1]=Ge}for(Me=0;Me<Ue;++Me)Je[Me]=0;return Je},zero:gs});function ds(ee){return l.range(ee.length)}function gs(ee){for(var he=-1,Me=ee[0].length,Oe=[];++he<Me;)Oe[he]=0;return Oe}function Ws(ee){for(var he,Me=1,Oe=0,Fe=ee[0][1],Ue=ee.length;Me<Ue;++Me)(he=ee[Me][1])>Fe&&(Oe=Me,Fe=he);return Oe}function _o(ee){return ee.reduce(Es,0)}function Es(ee,he){return ee+he[1]}function vs(ee,he){return Xs(ee,Math.ceil(Math.log(he.length)/Math.LN2+1))}function Xs(ee,he){for(var Me=-1,Oe=+ee[0],Fe=(ee[1]-Oe)/he,Ue=[];++Me<=he;)Ue[Me]=Fe*Me+Oe;return Ue}function ms(ee){return[l.min(ee),l.max(ee)]}function $o(ee,he){return ee.value-he.value}function Do(ee,he){var Me=ee._pack_next;ee._pack_next=he,he._pack_prev=ee,he._pack_next=Me,Me._pack_prev=he}function Fo(ee,he){ee._pack_next=he,he._pack_prev=ee}function si(ee,he){var Me=he.x-ee.x,Oe=he.y-ee.y,Fe=ee.r+he.r;return .999*Fe*Fe>Me*Me+Oe*Oe}function wo(ee){if((he=ee.children)&&(rt=he.length)){var he,Me,Oe,Fe,Ue,Ge,Je,rt,ct=1/0,Ct=-1/0,Dt=1/0,Ft=-1/0;if(he.forEach(To),(Me=he[0]).x=-Me.r,Me.y=0,dn(Me),rt>1&&((Oe=he[1]).x=Oe.r,Oe.y=0,dn(Oe),rt>2))for(Kr(Me,Oe,Fe=he[2]),dn(Fe),Do(Me,Fe),Me._pack_prev=Fe,Do(Fe,Oe),Oe=Me._pack_next,Ue=3;Ue<rt;Ue++){Kr(Me,Oe,Fe=he[Ue]);var Wt=0,cn=1,Xt=1;for(Ge=Oe._pack_next;Ge!==Oe;Ge=Ge._pack_next,cn++)if(si(Ge,Fe)){Wt=1;break}if(Wt==1)for(Je=Me._pack_prev;Je!==Ge._pack_prev&&!si(Je,Fe);Je=Je._pack_prev,Xt++);Wt?(cn<Xt||cn==Xt&&Oe.r<Me.r?Fo(Me,Oe=Ge):Fo(Me=Je,Oe),Ue--):(Do(Me,Fe),Oe=Fe,dn(Fe))}var tn=(ct+Ct)/2,$t=(Dt+Ft)/2,_n=0;for(Ue=0;Ue<rt;Ue++)(Fe=he[Ue]).x-=tn,Fe.y-=$t,_n=Math.max(_n,Fe.r+Math.sqrt(Fe.x*Fe.x+Fe.y*Fe.y));ee.r=_n,he.forEach(Yi)}function dn(Qt){ct=Math.min(Qt.x-Qt.r,ct),Ct=Math.max(Qt.x+Qt.r,Ct),Dt=Math.min(Qt.y-Qt.r,Dt),Ft=Math.max(Qt.y+Qt.r,Ft)}}function To(ee){ee._pack_next=ee._pack_prev=ee}function Yi(ee){delete ee._pack_next,delete ee._pack_prev}function Xr(ee,he,Me,Oe){var Fe=ee.children;if(ee.x=he+=Oe*ee.x,ee.y=Me+=Oe*ee.y,ee.r*=Oe,Fe)for(var Ue=-1,Ge=Fe.length;++Ue<Ge;)Xr(Fe[Ue],he,Me,Oe)}function Kr(ee,he,Me){var Oe=ee.r+Me.r,Fe=he.x-ee.x,Ue=he.y-ee.y;if(Oe&&(Fe||Ue)){var Ge=he.r+Me.r,Je=Fe*Fe+Ue*Ue,rt=.5+((Oe*=Oe)-(Ge*=Ge))/(2*Je),ct=Math.sqrt(Math.max(0,2*Ge*(Oe+Je)-(Oe-=Je)*Oe-Ge*Ge))/(2*Je);Me.x=ee.x+rt*Fe+ct*Ue,Me.y=ee.y+rt*Ue-ct*Fe}else Me.x=ee.x+Oe,Me.y=ee.y}function lo(ee,he){return ee.parent==he.parent?1:2}function Ja(ee){var he=ee.children;return he.length?he[0]:ee.t}function Ls(ee){var he,Me=ee.children;return(he=Me.length)?Me[he-1]:ee.t}function Js(ee,he,Me){var Oe=Me/(he.i-ee.i);he.c-=Oe,he.s+=Me,ee.c+=Oe,he.z+=Me,he.m+=Me}function Bo(ee,he,Me){return ee.a.parent===he.parent?ee.a:Me}function Ks(ee){var he=ee.children;return he&&he.length?Ks(he[0]):ee}function No(ee){var he,Me=ee.children;return Me&&(he=Me.length)?No(Me[he-1]):ee}function uo(ee){return{x:ee.x,y:ee.y,dx:ee.dx,dy:ee.dy}}function jo(ee,he){var Me=ee.x+he[3],Oe=ee.y+he[0],Fe=ee.dx-he[1]-he[3],Ue=ee.dy-he[0]-he[2];return Fe<0&&(Me+=Fe/2,Fe=0),Ue<0&&(Oe+=Ue/2,Ue=0),{x:Me,y:Oe,dx:Fe,dy:Ue}}function xi(ee){var he=ee[0],Me=ee[ee.length-1];return he<Me?[he,Me]:[Me,he]}function Ka(ee){return ee.rangeExtent?ee.rangeExtent():xi(ee.range())}function Uo(ee,he,Me,Oe){var Fe=Me(ee[0],ee[1]),Ue=Oe(he[0],he[1]);return function(Ge){return Ue(Fe(Ge))}}function zi(ee,he){var Me,Oe=0,Fe=ee.length-1,Ue=ee[Oe],Ge=ee[Fe];return Ge<Ue&&(Me=Oe,Oe=Fe,Fe=Me,Me=Ue,Ue=Ge,Ge=Me),ee[Oe]=he.floor(Ue),ee[Fe]=he.ceil(Ge),ee}function Wi(ee){return ee?{floor:function(he){return Math.floor(he/ee)*ee},ceil:function(he){return Math.ceil(he/ee)*ee}}:Xi}l.layout.histogram=function(){var ee=!0,he=Number,Me=ms,Oe=vs;function Fe(Ue,Ge){for(var Je,rt,ct=[],Ct=Ue.map(he,this),Dt=Me.call(this,Ct,Ge),Ft=Oe.call(this,Dt,Ct,Ge),Wt=(Ge=-1,Ct.length),cn=Ft.length-1,Xt=ee?1:1/Wt;++Ge<cn;)(Je=ct[Ge]=[]).dx=Ft[Ge+1]-(Je.x=Ft[Ge]),Je.y=0;if(cn>0)for(Ge=-1;++Ge<Wt;)(rt=Ct[Ge])>=Dt[0]&&rt<=Dt[1]&&((Je=ct[l.bisect(Ft,rt,1,cn)-1]).y+=Xt,Je.push(Ue[Ge]));return ct}return Fe.value=function(Ue){return arguments.length?(he=Ue,Fe):he},Fe.range=function(Ue){return arguments.length?(Me=Bn(Ue),Fe):Me},Fe.bins=function(Ue){return arguments.length?(Oe=typeof Ue=="number"?function(Ge){return Xs(Ge,Ue)}:Bn(Ue),Fe):Oe},Fe.frequency=function(Ue){return arguments.length?(ee=!!Ue,Fe):ee},Fe},l.layout.pack=function(){var ee,he=l.layout.hierarchy().sort($o),Me=0,Oe=[1,1];function Fe(Ue,Ge){var Je=he.call(this,Ue,Ge),rt=Je[0],ct=Oe[0],Ct=Oe[1],Dt=ee==null?Math.sqrt:typeof ee=="function"?ee:function(){return ee};if(rt.x=rt.y=0,Oa(rt,function(Wt){Wt.r=+Dt(Wt.value)}),Oa(rt,wo),Me){var Ft=Me*(ee?1:Math.max(2*rt.r/ct,2*rt.r/Ct))/2;Oa(rt,function(Wt){Wt.r+=Ft}),Oa(rt,wo),Oa(rt,function(Wt){Wt.r-=Ft})}return Xr(rt,ct/2,Ct/2,ee?1:1/Math.max(2*rt.r/ct,2*rt.r/Ct)),Je}return Fe.size=function(Ue){return arguments.length?(Oe=Ue,Fe):Oe},Fe.radius=function(Ue){return arguments.length?(ee=Ue==null||typeof Ue=="function"?Ue:+Ue,Fe):ee},Fe.padding=function(Ue){return arguments.length?(Me=+Ue,Fe):Me},Io(Fe,he)},l.layout.tree=function(){var ee=l.layout.hierarchy().sort(null).value(null),he=lo,Me=[1,1],Oe=null;function Fe(rt,ct){var Ct=ee.call(this,rt,ct),Dt=Ct[0],Ft=function(dn){for(var Qt,Cn={A:null,children:[dn]},Dn=[Cn];(Qt=Dn.pop())!=null;)for(var Jn,Kn=Qt.children,vr=0,yr=Kn.length;vr<yr;++vr)Dn.push((Kn[vr]=Jn={_:Kn[vr],parent:Qt,children:(Jn=Kn[vr].children)&&Jn.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:vr}).a=Jn);return Cn.children[0]}(Dt);if(Oa(Ft,Ue),Ft.parent.m=-Ft.z,Xo(Ft,Ge),Oe)Xo(Dt,Je);else{var Wt=Dt,cn=Dt,Xt=Dt;Xo(Dt,function(dn){dn.x<Wt.x&&(Wt=dn),dn.x>cn.x&&(cn=dn),dn.depth>Xt.depth&&(Xt=dn)});var tn=he(Wt,cn)/2-Wt.x,$t=Me[0]/(cn.x+he(cn,Wt)/2+tn),_n=Me[1]/(Xt.depth||1);Xo(Dt,function(dn){dn.x=(dn.x+tn)*$t,dn.y=dn.depth*_n})}return Ct}function Ue(rt){var ct=rt.children,Ct=rt.parent.children,Dt=rt.i?Ct[rt.i-1]:null;if(ct.length){(function(Wt){for(var cn,Xt=0,tn=0,$t=Wt.children,_n=$t.length;--_n>=0;)(cn=$t[_n]).z+=Xt,cn.m+=Xt,Xt+=cn.s+(tn+=cn.c)})(rt);var Ft=(ct[0].z+ct[ct.length-1].z)/2;Dt?(rt.z=Dt.z+he(rt._,Dt._),rt.m=rt.z-Ft):rt.z=Ft}else Dt&&(rt.z=Dt.z+he(rt._,Dt._));rt.parent.A=function(Wt,cn,Xt){if(cn){for(var tn,$t=Wt,_n=Wt,dn=cn,Qt=$t.parent.children[0],Cn=$t.m,Dn=_n.m,Jn=dn.m,Kn=Qt.m;dn=Ls(dn),$t=Ja($t),dn&&$t;)Qt=Ja(Qt),(_n=Ls(_n)).a=Wt,(tn=dn.z+Jn-$t.z-Cn+he(dn._,$t._))>0&&(Js(Bo(dn,Wt,Xt),Wt,tn),Cn+=tn,Dn+=tn),Jn+=dn.m,Cn+=$t.m,Kn+=Qt.m,Dn+=_n.m;dn&&!Ls(_n)&&(_n.t=dn,_n.m+=Jn-Dn),$t&&!Ja(Qt)&&(Qt.t=$t,Qt.m+=Cn-Kn,Xt=Wt)}return Xt}(rt,Dt,rt.parent.A||Ct[0])}function Ge(rt){rt._.x=rt.z+rt.parent.m,rt.m+=rt.parent.m}function Je(rt){rt.x*=Me[0],rt.y=rt.depth*Me[1]}return Fe.separation=function(rt){return arguments.length?(he=rt,Fe):he},Fe.size=function(rt){return arguments.length?(Oe=(Me=rt)==null?Je:null,Fe):Oe?null:Me},Fe.nodeSize=function(rt){return arguments.length?(Oe=(Me=rt)==null?null:Je,Fe):Oe?Me:null},Io(Fe,ee)},l.layout.cluster=function(){var ee=l.layout.hierarchy().sort(null).value(null),he=lo,Me=[1,1],Oe=!1;function Fe(Ue,Ge){var Je,rt=ee.call(this,Ue,Ge),ct=rt[0],Ct=0;Oa(ct,function(Xt){var tn=Xt.children;tn&&tn.length?(Xt.x=function($t){return $t.reduce(function(_n,dn){return _n+dn.x},0)/$t.length}(tn),Xt.y=function($t){return 1+l.max($t,function(_n){return _n.y})}(tn)):(Xt.x=Je?Ct+=he(Xt,Je):0,Xt.y=0,Je=Xt)});var Dt=Ks(ct),Ft=No(ct),Wt=Dt.x-he(Dt,Ft)/2,cn=Ft.x+he(Ft,Dt)/2;return Oa(ct,Oe?function(Xt){Xt.x=(Xt.x-ct.x)*Me[0],Xt.y=(ct.y-Xt.y)*Me[1]}:function(Xt){Xt.x=(Xt.x-Wt)/(cn-Wt)*Me[0],Xt.y=(1-(ct.y?Xt.y/ct.y:1))*Me[1]}),rt}return Fe.separation=function(Ue){return arguments.length?(he=Ue,Fe):he},Fe.size=function(Ue){return arguments.length?(Oe=(Me=Ue)==null,Fe):Oe?null:Me},Fe.nodeSize=function(Ue){return arguments.length?(Oe=(Me=Ue)!=null,Fe):Oe?Me:null},Io(Fe,ee)},l.layout.treemap=function(){var ee,he=l.layout.hierarchy(),Me=Math.round,Oe=[1,1],Fe=null,Ue=uo,Ge=!1,Je="squarify",rt=.5*(1+Math.sqrt(5));function ct(Xt,tn){for(var $t,_n,dn=-1,Qt=Xt.length;++dn<Qt;)_n=($t=Xt[dn]).value*(tn<0?0:tn),$t.area=isNaN(_n)||_n<=0?0:_n}function Ct(Xt){var tn=Xt.children;if(tn&&tn.length){var $t,_n,dn,Qt=Ue(Xt),Cn=[],Dn=tn.slice(),Jn=1/0,Kn=Je==="slice"?Qt.dx:Je==="dice"?Qt.dy:Je==="slice-dice"?1&Xt.depth?Qt.dy:Qt.dx:Math.min(Qt.dx,Qt.dy);for(ct(Dn,Qt.dx*Qt.dy/Xt.value),Cn.area=0;(dn=Dn.length)>0;)Cn.push($t=Dn[dn-1]),Cn.area+=$t.area,Je!=="squarify"||(_n=Ft(Cn,Kn))<=Jn?(Dn.pop(),Jn=_n):(Cn.area-=Cn.pop().area,Wt(Cn,Kn,Qt,!1),Kn=Math.min(Qt.dx,Qt.dy),Cn.length=Cn.area=0,Jn=1/0);Cn.length&&(Wt(Cn,Kn,Qt,!0),Cn.length=Cn.area=0),tn.forEach(Ct)}}function Dt(Xt){var tn=Xt.children;if(tn&&tn.length){var $t,_n=Ue(Xt),dn=tn.slice(),Qt=[];for(ct(dn,_n.dx*_n.dy/Xt.value),Qt.area=0;$t=dn.pop();)Qt.push($t),Qt.area+=$t.area,$t.z!=null&&(Wt(Qt,$t.z?_n.dx:_n.dy,_n,!dn.length),Qt.length=Qt.area=0);tn.forEach(Dt)}}function Ft(Xt,tn){for(var $t,_n=Xt.area,dn=0,Qt=1/0,Cn=-1,Dn=Xt.length;++Cn<Dn;)($t=Xt[Cn].area)&&($t<Qt&&(Qt=$t),$t>dn&&(dn=$t));return tn*=tn,(_n*=_n)?Math.max(tn*dn*rt/_n,_n/(tn*Qt*rt)):1/0}function Wt(Xt,tn,$t,_n){var dn,Qt=-1,Cn=Xt.length,Dn=$t.x,Jn=$t.y,Kn=tn?Me(Xt.area/tn):0;if(tn==$t.dx){for((_n||Kn>$t.dy)&&(Kn=$t.dy);++Qt<Cn;)(dn=Xt[Qt]).x=Dn,dn.y=Jn,dn.dy=Kn,Dn+=dn.dx=Math.min($t.x+$t.dx-Dn,Kn?Me(dn.area/Kn):0);dn.z=!0,dn.dx+=$t.x+$t.dx-Dn,$t.y+=Kn,$t.dy-=Kn}else{for((_n||Kn>$t.dx)&&(Kn=$t.dx);++Qt<Cn;)(dn=Xt[Qt]).x=Dn,dn.y=Jn,dn.dx=Kn,Jn+=dn.dy=Math.min($t.y+$t.dy-Jn,Kn?Me(dn.area/Kn):0);dn.z=!1,dn.dy+=$t.y+$t.dy-Jn,$t.x+=Kn,$t.dx-=Kn}}function cn(Xt){var tn=ee||he(Xt),$t=tn[0];return $t.x=$t.y=0,$t.value?($t.dx=Oe[0],$t.dy=Oe[1]):$t.dx=$t.dy=0,ee&&he.revalue($t),ct([$t],$t.dx*$t.dy/$t.value),(ee?Dt:Ct)($t),Ge&&(ee=tn),tn}return cn.size=function(Xt){return arguments.length?(Oe=Xt,cn):Oe},cn.padding=function(Xt){if(!arguments.length)return Fe;function tn(dn){var Qt=Xt.call(cn,dn,dn.depth);return Qt==null?uo(dn):jo(dn,typeof Qt=="number"?[Qt,Qt,Qt,Qt]:Qt)}function $t(dn){return jo(dn,Xt)}var _n;return Ue=(Fe=Xt)==null?uo:(_n=typeof Xt)=="function"?tn:(_n==="number"&&(Xt=[Xt,Xt,Xt,Xt]),$t),cn},cn.round=function(Xt){return arguments.length?(Me=Xt?Math.round:Number,cn):Me!=Number},cn.sticky=function(Xt){return arguments.length?(Ge=Xt,ee=null,cn):Ge},cn.ratio=function(Xt){return arguments.length?(rt=Xt,cn):rt},cn.mode=function(Xt){return arguments.length?(Je=Xt+"",cn):Je},Io(cn,he)},l.random={normal:function(ee,he){var Me=arguments.length;return Me<2&&(he=1),Me<1&&(ee=0),function(){var Oe,Fe,Ue;do Ue=(Oe=2*Math.random()-1)*Oe+(Fe=2*Math.random()-1)*Fe;while(!Ue||Ue>1);return ee+he*Oe*Math.sqrt(-2*Math.log(Ue)/Ue)}},logNormal:function(){var ee=l.random.normal.apply(l,arguments);return function(){return Math.exp(ee())}},bates:function(ee){var he=l.random.irwinHall(ee);return function(){return he()/ee}},irwinHall:function(ee){return function(){for(var he=0,Me=0;Me<ee;Me++)he+=Math.random();return he}}},l.scale={};var Xi={floor:N,ceil:N};function Gi(ee,he,Me,Oe){var Fe=[],Ue=[],Ge=0,Je=Math.min(ee.length,he.length)-1;for(ee[Je]<ee[0]&&(ee=ee.slice().reverse(),he=he.slice().reverse());++Ge<=Je;)Fe.push(Me(ee[Ge-1],ee[Ge])),Ue.push(Oe(he[Ge-1],he[Ge]));return function(rt){var ct=l.bisect(ee,rt,1,Je)-1;return Ue[ct](Fe[ct](rt))}}function ua(ee,he,Me,Oe){var Fe,Ue;function Ge(){var rt=Math.min(ee.length,he.length)>2?Gi:Uo,ct=Oe?Po:Zs;return Fe=rt(ee,he,ct,Me),Ue=rt(he,ee,ct,xa),Je}function Je(rt){return Fe(rt)}return Je.invert=function(rt){return Ue(rt)},Je.domain=function(rt){return arguments.length?(ee=rt.map(Number),Ge()):ee},Je.range=function(rt){return arguments.length?(he=rt,Ge()):he},Je.rangeRound=function(rt){return Je.range(rt).interpolate(ll)},Je.clamp=function(rt){return arguments.length?(Oe=rt,Ge()):Oe},Je.interpolate=function(rt){return arguments.length?(Me=rt,Ge()):Me},Je.ticks=function(rt){return ba(ee,rt)},Je.tickFormat=function(rt,ct){return d3_scale_linearTickFormat(ee,rt,ct)},Je.nice=function(rt){return za(ee,rt),Ge()},Je.copy=function(){return ua(ee,he,Me,Oe)},Ge()}function ko(ee,he){return l.rebind(ee,he,"range","rangeRound","interpolate","clamp")}function za(ee,he){return zi(ee,Wi(Fi(ee,he)[2])),zi(ee,Wi(Fi(ee,he)[2])),ee}function Fi(ee,he){he==null&&(he=10);var Me=xi(ee),Oe=Me[1]-Me[0],Fe=Math.pow(10,Math.floor(Math.log(Oe/he)/Math.LN10)),Ue=he/Oe*Fe;return Ue<=.15?Fe*=10:Ue<=.35?Fe*=5:Ue<=.75&&(Fe*=2),Me[0]=Math.ceil(Me[0]/Fe)*Fe,Me[1]=Math.floor(Me[1]/Fe)*Fe+.5*Fe,Me[2]=Fe,Me}function ba(ee,he){return l.range.apply(l,Fi(ee,he))}function Cs(ee,he,Me,Oe){function Fe(Je){return(Me?Math.log(Je<0?0:Je):-Math.log(Je>0?0:-Je))/Math.log(he)}function Ue(Je){return Me?Math.pow(he,Je):-Math.pow(he,-Je)}function Ge(Je){return ee(Fe(Je))}return Ge.invert=function(Je){return Ue(ee.invert(Je))},Ge.domain=function(Je){return arguments.length?(Me=Je[0]>=0,ee.domain((Oe=Je.map(Number)).map(Fe)),Ge):Oe},Ge.base=function(Je){return arguments.length?(he=+Je,ee.domain(Oe.map(Fe)),Ge):he},Ge.nice=function(){var Je=zi(Oe.map(Fe),Me?Math:Ps);return ee.domain(Je),Oe=Je.map(Ue),Ge},Ge.ticks=function(){var Je=xi(Oe),rt=[],ct=Je[0],Ct=Je[1],Dt=Math.floor(Fe(ct)),Ft=Math.ceil(Fe(Ct)),Wt=he%1?2:he;if(isFinite(Ft-Dt)){if(Me){for(;Dt<Ft;Dt++)for(var cn=1;cn<Wt;cn++)rt.push(Ue(Dt)*cn);rt.push(Ue(Dt))}else for(rt.push(Ue(Dt));Dt++<Ft;)for(cn=Wt-1;cn>0;cn--)rt.push(Ue(Dt)*cn);for(Dt=0;rt[Dt]<ct;Dt++);for(Ft=rt.length;rt[Ft-1]>Ct;Ft--);rt=rt.slice(Dt,Ft)}return rt},Ge.copy=function(){return Cs(ee.copy(),he,Me,Oe)},ko(Ge,ee)}l.scale.linear=function(){return ua([0,1],[0,1],xa,!1)},l.scale.log=function(){return Cs(l.scale.linear().domain([0,1]),10,!0,[1,10])};var Ps={floor:function(ee){return-Math.ceil(-ee)},ceil:function(ee){return-Math.floor(-ee)}};function aa(ee,he,Me){var Oe=wr(he),Fe=wr(1/he);function Ue(Ge){return ee(Oe(Ge))}return Ue.invert=function(Ge){return Fe(ee.invert(Ge))},Ue.domain=function(Ge){return arguments.length?(ee.domain((Me=Ge.map(Number)).map(Oe)),Ue):Me},Ue.ticks=function(Ge){return ba(Me,Ge)},Ue.tickFormat=function(Ge,Je){return d3_scale_linearTickFormat(Me,Ge,Je)},Ue.nice=function(Ge){return Ue.domain(za(Me,Ge))},Ue.exponent=function(Ge){return arguments.length?(Oe=wr(he=Ge),Fe=wr(1/he),ee.domain(Me.map(Oe)),Ue):he},Ue.copy=function(){return aa(ee.copy(),he,Me)},ko(Ue,ee)}function wr(ee){return function(he){return he<0?-Math.pow(-he,ee):Math.pow(he,ee)}}function Vo(ee,he){var Me,Oe,Fe;function Ue(Je){return Oe[((Me.get(Je)||(he.t==="range"?Me.set(Je,ee.push(Je)):NaN))-1)%Oe.length]}function Ge(Je,rt){return l.range(ee.length).map(function(ct){return Je+rt*ct})}return Ue.domain=function(Je){if(!arguments.length)return ee;ee=[],Me=new w;for(var rt,ct=-1,Ct=Je.length;++ct<Ct;)Me.has(rt=Je[ct])||Me.set(rt,ee.push(rt));return Ue[he.t].apply(Ue,he.a)},Ue.range=function(Je){return arguments.length?(Oe=Je,Fe=0,he={t:"range",a:arguments},Ue):Oe},Ue.rangePoints=function(Je,rt){arguments.length<2&&(rt=0);var ct=Je[0],Ct=Je[1],Dt=ee.length<2?(ct=(ct+Ct)/2,0):(Ct-ct)/(ee.length-1+rt);return Oe=Ge(ct+Dt*rt/2,Dt),Fe=0,he={t:"rangePoints",a:arguments},Ue},Ue.rangeRoundPoints=function(Je,rt){arguments.length<2&&(rt=0);var ct=Je[0],Ct=Je[1],Dt=ee.length<2?(ct=Ct=Math.round((ct+Ct)/2),0):(Ct-ct)/(ee.length-1+rt)|0;return Oe=Ge(ct+Math.round(Dt*rt/2+(Ct-ct-(ee.length-1+rt)*Dt)/2),Dt),Fe=0,he={t:"rangeRoundPoints",a:arguments},Ue},Ue.rangeBands=function(Je,rt,ct){arguments.length<2&&(rt=0),arguments.length<3&&(ct=rt);var Ct=Je[1]<Je[0],Dt=Je[Ct-0],Ft=Je[1-Ct],Wt=(Ft-Dt)/(ee.length-rt+2*ct);return Oe=Ge(Dt+Wt*ct,Wt),Ct&&Oe.reverse(),Fe=Wt*(1-rt),he={t:"rangeBands",a:arguments},Ue},Ue.rangeRoundBands=function(Je,rt,ct){arguments.length<2&&(rt=0),arguments.length<3&&(ct=rt);var Ct=Je[1]<Je[0],Dt=Je[Ct-0],Ft=Je[1-Ct],Wt=Math.floor((Ft-Dt)/(ee.length-rt+2*ct));return Oe=Ge(Dt+Math.round((Ft-Dt-(ee.length-rt)*Wt)/2),Wt),Ct&&Oe.reverse(),Fe=Math.round(Wt*(1-rt)),he={t:"rangeRoundBands",a:arguments},Ue},Ue.rangeBand=function(){return Fe},Ue.rangeExtent=function(){return xi(he.a[0])},Ue.copy=function(){return Vo(ee,he)},Ue.domain(ee)}l.scale.pow=function(){return aa(l.scale.linear(),1,[0,1])},l.scale.sqrt=function(){return l.scale.pow().exponent(.5)},l.scale.ordinal=function(){return Vo([],{t:"range",a:[[]]})},l.scale.category10=function(){return l.scale.ordinal().range(ca)},l.scale.category20=function(){return l.scale.ordinal().range(Os)},l.scale.category20b=function(){return l.scale.ordinal().range(Qo)},l.scale.category20c=function(){return l.scale.ordinal().range(es)};var ca=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(mn),Os=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(mn),Qo=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(mn),es=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(mn);function ts(ee,he){var Me;function Oe(){var Ue=0,Ge=he.length;for(Me=[];++Ue<Ge;)Me[Ue-1]=l.quantile(ee,Ue/Ge);return Fe}function Fe(Ue){if(!isNaN(Ue=+Ue))return he[l.bisect(Me,Ue)]}return Fe.domain=function(Ue){return arguments.length?(ee=Ue.map(h).filter(f).sort(u),Oe()):ee},Fe.range=function(Ue){return arguments.length?(he=Ue,Oe()):he},Fe.quantiles=function(){return Me},Fe.invertExtent=function(Ue){return(Ue=he.indexOf(Ue))<0?[NaN,NaN]:[Ue>0?Me[Ue-1]:ee[0],Ue<Me.length?Me[Ue]:ee[ee.length-1]]},Fe.copy=function(){return ts(ee,he)},Oe()}function Ar(ee,he,Me){var Oe,Fe;function Ue(Je){return Me[Math.max(0,Math.min(Fe,Math.floor(Oe*(Je-ee))))]}function Ge(){return Oe=Me.length/(he-ee),Fe=Me.length-1,Ue}return Ue.domain=function(Je){return arguments.length?(ee=+Je[0],he=+Je[Je.length-1],Ge()):[ee,he]},Ue.range=function(Je){return arguments.length?(Me=Je,Ge()):Me},Ue.invertExtent=function(Je){return[Je=(Je=Me.indexOf(Je))<0?NaN:Je/Oe+ee,Je+1/Oe]},Ue.copy=function(){return Ar(ee,he,Me)},Ge()}function ns(ee,he){function Me(Oe){if(Oe<=Oe)return he[l.bisect(ee,Oe)]}return Me.domain=function(Oe){return arguments.length?(ee=Oe,Me):ee},Me.range=function(Oe){return arguments.length?(he=Oe,Me):he},Me.invertExtent=function(Oe){return Oe=he.indexOf(Oe),[ee[Oe-1],ee[Oe]]},Me.copy=function(){return ns(ee,he)},Me}function Ra(ee){function he(Me){return+Me}return he.invert=he,he.domain=he.range=function(Me){return arguments.length?(ee=Me.map(he),he):ee},he.ticks=function(Me){return ba(ee,Me)},he.tickFormat=function(Me,Oe){return d3_scale_linearTickFormat(ee,Me,Oe)},he.copy=function(){return Ra(ee)},he}function Is(){return 0}l.scale.quantile=function(){return ts([],[])},l.scale.quantize=function(){return Ar(0,1,[0,1])},l.scale.threshold=function(){return ns([.5],[0,1])},l.scale.identity=function(){return Ra([0,1])},l.svg={},l.svg.arc=function(){var ee=Ji,he=Ho,Me=Is,Oe=ys,Fe=co,Ue=_a,Ge=Ao;function Je(){var ct=Math.max(0,+ee.apply(this,arguments)),Ct=Math.max(0,+he.apply(this,arguments)),Dt=Fe.apply(this,arguments)-zt,Ft=Ue.apply(this,arguments)-zt,Wt=Math.abs(Ft-Dt),cn=Dt>Ft?0:1;if(Ct<ct&&(Xt=Ct,Ct=ct,ct=Xt),Wt>=Nt)return rt(Ct,cn)+(ct?rt(ct,1-cn):"")+"Z";var Xt,tn,$t,_n,dn,Qt,Cn,Dn,Jn,Kn,vr,yr,fr=0,gr=0,Sr=[];if((_n=(+Ge.apply(this,arguments)||0)/2)&&($t=Oe===ys?Math.sqrt(ct*ct+Ct*Ct):+Oe.apply(this,arguments),cn||(gr*=-1),Ct&&(gr=je($t/Ct*Math.sin(_n))),ct&&(fr=je($t/ct*Math.sin(_n)))),Ct){dn=Ct*Math.cos(Dt+gr),Qt=Ct*Math.sin(Dt+gr),Cn=Ct*Math.cos(Ft-gr),Dn=Ct*Math.sin(Ft-gr);var Vr=Math.abs(Ft-Dt-2*gr)<=Et?0:1;if(gr&&Ha(dn,Qt,Cn,Dn)===cn^Vr){var Hr=(Dt+Ft)/2;dn=Ct*Math.cos(Hr),Qt=Ct*Math.sin(Hr),Cn=Dn=null}}else dn=Qt=0;if(ct){Jn=ct*Math.cos(Ft-fr),Kn=ct*Math.sin(Ft-fr),vr=ct*Math.cos(Dt+fr),yr=ct*Math.sin(Dt+fr);var pr=Math.abs(Dt-Ft+2*fr)<=Et?0:1;if(fr&&Ha(Jn,Kn,vr,yr)===1-cn^pr){var Er=(Dt+Ft)/2;Jn=ct*Math.cos(Er),Kn=ct*Math.sin(Er),vr=yr=null}}else Jn=Kn=0;if(Wt>Pt&&(Xt=Math.min(Math.abs(Ct-ct)/2,+Me.apply(this,arguments)))>.001){tn=ct<Ct^cn?0:1;var Fr=Xt,Dr=Xt;if(Wt<Et){var Yr=vr==null?[Jn,Kn]:Cn==null?[dn,Qt]:Mn([dn,Qt],[vr,yr],[Cn,Dn],[Jn,Kn]),Zr=dn-Yr[0],$r=Qt-Yr[1],fi=Cn-Yr[0],bi=Dn-Yr[1],gi=1/Math.sin(Math.acos((Zr*fi+$r*bi)/(Math.sqrt(Zr*Zr+$r*$r)*Math.sqrt(fi*fi+bi*bi)))/2),ui=Math.sqrt(Yr[0]*Yr[0]+Yr[1]*Yr[1]);Dr=Math.min(Xt,(ct-ui)/(gi-1)),Fr=Math.min(Xt,(Ct-ui)/(gi+1))}if(Cn!=null){var hi=Da(vr==null?[Jn,Kn]:[vr,yr],[dn,Qt],Ct,Fr,cn),vi=Da([Cn,Dn],[Jn,Kn],Ct,Fr,cn);Xt===Fr?Sr.push("M",hi[0],"A",Fr,",",Fr," 0 0,",tn," ",hi[1],"A",Ct,",",Ct," 0 ",1-cn^Ha(hi[1][0],hi[1][1],vi[1][0],vi[1][1]),",",cn," ",vi[1],"A",Fr,",",Fr," 0 0,",tn," ",vi[0]):Sr.push("M",hi[0],"A",Fr,",",Fr," 0 1,",tn," ",vi[0])}else Sr.push("M",dn,",",Qt);if(vr!=null){var Li=Da([dn,Qt],[vr,yr],ct,-Dr,cn),So=Da([Jn,Kn],Cn==null?[dn,Qt]:[Cn,Dn],ct,-Dr,cn);Xt===Dr?Sr.push("L",So[0],"A",Dr,",",Dr," 0 0,",tn," ",So[1],"A",ct,",",ct," 0 ",cn^Ha(So[1][0],So[1][1],Li[1][0],Li[1][1]),",",1-cn," ",Li[1],"A",Dr,",",Dr," 0 0,",tn," ",Li[0]):Sr.push("L",So[0],"A",Dr,",",Dr," 0 0,",tn," ",Li[0])}else Sr.push("L",Jn,",",Kn)}else Sr.push("M",dn,",",Qt),Cn!=null&&Sr.push("A",Ct,",",Ct," 0 ",Vr,",",cn," ",Cn,",",Dn),Sr.push("L",Jn,",",Kn),vr!=null&&Sr.push("A",ct,",",ct," 0 ",pr,",",1-cn," ",vr,",",yr);return Sr.push("Z"),Sr.join("")}function rt(ct,Ct){return"M0,"+ct+"A"+ct+","+ct+" 0 1,"+Ct+" 0,"+-ct+"A"+ct+","+ct+" 0 1,"+Ct+" 0,"+ct}return Je.innerRadius=function(ct){return arguments.length?(ee=Bn(ct),Je):ee},Je.outerRadius=function(ct){return arguments.length?(he=Bn(ct),Je):he},Je.cornerRadius=function(ct){return arguments.length?(Me=Bn(ct),Je):Me},Je.padRadius=function(ct){return arguments.length?(Oe=ct==ys?ys:Bn(ct),Je):Oe},Je.startAngle=function(ct){return arguments.length?(Fe=Bn(ct),Je):Fe},Je.endAngle=function(ct){return arguments.length?(Ue=Bn(ct),Je):Ue},Je.padAngle=function(ct){return arguments.length?(Ge=Bn(ct),Je):Ge},Je.centroid=function(){var ct=(+ee.apply(this,arguments)+ +he.apply(this,arguments))/2,Ct=(+Fe.apply(this,arguments)+ +Ue.apply(this,arguments))/2-zt;return[Math.cos(Ct)*ct,Math.sin(Ct)*ct]},Je};var ys="auto";function Ji(ee){return ee.innerRadius}function Ho(ee){return ee.outerRadius}function co(ee){return ee.startAngle}function _a(ee){return ee.endAngle}function Ao(ee){return ee&&ee.padAngle}function Ha(ee,he,Me,Oe){return(ee-Me)*he-(he-Oe)*ee>0?0:1}function Da(ee,he,Me,Oe,Fe){var Ue=ee[0]-he[0],Ge=ee[1]-he[1],Je=(Fe?Oe:-Oe)/Math.sqrt(Ue*Ue+Ge*Ge),rt=Je*Ge,ct=-Je*Ue,Ct=ee[0]+rt,Dt=ee[1]+ct,Ft=he[0]+rt,Wt=he[1]+ct,cn=(Ct+Ft)/2,Xt=(Dt+Wt)/2,tn=Ft-Ct,$t=Wt-Dt,_n=tn*tn+$t*$t,dn=Me-Oe,Qt=Ct*Wt-Ft*Dt,Cn=($t<0?-1:1)*Math.sqrt(Math.max(0,dn*dn*_n-Qt*Qt)),Dn=(Qt*$t-tn*Cn)/_n,Jn=(-Qt*tn-$t*Cn)/_n,Kn=(Qt*$t+tn*Cn)/_n,vr=(-Qt*tn+$t*Cn)/_n,yr=Dn-cn,fr=Jn-Xt,gr=Kn-cn,Sr=vr-Xt;return yr*yr+fr*fr>gr*gr+Sr*Sr&&(Dn=Kn,Jn=vr),[[Dn-rt,Jn-ct],[Dn*Me/dn,Jn*Me/dn]]}function qo(){return!0}function Ki(ee){var he=Rn,Me=qn,Oe=qo,Fe=ii,Ue=Fe.key,Ge=.7;function Je(rt){var ct,Ct=[],Dt=[],Ft=-1,Wt=rt.length,cn=Bn(he),Xt=Bn(Me);function tn(){Ct.push("M",Fe(ee(Dt),Ge))}for(;++Ft<Wt;)Oe.call(this,ct=rt[Ft],Ft)?Dt.push([+cn.call(this,ct,Ft),+Xt.call(this,ct,Ft)]):Dt.length&&(tn(),Dt=[]);return Dt.length&&tn(),Ct.length?Ct.join(""):null}return Je.x=function(rt){return arguments.length?(he=rt,Je):he},Je.y=function(rt){return arguments.length?(Me=rt,Je):Me},Je.defined=function(rt){return arguments.length?(Oe=rt,Je):Oe},Je.interpolate=function(rt){return arguments.length?(Ue=typeof rt=="function"?Fe=rt:(Fe=Fa.get(rt)||ii).key,Je):Ue},Je.tension=function(rt){return arguments.length?(Ge=rt,Je):Ge},Je}l.svg.line=function(){return Ki(N)};var Fa=l.map({linear:ii,"linear-closed":xs,step:function(ee){for(var he=0,Me=ee.length,Oe=ee[0],Fe=[Oe[0],",",Oe[1]];++he<Me;)Fe.push("H",(Oe[0]+(Oe=ee[he])[0])/2,"V",Oe[1]);return Me>1&&Fe.push("H",Oe[0]),Fe.join("")},"step-before":Ea,"step-after":Ba,basis:ri,"basis-open":function(ee){if(ee.length<4)return ii(ee);for(var he,Me=[],Oe=-1,Fe=ee.length,Ue=[0],Ge=[0];++Oe<3;)he=ee[Oe],Ue.push(he[0]),Ge.push(he[1]);for(Me.push(Vi(Qa,Ue)+","+Vi(Qa,Ge)),--Oe;++Oe<Fe;)he=ee[Oe],Ue.shift(),Ue.push(he[0]),Ge.shift(),Ge.push(he[1]),Mo(Me,Ue,Ge);return Me.join("")},"basis-closed":function(ee){for(var he,Me,Oe=-1,Fe=ee.length,Ue=Fe+4,Ge=[],Je=[];++Oe<4;)Me=ee[Oe%Fe],Ge.push(Me[0]),Je.push(Me[1]);for(he=[Vi(Qa,Ge),",",Vi(Qa,Je)],--Oe;++Oe<Ue;)Me=ee[Oe%Fe],Ge.shift(),Ge.push(Me[0]),Je.shift(),Je.push(Me[1]),Mo(he,Ge,Je);return he.join("")},bundle:function(ee,he){var Me=ee.length-1;if(Me)for(var Oe,Fe,Ue=ee[0][0],Ge=ee[0][1],Je=ee[Me][0]-Ue,rt=ee[Me][1]-Ge,ct=-1;++ct<=Me;)Fe=ct/Me,(Oe=ee[ct])[0]=he*Oe[0]+(1-he)*(Ue+Fe*Je),Oe[1]=he*Oe[1]+(1-he)*(Ge+Fe*rt);return ri(ee)},cardinal:function(ee,he){return ee.length<3?ii(ee):ee[0]+$a(ee,fa(ee,he))},"cardinal-open":function(ee,he){return ee.length<4?ii(ee):ee[1]+$a(ee.slice(1,-1),fa(ee,he))},"cardinal-closed":function(ee,he){return ee.length<3?xs(ee):ee[0]+$a((ee.push(ee[0]),ee),fa([ee[ee.length-2]].concat(ee,[ee[1]]),he))},monotone:function(ee){return ee.length<3?ii(ee):ee[0]+$a(ee,function(he){for(var Me,Oe,Fe,Ue,Ge=[],Je=function(Ct){for(var Dt=0,Ft=Ct.length-1,Wt=[],cn=Ct[0],Xt=Ct[1],tn=Wt[0]=fo(cn,Xt);++Dt<Ft;)Wt[Dt]=(tn+(tn=fo(cn=Xt,Xt=Ct[Dt+1])))/2;return Wt[Dt]=tn,Wt}(he),rt=-1,ct=he.length-1;++rt<ct;)Me=fo(he[rt],he[rt+1]),y(Me)<Pt?Je[rt]=Je[rt+1]=0:(Ue=(Oe=Je[rt]/Me)*Oe+(Fe=Je[rt+1]/Me)*Fe)>9&&(Ue=3*Me/Math.sqrt(Ue),Je[rt]=Ue*Oe,Je[rt+1]=Ue*Fe);for(rt=-1;++rt<=ct;)Ue=(he[Math.min(ct,rt+1)][0]-he[Math.max(0,rt-1)][0])/(6*(1+Je[rt]*Je[rt])),Ge.push([Ue||0,Je[rt]*Ue||0]);return Ge}(ee))}});function ii(ee){return ee.length>1?ee.join("L"):ee+"Z"}function xs(ee){return ee.join("L")+"Z"}function Ea(ee){for(var he=0,Me=ee.length,Oe=ee[0],Fe=[Oe[0],",",Oe[1]];++he<Me;)Fe.push("V",(Oe=ee[he])[1],"H",Oe[0]);return Fe.join("")}function Ba(ee){for(var he=0,Me=ee.length,Oe=ee[0],Fe=[Oe[0],",",Oe[1]];++he<Me;)Fe.push("H",(Oe=ee[he])[0],"V",Oe[1]);return Fe.join("")}function $a(ee,he){if(he.length<1||ee.length!=he.length&&ee.length!=he.length+2)return ii(ee);var Me=ee.length!=he.length,Oe="",Fe=ee[0],Ue=ee[1],Ge=he[0],Je=Ge,rt=1;if(Me&&(Oe+="Q"+(Ue[0]-2*Ge[0]/3)+","+(Ue[1]-2*Ge[1]/3)+","+Ue[0]+","+Ue[1],Fe=ee[1],rt=2),he.length>1){Je=he[1],Ue=ee[rt],rt++,Oe+="C"+(Fe[0]+Ge[0])+","+(Fe[1]+Ge[1])+","+(Ue[0]-Je[0])+","+(Ue[1]-Je[1])+","+Ue[0]+","+Ue[1];for(var ct=2;ct<he.length;ct++,rt++)Ue=ee[rt],Je=he[ct],Oe+="S"+(Ue[0]-Je[0])+","+(Ue[1]-Je[1])+","+Ue[0]+","+Ue[1]}if(Me){var Ct=ee[rt];Oe+="Q"+(Ue[0]+2*Je[0]/3)+","+(Ue[1]+2*Je[1]/3)+","+Ct[0]+","+Ct[1]}return Oe}function fa(ee,he){for(var Me,Oe=[],Fe=(1-he)/2,Ue=ee[0],Ge=ee[1],Je=1,rt=ee.length;++Je<rt;)Me=Ue,Ue=Ge,Ge=ee[Je],Oe.push([Fe*(Ge[0]-Me[0]),Fe*(Ge[1]-Me[1])]);return Oe}function ri(ee){if(ee.length<3)return ii(ee);var he=1,Me=ee.length,Oe=ee[0],Fe=Oe[0],Ue=Oe[1],Ge=[Fe,Fe,Fe,(Oe=ee[1])[0]],Je=[Ue,Ue,Ue,Oe[1]],rt=[Fe,",",Ue,"L",Vi(Qa,Ge),",",Vi(Qa,Je)];for(ee.push(ee[Me-1]);++he<=Me;)Oe=ee[he],Ge.shift(),Ge.push(Oe[0]),Je.shift(),Je.push(Oe[1]),Mo(rt,Ge,Je);return ee.pop(),rt.push("L",Oe),rt.join("")}function Vi(ee,he){return ee[0]*he[0]+ee[1]*he[1]+ee[2]*he[2]+ee[3]*he[3]}Fa.forEach(function(ee,he){he.key=ee,he.closed=/-closed$/.test(ee)});var qa=[0,2/3,1/3,0],ha=[0,1/3,2/3,0],Qa=[0,1/6,2/3,1/6];function Mo(ee,he,Me){ee.push("C",Vi(qa,he),",",Vi(qa,Me),",",Vi(ha,he),",",Vi(ha,Me),",",Vi(Qa,he),",",Vi(Qa,Me))}function fo(ee,he){return(he[1]-ee[1])/(he[0]-ee[0])}function $i(ee){for(var he,Me,Oe,Fe=-1,Ue=ee.length;++Fe<Ue;)Me=(he=ee[Fe])[0],Oe=he[1]-zt,he[0]=Me*Math.cos(Oe),he[1]=Me*Math.sin(Oe);return ee}function Na(ee){var he=Rn,Me=Rn,Oe=0,Fe=qn,Ue=qo,Ge=ii,Je=Ge.key,rt=Ge,ct="L",Ct=.7;function Dt(Ft){var Wt,cn,Xt,tn=[],$t=[],_n=[],dn=-1,Qt=Ft.length,Cn=Bn(he),Dn=Bn(Oe),Jn=he===Me?function(){return cn}:Bn(Me),Kn=Oe===Fe?function(){return Xt}:Bn(Fe);function vr(){tn.push("M",Ge(ee(_n),Ct),ct,rt(ee($t.reverse()),Ct),"Z")}for(;++dn<Qt;)Ue.call(this,Wt=Ft[dn],dn)?($t.push([cn=+Cn.call(this,Wt,dn),Xt=+Dn.call(this,Wt,dn)]),_n.push([+Jn.call(this,Wt,dn),+Kn.call(this,Wt,dn)])):$t.length&&(vr(),$t=[],_n=[]);return $t.length&&vr(),tn.length?tn.join(""):null}return Dt.x=function(Ft){return arguments.length?(he=Me=Ft,Dt):Me},Dt.x0=function(Ft){return arguments.length?(he=Ft,Dt):he},Dt.x1=function(Ft){return arguments.length?(Me=Ft,Dt):Me},Dt.y=function(Ft){return arguments.length?(Oe=Fe=Ft,Dt):Fe},Dt.y0=function(Ft){return arguments.length?(Oe=Ft,Dt):Oe},Dt.y1=function(Ft){return arguments.length?(Fe=Ft,Dt):Fe},Dt.defined=function(Ft){return arguments.length?(Ue=Ft,Dt):Ue},Dt.interpolate=function(Ft){return arguments.length?(Je=typeof Ft=="function"?Ge=Ft:(Ge=Fa.get(Ft)||ii).key,rt=Ge.reverse||Ge,ct=Ge.closed?"M":"L",Dt):Je},Dt.tension=function(Ft){return arguments.length?(Ct=Ft,Dt):Ct},Dt}function Lr(ee){return ee.source}function Ir(ee){return ee.target}function rs(ee){return ee.radius}function ho(ee){return[ee.x,ee.y]}function Ga(ee){return function(){var he=ee.apply(this,arguments),Me=he[0],Oe=he[1]-zt;return[Me*Math.cos(Oe),Me*Math.sin(Oe)]}}function Qi(){return 64}function zs(){return"circle"}function pa(ee){var he=Math.sqrt(ee/Et);return"M0,"+he+"A"+he+","+he+" 0 1,1 0,"+-he+"A"+he+","+he+" 0 1,1 0,"+he+"Z"}l.svg.line.radial=function(){var ee=Ki($i);return ee.radius=ee.x,delete ee.x,ee.angle=ee.y,delete ee.y,ee},Ea.reverse=Ba,Ba.reverse=Ea,l.svg.area=function(){return Na(N)},l.svg.area.radial=function(){var ee=Na($i);return ee.radius=ee.x,delete ee.x,ee.innerRadius=ee.x0,delete ee.x0,ee.outerRadius=ee.x1,delete ee.x1,ee.angle=ee.y,delete ee.y,ee.startAngle=ee.y0,delete ee.y0,ee.endAngle=ee.y1,delete ee.y1,ee},l.svg.chord=function(){var ee=Lr,he=Ir,Me=rs,Oe=co,Fe=_a;function Ue(ct,Ct){var Dt,Ft,Wt=Ge(this,ee,ct,Ct),cn=Ge(this,he,ct,Ct);return"M"+Wt.p0+Je(Wt.r,Wt.p1,Wt.a1-Wt.a0)+(Ft=cn,((Dt=Wt).a0==Ft.a0&&Dt.a1==Ft.a1?rt(Wt.r,Wt.p1,Wt.r,Wt.p0):rt(Wt.r,Wt.p1,cn.r,cn.p0)+Je(cn.r,cn.p1,cn.a1-cn.a0)+rt(cn.r,cn.p1,Wt.r,Wt.p0))+"Z")}function Ge(ct,Ct,Dt,Ft){var Wt=Ct.call(ct,Dt,Ft),cn=Me.call(ct,Wt,Ft),Xt=Oe.call(ct,Wt,Ft)-zt,tn=Fe.call(ct,Wt,Ft)-zt;return{r:cn,a0:Xt,a1:tn,p0:[cn*Math.cos(Xt),cn*Math.sin(Xt)],p1:[cn*Math.cos(tn),cn*Math.sin(tn)]}}function Je(ct,Ct,Dt){return"A"+ct+","+ct+" 0 "+ +(Dt>Et)+",1 "+Ct}function rt(ct,Ct,Dt,Ft){return"Q 0,0 "+Ft}return Ue.radius=function(ct){return arguments.length?(Me=Bn(ct),Ue):Me},Ue.source=function(ct){return arguments.length?(ee=Bn(ct),Ue):ee},Ue.target=function(ct){return arguments.length?(he=Bn(ct),Ue):he},Ue.startAngle=function(ct){return arguments.length?(Oe=Bn(ct),Ue):Oe},Ue.endAngle=function(ct){return arguments.length?(Fe=Bn(ct),Ue):Fe},Ue},l.svg.diagonal=function(){var ee=Lr,he=Ir,Me=ho;function Oe(Fe,Ue){var Ge=ee.call(this,Fe,Ue),Je=he.call(this,Fe,Ue),rt=(Ge.y+Je.y)/2,ct=[Ge,{x:Ge.x,y:rt},{x:Je.x,y:rt},Je];return"M"+(ct=ct.map(Me))[0]+"C"+ct[1]+" "+ct[2]+" "+ct[3]}return Oe.source=function(Fe){return arguments.length?(ee=Bn(Fe),Oe):ee},Oe.target=function(Fe){return arguments.length?(he=Bn(Fe),Oe):he},Oe.projection=function(Fe){return arguments.length?(Me=Fe,Oe):Me},Oe},l.svg.diagonal.radial=function(){var ee=l.svg.diagonal(),he=ho,Me=ee.projection;return ee.projection=function(Oe){return arguments.length?Me(Ga(he=Oe)):he},ee},l.svg.symbol=function(){var ee=zs,he=Qi;function Me(Oe,Fe){return(is.get(ee.call(this,Oe,Fe))||pa)(he.call(this,Oe,Fe))}return Me.type=function(Oe){return arguments.length?(ee=Bn(Oe),Me):ee},Me.size=function(Oe){return arguments.length?(he=Bn(Oe),Me):he},Me};var is=l.map({circle:pa,cross:function(ee){var he=Math.sqrt(ee/5)/2;return"M"+-3*he+","+-he+"H"+-he+"V"+-3*he+"H"+he+"V"+-he+"H"+3*he+"V"+he+"H"+he+"V"+3*he+"H"+-he+"V"+he+"H"+-3*he+"Z"},diamond:function(ee){var he=Math.sqrt(ee/(2*li)),Me=he*li;return"M0,"+-he+"L"+Me+",0 0,"+he+" "+-Me+",0Z"},square:function(ee){var he=Math.sqrt(ee)/2;return"M"+-he+","+-he+"L"+he+","+-he+" "+he+","+he+" "+-he+","+he+"Z"},"triangle-down":function(ee){var he=Math.sqrt(ee/po),Me=he*po/2;return"M0,"+Me+"L"+he+","+-Me+" "+-he+","+-Me+"Z"},"triangle-up":function(ee){var he=Math.sqrt(ee/po),Me=he*po/2;return"M0,"+-Me+"L"+he+","+Me+" "+-he+","+Me+"Z"}});l.svg.symbolTypes=is.keys();var po=Math.sqrt(3),li=Math.tan(30*Ze);se.transition=function(ee){for(var he,Me,Oe=$e||++_t,Fe=G(ee),Ue=[],Ge=at||{time:Date.now(),ease:ro,delay:0,duration:250},Je=-1,rt=this.length;++Je<rt;){Ue.push(he=[]);for(var ct=this[Je],Ct=-1,Dt=ct.length;++Ct<Dt;)(Me=ct[Ct])&&H(Me,Ct,Fe,Oe,Ge),he.push(Me)}return Xe(Ue,Fe,Oe)},se.interrupt=function(ee){return this.each(ee==null?di:Rs(G(ee)))};var di=Rs(G());function Rs(ee){return function(){var he,Me,Oe;(he=this[ee])&&(Oe=he[Me=he.active])&&(Oe.timer.c=null,Oe.timer.t=NaN,--he.count?delete he[Me]:delete this[ee],he.active+=.5,Oe.event&&Oe.event.interrupt.call(this,this.__data__,Oe.index))}}function Xe(ee,he,Me){return W(ee,ft),ee.namespace=he,ee.id=Me,ee}var $e,at,ft=[],_t=0;function xt(ee,he,Me,Oe){var Fe=ee.id,Ue=ee.namespace;return Re(ee,typeof Me=="function"?function(Ge,Je,rt){Ge[Ue][Fe].tween.set(he,Oe(Me.call(Ge,Ge.__data__,Je,rt)))}:(Me=Oe(Me),function(Ge){Ge[Ue][Fe].tween.set(he,Me)}))}function B(ee){return ee==null&&(ee=""),function(){this.textContent=ee}}function G(ee){return ee==null?"__transition__":"__transition_"+ee+"__"}function H(ee,he,Me,Oe,Fe){var Ue,Ge,Je,rt,ct,Ct=ee[Me]||(ee[Me]={active:0,count:0}),Dt=Ct[Oe];function Ft(cn){var Xt=Ct.active,tn=Ct[Xt];for(var $t in tn&&(tn.timer.c=null,tn.timer.t=NaN,--Ct.count,delete Ct[Xt],tn.event&&tn.event.interrupt.call(ee,ee.__data__,tn.index)),Ct)if(+$t<Oe){var _n=Ct[$t];_n.timer.c=null,_n.timer.t=NaN,--Ct.count,delete Ct[$t]}Ge.c=Wt,Gt(function(){return Ge.c&&Wt(cn||1)&&(Ge.c=null,Ge.t=NaN),1},0,Ue),Ct.active=Oe,Dt.event&&Dt.event.start.call(ee,ee.__data__,he),ct=[],Dt.tween.forEach(function(dn,Qt){(Qt=Qt.call(ee,ee.__data__,he))&&ct.push(Qt)}),rt=Dt.ease,Je=Dt.duration}function Wt(cn){for(var Xt=cn/Je,tn=rt(Xt),$t=ct.length;$t>0;)ct[--$t].call(ee,tn);if(Xt>=1)return Dt.event&&Dt.event.end.call(ee,ee.__data__,he),--Ct.count?delete Ct[Oe]:delete ee[Me],1}Dt||(Ue=Fe.time,Ge=Gt(function(cn){var Xt=Dt.delay;if(Ge.t=Xt+Ue,Xt<=cn)return Ft(cn-Xt);Ge.c=Ft},0,Ue),Dt=Ct[Oe]={tween:new w,time:Ue,timer:Ge,delay:Fe.delay,duration:Fe.duration,ease:Fe.ease,index:he},Fe=null,++Ct.count)}ft.call=se.call,ft.empty=se.empty,ft.node=se.node,ft.size=se.size,l.transition=function(ee,he){return ee&&ee.transition?$e?ee.transition(he):ee:l.selection().transition(ee)},l.transition.prototype=ft,ft.select=function(ee){var he,Me,Oe,Fe=this.id,Ue=this.namespace,Ge=[];ee=ge(ee);for(var Je=-1,rt=this.length;++Je<rt;){Ge.push(he=[]);for(var ct=this[Je],Ct=-1,Dt=ct.length;++Ct<Dt;)(Oe=ct[Ct])&&(Me=ee.call(Oe,Oe.__data__,Ct,Je))?("__data__"in Oe&&(Me.__data__=Oe.__data__),H(Me,Ct,Ue,Fe,Oe[Ue][Fe]),he.push(Me)):he.push(null)}return Xe(Ge,Ue,Fe)},ft.selectAll=function(ee){var he,Me,Oe,Fe,Ue,Ge=this.id,Je=this.namespace,rt=[];ee=ue(ee);for(var ct=-1,Ct=this.length;++ct<Ct;)for(var Dt=this[ct],Ft=-1,Wt=Dt.length;++Ft<Wt;)if(Oe=Dt[Ft]){Ue=Oe[Je][Ge],Me=ee.call(Oe,Oe.__data__,Ft,ct),rt.push(he=[]);for(var cn=-1,Xt=Me.length;++cn<Xt;)(Fe=Me[cn])&&H(Fe,cn,Je,Ge,Ue),he.push(Fe)}return Xe(rt,Je,Ge)},ft.filter=function(ee){var he,Me,Oe=[];typeof ee!="function"&&(ee=De(ee));for(var Fe=0,Ue=this.length;Fe<Ue;Fe++){Oe.push(he=[]);for(var Ge,Je=0,rt=(Ge=this[Fe]).length;Je<rt;Je++)(Me=Ge[Je])&&ee.call(Me,Me.__data__,Je,Fe)&&he.push(Me)}return Xe(Oe,this.namespace,this.id)},ft.tween=function(ee,he){var Me=this.id,Oe=this.namespace;return arguments.length<2?this.node()[Oe][Me].tween.get(ee):Re(this,he==null?function(Fe){Fe[Oe][Me].tween.remove(ee)}:function(Fe){Fe[Oe][Me].tween.set(ee,he)})},ft.attr=function(ee,he){if(arguments.length<2){for(he in ee)this.attr(he,ee[he]);return this}var Me=ee=="transform"?Gs:xa,Oe=l.ns.qualify(ee);function Fe(){this.removeAttribute(Oe)}function Ue(){this.removeAttributeNS(Oe.space,Oe.local)}function Ge(rt){return rt==null?Fe:(rt+="",function(){var ct,Ct=this.getAttribute(Oe);return Ct!==rt&&(ct=Me(Ct,rt),function(Dt){this.setAttribute(Oe,ct(Dt))})})}function Je(rt){return rt==null?Ue:(rt+="",function(){var ct,Ct=this.getAttributeNS(Oe.space,Oe.local);return Ct!==rt&&(ct=Me(Ct,rt),function(Dt){this.setAttributeNS(Oe.space,Oe.local,ct(Dt))})})}return xt(this,"attr."+ee,he,Oe.local?Je:Ge)},ft.attrTween=function(ee,he){var Me=l.ns.qualify(ee);return this.tween("attr."+ee,Me.local?function(Oe,Fe){var Ue=he.call(this,Oe,Fe,this.getAttributeNS(Me.space,Me.local));return Ue&&function(Ge){this.setAttributeNS(Me.space,Me.local,Ue(Ge))}}:function(Oe,Fe){var Ue=he.call(this,Oe,Fe,this.getAttribute(Me));return Ue&&function(Ge){this.setAttribute(Me,Ue(Ge))}})},ft.style=function(ee,he,Me){var Oe=arguments.length;if(Oe<3){if(typeof ee!="string"){for(Me in Oe<2&&(he=""),ee)this.style(Me,ee[Me],he);return this}Me=""}function Fe(){this.style.removeProperty(ee)}function Ue(Ge){return Ge==null?Fe:(Ge+="",function(){var Je,rt=t(this).getComputedStyle(this,null).getPropertyValue(ee);return rt!==Ge&&(Je=xa(rt,Ge),function(ct){this.style.setProperty(ee,Je(ct),Me)})})}return xt(this,"style."+ee,he,Ue)},ft.styleTween=function(ee,he,Me){function Oe(Fe,Ue){var Ge=he.call(this,Fe,Ue,t(this).getComputedStyle(this,null).getPropertyValue(ee));return Ge&&function(Je){this.style.setProperty(ee,Ge(Je),Me)}}return arguments.length<3&&(Me=""),this.tween("style."+ee,Oe)},ft.text=function(ee){return xt(this,"text",ee,B)},ft.remove=function(){var ee=this.namespace;return this.each("end.transition",function(){var he;this[ee].count<2&&(he=this.parentNode)&&he.removeChild(this)})},ft.ease=function(ee){var he=this.id,Me=this.namespace;return arguments.length<1?this.node()[Me][he].ease:(typeof ee!="function"&&(ee=l.ease.apply(l,arguments)),Re(this,function(Oe){Oe[Me][he].ease=ee}))},ft.delay=function(ee){var he=this.id,Me=this.namespace;return arguments.length<1?this.node()[Me][he].delay:Re(this,typeof ee=="function"?function(Oe,Fe,Ue){Oe[Me][he].delay=+ee.call(Oe,Oe.__data__,Fe,Ue)}:(ee=+ee,function(Oe){Oe[Me][he].delay=ee}))},ft.duration=function(ee){var he=this.id,Me=this.namespace;return arguments.length<1?this.node()[Me][he].duration:Re(this,typeof ee=="function"?function(Oe,Fe,Ue){Oe[Me][he].duration=Math.max(1,ee.call(Oe,Oe.__data__,Fe,Ue))}:(ee=Math.max(1,ee),function(Oe){Oe[Me][he].duration=ee}))},ft.each=function(ee,he){var Me=this.id,Oe=this.namespace;if(arguments.length<2){var Fe=at,Ue=$e;try{$e=Me,Re(this,function(Ge,Je,rt){at=Ge[Oe][Me],ee.call(Ge,Ge.__data__,Je,rt)})}finally{at=Fe,$e=Ue}}else Re(this,function(Ge){var Je=Ge[Oe][Me];(Je.event||(Je.event=l.dispatch("start","end","interrupt"))).on(ee,he)});return this},ft.transition=function(){for(var ee,he,Me,Oe=this.id,Fe=++_t,Ue=this.namespace,Ge=[],Je=0,rt=this.length;Je<rt;Je++){Ge.push(ee=[]);for(var ct,Ct=0,Dt=(ct=this[Je]).length;Ct<Dt;Ct++)(he=ct[Ct])&&H(he,Ct,Ue,Fe,{time:(Me=he[Ue][Oe]).time,ease:Me.ease,delay:Me.delay+Me.duration,duration:Me.duration}),ee.push(he)}return Xe(Ge,Ue,Fe)},l.svg.axis=function(){var ee,he=l.scale.linear(),Me=te,Oe=6,Fe=6,Ue=3,Ge=[10],Je=null;function rt(ct){ct.each(function(){var Ct,Dt=l.select(this),Ft=this.__chart__||he,Wt=this.__chart__=he.copy(),cn=Je??(Wt.ticks?Wt.ticks.apply(Wt,Ge):Wt.domain()),Xt=ee??(Wt.tickFormat?Wt.tickFormat.apply(Wt,Ge):N),tn=Dt.selectAll(".tick").data(cn,Wt),$t=tn.enter().insert("g",".domain").attr("class","tick").style("opacity",Pt),_n=l.transition(tn.exit()).style("opacity",Pt).remove(),dn=l.transition(tn.order()).style("opacity",1),Qt=Math.max(Oe,0)+Ue,Cn=Ka(Wt),Dn=Dt.selectAll(".domain").data([0]),Jn=(Dn.enter().append("path").attr("class","domain"),l.transition(Dn));$t.append("line"),$t.append("text");var Kn,vr,yr,fr,gr=$t.select("line"),Sr=dn.select("line"),Vr=tn.select("text").text(Xt),Hr=$t.select("text"),pr=dn.select("text"),Er=Me==="top"||Me==="left"?-1:1;if(Me==="bottom"||Me==="top"?(Ct=Le,Kn="x",yr="y",vr="x2",fr="y2",Vr.attr("dy",Er<0?"0em":".71em").style("text-anchor","middle"),Jn.attr("d","M"+Cn[0]+","+Er*Fe+"V0H"+Cn[1]+"V"+Er*Fe)):(Ct=Be,Kn="y",yr="x",vr="y2",fr="x2",Vr.attr("dy",".32em").style("text-anchor",Er<0?"end":"start"),Jn.attr("d","M"+Er*Fe+","+Cn[0]+"H0V"+Cn[1]+"H"+Er*Fe)),gr.attr(fr,Er*Oe),Hr.attr(yr,Er*Qt),Sr.attr(vr,0).attr(fr,Er*Oe),pr.attr(Kn,0).attr(yr,Er*Qt),Wt.rangeBand){var Fr=Wt,Dr=Fr.rangeBand()/2;Ft=Wt=function(Yr){return Fr(Yr)+Dr}}else Ft.rangeBand?Ft=Wt:_n.call(Ct,Wt,Ft);$t.call(Ct,Ft,Wt),dn.call(Ct,Wt,Wt)})}return rt.scale=function(ct){return arguments.length?(he=ct,rt):he},rt.orient=function(ct){return arguments.length?(Me=ct in me?ct+"":te,rt):Me},rt.ticks=function(){return arguments.length?(Ge=b(arguments),rt):Ge},rt.tickValues=function(ct){return arguments.length?(Je=ct,rt):Je},rt.tickFormat=function(ct){return arguments.length?(ee=ct,rt):ee},rt.tickSize=function(ct){var Ct=arguments.length;return Ct?(Oe=+ct,Fe=+arguments[Ct-1],rt):Oe},rt.innerTickSize=function(ct){return arguments.length?(Oe=+ct,rt):Oe},rt.outerTickSize=function(ct){return arguments.length?(Fe=+ct,rt):Fe},rt.tickPadding=function(ct){return arguments.length?(Ue=+ct,rt):Ue},rt.tickSubdivide=function(){return arguments.length&&rt},rt};var te="bottom",me={top:1,right:1,bottom:1,left:1};function Le(ee,he,Me){ee.attr("transform",function(Oe){var Fe=he(Oe);return"translate("+(isFinite(Fe)?Fe:Me(Oe))+",0)"})}function Be(ee,he,Me){ee.attr("transform",function(Oe){var Fe=he(Oe);return"translate(0,"+(isFinite(Fe)?Fe:Me(Oe))+")"})}l.svg.brush=function(){var ee,he,Me=Z(Ct,"brushstart","brush","brushend"),Oe=null,Fe=null,Ue=[0,0],Ge=[0,0],Je=!0,rt=!0,ct=et[0];function Ct(Xt){Xt.each(function(){var tn=l.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",cn).on("touchstart.brush",cn),$t=tn.selectAll(".background").data([0]);$t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),tn.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var _n=tn.selectAll(".resize").data(ct,N);_n.exit().remove(),_n.enter().append("g").attr("class",function(Dn){return"resize "+Dn}).style("cursor",function(Dn){return qe[Dn]}).append("rect").attr("x",function(Dn){return/[ew]$/.test(Dn)?-3:null}).attr("y",function(Dn){return/^[ns]/.test(Dn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),_n.style("display",Ct.empty()?"none":null);var dn,Qt=l.transition(tn),Cn=l.transition($t);Oe&&(dn=Ka(Oe),Cn.attr("x",dn[0]).attr("width",dn[1]-dn[0]),Ft(Qt)),Fe&&(dn=Ka(Fe),Cn.attr("y",dn[0]).attr("height",dn[1]-dn[0]),Wt(Qt)),Dt(Qt)})}function Dt(Xt){Xt.selectAll(".resize").attr("transform",function(tn){return"translate("+Ue[+/e$/.test(tn)]+","+Ge[+/^s/.test(tn)]+")"})}function Ft(Xt){Xt.select(".extent").attr("x",Ue[0]),Xt.selectAll(".extent,.n>rect,.s>rect").attr("width",Ue[1]-Ue[0])}function Wt(Xt){Xt.select(".extent").attr("y",Ge[0]),Xt.selectAll(".extent,.e>rect,.w>rect").attr("height",Ge[1]-Ge[0])}function cn(){var Xt,tn,$t=this,_n=l.select(l.event.target),dn=Me.of($t,arguments),Qt=l.select($t),Cn=_n.datum(),Dn=!/^(n|s)$/.test(Cn)&&Oe,Jn=!/^(e|w)$/.test(Cn)&&Fe,Kn=_n.classed("extent"),vr=pt($t),yr=l.mouse($t),fr=l.select(t($t)).on("keydown.brush",Vr).on("keyup.brush",Hr);if(l.event.changedTouches?fr.on("touchmove.brush",pr).on("touchend.brush",Fr):fr.on("mousemove.brush",pr).on("mouseup.brush",Fr),Qt.interrupt().selectAll("*").interrupt(),Kn)yr[0]=Ue[0]-yr[0],yr[1]=Ge[0]-yr[1];else if(Cn){var gr=+/w$/.test(Cn),Sr=+/^n/.test(Cn);tn=[Ue[1-gr]-yr[0],Ge[1-Sr]-yr[1]],yr[0]=Ue[gr],yr[1]=Ge[Sr]}else l.event.altKey&&(Xt=yr.slice());function Vr(){l.event.keyCode==32&&(Kn||(Xt=null,yr[0]-=Ue[1],yr[1]-=Ge[1],Kn=2),J())}function Hr(){l.event.keyCode==32&&Kn==2&&(yr[0]+=Ue[1],yr[1]+=Ge[1],Kn=0,J())}function pr(){var Dr=l.mouse($t),Yr=!1;tn&&(Dr[0]+=tn[0],Dr[1]+=tn[1]),Kn||(l.event.altKey?(Xt||(Xt=[(Ue[0]+Ue[1])/2,(Ge[0]+Ge[1])/2]),yr[0]=Ue[+(Dr[0]<Xt[0])],yr[1]=Ge[+(Dr[1]<Xt[1])]):Xt=null),Dn&&Er(Dr,Oe,0)&&(Ft(Qt),Yr=!0),Jn&&Er(Dr,Fe,1)&&(Wt(Qt),Yr=!0),Yr&&(Dt(Qt),dn({type:"brush",mode:Kn?"move":"resize"}))}function Er(Dr,Yr,Zr){var $r,fi,bi=Ka(Yr),gi=bi[0],ui=bi[1],hi=yr[Zr],vi=Zr?Ge:Ue,Li=vi[1]-vi[0];if(Kn&&(gi-=hi,ui-=Li+hi),$r=(Zr?rt:Je)?Math.max(gi,Math.min(ui,Dr[Zr])):Dr[Zr],Kn?fi=($r+=hi)+Li:(Xt&&(hi=Math.max(gi,Math.min(ui,2*Xt[Zr]-$r))),hi<$r?(fi=$r,$r=hi):fi=hi),vi[0]!=$r||vi[1]!=fi)return Zr?he=null:ee=null,vi[0]=$r,vi[1]=fi,!0}function Fr(){pr(),Qt.style("pointer-events","all").selectAll(".resize").style("display",Ct.empty()?"none":null),l.select("body").style("cursor",null),fr.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),vr(),dn({type:"brushend"})}Qt.style("pointer-events","none").selectAll(".resize").style("display",null),l.select("body").style("cursor",_n.style("cursor")),dn({type:"brushstart"}),pr()}return Ct.event=function(Xt){Xt.each(function(){var tn=Me.of(this,arguments),$t={x:Ue,y:Ge,i:ee,j:he},_n=this.__chart__||$t;this.__chart__=$t,$e?l.select(this).transition().each("start.brush",function(){ee=_n.i,he=_n.j,Ue=_n.x,Ge=_n.y,tn({type:"brushstart"})}).tween("brush:brush",function(){var dn=Sa(Ue,$t.x),Qt=Sa(Ge,$t.y);return ee=he=null,function(Cn){Ue=$t.x=dn(Cn),Ge=$t.y=Qt(Cn),tn({type:"brush",mode:"resize"})}}).each("end.brush",function(){ee=$t.i,he=$t.j,tn({type:"brush",mode:"resize"}),tn({type:"brushend"})}):(tn({type:"brushstart"}),tn({type:"brush",mode:"resize"}),tn({type:"brushend"}))})},Ct.x=function(Xt){return arguments.length?(ct=et[!(Oe=Xt)<<1|!Fe],Ct):Oe},Ct.y=function(Xt){return arguments.length?(ct=et[!Oe<<1|!(Fe=Xt)],Ct):Fe},Ct.clamp=function(Xt){return arguments.length?(Oe&&Fe?(Je=!!Xt[0],rt=!!Xt[1]):Oe?Je=!!Xt:Fe&&(rt=!!Xt),Ct):Oe&&Fe?[Je,rt]:Oe?Je:Fe?rt:null},Ct.extent=function(Xt){var tn,$t,_n,dn,Qt;return arguments.length?(Oe&&(tn=Xt[0],$t=Xt[1],Fe&&(tn=tn[0],$t=$t[0]),ee=[tn,$t],Oe.invert&&(tn=Oe(tn),$t=Oe($t)),$t<tn&&(Qt=tn,tn=$t,$t=Qt),tn==Ue[0]&&$t==Ue[1]||(Ue=[tn,$t])),Fe&&(_n=Xt[0],dn=Xt[1],Oe&&(_n=_n[1],dn=dn[1]),he=[_n,dn],Fe.invert&&(_n=Fe(_n),dn=Fe(dn)),dn<_n&&(Qt=_n,_n=dn,dn=Qt),_n==Ge[0]&&dn==Ge[1]||(Ge=[_n,dn])),Ct):(Oe&&(ee?(tn=ee[0],$t=ee[1]):(tn=Ue[0],$t=Ue[1],Oe.invert&&(tn=Oe.invert(tn),$t=Oe.invert($t)),$t<tn&&(Qt=tn,tn=$t,$t=Qt))),Fe&&(he?(_n=he[0],dn=he[1]):(_n=Ge[0],dn=Ge[1],Fe.invert&&(_n=Fe.invert(_n),dn=Fe.invert(dn)),dn<_n&&(Qt=_n,_n=dn,dn=Qt))),Oe&&Fe?[[tn,_n],[$t,dn]]:Oe?[tn,$t]:Fe&&[_n,dn])},Ct.clear=function(){return Ct.empty()||(Ue=[0,0],Ge=[0,0],ee=he=null),Ct},Ct.empty=function(){return!!Oe&&Ue[0]==Ue[1]||!!Fe&&Ge[0]==Ge[1]},l.rebind(Ct,Me,"on")};var qe={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},et=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function mt(ee){return JSON.parse(ee.responseText)}function bt(ee){var he=d.createRange();return he.selectNode(d.body),he.createContextualFragment(ee.responseText)}l.text=er(function(ee){return ee.responseText}),l.json=function(ee,he){return Xn(ee,"application/json",mt,he)},l.html=function(ee,he){return Xn(ee,"text/html",bt,he)},l.xml=er(function(ee){return ee.responseXML}),(k=typeof(S=l)=="function"?S.call(z,e,z,K):S)===void 0||(K.exports=k)}).apply(self)},88294:function(K,z,e){K.exports=e(62849)},62849:function(K,z,e){var S=e(91358),k=e(53435),l=e(18863),T=e(21527),b=e(71299),d=e(46775),s=e(30120),t=e(64941),o=e(90660),r=e(27084);function n(a,i){for(var u=i[0],h=i[1],f=1/(i[2]-u),x=1/(i[3]-h),v=new Array(a.length),g=0,y=a.length/2;g<y;g++)v[2*g]=k((a[2*g]-u)*f,0,1),v[2*g+1]=k((a[2*g+1]-h)*x,0,1);return v}K.exports=function(a,i){i||(i={}),a=s(a,"float64"),i=b(i,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var u=d(i.maxDepth,255),h=d(i.bounds,T(a,2));h[0]===h[2]&&h[2]++,h[1]===h[3]&&h[3]++;var f,x=n(a,h),v=a.length>>>1;i.dtype||(i.dtype="array"),typeof i.dtype=="string"?f=new(o(i.dtype))(v):i.dtype&&(f=i.dtype,Array.isArray(f)&&(f.length=v));for(var g=0;g<v;++g)f[g]=g;var y=[],p=[],m=[],w=[];(function N(R,V,F,D,U,j){if(!D.length)return null;var J=y[U]||(y[U]=[]),X=m[U]||(m[U]=[]),Z=p[U]||(p[U]=[]),Y=J.length;if(++U>u||j>1073741824){for(var W=0;W<D.length;W++)J.push(D[W]),X.push(j),Z.push(null,null,null,null);return Y}if(J.push(D[0]),X.push(j),D.length<=1)return Z.push(null,null,null,null),Y;for(var Q=.5*F,ne=R+Q,re=V+Q,ie=[],se=[],ge=[],ue=[],ce=1,le=D.length;ce<le;ce++){var de=D[ce],Ce=x[2*de],xe=x[2*de+1];Ce<ne?xe<re?ie.push(de):se.push(de):xe<re?ge.push(de):ue.push(de)}return j<<=2,Z.push(N(R,V,Q,ie,U,j),N(R,re,Q,se,U,j+1),N(ne,V,Q,ge,U,j+2),N(ne,re,Q,ue,U,j+3)),Y})(0,0,1,f,0,1);for(var c=0,M=0;M<y.length;M++){var _=y[M];if(f.set)f.set(_,c);else for(var E=0,L=_.length;E<L;E++)f[E+c]=_[E];var C=c+y[M].length;w[M]=[c,C],c=C}return f.range=function(){for(var N,R=[],V=arguments.length;V--;)R[V]=arguments[V];if(t(R[R.length-1])){var F=R.pop();R.length||F.x==null&&F.l==null&&F.left==null||(R=[F],N={}),N=b(F,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else N={};R.length||(R=h);var D,U=l.apply(void 0,R),j=[Math.min(U.x,U.x+U.width),Math.min(U.y,U.y+U.height),Math.max(U.x,U.x+U.width),Math.max(U.y,U.y+U.height)],J=j[0],X=j[1],Z=j[2],Y=j[3],W=n([J,X,Z,Y],h),Q=W[0],ne=W[1],re=W[2],ie=W[3],se=d(N.level,y.length);if(N.d!=null&&(typeof N.d=="number"?D=[N.d,N.d]:N.d.length&&(D=N.d),se=Math.min(Math.max(Math.ceil(-r(Math.abs(D[0])/(h[2]-h[0]))),Math.ceil(-r(Math.abs(D[1])/(h[3]-h[1])))),se)),se=Math.min(se,y.length),N.lod)return O(Q,ne,re,ie,se);var ge=[];function ue(le,de,Ce,xe,_e,we){if(_e!==null&&we!==null&&!(Q>le+Ce||ne>de+Ce||re<le||ie<de||xe>=se||_e===we)){var Ae=y[xe];we===void 0&&(we=Ae.length);for(var $=_e;$<we;$++){var oe=Ae[$],pe=a[2*oe],ye=a[2*oe+1];pe>=J&&pe<=Z&&ye>=X&&ye<=Y&&ge.push(oe)}var ke=p[xe],De=ke[4*_e+0],Pe=ke[4*_e+1],Re=ke[4*_e+2],fe=ke[4*_e+3],ve=ce(ke,_e+1),Te=.5*Ce,ze=xe+1;ue(le,de,Te,ze,De,Pe||Re||fe||ve),ue(le,de+Te,Te,ze,Pe,Re||fe||ve),ue(le+Te,de,Te,ze,Re,fe||ve),ue(le+Te,de+Te,Te,ze,fe,ve)}}function ce(le,de){for(var Ce=null,xe=0;Ce===null;)if(Ce=le[4*de+xe],++xe>le.length)return null;return Ce}return ue(0,0,1,0,0,1),ge},f;function O(N,R,V,F,D){for(var U=[],j=0;j<D;j++){var J=m[j],X=w[j][0],Z=I(N,R,j),Y=I(V,F,j),W=S.ge(J,Z),Q=S.gt(J,Y,W,J.length-1);U[j]=[W+X,Q+X]}return U}function I(N,R,V){for(var F=1,D=.5,U=.5,j=.5,J=0;J<V;J++)F<<=2,F+=N<D?R<U?0:1:R<U?2:3,j*=.5,D+=N<D?-j:j,U+=R<U?-j:j;return F}}},30774:function(K,z,e){Object.defineProperty(z,"__esModule",{value:!0});var S=e(60302),k=6378137;function l(d){var s=0;if(d&&d.length>0){s+=Math.abs(T(d[0]));for(var t=1;t<d.length;t++)s-=Math.abs(T(d[t]))}return s}function T(d){var s,t,o,r,n,a,i=0,u=d.length;if(u>2){for(a=0;a<u;a++)a===u-2?(o=u-2,r=u-1,n=0):a===u-1?(o=u-1,r=0,n=1):(o=a,r=a+1,n=a+2),s=d[o],t=d[r],i+=(b(d[n][0])-b(s[0]))*Math.sin(b(t[1]));i=i*k*k/2}return i}function b(d){return d*Math.PI/180}z.default=function(d){return S.geomReduce(d,function(s,t){return s+function(o){var r,n=0;switch(o.type){case"Polygon":return l(o.coordinates);case"MultiPolygon":for(r=0;r<o.coordinates.length;r++)n+=l(o.coordinates[r]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},23132:function(K,z){function e(a,i,u){u===void 0&&(u={});var h={type:"Feature"};return(u.id===0||u.id)&&(h.id=u.id),u.bbox&&(h.bbox=u.bbox),h.properties=i||{},h.geometry=a,h}function S(a,i,u){if(u===void 0&&(u={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n(a[0])||!n(a[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:a},i,u)}function k(a,i,u){u===void 0&&(u={});for(var h=0,f=a;h<f.length;h++){var x=f[h];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var v=0;v<x[x.length-1].length;v++)if(x[x.length-1][v]!==x[0][v])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},i,u)}function l(a,i,u){if(u===void 0&&(u={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},i,u)}function T(a,i){i===void 0&&(i={});var u={type:"FeatureCollection"};return i.id&&(u.id=i.id),i.bbox&&(u.bbox=i.bbox),u.features=a,u}function b(a,i,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:a},i,u)}function d(a,i,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:a},i,u)}function s(a,i,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:a},i,u)}function t(a,i){i===void 0&&(i="kilometers");var u=z.factors[i];if(!u)throw new Error(i+" units is invalid");return a*u}function o(a,i){i===void 0&&(i="kilometers");var u=z.factors[i];if(!u)throw new Error(i+" units is invalid");return a/u}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}Object.defineProperty(z,"__esModule",{value:!0}),z.earthRadius=63710088e-1,z.factors={centimeters:100*z.earthRadius,centimetres:100*z.earthRadius,degrees:z.earthRadius/111325,feet:3.28084*z.earthRadius,inches:39.37*z.earthRadius,kilometers:z.earthRadius/1e3,kilometres:z.earthRadius/1e3,meters:z.earthRadius,metres:z.earthRadius,miles:z.earthRadius/1609.344,millimeters:1e3*z.earthRadius,millimetres:1e3*z.earthRadius,nauticalmiles:z.earthRadius/1852,radians:1,yards:1.0936*z.earthRadius},z.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/z.earthRadius,yards:1.0936133},z.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},z.feature=e,z.geometry=function(a,i,u){switch(a){case"Point":return S(i).geometry;case"LineString":return l(i).geometry;case"Polygon":return k(i).geometry;case"MultiPoint":return d(i).geometry;case"MultiLineString":return b(i).geometry;case"MultiPolygon":return s(i).geometry;default:throw new Error(a+" is invalid")}},z.point=S,z.points=function(a,i,u){return u===void 0&&(u={}),T(a.map(function(h){return S(h,i)}),u)},z.polygon=k,z.polygons=function(a,i,u){return u===void 0&&(u={}),T(a.map(function(h){return k(h,i)}),u)},z.lineString=l,z.lineStrings=function(a,i,u){return u===void 0&&(u={}),T(a.map(function(h){return l(h,i)}),u)},z.featureCollection=T,z.multiLineString=b,z.multiPoint=d,z.multiPolygon=s,z.geometryCollection=function(a,i,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:a},i,u)},z.round=function(a,i){if(i===void 0&&(i=0),i&&!(i>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,i||0);return Math.round(a*u)/u},z.radiansToLength=t,z.lengthToRadians=o,z.lengthToDegrees=function(a,i){return r(o(a,i))},z.bearingToAzimuth=function(a){var i=a%360;return i<0&&(i+=360),i},z.radiansToDegrees=r,z.degreesToRadians=function(a){return a%360*Math.PI/180},z.convertLength=function(a,i,u){if(i===void 0&&(i="kilometers"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(o(a,i),u)},z.convertArea=function(a,i,u){if(i===void 0&&(i="meters"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=z.areaFactors[i];if(!h)throw new Error("invalid original units");var f=z.areaFactors[u];if(!f)throw new Error("invalid final units");return a/h*f},z.isNumber=n,z.isObject=function(a){return!!a&&a.constructor===Object},z.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(i){if(!n(i))throw new Error("bbox must only contain numbers")})},z.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")}},60302:function(K,z,e){Object.defineProperty(z,"__esModule",{value:!0});var S=e(23132);function k(o,r,n){if(o!==null)for(var a,i,u,h,f,x,v,g,y=0,p=0,m=o.type,w=m==="FeatureCollection",c=m==="Feature",M=w?o.features.length:1,_=0;_<M;_++){f=(g=!!(v=w?o.features[_].geometry:c?o.geometry:o)&&v.type==="GeometryCollection")?v.geometries.length:1;for(var E=0;E<f;E++){var L=0,C=0;if((h=g?v.geometries[E]:v)!==null){x=h.coordinates;var O=h.type;switch(y=!n||O!=="Polygon"&&O!=="MultiPolygon"?0:1,O){case null:break;case"Point":if(r(x,p,_,L,C)===!1)return!1;p++,L++;break;case"LineString":case"MultiPoint":for(a=0;a<x.length;a++){if(r(x[a],p,_,L,C)===!1)return!1;p++,O==="MultiPoint"&&L++}O==="LineString"&&L++;break;case"Polygon":case"MultiLineString":for(a=0;a<x.length;a++){for(i=0;i<x[a].length-y;i++){if(r(x[a][i],p,_,L,C)===!1)return!1;p++}O==="MultiLineString"&&L++,O==="Polygon"&&C++}O==="Polygon"&&L++;break;case"MultiPolygon":for(a=0;a<x.length;a++){for(C=0,i=0;i<x[a].length;i++){for(u=0;u<x[a][i].length-y;u++){if(r(x[a][i][u],p,_,L,C)===!1)return!1;p++}C++}L++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(k(h.geometries[a],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(o,r){var n;switch(o.type){case"FeatureCollection":for(n=0;n<o.features.length&&r(o.features[n].properties,n)!==!1;n++);break;case"Feature":r(o.properties,0)}}function T(o,r){if(o.type==="Feature")r(o,0);else if(o.type==="FeatureCollection")for(var n=0;n<o.features.length&&r(o.features[n],n)!==!1;n++);}function b(o,r){var n,a,i,u,h,f,x,v,g,y,p=0,m=o.type==="FeatureCollection",w=o.type==="Feature",c=m?o.features.length:1;for(n=0;n<c;n++){for(f=m?o.features[n].geometry:w?o.geometry:o,v=m?o.features[n].properties:w?o.properties:{},g=m?o.features[n].bbox:w?o.bbox:void 0,y=m?o.features[n].id:w?o.id:void 0,h=(x=!!f&&f.type==="GeometryCollection")?f.geometries.length:1,i=0;i<h;i++)if((u=x?f.geometries[i]:f)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(u,p,v,g,y)===!1)return!1;break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)if(r(u.geometries[a],p,v,g,y)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,p,v,g,y)===!1)return!1;p++}}function d(o,r){b(o,function(n,a,i,u,h){var f,x=n===null?null:n.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return r(S.feature(n,i,{bbox:u,id:h}),a,0)!==!1&&void 0}switch(x){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon"}for(var v=0;v<n.coordinates.length;v++){var g={type:f,coordinates:n.coordinates[v]};if(r(S.feature(g,i),a,v)===!1)return!1}})}function s(o,r){d(o,function(n,a,i){var u=0;if(n.geometry){var h=n.geometry.type;if(h!=="Point"&&h!=="MultiPoint"){var f,x=0,v=0,g=0;return k(n,function(y,p,m,w,c){if(f===void 0||a>x||w>v||c>g)return f=y,x=a,v=w,g=c,void(u=0);var M=S.lineString([f,y],n.properties);if(r(M,a,i,c,u)===!1)return!1;u++,f=y})!==!1&&void 0}}})}function t(o,r){if(!o)throw new Error("geojson is required");d(o,function(n,a,i){if(n.geometry!==null){var u=n.geometry.type,h=n.geometry.coordinates;switch(u){case"LineString":if(r(n,a,i,0,0)===!1)return!1;break;case"Polygon":for(var f=0;f<h.length;f++)if(r(S.lineString(h[f],n.properties),a,i,f)===!1)return!1}}})}z.coordEach=k,z.coordReduce=function(o,r,n,a){var i=n;return k(o,function(u,h,f,x,v){i=h===0&&n===void 0?u:r(i,u,h,f,x,v)},a),i},z.propEach=l,z.propReduce=function(o,r,n){var a=n;return l(o,function(i,u){a=u===0&&n===void 0?i:r(a,i,u)}),a},z.featureEach=T,z.featureReduce=function(o,r,n){var a=n;return T(o,function(i,u){a=u===0&&n===void 0?i:r(a,i,u)}),a},z.coordAll=function(o){var r=[];return k(o,function(n){r.push(n)}),r},z.geomEach=b,z.geomReduce=function(o,r,n){var a=n;return b(o,function(i,u,h,f,x){a=u===0&&n===void 0?i:r(a,i,u,h,f,x)}),a},z.flattenEach=d,z.flattenReduce=function(o,r,n){var a=n;return d(o,function(i,u,h){a=u===0&&h===0&&n===void 0?i:r(a,i,u,h)}),a},z.segmentEach=s,z.segmentReduce=function(o,r,n){var a=n,i=!1;return s(o,function(u,h,f,x,v){a=i===!1&&n===void 0?u:r(a,u,h,f,x,v),i=!0}),a},z.lineEach=t,z.lineReduce=function(o,r,n){var a=n;return t(o,function(i,u,h,f){a=u===0&&n===void 0?i:r(a,i,u,h,f)}),a},z.findSegment=function(o,r){if(r=r||{},!S.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,u=r.geometryIndex||0,h=r.segmentIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=x.length+h-1),S.lineString([x[h],x[h+1]],f,r);case"Polygon":return u<0&&(u=x.length+u),h<0&&(h=x[u].length+h-1),S.lineString([x[u][h],x[u][h+1]],f,r);case"MultiLineString":return i<0&&(i=x.length+i),h<0&&(h=x[i].length+h-1),S.lineString([x[i][h],x[i][h+1]],f,r);case"MultiPolygon":return i<0&&(i=x.length+i),u<0&&(u=x[i].length+u),h<0&&(h=x[i][u].length-h-1),S.lineString([x[i][u][h],x[i][u][h+1]],f,r)}throw new Error("geojson is invalid")},z.findPoint=function(o,r){if(r=r||{},!S.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,u=r.geometryIndex||0,h=r.coordIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":return S.point(x,f,r);case"MultiPoint":return i<0&&(i=x.length+i),S.point(x[i],f,r);case"LineString":return h<0&&(h=x.length+h),S.point(x[h],f,r);case"Polygon":return u<0&&(u=x.length+u),h<0&&(h=x[u].length+h),S.point(x[u][h],f,r);case"MultiLineString":return i<0&&(i=x.length+i),h<0&&(h=x[i].length+h),S.point(x[i][h],f,r);case"MultiPolygon":return i<0&&(i=x.length+i),u<0&&(u=x[i].length+u),h<0&&(h=x[i][u].length-h),S.point(x[i][u][h],f,r)}throw new Error("geojson is invalid")}},85268:function(K,z,e){Object.defineProperty(z,"__esModule",{value:!0});var S=e(27138);function k(l){var T=[1/0,1/0,-1/0,-1/0];return S.coordEach(l,function(b){T[0]>b[0]&&(T[0]=b[0]),T[1]>b[1]&&(T[1]=b[1]),T[2]<b[0]&&(T[2]=b[0]),T[3]<b[1]&&(T[3]=b[1])}),T}k.default=k,z.default=k},94228:function(K,z){function e(a,i,u){u===void 0&&(u={});var h={type:"Feature"};return(u.id===0||u.id)&&(h.id=u.id),u.bbox&&(h.bbox=u.bbox),h.properties=i||{},h.geometry=a,h}function S(a,i,u){if(u===void 0&&(u={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n(a[0])||!n(a[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:a},i,u)}function k(a,i,u){u===void 0&&(u={});for(var h=0,f=a;h<f.length;h++){var x=f[h];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var v=0;v<x[x.length-1].length;v++)if(x[x.length-1][v]!==x[0][v])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},i,u)}function l(a,i,u){if(u===void 0&&(u={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},i,u)}function T(a,i){i===void 0&&(i={});var u={type:"FeatureCollection"};return i.id&&(u.id=i.id),i.bbox&&(u.bbox=i.bbox),u.features=a,u}function b(a,i,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:a},i,u)}function d(a,i,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:a},i,u)}function s(a,i,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:a},i,u)}function t(a,i){i===void 0&&(i="kilometers");var u=z.factors[i];if(!u)throw new Error(i+" units is invalid");return a*u}function o(a,i){i===void 0&&(i="kilometers");var u=z.factors[i];if(!u)throw new Error(i+" units is invalid");return a/u}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}Object.defineProperty(z,"__esModule",{value:!0}),z.earthRadius=63710088e-1,z.factors={centimeters:100*z.earthRadius,centimetres:100*z.earthRadius,degrees:z.earthRadius/111325,feet:3.28084*z.earthRadius,inches:39.37*z.earthRadius,kilometers:z.earthRadius/1e3,kilometres:z.earthRadius/1e3,meters:z.earthRadius,metres:z.earthRadius,miles:z.earthRadius/1609.344,millimeters:1e3*z.earthRadius,millimetres:1e3*z.earthRadius,nauticalmiles:z.earthRadius/1852,radians:1,yards:1.0936*z.earthRadius},z.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/z.earthRadius,yards:1.0936133},z.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},z.feature=e,z.geometry=function(a,i,u){switch(a){case"Point":return S(i).geometry;case"LineString":return l(i).geometry;case"Polygon":return k(i).geometry;case"MultiPoint":return d(i).geometry;case"MultiLineString":return b(i).geometry;case"MultiPolygon":return s(i).geometry;default:throw new Error(a+" is invalid")}},z.point=S,z.points=function(a,i,u){return u===void 0&&(u={}),T(a.map(function(h){return S(h,i)}),u)},z.polygon=k,z.polygons=function(a,i,u){return u===void 0&&(u={}),T(a.map(function(h){return k(h,i)}),u)},z.lineString=l,z.lineStrings=function(a,i,u){return u===void 0&&(u={}),T(a.map(function(h){return l(h,i)}),u)},z.featureCollection=T,z.multiLineString=b,z.multiPoint=d,z.multiPolygon=s,z.geometryCollection=function(a,i,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:a},i,u)},z.round=function(a,i){if(i===void 0&&(i=0),i&&!(i>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,i||0);return Math.round(a*u)/u},z.radiansToLength=t,z.lengthToRadians=o,z.lengthToDegrees=function(a,i){return r(o(a,i))},z.bearingToAzimuth=function(a){var i=a%360;return i<0&&(i+=360),i},z.radiansToDegrees=r,z.degreesToRadians=function(a){return a%360*Math.PI/180},z.convertLength=function(a,i,u){if(i===void 0&&(i="kilometers"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(o(a,i),u)},z.convertArea=function(a,i,u){if(i===void 0&&(i="meters"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=z.areaFactors[i];if(!h)throw new Error("invalid original units");var f=z.areaFactors[u];if(!f)throw new Error("invalid final units");return a/h*f},z.isNumber=n,z.isObject=function(a){return!!a&&a.constructor===Object},z.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(i){if(!n(i))throw new Error("bbox must only contain numbers")})},z.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")}},27138:function(K,z,e){Object.defineProperty(z,"__esModule",{value:!0});var S=e(94228);function k(o,r,n){if(o!==null)for(var a,i,u,h,f,x,v,g,y=0,p=0,m=o.type,w=m==="FeatureCollection",c=m==="Feature",M=w?o.features.length:1,_=0;_<M;_++){f=(g=!!(v=w?o.features[_].geometry:c?o.geometry:o)&&v.type==="GeometryCollection")?v.geometries.length:1;for(var E=0;E<f;E++){var L=0,C=0;if((h=g?v.geometries[E]:v)!==null){x=h.coordinates;var O=h.type;switch(y=!n||O!=="Polygon"&&O!=="MultiPolygon"?0:1,O){case null:break;case"Point":if(r(x,p,_,L,C)===!1)return!1;p++,L++;break;case"LineString":case"MultiPoint":for(a=0;a<x.length;a++){if(r(x[a],p,_,L,C)===!1)return!1;p++,O==="MultiPoint"&&L++}O==="LineString"&&L++;break;case"Polygon":case"MultiLineString":for(a=0;a<x.length;a++){for(i=0;i<x[a].length-y;i++){if(r(x[a][i],p,_,L,C)===!1)return!1;p++}O==="MultiLineString"&&L++,O==="Polygon"&&C++}O==="Polygon"&&L++;break;case"MultiPolygon":for(a=0;a<x.length;a++){for(C=0,i=0;i<x[a].length;i++){for(u=0;u<x[a][i].length-y;u++){if(r(x[a][i][u],p,_,L,C)===!1)return!1;p++}C++}L++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(k(h.geometries[a],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(o,r){var n;switch(o.type){case"FeatureCollection":for(n=0;n<o.features.length&&r(o.features[n].properties,n)!==!1;n++);break;case"Feature":r(o.properties,0)}}function T(o,r){if(o.type==="Feature")r(o,0);else if(o.type==="FeatureCollection")for(var n=0;n<o.features.length&&r(o.features[n],n)!==!1;n++);}function b(o,r){var n,a,i,u,h,f,x,v,g,y,p=0,m=o.type==="FeatureCollection",w=o.type==="Feature",c=m?o.features.length:1;for(n=0;n<c;n++){for(f=m?o.features[n].geometry:w?o.geometry:o,v=m?o.features[n].properties:w?o.properties:{},g=m?o.features[n].bbox:w?o.bbox:void 0,y=m?o.features[n].id:w?o.id:void 0,h=(x=!!f&&f.type==="GeometryCollection")?f.geometries.length:1,i=0;i<h;i++)if((u=x?f.geometries[i]:f)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(u,p,v,g,y)===!1)return!1;break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)if(r(u.geometries[a],p,v,g,y)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,p,v,g,y)===!1)return!1;p++}}function d(o,r){b(o,function(n,a,i,u,h){var f,x=n===null?null:n.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return r(S.feature(n,i,{bbox:u,id:h}),a,0)!==!1&&void 0}switch(x){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon"}for(var v=0;v<n.coordinates.length;v++){var g={type:f,coordinates:n.coordinates[v]};if(r(S.feature(g,i),a,v)===!1)return!1}})}function s(o,r){d(o,function(n,a,i){var u=0;if(n.geometry){var h=n.geometry.type;if(h!=="Point"&&h!=="MultiPoint"){var f,x=0,v=0,g=0;return k(n,function(y,p,m,w,c){if(f===void 0||a>x||w>v||c>g)return f=y,x=a,v=w,g=c,void(u=0);var M=S.lineString([f,y],n.properties);if(r(M,a,i,c,u)===!1)return!1;u++,f=y})!==!1&&void 0}}})}function t(o,r){if(!o)throw new Error("geojson is required");d(o,function(n,a,i){if(n.geometry!==null){var u=n.geometry.type,h=n.geometry.coordinates;switch(u){case"LineString":if(r(n,a,i,0,0)===!1)return!1;break;case"Polygon":for(var f=0;f<h.length;f++)if(r(S.lineString(h[f],n.properties),a,i,f)===!1)return!1}}})}z.coordEach=k,z.coordReduce=function(o,r,n,a){var i=n;return k(o,function(u,h,f,x,v){i=h===0&&n===void 0?u:r(i,u,h,f,x,v)},a),i},z.propEach=l,z.propReduce=function(o,r,n){var a=n;return l(o,function(i,u){a=u===0&&n===void 0?i:r(a,i,u)}),a},z.featureEach=T,z.featureReduce=function(o,r,n){var a=n;return T(o,function(i,u){a=u===0&&n===void 0?i:r(a,i,u)}),a},z.coordAll=function(o){var r=[];return k(o,function(n){r.push(n)}),r},z.geomEach=b,z.geomReduce=function(o,r,n){var a=n;return b(o,function(i,u,h,f,x){a=u===0&&n===void 0?i:r(a,i,u,h,f,x)}),a},z.flattenEach=d,z.flattenReduce=function(o,r,n){var a=n;return d(o,function(i,u,h){a=u===0&&h===0&&n===void 0?i:r(a,i,u,h)}),a},z.segmentEach=s,z.segmentReduce=function(o,r,n){var a=n,i=!1;return s(o,function(u,h,f,x,v){a=i===!1&&n===void 0?u:r(a,u,h,f,x,v),i=!0}),a},z.lineEach=t,z.lineReduce=function(o,r,n){var a=n;return t(o,function(i,u,h,f){a=u===0&&n===void 0?i:r(a,i,u,h,f)}),a},z.findSegment=function(o,r){if(r=r||{},!S.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,u=r.geometryIndex||0,h=r.segmentIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=x.length+h-1),S.lineString([x[h],x[h+1]],f,r);case"Polygon":return u<0&&(u=x.length+u),h<0&&(h=x[u].length+h-1),S.lineString([x[u][h],x[u][h+1]],f,r);case"MultiLineString":return i<0&&(i=x.length+i),h<0&&(h=x[i].length+h-1),S.lineString([x[i][h],x[i][h+1]],f,r);case"MultiPolygon":return i<0&&(i=x.length+i),u<0&&(u=x[i].length+u),h<0&&(h=x[i][u].length-h-1),S.lineString([x[i][u][h],x[i][u][h+1]],f,r)}throw new Error("geojson is invalid")},z.findPoint=function(o,r){if(r=r||{},!S.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,u=r.geometryIndex||0,h=r.coordIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":return S.point(x,f,r);case"MultiPoint":return i<0&&(i=x.length+i),S.point(x[i],f,r);case"LineString":return h<0&&(h=x.length+h),S.point(x[h],f,r);case"Polygon":return u<0&&(u=x.length+u),h<0&&(h=x[u].length+h),S.point(x[u][h],f,r);case"MultiLineString":return i<0&&(i=x.length+i),h<0&&(h=x[i].length+h),S.point(x[i][h],f,r);case"MultiPolygon":return i<0&&(i=x.length+i),u<0&&(u=x[i].length+u),h<0&&(h=x[i][u].length-h),S.point(x[i][u][h],f,r)}throw new Error("geojson is invalid")}},29261:function(K,z,e){Object.defineProperty(z,"__esModule",{value:!0});var S=e(88553),k=e(64182);z.default=function(l,T){T===void 0&&(T={});var b=0,d=0,s=0;return S.coordEach(l,function(t){b+=t[0],d+=t[1],s++}),k.point([b/s,d/s],T.properties)}},64182:function(K,z){function e(a,i,u){u===void 0&&(u={});var h={type:"Feature"};return(u.id===0||u.id)&&(h.id=u.id),u.bbox&&(h.bbox=u.bbox),h.properties=i||{},h.geometry=a,h}function S(a,i,u){return u===void 0&&(u={}),e({type:"Point",coordinates:a},i,u)}function k(a,i,u){u===void 0&&(u={});for(var h=0,f=a;h<f.length;h++){var x=f[h];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var v=0;v<x[x.length-1].length;v++)if(x[x.length-1][v]!==x[0][v])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},i,u)}function l(a,i,u){if(u===void 0&&(u={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},i,u)}function T(a,i){i===void 0&&(i={});var u={type:"FeatureCollection"};return i.id&&(u.id=i.id),i.bbox&&(u.bbox=i.bbox),u.features=a,u}function b(a,i,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:a},i,u)}function d(a,i,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:a},i,u)}function s(a,i,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:a},i,u)}function t(a,i){i===void 0&&(i="kilometers");var u=z.factors[i];if(!u)throw new Error(i+" units is invalid");return a*u}function o(a,i){i===void 0&&(i="kilometers");var u=z.factors[i];if(!u)throw new Error(i+" units is invalid");return a/u}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)&&!/^\s*$/.test(a)}Object.defineProperty(z,"__esModule",{value:!0}),z.earthRadius=63710088e-1,z.factors={centimeters:100*z.earthRadius,centimetres:100*z.earthRadius,degrees:z.earthRadius/111325,feet:3.28084*z.earthRadius,inches:39.37*z.earthRadius,kilometers:z.earthRadius/1e3,kilometres:z.earthRadius/1e3,meters:z.earthRadius,metres:z.earthRadius,miles:z.earthRadius/1609.344,millimeters:1e3*z.earthRadius,millimetres:1e3*z.earthRadius,nauticalmiles:z.earthRadius/1852,radians:1,yards:z.earthRadius/1.0936},z.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/z.earthRadius,yards:.91441111923921},z.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},z.feature=e,z.geometry=function(a,i,u){switch(a){case"Point":return S(i).geometry;case"LineString":return l(i).geometry;case"Polygon":return k(i).geometry;case"MultiPoint":return d(i).geometry;case"MultiLineString":return b(i).geometry;case"MultiPolygon":return s(i).geometry;default:throw new Error(a+" is invalid")}},z.point=S,z.points=function(a,i,u){return u===void 0&&(u={}),T(a.map(function(h){return S(h,i)}),u)},z.polygon=k,z.polygons=function(a,i,u){return u===void 0&&(u={}),T(a.map(function(h){return k(h,i)}),u)},z.lineString=l,z.lineStrings=function(a,i,u){return u===void 0&&(u={}),T(a.map(function(h){return l(h,i)}),u)},z.featureCollection=T,z.multiLineString=b,z.multiPoint=d,z.multiPolygon=s,z.geometryCollection=function(a,i,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:a},i,u)},z.round=function(a,i){if(i===void 0&&(i=0),i&&!(i>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,i||0);return Math.round(a*u)/u},z.radiansToLength=t,z.lengthToRadians=o,z.lengthToDegrees=function(a,i){return r(o(a,i))},z.bearingToAzimuth=function(a){var i=a%360;return i<0&&(i+=360),i},z.radiansToDegrees=r,z.degreesToRadians=function(a){return a%360*Math.PI/180},z.convertLength=function(a,i,u){if(i===void 0&&(i="kilometers"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(o(a,i),u)},z.convertArea=function(a,i,u){if(i===void 0&&(i="meters"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=z.areaFactors[i];if(!h)throw new Error("invalid original units");var f=z.areaFactors[u];if(!f)throw new Error("invalid final units");return a/h*f},z.isNumber=n,z.isObject=function(a){return!!a&&a.constructor===Object},z.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(i){if(!n(i))throw new Error("bbox must only contain numbers")})},z.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")},z.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},z.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},z.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},z.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},z.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},z.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},z.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},88553:function(K,z,e){Object.defineProperty(z,"__esModule",{value:!0});var S=e(64182);function k(o,r,n){if(o!==null)for(var a,i,u,h,f,x,v,g,y=0,p=0,m=o.type,w=m==="FeatureCollection",c=m==="Feature",M=w?o.features.length:1,_=0;_<M;_++){f=(g=!!(v=w?o.features[_].geometry:c?o.geometry:o)&&v.type==="GeometryCollection")?v.geometries.length:1;for(var E=0;E<f;E++){var L=0,C=0;if((h=g?v.geometries[E]:v)!==null){x=h.coordinates;var O=h.type;switch(y=!n||O!=="Polygon"&&O!=="MultiPolygon"?0:1,O){case null:break;case"Point":if(r(x,p,_,L,C)===!1)return!1;p++,L++;break;case"LineString":case"MultiPoint":for(a=0;a<x.length;a++){if(r(x[a],p,_,L,C)===!1)return!1;p++,O==="MultiPoint"&&L++}O==="LineString"&&L++;break;case"Polygon":case"MultiLineString":for(a=0;a<x.length;a++){for(i=0;i<x[a].length-y;i++){if(r(x[a][i],p,_,L,C)===!1)return!1;p++}O==="MultiLineString"&&L++,O==="Polygon"&&C++}O==="Polygon"&&L++;break;case"MultiPolygon":for(a=0;a<x.length;a++){for(C=0,i=0;i<x[a].length;i++){for(u=0;u<x[a][i].length-y;u++){if(r(x[a][i][u],p,_,L,C)===!1)return!1;p++}C++}L++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(k(h.geometries[a],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(o,r){var n;switch(o.type){case"FeatureCollection":for(n=0;n<o.features.length&&r(o.features[n].properties,n)!==!1;n++);break;case"Feature":r(o.properties,0)}}function T(o,r){if(o.type==="Feature")r(o,0);else if(o.type==="FeatureCollection")for(var n=0;n<o.features.length&&r(o.features[n],n)!==!1;n++);}function b(o,r){var n,a,i,u,h,f,x,v,g,y,p=0,m=o.type==="FeatureCollection",w=o.type==="Feature",c=m?o.features.length:1;for(n=0;n<c;n++){for(f=m?o.features[n].geometry:w?o.geometry:o,v=m?o.features[n].properties:w?o.properties:{},g=m?o.features[n].bbox:w?o.bbox:void 0,y=m?o.features[n].id:w?o.id:void 0,h=(x=!!f&&f.type==="GeometryCollection")?f.geometries.length:1,i=0;i<h;i++)if((u=x?f.geometries[i]:f)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(u,p,v,g,y)===!1)return!1;break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)if(r(u.geometries[a],p,v,g,y)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,p,v,g,y)===!1)return!1;p++}}function d(o,r){b(o,function(n,a,i,u,h){var f,x=n===null?null:n.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return r(S.feature(n,i,{bbox:u,id:h}),a,0)!==!1&&void 0}switch(x){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon"}for(var v=0;v<n.coordinates.length;v++){var g={type:f,coordinates:n.coordinates[v]};if(r(S.feature(g,i),a,v)===!1)return!1}})}function s(o,r){d(o,function(n,a,i){var u=0;if(n.geometry){var h=n.geometry.type;if(h!=="Point"&&h!=="MultiPoint"){var f,x=0,v=0,g=0;return k(n,function(y,p,m,w,c){if(f===void 0||a>x||w>v||c>g)return f=y,x=a,v=w,g=c,void(u=0);var M=S.lineString([f,y],n.properties);if(r(M,a,i,c,u)===!1)return!1;u++,f=y})!==!1&&void 0}}})}function t(o,r){if(!o)throw new Error("geojson is required");d(o,function(n,a,i){if(n.geometry!==null){var u=n.geometry.type,h=n.geometry.coordinates;switch(u){case"LineString":if(r(n,a,i,0,0)===!1)return!1;break;case"Polygon":for(var f=0;f<h.length;f++)if(r(S.lineString(h[f],n.properties),a,i,f)===!1)return!1}}})}z.coordEach=k,z.coordReduce=function(o,r,n,a){var i=n;return k(o,function(u,h,f,x,v){i=h===0&&n===void 0?u:r(i,u,h,f,x,v)},a),i},z.propEach=l,z.propReduce=function(o,r,n){var a=n;return l(o,function(i,u){a=u===0&&n===void 0?i:r(a,i,u)}),a},z.featureEach=T,z.featureReduce=function(o,r,n){var a=n;return T(o,function(i,u){a=u===0&&n===void 0?i:r(a,i,u)}),a},z.coordAll=function(o){var r=[];return k(o,function(n){r.push(n)}),r},z.geomEach=b,z.geomReduce=function(o,r,n){var a=n;return b(o,function(i,u,h,f,x){a=u===0&&n===void 0?i:r(a,i,u,h,f,x)}),a},z.flattenEach=d,z.flattenReduce=function(o,r,n){var a=n;return d(o,function(i,u,h){a=u===0&&h===0&&n===void 0?i:r(a,i,u,h)}),a},z.segmentEach=s,z.segmentReduce=function(o,r,n){var a=n,i=!1;return s(o,function(u,h,f,x,v){a=i===!1&&n===void 0?u:r(a,u,h,f,x,v),i=!0}),a},z.lineEach=t,z.lineReduce=function(o,r,n){var a=n;return t(o,function(i,u,h,f){a=u===0&&n===void 0?i:r(a,i,u,h,f)}),a},z.findSegment=function(o,r){if(r=r||{},!S.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,u=r.geometryIndex||0,h=r.segmentIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=x.length+h-1),S.lineString([x[h],x[h+1]],f,r);case"Polygon":return u<0&&(u=x.length+u),h<0&&(h=x[u].length+h-1),S.lineString([x[u][h],x[u][h+1]],f,r);case"MultiLineString":return i<0&&(i=x.length+i),h<0&&(h=x[i].length+h-1),S.lineString([x[i][h],x[i][h+1]],f,r);case"MultiPolygon":return i<0&&(i=x.length+i),u<0&&(u=x[i].length+u),h<0&&(h=x[i][u].length-h-1),S.lineString([x[i][u][h],x[i][u][h+1]],f,r)}throw new Error("geojson is invalid")},z.findPoint=function(o,r){if(r=r||{},!S.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,u=r.geometryIndex||0,h=r.coordIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":return S.point(x,f,r);case"MultiPoint":return i<0&&(i=x.length+i),S.point(x[i],f,r);case"LineString":return h<0&&(h=x.length+h),S.point(x[h],f,r);case"Polygon":return u<0&&(u=x.length+u),h<0&&(h=x[u].length+h),S.point(x[u][h],f,r);case"MultiLineString":return i<0&&(i=x.length+i),h<0&&(h=x[i].length+h),S.point(x[i][h],f,r);case"MultiPolygon":return i<0&&(i=x.length+i),u<0&&(u=x[i].length+u),h<0&&(h=x[i][u].length-h),S.point(x[i][u][h],f,r)}throw new Error("geojson is invalid")}},65185:function(K){K.exports=function(z){var e=0,S=0,k=0,l=0;return z.map(function(T){var b=(T=T.slice())[0],d=b.toUpperCase();if(b!=d)switch(T[0]=d,b){case"a":T[6]+=k,T[7]+=l;break;case"v":T[1]+=l;break;case"h":T[1]+=k;break;default:for(var s=1;s<T.length;)T[s++]+=k,T[s++]+=l}switch(d){case"Z":k=e,l=S;break;case"H":k=T[1];break;case"V":l=T[1];break;case"M":k=e=T[1],l=S=T[2];break;default:k=T[T.length-2],l=T[T.length-1]}return T})}},21527:function(K){K.exports=function(z,e){if(!z||z.length==null)throw Error("Argument should be an array");e=e==null?1:Math.floor(e);for(var S=Array(2*e),k=0;k<e;k++){for(var l=-1/0,T=1/0,b=k,d=z.length;b<d;b+=e)z[b]>l&&(l=z[b]),z[b]<T&&(T=z[b]);S[k]=T,S[e+k]=l}return S}},6851:function(K){K.exports=function(z,e,S){if(typeof Array.prototype.findIndex=="function")return z.findIndex(e,S);if(typeof e!="function")throw new TypeError("predicate must be a function");var k=Object(z),l=k.length;if(l===0)return-1;for(var T=0;T<l;T++)if(e.call(S,k[T],T,k))return T;return-1}},54:function(K,z,e){var S=e(21527);K.exports=function(k,l,T){if(!k||k.length==null)throw Error("Argument should be an array");l==null&&(l=1),T==null&&(T=S(k,l));for(var b=0;b<l;b++){var d=T[l+b],s=T[b],t=b,o=k.length;if(d===1/0&&s===-1/0)for(t=b;t<o;t+=l)k[t]=k[t]===d?1:k[t]===s?0:.5;else if(d===1/0)for(t=b;t<o;t+=l)k[t]=k[t]===d?1:0;else if(s===-1/0)for(t=b;t<o;t+=l)k[t]=k[t]===s?0:1;else{var r=d-s;for(t=b;t<o;t+=l)isNaN(k[t])||(k[t]=r===0?.5:(k[t]-s)/r)}}return k}},57471:function(K){K.exports=function(z,e){var S=typeof z=="number",k=typeof e=="number";S&&!k?(e=z,z=0):S||k||(z=0,e=0);var l=(e|=0)-(z|=0);if(l<0)throw new Error("array length must be positive");for(var T=new Array(l),b=0,d=z;b<l;b++,d++)T[b]=d;return T}},32791:function(K,z,e){var S=e(90386);function k(V){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},k(V)}var l,T,b=e(79616).codes,d=b.ERR_AMBIGUOUS_ARGUMENT,s=b.ERR_INVALID_ARG_TYPE,t=b.ERR_INVALID_ARG_VALUE,o=b.ERR_INVALID_RETURN_VALUE,r=b.ERR_MISSING_ARGS,n=e(73894),a=e(43827).inspect,i=e(43827).types,u=i.isPromise,h=i.isRegExp,f=Object.assign?Object.assign:e(73523).assign,x=Object.is?Object.is:e(64003);function v(){var V=e(74061);l=V.isDeepEqual,T=V.isDeepStrictEqual}var g=!1,y=K.exports=c,p={};function m(V){throw V.message instanceof Error?V.message:new n(V)}function w(V,F,D,U){if(!D){var j=!1;if(F===0)j=!0,U="No value argument passed to `assert.ok()`";else if(U instanceof Error)throw U;var J=new n({actual:D,expected:!0,message:U,operator:"==",stackStartFn:V});throw J.generatedMessage=j,J}}function c(){for(var V=arguments.length,F=new Array(V),D=0;D<V;D++)F[D]=arguments[D];w.apply(void 0,[c,F.length].concat(F))}y.fail=function V(F,D,U,j,J){var X,Z=arguments.length;if(Z===0)X="Failed";else if(Z===1)U=F,F=void 0;else{if(g===!1){g=!0;var Y=S.emitWarning?S.emitWarning:console.warn.bind(console);Y("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}Z===2&&(j="!=")}if(U instanceof Error)throw U;var W={actual:F,expected:D,operator:j===void 0?"fail":j,stackStartFn:J||V};U!==void 0&&(W.message=U);var Q=new n(W);throw X&&(Q.message=X,Q.generatedMessage=!0),Q},y.AssertionError=n,y.ok=c,y.equal=function V(F,D,U){if(arguments.length<2)throw new r("actual","expected");F!=D&&m({actual:F,expected:D,message:U,operator:"==",stackStartFn:V})},y.notEqual=function V(F,D,U){if(arguments.length<2)throw new r("actual","expected");F==D&&m({actual:F,expected:D,message:U,operator:"!=",stackStartFn:V})},y.deepEqual=function V(F,D,U){if(arguments.length<2)throw new r("actual","expected");l===void 0&&v(),l(F,D)||m({actual:F,expected:D,message:U,operator:"deepEqual",stackStartFn:V})},y.notDeepEqual=function V(F,D,U){if(arguments.length<2)throw new r("actual","expected");l===void 0&&v(),l(F,D)&&m({actual:F,expected:D,message:U,operator:"notDeepEqual",stackStartFn:V})},y.deepStrictEqual=function V(F,D,U){if(arguments.length<2)throw new r("actual","expected");l===void 0&&v(),T(F,D)||m({actual:F,expected:D,message:U,operator:"deepStrictEqual",stackStartFn:V})},y.notDeepStrictEqual=function V(F,D,U){if(arguments.length<2)throw new r("actual","expected");l===void 0&&v(),T(F,D)&&m({actual:F,expected:D,message:U,operator:"notDeepStrictEqual",stackStartFn:V})},y.strictEqual=function V(F,D,U){if(arguments.length<2)throw new r("actual","expected");x(F,D)||m({actual:F,expected:D,message:U,operator:"strictEqual",stackStartFn:V})},y.notStrictEqual=function V(F,D,U){if(arguments.length<2)throw new r("actual","expected");x(F,D)&&m({actual:F,expected:D,message:U,operator:"notStrictEqual",stackStartFn:V})};var M=function V(F,D,U){var j=this;(function(J,X){if(!(J instanceof X))throw new TypeError("Cannot call a class as a function")})(this,V),D.forEach(function(J){J in F&&(U!==void 0&&typeof U[J]=="string"&&h(F[J])&&F[J].test(U[J])?j[J]=U[J]:j[J]=F[J])})};function _(V,F,D,U,j,J){if(!(D in V)||!T(V[D],F[D])){if(!U){var X=new M(V,j),Z=new M(F,j,V),Y=new n({actual:X,expected:Z,operator:"deepStrictEqual",stackStartFn:J});throw Y.actual=V,Y.expected=F,Y.operator=J.name,Y}m({actual:V,expected:F,message:U,operator:J.name,stackStartFn:J})}}function E(V,F,D,U){if(typeof F!="function"){if(h(F))return F.test(V);if(arguments.length===2)throw new s("expected",["Function","RegExp"],F);if(k(V)!=="object"||V===null){var j=new n({actual:V,expected:F,message:D,operator:"deepStrictEqual",stackStartFn:U});throw j.operator=U.name,j}var J=Object.keys(F);if(F instanceof Error)J.push("name","message");else if(J.length===0)throw new t("error",F,"may not be an empty object");return l===void 0&&v(),J.forEach(function(X){typeof V[X]=="string"&&h(F[X])&&F[X].test(V[X])||_(V,F,X,D,J,U)}),!0}return F.prototype!==void 0&&V instanceof F||!Error.isPrototypeOf(F)&&F.call({},V)===!0}function L(V){if(typeof V!="function")throw new s("fn","Function",V);try{V()}catch(F){return F}return p}function C(V){return u(V)||V!==null&&k(V)==="object"&&typeof V.then=="function"&&typeof V.catch=="function"}function O(V){return Promise.resolve().then(function(){var F;if(typeof V=="function"){if(!C(F=V()))throw new o("instance of Promise","promiseFn",F)}else{if(!C(V))throw new s("promiseFn",["Function","Promise"],V);F=V}return Promise.resolve().then(function(){return F}).then(function(){return p}).catch(function(D){return D})})}function I(V,F,D,U){if(typeof D=="string"){if(arguments.length===4)throw new s("error",["Object","Error","Function","RegExp"],D);if(k(F)==="object"&&F!==null){if(F.message===D)throw new d("error/message",'The error message "'.concat(F.message,'" is identical to the message.'))}else if(F===D)throw new d("error/message",'The error "'.concat(F,'" is identical to the message.'));U=D,D=void 0}else if(D!=null&&k(D)!=="object"&&typeof D!="function")throw new s("error",["Object","Error","Function","RegExp"],D);if(F===p){var j="";D&&D.name&&(j+=" (".concat(D.name,")")),j+=U?": ".concat(U):".";var J=V.name==="rejects"?"rejection":"exception";m({actual:void 0,expected:D,operator:V.name,message:"Missing expected ".concat(J).concat(j),stackStartFn:V})}if(D&&!E(F,D,U,V))throw F}function N(V,F,D,U){if(F!==p){if(typeof D=="string"&&(U=D,D=void 0),!D||E(F,D)){var j=U?": ".concat(U):".",J=V.name==="doesNotReject"?"rejection":"exception";m({actual:F,expected:D,operator:V.name,message:"Got unwanted ".concat(J).concat(j,`
`)+'Actual message: "'.concat(F&&F.message,'"'),stackStartFn:V})}throw F}}function R(){for(var V=arguments.length,F=new Array(V),D=0;D<V;D++)F[D]=arguments[D];w.apply(void 0,[R,F.length].concat(F))}y.throws=function V(F){for(var D=arguments.length,U=new Array(D>1?D-1:0),j=1;j<D;j++)U[j-1]=arguments[j];I.apply(void 0,[V,L(F)].concat(U))},y.rejects=function V(F){for(var D=arguments.length,U=new Array(D>1?D-1:0),j=1;j<D;j++)U[j-1]=arguments[j];return O(F).then(function(J){return I.apply(void 0,[V,J].concat(U))})},y.doesNotThrow=function V(F){for(var D=arguments.length,U=new Array(D>1?D-1:0),j=1;j<D;j++)U[j-1]=arguments[j];N.apply(void 0,[V,L(F)].concat(U))},y.doesNotReject=function V(F){for(var D=arguments.length,U=new Array(D>1?D-1:0),j=1;j<D;j++)U[j-1]=arguments[j];return O(F).then(function(J){return N.apply(void 0,[V,J].concat(U))})},y.ifError=function V(F){if(F!=null){var D="ifError got unwanted exception: ";k(F)==="object"&&typeof F.message=="string"?F.message.length===0&&F.constructor?D+=F.constructor.name:D+=F.message:D+=a(F);var U=new n({actual:F,expected:null,operator:"ifError",message:D,stackStartFn:V}),j=F.stack;if(typeof j=="string"){var J=j.split(`
`);J.shift();for(var X=U.stack.split(`
`),Z=0;Z<J.length;Z++){var Y=X.indexOf(J[Z]);if(Y!==-1){X=X.slice(0,Y);break}}U.stack="".concat(X.join(`
`),`
`).concat(J.join(`
`))}throw U}},y.strict=f(R,y,{equal:y.strictEqual,deepEqual:y.deepStrictEqual,notEqual:y.notStrictEqual,notDeepEqual:y.notDeepStrictEqual}),y.strict.strict=y.strict},73894:function(K,z,e){var S=e(90386);function k(w,c,M){return c in w?Object.defineProperty(w,c,{value:M,enumerable:!0,configurable:!0,writable:!0}):w[c]=M,w}function l(w,c){for(var M=0;M<c.length;M++){var _=c[M];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(w,_.key,_)}}function T(w,c){return!c||n(c)!=="object"&&typeof c!="function"?b(w):c}function b(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function d(w){var c=typeof Map=="function"?new Map:void 0;return d=function(M){if(M===null||(_=M,Function.toString.call(_).indexOf("[native code]")===-1))return M;var _;if(typeof M!="function")throw new TypeError("Super expression must either be null or a function");if(c!==void 0){if(c.has(M))return c.get(M);c.set(M,E)}function E(){return t(M,arguments,r(this).constructor)}return E.prototype=Object.create(M.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),o(E,M)},d(w)}function s(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function t(w,c,M){return t=s()?Reflect.construct:function(_,E,L){var C=[null];C.push.apply(C,E);var O=new(Function.bind.apply(_,C));return L&&o(O,L.prototype),O},t.apply(null,arguments)}function o(w,c){return o=Object.setPrototypeOf||function(M,_){return M.__proto__=_,M},o(w,c)}function r(w){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)},r(w)}function n(w){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},n(w)}var a=e(43827).inspect,i=e(79616).codes.ERR_INVALID_ARG_TYPE;function u(w,c,M){return(M===void 0||M>w.length)&&(M=w.length),w.substring(M-c.length,M)===c}var h="",f="",x="",v="",g={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function y(w){var c=Object.keys(w),M=Object.create(Object.getPrototypeOf(w));return c.forEach(function(_){M[_]=w[_]}),Object.defineProperty(M,"message",{value:w.message}),M}function p(w){return a(w,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var m=function(w){function c(E){var L;if(function(X,Z){if(!(X instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,c),n(E)!=="object"||E===null)throw new i("options","Object",E);var C=E.message,O=E.operator,I=E.stackStartFn,N=E.actual,R=E.expected,V=Error.stackTraceLimit;if(Error.stackTraceLimit=0,C!=null)L=T(this,r(c).call(this,String(C)));else if(S.stderr&&S.stderr.isTTY&&(S.stderr&&S.stderr.getColorDepth&&S.stderr.getColorDepth()!==1?(h="\x1B[34m",f="\x1B[32m",v="\x1B[39m",x="\x1B[31m"):(h="",f="",v="",x="")),n(N)==="object"&&N!==null&&n(R)==="object"&&R!==null&&"stack"in N&&N instanceof Error&&"stack"in R&&R instanceof Error&&(N=y(N),R=y(R)),O==="deepStrictEqual"||O==="strictEqual")L=T(this,r(c).call(this,function(X,Z,Y){var W="",Q="",ne=0,re="",ie=!1,se=p(X),ge=se.split(`
`),ue=p(Z).split(`
`),ce=0,le="";if(Y==="strictEqual"&&n(X)==="object"&&n(Z)==="object"&&X!==null&&Z!==null&&(Y="strictEqualObject"),ge.length===1&&ue.length===1&&ge[0]!==ue[0]){var de=ge[0].length+ue[0].length;if(de<=10){if(!(n(X)==="object"&&X!==null||n(Z)==="object"&&Z!==null||X===0&&Z===0))return"".concat(g[Y],`

`)+"".concat(ge[0]," !== ").concat(ue[0],`
`)}else if(Y!=="strictEqualObject"&&de<(S.stderr&&S.stderr.isTTY?S.stderr.columns:80)){for(;ge[0][ce]===ue[0][ce];)ce++;ce>2&&(le=`
  `.concat(function(Pe,Re){if(Re=Math.floor(Re),Pe.length==0||Re==0)return"";var fe=Pe.length*Re;for(Re=Math.floor(Math.log(Re)/Math.log(2));Re;)Pe+=Pe,Re--;return Pe+Pe.substring(0,fe-Pe.length)}(" ",ce),"^"),ce=0)}}for(var Ce=ge[ge.length-1],xe=ue[ue.length-1];Ce===xe&&(ce++<2?re=`
  `.concat(Ce).concat(re):W=Ce,ge.pop(),ue.pop(),ge.length!==0&&ue.length!==0);)Ce=ge[ge.length-1],xe=ue[ue.length-1];var _e=Math.max(ge.length,ue.length);if(_e===0){var we=se.split(`
`);if(we.length>30)for(we[26]="".concat(h,"...").concat(v);we.length>27;)we.pop();return"".concat(g.notIdentical,`

`).concat(we.join(`
`),`
`)}ce>3&&(re=`
`.concat(h,"...").concat(v).concat(re),ie=!0),W!==""&&(re=`
  `.concat(W).concat(re),W="");var Ae=0,$=g[Y]+`
`.concat(f,"+ actual").concat(v," ").concat(x,"- expected").concat(v),oe=" ".concat(h,"...").concat(v," Lines skipped");for(ce=0;ce<_e;ce++){var pe=ce-ne;if(ge.length<ce+1)pe>1&&ce>2&&(pe>4?(Q+=`
`.concat(h,"...").concat(v),ie=!0):pe>3&&(Q+=`
  `.concat(ue[ce-2]),Ae++),Q+=`
  `.concat(ue[ce-1]),Ae++),ne=ce,W+=`
`.concat(x,"-").concat(v," ").concat(ue[ce]),Ae++;else if(ue.length<ce+1)pe>1&&ce>2&&(pe>4?(Q+=`
`.concat(h,"...").concat(v),ie=!0):pe>3&&(Q+=`
  `.concat(ge[ce-2]),Ae++),Q+=`
  `.concat(ge[ce-1]),Ae++),ne=ce,Q+=`
`.concat(f,"+").concat(v," ").concat(ge[ce]),Ae++;else{var ye=ue[ce],ke=ge[ce],De=ke!==ye&&(!u(ke,",")||ke.slice(0,-1)!==ye);De&&u(ye,",")&&ye.slice(0,-1)===ke&&(De=!1,ke+=","),De?(pe>1&&ce>2&&(pe>4?(Q+=`
`.concat(h,"...").concat(v),ie=!0):pe>3&&(Q+=`
  `.concat(ge[ce-2]),Ae++),Q+=`
  `.concat(ge[ce-1]),Ae++),ne=ce,Q+=`
`.concat(f,"+").concat(v," ").concat(ke),W+=`
`.concat(x,"-").concat(v," ").concat(ye),Ae+=2):(Q+=W,W="",pe!==1&&ce!==0||(Q+=`
  `.concat(ke),Ae++))}if(Ae>20&&ce<_e-2)return"".concat($).concat(oe,`
`).concat(Q,`
`).concat(h,"...").concat(v).concat(W,`
`)+"".concat(h,"...").concat(v)}return"".concat($).concat(ie?oe:"",`
`).concat(Q).concat(W).concat(re).concat(le)}(N,R,O)));else if(O==="notDeepStrictEqual"||O==="notStrictEqual"){var F=g[O],D=p(N).split(`
`);if(O==="notStrictEqual"&&n(N)==="object"&&N!==null&&(F=g.notStrictEqualObject),D.length>30)for(D[26]="".concat(h,"...").concat(v);D.length>27;)D.pop();L=D.length===1?T(this,r(c).call(this,"".concat(F," ").concat(D[0]))):T(this,r(c).call(this,"".concat(F,`

`).concat(D.join(`
`),`
`)))}else{var U=p(N),j="",J=g[O];O==="notDeepEqual"||O==="notEqual"?(U="".concat(g[O],`

`).concat(U)).length>1024&&(U="".concat(U.slice(0,1021),"...")):(j="".concat(p(R)),U.length>512&&(U="".concat(U.slice(0,509),"...")),j.length>512&&(j="".concat(j.slice(0,509),"...")),O==="deepEqual"||O==="equal"?U="".concat(J,`

`).concat(U,`

should equal

`):j=" ".concat(O," ").concat(j)),L=T(this,r(c).call(this,"".concat(U).concat(j)))}return Error.stackTraceLimit=V,L.generatedMessage=!C,Object.defineProperty(b(L),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),L.code="ERR_ASSERTION",L.actual=N,L.expected=R,L.operator=O,Error.captureStackTrace&&Error.captureStackTrace(b(L),I),L.stack,L.name="AssertionError",T(L)}var M,_;return function(E,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(L&&L.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),L&&o(E,L)}(c,w),M=c,_=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:a.custom,value:function(E,L){return a(this,function(C){for(var O=1;O<arguments.length;O++){var I=arguments[O]!=null?arguments[O]:{},N=Object.keys(I);typeof Object.getOwnPropertySymbols=="function"&&(N=N.concat(Object.getOwnPropertySymbols(I).filter(function(R){return Object.getOwnPropertyDescriptor(I,R).enumerable}))),N.forEach(function(R){k(C,R,I[R])})}return C}({},L,{customInspect:!1,depth:0}))}}],_&&l(M.prototype,_),c}(d(Error));K.exports=m},79616:function(K,z,e){function S(o){return S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},S(o)}function k(o){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},k(o)}function l(o,r){return l=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},l(o,r)}var T,b,d={};function s(o,r,n){n||(n=Error);var a=function(i){function u(h,f,x){var v;return function(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}(this,u),v=function(g,y){return!y||S(y)!=="object"&&typeof y!="function"?function(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}(g):y}(this,k(u).call(this,function(g,y,p){return typeof r=="string"?r:r(g,y,p)}(h,f,x))),v.code=o,v}return function(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),f&&l(h,f)}(u,i),u}(n);d[o]=a}function t(o,r){if(Array.isArray(o)){var n=o.length;return o=o.map(function(a){return String(a)}),n>2?"one of ".concat(r," ").concat(o.slice(0,n-1).join(", "),", or ")+o[n-1]:n===2?"one of ".concat(r," ").concat(o[0]," or ").concat(o[1]):"of ".concat(r," ").concat(o[0])}return"of ".concat(r," ").concat(String(o))}s("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),s("ERR_INVALID_ARG_TYPE",function(o,r,n){var a,i,u,h,f;if(T===void 0&&(T=e(32791)),T(typeof o=="string","'name' must be a string"),typeof r=="string"&&(i="not ",r.substr(0,i.length)===i)?(a="must not be",r=r.replace(/^not /,"")):a="must be",function(v,g,y){return(y===void 0||y>v.length)&&(y=v.length),v.substring(y-g.length,y)===g}(o," argument"))u="The ".concat(o," ").concat(a," ").concat(t(r,"type"));else{var x=(typeof f!="number"&&(f=0),f+1>(h=o).length||h.indexOf(".",f)===-1?"argument":"property");u='The "'.concat(o,'" ').concat(x," ").concat(a," ").concat(t(r,"type"))}return u+". Received type ".concat(S(n))},TypeError),s("ERR_INVALID_ARG_VALUE",function(o,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";b===void 0&&(b=e(43827));var a=b.inspect(r);return a.length>128&&(a="".concat(a.slice(0,128),"...")),"The argument '".concat(o,"' ").concat(n,". Received ").concat(a)},TypeError),s("ERR_INVALID_RETURN_VALUE",function(o,r,n){var a;return a=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):"type ".concat(S(n)),"Expected ".concat(o,' to be returned from the "').concat(r,'"')+" function but got ".concat(a,".")},TypeError),s("ERR_MISSING_ARGS",function(){for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];T===void 0&&(T=e(32791)),T(r.length>0,"At least one arg needs to be specified");var a="The ",i=r.length;switch(r=r.map(function(u){return'"'.concat(u,'"')}),i){case 1:a+="".concat(r[0]," argument");break;case 2:a+="".concat(r[0]," and ").concat(r[1]," arguments");break;default:a+=r.slice(0,i-1).join(", "),a+=", and ".concat(r[i-1]," arguments")}return"".concat(a," must be specified")},TypeError),K.exports.codes=d},74061:function(K,z,e){function S(Z,Y){return function(W){if(Array.isArray(W))return W}(Z)||function(W,Q){var ne=[],re=!0,ie=!1,se=void 0;try{for(var ge,ue=W[Symbol.iterator]();!(re=(ge=ue.next()).done)&&(ne.push(ge.value),!Q||ne.length!==Q);re=!0);}catch(ce){ie=!0,se=ce}finally{try{re||ue.return==null||ue.return()}finally{if(ie)throw se}}return ne}(Z,Y)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function k(Z){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},k(Z)}var l=/a/g.flags!==void 0,T=function(Z){var Y=[];return Z.forEach(function(W){return Y.push(W)}),Y},b=function(Z){var Y=[];return Z.forEach(function(W,Q){return Y.push([Q,W])}),Y},d=Object.is?Object.is:e(64003),s=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},t=Number.isNaN?Number.isNaN:e(15567);function o(Z){return Z.call.bind(Z)}var r=o(Object.prototype.hasOwnProperty),n=o(Object.prototype.propertyIsEnumerable),a=o(Object.prototype.toString),i=e(43827).types,u=i.isAnyArrayBuffer,h=i.isArrayBufferView,f=i.isDate,x=i.isMap,v=i.isRegExp,g=i.isSet,y=i.isNativeError,p=i.isBoxedPrimitive,m=i.isNumberObject,w=i.isStringObject,c=i.isBooleanObject,M=i.isBigIntObject,_=i.isSymbolObject,E=i.isFloat32Array,L=i.isFloat64Array;function C(Z){if(Z.length===0||Z.length>10)return!0;for(var Y=0;Y<Z.length;Y++){var W=Z.charCodeAt(Y);if(W<48||W>57)return!0}return Z.length===10&&Z>=Math.pow(2,32)}function O(Z){return Object.keys(Z).filter(C).concat(s(Z).filter(Object.prototype.propertyIsEnumerable.bind(Z)))}function I(Z,Y){if(Z===Y)return 0;for(var W=Z.length,Q=Y.length,ne=0,re=Math.min(W,Q);ne<re;++ne)if(Z[ne]!==Y[ne]){W=Z[ne],Q=Y[ne];break}return W<Q?-1:Q<W?1:0}function N(Z,Y,W,Q){if(Z===Y)return Z!==0||!W||d(Z,Y);if(W){if(k(Z)!=="object")return typeof Z=="number"&&t(Z)&&t(Y);if(k(Y)!=="object"||Z===null||Y===null||Object.getPrototypeOf(Z)!==Object.getPrototypeOf(Y))return!1}else{if(Z===null||k(Z)!=="object")return(Y===null||k(Y)!=="object")&&Z==Y;if(Y===null||k(Y)!=="object")return!1}var ne,re,ie,se,ge=a(Z);if(ge!==a(Y))return!1;if(Array.isArray(Z)){if(Z.length!==Y.length)return!1;var ue=O(Z),ce=O(Y);return ue.length===ce.length&&V(Z,Y,W,Q,1,ue)}if(ge==="[object Object]"&&(!x(Z)&&x(Y)||!g(Z)&&g(Y)))return!1;if(f(Z)){if(!f(Y)||Date.prototype.getTime.call(Z)!==Date.prototype.getTime.call(Y))return!1}else if(v(Z)){if(!v(Y)||(ie=Z,se=Y,!(l?ie.source===se.source&&ie.flags===se.flags:RegExp.prototype.toString.call(ie)===RegExp.prototype.toString.call(se))))return!1}else if(y(Z)||Z instanceof Error){if(Z.message!==Y.message||Z.name!==Y.name)return!1}else{if(h(Z)){if(W||!E(Z)&&!L(Z)){if(!function(Ce,xe){return Ce.byteLength===xe.byteLength&&I(new Uint8Array(Ce.buffer,Ce.byteOffset,Ce.byteLength),new Uint8Array(xe.buffer,xe.byteOffset,xe.byteLength))===0}(Z,Y))return!1}else if(!function(Ce,xe){if(Ce.byteLength!==xe.byteLength)return!1;for(var _e=0;_e<Ce.byteLength;_e++)if(Ce[_e]!==xe[_e])return!1;return!0}(Z,Y))return!1;var le=O(Z),de=O(Y);return le.length===de.length&&V(Z,Y,W,Q,0,le)}if(g(Z))return!(!g(Y)||Z.size!==Y.size)&&V(Z,Y,W,Q,2);if(x(Z))return!(!x(Y)||Z.size!==Y.size)&&V(Z,Y,W,Q,3);if(u(Z)){if(re=Y,(ne=Z).byteLength!==re.byteLength||I(new Uint8Array(ne),new Uint8Array(re))!==0)return!1}else if(p(Z)&&!function(Ce,xe){return m(Ce)?m(xe)&&d(Number.prototype.valueOf.call(Ce),Number.prototype.valueOf.call(xe)):w(Ce)?w(xe)&&String.prototype.valueOf.call(Ce)===String.prototype.valueOf.call(xe):c(Ce)?c(xe)&&Boolean.prototype.valueOf.call(Ce)===Boolean.prototype.valueOf.call(xe):M(Ce)?M(xe)&&BigInt.prototype.valueOf.call(Ce)===BigInt.prototype.valueOf.call(xe):_(xe)&&Symbol.prototype.valueOf.call(Ce)===Symbol.prototype.valueOf.call(xe)}(Z,Y))return!1}return V(Z,Y,W,Q,0)}function R(Z,Y){return Y.filter(function(W){return n(Z,W)})}function V(Z,Y,W,Q,ne,re){if(arguments.length===5){re=Object.keys(Z);var ie=Object.keys(Y);if(re.length!==ie.length)return!1}for(var se=0;se<re.length;se++)if(!r(Y,re[se]))return!1;if(W&&arguments.length===5){var ge=s(Z);if(ge.length!==0){var ue=0;for(se=0;se<ge.length;se++){var ce=ge[se];if(n(Z,ce)){if(!n(Y,ce))return!1;re.push(ce),ue++}else if(n(Y,ce))return!1}var le=s(Y);if(ge.length!==le.length&&R(Y,le).length!==ue)return!1}else{var de=s(Y);if(de.length!==0&&R(Y,de).length!==0)return!1}}if(re.length===0&&(ne===0||ne===1&&Z.length===0||Z.size===0))return!0;if(Q===void 0)Q={val1:new Map,val2:new Map,position:0};else{var Ce=Q.val1.get(Z);if(Ce!==void 0){var xe=Q.val2.get(Y);if(xe!==void 0)return Ce===xe}Q.position++}Q.val1.set(Z,Q.position),Q.val2.set(Y,Q.position);var _e=X(Z,Y,W,re,Q,ne);return Q.val1.delete(Z),Q.val2.delete(Y),_e}function F(Z,Y,W,Q){for(var ne=T(Z),re=0;re<ne.length;re++){var ie=ne[re];if(N(Y,ie,W,Q))return Z.delete(ie),!0}return!1}function D(Z){switch(k(Z)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":Z=+Z;case"number":if(t(Z))return!1}return!0}function U(Z,Y,W){var Q=D(W);return Q??(Y.has(Q)&&!Z.has(Q))}function j(Z,Y,W,Q,ne){var re=D(W);if(re!=null)return re;var ie=Y.get(re);return!(ie===void 0&&!Y.has(re)||!N(Q,ie,!1,ne))&&!Z.has(re)&&N(Q,ie,!1,ne)}function J(Z,Y,W,Q,ne,re){for(var ie=T(Z),se=0;se<ie.length;se++){var ge=ie[se];if(N(W,ge,ne,re)&&N(Q,Y.get(ge),ne,re))return Z.delete(ge),!0}return!1}function X(Z,Y,W,Q,ne,re){var ie=0;if(re===2){if(!function(ce,le,de,Ce){for(var xe=null,_e=T(ce),we=0;we<_e.length;we++){var Ae=_e[we];if(k(Ae)==="object"&&Ae!==null)xe===null&&(xe=new Set),xe.add(Ae);else if(!le.has(Ae)){if(de||!U(ce,le,Ae))return!1;xe===null&&(xe=new Set),xe.add(Ae)}}if(xe!==null){for(var $=T(le),oe=0;oe<$.length;oe++){var pe=$[oe];if(k(pe)==="object"&&pe!==null){if(!F(xe,pe,de,Ce))return!1}else if(!de&&!ce.has(pe)&&!F(xe,pe,de,Ce))return!1}return xe.size===0}return!0}(Z,Y,W,ne))return!1}else if(re===3){if(!function(ce,le,de,Ce){for(var xe=null,_e=b(ce),we=0;we<_e.length;we++){var Ae=S(_e[we],2),$=Ae[0],oe=Ae[1];if(k($)==="object"&&$!==null)xe===null&&(xe=new Set),xe.add($);else{var pe=le.get($);if(pe===void 0&&!le.has($)||!N(oe,pe,de,Ce)){if(de||!j(ce,le,$,oe,Ce))return!1;xe===null&&(xe=new Set),xe.add($)}}}if(xe!==null){for(var ye=b(le),ke=0;ke<ye.length;ke++){var De=S(ye[ke],2),Pe=($=De[0],De[1]);if(k($)==="object"&&$!==null){if(!J(xe,ce,$,Pe,de,Ce))return!1}else if(!(de||ce.has($)&&N(ce.get($),Pe,!1,Ce)||J(xe,ce,$,Pe,!1,Ce)))return!1}return xe.size===0}return!0}(Z,Y,W,ne))return!1}else if(re===1)for(;ie<Z.length;ie++){if(!r(Z,ie)){if(r(Y,ie))return!1;for(var se=Object.keys(Z);ie<se.length;ie++){var ge=se[ie];if(!r(Y,ge)||!N(Z[ge],Y[ge],W,ne))return!1}return se.length===Object.keys(Y).length}if(!r(Y,ie)||!N(Z[ie],Y[ie],W,ne))return!1}for(ie=0;ie<Q.length;ie++){var ue=Q[ie];if(!N(Z[ue],Y[ue],W,ne))return!1}return!0}K.exports={isDeepEqual:function(Z,Y){return N(Z,Y,!1)},isDeepStrictEqual:function(Z,Y){return N(Z,Y,!0)}}},95341:function(K,z){z.byteLength=function(t){var o=d(t),r=o[0],n=o[1];return 3*(r+n)/4-n},z.toByteArray=function(t){var o,r,n=d(t),a=n[0],i=n[1],u=new k(function(x,v,g){return 3*(v+g)/4-g}(0,a,i)),h=0,f=i>0?a-4:a;for(r=0;r<f;r+=4)o=S[t.charCodeAt(r)]<<18|S[t.charCodeAt(r+1)]<<12|S[t.charCodeAt(r+2)]<<6|S[t.charCodeAt(r+3)],u[h++]=o>>16&255,u[h++]=o>>8&255,u[h++]=255&o;return i===2&&(o=S[t.charCodeAt(r)]<<2|S[t.charCodeAt(r+1)]>>4,u[h++]=255&o),i===1&&(o=S[t.charCodeAt(r)]<<10|S[t.charCodeAt(r+1)]<<4|S[t.charCodeAt(r+2)]>>2,u[h++]=o>>8&255,u[h++]=255&o),u},z.fromByteArray=function(t){for(var o,r=t.length,n=r%3,a=[],i=16383,u=0,h=r-n;u<h;u+=i)a.push(s(t,u,u+i>h?h:u+i));return n===1?(o=t[r-1],a.push(e[o>>2]+e[o<<4&63]+"==")):n===2&&(o=(t[r-2]<<8)+t[r-1],a.push(e[o>>10]+e[o>>4&63]+e[o<<2&63]+"=")),a.join("")};for(var e=[],S=[],k=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=0,b=l.length;T<b;++T)e[T]=l[T],S[l.charCodeAt(T)]=T;function d(t){var o=t.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return r===-1&&(r=o),[r,r===o?0:4-r%4]}function s(t,o,r){for(var n,a,i=[],u=o;u<r;u+=3)n=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(255&t[u+2]),i.push(e[(a=n)>>18&63]+e[a>>12&63]+e[a>>6&63]+e[63&a]);return i.join("")}S["-".charCodeAt(0)]=62,S["_".charCodeAt(0)]=63},91358:function(K){function z(b,d,s,t,o){for(var r=o+1;t<=o;){var n=t+o>>>1,a=b[n];(s!==void 0?s(a,d):a-d)>=0?(r=n,o=n-1):t=n+1}return r}function e(b,d,s,t,o){for(var r=o+1;t<=o;){var n=t+o>>>1,a=b[n];(s!==void 0?s(a,d):a-d)>0?(r=n,o=n-1):t=n+1}return r}function S(b,d,s,t,o){for(var r=t-1;t<=o;){var n=t+o>>>1,a=b[n];(s!==void 0?s(a,d):a-d)<0?(r=n,t=n+1):o=n-1}return r}function k(b,d,s,t,o){for(var r=t-1;t<=o;){var n=t+o>>>1,a=b[n];(s!==void 0?s(a,d):a-d)<=0?(r=n,t=n+1):o=n-1}return r}function l(b,d,s,t,o){for(;t<=o;){var r=t+o>>>1,n=b[r],a=s!==void 0?s(n,d):n-d;if(a===0)return r;a<=0?t=r+1:o=r-1}return-1}function T(b,d,s,t,o,r){return typeof s=="function"?r(b,d,s,t===void 0?0:0|t,o===void 0?b.length-1:0|o):r(b,d,void 0,s===void 0?0:0|s,t===void 0?b.length-1:0|t)}K.exports={ge:function(b,d,s,t,o){return T(b,d,s,t,o,z)},gt:function(b,d,s,t,o){return T(b,d,s,t,o,e)},lt:function(b,d,s,t,o){return T(b,d,s,t,o,S)},le:function(b,d,s,t,o){return T(b,d,s,t,o,k)},eq:function(b,d,s,t,o){return T(b,d,s,t,o,l)}}},13547:function(K,z){function e(k){var l=32;return(k&=-k)&&l--,65535&k&&(l-=16),16711935&k&&(l-=8),252645135&k&&(l-=4),858993459&k&&(l-=2),1431655765&k&&(l-=1),l}z.INT_BITS=32,z.INT_MAX=2147483647,z.INT_MIN=-2147483648,z.sign=function(k){return(k>0)-(k<0)},z.abs=function(k){var l=k>>31;return(k^l)-l},z.min=function(k,l){return l^(k^l)&-(k<l)},z.max=function(k,l){return k^(k^l)&-(k<l)},z.isPow2=function(k){return!(k&k-1||!k)},z.log2=function(k){var l,T;return l=(k>65535)<<4,l|=T=((k>>>=l)>255)<<3,l|=T=((k>>>=T)>15)<<2,(l|=T=((k>>>=T)>3)<<1)|(k>>>=T)>>1},z.log10=function(k){return k>=1e9?9:k>=1e8?8:k>=1e7?7:k>=1e6?6:k>=1e5?5:k>=1e4?4:k>=1e3?3:k>=100?2:k>=10?1:0},z.popCount=function(k){return 16843009*((k=(858993459&(k-=k>>>1&1431655765))+(k>>>2&858993459))+(k>>>4)&252645135)>>>24},z.countTrailingZeros=e,z.nextPow2=function(k){return k+=k===0,--k,k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,1+(k|=k>>>16)},z.prevPow2=function(k){return k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,(k|=k>>>16)-(k>>>1)},z.parity=function(k){return k^=k>>>16,k^=k>>>8,k^=k>>>4,27030>>>(k&=15)&1};var S=new Array(256);(function(k){for(var l=0;l<256;++l){var T=l,b=l,d=7;for(T>>>=1;T;T>>>=1)b<<=1,b|=1&T,--d;k[l]=b<<d&255}})(S),z.reverse=function(k){return S[255&k]<<24|S[k>>>8&255]<<16|S[k>>>16&255]<<8|S[k>>>24&255]},z.interleave2=function(k,l){return(k=1431655765&((k=858993459&((k=252645135&((k=16711935&((k&=65535)|k<<8))|k<<4))|k<<2))|k<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l&=65535)|l<<8))|l<<4))|l<<2))|l<<1))<<1},z.deinterleave2=function(k,l){return(k=65535&((k=16711935&((k=252645135&((k=858993459&((k=k>>>l&1431655765)|k>>>1))|k>>>2))|k>>>4))|k>>>16))<<16>>16},z.interleave3=function(k,l,T){return k=1227133513&((k=3272356035&((k=251719695&((k=4278190335&((k&=1023)|k<<16))|k<<8))|k<<4))|k<<2),(k|=(l=1227133513&((l=3272356035&((l=251719695&((l=4278190335&((l&=1023)|l<<16))|l<<8))|l<<4))|l<<2))<<1)|(T=1227133513&((T=3272356035&((T=251719695&((T=4278190335&((T&=1023)|T<<16))|T<<8))|T<<4))|T<<2))<<2},z.deinterleave3=function(k,l){return(k=1023&((k=4278190335&((k=251719695&((k=3272356035&((k=k>>>l&1227133513)|k>>>2))|k>>>4))|k>>>8))|k>>>16))<<22>>22},z.nextCombination=function(k){var l=k|k-1;return l+1|(~l&-~l)-1>>>e(k)+1}},44781:function(K,z,e){var S=e(53435);K.exports=function(b,d){d||(d={});var s,t,o,r,n,a,i,u,h,f,x,v=d.cutoff==null?.25:d.cutoff,g=d.radius==null?8:d.radius,y=d.channel||0;if(ArrayBuffer.isView(b)||Array.isArray(b)){if(!d.width||!d.height)throw Error("For raw data width and height should be provided by options");s=d.width,t=d.height,r=b,a=d.stride?d.stride:Math.floor(b.length/s/t)}else window.HTMLCanvasElement&&b instanceof window.HTMLCanvasElement?(i=(u=b).getContext("2d"),s=u.width,t=u.height,r=(h=i.getImageData(0,0,s,t)).data,a=4):window.CanvasRenderingContext2D&&b instanceof window.CanvasRenderingContext2D?(i=b,s=(u=b.canvas).width,t=u.height,r=(h=i.getImageData(0,0,s,t)).data,a=4):window.ImageData&&b instanceof window.ImageData&&(h=b,s=b.width,t=b.height,r=h.data,a=4);if(o=Math.max(s,t),window.Uint8ClampedArray&&r instanceof window.Uint8ClampedArray||window.Uint8Array&&r instanceof window.Uint8Array)for(n=r,r=Array(s*t),f=0,x=n.length;f<x;f++)r[f]=n[f*a+y]/255;else if(a!==1)throw Error("Raw data can have only 1 value per pixel");var p=Array(s*t),m=Array(s*t),w=Array(o),c=Array(o),M=Array(o+1),_=Array(o);for(f=0,x=s*t;f<x;f++){var E=r[f];p[f]=E===1?0:E===0?k:Math.pow(Math.max(0,.5-E),2),m[f]=E===1?k:E===0?0:Math.pow(Math.max(0,E-.5),2)}l(p,s,t,w,c,_,M),l(m,s,t,w,c,_,M);var L=window.Float32Array?new Float32Array(s*t):new Array(s*t);for(f=0,x=s*t;f<x;f++)L[f]=S(1-((p[f]-m[f])/g+v),0,1);return L};var k=1e20;function l(b,d,s,t,o,r,n){for(var a=0;a<d;a++){for(var i=0;i<s;i++)t[i]=b[i*d+a];for(T(t,o,r,n,s),i=0;i<s;i++)b[i*d+a]=o[i]}for(i=0;i<s;i++){for(a=0;a<d;a++)t[a]=b[i*d+a];for(T(t,o,r,n,d),a=0;a<d;a++)b[i*d+a]=Math.sqrt(o[a])}}function T(b,d,s,t,o){s[0]=0,t[0]=-k,t[1]=+k;for(var r=1,n=0;r<o;r++){for(var a=(b[r]+r*r-(b[s[n]]+s[n]*s[n]))/(2*r-2*s[n]);a<=t[n];)n--,a=(b[r]+r*r-(b[s[n]]+s[n]*s[n]))/(2*r-2*s[n]);s[++n]=r,t[n]=a,t[n+1]=+k}for(r=0,n=0;r<o;r++){for(;t[n+1]<r;)n++;d[r]=(r-s[n])*(r-s[n])+b[s[n]]}}},6614:function(K,z,e){var S=e(68318),k=e(68222),l=k(S("String.prototype.indexOf"));K.exports=function(T,b){var d=S(T,!!b);return typeof d=="function"&&l(T,".prototype.")>-1?k(d):d}},68222:function(K,z,e){var S=e(77575),k=e(68318),l=k("%Function.prototype.apply%"),T=k("%Function.prototype.call%"),b=k("%Reflect.apply%",!0)||S.call(T,l),d=k("%Object.getOwnPropertyDescriptor%",!0),s=k("%Object.defineProperty%",!0),t=k("%Math.max%");if(s)try{s({},"a",{value:1})}catch{s=null}K.exports=function(r){var n=b(S,T,arguments);if(d&&s){var a=d(n,"length");a.configurable&&s(n,"length",{value:1+t(0,r.length-(arguments.length-1))})}return n};var o=function(){return b(S,l,arguments)};s?s(K.exports,"apply",{value:o}):K.exports.apply=o},53435:function(K){K.exports=function(z,e,S){return e<S?z<e?e:z>S?S:z:z<S?S:z>e?e:z}},6475:function(K,z,e){var S=e(53435);function k(l,T){T==null&&(T=!0);var b=l[0],d=l[1],s=l[2],t=l[3];return t==null&&(t=T?1:255),T&&(b*=255,d*=255,s*=255,t*=255),16777216*(b=255&S(b,0,255))+((d=255&S(d,0,255))<<16)+((s=255&S(s,0,255))<<8)+(255&S(t,0,255))}K.exports=k,K.exports.to=k,K.exports.from=function(l,T){var b=(l=+l)>>>24,d=(16711680&l)>>>16,s=(65280&l)>>>8,t=255&l;return T===!1?[b,d,s,t]:[b/255,d/255,s/255,t/255]}},76857:function(K){K.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},25075:function(K,z,e){var S=e(36652),k=e(53435),l=e(90660);K.exports=function(T,b){b!=="float"&&b||(b="array"),b==="uint"&&(b="uint8"),b==="uint_clamped"&&(b="uint8_clamped");var d=new(l(b))(4),s=b!=="uint8"&&b!=="uint8_clamped";return T.length&&typeof T!="string"||((T=S(T))[0]/=255,T[1]/=255,T[2]/=255),function(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||!!(Array.isArray(t)&&(t[0]>1||t[0]===0)&&(t[1]>1||t[1]===0)&&(t[2]>1||t[2]===0)&&(!t[3]||t[3]>1))}(T)?(d[0]=T[0],d[1]=T[1],d[2]=T[2],d[3]=T[3]!=null?T[3]:255,s&&(d[0]/=255,d[1]/=255,d[2]/=255,d[3]/=255),d):(s?(d[0]=T[0],d[1]=T[1],d[2]=T[2],d[3]=T[3]!=null?T[3]:1):(d[0]=k(Math.floor(255*T[0]),0,255),d[1]=k(Math.floor(255*T[1]),0,255),d[2]=k(Math.floor(255*T[2]),0,255),d[3]=T[3]==null?255:k(Math.floor(255*T[3]),0,255)),d)}},90736:function(K,z,e){var S=e(76857),k=e(10973),l=e(46775);K.exports=function(b){var d,s,t=[],o=1;if(typeof b=="string")if(S[b])t=S[b].slice(),s="rgb";else if(b==="transparent")o=0,s="rgb",t=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(b)){var r=(i=b.slice(1)).length;o=1,r<=4?(t=[parseInt(i[0]+i[0],16),parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16)],r===4&&(o=parseInt(i[3]+i[3],16)/255)):(t=[parseInt(i[0]+i[1],16),parseInt(i[2]+i[3],16),parseInt(i[4]+i[5],16)],r===8&&(o=parseInt(i[6]+i[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),s="rgb"}else if(d=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(b)){var n=d[1],a=n==="rgb",i=n.replace(/a$/,"");s=i,r=i==="cmyk"?4:i==="gray"?1:3,t=d[2].trim().split(/\s*,\s*/).map(function(h,f){if(/%$/.test(h))return f===r?parseFloat(h)/100:i==="rgb"?255*parseFloat(h)/100:parseFloat(h);if(i[f]==="h"){if(/deg$/.test(h))return parseFloat(h);if(T[h]!==void 0)return T[h]}return parseFloat(h)}),n===i&&t.push(1),o=a||t[r]===void 0?1:t[r],t=t.slice(0,r)}else b.length>10&&/[0-9](?:\s|\/)/.test(b)&&(t=b.match(/([0-9]+)/g).map(function(h){return parseFloat(h)}),s=b.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(b))if(k(b)){var u=l(b.r,b.red,b.R,null);u!==null?(s="rgb",t=[u,l(b.g,b.green,b.G),l(b.b,b.blue,b.B)]):(s="hsl",t=[l(b.h,b.hue,b.H),l(b.s,b.saturation,b.S),l(b.l,b.lightness,b.L,b.b,b.brightness)]),o=l(b.a,b.alpha,b.opacity,1),b.opacity!=null&&(o/=100)}else(Array.isArray(b)||e.g.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(b))&&(t=[b[0],b[1],b[2]],s="rgb",o=b.length===4?b[3]:1);else s="rgb",t=[b>>>16,(65280&b)>>>8,255&b];return{space:s,values:t,alpha:o}};var T={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},36652:function(K,z,e){var S=e(90736),k=e(80009),l=e(53435);K.exports=function(T){var b,d=S(T);return d.space?((b=Array(3))[0]=l(d.values[0],0,255),b[1]=l(d.values[1],0,255),b[2]=l(d.values[2],0,255),d.space[0]==="h"&&(b=k.rgb(b)),b.push(l(d.alpha,0,1)),b):[]}},80009:function(K,z,e){var S=e(6866);K.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(k){var l,T,b,d,s,t=k[0]/360,o=k[1]/100,r=k[2]/100;if(o===0)return[s=255*r,s,s];l=2*r-(T=r<.5?r*(1+o):r+o-r*o),d=[0,0,0];for(var n=0;n<3;n++)(b=t+.3333333333333333*-(n-1))<0?b++:b>1&&b--,s=6*b<1?l+6*(T-l)*b:2*b<1?T:3*b<2?l+(T-l)*(.6666666666666666-b)*6:l,d[n]=255*s;return d}},S.hsl=function(k){var l,T,b=k[0]/255,d=k[1]/255,s=k[2]/255,t=Math.min(b,d,s),o=Math.max(b,d,s),r=o-t;return o===t?l=0:b===o?l=(d-s)/r:d===o?l=2+(s-b)/r:s===o&&(l=4+(b-d)/r),(l=Math.min(60*l,360))<0&&(l+=360),T=(t+o)/2,[l,100*(o===t?0:T<=.5?r/(o+t):r/(2-o-t)),100*T]}},6866:function(K){K.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},24138:function(K){K.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|ç)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|é)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|é)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|ã)o.?tom(e|é)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},72791:function(K,z,e){K.exports={parse:e(41004),stringify:e(53313)}},63625:function(K,z,e){var S=e(40402);K.exports={isSize:function(k){return/^[\d\.]/.test(k)||k.indexOf("/")!==-1||S.indexOf(k)!==-1}}},41004:function(K,z,e){var S=e(90448),k=e(38732),l=e(41901),T=e(15659),b=e(96209),d=e(83794),s=e(99011),t=e(63625).isSize;K.exports=r;var o=r.cache={};function r(a){if(typeof a!="string")throw new Error("Font argument must be a string.");if(o[a])return o[a];if(a==="")throw new Error("Cannot parse an empty string.");if(l.indexOf(a)!==-1)return o[a]={system:a};for(var i,u={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},h=s(a,/\s+/);i=h.shift();){if(k.indexOf(i)!==-1)return["style","variant","weight","stretch"].forEach(function(x){u[x]=i}),o[a]=u;if(b.indexOf(i)===-1)if(i!=="normal"&&i!=="small-caps")if(d.indexOf(i)===-1){if(T.indexOf(i)===-1){if(t(i)){var f=s(i,"/");if(u.size=f[0],f[1]!=null?u.lineHeight=n(f[1]):h[0]==="/"&&(h.shift(),u.lineHeight=n(h.shift())),!h.length)throw new Error("Missing required font-family.");return u.family=s(h.join(" "),/\s*,\s*/).map(S),o[a]=u}throw new Error("Unknown or unsupported font token: "+i)}u.weight=i}else u.stretch=i;else u.variant=i;else u.style=i}throw new Error("Missing required font-size.")}function n(a){var i=parseFloat(a);return i.toString()===a?i:a}},53313:function(K,z,e){var S=e(71299),k=e(63625).isSize,l=a(e(38732)),T=a(e(41901)),b=a(e(15659)),d=a(e(96209)),s=a(e(83794)),t={normal:1,"small-caps":1},o={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},r="serif";function n(i,u){if(i&&!u[i]&&!l[i])throw Error("Unknown keyword `"+i+"`");return i}function a(i){for(var u={},h=0;h<i.length;h++)u[i[h]]=1;return u}K.exports=function(i){if((i=S(i,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return i.system&&n(i.system,T),i.system;if(n(i.style,d),n(i.variant,t),n(i.weight,b),n(i.stretch,s),i.size==null&&(i.size="1rem"),typeof i.size=="number"&&(i.size+="px"),!k)throw Error("Bad size value `"+i.size+"`");i.family||(i.family=r),Array.isArray(i.family)&&(i.family.length||(i.family=[r]),i.family=i.family.map(function(h){return o[h]?h:'"'+h+'"'}).join(", "));var u=[];return u.push(i.style),i.variant!==i.style&&u.push(i.variant),i.weight!==i.variant&&i.weight!==i.style&&u.push(i.weight),i.stretch!==i.weight&&i.stretch!==i.variant&&i.stretch!==i.style&&u.push(i.stretch),u.push(i.size+(i.lineHeight==null||i.lineHeight==="normal"||i.lineHeight+""=="1"?"":"/"+i.lineHeight)),u.push(i.family),u.filter(Boolean).join(" ")}},55174:function(K,z,e){var S,k=e(24582),l=e(10424),T=e(82527),b=e(19012),d=e(21780),s=e(16906),t=Function.prototype.bind,o=Object.defineProperty,r=Object.prototype.hasOwnProperty;S=function(n,a,i){var u,h=l(a)&&T(a.value);return delete(u=b(a)).writable,delete u.value,u.get=function(){return!i.overwriteDefinition&&r.call(this,n)?h:(a.value=t.call(h,i.resolveContext?i.resolveContext(this):this),o(this,n,a),this[n])},u},K.exports=function(n){var a=d(arguments[1]);return k(a.resolveContext)&&T(a.resolveContext),s(n,function(i,u){return S(u,i,a)})}},62072:function(K,z,e){var S=e(24582),k=e(84985),l=e(95879),T=e(21780),b=e(66741),d=K.exports=function(s,t){var o,r,n,a,i;return arguments.length<2||typeof s!="string"?(a=t,t=s,s=null):a=arguments[2],S(s)?(o=b.call(s,"c"),r=b.call(s,"e"),n=b.call(s,"w")):(o=n=!0,r=!1),i={value:t,configurable:o,enumerable:r,writable:n},a?l(T(a),i):i};d.gs=function(s,t,o){var r,n,a,i;return typeof s!="string"?(a=o,o=t,t=s,s=null):a=arguments[3],S(t)?k(t)?S(o)?k(o)||(a=o,o=void 0):o=void 0:(a=t,t=o=void 0):t=void 0,S(s)?(r=b.call(s,"c"),n=b.call(s,"e")):(r=!0,n=!1),i={get:t,set:o,configurable:r,enumerable:n},a?l(T(a),i):i}},33064:function(K,z,e){function S(n,a){return n<a?-1:n>a?1:n>=a?0:NaN}e.d(z,{j2:function(){return S},Fp:function(){return T},J6:function(){return d},TS:function(){return s},VV:function(){return t},w6:function(){return o},Sm:function(){return r}}),(k=S).length===1&&(l=k,k=function(n,a){return S(l(n),a)});var k,l;function T(n,a){var i,u,h=n.length,f=-1;if(a==null){for(;++f<h;)if((i=n[f])!=null&&i>=i)for(u=i;++f<h;)(i=n[f])!=null&&i>u&&(u=i)}else for(;++f<h;)if((i=a(n[f],f,n))!=null&&i>=i)for(u=i;++f<h;)(i=a(n[f],f,n))!=null&&i>u&&(u=i);return u}function b(n){return n===null?NaN:+n}function d(n,a){var i,u=n.length,h=u,f=-1,x=0;if(a==null)for(;++f<u;)isNaN(i=b(n[f]))?--h:x+=i;else for(;++f<u;)isNaN(i=b(a(n[f],f,n)))?--h:x+=i;if(h)return x/h}function s(n){for(var a,i,u,h=n.length,f=-1,x=0;++f<h;)x+=n[f].length;for(i=new Array(x);--h>=0;)for(a=(u=n[h]).length;--a>=0;)i[--x]=u[a];return i}function t(n,a){var i,u,h=n.length,f=-1;if(a==null){for(;++f<h;)if((i=n[f])!=null&&i>=i)for(u=i;++f<h;)(i=n[f])!=null&&u>i&&(u=i)}else for(;++f<h;)if((i=a(n[f],f,n))!=null&&i>=i)for(u=i;++f<h;)(i=a(n[f],f,n))!=null&&u>i&&(u=i);return u}function o(n,a,i){n=+n,a=+a,i=(h=arguments.length)<2?(a=n,n=0,1):h<3?1:+i;for(var u=-1,h=0|Math.max(0,Math.ceil((a-n)/i)),f=new Array(h);++u<h;)f[u]=n+u*i;return f}function r(n,a){var i,u=n.length,h=-1,f=0;if(a==null)for(;++h<u;)(i=+n[h])&&(f+=i);else for(;++h<u;)(i=+a(n[h],h,n))&&(f+=i);return f}},15140:function(K,z,e){e.d(z,{UI:function(){return T},b1:function(){return b}});var S="$";function k(){}function l(a,i){var u=new k;if(a instanceof k)a.each(function(g,y){u.set(y,g)});else if(Array.isArray(a)){var h,f=-1,x=a.length;if(i==null)for(;++f<x;)u.set(f,a[f]);else for(;++f<x;)u.set(i(h=a[f],f,a),h)}else if(a)for(var v in a)u.set(v,a[v]);return u}k.prototype=l.prototype={constructor:k,has:function(a){return S+a in this},get:function(a){return this[S+a]},set:function(a,i){return this[S+a]=i,this},remove:function(a){var i=S+a;return i in this&&delete this[i]},clear:function(){for(var a in this)a[0]===S&&delete this[a]},keys:function(){var a=[];for(var i in this)i[0]===S&&a.push(i.slice(1));return a},values:function(){var a=[];for(var i in this)i[0]===S&&a.push(this[i]);return a},entries:function(){var a=[];for(var i in this)i[0]===S&&a.push({key:i.slice(1),value:this[i]});return a},size:function(){var a=0;for(var i in this)i[0]===S&&++a;return a},empty:function(){for(var a in this)if(a[0]===S)return!1;return!0},each:function(a){for(var i in this)i[0]===S&&a(this[i],i.slice(1),this)}};var T=l;function b(){var a,i,u,h=[],f=[];function x(g,y,p,m){if(y>=h.length)return a!=null&&g.sort(a),i!=null?i(g):g;for(var w,c,M,_=-1,E=g.length,L=h[y++],C=T(),O=p();++_<E;)(M=C.get(w=L(c=g[_])+""))?M.push(c):C.set(w,[c]);return C.each(function(I,N){m(O,N,x(I,y,p,m))}),O}function v(g,y){if(++y>h.length)return g;var p,m=f[y-1];return i!=null&&y>=h.length?p=g.entries():(p=[],g.each(function(w,c){p.push({key:c,values:v(w,y)})})),m!=null?p.sort(function(w,c){return m(w.key,c.key)}):p}return u={object:function(g){return x(g,0,d,s)},map:function(g){return x(g,0,t,o)},entries:function(g){return v(x(g,0,t,o),0)},key:function(g){return h.push(g),u},sortKeys:function(g){return f[h.length-1]=g,u},sortValues:function(g){return a=g,u},rollup:function(g){return i=g,u}}}function d(){return{}}function s(a,i,u){a[i]=u}function t(){return T()}function o(a,i,u){a.set(i,u)}function r(){}var n=T.prototype;r.prototype={constructor:r,has:n.has,add:function(a){return this[S+(a+="")]=a,this},remove:n.remove,clear:n.clear,values:n.keys,size:n.size,empty:n.empty,each:n.each}},49887:function(K,z,e){function S(ce,le){var de;function Ce(){var xe,_e,we=de.length,Ae=0,$=0;for(xe=0;xe<we;++xe)Ae+=(_e=de[xe]).x,$+=_e.y;for(Ae=Ae/we-ce,$=$/we-le,xe=0;xe<we;++xe)(_e=de[xe]).x-=Ae,_e.y-=$}return ce==null&&(ce=0),le==null&&(le=0),Ce.initialize=function(xe){de=xe},Ce.x=function(xe){return arguments.length?(ce=+xe,Ce):ce},Ce.y=function(xe){return arguments.length?(le=+xe,Ce):le},Ce}function k(ce){return function(){return ce}}function l(){return 1e-6*(Math.random()-.5)}function T(ce,le,de,Ce){if(isNaN(le)||isNaN(de))return ce;var xe,_e,we,Ae,$,oe,pe,ye,ke,De=ce._root,Pe={data:Ce},Re=ce._x0,fe=ce._y0,ve=ce._x1,Te=ce._y1;if(!De)return ce._root=Pe,ce;for(;De.length;)if((oe=le>=(_e=(Re+ve)/2))?Re=_e:ve=_e,(pe=de>=(we=(fe+Te)/2))?fe=we:Te=we,xe=De,!(De=De[ye=pe<<1|oe]))return xe[ye]=Pe,ce;if(Ae=+ce._x.call(null,De.data),$=+ce._y.call(null,De.data),le===Ae&&de===$)return Pe.next=De,xe?xe[ye]=Pe:ce._root=Pe,ce;do xe=xe?xe[ye]=new Array(4):ce._root=new Array(4),(oe=le>=(_e=(Re+ve)/2))?Re=_e:ve=_e,(pe=de>=(we=(fe+Te)/2))?fe=we:Te=we;while((ye=pe<<1|oe)==(ke=($>=we)<<1|Ae>=_e));return xe[ke]=De,xe[ye]=Pe,ce}function b(ce,le,de,Ce,xe){this.node=ce,this.x0=le,this.y0=de,this.x1=Ce,this.y1=xe}function d(ce){return ce[0]}function s(ce){return ce[1]}function t(ce,le,de){var Ce=new o(le??d,de??s,NaN,NaN,NaN,NaN);return ce==null?Ce:Ce.addAll(ce)}function o(ce,le,de,Ce,xe,_e){this._x=ce,this._y=le,this._x0=de,this._y0=Ce,this._x1=xe,this._y1=_e,this._root=void 0}function r(ce){for(var le={data:ce.data},de=le;ce=ce.next;)de=de.next={data:ce.data};return le}e.r(z),e.d(z,{forceCenter:function(){return S},forceCollide:function(){return u},forceLink:function(){return v},forceManyBody:function(){return ie},forceRadial:function(){return se},forceSimulation:function(){return re},forceX:function(){return ge},forceY:function(){return ue}});var n=t.prototype=o.prototype;function a(ce){return ce.x+ce.vx}function i(ce){return ce.y+ce.vy}function u(ce){var le,de,Ce=1,xe=1;function _e(){for(var $,oe,pe,ye,ke,De,Pe,Re=le.length,fe=0;fe<xe;++fe)for(oe=t(le,a,i).visitAfter(we),$=0;$<Re;++$)pe=le[$],De=de[pe.index],Pe=De*De,ye=pe.x+pe.vx,ke=pe.y+pe.vy,oe.visit(ve);function ve(Te,ze,He,Ve,nt){var tt=Te.data,ot=Te.r,pt=De+ot;if(!tt)return ze>ye+pt||Ve<ye-pt||He>ke+pt||nt<ke-pt;if(tt.index>pe.index){var Tt=ye-tt.x-tt.vx,yt=ke-tt.y-tt.vy,dt=Tt*Tt+yt*yt;dt<pt*pt&&(Tt===0&&(dt+=(Tt=l())*Tt),yt===0&&(dt+=(yt=l())*yt),dt=(pt-(dt=Math.sqrt(dt)))/dt*Ce,pe.vx+=(Tt*=dt)*(pt=(ot*=ot)/(Pe+ot)),pe.vy+=(yt*=dt)*pt,tt.vx-=Tt*(pt=1-pt),tt.vy-=yt*pt)}}}function we($){if($.data)return $.r=de[$.data.index];for(var oe=$.r=0;oe<4;++oe)$[oe]&&$[oe].r>$.r&&($.r=$[oe].r)}function Ae(){if(le){var $,oe,pe=le.length;for(de=new Array(pe),$=0;$<pe;++$)oe=le[$],de[oe.index]=+ce(oe,$,le)}}return typeof ce!="function"&&(ce=k(ce==null?1:+ce)),_e.initialize=function($){le=$,Ae()},_e.iterations=function($){return arguments.length?(xe=+$,_e):xe},_e.strength=function($){return arguments.length?(Ce=+$,_e):Ce},_e.radius=function($){return arguments.length?(ce=typeof $=="function"?$:k(+$),Ae(),_e):ce},_e}n.copy=function(){var ce,le,de=new o(this._x,this._y,this._x0,this._y0,this._x1,this._y1),Ce=this._root;if(!Ce)return de;if(!Ce.length)return de._root=r(Ce),de;for(ce=[{source:Ce,target:de._root=new Array(4)}];Ce=ce.pop();)for(var xe=0;xe<4;++xe)(le=Ce.source[xe])&&(le.length?ce.push({source:le,target:Ce.target[xe]=new Array(4)}):Ce.target[xe]=r(le));return de},n.add=function(ce){var le=+this._x.call(null,ce),de=+this._y.call(null,ce);return T(this.cover(le,de),le,de,ce)},n.addAll=function(ce){var le,de,Ce,xe,_e=ce.length,we=new Array(_e),Ae=new Array(_e),$=1/0,oe=1/0,pe=-1/0,ye=-1/0;for(de=0;de<_e;++de)isNaN(Ce=+this._x.call(null,le=ce[de]))||isNaN(xe=+this._y.call(null,le))||(we[de]=Ce,Ae[de]=xe,Ce<$&&($=Ce),Ce>pe&&(pe=Ce),xe<oe&&(oe=xe),xe>ye&&(ye=xe));if($>pe||oe>ye)return this;for(this.cover($,oe).cover(pe,ye),de=0;de<_e;++de)T(this,we[de],Ae[de],ce[de]);return this},n.cover=function(ce,le){if(isNaN(ce=+ce)||isNaN(le=+le))return this;var de=this._x0,Ce=this._y0,xe=this._x1,_e=this._y1;if(isNaN(de))xe=(de=Math.floor(ce))+1,_e=(Ce=Math.floor(le))+1;else{for(var we,Ae,$=xe-de,oe=this._root;de>ce||ce>=xe||Ce>le||le>=_e;)switch(Ae=(le<Ce)<<1|ce<de,(we=new Array(4))[Ae]=oe,oe=we,$*=2,Ae){case 0:xe=de+$,_e=Ce+$;break;case 1:de=xe-$,_e=Ce+$;break;case 2:xe=de+$,Ce=_e-$;break;case 3:de=xe-$,Ce=_e-$}this._root&&this._root.length&&(this._root=oe)}return this._x0=de,this._y0=Ce,this._x1=xe,this._y1=_e,this},n.data=function(){var ce=[];return this.visit(function(le){if(!le.length)do ce.push(le.data);while(le=le.next)}),ce},n.extent=function(ce){return arguments.length?this.cover(+ce[0][0],+ce[0][1]).cover(+ce[1][0],+ce[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n.find=function(ce,le,de){var Ce,xe,_e,we,Ae,$,oe,pe=this._x0,ye=this._y0,ke=this._x1,De=this._y1,Pe=[],Re=this._root;for(Re&&Pe.push(new b(Re,pe,ye,ke,De)),de==null?de=1/0:(pe=ce-de,ye=le-de,ke=ce+de,De=le+de,de*=de);$=Pe.pop();)if(!(!(Re=$.node)||(xe=$.x0)>ke||(_e=$.y0)>De||(we=$.x1)<pe||(Ae=$.y1)<ye))if(Re.length){var fe=(xe+we)/2,ve=(_e+Ae)/2;Pe.push(new b(Re[3],fe,ve,we,Ae),new b(Re[2],xe,ve,fe,Ae),new b(Re[1],fe,_e,we,ve),new b(Re[0],xe,_e,fe,ve)),(oe=(le>=ve)<<1|ce>=fe)&&($=Pe[Pe.length-1],Pe[Pe.length-1]=Pe[Pe.length-1-oe],Pe[Pe.length-1-oe]=$)}else{var Te=ce-+this._x.call(null,Re.data),ze=le-+this._y.call(null,Re.data),He=Te*Te+ze*ze;if(He<de){var Ve=Math.sqrt(de=He);pe=ce-Ve,ye=le-Ve,ke=ce+Ve,De=le+Ve,Ce=Re.data}}return Ce},n.remove=function(ce){if(isNaN(_e=+this._x.call(null,ce))||isNaN(we=+this._y.call(null,ce)))return this;var le,de,Ce,xe,_e,we,Ae,$,oe,pe,ye,ke,De=this._root,Pe=this._x0,Re=this._y0,fe=this._x1,ve=this._y1;if(!De)return this;if(De.length)for(;;){if((oe=_e>=(Ae=(Pe+fe)/2))?Pe=Ae:fe=Ae,(pe=we>=($=(Re+ve)/2))?Re=$:ve=$,le=De,!(De=De[ye=pe<<1|oe]))return this;if(!De.length)break;(le[ye+1&3]||le[ye+2&3]||le[ye+3&3])&&(de=le,ke=ye)}for(;De.data!==ce;)if(Ce=De,!(De=De.next))return this;return(xe=De.next)&&delete De.next,Ce?(xe?Ce.next=xe:delete Ce.next,this):le?(xe?le[ye]=xe:delete le[ye],(De=le[0]||le[1]||le[2]||le[3])&&De===(le[3]||le[2]||le[1]||le[0])&&!De.length&&(de?de[ke]=De:this._root=De),this):(this._root=xe,this)},n.removeAll=function(ce){for(var le=0,de=ce.length;le<de;++le)this.remove(ce[le]);return this},n.root=function(){return this._root},n.size=function(){var ce=0;return this.visit(function(le){if(!le.length)do++ce;while(le=le.next)}),ce},n.visit=function(ce){var le,de,Ce,xe,_e,we,Ae=[],$=this._root;for($&&Ae.push(new b($,this._x0,this._y0,this._x1,this._y1));le=Ae.pop();)if(!ce($=le.node,Ce=le.x0,xe=le.y0,_e=le.x1,we=le.y1)&&$.length){var oe=(Ce+_e)/2,pe=(xe+we)/2;(de=$[3])&&Ae.push(new b(de,oe,pe,_e,we)),(de=$[2])&&Ae.push(new b(de,Ce,pe,oe,we)),(de=$[1])&&Ae.push(new b(de,oe,xe,_e,pe)),(de=$[0])&&Ae.push(new b(de,Ce,xe,oe,pe))}return this},n.visitAfter=function(ce){var le,de=[],Ce=[];for(this._root&&de.push(new b(this._root,this._x0,this._y0,this._x1,this._y1));le=de.pop();){var xe=le.node;if(xe.length){var _e,we=le.x0,Ae=le.y0,$=le.x1,oe=le.y1,pe=(we+$)/2,ye=(Ae+oe)/2;(_e=xe[0])&&de.push(new b(_e,we,Ae,pe,ye)),(_e=xe[1])&&de.push(new b(_e,pe,Ae,$,ye)),(_e=xe[2])&&de.push(new b(_e,we,ye,pe,oe)),(_e=xe[3])&&de.push(new b(_e,pe,ye,$,oe))}Ce.push(le)}for(;le=Ce.pop();)ce(le.node,le.x0,le.y0,le.x1,le.y1);return this},n.x=function(ce){return arguments.length?(this._x=ce,this):this._x},n.y=function(ce){return arguments.length?(this._y=ce,this):this._y};var h=e(15140);function f(ce){return ce.index}function x(ce,le){var de=ce.get(le);if(!de)throw new Error("missing: "+le);return de}function v(ce){var le,de,Ce,xe,_e,we=f,Ae=function(Pe){return 1/Math.min(xe[Pe.source.index],xe[Pe.target.index])},$=k(30),oe=1;function pe(Pe){for(var Re=0,fe=ce.length;Re<oe;++Re)for(var ve,Te,ze,He,Ve,nt,tt,ot=0;ot<fe;++ot)Te=(ve=ce[ot]).source,He=(ze=ve.target).x+ze.vx-Te.x-Te.vx||l(),Ve=ze.y+ze.vy-Te.y-Te.vy||l(),He*=nt=((nt=Math.sqrt(He*He+Ve*Ve))-de[ot])/nt*Pe*le[ot],Ve*=nt,ze.vx-=He*(tt=_e[ot]),ze.vy-=Ve*tt,Te.vx+=He*(tt=1-tt),Te.vy+=Ve*tt}function ye(){if(Ce){var Pe,Re,fe=Ce.length,ve=ce.length,Te=(0,h.UI)(Ce,we);for(Pe=0,xe=new Array(fe);Pe<ve;++Pe)(Re=ce[Pe]).index=Pe,typeof Re.source!="object"&&(Re.source=x(Te,Re.source)),typeof Re.target!="object"&&(Re.target=x(Te,Re.target)),xe[Re.source.index]=(xe[Re.source.index]||0)+1,xe[Re.target.index]=(xe[Re.target.index]||0)+1;for(Pe=0,_e=new Array(ve);Pe<ve;++Pe)Re=ce[Pe],_e[Pe]=xe[Re.source.index]/(xe[Re.source.index]+xe[Re.target.index]);le=new Array(ve),ke(),de=new Array(ve),De()}}function ke(){if(Ce)for(var Pe=0,Re=ce.length;Pe<Re;++Pe)le[Pe]=+Ae(ce[Pe],Pe,ce)}function De(){if(Ce)for(var Pe=0,Re=ce.length;Pe<Re;++Pe)de[Pe]=+$(ce[Pe],Pe,ce)}return ce==null&&(ce=[]),pe.initialize=function(Pe){Ce=Pe,ye()},pe.links=function(Pe){return arguments.length?(ce=Pe,ye(),pe):ce},pe.id=function(Pe){return arguments.length?(we=Pe,pe):we},pe.iterations=function(Pe){return arguments.length?(oe=+Pe,pe):oe},pe.strength=function(Pe){return arguments.length?(Ae=typeof Pe=="function"?Pe:k(+Pe),ke(),pe):Ae},pe.distance=function(Pe){return arguments.length?($=typeof Pe=="function"?Pe:k(+Pe),De(),pe):$},pe}var g={value:function(){}};function y(){for(var ce,le=0,de=arguments.length,Ce={};le<de;++le){if(!(ce=arguments[le]+"")||ce in Ce||/[\s.]/.test(ce))throw new Error("illegal type: "+ce);Ce[ce]=[]}return new p(Ce)}function p(ce){this._=ce}function m(ce,le){return ce.trim().split(/^|\s+/).map(function(de){var Ce="",xe=de.indexOf(".");if(xe>=0&&(Ce=de.slice(xe+1),de=de.slice(0,xe)),de&&!le.hasOwnProperty(de))throw new Error("unknown type: "+de);return{type:de,name:Ce}})}function w(ce,le){for(var de,Ce=0,xe=ce.length;Ce<xe;++Ce)if((de=ce[Ce]).name===le)return de.value}function c(ce,le,de){for(var Ce=0,xe=ce.length;Ce<xe;++Ce)if(ce[Ce].name===le){ce[Ce]=g,ce=ce.slice(0,Ce).concat(ce.slice(Ce+1));break}return de!=null&&ce.push({name:le,value:de}),ce}p.prototype=y.prototype={constructor:p,on:function(ce,le){var de,Ce=this._,xe=m(ce+"",Ce),_e=-1,we=xe.length;if(!(arguments.length<2)){if(le!=null&&typeof le!="function")throw new Error("invalid callback: "+le);for(;++_e<we;)if(de=(ce=xe[_e]).type)Ce[de]=c(Ce[de],ce.name,le);else if(le==null)for(de in Ce)Ce[de]=c(Ce[de],ce.name,null);return this}for(;++_e<we;)if((de=(ce=xe[_e]).type)&&(de=w(Ce[de],ce.name)))return de},copy:function(){var ce={},le=this._;for(var de in le)ce[de]=le[de].slice();return new p(ce)},call:function(ce,le){if((de=arguments.length-2)>0)for(var de,Ce,xe=new Array(de),_e=0;_e<de;++_e)xe[_e]=arguments[_e+2];if(!this._.hasOwnProperty(ce))throw new Error("unknown type: "+ce);for(_e=0,de=(Ce=this._[ce]).length;_e<de;++_e)Ce[_e].value.apply(le,xe)},apply:function(ce,le,de){if(!this._.hasOwnProperty(ce))throw new Error("unknown type: "+ce);for(var Ce=this._[ce],xe=0,_e=Ce.length;xe<_e;++xe)Ce[xe].value.apply(le,de)}};var M,_,E=y,L=0,C=0,O=0,I=0,N=0,R=0,V=typeof performance=="object"&&performance.now?performance:Date,F=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(ce){setTimeout(ce,17)};function D(){return N||(F(U),N=V.now()+R)}function U(){N=0}function j(){this._call=this._time=this._next=null}function J(ce,le,de){var Ce=new j;return Ce.restart(ce,le,de),Ce}function X(){N=(I=V.now())+R,L=C=0;try{(function(){D(),++L;for(var ce,le=M;le;)(ce=N-le._time)>=0&&le._call.call(null,ce),le=le._next;--L})()}finally{L=0,function(){for(var ce,le,de=M,Ce=1/0;de;)de._call?(Ce>de._time&&(Ce=de._time),ce=de,de=de._next):(le=de._next,de._next=null,de=ce?ce._next=le:M=le);_=ce,Y(Ce)}(),N=0}}function Z(){var ce=V.now(),le=ce-I;le>1e3&&(R-=le,I=ce)}function Y(ce){L||(C&&(C=clearTimeout(C)),ce-N>24?(ce<1/0&&(C=setTimeout(X,ce-V.now()-R)),O&&(O=clearInterval(O))):(O||(I=V.now(),O=setInterval(Z,1e3)),L=1,F(X)))}function W(ce){return ce.x}function Q(ce){return ce.y}j.prototype=J.prototype={constructor:j,restart:function(ce,le,de){if(typeof ce!="function")throw new TypeError("callback is not a function");de=(de==null?D():+de)+(le==null?0:+le),this._next||_===this||(_?_._next=this:M=this,_=this),this._call=ce,this._time=de,Y()},stop:function(){this._call&&(this._call=null,this._time=1/0,Y())}};var ne=Math.PI*(3-Math.sqrt(5));function re(ce){var le,de=1,Ce=.001,xe=1-Math.pow(Ce,1/300),_e=0,we=.6,Ae=(0,h.UI)(),$=J(pe),oe=E("tick","end");function pe(){ye(),oe.call("tick",le),de<Ce&&($.stop(),oe.call("end",le))}function ye(Pe){var Re,fe,ve=ce.length;Pe===void 0&&(Pe=1);for(var Te=0;Te<Pe;++Te)for(de+=(_e-de)*xe,Ae.each(function(ze){ze(de)}),Re=0;Re<ve;++Re)(fe=ce[Re]).fx==null?fe.x+=fe.vx*=we:(fe.x=fe.fx,fe.vx=0),fe.fy==null?fe.y+=fe.vy*=we:(fe.y=fe.fy,fe.vy=0);return le}function ke(){for(var Pe,Re=0,fe=ce.length;Re<fe;++Re){if((Pe=ce[Re]).index=Re,Pe.fx!=null&&(Pe.x=Pe.fx),Pe.fy!=null&&(Pe.y=Pe.fy),isNaN(Pe.x)||isNaN(Pe.y)){var ve=10*Math.sqrt(Re),Te=Re*ne;Pe.x=ve*Math.cos(Te),Pe.y=ve*Math.sin(Te)}(isNaN(Pe.vx)||isNaN(Pe.vy))&&(Pe.vx=Pe.vy=0)}}function De(Pe){return Pe.initialize&&Pe.initialize(ce),Pe}return ce==null&&(ce=[]),ke(),le={tick:ye,restart:function(){return $.restart(pe),le},stop:function(){return $.stop(),le},nodes:function(Pe){return arguments.length?(ce=Pe,ke(),Ae.each(De),le):ce},alpha:function(Pe){return arguments.length?(de=+Pe,le):de},alphaMin:function(Pe){return arguments.length?(Ce=+Pe,le):Ce},alphaDecay:function(Pe){return arguments.length?(xe=+Pe,le):+xe},alphaTarget:function(Pe){return arguments.length?(_e=+Pe,le):_e},velocityDecay:function(Pe){return arguments.length?(we=1-Pe,le):1-we},force:function(Pe,Re){return arguments.length>1?(Re==null?Ae.remove(Pe):Ae.set(Pe,De(Re)),le):Ae.get(Pe)},find:function(Pe,Re,fe){var ve,Te,ze,He,Ve,nt=0,tt=ce.length;for(fe==null?fe=1/0:fe*=fe,nt=0;nt<tt;++nt)(ze=(ve=Pe-(He=ce[nt]).x)*ve+(Te=Re-He.y)*Te)<fe&&(Ve=He,fe=ze);return Ve},on:function(Pe,Re){return arguments.length>1?(oe.on(Pe,Re),le):oe.on(Pe)}}}function ie(){var ce,le,de,Ce,xe=k(-30),_e=1,we=1/0,Ae=.81;function $(ke){var De,Pe=ce.length,Re=t(ce,W,Q).visitAfter(pe);for(de=ke,De=0;De<Pe;++De)le=ce[De],Re.visit(ye)}function oe(){if(ce){var ke,De,Pe=ce.length;for(Ce=new Array(Pe),ke=0;ke<Pe;++ke)De=ce[ke],Ce[De.index]=+xe(De,ke,ce)}}function pe(ke){var De,Pe,Re,fe,ve,Te=0,ze=0;if(ke.length){for(Re=fe=ve=0;ve<4;++ve)(De=ke[ve])&&(Pe=Math.abs(De.value))&&(Te+=De.value,ze+=Pe,Re+=Pe*De.x,fe+=Pe*De.y);ke.x=Re/ze,ke.y=fe/ze}else{(De=ke).x=De.data.x,De.y=De.data.y;do Te+=Ce[De.data.index];while(De=De.next)}ke.value=Te}function ye(ke,De,Pe,Re){if(!ke.value)return!0;var fe=ke.x-le.x,ve=ke.y-le.y,Te=Re-De,ze=fe*fe+ve*ve;if(Te*Te/Ae<ze)return ze<we&&(fe===0&&(ze+=(fe=l())*fe),ve===0&&(ze+=(ve=l())*ve),ze<_e&&(ze=Math.sqrt(_e*ze)),le.vx+=fe*ke.value*de/ze,le.vy+=ve*ke.value*de/ze),!0;if(!(ke.length||ze>=we)){(ke.data!==le||ke.next)&&(fe===0&&(ze+=(fe=l())*fe),ve===0&&(ze+=(ve=l())*ve),ze<_e&&(ze=Math.sqrt(_e*ze)));do ke.data!==le&&(Te=Ce[ke.data.index]*de/ze,le.vx+=fe*Te,le.vy+=ve*Te);while(ke=ke.next)}}return $.initialize=function(ke){ce=ke,oe()},$.strength=function(ke){return arguments.length?(xe=typeof ke=="function"?ke:k(+ke),oe(),$):xe},$.distanceMin=function(ke){return arguments.length?(_e=ke*ke,$):Math.sqrt(_e)},$.distanceMax=function(ke){return arguments.length?(we=ke*ke,$):Math.sqrt(we)},$.theta=function(ke){return arguments.length?(Ae=ke*ke,$):Math.sqrt(Ae)},$}function se(ce,le,de){var Ce,xe,_e,we=k(.1);function Ae(oe){for(var pe=0,ye=Ce.length;pe<ye;++pe){var ke=Ce[pe],De=ke.x-le||1e-6,Pe=ke.y-de||1e-6,Re=Math.sqrt(De*De+Pe*Pe),fe=(_e[pe]-Re)*xe[pe]*oe/Re;ke.vx+=De*fe,ke.vy+=Pe*fe}}function $(){if(Ce){var oe,pe=Ce.length;for(xe=new Array(pe),_e=new Array(pe),oe=0;oe<pe;++oe)_e[oe]=+ce(Ce[oe],oe,Ce),xe[oe]=isNaN(_e[oe])?0:+we(Ce[oe],oe,Ce)}}return typeof ce!="function"&&(ce=k(+ce)),le==null&&(le=0),de==null&&(de=0),Ae.initialize=function(oe){Ce=oe,$()},Ae.strength=function(oe){return arguments.length?(we=typeof oe=="function"?oe:k(+oe),$(),Ae):we},Ae.radius=function(oe){return arguments.length?(ce=typeof oe=="function"?oe:k(+oe),$(),Ae):ce},Ae.x=function(oe){return arguments.length?(le=+oe,Ae):le},Ae.y=function(oe){return arguments.length?(de=+oe,Ae):de},Ae}function ge(ce){var le,de,Ce,xe=k(.1);function _e(Ae){for(var $,oe=0,pe=le.length;oe<pe;++oe)($=le[oe]).vx+=(Ce[oe]-$.x)*de[oe]*Ae}function we(){if(le){var Ae,$=le.length;for(de=new Array($),Ce=new Array($),Ae=0;Ae<$;++Ae)de[Ae]=isNaN(Ce[Ae]=+ce(le[Ae],Ae,le))?0:+xe(le[Ae],Ae,le)}}return typeof ce!="function"&&(ce=k(ce==null?0:+ce)),_e.initialize=function(Ae){le=Ae,we()},_e.strength=function(Ae){return arguments.length?(xe=typeof Ae=="function"?Ae:k(+Ae),we(),_e):xe},_e.x=function(Ae){return arguments.length?(ce=typeof Ae=="function"?Ae:k(+Ae),we(),_e):ce},_e}function ue(ce){var le,de,Ce,xe=k(.1);function _e(Ae){for(var $,oe=0,pe=le.length;oe<pe;++oe)($=le[oe]).vy+=(Ce[oe]-$.y)*de[oe]*Ae}function we(){if(le){var Ae,$=le.length;for(de=new Array($),Ce=new Array($),Ae=0;Ae<$;++Ae)de[Ae]=isNaN(Ce[Ae]=+ce(le[Ae],Ae,le))?0:+xe(le[Ae],Ae,le)}}return typeof ce!="function"&&(ce=k(ce==null?0:+ce)),_e.initialize=function(Ae){le=Ae,we()},_e.strength=function(Ae){return arguments.length?(xe=typeof Ae=="function"?Ae:k(+Ae),we(),_e):xe},_e.y=function(Ae){return arguments.length?(ce=typeof Ae=="function"?Ae:k(+Ae),we(),_e):ce},_e}},60721:function(K,z,e){function S(u,h){if((f=(u=h?u.toExponential(h-1):u.toExponential()).indexOf("e"))<0)return null;var f,x=u.slice(0,f);return[x.length>1?x[0]+x.slice(2):x,+u.slice(f+1)]}e.d(z,{WU:function(){return r},FF:function(){return i}});var k,l=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function T(u){if(!(h=l.exec(u)))throw new Error("invalid format: "+u);var h;return new b({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}function b(u){this.fill=u.fill===void 0?" ":u.fill+"",this.align=u.align===void 0?">":u.align+"",this.sign=u.sign===void 0?"-":u.sign+"",this.symbol=u.symbol===void 0?"":u.symbol+"",this.zero=!!u.zero,this.width=u.width===void 0?void 0:+u.width,this.comma=!!u.comma,this.precision=u.precision===void 0?void 0:+u.precision,this.trim=!!u.trim,this.type=u.type===void 0?"":u.type+""}function d(u,h){var f=S(u,h);if(!f)return u+"";var x=f[0],v=f[1];return v<0?"0."+new Array(-v).join("0")+x:x.length>v+1?x.slice(0,v+1)+"."+x.slice(v+1):x+new Array(v-x.length+2).join("0")}T.prototype=b.prototype,b.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var s={"%":function(u,h){return(100*u).toFixed(h)},b:function(u){return Math.round(u).toString(2)},c:function(u){return u+""},d:function(u){return Math.abs(u=Math.round(u))>=1e21?u.toLocaleString("en").replace(/,/g,""):u.toString(10)},e:function(u,h){return u.toExponential(h)},f:function(u,h){return u.toFixed(h)},g:function(u,h){return u.toPrecision(h)},o:function(u){return Math.round(u).toString(8)},p:function(u,h){return d(100*u,h)},r:d,s:function(u,h){var f=S(u,h);if(!f)return u+"";var x=f[0],v=f[1],g=v-(k=3*Math.max(-8,Math.min(8,Math.floor(v/3))))+1,y=x.length;return g===y?x:g>y?x+new Array(g-y+1).join("0"):g>0?x.slice(0,g)+"."+x.slice(g):"0."+new Array(1-g).join("0")+S(u,Math.max(0,h+g-1))[0]},X:function(u){return Math.round(u).toString(16).toUpperCase()},x:function(u){return Math.round(u).toString(16)}};function t(u){return u}var o,r,n=Array.prototype.map,a=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function i(u){var h,f,x=u.grouping===void 0||u.thousands===void 0?t:(h=n.call(u.grouping,Number),f=u.thousands+"",function(_,E){for(var L=_.length,C=[],O=0,I=h[0],N=0;L>0&&I>0&&(N+I+1>E&&(I=Math.max(1,E-N)),C.push(_.substring(L-=I,L+I)),!((N+=I+1)>E));)I=h[O=(O+1)%h.length];return C.reverse().join(f)}),v=u.currency===void 0?"":u.currency[0]+"",g=u.currency===void 0?"":u.currency[1]+"",y=u.decimal===void 0?".":u.decimal+"",p=u.numerals===void 0?t:function(_){return function(E){return E.replace(/[0-9]/g,function(L){return _[+L]})}}(n.call(u.numerals,String)),m=u.percent===void 0?"%":u.percent+"",w=u.minus===void 0?"-":u.minus+"",c=u.nan===void 0?"NaN":u.nan+"";function M(_){var E=(_=T(_)).fill,L=_.align,C=_.sign,O=_.symbol,I=_.zero,N=_.width,R=_.comma,V=_.precision,F=_.trim,D=_.type;D==="n"?(R=!0,D="g"):s[D]||(V===void 0&&(V=12),F=!0,D="g"),(I||E==="0"&&L==="=")&&(I=!0,E="0",L="=");var U=O==="$"?v:O==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",j=O==="$"?g:/[%p]/.test(D)?m:"",J=s[D],X=/[defgprs%]/.test(D);function Z(Y){var W,Q,ne,re=U,ie=j;if(D==="c")ie=J(Y)+ie,Y="";else{var se=(Y=+Y)<0||1/Y<0;if(Y=isNaN(Y)?c:J(Math.abs(Y),V),F&&(Y=function(ce){e:for(var le,de=ce.length,Ce=1,xe=-1;Ce<de;++Ce)switch(ce[Ce]){case".":xe=le=Ce;break;case"0":xe===0&&(xe=Ce),le=Ce;break;default:if(!+ce[Ce])break e;xe>0&&(xe=0)}return xe>0?ce.slice(0,xe)+ce.slice(le+1):ce}(Y)),se&&+Y==0&&C!=="+"&&(se=!1),re=(se?C==="("?C:w:C==="-"||C==="("?"":C)+re,ie=(D==="s"?a[8+k/3]:"")+ie+(se&&C==="("?")":""),X){for(W=-1,Q=Y.length;++W<Q;)if(48>(ne=Y.charCodeAt(W))||ne>57){ie=(ne===46?y+Y.slice(W+1):Y.slice(W))+ie,Y=Y.slice(0,W);break}}}R&&!I&&(Y=x(Y,1/0));var ge=re.length+Y.length+ie.length,ue=ge<N?new Array(N-ge+1).join(E):"";switch(R&&I&&(Y=x(ue+Y,ue.length?N-ie.length:1/0),ue=""),L){case"<":Y=re+Y+ie+ue;break;case"=":Y=re+ue+Y+ie;break;case"^":Y=ue.slice(0,ge=ue.length>>1)+re+Y+ie+ue.slice(ge);break;default:Y=ue+re+Y+ie}return p(Y)}return V=V===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,V)):Math.max(0,Math.min(20,V)),Z.toString=function(){return _+""},Z}return{format:M,formatPrefix:function(_,E){var L,C=M(((_=T(_)).type="f",_)),O=3*Math.max(-8,Math.min(8,Math.floor((L=E,((L=S(Math.abs(L)))?L[1]:NaN)/3)))),I=Math.pow(10,-O),N=a[8+O/3];return function(R){return C(I*R)+N}}}}o=i({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),r=o.format,o.formatPrefix},65704:function(K,z,e){e.r(z),e.d(z,{geoAiry:function(){return R},geoAiryRaw:function(){return N},geoAitoff:function(){return F},geoAitoffRaw:function(){return V},geoArmadillo:function(){return U},geoArmadilloRaw:function(){return D},geoAugust:function(){return J},geoAugustRaw:function(){return j},geoBaker:function(){return W},geoBakerRaw:function(){return Y},geoBerghaus:function(){return re},geoBerghausRaw:function(){return ne},geoBertin1953:function(){return Ce},geoBertin1953Raw:function(){return de},geoBoggs:function(){return ye},geoBoggsRaw:function(){return pe},geoBonne:function(){return fe},geoBonneRaw:function(){return Re},geoBottomley:function(){return Te},geoBottomleyRaw:function(){return ve},geoBromley:function(){return He},geoBromleyRaw:function(){return ze},geoChamberlin:function(){return Pt},geoChamberlinAfrica:function(){return dt},geoChamberlinRaw:function(){return Tt},geoCollignon:function(){return Ot},geoCollignonRaw:function(){return Et},geoCraig:function(){return zt},geoCraigRaw:function(){return Nt},geoCraster:function(){return je},geoCrasterRaw:function(){return Ye},geoCylindricalEqualArea:function(){return st},geoCylindricalEqualAreaRaw:function(){return Ke},geoCylindricalStereographic:function(){return Ie},geoCylindricalStereographicRaw:function(){return Se},geoEckert1:function(){return it},geoEckert1Raw:function(){return We},geoEckert2:function(){return gt},geoEckert2Raw:function(){return lt},geoEckert3:function(){return kt},geoEckert3Raw:function(){return At},geoEckert4:function(){return St},geoEckert4Raw:function(){return ht},geoEckert5:function(){return Mt},geoEckert5Raw:function(){return vt},geoEckert6:function(){return Ut},geoEckert6Raw:function(){return It},geoEisenlohr:function(){return Yt},geoEisenlohrRaw:function(){return qt},geoFahey:function(){return nn},geoFaheyRaw:function(){return pn},geoFoucaut:function(){return jn},geoFoucautRaw:function(){return xn},geoFoucautSinusoidal:function(){return en},geoFoucautSinusoidalRaw:function(){return mn},geoGilbert:function(){return kn},geoGingery:function(){return er},geoGingeryRaw:function(){return zn},geoGinzburg4:function(){return ur},geoGinzburg4Raw:function(){return mr},geoGinzburg5:function(){return lr},geoGinzburg5Raw:function(){return $n},geoGinzburg6:function(){return Gt},geoGinzburg6Raw:function(){return hr},geoGinzburg8:function(){return An},geoGinzburg8Raw:function(){return hn},geoGinzburg9:function(){return Rn},geoGinzburg9Raw:function(){return Tn},geoGringorten:function(){return Yn},geoGringortenQuincuncial:function(){return Cs},geoGringortenRaw:function(){return Un},geoGuyou:function(){return Rt},geoGuyouRaw:function(){return Mn},geoHammer:function(){return ue},geoHammerRaw:function(){return se},geoHammerRetroazimuthal:function(){return Sn},geoHammerRetroazimuthalRaw:function(){return rn},geoHealpix:function(){return Wn},geoHealpixRaw:function(){return fn},geoHill:function(){return nr},geoHillRaw:function(){return Gn},geoHomolosine:function(){return xr},geoHomolosineRaw:function(){return br},geoHufnagel:function(){return sr},geoHufnagelRaw:function(){return Tr},geoHyperelliptical:function(){return ci},geoHyperellipticalRaw:function(){return Qr},geoInterrupt:function(){return oi},geoInterruptedBoggs:function(){return Aa},geoInterruptedHomolosine:function(){return Go},geoInterruptedMollweide:function(){return Us},geoInterruptedMollweideHemispheres:function(){return Ma},geoInterruptedQuarticAuthalic:function(){return Ro},geoInterruptedSinuMollweide:function(){return Di},geoInterruptedSinusoidal:function(){return xa},geoKavrayskiy7:function(){return mo},geoKavrayskiy7Raw:function(){return Sa},geoLagrange:function(){return yo},geoLagrangeRaw:function(){return ei},geoLarrivee:function(){return Xa},geoLarriveeRaw:function(){return Va},geoLaskowski:function(){return al},geoLaskowskiRaw:function(){return ls},geoLittrow:function(){return ol},geoLittrowRaw:function(){return ro},geoLoximuthal:function(){return vl},geoLoximuthalRaw:function(){return sl},geoMiller:function(){return ll},geoMillerRaw:function(){return Hs},geoModifiedStereographic:function(){return Oo},geoModifiedStereographicAlaska:function(){return Zs},geoModifiedStereographicGs48:function(){return Po},geoModifiedStereographicGs50:function(){return Ms},geoModifiedStereographicLee:function(){return Wo},geoModifiedStereographicMiller:function(){return xo},geoModifiedStereographicRaw:function(){return qs},geoMollweide:function(){return Ae},geoMollweideRaw:function(){return we},geoMtFlatPolarParabolic:function(){return ml},geoMtFlatPolarParabolicRaw:function(){return bo},geoMtFlatPolarQuartic:function(){return us},geoMtFlatPolarQuarticRaw:function(){return Ss},geoMtFlatPolarSinusoidal:function(){return Xo},geoMtFlatPolarSinusoidalRaw:function(){return Io},geoNaturalEarth:function(){return Oa.Z},geoNaturalEarth2:function(){return cs},geoNaturalEarth2Raw:function(){return Ys},geoNaturalEarthRaw:function(){return Oa.K},geoNellHammer:function(){return fs},geoNellHammerRaw:function(){return Jo},geoNicolosi:function(){return hs},geoNicolosiRaw:function(){return Ko},geoPatterson:function(){return Es},geoPattersonRaw:function(){return _o},geoPeirceQuincuncial:function(){return Ps},geoPierceQuincuncial:function(){return Ps},geoPolyconic:function(){return Xs},geoPolyconicRaw:function(){return vs},geoPolyhedral:function(){return wo},geoPolyhedralButterfly:function(){return Ls},geoPolyhedralCollignon:function(){return Ks},geoPolyhedralWaterman:function(){return No},geoProject:function(){return Uo},geoQuantize:function(){return aa},geoQuincuncial:function(){return ba},geoRectangularPolyconic:function(){return Vo},geoRectangularPolyconicRaw:function(){return wr},geoRobinson:function(){return Qo},geoRobinsonRaw:function(){return Os},geoSatellite:function(){return ts},geoSatelliteRaw:function(){return es},geoSinuMollweide:function(){return cr},geoSinuMollweideRaw:function(){return ir},geoSinusoidal:function(){return Pe},geoSinusoidalRaw:function(){return De},geoStitch:function(){return qo},geoTimes:function(){return Fa},geoTimesRaw:function(){return Ki},geoTwoPointAzimuthal:function(){return Ba},geoTwoPointAzimuthalRaw:function(){return xs},geoTwoPointAzimuthalUsa:function(){return Ea},geoTwoPointEquidistant:function(){return ri},geoTwoPointEquidistantRaw:function(){return $a},geoTwoPointEquidistantUsa:function(){return fa},geoVanDerGrinten:function(){return qa},geoVanDerGrinten2:function(){return Qa},geoVanDerGrinten2Raw:function(){return ha},geoVanDerGrinten3:function(){return fo},geoVanDerGrinten3Raw:function(){return Mo},geoVanDerGrinten4:function(){return Na},geoVanDerGrinten4Raw:function(){return $i},geoVanDerGrintenRaw:function(){return Vi},geoWagner:function(){return Ir},geoWagner4:function(){return zs},geoWagner4Raw:function(){return Qi},geoWagner6:function(){return is},geoWagner6Raw:function(){return pa},geoWagner7:function(){return rs},geoWagnerRaw:function(){return Lr},geoWiechel:function(){return li},geoWiechelRaw:function(){return po},geoWinkel3:function(){return Rs},geoWinkel3Raw:function(){return di}});var S=e(15002),k=Math.abs,l=Math.atan,T=Math.atan2,b=Math.cos,d=Math.exp,s=Math.floor,t=Math.log,o=Math.max,r=Math.min,n=Math.pow,a=Math.round,i=Math.sign||function(Xe){return Xe>0?1:Xe<0?-1:0},u=Math.sin,h=Math.tan,f=1e-6,x=1e-12,v=Math.PI,g=v/2,y=v/4,p=Math.SQRT1_2,m=C(2),w=C(v),c=2*v,M=180/v,_=v/180;function E(Xe){return Xe>1?g:Xe<-1?-g:Math.asin(Xe)}function L(Xe){return Xe>1?0:Xe<-1?v:Math.acos(Xe)}function C(Xe){return Xe>0?Math.sqrt(Xe):0}function O(Xe){return(d(Xe)-d(-Xe))/2}function I(Xe){return(d(Xe)+d(-Xe))/2}function N(Xe){var $e=h(Xe/2),at=2*t(b(Xe/2))/($e*$e);function ft(_t,xt){var B=b(_t),G=b(xt),H=u(xt),te=G*B,me=-((1-te?t((1+te)/2)/(1-te):-.5)+at/(1+te));return[me*G*u(_t),me*H]}return ft.invert=function(_t,xt){var B,G=C(_t*_t+xt*xt),H=-Xe/2,te=50;if(!G)return[0,0];do{var me=H/2,Le=b(me),Be=u(me),qe=Be/Le,et=-t(k(Le));H-=B=(2/qe*et-at*qe-G)/(-et/(Be*Be)+1-at/(2*Le*Le))*(Le<0?.7:1)}while(k(B)>f&&--te>0);var mt=u(H);return[T(_t*mt,G*b(H)),E(xt*mt/G)]},ft}function R(){var Xe=g,$e=(0,S.r)(N),at=$e(Xe);return at.radius=function(ft){return arguments.length?$e(Xe=ft*_):Xe*M},at.scale(179.976).clipAngle(147)}function V(Xe,$e){var at=b($e),ft=function(_t){return _t?_t/Math.sin(_t):1}(L(at*b(Xe/=2)));return[2*at*u(Xe)*ft,u($e)*ft]}function F(){return(0,S.Z)(V).scale(152.63)}function D(Xe){var $e=u(Xe),at=b(Xe),ft=Xe>=0?1:-1,_t=h(ft*Xe),xt=(1+$e-at)/2;function B(G,H){var te=b(H),me=b(G/=2);return[(1+te)*u(G),(ft*H>-T(me,_t)-.001?0:10*-ft)+xt+u(H)*at-(1+te)*$e*me]}return B.invert=function(G,H){var te=0,me=0,Le=50;do{var Be=b(te),qe=u(te),et=b(me),mt=u(me),bt=1+et,ee=bt*qe-G,he=xt+mt*at-bt*$e*Be-H,Me=bt*Be/2,Oe=-qe*mt,Fe=$e*bt*qe/2,Ue=at*et+$e*Be*mt,Ge=Oe*Fe-Ue*Me,Je=(he*Oe-ee*Ue)/Ge/2,rt=(ee*Fe-he*Me)/Ge;k(rt)>2&&(rt/=2),te-=Je,me-=rt}while((k(Je)>f||k(rt)>f)&&--Le>0);return ft*me>-T(b(te),_t)-.001?[2*te,me]:null},B}function U(){var Xe=20*_,$e=Xe>=0?1:-1,at=h($e*Xe),ft=(0,S.r)(D),_t=ft(Xe),xt=_t.stream;return _t.parallel=function(B){return arguments.length?(at=h(($e=(Xe=B*_)>=0?1:-1)*Xe),ft(Xe)):Xe*M},_t.stream=function(B){var G=_t.rotate(),H=xt(B),te=(_t.rotate([0,0]),xt(B)),me=_t.precision();return _t.rotate(G),H.sphere=function(){te.polygonStart(),te.lineStart();for(var Le=-180*$e;$e*Le<180;Le+=90*$e)te.point(Le,90*$e);if(Xe)for(;$e*(Le-=3*$e*me)>=-180;)te.point(Le,$e*-T(b(Le*_/2),at)*M);te.lineEnd(),te.polygonEnd()},H},_t.scale(218.695).center([0,28.0974])}function j(Xe,$e){var at=h($e/2),ft=C(1-at*at),_t=1+ft*b(Xe/=2),xt=u(Xe)*ft/_t,B=at/_t,G=xt*xt,H=B*B;return[1.3333333333333333*xt*(3+G-3*H),1.3333333333333333*B*(3+3*G-H)]}function J(){return(0,S.Z)(j).scale(66.1603)}V.invert=function(Xe,$e){if(!(Xe*Xe+4*$e*$e>v*v+f)){var at=Xe,ft=$e,_t=25;do{var xt,B=u(at),G=u(at/2),H=b(at/2),te=u(ft),me=b(ft),Le=u(2*ft),Be=te*te,qe=me*me,et=G*G,mt=1-qe*H*H,bt=mt?L(me*H)*C(xt=1/mt):xt=0,ee=2*bt*me*G-Xe,he=bt*te-$e,Me=xt*(qe*et+bt*me*H*Be),Oe=xt*(.5*B*Le-2*bt*te*G),Fe=.25*xt*(Le*G-bt*te*qe*B),Ue=xt*(Be*H+bt*et*me),Ge=Oe*Fe-Ue*Me;if(!Ge)break;var Je=(he*Oe-ee*Ue)/Ge,rt=(ee*Fe-he*Me)/Ge;at-=Je,ft-=rt}while((k(Je)>f||k(rt)>f)&&--_t>0);return[at,ft]}},j.invert=function(Xe,$e){if($e*=.375,!(Xe*=.375)&&k($e)>1)return null;var at=1+Xe*Xe+$e*$e,ft=C((at-C(at*at-4*$e*$e))/2),_t=E(ft)/3,xt=ft?function(te){return t(te+C(te*te-1))}(k($e/ft))/3:function(te){return t(te+C(te*te+1))}(k(Xe))/3,B=b(_t),G=I(xt),H=G*G-B*B;return[2*i(Xe)*T(O(xt)*B,.25-H),2*i($e)*T(G*u(_t),.25+H)]};var X=C(8),Z=t(1+m);function Y(Xe,$e){var at=k($e);return at<y?[Xe,t(h(y+$e/2))]:[Xe*b(at)*(2*m-1/u(at)),i($e)*(2*m*(at-y)-t(h(at/2)))]}function W(){return(0,S.Z)(Y).scale(112.314)}Y.invert=function(Xe,$e){if((ft=k($e))<Z)return[Xe,2*l(d($e))-g];var at,ft,_t=y,xt=25;do{var B=b(_t/2),G=h(_t/2);_t-=at=(X*(_t-y)-t(G)-ft)/(X-B*B/(2*G))}while(k(at)>x&&--xt>0);return[Xe/(b(_t)*(X-1/u(_t))),i($e)*_t]};var Q=e(17889);function ne(Xe){var $e=2*v/Xe;function at(ft,_t){var xt=(0,Q.N)(ft,_t);if(k(ft)>g){var B=T(xt[1],xt[0]),G=C(xt[0]*xt[0]+xt[1]*xt[1]),H=$e*a((B-g)/$e)+g,te=T(u(B-=H),2-b(B));B=H+E(v/G*u(te))-te,xt[0]=G*b(B),xt[1]=G*u(B)}return xt}return at.invert=function(ft,_t){var xt=C(ft*ft+_t*_t);if(xt>g){var B=T(_t,ft),G=$e*a((B-g)/$e)+g,H=B>G?-1:1,te=xt*b(G-B),me=1/h(H*L((te-v)/C(v*(v-2*te)+xt*xt)));B=G+2*l((me+H*C(me*me-3))/3),ft=xt*b(B),_t=xt*u(B)}return Q.N.invert(ft,_t)},at}function re(){var Xe=5,$e=(0,S.r)(ne),at=$e(Xe),ft=at.stream,_t=.01,xt=-b(_t*_),B=u(_t*_);return at.lobes=function(G){return arguments.length?$e(Xe=+G):Xe},at.stream=function(G){var H=at.rotate(),te=ft(G),me=(at.rotate([0,0]),ft(G));return at.rotate(H),te.sphere=function(){me.polygonStart(),me.lineStart();for(var Le=0,Be=360/Xe,qe=2*v/Xe,et=90-180/Xe,mt=g;Le<Xe;++Le,et-=Be,mt-=qe)me.point(T(B*b(mt),xt)*M,E(B*u(mt))*M),et<-90?(me.point(-90,-180-et-_t),me.point(-90,-180-et+_t)):(me.point(90,et+_t),me.point(90,et-_t));me.lineEnd(),me.polygonEnd()},te},at.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var ie=e(12956);function se(Xe,$e){if(arguments.length<2&&($e=Xe),$e===1)return ie.l;if($e===1/0)return ge;function at(ft,_t){var xt=(0,ie.l)(ft/$e,_t);return xt[0]*=Xe,xt}return at.invert=function(ft,_t){var xt=ie.l.invert(ft/Xe,_t);return xt[0]*=$e,xt},at}function ge(Xe,$e){return[Xe*b($e)/b($e/=2),2*u($e)]}function ue(){var Xe=2,$e=(0,S.r)(se),at=$e(Xe);return at.coefficient=function(ft){return arguments.length?$e(Xe=+ft):Xe},at.scale(169.529)}function ce(Xe,$e,at){var ft,_t,xt,B=100;at=at===void 0?0:+at,$e=+$e;do(_t=Xe(at))===(xt=Xe(at+f))&&(xt=_t+f),at-=ft=-1e-6*(_t-$e)/(_t-xt);while(B-- >0&&k(ft)>f);return B<0?NaN:at}function le(Xe,$e,at){return $e===void 0&&($e=40),at===void 0&&(at=x),function(ft,_t,xt,B){var G,H,te;xt=xt===void 0?0:+xt,B=B===void 0?0:+B;for(var me=0;me<$e;me++){var Le=Xe(xt,B),Be=Le[0]-ft,qe=Le[1]-_t;if(k(Be)<at&&k(qe)<at)break;var et=Be*Be+qe*qe;if(et>G)xt-=H/=2,B-=te/=2;else{G=et;var mt=(xt>0?-1:1)*at,bt=(B>0?-1:1)*at,ee=Xe(xt+mt,B),he=Xe(xt,B+bt),Me=(ee[0]-Le[0])/mt,Oe=(ee[1]-Le[1])/mt,Fe=(he[0]-Le[0])/bt,Ue=(he[1]-Le[1])/bt,Ge=Ue*Me-Oe*Fe,Je=(k(Ge)<.5?.5:1)/Ge;if(xt+=H=(qe*Fe-Be*Ue)*Je,B+=te=(Be*Oe-qe*Me)*Je,k(H)<at&&k(te)<at)break}}return[xt,B]}}function de(){var Xe=se(1.68,2);function $e(at,ft){if(at+ft<-1.4){var _t=(at-ft+1.6)*(at+ft+1.4)/8;at+=_t,ft-=.8*_t*u(ft+v/2)}var xt=Xe(at,ft),B=(1-b(at*ft))/12;return xt[1]<0&&(xt[0]*=1+B),xt[1]>0&&(xt[1]*=1+B/1.5*xt[0]*xt[0]),xt}return $e.invert=le($e),$e}function Ce(){return(0,S.Z)(de()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function xe(Xe,$e){var at,ft=Xe*u($e),_t=30;do $e-=at=($e+u($e)-ft)/(1+b($e));while(k(at)>f&&--_t>0);return $e/2}function _e(Xe,$e,at){function ft(_t,xt){return[Xe*_t*b(xt=xe(at,xt)),$e*u(xt)]}return ft.invert=function(_t,xt){return xt=E(xt/$e),[_t/(Xe*b(xt)),E((2*xt+u(2*xt))/at)]},ft}ge.invert=function(Xe,$e){var at=2*E($e/2);return[Xe*b(at/2)/b(at),at]};var we=_e(m/g,m,v);function Ae(){return(0,S.Z)(we).scale(169.529)}var $=2.00276,oe=1.11072;function pe(Xe,$e){var at=xe(v,$e);return[$*Xe/(1/b($e)+oe/b(at)),($e+m*u(at))/$]}function ye(){return(0,S.Z)(pe).scale(160.857)}function ke(Xe){var $e=0,at=(0,S.r)(Xe),ft=at($e);return ft.parallel=function(_t){return arguments.length?at($e=_t*_):$e*M},ft}function De(Xe,$e){return[Xe*b($e),$e]}function Pe(){return(0,S.Z)(De).scale(152.63)}function Re(Xe){if(!Xe)return De;var $e=1/h(Xe);function at(ft,_t){var xt=$e+Xe-_t,B=xt&&ft*b(_t)/xt;return[xt*u(B),$e-xt*b(B)]}return at.invert=function(ft,_t){var xt=C(ft*ft+(_t=$e-_t)*_t),B=$e+Xe-xt;return[xt/b(B)*T(ft,_t),B]},at}function fe(){return ke(Re).scale(123.082).center([0,26.1441]).parallel(45)}function ve(Xe){function $e(at,ft){var _t=g-ft,xt=_t&&at*Xe*u(_t)/_t;return[_t*u(xt)/Xe,g-_t*b(xt)]}return $e.invert=function(at,ft){var _t=at*Xe,xt=g-ft,B=C(_t*_t+xt*xt),G=T(_t,xt);return[(B?B/u(B):1)*G/Xe,g-B]},$e}function Te(){var Xe=.5,$e=(0,S.r)(ve),at=$e(Xe);return at.fraction=function(ft){return arguments.length?$e(Xe=+ft):Xe},at.scale(158.837)}pe.invert=function(Xe,$e){var at,ft,_t=$*$e,xt=$e<0?-y:y,B=25;do ft=_t-m*u(xt),xt-=at=(u(2*xt)+2*xt-v*u(ft))/(2*b(2*xt)+2+v*b(ft)*m*b(xt));while(k(at)>f&&--B>0);return ft=_t-m*u(xt),[Xe*(1/b(ft)+oe/b(xt))/$,ft]},De.invert=function(Xe,$e){return[Xe/b($e),$e]};var ze=_e(1,4/v,v);function He(){return(0,S.Z)(ze).scale(152.63)}var Ve=e(66624),nt=e(49386);function tt(Xe,$e,at,ft,_t,xt){var B,G=b(xt);if(k(Xe)>1||k(xt)>1)B=L(at*_t+$e*ft*G);else{var H=u(Xe/2),te=u(xt/2);B=2*E(C(H*H+$e*ft*te*te))}return k(B)>f?[B,T(ft*u(xt),$e*_t-at*ft*G)]:[0,0]}function ot(Xe,$e,at){return L((Xe*Xe+$e*$e-at*at)/(2*Xe*$e))}function pt(Xe){return Xe-2*v*s((Xe+v)/(2*v))}function Tt(Xe,$e,at){for(var ft,_t=[[Xe[0],Xe[1],u(Xe[1]),b(Xe[1])],[$e[0],$e[1],u($e[1]),b($e[1])],[at[0],at[1],u(at[1]),b(at[1])]],xt=_t[2],B=0;B<3;++B,xt=ft)ft=_t[B],xt.v=tt(ft[1]-xt[1],xt[3],xt[2],ft[3],ft[2],ft[0]-xt[0]),xt.point=[0,0];var G=ot(_t[0].v[0],_t[2].v[0],_t[1].v[0]),H=ot(_t[0].v[0],_t[1].v[0],_t[2].v[0]),te=v-G;_t[2].point[1]=0,_t[0].point[0]=-(_t[1].point[0]=_t[0].v[0]/2);var me=[_t[2].point[0]=_t[0].point[0]+_t[2].v[0]*b(G),2*(_t[0].point[1]=_t[1].point[1]=_t[2].v[0]*u(G))];return function(Le,Be){var qe,et=u(Be),mt=b(Be),bt=new Array(3);for(qe=0;qe<3;++qe){var ee=_t[qe];if(bt[qe]=tt(Be-ee[1],ee[3],ee[2],mt,et,Le-ee[0]),!bt[qe][0])return ee.point;bt[qe][1]=pt(bt[qe][1]-ee.v[1])}var he=me.slice();for(qe=0;qe<3;++qe){var Me=qe==2?0:qe+1,Oe=ot(_t[qe].v[0],bt[qe][0],bt[Me][0]);bt[qe][1]<0&&(Oe=-Oe),qe?qe==1?(Oe=H-Oe,he[0]-=bt[qe][0]*b(Oe),he[1]-=bt[qe][0]*u(Oe)):(Oe=te-Oe,he[0]+=bt[qe][0]*b(Oe),he[1]+=bt[qe][0]*u(Oe)):(he[0]+=bt[qe][0]*b(Oe),he[1]-=bt[qe][0]*u(Oe))}return he[0]/=3,he[1]/=3,he}}function yt(Xe){return Xe[0]*=_,Xe[1]*=_,Xe}function dt(){return Pt([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Pt(Xe,$e,at){var ft=(0,Ve.Z)({type:"MultiPoint",coordinates:[Xe,$e,at]}),_t=[-ft[0],-ft[1]],xt=(0,nt.Z)(_t),B=Tt(yt(xt(Xe)),yt(xt($e)),yt(xt(at)));B.invert=le(B);var G=(0,S.Z)(B).rotate(_t),H=G.center;return delete G.rotate,G.center=function(te){return arguments.length?H(xt(te)):xt.invert(H())},G.clipAngle(90)}function Et(Xe,$e){var at=C(1-u($e));return[2/w*Xe*at,w*(1-at)]}function Ot(){return(0,S.Z)(Et).scale(95.6464).center([0,30])}function Nt(Xe){var $e=h(Xe);function at(ft,_t){return[ft,(ft?ft/u(ft):1)*(u(_t)*b(ft)-$e*b(_t))]}return at.invert=$e?function(ft,_t){ft&&(_t*=u(ft)/ft);var xt=b(ft);return[ft,2*T(C(xt*xt+$e*$e-_t*_t)-xt,$e-_t)]}:function(ft,_t){return[ft,E(ft?_t*h(ft)/ft:_t)]},at}function zt(){return ke(Nt).scale(249.828).clipAngle(90)}Et.invert=function(Xe,$e){var at=(at=$e/w-1)*at;return[at>0?Xe*C(v/at)/2:0,E(1-at)]};var Ze=C(3);function Ye(Xe,$e){return[Ze*Xe*(2*b(2*$e/3)-1)/w,Ze*w*u($e/3)]}function je(){return(0,S.Z)(Ye).scale(156.19)}function Ke(Xe){var $e=b(Xe);function at(ft,_t){return[ft*$e,u(_t)/$e]}return at.invert=function(ft,_t){return[ft/$e,E(_t*$e)]},at}function st(){return ke(Ke).parallel(38.58).scale(195.044)}function Se(Xe){var $e=b(Xe);function at(ft,_t){return[ft*$e,(1+$e)*h(_t/2)]}return at.invert=function(ft,_t){return[ft/$e,2*l(_t/(1+$e))]},at}function Ie(){return ke(Se).scale(124.75)}function We(Xe,$e){var at=C(8/(3*v));return[at*Xe*(1-k($e)/v),at*$e]}function it(){return(0,S.Z)(We).scale(165.664)}function lt(Xe,$e){var at=C(4-3*u(k($e)));return[2/C(6*v)*Xe*at,i($e)*C(2*v/3)*(2-at)]}function gt(){return(0,S.Z)(lt).scale(165.664)}function At(Xe,$e){var at=C(v*(4+v));return[2/at*Xe*(1+C(1-4*$e*$e/(v*v))),4/at*$e]}function kt(){return(0,S.Z)(At).scale(180.739)}function ht(Xe,$e){var at=(2+g)*u($e);$e/=2;for(var ft=0,_t=1/0;ft<10&&k(_t)>f;ft++){var xt=b($e);$e-=_t=($e+u($e)*(xt+2)-at)/(2*xt*(1+xt))}return[2/C(v*(4+v))*Xe*(1+b($e)),2*C(v/(4+v))*u($e)]}function St(){return(0,S.Z)(ht).scale(180.739)}function vt(Xe,$e){return[Xe*(1+b($e))/C(2+v),2*$e/C(2+v)]}function Mt(){return(0,S.Z)(vt).scale(173.044)}function It(Xe,$e){for(var at=(1+g)*u($e),ft=0,_t=1/0;ft<10&&k(_t)>f;ft++)$e-=_t=($e+u($e)-at)/(1+b($e));return at=C(2+v),[Xe*(1+b($e))/at,2*$e/at]}function Ut(){return(0,S.Z)(It).scale(173.044)}Ye.invert=function(Xe,$e){var at=3*E($e/(Ze*w));return[w*Xe/(Ze*(2*b(2*at/3)-1)),at]},We.invert=function(Xe,$e){var at=C(8/(3*v)),ft=$e/at;return[Xe/(at*(1-k(ft)/v)),ft]},lt.invert=function(Xe,$e){var at=2-k($e)/C(2*v/3);return[Xe*C(6*v)/(2*at),i($e)*E((4-at*at)/3)]},At.invert=function(Xe,$e){var at=C(v*(4+v))/2;return[Xe*at/(1+C(1-$e*$e*(4+v)/(4*v))),$e*at/2]},ht.invert=function(Xe,$e){var at=$e*C((4+v)/v)/2,ft=E(at),_t=b(ft);return[Xe/(2/C(v*(4+v))*(1+_t)),E((ft+at*(_t+2))/(2+g))]},vt.invert=function(Xe,$e){var at=C(2+v),ft=$e*at/2;return[at*Xe/(1+b(ft)),ft]},It.invert=function(Xe,$e){var at=1+g,ft=C(at/2);return[2*Xe*ft/(1+b($e*=ft)),E(($e+u($e))/at)]};var jt=3+2*m;function qt(Xe,$e){var at=u(Xe/=2),ft=b(Xe),_t=C(b($e)),xt=b($e/=2),B=u($e)/(xt+m*ft*_t),G=C(2/(1+B*B)),H=C((m*xt+(ft+at)*_t)/(m*xt+(ft-at)*_t));return[jt*(G*(H-1/H)-2*t(H)),jt*(G*B*(H+1/H)-2*l(B))]}function Yt(){return(0,S.Z)(qt).scale(62.5271)}qt.invert=function(Xe,$e){if(!(at=j.invert(Xe/1.2,1.065*$e)))return null;var at,ft=at[0],_t=at[1],xt=20;Xe/=jt,$e/=jt;do{var B=ft/2,G=_t/2,H=u(B),te=b(B),me=u(G),Le=b(G),Be=b(_t),qe=C(Be),et=me/(Le+m*te*qe),mt=et*et,bt=C(2/(1+mt)),ee=(m*Le+(te+H)*qe)/(m*Le+(te-H)*qe),he=C(ee),Me=he-1/he,Oe=he+1/he,Fe=bt*Me-2*t(he)-Xe,Ue=bt*et*Oe-2*l(et)-$e,Ge=me&&p*qe*H*mt/me,Je=(m*te*Le+qe)/(2*(Le+m*te*qe)*(Le+m*te*qe)*qe),rt=-.5*et*bt*bt*bt,ct=rt*Ge,Ct=rt*Je,Dt=(Dt=2*Le+m*qe*(te-H))*Dt*he,Ft=(m*te*Le*qe+Be)/Dt,Wt=-m*H*me/(qe*Dt),cn=Me*ct-2*Ft/he+bt*(Ft+Ft/ee),Xt=Me*Ct-2*Wt/he+bt*(Wt+Wt/ee),tn=et*Oe*ct-2*Ge/(1+mt)+bt*Oe*Ge+bt*et*(Ft-Ft/ee),$t=et*Oe*Ct-2*Je/(1+mt)+bt*Oe*Je+bt*et*(Wt-Wt/ee),_n=Xt*tn-$t*cn;if(!_n)break;var dn=(Ue*Xt-Fe*$t)/_n,Qt=(Fe*tn-Ue*cn)/_n;ft-=dn,_t=o(-g,r(g,_t-Qt))}while((k(dn)>f||k(Qt)>f)&&--xt>0);return k(k(_t)-g)<f?[0,_t]:xt&&[ft,_t]};var Kt=b(35*_);function pn(Xe,$e){var at=h($e/2);return[Xe*Kt*C(1-at*at),(1+Kt)*at]}function nn(){return(0,S.Z)(pn).scale(137.152)}function xn(Xe,$e){var at=$e/2,ft=b(at);return[2*Xe/w*b($e)*ft*ft,w*h(at)]}function jn(){return(0,S.Z)(xn).scale(135.264)}function mn(Xe){var $e=1-Xe,at=_t(v,0)[0]-_t(-v,0)[0],ft=C(2*(_t(0,g)[1]-_t(0,-g)[1])/at);function _t(G,H){var te=b(H),me=u(H);return[te/($e+Xe*te)*G,$e*H+Xe*me]}function xt(G,H){var te=_t(G,H);return[te[0]*ft,te[1]/ft]}function B(G){return xt(0,G)[1]}return xt.invert=function(G,H){var te=ce(B,H);return[G/ft*(Xe+$e/b(te)),te]},xt}function en(){var Xe=.5,$e=(0,S.r)(mn),at=$e(Xe);return at.alpha=function(ft){return arguments.length?$e(Xe=+ft):Xe},at.scale(168.725)}pn.invert=function(Xe,$e){var at=$e/(1+Kt);return[Xe&&Xe/(Kt*C(1-at*at)),2*l(at)]},xn.invert=function(Xe,$e){var at=l($e/w),ft=b(at),_t=2*at;return[Xe*w/2/(b(_t)*ft*ft),_t]};var vn=e(57962),on=e(97492);function sn(Xe){return[Xe[0]/2,E(h(Xe[1]/2*_))*M]}function En(Xe){return[2*Xe[0],2*l(u(Xe[1]*_))*M]}function kn(Xe){Xe==null&&(Xe=vn.Z);var $e=Xe(),at=(0,on.Z)().scale(M).precision(0).clipAngle(null).translate([0,0]);function ft(xt){return $e(sn(xt))}function _t(xt){ft[xt]=function(){return arguments.length?($e[xt].apply($e,arguments),ft):$e[xt]()}}return $e.invert&&(ft.invert=function(xt){return En($e.invert(xt))}),ft.stream=function(xt){var B=$e.stream(xt),G=at.stream({point:function(H,te){B.point(H/2,E(h(-te/2*_))*M)},lineStart:function(){B.lineStart()},lineEnd:function(){B.lineEnd()},polygonStart:function(){B.polygonStart()},polygonEnd:function(){B.polygonEnd()}});return G.sphere=B.sphere,G},ft.rotate=function(xt){return arguments.length?(at.rotate(xt),ft):at.rotate()},ft.center=function(xt){return arguments.length?($e.center(sn(xt)),ft):En($e.center())},_t("angle"),_t("clipAngle"),_t("clipExtent"),_t("fitExtent"),_t("fitHeight"),_t("fitSize"),_t("fitWidth"),_t("scale"),_t("translate"),_t("precision"),ft.scale(249.5)}function zn(Xe,$e){var at=2*v/$e,ft=Xe*Xe;function _t(xt,B){var G=(0,Q.N)(xt,B),H=G[0],te=G[1],me=H*H+te*te;if(me>ft){var Le=C(me),Be=T(te,H),qe=at*a(Be/at),et=Be-qe,mt=Xe*b(et),bt=(Xe*u(et)-et*u(mt))/(g-mt),ee=Fn(et,bt),he=(v-Xe)/Bn(ee,mt,v);H=Le;var Me,Oe=50;do H-=Me=(Xe+Bn(ee,mt,H)*he-Le)/(ee(H)*he);while(k(Me)>f&&--Oe>0);te=et*u(H),H<g&&(te-=bt*(H-g));var Fe=u(qe),Ue=b(qe);G[0]=H*Ue-te*Fe,G[1]=H*Fe+te*Ue}return G}return _t.invert=function(xt,B){var G=xt*xt+B*B;if(G>ft){var H=C(G),te=T(B,xt),me=at*a(te/at),Le=te-me;xt=H*b(Le),B=H*u(Le);for(var Be=xt-g,qe=u(xt),et=B/qe,mt=xt<g?1/0:0,bt=10;;){var ee=Xe*u(et),he=Xe*b(et),Me=u(he),Oe=g-he,Fe=(ee-et*Me)/Oe,Ue=Fn(et,Fe);if(k(mt)<x||!--bt)break;et-=mt=(et*qe-Fe*Be-B)/(qe-2*Be*(Oe*(he+et*ee*b(he)-Me)-ee*(ee-et*Me))/(Oe*Oe))}xt=(H=Xe+Bn(Ue,he,xt)*(v-Xe)/Bn(Ue,he,v))*b(te=me+et),B=H*u(te)}return Q.N.invert(xt,B)},_t}function Fn(Xe,$e){return function(at){var ft=Xe*b(at);return at<g&&(ft-=$e),C(1+ft*ft)}}function Bn(Xe,$e,at){for(var ft=(at-$e)/50,_t=Xe($e)+Xe(at),xt=1,B=$e;xt<50;++xt)_t+=2*Xe(B+=ft);return .5*_t*ft}function er(){var Xe=6,$e=30*_,at=b($e),ft=u($e),_t=(0,S.r)(zn),xt=_t($e,Xe),B=xt.stream,G=-b(.01*_),H=u(.01*_);return xt.radius=function(te){return arguments.length?(at=b($e=te*_),ft=u($e),_t($e,Xe)):$e*M},xt.lobes=function(te){return arguments.length?_t($e,Xe=+te):Xe},xt.stream=function(te){var me=xt.rotate(),Le=B(te),Be=(xt.rotate([0,0]),B(te));return xt.rotate(me),Le.sphere=function(){Be.polygonStart(),Be.lineStart();for(var qe=0,et=2*v/Xe,mt=0;qe<Xe;++qe,mt-=et)Be.point(T(H*b(mt),G)*M,E(H*u(mt))*M),Be.point(T(ft*b(mt-et/2),at)*M,E(ft*u(mt-et/2))*M);Be.lineEnd(),Be.polygonEnd()},Le},xt.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function Xn(Xe,$e,at,ft,_t,xt,B,G){function H(te,me){if(!me)return[Xe*te/v,0];var Le=me*me,Be=Xe+Le*($e+Le*(at+Le*ft)),qe=me*(_t-1+Le*(xt-G+Le*B)),et=(Be*Be+qe*qe)/(2*qe),mt=te*E(Be/et)/v;return[et*u(mt),me*(1+Le*G)+et*(1-b(mt))]}return arguments.length<8&&(G=0),H.invert=function(te,me){var Le,Be,qe=v*te/Xe,et=me,mt=50;do{var bt=et*et,ee=Xe+bt*($e+bt*(at+bt*ft)),he=et*(_t-1+bt*(xt-G+bt*B)),Me=ee*ee+he*he,Oe=2*he,Fe=Me/Oe,Ue=Fe*Fe,Ge=E(ee/Fe)/v,Je=qe*Ge,rt=ee*ee,ct=(2*$e+bt*(4*at+6*bt*ft))*et,Ct=_t+bt*(3*xt+5*bt*B),Dt=(2*(ee*ct+he*(Ct-1))*Oe-Me*(2*(Ct-1)))/(Oe*Oe),Ft=b(Je),Wt=u(Je),cn=Fe*Ft,Xt=Fe*Wt,tn=qe/v*(1/C(1-rt/Ue))*(ct*Fe-ee*Dt)/Ue,$t=Xt-te,_n=et*(1+bt*G)+Fe-cn-me,dn=Dt*Wt+cn*tn,Qt=cn*Ge,Cn=1+Dt-(Dt*Ft-Xt*tn),Dn=Xt*Ge,Jn=dn*Dn-Cn*Qt;if(!Jn)break;qe-=Le=(_n*dn-$t*Cn)/Jn,et-=Be=($t*Dn-_n*Qt)/Jn}while((k(Le)>f||k(Be)>f)&&--mt>0);return[qe,et]},H}var mr=Xn(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function ur(){return(0,S.Z)(mr).scale(149.995)}var $n=Xn(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function lr(){return(0,S.Z)($n).scale(153.93)}var hr=Xn(5/6*v,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Gt(){return(0,S.Z)(hr).scale(130.945)}function hn(Xe,$e){var at=Xe*Xe,ft=$e*$e;return[Xe*(1-.162388*ft)*(.87-952426e-9*at*at),$e*(1+ft/12)]}function An(){return(0,S.Z)(hn).scale(131.747)}hn.invert=function(Xe,$e){var at,ft=Xe,_t=$e,xt=50;do{var B=_t*_t;_t-=at=(_t*(1+B/12)-$e)/(1+B/4)}while(k(at)>f&&--xt>0);xt=50,Xe/=1-.162388*B;do{var G=(G=ft*ft)*G;ft-=at=(ft*(.87-952426e-9*G)-Xe)/(.87-.00476213*G)}while(k(at)>f&&--xt>0);return[ft,_t]};var Tn=Xn(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Rn(){return(0,S.Z)(Tn).scale(131.087)}function qn(Xe){var $e=Xe(g,0)[0]-Xe(-g,0)[0];function at(ft,_t){var xt=ft>0?-.5:.5,B=Xe(ft+xt*v,_t);return B[0]-=xt*$e,B}return Xe.invert&&(at.invert=function(ft,_t){var xt=ft>0?-.5:.5,B=Xe.invert(ft+xt*$e,_t),G=B[0]-xt*v;return G<-v?G+=2*v:G>v&&(G-=2*v),B[0]=G,B}),at}function Un(Xe,$e){var at=i(Xe),ft=i($e),_t=b($e),xt=b(Xe)*_t,B=u(Xe)*_t,G=u(ft*$e);Xe=k(T(B,G)),$e=E(xt),k(Xe-g)>f&&(Xe%=g);var H=function(te,me){if(me===g)return[0,0];var Le,Be,qe=u(me),et=qe*qe,mt=et*et,bt=1+mt,ee=1+3*mt,he=1-mt,Me=E(1/C(bt)),Oe=he+et*bt*Me,Fe=(1-qe)/Oe,Ue=C(Fe),Ge=Fe*bt,Je=C(Ge),rt=Ue*he;if(te===0)return[0,-(rt+et*Je)];var ct,Ct=b(me),Dt=1/Ct,Ft=2*qe*Ct,Wt=(-Oe*Ct-(-3*et+Me*ee)*Ft*(1-qe))/(Oe*Oe),cn=-Dt*Ft,Xt=-Dt*(et*bt*Wt+Fe*ee*Ft),tn=-2*Dt*(he*(.5*Wt/Ue)-2*et*Ue*Ft),$t=4*te/v;if(te>.222*v||me<v/4&&te>.175*v){if(Le=(rt+et*C(Ge*(1+mt)-rt*rt))/(1+mt),te>v/4)return[Le,Le];var _n=Le,dn=.5*Le;Le=.5*(dn+_n),Be=50;do{var Qt=Le*(tn+cn*C(Ge-Le*Le))+Xt*E(Le/Je)-$t;if(!Qt)break;Qt<0?dn=Le:_n=Le,Le=.5*(dn+_n)}while(k(_n-dn)>f&&--Be>0)}else{Le=f,Be=25;do{var Cn=Le*Le,Dn=C(Ge-Cn),Jn=tn+cn*Dn,Kn=Le*Jn+Xt*E(Le/Je)-$t;Le-=ct=Dn?Kn/(Jn+(Xt-cn*Cn)/Dn):0}while(k(ct)>f&&--Be>0)}return[Le,-rt-et*C(Ge-Le*Le)]}(Xe>v/4?g-Xe:Xe,$e);return Xe>v/4&&(G=H[0],H[0]=-H[1],H[1]=-G),H[0]*=at,H[1]*=-ft,H}function Yn(){return(0,S.Z)(qn(Un)).scale(239.75)}function or(Xe,$e){var at,ft,_t,xt,B,G;if($e<f)return[(xt=u(Xe))-(at=$e*(Xe-xt*(ft=b(Xe)))/4)*ft,ft+at*xt,1-$e*xt*xt/2,Xe-at];if($e>=.999999)return at=(1-$e)/4,_t=1/(ft=I(Xe)),[(xt=((G=d(2*(G=Xe)))-1)/(G+1))+at*((B=ft*O(Xe))-Xe)/(ft*ft),_t-at*xt*_t*(B-Xe),_t+at*xt*_t*(B+Xe),2*l(d(Xe))-g+at*(B-Xe)/ft];var H=[1,0,0,0,0,0,0,0,0],te=[C($e),0,0,0,0,0,0,0,0],me=0;for(ft=C(1-$e),B=1;k(te[me]/H[me])>f&&me<8;)at=H[me++],te[me]=(at-ft)/2,H[me]=(at+ft)/2,ft=C(at*ft),B*=2;_t=B*H[me]*Xe;do _t=(E(xt=te[me]*u(ft=_t)/H[me])+_t)/2;while(--me);return[u(_t),xt=b(_t),xt/b(_t-ft),_t]}function Jt(Xe,$e){if(!$e)return Xe;if($e===1)return t(h(Xe/2+y));for(var at=1,ft=C(1-$e),_t=C($e),xt=0;k(_t)>f;xt++){if(Xe%v){var B=l(ft*h(Xe)/at);B<0&&(B+=v),Xe+=B+~~(Xe/v)*v}else Xe+=Xe;_t=(at+ft)/2,ft=C(at*ft),_t=((at=_t)-ft)/2}return Xe/(n(2,xt)*at)}function Mn(Xe,$e){var at=(m-1)/(m+1),ft=C(1-at*at),_t=Jt(g,ft*ft),xt=t(h(v/4+k($e)/2)),B=d(-1*xt)/C(at),G=function(te,me){var Le=te*te,Be=me+1,qe=1-Le-me*me;return[.5*((te>=0?g:-g)-T(qe,2*te)),-.25*t(qe*qe+4*Le)+.5*t(Be*Be+Le)]}(B*b(-1*Xe),B*u(-1*Xe)),H=function(te,me,Le){var Be=k(te),qe=O(k(me));if(Be){var et=1/u(Be),mt=1/(h(Be)*h(Be)),bt=-(mt+Le*(qe*qe*et*et)-1+Le),ee=(-bt+C(bt*bt-(Le-1)*mt*4))/2;return[Jt(l(1/C(ee)),Le)*i(te),Jt(l(C((ee/mt-1)/Le)),1-Le)*i(me)]}return[0,Jt(l(qe),1-Le)*i(me)]}(G[0],G[1],ft*ft);return[-H[1],($e>=0?1:-1)*(.5*_t-H[0])]}function Rt(){return(0,S.Z)(qn(Mn)).scale(151.496)}Un.invert=function(Xe,$e){k(Xe)>1&&(Xe=2*i(Xe)-Xe),k($e)>1&&($e=2*i($e)-$e);var at=i(Xe),ft=i($e),_t=-at*Xe,xt=-ft*$e,B=xt/_t<1,G=function(Le,Be){for(var qe=0,et=1,mt=.5,bt=50;;){var ee=mt*mt,he=C(mt),Me=E(1/C(1+ee)),Oe=1-ee+mt*(1+ee)*Me,Fe=(1-he)/Oe,Ue=C(Fe),Ge=Fe*(1+ee),Je=Ue*(1-ee),rt=C(Ge-Le*Le),ct=Be+Je+mt*rt;if(k(et-qe)<x||--bt==0||ct===0)break;ct>0?qe=mt:et=mt,mt=.5*(qe+et)}if(!bt)return null;var Ct=E(he),Dt=b(Ct),Ft=1/Dt,Wt=2*he*Dt,cn=(-Oe*Dt-(-3*mt+Me*(1+3*ee))*Wt*(1-he))/(Oe*Oe);return[v/4*(Le*(-2*Ft*(.5*cn/Ue*(1-ee)-2*mt*Ue*Wt)+-Ft*Wt*rt)+-Ft*(mt*(1+ee)*cn+Fe*(1+3*ee)*Wt)*E(Le/C(Ge))),Ct]}(B?xt:_t,B?_t:xt),H=G[0],te=G[1],me=b(te);return B&&(H=-g-H),[at*(T(u(H)*me,-u(te))+v),ft*E(b(H)*me)]},Mn.invert=function(Xe,$e){var at,ft,_t,xt,B,G,H=(m-1)/(m+1),te=C(1-H*H),me=(ft=-Xe,_t=te*te,(at=.5*Jt(g,te*te)-$e)?(xt=or(at,_t),ft?(G=(B=or(ft,1-_t))[1]*B[1]+_t*xt[0]*xt[0]*B[0]*B[0],[[xt[0]*B[2]/G,xt[1]*xt[2]*B[0]*B[1]/G],[xt[1]*B[1]/G,-xt[0]*xt[2]*B[0]*B[2]/G],[xt[2]*B[1]*B[2]/G,-_t*xt[0]*xt[1]*B[0]/G]]):[[xt[0],0],[xt[1],0],[xt[2],0]]):[[0,(B=or(ft,1-_t))[0]/B[1]],[1/B[1],0],[B[2]/B[1],0]]),Le=function(Be,qe){var et=qe[0]*qe[0]+qe[1]*qe[1];return[(Be[0]*qe[0]+Be[1]*qe[1])/et,(Be[1]*qe[0]-Be[0]*qe[1])/et]}(me[0],me[1]);return[T(Le[1],Le[0])/-1,2*l(d(-.5*t(H*Le[0]*Le[0]+H*Le[1]*Le[1])))-g]};var Zt=e(7613);function rn(Xe){var $e=u(Xe),at=b(Xe),ft=Ln(Xe);function _t(xt,B){var G=ft(xt,B);xt=G[0],B=G[1];var H=u(B),te=b(B),me=b(xt),Le=L($e*H+at*te*me),Be=u(Le),qe=k(Be)>f?Le/Be:1;return[qe*at*u(xt),(k(xt)>g?qe:-qe)*($e*te-at*H*me)]}return ft.invert=Ln(-Xe),_t.invert=function(xt,B){var G=C(xt*xt+B*B),H=-u(G),te=b(G),me=G*te,Le=-B*H,Be=G*$e,qe=C(me*me+Le*Le-Be*Be),et=T(me*Be+Le*qe,Le*Be-me*qe),mt=(G>g?-1:1)*T(xt*H,G*b(et)*te+B*u(et)*H);return ft.invert(mt,et)},_t}function Ln(Xe){var $e=u(Xe),at=b(Xe);return function(ft,_t){var xt=b(_t),B=b(ft)*xt,G=u(ft)*xt,H=u(_t);return[T(G,B*at-H*$e),E(H*at+B*$e)]}}function Sn(){var Xe=0,$e=(0,S.r)(rn),at=$e(Xe),ft=at.rotate,_t=at.stream,xt=(0,Zt.Z)();return at.parallel=function(B){if(!arguments.length)return Xe*M;var G=at.rotate();return $e(Xe=B*_).rotate(G)},at.rotate=function(B){return arguments.length?(ft.call(at,[B[0],B[1]-Xe*M]),xt.center([-B[0],-B[1]]),at):((B=ft.call(at))[1]+=Xe*M,B)},at.stream=function(B){return(B=_t(B)).sphere=function(){B.polygonStart();var G,H=xt.radius(89.99)().coordinates[0],te=H.length-1,me=-1;for(B.lineStart();++me<te;)B.point((G=H[me])[0],G[1]);for(B.lineEnd(),te=(H=xt.radius(90.01)().coordinates[0]).length-1,B.lineStart();--me>=0;)B.point((G=H[me])[0],G[1]);B.lineEnd(),B.polygonEnd()},B},at.scale(79.4187).parallel(45).clipAngle(179.999)}var wn=e(33064),ln=e(72736),gn=E(1-1/3)*M,un=Ke(0);function fn(Xe){var $e=gn*_,at=Et(v,$e)[0]-Et(-v,$e)[0],ft=un(0,$e)[1],_t=Et(0,$e)[1],xt=w-_t,B=c/Xe,G=4/c,H=ft+xt*xt*4/c;function te(me,Le){var Be,qe=k(Le);if(qe>$e){var et=r(Xe-1,o(0,s((me+v)/B)));(Be=Et(me+=v*(Xe-1)/Xe-et*B,qe))[0]=Be[0]*c/at-c*(Xe-1)/(2*Xe)+et*c/Xe,Be[1]=ft+4*(Be[1]-_t)*xt/c,Le<0&&(Be[1]=-Be[1])}else Be=un(me,Le);return Be[0]*=G,Be[1]/=H,Be}return te.invert=function(me,Le){me/=G;var Be=k(Le*=H);if(Be>ft){var qe=r(Xe-1,o(0,s((me+v)/B)));me=(me+v*(Xe-1)/Xe-qe*B)*at/c;var et=Et.invert(me,.25*(Be-ft)*c/xt+_t);return et[0]-=v*(Xe-1)/Xe-qe*B,Le<0&&(et[1]=-et[1]),et}return un.invert(me,Le)},te}function bn(Xe,$e){return[Xe,1&$e?89.999999:gn]}function In(Xe,$e){return[Xe,1&$e?-89.999999:-gn]}function Hn(Xe){return[.999999*Xe[0],Xe[1]]}function Wn(){var Xe=4,$e=(0,S.r)(fn),at=$e(Xe),ft=at.stream;return at.lobes=function(_t){return arguments.length?$e(Xe=+_t):Xe},at.stream=function(_t){var xt=at.rotate(),B=ft(_t),G=(at.rotate([0,0]),ft(_t));return at.rotate(xt),B.sphere=function(){var H,te;(0,ln.Z)((H=180/Xe,te=[].concat((0,wn.w6)(-180,180+H/2,H).map(bn),(0,wn.w6)(180,-180-H/2,-H).map(In)),{type:"Polygon",coordinates:[H===180?te.map(Hn):te]}),G)},B},at.scale(239.75)}function Gn(Xe){var $e,at=1+Xe,ft=E(u(1/at)),_t=2*C(v/($e=v+4*ft*at)),xt=.5*_t*(at+C(Xe*(2+Xe))),B=Xe*Xe,G=at*at;function H(te,me){var Le,Be,qe=1-u(me);if(qe&&qe<2){var et,mt=g-me,bt=25;do{var ee=u(mt),he=b(mt),Me=ft+T(ee,at-he),Oe=1+G-2*at*he;mt-=et=(mt-B*ft-at*ee+Oe*Me-.5*qe*$e)/(2*at*ee*Me)}while(k(et)>x&&--bt>0);Le=_t*C(Oe),Be=te*Me/v}else Le=_t*(Xe+qe),Be=te*ft/v;return[Le*u(Be),xt-Le*b(Be)]}return H.invert=function(te,me){var Le=te*te+(me-=xt)*me,Be=(1+G-Le/(_t*_t))/(2*at),qe=L(Be),et=u(qe),mt=ft+T(et,at-Be);return[E(te/C(Le))*v/mt,E(1-2*(qe-B*ft-at*et+(1+G-2*at*Be)*mt)/$e)]},H}function nr(){var Xe=1,$e=(0,S.r)(Gn),at=$e(Xe);return at.ratio=function(ft){return arguments.length?$e(Xe=+ft):Xe},at.scale(167.774).center([0,18.67])}var tr=.7109889596207567,ar=.0528035274542;function ir(Xe,$e){return $e>-tr?((Xe=we(Xe,$e))[1]+=ar,Xe):De(Xe,$e)}function cr(){return(0,S.Z)(ir).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function br(Xe,$e){return k($e)>tr?((Xe=we(Xe,$e))[1]-=$e>0?ar:-ar,Xe):De(Xe,$e)}function xr(){return(0,S.Z)(br).scale(152.63)}function Tr(Xe,$e,at,ft){var _t=C(4*v/(2*at+(1+Xe-$e/2)*u(2*at)+(Xe+$e)/2*u(4*at)+$e/2*u(6*at))),xt=C(ft*u(at)*C((1+Xe*b(2*at)+$e*b(4*at))/(1+Xe+$e))),B=at*H(1);function G(Le){return C(1+Xe*b(2*Le)+$e*b(4*Le))}function H(Le){var Be=Le*at;return(2*Be+(1+Xe-$e/2)*u(2*Be)+(Xe+$e)/2*u(4*Be)+$e/2*u(6*Be))/at}function te(Le){return G(Le)*u(Le)}var me=function(Le,Be){var qe=at*ce(H,B*u(Be)/at,Be/v);isNaN(qe)&&(qe=at*i(Be));var et=_t*G(qe);return[et*xt*Le/v*b(qe),et/xt*u(qe)]};return me.invert=function(Le,Be){var qe=ce(te,Be*xt/_t);return[Le*v/(b(qe)*_t*xt*G(qe)),E(at*H(qe/at)/B)]},at===0&&(_t=C(ft/v),(me=function(Le,Be){return[Le*_t,u(Be)/_t]}).invert=function(Le,Be){return[Le/_t,E(Be*_t)]}),me}function sr(){var Xe=1,$e=0,at=45*_,ft=2,_t=(0,S.r)(Tr),xt=_t(Xe,$e,at,ft);return xt.a=function(B){return arguments.length?_t(Xe=+B,$e,at,ft):Xe},xt.b=function(B){return arguments.length?_t(Xe,$e=+B,at,ft):$e},xt.psiMax=function(B){return arguments.length?_t(Xe,$e,at=+B*_,ft):at*M},xt.ratio=function(B){return arguments.length?_t(Xe,$e,at,ft=+B):ft},xt.scale(180.739)}function kr(Xe,$e,at,ft,_t,xt,B,G,H,te,me){if(me.nanEncountered)return NaN;var Le,Be,qe,et,mt,bt,ee,he,Me,Oe;if(Be=Xe($e+.25*(Le=at-$e)),qe=Xe(at-.25*Le),isNaN(Be))me.nanEncountered=!0;else{if(!isNaN(qe))return Oe=((bt=(et=Le*(ft+4*Be+_t)/12)+(mt=Le*(_t+4*qe+xt)/12))-B)/15,te>H?(me.maxDepthCount++,bt+Oe):Math.abs(Oe)<G?bt+Oe:(he=kr(Xe,$e,ee=$e+.5*Le,ft,Be,_t,et,.5*G,H,te+1,me),isNaN(he)?(me.nanEncountered=!0,NaN):(Me=kr(Xe,ee,at,_t,qe,xt,mt,.5*G,H,te+1,me),isNaN(Me)?(me.nanEncountered=!0,NaN):he+Me));me.nanEncountered=!0}}function Rr(Xe,$e,at,ft,_t){ft===void 0&&(ft=1e-8),_t===void 0&&(_t=20);var xt=Xe($e),B=Xe(.5*($e+at)),G=Xe(at);return kr(Xe,$e,at,xt,B,G,(xt+4*B+G)*(at-$e)/6,ft,_t,1,{maxDepthCount:0,nanEncountered:!1})}function Qr(Xe,$e,at){function ft(qe){return Xe+(1-Xe)*n(1-n(qe,$e),1/$e)}function _t(qe){return Rr(ft,0,qe,1e-4)}for(var xt=1/_t(1),B=1e3,G=1.00000001*xt,H=[],te=0;te<=B;te++)H.push(_t(te/B)*G);function me(qe){var et=0,mt=B,bt=500;do H[bt]>qe?mt=bt:et=bt,bt=et+mt>>1;while(bt>et);var ee=H[bt+1]-H[bt];return ee&&(ee=(qe-H[bt+1])/ee),(bt+1+ee)/B}var Le=2*me(1)/v*xt/at,Be=function(qe,et){var mt=me(k(u(et))),bt=ft(mt)*qe;return mt/=Le,[bt,et>=0?mt:-mt]};return Be.invert=function(qe,et){var mt;return k(et*=Le)<1&&(mt=i(et)*E(_t(k(et))*xt)),[qe/ft(k(et)),mt]},Be}function ci(){var Xe=0,$e=2.5,at=1.183136,ft=(0,S.r)(Qr),_t=ft(Xe,$e,at);return _t.alpha=function(xt){return arguments.length?ft(Xe=+xt,$e,at):Xe},_t.k=function(xt){return arguments.length?ft(Xe,$e=+xt,at):$e},_t.gamma=function(xt){return arguments.length?ft(Xe,$e,at=+xt):at},_t.scale(152.63)}function pi(Xe,$e){return k(Xe[0]-$e[0])<f&&k(Xe[1]-$e[1])<f}function qi(Xe,$e){for(var at,ft,_t,xt=-1,B=Xe.length,G=Xe[0],H=[];++xt<B;){ft=((at=Xe[xt])[0]-G[0])/$e,_t=(at[1]-G[1])/$e;for(var te=0;te<$e;++te)H.push([G[0]+te*ft,G[1]+te*_t]);G=at}return H.push(at),H}function Ei(Xe){var $e,at,ft,_t,xt,B,G,H=[],te=Xe[0].length;for(G=0;G<te;++G)at=($e=Xe[0][G])[0][0],ft=$e[0][1],_t=$e[1][1],xt=$e[2][0],B=$e[2][1],H.push(qi([[at+f,ft+f],[at+f,_t-f],[xt-f,_t-f],[xt-f,B+f]],30));for(G=Xe[1].length-1;G>=0;--G)at=($e=Xe[1][G])[0][0],ft=$e[0][1],_t=$e[1][1],xt=$e[2][0],B=$e[2][1],H.push(qi([[xt-f,B-f],[xt-f,_t+f],[at+f,_t+f],[at+f,ft-f]],30));return{type:"Polygon",coordinates:[(0,wn.TS)(H)]}}function oi(Xe,$e,at){var ft,_t;function xt(H,te){for(var me=te<0?-1:1,Le=$e[+(te<0)],Be=0,qe=Le.length-1;Be<qe&&H>Le[Be][2][0];++Be);var et=Xe(H-Le[Be][1][0],te);return et[0]+=Xe(Le[Be][1][0],me*te>me*Le[Be][0][1]?Le[Be][0][1]:te)[0],et}at?xt.invert=at(xt):Xe.invert&&(xt.invert=function(H,te){for(var me=_t[+(te<0)],Le=$e[+(te<0)],Be=0,qe=me.length;Be<qe;++Be){var et=me[Be];if(et[0][0]<=H&&H<et[1][0]&&et[0][1]<=te&&te<et[1][1]){var mt=Xe.invert(H-Xe(Le[Be][1][0],0)[0],te);return mt[0]+=Le[Be][1][0],pi(xt(mt[0],mt[1]),[H,te])?mt:null}}});var B=(0,S.Z)(xt),G=B.stream;return B.stream=function(H){var te=B.rotate(),me=G(H),Le=(B.rotate([0,0]),G(H));return B.rotate(te),me.sphere=function(){(0,ln.Z)(ft,Le)},me},B.lobes=function(H){return arguments.length?(ft=Ei(H),$e=H.map(function(te){return te.map(function(me){return[[me[0][0]*_,me[0][1]*_],[me[1][0]*_,me[1][1]*_],[me[2][0]*_,me[2][1]*_]]})}),_t=$e.map(function(te){return te.map(function(me){var Le,Be=Xe(me[0][0],me[0][1])[0],qe=Xe(me[2][0],me[2][1])[0],et=Xe(me[1][0],me[0][1])[1],mt=Xe(me[1][0],me[1][1])[1];return et>mt&&(Le=et,et=mt,mt=Le),[[Be,et],[qe,mt]]})}),B):$e.map(function(te){return te.map(function(me){return[[me[0][0]*M,me[0][1]*M],[me[1][0]*M,me[1][1]*M],[me[2][0]*M,me[2][1]*M]]})})},$e!=null&&B.lobes($e),B}ir.invert=function(Xe,$e){return $e>-tr?we.invert(Xe,$e-ar):De.invert(Xe,$e)},br.invert=function(Xe,$e){return k($e)>tr?we.invert(Xe,$e+($e>0?ar:-ar)):De.invert(Xe,$e)};var la=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Aa(){return oi(pe,la).scale(160.857)}var no=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Go(){return oi(br,no).scale(152.63)}var il=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Us(){return oi(we,il).scale(169.529)}var Zo=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Ma(){return oi(we,Zo).scale(169.529).rotate([20,0])}var Vs=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Di(){return oi(ir,Vs,le).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var ss=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function xa(){return oi(De,ss).scale(152.63).rotate([-20,0])}function Sa(Xe,$e){return[3/c*Xe*C(v*v/3-$e*$e),$e]}function mo(){return(0,S.Z)(Sa).scale(158.837)}function ei(Xe){function $e(at,ft){if(k(k(ft)-g)<f)return[0,ft<0?-2:2];var _t=u(ft),xt=n((1+_t)/(1-_t),Xe/2),B=.5*(xt+1/xt)+b(at*=Xe);return[2*u(at)/B,(xt-1/xt)/B]}return $e.invert=function(at,ft){var _t=k(ft);if(k(_t-2)<f)return at?null:[0,i(ft)*g];if(_t>2)return null;var xt=(at/=2)*at,B=(ft/=2)*ft,G=2*ft/(1+xt+B);return G=n((1+G)/(1-G),1/Xe),[T(2*at,1-xt-B)/Xe,E((G-1)/(G+1))]},$e}function yo(){var Xe=.5,$e=(0,S.r)(ei),at=$e(Xe);return at.spacing=function(ft){return arguments.length?$e(Xe=+ft):Xe},at.scale(124.75)}Sa.invert=function(Xe,$e){return[c/3*Xe/C(v*v/3-$e*$e),$e]};var Pa=v/m;function Va(Xe,$e){return[Xe*(1+C(b($e)))/2,$e/(b($e/2)*b(Xe/6))]}function Xa(){return(0,S.Z)(Va).scale(97.2672)}function ls(Xe,$e){var at=Xe*Xe,ft=$e*$e;return[Xe*(.975534+ft*(-.0143059*at-.119161+-.0547009*ft)),$e*(1.00384+at*(.0802894+-.02855*ft+199025e-9*at)+ft*(.0998909+-.0491032*ft))]}function al(){return(0,S.Z)(ls).scale(139.98)}function ro(Xe,$e){return[u(Xe)/b($e),h($e)*b(Xe)]}function ol(){return(0,S.Z)(ro).scale(144.049).clipAngle(89.999)}function sl(Xe){var $e=b(Xe),at=h(y+Xe/2);function ft(_t,xt){var B=xt-Xe,G=k(B)<f?_t*$e:k(G=y+xt/2)<f||k(k(G)-g)<f?0:_t*B/t(h(G)/at);return[G,B]}return ft.invert=function(_t,xt){var B,G=xt+Xe;return[k(xt)<f?_t/$e:k(B=y+G/2)<f||k(k(B)-g)<f?0:_t*t(h(B)/at)/xt,G]},ft}function vl(){return ke(sl).parallel(40).scale(158.837)}function Hs(Xe,$e){return[Xe,1.25*t(h(y+.4*$e))]}function ll(){return(0,S.Z)(Hs).scale(108.318)}function qs(Xe){var $e=Xe.length-1;function at(ft,_t){for(var xt,B=b(_t),G=2/(1+B*b(ft)),H=G*B*u(ft),te=G*u(_t),me=$e,Le=Xe[me],Be=Le[0],qe=Le[1];--me>=0;)Be=(Le=Xe[me])[0]+H*(xt=Be)-te*qe,qe=Le[1]+H*qe+te*xt;return[Be=H*(xt=Be)-te*qe,qe=H*qe+te*xt]}return at.invert=function(ft,_t){var xt=20,B=ft,G=_t;do{for(var H,te=$e,me=Xe[te],Le=me[0],Be=me[1],qe=0,et=0;--te>=0;)qe=Le+B*(H=qe)-G*et,et=Be+B*et+G*H,Le=(me=Xe[te])[0]+B*(H=Le)-G*Be,Be=me[1]+B*Be+G*H;var mt,bt,ee=(qe=Le+B*(H=qe)-G*et)*qe+(et=Be+B*et+G*H)*et;B-=mt=((Le=B*(H=Le)-G*Be-ft)*qe+(Be=B*Be+G*H-_t)*et)/ee,G-=bt=(Be*qe-Le*et)/ee}while(k(mt)+k(bt)>1e-12&&--xt>0);if(xt){var he=C(B*B+G*G),Me=2*l(.5*he),Oe=u(Me);return[T(B*Oe,he*b(Me)),he?E(G*Oe/he):0]}},at}Va.invert=function(Xe,$e){var at=k(Xe),ft=k($e),_t=f,xt=g;ft<Pa?xt*=ft/Pa:_t+=6*L(Pa/ft);for(var B=0;B<25;B++){var G=u(xt),H=C(b(xt)),te=u(xt/2),me=b(xt/2),Le=u(_t/6),Be=b(_t/6),qe=.5*_t*(1+H)-at,et=xt/(me*Be)-ft,mt=H?-.25*_t*G/H:0,bt=.5*(1+H),ee=(1+.5*xt*te/me)/(me*Be),he=xt/me*(Le/6)/(Be*Be),Me=mt*he-ee*bt,Oe=(qe*he-et*bt)/Me,Fe=(et*mt-qe*ee)/Me;if(xt-=Oe,_t-=Fe,k(Oe)<f&&k(Fe)<f)break}return[Xe<0?-_t:_t,$e<0?-xt:xt]},ls.invert=function(Xe,$e){var at=i(Xe)*v,ft=$e/2,_t=50;do{var xt=at*at,B=ft*ft,G=at*ft,H=at*(.975534+B*(-.0143059*xt-.119161+-.0547009*B))-Xe,te=ft*(1.00384+xt*(.0802894+-.02855*B+199025e-9*xt)+B*(.0998909+-.0491032*B))-$e,me=.975534-B*(.119161+3*xt*.0143059+.0547009*B),Le=-G*(.238322+.2188036*B+.0286118*xt),Be=G*(.1605788+7961e-7*xt+-.0571*B),qe=1.00384+xt*(.0802894+199025e-9*xt)+B*(3*(.0998909-.02855*xt)-.245516*B),et=Le*Be-qe*me,mt=(te*Le-H*qe)/et,bt=(H*Be-te*me)/et;at-=mt,ft-=bt}while((k(mt)>f||k(bt)>f)&&--_t>0);return _t&&[at,ft]},ro.invert=function(Xe,$e){var at=Xe*Xe,ft=$e*$e+1,_t=at+ft,xt=Xe?p*C((_t-C(_t*_t-4*at))/at):1/C(ft);return[E(Xe*xt),i($e)*L(xt)]},Hs.invert=function(Xe,$e){return[Xe,2.5*l(d(.8*$e))-.625*v]};var io=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],ao=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Yo=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],oo=[[.9245,0],[0,0],[.01943,0]],Gs=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Zs(){return Oo(io,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function Po(){return Oo(ao,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Ms(){return Oo(Yo,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function xo(){return Oo(oo,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function Wo(){return Oo(Gs,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Oo(Xe,$e){var at=(0,S.Z)(qs(Xe)).rotate($e).clipAngle(90),ft=(0,nt.Z)($e),_t=at.center;return delete at.rotate,at.center=function(xt){return arguments.length?_t(ft(xt)):ft.invert(_t())},at}var so=C(6),ti=C(7);function bo(Xe,$e){var at=E(7*u($e)/(3*so));return[so*Xe*(2*b(2*at/3)-1)/ti,9*u(at/3)/ti]}function ml(){return(0,S.Z)(bo).scale(164.859)}function Ss(Xe,$e){for(var at,ft=(1+p)*u($e),_t=$e,xt=0;xt<25&&(_t-=at=(u(_t/2)+u(_t)-ft)/(.5*b(_t/2)+b(_t)),!(k(at)<f));xt++);return[Xe*(1+2*b(_t)/b(_t/2))/(3*m),2*C(3)*u(_t/2)/C(2+m)]}function us(){return(0,S.Z)(Ss).scale(188.209)}function Io(Xe,$e){for(var at,ft=C(6/(4+v)),_t=(1+v/4)*u($e),xt=$e/2,B=0;B<25&&(xt-=at=(xt/2+u(xt)-_t)/(.5+b(xt)),!(k(at)<f));B++);return[ft*(.5+b(xt))*Xe/1.5,ft*xt]}function Xo(){return(0,S.Z)(Io).scale(166.518)}bo.invert=function(Xe,$e){var at=3*E($e*ti/9);return[Xe*ti/(so*(2*b(2*at/3)-1)),E(3*u(at)*so/7)]},Ss.invert=function(Xe,$e){var at=$e*C(2+m)/(2*C(3)),ft=2*E(at);return[3*m*Xe/(1+2*b(ft)/b(ft/2)),E((at+u(ft))/(1+p))]},Io.invert=function(Xe,$e){var at=C(6/(4+v)),ft=$e/at;return k(k(ft)-g)<f&&(ft=ft<0?-g:g),[1.5*Xe/(at*(.5+b(ft))),E((ft/2+u(ft))/(1+v/4))]};var Oa=e(26867);function Ys(Xe,$e){var at=$e*$e,ft=at*at,_t=at*ft;return[Xe*(.84719-.13063*at+_t*_t*(.05494*at-.04515-.02326*ft+.00331*_t)),$e*(1.01183+ft*ft*(.01926*at-.02625-.00396*ft))]}function cs(){return(0,S.Z)(Ys).scale(175.295)}function Jo(Xe,$e){return[Xe*(1+b($e))/2,2*($e-h($e/2))]}function fs(){return(0,S.Z)(Jo).scale(152.63)}Ys.invert=function(Xe,$e){var at,ft,_t,xt,B=$e,G=25;do B-=at=(B*(1.01183+(_t=(ft=B*B)*ft)*_t*(.01926*ft-.02625-.00396*_t))-$e)/(1.01183+_t*_t*(.21186*ft-.23625+-.05148*_t));while(k(at)>x&&--G>0);return[Xe/(.84719-.13063*(ft=B*B)+(xt=ft*(_t=ft*ft))*xt*(.05494*ft-.04515-.02326*_t+.00331*xt)),B]},Jo.invert=function(Xe,$e){for(var at=$e/2,ft=0,_t=1/0;ft<10&&k(_t)>f;++ft){var xt=b($e/2);$e-=_t=($e-h($e/2)-at)/(1-.5/(xt*xt))}return[2*Xe/(1+b($e)),$e]};var zo=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Ro(){return oi(se(1/0),zo).rotate([20,0]).scale(152.63)}function Ko(Xe,$e){var at=u($e),ft=b($e),_t=i(Xe);if(Xe===0||k($e)===g)return[0,$e];if($e===0)return[Xe,0];if(k(Xe)===g)return[Xe*ft,g*at];var xt=v/(2*Xe)-2*Xe/v,B=2*$e/v,G=(1-B*B)/(at-B),H=xt*xt,te=G*G,me=1+H/te,Le=1+te/H,Be=(xt*at/G-xt/2)/me,qe=(te*at/H+G/2)/Le,et=qe*qe-(te*at*at/H+G*at-1)/Le;return[g*(Be+C(Be*Be+ft*ft/me)*_t),g*(qe+C(et<0?0:et)*i(-$e*xt)*_t)]}function hs(){return(0,S.Z)(Ko).scale(127.267)}Ko.invert=function(Xe,$e){var at=(Xe/=g)*Xe,ft=at+($e/=g)*$e,_t=v*v;return[Xe?(ft-1+C((1-ft)*(1-ft)+4*at))/(2*Xe)*g:0,ce(function(xt){return ft*(v*u(xt)-2*xt)*v+4*xt*xt*($e-u(xt))+2*v*xt-_t*$e},0)]};var ps=1.0148,Ia=.23185,ds=-.14499,gs=.02406,Ws=1.790857183;function _o(Xe,$e){var at=$e*$e;return[Xe,$e*(ps+at*at*(Ia+at*(ds+gs*at)))]}function Es(){return(0,S.Z)(_o).scale(139.319)}function vs(Xe,$e){if(k($e)<f)return[Xe,0];var at=h($e),ft=Xe*u($e);return[u(ft)/at,$e+(1-b(ft))/at]}function Xs(){return(0,S.Z)(vs).scale(103.74)}_o.invert=function(Xe,$e){$e>Ws?$e=Ws:$e<-1.790857183&&($e=-1.790857183);var at,ft=$e;do{var _t=ft*ft;ft-=at=(ft*(ps+_t*_t*(Ia+_t*(ds+gs*_t)))-$e)/(1.0148+_t*_t*(1.1592500000000001+_t*(.21654*_t-1.01493)))}while(k(at)>f);return[Xe,ft]},vs.invert=function(Xe,$e){if(k($e)<f)return[Xe,0];var at,ft=Xe*Xe+$e*$e,_t=.5*$e,xt=10;do{var B=h(_t),G=1/b(_t),H=ft-2*$e*_t+_t*_t;_t-=at=(B*H+2*(_t-$e))/(2+H*G*G+2*(_t-$e)*B)}while(k(at)>f&&--xt>0);return B=h(_t),[(k($e)<k(_t+1/B)?E(Xe*B):i($e)*i(Xe)*(L(k(Xe*B))+g))/u(_t),_t]};var ms=e(77338),$o=e(83074);function Do(Xe,$e){return[Xe[0]*$e[0]+Xe[1]*$e[3],Xe[0]*$e[1]+Xe[1]*$e[4],Xe[0]*$e[2]+Xe[1]*$e[5]+Xe[2],Xe[3]*$e[0]+Xe[4]*$e[3],Xe[3]*$e[1]+Xe[4]*$e[4],Xe[3]*$e[2]+Xe[4]*$e[5]+Xe[5]]}function Fo(Xe,$e){return[Xe[0]-$e[0],Xe[1]-$e[1]]}function si(Xe){return C(Xe[0]*Xe[0]+Xe[1]*Xe[1])}function wo(Xe,$e,at){function ft(G,H){var te,me=$e(G,H),Le=me.project([G*M,H*M]);return(te=me.transform)?[te[0]*Le[0]+te[1]*Le[1]+te[2],-(te[3]*Le[0]+te[4]*Le[1]+te[5])]:(Le[1]=-Le[1],Le)}function _t(G,H){var te=G.project.invert,me=G.transform,Le=H;if(me&&(me=function(bt){var ee=1/(bt[0]*bt[4]-bt[1]*bt[3]);return[ee*bt[4],-ee*bt[1],ee*(bt[1]*bt[5]-bt[2]*bt[4]),-ee*bt[3],ee*bt[0],ee*(bt[2]*bt[3]-bt[0]*bt[5])]}(me),Le=[me[0]*Le[0]+me[1]*Le[1]+me[2],me[3]*Le[0]+me[4]*Le[1]+me[5]]),te&&G===function(bt){return $e(bt[0]*_,bt[1]*_)}(Be=te(Le)))return Be;for(var Be,qe=G.children,et=0,mt=qe&&qe.length;et<mt;++et)if(Be=_t(qe[et],H))return Be}(function G(H,te){if(H.edges=function(Fe){for(var Ue=Fe.length,Ge=[],Je=Fe[Ue-1],rt=0;rt<Ue;++rt)Ge.push([Je,Je=Fe[rt]]);return Ge}(H.face),te.face){var me=H.shared=function(Fe,Ue){for(var Ge,Je,rt=Fe.length,ct=null,Ct=0;Ct<rt;++Ct){Ge=Fe[Ct];for(var Dt=Ue.length;--Dt>=0;)if(Je=Ue[Dt],Ge[0]===Je[0]&&Ge[1]===Je[1]){if(ct)return[ct,Ge];ct=Ge}}}(H.face,te.face),Le=(mt=me.map(te.project),bt=me.map(H.project),ee=Fo(mt[1],mt[0]),he=Fo(bt[1],bt[0]),Me=function(Fe,Ue){return T(Fe[0]*Ue[1]-Fe[1]*Ue[0],Fe[0]*Ue[0]+Fe[1]*Ue[1])}(ee,he),Oe=si(ee)/si(he),Do([1,0,mt[0][0],0,1,mt[0][1]],Do([Oe,0,0,0,Oe,0],Do([b(Me),u(Me),0,-u(Me),b(Me),0],[1,0,-bt[0][0],0,1,-bt[0][1]]))));H.transform=te.transform?Do(te.transform,Le):Le;for(var Be=te.edges,qe=0,et=Be.length;qe<et;++qe)Yi(me[0],Be[qe][1])&&Yi(me[1],Be[qe][0])&&(Be[qe]=H),Yi(me[0],Be[qe][0])&&Yi(me[1],Be[qe][1])&&(Be[qe]=H);for(qe=0,et=(Be=H.edges).length;qe<et;++qe)Yi(me[0],Be[qe][0])&&Yi(me[1],Be[qe][1])&&(Be[qe]=te),Yi(me[0],Be[qe][1])&&Yi(me[1],Be[qe][0])&&(Be[qe]=te)}else H.transform=te.transform;var mt,bt,ee,he,Me,Oe;return H.children&&H.children.forEach(function(Fe){G(Fe,H)}),H})(Xe,{transform:null}),Xr(Xe)&&(ft.invert=function(G,H){var te=_t(Xe,[G,-H]);return te&&(te[0]*=_,te[1]*=_,te)});var xt=(0,S.Z)(ft),B=xt.stream;return xt.stream=function(G){var H=xt.rotate(),te=B(G),me=(xt.rotate([0,0]),B(G));return xt.rotate(H),te.sphere=function(){me.polygonStart(),me.lineStart(),To(me,Xe),me.lineEnd(),me.polygonEnd()},te},xt.angle(at==null?-30:at*M)}function To(Xe,$e,at){var ft,_t,xt=$e.edges,B=xt.length,G={type:"MultiPoint",coordinates:$e.face},H=$e.face.filter(function(mt){return k(mt[1])!==90}),te=(0,ms.Z)({type:"MultiPoint",coordinates:H}),me=!1,Le=-1,Be=te[1][0]-te[0][0],qe=Be===180||Be===360?[(te[0][0]+te[1][0])/2,(te[0][1]+te[1][1])/2]:(0,Ve.Z)(G);if(at)for(;++Le<B&&xt[Le]!==at;);++Le;for(var et=0;et<B;++et)_t=xt[(et+Le)%B],Array.isArray(_t)?(me||(Xe.point((ft=(0,$o.Z)(_t[0],qe)(f))[0],ft[1]),me=!0),Xe.point((ft=(0,$o.Z)(_t[1],qe)(f))[0],ft[1])):(me=!1,_t!==at&&To(Xe,_t,$e))}function Yi(Xe,$e){return Xe&&$e&&Xe[0]===$e[0]&&Xe[1]===$e[1]}function Xr(Xe){return Xe.project.invert||Xe.children&&Xe.children.some(Xr)}var Kr=e(98936),lo=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Ja=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Xe){return Xe.map(function($e){return lo[$e]})});function Ls(Xe){Xe=Xe||function(at){var ft=(0,Ve.Z)({type:"MultiPoint",coordinates:at});return(0,Kr.Z)().scale(1).translate([0,0]).rotate([-ft[0],-ft[1]])};var $e=Ja.map(function(at){return{face:at,project:Xe(at)}});return[-1,0,0,1,0,1,4,5].forEach(function(at,ft){var _t=$e[at];_t&&(_t.children||(_t.children=[])).push($e[ft])}),wo($e[0],function(at,ft){return $e[at<-v/2?ft<0?6:4:at<0?ft<0?2:0:at<v/2?ft<0?3:1:ft<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Js=2/C(3);function Bo(Xe,$e){var at=Et(Xe,$e);return[at[0]*Js,at[1]]}function Ks(Xe){Xe=Xe||function(at){var ft=(0,Ve.Z)({type:"MultiPoint",coordinates:at});return(0,S.Z)(Bo).translate([0,0]).scale(1).rotate(ft[1]>0?[-ft[0],0]:[180-ft[0],180])};var $e=Ja.map(function(at){return{face:at,project:Xe(at)}});return[-1,0,0,1,0,1,4,5].forEach(function(at,ft){var _t=$e[at];_t&&(_t.children||(_t.children=[])).push($e[ft])}),wo($e[0],function(at,ft){return $e[at<-v/2?ft<0?6:4:at<0?ft<0?2:0:at<v/2?ft<0?3:1:ft<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function No(Xe){Xe=Xe||function(xt){var B=xt.length===6?(0,Ve.Z)({type:"MultiPoint",coordinates:xt}):xt[0];return(0,Kr.Z)().scale(1).translate([0,0]).rotate([-B[0],-B[1]])};var $e=Ja.map(function(xt){for(var B,G=xt.map(xi),H=G.length,te=G[H-1],me=[],Le=0;Le<H;++Le)B=G[Le],me.push(jo([.9486832980505138*te[0]+.31622776601683794*B[0],.9486832980505138*te[1]+.31622776601683794*B[1],.9486832980505138*te[2]+.31622776601683794*B[2]]),jo([.9486832980505138*B[0]+.31622776601683794*te[0],.9486832980505138*B[1]+.31622776601683794*te[1],.9486832980505138*B[2]+.31622776601683794*te[2]])),te=B;return me}),at=[],ft=[-1,0,0,1,0,1,4,5];$e.forEach(function(xt,B){for(var G,H,te=Ja[B],me=te.length,Le=at[B]=[],Be=0;Be<me;++Be)$e.push([te[Be],xt[(2*Be+2)%(2*me)],xt[(2*Be+1)%(2*me)]]),ft.push(B),Le.push((G=xi(xt[(2*Be+2)%(2*me)]),H=xi(xt[(2*Be+1)%(2*me)]),[G[1]*H[2]-G[2]*H[1],G[2]*H[0]-G[0]*H[2],G[0]*H[1]-G[1]*H[0]]))});var _t=$e.map(function(xt){return{project:Xe(xt),face:xt}});return ft.forEach(function(xt,B){var G=_t[xt];G&&(G.children||(G.children=[])).push(_t[B])}),wo(_t[0],function(xt,B){var G=b(B),H=[G*b(xt),G*u(xt),u(B)],te=xt<-v/2?B<0?6:4:xt<0?B<0?2:0:xt<v/2?B<0?3:1:B<0?7:5,me=at[te];return _t[uo(me[0],H)<0?8+3*te:uo(me[1],H)<0?8+3*te+1:uo(me[2],H)<0?8+3*te+2:te]}).angle(-30).scale(110.625).center([0,45])}function uo(Xe,$e){for(var at=0,ft=Xe.length,_t=0;at<ft;++at)_t+=Xe[at]*$e[at];return _t}function jo(Xe){return[T(Xe[1],Xe[0])*M,E(o(-1,r(1,Xe[2])))*M]}function xi(Xe){var $e=Xe[0]*_,at=Xe[1]*_,ft=b(at);return[ft*b($e),ft*u($e),u(at)]}function Ka(){}function Uo(Xe,$e){var at,ft=$e.stream;if(!ft)throw new Error("invalid projection");switch(Xe&&Xe.type){case"Feature":at=Wi;break;case"FeatureCollection":at=zi;break;default:at=Xi}return at(Xe,ft)}function zi(Xe,$e){return{type:"FeatureCollection",features:Xe.features.map(function(at){return Wi(at,$e)})}}function Wi(Xe,$e){return{type:"Feature",id:Xe.id,properties:Xe.properties,geometry:Xi(Xe.geometry,$e)}}function Xi(Xe,$e){if(!Xe)return null;if(Xe.type==="GeometryCollection")return function(ft,_t){return{type:"GeometryCollection",geometries:ft.geometries.map(function(xt){return Xi(xt,_t)})}}(Xe,$e);var at;switch(Xe.type){case"Point":case"MultiPoint":at=ko;break;case"LineString":case"MultiLineString":at=za;break;case"Polygon":case"MultiPolygon":case"Sphere":at=Fi;break;default:return null}return(0,ln.Z)(Xe,$e(at)),at.result()}Bo.invert=function(Xe,$e){return Et.invert(Xe/Js,$e)};var Gi=[],ua=[],ko={point:function(Xe,$e){Gi.push([Xe,$e])},result:function(){var Xe=Gi.length?Gi.length<2?{type:"Point",coordinates:Gi[0]}:{type:"MultiPoint",coordinates:Gi}:null;return Gi=[],Xe}},za={lineStart:Ka,point:function(Xe,$e){Gi.push([Xe,$e])},lineEnd:function(){Gi.length&&(ua.push(Gi),Gi=[])},result:function(){var Xe=ua.length?ua.length<2?{type:"LineString",coordinates:ua[0]}:{type:"MultiLineString",coordinates:ua}:null;return ua=[],Xe}},Fi={polygonStart:Ka,lineStart:Ka,point:function(Xe,$e){Gi.push([Xe,$e])},lineEnd:function(){var Xe=Gi.length;if(Xe){do Gi.push(Gi[0].slice());while(++Xe<4);ua.push(Gi),Gi=[]}},polygonEnd:Ka,result:function(){if(!ua.length)return null;var Xe=[],$e=[];return ua.forEach(function(at){(function(ft){if((_t=ft.length)<4)return!1;for(var _t,xt=0,B=ft[_t-1][1]*ft[0][0]-ft[_t-1][0]*ft[0][1];++xt<_t;)B+=ft[xt-1][1]*ft[xt][0]-ft[xt-1][0]*ft[xt][1];return B<=0})(at)?Xe.push([at]):$e.push(at)}),$e.forEach(function(at){var ft=at[0];Xe.some(function(_t){if(function(xt,B){for(var G=B[0],H=B[1],te=!1,me=0,Le=xt.length,Be=Le-1;me<Le;Be=me++){var qe=xt[me],et=qe[0],mt=qe[1],bt=xt[Be],ee=bt[0],he=bt[1];mt>H^he>H&&G<(ee-et)*(H-mt)/(he-mt)+et&&(te=!te)}return te}(_t[0],ft))return _t.push(at),!0})||Xe.push([at])}),ua=[],Xe.length?Xe.length>1?{type:"MultiPolygon",coordinates:Xe}:{type:"Polygon",coordinates:Xe[0]}:null}};function ba(Xe){var $e=Xe(g,0)[0]-Xe(-g,0)[0];function at(ft,_t){var xt=k(ft)<g,B=Xe(xt?ft:ft>0?ft-v:ft+v,_t),G=(B[0]-B[1])*p,H=(B[0]+B[1])*p;if(xt)return[G,H];var te=$e*p,me=G>0^H>0?-1:1;return[me*G-i(H)*te,me*H-i(G)*te]}return Xe.invert&&(at.invert=function(ft,_t){var xt=(ft+_t)*p,B=(_t-ft)*p,G=k(xt)<.5*$e&&k(B)<.5*$e;if(!G){var H=$e*p,te=xt>0^B>0?-1:1,me=-te*ft+(B>0?1:-1)*H,Le=-te*_t+(xt>0?1:-1)*H;xt=(-me-Le)*p,B=(me-Le)*p}var Be=Xe.invert(xt,B);return G||(Be[0]+=xt>0?v:-v),Be}),(0,S.Z)(at).rotate([-90,-90,45]).clipAngle(179.999)}function Cs(){return ba(Un).scale(176.423)}function Ps(){return ba(Mn).scale(111.48)}function aa(Xe,$e){if(!(0<=($e=+$e)&&$e<=20))throw new Error("invalid digits");function at(te){var me=te.length,Le=2,Be=new Array(me);for(Be[0]=+te[0].toFixed($e),Be[1]=+te[1].toFixed($e);Le<me;)Be[Le]=te[Le],++Le;return Be}function ft(te){return te.map(at)}function _t(te){for(var me=at(te[0]),Le=[me],Be=1;Be<te.length;Be++){var qe=at(te[Be]);(qe.length>2||qe[0]!=me[0]||qe[1]!=me[1])&&(Le.push(qe),me=qe)}return Le.length===1&&te.length>1&&Le.push(at(te[te.length-1])),Le}function xt(te){return te.map(_t)}function B(te){if(te==null)return te;var me;switch(te.type){case"GeometryCollection":me={type:"GeometryCollection",geometries:te.geometries.map(B)};break;case"Point":me={type:"Point",coordinates:at(te.coordinates)};break;case"MultiPoint":me={type:te.type,coordinates:ft(te.coordinates)};break;case"LineString":me={type:te.type,coordinates:_t(te.coordinates)};break;case"MultiLineString":case"Polygon":me={type:te.type,coordinates:xt(te.coordinates)};break;case"MultiPolygon":me={type:"MultiPolygon",coordinates:te.coordinates.map(xt)};break;default:return te}return te.bbox!=null&&(me.bbox=te.bbox),me}function G(te){var me={type:"Feature",properties:te.properties,geometry:B(te.geometry)};return te.id!=null&&(me.id=te.id),te.bbox!=null&&(me.bbox=te.bbox),me}if(Xe!=null)switch(Xe.type){case"Feature":return G(Xe);case"FeatureCollection":var H={type:"FeatureCollection",features:Xe.features.map(G)};return Xe.bbox!=null&&(H.bbox=Xe.bbox),H;default:return B(Xe)}return Xe}function wr(Xe){var $e=u(Xe);function at(ft,_t){var xt=$e?h(ft*$e/2)/$e:ft/2;if(!_t)return[2*xt,-Xe];var B=2*l(xt*u(_t)),G=1/h(_t);return[u(B)*G,_t+(1-b(B))*G-Xe]}return at.invert=function(ft,_t){if(k(_t+=Xe)<f)return[$e?2*l($e*ft/2)/$e:ft,0];var xt,B=ft*ft+_t*_t,G=0,H=10;do{var te=h(G),me=1/b(G),Le=B-2*_t*G+G*G;G-=xt=(te*Le+2*(G-_t))/(2+Le*me*me+2*(G-_t)*te)}while(k(xt)>f&&--H>0);var Be=ft*(te=h(G)),qe=h(k(_t)<k(G+1/te)?.5*E(Be):.5*L(Be)+v/4)/u(G);return[$e?2*l($e*qe)/$e:2*qe,G]},at}function Vo(){return ke(wr).scale(131.215)}var ca=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Os(Xe,$e){var at,ft=r(18,36*k($e)/v),_t=s(ft),xt=ft-_t,B=(at=ca[_t])[0],G=at[1],H=(at=ca[++_t])[0],te=at[1],me=(at=ca[r(19,++_t)])[0],Le=at[1];return[Xe*(H+xt*(me-B)/2+xt*xt*(me-2*H+B)/2),($e>0?g:-g)*(te+xt*(Le-G)/2+xt*xt*(Le-2*te+G)/2)]}function Qo(){return(0,S.Z)(Os).scale(152.63)}function es(Xe,$e){var at=function(B){function G(H,te){var me=b(te),Le=(B-1)/(B-me*b(H));return[Le*me*u(H),Le*u(te)]}return G.invert=function(H,te){var me=H*H+te*te,Le=C(me),Be=(B-C(1-me*(B+1)/(B-1)))/((B-1)/Le+Le/(B-1));return[T(H*Be,Le*C(1-Be*Be)),Le?E(te*Be/Le):0]},G}(Xe);if(!$e)return at;var ft=b($e),_t=u($e);function xt(B,G){var H=at(B,G),te=H[1],me=te*_t/(Xe-1)+ft;return[H[0]*ft/me,te/me]}return xt.invert=function(B,G){var H=(Xe-1)/(Xe-1-G*_t);return at.invert(H*B,H*G*ft)},xt}function ts(){var Xe=2,$e=0,at=(0,S.r)(es),ft=at(Xe,$e);return ft.distance=function(_t){return arguments.length?at(Xe=+_t,$e):Xe},ft.tilt=function(_t){return arguments.length?at(Xe,$e=_t*_):$e*M},ft.scale(432.147).clipAngle(L(1/Xe)*M-1e-6)}ca.forEach(function(Xe){Xe[1]*=1.0144}),Os.invert=function(Xe,$e){var at=$e/g,ft=90*at,_t=r(18,k(ft/5)),xt=o(0,s(_t));do{var B=ca[xt][1],G=ca[xt+1][1],H=ca[r(19,xt+2)][1],te=H-B,me=H-2*G+B,Le=2*(k(at)-G)/te,Be=me/te,qe=Le*(1-Be*Le*(1-2*Be*Le));if(qe>=0||xt===1){ft=($e>=0?5:-5)*(qe+_t);var et,mt=50;do qe=(_t=r(18,k(ft)/5))-(xt=s(_t)),B=ca[xt][1],G=ca[xt+1][1],H=ca[r(19,xt+2)][1],ft-=(et=($e>=0?g:-g)*(G+qe*(H-B)/2+qe*qe*(H-2*G+B)/2)-$e)*M;while(k(et)>x&&--mt>0);break}}while(--xt>=0);var bt=ca[xt][0],ee=ca[xt+1][0],he=ca[r(19,xt+2)][0];return[Xe/(ee+qe*(he-bt)/2+qe*qe*(he-2*ee+bt)/2),ft*_]};var Ar=-179.9999,ns=179.9999,Ra=-89.9999,Is=89.9999;function ys(Xe){return Xe.length>0}function Ji(Xe){return Xe===-90||Xe===90?[0,Xe]:[-180,($e=Xe,Math.floor(1e4*$e)/1e4)];var $e}function Ho(Xe){var $e=Xe[0],at=Xe[1],ft=!1;return $e<=Ar?($e=-180,ft=!0):$e>=ns&&($e=180,ft=!0),at<=Ra?(at=-90,ft=!0):at>=Is&&(at=90,ft=!0),ft?[$e,at]:Xe}function co(Xe){return Xe.map(Ho)}function _a(Xe,$e,at){for(var ft=0,_t=Xe.length;ft<_t;++ft){var xt=Xe[ft].slice();at.push({index:-1,polygon:$e,ring:xt});for(var B=0,G=xt.length;B<G;++B){var H=xt[B],te=H[0],me=H[1];if(te<=Ar||te>=ns||me<=Ra||me>=Is){xt[B]=Ho(H);for(var Le=B+1;Le<G;++Le){var Be=xt[Le],qe=Be[0],et=Be[1];if(qe>Ar&&qe<ns&&et>Ra&&et<Is)break}if(Le===B+1)continue;if(B){var mt={index:-1,polygon:$e,ring:xt.slice(0,B+1)};mt.ring[mt.ring.length-1]=Ji(me),at[at.length-1]=mt}else at.pop();if(Le>=G)break;at.push({index:-1,polygon:$e,ring:xt=xt.slice(Le-1)}),xt[0]=Ji(xt[0][1]),B=-1,G=xt.length}}}}function Ao(Xe){var $e,at,ft,_t,xt,B,G=Xe.length,H={},te={};for($e=0;$e<G;++$e)ft=(at=Xe[$e]).ring[0],xt=at.ring[at.ring.length-1],ft[0]!==xt[0]||ft[1]!==xt[1]?(at.index=$e,H[ft]=te[xt]=at):(at.polygon.push(at.ring),Xe[$e]=null);for($e=0;$e<G;++$e)if(at=Xe[$e]){if(ft=at.ring[0],xt=at.ring[at.ring.length-1],_t=te[ft],B=H[xt],delete H[ft],delete te[xt],ft[0]===xt[0]&&ft[1]===xt[1]){at.polygon.push(at.ring);continue}_t?(delete te[ft],delete H[_t.ring[0]],_t.ring.pop(),Xe[_t.index]=null,at={index:-1,polygon:_t.polygon,ring:_t.ring.concat(at.ring)},_t===B?at.polygon.push(at.ring):(at.index=G++,Xe.push(H[at.ring[0]]=te[at.ring[at.ring.length-1]]=at))):B?(delete H[xt],delete te[B.ring[B.ring.length-1]],at.ring.pop(),at={index:G++,polygon:B.polygon,ring:at.ring.concat(B.ring)},Xe[B.index]=null,Xe.push(H[at.ring[0]]=te[at.ring[at.ring.length-1]]=at)):(at.ring.push(at.ring[0]),at.polygon.push(at.ring))}}function Ha(Xe){var $e={type:"Feature",geometry:Da(Xe.geometry)};return Xe.id!=null&&($e.id=Xe.id),Xe.bbox!=null&&($e.bbox=Xe.bbox),Xe.properties!=null&&($e.properties=Xe.properties),$e}function Da(Xe){if(Xe==null)return Xe;var $e,at,ft,_t;switch(Xe.type){case"GeometryCollection":$e={type:"GeometryCollection",geometries:Xe.geometries.map(Da)};break;case"Point":$e={type:"Point",coordinates:Ho(Xe.coordinates)};break;case"MultiPoint":case"LineString":$e={type:Xe.type,coordinates:co(Xe.coordinates)};break;case"MultiLineString":$e={type:"MultiLineString",coordinates:Xe.coordinates.map(co)};break;case"Polygon":var xt=[];_a(Xe.coordinates,xt,at=[]),Ao(at),$e={type:"Polygon",coordinates:xt};break;case"MultiPolygon":at=[],ft=-1,_t=Xe.coordinates.length;for(var B=new Array(_t);++ft<_t;)_a(Xe.coordinates[ft],B[ft]=[],at);Ao(at),$e={type:"MultiPolygon",coordinates:B.filter(ys)};break;default:return Xe}return Xe.bbox!=null&&($e.bbox=Xe.bbox),$e}function qo(Xe){if(Xe==null)return Xe;switch(Xe.type){case"Feature":return Ha(Xe);case"FeatureCollection":var $e={type:"FeatureCollection",features:Xe.features.map(Ha)};return Xe.bbox!=null&&($e.bbox=Xe.bbox),$e;default:return Da(Xe)}}function Ki(Xe,$e){var at=h($e/2),ft=u(y*at);return[Xe*(.74482-.34588*ft*ft),1.70711*at]}function Fa(){return(0,S.Z)(Ki).scale(146.153)}function ii(Xe,$e,at){var ft=(0,$o.Z)($e,at),_t=ft(.5),xt=(0,nt.Z)([-_t[0],-_t[1]])($e),B=ft.distance/2,G=-E(u(xt[1]*_)/u(B)),H=[-_t[0],-_t[1],-(xt[0]>0?v-G:G)*M],te=(0,S.Z)(Xe(B)).rotate(H),me=(0,nt.Z)(H),Le=te.center;return delete te.rotate,te.center=function(Be){return arguments.length?Le(me(Be)):me.invert(Le())},te.clipAngle(90)}function xs(Xe){var $e=b(Xe);function at(ft,_t){var xt=(0,Kr.M)(ft,_t);return xt[0]*=$e,xt}return at.invert=function(ft,_t){return Kr.M.invert(ft/$e,_t)},at}function Ea(){return Ba([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Ba(Xe,$e){return ii(xs,Xe,$e)}function $a(Xe){if(!(Xe*=2))return Q.N;var $e=-Xe/2,at=-$e,ft=Xe*Xe,_t=h(at),xt=.5/u(at);function B(G,H){var te=L(b(H)*b(G-$e)),me=L(b(H)*b(G-at));return[((te*=te)-(me*=me))/(2*Xe),(H<0?-1:1)*C(4*ft*me-(ft-te+me)*(ft-te+me))/(2*Xe)]}return B.invert=function(G,H){var te,me,Le=H*H,Be=b(C(Le+(te=G+$e)*te)),qe=b(C(Le+(te=G+at)*te));return[T(me=Be-qe,te=(Be+qe)*_t),(H<0?-1:1)*L(C(te*te+me*me)*xt)]},B}function fa(){return ri([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function ri(Xe,$e){return ii($a,Xe,$e)}function Vi(Xe,$e){if(k($e)<f)return[Xe,0];var at=k($e/g),ft=E(at);if(k(Xe)<f||k(k($e)-g)<f)return[0,i($e)*v*h(ft/2)];var _t=b(ft),xt=k(v/Xe-Xe/v)/2,B=xt*xt,G=_t/(at+_t-1),H=G*(2/at-1),te=H*H,me=te+B,Le=G-te,Be=B+G;return[i(Xe)*v*(xt*Le+C(B*Le*Le-me*(G*G-te)))/me,i($e)*v*(H*Be-xt*C((B+1)*me-Be*Be))/me]}function qa(){return(0,S.Z)(Vi).scale(79.4183)}function ha(Xe,$e){if(k($e)<f)return[Xe,0];var at=k($e/g),ft=E(at);if(k(Xe)<f||k(k($e)-g)<f)return[0,i($e)*v*h(ft/2)];var _t=b(ft),xt=k(v/Xe-Xe/v)/2,B=xt*xt,G=_t*(C(1+B)-xt*_t)/(1+B*at*at);return[i(Xe)*v*G,i($e)*v*C(1-G*(2*xt+G))]}function Qa(){return(0,S.Z)(ha).scale(79.4183)}function Mo(Xe,$e){if(k($e)<f)return[Xe,0];var at=$e/g,ft=E(at);if(k(Xe)<f||k(k($e)-g)<f)return[0,v*h(ft/2)];var _t=(v/Xe-Xe/v)/2,xt=at/(1+b(ft));return[v*(i(Xe)*C(_t*_t+1-xt*xt)-_t),v*xt]}function fo(){return(0,S.Z)(Mo).scale(79.4183)}function $i(Xe,$e){if(!$e)return[Xe,0];var at=k($e);if(!Xe||at===g)return[0,$e];var ft=at/g,_t=ft*ft,xt=(8*ft-_t*(_t+2)-5)/(2*_t*(ft-1)),B=xt*xt,G=ft*xt,H=_t+B+2*G,te=ft+3*xt,me=Xe/g,Le=me+1/me,Be=i(k(Xe)-g)*C(Le*Le-4),qe=Be*Be,et=(Be*(H+B-1)+2*C(H*(_t+B*qe-1)+(1-_t)*(_t*(te*te+4*B)+12*G*B+4*B*B)))/(4*H+qe);return[i(Xe)*g*et,i($e)*g*C(1+Be*k(et)-et*et)]}function Na(){return(0,S.Z)($i).scale(127.16)}function Lr(Xe,$e,at,ft){var _t=v/3;Xe=o(Xe,f),$e=o($e,f),Xe=r(Xe,g),$e=r($e,v-f),at=o(at,0),at=r(at,99.999999);var xt=(ft=o(ft,f))/100,B=L((at/100+1)*b(_t))/_t,G=u(Xe)/u(B*g),H=$e/v,te=C(xt*u(Xe/2)/u($e/2));return function(me,Le,Be,qe,et){function mt(bt,ee){var he=Be*u(qe*ee),Me=C(1-he*he),Oe=C(2/(1+Me*b(bt*=et)));return[me*Me*Oe*u(bt),Le*he*Oe]}return mt.invert=function(bt,ee){var he=bt/me,Me=ee/Le,Oe=C(he*he+Me*Me),Fe=2*E(Oe/2);return[T(bt*h(Fe),me*Oe)/et,Oe&&E(ee*u(Fe)/(Le*Be*Oe))/qe]},mt}(te/C(H*G*B),1/(te*C(H*G*B)),G,B,H)}function Ir(){var Xe=65*_,$e=60*_,at=20,ft=200,_t=(0,S.r)(Lr),xt=_t(Xe,$e,at,ft);return xt.poleline=function(B){return arguments.length?_t(Xe=+B*_,$e,at,ft):Xe*M},xt.parallels=function(B){return arguments.length?_t(Xe,$e=+B*_,at,ft):$e*M},xt.inflation=function(B){return arguments.length?_t(Xe,$e,at=+B,ft):at},xt.ratio=function(B){return arguments.length?_t(Xe,$e,at,ft=+B):ft},xt.scale(163.775)}function rs(){return Ir().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}Ki.invert=function(Xe,$e){var at=$e/1.70711,ft=u(y*at);return[Xe/(.74482-.34588*ft*ft),2*l(at)]},Vi.invert=function(Xe,$e){if(k($e)<f)return[Xe,0];if(k(Xe)<f)return[0,g*u(2*l($e/v))];var at=(Xe/=v)*Xe,ft=($e/=v)*$e,_t=at+ft,xt=_t*_t,B=-k($e)*(1+_t),G=B-2*ft+at,H=-2*B+1+2*ft+xt,te=ft/H+(2*G*G*G/(H*H*H)-9*B*G/(H*H))/27,me=(B-G*G/(3*H))/H,Le=2*C(-me/3),Be=L(3*te/(me*Le))/3;return[v*(_t-1+C(1+2*(at-ft)+xt))/(2*Xe),i($e)*v*(-Le*b(Be+v/3)-G/(3*H))]},ha.invert=function(Xe,$e){if(!Xe)return[0,g*u(2*l($e/v))];var at=k(Xe/v),ft=(1-at*at-($e/=v)*$e)/(2*at),_t=C(ft*ft+1);return[i(Xe)*v*(_t-ft),i($e)*g*u(2*T(C((1-2*ft*at)*(ft+_t)-at),C(_t+ft+at)))]},Mo.invert=function(Xe,$e){if(!$e)return[Xe,0];var at=$e/v,ft=(v*v*(1-at*at)-Xe*Xe)/(2*v*Xe);return[Xe?v*(i(Xe)*C(ft*ft+1)-ft):0,g*u(2*l(at))]},$i.invert=function(Xe,$e){var at;if(!Xe||!$e)return[Xe,$e];$e/=v;var ft=i(Xe)*Xe/g,_t=(ft*ft-1+4*$e*$e)/k(ft),xt=_t*_t,B=2*$e,G=50;do{var H=B*B,te=(8*B-H*(H+2)-5)/(2*H*(B-1)),me=(3*B-H*B-10)/(2*H*B),Le=te*te,Be=B*te,qe=B+te,et=qe*qe,mt=B+3*te,bt=-2*qe*(4*Be*Le+(1-4*H+3*H*H)*(1+me)+Le*(14*H-6-xt+(8*H-8-2*xt)*me)+Be*(12*H-8+(10*H-10-xt)*me)),ee=C(et*(H+Le*xt-1)+(1-H)*(H*(mt*mt+4*Le)+Le*(12*Be+4*Le)));B-=at=(_t*(et+Le-1)+2*ee-ft*(4*et+xt))/(_t*(2*te*me+2*qe*(1+me))+bt/ee-8*qe*(_t*(-1+Le+et)+2*ee)*(1+me)/(xt+4*et))}while(at>f&&--G>0);return[i(Xe)*(C(_t*_t+4)+_t)*v/4,g*B]};var ho=4*v+3*C(3),Ga=2*C(2*v*C(3)/ho),Qi=_e(Ga*C(3)/v,Ga,ho/6);function zs(){return(0,S.Z)(Qi).scale(176.84)}function pa(Xe,$e){return[Xe*C(1-3*$e*$e/(v*v)),$e]}function is(){return(0,S.Z)(pa).scale(152.63)}function po(Xe,$e){var at=b($e),ft=b(Xe)*at,_t=1-ft,xt=b(Xe=T(u(Xe)*at,-u($e))),B=u(Xe);return[B*(at=C(1-ft*ft))-xt*_t,-xt*at-B*_t]}function li(){return(0,S.Z)(po).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function di(Xe,$e){var at=V(Xe,$e);return[(at[0]+Xe/g)/2,(at[1]+$e)/2]}function Rs(){return(0,S.Z)(di).scale(158.837)}pa.invert=function(Xe,$e){return[Xe/C(1-3*$e*$e/(v*v)),$e]},po.invert=function(Xe,$e){var at=(Xe*Xe+$e*$e)/-2,ft=C(-at*(2+at)),_t=$e*at+Xe*ft,xt=Xe*at-$e*ft,B=C(xt*xt+_t*_t);return[T(ft*_t,B*(1+at)),B?-E(ft*xt/B):0]},di.invert=function(Xe,$e){var at=Xe,ft=$e,_t=25;do{var xt,B=b(ft),G=u(ft),H=u(2*ft),te=G*G,me=B*B,Le=u(at),Be=b(at/2),qe=u(at/2),et=qe*qe,mt=1-me*Be*Be,bt=mt?L(B*Be)*C(xt=1/mt):xt=0,ee=.5*(2*bt*B*qe+at/g)-Xe,he=.5*(bt*G+ft)-$e,Me=.5*xt*(me*et+bt*B*Be*te)+.5/g,Oe=xt*(Le*H/4-bt*G*qe),Fe=.125*xt*(H*qe-bt*G*me*Le),Ue=.5*xt*(te*Be+bt*et*B)+.5,Ge=Oe*Fe-Ue*Me,Je=(he*Oe-ee*Ue)/Ge,rt=(ee*Fe-he*Me)/Ge;at-=Je,ft-=rt}while((k(Je)>f||k(rt)>f)&&--_t>0);return[at,ft]}},33940:function(K,z,e){function S(){return new k}function k(){this.reset()}e.d(z,{Z:function(){return S}}),k.prototype={constructor:k,reset:function(){this.s=this.t=0},add:function(b){T(l,b,this.t),T(this,l.s,this.s),this.s?this.t+=l.t:this.s=l.t},valueOf:function(){return this.s}};var l=new k;function T(b,d,s){var t=b.s=d+s,o=t-d,r=t-o;b.t=d-r+(s-o)}},97860:function(K,z,e){e.d(z,{L9:function(){return r},ZP:function(){return x},gL:function(){return a}});var S,k,l,T,b,d=e(33940),s=e(39695),t=e(73182),o=e(72736),r=(0,d.Z)(),n=(0,d.Z)(),a={point:t.Z,lineStart:t.Z,lineEnd:t.Z,polygonStart:function(){r.reset(),a.lineStart=i,a.lineEnd=u},polygonEnd:function(){var v=+r;n.add(v<0?s.BZ+v:v),this.lineStart=this.lineEnd=this.point=t.Z},sphere:function(){n.add(s.BZ)}};function i(){a.point=h}function u(){f(S,k)}function h(v,g){a.point=f,S=v,k=g,v*=s.uR,g*=s.uR,l=v,T=(0,s.mC)(g=g/2+s.pu),b=(0,s.O$)(g)}function f(v,g){v*=s.uR,g=(g*=s.uR)/2+s.pu;var y=v-l,p=y>=0?1:-1,m=p*y,w=(0,s.mC)(g),c=(0,s.O$)(g),M=b*c,_=T*w+M*(0,s.mC)(m),E=M*p*(0,s.O$)(m);r.add((0,s.fv)(E,_)),l=v,T=w,b=c}function x(v){return n.reset(),(0,o.Z)(v,a),2*n}},77338:function(K,z,e){e.d(z,{Z:function(){return L}});var S,k,l,T,b,d,s,t,o,r,n=e(33940),a=e(97860),i=e(7620),u=e(39695),h=e(72736),f=(0,n.Z)(),x={point:v,lineStart:y,lineEnd:p,polygonStart:function(){x.point=m,x.lineStart=w,x.lineEnd=c,f.reset(),a.gL.polygonStart()},polygonEnd:function(){a.gL.polygonEnd(),x.point=v,x.lineStart=y,x.lineEnd=p,a.L9<0?(S=-(l=180),k=-(T=90)):f>u.Ho?T=90:f<-u.Ho&&(k=-90),r[0]=S,r[1]=l},sphere:function(){S=-(l=180),k=-(T=90)}};function v(C,O){o.push(r=[S=C,l=C]),O<k&&(k=O),O>T&&(T=O)}function g(C,O){var I=(0,i.Og)([C*u.uR,O*u.uR]);if(t){var N=(0,i.T5)(t,I),R=[N[1],-N[0],0],V=(0,i.T5)(R,N);(0,i.iJ)(V),V=(0,i.Y1)(V);var F,D=C-b,U=D>0?1:-1,j=V[0]*u.RW*U,J=(0,u.Wn)(D)>180;J^(U*b<j&&j<U*C)?(F=V[1]*u.RW)>T&&(T=F):J^(U*b<(j=(j+360)%360-180)&&j<U*C)?(F=-V[1]*u.RW)<k&&(k=F):(O<k&&(k=O),O>T&&(T=O)),J?C<b?M(S,C)>M(S,l)&&(l=C):M(C,l)>M(S,l)&&(S=C):l>=S?(C<S&&(S=C),C>l&&(l=C)):C>b?M(S,C)>M(S,l)&&(l=C):M(C,l)>M(S,l)&&(S=C)}else o.push(r=[S=C,l=C]);O<k&&(k=O),O>T&&(T=O),t=I,b=C}function y(){x.point=g}function p(){r[0]=S,r[1]=l,x.point=v,t=null}function m(C,O){if(t){var I=C-b;f.add((0,u.Wn)(I)>180?I+(I>0?360:-360):I)}else d=C,s=O;a.gL.point(C,O),g(C,O)}function w(){a.gL.lineStart()}function c(){m(d,s),a.gL.lineEnd(),(0,u.Wn)(f)>u.Ho&&(S=-(l=180)),r[0]=S,r[1]=l,t=null}function M(C,O){return(O-=C)<0?O+360:O}function _(C,O){return C[0]-O[0]}function E(C,O){return C[0]<=C[1]?C[0]<=O&&O<=C[1]:O<C[0]||C[1]<O}function L(C){var O,I,N,R,V,F,D;if(T=l=-(S=k=1/0),o=[],(0,h.Z)(C,x),I=o.length){for(o.sort(_),O=1,V=[N=o[0]];O<I;++O)E(N,(R=o[O])[0])||E(N,R[1])?(M(N[0],R[1])>M(N[0],N[1])&&(N[1]=R[1]),M(R[0],N[1])>M(N[0],N[1])&&(N[0]=R[0])):V.push(N=R);for(F=-1/0,O=0,N=V[I=V.length-1];O<=I;N=R,++O)R=V[O],(D=M(N[1],R[0]))>F&&(F=D,S=R[0],l=N[1])}return o=r=null,S===1/0||k===1/0?[[NaN,NaN],[NaN,NaN]]:[[S,k],[l,T]]}},7620:function(K,z,e){e.d(z,{Og:function(){return l},T:function(){return s},T5:function(){return b},Y1:function(){return k},iJ:function(){return t},j9:function(){return T},s0:function(){return d}});var S=e(39695);function k(o){return[(0,S.fv)(o[1],o[0]),(0,S.ZR)(o[2])]}function l(o){var r=o[0],n=o[1],a=(0,S.mC)(n);return[a*(0,S.mC)(r),a*(0,S.O$)(r),(0,S.O$)(n)]}function T(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]}function b(o,r){return[o[1]*r[2]-o[2]*r[1],o[2]*r[0]-o[0]*r[2],o[0]*r[1]-o[1]*r[0]]}function d(o,r){o[0]+=r[0],o[1]+=r[1],o[2]+=r[2]}function s(o,r){return[o[0]*r,o[1]*r,o[2]*r]}function t(o){var r=(0,S._b)(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]);o[0]/=r,o[1]/=r,o[2]/=r}},66624:function(K,z,e){e.d(z,{Z:function(){return I}});var S,k,l,T,b,d,s,t,o,r,n,a,i,u,h,f,x=e(39695),v=e(73182),g=e(72736),y={sphere:v.Z,point:p,lineStart:w,lineEnd:_,polygonStart:function(){y.lineStart=E,y.lineEnd=L},polygonEnd:function(){y.lineStart=w,y.lineEnd=_}};function p(N,R){N*=x.uR,R*=x.uR;var V=(0,x.mC)(R);m(V*(0,x.mC)(N),V*(0,x.O$)(N),(0,x.O$)(R))}function m(N,R,V){++S,l+=(N-l)/S,T+=(R-T)/S,b+=(V-b)/S}function w(){y.point=c}function c(N,R){N*=x.uR,R*=x.uR;var V=(0,x.mC)(R);u=V*(0,x.mC)(N),h=V*(0,x.O$)(N),f=(0,x.O$)(R),y.point=M,m(u,h,f)}function M(N,R){N*=x.uR,R*=x.uR;var V=(0,x.mC)(R),F=V*(0,x.mC)(N),D=V*(0,x.O$)(N),U=(0,x.O$)(R),j=(0,x.fv)((0,x._b)((j=h*U-f*D)*j+(j=f*F-u*U)*j+(j=u*D-h*F)*j),u*F+h*D+f*U);k+=j,d+=j*(u+(u=F)),s+=j*(h+(h=D)),t+=j*(f+(f=U)),m(u,h,f)}function _(){y.point=p}function E(){y.point=C}function L(){O(a,i),y.point=p}function C(N,R){a=N,i=R,N*=x.uR,R*=x.uR,y.point=O;var V=(0,x.mC)(R);u=V*(0,x.mC)(N),h=V*(0,x.O$)(N),f=(0,x.O$)(R),m(u,h,f)}function O(N,R){N*=x.uR,R*=x.uR;var V=(0,x.mC)(R),F=V*(0,x.mC)(N),D=V*(0,x.O$)(N),U=(0,x.O$)(R),j=h*U-f*D,J=f*F-u*U,X=u*D-h*F,Z=(0,x._b)(j*j+J*J+X*X),Y=(0,x.ZR)(Z),W=Z&&-Y/Z;o+=W*j,r+=W*J,n+=W*X,k+=Y,d+=Y*(u+(u=F)),s+=Y*(h+(h=D)),t+=Y*(f+(f=U)),m(u,h,f)}function I(N){S=k=l=T=b=d=s=t=o=r=n=0,(0,g.Z)(N,y);var R=o,V=r,F=n,D=R*R+V*V+F*F;return D<x.aW&&(R=d,V=s,F=t,k<x.Ho&&(R=l,V=T,F=b),(D=R*R+V*V+F*F)<x.aW)?[NaN,NaN]:[(0,x.fv)(V,R)*x.RW,(0,x.ZR)(F/(0,x._b)(D))*x.RW]}},7613:function(K,z,e){e.d(z,{m:function(){return b},Z:function(){return s}});var S=e(7620);function k(t){return function(){return t}}var l=e(39695),T=e(49386);function b(t,o,r,n,a,i){if(r){var u=(0,l.mC)(o),h=(0,l.O$)(o),f=n*r;a==null?(a=o+n*l.BZ,i=o-f/2):(a=d(u,a),i=d(u,i),(n>0?a<i:a>i)&&(a+=n*l.BZ));for(var x,v=a;n>0?v>i:v<i;v-=f)x=(0,S.Y1)([u,-h*(0,l.mC)(v),-h*(0,l.O$)(v)]),t.point(x[0],x[1])}}function d(t,o){(o=(0,S.Og)(o))[0]-=t,(0,S.iJ)(o);var r=(0,l.Kh)(-o[1]);return((-o[2]<0?-r:r)+l.BZ-l.Ho)%l.BZ}function s(){var t,o,r=k([0,0]),n=k(90),a=k(6),i={point:function(h,f){t.push(h=o(h,f)),h[0]*=l.RW,h[1]*=l.RW}};function u(){var h=r.apply(this,arguments),f=n.apply(this,arguments)*l.uR,x=a.apply(this,arguments)*l.uR;return t=[],o=(0,T.I)(-h[0]*l.uR,-h[1]*l.uR,0).invert,b(i,f,x,1),h={type:"Polygon",coordinates:[t]},t=o=null,h}return u.center=function(h){return arguments.length?(r=typeof h=="function"?h:k([+h[0],+h[1]]),u):r},u.radius=function(h){return arguments.length?(n=typeof h=="function"?h:k(+h),u):n},u.precision=function(h){return arguments.length?(a=typeof h=="function"?h:k(+h),u):a},u}},87070:function(K,z,e){var S=e(97023),k=e(39695);z.Z=(0,S.Z)(function(){return!0},function(l){var T,b=NaN,d=NaN,s=NaN;return{lineStart:function(){l.lineStart(),T=1},point:function(t,o){var r=t>0?k.pi:-k.pi,n=(0,k.Wn)(t-b);(0,k.Wn)(n-k.pi)<k.Ho?(l.point(b,d=(d+o)/2>0?k.ou:-k.ou),l.point(s,d),l.lineEnd(),l.lineStart(),l.point(r,d),l.point(t,d),T=0):s!==r&&n>=k.pi&&((0,k.Wn)(b-s)<k.Ho&&(b-=s*k.Ho),(0,k.Wn)(t-r)<k.Ho&&(t-=r*k.Ho),d=function(a,i,u,h){var f,x,v=(0,k.O$)(a-u);return(0,k.Wn)(v)>k.Ho?(0,k.z4)(((0,k.O$)(i)*(x=(0,k.mC)(h))*(0,k.O$)(u)-(0,k.O$)(h)*(f=(0,k.mC)(i))*(0,k.O$)(a))/(f*x*v)):(i+h)/2}(b,d,t,o),l.point(s,d),l.lineEnd(),l.lineStart(),l.point(r,d),T=0),l.point(b=t,d=o),s=r},lineEnd:function(){l.lineEnd(),b=d=NaN},clean:function(){return 2-T}}},function(l,T,b,d){var s;if(l==null)s=b*k.ou,d.point(-k.pi,s),d.point(0,s),d.point(k.pi,s),d.point(k.pi,0),d.point(k.pi,-s),d.point(0,-s),d.point(-k.pi,-s),d.point(-k.pi,0),d.point(-k.pi,s);else if((0,k.Wn)(l[0]-T[0])>k.Ho){var t=l[0]<T[0]?k.pi:-k.pi;s=b*t/2,d.point(-t,s),d.point(0,s),d.point(t,s)}else d.point(T[0],T[1])},[-k.pi,-k.ou])},85272:function(K,z,e){e.d(z,{Z:function(){return k}});var S=e(73182);function k(){var l,T=[];return{point:function(b,d,s){l.push([b,d,s])},lineStart:function(){T.push(l=[])},lineEnd:S.Z,rejoin:function(){T.length>1&&T.push(T.pop().concat(T.shift()))},result:function(){var b=T;return T=[],l=null,b}}}},1457:function(K,z,e){e.d(z,{Z:function(){return d}});var S=e(7620),k=e(7613),l=e(39695),T=e(67108),b=e(97023);function d(s){var t=(0,l.mC)(s),o=6*l.uR,r=t>0,n=(0,l.Wn)(t)>l.Ho;function a(h,f){return(0,l.mC)(h)*(0,l.mC)(f)>t}function i(h,f,x){var v=(0,S.Og)(h),g=(0,S.Og)(f),y=[1,0,0],p=(0,S.T5)(v,g),m=(0,S.j9)(p,p),w=p[0],c=m-w*w;if(!c)return!x&&h;var M=t*m/c,_=-t*w/c,E=(0,S.T5)(y,p),L=(0,S.T)(y,M),C=(0,S.T)(p,_);(0,S.s0)(L,C);var O=E,I=(0,S.j9)(L,O),N=(0,S.j9)(O,O),R=I*I-N*((0,S.j9)(L,L)-1);if(!(R<0)){var V=(0,l._b)(R),F=(0,S.T)(O,(-I-V)/N);if((0,S.s0)(F,L),F=(0,S.Y1)(F),!x)return F;var D,U=h[0],j=f[0],J=h[1],X=f[1];j<U&&(D=U,U=j,j=D);var Z=j-U,Y=(0,l.Wn)(Z-l.pi)<l.Ho;if(!Y&&X<J&&(D=J,J=X,X=D),Y||Z<l.Ho?Y?J+X>0^F[1]<((0,l.Wn)(F[0]-U)<l.Ho?J:X):J<=F[1]&&F[1]<=X:Z>l.pi^(U<=F[0]&&F[0]<=j)){var W=(0,S.T)(O,(-I+V)/N);return(0,S.s0)(W,L),[F,(0,S.Y1)(W)]}}}function u(h,f){var x=r?s:l.pi-s,v=0;return h<-x?v|=1:h>x&&(v|=2),f<-x?v|=4:f>x&&(v|=8),v}return(0,b.Z)(a,function(h){var f,x,v,g,y;return{lineStart:function(){g=v=!1,y=1},point:function(p,m){var w,c=[p,m],M=a(p,m),_=r?M?0:u(p,m):M?u(p+(p<0?l.pi:-l.pi),m):0;if(!f&&(g=v=M)&&h.lineStart(),M!==v&&(!(w=i(f,c))||(0,T.Z)(f,w)||(0,T.Z)(c,w))&&(c[2]=1),M!==v)y=0,M?(h.lineStart(),w=i(c,f),h.point(w[0],w[1])):(w=i(f,c),h.point(w[0],w[1],2),h.lineEnd()),f=w;else if(n&&f&&r^M){var E;_&x||!(E=i(c,f,!0))||(y=0,r?(h.lineStart(),h.point(E[0][0],E[0][1]),h.point(E[1][0],E[1][1]),h.lineEnd()):(h.point(E[1][0],E[1][1]),h.lineEnd(),h.lineStart(),h.point(E[0][0],E[0][1],3)))}!M||f&&(0,T.Z)(f,c)||h.point(c[0],c[1]),f=c,v=M,x=_},lineEnd:function(){v&&h.lineEnd(),f=null},clean:function(){return y|(g&&v)<<1}}},function(h,f,x,v){(0,k.m)(v,s,o,x,h,f)},r?[0,-s]:[-l.pi,s-l.pi])}},97023:function(K,z,e){e.d(z,{Z:function(){return d}});var S=e(85272),k=e(46225),l=e(39695),T=e(23071),b=e(33064);function d(o,r,n,a){return function(i){var u,h,f,x=r(i),v=(0,S.Z)(),g=r(v),y=!1,p={point:m,lineStart:c,lineEnd:M,polygonStart:function(){p.point=_,p.lineStart=E,p.lineEnd=L,h=[],u=[]},polygonEnd:function(){p.point=m,p.lineStart=c,p.lineEnd=M,h=(0,b.TS)(h);var C=(0,T.Z)(u,a);h.length?(y||(i.polygonStart(),y=!0),(0,k.Z)(h,t,C,n,i)):C&&(y||(i.polygonStart(),y=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),y&&(i.polygonEnd(),y=!1),h=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function m(C,O){o(C,O)&&i.point(C,O)}function w(C,O){x.point(C,O)}function c(){p.point=w,x.lineStart()}function M(){p.point=m,x.lineEnd()}function _(C,O){f.push([C,O]),g.point(C,O)}function E(){g.lineStart(),f=[]}function L(){_(f[0][0],f[0][1]),g.lineEnd();var C,O,I,N,R=g.clean(),V=v.result(),F=V.length;if(f.pop(),u.push(f),f=null,F)if(1&R){if((O=(I=V[0]).length-1)>0){for(y||(i.polygonStart(),y=!0),i.lineStart(),C=0;C<O;++C)i.point((N=I[C])[0],N[1]);i.lineEnd()}}else F>1&&2&R&&V.push(V.pop().concat(V.shift())),h.push(V.filter(s))}return p}}function s(o){return o.length>1}function t(o,r){return((o=o.x)[0]<0?o[1]-l.ou-l.Ho:l.ou-o[1])-((r=r.x)[0]<0?r[1]-l.ou-l.Ho:l.ou-r[1])}},87605:function(K,z,e){e.d(z,{Z:function(){return s}});var S=e(39695),k=e(85272),l=e(46225),T=e(33064),b=1e9,d=-b;function s(t,o,r,n){function a(x,v){return t<=x&&x<=r&&o<=v&&v<=n}function i(x,v,g,y){var p=0,m=0;if(x==null||(p=u(x,g))!==(m=u(v,g))||f(x,v)<0^g>0)do y.point(p===0||p===3?t:r,p>1?n:o);while((p=(p+g+4)%4)!==m);else y.point(v[0],v[1])}function u(x,v){return(0,S.Wn)(x[0]-t)<S.Ho?v>0?0:3:(0,S.Wn)(x[0]-r)<S.Ho?v>0?2:1:(0,S.Wn)(x[1]-o)<S.Ho?v>0?1:0:v>0?3:2}function h(x,v){return f(x.x,v.x)}function f(x,v){var g=u(x,1),y=u(v,1);return g!==y?g-y:g===0?v[1]-x[1]:g===1?x[0]-v[0]:g===2?x[1]-v[1]:v[0]-x[0]}return function(x){var v,g,y,p,m,w,c,M,_,E,L,C=x,O=(0,k.Z)(),I={point:N,lineStart:function(){I.point=R,g&&g.push(y=[]),E=!0,_=!1,c=M=NaN},lineEnd:function(){v&&(R(p,m),w&&_&&O.rejoin(),v.push(O.result())),I.point=N,_&&C.lineEnd()},polygonStart:function(){C=O,v=[],g=[],L=!0},polygonEnd:function(){var V=function(){for(var U=0,j=0,J=g.length;j<J;++j)for(var X,Z,Y=g[j],W=1,Q=Y.length,ne=Y[0],re=ne[0],ie=ne[1];W<Q;++W)X=re,Z=ie,re=(ne=Y[W])[0],ie=ne[1],Z<=n?ie>n&&(re-X)*(n-Z)>(ie-Z)*(t-X)&&++U:ie<=n&&(re-X)*(n-Z)<(ie-Z)*(t-X)&&--U;return U}(),F=L&&V,D=(v=(0,T.TS)(v)).length;(F||D)&&(x.polygonStart(),F&&(x.lineStart(),i(null,null,1,x),x.lineEnd()),D&&(0,l.Z)(v,h,V,i,x),x.polygonEnd()),C=x,v=g=y=null}};function N(V,F){a(V,F)&&C.point(V,F)}function R(V,F){var D=a(V,F);if(g&&y.push([V,F]),E)p=V,m=F,w=D,E=!1,D&&(C.lineStart(),C.point(V,F));else if(D&&_)C.point(V,F);else{var U=[c=Math.max(d,Math.min(b,c)),M=Math.max(d,Math.min(b,M))],j=[V=Math.max(d,Math.min(b,V)),F=Math.max(d,Math.min(b,F))];(function(J,X,Z,Y,W,Q){var ne,re=J[0],ie=J[1],se=0,ge=1,ue=X[0]-re,ce=X[1]-ie;if(ne=Z-re,ue||!(ne>0)){if(ne/=ue,ue<0){if(ne<se)return;ne<ge&&(ge=ne)}else if(ue>0){if(ne>ge)return;ne>se&&(se=ne)}if(ne=W-re,ue||!(ne<0)){if(ne/=ue,ue<0){if(ne>ge)return;ne>se&&(se=ne)}else if(ue>0){if(ne<se)return;ne<ge&&(ge=ne)}if(ne=Y-ie,ce||!(ne>0)){if(ne/=ce,ce<0){if(ne<se)return;ne<ge&&(ge=ne)}else if(ce>0){if(ne>ge)return;ne>se&&(se=ne)}if(ne=Q-ie,ce||!(ne<0)){if(ne/=ce,ce<0){if(ne>ge)return;ne>se&&(se=ne)}else if(ce>0){if(ne<se)return;ne<ge&&(ge=ne)}return se>0&&(J[0]=re+se*ue,J[1]=ie+se*ce),ge<1&&(X[0]=re+ge*ue,X[1]=ie+ge*ce),!0}}}}})(U,j,t,o,r,n)?(_||(C.lineStart(),C.point(U[0],U[1])),C.point(j[0],j[1]),D||C.lineEnd(),L=!1):D&&(C.lineStart(),C.point(V,F),L=!1)}c=V,M=F,_=D}return I}}},46225:function(K,z,e){e.d(z,{Z:function(){return T}});var S=e(67108),k=e(39695);function l(d,s,t,o){this.x=d,this.z=s,this.o=t,this.e=o,this.v=!1,this.n=this.p=null}function T(d,s,t,o,r){var n,a,i=[],u=[];if(d.forEach(function(y){if(!((p=y.length-1)<=0)){var p,m,w=y[0],c=y[p];if((0,S.Z)(w,c)){if(!w[2]&&!c[2]){for(r.lineStart(),n=0;n<p;++n)r.point((w=y[n])[0],w[1]);return void r.lineEnd()}c[0]+=2*k.Ho}i.push(m=new l(w,y,null,!0)),u.push(m.o=new l(w,null,m,!1)),i.push(m=new l(c,y,null,!1)),u.push(m.o=new l(c,null,m,!0))}}),i.length){for(u.sort(s),b(i),b(u),n=0,a=u.length;n<a;++n)u[n].e=t=!t;for(var h,f,x=i[0];;){for(var v=x,g=!0;v.v;)if((v=v.n)===x)return;h=v.z,r.lineStart();do{if(v.v=v.o.v=!0,v.e){if(g)for(n=0,a=h.length;n<a;++n)r.point((f=h[n])[0],f[1]);else o(v.x,v.n.x,1,r);v=v.n}else{if(g)for(h=v.p.z,n=h.length-1;n>=0;--n)r.point((f=h[n])[0],f[1]);else o(v.x,v.p.x,-1,r);v=v.p}h=(v=v.o).z,g=!g}while(!v.v);r.lineEnd()}}}function b(d){if(s=d.length){for(var s,t,o=0,r=d[0];++o<s;)r.n=t=d[o],t.p=r,r=t;r.n=t=d[0],t.p=r}}},96059:function(K,z,e){function S(k,l){function T(b,d){return b=k(b,d),l(b[0],b[1])}return k.invert&&l.invert&&(T.invert=function(b,d){return(b=l.invert(b,d))&&k.invert(b[0],b[1])}),T}e.d(z,{Z:function(){return S}})},8593:function(K,z,e){function S(k){return k}e.d(z,{Z:function(){return S}})},27362:function(K,z,e){e.r(z),e.d(z,{geoAlbers:function(){return kt},geoAlbersUsa:function(){return St},geoArea:function(){return S.ZP},geoAzimuthalEqualArea:function(){return vt.Z},geoAzimuthalEqualAreaRaw:function(){return vt.l},geoAzimuthalEquidistant:function(){return Mt.Z},geoAzimuthalEquidistantRaw:function(){return Mt.N},geoBounds:function(){return k.Z},geoCentroid:function(){return l.Z},geoCircle:function(){return T.Z},geoClipAntimeridian:function(){return b.Z},geoClipCircle:function(){return d.Z},geoClipExtent:function(){return t},geoClipRectangle:function(){return s.Z},geoConicConformal:function(){return pn},geoConicConformalRaw:function(){return Kt},geoConicEqualArea:function(){return At},geoConicEqualAreaRaw:function(){return gt},geoConicEquidistant:function(){return jn},geoConicEquidistantRaw:function(){return xn},geoContains:function(){return V},geoDistance:function(){return M},geoEqualEarth:function(){return kn},geoEqualEarthRaw:function(){return En},geoEquirectangular:function(){return nn.Z},geoEquirectangularRaw:function(){return nn.k},geoGnomonic:function(){return zn.Z},geoGnomonicRaw:function(){return zn.M},geoGraticule:function(){return j},geoGraticule10:function(){return J},geoIdentity:function(){return Bn},geoInterpolate:function(){return Q.Z},geoLength:function(){return m},geoMercator:function(){return jt},geoMercatorRaw:function(){return Ut},geoNaturalEarth1:function(){return er.Z},geoNaturalEarth1Raw:function(){return er.K},geoOrthographic:function(){return Xn.Z},geoOrthographicRaw:function(){return Xn.I},geoPath:function(){return We},geoProjection:function(){return it.Z},geoProjectionMutator:function(){return it.r},geoRotation:function(){return It.Z},geoStereographic:function(){return $n},geoStereographicRaw:function(){return ur},geoStream:function(){return f.Z},geoTransform:function(){return Fn.Z},geoTransverseMercator:function(){return hr},geoTransverseMercatorRaw:function(){return lr}});var S=e(97860),k=e(77338),l=e(66624),T=e(7613),b=e(87070),d=e(1457),s=e(87605);function t(){var Gt,hn,An,Tn=0,Rn=0,qn=960,Un=500;return An={stream:function(Yn){return Gt&&hn===Yn?Gt:Gt=(0,s.Z)(Tn,Rn,qn,Un)(hn=Yn)},extent:function(Yn){return arguments.length?(Tn=+Yn[0][0],Rn=+Yn[0][1],qn=+Yn[1][0],Un=+Yn[1][1],Gt=hn=null,An):[[Tn,Rn],[qn,Un]]}}}var o,r,n,a=e(23071),i=e(33940),u=e(39695),h=e(73182),f=e(72736),x=(0,i.Z)(),v={sphere:h.Z,point:h.Z,lineStart:function(){v.point=y,v.lineEnd=g},lineEnd:h.Z,polygonStart:h.Z,polygonEnd:h.Z};function g(){v.point=v.lineEnd=h.Z}function y(Gt,hn){Gt*=u.uR,hn*=u.uR,o=Gt,r=(0,u.O$)(hn),n=(0,u.mC)(hn),v.point=p}function p(Gt,hn){Gt*=u.uR,hn*=u.uR;var An=(0,u.O$)(hn),Tn=(0,u.mC)(hn),Rn=(0,u.Wn)(Gt-o),qn=(0,u.mC)(Rn),Un=Tn*(0,u.O$)(Rn),Yn=n*An-r*Tn*qn,or=r*An+n*Tn*qn;x.add((0,u.fv)((0,u._b)(Un*Un+Yn*Yn),or)),o=Gt,r=An,n=Tn}function m(Gt){return x.reset(),(0,f.Z)(Gt,v),+x}var w=[null,null],c={type:"LineString",coordinates:w};function M(Gt,hn){return w[0]=Gt,w[1]=hn,m(c)}var _={Feature:function(Gt,hn){return L(Gt.geometry,hn)},FeatureCollection:function(Gt,hn){for(var An=Gt.features,Tn=-1,Rn=An.length;++Tn<Rn;)if(L(An[Tn].geometry,hn))return!0;return!1}},E={Sphere:function(){return!0},Point:function(Gt,hn){return C(Gt.coordinates,hn)},MultiPoint:function(Gt,hn){for(var An=Gt.coordinates,Tn=-1,Rn=An.length;++Tn<Rn;)if(C(An[Tn],hn))return!0;return!1},LineString:function(Gt,hn){return O(Gt.coordinates,hn)},MultiLineString:function(Gt,hn){for(var An=Gt.coordinates,Tn=-1,Rn=An.length;++Tn<Rn;)if(O(An[Tn],hn))return!0;return!1},Polygon:function(Gt,hn){return I(Gt.coordinates,hn)},MultiPolygon:function(Gt,hn){for(var An=Gt.coordinates,Tn=-1,Rn=An.length;++Tn<Rn;)if(I(An[Tn],hn))return!0;return!1},GeometryCollection:function(Gt,hn){for(var An=Gt.geometries,Tn=-1,Rn=An.length;++Tn<Rn;)if(L(An[Tn],hn))return!0;return!1}};function L(Gt,hn){return!(!Gt||!E.hasOwnProperty(Gt.type))&&E[Gt.type](Gt,hn)}function C(Gt,hn){return M(Gt,hn)===0}function O(Gt,hn){for(var An,Tn,Rn,qn=0,Un=Gt.length;qn<Un;qn++){if((Tn=M(Gt[qn],hn))===0||qn>0&&(Rn=M(Gt[qn],Gt[qn-1]))>0&&An<=Rn&&Tn<=Rn&&(An+Tn-Rn)*(1-Math.pow((An-Tn)/Rn,2))<u.aW*Rn)return!0;An=Tn}return!1}function I(Gt,hn){return!!(0,a.Z)(Gt.map(N),R(hn))}function N(Gt){return(Gt=Gt.map(R)).pop(),Gt}function R(Gt){return[Gt[0]*u.uR,Gt[1]*u.uR]}function V(Gt,hn){return(Gt&&_.hasOwnProperty(Gt.type)?_[Gt.type]:L)(Gt,hn)}var F=e(33064);function D(Gt,hn,An){var Tn=(0,F.w6)(Gt,hn-u.Ho,An).concat(hn);return function(Rn){return Tn.map(function(qn){return[Rn,qn]})}}function U(Gt,hn,An){var Tn=(0,F.w6)(Gt,hn-u.Ho,An).concat(hn);return function(Rn){return Tn.map(function(qn){return[qn,Rn]})}}function j(){var Gt,hn,An,Tn,Rn,qn,Un,Yn,or,Jt,Mn,Rt,Zt=10,rn=Zt,Ln=90,Sn=360,wn=2.5;function ln(){return{type:"MultiLineString",coordinates:gn()}}function gn(){return(0,F.w6)((0,u.mD)(Tn/Ln)*Ln,An,Ln).map(Mn).concat((0,F.w6)((0,u.mD)(Yn/Sn)*Sn,Un,Sn).map(Rt)).concat((0,F.w6)((0,u.mD)(hn/Zt)*Zt,Gt,Zt).filter(function(un){return(0,u.Wn)(un%Ln)>u.Ho}).map(or)).concat((0,F.w6)((0,u.mD)(qn/rn)*rn,Rn,rn).filter(function(un){return(0,u.Wn)(un%Sn)>u.Ho}).map(Jt))}return ln.lines=function(){return gn().map(function(un){return{type:"LineString",coordinates:un}})},ln.outline=function(){return{type:"Polygon",coordinates:[Mn(Tn).concat(Rt(Un).slice(1),Mn(An).reverse().slice(1),Rt(Yn).reverse().slice(1))]}},ln.extent=function(un){return arguments.length?ln.extentMajor(un).extentMinor(un):ln.extentMinor()},ln.extentMajor=function(un){return arguments.length?(Tn=+un[0][0],An=+un[1][0],Yn=+un[0][1],Un=+un[1][1],Tn>An&&(un=Tn,Tn=An,An=un),Yn>Un&&(un=Yn,Yn=Un,Un=un),ln.precision(wn)):[[Tn,Yn],[An,Un]]},ln.extentMinor=function(un){return arguments.length?(hn=+un[0][0],Gt=+un[1][0],qn=+un[0][1],Rn=+un[1][1],hn>Gt&&(un=hn,hn=Gt,Gt=un),qn>Rn&&(un=qn,qn=Rn,Rn=un),ln.precision(wn)):[[hn,qn],[Gt,Rn]]},ln.step=function(un){return arguments.length?ln.stepMajor(un).stepMinor(un):ln.stepMinor()},ln.stepMajor=function(un){return arguments.length?(Ln=+un[0],Sn=+un[1],ln):[Ln,Sn]},ln.stepMinor=function(un){return arguments.length?(Zt=+un[0],rn=+un[1],ln):[Zt,rn]},ln.precision=function(un){return arguments.length?(wn=+un,or=D(qn,Rn,90),Jt=U(hn,Gt,wn),Mn=D(Yn,Un,90),Rt=U(Tn,An,wn),ln):wn},ln.extentMajor([[-180,-90+u.Ho],[180,90-u.Ho]]).extentMinor([[-180,-80-u.Ho],[180,80+u.Ho]])}function J(){return j()()}var X,Z,Y,W,Q=e(83074),ne=e(8593),re=(0,i.Z)(),ie=(0,i.Z)(),se={point:h.Z,lineStart:h.Z,lineEnd:h.Z,polygonStart:function(){se.lineStart=ge,se.lineEnd=le},polygonEnd:function(){se.lineStart=se.lineEnd=se.point=h.Z,re.add((0,u.Wn)(ie)),ie.reset()},result:function(){var Gt=re/2;return re.reset(),Gt}};function ge(){se.point=ue}function ue(Gt,hn){se.point=ce,X=Y=Gt,Z=W=hn}function ce(Gt,hn){ie.add(W*Gt-Y*hn),Y=Gt,W=hn}function le(){ce(X,Z)}var de,Ce,xe,_e,we=se,Ae=e(3559),$=0,oe=0,pe=0,ye=0,ke=0,De=0,Pe=0,Re=0,fe=0,ve={point:Te,lineStart:ze,lineEnd:nt,polygonStart:function(){ve.lineStart=tt,ve.lineEnd=ot},polygonEnd:function(){ve.point=Te,ve.lineStart=ze,ve.lineEnd=nt},result:function(){var Gt=fe?[Pe/fe,Re/fe]:De?[ye/De,ke/De]:pe?[$/pe,oe/pe]:[NaN,NaN];return $=oe=pe=ye=ke=De=Pe=Re=fe=0,Gt}};function Te(Gt,hn){$+=Gt,oe+=hn,++pe}function ze(){ve.point=He}function He(Gt,hn){ve.point=Ve,Te(xe=Gt,_e=hn)}function Ve(Gt,hn){var An=Gt-xe,Tn=hn-_e,Rn=(0,u._b)(An*An+Tn*Tn);ye+=Rn*(xe+Gt)/2,ke+=Rn*(_e+hn)/2,De+=Rn,Te(xe=Gt,_e=hn)}function nt(){ve.point=Te}function tt(){ve.point=pt}function ot(){Tt(de,Ce)}function pt(Gt,hn){ve.point=Tt,Te(de=xe=Gt,Ce=_e=hn)}function Tt(Gt,hn){var An=Gt-xe,Tn=hn-_e,Rn=(0,u._b)(An*An+Tn*Tn);ye+=Rn*(xe+Gt)/2,ke+=Rn*(_e+hn)/2,De+=Rn,Pe+=(Rn=_e*Gt-xe*hn)*(xe+Gt),Re+=Rn*(_e+hn),fe+=3*Rn,Te(xe=Gt,_e=hn)}var yt=ve;function dt(Gt){this._context=Gt}dt.prototype={_radius:4.5,pointRadius:function(Gt){return this._radius=Gt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(Gt,hn){switch(this._point){case 0:this._context.moveTo(Gt,hn),this._point=1;break;case 1:this._context.lineTo(Gt,hn);break;default:this._context.moveTo(Gt+this._radius,hn),this._context.arc(Gt,hn,this._radius,0,u.BZ)}},result:h.Z};var Pt,Et,Ot,Nt,zt,Ze=(0,i.Z)(),Ye={point:h.Z,lineStart:function(){Ye.point=je},lineEnd:function(){Pt&&Ke(Et,Ot),Ye.point=h.Z},polygonStart:function(){Pt=!0},polygonEnd:function(){Pt=null},result:function(){var Gt=+Ze;return Ze.reset(),Gt}};function je(Gt,hn){Ye.point=Ke,Et=Nt=Gt,Ot=zt=hn}function Ke(Gt,hn){Nt-=Gt,zt-=hn,Ze.add((0,u._b)(Nt*Nt+zt*zt)),Nt=Gt,zt=hn}var st=Ye;function Se(){this._string=[]}function Ie(Gt){return"m0,"+Gt+"a"+Gt+","+Gt+" 0 1,1 0,"+-2*Gt+"a"+Gt+","+Gt+" 0 1,1 0,"+2*Gt+"z"}function We(Gt,hn){var An,Tn,Rn=4.5;function qn(Un){return Un&&(typeof Rn=="function"&&Tn.pointRadius(+Rn.apply(this,arguments)),(0,f.Z)(Un,An(Tn))),Tn.result()}return qn.area=function(Un){return(0,f.Z)(Un,An(we)),we.result()},qn.measure=function(Un){return(0,f.Z)(Un,An(st)),st.result()},qn.bounds=function(Un){return(0,f.Z)(Un,An(Ae.Z)),Ae.Z.result()},qn.centroid=function(Un){return(0,f.Z)(Un,An(yt)),yt.result()},qn.projection=function(Un){return arguments.length?(An=Un==null?(Gt=null,ne.Z):(Gt=Un).stream,qn):Gt},qn.context=function(Un){return arguments.length?(Tn=Un==null?(hn=null,new Se):new dt(hn=Un),typeof Rn!="function"&&Tn.pointRadius(Rn),qn):hn},qn.pointRadius=function(Un){return arguments.length?(Rn=typeof Un=="function"?Un:(Tn.pointRadius(+Un),+Un),qn):Rn},qn.projection(Gt).context(hn)}Se.prototype={_radius:4.5,_circle:Ie(4.5),pointRadius:function(Gt){return(Gt=+Gt)!==this._radius&&(this._radius=Gt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(Gt,hn){switch(this._point){case 0:this._string.push("M",Gt,",",hn),this._point=1;break;case 1:this._string.push("L",Gt,",",hn);break;default:this._circle==null&&(this._circle=Ie(this._radius)),this._string.push("M",Gt,",",hn,this._circle)}},result:function(){if(this._string.length){var Gt=this._string.join("");return this._string=[],Gt}return null}};var it=e(15002);function lt(Gt){var hn=0,An=u.pi/3,Tn=(0,it.r)(Gt),Rn=Tn(hn,An);return Rn.parallels=function(qn){return arguments.length?Tn(hn=qn[0]*u.uR,An=qn[1]*u.uR):[hn*u.RW,An*u.RW]},Rn}function gt(Gt,hn){var An=(0,u.O$)(Gt),Tn=(An+(0,u.O$)(hn))/2;if((0,u.Wn)(Tn)<u.Ho)return function(Yn){var or=(0,u.mC)(Yn);function Jt(Mn,Rt){return[Mn*or,(0,u.O$)(Rt)/or]}return Jt.invert=function(Mn,Rt){return[Mn/or,(0,u.ZR)(Rt*or)]},Jt}(Gt);var Rn=1+An*(2*Tn-An),qn=(0,u._b)(Rn)/Tn;function Un(Yn,or){var Jt=(0,u._b)(Rn-2*Tn*(0,u.O$)(or))/Tn;return[Jt*(0,u.O$)(Yn*=Tn),qn-Jt*(0,u.mC)(Yn)]}return Un.invert=function(Yn,or){var Jt=qn-or,Mn=(0,u.fv)(Yn,(0,u.Wn)(Jt))*(0,u.Xx)(Jt);return Jt*Tn<0&&(Mn-=u.pi*(0,u.Xx)(Yn)*(0,u.Xx)(Jt)),[Mn/Tn,(0,u.ZR)((Rn-(Yn*Yn+Jt*Jt)*Tn*Tn)/(2*Tn))]},Un}function At(){return lt(gt).scale(155.424).center([0,33.6442])}function kt(){return At().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var ht=e(47589);function St(){var Gt,hn,An,Tn,Rn,qn,Un=kt(),Yn=At().rotate([154,0]).center([-2,58.5]).parallels([55,65]),or=At().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Jt={point:function(Zt,rn){qn=[Zt,rn]}};function Mn(Zt){var rn=Zt[0],Ln=Zt[1];return qn=null,An.point(rn,Ln),qn||(Tn.point(rn,Ln),qn)||(Rn.point(rn,Ln),qn)}function Rt(){return Gt=hn=null,Mn}return Mn.invert=function(Zt){var rn=Un.scale(),Ln=Un.translate(),Sn=(Zt[0]-Ln[0])/rn,wn=(Zt[1]-Ln[1])/rn;return(wn>=.12&&wn<.234&&Sn>=-.425&&Sn<-.214?Yn:wn>=.166&&wn<.234&&Sn>=-.214&&Sn<-.115?or:Un).invert(Zt)},Mn.stream=function(Zt){return Gt&&hn===Zt?Gt:(rn=[Un.stream(hn=Zt),Yn.stream(Zt),or.stream(Zt)],Ln=rn.length,Gt={point:function(Sn,wn){for(var ln=-1;++ln<Ln;)rn[ln].point(Sn,wn)},sphere:function(){for(var Sn=-1;++Sn<Ln;)rn[Sn].sphere()},lineStart:function(){for(var Sn=-1;++Sn<Ln;)rn[Sn].lineStart()},lineEnd:function(){for(var Sn=-1;++Sn<Ln;)rn[Sn].lineEnd()},polygonStart:function(){for(var Sn=-1;++Sn<Ln;)rn[Sn].polygonStart()},polygonEnd:function(){for(var Sn=-1;++Sn<Ln;)rn[Sn].polygonEnd()}});var rn,Ln},Mn.precision=function(Zt){return arguments.length?(Un.precision(Zt),Yn.precision(Zt),or.precision(Zt),Rt()):Un.precision()},Mn.scale=function(Zt){return arguments.length?(Un.scale(Zt),Yn.scale(.35*Zt),or.scale(Zt),Mn.translate(Un.translate())):Un.scale()},Mn.translate=function(Zt){if(!arguments.length)return Un.translate();var rn=Un.scale(),Ln=+Zt[0],Sn=+Zt[1];return An=Un.translate(Zt).clipExtent([[Ln-.455*rn,Sn-.238*rn],[Ln+.455*rn,Sn+.238*rn]]).stream(Jt),Tn=Yn.translate([Ln-.307*rn,Sn+.201*rn]).clipExtent([[Ln-.425*rn+u.Ho,Sn+.12*rn+u.Ho],[Ln-.214*rn-u.Ho,Sn+.234*rn-u.Ho]]).stream(Jt),Rn=or.translate([Ln-.205*rn,Sn+.212*rn]).clipExtent([[Ln-.214*rn+u.Ho,Sn+.166*rn+u.Ho],[Ln-.115*rn-u.Ho,Sn+.234*rn-u.Ho]]).stream(Jt),Rt()},Mn.fitExtent=function(Zt,rn){return(0,ht.qg)(Mn,Zt,rn)},Mn.fitSize=function(Zt,rn){return(0,ht.mF)(Mn,Zt,rn)},Mn.fitWidth=function(Zt,rn){return(0,ht.V6)(Mn,Zt,rn)},Mn.fitHeight=function(Zt,rn){return(0,ht.rf)(Mn,Zt,rn)},Mn.scale(1070)}var vt=e(12956),Mt=e(17889),It=e(49386);function Ut(Gt,hn){return[Gt,(0,u.cM)((0,u.OR)((u.ou+hn)/2))]}function jt(){return qt(Ut).scale(961/u.BZ)}function qt(Gt){var hn,An,Tn,Rn=(0,it.Z)(Gt),qn=Rn.center,Un=Rn.scale,Yn=Rn.translate,or=Rn.clipExtent,Jt=null;function Mn(){var Rt=u.pi*Un(),Zt=Rn((0,It.Z)(Rn.rotate()).invert([0,0]));return or(Jt==null?[[Zt[0]-Rt,Zt[1]-Rt],[Zt[0]+Rt,Zt[1]+Rt]]:Gt===Ut?[[Math.max(Zt[0]-Rt,Jt),hn],[Math.min(Zt[0]+Rt,An),Tn]]:[[Jt,Math.max(Zt[1]-Rt,hn)],[An,Math.min(Zt[1]+Rt,Tn)]])}return Rn.scale=function(Rt){return arguments.length?(Un(Rt),Mn()):Un()},Rn.translate=function(Rt){return arguments.length?(Yn(Rt),Mn()):Yn()},Rn.center=function(Rt){return arguments.length?(qn(Rt),Mn()):qn()},Rn.clipExtent=function(Rt){return arguments.length?(Rt==null?Jt=hn=An=Tn=null:(Jt=+Rt[0][0],hn=+Rt[0][1],An=+Rt[1][0],Tn=+Rt[1][1]),Mn()):Jt==null?null:[[Jt,hn],[An,Tn]]},Mn()}function Yt(Gt){return(0,u.OR)((u.ou+Gt)/2)}function Kt(Gt,hn){var An=(0,u.mC)(Gt),Tn=Gt===hn?(0,u.O$)(Gt):(0,u.cM)(An/(0,u.mC)(hn))/(0,u.cM)(Yt(hn)/Yt(Gt)),Rn=An*(0,u.sQ)(Yt(Gt),Tn)/Tn;if(!Tn)return Ut;function qn(Un,Yn){Rn>0?Yn<-u.ou+u.Ho&&(Yn=-u.ou+u.Ho):Yn>u.ou-u.Ho&&(Yn=u.ou-u.Ho);var or=Rn/(0,u.sQ)(Yt(Yn),Tn);return[or*(0,u.O$)(Tn*Un),Rn-or*(0,u.mC)(Tn*Un)]}return qn.invert=function(Un,Yn){var or=Rn-Yn,Jt=(0,u.Xx)(Tn)*(0,u._b)(Un*Un+or*or),Mn=(0,u.fv)(Un,(0,u.Wn)(or))*(0,u.Xx)(or);return or*Tn<0&&(Mn-=u.pi*(0,u.Xx)(Un)*(0,u.Xx)(or)),[Mn/Tn,2*(0,u.z4)((0,u.sQ)(Rn/Jt,1/Tn))-u.ou]},qn}function pn(){return lt(Kt).scale(109.5).parallels([30,30])}Ut.invert=function(Gt,hn){return[Gt,2*(0,u.z4)((0,u.Qq)(hn))-u.ou]};var nn=e(97492);function xn(Gt,hn){var An=(0,u.mC)(Gt),Tn=Gt===hn?(0,u.O$)(Gt):(An-(0,u.mC)(hn))/(hn-Gt),Rn=An/Tn+Gt;if((0,u.Wn)(Tn)<u.Ho)return nn.k;function qn(Un,Yn){var or=Rn-Yn,Jt=Tn*Un;return[or*(0,u.O$)(Jt),Rn-or*(0,u.mC)(Jt)]}return qn.invert=function(Un,Yn){var or=Rn-Yn,Jt=(0,u.fv)(Un,(0,u.Wn)(or))*(0,u.Xx)(or);return or*Tn<0&&(Jt-=u.pi*(0,u.Xx)(Un)*(0,u.Xx)(or)),[Jt/Tn,Rn-(0,u.Xx)(Tn)*(0,u._b)(Un*Un+or*or)]},qn}function jn(){return lt(xn).scale(131.154).center([0,13.9389])}var mn=1.340264,en=-.081106,vn=893e-6,on=.003796,sn=(0,u._b)(3)/2;function En(Gt,hn){var An=(0,u.ZR)(sn*(0,u.O$)(hn)),Tn=An*An,Rn=Tn*Tn*Tn;return[Gt*(0,u.mC)(An)/(sn*(mn+3*en*Tn+Rn*(7*vn+9*on*Tn))),An*(mn+en*Tn+Rn*(vn+on*Tn))]}function kn(){return(0,it.Z)(En).scale(177.158)}En.invert=function(Gt,hn){for(var An,Tn=hn,Rn=Tn*Tn,qn=Rn*Rn*Rn,Un=0;Un<12&&(qn=(Rn=(Tn-=An=(Tn*(mn+en*Rn+qn*(vn+on*Rn))-hn)/(mn+3*en*Rn+qn*(7*vn+9*on*Rn)))*Tn)*Rn*Rn,!((0,u.Wn)(An)<u.aW));++Un);return[sn*Gt*(mn+3*en*Rn+qn*(7*vn+9*on*Rn))/(0,u.mC)(Tn),(0,u.ZR)((0,u.O$)(Tn)/sn)]};var zn=e(98936),Fn=e(64684);function Bn(){var Gt,hn,An,Tn,Rn,qn,Un,Yn=1,or=0,Jt=0,Mn=1,Rt=1,Zt=0,rn=null,Ln=1,Sn=1,wn=(0,Fn.l)({point:function(fn,bn){var In=un([fn,bn]);this.stream.point(In[0],In[1])}}),ln=ne.Z;function gn(){return Ln=Yn*Mn,Sn=Yn*Rt,qn=Un=null,un}function un(fn){var bn=fn[0]*Ln,In=fn[1]*Sn;if(Zt){var Hn=In*Gt-bn*hn;bn=bn*Gt+In*hn,In=Hn}return[bn+or,In+Jt]}return un.invert=function(fn){var bn=fn[0]-or,In=fn[1]-Jt;if(Zt){var Hn=In*Gt+bn*hn;bn=bn*Gt-In*hn,In=Hn}return[bn/Ln,In/Sn]},un.stream=function(fn){return qn&&Un===fn?qn:qn=wn(ln(Un=fn))},un.postclip=function(fn){return arguments.length?(ln=fn,rn=An=Tn=Rn=null,gn()):ln},un.clipExtent=function(fn){return arguments.length?(ln=fn==null?(rn=An=Tn=Rn=null,ne.Z):(0,s.Z)(rn=+fn[0][0],An=+fn[0][1],Tn=+fn[1][0],Rn=+fn[1][1]),gn()):rn==null?null:[[rn,An],[Tn,Rn]]},un.scale=function(fn){return arguments.length?(Yn=+fn,gn()):Yn},un.translate=function(fn){return arguments.length?(or=+fn[0],Jt=+fn[1],gn()):[or,Jt]},un.angle=function(fn){return arguments.length?(Zt=fn%360*u.uR,hn=(0,u.O$)(Zt),Gt=(0,u.mC)(Zt),gn()):Zt*u.RW},un.reflectX=function(fn){return arguments.length?(Mn=fn?-1:1,gn()):Mn<0},un.reflectY=function(fn){return arguments.length?(Rt=fn?-1:1,gn()):Rt<0},un.fitExtent=function(fn,bn){return(0,ht.qg)(un,fn,bn)},un.fitSize=function(fn,bn){return(0,ht.mF)(un,fn,bn)},un.fitWidth=function(fn,bn){return(0,ht.V6)(un,fn,bn)},un.fitHeight=function(fn,bn){return(0,ht.rf)(un,fn,bn)},un}var er=e(26867),Xn=e(57962),mr=e(25382);function ur(Gt,hn){var An=(0,u.mC)(hn),Tn=1+(0,u.mC)(Gt)*An;return[An*(0,u.O$)(Gt)/Tn,(0,u.O$)(hn)/Tn]}function $n(){return(0,it.Z)(ur).scale(250).clipAngle(142)}function lr(Gt,hn){return[(0,u.cM)((0,u.OR)((u.ou+hn)/2)),-Gt]}function hr(){var Gt=qt(lr),hn=Gt.center,An=Gt.rotate;return Gt.center=function(Tn){return arguments.length?hn([-Tn[1],Tn[0]]):[(Tn=hn())[1],-Tn[0]]},Gt.rotate=function(Tn){return arguments.length?An([Tn[0],Tn[1],Tn.length>2?Tn[2]+90:90]):[(Tn=An())[0],Tn[1],Tn[2]-90]},An([0,0,90]).scale(159.155)}ur.invert=(0,mr.O)(function(Gt){return 2*(0,u.z4)(Gt)}),lr.invert=function(Gt,hn){return[-hn,2*(0,u.z4)((0,u.Qq)(Gt))-u.ou]}},83074:function(K,z,e){e.d(z,{Z:function(){return k}});var S=e(39695);function k(l,T){var b=l[0]*S.uR,d=l[1]*S.uR,s=T[0]*S.uR,t=T[1]*S.uR,o=(0,S.mC)(d),r=(0,S.O$)(d),n=(0,S.mC)(t),a=(0,S.O$)(t),i=o*(0,S.mC)(b),u=o*(0,S.O$)(b),h=n*(0,S.mC)(s),f=n*(0,S.O$)(s),x=2*(0,S.ZR)((0,S._b)((0,S.Jy)(t-d)+o*n*(0,S.Jy)(s-b))),v=(0,S.O$)(x),g=x?function(y){var p=(0,S.O$)(y*=x)/v,m=(0,S.O$)(x-y)/v,w=m*i+p*h,c=m*u+p*f,M=m*r+p*a;return[(0,S.fv)(c,w)*S.RW,(0,S.fv)(M,(0,S._b)(w*w+c*c))*S.RW]}:function(){return[b*S.RW,d*S.RW]};return g.distance=x,g}},39695:function(K,z,e){e.d(z,{BZ:function(){return d},Ho:function(){return S},Jy:function(){return w},Kh:function(){return p},O$:function(){return x},OR:function(){return y},Qq:function(){return u},RW:function(){return s},Wn:function(){return o},Xx:function(){return v},ZR:function(){return m},_b:function(){return g},aW:function(){return k},cM:function(){return h},fv:function(){return n},mC:function(){return a},mD:function(){return i},ou:function(){return T},pi:function(){return l},pu:function(){return b},sQ:function(){return f},uR:function(){return t},z4:function(){return r}});var S=1e-6,k=1e-12,l=Math.PI,T=l/2,b=l/4,d=2*l,s=180/l,t=l/180,o=Math.abs,r=Math.atan,n=Math.atan2,a=Math.cos,i=Math.ceil,u=Math.exp,h=Math.log,f=Math.pow,x=Math.sin,v=Math.sign||function(c){return c>0?1:c<0?-1:0},g=Math.sqrt,y=Math.tan;function p(c){return c>1?0:c<-1?l:Math.acos(c)}function m(c){return c>1?T:c<-1?-T:Math.asin(c)}function w(c){return(c=x(c/2))*c}},73182:function(K,z,e){function S(){}e.d(z,{Z:function(){return S}})},3559:function(K,z,e){var S=e(73182),k=1/0,l=k,T=-k,b=T,d={point:function(s,t){s<k&&(k=s),s>T&&(T=s),t<l&&(l=t),t>b&&(b=t)},lineStart:S.Z,lineEnd:S.Z,polygonStart:S.Z,polygonEnd:S.Z,result:function(){var s=[[k,l],[T,b]];return T=b=-(l=k=1/0),s}};z.Z=d},67108:function(K,z,e){e.d(z,{Z:function(){return k}});var S=e(39695);function k(l,T){return(0,S.Wn)(l[0]-T[0])<S.Ho&&(0,S.Wn)(l[1]-T[1])<S.Ho}},23071:function(K,z,e){e.d(z,{Z:function(){return d}});var S=e(33940),k=e(7620),l=e(39695),T=(0,S.Z)();function b(s){return(0,l.Wn)(s[0])<=l.pi?s[0]:(0,l.Xx)(s[0])*(((0,l.Wn)(s[0])+l.pi)%l.BZ-l.pi)}function d(s,t){var o=b(t),r=t[1],n=(0,l.O$)(r),a=[(0,l.O$)(o),-(0,l.mC)(o),0],i=0,u=0;T.reset(),n===1?r=l.ou+l.Ho:n===-1&&(r=-l.ou-l.Ho);for(var h=0,f=s.length;h<f;++h)if(v=(x=s[h]).length)for(var x,v,g=x[v-1],y=b(g),p=g[1]/2+l.pu,m=(0,l.O$)(p),w=(0,l.mC)(p),c=0;c<v;++c,y=_,m=L,w=C,g=M){var M=x[c],_=b(M),E=M[1]/2+l.pu,L=(0,l.O$)(E),C=(0,l.mC)(E),O=_-y,I=O>=0?1:-1,N=I*O,R=N>l.pi,V=m*L;if(T.add((0,l.fv)(V*I*(0,l.O$)(N),w*C+V*(0,l.mC)(N))),i+=R?O+I*l.BZ:O,R^y>=o^_>=o){var F=(0,k.T5)((0,k.Og)(g),(0,k.Og)(M));(0,k.iJ)(F);var D=(0,k.T5)(a,F);(0,k.iJ)(D);var U=(R^O>=0?-1:1)*(0,l.ZR)(D[2]);(r>U||r===U&&(F[0]||F[1]))&&(u+=R^O>=0?1:-1)}}return(i<-l.Ho||i<l.Ho&&T<-l.Ho)^1&u}},25382:function(K,z,e){e.d(z,{O:function(){return l},W:function(){return k}});var S=e(39695);function k(T){return function(b,d){var s=(0,S.mC)(b),t=(0,S.mC)(d),o=T(s*t);return[o*t*(0,S.O$)(b),o*(0,S.O$)(d)]}}function l(T){return function(b,d){var s=(0,S._b)(b*b+d*d),t=T(s),o=(0,S.O$)(t),r=(0,S.mC)(t);return[(0,S.fv)(b*o,s*r),(0,S.ZR)(s&&d*o/s)]}}},12956:function(K,z,e){e.d(z,{Z:function(){return b},l:function(){return T}});var S=e(39695),k=e(25382),l=e(15002),T=(0,k.W)(function(d){return(0,S._b)(2/(1+d))});function b(){return(0,l.Z)(T).scale(124.75).clipAngle(179.999)}T.invert=(0,k.O)(function(d){return 2*(0,S.ZR)(d/2)})},17889:function(K,z,e){e.d(z,{N:function(){return T},Z:function(){return b}});var S=e(39695),k=e(25382),l=e(15002),T=(0,k.W)(function(d){return(d=(0,S.Kh)(d))&&d/(0,S.O$)(d)});function b(){return(0,l.Z)(T).scale(79.4188).clipAngle(179.999)}T.invert=(0,k.O)(function(d){return d})},97492:function(K,z,e){e.d(z,{Z:function(){return l},k:function(){return k}});var S=e(15002);function k(T,b){return[T,b]}function l(){return(0,S.Z)(k).scale(152.63)}k.invert=k},47589:function(K,z,e){e.d(z,{V6:function(){return d},mF:function(){return b},qg:function(){return T},rf:function(){return s}});var S=e(72736),k=e(3559);function l(t,o,r){var n=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),n!=null&&t.clipExtent(null),(0,S.Z)(r,t.stream(k.Z)),o(k.Z.result()),n!=null&&t.clipExtent(n),t}function T(t,o,r){return l(t,function(n){var a=o[1][0]-o[0][0],i=o[1][1]-o[0][1],u=Math.min(a/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),h=+o[0][0]+(a-u*(n[1][0]+n[0][0]))/2,f=+o[0][1]+(i-u*(n[1][1]+n[0][1]))/2;t.scale(150*u).translate([h,f])},r)}function b(t,o,r){return T(t,[[0,0],o],r)}function d(t,o,r){return l(t,function(n){var a=+o,i=a/(n[1][0]-n[0][0]),u=(a-i*(n[1][0]+n[0][0]))/2,h=-i*n[0][1];t.scale(150*i).translate([u,h])},r)}function s(t,o,r){return l(t,function(n){var a=+o,i=a/(n[1][1]-n[0][1]),u=-i*n[0][0],h=(a-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([u,h])},r)}},98936:function(K,z,e){e.d(z,{M:function(){return T},Z:function(){return b}});var S=e(39695),k=e(25382),l=e(15002);function T(d,s){var t=(0,S.mC)(s),o=(0,S.mC)(d)*t;return[t*(0,S.O$)(d)/o,(0,S.O$)(s)/o]}function b(){return(0,l.Z)(T).scale(144.049).clipAngle(60)}T.invert=(0,k.O)(S.z4)},15002:function(K,z,e){e.d(z,{Z:function(){return f},r:function(){return x}});var S=e(87070),k=e(1457),l=e(87605),T=e(96059),b=e(8593),d=e(39695),s=e(49386),t=e(64684),o=e(47589),r=e(7620),n=(0,d.mC)(30*d.uR);function a(v,g){return+g?function(y,p){function m(w,c,M,_,E,L,C,O,I,N,R,V,F,D){var U=C-w,j=O-c,J=U*U+j*j;if(J>4*p&&F--){var X=_+N,Z=E+R,Y=L+V,W=(0,d._b)(X*X+Z*Z+Y*Y),Q=(0,d.ZR)(Y/=W),ne=(0,d.Wn)((0,d.Wn)(Y)-1)<d.Ho||(0,d.Wn)(M-I)<d.Ho?(M+I)/2:(0,d.fv)(Z,X),re=y(ne,Q),ie=re[0],se=re[1],ge=ie-w,ue=se-c,ce=j*ge-U*ue;(ce*ce/J>p||(0,d.Wn)((U*ge+j*ue)/J-.5)>.3||_*N+E*R+L*V<n)&&(m(w,c,M,_,E,L,ie,se,ne,X/=W,Z/=W,Y,F,D),D.point(ie,se),m(ie,se,ne,X,Z,Y,C,O,I,N,R,V,F,D))}}return function(w){var c,M,_,E,L,C,O,I,N,R,V,F,D={point:U,lineStart:j,lineEnd:X,polygonStart:function(){w.polygonStart(),D.lineStart=Z},polygonEnd:function(){w.polygonEnd(),D.lineStart=j}};function U(Q,ne){Q=y(Q,ne),w.point(Q[0],Q[1])}function j(){I=NaN,D.point=J,w.lineStart()}function J(Q,ne){var re=(0,r.Og)([Q,ne]),ie=y(Q,ne);m(I,N,O,R,V,F,I=ie[0],N=ie[1],O=Q,R=re[0],V=re[1],F=re[2],16,w),w.point(I,N)}function X(){D.point=U,w.lineEnd()}function Z(){j(),D.point=Y,D.lineEnd=W}function Y(Q,ne){J(c=Q,ne),M=I,_=N,E=R,L=V,C=F,D.point=J}function W(){m(I,N,O,R,V,F,M,_,c,E,L,C,16,w),D.lineEnd=X,X()}return D}}(v,g):function(y){return(0,t.l)({point:function(p,m){p=y(p,m),this.stream.point(p[0],p[1])}})}(v)}var i=(0,t.l)({point:function(v,g){this.stream.point(v*d.uR,g*d.uR)}});function u(v,g,y,p,m){function w(c,M){return[g+v*(c*=p),y-v*(M*=m)]}return w.invert=function(c,M){return[(c-g)/v*p,(y-M)/v*m]},w}function h(v,g,y,p,m,w){var c=(0,d.mC)(w),M=(0,d.O$)(w),_=c*v,E=M*v,L=c/v,C=M/v,O=(M*y-c*g)/v,I=(M*g+c*y)/v;function N(R,V){return[_*(R*=p)-E*(V*=m)+g,y-E*R-_*V]}return N.invert=function(R,V){return[p*(L*R-C*V+O),m*(I-C*R-L*V)]},N}function f(v){return x(function(){return v})()}function x(v){var g,y,p,m,w,c,M,_,E,L,C=150,O=480,I=250,N=0,R=0,V=0,F=0,D=0,U=0,j=1,J=1,X=null,Z=S.Z,Y=null,W=b.Z,Q=.5;function ne(ge){return _(ge[0]*d.uR,ge[1]*d.uR)}function re(ge){return(ge=_.invert(ge[0],ge[1]))&&[ge[0]*d.RW,ge[1]*d.RW]}function ie(){var ge=h(C,0,0,j,J,U).apply(null,g(N,R)),ue=(U?h:u)(C,O-ge[0],I-ge[1],j,J,U);return y=(0,s.I)(V,F,D),M=(0,T.Z)(g,ue),_=(0,T.Z)(y,M),c=a(M,Q),se()}function se(){return E=L=null,ne}return ne.stream=function(ge){return E&&L===ge?E:E=i(function(ue){return(0,t.l)({point:function(ce,le){var de=ue(ce,le);return this.stream.point(de[0],de[1])}})}(y)(Z(c(W(L=ge)))))},ne.preclip=function(ge){return arguments.length?(Z=ge,X=void 0,se()):Z},ne.postclip=function(ge){return arguments.length?(W=ge,Y=p=m=w=null,se()):W},ne.clipAngle=function(ge){return arguments.length?(Z=+ge?(0,k.Z)(X=ge*d.uR):(X=null,S.Z),se()):X*d.RW},ne.clipExtent=function(ge){return arguments.length?(W=ge==null?(Y=p=m=w=null,b.Z):(0,l.Z)(Y=+ge[0][0],p=+ge[0][1],m=+ge[1][0],w=+ge[1][1]),se()):Y==null?null:[[Y,p],[m,w]]},ne.scale=function(ge){return arguments.length?(C=+ge,ie()):C},ne.translate=function(ge){return arguments.length?(O=+ge[0],I=+ge[1],ie()):[O,I]},ne.center=function(ge){return arguments.length?(N=ge[0]%360*d.uR,R=ge[1]%360*d.uR,ie()):[N*d.RW,R*d.RW]},ne.rotate=function(ge){return arguments.length?(V=ge[0]%360*d.uR,F=ge[1]%360*d.uR,D=ge.length>2?ge[2]%360*d.uR:0,ie()):[V*d.RW,F*d.RW,D*d.RW]},ne.angle=function(ge){return arguments.length?(U=ge%360*d.uR,ie()):U*d.RW},ne.reflectX=function(ge){return arguments.length?(j=ge?-1:1,ie()):j<0},ne.reflectY=function(ge){return arguments.length?(J=ge?-1:1,ie()):J<0},ne.precision=function(ge){return arguments.length?(c=a(M,Q=ge*ge),se()):(0,d._b)(Q)},ne.fitExtent=function(ge,ue){return(0,o.qg)(ne,ge,ue)},ne.fitSize=function(ge,ue){return(0,o.mF)(ne,ge,ue)},ne.fitWidth=function(ge,ue){return(0,o.V6)(ne,ge,ue)},ne.fitHeight=function(ge,ue){return(0,o.rf)(ne,ge,ue)},function(){return g=v.apply(this,arguments),ne.invert=g.invert&&re,ie()}}},26867:function(K,z,e){e.d(z,{K:function(){return l},Z:function(){return T}});var S=e(15002),k=e(39695);function l(b,d){var s=d*d,t=s*s;return[b*(.8707-.131979*s+t*(t*(.003971*s-.001529*t)-.013791)),d*(1.007226+s*(.015085+t*(.028874*s-.044475-.005916*t)))]}function T(){return(0,S.Z)(l).scale(175.295)}l.invert=function(b,d){var s,t=d,o=25;do{var r=t*t,n=r*r;t-=s=(t*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))-d)/(1.007226+r*(.045255+n*(.259866*r-.311325-.06507600000000001*n)))}while((0,k.Wn)(s)>k.Ho&&--o>0);return[b/(.8707+(r=t*t)*(r*(r*r*r*(.003971-.001529*r)-.013791)-.131979)),t]}},57962:function(K,z,e){e.d(z,{I:function(){return T},Z:function(){return b}});var S=e(39695),k=e(25382),l=e(15002);function T(d,s){return[(0,S.mC)(s)*(0,S.O$)(d),(0,S.O$)(s)]}function b(){return(0,l.Z)(T).scale(249.5).clipAngle(90+S.Ho)}T.invert=(0,k.O)(S.ZR)},49386:function(K,z,e){e.d(z,{I:function(){return T},Z:function(){return t}});var S=e(96059),k=e(39695);function l(o,r){return[(0,k.Wn)(o)>k.pi?o+Math.round(-o/k.BZ)*k.BZ:o,r]}function T(o,r,n){return(o%=k.BZ)?r||n?(0,S.Z)(d(o),s(r,n)):d(o):r||n?s(r,n):l}function b(o){return function(r,n){return[(r+=o)>k.pi?r-k.BZ:r<-k.pi?r+k.BZ:r,n]}}function d(o){var r=b(o);return r.invert=b(-o),r}function s(o,r){var n=(0,k.mC)(o),a=(0,k.O$)(o),i=(0,k.mC)(r),u=(0,k.O$)(r);function h(f,x){var v=(0,k.mC)(x),g=(0,k.mC)(f)*v,y=(0,k.O$)(f)*v,p=(0,k.O$)(x),m=p*n+g*a;return[(0,k.fv)(y*i-m*u,g*n-p*a),(0,k.ZR)(m*i+y*u)]}return h.invert=function(f,x){var v=(0,k.mC)(x),g=(0,k.mC)(f)*v,y=(0,k.O$)(f)*v,p=(0,k.O$)(x),m=p*i-y*u;return[(0,k.fv)(y*i+p*u,g*n+m*a),(0,k.ZR)(m*n-g*a)]},h}function t(o){function r(n){return(n=o(n[0]*k.uR,n[1]*k.uR))[0]*=k.RW,n[1]*=k.RW,n}return o=T(o[0]*k.uR,o[1]*k.uR,o.length>2?o[2]*k.uR:0),r.invert=function(n){return(n=o.invert(n[0]*k.uR,n[1]*k.uR))[0]*=k.RW,n[1]*=k.RW,n},r}l.invert=l},72736:function(K,z,e){function S(s,t){s&&l.hasOwnProperty(s.type)&&l[s.type](s,t)}e.d(z,{Z:function(){return d}});var k={Feature:function(s,t){S(s.geometry,t)},FeatureCollection:function(s,t){for(var o=s.features,r=-1,n=o.length;++r<n;)S(o[r].geometry,t)}},l={Sphere:function(s,t){t.sphere()},Point:function(s,t){s=s.coordinates,t.point(s[0],s[1],s[2])},MultiPoint:function(s,t){for(var o=s.coordinates,r=-1,n=o.length;++r<n;)s=o[r],t.point(s[0],s[1],s[2])},LineString:function(s,t){T(s.coordinates,t,0)},MultiLineString:function(s,t){for(var o=s.coordinates,r=-1,n=o.length;++r<n;)T(o[r],t,0)},Polygon:function(s,t){b(s.coordinates,t)},MultiPolygon:function(s,t){for(var o=s.coordinates,r=-1,n=o.length;++r<n;)b(o[r],t)},GeometryCollection:function(s,t){for(var o=s.geometries,r=-1,n=o.length;++r<n;)S(o[r],t)}};function T(s,t,o){var r,n=-1,a=s.length-o;for(t.lineStart();++n<a;)r=s[n],t.point(r[0],r[1],r[2]);t.lineEnd()}function b(s,t){var o=-1,r=s.length;for(t.polygonStart();++o<r;)T(s[o],t,1);t.polygonEnd()}function d(s,t){s&&k.hasOwnProperty(s.type)?k[s.type](s,t):S(s,t)}},64684:function(K,z,e){function S(T){return{stream:k(T)}}function k(T){return function(b){var d=new l;for(var s in T)d[s]=T[s];return d.stream=b,d}}function l(){}e.d(z,{Z:function(){return S},l:function(){return k}}),l.prototype={constructor:l,point:function(T,b){this.stream.point(T,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},674:function(K,z,e){function S(Ae,$){return Ae.parent===$.parent?1:2}function k(Ae,$){return Ae+$.x}function l(Ae,$){return Math.max(Ae,$.y)}function T(){var Ae=S,$=1,oe=1,pe=!1;function ye(ke){var De,Pe=0;ke.eachAfter(function(ze){var He=ze.children;He?(ze.x=function(Ve){return Ve.reduce(k,0)/Ve.length}(He),ze.y=function(Ve){return 1+Ve.reduce(l,0)}(He)):(ze.x=De?Pe+=Ae(ze,De):0,ze.y=0,De=ze)});var Re=function(ze){for(var He;He=ze.children;)ze=He[0];return ze}(ke),fe=function(ze){for(var He;He=ze.children;)ze=He[He.length-1];return ze}(ke),ve=Re.x-Ae(Re,fe)/2,Te=fe.x+Ae(fe,Re)/2;return ke.eachAfter(pe?function(ze){ze.x=(ze.x-ke.x)*$,ze.y=(ke.y-ze.y)*oe}:function(ze){ze.x=(ze.x-ve)/(Te-ve)*$,ze.y=(1-(ke.y?ze.y/ke.y:1))*oe})}return ye.separation=function(ke){return arguments.length?(Ae=ke,ye):Ae},ye.size=function(ke){return arguments.length?(pe=!1,$=+ke[0],oe=+ke[1],ye):pe?null:[$,oe]},ye.nodeSize=function(ke){return arguments.length?(pe=!0,$=+ke[0],oe=+ke[1],ye):pe?[$,oe]:null},ye}function b(Ae){var $=0,oe=Ae.children,pe=oe&&oe.length;if(pe)for(;--pe>=0;)$+=oe[pe].value;else $=1;Ae.value=$}function d(Ae,$){var oe,pe,ye,ke,De,Pe=new r(Ae),Re=+Ae.value&&(Pe.value=Ae.value),fe=[Pe];for($==null&&($=s);oe=fe.pop();)if(Re&&(oe.value=+oe.data.value),(ye=$(oe.data))&&(De=ye.length))for(oe.children=new Array(De),ke=De-1;ke>=0;--ke)fe.push(pe=oe.children[ke]=new r(ye[ke])),pe.parent=oe,pe.depth=oe.depth+1;return Pe.eachBefore(o)}function s(Ae){return Ae.children}function t(Ae){Ae.data=Ae.data.data}function o(Ae){var $=0;do Ae.height=$;while((Ae=Ae.parent)&&Ae.height<++$)}function r(Ae){this.data=Ae,this.depth=this.height=0,this.parent=null}e.r(z),e.d(z,{cluster:function(){return T},hierarchy:function(){return d},pack:function(){return I},packEnclose:function(){return a},packSiblings:function(){return M},partition:function(){return U},stratify:function(){return Y},tree:function(){return ge},treemap:function(){return Ce},treemapBinary:function(){return xe},treemapDice:function(){return D},treemapResquarify:function(){return we},treemapSlice:function(){return ue},treemapSliceDice:function(){return _e},treemapSquarify:function(){return de}}),r.prototype=d.prototype={constructor:r,count:function(){return this.eachAfter(b)},each:function(Ae){var $,oe,pe,ye,ke=this,De=[ke];do for($=De.reverse(),De=[];ke=$.pop();)if(Ae(ke),oe=ke.children)for(pe=0,ye=oe.length;pe<ye;++pe)De.push(oe[pe]);while(De.length);return this},eachAfter:function(Ae){for(var $,oe,pe,ye=this,ke=[ye],De=[];ye=ke.pop();)if(De.push(ye),$=ye.children)for(oe=0,pe=$.length;oe<pe;++oe)ke.push($[oe]);for(;ye=De.pop();)Ae(ye);return this},eachBefore:function(Ae){for(var $,oe,pe=this,ye=[pe];pe=ye.pop();)if(Ae(pe),$=pe.children)for(oe=$.length-1;oe>=0;--oe)ye.push($[oe]);return this},sum:function(Ae){return this.eachAfter(function($){for(var oe=+Ae($.data)||0,pe=$.children,ye=pe&&pe.length;--ye>=0;)oe+=pe[ye].value;$.value=oe})},sort:function(Ae){return this.eachBefore(function($){$.children&&$.children.sort(Ae)})},path:function(Ae){for(var $=this,oe=function(ke,De){if(ke===De)return ke;var Pe=ke.ancestors(),Re=De.ancestors(),fe=null;for(ke=Pe.pop(),De=Re.pop();ke===De;)fe=ke,ke=Pe.pop(),De=Re.pop();return fe}($,Ae),pe=[$];$!==oe;)$=$.parent,pe.push($);for(var ye=pe.length;Ae!==oe;)pe.splice(ye,0,Ae),Ae=Ae.parent;return pe},ancestors:function(){for(var Ae=this,$=[Ae];Ae=Ae.parent;)$.push(Ae);return $},descendants:function(){var Ae=[];return this.each(function($){Ae.push($)}),Ae},leaves:function(){var Ae=[];return this.eachBefore(function($){$.children||Ae.push($)}),Ae},links:function(){var Ae=this,$=[];return Ae.each(function(oe){oe!==Ae&&$.push({source:oe.parent,target:oe})}),$},copy:function(){return d(this).eachBefore(t)}};var n=Array.prototype.slice;function a(Ae){for(var $,oe,pe=0,ye=(Ae=function(De){for(var Pe,Re,fe=De.length;fe;)Re=Math.random()*fe--|0,Pe=De[fe],De[fe]=De[Re],De[Re]=Pe;return De}(n.call(Ae))).length,ke=[];pe<ye;)$=Ae[pe],oe&&h(oe,$)?++pe:(oe=x(ke=i(ke,$)),pe=0);return oe}function i(Ae,$){var oe,pe;if(f($,Ae))return[$];for(oe=0;oe<Ae.length;++oe)if(u($,Ae[oe])&&f(v(Ae[oe],$),Ae))return[Ae[oe],$];for(oe=0;oe<Ae.length-1;++oe)for(pe=oe+1;pe<Ae.length;++pe)if(u(v(Ae[oe],Ae[pe]),$)&&u(v(Ae[oe],$),Ae[pe])&&u(v(Ae[pe],$),Ae[oe])&&f(g(Ae[oe],Ae[pe],$),Ae))return[Ae[oe],Ae[pe],$];throw new Error}function u(Ae,$){var oe=Ae.r-$.r,pe=$.x-Ae.x,ye=$.y-Ae.y;return oe<0||oe*oe<pe*pe+ye*ye}function h(Ae,$){var oe=Ae.r-$.r+1e-6,pe=$.x-Ae.x,ye=$.y-Ae.y;return oe>0&&oe*oe>pe*pe+ye*ye}function f(Ae,$){for(var oe=0;oe<$.length;++oe)if(!h(Ae,$[oe]))return!1;return!0}function x(Ae){switch(Ae.length){case 1:return{x:($=Ae[0]).x,y:$.y,r:$.r};case 2:return v(Ae[0],Ae[1]);case 3:return g(Ae[0],Ae[1],Ae[2])}var $}function v(Ae,$){var oe=Ae.x,pe=Ae.y,ye=Ae.r,ke=$.x,De=$.y,Pe=$.r,Re=ke-oe,fe=De-pe,ve=Pe-ye,Te=Math.sqrt(Re*Re+fe*fe);return{x:(oe+ke+Re/Te*ve)/2,y:(pe+De+fe/Te*ve)/2,r:(Te+ye+Pe)/2}}function g(Ae,$,oe){var pe=Ae.x,ye=Ae.y,ke=Ae.r,De=$.x,Pe=$.y,Re=$.r,fe=oe.x,ve=oe.y,Te=oe.r,ze=pe-De,He=pe-fe,Ve=ye-Pe,nt=ye-ve,tt=Re-ke,ot=Te-ke,pt=pe*pe+ye*ye-ke*ke,Tt=pt-De*De-Pe*Pe+Re*Re,yt=pt-fe*fe-ve*ve+Te*Te,dt=He*Ve-ze*nt,Pt=(Ve*yt-nt*Tt)/(2*dt)-pe,Et=(nt*tt-Ve*ot)/dt,Ot=(He*Tt-ze*yt)/(2*dt)-ye,Nt=(ze*ot-He*tt)/dt,zt=Et*Et+Nt*Nt-1,Ze=2*(ke+Pt*Et+Ot*Nt),Ye=Pt*Pt+Ot*Ot-ke*ke,je=-(zt?(Ze+Math.sqrt(Ze*Ze-4*zt*Ye))/(2*zt):Ye/Ze);return{x:pe+Pt+Et*je,y:ye+Ot+Nt*je,r:je}}function y(Ae,$,oe){var pe,ye,ke,De,Pe=Ae.x-$.x,Re=Ae.y-$.y,fe=Pe*Pe+Re*Re;fe?(ye=$.r+oe.r,ye*=ye,De=Ae.r+oe.r,ye>(De*=De)?(pe=(fe+De-ye)/(2*fe),ke=Math.sqrt(Math.max(0,De/fe-pe*pe)),oe.x=Ae.x-pe*Pe-ke*Re,oe.y=Ae.y-pe*Re+ke*Pe):(pe=(fe+ye-De)/(2*fe),ke=Math.sqrt(Math.max(0,ye/fe-pe*pe)),oe.x=$.x+pe*Pe-ke*Re,oe.y=$.y+pe*Re+ke*Pe)):(oe.x=$.x+oe.r,oe.y=$.y)}function p(Ae,$){var oe=Ae.r+$.r-1e-6,pe=$.x-Ae.x,ye=$.y-Ae.y;return oe>0&&oe*oe>pe*pe+ye*ye}function m(Ae){var $=Ae._,oe=Ae.next._,pe=$.r+oe.r,ye=($.x*oe.r+oe.x*$.r)/pe,ke=($.y*oe.r+oe.y*$.r)/pe;return ye*ye+ke*ke}function w(Ae){this._=Ae,this.next=null,this.previous=null}function c(Ae){if(!(ye=Ae.length))return 0;var $,oe,pe,ye,ke,De,Pe,Re,fe,ve,Te;if(($=Ae[0]).x=0,$.y=0,!(ye>1))return $.r;if(oe=Ae[1],$.x=-oe.r,oe.x=$.r,oe.y=0,!(ye>2))return $.r+oe.r;y(oe,$,pe=Ae[2]),$=new w($),oe=new w(oe),pe=new w(pe),$.next=pe.previous=oe,oe.next=$.previous=pe,pe.next=oe.previous=$;e:for(Pe=3;Pe<ye;++Pe){y($._,oe._,pe=Ae[Pe]),pe=new w(pe),Re=oe.next,fe=$.previous,ve=oe._.r,Te=$._.r;do if(ve<=Te){if(p(Re._,pe._)){oe=Re,$.next=oe,oe.previous=$,--Pe;continue e}ve+=Re._.r,Re=Re.next}else{if(p(fe._,pe._)){($=fe).next=oe,oe.previous=$,--Pe;continue e}Te+=fe._.r,fe=fe.previous}while(Re!==fe.next);for(pe.previous=$,pe.next=oe,$.next=oe.previous=oe=pe,ke=m($);(pe=pe.next)!==oe;)(De=m(pe))<ke&&($=pe,ke=De);oe=$.next}for($=[oe._],pe=oe;(pe=pe.next)!==oe;)$.push(pe._);for(pe=a($),Pe=0;Pe<ye;++Pe)($=Ae[Pe]).x-=pe.x,$.y-=pe.y;return pe.r}function M(Ae){return c(Ae),Ae}function _(Ae){return Ae==null?null:E(Ae)}function E(Ae){if(typeof Ae!="function")throw new Error;return Ae}function L(){return 0}function C(Ae){return function(){return Ae}}function O(Ae){return Math.sqrt(Ae.value)}function I(){var Ae=null,$=1,oe=1,pe=L;function ye(ke){return ke.x=$/2,ke.y=oe/2,Ae?ke.eachBefore(N(Ae)).eachAfter(R(pe,.5)).eachBefore(V(1)):ke.eachBefore(N(O)).eachAfter(R(L,1)).eachAfter(R(pe,ke.r/Math.min($,oe))).eachBefore(V(Math.min($,oe)/(2*ke.r))),ke}return ye.radius=function(ke){return arguments.length?(Ae=_(ke),ye):Ae},ye.size=function(ke){return arguments.length?($=+ke[0],oe=+ke[1],ye):[$,oe]},ye.padding=function(ke){return arguments.length?(pe=typeof ke=="function"?ke:C(+ke),ye):pe},ye}function N(Ae){return function($){$.children||($.r=Math.max(0,+Ae($)||0))}}function R(Ae,$){return function(oe){if(pe=oe.children){var pe,ye,ke,De=pe.length,Pe=Ae(oe)*$||0;if(Pe)for(ye=0;ye<De;++ye)pe[ye].r+=Pe;if(ke=c(pe),Pe)for(ye=0;ye<De;++ye)pe[ye].r-=Pe;oe.r=ke+Pe}}}function V(Ae){return function($){var oe=$.parent;$.r*=Ae,oe&&($.x=oe.x+Ae*$.x,$.y=oe.y+Ae*$.y)}}function F(Ae){Ae.x0=Math.round(Ae.x0),Ae.y0=Math.round(Ae.y0),Ae.x1=Math.round(Ae.x1),Ae.y1=Math.round(Ae.y1)}function D(Ae,$,oe,pe,ye){for(var ke,De=Ae.children,Pe=-1,Re=De.length,fe=Ae.value&&(pe-$)/Ae.value;++Pe<Re;)(ke=De[Pe]).y0=oe,ke.y1=ye,ke.x0=$,ke.x1=$+=ke.value*fe}function U(){var Ae=1,$=1,oe=0,pe=!1;function ye(ke){var De=ke.height+1;return ke.x0=ke.y0=oe,ke.x1=Ae,ke.y1=$/De,ke.eachBefore(function(Pe,Re){return function(fe){fe.children&&D(fe,fe.x0,Pe*(fe.depth+1)/Re,fe.x1,Pe*(fe.depth+2)/Re);var ve=fe.x0,Te=fe.y0,ze=fe.x1-oe,He=fe.y1-oe;ze<ve&&(ve=ze=(ve+ze)/2),He<Te&&(Te=He=(Te+He)/2),fe.x0=ve,fe.y0=Te,fe.x1=ze,fe.y1=He}}($,De)),pe&&ke.eachBefore(F),ke}return ye.round=function(ke){return arguments.length?(pe=!!ke,ye):pe},ye.size=function(ke){return arguments.length?(Ae=+ke[0],$=+ke[1],ye):[Ae,$]},ye.padding=function(ke){return arguments.length?(oe=+ke,ye):oe},ye}var j={depth:-1},J={};function X(Ae){return Ae.id}function Z(Ae){return Ae.parentId}function Y(){var Ae=X,$=Z;function oe(pe){var ye,ke,De,Pe,Re,fe,ve,Te=pe.length,ze=new Array(Te),He={};for(ke=0;ke<Te;++ke)ye=pe[ke],Re=ze[ke]=new r(ye),(fe=Ae(ye,ke,pe))!=null&&(fe+="")&&(He[ve="$"+(Re.id=fe)]=ve in He?J:Re);for(ke=0;ke<Te;++ke)if(Re=ze[ke],(fe=$(pe[ke],ke,pe))!=null&&(fe+="")){if(!(Pe=He["$"+fe]))throw new Error("missing: "+fe);if(Pe===J)throw new Error("ambiguous: "+fe);Pe.children?Pe.children.push(Re):Pe.children=[Re],Re.parent=Pe}else{if(De)throw new Error("multiple roots");De=Re}if(!De)throw new Error("no root");if(De.parent=j,De.eachBefore(function(Ve){Ve.depth=Ve.parent.depth+1,--Te}).eachBefore(o),De.parent=null,Te>0)throw new Error("cycle");return De}return oe.id=function(pe){return arguments.length?(Ae=E(pe),oe):Ae},oe.parentId=function(pe){return arguments.length?($=E(pe),oe):$},oe}function W(Ae,$){return Ae.parent===$.parent?1:2}function Q(Ae){var $=Ae.children;return $?$[0]:Ae.t}function ne(Ae){var $=Ae.children;return $?$[$.length-1]:Ae.t}function re(Ae,$,oe){var pe=oe/($.i-Ae.i);$.c-=pe,$.s+=oe,Ae.c+=pe,$.z+=oe,$.m+=oe}function ie(Ae,$,oe){return Ae.a.parent===$.parent?Ae.a:oe}function se(Ae,$){this._=Ae,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=$}function ge(){var Ae=W,$=1,oe=1,pe=null;function ye(Re){var fe=function(ot){for(var pt,Tt,yt,dt,Pt,Et=new se(ot,0),Ot=[Et];pt=Ot.pop();)if(yt=pt._.children)for(pt.children=new Array(Pt=yt.length),dt=Pt-1;dt>=0;--dt)Ot.push(Tt=pt.children[dt]=new se(yt[dt],dt)),Tt.parent=pt;return(Et.parent=new se(null,0)).children=[Et],Et}(Re);if(fe.eachAfter(ke),fe.parent.m=-fe.z,fe.eachBefore(De),pe)Re.eachBefore(Pe);else{var ve=Re,Te=Re,ze=Re;Re.eachBefore(function(ot){ot.x<ve.x&&(ve=ot),ot.x>Te.x&&(Te=ot),ot.depth>ze.depth&&(ze=ot)});var He=ve===Te?1:Ae(ve,Te)/2,Ve=He-ve.x,nt=$/(Te.x+He+Ve),tt=oe/(ze.depth||1);Re.eachBefore(function(ot){ot.x=(ot.x+Ve)*nt,ot.y=ot.depth*tt})}return Re}function ke(Re){var fe=Re.children,ve=Re.parent.children,Te=Re.i?ve[Re.i-1]:null;if(fe){(function(He){for(var Ve,nt=0,tt=0,ot=He.children,pt=ot.length;--pt>=0;)(Ve=ot[pt]).z+=nt,Ve.m+=nt,nt+=Ve.s+(tt+=Ve.c)})(Re);var ze=(fe[0].z+fe[fe.length-1].z)/2;Te?(Re.z=Te.z+Ae(Re._,Te._),Re.m=Re.z-ze):Re.z=ze}else Te&&(Re.z=Te.z+Ae(Re._,Te._));Re.parent.A=function(He,Ve,nt){if(Ve){for(var tt,ot=He,pt=He,Tt=Ve,yt=ot.parent.children[0],dt=ot.m,Pt=pt.m,Et=Tt.m,Ot=yt.m;Tt=ne(Tt),ot=Q(ot),Tt&&ot;)yt=Q(yt),(pt=ne(pt)).a=He,(tt=Tt.z+Et-ot.z-dt+Ae(Tt._,ot._))>0&&(re(ie(Tt,He,nt),He,tt),dt+=tt,Pt+=tt),Et+=Tt.m,dt+=ot.m,Ot+=yt.m,Pt+=pt.m;Tt&&!ne(pt)&&(pt.t=Tt,pt.m+=Et-Pt),ot&&!Q(yt)&&(yt.t=ot,yt.m+=dt-Ot,nt=He)}return nt}(Re,Te,Re.parent.A||ve[0])}function De(Re){Re._.x=Re.z+Re.parent.m,Re.m+=Re.parent.m}function Pe(Re){Re.x*=$,Re.y=Re.depth*oe}return ye.separation=function(Re){return arguments.length?(Ae=Re,ye):Ae},ye.size=function(Re){return arguments.length?(pe=!1,$=+Re[0],oe=+Re[1],ye):pe?null:[$,oe]},ye.nodeSize=function(Re){return arguments.length?(pe=!0,$=+Re[0],oe=+Re[1],ye):pe?[$,oe]:null},ye}function ue(Ae,$,oe,pe,ye){for(var ke,De=Ae.children,Pe=-1,Re=De.length,fe=Ae.value&&(ye-oe)/Ae.value;++Pe<Re;)(ke=De[Pe]).x0=$,ke.x1=pe,ke.y0=oe,ke.y1=oe+=ke.value*fe}se.prototype=Object.create(r.prototype);var ce=(1+Math.sqrt(5))/2;function le(Ae,$,oe,pe,ye,ke){for(var De,Pe,Re,fe,ve,Te,ze,He,Ve,nt,tt,ot=[],pt=$.children,Tt=0,yt=0,dt=pt.length,Pt=$.value;Tt<dt;){Re=ye-oe,fe=ke-pe;do ve=pt[yt++].value;while(!ve&&yt<dt);for(Te=ze=ve,tt=ve*ve*(nt=Math.max(fe/Re,Re/fe)/(Pt*Ae)),Ve=Math.max(ze/tt,tt/Te);yt<dt;++yt){if(ve+=Pe=pt[yt].value,Pe<Te&&(Te=Pe),Pe>ze&&(ze=Pe),tt=ve*ve*nt,(He=Math.max(ze/tt,tt/Te))>Ve){ve-=Pe;break}Ve=He}ot.push(De={value:ve,dice:Re<fe,children:pt.slice(Tt,yt)}),De.dice?D(De,oe,pe,ye,Pt?pe+=fe*ve/Pt:ke):ue(De,oe,pe,Pt?oe+=Re*ve/Pt:ye,ke),Pt-=ve,Tt=yt}return ot}var de=function Ae($){function oe(pe,ye,ke,De,Pe){le($,pe,ye,ke,De,Pe)}return oe.ratio=function(pe){return Ae((pe=+pe)>1?pe:1)},oe}(ce);function Ce(){var Ae=de,$=!1,oe=1,pe=1,ye=[0],ke=L,De=L,Pe=L,Re=L,fe=L;function ve(ze){return ze.x0=ze.y0=0,ze.x1=oe,ze.y1=pe,ze.eachBefore(Te),ye=[0],$&&ze.eachBefore(F),ze}function Te(ze){var He=ye[ze.depth],Ve=ze.x0+He,nt=ze.y0+He,tt=ze.x1-He,ot=ze.y1-He;tt<Ve&&(Ve=tt=(Ve+tt)/2),ot<nt&&(nt=ot=(nt+ot)/2),ze.x0=Ve,ze.y0=nt,ze.x1=tt,ze.y1=ot,ze.children&&(He=ye[ze.depth+1]=ke(ze)/2,Ve+=fe(ze)-He,nt+=De(ze)-He,(tt-=Pe(ze)-He)<Ve&&(Ve=tt=(Ve+tt)/2),(ot-=Re(ze)-He)<nt&&(nt=ot=(nt+ot)/2),Ae(ze,Ve,nt,tt,ot))}return ve.round=function(ze){return arguments.length?($=!!ze,ve):$},ve.size=function(ze){return arguments.length?(oe=+ze[0],pe=+ze[1],ve):[oe,pe]},ve.tile=function(ze){return arguments.length?(Ae=E(ze),ve):Ae},ve.padding=function(ze){return arguments.length?ve.paddingInner(ze).paddingOuter(ze):ve.paddingInner()},ve.paddingInner=function(ze){return arguments.length?(ke=typeof ze=="function"?ze:C(+ze),ve):ke},ve.paddingOuter=function(ze){return arguments.length?ve.paddingTop(ze).paddingRight(ze).paddingBottom(ze).paddingLeft(ze):ve.paddingTop()},ve.paddingTop=function(ze){return arguments.length?(De=typeof ze=="function"?ze:C(+ze),ve):De},ve.paddingRight=function(ze){return arguments.length?(Pe=typeof ze=="function"?ze:C(+ze),ve):Pe},ve.paddingBottom=function(ze){return arguments.length?(Re=typeof ze=="function"?ze:C(+ze),ve):Re},ve.paddingLeft=function(ze){return arguments.length?(fe=typeof ze=="function"?ze:C(+ze),ve):fe},ve}function xe(Ae,$,oe,pe,ye){var ke,De,Pe=Ae.children,Re=Pe.length,fe=new Array(Re+1);for(fe[0]=De=ke=0;ke<Re;++ke)fe[ke+1]=De+=Pe[ke].value;(function ve(Te,ze,He,Ve,nt,tt,ot){if(Te>=ze-1){var pt=Pe[Te];return pt.x0=Ve,pt.y0=nt,pt.x1=tt,void(pt.y1=ot)}for(var Tt=fe[Te],yt=He/2+Tt,dt=Te+1,Pt=ze-1;dt<Pt;){var Et=dt+Pt>>>1;fe[Et]<yt?dt=Et+1:Pt=Et}yt-fe[dt-1]<fe[dt]-yt&&Te+1<dt&&--dt;var Ot=fe[dt]-Tt,Nt=He-Ot;if(tt-Ve>ot-nt){var zt=(Ve*Nt+tt*Ot)/He;ve(Te,dt,Ot,Ve,nt,zt,ot),ve(dt,ze,Nt,zt,nt,tt,ot)}else{var Ze=(nt*Nt+ot*Ot)/He;ve(Te,dt,Ot,Ve,nt,tt,Ze),ve(dt,ze,Nt,Ve,Ze,tt,ot)}})(0,Re,Ae.value,$,oe,pe,ye)}function _e(Ae,$,oe,pe,ye){(1&Ae.depth?ue:D)(Ae,$,oe,pe,ye)}var we=function Ae($){function oe(pe,ye,ke,De,Pe){if((Re=pe._squarify)&&Re.ratio===$)for(var Re,fe,ve,Te,ze,He=-1,Ve=Re.length,nt=pe.value;++He<Ve;){for(ve=(fe=Re[He]).children,Te=fe.value=0,ze=ve.length;Te<ze;++Te)fe.value+=ve[Te].value;fe.dice?D(fe,ye,ke,De,ke+=(Pe-ke)*fe.value/nt):ue(fe,ye,ke,ye+=(De-ye)*fe.value/nt,Pe),nt-=fe.value}else pe._squarify=Re=le($,pe,ye,ke,De,Pe),Re.ratio=$}return oe.ratio=function(pe){return Ae((pe=+pe)>1?pe:1)},oe}(ce)},45879:function(K,z,e){e.d(z,{h5:function(){return h}});var S=Math.PI,k=2*S,l=1e-6,T=k-l;function b(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function d(){return new b}b.prototype=d.prototype={constructor:b,moveTo:function(f,x){this._+="M"+(this._x0=this._x1=+f)+","+(this._y0=this._y1=+x)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(f,x){this._+="L"+(this._x1=+f)+","+(this._y1=+x)},quadraticCurveTo:function(f,x,v,g){this._+="Q"+ +f+","+ +x+","+(this._x1=+v)+","+(this._y1=+g)},bezierCurveTo:function(f,x,v,g,y,p){this._+="C"+ +f+","+ +x+","+ +v+","+ +g+","+(this._x1=+y)+","+(this._y1=+p)},arcTo:function(f,x,v,g,y){f=+f,x=+x,v=+v,g=+g,y=+y;var p=this._x1,m=this._y1,w=v-f,c=g-x,M=p-f,_=m-x,E=M*M+_*_;if(y<0)throw new Error("negative radius: "+y);if(this._x1===null)this._+="M"+(this._x1=f)+","+(this._y1=x);else if(E>l)if(Math.abs(_*w-c*M)>l&&y){var L=v-p,C=g-m,O=w*w+c*c,I=L*L+C*C,N=Math.sqrt(O),R=Math.sqrt(E),V=y*Math.tan((S-Math.acos((O+E-I)/(2*N*R)))/2),F=V/R,D=V/N;Math.abs(F-1)>l&&(this._+="L"+(f+F*M)+","+(x+F*_)),this._+="A"+y+","+y+",0,0,"+ +(_*L>M*C)+","+(this._x1=f+D*w)+","+(this._y1=x+D*c)}else this._+="L"+(this._x1=f)+","+(this._y1=x)},arc:function(f,x,v,g,y,p){f=+f,x=+x,p=!!p;var m=(v=+v)*Math.cos(g),w=v*Math.sin(g),c=f+m,M=x+w,_=1^p,E=p?g-y:y-g;if(v<0)throw new Error("negative radius: "+v);this._x1===null?this._+="M"+c+","+M:(Math.abs(this._x1-c)>l||Math.abs(this._y1-M)>l)&&(this._+="L"+c+","+M),v&&(E<0&&(E=E%k+k),E>T?this._+="A"+v+","+v+",0,1,"+_+","+(f-m)+","+(x-w)+"A"+v+","+v+",0,1,"+_+","+(this._x1=c)+","+(this._y1=M):E>l&&(this._+="A"+v+","+v+",0,"+ +(E>=S)+","+_+","+(this._x1=f+v*Math.cos(y))+","+(this._y1=x+v*Math.sin(y))))},rect:function(f,x,v,g){this._+="M"+(this._x0=this._x1=+f)+","+(this._y0=this._y1=+x)+"h"+ +v+"v"+ +g+"h"+-v+"Z"},toString:function(){return this._}};var s=d,t=Array.prototype.slice;function o(f){return function(){return f}}function r(f){return f[0]}function n(f){return f[1]}function a(f){return f.source}function i(f){return f.target}function u(f,x,v,g,y){f.moveTo(x,v),f.bezierCurveTo(x=(x+g)/2,v,x,y,g,y)}function h(){return function(f){var x=a,v=i,g=r,y=n,p=null;function m(){var w,c=t.call(arguments),M=x.apply(this,c),_=v.apply(this,c);if(p||(p=w=s()),f(p,+g.apply(this,(c[0]=M,c)),+y.apply(this,c),+g.apply(this,(c[0]=_,c)),+y.apply(this,c)),w)return p=null,w+""||null}return m.source=function(w){return arguments.length?(x=w,m):x},m.target=function(w){return arguments.length?(v=w,m):v},m.x=function(w){return arguments.length?(g=typeof w=="function"?w:o(+w),m):g},m.y=function(w){return arguments.length?(y=typeof w=="function"?w:o(+w),m):y},m.context=function(w){return arguments.length?(p=w??null,m):p},m}(u)}},84096:function(K,z,e){e.d(z,{i$:function(){return a},Dq:function(){return r},g0:function(){return i}});var S=e(58176),k=e(48480),l=e(59879),T=e(82301),b=e(34823),d=e(79791);function s(dt){if(0<=dt.y&&dt.y<100){var Pt=new Date(-1,dt.m,dt.d,dt.H,dt.M,dt.S,dt.L);return Pt.setFullYear(dt.y),Pt}return new Date(dt.y,dt.m,dt.d,dt.H,dt.M,dt.S,dt.L)}function t(dt){if(0<=dt.y&&dt.y<100){var Pt=new Date(Date.UTC(-1,dt.m,dt.d,dt.H,dt.M,dt.S,dt.L));return Pt.setUTCFullYear(dt.y),Pt}return new Date(Date.UTC(dt.y,dt.m,dt.d,dt.H,dt.M,dt.S,dt.L))}function o(dt,Pt,Et){return{y:dt,m:Pt,d:Et,H:0,M:0,S:0,L:0}}function r(dt){var Pt=dt.dateTime,Et=dt.date,Ot=dt.time,Nt=dt.periods,zt=dt.days,Ze=dt.shortDays,Ye=dt.months,je=dt.shortMonths,Ke=y(Nt),st=p(Nt),Se=y(zt),Ie=p(zt),We=y(Ze),it=p(Ze),lt=y(Ye),gt=p(Ye),At=y(je),kt=p(je),ht={a:function(jt){return Ze[jt.getDay()]},A:function(jt){return zt[jt.getDay()]},b:function(jt){return je[jt.getMonth()]},B:function(jt){return Ye[jt.getMonth()]},c:null,d:Y,e:Y,f:ie,H:W,I:Q,j:ne,L:re,m:se,M:ge,p:function(jt){return Nt[+(jt.getHours()>=12)]},q:function(jt){return 1+~~(jt.getMonth()/3)},Q:Tt,s:yt,S:ue,u:ce,U:le,V:de,w:Ce,W:xe,x:null,X:null,y:_e,Y:we,Z:Ae,"%":pt},St={a:function(jt){return Ze[jt.getUTCDay()]},A:function(jt){return zt[jt.getUTCDay()]},b:function(jt){return je[jt.getUTCMonth()]},B:function(jt){return Ye[jt.getUTCMonth()]},c:null,d:$,e:$,f:De,H:oe,I:pe,j:ye,L:ke,m:Pe,M:Re,p:function(jt){return Nt[+(jt.getUTCHours()>=12)]},q:function(jt){return 1+~~(jt.getUTCMonth()/3)},Q:Tt,s:yt,S:fe,u:ve,U:Te,V:ze,w:He,W:Ve,x:null,X:null,y:nt,Y:tt,Z:ot,"%":pt},vt={a:function(jt,qt,Yt){var Kt=We.exec(qt.slice(Yt));return Kt?(jt.w=it[Kt[0].toLowerCase()],Yt+Kt[0].length):-1},A:function(jt,qt,Yt){var Kt=Se.exec(qt.slice(Yt));return Kt?(jt.w=Ie[Kt[0].toLowerCase()],Yt+Kt[0].length):-1},b:function(jt,qt,Yt){var Kt=At.exec(qt.slice(Yt));return Kt?(jt.m=kt[Kt[0].toLowerCase()],Yt+Kt[0].length):-1},B:function(jt,qt,Yt){var Kt=lt.exec(qt.slice(Yt));return Kt?(jt.m=gt[Kt[0].toLowerCase()],Yt+Kt[0].length):-1},c:function(jt,qt,Yt){return Ut(jt,Pt,qt,Yt)},d:N,e:N,f:j,H:V,I:V,j:R,L:U,m:I,M:F,p:function(jt,qt,Yt){var Kt=Ke.exec(qt.slice(Yt));return Kt?(jt.p=st[Kt[0].toLowerCase()],Yt+Kt[0].length):-1},q:O,Q:X,s:Z,S:D,u:w,U:c,V:M,w:m,W:_,x:function(jt,qt,Yt){return Ut(jt,Et,qt,Yt)},X:function(jt,qt,Yt){return Ut(jt,Ot,qt,Yt)},y:L,Y:E,Z:C,"%":J};function Mt(jt,qt){return function(Yt){var Kt,pn,nn,xn=[],jn=-1,mn=0,en=jt.length;for(Yt instanceof Date||(Yt=new Date(+Yt));++jn<en;)jt.charCodeAt(jn)===37&&(xn.push(jt.slice(mn,jn)),(pn=u[Kt=jt.charAt(++jn)])!=null?Kt=jt.charAt(++jn):pn=Kt==="e"?" ":"0",(nn=qt[Kt])&&(Kt=nn(Yt,pn)),xn.push(Kt),mn=jn+1);return xn.push(jt.slice(mn,jn)),xn.join("")}}function It(jt,qt){return function(Yt){var Kt,pn,nn=o(1900,void 0,1);if(Ut(nn,jt,Yt+="",0)!=Yt.length)return null;if("Q"in nn)return new Date(nn.Q);if("s"in nn)return new Date(1e3*nn.s+("L"in nn?nn.L:0));if(qt&&!("Z"in nn)&&(nn.Z=0),"p"in nn&&(nn.H=nn.H%12+12*nn.p),nn.m===void 0&&(nn.m="q"in nn?nn.q:0),"V"in nn){if(nn.V<1||nn.V>53)return null;"w"in nn||(nn.w=1),"Z"in nn?(pn=(Kt=t(o(nn.y,0,1))).getUTCDay(),Kt=pn>4||pn===0?S.l6.ceil(Kt):(0,S.l6)(Kt),Kt=k.Z.offset(Kt,7*(nn.V-1)),nn.y=Kt.getUTCFullYear(),nn.m=Kt.getUTCMonth(),nn.d=Kt.getUTCDate()+(nn.w+6)%7):(pn=(Kt=s(o(nn.y,0,1))).getDay(),Kt=pn>4||pn===0?l.wA.ceil(Kt):(0,l.wA)(Kt),Kt=T.Z.offset(Kt,7*(nn.V-1)),nn.y=Kt.getFullYear(),nn.m=Kt.getMonth(),nn.d=Kt.getDate()+(nn.w+6)%7)}else("W"in nn||"U"in nn)&&("w"in nn||(nn.w="u"in nn?nn.u%7:"W"in nn?1:0),pn="Z"in nn?t(o(nn.y,0,1)).getUTCDay():s(o(nn.y,0,1)).getDay(),nn.m=0,nn.d="W"in nn?(nn.w+6)%7+7*nn.W-(pn+5)%7:nn.w+7*nn.U-(pn+6)%7);return"Z"in nn?(nn.H+=nn.Z/100|0,nn.M+=nn.Z%100,t(nn)):s(nn)}}function Ut(jt,qt,Yt,Kt){for(var pn,nn,xn=0,jn=qt.length,mn=Yt.length;xn<jn;){if(Kt>=mn)return-1;if((pn=qt.charCodeAt(xn++))===37){if(pn=qt.charAt(xn++),!(nn=vt[pn in u?qt.charAt(xn++):pn])||(Kt=nn(jt,Yt,Kt))<0)return-1}else if(pn!=Yt.charCodeAt(Kt++))return-1}return Kt}return ht.x=Mt(Et,ht),ht.X=Mt(Ot,ht),ht.c=Mt(Pt,ht),St.x=Mt(Et,St),St.X=Mt(Ot,St),St.c=Mt(Pt,St),{format:function(jt){var qt=Mt(jt+="",ht);return qt.toString=function(){return jt},qt},parse:function(jt){var qt=It(jt+="",!1);return qt.toString=function(){return jt},qt},utcFormat:function(jt){var qt=Mt(jt+="",St);return qt.toString=function(){return jt},qt},utcParse:function(jt){var qt=It(jt+="",!0);return qt.toString=function(){return jt},qt}}}var n,a,i,u={"-":"",_:" ",0:"0"},h=/^\s*\d+/,f=/^%/,x=/[\\^$*+?|[\]().{}]/g;function v(dt,Pt,Et){var Ot=dt<0?"-":"",Nt=(Ot?-dt:dt)+"",zt=Nt.length;return Ot+(zt<Et?new Array(Et-zt+1).join(Pt)+Nt:Nt)}function g(dt){return dt.replace(x,"\\$&")}function y(dt){return new RegExp("^(?:"+dt.map(g).join("|")+")","i")}function p(dt){for(var Pt={},Et=-1,Ot=dt.length;++Et<Ot;)Pt[dt[Et].toLowerCase()]=Et;return Pt}function m(dt,Pt,Et){var Ot=h.exec(Pt.slice(Et,Et+1));return Ot?(dt.w=+Ot[0],Et+Ot[0].length):-1}function w(dt,Pt,Et){var Ot=h.exec(Pt.slice(Et,Et+1));return Ot?(dt.u=+Ot[0],Et+Ot[0].length):-1}function c(dt,Pt,Et){var Ot=h.exec(Pt.slice(Et,Et+2));return Ot?(dt.U=+Ot[0],Et+Ot[0].length):-1}function M(dt,Pt,Et){var Ot=h.exec(Pt.slice(Et,Et+2));return Ot?(dt.V=+Ot[0],Et+Ot[0].length):-1}function _(dt,Pt,Et){var Ot=h.exec(Pt.slice(Et,Et+2));return Ot?(dt.W=+Ot[0],Et+Ot[0].length):-1}function E(dt,Pt,Et){var Ot=h.exec(Pt.slice(Et,Et+4));return Ot?(dt.y=+Ot[0],Et+Ot[0].length):-1}function L(dt,Pt,Et){var Ot=h.exec(Pt.slice(Et,Et+2));return Ot?(dt.y=+Ot[0]+(+Ot[0]>68?1900:2e3),Et+Ot[0].length):-1}function C(dt,Pt,Et){var Ot=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Pt.slice(Et,Et+6));return Ot?(dt.Z=Ot[1]?0:-(Ot[2]+(Ot[3]||"00")),Et+Ot[0].length):-1}function O(dt,Pt,Et){var Ot=h.exec(Pt.slice(Et,Et+1));return Ot?(dt.q=3*Ot[0]-3,Et+Ot[0].length):-1}function I(dt,Pt,Et){var Ot=h.exec(Pt.slice(Et,Et+2));return Ot?(dt.m=Ot[0]-1,Et+Ot[0].length):-1}function N(dt,Pt,Et){var Ot=h.exec(Pt.slice(Et,Et+2));return Ot?(dt.d=+Ot[0],Et+Ot[0].length):-1}function R(dt,Pt,Et){var Ot=h.exec(Pt.slice(Et,Et+3));return Ot?(dt.m=0,dt.d=+Ot[0],Et+Ot[0].length):-1}function V(dt,Pt,Et){var Ot=h.exec(Pt.slice(Et,Et+2));return Ot?(dt.H=+Ot[0],Et+Ot[0].length):-1}function F(dt,Pt,Et){var Ot=h.exec(Pt.slice(Et,Et+2));return Ot?(dt.M=+Ot[0],Et+Ot[0].length):-1}function D(dt,Pt,Et){var Ot=h.exec(Pt.slice(Et,Et+2));return Ot?(dt.S=+Ot[0],Et+Ot[0].length):-1}function U(dt,Pt,Et){var Ot=h.exec(Pt.slice(Et,Et+3));return Ot?(dt.L=+Ot[0],Et+Ot[0].length):-1}function j(dt,Pt,Et){var Ot=h.exec(Pt.slice(Et,Et+6));return Ot?(dt.L=Math.floor(Ot[0]/1e3),Et+Ot[0].length):-1}function J(dt,Pt,Et){var Ot=f.exec(Pt.slice(Et,Et+1));return Ot?Et+Ot[0].length:-1}function X(dt,Pt,Et){var Ot=h.exec(Pt.slice(Et));return Ot?(dt.Q=+Ot[0],Et+Ot[0].length):-1}function Z(dt,Pt,Et){var Ot=h.exec(Pt.slice(Et));return Ot?(dt.s=+Ot[0],Et+Ot[0].length):-1}function Y(dt,Pt){return v(dt.getDate(),Pt,2)}function W(dt,Pt){return v(dt.getHours(),Pt,2)}function Q(dt,Pt){return v(dt.getHours()%12||12,Pt,2)}function ne(dt,Pt){return v(1+T.Z.count((0,b.Z)(dt),dt),Pt,3)}function re(dt,Pt){return v(dt.getMilliseconds(),Pt,3)}function ie(dt,Pt){return re(dt,Pt)+"000"}function se(dt,Pt){return v(dt.getMonth()+1,Pt,2)}function ge(dt,Pt){return v(dt.getMinutes(),Pt,2)}function ue(dt,Pt){return v(dt.getSeconds(),Pt,2)}function ce(dt){var Pt=dt.getDay();return Pt===0?7:Pt}function le(dt,Pt){return v(l.OM.count((0,b.Z)(dt)-1,dt),Pt,2)}function de(dt,Pt){var Et=dt.getDay();return dt=Et>=4||Et===0?(0,l.bL)(dt):l.bL.ceil(dt),v(l.bL.count((0,b.Z)(dt),dt)+((0,b.Z)(dt).getDay()===4),Pt,2)}function Ce(dt){return dt.getDay()}function xe(dt,Pt){return v(l.wA.count((0,b.Z)(dt)-1,dt),Pt,2)}function _e(dt,Pt){return v(dt.getFullYear()%100,Pt,2)}function we(dt,Pt){return v(dt.getFullYear()%1e4,Pt,4)}function Ae(dt){var Pt=dt.getTimezoneOffset();return(Pt>0?"-":(Pt*=-1,"+"))+v(Pt/60|0,"0",2)+v(Pt%60,"0",2)}function $(dt,Pt){return v(dt.getUTCDate(),Pt,2)}function oe(dt,Pt){return v(dt.getUTCHours(),Pt,2)}function pe(dt,Pt){return v(dt.getUTCHours()%12||12,Pt,2)}function ye(dt,Pt){return v(1+k.Z.count((0,d.Z)(dt),dt),Pt,3)}function ke(dt,Pt){return v(dt.getUTCMilliseconds(),Pt,3)}function De(dt,Pt){return ke(dt,Pt)+"000"}function Pe(dt,Pt){return v(dt.getUTCMonth()+1,Pt,2)}function Re(dt,Pt){return v(dt.getUTCMinutes(),Pt,2)}function fe(dt,Pt){return v(dt.getUTCSeconds(),Pt,2)}function ve(dt){var Pt=dt.getUTCDay();return Pt===0?7:Pt}function Te(dt,Pt){return v(S.Ox.count((0,d.Z)(dt)-1,dt),Pt,2)}function ze(dt,Pt){var Et=dt.getUTCDay();return dt=Et>=4||Et===0?(0,S.hB)(dt):S.hB.ceil(dt),v(S.hB.count((0,d.Z)(dt),dt)+((0,d.Z)(dt).getUTCDay()===4),Pt,2)}function He(dt){return dt.getUTCDay()}function Ve(dt,Pt){return v(S.l6.count((0,d.Z)(dt)-1,dt),Pt,2)}function nt(dt,Pt){return v(dt.getUTCFullYear()%100,Pt,2)}function tt(dt,Pt){return v(dt.getUTCFullYear()%1e4,Pt,4)}function ot(){return"+0000"}function pt(){return"%"}function Tt(dt){return+dt}function yt(dt){return Math.floor(+dt/1e3)}n=r({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),a=n.format,n.parse,i=n.utcFormat,n.utcParse},82301:function(K,z,e){e.d(z,{a:function(){return T}});var S=e(30052),k=e(54263),l=(0,S.Z)(function(b){b.setHours(0,0,0,0)},function(b,d){b.setDate(b.getDate()+d)},function(b,d){return(d-b-(d.getTimezoneOffset()-b.getTimezoneOffset())*k.yB)/k.UD},function(b){return b.getDate()-1});z.Z=l;var T=l.range},54263:function(K,z,e){e.d(z,{UD:function(){return T},Y2:function(){return l},Ym:function(){return S},iM:function(){return b},yB:function(){return k}});var S=1e3,k=6e4,l=36e5,T=864e5,b=6048e5},81041:function(K,z,e){e.r(z),e.d(z,{timeDay:function(){return h.Z},timeDays:function(){return h.a},timeFriday:function(){return f.mC},timeFridays:function(){return f.b$},timeHour:function(){return i},timeHours:function(){return u},timeInterval:function(){return S.Z},timeMillisecond:function(){return l},timeMilliseconds:function(){return T},timeMinute:function(){return r},timeMinutes:function(){return n},timeMonday:function(){return f.wA},timeMondays:function(){return f.bJ},timeMonth:function(){return v},timeMonths:function(){return g},timeSaturday:function(){return f.EY},timeSaturdays:function(){return f.Ff},timeSecond:function(){return s},timeSeconds:function(){return t},timeSunday:function(){return f.OM},timeSundays:function(){return f.vm},timeThursday:function(){return f.bL},timeThursdays:function(){return f.$t},timeTuesday:function(){return f.sy},timeTuesdays:function(){return f.aU},timeWednesday:function(){return f.zg},timeWednesdays:function(){return f.Ld},timeWeek:function(){return f.OM},timeWeeks:function(){return f.vm},timeYear:function(){return y.Z},timeYears:function(){return y.g},utcDay:function(){return E.Z},utcDays:function(){return E.y},utcFriday:function(){return L.QQ},utcFridays:function(){return L.fz},utcHour:function(){return M},utcHours:function(){return _},utcMillisecond:function(){return l},utcMilliseconds:function(){return T},utcMinute:function(){return m},utcMinutes:function(){return w},utcMonday:function(){return L.l6},utcMondays:function(){return L.$3},utcMonth:function(){return O},utcMonths:function(){return I},utcSaturday:function(){return L.g4},utcSaturdays:function(){return L.Q_},utcSecond:function(){return s},utcSeconds:function(){return t},utcSunday:function(){return L.Ox},utcSundays:function(){return L.SU},utcThursday:function(){return L.hB},utcThursdays:function(){return L.xj},utcTuesday:function(){return L.J1},utcTuesdays:function(){return L.DK},utcWednesday:function(){return L.b3},utcWednesdays:function(){return L.uy},utcWeek:function(){return L.Ox},utcWeeks:function(){return L.SU},utcYear:function(){return N.Z},utcYears:function(){return N.D}});var S=e(30052),k=(0,S.Z)(function(){},function(R,V){R.setTime(+R+V)},function(R,V){return V-R});k.every=function(R){return R=Math.floor(R),isFinite(R)&&R>0?R>1?(0,S.Z)(function(V){V.setTime(Math.floor(V/R)*R)},function(V,F){V.setTime(+V+F*R)},function(V,F){return(F-V)/R}):k:null};var l=k,T=k.range,b=e(54263),d=(0,S.Z)(function(R){R.setTime(R-R.getMilliseconds())},function(R,V){R.setTime(+R+V*b.Ym)},function(R,V){return(V-R)/b.Ym},function(R){return R.getUTCSeconds()}),s=d,t=d.range,o=(0,S.Z)(function(R){R.setTime(R-R.getMilliseconds()-R.getSeconds()*b.Ym)},function(R,V){R.setTime(+R+V*b.yB)},function(R,V){return(V-R)/b.yB},function(R){return R.getMinutes()}),r=o,n=o.range,a=(0,S.Z)(function(R){R.setTime(R-R.getMilliseconds()-R.getSeconds()*b.Ym-R.getMinutes()*b.yB)},function(R,V){R.setTime(+R+V*b.Y2)},function(R,V){return(V-R)/b.Y2},function(R){return R.getHours()}),i=a,u=a.range,h=e(82301),f=e(59879),x=(0,S.Z)(function(R){R.setDate(1),R.setHours(0,0,0,0)},function(R,V){R.setMonth(R.getMonth()+V)},function(R,V){return V.getMonth()-R.getMonth()+12*(V.getFullYear()-R.getFullYear())},function(R){return R.getMonth()}),v=x,g=x.range,y=e(34823),p=(0,S.Z)(function(R){R.setUTCSeconds(0,0)},function(R,V){R.setTime(+R+V*b.yB)},function(R,V){return(V-R)/b.yB},function(R){return R.getUTCMinutes()}),m=p,w=p.range,c=(0,S.Z)(function(R){R.setUTCMinutes(0,0,0)},function(R,V){R.setTime(+R+V*b.Y2)},function(R,V){return(V-R)/b.Y2},function(R){return R.getUTCHours()}),M=c,_=c.range,E=e(48480),L=e(58176),C=(0,S.Z)(function(R){R.setUTCDate(1),R.setUTCHours(0,0,0,0)},function(R,V){R.setUTCMonth(R.getUTCMonth()+V)},function(R,V){return V.getUTCMonth()-R.getUTCMonth()+12*(V.getUTCFullYear()-R.getUTCFullYear())},function(R){return R.getUTCMonth()}),O=C,I=C.range,N=e(79791)},30052:function(K,z,e){e.d(z,{Z:function(){return l}});var S=new Date,k=new Date;function l(T,b,d,s){function t(o){return T(o=arguments.length===0?new Date:new Date(+o)),o}return t.floor=function(o){return T(o=new Date(+o)),o},t.ceil=function(o){return T(o=new Date(o-1)),b(o,1),T(o),o},t.round=function(o){var r=t(o),n=t.ceil(o);return o-r<n-o?r:n},t.offset=function(o,r){return b(o=new Date(+o),r==null?1:Math.floor(r)),o},t.range=function(o,r,n){var a,i=[];if(o=t.ceil(o),n=n==null?1:Math.floor(n),!(o<r&&n>0))return i;do i.push(a=new Date(+o)),b(o,n),T(o);while(a<o&&o<r);return i},t.filter=function(o){return l(function(r){if(r>=r)for(;T(r),!o(r);)r.setTime(r-1)},function(r,n){if(r>=r)if(n<0)for(;++n<=0;)for(;b(r,-1),!o(r););else for(;--n>=0;)for(;b(r,1),!o(r););})},d&&(t.count=function(o,r){return S.setTime(+o),k.setTime(+r),T(S),T(k),Math.floor(d(S,k))},t.every=function(o){return o=Math.floor(o),isFinite(o)&&o>0?o>1?t.filter(s?function(r){return s(r)%o==0}:function(r){return t.count(0,r)%o==0}):t:null}),t}},48480:function(K,z,e){e.d(z,{y:function(){return T}});var S=e(30052),k=e(54263),l=(0,S.Z)(function(b){b.setUTCHours(0,0,0,0)},function(b,d){b.setUTCDate(b.getUTCDate()+d)},function(b,d){return(d-b)/k.UD},function(b){return b.getUTCDate()-1});z.Z=l;var T=l.range},58176:function(K,z,e){e.d(z,{$3:function(){return a},DK:function(){return i},J1:function(){return d},Ox:function(){return T},QQ:function(){return o},Q_:function(){return x},SU:function(){return n},b3:function(){return s},fz:function(){return f},g4:function(){return r},hB:function(){return t},l6:function(){return b},uy:function(){return u},xj:function(){return h}});var S=e(30052),k=e(54263);function l(v){return(0,S.Z)(function(g){g.setUTCDate(g.getUTCDate()-(g.getUTCDay()+7-v)%7),g.setUTCHours(0,0,0,0)},function(g,y){g.setUTCDate(g.getUTCDate()+7*y)},function(g,y){return(y-g)/k.iM})}var T=l(0),b=l(1),d=l(2),s=l(3),t=l(4),o=l(5),r=l(6),n=T.range,a=b.range,i=d.range,u=s.range,h=t.range,f=o.range,x=r.range},79791:function(K,z,e){e.d(z,{D:function(){return l}});var S=e(30052),k=(0,S.Z)(function(T){T.setUTCMonth(0,1),T.setUTCHours(0,0,0,0)},function(T,b){T.setUTCFullYear(T.getUTCFullYear()+b)},function(T,b){return b.getUTCFullYear()-T.getUTCFullYear()},function(T){return T.getUTCFullYear()});k.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,S.Z)(function(b){b.setUTCFullYear(Math.floor(b.getUTCFullYear()/T)*T),b.setUTCMonth(0,1),b.setUTCHours(0,0,0,0)},function(b,d){b.setUTCFullYear(b.getUTCFullYear()+d*T)}):null},z.Z=k;var l=k.range},59879:function(K,z,e){e.d(z,{$t:function(){return h},EY:function(){return r},Ff:function(){return x},Ld:function(){return u},OM:function(){return T},aU:function(){return i},b$:function(){return f},bJ:function(){return a},bL:function(){return t},mC:function(){return o},sy:function(){return d},vm:function(){return n},wA:function(){return b},zg:function(){return s}});var S=e(30052),k=e(54263);function l(v){return(0,S.Z)(function(g){g.setDate(g.getDate()-(g.getDay()+7-v)%7),g.setHours(0,0,0,0)},function(g,y){g.setDate(g.getDate()+7*y)},function(g,y){return(y-g-(y.getTimezoneOffset()-g.getTimezoneOffset())*k.yB)/k.iM})}var T=l(0),b=l(1),d=l(2),s=l(3),t=l(4),o=l(5),r=l(6),n=T.range,a=b.range,i=d.range,u=s.range,h=t.range,f=o.range,x=r.range},34823:function(K,z,e){e.d(z,{g:function(){return l}});var S=e(30052),k=(0,S.Z)(function(T){T.setMonth(0,1),T.setHours(0,0,0,0)},function(T,b){T.setFullYear(T.getFullYear()+b)},function(T,b){return b.getFullYear()-T.getFullYear()},function(T){return T.getFullYear()});k.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,S.Z)(function(b){b.setFullYear(Math.floor(b.getFullYear()/T)*T),b.setMonth(0,1),b.setHours(0,0,0,0)},function(b,d){b.setFullYear(b.getFullYear()+d*T)}):null},z.Z=k;var l=k.range},17045:function(K,z,e){var S=e(8709),k=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",l=Object.prototype.toString,T=Array.prototype.concat,b=Object.defineProperty,d=e(55622)(),s=b&&d,t=function(r,n,a,i){if(n in r){if(i===!0){if(r[n]===a)return}else if(typeof(u=i)!="function"||l.call(u)!=="[object Function]"||!i())return}var u;s?b(r,n,{configurable:!0,enumerable:!1,value:a,writable:!0}):r[n]=a},o=function(r,n){var a=arguments.length>2?arguments[2]:{},i=S(n);k&&(i=T.call(i,Object.getOwnPropertySymbols(n)));for(var u=0;u<i.length;u+=1)t(r,i[u],n[i[u]],a[i[u]])};o.supportsDescriptors=!!s,K.exports=o},46775:function(K){K.exports=function(){for(var z=0;z<arguments.length;z++)if(arguments[z]!==void 0)return arguments[z]}},53545:function(K){K.exports=S;var z=(S.canvas=document.createElement("canvas")).getContext("2d"),e=k([32,126]);function S(l,T){Array.isArray(l)&&(l=l.join(", "));var b,d={},s=16,t=.05;T&&(T.length===2&&typeof T[0]=="number"?b=k(T):Array.isArray(T)?b=T:(T.o?b=k(T.o):T.pairs&&(b=T.pairs),T.fontSize&&(s=T.fontSize),T.threshold!=null&&(t=T.threshold))),b||(b=e),z.font=s+"px "+l;for(var o=0;o<b.length;o++){var r=b[o],n=z.measureText(r[0]).width+z.measureText(r[1]).width,a=z.measureText(r).width;if(Math.abs(n-a)>s*t){var i=(a-n)/s;d[r]=1e3*i}}return d}function k(l){for(var T=[],b=l[0];b<=l[1];b++)for(var d=String.fromCharCode(b),s=l[0];s<l[1];s++){var t=d+String.fromCharCode(s);T.push(t)}return T}S.createPairs=k,S.ascii=e},31457:function(K,z,e){var S=e(65185),k=e(18625),l={M:"moveTo",C:"bezierCurveTo"};K.exports=function(T,b){T.beginPath(),k(S(b)).forEach(function(d){var s=d[0],t=d.slice(1);T[l[s]].apply(T,t)}),T.closePath()}},90660:function(K){K.exports=function(z){switch(z){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},12129:function(K){function z(e,S,k){var l=0|e[k];if(l<=0)return[];var T,b=new Array(l);if(k===e.length-1)for(T=0;T<l;++T)b[T]=S;else for(T=0;T<l;++T)b[T]=z(e,S,k+1);return b}K.exports=function(e,S){switch(S===void 0&&(S=0),typeof e){case"number":if(e>0)return function(k,l){var T,b;for(T=new Array(k),b=0;b<k;++b)T[b]=l;return T}(0|e,S);break;case"object":if(typeof e.length=="number")return z(e,S,0)}return[]}},11474:function(K){function z(M,_,E){E=E||2;var L,C,O,I,N,R,V,F=_&&_.length,D=F?_[0]*E:M.length,U=e(M,0,D,E,!0),j=[];if(!U||U.next===U.prev)return j;if(F&&(U=function(X,Z,Y,W){var Q,ne,re,ie=[];for(Q=0,ne=Z.length;Q<ne;Q++)(re=e(X,Z[Q]*W,Q<ne-1?Z[Q+1]*W:X.length,W,!1))===re.next&&(re.steiner=!0),ie.push(n(re));for(ie.sort(s),Q=0;Q<ie.length;Q++)t(ie[Q],Y),Y=S(Y,Y.next);return Y}(M,_,U,E)),M.length>80*E){L=O=M[0],C=I=M[1];for(var J=E;J<D;J+=E)(N=M[J])<L&&(L=N),(R=M[J+1])<C&&(C=R),N>O&&(O=N),R>I&&(I=R);V=(V=Math.max(O-L,I-C))!==0?1/V:0}return k(U,j,E,L,C,V),j}function e(M,_,E,L,C){var O,I;if(C===c(M,_,E,L)>0)for(O=_;O<E;O+=L)I=p(O,M[O],M[O+1],I);else for(O=E-L;O>=_;O-=L)I=p(O,M[O],M[O+1],I);return I&&h(I,I.next)&&(m(I),I=I.next),I}function S(M,_){if(!M)return M;_||(_=M);var E,L=M;do if(E=!1,L.steiner||!h(L,L.next)&&u(L.prev,L,L.next)!==0)L=L.next;else{if(m(L),(L=_=L.prev)===L.next)break;E=!0}while(E||L!==_);return _}function k(M,_,E,L,C,O,I){if(M){!I&&O&&function(F,D,U,j){var J=F;do J.z===null&&(J.z=r(J.x,J.y,D,U,j)),J.prevZ=J.prev,J.nextZ=J.next,J=J.next;while(J!==F);J.prevZ.nextZ=null,J.prevZ=null,function(X){var Z,Y,W,Q,ne,re,ie,se,ge=1;do{for(Y=X,X=null,ne=null,re=0;Y;){for(re++,W=Y,ie=0,Z=0;Z<ge&&(ie++,W=W.nextZ);Z++);for(se=ge;ie>0||se>0&&W;)ie!==0&&(se===0||!W||Y.z<=W.z)?(Q=Y,Y=Y.nextZ,ie--):(Q=W,W=W.nextZ,se--),ne?ne.nextZ=Q:X=Q,Q.prevZ=ne,ne=Q;Y=W}ne.nextZ=null,ge*=2}while(re>1)}(J)}(M,L,C,O);for(var N,R,V=M;M.prev!==M.next;)if(N=M.prev,R=M.next,O?T(M,L,C,O):l(M))_.push(N.i/E),_.push(M.i/E),_.push(R.i/E),m(M),M=R.next,V=R.next;else if((M=R)===V){I?I===1?k(M=b(S(M),_,E),_,E,L,C,O,2):I===2&&d(M,_,E,L,C,O):k(S(M),_,E,L,C,O,1);break}}}function l(M){var _=M.prev,E=M,L=M.next;if(u(_,E,L)>=0)return!1;for(var C=M.next.next;C!==M.prev;){if(a(_.x,_.y,E.x,E.y,L.x,L.y,C.x,C.y)&&u(C.prev,C,C.next)>=0)return!1;C=C.next}return!0}function T(M,_,E,L){var C=M.prev,O=M,I=M.next;if(u(C,O,I)>=0)return!1;for(var N=C.x<O.x?C.x<I.x?C.x:I.x:O.x<I.x?O.x:I.x,R=C.y<O.y?C.y<I.y?C.y:I.y:O.y<I.y?O.y:I.y,V=C.x>O.x?C.x>I.x?C.x:I.x:O.x>I.x?O.x:I.x,F=C.y>O.y?C.y>I.y?C.y:I.y:O.y>I.y?O.y:I.y,D=r(N,R,_,E,L),U=r(V,F,_,E,L),j=M.prevZ,J=M.nextZ;j&&j.z>=D&&J&&J.z<=U;){if(j!==M.prev&&j!==M.next&&a(C.x,C.y,O.x,O.y,I.x,I.y,j.x,j.y)&&u(j.prev,j,j.next)>=0||(j=j.prevZ,J!==M.prev&&J!==M.next&&a(C.x,C.y,O.x,O.y,I.x,I.y,J.x,J.y)&&u(J.prev,J,J.next)>=0))return!1;J=J.nextZ}for(;j&&j.z>=D;){if(j!==M.prev&&j!==M.next&&a(C.x,C.y,O.x,O.y,I.x,I.y,j.x,j.y)&&u(j.prev,j,j.next)>=0)return!1;j=j.prevZ}for(;J&&J.z<=U;){if(J!==M.prev&&J!==M.next&&a(C.x,C.y,O.x,O.y,I.x,I.y,J.x,J.y)&&u(J.prev,J,J.next)>=0)return!1;J=J.nextZ}return!0}function b(M,_,E){var L=M;do{var C=L.prev,O=L.next.next;!h(C,O)&&f(C,L,L.next,O)&&g(C,O)&&g(O,C)&&(_.push(C.i/E),_.push(L.i/E),_.push(O.i/E),m(L),m(L.next),L=M=O),L=L.next}while(L!==M);return S(L)}function d(M,_,E,L,C,O){var I=M;do{for(var N=I.next.next;N!==I.prev;){if(I.i!==N.i&&i(I,N)){var R=y(I,N);return I=S(I,I.next),R=S(R,R.next),k(I,_,E,L,C,O),void k(R,_,E,L,C,O)}N=N.next}I=I.next}while(I!==M)}function s(M,_){return M.x-_.x}function t(M,_){if(_=function(L,C){var O,I=C,N=L.x,R=L.y,V=-1/0;do{if(R<=I.y&&R>=I.next.y&&I.next.y!==I.y){var F=I.x+(R-I.y)*(I.next.x-I.x)/(I.next.y-I.y);if(F<=N&&F>V){if(V=F,F===N){if(R===I.y)return I;if(R===I.next.y)return I.next}O=I.x<I.next.x?I:I.next}}I=I.next}while(I!==C);if(!O)return null;if(N===V)return O;var D,U=O,j=O.x,J=O.y,X=1/0;I=O;do N>=I.x&&I.x>=j&&N!==I.x&&a(R<J?N:V,R,j,J,R<J?V:N,R,I.x,I.y)&&(D=Math.abs(R-I.y)/(N-I.x),g(I,L)&&(D<X||D===X&&(I.x>O.x||I.x===O.x&&o(O,I)))&&(O=I,X=D)),I=I.next;while(I!==U);return O}(M,_),_){var E=y(_,M);S(_,_.next),S(E,E.next)}}function o(M,_){return u(M.prev,M,_.prev)<0&&u(_.next,M,M.next)<0}function r(M,_,E,L,C){return(M=1431655765&((M=858993459&((M=252645135&((M=16711935&((M=32767*(M-E)*C)|M<<8))|M<<4))|M<<2))|M<<1))|(_=1431655765&((_=858993459&((_=252645135&((_=16711935&((_=32767*(_-L)*C)|_<<8))|_<<4))|_<<2))|_<<1))<<1}function n(M){var _=M,E=M;do(_.x<E.x||_.x===E.x&&_.y<E.y)&&(E=_),_=_.next;while(_!==M);return E}function a(M,_,E,L,C,O,I,N){return(C-I)*(_-N)-(M-I)*(O-N)>=0&&(M-I)*(L-N)-(E-I)*(_-N)>=0&&(E-I)*(O-N)-(C-I)*(L-N)>=0}function i(M,_){return M.next.i!==_.i&&M.prev.i!==_.i&&!function(E,L){var C=E;do{if(C.i!==E.i&&C.next.i!==E.i&&C.i!==L.i&&C.next.i!==L.i&&f(C,C.next,E,L))return!0;C=C.next}while(C!==E);return!1}(M,_)&&(g(M,_)&&g(_,M)&&function(E,L){var C=E,O=!1,I=(E.x+L.x)/2,N=(E.y+L.y)/2;do C.y>N!=C.next.y>N&&C.next.y!==C.y&&I<(C.next.x-C.x)*(N-C.y)/(C.next.y-C.y)+C.x&&(O=!O),C=C.next;while(C!==E);return O}(M,_)&&(u(M.prev,M,_.prev)||u(M,_.prev,_))||h(M,_)&&u(M.prev,M,M.next)>0&&u(_.prev,_,_.next)>0)}function u(M,_,E){return(_.y-M.y)*(E.x-_.x)-(_.x-M.x)*(E.y-_.y)}function h(M,_){return M.x===_.x&&M.y===_.y}function f(M,_,E,L){var C=v(u(M,_,E)),O=v(u(M,_,L)),I=v(u(E,L,M)),N=v(u(E,L,_));return C!==O&&I!==N||!(C!==0||!x(M,E,_))||!(O!==0||!x(M,L,_))||!(I!==0||!x(E,M,L))||!(N!==0||!x(E,_,L))}function x(M,_,E){return _.x<=Math.max(M.x,E.x)&&_.x>=Math.min(M.x,E.x)&&_.y<=Math.max(M.y,E.y)&&_.y>=Math.min(M.y,E.y)}function v(M){return M>0?1:M<0?-1:0}function g(M,_){return u(M.prev,M,M.next)<0?u(M,_,M.next)>=0&&u(M,M.prev,_)>=0:u(M,_,M.prev)<0||u(M,M.next,_)<0}function y(M,_){var E=new w(M.i,M.x,M.y),L=new w(_.i,_.x,_.y),C=M.next,O=_.prev;return M.next=_,_.prev=M,E.next=C,C.prev=E,L.next=E,E.prev=L,O.next=L,L.prev=O,L}function p(M,_,E,L){var C=new w(M,_,E);return L?(C.next=L.next,C.prev=L,L.next.prev=C,L.next=C):(C.prev=C,C.next=C),C}function m(M){M.next.prev=M.prev,M.prev.next=M.next,M.prevZ&&(M.prevZ.nextZ=M.nextZ),M.nextZ&&(M.nextZ.prevZ=M.prevZ)}function w(M,_,E){this.i=M,this.x=_,this.y=E,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function c(M,_,E,L){for(var C=0,O=_,I=E-L;O<E;O+=L)C+=(M[I]-M[O])*(M[O+1]+M[I+1]),I=O;return C}K.exports=z,K.exports.default=z,z.deviation=function(M,_,E,L){var C=_&&_.length,O=C?_[0]*E:M.length,I=Math.abs(c(M,0,O,E));if(C)for(var N=0,R=_.length;N<R;N++){var V=_[N]*E,F=N<R-1?_[N+1]*E:M.length;I-=Math.abs(c(M,V,F,E))}var D=0;for(N=0;N<L.length;N+=3){var U=L[N]*E,j=L[N+1]*E,J=L[N+2]*E;D+=Math.abs((M[U]-M[J])*(M[j+1]-M[U+1])-(M[U]-M[j])*(M[J+1]-M[U+1]))}return I===0&&D===0?0:Math.abs((D-I)/I)},z.flatten=function(M){for(var _=M[0][0].length,E={vertices:[],holes:[],dimensions:_},L=0,C=0;C<M.length;C++){for(var O=0;O<M[C].length;O++)for(var I=0;I<_;I++)E.vertices.push(M[C][O][I]);C>0&&(L+=M[C-1].length,E.holes.push(L))}return E}},2502:function(K,z,e){var S=e(68664);K.exports=function(k,l){var T,b=[],d=[],s=[],t={},o=[];function r(g){s[g]=!1,t.hasOwnProperty(g)&&Object.keys(t[g]).forEach(function(y){delete t[g][y],s[y]&&r(y)})}function n(g){var y,p,m=!1;for(d.push(g),s[g]=!0,y=0;y<o[g].length;y++)(p=o[g][y])===T?(a(T,d),m=!0):s[p]||(m=n(p));if(m)r(g);else for(y=0;y<o[g].length;y++){p=o[g][y];var w=t[p];w||(w={},t[p]=w),w[p]=!0}return d.pop(),m}function a(g,y){var p=[].concat(y).concat(g);l?l(n):b.push(p)}function i(g){(function(E){for(var L=0;L<k.length;L++)L<E&&(k[L]=[]),k[L]=k[L].filter(function(C){return C>=E})})(g);for(var y,p=S(k).components.filter(function(E){return E.length>1}),m=1/0,w=0;w<p.length;w++)for(var c=0;c<p[w].length;c++)p[w][c]<m&&(m=p[w][c],y=w);var M=p[y];if(!M)return!1;var _=k.map(function(E,L){return M.indexOf(L)===-1?[]:E.filter(function(C){return M.indexOf(C)!==-1})});return{leastVertex:m,adjList:_}}T=0;for(var u=k.length;T<u;){var h=i(T);if(T=h.leastVertex,o=h.adjList){for(var f=0;f<o.length;f++)for(var x=0;x<o[f].length;x++){var v=o[f][x];s[+v]=!1,t[v]={}}n(T),T+=1}else T=u}return l?void 0:b}},16134:function(K,z,e){var S=e(36672);K.exports=function(){return S(this).length=0,this}},4892:function(K,z,e){K.exports=e(64404)()?Array.from:e(49441)},64404:function(K){K.exports=function(){var z,e,S=Array.from;return typeof S=="function"&&(e=S(z=["raz","dwa"]),!!(e&&e!==z&&e[1]==="dwa"))}},49441:function(K,z,e){var S=e(8260).iterator,k=e(73051),l=e(33717),T=e(35976),b=e(78513),d=e(36672),s=e(95296),t=e(87963),o=Array.isArray,r=Function.prototype.call,n={configurable:!0,enumerable:!0,writable:!0,value:null},a=Object.defineProperty;K.exports=function(i){var u,h,f,x,v,g,y,p,m,w,c=arguments[1],M=arguments[2];if(i=Object(d(i)),s(c)&&b(c),this&&this!==Array&&l(this))u=this;else{if(!c){if(k(i))return(v=i.length)!==1?Array.apply(null,i):((x=new Array(1))[0]=i[0],x);if(o(i)){for(x=new Array(v=i.length),h=0;h<v;++h)x[h]=i[h];return x}}x=[]}if(!o(i)){if((m=i[S])!==void 0){for(y=b(m).call(i),u&&(x=new u),p=y.next(),h=0;!p.done;)w=c?r.call(c,M,p.value,h):p.value,u?(n.value=w,a(x,h,n)):x[h]=w,p=y.next(),++h;v=h}else if(t(i)){for(v=i.length,u&&(x=new u),h=0,f=0;h<v;++h)w=i[h],h+1<v&&(g=w.charCodeAt(0))>=55296&&g<=56319&&(w+=i[++h]),w=c?r.call(c,M,w,f):w,u?(n.value=w,a(x,f,n)):x[f]=w,++f;v=f}}if(v===void 0)for(v=T(i.length),u&&(x=new u(v)),h=0;h<v;++h)w=c?r.call(c,M,i[h],h):i[h],u?(n.value=w,a(x,h,n)):x[h]=w;return u&&(n.value=null,x.length=v),x}},73051:function(K){var z=Object.prototype.toString,e=z.call(function(){return arguments}());K.exports=function(S){return z.call(S)===e}},33717:function(K){var z=Object.prototype.toString,e=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);K.exports=function(S){return typeof S=="function"&&e(z.call(S))}},52345:function(K){K.exports=function(){}},9953:function(K,z,e){K.exports=e(90436)()?Math.sign:e(6069)},90436:function(K){K.exports=function(){var z=Math.sign;return typeof z=="function"&&z(10)===1&&z(-20)===-1}},6069:function(K){K.exports=function(z){return z=Number(z),isNaN(z)||z===0?z:z>0?1:-1}},56247:function(K,z,e){var S=e(9953),k=Math.abs,l=Math.floor;K.exports=function(T){return isNaN(T)?0:(T=Number(T))!==0&&isFinite(T)?S(T)*l(k(T)):T}},35976:function(K,z,e){var S=e(56247),k=Math.max;K.exports=function(l){return k(0,S(l))}},67260:function(K,z,e){var S=e(78513),k=e(36672),l=Function.prototype.bind,T=Function.prototype.call,b=Object.keys,d=Object.prototype.propertyIsEnumerable;K.exports=function(s,t){return function(o,r){var n,a=arguments[2],i=arguments[3];return o=Object(k(o)),S(r),n=b(o),i&&n.sort(typeof i=="function"?l.call(i,o):void 0),typeof s!="function"&&(s=n[s]),T.call(s,n,function(u,h){return d.call(o,u)?T.call(r,a,o[u],u,o,h):t})}}},95879:function(K,z,e){K.exports=e(73583)()?Object.assign:e(34205)},73583:function(K){K.exports=function(){var z,e=Object.assign;return typeof e=="function"&&(e(z={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),z.foo+z.bar+z.trzy==="razdwatrzy")}},34205:function(K,z,e){var S=e(68700),k=e(36672),l=Math.max;K.exports=function(T,b){var d,s,t,o=l(arguments.length,2);for(T=Object(k(T)),t=function(r){try{T[r]=b[r]}catch(n){d||(d=n)}},s=1;s<o;++s)S(b=arguments[s]).forEach(t);if(d!==void 0)throw d;return T}},19012:function(K,z,e){var S=e(4892),k=e(95879),l=e(36672);K.exports=function(T){var b=Object(l(T)),d=arguments[1],s=Object(arguments[2]);if(b!==T&&!d)return b;var t={};return d?S(d,function(o){(s.ensure||o in T)&&(t[o]=T[o])}):k(t,T),t}},52818:function(K,z,e){var S,k,l,T,b=Object.create;e(33247)()||(S=e(51882)),K.exports=S?S.level!==1?b:(k={},l={},T={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(d){l[d]=d!=="__proto__"?T:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(k,l),Object.defineProperty(S,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:k}),function(d,s){return b(d===null?k:d,s)}):b},96437:function(K,z,e){K.exports=e(67260)("forEach")},99611:function(K,z,e){var S=e(95296),k={function:!0,object:!0};K.exports=function(l){return S(l)&&k[typeof l]||!1}},95296:function(K,z,e){var S=e(52345)();K.exports=function(k){return k!==S&&k!==null}},68700:function(K,z,e){K.exports=e(13895)()?Object.keys:e(25217)},13895:function(K){K.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},25217:function(K,z,e){var S=e(95296),k=Object.keys;K.exports=function(l){return k(S(l)?Object(l):l)}},16906:function(K,z,e){var S=e(78513),k=e(96437),l=Function.prototype.call;K.exports=function(T,b){var d={},s=arguments[2];return S(b),k(T,function(t,o,r,n){d[o]=l.call(b,s,t,o,r,n)}),d}},21780:function(K,z,e){var S=e(95296),k=Array.prototype.forEach,l=Object.create,T=function(b,d){var s;for(s in b)d[s]=b[s]};K.exports=function(b){var d=l(null);return k.call(arguments,function(s){S(s)&&T(Object(s),d)}),d}},1496:function(K,z,e){K.exports=e(33247)()?Object.setPrototypeOf:e(51882)},33247:function(K){var z=Object.create,e=Object.getPrototypeOf,S={};K.exports=function(){var k=Object.setPrototypeOf,l=arguments[0]||z;return typeof k=="function"&&e(k(l(null),S))===S}},51882:function(K,z,e){var S,k,l,T,b=e(99611),d=e(36672),s=Object.prototype.isPrototypeOf,t=Object.defineProperty,o={configurable:!0,enumerable:!1,writable:!0,value:void 0};S=function(r,n){if(d(r),n===null||b(n))return r;throw new TypeError("Prototype must be null or an object")},K.exports=(k=function(){var r,n=Object.create(null),a={},i=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(i){try{(r=i.set).call(n,a)}catch{}if(Object.getPrototypeOf(n)===a)return{set:r,level:2}}return n.__proto__=a,Object.getPrototypeOf(n)===a?{level:2}:((n={}).__proto__=a,Object.getPrototypeOf(n)===a&&{level:1})}(),k?(k.level===2?k.set?(T=k.set,l=function(r,n){return T.call(S(r,n),n),r}):l=function(r,n){return S(r,n).__proto__=n,r}:l=function r(n,a){var i;return S(n,a),(i=s.call(r.nullPolyfill,n))&&delete r.nullPolyfill.__proto__,a===null&&(a=r.nullPolyfill),n.__proto__=a,i&&t(r.nullPolyfill,"__proto__",o),n},Object.defineProperty(l,"level",{configurable:!1,enumerable:!1,writable:!1,value:k.level})):null),e(52818)},78513:function(K){K.exports=function(z){if(typeof z!="function")throw new TypeError(z+" is not a function");return z}},98976:function(K,z,e){var S=e(99611);K.exports=function(k){if(!S(k))throw new TypeError(k+" is not an Object");return k}},36672:function(K,z,e){var S=e(95296);K.exports=function(k){if(!S(k))throw new TypeError("Cannot use null or undefined");return k}},66741:function(K,z,e){K.exports=e(17557)()?String.prototype.contains:e(60381)},17557:function(K){var z="razdwatrzy";K.exports=function(){return typeof z.contains=="function"&&z.contains("dwa")===!0&&z.contains("foo")===!1}},60381:function(K){var z=String.prototype.indexOf;K.exports=function(e){return z.call(this,e,arguments[1])>-1}},87963:function(K){var z=Object.prototype.toString,e=z.call("");K.exports=function(S){return typeof S=="string"||S&&typeof S=="object"&&(S instanceof String||z.call(S)===e)||!1}},43043:function(K){var z=Object.create(null),e=Math.random;K.exports=function(){var S;do S=e().toString(36).slice(2);while(z[S]);return S}},32411:function(K,z,e){var S,k=e(1496),l=e(66741),T=e(62072),b=e(8260),d=e(95426),s=Object.defineProperty;S=K.exports=function(t,o){if(!(this instanceof S))throw new TypeError("Constructor requires 'new'");d.call(this,t),o=o?l.call(o,"key+value")?"key+value":l.call(o,"key")?"key":"value":"value",s(this,"__kind__",T("",o))},k&&k(S,d),delete S.prototype.constructor,S.prototype=Object.create(d.prototype,{_resolve:T(function(t){return this.__kind__==="value"?this.__list__[t]:this.__kind__==="key+value"?[t,this.__list__[t]]:t})}),s(S.prototype,b.toStringTag,T("c","Array Iterator"))},27515:function(K,z,e){var S=e(73051),k=e(78513),l=e(87963),T=e(66661),b=Array.isArray,d=Function.prototype.call,s=Array.prototype.some;K.exports=function(t,o){var r,n,a,i,u,h,f,x,v=arguments[2];if(b(t)||S(t)?r="array":l(t)?r="string":t=T(t),k(o),a=function(){i=!0},r!=="array")if(r!=="string")for(n=t.next();!n.done;){if(d.call(o,v,n.value,a),i)return;n=t.next()}else for(h=t.length,u=0;u<h&&(f=t[u],u+1<h&&(x=f.charCodeAt(0))>=55296&&x<=56319&&(f+=t[++u]),d.call(o,v,f,a),!i);++u);else s.call(t,function(g){return d.call(o,v,g,a),i})}},66661:function(K,z,e){var S=e(73051),k=e(87963),l=e(32411),T=e(259),b=e(58095),d=e(8260).iterator;K.exports=function(s){return typeof b(s)[d]=="function"?s[d]():S(s)?new l(s):k(s)?new T(s):new l(s)}},95426:function(K,z,e){var S,k=e(16134),l=e(95879),T=e(78513),b=e(36672),d=e(62072),s=e(55174),t=e(8260),o=Object.defineProperty,r=Object.defineProperties;K.exports=S=function(n,a){if(!(this instanceof S))throw new TypeError("Constructor requires 'new'");r(this,{__list__:d("w",b(n)),__context__:d("w",a),__nextIndex__:d("w",0)}),a&&(T(a.on),a.on("_add",this._onAdd),a.on("_delete",this._onDelete),a.on("_clear",this._onClear))},delete S.prototype.constructor,r(S.prototype,l({_next:d(function(){var n;if(this.__list__)return this.__redo__&&(n=this.__redo__.shift())!==void 0?n:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:d(function(){return this._createResult(this._next())}),_createResult:d(function(n){return n===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(n)}}),_resolve:d(function(n){return this.__list__[n]}),_unBind:d(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:d(function(){return"[object "+(this[t.toStringTag]||"Object")+"]"})},s({_onAdd:d(function(n){n>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(a,i){a>=n&&(this.__redo__[i]=++a)},this),this.__redo__.push(n)):o(this,"__redo__",d("c",[n])))}),_onDelete:d(function(n){var a;n>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&((a=this.__redo__.indexOf(n))!==-1&&this.__redo__.splice(a,1),this.__redo__.forEach(function(i,u){i>n&&(this.__redo__[u]=--i)},this)))}),_onClear:d(function(){this.__redo__&&k.call(this.__redo__),this.__nextIndex__=0})}))),o(S.prototype,t.iterator,d(function(){return this}))},35940:function(K,z,e){var S=e(73051),k=e(95296),l=e(87963),T=e(8260).iterator,b=Array.isArray;K.exports=function(d){return!(!k(d)||!b(d)&&!l(d)&&!S(d)&&typeof d[T]!="function")}},259:function(K,z,e){var S,k=e(1496),l=e(62072),T=e(8260),b=e(95426),d=Object.defineProperty;S=K.exports=function(s){if(!(this instanceof S))throw new TypeError("Constructor requires 'new'");s=String(s),b.call(this,s),d(this,"__length__",l("",s.length))},k&&k(S,b),delete S.prototype.constructor,S.prototype=Object.create(b.prototype,{_next:l(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:l(function(s){var t,o=this.__list__[s];return this.__nextIndex__===this.__length__?o:(t=o.charCodeAt(0))>=55296&&t<=56319?o+this.__list__[this.__nextIndex__++]:o})}),d(S.prototype,T.toStringTag,l("c","String Iterator"))},58095:function(K,z,e){var S=e(35940);K.exports=function(k){if(!S(k))throw new TypeError(k+" is not iterable");return k}},73523:function(K){function z(e,S){if(e==null)throw new TypeError("Cannot convert first argument to object");for(var k=Object(e),l=1;l<arguments.length;l++){var T=arguments[l];if(T!=null)for(var b=Object.keys(Object(T)),d=0,s=b.length;d<s;d++){var t=b[d],o=Object.getOwnPropertyDescriptor(T,t);o!==void 0&&o.enumerable&&(k[t]=T[t])}}return k}K.exports={assign:z,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:z})}}},8260:function(K,z,e){K.exports=e(69711)()?e(94908).Symbol:e(18415)},69711:function(K,z,e){var S=e(94908),k={object:!0,symbol:!0};K.exports=function(){var l,T=S.Symbol;if(typeof T!="function")return!1;l=T("test symbol");try{String(l)}catch{return!1}return!!k[typeof T.iterator]&&!!k[typeof T.toPrimitive]&&!!k[typeof T.toStringTag]}},82276:function(K){K.exports=function(z){return!!z&&(typeof z=="symbol"||!!z.constructor&&z.constructor.name==="Symbol"&&z[z.constructor.toStringTag]==="Symbol")}},29366:function(K,z,e){var S=e(62072),k=Object.create,l=Object.defineProperty,T=Object.prototype,b=k(null);K.exports=function(d){for(var s,t,o=0;b[d+(o||"")];)++o;return b[d+=o||""]=!0,l(T,s="@@"+d,S.gs(null,function(r){t||(t=!0,l(this,s,S(r)),t=!1)})),s}},92842:function(K,z,e){var S=e(62072),k=e(94908).Symbol;K.exports=function(l){return Object.defineProperties(l,{hasInstance:S("",k&&k.hasInstance||l("hasInstance")),isConcatSpreadable:S("",k&&k.isConcatSpreadable||l("isConcatSpreadable")),iterator:S("",k&&k.iterator||l("iterator")),match:S("",k&&k.match||l("match")),replace:S("",k&&k.replace||l("replace")),search:S("",k&&k.search||l("search")),species:S("",k&&k.species||l("species")),split:S("",k&&k.split||l("split")),toPrimitive:S("",k&&k.toPrimitive||l("toPrimitive")),toStringTag:S("",k&&k.toStringTag||l("toStringTag")),unscopables:S("",k&&k.unscopables||l("unscopables"))})}},13304:function(K,z,e){var S=e(62072),k=e(53308),l=Object.create(null);K.exports=function(T){return Object.defineProperties(T,{for:S(function(b){return l[b]?l[b]:l[b]=T(String(b))}),keyFor:S(function(b){var d;for(d in k(b),l)if(l[d]===b)return d})})}},18415:function(K,z,e){var S,k,l,T=e(62072),b=e(53308),d=e(94908).Symbol,s=e(29366),t=e(92842),o=e(13304),r=Object.create,n=Object.defineProperties,a=Object.defineProperty;if(typeof d=="function")try{String(d()),l=!0}catch{}else d=null;k=function(i){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return S(i)},K.exports=S=function i(u){var h;if(this instanceof i)throw new TypeError("Symbol is not a constructor");return l?d(u):(h=r(k.prototype),u=u===void 0?"":String(u),n(h,{__description__:T("",u),__name__:T("",s(u))}))},t(S),o(S),n(k.prototype,{constructor:T(S),toString:T("",function(){return this.__name__})}),n(S.prototype,{toString:T(function(){return"Symbol ("+b(this).__description__+")"}),valueOf:T(function(){return b(this)})}),a(S.prototype,S.toPrimitive,T("",function(){var i=b(this);return typeof i=="symbol"?i:i.toString()})),a(S.prototype,S.toStringTag,T("c","Symbol")),a(k.prototype,S.toStringTag,T("c",S.prototype[S.toStringTag])),a(k.prototype,S.toPrimitive,T("c",S.prototype[S.toPrimitive]))},53308:function(K,z,e){var S=e(82276);K.exports=function(k){if(!S(k))throw new TypeError(k+" is not a symbol");return k}},83522:function(K,z,e){K.exports=e(96402)()?WeakMap:e(329)},96402:function(K){K.exports=function(){var z,e;if(typeof WeakMap!="function")return!1;try{z=new WeakMap([[e={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return String(z)==="[object WeakMap]"&&typeof z.set=="function"&&z.set({},1)===z&&typeof z.delete=="function"&&typeof z.has=="function"&&z.get(e)==="one"}},96416:function(K){K.exports=typeof WeakMap=="function"&&Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"},329:function(K,z,e){var S,k=e(95296),l=e(1496),T=e(98976),b=e(36672),d=e(43043),s=e(62072),t=e(66661),o=e(27515),r=e(8260).toStringTag,n=e(96416),a=Array.isArray,i=Object.defineProperty,u=Object.prototype.hasOwnProperty,h=Object.getPrototypeOf;K.exports=S=function(){var f,x=arguments[0];if(!(this instanceof S))throw new TypeError("Constructor requires 'new'");return f=n&&l&&WeakMap!==S?l(new WeakMap,h(this)):this,k(x)&&(a(x)||(x=t(x))),i(f,"__weakMapData__",s("c","$weakMap$"+d())),x&&o(x,function(v){b(v),f.set(v[0],v[1])}),f},n&&(l&&l(S,WeakMap),S.prototype=Object.create(WeakMap.prototype,{constructor:s(S)})),Object.defineProperties(S.prototype,{delete:s(function(f){return!!u.call(T(f),this.__weakMapData__)&&(delete f[this.__weakMapData__],!0)}),get:s(function(f){if(u.call(T(f),this.__weakMapData__))return f[this.__weakMapData__]}),has:s(function(f){return u.call(T(f),this.__weakMapData__)}),set:s(function(f,x){return i(T(f),this.__weakMapData__,s("c",x)),this}),toString:s(function(){return"[object WeakMap]"})}),i(S.prototype,r,s("c","WeakMap"))},15398:function(K){var z,e=typeof Reflect=="object"?Reflect:null,S=e&&typeof e.apply=="function"?e.apply:function(u,h,f){return Function.prototype.apply.call(u,h,f)};z=e&&typeof e.ownKeys=="function"?e.ownKeys:Object.getOwnPropertySymbols?function(u){return Object.getOwnPropertyNames(u).concat(Object.getOwnPropertySymbols(u))}:function(u){return Object.getOwnPropertyNames(u)};var k=Number.isNaN||function(u){return u!=u};function l(){l.init.call(this)}K.exports=l,K.exports.once=function(u,h){return new Promise(function(f,x){function v(y){u.removeListener(h,g),x(y)}function g(){typeof u.removeListener=="function"&&u.removeListener("error",v),f([].slice.call(arguments))}i(u,h,g,{once:!0}),h!=="error"&&function(y,p,m){typeof y.on=="function"&&i(y,"error",p,{once:!0})}(u,v)})},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var T=10;function b(u){if(typeof u!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof u)}function d(u){return u._maxListeners===void 0?l.defaultMaxListeners:u._maxListeners}function s(u,h,f,x){var v,g,y,p;if(b(f),(g=u._events)===void 0?(g=u._events=Object.create(null),u._eventsCount=0):(g.newListener!==void 0&&(u.emit("newListener",h,f.listener?f.listener:f),g=u._events),y=g[h]),y===void 0)y=g[h]=f,++u._eventsCount;else if(typeof y=="function"?y=g[h]=x?[f,y]:[y,f]:x?y.unshift(f):y.push(f),(v=d(u))>0&&y.length>v&&!y.warned){y.warned=!0;var m=new Error("Possible EventEmitter memory leak detected. "+y.length+" "+String(h)+" listeners added. Use emitter.setMaxListeners() to increase limit");m.name="MaxListenersExceededWarning",m.emitter=u,m.type=h,m.count=y.length,p=m,console&&console.warn&&console.warn(p)}return u}function t(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function o(u,h,f){var x={fired:!1,wrapFn:void 0,target:u,type:h,listener:f},v=t.bind(x);return v.listener=f,x.wrapFn=v,v}function r(u,h,f){var x=u._events;if(x===void 0)return[];var v=x[h];return v===void 0?[]:typeof v=="function"?f?[v.listener||v]:[v]:f?function(g){for(var y=new Array(g.length),p=0;p<y.length;++p)y[p]=g[p].listener||g[p];return y}(v):a(v,v.length)}function n(u){var h=this._events;if(h!==void 0){var f=h[u];if(typeof f=="function")return 1;if(f!==void 0)return f.length}return 0}function a(u,h){for(var f=new Array(h),x=0;x<h;++x)f[x]=u[x];return f}function i(u,h,f,x){if(typeof u.on=="function")x.once?u.once(h,f):u.on(h,f);else{if(typeof u.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof u);u.addEventListener(h,function v(g){x.once&&u.removeEventListener(h,v),f(g)})}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(u){if(typeof u!="number"||u<0||k(u))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+u+".");T=u}}),l.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(u){if(typeof u!="number"||u<0||k(u))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+u+".");return this._maxListeners=u,this},l.prototype.getMaxListeners=function(){return d(this)},l.prototype.emit=function(u){for(var h=[],f=1;f<arguments.length;f++)h.push(arguments[f]);var x=u==="error",v=this._events;if(v!==void 0)x=x&&v.error===void 0;else if(!x)return!1;if(x){var g;if(h.length>0&&(g=h[0]),g instanceof Error)throw g;var y=new Error("Unhandled error."+(g?" ("+g.message+")":""));throw y.context=g,y}var p=v[u];if(p===void 0)return!1;if(typeof p=="function")S(p,this,h);else{var m=p.length,w=a(p,m);for(f=0;f<m;++f)S(w[f],this,h)}return!0},l.prototype.addListener=function(u,h){return s(this,u,h,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(u,h){return s(this,u,h,!0)},l.prototype.once=function(u,h){return b(h),this.on(u,o(this,u,h)),this},l.prototype.prependOnceListener=function(u,h){return b(h),this.prependListener(u,o(this,u,h)),this},l.prototype.removeListener=function(u,h){var f,x,v,g,y;if(b(h),(x=this._events)===void 0)return this;if((f=x[u])===void 0)return this;if(f===h||f.listener===h)--this._eventsCount==0?this._events=Object.create(null):(delete x[u],x.removeListener&&this.emit("removeListener",u,f.listener||h));else if(typeof f!="function"){for(v=-1,g=f.length-1;g>=0;g--)if(f[g]===h||f[g].listener===h){y=f[g].listener,v=g;break}if(v<0)return this;v===0?f.shift():function(p,m){for(;m+1<p.length;m++)p[m]=p[m+1];p.pop()}(f,v),f.length===1&&(x[u]=f[0]),x.removeListener!==void 0&&this.emit("removeListener",u,y||h)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(u){var h,f,x;if((f=this._events)===void 0)return this;if(f.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):f[u]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete f[u]),this;if(arguments.length===0){var v,g=Object.keys(f);for(x=0;x<g.length;++x)(v=g[x])!=="removeListener"&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(h=f[u])=="function")this.removeListener(u,h);else if(h!==void 0)for(x=h.length-1;x>=0;x--)this.removeListener(u,h[x]);return this},l.prototype.listeners=function(u){return r(this,u,!0)},l.prototype.rawListeners=function(u){return r(this,u,!1)},l.listenerCount=function(u,h){return typeof u.listenerCount=="function"?u.listenerCount(h):n.call(u,h)},l.prototype.listenerCount=n,l.prototype.eventNames=function(){return this._eventsCount>0?z(this._events):[]}},60774:function(K){var z=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};K.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return z()}try{return __global__||z()}finally{delete Object.prototype.__global__}}()},94908:function(K,z,e){K.exports=e(51152)()?globalThis:e(60774)},51152:function(K){K.exports=function(){return typeof globalThis=="object"&&!!globalThis&&globalThis.Array===Array}},92770:function(K,z,e){var S=e(18546);K.exports=function(k){var l=typeof k;if(l==="string"){var T=k;if((k=+k)==0&&S(T))return!1}else if(l!=="number")return!1;return k-k<1}},30120:function(K,z,e){var S=e(90660);K.exports=function(k,l,T){if(!k)throw new TypeError("must specify data as first parameter");if(T=0|+(T||0),Array.isArray(k)&&k[0]&&typeof k[0][0]=="number"){var b,d,s,t,o=k[0].length,r=k.length*o;l&&typeof l!="string"||(l=new(S(l||"float32"))(r+T));var n=l.length-T;if(r!==n)throw new Error("source length "+r+" ("+o+"x"+k.length+") does not match destination length "+n);for(b=0,s=T;b<k.length;b++)for(d=0;d<o;d++)l[s++]=k[b][d]===null?NaN:k[b][d]}else if(l&&typeof l!="string")l.set(k,T);else{var a=S(l||"float32");if(Array.isArray(k)||l==="array")for(b=0,s=T,t=(l=new a(k.length+T)).length;s<t;s++,b++)l[s]=k[b]===null?NaN:k[b];else T===0?l=new a(k):(l=new a(k.length+T)).set(k,T)}return l}},68016:function(K,z,e){var S=e(53313),k=[32,126];K.exports=function(l){var T=(l=l||{}).shape?l.shape:l.canvas?[l.canvas.width,l.canvas.height]:[512,512],b=l.canvas||document.createElement("canvas"),d=l.font,s=typeof l.step=="number"?[l.step,l.step]:l.step||[32,32],t=l.chars||k;if(d&&typeof d!="string"&&(d=S(d)),Array.isArray(t)){if(t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"){for(var o=[],r=t[0],n=0;r<=t[1];r++)o[n++]=String.fromCharCode(r);t=o}}else t=String(t).split("");T=T.slice(),b.width=T[0],b.height=T[1];var a=b.getContext("2d");a.fillStyle="#000",a.fillRect(0,0,b.width,b.height),a.font=d,a.textAlign="center",a.textBaseline="middle",a.fillStyle="#fff";var i=s[0]/2,u=s[1]/2;for(r=0;r<t.length;r++)a.fillText(t[r],i,u),(i+=s[0])>T[0]-s[0]/2&&(i=s[0]/2,u+=s[1]);return b}},32879:function(K){function z(l,T){T||(T={}),(typeof l=="string"||Array.isArray(l))&&(T.family=l);var b=Array.isArray(T.family)?T.family.join(", "):T.family;if(!b)throw Error("`family` must be defined");var d=T.size||T.fontSize||T.em||48,s=T.weight||T.fontWeight||"",t=(l=[T.style||T.fontStyle||"",s,d].join(" ")+"px "+b,T.origin||"top");if(z.cache[b]&&d<=z.cache[b].em)return e(z.cache[b],t);var o=T.canvas||z.canvas,r=o.getContext("2d"),n={upper:T.upper!==void 0?T.upper:"H",lower:T.lower!==void 0?T.lower:"x",descent:T.descent!==void 0?T.descent:"p",ascent:T.ascent!==void 0?T.ascent:"h",tittle:T.tittle!==void 0?T.tittle:"i",overshoot:T.overshoot!==void 0?T.overshoot:"O"},a=Math.ceil(1.5*d);o.height=a,o.width=.5*a,r.font=l;var i="H",u={top:0};r.clearRect(0,0,a,a),r.textBaseline="top",r.fillStyle="black",r.fillText(i,0,0);var h=S(r.getImageData(0,0,a,a));r.clearRect(0,0,a,a),r.textBaseline="bottom",r.fillText(i,0,a);var f=S(r.getImageData(0,0,a,a));u.lineHeight=u.bottom=a-f+h,r.clearRect(0,0,a,a),r.textBaseline="alphabetic",r.fillText(i,0,a);var x=a-S(r.getImageData(0,0,a,a))-1+h;u.baseline=u.alphabetic=x,r.clearRect(0,0,a,a),r.textBaseline="middle",r.fillText(i,0,.5*a);var v=S(r.getImageData(0,0,a,a));u.median=u.middle=a-v-1+h-.5*a,r.clearRect(0,0,a,a),r.textBaseline="hanging",r.fillText(i,0,.5*a);var g=S(r.getImageData(0,0,a,a));u.hanging=a-g-1+h-.5*a,r.clearRect(0,0,a,a),r.textBaseline="ideographic",r.fillText(i,0,a);var y=S(r.getImageData(0,0,a,a));if(u.ideographic=a-y-1+h,n.upper&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.upper,0,0),u.upper=S(r.getImageData(0,0,a,a)),u.capHeight=u.baseline-u.upper),n.lower&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.lower,0,0),u.lower=S(r.getImageData(0,0,a,a)),u.xHeight=u.baseline-u.lower),n.tittle&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.tittle,0,0),u.tittle=S(r.getImageData(0,0,a,a))),n.ascent&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.ascent,0,0),u.ascent=S(r.getImageData(0,0,a,a))),n.descent&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.descent,0,0),u.descent=k(r.getImageData(0,0,a,a))),n.overshoot){r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.overshoot,0,0);var p=k(r.getImageData(0,0,a,a));u.overshoot=p-x}for(var m in u)u[m]/=d;return u.em=d,z.cache[b]=u,e(u,t)}function e(l,T){var b={};for(var d in typeof T=="string"&&(T=l[T]),l)d!=="em"&&(b[d]=l[d]-T);return b}function S(l){for(var T=l.height,b=l.data,d=3;d<b.length;d+=4)if(b[d]!==0)return Math.floor(.25*(d-3)/T)}function k(l){for(var T=l.height,b=l.data,d=b.length-1;d>0;d-=4)if(b[d]!==0)return Math.floor(.25*(d-3)/T)}K.exports=z,z.canvas=document.createElement("canvas"),z.cache={}},31353:function(K,z,e){var S=e(85395),k=Object.prototype.toString,l=Object.prototype.hasOwnProperty,T=function(s,t,o){for(var r=0,n=s.length;r<n;r++)l.call(s,r)&&(o==null?t(s[r],r,s):t.call(o,s[r],r,s))},b=function(s,t,o){for(var r=0,n=s.length;r<n;r++)o==null?t(s.charAt(r),r,s):t.call(o,s.charAt(r),r,s)},d=function(s,t,o){for(var r in s)l.call(s,r)&&(o==null?t(s[r],r,s):t.call(o,s[r],r,s))};K.exports=function(s,t,o){if(!S(t))throw new TypeError("iterator must be a function");var r;arguments.length>=3&&(r=o),k.call(s)==="[object Array]"?T(s,t,r):typeof s=="string"?b(s,t,r):d(s,t,r)}},73047:function(K){var z="Function.prototype.bind called on incompatible ",e=Array.prototype.slice,S=Object.prototype.toString,k="[object Function]";K.exports=function(l){var T=this;if(typeof T!="function"||S.call(T)!==k)throw new TypeError(z+T);for(var b,d=e.call(arguments,1),s=function(){if(this instanceof b){var a=T.apply(this,d.concat(e.call(arguments)));return Object(a)===a?a:this}return T.apply(l,d.concat(e.call(arguments)))},t=Math.max(0,T.length-d.length),o=[],r=0;r<t;r++)o.push("$"+r);if(b=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this,arguments); }")(s),T.prototype){var n=function(){};n.prototype=T.prototype,b.prototype=new n,n.prototype=null}return b}},77575:function(K,z,e){var S=e(73047);K.exports=Function.prototype.bind||S},86249:function(K){K.exports=function(z,e){if(typeof z!="string")throw new TypeError("must specify type string");if(e=e||{},typeof document>"u"&&!e.canvas)return null;var S=e.canvas||document.createElement("canvas");typeof e.width=="number"&&(S.width=e.width),typeof e.height=="number"&&(S.height=e.height);var k,l=e;try{var T=[z];z.indexOf("webgl")===0&&T.push("experimental-"+z);for(var b=0;b<T.length;b++)if(k=S.getContext(T[b],l))return k}catch{k=null}return k||null}},68318:function(K,z,e){var S,k=SyntaxError,l=Function,T=TypeError,b=function(L){try{return l('"use strict"; return ('+L+").constructor;")()}catch{}},d=Object.getOwnPropertyDescriptor;if(d)try{d({},"")}catch{d=null}var s=function(){throw new T},t=d?function(){try{return s}catch{try{return d(arguments,"callee").get}catch{return s}}}():s,o=e(57877)(),r=Object.getPrototypeOf||function(L){return L.__proto__},n={},a=typeof Uint8Array>"u"?S:r(Uint8Array),i={"%AggregateError%":typeof AggregateError>"u"?S:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?S:ArrayBuffer,"%ArrayIteratorPrototype%":o?r([][Symbol.iterator]()):S,"%AsyncFromSyncIteratorPrototype%":S,"%AsyncFunction%":n,"%AsyncGenerator%":n,"%AsyncGeneratorFunction%":n,"%AsyncIteratorPrototype%":n,"%Atomics%":typeof Atomics>"u"?S:Atomics,"%BigInt%":typeof BigInt>"u"?S:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?S:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?S:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?S:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?S:Float32Array,"%Float64Array%":typeof Float64Array>"u"?S:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?S:FinalizationRegistry,"%Function%":l,"%GeneratorFunction%":n,"%Int8Array%":typeof Int8Array>"u"?S:Int8Array,"%Int16Array%":typeof Int16Array>"u"?S:Int16Array,"%Int32Array%":typeof Int32Array>"u"?S:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":o?r(r([][Symbol.iterator]())):S,"%JSON%":typeof JSON=="object"?JSON:S,"%Map%":typeof Map>"u"?S:Map,"%MapIteratorPrototype%":typeof Map<"u"&&o?r(new Map()[Symbol.iterator]()):S,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?S:Promise,"%Proxy%":typeof Proxy>"u"?S:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?S:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?S:Set,"%SetIteratorPrototype%":typeof Set<"u"&&o?r(new Set()[Symbol.iterator]()):S,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?S:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":o?r(""[Symbol.iterator]()):S,"%Symbol%":o?Symbol:S,"%SyntaxError%":k,"%ThrowTypeError%":t,"%TypedArray%":a,"%TypeError%":T,"%Uint8Array%":typeof Uint8Array>"u"?S:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?S:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?S:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?S:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?S:WeakMap,"%WeakRef%":typeof WeakRef>"u"?S:WeakRef,"%WeakSet%":typeof WeakSet>"u"?S:WeakSet};try{null.error}catch(L){var u=r(r(L));i["%Error.prototype%"]=u}var h=function L(C){var O;if(C==="%AsyncFunction%")O=b("async function () {}");else if(C==="%GeneratorFunction%")O=b("function* () {}");else if(C==="%AsyncGeneratorFunction%")O=b("async function* () {}");else if(C==="%AsyncGenerator%"){var I=L("%AsyncGeneratorFunction%");I&&(O=I.prototype)}else if(C==="%AsyncIteratorPrototype%"){var N=L("%AsyncGenerator%");N&&(O=r(N.prototype))}return i[C]=O,O},f={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},x=e(77575),v=e(35065),g=x.call(Function.call,Array.prototype.concat),y=x.call(Function.apply,Array.prototype.splice),p=x.call(Function.call,String.prototype.replace),m=x.call(Function.call,String.prototype.slice),w=x.call(Function.call,RegExp.prototype.exec),c=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,M=/\\(\\)?/g,_=function(L){var C=m(L,0,1),O=m(L,-1);if(C==="%"&&O!=="%")throw new k("invalid intrinsic syntax, expected closing `%`");if(O==="%"&&C!=="%")throw new k("invalid intrinsic syntax, expected opening `%`");var I=[];return p(L,c,function(N,R,V,F){I[I.length]=V?p(F,M,"$1"):R||N}),I},E=function(L,C){var O,I=L;if(v(f,I)&&(I="%"+(O=f[I])[0]+"%"),v(i,I)){var N=i[I];if(N===n&&(N=h(I)),N===void 0&&!C)throw new T("intrinsic "+L+" exists, but is not available. Please file an issue!");return{alias:O,name:I,value:N}}throw new k("intrinsic "+L+" does not exist!")};K.exports=function(L,C){if(typeof L!="string"||L.length===0)throw new T("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof C!="boolean")throw new T('"allowMissing" argument must be a boolean');if(w(/^%?[^%]*%?$/,L)===null)throw new k("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var O=_(L),I=O.length>0?O[0]:"",N=E("%"+I+"%",C),R=N.name,V=N.value,F=!1,D=N.alias;D&&(I=D[0],y(O,g([0,1],D)));for(var U=1,j=!0;U<O.length;U+=1){var J=O[U],X=m(J,0,1),Z=m(J,-1);if((X==='"'||X==="'"||X==="`"||Z==='"'||Z==="'"||Z==="`")&&X!==Z)throw new k("property names with quotes must have matching quotes");if(J!=="constructor"&&j||(F=!0),v(i,R="%"+(I+="."+J)+"%"))V=i[R];else if(V!=null){if(!(J in V)){if(!C)throw new T("base intrinsic for "+L+" exists, but the property is not available.");return}if(d&&U+1>=O.length){var Y=d(V,J);V=(j=!!Y)&&"get"in Y&&!("originalValue"in Y.get)?Y.get:V[J]}else j=v(V,J),V=V[J];j&&!F&&(i[R]=V)}}return V}},85400:function(K){K.exports=function(z,e){var S=e[0],k=e[1],l=e[2],T=e[3],b=e[4],d=e[5],s=e[6],t=e[7],o=e[8],r=e[9],n=e[10],a=e[11],i=e[12],u=e[13],h=e[14],f=e[15];return z[0]=d*(n*f-a*h)-r*(s*f-t*h)+u*(s*a-t*n),z[1]=-(k*(n*f-a*h)-r*(l*f-T*h)+u*(l*a-T*n)),z[2]=k*(s*f-t*h)-d*(l*f-T*h)+u*(l*t-T*s),z[3]=-(k*(s*a-t*n)-d*(l*a-T*n)+r*(l*t-T*s)),z[4]=-(b*(n*f-a*h)-o*(s*f-t*h)+i*(s*a-t*n)),z[5]=S*(n*f-a*h)-o*(l*f-T*h)+i*(l*a-T*n),z[6]=-(S*(s*f-t*h)-b*(l*f-T*h)+i*(l*t-T*s)),z[7]=S*(s*a-t*n)-b*(l*a-T*n)+o*(l*t-T*s),z[8]=b*(r*f-a*u)-o*(d*f-t*u)+i*(d*a-t*r),z[9]=-(S*(r*f-a*u)-o*(k*f-T*u)+i*(k*a-T*r)),z[10]=S*(d*f-t*u)-b*(k*f-T*u)+i*(k*t-T*d),z[11]=-(S*(d*a-t*r)-b*(k*a-T*r)+o*(k*t-T*d)),z[12]=-(b*(r*h-n*u)-o*(d*h-s*u)+i*(d*n-s*r)),z[13]=S*(r*h-n*u)-o*(k*h-l*u)+i*(k*n-l*r),z[14]=-(S*(d*h-s*u)-b*(k*h-l*u)+i*(k*s-l*d)),z[15]=S*(d*n-s*r)-b*(k*n-l*r)+o*(k*s-l*d),z}},42331:function(K){K.exports=function(z){var e=new Float32Array(16);return e[0]=z[0],e[1]=z[1],e[2]=z[2],e[3]=z[3],e[4]=z[4],e[5]=z[5],e[6]=z[6],e[7]=z[7],e[8]=z[8],e[9]=z[9],e[10]=z[10],e[11]=z[11],e[12]=z[12],e[13]=z[13],e[14]=z[14],e[15]=z[15],e}},31042:function(K){K.exports=function(z,e){return z[0]=e[0],z[1]=e[1],z[2]=e[2],z[3]=e[3],z[4]=e[4],z[5]=e[5],z[6]=e[6],z[7]=e[7],z[8]=e[8],z[9]=e[9],z[10]=e[10],z[11]=e[11],z[12]=e[12],z[13]=e[13],z[14]=e[14],z[15]=e[15],z}},11902:function(K){K.exports=function(){var z=new Float32Array(16);return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},89887:function(K){K.exports=function(z){var e=z[0],S=z[1],k=z[2],l=z[3],T=z[4],b=z[5],d=z[6],s=z[7],t=z[8],o=z[9],r=z[10],n=z[11],a=z[12],i=z[13],u=z[14],h=z[15];return(e*b-S*T)*(r*h-n*u)-(e*d-k*T)*(o*h-n*i)+(e*s-l*T)*(o*u-r*i)+(S*d-k*b)*(t*h-n*a)-(S*s-l*b)*(t*u-r*a)+(k*s-l*d)*(t*i-o*a)}},27812:function(K){K.exports=function(z,e){var S=e[0],k=e[1],l=e[2],T=e[3],b=S+S,d=k+k,s=l+l,t=S*b,o=k*b,r=k*d,n=l*b,a=l*d,i=l*s,u=T*b,h=T*d,f=T*s;return z[0]=1-r-i,z[1]=o+f,z[2]=n-h,z[3]=0,z[4]=o-f,z[5]=1-t-i,z[6]=a+u,z[7]=0,z[8]=n+h,z[9]=a-u,z[10]=1-t-r,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},34045:function(K){K.exports=function(z,e,S){var k,l,T,b=S[0],d=S[1],s=S[2],t=Math.sqrt(b*b+d*d+s*s);return Math.abs(t)<1e-6?null:(b*=t=1/t,d*=t,s*=t,k=Math.sin(e),T=1-(l=Math.cos(e)),z[0]=b*b*T+l,z[1]=d*b*T+s*k,z[2]=s*b*T-d*k,z[3]=0,z[4]=b*d*T-s*k,z[5]=d*d*T+l,z[6]=s*d*T+b*k,z[7]=0,z[8]=b*s*T+d*k,z[9]=d*s*T-b*k,z[10]=s*s*T+l,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z)}},45973:function(K){K.exports=function(z,e,S){var k=e[0],l=e[1],T=e[2],b=e[3],d=k+k,s=l+l,t=T+T,o=k*d,r=k*s,n=k*t,a=l*s,i=l*t,u=T*t,h=b*d,f=b*s,x=b*t;return z[0]=1-(a+u),z[1]=r+x,z[2]=n-f,z[3]=0,z[4]=r-x,z[5]=1-(o+u),z[6]=i+h,z[7]=0,z[8]=n+f,z[9]=i-h,z[10]=1-(o+a),z[11]=0,z[12]=S[0],z[13]=S[1],z[14]=S[2],z[15]=1,z}},81472:function(K){K.exports=function(z,e){return z[0]=e[0],z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=e[1],z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=e[2],z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},14669:function(K){K.exports=function(z,e){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=e[0],z[13]=e[1],z[14]=e[2],z[15]=1,z}},75262:function(K){K.exports=function(z,e){var S=Math.sin(e),k=Math.cos(e);return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=k,z[6]=S,z[7]=0,z[8]=0,z[9]=-S,z[10]=k,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},331:function(K){K.exports=function(z,e){var S=Math.sin(e),k=Math.cos(e);return z[0]=k,z[1]=0,z[2]=-S,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=S,z[9]=0,z[10]=k,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},11049:function(K){K.exports=function(z,e){var S=Math.sin(e),k=Math.cos(e);return z[0]=k,z[1]=S,z[2]=0,z[3]=0,z[4]=-S,z[5]=k,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},75195:function(K){K.exports=function(z,e,S,k,l,T,b){var d=1/(S-e),s=1/(l-k),t=1/(T-b);return z[0]=2*T*d,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=2*T*s,z[6]=0,z[7]=0,z[8]=(S+e)*d,z[9]=(l+k)*s,z[10]=(b+T)*t,z[11]=-1,z[12]=0,z[13]=0,z[14]=b*T*2*t,z[15]=0,z}},71551:function(K){K.exports=function(z){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},79576:function(K,z,e){K.exports={create:e(11902),clone:e(42331),copy:e(31042),identity:e(71551),transpose:e(88654),invert:e(95874),adjoint:e(85400),determinant:e(89887),multiply:e(91362),translate:e(31283),scale:e(10789),rotate:e(65074),rotateX:e(35545),rotateY:e(94918),rotateZ:e(15692),fromRotation:e(34045),fromRotationTranslation:e(45973),fromScaling:e(81472),fromTranslation:e(14669),fromXRotation:e(75262),fromYRotation:e(331),fromZRotation:e(11049),fromQuat:e(27812),frustum:e(75195),perspective:e(7864),perspectiveFromFieldOfView:e(35279),ortho:e(60378),lookAt:e(65551),str:e(6726)}},95874:function(K){K.exports=function(z,e){var S=e[0],k=e[1],l=e[2],T=e[3],b=e[4],d=e[5],s=e[6],t=e[7],o=e[8],r=e[9],n=e[10],a=e[11],i=e[12],u=e[13],h=e[14],f=e[15],x=S*d-k*b,v=S*s-l*b,g=S*t-T*b,y=k*s-l*d,p=k*t-T*d,m=l*t-T*s,w=o*u-r*i,c=o*h-n*i,M=o*f-a*i,_=r*h-n*u,E=r*f-a*u,L=n*f-a*h,C=x*L-v*E+g*_+y*M-p*c+m*w;return C?(C=1/C,z[0]=(d*L-s*E+t*_)*C,z[1]=(l*E-k*L-T*_)*C,z[2]=(u*m-h*p+f*y)*C,z[3]=(n*p-r*m-a*y)*C,z[4]=(s*M-b*L-t*c)*C,z[5]=(S*L-l*M+T*c)*C,z[6]=(h*g-i*m-f*v)*C,z[7]=(o*m-n*g+a*v)*C,z[8]=(b*E-d*M+t*w)*C,z[9]=(k*M-S*E-T*w)*C,z[10]=(i*p-u*g+f*x)*C,z[11]=(r*g-o*p-a*x)*C,z[12]=(d*c-b*_-s*w)*C,z[13]=(S*_-k*c+l*w)*C,z[14]=(u*v-i*y-h*x)*C,z[15]=(o*y-r*v+n*x)*C,z):null}},65551:function(K,z,e){var S=e(71551);K.exports=function(k,l,T,b){var d,s,t,o,r,n,a,i,u,h,f=l[0],x=l[1],v=l[2],g=b[0],y=b[1],p=b[2],m=T[0],w=T[1],c=T[2];return Math.abs(f-m)<1e-6&&Math.abs(x-w)<1e-6&&Math.abs(v-c)<1e-6?S(k):(a=f-m,i=x-w,u=v-c,d=y*(u*=h=1/Math.sqrt(a*a+i*i+u*u))-p*(i*=h),s=p*(a*=h)-g*u,t=g*i-y*a,(h=Math.sqrt(d*d+s*s+t*t))?(d*=h=1/h,s*=h,t*=h):(d=0,s=0,t=0),o=i*t-u*s,r=u*d-a*t,n=a*s-i*d,(h=Math.sqrt(o*o+r*r+n*n))?(o*=h=1/h,r*=h,n*=h):(o=0,r=0,n=0),k[0]=d,k[1]=o,k[2]=a,k[3]=0,k[4]=s,k[5]=r,k[6]=i,k[7]=0,k[8]=t,k[9]=n,k[10]=u,k[11]=0,k[12]=-(d*f+s*x+t*v),k[13]=-(o*f+r*x+n*v),k[14]=-(a*f+i*x+u*v),k[15]=1,k)}},91362:function(K){K.exports=function(z,e,S){var k=e[0],l=e[1],T=e[2],b=e[3],d=e[4],s=e[5],t=e[6],o=e[7],r=e[8],n=e[9],a=e[10],i=e[11],u=e[12],h=e[13],f=e[14],x=e[15],v=S[0],g=S[1],y=S[2],p=S[3];return z[0]=v*k+g*d+y*r+p*u,z[1]=v*l+g*s+y*n+p*h,z[2]=v*T+g*t+y*a+p*f,z[3]=v*b+g*o+y*i+p*x,v=S[4],g=S[5],y=S[6],p=S[7],z[4]=v*k+g*d+y*r+p*u,z[5]=v*l+g*s+y*n+p*h,z[6]=v*T+g*t+y*a+p*f,z[7]=v*b+g*o+y*i+p*x,v=S[8],g=S[9],y=S[10],p=S[11],z[8]=v*k+g*d+y*r+p*u,z[9]=v*l+g*s+y*n+p*h,z[10]=v*T+g*t+y*a+p*f,z[11]=v*b+g*o+y*i+p*x,v=S[12],g=S[13],y=S[14],p=S[15],z[12]=v*k+g*d+y*r+p*u,z[13]=v*l+g*s+y*n+p*h,z[14]=v*T+g*t+y*a+p*f,z[15]=v*b+g*o+y*i+p*x,z}},60378:function(K){K.exports=function(z,e,S,k,l,T,b){var d=1/(e-S),s=1/(k-l),t=1/(T-b);return z[0]=-2*d,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=-2*s,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=2*t,z[11]=0,z[12]=(e+S)*d,z[13]=(l+k)*s,z[14]=(b+T)*t,z[15]=1,z}},7864:function(K){K.exports=function(z,e,S,k,l){var T=1/Math.tan(e/2),b=1/(k-l);return z[0]=T/S,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=T,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=(l+k)*b,z[11]=-1,z[12]=0,z[13]=0,z[14]=2*l*k*b,z[15]=0,z}},35279:function(K){K.exports=function(z,e,S,k){var l=Math.tan(e.upDegrees*Math.PI/180),T=Math.tan(e.downDegrees*Math.PI/180),b=Math.tan(e.leftDegrees*Math.PI/180),d=Math.tan(e.rightDegrees*Math.PI/180),s=2/(b+d),t=2/(l+T);return z[0]=s,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=t,z[6]=0,z[7]=0,z[8]=-(b-d)*s*.5,z[9]=(l-T)*t*.5,z[10]=k/(S-k),z[11]=-1,z[12]=0,z[13]=0,z[14]=k*S/(S-k),z[15]=0,z}},65074:function(K){K.exports=function(z,e,S,k){var l,T,b,d,s,t,o,r,n,a,i,u,h,f,x,v,g,y,p,m,w,c,M,_,E=k[0],L=k[1],C=k[2],O=Math.sqrt(E*E+L*L+C*C);return Math.abs(O)<1e-6?null:(E*=O=1/O,L*=O,C*=O,l=Math.sin(S),b=1-(T=Math.cos(S)),d=e[0],s=e[1],t=e[2],o=e[3],r=e[4],n=e[5],a=e[6],i=e[7],u=e[8],h=e[9],f=e[10],x=e[11],v=E*E*b+T,g=L*E*b+C*l,y=C*E*b-L*l,p=E*L*b-C*l,m=L*L*b+T,w=C*L*b+E*l,c=E*C*b+L*l,M=L*C*b-E*l,_=C*C*b+T,z[0]=d*v+r*g+u*y,z[1]=s*v+n*g+h*y,z[2]=t*v+a*g+f*y,z[3]=o*v+i*g+x*y,z[4]=d*p+r*m+u*w,z[5]=s*p+n*m+h*w,z[6]=t*p+a*m+f*w,z[7]=o*p+i*m+x*w,z[8]=d*c+r*M+u*_,z[9]=s*c+n*M+h*_,z[10]=t*c+a*M+f*_,z[11]=o*c+i*M+x*_,e!==z&&(z[12]=e[12],z[13]=e[13],z[14]=e[14],z[15]=e[15]),z)}},35545:function(K){K.exports=function(z,e,S){var k=Math.sin(S),l=Math.cos(S),T=e[4],b=e[5],d=e[6],s=e[7],t=e[8],o=e[9],r=e[10],n=e[11];return e!==z&&(z[0]=e[0],z[1]=e[1],z[2]=e[2],z[3]=e[3],z[12]=e[12],z[13]=e[13],z[14]=e[14],z[15]=e[15]),z[4]=T*l+t*k,z[5]=b*l+o*k,z[6]=d*l+r*k,z[7]=s*l+n*k,z[8]=t*l-T*k,z[9]=o*l-b*k,z[10]=r*l-d*k,z[11]=n*l-s*k,z}},94918:function(K){K.exports=function(z,e,S){var k=Math.sin(S),l=Math.cos(S),T=e[0],b=e[1],d=e[2],s=e[3],t=e[8],o=e[9],r=e[10],n=e[11];return e!==z&&(z[4]=e[4],z[5]=e[5],z[6]=e[6],z[7]=e[7],z[12]=e[12],z[13]=e[13],z[14]=e[14],z[15]=e[15]),z[0]=T*l-t*k,z[1]=b*l-o*k,z[2]=d*l-r*k,z[3]=s*l-n*k,z[8]=T*k+t*l,z[9]=b*k+o*l,z[10]=d*k+r*l,z[11]=s*k+n*l,z}},15692:function(K){K.exports=function(z,e,S){var k=Math.sin(S),l=Math.cos(S),T=e[0],b=e[1],d=e[2],s=e[3],t=e[4],o=e[5],r=e[6],n=e[7];return e!==z&&(z[8]=e[8],z[9]=e[9],z[10]=e[10],z[11]=e[11],z[12]=e[12],z[13]=e[13],z[14]=e[14],z[15]=e[15]),z[0]=T*l+t*k,z[1]=b*l+o*k,z[2]=d*l+r*k,z[3]=s*l+n*k,z[4]=t*l-T*k,z[5]=o*l-b*k,z[6]=r*l-d*k,z[7]=n*l-s*k,z}},10789:function(K){K.exports=function(z,e,S){var k=S[0],l=S[1],T=S[2];return z[0]=e[0]*k,z[1]=e[1]*k,z[2]=e[2]*k,z[3]=e[3]*k,z[4]=e[4]*l,z[5]=e[5]*l,z[6]=e[6]*l,z[7]=e[7]*l,z[8]=e[8]*T,z[9]=e[9]*T,z[10]=e[10]*T,z[11]=e[11]*T,z[12]=e[12],z[13]=e[13],z[14]=e[14],z[15]=e[15],z}},6726:function(K){K.exports=function(z){return"mat4("+z[0]+", "+z[1]+", "+z[2]+", "+z[3]+", "+z[4]+", "+z[5]+", "+z[6]+", "+z[7]+", "+z[8]+", "+z[9]+", "+z[10]+", "+z[11]+", "+z[12]+", "+z[13]+", "+z[14]+", "+z[15]+")"}},31283:function(K){K.exports=function(z,e,S){var k,l,T,b,d,s,t,o,r,n,a,i,u=S[0],h=S[1],f=S[2];return e===z?(z[12]=e[0]*u+e[4]*h+e[8]*f+e[12],z[13]=e[1]*u+e[5]*h+e[9]*f+e[13],z[14]=e[2]*u+e[6]*h+e[10]*f+e[14],z[15]=e[3]*u+e[7]*h+e[11]*f+e[15]):(k=e[0],l=e[1],T=e[2],b=e[3],d=e[4],s=e[5],t=e[6],o=e[7],r=e[8],n=e[9],a=e[10],i=e[11],z[0]=k,z[1]=l,z[2]=T,z[3]=b,z[4]=d,z[5]=s,z[6]=t,z[7]=o,z[8]=r,z[9]=n,z[10]=a,z[11]=i,z[12]=k*u+d*h+r*f+e[12],z[13]=l*u+s*h+n*f+e[13],z[14]=T*u+t*h+a*f+e[14],z[15]=b*u+o*h+i*f+e[15]),z}},88654:function(K){K.exports=function(z,e){if(z===e){var S=e[1],k=e[2],l=e[3],T=e[6],b=e[7],d=e[11];z[1]=e[4],z[2]=e[8],z[3]=e[12],z[4]=S,z[6]=e[9],z[7]=e[13],z[8]=k,z[9]=T,z[11]=e[14],z[12]=l,z[13]=b,z[14]=d}else z[0]=e[0],z[1]=e[4],z[2]=e[8],z[3]=e[12],z[4]=e[1],z[5]=e[5],z[6]=e[9],z[7]=e[13],z[8]=e[2],z[9]=e[6],z[10]=e[10],z[11]=e[14],z[12]=e[3],z[13]=e[7],z[14]=e[11],z[15]=e[15];return z}},42505:function(K,z,e){var S=e(72791),k=e(71299),l=e(98580),T=e(12018),b=e(83522),d=e(25075),s=e(68016),t=e(58404),o=e(18863),r=e(10973),n=e(25677),a=e(75686),i=e(53545),u=e(56131),h=e(32879),f=e(30120),x=e(13547).nextPow2,v=new b,g=!1;if(document.body){var y=document.body.appendChild(document.createElement("div"));y.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(y).fontStretch&&(g=!0),document.body.removeChild(y)}var p=function(m){(function(w){return typeof w=="function"&&w._gl&&w.prop&&w.texture&&w.buffer})(m)?(m={regl:m},this.gl=m.regl._gl):this.gl=T(m),this.shader=v.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=m.regl||l({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),v.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(r(m)?m:{})};p.prototype.createShader=function(){var m=this.regl,w=m({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:m.prop("count"),offset:m.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:m.this("sizeBuffer")},width:{offset:0,stride:8,buffer:m.this("sizeBuffer")},char:m.this("charBuffer"),position:m.this("position")},uniforms:{atlasSize:function(c,M){return[M.atlas.width,M.atlas.height]},atlasDim:function(c,M){return[M.atlas.cols,M.atlas.rows]},atlas:function(c,M){return M.atlas.texture},charStep:function(c,M){return M.atlas.step},em:function(c,M){return M.atlas.em},color:m.prop("color"),opacity:m.prop("opacity"),viewport:m.this("viewportArray"),scale:m.this("scale"),align:m.prop("align"),baseline:m.prop("baseline"),translate:m.this("translate"),positionOffset:m.prop("positionOffset")},primitive:"points",viewport:m.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`});return{regl:m,draw:w,atlas:{}}},p.prototype.update=function(m){var w=this;if(typeof m=="string")m={text:m};else if(!m)return;(m=k(m,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity!=null&&(Array.isArray(m.opacity)?this.opacity=m.opacity.map(function($){return parseFloat($)}):this.opacity=parseFloat(m.opacity)),m.viewport!=null&&(this.viewport=o(m.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),m.kerning!=null&&(this.kerning=m.kerning),m.offset!=null&&(typeof m.offset=="number"&&(m.offset=[m.offset,0]),this.positionOffset=f(m.offset)),m.direction&&(this.direction=m.direction),m.range&&(this.range=m.range,this.scale=[1/(m.range[2]-m.range[0]),1/(m.range[3]-m.range[1])],this.translate=[-m.range[0],-m.range[1]]),m.scale&&(this.scale=m.scale),m.translate&&(this.translate=m.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||m.font||(m.font=p.baseFontSize+"px sans-serif");var c,M=!1,_=!1;if(m.font&&(Array.isArray(m.font)?m.font:[m.font]).forEach(function($,oe){if(typeof $=="string")try{$=S.parse($)}catch{$=S.parse(p.baseFontSize+"px "+$)}else $=S.parse(S.stringify($));var pe=S.stringify({size:p.baseFontSize,family:$.family,stretch:g?$.stretch:void 0,variant:$.variant,weight:$.weight,style:$.style}),ye=n($.size),ke=Math.round(ye[0]*a(ye[1]));if(ke!==w.fontSize[oe]&&(_=!0,w.fontSize[oe]=ke),!(w.font[oe]&&pe==w.font[oe].baseString||(M=!0,w.font[oe]=p.fonts[pe],w.font[oe]))){var De=$.family.join(", "),Pe=[$.style];$.style!=$.variant&&Pe.push($.variant),$.variant!=$.weight&&Pe.push($.weight),g&&$.weight!=$.stretch&&Pe.push($.stretch),w.font[oe]={baseString:pe,family:De,weight:$.weight,stretch:$.stretch,style:$.style,variant:$.variant,width:{},kerning:{},metrics:h(De,{origin:"top",fontSize:p.baseFontSize,fontStyle:Pe.join(" ")})},p.fonts[pe]=w.font[oe]}}),(M||_)&&this.font.forEach(function($,oe){var pe=S.stringify({size:w.fontSize[oe],family:$.family,stretch:g?$.stretch:void 0,variant:$.variant,weight:$.weight,style:$.style});if(w.fontAtlas[oe]=w.shader.atlas[pe],!w.fontAtlas[oe]){var ye=$.metrics;w.shader.atlas[pe]=w.fontAtlas[oe]={fontString:pe,step:2*Math.ceil(w.fontSize[oe]*ye.bottom*.5),em:w.fontSize[oe],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:w.regl.texture()}}m.text==null&&(m.text=w.text)}),typeof m.text=="string"&&m.position&&m.position.length>2){for(var E=Array(.5*m.position.length),L=0;L<E.length;L++)E[L]=m.text;m.text=E}if(m.text!=null||M){if(this.textOffsets=[0],Array.isArray(m.text)){this.count=m.text[0].length,this.counts=[this.count];for(var C=1;C<m.text.length;C++)this.textOffsets[C]=this.textOffsets[C-1]+m.text[C-1].length,this.count+=m.text[C].length,this.counts.push(m.text[C].length);this.text=m.text.join("")}else this.text=m.text,this.count=this.text.length,this.counts=[this.count];c=[],this.font.forEach(function($,oe){p.atlasContext.font=$.baseString;for(var pe=w.fontAtlas[oe],ye=0;ye<w.text.length;ye++){var ke=w.text.charAt(ye);if(pe.ids[ke]==null&&(pe.ids[ke]=pe.chars.length,pe.chars.push(ke),c.push(ke)),$.width[ke]==null&&($.width[ke]=p.atlasContext.measureText(ke).width/p.baseFontSize,w.kerning)){var De=[];for(var Pe in $.width)De.push(Pe+ke,ke+Pe);u($.kerning,i($.family,{pairs:De}))}}})}if(m.position)if(m.position.length>2){for(var O=!m.position[0].length,I=t.mallocFloat(2*this.count),N=0,R=0;N<this.counts.length;N++){var V=this.counts[N];if(O)for(var F=0;F<V;F++)I[R++]=m.position[2*N],I[R++]=m.position[2*N+1];else for(var D=0;D<V;D++)I[R++]=m.position[N][0],I[R++]=m.position[N][1]}this.position.call?this.position({type:"float",data:I}):this.position=this.regl.buffer({type:"float",data:I}),t.freeFloat(I)}else this.position.destroy&&this.position.destroy(),this.position={constant:m.position};if(m.text||M){var U=t.mallocUint8(this.count),j=t.mallocFloat(2*this.count);this.textWidth=[];for(var J=0,X=0;J<this.counts.length;J++){for(var Z=this.counts[J],Y=this.font[J]||this.font[0],W=this.fontAtlas[J]||this.fontAtlas[0],Q=0;Q<Z;Q++){var ne=this.text.charAt(X),re=this.text.charAt(X-1);if(U[X]=W.ids[ne],j[2*X]=Y.width[ne],Q){var ie=j[2*X-2],se=j[2*X],ge=j[2*X-1]+.5*ie+.5*se;if(this.kerning){var ue=Y.kerning[re+ne];ue&&(ge+=.001*ue)}j[2*X+1]=ge}else j[2*X+1]=.5*j[2*X];X++}this.textWidth.push(j.length?.5*j[2*X-2]+j[2*X-1]:0)}m.align||(m.align=this.align),this.charBuffer({data:U,type:"uint8",usage:"stream"}),this.sizeBuffer({data:j,type:"float",usage:"stream"}),t.freeUint8(U),t.freeFloat(j),c.length&&this.font.forEach(function($,oe){var pe=w.fontAtlas[oe],ye=pe.step,ke=Math.floor(p.maxAtlasSize/ye),De=Math.min(ke,pe.chars.length),Pe=Math.ceil(pe.chars.length/De),Re=x(De*ye),fe=x(Pe*ye);pe.width=Re,pe.height=fe,pe.rows=Pe,pe.cols=De,pe.em&&pe.texture({data:s({canvas:p.atlasCanvas,font:pe.fontString,chars:pe.chars,shape:[Re,fe],step:[ye,ye]})})})}if(m.align&&(this.align=m.align,this.alignOffset=this.textWidth.map(function($,oe){var pe=Array.isArray(w.align)?w.align.length>1?w.align[oe]:w.align[0]:w.align;if(typeof pe=="number")return pe;switch(pe){case"right":case"end":return-$;case"center":case"centre":case"middle":return .5*-$}return 0})),this.baseline==null&&m.baseline==null&&(m.baseline=0),m.baseline!=null&&(this.baseline=m.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function($,oe){var pe=(w.font[oe]||w.font[0]).metrics,ye=0;return ye+=.5*pe.bottom,-1*(ye+=typeof $=="number"?$-pe.baseline:-pe[$])})),m.color!=null)if(m.color||(m.color="transparent"),typeof m.color!="string"&&isNaN(m.color)){var ce;if(typeof m.color[0]=="number"&&m.color.length>this.counts.length){var le=m.color.length;ce=t.mallocUint8(le);for(var de=(m.color.subarray||m.color.slice).bind(m.color),Ce=0;Ce<le;Ce+=4)ce.set(d(de(Ce,Ce+4),"uint8"),Ce)}else{var xe=m.color.length;ce=t.mallocUint8(4*xe);for(var _e=0;_e<xe;_e++)ce.set(d(m.color[_e]||0,"uint8"),4*_e)}this.color=ce}else this.color=d(m.color,"uint8");if(m.position||m.text||m.color||m.baseline||m.align||m.font||m.offset||m.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var we=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(we);for(var Ae=0;Ae<this.batch.length;Ae++)this.batch[Ae]={count:this.counts.length>1?this.counts[Ae]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Ae]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*Ae,4*Ae+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Ae]:this.opacity,baseline:this.baselineOffset[Ae]!=null?this.baselineOffset[Ae]:this.baselineOffset[0],align:this.align?this.alignOffset[Ae]!=null?this.alignOffset[Ae]:this.alignOffset[0]:0,atlas:this.fontAtlas[Ae]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*Ae,2*Ae+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]},p.prototype.destroy=function(){},p.prototype.kerning=!0,p.prototype.position={constant:new Float32Array(2)},p.prototype.translate=null,p.prototype.scale=null,p.prototype.font=null,p.prototype.text="",p.prototype.positionOffset=[0,0],p.prototype.opacity=1,p.prototype.color=new Uint8Array([0,0,0,255]),p.prototype.alignOffset=[0,0],p.maxAtlasSize=1024,p.atlasCanvas=document.createElement("canvas"),p.atlasContext=p.atlasCanvas.getContext("2d",{alpha:!1}),p.baseFontSize=64,p.fonts={},K.exports=p},12018:function(K,z,e){var S=e(71299);function k(b){if(b.container)if(b.container==document.body)document.body.style.width||(b.canvas.width=b.width||b.pixelRatio*e.g.innerWidth),document.body.style.height||(b.canvas.height=b.height||b.pixelRatio*e.g.innerHeight);else{var d=b.container.getBoundingClientRect();b.canvas.width=b.width||d.right-d.left,b.canvas.height=b.height||d.bottom-d.top}}function l(b){return typeof b.getContext=="function"&&"width"in b&&"height"in b}function T(){var b=document.createElement("canvas");return b.style.position="absolute",b.style.top=0,b.style.left=0,b}K.exports=function(b){var d;if(b?typeof b=="string"&&(b={container:b}):b={},(b=l(b)||typeof(d=b).nodeName=="string"&&typeof d.appendChild=="function"&&typeof d.getBoundingClientRect=="function"?{container:b}:function(t){return typeof t.drawArrays=="function"||typeof t.drawElements=="function"}(b)?{gl:b}:S(b,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(b.pixelRatio=e.g.pixelRatio||1),b.gl)return b.gl;if(b.canvas&&(b.container=b.canvas.parentNode),b.container){if(typeof b.container=="string"){var s=document.querySelector(b.container);if(!s)throw Error("Element "+b.container+" is not found");b.container=s}l(b.container)?(b.canvas=b.container,b.container=b.canvas.parentNode):b.canvas||(b.canvas=T(),b.container.appendChild(b.canvas),k(b))}else if(!b.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");b.container=document.body||document.documentElement,b.canvas=T(),b.container.appendChild(b.canvas),k(b)}return b.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(t){try{b.gl=b.canvas.getContext(t,b.attrs)}catch{}return b.gl}),b.gl}},56068:function(K){K.exports=function(z){typeof z=="string"&&(z=[z]);for(var e=[].slice.call(arguments,1),S=[],k=0;k<z.length-1;k++)S.push(z[k],e[k]||"");return S.push(z[k]),S.join("")}},40383:function(K,z,e){var S=e(68318)("%Object.getOwnPropertyDescriptor%",!0);if(S)try{S([],"length")}catch{S=null}K.exports=S},57035:function(K,z,e){var S,k=e(54404);S=typeof e.g.matchMedia=="function"?!e.g.matchMedia("(hover: none)").matches:k,K.exports=S},38520:function(K,z,e){var S=e(54404);K.exports=S&&function(){var k=!1;try{var l=Object.defineProperty({},"passive",{get:function(){k=!0}});window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch{k=!1}return k}()},55622:function(K,z,e){var S=e(68318)("%Object.defineProperty%",!0),k=function(){if(S)try{return S({},"a",{value:1}),!0}catch{return!1}return!1};k.hasArrayLengthDefineBug=function(){if(!k())return null;try{return S([],"length",{value:1}).length!==1}catch{return!0}},K.exports=k},57877:function(K,z,e){var S=typeof Symbol<"u"&&Symbol,k=e(35638);K.exports=function(){return typeof S=="function"&&typeof Symbol=="function"&&typeof S("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&k()}},35638:function(K){K.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var z={},e=Symbol("test"),S=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(S)!=="[object Symbol]")return!1;for(e in z[e]=42,z)return!1;if(typeof Object.keys=="function"&&Object.keys(z).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(z).length!==0)return!1;var k=Object.getOwnPropertySymbols(z);if(k.length!==1||k[0]!==e||!Object.prototype.propertyIsEnumerable.call(z,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(z,e);if(l.value!==42||l.enumerable!==!0)return!1}return!0}},84543:function(K,z,e){var S=e(35638);K.exports=function(){return S()&&!!Symbol.toStringTag}},35065:function(K,z,e){var S=e(77575);K.exports=S.call(Function.call,Object.prototype.hasOwnProperty)},95280:function(K,z){z.read=function(e,S,k,l,T){var b,d,s=8*T-l-1,t=(1<<s)-1,o=t>>1,r=-7,n=k?T-1:0,a=k?-1:1,i=e[S+n];for(n+=a,b=i&(1<<-r)-1,i>>=-r,r+=s;r>0;b=256*b+e[S+n],n+=a,r-=8);for(d=b&(1<<-r)-1,b>>=-r,r+=l;r>0;d=256*d+e[S+n],n+=a,r-=8);if(b===0)b=1-o;else{if(b===t)return d?NaN:1/0*(i?-1:1);d+=Math.pow(2,l),b-=o}return(i?-1:1)*d*Math.pow(2,b-l)},z.write=function(e,S,k,l,T,b){var d,s,t,o=8*b-T-1,r=(1<<o)-1,n=r>>1,a=T===23?Math.pow(2,-24)-Math.pow(2,-77):0,i=l?0:b-1,u=l?1:-1,h=S<0||S===0&&1/S<0?1:0;for(S=Math.abs(S),isNaN(S)||S===1/0?(s=isNaN(S)?1:0,d=r):(d=Math.floor(Math.log(S)/Math.LN2),S*(t=Math.pow(2,-d))<1&&(d--,t*=2),(S+=d+n>=1?a/t:a*Math.pow(2,1-n))*t>=2&&(d++,t/=2),d+n>=r?(s=0,d=r):d+n>=1?(s=(S*t-1)*Math.pow(2,T),d+=n):(s=S*Math.pow(2,n-1)*Math.pow(2,T),d=0));T>=8;e[k+i]=255&s,i+=u,s/=256,T-=8);for(d=d<<T|s,o+=T;o>0;e[k+i]=255&d,i+=u,d/=256,o-=8);e[k+i-u]|=128*h}},42018:function(K){typeof Object.create=="function"?K.exports=function(z,e){e&&(z.super_=e,z.prototype=Object.create(e.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}))}:K.exports=function(z,e){if(e){z.super_=e;var S=function(){};S.prototype=e.prototype,z.prototype=new S,z.prototype.constructor=z}}},47216:function(K,z,e){var S=e(84543)(),k=e(6614)("Object.prototype.toString"),l=function(d){return!(S&&d&&typeof d=="object"&&Symbol.toStringTag in d)&&k(d)==="[object Arguments]"},T=function(d){return!!l(d)||d!==null&&typeof d=="object"&&typeof d.length=="number"&&d.length>=0&&k(d)!=="[object Array]"&&k(d.callee)==="[object Function]"},b=function(){return l(arguments)}();l.isLegacyArguments=T,K.exports=b?l:T},54404:function(K){K.exports=!0},85395:function(K){var z,e,S=Function.prototype.toString,k=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply;if(typeof k=="function"&&typeof Object.defineProperty=="function")try{z=Object.defineProperty({},"length",{get:function(){throw e}}),e={},k(function(){throw 42},null,z)}catch(n){n!==e&&(k=null)}else k=null;var l=/^\s*class\b/,T=function(n){try{var a=S.call(n);return l.test(a)}catch{return!1}},b=function(n){try{return!T(n)&&(S.call(n),!0)}catch{return!1}},d=Object.prototype.toString,s=typeof Symbol=="function"&&!!Symbol.toStringTag,t=!(0 in[,]),o=function(){return!1};if(typeof document=="object"){var r=document.all;d.call(r)===d.call(document.all)&&(o=function(n){if((t||!n)&&(n===void 0||typeof n=="object"))try{var a=d.call(n);return(a==="[object HTMLAllCollection]"||a==="[object HTML document.all class]"||a==="[object HTMLCollection]"||a==="[object Object]")&&n("")==null}catch{}return!1})}K.exports=k?function(n){if(o(n))return!0;if(!n||typeof n!="function"&&typeof n!="object")return!1;try{k(n,null,z)}catch(a){if(a!==e)return!1}return!T(n)&&b(n)}:function(n){if(o(n))return!0;if(!n||typeof n!="function"&&typeof n!="object")return!1;if(s)return b(n);if(T(n))return!1;var a=d.call(n);return!(a!=="[object Function]"&&a!=="[object GeneratorFunction]"&&!/^\[object HTML/.test(a))&&b(n)}},65481:function(K,z,e){var S,k=Object.prototype.toString,l=Function.prototype.toString,T=/^\s*(?:function)?\*/,b=e(84543)(),d=Object.getPrototypeOf;K.exports=function(s){if(typeof s!="function")return!1;if(T.test(l.call(s)))return!0;if(!b)return k.call(s)==="[object GeneratorFunction]";if(!d)return!1;if(S===void 0){var t=function(){if(!b)return!1;try{return Function("return function*() {}")()}catch{}}();S=!!t&&d(t)}return d(s)===S}},62683:function(K){K.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},64274:function(K){K.exports=function(z){return z!=z}},15567:function(K,z,e){var S=e(68222),k=e(17045),l=e(64274),T=e(14922),b=e(22442),d=S(T(),Number);k(d,{getPolyfill:T,implementation:l,shim:b}),K.exports=d},14922:function(K,z,e){var S=e(64274);K.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:S}},22442:function(K,z,e){var S=e(17045),k=e(14922);K.exports=function(){var l=k();return S(Number,{isNaN:l},{isNaN:function(){return Number.isNaN!==l}}),l}},64941:function(K){K.exports=function(z){var e=typeof z;return z!==null&&(e==="object"||e==="function")}},10973:function(K){var z=Object.prototype.toString;K.exports=function(e){var S;return z.call(e)==="[object Object]"&&((S=Object.getPrototypeOf(e))===null||S===Object.getPrototypeOf({}))}},18546:function(K){K.exports=function(z){for(var e,S=z.length,k=0;k<S;k++)if(((e=z.charCodeAt(k))<9||e>13)&&e!==32&&e!==133&&e!==160&&e!==5760&&e!==6158&&(e<8192||e>8205)&&e!==8232&&e!==8233&&e!==8239&&e!==8287&&e!==8288&&e!==12288&&e!==65279)return!1;return!0}},89546:function(K){K.exports=function(z){return typeof z=="string"&&(z=z.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(z)&&/[\dz]$/i.test(z)&&z.length>4))}},9187:function(K,z,e){var S=e(31353),k=e(72077),l=e(6614),T=l("Object.prototype.toString"),b=e(84543)(),d=e(40383),s=typeof globalThis>"u"?e.g:globalThis,t=k(),o=l("Array.prototype.indexOf",!0)||function(i,u){for(var h=0;h<i.length;h+=1)if(i[h]===u)return h;return-1},r=l("String.prototype.slice"),n={},a=Object.getPrototypeOf;b&&d&&a&&S(t,function(i){var u=new s[i];if(Symbol.toStringTag in u){var h=a(u),f=d(h,Symbol.toStringTag);if(!f){var x=a(h);f=d(x,Symbol.toStringTag)}n[i]=f.get}}),K.exports=function(i){if(!i||typeof i!="object")return!1;if(!b||!(Symbol.toStringTag in i)){var u=r(T(i),8,-1);return o(t,u)>-1}return!!d&&function(h){var f=!1;return S(n,function(x,v){if(!f)try{f=x.call(h)===v}catch{}}),f}(i)}},44517:function(K){K.exports=function(){var z,e,S;function k(l,T){if(z)if(e){var b="var sharedChunk = {}; ("+z+")(sharedChunk); ("+e+")(sharedChunk);",d={};z(d),(S=T(d)).workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"}))}else e=T;else z=T}return k(0,function(l){function T(A,P){return A(P={exports:{}},P.exports),P.exports}var b="1.10.1",d=s;function s(A,P,q,ae){this.cx=3*A,this.bx=3*(q-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*P,this.by=3*(ae-P)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=ae,this.p2x=q,this.p2y=ae}s.prototype.sampleCurveX=function(A){return((this.ax*A+this.bx)*A+this.cx)*A},s.prototype.sampleCurveY=function(A){return((this.ay*A+this.by)*A+this.cy)*A},s.prototype.sampleCurveDerivativeX=function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},s.prototype.solveCurveX=function(A,P){var q,ae,be,Ee,Ne;for(P===void 0&&(P=1e-6),be=A,Ne=0;Ne<8;Ne++){if(Ee=this.sampleCurveX(be)-A,Math.abs(Ee)<P)return be;var Qe=this.sampleCurveDerivativeX(be);if(Math.abs(Qe)<1e-6)break;be-=Ee/Qe}if((be=A)<(q=0))return q;if(be>(ae=1))return ae;for(;q<ae;){if(Ee=this.sampleCurveX(be),Math.abs(Ee-A)<P)return be;A>Ee?q=be:ae=be,be=.5*(ae-q)+q}return be},s.prototype.solve=function(A,P){return this.sampleCurveY(this.solveCurveX(A,P))};var t=o;function o(A,P){this.x=A,this.y=P}function r(A,P,q,ae){var be=new d(A,P,q,ae);return function(Ee){return be.solve(Ee)}}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(A){return this.clone()._add(A)},sub:function(A){return this.clone()._sub(A)},multByPoint:function(A){return this.clone()._multByPoint(A)},divByPoint:function(A){return this.clone()._divByPoint(A)},mult:function(A){return this.clone()._mult(A)},div:function(A){return this.clone()._div(A)},rotate:function(A){return this.clone()._rotate(A)},rotateAround:function(A,P){return this.clone()._rotateAround(A,P)},matMult:function(A){return this.clone()._matMult(A)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(A){return this.x===A.x&&this.y===A.y},dist:function(A){return Math.sqrt(this.distSqr(A))},distSqr:function(A){var P=A.x-this.x,q=A.y-this.y;return P*P+q*q},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(A){return Math.atan2(this.y-A.y,this.x-A.x)},angleWith:function(A){return this.angleWithSep(A.x,A.y)},angleWithSep:function(A,P){return Math.atan2(this.x*P-this.y*A,this.x*A+this.y*P)},_matMult:function(A){var P=A[0]*this.x+A[1]*this.y,q=A[2]*this.x+A[3]*this.y;return this.x=P,this.y=q,this},_add:function(A){return this.x+=A.x,this.y+=A.y,this},_sub:function(A){return this.x-=A.x,this.y-=A.y,this},_mult:function(A){return this.x*=A,this.y*=A,this},_div:function(A){return this.x/=A,this.y/=A,this},_multByPoint:function(A){return this.x*=A.x,this.y*=A.y,this},_divByPoint:function(A){return this.x/=A.x,this.y/=A.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var A=this.y;return this.y=this.x,this.x=-A,this},_rotate:function(A){var P=Math.cos(A),q=Math.sin(A),ae=P*this.x-q*this.y,be=q*this.x+P*this.y;return this.x=ae,this.y=be,this},_rotateAround:function(A,P){var q=Math.cos(A),ae=Math.sin(A),be=P.x+q*(this.x-P.x)-ae*(this.y-P.y),Ee=P.y+ae*(this.x-P.x)+q*(this.y-P.y);return this.x=be,this.y=Ee,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(A){return A instanceof o?A:Array.isArray(A)?new o(A[0],A[1]):A};var n=r(.25,.1,.25,1);function a(A,P,q){return Math.min(q,Math.max(P,A))}function i(A,P,q){var ae=q-P,be=((A-P)%ae+ae)%ae+P;return be===P?q:be}function u(A){for(var P=[],q=arguments.length-1;q-- >0;)P[q]=arguments[q+1];for(var ae=0,be=P;ae<be.length;ae+=1){var Ee=be[ae];for(var Ne in Ee)A[Ne]=Ee[Ne]}return A}var h=1;function f(){return h++}function x(){return function A(P){return P?(P^16*Math.random()>>P/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,A)}()}function v(A){return!!A&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(A)}function g(A,P){A.forEach(function(q){P[q]&&(P[q]=P[q].bind(P))})}function y(A,P){return A.indexOf(P,A.length-P.length)!==-1}function p(A,P,q){var ae={};for(var be in A)ae[be]=P.call(q||this,A[be],be,A);return ae}function m(A,P,q){var ae={};for(var be in A)P.call(q||this,A[be],be,A)&&(ae[be]=A[be]);return ae}function w(A){return Array.isArray(A)?A.map(w):typeof A=="object"&&A?p(A,w):A}var c={};function M(A){c[A]||(typeof console<"u"&&console.warn(A),c[A]=!0)}function _(A,P,q){return(q.y-A.y)*(P.x-A.x)>(P.y-A.y)*(q.x-A.x)}function E(A){for(var P=0,q=0,ae=A.length,be=ae-1,Ee=void 0,Ne=void 0;q<ae;be=q++)Ee=A[q],P+=((Ne=A[be]).x-Ee.x)*(Ee.y+Ne.y);return P}function L(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function C(A){var P={};if(A.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(ae,be,Ee,Ne){var Qe=Ee||Ne;return P[be]=!Qe||Qe.toLowerCase(),""}),P["max-age"]){var q=parseInt(P["max-age"],10);isNaN(q)?delete P["max-age"]:P["max-age"]=q}return P}var O=null;function I(A){if(O==null){var P=A.navigator?A.navigator.userAgent:null;O=!!A.safari||!(!P||!(/\b(iPad|iPhone|iPod)\b/.test(P)||P.match("Safari")&&!P.match("Chrome")))}return O}function N(A){try{var P=self[A];return P.setItem("_mapbox_test_",1),P.removeItem("_mapbox_test_"),!0}catch{return!1}}var R,V,F,D,U=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),j=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,J=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,X={now:U,frame:function(A){var P=j(A);return{cancel:function(){return J(P)}}},getImageData:function(A,P){P===void 0&&(P=0);var q=self.document.createElement("canvas"),ae=q.getContext("2d");if(!ae)throw new Error("failed to create canvas 2d context");return q.width=A.width,q.height=A.height,ae.drawImage(A,0,0,A.width,A.height),ae.getImageData(-P,-P,A.width+2*P,A.height+2*P)},resolveURL:function(A){return R||(R=self.document.createElement("a")),R.href=A,R.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(V==null&&(V=self.matchMedia("(prefers-reduced-motion: reduce)")),V.matches)}},Z={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Y={supported:!1,testSupport:function(A){!W&&D&&(Q?ne(A):F=A)}},W=!1,Q=!1;function ne(A){var P=A.createTexture();A.bindTexture(A.TEXTURE_2D,P);try{if(A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,D),A.isContextLost())return;Y.supported=!0}catch{}A.deleteTexture(P),W=!0}self.document&&((D=self.document.createElement("img")).onload=function(){F&&ne(F),F=null,Q=!0},D.onerror=function(){W=!0,F=null},D.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var re="01",ie=function(A,P){this._transformRequestFn=A,this._customAccessToken=P,this._createSkuToken()};function se(A){return A.indexOf("mapbox:")===0}ie.prototype._createSkuToken=function(){var A=function(){for(var P="",q=0;q<10;q++)P+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",re,P].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=A.token,this._skuTokenExpiresAt=A.tokenExpiresAt},ie.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ie.prototype.transformRequest=function(A,P){return this._transformRequestFn&&this._transformRequestFn(A,P)||{url:A}},ie.prototype.normalizeStyleURL=function(A,P){if(!se(A))return A;var q=le(A);return q.path="/styles/v1"+q.path,this._makeAPIURL(q,this._customAccessToken||P)},ie.prototype.normalizeGlyphsURL=function(A,P){if(!se(A))return A;var q=le(A);return q.path="/fonts/v1"+q.path,this._makeAPIURL(q,this._customAccessToken||P)},ie.prototype.normalizeSourceURL=function(A,P){if(!se(A))return A;var q=le(A);return q.path="/v4/"+q.authority+".json",q.params.push("secure"),this._makeAPIURL(q,this._customAccessToken||P)},ie.prototype.normalizeSpriteURL=function(A,P,q,ae){var be=le(A);return se(A)?(be.path="/styles/v1"+be.path+"/sprite"+P+q,this._makeAPIURL(be,this._customAccessToken||ae)):(be.path+=""+P+q,de(be))},ie.prototype.normalizeTileURL=function(A,P){if(this._isSkuTokenExpired()&&this._createSkuToken(),A&&!se(A))return A;var q=le(A),ae=X.devicePixelRatio>=2||P===512?"@2x":"",be=Y.supported?".webp":"$1";q.path=q.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+ae+be),q.path=q.path.replace(/^.+\/v4\//,"/"),q.path="/v4"+q.path;var Ee=this._customAccessToken||function(Ne){for(var Qe=0,ut=Ne;Qe<ut.length;Qe+=1){var wt=ut[Qe].match(/^access_token=(.*)$/);if(wt)return wt[1]}return null}(q.params)||Z.ACCESS_TOKEN;return Z.REQUIRE_ACCESS_TOKEN&&Ee&&this._skuToken&&q.params.push("sku="+this._skuToken),this._makeAPIURL(q,Ee)},ie.prototype.canonicalizeTileURL=function(A,P){var q=le(A);if(!q.path.match(/(^\/v4\/)/)||!q.path.match(/\.[\w]+$/))return A;var ae="mapbox://tiles/";ae+=q.path.replace("/v4/","");var be=q.params;return P&&(be=be.filter(function(Ee){return!Ee.match(/^access_token=/)})),be.length&&(ae+="?"+be.join("&")),ae},ie.prototype.canonicalizeTileset=function(A,P){for(var q=!!P&&se(P),ae=[],be=0,Ee=A.tiles||[];be<Ee.length;be+=1){var Ne=Ee[be];ue(Ne)?ae.push(this.canonicalizeTileURL(Ne,q)):ae.push(Ne)}return ae},ie.prototype._makeAPIURL=function(A,P){var q="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ae=le(Z.API_URL);if(A.protocol=ae.protocol,A.authority=ae.authority,ae.path!=="/"&&(A.path=""+ae.path+A.path),!Z.REQUIRE_ACCESS_TOKEN)return de(A);if(!(P=P||Z.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+q);if(P[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+q);return A.params=A.params.filter(function(be){return be.indexOf("access_token")===-1}),A.params.push("access_token="+P),de(A)};var ge=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function ue(A){return ge.test(A)}var ce=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function le(A){var P=A.match(ce);if(!P)throw new Error("Unable to parse URL object");return{protocol:P[1],authority:P[2],path:P[3]||"/",params:P[4]?P[4].split("&"):[]}}function de(A){var P=A.params.length?"?"+A.params.join("&"):"";return A.protocol+"://"+A.authority+A.path+P}var Ce="mapbox.eventData";function xe(A){if(!A)return null;var P,q=A.split(".");if(!q||q.length!==3)return null;try{return JSON.parse((P=q[1],decodeURIComponent(self.atob(P).split("").map(function(ae){return"%"+("00"+ae.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch{return null}}var _e=function(A){this.type=A,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};_e.prototype.getStorageKey=function(A){var P,q,ae=xe(Z.ACCESS_TOKEN);return P=ae&&ae.u?(q=ae.u,self.btoa(encodeURIComponent(q).replace(/%([0-9A-F]{2})/g,function(be,Ee){return String.fromCharCode(+("0x"+Ee))}))):Z.ACCESS_TOKEN||"",A?Ce+"."+A+":"+P:Ce+":"+P},_e.prototype.fetchEventData=function(){var A=N("localStorage"),P=this.getStorageKey(),q=this.getStorageKey("uuid");if(A)try{var ae=self.localStorage.getItem(P);ae&&(this.eventData=JSON.parse(ae));var be=self.localStorage.getItem(q);be&&(this.anonId=be)}catch{M("Unable to read from LocalStorage")}},_e.prototype.saveEventData=function(){var A=N("localStorage"),P=this.getStorageKey(),q=this.getStorageKey("uuid");if(A)try{self.localStorage.setItem(q,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(P,JSON.stringify(this.eventData))}catch{M("Unable to write to LocalStorage")}},_e.prototype.processRequests=function(A){},_e.prototype.postEvent=function(A,P,q,ae){var be=this;if(Z.EVENTS_URL){var Ee=le(Z.EVENTS_URL);Ee.params.push("access_token="+(ae||Z.ACCESS_TOKEN||""));var Ne={event:this.type,created:new Date(A).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:b,skuId:re,userId:this.anonId},Qe=P?u(Ne,P):Ne,ut={url:de(Ee),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Qe])};this.pendingRequest=Et(ut,function(wt){be.pendingRequest=null,q(wt),be.saveEventData(),be.processRequests(ae)})}},_e.prototype.queueRequest=function(A,P){this.queue.push(A),this.processRequests(P)};var we,Ae,$=function(A){function P(){A.call(this,"map.load"),this.success={},this.skuToken=""}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.postMapLoadEvent=function(q,ae,be,Ee){this.skuToken=be,(Z.EVENTS_URL&&Ee||Z.ACCESS_TOKEN&&Array.isArray(q)&&q.some(function(Ne){return se(Ne)||ue(Ne)}))&&this.queueRequest({id:ae,timestamp:Date.now()},Ee)},P.prototype.processRequests=function(q){var ae=this;if(!this.pendingRequest&&this.queue.length!==0){var be=this.queue.shift(),Ee=be.id,Ne=be.timestamp;Ee&&this.success[Ee]||(this.anonId||this.fetchEventData(),v(this.anonId)||(this.anonId=x()),this.postEvent(Ne,{skuToken:this.skuToken},function(Qe){Qe||Ee&&(ae.success[Ee]=!0)},q))}},P}(_e),oe=function(A){function P(q){A.call(this,"appUserTurnstile"),this._customAccessToken=q}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.postTurnstileEvent=function(q,ae){Z.EVENTS_URL&&Z.ACCESS_TOKEN&&Array.isArray(q)&&q.some(function(be){return se(be)||ue(be)})&&this.queueRequest(Date.now(),ae)},P.prototype.processRequests=function(q){var ae=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var be=xe(Z.ACCESS_TOKEN),Ee=be?be.u:Z.ACCESS_TOKEN,Ne=Ee!==this.eventData.tokenU;v(this.anonId)||(this.anonId=x(),Ne=!0);var Qe=this.queue.shift();if(this.eventData.lastSuccess){var ut=new Date(this.eventData.lastSuccess),wt=new Date(Qe),Lt=(Qe-this.eventData.lastSuccess)/864e5;Ne=Ne||Lt>=1||Lt<-1||ut.getDate()!==wt.getDate()}else Ne=!0;if(!Ne)return this.processRequests();this.postEvent(Qe,{"enabled.telemetry":!1},function(Bt){Bt||(ae.eventData.lastSuccess=Qe,ae.eventData.tokenU=Ee)},q)}},P}(_e),pe=new oe,ye=pe.postTurnstileEvent.bind(pe),ke=new $,De=ke.postMapLoadEvent.bind(ke),Pe="mapbox-tiles",Re=500,fe=50;function ve(){self.caches&&!we&&(we=self.caches.open(Pe))}function Te(A,P,q){if(ve(),we){var ae={status:P.status,statusText:P.statusText,headers:new self.Headers};P.headers.forEach(function(Ee,Ne){return ae.headers.set(Ne,Ee)});var be=C(P.headers.get("Cache-Control")||"");be["no-store"]||(be["max-age"]&&ae.headers.set("Expires",new Date(q+1e3*be["max-age"]).toUTCString()),new Date(ae.headers.get("Expires")).getTime()-q<42e4||function(Ee,Ne){if(Ae===void 0)try{new Response(new ReadableStream),Ae=!0}catch{Ae=!1}Ae?Ne(Ee.body):Ee.blob().then(Ne)}(P,function(Ee){var Ne=new self.Response(Ee,ae);ve(),we&&we.then(function(Qe){return Qe.put(ze(A.url),Ne)}).catch(function(Qe){return M(Qe.message)})}))}}function ze(A){var P=A.indexOf("?");return P<0?A:A.slice(0,P)}function He(A,P){if(ve(),!we)return P(null);var q=ze(A.url);we.then(function(ae){ae.match(q).then(function(be){var Ee=function(Ne){if(!Ne)return!1;var Qe=new Date(Ne.headers.get("Expires")||0),ut=C(Ne.headers.get("Cache-Control")||"");return Qe>Date.now()&&!ut["no-cache"]}(be);ae.delete(q),Ee&&ae.put(q,be.clone()),P(null,be,Ee)}).catch(P)}).catch(P)}var Ve,nt=1/0;function tt(){return Ve==null&&(Ve=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),Ve}var ot={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ot);var pt=function(A){function P(q,ae,be){ae===401&&ue(be)&&(q+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),A.call(this,q),this.status=ae,this.url=be,this.name=this.constructor.name,this.message=q}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},P}(Error),Tt=L()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href};function yt(A,P){var q,ae=new self.AbortController,be=new self.Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,referrer:Tt(),signal:ae.signal}),Ee=!1,Ne=!1,Qe=(q=be.url).indexOf("sku=")>0&&ue(q);A.type==="json"&&be.headers.set("Accept","application/json");var ut=function(Lt,Bt,Ht){if(!Ne){if(Lt&&Lt.message!=="SecurityError"&&M(Lt),Bt&&Ht)return wt(Bt);var Vt=Date.now();self.fetch(be).then(function(an){if(an.ok){var yn=Qe?an.clone():null;return wt(an,yn,Vt)}return P(new pt(an.statusText,an.status,A.url))}).catch(function(an){an.code!==20&&P(new Error(an.message))})}},wt=function(Lt,Bt,Ht){(A.type==="arrayBuffer"?Lt.arrayBuffer():A.type==="json"?Lt.json():Lt.text()).then(function(Vt){Ne||(Bt&&Ht&&Te(be,Bt,Ht),Ee=!0,P(null,Vt,Lt.headers.get("Cache-Control"),Lt.headers.get("Expires")))}).catch(function(Vt){Ne||P(new Error(Vt.message))})};return Qe?He(be,ut):ut(null,null),{cancel:function(){Ne=!0,Ee||ae.abort()}}}var dt=function(A,P){if(q=A.url,!(/^file:/.test(q)||/^file:/.test(Tt())&&!/^\w+:/.test(q))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return yt(A,P);if(L()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",A,P,void 0,!0)}var q;return function(ae,be){var Ee=new self.XMLHttpRequest;for(var Ne in Ee.open(ae.method||"GET",ae.url,!0),ae.type==="arrayBuffer"&&(Ee.responseType="arraybuffer"),ae.headers)Ee.setRequestHeader(Ne,ae.headers[Ne]);return ae.type==="json"&&(Ee.responseType="text",Ee.setRequestHeader("Accept","application/json")),Ee.withCredentials=ae.credentials==="include",Ee.onerror=function(){be(new Error(Ee.statusText))},Ee.onload=function(){if((Ee.status>=200&&Ee.status<300||Ee.status===0)&&Ee.response!==null){var Qe=Ee.response;if(ae.type==="json")try{Qe=JSON.parse(Ee.response)}catch(ut){return be(ut)}be(null,Qe,Ee.getResponseHeader("Cache-Control"),Ee.getResponseHeader("Expires"))}else be(new pt(Ee.statusText,Ee.status,ae.url))},Ee.send(ae.body),{cancel:function(){return Ee.abort()}}}(A,P)},Pt=function(A,P){return dt(u(A,{type:"arrayBuffer"}),P)},Et=function(A,P){return dt(u(A,{method:"POST"}),P)},Ot,Nt;Ot=[],Nt=0;var zt=function(A,P){if(Y.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),Nt>=Z.MAX_PARALLEL_IMAGE_REQUESTS){var q={requestParameters:A,callback:P,cancelled:!1,cancel:function(){this.cancelled=!0}};return Ot.push(q),q}Nt++;var ae=!1,be=function(){if(!ae)for(ae=!0,Nt--;Ot.length&&Nt<Z.MAX_PARALLEL_IMAGE_REQUESTS;){var Ne=Ot.shift(),Qe=Ne.requestParameters,ut=Ne.callback;Ne.cancelled||(Ne.cancel=zt(Qe,ut).cancel)}},Ee=Pt(A,function(Ne,Qe,ut,wt){be(),Ne?P(Ne):Qe&&(tt()?function(Lt,Bt){var Ht=new self.Blob([new Uint8Array(Lt)],{type:"image/png"});self.createImageBitmap(Ht).then(function(Vt){Bt(null,Vt)}).catch(function(Vt){Bt(new Error("Could not load image because of "+Vt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Qe,P):function(Lt,Bt,Ht,Vt){var an=new self.Image,yn=self.URL;an.onload=function(){Bt(null,an),yn.revokeObjectURL(an.src)},an.onerror=function(){return Bt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var On=new self.Blob([new Uint8Array(Lt)],{type:"image/png"});an.cacheControl=Ht,an.expires=Vt,an.src=Lt.byteLength?yn.createObjectURL(On):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Qe,P,ut,wt))});return{cancel:function(){Ee.cancel(),be()}}};function Ze(A,P,q){q[A]&&q[A].indexOf(P)!==-1||(q[A]=q[A]||[],q[A].push(P))}function Ye(A,P,q){if(q&&q[A]){var ae=q[A].indexOf(P);ae!==-1&&q[A].splice(ae,1)}}var je=function(A,P){P===void 0&&(P={}),u(this,P),this.type=A},Ke=function(A){function P(q,ae){ae===void 0&&(ae={}),A.call(this,"error",u({error:q},ae))}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P}(je),st=function(){};st.prototype.on=function(A,P){return this._listeners=this._listeners||{},Ze(A,P,this._listeners),this},st.prototype.off=function(A,P){return Ye(A,P,this._listeners),Ye(A,P,this._oneTimeListeners),this},st.prototype.once=function(A,P){return this._oneTimeListeners=this._oneTimeListeners||{},Ze(A,P,this._oneTimeListeners),this},st.prototype.fire=function(A,P){typeof A=="string"&&(A=new je(A,P||{}));var q=A.type;if(this.listens(q)){A.target=this;for(var ae=0,be=this._listeners&&this._listeners[q]?this._listeners[q].slice():[];ae<be.length;ae+=1)be[ae].call(this,A);for(var Ee=0,Ne=this._oneTimeListeners&&this._oneTimeListeners[q]?this._oneTimeListeners[q].slice():[];Ee<Ne.length;Ee+=1){var Qe=Ne[Ee];Ye(q,Qe,this._oneTimeListeners),Qe.call(this,A)}var ut=this._eventedParent;ut&&(u(A,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),ut.fire(A))}else A instanceof Ke&&console.error(A.error);return this},st.prototype.listens=function(A){return this._listeners&&this._listeners[A]&&this._listeners[A].length>0||this._oneTimeListeners&&this._oneTimeListeners[A]&&this._oneTimeListeners[A].length>0||this._eventedParent&&this._eventedParent.listens(A)},st.prototype.setEventedParent=function(A,P){return this._eventedParent=A,this._eventedParentData=P,this};var Se={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ie=function(A,P,q,ae){this.message=(A?A+": ":"")+q,ae&&(this.identifier=ae),P!=null&&P.__line__&&(this.line=P.__line__)};function We(A){var P=A.key,q=A.value;return q?[new Ie(P,q,"constants have been deprecated as of v8")]:[]}function it(A){for(var P=[],q=arguments.length-1;q-- >0;)P[q]=arguments[q+1];for(var ae=0,be=P;ae<be.length;ae+=1){var Ee=be[ae];for(var Ne in Ee)A[Ne]=Ee[Ne]}return A}function lt(A){return A instanceof Number||A instanceof String||A instanceof Boolean?A.valueOf():A}function gt(A){if(Array.isArray(A))return A.map(gt);if(A instanceof Object&&!(A instanceof Number||A instanceof String||A instanceof Boolean)){var P={};for(var q in A)P[q]=gt(A[q]);return P}return lt(A)}var At=function(A){function P(q,ae){A.call(this,ae),this.message=ae,this.key=q}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P}(Error),kt=function(A,P){P===void 0&&(P=[]),this.parent=A,this.bindings={};for(var q=0,ae=P;q<ae.length;q+=1){var be=ae[q],Ee=be[0],Ne=be[1];this.bindings[Ee]=Ne}};kt.prototype.concat=function(A){return new kt(this,A)},kt.prototype.get=function(A){if(this.bindings[A])return this.bindings[A];if(this.parent)return this.parent.get(A);throw new Error(A+" not found in scope.")},kt.prototype.has=function(A){return!!this.bindings[A]||!!this.parent&&this.parent.has(A)};var ht={kind:"null"},St={kind:"number"},vt={kind:"string"},Mt={kind:"boolean"},It={kind:"color"},Ut={kind:"object"},jt={kind:"value"},qt={kind:"collator"},Yt={kind:"formatted"},Kt={kind:"resolvedImage"};function pn(A,P){return{kind:"array",itemType:A,N:P}}function nn(A){if(A.kind==="array"){var P=nn(A.itemType);return typeof A.N=="number"?"array<"+P+", "+A.N+">":A.itemType.kind==="value"?"array":"array<"+P+">"}return A.kind}var xn=[ht,St,vt,Mt,It,Yt,Ut,pn(jt),Kt];function jn(A,P){if(P.kind==="error")return null;if(A.kind==="array"){if(P.kind==="array"&&(P.N===0&&P.itemType.kind==="value"||!jn(A.itemType,P.itemType))&&(typeof A.N!="number"||A.N===P.N))return null}else{if(A.kind===P.kind)return null;if(A.kind==="value"){for(var q=0,ae=xn;q<ae.length;q+=1)if(!jn(ae[q],P))return null}}return"Expected "+nn(A)+" but found "+nn(P)+" instead."}function mn(A,P){return P.some(function(q){return q.kind===A.kind})}function en(A,P){return P.some(function(q){return q==="null"?A===null:q==="array"?Array.isArray(A):q==="object"?A&&!Array.isArray(A)&&typeof A=="object":q===typeof A})}var vn=T(function(A,P){var q={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ae(ut){return(ut=Math.round(ut))<0?0:ut>255?255:ut}function be(ut){return ut<0?0:ut>1?1:ut}function Ee(ut){return ut[ut.length-1]==="%"?ae(parseFloat(ut)/100*255):ae(parseInt(ut))}function Ne(ut){return ut[ut.length-1]==="%"?be(parseFloat(ut)/100):be(parseFloat(ut))}function Qe(ut,wt,Lt){return Lt<0?Lt+=1:Lt>1&&(Lt-=1),6*Lt<1?ut+(wt-ut)*Lt*6:2*Lt<1?wt:3*Lt<2?ut+(wt-ut)*(2/3-Lt)*6:ut}try{P.parseCSSColor=function(ut){var wt,Lt=ut.replace(/ /g,"").toLowerCase();if(Lt in q)return q[Lt].slice();if(Lt[0]==="#")return Lt.length===4?(wt=parseInt(Lt.substr(1),16))>=0&&wt<=4095?[(3840&wt)>>4|(3840&wt)>>8,240&wt|(240&wt)>>4,15&wt|(15&wt)<<4,1]:null:Lt.length===7&&(wt=parseInt(Lt.substr(1),16))>=0&&wt<=16777215?[(16711680&wt)>>16,(65280&wt)>>8,255&wt,1]:null;var Bt=Lt.indexOf("("),Ht=Lt.indexOf(")");if(Bt!==-1&&Ht+1===Lt.length){var Vt=Lt.substr(0,Bt),an=Lt.substr(Bt+1,Ht-(Bt+1)).split(","),yn=1;switch(Vt){case"rgba":if(an.length!==4)return null;yn=Ne(an.pop());case"rgb":return an.length!==3?null:[Ee(an[0]),Ee(an[1]),Ee(an[2]),yn];case"hsla":if(an.length!==4)return null;yn=Ne(an.pop());case"hsl":if(an.length!==3)return null;var On=(parseFloat(an[0])%360+360)%360/360,Pn=Ne(an[1]),Nn=Ne(an[2]),Vn=Nn<=.5?Nn*(Pn+1):Nn+Pn-Nn*Pn,Zn=2*Nn-Vn;return[ae(255*Qe(Zn,Vn,On+1/3)),ae(255*Qe(Zn,Vn,On)),ae(255*Qe(Zn,Vn,On-1/3)),yn];default:return null}}return null}}catch{}}),on=vn.parseCSSColor,sn=function(A,P,q,ae){ae===void 0&&(ae=1),this.r=A,this.g=P,this.b=q,this.a=ae};sn.parse=function(A){if(A){if(A instanceof sn)return A;if(typeof A=="string"){var P=on(A);if(P)return new sn(P[0]/255*P[3],P[1]/255*P[3],P[2]/255*P[3],P[3])}}},sn.prototype.toString=function(){var A=this.toArray(),P=A[0],q=A[1],ae=A[2],be=A[3];return"rgba("+Math.round(P)+","+Math.round(q)+","+Math.round(ae)+","+be+")"},sn.prototype.toArray=function(){var A=this,P=A.r,q=A.g,ae=A.b,be=A.a;return be===0?[0,0,0,0]:[255*P/be,255*q/be,255*ae/be,be]},sn.black=new sn(0,0,0,1),sn.white=new sn(1,1,1,1),sn.transparent=new sn(0,0,0,0),sn.red=new sn(1,0,0,1);var En=function(A,P,q){this.sensitivity=A?P?"variant":"case":P?"accent":"base",this.locale=q,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};En.prototype.compare=function(A,P){return this.collator.compare(A,P)},En.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var kn=function(A,P,q,ae,be){this.text=A,this.image=P,this.scale=q,this.fontStack=ae,this.textColor=be},zn=function(A){this.sections=A};zn.fromString=function(A){return new zn([new kn(A,null,null,null,null)])},zn.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(A){return A.text.length!==0||A.image&&A.image.name.length!==0})},zn.factory=function(A){return A instanceof zn?A:zn.fromString(A)},zn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(A){return A.text}).join("")},zn.prototype.serialize=function(){for(var A=["format"],P=0,q=this.sections;P<q.length;P+=1){var ae=q[P];if(ae.image)A.push(["image",ae.image.name]);else{A.push(ae.text);var be={};ae.fontStack&&(be["text-font"]=["literal",ae.fontStack.split(",")]),ae.scale&&(be["font-scale"]=ae.scale),ae.textColor&&(be["text-color"]=["rgba"].concat(ae.textColor.toArray())),A.push(be)}}return A};var Fn=function(A){this.name=A.name,this.available=A.available};function Bn(A,P,q,ae){return typeof A=="number"&&A>=0&&A<=255&&typeof P=="number"&&P>=0&&P<=255&&typeof q=="number"&&q>=0&&q<=255?ae===void 0||typeof ae=="number"&&ae>=0&&ae<=1?null:"Invalid rgba value ["+[A,P,q,ae].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof ae=="number"?[A,P,q,ae]:[A,P,q]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function er(A){if(A===null||typeof A=="string"||typeof A=="boolean"||typeof A=="number"||A instanceof sn||A instanceof En||A instanceof zn||A instanceof Fn)return!0;if(Array.isArray(A)){for(var P=0,q=A;P<q.length;P+=1)if(!er(q[P]))return!1;return!0}if(typeof A=="object"){for(var ae in A)if(!er(A[ae]))return!1;return!0}return!1}function Xn(A){if(A===null)return ht;if(typeof A=="string")return vt;if(typeof A=="boolean")return Mt;if(typeof A=="number")return St;if(A instanceof sn)return It;if(A instanceof En)return qt;if(A instanceof zn)return Yt;if(A instanceof Fn)return Kt;if(Array.isArray(A)){for(var P,q=A.length,ae=0,be=A;ae<be.length;ae+=1){var Ee=Xn(be[ae]);if(P){if(P===Ee)continue;P=jt;break}P=Ee}return pn(P||jt,q)}return Ut}function mr(A){var P=typeof A;return A===null?"":P==="string"||P==="number"||P==="boolean"?String(A):A instanceof sn||A instanceof zn||A instanceof Fn?A.toString():JSON.stringify(A)}Fn.prototype.toString=function(){return this.name},Fn.fromString=function(A){return A?new Fn({name:A,available:!1}):null},Fn.prototype.serialize=function(){return["image",this.name]};var ur=function(A,P){this.type=A,this.value=P};ur.parse=function(A,P){if(A.length!==2)return P.error("'literal' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(!er(A[1]))return P.error("invalid value");var q=A[1],ae=Xn(q),be=P.expectedType;return ae.kind!=="array"||ae.N!==0||!be||be.kind!=="array"||typeof be.N=="number"&&be.N!==0||(ae=be),new ur(ae,q)},ur.prototype.evaluate=function(){return this.value},ur.prototype.eachChild=function(){},ur.prototype.outputDefined=function(){return!0},ur.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof sn?["rgba"].concat(this.value.toArray()):this.value instanceof zn?this.value.serialize():this.value};var $n=function(A){this.name="ExpressionEvaluationError",this.message=A};$n.prototype.toJSON=function(){return this.message};var lr={string:vt,number:St,boolean:Mt,object:Ut},hr=function(A,P){this.type=A,this.args=P};hr.parse=function(A,P){if(A.length<2)return P.error("Expected at least one argument.");var q,ae=1,be=A[0];if(be==="array"){var Ee,Ne;if(A.length>2){var Qe=A[1];if(typeof Qe!="string"||!(Qe in lr)||Qe==="object")return P.error('The item type argument of "array" must be one of string, number, boolean',1);Ee=lr[Qe],ae++}else Ee=jt;if(A.length>3){if(A[2]!==null&&(typeof A[2]!="number"||A[2]<0||A[2]!==Math.floor(A[2])))return P.error('The length argument to "array" must be a positive integer literal',2);Ne=A[2],ae++}q=pn(Ee,Ne)}else q=lr[be];for(var ut=[];ae<A.length;ae++){var wt=P.parse(A[ae],ae,jt);if(!wt)return null;ut.push(wt)}return new hr(q,ut)},hr.prototype.evaluate=function(A){for(var P=0;P<this.args.length;P++){var q=this.args[P].evaluate(A);if(!jn(this.type,Xn(q)))return q;if(P===this.args.length-1)throw new $n("Expected value to be of type "+nn(this.type)+", but found "+nn(Xn(q))+" instead.")}return null},hr.prototype.eachChild=function(A){this.args.forEach(A)},hr.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},hr.prototype.serialize=function(){var A=this.type,P=[A.kind];if(A.kind==="array"){var q=A.itemType;if(q.kind==="string"||q.kind==="number"||q.kind==="boolean"){P.push(q.kind);var ae=A.N;(typeof ae=="number"||this.args.length>1)&&P.push(ae)}}return P.concat(this.args.map(function(be){return be.serialize()}))};var Gt=function(A){this.type=Yt,this.sections=A};Gt.parse=function(A,P){if(A.length<2)return P.error("Expected at least one argument.");var q=A[1];if(!Array.isArray(q)&&typeof q=="object")return P.error("First argument must be an image or text section.");for(var ae=[],be=!1,Ee=1;Ee<=A.length-1;++Ee){var Ne=A[Ee];if(be&&typeof Ne=="object"&&!Array.isArray(Ne)){be=!1;var Qe=null;if(Ne["font-scale"]&&!(Qe=P.parse(Ne["font-scale"],1,St)))return null;var ut=null;if(Ne["text-font"]&&!(ut=P.parse(Ne["text-font"],1,pn(vt))))return null;var wt=null;if(Ne["text-color"]&&!(wt=P.parse(Ne["text-color"],1,It)))return null;var Lt=ae[ae.length-1];Lt.scale=Qe,Lt.font=ut,Lt.textColor=wt}else{var Bt=P.parse(A[Ee],1,jt);if(!Bt)return null;var Ht=Bt.type.kind;if(Ht!=="string"&&Ht!=="value"&&Ht!=="null"&&Ht!=="resolvedImage")return P.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");be=!0,ae.push({content:Bt,scale:null,font:null,textColor:null})}}return new Gt(ae)},Gt.prototype.evaluate=function(A){return new zn(this.sections.map(function(P){var q=P.content.evaluate(A);return Xn(q)===Kt?new kn("",q,null,null,null):new kn(mr(q),null,P.scale?P.scale.evaluate(A):null,P.font?P.font.evaluate(A).join(","):null,P.textColor?P.textColor.evaluate(A):null)}))},Gt.prototype.eachChild=function(A){for(var P=0,q=this.sections;P<q.length;P+=1){var ae=q[P];A(ae.content),ae.scale&&A(ae.scale),ae.font&&A(ae.font),ae.textColor&&A(ae.textColor)}},Gt.prototype.outputDefined=function(){return!1},Gt.prototype.serialize=function(){for(var A=["format"],P=0,q=this.sections;P<q.length;P+=1){var ae=q[P];A.push(ae.content.serialize());var be={};ae.scale&&(be["font-scale"]=ae.scale.serialize()),ae.font&&(be["text-font"]=ae.font.serialize()),ae.textColor&&(be["text-color"]=ae.textColor.serialize()),A.push(be)}return A};var hn=function(A){this.type=Kt,this.input=A};hn.parse=function(A,P){if(A.length!==2)return P.error("Expected two arguments.");var q=P.parse(A[1],1,vt);return q?new hn(q):P.error("No image name provided.")},hn.prototype.evaluate=function(A){var P=this.input.evaluate(A),q=Fn.fromString(P);return q&&A.availableImages&&(q.available=A.availableImages.indexOf(P)>-1),q},hn.prototype.eachChild=function(A){A(this.input)},hn.prototype.outputDefined=function(){return!1},hn.prototype.serialize=function(){return["image",this.input.serialize()]};var An={"to-boolean":Mt,"to-color":It,"to-number":St,"to-string":vt},Tn=function(A,P){this.type=A,this.args=P};Tn.parse=function(A,P){if(A.length<2)return P.error("Expected at least one argument.");var q=A[0];if((q==="to-boolean"||q==="to-string")&&A.length!==2)return P.error("Expected one argument.");for(var ae=An[q],be=[],Ee=1;Ee<A.length;Ee++){var Ne=P.parse(A[Ee],Ee,jt);if(!Ne)return null;be.push(Ne)}return new Tn(ae,be)},Tn.prototype.evaluate=function(A){if(this.type.kind==="boolean")return!!this.args[0].evaluate(A);if(this.type.kind==="color"){for(var P,q,ae=0,be=this.args;ae<be.length;ae+=1){if(q=null,(P=be[ae].evaluate(A))instanceof sn)return P;if(typeof P=="string"){var Ee=A.parseColor(P);if(Ee)return Ee}else if(Array.isArray(P)&&!(q=P.length<3||P.length>4?"Invalid rbga value "+JSON.stringify(P)+": expected an array containing either three or four numeric values.":Bn(P[0],P[1],P[2],P[3])))return new sn(P[0]/255,P[1]/255,P[2]/255,P[3])}throw new $n(q||"Could not parse color from value '"+(typeof P=="string"?P:String(JSON.stringify(P)))+"'")}if(this.type.kind==="number"){for(var Ne=null,Qe=0,ut=this.args;Qe<ut.length;Qe+=1){if((Ne=ut[Qe].evaluate(A))===null)return 0;var wt=Number(Ne);if(!isNaN(wt))return wt}throw new $n("Could not convert "+JSON.stringify(Ne)+" to number.")}return this.type.kind==="formatted"?zn.fromString(mr(this.args[0].evaluate(A))):this.type.kind==="resolvedImage"?Fn.fromString(mr(this.args[0].evaluate(A))):mr(this.args[0].evaluate(A))},Tn.prototype.eachChild=function(A){this.args.forEach(A)},Tn.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},Tn.prototype.serialize=function(){if(this.type.kind==="formatted")return new Gt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new hn(this.args[0]).serialize();var A=["to-"+this.type.kind];return this.eachChild(function(P){A.push(P.serialize())}),A};var Rn=["Unknown","Point","LineString","Polygon"],qn=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};qn.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},qn.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Rn[this.feature.type]:this.feature.type:null},qn.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},qn.prototype.canonicalID=function(){return this.canonical},qn.prototype.properties=function(){return this.feature&&this.feature.properties||{}},qn.prototype.parseColor=function(A){var P=this._parseColorCache[A];return P||(P=this._parseColorCache[A]=sn.parse(A)),P};var Un=function(A,P,q,ae){this.name=A,this.type=P,this._evaluate=q,this.args=ae};Un.prototype.evaluate=function(A){return this._evaluate(A,this.args)},Un.prototype.eachChild=function(A){this.args.forEach(A)},Un.prototype.outputDefined=function(){return!1},Un.prototype.serialize=function(){return[this.name].concat(this.args.map(function(A){return A.serialize()}))},Un.parse=function(A,P){var q,ae=A[0],be=Un.definitions[ae];if(!be)return P.error('Unknown expression "'+ae+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Ee=Array.isArray(be)?be[0]:be.type,Ne=Array.isArray(be)?[[be[1],be[2]]]:be.overloads,Qe=Ne.filter(function(Ur){var Or=Ur[0];return!Array.isArray(Or)||Or.length===A.length-1}),ut=null,wt=0,Lt=Qe;wt<Lt.length;wt+=1){var Bt=Lt[wt],Ht=Bt[0],Vt=Bt[1];ut=new ir(P.registry,P.path,null,P.scope);for(var an=[],yn=!1,On=1;On<A.length;On++){var Pn=A[On],Nn=Array.isArray(Ht)?Ht[On-1]:Ht.type,Vn=ut.parse(Pn,1+an.length,Nn);if(!Vn){yn=!0;break}an.push(Vn)}if(!yn)if(Array.isArray(Ht)&&Ht.length!==an.length)ut.error("Expected "+Ht.length+" arguments, but found "+an.length+" instead.");else{for(var Zn=0;Zn<an.length;Zn++){var Qn=Array.isArray(Ht)?Ht[Zn]:Ht.type,rr=an[Zn];ut.concat(Zn+1).checkSubtype(Qn,rr.type)}if(ut.errors.length===0)return new Un(ae,Ee,Vt,an)}}if(Qe.length===1)(q=P.errors).push.apply(q,ut.errors);else{for(var _r=(Qe.length?Qe:Ne).map(function(Ur){return Or=Ur[0],Array.isArray(Or)?"("+Or.map(nn).join(", ")+")":"("+nn(Or.type)+"...)";var Or}).join(" | "),dr=[],Mr=1;Mr<A.length;Mr++){var Cr=P.parse(A[Mr],1+dr.length);if(!Cr)return null;dr.push(nn(Cr.type))}P.error("Expected arguments of type "+_r+", but found ("+dr.join(", ")+") instead.")}return null},Un.register=function(A,P){for(var q in Un.definitions=P,P)A[q]=Un};var Yn=function(A,P,q){this.type=qt,this.locale=q,this.caseSensitive=A,this.diacriticSensitive=P};Yn.parse=function(A,P){if(A.length!==2)return P.error("Expected one argument.");var q=A[1];if(typeof q!="object"||Array.isArray(q))return P.error("Collator options argument must be an object.");var ae=P.parse(q["case-sensitive"]!==void 0&&q["case-sensitive"],1,Mt);if(!ae)return null;var be=P.parse(q["diacritic-sensitive"]!==void 0&&q["diacritic-sensitive"],1,Mt);if(!be)return null;var Ee=null;return q.locale&&!(Ee=P.parse(q.locale,1,vt))?null:new Yn(ae,be,Ee)},Yn.prototype.evaluate=function(A){return new En(this.caseSensitive.evaluate(A),this.diacriticSensitive.evaluate(A),this.locale?this.locale.evaluate(A):null)},Yn.prototype.eachChild=function(A){A(this.caseSensitive),A(this.diacriticSensitive),this.locale&&A(this.locale)},Yn.prototype.outputDefined=function(){return!1},Yn.prototype.serialize=function(){var A={};return A["case-sensitive"]=this.caseSensitive.serialize(),A["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(A.locale=this.locale.serialize()),["collator",A]};var or=8192;function Jt(A,P){A[0]=Math.min(A[0],P[0]),A[1]=Math.min(A[1],P[1]),A[2]=Math.max(A[2],P[0]),A[3]=Math.max(A[3],P[1])}function Mn(A,P){return!(A[0]<=P[0]||A[2]>=P[2]||A[1]<=P[1]||A[3]>=P[3])}function Rt(A,P){var q,ae=(180+A[0])/360,be=(q=A[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+q*Math.PI/360)))/360),Ee=Math.pow(2,P.z);return[Math.round(ae*Ee*or),Math.round(be*Ee*or)]}function Zt(A,P,q){return P[1]>A[1]!=q[1]>A[1]&&A[0]<(q[0]-P[0])*(A[1]-P[1])/(q[1]-P[1])+P[0]}function rn(A,P){for(var q=!1,ae=0,be=P.length;ae<be;ae++)for(var Ee=P[ae],Ne=0,Qe=Ee.length;Ne<Qe-1;Ne++){if(ut=A,wt=Ee[Ne],Lt=Ee[Ne+1],Bt=void 0,Ht=void 0,Vt=void 0,an=void 0,Bt=ut[0]-wt[0],Ht=ut[1]-wt[1],Vt=ut[0]-Lt[0],an=ut[1]-Lt[1],Bt*an-Vt*Ht==0&&Bt*Vt<=0&&Ht*an<=0)return!1;Zt(A,Ee[Ne],Ee[Ne+1])&&(q=!q)}var ut,wt,Lt,Bt,Ht,Vt,an;return q}function Ln(A,P){for(var q=0;q<P.length;q++)if(rn(A,P[q]))return!0;return!1}function Sn(A,P,q,ae){var be=A[0]-q[0],Ee=A[1]-q[1],Ne=P[0]-q[0],Qe=P[1]-q[1],ut=ae[0]-q[0],wt=ae[1]-q[1],Lt=be*wt-ut*Ee,Bt=Ne*wt-ut*Qe;return Lt>0&&Bt<0||Lt<0&&Bt>0}function wn(A,P,q){for(var ae=0,be=q;ae<be.length;ae+=1)for(var Ee=be[ae],Ne=0;Ne<Ee.length-1;++Ne)if(Qe=A,ut=P,wt=Ee[Ne],Lt=Ee[Ne+1],Bt=void 0,Ht=void 0,Vt=void 0,Vt=[ut[0]-Qe[0],ut[1]-Qe[1]],Bt=[Lt[0]-wt[0],Lt[1]-wt[1]],Ht=Vt,Bt[0]*Ht[1]-Bt[1]*Ht[0]!=0&&Sn(Qe,ut,wt,Lt)&&Sn(wt,Lt,Qe,ut))return!0;var Qe,ut,wt,Lt,Bt,Ht,Vt;return!1}function ln(A,P){for(var q=0;q<A.length;++q)if(!rn(A[q],P))return!1;for(var ae=0;ae<A.length-1;++ae)if(wn(A[ae],A[ae+1],P))return!1;return!0}function gn(A,P){for(var q=0;q<P.length;q++)if(ln(A,P[q]))return!0;return!1}function un(A,P,q){for(var ae=[],be=0;be<A.length;be++){for(var Ee=[],Ne=0;Ne<A[be].length;Ne++){var Qe=Rt(A[be][Ne],q);Jt(P,Qe),Ee.push(Qe)}ae.push(Ee)}return ae}function fn(A,P,q){for(var ae=[],be=0;be<A.length;be++){var Ee=un(A[be],P,q);ae.push(Ee)}return ae}function bn(A,P,q,ae){if(A[0]<q[0]||A[0]>q[2]){var be=.5*ae,Ee=A[0]-q[0]>be?-ae:q[0]-A[0]>be?ae:0;Ee===0&&(Ee=A[0]-q[2]>be?-ae:q[2]-A[0]>be?ae:0),A[0]+=Ee}Jt(P,A)}function In(A,P,q,ae){for(var be=Math.pow(2,ae.z)*or,Ee=[ae.x*or,ae.y*or],Ne=[],Qe=0,ut=A;Qe<ut.length;Qe+=1)for(var wt=0,Lt=ut[Qe];wt<Lt.length;wt+=1){var Bt=Lt[wt],Ht=[Bt.x+Ee[0],Bt.y+Ee[1]];bn(Ht,P,q,be),Ne.push(Ht)}return Ne}function Hn(A,P,q,ae){for(var be=Math.pow(2,ae.z)*or,Ee=[ae.x*or,ae.y*or],Ne=[],Qe=0,ut=A;Qe<ut.length;Qe+=1){for(var wt=[],Lt=0,Bt=ut[Qe];Lt<Bt.length;Lt+=1){var Ht=Bt[Lt],Vt=[Ht.x+Ee[0],Ht.y+Ee[1]];Jt(P,Vt),wt.push(Vt)}Ne.push(wt)}if(P[2]-P[0]<=be/2){(Nn=P)[0]=Nn[1]=1/0,Nn[2]=Nn[3]=-1/0;for(var an=0,yn=Ne;an<yn.length;an+=1)for(var On=0,Pn=yn[an];On<Pn.length;On+=1)bn(Pn[On],P,q,be)}var Nn;return Ne}var Wn=function(A,P){this.type=Mt,this.geojson=A,this.geometries=P};function Gn(A){if(A instanceof Un&&(A.name==="get"&&A.args.length===1||A.name==="feature-state"||A.name==="has"&&A.args.length===1||A.name==="properties"||A.name==="geometry-type"||A.name==="id"||/^filter-/.test(A.name))||A instanceof Wn)return!1;var P=!0;return A.eachChild(function(q){P&&!Gn(q)&&(P=!1)}),P}function nr(A){if(A instanceof Un&&A.name==="feature-state")return!1;var P=!0;return A.eachChild(function(q){P&&!nr(q)&&(P=!1)}),P}function tr(A,P){if(A instanceof Un&&P.indexOf(A.name)>=0)return!1;var q=!0;return A.eachChild(function(ae){q&&!tr(ae,P)&&(q=!1)}),q}Wn.parse=function(A,P){if(A.length!==2)return P.error("'within' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(er(A[1])){var q=A[1];if(q.type==="FeatureCollection")for(var ae=0;ae<q.features.length;++ae){var be=q.features[ae].geometry.type;if(be==="Polygon"||be==="MultiPolygon")return new Wn(q,q.features[ae].geometry)}else if(q.type==="Feature"){var Ee=q.geometry.type;if(Ee==="Polygon"||Ee==="MultiPolygon")return new Wn(q,q.geometry)}else if(q.type==="Polygon"||q.type==="MultiPolygon")return new Wn(q,q)}return P.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Wn.prototype.evaluate=function(A){if(A.geometry()!=null&&A.canonicalID()!=null){if(A.geometryType()==="Point")return function(P,q){var ae=[1/0,1/0,-1/0,-1/0],be=[1/0,1/0,-1/0,-1/0],Ee=P.canonicalID();if(q.type==="Polygon"){var Ne=un(q.coordinates,be,Ee),Qe=In(P.geometry(),ae,be,Ee);if(!Mn(ae,be))return!1;for(var ut=0,wt=Qe;ut<wt.length;ut+=1)if(!rn(wt[ut],Ne))return!1}if(q.type==="MultiPolygon"){var Lt=fn(q.coordinates,be,Ee),Bt=In(P.geometry(),ae,be,Ee);if(!Mn(ae,be))return!1;for(var Ht=0,Vt=Bt;Ht<Vt.length;Ht+=1)if(!Ln(Vt[Ht],Lt))return!1}return!0}(A,this.geometries);if(A.geometryType()==="LineString")return function(P,q){var ae=[1/0,1/0,-1/0,-1/0],be=[1/0,1/0,-1/0,-1/0],Ee=P.canonicalID();if(q.type==="Polygon"){var Ne=un(q.coordinates,be,Ee),Qe=Hn(P.geometry(),ae,be,Ee);if(!Mn(ae,be))return!1;for(var ut=0,wt=Qe;ut<wt.length;ut+=1)if(!ln(wt[ut],Ne))return!1}if(q.type==="MultiPolygon"){var Lt=fn(q.coordinates,be,Ee),Bt=Hn(P.geometry(),ae,be,Ee);if(!Mn(ae,be))return!1;for(var Ht=0,Vt=Bt;Ht<Vt.length;Ht+=1)if(!gn(Vt[Ht],Lt))return!1}return!0}(A,this.geometries)}return!1},Wn.prototype.eachChild=function(){},Wn.prototype.outputDefined=function(){return!0},Wn.prototype.serialize=function(){return["within",this.geojson]};var ar=function(A,P){this.type=P.type,this.name=A,this.boundExpression=P};ar.parse=function(A,P){if(A.length!==2||typeof A[1]!="string")return P.error("'var' expression requires exactly one string literal argument.");var q=A[1];return P.scope.has(q)?new ar(q,P.scope.get(q)):P.error('Unknown variable "'+q+'". Make sure "'+q+'" has been bound in an enclosing "let" expression before using it.',1)},ar.prototype.evaluate=function(A){return this.boundExpression.evaluate(A)},ar.prototype.eachChild=function(){},ar.prototype.outputDefined=function(){return!1},ar.prototype.serialize=function(){return["var",this.name]};var ir=function(A,P,q,ae,be){P===void 0&&(P=[]),ae===void 0&&(ae=new kt),be===void 0&&(be=[]),this.registry=A,this.path=P,this.key=P.map(function(Ee){return"["+Ee+"]"}).join(""),this.scope=ae,this.errors=be,this.expectedType=q};function cr(A){if(A instanceof ar)return cr(A.boundExpression);if(A instanceof Un&&A.name==="error"||A instanceof Yn||A instanceof Wn)return!1;var P=A instanceof Tn||A instanceof hr,q=!0;return A.eachChild(function(ae){q=P?q&&cr(ae):q&&ae instanceof ur}),!!q&&Gn(A)&&tr(A,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function br(A,P){for(var q,ae,be=A.length-1,Ee=0,Ne=be,Qe=0;Ee<=Ne;)if(q=A[Qe=Math.floor((Ee+Ne)/2)],ae=A[Qe+1],q<=P){if(Qe===be||P<ae)return Qe;Ee=Qe+1}else{if(!(q>P))throw new $n("Input is not a number.");Ne=Qe-1}return 0}ir.prototype.parse=function(A,P,q,ae,be){return be===void 0&&(be={}),P?this.concat(P,q,ae)._parse(A,be):this._parse(A,be)},ir.prototype._parse=function(A,P){function q(wt,Lt,Bt){return Bt==="assert"?new hr(Lt,[wt]):Bt==="coerce"?new Tn(Lt,[wt]):wt}if(A!==null&&typeof A!="string"&&typeof A!="boolean"&&typeof A!="number"||(A=["literal",A]),Array.isArray(A)){if(A.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ae=A[0];if(typeof ae!="string")return this.error("Expression name must be a string, but found "+typeof ae+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var be=this.registry[ae];if(be){var Ee=be.parse(A,this);if(!Ee)return null;if(this.expectedType){var Ne=this.expectedType,Qe=Ee.type;if(Ne.kind!=="string"&&Ne.kind!=="number"&&Ne.kind!=="boolean"&&Ne.kind!=="object"&&Ne.kind!=="array"||Qe.kind!=="value")if(Ne.kind!=="color"&&Ne.kind!=="formatted"&&Ne.kind!=="resolvedImage"||Qe.kind!=="value"&&Qe.kind!=="string"){if(this.checkSubtype(Ne,Qe))return null}else Ee=q(Ee,Ne,P.typeAnnotation||"coerce");else Ee=q(Ee,Ne,P.typeAnnotation||"assert")}if(!(Ee instanceof ur)&&Ee.type.kind!=="resolvedImage"&&cr(Ee)){var ut=new qn;try{Ee=new ur(Ee.type,Ee.evaluate(ut))}catch(wt){return this.error(wt.message),null}}return Ee}return this.error('Unknown expression "'+ae+'". If you wanted a literal array, use ["literal", [...]].',0)}return A===void 0?this.error("'undefined' value invalid. Use null instead."):typeof A=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof A+" instead.")},ir.prototype.concat=function(A,P,q){var ae=typeof A=="number"?this.path.concat(A):this.path,be=q?this.scope.concat(q):this.scope;return new ir(this.registry,ae,P||null,be,this.errors)},ir.prototype.error=function(A){for(var P=[],q=arguments.length-1;q-- >0;)P[q]=arguments[q+1];var ae=""+this.key+P.map(function(be){return"["+be+"]"}).join("");this.errors.push(new At(ae,A))},ir.prototype.checkSubtype=function(A,P){var q=jn(A,P);return q&&this.error(q),q};var xr=function(A,P,q){this.type=A,this.input=P,this.labels=[],this.outputs=[];for(var ae=0,be=q;ae<be.length;ae+=1){var Ee=be[ae],Ne=Ee[0],Qe=Ee[1];this.labels.push(Ne),this.outputs.push(Qe)}};function Tr(A,P,q){return A*(1-q)+P*q}xr.parse=function(A,P){if(A.length-1<4)return P.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return P.error("Expected an even number of arguments.");var q=P.parse(A[1],1,St);if(!q)return null;var ae=[],be=null;P.expectedType&&P.expectedType.kind!=="value"&&(be=P.expectedType);for(var Ee=1;Ee<A.length;Ee+=2){var Ne=Ee===1?-1/0:A[Ee],Qe=A[Ee+1],ut=Ee,wt=Ee+1;if(typeof Ne!="number")return P.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ut);if(ae.length&&ae[ae.length-1][0]>=Ne)return P.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ut);var Lt=P.parse(Qe,wt,be);if(!Lt)return null;be=be||Lt.type,ae.push([Ne,Lt])}return new xr(be,q,ae)},xr.prototype.evaluate=function(A){var P=this.labels,q=this.outputs;if(P.length===1)return q[0].evaluate(A);var ae=this.input.evaluate(A);if(ae<=P[0])return q[0].evaluate(A);var be=P.length;return ae>=P[be-1]?q[be-1].evaluate(A):q[br(P,ae)].evaluate(A)},xr.prototype.eachChild=function(A){A(this.input);for(var P=0,q=this.outputs;P<q.length;P+=1)A(q[P])},xr.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},xr.prototype.serialize=function(){for(var A=["step",this.input.serialize()],P=0;P<this.labels.length;P++)P>0&&A.push(this.labels[P]),A.push(this.outputs[P].serialize());return A};var sr=Object.freeze({__proto__:null,number:Tr,color:function(A,P,q){return new sn(Tr(A.r,P.r,q),Tr(A.g,P.g,q),Tr(A.b,P.b,q),Tr(A.a,P.a,q))},array:function(A,P,q){return A.map(function(ae,be){return Tr(ae,P[be],q)})}}),kr=.95047,Rr=1.08883,Qr=4/29,ci=6/29,pi=3*ci*ci,qi=Math.PI/180,Ei=180/Math.PI;function oi(A){return A>.008856451679035631?Math.pow(A,.3333333333333333):A/pi+Qr}function la(A){return A>ci?A*A*A:pi*(A-Qr)}function Aa(A){return 255*(A<=.0031308?12.92*A:1.055*Math.pow(A,.4166666666666667)-.055)}function no(A){return(A/=255)<=.04045?A/12.92:Math.pow((A+.055)/1.055,2.4)}function Go(A){var P=no(A.r),q=no(A.g),ae=no(A.b),be=oi((.4124564*P+.3575761*q+.1804375*ae)/kr),Ee=oi((.2126729*P+.7151522*q+.072175*ae)/1);return{l:116*Ee-16,a:500*(be-Ee),b:200*(Ee-oi((.0193339*P+.119192*q+.9503041*ae)/Rr)),alpha:A.a}}function il(A){var P=(A.l+16)/116,q=isNaN(A.a)?P:P+A.a/500,ae=isNaN(A.b)?P:P-A.b/200;return P=1*la(P),q=kr*la(q),ae=Rr*la(ae),new sn(Aa(3.2404542*q-1.5371385*P-.4985314*ae),Aa(-.969266*q+1.8760108*P+.041556*ae),Aa(.0556434*q-.2040259*P+1.0572252*ae),A.alpha)}function Us(A,P,q){var ae=P-A;return A+q*(ae>180||ae<-180?ae-360*Math.round(ae/360):ae)}var Zo={forward:Go,reverse:il,interpolate:function(A,P,q){return{l:Tr(A.l,P.l,q),a:Tr(A.a,P.a,q),b:Tr(A.b,P.b,q),alpha:Tr(A.alpha,P.alpha,q)}}},Ma={forward:function(A){var P=Go(A),q=P.l,ae=P.a,be=P.b,Ee=Math.atan2(be,ae)*Ei;return{h:Ee<0?Ee+360:Ee,c:Math.sqrt(ae*ae+be*be),l:q,alpha:A.a}},reverse:function(A){var P=A.h*qi,q=A.c;return il({l:A.l,a:Math.cos(P)*q,b:Math.sin(P)*q,alpha:A.alpha})},interpolate:function(A,P,q){return{h:Us(A.h,P.h,q),c:Tr(A.c,P.c,q),l:Tr(A.l,P.l,q),alpha:Tr(A.alpha,P.alpha,q)}}},Vs=Object.freeze({__proto__:null,lab:Zo,hcl:Ma}),Di=function(A,P,q,ae,be){this.type=A,this.operator=P,this.interpolation=q,this.input=ae,this.labels=[],this.outputs=[];for(var Ee=0,Ne=be;Ee<Ne.length;Ee+=1){var Qe=Ne[Ee],ut=Qe[0],wt=Qe[1];this.labels.push(ut),this.outputs.push(wt)}};function ss(A,P,q,ae){var be=ae-q,Ee=A-q;return be===0?0:P===1?Ee/be:(Math.pow(P,Ee)-1)/(Math.pow(P,be)-1)}Di.interpolationFactor=function(A,P,q,ae){var be=0;if(A.name==="exponential")be=ss(P,A.base,q,ae);else if(A.name==="linear")be=ss(P,1,q,ae);else if(A.name==="cubic-bezier"){var Ee=A.controlPoints;be=new d(Ee[0],Ee[1],Ee[2],Ee[3]).solve(ss(P,1,q,ae))}return be},Di.parse=function(A,P){var q=A[0],ae=A[1],be=A[2],Ee=A.slice(3);if(!Array.isArray(ae)||ae.length===0)return P.error("Expected an interpolation type expression.",1);if(ae[0]==="linear")ae={name:"linear"};else if(ae[0]==="exponential"){var Ne=ae[1];if(typeof Ne!="number")return P.error("Exponential interpolation requires a numeric base.",1,1);ae={name:"exponential",base:Ne}}else{if(ae[0]!=="cubic-bezier")return P.error("Unknown interpolation type "+String(ae[0]),1,0);var Qe=ae.slice(1);if(Qe.length!==4||Qe.some(function(On){return typeof On!="number"||On<0||On>1}))return P.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ae={name:"cubic-bezier",controlPoints:Qe}}if(A.length-1<4)return P.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return P.error("Expected an even number of arguments.");if(!(be=P.parse(be,2,St)))return null;var ut=[],wt=null;q==="interpolate-hcl"||q==="interpolate-lab"?wt=It:P.expectedType&&P.expectedType.kind!=="value"&&(wt=P.expectedType);for(var Lt=0;Lt<Ee.length;Lt+=2){var Bt=Ee[Lt],Ht=Ee[Lt+1],Vt=Lt+3,an=Lt+4;if(typeof Bt!="number")return P.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Vt);if(ut.length&&ut[ut.length-1][0]>=Bt)return P.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Vt);var yn=P.parse(Ht,an,wt);if(!yn)return null;wt=wt||yn.type,ut.push([Bt,yn])}return wt.kind==="number"||wt.kind==="color"||wt.kind==="array"&&wt.itemType.kind==="number"&&typeof wt.N=="number"?new Di(wt,q,ae,be,ut):P.error("Type "+nn(wt)+" is not interpolatable.")},Di.prototype.evaluate=function(A){var P=this.labels,q=this.outputs;if(P.length===1)return q[0].evaluate(A);var ae=this.input.evaluate(A);if(ae<=P[0])return q[0].evaluate(A);var be=P.length;if(ae>=P[be-1])return q[be-1].evaluate(A);var Ee=br(P,ae),Ne=P[Ee],Qe=P[Ee+1],ut=Di.interpolationFactor(this.interpolation,ae,Ne,Qe),wt=q[Ee].evaluate(A),Lt=q[Ee+1].evaluate(A);return this.operator==="interpolate"?sr[this.type.kind.toLowerCase()](wt,Lt,ut):this.operator==="interpolate-hcl"?Ma.reverse(Ma.interpolate(Ma.forward(wt),Ma.forward(Lt),ut)):Zo.reverse(Zo.interpolate(Zo.forward(wt),Zo.forward(Lt),ut))},Di.prototype.eachChild=function(A){A(this.input);for(var P=0,q=this.outputs;P<q.length;P+=1)A(q[P])},Di.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},Di.prototype.serialize=function(){var A;A=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var P=[this.operator,A,this.input.serialize()],q=0;q<this.labels.length;q++)P.push(this.labels[q],this.outputs[q].serialize());return P};var xa=function(A,P){this.type=A,this.args=P};xa.parse=function(A,P){if(A.length<2)return P.error("Expectected at least one argument.");var q=null,ae=P.expectedType;ae&&ae.kind!=="value"&&(q=ae);for(var be=[],Ee=0,Ne=A.slice(1);Ee<Ne.length;Ee+=1){var Qe=Ne[Ee],ut=P.parse(Qe,1+be.length,q,void 0,{typeAnnotation:"omit"});if(!ut)return null;q=q||ut.type,be.push(ut)}var wt=ae&&be.some(function(Lt){return jn(ae,Lt.type)});return new xa(wt?jt:q,be)},xa.prototype.evaluate=function(A){for(var P,q=null,ae=0,be=0,Ee=this.args;be<Ee.length&&(ae++,(q=Ee[be].evaluate(A))&&q instanceof Fn&&!q.available&&(P||(P=q.name),q=null,ae===this.args.length&&(q=P)),q===null);be+=1);return q},xa.prototype.eachChild=function(A){this.args.forEach(A)},xa.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},xa.prototype.serialize=function(){var A=["coalesce"];return this.eachChild(function(P){A.push(P.serialize())}),A};var Sa=function(A,P){this.type=P.type,this.bindings=[].concat(A),this.result=P};Sa.prototype.evaluate=function(A){return this.result.evaluate(A)},Sa.prototype.eachChild=function(A){for(var P=0,q=this.bindings;P<q.length;P+=1)A(q[P][1]);A(this.result)},Sa.parse=function(A,P){if(A.length<4)return P.error("Expected at least 3 arguments, but found "+(A.length-1)+" instead.");for(var q=[],ae=1;ae<A.length-1;ae+=2){var be=A[ae];if(typeof be!="string")return P.error("Expected string, but found "+typeof be+" instead.",ae);if(/[^a-zA-Z0-9_]/.test(be))return P.error("Variable names must contain only alphanumeric characters or '_'.",ae);var Ee=P.parse(A[ae+1],ae+1);if(!Ee)return null;q.push([be,Ee])}var Ne=P.parse(A[A.length-1],A.length-1,P.expectedType,q);return Ne?new Sa(q,Ne):null},Sa.prototype.outputDefined=function(){return this.result.outputDefined()},Sa.prototype.serialize=function(){for(var A=["let"],P=0,q=this.bindings;P<q.length;P+=1){var ae=q[P],be=ae[0],Ee=ae[1];A.push(be,Ee.serialize())}return A.push(this.result.serialize()),A};var mo=function(A,P,q){this.type=A,this.index=P,this.input=q};mo.parse=function(A,P){if(A.length!==3)return P.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var q=P.parse(A[1],1,St),ae=P.parse(A[2],2,pn(P.expectedType||jt));if(!q||!ae)return null;var be=ae.type;return new mo(be.itemType,q,ae)},mo.prototype.evaluate=function(A){var P=this.index.evaluate(A),q=this.input.evaluate(A);if(P<0)throw new $n("Array index out of bounds: "+P+" < 0.");if(P>=q.length)throw new $n("Array index out of bounds: "+P+" > "+(q.length-1)+".");if(P!==Math.floor(P))throw new $n("Array index must be an integer, but found "+P+" instead.");return q[P]},mo.prototype.eachChild=function(A){A(this.index),A(this.input)},mo.prototype.outputDefined=function(){return!1},mo.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ei=function(A,P){this.type=Mt,this.needle=A,this.haystack=P};ei.parse=function(A,P){if(A.length!==3)return P.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var q=P.parse(A[1],1,jt),ae=P.parse(A[2],2,jt);return q&&ae?mn(q.type,[Mt,vt,St,ht,jt])?new ei(q,ae):P.error("Expected first argument to be of type boolean, string, number or null, but found "+nn(q.type)+" instead"):null},ei.prototype.evaluate=function(A){var P=this.needle.evaluate(A),q=this.haystack.evaluate(A);if(!q)return!1;if(!en(P,["boolean","string","number","null"]))throw new $n("Expected first argument to be of type boolean, string, number or null, but found "+nn(Xn(P))+" instead.");if(!en(q,["string","array"]))throw new $n("Expected second argument to be of type array or string, but found "+nn(Xn(q))+" instead.");return q.indexOf(P)>=0},ei.prototype.eachChild=function(A){A(this.needle),A(this.haystack)},ei.prototype.outputDefined=function(){return!0},ei.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var yo=function(A,P,q){this.type=St,this.needle=A,this.haystack=P,this.fromIndex=q};yo.parse=function(A,P){if(A.length<=2||A.length>=5)return P.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var q=P.parse(A[1],1,jt),ae=P.parse(A[2],2,jt);if(!q||!ae)return null;if(!mn(q.type,[Mt,vt,St,ht,jt]))return P.error("Expected first argument to be of type boolean, string, number or null, but found "+nn(q.type)+" instead");if(A.length===4){var be=P.parse(A[3],3,St);return be?new yo(q,ae,be):null}return new yo(q,ae)},yo.prototype.evaluate=function(A){var P=this.needle.evaluate(A),q=this.haystack.evaluate(A);if(!en(P,["boolean","string","number","null"]))throw new $n("Expected first argument to be of type boolean, string, number or null, but found "+nn(Xn(P))+" instead.");if(!en(q,["string","array"]))throw new $n("Expected second argument to be of type array or string, but found "+nn(Xn(q))+" instead.");if(this.fromIndex){var ae=this.fromIndex.evaluate(A);return q.indexOf(P,ae)}return q.indexOf(P)},yo.prototype.eachChild=function(A){A(this.needle),A(this.haystack),this.fromIndex&&A(this.fromIndex)},yo.prototype.outputDefined=function(){return!1},yo.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var A=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),A]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Pa=function(A,P,q,ae,be,Ee){this.inputType=A,this.type=P,this.input=q,this.cases=ae,this.outputs=be,this.otherwise=Ee};Pa.parse=function(A,P){if(A.length<5)return P.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if(A.length%2!=1)return P.error("Expected an even number of arguments.");var q,ae;P.expectedType&&P.expectedType.kind!=="value"&&(ae=P.expectedType);for(var be={},Ee=[],Ne=2;Ne<A.length-1;Ne+=2){var Qe=A[Ne],ut=A[Ne+1];Array.isArray(Qe)||(Qe=[Qe]);var wt=P.concat(Ne);if(Qe.length===0)return wt.error("Expected at least one branch label.");for(var Lt=0,Bt=Qe;Lt<Bt.length;Lt+=1){var Ht=Bt[Lt];if(typeof Ht!="number"&&typeof Ht!="string")return wt.error("Branch labels must be numbers or strings.");if(typeof Ht=="number"&&Math.abs(Ht)>Number.MAX_SAFE_INTEGER)return wt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Ht=="number"&&Math.floor(Ht)!==Ht)return wt.error("Numeric branch labels must be integer values.");if(q){if(wt.checkSubtype(q,Xn(Ht)))return null}else q=Xn(Ht);if(be[String(Ht)]!==void 0)return wt.error("Branch labels must be unique.");be[String(Ht)]=Ee.length}var Vt=P.parse(ut,Ne,ae);if(!Vt)return null;ae=ae||Vt.type,Ee.push(Vt)}var an=P.parse(A[1],1,jt);if(!an)return null;var yn=P.parse(A[A.length-1],A.length-1,ae);return yn?an.type.kind!=="value"&&P.concat(1).checkSubtype(q,an.type)?null:new Pa(q,ae,an,be,Ee,yn):null},Pa.prototype.evaluate=function(A){var P=this.input.evaluate(A);return(Xn(P)===this.inputType&&this.outputs[this.cases[P]]||this.otherwise).evaluate(A)},Pa.prototype.eachChild=function(A){A(this.input),this.outputs.forEach(A),A(this.otherwise)},Pa.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})&&this.otherwise.outputDefined()},Pa.prototype.serialize=function(){for(var A=this,P=["match",this.input.serialize()],q=[],ae={},be=0,Ee=Object.keys(this.cases).sort();be<Ee.length;be+=1){var Ne=Ee[be];(Bt=ae[this.cases[Ne]])===void 0?(ae[this.cases[Ne]]=q.length,q.push([this.cases[Ne],[Ne]])):q[Bt][1].push(Ne)}for(var Qe=function(Vt){return A.inputType.kind==="number"?Number(Vt):Vt},ut=0,wt=q;ut<wt.length;ut+=1){var Lt=wt[ut],Bt=Lt[0],Ht=Lt[1];Ht.length===1?P.push(Qe(Ht[0])):P.push(Ht.map(Qe)),P.push(this.outputs[outputIndex$1].serialize())}return P.push(this.otherwise.serialize()),P};var Va=function(A,P,q){this.type=A,this.branches=P,this.otherwise=q};Va.parse=function(A,P){if(A.length<4)return P.error("Expected at least 3 arguments, but found only "+(A.length-1)+".");if(A.length%2!=0)return P.error("Expected an odd number of arguments.");var q;P.expectedType&&P.expectedType.kind!=="value"&&(q=P.expectedType);for(var ae=[],be=1;be<A.length-1;be+=2){var Ee=P.parse(A[be],be,Mt);if(!Ee)return null;var Ne=P.parse(A[be+1],be+1,q);if(!Ne)return null;ae.push([Ee,Ne]),q=q||Ne.type}var Qe=P.parse(A[A.length-1],A.length-1,q);return Qe?new Va(q,ae,Qe):null},Va.prototype.evaluate=function(A){for(var P=0,q=this.branches;P<q.length;P+=1){var ae=q[P],be=ae[0],Ee=ae[1];if(be.evaluate(A))return Ee.evaluate(A)}return this.otherwise.evaluate(A)},Va.prototype.eachChild=function(A){for(var P=0,q=this.branches;P<q.length;P+=1){var ae=q[P],be=ae[0],Ee=ae[1];A(be),A(Ee)}A(this.otherwise)},Va.prototype.outputDefined=function(){return this.branches.every(function(A){return A[0],A[1].outputDefined()})&&this.otherwise.outputDefined()},Va.prototype.serialize=function(){var A=["case"];return this.eachChild(function(P){A.push(P.serialize())}),A};var Xa=function(A,P,q,ae){this.type=A,this.input=P,this.beginIndex=q,this.endIndex=ae};function ls(A,P){return A==="=="||A==="!="?P.kind==="boolean"||P.kind==="string"||P.kind==="number"||P.kind==="null"||P.kind==="value":P.kind==="string"||P.kind==="number"||P.kind==="value"}function al(A,P,q,ae){return ae.compare(P,q)===0}function ro(A,P,q){var ae=A!=="=="&&A!=="!=";return function(){function be(Ee,Ne,Qe){this.type=Mt,this.lhs=Ee,this.rhs=Ne,this.collator=Qe,this.hasUntypedArgument=Ee.type.kind==="value"||Ne.type.kind==="value"}return be.parse=function(Ee,Ne){if(Ee.length!==3&&Ee.length!==4)return Ne.error("Expected two or three arguments.");var Qe=Ee[0],ut=Ne.parse(Ee[1],1,jt);if(!ut)return null;if(!ls(Qe,ut.type))return Ne.concat(1).error('"'+Qe+`" comparisons are not supported for type '`+nn(ut.type)+"'.");var wt=Ne.parse(Ee[2],2,jt);if(!wt)return null;if(!ls(Qe,wt.type))return Ne.concat(2).error('"'+Qe+`" comparisons are not supported for type '`+nn(wt.type)+"'.");if(ut.type.kind!==wt.type.kind&&ut.type.kind!=="value"&&wt.type.kind!=="value")return Ne.error("Cannot compare types '"+nn(ut.type)+"' and '"+nn(wt.type)+"'.");ae&&(ut.type.kind==="value"&&wt.type.kind!=="value"?ut=new hr(wt.type,[ut]):ut.type.kind!=="value"&&wt.type.kind==="value"&&(wt=new hr(ut.type,[wt])));var Lt=null;if(Ee.length===4){if(ut.type.kind!=="string"&&wt.type.kind!=="string"&&ut.type.kind!=="value"&&wt.type.kind!=="value")return Ne.error("Cannot use collator to compare non-string types.");if(!(Lt=Ne.parse(Ee[3],3,qt)))return null}return new be(ut,wt,Lt)},be.prototype.evaluate=function(Ee){var Ne=this.lhs.evaluate(Ee),Qe=this.rhs.evaluate(Ee);if(ae&&this.hasUntypedArgument){var ut=Xn(Ne),wt=Xn(Qe);if(ut.kind!==wt.kind||ut.kind!=="string"&&ut.kind!=="number")throw new $n('Expected arguments for "'+A+'" to be (string, string) or (number, number), but found ('+ut.kind+", "+wt.kind+") instead.")}if(this.collator&&!ae&&this.hasUntypedArgument){var Lt=Xn(Ne),Bt=Xn(Qe);if(Lt.kind!=="string"||Bt.kind!=="string")return P(Ee,Ne,Qe)}return this.collator?q(Ee,Ne,Qe,this.collator.evaluate(Ee)):P(Ee,Ne,Qe)},be.prototype.eachChild=function(Ee){Ee(this.lhs),Ee(this.rhs),this.collator&&Ee(this.collator)},be.prototype.outputDefined=function(){return!0},be.prototype.serialize=function(){var Ee=[A];return this.eachChild(function(Ne){Ee.push(Ne.serialize())}),Ee},be}()}Xa.parse=function(A,P){if(A.length<=2||A.length>=5)return P.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var q=P.parse(A[1],1,jt),ae=P.parse(A[2],2,St);if(!q||!ae)return null;if(!mn(q.type,[pn(jt),vt,jt]))return P.error("Expected first argument to be of type array or string, but found "+nn(q.type)+" instead");if(A.length===4){var be=P.parse(A[3],3,St);return be?new Xa(q.type,q,ae,be):null}return new Xa(q.type,q,ae)},Xa.prototype.evaluate=function(A){var P=this.input.evaluate(A),q=this.beginIndex.evaluate(A);if(!en(P,["string","array"]))throw new $n("Expected first argument to be of type array or string, but found "+nn(Xn(P))+" instead.");if(this.endIndex){var ae=this.endIndex.evaluate(A);return P.slice(q,ae)}return P.slice(q)},Xa.prototype.eachChild=function(A){A(this.input),A(this.beginIndex),this.endIndex&&A(this.endIndex)},Xa.prototype.outputDefined=function(){return!1},Xa.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var A=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),A]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var ol=ro("==",function(A,P,q){return P===q},al),sl=ro("!=",function(A,P,q){return P!==q},function(A,P,q,ae){return!al(0,P,q,ae)}),vl=ro("<",function(A,P,q){return P<q},function(A,P,q,ae){return ae.compare(P,q)<0}),Hs=ro(">",function(A,P,q){return P>q},function(A,P,q,ae){return ae.compare(P,q)>0}),ll=ro("<=",function(A,P,q){return P<=q},function(A,P,q,ae){return ae.compare(P,q)<=0}),qs=ro(">=",function(A,P,q){return P>=q},function(A,P,q,ae){return ae.compare(P,q)>=0}),io=function(A,P,q,ae,be){this.type=vt,this.number=A,this.locale=P,this.currency=q,this.minFractionDigits=ae,this.maxFractionDigits=be};io.parse=function(A,P){if(A.length!==3)return P.error("Expected two arguments.");var q=P.parse(A[1],1,St);if(!q)return null;var ae=A[2];if(typeof ae!="object"||Array.isArray(ae))return P.error("NumberFormat options argument must be an object.");var be=null;if(ae.locale&&!(be=P.parse(ae.locale,1,vt)))return null;var Ee=null;if(ae.currency&&!(Ee=P.parse(ae.currency,1,vt)))return null;var Ne=null;if(ae["min-fraction-digits"]&&!(Ne=P.parse(ae["min-fraction-digits"],1,St)))return null;var Qe=null;return ae["max-fraction-digits"]&&!(Qe=P.parse(ae["max-fraction-digits"],1,St))?null:new io(q,be,Ee,Ne,Qe)},io.prototype.evaluate=function(A){return new Intl.NumberFormat(this.locale?this.locale.evaluate(A):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(A):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(A):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(A):void 0}).format(this.number.evaluate(A))},io.prototype.eachChild=function(A){A(this.number),this.locale&&A(this.locale),this.currency&&A(this.currency),this.minFractionDigits&&A(this.minFractionDigits),this.maxFractionDigits&&A(this.maxFractionDigits)},io.prototype.outputDefined=function(){return!1},io.prototype.serialize=function(){var A={};return this.locale&&(A.locale=this.locale.serialize()),this.currency&&(A.currency=this.currency.serialize()),this.minFractionDigits&&(A["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(A["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),A]};var ao=function(A){this.type=St,this.input=A};ao.parse=function(A,P){if(A.length!==2)return P.error("Expected 1 argument, but found "+(A.length-1)+" instead.");var q=P.parse(A[1],1);return q?q.type.kind!=="array"&&q.type.kind!=="string"&&q.type.kind!=="value"?P.error("Expected argument of type string or array, but found "+nn(q.type)+" instead."):new ao(q):null},ao.prototype.evaluate=function(A){var P=this.input.evaluate(A);if(typeof P=="string"||Array.isArray(P))return P.length;throw new $n("Expected value to be of type string or array, but found "+nn(Xn(P))+" instead.")},ao.prototype.eachChild=function(A){A(this.input)},ao.prototype.outputDefined=function(){return!1},ao.prototype.serialize=function(){var A=["length"];return this.eachChild(function(P){A.push(P.serialize())}),A};var Yo={"==":ol,"!=":sl,">":Hs,"<":vl,">=":qs,"<=":ll,array:hr,at:mo,boolean:hr,case:Va,coalesce:xa,collator:Yn,format:Gt,image:hn,in:ei,"index-of":yo,interpolate:Di,"interpolate-hcl":Di,"interpolate-lab":Di,length:ao,let:Sa,literal:ur,match:Pa,number:hr,"number-format":io,object:hr,slice:Xa,step:xr,string:hr,"to-boolean":Tn,"to-color":Tn,"to-number":Tn,"to-string":Tn,var:ar,within:Wn};function oo(A,P){var q=P[0],ae=P[1],be=P[2],Ee=P[3];q=q.evaluate(A),ae=ae.evaluate(A),be=be.evaluate(A);var Ne=Ee?Ee.evaluate(A):1,Qe=Bn(q,ae,be,Ne);if(Qe)throw new $n(Qe);return new sn(q/255*Ne,ae/255*Ne,be/255*Ne,Ne)}function Gs(A,P){return A in P}function Zs(A,P){var q=P[A];return q===void 0?null:q}function Po(A){return{type:A}}function Ms(A){return{result:"success",value:A}}function xo(A){return{result:"error",value:A}}function Wo(A){return A["property-type"]==="data-driven"||A["property-type"]==="cross-faded-data-driven"}function Oo(A){return!!A.expression&&A.expression.parameters.indexOf("zoom")>-1}function so(A){return!!A.expression&&A.expression.interpolated}function ti(A){return A instanceof Number?"number":A instanceof String?"string":A instanceof Boolean?"boolean":Array.isArray(A)?"array":A===null?"null":typeof A}function bo(A){return typeof A=="object"&&A!==null&&!Array.isArray(A)}function ml(A){return A}function Ss(A,P){var q,ae,be,Ee=P.type==="color",Ne=A.stops&&typeof A.stops[0][0]=="object",Qe=Ne||A.property!==void 0,ut=Ne||!Qe,wt=A.type||(so(P)?"exponential":"interval");if(Ee&&((A=it({},A)).stops&&(A.stops=A.stops.map(function(dr){return[dr[0],sn.parse(dr[1])]})),A.default?A.default=sn.parse(A.default):A.default=sn.parse(P.default)),A.colorSpace&&A.colorSpace!=="rgb"&&!Vs[A.colorSpace])throw new Error("Unknown color space: "+A.colorSpace);if(wt==="exponential")q=Oa;else if(wt==="interval")q=Xo;else if(wt==="categorical"){q=Io,ae=Object.create(null);for(var Lt=0,Bt=A.stops;Lt<Bt.length;Lt+=1){var Ht=Bt[Lt];ae[Ht[0]]=Ht[1]}be=typeof A.stops[0][0]}else{if(wt!=="identity")throw new Error('Unknown function type "'+wt+'"');q=Ys}if(Ne){for(var Vt={},an=[],yn=0;yn<A.stops.length;yn++){var On=A.stops[yn],Pn=On[0].zoom;Vt[Pn]===void 0&&(Vt[Pn]={zoom:Pn,type:A.type,property:A.property,default:A.default,stops:[]},an.push(Pn)),Vt[Pn].stops.push([On[0].value,On[1]])}for(var Nn=[],Vn=0,Zn=an;Vn<Zn.length;Vn+=1){var Qn=Zn[Vn];Nn.push([Vt[Qn].zoom,Ss(Vt[Qn],P)])}var rr={name:"linear"};return{kind:"composite",interpolationType:rr,interpolationFactor:Di.interpolationFactor.bind(void 0,rr),zoomStops:Nn.map(function(dr){return dr[0]}),evaluate:function(dr,Mr){var Cr=dr.zoom;return Oa({stops:Nn,base:A.base},P,Cr).evaluate(Cr,Mr)}}}if(ut){var _r=wt==="exponential"?{name:"exponential",base:A.base!==void 0?A.base:1}:null;return{kind:"camera",interpolationType:_r,interpolationFactor:Di.interpolationFactor.bind(void 0,_r),zoomStops:A.stops.map(function(dr){return dr[0]}),evaluate:function(dr){var Mr=dr.zoom;return q(A,P,Mr,ae,be)}}}return{kind:"source",evaluate:function(dr,Mr){var Cr=Mr&&Mr.properties?Mr.properties[A.property]:void 0;return Cr===void 0?us(A.default,P.default):q(A,P,Cr,ae,be)}}}function us(A,P,q){return A!==void 0?A:P!==void 0?P:q!==void 0?q:void 0}function Io(A,P,q,ae,be){return us(typeof q===be?ae[q]:void 0,A.default,P.default)}function Xo(A,P,q){if(ti(q)!=="number")return us(A.default,P.default);var ae=A.stops.length;if(ae===1||q<=A.stops[0][0])return A.stops[0][1];if(q>=A.stops[ae-1][0])return A.stops[ae-1][1];var be=br(A.stops.map(function(Ee){return Ee[0]}),q);return A.stops[be][1]}function Oa(A,P,q){var ae=A.base!==void 0?A.base:1;if(ti(q)!=="number")return us(A.default,P.default);var be=A.stops.length;if(be===1||q<=A.stops[0][0])return A.stops[0][1];if(q>=A.stops[be-1][0])return A.stops[be-1][1];var Ee=br(A.stops.map(function(Bt){return Bt[0]}),q),Ne=function(Bt,Ht,Vt,an){var yn=an-Vt,On=Bt-Vt;return yn===0?0:Ht===1?On/yn:(Math.pow(Ht,On)-1)/(Math.pow(Ht,yn)-1)}(q,ae,A.stops[Ee][0],A.stops[Ee+1][0]),Qe=A.stops[Ee][1],ut=A.stops[Ee+1][1],wt=sr[P.type]||ml;if(A.colorSpace&&A.colorSpace!=="rgb"){var Lt=Vs[A.colorSpace];wt=function(Bt,Ht){return Lt.reverse(Lt.interpolate(Lt.forward(Bt),Lt.forward(Ht),Ne))}}return typeof Qe.evaluate=="function"?{evaluate:function(){for(var Bt=[],Ht=arguments.length;Ht--;)Bt[Ht]=arguments[Ht];var Vt=Qe.evaluate.apply(void 0,Bt),an=ut.evaluate.apply(void 0,Bt);if(Vt!==void 0&&an!==void 0)return wt(Vt,an,Ne)}}:wt(Qe,ut,Ne)}function Ys(A,P,q){return P.type==="color"?q=sn.parse(q):P.type==="formatted"?q=zn.fromString(q.toString()):P.type==="resolvedImage"?q=Fn.fromString(q.toString()):ti(q)===P.type||P.type==="enum"&&P.values[q]||(q=void 0),us(q,A.default,P.default)}Un.register(Yo,{error:[{kind:"error"},[vt],function(A,P){var q=P[0];throw new $n(q.evaluate(A))}],typeof:[vt,[jt],function(A,P){return nn(Xn(P[0].evaluate(A)))}],"to-rgba":[pn(St,4),[It],function(A,P){return P[0].evaluate(A).toArray()}],rgb:[It,[St,St,St],oo],rgba:[It,[St,St,St,St],oo],has:{type:Mt,overloads:[[[vt],function(A,P){return Gs(P[0].evaluate(A),A.properties())}],[[vt,Ut],function(A,P){var q=P[0],ae=P[1];return Gs(q.evaluate(A),ae.evaluate(A))}]]},get:{type:jt,overloads:[[[vt],function(A,P){return Zs(P[0].evaluate(A),A.properties())}],[[vt,Ut],function(A,P){var q=P[0],ae=P[1];return Zs(q.evaluate(A),ae.evaluate(A))}]]},"feature-state":[jt,[vt],function(A,P){return Zs(P[0].evaluate(A),A.featureState||{})}],properties:[Ut,[],function(A){return A.properties()}],"geometry-type":[vt,[],function(A){return A.geometryType()}],id:[jt,[],function(A){return A.id()}],zoom:[St,[],function(A){return A.globals.zoom}],"heatmap-density":[St,[],function(A){return A.globals.heatmapDensity||0}],"line-progress":[St,[],function(A){return A.globals.lineProgress||0}],accumulated:[jt,[],function(A){return A.globals.accumulated===void 0?null:A.globals.accumulated}],"+":[St,Po(St),function(A,P){for(var q=0,ae=0,be=P;ae<be.length;ae+=1)q+=be[ae].evaluate(A);return q}],"*":[St,Po(St),function(A,P){for(var q=1,ae=0,be=P;ae<be.length;ae+=1)q*=be[ae].evaluate(A);return q}],"-":{type:St,overloads:[[[St,St],function(A,P){var q=P[0],ae=P[1];return q.evaluate(A)-ae.evaluate(A)}],[[St],function(A,P){return-P[0].evaluate(A)}]]},"/":[St,[St,St],function(A,P){var q=P[0],ae=P[1];return q.evaluate(A)/ae.evaluate(A)}],"%":[St,[St,St],function(A,P){var q=P[0],ae=P[1];return q.evaluate(A)%ae.evaluate(A)}],ln2:[St,[],function(){return Math.LN2}],pi:[St,[],function(){return Math.PI}],e:[St,[],function(){return Math.E}],"^":[St,[St,St],function(A,P){var q=P[0],ae=P[1];return Math.pow(q.evaluate(A),ae.evaluate(A))}],sqrt:[St,[St],function(A,P){var q=P[0];return Math.sqrt(q.evaluate(A))}],log10:[St,[St],function(A,P){var q=P[0];return Math.log(q.evaluate(A))/Math.LN10}],ln:[St,[St],function(A,P){var q=P[0];return Math.log(q.evaluate(A))}],log2:[St,[St],function(A,P){var q=P[0];return Math.log(q.evaluate(A))/Math.LN2}],sin:[St,[St],function(A,P){var q=P[0];return Math.sin(q.evaluate(A))}],cos:[St,[St],function(A,P){var q=P[0];return Math.cos(q.evaluate(A))}],tan:[St,[St],function(A,P){var q=P[0];return Math.tan(q.evaluate(A))}],asin:[St,[St],function(A,P){var q=P[0];return Math.asin(q.evaluate(A))}],acos:[St,[St],function(A,P){var q=P[0];return Math.acos(q.evaluate(A))}],atan:[St,[St],function(A,P){var q=P[0];return Math.atan(q.evaluate(A))}],min:[St,Po(St),function(A,P){return Math.min.apply(Math,P.map(function(q){return q.evaluate(A)}))}],max:[St,Po(St),function(A,P){return Math.max.apply(Math,P.map(function(q){return q.evaluate(A)}))}],abs:[St,[St],function(A,P){var q=P[0];return Math.abs(q.evaluate(A))}],round:[St,[St],function(A,P){var q=P[0].evaluate(A);return q<0?-Math.round(-q):Math.round(q)}],floor:[St,[St],function(A,P){var q=P[0];return Math.floor(q.evaluate(A))}],ceil:[St,[St],function(A,P){var q=P[0];return Math.ceil(q.evaluate(A))}],"filter-==":[Mt,[vt,jt],function(A,P){var q=P[0],ae=P[1];return A.properties()[q.value]===ae.value}],"filter-id-==":[Mt,[jt],function(A,P){var q=P[0];return A.id()===q.value}],"filter-type-==":[Mt,[vt],function(A,P){var q=P[0];return A.geometryType()===q.value}],"filter-<":[Mt,[vt,jt],function(A,P){var q=P[0],ae=P[1],be=A.properties()[q.value],Ee=ae.value;return typeof be==typeof Ee&&be<Ee}],"filter-id-<":[Mt,[jt],function(A,P){var q=P[0],ae=A.id(),be=q.value;return typeof ae==typeof be&&ae<be}],"filter->":[Mt,[vt,jt],function(A,P){var q=P[0],ae=P[1],be=A.properties()[q.value],Ee=ae.value;return typeof be==typeof Ee&&be>Ee}],"filter-id->":[Mt,[jt],function(A,P){var q=P[0],ae=A.id(),be=q.value;return typeof ae==typeof be&&ae>be}],"filter-<=":[Mt,[vt,jt],function(A,P){var q=P[0],ae=P[1],be=A.properties()[q.value],Ee=ae.value;return typeof be==typeof Ee&&be<=Ee}],"filter-id-<=":[Mt,[jt],function(A,P){var q=P[0],ae=A.id(),be=q.value;return typeof ae==typeof be&&ae<=be}],"filter->=":[Mt,[vt,jt],function(A,P){var q=P[0],ae=P[1],be=A.properties()[q.value],Ee=ae.value;return typeof be==typeof Ee&&be>=Ee}],"filter-id->=":[Mt,[jt],function(A,P){var q=P[0],ae=A.id(),be=q.value;return typeof ae==typeof be&&ae>=be}],"filter-has":[Mt,[jt],function(A,P){return P[0].value in A.properties()}],"filter-has-id":[Mt,[],function(A){return A.id()!==null&&A.id()!==void 0}],"filter-type-in":[Mt,[pn(vt)],function(A,P){return P[0].value.indexOf(A.geometryType())>=0}],"filter-id-in":[Mt,[pn(jt)],function(A,P){return P[0].value.indexOf(A.id())>=0}],"filter-in-small":[Mt,[vt,pn(jt)],function(A,P){var q=P[0];return P[1].value.indexOf(A.properties()[q.value])>=0}],"filter-in-large":[Mt,[vt,pn(jt)],function(A,P){var q=P[0],ae=P[1];return function(be,Ee,Ne,Qe){for(;Ne<=Qe;){var ut=Ne+Qe>>1;if(Ee[ut]===be)return!0;Ee[ut]>be?Qe=ut-1:Ne=ut+1}return!1}(A.properties()[q.value],ae.value,0,ae.value.length-1)}],all:{type:Mt,overloads:[[[Mt,Mt],function(A,P){var q=P[0],ae=P[1];return q.evaluate(A)&&ae.evaluate(A)}],[Po(Mt),function(A,P){for(var q=0,ae=P;q<ae.length;q+=1)if(!ae[q].evaluate(A))return!1;return!0}]]},any:{type:Mt,overloads:[[[Mt,Mt],function(A,P){var q=P[0],ae=P[1];return q.evaluate(A)||ae.evaluate(A)}],[Po(Mt),function(A,P){for(var q=0,ae=P;q<ae.length;q+=1)if(ae[q].evaluate(A))return!0;return!1}]]},"!":[Mt,[Mt],function(A,P){return!P[0].evaluate(A)}],"is-supported-script":[Mt,[vt],function(A,P){var q=P[0],ae=A.globals&&A.globals.isSupportedScript;return!ae||ae(q.evaluate(A))}],upcase:[vt,[vt],function(A,P){return P[0].evaluate(A).toUpperCase()}],downcase:[vt,[vt],function(A,P){return P[0].evaluate(A).toLowerCase()}],concat:[vt,Po(jt),function(A,P){return P.map(function(q){return mr(q.evaluate(A))}).join("")}],"resolved-locale":[vt,[qt],function(A,P){return P[0].evaluate(A).resolvedLocale()}]});var cs=function(A,P){this.expression=A,this._warningHistory={},this._evaluator=new qn,this._defaultValue=P?function(q){return q.type==="color"&&bo(q.default)?new sn(0,0,0,0):q.type==="color"?sn.parse(q.default)||null:q.default===void 0?null:q.default}(P):null,this._enumValues=P&&P.type==="enum"?P.values:null};function Jo(A){return Array.isArray(A)&&A.length>0&&typeof A[0]=="string"&&A[0]in Yo}function fs(A,P){var q=new ir(Yo,[],P?function(be){var Ee={color:It,string:vt,number:St,enum:vt,boolean:Mt,formatted:Yt,resolvedImage:Kt};return be.type==="array"?pn(Ee[be.value]||jt,be.length):Ee[be.type]}(P):void 0),ae=q.parse(A,void 0,void 0,void 0,P&&P.type==="string"?{typeAnnotation:"coerce"}:void 0);return ae?Ms(new cs(ae,P)):xo(q.errors)}cs.prototype.evaluateWithoutErrorHandling=function(A,P,q,ae,be,Ee){return this._evaluator.globals=A,this._evaluator.feature=P,this._evaluator.featureState=q,this._evaluator.canonical=ae,this._evaluator.availableImages=be||null,this._evaluator.formattedSection=Ee,this.expression.evaluate(this._evaluator)},cs.prototype.evaluate=function(A,P,q,ae,be,Ee){this._evaluator.globals=A,this._evaluator.feature=P||null,this._evaluator.featureState=q||null,this._evaluator.canonical=ae,this._evaluator.availableImages=be||null,this._evaluator.formattedSection=Ee||null;try{var Ne=this.expression.evaluate(this._evaluator);if(Ne==null||typeof Ne=="number"&&Ne!=Ne)return this._defaultValue;if(this._enumValues&&!(Ne in this._enumValues))throw new $n("Expected value to be one of "+Object.keys(this._enumValues).map(function(Qe){return JSON.stringify(Qe)}).join(", ")+", but found "+JSON.stringify(Ne)+" instead.");return Ne}catch(Qe){return this._warningHistory[Qe.message]||(this._warningHistory[Qe.message]=!0,typeof console<"u"&&console.warn(Qe.message)),this._defaultValue}};var zo=function(A,P){this.kind=A,this._styleExpression=P,this.isStateDependent=A!=="constant"&&!nr(P.expression)};zo.prototype.evaluateWithoutErrorHandling=function(A,P,q,ae,be,Ee){return this._styleExpression.evaluateWithoutErrorHandling(A,P,q,ae,be,Ee)},zo.prototype.evaluate=function(A,P,q,ae,be,Ee){return this._styleExpression.evaluate(A,P,q,ae,be,Ee)};var Ro=function(A,P,q,ae){this.kind=A,this.zoomStops=q,this._styleExpression=P,this.isStateDependent=A!=="camera"&&!nr(P.expression),this.interpolationType=ae};function Ko(A,P){if((A=fs(A,P)).result==="error")return A;var q=A.value.expression,ae=Gn(q);if(!ae&&!Wo(P))return xo([new At("","data expressions not supported")]);var be=tr(q,["zoom"]);if(!be&&!Oo(P))return xo([new At("","zoom expressions not supported")]);var Ee=ps(q);if(!Ee&&!be)return xo([new At("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(Ee instanceof At)return xo([Ee]);if(Ee instanceof Di&&!so(P))return xo([new At("",'"interpolate" expressions cannot be used with this property')]);if(!Ee)return Ms(new zo(ae?"constant":"source",A.value));var Ne=Ee instanceof Di?Ee.interpolation:void 0;return Ms(new Ro(ae?"camera":"composite",A.value,Ee.labels,Ne))}Ro.prototype.evaluateWithoutErrorHandling=function(A,P,q,ae,be,Ee){return this._styleExpression.evaluateWithoutErrorHandling(A,P,q,ae,be,Ee)},Ro.prototype.evaluate=function(A,P,q,ae,be,Ee){return this._styleExpression.evaluate(A,P,q,ae,be,Ee)},Ro.prototype.interpolationFactor=function(A,P,q){return this.interpolationType?Di.interpolationFactor(this.interpolationType,A,P,q):0};var hs=function(A,P){this._parameters=A,this._specification=P,it(this,Ss(this._parameters,this._specification))};function ps(A){var P=null;if(A instanceof Sa)P=ps(A.result);else if(A instanceof xa)for(var q=0,ae=A.args;q<ae.length;q+=1){var be=ae[q];if(P=ps(be))break}else(A instanceof xr||A instanceof Di)&&A.input instanceof Un&&A.input.name==="zoom"&&(P=A);return P instanceof At||A.eachChild(function(Ee){var Ne=ps(Ee);Ne instanceof At?P=Ne:!P&&Ne?P=new At("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):P&&Ne&&P!==Ne&&(P=new At("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),P}function Ia(A){var P=A.key,q=A.value,ae=A.valueSpec||{},be=A.objectElementValidators||{},Ee=A.style,Ne=A.styleSpec,Qe=[],ut=ti(q);if(ut!=="object")return[new Ie(P,q,"object expected, "+ut+" found")];for(var wt in q){var Lt=wt.split(".")[0],Bt=ae[Lt]||ae["*"],Ht=void 0;if(be[Lt])Ht=be[Lt];else if(ae[Lt])Ht=xi;else if(be["*"])Ht=be["*"];else{if(!ae["*"]){Qe.push(new Ie(P,q[wt],'unknown property "'+wt+'"'));continue}Ht=xi}Qe=Qe.concat(Ht({key:(P&&P+".")+wt,value:q[wt],valueSpec:Bt,style:Ee,styleSpec:Ne,object:q,objectKey:wt},q))}for(var Vt in ae)be[Vt]||ae[Vt].required&&ae[Vt].default===void 0&&q[Vt]===void 0&&Qe.push(new Ie(P,q,'missing required property "'+Vt+'"'));return Qe}function ds(A){var P=A.value,q=A.valueSpec,ae=A.style,be=A.styleSpec,Ee=A.key,Ne=A.arrayElementValidator||xi;if(ti(P)!=="array")return[new Ie(Ee,P,"array expected, "+ti(P)+" found")];if(q.length&&P.length!==q.length)return[new Ie(Ee,P,"array length "+q.length+" expected, length "+P.length+" found")];if(q["min-length"]&&P.length<q["min-length"])return[new Ie(Ee,P,"array length at least "+q["min-length"]+" expected, length "+P.length+" found")];var Qe={type:q.value,values:q.values};be.$version<7&&(Qe.function=q.function),ti(q.value)==="object"&&(Qe=q.value);for(var ut=[],wt=0;wt<P.length;wt++)ut=ut.concat(Ne({array:P,arrayIndex:wt,value:P[wt],valueSpec:Qe,style:ae,styleSpec:be,key:Ee+"["+wt+"]"}));return ut}function gs(A){var P=A.key,q=A.value,ae=A.valueSpec,be=ti(q);return be==="number"&&q!=q&&(be="NaN"),be!=="number"?[new Ie(P,q,"number expected, "+be+" found")]:"minimum"in ae&&q<ae.minimum?[new Ie(P,q,q+" is less than the minimum value "+ae.minimum)]:"maximum"in ae&&q>ae.maximum?[new Ie(P,q,q+" is greater than the maximum value "+ae.maximum)]:[]}function Ws(A){var P,q,ae,be=A.valueSpec,Ee=lt(A.value.type),Ne={},Qe=Ee!=="categorical"&&A.value.property===void 0,ut=!Qe,wt=ti(A.value.stops)==="array"&&ti(A.value.stops[0])==="array"&&ti(A.value.stops[0][0])==="object",Lt=Ia({key:A.key,value:A.value,valueSpec:A.styleSpec.function,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{stops:function(Vt){if(Ee==="identity")return[new Ie(Vt.key,Vt.value,'identity function may not have a "stops" property')];var an=[],yn=Vt.value;return an=an.concat(ds({key:Vt.key,value:yn,valueSpec:Vt.valueSpec,style:Vt.style,styleSpec:Vt.styleSpec,arrayElementValidator:Bt})),ti(yn)==="array"&&yn.length===0&&an.push(new Ie(Vt.key,yn,"array must have at least one stop")),an},default:function(Vt){return xi({key:Vt.key,value:Vt.value,valueSpec:be,style:Vt.style,styleSpec:Vt.styleSpec})}}});return Ee==="identity"&&Qe&&Lt.push(new Ie(A.key,A.value,'missing required property "property"')),Ee==="identity"||A.value.stops||Lt.push(new Ie(A.key,A.value,'missing required property "stops"')),Ee==="exponential"&&A.valueSpec.expression&&!so(A.valueSpec)&&Lt.push(new Ie(A.key,A.value,"exponential functions not supported")),A.styleSpec.$version>=8&&(ut&&!Wo(A.valueSpec)?Lt.push(new Ie(A.key,A.value,"property functions not supported")):Qe&&!Oo(A.valueSpec)&&Lt.push(new Ie(A.key,A.value,"zoom functions not supported"))),Ee!=="categorical"&&!wt||A.value.property!==void 0||Lt.push(new Ie(A.key,A.value,'"property" property is required')),Lt;function Bt(Vt){var an=[],yn=Vt.value,On=Vt.key;if(ti(yn)!=="array")return[new Ie(On,yn,"array expected, "+ti(yn)+" found")];if(yn.length!==2)return[new Ie(On,yn,"array length 2 expected, length "+yn.length+" found")];if(wt){if(ti(yn[0])!=="object")return[new Ie(On,yn,"object expected, "+ti(yn[0])+" found")];if(yn[0].zoom===void 0)return[new Ie(On,yn,"object stop key must have zoom")];if(yn[0].value===void 0)return[new Ie(On,yn,"object stop key must have value")];if(ae&&ae>lt(yn[0].zoom))return[new Ie(On,yn[0].zoom,"stop zoom values must appear in ascending order")];lt(yn[0].zoom)!==ae&&(ae=lt(yn[0].zoom),q=void 0,Ne={}),an=an.concat(Ia({key:On+"[0]",value:yn[0],valueSpec:{zoom:{}},style:Vt.style,styleSpec:Vt.styleSpec,objectElementValidators:{zoom:gs,value:Ht}}))}else an=an.concat(Ht({key:On+"[0]",value:yn[0],valueSpec:{},style:Vt.style,styleSpec:Vt.styleSpec},yn));return Jo(gt(yn[1]))?an.concat([new Ie(On+"[1]",yn[1],"expressions are not allowed in function stops.")]):an.concat(xi({key:On+"[1]",value:yn[1],valueSpec:be,style:Vt.style,styleSpec:Vt.styleSpec}))}function Ht(Vt,an){var yn=ti(Vt.value),On=lt(Vt.value),Pn=Vt.value!==null?Vt.value:an;if(P){if(yn!==P)return[new Ie(Vt.key,Pn,yn+" stop domain type must match previous stop domain type "+P)]}else P=yn;if(yn!=="number"&&yn!=="string"&&yn!=="boolean")return[new Ie(Vt.key,Pn,"stop domain value must be a number, string, or boolean")];if(yn!=="number"&&Ee!=="categorical"){var Nn="number expected, "+yn+" found";return Wo(be)&&Ee===void 0&&(Nn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ie(Vt.key,Pn,Nn)]}return Ee!=="categorical"||yn!=="number"||isFinite(On)&&Math.floor(On)===On?Ee!=="categorical"&&yn==="number"&&q!==void 0&&On<q?[new Ie(Vt.key,Pn,"stop domain values must appear in ascending order")]:(q=On,Ee==="categorical"&&On in Ne?[new Ie(Vt.key,Pn,"stop domain values must be unique")]:(Ne[On]=!0,[])):[new Ie(Vt.key,Pn,"integer expected, found "+On)]}}function _o(A){var P=(A.expressionContext==="property"?Ko:fs)(gt(A.value),A.valueSpec);if(P.result==="error")return P.value.map(function(ae){return new Ie(""+A.key+ae.key,A.value,ae.message)});var q=P.value.expression||P.value._styleExpression.expression;if(A.expressionContext==="property"&&A.propertyKey==="text-font"&&!q.outputDefined())return[new Ie(A.key,A.value,'Invalid data expression for "'+A.propertyKey+'". Output values must be contained as literals within the expression.')];if(A.expressionContext==="property"&&A.propertyType==="layout"&&!nr(q))return[new Ie(A.key,A.value,'"feature-state" data expressions are not supported with layout properties.')];if(A.expressionContext==="filter"&&!nr(q))return[new Ie(A.key,A.value,'"feature-state" data expressions are not supported with filters.')];if(A.expressionContext&&A.expressionContext.indexOf("cluster")===0){if(!tr(q,["zoom","feature-state"]))return[new Ie(A.key,A.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(A.expressionContext==="cluster-initial"&&!Gn(q))return[new Ie(A.key,A.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Es(A){var P=A.key,q=A.value,ae=A.valueSpec,be=[];return Array.isArray(ae.values)?ae.values.indexOf(lt(q))===-1&&be.push(new Ie(P,q,"expected one of ["+ae.values.join(", ")+"], "+JSON.stringify(q)+" found")):Object.keys(ae.values).indexOf(lt(q))===-1&&be.push(new Ie(P,q,"expected one of ["+Object.keys(ae.values).join(", ")+"], "+JSON.stringify(q)+" found")),be}function vs(A){if(A===!0||A===!1)return!0;if(!Array.isArray(A)||A.length===0)return!1;switch(A[0]){case"has":return A.length>=2&&A[1]!=="$id"&&A[1]!=="$type";case"in":return A.length>=3&&(typeof A[1]!="string"||Array.isArray(A[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return A.length!==3||Array.isArray(A[1])||Array.isArray(A[2]);case"any":case"all":for(var P=0,q=A.slice(1);P<q.length;P+=1){var ae=q[P];if(!vs(ae)&&typeof ae!="boolean")return!1}return!0;default:return!0}}hs.deserialize=function(A){return new hs(A._parameters,A._specification)},hs.serialize=function(A){return{_parameters:A._parameters,_specification:A._specification}};var Xs={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ms(A){if(A==null)return{filter:function(){return!0},needGeometry:!1};vs(A)||(A=Fo(A));var P=fs(A,Xs);if(P.result==="error")throw new Error(P.value.map(function(q){return q.key+": "+q.message}).join(", "));return{filter:function(q,ae,be){return P.value.evaluate(q,ae,{},be)},needGeometry:Do(A)}}function $o(A,P){return A<P?-1:A>P?1:0}function Do(A){if(!Array.isArray(A))return!1;if(A[0]==="within")return!0;for(var P=1;P<A.length;P++)if(Do(A[P]))return!0;return!1}function Fo(A){if(!A)return!0;var P,q=A[0];return A.length<=1?q!=="any":q==="=="?si(A[1],A[2],"=="):q==="!="?Yi(si(A[1],A[2],"==")):q==="<"||q===">"||q==="<="||q===">="?si(A[1],A[2],q):q==="any"?(P=A.slice(1),["any"].concat(P.map(Fo))):q==="all"?["all"].concat(A.slice(1).map(Fo)):q==="none"?["all"].concat(A.slice(1).map(Fo).map(Yi)):q==="in"?wo(A[1],A.slice(2)):q==="!in"?Yi(wo(A[1],A.slice(2))):q==="has"?To(A[1]):q==="!has"?Yi(To(A[1])):q!=="within"||A}function si(A,P,q){switch(A){case"$type":return["filter-type-"+q,P];case"$id":return["filter-id-"+q,P];default:return["filter-"+q,A,P]}}function wo(A,P){if(P.length===0)return!1;switch(A){case"$type":return["filter-type-in",["literal",P]];case"$id":return["filter-id-in",["literal",P]];default:return P.length>200&&!P.some(function(q){return typeof q!=typeof P[0]})?["filter-in-large",A,["literal",P.sort($o)]]:["filter-in-small",A,["literal",P]]}}function To(A){switch(A){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",A]}}function Yi(A){return["!",A]}function Xr(A){return vs(gt(A.value))?_o(it({},A,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Kr(A)}function Kr(A){var P=A.value,q=A.key;if(ti(P)!=="array")return[new Ie(q,P,"array expected, "+ti(P)+" found")];var ae,be=A.styleSpec,Ee=[];if(P.length<1)return[new Ie(q,P,"filter array must have at least 1 element")];switch(Ee=Ee.concat(Es({key:q+"[0]",value:P[0],valueSpec:be.filter_operator,style:A.style,styleSpec:A.styleSpec})),lt(P[0])){case"<":case"<=":case">":case">=":P.length>=2&&lt(P[1])==="$type"&&Ee.push(new Ie(q,P,'"$type" cannot be use with operator "'+P[0]+'"'));case"==":case"!=":P.length!==3&&Ee.push(new Ie(q,P,'filter array for operator "'+P[0]+'" must have 3 elements'));case"in":case"!in":P.length>=2&&(ae=ti(P[1]))!=="string"&&Ee.push(new Ie(q+"[1]",P[1],"string expected, "+ae+" found"));for(var Ne=2;Ne<P.length;Ne++)ae=ti(P[Ne]),lt(P[1])==="$type"?Ee=Ee.concat(Es({key:q+"["+Ne+"]",value:P[Ne],valueSpec:be.geometry_type,style:A.style,styleSpec:A.styleSpec})):ae!=="string"&&ae!=="number"&&ae!=="boolean"&&Ee.push(new Ie(q+"["+Ne+"]",P[Ne],"string, number, or boolean expected, "+ae+" found"));break;case"any":case"all":case"none":for(var Qe=1;Qe<P.length;Qe++)Ee=Ee.concat(Kr({key:q+"["+Qe+"]",value:P[Qe],style:A.style,styleSpec:A.styleSpec}));break;case"has":case"!has":ae=ti(P[1]),P.length!==2?Ee.push(new Ie(q,P,'filter array for "'+P[0]+'" operator must have 2 elements')):ae!=="string"&&Ee.push(new Ie(q+"[1]",P[1],"string expected, "+ae+" found"));break;case"within":ae=ti(P[1]),P.length!==2?Ee.push(new Ie(q,P,'filter array for "'+P[0]+'" operator must have 2 elements')):ae!=="object"&&Ee.push(new Ie(q+"[1]",P[1],"object expected, "+ae+" found"))}return Ee}function lo(A,P){var q=A.key,ae=A.style,be=A.styleSpec,Ee=A.value,Ne=A.objectKey,Qe=be[P+"_"+A.layerType];if(!Qe)return[];var ut=Ne.match(/^(.*)-transition$/);if(P==="paint"&&ut&&Qe[ut[1]]&&Qe[ut[1]].transition)return xi({key:q,value:Ee,valueSpec:be.transition,style:ae,styleSpec:be});var wt,Lt=A.valueSpec||Qe[Ne];if(!Lt)return[new Ie(q,Ee,'unknown property "'+Ne+'"')];if(ti(Ee)==="string"&&Wo(Lt)&&!Lt.tokens&&(wt=/^{([^}]+)}$/.exec(Ee)))return[new Ie(q,Ee,'"'+Ne+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(wt[1])+" }`.")];var Bt=[];return A.layerType==="symbol"&&(Ne==="text-field"&&ae&&!ae.glyphs&&Bt.push(new Ie(q,Ee,'use of "text-field" requires a style "glyphs" property')),Ne==="text-font"&&bo(gt(Ee))&&lt(Ee.type)==="identity"&&Bt.push(new Ie(q,Ee,'"text-font" does not support identity functions'))),Bt.concat(xi({key:A.key,value:Ee,valueSpec:Lt,style:ae,styleSpec:be,expressionContext:"property",propertyType:P,propertyKey:Ne}))}function Ja(A){return lo(A,"paint")}function Ls(A){return lo(A,"layout")}function Js(A){var P=[],q=A.value,ae=A.key,be=A.style,Ee=A.styleSpec;q.type||q.ref||P.push(new Ie(ae,q,'either "type" or "ref" is required'));var Ne,Qe=lt(q.type),ut=lt(q.ref);if(q.id)for(var wt=lt(q.id),Lt=0;Lt<A.arrayIndex;Lt++){var Bt=be.layers[Lt];lt(Bt.id)===wt&&P.push(new Ie(ae,q.id,'duplicate layer id "'+q.id+'", previously used at line '+Bt.id.__line__))}if("ref"in q)["type","source","source-layer","filter","layout"].forEach(function(an){an in q&&P.push(new Ie(ae,q[an],'"'+an+'" is prohibited for ref layers'))}),be.layers.forEach(function(an){lt(an.id)===ut&&(Ne=an)}),Ne?Ne.ref?P.push(new Ie(ae,q.ref,"ref cannot reference another ref layer")):Qe=lt(Ne.type):P.push(new Ie(ae,q.ref,'ref layer "'+ut+'" not found'));else if(Qe!=="background")if(q.source){var Ht=be.sources&&be.sources[q.source],Vt=Ht&&lt(Ht.type);Ht?Vt==="vector"&&Qe==="raster"?P.push(new Ie(ae,q.source,'layer "'+q.id+'" requires a raster source')):Vt==="raster"&&Qe!=="raster"?P.push(new Ie(ae,q.source,'layer "'+q.id+'" requires a vector source')):Vt!=="vector"||q["source-layer"]?Vt==="raster-dem"&&Qe!=="hillshade"?P.push(new Ie(ae,q.source,"raster-dem source can only be used with layer type 'hillshade'.")):Qe!=="line"||!q.paint||!q.paint["line-gradient"]||Vt==="geojson"&&Ht.lineMetrics||P.push(new Ie(ae,q,'layer "'+q.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):P.push(new Ie(ae,q,'layer "'+q.id+'" must specify a "source-layer"')):P.push(new Ie(ae,q.source,'source "'+q.source+'" not found'))}else P.push(new Ie(ae,q,'missing required property "source"'));return P=P.concat(Ia({key:ae,value:q,valueSpec:Ee.layer,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return xi({key:ae+".type",value:q.type,valueSpec:Ee.layer.type,style:A.style,styleSpec:A.styleSpec,object:q,objectKey:"type"})},filter:Xr,layout:function(an){return Ia({layer:q,key:an.key,value:an.value,style:an.style,styleSpec:an.styleSpec,objectElementValidators:{"*":function(yn){return Ls(it({layerType:Qe},yn))}}})},paint:function(an){return Ia({layer:q,key:an.key,value:an.value,style:an.style,styleSpec:an.styleSpec,objectElementValidators:{"*":function(yn){return Ja(it({layerType:Qe},yn))}}})}}})),P}function Bo(A){var P=A.value,q=A.key,ae=ti(P);return ae!=="string"?[new Ie(q,P,"string expected, "+ae+" found")]:[]}var Ks={promoteId:function(A){var P=A.key,q=A.value;if(ti(q)==="string")return Bo({key:P,value:q});var ae=[];for(var be in q)ae.push.apply(ae,Bo({key:P+"."+be,value:q[be]}));return ae}};function No(A){var P=A.value,q=A.key,ae=A.styleSpec,be=A.style;if(!P.type)return[new Ie(q,P,'"type" is required')];var Ee,Ne=lt(P.type);switch(Ne){case"vector":case"raster":case"raster-dem":return Ia({key:q,value:P,valueSpec:ae["source_"+Ne.replace("-","_")],style:A.style,styleSpec:ae,objectElementValidators:Ks});case"geojson":if(Ee=Ia({key:q,value:P,valueSpec:ae.source_geojson,style:be,styleSpec:ae,objectElementValidators:Ks}),P.cluster)for(var Qe in P.clusterProperties){var ut=P.clusterProperties[Qe],wt=ut[0],Lt=ut[1],Bt=typeof wt=="string"?[wt,["accumulated"],["get",Qe]]:wt;Ee.push.apply(Ee,_o({key:q+"."+Qe+".map",value:Lt,expressionContext:"cluster-map"})),Ee.push.apply(Ee,_o({key:q+"."+Qe+".reduce",value:Bt,expressionContext:"cluster-reduce"}))}return Ee;case"video":return Ia({key:q,value:P,valueSpec:ae.source_video,style:be,styleSpec:ae});case"image":return Ia({key:q,value:P,valueSpec:ae.source_image,style:be,styleSpec:ae});case"canvas":return[new Ie(q,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Es({key:q+".type",value:P.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:be,styleSpec:ae})}}function uo(A){var P=A.value,q=A.styleSpec,ae=q.light,be=A.style,Ee=[],Ne=ti(P);if(P===void 0)return Ee;if(Ne!=="object")return Ee.concat([new Ie("light",P,"object expected, "+Ne+" found")]);for(var Qe in P){var ut=Qe.match(/^(.*)-transition$/);Ee=ut&&ae[ut[1]]&&ae[ut[1]].transition?Ee.concat(xi({key:Qe,value:P[Qe],valueSpec:q.transition,style:be,styleSpec:q})):ae[Qe]?Ee.concat(xi({key:Qe,value:P[Qe],valueSpec:ae[Qe],style:be,styleSpec:q})):Ee.concat([new Ie(Qe,P[Qe],'unknown property "'+Qe+'"')])}return Ee}var jo={"*":function(){return[]},array:ds,boolean:function(A){var P=A.value,q=A.key,ae=ti(P);return ae!=="boolean"?[new Ie(q,P,"boolean expected, "+ae+" found")]:[]},number:gs,color:function(A){var P=A.key,q=A.value,ae=ti(q);return ae!=="string"?[new Ie(P,q,"color expected, "+ae+" found")]:on(q)===null?[new Ie(P,q,'color expected, "'+q+'" found')]:[]},constants:We,enum:Es,filter:Xr,function:Ws,layer:Js,object:Ia,source:No,light:uo,string:Bo,formatted:function(A){return Bo(A).length===0?[]:_o(A)},resolvedImage:function(A){return Bo(A).length===0?[]:_o(A)}};function xi(A){var P=A.value,q=A.valueSpec,ae=A.styleSpec;return q.expression&&bo(lt(P))?Ws(A):q.expression&&Jo(gt(P))?_o(A):q.type&&jo[q.type]?jo[q.type](A):Ia(it({},A,{valueSpec:q.type?ae[q.type]:q}))}function Ka(A){var P=A.value,q=A.key,ae=Bo(A);return ae.length||(P.indexOf("{fontstack}")===-1&&ae.push(new Ie(q,P,'"glyphs" url must include a "{fontstack}" token')),P.indexOf("{range}")===-1&&ae.push(new Ie(q,P,'"glyphs" url must include a "{range}" token'))),ae}function Uo(A,P){P===void 0&&(P=Se);var q=[];return q=q.concat(xi({key:"",value:A,valueSpec:P.$root,styleSpec:P,style:A,objectElementValidators:{glyphs:Ka,"*":function(){return[]}}})),A.constants&&(q=q.concat(We({key:"constants",value:A.constants,style:A,styleSpec:P}))),zi(q)}function zi(A){return[].concat(A).sort(function(P,q){return P.line-q.line})}function Wi(A){return function(){for(var P=[],q=arguments.length;q--;)P[q]=arguments[q];return zi(A.apply(this,P))}}Uo.source=Wi(No),Uo.light=Wi(uo),Uo.layer=Wi(Js),Uo.filter=Wi(Xr),Uo.paintProperty=Wi(Ja),Uo.layoutProperty=Wi(Ls);var Xi=Uo,Gi=Xi.light,ua=Xi.paintProperty,ko=Xi.layoutProperty;function za(A,P){var q=!1;if(P&&P.length)for(var ae=0,be=P;ae<be.length;ae+=1){var Ee=be[ae];A.fire(new Ke(new Error(Ee.message))),q=!0}return q}var Fi=ba;function ba(A,P,q){var ae=this.cells=[];if(A instanceof ArrayBuffer){this.arrayBuffer=A;var be=new Int32Array(this.arrayBuffer);A=be[0],P=be[1],q=be[2],this.d=P+2*q;for(var Ee=0;Ee<this.d*this.d;Ee++){var Ne=be[3+Ee],Qe=be[3+Ee+1];ae.push(Ne===Qe?null:be.subarray(Ne,Qe))}var ut=be[3+ae.length],wt=be[3+ae.length+1];this.keys=be.subarray(ut,wt),this.bboxes=be.subarray(wt),this.insert=this._insertReadonly}else{this.d=P+2*q;for(var Lt=0;Lt<this.d*this.d;Lt++)ae.push([]);this.keys=[],this.bboxes=[]}this.n=P,this.extent=A,this.padding=q,this.scale=P/A,this.uid=0;var Bt=q/P*A;this.min=-Bt,this.max=A+Bt}ba.prototype.insert=function(A,P,q,ae,be){this._forEachCell(P,q,ae,be,this._insertCell,this.uid++),this.keys.push(A),this.bboxes.push(P),this.bboxes.push(q),this.bboxes.push(ae),this.bboxes.push(be)},ba.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ba.prototype._insertCell=function(A,P,q,ae,be,Ee){this.cells[be].push(Ee)},ba.prototype.query=function(A,P,q,ae,be){var Ee=this.min,Ne=this.max;if(A<=Ee&&P<=Ee&&Ne<=q&&Ne<=ae&&!be)return Array.prototype.slice.call(this.keys);var Qe=[];return this._forEachCell(A,P,q,ae,this._queryCell,Qe,{},be),Qe},ba.prototype._queryCell=function(A,P,q,ae,be,Ee,Ne,Qe){var ut=this.cells[be];if(ut!==null)for(var wt=this.keys,Lt=this.bboxes,Bt=0;Bt<ut.length;Bt++){var Ht=ut[Bt];if(Ne[Ht]===void 0){var Vt=4*Ht;(Qe?Qe(Lt[Vt+0],Lt[Vt+1],Lt[Vt+2],Lt[Vt+3]):A<=Lt[Vt+2]&&P<=Lt[Vt+3]&&q>=Lt[Vt+0]&&ae>=Lt[Vt+1])?(Ne[Ht]=!0,Ee.push(wt[Ht])):Ne[Ht]=!1}}},ba.prototype._forEachCell=function(A,P,q,ae,be,Ee,Ne,Qe){for(var ut=this._convertToCellCoord(A),wt=this._convertToCellCoord(P),Lt=this._convertToCellCoord(q),Bt=this._convertToCellCoord(ae),Ht=ut;Ht<=Lt;Ht++)for(var Vt=wt;Vt<=Bt;Vt++){var an=this.d*Vt+Ht;if((!Qe||Qe(this._convertFromCellCoord(Ht),this._convertFromCellCoord(Vt),this._convertFromCellCoord(Ht+1),this._convertFromCellCoord(Vt+1)))&&be.call(this,A,P,q,ae,an,Ee,Ne,Qe))return}},ba.prototype._convertFromCellCoord=function(A){return(A-this.padding)/this.scale},ba.prototype._convertToCellCoord=function(A){return Math.max(0,Math.min(this.d-1,Math.floor(A*this.scale)+this.padding))},ba.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var A=this.cells,P=3+this.cells.length+1+1,q=0,ae=0;ae<this.cells.length;ae++)q+=this.cells[ae].length;var be=new Int32Array(P+q+this.keys.length+this.bboxes.length);be[0]=this.extent,be[1]=this.n,be[2]=this.padding;for(var Ee=P,Ne=0;Ne<A.length;Ne++){var Qe=A[Ne];be[3+Ne]=Ee,be.set(Qe,Ee),Ee+=Qe.length}return be[3+A.length]=Ee,be.set(this.keys,Ee),Ee+=this.keys.length,be[3+A.length+1]=Ee,be.set(this.bboxes,Ee),Ee+=this.bboxes.length,be.buffer};var Cs=self.ImageData,Ps=self.ImageBitmap,aa={};function wr(A,P,q){q===void 0&&(q={}),Object.defineProperty(P,"_classRegistryKey",{value:A,writeable:!1}),aa[A]={klass:P,omit:q.omit||[],shallow:q.shallow||[]}}for(var Vo in wr("Object",Object),Fi.serialize=function(A,P){var q=A.toArrayBuffer();return P&&P.push(q),{buffer:q}},Fi.deserialize=function(A){return new Fi(A.buffer)},wr("Grid",Fi),wr("Color",sn),wr("Error",Error),wr("ResolvedImage",Fn),wr("StylePropertyFunction",hs),wr("StyleExpression",cs,{omit:["_evaluator"]}),wr("ZoomDependentExpression",Ro),wr("ZoomConstantExpression",zo),wr("CompoundExpression",Un,{omit:["_evaluate"]}),Yo)Yo[Vo]._classRegistryKey||wr("Expression_"+Vo,Yo[Vo]);function ca(A){return A&&typeof ArrayBuffer<"u"&&(A instanceof ArrayBuffer||A.constructor&&A.constructor.name==="ArrayBuffer")}function Os(A){return Ps&&A instanceof Ps}function Qo(A,P){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp)return A;if(ca(A)||Os(A))return P&&P.push(A),A;if(ArrayBuffer.isView(A)){var q=A;return P&&P.push(q.buffer),q}if(A instanceof Cs)return P&&P.push(A.data.buffer),A;if(Array.isArray(A)){for(var ae=[],be=0,Ee=A;be<Ee.length;be+=1){var Ne=Ee[be];ae.push(Qo(Ne,P))}return ae}if(typeof A=="object"){var Qe=A.constructor,ut=Qe._classRegistryKey;if(!ut)throw new Error("can't serialize object of unregistered class");var wt=Qe.serialize?Qe.serialize(A,P):{};if(!Qe.serialize){for(var Lt in A)if(A.hasOwnProperty(Lt)&&!(aa[ut].omit.indexOf(Lt)>=0)){var Bt=A[Lt];wt[Lt]=aa[ut].shallow.indexOf(Lt)>=0?Bt:Qo(Bt,P)}A instanceof Error&&(wt.message=A.message)}if(wt.$name)throw new Error("$name property is reserved for worker serialization logic.");return ut!=="Object"&&(wt.$name=ut),wt}throw new Error("can't serialize object of type "+typeof A)}function es(A){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||ca(A)||Os(A)||ArrayBuffer.isView(A)||A instanceof Cs)return A;if(Array.isArray(A))return A.map(es);if(typeof A=="object"){var P=A.$name||"Object",q=aa[P].klass;if(!q)throw new Error("can't deserialize unregistered class "+P);if(q.deserialize)return q.deserialize(A);for(var ae=Object.create(q.prototype),be=0,Ee=Object.keys(A);be<Ee.length;be+=1){var Ne=Ee[be];if(Ne!=="$name"){var Qe=A[Ne];ae[Ne]=aa[P].shallow.indexOf(Ne)>=0?Qe:es(Qe)}}return ae}throw new Error("can't deserialize object of type "+typeof A)}var ts=function(){this.first=!0};ts.prototype.update=function(A,P){var q=Math.floor(A);return this.first?(this.first=!1,this.lastIntegerZoom=q,this.lastIntegerZoomTime=0,this.lastZoom=A,this.lastFloorZoom=q,!0):(this.lastFloorZoom>q?(this.lastIntegerZoom=q+1,this.lastIntegerZoomTime=P):this.lastFloorZoom<q&&(this.lastIntegerZoom=q,this.lastIntegerZoomTime=P),A!==this.lastZoom&&(this.lastZoom=A,this.lastFloorZoom=q,!0))};var Ar={"Latin-1 Supplement":function(A){return A>=128&&A<=255},Arabic:function(A){return A>=1536&&A<=1791},"Arabic Supplement":function(A){return A>=1872&&A<=1919},"Arabic Extended-A":function(A){return A>=2208&&A<=2303},"Hangul Jamo":function(A){return A>=4352&&A<=4607},"Unified Canadian Aboriginal Syllabics":function(A){return A>=5120&&A<=5759},Khmer:function(A){return A>=6016&&A<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(A){return A>=6320&&A<=6399},"General Punctuation":function(A){return A>=8192&&A<=8303},"Letterlike Symbols":function(A){return A>=8448&&A<=8527},"Number Forms":function(A){return A>=8528&&A<=8591},"Miscellaneous Technical":function(A){return A>=8960&&A<=9215},"Control Pictures":function(A){return A>=9216&&A<=9279},"Optical Character Recognition":function(A){return A>=9280&&A<=9311},"Enclosed Alphanumerics":function(A){return A>=9312&&A<=9471},"Geometric Shapes":function(A){return A>=9632&&A<=9727},"Miscellaneous Symbols":function(A){return A>=9728&&A<=9983},"Miscellaneous Symbols and Arrows":function(A){return A>=11008&&A<=11263},"CJK Radicals Supplement":function(A){return A>=11904&&A<=12031},"Kangxi Radicals":function(A){return A>=12032&&A<=12255},"Ideographic Description Characters":function(A){return A>=12272&&A<=12287},"CJK Symbols and Punctuation":function(A){return A>=12288&&A<=12351},Hiragana:function(A){return A>=12352&&A<=12447},Katakana:function(A){return A>=12448&&A<=12543},Bopomofo:function(A){return A>=12544&&A<=12591},"Hangul Compatibility Jamo":function(A){return A>=12592&&A<=12687},Kanbun:function(A){return A>=12688&&A<=12703},"Bopomofo Extended":function(A){return A>=12704&&A<=12735},"CJK Strokes":function(A){return A>=12736&&A<=12783},"Katakana Phonetic Extensions":function(A){return A>=12784&&A<=12799},"Enclosed CJK Letters and Months":function(A){return A>=12800&&A<=13055},"CJK Compatibility":function(A){return A>=13056&&A<=13311},"CJK Unified Ideographs Extension A":function(A){return A>=13312&&A<=19903},"Yijing Hexagram Symbols":function(A){return A>=19904&&A<=19967},"CJK Unified Ideographs":function(A){return A>=19968&&A<=40959},"Yi Syllables":function(A){return A>=40960&&A<=42127},"Yi Radicals":function(A){return A>=42128&&A<=42191},"Hangul Jamo Extended-A":function(A){return A>=43360&&A<=43391},"Hangul Syllables":function(A){return A>=44032&&A<=55215},"Hangul Jamo Extended-B":function(A){return A>=55216&&A<=55295},"Private Use Area":function(A){return A>=57344&&A<=63743},"CJK Compatibility Ideographs":function(A){return A>=63744&&A<=64255},"Arabic Presentation Forms-A":function(A){return A>=64336&&A<=65023},"Vertical Forms":function(A){return A>=65040&&A<=65055},"CJK Compatibility Forms":function(A){return A>=65072&&A<=65103},"Small Form Variants":function(A){return A>=65104&&A<=65135},"Arabic Presentation Forms-B":function(A){return A>=65136&&A<=65279},"Halfwidth and Fullwidth Forms":function(A){return A>=65280&&A<=65519}};function ns(A){for(var P=0,q=A;P<q.length;P+=1)if(Ra(q[P].charCodeAt(0)))return!0;return!1}function Ra(A){return!(A!==746&&A!==747&&(A<4352||!(Ar["Bopomofo Extended"](A)||Ar.Bopomofo(A)||Ar["CJK Compatibility Forms"](A)&&!(A>=65097&&A<=65103)||Ar["CJK Compatibility Ideographs"](A)||Ar["CJK Compatibility"](A)||Ar["CJK Radicals Supplement"](A)||Ar["CJK Strokes"](A)||!(!Ar["CJK Symbols and Punctuation"](A)||A>=12296&&A<=12305||A>=12308&&A<=12319||A===12336)||Ar["CJK Unified Ideographs Extension A"](A)||Ar["CJK Unified Ideographs"](A)||Ar["Enclosed CJK Letters and Months"](A)||Ar["Hangul Compatibility Jamo"](A)||Ar["Hangul Jamo Extended-A"](A)||Ar["Hangul Jamo Extended-B"](A)||Ar["Hangul Jamo"](A)||Ar["Hangul Syllables"](A)||Ar.Hiragana(A)||Ar["Ideographic Description Characters"](A)||Ar.Kanbun(A)||Ar["Kangxi Radicals"](A)||Ar["Katakana Phonetic Extensions"](A)||Ar.Katakana(A)&&A!==12540||!(!Ar["Halfwidth and Fullwidth Forms"](A)||A===65288||A===65289||A===65293||A>=65306&&A<=65310||A===65339||A===65341||A===65343||A>=65371&&A<=65503||A===65507||A>=65512&&A<=65519)||!(!Ar["Small Form Variants"](A)||A>=65112&&A<=65118||A>=65123&&A<=65126)||Ar["Unified Canadian Aboriginal Syllabics"](A)||Ar["Unified Canadian Aboriginal Syllabics Extended"](A)||Ar["Vertical Forms"](A)||Ar["Yijing Hexagram Symbols"](A)||Ar["Yi Syllables"](A)||Ar["Yi Radicals"](A))))}function Is(A){return!(Ra(A)||function(P){return!!(Ar["Latin-1 Supplement"](P)&&(P===167||P===169||P===174||P===177||P===188||P===189||P===190||P===215||P===247)||Ar["General Punctuation"](P)&&(P===8214||P===8224||P===8225||P===8240||P===8241||P===8251||P===8252||P===8258||P===8263||P===8264||P===8265||P===8273)||Ar["Letterlike Symbols"](P)||Ar["Number Forms"](P)||Ar["Miscellaneous Technical"](P)&&(P>=8960&&P<=8967||P>=8972&&P<=8991||P>=8996&&P<=9e3||P===9003||P>=9085&&P<=9114||P>=9150&&P<=9165||P===9167||P>=9169&&P<=9179||P>=9186&&P<=9215)||Ar["Control Pictures"](P)&&P!==9251||Ar["Optical Character Recognition"](P)||Ar["Enclosed Alphanumerics"](P)||Ar["Geometric Shapes"](P)||Ar["Miscellaneous Symbols"](P)&&!(P>=9754&&P<=9759)||Ar["Miscellaneous Symbols and Arrows"](P)&&(P>=11026&&P<=11055||P>=11088&&P<=11097||P>=11192&&P<=11243)||Ar["CJK Symbols and Punctuation"](P)||Ar.Katakana(P)||Ar["Private Use Area"](P)||Ar["CJK Compatibility Forms"](P)||Ar["Small Form Variants"](P)||Ar["Halfwidth and Fullwidth Forms"](P)||P===8734||P===8756||P===8757||P>=9984&&P<=10087||P>=10102&&P<=10131||P===65532||P===65533)}(A))}function ys(A){return Ar.Arabic(A)||Ar["Arabic Supplement"](A)||Ar["Arabic Extended-A"](A)||Ar["Arabic Presentation Forms-A"](A)||Ar["Arabic Presentation Forms-B"](A)}function Ji(A){return A>=1424&&A<=2303||Ar["Arabic Presentation Forms-A"](A)||Ar["Arabic Presentation Forms-B"](A)}function Ho(A,P){return!(!P&&Ji(A)||A>=2304&&A<=3583||A>=3840&&A<=4255||Ar.Khmer(A))}function co(A){for(var P=0,q=A;P<q.length;P+=1)if(Ji(q[P].charCodeAt(0)))return!0;return!1}var _a="deferred",Ao="loading",Ha="loaded",Da="error",qo=null,Ki="unavailable",Fa=null,ii=function(A){A&&typeof A=="string"&&A.indexOf("NetworkError")>-1&&(Ki=Da),qo&&qo(A)};function xs(){Ea.fire(new je("pluginStateChange",{pluginStatus:Ki,pluginURL:Fa}))}var Ea=new st,Ba=function(){return Ki},$a=function(){if(Ki!==_a||!Fa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ki=Ao,xs(),Fa&&Pt({url:Fa},function(A){A?ii(A):(Ki=Ha,xs())})},fa={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ki===Ha||fa.applyArabicShaping!=null},isLoading:function(){return Ki===Ao},setState:function(A){Ki=A.pluginStatus,Fa=A.pluginURL},isParsed:function(){return fa.applyArabicShaping!=null&&fa.processBidirectionalText!=null&&fa.processStyledBidirectionalText!=null},getPluginURL:function(){return Fa}},ri=function(A,P){this.zoom=A,P?(this.now=P.now,this.fadeDuration=P.fadeDuration,this.zoomHistory=P.zoomHistory,this.transition=P.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ts,this.transition={})};ri.prototype.isSupportedScript=function(A){return function(P,q){for(var ae=0,be=P;ae<be.length;ae+=1)if(!Ho(be[ae].charCodeAt(0),q))return!1;return!0}(A,fa.isLoaded())},ri.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ri.prototype.getCrossfadeParameters=function(){var A=this.zoom,P=A-Math.floor(A),q=this.crossFadingFactor();return A>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:P+(1-P)*q}:{fromScale:.5,toScale:1,t:1-(1-q)*P}};var Vi=function(A,P){this.property=A,this.value=P,this.expression=function(q,ae){if(bo(q))return new hs(q,ae);if(Jo(q)){var be=Ko(q,ae);if(be.result==="error")throw new Error(be.value.map(function(Ne){return Ne.key+": "+Ne.message}).join(", "));return be.value}var Ee=q;return typeof q=="string"&&ae.type==="color"&&(Ee=sn.parse(q)),{kind:"constant",evaluate:function(){return Ee}}}(P===void 0?A.specification.default:P,A.specification)};Vi.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Vi.prototype.possiblyEvaluate=function(A,P,q){return this.property.possiblyEvaluate(this,A,P,q)};var qa=function(A){this.property=A,this.value=new Vi(A,void 0)};qa.prototype.transitioned=function(A,P){return new Qa(this.property,this.value,P,u({},A.transition,this.transition),A.now)},qa.prototype.untransitioned=function(){return new Qa(this.property,this.value,null,{},0)};var ha=function(A){this._properties=A,this._values=Object.create(A.defaultTransitionablePropertyValues)};ha.prototype.getValue=function(A){return w(this._values[A].value.value)},ha.prototype.setValue=function(A,P){this._values.hasOwnProperty(A)||(this._values[A]=new qa(this._values[A].property)),this._values[A].value=new Vi(this._values[A].property,P===null?void 0:w(P))},ha.prototype.getTransition=function(A){return w(this._values[A].transition)},ha.prototype.setTransition=function(A,P){this._values.hasOwnProperty(A)||(this._values[A]=new qa(this._values[A].property)),this._values[A].transition=w(P)||void 0},ha.prototype.serialize=function(){for(var A={},P=0,q=Object.keys(this._values);P<q.length;P+=1){var ae=q[P],be=this.getValue(ae);be!==void 0&&(A[ae]=be);var Ee=this.getTransition(ae);Ee!==void 0&&(A[ae+"-transition"]=Ee)}return A},ha.prototype.transitioned=function(A,P){for(var q=new Mo(this._properties),ae=0,be=Object.keys(this._values);ae<be.length;ae+=1){var Ee=be[ae];q._values[Ee]=this._values[Ee].transitioned(A,P._values[Ee])}return q},ha.prototype.untransitioned=function(){for(var A=new Mo(this._properties),P=0,q=Object.keys(this._values);P<q.length;P+=1){var ae=q[P];A._values[ae]=this._values[ae].untransitioned()}return A};var Qa=function(A,P,q,ae,be){this.property=A,this.value=P,this.begin=be+ae.delay||0,this.end=this.begin+ae.duration||0,A.specification.transition&&(ae.delay||ae.duration)&&(this.prior=q)};Qa.prototype.possiblyEvaluate=function(A,P,q){var ae=A.now||0,be=this.value.possiblyEvaluate(A,P,q),Ee=this.prior;if(Ee){if(ae>this.end)return this.prior=null,be;if(this.value.isDataDriven())return this.prior=null,be;if(ae<this.begin)return Ee.possiblyEvaluate(A,P,q);var Ne=(ae-this.begin)/(this.end-this.begin);return this.property.interpolate(Ee.possiblyEvaluate(A,P,q),be,function(Qe){if(Qe<=0)return 0;if(Qe>=1)return 1;var ut=Qe*Qe,wt=ut*Qe;return 4*(Qe<.5?wt:3*(Qe-ut)+wt-.75)}(Ne))}return be};var Mo=function(A){this._properties=A,this._values=Object.create(A.defaultTransitioningPropertyValues)};Mo.prototype.possiblyEvaluate=function(A,P,q){for(var ae=new Na(this._properties),be=0,Ee=Object.keys(this._values);be<Ee.length;be+=1){var Ne=Ee[be];ae._values[Ne]=this._values[Ne].possiblyEvaluate(A,P,q)}return ae},Mo.prototype.hasTransition=function(){for(var A=0,P=Object.keys(this._values);A<P.length;A+=1){var q=P[A];if(this._values[q].prior)return!0}return!1};var fo=function(A){this._properties=A,this._values=Object.create(A.defaultPropertyValues)};fo.prototype.getValue=function(A){return w(this._values[A].value)},fo.prototype.setValue=function(A,P){this._values[A]=new Vi(this._values[A].property,P===null?void 0:w(P))},fo.prototype.serialize=function(){for(var A={},P=0,q=Object.keys(this._values);P<q.length;P+=1){var ae=q[P],be=this.getValue(ae);be!==void 0&&(A[ae]=be)}return A},fo.prototype.possiblyEvaluate=function(A,P,q){for(var ae=new Na(this._properties),be=0,Ee=Object.keys(this._values);be<Ee.length;be+=1){var Ne=Ee[be];ae._values[Ne]=this._values[Ne].possiblyEvaluate(A,P,q)}return ae};var $i=function(A,P,q){this.property=A,this.value=P,this.parameters=q};$i.prototype.isConstant=function(){return this.value.kind==="constant"},$i.prototype.constantOr=function(A){return this.value.kind==="constant"?this.value.value:A},$i.prototype.evaluate=function(A,P,q,ae){return this.property.evaluate(this.value,this.parameters,A,P,q,ae)};var Na=function(A){this._properties=A,this._values=Object.create(A.defaultPossiblyEvaluatedValues)};Na.prototype.get=function(A){return this._values[A]};var Lr=function(A){this.specification=A};Lr.prototype.possiblyEvaluate=function(A,P){return A.expression.evaluate(P)},Lr.prototype.interpolate=function(A,P,q){var ae=sr[this.specification.type];return ae?ae(A,P,q):A};var Ir=function(A,P){this.specification=A,this.overrides=P};Ir.prototype.possiblyEvaluate=function(A,P,q,ae){return A.expression.kind==="constant"||A.expression.kind==="camera"?new $i(this,{kind:"constant",value:A.expression.evaluate(P,null,{},q,ae)},P):new $i(this,A.expression,P)},Ir.prototype.interpolate=function(A,P,q){if(A.value.kind!=="constant"||P.value.kind!=="constant")return A;if(A.value.value===void 0||P.value.value===void 0)return new $i(this,{kind:"constant",value:void 0},A.parameters);var ae=sr[this.specification.type];return ae?new $i(this,{kind:"constant",value:ae(A.value.value,P.value.value,q)},A.parameters):A},Ir.prototype.evaluate=function(A,P,q,ae,be,Ee){return A.kind==="constant"?A.value:A.evaluate(P,q,ae,be,Ee)};var rs=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.possiblyEvaluate=function(q,ae,be,Ee){if(q.value===void 0)return new $i(this,{kind:"constant",value:void 0},ae);if(q.expression.kind==="constant"){var Ne=q.expression.evaluate(ae,null,{},be,Ee),Qe=q.property.specification.type==="resolvedImage"&&typeof Ne!="string"?Ne.name:Ne,ut=this._calculate(Qe,Qe,Qe,ae);return new $i(this,{kind:"constant",value:ut},ae)}if(q.expression.kind==="camera"){var wt=this._calculate(q.expression.evaluate({zoom:ae.zoom-1}),q.expression.evaluate({zoom:ae.zoom}),q.expression.evaluate({zoom:ae.zoom+1}),ae);return new $i(this,{kind:"constant",value:wt},ae)}return new $i(this,q.expression,ae)},P.prototype.evaluate=function(q,ae,be,Ee,Ne,Qe){if(q.kind==="source"){var ut=q.evaluate(ae,be,Ee,Ne,Qe);return this._calculate(ut,ut,ut,ae)}return q.kind==="composite"?this._calculate(q.evaluate({zoom:Math.floor(ae.zoom)-1},be,Ee),q.evaluate({zoom:Math.floor(ae.zoom)},be,Ee),q.evaluate({zoom:Math.floor(ae.zoom)+1},be,Ee),ae):q.value},P.prototype._calculate=function(q,ae,be,Ee){return Ee.zoom>Ee.zoomHistory.lastIntegerZoom?{from:q,to:ae}:{from:be,to:ae}},P.prototype.interpolate=function(q){return q},P}(Ir),ho=function(A){this.specification=A};ho.prototype.possiblyEvaluate=function(A,P,q,ae){if(A.value!==void 0){if(A.expression.kind==="constant"){var be=A.expression.evaluate(P,null,{},q,ae);return this._calculate(be,be,be,P)}return this._calculate(A.expression.evaluate(new ri(Math.floor(P.zoom-1),P)),A.expression.evaluate(new ri(Math.floor(P.zoom),P)),A.expression.evaluate(new ri(Math.floor(P.zoom+1),P)),P)}},ho.prototype._calculate=function(A,P,q,ae){return ae.zoom>ae.zoomHistory.lastIntegerZoom?{from:A,to:P}:{from:q,to:P}},ho.prototype.interpolate=function(A){return A};var Ga=function(A){this.specification=A};Ga.prototype.possiblyEvaluate=function(A,P,q,ae){return!!A.expression.evaluate(P,null,{},q,ae)},Ga.prototype.interpolate=function(){return!1};var Qi=function(A){for(var P in this.properties=A,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],A){var q=A[P];q.specification.overridable&&this.overridableProperties.push(P);var ae=this.defaultPropertyValues[P]=new Vi(q,void 0),be=this.defaultTransitionablePropertyValues[P]=new qa(q);this.defaultTransitioningPropertyValues[P]=be.untransitioned(),this.defaultPossiblyEvaluatedValues[P]=ae.possiblyEvaluate({})}};wr("DataDrivenProperty",Ir),wr("DataConstantProperty",Lr),wr("CrossFadedDataDrivenProperty",rs),wr("CrossFadedProperty",ho),wr("ColorRampProperty",Ga);var zs="-transition",pa=function(A){function P(q,ae){if(A.call(this),this.id=q.id,this.type=q.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},q.type!=="custom"&&(this.metadata=q.metadata,this.minzoom=q.minzoom,this.maxzoom=q.maxzoom,q.type!=="background"&&(this.source=q.source,this.sourceLayer=q["source-layer"],this.filter=q.filter),ae.layout&&(this._unevaluatedLayout=new fo(ae.layout)),ae.paint)){for(var be in this._transitionablePaint=new ha(ae.paint),q.paint)this.setPaintProperty(be,q.paint[be],{validate:!1});for(var Ee in q.layout)this.setLayoutProperty(Ee,q.layout[Ee],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Na(ae.paint)}}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},P.prototype.getLayoutProperty=function(q){return q==="visibility"?this.visibility:this._unevaluatedLayout.getValue(q)},P.prototype.setLayoutProperty=function(q,ae,be){if(be===void 0&&(be={}),ae!=null){var Ee="layers."+this.id+".layout."+q;if(this._validate(ko,Ee,q,ae,be))return}q!=="visibility"?this._unevaluatedLayout.setValue(q,ae):this.visibility=ae},P.prototype.getPaintProperty=function(q){return y(q,zs)?this._transitionablePaint.getTransition(q.slice(0,-zs.length)):this._transitionablePaint.getValue(q)},P.prototype.setPaintProperty=function(q,ae,be){if(be===void 0&&(be={}),ae!=null){var Ee="layers."+this.id+".paint."+q;if(this._validate(ua,Ee,q,ae,be))return!1}if(y(q,zs))return this._transitionablePaint.setTransition(q.slice(0,-zs.length),ae||void 0),!1;var Ne=this._transitionablePaint._values[q],Qe=Ne.property.specification["property-type"]==="cross-faded-data-driven",ut=Ne.value.isDataDriven(),wt=Ne.value;this._transitionablePaint.setValue(q,ae),this._handleSpecialPaintPropertyUpdate(q);var Lt=this._transitionablePaint._values[q].value;return Lt.isDataDriven()||ut||Qe||this._handleOverridablePaintPropertyUpdate(q,wt,Lt)},P.prototype._handleSpecialPaintPropertyUpdate=function(q){},P.prototype._handleOverridablePaintPropertyUpdate=function(q,ae,be){return!1},P.prototype.isHidden=function(q){return!!(this.minzoom&&q<this.minzoom)||!!(this.maxzoom&&q>=this.maxzoom)||this.visibility==="none"},P.prototype.updateTransitions=function(q){this._transitioningPaint=this._transitionablePaint.transitioned(q,this._transitioningPaint)},P.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},P.prototype.recalculate=function(q,ae){q.getCrossfadeParameters&&(this._crossfadeParameters=q.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(q,void 0,ae)),this.paint=this._transitioningPaint.possiblyEvaluate(q,void 0,ae)},P.prototype.serialize=function(){var q={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(q.layout=q.layout||{},q.layout.visibility=this.visibility),m(q,function(ae,be){return!(ae===void 0||be==="layout"&&!Object.keys(ae).length||be==="paint"&&!Object.keys(ae).length)})},P.prototype._validate=function(q,ae,be,Ee,Ne){return Ne===void 0&&(Ne={}),(!Ne||Ne.validate!==!1)&&za(this,q.call(Xi,{key:ae,layerType:this.type,objectKey:be,value:Ee,styleSpec:Se,style:{glyphs:!0,sprite:!0}}))},P.prototype.is3D=function(){return!1},P.prototype.isTileClipped=function(){return!1},P.prototype.hasOffscreenPass=function(){return!1},P.prototype.resize=function(){},P.prototype.isStateDependent=function(){for(var q in this.paint._values){var ae=this.paint.get(q);if(ae instanceof $i&&Wo(ae.property.specification)&&(ae.value.kind==="source"||ae.value.kind==="composite")&&ae.value.isStateDependent)return!0}return!1},P}(st),is={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},po=function(A,P){this._structArray=A,this._pos1=P*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},li=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function di(A,P){P===void 0&&(P=1);var q=0,ae=0;return{members:A.map(function(be){var Ee,Ne=(Ee=be.type,is[Ee].BYTES_PER_ELEMENT),Qe=q=Rs(q,Math.max(P,Ne)),ut=be.components||1;return ae=Math.max(ae,Ne),q+=Ne*ut,{name:be.name,type:be.type,components:ut,offset:Qe}}),size:Rs(q,Math.max(ae,P)),alignment:P}}function Rs(A,P){return Math.ceil(A/P)*P}li.serialize=function(A,P){return A._trim(),P&&(A.isTransferred=!0,P.push(A.arrayBuffer)),{length:A.length,arrayBuffer:A.arrayBuffer}},li.deserialize=function(A){var P=Object.create(this.prototype);return P.arrayBuffer=A.arrayBuffer,P.length=A.length,P.capacity=A.arrayBuffer.byteLength/P.bytesPerElement,P._refreshViews(),P},li.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},li.prototype.clear=function(){this.length=0},li.prototype.resize=function(A){this.reserve(A),this.length=A},li.prototype.reserve=function(A){if(A>this.capacity){this.capacity=Math.max(A,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var P=this.uint8;this._refreshViews(),P&&this.uint8.set(P)}},li.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Xe=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(q,ae){var be=this.length;return this.resize(be+1),this.emplace(be,q,ae)},P.prototype.emplace=function(q,ae,be){var Ee=2*q;return this.int16[Ee+0]=ae,this.int16[Ee+1]=be,q},P}(li);Xe.prototype.bytesPerElement=4,wr("StructArrayLayout2i4",Xe);var $e=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(q,ae,be,Ee){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,q,ae,be,Ee)},P.prototype.emplace=function(q,ae,be,Ee,Ne){var Qe=4*q;return this.int16[Qe+0]=ae,this.int16[Qe+1]=be,this.int16[Qe+2]=Ee,this.int16[Qe+3]=Ne,q},P}(li);$e.prototype.bytesPerElement=8,wr("StructArrayLayout4i8",$e);var at=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(q,ae,be,Ee,Ne,Qe){var ut=this.length;return this.resize(ut+1),this.emplace(ut,q,ae,be,Ee,Ne,Qe)},P.prototype.emplace=function(q,ae,be,Ee,Ne,Qe,ut){var wt=6*q;return this.int16[wt+0]=ae,this.int16[wt+1]=be,this.int16[wt+2]=Ee,this.int16[wt+3]=Ne,this.int16[wt+4]=Qe,this.int16[wt+5]=ut,q},P}(li);at.prototype.bytesPerElement=12,wr("StructArrayLayout2i4i12",at);var ft=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(q,ae,be,Ee,Ne,Qe){var ut=this.length;return this.resize(ut+1),this.emplace(ut,q,ae,be,Ee,Ne,Qe)},P.prototype.emplace=function(q,ae,be,Ee,Ne,Qe,ut){var wt=4*q,Lt=8*q;return this.int16[wt+0]=ae,this.int16[wt+1]=be,this.uint8[Lt+4]=Ee,this.uint8[Lt+5]=Ne,this.uint8[Lt+6]=Qe,this.uint8[Lt+7]=ut,q},P}(li);ft.prototype.bytesPerElement=8,wr("StructArrayLayout2i4ub8",ft);var _t=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(q,ae,be,Ee,Ne,Qe,ut,wt,Lt,Bt){var Ht=this.length;return this.resize(Ht+1),this.emplace(Ht,q,ae,be,Ee,Ne,Qe,ut,wt,Lt,Bt)},P.prototype.emplace=function(q,ae,be,Ee,Ne,Qe,ut,wt,Lt,Bt,Ht){var Vt=9*q,an=18*q;return this.uint16[Vt+0]=ae,this.uint16[Vt+1]=be,this.uint16[Vt+2]=Ee,this.uint16[Vt+3]=Ne,this.uint16[Vt+4]=Qe,this.uint16[Vt+5]=ut,this.uint16[Vt+6]=wt,this.uint16[Vt+7]=Lt,this.uint8[an+16]=Bt,this.uint8[an+17]=Ht,q},P}(li);_t.prototype.bytesPerElement=18,wr("StructArrayLayout8ui2ub18",_t);var xt=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(q,ae,be,Ee,Ne,Qe,ut,wt,Lt,Bt,Ht,Vt){var an=this.length;return this.resize(an+1),this.emplace(an,q,ae,be,Ee,Ne,Qe,ut,wt,Lt,Bt,Ht,Vt)},P.prototype.emplace=function(q,ae,be,Ee,Ne,Qe,ut,wt,Lt,Bt,Ht,Vt,an){var yn=12*q;return this.int16[yn+0]=ae,this.int16[yn+1]=be,this.int16[yn+2]=Ee,this.int16[yn+3]=Ne,this.uint16[yn+4]=Qe,this.uint16[yn+5]=ut,this.uint16[yn+6]=wt,this.uint16[yn+7]=Lt,this.int16[yn+8]=Bt,this.int16[yn+9]=Ht,this.int16[yn+10]=Vt,this.int16[yn+11]=an,q},P}(li);xt.prototype.bytesPerElement=24,wr("StructArrayLayout4i4ui4i24",xt);var B=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(q,ae,be){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,q,ae,be)},P.prototype.emplace=function(q,ae,be,Ee){var Ne=3*q;return this.float32[Ne+0]=ae,this.float32[Ne+1]=be,this.float32[Ne+2]=Ee,q},P}(li);B.prototype.bytesPerElement=12,wr("StructArrayLayout3f12",B);var G=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(q){var ae=this.length;return this.resize(ae+1),this.emplace(ae,q)},P.prototype.emplace=function(q,ae){var be=1*q;return this.uint32[be+0]=ae,q},P}(li);G.prototype.bytesPerElement=4,wr("StructArrayLayout1ul4",G);var H=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(q,ae,be,Ee,Ne,Qe,ut,wt,Lt){var Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,q,ae,be,Ee,Ne,Qe,ut,wt,Lt)},P.prototype.emplace=function(q,ae,be,Ee,Ne,Qe,ut,wt,Lt,Bt){var Ht=10*q,Vt=5*q;return this.int16[Ht+0]=ae,this.int16[Ht+1]=be,this.int16[Ht+2]=Ee,this.int16[Ht+3]=Ne,this.int16[Ht+4]=Qe,this.int16[Ht+5]=ut,this.uint32[Vt+3]=wt,this.uint16[Ht+8]=Lt,this.uint16[Ht+9]=Bt,q},P}(li);H.prototype.bytesPerElement=20,wr("StructArrayLayout6i1ul2ui20",H);var te=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(q,ae,be,Ee,Ne,Qe){var ut=this.length;return this.resize(ut+1),this.emplace(ut,q,ae,be,Ee,Ne,Qe)},P.prototype.emplace=function(q,ae,be,Ee,Ne,Qe,ut){var wt=6*q;return this.int16[wt+0]=ae,this.int16[wt+1]=be,this.int16[wt+2]=Ee,this.int16[wt+3]=Ne,this.int16[wt+4]=Qe,this.int16[wt+5]=ut,q},P}(li);te.prototype.bytesPerElement=12,wr("StructArrayLayout2i2i2i12",te);var me=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(q,ae,be,Ee,Ne){var Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,q,ae,be,Ee,Ne)},P.prototype.emplace=function(q,ae,be,Ee,Ne,Qe){var ut=4*q,wt=8*q;return this.float32[ut+0]=ae,this.float32[ut+1]=be,this.float32[ut+2]=Ee,this.int16[wt+6]=Ne,this.int16[wt+7]=Qe,q},P}(li);me.prototype.bytesPerElement=16,wr("StructArrayLayout2f1f2i16",me);var Le=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(q,ae,be,Ee){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,q,ae,be,Ee)},P.prototype.emplace=function(q,ae,be,Ee,Ne){var Qe=12*q,ut=3*q;return this.uint8[Qe+0]=ae,this.uint8[Qe+1]=be,this.float32[ut+1]=Ee,this.float32[ut+2]=Ne,q},P}(li);Le.prototype.bytesPerElement=12,wr("StructArrayLayout2ub2f12",Le);var Be=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(q,ae,be){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,q,ae,be)},P.prototype.emplace=function(q,ae,be,Ee){var Ne=3*q;return this.uint16[Ne+0]=ae,this.uint16[Ne+1]=be,this.uint16[Ne+2]=Ee,q},P}(li);Be.prototype.bytesPerElement=6,wr("StructArrayLayout3ui6",Be);var qe=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(q,ae,be,Ee,Ne,Qe,ut,wt,Lt,Bt,Ht,Vt,an,yn,On,Pn,Nn){var Vn=this.length;return this.resize(Vn+1),this.emplace(Vn,q,ae,be,Ee,Ne,Qe,ut,wt,Lt,Bt,Ht,Vt,an,yn,On,Pn,Nn)},P.prototype.emplace=function(q,ae,be,Ee,Ne,Qe,ut,wt,Lt,Bt,Ht,Vt,an,yn,On,Pn,Nn,Vn){var Zn=24*q,Qn=12*q,rr=48*q;return this.int16[Zn+0]=ae,this.int16[Zn+1]=be,this.uint16[Zn+2]=Ee,this.uint16[Zn+3]=Ne,this.uint32[Qn+2]=Qe,this.uint32[Qn+3]=ut,this.uint32[Qn+4]=wt,this.uint16[Zn+10]=Lt,this.uint16[Zn+11]=Bt,this.uint16[Zn+12]=Ht,this.float32[Qn+7]=Vt,this.float32[Qn+8]=an,this.uint8[rr+36]=yn,this.uint8[rr+37]=On,this.uint8[rr+38]=Pn,this.uint32[Qn+10]=Nn,this.int16[Zn+22]=Vn,q},P}(li);qe.prototype.bytesPerElement=48,wr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",qe);var et=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(q,ae,be,Ee,Ne,Qe,ut,wt,Lt,Bt,Ht,Vt,an,yn,On,Pn,Nn,Vn,Zn,Qn,rr,_r,dr,Mr,Cr,Ur,Or,jr){var zr=this.length;return this.resize(zr+1),this.emplace(zr,q,ae,be,Ee,Ne,Qe,ut,wt,Lt,Bt,Ht,Vt,an,yn,On,Pn,Nn,Vn,Zn,Qn,rr,_r,dr,Mr,Cr,Ur,Or,jr)},P.prototype.emplace=function(q,ae,be,Ee,Ne,Qe,ut,wt,Lt,Bt,Ht,Vt,an,yn,On,Pn,Nn,Vn,Zn,Qn,rr,_r,dr,Mr,Cr,Ur,Or,jr,zr){var Pr=34*q,Jr=17*q;return this.int16[Pr+0]=ae,this.int16[Pr+1]=be,this.int16[Pr+2]=Ee,this.int16[Pr+3]=Ne,this.int16[Pr+4]=Qe,this.int16[Pr+5]=ut,this.int16[Pr+6]=wt,this.int16[Pr+7]=Lt,this.uint16[Pr+8]=Bt,this.uint16[Pr+9]=Ht,this.uint16[Pr+10]=Vt,this.uint16[Pr+11]=an,this.uint16[Pr+12]=yn,this.uint16[Pr+13]=On,this.uint16[Pr+14]=Pn,this.uint16[Pr+15]=Nn,this.uint16[Pr+16]=Vn,this.uint16[Pr+17]=Zn,this.uint16[Pr+18]=Qn,this.uint16[Pr+19]=rr,this.uint16[Pr+20]=_r,this.uint16[Pr+21]=dr,this.uint16[Pr+22]=Mr,this.uint32[Jr+12]=Cr,this.float32[Jr+13]=Ur,this.float32[Jr+14]=Or,this.float32[Jr+15]=jr,this.float32[Jr+16]=zr,q},P}(li);et.prototype.bytesPerElement=68,wr("StructArrayLayout8i15ui1ul4f68",et);var mt=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(q){var ae=this.length;return this.resize(ae+1),this.emplace(ae,q)},P.prototype.emplace=function(q,ae){var be=1*q;return this.float32[be+0]=ae,q},P}(li);mt.prototype.bytesPerElement=4,wr("StructArrayLayout1f4",mt);var bt=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(q,ae,be){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,q,ae,be)},P.prototype.emplace=function(q,ae,be,Ee){var Ne=3*q;return this.int16[Ne+0]=ae,this.int16[Ne+1]=be,this.int16[Ne+2]=Ee,q},P}(li);bt.prototype.bytesPerElement=6,wr("StructArrayLayout3i6",bt);var ee=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(q,ae,be){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,q,ae,be)},P.prototype.emplace=function(q,ae,be,Ee){var Ne=2*q,Qe=4*q;return this.uint32[Ne+0]=ae,this.uint16[Qe+2]=be,this.uint16[Qe+3]=Ee,q},P}(li);ee.prototype.bytesPerElement=8,wr("StructArrayLayout1ul2ui8",ee);var he=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(q,ae){var be=this.length;return this.resize(be+1),this.emplace(be,q,ae)},P.prototype.emplace=function(q,ae,be){var Ee=2*q;return this.uint16[Ee+0]=ae,this.uint16[Ee+1]=be,q},P}(li);he.prototype.bytesPerElement=4,wr("StructArrayLayout2ui4",he);var Me=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(q){var ae=this.length;return this.resize(ae+1),this.emplace(ae,q)},P.prototype.emplace=function(q,ae){var be=1*q;return this.uint16[be+0]=ae,q},P}(li);Me.prototype.bytesPerElement=2,wr("StructArrayLayout1ui2",Me);var Oe=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(q,ae){var be=this.length;return this.resize(be+1),this.emplace(be,q,ae)},P.prototype.emplace=function(q,ae,be){var Ee=2*q;return this.float32[Ee+0]=ae,this.float32[Ee+1]=be,q},P}(li);Oe.prototype.bytesPerElement=8,wr("StructArrayLayout2f8",Oe);var Fe=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(q,ae,be,Ee){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,q,ae,be,Ee)},P.prototype.emplace=function(q,ae,be,Ee,Ne){var Qe=4*q;return this.float32[Qe+0]=ae,this.float32[Qe+1]=be,this.float32[Qe+2]=Ee,this.float32[Qe+3]=Ne,q},P}(li);Fe.prototype.bytesPerElement=16,wr("StructArrayLayout4f16",Fe);var Ue=function(A){function P(){A.apply(this,arguments)}A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P;var q={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return q.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},q.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},q.x1.get=function(){return this._structArray.int16[this._pos2+2]},q.y1.get=function(){return this._structArray.int16[this._pos2+3]},q.x2.get=function(){return this._structArray.int16[this._pos2+4]},q.y2.get=function(){return this._structArray.int16[this._pos2+5]},q.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},q.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},q.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},q.anchorPoint.get=function(){return new t(this.anchorPointX,this.anchorPointY)},Object.defineProperties(P.prototype,q),P}(po);Ue.prototype.size=20;var Ge=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.get=function(q){return new Ue(this,q)},P}(H);wr("CollisionBoxArray",Ge);var Je=function(A){function P(){A.apply(this,arguments)}A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P;var q={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return q.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},q.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},q.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},q.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},q.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},q.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},q.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},q.segment.get=function(){return this._structArray.uint16[this._pos2+10]},q.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},q.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},q.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},q.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},q.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},q.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},q.placedOrientation.set=function(ae){this._structArray.uint8[this._pos1+37]=ae},q.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},q.hidden.set=function(ae){this._structArray.uint8[this._pos1+38]=ae},q.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},q.crossTileID.set=function(ae){this._structArray.uint32[this._pos4+10]=ae},q.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(P.prototype,q),P}(po);Je.prototype.size=48;var rt=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.get=function(q){return new Je(this,q)},P}(qe);wr("PlacedSymbolArray",rt);var ct=function(A){function P(){A.apply(this,arguments)}A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P;var q={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return q.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},q.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},q.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},q.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},q.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},q.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},q.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},q.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},q.key.get=function(){return this._structArray.uint16[this._pos2+8]},q.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},q.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},q.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},q.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},q.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},q.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},q.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},q.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},q.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},q.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},q.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},q.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},q.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},q.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},q.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},q.crossTileID.set=function(ae){this._structArray.uint32[this._pos4+12]=ae},q.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},q.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},q.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},q.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(P.prototype,q),P}(po);ct.prototype.size=68;var Ct=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.get=function(q){return new ct(this,q)},P}(et);wr("SymbolInstanceArray",Ct);var Dt=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.getoffsetX=function(q){return this.float32[1*q+0]},P}(mt);wr("GlyphOffsetArray",Dt);var Ft=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.getx=function(q){return this.int16[3*q+0]},P.prototype.gety=function(q){return this.int16[3*q+1]},P.prototype.gettileUnitDistanceFromAnchor=function(q){return this.int16[3*q+2]},P}(bt);wr("SymbolLineVertexArray",Ft);var Wt=function(A){function P(){A.apply(this,arguments)}A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P;var q={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return q.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},q.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},q.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(P.prototype,q),P}(po);Wt.prototype.size=8;var cn=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.get=function(q){return new Wt(this,q)},P}(ee);wr("FeatureIndexArray",cn);var Xt=di([{name:"a_pos",components:2,type:"Int16"}],4).members,tn=function(A){A===void 0&&(A=[]),this.segments=A};function $t(A,P){return 256*(A=a(Math.floor(A),0,255))+a(Math.floor(P),0,255)}tn.prototype.prepareSegment=function(A,P,q,ae){var be=this.segments[this.segments.length-1];return A>tn.MAX_VERTEX_ARRAY_LENGTH&&M("Max vertices per segment is "+tn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+A),(!be||be.vertexLength+A>tn.MAX_VERTEX_ARRAY_LENGTH||be.sortKey!==ae)&&(be={vertexOffset:P.length,primitiveOffset:q.length,vertexLength:0,primitiveLength:0},ae!==void 0&&(be.sortKey=ae),this.segments.push(be)),be},tn.prototype.get=function(){return this.segments},tn.prototype.destroy=function(){for(var A=0,P=this.segments;A<P.length;A+=1){var q=P[A];for(var ae in q.vaos)q.vaos[ae].destroy()}},tn.simpleSegment=function(A,P,q,ae){return new tn([{vertexOffset:A,primitiveOffset:P,vertexLength:q,primitiveLength:ae,vaos:{},sortKey:0}])},tn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,wr("SegmentVector",tn);var _n=di([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),dn=T(function(A){A.exports=function(P,q){var ae,be,Ee,Ne,Qe,ut,wt,Lt;for(ae=3&P.length,be=P.length-ae,Ee=q,Qe=3432918353,ut=461845907,Lt=0;Lt<be;)wt=255&P.charCodeAt(Lt)|(255&P.charCodeAt(++Lt))<<8|(255&P.charCodeAt(++Lt))<<16|(255&P.charCodeAt(++Lt))<<24,++Lt,Ee=27492+(65535&(Ne=5*(65535&(Ee=(Ee^=wt=(65535&(wt=(wt=(65535&wt)*Qe+(((wt>>>16)*Qe&65535)<<16)&4294967295)<<15|wt>>>17))*ut+(((wt>>>16)*ut&65535)<<16)&4294967295)<<13|Ee>>>19))+((5*(Ee>>>16)&65535)<<16)&4294967295))+((58964+(Ne>>>16)&65535)<<16);switch(wt=0,ae){case 3:wt^=(255&P.charCodeAt(Lt+2))<<16;case 2:wt^=(255&P.charCodeAt(Lt+1))<<8;case 1:Ee^=wt=(65535&(wt=(wt=(65535&(wt^=255&P.charCodeAt(Lt)))*Qe+(((wt>>>16)*Qe&65535)<<16)&4294967295)<<15|wt>>>17))*ut+(((wt>>>16)*ut&65535)<<16)&4294967295}return Ee^=P.length,Ee=2246822507*(65535&(Ee^=Ee>>>16))+((2246822507*(Ee>>>16)&65535)<<16)&4294967295,Ee=3266489909*(65535&(Ee^=Ee>>>13))+((3266489909*(Ee>>>16)&65535)<<16)&4294967295,(Ee^=Ee>>>16)>>>0}}),Qt=T(function(A){A.exports=function(P,q){for(var ae,be=P.length,Ee=q^be,Ne=0;be>=4;)ae=1540483477*(65535&(ae=255&P.charCodeAt(Ne)|(255&P.charCodeAt(++Ne))<<8|(255&P.charCodeAt(++Ne))<<16|(255&P.charCodeAt(++Ne))<<24))+((1540483477*(ae>>>16)&65535)<<16),Ee=1540483477*(65535&Ee)+((1540483477*(Ee>>>16)&65535)<<16)^(ae=1540483477*(65535&(ae^=ae>>>24))+((1540483477*(ae>>>16)&65535)<<16)),be-=4,++Ne;switch(be){case 3:Ee^=(255&P.charCodeAt(Ne+2))<<16;case 2:Ee^=(255&P.charCodeAt(Ne+1))<<8;case 1:Ee=1540483477*(65535&(Ee^=255&P.charCodeAt(Ne)))+((1540483477*(Ee>>>16)&65535)<<16)}return Ee=1540483477*(65535&(Ee^=Ee>>>13))+((1540483477*(Ee>>>16)&65535)<<16),(Ee^=Ee>>>15)>>>0}}),Cn=dn,Dn=dn,Jn=Qt;Cn.murmur3=Dn,Cn.murmur2=Jn;var Kn=function(){this.ids=[],this.positions=[],this.indexed=!1};Kn.prototype.add=function(A,P,q,ae){this.ids.push(yr(A)),this.positions.push(P,q,ae)},Kn.prototype.getPositions=function(A){for(var P=yr(A),q=0,ae=this.ids.length-1;q<ae;){var be=q+ae>>1;this.ids[be]>=P?ae=be:q=be+1}for(var Ee=[];this.ids[q]===P;){var Ne=this.positions[3*q],Qe=this.positions[3*q+1],ut=this.positions[3*q+2];Ee.push({index:Ne,start:Qe,end:ut}),q++}return Ee},Kn.serialize=function(A,P){var q=new Float64Array(A.ids),ae=new Uint32Array(A.positions);return fr(q,ae,0,q.length-1),P&&P.push(q.buffer,ae.buffer),{ids:q,positions:ae}},Kn.deserialize=function(A){var P=new Kn;return P.ids=A.ids,P.positions=A.positions,P.indexed=!0,P};var vr=Math.pow(2,53)-1;function yr(A){var P=+A;return!isNaN(P)&&P<=vr?P:Cn(String(A))}function fr(A,P,q,ae){for(;q<ae;){for(var be=A[q+ae>>1],Ee=q-1,Ne=ae+1;;){do Ee++;while(A[Ee]<be);do Ne--;while(A[Ne]>be);if(Ee>=Ne)break;gr(A,Ee,Ne),gr(P,3*Ee,3*Ne),gr(P,3*Ee+1,3*Ne+1),gr(P,3*Ee+2,3*Ne+2)}Ne-q<ae-Ne?(fr(A,P,q,Ne),q=Ne+1):(fr(A,P,Ne+1,ae),ae=Ne)}}function gr(A,P,q){var ae=A[P];A[P]=A[q],A[q]=ae}wr("FeaturePositionMap",Kn);var Sr=function(A,P){this.gl=A.gl,this.location=P},Vr=function(A){function P(q,ae){A.call(this,q,ae),this.current=0}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.set=function(q){this.current!==q&&(this.current=q,this.gl.uniform1i(this.location,q))},P}(Sr),Hr=function(A){function P(q,ae){A.call(this,q,ae),this.current=0}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.set=function(q){this.current!==q&&(this.current=q,this.gl.uniform1f(this.location,q))},P}(Sr),pr=function(A){function P(q,ae){A.call(this,q,ae),this.current=[0,0]}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.set=function(q){q[0]===this.current[0]&&q[1]===this.current[1]||(this.current=q,this.gl.uniform2f(this.location,q[0],q[1]))},P}(Sr),Er=function(A){function P(q,ae){A.call(this,q,ae),this.current=[0,0,0]}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.set=function(q){q[0]===this.current[0]&&q[1]===this.current[1]&&q[2]===this.current[2]||(this.current=q,this.gl.uniform3f(this.location,q[0],q[1],q[2]))},P}(Sr),Fr=function(A){function P(q,ae){A.call(this,q,ae),this.current=[0,0,0,0]}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.set=function(q){q[0]===this.current[0]&&q[1]===this.current[1]&&q[2]===this.current[2]&&q[3]===this.current[3]||(this.current=q,this.gl.uniform4f(this.location,q[0],q[1],q[2],q[3]))},P}(Sr),Dr=function(A){function P(q,ae){A.call(this,q,ae),this.current=sn.transparent}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.set=function(q){q.r===this.current.r&&q.g===this.current.g&&q.b===this.current.b&&q.a===this.current.a||(this.current=q,this.gl.uniform4f(this.location,q.r,q.g,q.b,q.a))},P}(Sr),Yr=new Float32Array(16),Zr=function(A){function P(q,ae){A.call(this,q,ae),this.current=Yr}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.set=function(q){if(q[12]!==this.current[12]||q[0]!==this.current[0])return this.current=q,void this.gl.uniformMatrix4fv(this.location,!1,q);for(var ae=1;ae<16;ae++)if(q[ae]!==this.current[ae]){this.current=q,this.gl.uniformMatrix4fv(this.location,!1,q);break}},P}(Sr);function $r(A){return[$t(255*A.r,255*A.g),$t(255*A.b,255*A.a)]}var fi=function(A,P,q){this.value=A,this.uniformNames=P.map(function(ae){return"u_"+ae}),this.type=q};fi.prototype.setUniform=function(A,P,q){A.set(q.constantOr(this.value))},fi.prototype.getBinding=function(A,P,q){return this.type==="color"?new Dr(A,P):new Hr(A,P)};var bi=function(A,P){this.uniformNames=P.map(function(q){return"u_"+q}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};bi.prototype.setConstantPatternPositions=function(A,P){this.pixelRatioFrom=P.pixelRatio,this.pixelRatioTo=A.pixelRatio,this.patternFrom=P.tlbr,this.patternTo=A.tlbr},bi.prototype.setUniform=function(A,P,q,ae){var be=ae==="u_pattern_to"?this.patternTo:ae==="u_pattern_from"?this.patternFrom:ae==="u_pixel_ratio_to"?this.pixelRatioTo:ae==="u_pixel_ratio_from"?this.pixelRatioFrom:null;be&&A.set(be)},bi.prototype.getBinding=function(A,P,q){return q.substr(0,9)==="u_pattern"?new Fr(A,P):new Hr(A,P)};var gi=function(A,P,q,ae){this.expression=A,this.type=q,this.maxValue=0,this.paintVertexAttributes=P.map(function(be){return{name:"a_"+be,type:"Float32",components:q==="color"?2:1,offset:0}}),this.paintVertexArray=new ae};gi.prototype.populatePaintArray=function(A,P,q,ae,be){var Ee=this.paintVertexArray.length,Ne=this.expression.evaluate(new ri(0),P,{},ae,[],be);this.paintVertexArray.resize(A),this._setPaintValue(Ee,A,Ne)},gi.prototype.updatePaintArray=function(A,P,q,ae){var be=this.expression.evaluate({zoom:0},q,ae);this._setPaintValue(A,P,be)},gi.prototype._setPaintValue=function(A,P,q){if(this.type==="color")for(var ae=$r(q),be=A;be<P;be++)this.paintVertexArray.emplace(be,ae[0],ae[1]);else{for(var Ee=A;Ee<P;Ee++)this.paintVertexArray.emplace(Ee,q);this.maxValue=Math.max(this.maxValue,Math.abs(q))}},gi.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},gi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var ui=function(A,P,q,ae,be,Ee){this.expression=A,this.uniformNames=P.map(function(Ne){return"u_"+Ne+"_t"}),this.type=q,this.useIntegerZoom=ae,this.zoom=be,this.maxValue=0,this.paintVertexAttributes=P.map(function(Ne){return{name:"a_"+Ne,type:"Float32",components:q==="color"?4:2,offset:0}}),this.paintVertexArray=new Ee};ui.prototype.populatePaintArray=function(A,P,q,ae,be){var Ee=this.expression.evaluate(new ri(this.zoom),P,{},ae,[],be),Ne=this.expression.evaluate(new ri(this.zoom+1),P,{},ae,[],be),Qe=this.paintVertexArray.length;this.paintVertexArray.resize(A),this._setPaintValue(Qe,A,Ee,Ne)},ui.prototype.updatePaintArray=function(A,P,q,ae){var be=this.expression.evaluate({zoom:this.zoom},q,ae),Ee=this.expression.evaluate({zoom:this.zoom+1},q,ae);this._setPaintValue(A,P,be,Ee)},ui.prototype._setPaintValue=function(A,P,q,ae){if(this.type==="color")for(var be=$r(q),Ee=$r(ae),Ne=A;Ne<P;Ne++)this.paintVertexArray.emplace(Ne,be[0],be[1],Ee[0],Ee[1]);else{for(var Qe=A;Qe<P;Qe++)this.paintVertexArray.emplace(Qe,q,ae);this.maxValue=Math.max(this.maxValue,Math.abs(q),Math.abs(ae))}},ui.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ui.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ui.prototype.setUniform=function(A,P){var q=this.useIntegerZoom?Math.floor(P.zoom):P.zoom,ae=a(this.expression.interpolationFactor(q,this.zoom,this.zoom+1),0,1);A.set(ae)},ui.prototype.getBinding=function(A,P,q){return new Hr(A,P)};var hi=function(A,P,q,ae,be,Ee){this.expression=A,this.type=P,this.useIntegerZoom=q,this.zoom=ae,this.layerId=Ee,this.zoomInPaintVertexArray=new be,this.zoomOutPaintVertexArray=new be};hi.prototype.populatePaintArray=function(A,P,q){var ae=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(A),this.zoomOutPaintVertexArray.resize(A),this._setPaintValues(ae,A,P.patterns&&P.patterns[this.layerId],q)},hi.prototype.updatePaintArray=function(A,P,q,ae,be){this._setPaintValues(A,P,q.patterns&&q.patterns[this.layerId],be)},hi.prototype._setPaintValues=function(A,P,q,ae){if(ae&&q){var be=q.min,Ee=q.mid,Ne=q.max,Qe=ae[be],ut=ae[Ee],wt=ae[Ne];if(Qe&&ut&&wt)for(var Lt=A;Lt<P;Lt++)this.zoomInPaintVertexArray.emplace(Lt,ut.tl[0],ut.tl[1],ut.br[0],ut.br[1],Qe.tl[0],Qe.tl[1],Qe.br[0],Qe.br[1],ut.pixelRatio,Qe.pixelRatio),this.zoomOutPaintVertexArray.emplace(Lt,ut.tl[0],ut.tl[1],ut.br[0],ut.br[1],wt.tl[0],wt.tl[1],wt.br[0],wt.br[1],ut.pixelRatio,wt.pixelRatio)}},hi.prototype.upload=function(A){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=A.createVertexBuffer(this.zoomInPaintVertexArray,_n.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=A.createVertexBuffer(this.zoomOutPaintVertexArray,_n.members,this.expression.isStateDependent))},hi.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var vi=function(A,P,q,ae){this.binders={},this.layoutAttributes=ae,this._buffers=[];var be=[];for(var Ee in A.paint._values)if(q(Ee)){var Ne=A.paint.get(Ee);if(Ne instanceof $i&&Wo(Ne.property.specification)){var Qe=So(Ee,A.type),ut=Ne.value,wt=Ne.property.specification.type,Lt=Ne.property.useIntegerZoom,Bt=Ne.property.specification["property-type"],Ht=Bt==="cross-faded"||Bt==="cross-faded-data-driven";if(ut.kind==="constant")this.binders[Ee]=Ht?new bi(ut.value,Qe):new fi(ut.value,Qe,wt),be.push("/u_"+Ee);else if(ut.kind==="source"||Ht){var Vt=Bi(Ee,wt,"source");this.binders[Ee]=Ht?new hi(ut,wt,Lt,P,Vt,A.id):new gi(ut,Qe,wt,Vt),be.push("/a_"+Ee)}else{var an=Bi(Ee,wt,"composite");this.binders[Ee]=new ui(ut,Qe,wt,Lt,P,an),be.push("/z_"+Ee)}}}this.cacheKey=be.sort().join("")};vi.prototype.getMaxValue=function(A){var P=this.binders[A];return P instanceof gi||P instanceof ui?P.maxValue:0},vi.prototype.populatePaintArrays=function(A,P,q,ae,be){for(var Ee in this.binders){var Ne=this.binders[Ee];(Ne instanceof gi||Ne instanceof ui||Ne instanceof hi)&&Ne.populatePaintArray(A,P,q,ae,be)}},vi.prototype.setConstantPatternPositions=function(A,P){for(var q in this.binders){var ae=this.binders[q];ae instanceof bi&&ae.setConstantPatternPositions(A,P)}},vi.prototype.updatePaintArrays=function(A,P,q,ae,be){var Ee=!1;for(var Ne in A)for(var Qe=0,ut=P.getPositions(Ne);Qe<ut.length;Qe+=1){var wt=ut[Qe],Lt=q.feature(wt.index);for(var Bt in this.binders){var Ht=this.binders[Bt];if((Ht instanceof gi||Ht instanceof ui||Ht instanceof hi)&&Ht.expression.isStateDependent===!0){var Vt=ae.paint.get(Bt);Ht.expression=Vt.value,Ht.updatePaintArray(wt.start,wt.end,Lt,A[Ne],be),Ee=!0}}}return Ee},vi.prototype.defines=function(){var A=[];for(var P in this.binders){var q=this.binders[P];(q instanceof fi||q instanceof bi)&&A.push.apply(A,q.uniformNames.map(function(ae){return"#define HAS_UNIFORM_"+ae}))}return A},vi.prototype.getPaintVertexBuffers=function(){return this._buffers},vi.prototype.getUniforms=function(A,P){var q=[];for(var ae in this.binders){var be=this.binders[ae];if(be instanceof fi||be instanceof bi||be instanceof ui)for(var Ee=0,Ne=be.uniformNames;Ee<Ne.length;Ee+=1){var Qe=Ne[Ee];if(P[Qe]){var ut=be.getBinding(A,P[Qe],Qe);q.push({name:Qe,property:ae,binding:ut})}}}return q},vi.prototype.setUniforms=function(A,P,q,ae){for(var be=0,Ee=P;be<Ee.length;be+=1){var Ne=Ee[be],Qe=Ne.name,ut=Ne.property,wt=Ne.binding;this.binders[ut].setUniform(wt,ae,q.get(ut),Qe)}},vi.prototype.updatePaintBuffers=function(A){for(var P in this._buffers=[],this.binders){var q=this.binders[P];if(A&&q instanceof hi){var ae=A.fromScale===2?q.zoomInPaintVertexBuffer:q.zoomOutPaintVertexBuffer;ae&&this._buffers.push(ae)}else(q instanceof gi||q instanceof ui)&&q.paintVertexBuffer&&this._buffers.push(q.paintVertexBuffer)}},vi.prototype.upload=function(A){for(var P in this.binders){var q=this.binders[P];(q instanceof gi||q instanceof ui||q instanceof hi)&&q.upload(A)}this.updatePaintBuffers()},vi.prototype.destroy=function(){for(var A in this.binders){var P=this.binders[A];(P instanceof gi||P instanceof ui||P instanceof hi)&&P.destroy()}};var Li=function(A,P,q,ae){ae===void 0&&(ae=function(){return!0}),this.programConfigurations={};for(var be=0,Ee=P;be<Ee.length;be+=1){var Ne=Ee[be];this.programConfigurations[Ne.id]=new vi(Ne,q,ae,A)}this.needsUpload=!1,this._featureMap=new Kn,this._bufferOffset=0};function So(A,P){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[A]||[A.replace(P+"-","").replace(/-/g,"_")]}function Bi(A,P,q){var ae={color:{source:Oe,composite:Fe},number:{source:mt,composite:Oe}},be=function(Ee){return{"line-pattern":{source:_t,composite:_t},"fill-pattern":{source:_t,composite:_t},"fill-extrusion-pattern":{source:_t,composite:_t}}[Ee]}(A);return be&&be[q]||ae[P][q]}Li.prototype.populatePaintArrays=function(A,P,q,ae,be,Ee){for(var Ne in this.programConfigurations)this.programConfigurations[Ne].populatePaintArrays(A,P,ae,be,Ee);P.id!==void 0&&this._featureMap.add(P.id,q,this._bufferOffset,A),this._bufferOffset=A,this.needsUpload=!0},Li.prototype.updatePaintArrays=function(A,P,q,ae){for(var be=0,Ee=q;be<Ee.length;be+=1){var Ne=Ee[be];this.needsUpload=this.programConfigurations[Ne.id].updatePaintArrays(A,this._featureMap,P,Ne,ae)||this.needsUpload}},Li.prototype.get=function(A){return this.programConfigurations[A]},Li.prototype.upload=function(A){if(this.needsUpload){for(var P in this.programConfigurations)this.programConfigurations[P].upload(A);this.needsUpload=!1}},Li.prototype.destroy=function(){for(var A in this.programConfigurations)this.programConfigurations[A].destroy()},wr("ConstantBinder",fi),wr("CrossFadedConstantBinder",bi),wr("SourceExpressionBinder",gi),wr("CrossFadedCompositeBinder",hi),wr("CompositeExpressionBinder",ui),wr("ProgramConfiguration",vi,{omit:["_buffers"]}),wr("ProgramConfigurationSet",Li);var Nr=8192,Zi,ea=(Zi=15,{min:-1*Math.pow(2,Zi-1),max:Math.pow(2,Zi-1)-1});function Mi(A){for(var P=Nr/A.extent,q=A.loadGeometry(),ae=0;ae<q.length;ae++)for(var be=q[ae],Ee=0;Ee<be.length;Ee++){var Ne=be[Ee];Ne.x=Math.round(Ne.x*P),Ne.y=Math.round(Ne.y*P),(Ne.x<ea.min||Ne.x>ea.max||Ne.y<ea.min||Ne.y>ea.max)&&(M("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Ne.x=a(Ne.x,ea.min,ea.max),Ne.y=a(Ne.y,ea.min,ea.max))}return q}function Za(A,P,q,ae,be){A.emplaceBack(2*P+(ae+1)/2,2*q+(be+1)/2)}var Wr=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(P){return P.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new Xe,this.indexArray=new Be,this.segments=new tn,this.programConfigurations=new Li(Xt,A.layers,A.zoom),this.stateDependentLayerIds=this.layers.filter(function(P){return P.isStateDependent()}).map(function(P){return P.id})};function Ni(A,P){for(var q=0;q<A.length;q++)if(cl(P,A[q]))return!0;for(var ae=0;ae<P.length;ae++)if(cl(A,P[ae]))return!0;return!!Xl(A,P)}function da(A,P,q){return!!cl(A,P)||!!ul(P,A,q)}function Ds(A,P){if(A.length===1)return yl(P,A[0]);for(var q=0;q<P.length;q++)for(var ae=P[q],be=0;be<ae.length;be++)if(cl(A,ae[be]))return!0;for(var Ee=0;Ee<A.length;Ee++)if(yl(P,A[Ee]))return!0;for(var Ne=0;Ne<P.length;Ne++)if(Xl(A,P[Ne]))return!0;return!1}function oc(A,P,q){if(A.length>1){if(Xl(A,P))return!0;for(var ae=0;ae<P.length;ae++)if(ul(P[ae],A,q))return!0}for(var be=0;be<A.length;be++)if(ul(A[be],P,q))return!0;return!1}function Xl(A,P){if(A.length===0||P.length===0)return!1;for(var q=0;q<A.length-1;q++)for(var ae=A[q],be=A[q+1],Ee=0;Ee<P.length-1;Ee++)if(sc(ae,be,P[Ee],P[Ee+1]))return!0;return!1}function sc(A,P,q,ae){return _(A,q,ae)!==_(P,q,ae)&&_(A,P,q)!==_(A,P,ae)}function ul(A,P,q){var ae=q*q;if(P.length===1)return A.distSqr(P[0])<ae;for(var be=1;be<P.length;be++)if(_u(A,P[be-1],P[be])<ae)return!0;return!1}function _u(A,P,q){var ae=P.distSqr(q);if(ae===0)return A.distSqr(P);var be=((A.x-P.x)*(q.x-P.x)+(A.y-P.y)*(q.y-P.y))/ae;return be<0?A.distSqr(P):be>1?A.distSqr(q):A.distSqr(q.sub(P)._mult(be)._add(P))}function yl(A,P){for(var q,ae,be,Ee=!1,Ne=0;Ne<A.length;Ne++)for(var Qe=0,ut=(q=A[Ne]).length-1;Qe<q.length;ut=Qe++)ae=q[Qe],be=q[ut],ae.y>P.y!=be.y>P.y&&P.x<(be.x-ae.x)*(P.y-ae.y)/(be.y-ae.y)+ae.x&&(Ee=!Ee);return Ee}function cl(A,P){for(var q=!1,ae=0,be=A.length-1;ae<A.length;be=ae++){var Ee=A[ae],Ne=A[be];Ee.y>P.y!=Ne.y>P.y&&P.x<(Ne.x-Ee.x)*(P.y-Ee.y)/(Ne.y-Ee.y)+Ee.x&&(q=!q)}return q}function lc(A,P,q){var ae=q[0],be=q[2];if(A.x<ae.x&&P.x<ae.x||A.x>be.x&&P.x>be.x||A.y<ae.y&&P.y<ae.y||A.y>be.y&&P.y>be.y)return!1;var Ee=_(A,P,q[0]);return Ee!==_(A,P,q[1])||Ee!==_(A,P,q[2])||Ee!==_(A,P,q[3])}function $s(A,P,q){var ae=P.paint.get(A).value;return ae.kind==="constant"?ae.value:q.programConfigurations.get(P.id).getMaxValue(A)}function wu(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function Tu(A,P,q,ae,be){if(!P[0]&&!P[1])return A;var Ee=t.convert(P)._mult(be);q==="viewport"&&Ee._rotate(-ae);for(var Ne=[],Qe=0;Qe<A.length;Qe++){var ut=A[Qe];Ne.push(ut.sub(Ee))}return Ne}Wr.prototype.populate=function(A,P,q){var ae=this.layers[0],be=[],Ee=null;ae.type==="circle"&&(Ee=ae.layout.get("circle-sort-key"));for(var Ne=0,Qe=A;Ne<Qe.length;Ne+=1){var ut=Qe[Ne],wt=ut.feature,Lt=ut.id,Bt=ut.index,Ht=ut.sourceLayerIndex,Vt=this.layers[0]._featureFilter.needGeometry,an={type:wt.type,id:Lt,properties:wt.properties,geometry:Vt?Mi(wt):[]};if(this.layers[0]._featureFilter.filter(new ri(this.zoom),an,q)){Vt||(an.geometry=Mi(wt));var yn=Ee?Ee.evaluate(an,{},q):void 0,On={id:Lt,properties:wt.properties,type:wt.type,sourceLayerIndex:Ht,index:Bt,geometry:an.geometry,patterns:{},sortKey:yn};be.push(On)}}Ee&&be.sort(function(Mr,Cr){return Mr.sortKey-Cr.sortKey});for(var Pn=0,Nn=be;Pn<Nn.length;Pn+=1){var Vn=Nn[Pn],Zn=Vn,Qn=Zn.geometry,rr=Zn.index,_r=Zn.sourceLayerIndex,dr=A[rr].feature;this.addFeature(Vn,Qn,rr,q),P.featureIndex.insert(dr,Qn,rr,_r,this.index)}},Wr.prototype.update=function(A,P,q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,P,this.stateDependentLayers,q)},Wr.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Wr.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Wr.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Xt),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},Wr.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Wr.prototype.addFeature=function(A,P,q,ae){for(var be=0,Ee=P;be<Ee.length;be+=1)for(var Ne=0,Qe=Ee[be];Ne<Qe.length;Ne+=1){var ut=Qe[Ne],wt=ut.x,Lt=ut.y;if(!(wt<0||wt>=Nr||Lt<0||Lt>=Nr)){var Bt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,A.sortKey),Ht=Bt.vertexLength;Za(this.layoutVertexArray,wt,Lt,-1,-1),Za(this.layoutVertexArray,wt,Lt,1,-1),Za(this.layoutVertexArray,wt,Lt,1,1),Za(this.layoutVertexArray,wt,Lt,-1,1),this.indexArray.emplaceBack(Ht,Ht+1,Ht+2),this.indexArray.emplaceBack(Ht,Ht+3,Ht+2),Bt.vertexLength+=4,Bt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,q,{},ae)},wr("CircleBucket",Wr,{omit:["layers"]});var Ph=new Qi({"circle-sort-key":new Ir(Se.layout_circle["circle-sort-key"])}),Oh={paint:new Qi({"circle-radius":new Ir(Se.paint_circle["circle-radius"]),"circle-color":new Ir(Se.paint_circle["circle-color"]),"circle-blur":new Ir(Se.paint_circle["circle-blur"]),"circle-opacity":new Ir(Se.paint_circle["circle-opacity"]),"circle-translate":new Lr(Se.paint_circle["circle-translate"]),"circle-translate-anchor":new Lr(Se.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Lr(Se.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Lr(Se.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ir(Se.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ir(Se.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ir(Se.paint_circle["circle-stroke-opacity"])}),layout:Ph},Eo=typeof Float32Array<"u"?Float32Array:Array;function uc(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function Wc(A,P,q){var ae=P[0],be=P[1],Ee=P[2],Ne=P[3],Qe=P[4],ut=P[5],wt=P[6],Lt=P[7],Bt=P[8],Ht=P[9],Vt=P[10],an=P[11],yn=P[12],On=P[13],Pn=P[14],Nn=P[15],Vn=q[0],Zn=q[1],Qn=q[2],rr=q[3];return A[0]=Vn*ae+Zn*Qe+Qn*Bt+rr*yn,A[1]=Vn*be+Zn*ut+Qn*Ht+rr*On,A[2]=Vn*Ee+Zn*wt+Qn*Vt+rr*Pn,A[3]=Vn*Ne+Zn*Lt+Qn*an+rr*Nn,Vn=q[4],Zn=q[5],Qn=q[6],rr=q[7],A[4]=Vn*ae+Zn*Qe+Qn*Bt+rr*yn,A[5]=Vn*be+Zn*ut+Qn*Ht+rr*On,A[6]=Vn*Ee+Zn*wt+Qn*Vt+rr*Pn,A[7]=Vn*Ne+Zn*Lt+Qn*an+rr*Nn,Vn=q[8],Zn=q[9],Qn=q[10],rr=q[11],A[8]=Vn*ae+Zn*Qe+Qn*Bt+rr*yn,A[9]=Vn*be+Zn*ut+Qn*Ht+rr*On,A[10]=Vn*Ee+Zn*wt+Qn*Vt+rr*Pn,A[11]=Vn*Ne+Zn*Lt+Qn*an+rr*Nn,Vn=q[12],Zn=q[13],Qn=q[14],rr=q[15],A[12]=Vn*ae+Zn*Qe+Qn*Bt+rr*yn,A[13]=Vn*be+Zn*ut+Qn*Ht+rr*On,A[14]=Vn*Ee+Zn*wt+Qn*Vt+rr*Pn,A[15]=Vn*Ne+Zn*Lt+Qn*an+rr*Nn,A}Math.hypot||(Math.hypot=function(){for(var A=arguments,P=0,q=arguments.length;q--;)P+=A[q]*A[q];return Math.sqrt(P)});var Ih=Wc,ku,zh=function(A,P,q){return A[0]=P[0]-q[0],A[1]=P[1]-q[1],A[2]=P[2]-q[2],A};function Au(A,P,q){var ae=P[0],be=P[1],Ee=P[2],Ne=P[3];return A[0]=q[0]*ae+q[4]*be+q[8]*Ee+q[12]*Ne,A[1]=q[1]*ae+q[5]*be+q[9]*Ee+q[13]*Ne,A[2]=q[2]*ae+q[6]*be+q[10]*Ee+q[14]*Ne,A[3]=q[3]*ae+q[7]*be+q[11]*Ee+q[15]*Ne,A}ku=new Eo(3),Eo!=Float32Array&&(ku[0]=0,ku[1]=0,ku[2]=0),function(){var A=new Eo(4);Eo!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0,A[3]=0)}();var Rh=function(A){var P=A[0],q=A[1];return P*P+q*q},Dh=(function(){var A=new Eo(2);Eo!=Float32Array&&(A[0]=0,A[1]=0)}(),function(A){function P(q){A.call(this,q,Oh)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.createBucket=function(q){return new Wr(q)},P.prototype.queryRadius=function(q){var ae=q;return $s("circle-radius",this,ae)+$s("circle-stroke-width",this,ae)+wu(this.paint.get("circle-translate"))},P.prototype.queryIntersectsFeature=function(q,ae,be,Ee,Ne,Qe,ut,wt){for(var Lt=Tu(q,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Qe.angle,ut),Bt=this.paint.get("circle-radius").evaluate(ae,be)+this.paint.get("circle-stroke-width").evaluate(ae,be),Ht=this.paint.get("circle-pitch-alignment")==="map",Vt=Ht?Lt:function(_r,dr){return _r.map(function(Mr){return Xc(Mr,dr)})}(Lt,wt),an=Ht?Bt*ut:Bt,yn=0,On=Ee;yn<On.length;yn+=1)for(var Pn=0,Nn=On[yn];Pn<Nn.length;Pn+=1){var Vn=Nn[Pn],Zn=Ht?Vn:Xc(Vn,wt),Qn=an,rr=Au([],[Vn.x,Vn.y,0,1],wt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Qn*=rr[3]/Qe.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Qn*=Qe.cameraToCenterDistance/rr[3]),da(Vt,Zn,Qn))return!0}return!1},P}(pa));function Xc(A,P){var q=Au([],[A.x,A.y,0,1],P);return new t(q[0]/q[3],q[1]/q[3])}var Jc=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P}(Wr);function cc(A,P,q,ae){var be=P.width,Ee=P.height;if(ae){if(ae instanceof Uint8ClampedArray)ae=new Uint8Array(ae.buffer);else if(ae.length!==be*Ee*q)throw new RangeError("mismatched image size")}else ae=new Uint8Array(be*Ee*q);return A.width=be,A.height=Ee,A.data=ae,A}function Kc(A,P,q){var ae=P.width,be=P.height;if(ae!==A.width||be!==A.height){var Ee=cc({},{width:ae,height:be},q);fc(A,Ee,{x:0,y:0},{x:0,y:0},{width:Math.min(A.width,ae),height:Math.min(A.height,be)},q),A.width=ae,A.height=be,A.data=Ee.data}}function fc(A,P,q,ae,be,Ee){if(be.width===0||be.height===0)return P;if(be.width>A.width||be.height>A.height||q.x>A.width-be.width||q.y>A.height-be.height)throw new RangeError("out of range source coordinates for image copy");if(be.width>P.width||be.height>P.height||ae.x>P.width-be.width||ae.y>P.height-be.height)throw new RangeError("out of range destination coordinates for image copy");for(var Ne=A.data,Qe=P.data,ut=0;ut<be.height;ut++)for(var wt=((q.y+ut)*A.width+q.x)*Ee,Lt=((ae.y+ut)*P.width+ae.x)*Ee,Bt=0;Bt<be.width*Ee;Bt++)Qe[Lt+Bt]=Ne[wt+Bt];return P}wr("HeatmapBucket",Jc,{omit:["layers"]});var xl=function(A,P){cc(this,A,1,P)};xl.prototype.resize=function(A){Kc(this,A,1)},xl.prototype.clone=function(){return new xl({width:this.width,height:this.height},new Uint8Array(this.data))},xl.copy=function(A,P,q,ae,be){fc(A,P,q,ae,be,1)};var eo=function(A,P){cc(this,A,4,P)};eo.prototype.resize=function(A){Kc(this,A,4)},eo.prototype.replace=function(A,P){P?this.data.set(A):A instanceof Uint8ClampedArray?this.data=new Uint8Array(A.buffer):this.data=A},eo.prototype.clone=function(){return new eo({width:this.width,height:this.height},new Uint8Array(this.data))},eo.copy=function(A,P,q,ae,be){fc(A,P,q,ae,be,4)},wr("AlphaImage",xl),wr("RGBAImage",eo);var Fh={paint:new Qi({"heatmap-radius":new Ir(Se.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ir(Se.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Lr(Se.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ga(Se.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Lr(Se.paint_heatmap["heatmap-opacity"])})};function $c(A,P){for(var q=new Uint8Array(1024),ae={},be=0,Ee=0;be<256;be++,Ee+=4){ae[P]=be/255;var Ne=A.evaluate(ae);q[Ee+0]=Math.floor(255*Ne.r/Ne.a),q[Ee+1]=Math.floor(255*Ne.g/Ne.a),q[Ee+2]=Math.floor(255*Ne.b/Ne.a),q[Ee+3]=Math.floor(255*Ne.a)}return new eo({width:256,height:1},q)}var Bh=function(A){function P(q){A.call(this,q,Fh),this._updateColorRamp()}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.createBucket=function(q){return new Jc(q)},P.prototype._handleSpecialPaintPropertyUpdate=function(q){q==="heatmap-color"&&this._updateColorRamp()},P.prototype._updateColorRamp=function(){var q=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=$c(q,"heatmapDensity"),this.colorRampTexture=null},P.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},P.prototype.queryRadius=function(){return 0},P.prototype.queryIntersectsFeature=function(){return!1},P.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},P}(pa),Nh={paint:new Qi({"hillshade-illumination-direction":new Lr(Se.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Lr(Se.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Lr(Se.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Lr(Se.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Lr(Se.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Lr(Se.paint_hillshade["hillshade-accent-color"])})},jh=function(A){function P(q){A.call(this,q,Nh)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},P}(pa),Qc=di([{name:"a_pos",components:2,type:"Int16"}],4).members,hc=Mu,Uh=Mu;function Mu(A,P,q){q=q||2;var ae,be,Ee,Ne,Qe,ut,wt,Lt=P&&P.length,Bt=Lt?P[0]*q:A.length,Ht=ef(A,0,Bt,q,!0),Vt=[];if(!Ht||Ht.next===Ht.prev)return Vt;if(Lt&&(Ht=function(yn,On,Pn,Nn){var Vn,Zn,Qn,rr=[];for(Vn=0,Zn=On.length;Vn<Zn;Vn++)(Qn=ef(yn,On[Vn]*Nn,Vn<Zn-1?On[Vn+1]*Nn:yn.length,Nn,!1))===Qn.next&&(Qn.steiner=!0),rr.push(Xh(Qn));for(rr.sort(Zh),Vn=0;Vn<rr.length;Vn++)Yh(rr[Vn],Pn),Pn=fl(Pn,Pn.next);return Pn}(A,P,Ht,q)),A.length>80*q){ae=Ee=A[0],be=Ne=A[1];for(var an=q;an<Bt;an+=q)(Qe=A[an])<ae&&(ae=Qe),(ut=A[an+1])<be&&(be=ut),Qe>Ee&&(Ee=Qe),ut>Ne&&(Ne=ut);wt=(wt=Math.max(Ee-ae,Ne-be))!==0?1/wt:0}return Jl(Ht,Vt,q,ae,be,wt),Vt}function ef(A,P,q,ae,be){var Ee,Ne;if(be===gc(A,P,q,ae)>0)for(Ee=P;Ee<q;Ee+=ae)Ne=rf(Ee,A[Ee],A[Ee+1],Ne);else for(Ee=q-ae;Ee>=P;Ee-=ae)Ne=rf(Ee,A[Ee],A[Ee+1],Ne);return Ne&&Su(Ne,Ne.next)&&($l(Ne),Ne=Ne.next),Ne}function fl(A,P){if(!A)return A;P||(P=A);var q,ae=A;do if(q=!1,ae.steiner||!Su(ae,ae.next)&&ta(ae.prev,ae,ae.next)!==0)ae=ae.next;else{if($l(ae),(ae=P=ae.prev)===ae.next)break;q=!0}while(q||ae!==P);return P}function Jl(A,P,q,ae,be,Ee,Ne){if(A){!Ne&&Ee&&function(Lt,Bt,Ht,Vt){var an=Lt;do an.z===null&&(an.z=pc(an.x,an.y,Bt,Ht,Vt)),an.prevZ=an.prev,an.nextZ=an.next,an=an.next;while(an!==Lt);an.prevZ.nextZ=null,an.prevZ=null,function(yn){var On,Pn,Nn,Vn,Zn,Qn,rr,_r,dr=1;do{for(Pn=yn,yn=null,Zn=null,Qn=0;Pn;){for(Qn++,Nn=Pn,rr=0,On=0;On<dr&&(rr++,Nn=Nn.nextZ);On++);for(_r=dr;rr>0||_r>0&&Nn;)rr!==0&&(_r===0||!Nn||Pn.z<=Nn.z)?(Vn=Pn,Pn=Pn.nextZ,rr--):(Vn=Nn,Nn=Nn.nextZ,_r--),Zn?Zn.nextZ=Vn:yn=Vn,Vn.prevZ=Zn,Zn=Vn;Pn=Nn}Zn.nextZ=null,dr*=2}while(Qn>1)}(an)}(A,ae,be,Ee);for(var Qe,ut,wt=A;A.prev!==A.next;)if(Qe=A.prev,ut=A.next,Ee?Hh(A,ae,be,Ee):Vh(A))P.push(Qe.i/q),P.push(A.i/q),P.push(ut.i/q),$l(A),A=ut.next,wt=ut.next;else if((A=ut)===wt){Ne?Ne===1?Jl(A=qh(fl(A),P,q),P,q,ae,be,Ee,2):Ne===2&&Gh(A,P,q,ae,be,Ee):Jl(fl(A),P,q,ae,be,Ee,1);break}}}function Vh(A){var P=A.prev,q=A,ae=A.next;if(ta(P,q,ae)>=0)return!1;for(var be=A.next.next;be!==A.prev;){if(Ll(P.x,P.y,q.x,q.y,ae.x,ae.y,be.x,be.y)&&ta(be.prev,be,be.next)>=0)return!1;be=be.next}return!0}function Hh(A,P,q,ae){var be=A.prev,Ee=A,Ne=A.next;if(ta(be,Ee,Ne)>=0)return!1;for(var Qe=be.x<Ee.x?be.x<Ne.x?be.x:Ne.x:Ee.x<Ne.x?Ee.x:Ne.x,ut=be.y<Ee.y?be.y<Ne.y?be.y:Ne.y:Ee.y<Ne.y?Ee.y:Ne.y,wt=be.x>Ee.x?be.x>Ne.x?be.x:Ne.x:Ee.x>Ne.x?Ee.x:Ne.x,Lt=be.y>Ee.y?be.y>Ne.y?be.y:Ne.y:Ee.y>Ne.y?Ee.y:Ne.y,Bt=pc(Qe,ut,P,q,ae),Ht=pc(wt,Lt,P,q,ae),Vt=A.prevZ,an=A.nextZ;Vt&&Vt.z>=Bt&&an&&an.z<=Ht;){if(Vt!==A.prev&&Vt!==A.next&&Ll(be.x,be.y,Ee.x,Ee.y,Ne.x,Ne.y,Vt.x,Vt.y)&&ta(Vt.prev,Vt,Vt.next)>=0||(Vt=Vt.prevZ,an!==A.prev&&an!==A.next&&Ll(be.x,be.y,Ee.x,Ee.y,Ne.x,Ne.y,an.x,an.y)&&ta(an.prev,an,an.next)>=0))return!1;an=an.nextZ}for(;Vt&&Vt.z>=Bt;){if(Vt!==A.prev&&Vt!==A.next&&Ll(be.x,be.y,Ee.x,Ee.y,Ne.x,Ne.y,Vt.x,Vt.y)&&ta(Vt.prev,Vt,Vt.next)>=0)return!1;Vt=Vt.prevZ}for(;an&&an.z<=Ht;){if(an!==A.prev&&an!==A.next&&Ll(be.x,be.y,Ee.x,Ee.y,Ne.x,Ne.y,an.x,an.y)&&ta(an.prev,an,an.next)>=0)return!1;an=an.nextZ}return!0}function qh(A,P,q){var ae=A;do{var be=ae.prev,Ee=ae.next.next;!Su(be,Ee)&&tf(be,ae,ae.next,Ee)&&Kl(be,Ee)&&Kl(Ee,be)&&(P.push(be.i/q),P.push(ae.i/q),P.push(Ee.i/q),$l(ae),$l(ae.next),ae=A=Ee),ae=ae.next}while(ae!==A);return fl(ae)}function Gh(A,P,q,ae,be,Ee){var Ne=A;do{for(var Qe=Ne.next.next;Qe!==Ne.prev;){if(Ne.i!==Qe.i&&Jh(Ne,Qe)){var ut=nf(Ne,Qe);return Ne=fl(Ne,Ne.next),ut=fl(ut,ut.next),Jl(Ne,P,q,ae,be,Ee),void Jl(ut,P,q,ae,be,Ee)}Qe=Qe.next}Ne=Ne.next}while(Ne!==A)}function Zh(A,P){return A.x-P.x}function Yh(A,P){if(P=function(ae,be){var Ee,Ne=be,Qe=ae.x,ut=ae.y,wt=-1/0;do{if(ut<=Ne.y&&ut>=Ne.next.y&&Ne.next.y!==Ne.y){var Lt=Ne.x+(ut-Ne.y)*(Ne.next.x-Ne.x)/(Ne.next.y-Ne.y);if(Lt<=Qe&&Lt>wt){if(wt=Lt,Lt===Qe){if(ut===Ne.y)return Ne;if(ut===Ne.next.y)return Ne.next}Ee=Ne.x<Ne.next.x?Ne:Ne.next}}Ne=Ne.next}while(Ne!==be);if(!Ee)return null;if(Qe===wt)return Ee;var Bt,Ht=Ee,Vt=Ee.x,an=Ee.y,yn=1/0;Ne=Ee;do Qe>=Ne.x&&Ne.x>=Vt&&Qe!==Ne.x&&Ll(ut<an?Qe:wt,ut,Vt,an,ut<an?wt:Qe,ut,Ne.x,Ne.y)&&(Bt=Math.abs(ut-Ne.y)/(Qe-Ne.x),Kl(Ne,ae)&&(Bt<yn||Bt===yn&&(Ne.x>Ee.x||Ne.x===Ee.x&&Wh(Ee,Ne)))&&(Ee=Ne,yn=Bt)),Ne=Ne.next;while(Ne!==Ht);return Ee}(A,P)){var q=nf(P,A);fl(P,P.next),fl(q,q.next)}}function Wh(A,P){return ta(A.prev,A,P.prev)<0&&ta(P.next,A,A.next)<0}function pc(A,P,q,ae,be){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=32767*(A-q)*be)|A<<8))|A<<4))|A<<2))|A<<1))|(P=1431655765&((P=858993459&((P=252645135&((P=16711935&((P=32767*(P-ae)*be)|P<<8))|P<<4))|P<<2))|P<<1))<<1}function Xh(A){var P=A,q=A;do(P.x<q.x||P.x===q.x&&P.y<q.y)&&(q=P),P=P.next;while(P!==A);return q}function Ll(A,P,q,ae,be,Ee,Ne,Qe){return(be-Ne)*(P-Qe)-(A-Ne)*(Ee-Qe)>=0&&(A-Ne)*(ae-Qe)-(q-Ne)*(P-Qe)>=0&&(q-Ne)*(Ee-Qe)-(be-Ne)*(ae-Qe)>=0}function Jh(A,P){return A.next.i!==P.i&&A.prev.i!==P.i&&!function(q,ae){var be=q;do{if(be.i!==q.i&&be.next.i!==q.i&&be.i!==ae.i&&be.next.i!==ae.i&&tf(be,be.next,q,ae))return!0;be=be.next}while(be!==q);return!1}(A,P)&&(Kl(A,P)&&Kl(P,A)&&function(q,ae){var be=q,Ee=!1,Ne=(q.x+ae.x)/2,Qe=(q.y+ae.y)/2;do be.y>Qe!=be.next.y>Qe&&be.next.y!==be.y&&Ne<(be.next.x-be.x)*(Qe-be.y)/(be.next.y-be.y)+be.x&&(Ee=!Ee),be=be.next;while(be!==q);return Ee}(A,P)&&(ta(A.prev,A,P.prev)||ta(A,P.prev,P))||Su(A,P)&&ta(A.prev,A,A.next)>0&&ta(P.prev,P,P.next)>0)}function ta(A,P,q){return(P.y-A.y)*(q.x-P.x)-(P.x-A.x)*(q.y-P.y)}function Su(A,P){return A.x===P.x&&A.y===P.y}function tf(A,P,q,ae){var be=Lu(ta(A,P,q)),Ee=Lu(ta(A,P,ae)),Ne=Lu(ta(q,ae,A)),Qe=Lu(ta(q,ae,P));return be!==Ee&&Ne!==Qe||!(be!==0||!Eu(A,q,P))||!(Ee!==0||!Eu(A,ae,P))||!(Ne!==0||!Eu(q,A,ae))||!(Qe!==0||!Eu(q,P,ae))}function Eu(A,P,q){return P.x<=Math.max(A.x,q.x)&&P.x>=Math.min(A.x,q.x)&&P.y<=Math.max(A.y,q.y)&&P.y>=Math.min(A.y,q.y)}function Lu(A){return A>0?1:A<0?-1:0}function Kl(A,P){return ta(A.prev,A,A.next)<0?ta(A,P,A.next)>=0&&ta(A,A.prev,P)>=0:ta(A,P,A.prev)<0||ta(A,A.next,P)<0}function nf(A,P){var q=new dc(A.i,A.x,A.y),ae=new dc(P.i,P.x,P.y),be=A.next,Ee=P.prev;return A.next=P,P.prev=A,q.next=be,be.prev=q,ae.next=q,q.prev=ae,Ee.next=ae,ae.prev=Ee,ae}function rf(A,P,q,ae){var be=new dc(A,P,q);return ae?(be.next=ae.next,be.prev=ae,ae.next.prev=be,ae.next=be):(be.prev=be,be.next=be),be}function $l(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function dc(A,P,q){this.i=A,this.x=P,this.y=q,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function gc(A,P,q,ae){for(var be=0,Ee=P,Ne=q-ae;Ee<q;Ee+=ae)be+=(A[Ne]-A[Ee])*(A[Ee+1]+A[Ne+1]),Ne=Ee;return be}function Kh(A,P,q,ae,be){af(A,P,q||0,ae||A.length-1,be||$h)}function af(A,P,q,ae,be){for(;ae>q;){if(ae-q>600){var Ee=ae-q+1,Ne=P-q+1,Qe=Math.log(Ee),ut=.5*Math.exp(2*Qe/3),wt=.5*Math.sqrt(Qe*ut*(Ee-ut)/Ee)*(Ne-Ee/2<0?-1:1);af(A,P,Math.max(q,Math.floor(P-Ne*ut/Ee+wt)),Math.min(ae,Math.floor(P+(Ee-Ne)*ut/Ee+wt)),be)}var Lt=A[P],Bt=q,Ht=ae;for(Ql(A,q,P),be(A[ae],Lt)>0&&Ql(A,q,ae);Bt<Ht;){for(Ql(A,Bt,Ht),Bt++,Ht--;be(A[Bt],Lt)<0;)Bt++;for(;be(A[Ht],Lt)>0;)Ht--}be(A[q],Lt)===0?Ql(A,q,Ht):Ql(A,++Ht,ae),Ht<=P&&(q=Ht+1),P<=Ht&&(ae=Ht-1)}}function Ql(A,P,q){var ae=A[P];A[P]=A[q],A[q]=ae}function $h(A,P){return A<P?-1:A>P?1:0}function vc(A,P){var q=A.length;if(q<=1)return[A];for(var ae,be,Ee=[],Ne=0;Ne<q;Ne++){var Qe=E(A[Ne]);Qe!==0&&(A[Ne].area=Math.abs(Qe),be===void 0&&(be=Qe<0),be===Qe<0?(ae&&Ee.push(ae),ae=[A[Ne]]):ae.push(A[Ne]))}if(ae&&Ee.push(ae),P>1)for(var ut=0;ut<Ee.length;ut++)Ee[ut].length<=P||(Kh(Ee[ut],P,1,Ee[ut].length-1,Qh),Ee[ut]=Ee[ut].slice(0,P));return Ee}function Qh(A,P){return P.area-A.area}function mc(A,P,q){for(var ae=q.patternDependencies,be=!1,Ee=0,Ne=P;Ee<Ne.length;Ee+=1){var Qe=Ne[Ee].paint.get(A+"-pattern");Qe.isConstant()||(be=!0);var ut=Qe.constantOr(null);ut&&(be=!0,ae[ut.to]=!0,ae[ut.from]=!0)}return be}function yc(A,P,q,ae,be){for(var Ee=be.patternDependencies,Ne=0,Qe=P;Ne<Qe.length;Ne+=1){var ut=Qe[Ne],wt=ut.paint.get(A+"-pattern").value;if(wt.kind!=="constant"){var Lt=wt.evaluate({zoom:ae-1},q,{},be.availableImages),Bt=wt.evaluate({zoom:ae},q,{},be.availableImages),Ht=wt.evaluate({zoom:ae+1},q,{},be.availableImages);Lt=Lt&&Lt.name?Lt.name:Lt,Bt=Bt&&Bt.name?Bt.name:Bt,Ht=Ht&&Ht.name?Ht.name:Ht,Ee[Lt]=!0,Ee[Bt]=!0,Ee[Ht]=!0,q.patterns[ut.id]={min:Lt,mid:Bt,max:Ht}}}return q}Mu.deviation=function(A,P,q,ae){var be=P&&P.length,Ee=be?P[0]*q:A.length,Ne=Math.abs(gc(A,0,Ee,q));if(be)for(var Qe=0,ut=P.length;Qe<ut;Qe++){var wt=P[Qe]*q,Lt=Qe<ut-1?P[Qe+1]*q:A.length;Ne-=Math.abs(gc(A,wt,Lt,q))}var Bt=0;for(Qe=0;Qe<ae.length;Qe+=3){var Ht=ae[Qe]*q,Vt=ae[Qe+1]*q,an=ae[Qe+2]*q;Bt+=Math.abs((A[Ht]-A[an])*(A[Vt+1]-A[Ht+1])-(A[Ht]-A[Vt])*(A[an+1]-A[Ht+1]))}return Ne===0&&Bt===0?0:Math.abs((Bt-Ne)/Ne)},Mu.flatten=function(A){for(var P=A[0][0].length,q={vertices:[],holes:[],dimensions:P},ae=0,be=0;be<A.length;be++){for(var Ee=0;Ee<A[be].length;Ee++)for(var Ne=0;Ne<P;Ne++)q.vertices.push(A[be][Ee][Ne]);be>0&&(ae+=A[be-1].length,q.holes.push(ae))}return q},hc.default=Uh;var bs=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(P){return P.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Xe,this.indexArray=new Be,this.indexArray2=new he,this.programConfigurations=new Li(Qc,A.layers,A.zoom),this.segments=new tn,this.segments2=new tn,this.stateDependentLayerIds=this.layers.filter(function(P){return P.isStateDependent()}).map(function(P){return P.id})};bs.prototype.populate=function(A,P,q){this.hasPattern=mc("fill",this.layers,P);for(var ae=this.layers[0].layout.get("fill-sort-key"),be=[],Ee=0,Ne=A;Ee<Ne.length;Ee+=1){var Qe=Ne[Ee],ut=Qe.feature,wt=Qe.id,Lt=Qe.index,Bt=Qe.sourceLayerIndex,Ht=this.layers[0]._featureFilter.needGeometry,Vt={type:ut.type,id:wt,properties:ut.properties,geometry:Ht?Mi(ut):[]};if(this.layers[0]._featureFilter.filter(new ri(this.zoom),Vt,q)){Ht||(Vt.geometry=Mi(ut));var an=ae?ae.evaluate(Vt,{},q,P.availableImages):void 0,yn={id:wt,properties:ut.properties,type:ut.type,sourceLayerIndex:Bt,index:Lt,geometry:Vt.geometry,patterns:{},sortKey:an};be.push(yn)}}ae&&be.sort(function(Mr,Cr){return Mr.sortKey-Cr.sortKey});for(var On=0,Pn=be;On<Pn.length;On+=1){var Nn=Pn[On],Vn=Nn,Zn=Vn.geometry,Qn=Vn.index,rr=Vn.sourceLayerIndex;if(this.hasPattern){var _r=yc("fill",this.layers,Nn,this.zoom,P);this.patternFeatures.push(_r)}else this.addFeature(Nn,Zn,Qn,q,{});var dr=A[Qn].feature;P.featureIndex.insert(dr,Zn,Qn,rr,this.index)}},bs.prototype.update=function(A,P,q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,P,this.stateDependentLayers,q)},bs.prototype.addFeatures=function(A,P,q){for(var ae=0,be=this.patternFeatures;ae<be.length;ae+=1){var Ee=be[ae];this.addFeature(Ee,Ee.geometry,Ee.index,P,q)}},bs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},bs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},bs.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Qc),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.indexBuffer2=A.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(A),this.uploaded=!0},bs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},bs.prototype.addFeature=function(A,P,q,ae,be){for(var Ee=0,Ne=vc(P,500);Ee<Ne.length;Ee+=1){for(var Qe=Ne[Ee],ut=0,wt=0,Lt=Qe;wt<Lt.length;wt+=1)ut+=Lt[wt].length;for(var Bt=this.segments.prepareSegment(ut,this.layoutVertexArray,this.indexArray),Ht=Bt.vertexLength,Vt=[],an=[],yn=0,On=Qe;yn<On.length;yn+=1){var Pn=On[yn];if(Pn.length!==0){Pn!==Qe[0]&&an.push(Vt.length/2);var Nn=this.segments2.prepareSegment(Pn.length,this.layoutVertexArray,this.indexArray2),Vn=Nn.vertexLength;this.layoutVertexArray.emplaceBack(Pn[0].x,Pn[0].y),this.indexArray2.emplaceBack(Vn+Pn.length-1,Vn),Vt.push(Pn[0].x),Vt.push(Pn[0].y);for(var Zn=1;Zn<Pn.length;Zn++)this.layoutVertexArray.emplaceBack(Pn[Zn].x,Pn[Zn].y),this.indexArray2.emplaceBack(Vn+Zn-1,Vn+Zn),Vt.push(Pn[Zn].x),Vt.push(Pn[Zn].y);Nn.vertexLength+=Pn.length,Nn.primitiveLength+=Pn.length}}for(var Qn=hc(Vt,an),rr=0;rr<Qn.length;rr+=3)this.indexArray.emplaceBack(Ht+Qn[rr],Ht+Qn[rr+1],Ht+Qn[rr+2]);Bt.vertexLength+=ut,Bt.primitiveLength+=Qn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,q,be,ae)},wr("FillBucket",bs,{omit:["layers","patternFeatures"]});var ep=new Qi({"fill-sort-key":new Ir(Se.layout_fill["fill-sort-key"])}),tp={paint:new Qi({"fill-antialias":new Lr(Se.paint_fill["fill-antialias"]),"fill-opacity":new Ir(Se.paint_fill["fill-opacity"]),"fill-color":new Ir(Se.paint_fill["fill-color"]),"fill-outline-color":new Ir(Se.paint_fill["fill-outline-color"]),"fill-translate":new Lr(Se.paint_fill["fill-translate"]),"fill-translate-anchor":new Lr(Se.paint_fill["fill-translate-anchor"]),"fill-pattern":new rs(Se.paint_fill["fill-pattern"])}),layout:ep},np=function(A){function P(q){A.call(this,q,tp)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.recalculate=function(q,ae){A.prototype.recalculate.call(this,q,ae);var be=this.paint._values["fill-outline-color"];be.value.kind==="constant"&&be.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},P.prototype.createBucket=function(q){return new bs(q)},P.prototype.queryRadius=function(){return wu(this.paint.get("fill-translate"))},P.prototype.queryIntersectsFeature=function(q,ae,be,Ee,Ne,Qe,ut){return Ds(Tu(q,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Qe.angle,ut),Ee)},P.prototype.isTileClipped=function(){return!0},P}(pa),of=di([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,sf=Cl;function Cl(A,P,q,ae,be){this.properties={},this.extent=q,this.type=0,this._pbf=A,this._geometry=-1,this._keys=ae,this._values=be,A.readFields(rp,this,P)}function rp(A,P,q){A==1?P.id=q.readVarint():A==2?function(ae,be){for(var Ee=ae.readVarint()+ae.pos;ae.pos<Ee;){var Ne=be._keys[ae.readVarint()],Qe=be._values[ae.readVarint()];be.properties[Ne]=Qe}}(q,P):A==3?P.type=q.readVarint():A==4&&(P._geometry=q.pos)}function ip(A){for(var P,q,ae=0,be=0,Ee=A.length,Ne=Ee-1;be<Ee;Ne=be++)P=A[be],ae+=((q=A[Ne]).x-P.x)*(P.y+q.y);return ae}Cl.types=["Unknown","Point","LineString","Polygon"],Cl.prototype.loadGeometry=function(){var A=this._pbf;A.pos=this._geometry;for(var P,q=A.readVarint()+A.pos,ae=1,be=0,Ee=0,Ne=0,Qe=[];A.pos<q;){if(be<=0){var ut=A.readVarint();ae=7&ut,be=ut>>3}if(be--,ae===1||ae===2)Ee+=A.readSVarint(),Ne+=A.readSVarint(),ae===1&&(P&&Qe.push(P),P=[]),P.push(new t(Ee,Ne));else{if(ae!==7)throw new Error("unknown command "+ae);P&&P.push(P[0].clone())}}return P&&Qe.push(P),Qe},Cl.prototype.bbox=function(){var A=this._pbf;A.pos=this._geometry;for(var P=A.readVarint()+A.pos,q=1,ae=0,be=0,Ee=0,Ne=1/0,Qe=-1/0,ut=1/0,wt=-1/0;A.pos<P;){if(ae<=0){var Lt=A.readVarint();q=7&Lt,ae=Lt>>3}if(ae--,q===1||q===2)(be+=A.readSVarint())<Ne&&(Ne=be),be>Qe&&(Qe=be),(Ee+=A.readSVarint())<ut&&(ut=Ee),Ee>wt&&(wt=Ee);else if(q!==7)throw new Error("unknown command "+q)}return[Ne,ut,Qe,wt]},Cl.prototype.toGeoJSON=function(A,P,q){var ae,be,Ee=this.extent*Math.pow(2,q),Ne=this.extent*A,Qe=this.extent*P,ut=this.loadGeometry(),wt=Cl.types[this.type];function Lt(Vt){for(var an=0;an<Vt.length;an++){var yn=Vt[an],On=180-360*(yn.y+Qe)/Ee;Vt[an]=[360*(yn.x+Ne)/Ee-180,360/Math.PI*Math.atan(Math.exp(On*Math.PI/180))-90]}}switch(this.type){case 1:var Bt=[];for(ae=0;ae<ut.length;ae++)Bt[ae]=ut[ae][0];Lt(ut=Bt);break;case 2:for(ae=0;ae<ut.length;ae++)Lt(ut[ae]);break;case 3:for(ut=function(Vt){var an=Vt.length;if(an<=1)return[Vt];for(var yn,On,Pn=[],Nn=0;Nn<an;Nn++){var Vn=ip(Vt[Nn]);Vn!==0&&(On===void 0&&(On=Vn<0),On===Vn<0?(yn&&Pn.push(yn),yn=[Vt[Nn]]):yn.push(Vt[Nn]))}return yn&&Pn.push(yn),Pn}(ut),ae=0;ae<ut.length;ae++)for(be=0;be<ut[ae].length;be++)Lt(ut[ae][be])}ut.length===1?ut=ut[0]:wt="Multi"+wt;var Ht={type:"Feature",geometry:{type:wt,coordinates:ut},properties:this.properties};return"id"in this&&(Ht.id=this.id),Ht};var lf=uf;function uf(A,P){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=A,this._keys=[],this._values=[],this._features=[],A.readFields(ap,this,P),this.length=this._features.length}function ap(A,P,q){A===15?P.version=q.readVarint():A===1?P.name=q.readString():A===5?P.extent=q.readVarint():A===2?P._features.push(q.pos):A===3?P._keys.push(q.readString()):A===4&&P._values.push(function(ae){for(var be=null,Ee=ae.readVarint()+ae.pos;ae.pos<Ee;){var Ne=ae.readVarint()>>3;be=Ne===1?ae.readString():Ne===2?ae.readFloat():Ne===3?ae.readDouble():Ne===4?ae.readVarint64():Ne===5?ae.readVarint():Ne===6?ae.readSVarint():Ne===7?ae.readBoolean():null}return be}(q))}function op(A,P,q){if(A===3){var ae=new lf(q,q.readVarint()+q.pos);ae.length&&(P[ae.name]=ae)}}uf.prototype.feature=function(A){if(A<0||A>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[A];var P=this._pbf.readVarint()+this._pbf.pos;return new sf(this._pbf,P,this.extent,this._keys,this._values)};var Pl={VectorTile:function(A,P){this.layers=A.readFields(op,{},P)},VectorTileFeature:sf,VectorTileLayer:lf},sp=Pl.VectorTileFeature.types,xc=Math.pow(2,13);function eu(A,P,q,ae,be,Ee,Ne,Qe){A.emplaceBack(P,q,2*Math.floor(ae*xc)+Ne,be*xc*2,Ee*xc*2,Math.round(Qe))}var _s=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(P){return P.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new at,this.indexArray=new Be,this.programConfigurations=new Li(of,A.layers,A.zoom),this.segments=new tn,this.stateDependentLayerIds=this.layers.filter(function(P){return P.isStateDependent()}).map(function(P){return P.id})};function lp(A,P){return A.x===P.x&&(A.x<0||A.x>Nr)||A.y===P.y&&(A.y<0||A.y>Nr)}_s.prototype.populate=function(A,P,q){this.features=[],this.hasPattern=mc("fill-extrusion",this.layers,P);for(var ae=0,be=A;ae<be.length;ae+=1){var Ee=be[ae],Ne=Ee.feature,Qe=Ee.id,ut=Ee.index,wt=Ee.sourceLayerIndex,Lt=this.layers[0]._featureFilter.needGeometry,Bt={type:Ne.type,id:Qe,properties:Ne.properties,geometry:Lt?Mi(Ne):[]};if(this.layers[0]._featureFilter.filter(new ri(this.zoom),Bt,q)){var Ht={id:Qe,sourceLayerIndex:wt,index:ut,geometry:Lt?Bt.geometry:Mi(Ne),properties:Ne.properties,type:Ne.type,patterns:{}};Ne.id!==void 0&&(Ht.id=Ne.id),this.hasPattern?this.features.push(yc("fill-extrusion",this.layers,Ht,this.zoom,P)):this.addFeature(Ht,Ht.geometry,ut,q,{}),P.featureIndex.insert(Ne,Ht.geometry,ut,wt,this.index,!0)}}},_s.prototype.addFeatures=function(A,P,q){for(var ae=0,be=this.features;ae<be.length;ae+=1){var Ee=be[ae],Ne=Ee.geometry;this.addFeature(Ee,Ne,Ee.index,P,q)}},_s.prototype.update=function(A,P,q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,P,this.stateDependentLayers,q)},_s.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},_s.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},_s.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,of),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},_s.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},_s.prototype.addFeature=function(A,P,q,ae,be){for(var Ee=0,Ne=vc(P,500);Ee<Ne.length;Ee+=1){for(var Qe=Ne[Ee],ut=0,wt=0,Lt=Qe;wt<Lt.length;wt+=1)ut+=Lt[wt].length;for(var Bt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Ht=0,Vt=Qe;Ht<Vt.length;Ht+=1){var an=Vt[Ht];if(an.length!==0&&!((Jr=an).every(function(qr){return qr.x<0})||Jr.every(function(qr){return qr.x>Nr})||Jr.every(function(qr){return qr.y<0})||Jr.every(function(qr){return qr.y>Nr})))for(var yn=0,On=0;On<an.length;On++){var Pn=an[On];if(On>=1){var Nn=an[On-1];if(!lp(Pn,Nn)){Bt.vertexLength+4>tn.MAX_VERTEX_ARRAY_LENGTH&&(Bt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Vn=Pn.sub(Nn)._perp()._unit(),Zn=Nn.dist(Pn);yn+Zn>32768&&(yn=0),eu(this.layoutVertexArray,Pn.x,Pn.y,Vn.x,Vn.y,0,0,yn),eu(this.layoutVertexArray,Pn.x,Pn.y,Vn.x,Vn.y,0,1,yn),yn+=Zn,eu(this.layoutVertexArray,Nn.x,Nn.y,Vn.x,Vn.y,0,0,yn),eu(this.layoutVertexArray,Nn.x,Nn.y,Vn.x,Vn.y,0,1,yn);var Qn=Bt.vertexLength;this.indexArray.emplaceBack(Qn,Qn+2,Qn+1),this.indexArray.emplaceBack(Qn+1,Qn+2,Qn+3),Bt.vertexLength+=4,Bt.primitiveLength+=2}}}}if(Bt.vertexLength+ut>tn.MAX_VERTEX_ARRAY_LENGTH&&(Bt=this.segments.prepareSegment(ut,this.layoutVertexArray,this.indexArray)),sp[A.type]==="Polygon"){for(var rr=[],_r=[],dr=Bt.vertexLength,Mr=0,Cr=Qe;Mr<Cr.length;Mr+=1){var Ur=Cr[Mr];if(Ur.length!==0){Ur!==Qe[0]&&_r.push(rr.length/2);for(var Or=0;Or<Ur.length;Or++){var jr=Ur[Or];eu(this.layoutVertexArray,jr.x,jr.y,0,0,1,1,0),rr.push(jr.x),rr.push(jr.y)}}}for(var zr=hc(rr,_r),Pr=0;Pr<zr.length;Pr+=3)this.indexArray.emplaceBack(dr+zr[Pr],dr+zr[Pr+2],dr+zr[Pr+1]);Bt.primitiveLength+=zr.length/3,Bt.vertexLength+=ut}}var Jr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,q,be,ae)},wr("FillExtrusionBucket",_s,{omit:["layers","features"]});var up={paint:new Qi({"fill-extrusion-opacity":new Lr(Se["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ir(Se["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Lr(Se["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Lr(Se["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new rs(Se["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ir(Se["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ir(Se["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Lr(Se["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},cp=function(A){function P(q){A.call(this,q,up)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.createBucket=function(q){return new _s(q)},P.prototype.queryRadius=function(){return wu(this.paint.get("fill-extrusion-translate"))},P.prototype.is3D=function(){return!0},P.prototype.queryIntersectsFeature=function(q,ae,be,Ee,Ne,Qe,ut,wt){var Lt=Tu(q,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Qe.angle,ut),Bt=this.paint.get("fill-extrusion-height").evaluate(ae,be),Ht=this.paint.get("fill-extrusion-base").evaluate(ae,be),Vt=function(yn,On,Pn,Nn){for(var Vn=[],Zn=0,Qn=yn;Zn<Qn.length;Zn+=1){var rr=Qn[Zn],_r=[rr.x,rr.y,Nn,1];Au(_r,_r,On),Vn.push(new t(_r[0]/_r[3],_r[1]/_r[3]))}return Vn}(Lt,wt,0,0),an=function(yn,On,Pn,Nn){for(var Vn=[],Zn=[],Qn=Nn[8]*On,rr=Nn[9]*On,_r=Nn[10]*On,dr=Nn[11]*On,Mr=Nn[8]*Pn,Cr=Nn[9]*Pn,Ur=Nn[10]*Pn,Or=Nn[11]*Pn,jr=0,zr=yn;jr<zr.length;jr+=1){for(var Pr=[],Jr=[],qr=0,wi=zr[jr];qr<wi.length;qr+=1){var Br=wi[qr],yi=Br.x,Ai=Br.y,Si=Nn[0]*yi+Nn[4]*Ai+Nn[12],Pi=Nn[1]*yi+Nn[5]*Ai+Nn[13],Ti=Nn[2]*yi+Nn[6]*Ai+Nn[14],ia=Nn[3]*yi+Nn[7]*Ai+Nn[15],Ii=Ti+_r,va=ia+dr,Ca=Si+Mr,wa=Pi+Cr,Ya=Ti+Ur,Ta=ia+Or,oa=new t((Si+Qn)/va,(Pi+rr)/va);oa.z=Ii/va,Pr.push(oa);var ka=new t(Ca/Ta,wa/Ta);ka.z=Ya/Ta,Jr.push(ka)}Vn.push(Pr),Zn.push(Jr)}return[Vn,Zn]}(Ee,Ht,Bt,wt);return function(yn,On,Pn){var Nn=1/0;Ds(Pn,On)&&(Nn=cf(Pn,On[0]));for(var Vn=0;Vn<On.length;Vn++)for(var Zn=On[Vn],Qn=yn[Vn],rr=0;rr<Zn.length-1;rr++){var _r=Zn[rr],dr=Zn[rr+1],Mr=Qn[rr],Cr=[_r,dr,Qn[rr+1],Mr,_r];Ni(Pn,Cr)&&(Nn=Math.min(Nn,cf(Pn,Cr)))}return Nn!==1/0&&Nn}(an[0],an[1],Vt)},P}(pa);function tu(A,P){return A.x*P.x+A.y*P.y}function cf(A,P){if(A.length===1){for(var q,ae=0,be=P[ae++];!q||be.equals(q);)if(!(q=P[ae++]))return 1/0;for(;ae<P.length;ae++){var Ee=P[ae],Ne=A[0],Qe=q.sub(be),ut=Ee.sub(be),wt=Ne.sub(be),Lt=tu(Qe,Qe),Bt=tu(Qe,ut),Ht=tu(ut,ut),Vt=tu(wt,Qe),an=tu(wt,ut),yn=Lt*Ht-Bt*Bt,On=(Ht*Vt-Bt*an)/yn,Pn=(Lt*an-Bt*Vt)/yn,Nn=1-On-Pn,Vn=be.z*Nn+q.z*On+Ee.z*Pn;if(isFinite(Vn))return Vn}return 1/0}for(var Zn=1/0,Qn=0,rr=P;Qn<rr.length;Qn+=1){var _r=rr[Qn];Zn=Math.min(Zn,_r.z)}return Zn}var ff=di([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,fp=Pl.VectorTileFeature.types,hp=Math.cos(Math.PI/180*37.5),hf=Math.pow(2,14)/.5,to=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(P){return P.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ft,this.indexArray=new Be,this.programConfigurations=new Li(ff,A.layers,A.zoom),this.segments=new tn,this.stateDependentLayerIds=this.layers.filter(function(P){return P.isStateDependent()}).map(function(P){return P.id})};to.prototype.populate=function(A,P,q){this.hasPattern=mc("line",this.layers,P);for(var ae=this.layers[0].layout.get("line-sort-key"),be=[],Ee=0,Ne=A;Ee<Ne.length;Ee+=1){var Qe=Ne[Ee],ut=Qe.feature,wt=Qe.id,Lt=Qe.index,Bt=Qe.sourceLayerIndex,Ht=this.layers[0]._featureFilter.needGeometry,Vt={type:ut.type,id:wt,properties:ut.properties,geometry:Ht?Mi(ut):[]};if(this.layers[0]._featureFilter.filter(new ri(this.zoom),Vt,q)){Ht||(Vt.geometry=Mi(ut));var an=ae?ae.evaluate(Vt,{},q):void 0,yn={id:wt,properties:ut.properties,type:ut.type,sourceLayerIndex:Bt,index:Lt,geometry:Vt.geometry,patterns:{},sortKey:an};be.push(yn)}}ae&&be.sort(function(Mr,Cr){return Mr.sortKey-Cr.sortKey});for(var On=0,Pn=be;On<Pn.length;On+=1){var Nn=Pn[On],Vn=Nn,Zn=Vn.geometry,Qn=Vn.index,rr=Vn.sourceLayerIndex;if(this.hasPattern){var _r=yc("line",this.layers,Nn,this.zoom,P);this.patternFeatures.push(_r)}else this.addFeature(Nn,Zn,Qn,q,{});var dr=A[Qn].feature;P.featureIndex.insert(dr,Zn,Qn,rr,this.index)}},to.prototype.update=function(A,P,q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,P,this.stateDependentLayers,q)},to.prototype.addFeatures=function(A,P,q){for(var ae=0,be=this.patternFeatures;ae<be.length;ae+=1){var Ee=be[ae];this.addFeature(Ee,Ee.geometry,Ee.index,P,q)}},to.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},to.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},to.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,ff),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},to.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},to.prototype.addFeature=function(A,P,q,ae,be){for(var Ee=this.layers[0].layout,Ne=Ee.get("line-join").evaluate(A,{}),Qe=Ee.get("line-cap"),ut=Ee.get("line-miter-limit"),wt=Ee.get("line-round-limit"),Lt=0,Bt=P;Lt<Bt.length;Lt+=1){var Ht=Bt[Lt];this.addLine(Ht,A,Ne,Qe,ut,wt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,q,be,ae)},to.prototype.addLine=function(A,P,q,ae,be,Ee){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,P.properties&&P.properties.hasOwnProperty("mapbox_clip_start")&&P.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+P.properties.mapbox_clip_start,this.clipEnd=+P.properties.mapbox_clip_end;for(var Ne=0;Ne<A.length-1;Ne++)this.totalDistance+=A[Ne].dist(A[Ne+1]);this.updateScaledDistance()}for(var Qe=fp[P.type]==="Polygon",ut=A.length;ut>=2&&A[ut-1].equals(A[ut-2]);)ut--;for(var wt=0;wt<ut-1&&A[wt].equals(A[wt+1]);)wt++;if(!(ut<(Qe?3:2))){q==="bevel"&&(be=1.05);var Lt,Bt=this.overscaling<=16?122880/(512*this.overscaling):0,Ht=this.segments.prepareSegment(10*ut,this.layoutVertexArray,this.indexArray),Vt=void 0,an=void 0,yn=void 0,On=void 0;this.e1=this.e2=-1,Qe&&(Lt=A[ut-2],On=A[wt].sub(Lt)._unit()._perp());for(var Pn=wt;Pn<ut;Pn++)if(!(an=Pn===ut-1?Qe?A[wt+1]:void 0:A[Pn+1])||!A[Pn].equals(an)){On&&(yn=On),Lt&&(Vt=Lt),Lt=A[Pn],On=an?an.sub(Lt)._unit()._perp():yn;var Nn=(yn=yn||On).add(On);Nn.x===0&&Nn.y===0||Nn._unit();var Vn=yn.x*On.x+yn.y*On.y,Zn=Nn.x*On.x+Nn.y*On.y,Qn=Zn!==0?1/Zn:1/0,rr=2*Math.sqrt(2-2*Zn),_r=Zn<hp&&Vt&&an,dr=yn.x*On.y-yn.y*On.x>0;if(_r&&Pn>wt){var Mr=Lt.dist(Vt);if(Mr>2*Bt){var Cr=Lt.sub(Lt.sub(Vt)._mult(Bt/Mr)._round());this.updateDistance(Vt,Cr),this.addCurrentVertex(Cr,yn,0,0,Ht),Vt=Cr}}var Ur=Vt&&an,Or=Ur?q:Qe?"butt":ae;if(Ur&&Or==="round"&&(Qn<Ee?Or="miter":Qn<=2&&(Or="fakeround")),Or==="miter"&&Qn>be&&(Or="bevel"),Or==="bevel"&&(Qn>2&&(Or="flipbevel"),Qn<be&&(Or="miter")),Vt&&this.updateDistance(Vt,Lt),Or==="miter")Nn._mult(Qn),this.addCurrentVertex(Lt,Nn,0,0,Ht);else if(Or==="flipbevel"){if(Qn>100)Nn=On.mult(-1);else{var jr=Qn*yn.add(On).mag()/yn.sub(On).mag();Nn._perp()._mult(jr*(dr?-1:1))}this.addCurrentVertex(Lt,Nn,0,0,Ht),this.addCurrentVertex(Lt,Nn.mult(-1),0,0,Ht)}else if(Or==="bevel"||Or==="fakeround"){var zr=-Math.sqrt(Qn*Qn-1),Pr=dr?zr:0,Jr=dr?0:zr;if(Vt&&this.addCurrentVertex(Lt,yn,Pr,Jr,Ht),Or==="fakeround")for(var qr=Math.round(180*rr/Math.PI/20),wi=1;wi<qr;wi++){var Br=wi/qr;if(Br!==.5){var yi=Br-.5;Br+=Br*yi*(Br-1)*((1.0904+Vn*(Vn*(3.55645-1.43519*Vn)-3.2452))*yi*yi+(.848013+Vn*(.215638*Vn-1.06021)))}var Ai=On.sub(yn)._mult(Br)._add(yn)._unit()._mult(dr?-1:1);this.addHalfVertex(Lt,Ai.x,Ai.y,!1,dr,0,Ht)}an&&this.addCurrentVertex(Lt,On,-Pr,-Jr,Ht)}else if(Or==="butt")this.addCurrentVertex(Lt,Nn,0,0,Ht);else if(Or==="square"){var Si=Vt?1:-1;this.addCurrentVertex(Lt,Nn,Si,Si,Ht)}else Or==="round"&&(Vt&&(this.addCurrentVertex(Lt,yn,0,0,Ht),this.addCurrentVertex(Lt,yn,1,1,Ht,!0)),an&&(this.addCurrentVertex(Lt,On,-1,-1,Ht,!0),this.addCurrentVertex(Lt,On,0,0,Ht)));if(_r&&Pn<ut-1){var Pi=Lt.dist(an);if(Pi>2*Bt){var Ti=Lt.add(an.sub(Lt)._mult(Bt/Pi)._round());this.updateDistance(Lt,Ti),this.addCurrentVertex(Ti,On,0,0,Ht),Lt=Ti}}}}},to.prototype.addCurrentVertex=function(A,P,q,ae,be,Ee){Ee===void 0&&(Ee=!1);var Ne=P.x+P.y*q,Qe=P.y-P.x*q,ut=-P.x+P.y*ae,wt=-P.y-P.x*ae;this.addHalfVertex(A,Ne,Qe,Ee,!1,q,be),this.addHalfVertex(A,ut,wt,Ee,!0,-ae,be),this.distance>hf/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(A,P,q,ae,be,Ee))},to.prototype.addHalfVertex=function(A,P,q,ae,be,Ee,Ne){var Qe=A.x,ut=A.y,wt=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((Qe<<1)+(ae?1:0),(ut<<1)+(be?1:0),Math.round(63*P)+128,Math.round(63*q)+128,1+(Ee===0?0:Ee<0?-1:1)|(63&wt)<<2,wt>>6);var Lt=Ne.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Lt),Ne.primitiveLength++),be?this.e2=Lt:this.e1=Lt},to.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(hf-1):this.distance},to.prototype.updateDistance=function(A,P){this.distance+=A.dist(P),this.updateScaledDistance()},wr("LineBucket",to,{omit:["layers","patternFeatures"]});var pp=new Qi({"line-cap":new Lr(Se.layout_line["line-cap"]),"line-join":new Ir(Se.layout_line["line-join"]),"line-miter-limit":new Lr(Se.layout_line["line-miter-limit"]),"line-round-limit":new Lr(Se.layout_line["line-round-limit"]),"line-sort-key":new Ir(Se.layout_line["line-sort-key"])}),pf={paint:new Qi({"line-opacity":new Ir(Se.paint_line["line-opacity"]),"line-color":new Ir(Se.paint_line["line-color"]),"line-translate":new Lr(Se.paint_line["line-translate"]),"line-translate-anchor":new Lr(Se.paint_line["line-translate-anchor"]),"line-width":new Ir(Se.paint_line["line-width"]),"line-gap-width":new Ir(Se.paint_line["line-gap-width"]),"line-offset":new Ir(Se.paint_line["line-offset"]),"line-blur":new Ir(Se.paint_line["line-blur"]),"line-dasharray":new ho(Se.paint_line["line-dasharray"]),"line-pattern":new rs(Se.paint_line["line-pattern"]),"line-gradient":new Ga(Se.paint_line["line-gradient"])}),layout:pp},dp=function(A){function P(){A.apply(this,arguments)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.possiblyEvaluate=function(q,ae){return ae=new ri(Math.floor(ae.zoom),{now:ae.now,fadeDuration:ae.fadeDuration,zoomHistory:ae.zoomHistory,transition:ae.transition}),A.prototype.possiblyEvaluate.call(this,q,ae)},P.prototype.evaluate=function(q,ae,be,Ee){return ae=u({},ae,{zoom:Math.floor(ae.zoom)}),A.prototype.evaluate.call(this,q,ae,be,Ee)},P}(Ir),df=new dp(pf.paint.properties["line-width"].specification);df.useIntegerZoom=!0;var gp=function(A){function P(q){A.call(this,q,pf)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype._handleSpecialPaintPropertyUpdate=function(q){q==="line-gradient"&&this._updateGradient()},P.prototype._updateGradient=function(){var q=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=$c(q,"lineProgress"),this.gradientTexture=null},P.prototype.recalculate=function(q,ae){A.prototype.recalculate.call(this,q,ae),this.paint._values["line-floorwidth"]=df.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,q)},P.prototype.createBucket=function(q){return new to(q)},P.prototype.queryRadius=function(q){var ae=q,be=gf($s("line-width",this,ae),$s("line-gap-width",this,ae)),Ee=$s("line-offset",this,ae);return be/2+Math.abs(Ee)+wu(this.paint.get("line-translate"))},P.prototype.queryIntersectsFeature=function(q,ae,be,Ee,Ne,Qe,ut){var wt=Tu(q,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Qe.angle,ut),Lt=ut/2*gf(this.paint.get("line-width").evaluate(ae,be),this.paint.get("line-gap-width").evaluate(ae,be)),Bt=this.paint.get("line-offset").evaluate(ae,be);return Bt&&(Ee=function(Ht,Vt){for(var an=[],yn=new t(0,0),On=0;On<Ht.length;On++){for(var Pn=Ht[On],Nn=[],Vn=0;Vn<Pn.length;Vn++){var Zn=Pn[Vn-1],Qn=Pn[Vn],rr=Pn[Vn+1],_r=Vn===0?yn:Qn.sub(Zn)._unit()._perp(),dr=Vn===Pn.length-1?yn:rr.sub(Qn)._unit()._perp(),Mr=_r._add(dr)._unit(),Cr=Mr.x*dr.x+Mr.y*dr.y;Mr._mult(1/Cr),Nn.push(Mr._mult(Vt)._add(Qn))}an.push(Nn)}return an}(Ee,Bt*ut)),function(Ht,Vt,an){for(var yn=0;yn<Vt.length;yn++){var On=Vt[yn];if(Ht.length>=3){for(var Pn=0;Pn<On.length;Pn++)if(cl(Ht,On[Pn]))return!0}if(oc(Ht,On,an))return!0}return!1}(wt,Ee,Lt)},P.prototype.isTileClipped=function(){return!0},P}(pa);function gf(A,P){return P>0?P+2*A:A}var bc=di([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),vp=di([{name:"a_projected_pos",components:3,type:"Float32"}],4),mp=(di([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),di([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),vf=(di([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),di([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),yp=di([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function xp(A,P,q){return A.sections.forEach(function(ae){ae.text=function(be,Ee,Ne){var Qe=Ee.layout.get("text-transform").evaluate(Ne,{});return Qe==="uppercase"?be=be.toLocaleUpperCase():Qe==="lowercase"&&(be=be.toLocaleLowerCase()),fa.applyArabicShaping&&(be=fa.applyArabicShaping(be)),be}(ae.text,P,q)}),A}di([{name:"triangle",components:3,type:"Uint16"}]),di([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),di([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),di([{type:"Float32",name:"offsetX"}]),di([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var nu={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},La=24,mf=function(A,P,q,ae,be){var Ee,Ne,Qe=8*be-ae-1,ut=(1<<Qe)-1,wt=ut>>1,Lt=-7,Bt=q?be-1:0,Ht=q?-1:1,Vt=A[P+Bt];for(Bt+=Ht,Ee=Vt&(1<<-Lt)-1,Vt>>=-Lt,Lt+=Qe;Lt>0;Ee=256*Ee+A[P+Bt],Bt+=Ht,Lt-=8);for(Ne=Ee&(1<<-Lt)-1,Ee>>=-Lt,Lt+=ae;Lt>0;Ne=256*Ne+A[P+Bt],Bt+=Ht,Lt-=8);if(Ee===0)Ee=1-wt;else{if(Ee===ut)return Ne?NaN:1/0*(Vt?-1:1);Ne+=Math.pow(2,ae),Ee-=wt}return(Vt?-1:1)*Ne*Math.pow(2,Ee-ae)},yf=function(A,P,q,ae,be,Ee){var Ne,Qe,ut,wt=8*Ee-be-1,Lt=(1<<wt)-1,Bt=Lt>>1,Ht=be===23?Math.pow(2,-24)-Math.pow(2,-77):0,Vt=ae?0:Ee-1,an=ae?1:-1,yn=P<0||P===0&&1/P<0?1:0;for(P=Math.abs(P),isNaN(P)||P===1/0?(Qe=isNaN(P)?1:0,Ne=Lt):(Ne=Math.floor(Math.log(P)/Math.LN2),P*(ut=Math.pow(2,-Ne))<1&&(Ne--,ut*=2),(P+=Ne+Bt>=1?Ht/ut:Ht*Math.pow(2,1-Bt))*ut>=2&&(Ne++,ut/=2),Ne+Bt>=Lt?(Qe=0,Ne=Lt):Ne+Bt>=1?(Qe=(P*ut-1)*Math.pow(2,be),Ne+=Bt):(Qe=P*Math.pow(2,Bt-1)*Math.pow(2,be),Ne=0));be>=8;A[q+Vt]=255&Qe,Vt+=an,Qe/=256,be-=8);for(Ne=Ne<<be|Qe,wt+=be;wt>0;A[q+Vt]=255&Ne,Vt+=an,Ne/=256,wt-=8);A[q+Vt-an]|=128*yn},Cu=ki;function ki(A){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(A)?A:new Uint8Array(A||0),this.pos=0,this.type=0,this.length=this.buf.length}ki.Varint=0,ki.Fixed64=1,ki.Bytes=2,ki.Fixed32=5;var _c=4294967296,xf=1/_c,bf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Qs(A){return A.type===ki.Bytes?A.readVarint()+A.pos:A.pos+1}function Ol(A,P,q){return q?4294967296*P+(A>>>0):4294967296*(P>>>0)+(A>>>0)}function _f(A,P,q){var ae=P<=16383?1:P<=2097151?2:P<=268435455?3:Math.floor(Math.log(P)/(7*Math.LN2));q.realloc(ae);for(var be=q.pos-1;be>=A;be--)q.buf[be+ae]=q.buf[be]}function bp(A,P){for(var q=0;q<A.length;q++)P.writeVarint(A[q])}function _p(A,P){for(var q=0;q<A.length;q++)P.writeSVarint(A[q])}function wp(A,P){for(var q=0;q<A.length;q++)P.writeFloat(A[q])}function Tp(A,P){for(var q=0;q<A.length;q++)P.writeDouble(A[q])}function kp(A,P){for(var q=0;q<A.length;q++)P.writeBoolean(A[q])}function Ap(A,P){for(var q=0;q<A.length;q++)P.writeFixed32(A[q])}function Mp(A,P){for(var q=0;q<A.length;q++)P.writeSFixed32(A[q])}function Sp(A,P){for(var q=0;q<A.length;q++)P.writeFixed64(A[q])}function Ep(A,P){for(var q=0;q<A.length;q++)P.writeSFixed64(A[q])}function Pu(A,P){return(A[P]|A[P+1]<<8|A[P+2]<<16)+16777216*A[P+3]}function Il(A,P,q){A[q]=P,A[q+1]=P>>>8,A[q+2]=P>>>16,A[q+3]=P>>>24}function wf(A,P){return(A[P]|A[P+1]<<8|A[P+2]<<16)+(A[P+3]<<24)}ki.prototype={destroy:function(){this.buf=null},readFields:function(A,P,q){for(q=q||this.length;this.pos<q;){var ae=this.readVarint(),be=ae>>3,Ee=this.pos;this.type=7&ae,A(be,P,this),this.pos===Ee&&this.skip(ae)}return P},readMessage:function(A,P){return this.readFields(A,P,this.readVarint()+this.pos)},readFixed32:function(){var A=Pu(this.buf,this.pos);return this.pos+=4,A},readSFixed32:function(){var A=wf(this.buf,this.pos);return this.pos+=4,A},readFixed64:function(){var A=Pu(this.buf,this.pos)+Pu(this.buf,this.pos+4)*_c;return this.pos+=8,A},readSFixed64:function(){var A=Pu(this.buf,this.pos)+wf(this.buf,this.pos+4)*_c;return this.pos+=8,A},readFloat:function(){var A=mf(this.buf,this.pos,!0,23,4);return this.pos+=4,A},readDouble:function(){var A=mf(this.buf,this.pos,!0,52,8);return this.pos+=8,A},readVarint:function(A){var P,q,ae=this.buf;return P=127&(q=ae[this.pos++]),q<128?P:(P|=(127&(q=ae[this.pos++]))<<7,q<128?P:(P|=(127&(q=ae[this.pos++]))<<14,q<128?P:(P|=(127&(q=ae[this.pos++]))<<21,q<128?P:function(be,Ee,Ne){var Qe,ut,wt=Ne.buf;if(Qe=(112&(ut=wt[Ne.pos++]))>>4,ut<128||(Qe|=(127&(ut=wt[Ne.pos++]))<<3,ut<128)||(Qe|=(127&(ut=wt[Ne.pos++]))<<10,ut<128)||(Qe|=(127&(ut=wt[Ne.pos++]))<<17,ut<128)||(Qe|=(127&(ut=wt[Ne.pos++]))<<24,ut<128)||(Qe|=(1&(ut=wt[Ne.pos++]))<<31,ut<128))return Ol(be,Qe,Ee);throw new Error("Expected varint not more than 10 bytes")}(P|=(15&(q=ae[this.pos]))<<28,A,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var A=this.readVarint();return A%2==1?(A+1)/-2:A/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var A=this.readVarint()+this.pos,P=this.pos;return this.pos=A,A-P>=12&&bf?function(q,ae,be){return bf.decode(q.subarray(ae,be))}(this.buf,P,A):function(q,ae,be){for(var Ee="",Ne=ae;Ne<be;){var Qe,ut,wt,Lt=q[Ne],Bt=null,Ht=Lt>239?4:Lt>223?3:Lt>191?2:1;if(Ne+Ht>be)break;Ht===1?Lt<128&&(Bt=Lt):Ht===2?(192&(Qe=q[Ne+1]))==128&&(Bt=(31&Lt)<<6|63&Qe)<=127&&(Bt=null):Ht===3?(Qe=q[Ne+1],ut=q[Ne+2],(192&Qe)==128&&(192&ut)==128&&((Bt=(15&Lt)<<12|(63&Qe)<<6|63&ut)<=2047||Bt>=55296&&Bt<=57343)&&(Bt=null)):Ht===4&&(Qe=q[Ne+1],ut=q[Ne+2],wt=q[Ne+3],(192&Qe)==128&&(192&ut)==128&&(192&wt)==128&&((Bt=(15&Lt)<<18|(63&Qe)<<12|(63&ut)<<6|63&wt)<=65535||Bt>=1114112)&&(Bt=null)),Bt===null?(Bt=65533,Ht=1):Bt>65535&&(Bt-=65536,Ee+=String.fromCharCode(Bt>>>10&1023|55296),Bt=56320|1023&Bt),Ee+=String.fromCharCode(Bt),Ne+=Ht}return Ee}(this.buf,P,A)},readBytes:function(){var A=this.readVarint()+this.pos,P=this.buf.subarray(this.pos,A);return this.pos=A,P},readPackedVarint:function(A,P){if(this.type!==ki.Bytes)return A.push(this.readVarint(P));var q=Qs(this);for(A=A||[];this.pos<q;)A.push(this.readVarint(P));return A},readPackedSVarint:function(A){if(this.type!==ki.Bytes)return A.push(this.readSVarint());var P=Qs(this);for(A=A||[];this.pos<P;)A.push(this.readSVarint());return A},readPackedBoolean:function(A){if(this.type!==ki.Bytes)return A.push(this.readBoolean());var P=Qs(this);for(A=A||[];this.pos<P;)A.push(this.readBoolean());return A},readPackedFloat:function(A){if(this.type!==ki.Bytes)return A.push(this.readFloat());var P=Qs(this);for(A=A||[];this.pos<P;)A.push(this.readFloat());return A},readPackedDouble:function(A){if(this.type!==ki.Bytes)return A.push(this.readDouble());var P=Qs(this);for(A=A||[];this.pos<P;)A.push(this.readDouble());return A},readPackedFixed32:function(A){if(this.type!==ki.Bytes)return A.push(this.readFixed32());var P=Qs(this);for(A=A||[];this.pos<P;)A.push(this.readFixed32());return A},readPackedSFixed32:function(A){if(this.type!==ki.Bytes)return A.push(this.readSFixed32());var P=Qs(this);for(A=A||[];this.pos<P;)A.push(this.readSFixed32());return A},readPackedFixed64:function(A){if(this.type!==ki.Bytes)return A.push(this.readFixed64());var P=Qs(this);for(A=A||[];this.pos<P;)A.push(this.readFixed64());return A},readPackedSFixed64:function(A){if(this.type!==ki.Bytes)return A.push(this.readSFixed64());var P=Qs(this);for(A=A||[];this.pos<P;)A.push(this.readSFixed64());return A},skip:function(A){var P=7&A;if(P===ki.Varint)for(;this.buf[this.pos++]>127;);else if(P===ki.Bytes)this.pos=this.readVarint()+this.pos;else if(P===ki.Fixed32)this.pos+=4;else{if(P!==ki.Fixed64)throw new Error("Unimplemented type: "+P);this.pos+=8}},writeTag:function(A,P){this.writeVarint(A<<3|P)},realloc:function(A){for(var P=this.length||16;P<this.pos+A;)P*=2;if(P!==this.length){var q=new Uint8Array(P);q.set(this.buf),this.buf=q,this.length=P}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(A){this.realloc(4),Il(this.buf,A,this.pos),this.pos+=4},writeSFixed32:function(A){this.realloc(4),Il(this.buf,A,this.pos),this.pos+=4},writeFixed64:function(A){this.realloc(8),Il(this.buf,-1&A,this.pos),Il(this.buf,Math.floor(A*xf),this.pos+4),this.pos+=8},writeSFixed64:function(A){this.realloc(8),Il(this.buf,-1&A,this.pos),Il(this.buf,Math.floor(A*xf),this.pos+4),this.pos+=8},writeVarint:function(A){(A=+A||0)>268435455||A<0?function(P,q){var ae,be;if(P>=0?(ae=P%4294967296|0,be=P/4294967296|0):(be=~(-P/4294967296),4294967295^(ae=~(-P%4294967296))?ae=ae+1|0:(ae=0,be=be+1|0)),P>=18446744073709552e3||P<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");q.realloc(10),function(Ee,Ne,Qe){Qe.buf[Qe.pos++]=127&Ee|128,Ee>>>=7,Qe.buf[Qe.pos++]=127&Ee|128,Ee>>>=7,Qe.buf[Qe.pos++]=127&Ee|128,Ee>>>=7,Qe.buf[Qe.pos++]=127&Ee|128,Ee>>>=7,Qe.buf[Qe.pos]=127&Ee}(ae,0,q),function(Ee,Ne){var Qe=(7&Ee)<<4;Ne.buf[Ne.pos++]|=Qe|((Ee>>>=3)?128:0),Ee&&(Ne.buf[Ne.pos++]=127&Ee|((Ee>>>=7)?128:0),Ee&&(Ne.buf[Ne.pos++]=127&Ee|((Ee>>>=7)?128:0),Ee&&(Ne.buf[Ne.pos++]=127&Ee|((Ee>>>=7)?128:0),Ee&&(Ne.buf[Ne.pos++]=127&Ee|((Ee>>>=7)?128:0),Ee&&(Ne.buf[Ne.pos++]=127&Ee)))))}(be,q)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=A>>>7&127))))},writeSVarint:function(A){this.writeVarint(A<0?2*-A-1:2*A)},writeBoolean:function(A){this.writeVarint(!!A)},writeString:function(A){A=String(A),this.realloc(4*A.length),this.pos++;var P=this.pos;this.pos=function(ae,be,Ee){for(var Ne,Qe,ut=0;ut<be.length;ut++){if((Ne=be.charCodeAt(ut))>55295&&Ne<57344){if(!Qe){Ne>56319||ut+1===be.length?(ae[Ee++]=239,ae[Ee++]=191,ae[Ee++]=189):Qe=Ne;continue}if(Ne<56320){ae[Ee++]=239,ae[Ee++]=191,ae[Ee++]=189,Qe=Ne;continue}Ne=Qe-55296<<10|Ne-56320|65536,Qe=null}else Qe&&(ae[Ee++]=239,ae[Ee++]=191,ae[Ee++]=189,Qe=null);Ne<128?ae[Ee++]=Ne:(Ne<2048?ae[Ee++]=Ne>>6|192:(Ne<65536?ae[Ee++]=Ne>>12|224:(ae[Ee++]=Ne>>18|240,ae[Ee++]=Ne>>12&63|128),ae[Ee++]=Ne>>6&63|128),ae[Ee++]=63&Ne|128)}return Ee}(this.buf,A,this.pos);var q=this.pos-P;q>=128&&_f(P,q,this),this.pos=P-1,this.writeVarint(q),this.pos+=q},writeFloat:function(A){this.realloc(4),yf(this.buf,A,this.pos,!0,23,4),this.pos+=4},writeDouble:function(A){this.realloc(8),yf(this.buf,A,this.pos,!0,52,8),this.pos+=8},writeBytes:function(A){var P=A.length;this.writeVarint(P),this.realloc(P);for(var q=0;q<P;q++)this.buf[this.pos++]=A[q]},writeRawMessage:function(A,P){this.pos++;var q=this.pos;A(P,this);var ae=this.pos-q;ae>=128&&_f(q,ae,this),this.pos=q-1,this.writeVarint(ae),this.pos+=ae},writeMessage:function(A,P,q){this.writeTag(A,ki.Bytes),this.writeRawMessage(P,q)},writePackedVarint:function(A,P){P.length&&this.writeMessage(A,bp,P)},writePackedSVarint:function(A,P){P.length&&this.writeMessage(A,_p,P)},writePackedBoolean:function(A,P){P.length&&this.writeMessage(A,kp,P)},writePackedFloat:function(A,P){P.length&&this.writeMessage(A,wp,P)},writePackedDouble:function(A,P){P.length&&this.writeMessage(A,Tp,P)},writePackedFixed32:function(A,P){P.length&&this.writeMessage(A,Ap,P)},writePackedSFixed32:function(A,P){P.length&&this.writeMessage(A,Mp,P)},writePackedFixed64:function(A,P){P.length&&this.writeMessage(A,Sp,P)},writePackedSFixed64:function(A,P){P.length&&this.writeMessage(A,Ep,P)},writeBytesField:function(A,P){this.writeTag(A,ki.Bytes),this.writeBytes(P)},writeFixed32Field:function(A,P){this.writeTag(A,ki.Fixed32),this.writeFixed32(P)},writeSFixed32Field:function(A,P){this.writeTag(A,ki.Fixed32),this.writeSFixed32(P)},writeFixed64Field:function(A,P){this.writeTag(A,ki.Fixed64),this.writeFixed64(P)},writeSFixed64Field:function(A,P){this.writeTag(A,ki.Fixed64),this.writeSFixed64(P)},writeVarintField:function(A,P){this.writeTag(A,ki.Varint),this.writeVarint(P)},writeSVarintField:function(A,P){this.writeTag(A,ki.Varint),this.writeSVarint(P)},writeStringField:function(A,P){this.writeTag(A,ki.Bytes),this.writeString(P)},writeFloatField:function(A,P){this.writeTag(A,ki.Fixed32),this.writeFloat(P)},writeDoubleField:function(A,P){this.writeTag(A,ki.Fixed64),this.writeDouble(P)},writeBooleanField:function(A,P){this.writeVarintField(A,!!P)}};function Lp(A,P,q){A===1&&q.readMessage(Cp,P)}function Cp(A,P,q){if(A===3){var ae=q.readMessage(Pp,{}),be=ae.id,Ee=ae.bitmap,Ne=ae.width,Qe=ae.height,ut=ae.left,wt=ae.top,Lt=ae.advance;P.push({id:be,bitmap:new xl({width:Ne+6,height:Qe+6},Ee),metrics:{width:Ne,height:Qe,left:ut,top:wt,advance:Lt}})}}function Pp(A,P,q){A===1?P.id=q.readVarint():A===2?P.bitmap=q.readBytes():A===3?P.width=q.readVarint():A===4?P.height=q.readVarint():A===5?P.left=q.readSVarint():A===6?P.top=q.readSVarint():A===7&&(P.advance=q.readVarint())}function Tf(A){for(var P=0,q=0,ae=0,be=A;ae<be.length;ae+=1){var Ee=be[ae];P+=Ee.w*Ee.h,q=Math.max(q,Ee.w)}A.sort(function(yn,On){return On.h-yn.h});for(var Ne=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(P/.95)),q),h:1/0}],Qe=0,ut=0,wt=0,Lt=A;wt<Lt.length;wt+=1)for(var Bt=Lt[wt],Ht=Ne.length-1;Ht>=0;Ht--){var Vt=Ne[Ht];if(!(Bt.w>Vt.w||Bt.h>Vt.h)){if(Bt.x=Vt.x,Bt.y=Vt.y,ut=Math.max(ut,Bt.y+Bt.h),Qe=Math.max(Qe,Bt.x+Bt.w),Bt.w===Vt.w&&Bt.h===Vt.h){var an=Ne.pop();Ht<Ne.length&&(Ne[Ht]=an)}else Bt.h===Vt.h?(Vt.x+=Bt.w,Vt.w-=Bt.w):Bt.w===Vt.w?(Vt.y+=Bt.h,Vt.h-=Bt.h):(Ne.push({x:Vt.x+Bt.w,y:Vt.y,w:Vt.w-Bt.w,h:Bt.h}),Vt.y+=Bt.h,Vt.h-=Bt.h);break}}return{w:Qe,h:ut,fill:P/(Qe*ut)||0}}var Ou=function(A,P){var q=P.pixelRatio,ae=P.version,be=P.stretchX,Ee=P.stretchY,Ne=P.content;this.paddedRect=A,this.pixelRatio=q,this.stretchX=be,this.stretchY=Ee,this.content=Ne,this.version=ae},ru={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};ru.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},ru.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},ru.tlbr.get=function(){return this.tl.concat(this.br)},ru.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Ou.prototype,ru);var iu=function(A,P){var q={},ae={};this.haveRenderCallbacks=[];var be=[];this.addImages(A,q,be),this.addImages(P,ae,be);var Ee=Tf(be),Ne=Ee.w,Qe=Ee.h,ut=new eo({width:Ne||1,height:Qe||1});for(var wt in A){var Lt=A[wt],Bt=q[wt].paddedRect;eo.copy(Lt.data,ut,{x:0,y:0},{x:Bt.x+1,y:Bt.y+1},Lt.data)}for(var Ht in P){var Vt=P[Ht],an=ae[Ht].paddedRect,yn=an.x+1,On=an.y+1,Pn=Vt.data.width,Nn=Vt.data.height;eo.copy(Vt.data,ut,{x:0,y:0},{x:yn,y:On},Vt.data),eo.copy(Vt.data,ut,{x:0,y:Nn-1},{x:yn,y:On-1},{width:Pn,height:1}),eo.copy(Vt.data,ut,{x:0,y:0},{x:yn,y:On+Nn},{width:Pn,height:1}),eo.copy(Vt.data,ut,{x:Pn-1,y:0},{x:yn-1,y:On},{width:1,height:Nn}),eo.copy(Vt.data,ut,{x:0,y:0},{x:yn+Pn,y:On},{width:1,height:Nn})}this.image=ut,this.iconPositions=q,this.patternPositions=ae};iu.prototype.addImages=function(A,P,q){for(var ae in A){var be=A[ae],Ee={x:0,y:0,w:be.data.width+2,h:be.data.height+2};q.push(Ee),P[ae]=new Ou(Ee,be),be.hasRenderCallback&&this.haveRenderCallbacks.push(ae)}},iu.prototype.patchUpdatedImages=function(A,P){for(var q in A.dispatchRenderCallbacks(this.haveRenderCallbacks),A.updatedImages)this.patchUpdatedImage(this.iconPositions[q],A.getImage(q),P),this.patchUpdatedImage(this.patternPositions[q],A.getImage(q),P)},iu.prototype.patchUpdatedImage=function(A,P,q){if(A&&P&&A.version!==P.version){A.version=P.version;var ae=A.tl,be=ae[0],Ee=ae[1];q.update(P.data,void 0,{x:be,y:Ee})}},wr("ImagePosition",Ou),wr("ImageAtlas",iu);var Lo={horizontal:1,vertical:2,horizontalOnly:3},Iu=-17,zl=function(){this.scale=1,this.fontStack="",this.imageName=null};zl.forText=function(A,P){var q=new zl;return q.scale=A||1,q.fontStack=P,q},zl.forImage=function(A){var P=new zl;return P.imageName=A,P};var ja=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function zu(A,P,q,ae,be,Ee,Ne,Qe,ut,wt,Lt,Bt,Ht,Vt,an,yn){var On,Pn=ja.fromFeature(A,be);Bt===Lo.vertical&&Pn.verticalizePunctuation();var Nn=fa.processBidirectionalText,Vn=fa.processStyledBidirectionalText;if(Nn&&Pn.sections.length===1){On=[];for(var Zn=0,Qn=Nn(Pn.toString(),wc(Pn,wt,Ee,P,ae,Vt,an));Zn<Qn.length;Zn+=1){var rr=Qn[Zn],_r=new ja;_r.text=rr,_r.sections=Pn.sections;for(var dr=0;dr<rr.length;dr++)_r.sectionIndex.push(0);On.push(_r)}}else if(Vn){On=[];for(var Mr=0,Cr=Vn(Pn.text,Pn.sectionIndex,wc(Pn,wt,Ee,P,ae,Vt,an));Mr<Cr.length;Mr+=1){var Ur=Cr[Mr],Or=new ja;Or.text=Ur[0],Or.sectionIndex=Ur[1],Or.sections=Pn.sections,On.push(Or)}}else On=function(Pr,Jr){for(var qr=[],wi=Pr.text,Br=0,yi=0,Ai=Jr;yi<Ai.length;yi+=1){var Si=Ai[yi];qr.push(Pr.substring(Br,Si)),Br=Si}return Br<wi.length&&qr.push(Pr.substring(Br,wi.length)),qr}(Pn,wc(Pn,wt,Ee,P,ae,Vt,an));var jr=[],zr={positionedLines:jr,text:Pn.toString(),top:Lt[1],bottom:Lt[1],left:Lt[0],right:Lt[0],writingMode:Bt,iconsInText:!1,verticalizable:!1};return function(Pr,Jr,qr,wi,Br,yi,Ai,Si,Pi,Ti,ia,Ii){for(var va=0,Ca=Iu,wa=0,Ya=0,Ta=Si==="right"?1:Si==="left"?0:.5,oa=0,ka=0,ma=Br;ka<ma.length;ka+=1){var sa=ma[ka];sa.trim();var Gr=sa.getMaxScale(),ni=(Gr-1)*La,ji={positionedGlyphs:[],lineOffset:0};Pr.positionedLines[oa]=ji;var _i=ji.positionedGlyphs,Ri=0;if(sa.length()){for(var Oi=0;Oi<sa.length();Oi++){var ai=sa.getSection(Oi),Ui=sa.getSectionIndex(Oi),Wa=sa.getCharCode(Oi),vo=0,Ua=null,ws=null,nl=null,ya=La,Ts=!(Pi===Lo.horizontal||!ia&&!Ra(Wa)||ia&&(Ru[Wa]||ys(Wa)));if(ai.imageName){var as=wi[ai.imageName];if(!as)continue;nl=ai.imageName,Pr.iconsInText=Pr.iconsInText||!0,ws=as.paddedRect;var os=as.displaySize;ai.scale=ai.scale*La/Ii,Ua={width:os[0],height:os[1],left:1,top:-3,advance:Ts?os[1]:os[0]},vo=ni+(La-os[1]*ai.scale),ya=Ua.advance;var Tl=Ts?os[0]*ai.scale-La*Gr:os[1]*ai.scale-La*Gr;Tl>0&&Tl>Ri&&(Ri=Tl)}else{var qu=qr[ai.fontStack],kl=qu&&qu[Wa];if(kl&&kl.rect)ws=kl.rect,Ua=kl.metrics;else{var Gu=Jr[ai.fontStack],su=Gu&&Gu[Wa];if(!su)continue;Ua=su.metrics}vo=(Gr-ai.scale)*La}Ts?(Pr.verticalizable=!0,_i.push({glyph:Wa,imageName:nl,x:va,y:Ca+vo,vertical:Ts,scale:ai.scale,fontStack:ai.fontStack,sectionIndex:Ui,metrics:Ua,rect:ws}),va+=ya*ai.scale+Ti):(_i.push({glyph:Wa,imageName:nl,x:va,y:Ca+vo,vertical:Ts,scale:ai.scale,fontStack:ai.fontStack,sectionIndex:Ui,metrics:Ua,rect:ws}),va+=Ua.advance*ai.scale+Ti)}if(_i.length!==0){var Oc=va-Ti;wa=Math.max(Oc,wa),Ip(_i,0,_i.length-1,Ta,Ri)}va=0;var Zu=yi*Gr+Ri;ji.lineOffset=Math.max(Ri,ni),Ca+=Zu,Ya=Math.max(Zu,Ya),++oa}else Ca+=yi,++oa}var Vl=Ca-Iu,Yu=Tc(Ai),Wu=Yu.horizontalAlign,lu=Yu.verticalAlign;(function(Ic,uu,Al,Hl,Xu,Ju,ql,Ku,$u){var cu=(uu-Al)*Xu,fu=0;fu=Ju!==ql?-Ku*Hl-Iu:(-Hl*$u+.5)*ql;for(var Ml=0,hu=Ic;Ml<hu.length;Ml+=1)for(var Sl=0,pu=hu[Ml].positionedGlyphs;Sl<pu.length;Sl+=1){var du=pu[Sl];du.x+=cu,du.y+=fu}})(Pr.positionedLines,Ta,Wu,lu,wa,Ya,yi,Vl,Br.length),Pr.top+=-lu*Vl,Pr.bottom=Pr.top+Vl,Pr.left+=-Wu*wa,Pr.right=Pr.left+wa}(zr,P,q,ae,On,Ne,Qe,ut,Bt,wt,Ht,yn),!function(Pr){for(var Jr=0,qr=Pr;Jr<qr.length;Jr+=1)if(qr[Jr].positionedGlyphs.length!==0)return!1;return!0}(jr)&&zr}ja.fromFeature=function(A,P){for(var q=new ja,ae=0;ae<A.sections.length;ae++){var be=A.sections[ae];be.image?q.addImageSection(be):q.addTextSection(be,P)}return q},ja.prototype.length=function(){return this.text.length},ja.prototype.getSection=function(A){return this.sections[this.sectionIndex[A]]},ja.prototype.getSectionIndex=function(A){return this.sectionIndex[A]},ja.prototype.getCharCode=function(A){return this.text.charCodeAt(A)},ja.prototype.verticalizePunctuation=function(){this.text=function(A){for(var P="",q=0;q<A.length;q++){var ae=A.charCodeAt(q+1)||null,be=A.charCodeAt(q-1)||null;ae&&Is(ae)&&!nu[A[q+1]]||be&&Is(be)&&!nu[A[q-1]]||!nu[A[q]]?P+=A[q]:P+=nu[A[q]]}return P}(this.text)},ja.prototype.trim=function(){for(var A=0,P=0;P<this.text.length&&Ru[this.text.charCodeAt(P)];P++)A++;for(var q=this.text.length,ae=this.text.length-1;ae>=0&&ae>=A&&Ru[this.text.charCodeAt(ae)];ae--)q--;this.text=this.text.substring(A,q),this.sectionIndex=this.sectionIndex.slice(A,q)},ja.prototype.substring=function(A,P){var q=new ja;return q.text=this.text.substring(A,P),q.sectionIndex=this.sectionIndex.slice(A,P),q.sections=this.sections,q},ja.prototype.toString=function(){return this.text},ja.prototype.getMaxScale=function(){var A=this;return this.sectionIndex.reduce(function(P,q){return Math.max(P,A.sections[q].scale)},0)},ja.prototype.addTextSection=function(A,P){this.text+=A.text,this.sections.push(zl.forText(A.scale,A.fontStack||P));for(var q=this.sections.length-1,ae=0;ae<A.text.length;++ae)this.sectionIndex.push(q)},ja.prototype.addImageSection=function(A){var P=A.image?A.image.name:"";if(P.length!==0){var q=this.getNextImageSectionCharCode();q?(this.text+=String.fromCharCode(q),this.sections.push(zl.forImage(P)),this.sectionIndex.push(this.sections.length-1)):M("Reached maximum number of images 6401")}else M("Can't add FormattedSection with an empty image.")},ja.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Ru={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},go={};function kf(A,P,q,ae,be,Ee){if(P.imageName){var Ne=ae[P.imageName];return Ne?Ne.displaySize[0]*P.scale*La/Ee+be:0}var Qe=q[P.fontStack],ut=Qe&&Qe[A];return ut?ut.metrics.advance*P.scale+be:0}function Af(A,P,q,ae){var be=Math.pow(A-P,2);return ae?A<P?be/2:2*be:be+Math.abs(q)*q}function Op(A,P,q){var ae=0;return A===10&&(ae-=1e4),q&&(ae+=150),A!==40&&A!==65288||(ae+=50),P!==41&&P!==65289||(ae+=50),ae}function Mf(A,P,q,ae,be,Ee){for(var Ne=null,Qe=Af(P,q,be,Ee),ut=0,wt=ae;ut<wt.length;ut+=1){var Lt=wt[ut],Bt=Af(P-Lt.x,q,be,Ee)+Lt.badness;Bt<=Qe&&(Ne=Lt,Qe=Bt)}return{index:A,x:P,priorBreak:Ne,badness:Qe}}function Sf(A){return A?Sf(A.priorBreak).concat(A.index):[]}function wc(A,P,q,ae,be,Ee,Ne){if(Ee!=="point")return[];if(!A)return[];for(var Qe=[],ut=function(On,Pn,Nn,Vn,Zn,Qn){for(var rr=0,_r=0;_r<On.length();_r++){var dr=On.getSection(_r);rr+=kf(On.getCharCode(_r),dr,Vn,Zn,Pn,Qn)}return rr/Math.max(1,Math.ceil(rr/Nn))}(A,P,q,ae,be,Ne),wt=A.text.indexOf("​")>=0,Lt=0,Bt=0;Bt<A.length();Bt++){var Ht=A.getSection(Bt),Vt=A.getCharCode(Bt);if(Ru[Vt]||(Lt+=kf(Vt,Ht,ae,be,P,Ne)),Bt<A.length()-1){var an=!((yn=Vt)<11904||!(Ar["Bopomofo Extended"](yn)||Ar.Bopomofo(yn)||Ar["CJK Compatibility Forms"](yn)||Ar["CJK Compatibility Ideographs"](yn)||Ar["CJK Compatibility"](yn)||Ar["CJK Radicals Supplement"](yn)||Ar["CJK Strokes"](yn)||Ar["CJK Symbols and Punctuation"](yn)||Ar["CJK Unified Ideographs Extension A"](yn)||Ar["CJK Unified Ideographs"](yn)||Ar["Enclosed CJK Letters and Months"](yn)||Ar["Halfwidth and Fullwidth Forms"](yn)||Ar.Hiragana(yn)||Ar["Ideographic Description Characters"](yn)||Ar["Kangxi Radicals"](yn)||Ar["Katakana Phonetic Extensions"](yn)||Ar.Katakana(yn)||Ar["Vertical Forms"](yn)||Ar["Yi Radicals"](yn)||Ar["Yi Syllables"](yn)));(go[Vt]||an||Ht.imageName)&&Qe.push(Mf(Bt+1,Lt,ut,Qe,Op(Vt,A.getCharCode(Bt+1),an&&wt),!1))}}var yn;return Sf(Mf(A.length(),Lt,ut,Qe,0,!0))}function Tc(A){var P=.5,q=.5;switch(A){case"right":case"top-right":case"bottom-right":P=1;break;case"left":case"top-left":case"bottom-left":P=0}switch(A){case"bottom":case"bottom-right":case"bottom-left":q=1;break;case"top":case"top-right":case"top-left":q=0}return{horizontalAlign:P,verticalAlign:q}}function Ip(A,P,q,ae,be){if(ae||be)for(var Ee=A[q],Ne=Ee.metrics.advance*Ee.scale,Qe=(A[q].x+Ne)*ae,ut=P;ut<=q;ut++)A[ut].x-=Qe,A[ut].y+=be}function Ef(A,P,q,ae,be,Ee){var Ne,Qe=A.image;if(Qe.content){var ut=Qe.content,wt=Qe.pixelRatio||1;Ne=[ut[0]/wt,ut[1]/wt,Qe.displaySize[0]-ut[2]/wt,Qe.displaySize[1]-ut[3]/wt]}var Lt,Bt,Ht,Vt,an=P.left*Ee,yn=P.right*Ee;q==="width"||q==="both"?(Vt=be[0]+an-ae[3],Bt=be[0]+yn+ae[1]):Bt=(Vt=be[0]+(an+yn-Qe.displaySize[0])/2)+Qe.displaySize[0];var On=P.top*Ee,Pn=P.bottom*Ee;return q==="height"||q==="both"?(Lt=be[1]+On-ae[0],Ht=be[1]+Pn+ae[2]):Ht=(Lt=be[1]+(On+Pn-Qe.displaySize[1])/2)+Qe.displaySize[1],{image:Qe,top:Lt,right:Bt,bottom:Ht,left:Vt,collisionPadding:Ne}}go[10]=!0,go[32]=!0,go[38]=!0,go[40]=!0,go[41]=!0,go[43]=!0,go[45]=!0,go[47]=!0,go[173]=!0,go[183]=!0,go[8203]=!0,go[8208]=!0,go[8211]=!0,go[8231]=!0;var Rl=function(A){function P(q,ae,be,Ee){A.call(this,q,ae),this.angle=be,Ee!==void 0&&(this.segment=Ee)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.clone=function(){return new P(this.x,this.y,this.angle,this.segment)},P}(t);wr("Anchor",Rl);var Fs=128;function kc(A,P){var q=P.expression;if(q.kind==="constant")return{kind:"constant",layoutSize:q.evaluate(new ri(A+1))};if(q.kind==="source")return{kind:"source"};for(var ae=q.zoomStops,be=q.interpolationType,Ee=0;Ee<ae.length&&ae[Ee]<=A;)Ee++;for(var Ne=Ee=Math.max(0,Ee-1);Ne<ae.length&&ae[Ne]<A+1;)Ne++;Ne=Math.min(ae.length-1,Ne);var Qe=ae[Ee],ut=ae[Ne];return q.kind==="composite"?{kind:"composite",minZoom:Qe,maxZoom:ut,interpolationType:be}:{kind:"camera",minZoom:Qe,maxZoom:ut,minSize:q.evaluate(new ri(Qe)),maxSize:q.evaluate(new ri(ut)),interpolationType:be}}function Lf(A,P,q){var ae=P.uSize,be=P.uSizeT,Ee=q.lowerSize,Ne=q.upperSize;return A.kind==="source"?Ee/Fs:A.kind==="composite"?Tr(Ee/Fs,Ne/Fs,be):ae}function Cf(A,P){var q=0,ae=0;if(A.kind==="constant")ae=A.layoutSize;else if(A.kind!=="source"){var be=A.interpolationType,Ee=A.minZoom,Ne=A.maxZoom,Qe=be?a(Di.interpolationFactor(be,P,Ee,Ne),0,1):0;A.kind==="camera"?ae=Tr(A.minSize,A.maxSize,Qe):q=Qe}return{uSizeT:q,uSize:ae}}var zp=Object.freeze({__proto__:null,getSizeData:kc,evaluateSizeForFeature:Lf,evaluateSizeForZoom:Cf,SIZE_PACK_FACTOR:Fs});function Pf(A,P,q,ae,be){if(P.segment===void 0)return!0;for(var Ee=P,Ne=P.segment+1,Qe=0;Qe>-q/2;){if(--Ne<0)return!1;Qe-=A[Ne].dist(Ee),Ee=A[Ne]}Qe+=A[Ne].dist(A[Ne+1]),Ne++;for(var ut=[],wt=0;Qe<q/2;){var Lt=A[Ne-1],Bt=A[Ne],Ht=A[Ne+1];if(!Ht)return!1;var Vt=Lt.angleTo(Bt)-Bt.angleTo(Ht);for(Vt=Math.abs((Vt+3*Math.PI)%(2*Math.PI)-Math.PI),ut.push({distance:Qe,angleDelta:Vt}),wt+=Vt;Qe-ut[0].distance>ae;)wt-=ut.shift().angleDelta;if(wt>be)return!1;Ne++,Qe+=Bt.dist(Ht)}return!0}function Of(A){for(var P=0,q=0;q<A.length-1;q++)P+=A[q].dist(A[q+1]);return P}function If(A,P,q){return A?.6*P*q:0}function zf(A,P){return Math.max(A?A.right-A.left:0,P?P.right-P.left:0)}function Rp(A,P,q,ae,be,Ee){for(var Ne=If(q,be,Ee),Qe=zf(q,ae)*Ee,ut=0,wt=Of(A)/2,Lt=0;Lt<A.length-1;Lt++){var Bt=A[Lt],Ht=A[Lt+1],Vt=Bt.dist(Ht);if(ut+Vt>wt){var an=(wt-ut)/Vt,yn=Tr(Bt.x,Ht.x,an),On=Tr(Bt.y,Ht.y,an),Pn=new Rl(yn,On,Ht.angleTo(Bt),Lt);return Pn._round(),!Ne||Pf(A,Pn,Qe,Ne,P)?Pn:void 0}ut+=Vt}}function Dp(A,P,q,ae,be,Ee,Ne,Qe,ut){var wt=If(ae,Ee,Ne),Lt=zf(ae,be),Bt=Lt*Ne,Ht=A[0].x===0||A[0].x===ut||A[0].y===0||A[0].y===ut;return P-Bt<P/4&&(P=Bt+P/4),Rf(A,Ht?P/2*Qe%P:(Lt/2+2*Ee)*Ne*Qe%P,P,wt,q,Bt,Ht,!1,ut)}function Rf(A,P,q,ae,be,Ee,Ne,Qe,ut){for(var wt=Ee/2,Lt=Of(A),Bt=0,Ht=P-q,Vt=[],an=0;an<A.length-1;an++){for(var yn=A[an],On=A[an+1],Pn=yn.dist(On),Nn=On.angleTo(yn);Ht+q<Bt+Pn;){var Vn=((Ht+=q)-Bt)/Pn,Zn=Tr(yn.x,On.x,Vn),Qn=Tr(yn.y,On.y,Vn);if(Zn>=0&&Zn<ut&&Qn>=0&&Qn<ut&&Ht-wt>=0&&Ht+wt<=Lt){var rr=new Rl(Zn,Qn,Nn,an);rr._round(),ae&&!Pf(A,rr,Ee,ae,be)||Vt.push(rr)}}Bt+=Pn}return Qe||Vt.length||Ne||(Vt=Rf(A,Bt/2,q,ae,be,Ee,Ne,!0,ut)),Vt}function Df(A,P,q,ae,be){for(var Ee=[],Ne=0;Ne<A.length;Ne++)for(var Qe=A[Ne],ut=void 0,wt=0;wt<Qe.length-1;wt++){var Lt=Qe[wt],Bt=Qe[wt+1];Lt.x<P&&Bt.x<P||(Lt.x<P?Lt=new t(P,Lt.y+(Bt.y-Lt.y)*((P-Lt.x)/(Bt.x-Lt.x)))._round():Bt.x<P&&(Bt=new t(P,Lt.y+(Bt.y-Lt.y)*((P-Lt.x)/(Bt.x-Lt.x)))._round()),Lt.y<q&&Bt.y<q||(Lt.y<q?Lt=new t(Lt.x+(Bt.x-Lt.x)*((q-Lt.y)/(Bt.y-Lt.y)),q)._round():Bt.y<q&&(Bt=new t(Lt.x+(Bt.x-Lt.x)*((q-Lt.y)/(Bt.y-Lt.y)),q)._round()),Lt.x>=ae&&Bt.x>=ae||(Lt.x>=ae?Lt=new t(ae,Lt.y+(Bt.y-Lt.y)*((ae-Lt.x)/(Bt.x-Lt.x)))._round():Bt.x>=ae&&(Bt=new t(ae,Lt.y+(Bt.y-Lt.y)*((ae-Lt.x)/(Bt.x-Lt.x)))._round()),Lt.y>=be&&Bt.y>=be||(Lt.y>=be?Lt=new t(Lt.x+(Bt.x-Lt.x)*((be-Lt.y)/(Bt.y-Lt.y)),be)._round():Bt.y>=be&&(Bt=new t(Lt.x+(Bt.x-Lt.x)*((be-Lt.y)/(Bt.y-Lt.y)),be)._round()),ut&&Lt.equals(ut[ut.length-1])||(ut=[Lt],Ee.push(ut)),ut.push(Bt)))))}return Ee}function Ff(A,P,q,ae){var be=[],Ee=A.image,Ne=Ee.pixelRatio,Qe=Ee.paddedRect.w-2,ut=Ee.paddedRect.h-2,wt=A.right-A.left,Lt=A.bottom-A.top,Bt=Ee.stretchX||[[0,Qe]],Ht=Ee.stretchY||[[0,ut]],Vt=function(yi,Ai){return yi+Ai[1]-Ai[0]},an=Bt.reduce(Vt,0),yn=Ht.reduce(Vt,0),On=Qe-an,Pn=ut-yn,Nn=0,Vn=an,Zn=0,Qn=yn,rr=0,_r=On,dr=0,Mr=Pn;if(Ee.content&&ae){var Cr=Ee.content;Nn=Du(Bt,0,Cr[0]),Zn=Du(Ht,0,Cr[1]),Vn=Du(Bt,Cr[0],Cr[2]),Qn=Du(Ht,Cr[1],Cr[3]),rr=Cr[0]-Nn,dr=Cr[1]-Zn,_r=Cr[2]-Cr[0]-Vn,Mr=Cr[3]-Cr[1]-Qn}var Ur=function(yi,Ai,Si,Pi){var Ti=Fu(yi.stretch-Nn,Vn,wt,A.left),ia=Bu(yi.fixed-rr,_r,yi.stretch,an),Ii=Fu(Ai.stretch-Zn,Qn,Lt,A.top),va=Bu(Ai.fixed-dr,Mr,Ai.stretch,yn),Ca=Fu(Si.stretch-Nn,Vn,wt,A.left),wa=Bu(Si.fixed-rr,_r,Si.stretch,an),Ya=Fu(Pi.stretch-Zn,Qn,Lt,A.top),Ta=Bu(Pi.fixed-dr,Mr,Pi.stretch,yn),oa=new t(Ti,Ii),ka=new t(Ca,Ii),ma=new t(Ca,Ya),sa=new t(Ti,Ya),Gr=new t(ia/Ne,va/Ne),ni=new t(wa/Ne,Ta/Ne),ji=P*Math.PI/180;if(ji){var _i=Math.sin(ji),Ri=Math.cos(ji),Oi=[Ri,-_i,_i,Ri];oa._matMult(Oi),ka._matMult(Oi),sa._matMult(Oi),ma._matMult(Oi)}var ai=yi.stretch+yi.fixed,Ui=Si.stretch+Si.fixed,Wa=Ai.stretch+Ai.fixed,vo=Pi.stretch+Pi.fixed;return{tl:oa,tr:ka,bl:sa,br:ma,tex:{x:Ee.paddedRect.x+1+ai,y:Ee.paddedRect.y+1+Wa,w:Ui-ai,h:vo-Wa},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Gr,pixelOffsetBR:ni,minFontScaleX:_r/Ne/wt,minFontScaleY:Mr/Ne/Lt,isSDF:q}};if(ae&&(Ee.stretchX||Ee.stretchY))for(var Or=Bf(Bt,On,an),jr=Bf(Ht,Pn,yn),zr=0;zr<Or.length-1;zr++)for(var Pr=Or[zr],Jr=Or[zr+1],qr=0;qr<jr.length-1;qr++){var wi=jr[qr],Br=jr[qr+1];be.push(Ur(Pr,wi,Jr,Br))}else be.push(Ur({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Qe+1},{fixed:0,stretch:ut+1}));return be}function Du(A,P,q){for(var ae=0,be=0,Ee=A;be<Ee.length;be+=1){var Ne=Ee[be];ae+=Math.max(P,Math.min(q,Ne[1]))-Math.max(P,Math.min(q,Ne[0]))}return ae}function Bf(A,P,q){for(var ae=[{fixed:-1,stretch:0}],be=0,Ee=A;be<Ee.length;be+=1){var Ne=Ee[be],Qe=Ne[0],ut=Ne[1],wt=ae[ae.length-1];ae.push({fixed:Qe-wt.stretch,stretch:wt.stretch}),ae.push({fixed:Qe-wt.stretch,stretch:wt.stretch+(ut-Qe)})}return ae.push({fixed:P+1,stretch:q}),ae}function Fu(A,P,q,ae){return A/P*q+ae}function Bu(A,P,q,ae){return A-P*q/ae}var Nu=function(A,P,q,ae,be,Ee,Ne,Qe,ut,wt){if(this.boxStartIndex=A.length,ut){var Lt=Ee.top,Bt=Ee.bottom,Ht=Ee.collisionPadding;Ht&&(Lt-=Ht[1],Bt+=Ht[3]);var Vt=Bt-Lt;Vt>0&&(Vt=Math.max(10,Vt),this.circleDiameter=Vt)}else{var an=Ee.top*Ne-Qe,yn=Ee.bottom*Ne+Qe,On=Ee.left*Ne-Qe,Pn=Ee.right*Ne+Qe,Nn=Ee.collisionPadding;if(Nn&&(On-=Nn[0]*Ne,an-=Nn[1]*Ne,Pn+=Nn[2]*Ne,yn+=Nn[3]*Ne),wt){var Vn=new t(On,an),Zn=new t(Pn,an),Qn=new t(On,yn),rr=new t(Pn,yn),_r=wt*Math.PI/180;Vn._rotate(_r),Zn._rotate(_r),Qn._rotate(_r),rr._rotate(_r),On=Math.min(Vn.x,Zn.x,Qn.x,rr.x),Pn=Math.max(Vn.x,Zn.x,Qn.x,rr.x),an=Math.min(Vn.y,Zn.y,Qn.y,rr.y),yn=Math.max(Vn.y,Zn.y,Qn.y,rr.y)}A.emplaceBack(P.x,P.y,On,an,Pn,yn,q,ae,be)}this.boxEndIndex=A.length},Dl=function(A,P){if(A===void 0&&(A=[]),P===void 0&&(P=Fp),this.data=A,this.length=this.data.length,this.compare=P,this.length>0)for(var q=(this.length>>1)-1;q>=0;q--)this._down(q)};function Fp(A,P){return A<P?-1:A>P?1:0}function Bp(A,P,q){P===void 0&&(P=1),q===void 0&&(q=!1);for(var ae=1/0,be=1/0,Ee=-1/0,Ne=-1/0,Qe=A[0],ut=0;ut<Qe.length;ut++){var wt=Qe[ut];(!ut||wt.x<ae)&&(ae=wt.x),(!ut||wt.y<be)&&(be=wt.y),(!ut||wt.x>Ee)&&(Ee=wt.x),(!ut||wt.y>Ne)&&(Ne=wt.y)}var Lt=Ee-ae,Bt=Ne-be,Ht=Math.min(Lt,Bt),Vt=Ht/2,an=new Dl([],Np);if(Ht===0)return new t(ae,be);for(var yn=ae;yn<Ee;yn+=Ht)for(var On=be;On<Ne;On+=Ht)an.push(new Fl(yn+Vt,On+Vt,Vt,A));for(var Pn=function(Zn){for(var Qn=0,rr=0,_r=0,dr=Zn[0],Mr=0,Cr=dr.length,Ur=Cr-1;Mr<Cr;Ur=Mr++){var Or=dr[Mr],jr=dr[Ur],zr=Or.x*jr.y-jr.x*Or.y;rr+=(Or.x+jr.x)*zr,_r+=(Or.y+jr.y)*zr,Qn+=3*zr}return new Fl(rr/Qn,_r/Qn,0,Zn)}(A),Nn=an.length;an.length;){var Vn=an.pop();(Vn.d>Pn.d||!Pn.d)&&(Pn=Vn,q&&console.log("found best %d after %d probes",Math.round(1e4*Vn.d)/1e4,Nn)),Vn.max-Pn.d<=P||(Vt=Vn.h/2,an.push(new Fl(Vn.p.x-Vt,Vn.p.y-Vt,Vt,A)),an.push(new Fl(Vn.p.x+Vt,Vn.p.y-Vt,Vt,A)),an.push(new Fl(Vn.p.x-Vt,Vn.p.y+Vt,Vt,A)),an.push(new Fl(Vn.p.x+Vt,Vn.p.y+Vt,Vt,A)),Nn+=4)}return q&&(console.log("num probes: "+Nn),console.log("best distance: "+Pn.d)),Pn.p}function Np(A,P){return P.max-A.max}function Fl(A,P,q,ae){this.p=new t(A,P),this.h=q,this.d=function(be,Ee){for(var Ne=!1,Qe=1/0,ut=0;ut<Ee.length;ut++)for(var wt=Ee[ut],Lt=0,Bt=wt.length,Ht=Bt-1;Lt<Bt;Ht=Lt++){var Vt=wt[Lt],an=wt[Ht];Vt.y>be.y!=an.y>be.y&&be.x<(an.x-Vt.x)*(be.y-Vt.y)/(an.y-Vt.y)+Vt.x&&(Ne=!Ne),Qe=Math.min(Qe,_u(be,Vt,an))}return(Ne?1:-1)*Math.sqrt(Qe)}(this.p,ae),this.max=this.d+this.h*Math.SQRT2}Dl.prototype.push=function(A){this.data.push(A),this.length++,this._up(this.length-1)},Dl.prototype.pop=function(){if(this.length!==0){var A=this.data[0],P=this.data.pop();return this.length--,this.length>0&&(this.data[0]=P,this._down(0)),A}},Dl.prototype.peek=function(){return this.data[0]},Dl.prototype._up=function(A){for(var P=this.data,q=this.compare,ae=P[A];A>0;){var be=A-1>>1,Ee=P[be];if(q(ae,Ee)>=0)break;P[A]=Ee,A=be}P[A]=ae},Dl.prototype._down=function(A){for(var P=this.data,q=this.compare,ae=this.length>>1,be=P[A];A<ae;){var Ee=1+(A<<1),Ne=P[Ee],Qe=Ee+1;if(Qe<this.length&&q(P[Qe],Ne)<0&&(Ee=Qe,Ne=P[Qe]),q(Ne,be)>=0)break;P[A]=Ne,A=Ee}P[A]=be};var Ac=Number.POSITIVE_INFINITY;function Nf(A,P){return P[1]!==Ac?function(q,ae,be){var Ee=0,Ne=0;switch(ae=Math.abs(ae),be=Math.abs(be),q){case"top-right":case"top-left":case"top":Ne=be-7;break;case"bottom-right":case"bottom-left":case"bottom":Ne=7-be}switch(q){case"top-right":case"bottom-right":case"right":Ee=-ae;break;case"top-left":case"bottom-left":case"left":Ee=ae}return[Ee,Ne]}(A,P[0],P[1]):function(q,ae){var be=0,Ee=0;ae<0&&(ae=0);var Ne=ae/Math.sqrt(2);switch(q){case"top-right":case"top-left":Ee=Ne-7;break;case"bottom-right":case"bottom-left":Ee=7-Ne;break;case"bottom":Ee=7-ae;break;case"top":Ee=ae-7}switch(q){case"top-right":case"bottom-right":be=-Ne;break;case"top-left":case"bottom-left":be=Ne;break;case"left":be=ae;break;case"right":be=-ae}return[be,Ee]}(A,P[0])}function Mc(A){switch(A){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var hl=32640;function jf(A,P,q,ae,be,Ee,Ne,Qe,ut,wt,Lt,Bt,Ht,Vt,an){var yn=function(Zn,Qn,rr,_r,dr,Mr,Cr,Ur){for(var Or=_r.layout.get("text-rotate").evaluate(Mr,{})*Math.PI/180,jr=[],zr=0,Pr=Qn.positionedLines;zr<Pr.length;zr+=1)for(var Jr=Pr[zr],qr=0,wi=Jr.positionedGlyphs;qr<wi.length;qr+=1){var Br=wi[qr];if(Br.rect){var yi=Br.rect||{},Ai=4,Si=!0,Pi=1,Ti=0,ia=(dr||Ur)&&Br.vertical,Ii=Br.metrics.advance*Br.scale/2;if(Ur&&Qn.verticalizable){var va=(Br.scale-1)*La,Ca=(La-Br.metrics.width*Br.scale)/2;Ti=Jr.lineOffset/2-(Br.imageName?-Ca:va)}if(Br.imageName){var wa=Cr[Br.imageName];Si=wa.sdf,Ai=1/(Pi=wa.pixelRatio)}var Ya=dr?[Br.x+Ii,Br.y]:[0,0],Ta=dr?[0,0]:[Br.x+Ii+rr[0],Br.y+rr[1]-Ti],oa=[0,0];ia&&(oa=Ta,Ta=[0,0]);var ka=(Br.metrics.left-Ai)*Br.scale-Ii+Ta[0],ma=(-Br.metrics.top-Ai)*Br.scale+Ta[1],sa=ka+yi.w*Br.scale/Pi,Gr=ma+yi.h*Br.scale/Pi,ni=new t(ka,ma),ji=new t(sa,ma),_i=new t(ka,Gr),Ri=new t(sa,Gr);if(ia){var Oi=new t(-Ii,Ii-Iu),ai=-Math.PI/2,Ui=12-Ii,Wa=Br.imageName?Ui:0,vo=new t(22-Ui,-Wa),Ua=new(Function.prototype.bind.apply(t,[null].concat(oa)));ni._rotateAround(ai,Oi)._add(vo)._add(Ua),ji._rotateAround(ai,Oi)._add(vo)._add(Ua),_i._rotateAround(ai,Oi)._add(vo)._add(Ua),Ri._rotateAround(ai,Oi)._add(vo)._add(Ua)}if(Or){var ws=Math.sin(Or),nl=Math.cos(Or),ya=[nl,-ws,ws,nl];ni._matMult(ya),ji._matMult(ya),_i._matMult(ya),Ri._matMult(ya)}var Ts=new t(0,0),as=new t(0,0);jr.push({tl:ni,tr:ji,bl:_i,br:Ri,tex:yi,writingMode:Qn.writingMode,glyphOffset:Ya,sectionIndex:Br.sectionIndex,isSDF:Si,pixelOffsetTL:Ts,pixelOffsetBR:as,minFontScaleX:0,minFontScaleY:0})}}return jr}(0,q,Qe,be,Ee,Ne,ae,A.allowVerticalPlacement),On=A.textSizeData,Pn=null;On.kind==="source"?(Pn=[Fs*be.layout.get("text-size").evaluate(Ne,{})])[0]>hl&&M(A.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):On.kind==="composite"&&((Pn=[Fs*Vt.compositeTextSizes[0].evaluate(Ne,{},an),Fs*Vt.compositeTextSizes[1].evaluate(Ne,{},an)])[0]>hl||Pn[1]>hl)&&M(A.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),A.addSymbols(A.text,yn,Pn,Qe,Ee,Ne,wt,P,ut.lineStartIndex,ut.lineLength,Ht,an);for(var Nn=0,Vn=Lt;Nn<Vn.length;Nn+=1)Bt[Vn[Nn]]=A.text.placedSymbolArray.length-1;return 4*yn.length}function Uf(A){for(var P in A)return A[P];return null}function jp(A,P,q,ae){var be=A.compareText;if(P in be){for(var Ee=be[P],Ne=Ee.length-1;Ne>=0;Ne--)if(ae.dist(Ee[Ne])<q)return!0}else be[P]=[];return be[P].push(ae),!1}var Up=Pl.VectorTileFeature.types,Vp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ju(A,P,q,ae,be,Ee,Ne,Qe,ut,wt,Lt,Bt,Ht){var Vt=Qe?Math.min(hl,Math.round(Qe[0])):0,an=Qe?Math.min(hl,Math.round(Qe[1])):0;A.emplaceBack(P,q,Math.round(32*ae),Math.round(32*be),Ee,Ne,(Vt<<1)+(ut?1:0),an,16*wt,16*Lt,256*Bt,256*Ht)}function Sc(A,P,q){A.emplaceBack(P.x,P.y,q),A.emplaceBack(P.x,P.y,q),A.emplaceBack(P.x,P.y,q),A.emplaceBack(P.x,P.y,q)}function Hp(A){for(var P=0,q=A.sections;P<q.length;P+=1)if(co(q[P].text))return!0;return!1}var Bl=function(A){this.layoutVertexArray=new xt,this.indexArray=new Be,this.programConfigurations=A,this.segments=new tn,this.dynamicLayoutVertexArray=new B,this.opacityVertexArray=new G,this.placedSymbolArray=new rt};Bl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Bl.prototype.upload=function(A,P,q,ae){this.isEmpty()||(q&&(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,bc.members),this.indexBuffer=A.createIndexBuffer(this.indexArray,P),this.dynamicLayoutVertexBuffer=A.createVertexBuffer(this.dynamicLayoutVertexArray,vp.members,!0),this.opacityVertexBuffer=A.createVertexBuffer(this.opacityVertexArray,Vp,!0),this.opacityVertexBuffer.itemSize=1),(q||ae)&&this.programConfigurations.upload(A))},Bl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},wr("SymbolBuffers",Bl);var au=function(A,P,q){this.layoutVertexArray=new A,this.layoutAttributes=P,this.indexArray=new q,this.segments=new tn,this.collisionVertexArray=new Le};au.prototype.upload=function(A){this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=A.createVertexBuffer(this.collisionVertexArray,mp.members,!0)},au.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},wr("CollisionBuffers",au);var mi=function(A){this.collisionBoxArray=A.collisionBoxArray,this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(Ne){return Ne.id}),this.index=A.index,this.pixelRatio=A.pixelRatio,this.sourceLayerIndex=A.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=uc([]),this.placementViewportMatrix=uc([]);var P=this.layers[0]._unevaluatedLayout._values;this.textSizeData=kc(this.zoom,P["text-size"]),this.iconSizeData=kc(this.zoom,P["icon-size"]);var q=this.layers[0].layout,ae=q.get("symbol-sort-key"),be=q.get("symbol-z-order");this.sortFeaturesByKey=be!=="viewport-y"&&ae.constantOr(1)!==void 0;var Ee=be==="viewport-y"||be==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Ee&&(q.get("text-allow-overlap")||q.get("icon-allow-overlap")||q.get("text-ignore-placement")||q.get("icon-ignore-placement")),q.get("symbol-placement")==="point"&&(this.writingModes=q.get("text-writing-mode").map(function(Ne){return Lo[Ne]})),this.stateDependentLayerIds=this.layers.filter(function(Ne){return Ne.isStateDependent()}).map(function(Ne){return Ne.id}),this.sourceID=A.sourceID};mi.prototype.createArrays=function(){this.text=new Bl(new Li(bc.members,this.layers,this.zoom,function(A){return/^text/.test(A)})),this.icon=new Bl(new Li(bc.members,this.layers,this.zoom,function(A){return/^icon/.test(A)})),this.glyphOffsetArray=new Dt,this.lineVertexArray=new Ft,this.symbolInstances=new Ct},mi.prototype.calculateGlyphDependencies=function(A,P,q,ae,be){for(var Ee=0;Ee<A.length;Ee++)if(P[A.charCodeAt(Ee)]=!0,(q||ae)&&be){var Ne=nu[A.charAt(Ee)];Ne&&(P[Ne.charCodeAt(0)]=!0)}},mi.prototype.populate=function(A,P,q){var ae=this.layers[0],be=ae.layout,Ee=be.get("text-font"),Ne=be.get("text-field"),Qe=be.get("icon-image"),ut=(Ne.value.kind!=="constant"||Ne.value.value instanceof zn&&!Ne.value.value.isEmpty()||Ne.value.value.toString().length>0)&&(Ee.value.kind!=="constant"||Ee.value.value.length>0),wt=Qe.value.kind!=="constant"||!!Qe.value.value||Object.keys(Qe.parameters).length>0,Lt=be.get("symbol-sort-key");if(this.features=[],ut||wt){for(var Bt=P.iconDependencies,Ht=P.glyphDependencies,Vt=P.availableImages,an=new ri(this.zoom),yn=0,On=A;yn<On.length;yn+=1){var Pn=On[yn],Nn=Pn.feature,Vn=Pn.id,Zn=Pn.index,Qn=Pn.sourceLayerIndex,rr=ae._featureFilter.needGeometry,_r={type:Nn.type,id:Vn,properties:Nn.properties,geometry:rr?Mi(Nn):[]};if(ae._featureFilter.filter(an,_r,q)){rr||(_r.geometry=Mi(Nn));var dr=void 0;if(ut){var Mr=ae.getValueAndResolveTokens("text-field",_r,q,Vt),Cr=zn.factory(Mr);Hp(Cr)&&(this.hasRTLText=!0),(!this.hasRTLText||Ba()==="unavailable"||this.hasRTLText&&fa.isParsed())&&(dr=xp(Cr,ae,_r))}var Ur=void 0;if(wt){var Or=ae.getValueAndResolveTokens("icon-image",_r,q,Vt);Ur=Or instanceof Fn?Or:Fn.fromString(Or)}if(dr||Ur){var jr=this.sortFeaturesByKey?Lt.evaluate(_r,{},q):void 0,zr={id:Vn,text:dr,icon:Ur,index:Zn,sourceLayerIndex:Qn,geometry:Mi(Nn),properties:Nn.properties,type:Up[Nn.type],sortKey:jr};if(this.features.push(zr),Ur&&(Bt[Ur.name]=!0),dr){var Pr=Ee.evaluate(_r,{},q).join(","),Jr=be.get("text-rotation-alignment")==="map"&&be.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Lo.vertical)>=0;for(var qr=0,wi=dr.sections;qr<wi.length;qr+=1){var Br=wi[qr];if(Br.image)Bt[Br.image.name]=!0;else{var yi=ns(dr.toString()),Ai=Br.fontStack||Pr,Si=Ht[Ai]=Ht[Ai]||{};this.calculateGlyphDependencies(Br.text,Si,Jr,this.allowVerticalPlacement,yi)}}}}}}be.get("symbol-placement")==="line"&&(this.features=function(Pi){var Ti={},ia={},Ii=[],va=0;function Ca(Ri){Ii.push(Pi[Ri]),va++}function wa(Ri,Oi,ai){var Ui=ia[Ri];return delete ia[Ri],ia[Oi]=Ui,Ii[Ui].geometry[0].pop(),Ii[Ui].geometry[0]=Ii[Ui].geometry[0].concat(ai[0]),Ui}function Ya(Ri,Oi,ai){var Ui=Ti[Oi];return delete Ti[Oi],Ti[Ri]=Ui,Ii[Ui].geometry[0].shift(),Ii[Ui].geometry[0]=ai[0].concat(Ii[Ui].geometry[0]),Ui}function Ta(Ri,Oi,ai){var Ui=ai?Oi[0][Oi[0].length-1]:Oi[0][0];return Ri+":"+Ui.x+":"+Ui.y}for(var oa=0;oa<Pi.length;oa++){var ka=Pi[oa],ma=ka.geometry,sa=ka.text?ka.text.toString():null;if(sa){var Gr=Ta(sa,ma),ni=Ta(sa,ma,!0);if(Gr in ia&&ni in Ti&&ia[Gr]!==Ti[ni]){var ji=Ya(Gr,ni,ma),_i=wa(Gr,ni,Ii[ji].geometry);delete Ti[Gr],delete ia[ni],ia[Ta(sa,Ii[_i].geometry,!0)]=_i,Ii[ji].geometry=null}else Gr in ia?wa(Gr,ni,ma):ni in Ti?Ya(Gr,ni,ma):(Ca(oa),Ti[Gr]=va-1,ia[ni]=va-1)}else Ca(oa)}return Ii.filter(function(Ri){return Ri.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Pi,Ti){return Pi.sortKey-Ti.sortKey})}},mi.prototype.update=function(A,P,q){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(A,P,this.layers,q),this.icon.programConfigurations.updatePaintArrays(A,P,this.layers,q))},mi.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},mi.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},mi.prototype.upload=function(A){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(A),this.iconCollisionBox.upload(A)),this.text.upload(A,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(A,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},mi.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},mi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},mi.prototype.addToLineVertexArray=function(A,P){var q=this.lineVertexArray.length;if(A.segment!==void 0){for(var ae=A.dist(P[A.segment+1]),be=A.dist(P[A.segment]),Ee={},Ne=A.segment+1;Ne<P.length;Ne++)Ee[Ne]={x:P[Ne].x,y:P[Ne].y,tileUnitDistanceFromAnchor:ae},Ne<P.length-1&&(ae+=P[Ne+1].dist(P[Ne]));for(var Qe=A.segment||0;Qe>=0;Qe--)Ee[Qe]={x:P[Qe].x,y:P[Qe].y,tileUnitDistanceFromAnchor:be},Qe>0&&(be+=P[Qe-1].dist(P[Qe]));for(var ut=0;ut<P.length;ut++){var wt=Ee[ut];this.lineVertexArray.emplaceBack(wt.x,wt.y,wt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:q,lineLength:this.lineVertexArray.length-q}},mi.prototype.addSymbols=function(A,P,q,ae,be,Ee,Ne,Qe,ut,wt,Lt,Bt){for(var Ht=A.indexArray,Vt=A.layoutVertexArray,an=A.segments.prepareSegment(4*P.length,Vt,Ht,Ee.sortKey),yn=this.glyphOffsetArray.length,On=an.vertexLength,Pn=this.allowVerticalPlacement&&Ne===Lo.vertical?Math.PI/2:0,Nn=Ee.text&&Ee.text.sections,Vn=0;Vn<P.length;Vn++){var Zn=P[Vn],Qn=Zn.tl,rr=Zn.tr,_r=Zn.bl,dr=Zn.br,Mr=Zn.tex,Cr=Zn.pixelOffsetTL,Ur=Zn.pixelOffsetBR,Or=Zn.minFontScaleX,jr=Zn.minFontScaleY,zr=Zn.glyphOffset,Pr=Zn.isSDF,Jr=Zn.sectionIndex,qr=an.vertexLength,wi=zr[1];ju(Vt,Qe.x,Qe.y,Qn.x,wi+Qn.y,Mr.x,Mr.y,q,Pr,Cr.x,Cr.y,Or,jr),ju(Vt,Qe.x,Qe.y,rr.x,wi+rr.y,Mr.x+Mr.w,Mr.y,q,Pr,Ur.x,Cr.y,Or,jr),ju(Vt,Qe.x,Qe.y,_r.x,wi+_r.y,Mr.x,Mr.y+Mr.h,q,Pr,Cr.x,Ur.y,Or,jr),ju(Vt,Qe.x,Qe.y,dr.x,wi+dr.y,Mr.x+Mr.w,Mr.y+Mr.h,q,Pr,Ur.x,Ur.y,Or,jr),Sc(A.dynamicLayoutVertexArray,Qe,Pn),Ht.emplaceBack(qr,qr+1,qr+2),Ht.emplaceBack(qr+1,qr+2,qr+3),an.vertexLength+=4,an.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(zr[0]),Vn!==P.length-1&&Jr===P[Vn+1].sectionIndex||A.programConfigurations.populatePaintArrays(Vt.length,Ee,Ee.index,{},Bt,Nn&&Nn[Jr])}A.placedSymbolArray.emplaceBack(Qe.x,Qe.y,yn,this.glyphOffsetArray.length-yn,On,ut,wt,Qe.segment,q?q[0]:0,q?q[1]:0,ae[0],ae[1],Ne,0,!1,0,Lt)},mi.prototype._addCollisionDebugVertex=function(A,P,q,ae,be,Ee){return P.emplaceBack(0,0),A.emplaceBack(q.x,q.y,ae,be,Math.round(Ee.x),Math.round(Ee.y))},mi.prototype.addCollisionDebugVertices=function(A,P,q,ae,be,Ee,Ne){var Qe=be.segments.prepareSegment(4,be.layoutVertexArray,be.indexArray),ut=Qe.vertexLength,wt=be.layoutVertexArray,Lt=be.collisionVertexArray,Bt=Ne.anchorX,Ht=Ne.anchorY;this._addCollisionDebugVertex(wt,Lt,Ee,Bt,Ht,new t(A,P)),this._addCollisionDebugVertex(wt,Lt,Ee,Bt,Ht,new t(q,P)),this._addCollisionDebugVertex(wt,Lt,Ee,Bt,Ht,new t(q,ae)),this._addCollisionDebugVertex(wt,Lt,Ee,Bt,Ht,new t(A,ae)),Qe.vertexLength+=4;var Vt=be.indexArray;Vt.emplaceBack(ut,ut+1),Vt.emplaceBack(ut+1,ut+2),Vt.emplaceBack(ut+2,ut+3),Vt.emplaceBack(ut+3,ut),Qe.primitiveLength+=4},mi.prototype.addDebugCollisionBoxes=function(A,P,q,ae){for(var be=A;be<P;be++){var Ee=this.collisionBoxArray.get(be),Ne=Ee.x1,Qe=Ee.y1,ut=Ee.x2,wt=Ee.y2;this.addCollisionDebugVertices(Ne,Qe,ut,wt,ae?this.textCollisionBox:this.iconCollisionBox,Ee.anchorPoint,q)}},mi.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new au(te,vf.members,he),this.iconCollisionBox=new au(te,vf.members,he);for(var A=0;A<this.symbolInstances.length;A++){var P=this.symbolInstances.get(A);this.addDebugCollisionBoxes(P.textBoxStartIndex,P.textBoxEndIndex,P,!0),this.addDebugCollisionBoxes(P.verticalTextBoxStartIndex,P.verticalTextBoxEndIndex,P,!0),this.addDebugCollisionBoxes(P.iconBoxStartIndex,P.iconBoxEndIndex,P,!1),this.addDebugCollisionBoxes(P.verticalIconBoxStartIndex,P.verticalIconBoxEndIndex,P,!1)}},mi.prototype._deserializeCollisionBoxesForSymbol=function(A,P,q,ae,be,Ee,Ne,Qe,ut){for(var wt={},Lt=P;Lt<q;Lt++){var Bt=A.get(Lt);wt.textBox={x1:Bt.x1,y1:Bt.y1,x2:Bt.x2,y2:Bt.y2,anchorPointX:Bt.anchorPointX,anchorPointY:Bt.anchorPointY},wt.textFeatureIndex=Bt.featureIndex;break}for(var Ht=ae;Ht<be;Ht++){var Vt=A.get(Ht);wt.verticalTextBox={x1:Vt.x1,y1:Vt.y1,x2:Vt.x2,y2:Vt.y2,anchorPointX:Vt.anchorPointX,anchorPointY:Vt.anchorPointY},wt.verticalTextFeatureIndex=Vt.featureIndex;break}for(var an=Ee;an<Ne;an++){var yn=A.get(an);wt.iconBox={x1:yn.x1,y1:yn.y1,x2:yn.x2,y2:yn.y2,anchorPointX:yn.anchorPointX,anchorPointY:yn.anchorPointY},wt.iconFeatureIndex=yn.featureIndex;break}for(var On=Qe;On<ut;On++){var Pn=A.get(On);wt.verticalIconBox={x1:Pn.x1,y1:Pn.y1,x2:Pn.x2,y2:Pn.y2,anchorPointX:Pn.anchorPointX,anchorPointY:Pn.anchorPointY},wt.verticalIconFeatureIndex=Pn.featureIndex;break}return wt},mi.prototype.deserializeCollisionBoxes=function(A){this.collisionArrays=[];for(var P=0;P<this.symbolInstances.length;P++){var q=this.symbolInstances.get(P);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(A,q.textBoxStartIndex,q.textBoxEndIndex,q.verticalTextBoxStartIndex,q.verticalTextBoxEndIndex,q.iconBoxStartIndex,q.iconBoxEndIndex,q.verticalIconBoxStartIndex,q.verticalIconBoxEndIndex))}},mi.prototype.hasTextData=function(){return this.text.segments.get().length>0},mi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},mi.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},mi.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},mi.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},mi.prototype.addIndicesForPlacedSymbol=function(A,P){for(var q=A.placedSymbolArray.get(P),ae=q.vertexStartIndex+4*q.numGlyphs,be=q.vertexStartIndex;be<ae;be+=4)A.indexArray.emplaceBack(be,be+1,be+2),A.indexArray.emplaceBack(be+1,be+2,be+3)},mi.prototype.getSortedSymbolIndexes=function(A){if(this.sortedAngle===A&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var P=Math.sin(A),q=Math.cos(A),ae=[],be=[],Ee=[],Ne=0;Ne<this.symbolInstances.length;++Ne){Ee.push(Ne);var Qe=this.symbolInstances.get(Ne);ae.push(0|Math.round(P*Qe.anchorX+q*Qe.anchorY)),be.push(Qe.featureIndex)}return Ee.sort(function(ut,wt){return ae[ut]-ae[wt]||be[wt]-be[ut]}),Ee},mi.prototype.addToSortKeyRanges=function(A,P){var q=this.sortKeyRanges[this.sortKeyRanges.length-1];q&&q.sortKey===P?q.symbolInstanceEnd=A+1:this.sortKeyRanges.push({sortKey:P,symbolInstanceStart:A,symbolInstanceEnd:A+1})},mi.prototype.sortFeatures=function(A){var P=this;if(this.sortFeaturesByY&&this.sortedAngle!==A&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(A),this.sortedAngle=A,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var q=0,ae=this.symbolInstanceIndexes;q<ae.length;q+=1){var be=ae[q],Ee=this.symbolInstances.get(be);this.featureSortOrder.push(Ee.featureIndex),[Ee.rightJustifiedTextSymbolIndex,Ee.centerJustifiedTextSymbolIndex,Ee.leftJustifiedTextSymbolIndex].forEach(function(Ne,Qe,ut){Ne>=0&&ut.indexOf(Ne)===Qe&&P.addIndicesForPlacedSymbol(P.text,Ne)}),Ee.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Ee.verticalPlacedTextSymbolIndex),Ee.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ee.placedIconSymbolIndex),Ee.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ee.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},wr("SymbolBucket",mi,{omit:["layers","collisionBoxArray","features","compareText"]}),mi.MAX_GLYPHS=65535,mi.addDynamicAttributes=Sc;var qp=new Qi({"symbol-placement":new Lr(Se.layout_symbol["symbol-placement"]),"symbol-spacing":new Lr(Se.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Lr(Se.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ir(Se.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Lr(Se.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Lr(Se.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Lr(Se.layout_symbol["icon-ignore-placement"]),"icon-optional":new Lr(Se.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Lr(Se.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ir(Se.layout_symbol["icon-size"]),"icon-text-fit":new Lr(Se.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Lr(Se.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ir(Se.layout_symbol["icon-image"]),"icon-rotate":new Ir(Se.layout_symbol["icon-rotate"]),"icon-padding":new Lr(Se.layout_symbol["icon-padding"]),"icon-keep-upright":new Lr(Se.layout_symbol["icon-keep-upright"]),"icon-offset":new Ir(Se.layout_symbol["icon-offset"]),"icon-anchor":new Ir(Se.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Lr(Se.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Lr(Se.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Lr(Se.layout_symbol["text-rotation-alignment"]),"text-field":new Ir(Se.layout_symbol["text-field"]),"text-font":new Ir(Se.layout_symbol["text-font"]),"text-size":new Ir(Se.layout_symbol["text-size"]),"text-max-width":new Ir(Se.layout_symbol["text-max-width"]),"text-line-height":new Lr(Se.layout_symbol["text-line-height"]),"text-letter-spacing":new Ir(Se.layout_symbol["text-letter-spacing"]),"text-justify":new Ir(Se.layout_symbol["text-justify"]),"text-radial-offset":new Ir(Se.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Lr(Se.layout_symbol["text-variable-anchor"]),"text-anchor":new Ir(Se.layout_symbol["text-anchor"]),"text-max-angle":new Lr(Se.layout_symbol["text-max-angle"]),"text-writing-mode":new Lr(Se.layout_symbol["text-writing-mode"]),"text-rotate":new Ir(Se.layout_symbol["text-rotate"]),"text-padding":new Lr(Se.layout_symbol["text-padding"]),"text-keep-upright":new Lr(Se.layout_symbol["text-keep-upright"]),"text-transform":new Ir(Se.layout_symbol["text-transform"]),"text-offset":new Ir(Se.layout_symbol["text-offset"]),"text-allow-overlap":new Lr(Se.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Lr(Se.layout_symbol["text-ignore-placement"]),"text-optional":new Lr(Se.layout_symbol["text-optional"])}),Ec={paint:new Qi({"icon-opacity":new Ir(Se.paint_symbol["icon-opacity"]),"icon-color":new Ir(Se.paint_symbol["icon-color"]),"icon-halo-color":new Ir(Se.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ir(Se.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ir(Se.paint_symbol["icon-halo-blur"]),"icon-translate":new Lr(Se.paint_symbol["icon-translate"]),"icon-translate-anchor":new Lr(Se.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ir(Se.paint_symbol["text-opacity"]),"text-color":new Ir(Se.paint_symbol["text-color"],{runtimeType:It,getOverride:function(A){return A.textColor},hasOverride:function(A){return!!A.textColor}}),"text-halo-color":new Ir(Se.paint_symbol["text-halo-color"]),"text-halo-width":new Ir(Se.paint_symbol["text-halo-width"]),"text-halo-blur":new Ir(Se.paint_symbol["text-halo-blur"]),"text-translate":new Lr(Se.paint_symbol["text-translate"]),"text-translate-anchor":new Lr(Se.paint_symbol["text-translate-anchor"])}),layout:qp},Nl=function(A){this.type=A.property.overrides?A.property.overrides.runtimeType:ht,this.defaultValue=A};Nl.prototype.evaluate=function(A){if(A.formattedSection){var P=this.defaultValue.property.overrides;if(P&&P.hasOverride(A.formattedSection))return P.getOverride(A.formattedSection)}return A.feature&&A.featureState?this.defaultValue.evaluate(A.feature,A.featureState):this.defaultValue.property.specification.default},Nl.prototype.eachChild=function(A){this.defaultValue.isConstant()||A(this.defaultValue.value._styleExpression.expression)},Nl.prototype.outputDefined=function(){return!1},Nl.prototype.serialize=function(){return null},wr("FormatSectionOverride",Nl,{omit:["defaultValue"]});var Gp=function(A){function P(q){A.call(this,q,Ec)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.recalculate=function(q,ae){if(A.prototype.recalculate.call(this,q,ae),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var be=this.layout.get("text-writing-mode");if(be){for(var Ee=[],Ne=0,Qe=be;Ne<Qe.length;Ne+=1){var ut=Qe[Ne];Ee.indexOf(ut)<0&&Ee.push(ut)}this.layout._values["text-writing-mode"]=Ee}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},P.prototype.getValueAndResolveTokens=function(q,ae,be,Ee){var Ne=this.layout.get(q).evaluate(ae,{},be,Ee),Qe=this._unevaluatedLayout._values[q];return Qe.isDataDriven()||Jo(Qe.value)||!Ne?Ne:function(ut,wt){return wt.replace(/{([^{}]+)}/g,function(Lt,Bt){return Bt in ut?String(ut[Bt]):""})}(ae.properties,Ne)},P.prototype.createBucket=function(q){return new mi(q)},P.prototype.queryRadius=function(){return 0},P.prototype.queryIntersectsFeature=function(){return!1},P.prototype._setPaintOverrides=function(){for(var q=0,ae=Ec.paint.overridableProperties;q<ae.length;q+=1){var be=ae[q];if(P.hasPaintOverride(this.layout,be)){var Ee,Ne=this.paint.get(be),Qe=new Nl(Ne),ut=new cs(Qe,Ne.property.specification);Ee=Ne.value.kind==="constant"||Ne.value.kind==="source"?new zo("source",ut):new Ro("composite",ut,Ne.value.zoomStops,Ne.value._interpolationType),this.paint._values[be]=new $i(Ne.property,Ee,Ne.parameters)}}},P.prototype._handleOverridablePaintPropertyUpdate=function(q,ae,be){return!(!this.layout||ae.isDataDriven()||be.isDataDriven())&&P.hasPaintOverride(this.layout,q)},P.hasPaintOverride=function(q,ae){var be=q.get("text-field"),Ee=Ec.paint.properties[ae],Ne=!1,Qe=function(Lt){for(var Bt=0,Ht=Lt;Bt<Ht.length;Bt+=1){var Vt=Ht[Bt];if(Ee.overrides&&Ee.overrides.hasOverride(Vt))return void(Ne=!0)}};if(be.value.kind==="constant"&&be.value.value instanceof zn)Qe(be.value.value.sections);else if(be.value.kind==="source"){var ut=function(Lt){if(!Ne)if(Lt instanceof ur&&Xn(Lt.value)===Yt){var Bt=Lt.value;Qe(Bt.sections)}else Lt instanceof Gt?Qe(Lt.sections):Lt.eachChild(ut)},wt=be.value;wt._styleExpression&&ut(wt._styleExpression.expression)}return Ne},P}(pa),Zp={paint:new Qi({"background-color":new Lr(Se.paint_background["background-color"]),"background-pattern":new ho(Se.paint_background["background-pattern"]),"background-opacity":new Lr(Se.paint_background["background-opacity"])})},Yp=function(A){function P(q){A.call(this,q,Zp)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P}(pa),Wp={paint:new Qi({"raster-opacity":new Lr(Se.paint_raster["raster-opacity"]),"raster-hue-rotate":new Lr(Se.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Lr(Se.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Lr(Se.paint_raster["raster-brightness-max"]),"raster-saturation":new Lr(Se.paint_raster["raster-saturation"]),"raster-contrast":new Lr(Se.paint_raster["raster-contrast"]),"raster-resampling":new Lr(Se.paint_raster["raster-resampling"]),"raster-fade-duration":new Lr(Se.paint_raster["raster-fade-duration"])})},Xp=function(A){function P(q){A.call(this,q,Wp)}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P}(pa),Jp=function(A){function P(q){A.call(this,q,{}),this.implementation=q}return A&&(P.__proto__=A),P.prototype=Object.create(A&&A.prototype),P.prototype.constructor=P,P.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},P.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},P.prototype.recalculate=function(){},P.prototype.updateTransitions=function(){},P.prototype.hasTransition=function(){},P.prototype.serialize=function(){},P.prototype.onAdd=function(q){this.implementation.onAdd&&this.implementation.onAdd(q,q.painter.context.gl)},P.prototype.onRemove=function(q){this.implementation.onRemove&&this.implementation.onRemove(q,q.painter.context.gl)},P}(pa),Kp={circle:Dh,heatmap:Bh,hillshade:jh,fill:np,"fill-extrusion":cp,line:gp,symbol:Gp,background:Yp,raster:Xp},Vf=self.HTMLImageElement,Hf=self.HTMLCanvasElement,qf=self.HTMLVideoElement,Gf=self.ImageData,Uu=self.ImageBitmap,bl=function(A,P,q,ae){this.context=A,this.format=q,this.texture=A.gl.createTexture(),this.update(P,ae)};bl.prototype.update=function(A,P,q){var ae=A.width,be=A.height,Ee=!(this.size&&this.size[0]===ae&&this.size[1]===be||q),Ne=this.context,Qe=Ne.gl;if(this.useMipmap=!!(P&&P.useMipmap),Qe.bindTexture(Qe.TEXTURE_2D,this.texture),Ne.pixelStoreUnpackFlipY.set(!1),Ne.pixelStoreUnpack.set(1),Ne.pixelStoreUnpackPremultiplyAlpha.set(this.format===Qe.RGBA&&(!P||P.premultiply!==!1)),Ee)this.size=[ae,be],A instanceof Vf||A instanceof Hf||A instanceof qf||A instanceof Gf||Uu&&A instanceof Uu?Qe.texImage2D(Qe.TEXTURE_2D,0,this.format,this.format,Qe.UNSIGNED_BYTE,A):Qe.texImage2D(Qe.TEXTURE_2D,0,this.format,ae,be,0,this.format,Qe.UNSIGNED_BYTE,A.data);else{var ut=q||{x:0,y:0},wt=ut.x,Lt=ut.y;A instanceof Vf||A instanceof Hf||A instanceof qf||A instanceof Gf||Uu&&A instanceof Uu?Qe.texSubImage2D(Qe.TEXTURE_2D,0,wt,Lt,Qe.RGBA,Qe.UNSIGNED_BYTE,A):Qe.texSubImage2D(Qe.TEXTURE_2D,0,wt,Lt,ae,be,Qe.RGBA,Qe.UNSIGNED_BYTE,A.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Qe.generateMipmap(Qe.TEXTURE_2D)},bl.prototype.bind=function(A,P,q){var ae=this.context.gl;ae.bindTexture(ae.TEXTURE_2D,this.texture),q!==ae.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(q=ae.LINEAR),A!==this.filter&&(ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MAG_FILTER,A),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MIN_FILTER,q||A),this.filter=A),P!==this.wrap&&(ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_S,P),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_T,P),this.wrap=P)},bl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},bl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Lc=function(A){var P=this;this._callback=A,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){P._triggered=!1,P._callback()})};Lc.prototype.trigger=function(){var A=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){A._triggered=!1,A._callback()},0))},Lc.prototype.remove=function(){delete this._channel,this._callback=function(){}};var jl=function(A,P,q){this.target=A,this.parent=P,this.mapId=q,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},g(["receive","process"],this),this.invoker=new Lc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=L()?A:self};function Zf(A,P,q){var ae=2*Math.PI*6378137/256/Math.pow(2,q);return[A*ae-2*Math.PI*6378137/2,P*ae-2*Math.PI*6378137/2]}jl.prototype.send=function(A,P,q,ae,be){var Ee=this;be===void 0&&(be=!1);var Ne=Math.round(1e18*Math.random()).toString(36).substring(0,10);q&&(this.callbacks[Ne]=q);var Qe=I(this.globalScope)?void 0:[];return this.target.postMessage({id:Ne,type:A,hasCallback:!!q,targetMapId:ae,mustQueue:be,sourceMapId:this.mapId,data:Qo(P,Qe)},Qe),{cancel:function(){q&&delete Ee.callbacks[Ne],Ee.target.postMessage({id:Ne,type:"<cancel>",targetMapId:ae,sourceMapId:Ee.mapId})}}},jl.prototype.receive=function(A){var P=A.data,q=P.id;if(q&&(!P.targetMapId||this.mapId===P.targetMapId))if(P.type==="<cancel>"){delete this.tasks[q];var ae=this.cancelCallbacks[q];delete this.cancelCallbacks[q],ae&&ae()}else L()||P.mustQueue?(this.tasks[q]=P,this.taskQueue.push(q),this.invoker.trigger()):this.processTask(q,P)},jl.prototype.process=function(){if(this.taskQueue.length){var A=this.taskQueue.shift(),P=this.tasks[A];delete this.tasks[A],this.taskQueue.length&&this.invoker.trigger(),P&&this.processTask(A,P)}},jl.prototype.processTask=function(A,P){var q=this;if(P.type==="<response>"){var ae=this.callbacks[A];delete this.callbacks[A],ae&&(P.error?ae(es(P.error)):ae(null,es(P.data)))}else{var be=!1,Ee=I(this.globalScope)?void 0:[],Ne=P.hasCallback?function(Lt,Bt){be=!0,delete q.cancelCallbacks[A],q.target.postMessage({id:A,type:"<response>",sourceMapId:q.mapId,error:Lt?Qo(Lt):null,data:Qo(Bt,Ee)},Ee)}:function(Lt){be=!0},Qe=null,ut=es(P.data);if(this.parent[P.type])Qe=this.parent[P.type](P.sourceMapId,ut,Ne);else if(this.parent.getWorkerSource){var wt=P.type.split(".");Qe=this.parent.getWorkerSource(P.sourceMapId,wt[0],ut.source)[wt[1]](ut,Ne)}else Ne(new Error("Could not find function "+P.type));!be&&Qe&&Qe.cancel&&(this.cancelCallbacks[A]=Qe.cancel)}},jl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var na=function(A,P){A&&(P?this.setSouthWest(A).setNorthEast(P):A.length===4?this.setSouthWest([A[0],A[1]]).setNorthEast([A[2],A[3]]):this.setSouthWest(A[0]).setNorthEast(A[1]))};na.prototype.setNorthEast=function(A){return this._ne=A instanceof Ci?new Ci(A.lng,A.lat):Ci.convert(A),this},na.prototype.setSouthWest=function(A){return this._sw=A instanceof Ci?new Ci(A.lng,A.lat):Ci.convert(A),this},na.prototype.extend=function(A){var P,q,ae=this._sw,be=this._ne;if(A instanceof Ci)P=A,q=A;else{if(!(A instanceof na)){if(Array.isArray(A)){if(A.length===4||A.every(Array.isArray)){var Ee=A;return this.extend(na.convert(Ee))}var Ne=A;return this.extend(Ci.convert(Ne))}return this}if(P=A._sw,q=A._ne,!P||!q)return this}return ae||be?(ae.lng=Math.min(P.lng,ae.lng),ae.lat=Math.min(P.lat,ae.lat),be.lng=Math.max(q.lng,be.lng),be.lat=Math.max(q.lat,be.lat)):(this._sw=new Ci(P.lng,P.lat),this._ne=new Ci(q.lng,q.lat)),this},na.prototype.getCenter=function(){return new Ci((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},na.prototype.getSouthWest=function(){return this._sw},na.prototype.getNorthEast=function(){return this._ne},na.prototype.getNorthWest=function(){return new Ci(this.getWest(),this.getNorth())},na.prototype.getSouthEast=function(){return new Ci(this.getEast(),this.getSouth())},na.prototype.getWest=function(){return this._sw.lng},na.prototype.getSouth=function(){return this._sw.lat},na.prototype.getEast=function(){return this._ne.lng},na.prototype.getNorth=function(){return this._ne.lat},na.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},na.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},na.prototype.isEmpty=function(){return!(this._sw&&this._ne)},na.prototype.contains=function(A){var P=Ci.convert(A),q=P.lng,ae=P.lat,be=this._sw.lat<=ae&&ae<=this._ne.lat,Ee=this._sw.lng<=q&&q<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Ee=this._sw.lng>=q&&q>=this._ne.lng),be&&Ee},na.convert=function(A){return!A||A instanceof na?A:new na(A)};var Yf=63710088e-1,Ci=function(A,P){if(isNaN(A)||isNaN(P))throw new Error("Invalid LngLat object: ("+A+", "+P+")");if(this.lng=+A,this.lat=+P,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ci.prototype.wrap=function(){return new Ci(i(this.lng,-180,180),this.lat)},Ci.prototype.toArray=function(){return[this.lng,this.lat]},Ci.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ci.prototype.distanceTo=function(A){var P=Math.PI/180,q=this.lat*P,ae=A.lat*P,be=Math.sin(q)*Math.sin(ae)+Math.cos(q)*Math.cos(ae)*Math.cos((A.lng-this.lng)*P);return Yf*Math.acos(Math.min(be,1))},Ci.prototype.toBounds=function(A){A===void 0&&(A=0);var P=360*A/40075017,q=P/Math.cos(Math.PI/180*this.lat);return new na(new Ci(this.lng-q,this.lat-P),new Ci(this.lng+q,this.lat+P))},Ci.convert=function(A){if(A instanceof Ci)return A;if(Array.isArray(A)&&(A.length===2||A.length===3))return new Ci(Number(A[0]),Number(A[1]));if(!Array.isArray(A)&&typeof A=="object"&&A!==null)return new Ci(Number("lng"in A?A.lng:A.lon),Number(A.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Wf=2*Math.PI*Yf;function Xf(A){return Wf*Math.cos(A*Math.PI/180)}function Jf(A){return(180+A)/360}function Kf(A){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A*Math.PI/360)))/360}function $f(A,P){return A/Xf(P)}function Cc(A){var P=180-360*A;return 360/Math.PI*Math.atan(Math.exp(P*Math.PI/180))-90}var _l=function(A,P,q){q===void 0&&(q=0),this.x=+A,this.y=+P,this.z=+q};_l.fromLngLat=function(A,P){P===void 0&&(P=0);var q=Ci.convert(A);return new _l(Jf(q.lng),Kf(q.lat),$f(P,q.lat))},_l.prototype.toLngLat=function(){return new Ci(360*this.x-180,Cc(this.y))},_l.prototype.toAltitude=function(){return A=this.z,P=this.y,A*Xf(Cc(P));var A,P},_l.prototype.meterInMercatorCoordinateUnits=function(){return 1/Wf*(A=Cc(this.y),1/Math.cos(A*Math.PI/180));var A};var wl=function(A,P,q){this.z=A,this.x=P,this.y=q,this.key=ou(0,A,A,P,q)};wl.prototype.equals=function(A){return this.z===A.z&&this.x===A.x&&this.y===A.y},wl.prototype.url=function(A,P){var q,ae,be,Ee,Ne,Qe=(q=this.x,ae=this.y,be=this.z,Ee=Zf(256*q,256*(ae=Math.pow(2,be)-ae-1),be),Ne=Zf(256*(q+1),256*(ae+1),be),Ee[0]+","+Ee[1]+","+Ne[0]+","+Ne[1]),ut=function(wt,Lt,Bt){for(var Ht,Vt="",an=wt;an>0;an--)Vt+=(Lt&(Ht=1<<an-1)?1:0)+(Bt&Ht?2:0);return Vt}(this.z,this.x,this.y);return A[(this.x+this.y)%A.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(P==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ut).replace("{bbox-epsg-3857}",Qe)},wl.prototype.getTilePoint=function(A){var P=Math.pow(2,this.z);return new t((A.x*P-this.x)*Nr,(A.y*P-this.y)*Nr)},wl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Qf=function(A,P){this.wrap=A,this.canonical=P,this.key=ou(A,P.z,P.z,P.x,P.y)},ra=function(A,P,q,ae,be){this.overscaledZ=A,this.wrap=P,this.canonical=new wl(q,+ae,+be),this.key=ou(P,A,q,ae,be)};function ou(A,P,q,ae,be){(A*=2)<0&&(A=-1*A-1);var Ee=1<<q;return(Ee*Ee*A+Ee*be+ae).toString(36)+q.toString(36)+P.toString(36)}ra.prototype.equals=function(A){return this.overscaledZ===A.overscaledZ&&this.wrap===A.wrap&&this.canonical.equals(A.canonical)},ra.prototype.scaledTo=function(A){var P=this.canonical.z-A;return A>this.canonical.z?new ra(A,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ra(A,this.wrap,A,this.canonical.x>>P,this.canonical.y>>P)},ra.prototype.calculateScaledKey=function(A,P){var q=this.canonical.z-A;return A>this.canonical.z?ou(this.wrap*+P,A,this.canonical.z,this.canonical.x,this.canonical.y):ou(this.wrap*+P,A,A,this.canonical.x>>q,this.canonical.y>>q)},ra.prototype.isChildOf=function(A){if(A.wrap!==this.wrap)return!1;var P=this.canonical.z-A.canonical.z;return A.overscaledZ===0||A.overscaledZ<this.overscaledZ&&A.canonical.x===this.canonical.x>>P&&A.canonical.y===this.canonical.y>>P},ra.prototype.children=function(A){if(this.overscaledZ>=A)return[new ra(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var P=this.canonical.z+1,q=2*this.canonical.x,ae=2*this.canonical.y;return[new ra(P,this.wrap,P,q,ae),new ra(P,this.wrap,P,q+1,ae),new ra(P,this.wrap,P,q,ae+1),new ra(P,this.wrap,P,q+1,ae+1)]},ra.prototype.isLessThan=function(A){return this.wrap<A.wrap||!(this.wrap>A.wrap)&&(this.overscaledZ<A.overscaledZ||!(this.overscaledZ>A.overscaledZ)&&(this.canonical.x<A.canonical.x||!(this.canonical.x>A.canonical.x)&&this.canonical.y<A.canonical.y))},ra.prototype.wrapped=function(){return new ra(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ra.prototype.unwrapTo=function(A){return new ra(this.overscaledZ,A,this.canonical.z,this.canonical.x,this.canonical.y)},ra.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ra.prototype.toUnwrapped=function(){return new Qf(this.wrap,this.canonical)},ra.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ra.prototype.getTilePoint=function(A){return this.canonical.getTilePoint(new _l(A.x-this.wrap,A.y))},wr("CanonicalTileID",wl),wr("OverscaledTileID",ra,{omit:["posMatrix"]});var el=function(A,P,q){if(this.uid=A,P.height!==P.width)throw new RangeError("DEM tiles must be square");if(q&&q!=="mapbox"&&q!=="terrarium")return M('"'+q+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=P.height;var ae=this.dim=P.height-2;this.data=new Uint32Array(P.data.buffer),this.encoding=q||"mapbox";for(var be=0;be<ae;be++)this.data[this._idx(-1,be)]=this.data[this._idx(0,be)],this.data[this._idx(ae,be)]=this.data[this._idx(ae-1,be)],this.data[this._idx(be,-1)]=this.data[this._idx(be,0)],this.data[this._idx(be,ae)]=this.data[this._idx(be,ae-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ae,-1)]=this.data[this._idx(ae-1,0)],this.data[this._idx(-1,ae)]=this.data[this._idx(0,ae-1)],this.data[this._idx(ae,ae)]=this.data[this._idx(ae-1,ae-1)]};el.prototype.get=function(A,P){var q=new Uint8Array(this.data.buffer),ae=4*this._idx(A,P);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(q[ae],q[ae+1],q[ae+2])},el.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},el.prototype._idx=function(A,P){if(A<-1||A>=this.dim+1||P<-1||P>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(P+1)*this.stride+(A+1)},el.prototype._unpackMapbox=function(A,P,q){return(256*A*256+256*P+q)/10-1e4},el.prototype._unpackTerrarium=function(A,P,q){return 256*A+P+q/256-32768},el.prototype.getPixels=function(){return new eo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},el.prototype.backfillBorder=function(A,P,q){if(this.dim!==A.dim)throw new Error("dem dimension mismatch");var ae=P*this.dim,be=P*this.dim+this.dim,Ee=q*this.dim,Ne=q*this.dim+this.dim;switch(P){case-1:ae=be-1;break;case 1:be=ae+1}switch(q){case-1:Ee=Ne-1;break;case 1:Ne=Ee+1}for(var Qe=-P*this.dim,ut=-q*this.dim,wt=Ee;wt<Ne;wt++)for(var Lt=ae;Lt<be;Lt++)this.data[this._idx(Lt,wt)]=A.data[this._idx(Lt+Qe,wt+ut)]},wr("DEMData",el);var Vu=function(A){this._stringToNumber={},this._numberToString=[];for(var P=0;P<A.length;P++){var q=A[P];this._stringToNumber[q]=P,this._numberToString[P]=q}};Vu.prototype.encode=function(A){return this._stringToNumber[A]},Vu.prototype.decode=function(A){return this._numberToString[A]};var Hu=function(A,P,q,ae,be){this.type="Feature",this._vectorTileFeature=A,A._z=P,A._x=q,A._y=ae,this.properties=A.properties,this.id=be},Pc={geometry:{configurable:!0}};Pc.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Pc.geometry.set=function(A){this._geometry=A},Hu.prototype.toJSON=function(){var A={geometry:this.geometry};for(var P in this)P!=="_geometry"&&P!=="_vectorTileFeature"&&(A[P]=this[P]);return A},Object.defineProperties(Hu.prototype,Pc);var Ul=function(){this.state={},this.stateChanges={},this.deletedStates={}};Ul.prototype.updateState=function(A,P,q){var ae=String(P);if(this.stateChanges[A]=this.stateChanges[A]||{},this.stateChanges[A][ae]=this.stateChanges[A][ae]||{},u(this.stateChanges[A][ae],q),this.deletedStates[A]===null)for(var be in this.deletedStates[A]={},this.state[A])be!==ae&&(this.deletedStates[A][be]=null);else if(this.deletedStates[A]&&this.deletedStates[A][ae]===null)for(var Ee in this.deletedStates[A][ae]={},this.state[A][ae])q[Ee]||(this.deletedStates[A][ae][Ee]=null);else for(var Ne in q)this.deletedStates[A]&&this.deletedStates[A][ae]&&this.deletedStates[A][ae][Ne]===null&&delete this.deletedStates[A][ae][Ne]},Ul.prototype.removeFeatureState=function(A,P,q){if(this.deletedStates[A]!==null){var ae=String(P);if(this.deletedStates[A]=this.deletedStates[A]||{},q&&P!==void 0)this.deletedStates[A][ae]!==null&&(this.deletedStates[A][ae]=this.deletedStates[A][ae]||{},this.deletedStates[A][ae][q]=null);else if(P!==void 0)if(this.stateChanges[A]&&this.stateChanges[A][ae])for(q in this.deletedStates[A][ae]={},this.stateChanges[A][ae])this.deletedStates[A][ae][q]=null;else this.deletedStates[A][ae]=null;else this.deletedStates[A]=null}},Ul.prototype.getState=function(A,P){var q=String(P),ae=this.state[A]||{},be=this.stateChanges[A]||{},Ee=u({},ae[q],be[q]);if(this.deletedStates[A]===null)return{};if(this.deletedStates[A]){var Ne=this.deletedStates[A][P];if(Ne===null)return{};for(var Qe in Ne)delete Ee[Qe]}return Ee},Ul.prototype.initializeTileState=function(A,P){A.setFeatureState(this.state,P)},Ul.prototype.coalesceChanges=function(A,P){var q={};for(var ae in this.stateChanges){this.state[ae]=this.state[ae]||{};var be={};for(var Ee in this.stateChanges[ae])this.state[ae][Ee]||(this.state[ae][Ee]={}),u(this.state[ae][Ee],this.stateChanges[ae][Ee]),be[Ee]=this.state[ae][Ee];q[ae]=be}for(var Ne in this.deletedStates){this.state[Ne]=this.state[Ne]||{};var Qe={};if(this.deletedStates[Ne]===null)for(var ut in this.state[Ne])Qe[ut]={},this.state[Ne][ut]={};else for(var wt in this.deletedStates[Ne]){if(this.deletedStates[Ne][wt]===null)this.state[Ne][wt]={};else for(var Lt=0,Bt=Object.keys(this.deletedStates[Ne][wt]);Lt<Bt.length;Lt+=1){var Ht=Bt[Lt];delete this.state[Ne][wt][Ht]}Qe[wt]=this.state[Ne][wt]}q[Ne]=q[Ne]||{},u(q[Ne],Qe)}if(this.stateChanges={},this.deletedStates={},Object.keys(q).length!==0)for(var Vt in A)A[Vt].setFeatureState(q,P)};var tl=function(A,P){this.tileID=A,this.x=A.canonical.x,this.y=A.canonical.y,this.z=A.canonical.z,this.grid=new Fi(Nr,16,0),this.grid3D=new Fi(Nr,16,0),this.featureIndexArray=new cn,this.promoteId=P};function eh(A,P,q,ae,be){return p(A,function(Ee,Ne){var Qe=P instanceof Na?P.get(Ne):null;return Qe&&Qe.evaluate?Qe.evaluate(q,ae,be):Qe})}function th(A){for(var P=1/0,q=1/0,ae=-1/0,be=-1/0,Ee=0,Ne=A;Ee<Ne.length;Ee+=1){var Qe=Ne[Ee];P=Math.min(P,Qe.x),q=Math.min(q,Qe.y),ae=Math.max(ae,Qe.x),be=Math.max(be,Qe.y)}return{minX:P,minY:q,maxX:ae,maxY:be}}function $p(A,P){return P-A}tl.prototype.insert=function(A,P,q,ae,be,Ee){var Ne=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(q,ae,be);for(var Qe=Ee?this.grid3D:this.grid,ut=0;ut<P.length;ut++){for(var wt=P[ut],Lt=[1/0,1/0,-1/0,-1/0],Bt=0;Bt<wt.length;Bt++){var Ht=wt[Bt];Lt[0]=Math.min(Lt[0],Ht.x),Lt[1]=Math.min(Lt[1],Ht.y),Lt[2]=Math.max(Lt[2],Ht.x),Lt[3]=Math.max(Lt[3],Ht.y)}Lt[0]<Nr&&Lt[1]<Nr&&Lt[2]>=0&&Lt[3]>=0&&Qe.insert(Ne,Lt[0],Lt[1],Lt[2],Lt[3])}},tl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Pl.VectorTile(new Cu(this.rawTileData)).layers,this.sourceLayerCoder=new Vu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},tl.prototype.query=function(A,P,q,ae){var be=this;this.loadVTLayers();for(var Ee=A.params||{},Ne=Nr/A.tileSize/A.scale,Qe=ms(Ee.filter),ut=A.queryGeometry,wt=A.queryPadding*Ne,Lt=th(ut),Bt=this.grid.query(Lt.minX-wt,Lt.minY-wt,Lt.maxX+wt,Lt.maxY+wt),Ht=th(A.cameraQueryGeometry),Vt=0,an=this.grid3D.query(Ht.minX-wt,Ht.minY-wt,Ht.maxX+wt,Ht.maxY+wt,function(Zn,Qn,rr,_r){return function(dr,Mr,Cr,Ur,Or){for(var jr=0,zr=dr;jr<zr.length;jr+=1){var Pr=zr[jr];if(Mr<=Pr.x&&Cr<=Pr.y&&Ur>=Pr.x&&Or>=Pr.y)return!0}var Jr=[new t(Mr,Cr),new t(Mr,Or),new t(Ur,Or),new t(Ur,Cr)];if(dr.length>2){for(var qr=0,wi=Jr;qr<wi.length;qr+=1)if(cl(dr,wi[qr]))return!0}for(var Br=0;Br<dr.length-1;Br++)if(lc(dr[Br],dr[Br+1],Jr))return!0;return!1}(A.cameraQueryGeometry,Zn-wt,Qn-wt,rr+wt,_r+wt)});Vt<an.length;Vt+=1){var yn=an[Vt];Bt.push(yn)}Bt.sort($p);for(var On,Pn={},Nn=function(Zn){var Qn=Bt[Zn];if(Qn!==On){On=Qn;var rr=be.featureIndexArray.get(Qn),_r=null;be.loadMatchingFeature(Pn,rr.bucketIndex,rr.sourceLayerIndex,rr.featureIndex,Qe,Ee.layers,Ee.availableImages,P,q,ae,function(dr,Mr,Cr){return _r||(_r=Mi(dr)),Mr.queryIntersectsFeature(ut,dr,Cr,_r,be.z,A.transform,Ne,A.pixelPosMatrix)})}},Vn=0;Vn<Bt.length;Vn++)Nn(Vn);return Pn},tl.prototype.loadMatchingFeature=function(A,P,q,ae,be,Ee,Ne,Qe,ut,wt,Lt){var Bt=this.bucketLayerIDs[P];if(!Ee||function(_r,dr){for(var Mr=0;Mr<_r.length;Mr++)if(dr.indexOf(_r[Mr])>=0)return!0;return!1}(Ee,Bt)){var Ht=this.sourceLayerCoder.decode(q),Vt=this.vtLayers[Ht].feature(ae);if(be.filter(new ri(this.tileID.overscaledZ),Vt))for(var an=this.getId(Vt,Ht),yn=0;yn<Bt.length;yn++){var On=Bt[yn];if(!(Ee&&Ee.indexOf(On)<0)){var Pn=Qe[On];if(Pn){var Nn={};an!==void 0&&wt&&(Nn=wt.getState(Pn.sourceLayer||"_geojsonTileLayer",an));var Vn=ut[On];Vn.paint=eh(Vn.paint,Pn.paint,Vt,Nn,Ne),Vn.layout=eh(Vn.layout,Pn.layout,Vt,Nn,Ne);var Zn=!Lt||Lt(Vt,Pn,Nn);if(Zn){var Qn=new Hu(Vt,this.z,this.x,this.y,an);Qn.layer=Vn;var rr=A[On];rr===void 0&&(rr=A[On]=[]),rr.push({featureIndex:ae,feature:Qn,intersectionZ:Zn})}}}}}},tl.prototype.lookupSymbolFeatures=function(A,P,q,ae,be,Ee,Ne,Qe){var ut={};this.loadVTLayers();for(var wt=ms(be),Lt=0,Bt=A;Lt<Bt.length;Lt+=1){var Ht=Bt[Lt];this.loadMatchingFeature(ut,q,ae,Ht,wt,Ee,Ne,Qe,P)}return ut},tl.prototype.hasLayer=function(A){for(var P=0,q=this.bucketLayerIDs;P<q.length;P+=1)for(var ae=0,be=q[P];ae<be.length;ae+=1)if(A===be[ae])return!0;return!1},tl.prototype.getId=function(A,P){var q=A.id;if(this.promoteId){var ae=typeof this.promoteId=="string"?this.promoteId:this.promoteId[P];typeof(q=A.properties[ae])=="boolean"&&(q=Number(q))}return q},wr("FeatureIndex",tl,{omit:["rawTileData","sourceLayerCoder"]});var ga=function(A,P){this.tileID=A,this.uid=f(),this.uses=0,this.tileSize=P,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ga.prototype.registerFadeDuration=function(A){var P=A+this.timeAdded;P<X.now()||this.fadeEndTime&&P<this.fadeEndTime||(this.fadeEndTime=P)},ga.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},ga.prototype.loadVectorData=function(A,P,q){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",A){for(var ae in A.featureIndex&&(this.latestFeatureIndex=A.featureIndex,A.rawTileData?(this.latestRawTileData=A.rawTileData,this.latestFeatureIndex.rawTileData=A.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=A.collisionBoxArray,this.buckets=function(wt,Lt){var Bt={};if(!Lt)return Bt;for(var Ht=function(){var yn=an[Vt],On=yn.layerIds.map(function(Zn){return Lt.getLayer(Zn)}).filter(Boolean);if(On.length!==0){yn.layers=On,yn.stateDependentLayerIds&&(yn.stateDependentLayers=yn.stateDependentLayerIds.map(function(Zn){return On.filter(function(Qn){return Qn.id===Zn})[0]}));for(var Pn=0,Nn=On;Pn<Nn.length;Pn+=1){var Vn=Nn[Pn];Bt[Vn.id]=yn}}},Vt=0,an=wt;Vt<an.length;Vt+=1)Ht();return Bt}(A.buckets,P.style),this.hasSymbolBuckets=!1,this.buckets){var be=this.buckets[ae];if(be instanceof mi){if(this.hasSymbolBuckets=!0,!q)break;be.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Ee in this.buckets){var Ne=this.buckets[Ee];if(Ne instanceof mi&&Ne.hasRTLText){this.hasRTLText=!0,fa.isLoading()||fa.isLoaded()||Ba()!=="deferred"||$a();break}}for(var Qe in this.queryPadding=0,this.buckets){var ut=this.buckets[Qe];this.queryPadding=Math.max(this.queryPadding,P.style.getLayer(Qe).queryRadius(ut))}A.imageAtlas&&(this.imageAtlas=A.imageAtlas),A.glyphAtlasImage&&(this.glyphAtlasImage=A.glyphAtlasImage)}else this.collisionBoxArray=new Ge},ga.prototype.unloadVectorData=function(){for(var A in this.buckets)this.buckets[A].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ga.prototype.getBucket=function(A){return this.buckets[A.id]},ga.prototype.upload=function(A){for(var P in this.buckets){var q=this.buckets[P];q.uploadPending()&&q.upload(A)}var ae=A.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new bl(A,this.imageAtlas.image,ae.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new bl(A,this.glyphAtlasImage,ae.ALPHA),this.glyphAtlasImage=null)},ga.prototype.prepare=function(A){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(A,this.imageAtlasTexture)},ga.prototype.queryRenderedFeatures=function(A,P,q,ae,be,Ee,Ne,Qe,ut,wt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ae,cameraQueryGeometry:be,scale:Ee,tileSize:this.tileSize,pixelPosMatrix:wt,transform:Qe,params:Ne,queryPadding:this.queryPadding*ut},A,P,q):{}},ga.prototype.querySourceFeatures=function(A,P){var q=this.latestFeatureIndex;if(q&&q.rawTileData){var ae=q.loadVTLayers(),be=P?P.sourceLayer:"",Ee=ae._geojsonTileLayer||ae[be];if(Ee)for(var Ne=ms(P&&P.filter),Qe=this.tileID.canonical,ut=Qe.z,wt=Qe.x,Lt=Qe.y,Bt={z:ut,x:wt,y:Lt},Ht=0;Ht<Ee.length;Ht++){var Vt=Ee.feature(Ht);if(Ne.filter(new ri(this.tileID.overscaledZ),Vt)){var an=q.getId(Vt,be),yn=new Hu(Vt,ut,wt,Lt,an);yn.tile=Bt,A.push(yn)}}}},ga.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},ga.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ga.prototype.setExpiryData=function(A){var P=this.expirationTime;if(A.cacheControl){var q=C(A.cacheControl);q["max-age"]&&(this.expirationTime=Date.now()+1e3*q["max-age"])}else A.expires&&(this.expirationTime=new Date(A.expires).getTime());if(this.expirationTime){var ae=Date.now(),be=!1;if(this.expirationTime>ae)be=!1;else if(P)if(this.expirationTime<P)be=!0;else{var Ee=this.expirationTime-P;Ee?this.expirationTime=ae+Math.max(Ee,3e4):be=!0}else be=!0;be?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ga.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},ga.prototype.setFeatureState=function(A,P){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(A).length!==0){var q=this.latestFeatureIndex.loadVTLayers();for(var ae in this.buckets)if(P.style.hasLayer(ae)){var be=this.buckets[ae],Ee=be.layers[0].sourceLayer||"_geojsonTileLayer",Ne=q[Ee],Qe=A[Ee];if(Ne&&Qe&&Object.keys(Qe).length!==0){be.update(Qe,Ne,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ut=P&&P.style&&P.style.getLayer(ae);ut&&(this.queryPadding=Math.max(this.queryPadding,ut.queryRadius(be)))}}}},ga.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},ga.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<X.now()},ga.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ga.prototype.setHoldDuration=function(A){this.symbolFadeHoldUntil=X.now()+A},ga.prototype.setDependencies=function(A,P){for(var q={},ae=0,be=P;ae<be.length;ae+=1)q[be[ae]]=!0;this.dependencies[A]=q},ga.prototype.hasDependency=function(A,P){for(var q=0,ae=A;q<ae.length;q+=1){var be=ae[q],Ee=this.dependencies[be];if(Ee){for(var Ne=0,Qe=P;Ne<Qe.length;Ne+=1)if(Ee[Qe[Ne]])return!0}}return!1};var pl=self.performance,nh=function(A){this._marks={start:[A.url,"start"].join("#"),end:[A.url,"end"].join("#"),measure:A.url.toString()},pl.mark(this._marks.start)};nh.prototype.finish=function(){pl.mark(this._marks.end);var A=pl.getEntriesByName(this._marks.measure);return A.length===0&&(pl.measure(this._marks.measure,this._marks.start,this._marks.end),A=pl.getEntriesByName(this._marks.measure),pl.clearMarks(this._marks.start),pl.clearMarks(this._marks.end),pl.clearMeasures(this._marks.measure)),A},l.Actor=jl,l.AlphaImage=xl,l.CanonicalTileID=wl,l.CollisionBoxArray=Ge,l.Color=sn,l.DEMData=el,l.DataConstantProperty=Lr,l.DictionaryCoder=Vu,l.EXTENT=Nr,l.ErrorEvent=Ke,l.EvaluationParameters=ri,l.Event=je,l.Evented=st,l.FeatureIndex=tl,l.FillBucket=bs,l.FillExtrusionBucket=_s,l.ImageAtlas=iu,l.ImagePosition=Ou,l.LineBucket=to,l.LngLat=Ci,l.LngLatBounds=na,l.MercatorCoordinate=_l,l.ONE_EM=La,l.OverscaledTileID=ra,l.Point=t,l.Point$1=t,l.Properties=Qi,l.Protobuf=Cu,l.RGBAImage=eo,l.RequestManager=ie,l.RequestPerformance=nh,l.ResourceType=ot,l.SegmentVector=tn,l.SourceFeatureState=Ul,l.StructArrayLayout1ui2=Me,l.StructArrayLayout2f1f2i16=me,l.StructArrayLayout2i4=Xe,l.StructArrayLayout3ui6=Be,l.StructArrayLayout4i8=$e,l.SymbolBucket=mi,l.Texture=bl,l.Tile=ga,l.Transitionable=ha,l.Uniform1f=Hr,l.Uniform1i=Vr,l.Uniform2f=pr,l.Uniform3f=Er,l.Uniform4f=Fr,l.UniformColor=Dr,l.UniformMatrix4f=Zr,l.UnwrappedTileID=Qf,l.ValidationError=Ie,l.WritingMode=Lo,l.ZoomHistory=ts,l.add=function(A,P,q){return A[0]=P[0]+q[0],A[1]=P[1]+q[1],A[2]=P[2]+q[2],A},l.addDynamicAttributes=Sc,l.asyncAll=function(A,P,q){if(!A.length)return q(null,[]);var ae=A.length,be=new Array(A.length),Ee=null;A.forEach(function(Ne,Qe){P(Ne,function(ut,wt){ut&&(Ee=ut),be[Qe]=wt,--ae==0&&q(Ee,be)})})},l.bezier=r,l.bindAll=g,l.browser=X,l.cacheEntryPossiblyAdded=function(A){++nt>fe&&(A.getActor().send("enforceCacheSizeLimit",Re),nt=0)},l.clamp=a,l.clearTileCache=function(A){var P=self.caches.delete(Pe);A&&P.catch(A).then(function(){return A()})},l.clipLine=Df,l.clone=function(A){var P=new Eo(16);return P[0]=A[0],P[1]=A[1],P[2]=A[2],P[3]=A[3],P[4]=A[4],P[5]=A[5],P[6]=A[6],P[7]=A[7],P[8]=A[8],P[9]=A[9],P[10]=A[10],P[11]=A[11],P[12]=A[12],P[13]=A[13],P[14]=A[14],P[15]=A[15],P},l.clone$1=w,l.clone$2=function(A){var P=new Eo(3);return P[0]=A[0],P[1]=A[1],P[2]=A[2],P},l.collisionCircleLayout=yp,l.config=Z,l.create=function(){var A=new Eo(16);return Eo!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0),A[0]=1,A[5]=1,A[10]=1,A[15]=1,A},l.create$1=function(){var A=new Eo(9);return Eo!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A},l.create$2=function(){var A=new Eo(4);return Eo!=Float32Array&&(A[1]=0,A[2]=0),A[0]=1,A[3]=1,A},l.createCommonjsModule=T,l.createExpression=fs,l.createLayout=di,l.createStyleLayer=function(A){return A.type==="custom"?new Jp(A):new Kp[A.type](A)},l.cross=function(A,P,q){var ae=P[0],be=P[1],Ee=P[2],Ne=q[0],Qe=q[1],ut=q[2];return A[0]=be*ut-Ee*Qe,A[1]=Ee*Ne-ae*ut,A[2]=ae*Qe-be*Ne,A},l.deepEqual=function A(P,q){if(Array.isArray(P)){if(!Array.isArray(q)||P.length!==q.length)return!1;for(var ae=0;ae<P.length;ae++)if(!A(P[ae],q[ae]))return!1;return!0}if(typeof P=="object"&&P!==null&&q!==null){if(typeof q!="object"||Object.keys(P).length!==Object.keys(q).length)return!1;for(var be in P)if(!A(P[be],q[be]))return!1;return!0}return P===q},l.dot=function(A,P){return A[0]*P[0]+A[1]*P[1]+A[2]*P[2]},l.dot$1=function(A,P){return A[0]*P[0]+A[1]*P[1]+A[2]*P[2]+A[3]*P[3]},l.ease=n,l.emitValidationErrors=za,l.endsWith=y,l.enforceCacheSizeLimit=function(A){ve(),we&&we.then(function(P){P.keys().then(function(q){for(var ae=0;ae<q.length-A;ae++)P.delete(q[ae])})})},l.evaluateSizeForFeature=Lf,l.evaluateSizeForZoom=Cf,l.evaluateVariableOffset=Nf,l.evented=Ea,l.extend=u,l.featureFilter=ms,l.filterObject=m,l.fromRotation=function(A,P){var q=Math.sin(P),ae=Math.cos(P);return A[0]=ae,A[1]=q,A[2]=0,A[3]=-q,A[4]=ae,A[5]=0,A[6]=0,A[7]=0,A[8]=1,A},l.getAnchorAlignment=Tc,l.getAnchorJustification=Mc,l.getArrayBuffer=Pt,l.getImage=zt,l.getJSON=function(A,P){return dt(u(A,{type:"json"}),P)},l.getRTLTextPluginStatus=Ba,l.getReferrer=Tt,l.getVideo=function(A,P){var q,ae,be=self.document.createElement("video");be.muted=!0,be.onloadstart=function(){P(null,be)};for(var Ee=0;Ee<A.length;Ee++){var Ne=self.document.createElement("source");q=A[Ee],ae=void 0,(ae=self.document.createElement("a")).href=q,ae.protocol===self.document.location.protocol&&ae.host===self.document.location.host||(be.crossOrigin="Anonymous"),Ne.src=A[Ee],be.appendChild(Ne)}return{cancel:function(){}}},l.identity=uc,l.invert=function(A,P){var q=P[0],ae=P[1],be=P[2],Ee=P[3],Ne=P[4],Qe=P[5],ut=P[6],wt=P[7],Lt=P[8],Bt=P[9],Ht=P[10],Vt=P[11],an=P[12],yn=P[13],On=P[14],Pn=P[15],Nn=q*Qe-ae*Ne,Vn=q*ut-be*Ne,Zn=q*wt-Ee*Ne,Qn=ae*ut-be*Qe,rr=ae*wt-Ee*Qe,_r=be*wt-Ee*ut,dr=Lt*yn-Bt*an,Mr=Lt*On-Ht*an,Cr=Lt*Pn-Vt*an,Ur=Bt*On-Ht*yn,Or=Bt*Pn-Vt*yn,jr=Ht*Pn-Vt*On,zr=Nn*jr-Vn*Or+Zn*Ur+Qn*Cr-rr*Mr+_r*dr;return zr?(zr=1/zr,A[0]=(Qe*jr-ut*Or+wt*Ur)*zr,A[1]=(be*Or-ae*jr-Ee*Ur)*zr,A[2]=(yn*_r-On*rr+Pn*Qn)*zr,A[3]=(Ht*rr-Bt*_r-Vt*Qn)*zr,A[4]=(ut*Cr-Ne*jr-wt*Mr)*zr,A[5]=(q*jr-be*Cr+Ee*Mr)*zr,A[6]=(On*Zn-an*_r-Pn*Vn)*zr,A[7]=(Lt*_r-Ht*Zn+Vt*Vn)*zr,A[8]=(Ne*Or-Qe*Cr+wt*dr)*zr,A[9]=(ae*Cr-q*Or-Ee*dr)*zr,A[10]=(an*rr-yn*Zn+Pn*Nn)*zr,A[11]=(Bt*Zn-Lt*rr-Vt*Nn)*zr,A[12]=(Qe*Mr-Ne*Ur-ut*dr)*zr,A[13]=(q*Ur-ae*Mr+be*dr)*zr,A[14]=(yn*Vn-an*Qn-On*Nn)*zr,A[15]=(Lt*Qn-Bt*Vn+Ht*Nn)*zr,A):null},l.isChar=Ar,l.isMapboxURL=se,l.keysDifference=function(A,P){var q=[];for(var ae in A)ae in P||q.push(ae);return q},l.makeRequest=dt,l.mapObject=p,l.mercatorXfromLng=Jf,l.mercatorYfromLat=Kf,l.mercatorZfromAltitude=$f,l.mul=Ih,l.multiply=Wc,l.mvt=Pl,l.normalize=function(A,P){var q=P[0],ae=P[1],be=P[2],Ee=q*q+ae*ae+be*be;return Ee>0&&(Ee=1/Math.sqrt(Ee)),A[0]=P[0]*Ee,A[1]=P[1]*Ee,A[2]=P[2]*Ee,A},l.number=Tr,l.offscreenCanvasSupported=tt,l.ortho=function(A,P,q,ae,be,Ee,Ne){var Qe=1/(P-q),ut=1/(ae-be),wt=1/(Ee-Ne);return A[0]=-2*Qe,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=-2*ut,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=2*wt,A[11]=0,A[12]=(P+q)*Qe,A[13]=(be+ae)*ut,A[14]=(Ne+Ee)*wt,A[15]=1,A},l.parseGlyphPBF=function(A){return new Cu(A).readFields(Lp,[])},l.pbf=Cu,l.performSymbolLayout=function(A,P,q,ae,be,Ee,Ne){A.createArrays();var Qe=512*A.overscaling;A.tilePixelRatio=Nr/Qe,A.compareText={},A.iconsNeedLinear=!1;var ut=A.layers[0].layout,wt=A.layers[0]._unevaluatedLayout._values,Lt={};if(A.textSizeData.kind==="composite"){var Bt=A.textSizeData,Ht=Bt.minZoom,Vt=Bt.maxZoom;Lt.compositeTextSizes=[wt["text-size"].possiblyEvaluate(new ri(Ht),Ne),wt["text-size"].possiblyEvaluate(new ri(Vt),Ne)]}if(A.iconSizeData.kind==="composite"){var an=A.iconSizeData,yn=an.minZoom,On=an.maxZoom;Lt.compositeIconSizes=[wt["icon-size"].possiblyEvaluate(new ri(yn),Ne),wt["icon-size"].possiblyEvaluate(new ri(On),Ne)]}Lt.layoutTextSize=wt["text-size"].possiblyEvaluate(new ri(A.zoom+1),Ne),Lt.layoutIconSize=wt["icon-size"].possiblyEvaluate(new ri(A.zoom+1),Ne),Lt.textMaxSize=wt["text-size"].possiblyEvaluate(new ri(18));for(var Pn=ut.get("text-line-height")*La,Nn=ut.get("text-rotation-alignment")==="map"&&ut.get("symbol-placement")!=="point",Vn=ut.get("text-keep-upright"),Zn=ut.get("text-size"),Qn=function(){var dr=_r[rr],Mr=ut.get("text-font").evaluate(dr,{},Ne).join(","),Cr=Zn.evaluate(dr,{},Ne),Ur=Lt.layoutTextSize.evaluate(dr,{},Ne),Or=Lt.layoutIconSize.evaluate(dr,{},Ne),jr={horizontal:{},vertical:void 0},zr=dr.text,Pr=[0,0];if(zr){var Jr=zr.toString(),qr=ut.get("text-letter-spacing").evaluate(dr,{},Ne)*La,wi=function(Gr){for(var ni=0,ji=Gr;ni<ji.length;ni+=1)if(_i=ji[ni].charCodeAt(0),Ar.Arabic(_i)||Ar["Arabic Supplement"](_i)||Ar["Arabic Extended-A"](_i)||Ar["Arabic Presentation Forms-A"](_i)||Ar["Arabic Presentation Forms-B"](_i))return!1;var _i;return!0}(Jr)?qr:0,Br=ut.get("text-anchor").evaluate(dr,{},Ne),yi=ut.get("text-variable-anchor");if(!yi){var Ai=ut.get("text-radial-offset").evaluate(dr,{},Ne);Pr=Ai?Nf(Br,[Ai*La,Ac]):ut.get("text-offset").evaluate(dr,{},Ne).map(function(Gr){return Gr*La})}var Si=Nn?"center":ut.get("text-justify").evaluate(dr,{},Ne),Pi=ut.get("symbol-placement"),Ti=Pi==="point"?ut.get("text-max-width").evaluate(dr,{},Ne)*La:0,ia=function(){A.allowVerticalPlacement&&ns(Jr)&&(jr.vertical=zu(zr,P,q,be,Mr,Ti,Pn,Br,"left",wi,Pr,Lo.vertical,!0,Pi,Ur,Cr))};if(!Nn&&yi){for(var Ii=Si==="auto"?yi.map(function(Gr){return Mc(Gr)}):[Si],va=!1,Ca=0;Ca<Ii.length;Ca++){var wa=Ii[Ca];if(!jr.horizontal[wa])if(va)jr.horizontal[wa]=jr.horizontal[0];else{var Ya=zu(zr,P,q,be,Mr,Ti,Pn,"center",wa,wi,Pr,Lo.horizontal,!1,Pi,Ur,Cr);Ya&&(jr.horizontal[wa]=Ya,va=Ya.positionedLines.length===1)}}ia()}else{Si==="auto"&&(Si=Mc(Br));var Ta=zu(zr,P,q,be,Mr,Ti,Pn,Br,Si,wi,Pr,Lo.horizontal,!1,Pi,Ur,Cr);Ta&&(jr.horizontal[Si]=Ta),ia(),ns(Jr)&&Nn&&Vn&&(jr.vertical=zu(zr,P,q,be,Mr,Ti,Pn,Br,Si,wi,Pr,Lo.vertical,!1,Pi,Ur,Cr))}}var oa=void 0,ka=!1;if(dr.icon&&dr.icon.name){var ma=ae[dr.icon.name];ma&&(oa=function(Gr,ni,ji){var _i=Tc(ji),Ri=_i.horizontalAlign,Oi=_i.verticalAlign,ai=ni[0],Ui=ni[1],Wa=ai-Gr.displaySize[0]*Ri,vo=Wa+Gr.displaySize[0],Ua=Ui-Gr.displaySize[1]*Oi;return{image:Gr,top:Ua,bottom:Ua+Gr.displaySize[1],left:Wa,right:vo}}(be[dr.icon.name],ut.get("icon-offset").evaluate(dr,{},Ne),ut.get("icon-anchor").evaluate(dr,{},Ne)),ka=ma.sdf,A.sdfIcons===void 0?A.sdfIcons=ma.sdf:A.sdfIcons!==ma.sdf&&M("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ma.pixelRatio!==A.pixelRatio||ut.get("icon-rotate").constantOr(1)!==0)&&(A.iconsNeedLinear=!0))}var sa=Uf(jr.horizontal)||jr.vertical;A.iconsInText=!!sa&&sa.iconsInText,(sa||oa)&&function(Gr,ni,ji,_i,Ri,Oi,ai,Ui,Wa,vo,Ua){var ws=Oi.textMaxSize.evaluate(ni,{});ws===void 0&&(ws=ai);var nl,ya=Gr.layers[0].layout,Ts=ya.get("icon-offset").evaluate(ni,{},Ua),as=Uf(ji.horizontal),os=24,Tl=ai/os,qu=Gr.tilePixelRatio*Tl,kl=Gr.tilePixelRatio*ws/os,Gu=Gr.tilePixelRatio*Ui,su=Gr.tilePixelRatio*ya.get("symbol-spacing"),Oc=ya.get("text-padding")*Gr.tilePixelRatio,Zu=ya.get("icon-padding")*Gr.tilePixelRatio,Vl=ya.get("text-max-angle")/180*Math.PI,Yu=ya.get("text-rotation-alignment")==="map"&&ya.get("symbol-placement")!=="point",Wu=ya.get("icon-rotation-alignment")==="map"&&ya.get("symbol-placement")!=="point",lu=ya.get("symbol-placement"),Ic=su/2,uu=ya.get("icon-text-fit");_i&&uu!=="none"&&(Gr.allowVerticalPlacement&&ji.vertical&&(nl=Ef(_i,ji.vertical,uu,ya.get("icon-text-fit-padding"),Ts,Tl)),as&&(_i=Ef(_i,as,uu,ya.get("icon-text-fit-padding"),Ts,Tl)));var Al=function(Qp,gu){gu.x<0||gu.x>=Nr||gu.y<0||gu.y>=Nr||function(Hi,ks,ed,dl,Nc,sh,Qu,Bs,ec,vu,tc,nc,jc,lh,mu,uh,ch,fh,hh,ph,Co,rc,dh,Ns,td){var gh,El,Gl,Zl,Yl,Wl=Hi.addToLineVertexArray(ks,ed),vh=0,mh=0,yh=0,xh=0,Uc=-1,Vc=-1,rl={},bh=Cn(""),Hc=0,qc=0;if(Bs._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Hc=(gh=Bs.layout.get("text-offset").evaluate(Co,{},Ns).map(function(xu){return xu*La}))[0],qc=gh[1]):(Hc=Bs.layout.get("text-radial-offset").evaluate(Co,{},Ns)*La,qc=Ac),Hi.allowVerticalPlacement&&dl.vertical){var _h=Bs.layout.get("text-rotate").evaluate(Co,{},Ns)+90,nd=dl.vertical;Zl=new Nu(ec,ks,vu,tc,nc,nd,jc,lh,mu,_h),Qu&&(Yl=new Nu(ec,ks,vu,tc,nc,Qu,ch,fh,mu,_h))}if(Nc){var Gc=Bs.layout.get("icon-rotate").evaluate(Co,{}),wh=Bs.layout.get("icon-text-fit")!=="none",Th=Ff(Nc,Gc,dh,wh),Zc=Qu?Ff(Qu,Gc,dh,wh):void 0;Gl=new Nu(ec,ks,vu,tc,nc,Nc,ch,fh,!1,Gc),vh=4*Th.length;var kh=Hi.iconSizeData,yu=null;kh.kind==="source"?(yu=[Fs*Bs.layout.get("icon-size").evaluate(Co,{})])[0]>hl&&M(Hi.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):kh.kind==="composite"&&((yu=[Fs*rc.compositeIconSizes[0].evaluate(Co,{},Ns),Fs*rc.compositeIconSizes[1].evaluate(Co,{},Ns)])[0]>hl||yu[1]>hl)&&M(Hi.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Hi.addSymbols(Hi.icon,Th,yu,ph,hh,Co,!1,ks,Wl.lineStartIndex,Wl.lineLength,-1,Ns),Uc=Hi.icon.placedSymbolArray.length-1,Zc&&(mh=4*Zc.length,Hi.addSymbols(Hi.icon,Zc,yu,ph,hh,Co,Lo.vertical,ks,Wl.lineStartIndex,Wl.lineLength,-1,Ns),Vc=Hi.icon.placedSymbolArray.length-1)}for(var Ah in dl.horizontal){var ic=dl.horizontal[Ah];if(!El){bh=Cn(ic.text);var rd=Bs.layout.get("text-rotate").evaluate(Co,{},Ns);El=new Nu(ec,ks,vu,tc,nc,ic,jc,lh,mu,rd)}var Mh=ic.positionedLines.length===1;if(yh+=jf(Hi,ks,ic,sh,Bs,mu,Co,uh,Wl,dl.vertical?Lo.horizontal:Lo.horizontalOnly,Mh?Object.keys(dl.horizontal):[Ah],rl,Uc,rc,Ns),Mh)break}dl.vertical&&(xh+=jf(Hi,ks,dl.vertical,sh,Bs,mu,Co,uh,Wl,Lo.vertical,["vertical"],rl,Vc,rc,Ns));var id=El?El.boxStartIndex:Hi.collisionBoxArray.length,ad=El?El.boxEndIndex:Hi.collisionBoxArray.length,od=Zl?Zl.boxStartIndex:Hi.collisionBoxArray.length,sd=Zl?Zl.boxEndIndex:Hi.collisionBoxArray.length,ld=Gl?Gl.boxStartIndex:Hi.collisionBoxArray.length,ud=Gl?Gl.boxEndIndex:Hi.collisionBoxArray.length,cd=Yl?Yl.boxStartIndex:Hi.collisionBoxArray.length,fd=Yl?Yl.boxEndIndex:Hi.collisionBoxArray.length,js=-1,ac=function(xu,Eh){return xu&&xu.circleDiameter?Math.max(xu.circleDiameter,Eh):Eh};js=ac(El,js),js=ac(Zl,js),js=ac(Gl,js);var Sh=(js=ac(Yl,js))>-1?1:0;Sh&&(js*=td/La),Hi.glyphOffsetArray.length>=mi.MAX_GLYPHS&&M("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Co.sortKey!==void 0&&Hi.addToSortKeyRanges(Hi.symbolInstances.length,Co.sortKey),Hi.symbolInstances.emplaceBack(ks.x,ks.y,rl.right>=0?rl.right:-1,rl.center>=0?rl.center:-1,rl.left>=0?rl.left:-1,rl.vertical||-1,Uc,Vc,bh,id,ad,od,sd,ld,ud,cd,fd,vu,yh,xh,vh,mh,Sh,0,jc,Hc,qc,js)}(Gr,gu,Qp,ji,_i,Ri,nl,Gr.layers[0],Gr.collisionBoxArray,ni.index,ni.sourceLayerIndex,Gr.index,qu,Oc,Yu,Wa,Gu,Zu,Wu,Ts,ni,Oi,vo,Ua,ai)};if(lu==="line")for(var Hl=0,Xu=Df(ni.geometry,0,0,Nr,Nr);Hl<Xu.length;Hl+=1)for(var Ju=Xu[Hl],ql=0,Ku=Dp(Ju,su,Vl,ji.vertical||as,_i,os,kl,Gr.overscaling,Nr);ql<Ku.length;ql+=1){var $u=Ku[ql];as&&jp(Gr,as.text,Ic,$u)||Al(Ju,$u)}else if(lu==="line-center")for(var cu=0,fu=ni.geometry;cu<fu.length;cu+=1){var Ml=fu[cu];if(Ml.length>1){var hu=Rp(Ml,Vl,ji.vertical||as,_i,os,kl);hu&&Al(Ml,hu)}}else if(ni.type==="Polygon")for(var Sl=0,pu=vc(ni.geometry,0);Sl<pu.length;Sl+=1){var du=pu[Sl],rh=Bp(du,16);Al(du[0],new Rl(rh.x,rh.y,0))}else if(ni.type==="LineString")for(var zc=0,ih=ni.geometry;zc<ih.length;zc+=1){var Rc=ih[zc];Al(Rc,new Rl(Rc[0].x,Rc[0].y,0))}else if(ni.type==="Point")for(var Dc=0,ah=ni.geometry;Dc<ah.length;Dc+=1)for(var Fc=0,oh=ah[Dc];Fc<oh.length;Fc+=1){var Bc=oh[Fc];Al([Bc],new Rl(Bc.x,Bc.y,0))}}(A,dr,jr,oa,ae,Lt,Ur,Or,Pr,ka,Ne)},rr=0,_r=A.features;rr<_r.length;rr+=1)Qn();Ee&&A.generateCollisionDebugBuffers()},l.perspective=function(A,P,q,ae,be){var Ee,Ne=1/Math.tan(P/2);return A[0]=Ne/q,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=Ne,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=-1,A[12]=0,A[13]=0,A[15]=0,be!=null&&be!==1/0?(Ee=1/(ae-be),A[10]=(be+ae)*Ee,A[14]=2*be*ae*Ee):(A[10]=-1,A[14]=-2*ae),A},l.pick=function(A,P){for(var q={},ae=0;ae<P.length;ae++){var be=P[ae];be in A&&(q[be]=A[be])}return q},l.plugin=fa,l.polygonIntersectsPolygon=Ni,l.postMapLoadEvent=De,l.postTurnstileEvent=ye,l.potpack=Tf,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=wr,l.registerForPluginStateChange=function(A){return A({pluginStatus:Ki,pluginURL:Fa}),Ea.on("pluginStateChange",A),A},l.rotate=function(A,P,q){var ae=P[0],be=P[1],Ee=P[2],Ne=P[3],Qe=Math.sin(q),ut=Math.cos(q);return A[0]=ae*ut+Ee*Qe,A[1]=be*ut+Ne*Qe,A[2]=ae*-Qe+Ee*ut,A[3]=be*-Qe+Ne*ut,A},l.rotateX=function(A,P,q){var ae=Math.sin(q),be=Math.cos(q),Ee=P[4],Ne=P[5],Qe=P[6],ut=P[7],wt=P[8],Lt=P[9],Bt=P[10],Ht=P[11];return P!==A&&(A[0]=P[0],A[1]=P[1],A[2]=P[2],A[3]=P[3],A[12]=P[12],A[13]=P[13],A[14]=P[14],A[15]=P[15]),A[4]=Ee*be+wt*ae,A[5]=Ne*be+Lt*ae,A[6]=Qe*be+Bt*ae,A[7]=ut*be+Ht*ae,A[8]=wt*be-Ee*ae,A[9]=Lt*be-Ne*ae,A[10]=Bt*be-Qe*ae,A[11]=Ht*be-ut*ae,A},l.rotateZ=function(A,P,q){var ae=Math.sin(q),be=Math.cos(q),Ee=P[0],Ne=P[1],Qe=P[2],ut=P[3],wt=P[4],Lt=P[5],Bt=P[6],Ht=P[7];return P!==A&&(A[8]=P[8],A[9]=P[9],A[10]=P[10],A[11]=P[11],A[12]=P[12],A[13]=P[13],A[14]=P[14],A[15]=P[15]),A[0]=Ee*be+wt*ae,A[1]=Ne*be+Lt*ae,A[2]=Qe*be+Bt*ae,A[3]=ut*be+Ht*ae,A[4]=wt*be-Ee*ae,A[5]=Lt*be-Ne*ae,A[6]=Bt*be-Qe*ae,A[7]=Ht*be-ut*ae,A},l.scale=function(A,P,q){var ae=q[0],be=q[1],Ee=q[2];return A[0]=P[0]*ae,A[1]=P[1]*ae,A[2]=P[2]*ae,A[3]=P[3]*ae,A[4]=P[4]*be,A[5]=P[5]*be,A[6]=P[6]*be,A[7]=P[7]*be,A[8]=P[8]*Ee,A[9]=P[9]*Ee,A[10]=P[10]*Ee,A[11]=P[11]*Ee,A[12]=P[12],A[13]=P[13],A[14]=P[14],A[15]=P[15],A},l.scale$1=function(A,P,q){return A[0]=P[0]*q,A[1]=P[1]*q,A[2]=P[2]*q,A[3]=P[3]*q,A},l.scale$2=function(A,P,q){return A[0]=P[0]*q,A[1]=P[1]*q,A[2]=P[2]*q,A},l.setCacheLimits=function(A,P){Re=A,fe=P},l.setRTLTextPlugin=function(A,P,q){if(q===void 0&&(q=!1),Ki===_a||Ki===Ao||Ki===Ha)throw new Error("setRTLTextPlugin cannot be called multiple times.");Fa=X.resolveURL(A),Ki=_a,qo=P,xs(),q||$a()},l.sphericalToCartesian=function(A){var P=A[0],q=A[1],ae=A[2];return q+=90,q*=Math.PI/180,ae*=Math.PI/180,{x:P*Math.cos(q)*Math.sin(ae),y:P*Math.sin(q)*Math.sin(ae),z:P*Math.cos(ae)}},l.sqrLen=Rh,l.styleSpec=Se,l.sub=zh,l.symbolSize=zp,l.transformMat3=function(A,P,q){var ae=P[0],be=P[1],Ee=P[2];return A[0]=ae*q[0]+be*q[3]+Ee*q[6],A[1]=ae*q[1]+be*q[4]+Ee*q[7],A[2]=ae*q[2]+be*q[5]+Ee*q[8],A},l.transformMat4=Au,l.translate=function(A,P,q){var ae,be,Ee,Ne,Qe,ut,wt,Lt,Bt,Ht,Vt,an,yn=q[0],On=q[1],Pn=q[2];return P===A?(A[12]=P[0]*yn+P[4]*On+P[8]*Pn+P[12],A[13]=P[1]*yn+P[5]*On+P[9]*Pn+P[13],A[14]=P[2]*yn+P[6]*On+P[10]*Pn+P[14],A[15]=P[3]*yn+P[7]*On+P[11]*Pn+P[15]):(ae=P[0],be=P[1],Ee=P[2],Ne=P[3],Qe=P[4],ut=P[5],wt=P[6],Lt=P[7],Bt=P[8],Ht=P[9],Vt=P[10],an=P[11],A[0]=ae,A[1]=be,A[2]=Ee,A[3]=Ne,A[4]=Qe,A[5]=ut,A[6]=wt,A[7]=Lt,A[8]=Bt,A[9]=Ht,A[10]=Vt,A[11]=an,A[12]=ae*yn+Qe*On+Bt*Pn+P[12],A[13]=be*yn+ut*On+Ht*Pn+P[13],A[14]=Ee*yn+wt*On+Vt*Pn+P[14],A[15]=Ne*yn+Lt*On+an*Pn+P[15]),A},l.triggerPluginCompletionEvent=ii,l.uniqueId=f,l.validateCustomStyleLayer=function(A){var P=[],q=A.id;return q===void 0&&P.push({message:"layers."+q+': missing required property "id"'}),A.render===void 0&&P.push({message:"layers."+q+': missing required method "render"'}),A.renderingMode&&A.renderingMode!=="2d"&&A.renderingMode!=="3d"&&P.push({message:"layers."+q+': property "renderingMode" must be either "2d" or "3d"'}),P},l.validateLight=Gi,l.validateStyle=Xi,l.values=function(A){var P=[];for(var q in A)P.push(A[q]);return P},l.vectorTile=Pl,l.version=b,l.warnOnce=M,l.webpSupported=Y,l.window=self,l.wrap=i}),k(0,function(l){function T(Ze){var Ye=typeof Ze;if(Ye==="number"||Ye==="boolean"||Ye==="string"||Ze==null)return JSON.stringify(Ze);if(Array.isArray(Ze)){for(var je="[",Ke=0,st=Ze;Ke<st.length;Ke+=1)je+=T(st[Ke])+",";return je+"]"}for(var Se=Object.keys(Ze).sort(),Ie="{",We=0;We<Se.length;We++)Ie+=JSON.stringify(Se[We])+":"+T(Ze[Se[We]])+",";return Ie+"}"}function b(Ze){for(var Ye="",je=0,Ke=l.refProperties;je<Ke.length;je+=1)Ye+="/"+T(Ze[Ke[je]]);return Ye}var d=function(Ze){this.keyCache={},Ze&&this.replace(Ze)};d.prototype.replace=function(Ze){this._layerConfigs={},this._layers={},this.update(Ze,[])},d.prototype.update=function(Ze,Ye){for(var je=this,Ke=0,st=Ze;Ke<st.length;Ke+=1){var Se=st[Ke];this._layerConfigs[Se.id]=Se;var Ie=this._layers[Se.id]=l.createStyleLayer(Se);Ie._featureFilter=l.featureFilter(Ie.filter),this.keyCache[Se.id]&&delete this.keyCache[Se.id]}for(var We=0,it=Ye;We<it.length;We+=1){var lt=it[We];delete this.keyCache[lt],delete this._layerConfigs[lt],delete this._layers[lt]}this.familiesBySource={};for(var gt=0,At=function(Ut,jt){for(var qt={},Yt=0;Yt<Ut.length;Yt++){var Kt=jt&&jt[Ut[Yt].id]||b(Ut[Yt]);jt&&(jt[Ut[Yt].id]=Kt);var pn=qt[Kt];pn||(pn=qt[Kt]=[]),pn.push(Ut[Yt])}var nn=[];for(var xn in qt)nn.push(qt[xn]);return nn}(l.values(this._layerConfigs),this.keyCache);gt<At.length;gt+=1){var kt=At[gt].map(function(Ut){return je._layers[Ut.id]}),ht=kt[0];if(ht.visibility!=="none"){var St=ht.source||"",vt=this.familiesBySource[St];vt||(vt=this.familiesBySource[St]={});var Mt=ht.sourceLayer||"_geojsonTileLayer",It=vt[Mt];It||(It=vt[Mt]=[]),It.push(kt)}}};var s=function(Ze){var Ye={},je=[];for(var Ke in Ze){var st=Ze[Ke],Se=Ye[Ke]={};for(var Ie in st){var We=st[+Ie];if(We&&We.bitmap.width!==0&&We.bitmap.height!==0){var it={x:0,y:0,w:We.bitmap.width+2,h:We.bitmap.height+2};je.push(it),Se[Ie]={rect:it,metrics:We.metrics}}}}var lt=l.potpack(je),gt=lt.w,At=lt.h,kt=new l.AlphaImage({width:gt||1,height:At||1});for(var ht in Ze){var St=Ze[ht];for(var vt in St){var Mt=St[+vt];if(Mt&&Mt.bitmap.width!==0&&Mt.bitmap.height!==0){var It=Ye[ht][vt].rect;l.AlphaImage.copy(Mt.bitmap,kt,{x:0,y:0},{x:It.x+1,y:It.y+1},Mt.bitmap)}}}this.image=kt,this.positions=Ye};l.register("GlyphAtlas",s);var t=function(Ze){this.tileID=new l.OverscaledTileID(Ze.tileID.overscaledZ,Ze.tileID.wrap,Ze.tileID.canonical.z,Ze.tileID.canonical.x,Ze.tileID.canonical.y),this.uid=Ze.uid,this.zoom=Ze.zoom,this.pixelRatio=Ze.pixelRatio,this.tileSize=Ze.tileSize,this.source=Ze.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ze.showCollisionBoxes,this.collectResourceTiming=!!Ze.collectResourceTiming,this.returnDependencies=!!Ze.returnDependencies,this.promoteId=Ze.promoteId};function o(Ze,Ye,je){for(var Ke=new l.EvaluationParameters(Ye),st=0,Se=Ze;st<Se.length;st+=1)Se[st].recalculate(Ke,je)}function r(Ze,Ye){var je=l.getArrayBuffer(Ze.request,function(Ke,st,Se,Ie){Ke?Ye(Ke):st&&Ye(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(st)),rawData:st,cacheControl:Se,expires:Ie})});return function(){je.cancel(),Ye()}}t.prototype.parse=function(Ze,Ye,je,Ke,st){var Se=this;this.status="parsing",this.data=Ze,this.collisionBoxArray=new l.CollisionBoxArray;var Ie=new l.DictionaryCoder(Object.keys(Ze.layers).sort()),We=new l.FeatureIndex(this.tileID,this.promoteId);We.bucketLayerIDs=[];var it,lt,gt,At,kt={},ht={featureIndex:We,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:je},St=Ye.familiesBySource[this.source];for(var vt in St){var Mt=Ze.layers[vt];if(Mt){Mt.version===1&&l.warnOnce('Vector tile source "'+this.source+'" layer "'+vt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var It=Ie.encode(vt),Ut=[],jt=0;jt<Mt.length;jt++){var qt=Mt.feature(jt),Yt=We.getId(qt,vt);Ut.push({feature:qt,id:Yt,index:jt,sourceLayerIndex:It})}for(var Kt=0,pn=St[vt];Kt<pn.length;Kt+=1){var nn=pn[Kt],xn=nn[0];xn.minzoom&&this.zoom<Math.floor(xn.minzoom)||xn.maxzoom&&this.zoom>=xn.maxzoom||xn.visibility!=="none"&&(o(nn,this.zoom,je),(kt[xn.id]=xn.createBucket({index:We.bucketLayerIDs.length,layers:nn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:It,sourceID:this.source})).populate(Ut,ht,this.tileID.canonical),We.bucketLayerIDs.push(nn.map(function(on){return on.id})))}}}var jn=l.mapObject(ht.glyphDependencies,function(on){return Object.keys(on).map(Number)});Object.keys(jn).length?Ke.send("getGlyphs",{uid:this.uid,stacks:jn},function(on,sn){it||(it=on,lt=sn,vn.call(Se))}):lt={};var mn=Object.keys(ht.iconDependencies);mn.length?Ke.send("getImages",{icons:mn,source:this.source,tileID:this.tileID,type:"icons"},function(on,sn){it||(it=on,gt=sn,vn.call(Se))}):gt={};var en=Object.keys(ht.patternDependencies);function vn(){if(it)return st(it);if(lt&&gt&&At){var on=new s(lt),sn=new l.ImageAtlas(gt,At);for(var En in kt){var kn=kt[En];kn instanceof l.SymbolBucket?(o(kn.layers,this.zoom,je),l.performSymbolLayout(kn,lt,on.positions,gt,sn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):kn.hasPattern&&(kn instanceof l.LineBucket||kn instanceof l.FillBucket||kn instanceof l.FillExtrusionBucket)&&(o(kn.layers,this.zoom,je),kn.addFeatures(ht,this.tileID.canonical,sn.patternPositions))}this.status="done",st(null,{buckets:l.values(kt).filter(function(zn){return!zn.isEmpty()}),featureIndex:We,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:on.image,imageAtlas:sn,glyphMap:this.returnDependencies?lt:null,iconMap:this.returnDependencies?gt:null,glyphPositions:this.returnDependencies?on.positions:null})}}en.length?Ke.send("getImages",{icons:en,source:this.source,tileID:this.tileID,type:"patterns"},function(on,sn){it||(it=on,At=sn,vn.call(Se))}):At={},vn.call(this)};var n=function(Ze,Ye,je,Ke){this.actor=Ze,this.layerIndex=Ye,this.availableImages=je,this.loadVectorData=Ke||r,this.loading={},this.loaded={}};n.prototype.loadTile=function(Ze,Ye){var je=this,Ke=Ze.uid;this.loading||(this.loading={});var st=!!(Ze&&Ze.request&&Ze.request.collectResourceTiming)&&new l.RequestPerformance(Ze.request),Se=this.loading[Ke]=new t(Ze);Se.abort=this.loadVectorData(Ze,function(Ie,We){if(delete je.loading[Ke],Ie||!We)return Se.status="done",je.loaded[Ke]=Se,Ye(Ie);var it=We.rawData,lt={};We.expires&&(lt.expires=We.expires),We.cacheControl&&(lt.cacheControl=We.cacheControl);var gt={};if(st){var At=st.finish();At&&(gt.resourceTiming=JSON.parse(JSON.stringify(At)))}Se.vectorTile=We.vectorTile,Se.parse(We.vectorTile,je.layerIndex,je.availableImages,je.actor,function(kt,ht){if(kt||!ht)return Ye(kt);Ye(null,l.extend({rawTileData:it.slice(0)},ht,lt,gt))}),je.loaded=je.loaded||{},je.loaded[Ke]=Se})},n.prototype.reloadTile=function(Ze,Ye){var je=this,Ke=this.loaded,st=Ze.uid,Se=this;if(Ke&&Ke[st]){var Ie=Ke[st];Ie.showCollisionBoxes=Ze.showCollisionBoxes;var We=function(it,lt){var gt=Ie.reloadCallback;gt&&(delete Ie.reloadCallback,Ie.parse(Ie.vectorTile,Se.layerIndex,je.availableImages,Se.actor,gt)),Ye(it,lt)};Ie.status==="parsing"?Ie.reloadCallback=We:Ie.status==="done"&&(Ie.vectorTile?Ie.parse(Ie.vectorTile,this.layerIndex,this.availableImages,this.actor,We):We())}},n.prototype.abortTile=function(Ze,Ye){var je=this.loading,Ke=Ze.uid;je&&je[Ke]&&je[Ke].abort&&(je[Ke].abort(),delete je[Ke]),Ye()},n.prototype.removeTile=function(Ze,Ye){var je=this.loaded,Ke=Ze.uid;je&&je[Ke]&&delete je[Ke],Ye()};var a=l.window.ImageBitmap,i=function(){this.loaded={}};i.prototype.loadTile=function(Ze,Ye){var je=Ze.uid,Ke=Ze.encoding,st=Ze.rawImageData,Se=a&&st instanceof a?this.getImageData(st):st,Ie=new l.DEMData(je,Se,Ke);this.loaded=this.loaded||{},this.loaded[je]=Ie,Ye(null,Ie)},i.prototype.getImageData=function(Ze){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ze.width,Ze.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ze.width,this.offscreenCanvas.height=Ze.height,this.offscreenCanvasContext.drawImage(Ze,0,0,Ze.width,Ze.height);var Ye=this.offscreenCanvasContext.getImageData(-1,-1,Ze.width+2,Ze.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:Ye.width,height:Ye.height},Ye.data)},i.prototype.removeTile=function(Ze){var Ye=this.loaded,je=Ze.uid;Ye&&Ye[je]&&delete Ye[je]};var u=function Ze(Ye,je){var Ke,st=Ye&&Ye.type;if(st==="FeatureCollection")for(Ke=0;Ke<Ye.features.length;Ke++)Ze(Ye.features[Ke],je);else if(st==="GeometryCollection")for(Ke=0;Ke<Ye.geometries.length;Ke++)Ze(Ye.geometries[Ke],je);else if(st==="Feature")Ze(Ye.geometry,je);else if(st==="Polygon")h(Ye.coordinates,je);else if(st==="MultiPolygon")for(Ke=0;Ke<Ye.coordinates.length;Ke++)h(Ye.coordinates[Ke],je);return Ye};function h(Ze,Ye){if(Ze.length!==0){f(Ze[0],Ye);for(var je=1;je<Ze.length;je++)f(Ze[je],!Ye)}}function f(Ze,Ye){for(var je=0,Ke=0,st=Ze.length,Se=st-1;Ke<st;Se=Ke++)je+=(Ze[Ke][0]-Ze[Se][0])*(Ze[Se][1]+Ze[Ke][1]);je>=0!=!!Ye&&Ze.reverse()}var x=l.vectorTile.VectorTileFeature.prototype.toGeoJSON,v=function(Ze){this._feature=Ze,this.extent=l.EXTENT,this.type=Ze.type,this.properties=Ze.tags,"id"in Ze&&!isNaN(Ze.id)&&(this.id=parseInt(Ze.id,10))};v.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Ze=[],Ye=0,je=this._feature.geometry;Ye<je.length;Ye+=1){var Ke=je[Ye];Ze.push([new l.Point$1(Ke[0],Ke[1])])}return Ze}for(var st=[],Se=0,Ie=this._feature.geometry;Se<Ie.length;Se+=1){for(var We=[],it=0,lt=Ie[Se];it<lt.length;it+=1){var gt=lt[it];We.push(new l.Point$1(gt[0],gt[1]))}st.push(We)}return st},v.prototype.toGeoJSON=function(Ze,Ye,je){return x.call(this,Ze,Ye,je)};var g=function(Ze){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=Ze.length,this._features=Ze};g.prototype.feature=function(Ze){return new v(this._features[Ze])};var y=l.vectorTile.VectorTileFeature,p=m;function m(Ze,Ye){this.options=Ye||{},this.features=Ze,this.length=Ze.length}function w(Ze,Ye){this.id=typeof Ze.id=="number"?Ze.id:void 0,this.type=Ze.type,this.rawGeometry=Ze.type===1?[Ze.geometry]:Ze.geometry,this.properties=Ze.tags,this.extent=Ye||4096}m.prototype.feature=function(Ze){return new w(this.features[Ze],this.options.extent)},w.prototype.loadGeometry=function(){var Ze=this.rawGeometry;this.geometry=[];for(var Ye=0;Ye<Ze.length;Ye++){for(var je=Ze[Ye],Ke=[],st=0;st<je.length;st++)Ke.push(new l.Point$1(je[st][0],je[st][1]));this.geometry.push(Ke)}return this.geometry},w.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ze=this.geometry,Ye=1/0,je=-1/0,Ke=1/0,st=-1/0,Se=0;Se<Ze.length;Se++)for(var Ie=Ze[Se],We=0;We<Ie.length;We++){var it=Ie[We];Ye=Math.min(Ye,it.x),je=Math.max(je,it.x),Ke=Math.min(Ke,it.y),st=Math.max(st,it.y)}return[Ye,Ke,je,st]},w.prototype.toGeoJSON=y.prototype.toGeoJSON;var c=L,M=L,_=function(Ze,Ye){Ye=Ye||{};var je={};for(var Ke in Ze)je[Ke]=new p(Ze[Ke].features,Ye),je[Ke].name=Ke,je[Ke].version=Ye.version,je[Ke].extent=Ye.extent;return L({layers:je})},E=p;function L(Ze){var Ye=new l.pbf;return function(je,Ke){for(var st in je.layers)Ke.writeMessage(3,C,je.layers[st])}(Ze,Ye),Ye.finish()}function C(Ze,Ye){var je;Ye.writeVarintField(15,Ze.version||1),Ye.writeStringField(1,Ze.name||""),Ye.writeVarintField(5,Ze.extent||4096);var Ke={keys:[],values:[],keycache:{},valuecache:{}};for(je=0;je<Ze.length;je++)Ke.feature=Ze.feature(je),Ye.writeMessage(2,O,Ke);var st=Ke.keys;for(je=0;je<st.length;je++)Ye.writeStringField(3,st[je]);var Se=Ke.values;for(je=0;je<Se.length;je++)Ye.writeMessage(4,F,Se[je])}function O(Ze,Ye){var je=Ze.feature;je.id!==void 0&&Ye.writeVarintField(1,je.id),Ye.writeMessage(2,I,Ze),Ye.writeVarintField(3,je.type),Ye.writeMessage(4,V,je)}function I(Ze,Ye){var je=Ze.feature,Ke=Ze.keys,st=Ze.values,Se=Ze.keycache,Ie=Ze.valuecache;for(var We in je.properties){var it=Se[We];it===void 0&&(Ke.push(We),it=Ke.length-1,Se[We]=it),Ye.writeVarint(it);var lt=je.properties[We],gt=typeof lt;gt!=="string"&&gt!=="boolean"&&gt!=="number"&&(lt=JSON.stringify(lt));var At=gt+":"+lt,kt=Ie[At];kt===void 0&&(st.push(lt),kt=st.length-1,Ie[At]=kt),Ye.writeVarint(kt)}}function N(Ze,Ye){return(Ye<<3)+(7&Ze)}function R(Ze){return Ze<<1^Ze>>31}function V(Ze,Ye){for(var je=Ze.loadGeometry(),Ke=Ze.type,st=0,Se=0,Ie=je.length,We=0;We<Ie;We++){var it=je[We],lt=1;Ke===1&&(lt=it.length),Ye.writeVarint(N(1,lt));for(var gt=Ke===3?it.length-1:it.length,At=0;At<gt;At++){At===1&&Ke!==1&&Ye.writeVarint(N(2,gt-1));var kt=it[At].x-st,ht=it[At].y-Se;Ye.writeVarint(R(kt)),Ye.writeVarint(R(ht)),st+=kt,Se+=ht}Ke===3&&Ye.writeVarint(N(7,1))}}function F(Ze,Ye){var je=typeof Ze;je==="string"?Ye.writeStringField(1,Ze):je==="boolean"?Ye.writeBooleanField(7,Ze):je==="number"&&(Ze%1!=0?Ye.writeDoubleField(3,Ze):Ze<0?Ye.writeSVarintField(6,Ze):Ye.writeVarintField(5,Ze))}function D(Ze,Ye,je,Ke,st,Se){if(!(st-Ke<=je)){var Ie=Ke+st>>1;U(Ze,Ye,Ie,Ke,st,Se%2),D(Ze,Ye,je,Ke,Ie-1,Se+1),D(Ze,Ye,je,Ie+1,st,Se+1)}}function U(Ze,Ye,je,Ke,st,Se){for(;st>Ke;){if(st-Ke>600){var Ie=st-Ke+1,We=je-Ke+1,it=Math.log(Ie),lt=.5*Math.exp(2*it/3),gt=.5*Math.sqrt(it*lt*(Ie-lt)/Ie)*(We-Ie/2<0?-1:1);U(Ze,Ye,je,Math.max(Ke,Math.floor(je-We*lt/Ie+gt)),Math.min(st,Math.floor(je+(Ie-We)*lt/Ie+gt)),Se)}var At=Ye[2*je+Se],kt=Ke,ht=st;for(j(Ze,Ye,Ke,je),Ye[2*st+Se]>At&&j(Ze,Ye,Ke,st);kt<ht;){for(j(Ze,Ye,kt,ht),kt++,ht--;Ye[2*kt+Se]<At;)kt++;for(;Ye[2*ht+Se]>At;)ht--}Ye[2*Ke+Se]===At?j(Ze,Ye,Ke,ht):j(Ze,Ye,++ht,st),ht<=je&&(Ke=ht+1),je<=ht&&(st=ht-1)}}function j(Ze,Ye,je,Ke){J(Ze,je,Ke),J(Ye,2*je,2*Ke),J(Ye,2*je+1,2*Ke+1)}function J(Ze,Ye,je){var Ke=Ze[Ye];Ze[Ye]=Ze[je],Ze[je]=Ke}function X(Ze,Ye,je,Ke){var st=Ze-je,Se=Ye-Ke;return st*st+Se*Se}c.fromVectorTileJs=M,c.fromGeojsonVt=_,c.GeoJSONWrapper=E;var Z=function(Ze){return Ze[0]},Y=function(Ze){return Ze[1]},W=function(Ze,Ye,je,Ke,st){Ye===void 0&&(Ye=Z),je===void 0&&(je=Y),Ke===void 0&&(Ke=64),st===void 0&&(st=Float64Array),this.nodeSize=Ke,this.points=Ze;for(var Se=Ze.length<65536?Uint16Array:Uint32Array,Ie=this.ids=new Se(Ze.length),We=this.coords=new st(2*Ze.length),it=0;it<Ze.length;it++)Ie[it]=it,We[2*it]=Ye(Ze[it]),We[2*it+1]=je(Ze[it]);D(Ie,We,Ke,0,Ie.length-1,0)};W.prototype.range=function(Ze,Ye,je,Ke){return function(st,Se,Ie,We,it,lt,gt){for(var At,kt,ht=[0,st.length-1,0],St=[];ht.length;){var vt=ht.pop(),Mt=ht.pop(),It=ht.pop();if(Mt-It<=gt)for(var Ut=It;Ut<=Mt;Ut++)At=Se[2*Ut],kt=Se[2*Ut+1],At>=Ie&&At<=it&&kt>=We&&kt<=lt&&St.push(st[Ut]);else{var jt=Math.floor((It+Mt)/2);At=Se[2*jt],kt=Se[2*jt+1],At>=Ie&&At<=it&&kt>=We&&kt<=lt&&St.push(st[jt]);var qt=(vt+1)%2;(vt===0?Ie<=At:We<=kt)&&(ht.push(It),ht.push(jt-1),ht.push(qt)),(vt===0?it>=At:lt>=kt)&&(ht.push(jt+1),ht.push(Mt),ht.push(qt))}}return St}(this.ids,this.coords,Ze,Ye,je,Ke,this.nodeSize)},W.prototype.within=function(Ze,Ye,je){return function(Ke,st,Se,Ie,We,it){for(var lt=[0,Ke.length-1,0],gt=[],At=We*We;lt.length;){var kt=lt.pop(),ht=lt.pop(),St=lt.pop();if(ht-St<=it)for(var vt=St;vt<=ht;vt++)X(st[2*vt],st[2*vt+1],Se,Ie)<=At&&gt.push(Ke[vt]);else{var Mt=Math.floor((St+ht)/2),It=st[2*Mt],Ut=st[2*Mt+1];X(It,Ut,Se,Ie)<=At&&gt.push(Ke[Mt]);var jt=(kt+1)%2;(kt===0?Se-We<=It:Ie-We<=Ut)&&(lt.push(St),lt.push(Mt-1),lt.push(jt)),(kt===0?Se+We>=It:Ie+We>=Ut)&&(lt.push(Mt+1),lt.push(ht),lt.push(jt))}}return gt}(this.ids,this.coords,Ze,Ye,je,this.nodeSize)};var Q={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Ze){return Ze}},ne=function(Ze){this.options=le(Object.create(Q),Ze),this.trees=new Array(this.options.maxZoom+1)};function re(Ze,Ye,je,Ke,st){return{x:Ze,y:Ye,zoom:1/0,id:je,parentId:-1,numPoints:Ke,properties:st}}function ie(Ze,Ye){var je=Ze.geometry.coordinates,Ke=je[0],st=je[1];return{x:ue(Ke),y:ce(st),zoom:1/0,index:Ye,parentId:-1}}function se(Ze){return{type:"Feature",id:Ze.id,properties:ge(Ze),geometry:{type:"Point",coordinates:[(Ke=Ze.x,360*(Ke-.5)),(Ye=Ze.y,je=(180-360*Ye)*Math.PI/180,360*Math.atan(Math.exp(je))/Math.PI-90)]}};var Ye,je,Ke}function ge(Ze){var Ye=Ze.numPoints,je=Ye>=1e4?Math.round(Ye/1e3)+"k":Ye>=1e3?Math.round(Ye/100)/10+"k":Ye;return le(le({},Ze.properties),{cluster:!0,cluster_id:Ze.id,point_count:Ye,point_count_abbreviated:je})}function ue(Ze){return Ze/360+.5}function ce(Ze){var Ye=Math.sin(Ze*Math.PI/180),je=.5-.25*Math.log((1+Ye)/(1-Ye))/Math.PI;return je<0?0:je>1?1:je}function le(Ze,Ye){for(var je in Ye)Ze[je]=Ye[je];return Ze}function de(Ze){return Ze.x}function Ce(Ze){return Ze.y}function xe(Ze,Ye,je,Ke){for(var st,Se=Ke,Ie=je-Ye>>1,We=je-Ye,it=Ze[Ye],lt=Ze[Ye+1],gt=Ze[je],At=Ze[je+1],kt=Ye+3;kt<je;kt+=3){var ht=_e(Ze[kt],Ze[kt+1],it,lt,gt,At);if(ht>Se)st=kt,Se=ht;else if(ht===Se){var St=Math.abs(kt-Ie);St<We&&(st=kt,We=St)}}Se>Ke&&(st-Ye>3&&xe(Ze,Ye,st,Ke),Ze[st+2]=Se,je-st>3&&xe(Ze,st,je,Ke))}function _e(Ze,Ye,je,Ke,st,Se){var Ie=st-je,We=Se-Ke;if(Ie!==0||We!==0){var it=((Ze-je)*Ie+(Ye-Ke)*We)/(Ie*Ie+We*We);it>1?(je=st,Ke=Se):it>0&&(je+=Ie*it,Ke+=We*it)}return(Ie=Ze-je)*Ie+(We=Ye-Ke)*We}function we(Ze,Ye,je,Ke){var st={id:Ze===void 0?null:Ze,type:Ye,geometry:je,tags:Ke,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Se){var Ie=Se.geometry,We=Se.type;if(We==="Point"||We==="MultiPoint"||We==="LineString")Ae(Se,Ie);else if(We==="Polygon"||We==="MultiLineString")for(var it=0;it<Ie.length;it++)Ae(Se,Ie[it]);else if(We==="MultiPolygon")for(it=0;it<Ie.length;it++)for(var lt=0;lt<Ie[it].length;lt++)Ae(Se,Ie[it][lt])}(st),st}function Ae(Ze,Ye){for(var je=0;je<Ye.length;je+=3)Ze.minX=Math.min(Ze.minX,Ye[je]),Ze.minY=Math.min(Ze.minY,Ye[je+1]),Ze.maxX=Math.max(Ze.maxX,Ye[je]),Ze.maxY=Math.max(Ze.maxY,Ye[je+1])}function $(Ze,Ye,je,Ke){if(Ye.geometry){var st=Ye.geometry.coordinates,Se=Ye.geometry.type,Ie=Math.pow(je.tolerance/((1<<je.maxZoom)*je.extent),2),We=[],it=Ye.id;if(je.promoteId?it=Ye.properties[je.promoteId]:je.generateId&&(it=Ke||0),Se==="Point")oe(st,We);else if(Se==="MultiPoint")for(var lt=0;lt<st.length;lt++)oe(st[lt],We);else if(Se==="LineString")pe(st,We,Ie,!1);else if(Se==="MultiLineString"){if(je.lineMetrics){for(lt=0;lt<st.length;lt++)We=[],pe(st[lt],We,Ie,!1),Ze.push(we(it,"LineString",We,Ye.properties));return}ye(st,We,Ie,!1)}else if(Se==="Polygon")ye(st,We,Ie,!0);else{if(Se!=="MultiPolygon"){if(Se==="GeometryCollection"){for(lt=0;lt<Ye.geometry.geometries.length;lt++)$(Ze,{id:it,geometry:Ye.geometry.geometries[lt],properties:Ye.properties},je,Ke);return}throw new Error("Input data is not a valid GeoJSON object.")}for(lt=0;lt<st.length;lt++){var gt=[];ye(st[lt],gt,Ie,!0),We.push(gt)}}Ze.push(we(it,Se,We,Ye.properties))}}function oe(Ze,Ye){Ye.push(ke(Ze[0])),Ye.push(De(Ze[1])),Ye.push(0)}function pe(Ze,Ye,je,Ke){for(var st,Se,Ie=0,We=0;We<Ze.length;We++){var it=ke(Ze[We][0]),lt=De(Ze[We][1]);Ye.push(it),Ye.push(lt),Ye.push(0),We>0&&(Ie+=Ke?(st*lt-it*Se)/2:Math.sqrt(Math.pow(it-st,2)+Math.pow(lt-Se,2))),st=it,Se=lt}var gt=Ye.length-3;Ye[2]=1,xe(Ye,0,gt,je),Ye[gt+2]=1,Ye.size=Math.abs(Ie),Ye.start=0,Ye.end=Ye.size}function ye(Ze,Ye,je,Ke){for(var st=0;st<Ze.length;st++){var Se=[];pe(Ze[st],Se,je,Ke),Ye.push(Se)}}function ke(Ze){return Ze/360+.5}function De(Ze){var Ye=Math.sin(Ze*Math.PI/180),je=.5-.25*Math.log((1+Ye)/(1-Ye))/Math.PI;return je<0?0:je>1?1:je}function Pe(Ze,Ye,je,Ke,st,Se,Ie,We){if(Ke/=Ye,Se>=(je/=Ye)&&Ie<Ke)return Ze;if(Ie<je||Se>=Ke)return null;for(var it=[],lt=0;lt<Ze.length;lt++){var gt=Ze[lt],At=gt.geometry,kt=gt.type,ht=st===0?gt.minX:gt.minY,St=st===0?gt.maxX:gt.maxY;if(ht>=je&&St<Ke)it.push(gt);else if(!(St<je||ht>=Ke)){var vt=[];if(kt==="Point"||kt==="MultiPoint")Re(At,vt,je,Ke,st);else if(kt==="LineString")fe(At,vt,je,Ke,st,!1,We.lineMetrics);else if(kt==="MultiLineString")Te(At,vt,je,Ke,st,!1);else if(kt==="Polygon")Te(At,vt,je,Ke,st,!0);else if(kt==="MultiPolygon")for(var Mt=0;Mt<At.length;Mt++){var It=[];Te(At[Mt],It,je,Ke,st,!0),It.length&&vt.push(It)}if(vt.length){if(We.lineMetrics&&kt==="LineString"){for(Mt=0;Mt<vt.length;Mt++)it.push(we(gt.id,kt,vt[Mt],gt.tags));continue}kt!=="LineString"&&kt!=="MultiLineString"||(vt.length===1?(kt="LineString",vt=vt[0]):kt="MultiLineString"),kt!=="Point"&&kt!=="MultiPoint"||(kt=vt.length===3?"Point":"MultiPoint"),it.push(we(gt.id,kt,vt,gt.tags))}}}return it.length?it:null}function Re(Ze,Ye,je,Ke,st){for(var Se=0;Se<Ze.length;Se+=3){var Ie=Ze[Se+st];Ie>=je&&Ie<=Ke&&(Ye.push(Ze[Se]),Ye.push(Ze[Se+1]),Ye.push(Ze[Se+2]))}}function fe(Ze,Ye,je,Ke,st,Se,Ie){for(var We,it,lt=ve(Ze),gt=st===0?He:Ve,At=Ze.start,kt=0;kt<Ze.length-3;kt+=3){var ht=Ze[kt],St=Ze[kt+1],vt=Ze[kt+2],Mt=Ze[kt+3],It=Ze[kt+4],Ut=st===0?ht:St,jt=st===0?Mt:It,qt=!1;Ie&&(We=Math.sqrt(Math.pow(ht-Mt,2)+Math.pow(St-It,2))),Ut<je?jt>je&&(it=gt(lt,ht,St,Mt,It,je),Ie&&(lt.start=At+We*it)):Ut>Ke?jt<Ke&&(it=gt(lt,ht,St,Mt,It,Ke),Ie&&(lt.start=At+We*it)):ze(lt,ht,St,vt),jt<je&&Ut>=je&&(it=gt(lt,ht,St,Mt,It,je),qt=!0),jt>Ke&&Ut<=Ke&&(it=gt(lt,ht,St,Mt,It,Ke),qt=!0),!Se&&qt&&(Ie&&(lt.end=At+We*it),Ye.push(lt),lt=ve(Ze)),Ie&&(At+=We)}var Yt=Ze.length-3;ht=Ze[Yt],St=Ze[Yt+1],vt=Ze[Yt+2],(Ut=st===0?ht:St)>=je&&Ut<=Ke&&ze(lt,ht,St,vt),Yt=lt.length-3,Se&&Yt>=3&&(lt[Yt]!==lt[0]||lt[Yt+1]!==lt[1])&&ze(lt,lt[0],lt[1],lt[2]),lt.length&&Ye.push(lt)}function ve(Ze){var Ye=[];return Ye.size=Ze.size,Ye.start=Ze.start,Ye.end=Ze.end,Ye}function Te(Ze,Ye,je,Ke,st,Se){for(var Ie=0;Ie<Ze.length;Ie++)fe(Ze[Ie],Ye,je,Ke,st,Se,!1)}function ze(Ze,Ye,je,Ke){Ze.push(Ye),Ze.push(je),Ze.push(Ke)}function He(Ze,Ye,je,Ke,st,Se){var Ie=(Se-Ye)/(Ke-Ye);return Ze.push(Se),Ze.push(je+(st-je)*Ie),Ze.push(1),Ie}function Ve(Ze,Ye,je,Ke,st,Se){var Ie=(Se-je)/(st-je);return Ze.push(Ye+(Ke-Ye)*Ie),Ze.push(Se),Ze.push(1),Ie}function nt(Ze,Ye){for(var je=[],Ke=0;Ke<Ze.length;Ke++){var st,Se=Ze[Ke],Ie=Se.type;if(Ie==="Point"||Ie==="MultiPoint"||Ie==="LineString")st=tt(Se.geometry,Ye);else if(Ie==="MultiLineString"||Ie==="Polygon"){st=[];for(var We=0;We<Se.geometry.length;We++)st.push(tt(Se.geometry[We],Ye))}else if(Ie==="MultiPolygon")for(st=[],We=0;We<Se.geometry.length;We++){for(var it=[],lt=0;lt<Se.geometry[We].length;lt++)it.push(tt(Se.geometry[We][lt],Ye));st.push(it)}je.push(we(Se.id,Ie,st,Se.tags))}return je}function tt(Ze,Ye){var je=[];je.size=Ze.size,Ze.start!==void 0&&(je.start=Ze.start,je.end=Ze.end);for(var Ke=0;Ke<Ze.length;Ke+=3)je.push(Ze[Ke]+Ye,Ze[Ke+1],Ze[Ke+2]);return je}function ot(Ze,Ye){if(Ze.transformed)return Ze;var je,Ke,st,Se=1<<Ze.z,Ie=Ze.x,We=Ze.y;for(je=0;je<Ze.features.length;je++){var it=Ze.features[je],lt=it.geometry,gt=it.type;if(it.geometry=[],gt===1)for(Ke=0;Ke<lt.length;Ke+=2)it.geometry.push(pt(lt[Ke],lt[Ke+1],Ye,Se,Ie,We));else for(Ke=0;Ke<lt.length;Ke++){var At=[];for(st=0;st<lt[Ke].length;st+=2)At.push(pt(lt[Ke][st],lt[Ke][st+1],Ye,Se,Ie,We));it.geometry.push(At)}}return Ze.transformed=!0,Ze}function pt(Ze,Ye,je,Ke,st,Se){return[Math.round(je*(Ze*Ke-st)),Math.round(je*(Ye*Ke-Se))]}function Tt(Ze,Ye,je,Ke,st){for(var Se=Ye===st.maxZoom?0:st.tolerance/((1<<Ye)*st.extent),Ie={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:je,y:Ke,z:Ye,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},We=0;We<Ze.length;We++){Ie.numFeatures++,yt(Ie,Ze[We],Se,st);var it=Ze[We].minX,lt=Ze[We].minY,gt=Ze[We].maxX,At=Ze[We].maxY;it<Ie.minX&&(Ie.minX=it),lt<Ie.minY&&(Ie.minY=lt),gt>Ie.maxX&&(Ie.maxX=gt),At>Ie.maxY&&(Ie.maxY=At)}return Ie}function yt(Ze,Ye,je,Ke){var st=Ye.geometry,Se=Ye.type,Ie=[];if(Se==="Point"||Se==="MultiPoint")for(var We=0;We<st.length;We+=3)Ie.push(st[We]),Ie.push(st[We+1]),Ze.numPoints++,Ze.numSimplified++;else if(Se==="LineString")dt(Ie,st,Ze,je,!1,!1);else if(Se==="MultiLineString"||Se==="Polygon")for(We=0;We<st.length;We++)dt(Ie,st[We],Ze,je,Se==="Polygon",We===0);else if(Se==="MultiPolygon")for(var it=0;it<st.length;it++){var lt=st[it];for(We=0;We<lt.length;We++)dt(Ie,lt[We],Ze,je,!0,We===0)}if(Ie.length){var gt=Ye.tags||null;if(Se==="LineString"&&Ke.lineMetrics){for(var At in gt={},Ye.tags)gt[At]=Ye.tags[At];gt.mapbox_clip_start=st.start/st.size,gt.mapbox_clip_end=st.end/st.size}var kt={geometry:Ie,type:Se==="Polygon"||Se==="MultiPolygon"?3:Se==="LineString"||Se==="MultiLineString"?2:1,tags:gt};Ye.id!==null&&(kt.id=Ye.id),Ze.features.push(kt)}}function dt(Ze,Ye,je,Ke,st,Se){var Ie=Ke*Ke;if(Ke>0&&Ye.size<(st?Ie:Ke))je.numPoints+=Ye.length/3;else{for(var We=[],it=0;it<Ye.length;it+=3)(Ke===0||Ye[it+2]>Ie)&&(je.numSimplified++,We.push(Ye[it]),We.push(Ye[it+1])),je.numPoints++;st&&function(lt,gt){for(var At=0,kt=0,ht=lt.length,St=ht-2;kt<ht;St=kt,kt+=2)At+=(lt[kt]-lt[St])*(lt[kt+1]+lt[St+1]);if(At>0===gt)for(kt=0,ht=lt.length;kt<ht/2;kt+=2){var vt=lt[kt],Mt=lt[kt+1];lt[kt]=lt[ht-2-kt],lt[kt+1]=lt[ht-1-kt],lt[ht-2-kt]=vt,lt[ht-1-kt]=Mt}}(We,Se),Ze.push(We)}}function Pt(Ze,Ye){var je=(Ye=this.options=function(st,Se){for(var Ie in Se)st[Ie]=Se[Ie];return st}(Object.create(this.options),Ye)).debug;if(je&&console.time("preprocess data"),Ye.maxZoom<0||Ye.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ye.promoteId&&Ye.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ke=function(st,Se){var Ie=[];if(st.type==="FeatureCollection")for(var We=0;We<st.features.length;We++)$(Ie,st.features[We],Se,We);else st.type==="Feature"?$(Ie,st,Se):$(Ie,{geometry:st},Se);return Ie}(Ze,Ye);this.tiles={},this.tileCoords=[],je&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ye.indexMaxZoom,Ye.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Ke=function(st,Se){var Ie=Se.buffer/Se.extent,We=st,it=Pe(st,1,-1-Ie,Ie,0,-1,2,Se),lt=Pe(st,1,1-Ie,2+Ie,0,-1,2,Se);return(it||lt)&&(We=Pe(st,1,-Ie,1+Ie,0,-1,2,Se)||[],it&&(We=nt(it,1).concat(We)),lt&&(We=We.concat(nt(lt,-1)))),We}(Ke,Ye)).length&&this.splitTile(Ke,0,0,0),je&&(Ke.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Et(Ze,Ye,je){return 32*((1<<Ze)*je+Ye)+Ze}function Ot(Ze,Ye){var je=Ze.tileID.canonical;if(!this._geoJSONIndex)return Ye(null,null);var Ke=this._geoJSONIndex.getTile(je.z,je.x,je.y);if(!Ke)return Ye(null,null);var st=new g(Ke.features),Se=c(st);Se.byteOffset===0&&Se.byteLength===Se.buffer.byteLength||(Se=new Uint8Array(Se)),Ye(null,{vectorTile:st,rawData:Se.buffer})}ne.prototype.load=function(Ze){var Ye=this.options,je=Ye.log,Ke=Ye.minZoom,st=Ye.maxZoom,Se=Ye.nodeSize;je&&console.time("total time");var Ie="prepare "+Ze.length+" points";je&&console.time(Ie),this.points=Ze;for(var We=[],it=0;it<Ze.length;it++)Ze[it].geometry&&We.push(ie(Ze[it],it));this.trees[st+1]=new W(We,de,Ce,Se,Float32Array),je&&console.timeEnd(Ie);for(var lt=st;lt>=Ke;lt--){var gt=+Date.now();We=this._cluster(We,lt),this.trees[lt]=new W(We,de,Ce,Se,Float32Array),je&&console.log("z%d: %d clusters in %dms",lt,We.length,+Date.now()-gt)}return je&&console.timeEnd("total time"),this},ne.prototype.getClusters=function(Ze,Ye){var je=((Ze[0]+180)%360+360)%360-180,Ke=Math.max(-90,Math.min(90,Ze[1])),st=Ze[2]===180?180:((Ze[2]+180)%360+360)%360-180,Se=Math.max(-90,Math.min(90,Ze[3]));if(Ze[2]-Ze[0]>=360)je=-180,st=180;else if(je>st){var Ie=this.getClusters([je,Ke,180,Se],Ye),We=this.getClusters([-180,Ke,st,Se],Ye);return Ie.concat(We)}for(var it=this.trees[this._limitZoom(Ye)],lt=[],gt=0,At=it.range(ue(je),ce(Se),ue(st),ce(Ke));gt<At.length;gt+=1){var kt=At[gt],ht=it.points[kt];lt.push(ht.numPoints?se(ht):this.points[ht.index])}return lt},ne.prototype.getChildren=function(Ze){var Ye=this._getOriginId(Ze),je=this._getOriginZoom(Ze),Ke="No cluster with the specified id.",st=this.trees[je];if(!st)throw new Error(Ke);var Se=st.points[Ye];if(!Se)throw new Error(Ke);for(var Ie=this.options.radius/(this.options.extent*Math.pow(2,je-1)),We=[],it=0,lt=st.within(Se.x,Se.y,Ie);it<lt.length;it+=1){var gt=lt[it],At=st.points[gt];At.parentId===Ze&&We.push(At.numPoints?se(At):this.points[At.index])}if(We.length===0)throw new Error(Ke);return We},ne.prototype.getLeaves=function(Ze,Ye,je){Ye=Ye||10,je=je||0;var Ke=[];return this._appendLeaves(Ke,Ze,Ye,je,0),Ke},ne.prototype.getTile=function(Ze,Ye,je){var Ke=this.trees[this._limitZoom(Ze)],st=Math.pow(2,Ze),Se=this.options,Ie=Se.extent,We=Se.radius/Ie,it=(je-We)/st,lt=(je+1+We)/st,gt={features:[]};return this._addTileFeatures(Ke.range((Ye-We)/st,it,(Ye+1+We)/st,lt),Ke.points,Ye,je,st,gt),Ye===0&&this._addTileFeatures(Ke.range(1-We/st,it,1,lt),Ke.points,st,je,st,gt),Ye===st-1&&this._addTileFeatures(Ke.range(0,it,We/st,lt),Ke.points,-1,je,st,gt),gt.features.length?gt:null},ne.prototype.getClusterExpansionZoom=function(Ze){for(var Ye=this._getOriginZoom(Ze)-1;Ye<=this.options.maxZoom;){var je=this.getChildren(Ze);if(Ye++,je.length!==1)break;Ze=je[0].properties.cluster_id}return Ye},ne.prototype._appendLeaves=function(Ze,Ye,je,Ke,st){for(var Se=0,Ie=this.getChildren(Ye);Se<Ie.length;Se+=1){var We=Ie[Se],it=We.properties;if(it&&it.cluster?st+it.point_count<=Ke?st+=it.point_count:st=this._appendLeaves(Ze,it.cluster_id,je,Ke,st):st<Ke?st++:Ze.push(We),Ze.length===je)break}return st},ne.prototype._addTileFeatures=function(Ze,Ye,je,Ke,st,Se){for(var Ie=0,We=Ze;Ie<We.length;Ie+=1){var it=Ye[We[Ie]],lt=it.numPoints,gt={type:1,geometry:[[Math.round(this.options.extent*(it.x*st-je)),Math.round(this.options.extent*(it.y*st-Ke))]],tags:lt?ge(it):this.points[it.index].properties},At=void 0;lt?At=it.id:this.options.generateId?At=it.index:this.points[it.index].id&&(At=this.points[it.index].id),At!==void 0&&(gt.id=At),Se.features.push(gt)}},ne.prototype._limitZoom=function(Ze){return Math.max(this.options.minZoom,Math.min(Ze,this.options.maxZoom+1))},ne.prototype._cluster=function(Ze,Ye){for(var je=[],Ke=this.options,st=Ke.radius,Se=Ke.extent,Ie=Ke.reduce,We=st/(Se*Math.pow(2,Ye)),it=0;it<Ze.length;it++){var lt=Ze[it];if(!(lt.zoom<=Ye)){lt.zoom=Ye;for(var gt=this.trees[Ye+1],At=gt.within(lt.x,lt.y,We),kt=lt.numPoints||1,ht=lt.x*kt,St=lt.y*kt,vt=Ie&&kt>1?this._map(lt,!0):null,Mt=(it<<5)+(Ye+1)+this.points.length,It=0,Ut=At;It<Ut.length;It+=1){var jt=Ut[It],qt=gt.points[jt];if(!(qt.zoom<=Ye)){qt.zoom=Ye;var Yt=qt.numPoints||1;ht+=qt.x*Yt,St+=qt.y*Yt,kt+=Yt,qt.parentId=Mt,Ie&&(vt||(vt=this._map(lt,!0)),Ie(vt,this._map(qt)))}}kt===1?je.push(lt):(lt.parentId=Mt,je.push(re(ht/kt,St/kt,Mt,kt,vt)))}}return je},ne.prototype._getOriginId=function(Ze){return Ze-this.points.length>>5},ne.prototype._getOriginZoom=function(Ze){return(Ze-this.points.length)%32},ne.prototype._map=function(Ze,Ye){if(Ze.numPoints)return Ye?le({},Ze.properties):Ze.properties;var je=this.points[Ze.index].properties,Ke=this.options.map(je);return Ye&&Ke===je?le({},Ke):Ke},Pt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Pt.prototype.splitTile=function(Ze,Ye,je,Ke,st,Se,Ie){for(var We=[Ze,Ye,je,Ke],it=this.options,lt=it.debug;We.length;){Ke=We.pop(),je=We.pop(),Ye=We.pop(),Ze=We.pop();var gt=1<<Ye,At=Et(Ye,je,Ke),kt=this.tiles[At];if(!kt&&(lt>1&&console.time("creation"),kt=this.tiles[At]=Tt(Ze,Ye,je,Ke,it),this.tileCoords.push({z:Ye,x:je,y:Ke}),lt)){lt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ye,je,Ke,kt.numFeatures,kt.numPoints,kt.numSimplified),console.timeEnd("creation"));var ht="z"+Ye;this.stats[ht]=(this.stats[ht]||0)+1,this.total++}if(kt.source=Ze,st){if(Ye===it.maxZoom||Ye===st)continue;var St=1<<st-Ye;if(je!==Math.floor(Se/St)||Ke!==Math.floor(Ie/St))continue}else if(Ye===it.indexMaxZoom||kt.numPoints<=it.indexMaxPoints)continue;if(kt.source=null,Ze.length!==0){lt>1&&console.time("clipping");var vt,Mt,It,Ut,jt,qt,Yt=.5*it.buffer/it.extent,Kt=.5-Yt,pn=.5+Yt,nn=1+Yt;vt=Mt=It=Ut=null,jt=Pe(Ze,gt,je-Yt,je+pn,0,kt.minX,kt.maxX,it),qt=Pe(Ze,gt,je+Kt,je+nn,0,kt.minX,kt.maxX,it),Ze=null,jt&&(vt=Pe(jt,gt,Ke-Yt,Ke+pn,1,kt.minY,kt.maxY,it),Mt=Pe(jt,gt,Ke+Kt,Ke+nn,1,kt.minY,kt.maxY,it),jt=null),qt&&(It=Pe(qt,gt,Ke-Yt,Ke+pn,1,kt.minY,kt.maxY,it),Ut=Pe(qt,gt,Ke+Kt,Ke+nn,1,kt.minY,kt.maxY,it),qt=null),lt>1&&console.timeEnd("clipping"),We.push(vt||[],Ye+1,2*je,2*Ke),We.push(Mt||[],Ye+1,2*je,2*Ke+1),We.push(It||[],Ye+1,2*je+1,2*Ke),We.push(Ut||[],Ye+1,2*je+1,2*Ke+1)}}},Pt.prototype.getTile=function(Ze,Ye,je){var Ke=this.options,st=Ke.extent,Se=Ke.debug;if(Ze<0||Ze>24)return null;var Ie=1<<Ze,We=Et(Ze,Ye=(Ye%Ie+Ie)%Ie,je);if(this.tiles[We])return ot(this.tiles[We],st);Se>1&&console.log("drilling down to z%d-%d-%d",Ze,Ye,je);for(var it,lt=Ze,gt=Ye,At=je;!it&&lt>0;)lt--,gt=Math.floor(gt/2),At=Math.floor(At/2),it=this.tiles[Et(lt,gt,At)];return it&&it.source?(Se>1&&console.log("found parent tile z%d-%d-%d",lt,gt,At),Se>1&&console.time("drilling down"),this.splitTile(it.source,lt,gt,At,Ze,Ye,je),Se>1&&console.timeEnd("drilling down"),this.tiles[We]?ot(this.tiles[We],st):null):null};var Nt=function(Ze){function Ye(je,Ke,st,Se){Ze.call(this,je,Ke,st,Ot),Se&&(this.loadGeoJSON=Se)}return Ze&&(Ye.__proto__=Ze),Ye.prototype=Object.create(Ze&&Ze.prototype),Ye.prototype.constructor=Ye,Ye.prototype.loadData=function(je,Ke){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ke,this._pendingLoadDataParams=je,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ye.prototype._loadData=function(){var je=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Ke=this._pendingCallback,st=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Se=!!(st&&st.request&&st.request.collectResourceTiming)&&new l.RequestPerformance(st.request);this.loadGeoJSON(st,function(Ie,We){if(Ie||!We)return Ke(Ie);if(typeof We!="object")return Ke(new Error("Input data given to '"+st.source+"' is not a valid GeoJSON object."));u(We,!0);try{je._geoJSONIndex=st.cluster?new ne(function(gt){var At=gt.superclusterOptions,kt=gt.clusterProperties;if(!kt||!At)return At;for(var ht={},St={},vt={accumulated:null,zoom:0},Mt={properties:null},It=Object.keys(kt),Ut=0,jt=It;Ut<jt.length;Ut+=1){var qt=jt[Ut],Yt=kt[qt],Kt=Yt[0],pn=Yt[1],nn=l.createExpression(pn),xn=l.createExpression(typeof Kt=="string"?[Kt,["accumulated"],["get",qt]]:Kt);ht[qt]=nn.value,St[qt]=xn.value}return At.map=function(jn){Mt.properties=jn;for(var mn={},en=0,vn=It;en<vn.length;en+=1){var on=vn[en];mn[on]=ht[on].evaluate(vt,Mt)}return mn},At.reduce=function(jn,mn){Mt.properties=mn;for(var en=0,vn=It;en<vn.length;en+=1){var on=vn[en];vt.accumulated=jn[on],jn[on]=St[on].evaluate(vt,Mt)}},At}(st)).load(We.features):function(gt,At){return new Pt(gt,At)}(We,st.geojsonVtOptions)}catch(gt){return Ke(gt)}je.loaded={};var it={};if(Se){var lt=Se.finish();lt&&(it.resourceTiming={},it.resourceTiming[st.source]=JSON.parse(JSON.stringify(lt)))}Ke(null,it)})}},Ye.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Ye.prototype.reloadTile=function(je,Ke){var st=this.loaded,Se=je.uid;return st&&st[Se]?Ze.prototype.reloadTile.call(this,je,Ke):this.loadTile(je,Ke)},Ye.prototype.loadGeoJSON=function(je,Ke){if(je.request)l.getJSON(je.request,Ke);else{if(typeof je.data!="string")return Ke(new Error("Input data given to '"+je.source+"' is not a valid GeoJSON object."));try{return Ke(null,JSON.parse(je.data))}catch{return Ke(new Error("Input data given to '"+je.source+"' is not a valid GeoJSON object."))}}},Ye.prototype.removeSource=function(je,Ke){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ke()},Ye.prototype.getClusterExpansionZoom=function(je,Ke){try{Ke(null,this._geoJSONIndex.getClusterExpansionZoom(je.clusterId))}catch(st){Ke(st)}},Ye.prototype.getClusterChildren=function(je,Ke){try{Ke(null,this._geoJSONIndex.getChildren(je.clusterId))}catch(st){Ke(st)}},Ye.prototype.getClusterLeaves=function(je,Ke){try{Ke(null,this._geoJSONIndex.getLeaves(je.clusterId,je.limit,je.offset))}catch(st){Ke(st)}},Ye}(n),zt=function(Ze){var Ye=this;this.self=Ze,this.actor=new l.Actor(Ze,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:n,geojson:Nt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(je,Ke){if(Ye.workerSourceTypes[je])throw new Error('Worker source with name "'+je+'" already registered.');Ye.workerSourceTypes[je]=Ke},this.self.registerRTLTextPlugin=function(je){if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=je.applyArabicShaping,l.plugin.processBidirectionalText=je.processBidirectionalText,l.plugin.processStyledBidirectionalText=je.processStyledBidirectionalText}};return zt.prototype.setReferrer=function(Ze,Ye){this.referrer=Ye},zt.prototype.setImages=function(Ze,Ye,je){for(var Ke in this.availableImages[Ze]=Ye,this.workerSources[Ze]){var st=this.workerSources[Ze][Ke];for(var Se in st)st[Se].availableImages=Ye}je()},zt.prototype.setLayers=function(Ze,Ye,je){this.getLayerIndex(Ze).replace(Ye),je()},zt.prototype.updateLayers=function(Ze,Ye,je){this.getLayerIndex(Ze).update(Ye.layers,Ye.removedIds),je()},zt.prototype.loadTile=function(Ze,Ye,je){this.getWorkerSource(Ze,Ye.type,Ye.source).loadTile(Ye,je)},zt.prototype.loadDEMTile=function(Ze,Ye,je){this.getDEMWorkerSource(Ze,Ye.source).loadTile(Ye,je)},zt.prototype.reloadTile=function(Ze,Ye,je){this.getWorkerSource(Ze,Ye.type,Ye.source).reloadTile(Ye,je)},zt.prototype.abortTile=function(Ze,Ye,je){this.getWorkerSource(Ze,Ye.type,Ye.source).abortTile(Ye,je)},zt.prototype.removeTile=function(Ze,Ye,je){this.getWorkerSource(Ze,Ye.type,Ye.source).removeTile(Ye,je)},zt.prototype.removeDEMTile=function(Ze,Ye){this.getDEMWorkerSource(Ze,Ye.source).removeTile(Ye)},zt.prototype.removeSource=function(Ze,Ye,je){if(this.workerSources[Ze]&&this.workerSources[Ze][Ye.type]&&this.workerSources[Ze][Ye.type][Ye.source]){var Ke=this.workerSources[Ze][Ye.type][Ye.source];delete this.workerSources[Ze][Ye.type][Ye.source],Ke.removeSource!==void 0?Ke.removeSource(Ye,je):je()}},zt.prototype.loadWorkerSource=function(Ze,Ye,je){try{this.self.importScripts(Ye.url),je()}catch(Ke){je(Ke.toString())}},zt.prototype.syncRTLPluginState=function(Ze,Ye,je){try{l.plugin.setState(Ye);var Ke=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&Ke!=null){this.self.importScripts(Ke);var st=l.plugin.isParsed();je(st?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ke),st)}}catch(Se){je(Se.toString())}},zt.prototype.getAvailableImages=function(Ze){var Ye=this.availableImages[Ze];return Ye||(Ye=[]),Ye},zt.prototype.getLayerIndex=function(Ze){var Ye=this.layerIndexes[Ze];return Ye||(Ye=this.layerIndexes[Ze]=new d),Ye},zt.prototype.getWorkerSource=function(Ze,Ye,je){var Ke=this;if(this.workerSources[Ze]||(this.workerSources[Ze]={}),this.workerSources[Ze][Ye]||(this.workerSources[Ze][Ye]={}),!this.workerSources[Ze][Ye][je]){var st={send:function(Se,Ie,We){Ke.actor.send(Se,Ie,We,Ze)}};this.workerSources[Ze][Ye][je]=new this.workerSourceTypes[Ye](st,this.getLayerIndex(Ze),this.getAvailableImages(Ze))}return this.workerSources[Ze][Ye][je]},zt.prototype.getDEMWorkerSource=function(Ze,Ye){return this.demWorkerSources[Ze]||(this.demWorkerSources[Ze]={}),this.demWorkerSources[Ze][Ye]||(this.demWorkerSources[Ze][Ye]=new i),this.demWorkerSources[Ze][Ye]},zt.prototype.enforceCacheSizeLimit=function(Ze,Ye){l.enforceCacheSizeLimit(Ye)},typeof WorkerGlobalScope<"u"&&l.window!==void 0&&l.window instanceof WorkerGlobalScope&&(l.window.worker=new zt(l.window)),zt}),k(0,function(l){var T=l.createCommonjsModule(function(B){function G(me){return!H(me)}function H(me){return typeof window<"u"&&typeof document<"u"?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Be,qe,et=new Blob([""],{type:"text/javascript"}),mt=URL.createObjectURL(et);try{qe=new Worker(mt),Be=!0}catch{Be=!1}return qe&&qe.terminate(),URL.revokeObjectURL(mt),Be}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var Be=document.createElement("canvas");Be.width=Be.height=1;var qe=Be.getContext("2d");if(!qe)return!1;var et=qe.getImageData(0,0,1,1);return et&&et.width===Be.width}()?(Le=me&&me.failIfMajorPerformanceCaveat,te[Le]===void 0&&(te[Le]=function(Be){var qe=function(mt){var bt=document.createElement("canvas"),ee=Object.create(G.webGLContextAttributes);return ee.failIfMajorPerformanceCaveat=mt,bt.probablySupportsContext?bt.probablySupportsContext("webgl",ee)||bt.probablySupportsContext("experimental-webgl",ee):bt.supportsContext?bt.supportsContext("webgl",ee)||bt.supportsContext("experimental-webgl",ee):bt.getContext("webgl",ee)||bt.getContext("experimental-webgl",ee)}(Be);if(!qe)return!1;var et=qe.createShader(qe.VERTEX_SHADER);return!(!et||qe.isContextLost())&&(qe.shaderSource(et,"void main() {}"),qe.compileShader(et),qe.getShaderParameter(et,qe.COMPILE_STATUS)===!0)}(Le)),te[Le]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var Le}B.exports?B.exports=G:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=G,window.mapboxgl.notSupportedReason=H);var te={};G.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),b={create:function(B,G,H){var te=l.window.document.createElement(B);return G!==void 0&&(te.className=G),H&&H.appendChild(te),te},createNS:function(B,G){return l.window.document.createElementNS(B,G)}},d=l.window.document.documentElement.style;function s(B){if(!d)return B[0];for(var G=0;G<B.length;G++)if(B[G]in d)return B[G];return B[0]}var t,o=s(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);b.disableDrag=function(){d&&o&&(t=d[o],d[o]="none")},b.enableDrag=function(){d&&o&&(d[o]=t)};var r=s(["transform","WebkitTransform"]);b.setTransform=function(B,G){B.style[r]=G};var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){n=!0}});l.window.addEventListener("test",a,a),l.window.removeEventListener("test",a,a)}catch{n=!1}b.addEventListener=function(B,G,H,te){te===void 0&&(te={}),"passive"in te&&n?B.addEventListener(G,H,te):B.addEventListener(G,H,te.capture)},b.removeEventListener=function(B,G,H,te){te===void 0&&(te={}),"passive"in te&&n?B.removeEventListener(G,H,te):B.removeEventListener(G,H,te.capture)};var i=function(B){B.preventDefault(),B.stopPropagation(),l.window.removeEventListener("click",i,!0)};function u(B){var G=B.userImage;return!!(G&&G.render&&G.render())&&(B.data.replace(new Uint8Array(G.data.buffer)),!0)}b.suppressClick=function(){l.window.addEventListener("click",i,!0),l.window.setTimeout(function(){l.window.removeEventListener("click",i,!0)},0)},b.mousePos=function(B,G){var H=B.getBoundingClientRect();return new l.Point(G.clientX-H.left-B.clientLeft,G.clientY-H.top-B.clientTop)},b.touchPos=function(B,G){for(var H=B.getBoundingClientRect(),te=[],me=0;me<G.length;me++)te.push(new l.Point(G[me].clientX-H.left-B.clientLeft,G[me].clientY-H.top-B.clientTop));return te},b.mouseButton=function(B){return l.window.InstallTrigger!==void 0&&B.button===2&&B.ctrlKey&&l.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:B.button},b.remove=function(B){B.parentNode&&B.parentNode.removeChild(B)};var h=function(B){function G(){B.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.isLoaded=function(){return this.loaded},G.prototype.setLoaded=function(H){if(this.loaded!==H&&(this.loaded=H,H)){for(var te=0,me=this.requestors;te<me.length;te+=1){var Le=me[te],Be=Le.ids,qe=Le.callback;this._notify(Be,qe)}this.requestors=[]}},G.prototype.getImage=function(H){return this.images[H]},G.prototype.addImage=function(H,te){this._validate(H,te)&&(this.images[H]=te)},G.prototype._validate=function(H,te){var me=!0;return this._validateStretch(te.stretchX,te.data&&te.data.width)||(this.fire(new l.ErrorEvent(new Error('Image "'+H+'" has invalid "stretchX" value'))),me=!1),this._validateStretch(te.stretchY,te.data&&te.data.height)||(this.fire(new l.ErrorEvent(new Error('Image "'+H+'" has invalid "stretchY" value'))),me=!1),this._validateContent(te.content,te)||(this.fire(new l.ErrorEvent(new Error('Image "'+H+'" has invalid "content" value'))),me=!1),me},G.prototype._validateStretch=function(H,te){if(!H)return!0;for(var me=0,Le=0,Be=H;Le<Be.length;Le+=1){var qe=Be[Le];if(qe[0]<me||qe[1]<qe[0]||te<qe[1])return!1;me=qe[1]}return!0},G.prototype._validateContent=function(H,te){return!(H&&(H.length!==4||H[0]<0||te.data.width<H[0]||H[1]<0||te.data.height<H[1]||H[2]<0||te.data.width<H[2]||H[3]<0||te.data.height<H[3]||H[2]<H[0]||H[3]<H[1]))},G.prototype.updateImage=function(H,te){var me=this.images[H];te.version=me.version+1,this.images[H]=te,this.updatedImages[H]=!0},G.prototype.removeImage=function(H){var te=this.images[H];delete this.images[H],delete this.patterns[H],te.userImage&&te.userImage.onRemove&&te.userImage.onRemove()},G.prototype.listImages=function(){return Object.keys(this.images)},G.prototype.getImages=function(H,te){var me=!0;if(!this.isLoaded())for(var Le=0,Be=H;Le<Be.length;Le+=1){var qe=Be[Le];this.images[qe]||(me=!1)}this.isLoaded()||me?this._notify(H,te):this.requestors.push({ids:H,callback:te})},G.prototype._notify=function(H,te){for(var me={},Le=0,Be=H;Le<Be.length;Le+=1){var qe=Be[Le];this.images[qe]||this.fire(new l.Event("styleimagemissing",{id:qe}));var et=this.images[qe];et?me[qe]={data:et.data.clone(),pixelRatio:et.pixelRatio,sdf:et.sdf,version:et.version,stretchX:et.stretchX,stretchY:et.stretchY,content:et.content,hasRenderCallback:!!(et.userImage&&et.userImage.render)}:l.warnOnce('Image "'+qe+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}te(null,me)},G.prototype.getPixelSize=function(){var H=this.atlasImage;return{width:H.width,height:H.height}},G.prototype.getPattern=function(H){var te=this.patterns[H],me=this.getImage(H);if(!me)return null;if(te&&te.position.version===me.version)return te.position;if(te)te.position.version=me.version;else{var Le={w:me.data.width+2,h:me.data.height+2,x:0,y:0},Be=new l.ImagePosition(Le,me);this.patterns[H]={bin:Le,position:Be}}return this._updatePatternAtlas(),this.patterns[H].position},G.prototype.bind=function(H){var te=H.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.Texture(H,this.atlasImage,te.RGBA),this.atlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE)},G.prototype._updatePatternAtlas=function(){var H=[];for(var te in this.patterns)H.push(this.patterns[te].bin);var me=l.potpack(H),Le=me.w,Be=me.h,qe=this.atlasImage;for(var et in qe.resize({width:Le||1,height:Be||1}),this.patterns){var mt=this.patterns[et].bin,bt=mt.x+1,ee=mt.y+1,he=this.images[et].data,Me=he.width,Oe=he.height;l.RGBAImage.copy(he,qe,{x:0,y:0},{x:bt,y:ee},{width:Me,height:Oe}),l.RGBAImage.copy(he,qe,{x:0,y:Oe-1},{x:bt,y:ee-1},{width:Me,height:1}),l.RGBAImage.copy(he,qe,{x:0,y:0},{x:bt,y:ee+Oe},{width:Me,height:1}),l.RGBAImage.copy(he,qe,{x:Me-1,y:0},{x:bt-1,y:ee},{width:1,height:Oe}),l.RGBAImage.copy(he,qe,{x:0,y:0},{x:bt+Me,y:ee},{width:1,height:Oe})}this.dirty=!0},G.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},G.prototype.dispatchRenderCallbacks=function(H){for(var te=0,me=H;te<me.length;te+=1){var Le=me[te];if(!this.callbackDispatchedThisFrame[Le]){this.callbackDispatchedThisFrame[Le]=!0;var Be=this.images[Le];u(Be)&&this.updateImage(Le,Be)}}},G}(l.Evented),f=g,x=g,v=1e20;function g(B,G,H,te,me,Le){this.fontSize=B||24,this.buffer=G===void 0?3:G,this.cutoff=te||.25,this.fontFamily=me||"sans-serif",this.fontWeight=Le||"normal",this.radius=H||8;var Be=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Be,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Be*Be),this.gridInner=new Float64Array(Be*Be),this.f=new Float64Array(Be),this.d=new Float64Array(Be),this.z=new Float64Array(Be+1),this.v=new Int16Array(Be),this.middle=Math.round(Be/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function y(B,G,H,te,me,Le,Be){for(var qe=0;qe<G;qe++){for(var et=0;et<H;et++)te[et]=B[et*G+qe];for(p(te,me,Le,Be,H),et=0;et<H;et++)B[et*G+qe]=me[et]}for(et=0;et<H;et++){for(qe=0;qe<G;qe++)te[qe]=B[et*G+qe];for(p(te,me,Le,Be,G),qe=0;qe<G;qe++)B[et*G+qe]=Math.sqrt(me[qe])}}function p(B,G,H,te,me){H[0]=0,te[0]=-v,te[1]=+v;for(var Le=1,Be=0;Le<me;Le++){for(var qe=(B[Le]+Le*Le-(B[H[Be]]+H[Be]*H[Be]))/(2*Le-2*H[Be]);qe<=te[Be];)Be--,qe=(B[Le]+Le*Le-(B[H[Be]]+H[Be]*H[Be]))/(2*Le-2*H[Be]);H[++Be]=Le,te[Be]=qe,te[Be+1]=+v}for(Le=0,Be=0;Le<me;Le++){for(;te[Be+1]<Le;)Be++;G[Le]=(Le-H[Be])*(Le-H[Be])+B[H[Be]]}}g.prototype.draw=function(B){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(B,this.buffer,this.middle);for(var G=this.ctx.getImageData(0,0,this.size,this.size),H=new Uint8ClampedArray(this.size*this.size),te=0;te<this.size*this.size;te++){var me=G.data[4*te+3]/255;this.gridOuter[te]=me===1?0:me===0?v:Math.pow(Math.max(0,.5-me),2),this.gridInner[te]=me===1?v:me===0?0:Math.pow(Math.max(0,me-.5),2)}for(y(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),y(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),te=0;te<this.size*this.size;te++){var Le=this.gridOuter[te]-this.gridInner[te];H[te]=Math.max(0,Math.min(255,Math.round(255-255*(Le/this.radius+this.cutoff))))}return H},f.default=x;var m=function(B,G){this.requestManager=B,this.localIdeographFontFamily=G,this.entries={}};m.prototype.setURL=function(B){this.url=B},m.prototype.getGlyphs=function(B,G){var H=this,te=[];for(var me in B)for(var Le=0,Be=B[me];Le<Be.length;Le+=1){var qe=Be[Le];te.push({stack:me,id:qe})}l.asyncAll(te,function(et,mt){var bt=et.stack,ee=et.id,he=H.entries[bt];he||(he=H.entries[bt]={glyphs:{},requests:{},ranges:{}});var Me=he.glyphs[ee];if(Me===void 0){if(Me=H._tinySDF(he,bt,ee))return he.glyphs[ee]=Me,void mt(null,{stack:bt,id:ee,glyph:Me});var Oe=Math.floor(ee/256);if(256*Oe>65535)mt(new Error("glyphs > 65535 not supported"));else if(he.ranges[Oe])mt(null,{stack:bt,id:ee,glyph:Me});else{var Fe=he.requests[Oe];Fe||(Fe=he.requests[Oe]=[],m.loadGlyphRange(bt,Oe,H.url,H.requestManager,function(Ue,Ge){if(Ge){for(var Je in Ge)H._doesCharSupportLocalGlyph(+Je)||(he.glyphs[+Je]=Ge[+Je]);he.ranges[Oe]=!0}for(var rt=0,ct=Fe;rt<ct.length;rt+=1)(0,ct[rt])(Ue,Ge);delete he.requests[Oe]})),Fe.push(function(Ue,Ge){Ue?mt(Ue):Ge&&mt(null,{stack:bt,id:ee,glyph:Ge[ee]||null})})}}else mt(null,{stack:bt,id:ee,glyph:Me})},function(et,mt){if(et)G(et);else if(mt){for(var bt={},ee=0,he=mt;ee<he.length;ee+=1){var Me=he[ee],Oe=Me.stack,Fe=Me.id,Ue=Me.glyph;(bt[Oe]||(bt[Oe]={}))[Fe]=Ue&&{id:Ue.id,bitmap:Ue.bitmap.clone(),metrics:Ue.metrics}}G(null,bt)}})},m.prototype._doesCharSupportLocalGlyph=function(B){return!!this.localIdeographFontFamily&&(l.isChar["CJK Unified Ideographs"](B)||l.isChar["Hangul Syllables"](B)||l.isChar.Hiragana(B)||l.isChar.Katakana(B))},m.prototype._tinySDF=function(B,G,H){var te=this.localIdeographFontFamily;if(te&&this._doesCharSupportLocalGlyph(H)){var me=B.tinySDF;if(!me){var Le="400";/bold/i.test(G)?Le="900":/medium/i.test(G)?Le="500":/light/i.test(G)&&(Le="200"),me=B.tinySDF=new m.TinySDF(24,3,8,.25,te,Le)}return{id:H,bitmap:new l.AlphaImage({width:30,height:30},me.draw(String.fromCharCode(H))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},m.loadGlyphRange=function(B,G,H,te,me){var Le=256*G,Be=Le+255,qe=te.transformRequest(te.normalizeGlyphsURL(H).replace("{fontstack}",B).replace("{range}",Le+"-"+Be),l.ResourceType.Glyphs);l.getArrayBuffer(qe,function(et,mt){if(et)me(et);else if(mt){for(var bt={},ee=0,he=l.parseGlyphPBF(mt);ee<he.length;ee+=1){var Me=he[ee];bt[Me.id]=Me}me(null,bt)}})},m.TinySDF=f;var w=function(){this.specification=l.styleSpec.light.position};w.prototype.possiblyEvaluate=function(B,G){return l.sphericalToCartesian(B.expression.evaluate(G))},w.prototype.interpolate=function(B,G,H){return{x:l.number(B.x,G.x,H),y:l.number(B.y,G.y,H),z:l.number(B.z,G.z,H)}};var c=new l.Properties({anchor:new l.DataConstantProperty(l.styleSpec.light.anchor),position:new w,color:new l.DataConstantProperty(l.styleSpec.light.color),intensity:new l.DataConstantProperty(l.styleSpec.light.intensity)}),M="-transition",_=function(B){function G(H){B.call(this),this._transitionable=new l.Transitionable(c),this.setLight(H),this._transitioning=this._transitionable.untransitioned()}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getLight=function(){return this._transitionable.serialize()},G.prototype.setLight=function(H,te){if(te===void 0&&(te={}),!this._validate(l.validateLight,H,te))for(var me in H){var Le=H[me];l.endsWith(me,M)?this._transitionable.setTransition(me.slice(0,-M.length),Le):this._transitionable.setValue(me,Le)}},G.prototype.updateTransitions=function(H){this._transitioning=this._transitionable.transitioned(H,this._transitioning)},G.prototype.hasTransition=function(){return this._transitioning.hasTransition()},G.prototype.recalculate=function(H){this.properties=this._transitioning.possiblyEvaluate(H)},G.prototype._validate=function(H,te,me){return(!me||me.validate!==!1)&&l.emitValidationErrors(this,H.call(l.validateStyle,l.extend({value:te,style:{glyphs:!0,sprite:!0},styleSpec:l.styleSpec})))},G}(l.Evented),E=function(B,G){this.width=B,this.height=G,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};E.prototype.getDash=function(B,G){var H=B.join(",")+String(G);return this.dashEntry[H]||(this.dashEntry[H]=this.addDash(B,G)),this.dashEntry[H]},E.prototype.getDashRanges=function(B,G,H){var te=[],me=B.length%2==1?-B[B.length-1]*H:0,Le=B[0]*H,Be=!0;te.push({left:me,right:Le,isDash:Be,zeroLength:B[0]===0});for(var qe=B[0],et=1;et<B.length;et++){Be=!Be;var mt=B[et];me=qe*H,Le=(qe+=mt)*H,te.push({left:me,right:Le,isDash:Be,zeroLength:mt===0})}return te},E.prototype.addRoundDash=function(B,G,H){for(var te=G/2,me=-H;me<=H;me++)for(var Le=this.nextRow+H+me,Be=this.width*Le,qe=0,et=B[qe],mt=0;mt<this.width;mt++){mt/et.right>1&&(et=B[++qe]);var bt=Math.abs(mt-et.left),ee=Math.abs(mt-et.right),he=Math.min(bt,ee),Me=void 0,Oe=me/H*(te+1);if(et.isDash){var Fe=te-Math.abs(Oe);Me=Math.sqrt(he*he+Fe*Fe)}else Me=te-Math.sqrt(he*he+Oe*Oe);this.data[Be+mt]=Math.max(0,Math.min(255,Me+128))}},E.prototype.addRegularDash=function(B){for(var G=B.length-1;G>=0;--G){var H=B[G],te=B[G+1];H.zeroLength?B.splice(G,1):te&&te.isDash===H.isDash&&(te.left=H.left,B.splice(G,1))}var me=B[0],Le=B[B.length-1];me.isDash===Le.isDash&&(me.left=Le.left-this.width,Le.right=me.right+this.width);for(var Be=this.width*this.nextRow,qe=0,et=B[qe],mt=0;mt<this.width;mt++){mt/et.right>1&&(et=B[++qe]);var bt=Math.abs(mt-et.left),ee=Math.abs(mt-et.right),he=Math.min(bt,ee),Me=et.isDash?he:-he;this.data[Be+mt]=Math.max(0,Math.min(255,Me+128))}},E.prototype.addDash=function(B,G){var H=G?7:0,te=2*H+1;if(this.nextRow+te>this.height)return l.warnOnce("LineAtlas out of space"),null;for(var me=0,Le=0;Le<B.length;Le++)me+=B[Le];if(me!==0){var Be=this.width/me,qe=this.getDashRanges(B,this.width,Be);G?this.addRoundDash(qe,Be,H):this.addRegularDash(qe)}var et={y:(this.nextRow+H+.5)/this.height,height:2*H/this.height,width:me};return this.nextRow+=te,this.dirty=!0,et},E.prototype.bind=function(B){var G=B.gl;this.texture?(G.bindTexture(G.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,G.texSubImage2D(G.TEXTURE_2D,0,0,0,this.width,this.height,G.ALPHA,G.UNSIGNED_BYTE,this.data))):(this.texture=G.createTexture(),G.bindTexture(G.TEXTURE_2D,this.texture),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_S,G.REPEAT),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_T,G.REPEAT),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,G.LINEAR),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,G.LINEAR),G.texImage2D(G.TEXTURE_2D,0,G.ALPHA,this.width,this.height,0,G.ALPHA,G.UNSIGNED_BYTE,this.data))};var L=function B(G,H){this.workerPool=G,this.actors=[],this.currentActor=0,this.id=l.uniqueId();for(var te=this.workerPool.acquire(this.id),me=0;me<te.length;me++){var Le=te[me],Be=new B.Actor(Le,H,this.id);Be.name="Worker "+me,this.actors.push(Be)}};function C(B,G,H){var te=function(me,Le){if(me)return H(me);if(Le){var Be=l.pick(l.extend(Le,B),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Le.vector_layers&&(Be.vectorLayers=Le.vector_layers,Be.vectorLayerIds=Be.vectorLayers.map(function(qe){return qe.id})),Be.tiles=G.canonicalizeTileset(Be,B.url),H(null,Be)}};return B.url?l.getJSON(G.transformRequest(G.normalizeSourceURL(B.url),l.ResourceType.Source),te):l.browser.frame(function(){return te(null,B)})}L.prototype.broadcast=function(B,G,H){H=H||function(){},l.asyncAll(this.actors,function(te,me){te.send(B,G,me)},H)},L.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},L.prototype.remove=function(){this.actors.forEach(function(B){B.remove()}),this.actors=[],this.workerPool.release(this.id)},L.Actor=l.Actor;var O=function(B,G,H){this.bounds=l.LngLatBounds.convert(this.validateBounds(B)),this.minzoom=G||0,this.maxzoom=H||24};O.prototype.validateBounds=function(B){return Array.isArray(B)&&B.length===4?[Math.max(-180,B[0]),Math.max(-90,B[1]),Math.min(180,B[2]),Math.min(90,B[3])]:[-180,-90,180,90]},O.prototype.contains=function(B){var G=Math.pow(2,B.z),H=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*G),te=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*G),me=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*G),Le=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*G);return B.x>=H&&B.x<me&&B.y>=te&&B.y<Le};var I=function(B){function G(H,te,me,Le){if(B.call(this),this.id=H,this.dispatcher=me,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(te,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},te),this._collectResourceTiming=te.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Le)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var H=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(te,me){H._tileJSONRequest=null,H._loaded=!0,te?H.fire(new l.ErrorEvent(te)):me&&(l.extend(H,me),me.bounds&&(H.tileBounds=new O(me.bounds,H.minzoom,H.maxzoom)),l.postTurnstileEvent(me.tiles,H.map._requestManager._customAccessToken),l.postMapLoadEvent(me.tiles,H.map._getMapId(),H.map._requestManager._skuToken,H.map._requestManager._customAccessToken),H.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),H.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},G.prototype.loaded=function(){return this._loaded},G.prototype.hasTile=function(H){return!this.tileBounds||this.tileBounds.contains(H.canonical)},G.prototype.onAdd=function(H){this.map=H,this.load()},G.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},G.prototype.serialize=function(){return l.extend({},this._options)},G.prototype.loadTile=function(H,te){var me=this.map._requestManager.normalizeTileURL(H.tileID.canonical.url(this.tiles,this.scheme)),Le={request:this.map._requestManager.transformRequest(me,l.ResourceType.Tile),uid:H.uid,tileID:H.tileID,zoom:H.tileID.overscaledZ,tileSize:this.tileSize*H.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function Be(qe,et){return delete H.request,H.aborted?te(null):qe&&qe.status!==404?te(qe):(et&&et.resourceTiming&&(H.resourceTiming=et.resourceTiming),this.map._refreshExpiredTiles&&et&&H.setExpiryData(et),H.loadVectorData(et,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),te(null),void(H.reloadCallback&&(this.loadTile(H,H.reloadCallback),H.reloadCallback=null)))}Le.request.collectResourceTiming=this._collectResourceTiming,H.actor&&H.state!=="expired"?H.state==="loading"?H.reloadCallback=te:H.request=H.actor.send("reloadTile",Le,Be.bind(this)):(H.actor=this.dispatcher.getActor(),H.request=H.actor.send("loadTile",Le,Be.bind(this)))},G.prototype.abortTile=function(H){H.request&&(H.request.cancel(),delete H.request),H.actor&&H.actor.send("abortTile",{uid:H.uid,type:this.type,source:this.id},void 0)},G.prototype.unloadTile=function(H){H.unloadVectorData(),H.actor&&H.actor.send("removeTile",{uid:H.uid,type:this.type,source:this.id},void 0)},G.prototype.hasTransition=function(){return!1},G}(l.Evented),N=function(B){function G(H,te,me,Le){B.call(this),this.id=H,this.dispatcher=me,this.setEventedParent(Le),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},te),l.extend(this,l.pick(te,["url","scheme","tileSize"]))}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var H=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(te,me){H._tileJSONRequest=null,H._loaded=!0,te?H.fire(new l.ErrorEvent(te)):me&&(l.extend(H,me),me.bounds&&(H.tileBounds=new O(me.bounds,H.minzoom,H.maxzoom)),l.postTurnstileEvent(me.tiles),l.postMapLoadEvent(me.tiles,H.map._getMapId(),H.map._requestManager._skuToken),H.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),H.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},G.prototype.loaded=function(){return this._loaded},G.prototype.onAdd=function(H){this.map=H,this.load()},G.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},G.prototype.serialize=function(){return l.extend({},this._options)},G.prototype.hasTile=function(H){return!this.tileBounds||this.tileBounds.contains(H.canonical)},G.prototype.loadTile=function(H,te){var me=this,Le=this.map._requestManager.normalizeTileURL(H.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);H.request=l.getImage(this.map._requestManager.transformRequest(Le,l.ResourceType.Tile),function(Be,qe){if(delete H.request,H.aborted)H.state="unloaded",te(null);else if(Be)H.state="errored",te(Be);else if(qe){me.map._refreshExpiredTiles&&H.setExpiryData(qe),delete qe.cacheControl,delete qe.expires;var et=me.map.painter.context,mt=et.gl;H.texture=me.map.painter.getTileTexture(qe.width),H.texture?H.texture.update(qe,{useMipmap:!0}):(H.texture=new l.Texture(et,qe,mt.RGBA,{useMipmap:!0}),H.texture.bind(mt.LINEAR,mt.CLAMP_TO_EDGE,mt.LINEAR_MIPMAP_NEAREST),et.extTextureFilterAnisotropic&&mt.texParameterf(mt.TEXTURE_2D,et.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,et.extTextureFilterAnisotropicMax)),H.state="loaded",l.cacheEntryPossiblyAdded(me.dispatcher),te(null)}})},G.prototype.abortTile=function(H,te){H.request&&(H.request.cancel(),delete H.request),te()},G.prototype.unloadTile=function(H,te){H.texture&&this.map.painter.saveTileTexture(H.texture),te()},G.prototype.hasTransition=function(){return!1},G}(l.Evented),R=function(B){function G(H,te,me,Le){B.call(this,H,te,me,Le),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},te),this.encoding=te.encoding||"mapbox"}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},G.prototype.loadTile=function(H,te){var me=this.map._requestManager.normalizeTileURL(H.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Le(Be,qe){Be&&(H.state="errored",te(Be)),qe&&(H.dem=qe,H.needsHillshadePrepare=!0,H.state="loaded",te(null))}H.request=l.getImage(this.map._requestManager.transformRequest(me,l.ResourceType.Tile),function(Be,qe){if(delete H.request,H.aborted)H.state="unloaded",te(null);else if(Be)H.state="errored",te(Be);else if(qe){this.map._refreshExpiredTiles&&H.setExpiryData(qe),delete qe.cacheControl,delete qe.expires;var et=l.window.ImageBitmap&&qe instanceof l.window.ImageBitmap&&l.offscreenCanvasSupported()?qe:l.browser.getImageData(qe,1),mt={uid:H.uid,coord:H.tileID,source:this.id,rawImageData:et,encoding:this.encoding};H.actor&&H.state!=="expired"||(H.actor=this.dispatcher.getActor(),H.actor.send("loadDEMTile",mt,Le.bind(this)))}}.bind(this)),H.neighboringTiles=this._getNeighboringTiles(H.tileID)},G.prototype._getNeighboringTiles=function(H){var te=H.canonical,me=Math.pow(2,te.z),Le=(te.x-1+me)%me,Be=te.x===0?H.wrap-1:H.wrap,qe=(te.x+1+me)%me,et=te.x+1===me?H.wrap+1:H.wrap,mt={};return mt[new l.OverscaledTileID(H.overscaledZ,Be,te.z,Le,te.y).key]={backfilled:!1},mt[new l.OverscaledTileID(H.overscaledZ,et,te.z,qe,te.y).key]={backfilled:!1},te.y>0&&(mt[new l.OverscaledTileID(H.overscaledZ,Be,te.z,Le,te.y-1).key]={backfilled:!1},mt[new l.OverscaledTileID(H.overscaledZ,H.wrap,te.z,te.x,te.y-1).key]={backfilled:!1},mt[new l.OverscaledTileID(H.overscaledZ,et,te.z,qe,te.y-1).key]={backfilled:!1}),te.y+1<me&&(mt[new l.OverscaledTileID(H.overscaledZ,Be,te.z,Le,te.y+1).key]={backfilled:!1},mt[new l.OverscaledTileID(H.overscaledZ,H.wrap,te.z,te.x,te.y+1).key]={backfilled:!1},mt[new l.OverscaledTileID(H.overscaledZ,et,te.z,qe,te.y+1).key]={backfilled:!1}),mt},G.prototype.unloadTile=function(H){H.demTexture&&this.map.painter.saveTileTexture(H.demTexture),H.fbo&&(H.fbo.destroy(),delete H.fbo),H.dem&&delete H.dem,delete H.neighboringTiles,H.state="unloaded",H.actor&&H.actor.send("removeDEMTile",{uid:H.uid,source:this.id})},G}(N),V=function(B){function G(H,te,me,Le){B.call(this),this.id=H,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=me.getActor(),this.setEventedParent(Le),this._data=te.data,this._options=l.extend({},te),this._collectResourceTiming=te.collectResourceTiming,this._resourceTiming=[],te.maxzoom!==void 0&&(this.maxzoom=te.maxzoom),te.type&&(this.type=te.type),te.attribution&&(this.attribution=te.attribution),this.promoteId=te.promoteId;var Be=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:te.cluster||!1,geojsonVtOptions:{buffer:(te.buffer!==void 0?te.buffer:128)*Be,tolerance:(te.tolerance!==void 0?te.tolerance:.375)*Be,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:te.lineMetrics||!1,generateId:te.generateId||!1},superclusterOptions:{maxZoom:te.clusterMaxZoom!==void 0?Math.min(te.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:l.EXTENT,radius:(te.clusterRadius||50)*Be,log:!1,generateId:te.generateId||!1},clusterProperties:te.clusterProperties},te.workerOptions)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var H=this;this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(te){if(te)H.fire(new l.ErrorEvent(te));else{var me={dataType:"source",sourceDataType:"metadata"};H._collectResourceTiming&&H._resourceTiming&&H._resourceTiming.length>0&&(me.resourceTiming=H._resourceTiming,H._resourceTiming=[]),H.fire(new l.Event("data",me))}})},G.prototype.onAdd=function(H){this.map=H,this.load()},G.prototype.setData=function(H){var te=this;return this._data=H,this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(me){if(me)te.fire(new l.ErrorEvent(me));else{var Le={dataType:"source",sourceDataType:"content"};te._collectResourceTiming&&te._resourceTiming&&te._resourceTiming.length>0&&(Le.resourceTiming=te._resourceTiming,te._resourceTiming=[]),te.fire(new l.Event("data",Le))}}),this},G.prototype.getClusterExpansionZoom=function(H,te){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:H,source:this.id},te),this},G.prototype.getClusterChildren=function(H,te){return this.actor.send("geojson.getClusterChildren",{clusterId:H,source:this.id},te),this},G.prototype.getClusterLeaves=function(H,te,me,Le){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:H,limit:te,offset:me},Le),this},G.prototype._updateWorkerData=function(H){var te=this;this._loaded=!1;var me=l.extend({},this.workerOptions),Le=this._data;typeof Le=="string"?(me.request=this.map._requestManager.transformRequest(l.browser.resolveURL(Le),l.ResourceType.Source),me.request.collectResourceTiming=this._collectResourceTiming):me.data=JSON.stringify(Le),this.actor.send(this.type+".loadData",me,function(Be,qe){te._removed||qe&&qe.abandoned||(te._loaded=!0,qe&&qe.resourceTiming&&qe.resourceTiming[te.id]&&(te._resourceTiming=qe.resourceTiming[te.id].slice(0)),te.actor.send(te.type+".coalesce",{source:me.source},null),H(Be))})},G.prototype.loaded=function(){return this._loaded},G.prototype.loadTile=function(H,te){var me=this,Le=H.actor?"reloadTile":"loadTile";H.actor=this.actor;var Be={type:this.type,uid:H.uid,tileID:H.tileID,zoom:H.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};H.request=this.actor.send(Le,Be,function(qe,et){return delete H.request,H.unloadVectorData(),H.aborted?te(null):qe?te(qe):(H.loadVectorData(et,me.map.painter,Le==="reloadTile"),te(null))})},G.prototype.abortTile=function(H){H.request&&(H.request.cancel(),delete H.request),H.aborted=!0},G.prototype.unloadTile=function(H){H.unloadVectorData(),this.actor.send("removeTile",{uid:H.uid,type:this.type,source:this.id})},G.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},G.prototype.serialize=function(){return l.extend({},this._options,{type:this.type,data:this._data})},G.prototype.hasTransition=function(){return!1},G}(l.Evented),F=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),D=function(B){function G(H,te,me,Le){B.call(this),this.id=H,this.dispatcher=me,this.coordinates=te.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Le),this.options=te}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(H,te){var me=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),function(Le,Be){me._loaded=!0,Le?me.fire(new l.ErrorEvent(Le)):Be&&(me.image=Be,H&&(me.coordinates=H),te&&te(),me._finishLoading())})},G.prototype.loaded=function(){return this._loaded},G.prototype.updateImage=function(H){var te=this;return this.image&&H.url?(this.options.url=H.url,this.load(H.coordinates,function(){te.texture=null}),this):this},G.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))},G.prototype.onAdd=function(H){this.map=H,this.load()},G.prototype.setCoordinates=function(H){var te=this;this.coordinates=H;var me=H.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(Be){for(var qe=1/0,et=1/0,mt=-1/0,bt=-1/0,ee=0,he=Be;ee<he.length;ee+=1){var Me=he[ee];qe=Math.min(qe,Me.x),et=Math.min(et,Me.y),mt=Math.max(mt,Me.x),bt=Math.max(bt,Me.y)}var Oe=mt-qe,Fe=bt-et,Ue=Math.max(Oe,Fe),Ge=Math.max(0,Math.floor(-Math.log(Ue)/Math.LN2)),Je=Math.pow(2,Ge);return new l.CanonicalTileID(Ge,Math.floor((qe+mt)/2*Je),Math.floor((et+bt)/2*Je))}(me),this.minzoom=this.maxzoom=this.tileID.z;var Le=me.map(function(Be){return te.tileID.getTilePoint(Be)._round()});return this._boundsArray=new l.StructArrayLayout4i8,this._boundsArray.emplaceBack(Le[0].x,Le[0].y,0,0),this._boundsArray.emplaceBack(Le[1].x,Le[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(Le[3].x,Le[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(Le[2].x,Le[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this},G.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var H=this.map.painter.context,te=H.gl;for(var me in this.boundsBuffer||(this.boundsBuffer=H.createVertexBuffer(this._boundsArray,F.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new l.Texture(H,this.image,te.RGBA),this.texture.bind(te.LINEAR,te.CLAMP_TO_EDGE)),this.tiles){var Le=this.tiles[me];Le.state!=="loaded"&&(Le.state="loaded",Le.texture=this.texture)}}},G.prototype.loadTile=function(H,te){this.tileID&&this.tileID.equals(H.tileID.canonical)?(this.tiles[String(H.tileID.wrap)]=H,H.buckets={},te(null)):(H.state="errored",te(null))},G.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},G.prototype.hasTransition=function(){return!1},G}(l.Evented),U=function(B){function G(H,te,me,Le){B.call(this,H,te,me,Le),this.roundZoom=!0,this.type="video",this.options=te}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var H=this;this._loaded=!1;var te=this.options;this.urls=[];for(var me=0,Le=te.urls;me<Le.length;me+=1){var Be=Le[me];this.urls.push(this.map._requestManager.transformRequest(Be,l.ResourceType.Source).url)}l.getVideo(this.urls,function(qe,et){H._loaded=!0,qe?H.fire(new l.ErrorEvent(qe)):et&&(H.video=et,H.video.loop=!0,H.video.addEventListener("playing",function(){H.map.triggerRepaint()}),H.map&&H.video.play(),H._finishLoading())})},G.prototype.pause=function(){this.video&&this.video.pause()},G.prototype.play=function(){this.video&&this.video.play()},G.prototype.seek=function(H){if(this.video){var te=this.video.seekable;H<te.start(0)||H>te.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+te.start(0)+" and "+te.end(0)+"-second mark."))):this.video.currentTime=H}},G.prototype.getVideo=function(){return this.video},G.prototype.onAdd=function(H){this.map||(this.map=H,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},G.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var H=this.map.painter.context,te=H.gl;for(var me in this.boundsBuffer||(this.boundsBuffer=H.createVertexBuffer(this._boundsArray,F.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(te.LINEAR,te.CLAMP_TO_EDGE),te.texSubImage2D(te.TEXTURE_2D,0,0,0,te.RGBA,te.UNSIGNED_BYTE,this.video)):(this.texture=new l.Texture(H,this.video,te.RGBA),this.texture.bind(te.LINEAR,te.CLAMP_TO_EDGE)),this.tiles){var Le=this.tiles[me];Le.state!=="loaded"&&(Le.state="loaded",Le.texture=this.texture)}}},G.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},G.prototype.hasTransition=function(){return this.video&&!this.video.paused},G}(D),j=function(B){function G(H,te,me,Le){B.call(this,H,te,me,Le),te.coordinates?Array.isArray(te.coordinates)&&te.coordinates.length===4&&!te.coordinates.some(function(Be){return!Array.isArray(Be)||Be.length!==2||Be.some(function(qe){return typeof qe!="number"})})||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+H,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+H,null,'missing required property "coordinates"'))),te.animate&&typeof te.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError("sources."+H,null,'optional "animate" property must be a boolean value'))),te.canvas?typeof te.canvas=="string"||te.canvas instanceof l.window.HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+H,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+H,null,'missing required property "canvas"'))),this.options=te,this.animate=te.animate===void 0||te.animate}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof l.window.HTMLCanvasElement?this.options.canvas:l.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},G.prototype.getCanvas=function(){return this.canvas},G.prototype.onAdd=function(H){this.map=H,this.load(),this.canvas&&this.animate&&this.play()},G.prototype.onRemove=function(){this.pause()},G.prototype.prepare=function(){var H=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,H=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,H=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var te=this.map.painter.context,me=te.gl;for(var Le in this.boundsBuffer||(this.boundsBuffer=te.createVertexBuffer(this._boundsArray,F.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(H||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.Texture(te,this.canvas,me.RGBA,{premultiply:!0}),this.tiles){var Be=this.tiles[Le];Be.state!=="loaded"&&(Be.state="loaded",Be.texture=this.texture)}}},G.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},G.prototype.hasTransition=function(){return this._playing},G.prototype._hasInvalidDimensions=function(){for(var H=0,te=[this.canvas.width,this.canvas.height];H<te.length;H+=1){var me=te[H];if(isNaN(me)||me<=0)return!0}return!1},G}(D),J={vector:I,raster:N,"raster-dem":R,geojson:V,video:U,image:D,canvas:j};function X(B,G){var H=l.identity([]);return l.translate(H,H,[1,1,0]),l.scale(H,H,[.5*B.width,.5*B.height,1]),l.multiply(H,H,B.calculatePosMatrix(G.toUnwrapped()))}function Z(B,G,H,te,me,Le){var Be=function(Fe,Ue,Ge){if(Fe)for(var Je=0,rt=Fe;Je<rt.length;Je+=1){var ct=Ue[rt[Je]];if(ct&&ct.source===Ge&&ct.type==="fill-extrusion")return!0}else for(var Ct in Ue){var Dt=Ue[Ct];if(Dt.source===Ge&&Dt.type==="fill-extrusion")return!0}return!1}(me&&me.layers,G,B.id),qe=Le.maxPitchScaleFactor(),et=B.tilesIn(te,qe,Be);et.sort(Y);for(var mt=[],bt=0,ee=et;bt<ee.length;bt+=1){var he=ee[bt];mt.push({wrappedTileID:he.tileID.wrapped().key,queryResults:he.tile.queryRenderedFeatures(G,H,B._state,he.queryGeometry,he.cameraQueryGeometry,he.scale,me,Le,qe,X(B.transform,he.tileID))})}var Me=function(Fe){for(var Ue={},Ge={},Je=0,rt=Fe;Je<rt.length;Je+=1){var ct=rt[Je],Ct=ct.queryResults,Dt=ct.wrappedTileID,Ft=Ge[Dt]=Ge[Dt]||{};for(var Wt in Ct)for(var cn=Ct[Wt],Xt=Ft[Wt]=Ft[Wt]||{},tn=Ue[Wt]=Ue[Wt]||[],$t=0,_n=cn;$t<_n.length;$t+=1){var dn=_n[$t];Xt[dn.featureIndex]||(Xt[dn.featureIndex]=!0,tn.push(dn))}}return Ue}(mt);for(var Oe in Me)Me[Oe].forEach(function(Fe){var Ue=Fe.feature,Ge=B.getFeatureState(Ue.layer["source-layer"],Ue.id);Ue.source=Ue.layer.source,Ue.layer["source-layer"]&&(Ue.sourceLayer=Ue.layer["source-layer"]),Ue.state=Ge});return Me}function Y(B,G){var H=B.tileID,te=G.tileID;return H.overscaledZ-te.overscaledZ||H.canonical.y-te.canonical.y||H.wrap-te.wrap||H.canonical.x-te.canonical.x}var W=function(B,G){this.max=B,this.onRemove=G,this.reset()};W.prototype.reset=function(){for(var B in this.data)for(var G=0,H=this.data[B];G<H.length;G+=1){var te=H[G];te.timeout&&clearTimeout(te.timeout),this.onRemove(te.value)}return this.data={},this.order=[],this},W.prototype.add=function(B,G,H){var te=this,me=B.wrapped().key;this.data[me]===void 0&&(this.data[me]=[]);var Le={value:G,timeout:void 0};if(H!==void 0&&(Le.timeout=setTimeout(function(){te.remove(B,Le)},H)),this.data[me].push(Le),this.order.push(me),this.order.length>this.max){var Be=this._getAndRemoveByKey(this.order[0]);Be&&this.onRemove(Be)}return this},W.prototype.has=function(B){return B.wrapped().key in this.data},W.prototype.getAndRemove=function(B){return this.has(B)?this._getAndRemoveByKey(B.wrapped().key):null},W.prototype._getAndRemoveByKey=function(B){var G=this.data[B].shift();return G.timeout&&clearTimeout(G.timeout),this.data[B].length===0&&delete this.data[B],this.order.splice(this.order.indexOf(B),1),G.value},W.prototype.getByKey=function(B){var G=this.data[B];return G?G[0].value:null},W.prototype.get=function(B){return this.has(B)?this.data[B.wrapped().key][0].value:null},W.prototype.remove=function(B,G){if(!this.has(B))return this;var H=B.wrapped().key,te=G===void 0?0:this.data[H].indexOf(G),me=this.data[H][te];return this.data[H].splice(te,1),me.timeout&&clearTimeout(me.timeout),this.data[H].length===0&&delete this.data[H],this.onRemove(me.value),this.order.splice(this.order.indexOf(H),1),this},W.prototype.setMaxSize=function(B){for(this.max=B;this.order.length>this.max;){var G=this._getAndRemoveByKey(this.order[0]);G&&this.onRemove(G)}return this},W.prototype.filter=function(B){var G=[];for(var H in this.data)for(var te=0,me=this.data[H];te<me.length;te+=1){var Le=me[te];B(Le.value)||G.push(Le)}for(var Be=0,qe=G;Be<qe.length;Be+=1){var et=qe[Be];this.remove(et.value.tileID,et)}};var Q=function(B,G,H){this.context=B;var te=B.gl;this.buffer=te.createBuffer(),this.dynamicDraw=!!H,this.context.unbindVAO(),B.bindElementBuffer.set(this.buffer),te.bufferData(te.ELEMENT_ARRAY_BUFFER,G.arrayBuffer,this.dynamicDraw?te.DYNAMIC_DRAW:te.STATIC_DRAW),this.dynamicDraw||delete G.arrayBuffer};Q.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Q.prototype.updateData=function(B){var G=this.context.gl;this.context.unbindVAO(),this.bind(),G.bufferSubData(G.ELEMENT_ARRAY_BUFFER,0,B.arrayBuffer)},Q.prototype.destroy=function(){var B=this.context.gl;this.buffer&&(B.deleteBuffer(this.buffer),delete this.buffer)};var ne={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},re=function(B,G,H,te){this.length=G.length,this.attributes=H,this.itemSize=G.bytesPerElement,this.dynamicDraw=te,this.context=B;var me=B.gl;this.buffer=me.createBuffer(),B.bindVertexBuffer.set(this.buffer),me.bufferData(me.ARRAY_BUFFER,G.arrayBuffer,this.dynamicDraw?me.DYNAMIC_DRAW:me.STATIC_DRAW),this.dynamicDraw||delete G.arrayBuffer};re.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},re.prototype.updateData=function(B){var G=this.context.gl;this.bind(),G.bufferSubData(G.ARRAY_BUFFER,0,B.arrayBuffer)},re.prototype.enableAttributes=function(B,G){for(var H=0;H<this.attributes.length;H++){var te=this.attributes[H],me=G.attributes[te.name];me!==void 0&&B.enableVertexAttribArray(me)}},re.prototype.setVertexAttribPointers=function(B,G,H){for(var te=0;te<this.attributes.length;te++){var me=this.attributes[te],Le=G.attributes[me.name];Le!==void 0&&B.vertexAttribPointer(Le,me.components,B[ne[me.type]],!1,this.itemSize,me.offset+this.itemSize*(H||0))}},re.prototype.destroy=function(){var B=this.context.gl;this.buffer&&(B.deleteBuffer(this.buffer),delete this.buffer)};var ie=function(B){this.gl=B.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ie.prototype.get=function(){return this.current},ie.prototype.set=function(B){},ie.prototype.getDefault=function(){return this.default},ie.prototype.setDefault=function(){this.set(this.default)};var se=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return l.Color.transparent},G.prototype.set=function(H){var te=this.current;(H.r!==te.r||H.g!==te.g||H.b!==te.b||H.a!==te.a||this.dirty)&&(this.gl.clearColor(H.r,H.g,H.b,H.a),this.current=H,this.dirty=!1)},G}(ie),ge=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 1},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.clearDepth(H),this.current=H,this.dirty=!1)},G}(ie),ue=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 0},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.clearStencil(H),this.current=H,this.dirty=!1)},G}(ie),ce=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return[!0,!0,!0,!0]},G.prototype.set=function(H){var te=this.current;(H[0]!==te[0]||H[1]!==te[1]||H[2]!==te[2]||H[3]!==te[3]||this.dirty)&&(this.gl.colorMask(H[0],H[1],H[2],H[3]),this.current=H,this.dirty=!1)},G}(ie),le=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!0},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.depthMask(H),this.current=H,this.dirty=!1)},G}(ie),de=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 255},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.stencilMask(H),this.current=H,this.dirty=!1)},G}(ie),Ce=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},G.prototype.set=function(H){var te=this.current;(H.func!==te.func||H.ref!==te.ref||H.mask!==te.mask||this.dirty)&&(this.gl.stencilFunc(H.func,H.ref,H.mask),this.current=H,this.dirty=!1)},G}(ie),xe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var H=this.gl;return[H.KEEP,H.KEEP,H.KEEP]},G.prototype.set=function(H){var te=this.current;(H[0]!==te[0]||H[1]!==te[1]||H[2]!==te[2]||this.dirty)&&(this.gl.stencilOp(H[0],H[1],H[2]),this.current=H,this.dirty=!1)},G}(ie),_e=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var te=this.gl;H?te.enable(te.STENCIL_TEST):te.disable(te.STENCIL_TEST),this.current=H,this.dirty=!1}},G}(ie),we=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return[0,1]},G.prototype.set=function(H){var te=this.current;(H[0]!==te[0]||H[1]!==te[1]||this.dirty)&&(this.gl.depthRange(H[0],H[1]),this.current=H,this.dirty=!1)},G}(ie),Ae=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var te=this.gl;H?te.enable(te.DEPTH_TEST):te.disable(te.DEPTH_TEST),this.current=H,this.dirty=!1}},G}(ie),$=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.LESS},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.depthFunc(H),this.current=H,this.dirty=!1)},G}(ie),oe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var te=this.gl;H?te.enable(te.BLEND):te.disable(te.BLEND),this.current=H,this.dirty=!1}},G}(ie),pe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var H=this.gl;return[H.ONE,H.ZERO]},G.prototype.set=function(H){var te=this.current;(H[0]!==te[0]||H[1]!==te[1]||this.dirty)&&(this.gl.blendFunc(H[0],H[1]),this.current=H,this.dirty=!1)},G}(ie),ye=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return l.Color.transparent},G.prototype.set=function(H){var te=this.current;(H.r!==te.r||H.g!==te.g||H.b!==te.b||H.a!==te.a||this.dirty)&&(this.gl.blendColor(H.r,H.g,H.b,H.a),this.current=H,this.dirty=!1)},G}(ie),ke=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.FUNC_ADD},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.blendEquation(H),this.current=H,this.dirty=!1)},G}(ie),De=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var te=this.gl;H?te.enable(te.CULL_FACE):te.disable(te.CULL_FACE),this.current=H,this.dirty=!1}},G}(ie),Pe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.BACK},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.cullFace(H),this.current=H,this.dirty=!1)},G}(ie),Re=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.CCW},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.frontFace(H),this.current=H,this.dirty=!1)},G}(ie),fe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.useProgram(H),this.current=H,this.dirty=!1)},G}(ie),ve=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.TEXTURE0},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.activeTexture(H),this.current=H,this.dirty=!1)},G}(ie),Te=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var H=this.gl;return[0,0,H.drawingBufferWidth,H.drawingBufferHeight]},G.prototype.set=function(H){var te=this.current;(H[0]!==te[0]||H[1]!==te[1]||H[2]!==te[2]||H[3]!==te[3]||this.dirty)&&(this.gl.viewport(H[0],H[1],H[2],H[3]),this.current=H,this.dirty=!1)},G}(ie),ze=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){if(H!==this.current||this.dirty){var te=this.gl;te.bindFramebuffer(te.FRAMEBUFFER,H),this.current=H,this.dirty=!1}},G}(ie),He=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){if(H!==this.current||this.dirty){var te=this.gl;te.bindRenderbuffer(te.RENDERBUFFER,H),this.current=H,this.dirty=!1}},G}(ie),Ve=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){if(H!==this.current||this.dirty){var te=this.gl;te.bindTexture(te.TEXTURE_2D,H),this.current=H,this.dirty=!1}},G}(ie),nt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){if(H!==this.current||this.dirty){var te=this.gl;te.bindBuffer(te.ARRAY_BUFFER,H),this.current=H,this.dirty=!1}},G}(ie),tt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){var te=this.gl;te.bindBuffer(te.ELEMENT_ARRAY_BUFFER,H),this.current=H,this.dirty=!1},G}(ie),ot=function(B){function G(H){B.call(this,H),this.vao=H.extVertexArrayObject}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){this.vao&&(H!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(H),this.current=H,this.dirty=!1)},G}(ie),pt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 4},G.prototype.set=function(H){if(H!==this.current||this.dirty){var te=this.gl;te.pixelStorei(te.UNPACK_ALIGNMENT,H),this.current=H,this.dirty=!1}},G}(ie),Tt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var te=this.gl;te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H),this.current=H,this.dirty=!1}},G}(ie),yt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var te=this.gl;te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,H),this.current=H,this.dirty=!1}},G}(ie),dt=function(B){function G(H,te){B.call(this,H),this.context=H,this.parent=te}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G}(ie),Pt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.setDirty=function(){this.dirty=!0},G.prototype.set=function(H){if(H!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var te=this.gl;te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,H,0),this.current=H,this.dirty=!1}},G}(dt),Et=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.set=function(H){if(H!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var te=this.gl;te.framebufferRenderbuffer(te.FRAMEBUFFER,te.DEPTH_ATTACHMENT,te.RENDERBUFFER,H),this.current=H,this.dirty=!1}},G}(dt),Ot=function(B,G,H,te){this.context=B,this.width=G,this.height=H;var me=B.gl,Le=this.framebuffer=me.createFramebuffer();this.colorAttachment=new Pt(B,Le),te&&(this.depthAttachment=new Et(B,Le))};Ot.prototype.destroy=function(){var B=this.context.gl,G=this.colorAttachment.get();if(G&&B.deleteTexture(G),this.depthAttachment){var H=this.depthAttachment.get();H&&B.deleteRenderbuffer(H)}B.deleteFramebuffer(this.framebuffer)};var Nt=function(B,G,H){this.func=B,this.mask=G,this.range=H};Nt.ReadOnly=!1,Nt.ReadWrite=!0,Nt.disabled=new Nt(519,Nt.ReadOnly,[0,1]);var zt=7680,Ze=function(B,G,H,te,me,Le){this.test=B,this.ref=G,this.mask=H,this.fail=te,this.depthFail=me,this.pass=Le};Ze.disabled=new Ze({func:519,mask:0},0,0,zt,zt,zt);var Ye=function(B,G,H){this.blendFunction=B,this.blendColor=G,this.mask=H};Ye.disabled=new Ye(Ye.Replace=[1,0],l.Color.transparent,[!1,!1,!1,!1]),Ye.unblended=new Ye(Ye.Replace,l.Color.transparent,[!0,!0,!0,!0]),Ye.alphaBlended=new Ye([1,771],l.Color.transparent,[!0,!0,!0,!0]);var je=function(B,G,H){this.enable=B,this.mode=G,this.frontFace=H};je.disabled=new je(!1,1029,2305),je.backCCW=new je(!0,1029,2305);var Ke=function(B){this.gl=B,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new se(this),this.clearDepth=new ge(this),this.clearStencil=new ue(this),this.colorMask=new ce(this),this.depthMask=new le(this),this.stencilMask=new de(this),this.stencilFunc=new Ce(this),this.stencilOp=new xe(this),this.stencilTest=new _e(this),this.depthRange=new we(this),this.depthTest=new Ae(this),this.depthFunc=new $(this),this.blend=new oe(this),this.blendFunc=new pe(this),this.blendColor=new ye(this),this.blendEquation=new ke(this),this.cullFace=new De(this),this.cullFaceSide=new Pe(this),this.frontFace=new Re(this),this.program=new fe(this),this.activeTexture=new ve(this),this.viewport=new Te(this),this.bindFramebuffer=new ze(this),this.bindRenderbuffer=new He(this),this.bindTexture=new Ve(this),this.bindVertexBuffer=new nt(this),this.bindElementBuffer=new tt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ot(this),this.pixelStoreUnpack=new pt(this),this.pixelStoreUnpackPremultiplyAlpha=new Tt(this),this.pixelStoreUnpackFlipY=new yt(this),this.extTextureFilterAnisotropic=B.getExtension("EXT_texture_filter_anisotropic")||B.getExtension("MOZ_EXT_texture_filter_anisotropic")||B.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=B.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=B.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(B.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=B.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=B.getExtension("EXT_disjoint_timer_query")};Ke.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ke.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ke.prototype.createIndexBuffer=function(B,G){return new Q(this,B,G)},Ke.prototype.createVertexBuffer=function(B,G,H){return new re(this,B,G,H)},Ke.prototype.createRenderbuffer=function(B,G,H){var te=this.gl,me=te.createRenderbuffer();return this.bindRenderbuffer.set(me),te.renderbufferStorage(te.RENDERBUFFER,B,G,H),this.bindRenderbuffer.set(null),me},Ke.prototype.createFramebuffer=function(B,G,H){return new Ot(this,B,G,H)},Ke.prototype.clear=function(B){var G=B.color,H=B.depth,te=this.gl,me=0;G&&(me|=te.COLOR_BUFFER_BIT,this.clearColor.set(G),this.colorMask.set([!0,!0,!0,!0])),H!==void 0&&(me|=te.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(H),this.depthMask.set(!0)),te.clear(me)},Ke.prototype.setCullFace=function(B){B.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(B.mode),this.frontFace.set(B.frontFace))},Ke.prototype.setDepthMode=function(B){B.func!==this.gl.ALWAYS||B.mask?(this.depthTest.set(!0),this.depthFunc.set(B.func),this.depthMask.set(B.mask),this.depthRange.set(B.range)):this.depthTest.set(!1)},Ke.prototype.setStencilMode=function(B){B.test.func!==this.gl.ALWAYS||B.mask?(this.stencilTest.set(!0),this.stencilMask.set(B.mask),this.stencilOp.set([B.fail,B.depthFail,B.pass]),this.stencilFunc.set({func:B.test.func,ref:B.ref,mask:B.test.mask})):this.stencilTest.set(!1)},Ke.prototype.setColorMode=function(B){l.deepEqual(B.blendFunction,Ye.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(B.blendFunction),this.blendColor.set(B.blendColor)),this.colorMask.set(B.mask)},Ke.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var st=function(B){function G(H,te,me){var Le=this;B.call(this),this.id=H,this.dispatcher=me,this.on("data",function(Be){Be.dataType==="source"&&Be.sourceDataType==="metadata"&&(Le._sourceLoaded=!0),Le._sourceLoaded&&!Le._paused&&Be.dataType==="source"&&Be.sourceDataType==="content"&&(Le.reload(),Le.transform&&Le.update(Le.transform))}),this.on("error",function(){Le._sourceErrored=!0}),this._source=function(Be,qe,et,mt){var bt=new J[qe.type](Be,qe,et,mt);if(bt.id!==Be)throw new Error("Expected Source id to be "+Be+" instead of "+bt.id);return l.bindAll(["load","abort","unload","serialize","prepare"],bt),bt}(H,te,me,this),this._tiles={},this._cache=new W(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new l.SourceFeatureState}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.onAdd=function(H){this.map=H,this._maxTileCacheSize=H?H._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(H)},G.prototype.onRemove=function(H){this._source&&this._source.onRemove&&this._source.onRemove(H)},G.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var H in this._tiles){var te=this._tiles[H];if(te.state!=="loaded"&&te.state!=="errored")return!1}return!0},G.prototype.getSource=function(){return this._source},G.prototype.pause=function(){this._paused=!0},G.prototype.resume=function(){if(this._paused){var H=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,H&&this.reload(),this.transform&&this.update(this.transform)}},G.prototype._loadTile=function(H,te){return this._source.loadTile(H,te)},G.prototype._unloadTile=function(H){if(this._source.unloadTile)return this._source.unloadTile(H,function(){})},G.prototype._abortTile=function(H){if(this._source.abortTile)return this._source.abortTile(H,function(){})},G.prototype.serialize=function(){return this._source.serialize()},G.prototype.prepare=function(H){for(var te in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var me=this._tiles[te];me.upload(H),me.prepare(this.map.style.imageManager)}},G.prototype.getIds=function(){return l.values(this._tiles).map(function(H){return H.tileID}).sort(Se).map(function(H){return H.key})},G.prototype.getRenderableIds=function(H){var te=this,me=[];for(var Le in this._tiles)this._isIdRenderable(Le,H)&&me.push(this._tiles[Le]);return H?me.sort(function(Be,qe){var et=Be.tileID,mt=qe.tileID,bt=new l.Point(et.canonical.x,et.canonical.y)._rotate(te.transform.angle),ee=new l.Point(mt.canonical.x,mt.canonical.y)._rotate(te.transform.angle);return et.overscaledZ-mt.overscaledZ||ee.y-bt.y||ee.x-bt.x}).map(function(Be){return Be.tileID.key}):me.map(function(Be){return Be.tileID}).sort(Se).map(function(Be){return Be.key})},G.prototype.hasRenderableParent=function(H){var te=this.findLoadedParent(H,0);return!!te&&this._isIdRenderable(te.tileID.key)},G.prototype._isIdRenderable=function(H,te){return this._tiles[H]&&this._tiles[H].hasData()&&!this._coveredTiles[H]&&(te||!this._tiles[H].holdingForFade())},G.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var H in this._cache.reset(),this._tiles)this._tiles[H].state!=="errored"&&this._reloadTile(H,"reloading")},G.prototype._reloadTile=function(H,te){var me=this._tiles[H];me&&(me.state!=="loading"&&(me.state=te),this._loadTile(me,this._tileLoaded.bind(this,me,H,te)))},G.prototype._tileLoaded=function(H,te,me,Le){if(Le)return H.state="errored",void(Le.status!==404?this._source.fire(new l.ErrorEvent(Le,{tile:H})):this.update(this.transform));H.timeAdded=l.browser.now(),me==="expired"&&(H.refreshedUponExpiration=!0),this._setTileReloadTimer(te,H),this.getSource().type==="raster-dem"&&H.dem&&this._backfillDEM(H),this._state.initializeTileState(H,this.map?this.map.painter:null),this._source.fire(new l.Event("data",{dataType:"source",tile:H,coord:H.tileID}))},G.prototype._backfillDEM=function(H){for(var te=this.getRenderableIds(),me=0;me<te.length;me++){var Le=te[me];if(H.neighboringTiles&&H.neighboringTiles[Le]){var Be=this.getTileByID(Le);qe(H,Be),qe(Be,H)}}function qe(et,mt){et.needsHillshadePrepare=!0;var bt=mt.tileID.canonical.x-et.tileID.canonical.x,ee=mt.tileID.canonical.y-et.tileID.canonical.y,he=Math.pow(2,et.tileID.canonical.z),Me=mt.tileID.key;bt===0&&ee===0||Math.abs(ee)>1||(Math.abs(bt)>1&&(Math.abs(bt+he)===1?bt+=he:Math.abs(bt-he)===1&&(bt-=he)),mt.dem&&et.dem&&(et.dem.backfillBorder(mt.dem,bt,ee),et.neighboringTiles&&et.neighboringTiles[Me]&&(et.neighboringTiles[Me].backfilled=!0)))}},G.prototype.getTile=function(H){return this.getTileByID(H.key)},G.prototype.getTileByID=function(H){return this._tiles[H]},G.prototype._retainLoadedChildren=function(H,te,me,Le){for(var Be in this._tiles){var qe=this._tiles[Be];if(!(Le[Be]||!qe.hasData()||qe.tileID.overscaledZ<=te||qe.tileID.overscaledZ>me)){for(var et=qe.tileID;qe&&qe.tileID.overscaledZ>te+1;){var mt=qe.tileID.scaledTo(qe.tileID.overscaledZ-1);(qe=this._tiles[mt.key])&&qe.hasData()&&(et=mt)}for(var bt=et;bt.overscaledZ>te;)if(H[(bt=bt.scaledTo(bt.overscaledZ-1)).key]){Le[et.key]=et;break}}}},G.prototype.findLoadedParent=function(H,te){if(H.key in this._loadedParentTiles){var me=this._loadedParentTiles[H.key];return me&&me.tileID.overscaledZ>=te?me:null}for(var Le=H.overscaledZ-1;Le>=te;Le--){var Be=H.scaledTo(Le),qe=this._getLoadedTile(Be);if(qe)return qe}},G.prototype._getLoadedTile=function(H){var te=this._tiles[H.key];return te&&te.hasData()?te:this._cache.getByKey(H.wrapped().key)},G.prototype.updateCacheSize=function(H){var te=(Math.ceil(H.width/this._source.tileSize)+1)*(Math.ceil(H.height/this._source.tileSize)+1),me=Math.floor(5*te),Le=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,me):me;this._cache.setMaxSize(Le)},G.prototype.handleWrapJump=function(H){var te=(H-(this._prevLng===void 0?H:this._prevLng))/360,me=Math.round(te);if(this._prevLng=H,me){var Le={};for(var Be in this._tiles){var qe=this._tiles[Be];qe.tileID=qe.tileID.unwrapTo(qe.tileID.wrap+me),Le[qe.tileID.key]=qe}for(var et in this._tiles=Le,this._timers)clearTimeout(this._timers[et]),delete this._timers[et];for(var mt in this._tiles){var bt=this._tiles[mt];this._setTileReloadTimer(mt,bt)}}},G.prototype.update=function(H){var te=this;if(this.transform=H,this._sourceLoaded&&!this._paused){var me;this.updateCacheSize(H),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?me=H.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ft){return new l.OverscaledTileID(Ft.canonical.z,Ft.wrap,Ft.canonical.z,Ft.canonical.x,Ft.canonical.y)}):(me=H.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(me=me.filter(function(Ft){return te._source.hasTile(Ft)}))):me=[];var Le=H.coveringZoomLevel(this._source),Be=Math.max(Le-G.maxOverzooming,this._source.minzoom),qe=Math.max(Le+G.maxUnderzooming,this._source.minzoom),et=this._updateRetainedTiles(me,Le);if(Ie(this._source.type)){for(var mt={},bt={},ee=0,he=Object.keys(et);ee<he.length;ee+=1){var Me=he[ee],Oe=et[Me],Fe=this._tiles[Me];if(Fe&&!(Fe.fadeEndTime&&Fe.fadeEndTime<=l.browser.now())){var Ue=this.findLoadedParent(Oe,Be);Ue&&(this._addTile(Ue.tileID),mt[Ue.tileID.key]=Ue.tileID),bt[Me]=Oe}}for(var Ge in this._retainLoadedChildren(bt,Le,qe,et),mt)et[Ge]||(this._coveredTiles[Ge]=!0,et[Ge]=mt[Ge])}for(var Je in et)this._tiles[Je].clearFadeHold();for(var rt=0,ct=l.keysDifference(this._tiles,et);rt<ct.length;rt+=1){var Ct=ct[rt],Dt=this._tiles[Ct];Dt.hasSymbolBuckets&&!Dt.holdingForFade()?Dt.setHoldDuration(this.map._fadeDuration):Dt.hasSymbolBuckets&&!Dt.symbolFadeFinished()||this._removeTile(Ct)}this._updateLoadedParentTileCache()}},G.prototype.releaseSymbolFadeTiles=function(){for(var H in this._tiles)this._tiles[H].holdingForFade()&&this._removeTile(H)},G.prototype._updateRetainedTiles=function(H,te){for(var me={},Le={},Be=Math.max(te-G.maxOverzooming,this._source.minzoom),qe=Math.max(te+G.maxUnderzooming,this._source.minzoom),et={},mt=0,bt=H;mt<bt.length;mt+=1){var ee=bt[mt],he=this._addTile(ee);me[ee.key]=ee,he.hasData()||te<this._source.maxzoom&&(et[ee.key]=ee)}this._retainLoadedChildren(et,te,qe,me);for(var Me=0,Oe=H;Me<Oe.length;Me+=1){var Fe=Oe[Me],Ue=this._tiles[Fe.key];if(!Ue.hasData()){if(te+1>this._source.maxzoom){var Ge=Fe.children(this._source.maxzoom)[0],Je=this.getTile(Ge);if(Je&&Je.hasData()){me[Ge.key]=Ge;continue}}else{var rt=Fe.children(this._source.maxzoom);if(me[rt[0].key]&&me[rt[1].key]&&me[rt[2].key]&&me[rt[3].key])continue}for(var ct=Ue.wasRequested(),Ct=Fe.overscaledZ-1;Ct>=Be;--Ct){var Dt=Fe.scaledTo(Ct);if(Le[Dt.key]||(Le[Dt.key]=!0,!(Ue=this.getTile(Dt))&&ct&&(Ue=this._addTile(Dt)),Ue&&(me[Dt.key]=Dt,ct=Ue.wasRequested(),Ue.hasData())))break}}}return me},G.prototype._updateLoadedParentTileCache=function(){for(var H in this._loadedParentTiles={},this._tiles){for(var te=[],me=void 0,Le=this._tiles[H].tileID;Le.overscaledZ>0;){if(Le.key in this._loadedParentTiles){me=this._loadedParentTiles[Le.key];break}te.push(Le.key);var Be=Le.scaledTo(Le.overscaledZ-1);if(me=this._getLoadedTile(Be))break;Le=Be}for(var qe=0,et=te;qe<et.length;qe+=1){var mt=et[qe];this._loadedParentTiles[mt]=me}}},G.prototype._addTile=function(H){var te=this._tiles[H.key];if(te)return te;(te=this._cache.getAndRemove(H))&&(this._setTileReloadTimer(H.key,te),te.tileID=H,this._state.initializeTileState(te,this.map?this.map.painter:null),this._cacheTimers[H.key]&&(clearTimeout(this._cacheTimers[H.key]),delete this._cacheTimers[H.key],this._setTileReloadTimer(H.key,te)));var me=!!te;return me||(te=new l.Tile(H,this._source.tileSize*H.overscaleFactor()),this._loadTile(te,this._tileLoaded.bind(this,te,H.key,te.state))),te?(te.uses++,this._tiles[H.key]=te,me||this._source.fire(new l.Event("dataloading",{tile:te,coord:te.tileID,dataType:"source"})),te):null},G.prototype._setTileReloadTimer=function(H,te){var me=this;H in this._timers&&(clearTimeout(this._timers[H]),delete this._timers[H]);var Le=te.getExpiryTimeout();Le&&(this._timers[H]=setTimeout(function(){me._reloadTile(H,"expired"),delete me._timers[H]},Le))},G.prototype._removeTile=function(H){var te=this._tiles[H];te&&(te.uses--,delete this._tiles[H],this._timers[H]&&(clearTimeout(this._timers[H]),delete this._timers[H]),te.uses>0||(te.hasData()&&te.state!=="reloading"?this._cache.add(te.tileID,te,te.getExpiryTimeout()):(te.aborted=!0,this._abortTile(te),this._unloadTile(te))))},G.prototype.clearTiles=function(){for(var H in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(H);this._cache.reset()},G.prototype.tilesIn=function(H,te,me){var Le=this,Be=[],qe=this.transform;if(!qe)return Be;for(var et=me?qe.getCameraQueryGeometry(H):H,mt=H.map(function(Ct){return qe.pointCoordinate(Ct)}),bt=et.map(function(Ct){return qe.pointCoordinate(Ct)}),ee=this.getIds(),he=1/0,Me=1/0,Oe=-1/0,Fe=-1/0,Ue=0,Ge=bt;Ue<Ge.length;Ue+=1){var Je=Ge[Ue];he=Math.min(he,Je.x),Me=Math.min(Me,Je.y),Oe=Math.max(Oe,Je.x),Fe=Math.max(Fe,Je.y)}for(var rt=function(Ct){var Dt=Le._tiles[ee[Ct]];if(!Dt.holdingForFade()){var Ft=Dt.tileID,Wt=Math.pow(2,qe.zoom-Dt.tileID.overscaledZ),cn=te*Dt.queryPadding*l.EXTENT/Dt.tileSize/Wt,Xt=[Ft.getTilePoint(new l.MercatorCoordinate(he,Me)),Ft.getTilePoint(new l.MercatorCoordinate(Oe,Fe))];if(Xt[0].x-cn<l.EXTENT&&Xt[0].y-cn<l.EXTENT&&Xt[1].x+cn>=0&&Xt[1].y+cn>=0){var tn=mt.map(function(_n){return Ft.getTilePoint(_n)}),$t=bt.map(function(_n){return Ft.getTilePoint(_n)});Be.push({tile:Dt,tileID:Ft,queryGeometry:tn,cameraQueryGeometry:$t,scale:Wt})}}},ct=0;ct<ee.length;ct++)rt(ct);return Be},G.prototype.getVisibleCoordinates=function(H){for(var te=this,me=this.getRenderableIds(H).map(function(et){return te._tiles[et].tileID}),Le=0,Be=me;Le<Be.length;Le+=1){var qe=Be[Le];qe.posMatrix=this.transform.calculatePosMatrix(qe.toUnwrapped())}return me},G.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ie(this._source.type))for(var H in this._tiles){var te=this._tiles[H];if(te.fadeEndTime!==void 0&&te.fadeEndTime>=l.browser.now())return!0}return!1},G.prototype.setFeatureState=function(H,te,me){H=H||"_geojsonTileLayer",this._state.updateState(H,te,me)},G.prototype.removeFeatureState=function(H,te,me){H=H||"_geojsonTileLayer",this._state.removeFeatureState(H,te,me)},G.prototype.getFeatureState=function(H,te){return H=H||"_geojsonTileLayer",this._state.getState(H,te)},G.prototype.setDependencies=function(H,te,me){var Le=this._tiles[H];Le&&Le.setDependencies(te,me)},G.prototype.reloadTilesForDependencies=function(H,te){for(var me in this._tiles)this._tiles[me].hasDependency(H,te)&&this._reloadTile(me,"reloading");this._cache.filter(function(Le){return!Le.hasDependency(H,te)})},G}(l.Evented);function Se(B,G){var H=Math.abs(2*B.wrap)-+(B.wrap<0),te=Math.abs(2*G.wrap)-+(G.wrap<0);return B.overscaledZ-G.overscaledZ||te-H||G.canonical.y-B.canonical.y||G.canonical.x-B.canonical.x}function Ie(B){return B==="raster"||B==="image"||B==="video"}function We(){return new l.window.Worker(xt.workerUrl)}st.maxOverzooming=10,st.maxUnderzooming=3;var it="mapboxgl_preloaded_worker_pool",lt=function(){this.active={}};lt.prototype.acquire=function(B){if(!this.workers)for(this.workers=[];this.workers.length<lt.workerCount;)this.workers.push(new We);return this.active[B]=!0,this.workers.slice()},lt.prototype.release=function(B){delete this.active[B],this.numActive()===0&&(this.workers.forEach(function(G){G.terminate()}),this.workers=null)},lt.prototype.isPreloaded=function(){return!!this.active[it]},lt.prototype.numActive=function(){return Object.keys(this.active).length};var gt,At=Math.floor(l.browser.hardwareConcurrency/2);function kt(){return gt||(gt=new lt),gt}function ht(B,G){var H={};for(var te in B)te!=="ref"&&(H[te]=B[te]);return l.refProperties.forEach(function(me){me in G&&(H[me]=G[me])}),H}function St(B){B=B.slice();for(var G=Object.create(null),H=0;H<B.length;H++)G[B[H].id]=B[H];for(var te=0;te<B.length;te++)"ref"in B[te]&&(B[te]=ht(B[te],G[B[te].ref]));return B}lt.workerCount=Math.max(Math.min(At,6),1);var vt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Mt(B,G,H){H.push({command:vt.addSource,args:[B,G[B]]})}function It(B,G,H){G.push({command:vt.removeSource,args:[B]}),H[B]=!0}function Ut(B,G,H,te){It(B,H,te),Mt(B,G,H)}function jt(B,G,H){var te;for(te in B[H])if(B[H].hasOwnProperty(te)&&te!=="data"&&!l.deepEqual(B[H][te],G[H][te]))return!1;for(te in G[H])if(G[H].hasOwnProperty(te)&&te!=="data"&&!l.deepEqual(B[H][te],G[H][te]))return!1;return!0}function qt(B,G,H,te,me,Le){var Be;for(Be in G=G||{},B=B||{})B.hasOwnProperty(Be)&&(l.deepEqual(B[Be],G[Be])||H.push({command:Le,args:[te,Be,G[Be],me]}));for(Be in G)G.hasOwnProperty(Be)&&!B.hasOwnProperty(Be)&&(l.deepEqual(B[Be],G[Be])||H.push({command:Le,args:[te,Be,G[Be],me]}))}function Yt(B){return B.id}function Kt(B,G){return B[G.id]=G,B}function pn(B,G){if(!B)return[{command:vt.setStyle,args:[G]}];var H=[];try{if(!l.deepEqual(B.version,G.version))return[{command:vt.setStyle,args:[G]}];l.deepEqual(B.center,G.center)||H.push({command:vt.setCenter,args:[G.center]}),l.deepEqual(B.zoom,G.zoom)||H.push({command:vt.setZoom,args:[G.zoom]}),l.deepEqual(B.bearing,G.bearing)||H.push({command:vt.setBearing,args:[G.bearing]}),l.deepEqual(B.pitch,G.pitch)||H.push({command:vt.setPitch,args:[G.pitch]}),l.deepEqual(B.sprite,G.sprite)||H.push({command:vt.setSprite,args:[G.sprite]}),l.deepEqual(B.glyphs,G.glyphs)||H.push({command:vt.setGlyphs,args:[G.glyphs]}),l.deepEqual(B.transition,G.transition)||H.push({command:vt.setTransition,args:[G.transition]}),l.deepEqual(B.light,G.light)||H.push({command:vt.setLight,args:[G.light]});var te={},me=[];(function(Be,qe,et,mt){var bt;for(bt in qe=qe||{},Be=Be||{})Be.hasOwnProperty(bt)&&(qe.hasOwnProperty(bt)||It(bt,et,mt));for(bt in qe)qe.hasOwnProperty(bt)&&(Be.hasOwnProperty(bt)?l.deepEqual(Be[bt],qe[bt])||(Be[bt].type==="geojson"&&qe[bt].type==="geojson"&&jt(Be,qe,bt)?et.push({command:vt.setGeoJSONSourceData,args:[bt,qe[bt].data]}):Ut(bt,qe,et,mt)):Mt(bt,qe,et))})(B.sources,G.sources,me,te);var Le=[];B.layers&&B.layers.forEach(function(Be){te[Be.source]?H.push({command:vt.removeLayer,args:[Be.id]}):Le.push(Be)}),H=H.concat(me),function(Be,qe,et){qe=qe||[];var mt,bt,ee,he,Me,Oe,Fe,Ue=(Be=Be||[]).map(Yt),Ge=qe.map(Yt),Je=Be.reduce(Kt,{}),rt=qe.reduce(Kt,{}),ct=Ue.slice(),Ct=Object.create(null);for(mt=0,bt=0;mt<Ue.length;mt++)ee=Ue[mt],rt.hasOwnProperty(ee)?bt++:(et.push({command:vt.removeLayer,args:[ee]}),ct.splice(ct.indexOf(ee,bt),1));for(mt=0,bt=0;mt<Ge.length;mt++)ee=Ge[Ge.length-1-mt],ct[ct.length-1-mt]!==ee&&(Je.hasOwnProperty(ee)?(et.push({command:vt.removeLayer,args:[ee]}),ct.splice(ct.lastIndexOf(ee,ct.length-bt),1)):bt++,Oe=ct[ct.length-mt],et.push({command:vt.addLayer,args:[rt[ee],Oe]}),ct.splice(ct.length-mt,0,ee),Ct[ee]=!0);for(mt=0;mt<Ge.length;mt++)if(he=Je[ee=Ge[mt]],Me=rt[ee],!Ct[ee]&&!l.deepEqual(he,Me))if(l.deepEqual(he.source,Me.source)&&l.deepEqual(he["source-layer"],Me["source-layer"])&&l.deepEqual(he.type,Me.type)){for(Fe in qt(he.layout,Me.layout,et,ee,null,vt.setLayoutProperty),qt(he.paint,Me.paint,et,ee,null,vt.setPaintProperty),l.deepEqual(he.filter,Me.filter)||et.push({command:vt.setFilter,args:[ee,Me.filter]}),l.deepEqual(he.minzoom,Me.minzoom)&&l.deepEqual(he.maxzoom,Me.maxzoom)||et.push({command:vt.setLayerZoomRange,args:[ee,Me.minzoom,Me.maxzoom]}),he)he.hasOwnProperty(Fe)&&Fe!=="layout"&&Fe!=="paint"&&Fe!=="filter"&&Fe!=="metadata"&&Fe!=="minzoom"&&Fe!=="maxzoom"&&(Fe.indexOf("paint.")===0?qt(he[Fe],Me[Fe],et,ee,Fe.slice(6),vt.setPaintProperty):l.deepEqual(he[Fe],Me[Fe])||et.push({command:vt.setLayerProperty,args:[ee,Fe,Me[Fe]]}));for(Fe in Me)Me.hasOwnProperty(Fe)&&!he.hasOwnProperty(Fe)&&Fe!=="layout"&&Fe!=="paint"&&Fe!=="filter"&&Fe!=="metadata"&&Fe!=="minzoom"&&Fe!=="maxzoom"&&(Fe.indexOf("paint.")===0?qt(he[Fe],Me[Fe],et,ee,Fe.slice(6),vt.setPaintProperty):l.deepEqual(he[Fe],Me[Fe])||et.push({command:vt.setLayerProperty,args:[ee,Fe,Me[Fe]]}))}else et.push({command:vt.removeLayer,args:[ee]}),Oe=ct[ct.lastIndexOf(ee)+1],et.push({command:vt.addLayer,args:[Me,Oe]})}(Le,G.layers,H)}catch(Be){console.warn("Unable to compute style diff:",Be),H=[{command:vt.setStyle,args:[G]}]}return H}var nn=function(B,G){this.reset(B,G)};nn.prototype.reset=function(B,G){this.points=B||[],this._distances=[0];for(var H=1;H<this.points.length;H++)this._distances[H]=this._distances[H-1]+this.points[H].dist(this.points[H-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(G||0,.5*this.length),this.paddedLength=this.length-2*this.padding},nn.prototype.lerp=function(B){if(this.points.length===1)return this.points[0];B=l.clamp(B,0,1);for(var G=1,H=this._distances[G],te=B*this.paddedLength+this.padding;H<te&&G<this._distances.length;)H=this._distances[++G];var me=G-1,Le=this._distances[me],Be=H-Le,qe=Be>0?(te-Le)/Be:0;return this.points[me].mult(1-qe).add(this.points[G].mult(qe))};var xn=function(B,G,H){var te=this.boxCells=[],me=this.circleCells=[];this.xCellCount=Math.ceil(B/H),this.yCellCount=Math.ceil(G/H);for(var Le=0;Le<this.xCellCount*this.yCellCount;Le++)te.push([]),me.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=B,this.height=G,this.xScale=this.xCellCount/B,this.yScale=this.yCellCount/G,this.boxUid=0,this.circleUid=0};function jn(B,G,H,te,me){var Le=l.create();return G?(l.scale(Le,Le,[1/me,1/me,1]),H||l.rotateZ(Le,Le,te.angle)):l.multiply(Le,te.labelPlaneMatrix,B),Le}function mn(B,G,H,te,me){if(G){var Le=l.clone(B);return l.scale(Le,Le,[me,me,1]),H||l.rotateZ(Le,Le,-te.angle),Le}return te.glCoordMatrix}function en(B,G){var H=[B.x,B.y,0,1];mr(H,H,G);var te=H[3];return{point:new l.Point(H[0]/te,H[1]/te),signedDistanceFromCamera:te}}function vn(B,G){return .5+B/G*.5}function on(B,G){var H=B[0]/B[3],te=B[1]/B[3];return H>=-G[0]&&H<=G[0]&&te>=-G[1]&&te<=G[1]}function sn(B,G,H,te,me,Le,Be,qe){var et=te?B.textSizeData:B.iconSizeData,mt=l.evaluateSizeForZoom(et,H.transform.zoom),bt=[256/H.width*2+1,256/H.height*2+1],ee=te?B.text.dynamicLayoutVertexArray:B.icon.dynamicLayoutVertexArray;ee.clear();for(var he=B.lineVertexArray,Me=te?B.text.placedSymbolArray:B.icon.placedSymbolArray,Oe=H.transform.width/H.transform.height,Fe=!1,Ue=0;Ue<Me.length;Ue++){var Ge=Me.get(Ue);if(Ge.hidden||Ge.writingMode===l.WritingMode.vertical&&!Fe)Xn(Ge.numGlyphs,ee);else{Fe=!1;var Je=[Ge.anchorX,Ge.anchorY,0,1];if(l.transformMat4(Je,Je,G),on(Je,bt)){var rt=Je[3],ct=vn(H.transform.cameraToCenterDistance,rt),Ct=l.evaluateSizeForFeature(et,mt,Ge),Dt=Be?Ct/ct:Ct*ct,Ft=new l.Point(Ge.anchorX,Ge.anchorY),Wt=en(Ft,me).point,cn={},Xt=zn(Ge,Dt,!1,qe,G,me,Le,B.glyphOffsetArray,he,ee,Wt,Ft,cn,Oe);Fe=Xt.useVertical,(Xt.notEnoughRoom||Fe||Xt.needsFlipping&&zn(Ge,Dt,!0,qe,G,me,Le,B.glyphOffsetArray,he,ee,Wt,Ft,cn,Oe).notEnoughRoom)&&Xn(Ge.numGlyphs,ee)}else Xn(Ge.numGlyphs,ee)}}te?B.text.dynamicLayoutVertexBuffer.updateData(ee):B.icon.dynamicLayoutVertexBuffer.updateData(ee)}function En(B,G,H,te,me,Le,Be,qe,et,mt,bt){var ee=qe.glyphStartIndex+qe.numGlyphs,he=qe.lineStartIndex,Me=qe.lineStartIndex+qe.lineLength,Oe=G.getoffsetX(qe.glyphStartIndex),Fe=G.getoffsetX(ee-1),Ue=Bn(B*Oe,H,te,me,Le,Be,qe.segment,he,Me,et,mt,bt);if(!Ue)return null;var Ge=Bn(B*Fe,H,te,me,Le,Be,qe.segment,he,Me,et,mt,bt);return Ge?{first:Ue,last:Ge}:null}function kn(B,G,H,te){return B===l.WritingMode.horizontal&&Math.abs(H.y-G.y)>Math.abs(H.x-G.x)*te?{useVertical:!0}:(B===l.WritingMode.vertical?G.y<H.y:G.x>H.x)?{needsFlipping:!0}:null}function zn(B,G,H,te,me,Le,Be,qe,et,mt,bt,ee,he,Me){var Oe,Fe=G/24,Ue=B.lineOffsetX*Fe,Ge=B.lineOffsetY*Fe;if(B.numGlyphs>1){var Je=B.glyphStartIndex+B.numGlyphs,rt=B.lineStartIndex,ct=B.lineStartIndex+B.lineLength,Ct=En(Fe,qe,Ue,Ge,H,bt,ee,B,et,Le,he);if(!Ct)return{notEnoughRoom:!0};var Dt=en(Ct.first.point,Be).point,Ft=en(Ct.last.point,Be).point;if(te&&!H){var Wt=kn(B.writingMode,Dt,Ft,Me);if(Wt)return Wt}Oe=[Ct.first];for(var cn=B.glyphStartIndex+1;cn<Je-1;cn++)Oe.push(Bn(Fe*qe.getoffsetX(cn),Ue,Ge,H,bt,ee,B.segment,rt,ct,et,Le,he));Oe.push(Ct.last)}else{if(te&&!H){var Xt=en(ee,me).point,tn=B.lineStartIndex+B.segment+1,$t=new l.Point(et.getx(tn),et.gety(tn)),_n=en($t,me),dn=_n.signedDistanceFromCamera>0?_n.point:Fn(ee,$t,Xt,1,me),Qt=kn(B.writingMode,Xt,dn,Me);if(Qt)return Qt}var Cn=Bn(Fe*qe.getoffsetX(B.glyphStartIndex),Ue,Ge,H,bt,ee,B.segment,B.lineStartIndex,B.lineStartIndex+B.lineLength,et,Le,he);if(!Cn)return{notEnoughRoom:!0};Oe=[Cn]}for(var Dn=0,Jn=Oe;Dn<Jn.length;Dn+=1){var Kn=Jn[Dn];l.addDynamicAttributes(mt,Kn.point,Kn.angle)}return{}}function Fn(B,G,H,te,me){var Le=en(B.add(B.sub(G)._unit()),me).point,Be=H.sub(Le);return H.add(Be._mult(te/Be.mag()))}function Bn(B,G,H,te,me,Le,Be,qe,et,mt,bt,ee){var he=te?B-G:B+G,Me=he>0?1:-1,Oe=0;te&&(Me*=-1,Oe=Math.PI),Me<0&&(Oe+=Math.PI);for(var Fe=Me>0?qe+Be:qe+Be+1,Ue=me,Ge=me,Je=0,rt=0,ct=Math.abs(he),Ct=[];Je+rt<=ct;){if((Fe+=Me)<qe||Fe>=et)return null;if(Ge=Ue,Ct.push(Ue),(Ue=ee[Fe])===void 0){var Dt=new l.Point(mt.getx(Fe),mt.gety(Fe)),Ft=en(Dt,bt);if(Ft.signedDistanceFromCamera>0)Ue=ee[Fe]=Ft.point;else{var Wt=Fe-Me;Ue=Fn(Je===0?Le:new l.Point(mt.getx(Wt),mt.gety(Wt)),Dt,Ge,ct-Je+1,bt)}}Je+=rt,rt=Ge.dist(Ue)}var cn=(ct-Je)/rt,Xt=Ue.sub(Ge),tn=Xt.mult(cn)._add(Ge);tn._add(Xt._unit()._perp()._mult(H*Me));var $t=Oe+Math.atan2(Ue.y-Ge.y,Ue.x-Ge.x);return Ct.push(tn),{point:tn,angle:$t,path:Ct}}xn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},xn.prototype.insert=function(B,G,H,te,me){this._forEachCell(G,H,te,me,this._insertBoxCell,this.boxUid++),this.boxKeys.push(B),this.bboxes.push(G),this.bboxes.push(H),this.bboxes.push(te),this.bboxes.push(me)},xn.prototype.insertCircle=function(B,G,H,te){this._forEachCell(G-te,H-te,G+te,H+te,this._insertCircleCell,this.circleUid++),this.circleKeys.push(B),this.circles.push(G),this.circles.push(H),this.circles.push(te)},xn.prototype._insertBoxCell=function(B,G,H,te,me,Le){this.boxCells[me].push(Le)},xn.prototype._insertCircleCell=function(B,G,H,te,me,Le){this.circleCells[me].push(Le)},xn.prototype._query=function(B,G,H,te,me,Le){if(H<0||B>this.width||te<0||G>this.height)return!me&&[];var Be=[];if(B<=0&&G<=0&&this.width<=H&&this.height<=te){if(me)return!0;for(var qe=0;qe<this.boxKeys.length;qe++)Be.push({key:this.boxKeys[qe],x1:this.bboxes[4*qe],y1:this.bboxes[4*qe+1],x2:this.bboxes[4*qe+2],y2:this.bboxes[4*qe+3]});for(var et=0;et<this.circleKeys.length;et++){var mt=this.circles[3*et],bt=this.circles[3*et+1],ee=this.circles[3*et+2];Be.push({key:this.circleKeys[et],x1:mt-ee,y1:bt-ee,x2:mt+ee,y2:bt+ee})}return Le?Be.filter(Le):Be}var he={hitTest:me,seenUids:{box:{},circle:{}}};return this._forEachCell(B,G,H,te,this._queryCell,Be,he,Le),me?Be.length>0:Be},xn.prototype._queryCircle=function(B,G,H,te,me){var Le=B-H,Be=B+H,qe=G-H,et=G+H;if(Be<0||Le>this.width||et<0||qe>this.height)return!te&&[];var mt=[],bt={hitTest:te,circle:{x:B,y:G,radius:H},seenUids:{box:{},circle:{}}};return this._forEachCell(Le,qe,Be,et,this._queryCellCircle,mt,bt,me),te?mt.length>0:mt},xn.prototype.query=function(B,G,H,te,me){return this._query(B,G,H,te,!1,me)},xn.prototype.hitTest=function(B,G,H,te,me){return this._query(B,G,H,te,!0,me)},xn.prototype.hitTestCircle=function(B,G,H,te){return this._queryCircle(B,G,H,!0,te)},xn.prototype._queryCell=function(B,G,H,te,me,Le,Be,qe){var et=Be.seenUids,mt=this.boxCells[me];if(mt!==null)for(var bt=this.bboxes,ee=0,he=mt;ee<he.length;ee+=1){var Me=he[ee];if(!et.box[Me]){et.box[Me]=!0;var Oe=4*Me;if(B<=bt[Oe+2]&&G<=bt[Oe+3]&&H>=bt[Oe+0]&&te>=bt[Oe+1]&&(!qe||qe(this.boxKeys[Me]))){if(Be.hitTest)return Le.push(!0),!0;Le.push({key:this.boxKeys[Me],x1:bt[Oe],y1:bt[Oe+1],x2:bt[Oe+2],y2:bt[Oe+3]})}}}var Fe=this.circleCells[me];if(Fe!==null)for(var Ue=this.circles,Ge=0,Je=Fe;Ge<Je.length;Ge+=1){var rt=Je[Ge];if(!et.circle[rt]){et.circle[rt]=!0;var ct=3*rt;if(this._circleAndRectCollide(Ue[ct],Ue[ct+1],Ue[ct+2],B,G,H,te)&&(!qe||qe(this.circleKeys[rt]))){if(Be.hitTest)return Le.push(!0),!0;var Ct=Ue[ct],Dt=Ue[ct+1],Ft=Ue[ct+2];Le.push({key:this.circleKeys[rt],x1:Ct-Ft,y1:Dt-Ft,x2:Ct+Ft,y2:Dt+Ft})}}}},xn.prototype._queryCellCircle=function(B,G,H,te,me,Le,Be,qe){var et=Be.circle,mt=Be.seenUids,bt=this.boxCells[me];if(bt!==null)for(var ee=this.bboxes,he=0,Me=bt;he<Me.length;he+=1){var Oe=Me[he];if(!mt.box[Oe]){mt.box[Oe]=!0;var Fe=4*Oe;if(this._circleAndRectCollide(et.x,et.y,et.radius,ee[Fe+0],ee[Fe+1],ee[Fe+2],ee[Fe+3])&&(!qe||qe(this.boxKeys[Oe])))return Le.push(!0),!0}}var Ue=this.circleCells[me];if(Ue!==null)for(var Ge=this.circles,Je=0,rt=Ue;Je<rt.length;Je+=1){var ct=rt[Je];if(!mt.circle[ct]){mt.circle[ct]=!0;var Ct=3*ct;if(this._circlesCollide(Ge[Ct],Ge[Ct+1],Ge[Ct+2],et.x,et.y,et.radius)&&(!qe||qe(this.circleKeys[ct])))return Le.push(!0),!0}}},xn.prototype._forEachCell=function(B,G,H,te,me,Le,Be,qe){for(var et=this._convertToXCellCoord(B),mt=this._convertToYCellCoord(G),bt=this._convertToXCellCoord(H),ee=this._convertToYCellCoord(te),he=et;he<=bt;he++)for(var Me=mt;Me<=ee;Me++){var Oe=this.xCellCount*Me+he;if(me.call(this,B,G,H,te,Oe,Le,Be,qe))return}},xn.prototype._convertToXCellCoord=function(B){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(B*this.xScale)))},xn.prototype._convertToYCellCoord=function(B){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(B*this.yScale)))},xn.prototype._circlesCollide=function(B,G,H,te,me,Le){var Be=te-B,qe=me-G,et=H+Le;return et*et>Be*Be+qe*qe},xn.prototype._circleAndRectCollide=function(B,G,H,te,me,Le,Be){var qe=(Le-te)/2,et=Math.abs(B-(te+qe));if(et>qe+H)return!1;var mt=(Be-me)/2,bt=Math.abs(G-(me+mt));if(bt>mt+H)return!1;if(et<=qe||bt<=mt)return!0;var ee=et-qe,he=bt-mt;return ee*ee+he*he<=H*H};var er=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Xn(B,G){for(var H=0;H<B;H++){var te=G.length;G.resize(te+4),G.float32.set(er,3*te)}}function mr(B,G,H){var te=G[0],me=G[1];return B[0]=H[0]*te+H[4]*me+H[12],B[1]=H[1]*te+H[5]*me+H[13],B[3]=H[3]*te+H[7]*me+H[15],B}var ur=100,$n=function(B,G,H){G===void 0&&(G=new xn(B.width+200,B.height+200,25)),H===void 0&&(H=new xn(B.width+200,B.height+200,25)),this.transform=B,this.grid=G,this.ignoredGrid=H,this.pitchfactor=Math.cos(B._pitch)*B.cameraToCenterDistance,this.screenRightBoundary=B.width+ur,this.screenBottomBoundary=B.height+ur,this.gridRightBoundary=B.width+200,this.gridBottomBoundary=B.height+200};function lr(B,G,H){return G*(l.EXTENT/(B.tileSize*Math.pow(2,H-B.tileID.overscaledZ)))}$n.prototype.placeCollisionBox=function(B,G,H,te,me){var Le=this.projectAndGetPerspectiveRatio(te,B.anchorPointX,B.anchorPointY),Be=H*Le.perspectiveRatio,qe=B.x1*Be+Le.point.x,et=B.y1*Be+Le.point.y,mt=B.x2*Be+Le.point.x,bt=B.y2*Be+Le.point.y;return!this.isInsideGrid(qe,et,mt,bt)||!G&&this.grid.hitTest(qe,et,mt,bt,me)?{box:[],offscreen:!1}:{box:[qe,et,mt,bt],offscreen:this.isOffscreen(qe,et,mt,bt)}},$n.prototype.placeCollisionCircles=function(B,G,H,te,me,Le,Be,qe,et,mt,bt,ee,he){var Me=[],Oe=new l.Point(G.anchorX,G.anchorY),Fe=en(Oe,Le),Ue=vn(this.transform.cameraToCenterDistance,Fe.signedDistanceFromCamera),Ge=(mt?me/Ue:me*Ue)/l.ONE_EM,Je=en(Oe,Be).point,rt=En(Ge,te,G.lineOffsetX*Ge,G.lineOffsetY*Ge,!1,Je,Oe,G,H,Be,{}),ct=!1,Ct=!1,Dt=!0;if(rt){for(var Ft=.5*ee*Ue+he,Wt=new l.Point(-100,-100),cn=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),Xt=new nn,tn=rt.first,$t=rt.last,_n=[],dn=tn.path.length-1;dn>=1;dn--)_n.push(tn.path[dn]);for(var Qt=1;Qt<$t.path.length;Qt++)_n.push($t.path[Qt]);var Cn=2.5*Ft;if(qe){var Dn=_n.map(function(bi){return en(bi,qe)});_n=Dn.some(function(bi){return bi.signedDistanceFromCamera<=0})?[]:Dn.map(function(bi){return bi.point})}var Jn=[];if(_n.length>0){for(var Kn=_n[0].clone(),vr=_n[0].clone(),yr=1;yr<_n.length;yr++)Kn.x=Math.min(Kn.x,_n[yr].x),Kn.y=Math.min(Kn.y,_n[yr].y),vr.x=Math.max(vr.x,_n[yr].x),vr.y=Math.max(vr.y,_n[yr].y);Jn=Kn.x>=Wt.x&&vr.x<=cn.x&&Kn.y>=Wt.y&&vr.y<=cn.y?[_n]:vr.x<Wt.x||Kn.x>cn.x||vr.y<Wt.y||Kn.y>cn.y?[]:l.clipLine([_n],Wt.x,Wt.y,cn.x,cn.y)}for(var fr=0,gr=Jn;fr<gr.length;fr+=1){var Sr=gr[fr];Xt.reset(Sr,.25*Ft);var Vr;Vr=Xt.length<=.5*Ft?1:Math.ceil(Xt.paddedLength/Cn)+1;for(var Hr=0;Hr<Vr;Hr++){var pr=Hr/Math.max(Vr-1,1),Er=Xt.lerp(pr),Fr=Er.x+ur,Dr=Er.y+ur;Me.push(Fr,Dr,Ft,0);var Yr=Fr-Ft,Zr=Dr-Ft,$r=Fr+Ft,fi=Dr+Ft;if(Dt=Dt&&this.isOffscreen(Yr,Zr,$r,fi),Ct=Ct||this.isInsideGrid(Yr,Zr,$r,fi),!B&&this.grid.hitTestCircle(Fr,Dr,Ft,bt)&&(ct=!0,!et))return{circles:[],offscreen:!1,collisionDetected:ct}}}}return{circles:!et&&ct||!Ct?[]:Me,offscreen:Dt,collisionDetected:ct}},$n.prototype.queryRenderedSymbols=function(B){if(B.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var G=[],H=1/0,te=1/0,me=-1/0,Le=-1/0,Be=0,qe=B;Be<qe.length;Be+=1){var et=qe[Be],mt=new l.Point(et.x+ur,et.y+ur);H=Math.min(H,mt.x),te=Math.min(te,mt.y),me=Math.max(me,mt.x),Le=Math.max(Le,mt.y),G.push(mt)}for(var bt={},ee={},he=0,Me=this.grid.query(H,te,me,Le).concat(this.ignoredGrid.query(H,te,me,Le));he<Me.length;he+=1){var Oe=Me[he],Fe=Oe.key;if(bt[Fe.bucketInstanceId]===void 0&&(bt[Fe.bucketInstanceId]={}),!bt[Fe.bucketInstanceId][Fe.featureIndex]){var Ue=[new l.Point(Oe.x1,Oe.y1),new l.Point(Oe.x2,Oe.y1),new l.Point(Oe.x2,Oe.y2),new l.Point(Oe.x1,Oe.y2)];l.polygonIntersectsPolygon(G,Ue)&&(bt[Fe.bucketInstanceId][Fe.featureIndex]=!0,ee[Fe.bucketInstanceId]===void 0&&(ee[Fe.bucketInstanceId]=[]),ee[Fe.bucketInstanceId].push(Fe.featureIndex))}}return ee},$n.prototype.insertCollisionBox=function(B,G,H,te,me){var Le={bucketInstanceId:H,featureIndex:te,collisionGroupID:me};(G?this.ignoredGrid:this.grid).insert(Le,B[0],B[1],B[2],B[3])},$n.prototype.insertCollisionCircles=function(B,G,H,te,me){for(var Le=G?this.ignoredGrid:this.grid,Be={bucketInstanceId:H,featureIndex:te,collisionGroupID:me},qe=0;qe<B.length;qe+=4)Le.insertCircle(Be,B[qe],B[qe+1],B[qe+2])},$n.prototype.projectAndGetPerspectiveRatio=function(B,G,H){var te=[G,H,0,1];return mr(te,te,B),{point:new l.Point((te[0]/te[3]+1)/2*this.transform.width+ur,(-te[1]/te[3]+1)/2*this.transform.height+ur),perspectiveRatio:.5+this.transform.cameraToCenterDistance/te[3]*.5}},$n.prototype.isOffscreen=function(B,G,H,te){return H<ur||B>=this.screenRightBoundary||te<ur||G>this.screenBottomBoundary},$n.prototype.isInsideGrid=function(B,G,H,te){return H>=0&&B<this.gridRightBoundary&&te>=0&&G<this.gridBottomBoundary},$n.prototype.getViewportMatrix=function(){var B=l.identity([]);return l.translate(B,B,[-100,-100,0]),B};var hr=function(B,G,H,te){this.opacity=B?Math.max(0,Math.min(1,B.opacity+(B.placed?G:-G))):te&&H?1:0,this.placed=H};hr.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Gt=function(B,G,H,te,me){this.text=new hr(B?B.text:null,G,H,me),this.icon=new hr(B?B.icon:null,G,te,me)};Gt.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var hn=function(B,G,H){this.text=B,this.icon=G,this.skipFade=H},An=function(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]},Tn=function(B,G,H,te,me){this.bucketInstanceId=B,this.featureIndex=G,this.sourceLayerIndex=H,this.bucketIndex=te,this.tileID=me},Rn=function(B){this.crossSourceCollisions=B,this.maxGroupID=0,this.collisionGroups={}};function qn(B,G,H,te,me){var Le=l.getAnchorAlignment(B),Be=-(Le.horizontalAlign-.5)*G,qe=-(Le.verticalAlign-.5)*H,et=l.evaluateVariableOffset(B,te);return new l.Point(Be+et[0]*me,qe+et[1]*me)}function Un(B,G,H,te,me,Le){var Be=B.x1,qe=B.x2,et=B.y1,mt=B.y2,bt=B.anchorPointX,ee=B.anchorPointY,he=new l.Point(G,H);return te&&he._rotate(me?Le:-Le),{x1:Be+he.x,y1:et+he.y,x2:qe+he.x,y2:mt+he.y,anchorPointX:bt,anchorPointY:ee}}Rn.prototype.get=function(B){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[B]){var G=++this.maxGroupID;this.collisionGroups[B]={ID:G,predicate:function(H){return H.collisionGroupID===G}}}return this.collisionGroups[B]};var Yn=function(B,G,H,te){this.transform=B.clone(),this.collisionIndex=new $n(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=G,this.retainedQueryData={},this.collisionGroups=new Rn(H),this.collisionCircleArrays={},this.prevPlacement=te,te&&(te.prevPlacement=void 0),this.placedOrientations={}};function or(B,G,H,te,me){B.emplaceBack(G?1:0,H?1:0,te||0,me||0),B.emplaceBack(G?1:0,H?1:0,te||0,me||0),B.emplaceBack(G?1:0,H?1:0,te||0,me||0),B.emplaceBack(G?1:0,H?1:0,te||0,me||0)}Yn.prototype.getBucketParts=function(B,G,H,te){var me=H.getBucket(G),Le=H.latestFeatureIndex;if(me&&Le&&G.id===me.layerIds[0]){var Be=H.collisionBoxArray,qe=me.layers[0].layout,et=Math.pow(2,this.transform.zoom-H.tileID.overscaledZ),mt=H.tileSize/l.EXTENT,bt=this.transform.calculatePosMatrix(H.tileID.toUnwrapped()),ee=qe.get("text-pitch-alignment")==="map",he=qe.get("text-rotation-alignment")==="map",Me=lr(H,1,this.transform.zoom),Oe=jn(bt,ee,he,this.transform,Me),Fe=null;if(ee){var Ue=mn(bt,ee,he,this.transform,Me);Fe=l.multiply([],this.transform.labelPlaneMatrix,Ue)}this.retainedQueryData[me.bucketInstanceId]=new Tn(me.bucketInstanceId,Le,me.sourceLayerIndex,me.index,H.tileID);var Ge={bucket:me,layout:qe,posMatrix:bt,textLabelPlaneMatrix:Oe,labelToScreenMatrix:Fe,scale:et,textPixelRatio:mt,holdingForFade:H.holdingForFade(),collisionBoxArray:Be,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(me.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(me.sourceID)};if(te)for(var Je=0,rt=me.sortKeyRanges;Je<rt.length;Je+=1){var ct=rt[Je],Ct=ct.sortKey,Dt=ct.symbolInstanceStart,Ft=ct.symbolInstanceEnd;B.push({sortKey:Ct,symbolInstanceStart:Dt,symbolInstanceEnd:Ft,parameters:Ge})}else B.push({symbolInstanceStart:0,symbolInstanceEnd:me.symbolInstances.length,parameters:Ge})}},Yn.prototype.attemptAnchorPlacement=function(B,G,H,te,me,Le,Be,qe,et,mt,bt,ee,he,Me,Oe){var Fe,Ue=[ee.textOffset0,ee.textOffset1],Ge=qn(B,H,te,Ue,me),Je=this.collisionIndex.placeCollisionBox(Un(G,Ge.x,Ge.y,Le,Be,this.transform.angle),bt,qe,et,mt.predicate);if(!Oe||this.collisionIndex.placeCollisionBox(Un(Oe,Ge.x,Ge.y,Le,Be,this.transform.angle),bt,qe,et,mt.predicate).box.length!==0)return Je.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID].text&&(Fe=this.prevPlacement.variableOffsets[ee.crossTileID].anchor),this.variableOffsets[ee.crossTileID]={textOffset:Ue,width:H,height:te,anchor:B,textBoxScale:me,prevAnchor:Fe},this.markUsedJustification(he,B,ee,Me),he.allowVerticalPlacement&&(this.markUsedOrientation(he,Me,ee),this.placedOrientations[ee.crossTileID]=Me),{shift:Ge,placedGlyphBoxes:Je}):void 0},Yn.prototype.placeLayerBucketPart=function(B,G,H){var te=this,me=B.parameters,Le=me.bucket,Be=me.layout,qe=me.posMatrix,et=me.textLabelPlaneMatrix,mt=me.labelToScreenMatrix,bt=me.textPixelRatio,ee=me.holdingForFade,he=me.collisionBoxArray,Me=me.partiallyEvaluatedTextSize,Oe=me.collisionGroup,Fe=Be.get("text-optional"),Ue=Be.get("icon-optional"),Ge=Be.get("text-allow-overlap"),Je=Be.get("icon-allow-overlap"),rt=Be.get("text-rotation-alignment")==="map",ct=Be.get("text-pitch-alignment")==="map",Ct=Be.get("icon-text-fit")!=="none",Dt=Be.get("symbol-z-order")==="viewport-y",Ft=Ge&&(Je||!Le.hasIconData()||Ue),Wt=Je&&(Ge||!Le.hasTextData()||Fe);!Le.collisionArrays&&he&&Le.deserializeCollisionBoxes(he);var cn=function(Qt,Cn){if(!G[Qt.crossTileID])if(ee)te.placements[Qt.crossTileID]=new hn(!1,!1,!1);else{var Dn,Jn=!1,Kn=!1,vr=!0,yr=null,fr={box:null,offscreen:null},gr={box:null,offscreen:null},Sr=null,Vr=null,Hr=0,pr=0,Er=0;Cn.textFeatureIndex?Hr=Cn.textFeatureIndex:Qt.useRuntimeCollisionCircles&&(Hr=Qt.featureIndex),Cn.verticalTextFeatureIndex&&(pr=Cn.verticalTextFeatureIndex);var Fr=Cn.textBox;if(Fr){var Dr=function(Wr){var Ni=l.WritingMode.horizontal;if(Le.allowVerticalPlacement&&!Wr&&te.prevPlacement){var da=te.prevPlacement.placedOrientations[Qt.crossTileID];da&&(te.placedOrientations[Qt.crossTileID]=da,Ni=da,te.markUsedOrientation(Le,Ni,Qt))}return Ni},Yr=function(Wr,Ni){if(Le.allowVerticalPlacement&&Qt.numVerticalGlyphVertices>0&&Cn.verticalTextBox)for(var da=0,Ds=Le.writingModes;da<Ds.length&&(Ds[da]===l.WritingMode.vertical?(fr=Ni(),gr=fr):fr=Wr(),!(fr&&fr.box&&fr.box.length));da+=1);else fr=Wr()};if(Be.get("text-variable-anchor")){var Zr=Be.get("text-variable-anchor");if(te.prevPlacement&&te.prevPlacement.variableOffsets[Qt.crossTileID]){var $r=te.prevPlacement.variableOffsets[Qt.crossTileID];Zr.indexOf($r.anchor)>0&&(Zr=Zr.filter(function(Wr){return Wr!==$r.anchor})).unshift($r.anchor)}var fi=function(Wr,Ni,da){for(var Ds=Wr.x2-Wr.x1,oc=Wr.y2-Wr.y1,Xl=Qt.textBoxScale,sc=Ct&&!Je?Ni:null,ul={box:[],offscreen:!1},_u=Ge?2*Zr.length:Zr.length,yl=0;yl<_u;++yl){var cl=Zr[yl%Zr.length],lc=yl>=Zr.length,$s=te.attemptAnchorPlacement(cl,Wr,Ds,oc,Xl,rt,ct,bt,qe,Oe,lc,Qt,Le,da,sc);if($s&&(ul=$s.placedGlyphBoxes)&&ul.box&&ul.box.length){Jn=!0,yr=$s.shift;break}}return ul};Yr(function(){return fi(Fr,Cn.iconBox,l.WritingMode.horizontal)},function(){var Wr=Cn.verticalTextBox,Ni=fr&&fr.box&&fr.box.length;return Le.allowVerticalPlacement&&!Ni&&Qt.numVerticalGlyphVertices>0&&Wr?fi(Wr,Cn.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),fr&&(Jn=fr.box,vr=fr.offscreen);var bi=Dr(fr&&fr.box);if(!Jn&&te.prevPlacement){var gi=te.prevPlacement.variableOffsets[Qt.crossTileID];gi&&(te.variableOffsets[Qt.crossTileID]=gi,te.markUsedJustification(Le,gi.anchor,Qt,bi))}}else{var ui=function(Wr,Ni){var da=te.collisionIndex.placeCollisionBox(Wr,Ge,bt,qe,Oe.predicate);return da&&da.box&&da.box.length&&(te.markUsedOrientation(Le,Ni,Qt),te.placedOrientations[Qt.crossTileID]=Ni),da};Yr(function(){return ui(Fr,l.WritingMode.horizontal)},function(){var Wr=Cn.verticalTextBox;return Le.allowVerticalPlacement&&Qt.numVerticalGlyphVertices>0&&Wr?ui(Wr,l.WritingMode.vertical):{box:null,offscreen:null}}),Dr(fr&&fr.box&&fr.box.length)}}if(Jn=(Dn=fr)&&Dn.box&&Dn.box.length>0,vr=Dn&&Dn.offscreen,Qt.useRuntimeCollisionCircles){var hi=Le.text.placedSymbolArray.get(Qt.centerJustifiedTextSymbolIndex),vi=l.evaluateSizeForFeature(Le.textSizeData,Me,hi),Li=Be.get("text-padding"),So=Qt.collisionCircleDiameter;Sr=te.collisionIndex.placeCollisionCircles(Ge,hi,Le.lineVertexArray,Le.glyphOffsetArray,vi,qe,et,mt,H,ct,Oe.predicate,So,Li),Jn=Ge||Sr.circles.length>0&&!Sr.collisionDetected,vr=vr&&Sr.offscreen}if(Cn.iconFeatureIndex&&(Er=Cn.iconFeatureIndex),Cn.iconBox){var Bi=function(Wr){var Ni=Ct&&yr?Un(Wr,yr.x,yr.y,rt,ct,te.transform.angle):Wr;return te.collisionIndex.placeCollisionBox(Ni,Je,bt,qe,Oe.predicate)};Kn=gr&&gr.box&&gr.box.length&&Cn.verticalIconBox?(Vr=Bi(Cn.verticalIconBox)).box.length>0:(Vr=Bi(Cn.iconBox)).box.length>0,vr=vr&&Vr.offscreen}var Nr=Fe||Qt.numHorizontalGlyphVertices===0&&Qt.numVerticalGlyphVertices===0,Zi=Ue||Qt.numIconVertices===0;if(Nr||Zi?Zi?Nr||(Kn=Kn&&Jn):Jn=Kn&&Jn:Kn=Jn=Kn&&Jn,Jn&&Dn&&Dn.box&&(gr&&gr.box&&pr?te.collisionIndex.insertCollisionBox(Dn.box,Be.get("text-ignore-placement"),Le.bucketInstanceId,pr,Oe.ID):te.collisionIndex.insertCollisionBox(Dn.box,Be.get("text-ignore-placement"),Le.bucketInstanceId,Hr,Oe.ID)),Kn&&Vr&&te.collisionIndex.insertCollisionBox(Vr.box,Be.get("icon-ignore-placement"),Le.bucketInstanceId,Er,Oe.ID),Sr&&(Jn&&te.collisionIndex.insertCollisionCircles(Sr.circles,Be.get("text-ignore-placement"),Le.bucketInstanceId,Hr,Oe.ID),H)){var ea=Le.bucketInstanceId,Mi=te.collisionCircleArrays[ea];Mi===void 0&&(Mi=te.collisionCircleArrays[ea]=new An);for(var Za=0;Za<Sr.circles.length;Za+=4)Mi.circles.push(Sr.circles[Za+0]),Mi.circles.push(Sr.circles[Za+1]),Mi.circles.push(Sr.circles[Za+2]),Mi.circles.push(Sr.collisionDetected?1:0)}te.placements[Qt.crossTileID]=new hn(Jn||Ft,Kn||Wt,vr||Le.justReloaded),G[Qt.crossTileID]=!0}};if(Dt)for(var Xt=Le.getSortedSymbolIndexes(this.transform.angle),tn=Xt.length-1;tn>=0;--tn){var $t=Xt[tn];cn(Le.symbolInstances.get($t),Le.collisionArrays[$t])}else for(var _n=B.symbolInstanceStart;_n<B.symbolInstanceEnd;_n++)cn(Le.symbolInstances.get(_n),Le.collisionArrays[_n]);if(H&&Le.bucketInstanceId in this.collisionCircleArrays){var dn=this.collisionCircleArrays[Le.bucketInstanceId];l.invert(dn.invProjMatrix,qe),dn.viewportMatrix=this.collisionIndex.getViewportMatrix()}Le.justReloaded=!1},Yn.prototype.markUsedJustification=function(B,G,H,te){var me,Le={left:H.leftJustifiedTextSymbolIndex,center:H.centerJustifiedTextSymbolIndex,right:H.rightJustifiedTextSymbolIndex};me=te===l.WritingMode.vertical?H.verticalPlacedTextSymbolIndex:Le[l.getAnchorJustification(G)];for(var Be=0,qe=[H.leftJustifiedTextSymbolIndex,H.centerJustifiedTextSymbolIndex,H.rightJustifiedTextSymbolIndex,H.verticalPlacedTextSymbolIndex];Be<qe.length;Be+=1){var et=qe[Be];et>=0&&(B.text.placedSymbolArray.get(et).crossTileID=me>=0&&et!==me?0:H.crossTileID)}},Yn.prototype.markUsedOrientation=function(B,G,H){for(var te=G===l.WritingMode.horizontal||G===l.WritingMode.horizontalOnly?G:0,me=G===l.WritingMode.vertical?G:0,Le=0,Be=[H.leftJustifiedTextSymbolIndex,H.centerJustifiedTextSymbolIndex,H.rightJustifiedTextSymbolIndex];Le<Be.length;Le+=1){var qe=Be[Le];B.text.placedSymbolArray.get(qe).placedOrientation=te}H.verticalPlacedTextSymbolIndex&&(B.text.placedSymbolArray.get(H.verticalPlacedTextSymbolIndex).placedOrientation=me)},Yn.prototype.commit=function(B){this.commitTime=B,this.zoomAtLastRecencyCheck=this.transform.zoom;var G=this.prevPlacement,H=!1;this.prevZoomAdjustment=G?G.zoomAdjustment(this.transform.zoom):0;var te=G?G.symbolFadeChange(B):1,me=G?G.opacities:{},Le=G?G.variableOffsets:{},Be=G?G.placedOrientations:{};for(var qe in this.placements){var et=this.placements[qe],mt=me[qe];mt?(this.opacities[qe]=new Gt(mt,te,et.text,et.icon),H=H||et.text!==mt.text.placed||et.icon!==mt.icon.placed):(this.opacities[qe]=new Gt(null,te,et.text,et.icon,et.skipFade),H=H||et.text||et.icon)}for(var bt in me){var ee=me[bt];if(!this.opacities[bt]){var he=new Gt(ee,te,!1,!1);he.isHidden()||(this.opacities[bt]=he,H=H||ee.text.placed||ee.icon.placed)}}for(var Me in Le)this.variableOffsets[Me]||!this.opacities[Me]||this.opacities[Me].isHidden()||(this.variableOffsets[Me]=Le[Me]);for(var Oe in Be)this.placedOrientations[Oe]||!this.opacities[Oe]||this.opacities[Oe].isHidden()||(this.placedOrientations[Oe]=Be[Oe]);H?this.lastPlacementChangeTime=B:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=G?G.lastPlacementChangeTime:B)},Yn.prototype.updateLayerOpacities=function(B,G){for(var H={},te=0,me=G;te<me.length;te+=1){var Le=me[te],Be=Le.getBucket(B);Be&&Le.latestFeatureIndex&&B.id===Be.layerIds[0]&&this.updateBucketOpacities(Be,H,Le.collisionBoxArray)}},Yn.prototype.updateBucketOpacities=function(B,G,H){var te=this;B.hasTextData()&&B.text.opacityVertexArray.clear(),B.hasIconData()&&B.icon.opacityVertexArray.clear(),B.hasIconCollisionBoxData()&&B.iconCollisionBox.collisionVertexArray.clear(),B.hasTextCollisionBoxData()&&B.textCollisionBox.collisionVertexArray.clear();var me=B.layers[0].layout,Le=new Gt(null,0,!1,!1,!0),Be=me.get("text-allow-overlap"),qe=me.get("icon-allow-overlap"),et=me.get("text-variable-anchor"),mt=me.get("text-rotation-alignment")==="map",bt=me.get("text-pitch-alignment")==="map",ee=me.get("icon-text-fit")!=="none",he=new Gt(null,0,Be&&(qe||!B.hasIconData()||me.get("icon-optional")),qe&&(Be||!B.hasTextData()||me.get("text-optional")),!0);!B.collisionArrays&&H&&(B.hasIconCollisionBoxData()||B.hasTextCollisionBoxData())&&B.deserializeCollisionBoxes(H);for(var Me=function(Ge,Je,rt){for(var ct=0;ct<Je/4;ct++)Ge.opacityVertexArray.emplaceBack(rt)},Oe=function(Ge){var Je=B.symbolInstances.get(Ge),rt=Je.numHorizontalGlyphVertices,ct=Je.numVerticalGlyphVertices,Ct=Je.crossTileID,Dt=G[Ct],Ft=te.opacities[Ct];Dt?Ft=Le:Ft||(Ft=he,te.opacities[Ct]=Ft),G[Ct]=!0;var Wt=rt>0||ct>0,cn=Je.numIconVertices>0,Xt=te.placedOrientations[Je.crossTileID],tn=Xt===l.WritingMode.vertical,$t=Xt===l.WritingMode.horizontal||Xt===l.WritingMode.horizontalOnly;if(Wt){var _n=wn(Ft.text),dn=tn?ln:_n;Me(B.text,rt,dn);var Qt=$t?ln:_n;Me(B.text,ct,Qt);var Cn=Ft.text.isHidden();[Je.rightJustifiedTextSymbolIndex,Je.centerJustifiedTextSymbolIndex,Je.leftJustifiedTextSymbolIndex].forEach(function(Er){Er>=0&&(B.text.placedSymbolArray.get(Er).hidden=Cn||tn?1:0)}),Je.verticalPlacedTextSymbolIndex>=0&&(B.text.placedSymbolArray.get(Je.verticalPlacedTextSymbolIndex).hidden=Cn||$t?1:0);var Dn=te.variableOffsets[Je.crossTileID];Dn&&te.markUsedJustification(B,Dn.anchor,Je,Xt);var Jn=te.placedOrientations[Je.crossTileID];Jn&&(te.markUsedJustification(B,"left",Je,Jn),te.markUsedOrientation(B,Jn,Je))}if(cn){var Kn=wn(Ft.icon),vr=!(ee&&Je.verticalPlacedIconSymbolIndex&&tn);if(Je.placedIconSymbolIndex>=0){var yr=vr?Kn:ln;Me(B.icon,Je.numIconVertices,yr),B.icon.placedSymbolArray.get(Je.placedIconSymbolIndex).hidden=Ft.icon.isHidden()}if(Je.verticalPlacedIconSymbolIndex>=0){var fr=vr?ln:Kn;Me(B.icon,Je.numVerticalIconVertices,fr),B.icon.placedSymbolArray.get(Je.verticalPlacedIconSymbolIndex).hidden=Ft.icon.isHidden()}}if(B.hasIconCollisionBoxData()||B.hasTextCollisionBoxData()){var gr=B.collisionArrays[Ge];if(gr){var Sr=new l.Point(0,0);if(gr.textBox||gr.verticalTextBox){var Vr=!0;if(et){var Hr=te.variableOffsets[Ct];Hr?(Sr=qn(Hr.anchor,Hr.width,Hr.height,Hr.textOffset,Hr.textBoxScale),mt&&Sr._rotate(bt?te.transform.angle:-te.transform.angle)):Vr=!1}gr.textBox&&or(B.textCollisionBox.collisionVertexArray,Ft.text.placed,!Vr||tn,Sr.x,Sr.y),gr.verticalTextBox&&or(B.textCollisionBox.collisionVertexArray,Ft.text.placed,!Vr||$t,Sr.x,Sr.y)}var pr=!!(!$t&&gr.verticalIconBox);gr.iconBox&&or(B.iconCollisionBox.collisionVertexArray,Ft.icon.placed,pr,ee?Sr.x:0,ee?Sr.y:0),gr.verticalIconBox&&or(B.iconCollisionBox.collisionVertexArray,Ft.icon.placed,!pr,ee?Sr.x:0,ee?Sr.y:0)}}},Fe=0;Fe<B.symbolInstances.length;Fe++)Oe(Fe);if(B.sortFeatures(this.transform.angle),this.retainedQueryData[B.bucketInstanceId]&&(this.retainedQueryData[B.bucketInstanceId].featureSortOrder=B.featureSortOrder),B.hasTextData()&&B.text.opacityVertexBuffer&&B.text.opacityVertexBuffer.updateData(B.text.opacityVertexArray),B.hasIconData()&&B.icon.opacityVertexBuffer&&B.icon.opacityVertexBuffer.updateData(B.icon.opacityVertexArray),B.hasIconCollisionBoxData()&&B.iconCollisionBox.collisionVertexBuffer&&B.iconCollisionBox.collisionVertexBuffer.updateData(B.iconCollisionBox.collisionVertexArray),B.hasTextCollisionBoxData()&&B.textCollisionBox.collisionVertexBuffer&&B.textCollisionBox.collisionVertexBuffer.updateData(B.textCollisionBox.collisionVertexArray),B.bucketInstanceId in this.collisionCircleArrays){var Ue=this.collisionCircleArrays[B.bucketInstanceId];B.placementInvProjMatrix=Ue.invProjMatrix,B.placementViewportMatrix=Ue.viewportMatrix,B.collisionCircleArray=Ue.circles,delete this.collisionCircleArrays[B.bucketInstanceId]}},Yn.prototype.symbolFadeChange=function(B){return this.fadeDuration===0?1:(B-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Yn.prototype.zoomAdjustment=function(B){return Math.max(0,(this.transform.zoom-B)/1.5)},Yn.prototype.hasTransitions=function(B){return this.stale||B-this.lastPlacementChangeTime<this.fadeDuration},Yn.prototype.stillRecent=function(B,G){var H=this.zoomAtLastRecencyCheck===G?1-this.zoomAdjustment(G):1;return this.zoomAtLastRecencyCheck=G,this.commitTime+this.fadeDuration*H>B},Yn.prototype.setStale=function(){this.stale=!0};var Jt=Math.pow(2,25),Mn=Math.pow(2,24),Rt=Math.pow(2,17),Zt=Math.pow(2,16),rn=Math.pow(2,9),Ln=Math.pow(2,8),Sn=Math.pow(2,1);function wn(B){if(B.opacity===0&&!B.placed)return 0;if(B.opacity===1&&B.placed)return 4294967295;var G=B.placed?1:0,H=Math.floor(127*B.opacity);return H*Jt+G*Mn+H*Rt+G*Zt+H*rn+G*Ln+H*Sn+G}var ln=0,gn=function(B){this._sortAcrossTiles=B.layout.get("symbol-z-order")!=="viewport-y"&&B.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};gn.prototype.continuePlacement=function(B,G,H,te,me){for(var Le=this._bucketParts;this._currentTileIndex<B.length;){var Be=B[this._currentTileIndex];if(G.getBucketParts(Le,te,Be,this._sortAcrossTiles),this._currentTileIndex++,me())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Le.sort(function(et,mt){return et.sortKey-mt.sortKey}));this._currentPartIndex<Le.length;){var qe=Le[this._currentPartIndex];if(G.placeLayerBucketPart(qe,this._seenCrossTileIDs,H),this._currentPartIndex++,me())return!0}return!1};var un=function(B,G,H,te,me,Le,Be){this.placement=new Yn(B,me,Le,Be),this._currentPlacementIndex=G.length-1,this._forceFullPlacement=H,this._showCollisionBoxes=te,this._done=!1};un.prototype.isDone=function(){return this._done},un.prototype.continuePlacement=function(B,G,H){for(var te=this,me=l.browser.now(),Le=function(){var et=l.browser.now()-me;return!te._forceFullPlacement&&et>2};this._currentPlacementIndex>=0;){var Be=G[B[this._currentPlacementIndex]],qe=this.placement.collisionIndex.transform.zoom;if(Be.type==="symbol"&&(!Be.minzoom||Be.minzoom<=qe)&&(!Be.maxzoom||Be.maxzoom>qe)){if(this._inProgressLayer||(this._inProgressLayer=new gn(Be)),this._inProgressLayer.continuePlacement(H[Be.source],this.placement,this._showCollisionBoxes,Be,Le))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},un.prototype.commit=function(B){return this.placement.commit(B),this.placement};var fn=512/l.EXTENT/2,bn=function(B,G,H){this.tileID=B,this.indexedSymbolInstances={},this.bucketInstanceId=H;for(var te=0;te<G.length;te++){var me=G.get(te),Le=me.key;this.indexedSymbolInstances[Le]||(this.indexedSymbolInstances[Le]=[]),this.indexedSymbolInstances[Le].push({crossTileID:me.crossTileID,coord:this.getScaledCoordinates(me,B)})}};bn.prototype.getScaledCoordinates=function(B,G){var H=G.canonical.z-this.tileID.canonical.z,te=fn/Math.pow(2,H);return{x:Math.floor((G.canonical.x*l.EXTENT+B.anchorX)*te),y:Math.floor((G.canonical.y*l.EXTENT+B.anchorY)*te)}},bn.prototype.findMatches=function(B,G,H){for(var te=this.tileID.canonical.z<G.canonical.z?1:Math.pow(2,this.tileID.canonical.z-G.canonical.z),me=0;me<B.length;me++){var Le=B.get(me);if(!Le.crossTileID){var Be=this.indexedSymbolInstances[Le.key];if(Be)for(var qe=this.getScaledCoordinates(Le,G),et=0,mt=Be;et<mt.length;et+=1){var bt=mt[et];if(Math.abs(bt.coord.x-qe.x)<=te&&Math.abs(bt.coord.y-qe.y)<=te&&!H[bt.crossTileID]){H[bt.crossTileID]=!0,Le.crossTileID=bt.crossTileID;break}}}}};var In=function(){this.maxCrossTileID=0};In.prototype.generate=function(){return++this.maxCrossTileID};var Hn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Hn.prototype.handleWrapJump=function(B){var G=Math.round((B-this.lng)/360);if(G!==0)for(var H in this.indexes){var te=this.indexes[H],me={};for(var Le in te){var Be=te[Le];Be.tileID=Be.tileID.unwrapTo(Be.tileID.wrap+G),me[Be.tileID.key]=Be}this.indexes[H]=me}this.lng=B},Hn.prototype.addBucket=function(B,G,H){if(this.indexes[B.overscaledZ]&&this.indexes[B.overscaledZ][B.key]){if(this.indexes[B.overscaledZ][B.key].bucketInstanceId===G.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(B.overscaledZ,this.indexes[B.overscaledZ][B.key])}for(var te=0;te<G.symbolInstances.length;te++)G.symbolInstances.get(te).crossTileID=0;this.usedCrossTileIDs[B.overscaledZ]||(this.usedCrossTileIDs[B.overscaledZ]={});var me=this.usedCrossTileIDs[B.overscaledZ];for(var Le in this.indexes){var Be=this.indexes[Le];if(Number(Le)>B.overscaledZ)for(var qe in Be){var et=Be[qe];et.tileID.isChildOf(B)&&et.findMatches(G.symbolInstances,B,me)}else{var mt=Be[B.scaledTo(Number(Le)).key];mt&&mt.findMatches(G.symbolInstances,B,me)}}for(var bt=0;bt<G.symbolInstances.length;bt++){var ee=G.symbolInstances.get(bt);ee.crossTileID||(ee.crossTileID=H.generate(),me[ee.crossTileID]=!0)}return this.indexes[B.overscaledZ]===void 0&&(this.indexes[B.overscaledZ]={}),this.indexes[B.overscaledZ][B.key]=new bn(B,G.symbolInstances,G.bucketInstanceId),!0},Hn.prototype.removeBucketCrossTileIDs=function(B,G){for(var H in G.indexedSymbolInstances)for(var te=0,me=G.indexedSymbolInstances[H];te<me.length;te+=1){var Le=me[te];delete this.usedCrossTileIDs[B][Le.crossTileID]}},Hn.prototype.removeStaleBuckets=function(B){var G=!1;for(var H in this.indexes){var te=this.indexes[H];for(var me in te)B[te[me].bucketInstanceId]||(this.removeBucketCrossTileIDs(H,te[me]),delete te[me],G=!0)}return G};var Wn=function(){this.layerIndexes={},this.crossTileIDs=new In,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Wn.prototype.addLayer=function(B,G,H){var te=this.layerIndexes[B.id];te===void 0&&(te=this.layerIndexes[B.id]=new Hn);var me=!1,Le={};te.handleWrapJump(H);for(var Be=0,qe=G;Be<qe.length;Be+=1){var et=qe[Be],mt=et.getBucket(B);mt&&B.id===mt.layerIds[0]&&(mt.bucketInstanceId||(mt.bucketInstanceId=++this.maxBucketInstanceId),te.addBucket(et.tileID,mt,this.crossTileIDs)&&(me=!0),Le[mt.bucketInstanceId]=!0)}return te.removeStaleBuckets(Le)&&(me=!0),me},Wn.prototype.pruneUnusedLayers=function(B){var G={};for(var H in B.forEach(function(te){G[te]=!0}),this.layerIndexes)G[H]||delete this.layerIndexes[H]};var Gn=function(B,G){return l.emitValidationErrors(B,G&&G.filter(function(H){return H.identifier!=="source.canvas"}))},nr=l.pick(vt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),tr=l.pick(vt,["setCenter","setZoom","setBearing","setPitch"]),ar=function(){var B={},G=l.styleSpec.$version;for(var H in l.styleSpec.$root){var te=l.styleSpec.$root[H];if(te.required){var me;(me=H==="version"?G:te.type==="array"?[]:{})!=null&&(B[H]=me)}}return B}(),ir=function(B){function G(H,te){var me=this;te===void 0&&(te={}),B.call(this),this.map=H,this.dispatcher=new L(kt(),this),this.imageManager=new h,this.imageManager.setEventedParent(this),this.glyphManager=new m(H._requestManager,te.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new Wn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());var Le=this;this._rtlTextPluginCallback=G.registerForPluginStateChange(function(Be){var qe={pluginStatus:Be.pluginStatus,pluginURL:Be.pluginURL};Le.dispatcher.broadcast("syncRTLPluginState",qe,function(et,mt){if(l.triggerPluginCompletionEvent(et),mt&&mt.every(function(ee){return ee}))for(var bt in Le.sourceCaches)Le.sourceCaches[bt].reload()})}),this.on("data",function(Be){if(Be.dataType==="source"&&Be.sourceDataType==="metadata"){var qe=me.sourceCaches[Be.sourceId];if(qe){var et=qe.getSource();if(et&&et.vectorLayerIds)for(var mt in me._layers){var bt=me._layers[mt];bt.source===et.id&&me._validateLayer(bt)}}}})}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.loadURL=function(H,te){var me=this;te===void 0&&(te={}),this.fire(new l.Event("dataloading",{dataType:"style"}));var Le=typeof te.validate=="boolean"?te.validate:!l.isMapboxURL(H);H=this.map._requestManager.normalizeStyleURL(H,te.accessToken);var Be=this.map._requestManager.transformRequest(H,l.ResourceType.Style);this._request=l.getJSON(Be,function(qe,et){me._request=null,qe?me.fire(new l.ErrorEvent(qe)):et&&me._load(et,Le)})},G.prototype.loadJSON=function(H,te){var me=this;te===void 0&&(te={}),this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.browser.frame(function(){me._request=null,me._load(H,te.validate!==!1)})},G.prototype.loadEmpty=function(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(ar,!1)},G.prototype._load=function(H,te){if(!te||!Gn(this,l.validateStyle(H))){for(var me in this._loaded=!0,this.stylesheet=H,H.sources)this.addSource(me,H.sources[me],{validate:!1});H.sprite?this._loadSprite(H.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(H.glyphs);var Le=St(this.stylesheet.layers);this._order=Le.map(function(mt){return mt.id}),this._layers={},this._serializedLayers={};for(var Be=0,qe=Le;Be<qe.length;Be+=1){var et=qe[Be];(et=l.createStyleLayer(et)).setEventedParent(this,{layer:{id:et.id}}),this._layers[et.id]=et,this._serializedLayers[et.id]=et.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new _(this.stylesheet.light),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}},G.prototype._loadSprite=function(H){var te=this;this._spriteRequest=function(me,Le,Be){var qe,et,mt,bt=l.browser.devicePixelRatio>1?"@2x":"",ee=l.getJSON(Le.transformRequest(Le.normalizeSpriteURL(me,bt,".json"),l.ResourceType.SpriteJSON),function(Oe,Fe){ee=null,mt||(mt=Oe,qe=Fe,Me())}),he=l.getImage(Le.transformRequest(Le.normalizeSpriteURL(me,bt,".png"),l.ResourceType.SpriteImage),function(Oe,Fe){he=null,mt||(mt=Oe,et=Fe,Me())});function Me(){if(mt)Be(mt);else if(qe&&et){var Oe=l.browser.getImageData(et),Fe={};for(var Ue in qe){var Ge=qe[Ue],Je=Ge.width,rt=Ge.height,ct=Ge.x,Ct=Ge.y,Dt=Ge.sdf,Ft=Ge.pixelRatio,Wt=Ge.stretchX,cn=Ge.stretchY,Xt=Ge.content,tn=new l.RGBAImage({width:Je,height:rt});l.RGBAImage.copy(Oe,tn,{x:ct,y:Ct},{x:0,y:0},{width:Je,height:rt}),Fe[Ue]={data:tn,pixelRatio:Ft,sdf:Dt,stretchX:Wt,stretchY:cn,content:Xt}}Be(null,Fe)}}return{cancel:function(){ee&&(ee.cancel(),ee=null),he&&(he.cancel(),he=null)}}}(H,this.map._requestManager,function(me,Le){if(te._spriteRequest=null,me)te.fire(new l.ErrorEvent(me));else if(Le)for(var Be in Le)te.imageManager.addImage(Be,Le[Be]);te.imageManager.setLoaded(!0),te._availableImages=te.imageManager.listImages(),te.dispatcher.broadcast("setImages",te._availableImages),te.fire(new l.Event("data",{dataType:"style"}))})},G.prototype._validateLayer=function(H){var te=this.sourceCaches[H.source];if(te){var me=H.sourceLayer;if(me){var Le=te.getSource();(Le.type==="geojson"||Le.vectorLayerIds&&Le.vectorLayerIds.indexOf(me)===-1)&&this.fire(new l.ErrorEvent(new Error('Source layer "'+me+'" does not exist on source "'+Le.id+'" as specified by style layer "'+H.id+'"')))}}},G.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var H in this.sourceCaches)if(!this.sourceCaches[H].loaded())return!1;return!!this.imageManager.isLoaded()},G.prototype._serializeLayers=function(H){for(var te=[],me=0,Le=H;me<Le.length;me+=1){var Be=Le[me],qe=this._layers[Be];qe.type!=="custom"&&te.push(qe.serialize())}return te},G.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var H in this.sourceCaches)if(this.sourceCaches[H].hasTransition())return!0;for(var te in this._layers)if(this._layers[te].hasTransition())return!0;return!1},G.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},G.prototype.update=function(H){if(this._loaded){var te=this._changed;if(this._changed){var me=Object.keys(this._updatedLayers),Le=Object.keys(this._removedLayers);for(var Be in(me.length||Le.length)&&this._updateWorkerLayers(me,Le),this._updatedSources){var qe=this._updatedSources[Be];qe==="reload"?this._reloadSource(Be):qe==="clear"&&this._clearSource(Be)}for(var et in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[et].updateTransitions(H);this.light.updateTransitions(H),this._resetUpdates()}for(var mt in this.sourceCaches)this.sourceCaches[mt].used=!1;for(var bt=0,ee=this._order;bt<ee.length;bt+=1){var he=ee[bt],Me=this._layers[he];Me.recalculate(H,this._availableImages),!Me.isHidden(H.zoom)&&Me.source&&(this.sourceCaches[Me.source].used=!0)}this.light.recalculate(H),this.z=H.zoom,te&&this.fire(new l.Event("data",{dataType:"style"}))}},G.prototype._updateTilesForChangedImages=function(){var H=Object.keys(this._changedImages);if(H.length){for(var te in this.sourceCaches)this.sourceCaches[te].reloadTilesForDependencies(["icons","patterns"],H);this._changedImages={}}},G.prototype._updateWorkerLayers=function(H,te){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(H),removedIds:te})},G.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},G.prototype.setState=function(H){var te=this;if(this._checkLoaded(),Gn(this,l.validateStyle(H)))return!1;(H=l.clone$1(H)).layers=St(H.layers);var me=pn(this.serialize(),H).filter(function(Be){return!(Be.command in tr)});if(me.length===0)return!1;var Le=me.filter(function(Be){return!(Be.command in nr)});if(Le.length>0)throw new Error("Unimplemented: "+Le.map(function(Be){return Be.command}).join(", ")+".");return me.forEach(function(Be){Be.command!=="setTransition"&&te[Be.command].apply(te,Be.args)}),this.stylesheet=H,!0},G.prototype.addImage=function(H,te){if(this.getImage(H))return this.fire(new l.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(H,te),this._availableImages=this.imageManager.listImages(),this._changedImages[H]=!0,this._changed=!0,this.fire(new l.Event("data",{dataType:"style"}))},G.prototype.updateImage=function(H,te){this.imageManager.updateImage(H,te)},G.prototype.getImage=function(H){return this.imageManager.getImage(H)},G.prototype.removeImage=function(H){if(!this.getImage(H))return this.fire(new l.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(H),this._availableImages=this.imageManager.listImages(),this._changedImages[H]=!0,this._changed=!0,this.fire(new l.Event("data",{dataType:"style"}))},G.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},G.prototype.addSource=function(H,te,me){var Le=this;if(me===void 0&&(me={}),this._checkLoaded(),this.sourceCaches[H]!==void 0)throw new Error("There is already a source with this ID");if(!te.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(te).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(te.type)>=0&&this._validate(l.validateStyle.source,"sources."+H,te,null,me))){this.map&&this.map._collectResourceTiming&&(te.collectResourceTiming=!0);var Be=this.sourceCaches[H]=new st(H,te,this.dispatcher);Be.style=this,Be.setEventedParent(this,function(){return{isSourceLoaded:Le.loaded(),source:Be.serialize(),sourceId:H}}),Be.onAdd(this.map),this._changed=!0}},G.prototype.removeSource=function(H){if(this._checkLoaded(),this.sourceCaches[H]===void 0)throw new Error("There is no source with this ID");for(var te in this._layers)if(this._layers[te].source===H)return this.fire(new l.ErrorEvent(new Error('Source "'+H+'" cannot be removed while layer "'+te+'" is using it.')));var me=this.sourceCaches[H];delete this.sourceCaches[H],delete this._updatedSources[H],me.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:H})),me.setEventedParent(null),me.clearTiles(),me.onRemove&&me.onRemove(this.map),this._changed=!0},G.prototype.setGeoJSONSourceData=function(H,te){this._checkLoaded(),this.sourceCaches[H].getSource().setData(te),this._changed=!0},G.prototype.getSource=function(H){return this.sourceCaches[H]&&this.sourceCaches[H].getSource()},G.prototype.addLayer=function(H,te,me){me===void 0&&(me={}),this._checkLoaded();var Le=H.id;if(this.getLayer(Le))this.fire(new l.ErrorEvent(new Error('Layer with id "'+Le+'" already exists on this map')));else{var Be;if(H.type==="custom"){if(Gn(this,l.validateCustomStyleLayer(H)))return;Be=l.createStyleLayer(H)}else{if(typeof H.source=="object"&&(this.addSource(Le,H.source),H=l.clone$1(H),H=l.extend(H,{source:Le})),this._validate(l.validateStyle.layer,"layers."+Le,H,{arrayIndex:-1},me))return;Be=l.createStyleLayer(H),this._validateLayer(Be),Be.setEventedParent(this,{layer:{id:Le}}),this._serializedLayers[Be.id]=Be.serialize()}var qe=te?this._order.indexOf(te):this._order.length;if(te&&qe===-1)this.fire(new l.ErrorEvent(new Error('Layer with id "'+te+'" does not exist on this map.')));else{if(this._order.splice(qe,0,Le),this._layerOrderChanged=!0,this._layers[Le]=Be,this._removedLayers[Le]&&Be.source&&Be.type!=="custom"){var et=this._removedLayers[Le];delete this._removedLayers[Le],et.type!==Be.type?this._updatedSources[Be.source]="clear":(this._updatedSources[Be.source]="reload",this.sourceCaches[Be.source].pause())}this._updateLayer(Be),Be.onAdd&&Be.onAdd(this.map)}}},G.prototype.moveLayer=function(H,te){if(this._checkLoaded(),this._changed=!0,this._layers[H]){if(H!==te){var me=this._order.indexOf(H);this._order.splice(me,1);var Le=te?this._order.indexOf(te):this._order.length;te&&Le===-1?this.fire(new l.ErrorEvent(new Error('Layer with id "'+te+'" does not exist on this map.'))):(this._order.splice(Le,0,H),this._layerOrderChanged=!0)}}else this.fire(new l.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be moved.")))},G.prototype.removeLayer=function(H){this._checkLoaded();var te=this._layers[H];if(te){te.setEventedParent(null);var me=this._order.indexOf(H);this._order.splice(me,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[H]=te,delete this._layers[H],delete this._serializedLayers[H],delete this._updatedLayers[H],delete this._updatedPaintProps[H],te.onRemove&&te.onRemove(this.map)}else this.fire(new l.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be removed.")))},G.prototype.getLayer=function(H){return this._layers[H]},G.prototype.hasLayer=function(H){return H in this._layers},G.prototype.setLayerZoomRange=function(H,te,me){this._checkLoaded();var Le=this.getLayer(H);Le?Le.minzoom===te&&Le.maxzoom===me||(te!=null&&(Le.minzoom=te),me!=null&&(Le.maxzoom=me),this._updateLayer(Le)):this.fire(new l.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot have zoom extent.")))},G.prototype.setFilter=function(H,te,me){me===void 0&&(me={}),this._checkLoaded();var Le=this.getLayer(H);if(Le){if(!l.deepEqual(Le.filter,te))return te==null?(Le.filter=void 0,void this._updateLayer(Le)):void(this._validate(l.validateStyle.filter,"layers."+Le.id+".filter",te,null,me)||(Le.filter=l.clone$1(te),this._updateLayer(Le)))}else this.fire(new l.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be filtered.")))},G.prototype.getFilter=function(H){return l.clone$1(this.getLayer(H).filter)},G.prototype.setLayoutProperty=function(H,te,me,Le){Le===void 0&&(Le={}),this._checkLoaded();var Be=this.getLayer(H);Be?l.deepEqual(Be.getLayoutProperty(te),me)||(Be.setLayoutProperty(te,me,Le),this._updateLayer(Be)):this.fire(new l.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be styled.")))},G.prototype.getLayoutProperty=function(H,te){var me=this.getLayer(H);if(me)return me.getLayoutProperty(te);this.fire(new l.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style.")))},G.prototype.setPaintProperty=function(H,te,me,Le){Le===void 0&&(Le={}),this._checkLoaded();var Be=this.getLayer(H);Be?l.deepEqual(Be.getPaintProperty(te),me)||(Be.setPaintProperty(te,me,Le)&&this._updateLayer(Be),this._changed=!0,this._updatedPaintProps[H]=!0):this.fire(new l.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be styled.")))},G.prototype.getPaintProperty=function(H,te){return this.getLayer(H).getPaintProperty(te)},G.prototype.setFeatureState=function(H,te){this._checkLoaded();var me=H.source,Le=H.sourceLayer,Be=this.sourceCaches[me];if(Be!==void 0){var qe=Be.getSource().type;qe==="geojson"&&Le?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):qe!=="vector"||Le?(H.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),Be.setFeatureState(Le,H.id,te)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+me+"' does not exist in the map's style.")))},G.prototype.removeFeatureState=function(H,te){this._checkLoaded();var me=H.source,Le=this.sourceCaches[me];if(Le!==void 0){var Be=Le.getSource().type,qe=Be==="vector"?H.sourceLayer:void 0;Be!=="vector"||qe?te&&typeof H.id!="string"&&typeof H.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):Le.removeFeatureState(qe,H.id,te):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+me+"' does not exist in the map's style.")))},G.prototype.getFeatureState=function(H){this._checkLoaded();var te=H.source,me=H.sourceLayer,Le=this.sourceCaches[te];if(Le!==void 0){if(Le.getSource().type!=="vector"||me)return H.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),Le.getFeatureState(me,H.id);this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+te+"' does not exist in the map's style.")))},G.prototype.getTransition=function(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},G.prototype.serialize=function(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,function(H){return H.serialize()}),layers:this._serializeLayers(this._order)},function(H){return H!==void 0})},G.prototype._updateLayer=function(H){this._updatedLayers[H.id]=!0,H.source&&!this._updatedSources[H.source]&&this.sourceCaches[H.source].getSource().type!=="raster"&&(this._updatedSources[H.source]="reload",this.sourceCaches[H.source].pause()),this._changed=!0},G.prototype._flattenAndSortRenderedFeatures=function(H){for(var te=this,me=function(Xt){return te._layers[Xt].type==="fill-extrusion"},Le={},Be=[],qe=this._order.length-1;qe>=0;qe--){var et=this._order[qe];if(me(et)){Le[et]=qe;for(var mt=0,bt=H;mt<bt.length;mt+=1){var ee=bt[mt][et];if(ee)for(var he=0,Me=ee;he<Me.length;he+=1){var Oe=Me[he];Be.push(Oe)}}}}Be.sort(function(Xt,tn){return tn.intersectionZ-Xt.intersectionZ});for(var Fe=[],Ue=this._order.length-1;Ue>=0;Ue--){var Ge=this._order[Ue];if(me(Ge))for(var Je=Be.length-1;Je>=0;Je--){var rt=Be[Je].feature;if(Le[rt.layer.id]<Ue)break;Fe.push(rt),Be.pop()}else for(var ct=0,Ct=H;ct<Ct.length;ct+=1){var Dt=Ct[ct][Ge];if(Dt)for(var Ft=0,Wt=Dt;Ft<Wt.length;Ft+=1){var cn=Wt[Ft];Fe.push(cn.feature)}}}return Fe},G.prototype.queryRenderedFeatures=function(H,te,me){te&&te.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",te.filter,null,te);var Le={};if(te&&te.layers){if(!Array.isArray(te.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Be=0,qe=te.layers;Be<qe.length;Be+=1){var et=qe[Be],mt=this._layers[et];if(!mt)return this.fire(new l.ErrorEvent(new Error("The layer '"+et+"' does not exist in the map's style and cannot be queried for features."))),[];Le[mt.source]=!0}}var bt=[];for(var ee in te.availableImages=this._availableImages,this.sourceCaches)te.layers&&!Le[ee]||bt.push(Z(this.sourceCaches[ee],this._layers,this._serializedLayers,H,te,me));return this.placement&&bt.push(function(he,Me,Oe,Fe,Ue,Ge,Je){for(var rt={},ct=Ge.queryRenderedSymbols(Fe),Ct=[],Dt=0,Ft=Object.keys(ct).map(Number);Dt<Ft.length;Dt+=1){var Wt=Ft[Dt];Ct.push(Je[Wt])}Ct.sort(Y);for(var cn=function(){var dn=tn[Xt],Qt=dn.featureIndex.lookupSymbolFeatures(ct[dn.bucketInstanceId],Me,dn.bucketIndex,dn.sourceLayerIndex,Ue.filter,Ue.layers,Ue.availableImages,he);for(var Cn in Qt){var Dn=rt[Cn]=rt[Cn]||[],Jn=Qt[Cn];Jn.sort(function(fr,gr){var Sr=dn.featureSortOrder;if(Sr){var Vr=Sr.indexOf(fr.featureIndex);return Sr.indexOf(gr.featureIndex)-Vr}return gr.featureIndex-fr.featureIndex});for(var Kn=0,vr=Jn;Kn<vr.length;Kn+=1){var yr=vr[Kn];Dn.push(yr)}}},Xt=0,tn=Ct;Xt<tn.length;Xt+=1)cn();var $t=function(dn){rt[dn].forEach(function(Qt){var Cn=Qt.feature,Dn=he[dn],Jn=Oe[Dn.source].getFeatureState(Cn.layer["source-layer"],Cn.id);Cn.source=Cn.layer.source,Cn.layer["source-layer"]&&(Cn.sourceLayer=Cn.layer["source-layer"]),Cn.state=Jn})};for(var _n in rt)$t(_n);return rt}(this._layers,this._serializedLayers,this.sourceCaches,H,te,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(bt)},G.prototype.querySourceFeatures=function(H,te){te&&te.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",te.filter,null,te);var me=this.sourceCaches[H];return me?function(Le,Be){for(var qe=Le.getRenderableIds().map(function(Me){return Le.getTileByID(Me)}),et=[],mt={},bt=0;bt<qe.length;bt++){var ee=qe[bt],he=ee.tileID.canonical.key;mt[he]||(mt[he]=!0,ee.querySourceFeatures(et,Be))}return et}(me,te):[]},G.prototype.addSourceType=function(H,te,me){return G.getSourceType(H)?me(new Error('A source type called "'+H+'" already exists.')):(G.setSourceType(H,te),te.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:H,url:te.workerSourceURL},me):me(null,null))},G.prototype.getLight=function(){return this.light.getLight()},G.prototype.setLight=function(H,te){te===void 0&&(te={}),this._checkLoaded();var me=this.light.getLight(),Le=!1;for(var Be in H)if(!l.deepEqual(H[Be],me[Be])){Le=!0;break}if(Le){var qe={now:l.browser.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(H,te),this.light.updateTransitions(qe)}},G.prototype._validate=function(H,te,me,Le,Be){return Be===void 0&&(Be={}),(!Be||Be.validate!==!1)&&Gn(this,H.call(l.validateStyle,l.extend({key:te,style:this.serialize(),value:me,styleSpec:l.styleSpec},Le)))},G.prototype._remove=function(){for(var H in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[H].setEventedParent(null);for(var te in this.sourceCaches)this.sourceCaches[te].clearTiles(),this.sourceCaches[te].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},G.prototype._clearSource=function(H){this.sourceCaches[H].clearTiles()},G.prototype._reloadSource=function(H){this.sourceCaches[H].resume(),this.sourceCaches[H].reload()},G.prototype._updateSources=function(H){for(var te in this.sourceCaches)this.sourceCaches[te].update(H)},G.prototype._generateCollisionBoxes=function(){for(var H in this.sourceCaches)this._reloadSource(H)},G.prototype._updatePlacement=function(H,te,me,Le,Be){Be===void 0&&(Be=!1);for(var qe=!1,et=!1,mt={},bt=0,ee=this._order;bt<ee.length;bt+=1){var he=ee[bt],Me=this._layers[he];if(Me.type==="symbol"){if(!mt[Me.source]){var Oe=this.sourceCaches[Me.source];mt[Me.source]=Oe.getRenderableIds(!0).map(function(ct){return Oe.getTileByID(ct)}).sort(function(ct,Ct){return Ct.tileID.overscaledZ-ct.tileID.overscaledZ||(ct.tileID.isLessThan(Ct.tileID)?-1:1)})}var Fe=this.crossTileSymbolIndex.addLayer(Me,mt[Me.source],H.center.lng);qe=qe||Fe}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((Be=Be||this._layerOrderChanged||me===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.browser.now(),H.zoom))&&(this.pauseablePlacement=new un(H,this._order,Be,te,me,Le,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,mt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.browser.now()),et=!0),qe&&this.pauseablePlacement.placement.setStale()),et||qe)for(var Ue=0,Ge=this._order;Ue<Ge.length;Ue+=1){var Je=Ge[Ue],rt=this._layers[Je];rt.type==="symbol"&&this.placement.updateLayerOpacities(rt,mt[rt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.browser.now())},G.prototype._releaseSymbolFadeTiles=function(){for(var H in this.sourceCaches)this.sourceCaches[H].releaseSymbolFadeTiles()},G.prototype.getImages=function(H,te,me){this.imageManager.getImages(te.icons,me),this._updateTilesForChangedImages();var Le=this.sourceCaches[te.source];Le&&Le.setDependencies(te.tileID.key,te.type,te.icons)},G.prototype.getGlyphs=function(H,te,me){this.glyphManager.getGlyphs(te.stacks,me)},G.prototype.getResource=function(H,te,me){return l.makeRequest(te,me)},G}(l.Evented);ir.getSourceType=function(B){return J[B]},ir.setSourceType=function(B,G){J[B]=G},ir.registerForPluginStateChange=l.registerForPluginStateChange;var cr=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),br=ei(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),xr=ei(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Tr=ei(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),sr=ei(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),kr=ei("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Rr=ei(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Qr=ei(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),ci=ei("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),pi=ei("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),qi=ei("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Ei=ei(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),oi=ei(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),la=ei(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Aa=ei(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),no=ei(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Go=ei(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),il=ei(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Us=ei(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Zo=ei(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ma=ei(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Vs=ei(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Di=ei(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),ss=ei(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),xa=ei(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Sa=ei(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),mo=ei(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function ei(B,G){var H=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,te={};return{fragmentSource:B=B.replace(H,function(me,Le,Be,qe,et){return te[et]=!0,Le==="define"?`
#ifndef HAS_UNIFORM_u_`+et+`
varying `+Be+" "+qe+" "+et+`;
#else
uniform `+Be+" "+qe+" u_"+et+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+et+`
    `+Be+" "+qe+" "+et+" = u_"+et+`;
#endif
`}),vertexSource:G=G.replace(H,function(me,Le,Be,qe,et){var mt=qe==="float"?"vec2":"vec4",bt=et.match(/color/)?"color":mt;return te[et]?Le==="define"?`
#ifndef HAS_UNIFORM_u_`+et+`
uniform lowp float u_`+et+`_t;
attribute `+Be+" "+mt+" a_"+et+`;
varying `+Be+" "+qe+" "+et+`;
#else
uniform `+Be+" "+qe+" u_"+et+`;
#endif
`:bt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+et+`
    `+et+" = a_"+et+`;
#else
    `+Be+" "+qe+" "+et+" = u_"+et+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+et+`
    `+et+" = unpack_mix_"+bt+"(a_"+et+", u_"+et+`_t);
#else
    `+Be+" "+qe+" "+et+" = u_"+et+`;
#endif
`:Le==="define"?`
#ifndef HAS_UNIFORM_u_`+et+`
uniform lowp float u_`+et+`_t;
attribute `+Be+" "+mt+" a_"+et+`;
#else
uniform `+Be+" "+qe+" u_"+et+`;
#endif
`:bt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+et+`
    `+Be+" "+qe+" "+et+" = a_"+et+`;
#else
    `+Be+" "+qe+" "+et+" = u_"+et+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+et+`
    `+Be+" "+qe+" "+et+" = unpack_mix_"+bt+"(a_"+et+", u_"+et+`_t);
#else
    `+Be+" "+qe+" "+et+" = u_"+et+`;
#endif
`})}}var yo=Object.freeze({__proto__:null,prelude:br,background:xr,backgroundPattern:Tr,circle:sr,clippingMask:kr,heatmap:Rr,heatmapTexture:Qr,collisionBox:ci,collisionCircle:pi,debug:qi,fill:Ei,fillOutline:oi,fillOutlinePattern:la,fillPattern:Aa,fillExtrusion:no,fillExtrusionPattern:Go,hillshadePrepare:il,hillshade:Us,line:Zo,lineGradient:Ma,linePattern:Vs,lineSDF:Di,raster:ss,symbolIcon:xa,symbolSDF:Sa,symbolTextAndIcon:mo}),Pa=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Pa.prototype.bind=function(B,G,H,te,me,Le,Be,qe){this.context=B;for(var et=this.boundPaintVertexBuffers.length!==te.length,mt=0;!et&&mt<te.length;mt++)this.boundPaintVertexBuffers[mt]!==te[mt]&&(et=!0);var bt=!this.vao||this.boundProgram!==G||this.boundLayoutVertexBuffer!==H||et||this.boundIndexBuffer!==me||this.boundVertexOffset!==Le||this.boundDynamicVertexBuffer!==Be||this.boundDynamicVertexBuffer2!==qe;!B.extVertexArrayObject||bt?this.freshBind(G,H,te,me,Le,Be,qe):(B.bindVertexArrayOES.set(this.vao),Be&&Be.bind(),me&&me.dynamicDraw&&me.bind(),qe&&qe.bind())},Pa.prototype.freshBind=function(B,G,H,te,me,Le,Be){var qe,et=B.numAttributes,mt=this.context,bt=mt.gl;if(mt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=mt.extVertexArrayObject.createVertexArrayOES(),mt.bindVertexArrayOES.set(this.vao),qe=0,this.boundProgram=B,this.boundLayoutVertexBuffer=G,this.boundPaintVertexBuffers=H,this.boundIndexBuffer=te,this.boundVertexOffset=me,this.boundDynamicVertexBuffer=Le,this.boundDynamicVertexBuffer2=Be;else{qe=mt.currentNumAttributes||0;for(var ee=et;ee<qe;ee++)bt.disableVertexAttribArray(ee)}G.enableAttributes(bt,B);for(var he=0,Me=H;he<Me.length;he+=1)Me[he].enableAttributes(bt,B);Le&&Le.enableAttributes(bt,B),Be&&Be.enableAttributes(bt,B),G.bind(),G.setVertexAttribPointers(bt,B,me);for(var Oe=0,Fe=H;Oe<Fe.length;Oe+=1){var Ue=Fe[Oe];Ue.bind(),Ue.setVertexAttribPointers(bt,B,me)}Le&&(Le.bind(),Le.setVertexAttribPointers(bt,B,me)),te&&te.bind(),Be&&(Be.bind(),Be.setVertexAttribPointers(bt,B,me)),mt.currentNumAttributes=et},Pa.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Va=function(B,G,H,te,me){var Le=B.gl;this.program=Le.createProgram();var Be=H?H.defines():[];me&&Be.push("#define OVERDRAW_INSPECTOR;");var qe=Be.concat(br.fragmentSource,G.fragmentSource).join(`
`),et=Be.concat(br.vertexSource,G.vertexSource).join(`
`),mt=Le.createShader(Le.FRAGMENT_SHADER);if(Le.isContextLost())this.failedToCreate=!0;else{Le.shaderSource(mt,qe),Le.compileShader(mt),Le.attachShader(this.program,mt);var bt=Le.createShader(Le.VERTEX_SHADER);if(Le.isContextLost())this.failedToCreate=!0;else{Le.shaderSource(bt,et),Le.compileShader(bt),Le.attachShader(this.program,bt);for(var ee=H?H.layoutAttributes:[],he=0;he<ee.length;he++)Le.bindAttribLocation(this.program,he,ee[he].name);Le.linkProgram(this.program),Le.deleteShader(bt),Le.deleteShader(mt),this.numAttributes=Le.getProgramParameter(this.program,Le.ACTIVE_ATTRIBUTES),this.attributes={};for(var Me={},Oe=0;Oe<this.numAttributes;Oe++){var Fe=Le.getActiveAttrib(this.program,Oe);Fe&&(this.attributes[Fe.name]=Le.getAttribLocation(this.program,Fe.name))}for(var Ue=Le.getProgramParameter(this.program,Le.ACTIVE_UNIFORMS),Ge=0;Ge<Ue;Ge++){var Je=Le.getActiveUniform(this.program,Ge);Je&&(Me[Je.name]=Le.getUniformLocation(this.program,Je.name))}this.fixedUniforms=te(B,Me),this.binderUniforms=H?H.getUniforms(B,Me):[]}}};function Xa(B,G,H){var te=1/lr(H,1,G.transform.tileZoom),me=Math.pow(2,H.tileID.overscaledZ),Le=H.tileSize*Math.pow(2,G.transform.tileZoom)/me,Be=Le*(H.tileID.canonical.x+H.tileID.wrap*me),qe=Le*H.tileID.canonical.y;return{u_image:0,u_texsize:H.imageAtlasTexture.size,u_scale:[te,B.fromScale,B.toScale],u_fade:B.t,u_pixel_coord_upper:[Be>>16,qe>>16],u_pixel_coord_lower:[65535&Be,65535&qe]}}Va.prototype.draw=function(B,G,H,te,me,Le,Be,qe,et,mt,bt,ee,he,Me,Oe,Fe){var Ue,Ge=B.gl;if(!this.failedToCreate){for(var Je in B.program.set(this.program),B.setDepthMode(H),B.setStencilMode(te),B.setColorMode(me),B.setCullFace(Le),this.fixedUniforms)this.fixedUniforms[Je].set(Be[Je]);Me&&Me.setUniforms(B,this.binderUniforms,ee,{zoom:he});for(var rt=(Ue={},Ue[Ge.LINES]=2,Ue[Ge.TRIANGLES]=3,Ue[Ge.LINE_STRIP]=1,Ue)[G],ct=0,Ct=bt.get();ct<Ct.length;ct+=1){var Dt=Ct[ct],Ft=Dt.vaos||(Dt.vaos={});(Ft[qe]||(Ft[qe]=new Pa)).bind(B,this,et,Me?Me.getPaintVertexBuffers():[],mt,Dt.vertexOffset,Oe,Fe),Ge.drawElements(G,Dt.primitiveLength*rt,Ge.UNSIGNED_SHORT,Dt.primitiveOffset*rt*2)}}};var ls=function(B,G,H,te){var me=G.style.light,Le=me.properties.get("position"),Be=[Le.x,Le.y,Le.z],qe=l.create$1();me.properties.get("anchor")==="viewport"&&l.fromRotation(qe,-G.transform.angle),l.transformMat3(Be,Be,qe);var et=me.properties.get("color");return{u_matrix:B,u_lightpos:Be,u_lightintensity:me.properties.get("intensity"),u_lightcolor:[et.r,et.g,et.b],u_vertical_gradient:+H,u_opacity:te}},al=function(B,G,H,te,me,Le,Be){return l.extend(ls(B,G,H,te),Xa(Le,G,Be),{u_height_factor:-Math.pow(2,me.overscaledZ)/Be.tileSize/8})},ro=function(B){return{u_matrix:B}},ol=function(B,G,H,te){return l.extend(ro(B),Xa(H,G,te))},sl=function(B,G){return{u_matrix:B,u_world:G}},vl=function(B,G,H,te,me){return l.extend(ol(B,G,H,te),{u_world:me})},Hs=function(B,G,H,te){var me,Le,Be=B.transform;if(te.paint.get("circle-pitch-alignment")==="map"){var qe=lr(H,1,Be.zoom);me=!0,Le=[qe,qe]}else me=!1,Le=Be.pixelsToGLUnits;return{u_camera_to_center_distance:Be.cameraToCenterDistance,u_scale_with_map:+(te.paint.get("circle-pitch-scale")==="map"),u_matrix:B.translatePosMatrix(G.posMatrix,H,te.paint.get("circle-translate"),te.paint.get("circle-translate-anchor")),u_pitch_with_map:+me,u_device_pixel_ratio:l.browser.devicePixelRatio,u_extrude_scale:Le}},ll=function(B,G,H){var te=lr(H,1,G.zoom),me=Math.pow(2,G.zoom-H.tileID.overscaledZ),Le=H.tileID.overscaleFactor();return{u_matrix:B,u_camera_to_center_distance:G.cameraToCenterDistance,u_pixels_to_tile_units:te,u_extrude_scale:[G.pixelsToGLUnits[0]/(te*me),G.pixelsToGLUnits[1]/(te*me)],u_overscale_factor:Le}},qs=function(B,G,H){return{u_matrix:B,u_inv_matrix:G,u_camera_to_center_distance:H.cameraToCenterDistance,u_viewport_size:[H.width,H.height]}},io=function(B,G,H){return H===void 0&&(H=1),{u_matrix:B,u_color:G,u_overlay:0,u_overlay_scale:H}},ao=function(B){return{u_matrix:B}},Yo=function(B,G,H,te){return{u_matrix:B,u_extrude_scale:lr(G,1,H),u_intensity:te}},oo=function(B,G,H){var te=B.transform;return{u_matrix:xo(B,G,H),u_ratio:1/lr(G,1,te.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_units_to_pixels:[1/te.pixelsToGLUnits[0],1/te.pixelsToGLUnits[1]]}},Gs=function(B,G,H){return l.extend(oo(B,G,H),{u_image:0})},Zs=function(B,G,H,te){var me=B.transform,Le=Ms(G,me);return{u_matrix:xo(B,G,H),u_texsize:G.imageAtlasTexture.size,u_ratio:1/lr(G,1,me.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_image:0,u_scale:[Le,te.fromScale,te.toScale],u_fade:te.t,u_units_to_pixels:[1/me.pixelsToGLUnits[0],1/me.pixelsToGLUnits[1]]}},Po=function(B,G,H,te,me){var Le=B.transform,Be=B.lineAtlas,qe=Ms(G,Le),et=H.layout.get("line-cap")==="round",mt=Be.getDash(te.from,et),bt=Be.getDash(te.to,et),ee=mt.width*me.fromScale,he=bt.width*me.toScale;return l.extend(oo(B,G,H),{u_patternscale_a:[qe/ee,-mt.height/2],u_patternscale_b:[qe/he,-bt.height/2],u_sdfgamma:Be.width/(256*Math.min(ee,he)*l.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:mt.y,u_tex_y_b:bt.y,u_mix:me.t})};function Ms(B,G){return 1/lr(B,1,G.tileZoom)}function xo(B,G,H){return B.translatePosMatrix(G.tileID.posMatrix,G,H.paint.get("line-translate"),H.paint.get("line-translate-anchor"))}var Wo=function(B,G,H,te,me){return{u_matrix:B,u_tl_parent:G,u_scale_parent:H,u_buffer_scale:1,u_fade_t:te.mix,u_opacity:te.opacity*me.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:me.paint.get("raster-brightness-min"),u_brightness_high:me.paint.get("raster-brightness-max"),u_saturation_factor:(Be=me.paint.get("raster-saturation"),Be>0?1-1/(1.001-Be):-Be),u_contrast_factor:(Le=me.paint.get("raster-contrast"),Le>0?1/(1-Le):1+Le),u_spin_weights:Oo(me.paint.get("raster-hue-rotate"))};var Le,Be};function Oo(B){B*=Math.PI/180;var G=Math.sin(B),H=Math.cos(B);return[(2*H+1)/3,(-Math.sqrt(3)*G-H+1)/3,(Math.sqrt(3)*G-H+1)/3]}var so,ti=function(B,G,H,te,me,Le,Be,qe,et,mt){var bt=me.transform;return{u_is_size_zoom_constant:+(B==="constant"||B==="source"),u_is_size_feature_constant:+(B==="constant"||B==="camera"),u_size_t:G?G.uSizeT:0,u_size:G?G.uSize:0,u_camera_to_center_distance:bt.cameraToCenterDistance,u_pitch:bt.pitch/360*2*Math.PI,u_rotate_symbol:+H,u_aspect_ratio:bt.width/bt.height,u_fade_change:me.options.fadeDuration?me.symbolFadeChange:1,u_matrix:Le,u_label_plane_matrix:Be,u_coord_matrix:qe,u_is_text:+et,u_pitch_with_map:+te,u_texsize:mt,u_texture:0}},bo=function(B,G,H,te,me,Le,Be,qe,et,mt,bt){var ee=me.transform;return l.extend(ti(B,G,H,te,me,Le,Be,qe,et,mt),{u_gamma_scale:te?Math.cos(ee._pitch)*ee.cameraToCenterDistance:1,u_device_pixel_ratio:l.browser.devicePixelRatio,u_is_halo:+bt})},ml=function(B,G,H,te,me,Le,Be,qe,et,mt){return l.extend(bo(B,G,H,te,me,Le,Be,qe,!0,et,!0),{u_texsize_icon:mt,u_texture_icon:1})},Ss=function(B,G,H){return{u_matrix:B,u_opacity:G,u_color:H}},us=function(B,G,H,te,me,Le){return l.extend(function(Be,qe,et,mt){var bt=et.imageManager.getPattern(Be.from.toString()),ee=et.imageManager.getPattern(Be.to.toString()),he=et.imageManager.getPixelSize(),Me=he.width,Oe=he.height,Fe=Math.pow(2,mt.tileID.overscaledZ),Ue=mt.tileSize*Math.pow(2,et.transform.tileZoom)/Fe,Ge=Ue*(mt.tileID.canonical.x+mt.tileID.wrap*Fe),Je=Ue*mt.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:bt.tl,u_pattern_br_a:bt.br,u_pattern_tl_b:ee.tl,u_pattern_br_b:ee.br,u_texsize:[Me,Oe],u_mix:qe.t,u_pattern_size_a:bt.displaySize,u_pattern_size_b:ee.displaySize,u_scale_a:qe.fromScale,u_scale_b:qe.toScale,u_tile_units_to_pixels:1/lr(mt,1,et.transform.tileZoom),u_pixel_coord_upper:[Ge>>16,Je>>16],u_pixel_coord_lower:[65535&Ge,65535&Je]}}(te,Le,H,me),{u_matrix:B,u_opacity:G})},Io={fillExtrusion:function(B,G){return{u_matrix:new l.UniformMatrix4f(B,G.u_matrix),u_lightpos:new l.Uniform3f(B,G.u_lightpos),u_lightintensity:new l.Uniform1f(B,G.u_lightintensity),u_lightcolor:new l.Uniform3f(B,G.u_lightcolor),u_vertical_gradient:new l.Uniform1f(B,G.u_vertical_gradient),u_opacity:new l.Uniform1f(B,G.u_opacity)}},fillExtrusionPattern:function(B,G){return{u_matrix:new l.UniformMatrix4f(B,G.u_matrix),u_lightpos:new l.Uniform3f(B,G.u_lightpos),u_lightintensity:new l.Uniform1f(B,G.u_lightintensity),u_lightcolor:new l.Uniform3f(B,G.u_lightcolor),u_vertical_gradient:new l.Uniform1f(B,G.u_vertical_gradient),u_height_factor:new l.Uniform1f(B,G.u_height_factor),u_image:new l.Uniform1i(B,G.u_image),u_texsize:new l.Uniform2f(B,G.u_texsize),u_pixel_coord_upper:new l.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(B,G.u_pixel_coord_lower),u_scale:new l.Uniform3f(B,G.u_scale),u_fade:new l.Uniform1f(B,G.u_fade),u_opacity:new l.Uniform1f(B,G.u_opacity)}},fill:function(B,G){return{u_matrix:new l.UniformMatrix4f(B,G.u_matrix)}},fillPattern:function(B,G){return{u_matrix:new l.UniformMatrix4f(B,G.u_matrix),u_image:new l.Uniform1i(B,G.u_image),u_texsize:new l.Uniform2f(B,G.u_texsize),u_pixel_coord_upper:new l.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(B,G.u_pixel_coord_lower),u_scale:new l.Uniform3f(B,G.u_scale),u_fade:new l.Uniform1f(B,G.u_fade)}},fillOutline:function(B,G){return{u_matrix:new l.UniformMatrix4f(B,G.u_matrix),u_world:new l.Uniform2f(B,G.u_world)}},fillOutlinePattern:function(B,G){return{u_matrix:new l.UniformMatrix4f(B,G.u_matrix),u_world:new l.Uniform2f(B,G.u_world),u_image:new l.Uniform1i(B,G.u_image),u_texsize:new l.Uniform2f(B,G.u_texsize),u_pixel_coord_upper:new l.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(B,G.u_pixel_coord_lower),u_scale:new l.Uniform3f(B,G.u_scale),u_fade:new l.Uniform1f(B,G.u_fade)}},circle:function(B,G){return{u_camera_to_center_distance:new l.Uniform1f(B,G.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(B,G.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(B,G.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(B,G.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(B,G.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(B,G.u_matrix)}},collisionBox:function(B,G){return{u_matrix:new l.UniformMatrix4f(B,G.u_matrix),u_camera_to_center_distance:new l.Uniform1f(B,G.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(B,G.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(B,G.u_extrude_scale),u_overscale_factor:new l.Uniform1f(B,G.u_overscale_factor)}},collisionCircle:function(B,G){return{u_matrix:new l.UniformMatrix4f(B,G.u_matrix),u_inv_matrix:new l.UniformMatrix4f(B,G.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(B,G.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(B,G.u_viewport_size)}},debug:function(B,G){return{u_color:new l.UniformColor(B,G.u_color),u_matrix:new l.UniformMatrix4f(B,G.u_matrix),u_overlay:new l.Uniform1i(B,G.u_overlay),u_overlay_scale:new l.Uniform1f(B,G.u_overlay_scale)}},clippingMask:function(B,G){return{u_matrix:new l.UniformMatrix4f(B,G.u_matrix)}},heatmap:function(B,G){return{u_extrude_scale:new l.Uniform1f(B,G.u_extrude_scale),u_intensity:new l.Uniform1f(B,G.u_intensity),u_matrix:new l.UniformMatrix4f(B,G.u_matrix)}},heatmapTexture:function(B,G){return{u_matrix:new l.UniformMatrix4f(B,G.u_matrix),u_world:new l.Uniform2f(B,G.u_world),u_image:new l.Uniform1i(B,G.u_image),u_color_ramp:new l.Uniform1i(B,G.u_color_ramp),u_opacity:new l.Uniform1f(B,G.u_opacity)}},hillshade:function(B,G){return{u_matrix:new l.UniformMatrix4f(B,G.u_matrix),u_image:new l.Uniform1i(B,G.u_image),u_latrange:new l.Uniform2f(B,G.u_latrange),u_light:new l.Uniform2f(B,G.u_light),u_shadow:new l.UniformColor(B,G.u_shadow),u_highlight:new l.UniformColor(B,G.u_highlight),u_accent:new l.UniformColor(B,G.u_accent)}},hillshadePrepare:function(B,G){return{u_matrix:new l.UniformMatrix4f(B,G.u_matrix),u_image:new l.Uniform1i(B,G.u_image),u_dimension:new l.Uniform2f(B,G.u_dimension),u_zoom:new l.Uniform1f(B,G.u_zoom),u_maxzoom:new l.Uniform1f(B,G.u_maxzoom),u_unpack:new l.Uniform4f(B,G.u_unpack)}},line:function(B,G){return{u_matrix:new l.UniformMatrix4f(B,G.u_matrix),u_ratio:new l.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new l.Uniform1f(B,G.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(B,G.u_units_to_pixels)}},lineGradient:function(B,G){return{u_matrix:new l.UniformMatrix4f(B,G.u_matrix),u_ratio:new l.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new l.Uniform1f(B,G.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(B,G.u_units_to_pixels),u_image:new l.Uniform1i(B,G.u_image)}},linePattern:function(B,G){return{u_matrix:new l.UniformMatrix4f(B,G.u_matrix),u_texsize:new l.Uniform2f(B,G.u_texsize),u_ratio:new l.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new l.Uniform1f(B,G.u_device_pixel_ratio),u_image:new l.Uniform1i(B,G.u_image),u_units_to_pixels:new l.Uniform2f(B,G.u_units_to_pixels),u_scale:new l.Uniform3f(B,G.u_scale),u_fade:new l.Uniform1f(B,G.u_fade)}},lineSDF:function(B,G){return{u_matrix:new l.UniformMatrix4f(B,G.u_matrix),u_ratio:new l.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new l.Uniform1f(B,G.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(B,G.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(B,G.u_patternscale_a),u_patternscale_b:new l.Uniform2f(B,G.u_patternscale_b),u_sdfgamma:new l.Uniform1f(B,G.u_sdfgamma),u_image:new l.Uniform1i(B,G.u_image),u_tex_y_a:new l.Uniform1f(B,G.u_tex_y_a),u_tex_y_b:new l.Uniform1f(B,G.u_tex_y_b),u_mix:new l.Uniform1f(B,G.u_mix)}},raster:function(B,G){return{u_matrix:new l.UniformMatrix4f(B,G.u_matrix),u_tl_parent:new l.Uniform2f(B,G.u_tl_parent),u_scale_parent:new l.Uniform1f(B,G.u_scale_parent),u_buffer_scale:new l.Uniform1f(B,G.u_buffer_scale),u_fade_t:new l.Uniform1f(B,G.u_fade_t),u_opacity:new l.Uniform1f(B,G.u_opacity),u_image0:new l.Uniform1i(B,G.u_image0),u_image1:new l.Uniform1i(B,G.u_image1),u_brightness_low:new l.Uniform1f(B,G.u_brightness_low),u_brightness_high:new l.Uniform1f(B,G.u_brightness_high),u_saturation_factor:new l.Uniform1f(B,G.u_saturation_factor),u_contrast_factor:new l.Uniform1f(B,G.u_contrast_factor),u_spin_weights:new l.Uniform3f(B,G.u_spin_weights)}},symbolIcon:function(B,G){return{u_is_size_zoom_constant:new l.Uniform1i(B,G.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(B,G.u_is_size_feature_constant),u_size_t:new l.Uniform1f(B,G.u_size_t),u_size:new l.Uniform1f(B,G.u_size),u_camera_to_center_distance:new l.Uniform1f(B,G.u_camera_to_center_distance),u_pitch:new l.Uniform1f(B,G.u_pitch),u_rotate_symbol:new l.Uniform1i(B,G.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(B,G.u_aspect_ratio),u_fade_change:new l.Uniform1f(B,G.u_fade_change),u_matrix:new l.UniformMatrix4f(B,G.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(B,G.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(B,G.u_coord_matrix),u_is_text:new l.Uniform1i(B,G.u_is_text),u_pitch_with_map:new l.Uniform1i(B,G.u_pitch_with_map),u_texsize:new l.Uniform2f(B,G.u_texsize),u_texture:new l.Uniform1i(B,G.u_texture)}},symbolSDF:function(B,G){return{u_is_size_zoom_constant:new l.Uniform1i(B,G.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(B,G.u_is_size_feature_constant),u_size_t:new l.Uniform1f(B,G.u_size_t),u_size:new l.Uniform1f(B,G.u_size),u_camera_to_center_distance:new l.Uniform1f(B,G.u_camera_to_center_distance),u_pitch:new l.Uniform1f(B,G.u_pitch),u_rotate_symbol:new l.Uniform1i(B,G.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(B,G.u_aspect_ratio),u_fade_change:new l.Uniform1f(B,G.u_fade_change),u_matrix:new l.UniformMatrix4f(B,G.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(B,G.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(B,G.u_coord_matrix),u_is_text:new l.Uniform1i(B,G.u_is_text),u_pitch_with_map:new l.Uniform1i(B,G.u_pitch_with_map),u_texsize:new l.Uniform2f(B,G.u_texsize),u_texture:new l.Uniform1i(B,G.u_texture),u_gamma_scale:new l.Uniform1f(B,G.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(B,G.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(B,G.u_is_halo)}},symbolTextAndIcon:function(B,G){return{u_is_size_zoom_constant:new l.Uniform1i(B,G.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(B,G.u_is_size_feature_constant),u_size_t:new l.Uniform1f(B,G.u_size_t),u_size:new l.Uniform1f(B,G.u_size),u_camera_to_center_distance:new l.Uniform1f(B,G.u_camera_to_center_distance),u_pitch:new l.Uniform1f(B,G.u_pitch),u_rotate_symbol:new l.Uniform1i(B,G.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(B,G.u_aspect_ratio),u_fade_change:new l.Uniform1f(B,G.u_fade_change),u_matrix:new l.UniformMatrix4f(B,G.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(B,G.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(B,G.u_coord_matrix),u_is_text:new l.Uniform1i(B,G.u_is_text),u_pitch_with_map:new l.Uniform1i(B,G.u_pitch_with_map),u_texsize:new l.Uniform2f(B,G.u_texsize),u_texsize_icon:new l.Uniform2f(B,G.u_texsize_icon),u_texture:new l.Uniform1i(B,G.u_texture),u_texture_icon:new l.Uniform1i(B,G.u_texture_icon),u_gamma_scale:new l.Uniform1f(B,G.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(B,G.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(B,G.u_is_halo)}},background:function(B,G){return{u_matrix:new l.UniformMatrix4f(B,G.u_matrix),u_opacity:new l.Uniform1f(B,G.u_opacity),u_color:new l.UniformColor(B,G.u_color)}},backgroundPattern:function(B,G){return{u_matrix:new l.UniformMatrix4f(B,G.u_matrix),u_opacity:new l.Uniform1f(B,G.u_opacity),u_image:new l.Uniform1i(B,G.u_image),u_pattern_tl_a:new l.Uniform2f(B,G.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(B,G.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(B,G.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(B,G.u_pattern_br_b),u_texsize:new l.Uniform2f(B,G.u_texsize),u_mix:new l.Uniform1f(B,G.u_mix),u_pattern_size_a:new l.Uniform2f(B,G.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(B,G.u_pattern_size_b),u_scale_a:new l.Uniform1f(B,G.u_scale_a),u_scale_b:new l.Uniform1f(B,G.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(B,G.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(B,G.u_tile_units_to_pixels)}}};function Xo(B,G,H,te,me,Le,Be){for(var qe=B.context,et=qe.gl,mt=B.useProgram("collisionBox"),bt=[],ee=0,he=0,Me=0;Me<te.length;Me++){var Oe=te[Me],Fe=G.getTile(Oe),Ue=Fe.getBucket(H);if(Ue){var Ge=Oe.posMatrix;me[0]===0&&me[1]===0||(Ge=B.translatePosMatrix(Oe.posMatrix,Fe,me,Le));var Je=Be?Ue.textCollisionBox:Ue.iconCollisionBox,rt=Ue.collisionCircleArray;if(rt.length>0){var ct=l.create(),Ct=Ge;l.mul(ct,Ue.placementInvProjMatrix,B.transform.glCoordMatrix),l.mul(ct,ct,Ue.placementViewportMatrix),bt.push({circleArray:rt,circleOffset:he,transform:Ct,invTransform:ct}),he=ee+=rt.length/4}Je&&mt.draw(qe,et.LINES,Nt.disabled,Ze.disabled,B.colorModeForRenderPass(),je.disabled,ll(Ge,B.transform,Fe),H.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,null,B.transform.zoom,null,null,Je.collisionVertexBuffer)}}if(Be&&bt.length){var Dt=B.useProgram("collisionCircle"),Ft=new l.StructArrayLayout2f1f2i16;Ft.resize(4*ee),Ft._trim();for(var Wt=0,cn=0,Xt=bt;cn<Xt.length;cn+=1)for(var tn=Xt[cn],$t=0;$t<tn.circleArray.length/4;$t++){var _n=4*$t,dn=tn.circleArray[_n+0],Qt=tn.circleArray[_n+1],Cn=tn.circleArray[_n+2],Dn=tn.circleArray[_n+3];Ft.emplace(Wt++,dn,Qt,Cn,Dn,0),Ft.emplace(Wt++,dn,Qt,Cn,Dn,1),Ft.emplace(Wt++,dn,Qt,Cn,Dn,2),Ft.emplace(Wt++,dn,Qt,Cn,Dn,3)}(!so||so.length<2*ee)&&(so=function(Sr){var Vr=2*Sr,Hr=new l.StructArrayLayout3ui6;Hr.resize(Vr),Hr._trim();for(var pr=0;pr<Vr;pr++){var Er=6*pr;Hr.uint16[Er+0]=4*pr+0,Hr.uint16[Er+1]=4*pr+1,Hr.uint16[Er+2]=4*pr+2,Hr.uint16[Er+3]=4*pr+2,Hr.uint16[Er+4]=4*pr+3,Hr.uint16[Er+5]=4*pr+0}return Hr}(ee));for(var Jn=qe.createIndexBuffer(so,!0),Kn=qe.createVertexBuffer(Ft,l.collisionCircleLayout.members,!0),vr=0,yr=bt;vr<yr.length;vr+=1){var fr=yr[vr],gr=qs(fr.transform,fr.invTransform,B.transform);Dt.draw(qe,et.TRIANGLES,Nt.disabled,Ze.disabled,B.colorModeForRenderPass(),je.disabled,gr,H.id,Kn,Jn,l.SegmentVector.simpleSegment(0,2*fr.circleOffset,fr.circleArray.length,fr.circleArray.length/2),null,B.transform.zoom,null,null,null)}Kn.destroy(),Jn.destroy()}}var Oa=l.identity(new Float32Array(16));function Ys(B,G,H,te,me,Le){var Be=l.getAnchorAlignment(B),qe=-(Be.horizontalAlign-.5)*G,et=-(Be.verticalAlign-.5)*H,mt=l.evaluateVariableOffset(B,te);return new l.Point((qe/me+mt[0])*Le,(et/me+mt[1])*Le)}function cs(B,G,H,te,me,Le,Be,qe,et,mt,bt){var ee=B.text.placedSymbolArray,he=B.text.dynamicLayoutVertexArray,Me=B.icon.dynamicLayoutVertexArray,Oe={};he.clear();for(var Fe=0;Fe<ee.length;Fe++){var Ue=ee.get(Fe),Ge=B.allowVerticalPlacement&&!Ue.placedOrientation,Je=Ue.hidden||!Ue.crossTileID||Ge?null:te[Ue.crossTileID];if(Je){var rt=new l.Point(Ue.anchorX,Ue.anchorY),ct=en(rt,H?qe:Be),Ct=vn(Le.cameraToCenterDistance,ct.signedDistanceFromCamera),Dt=me.evaluateSizeForFeature(B.textSizeData,mt,Ue)*Ct/l.ONE_EM;H&&(Dt*=B.tilePixelRatio/et);for(var Ft=Je.width,Wt=Je.height,cn=Ys(Je.anchor,Ft,Wt,Je.textOffset,Je.textBoxScale,Dt),Xt=H?en(rt.add(cn),Be).point:ct.point.add(G?cn.rotate(-Le.angle):cn),tn=B.allowVerticalPlacement&&Ue.placedOrientation===l.WritingMode.vertical?Math.PI/2:0,$t=0;$t<Ue.numGlyphs;$t++)l.addDynamicAttributes(he,Xt,tn);bt&&Ue.associatedIconIndex>=0&&(Oe[Ue.associatedIconIndex]={shiftedAnchor:Xt,angle:tn})}else Xn(Ue.numGlyphs,he)}if(bt){Me.clear();for(var _n=B.icon.placedSymbolArray,dn=0;dn<_n.length;dn++){var Qt=_n.get(dn);if(Qt.hidden)Xn(Qt.numGlyphs,Me);else{var Cn=Oe[dn];if(Cn)for(var Dn=0;Dn<Qt.numGlyphs;Dn++)l.addDynamicAttributes(Me,Cn.shiftedAnchor,Cn.angle);else Xn(Qt.numGlyphs,Me)}}B.icon.dynamicLayoutVertexBuffer.updateData(Me)}B.text.dynamicLayoutVertexBuffer.updateData(he)}function Jo(B,G,H){return H.iconsInText&&G?"symbolTextAndIcon":B?"symbolSDF":"symbolIcon"}function fs(B,G,H,te,me,Le,Be,qe,et,mt,bt,ee){for(var he=B.context,Me=he.gl,Oe=B.transform,Fe=qe==="map",Ue=et==="map",Ge=Fe&&H.layout.get("symbol-placement")!=="point",Je=Fe&&!Ue&&!Ge,rt=H.layout.get("symbol-sort-key").constantOr(1)!==void 0,ct=B.depthModeForSublayer(0,Nt.ReadOnly),Ct=H.layout.get("text-variable-anchor"),Dt=[],Ft=0,Wt=te;Ft<Wt.length;Ft+=1){var cn=Wt[Ft],Xt=G.getTile(cn),tn=Xt.getBucket(H);if(tn){var $t=me?tn.text:tn.icon;if($t&&$t.segments.get().length){var _n=$t.programConfigurations.get(H.id),dn=me||tn.sdfIcons,Qt=me?tn.textSizeData:tn.iconSizeData,Cn=Ue||Oe.pitch!==0,Dn=B.useProgram(Jo(dn,me,tn),_n),Jn=l.evaluateSizeForZoom(Qt,Oe.zoom),Kn=void 0,vr=[0,0],yr=void 0,fr=void 0,gr=null,Sr=void 0;if(me){if(yr=Xt.glyphAtlasTexture,fr=Me.LINEAR,Kn=Xt.glyphAtlasTexture.size,tn.iconsInText){vr=Xt.imageAtlasTexture.size,gr=Xt.imageAtlasTexture;var Vr=Qt.kind==="composite"||Qt.kind==="camera";Sr=Cn||B.options.rotating||B.options.zooming||Vr?Me.LINEAR:Me.NEAREST}}else{var Hr=H.layout.get("icon-size").constantOr(0)!==1||tn.iconsNeedLinear;yr=Xt.imageAtlasTexture,fr=dn||B.options.rotating||B.options.zooming||Hr||Cn?Me.LINEAR:Me.NEAREST,Kn=Xt.imageAtlasTexture.size}var pr=lr(Xt,1,B.transform.zoom),Er=jn(cn.posMatrix,Ue,Fe,B.transform,pr),Fr=mn(cn.posMatrix,Ue,Fe,B.transform,pr),Dr=Ct&&tn.hasTextData(),Yr=H.layout.get("icon-text-fit")!=="none"&&Dr&&tn.hasIconData();Ge&&sn(tn,cn.posMatrix,B,me,Er,Fr,Ue,mt);var Zr=B.translatePosMatrix(cn.posMatrix,Xt,Le,Be),$r=Ge||me&&Ct||Yr?Oa:Er,fi=B.translatePosMatrix(Fr,Xt,Le,Be,!0),bi=dn&&H.paint.get(me?"text-halo-width":"icon-halo-width").constantOr(1)!==0,gi={program:Dn,buffers:$t,uniformValues:dn?tn.iconsInText?ml(Qt.kind,Jn,Je,Ue,B,Zr,$r,fi,Kn,vr):bo(Qt.kind,Jn,Je,Ue,B,Zr,$r,fi,me,Kn,!0):ti(Qt.kind,Jn,Je,Ue,B,Zr,$r,fi,me,Kn),atlasTexture:yr,atlasTextureIcon:gr,atlasInterpolation:fr,atlasInterpolationIcon:Sr,isSDF:dn,hasHalo:bi};if(rt)for(var ui=0,hi=$t.segments.get();ui<hi.length;ui+=1){var vi=hi[ui];Dt.push({segments:new l.SegmentVector([vi]),sortKey:vi.sortKey,state:gi})}else Dt.push({segments:$t.segments,sortKey:0,state:gi})}}}rt&&Dt.sort(function(ea,Mi){return ea.sortKey-Mi.sortKey});for(var Li=0,So=Dt;Li<So.length;Li+=1){var Bi=So[Li],Nr=Bi.state;if(he.activeTexture.set(Me.TEXTURE0),Nr.atlasTexture.bind(Nr.atlasInterpolation,Me.CLAMP_TO_EDGE),Nr.atlasTextureIcon&&(he.activeTexture.set(Me.TEXTURE1),Nr.atlasTextureIcon&&Nr.atlasTextureIcon.bind(Nr.atlasInterpolationIcon,Me.CLAMP_TO_EDGE)),Nr.isSDF){var Zi=Nr.uniformValues;Nr.hasHalo&&(Zi.u_is_halo=1,zo(Nr.buffers,Bi.segments,H,B,Nr.program,ct,bt,ee,Zi)),Zi.u_is_halo=0}zo(Nr.buffers,Bi.segments,H,B,Nr.program,ct,bt,ee,Nr.uniformValues)}}function zo(B,G,H,te,me,Le,Be,qe,et){var mt=te.context,bt=mt.gl;me.draw(mt,bt.TRIANGLES,Le,Be,qe,je.disabled,et,H.id,B.layoutVertexBuffer,B.indexBuffer,G,H.paint,te.transform.zoom,B.programConfigurations.get(H.id),B.dynamicLayoutVertexBuffer,B.opacityVertexBuffer)}function Ro(B,G,H,te,me,Le,Be){var qe,et,mt,bt,ee,he=B.context.gl,Me=H.paint.get("fill-pattern"),Oe=Me&&Me.constantOr(1),Fe=H.getCrossfadeParameters();Be?(et=Oe&&!H.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",qe=he.LINES):(et=Oe?"fillPattern":"fill",qe=he.TRIANGLES);for(var Ue=0,Ge=te;Ue<Ge.length;Ue+=1){var Je=Ge[Ue],rt=G.getTile(Je);if(!Oe||rt.patternsLoaded()){var ct=rt.getBucket(H);if(ct){var Ct=ct.programConfigurations.get(H.id),Dt=B.useProgram(et,Ct);Oe&&(B.context.activeTexture.set(he.TEXTURE0),rt.imageAtlasTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE),Ct.updatePaintBuffers(Fe));var Ft=Me.constantOr(null);if(Ft&&rt.imageAtlas){var Wt=rt.imageAtlas,cn=Wt.patternPositions[Ft.to.toString()],Xt=Wt.patternPositions[Ft.from.toString()];cn&&Xt&&Ct.setConstantPatternPositions(cn,Xt)}var tn=B.translatePosMatrix(Je.posMatrix,rt,H.paint.get("fill-translate"),H.paint.get("fill-translate-anchor"));if(Be){bt=ct.indexBuffer2,ee=ct.segments2;var $t=[he.drawingBufferWidth,he.drawingBufferHeight];mt=et==="fillOutlinePattern"&&Oe?vl(tn,B,Fe,rt,$t):sl(tn,$t)}else bt=ct.indexBuffer,ee=ct.segments,mt=Oe?ol(tn,B,Fe,rt):ro(tn);Dt.draw(B.context,qe,me,B.stencilModeForClipping(Je),Le,je.disabled,mt,H.id,ct.layoutVertexBuffer,bt,ee,H.paint,B.transform.zoom,Ct)}}}}function Ko(B,G,H,te,me,Le,Be){for(var qe=B.context,et=qe.gl,mt=H.paint.get("fill-extrusion-pattern"),bt=mt.constantOr(1),ee=H.getCrossfadeParameters(),he=H.paint.get("fill-extrusion-opacity"),Me=0,Oe=te;Me<Oe.length;Me+=1){var Fe=Oe[Me],Ue=G.getTile(Fe),Ge=Ue.getBucket(H);if(Ge){var Je=Ge.programConfigurations.get(H.id),rt=B.useProgram(bt?"fillExtrusionPattern":"fillExtrusion",Je);bt&&(B.context.activeTexture.set(et.TEXTURE0),Ue.imageAtlasTexture.bind(et.LINEAR,et.CLAMP_TO_EDGE),Je.updatePaintBuffers(ee));var ct=mt.constantOr(null);if(ct&&Ue.imageAtlas){var Ct=Ue.imageAtlas,Dt=Ct.patternPositions[ct.to.toString()],Ft=Ct.patternPositions[ct.from.toString()];Dt&&Ft&&Je.setConstantPatternPositions(Dt,Ft)}var Wt=B.translatePosMatrix(Fe.posMatrix,Ue,H.paint.get("fill-extrusion-translate"),H.paint.get("fill-extrusion-translate-anchor")),cn=H.paint.get("fill-extrusion-vertical-gradient"),Xt=bt?al(Wt,B,cn,he,Fe,ee,Ue):ls(Wt,B,cn,he);rt.draw(qe,qe.gl.TRIANGLES,me,Le,Be,je.backCCW,Xt,H.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,H.paint,B.transform.zoom,Je)}}}function hs(B,G,H,te,me,Le){var Be=B.context,qe=Be.gl,et=G.fbo;if(et){var mt=B.useProgram("hillshade");Be.activeTexture.set(qe.TEXTURE0),qe.bindTexture(qe.TEXTURE_2D,et.colorAttachment.get());var bt=function(ee,he,Me){var Oe=Me.paint.get("hillshade-shadow-color"),Fe=Me.paint.get("hillshade-highlight-color"),Ue=Me.paint.get("hillshade-accent-color"),Ge=Me.paint.get("hillshade-illumination-direction")*(Math.PI/180);Me.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ge-=ee.transform.angle);var Je,rt,ct,Ct=!ee.options.moving;return{u_matrix:ee.transform.calculatePosMatrix(he.tileID.toUnwrapped(),Ct),u_image:0,u_latrange:(Je=he.tileID,rt=Math.pow(2,Je.canonical.z),ct=Je.canonical.y,[new l.MercatorCoordinate(0,ct/rt).toLngLat().lat,new l.MercatorCoordinate(0,(ct+1)/rt).toLngLat().lat]),u_light:[Me.paint.get("hillshade-exaggeration"),Ge],u_shadow:Oe,u_highlight:Fe,u_accent:Ue}}(B,G,H);mt.draw(Be,qe.TRIANGLES,te,me,Le,je.disabled,bt,H.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}}function ps(B,G,H,te,me,Le,Be){var qe=B.context,et=qe.gl,mt=G.dem;if(mt&&mt.data){var bt=mt.dim,ee=mt.stride,he=mt.getPixels();if(qe.activeTexture.set(et.TEXTURE1),qe.pixelStoreUnpackPremultiplyAlpha.set(!1),G.demTexture=G.demTexture||B.getTileTexture(ee),G.demTexture){var Me=G.demTexture;Me.update(he,{premultiply:!1}),Me.bind(et.NEAREST,et.CLAMP_TO_EDGE)}else G.demTexture=new l.Texture(qe,he,et.RGBA,{premultiply:!1}),G.demTexture.bind(et.NEAREST,et.CLAMP_TO_EDGE);qe.activeTexture.set(et.TEXTURE0);var Oe=G.fbo;if(!Oe){var Fe=new l.Texture(qe,{width:bt,height:bt,data:null},et.RGBA);Fe.bind(et.LINEAR,et.CLAMP_TO_EDGE),(Oe=G.fbo=qe.createFramebuffer(bt,bt,!0)).colorAttachment.set(Fe.texture)}qe.bindFramebuffer.set(Oe.framebuffer),qe.viewport.set([0,0,bt,bt]),B.useProgram("hillshadePrepare").draw(qe,et.TRIANGLES,me,Le,Be,je.disabled,function(Ue,Ge,Je){var rt=Ge.stride,ct=l.create();return l.ortho(ct,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(ct,ct,[0,-l.EXTENT,0]),{u_matrix:ct,u_image:1,u_dimension:[rt,rt],u_zoom:Ue.overscaledZ,u_maxzoom:Je,u_unpack:Ge.getUnpackVector()}}(G.tileID,mt,te),H.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments),G.needsHillshadePrepare=!1}}function Ia(B,G,H,te,me){var Le=te.paint.get("raster-fade-duration");if(Le>0){var Be=l.browser.now(),qe=(Be-B.timeAdded)/Le,et=G?(Be-G.timeAdded)/Le:-1,mt=H.getSource(),bt=me.coveringZoomLevel({tileSize:mt.tileSize,roundZoom:mt.roundZoom}),ee=!G||Math.abs(G.tileID.overscaledZ-bt)>Math.abs(B.tileID.overscaledZ-bt),he=ee&&B.refreshedUponExpiration?1:l.clamp(ee?qe:1-et,0,1);return B.refreshedUponExpiration&&qe>=1&&(B.refreshedUponExpiration=!1),G?{opacity:1,mix:1-he}:{opacity:he,mix:0}}return{opacity:1,mix:0}}var ds=new l.Color(1,0,0,1),gs=new l.Color(0,1,0,1),Ws=new l.Color(0,0,1,1),_o=new l.Color(1,0,1,1),Es=new l.Color(0,1,1,1);function vs(B){var G=B.transform.padding;Xs(B,B.transform.height-(G.top||0),3,ds),Xs(B,G.bottom||0,3,gs),ms(B,G.left||0,3,Ws),ms(B,B.transform.width-(G.right||0),3,_o);var H=B.transform.centerPoint;(function(te,me,Le,Be){var qe=20,et=2;$o(te,me-et/2,Le-qe/2,et,qe,Be),$o(te,me-qe/2,Le-et/2,qe,et,Be)})(B,H.x,B.transform.height-H.y,Es)}function Xs(B,G,H,te){$o(B,0,G+H/2,B.transform.width,H,te)}function ms(B,G,H,te){$o(B,G-H/2,0,H,B.transform.height,te)}function $o(B,G,H,te,me,Le){var Be=B.context,qe=Be.gl;qe.enable(qe.SCISSOR_TEST),qe.scissor(G*l.browser.devicePixelRatio,H*l.browser.devicePixelRatio,te*l.browser.devicePixelRatio,me*l.browser.devicePixelRatio),Be.clear({color:Le}),qe.disable(qe.SCISSOR_TEST)}function Do(B,G,H){var te=B.context,me=te.gl,Le=H.posMatrix,Be=B.useProgram("debug"),qe=Nt.disabled,et=Ze.disabled,mt=B.colorModeForRenderPass(),bt="$debug";te.activeTexture.set(me.TEXTURE0),B.emptyTexture.bind(me.LINEAR,me.CLAMP_TO_EDGE),Be.draw(te,me.LINE_STRIP,qe,et,mt,je.disabled,io(Le,l.Color.red),bt,B.debugBuffer,B.tileBorderIndexBuffer,B.debugSegments);var ee=G.getTileByID(H.key).latestRawTileData,he=ee&&ee.byteLength||0,Me=Math.floor(he/1024),Oe=G.getTile(H).tileSize,Fe=512/Math.min(Oe,512)*(H.overscaledZ/B.transform.zoom)*.5,Ue=H.canonical.toString();H.overscaledZ!==H.canonical.z&&(Ue+=" => "+H.overscaledZ),function(Ge,Je){Ge.initDebugOverlayCanvas();var rt=Ge.debugOverlayCanvas,ct=Ge.context.gl,Ct=Ge.debugOverlayCanvas.getContext("2d");Ct.clearRect(0,0,rt.width,rt.height),Ct.shadowColor="white",Ct.shadowBlur=2,Ct.lineWidth=1.5,Ct.strokeStyle="white",Ct.textBaseline="top",Ct.font="bold 36px Open Sans, sans-serif",Ct.fillText(Je,5,5),Ct.strokeText(Je,5,5),Ge.debugOverlayTexture.update(rt),Ge.debugOverlayTexture.bind(ct.LINEAR,ct.CLAMP_TO_EDGE)}(B,Ue+" "+Me+"kb"),Be.draw(te,me.TRIANGLES,qe,et,Ye.alphaBlended,je.disabled,io(Le,l.Color.transparent,Fe),bt,B.debugBuffer,B.quadTriangleIndexBuffer,B.debugSegments)}var Fo={symbol:function(B,G,H,te,me){if(B.renderPass==="translucent"){var Le=Ze.disabled,Be=B.colorModeForRenderPass();H.layout.get("text-variable-anchor")&&function(qe,et,mt,bt,ee,he,Me){for(var Oe=et.transform,Fe=ee==="map",Ue=he==="map",Ge=0,Je=qe;Ge<Je.length;Ge+=1){var rt=Je[Ge],ct=bt.getTile(rt),Ct=ct.getBucket(mt);if(Ct&&Ct.text&&Ct.text.segments.get().length){var Dt=Ct.textSizeData,Ft=l.evaluateSizeForZoom(Dt,Oe.zoom),Wt=lr(ct,1,et.transform.zoom),cn=jn(rt.posMatrix,Ue,Fe,et.transform,Wt),Xt=mt.layout.get("icon-text-fit")!=="none"&&Ct.hasIconData();if(Ft){var tn=Math.pow(2,Oe.zoom-ct.tileID.overscaledZ);cs(Ct,Fe,Ue,Me,l.symbolSize,Oe,cn,rt.posMatrix,tn,Ft,Xt)}}}}(te,B,H,G,H.layout.get("text-rotation-alignment"),H.layout.get("text-pitch-alignment"),me),H.paint.get("icon-opacity").constantOr(1)!==0&&fs(B,G,H,te,!1,H.paint.get("icon-translate"),H.paint.get("icon-translate-anchor"),H.layout.get("icon-rotation-alignment"),H.layout.get("icon-pitch-alignment"),H.layout.get("icon-keep-upright"),Le,Be),H.paint.get("text-opacity").constantOr(1)!==0&&fs(B,G,H,te,!0,H.paint.get("text-translate"),H.paint.get("text-translate-anchor"),H.layout.get("text-rotation-alignment"),H.layout.get("text-pitch-alignment"),H.layout.get("text-keep-upright"),Le,Be),G.map.showCollisionBoxes&&(Xo(B,G,H,te,H.paint.get("text-translate"),H.paint.get("text-translate-anchor"),!0),Xo(B,G,H,te,H.paint.get("icon-translate"),H.paint.get("icon-translate-anchor"),!1))}},circle:function(B,G,H,te){if(B.renderPass==="translucent"){var me=H.paint.get("circle-opacity"),Le=H.paint.get("circle-stroke-width"),Be=H.paint.get("circle-stroke-opacity"),qe=H.layout.get("circle-sort-key").constantOr(1)!==void 0;if(me.constantOr(1)!==0||Le.constantOr(1)!==0&&Be.constantOr(1)!==0){for(var et=B.context,mt=et.gl,bt=B.depthModeForSublayer(0,Nt.ReadOnly),ee=Ze.disabled,he=B.colorModeForRenderPass(),Me=[],Oe=0;Oe<te.length;Oe++){var Fe=te[Oe],Ue=G.getTile(Fe),Ge=Ue.getBucket(H);if(Ge){var Je=Ge.programConfigurations.get(H.id),rt={programConfiguration:Je,program:B.useProgram("circle",Je),layoutVertexBuffer:Ge.layoutVertexBuffer,indexBuffer:Ge.indexBuffer,uniformValues:Hs(B,Fe,Ue,H)};if(qe)for(var ct=0,Ct=Ge.segments.get();ct<Ct.length;ct+=1){var Dt=Ct[ct];Me.push({segments:new l.SegmentVector([Dt]),sortKey:Dt.sortKey,state:rt})}else Me.push({segments:Ge.segments,sortKey:0,state:rt})}}qe&&Me.sort(function(Dn,Jn){return Dn.sortKey-Jn.sortKey});for(var Ft=0,Wt=Me;Ft<Wt.length;Ft+=1){var cn=Wt[Ft],Xt=cn.state,tn=Xt.programConfiguration,$t=Xt.program,_n=Xt.layoutVertexBuffer,dn=Xt.indexBuffer,Qt=Xt.uniformValues,Cn=cn.segments;$t.draw(et,mt.TRIANGLES,bt,ee,he,je.disabled,Qt,H.id,_n,dn,Cn,H.paint,B.transform.zoom,tn)}}}},heatmap:function(B,G,H,te){if(H.paint.get("heatmap-opacity")!==0)if(B.renderPass==="offscreen"){var me=B.context,Le=me.gl,Be=Ze.disabled,qe=new Ye([Le.ONE,Le.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(Fe,Ue,Ge){var Je=Fe.gl;Fe.activeTexture.set(Je.TEXTURE1),Fe.viewport.set([0,0,Ue.width/4,Ue.height/4]);var rt=Ge.heatmapFbo;if(rt)Je.bindTexture(Je.TEXTURE_2D,rt.colorAttachment.get()),Fe.bindFramebuffer.set(rt.framebuffer);else{var ct=Je.createTexture();Je.bindTexture(Je.TEXTURE_2D,ct),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_WRAP_S,Je.CLAMP_TO_EDGE),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_WRAP_T,Je.CLAMP_TO_EDGE),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_MIN_FILTER,Je.LINEAR),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_MAG_FILTER,Je.LINEAR),rt=Ge.heatmapFbo=Fe.createFramebuffer(Ue.width/4,Ue.height/4,!1),function(Ct,Dt,Ft,Wt){var cn=Ct.gl,Xt=Ct.extRenderToTextureHalfFloat?Ct.extTextureHalfFloat.HALF_FLOAT_OES:cn.UNSIGNED_BYTE;cn.texImage2D(cn.TEXTURE_2D,0,cn.RGBA,Dt.width/4,Dt.height/4,0,cn.RGBA,Xt,null),Wt.colorAttachment.set(Ft)}(Fe,Ue,ct,rt)}})(me,B,H),me.clear({color:l.Color.transparent});for(var et=0;et<te.length;et++){var mt=te[et];if(!G.hasRenderableParent(mt)){var bt=G.getTile(mt),ee=bt.getBucket(H);if(ee){var he=ee.programConfigurations.get(H.id),Me=B.useProgram("heatmap",he),Oe=B.transform.zoom;Me.draw(me,Le.TRIANGLES,Nt.disabled,Be,qe,je.disabled,Yo(mt.posMatrix,bt,Oe,H.paint.get("heatmap-intensity")),H.id,ee.layoutVertexBuffer,ee.indexBuffer,ee.segments,H.paint,B.transform.zoom,he)}}}me.viewport.set([0,0,B.width,B.height])}else B.renderPass==="translucent"&&(B.context.setColorMode(B.colorModeForRenderPass()),function(Fe,Ue){var Ge=Fe.context,Je=Ge.gl,rt=Ue.heatmapFbo;if(rt){Ge.activeTexture.set(Je.TEXTURE0),Je.bindTexture(Je.TEXTURE_2D,rt.colorAttachment.get()),Ge.activeTexture.set(Je.TEXTURE1);var ct=Ue.colorRampTexture;ct||(ct=Ue.colorRampTexture=new l.Texture(Ge,Ue.colorRamp,Je.RGBA)),ct.bind(Je.LINEAR,Je.CLAMP_TO_EDGE),Fe.useProgram("heatmapTexture").draw(Ge,Je.TRIANGLES,Nt.disabled,Ze.disabled,Fe.colorModeForRenderPass(),je.disabled,function(Ct,Dt,Ft,Wt){var cn=l.create();l.ortho(cn,0,Ct.width,Ct.height,0,0,1);var Xt=Ct.context.gl;return{u_matrix:cn,u_world:[Xt.drawingBufferWidth,Xt.drawingBufferHeight],u_image:Ft,u_color_ramp:Wt,u_opacity:Dt.paint.get("heatmap-opacity")}}(Fe,Ue,0,1),Ue.id,Fe.viewportBuffer,Fe.quadTriangleIndexBuffer,Fe.viewportSegments,Ue.paint,Fe.transform.zoom)}}(B,H))},line:function(B,G,H,te){if(B.renderPass==="translucent"){var me=H.paint.get("line-opacity"),Le=H.paint.get("line-width");if(me.constantOr(1)!==0&&Le.constantOr(1)!==0){var Be=B.depthModeForSublayer(0,Nt.ReadOnly),qe=B.colorModeForRenderPass(),et=H.paint.get("line-dasharray"),mt=H.paint.get("line-pattern"),bt=mt.constantOr(1),ee=H.paint.get("line-gradient"),he=H.getCrossfadeParameters(),Me=bt?"linePattern":et?"lineSDF":ee?"lineGradient":"line",Oe=B.context,Fe=Oe.gl,Ue=!0;if(ee){Oe.activeTexture.set(Fe.TEXTURE0);var Ge=H.gradientTexture;if(!H.gradient)return;Ge||(Ge=H.gradientTexture=new l.Texture(Oe,H.gradient,Fe.RGBA)),Ge.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE)}for(var Je=0,rt=te;Je<rt.length;Je+=1){var ct=rt[Je],Ct=G.getTile(ct);if(!bt||Ct.patternsLoaded()){var Dt=Ct.getBucket(H);if(Dt){var Ft=Dt.programConfigurations.get(H.id),Wt=B.context.program.get(),cn=B.useProgram(Me,Ft),Xt=Ue||cn.program!==Wt,tn=mt.constantOr(null);if(tn&&Ct.imageAtlas){var $t=Ct.imageAtlas,_n=$t.patternPositions[tn.to.toString()],dn=$t.patternPositions[tn.from.toString()];_n&&dn&&Ft.setConstantPatternPositions(_n,dn)}var Qt=bt?Zs(B,Ct,H,he):et?Po(B,Ct,H,et,he):ee?Gs(B,Ct,H):oo(B,Ct,H);bt?(Oe.activeTexture.set(Fe.TEXTURE0),Ct.imageAtlasTexture.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE),Ft.updatePaintBuffers(he)):et&&(Xt||B.lineAtlas.dirty)&&(Oe.activeTexture.set(Fe.TEXTURE0),B.lineAtlas.bind(Oe)),cn.draw(Oe,Fe.TRIANGLES,Be,B.stencilModeForClipping(ct),qe,je.disabled,Qt,H.id,Dt.layoutVertexBuffer,Dt.indexBuffer,Dt.segments,H.paint,B.transform.zoom,Ft),Ue=!1}}}}}},fill:function(B,G,H,te){var me=H.paint.get("fill-color"),Le=H.paint.get("fill-opacity");if(Le.constantOr(1)!==0){var Be=B.colorModeForRenderPass(),qe=H.paint.get("fill-pattern"),et=B.opaquePassEnabledForLayer()&&!qe.constantOr(1)&&me.constantOr(l.Color.transparent).a===1&&Le.constantOr(0)===1?"opaque":"translucent";if(B.renderPass===et){var mt=B.depthModeForSublayer(1,B.renderPass==="opaque"?Nt.ReadWrite:Nt.ReadOnly);Ro(B,G,H,te,mt,Be,!1)}if(B.renderPass==="translucent"&&H.paint.get("fill-antialias")){var bt=B.depthModeForSublayer(H.getPaintProperty("fill-outline-color")?2:0,Nt.ReadOnly);Ro(B,G,H,te,bt,Be,!0)}}},"fill-extrusion":function(B,G,H,te){var me=H.paint.get("fill-extrusion-opacity");if(me!==0&&B.renderPass==="translucent"){var Le=new Nt(B.context.gl.LEQUAL,Nt.ReadWrite,B.depthRangeFor3D);if(me!==1||H.paint.get("fill-extrusion-pattern").constantOr(1))Ko(B,G,H,te,Le,Ze.disabled,Ye.disabled),Ko(B,G,H,te,Le,B.stencilModeFor3D(),B.colorModeForRenderPass());else{var Be=B.colorModeForRenderPass();Ko(B,G,H,te,Le,Ze.disabled,Be)}}},hillshade:function(B,G,H,te){if(B.renderPass==="offscreen"||B.renderPass==="translucent"){for(var me=B.context,Le=G.getSource().maxzoom,Be=B.depthModeForSublayer(0,Nt.ReadOnly),qe=B.colorModeForRenderPass(),et=B.renderPass==="translucent"?B.stencilConfigForOverlap(te):[{},te],mt=et[0],bt=0,ee=et[1];bt<ee.length;bt+=1){var he=ee[bt],Me=G.getTile(he);Me.needsHillshadePrepare&&B.renderPass==="offscreen"?ps(B,Me,H,Le,Be,Ze.disabled,qe):B.renderPass==="translucent"&&hs(B,Me,H,Be,mt[he.overscaledZ],qe)}me.viewport.set([0,0,B.width,B.height])}},raster:function(B,G,H,te){if(B.renderPass==="translucent"&&H.paint.get("raster-opacity")!==0&&te.length)for(var me=B.context,Le=me.gl,Be=G.getSource(),qe=B.useProgram("raster"),et=B.colorModeForRenderPass(),mt=Be instanceof D?[{},te]:B.stencilConfigForOverlap(te),bt=mt[0],ee=mt[1],he=ee[ee.length-1].overscaledZ,Me=!B.options.moving,Oe=0,Fe=ee;Oe<Fe.length;Oe+=1){var Ue=Fe[Oe],Ge=B.depthModeForSublayer(Ue.overscaledZ-he,H.paint.get("raster-opacity")===1?Nt.ReadWrite:Nt.ReadOnly,Le.LESS),Je=G.getTile(Ue),rt=B.transform.calculatePosMatrix(Ue.toUnwrapped(),Me);Je.registerFadeDuration(H.paint.get("raster-fade-duration"));var ct=G.findLoadedParent(Ue,0),Ct=Ia(Je,ct,G,H,B.transform),Dt=void 0,Ft=void 0,Wt=H.paint.get("raster-resampling")==="nearest"?Le.NEAREST:Le.LINEAR;me.activeTexture.set(Le.TEXTURE0),Je.texture.bind(Wt,Le.CLAMP_TO_EDGE,Le.LINEAR_MIPMAP_NEAREST),me.activeTexture.set(Le.TEXTURE1),ct?(ct.texture.bind(Wt,Le.CLAMP_TO_EDGE,Le.LINEAR_MIPMAP_NEAREST),Dt=Math.pow(2,ct.tileID.overscaledZ-Je.tileID.overscaledZ),Ft=[Je.tileID.canonical.x*Dt%1,Je.tileID.canonical.y*Dt%1]):Je.texture.bind(Wt,Le.CLAMP_TO_EDGE,Le.LINEAR_MIPMAP_NEAREST);var cn=Wo(rt,Ft||[0,0],Dt||1,Ct,H);Be instanceof D?qe.draw(me,Le.TRIANGLES,Ge,Ze.disabled,et,je.disabled,cn,H.id,Be.boundsBuffer,B.quadTriangleIndexBuffer,Be.boundsSegments):qe.draw(me,Le.TRIANGLES,Ge,bt[Ue.overscaledZ],et,je.disabled,cn,H.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}},background:function(B,G,H){var te=H.paint.get("background-color"),me=H.paint.get("background-opacity");if(me!==0){var Le=B.context,Be=Le.gl,qe=B.transform,et=qe.tileSize,mt=H.paint.get("background-pattern");if(!B.isPatternMissing(mt)){var bt=!mt&&te.a===1&&me===1&&B.opaquePassEnabledForLayer()?"opaque":"translucent";if(B.renderPass===bt){var ee=Ze.disabled,he=B.depthModeForSublayer(0,bt==="opaque"?Nt.ReadWrite:Nt.ReadOnly),Me=B.colorModeForRenderPass(),Oe=B.useProgram(mt?"backgroundPattern":"background"),Fe=qe.coveringTiles({tileSize:et});mt&&(Le.activeTexture.set(Be.TEXTURE0),B.imageManager.bind(B.context));for(var Ue=H.getCrossfadeParameters(),Ge=0,Je=Fe;Ge<Je.length;Ge+=1){var rt=Je[Ge],ct=B.transform.calculatePosMatrix(rt.toUnwrapped()),Ct=mt?us(ct,me,B,mt,{tileID:rt,tileSize:et},Ue):Ss(ct,me,te);Oe.draw(Le,Be.TRIANGLES,he,ee,Me,je.disabled,Ct,H.id,B.tileExtentBuffer,B.quadTriangleIndexBuffer,B.tileExtentSegments)}}}}},debug:function(B,G,H){for(var te=0;te<H.length;te++)Do(B,G,H[te])},custom:function(B,G,H){var te=B.context,me=H.implementation;if(B.renderPass==="offscreen"){var Le=me.prerender;Le&&(B.setCustomLayerDefaults(),te.setColorMode(B.colorModeForRenderPass()),Le.call(me,te.gl,B.transform.customLayerMatrix()),te.setDirty(),B.setBaseState())}else if(B.renderPass==="translucent"){B.setCustomLayerDefaults(),te.setColorMode(B.colorModeForRenderPass()),te.setStencilMode(Ze.disabled);var Be=me.renderingMode==="3d"?new Nt(B.context.gl.LEQUAL,Nt.ReadWrite,B.depthRangeFor3D):B.depthModeForSublayer(0,Nt.ReadOnly);te.setDepthMode(Be),me.render(te.gl,B.transform.customLayerMatrix()),te.setDirty(),B.setBaseState(),te.bindFramebuffer.set(null)}}},si=function(B,G){this.context=new Ke(B),this.transform=G,this._tileTextures={},this.setup(),this.numSublayers=st.maxUnderzooming+st.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Wn,this.gpuTimers={}};si.prototype.resize=function(B,G){if(this.width=B*l.browser.devicePixelRatio,this.height=G*l.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var H=0,te=this.style._order;H<te.length;H+=1){var me=te[H];this.style._layers[me].resize()}},si.prototype.setup=function(){var B=this.context,G=new l.StructArrayLayout2i4;G.emplaceBack(0,0),G.emplaceBack(l.EXTENT,0),G.emplaceBack(0,l.EXTENT),G.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=B.createVertexBuffer(G,cr.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);var H=new l.StructArrayLayout2i4;H.emplaceBack(0,0),H.emplaceBack(l.EXTENT,0),H.emplaceBack(0,l.EXTENT),H.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=B.createVertexBuffer(H,cr.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);var te=new l.StructArrayLayout4i8;te.emplaceBack(0,0,0,0),te.emplaceBack(l.EXTENT,0,l.EXTENT,0),te.emplaceBack(0,l.EXTENT,0,l.EXTENT),te.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=B.createVertexBuffer(te,F.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);var me=new l.StructArrayLayout2i4;me.emplaceBack(0,0),me.emplaceBack(1,0),me.emplaceBack(0,1),me.emplaceBack(1,1),this.viewportBuffer=B.createVertexBuffer(me,cr.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);var Le=new l.StructArrayLayout1ui2;Le.emplaceBack(0),Le.emplaceBack(1),Le.emplaceBack(3),Le.emplaceBack(2),Le.emplaceBack(0),this.tileBorderIndexBuffer=B.createIndexBuffer(Le);var Be=new l.StructArrayLayout3ui6;Be.emplaceBack(0,1,2),Be.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=B.createIndexBuffer(Be),this.emptyTexture=new l.Texture(B,{width:1,height:1,data:new Uint8Array([0,0,0,0])},B.gl.RGBA);var qe=this.context.gl;this.stencilClearMode=new Ze({func:qe.ALWAYS,mask:0},0,255,qe.ZERO,qe.ZERO,qe.ZERO)},si.prototype.clearStencil=function(){var B=this.context,G=B.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var H=l.create();l.ortho(H,0,this.width,this.height,0,0,1),l.scale(H,H,[G.drawingBufferWidth,G.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(B,G.TRIANGLES,Nt.disabled,this.stencilClearMode,Ye.disabled,je.disabled,ao(H),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},si.prototype._renderTileClippingMasks=function(B,G){if(this.currentStencilSource!==B.source&&B.isTileClipped()&&G&&G.length){this.currentStencilSource=B.source;var H=this.context,te=H.gl;this.nextStencilID+G.length>256&&this.clearStencil(),H.setColorMode(Ye.disabled),H.setDepthMode(Nt.disabled);var me=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Le=0,Be=G;Le<Be.length;Le+=1){var qe=Be[Le],et=this._tileClippingMaskIDs[qe.key]=this.nextStencilID++;me.draw(H,te.TRIANGLES,Nt.disabled,new Ze({func:te.ALWAYS,mask:0},et,255,te.KEEP,te.KEEP,te.REPLACE),Ye.disabled,je.disabled,ao(qe.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},si.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var B=this.nextStencilID++,G=this.context.gl;return new Ze({func:G.NOTEQUAL,mask:255},B,255,G.KEEP,G.KEEP,G.REPLACE)},si.prototype.stencilModeForClipping=function(B){var G=this.context.gl;return new Ze({func:G.EQUAL,mask:255},this._tileClippingMaskIDs[B.key],0,G.KEEP,G.KEEP,G.REPLACE)},si.prototype.stencilConfigForOverlap=function(B){var G,H=this.context.gl,te=B.sort(function(et,mt){return mt.overscaledZ-et.overscaledZ}),me=te[te.length-1].overscaledZ,Le=te[0].overscaledZ-me+1;if(Le>1){this.currentStencilSource=void 0,this.nextStencilID+Le>256&&this.clearStencil();for(var Be={},qe=0;qe<Le;qe++)Be[qe+me]=new Ze({func:H.GEQUAL,mask:255},qe+this.nextStencilID,255,H.KEEP,H.KEEP,H.REPLACE);return this.nextStencilID+=Le,[Be,te]}return[(G={},G[me]=Ze.disabled,G),te]},si.prototype.colorModeForRenderPass=function(){var B=this.context.gl;if(this._showOverdrawInspector){var G=.125;return new Ye([B.CONSTANT_COLOR,B.ONE],new l.Color(G,G,G,0),[!0,!0,!0,!0])}return this.renderPass==="opaque"?Ye.unblended:Ye.alphaBlended},si.prototype.depthModeForSublayer=function(B,G,H){if(!this.opaquePassEnabledForLayer())return Nt.disabled;var te=1-((1+this.currentLayer)*this.numSublayers+B)*this.depthEpsilon;return new Nt(H||this.context.gl.LEQUAL,G,[te,te])},si.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},si.prototype.render=function(B,G){var H=this;this.style=B,this.options=G,this.lineAtlas=B.lineAtlas,this.imageManager=B.imageManager,this.glyphManager=B.glyphManager,this.symbolFadeChange=B.placement.symbolFadeChange(l.browser.now()),this.imageManager.beginFrame();var te=this.style._order,me=this.style.sourceCaches;for(var Le in me){var Be=me[Le];Be.used&&Be.prepare(this.context)}var qe,et,mt={},bt={},ee={};for(var he in me){var Me=me[he];mt[he]=Me.getVisibleCoordinates(),bt[he]=mt[he].slice().reverse(),ee[he]=Me.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Oe=0;Oe<te.length;Oe++){var Fe=te[Oe];if(this.style._layers[Fe].is3D()){this.opaquePassCutoff=Oe;break}}this.renderPass="offscreen";for(var Ue=0,Ge=te;Ue<Ge.length;Ue+=1){var Je=Ge[Ue],rt=this.style._layers[Je];if(rt.hasOffscreenPass()&&!rt.isHidden(this.transform.zoom)){var ct=bt[rt.source];(rt.type==="custom"||ct.length)&&this.renderLayer(this,me[rt.source],rt,ct)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:G.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=G.showOverdrawInspector,this.depthRangeFor3D=[0,1-(B._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=te.length-1;this.currentLayer>=0;this.currentLayer--){var Ct=this.style._layers[te[this.currentLayer]],Dt=me[Ct.source],Ft=mt[Ct.source];this._renderTileClippingMasks(Ct,Ft),this.renderLayer(this,Dt,Ct,Ft)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<te.length;this.currentLayer++){var Wt=this.style._layers[te[this.currentLayer]],cn=me[Wt.source],Xt=(Wt.type==="symbol"?ee:bt)[Wt.source];this._renderTileClippingMasks(Wt,mt[Wt.source]),this.renderLayer(this,cn,Wt,Xt)}this.options.showTileBoundaries&&(l.values(this.style._layers).forEach(function(tn){tn.source&&!tn.isHidden(H.transform.zoom)&&(tn.source!==(et&&et.id)&&(et=H.style.sourceCaches[tn.source]),(!qe||qe.getSource().maxzoom<et.getSource().maxzoom)&&(qe=et))}),qe&&Fo.debug(this,qe,qe.getVisibleCoordinates())),this.options.showPadding&&vs(this),this.context.setDefault()},si.prototype.renderLayer=function(B,G,H,te){H.isHidden(this.transform.zoom)||(H.type==="background"||H.type==="custom"||te.length)&&(this.id=H.id,this.gpuTimingStart(H),Fo[H.type](B,G,H,te,this.style.placement.variableOffsets),this.gpuTimingEnd())},si.prototype.gpuTimingStart=function(B){if(this.options.gpuTiming){var G=this.context.extTimerQuery,H=this.gpuTimers[B.id];H||(H=this.gpuTimers[B.id]={calls:0,cpuTime:0,query:G.createQueryEXT()}),H.calls++,G.beginQueryEXT(G.TIME_ELAPSED_EXT,H.query)}},si.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var B=this.context.extTimerQuery;B.endQueryEXT(B.TIME_ELAPSED_EXT)}},si.prototype.collectGpuTimers=function(){var B=this.gpuTimers;return this.gpuTimers={},B},si.prototype.queryGpuTimers=function(B){var G={};for(var H in B){var te=B[H],me=this.context.extTimerQuery,Le=me.getQueryObjectEXT(te.query,me.QUERY_RESULT_EXT)/1e6;me.deleteQueryEXT(te.query),G[H]=Le}return G},si.prototype.translatePosMatrix=function(B,G,H,te,me){if(!H[0]&&!H[1])return B;var Le=me?te==="map"?this.transform.angle:0:te==="viewport"?-this.transform.angle:0;if(Le){var Be=Math.sin(Le),qe=Math.cos(Le);H=[H[0]*qe-H[1]*Be,H[0]*Be+H[1]*qe]}var et=[me?H[0]:lr(G,H[0],this.transform.zoom),me?H[1]:lr(G,H[1],this.transform.zoom),0],mt=new Float32Array(16);return l.translate(mt,B,et),mt},si.prototype.saveTileTexture=function(B){var G=this._tileTextures[B.size[0]];G?G.push(B):this._tileTextures[B.size[0]]=[B]},si.prototype.getTileTexture=function(B){var G=this._tileTextures[B];return G&&G.length>0?G.pop():null},si.prototype.isPatternMissing=function(B){if(!B)return!1;if(!B.from||!B.to)return!0;var G=this.imageManager.getPattern(B.from.toString()),H=this.imageManager.getPattern(B.to.toString());return!G||!H},si.prototype.useProgram=function(B,G){this.cache=this.cache||{};var H=""+B+(G?G.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[H]||(this.cache[H]=new Va(this.context,yo[B],G,Io[B],this._showOverdrawInspector)),this.cache[H]},si.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},si.prototype.setBaseState=function(){var B=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(B.FUNC_ADD)},si.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=l.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var B=this.context.gl;this.debugOverlayTexture=new l.Texture(this.context,this.debugOverlayCanvas,B.RGBA)}},si.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var wo=function(B,G){this.points=B,this.planes=G};wo.fromInvProjectionMatrix=function(B,G,H){var te=Math.pow(2,H),me=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(Be){return l.transformMat4([],Be,B)}).map(function(Be){return l.scale$1([],Be,1/Be[3]/G*te)}),Le=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(Be){var qe=l.sub([],me[Be[0]],me[Be[1]]),et=l.sub([],me[Be[2]],me[Be[1]]),mt=l.normalize([],l.cross([],qe,et)),bt=-l.dot(mt,me[Be[1]]);return mt.concat(bt)});return new wo(me,Le)};var To=function(B,G){this.min=B,this.max=G,this.center=l.scale$2([],l.add([],this.min,this.max),.5)};To.prototype.quadrant=function(B){for(var G=[B%2==0,B<2],H=l.clone$2(this.min),te=l.clone$2(this.max),me=0;me<G.length;me++)H[me]=G[me]?this.min[me]:this.center[me],te[me]=G[me]?this.center[me]:this.max[me];return te[2]=this.max[2],new To(H,te)},To.prototype.distanceX=function(B){return Math.max(Math.min(this.max[0],B[0]),this.min[0])-B[0]},To.prototype.distanceY=function(B){return Math.max(Math.min(this.max[1],B[1]),this.min[1])-B[1]},To.prototype.intersects=function(B){for(var G=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],H=!0,te=0;te<B.planes.length;te++){for(var me=B.planes[te],Le=0,Be=0;Be<G.length;Be++)Le+=l.dot$1(me,G[Be])>=0;if(Le===0)return 0;Le!==G.length&&(H=!1)}if(H)return 2;for(var qe=0;qe<3;qe++){for(var et=Number.MAX_VALUE,mt=-Number.MAX_VALUE,bt=0;bt<B.points.length;bt++){var ee=B.points[bt][qe]-this.min[qe];et=Math.min(et,ee),mt=Math.max(mt,ee)}if(mt<0||et>this.max[qe]-this.min[qe])return 0}return 1};var Yi=function(B,G,H,te){if(B===void 0&&(B=0),G===void 0&&(G=0),H===void 0&&(H=0),te===void 0&&(te=0),isNaN(B)||B<0||isNaN(G)||G<0||isNaN(H)||H<0||isNaN(te)||te<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=B,this.bottom=G,this.left=H,this.right=te};Yi.prototype.interpolate=function(B,G,H){return G.top!=null&&B.top!=null&&(this.top=l.number(B.top,G.top,H)),G.bottom!=null&&B.bottom!=null&&(this.bottom=l.number(B.bottom,G.bottom,H)),G.left!=null&&B.left!=null&&(this.left=l.number(B.left,G.left,H)),G.right!=null&&B.right!=null&&(this.right=l.number(B.right,G.right,H)),this},Yi.prototype.getCenter=function(B,G){var H=l.clamp((this.left+B-this.right)/2,0,B),te=l.clamp((this.top+G-this.bottom)/2,0,G);return new l.Point(H,te)},Yi.prototype.equals=function(B){return this.top===B.top&&this.bottom===B.bottom&&this.left===B.left&&this.right===B.right},Yi.prototype.clone=function(){return new Yi(this.top,this.bottom,this.left,this.right)},Yi.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Xr=function(B,G,H,te,me){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=me===void 0||me,this._minZoom=B||0,this._maxZoom=G||22,this._minPitch=H??0,this._maxPitch=te??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Yi,this._posMatrixCache={},this._alignedPosMatrixCache={}},Kr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Xr.prototype.clone=function(){var B=new Xr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return B.tileSize=this.tileSize,B.latRange=this.latRange,B.width=this.width,B.height=this.height,B._center=this._center,B.zoom=this.zoom,B.angle=this.angle,B._fov=this._fov,B._pitch=this._pitch,B._unmodified=this._unmodified,B._edgeInsets=this._edgeInsets.clone(),B._calcMatrices(),B},Kr.minZoom.get=function(){return this._minZoom},Kr.minZoom.set=function(B){this._minZoom!==B&&(this._minZoom=B,this.zoom=Math.max(this.zoom,B))},Kr.maxZoom.get=function(){return this._maxZoom},Kr.maxZoom.set=function(B){this._maxZoom!==B&&(this._maxZoom=B,this.zoom=Math.min(this.zoom,B))},Kr.minPitch.get=function(){return this._minPitch},Kr.minPitch.set=function(B){this._minPitch!==B&&(this._minPitch=B,this.pitch=Math.max(this.pitch,B))},Kr.maxPitch.get=function(){return this._maxPitch},Kr.maxPitch.set=function(B){this._maxPitch!==B&&(this._maxPitch=B,this.pitch=Math.min(this.pitch,B))},Kr.renderWorldCopies.get=function(){return this._renderWorldCopies},Kr.renderWorldCopies.set=function(B){B===void 0?B=!0:B===null&&(B=!1),this._renderWorldCopies=B},Kr.worldSize.get=function(){return this.tileSize*this.scale},Kr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Kr.size.get=function(){return new l.Point(this.width,this.height)},Kr.bearing.get=function(){return-this.angle/Math.PI*180},Kr.bearing.set=function(B){var G=-l.wrap(B,-180,180)*Math.PI/180;this.angle!==G&&(this._unmodified=!1,this.angle=G,this._calcMatrices(),this.rotationMatrix=l.create$2(),l.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Kr.pitch.get=function(){return this._pitch/Math.PI*180},Kr.pitch.set=function(B){var G=l.clamp(B,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==G&&(this._unmodified=!1,this._pitch=G,this._calcMatrices())},Kr.fov.get=function(){return this._fov/Math.PI*180},Kr.fov.set=function(B){B=Math.max(.01,Math.min(60,B)),this._fov!==B&&(this._unmodified=!1,this._fov=B/180*Math.PI,this._calcMatrices())},Kr.zoom.get=function(){return this._zoom},Kr.zoom.set=function(B){var G=Math.min(Math.max(B,this.minZoom),this.maxZoom);this._zoom!==G&&(this._unmodified=!1,this._zoom=G,this.scale=this.zoomScale(G),this.tileZoom=Math.floor(G),this.zoomFraction=G-this.tileZoom,this._constrain(),this._calcMatrices())},Kr.center.get=function(){return this._center},Kr.center.set=function(B){B.lat===this._center.lat&&B.lng===this._center.lng||(this._unmodified=!1,this._center=B,this._constrain(),this._calcMatrices())},Kr.padding.get=function(){return this._edgeInsets.toJSON()},Kr.padding.set=function(B){this._edgeInsets.equals(B)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,B,1),this._calcMatrices())},Kr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Xr.prototype.isPaddingEqual=function(B){return this._edgeInsets.equals(B)},Xr.prototype.interpolatePadding=function(B,G,H){this._unmodified=!1,this._edgeInsets.interpolate(B,G,H),this._constrain(),this._calcMatrices()},Xr.prototype.coveringZoomLevel=function(B){var G=(B.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/B.tileSize));return Math.max(0,G)},Xr.prototype.getVisibleUnwrappedCoordinates=function(B){var G=[new l.UnwrappedTileID(0,B)];if(this._renderWorldCopies)for(var H=this.pointCoordinate(new l.Point(0,0)),te=this.pointCoordinate(new l.Point(this.width,0)),me=this.pointCoordinate(new l.Point(this.width,this.height)),Le=this.pointCoordinate(new l.Point(0,this.height)),Be=Math.floor(Math.min(H.x,te.x,me.x,Le.x)),qe=Math.floor(Math.max(H.x,te.x,me.x,Le.x)),et=Be-1;et<=qe+1;et++)et!==0&&G.push(new l.UnwrappedTileID(et,B));return G},Xr.prototype.coveringTiles=function(B){var G=this.coveringZoomLevel(B),H=G;if(B.minzoom!==void 0&&G<B.minzoom)return[];B.maxzoom!==void 0&&G>B.maxzoom&&(G=B.maxzoom);var te=l.MercatorCoordinate.fromLngLat(this.center),me=Math.pow(2,G),Le=[me*te.x,me*te.y,0],Be=wo.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,G),qe=B.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(qe=G);var et=function(Xt){return{aabb:new To([Xt*me,0,0],[(Xt+1)*me,me,0]),zoom:0,x:0,y:0,wrap:Xt,fullyVisible:!1}},mt=[],bt=[],ee=G,he=B.reparseOverscaled?H:G;if(this._renderWorldCopies)for(var Me=1;Me<=3;Me++)mt.push(et(-Me)),mt.push(et(Me));for(mt.push(et(0));mt.length>0;){var Oe=mt.pop(),Fe=Oe.x,Ue=Oe.y,Ge=Oe.fullyVisible;if(!Ge){var Je=Oe.aabb.intersects(Be);if(Je===0)continue;Ge=Je===2}var rt=Oe.aabb.distanceX(Le),ct=Oe.aabb.distanceY(Le),Ct=Math.max(Math.abs(rt),Math.abs(ct)),Dt=3+(1<<ee-Oe.zoom)-2;if(Oe.zoom===ee||Ct>Dt&&Oe.zoom>=qe)bt.push({tileID:new l.OverscaledTileID(Oe.zoom===ee?he:Oe.zoom,Oe.wrap,Oe.zoom,Fe,Ue),distanceSq:l.sqrLen([Le[0]-.5-Fe,Le[1]-.5-Ue])});else for(var Ft=0;Ft<4;Ft++){var Wt=(Fe<<1)+Ft%2,cn=(Ue<<1)+(Ft>>1);mt.push({aabb:Oe.aabb.quadrant(Ft),zoom:Oe.zoom+1,x:Wt,y:cn,wrap:Oe.wrap,fullyVisible:Ge})}}return bt.sort(function(Xt,tn){return Xt.distanceSq-tn.distanceSq}).map(function(Xt){return Xt.tileID})},Xr.prototype.resize=function(B,G){this.width=B,this.height=G,this.pixelsToGLUnits=[2/B,-2/G],this._constrain(),this._calcMatrices()},Kr.unmodified.get=function(){return this._unmodified},Xr.prototype.zoomScale=function(B){return Math.pow(2,B)},Xr.prototype.scaleZoom=function(B){return Math.log(B)/Math.LN2},Xr.prototype.project=function(B){var G=l.clamp(B.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.Point(l.mercatorXfromLng(B.lng)*this.worldSize,l.mercatorYfromLat(G)*this.worldSize)},Xr.prototype.unproject=function(B){return new l.MercatorCoordinate(B.x/this.worldSize,B.y/this.worldSize).toLngLat()},Kr.point.get=function(){return this.project(this.center)},Xr.prototype.setLocationAtPoint=function(B,G){var H=this.pointCoordinate(G),te=this.pointCoordinate(this.centerPoint),me=this.locationCoordinate(B),Le=new l.MercatorCoordinate(me.x-(H.x-te.x),me.y-(H.y-te.y));this.center=this.coordinateLocation(Le),this._renderWorldCopies&&(this.center=this.center.wrap())},Xr.prototype.locationPoint=function(B){return this.coordinatePoint(this.locationCoordinate(B))},Xr.prototype.pointLocation=function(B){return this.coordinateLocation(this.pointCoordinate(B))},Xr.prototype.locationCoordinate=function(B){return l.MercatorCoordinate.fromLngLat(B)},Xr.prototype.coordinateLocation=function(B){return B.toLngLat()},Xr.prototype.pointCoordinate=function(B){var G=[B.x,B.y,0,1],H=[B.x,B.y,1,1];l.transformMat4(G,G,this.pixelMatrixInverse),l.transformMat4(H,H,this.pixelMatrixInverse);var te=G[3],me=H[3],Le=G[0]/te,Be=H[0]/me,qe=G[1]/te,et=H[1]/me,mt=G[2]/te,bt=H[2]/me,ee=mt===bt?0:(0-mt)/(bt-mt);return new l.MercatorCoordinate(l.number(Le,Be,ee)/this.worldSize,l.number(qe,et,ee)/this.worldSize)},Xr.prototype.coordinatePoint=function(B){var G=[B.x*this.worldSize,B.y*this.worldSize,0,1];return l.transformMat4(G,G,this.pixelMatrix),new l.Point(G[0]/G[3],G[1]/G[3])},Xr.prototype.getBounds=function(){return new l.LngLatBounds().extend(this.pointLocation(new l.Point(0,0))).extend(this.pointLocation(new l.Point(this.width,0))).extend(this.pointLocation(new l.Point(this.width,this.height))).extend(this.pointLocation(new l.Point(0,this.height)))},Xr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Xr.prototype.setMaxBounds=function(B){B?(this.lngRange=[B.getWest(),B.getEast()],this.latRange=[B.getSouth(),B.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Xr.prototype.calculatePosMatrix=function(B,G){G===void 0&&(G=!1);var H=B.key,te=G?this._alignedPosMatrixCache:this._posMatrixCache;if(te[H])return te[H];var me=B.canonical,Le=this.worldSize/this.zoomScale(me.z),Be=me.x+Math.pow(2,me.z)*B.wrap,qe=l.identity(new Float64Array(16));return l.translate(qe,qe,[Be*Le,me.y*Le,0]),l.scale(qe,qe,[Le/l.EXTENT,Le/l.EXTENT,1]),l.multiply(qe,G?this.alignedProjMatrix:this.projMatrix,qe),te[H]=new Float32Array(qe),te[H]},Xr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Xr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var B,G,H,te,me=-90,Le=90,Be=-180,qe=180,et=this.size,mt=this._unmodified;if(this.latRange){var bt=this.latRange;me=l.mercatorYfromLat(bt[1])*this.worldSize,B=(Le=l.mercatorYfromLat(bt[0])*this.worldSize)-me<et.y?et.y/(Le-me):0}if(this.lngRange){var ee=this.lngRange;Be=l.mercatorXfromLng(ee[0])*this.worldSize,G=(qe=l.mercatorXfromLng(ee[1])*this.worldSize)-Be<et.x?et.x/(qe-Be):0}var he=this.point,Me=Math.max(G||0,B||0);if(Me)return this.center=this.unproject(new l.Point(G?(qe+Be)/2:he.x,B?(Le+me)/2:he.y)),this.zoom+=this.scaleZoom(Me),this._unmodified=mt,void(this._constraining=!1);if(this.latRange){var Oe=he.y,Fe=et.y/2;Oe-Fe<me&&(te=me+Fe),Oe+Fe>Le&&(te=Le-Fe)}if(this.lngRange){var Ue=he.x,Ge=et.x/2;Ue-Ge<Be&&(H=Be+Ge),Ue+Ge>qe&&(H=qe-Ge)}H===void 0&&te===void 0||(this.center=this.unproject(new l.Point(H!==void 0?H:he.x,te!==void 0?te:he.y))),this._unmodified=mt,this._constraining=!1}},Xr.prototype._calcMatrices=function(){if(this.height){var B=this._fov/2,G=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(B)*this.height;var H=Math.PI/2+this._pitch,te=this._fov*(.5+G.y/this.height),me=Math.sin(te)*this.cameraToCenterDistance/Math.sin(l.clamp(Math.PI-H-te,.01,Math.PI-.01)),Le=this.point,Be=Le.x,qe=Le.y,et=1.01*(Math.cos(Math.PI/2-this._pitch)*me+this.cameraToCenterDistance),mt=this.height/50,bt=new Float64Array(16);l.perspective(bt,this._fov,this.width/this.height,mt,et),bt[8]=2*-G.x/this.width,bt[9]=2*G.y/this.height,l.scale(bt,bt,[1,-1,1]),l.translate(bt,bt,[0,0,-this.cameraToCenterDistance]),l.rotateX(bt,bt,this._pitch),l.rotateZ(bt,bt,this.angle),l.translate(bt,bt,[-Be,-qe,0]),this.mercatorMatrix=l.scale([],bt,[this.worldSize,this.worldSize,this.worldSize]),l.scale(bt,bt,[1,1,l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=bt,this.invProjMatrix=l.invert([],this.projMatrix);var ee=this.width%2/2,he=this.height%2/2,Me=Math.cos(this.angle),Oe=Math.sin(this.angle),Fe=Be-Math.round(Be)+Me*ee+Oe*he,Ue=qe-Math.round(qe)+Me*he+Oe*ee,Ge=new Float64Array(bt);if(l.translate(Ge,Ge,[Fe>.5?Fe-1:Fe,Ue>.5?Ue-1:Ue,0]),this.alignedProjMatrix=Ge,bt=l.create(),l.scale(bt,bt,[this.width/2,-this.height/2,1]),l.translate(bt,bt,[1,-1,0]),this.labelPlaneMatrix=bt,bt=l.create(),l.scale(bt,bt,[1,-1,1]),l.translate(bt,bt,[-1,-1,0]),l.scale(bt,bt,[2/this.width,2/this.height,1]),this.glCoordMatrix=bt,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(bt=l.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=bt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Xr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var B=this.pointCoordinate(new l.Point(0,0)),G=[B.x*this.worldSize,B.y*this.worldSize,0,1];return l.transformMat4(G,G,this.pixelMatrix)[3]/this.cameraToCenterDistance},Xr.prototype.getCameraPoint=function(){var B=this._pitch,G=Math.tan(B)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,G))},Xr.prototype.getCameraQueryGeometry=function(B){var G=this.getCameraPoint();if(B.length===1)return[B[0],G];for(var H=G.x,te=G.y,me=G.x,Le=G.y,Be=0,qe=B;Be<qe.length;Be+=1){var et=qe[Be];H=Math.min(H,et.x),te=Math.min(te,et.y),me=Math.max(me,et.x),Le=Math.max(Le,et.y)}return[new l.Point(H,te),new l.Point(me,te),new l.Point(me,Le),new l.Point(H,Le),new l.Point(H,te)]},Object.defineProperties(Xr.prototype,Kr);var lo=function(B){var G,H,te,me,Le;this._hashName=B&&encodeURIComponent(B),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(G=this._updateHashUnthrottled.bind(this),H=300,te=!1,me=null,Le=function(){me=null,te&&(G(),me=setTimeout(Le,H),te=!1)},function(){return te=!0,me||Le(),me})};lo.prototype.addTo=function(B){return this._map=B,l.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},lo.prototype.remove=function(){return l.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},lo.prototype.getHashString=function(B){var G=this._map.getCenter(),H=Math.round(100*this._map.getZoom())/100,te=Math.ceil((H*Math.LN2+Math.log(512/360/.5))/Math.LN10),me=Math.pow(10,te),Le=Math.round(G.lng*me)/me,Be=Math.round(G.lat*me)/me,qe=this._map.getBearing(),et=this._map.getPitch(),mt="";if(mt+=B?"/"+Le+"/"+Be+"/"+H:H+"/"+Be+"/"+Le,(qe||et)&&(mt+="/"+Math.round(10*qe)/10),et&&(mt+="/"+Math.round(et)),this._hashName){var bt=this._hashName,ee=!1,he=l.window.location.hash.slice(1).split("&").map(function(Me){var Oe=Me.split("=")[0];return Oe===bt?(ee=!0,Oe+"="+mt):Me}).filter(function(Me){return Me});return ee||he.push(bt+"="+mt),"#"+he.join("&")}return"#"+mt},lo.prototype._getCurrentHash=function(){var B,G=this,H=l.window.location.hash.replace("#","");return this._hashName?(H.split("&").map(function(te){return te.split("=")}).forEach(function(te){te[0]===G._hashName&&(B=te)}),(B&&B[1]||"").split("/")):H.split("/")},lo.prototype._onHashChange=function(){var B=this._getCurrentHash();if(B.length>=3&&!B.some(function(H){return isNaN(H)})){var G=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(B[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+B[2],+B[1]],zoom:+B[0],bearing:G,pitch:+(B[4]||0)}),!0}return!1},lo.prototype._updateHashUnthrottled=function(){var B=this.getHashString();try{l.window.history.replaceState(l.window.history.state,"",B)}catch{}};var Ja={linearity:.3,easing:l.bezier(0,0,.3,1)},Ls=l.extend({deceleration:2500,maxSpeed:1400},Ja),Js=l.extend({deceleration:20,maxSpeed:1400},Ja),Bo=l.extend({deceleration:1e3,maxSpeed:360},Ja),Ks=l.extend({deceleration:1e3,maxSpeed:90},Ja),No=function(B){this._map=B,this.clear()};function uo(B,G){(!B.duration||B.duration<G.duration)&&(B.duration=G.duration,B.easing=G.easing)}function jo(B,G,H){var te=H.maxSpeed,me=H.linearity,Le=H.deceleration,Be=l.clamp(B*me/(G/1e3),-te,te),qe=Math.abs(Be)/(Le*me);return{easing:H.easing,duration:1e3*qe,amount:Be*(qe/2)}}No.prototype.clear=function(){this._inertiaBuffer=[]},No.prototype.record=function(B){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.browser.now(),settings:B})},No.prototype._drainInertiaBuffer=function(){for(var B=this._inertiaBuffer,G=l.browser.now();B.length>0&&G-B[0].time>160;)B.shift()},No.prototype._onMoveEnd=function(B){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var G={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0},H=0,te=this._inertiaBuffer;H<te.length;H+=1){var me=te[H].settings;G.zoom+=me.zoomDelta||0,G.bearing+=me.bearingDelta||0,G.pitch+=me.pitchDelta||0,me.panDelta&&G.pan._add(me.panDelta),me.around&&(G.around=me.around),me.pinchAround&&(G.pinchAround=me.pinchAround)}var Le=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,Be={};if(G.pan.mag()){var qe=jo(G.pan.mag(),Le,l.extend({},Ls,B||{}));Be.offset=G.pan.mult(qe.amount/G.pan.mag()),Be.center=this._map.transform.center,uo(Be,qe)}if(G.zoom){var et=jo(G.zoom,Le,Js);Be.zoom=this._map.transform.zoom+et.amount,uo(Be,et)}if(G.bearing){var mt=jo(G.bearing,Le,Bo);Be.bearing=this._map.transform.bearing+l.clamp(mt.amount,-179,179),uo(Be,mt)}if(G.pitch){var bt=jo(G.pitch,Le,Ks);Be.pitch=this._map.transform.pitch+bt.amount,uo(Be,bt)}if(Be.zoom||Be.bearing){var ee=G.pinchAround===void 0?G.around:G.pinchAround;Be.around=ee?this._map.unproject(ee):this._map.getCenter()}return this.clear(),l.extend(Be,{noMoveStart:!0})}};var xi=function(B){function G(te,me,Le,Be){Be===void 0&&(Be={});var qe=b.mousePos(me.getCanvasContainer(),Le),et=me.unproject(qe);B.call(this,te,l.extend({point:qe,lngLat:et,originalEvent:Le},Be)),this._defaultPrevented=!1,this.target=me}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var H={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},H.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,H),G}(l.Event),Ka=function(B){function G(te,me,Le){var Be=te==="touchend"?Le.changedTouches:Le.touches,qe=b.touchPos(me.getCanvasContainer(),Be),et=qe.map(function(ee){return me.unproject(ee)}),mt=qe.reduce(function(ee,he,Me,Oe){return ee.add(he.div(Oe.length))},new l.Point(0,0)),bt=me.unproject(mt);B.call(this,te,{points:qe,point:mt,lngLats:et,lngLat:bt,originalEvent:Le}),this._defaultPrevented=!1}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var H={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},H.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,H),G}(l.Event),Uo=function(B){function G(te,me,Le){B.call(this,te,{originalEvent:Le}),this._defaultPrevented=!1}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var H={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},H.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,H),G}(l.Event),zi=function(B,G){this._map=B,this._clickTolerance=G.clickTolerance};zi.prototype.reset=function(){delete this._mousedownPos},zi.prototype.wheel=function(B){return this._firePreventable(new Uo(B.type,this._map,B))},zi.prototype.mousedown=function(B,G){return this._mousedownPos=G,this._firePreventable(new xi(B.type,this._map,B))},zi.prototype.mouseup=function(B){this._map.fire(new xi(B.type,this._map,B))},zi.prototype.click=function(B,G){this._mousedownPos&&this._mousedownPos.dist(G)>=this._clickTolerance||this._map.fire(new xi(B.type,this._map,B))},zi.prototype.dblclick=function(B){return this._firePreventable(new xi(B.type,this._map,B))},zi.prototype.mouseover=function(B){this._map.fire(new xi(B.type,this._map,B))},zi.prototype.mouseout=function(B){this._map.fire(new xi(B.type,this._map,B))},zi.prototype.touchstart=function(B){return this._firePreventable(new Ka(B.type,this._map,B))},zi.prototype.touchmove=function(B){this._map.fire(new Ka(B.type,this._map,B))},zi.prototype.touchend=function(B){this._map.fire(new Ka(B.type,this._map,B))},zi.prototype.touchcancel=function(B){this._map.fire(new Ka(B.type,this._map,B))},zi.prototype._firePreventable=function(B){if(this._map.fire(B),B.defaultPrevented)return{}},zi.prototype.isEnabled=function(){return!0},zi.prototype.isActive=function(){return!1},zi.prototype.enable=function(){},zi.prototype.disable=function(){};var Wi=function(B){this._map=B};Wi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Wi.prototype.mousemove=function(B){this._map.fire(new xi(B.type,this._map,B))},Wi.prototype.mousedown=function(){this._delayContextMenu=!0},Wi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new xi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Wi.prototype.contextmenu=function(B){this._delayContextMenu?this._contextMenuEvent=B:this._map.fire(new xi(B.type,this._map,B)),this._map.listens("contextmenu")&&B.preventDefault()},Wi.prototype.isEnabled=function(){return!0},Wi.prototype.isActive=function(){return!1},Wi.prototype.enable=function(){},Wi.prototype.disable=function(){};var Xi=function(B,G){this._map=B,this._el=B.getCanvasContainer(),this._container=B.getContainer(),this._clickTolerance=G.clickTolerance||1};function Gi(B,G){for(var H={},te=0;te<B.length;te++)H[B[te].identifier]=G[te];return H}Xi.prototype.isEnabled=function(){return!!this._enabled},Xi.prototype.isActive=function(){return!!this._active},Xi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Xi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Xi.prototype.mousedown=function(B,G){this.isEnabled()&&B.shiftKey&&B.button===0&&(b.disableDrag(),this._startPos=this._lastPos=G,this._active=!0)},Xi.prototype.mousemoveWindow=function(B,G){if(this._active){var H=G;if(!(this._lastPos.equals(H)||!this._box&&H.dist(this._startPos)<this._clickTolerance)){var te=this._startPos;this._lastPos=H,this._box||(this._box=b.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",B));var me=Math.min(te.x,H.x),Le=Math.max(te.x,H.x),Be=Math.min(te.y,H.y),qe=Math.max(te.y,H.y);b.setTransform(this._box,"translate("+me+"px,"+Be+"px)"),this._box.style.width=Le-me+"px",this._box.style.height=qe-Be+"px"}}},Xi.prototype.mouseupWindow=function(B,G){var H=this;if(this._active&&B.button===0){var te=this._startPos,me=G;if(this.reset(),b.suppressClick(),te.x!==me.x||te.y!==me.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:B})),{cameraAnimation:function(Le){return Le.fitScreenCoordinates(te,me,H._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",B)}},Xi.prototype.keydown=function(B){this._active&&B.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",B))},Xi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos},Xi.prototype._fireEvent=function(B,G){return this._map.fire(new l.Event(B,{originalEvent:G}))};var ua=function(B){this.reset(),this.numTouches=B.numTouches};ua.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},ua.prototype.touchstart=function(B,G,H){(this.centroid||H.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=B.timeStamp),H.length===this.numTouches&&(this.centroid=function(te){for(var me=new l.Point(0,0),Le=0,Be=te;Le<Be.length;Le+=1){var qe=Be[Le];me._add(qe)}return me.div(te.length)}(G),this.touches=Gi(H,G)))},ua.prototype.touchmove=function(B,G,H){if(!this.aborted&&this.centroid){var te=Gi(H,G);for(var me in this.touches){var Le=this.touches[me],Be=te[me];(!Be||Be.dist(Le)>30)&&(this.aborted=!0)}}},ua.prototype.touchend=function(B,G,H){if((!this.centroid||B.timeStamp-this.startTime>500)&&(this.aborted=!0),H.length===0){var te=!this.aborted&&this.centroid;if(this.reset(),te)return te}};var ko=function(B){this.singleTap=new ua(B),this.numTaps=B.numTaps,this.reset()};ko.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},ko.prototype.touchstart=function(B,G,H){this.singleTap.touchstart(B,G,H)},ko.prototype.touchmove=function(B,G,H){this.singleTap.touchmove(B,G,H)},ko.prototype.touchend=function(B,G,H){var te=this.singleTap.touchend(B,G,H);if(te){var me=B.timeStamp-this.lastTime<500,Le=!this.lastTap||this.lastTap.dist(te)<30;if(me&&Le||this.reset(),this.count++,this.lastTime=B.timeStamp,this.lastTap=te,this.count===this.numTaps)return this.reset(),te}};var za=function(){this._zoomIn=new ko({numTouches:1,numTaps:2}),this._zoomOut=new ko({numTouches:2,numTaps:1}),this.reset()};za.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},za.prototype.touchstart=function(B,G,H){this._zoomIn.touchstart(B,G,H),this._zoomOut.touchstart(B,G,H)},za.prototype.touchmove=function(B,G,H){this._zoomIn.touchmove(B,G,H),this._zoomOut.touchmove(B,G,H)},za.prototype.touchend=function(B,G,H){var te=this,me=this._zoomIn.touchend(B,G,H),Le=this._zoomOut.touchend(B,G,H);return me?(this._active=!0,B.preventDefault(),setTimeout(function(){return te.reset()},0),{cameraAnimation:function(Be){return Be.easeTo({duration:300,zoom:Be.getZoom()+1,around:Be.unproject(me)},{originalEvent:B})}}):Le?(this._active=!0,B.preventDefault(),setTimeout(function(){return te.reset()},0),{cameraAnimation:function(Be){return Be.easeTo({duration:300,zoom:Be.getZoom()-1,around:Be.unproject(Le)},{originalEvent:B})}}):void 0},za.prototype.touchcancel=function(){this.reset()},za.prototype.enable=function(){this._enabled=!0},za.prototype.disable=function(){this._enabled=!1,this.reset()},za.prototype.isEnabled=function(){return this._enabled},za.prototype.isActive=function(){return this._active};var Fi=function(B){this.reset(),this._clickTolerance=B.clickTolerance||1};Fi.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Fi.prototype._correctButton=function(B,G){return!1},Fi.prototype._move=function(B,G){return{}},Fi.prototype.mousedown=function(B,G){if(!this._lastPoint){var H=b.mouseButton(B);this._correctButton(B,H)&&(this._lastPoint=G,this._eventButton=H)}},Fi.prototype.mousemoveWindow=function(B,G){var H=this._lastPoint;if(H&&(B.preventDefault(),this._moved||!(G.dist(H)<this._clickTolerance)))return this._moved=!0,this._lastPoint=G,this._move(H,G)},Fi.prototype.mouseupWindow=function(B){b.mouseButton(B)===this._eventButton&&(this._moved&&b.suppressClick(),this.reset())},Fi.prototype.enable=function(){this._enabled=!0},Fi.prototype.disable=function(){this._enabled=!1,this.reset()},Fi.prototype.isEnabled=function(){return this._enabled},Fi.prototype.isActive=function(){return this._active};var ba=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.mousedown=function(H,te){B.prototype.mousedown.call(this,H,te),this._lastPoint&&(this._active=!0)},G.prototype._correctButton=function(H,te){return te===0&&!H.ctrlKey},G.prototype._move=function(H,te){return{around:te,panDelta:te.sub(H)}},G}(Fi),Cs=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype._correctButton=function(H,te){return te===0&&H.ctrlKey||te===2},G.prototype._move=function(H,te){var me=.8*(te.x-H.x);if(me)return this._active=!0,{bearingDelta:me}},G.prototype.contextmenu=function(H){H.preventDefault()},G}(Fi),Ps=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype._correctButton=function(H,te){return te===0&&H.ctrlKey||te===2},G.prototype._move=function(H,te){var me=-.5*(te.y-H.y);if(me)return this._active=!0,{pitchDelta:me}},G.prototype.contextmenu=function(H){H.preventDefault()},G}(Fi),aa=function(B){this._minTouches=1,this._clickTolerance=B.clickTolerance||1,this.reset()};aa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new l.Point(0,0)},aa.prototype.touchstart=function(B,G,H){return this._calculateTransform(B,G,H)},aa.prototype.touchmove=function(B,G,H){if(this._active)return B.preventDefault(),this._calculateTransform(B,G,H)},aa.prototype.touchend=function(B,G,H){this._calculateTransform(B,G,H),this._active&&H.length<this._minTouches&&this.reset()},aa.prototype.touchcancel=function(){this.reset()},aa.prototype._calculateTransform=function(B,G,H){H.length>0&&(this._active=!0);var te=Gi(H,G),me=new l.Point(0,0),Le=new l.Point(0,0),Be=0;for(var qe in te){var et=te[qe],mt=this._touches[qe];mt&&(me._add(et),Le._add(et.sub(mt)),Be++,te[qe]=et)}if(this._touches=te,!(Be<this._minTouches)&&Le.mag()){var bt=Le.div(Be);if(this._sum._add(bt),!(this._sum.mag()<this._clickTolerance))return{around:me.div(Be),panDelta:bt}}},aa.prototype.enable=function(){this._enabled=!0},aa.prototype.disable=function(){this._enabled=!1,this.reset()},aa.prototype.isEnabled=function(){return this._enabled},aa.prototype.isActive=function(){return this._active};var wr=function(){this.reset()};function Vo(B,G,H){for(var te=0;te<B.length;te++)if(B[te].identifier===H)return G[te]}wr.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},wr.prototype._start=function(B){},wr.prototype._move=function(B,G,H){return{}},wr.prototype.touchstart=function(B,G,H){this._firstTwoTouches||H.length<2||(this._firstTwoTouches=[H[0].identifier,H[1].identifier],this._start([G[0],G[1]]))},wr.prototype.touchmove=function(B,G,H){if(this._firstTwoTouches){B.preventDefault();var te=this._firstTwoTouches,me=te[0],Le=te[1],Be=Vo(H,G,me),qe=Vo(H,G,Le);if(Be&&qe){var et=this._aroundCenter?null:Be.add(qe).div(2);return this._move([Be,qe],et,B)}}},wr.prototype.touchend=function(B,G,H){if(this._firstTwoTouches){var te=this._firstTwoTouches,me=te[0],Le=te[1],Be=Vo(H,G,me),qe=Vo(H,G,Le);Be&&qe||(this._active&&b.suppressClick(),this.reset())}},wr.prototype.touchcancel=function(){this.reset()},wr.prototype.enable=function(B){this._enabled=!0,this._aroundCenter=!!B&&B.around==="center"},wr.prototype.disable=function(){this._enabled=!1,this.reset()},wr.prototype.isEnabled=function(){return this._enabled},wr.prototype.isActive=function(){return this._active};function ca(B,G){return Math.log(B/G)/Math.LN2}var Os=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.reset=function(){B.prototype.reset.call(this),delete this._distance,delete this._startDistance},G.prototype._start=function(H){this._startDistance=this._distance=H[0].dist(H[1])},G.prototype._move=function(H,te){var me=this._distance;if(this._distance=H[0].dist(H[1]),this._active||!(Math.abs(ca(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ca(this._distance,me),pinchAround:te}},G}(wr);function Qo(B,G){return 180*B.angleWith(G)/Math.PI}var es=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.reset=function(){B.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},G.prototype._start=function(H){this._startVector=this._vector=H[0].sub(H[1]),this._minDiameter=H[0].dist(H[1])},G.prototype._move=function(H,te){var me=this._vector;if(this._vector=H[0].sub(H[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Qo(this._vector,me),pinchAround:te}},G.prototype._isBelowThreshold=function(H){this._minDiameter=Math.min(this._minDiameter,H.mag());var te=25/(Math.PI*this._minDiameter)*360,me=Qo(H,this._startVector);return Math.abs(me)<te},G}(wr);function ts(B){return Math.abs(B.y)>Math.abs(B.x)}var Ar=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.reset=function(){B.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},G.prototype._start=function(H){this._lastPoints=H,ts(H[0].sub(H[1]))&&(this._valid=!1)},G.prototype._move=function(H,te,me){var Le=H[0].sub(this._lastPoints[0]),Be=H[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Le,Be,me.timeStamp),this._valid)return this._lastPoints=H,this._active=!0,{pitchDelta:(Le.y+Be.y)/2*-.5}},G.prototype.gestureBeginsVertically=function(H,te,me){if(this._valid!==void 0)return this._valid;var Le=H.mag()>=2,Be=te.mag()>=2;if(Le||Be){if(!Le||!Be)return this._firstMove===void 0&&(this._firstMove=me),me-this._firstMove<100&&void 0;var qe=H.y>0==te.y>0;return ts(H)&&ts(te)&&qe}},G}(wr),ns={panStep:100,bearingStep:15,pitchStep:10},Ra=function(){var B=ns;this._panStep=B.panStep,this._bearingStep=B.bearingStep,this._pitchStep=B.pitchStep};function Is(B){return B*(2-B)}Ra.prototype.reset=function(){this._active=!1},Ra.prototype.keydown=function(B){var G=this;if(!(B.altKey||B.ctrlKey||B.metaKey)){var H=0,te=0,me=0,Le=0,Be=0;switch(B.keyCode){case 61:case 107:case 171:case 187:H=1;break;case 189:case 109:case 173:H=-1;break;case 37:B.shiftKey?te=-1:(B.preventDefault(),Le=-1);break;case 39:B.shiftKey?te=1:(B.preventDefault(),Le=1);break;case 38:B.shiftKey?me=1:(B.preventDefault(),Be=-1);break;case 40:B.shiftKey?me=-1:(B.preventDefault(),Be=1);break;default:return}return{cameraAnimation:function(qe){var et=qe.getZoom();qe.easeTo({duration:300,easeId:"keyboardHandler",easing:Is,zoom:H?Math.round(et)+H*(B.shiftKey?2:1):et,bearing:qe.getBearing()+te*G._bearingStep,pitch:qe.getPitch()+me*G._pitchStep,offset:[-Le*G._panStep,-Be*G._panStep],center:qe.getCenter()},{originalEvent:B})}}}},Ra.prototype.enable=function(){this._enabled=!0},Ra.prototype.disable=function(){this._enabled=!1,this.reset()},Ra.prototype.isEnabled=function(){return this._enabled},Ra.prototype.isActive=function(){return this._active};var ys=4.000244140625,Ji=function(B,G){this._map=B,this._el=B.getCanvasContainer(),this._handler=G,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Ji.prototype.setZoomRate=function(B){this._defaultZoomRate=B},Ji.prototype.setWheelZoomRate=function(B){this._wheelZoomRate=B},Ji.prototype.isEnabled=function(){return!!this._enabled},Ji.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Ji.prototype.isZooming=function(){return!!this._zooming},Ji.prototype.enable=function(B){this.isEnabled()||(this._enabled=!0,this._aroundCenter=B&&B.around==="center")},Ji.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ji.prototype.wheel=function(B){if(this.isEnabled()){var G=B.deltaMode===l.window.WheelEvent.DOM_DELTA_LINE?40*B.deltaY:B.deltaY,H=l.browser.now(),te=H-(this._lastWheelEventTime||0);this._lastWheelEventTime=H,G!==0&&G%ys==0?this._type="wheel":G!==0&&Math.abs(G)<4?this._type="trackpad":te>400?(this._type=null,this._lastValue=G,this._timeout=setTimeout(this._onTimeout,40,B)):this._type||(this._type=Math.abs(te*G)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,G+=this._lastValue)),B.shiftKey&&G&&(G/=4),this._type&&(this._lastWheelEvent=B,this._delta-=G,this._active||this._start(B)),B.preventDefault()}},Ji.prototype._onTimeout=function(B){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(B)},Ji.prototype._start=function(B){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var G=b.mousePos(this._el,B);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(G)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Ji.prototype.renderFrame=function(){return this._onScrollFrame()},Ji.prototype._onScrollFrame=function(){var B=this;if(this._frameId&&(this._frameId=null,this.isActive())){var G=this._map.transform;if(this._delta!==0){var H=this._type==="wheel"&&Math.abs(this._delta)>ys?this._wheelZoomRate:this._defaultZoomRate,te=2/(1+Math.exp(-Math.abs(this._delta*H)));this._delta<0&&te!==0&&(te=1/te);var me=typeof this._targetZoom=="number"?G.zoomScale(this._targetZoom):G.scale;this._targetZoom=Math.min(G.maxZoom,Math.max(G.minZoom,G.scaleZoom(me*te))),this._type==="wheel"&&(this._startZoom=G.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Le,Be=typeof this._targetZoom=="number"?this._targetZoom:G.zoom,qe=this._startZoom,et=this._easing,mt=!1;if(this._type==="wheel"&&qe&&et){var bt=Math.min((l.browser.now()-this._lastWheelEventTime)/200,1),ee=et(bt);Le=l.number(qe,Be,ee),bt<1?this._frameId||(this._frameId=!0):mt=!0}else Le=Be,mt=!0;return this._active=!0,mt&&(this._active=!1,this._finishTimeout=setTimeout(function(){B._zooming=!1,B._handler._triggerRenderFrame(),delete B._targetZoom,delete B._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!mt,zoomDelta:Le-G.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Ji.prototype._smoothOutEasing=function(B){var G=l.ease;if(this._prevEase){var H=this._prevEase,te=(l.browser.now()-H.start)/H.duration,me=H.easing(te+.01)-H.easing(te),Le=.27/Math.sqrt(me*me+1e-4)*.01,Be=Math.sqrt(.0729-Le*Le);G=l.bezier(Le,Be,.25,1)}return this._prevEase={start:l.browser.now(),duration:B,easing:G},G},Ji.prototype.reset=function(){this._active=!1};var Ho=function(B,G){this._clickZoom=B,this._tapZoom=G};Ho.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Ho.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Ho.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Ho.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var co=function(){this.reset()};co.prototype.reset=function(){this._active=!1},co.prototype.dblclick=function(B,G){return B.preventDefault(),{cameraAnimation:function(H){H.easeTo({duration:300,zoom:H.getZoom()+(B.shiftKey?-1:1),around:H.unproject(G)},{originalEvent:B})}}},co.prototype.enable=function(){this._enabled=!0},co.prototype.disable=function(){this._enabled=!1,this.reset()},co.prototype.isEnabled=function(){return this._enabled},co.prototype.isActive=function(){return this._active};var _a=function(){this._tap=new ko({numTouches:1,numTaps:1}),this.reset()};_a.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},_a.prototype.touchstart=function(B,G,H){this._swipePoint||(this._tapTime&&B.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?H.length>0&&(this._swipePoint=G[0],this._swipeTouch=H[0].identifier):this._tap.touchstart(B,G,H))},_a.prototype.touchmove=function(B,G,H){if(this._tapTime){if(this._swipePoint){if(H[0].identifier!==this._swipeTouch)return;var te=G[0],me=te.y-this._swipePoint.y;return this._swipePoint=te,B.preventDefault(),this._active=!0,{zoomDelta:me/128}}}else this._tap.touchmove(B,G,H)},_a.prototype.touchend=function(B,G,H){this._tapTime?this._swipePoint&&H.length===0&&this.reset():this._tap.touchend(B,G,H)&&(this._tapTime=B.timeStamp)},_a.prototype.touchcancel=function(){this.reset()},_a.prototype.enable=function(){this._enabled=!0},_a.prototype.disable=function(){this._enabled=!1,this.reset()},_a.prototype.isEnabled=function(){return this._enabled},_a.prototype.isActive=function(){return this._active};var Ao=function(B,G,H){this._el=B,this._mousePan=G,this._touchPan=H};Ao.prototype.enable=function(B){this._inertiaOptions=B||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Ao.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Ao.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Ao.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Ha=function(B,G,H){this._pitchWithRotate=B.pitchWithRotate,this._mouseRotate=G,this._mousePitch=H};Ha.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Ha.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Ha.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Ha.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Da=function(B,G,H,te){this._el=B,this._touchZoom=G,this._touchRotate=H,this._tapDragZoom=te,this._rotationDisabled=!1,this._enabled=!0};Da.prototype.enable=function(B){this._touchZoom.enable(B),this._rotationDisabled||this._touchRotate.enable(B),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Da.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Da.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Da.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Da.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Da.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var qo=function(B){return B.zoom||B.drag||B.pitch||B.rotate},Ki=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G}(l.Event);function Fa(B){return B.panDelta&&B.panDelta.mag()||B.zoomDelta||B.bearingDelta||B.pitchDelta}var ii=function(B,G){this._map=B,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new No(B),this._bearingSnap=G.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(G),l.bindAll(["handleEvent","handleWindowEvent"],this);var H=this._el;this._listeners=[[H,"touchstart",{passive:!1}],[H,"touchmove",{passive:!1}],[H,"touchend",void 0],[H,"touchcancel",void 0],[H,"mousedown",void 0],[H,"mousemove",void 0],[H,"mouseup",void 0],[l.window.document,"mousemove",{capture:!0}],[l.window.document,"mouseup",void 0],[H,"mouseover",void 0],[H,"mouseout",void 0],[H,"dblclick",void 0],[H,"click",void 0],[H,"keydown",{capture:!1}],[H,"keyup",void 0],[H,"wheel",{passive:!1}],[H,"contextmenu",void 0],[l.window,"blur",void 0]];for(var te=0,me=this._listeners;te<me.length;te+=1){var Le=me[te],Be=Le[0],qe=Le[1],et=Le[2];b.addEventListener(Be,qe,Be===l.window.document?this.handleWindowEvent:this.handleEvent,et)}};ii.prototype.destroy=function(){for(var B=0,G=this._listeners;B<G.length;B+=1){var H=G[B],te=H[0],me=H[1],Le=H[2];b.removeEventListener(te,me,te===l.window.document?this.handleWindowEvent:this.handleEvent,Le)}},ii.prototype._addDefaultHandlers=function(B){var G=this._map,H=G.getCanvasContainer();this._add("mapEvent",new zi(G,B));var te=G.boxZoom=new Xi(G,B);this._add("boxZoom",te);var me=new za,Le=new co;G.doubleClickZoom=new Ho(Le,me),this._add("tapZoom",me),this._add("clickZoom",Le);var Be=new _a;this._add("tapDragZoom",Be);var qe=G.touchPitch=new Ar;this._add("touchPitch",qe);var et=new Cs(B),mt=new Ps(B);G.dragRotate=new Ha(B,et,mt),this._add("mouseRotate",et,["mousePitch"]),this._add("mousePitch",mt,["mouseRotate"]);var bt=new ba(B),ee=new aa(B);G.dragPan=new Ao(H,bt,ee),this._add("mousePan",bt),this._add("touchPan",ee,["touchZoom","touchRotate"]);var he=new es,Me=new Os;G.touchZoomRotate=new Da(H,Me,he,Be),this._add("touchRotate",he,["touchPan","touchZoom"]),this._add("touchZoom",Me,["touchPan","touchRotate"]);var Oe=G.scrollZoom=new Ji(G,this);this._add("scrollZoom",Oe,["mousePan"]);var Fe=G.keyboard=new Ra;this._add("keyboard",Fe),this._add("blockableMapEvent",new Wi(G));for(var Ue=0,Ge=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Ue<Ge.length;Ue+=1){var Je=Ge[Ue];B.interactive&&B[Je]&&G[Je].enable(B[Je])}},ii.prototype._add=function(B,G,H){this._handlers.push({handlerName:B,handler:G,allowed:H}),this._handlersById[B]=G},ii.prototype.stop=function(){if(!this._updatingCamera){for(var B=0,G=this._handlers;B<G.length;B+=1)G[B].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},ii.prototype.isActive=function(){for(var B=0,G=this._handlers;B<G.length;B+=1)if(G[B].handler.isActive())return!0;return!1},ii.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ii.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ii.prototype.isMoving=function(){return!!qo(this._eventsInProgress)||this.isZooming()},ii.prototype._blockedByActive=function(B,G,H){for(var te in B)if(te!==H&&(!G||G.indexOf(te)<0))return!0;return!1},ii.prototype.handleWindowEvent=function(B){this.handleEvent(B,B.type+"Window")},ii.prototype._getMapTouches=function(B){for(var G=[],H=0,te=B;H<te.length;H+=1){var me=te[H],Le=me.target;this._el.contains(Le)&&G.push(me)}return G},ii.prototype.handleEvent=function(B,G){if(B.type!=="blur"){this._updatingCamera=!0;for(var H=B.type==="renderFrame"?void 0:B,te={needsRenderFrame:!1},me={},Le={},Be=B.touches?this._getMapTouches(B.touches):void 0,qe=Be?b.touchPos(this._el,Be):b.mousePos(this._el,B),et=0,mt=this._handlers;et<mt.length;et+=1){var bt=mt[et],ee=bt.handlerName,he=bt.handler,Me=bt.allowed;if(he.isEnabled()){var Oe=void 0;this._blockedByActive(Le,Me,ee)?he.reset():he[G||B.type]&&(Oe=he[G||B.type](B,qe,Be),this.mergeHandlerResult(te,me,Oe,ee,H),Oe&&Oe.needsRenderFrame&&this._triggerRenderFrame()),(Oe||he.isActive())&&(Le[ee]=he)}}var Fe={};for(var Ue in this._previousActiveHandlers)Le[Ue]||(Fe[Ue]=H);this._previousActiveHandlers=Le,(Object.keys(Fe).length||Fa(te))&&(this._changes.push([te,me,Fe]),this._triggerRenderFrame()),(Object.keys(Le).length||Fa(te))&&this._map._stop(!0),this._updatingCamera=!1;var Ge=te.cameraAnimation;Ge&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],Ge(this._map))}else this.stop()},ii.prototype.mergeHandlerResult=function(B,G,H,te,me){if(H){l.extend(B,H);var Le={handlerName:te,originalEvent:H.originalEvent||me};H.zoomDelta!==void 0&&(G.zoom=Le),H.panDelta!==void 0&&(G.drag=Le),H.pitchDelta!==void 0&&(G.pitch=Le),H.bearingDelta!==void 0&&(G.rotate=Le)}},ii.prototype._applyChanges=function(){for(var B={},G={},H={},te=0,me=this._changes;te<me.length;te+=1){var Le=me[te],Be=Le[0],qe=Le[1],et=Le[2];Be.panDelta&&(B.panDelta=(B.panDelta||new l.Point(0,0))._add(Be.panDelta)),Be.zoomDelta&&(B.zoomDelta=(B.zoomDelta||0)+Be.zoomDelta),Be.bearingDelta&&(B.bearingDelta=(B.bearingDelta||0)+Be.bearingDelta),Be.pitchDelta&&(B.pitchDelta=(B.pitchDelta||0)+Be.pitchDelta),Be.around!==void 0&&(B.around=Be.around),Be.pinchAround!==void 0&&(B.pinchAround=Be.pinchAround),Be.noInertia&&(B.noInertia=Be.noInertia),l.extend(G,qe),l.extend(H,et)}this._updateMapTransform(B,G,H),this._changes=[]},ii.prototype._updateMapTransform=function(B,G,H){var te=this._map,me=te.transform;if(!Fa(B))return this._fireEvents(G,H);var Le=B.panDelta,Be=B.zoomDelta,qe=B.bearingDelta,et=B.pitchDelta,mt=B.around,bt=B.pinchAround;bt!==void 0&&(mt=bt),te._stop(!0),mt=mt||te.transform.centerPoint;var ee=me.pointLocation(Le?mt.sub(Le):mt);qe&&(me.bearing+=qe),et&&(me.pitch+=et),Be&&(me.zoom+=Be),me.setLocationAtPoint(ee,mt),this._map._update(),B.noInertia||this._inertia.record(B),this._fireEvents(G,H)},ii.prototype._fireEvents=function(B,G){var H=this,te=qo(this._eventsInProgress),me=qo(B),Le={};for(var Be in B){var qe=B[Be].originalEvent;this._eventsInProgress[Be]||(Le[Be+"start"]=qe),this._eventsInProgress[Be]=B[Be]}for(var et in!te&&me&&this._fireEvent("movestart",me.originalEvent),Le)this._fireEvent(et,Le[et]);for(var mt in B.rotate&&(this._bearingChanged=!0),me&&this._fireEvent("move",me.originalEvent),B){var bt=B[mt].originalEvent;this._fireEvent(mt,bt)}var ee,he={};for(var Me in this._eventsInProgress){var Oe=this._eventsInProgress[Me],Fe=Oe.handlerName,Ue=Oe.originalEvent;this._handlersById[Fe].isActive()||(delete this._eventsInProgress[Me],ee=G[Fe]||Ue,he[Me+"end"]=ee)}for(var Ge in he)this._fireEvent(Ge,he[Ge]);var Je=qo(this._eventsInProgress);if((te||me)&&!Je){this._updatingCamera=!0;var rt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ct=function(Ct){return Ct!==0&&-H._bearingSnap<Ct&&Ct<H._bearingSnap};rt?(ct(rt.bearing||this._map.getBearing())&&(rt.bearing=0),this._map.easeTo(rt,{originalEvent:ee})):(this._map.fire(new l.Event("moveend",{originalEvent:ee})),ct(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},ii.prototype._fireEvent=function(B,G){this._map.fire(new l.Event(B,G?{originalEvent:G}:{}))},ii.prototype._triggerRenderFrame=function(){var B=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(G){delete B._frameId,B.handleEvent(new Ki("renderFrame",{timeStamp:G})),B._applyChanges()}))};var xs=function(B){function G(H,te){B.call(this),this._moving=!1,this._zooming=!1,this.transform=H,this._bearingSnap=te.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getCenter=function(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)},G.prototype.setCenter=function(H,te){return this.jumpTo({center:H},te)},G.prototype.panBy=function(H,te,me){return H=l.Point.convert(H).mult(-1),this.panTo(this.transform.center,l.extend({offset:H},te),me)},G.prototype.panTo=function(H,te,me){return this.easeTo(l.extend({center:H},te),me)},G.prototype.getZoom=function(){return this.transform.zoom},G.prototype.setZoom=function(H,te){return this.jumpTo({zoom:H},te),this},G.prototype.zoomTo=function(H,te,me){return this.easeTo(l.extend({zoom:H},te),me)},G.prototype.zoomIn=function(H,te){return this.zoomTo(this.getZoom()+1,H,te),this},G.prototype.zoomOut=function(H,te){return this.zoomTo(this.getZoom()-1,H,te),this},G.prototype.getBearing=function(){return this.transform.bearing},G.prototype.setBearing=function(H,te){return this.jumpTo({bearing:H},te),this},G.prototype.getPadding=function(){return this.transform.padding},G.prototype.setPadding=function(H,te){return this.jumpTo({padding:H},te),this},G.prototype.rotateTo=function(H,te,me){return this.easeTo(l.extend({bearing:H},te),me)},G.prototype.resetNorth=function(H,te){return this.rotateTo(0,l.extend({duration:1e3},H),te),this},G.prototype.resetNorthPitch=function(H,te){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},H),te),this},G.prototype.snapToNorth=function(H,te){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(H,te):this},G.prototype.getPitch=function(){return this.transform.pitch},G.prototype.setPitch=function(H,te){return this.jumpTo({pitch:H},te),this},G.prototype.cameraForBounds=function(H,te){return H=l.LngLatBounds.convert(H),this._cameraForBoxAndBearing(H.getNorthWest(),H.getSouthEast(),0,te)},G.prototype._cameraForBoxAndBearing=function(H,te,me,Le){var Be={top:0,bottom:0,right:0,left:0};if(typeof(Le=l.extend({padding:Be,offset:[0,0],maxZoom:this.transform.maxZoom},Le)).padding=="number"){var qe=Le.padding;Le.padding={top:qe,bottom:qe,right:qe,left:qe}}Le.padding=l.extend(Be,Le.padding);var et=this.transform,mt=et.padding,bt=et.project(l.LngLat.convert(H)),ee=et.project(l.LngLat.convert(te)),he=bt.rotate(-me*Math.PI/180),Me=ee.rotate(-me*Math.PI/180),Oe=new l.Point(Math.max(he.x,Me.x),Math.max(he.y,Me.y)),Fe=new l.Point(Math.min(he.x,Me.x),Math.min(he.y,Me.y)),Ue=Oe.sub(Fe),Ge=(et.width-(mt.left+mt.right+Le.padding.left+Le.padding.right))/Ue.x,Je=(et.height-(mt.top+mt.bottom+Le.padding.top+Le.padding.bottom))/Ue.y;if(!(Je<0||Ge<0)){var rt=Math.min(et.scaleZoom(et.scale*Math.min(Ge,Je)),Le.maxZoom),ct=l.Point.convert(Le.offset),Ct=(Le.padding.left-Le.padding.right)/2,Dt=(Le.padding.top-Le.padding.bottom)/2,Ft=new l.Point(ct.x+Ct,ct.y+Dt).mult(et.scale/et.zoomScale(rt));return{center:et.unproject(bt.add(ee).div(2).sub(Ft)),zoom:rt,bearing:me}}l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},G.prototype.fitBounds=function(H,te,me){return this._fitInternal(this.cameraForBounds(H,te),te,me)},G.prototype.fitScreenCoordinates=function(H,te,me,Le,Be){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.Point.convert(H)),this.transform.pointLocation(l.Point.convert(te)),me,Le),Le,Be)},G.prototype._fitInternal=function(H,te,me){return H?(delete(te=l.extend(H,te)).padding,te.linear?this.easeTo(te,me):this.flyTo(te,me)):this},G.prototype.jumpTo=function(H,te){this.stop();var me=this.transform,Le=!1,Be=!1,qe=!1;return"zoom"in H&&me.zoom!==+H.zoom&&(Le=!0,me.zoom=+H.zoom),H.center!==void 0&&(me.center=l.LngLat.convert(H.center)),"bearing"in H&&me.bearing!==+H.bearing&&(Be=!0,me.bearing=+H.bearing),"pitch"in H&&me.pitch!==+H.pitch&&(qe=!0,me.pitch=+H.pitch),H.padding==null||me.isPaddingEqual(H.padding)||(me.padding=H.padding),this.fire(new l.Event("movestart",te)).fire(new l.Event("move",te)),Le&&this.fire(new l.Event("zoomstart",te)).fire(new l.Event("zoom",te)).fire(new l.Event("zoomend",te)),Be&&this.fire(new l.Event("rotatestart",te)).fire(new l.Event("rotate",te)).fire(new l.Event("rotateend",te)),qe&&this.fire(new l.Event("pitchstart",te)).fire(new l.Event("pitch",te)).fire(new l.Event("pitchend",te)),this.fire(new l.Event("moveend",te))},G.prototype.easeTo=function(H,te){var me=this;this._stop(!1,H.easeId),((H=l.extend({offset:[0,0],duration:500,easing:l.ease},H)).animate===!1||!H.essential&&l.browser.prefersReducedMotion)&&(H.duration=0);var Le=this.transform,Be=this.getZoom(),qe=this.getBearing(),et=this.getPitch(),mt=this.getPadding(),bt="zoom"in H?+H.zoom:Be,ee="bearing"in H?this._normalizeBearing(H.bearing,qe):qe,he="pitch"in H?+H.pitch:et,Me="padding"in H?H.padding:Le.padding,Oe=l.Point.convert(H.offset),Fe=Le.centerPoint.add(Oe),Ue=Le.pointLocation(Fe),Ge=l.LngLat.convert(H.center||Ue);this._normalizeCenter(Ge);var Je,rt,ct=Le.project(Ue),Ct=Le.project(Ge).sub(ct),Dt=Le.zoomScale(bt-Be);H.around&&(Je=l.LngLat.convert(H.around),rt=Le.locationPoint(Je));var Ft={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||bt!==Be,this._rotating=this._rotating||qe!==ee,this._pitching=this._pitching||he!==et,this._padding=!Le.isPaddingEqual(Me),this._easeId=H.easeId,this._prepareEase(te,H.noMoveStart,Ft),clearTimeout(this._easeEndTimeoutID),this._ease(function(Wt){if(me._zooming&&(Le.zoom=l.number(Be,bt,Wt)),me._rotating&&(Le.bearing=l.number(qe,ee,Wt)),me._pitching&&(Le.pitch=l.number(et,he,Wt)),me._padding&&(Le.interpolatePadding(mt,Me,Wt),Fe=Le.centerPoint.add(Oe)),Je)Le.setLocationAtPoint(Je,rt);else{var cn=Le.zoomScale(Le.zoom-Be),Xt=bt>Be?Math.min(2,Dt):Math.max(.5,Dt),tn=Math.pow(Xt,1-Wt),$t=Le.unproject(ct.add(Ct.mult(Wt*tn)).mult(cn));Le.setLocationAtPoint(Le.renderWorldCopies?$t.wrap():$t,Fe)}me._fireMoveEvents(te)},function(Wt){me._afterEase(te,Wt)},H),this},G.prototype._prepareEase=function(H,te,me){me===void 0&&(me={}),this._moving=!0,te||me.moving||this.fire(new l.Event("movestart",H)),this._zooming&&!me.zooming&&this.fire(new l.Event("zoomstart",H)),this._rotating&&!me.rotating&&this.fire(new l.Event("rotatestart",H)),this._pitching&&!me.pitching&&this.fire(new l.Event("pitchstart",H))},G.prototype._fireMoveEvents=function(H){this.fire(new l.Event("move",H)),this._zooming&&this.fire(new l.Event("zoom",H)),this._rotating&&this.fire(new l.Event("rotate",H)),this._pitching&&this.fire(new l.Event("pitch",H))},G.prototype._afterEase=function(H,te){if(!this._easeId||!te||this._easeId!==te){delete this._easeId;var me=this._zooming,Le=this._rotating,Be=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,me&&this.fire(new l.Event("zoomend",H)),Le&&this.fire(new l.Event("rotateend",H)),Be&&this.fire(new l.Event("pitchend",H)),this.fire(new l.Event("moveend",H))}},G.prototype.flyTo=function(H,te){var me=this;if(!H.essential&&l.browser.prefersReducedMotion){var Le=l.pick(H,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Le,te)}this.stop(),H=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},H);var Be=this.transform,qe=this.getZoom(),et=this.getBearing(),mt=this.getPitch(),bt=this.getPadding(),ee="zoom"in H?l.clamp(+H.zoom,Be.minZoom,Be.maxZoom):qe,he="bearing"in H?this._normalizeBearing(H.bearing,et):et,Me="pitch"in H?+H.pitch:mt,Oe="padding"in H?H.padding:Be.padding,Fe=Be.zoomScale(ee-qe),Ue=l.Point.convert(H.offset),Ge=Be.centerPoint.add(Ue),Je=Be.pointLocation(Ge),rt=l.LngLat.convert(H.center||Je);this._normalizeCenter(rt);var ct=Be.project(Je),Ct=Be.project(rt).sub(ct),Dt=H.curve,Ft=Math.max(Be.width,Be.height),Wt=Ft/Fe,cn=Ct.mag();if("minZoom"in H){var Xt=l.clamp(Math.min(H.minZoom,qe,ee),Be.minZoom,Be.maxZoom),tn=Ft/Be.zoomScale(Xt-qe);Dt=Math.sqrt(tn/cn*2)}var $t=Dt*Dt;function _n(fr){var gr=(Wt*Wt-Ft*Ft+(fr?-1:1)*$t*$t*cn*cn)/(2*(fr?Wt:Ft)*$t*cn);return Math.log(Math.sqrt(gr*gr+1)-gr)}function dn(fr){return(Math.exp(fr)-Math.exp(-fr))/2}function Qt(fr){return(Math.exp(fr)+Math.exp(-fr))/2}var Cn=_n(0),Dn=function(fr){return Qt(Cn)/Qt(Cn+Dt*fr)},Jn=function(fr){return Ft*((Qt(Cn)*(dn(gr=Cn+Dt*fr)/Qt(gr))-dn(Cn))/$t)/cn;var gr},Kn=(_n(1)-Cn)/Dt;if(Math.abs(cn)<1e-6||!isFinite(Kn)){if(Math.abs(Ft-Wt)<1e-6)return this.easeTo(H,te);var vr=Wt<Ft?-1:1;Kn=Math.abs(Math.log(Wt/Ft))/Dt,Jn=function(){return 0},Dn=function(fr){return Math.exp(vr*Dt*fr)}}if("duration"in H)H.duration=+H.duration;else{var yr="screenSpeed"in H?+H.screenSpeed/Dt:+H.speed;H.duration=1e3*Kn/yr}return H.maxDuration&&H.duration>H.maxDuration&&(H.duration=0),this._zooming=!0,this._rotating=et!==he,this._pitching=Me!==mt,this._padding=!Be.isPaddingEqual(Oe),this._prepareEase(te,!1),this._ease(function(fr){var gr=fr*Kn,Sr=1/Dn(gr);Be.zoom=fr===1?ee:qe+Be.scaleZoom(Sr),me._rotating&&(Be.bearing=l.number(et,he,fr)),me._pitching&&(Be.pitch=l.number(mt,Me,fr)),me._padding&&(Be.interpolatePadding(bt,Oe,fr),Ge=Be.centerPoint.add(Ue));var Vr=fr===1?rt:Be.unproject(ct.add(Ct.mult(Jn(gr))).mult(Sr));Be.setLocationAtPoint(Be.renderWorldCopies?Vr.wrap():Vr,Ge),me._fireMoveEvents(te)},function(){return me._afterEase(te)},H),this},G.prototype.isEasing=function(){return!!this._easeFrameId},G.prototype.stop=function(){return this._stop()},G.prototype._stop=function(H,te){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var me=this._onEaseEnd;delete this._onEaseEnd,me.call(this,te)}if(!H){var Le=this.handlers;Le&&Le.stop()}return this},G.prototype._ease=function(H,te,me){me.animate===!1||me.duration===0?(H(1),te()):(this._easeStart=l.browser.now(),this._easeOptions=me,this._onEaseFrame=H,this._onEaseEnd=te,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},G.prototype._renderFrameCallback=function(){var H=Math.min((l.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(H)),H<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},G.prototype._normalizeBearing=function(H,te){H=l.wrap(H,-180,180);var me=Math.abs(H-te);return Math.abs(H-360-te)<me&&(H-=360),Math.abs(H+360-te)<me&&(H+=360),H},G.prototype._normalizeCenter=function(H){var te=this.transform;if(te.renderWorldCopies&&!te.lngRange){var me=H.lng-te.center.lng;H.lng+=me>180?-360:me<-180?360:0}},G}(l.Evented),Ea=function(B){B===void 0&&(B={}),this.options=B,l.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Ea.prototype.getDefaultPosition=function(){return"bottom-right"},Ea.prototype.onAdd=function(B){var G=this.options&&this.options.compact;return this._map=B,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=b.create("div","mapboxgl-ctrl-attrib-inner",this._container),G&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),G===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ea.prototype.onRemove=function(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Ea.prototype._updateEditLink=function(){var B=this._editLink;B||(B=this._editLink=this._container.querySelector(".mapbox-improve-map"));var G=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||l.config.ACCESS_TOKEN}];if(B){var H=G.reduce(function(te,me,Le){return me.value&&(te+=me.key+"="+me.value+(Le<G.length-1?"&":"")),te},"?");B.href=l.config.FEEDBACK_URL+"/"+H+(this._map._hash?this._map._hash.getHashString(!0):""),B.rel="noopener nofollow"}},Ea.prototype._updateData=function(B){!B||B.sourceDataType!=="metadata"&&B.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Ea.prototype._updateAttributions=function(){if(this._map.style){var B=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?B=B.concat(this.options.customAttribution.map(function(qe){return typeof qe!="string"?"":qe})):typeof this.options.customAttribution=="string"&&B.push(this.options.customAttribution)),this._map.style.stylesheet){var G=this._map.style.stylesheet;this.styleOwner=G.owner,this.styleId=G.id}var H=this._map.style.sourceCaches;for(var te in H){var me=H[te];if(me.used){var Le=me.getSource();Le.attribution&&B.indexOf(Le.attribution)<0&&B.push(Le.attribution)}}B.sort(function(qe,et){return qe.length-et.length});var Be=(B=B.filter(function(qe,et){for(var mt=et+1;mt<B.length;mt++)if(B[mt].indexOf(qe)>=0)return!1;return!0})).join(" | ");Be!==this._attribHTML&&(this._attribHTML=Be,B.length?(this._innerContainer.innerHTML=Be,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Ea.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Ba=function(){l.bindAll(["_updateLogo"],this),l.bindAll(["_updateCompact"],this)};Ba.prototype.onAdd=function(B){this._map=B,this._container=b.create("div","mapboxgl-ctrl");var G=b.create("a","mapboxgl-ctrl-logo");return G.target="_blank",G.rel="noopener nofollow",G.href="https://www.mapbox.com/",G.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),G.setAttribute("rel","noopener nofollow"),this._container.appendChild(G),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Ba.prototype.onRemove=function(){b.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Ba.prototype.getDefaultPosition=function(){return"bottom-left"},Ba.prototype._updateLogo=function(B){B&&B.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Ba.prototype._logoRequired=function(){if(this._map.style){var B=this._map.style.sourceCaches;for(var G in B)if(B[G].getSource().mapbox_logo)return!0;return!1}},Ba.prototype._updateCompact=function(){var B=this._container.children;if(B.length){var G=B[0];this._map.getCanvasContainer().offsetWidth<250?G.classList.add("mapboxgl-compact"):G.classList.remove("mapboxgl-compact")}};var $a=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};$a.prototype.add=function(B){var G=++this._id;return this._queue.push({callback:B,id:G,cancelled:!1}),G},$a.prototype.remove=function(B){for(var G=this._currentlyRunning,H=0,te=G?this._queue.concat(G):this._queue;H<te.length;H+=1){var me=te[H];if(me.id===B)return void(me.cancelled=!0)}},$a.prototype.run=function(B){B===void 0&&(B=0);var G=this._currentlyRunning=this._queue;this._queue=[];for(var H=0,te=G;H<te.length;H+=1){var me=te[H];if(!me.cancelled&&(me.callback(B),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},$a.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var fa={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ri=l.window.HTMLImageElement,Vi=l.window.HTMLElement,qa=l.window.ImageBitmap,ha=60,Qa={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:ha,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Mo=function(B){function G(te){var me=this;if((te=l.extend({},Qa,te)).minZoom!=null&&te.maxZoom!=null&&te.minZoom>te.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(te.minPitch!=null&&te.maxPitch!=null&&te.minPitch>te.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(te.minPitch!=null&&te.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(te.maxPitch!=null&&te.maxPitch>ha)throw new Error("maxPitch must be less than or equal to 60");var Le=new Xr(te.minZoom,te.maxZoom,te.minPitch,te.maxPitch,te.renderWorldCopies);if(B.call(this,Le,te),this._interactive=te.interactive,this._maxTileCacheSize=te.maxTileCacheSize,this._failIfMajorPerformanceCaveat=te.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=te.preserveDrawingBuffer,this._antialias=te.antialias,this._trackResize=te.trackResize,this._bearingSnap=te.bearingSnap,this._refreshExpiredTiles=te.refreshExpiredTiles,this._fadeDuration=te.fadeDuration,this._crossSourceCollisions=te.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=te.collectResourceTiming,this._renderTaskQueue=new $a,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},fa,te.locale),this._requestManager=new l.RequestManager(te.transformRequest,te.accessToken),typeof te.container=="string"){if(this._container=l.window.document.getElementById(te.container),!this._container)throw new Error("Container '"+te.container+"' not found.")}else{if(!(te.container instanceof Vi))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=te.container}if(te.maxBounds&&this.setMaxBounds(te.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return me._update(!1)}),this.on("moveend",function(){return me._update(!1)}),this.on("zoom",function(){return me._update(!0)}),l.window!==void 0&&(l.window.addEventListener("online",this._onWindowOnline,!1),l.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new ii(this,te);var Be=typeof te.hash=="string"&&te.hash||void 0;this._hash=te.hash&&new lo(Be).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:te.center,zoom:te.zoom,bearing:te.bearing,pitch:te.pitch}),te.bounds&&(this.resize(),this.fitBounds(te.bounds,l.extend({},te.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=te.localIdeographFontFamily,te.style&&this.setStyle(te.style,{localIdeographFontFamily:te.localIdeographFontFamily}),te.attributionControl&&this.addControl(new Ea({customAttribution:te.customAttribution})),this.addControl(new Ba,te.logoPosition),this.on("style.load",function(){me.transform.unmodified&&me.jumpTo(me.style.stylesheet)}),this.on("data",function(qe){me._update(qe.dataType==="style"),me.fire(new l.Event(qe.dataType+"data",qe))}),this.on("dataloading",function(qe){me.fire(new l.Event(qe.dataType+"dataloading",qe))})}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var H={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return G.prototype._getMapId=function(){return this._mapId},G.prototype.addControl=function(te,me){if(me===void 0&&te.getDefaultPosition&&(me=te.getDefaultPosition()),me===void 0&&(me="top-right"),!te||!te.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Le=te.onAdd(this);this._controls.push(te);var Be=this._controlPositions[me];return me.indexOf("bottom")!==-1?Be.insertBefore(Le,Be.firstChild):Be.appendChild(Le),this},G.prototype.removeControl=function(te){if(!te||!te.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var me=this._controls.indexOf(te);return me>-1&&this._controls.splice(me,1),te.onRemove(this),this},G.prototype.resize=function(te){var me=this._containerDimensions(),Le=me[0],Be=me[1];this._resizeCanvas(Le,Be),this.transform.resize(Le,Be),this.painter.resize(Le,Be);var qe=!this._moving;return qe&&(this.stop(),this.fire(new l.Event("movestart",te)).fire(new l.Event("move",te))),this.fire(new l.Event("resize",te)),qe&&this.fire(new l.Event("moveend",te)),this},G.prototype.getBounds=function(){return this.transform.getBounds()},G.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},G.prototype.setMaxBounds=function(te){return this.transform.setMaxBounds(l.LngLatBounds.convert(te)),this._update()},G.prototype.setMinZoom=function(te){if((te=te??-2)>=-2&&te<=this.transform.maxZoom)return this.transform.minZoom=te,this._update(),this.getZoom()<te&&this.setZoom(te),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},G.prototype.getMinZoom=function(){return this.transform.minZoom},G.prototype.setMaxZoom=function(te){if((te=te??22)>=this.transform.minZoom)return this.transform.maxZoom=te,this._update(),this.getZoom()>te&&this.setZoom(te),this;throw new Error("maxZoom must be greater than the current minZoom")},G.prototype.getMaxZoom=function(){return this.transform.maxZoom},G.prototype.setMinPitch=function(te){if((te=te??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(te>=0&&te<=this.transform.maxPitch)return this.transform.minPitch=te,this._update(),this.getPitch()<te&&this.setPitch(te),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},G.prototype.getMinPitch=function(){return this.transform.minPitch},G.prototype.setMaxPitch=function(te){if((te=te??ha)>ha)throw new Error("maxPitch must be less than or equal to 60");if(te>=this.transform.minPitch)return this.transform.maxPitch=te,this._update(),this.getPitch()>te&&this.setPitch(te),this;throw new Error("maxPitch must be greater than the current minPitch")},G.prototype.getMaxPitch=function(){return this.transform.maxPitch},G.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},G.prototype.setRenderWorldCopies=function(te){return this.transform.renderWorldCopies=te,this._update()},G.prototype.project=function(te){return this.transform.locationPoint(l.LngLat.convert(te))},G.prototype.unproject=function(te){return this.transform.pointLocation(l.Point.convert(te))},G.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},G.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},G.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},G.prototype._createDelegatedListener=function(te,me,Le){var Be,qe=this;if(te==="mouseenter"||te==="mouseover"){var et=!1;return{layer:me,listener:Le,delegates:{mousemove:function(bt){var ee=qe.getLayer(me)?qe.queryRenderedFeatures(bt.point,{layers:[me]}):[];ee.length?et||(et=!0,Le.call(qe,new xi(te,qe,bt.originalEvent,{features:ee}))):et=!1},mouseout:function(){et=!1}}}}if(te==="mouseleave"||te==="mouseout"){var mt=!1;return{layer:me,listener:Le,delegates:{mousemove:function(bt){(qe.getLayer(me)?qe.queryRenderedFeatures(bt.point,{layers:[me]}):[]).length?mt=!0:mt&&(mt=!1,Le.call(qe,new xi(te,qe,bt.originalEvent)))},mouseout:function(bt){mt&&(mt=!1,Le.call(qe,new xi(te,qe,bt.originalEvent)))}}}}return{layer:me,listener:Le,delegates:(Be={},Be[te]=function(bt){var ee=qe.getLayer(me)?qe.queryRenderedFeatures(bt.point,{layers:[me]}):[];ee.length&&(bt.features=ee,Le.call(qe,bt),delete bt.features)},Be)}},G.prototype.on=function(te,me,Le){if(Le===void 0)return B.prototype.on.call(this,te,me);var Be=this._createDelegatedListener(te,me,Le);for(var qe in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[te]=this._delegatedListeners[te]||[],this._delegatedListeners[te].push(Be),Be.delegates)this.on(qe,Be.delegates[qe]);return this},G.prototype.once=function(te,me,Le){if(Le===void 0)return B.prototype.once.call(this,te,me);var Be=this._createDelegatedListener(te,me,Le);for(var qe in Be.delegates)this.once(qe,Be.delegates[qe]);return this},G.prototype.off=function(te,me,Le){var Be=this;return Le===void 0?B.prototype.off.call(this,te,me):(this._delegatedListeners&&this._delegatedListeners[te]&&function(qe){for(var et=qe[te],mt=0;mt<et.length;mt++){var bt=et[mt];if(bt.layer===me&&bt.listener===Le){for(var ee in bt.delegates)Be.off(ee,bt.delegates[ee]);return et.splice(mt,1),Be}}}(this._delegatedListeners),this)},G.prototype.queryRenderedFeatures=function(te,me){if(!this.style)return[];var Le;if(me!==void 0||te===void 0||te instanceof l.Point||Array.isArray(te)||(me=te,te=void 0),me=me||{},(te=te||[[0,0],[this.transform.width,this.transform.height]])instanceof l.Point||typeof te[0]=="number")Le=[l.Point.convert(te)];else{var Be=l.Point.convert(te[0]),qe=l.Point.convert(te[1]);Le=[Be,new l.Point(qe.x,Be.y),qe,new l.Point(Be.x,qe.y),Be]}return this.style.queryRenderedFeatures(Le,me,this.transform)},G.prototype.querySourceFeatures=function(te,me){return this.style.querySourceFeatures(te,me)},G.prototype.setStyle=function(te,me){return(me=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},me)).diff!==!1&&me.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&te?(this._diffStyle(te,me),this):(this._localIdeographFontFamily=me.localIdeographFontFamily,this._updateStyle(te,me))},G.prototype._getUIString=function(te){var me=this._locale[te];if(me==null)throw new Error("Missing UI string '"+te+"'");return me},G.prototype._updateStyle=function(te,me){return this.style&&(this.style.setEventedParent(null),this.style._remove()),te?(this.style=new ir(this,me||{}),this.style.setEventedParent(this,{style:this.style}),typeof te=="string"?this.style.loadURL(te):this.style.loadJSON(te),this):(delete this.style,this)},G.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new ir(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},G.prototype._diffStyle=function(te,me){var Le=this;if(typeof te=="string"){var Be=this._requestManager.normalizeStyleURL(te),qe=this._requestManager.transformRequest(Be,l.ResourceType.Style);l.getJSON(qe,function(et,mt){et?Le.fire(new l.ErrorEvent(et)):mt&&Le._updateDiff(mt,me)})}else typeof te=="object"&&this._updateDiff(te,me)},G.prototype._updateDiff=function(te,me){try{this.style.setState(te)&&this._update(!0)}catch(Le){l.warnOnce("Unable to perform style diff: "+(Le.message||Le.error||Le)+".  Rebuilding the style from scratch."),this._updateStyle(te,me)}},G.prototype.getStyle=function(){if(this.style)return this.style.serialize()},G.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")},G.prototype.addSource=function(te,me){return this._lazyInitEmptyStyle(),this.style.addSource(te,me),this._update(!0)},G.prototype.isSourceLoaded=function(te){var me=this.style&&this.style.sourceCaches[te];if(me!==void 0)return me.loaded();this.fire(new l.ErrorEvent(new Error("There is no source with ID '"+te+"'")))},G.prototype.areTilesLoaded=function(){var te=this.style&&this.style.sourceCaches;for(var me in te){var Le=te[me]._tiles;for(var Be in Le){var qe=Le[Be];if(qe.state!=="loaded"&&qe.state!=="errored")return!1}}return!0},G.prototype.addSourceType=function(te,me,Le){return this._lazyInitEmptyStyle(),this.style.addSourceType(te,me,Le)},G.prototype.removeSource=function(te){return this.style.removeSource(te),this._update(!0)},G.prototype.getSource=function(te){return this.style.getSource(te)},G.prototype.addImage=function(te,me,Le){Le===void 0&&(Le={});var Be=Le.pixelRatio;Be===void 0&&(Be=1);var qe=Le.sdf;qe===void 0&&(qe=!1);var et=Le.stretchX,mt=Le.stretchY,bt=Le.content;if(this._lazyInitEmptyStyle(),me instanceof ri||qa&&me instanceof qa){var ee=l.browser.getImageData(me),he=ee.width,Me=ee.height,Oe=ee.data;this.style.addImage(te,{data:new l.RGBAImage({width:he,height:Me},Oe),pixelRatio:Be,stretchX:et,stretchY:mt,content:bt,sdf:qe,version:0})}else{if(me.width===void 0||me.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Fe=me.width,Ue=me.height,Ge=me.data,Je=me;this.style.addImage(te,{data:new l.RGBAImage({width:Fe,height:Ue},new Uint8Array(Ge)),pixelRatio:Be,stretchX:et,stretchY:mt,content:bt,sdf:qe,version:0,userImage:Je}),Je.onAdd&&Je.onAdd(this,te)}},G.prototype.updateImage=function(te,me){var Le=this.style.getImage(te);if(!Le)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Be=me instanceof ri||qa&&me instanceof qa?l.browser.getImageData(me):me,qe=Be.width,et=Be.height,mt=Be.data;if(qe===void 0||et===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(qe!==Le.data.width||et!==Le.data.height)return this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var bt=!(me instanceof ri||qa&&me instanceof qa);Le.data.replace(mt,bt),this.style.updateImage(te,Le)},G.prototype.hasImage=function(te){return te?!!this.style.getImage(te):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)},G.prototype.removeImage=function(te){this.style.removeImage(te)},G.prototype.loadImage=function(te,me){l.getImage(this._requestManager.transformRequest(te,l.ResourceType.Image),me)},G.prototype.listImages=function(){return this.style.listImages()},G.prototype.addLayer=function(te,me){return this._lazyInitEmptyStyle(),this.style.addLayer(te,me),this._update(!0)},G.prototype.moveLayer=function(te,me){return this.style.moveLayer(te,me),this._update(!0)},G.prototype.removeLayer=function(te){return this.style.removeLayer(te),this._update(!0)},G.prototype.getLayer=function(te){return this.style.getLayer(te)},G.prototype.setLayerZoomRange=function(te,me,Le){return this.style.setLayerZoomRange(te,me,Le),this._update(!0)},G.prototype.setFilter=function(te,me,Le){return Le===void 0&&(Le={}),this.style.setFilter(te,me,Le),this._update(!0)},G.prototype.getFilter=function(te){return this.style.getFilter(te)},G.prototype.setPaintProperty=function(te,me,Le,Be){return Be===void 0&&(Be={}),this.style.setPaintProperty(te,me,Le,Be),this._update(!0)},G.prototype.getPaintProperty=function(te,me){return this.style.getPaintProperty(te,me)},G.prototype.setLayoutProperty=function(te,me,Le,Be){return Be===void 0&&(Be={}),this.style.setLayoutProperty(te,me,Le,Be),this._update(!0)},G.prototype.getLayoutProperty=function(te,me){return this.style.getLayoutProperty(te,me)},G.prototype.setLight=function(te,me){return me===void 0&&(me={}),this._lazyInitEmptyStyle(),this.style.setLight(te,me),this._update(!0)},G.prototype.getLight=function(){return this.style.getLight()},G.prototype.setFeatureState=function(te,me){return this.style.setFeatureState(te,me),this._update()},G.prototype.removeFeatureState=function(te,me){return this.style.removeFeatureState(te,me),this._update()},G.prototype.getFeatureState=function(te){return this.style.getFeatureState(te)},G.prototype.getContainer=function(){return this._container},G.prototype.getCanvasContainer=function(){return this._canvasContainer},G.prototype.getCanvas=function(){return this._canvas},G.prototype._containerDimensions=function(){var te=0,me=0;return this._container&&(te=this._container.clientWidth||400,me=this._container.clientHeight||300),[te,me]},G.prototype._detectMissingCSS=function(){l.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&l.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},G.prototype._setupContainer=function(){var te=this._container;te.classList.add("mapboxgl-map"),(this._missingCSSCanary=b.create("div","mapboxgl-canary",te)).style.visibility="hidden",this._detectMissingCSS();var me=this._canvasContainer=b.create("div","mapboxgl-canvas-container",te);this._interactive&&me.classList.add("mapboxgl-interactive"),this._canvas=b.create("canvas","mapboxgl-canvas",me),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Le=this._containerDimensions();this._resizeCanvas(Le[0],Le[1]);var Be=this._controlContainer=b.create("div","mapboxgl-control-container",te),qe=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(et){qe[et]=b.create("div","mapboxgl-ctrl-"+et,Be)})},G.prototype._resizeCanvas=function(te,me){var Le=l.browser.devicePixelRatio||1;this._canvas.width=Le*te,this._canvas.height=Le*me,this._canvas.style.width=te+"px",this._canvas.style.height=me+"px"},G.prototype._setupPainter=function(){var te=l.extend({},T.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),me=this._canvas.getContext("webgl",te)||this._canvas.getContext("experimental-webgl",te);me?(this.painter=new si(me,this.transform),l.webpSupported.testSupport(me)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))},G.prototype._contextLost=function(te){te.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:te}))},G.prototype._contextRestored=function(te){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:te}))},G.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},G.prototype._update=function(te){return this.style?(this._styleDirty=this._styleDirty||te,this._sourcesDirty=!0,this.triggerRepaint(),this):this},G.prototype._requestRenderFrame=function(te){return this._update(),this._renderTaskQueue.add(te)},G.prototype._cancelRenderFrame=function(te){this._renderTaskQueue.remove(te)},G.prototype._render=function(te){var me,Le=this,Be=0,qe=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(me=qe.createQueryEXT(),qe.beginQueryEXT(qe.TIME_ELAPSED_EXT,me),Be=l.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(te),!this._removed){var et=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var mt=this.transform.zoom,bt=l.browser.now();this.style.zoomHistory.update(mt,bt);var ee=new l.EvaluationParameters(mt,{now:bt,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),he=ee.crossFadingFactor();he===1&&he===this._crossFadingFactor||(et=!0,this._crossFadingFactor=he),this.style.update(ee)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||et)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Me=l.browser.now()-Be;qe.endQueryEXT(qe.TIME_ELAPSED_EXT,me),setTimeout(function(){var Fe=qe.getQueryObjectEXT(me,qe.QUERY_RESULT_EXT)/1e6;qe.deleteQueryEXT(me),Le.fire(new l.Event("gpu-timing-frame",{cpuTime:Me,gpuTime:Fe}))},50)}if(this.listens("gpu-timing-layer")){var Oe=this.painter.collectGpuTimers();setTimeout(function(){var Fe=Le.painter.queryGpuTimers(Oe);Le.fire(new l.Event("gpu-timing-layer",{layerTimes:Fe}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new l.Event("idle"))),this}},G.prototype.remove=function(){this._hash&&this._hash.remove();for(var te=0,me=this._controls;te<me.length;te+=1)me[te].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),l.window!==void 0&&(l.window.removeEventListener("resize",this._onWindowResize,!1),l.window.removeEventListener("online",this._onWindowOnline,!1));var Le=this.painter.context.gl.getExtension("WEBGL_lose_context");Le&&Le.loseContext(),fo(this._canvasContainer),fo(this._controlContainer),fo(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new l.Event("remove"))},G.prototype.triggerRepaint=function(){var te=this;this.style&&!this._frame&&(this._frame=l.browser.frame(function(me){te._frame=null,te._render(me)}))},G.prototype._onWindowOnline=function(){this._update()},G.prototype._onWindowResize=function(te){this._trackResize&&this.resize({originalEvent:te})._update()},H.showTileBoundaries.get=function(){return!!this._showTileBoundaries},H.showTileBoundaries.set=function(te){this._showTileBoundaries!==te&&(this._showTileBoundaries=te,this._update())},H.showPadding.get=function(){return!!this._showPadding},H.showPadding.set=function(te){this._showPadding!==te&&(this._showPadding=te,this._update())},H.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},H.showCollisionBoxes.set=function(te){this._showCollisionBoxes!==te&&(this._showCollisionBoxes=te,te?this.style._generateCollisionBoxes():this._update())},H.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},H.showOverdrawInspector.set=function(te){this._showOverdrawInspector!==te&&(this._showOverdrawInspector=te,this._update())},H.repaint.get=function(){return!!this._repaint},H.repaint.set=function(te){this._repaint!==te&&(this._repaint=te,this.triggerRepaint())},H.vertices.get=function(){return!!this._vertices},H.vertices.set=function(te){this._vertices=te,this._update()},G.prototype._setCacheLimits=function(te,me){l.setCacheLimits(te,me)},H.version.get=function(){return l.version},Object.defineProperties(G.prototype,H),G}(xs);function fo(B){B.parentNode&&B.parentNode.removeChild(B)}var $i={showCompass:!0,showZoom:!0,visualizePitch:!1},Na=function(B){var G=this;this.options=l.extend({},$i,B),this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(H){return H.preventDefault()}),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(H){return G._map.zoomIn({},{originalEvent:H})}),b.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(H){return G._map.zoomOut({},{originalEvent:H})}),b.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(H){G.options.visualizePitch?G._map.resetNorthPitch({},{originalEvent:H}):G._map.resetNorth({},{originalEvent:H})}),this._compassIcon=b.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Na.prototype._updateZoomButtons=function(){var B=this._map.getZoom();this._zoomInButton.disabled=B===this._map.getMaxZoom(),this._zoomOutButton.disabled=B===this._map.getMinZoom()},Na.prototype._rotateCompassArrow=function(){var B=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=B},Na.prototype.onAdd=function(B){return this._map=B,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Lr(this._map,this._compass,this.options.visualizePitch)),this._container},Na.prototype.onRemove=function(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Na.prototype._createButton=function(B,G){var H=b.create("button",B,this._container);return H.type="button",H.addEventListener("click",G),H},Na.prototype._setButtonTitle=function(B,G){var H=this._map._getUIString("NavigationControl."+G);B.title=H,B.setAttribute("aria-label",H)};var Lr=function(B,G,H){H===void 0&&(H=!1),this._clickTolerance=10,this.element=G,this.mouseRotate=new Cs({clickTolerance:B.dragRotate._mouseRotate._clickTolerance}),this.map=B,H&&(this.mousePitch=new Ps({clickTolerance:B.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),b.addEventListener(G,"mousedown",this.mousedown),b.addEventListener(G,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(G,"touchmove",this.touchmove),b.addEventListener(G,"touchend",this.touchend),b.addEventListener(G,"touchcancel",this.reset)};function Ir(B,G,H){if(B=new l.LngLat(B.lng,B.lat),G){var te=new l.LngLat(B.lng-360,B.lat),me=new l.LngLat(B.lng+360,B.lat),Le=H.locationPoint(B).distSqr(G);H.locationPoint(te).distSqr(G)<Le?B=te:H.locationPoint(me).distSqr(G)<Le&&(B=me)}for(;Math.abs(B.lng-H.center.lng)>180;){var Be=H.locationPoint(B);if(Be.x>=0&&Be.y>=0&&Be.x<=H.width&&Be.y<=H.height)break;B.lng>H.center.lng?B.lng-=360:B.lng+=360}return B}Lr.prototype.down=function(B,G){this.mouseRotate.mousedown(B,G),this.mousePitch&&this.mousePitch.mousedown(B,G),b.disableDrag()},Lr.prototype.move=function(B,G){var H=this.map,te=this.mouseRotate.mousemoveWindow(B,G);if(te&&te.bearingDelta&&H.setBearing(H.getBearing()+te.bearingDelta),this.mousePitch){var me=this.mousePitch.mousemoveWindow(B,G);me&&me.pitchDelta&&H.setPitch(H.getPitch()+me.pitchDelta)}},Lr.prototype.off=function(){var B=this.element;b.removeEventListener(B,"mousedown",this.mousedown),b.removeEventListener(B,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(B,"touchmove",this.touchmove),b.removeEventListener(B,"touchend",this.touchend),b.removeEventListener(B,"touchcancel",this.reset),this.offTemp()},Lr.prototype.offTemp=function(){b.enableDrag(),b.removeEventListener(l.window,"mousemove",this.mousemove),b.removeEventListener(l.window,"mouseup",this.mouseup)},Lr.prototype.mousedown=function(B){this.down(l.extend({},B,{ctrlKey:!0,preventDefault:function(){return B.preventDefault()}}),b.mousePos(this.element,B)),b.addEventListener(l.window,"mousemove",this.mousemove),b.addEventListener(l.window,"mouseup",this.mouseup)},Lr.prototype.mousemove=function(B){this.move(B,b.mousePos(this.element,B))},Lr.prototype.mouseup=function(B){this.mouseRotate.mouseupWindow(B),this.mousePitch&&this.mousePitch.mouseupWindow(B),this.offTemp()},Lr.prototype.touchstart=function(B){B.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,B.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return B.preventDefault()}},this._startPos))},Lr.prototype.touchmove=function(B){B.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,B.targetTouches)[0],this.move({preventDefault:function(){return B.preventDefault()}},this._lastPos))},Lr.prototype.touchend=function(B){B.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Lr.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var rs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ho(B,G,H){var te=B.classList;for(var me in rs)te.remove("mapboxgl-"+H+"-anchor-"+me);te.add("mapboxgl-"+H+"-anchor-"+G)}var Ga,Qi=function(B){function G(H,te){var me=this;if(B.call(this),(H instanceof l.window.HTMLElement||te)&&(H=l.extend({element:H},te)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=H&&H.anchor||"center",this._color=H&&H.color||"#3FB1CE",this._draggable=H&&H.draggable||!1,this._state="inactive",this._rotation=H&&H.rotation||0,this._rotationAlignment=H&&H.rotationAlignment||"auto",this._pitchAlignment=H&&H.pitchAlignment&&H.pitchAlignment!=="auto"?H.pitchAlignment:this._rotationAlignment,H&&H.element)this._element=H.element,this._offset=l.Point.convert(H&&H.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div"),this._element.setAttribute("aria-label","Map marker");var Le=b.createNS("http://www.w3.org/2000/svg","svg");Le.setAttributeNS(null,"display","block"),Le.setAttributeNS(null,"height","41px"),Le.setAttributeNS(null,"width","27px"),Le.setAttributeNS(null,"viewBox","0 0 27 41");var Be=b.createNS("http://www.w3.org/2000/svg","g");Be.setAttributeNS(null,"stroke","none"),Be.setAttributeNS(null,"stroke-width","1"),Be.setAttributeNS(null,"fill","none"),Be.setAttributeNS(null,"fill-rule","evenodd");var qe=b.createNS("http://www.w3.org/2000/svg","g");qe.setAttributeNS(null,"fill-rule","nonzero");var et=b.createNS("http://www.w3.org/2000/svg","g");et.setAttributeNS(null,"transform","translate(3.0, 29.0)"),et.setAttributeNS(null,"fill","#000000");for(var mt=0,bt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];mt<bt.length;mt+=1){var ee=bt[mt],he=b.createNS("http://www.w3.org/2000/svg","ellipse");he.setAttributeNS(null,"opacity","0.04"),he.setAttributeNS(null,"cx","10.5"),he.setAttributeNS(null,"cy","5.80029008"),he.setAttributeNS(null,"rx",ee.rx),he.setAttributeNS(null,"ry",ee.ry),et.appendChild(he)}var Me=b.createNS("http://www.w3.org/2000/svg","g");Me.setAttributeNS(null,"fill",this._color);var Oe=b.createNS("http://www.w3.org/2000/svg","path");Oe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Me.appendChild(Oe);var Fe=b.createNS("http://www.w3.org/2000/svg","g");Fe.setAttributeNS(null,"opacity","0.25"),Fe.setAttributeNS(null,"fill","#000000");var Ue=b.createNS("http://www.w3.org/2000/svg","path");Ue.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Fe.appendChild(Ue);var Ge=b.createNS("http://www.w3.org/2000/svg","g");Ge.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ge.setAttributeNS(null,"fill","#FFFFFF");var Je=b.createNS("http://www.w3.org/2000/svg","g");Je.setAttributeNS(null,"transform","translate(8.0, 8.0)");var rt=b.createNS("http://www.w3.org/2000/svg","circle");rt.setAttributeNS(null,"fill","#000000"),rt.setAttributeNS(null,"opacity","0.25"),rt.setAttributeNS(null,"cx","5.5"),rt.setAttributeNS(null,"cy","5.5"),rt.setAttributeNS(null,"r","5.4999962");var ct=b.createNS("http://www.w3.org/2000/svg","circle");ct.setAttributeNS(null,"fill","#FFFFFF"),ct.setAttributeNS(null,"cx","5.5"),ct.setAttributeNS(null,"cy","5.5"),ct.setAttributeNS(null,"r","5.4999962"),Je.appendChild(rt),Je.appendChild(ct),qe.appendChild(et),qe.appendChild(Me),qe.appendChild(Fe),qe.appendChild(Ge),qe.appendChild(Je),Le.appendChild(qe),this._element.appendChild(Le),this._offset=l.Point.convert(H&&H.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ct){Ct.preventDefault()}),this._element.addEventListener("mousedown",function(Ct){Ct.preventDefault()}),this._element.addEventListener("focus",function(){var Ct=me._map.getContainer();Ct.scrollTop=0,Ct.scrollLeft=0}),ho(this._element,this._anchor,"marker"),this._popup=null}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.addTo=function(H){return this.remove(),this._map=H,H.getCanvasContainer().appendChild(this._element),H.on("move",this._update),H.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},G.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this},G.prototype.getLngLat=function(){return this._lngLat},G.prototype.setLngLat=function(H){return this._lngLat=l.LngLat.convert(H),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},G.prototype.getElement=function(){return this._element},G.prototype.setPopup=function(H){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),H){if(!("offset"in H.options)){var te=13.5,me=Math.sqrt(Math.pow(te,2)/2);H.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[me,-1*(24.6+me)],"bottom-right":[-me,-1*(24.6+me)],left:[te,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=H,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},G.prototype._onKeyPress=function(H){var te=H.code,me=H.charCode||H.keyCode;te!=="Space"&&te!=="Enter"&&me!==32&&me!==13||this.togglePopup()},G.prototype._onMapClick=function(H){var te=H.originalEvent.target,me=this._element;this._popup&&(te===me||me.contains(te))&&this.togglePopup()},G.prototype.getPopup=function(){return this._popup},G.prototype.togglePopup=function(){var H=this._popup;return H?(H.isOpen()?H.remove():H.addTo(this._map),this):this},G.prototype._update=function(H){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Ir(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var te="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?te="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(te="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var me="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?me="rotateX(0deg)":this._pitchAlignment==="map"&&(me="rotateX("+this._map.getPitch()+"deg)"),H&&H.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,rs[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+me+" "+te)}},G.prototype.getOffset=function(){return this._offset},G.prototype.setOffset=function(H){return this._offset=l.Point.convert(H),this._update(),this},G.prototype._onMove=function(H){this._pos=H.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag"))},G.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"},G.prototype._addDragHandler=function(H){this._element.contains(H.originalEvent.target)&&(H.preventDefault(),this._positionDelta=H.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},G.prototype.setDraggable=function(H){return this._draggable=!!H,this._map&&(H?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},G.prototype.isDraggable=function(){return this._draggable},G.prototype.setRotation=function(H){return this._rotation=H||0,this._update(),this},G.prototype.getRotation=function(){return this._rotation},G.prototype.setRotationAlignment=function(H){return this._rotationAlignment=H||"auto",this._update(),this},G.prototype.getRotationAlignment=function(){return this._rotationAlignment},G.prototype.setPitchAlignment=function(H){return this._pitchAlignment=H&&H!=="auto"?H:this._rotationAlignment,this._update(),this},G.prototype.getPitchAlignment=function(){return this._pitchAlignment},G}(l.Evented),zs={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},pa=0,is=!1,po=function(B){function G(H){B.call(this),this.options=l.extend({},zs,H),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.onAdd=function(H){return this._map=H,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),te=this._setupUI,Ga!==void 0?te(Ga):l.window.navigator.permissions!==void 0?l.window.navigator.permissions.query({name:"geolocation"}).then(function(me){Ga=me.state!=="denied",te(Ga)}):(Ga=!!l.window.navigator.geolocation,te(Ga)),this._container;var te},G.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,pa=0,is=!1},G.prototype._isOutOfMapMaxBounds=function(H){var te=this._map.getMaxBounds(),me=H.coords;return te&&(me.longitude<te.getWest()||me.longitude>te.getEast()||me.latitude<te.getSouth()||me.latitude>te.getNorth())},G.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},G.prototype._onSuccess=function(H){if(this._map){if(this._isOutOfMapMaxBounds(H))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",H)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=H,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(H),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(H),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",H)),this._finish()}},G.prototype._updateCamera=function(H){var te=new l.LngLat(H.coords.longitude,H.coords.latitude),me=H.coords.accuracy,Le=this._map.getBearing(),Be=l.extend({bearing:Le},this.options.fitBoundsOptions);this._map.fitBounds(te.toBounds(me),Be,{geolocateSource:!0})},G.prototype._updateMarker=function(H){if(H){var te=new l.LngLat(H.coords.longitude,H.coords.latitude);this._accuracyCircleMarker.setLngLat(te).addTo(this._map),this._userLocationDotMarker.setLngLat(te).addTo(this._map),this._accuracy=H.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},G.prototype._updateCircleRadius=function(){var H=this._map._container.clientHeight/2,te=this._map.unproject([0,H]),me=this._map.unproject([1,H]),Le=te.distanceTo(me),Be=Math.ceil(2*this._accuracy/Le);this._circleElement.style.width=Be+"px",this._circleElement.style.height=Be+"px"},G.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},G.prototype._onError=function(H){if(this._map){if(this.options.trackUserLocation)if(H.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var te=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=te,this._geolocateButton.setAttribute("aria-label",te),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(H.code===3&&is)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",H)),this._finish()}},G.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},G.prototype._setupUI=function(H){var te=this;if(this._container.addEventListener("contextmenu",function(Be){return Be.preventDefault()}),this._geolocateButton=b.create("button","mapboxgl-ctrl-geolocate",this._container),b.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",H===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var me=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=me,this._geolocateButton.setAttribute("aria-label",me)}else{var Le=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Le,this._geolocateButton.setAttribute("aria-label",Le)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Qi(this._dotElement),this._circleElement=b.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Qi({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Be){var qe=Be.originalEvent&&Be.originalEvent.type==="resize";Be.geolocateSource||te._watchState!=="ACTIVE_LOCK"||qe||(te._watchState="BACKGROUND",te._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),te._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),te.fire(new l.Event("trackuserlocationend")))})},G.prototype.trigger=function(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":pa--,is=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var H;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++pa>1?(H={maximumAge:6e5,timeout:0},is=!0):(H=this.options.positionOptions,is=!1),this._geolocationWatchID=l.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,H)}}else l.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},G.prototype._clearWatch=function(){l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},G}(l.Evented),li={maxWidth:100,unit:"metric"},di=function(B){this.options=l.extend({},li,B),l.bindAll(["_onMove","setUnit"],this)};function Rs(B,G,H){var te=H&&H.maxWidth||100,me=B._container.clientHeight/2,Le=B.unproject([0,me]),Be=B.unproject([te,me]),qe=Le.distanceTo(Be);if(H&&H.unit==="imperial"){var et=3.2808*qe;et>5280?Xe(G,te,et/5280,B._getUIString("ScaleControl.Miles")):Xe(G,te,et,B._getUIString("ScaleControl.Feet"))}else H&&H.unit==="nautical"?Xe(G,te,qe/1852,B._getUIString("ScaleControl.NauticalMiles")):qe>=1e3?Xe(G,te,qe/1e3,B._getUIString("ScaleControl.Kilometers")):Xe(G,te,qe,B._getUIString("ScaleControl.Meters"))}function Xe(B,G,H,te){var me,Le,Be,qe=(me=H,(Le=Math.pow(10,(""+Math.floor(me)).length-1))*((Be=me/Le)>=10?10:Be>=5?5:Be>=3?3:Be>=2?2:Be>=1?1:function(mt){var bt=Math.pow(10,Math.ceil(-Math.log(mt)/Math.LN10));return Math.round(mt*bt)/bt}(Be))),et=qe/H;B.style.width=G*et+"px",B.innerHTML=qe+"&nbsp;"+te}di.prototype.getDefaultPosition=function(){return"bottom-left"},di.prototype._onMove=function(){Rs(this._map,this._container,this.options)},di.prototype.onAdd=function(B){return this._map=B,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",B.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},di.prototype.onRemove=function(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},di.prototype.setUnit=function(B){this.options.unit=B,Rs(this._map,this._container,this.options)};var $e=function(B){this._fullscreen=!1,B&&B.container&&(B.container instanceof l.window.HTMLElement?this._container=B.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in l.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in l.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in l.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in l.window.document&&(this._fullscreenchange="MSFullscreenChange")};$e.prototype.onAdd=function(B){return this._map=B,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},$e.prototype.onRemove=function(){b.remove(this._controlContainer),this._map=null,l.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},$e.prototype._checkFullscreenSupport=function(){return!!(l.window.document.fullscreenEnabled||l.window.document.mozFullScreenEnabled||l.window.document.msFullscreenEnabled||l.window.document.webkitFullscreenEnabled)},$e.prototype._setupUI=function(){var B=this._fullscreenButton=b.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);b.create("span","mapboxgl-ctrl-icon",B).setAttribute("aria-hidden",!0),B.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),l.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},$e.prototype._updateTitle=function(){var B=this._getTitle();this._fullscreenButton.setAttribute("aria-label",B),this._fullscreenButton.title=B},$e.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},$e.prototype._isFullscreen=function(){return this._fullscreen},$e.prototype._changeIcon=function(){(l.window.document.fullscreenElement||l.window.document.mozFullScreenElement||l.window.document.webkitFullscreenElement||l.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},$e.prototype._onClickFullscreen=function(){this._isFullscreen()?l.window.document.exitFullscreen?l.window.document.exitFullscreen():l.window.document.mozCancelFullScreen?l.window.document.mozCancelFullScreen():l.window.document.msExitFullscreen?l.window.document.msExitFullscreen():l.window.document.webkitCancelFullScreen&&l.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var at={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},ft=function(B){function G(H){B.call(this),this.options=l.extend(Object.create(at),H),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.addTo=function(H){return this._map&&this.remove(),this._map=H,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this},G.prototype.isOpen=function(){return!!this._map},G.prototype.remove=function(){return this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this},G.prototype.getLngLat=function(){return this._lngLat},G.prototype.setLngLat=function(H){return this._lngLat=l.LngLat.convert(H),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},G.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},G.prototype.getElement=function(){return this._container},G.prototype.setText=function(H){return this.setDOMContent(l.window.document.createTextNode(H))},G.prototype.setHTML=function(H){var te,me=l.window.document.createDocumentFragment(),Le=l.window.document.createElement("body");for(Le.innerHTML=H;te=Le.firstChild;)me.appendChild(te);return this.setDOMContent(me)},G.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},G.prototype.setMaxWidth=function(H){return this.options.maxWidth=H,this._update(),this},G.prototype.setDOMContent=function(H){return this._createContent(),this._content.appendChild(H),this._update(),this},G.prototype.addClassName=function(H){this._container&&this._container.classList.add(H)},G.prototype.removeClassName=function(H){this._container&&this._container.classList.remove(H)},G.prototype.toggleClassName=function(H){if(this._container)return this._container.classList.toggle(H)},G.prototype._createContent=function(){this._content&&b.remove(this._content),this._content=b.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=b.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},G.prototype._onMouseUp=function(H){this._update(H.point)},G.prototype._onMouseMove=function(H){this._update(H.point)},G.prototype._onDrag=function(H){this._update(H.point)},G.prototype._update=function(H){var te=this,me=this._lngLat||this._trackPointer;if(this._map&&me&&this._content&&(this._container||(this._container=b.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=b.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(he){return te._container.classList.add(he)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ir(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||H)){var Le=this._pos=this._trackPointer&&H?H:this._map.project(this._lngLat),Be=this.options.anchor,qe=_t(this.options.offset);if(!Be){var et,mt=this._container.offsetWidth,bt=this._container.offsetHeight;et=Le.y+qe.bottom.y<bt?["top"]:Le.y>this._map.transform.height-bt?["bottom"]:[],Le.x<mt/2?et.push("left"):Le.x>this._map.transform.width-mt/2&&et.push("right"),Be=et.length===0?"bottom":et.join("-")}var ee=Le.add(qe[Be]).round();b.setTransform(this._container,rs[Be]+" translate("+ee.x+"px,"+ee.y+"px)"),ho(this._container,Be,"popup")}},G.prototype._onClose=function(){this.remove()},G}(l.Evented);function _t(B){if(B){if(typeof B=="number"){var G=Math.round(Math.sqrt(.5*Math.pow(B,2)));return{center:new l.Point(0,0),top:new l.Point(0,B),"top-left":new l.Point(G,G),"top-right":new l.Point(-G,G),bottom:new l.Point(0,-B),"bottom-left":new l.Point(G,-G),"bottom-right":new l.Point(-G,-G),left:new l.Point(B,0),right:new l.Point(-B,0)}}if(B instanceof l.Point||Array.isArray(B)){var H=l.Point.convert(B);return{center:H,top:H,"top-left":H,"top-right":H,bottom:H,"bottom-left":H,"bottom-right":H,left:H,right:H}}return{center:l.Point.convert(B.center||[0,0]),top:l.Point.convert(B.top||[0,0]),"top-left":l.Point.convert(B["top-left"]||[0,0]),"top-right":l.Point.convert(B["top-right"]||[0,0]),bottom:l.Point.convert(B.bottom||[0,0]),"bottom-left":l.Point.convert(B["bottom-left"]||[0,0]),"bottom-right":l.Point.convert(B["bottom-right"]||[0,0]),left:l.Point.convert(B.left||[0,0]),right:l.Point.convert(B.right||[0,0])}}return _t(new l.Point(0,0))}var xt={version:l.version,supported:T,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:Mo,NavigationControl:Na,GeolocateControl:po,AttributionControl:Ea,ScaleControl:di,FullscreenControl:$e,Popup:ft,Marker:Qi,Style:ir,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.Point,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,config:l.config,prewarm:function(){kt().acquire(it)},clearPrewarmedResources:function(){var B=gt;B&&(B.isPreloaded()&&B.numActive()===1?(B.release(it),gt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return l.config.ACCESS_TOKEN},set accessToken(B){l.config.ACCESS_TOKEN=B},get baseApiUrl(){return l.config.API_URL},set baseApiUrl(B){l.config.API_URL=B},get workerCount(){return lt.workerCount},set workerCount(B){lt.workerCount=B},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(B){l.config.MAX_PARALLEL_IMAGE_REQUESTS=B},clearStorage:function(B){l.clearTileCache(B)},workerUrl:""};return xt}),S}()},27084:function(K){K.exports=Math.log2||function(z){return Math.log(z)*Math.LOG2E}},16825:function(K,z,e){K.exports=function(k,l){l||(l=k,k=window);var T=0,b=0,d=0,s={shift:!1,alt:!1,control:!1,meta:!1},t=!1;function o(g){var y=!1;return"altKey"in g&&(y=y||g.altKey!==s.alt,s.alt=!!g.altKey),"shiftKey"in g&&(y=y||g.shiftKey!==s.shift,s.shift=!!g.shiftKey),"ctrlKey"in g&&(y=y||g.ctrlKey!==s.control,s.control=!!g.ctrlKey),"metaKey"in g&&(y=y||g.metaKey!==s.meta,s.meta=!!g.metaKey),y}function r(g,y){var p=S.x(y),m=S.y(y);"buttons"in y&&(g=0|y.buttons),(g!==T||p!==b||m!==d||o(y))&&(T=0|g,b=p||0,d=m||0,l&&l(T,b,d,s))}function n(g){r(0,g)}function a(){(T||b||d||s.shift||s.alt||s.meta||s.control)&&(b=d=0,T=0,s.shift=s.alt=s.control=s.meta=!1,l&&l(0,0,0,s))}function i(g){o(g)&&l&&l(T,b,d,s)}function u(g){S.buttons(g)===0?r(0,g):r(T,g)}function h(g){r(T|S.buttons(g),g)}function f(g){r(T&~S.buttons(g),g)}function x(){t||(t=!0,k.addEventListener("mousemove",u),k.addEventListener("mousedown",h),k.addEventListener("mouseup",f),k.addEventListener("mouseleave",n),k.addEventListener("mouseenter",n),k.addEventListener("mouseout",n),k.addEventListener("mouseover",n),k.addEventListener("blur",a),k.addEventListener("keyup",i),k.addEventListener("keydown",i),k.addEventListener("keypress",i),k!==window&&(window.addEventListener("blur",a),window.addEventListener("keyup",i),window.addEventListener("keydown",i),window.addEventListener("keypress",i)))}x();var v={element:k};return Object.defineProperties(v,{enabled:{get:function(){return t},set:function(g){g?x():t&&(t=!1,k.removeEventListener("mousemove",u),k.removeEventListener("mousedown",h),k.removeEventListener("mouseup",f),k.removeEventListener("mouseleave",n),k.removeEventListener("mouseenter",n),k.removeEventListener("mouseout",n),k.removeEventListener("mouseover",n),k.removeEventListener("blur",a),k.removeEventListener("keyup",i),k.removeEventListener("keydown",i),k.removeEventListener("keypress",i),k!==window&&(window.removeEventListener("blur",a),window.removeEventListener("keyup",i),window.removeEventListener("keydown",i),window.removeEventListener("keypress",i)))},enumerable:!0},buttons:{get:function(){return T},enumerable:!0},x:{get:function(){return b},enumerable:!0},y:{get:function(){return d},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),v};var S=e(74311)},48956:function(K){var z={left:0,top:0};K.exports=function(e,S,k){S=S||e.currentTarget||e.srcElement,Array.isArray(k)||(k=[0,0]);var l,T=e.clientX||0,b=e.clientY||0,d=(l=S)===window||l===document||l===document.body?z:l.getBoundingClientRect();return k[0]=T-d.left,k[1]=b-d.top,k}},74311:function(K,z){function e(S){return S.target||S.srcElement||window}z.buttons=function(S){if(typeof S=="object"){if("buttons"in S)return S.buttons;if("which"in S){if((k=S.which)===2)return 4;if(k===3)return 2;if(k>0)return 1<<k-1}else if("button"in S){var k;if((k=S.button)===1)return 4;if(k===2)return 2;if(k>=0)return 1<<k}}return 0},z.element=e,z.x=function(S){if(typeof S=="object"){if("offsetX"in S)return S.offsetX;var k=e(S).getBoundingClientRect();return S.clientX-k.left}return 0},z.y=function(S){if(typeof S=="object"){if("offsetY"in S)return S.offsetY;var k=e(S).getBoundingClientRect();return S.clientY-k.top}return 0}},1195:function(K,z,e){var S=e(75686);K.exports=function(k,l,T){typeof k=="function"&&(T=!!l,l=k,k=window);var b=S("ex",k),d=function(s){T&&s.preventDefault();var t=s.deltaX||0,o=s.deltaY||0,r=s.deltaZ||0,n=1;switch(s.deltaMode){case 1:n=b;break;case 2:n=window.innerHeight}if(o*=n,r*=n,(t*=n)||o||r)return l(t,o,r,s)};return k.addEventListener("wheel",d),d}},7417:function(K,z,e){var S;(function(k,l,T){l[k]=l[k]||function(){var b,d,s,t=Object.prototype.toString,o=typeof setImmediate<"u"?function(p){return setImmediate(p)}:setTimeout;try{Object.defineProperty({},"x",{}),b=function(p,m,w,c){return Object.defineProperty(p,m,{value:w,writable:!0,configurable:c!==!1})}}catch{b=function(m,w,c){return m[w]=c,m}}function r(p,m){s.add(p,m),d||(d=o(s.drain))}function n(p){var m,w=typeof p;return p==null||w!="object"&&w!="function"||(m=p.then),typeof m=="function"&&m}function a(){for(var p=0;p<this.chain.length;p++)i(this,this.state===1?this.chain[p].success:this.chain[p].failure,this.chain[p]);this.chain.length=0}function i(p,m,w){var c,M;try{m===!1?w.reject(p.msg):(c=m===!0?p.msg:m.call(void 0,p.msg))===w.promise?w.reject(TypeError("Promise-chain cycle")):(M=n(c))?M.call(c,w.resolve,w.reject):w.resolve(c)}catch(_){w.reject(_)}}function u(p){var m,w=this;if(!w.triggered){w.triggered=!0,w.def&&(w=w.def);try{(m=n(p))?r(function(){var c=new x(w);try{m.call(p,function(){u.apply(c,arguments)},function(){h.apply(c,arguments)})}catch(M){h.call(c,M)}}):(w.msg=p,w.state=1,w.chain.length>0&&r(a,w))}catch(c){h.call(new x(w),c)}}}function h(p){var m=this;m.triggered||(m.triggered=!0,m.def&&(m=m.def),m.msg=p,m.state=2,m.chain.length>0&&r(a,m))}function f(p,m,w,c){for(var M=0;M<m.length;M++)(function(_){p.resolve(m[_]).then(function(E){w(_,E)},c)})(M)}function x(p){this.def=p,this.triggered=!1}function v(p){this.promise=p,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function g(p){if(typeof p!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var m=new v(this);this.then=function(w,c){var M={success:typeof w!="function"||w,failure:typeof c=="function"&&c};return M.promise=new this.constructor(function(_,E){if(typeof _!="function"||typeof E!="function")throw TypeError("Not a function");M.resolve=_,M.reject=E}),m.chain.push(M),m.state!==0&&r(a,m),M.promise},this.catch=function(w){return this.then(void 0,w)};try{p.call(void 0,function(w){u.call(m,w)},function(w){h.call(m,w)})}catch(w){h.call(m,w)}}s=function(){var p,m,w;function c(M,_){this.fn=M,this.self=_,this.next=void 0}return{add:function(M,_){w=new c(M,_),m?m.next=w:p=w,m=w,w=void 0},drain:function(){var M=p;for(p=m=d=void 0;M;)M.fn.call(M.self),M=M.next}}}();var y=b({},"constructor",g,!1);return g.prototype=y,b(y,"__NPO__",0,!1),b(g,"resolve",function(p){return p&&typeof p=="object"&&p.__NPO__===1?p:new this(function(m,w){if(typeof m!="function"||typeof w!="function")throw TypeError("Not a function");m(p)})}),b(g,"reject",function(p){return new this(function(m,w){if(typeof m!="function"||typeof w!="function")throw TypeError("Not a function");w(p)})}),b(g,"all",function(p){var m=this;return t.call(p)!="[object Array]"?m.reject(TypeError("Not an array")):p.length===0?m.resolve([]):new m(function(w,c){if(typeof w!="function"||typeof c!="function")throw TypeError("Not a function");var M=p.length,_=Array(M),E=0;f(m,p,function(L,C){_[L]=C,++E===M&&w(_)},c)})}),b(g,"race",function(p){var m=this;return t.call(p)!="[object Array]"?m.reject(TypeError("Not an array")):new m(function(w,c){if(typeof w!="function"||typeof c!="function")throw TypeError("Not a function");f(m,p,function(M,_){w(_)},c)})}),g}(),K.exports?K.exports=l[k]:(S=function(){return l[k]}.call(z,e,z,K))===void 0||(K.exports=S)})("Promise",e.g!==void 0?e.g:this)},18625:function(K){var z=Math.PI,e=b(120);function S(d,s,t,o){return["C",d,s,t,o,t,o]}function k(d,s,t,o,r,n){return["C",d/3+.6666666666666666*t,s/3+.6666666666666666*o,r/3+.6666666666666666*t,n/3+.6666666666666666*o,r,n]}function l(d,s,t,o,r,n,a,i,u,h){if(h)M=h[0],_=h[1],w=h[2],c=h[3];else{var f=T(d,s,-r);d=f.x,s=f.y;var x=(d-(i=(f=T(i,u,-r)).x))/2,v=(s-(u=f.y))/2,g=x*x/(t*t)+v*v/(o*o);g>1&&(t*=g=Math.sqrt(g),o*=g);var y=t*t,p=o*o,m=(n==a?-1:1)*Math.sqrt(Math.abs((y*p-y*v*v-p*x*x)/(y*v*v+p*x*x)));m==1/0&&(m=1);var w=m*t*v/o+(d+i)/2,c=m*-o*x/t+(s+u)/2,M=Math.asin(((s-c)/o).toFixed(9)),_=Math.asin(((u-c)/o).toFixed(9));(M=d<w?z-M:M)<0&&(M=2*z+M),(_=i<w?z-_:_)<0&&(_=2*z+_),a&&M>_&&(M-=2*z),!a&&_>M&&(_-=2*z)}if(Math.abs(_-M)>e){var E=_,L=i,C=u;_=M+e*(a&&_>M?1:-1);var O=l(i=w+t*Math.cos(_),u=c+o*Math.sin(_),t,o,r,0,a,L,C,[_,E,w,c])}var I=Math.tan((_-M)/4),N=4/3*t*I,R=4/3*o*I,V=[2*d-(d+N*Math.sin(M)),2*s-(s-R*Math.cos(M)),i+N*Math.sin(_),u-R*Math.cos(_),i,u];if(h)return V;O&&(V=V.concat(O));for(var F=0;F<V.length;){var D=T(V[F],V[F+1],r);V[F++]=D.x,V[F++]=D.y}return V}function T(d,s,t){return{x:d*Math.cos(t)-s*Math.sin(t),y:d*Math.sin(t)+s*Math.cos(t)}}function b(d){return d*(z/180)}K.exports=function(d){for(var s,t=[],o=0,r=0,n=0,a=0,i=null,u=null,h=0,f=0,x=0,v=d.length;x<v;x++){var g=d[x],y=g[0];switch(y){case"M":n=g[1],a=g[2];break;case"A":(g=l(h,f,g[1],g[2],b(g[3]),g[4],g[5],g[6],g[7])).unshift("C"),g.length>7&&(t.push(g.splice(0,7)),g.unshift("C"));break;case"S":var p=h,m=f;s!="C"&&s!="S"||(p+=p-o,m+=m-r),g=["C",p,m,g[1],g[2],g[3],g[4]];break;case"T":s=="Q"||s=="T"?(i=2*h-i,u=2*f-u):(i=h,u=f),g=k(h,f,i,u,g[1],g[2]);break;case"Q":i=g[1],u=g[2],g=k(h,f,g[1],g[2],g[3],g[4]);break;case"L":g=S(h,f,g[1],g[2]);break;case"H":g=S(h,f,g[1],f);break;case"V":g=S(h,f,h,g[1]);break;case"Z":g=S(h,f,n,a)}s=y,h=g[g.length-2],f=g[g.length-1],g.length>4?(o=g[g.length-4],r=g[g.length-3]):(o=h,r=f),t.push(g)}return t}},56131:function(K){var z=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;function k(l){if(l==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(l)}K.exports=function(){try{if(!Object.assign)return!1;var l=new String("abc");if(l[5]="de",Object.getOwnPropertyNames(l)[0]==="5")return!1;for(var T={},b=0;b<10;b++)T["_"+String.fromCharCode(b)]=b;if(Object.getOwnPropertyNames(T).map(function(s){return T[s]}).join("")!=="0123456789")return!1;var d={};return"abcdefghijklmnopqrst".split("").forEach(function(s){d[s]=s}),Object.keys(Object.assign({},d)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(l,T){for(var b,d,s=k(l),t=1;t<arguments.length;t++){for(var o in b=Object(arguments[t]))e.call(b,o)&&(s[o]=b[o]);if(z){d=z(b);for(var r=0;r<d.length;r++)S.call(b,d[r])&&(s[d[r]]=b[d[r]])}}return s}},65848:function(K){var z=function(e){return e!=e};K.exports=function(e,S){return e===0&&S===0?1/e==1/S:e===S||!(!z(e)||!z(S))}},64003:function(K,z,e){var S=e(17045),k=e(68222),l=e(65848),T=e(27015),b=e(55572),d=k(T(),Object);S(d,{getPolyfill:T,implementation:l,shim:b}),K.exports=d},27015:function(K,z,e){var S=e(65848);K.exports=function(){return typeof Object.is=="function"?Object.is:S}},55572:function(K,z,e){var S=e(27015),k=e(17045);K.exports=function(){var l=S();return k(Object,{is:l},{is:function(){return Object.is!==l}}),l}},99019:function(K,z,e){var S;if(!Object.keys){var k=Object.prototype.hasOwnProperty,l=Object.prototype.toString,T=e(64178),b=Object.prototype.propertyIsEnumerable,d=!b.call({toString:null},"toString"),s=b.call(function(){},"prototype"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=function(a){var i=a.constructor;return i&&i.prototype===a},r={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},n=function(){if(typeof window>"u")return!1;for(var a in window)try{if(!r["$"+a]&&k.call(window,a)&&window[a]!==null&&typeof window[a]=="object")try{o(window[a])}catch{return!0}}catch{return!0}return!1}();S=function(a){var i=a!==null&&typeof a=="object",u=l.call(a)==="[object Function]",h=T(a),f=i&&l.call(a)==="[object String]",x=[];if(!i&&!u&&!h)throw new TypeError("Object.keys called on a non-object");var v=s&&u;if(f&&a.length>0&&!k.call(a,0))for(var g=0;g<a.length;++g)x.push(String(g));if(h&&a.length>0)for(var y=0;y<a.length;++y)x.push(String(y));else for(var p in a)v&&p==="prototype"||!k.call(a,p)||x.push(String(p));if(d)for(var m=function(c){if(typeof window>"u"||!n)return o(c);try{return o(c)}catch{return!1}}(a),w=0;w<t.length;++w)m&&t[w]==="constructor"||!k.call(a,t[w])||x.push(t[w]);return x}}K.exports=S},8709:function(K,z,e){var S=Array.prototype.slice,k=e(64178),l=Object.keys,T=l?function(d){return l(d)}:e(99019),b=Object.keys;T.shim=function(){if(Object.keys){var d=function(){var s=Object.keys(arguments);return s&&s.length===arguments.length}(1,2);d||(Object.keys=function(s){return k(s)?b(S.call(s)):b(s)})}else Object.keys=T;return Object.keys||T},K.exports=T},64178:function(K){var z=Object.prototype.toString;K.exports=function(e){var S=z.call(e),k=S==="[object Arguments]";return k||(k=S!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&z.call(e.callee)==="[object Function]"),k}},88641:function(K){function z(k,l){if(typeof k!="string")return[k];var T=[k];typeof l=="string"||Array.isArray(l)?l={brackets:l}:l||(l={});var b=l.brackets?Array.isArray(l.brackets)?l.brackets:[l.brackets]:["{}","[]","()"],d=l.escape||"___",s=!!l.flat;b.forEach(function(o){var r=new RegExp(["\\",o[0],"[^\\",o[0],"\\",o[1],"]*\\",o[1]].join("")),n=[];function a(i,u,h){var f=T.push(i.slice(o[0].length,-o[1].length))-1;return n.push(f),d+f+d}T.forEach(function(i,u){for(var h,f=0;i!=h;)if(h=i,i=i.replace(r,a),f++>1e4)throw Error("References have circular dependency. Please, check them.");T[u]=i}),n=n.reverse(),T=T.map(function(i){return n.forEach(function(u){i=i.replace(new RegExp("(\\"+d+u+"\\"+d+")","g"),o[0]+"$1"+o[1])}),i})});var t=new RegExp("\\"+d+"([0-9]+)\\"+d);return s?T:function o(r,n,a){for(var i,u=[],h=0;i=t.exec(r);){if(h++>1e4)throw Error("Circular references in parenthesis");u.push(r.slice(0,i.index)),u.push(o(n[i[1]],n)),r=r.slice(i.index+i[0].length)}return u.push(r),u}(T[0],T)}function e(k,l){if(l&&l.flat){var T,b=l&&l.escape||"___",d=k[0];if(!d)return"";for(var s=new RegExp("\\"+b+"([0-9]+)\\"+b),t=0;d!=T;){if(t++>1e4)throw Error("Circular references in "+k);T=d,d=d.replace(s,o)}return d}return k.reduce(function r(n,a){return Array.isArray(a)&&(a=a.reduce(r,"")),n+a},"");function o(r,n){if(k[n]==null)throw Error("Reference "+n+"is undefined");return k[n]}}function S(k,l){return Array.isArray(k)?e(k,l):z(k,l)}S.parse=z,S.stringify=e,K.exports=S},18863:function(K,z,e){var S=e(71299);K.exports=function(k){var l;return arguments.length>1&&(k=arguments),typeof k=="string"?k=k.split(/\s/).map(parseFloat):typeof k=="number"&&(k=[k]),k.length&&typeof k[0]=="number"?l=k.length===1?{width:k[0],height:k[0],x:0,y:0}:k.length===2?{width:k[0],height:k[1],x:0,y:0}:{x:k[0],y:k[1],width:k[2]-k[0]||0,height:k[3]-k[1]||0}:k&&(l={x:(k=S(k,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:k.top||0},k.width==null?k.right?l.width=k.right-l.x:l.width=0:l.width=k.width,k.height==null?k.bottom?l.height=k.bottom-l.y:l.height=0:l.height=k.height),l}},95616:function(K){K.exports=function(k){var l=[];return k.replace(e,function(T,b,d){var s=b.toLowerCase();for(d=function(t){var o=t.match(S);return o?o.map(Number):[]}(d),s=="m"&&d.length>2&&(l.push([b].concat(d.splice(0,2))),s="l",b=b=="m"?"l":"L");;){if(d.length==z[s])return d.unshift(b),l.push(d);if(d.length<z[s])throw new Error("malformed path data");l.push([b].concat(d.splice(0,z[s])))}}),l};var z={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/gi,S=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},25677:function(K){K.exports=function(z,e){e||(e=[0,""]),z=String(z);var S=parseFloat(z,10);return e[0]=S,e[1]=z.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},9748:function(K,z,e){var S=e(90386);(function(){var k,l,T,b,d,s;typeof performance<"u"&&performance!==null&&performance.now?K.exports=function(){return performance.now()}:S!=null&&S.hrtime?(K.exports=function(){return(k()-d)/1e6},l=S.hrtime,b=(k=function(){var t;return 1e9*(t=l())[0]+t[1]})(),s=1e9*S.uptime(),d=b-s):Date.now?(K.exports=function(){return Date.now()-T},T=Date.now()):(K.exports=function(){return new Date().getTime()-T},T=new Date().getTime())}).call(this)},71299:function(K){K.exports=function(S,k,l){var T,b,d={};if(typeof k=="string"&&(k=e(k)),Array.isArray(k)){var s={};for(b=0;b<k.length;b++)s[k[b]]=!0;k=s}for(T in k)k[T]=e(k[T]);var t={};for(T in k){var o=k[T];if(Array.isArray(o))for(b=0;b<o.length;b++){var r=o[b];if(l&&(t[r]=!0),r in S){if(d[T]=S[r],l)for(var n=b;n<o.length;n++)t[o[n]]=!0;break}}else T in S&&(k[T]&&(d[T]=S[T]),l&&(t[T]=!0))}if(l)for(T in S)t[T]||(d[T]=S[T]);return d};var z={};function e(S){return z[S]?z[S]:(typeof S=="string"&&(S=z[S]=S.split(/\s*,\s*|\s+/)),S)}},38258:function(K){K.exports=function(z,e,S,k){var l=z[0],T=z[1],b=!1;S===void 0&&(S=0),k===void 0&&(k=e.length);for(var d=k-S,s=0,t=d-1;s<d;t=s++){var o=e[s+S][0],r=e[s+S][1],n=e[t+S][0],a=e[t+S][1];r>T!=a>T&&l<(n-o)*(T-r)/(a-r)+o&&(b=!b)}return b}},52142:function(K,z,e){var S,k=e(69444),l=e(29023),T=e(87263),b=e(11328),d=e(55968),s=e(10670),t=!1,o=l();function r(n,a,i){var u=S.segments(n),h=S.segments(a),f=i(S.combine(u,h));return S.polygon(f)}S={buildLog:function(n){return n===!0?t=k():n===!1&&(t=!1),t!==!1&&t.list},epsilon:function(n){return o.epsilon(n)},segments:function(n){var a=T(!0,o,t);return n.regions.forEach(a.addRegion),{segments:a.calculate(n.inverted),inverted:n.inverted}},combine:function(n,a){return{combined:T(!1,o,t).calculate(n.segments,n.inverted,a.segments,a.inverted),inverted1:n.inverted,inverted2:a.inverted}},selectUnion:function(n){return{segments:d.union(n.combined,t),inverted:n.inverted1||n.inverted2}},selectIntersect:function(n){return{segments:d.intersect(n.combined,t),inverted:n.inverted1&&n.inverted2}},selectDifference:function(n){return{segments:d.difference(n.combined,t),inverted:n.inverted1&&!n.inverted2}},selectDifferenceRev:function(n){return{segments:d.differenceRev(n.combined,t),inverted:!n.inverted1&&n.inverted2}},selectXor:function(n){return{segments:d.xor(n.combined,t),inverted:n.inverted1!==n.inverted2}},polygon:function(n){return{regions:b(n.segments,o,t),inverted:n.inverted}},polygonFromGeoJSON:function(n){return s.toPolygon(S,n)},polygonToGeoJSON:function(n){return s.fromPolygon(S,o,n)},union:function(n,a){return r(n,a,S.selectUnion)},intersect:function(n,a){return r(n,a,S.selectIntersect)},difference:function(n,a){return r(n,a,S.selectDifference)},differenceRev:function(n,a){return r(n,a,S.selectDifferenceRev)},xor:function(n,a){return r(n,a,S.selectXor)}},typeof window=="object"&&(window.PolyBool=S),K.exports=S},69444:function(K){K.exports=function(){var z,e=0,S=!1;function k(l,T){return z.list.push({type:l,data:T?JSON.parse(JSON.stringify(T)):void 0}),z}return z={list:[],segmentId:function(){return e++},checkIntersection:function(l,T){return k("check",{seg1:l,seg2:T})},segmentChop:function(l,T){return k("div_seg",{seg:l,pt:T}),k("chop",{seg:l,pt:T})},statusRemove:function(l){return k("pop_seg",{seg:l})},segmentUpdate:function(l){return k("seg_update",{seg:l})},segmentNew:function(l,T){return k("new_seg",{seg:l,primary:T})},segmentRemove:function(l){return k("rem_seg",{seg:l})},tempStatus:function(l,T,b){return k("temp_status",{seg:l,above:T,below:b})},rewind:function(l){return k("rewind",{seg:l})},status:function(l,T,b){return k("status",{seg:l,above:T,below:b})},vert:function(l){return l===S?z:(S=l,k("vert",{x:l}))},log:function(l){return typeof l!="string"&&(l=JSON.stringify(l,!1,"  ")),k("log",{txt:l})},reset:function(){return k("reset")},selected:function(l){return k("selected",{segs:l})},chainStart:function(l){return k("chain_start",{seg:l})},chainRemoveHead:function(l,T){return k("chain_rem_head",{index:l,pt:T})},chainRemoveTail:function(l,T){return k("chain_rem_tail",{index:l,pt:T})},chainNew:function(l,T){return k("chain_new",{pt1:l,pt2:T})},chainMatch:function(l){return k("chain_match",{index:l})},chainClose:function(l){return k("chain_close",{index:l})},chainAddHead:function(l,T){return k("chain_add_head",{index:l,pt:T})},chainAddTail:function(l,T){return k("chain_add_tail",{index:l,pt:T})},chainConnect:function(l,T){return k("chain_con",{index1:l,index2:T})},chainReverse:function(l){return k("chain_rev",{index:l})},chainJoin:function(l,T){return k("chain_join",{index1:l,index2:T})},done:function(){return k("done")}}}},29023:function(K){K.exports=function(z){typeof z!="number"&&(z=1e-10);var e={epsilon:function(S){return typeof S=="number"&&(z=S),z},pointAboveOrOnLine:function(S,k,l){var T=k[0],b=k[1],d=l[0],s=l[1],t=S[0];return(d-T)*(S[1]-b)-(s-b)*(t-T)>=-z},pointBetween:function(S,k,l){var T=S[1]-k[1],b=l[0]-k[0],d=S[0]-k[0],s=l[1]-k[1],t=d*b+T*s;return!(t<z||t-(b*b+s*s)>-z)},pointsSameX:function(S,k){return Math.abs(S[0]-k[0])<z},pointsSameY:function(S,k){return Math.abs(S[1]-k[1])<z},pointsSame:function(S,k){return e.pointsSameX(S,k)&&e.pointsSameY(S,k)},pointsCompare:function(S,k){return e.pointsSameX(S,k)?e.pointsSameY(S,k)?0:S[1]<k[1]?-1:1:S[0]<k[0]?-1:1},pointsCollinear:function(S,k,l){var T=S[0]-k[0],b=S[1]-k[1],d=k[0]-l[0],s=k[1]-l[1];return Math.abs(T*s-d*b)<z},linesIntersect:function(S,k,l,T){var b=k[0]-S[0],d=k[1]-S[1],s=T[0]-l[0],t=T[1]-l[1],o=b*t-d*s;if(Math.abs(o)<z)return!1;var r=S[0]-l[0],n=S[1]-l[1],a=(s*n-t*r)/o,i=(b*n-d*r)/o,u={alongA:0,alongB:0,pt:[S[0]+a*b,S[1]+a*d]};return u.alongA=a<=-z?-2:a<z?-1:a-1<=-z?0:a-1<z?1:2,u.alongB=i<=-z?-2:i<z?-1:i-1<=-z?0:i-1<z?1:2,u},pointInsideRegion:function(S,k){for(var l=S[0],T=S[1],b=k[k.length-1][0],d=k[k.length-1][1],s=!1,t=0;t<k.length;t++){var o=k[t][0],r=k[t][1];r-T>z!=d-T>z&&(b-o)*(T-r)/(d-r)+o-l>z&&(s=!s),b=o,d=r}return s}};return e}},10670:function(K){var z={toPolygon:function(e,S){function k(b){if(b.length<=0)return e.segments({inverted:!1,regions:[]});function d(o){var r=o.slice(0,o.length-1);return e.segments({inverted:!1,regions:[r]})}for(var s=d(b[0]),t=1;t<b.length;t++)s=e.selectDifference(e.combine(s,d(b[t])));return s}if(S.type==="Polygon")return e.polygon(k(S.coordinates));if(S.type==="MultiPolygon"){for(var l=e.segments({inverted:!1,regions:[]}),T=0;T<S.coordinates.length;T++)l=e.selectUnion(e.combine(l,k(S.coordinates[T])));return e.polygon(l)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,S,k){function l(i,u){return S.pointInsideRegion([.5*(i[0][0]+i[1][0]),.5*(i[0][1]+i[1][1])],u)}function T(i){return{region:i,children:[]}}k=e.polygon(e.segments(k));var b=T(null);function d(i,u){for(var h=0;h<i.children.length;h++)if(l(u,(x=i.children[h]).region))return void d(x,u);var f=T(u);for(h=0;h<i.children.length;h++){var x;l((x=i.children[h]).region,u)&&(f.children.push(x),i.children.splice(h,1),h--)}i.children.push(f)}for(var s=0;s<k.regions.length;s++){var t=k.regions[s];t.length<3||d(b,t)}function o(i,u){for(var h=0,f=i[i.length-1][0],x=i[i.length-1][1],v=[],g=0;g<i.length;g++){var y=i[g][0],p=i[g][1];v.push([y,p]),h+=p*f-y*x,f=y,x=p}return h<0!==u&&v.reverse(),v.push([v[0][0],v[0][1]]),v}var r=[];function n(i){var u=[o(i.region,!1)];r.push(u);for(var h=0;h<i.children.length;h++)u.push(a(i.children[h]))}function a(i){for(var u=0;u<i.children.length;u++)n(i.children[u]);return o(i.region,!0)}for(s=0;s<b.children.length;s++)n(b.children[s]);return r.length<=0?{type:"Polygon",coordinates:[]}:r.length==1?{type:"Polygon",coordinates:r[0]}:{type:"MultiPolygon",coordinates:r}}};K.exports=z},87263:function(K,z,e){var S=e(26859);K.exports=function(k,l,T){function b(n,a,i){return{id:T?T.segmentId():-1,start:n,end:a,myFill:{above:i.myFill.above,below:i.myFill.below},otherFill:null}}var d=S.create();function s(n,a){d.insertBefore(n,function(i){return u=n.isStart,h=n.pt,f=a,x=i.isStart,v=i.pt,g=i.other.pt,((y=l.pointsCompare(h,v))!==0?y:l.pointsSame(f,g)?0:u!==x?u?1:-1:l.pointAboveOrOnLine(f,x?v:g,x?g:v)?1:-1)<0;var u,h,f,x,v,g,y})}function t(n,a){var i=function(u,h){var f=S.node({isStart:!0,pt:u.start,seg:u,primary:h,other:null,status:null});return s(f,u.end),f}(n,a);return function(u,h,f){var x=S.node({isStart:!1,pt:h.end,seg:h,primary:f,other:u,status:null});u.other=x,s(x,u.pt)}(i,n,a),i}function o(n,a){var i=b(a,n.seg.end,n.seg);return function(u,h){T&&T.segmentChop(u.seg,h),u.other.remove(),u.seg.end=h,u.other.pt=h,s(u.other,u.pt)}(n,a),t(i,n.primary)}function r(n,a){var i=S.create();function u(_){return i.findTransition(function(E){var L,C,O,I,N,R;return L=_,C=E.ev,O=L.seg.start,I=L.seg.end,N=C.seg.start,R=C.seg.end,(l.pointsCollinear(O,N,R)?l.pointsCollinear(I,N,R)||l.pointAboveOrOnLine(I,N,R)?1:-1:l.pointAboveOrOnLine(O,N,R)?1:-1)>0})}function h(_,E){var L=_.seg,C=E.seg,O=L.start,I=L.end,N=C.start,R=C.end;T&&T.checkIntersection(L,C);var V=l.linesIntersect(O,I,N,R);if(V===!1){if(!l.pointsCollinear(O,I,N)||l.pointsSame(O,R)||l.pointsSame(I,N))return!1;var F=l.pointsSame(O,N),D=l.pointsSame(I,R);if(F&&D)return E;var U=!F&&l.pointBetween(O,N,R),j=!D&&l.pointBetween(I,N,R);if(F)return j?o(E,I):o(_,R),E;U&&(D||(j?o(E,I):o(_,R)),o(E,O))}else V.alongA===0&&(V.alongB===-1?o(_,N):V.alongB===0?o(_,V.pt):V.alongB===1&&o(_,R)),V.alongB===0&&(V.alongA===-1?o(E,O):V.alongA===0?o(E,V.pt):V.alongA===1&&o(E,I));return!1}for(var f=[];!d.isEmpty();){var x=d.getHead();if(T&&T.vert(x.pt[0]),x.isStart){let _=function(){if(g){var E=h(x,g);if(E)return E}return!!y&&h(x,y)};T&&T.segmentNew(x.seg,x.primary);var v=u(x),g=v.before?v.before.ev:null,y=v.after?v.after.ev:null;T&&T.tempStatus(x.seg,!!g&&g.seg,!!y&&y.seg);var p,m,w=_();if(w&&(k?(m=x.seg.myFill.below===null||x.seg.myFill.above!==x.seg.myFill.below)&&(w.seg.myFill.above=!w.seg.myFill.above):w.seg.otherFill=x.seg.myFill,T&&T.segmentUpdate(w.seg),x.other.remove(),x.remove()),d.getHead()!==x){T&&T.rewind(x.seg);continue}k?(m=x.seg.myFill.below===null||x.seg.myFill.above!==x.seg.myFill.below,x.seg.myFill.below=y?y.seg.myFill.above:n,x.seg.myFill.above=m?!x.seg.myFill.below:x.seg.myFill.below):x.seg.otherFill===null&&(p=y?x.primary===y.primary?y.seg.otherFill.above:y.seg.myFill.above:x.primary?a:n,x.seg.otherFill={above:p,below:p}),T&&T.status(x.seg,!!g&&g.seg,!!y&&y.seg),x.other.status=v.insert(S.node({ev:x}))}else{var c=x.status;if(c===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(i.exists(c.prev)&&i.exists(c.next)&&h(c.prev.ev,c.next.ev),T&&T.statusRemove(c.ev.seg),c.remove(),!x.primary){var M=x.seg.myFill;x.seg.myFill=x.seg.otherFill,x.seg.otherFill=M}f.push(x.seg)}d.getHead().remove()}return T&&T.done(),f}return k?{addRegion:function(n){for(var a,i,u,h=n[n.length-1],f=0;f<n.length;f++){a=h,h=n[f];var x=l.pointsCompare(a,h);x!==0&&t((i=x<0?a:h,u=x<0?h:a,{id:T?T.segmentId():-1,start:i,end:u,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(n){return r(n,!1)}}:{calculate:function(n,a,i,u){return n.forEach(function(h){t(b(h.start,h.end,h),!0)}),i.forEach(function(h){t(b(h.start,h.end,h),!1)}),r(a,u)}}}},26859:function(K){K.exports={create:function(){var z={root:{root:!0,next:null},exists:function(e){return e!==null&&e!==z.root},isEmpty:function(){return z.root.next===null},getHead:function(){return z.root.next},insertBefore:function(e,S){for(var k=z.root,l=z.root.next;l!==null;){if(S(l))return e.prev=l.prev,e.next=l,l.prev.next=e,void(l.prev=e);k=l,l=l.next}k.next=e,e.prev=k,e.next=null},findTransition:function(e){for(var S=z.root,k=z.root.next;k!==null&&!e(k);)S=k,k=k.next;return{before:S===z.root?null:S,after:k,insert:function(l){return l.prev=S,l.next=k,S.next=l,k!==null&&(k.prev=l),l}}}};return z},node:function(z){return z.prev=null,z.next=null,z.remove=function(){z.prev.next=z.next,z.next&&(z.next.prev=z.prev),z.prev=null,z.next=null},z}}},11328:function(K){K.exports=function(z,e,S){var k=[],l=[];return z.forEach(function(T){var b=T.start,d=T.end;if(e.pointsSame(b,d))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{S&&S.chainStart(T);for(var s={index:0,matches_head:!1,matches_pt1:!1},t={index:0,matches_head:!1,matches_pt1:!1},o=s,r=0;r<k.length;r++){var n=(f=k[r])[0],a=(f[1],f[f.length-1]);if(f[f.length-2],e.pointsSame(n,b)){if(c(r,!0,!0))break}else if(e.pointsSame(n,d)){if(c(r,!0,!1))break}else if(e.pointsSame(a,b)){if(c(r,!1,!0))break}else if(e.pointsSame(a,d)&&c(r,!1,!1))break}if(o===s)return k.push([b,d]),void(S&&S.chainNew(b,d));if(o===t){S&&S.chainMatch(s.index);var i=s.index,u=s.matches_pt1?d:b,h=s.matches_head,f=k[i],x=h?f[0]:f[f.length-1],v=h?f[1]:f[f.length-2],g=h?f[f.length-1]:f[0],y=h?f[f.length-2]:f[1];return e.pointsCollinear(v,x,u)&&(h?(S&&S.chainRemoveHead(s.index,u),f.shift()):(S&&S.chainRemoveTail(s.index,u),f.pop()),x=v),e.pointsSame(g,u)?(k.splice(i,1),e.pointsCollinear(y,g,x)&&(h?(S&&S.chainRemoveTail(s.index,x),f.pop()):(S&&S.chainRemoveHead(s.index,x),f.shift())),S&&S.chainClose(s.index),void l.push(f)):void(h?(S&&S.chainAddHead(s.index,u),f.unshift(u)):(S&&S.chainAddTail(s.index,u),f.push(u)))}var p=s.index,m=t.index;S&&S.chainConnect(p,m);var w=k[p].length<k[m].length;s.matches_head?t.matches_head?w?(M(p),_(p,m)):(M(m),_(m,p)):_(m,p):t.matches_head?_(p,m):w?(M(p),_(m,p)):(M(m),_(p,m))}function c(E,L,C){return o.index=E,o.matches_head=L,o.matches_pt1=C,o===s?(o=t,!1):(o=null,!0)}function M(E){S&&S.chainReverse(E),k[E].reverse()}function _(E,L){var C=k[E],O=k[L],I=C[C.length-1],N=C[C.length-2],R=O[0],V=O[1];e.pointsCollinear(N,I,R)&&(S&&S.chainRemoveTail(E,I),C.pop(),I=N),e.pointsCollinear(I,R,V)&&(S&&S.chainRemoveHead(L,R),O.shift()),S&&S.chainJoin(E,L),k[E]=C.concat(O),k.splice(L,1)}}),l}},55968:function(K){function z(S,k,l){var T=[];return S.forEach(function(b){var d=(b.myFill.above?8:0)+(b.myFill.below?4:0)+(b.otherFill&&b.otherFill.above?2:0)+(b.otherFill&&b.otherFill.below?1:0);k[d]!==0&&T.push({id:l?l.segmentId():-1,start:b.start,end:b.end,myFill:{above:k[d]===1,below:k[d]===2},otherFill:null})}),l&&l.selected(T),T}var e={union:function(S,k){return z(S,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],k)},intersect:function(S,k){return z(S,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],k)},difference:function(S,k){return z(S,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],k)},differenceRev:function(S,k){return z(S,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],k)},xor:function(S,k){return z(S,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],k)}};K.exports=e},14847:function(K,z,e){var S=e(21630).Transform,k=e(90715);function l(){S.call(this,{readableObjectMode:!0})}function T(b,d,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=b,d&&(this.code=d),s&&(this.statusCode=s)}l.prototype=Object.create(S.prototype),l.prototype.constructor=l,k(l.prototype),z.OF=function(b,d,s){for(var t=d,o=0;o<s.length;)if(b[t++]!==s[o++])return!1;return!0},z.eG=function(b,d){var s=[],t=0;if(d&&d==="hex")for(;t<b.length;)s.push(parseInt(b.slice(t,t+2),16)),t+=2;else for(;t<b.length;t++)s.push(255&b.charCodeAt(t));return s},z.mP=function(b,d){return b[d]|b[d+1]<<8},z.n8=function(b,d){return b[d+1]|b[d]<<8},z.nm=function(b,d){return b[d]|b[d+1]<<8|b[d+2]<<16|16777216*b[d+3]},z.Ag=function(b,d){return b[d+3]|b[d+2]<<8|b[d+1]<<16|16777216*b[d]},T.prototype=Object.create(Error.prototype),T.prototype.constructor=T},71371:function(K){function z(k,l){var T=new Error(k);return T.code=l,T}function e(k){try{return decodeURIComponent(escape(k))}catch{return k}}function S(k,l,T){this.input=k.subarray(l,T),this.start=l;var b=String.fromCharCode.apply(null,this.input.subarray(0,4));if(b!=="II*\0"&&b!=="MM\0*")throw z("invalid TIFF signature","EBADDATA");this.big_endian=b[0]==="M"}S.prototype.each=function(k){this.aborted=!1;var l=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:l}];this.ifds_to_read.length>0&&!this.aborted;){var T=this.ifds_to_read.shift();T.offset&&this.scan_ifd(T.id,T.offset,k)}},S.prototype.read_uint16=function(k){var l=this.input;if(k+2>l.length)throw z("unexpected EOF","EBADDATA");return this.big_endian?256*l[k]+l[k+1]:l[k]+256*l[k+1]},S.prototype.read_uint32=function(k){var l=this.input;if(k+4>l.length)throw z("unexpected EOF","EBADDATA");return this.big_endian?16777216*l[k]+65536*l[k+1]+256*l[k+2]+l[k+3]:l[k]+256*l[k+1]+65536*l[k+2]+16777216*l[k+3]},S.prototype.is_subifd_link=function(k,l){return k===0&&l===34665||k===0&&l===34853||k===34665&&l===40965},S.prototype.exif_format_length=function(k){switch(k){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},S.prototype.exif_format_read=function(k,l){var T;switch(k){case 1:case 2:return this.input[l];case 6:return(T=this.input[l])|33554430*(128&T);case 3:return this.read_uint16(l);case 8:return(T=this.read_uint16(l))|131070*(32768&T);case 4:return this.read_uint32(l);case 9:return 0|this.read_uint32(l);default:return null}},S.prototype.scan_ifd=function(k,l,T){var b=this.read_uint16(l);l+=2;for(var d=0;d<b;d++){var s=this.read_uint16(l),t=this.read_uint16(l+2),o=this.read_uint32(l+4),r=this.exif_format_length(t),n=o*r,a=n<=4?l+8:this.read_uint32(l+8),i=!1;if(a+n>this.input.length)throw z("unexpected EOF","EBADDATA");for(var u=[],h=a,f=0;f<o;f++,h+=r){var x=this.exif_format_read(t,h);if(x===null){u=null;break}u.push(x)}if(Array.isArray(u)&&t===2&&(u=e(String.fromCharCode.apply(null,u)))&&u[u.length-1]==="\0"&&(u=u.slice(0,-1)),this.is_subifd_link(k,s)&&Array.isArray(u)&&Number.isInteger(u[0])&&u[0]>0&&(this.ifds_to_read.push({id:s,offset:u[0]}),i=!0),T({is_big_endian:this.big_endian,ifd:k,tag:s,format:t,count:o,entry_offset:l+this.start,data_length:n,data_offset:a+this.start,value:u,is_subifd_link:i})===!1)return void(this.aborted=!0);l+=12}k===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(l)})},K.exports.ExifParser=S,K.exports.get_orientation=function(k){var l=0;try{return new S(k,0,k.length).each(function(T){if(T.ifd===0&&T.tag===274&&Array.isArray(T.value))return l=T.value[0],!1}),l}catch{return-1}}},76767:function(K,z,e){var S=e(14847).n8,k=e(14847).Ag;function l(o,r){if(o.length<4+r)return null;var n=k(o,r);return o.length<n+r||n<8?null:{boxtype:String.fromCharCode.apply(null,o.slice(r+4,r+8)),data:o.slice(r+8,r+n),end:r+n}}function T(o,r){for(var n=0;;){var a=l(o,n);if(!a)break;switch(a.boxtype){case"ispe":r.sizes.push({width:k(a.data,4),height:k(a.data,8)});break;case"irot":r.transforms.push({type:"irot",value:3&a.data[0]});break;case"imir":r.transforms.push({type:"imir",value:1&a.data[0]})}n=a.end}}function b(o,r,n){for(var a=0,i=0;i<n;i++)a=256*a+(o[r+i]||0);return a}function d(o,r){for(var n=o[4]>>4&15,a=15&o[4],i=o[5]>>4&15,u=S(o,6),h=8,f=0;f<u;f++){var x=S(o,h),v=S(o,h+=2),g=b(o,h+=2,i),y=S(o,h+=i);if(h+=2,v===0&&y===1){var p=b(o,h,n),m=b(o,h+n,a);r.item_loc[x]={length:m,offset:p+g}}h+=y*(n+a)}}function s(o,r){for(var n=S(o,4),a=6,i=0;i<n;i++){var u=l(o,a);if(!u)break;if(u.boxtype==="infe"){for(var h=S(u.data,4),f="",x=8;x<u.data.length&&u.data[x];x++)f+=String.fromCharCode(u.data[x]);r.item_inf[f]=h}a=u.end}}function t(o,r){for(var n=0;;){var a=l(o,n);if(!a)break;a.boxtype==="ipco"&&T(a.data,r),n=a.end}}K.exports.unbox=l,K.exports.readSizeFromMeta=function(o){var r={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(x,v){for(var g=4;;){var y=l(x,g);if(!y)break;y.boxtype==="iprp"&&t(y.data,v),y.boxtype==="iloc"&&d(y.data,v),y.boxtype==="iinf"&&s(y.data,v),g=y.end}}(o,r),r.sizes.length){var n,a,i,u=(a=(n=r.sizes).reduce(function(x,v){return x.width>v.width||x.width===v.width&&x.height>v.height?x:v}),i=n.reduce(function(x,v){return x.height>v.height||x.height===v.height&&x.width>v.width?x:v}),a.width>i.height||a.width===i.height&&a.height>i.width?a:i),h=1;r.transforms.forEach(function(x){var v={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},g={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(x.type==="imir"&&(h=x.value===0?g[h]:v[h=v[h=g[h]]]),x.type==="irot")for(var y=0;y<x.value;y++)h=v[h]});var f=null;return r.item_inf.Exif&&(f=r.item_loc[r.item_inf.Exif]),{width:u.width,height:u.height,orientation:r.transforms.length?h:null,variants:r.sizes,exif_location:f}}},K.exports.getMimeType=function(o){var r=String.fromCharCode.apply(null,o.slice(0,4)),n={};n[r]=!0;for(var a=8;a<o.length;a+=4)n[String.fromCharCode.apply(null,o.slice(a,a+4))]=!0;if(n.mif1||n.msf1||n.miaf)return r==="avif"||r==="avis"||r==="avio"?{type:"avif",mime:"image/avif"}:r==="heic"||r==="heix"?{type:"heic",mime:"image/heic"}:r==="hevc"||r==="hevx"?{type:"heic",mime:"image/heic-sequence"}:n.avif||n.avis?{type:"avif",mime:"image/avif"}:n.heic||n.heix||n.hevc||n.hevx||n.heis?n.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},24461:function(K,z,e){var S=e(14847).eG,k=e(14847).OF,l=e(14847).Ag,T=e(76767),b=e(71371),d=S("ftyp");K.exports=function(s){if(k(s,4,d)){var t=T.unbox(s,0);if(t){var o=T.getMimeType(t.data);if(o){for(var r,n=t.end;;){var a=T.unbox(s,n);if(!a)break;if(n=a.end,a.boxtype==="mdat")return;if(a.boxtype==="meta"){r=a.data;break}}if(r){var i=T.readSizeFromMeta(r);if(i){var u={width:i.width,height:i.height,type:o.type,mime:o.mime,wUnits:"px",hUnits:"px"};if(i.variants.length>1&&(u.variants=i.variants),i.orientation&&(u.orientation=i.orientation),i.exif_location&&i.exif_location.offset+i.exif_location.length<=s.length){var h=l(s,i.exif_location.offset),f=s.slice(i.exif_location.offset+h+4,i.exif_location.offset+i.exif_location.length),x=b.get_orientation(f);x>0&&(u.orientation=x)}return u}}}}}}},2504:function(K,z,e){var S=e(14847).eG,k=e(14847).OF,l=e(14847).mP,T=S("BM");K.exports=function(b){if(!(b.length<26)&&k(b,0,T))return{width:l(b,18),height:l(b,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},47342:function(K,z,e){var S=e(14847).eG,k=e(14847).OF,l=e(14847).mP,T=S("GIF87a"),b=S("GIF89a");K.exports=function(d){if(!(d.length<10)&&(k(d,0,T)||k(d,0,b)))return{width:l(d,6),height:l(d,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},31355:function(K,z,e){var S=e(14847).mP;K.exports=function(k){var l=S(k,0),T=S(k,2),b=S(k,4);if(l===0&&T===1&&b){for(var d=[],s={width:0,height:0},t=0;t<b;t++){var o=k[6+16*t]||256,r=k[6+16*t+1]||256,n={width:o,height:r};d.push(n),(o>s.width||r>s.height)&&(s=n)}return{width:s.width,height:s.height,variants:d,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},54261:function(K,z,e){var S=e(14847).n8,k=e(14847).eG,l=e(14847).OF,T=e(71371),b=k("Exif\0\0");K.exports=function(d){if(!(d.length<2)&&d[0]===255&&d[1]===216&&d[2]===255)for(var s=2;;){for(;;){if(d.length-s<2)return;if(d[s++]===255)break}for(var t,o,r=d[s++];r===255;)r=d[s++];if(208<=r&&r<=217||r===1)t=0;else{if(!(192<=r&&r<=254)||d.length-s<2)return;t=S(d,s)-2,s+=2}if(r===217||r===218)return;if(r===225&&t>=10&&l(d,s,b)&&(o=T.get_orientation(d.slice(s+6,s+t))),t>=5&&192<=r&&r<=207&&r!==196&&r!==200&&r!==204){if(d.length-s<t)return;var n={width:S(d,s+3),height:S(d,s+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return o>0&&(n.orientation=o),n}s+=t}}},6303:function(K,z,e){var S=e(14847).eG,k=e(14847).OF,l=e(14847).Ag,T=S(`PNG\r

`),b=S("IHDR");K.exports=function(d){if(!(d.length<24)&&k(d,0,T)&&k(d,12,b))return{width:l(d,16),height:l(d,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},38689:function(K,z,e){var S=e(14847).eG,k=e(14847).OF,l=e(14847).Ag,T=S("8BPS\0");K.exports=function(b){if(!(b.length<22)&&k(b,0,T))return{width:l(b,18),height:l(b,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},6881:function(K){function z(s){return typeof s=="number"&&isFinite(s)&&s>0}var e=/<[-_.:a-zA-Z0-9][^>]*>/,S=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,k=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,l=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,T=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,b=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function d(s){return b.test(s)?s.match(b)[0]:"px"}K.exports=function(s){if(function(g){var y,p=0,m=g.length;for(g[0]===239&&g[1]===187&&g[2]===191&&(p=3);p<m&&((y=g[p])===32||y===9||y===13||y===10);)p++;return p!==m&&g[p]===60}(s)){for(var t="",o=0;o<s.length;o++)t+=String.fromCharCode(s[o]);var r=(t.match(e)||[""])[0];if(S.test(r)){var n=function(g){var y=g.match(k),p=g.match(l),m=g.match(T);return{width:y&&(y[1]||y[2]),height:p&&(p[1]||p[2]),viewbox:m&&(m[1]||m[2])}}(r),a=parseFloat(n.width),i=parseFloat(n.height);if(n.width&&n.height)return!z(a)||!z(i)?void 0:{width:a,height:i,type:"svg",mime:"image/svg+xml",wUnits:d(n.width),hUnits:d(n.height)};var u=(n.viewbox||"").split(" "),h={width:u[2],height:u[3]},f=parseFloat(h.width),x=parseFloat(h.height);if(z(f)&&z(x)&&d(h.width)===d(h.height)){var v=f/x;return n.width?z(a)?{width:a,height:a/v,type:"svg",mime:"image/svg+xml",wUnits:d(n.width),hUnits:d(n.width)}:void 0:n.height?z(i)?{width:i*v,height:i,type:"svg",mime:"image/svg+xml",wUnits:d(n.height),hUnits:d(n.height)}:void 0:{width:f,height:x,type:"svg",mime:"image/svg+xml",wUnits:d(h.width),hUnits:d(h.height)}}}}}},66278:function(K,z,e){var S=e(14847).eG,k=e(14847).OF,l=e(14847).mP,T=e(14847).n8,b=e(14847).nm,d=e(14847).Ag,s=S("II*\0"),t=S("MM\0*");function o(a,i,u){return u?T(a,i):l(a,i)}function r(a,i,u){return u?d(a,i):b(a,i)}function n(a,i,u){var h=o(a,i+2,u);return r(a,i+4,u)!==1||h!==3&&h!==4?null:h===3?o(a,i+8,u):r(a,i+8,u)}K.exports=function(a){if(!(a.length<8)&&(k(a,0,s)||k(a,0,t))){var i=a[0]===77,u=r(a,4,i)-8;if(!(u<0)){var h=u+8;if(!(a.length-h<2)){var f=12*o(a,h+0,i);if(!(f<=0||(h+=2,a.length-h<f))){var x,v,g,y;for(x=0;x<f;x+=12)(y=o(a,h+x,i))===256?v=n(a,h+x,i):y===257&&(g=n(a,h+x,i));return v&&g?{width:v,height:g,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},90784:function(K,z,e){var S=e(14847).eG,k=e(14847).OF,l=e(14847).mP,T=e(14847).nm,b=e(71371),d=S("RIFF"),s=S("WEBP");function t(n,a){if(n[a+3]===157&&n[a+4]===1&&n[a+5]===42)return{width:16383&l(n,a+6),height:16383&l(n,a+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function o(n,a){if(n[a]===47){var i=T(n,a+1);return{width:1+(16383&i),height:1+(i>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function r(n,a){return{width:1+(n[a+6]<<16|n[a+5]<<8|n[a+4]),height:1+(n[a+9]<<a|n[a+8]<<8|n[a+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}K.exports=function(n){if(!(n.length<16)&&(k(n,0,d)||k(n,8,s))){var a=12,i=null,u=0,h=T(n,4)+8;if(!(h>n.length)){for(;a+8<h;)if(n[a]!==0){var f=String.fromCharCode.apply(null,n.slice(a,a+4)),x=T(n,a+4);f==="VP8 "&&x>=10?i=i||t(n,a+8):f==="VP8L"&&x>=9?i=i||o(n,a+8):f==="VP8X"&&x>=10?i=i||r(n,a+8):f==="EXIF"&&(u=b.get_orientation(n.slice(a+8,a+8+x)),a=1/0),a+=8+x}else a++;if(i)return u>0&&(i.orientation=u),i}}}},91497:function(K,z,e){K.exports={avif:e(24461),bmp:e(2504),gif:e(47342),ico:e(31355),jpeg:e(54261),png:e(6303),psd:e(38689),svg:e(6881),tiff:e(66278),webp:e(90784)}},33575:function(K,z,e){var S=e(91497);K.exports=function(k){return function(l){for(var T=Object.keys(S),b=0;b<T.length;b++){var d=S[T[b]](l);if(d)return d}return null}(k)},K.exports.parsers=S},90386:function(K){var z,e,S=K.exports={};function k(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function T(i){if(z===setTimeout)return setTimeout(i,0);if((z===k||!z)&&setTimeout)return z=setTimeout,setTimeout(i,0);try{return z(i,0)}catch{try{return z.call(null,i,0)}catch{return z.call(this,i,0)}}}(function(){try{z=typeof setTimeout=="function"?setTimeout:k}catch{z=k}try{e=typeof clearTimeout=="function"?clearTimeout:l}catch{e=l}})();var b,d=[],s=!1,t=-1;function o(){s&&b&&(s=!1,b.length?d=b.concat(d):t=-1,d.length&&r())}function r(){if(!s){var i=T(o);s=!0;for(var u=d.length;u;){for(b=d,d=[];++t<u;)b&&b[t].run();t=-1,u=d.length}b=null,s=!1,function(h){if(e===clearTimeout)return clearTimeout(h);if((e===l||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(h);try{e(h)}catch{try{return e.call(null,h)}catch{return e.call(this,h)}}}(i)}}function n(i,u){this.fun=i,this.array=u}function a(){}S.nextTick=function(i){var u=new Array(arguments.length-1);if(arguments.length>1)for(var h=1;h<arguments.length;h++)u[h-1]=arguments[h];d.push(new n(i,u)),d.length!==1||s||T(r)},n.prototype.run=function(){this.fun.apply(null,this.array)},S.title="browser",S.browser=!0,S.env={},S.argv=[],S.version="",S.versions={},S.on=a,S.addListener=a,S.once=a,S.off=a,S.removeListener=a,S.removeAllListeners=a,S.emit=a,S.prependListener=a,S.prependOnceListener=a,S.listeners=function(i){return[]},S.binding=function(i){throw new Error("process.binding is not supported")},S.cwd=function(){return"/"},S.chdir=function(i){throw new Error("process.chdir is not supported")},S.umask=function(){return 0}},5877:function(K,z,e){for(var S=e(9748),k=typeof window>"u"?e.g:window,l=["moz","webkit"],T="AnimationFrame",b=k["request"+T],d=k["cancel"+T]||k["cancelRequest"+T],s=0;!b&&s<l.length;s++)b=k[l[s]+"Request"+T],d=k[l[s]+"Cancel"+T]||k[l[s]+"CancelRequest"+T];if(!b||!d){var t=0,o=0,r=[];b=function(n){if(r.length===0){var a=S(),i=Math.max(0,16.666666666666668-(a-t));t=i+a,setTimeout(function(){var u=r.slice(0);r.length=0;for(var h=0;h<u.length;h++)if(!u[h].cancelled)try{u[h].callback(t)}catch(f){setTimeout(function(){throw f},0)}},Math.round(i))}return r.push({handle:++o,callback:n,cancelled:!1}),o},d=function(n){for(var a=0;a<r.length;a++)r[a].handle===n&&(r[a].cancelled=!0)}}K.exports=function(n){return b.call(k,n)},K.exports.cancel=function(){d.apply(k,arguments)},K.exports.polyfill=function(n){n||(n=k),n.requestAnimationFrame=b,n.cancelAnimationFrame=d}},3593:function(K,z,e){var S=e(21527),k=e(25075),l=e(93447),T=e(71299),b=e(56131),d=e(30120),s=e(57060),t=s.float32,o=s.fract32;K.exports=function(n,a){if(typeof n=="function"?(a||(a={}),a.regl=n):a=n,a.length&&(a.positions=a),!(n=a.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var i,u,h,f,x,v,g=n._gl,y={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},p=[];return f=n.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),u=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),h=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),x=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),v=n.buffer({usage:"static",type:"float",data:r}),M(a),i=n({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:n.prop("range"),lineWidth:n.prop("lineWidth"),capSize:n.prop("capSize"),opacity:n.prop("opacity"),scale:n.prop("scale"),translate:n.prop("translate"),scaleFract:n.prop("scaleFract"),translateFract:n.prop("translateFract"),viewport:function(E,L){return[L.viewport.x,L.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:f,offset:function(E,L){return 4*L.offset},divisor:1},position:{buffer:u,offset:function(E,L){return 8*L.offset},divisor:1},positionFract:{buffer:h,offset:function(E,L){return 8*L.offset},divisor:1},error:{buffer:x,offset:function(E,L){return 16*L.offset},divisor:1},direction:{buffer:v,stride:24,offset:0},lineOffset:{buffer:v,stride:24,offset:8},capOffset:{buffer:v,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:n.prop("viewport")},viewport:n.prop("viewport"),stencil:!1,instances:n.prop("count"),count:r.length}),b(m,{update:M,draw:w,destroy:_,regl:n,gl:g,canvas:g.canvas,groups:p}),m;function m(E){E?M(E):E===null&&_(),w()}function w(E){if(typeof E=="number")return c(E);E&&!Array.isArray(E)&&(E=[E]),n._refresh(),p.forEach(function(L,C){L&&(E&&(E[C]?L.draw=!0:L.draw=!1),L.draw?c(C):L.draw=!0)})}function c(E){typeof E=="number"&&(E=p[E]),E!=null&&E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1&&(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],i(E),E.after&&E.after(E))}function M(E){if(E){E.length!=null?typeof E[0]=="number"&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var L=0,C=0;if(m.groups=p=E.map(function(D,U){var j=p[U];return D&&(typeof D=="function"?D={after:D}:typeof D[0]=="number"&&(D={positions:D}),D=T(D,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),j||(p[U]=j={id:U,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},D=b({},y,D)),l(j,D,[{lineWidth:function(J){return .5*+J},capSize:function(J){return .5*+J},opacity:parseFloat,errors:function(J){return J=d(J),C+=J.length,J},positions:function(J,X){return J=d(J,"float64"),X.count=Math.floor(J.length/2),X.bounds=S(J,2),X.offset=L,L+=X.count,J}},{color:function(J,X){var Z=X.count;if(J||(J="transparent"),!Array.isArray(J)||typeof J[0]=="number"){var Y=J;J=Array(Z);for(var W=0;W<Z;W++)J[W]=Y}if(J.length<Z)throw Error("Not enough colors");for(var Q=new Uint8Array(4*Z),ne=0;ne<Z;ne++){var re=k(J[ne],"uint8");Q.set(re,4*ne)}return Q},range:function(J,X,Z){var Y=X.bounds;return J||(J=Y),X.scale=[1/(J[2]-J[0]),1/(J[3]-J[1])],X.translate=[-J[0],-J[1]],X.scaleFract=o(X.scale),X.translateFract=o(X.translate),J},viewport:function(J){var X;return Array.isArray(J)?X={x:J[0],y:J[1],width:J[2]-J[0],height:J[3]-J[1]}:J?(X={x:J.x||J.left||0,y:J.y||J.top||0},J.right?X.width=J.right-X.x:X.width=J.w||J.width||0,J.bottom?X.height=J.bottom-X.y:X.height=J.h||J.height||0):X={x:0,y:0,width:g.drawingBufferWidth,height:g.drawingBufferHeight},X}}])),j}),L||C){var O=p.reduce(function(D,U,j){return D+(U?U.count:0)},0),I=new Float64Array(2*O),N=new Uint8Array(4*O),R=new Float32Array(4*O);p.forEach(function(D,U){if(D){var j=D.positions,J=D.count,X=D.offset,Z=D.color,Y=D.errors;J&&(N.set(Z,4*X),R.set(Y,4*X),I.set(j,2*X))}});var V=t(I);u(V);var F=o(I,V);h(F),f(N),x(R)}}}function _(){u.destroy(),h.destroy(),f.destroy(),x.destroy(),v.destroy()}};var r=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},46075:function(K,z,e){var S=e(25075),k=e(21527),l=e(56131),T=e(56068),b=e(71299),d=e(30120),s=e(11474),t=e(54),o=e(57060),r=o.float32,n=o.fract32,a=e(83522),i=e(18863),u=e(6851);function h(f,x){if(!(this instanceof h))return new h(f,x);if(typeof f=="function"?(x||(x={}),x.regl=f):x=f,x.length&&(x.positions=x),!(f=x.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=f._gl,this.regl=f,this.passes=[],this.shaders=h.shaders.has(f)?h.shaders.get(f):h.shaders.set(f,h.createShaders(f)).get(f),this.update(x)}K.exports=h,h.dashMult=2,h.maxPatternLength=256,h.precisionThreshold=3e6,h.maxPoints=1e4,h.maxLines=2048,h.shaders=new a,h.createShaders=function(f){var x,v=f.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),g={primitive:"triangle strip",instances:f.prop("count"),count:4,offset:0,uniforms:{miterMode:function(p,m){return m.join==="round"?2:1},miterLimit:f.prop("miterLimit"),scale:f.prop("scale"),scaleFract:f.prop("scaleFract"),translateFract:f.prop("translateFract"),translate:f.prop("translate"),thickness:f.prop("thickness"),dashTexture:f.prop("dashTexture"),opacity:f.prop("opacity"),pixelRatio:f.context("pixelRatio"),id:f.prop("id"),dashLength:f.prop("dashLength"),viewport:function(p,m){return[m.viewport.x,m.viewport.y,p.viewportWidth,p.viewportHeight]},depth:f.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(p,m){return!m.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:f.prop("viewport")},viewport:f.prop("viewport")},y=f(l({vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:v,divisor:0,stride:8,offset:0},lineTop:{buffer:v,divisor:0,stride:8,offset:4},aCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:f.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},g));try{x=f(l({cull:{enable:!0,face:"back"},vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:v,divisor:0,stride:8,offset:0},lineTop:{buffer:v,divisor:0,stride:8,offset:4},aColor:{buffer:f.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:f.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},g))}catch{x=y}return{fill:f({primitive:"triangle",elements:function(p,m){return m.triangles},offset:0,vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:f.prop("scale"),color:f.prop("fill"),scaleFract:f.prop("scaleFract"),translateFract:f.prop("translateFract"),translate:f.prop("translate"),opacity:f.prop("opacity"),pixelRatio:f.context("pixelRatio"),id:f.prop("id"),viewport:function(p,m){return[m.viewport.x,m.viewport.y,p.viewportWidth,p.viewportHeight]}},attributes:{position:{buffer:f.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:8}},blend:g.blend,depth:{enable:!1},scissor:g.scissor,stencil:g.stencil,viewport:g.viewport}),rect:y,miter:x}},h.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},h.prototype.render=function(){for(var f,x=[],v=arguments.length;v--;)x[v]=arguments[v];x.length&&(f=this).update.apply(f,x),this.draw()},h.prototype.draw=function(){for(var f=this,x=[],v=arguments.length;v--;)x[v]=arguments[v];return(x.length?x:this.passes).forEach(function(g,y){var p;if(g&&Array.isArray(g))return(p=f).draw.apply(p,g);typeof g=="number"&&(g=f.passes[g]),g&&g.count>1&&g.opacity&&(f.regl._refresh(),g.fill&&g.triangles&&g.triangles.length>2&&f.shaders.fill(g),g.thickness&&(g.scale[0]*g.viewport.width>h.precisionThreshold||g.scale[1]*g.viewport.height>h.precisionThreshold||g.join==="rect"||!g.join&&(g.thickness<=2||g.count>=h.maxPoints)?f.shaders.rect(g):f.shaders.miter(g)))}),this},h.prototype.update=function(f){var x=this;if(f){f.length!=null?typeof f[0]=="number"&&(f=[{positions:f}]):Array.isArray(f)||(f=[f]);var v=this.regl,g=this.gl;if(f.forEach(function(c,M){var _=x.passes[M];if(c!==void 0)if(c!==null){if(typeof c[0]=="number"&&(c={positions:c}),c=b(c,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),_||(x.passes[M]=_={id:M,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:v.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:v.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:v.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:v.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},c=l({},h.defaults,c)),c.thickness!=null&&(_.thickness=parseFloat(c.thickness)),c.opacity!=null&&(_.opacity=parseFloat(c.opacity)),c.miterLimit!=null&&(_.miterLimit=parseFloat(c.miterLimit)),c.overlay!=null&&(_.overlay=!!c.overlay,M<h.maxLines&&(_.depth=2*(h.maxLines-1-M%h.maxLines)/h.maxLines-1)),c.join!=null&&(_.join=c.join),c.hole!=null&&(_.hole=c.hole),c.fill!=null&&(_.fill=c.fill?S(c.fill,"uint8"):null),c.viewport!=null&&(_.viewport=i(c.viewport)),_.viewport||(_.viewport=i([g.drawingBufferWidth,g.drawingBufferHeight])),c.close!=null&&(_.close=c.close),c.positions===null&&(c.positions=[]),c.positions){var E,L;if(c.positions.x&&c.positions.y){var C=c.positions.x,O=c.positions.y;L=_.count=Math.max(C.length,O.length),E=new Float64Array(2*L);for(var I=0;I<L;I++)E[2*I]=C[I],E[2*I+1]=O[I]}else E=d(c.positions,"float64"),L=_.count=Math.floor(E.length/2);var N=_.bounds=k(E,2);if(_.fill){for(var R=[],V={},F=0,D=0,U=0,j=_.count;D<j;D++){var J=E[2*D],X=E[2*D+1];isNaN(J)||isNaN(X)||J==null||X==null?(J=E[2*F],X=E[2*F+1],V[D]=F):F=D,R[U++]=J,R[U++]=X}if(c.splitNull){_.count-1 in V||(V[_.count]=_.count-1);var Z=Object.keys(V).map(Number).sort(function(yt,dt){return yt-dt}),Y=[],W=0,Q=_.hole!=null?_.hole[0]:null;if(Q!=null){var ne=u(Z,function(yt){return yt>=Q});(Z=Z.slice(0,ne)).push(Q)}for(var re=function(yt){var dt=R.slice(2*W,2*Z[yt]).concat(Q?R.slice(2*Q):[]),Pt=(_.hole||[]).map(function(Ot){return Ot-Q+(Z[yt]-W)}),Et=s(dt,Pt);Et=Et.map(function(Ot){return Ot+W+(Ot+W<Z[yt]?0:Q-Z[yt])}),Y.push.apply(Y,Et),W=Z[yt]+1},ie=0;ie<Z.length;ie++)re(ie);for(var se=0,ge=Y.length;se<ge;se++)V[Y[se]]!=null&&(Y[se]=V[Y[se]]);_.triangles=Y}else{for(var ue=s(R,_.hole||[]),ce=0,le=ue.length;ce<le;ce++)V[ue[ce]]!=null&&(ue[ce]=V[ue[ce]]);_.triangles=ue}}var de=new Float64Array(E);t(de,2,N);var Ce=new Float64Array(2*L+6);_.close?E[0]===E[2*L-2]&&E[1]===E[2*L-1]?(Ce[0]=de[2*L-4],Ce[1]=de[2*L-3]):(Ce[0]=de[2*L-2],Ce[1]=de[2*L-1]):(Ce[0]=de[0],Ce[1]=de[1]),Ce.set(de,2),_.close?E[0]===E[2*L-2]&&E[1]===E[2*L-1]?(Ce[2*L+2]=de[2],Ce[2*L+3]=de[3],_.count-=1):(Ce[2*L+2]=de[0],Ce[2*L+3]=de[1],Ce[2*L+4]=de[2],Ce[2*L+5]=de[3]):(Ce[2*L+2]=de[2*L-2],Ce[2*L+3]=de[2*L-1],Ce[2*L+4]=de[2*L-2],Ce[2*L+5]=de[2*L-1]);var xe=r(Ce);_.positionBuffer(xe);var _e=n(Ce,xe);_.positionFractBuffer(_e)}if(c.range?_.range=c.range:_.range||(_.range=_.bounds),(c.range||c.positions)&&_.count){var we=_.bounds,Ae=we[2]-we[0],$=we[3]-we[1],oe=_.range[2]-_.range[0],pe=_.range[3]-_.range[1];_.scale=[Ae/oe,$/pe],_.translate=[-_.range[0]/oe+we[0]/oe||0,-_.range[1]/pe+we[1]/pe||0],_.scaleFract=n(_.scale),_.translateFract=n(_.translate)}if(c.dashes){var ye,ke=0;if(!c.dashes||c.dashes.length<2)ke=1,ye=new Uint8Array([255,255,255,255,255,255,255,255]);else{ke=0;for(var De=0;De<c.dashes.length;++De)ke+=c.dashes[De];ye=new Uint8Array(ke*h.dashMult);for(var Pe=0,Re=255,fe=0;fe<2;fe++)for(var ve=0;ve<c.dashes.length;++ve){for(var Te=0,ze=c.dashes[ve]*h.dashMult*.5;Te<ze;++Te)ye[Pe++]=Re;Re^=255}}_.dashLength=ke,_.dashTexture({channels:1,data:ye,width:ye.length,height:1,mag:"linear",min:"linear"},0,0)}if(c.color){var He=_.count,Ve=c.color;Ve||(Ve="transparent");var nt=new Uint8Array(4*He+4);if(Array.isArray(Ve)&&typeof Ve[0]!="number"){for(var tt=0;tt<He;tt++){var ot=S(Ve[tt],"uint8");nt.set(ot,4*tt)}nt.set(S(Ve[0],"uint8"),4*He)}else for(var pt=S(Ve,"uint8"),Tt=0;Tt<He+1;Tt++)nt.set(pt,4*Tt);_.colorBuffer({usage:"dynamic",type:"uint8",data:nt})}}else x.passes[M]=null}),f.length<this.passes.length){for(var y=f.length;y<this.passes.length;y++){var p=this.passes[y];p&&(p.colorBuffer.destroy(),p.positionBuffer.destroy(),p.dashTexture.destroy())}this.passes.length=f.length}for(var m=[],w=0;w<this.passes.length;w++)this.passes[w]!==null&&m.push(this.passes[w]);return this.passes=m,this}},h.prototype.destroy=function(){return this.passes.forEach(function(f){f.colorBuffer.destroy(),f.positionBuffer.destroy(),f.dashTexture.destroy()}),this.passes.length=0,this}},11870:function(K,z,e){function S(g,y){return function(p){if(Array.isArray(p))return p}(g)||function(p,m){var w=p==null?null:typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(w!=null){var c,M,_=[],E=!0,L=!1;try{for(w=w.call(p);!(E=(c=w.next()).done)&&(_.push(c.value),!m||_.length!==m);E=!0);}catch(C){L=!0,M=C}finally{try{E||w.return==null||w.return()}finally{if(L)throw M}}return _}}(g,y)||k(g,y)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function k(g,y){if(g){if(typeof g=="string")return l(g,y);var p=Object.prototype.toString.call(g).slice(8,-1);return p==="Object"&&g.constructor&&(p=g.constructor.name),p==="Map"||p==="Set"?Array.from(g):p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?l(g,y):void 0}}function l(g,y){(y==null||y>g.length)&&(y=g.length);for(var p=0,m=new Array(y);p<y;p++)m[p]=g[p];return m}var T=e(25075),b=e(21527),d=e(6475),s=e(88294),t=e(56131),o=e(56068),r=e(71299),n=e(93447),a=e(30120),i=e(62683),u=e(57060),h=e(18863),f=x;function x(g,y){var p=this;if(!(this instanceof x))return new x(g,y);typeof g=="function"?(y||(y={}),y.regl=g):(y=g,g=null),y&&y.length&&(y.positions=y);var m,w=(g=y.regl)._gl,c=[];this.tooManyColors=i,m=g.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),t(this,{regl:g,gl:w,groups:[],markerCache:[null],markerTextures:[null],palette:c,paletteIds:{},paletteTexture:m,maxColors:255,maxSize:100,canvas:w.canvas}),this.update(y);var M={uniforms:{constPointSize:!!y.constPointSize,opacity:g.prop("opacity"),paletteSize:function(L,C){return[p.tooManyColors?0:255,m.height]},pixelRatio:g.context("pixelRatio"),scale:g.prop("scale"),scaleFract:g.prop("scaleFract"),translate:g.prop("translate"),translateFract:g.prop("translateFract"),markerTexture:g.prop("markerTexture"),paletteTexture:m},attributes:{x:function(L,C){return C.xAttr||{buffer:C.positionBuffer,stride:8,offset:0}},y:function(L,C){return C.yAttr||{buffer:C.positionBuffer,stride:8,offset:4}},xFract:function(L,C){return C.xAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:0}},yFract:function(L,C){return C.yAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:4}},size:function(L,C){return C.size.length?{buffer:C.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*C.size/p.maxSize)]}},borderSize:function(L,C){return C.borderSize.length?{buffer:C.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*C.borderSize/p.maxSize)]}},colorId:function(L,C){return C.color.length?{buffer:C.colorBuffer,stride:p.tooManyColors?8:4,offset:0}:{constant:p.tooManyColors?c.slice(4*C.color,4*C.color+4):[C.color]}},borderColorId:function(L,C){return C.borderColor.length?{buffer:C.colorBuffer,stride:p.tooManyColors?8:4,offset:p.tooManyColors?4:2}:{constant:p.tooManyColors?c.slice(4*C.borderColor,4*C.borderColor+4):[C.borderColor]}},isActive:function(L,C){return C.activation===!0?{constant:[1]}:C.activation?C.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:g.prop("viewport")},viewport:g.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:g.prop("elements"),count:g.prop("count"),offset:g.prop("offset"),primitive:"points"},_=t({},M);_.frag=o([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),_.vert=o([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=g(_);var E=t({},M);E.frag=o([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),E.vert=o([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),i&&(E.frag=E.frag.replace("smoothstep","smoothStep"),_.frag=_.frag.replace("smoothstep","smoothStep")),this.drawCircle=g(E)}x.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},x.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},x.prototype.draw=function(){for(var g=this,y=arguments.length,p=new Array(y),m=0;m<y;m++)p[m]=arguments[m];var w=this.groups;if(p.length===1&&Array.isArray(p[0])&&(p[0][0]===null||Array.isArray(p[0][0]))&&(p=p[0]),this.regl._refresh(),p.length)for(var c=0;c<p.length;c++)this.drawItem(c,p[c]);else w.forEach(function(M,_){g.drawItem(_)});return this},x.prototype.drawItem=function(g,y){var p,m=this.groups,w=m[g];if(typeof y=="number"&&(g=y,w=m[y],y=null),w&&w.count&&w.opacity){w.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,w,y));for(var c=[],M=1;M<w.activation.length;M++)w.activation[M]&&(w.activation[M]===!0||w.activation[M].data.length)&&c.push.apply(c,function(_){if(Array.isArray(_))return l(_)}(p=this.getMarkerDrawOptions(M,w,y))||function(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}(p)||k(p)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}());c.length&&this.drawMarker(c)}},x.prototype.getMarkerDrawOptions=function(g,y,p){var m=y.range,w=y.tree,c=y.viewport,M=y.activation,_=y.selectionBuffer,E=y.count;if(this.regl,!w)return p?[t({},y,{markerTexture:this.markerTextures[g],activation:M[g],count:p.length,elements:p,offset:0})]:[t({},y,{markerTexture:this.markerTextures[g],activation:M[g],offset:0})];var L=[],C=w.range(m,{lod:!0,px:[(m[2]-m[0])/c.width,(m[3]-m[1])/c.height]});if(p){for(var O=M[g].data,I=new Uint8Array(E),N=0;N<p.length;N++){var R=p[N];I[R]=O?O[R]:1}_.subdata(I)}for(var V=C.length;V--;){var F=S(C[V],2),D=F[0],U=F[1];L.push(t({},y,{markerTexture:this.markerTextures[g],activation:p?_:M[g],offset:D,count:U-D}))}return L},x.prototype.update=function(){for(var g=this,y=arguments.length,p=new Array(y),m=0;m<y;m++)p[m]=arguments[m];if(p.length){p.length===1&&Array.isArray(p[0])&&(p=p[0]);var w=this.groups,c=this.gl,M=this.regl,_=this.maxSize,E=this.maxColors,L=this.palette;this.groups=w=p.map(function(C,O){var I=w[O];if(C===void 0)return I;C===null?C={positions:null}:typeof C=="function"?C={ondraw:C}:typeof C[0]=="number"&&(C={positions:C}),(C=r(C,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions===null&&(C.positions=[]),C.tooManyColors!=null&&(g.tooManyColors=C.tooManyColors),I||(w[O]=I={id:O,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:M.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:M.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:M.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:M.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:M.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},C=t({},x.defaults,C)),C.positions&&!("marker"in C)&&(C.marker=I.marker,delete I.marker),C.marker&&!("positions"in C)&&(C.positions=I.positions,delete I.positions);var N=0,R=0;if(n(I,C,[{snap:!0,size:function(ce,le){return ce==null&&(ce=x.defaults.size),N+=ce&&ce.length?1:0,ce},borderSize:function(ce,le){return ce==null&&(ce=x.defaults.borderSize),N+=ce&&ce.length?1:0,ce},opacity:parseFloat,color:function(ce,le){return ce==null&&(ce=x.defaults.color),ce=g.updateColor(ce),R++,ce},borderColor:function(ce,le){return ce==null&&(ce=x.defaults.borderColor),ce=g.updateColor(ce),R++,ce},bounds:function(ce,le,de){return"range"in de||(de.range=null),ce},positions:function(ce,le,de){var Ce=le.snap,xe=le.positionBuffer,_e=le.positionFractBuffer,we=le.selectionBuffer;if(ce.x||ce.y)return ce.x.length?le.xAttr={buffer:M.buffer(ce.x),offset:0,stride:4,count:ce.x.length}:le.xAttr={buffer:ce.x.buffer,offset:4*ce.x.offset||0,stride:4*(ce.x.stride||1),count:ce.x.count},ce.y.length?le.yAttr={buffer:M.buffer(ce.y),offset:0,stride:4,count:ce.y.length}:le.yAttr={buffer:ce.y.buffer,offset:4*ce.y.offset||0,stride:4*(ce.y.stride||1),count:ce.y.count},le.count=Math.max(le.xAttr.count,le.yAttr.count),ce;ce=a(ce,"float64");var Ae=le.count=Math.floor(ce.length/2),$=le.bounds=Ae?b(ce,2):null;if(de.range||le.range||(delete le.range,de.range=$),de.marker||le.marker||(delete le.marker,de.marker=null),Ce&&(Ce===!0||Ae>Ce)?le.tree=s(ce,{bounds:$}):Ce&&Ce.length&&(le.tree=Ce),le.tree){var oe={primitive:"points",usage:"static",data:le.tree,type:"uint32"};le.elements?le.elements(oe):le.elements=M.elements(oe)}var pe=u.float32(ce);return xe({data:pe,usage:"dynamic"}),_e({data:u.fract32(ce,pe),usage:"dynamic"}),we({data:new Uint8Array(Ae),type:"uint8",usage:"stream"}),ce}},{marker:function(ce,le,de){var Ce=le.activation;if(Ce.forEach(function(pe){return pe&&pe.destroy&&pe.destroy()}),Ce.length=0,ce&&typeof ce[0]!="number"){for(var xe=[],_e=0,we=Math.min(ce.length,le.count);_e<we;_e++){var Ae=g.addMarker(ce[_e]);xe[Ae]||(xe[Ae]=new Uint8Array(le.count)),xe[Ae][_e]=1}for(var $=0;$<xe.length;$++)if(xe[$]){var oe={data:xe[$],type:"uint8",usage:"static"};Ce[$]?Ce[$](oe):Ce[$]=M.buffer(oe),Ce[$].data=xe[$]}}else Ce[g.addMarker(ce)]=!0;return ce},range:function(ce,le,de){var Ce=le.bounds;if(Ce)return ce||(ce=Ce),le.scale=[1/(ce[2]-ce[0]),1/(ce[3]-ce[1])],le.translate=[-ce[0],-ce[1]],le.scaleFract=u.fract(le.scale),le.translateFract=u.fract(le.translate),ce},viewport:function(ce){return h(ce||[c.drawingBufferWidth,c.drawingBufferHeight])}}]),N){var V=I,F=V.count,D=V.size,U=V.borderSize,j=V.sizeBuffer,J=new Uint8Array(2*F);if(D.length||U.length)for(var X=0;X<F;X++)J[2*X]=Math.round(255*(D[X]==null?D:D[X])/_),J[2*X+1]=Math.round(255*(U[X]==null?U:U[X])/_);j({data:J,usage:"dynamic"})}if(R){var Z,Y=I,W=Y.count,Q=Y.color,ne=Y.borderColor,re=Y.colorBuffer;if(g.tooManyColors){if(Q.length||ne.length){Z=new Uint8Array(8*W);for(var ie=0;ie<W;ie++){var se=Q[ie];Z[8*ie]=L[4*se],Z[8*ie+1]=L[4*se+1],Z[8*ie+2]=L[4*se+2],Z[8*ie+3]=L[4*se+3];var ge=ne[ie];Z[8*ie+4]=L[4*ge],Z[8*ie+5]=L[4*ge+1],Z[8*ie+6]=L[4*ge+2],Z[8*ie+7]=L[4*ge+3]}}}else if(Q.length||ne.length){Z=new Uint8Array(4*W+2);for(var ue=0;ue<W;ue++)Q[ue]!=null&&(Z[4*ue]=Q[ue]%E,Z[4*ue+1]=Math.floor(Q[ue]/E)),ne[ue]!=null&&(Z[4*ue+2]=ne[ue]%E,Z[4*ue+3]=Math.floor(ne[ue]/E))}re({data:Z||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return I})}},x.prototype.addMarker=function(g){var y,p=this.markerTextures,m=this.regl,w=this.markerCache,c=g==null?0:w.indexOf(g);if(c>=0)return c;if(g instanceof Uint8Array||g instanceof Uint8ClampedArray)y=g;else{y=new Uint8Array(g.length);for(var M=0,_=g.length;M<_;M++)y[M]=255*g[M]}var E=Math.floor(Math.sqrt(y.length));return c=p.length,w.push(g),p.push(m.texture({channels:1,data:y,radius:E,mag:"linear",min:"linear"})),c},x.prototype.updateColor=function(g){var y=this.paletteIds,p=this.palette,m=this.maxColors;Array.isArray(g)||(g=[g]);var w=[];if(typeof g[0]=="number"){var c=[];if(Array.isArray(g))for(var M=0;M<g.length;M+=4)c.push(g.slice(M,M+4));else for(var _=0;_<g.length;_+=4)c.push(g.subarray(_,_+4));g=c}for(var E=0;E<g.length;E++){var L=g[E];L=T(L,"uint8");var C=d(L,!1);if(y[C]==null){var O=p.length;y[C]=Math.floor(O/4),p[O]=L[0],p[O+1]=L[1],p[O+2]=L[2],p[O+3]=L[3]}w[E]=y[C]}return!this.tooManyColors&&p.length>4*m&&(this.tooManyColors=!0),this.updatePalette(p),w.length===1?w[0]:w},x.prototype.updatePalette=function(g){if(!this.tooManyColors){var y=this.maxColors,p=this.paletteTexture,m=Math.ceil(.25*g.length/y);if(m>1)for(var w=.25*(g=g.slice()).length%y;w<m*y;w++)g.push(0,0,0,0);p.height<m&&p.resize(y,m),p.subimage({width:Math.min(.25*g.length,y),height:m,data:g},0,0)}},x.prototype.destroy=function(){return this.groups.forEach(function(g){g.sizeBuffer.destroy(),g.positionBuffer.destroy(),g.positionFractBuffer.destroy(),g.colorBuffer.destroy(),g.activation.forEach(function(y){return y&&y.destroy&&y.destroy()}),g.selectionBuffer.destroy(),g.elements&&g.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(g){return g&&g.destroy&&g.destroy()}),this};var v=e(56131);K.exports=function(g,y){var p=new f(g,y),m=p.render.bind(p);return v(m,{render:m,update:p.update.bind(p),draw:p.draw.bind(p),destroy:p.destroy.bind(p),regl:p.regl,gl:p.gl,canvas:p.gl.canvas,groups:p.groups,markers:p.markerCache,palette:p.palette}),m}},60487:function(K,z,e){var S=e(11870),k=e(71299),l=e(21527),T=e(5877),b=e(57471),d=e(18863),s=e(30120);function t(a,i){if(!(this instanceof t))return new t(a);this.traces=[],this.passes={},this.regl=a,this.scatter=S(a),this.canvas=this.scatter.canvas}function o(a,i,u){return(a.id!=null?a.id:a)<<16|(255&i)<<8|255&u}function r(a,i,u){var h,f,x,v,g=a[i],y=a[u];return g.length>2?(g[0],g[2],h=g[1],f=g[3]):g.length?(h=g[0],f=g[1]):(g.x,h=g.y,g.x,g.width,f=g.y+g.height),y.length>2?(x=y[0],v=y[2],y[1],y[3]):y.length?(x=y[0],v=y[1]):(x=y.x,y.y,v=y.x+y.width,y.y,y.height),[x,h,v,f]}function n(a){if(typeof a=="number")return[a,a,a,a];if(a.length===2)return[a[0],a[1],a[0],a[1]];var i=d(a);return[i.x,i.y,i.x+i.width,i.y+i.height]}K.exports=t,t.prototype.render=function(){for(var a,i=this,u=[],h=arguments.length;h--;)u[h]=arguments[h];return u.length&&(a=this).update.apply(a,u),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=T(function(){i.draw(),i.dirty=!0,i.planned=null})):(this.draw(),this.dirty=!0,T(function(){i.dirty=!1})),this)},t.prototype.update=function(){for(var a,i=[],u=arguments.length;u--;)i[u]=arguments[u];if(i.length){for(var h=0;h<i.length;h++)this.updateItem(h,i[h]);this.traces=this.traces.filter(Boolean);for(var f=[],x=0,v=0;v<this.traces.length;v++){for(var g=this.traces[v],y=this.traces[v].passes,p=0;p<y.length;p++)f.push(this.passes[y[p]]);g.passOffset=x,x+=g.passes.length}return(a=this.scatter).update.apply(a,f),this}},t.prototype.updateItem=function(a,i){var u=this.regl;if(i===null)return this.traces[a]=null,this;if(!i)return this;var h,f=k(i,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),x=this.traces[a]||(this.traces[a]={id:a,buffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:d([u._gl.drawingBufferWidth,u._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(f.color!=null&&(x.color=f.color),f.size!=null&&(x.size=f.size),f.marker!=null&&(x.marker=f.marker),f.borderColor!=null&&(x.borderColor=f.borderColor),f.borderSize!=null&&(x.borderSize=f.borderSize),f.opacity!=null&&(x.opacity=f.opacity),f.viewport&&(x.viewport=d(f.viewport)),f.diagonal!=null&&(x.diagonal=f.diagonal),f.upper!=null&&(x.upper=f.upper),f.lower!=null&&(x.lower=f.lower),f.data){x.buffer(s(f.data)),x.columns=f.data.length,x.count=f.data[0].length,x.bounds=[];for(var v=0;v<x.columns;v++)x.bounds[v]=l(f.data[v],1)}f.range&&(x.range=f.range,h=x.range&&typeof x.range[0]!="number"),f.domain&&(x.domain=f.domain);var g=!1;f.padding!=null&&(Array.isArray(f.padding)&&f.padding.length===x.columns&&typeof f.padding[f.padding.length-1]=="number"?(x.padding=f.padding.map(n),g=!0):x.padding=n(f.padding));var y=x.columns,p=x.count,m=x.viewport.width,w=x.viewport.height,c=x.viewport.x,M=x.viewport.y,_=m/y,E=w/y;x.passes=[];for(var L=0;L<y;L++)for(var C=0;C<y;C++)if((x.diagonal||C!==L)&&(x.upper||!(L>C))&&(x.lower||!(L<C))){var O=o(x.id,L,C),I=this.passes[O]||(this.passes[O]={});if(f.data&&(f.transpose?I.positions={x:{buffer:x.buffer,offset:C,count:p,stride:y},y:{buffer:x.buffer,offset:L,count:p,stride:y}}:I.positions={x:{buffer:x.buffer,offset:C*p,count:p},y:{buffer:x.buffer,offset:L*p,count:p}},I.bounds=r(x.bounds,L,C)),f.domain||f.viewport||f.data){var N=g?r(x.padding,L,C):x.padding;if(x.domain){var R=r(x.domain,L,C),V=R[0],F=R[1],D=R[2],U=R[3];I.viewport=[c+V*m+N[0],M+F*w+N[1],c+D*m-N[2],M+U*w-N[3]]}else I.viewport=[c+C*_+_*N[0],M+L*E+E*N[1],c+(C+1)*_-_*N[2],M+(L+1)*E-E*N[3]]}f.color&&(I.color=x.color),f.size&&(I.size=x.size),f.marker&&(I.marker=x.marker),f.borderSize&&(I.borderSize=x.borderSize),f.borderColor&&(I.borderColor=x.borderColor),f.opacity&&(I.opacity=x.opacity),f.range&&(I.range=h?r(x.range,L,C):x.range||I.bounds),x.passes.push(O)}return this},t.prototype.draw=function(){for(var a,i=[],u=arguments.length;u--;)i[u]=arguments[u];if(i.length){for(var h=[],f=0;f<i.length;f++)if(typeof i[f]=="number"){var x=this.traces[i[f]],v=x.passes,g=x.passOffset;h.push.apply(h,b(g,g+v.length))}else if(i[f].length){var y=i[f],p=this.traces[f],m=p.passes,w=p.passOffset;m=m.map(function(c,M){h[w+M]=y})}(a=this.scatter).draw.apply(a,h)}else this.scatter.draw();return this},t.prototype.destroy=function(){return this.traces.forEach(function(a){a.buffer&&a.buffer.destroy&&a.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},98580:function(K){K.exports=function(){function z(je,Ke){this.id=ne++,this.type=je,this.data=Ke}function e(je){if(je.length===0)return[];var Ke=je.charAt(0),st=je.charAt(je.length-1);if(1<je.length&&Ke===st&&(Ke==='"'||Ke==="'"))return['"'+je.substr(1,je.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Ke=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(je))return e(je.substr(0,Ke.index)).concat(e(Ke[1])).concat(e(je.substr(Ke.index+Ke[0].length)));if((Ke=je.split(".")).length===1)return['"'+je.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(je=[],st=0;st<Ke.length;++st)je=je.concat(e(Ke[st]));return je}function S(je){return"["+e(je).join("][")+"]"}function k(je){return typeof je=="string"?je.split():je}function l(je){return typeof je=="string"?document.querySelector(je):je}function T(je){var Ke,st,Se,Ie,We=je||{};je={};var it=[],lt=[],gt=typeof window>"u"?1:window.devicePixelRatio,At=!1,kt={},ht=function(vt){},St=function(){};if(typeof We=="string"?Ke=document.querySelector(We):typeof We=="object"&&(typeof We.nodeName=="string"&&typeof We.appendChild=="function"&&typeof We.getBoundingClientRect=="function"?Ke=We:typeof We.drawArrays=="function"||typeof We.drawElements=="function"?Se=(Ie=We).canvas:("gl"in We?Ie=We.gl:"canvas"in We?Se=l(We.canvas):"container"in We&&(st=l(We.container)),"attributes"in We&&(je=We.attributes),"extensions"in We&&(it=k(We.extensions)),"optionalExtensions"in We&&(lt=k(We.optionalExtensions)),"onDone"in We&&(ht=We.onDone),"profile"in We&&(At=!!We.profile),"pixelRatio"in We&&(gt=+We.pixelRatio),"cachedCode"in We&&(kt=We.cachedCode))),Ke&&(Ke.nodeName.toLowerCase()==="canvas"?Se=Ke:st=Ke),!Ie){if(!Se){if(!(Ke=function(vt,Mt,It){function Ut(){var Yt=window.innerWidth,Kt=window.innerHeight;vt!==document.body&&(Yt=(Kt=qt.getBoundingClientRect()).right-Kt.left,Kt=Kt.bottom-Kt.top),qt.width=It*Yt,qt.height=It*Kt}var jt,qt=document.createElement("canvas");return Q(qt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),vt.appendChild(qt),vt===document.body&&(qt.style.position="absolute",Q(vt.style,{margin:0,padding:0})),vt!==document.body&&typeof ResizeObserver=="function"?(jt=new ResizeObserver(function(){setTimeout(Ut)})).observe(vt):window.addEventListener("resize",Ut,!1),Ut(),{canvas:qt,onDestroy:function(){jt?jt.disconnect():window.removeEventListener("resize",Ut),vt.removeChild(qt)}}}(st||document.body,0,gt)))return null;Se=Ke.canvas,St=Ke.onDestroy}je.premultipliedAlpha===void 0&&(je.premultipliedAlpha=!0),Ie=function(vt,Mt){function It(Ut){try{return vt.getContext(Ut,Mt)}catch{return null}}return It("webgl")||It("experimental-webgl")||It("webgl-experimental")}(Se,je)}return Ie?{gl:Ie,canvas:Se,container:st,extensions:it,optionalExtensions:lt,pixelRatio:gt,profile:At,cachedCode:kt,onDone:ht,onDestroy:St}:(St(),ht("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function b(je,Ke){for(var st=Array(je),Se=0;Se<je;++Se)st[Se]=Ke(Se);return st}function d(je){var Ke,st;return Ke=(65535<je)<<4,Ke|=st=(255<(je>>>=Ke))<<3,(Ke|=st=(15<(je>>>=st))<<2)|(st=(3<(je>>>=st))<<1)|je>>>st>>1}function s(){function je(Se){e:{for(var Ie=16;268435456>=Ie;Ie*=16)if(Se<=Ie){Se=Ie;break e}Se=0}return 0<(Ie=st[d(Se)>>2]).length?Ie.pop():new ArrayBuffer(Se)}function Ke(Se){st[d(Se.byteLength)>>2].push(Se)}var st=b(8,function(){return[]});return{alloc:je,free:Ke,allocType:function(Se,Ie){var We=null;switch(Se){case 5120:We=new Int8Array(je(Ie),0,Ie);break;case 5121:We=new Uint8Array(je(Ie),0,Ie);break;case 5122:We=new Int16Array(je(2*Ie),0,Ie);break;case 5123:We=new Uint16Array(je(2*Ie),0,Ie);break;case 5124:We=new Int32Array(je(4*Ie),0,Ie);break;case 5125:We=new Uint32Array(je(4*Ie),0,Ie);break;case 5126:We=new Float32Array(je(4*Ie),0,Ie);break;default:return null}return We.length!==Ie?We.subarray(0,Ie):We},freeType:function(Se){Ke(Se.buffer)}}}function t(je){return!!je&&typeof je=="object"&&Array.isArray(je.shape)&&Array.isArray(je.stride)&&typeof je.offset=="number"&&je.shape.length===je.stride.length&&(Array.isArray(je.data)||ce(je.data))}function o(je,Ke,st,Se,Ie,We){for(var it=0;it<Ke;++it)for(var lt=je[it],gt=0;gt<st;++gt)for(var At=lt[gt],kt=0;kt<Se;++kt)Ie[We++]=At[kt]}function r(je,Ke,st,Se,Ie){for(var We=1,it=st+1;it<Ke.length;++it)We*=Ke[it];var lt=Ke[st];if(Ke.length-st==4){var gt=Ke[st+1],At=Ke[st+2];for(Ke=Ke[st+3],it=0;it<lt;++it)o(je[it],gt,At,Ke,Se,Ie),Ie+=We}else for(it=0;it<lt;++it)r(je[it],Ke,st+1,Se,Ie),Ie+=We}function n(je){return 0|Ce[Object.prototype.toString.call(je)]}function a(je,Ke){for(var st=0;st<Ke.length;++st)je[st]=Ke[st]}function i(je,Ke,st,Se,Ie,We,it){for(var lt=0,gt=0;gt<st;++gt)for(var At=0;At<Se;++At)je[lt++]=Ke[Ie*gt+We*At+it]}function u(je,Ke,st,Se){function Ie(ht){this.id=gt++,this.buffer=je.createBuffer(),this.type=ht,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,st.profile&&(this.stats={size:0})}function We(ht,St,vt){ht.byteLength=St.byteLength,je.bufferData(ht.type,St,vt)}function it(ht,St,vt,Mt,It,Ut){if(ht.usage=vt,Array.isArray(St)){if(ht.dtype=Mt||5126,0<St.length)if(Array.isArray(St[0])){It=Ae(St);for(var jt=Mt=1;jt<It.length;++jt)Mt*=It[jt];ht.dimension=Mt,We(ht,St=we(St,It,ht.dtype),vt),Ut?ht.persistentData=St:ge.freeType(St)}else typeof St[0]=="number"?(ht.dimension=It,a(It=ge.allocType(ht.dtype,St.length),St),We(ht,It,vt),Ut?ht.persistentData=It:ge.freeType(It)):ce(St[0])&&(ht.dimension=St[0].length,ht.dtype=Mt||n(St[0])||5126,We(ht,St=we(St,[St.length,St[0].length],ht.dtype),vt),Ut?ht.persistentData=St:ge.freeType(St))}else if(ce(St))ht.dtype=Mt||n(St),ht.dimension=It,We(ht,St,vt),Ut&&(ht.persistentData=new Uint8Array(new Uint8Array(St.buffer)));else if(t(St)){It=St.shape;var qt=St.stride,Yt=(jt=St.offset,0),Kt=0,pn=0,nn=0;It.length===1?(Yt=It[0],Kt=1,pn=qt[0],nn=0):It.length===2&&(Yt=It[0],Kt=It[1],pn=qt[0],nn=qt[1]),ht.dtype=Mt||n(St.data)||5126,ht.dimension=Kt,i(It=ge.allocType(ht.dtype,Yt*Kt),St.data,Yt,Kt,pn,nn,jt),We(ht,It,vt),Ut?ht.persistentData=It:ge.freeType(It)}else St instanceof ArrayBuffer&&(ht.dtype=5121,ht.dimension=It,We(ht,St,vt),Ut&&(ht.persistentData=new Uint8Array(new Uint8Array(St))))}function lt(ht){Ke.bufferCount--,Se(ht),je.deleteBuffer(ht.buffer),ht.buffer=null,delete At[ht.id]}var gt=0,At={};Ie.prototype.bind=function(){je.bindBuffer(this.type,this.buffer)},Ie.prototype.destroy=function(){lt(this)};var kt=[];return st.profile&&(Ke.getTotalBufferSize=function(){var ht=0;return Object.keys(At).forEach(function(St){ht+=At[St].stats.size}),ht}),{create:function(ht,St,vt,Mt){function It(jt){var qt=35044,Yt=null,Kt=0,pn=0,nn=1;return Array.isArray(jt)||ce(jt)||t(jt)||jt instanceof ArrayBuffer?Yt=jt:typeof jt=="number"?Kt=0|jt:jt&&("data"in jt&&(Yt=jt.data),"usage"in jt&&(qt=_e[jt.usage]),"type"in jt&&(pn=xe[jt.type]),"dimension"in jt&&(nn=0|jt.dimension),"length"in jt&&(Kt=0|jt.length)),Ut.bind(),Yt?it(Ut,Yt,qt,pn,nn,Mt):(Kt&&je.bufferData(Ut.type,Kt,qt),Ut.dtype=pn||5121,Ut.usage=qt,Ut.dimension=nn,Ut.byteLength=Kt),st.profile&&(Ut.stats.size=Ut.byteLength*$[Ut.dtype]),It}Ke.bufferCount++;var Ut=new Ie(St);return At[Ut.id]=Ut,vt||It(ht),It._reglType="buffer",It._buffer=Ut,It.subdata=function(jt,qt){var Yt,Kt=0|(qt||0);if(Ut.bind(),ce(jt)||jt instanceof ArrayBuffer)je.bufferSubData(Ut.type,Kt,jt);else if(Array.isArray(jt)){if(0<jt.length)if(typeof jt[0]=="number"){var pn=ge.allocType(Ut.dtype,jt.length);a(pn,jt),je.bufferSubData(Ut.type,Kt,pn),ge.freeType(pn)}else(Array.isArray(jt[0])||ce(jt[0]))&&(Yt=Ae(jt),pn=we(jt,Yt,Ut.dtype),je.bufferSubData(Ut.type,Kt,pn),ge.freeType(pn))}else if(t(jt)){Yt=jt.shape;var nn=jt.stride,xn=pn=0,jn=0,mn=0;Yt.length===1?(pn=Yt[0],xn=1,jn=nn[0],mn=0):Yt.length===2&&(pn=Yt[0],xn=Yt[1],jn=nn[0],mn=nn[1]),Yt=Array.isArray(jt.data)?Ut.dtype:n(jt.data),i(Yt=ge.allocType(Yt,pn*xn),jt.data,pn,xn,jn,mn,jt.offset),je.bufferSubData(Ut.type,Kt,Yt),ge.freeType(Yt)}return It},st.profile&&(It.stats=Ut.stats),It.destroy=function(){lt(Ut)},It},createStream:function(ht,St){var vt=kt.pop();return vt||(vt=new Ie(ht)),vt.bind(),it(vt,St,35040,0,1,!1),vt},destroyStream:function(ht){kt.push(ht)},clear:function(){le(At).forEach(lt),kt.forEach(lt)},getBuffer:function(ht){return ht&&ht._buffer instanceof Ie?ht._buffer:null},restore:function(){le(At).forEach(function(ht){ht.buffer=je.createBuffer(),je.bindBuffer(ht.type,ht.buffer),je.bufferData(ht.type,ht.persistentData||ht.byteLength,ht.usage)})},_initBuffer:it}}function h(je,Ke,st,Se){function Ie(ht){this.id=gt++,lt[this.id]=this,this.buffer=ht,this.primType=4,this.type=this.vertCount=0}function We(ht,St,vt,Mt,It,Ut,jt){var qt;if(ht.buffer.bind(),St?((qt=jt)||ce(St)&&(!t(St)||ce(St.data))||(qt=Ke.oes_element_index_uint?5125:5123),st._initBuffer(ht.buffer,St,vt,qt,3)):(je.bufferData(34963,Ut,vt),ht.buffer.dtype=qt||5121,ht.buffer.usage=vt,ht.buffer.dimension=3,ht.buffer.byteLength=Ut),qt=jt,!jt){switch(ht.buffer.dtype){case 5121:case 5120:qt=5121;break;case 5123:case 5122:qt=5123;break;case 5125:case 5124:qt=5125}ht.buffer.dtype=qt}ht.type=qt,0>(St=It)&&(St=ht.buffer.byteLength,qt===5123?St>>=1:qt===5125&&(St>>=2)),ht.vertCount=St,St=Mt,0>Mt&&(St=4,(Mt=ht.buffer.dimension)===1&&(St=0),Mt===2&&(St=1),Mt===3&&(St=4)),ht.primType=St}function it(ht){Se.elementsCount--,delete lt[ht.id],ht.buffer.destroy(),ht.buffer=null}var lt={},gt=0,At={uint8:5121,uint16:5123};Ke.oes_element_index_uint&&(At.uint32=5125),Ie.prototype.bind=function(){this.buffer.bind()};var kt=[];return{create:function(ht,St){function vt(Ut){if(Ut)if(typeof Ut=="number")Mt(Ut),It.primType=4,It.vertCount=0|Ut,It.type=5121;else{var jt=null,qt=35044,Yt=-1,Kt=-1,pn=0,nn=0;Array.isArray(Ut)||ce(Ut)||t(Ut)?jt=Ut:("data"in Ut&&(jt=Ut.data),"usage"in Ut&&(qt=_e[Ut.usage]),"primitive"in Ut&&(Yt=oe[Ut.primitive]),"count"in Ut&&(Kt=0|Ut.count),"type"in Ut&&(nn=At[Ut.type]),"length"in Ut?pn=0|Ut.length:(pn=Kt,nn===5123||nn===5122?pn*=2:nn!==5125&&nn!==5124||(pn*=4))),We(It,jt,qt,Yt,Kt,pn,nn)}else Mt(),It.primType=4,It.vertCount=0,It.type=5121;return vt}var Mt=st.create(null,34963,!0),It=new Ie(Mt._buffer);return Se.elementsCount++,vt(ht),vt._reglType="elements",vt._elements=It,vt.subdata=function(Ut,jt){return Mt.subdata(Ut,jt),vt},vt.destroy=function(){it(It)},vt},createStream:function(ht){var St=kt.pop();return St||(St=new Ie(st.create(null,34963,!0,!1)._buffer)),We(St,ht,35040,-1,-1,0,0),St},destroyStream:function(ht){kt.push(ht)},getElements:function(ht){return typeof ht=="function"&&ht._elements instanceof Ie?ht._elements:null},clear:function(){le(lt).forEach(it)}}}function f(je){for(var Ke=ge.allocType(5123,je.length),st=0;st<je.length;++st)if(isNaN(je[st]))Ke[st]=65535;else if(je[st]===1/0)Ke[st]=31744;else if(je[st]===-1/0)Ke[st]=64512;else{pe[0]=je[st];var Se=(We=ye[0])>>>31<<15,Ie=(We<<1>>>24)-127,We=We>>13&1023;Ke[st]=-24>Ie?Se:-14>Ie?Se+(We+1024>>-14-Ie):15<Ie?Se+31744:Se+(Ie+15<<10)+We}return Ke}function x(je){return Array.isArray(je)||ce(je)}function v(je){return"[object "+je+"]"}function g(je){return Array.isArray(je)&&(je.length===0||typeof je[0]=="number")}function y(je){return!(!Array.isArray(je)||je.length===0||!x(je[0]))}function p(je){return Object.prototype.toString.call(je)}function m(je){if(!je)return!1;var Ke=p(je);return 0<=Ve.indexOf(Ke)||g(je)||y(je)||t(je)}function w(je,Ke){je.type===36193?(je.data=f(Ke),ge.freeType(Ke)):je.data=Ke}function c(je,Ke,st,Se,Ie,We){if(je=tt[je]!==void 0?tt[je]:Pe[je]*nt[Ke],We&&(je*=6),Ie){for(Se=0;1<=st;)Se+=je*st*st,st/=2;return Se}return je*st*Se}function M(je,Ke,st,Se,Ie,We,it){function lt(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function gt(Jt,Mn){Jt.internalformat=Mn.internalformat,Jt.format=Mn.format,Jt.type=Mn.type,Jt.compressed=Mn.compressed,Jt.premultiplyAlpha=Mn.premultiplyAlpha,Jt.flipY=Mn.flipY,Jt.unpackAlignment=Mn.unpackAlignment,Jt.colorSpace=Mn.colorSpace,Jt.width=Mn.width,Jt.height=Mn.height,Jt.channels=Mn.channels}function At(Jt,Mn){if(typeof Mn=="object"&&Mn){"premultiplyAlpha"in Mn&&(Jt.premultiplyAlpha=Mn.premultiplyAlpha),"flipY"in Mn&&(Jt.flipY=Mn.flipY),"alignment"in Mn&&(Jt.unpackAlignment=Mn.alignment),"colorSpace"in Mn&&(Jt.colorSpace=Fn[Mn.colorSpace]),"type"in Mn&&(Jt.type=Bn[Mn.type]);var Rt=Jt.width,Zt=Jt.height,rn=Jt.channels,Ln=!1;"shape"in Mn?(Rt=Mn.shape[0],Zt=Mn.shape[1],Mn.shape.length===3&&(rn=Mn.shape[2],Ln=!0)):("radius"in Mn&&(Rt=Zt=Mn.radius),"width"in Mn&&(Rt=Mn.width),"height"in Mn&&(Zt=Mn.height),"channels"in Mn&&(rn=Mn.channels,Ln=!0)),Jt.width=0|Rt,Jt.height=0|Zt,Jt.channels=0|rn,Rt=!1,"format"in Mn&&(Rt=Mn.format,Zt=Jt.internalformat=er[Rt],Jt.format=An[Zt],Rt in Bn&&!("type"in Mn)&&(Jt.type=Bn[Rt]),Rt in Xn&&(Jt.compressed=!0),Rt=!0),!Ln&&Rt?Jt.channels=Pe[Jt.format]:Ln&&!Rt&&Jt.channels!==De[Jt.format]&&(Jt.format=Jt.internalformat=De[Jt.channels])}}function kt(Jt){je.pixelStorei(37440,Jt.flipY),je.pixelStorei(37441,Jt.premultiplyAlpha),je.pixelStorei(37443,Jt.colorSpace),je.pixelStorei(3317,Jt.unpackAlignment)}function ht(){lt.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function St(Jt,Mn){var Rt=null;if(m(Mn)?Rt=Mn:Mn&&(At(Jt,Mn),"x"in Mn&&(Jt.xOffset=0|Mn.x),"y"in Mn&&(Jt.yOffset=0|Mn.y),m(Mn.data)&&(Rt=Mn.data)),Mn.copy){var Zt=Ie.viewportWidth,rn=Ie.viewportHeight;Jt.width=Jt.width||Zt-Jt.xOffset,Jt.height=Jt.height||rn-Jt.yOffset,Jt.needsCopy=!0}else if(Rt){if(ce(Rt))Jt.channels=Jt.channels||4,Jt.data=Rt,"type"in Mn||Jt.type!==5121||(Jt.type=0|Ce[Object.prototype.toString.call(Rt)]);else if(g(Rt)){switch(Jt.channels=Jt.channels||4,rn=(Zt=Rt).length,Jt.type){case 5121:case 5123:case 5125:case 5126:(rn=ge.allocType(Jt.type,rn)).set(Zt),Jt.data=rn;break;case 36193:Jt.data=f(Zt)}Jt.alignment=1,Jt.needsFree=!0}else if(t(Rt)){Zt=Rt.data,Array.isArray(Zt)||Jt.type!==5121||(Jt.type=0|Ce[Object.prototype.toString.call(Zt)]),rn=Rt.shape;var Ln,Sn,wn,ln,gn=Rt.stride;rn.length===3?(wn=rn[2],ln=gn[2]):ln=wn=1,Ln=rn[0],Sn=rn[1],rn=gn[0],gn=gn[1],Jt.alignment=1,Jt.width=Ln,Jt.height=Sn,Jt.channels=wn,Jt.format=Jt.internalformat=De[wn],Jt.needsFree=!0,Ln=ln,Rt=Rt.offset,wn=Jt.width,ln=Jt.height,Sn=Jt.channels;for(var un=ge.allocType(Jt.type===36193?5126:Jt.type,wn*ln*Sn),fn=0,bn=0;bn<ln;++bn)for(var In=0;In<wn;++In)for(var Hn=0;Hn<Sn;++Hn)un[fn++]=Zt[rn*In+gn*bn+Ln*Hn+Rt];w(Jt,un)}else if(p(Rt)===Re||p(Rt)===fe||p(Rt)===ve)p(Rt)===Re||p(Rt)===fe?Jt.element=Rt:Jt.element=Rt.canvas,Jt.width=Jt.element.width,Jt.height=Jt.element.height,Jt.channels=4;else if(p(Rt)===Te)Jt.element=Rt,Jt.width=Rt.width,Jt.height=Rt.height,Jt.channels=4;else if(p(Rt)===ze)Jt.element=Rt,Jt.width=Rt.naturalWidth,Jt.height=Rt.naturalHeight,Jt.channels=4;else if(p(Rt)===He)Jt.element=Rt,Jt.width=Rt.videoWidth,Jt.height=Rt.videoHeight,Jt.channels=4;else if(y(Rt)){for(Zt=Jt.width||Rt[0].length,rn=Jt.height||Rt.length,gn=Jt.channels,gn=x(Rt[0][0])?gn||Rt[0][0].length:gn||1,Ln=de.shape(Rt),wn=1,ln=0;ln<Ln.length;++ln)wn*=Ln[ln];wn=ge.allocType(Jt.type===36193?5126:Jt.type,wn),de.flatten(Rt,Ln,"",wn),w(Jt,wn),Jt.alignment=1,Jt.width=Zt,Jt.height=rn,Jt.channels=gn,Jt.format=Jt.internalformat=De[gn],Jt.needsFree=!0}}else Jt.width=Jt.width||1,Jt.height=Jt.height||1,Jt.channels=Jt.channels||4}function vt(Jt,Mn,Rt,Zt,rn){var Ln=Jt.element,Sn=Jt.data,wn=Jt.internalformat,ln=Jt.format,gn=Jt.type,un=Jt.width,fn=Jt.height;kt(Jt),Ln?je.texSubImage2D(Mn,rn,Rt,Zt,ln,gn,Ln):Jt.compressed?je.compressedTexSubImage2D(Mn,rn,Rt,Zt,wn,un,fn,Sn):Jt.needsCopy?(Se(),je.copyTexSubImage2D(Mn,rn,Rt,Zt,Jt.xOffset,Jt.yOffset,un,fn)):je.texSubImage2D(Mn,rn,Rt,Zt,un,fn,ln,gn,Sn)}function Mt(){return Tn.pop()||new ht}function It(Jt){Jt.needsFree&&ge.freeType(Jt.data),ht.call(Jt),Tn.push(Jt)}function Ut(){lt.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function jt(Jt,Mn,Rt){var Zt=Jt.images[0]=Mt();Jt.mipmask=1,Zt.width=Jt.width=Mn,Zt.height=Jt.height=Rt,Zt.channels=Jt.channels=4}function qt(Jt,Mn){var Rt=null;if(m(Mn))gt(Rt=Jt.images[0]=Mt(),Jt),St(Rt,Mn),Jt.mipmask=1;else if(At(Jt,Mn),Array.isArray(Mn.mipmap))for(var Zt=Mn.mipmap,rn=0;rn<Zt.length;++rn)gt(Rt=Jt.images[rn]=Mt(),Jt),Rt.width>>=rn,Rt.height>>=rn,St(Rt,Zt[rn]),Jt.mipmask|=1<<rn;else gt(Rt=Jt.images[0]=Mt(),Jt),St(Rt,Mn),Jt.mipmask=1;gt(Jt,Jt.images[0])}function Yt(Jt,Mn){for(var Rt=Jt.images,Zt=0;Zt<Rt.length&&Rt[Zt];++Zt){var rn=Rt[Zt],Ln=Mn,Sn=Zt,wn=rn.element,ln=rn.data,gn=rn.internalformat,un=rn.format,fn=rn.type,bn=rn.width,In=rn.height;kt(rn),wn?je.texImage2D(Ln,Sn,un,un,fn,wn):rn.compressed?je.compressedTexImage2D(Ln,Sn,gn,bn,In,0,ln):rn.needsCopy?(Se(),je.copyTexImage2D(Ln,Sn,un,rn.xOffset,rn.yOffset,bn,In,0)):je.texImage2D(Ln,Sn,un,bn,In,0,un,fn,ln||null)}}function Kt(){var Jt=Rn.pop()||new Ut;lt.call(Jt);for(var Mn=Jt.mipmask=0;16>Mn;++Mn)Jt.images[Mn]=null;return Jt}function pn(Jt){for(var Mn=Jt.images,Rt=0;Rt<Mn.length;++Rt)Mn[Rt]&&It(Mn[Rt]),Mn[Rt]=null;Rn.push(Jt)}function nn(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function xn(Jt,Mn){"min"in Mn&&(Jt.minFilter=zn[Mn.min],0<=ke.indexOf(Jt.minFilter)&&!("faces"in Mn)&&(Jt.genMipmaps=!0)),"mag"in Mn&&(Jt.magFilter=kn[Mn.mag]);var Rt=Jt.wrapS,Zt=Jt.wrapT;if("wrap"in Mn){var rn=Mn.wrap;typeof rn=="string"?Rt=Zt=En[rn]:Array.isArray(rn)&&(Rt=En[rn[0]],Zt=En[rn[1]])}else"wrapS"in Mn&&(Rt=En[Mn.wrapS]),"wrapT"in Mn&&(Zt=En[Mn.wrapT]);if(Jt.wrapS=Rt,Jt.wrapT=Zt,"anisotropic"in Mn&&(Jt.anisotropic=Mn.anisotropic),"mipmap"in Mn){switch(Rt=!1,typeof Mn.mipmap){case"string":Jt.mipmapHint=sn[Mn.mipmap],Rt=Jt.genMipmaps=!0;break;case"boolean":Rt=Jt.genMipmaps=Mn.mipmap;break;case"object":Jt.genMipmaps=!1,Rt=!0}!Rt||"min"in Mn||(Jt.minFilter=9984)}}function jn(Jt,Mn){je.texParameteri(Mn,10241,Jt.minFilter),je.texParameteri(Mn,10240,Jt.magFilter),je.texParameteri(Mn,10242,Jt.wrapS),je.texParameteri(Mn,10243,Jt.wrapT),Ke.ext_texture_filter_anisotropic&&je.texParameteri(Mn,34046,Jt.anisotropic),Jt.genMipmaps&&(je.hint(33170,Jt.mipmapHint),je.generateMipmap(Mn))}function mn(Jt){lt.call(this),this.mipmask=0,this.internalformat=6408,this.id=qn++,this.refCount=1,this.target=Jt,this.texture=je.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new nn,it.profile&&(this.stats={size:0})}function en(Jt){je.activeTexture(33984),je.bindTexture(Jt.target,Jt.texture)}function vn(){var Jt=or[0];Jt?je.bindTexture(Jt.target,Jt.texture):je.bindTexture(3553,null)}function on(Jt){var Mn=Jt.texture,Rt=Jt.unit,Zt=Jt.target;0<=Rt&&(je.activeTexture(33984+Rt),je.bindTexture(Zt,null),or[Rt]=null),je.deleteTexture(Mn),Jt.texture=null,Jt.params=null,Jt.pixels=null,Jt.refCount=0,delete Un[Jt.id],We.textureCount--}var sn={"don't care":4352,"dont care":4352,nice:4354,fast:4353},En={repeat:10497,clamp:33071,mirror:33648},kn={nearest:9728,linear:9729},zn=Q({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},kn),Fn={none:0,browser:37444},Bn={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},er={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Xn={};Ke.ext_srgb&&(er.srgb=35904,er.srgba=35906),Ke.oes_texture_float&&(Bn.float32=Bn.float=5126),Ke.oes_texture_half_float&&(Bn.float16=Bn["half float"]=36193),Ke.webgl_depth_texture&&(Q(er,{depth:6402,"depth stencil":34041}),Q(Bn,{uint16:5123,uint32:5125,"depth stencil":34042})),Ke.webgl_compressed_texture_s3tc&&Q(Xn,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Ke.webgl_compressed_texture_atc&&Q(Xn,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Ke.webgl_compressed_texture_pvrtc&&Q(Xn,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Ke.webgl_compressed_texture_etc1&&(Xn["rgb etc1"]=36196);var mr=Array.prototype.slice.call(je.getParameter(34467));Object.keys(Xn).forEach(function(Jt){var Mn=Xn[Jt];0<=mr.indexOf(Mn)&&(er[Jt]=Mn)});var ur=Object.keys(er);st.textureFormats=ur;var $n=[];Object.keys(er).forEach(function(Jt){$n[er[Jt]]=Jt});var lr=[];Object.keys(Bn).forEach(function(Jt){lr[Bn[Jt]]=Jt});var hr=[];Object.keys(kn).forEach(function(Jt){hr[kn[Jt]]=Jt});var Gt=[];Object.keys(zn).forEach(function(Jt){Gt[zn[Jt]]=Jt});var hn=[];Object.keys(En).forEach(function(Jt){hn[En[Jt]]=Jt});var An=ur.reduce(function(Jt,Mn){var Rt=er[Mn];return Rt===6409||Rt===6406||Rt===6409||Rt===6410||Rt===6402||Rt===34041||Ke.ext_srgb&&(Rt===35904||Rt===35906)?Jt[Rt]=Rt:Rt===32855||0<=Mn.indexOf("rgba")?Jt[Rt]=6408:Jt[Rt]=6407,Jt},{}),Tn=[],Rn=[],qn=0,Un={},Yn=st.maxTextureUnits,or=Array(Yn).map(function(){return null});return Q(mn.prototype,{bind:function(){this.bindCount+=1;var Jt=this.unit;if(0>Jt){for(var Mn=0;Mn<Yn;++Mn){var Rt=or[Mn];if(Rt){if(0<Rt.bindCount)continue;Rt.unit=-1}or[Mn]=this,Jt=Mn;break}it.profile&&We.maxTextureUnits<Jt+1&&(We.maxTextureUnits=Jt+1),this.unit=Jt,je.activeTexture(33984+Jt),je.bindTexture(this.target,this.texture)}return Jt},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&on(this)}}),it.profile&&(We.getTotalTextureSize=function(){var Jt=0;return Object.keys(Un).forEach(function(Mn){Jt+=Un[Mn].stats.size}),Jt}),{create2D:function(Jt,Mn){function Rt(rn,Ln){var Sn=Zt.texInfo;nn.call(Sn);var wn=Kt();return typeof rn=="number"?jt(wn,0|rn,typeof Ln=="number"?0|Ln:0|rn):rn?(xn(Sn,rn),qt(wn,rn)):jt(wn,1,1),Sn.genMipmaps&&(wn.mipmask=(wn.width<<1)-1),Zt.mipmask=wn.mipmask,gt(Zt,wn),Zt.internalformat=wn.internalformat,Rt.width=wn.width,Rt.height=wn.height,en(Zt),Yt(wn,3553),jn(Sn,3553),vn(),pn(wn),it.profile&&(Zt.stats.size=c(Zt.internalformat,Zt.type,wn.width,wn.height,Sn.genMipmaps,!1)),Rt.format=$n[Zt.internalformat],Rt.type=lr[Zt.type],Rt.mag=hr[Sn.magFilter],Rt.min=Gt[Sn.minFilter],Rt.wrapS=hn[Sn.wrapS],Rt.wrapT=hn[Sn.wrapT],Rt}var Zt=new mn(3553);return Un[Zt.id]=Zt,We.textureCount++,Rt(Jt,Mn),Rt.subimage=function(rn,Ln,Sn,wn){Ln|=0,Sn|=0,wn|=0;var ln=Mt();return gt(ln,Zt),ln.width=0,ln.height=0,St(ln,rn),ln.width=ln.width||(Zt.width>>wn)-Ln,ln.height=ln.height||(Zt.height>>wn)-Sn,en(Zt),vt(ln,3553,Ln,Sn,wn),vn(),It(ln),Rt},Rt.resize=function(rn,Ln){var Sn=0|rn,wn=0|Ln||Sn;if(Sn===Zt.width&&wn===Zt.height)return Rt;Rt.width=Zt.width=Sn,Rt.height=Zt.height=wn,en(Zt);for(var ln=0;Zt.mipmask>>ln;++ln){var gn=Sn>>ln,un=wn>>ln;if(!gn||!un)break;je.texImage2D(3553,ln,Zt.format,gn,un,0,Zt.format,Zt.type,null)}return vn(),it.profile&&(Zt.stats.size=c(Zt.internalformat,Zt.type,Sn,wn,!1,!1)),Rt},Rt._reglType="texture2d",Rt._texture=Zt,it.profile&&(Rt.stats=Zt.stats),Rt.destroy=function(){Zt.decRef()},Rt},createCube:function(Jt,Mn,Rt,Zt,rn,Ln){function Sn(gn,un,fn,bn,In,Hn){var Wn,Gn=wn.texInfo;for(nn.call(Gn),Wn=0;6>Wn;++Wn)ln[Wn]=Kt();if(typeof gn!="number"&&gn){if(typeof gn=="object")if(un)qt(ln[0],gn),qt(ln[1],un),qt(ln[2],fn),qt(ln[3],bn),qt(ln[4],In),qt(ln[5],Hn);else if(xn(Gn,gn),At(wn,gn),"faces"in gn)for(gn=gn.faces,Wn=0;6>Wn;++Wn)gt(ln[Wn],wn),qt(ln[Wn],gn[Wn]);else for(Wn=0;6>Wn;++Wn)qt(ln[Wn],gn)}else for(gn=0|gn||1,Wn=0;6>Wn;++Wn)jt(ln[Wn],gn,gn);for(gt(wn,ln[0]),wn.mipmask=Gn.genMipmaps?(ln[0].width<<1)-1:ln[0].mipmask,wn.internalformat=ln[0].internalformat,Sn.width=ln[0].width,Sn.height=ln[0].height,en(wn),Wn=0;6>Wn;++Wn)Yt(ln[Wn],34069+Wn);for(jn(Gn,34067),vn(),it.profile&&(wn.stats.size=c(wn.internalformat,wn.type,Sn.width,Sn.height,Gn.genMipmaps,!0)),Sn.format=$n[wn.internalformat],Sn.type=lr[wn.type],Sn.mag=hr[Gn.magFilter],Sn.min=Gt[Gn.minFilter],Sn.wrapS=hn[Gn.wrapS],Sn.wrapT=hn[Gn.wrapT],Wn=0;6>Wn;++Wn)pn(ln[Wn]);return Sn}var wn=new mn(34067);Un[wn.id]=wn,We.cubeCount++;var ln=Array(6);return Sn(Jt,Mn,Rt,Zt,rn,Ln),Sn.subimage=function(gn,un,fn,bn,In){fn|=0,bn|=0,In|=0;var Hn=Mt();return gt(Hn,wn),Hn.width=0,Hn.height=0,St(Hn,un),Hn.width=Hn.width||(wn.width>>In)-fn,Hn.height=Hn.height||(wn.height>>In)-bn,en(wn),vt(Hn,34069+gn,fn,bn,In),vn(),It(Hn),Sn},Sn.resize=function(gn){if((gn|=0)!==wn.width){Sn.width=wn.width=gn,Sn.height=wn.height=gn,en(wn);for(var un=0;6>un;++un)for(var fn=0;wn.mipmask>>fn;++fn)je.texImage2D(34069+un,fn,wn.format,gn>>fn,gn>>fn,0,wn.format,wn.type,null);return vn(),it.profile&&(wn.stats.size=c(wn.internalformat,wn.type,Sn.width,Sn.height,!1,!0)),Sn}},Sn._reglType="textureCube",Sn._texture=wn,it.profile&&(Sn.stats=wn.stats),Sn.destroy=function(){wn.decRef()},Sn},clear:function(){for(var Jt=0;Jt<Yn;++Jt)je.activeTexture(33984+Jt),je.bindTexture(3553,null),or[Jt]=null;le(Un).forEach(on),We.cubeCount=0,We.textureCount=0},getTexture:function(Jt){return null},restore:function(){for(var Jt=0;Jt<Yn;++Jt){var Mn=or[Jt];Mn&&(Mn.bindCount=0,Mn.unit=-1,or[Jt]=null)}le(Un).forEach(function(Rt){Rt.texture=je.createTexture(),je.bindTexture(Rt.target,Rt.texture);for(var Zt=0;32>Zt;++Zt)if(Rt.mipmask&1<<Zt)if(Rt.target===3553)je.texImage2D(3553,Zt,Rt.internalformat,Rt.width>>Zt,Rt.height>>Zt,0,Rt.internalformat,Rt.type,null);else for(var rn=0;6>rn;++rn)je.texImage2D(34069+rn,Zt,Rt.internalformat,Rt.width>>Zt,Rt.height>>Zt,0,Rt.internalformat,Rt.type,null);jn(Rt.texInfo,Rt.target)})},refresh:function(){for(var Jt=0;Jt<Yn;++Jt){var Mn=or[Jt];Mn&&(Mn.bindCount=0,Mn.unit=-1,or[Jt]=null),je.activeTexture(33984+Jt),je.bindTexture(3553,null),je.bindTexture(34067,null)}}}}function _(je,Ke,st,Se,Ie,We){function it(mn,en,vn){this.target=mn,this.texture=en,this.renderbuffer=vn;var on=mn=0;en?(mn=en.width,on=en.height):vn&&(mn=vn.width,on=vn.height),this.width=mn,this.height=on}function lt(mn){mn&&(mn.texture&&mn.texture._texture.decRef(),mn.renderbuffer&&mn.renderbuffer._renderbuffer.decRef())}function gt(mn,en,vn){mn&&(mn.texture?mn.texture._texture.refCount+=1:mn.renderbuffer._renderbuffer.refCount+=1)}function At(mn,en){en&&(en.texture?je.framebufferTexture2D(36160,mn,en.target,en.texture._texture.texture,0):je.framebufferRenderbuffer(36160,mn,36161,en.renderbuffer._renderbuffer.renderbuffer))}function kt(mn){var en=3553,vn=null,on=null,sn=mn;return typeof mn=="object"&&(sn=mn.data,"target"in mn&&(en=0|mn.target)),(mn=sn._reglType)==="texture2d"||mn==="textureCube"?vn=sn:mn==="renderbuffer"&&(on=sn,en=36161),new it(en,vn,on)}function ht(mn,en,vn,on,sn){return vn?((mn=Se.create2D({width:mn,height:en,format:on,type:sn}))._texture.refCount=0,new it(3553,mn,null)):((mn=Ie.create({width:mn,height:en,format:on}))._renderbuffer.refCount=0,new it(36161,null,mn))}function St(mn){return mn&&(mn.texture||mn.renderbuffer)}function vt(mn,en,vn){mn&&(mn.texture?mn.texture.resize(en,vn):mn.renderbuffer&&mn.renderbuffer.resize(en,vn),mn.width=en,mn.height=vn)}function Mt(){this.id=xn++,jn[this.id]=this,this.framebuffer=je.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function It(mn){mn.colorAttachments.forEach(lt),lt(mn.depthAttachment),lt(mn.stencilAttachment),lt(mn.depthStencilAttachment)}function Ut(mn){je.deleteFramebuffer(mn.framebuffer),mn.framebuffer=null,We.framebufferCount--,delete jn[mn.id]}function jt(mn){var en;je.bindFramebuffer(36160,mn.framebuffer);var vn=mn.colorAttachments;for(en=0;en<vn.length;++en)At(36064+en,vn[en]);for(en=vn.length;en<st.maxColorAttachments;++en)je.framebufferTexture2D(36160,36064+en,3553,null,0);je.framebufferTexture2D(36160,33306,3553,null,0),je.framebufferTexture2D(36160,36096,3553,null,0),je.framebufferTexture2D(36160,36128,3553,null,0),At(36096,mn.depthAttachment),At(36128,mn.stencilAttachment),At(33306,mn.depthStencilAttachment),je.checkFramebufferStatus(36160),je.isContextLost(),je.bindFramebuffer(36160,Yt.next?Yt.next.framebuffer:null),Yt.cur=Yt.next,je.getError()}function qt(mn,en){function vn(sn,En){var kn,zn=0,Fn=0,Bn=!0,er=!0;kn=null;var Xn=!0,mr="rgba",ur="uint8",$n=1,lr=null,hr=null,Gt=null,hn=!1;typeof sn=="number"?(zn=0|sn,Fn=0|En||zn):sn?("shape"in sn?(zn=(Fn=sn.shape)[0],Fn=Fn[1]):("radius"in sn&&(zn=Fn=sn.radius),"width"in sn&&(zn=sn.width),"height"in sn&&(Fn=sn.height)),("color"in sn||"colors"in sn)&&(kn=sn.color||sn.colors,Array.isArray(kn)),kn||("colorCount"in sn&&($n=0|sn.colorCount),"colorTexture"in sn&&(Xn=!!sn.colorTexture,mr="rgba4"),"colorType"in sn&&(ur=sn.colorType,!Xn)&&(ur==="half float"||ur==="float16"?mr="rgba16f":ur!=="float"&&ur!=="float32"||(mr="rgba32f")),"colorFormat"in sn&&(mr=sn.colorFormat,0<=Kt.indexOf(mr)?Xn=!0:0<=pn.indexOf(mr)&&(Xn=!1))),("depthTexture"in sn||"depthStencilTexture"in sn)&&(hn=!(!sn.depthTexture&&!sn.depthStencilTexture)),"depth"in sn&&(typeof sn.depth=="boolean"?Bn=sn.depth:(lr=sn.depth,er=!1)),"stencil"in sn&&(typeof sn.stencil=="boolean"?er=sn.stencil:(hr=sn.stencil,Bn=!1)),"depthStencil"in sn&&(typeof sn.depthStencil=="boolean"?Bn=er=sn.depthStencil:(Gt=sn.depthStencil,er=Bn=!1))):zn=Fn=1;var An=null,Tn=null,Rn=null,qn=null;if(Array.isArray(kn))An=kn.map(kt);else if(kn)An=[kt(kn)];else for(An=Array($n),kn=0;kn<$n;++kn)An[kn]=ht(zn,Fn,Xn,mr,ur);for(zn=zn||An[0].width,Fn=Fn||An[0].height,lr?Tn=kt(lr):Bn&&!er&&(Tn=ht(zn,Fn,hn,"depth","uint32")),hr?Rn=kt(hr):er&&!Bn&&(Rn=ht(zn,Fn,!1,"stencil","uint8")),Gt?qn=kt(Gt):!lr&&!hr&&er&&Bn&&(qn=ht(zn,Fn,hn,"depth stencil","depth stencil")),Bn=null,kn=0;kn<An.length;++kn)gt(An[kn]),An[kn]&&An[kn].texture&&(er=Tt[An[kn].texture._texture.format]*yt[An[kn].texture._texture.type],Bn===null&&(Bn=er));return gt(Tn),gt(Rn),gt(qn),It(on),on.width=zn,on.height=Fn,on.colorAttachments=An,on.depthAttachment=Tn,on.stencilAttachment=Rn,on.depthStencilAttachment=qn,vn.color=An.map(St),vn.depth=St(Tn),vn.stencil=St(Rn),vn.depthStencil=St(qn),vn.width=on.width,vn.height=on.height,jt(on),vn}var on=new Mt;return We.framebufferCount++,vn(mn,en),Q(vn,{resize:function(sn,En){var kn=Math.max(0|sn,1),zn=Math.max(0|En||kn,1);if(kn===on.width&&zn===on.height)return vn;for(var Fn=on.colorAttachments,Bn=0;Bn<Fn.length;++Bn)vt(Fn[Bn],kn,zn);return vt(on.depthAttachment,kn,zn),vt(on.stencilAttachment,kn,zn),vt(on.depthStencilAttachment,kn,zn),on.width=vn.width=kn,on.height=vn.height=zn,jt(on),vn},_reglType:"framebuffer",_framebuffer:on,destroy:function(){Ut(on),It(on)},use:function(sn){Yt.setFBO({framebuffer:vn},sn)}})}var Yt={cur:null,next:null,dirty:!1,setFBO:null},Kt=["rgba"],pn=["rgba4","rgb565","rgb5 a1"];Ke.ext_srgb&&pn.push("srgba"),Ke.ext_color_buffer_half_float&&pn.push("rgba16f","rgb16f"),Ke.webgl_color_buffer_float&&pn.push("rgba32f");var nn=["uint8"];Ke.oes_texture_half_float&&nn.push("half float","float16"),Ke.oes_texture_float&&nn.push("float","float32");var xn=0,jn={};return Q(Yt,{getFramebuffer:function(mn){return typeof mn=="function"&&mn._reglType==="framebuffer"&&(mn=mn._framebuffer)instanceof Mt?mn:null},create:qt,createCube:function(mn){function en(on){var sn,En={color:null},kn=0,zn=null;sn="rgba";var Fn="uint8",Bn=1;if(typeof on=="number"?kn=0|on:on?("shape"in on?kn=on.shape[0]:("radius"in on&&(kn=0|on.radius),"width"in on?kn=0|on.width:"height"in on&&(kn=0|on.height)),("color"in on||"colors"in on)&&(zn=on.color||on.colors,Array.isArray(zn)),zn||("colorCount"in on&&(Bn=0|on.colorCount),"colorType"in on&&(Fn=on.colorType),"colorFormat"in on&&(sn=on.colorFormat)),"depth"in on&&(En.depth=on.depth),"stencil"in on&&(En.stencil=on.stencil),"depthStencil"in on&&(En.depthStencil=on.depthStencil)):kn=1,zn)if(Array.isArray(zn))for(on=[],sn=0;sn<zn.length;++sn)on[sn]=zn[sn];else on=[zn];else for(on=Array(Bn),zn={radius:kn,format:sn,type:Fn},sn=0;sn<Bn;++sn)on[sn]=Se.createCube(zn);for(En.color=Array(on.length),sn=0;sn<on.length;++sn)Bn=on[sn],kn=kn||Bn.width,En.color[sn]={target:34069,data:on[sn]};for(sn=0;6>sn;++sn){for(Bn=0;Bn<on.length;++Bn)En.color[Bn].target=34069+sn;0<sn&&(En.depth=vn[0].depth,En.stencil=vn[0].stencil,En.depthStencil=vn[0].depthStencil),vn[sn]?vn[sn](En):vn[sn]=qt(En)}return Q(en,{width:kn,height:kn,color:on})}var vn=Array(6);return en(mn),Q(en,{faces:vn,resize:function(on){var sn=0|on;if(sn===en.width)return en;var En=en.color;for(on=0;on<En.length;++on)En[on].resize(sn);for(on=0;6>on;++on)vn[on].resize(sn);return en.width=en.height=sn,en},_reglType:"framebufferCube",destroy:function(){vn.forEach(function(on){on.destroy()})}})},clear:function(){le(jn).forEach(Ut)},restore:function(){Yt.cur=null,Yt.next=null,Yt.dirty=!0,le(jn).forEach(function(mn){mn.framebuffer=je.createFramebuffer(),jt(mn)})}})}function E(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function L(je,Ke,st,Se,Ie,We,it){function lt(){this.id=++kt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var vt=Ke.oes_vertex_array_object;this.vao=vt?vt.createVertexArrayOES():null,ht[this.id]=this,this.buffers=[]}var gt=st.maxAttributes,At=Array(gt);for(st=0;st<gt;++st)At[st]=new E;var kt=0,ht={},St={Record:E,scope:{},state:At,currentVAO:null,targetVAO:null,restore:Ke.oes_vertex_array_object?function(){Ke.oes_vertex_array_object&&le(ht).forEach(function(vt){vt.refresh()})}:function(){},createVAO:function(vt){function Mt(Ut){var jt;Array.isArray(Ut)?(jt=Ut,It.elements&&It.ownsElements&&It.elements.destroy(),It.elements=null,It.ownsElements=!1,It.offset=0,It.count=0,It.instances=-1,It.primitive=4):(Ut.elements?(jt=Ut.elements,It.ownsElements?(typeof jt=="function"&&jt._reglType==="elements"?It.elements.destroy():It.elements(jt),It.ownsElements=!1):We.getElements(Ut.elements)?(It.elements=Ut.elements,It.ownsElements=!1):(It.elements=We.create(Ut.elements),It.ownsElements=!0)):(It.elements=null,It.ownsElements=!1),jt=Ut.attributes,It.offset=0,It.count=-1,It.instances=-1,It.primitive=4,It.elements&&(It.count=It.elements._elements.vertCount,It.primitive=It.elements._elements.primType),"offset"in Ut&&(It.offset=0|Ut.offset),"count"in Ut&&(It.count=0|Ut.count),"instances"in Ut&&(It.instances=0|Ut.instances),"primitive"in Ut&&(It.primitive=oe[Ut.primitive])),Ut={};var qt=It.attributes;qt.length=jt.length;for(var Yt=0;Yt<jt.length;++Yt){var Kt,pn=jt[Yt],nn=qt[Yt]=new E,xn=pn.data||pn;Array.isArray(xn)||ce(xn)||t(xn)?(It.buffers[Yt]&&(Kt=It.buffers[Yt],ce(xn)&&Kt._buffer.byteLength>=xn.byteLength?Kt.subdata(xn):(Kt.destroy(),It.buffers[Yt]=null)),It.buffers[Yt]||(Kt=It.buffers[Yt]=Ie.create(pn,34962,!1,!0)),nn.buffer=Ie.getBuffer(Kt),nn.size=0|nn.buffer.dimension,nn.normalized=!1,nn.type=nn.buffer.dtype,nn.offset=0,nn.stride=0,nn.divisor=0,nn.state=1,Ut[Yt]=1):Ie.getBuffer(pn)?(nn.buffer=Ie.getBuffer(pn),nn.size=0|nn.buffer.dimension,nn.normalized=!1,nn.type=nn.buffer.dtype,nn.offset=0,nn.stride=0,nn.divisor=0,nn.state=1):Ie.getBuffer(pn.buffer)?(nn.buffer=Ie.getBuffer(pn.buffer),nn.size=0|(+pn.size||nn.buffer.dimension),nn.normalized=!!pn.normalized||!1,nn.type="type"in pn?xe[pn.type]:nn.buffer.dtype,nn.offset=0|(pn.offset||0),nn.stride=0|(pn.stride||0),nn.divisor=0|(pn.divisor||0),nn.state=1):"x"in pn&&(nn.x=+pn.x||0,nn.y=+pn.y||0,nn.z=+pn.z||0,nn.w=+pn.w||0,nn.state=2)}for(Kt=0;Kt<It.buffers.length;++Kt)!Ut[Kt]&&It.buffers[Kt]&&(It.buffers[Kt].destroy(),It.buffers[Kt]=null);return It.refresh(),Mt}var It=new lt;return Se.vaoCount+=1,Mt.destroy=function(){for(var Ut=0;Ut<It.buffers.length;++Ut)It.buffers[Ut]&&It.buffers[Ut].destroy();It.buffers.length=0,It.ownsElements&&(It.elements.destroy(),It.elements=null,It.ownsElements=!1),It.destroy()},Mt._vao=It,Mt._reglType="vao",Mt(vt)},getVAO:function(vt){return typeof vt=="function"&&vt._vao?vt._vao:null},destroyBuffer:function(vt){for(var Mt=0;Mt<At.length;++Mt){var It=At[Mt];It.buffer===vt&&(je.disableVertexAttribArray(Mt),It.buffer=null)}},setVAO:Ke.oes_vertex_array_object?function(vt){if(vt!==St.currentVAO){var Mt=Ke.oes_vertex_array_object;vt?Mt.bindVertexArrayOES(vt.vao):Mt.bindVertexArrayOES(null),St.currentVAO=vt}}:function(vt){if(vt!==St.currentVAO){if(vt)vt.bindAttrs();else{for(var Mt=Ke.angle_instanced_arrays,It=0;It<At.length;++It){var Ut=At[It];Ut.buffer?(je.enableVertexAttribArray(It),Ut.buffer.bind(),je.vertexAttribPointer(It,Ut.size,Ut.type,Ut.normalized,Ut.stride,Ut.offfset),Mt&&Ut.divisor&&Mt.vertexAttribDivisorANGLE(It,Ut.divisor)):(je.disableVertexAttribArray(It),je.vertexAttrib4f(It,Ut.x,Ut.y,Ut.z,Ut.w))}it.elements?je.bindBuffer(34963,it.elements.buffer.buffer):je.bindBuffer(34963,null)}St.currentVAO=vt}},clear:Ke.oes_vertex_array_object?function(){le(ht).forEach(function(vt){vt.destroy()})}:function(){}};return lt.prototype.bindAttrs=function(){for(var vt=Ke.angle_instanced_arrays,Mt=this.attributes,It=0;It<Mt.length;++It){var Ut=Mt[It];Ut.buffer?(je.enableVertexAttribArray(It),je.bindBuffer(34962,Ut.buffer.buffer),je.vertexAttribPointer(It,Ut.size,Ut.type,Ut.normalized,Ut.stride,Ut.offset),vt&&Ut.divisor&&vt.vertexAttribDivisorANGLE(It,Ut.divisor)):(je.disableVertexAttribArray(It),je.vertexAttrib4f(It,Ut.x,Ut.y,Ut.z,Ut.w))}for(vt=Mt.length;vt<gt;++vt)je.disableVertexAttribArray(vt);(vt=We.getElements(this.elements))?je.bindBuffer(34963,vt.buffer.buffer):je.bindBuffer(34963,null)},lt.prototype.refresh=function(){var vt=Ke.oes_vertex_array_object;vt&&(vt.bindVertexArrayOES(this.vao),this.bindAttrs(),St.currentVAO=null,vt.bindVertexArrayOES(null))},lt.prototype.destroy=function(){if(this.vao){var vt=Ke.oes_vertex_array_object;this===St.currentVAO&&(St.currentVAO=null,vt.bindVertexArrayOES(null)),vt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ht[this.id]&&(delete ht[this.id],--Se.vaoCount)},St}function C(je,Ke,st,Se){function Ie(Mt,It,Ut,jt){this.name=Mt,this.id=It,this.location=Ut,this.info=jt}function We(Mt,It){for(var Ut=0;Ut<Mt.length;++Ut)if(Mt[Ut].id===It.id)return void(Mt[Ut].location=It.location);Mt.push(It)}function it(Mt,It,Ut){if(!(qt=(Ut=Mt===35632?At:kt)[It])){var jt=Ke.str(It),qt=je.createShader(Mt);je.shaderSource(qt,jt),je.compileShader(qt),Ut[It]=qt}return qt}function lt(Mt,It){this.id=vt++,this.fragId=Mt,this.vertId=It,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Se.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function gt(Mt,It,Ut){var jt;jt=it(35632,Mt.fragId);var qt=it(35633,Mt.vertId);if(It=Mt.program=je.createProgram(),je.attachShader(It,jt),je.attachShader(It,qt),Ut)for(jt=0;jt<Ut.length;++jt)qt=Ut[jt],je.bindAttribLocation(It,qt[0],qt[1]);je.linkProgram(It),qt=je.getProgramParameter(It,35718),Se.profile&&(Mt.stats.uniformsCount=qt);var Yt=Mt.uniforms;for(jt=0;jt<qt;++jt)if(Ut=je.getActiveUniform(It,jt))if(1<Ut.size)for(var Kt=0;Kt<Ut.size;++Kt){var pn=Ut.name.replace("[0]","["+Kt+"]");We(Yt,new Ie(pn,Ke.id(pn),je.getUniformLocation(It,pn),Ut))}else We(Yt,new Ie(Ut.name,Ke.id(Ut.name),je.getUniformLocation(It,Ut.name),Ut));for(qt=je.getProgramParameter(It,35721),Se.profile&&(Mt.stats.attributesCount=qt),Mt=Mt.attributes,jt=0;jt<qt;++jt)(Ut=je.getActiveAttrib(It,jt))&&We(Mt,new Ie(Ut.name,Ke.id(Ut.name),je.getAttribLocation(It,Ut.name),Ut))}var At={},kt={},ht={},St=[],vt=0;return Se.profile&&(st.getMaxUniformsCount=function(){var Mt=0;return St.forEach(function(It){It.stats.uniformsCount>Mt&&(Mt=It.stats.uniformsCount)}),Mt},st.getMaxAttributesCount=function(){var Mt=0;return St.forEach(function(It){It.stats.attributesCount>Mt&&(Mt=It.stats.attributesCount)}),Mt}),{clear:function(){var Mt=je.deleteShader.bind(je);le(At).forEach(Mt),At={},le(kt).forEach(Mt),kt={},St.forEach(function(It){je.deleteProgram(It.program)}),St.length=0,ht={},st.shaderCount=0},program:function(Mt,It,Ut,jt){var qt=ht[It];qt||(qt=ht[It]={});var Yt=qt[Mt];if(Yt&&(Yt.refCount++,!jt))return Yt;var Kt=new lt(It,Mt);return st.shaderCount++,gt(Kt,Ut,jt),Yt||(qt[Mt]=Kt),St.push(Kt),Q(Kt,{destroy:function(){if(Kt.refCount--,0>=Kt.refCount){je.deleteProgram(Kt.program);var pn=St.indexOf(Kt);St.splice(pn,1),st.shaderCount--}0>=qt[Kt.vertId].refCount&&(je.deleteShader(kt[Kt.vertId]),delete kt[Kt.vertId],delete ht[Kt.fragId][Kt.vertId]),Object.keys(ht[Kt.fragId]).length||(je.deleteShader(At[Kt.fragId]),delete At[Kt.fragId],delete ht[Kt.fragId])}})},restore:function(){At={},kt={};for(var Mt=0;Mt<St.length;++Mt)gt(St[Mt],null,St[Mt].attributes.map(function(It){return[It.location,It.name]}))},shader:it,frag:-1,vert:-1}}function O(je,Ke,st,Se,Ie,We,it){function lt(gt){var At;At=Ke.next===null?5121:Ke.next.colorAttachments[0].texture._texture.type;var kt=0,ht=0,St=Se.framebufferWidth,vt=Se.framebufferHeight,Mt=null;return ce(gt)?Mt=gt:gt&&(kt=0|gt.x,ht=0|gt.y,St=0|(gt.width||Se.framebufferWidth-kt),vt=0|(gt.height||Se.framebufferHeight-ht),Mt=gt.data||null),st(),gt=St*vt*4,Mt||(At===5121?Mt=new Uint8Array(gt):At===5126&&(Mt=Mt||new Float32Array(gt))),je.pixelStorei(3333,4),je.readPixels(kt,ht,St,vt,6408,At,Mt),Mt}return function(gt){return gt&&"framebuffer"in gt?function(At){var kt;return Ke.setFBO({framebuffer:At.framebuffer},function(){kt=lt(At)}),kt}(gt):lt(gt)}}function I(je,Ke){return je>>>Ke|je<<32-Ke}function N(je,Ke){var st=(65535&je)+(65535&Ke);return(je>>16)+(Ke>>16)+(st>>16)<<16|65535&st}function R(je){return Array.prototype.slice.call(je)}function V(je){return R(je).join("")}function F(je){function Ke(){var kt=[],ht=[];return Q(function(){kt.push.apply(kt,R(arguments))},{def:function(){var St="v"+Ie++;return ht.push(St),0<arguments.length&&(kt.push(St,"="),kt.push.apply(kt,R(arguments)),kt.push(";")),St},toString:function(){return V([0<ht.length?"var "+ht.join(",")+";":"",V(kt)])}})}function st(){function kt(It,Ut){St(It,Ut,"=",ht.def(It,Ut),";")}var ht=Ke(),St=Ke(),vt=ht.toString,Mt=St.toString;return Q(function(){ht.apply(ht,R(arguments))},{def:ht.def,entry:ht,exit:St,save:kt,set:function(It,Ut,jt){kt(It,Ut),ht(It,Ut,"=",jt,";")},toString:function(){return vt()+Mt()}})}var Se=je&&je.cache,Ie=0,We=[],it=[],lt=[],gt=Ke(),At={};return{global:gt,link:function(kt,ht){var St=ht&&ht.stable;if(!St){for(var vt=0;vt<it.length;++vt)if(it[vt]===kt&&!lt[vt])return We[vt]}return vt="g"+Ie++,We.push(vt),it.push(kt),lt.push(St),vt},block:Ke,proc:function(kt,ht){function St(){var Ut="a"+vt.length;return vt.push(Ut),Ut}var vt=[];ht=ht||0;for(var Mt=0;Mt<ht;++Mt)St();var It=(Mt=st()).toString;return At[kt]=Q(Mt,{arg:St,toString:function(){return V(["function(",vt.join(),"){",It(),"}"])}})},scope:st,cond:function(){var kt=V(arguments),ht=st(),St=st(),vt=ht.toString,Mt=St.toString;return Q(ht,{then:function(){return ht.apply(ht,R(arguments)),this},else:function(){return St.apply(St,R(arguments)),this},toString:function(){var It=Mt();return It&&(It="else{"+It+"}"),V(["if(",kt,"){",vt(),"}",It])}})},compile:function(){var kt=['"use strict";',gt,"return {"];Object.keys(At).forEach(function(vt){kt.push('"',vt,'":',At[vt].toString(),",")}),kt.push("}");var ht,St=V(kt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return Se&&(ht=function(vt){for(var Mt,It="",Ut=0;Ut<vt.length;Ut++)Mt=vt.charCodeAt(Ut),It+="0123456789abcdef".charAt(Mt>>>4&15)+"0123456789abcdef".charAt(15&Mt);return It}(function(vt){for(var Mt=Array(vt.length>>2),It=0;It<Mt.length;It++)Mt[It]=0;for(It=0;It<8*vt.length;It+=8)Mt[It>>5]|=(255&vt.charCodeAt(It/8))<<24-It%32;var Ut,jt,qt,Yt,Kt,pn,nn,xn,jn,mn,en,vn=8*vt.length;for(vt=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],It=Array(64),Mt[vn>>5]|=128<<24-vn%32,Mt[15+(vn+64>>9<<4)]=vn,xn=0;xn<Mt.length;xn+=16){for(vn=vt[0],Ut=vt[1],jt=vt[2],qt=vt[3],Yt=vt[4],Kt=vt[5],pn=vt[6],nn=vt[7],jn=0;64>jn;jn++){var on;16>jn?It[jn]=Mt[jn+xn]:(mn=jn,en=N(en=I(en=It[jn-2],17)^I(en,19)^en>>>10,It[jn-7]),on=I(on=It[jn-15],7)^I(on,18)^on>>>3,It[mn]=N(N(en,on),It[jn-16])),mn=N(N(N(N(nn,mn=I(mn=Yt,6)^I(mn,11)^I(mn,25)),Yt&Kt^~Yt&pn),dt[jn]),It[jn]),en=N(nn=I(nn=vn,2)^I(nn,13)^I(nn,22),vn&Ut^vn&jt^Ut&jt),nn=pn,pn=Kt,Kt=Yt,Yt=N(qt,mn),qt=jt,jt=Ut,Ut=vn,vn=N(mn,en)}vt[0]=N(vn,vt[0]),vt[1]=N(Ut,vt[1]),vt[2]=N(jt,vt[2]),vt[3]=N(qt,vt[3]),vt[4]=N(Yt,vt[4]),vt[5]=N(Kt,vt[5]),vt[6]=N(pn,vt[6]),vt[7]=N(nn,vt[7])}for(Mt="",It=0;It<32*vt.length;It+=8)Mt+=String.fromCharCode(vt[It>>5]>>>24-It%32&255);return Mt}(function(vt){for(var Mt,It,Ut="",jt=-1;++jt<vt.length;)Mt=vt.charCodeAt(jt),It=jt+1<vt.length?vt.charCodeAt(jt+1):0,55296<=Mt&&56319>=Mt&&56320<=It&&57343>=It&&(Mt=65536+((1023&Mt)<<10)+(1023&It),jt++),127>=Mt?Ut+=String.fromCharCode(Mt):2047>=Mt?Ut+=String.fromCharCode(192|Mt>>>6&31,128|63&Mt):65535>=Mt?Ut+=String.fromCharCode(224|Mt>>>12&15,128|Mt>>>6&63,128|63&Mt):2097151>=Mt&&(Ut+=String.fromCharCode(240|Mt>>>18&7,128|Mt>>>12&63,128|Mt>>>6&63,128|63&Mt));return Ut}(St))),Se[ht])?Se[ht].apply(null,it):(St=Function.apply(null,We.concat(St)),Se&&(Se[ht]=St),St.apply(null,it))}}}function D(je){return Array.isArray(je)||ce(je)||t(je)}function U(je){return je.sort(function(Ke,st){return Ke==="viewport"?-1:st==="viewport"?1:Ke<st?-1:1})}function j(je,Ke,st,Se){this.thisDep=je,this.contextDep=Ke,this.propDep=st,this.append=Se}function J(je){return je&&!(je.thisDep||je.contextDep||je.propDep)}function X(je){return new j(!1,!1,!1,je)}function Z(je,Ke){var st=je.type;if(st===0)return new j(!0,1<=(st=je.data.length),2<=st,Ke);if(st===4)return new j((st=je.data).thisDep,st.contextDep,st.propDep,Ke);if(st===5)return new j(!1,!1,!1,Ke);if(st===6){for(var Se=st=!1,Ie=!1,We=0;We<je.data.length;++We){var it=je.data[We];it.type===1?Ie=!0:it.type===2?Se=!0:it.type===3?st=!0:it.type===0?(st=!0,1<=(it=it.data)&&(Se=!0),2<=it&&(Ie=!0)):it.type===4&&(st=st||it.data.thisDep,Se=Se||it.data.contextDep,Ie=Ie||it.data.propDep)}return new j(st,Se,Ie,Ke)}return new j(st===3,st===2,st===1,Ke)}function Y(je,Ke,st,Se,Ie,We,it,lt,gt,At,kt,ht,St,vt,Mt,It){function Ut(Rt){return Rt.replace(".","_")}function jt(Rt,Zt,rn){var Ln=Ut(Rt);qn.push(Rt),Rn[Ln]=Tn[Ln]=!!rn,Un[Ln]=Zt}function qt(Rt,Zt,rn){var Ln=Ut(Rt);qn.push(Rt),Array.isArray(rn)?(Tn[Ln]=rn.slice(),Rn[Ln]=rn.slice()):Tn[Ln]=Rn[Ln]=rn,Yn[Ln]=Zt}function Yt(){var Rt=F({cache:Mt}),Zt=Rt.link,rn=Rt.global;Rt.id=Mn++,Rt.batchId="0";var Ln=Zt(or),Sn=Rt.shared={props:"a0"};Object.keys(or).forEach(function(fn){Sn[fn]=rn.def(Ln,".",fn)});var wn=Rt.next={},ln=Rt.current={};Object.keys(Yn).forEach(function(fn){Array.isArray(Tn[fn])&&(wn[fn]=rn.def(Sn.next,".",fn),ln[fn]=rn.def(Sn.current,".",fn))});var gn=Rt.constants={};Object.keys(Jt).forEach(function(fn){gn[fn]=rn.def(JSON.stringify(Jt[fn]))}),Rt.invoke=function(fn,bn){switch(bn.type){case 0:var In=["this",Sn.context,Sn.props,Rt.batchId];return fn.def(Zt(bn.data),".call(",In.slice(0,Math.max(bn.data.length+1,4)),")");case 1:return fn.def(Sn.props,bn.data);case 2:return fn.def(Sn.context,bn.data);case 3:return fn.def("this",bn.data);case 4:return bn.data.append(Rt,fn),bn.data.ref;case 5:return bn.data.toString();case 6:return bn.data.map(function(Hn){return Rt.invoke(fn,Hn)})}},Rt.attribCache={};var un={};return Rt.scopeAttrib=function(fn){if((fn=Ke.id(fn))in un)return un[fn];var bn=At.scope[fn];return bn||(bn=At.scope[fn]=new lr),un[fn]=Zt(bn)},Rt}function Kt(Rt,Zt){var rn=Rt.static,Ln=Rt.dynamic;if("framebuffer"in rn){var Sn=rn.framebuffer;return Sn?(Sn=lt.getFramebuffer(Sn),X(function(ln,gn){var un=ln.link(Sn),fn=ln.shared;return gn.set(fn.framebuffer,".next",un),fn=fn.context,gn.set(fn,".framebufferWidth",un+".width"),gn.set(fn,".framebufferHeight",un+".height"),un})):X(function(ln,gn){var un=ln.shared;return gn.set(un.framebuffer,".next","null"),un=un.context,gn.set(un,".framebufferWidth",un+".drawingBufferWidth"),gn.set(un,".framebufferHeight",un+".drawingBufferHeight"),"null"})}if("framebuffer"in Ln){var wn=Ln.framebuffer;return Z(wn,function(ln,gn){var un=ln.invoke(gn,wn),fn=ln.shared,bn=fn.framebuffer;return un=gn.def(bn,".getFramebuffer(",un,")"),gn.set(bn,".next",un),fn=fn.context,gn.set(fn,".framebufferWidth",un+"?"+un+".width:"+fn+".drawingBufferWidth"),gn.set(fn,".framebufferHeight",un+"?"+un+".height:"+fn+".drawingBufferHeight"),un})}return null}function pn(Rt,Zt,rn){function Ln(fn){if(fn in Sn){var bn=Ke.id(Sn[fn]);return(fn=X(function(){return bn})).id=bn,fn}if(fn in wn){var In=wn[fn];return Z(In,function(Hn,Wn){var Gn=Hn.invoke(Wn,In);return Wn.def(Hn.shared.strings,".id(",Gn,")")})}return null}var Sn=Rt.static,wn=Rt.dynamic,ln=Ln("frag"),gn=Ln("vert"),un=null;return J(ln)&&J(gn)?(un=kt.program(gn.id,ln.id,null,rn),Rt=X(function(fn,bn){return fn.link(un)})):Rt=new j(ln&&ln.thisDep||gn&&gn.thisDep,ln&&ln.contextDep||gn&&gn.contextDep,ln&&ln.propDep||gn&&gn.propDep,function(fn,bn){var In,Hn,Wn=fn.shared.shader;return In=ln?ln.append(fn,bn):bn.def(Wn,".","frag"),Hn=gn?gn.append(fn,bn):bn.def(Wn,".","vert"),bn.def(Wn+".program("+Hn+","+In+")")}),{frag:ln,vert:gn,progVar:Rt,program:un}}function nn(Rt,Zt){function rn(Gn,nr){if(Gn in Ln){var tr=0|Ln[Gn];return nr?wn.offset=tr:wn.instances=tr,X(function(ir,cr){return nr&&(ir.OFFSET=tr),tr})}if(Gn in Sn){var ar=Sn[Gn];return Z(ar,function(ir,cr){var br=ir.invoke(cr,ar);return nr&&(ir.OFFSET=br),br})}if(nr){if(un)return X(function(ir,cr){return ir.OFFSET=0});if(ln)return new j(gn.thisDep,gn.contextDep,gn.propDep,function(ir,cr){return cr.def(ir.shared.vao+".currentVAO?"+ir.shared.vao+".currentVAO.offset:0")})}else if(ln)return new j(gn.thisDep,gn.contextDep,gn.propDep,function(ir,cr){return cr.def(ir.shared.vao+".currentVAO?"+ir.shared.vao+".currentVAO.instances:-1")});return null}var Ln=Rt.static,Sn=Rt.dynamic,wn={},ln=!1,gn=function(){if("vao"in Ln){var Gn=Ln.vao;return Gn!==null&&At.getVAO(Gn)===null&&(Gn=At.createVAO(Gn)),ln=!0,wn.vao=Gn,X(function(tr){var ar=At.getVAO(Gn);return ar?tr.link(ar):"null"})}if("vao"in Sn){ln=!0;var nr=Sn.vao;return Z(nr,function(tr,ar){var ir=tr.invoke(ar,nr);return ar.def(tr.shared.vao+".getVAO("+ir+")")})}return null}(),un=!1,fn=function(){if("elements"in Ln){var Gn=Ln.elements;if(wn.elements=Gn,D(Gn)){var nr=wn.elements=We.create(Gn,!0);Gn=We.getElements(nr),un=!0}else Gn&&(Gn=We.getElements(Gn),un=!0);return nr=X(function(ar,ir){if(Gn){var cr=ar.link(Gn);return ar.ELEMENTS=cr}return ar.ELEMENTS=null}),nr.value=Gn,nr}if("elements"in Sn){un=!0;var tr=Sn.elements;return Z(tr,function(ar,ir){var cr=(br=ar.shared).isBufferArgs,br=br.elements,xr=ar.invoke(ir,tr),Tr=ir.def("null");return cr=ir.def(cr,"(",xr,")"),xr=ar.cond(cr).then(Tr,"=",br,".createStream(",xr,");").else(Tr,"=",br,".getElements(",xr,");"),ir.entry(xr),ir.exit(ar.cond(cr).then(br,".destroyStream(",Tr,");")),ar.ELEMENTS=Tr})}return ln?new j(gn.thisDep,gn.contextDep,gn.propDep,function(ar,ir){return ir.def(ar.shared.vao+".currentVAO?"+ar.shared.elements+".getElements("+ar.shared.vao+".currentVAO.elements):null")}):null}(),bn=rn("offset",!0),In=function(){if("primitive"in Ln){var Gn=Ln.primitive;return wn.primitive=Gn,X(function(tr,ar){return oe[Gn]})}if("primitive"in Sn){var nr=Sn.primitive;return Z(nr,function(tr,ar){var ir=tr.constants.primTypes,cr=tr.invoke(ar,nr);return ar.def(ir,"[",cr,"]")})}return un?J(fn)?fn.value?X(function(tr,ar){return ar.def(tr.ELEMENTS,".primType")}):X(function(){return 4}):new j(fn.thisDep,fn.contextDep,fn.propDep,function(tr,ar){var ir=tr.ELEMENTS;return ar.def(ir,"?",ir,".primType:",4)}):ln?new j(gn.thisDep,gn.contextDep,gn.propDep,function(tr,ar){return ar.def(tr.shared.vao+".currentVAO?"+tr.shared.vao+".currentVAO.primitive:4")}):null}(),Hn=function(){if("count"in Ln){var Gn=0|Ln.count;return wn.count=Gn,X(function(){return Gn})}if("count"in Sn){var nr=Sn.count;return Z(nr,function(tr,ar){return tr.invoke(ar,nr)})}return un?J(fn)?fn?bn?new j(bn.thisDep,bn.contextDep,bn.propDep,function(tr,ar){return ar.def(tr.ELEMENTS,".vertCount-",tr.OFFSET)}):X(function(tr,ar){return ar.def(tr.ELEMENTS,".vertCount")}):X(function(){return-1}):new j(fn.thisDep||bn.thisDep,fn.contextDep||bn.contextDep,fn.propDep||bn.propDep,function(tr,ar){var ir=tr.ELEMENTS;return tr.OFFSET?ar.def(ir,"?",ir,".vertCount-",tr.OFFSET,":-1"):ar.def(ir,"?",ir,".vertCount:-1")}):ln?new j(gn.thisDep,gn.contextDep,gn.propDep,function(tr,ar){return ar.def(tr.shared.vao,".currentVAO?",tr.shared.vao,".currentVAO.count:-1")}):null}(),Wn=rn("instances",!1);return{elements:fn,primitive:In,count:Hn,instances:Wn,offset:bn,vao:gn,vaoActive:ln,elementsActive:un,static:wn}}function xn(Rt,Zt){var rn=Rt.static,Ln=Rt.dynamic,Sn={};return Object.keys(rn).forEach(function(wn){var ln=rn[wn],gn=Ke.id(wn),un=new lr;if(D(ln))un.state=1,un.buffer=Ie.getBuffer(Ie.create(ln,34962,!1,!0)),un.type=0;else if(bn=Ie.getBuffer(ln))un.state=1,un.buffer=bn,un.type=0;else if("constant"in ln){var fn=ln.constant;un.buffer="null",un.state=2,typeof fn=="number"?un.x=fn:Pt.forEach(function(tr,ar){ar<fn.length&&(un[tr]=fn[ar])})}else{var bn=D(ln.buffer)?Ie.getBuffer(Ie.create(ln.buffer,34962,!1,!0)):Ie.getBuffer(ln.buffer),In=0|ln.offset,Hn=0|ln.stride,Wn=0|ln.size,Gn=!!ln.normalized,nr=0;"type"in ln&&(nr=xe[ln.type]),ln=0|ln.divisor,un.buffer=bn,un.state=1,un.size=Wn,un.normalized=Gn,un.type=nr||bn.dtype,un.offset=In,un.stride=Hn,un.divisor=ln}Sn[wn]=X(function(tr,ar){var ir=tr.attribCache;if(gn in ir)return ir[gn];var cr={isStream:!1};return Object.keys(un).forEach(function(br){cr[br]=un[br]}),un.buffer&&(cr.buffer=tr.link(un.buffer),cr.type=cr.type||cr.buffer+".dtype"),ir[gn]=cr})}),Object.keys(Ln).forEach(function(wn){var ln=Ln[wn];Sn[wn]=Z(ln,function(gn,un){function fn(ir){un(Gn[ir],"=",bn,".",ir,"|0;")}var bn=gn.invoke(un,ln),In=gn.shared,Hn=gn.constants,Wn=In.isBufferArgs,Gn=(In=In.buffer,{isStream:un.def(!1)}),nr=new lr;nr.state=1,Object.keys(nr).forEach(function(ir){Gn[ir]=un.def(""+nr[ir])});var tr=Gn.buffer,ar=Gn.type;return un("if(",Wn,"(",bn,")){",Gn.isStream,"=true;",tr,"=",In,".createStream(",34962,",",bn,");",ar,"=",tr,".dtype;","}else{",tr,"=",In,".getBuffer(",bn,");","if(",tr,"){",ar,"=",tr,".dtype;",'}else if("constant" in ',bn,"){",Gn.state,"=",2,";","if(typeof "+bn+'.constant === "number"){',Gn[Pt[0]],"=",bn,".constant;",Pt.slice(1).map(function(ir){return Gn[ir]}).join("="),"=0;","}else{",Pt.map(function(ir,cr){return Gn[ir]+"="+bn+".constant.length>"+cr+"?"+bn+".constant["+cr+"]:0;"}).join(""),"}}else{","if(",Wn,"(",bn,".buffer)){",tr,"=",In,".createStream(",34962,",",bn,".buffer);","}else{",tr,"=",In,".getBuffer(",bn,".buffer);","}",ar,'="type" in ',bn,"?",Hn.glTypes,"[",bn,".type]:",tr,".dtype;",Gn.normalized,"=!!",bn,".normalized;"),fn("size"),fn("offset"),fn("stride"),fn("divisor"),un("}}"),un.exit("if(",Gn.isStream,"){",In,".destroyStream(",tr,");","}"),Gn})}),Sn}function jn(Rt,Zt,rn,Ln,Sn){function wn(nr){var tr=gn[nr];tr&&(fn[nr]=tr)}var ln=function(nr,tr){if(typeof(ar=nr.static).frag=="string"&&typeof ar.vert=="string"){if(0<Object.keys(tr.dynamic).length)return null;var ar=tr.static,ir=Object.keys(ar);if(0<ir.length&&typeof ar[ir[0]]=="number"){for(var cr=[],br=0;br<ir.length;++br)cr.push([0|ar[ir[br]],ir[br]]);return cr}}return null}(Rt,Zt),gn=function(nr,tr,ar){function ir(Tr){if(Tr in cr){var sr=cr[Tr];Tr=!0;var kr,Rr,Qr=0|sr.x,ci=0|sr.y;return"width"in sr?kr=0|sr.width:Tr=!1,"height"in sr?Rr=0|sr.height:Tr=!1,new j(!Tr&&tr&&tr.thisDep,!Tr&&tr&&tr.contextDep,!Tr&&tr&&tr.propDep,function(qi,Ei){var oi=qi.shared.context,la=kr;"width"in sr||(la=Ei.def(oi,".","framebufferWidth","-",Qr));var Aa=Rr;return"height"in sr||(Aa=Ei.def(oi,".","framebufferHeight","-",ci)),[Qr,ci,la,Aa]})}if(Tr in br){var pi=br[Tr];return Tr=Z(pi,function(qi,Ei){var oi=qi.invoke(Ei,pi),la=qi.shared.context,Aa=Ei.def(oi,".x|0"),no=Ei.def(oi,".y|0");return[Aa,no,Ei.def('"width" in ',oi,"?",oi,".width|0:","(",la,".","framebufferWidth","-",Aa,")"),oi=Ei.def('"height" in ',oi,"?",oi,".height|0:","(",la,".","framebufferHeight","-",no,")")]}),tr&&(Tr.thisDep=Tr.thisDep||tr.thisDep,Tr.contextDep=Tr.contextDep||tr.contextDep,Tr.propDep=Tr.propDep||tr.propDep),Tr}return tr?new j(tr.thisDep,tr.contextDep,tr.propDep,function(qi,Ei){var oi=qi.shared.context;return[0,0,Ei.def(oi,".","framebufferWidth"),Ei.def(oi,".","framebufferHeight")]}):null}var cr=nr.static,br=nr.dynamic;if(nr=ir("viewport")){var xr=nr;nr=new j(nr.thisDep,nr.contextDep,nr.propDep,function(Tr,sr){var kr=xr.append(Tr,sr),Rr=Tr.shared.context;return sr.set(Rr,".viewportWidth",kr[2]),sr.set(Rr,".viewportHeight",kr[3]),kr})}return{viewport:nr,scissor_box:ir("scissor.box")}}(Rt,In=Kt(Rt)),un=nn(Rt),fn=function(nr,tr){var ar=nr.static,ir=nr.dynamic,cr={};return qn.forEach(function(br){function xr(sr,kr){if(br in ar){var Rr=sr(ar[br]);cr[Tr]=X(function(){return Rr})}else if(br in ir){var Qr=ir[br];cr[Tr]=Z(Qr,function(ci,pi){return kr(ci,pi,ci.invoke(pi,Qr))})}}var Tr=Ut(br);switch(br){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return xr(function(sr){return sr},function(sr,kr,Rr){return Rr});case"depth.func":return xr(function(sr){return Nt[sr]},function(sr,kr,Rr){return kr.def(sr.constants.compareFuncs,"[",Rr,"]")});case"depth.range":return xr(function(sr){return sr},function(sr,kr,Rr){return[kr.def("+",Rr,"[0]"),kr=kr.def("+",Rr,"[1]")]});case"blend.func":return xr(function(sr){return[Ot["srcRGB"in sr?sr.srcRGB:sr.src],Ot["dstRGB"in sr?sr.dstRGB:sr.dst],Ot["srcAlpha"in sr?sr.srcAlpha:sr.src],Ot["dstAlpha"in sr?sr.dstAlpha:sr.dst]]},function(sr,kr,Rr){function Qr(Ei,oi){return kr.def('"',Ei,oi,'" in ',Rr,"?",Rr,".",Ei,oi,":",Rr,".",Ei)}sr=sr.constants.blendFuncs;var ci=Qr("src","RGB"),pi=Qr("dst","RGB"),qi=(ci=kr.def(sr,"[",ci,"]"),kr.def(sr,"[",Qr("src","Alpha"),"]"));return[ci,pi=kr.def(sr,"[",pi,"]"),qi,sr=kr.def(sr,"[",Qr("dst","Alpha"),"]")]});case"blend.equation":return xr(function(sr){return typeof sr=="string"?[hr[sr],hr[sr]]:typeof sr=="object"?[hr[sr.rgb],hr[sr.alpha]]:void 0},function(sr,kr,Rr){var Qr=sr.constants.blendEquations,ci=kr.def(),pi=kr.def();return(sr=sr.cond("typeof ",Rr,'==="string"')).then(ci,"=",pi,"=",Qr,"[",Rr,"];"),sr.else(ci,"=",Qr,"[",Rr,".rgb];",pi,"=",Qr,"[",Rr,".alpha];"),kr(sr),[ci,pi]});case"blend.color":return xr(function(sr){return b(4,function(kr){return+sr[kr]})},function(sr,kr,Rr){return b(4,function(Qr){return kr.def("+",Rr,"[",Qr,"]")})});case"stencil.mask":return xr(function(sr){return 0|sr},function(sr,kr,Rr){return kr.def(Rr,"|0")});case"stencil.func":return xr(function(sr){return[Nt[sr.cmp||"keep"],sr.ref||0,"mask"in sr?sr.mask:-1]},function(sr,kr,Rr){return[sr=kr.def('"cmp" in ',Rr,"?",sr.constants.compareFuncs,"[",Rr,".cmp]",":",7680),kr.def(Rr,".ref|0"),kr=kr.def('"mask" in ',Rr,"?",Rr,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return xr(function(sr){return[br==="stencil.opBack"?1029:1028,zt[sr.fail||"keep"],zt[sr.zfail||"keep"],zt[sr.zpass||"keep"]]},function(sr,kr,Rr){function Qr(pi){return kr.def('"',pi,'" in ',Rr,"?",ci,"[",Rr,".",pi,"]:",7680)}var ci=sr.constants.stencilOps;return[br==="stencil.opBack"?1029:1028,Qr("fail"),Qr("zfail"),Qr("zpass")]});case"polygonOffset.offset":return xr(function(sr){return[0|sr.factor,0|sr.units]},function(sr,kr,Rr){return[kr.def(Rr,".factor|0"),kr=kr.def(Rr,".units|0")]});case"cull.face":return xr(function(sr){var kr=0;return sr==="front"?kr=1028:sr==="back"&&(kr=1029),kr},function(sr,kr,Rr){return kr.def(Rr,'==="front"?',1028,":",1029)});case"frontFace":return xr(function(sr){return Ze[sr]},function(sr,kr,Rr){return kr.def(Rr+'==="cw"?2304:2305')});case"colorMask":return xr(function(sr){return sr.map(function(kr){return!!kr})},function(sr,kr,Rr){return b(4,function(Qr){return"!!"+Rr+"["+Qr+"]"})});case"sample.coverage":return xr(function(sr){return["value"in sr?sr.value:1,!!sr.invert]},function(sr,kr,Rr){return[kr.def('"value" in ',Rr,"?+",Rr,".value:1"),kr=kr.def("!!",Rr,".invert")]})}}),cr}(Rt),bn=pn(Rt,0,ln);wn("viewport"),wn(Ut("scissor.box"));var In,Hn=0<Object.keys(fn).length;if((In={framebuffer:In,draw:un,shader:bn,state:fn,dirty:Hn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(nr){var tr,ar=nr.static;if(nr=nr.dynamic,"profile"in ar){var ir=!!ar.profile;(tr=X(function(br,xr){return ir})).enable=ir}else if("profile"in nr){var cr=nr.profile;tr=Z(cr,function(br,xr){return br.invoke(xr,cr)})}return tr}(Rt),In.uniforms=function(nr,tr){var ar=nr.static,ir=nr.dynamic,cr={};return Object.keys(ar).forEach(function(br){var xr,Tr=ar[br];if(typeof Tr=="number"||typeof Tr=="boolean")xr=X(function(){return Tr});else if(typeof Tr=="function"){var sr=Tr._reglType;sr==="texture2d"||sr==="textureCube"?xr=X(function(kr){return kr.link(Tr)}):sr!=="framebuffer"&&sr!=="framebufferCube"||(xr=X(function(kr){return kr.link(Tr.color[0])}))}else x(Tr)&&(xr=X(function(kr){return kr.global.def("[",b(Tr.length,function(Rr){return Tr[Rr]}),"]")}));xr.value=Tr,cr[br]=xr}),Object.keys(ir).forEach(function(br){var xr=ir[br];cr[br]=Z(xr,function(Tr,sr){return Tr.invoke(sr,xr)})}),cr}(rn),In.drawVAO=In.scopeVAO=un.vao,!In.drawVAO&&bn.program&&!ln&&st.angle_instanced_arrays&&un.static.elements){var Wn=!0;if(Rt=bn.program.attributes.map(function(nr){return nr=Zt.static[nr],Wn=Wn&&!!nr,nr}),Wn&&0<Rt.length){var Gn=At.getVAO(At.createVAO({attributes:Rt,elements:un.static.elements}));In.drawVAO=new j(null,null,null,function(nr,tr){return nr.link(Gn)}),In.useVAO=!0}}return ln?In.useVAO=!0:In.attributes=xn(Zt),In.context=function(nr){var tr=nr.static,ar=nr.dynamic,ir={};return Object.keys(tr).forEach(function(cr){var br=tr[cr];ir[cr]=X(function(xr,Tr){return typeof br=="number"||typeof br=="boolean"?""+br:xr.link(br)})}),Object.keys(ar).forEach(function(cr){var br=ar[cr];ir[cr]=Z(br,function(xr,Tr){return xr.invoke(Tr,br)})}),ir}(Ln),In}function mn(Rt,Zt,rn){var Ln=Rt.shared.context,Sn=Rt.scope();Object.keys(rn).forEach(function(wn){Zt.save(Ln,"."+wn);var ln=rn[wn].append(Rt,Zt);Array.isArray(ln)?Sn(Ln,".",wn,"=[",ln.join(),"];"):Sn(Ln,".",wn,"=",ln,";")}),Zt(Sn)}function en(Rt,Zt,rn,Ln){var Sn,wn=(gn=Rt.shared).gl,ln=gn.framebuffer;hn&&(Sn=Zt.def(gn.extensions,".webgl_draw_buffers"));var gn=(un=Rt.constants).drawBuffer,un=un.backBuffer;Rt=rn?rn.append(Rt,Zt):Zt.def(ln,".next"),Ln||Zt("if(",Rt,"!==",ln,".cur){"),Zt("if(",Rt,"){",wn,".bindFramebuffer(",36160,",",Rt,".framebuffer);"),hn&&Zt(Sn,".drawBuffersWEBGL(",gn,"[",Rt,".colorAttachments.length]);"),Zt("}else{",wn,".bindFramebuffer(",36160,",null);"),hn&&Zt(Sn,".drawBuffersWEBGL(",un,");"),Zt("}",ln,".cur=",Rt,";"),Ln||Zt("}")}function vn(Rt,Zt,rn){var Ln=Rt.shared,Sn=Ln.gl,wn=Rt.current,ln=Rt.next,gn=Ln.current,un=Ln.next,fn=Rt.cond(gn,".dirty");qn.forEach(function(bn){var In,Hn;if(!((bn=Ut(bn))in rn.state))if(bn in ln){In=ln[bn],Hn=wn[bn];var Wn=b(Tn[bn].length,function(Gn){return fn.def(In,"[",Gn,"]")});fn(Rt.cond(Wn.map(function(Gn,nr){return Gn+"!=="+Hn+"["+nr+"]"}).join("||")).then(Sn,".",Yn[bn],"(",Wn,");",Wn.map(function(Gn,nr){return Hn+"["+nr+"]="+Gn}).join(";"),";"))}else In=fn.def(un,".",bn),Wn=Rt.cond(In,"!==",gn,".",bn),fn(Wn),bn in Un?Wn(Rt.cond(In).then(Sn,".enable(",Un[bn],");").else(Sn,".disable(",Un[bn],");"),gn,".",bn,"=",In,";"):Wn(Sn,".",Yn[bn],"(",In,");",gn,".",bn,"=",In,";")}),Object.keys(rn.state).length===0&&fn(gn,".dirty=false;"),Zt(fn)}function on(Rt,Zt,rn,Ln){var Sn,wn=Rt.shared,ln=Rt.current,gn=wn.current,un=wn.gl;U(Object.keys(rn)).forEach(function(fn){var bn=rn[fn];if(!Ln||Ln(bn)){var In=bn.append(Rt,Zt);if(Un[fn]){var Hn=Un[fn];J(bn)?(Sn=Rt.link(In,{stable:!0}),Zt(Rt.cond(Sn).then(un,".enable(",Hn,");").else(un,".disable(",Hn,");")),Zt(gn,".",fn,"=",Sn,";")):(Zt(Rt.cond(In).then(un,".enable(",Hn,");").else(un,".disable(",Hn,");")),Zt(gn,".",fn,"=",In,";"))}else if(x(In)){var Wn=ln[fn];Zt(un,".",Yn[fn],"(",In,");",In.map(function(Gn,nr){return Wn+"["+nr+"]="+Gn}).join(";"),";")}else J(bn)?(Sn=Rt.link(In,{stable:!0}),Zt(un,".",Yn[fn],"(",Sn,");",gn,".",fn,"=",Sn,";")):Zt(un,".",Yn[fn],"(",In,");",gn,".",fn,"=",In,";")}})}function sn(Rt,Zt){Gt&&(Rt.instancing=Zt.def(Rt.shared.extensions,".angle_instanced_arrays"))}function En(Rt,Zt,rn,Ln,Sn){function wn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function ln(nr){nr(fn=Zt.def(),"=",wn(),";"),typeof Sn=="string"?nr(Hn,".count+=",Sn,";"):nr(Hn,".count++;"),vt&&(Ln?nr(bn=Zt.def(),"=",Gn,".getNumPendingQueries();"):nr(Gn,".beginQuery(",Hn,");"))}function gn(nr){nr(Hn,".cpuTime+=",wn(),"-",fn,";"),vt&&(Ln?nr(Gn,".pushScopeStats(",bn,",",Gn,".getNumPendingQueries(),",Hn,");"):nr(Gn,".endQuery();"))}function un(nr){var tr=Zt.def(Wn,".profile");Zt(Wn,".profile=",nr,";"),Zt.exit(Wn,".profile=",tr,";")}var fn,bn,In=Rt.shared,Hn=Rt.stats,Wn=In.current,Gn=In.timer;if(rn=rn.profile){if(J(rn))return void(rn.enable?(ln(Zt),gn(Zt.exit),un("true")):un("false"));un(rn=rn.append(Rt,Zt))}else rn=Zt.def(Wn,".profile");ln(In=Rt.block()),Zt("if(",rn,"){",In,"}"),gn(Rt=Rt.block()),Zt.exit("if(",rn,"){",Rt,"}")}function kn(Rt,Zt,rn,Ln,Sn){function wn(gn,un,fn){function bn(){Zt("if(!",Gn,".buffer){",Hn,".enableVertexAttribArray(",Wn,");}");var ir,cr=fn.type;ir=fn.size?Zt.def(fn.size,"||",un):un,Zt("if(",Gn,".type!==",cr,"||",Gn,".size!==",ir,"||",ar.map(function(br){return Gn+"."+br+"!=="+fn[br]}).join("||"),"){",Hn,".bindBuffer(",34962,",",nr,".buffer);",Hn,".vertexAttribPointer(",[Wn,ir,cr,fn.normalized,fn.stride,fn.offset],");",Gn,".type=",cr,";",Gn,".size=",ir,";",ar.map(function(br){return Gn+"."+br+"="+fn[br]+";"}).join(""),"}"),Gt&&(cr=fn.divisor,Zt("if(",Gn,".divisor!==",cr,"){",Rt.instancing,".vertexAttribDivisorANGLE(",[Wn,cr],");",Gn,".divisor=",cr,";}"))}function In(){Zt("if(",Gn,".buffer){",Hn,".disableVertexAttribArray(",Wn,");",Gn,".buffer=null;","}if(",Pt.map(function(ir,cr){return Gn+"."+ir+"!=="+tr[cr]}).join("||"),"){",Hn,".vertexAttrib4f(",Wn,",",tr,");",Pt.map(function(ir,cr){return Gn+"."+ir+"="+tr[cr]+";"}).join(""),"}")}var Hn=ln.gl,Wn=Zt.def(gn,".location"),Gn=Zt.def(ln.attributes,"[",Wn,"]");gn=fn.state;var nr=fn.buffer,tr=[fn.x,fn.y,fn.z,fn.w],ar=["buffer","normalized","offset","stride"];gn===1?bn():gn===2?In():(Zt("if(",gn,"===",1,"){"),bn(),Zt("}else{"),In(),Zt("}"))}var ln=Rt.shared;Ln.forEach(function(gn){var un,fn=gn.name,bn=rn.attributes[fn];if(bn){if(!Sn(bn))return;un=bn.append(Rt,Zt)}else{if(!Sn(Ye))return;var In=Rt.scopeAttrib(fn);un={},Object.keys(new lr).forEach(function(Hn){un[Hn]=Zt.def(In,".",Hn)})}wn(Rt.link(gn),function(Hn){switch(Hn){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(gn.info.type),un)})}function zn(Rt,Zt,rn,Ln,Sn,wn){for(var ln,gn=Rt.shared,un=gn.gl,fn=0;fn<Ln.length;++fn){var bn,In=(Gn=Ln[fn]).name,Hn=Gn.info.type,Wn=rn.uniforms[In],Gn=Rt.link(Gn)+".location";if(Wn){if(!Sn(Wn))continue;if(J(Wn)){if(In=Wn.value,Hn===35678||Hn===35680)Zt(un,".uniform1i(",Gn,",",(Hn=Rt.link(In._texture||In.color[0]._texture))+".bind());"),Zt.exit(Hn,".unbind();");else if(Hn===35674||Hn===35675||Hn===35676)Wn=2,Hn===35675?Wn=3:Hn===35676&&(Wn=4),Zt(un,".uniformMatrix",Wn,"fv(",Gn,",false,",In=Rt.global.def("new Float32Array(["+Array.prototype.slice.call(In)+"])"),");");else{switch(Hn){case 5126:ln="1f";break;case 35664:ln="2f";break;case 35665:ln="3f";break;case 35666:ln="4f";break;case 35670:case 5124:ln="1i";break;case 35671:case 35667:ln="2i";break;case 35672:case 35668:ln="3i";break;case 35673:case 35669:ln="4i"}Zt(un,".uniform",ln,"(",Gn,",",x(In)?Array.prototype.slice.call(In):In,");")}continue}bn=Wn.append(Rt,Zt)}else{if(!Sn(Ye))continue;bn=Zt.def(gn.uniforms,"[",Ke.id(In),"]")}switch(Hn===35678?Zt("if(",bn,"&&",bn,'._reglType==="framebuffer"){',bn,"=",bn,".color[0];","}"):Hn===35680&&Zt("if(",bn,"&&",bn,'._reglType==="framebufferCube"){',bn,"=",bn,".color[0];","}"),In=1,Hn){case 35678:case 35680:Hn=Zt.def(bn,"._texture"),Zt(un,".uniform1i(",Gn,",",Hn,".bind());"),Zt.exit(Hn,".unbind();");continue;case 5124:case 35670:ln="1i";break;case 35667:case 35671:ln="2i",In=2;break;case 35668:case 35672:ln="3i",In=3;break;case 35669:case 35673:ln="4i",In=4;break;case 5126:ln="1f";break;case 35664:ln="2f",In=2;break;case 35665:ln="3f",In=3;break;case 35666:ln="4f",In=4;break;case 35674:ln="Matrix2fv";break;case 35675:ln="Matrix3fv";break;case 35676:ln="Matrix4fv"}if(ln.charAt(0)==="M"){Zt(un,".uniform",ln,"(",Gn,","),Gn=Math.pow(Hn-35674+2,2);var nr=Rt.global.def("new Float32Array(",Gn,")");Array.isArray(bn)?Zt("false,(",b(Gn,function(ar){return nr+"["+ar+"]="+bn[ar]}),",",nr,")"):Zt("false,(Array.isArray(",bn,")||",bn," instanceof Float32Array)?",bn,":(",b(Gn,function(ar){return nr+"["+ar+"]="+bn+"["+ar+"]"}),",",nr,")"),Zt(");")}else{if(1<In){Hn=[];var tr=[];for(Wn=0;Wn<In;++Wn)Array.isArray(bn)?tr.push(bn[Wn]):tr.push(Zt.def(bn+"["+Wn+"]")),wn&&Hn.push(Zt.def());wn&&Zt("if(!",Rt.batchId,"||",Hn.map(function(ar,ir){return ar+"!=="+tr[ir]}).join("||"),"){",Hn.map(function(ar,ir){return ar+"="+tr[ir]+";"}).join("")),Zt(un,".uniform",ln,"(",Gn,",",tr.join(","),");")}else wn&&(Hn=Zt.def(),Zt("if(!",Rt.batchId,"||",Hn,"!==",bn,"){",Hn,"=",bn,";")),Zt(un,".uniform",ln,"(",Gn,",",bn,");");wn&&Zt("}")}}}function Fn(Rt,Zt,rn,Ln){function Sn(cr){var br=Hn[cr];return br?br.contextDep&&Ln.contextDynamic||br.propDep?br.append(Rt,rn):br.append(Rt,Zt):Zt.def(In,".",cr)}function wn(){function cr(){rn(un,".drawElementsInstancedANGLE(",[Gn,tr,ar,nr+"<<(("+ar+"-5121)>>1)",gn],");")}function br(){rn(un,".drawArraysInstancedANGLE(",[Gn,nr,tr,gn],");")}Wn&&Wn!=="null"?ir?cr():(rn("if(",Wn,"){"),cr(),rn("}else{"),br(),rn("}")):br()}function ln(){function cr(){rn(bn+".drawElements("+[Gn,tr,ar,nr+"<<(("+ar+"-5121)>>1)"]+");")}function br(){rn(bn+".drawArrays("+[Gn,nr,tr]+");")}Wn&&Wn!=="null"?ir?cr():(rn("if(",Wn,"){"),cr(),rn("}else{"),br(),rn("}")):br()}var gn,un,fn=Rt.shared,bn=fn.gl,In=fn.draw,Hn=Ln.draw,Wn=function(){var cr=Hn.elements,br=Zt;return cr?((cr.contextDep&&Ln.contextDynamic||cr.propDep)&&(br=rn),cr=cr.append(Rt,br),Hn.elementsActive&&br("if("+cr+")"+bn+".bindBuffer(34963,"+cr+".buffer.buffer);")):(cr=br.def(),br(cr,"=",In,".","elements",";","if(",cr,"){",bn,".bindBuffer(",34963,",",cr,".buffer.buffer);}","else if(",fn.vao,".currentVAO){",cr,"=",Rt.shared.elements+".getElements("+fn.vao,".currentVAO.elements);",An?"":"if("+cr+")"+bn+".bindBuffer(34963,"+cr+".buffer.buffer);","}")),cr}(),Gn=Sn("primitive"),nr=Sn("offset"),tr=function(){var cr=Hn.count,br=Zt;return cr?((cr.contextDep&&Ln.contextDynamic||cr.propDep)&&(br=rn),cr=cr.append(Rt,br)):cr=br.def(In,".","count"),cr}();if(typeof tr=="number"){if(tr===0)return}else rn("if(",tr,"){"),rn.exit("}");Gt&&(gn=Sn("instances"),un=Rt.instancing);var ar=Wn+".type",ir=Hn.elements&&J(Hn.elements)&&!Hn.vaoActive;Gt&&(typeof gn!="number"||0<=gn)?typeof gn=="string"?(rn("if(",gn,">0){"),wn(),rn("}else if(",gn,"<0){"),ln(),rn("}")):wn():ln()}function Bn(Rt,Zt,rn,Ln,Sn){return Sn=(Zt=Yt()).proc("body",Sn),Gt&&(Zt.instancing=Sn.def(Zt.shared.extensions,".angle_instanced_arrays")),Rt(Zt,Sn,rn,Ln),Zt.compile().body}function er(Rt,Zt,rn,Ln){sn(Rt,Zt),rn.useVAO?rn.drawVAO?Zt(Rt.shared.vao,".setVAO(",rn.drawVAO.append(Rt,Zt),");"):Zt(Rt.shared.vao,".setVAO(",Rt.shared.vao,".targetVAO);"):(Zt(Rt.shared.vao,".setVAO(null);"),kn(Rt,Zt,rn,Ln.attributes,function(){return!0})),zn(Rt,Zt,rn,Ln.uniforms,function(){return!0},!1),Fn(Rt,Zt,Zt,rn)}function Xn(Rt,Zt,rn,Ln){function Sn(){return!0}Rt.batchId="a1",sn(Rt,Zt),kn(Rt,Zt,rn,Ln.attributes,Sn),zn(Rt,Zt,rn,Ln.uniforms,Sn,!1),Fn(Rt,Zt,Zt,rn)}function mr(Rt,Zt,rn,Ln){function Sn(In){return In.contextDep&&ln||In.propDep}function wn(In){return!Sn(In)}sn(Rt,Zt);var ln=rn.contextDep,gn=Zt.def(),un=Zt.def();Rt.shared.props=un,Rt.batchId=gn;var fn=Rt.scope(),bn=Rt.scope();Zt(fn.entry,"for(",gn,"=0;",gn,"<","a1",";++",gn,"){",un,"=","a0","[",gn,"];",bn,"}",fn.exit),rn.needsContext&&mn(Rt,bn,rn.context),rn.needsFramebuffer&&en(Rt,bn,rn.framebuffer),on(Rt,bn,rn.state,Sn),rn.profile&&Sn(rn.profile)&&En(Rt,bn,rn,!1,!0),Ln?(rn.useVAO?rn.drawVAO?Sn(rn.drawVAO)?bn(Rt.shared.vao,".setVAO(",rn.drawVAO.append(Rt,bn),");"):fn(Rt.shared.vao,".setVAO(",rn.drawVAO.append(Rt,fn),");"):fn(Rt.shared.vao,".setVAO(",Rt.shared.vao,".targetVAO);"):(fn(Rt.shared.vao,".setVAO(null);"),kn(Rt,fn,rn,Ln.attributes,wn),kn(Rt,bn,rn,Ln.attributes,Sn)),zn(Rt,fn,rn,Ln.uniforms,wn,!1),zn(Rt,bn,rn,Ln.uniforms,Sn,!0),Fn(Rt,fn,bn,rn)):(Zt=Rt.global.def("{}"),Ln=rn.shader.progVar.append(Rt,bn),un=bn.def(Ln,".id"),fn=bn.def(Zt,"[",un,"]"),bn(Rt.shared.gl,".useProgram(",Ln,".program);","if(!",fn,"){",fn,"=",Zt,"[",un,"]=",Rt.link(function(In){return Bn(Xn,Rt,rn,In,2)}),"(",Ln,");}",fn,".call(this,a0[",gn,"],",gn,");"))}function ur(Rt,Zt){function rn(gn){var un=Zt.shader[gn];un&&(un=un.append(Rt,Ln),isNaN(un)?Ln.set(Sn.shader,"."+gn,un):Ln.set(Sn.shader,"."+gn,Rt.link(un,{stable:!0})))}var Ln=Rt.proc("scope",3);Rt.batchId="a2";var Sn=Rt.shared,wn=Sn.current;if(mn(Rt,Ln,Zt.context),Zt.framebuffer&&Zt.framebuffer.append(Rt,Ln),U(Object.keys(Zt.state)).forEach(function(gn){var un=Zt.state[gn],fn=un.append(Rt,Ln);x(fn)?fn.forEach(function(bn,In){isNaN(bn)?Ln.set(Rt.next[gn],"["+In+"]",bn):Ln.set(Rt.next[gn],"["+In+"]",Rt.link(bn,{stable:!0}))}):J(un)?Ln.set(Sn.next,"."+gn,Rt.link(fn,{stable:!0})):Ln.set(Sn.next,"."+gn,fn)}),En(Rt,Ln,Zt,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(gn){var un=Zt.draw[gn];un&&(un=un.append(Rt,Ln),isNaN(un)?Ln.set(Sn.draw,"."+gn,un):Ln.set(Sn.draw,"."+gn,Rt.link(un),{stable:!0}))}),Object.keys(Zt.uniforms).forEach(function(gn){var un=Zt.uniforms[gn].append(Rt,Ln);Array.isArray(un)&&(un="["+un.map(function(fn){return isNaN(fn)?fn:Rt.link(fn,{stable:!0})})+"]"),Ln.set(Sn.uniforms,"["+Rt.link(Ke.id(gn),{stable:!0})+"]",un)}),Object.keys(Zt.attributes).forEach(function(gn){var un=Zt.attributes[gn].append(Rt,Ln),fn=Rt.scopeAttrib(gn);Object.keys(new lr).forEach(function(bn){Ln.set(fn,"."+bn,un[bn])})}),Zt.scopeVAO){var ln=Zt.scopeVAO.append(Rt,Ln);isNaN(ln)?Ln.set(Sn.vao,".targetVAO",ln):Ln.set(Sn.vao,".targetVAO",Rt.link(ln,{stable:!0}))}rn("vert"),rn("frag"),0<Object.keys(Zt.state).length&&(Ln(wn,".dirty=true;"),Ln.exit(wn,".dirty=true;")),Ln("a1(",Rt.shared.context,",a0,",Rt.batchId,");")}function $n(Rt,Zt,rn){var Ln=Zt.static[rn];if(Ln&&function(bn){if(typeof bn=="object"&&!x(bn)){for(var In=Object.keys(bn),Hn=0;Hn<In.length;++Hn)if(re.isDynamic(bn[In[Hn]]))return!0;return!1}}(Ln)){var Sn=Rt.global,wn=Object.keys(Ln),ln=!1,gn=!1,un=!1,fn=Rt.global.def("{}");wn.forEach(function(bn){var In=Ln[bn];if(re.isDynamic(In))typeof In=="function"&&(In=Ln[bn]=re.unbox(In)),bn=Z(In,null),ln=ln||bn.thisDep,un=un||bn.propDep,gn=gn||bn.contextDep;else{switch(Sn(fn,".",bn,"="),typeof In){case"number":Sn(In);break;case"string":Sn('"',In,'"');break;case"object":Array.isArray(In)&&Sn("[",In.join(),"]");break;default:Sn(Rt.link(In))}Sn(";")}}),Zt.dynamic[rn]=new re.DynamicVariable(4,{thisDep:ln,contextDep:gn,propDep:un,ref:fn,append:function(bn,In){wn.forEach(function(Hn){var Wn=Ln[Hn];re.isDynamic(Wn)&&(Wn=bn.invoke(In,Wn),In(fn,".",Hn,"=",Wn,";"))})}}),delete Zt.static[rn]}}var lr=At.Record,hr={add:32774,subtract:32778,"reverse subtract":32779};st.ext_blend_minmax&&(hr.min=32775,hr.max=32776);var Gt=st.angle_instanced_arrays,hn=st.webgl_draw_buffers,An=st.oes_vertex_array_object,Tn={dirty:!0,profile:It.profile},Rn={},qn=[],Un={},Yn={};jt("dither",3024),jt("blend.enable",3042),qt("blend.color","blendColor",[0,0,0,0]),qt("blend.equation","blendEquationSeparate",[32774,32774]),qt("blend.func","blendFuncSeparate",[1,0,1,0]),jt("depth.enable",2929,!0),qt("depth.func","depthFunc",513),qt("depth.range","depthRange",[0,1]),qt("depth.mask","depthMask",!0),qt("colorMask","colorMask",[!0,!0,!0,!0]),jt("cull.enable",2884),qt("cull.face","cullFace",1029),qt("frontFace","frontFace",2305),qt("lineWidth","lineWidth",1),jt("polygonOffset.enable",32823),qt("polygonOffset.offset","polygonOffset",[0,0]),jt("sample.alpha",32926),jt("sample.enable",32928),qt("sample.coverage","sampleCoverage",[1,!1]),jt("stencil.enable",2960),qt("stencil.mask","stencilMask",-1),qt("stencil.func","stencilFunc",[519,0,-1]),qt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),qt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),jt("scissor.enable",3089),qt("scissor.box","scissor",[0,0,je.drawingBufferWidth,je.drawingBufferHeight]),qt("viewport","viewport",[0,0,je.drawingBufferWidth,je.drawingBufferHeight]);var or={gl:je,context:St,strings:Ke,next:Rn,current:Tn,draw:ht,elements:We,buffer:Ie,shader:kt,attributes:At.state,vao:At,uniforms:gt,framebuffer:lt,extensions:st,timer:vt,isBufferArgs:D},Jt={primTypes:oe,compareFuncs:Nt,blendFuncs:Ot,blendEquations:hr,stencilOps:zt,glTypes:xe,orientationType:Ze};hn&&(Jt.backBuffer=[1029],Jt.drawBuffer=b(Se.maxDrawbuffers,function(Rt){return Rt===0?[0]:b(Rt,function(Zt){return 36064+Zt})}));var Mn=0;return{next:Rn,current:Tn,procs:function(){var Rt=Yt(),Zt=Rt.proc("poll"),rn=Rt.proc("refresh"),Ln=Rt.block();Zt(Ln),rn(Ln);var Sn,wn=(un=Rt.shared).gl,ln=un.next,gn=un.current;Ln(gn,".dirty=false;"),en(Rt,Zt),en(Rt,rn,null,!0),Gt&&(Sn=Rt.link(Gt)),st.oes_vertex_array_object&&rn(Rt.link(st.oes_vertex_array_object),".bindVertexArrayOES(null);");var un=rn.def(un.attributes),fn=rn.def(0),bn=Rt.cond(fn,".buffer");bn.then(wn,".enableVertexAttribArray(i);",wn,".bindBuffer(",34962,",",fn,".buffer.buffer);",wn,".vertexAttribPointer(i,",fn,".size,",fn,".type,",fn,".normalized,",fn,".stride,",fn,".offset);").else(wn,".disableVertexAttribArray(i);",wn,".vertexAttrib4f(i,",fn,".x,",fn,".y,",fn,".z,",fn,".w);",fn,".buffer=null;");var In=Rt.link(Se.maxAttributes,{stable:!0});return rn("for(var i=0;i<",In,";++i){",fn,"=",un,"[i];",bn,"}"),Gt&&rn("for(var i=0;i<",In,";++i){",Sn,".vertexAttribDivisorANGLE(i,",un,"[i].divisor);","}"),rn(Rt.shared.vao,".currentVAO=null;",Rt.shared.vao,".setVAO(",Rt.shared.vao,".targetVAO);"),Object.keys(Un).forEach(function(Hn){var Wn=Un[Hn],Gn=Ln.def(ln,".",Hn),nr=Rt.block();nr("if(",Gn,"){",wn,".enable(",Wn,")}else{",wn,".disable(",Wn,")}",gn,".",Hn,"=",Gn,";"),rn(nr),Zt("if(",Gn,"!==",gn,".",Hn,"){",nr,"}")}),Object.keys(Yn).forEach(function(Hn){var Wn,Gn,nr=Yn[Hn],tr=Tn[Hn],ar=Rt.block();ar(wn,".",nr,"("),x(tr)?(nr=tr.length,Wn=Rt.global.def(ln,".",Hn),Gn=Rt.global.def(gn,".",Hn),ar(b(nr,function(ir){return Wn+"["+ir+"]"}),");",b(nr,function(ir){return Gn+"["+ir+"]="+Wn+"["+ir+"];"}).join("")),Zt("if(",b(nr,function(ir){return Wn+"["+ir+"]!=="+Gn+"["+ir+"]"}).join("||"),"){",ar,"}")):(Wn=Ln.def(ln,".",Hn),Gn=Ln.def(gn,".",Hn),ar(Wn,");",gn,".",Hn,"=",Wn,";"),Zt("if(",Wn,"!==",Gn,"){",ar,"}")),rn(ar)}),Rt.compile()}(),compile:function(Rt,Zt,rn,Ln,Sn){var wn=Yt();wn.stats=wn.link(Sn),Object.keys(Zt.static).forEach(function(gn){$n(wn,Zt,gn)}),Et.forEach(function(gn){$n(wn,Rt,gn)});var ln=jn(Rt,Zt,rn,Ln);return ln.shader.program&&(ln.shader.program.attributes.sort(function(gn,un){return gn.name<un.name?-1:1}),ln.shader.program.uniforms.sort(function(gn,un){return gn.name<un.name?-1:1})),function(gn,un){var fn=gn.proc("draw",1);sn(gn,fn),mn(gn,fn,un.context),en(gn,fn,un.framebuffer),vn(gn,fn,un),on(gn,fn,un.state),En(gn,fn,un,!1,!0);var bn=un.shader.progVar.append(gn,fn);if(fn(gn.shared.gl,".useProgram(",bn,".program);"),un.shader.program)er(gn,fn,un,un.shader.program);else{fn(gn.shared.vao,".setVAO(null);");var In=gn.global.def("{}"),Hn=fn.def(bn,".id"),Wn=fn.def(In,"[",Hn,"]");fn(gn.cond(Wn).then(Wn,".call(this,a0);").else(Wn,"=",In,"[",Hn,"]=",gn.link(function(Gn){return Bn(er,gn,un,Gn,1)}),"(",bn,");",Wn,".call(this,a0);"))}0<Object.keys(un.state).length&&fn(gn.shared.current,".dirty=true;"),gn.shared.vao&&fn(gn.shared.vao,".setVAO(null);")}(wn,ln),ur(wn,ln),function(gn,un){function fn(tr){return tr.contextDep&&In||tr.propDep}var bn=gn.proc("batch",2);gn.batchId="0",sn(gn,bn);var In=!1,Hn=!0;Object.keys(un.context).forEach(function(tr){In=In||un.context[tr].propDep}),In||(mn(gn,bn,un.context),Hn=!1);var Wn=!1;if((Gn=un.framebuffer)?(Gn.propDep?In=Wn=!0:Gn.contextDep&&In&&(Wn=!0),Wn||en(gn,bn,Gn)):en(gn,bn,null),un.state.viewport&&un.state.viewport.propDep&&(In=!0),vn(gn,bn,un),on(gn,bn,un.state,function(tr){return!fn(tr)}),un.profile&&fn(un.profile)||En(gn,bn,un,!1,"a1"),un.contextDep=In,un.needsContext=Hn,un.needsFramebuffer=Wn,(Hn=un.shader.progVar).contextDep&&In||Hn.propDep)mr(gn,bn,un,null);else if(Hn=Hn.append(gn,bn),bn(gn.shared.gl,".useProgram(",Hn,".program);"),un.shader.program)mr(gn,bn,un,un.shader.program);else{bn(gn.shared.vao,".setVAO(null);");var Gn=gn.global.def("{}"),nr=(Wn=bn.def(Hn,".id"),bn.def(Gn,"[",Wn,"]"));bn(gn.cond(nr).then(nr,".call(this,a0,a1);").else(nr,"=",Gn,"[",Wn,"]=",gn.link(function(tr){return Bn(mr,gn,un,tr,2)}),"(",Hn,");",nr,".call(this,a0,a1);"))}0<Object.keys(un.state).length&&bn(gn.shared.current,".dirty=true;"),gn.shared.vao&&bn(gn.shared.vao,".setVAO(null);")}(wn,ln),Q(wn.compile(),{destroy:function(){ln.shader.program.destroy()}})}}}function W(je,Ke){for(var st=0;st<je.length;++st)if(je[st]===Ke)return st;return-1}var Q=function(je,Ke){for(var st=Object.keys(Ke),Se=0;Se<st.length;++Se)je[st[Se]]=Ke[st[Se]];return je},ne=0,re={DynamicVariable:z,define:function(je,Ke){return new z(je,S(Ke+""))},isDynamic:function(je){return typeof je=="function"&&!je._reglType||je instanceof z},unbox:function je(Ke,st){return typeof Ke=="function"?new z(0,Ke):typeof Ke=="number"||typeof Ke=="boolean"?new z(5,Ke):Array.isArray(Ke)?new z(6,Ke.map(function(Se,Ie){return je(Se)})):Ke instanceof z?Ke:void 0},accessor:S},ie={next:typeof requestAnimationFrame=="function"?function(je){return requestAnimationFrame(je)}:function(je){return setTimeout(je,16)},cancel:typeof cancelAnimationFrame=="function"?function(je){return cancelAnimationFrame(je)}:clearTimeout},se=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},ge=s();ge.zero=s();var ue=function(je,Ke){var st=1;Ke.ext_texture_filter_anisotropic&&(st=je.getParameter(34047));var Se=1,Ie=1;Ke.webgl_draw_buffers&&(Se=je.getParameter(34852),Ie=je.getParameter(36063));var We=!!Ke.oes_texture_float;if(We){We=je.createTexture(),je.bindTexture(3553,We),je.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var it=je.createFramebuffer();if(je.bindFramebuffer(36160,it),je.framebufferTexture2D(36160,36064,3553,We,0),je.bindTexture(3553,null),je.checkFramebufferStatus(36160)!==36053)We=!1;else{je.viewport(0,0,1,1),je.clearColor(1,0,0,1),je.clear(16384);var lt=ge.allocType(5126,4);je.readPixels(0,0,1,1,6408,5126,lt),je.getError()?We=!1:(je.deleteFramebuffer(it),je.deleteTexture(We),We=lt[0]===1),ge.freeType(lt)}}return lt=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(lt=je.createTexture(),it=ge.allocType(5121,36),je.activeTexture(33984),je.bindTexture(34067,lt),je.texImage2D(34069,0,6408,3,3,0,6408,5121,it),ge.freeType(it),je.bindTexture(34067,null),je.deleteTexture(lt),lt=!je.getError()),{colorBits:[je.getParameter(3410),je.getParameter(3411),je.getParameter(3412),je.getParameter(3413)],depthBits:je.getParameter(3414),stencilBits:je.getParameter(3415),subpixelBits:je.getParameter(3408),extensions:Object.keys(Ke).filter(function(gt){return!!Ke[gt]}),maxAnisotropic:st,maxDrawbuffers:Se,maxColorAttachments:Ie,pointSizeDims:je.getParameter(33901),lineWidthDims:je.getParameter(33902),maxViewportDims:je.getParameter(3386),maxCombinedTextureUnits:je.getParameter(35661),maxCubeMapSize:je.getParameter(34076),maxRenderbufferSize:je.getParameter(34024),maxTextureUnits:je.getParameter(34930),maxTextureSize:je.getParameter(3379),maxAttributes:je.getParameter(34921),maxVertexUniforms:je.getParameter(36347),maxVertexTextureUnits:je.getParameter(35660),maxVaryingVectors:je.getParameter(36348),maxFragmentUniforms:je.getParameter(36349),glsl:je.getParameter(35724),renderer:je.getParameter(7937),vendor:je.getParameter(7936),version:je.getParameter(7938),readFloat:We,npotTextureCube:lt}},ce=function(je){return je instanceof Uint8Array||je instanceof Uint16Array||je instanceof Uint32Array||je instanceof Int8Array||je instanceof Int16Array||je instanceof Int32Array||je instanceof Float32Array||je instanceof Float64Array||je instanceof Uint8ClampedArray},le=function(je){return Object.keys(je).map(function(Ke){return je[Ke]})},de={shape:function(je){for(var Ke=[];je.length;je=je[0])Ke.push(je.length);return Ke},flatten:function(je,Ke,st,Se){var Ie=1;if(Ke.length)for(var We=0;We<Ke.length;++We)Ie*=Ke[We];else Ie=0;switch(st=Se||ge.allocType(st,Ie),Ke.length){case 0:break;case 1:for(Se=Ke[0],Ke=0;Ke<Se;++Ke)st[Ke]=je[Ke];break;case 2:for(Se=Ke[0],Ke=Ke[1],We=Ie=0;We<Se;++We)for(var it=je[We],lt=0;lt<Ke;++lt)st[Ie++]=it[lt];break;case 3:o(je,Ke[0],Ke[1],Ke[2],st,0);break;default:r(je,Ke,0,st,0)}return st}},Ce={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},xe={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},_e={dynamic:35048,stream:35040,static:35044},we=de.flatten,Ae=de.shape,$=[];$[5120]=1,$[5122]=2,$[5124]=4,$[5121]=1,$[5123]=2,$[5125]=4,$[5126]=4;var oe={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},pe=new Float32Array(1),ye=new Uint32Array(pe.buffer),ke=[9984,9986,9985,9987],De=[0,6409,6410,6407,6408],Pe={};Pe[6409]=Pe[6406]=Pe[6402]=1,Pe[34041]=Pe[6410]=2,Pe[6407]=Pe[35904]=3,Pe[6408]=Pe[35906]=4;var Re=v("HTMLCanvasElement"),fe=v("OffscreenCanvas"),ve=v("CanvasRenderingContext2D"),Te=v("ImageBitmap"),ze=v("HTMLImageElement"),He=v("HTMLVideoElement"),Ve=Object.keys(Ce).concat([Re,fe,ve,Te,ze,He]),nt=[];nt[5121]=1,nt[5126]=4,nt[36193]=2,nt[5123]=2,nt[5125]=4;var tt=[];tt[32854]=2,tt[32855]=2,tt[36194]=2,tt[34041]=4,tt[33776]=.5,tt[33777]=.5,tt[33778]=1,tt[33779]=1,tt[35986]=.5,tt[35987]=1,tt[34798]=1,tt[35840]=.5,tt[35841]=.25,tt[35842]=.5,tt[35843]=.25,tt[36196]=.5;var ot=[];ot[32854]=2,ot[32855]=2,ot[36194]=2,ot[33189]=2,ot[36168]=1,ot[34041]=4,ot[35907]=4,ot[34836]=16,ot[34842]=8,ot[34843]=6;var pt=function(je,Ke,st,Se,Ie){function We(ht){this.id=At++,this.refCount=1,this.renderbuffer=ht,this.format=32854,this.height=this.width=0,Ie.profile&&(this.stats={size:0})}function it(ht){var St=ht.renderbuffer;je.bindRenderbuffer(36161,null),je.deleteRenderbuffer(St),ht.renderbuffer=null,ht.refCount=0,delete kt[ht.id],Se.renderbufferCount--}var lt={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Ke.ext_srgb&&(lt.srgba=35907),Ke.ext_color_buffer_half_float&&(lt.rgba16f=34842,lt.rgb16f=34843),Ke.webgl_color_buffer_float&&(lt.rgba32f=34836);var gt=[];Object.keys(lt).forEach(function(ht){gt[lt[ht]]=ht});var At=0,kt={};return We.prototype.decRef=function(){0>=--this.refCount&&it(this)},Ie.profile&&(Se.getTotalRenderbufferSize=function(){var ht=0;return Object.keys(kt).forEach(function(St){ht+=kt[St].stats.size}),ht}),{create:function(ht,St){function vt(It,Ut){var jt=0,qt=0,Yt=32854;if(typeof It=="object"&&It?("shape"in It?(jt=0|(qt=It.shape)[0],qt=0|qt[1]):("radius"in It&&(jt=qt=0|It.radius),"width"in It&&(jt=0|It.width),"height"in It&&(qt=0|It.height)),"format"in It&&(Yt=lt[It.format])):typeof It=="number"?(jt=0|It,qt=typeof Ut=="number"?0|Ut:jt):It||(jt=qt=1),jt!==Mt.width||qt!==Mt.height||Yt!==Mt.format)return vt.width=Mt.width=jt,vt.height=Mt.height=qt,Mt.format=Yt,je.bindRenderbuffer(36161,Mt.renderbuffer),je.renderbufferStorage(36161,Yt,jt,qt),Ie.profile&&(Mt.stats.size=ot[Mt.format]*Mt.width*Mt.height),vt.format=gt[Mt.format],vt}var Mt=new We(je.createRenderbuffer());return kt[Mt.id]=Mt,Se.renderbufferCount++,vt(ht,St),vt.resize=function(It,Ut){var jt=0|It,qt=0|Ut||jt;return jt===Mt.width&&qt===Mt.height||(vt.width=Mt.width=jt,vt.height=Mt.height=qt,je.bindRenderbuffer(36161,Mt.renderbuffer),je.renderbufferStorage(36161,Mt.format,jt,qt),Ie.profile&&(Mt.stats.size=ot[Mt.format]*Mt.width*Mt.height)),vt},vt._reglType="renderbuffer",vt._renderbuffer=Mt,Ie.profile&&(vt.stats=Mt.stats),vt.destroy=function(){Mt.decRef()},vt},clear:function(){le(kt).forEach(it)},restore:function(){le(kt).forEach(function(ht){ht.renderbuffer=je.createRenderbuffer(),je.bindRenderbuffer(36161,ht.renderbuffer),je.renderbufferStorage(36161,ht.format,ht.width,ht.height)}),je.bindRenderbuffer(36161,null)}}},Tt=[];Tt[6408]=4,Tt[6407]=3;var yt=[];yt[5121]=1,yt[5126]=4,yt[36193]=2;var dt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Pt=["x","y","z","w"],Et="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Ot={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Nt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},zt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ze={cw:2304,ccw:2305},Ye=new j(!1,!1,!1,function(){});return function(je){function Ke(){if(Xn.length===0)Kt&&Kt.update(),lr=null;else{lr=ie.next(Ke),kt();for(var Gt=Xn.length-1;0<=Gt;--Gt){var hn=Xn[Gt];hn&&hn(jn,null,0)}vt.flush(),Kt&&Kt.update()}}function st(){!lr&&0<Xn.length&&(lr=ie.next(Ke))}function Se(){lr&&(ie.cancel(Ke),lr=null)}function Ie(Gt){Gt.preventDefault(),Se(),mr.forEach(function(hn){hn()})}function We(Gt){vt.getError(),It.restore(),sn.restore(),en.restore(),En.restore(),kn.restore(),zn.restore(),on.restore(),Kt&&Kt.restore(),Fn.procs.refresh(),st(),ur.forEach(function(hn){hn()})}function it(Gt){function hn(Rt,Zt){var rn={},Ln={};return Object.keys(Rt).forEach(function(Sn){var wn=Rt[Sn];if(re.isDynamic(wn))Ln[Sn]=re.unbox(wn,Sn);else{if(Zt&&Array.isArray(wn)){for(var ln=0;ln<wn.length;++ln)if(re.isDynamic(wn[ln]))return void(Ln[Sn]=re.unbox(wn,Sn))}rn[Sn]=wn}}),{dynamic:Ln,static:rn}}var An=hn(Gt.context||{},!0),Tn=hn(Gt.uniforms||{},!0),Rn=hn(Gt.attributes||{},!1);Gt=hn(function(Rt){function Zt(Ln){if(Ln in rn){var Sn=rn[Ln];delete rn[Ln],Object.keys(Sn).forEach(function(wn){rn[Ln+"."+wn]=Sn[wn]})}}var rn=Q({},Rt);return delete rn.uniforms,delete rn.attributes,delete rn.context,delete rn.vao,"stencil"in rn&&rn.stencil.op&&(rn.stencil.opBack=rn.stencil.opFront=rn.stencil.op,delete rn.stencil.op),Zt("blend"),Zt("depth"),Zt("cull"),Zt("stencil"),Zt("polygonOffset"),Zt("scissor"),Zt("sample"),"vao"in Rt&&(rn.vao=Rt.vao),rn}(Gt),!1);var qn={gpuTime:0,cpuTime:0,count:0},Un=Fn.compile(Gt,Rn,Tn,An,qn),Yn=Un.draw,or=Un.batch,Jt=Un.scope,Mn=[];return Q(function(Rt,Zt){var rn;if(typeof Rt=="function")return Jt.call(this,null,Rt,0);if(typeof Zt=="function")if(typeof Rt=="number")for(rn=0;rn<Rt;++rn)Jt.call(this,null,Zt,rn);else{if(!Array.isArray(Rt))return Jt.call(this,Rt,Zt,0);for(rn=0;rn<Rt.length;++rn)Jt.call(this,Rt[rn],Zt,rn)}else if(typeof Rt=="number"){if(0<Rt)return or.call(this,function(Ln){for(;Mn.length<Ln;)Mn.push(null);return Mn}(0|Rt),0|Rt)}else{if(!Array.isArray(Rt))return Yn.call(this,Rt);if(Rt.length)return or.call(this,Rt,Rt.length)}},{stats:qn,destroy:function(){Un.destroy()}})}function lt(Gt,hn){var An=0;Fn.procs.poll();var Tn=hn.color;Tn&&(vt.clearColor(+Tn[0]||0,+Tn[1]||0,+Tn[2]||0,+Tn[3]||0),An|=16384),"depth"in hn&&(vt.clearDepth(+hn.depth),An|=256),"stencil"in hn&&(vt.clearStencil(0|hn.stencil),An|=1024),vt.clear(An)}function gt(Gt){return Xn.push(Gt),st(),{cancel:function(){var hn=W(Xn,Gt);Xn[hn]=function An(){var Tn=W(Xn,An);Xn[Tn]=Xn[Xn.length-1],--Xn.length,0>=Xn.length&&Se()}}}}function At(){var Gt=Bn.viewport,hn=Bn.scissor_box;Gt[0]=Gt[1]=hn[0]=hn[1]=0,jn.viewportWidth=jn.framebufferWidth=jn.drawingBufferWidth=Gt[2]=hn[2]=vt.drawingBufferWidth,jn.viewportHeight=jn.framebufferHeight=jn.drawingBufferHeight=Gt[3]=hn[3]=vt.drawingBufferHeight}function kt(){jn.tick+=1,jn.time=St(),At(),Fn.procs.poll()}function ht(){En.refresh(),At(),Fn.procs.refresh(),Kt&&Kt.update()}function St(){return(se()-pn)/1e3}if(!(je=T(je)))return null;var vt=je.gl,Mt=vt.getContextAttributes();vt.isContextLost();var It=function(Gt,hn){function An(Un){var Yn;Un=Un.toLowerCase();try{Yn=Tn[Un]=Gt.getExtension(Un)}catch{}return!!Yn}for(var Tn={},Rn=0;Rn<hn.extensions.length;++Rn){var qn=hn.extensions[Rn];if(!An(qn))return hn.onDestroy(),hn.onDone('"'+qn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return hn.optionalExtensions.forEach(An),{extensions:Tn,restore:function(){Object.keys(Tn).forEach(function(Un){if(Tn[Un]&&!An(Un))throw Error("(regl): error restoring extension "+Un)})}}}(vt,je);if(!It)return null;var Ut=function(){var Gt={"":0},hn=[""];return{id:function(An){var Tn=Gt[An];return Tn||(Tn=Gt[An]=hn.length,hn.push(An),Tn)},str:function(An){return hn[An]}}}(),jt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},qt=je.cachedCode||{},Yt=It.extensions,Kt=function(Gt,hn){function An(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function Tn(Mn,Rt,Zt){var rn=Un.pop()||new An;rn.startQueryIndex=Mn,rn.endQueryIndex=Rt,rn.sum=0,rn.stats=Zt,Yn.push(rn)}if(!hn.ext_disjoint_timer_query)return null;var Rn=[],qn=[],Un=[],Yn=[],or=[],Jt=[];return{beginQuery:function(Mn){var Rt=Rn.pop()||hn.ext_disjoint_timer_query.createQueryEXT();hn.ext_disjoint_timer_query.beginQueryEXT(35007,Rt),qn.push(Rt),Tn(qn.length-1,qn.length,Mn)},endQuery:function(){hn.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:Tn,update:function(){var Mn,Rt;if((Mn=qn.length)!==0){Jt.length=Math.max(Jt.length,Mn+1),or.length=Math.max(or.length,Mn+1),or[0]=0;var Zt=Jt[0]=0;for(Rt=Mn=0;Rt<qn.length;++Rt){var rn=qn[Rt];hn.ext_disjoint_timer_query.getQueryObjectEXT(rn,34919)?(Zt+=hn.ext_disjoint_timer_query.getQueryObjectEXT(rn,34918),Rn.push(rn)):qn[Mn++]=rn,or[Rt+1]=Zt,Jt[Rt+1]=Mn}for(qn.length=Mn,Rt=Mn=0;Rt<Yn.length;++Rt){var Ln=(Zt=Yn[Rt]).startQueryIndex;rn=Zt.endQueryIndex,Zt.sum+=or[rn]-or[Ln],Ln=Jt[Ln],(rn=Jt[rn])===Ln?(Zt.stats.gpuTime+=Zt.sum/1e6,Un.push(Zt)):(Zt.startQueryIndex=Ln,Zt.endQueryIndex=rn,Yn[Mn++]=Zt)}Yn.length=Mn}},getNumPendingQueries:function(){return qn.length},clear:function(){Rn.push.apply(Rn,qn);for(var Mn=0;Mn<Rn.length;Mn++)hn.ext_disjoint_timer_query.deleteQueryEXT(Rn[Mn]);qn.length=0,Rn.length=0},restore:function(){qn.length=0,Rn.length=0}}}(0,Yt),pn=se(),nn=vt.drawingBufferWidth,xn=vt.drawingBufferHeight,jn={tick:0,time:0,viewportWidth:nn,viewportHeight:xn,framebufferWidth:nn,framebufferHeight:xn,drawingBufferWidth:nn,drawingBufferHeight:xn,pixelRatio:je.pixelRatio},mn=(nn={elements:null,primitive:4,count:-1,offset:0,instances:-1},ue(vt,Yt)),en=u(vt,jt,je,function(Gt){return on.destroyBuffer(Gt)}),vn=h(vt,Yt,en,jt),on=L(vt,Yt,mn,jt,en,vn,nn),sn=C(vt,Ut,jt,je),En=M(vt,Yt,mn,function(){Fn.procs.poll()},jn,jt,je),kn=pt(vt,Yt,0,jt,je),zn=_(vt,Yt,mn,En,kn,jt),Fn=Y(vt,Ut,Yt,mn,en,vn,0,zn,{},on,sn,nn,jn,Kt,qt,je),Bn=(Ut=O(vt,zn,Fn.procs.poll,jn),Fn.next),er=vt.canvas,Xn=[],mr=[],ur=[],$n=[je.onDestroy],lr=null;er&&(er.addEventListener("webglcontextlost",Ie,!1),er.addEventListener("webglcontextrestored",We,!1));var hr=zn.setFBO=it({framebuffer:re.define.call(null,1,"framebuffer")});return ht(),Mt=Q(it,{clear:function(Gt){if("framebuffer"in Gt)if(Gt.framebuffer&&Gt.framebuffer_reglType==="framebufferCube")for(var hn=0;6>hn;++hn)hr(Q({framebuffer:Gt.framebuffer.faces[hn]},Gt),lt);else hr(Gt,lt);else lt(0,Gt)},prop:re.define.bind(null,1),context:re.define.bind(null,2),this:re.define.bind(null,3),draw:it({}),buffer:function(Gt){return en.create(Gt,34962,!1,!1)},elements:function(Gt){return vn.create(Gt,!1)},texture:En.create2D,cube:En.createCube,renderbuffer:kn.create,framebuffer:zn.create,framebufferCube:zn.createCube,vao:on.createVAO,attributes:Mt,frame:gt,on:function(Gt,hn){var An;switch(Gt){case"frame":return gt(hn);case"lost":An=mr;break;case"restore":An=ur;break;case"destroy":An=$n}return An.push(hn),{cancel:function(){for(var Tn=0;Tn<An.length;++Tn)if(An[Tn]===hn){An[Tn]=An[An.length-1],An.pop();break}}}},limits:mn,hasExtension:function(Gt){return 0<=mn.extensions.indexOf(Gt.toLowerCase())},read:Ut,destroy:function(){Xn.length=0,Se(),er&&(er.removeEventListener("webglcontextlost",Ie),er.removeEventListener("webglcontextrestored",We)),sn.clear(),zn.clear(),kn.clear(),on.clear(),En.clear(),vn.clear(),en.clear(),Kt&&Kt.clear(),$n.forEach(function(Gt){Gt()})},_gl:vt,_refresh:ht,poll:function(){kt(),Kt&&Kt.update()},now:St,stats:jt,getCachedCode:function(){return qt},preloadCachedCode:function(Gt){Object.entries(Gt).forEach(function(hn){qt[hn[0]]=hn[1]})}}),je.onDone(null,Mt),Mt}}()},71665:function(K,z,e){var S=e(12856),k=S.Buffer;function l(b,d){for(var s in b)d[s]=b[s]}function T(b,d,s){return k(b,d,s)}k.from&&k.alloc&&k.allocUnsafe&&k.allocUnsafeSlow?K.exports=S:(l(S,z),z.Buffer=T),T.prototype=Object.create(k.prototype),l(k,T),T.from=function(b,d,s){if(typeof b=="number")throw new TypeError("Argument must not be a number");return k(b,d,s)},T.alloc=function(b,d,s){if(typeof b!="number")throw new TypeError("Argument must be a number");var t=k(b);return d!==void 0?typeof s=="string"?t.fill(d,s):t.fill(d):t.fill(0),t},T.allocUnsafe=function(b){if(typeof b!="number")throw new TypeError("Argument must be a number");return k(b)},T.allocUnsafeSlow=function(b){if(typeof b!="number")throw new TypeError("Argument must be a number");return S.SlowBuffer(b)}},21630:function(K,z,e){K.exports=k;var S=e(15398).EventEmitter;function k(){S.call(this)}e(42018)(k,S),k.Readable=e(40410),k.Writable=e(37493),k.Duplex=e(37865),k.Transform=e(74308),k.PassThrough=e(66897),k.finished=e(12726),k.pipeline=e(10168),k.Stream=k,k.prototype.pipe=function(l,T){var b=this;function d(i){l.writable&&l.write(i)===!1&&b.pause&&b.pause()}function s(){b.readable&&b.resume&&b.resume()}b.on("data",d),l.on("drain",s),l._isStdio||T&&T.end===!1||(b.on("end",o),b.on("close",r));var t=!1;function o(){t||(t=!0,l.end())}function r(){t||(t=!0,typeof l.destroy=="function"&&l.destroy())}function n(i){if(a(),S.listenerCount(this,"error")===0)throw i}function a(){b.removeListener("data",d),l.removeListener("drain",s),b.removeListener("end",o),b.removeListener("close",r),b.removeListener("error",n),l.removeListener("error",n),b.removeListener("end",a),b.removeListener("close",a),l.removeListener("close",a)}return b.on("error",n),l.on("error",n),b.on("end",a),b.on("close",a),l.on("close",a),l.emit("pipe",b),l}},74322:function(K){var z={};function e(k,l,T){T||(T=Error);var b=function(d){var s,t;function o(r,n,a){return d.call(this,function(i,u,h){return typeof l=="string"?l:l(i,u,h)}(r,n,a))||this}return t=d,(s=o).prototype=Object.create(t.prototype),s.prototype.constructor=s,s.__proto__=t,o}(T);b.prototype.name=T.name,b.prototype.code=k,z[k]=b}function S(k,l){if(Array.isArray(k)){var T=k.length;return k=k.map(function(b){return String(b)}),T>2?"one of ".concat(l," ").concat(k.slice(0,T-1).join(", "),", or ")+k[T-1]:T===2?"one of ".concat(l," ").concat(k[0]," or ").concat(k[1]):"of ".concat(l," ").concat(k[0])}return"of ".concat(l," ").concat(String(k))}e("ERR_INVALID_OPT_VALUE",function(k,l){return'The value "'+l+'" is invalid for option "'+k+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(k,l,T){var b,d,s,t,o;if(typeof l=="string"&&(d="not ",l.substr(0,d.length)===d)?(b="must not be",l=l.replace(/^not /,"")):b="must be",function(n,a,i){return(i===void 0||i>n.length)&&(i=n.length),n.substring(i-a.length,i)===a}(k," argument"))s="The ".concat(k," ").concat(b," ").concat(S(l,"type"));else{var r=(typeof o!="number"&&(o=0),o+1>(t=k).length||t.indexOf(".",o)===-1?"argument":"property");s='The "'.concat(k,'" ').concat(r," ").concat(b," ").concat(S(l,"type"))}return s+". Received type ".concat(typeof T)},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(k){return"The "+k+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(k){return"Cannot call "+k+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(k){return"Unknown encoding: "+k},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),K.exports.q=z},37865:function(K,z,e){var S=e(90386),k=Object.keys||function(n){var a=[];for(var i in n)a.push(i);return a};K.exports=t;var l=e(40410),T=e(37493);e(42018)(t,l);for(var b=k(T.prototype),d=0;d<b.length;d++){var s=b[d];t.prototype[s]||(t.prototype[s]=T.prototype[s])}function t(n){if(!(this instanceof t))return new t(n);l.call(this,n),T.call(this,n),this.allowHalfOpen=!0,n&&(n.readable===!1&&(this.readable=!1),n.writable===!1&&(this.writable=!1),n.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",o)))}function o(){this._writableState.ended||S.nextTick(r,this)}function r(n){n.end()}Object.defineProperty(t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(t.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(t.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(t.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(n){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=n,this._writableState.destroyed=n)}})},66897:function(K,z,e){K.exports=k;var S=e(74308);function k(l){if(!(this instanceof k))return new k(l);S.call(this,l)}e(42018)(k,S),k.prototype._transform=function(l,T,b){b(null,l)}},40410:function(K,z,e){var S,k=e(90386);K.exports=w,w.ReadableState=m,e(15398).EventEmitter;var l,T=function(X,Z){return X.listeners(Z).length},b=e(71405),d=e(12856).Buffer,s=e.g.Uint8Array||function(){},t=e(40964);l=t&&t.debuglog?t.debuglog("stream"):function(){};var o,r,n,a=e(31125),i=e(65756),u=e(56306).getHighWaterMark,h=e(74322).q,f=h.ERR_INVALID_ARG_TYPE,x=h.ERR_STREAM_PUSH_AFTER_EOF,v=h.ERR_METHOD_NOT_IMPLEMENTED,g=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e(42018)(w,b);var y=i.errorOrDestroy,p=["error","close","destroy","pause","resume"];function m(X,Z,Y){S=S||e(37865),X=X||{},typeof Y!="boolean"&&(Y=Z instanceof S),this.objectMode=!!X.objectMode,Y&&(this.objectMode=this.objectMode||!!X.readableObjectMode),this.highWaterMark=u(this,X,"readableHighWaterMark",Y),this.buffer=new a,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=X.emitClose!==!1,this.autoDestroy=!!X.autoDestroy,this.destroyed=!1,this.defaultEncoding=X.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,X.encoding&&(o||(o=e(68019).s),this.decoder=new o(X.encoding),this.encoding=X.encoding)}function w(X){if(S=S||e(37865),!(this instanceof w))return new w(X);var Z=this instanceof S;this._readableState=new m(X,this,Z),this.readable=!0,X&&(typeof X.read=="function"&&(this._read=X.read),typeof X.destroy=="function"&&(this._destroy=X.destroy)),b.call(this)}function c(X,Z,Y,W,Q){l("readableAddChunk",Z);var ne,re=X._readableState;if(Z===null)re.reading=!1,function(ie,se){if(l("onEofChunk"),!se.ended){if(se.decoder){var ge=se.decoder.end();ge&&ge.length&&(se.buffer.push(ge),se.length+=se.objectMode?1:ge.length)}se.ended=!0,se.sync?L(ie):(se.needReadable=!1,se.emittedReadable||(se.emittedReadable=!0,C(ie)))}}(X,re);else if(Q||(ne=function(ie,se){var ge,ue;return ue=se,d.isBuffer(ue)||ue instanceof s||typeof se=="string"||se===void 0||ie.objectMode||(ge=new f("chunk",["string","Buffer","Uint8Array"],se)),ge}(re,Z)),ne)y(X,ne);else if(re.objectMode||Z&&Z.length>0)if(typeof Z=="string"||re.objectMode||Object.getPrototypeOf(Z)===d.prototype||(Z=function(ie){return d.from(ie)}(Z)),W)re.endEmitted?y(X,new g):M(X,re,Z,!0);else if(re.ended)y(X,new x);else{if(re.destroyed)return!1;re.reading=!1,re.decoder&&!Y?(Z=re.decoder.write(Z),re.objectMode||Z.length!==0?M(X,re,Z,!1):O(X,re)):M(X,re,Z,!1)}else W||(re.reading=!1,O(X,re));return!re.ended&&(re.length<re.highWaterMark||re.length===0)}function M(X,Z,Y,W){Z.flowing&&Z.length===0&&!Z.sync?(Z.awaitDrain=0,X.emit("data",Y)):(Z.length+=Z.objectMode?1:Y.length,W?Z.buffer.unshift(Y):Z.buffer.push(Y),Z.needReadable&&L(X)),O(X,Z)}Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(X){this._readableState&&(this._readableState.destroyed=X)}}),w.prototype.destroy=i.destroy,w.prototype._undestroy=i.undestroy,w.prototype._destroy=function(X,Z){Z(X)},w.prototype.push=function(X,Z){var Y,W=this._readableState;return W.objectMode?Y=!0:typeof X=="string"&&((Z=Z||W.defaultEncoding)!==W.encoding&&(X=d.from(X,Z),Z=""),Y=!0),c(this,X,Z,!1,Y)},w.prototype.unshift=function(X){return c(this,X,null,!0,!1)},w.prototype.isPaused=function(){return this._readableState.flowing===!1},w.prototype.setEncoding=function(X){o||(o=e(68019).s);var Z=new o(X);this._readableState.decoder=Z,this._readableState.encoding=this._readableState.decoder.encoding;for(var Y=this._readableState.buffer.head,W="";Y!==null;)W+=Z.write(Y.data),Y=Y.next;return this._readableState.buffer.clear(),W!==""&&this._readableState.buffer.push(W),this._readableState.length=W.length,this};var _=1073741824;function E(X,Z){return X<=0||Z.length===0&&Z.ended?0:Z.objectMode?1:X!=X?Z.flowing&&Z.length?Z.buffer.head.data.length:Z.length:(X>Z.highWaterMark&&(Z.highWaterMark=function(Y){return Y>=_?Y=_:(Y--,Y|=Y>>>1,Y|=Y>>>2,Y|=Y>>>4,Y|=Y>>>8,Y|=Y>>>16,Y++),Y}(X)),X<=Z.length?X:Z.ended?Z.length:(Z.needReadable=!0,0))}function L(X){var Z=X._readableState;l("emitReadable",Z.needReadable,Z.emittedReadable),Z.needReadable=!1,Z.emittedReadable||(l("emitReadable",Z.flowing),Z.emittedReadable=!0,k.nextTick(C,X))}function C(X){var Z=X._readableState;l("emitReadable_",Z.destroyed,Z.length,Z.ended),Z.destroyed||!Z.length&&!Z.ended||(X.emit("readable"),Z.emittedReadable=!1),Z.needReadable=!Z.flowing&&!Z.ended&&Z.length<=Z.highWaterMark,F(X)}function O(X,Z){Z.readingMore||(Z.readingMore=!0,k.nextTick(I,X,Z))}function I(X,Z){for(;!Z.reading&&!Z.ended&&(Z.length<Z.highWaterMark||Z.flowing&&Z.length===0);){var Y=Z.length;if(l("maybeReadMore read 0"),X.read(0),Y===Z.length)break}Z.readingMore=!1}function N(X){var Z=X._readableState;Z.readableListening=X.listenerCount("readable")>0,Z.resumeScheduled&&!Z.paused?Z.flowing=!0:X.listenerCount("data")>0&&X.resume()}function R(X){l("readable nexttick read 0"),X.read(0)}function V(X,Z){l("resume",Z.reading),Z.reading||X.read(0),Z.resumeScheduled=!1,X.emit("resume"),F(X),Z.flowing&&!Z.reading&&X.read(0)}function F(X){var Z=X._readableState;for(l("flow",Z.flowing);Z.flowing&&X.read()!==null;);}function D(X,Z){return Z.length===0?null:(Z.objectMode?Y=Z.buffer.shift():!X||X>=Z.length?(Y=Z.decoder?Z.buffer.join(""):Z.buffer.length===1?Z.buffer.first():Z.buffer.concat(Z.length),Z.buffer.clear()):Y=Z.buffer.consume(X,Z.decoder),Y);var Y}function U(X){var Z=X._readableState;l("endReadable",Z.endEmitted),Z.endEmitted||(Z.ended=!0,k.nextTick(j,Z,X))}function j(X,Z){if(l("endReadableNT",X.endEmitted,X.length),!X.endEmitted&&X.length===0&&(X.endEmitted=!0,Z.readable=!1,Z.emit("end"),X.autoDestroy)){var Y=Z._writableState;(!Y||Y.autoDestroy&&Y.finished)&&Z.destroy()}}function J(X,Z){for(var Y=0,W=X.length;Y<W;Y++)if(X[Y]===Z)return Y;return-1}w.prototype.read=function(X){l("read",X),X=parseInt(X,10);var Z=this._readableState,Y=X;if(X!==0&&(Z.emittedReadable=!1),X===0&&Z.needReadable&&((Z.highWaterMark!==0?Z.length>=Z.highWaterMark:Z.length>0)||Z.ended))return l("read: emitReadable",Z.length,Z.ended),Z.length===0&&Z.ended?U(this):L(this),null;if((X=E(X,Z))===0&&Z.ended)return Z.length===0&&U(this),null;var W,Q=Z.needReadable;return l("need readable",Q),(Z.length===0||Z.length-X<Z.highWaterMark)&&l("length less than watermark",Q=!0),Z.ended||Z.reading?l("reading or ended",Q=!1):Q&&(l("do read"),Z.reading=!0,Z.sync=!0,Z.length===0&&(Z.needReadable=!0),this._read(Z.highWaterMark),Z.sync=!1,Z.reading||(X=E(Y,Z))),(W=X>0?D(X,Z):null)===null?(Z.needReadable=Z.length<=Z.highWaterMark,X=0):(Z.length-=X,Z.awaitDrain=0),Z.length===0&&(Z.ended||(Z.needReadable=!0),Y!==X&&Z.ended&&U(this)),W!==null&&this.emit("data",W),W},w.prototype._read=function(X){y(this,new v("_read()"))},w.prototype.pipe=function(X,Z){var Y=this,W=this._readableState;switch(W.pipesCount){case 0:W.pipes=X;break;case 1:W.pipes=[W.pipes,X];break;default:W.pipes.push(X)}W.pipesCount+=1,l("pipe count=%d opts=%j",W.pipesCount,Z);var Q=Z&&Z.end===!1||X===k.stdout||X===k.stderr?le:ne;function ne(){l("onend"),X.end()}W.endEmitted?k.nextTick(Q):Y.once("end",Q),X.on("unpipe",function de(Ce,xe){l("onunpipe"),Ce===Y&&xe&&xe.hasUnpiped===!1&&(xe.hasUnpiped=!0,l("cleanup"),X.removeListener("close",ue),X.removeListener("finish",ce),X.removeListener("drain",re),X.removeListener("error",ge),X.removeListener("unpipe",de),Y.removeListener("end",ne),Y.removeListener("end",le),Y.removeListener("data",se),ie=!0,!W.awaitDrain||X._writableState&&!X._writableState.needDrain||re())});var re=function(de){return function(){var Ce=de._readableState;l("pipeOnDrain",Ce.awaitDrain),Ce.awaitDrain&&Ce.awaitDrain--,Ce.awaitDrain===0&&T(de,"data")&&(Ce.flowing=!0,F(de))}}(Y);X.on("drain",re);var ie=!1;function se(de){l("ondata");var Ce=X.write(de);l("dest.write",Ce),Ce===!1&&((W.pipesCount===1&&W.pipes===X||W.pipesCount>1&&J(W.pipes,X)!==-1)&&!ie&&(l("false write response, pause",W.awaitDrain),W.awaitDrain++),Y.pause())}function ge(de){l("onerror",de),le(),X.removeListener("error",ge),T(X,"error")===0&&y(X,de)}function ue(){X.removeListener("finish",ce),le()}function ce(){l("onfinish"),X.removeListener("close",ue),le()}function le(){l("unpipe"),Y.unpipe(X)}return Y.on("data",se),function(de,Ce,xe){if(typeof de.prependListener=="function")return de.prependListener(Ce,xe);de._events&&de._events.error?Array.isArray(de._events.error)?de._events.error.unshift(xe):de._events.error=[xe,de._events.error]:de.on(Ce,xe)}(X,"error",ge),X.once("close",ue),X.once("finish",ce),X.emit("pipe",Y),W.flowing||(l("pipe resume"),Y.resume()),X},w.prototype.unpipe=function(X){var Z=this._readableState,Y={hasUnpiped:!1};if(Z.pipesCount===0)return this;if(Z.pipesCount===1)return X&&X!==Z.pipes||(X||(X=Z.pipes),Z.pipes=null,Z.pipesCount=0,Z.flowing=!1,X&&X.emit("unpipe",this,Y)),this;if(!X){var W=Z.pipes,Q=Z.pipesCount;Z.pipes=null,Z.pipesCount=0,Z.flowing=!1;for(var ne=0;ne<Q;ne++)W[ne].emit("unpipe",this,{hasUnpiped:!1});return this}var re=J(Z.pipes,X);return re===-1||(Z.pipes.splice(re,1),Z.pipesCount-=1,Z.pipesCount===1&&(Z.pipes=Z.pipes[0]),X.emit("unpipe",this,Y)),this},w.prototype.on=function(X,Z){var Y=b.prototype.on.call(this,X,Z),W=this._readableState;return X==="data"?(W.readableListening=this.listenerCount("readable")>0,W.flowing!==!1&&this.resume()):X==="readable"&&(W.endEmitted||W.readableListening||(W.readableListening=W.needReadable=!0,W.flowing=!1,W.emittedReadable=!1,l("on readable",W.length,W.reading),W.length?L(this):W.reading||k.nextTick(R,this))),Y},w.prototype.addListener=w.prototype.on,w.prototype.removeListener=function(X,Z){var Y=b.prototype.removeListener.call(this,X,Z);return X==="readable"&&k.nextTick(N,this),Y},w.prototype.removeAllListeners=function(X){var Z=b.prototype.removeAllListeners.apply(this,arguments);return X!=="readable"&&X!==void 0||k.nextTick(N,this),Z},w.prototype.resume=function(){var X=this._readableState;return X.flowing||(l("resume"),X.flowing=!X.readableListening,function(Z,Y){Y.resumeScheduled||(Y.resumeScheduled=!0,k.nextTick(V,Z,Y))}(this,X)),X.paused=!1,this},w.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},w.prototype.wrap=function(X){var Z=this,Y=this._readableState,W=!1;for(var Q in X.on("end",function(){if(l("wrapped end"),Y.decoder&&!Y.ended){var re=Y.decoder.end();re&&re.length&&Z.push(re)}Z.push(null)}),X.on("data",function(re){l("wrapped data"),Y.decoder&&(re=Y.decoder.write(re)),Y.objectMode&&re==null||(Y.objectMode||re&&re.length)&&(Z.push(re)||(W=!0,X.pause()))}),X)this[Q]===void 0&&typeof X[Q]=="function"&&(this[Q]=function(re){return function(){return X[re].apply(X,arguments)}}(Q));for(var ne=0;ne<p.length;ne++)X.on(p[ne],this.emit.bind(this,p[ne]));return this._read=function(re){l("wrapped _read",re),W&&(W=!1,X.resume())},this},typeof Symbol=="function"&&(w.prototype[Symbol.asyncIterator]=function(){return r===void 0&&(r=e(68221)),r(this)}),Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(w.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(w.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(X){this._readableState&&(this._readableState.flowing=X)}}),w._fromList=D,Object.defineProperty(w.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(w.from=function(X,Z){return n===void 0&&(n=e(31748)),n(w,X,Z)})},74308:function(K,z,e){K.exports=t;var S=e(74322).q,k=S.ERR_METHOD_NOT_IMPLEMENTED,l=S.ERR_MULTIPLE_CALLBACK,T=S.ERR_TRANSFORM_ALREADY_TRANSFORMING,b=S.ERR_TRANSFORM_WITH_LENGTH_0,d=e(37865);function s(n,a){var i=this._transformState;i.transforming=!1;var u=i.writecb;if(u===null)return this.emit("error",new l);i.writechunk=null,i.writecb=null,a!=null&&this.push(a),u(n);var h=this._readableState;h.reading=!1,(h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}function t(n){if(!(this instanceof t))return new t(n);d.call(this,n),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,n&&(typeof n.transform=="function"&&(this._transform=n.transform),typeof n.flush=="function"&&(this._flush=n.flush)),this.on("prefinish",o)}function o(){var n=this;typeof this._flush!="function"||this._readableState.destroyed?r(this,null,null):this._flush(function(a,i){r(n,a,i)})}function r(n,a,i){if(a)return n.emit("error",a);if(i!=null&&n.push(i),n._writableState.length)throw new b;if(n._transformState.transforming)throw new T;return n.push(null)}e(42018)(t,d),t.prototype.push=function(n,a){return this._transformState.needTransform=!1,d.prototype.push.call(this,n,a)},t.prototype._transform=function(n,a,i){i(new k("_transform()"))},t.prototype._write=function(n,a,i){var u=this._transformState;if(u.writecb=i,u.writechunk=n,u.writeencoding=a,!u.transforming){var h=this._readableState;(u.needTransform||h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}},t.prototype._read=function(n){var a=this._transformState;a.writechunk===null||a.transforming?a.needTransform=!0:(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform))},t.prototype._destroy=function(n,a){d.prototype._destroy.call(this,n,function(i){a(i)})}},37493:function(K,z,e){var S,k=e(90386);function l(O){var I=this;this.next=null,this.entry=null,this.finish=function(){(function(N,R,V){var F=N.entry;for(N.entry=null;F;){var D=F.callback;R.pendingcb--,D(void 0),F=F.next}R.corkedRequestsFree.next=N})(I,O)}}K.exports=w,w.WritableState=m;var T,b={deprecate:e(20588)},d=e(71405),s=e(12856).Buffer,t=e.g.Uint8Array||function(){},o=e(65756),r=e(56306).getHighWaterMark,n=e(74322).q,a=n.ERR_INVALID_ARG_TYPE,i=n.ERR_METHOD_NOT_IMPLEMENTED,u=n.ERR_MULTIPLE_CALLBACK,h=n.ERR_STREAM_CANNOT_PIPE,f=n.ERR_STREAM_DESTROYED,x=n.ERR_STREAM_NULL_VALUES,v=n.ERR_STREAM_WRITE_AFTER_END,g=n.ERR_UNKNOWN_ENCODING,y=o.errorOrDestroy;function p(){}function m(O,I,N){S=S||e(37865),O=O||{},typeof N!="boolean"&&(N=I instanceof S),this.objectMode=!!O.objectMode,N&&(this.objectMode=this.objectMode||!!O.writableObjectMode),this.highWaterMark=r(this,O,"writableHighWaterMark",N),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var R=O.decodeStrings===!1;this.decodeStrings=!R,this.defaultEncoding=O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(V){(function(F,D){var U=F._writableState,j=U.sync,J=U.writecb;if(typeof J!="function")throw new u;if(function(Z){Z.writing=!1,Z.writecb=null,Z.length-=Z.writelen,Z.writelen=0}(U),D)(function(Z,Y,W,Q,ne){--Y.pendingcb,W?(k.nextTick(ne,Q),k.nextTick(C,Z,Y),Z._writableState.errorEmitted=!0,y(Z,Q)):(ne(Q),Z._writableState.errorEmitted=!0,y(Z,Q),C(Z,Y))})(F,U,j,D,J);else{var X=E(U)||F.destroyed;X||U.corked||U.bufferProcessing||!U.bufferedRequest||_(F,U),j?k.nextTick(M,F,U,X,J):M(F,U,X,J)}})(I,V)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=O.emitClose!==!1,this.autoDestroy=!!O.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new l(this)}function w(O){var I=this instanceof(S=S||e(37865));if(!I&&!T.call(w,this))return new w(O);this._writableState=new m(O,this,I),this.writable=!0,O&&(typeof O.write=="function"&&(this._write=O.write),typeof O.writev=="function"&&(this._writev=O.writev),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.final=="function"&&(this._final=O.final)),d.call(this)}function c(O,I,N,R,V,F,D){I.writelen=R,I.writecb=D,I.writing=!0,I.sync=!0,I.destroyed?I.onwrite(new f("write")):N?O._writev(V,I.onwrite):O._write(V,F,I.onwrite),I.sync=!1}function M(O,I,N,R){N||function(V,F){F.length===0&&F.needDrain&&(F.needDrain=!1,V.emit("drain"))}(O,I),I.pendingcb--,R(),C(O,I)}function _(O,I){I.bufferProcessing=!0;var N=I.bufferedRequest;if(O._writev&&N&&N.next){var R=I.bufferedRequestCount,V=new Array(R),F=I.corkedRequestsFree;F.entry=N;for(var D=0,U=!0;N;)V[D]=N,N.isBuf||(U=!1),N=N.next,D+=1;V.allBuffers=U,c(O,I,!0,I.length,V,"",F.finish),I.pendingcb++,I.lastBufferedRequest=null,F.next?(I.corkedRequestsFree=F.next,F.next=null):I.corkedRequestsFree=new l(I),I.bufferedRequestCount=0}else{for(;N;){var j=N.chunk,J=N.encoding,X=N.callback;if(c(O,I,!1,I.objectMode?1:j.length,j,J,X),N=N.next,I.bufferedRequestCount--,I.writing)break}N===null&&(I.lastBufferedRequest=null)}I.bufferedRequest=N,I.bufferProcessing=!1}function E(O){return O.ending&&O.length===0&&O.bufferedRequest===null&&!O.finished&&!O.writing}function L(O,I){O._final(function(N){I.pendingcb--,N&&y(O,N),I.prefinished=!0,O.emit("prefinish"),C(O,I)})}function C(O,I){var N=E(I);if(N&&(function(V,F){F.prefinished||F.finalCalled||(typeof V._final!="function"||F.destroyed?(F.prefinished=!0,V.emit("prefinish")):(F.pendingcb++,F.finalCalled=!0,k.nextTick(L,V,F)))}(O,I),I.pendingcb===0&&(I.finished=!0,O.emit("finish"),I.autoDestroy))){var R=O._readableState;(!R||R.autoDestroy&&R.endEmitted)&&O.destroy()}return N}e(42018)(w,d),m.prototype.getBuffer=function(){for(var O=this.bufferedRequest,I=[];O;)I.push(O),O=O.next;return I},function(){try{Object.defineProperty(m.prototype,"buffer",{get:b.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(T=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(O){return!!T.call(this,O)||this===w&&O&&O._writableState instanceof m}})):T=function(O){return O instanceof this},w.prototype.pipe=function(){y(this,new h)},w.prototype.write=function(O,I,N){var R,V=this._writableState,F=!1,D=!V.objectMode&&(R=O,s.isBuffer(R)||R instanceof t);return D&&!s.isBuffer(O)&&(O=function(U){return s.from(U)}(O)),typeof I=="function"&&(N=I,I=null),D?I="buffer":I||(I=V.defaultEncoding),typeof N!="function"&&(N=p),V.ending?function(U,j){var J=new v;y(U,J),k.nextTick(j,J)}(this,N):(D||function(U,j,J,X){var Z;return J===null?Z=new x:typeof J=="string"||j.objectMode||(Z=new a("chunk",["string","Buffer"],J)),!Z||(y(U,Z),k.nextTick(X,Z),!1)}(this,V,O,N))&&(V.pendingcb++,F=function(U,j,J,X,Z,Y){if(!J){var W=function(ie,se,ge){return ie.objectMode||ie.decodeStrings===!1||typeof se!="string"||(se=s.from(se,ge)),se}(j,X,Z);X!==W&&(J=!0,Z="buffer",X=W)}var Q=j.objectMode?1:X.length;j.length+=Q;var ne=j.length<j.highWaterMark;if(ne||(j.needDrain=!0),j.writing||j.corked){var re=j.lastBufferedRequest;j.lastBufferedRequest={chunk:X,encoding:Z,isBuf:J,callback:Y,next:null},re?re.next=j.lastBufferedRequest:j.bufferedRequest=j.lastBufferedRequest,j.bufferedRequestCount+=1}else c(U,j,!1,Q,X,Z,Y);return ne}(this,V,D,O,I,N)),F},w.prototype.cork=function(){this._writableState.corked++},w.prototype.uncork=function(){var O=this._writableState;O.corked&&(O.corked--,O.writing||O.corked||O.bufferProcessing||!O.bufferedRequest||_(this,O))},w.prototype.setDefaultEncoding=function(O){if(typeof O=="string"&&(O=O.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((O+"").toLowerCase())>-1))throw new g(O);return this._writableState.defaultEncoding=O,this},Object.defineProperty(w.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),w.prototype._write=function(O,I,N){N(new i("_write()"))},w.prototype._writev=null,w.prototype.end=function(O,I,N){var R=this._writableState;return typeof O=="function"?(N=O,O=null,I=null):typeof I=="function"&&(N=I,I=null),O!=null&&this.write(O,I),R.corked&&(R.corked=1,this.uncork()),R.ending||function(V,F,D){F.ending=!0,C(V,F),D&&(F.finished?k.nextTick(D):V.once("finish",D)),F.ended=!0,V.writable=!1}(this,R,N),this},Object.defineProperty(w.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(O){this._writableState&&(this._writableState.destroyed=O)}}),w.prototype.destroy=o.destroy,w.prototype._undestroy=o.undestroy,w.prototype._destroy=function(O,I){I(O)}},68221:function(K,z,e){var S,k=e(90386);function l(x,v,g){return v in x?Object.defineProperty(x,v,{value:g,enumerable:!0,configurable:!0,writable:!0}):x[v]=g,x}var T=e(12726),b=Symbol("lastResolve"),d=Symbol("lastReject"),s=Symbol("error"),t=Symbol("ended"),o=Symbol("lastPromise"),r=Symbol("handlePromise"),n=Symbol("stream");function a(x,v){return{value:x,done:v}}function i(x){var v=x[b];if(v!==null){var g=x[n].read();g!==null&&(x[o]=null,x[b]=null,x[d]=null,v(a(g,!1)))}}function u(x){k.nextTick(i,x)}var h=Object.getPrototypeOf(function(){}),f=Object.setPrototypeOf((l(S={get stream(){return this[n]},next:function(){var x=this,v=this[s];if(v!==null)return Promise.reject(v);if(this[t])return Promise.resolve(a(void 0,!0));if(this[n].destroyed)return new Promise(function(m,w){k.nextTick(function(){x[s]?w(x[s]):m(a(void 0,!0))})});var g,y=this[o];if(y)g=new Promise(function(m,w){return function(c,M){m.then(function(){w[t]?c(a(void 0,!0)):w[r](c,M)},M)}}(y,this));else{var p=this[n].read();if(p!==null)return Promise.resolve(a(p,!1));g=new Promise(this[r])}return this[o]=g,g}},Symbol.asyncIterator,function(){return this}),l(S,"return",function(){var x=this;return new Promise(function(v,g){x[n].destroy(null,function(y){y?g(y):v(a(void 0,!0))})})}),S),h);K.exports=function(x){var v,g=Object.create(f,(l(v={},n,{value:x,writable:!0}),l(v,b,{value:null,writable:!0}),l(v,d,{value:null,writable:!0}),l(v,s,{value:null,writable:!0}),l(v,t,{value:x._readableState.endEmitted,writable:!0}),l(v,r,{value:function(y,p){var m=g[n].read();m?(g[o]=null,g[b]=null,g[d]=null,y(a(m,!1))):(g[b]=y,g[d]=p)},writable:!0}),v));return g[o]=null,T(x,function(y){if(y&&y.code!=="ERR_STREAM_PREMATURE_CLOSE"){var p=g[d];return p!==null&&(g[o]=null,g[b]=null,g[d]=null,p(y)),void(g[s]=y)}var m=g[b];m!==null&&(g[o]=null,g[b]=null,g[d]=null,m(a(void 0,!0))),g[t]=!0}),x.on("readable",u.bind(null,g)),g}},31125:function(K,z,e){function S(s,t){var o=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),o.push.apply(o,r)}return o}function k(s,t,o){return t in s?Object.defineProperty(s,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[t]=o,s}function l(s,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,r.key,r)}}var T=e(12856).Buffer,b=e(69862).inspect,d=b&&b.custom||"inspect";K.exports=function(){function s(){(function(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")})(this,s),this.head=null,this.tail=null,this.length=0}var t,o;return t=s,o=[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,a=""+n.data;n=n.next;)a+=r+n.data;return a}},{key:"concat",value:function(r){if(this.length===0)return T.alloc(0);for(var n,a,i,u=T.allocUnsafe(r>>>0),h=this.head,f=0;h;)n=h.data,a=u,i=f,T.prototype.copy.call(n,a,i),f+=h.data.length,h=h.next;return u}},{key:"consume",value:function(r,n){var a;return r<this.head.data.length?(a=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):a=r===this.head.data.length?this.shift():n?this._getString(r):this._getBuffer(r),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,a=1,i=n.data;for(r-=i.length;n=n.next;){var u=n.data,h=r>u.length?u.length:r;if(h===u.length?i+=u:i+=u.slice(0,r),(r-=h)==0){h===u.length?(++a,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=u.slice(h));break}++a}return this.length-=a,i}},{key:"_getBuffer",value:function(r){var n=T.allocUnsafe(r),a=this.head,i=1;for(a.data.copy(n),r-=a.data.length;a=a.next;){var u=a.data,h=r>u.length?u.length:r;if(u.copy(n,n.length-r,0,h),(r-=h)==0){h===u.length?(++i,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=u.slice(h));break}++i}return this.length-=i,n}},{key:d,value:function(r,n){return b(this,function(a){for(var i=1;i<arguments.length;i++){var u=arguments[i]!=null?arguments[i]:{};i%2?S(Object(u),!0).forEach(function(h){k(a,h,u[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(u)):S(Object(u)).forEach(function(h){Object.defineProperty(a,h,Object.getOwnPropertyDescriptor(u,h))})}return a}({},n,{depth:0,customInspect:!1}))}}],o&&l(t.prototype,o),s}()},65756:function(K,z,e){var S=e(90386);function k(b,d){T(b,d),l(b)}function l(b){b._writableState&&!b._writableState.emitClose||b._readableState&&!b._readableState.emitClose||b.emit("close")}function T(b,d){b.emit("error",d)}K.exports={destroy:function(b,d){var s=this,t=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return t||o?(d?d(b):b&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,S.nextTick(T,this,b)):S.nextTick(T,this,b)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(b||null,function(r){!d&&r?s._writableState?s._writableState.errorEmitted?S.nextTick(l,s):(s._writableState.errorEmitted=!0,S.nextTick(k,s,r)):S.nextTick(k,s,r):d?(S.nextTick(l,s),d(r)):S.nextTick(l,s)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(b,d){var s=b._readableState,t=b._writableState;s&&s.autoDestroy||t&&t.autoDestroy?b.destroy(d):b.emit("error",d)}}},12726:function(K,z,e){var S=e(74322).q.ERR_STREAM_PREMATURE_CLOSE;function k(){}K.exports=function l(T,b,d){if(typeof b=="function")return l(T,null,b);b||(b={}),d=function(x){var v=!1;return function(){if(!v){v=!0;for(var g=arguments.length,y=new Array(g),p=0;p<g;p++)y[p]=arguments[p];x.apply(this,y)}}}(d||k);var s=b.readable||b.readable!==!1&&T.readable,t=b.writable||b.writable!==!1&&T.writable,o=function(){T.writable||n()},r=T._writableState&&T._writableState.finished,n=function(){t=!1,r=!0,s||d.call(T)},a=T._readableState&&T._readableState.endEmitted,i=function(){s=!1,a=!0,t||d.call(T)},u=function(x){d.call(T,x)},h=function(){var x;return s&&!a?(T._readableState&&T._readableState.ended||(x=new S),d.call(T,x)):t&&!r?(T._writableState&&T._writableState.ended||(x=new S),d.call(T,x)):void 0},f=function(){T.req.on("finish",n)};return function(x){return x.setHeader&&typeof x.abort=="function"}(T)?(T.on("complete",n),T.on("abort",h),T.req?f():T.on("request",f)):t&&!T._writableState&&(T.on("end",o),T.on("close",o)),T.on("end",i),T.on("finish",n),b.error!==!1&&T.on("error",u),T.on("close",h),function(){T.removeListener("complete",n),T.removeListener("abort",h),T.removeListener("request",f),T.req&&T.req.removeListener("finish",n),T.removeListener("end",o),T.removeListener("close",o),T.removeListener("finish",n),T.removeListener("end",i),T.removeListener("error",u),T.removeListener("close",h)}}},31748:function(K){K.exports=function(){throw new Error("Readable.from is not available in the browser")}},10168:function(K,z,e){var S,k=e(74322).q,l=k.ERR_MISSING_ARGS,T=k.ERR_STREAM_DESTROYED;function b(r){if(r)throw r}function d(r,n,a,i){i=function(f){var x=!1;return function(){x||(x=!0,f.apply(void 0,arguments))}}(i);var u=!1;r.on("close",function(){u=!0}),S===void 0&&(S=e(12726)),S(r,{readable:n,writable:a},function(f){if(f)return i(f);u=!0,i()});var h=!1;return function(f){if(!u&&!h)return h=!0,function(x){return x.setHeader&&typeof x.abort=="function"}(r)?r.abort():typeof r.destroy=="function"?r.destroy():void i(f||new T("pipe"))}}function s(r){r()}function t(r,n){return r.pipe(n)}function o(r){return r.length?typeof r[r.length-1]!="function"?b:r.pop():b}K.exports=function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i,u=o(n);if(Array.isArray(n[0])&&(n=n[0]),n.length<2)throw new l("streams");var h=n.map(function(f,x){var v=x<n.length-1;return d(f,v,x>0,function(g){i||(i=g),g&&h.forEach(s),v||(h.forEach(s),u(i))})});return n.reduce(t)}},56306:function(K,z,e){var S=e(74322).q.ERR_INVALID_OPT_VALUE;K.exports={getHighWaterMark:function(k,l,T,b){var d=function(s,t,o){return s.highWaterMark!=null?s.highWaterMark:t?s[o]:null}(l,b,T);if(d!=null){if(!isFinite(d)||Math.floor(d)!==d||d<0)throw new S(b?T:"highWaterMark",d);return Math.floor(d)}return k.objectMode?16:16384}}},71405:function(K,z,e){K.exports=e(15398).EventEmitter},68019:function(K,z,e){var S=e(71665).Buffer,k=S.isEncoding||function(a){switch((a=""+a)&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function l(a){var i;switch(this.encoding=function(u){var h=function(f){if(!f)return"utf8";for(var x;;)switch(f){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return f;default:if(x)return;f=(""+f).toLowerCase(),x=!0}}(u);if(typeof h!="string"&&(S.isEncoding===k||!k(u)))throw new Error("Unknown encoding: "+u);return h||u}(a),this.encoding){case"utf16le":this.text=d,this.end=s,i=4;break;case"utf8":this.fillLast=b,i=4;break;case"base64":this.text=t,this.end=o,i=3;break;default:return this.write=r,void(this.end=n)}this.lastNeed=0,this.lastTotal=0,this.lastChar=S.allocUnsafe(i)}function T(a){return a<=127?0:a>>5==6?2:a>>4==14?3:a>>3==30?4:a>>6==2?-1:-2}function b(a){var i=this.lastTotal-this.lastNeed,u=function(h,f,x){if((192&f[0])!=128)return h.lastNeed=0,"�";if(h.lastNeed>1&&f.length>1){if((192&f[1])!=128)return h.lastNeed=1,"�";if(h.lastNeed>2&&f.length>2&&(192&f[2])!=128)return h.lastNeed=2,"�"}}(this,a);return u!==void 0?u:this.lastNeed<=a.length?(a.copy(this.lastChar,i,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(a.copy(this.lastChar,i,0,a.length),void(this.lastNeed-=a.length))}function d(a,i){if((a.length-i)%2==0){var u=a.toString("utf16le",i);if(u){var h=u.charCodeAt(u.length-1);if(h>=55296&&h<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=a[a.length-1],a.toString("utf16le",i,a.length-1)}function s(a){var i=a&&a.length?this.write(a):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return i+this.lastChar.toString("utf16le",0,u)}return i}function t(a,i){var u=(a.length-i)%3;return u===0?a.toString("base64",i):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]),a.toString("base64",i,a.length-u))}function o(a){var i=a&&a.length?this.write(a):"";return this.lastNeed?i+this.lastChar.toString("base64",0,3-this.lastNeed):i}function r(a){return a.toString(this.encoding)}function n(a){return a&&a.length?this.write(a):""}z.s=l,l.prototype.write=function(a){if(a.length===0)return"";var i,u;if(this.lastNeed){if((i=this.fillLast(a))===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<a.length?i?i+this.text(a,u):this.text(a,u):i||""},l.prototype.end=function(a){var i=a&&a.length?this.write(a):"";return this.lastNeed?i+"�":i},l.prototype.text=function(a,i){var u=function(f,x,v){var g=x.length-1;if(g<v)return 0;var y=T(x[g]);return y>=0?(y>0&&(f.lastNeed=y-1),y):--g<v||y===-2?0:(y=T(x[g]))>=0?(y>0&&(f.lastNeed=y-2),y):--g<v||y===-2?0:(y=T(x[g]))>=0?(y>0&&(y===2?y=0:f.lastNeed=y-3),y):0}(this,a,i);if(!this.lastNeed)return a.toString("utf8",i);this.lastTotal=u;var h=a.length-(u-this.lastNeed);return a.copy(this.lastChar,0,h),a.toString("utf8",i,h)},l.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length),this.lastNeed-=a.length}},90715:function(K,z,e){var S=e(32791),k=e(41633)("stream-parser");function l(a){k("initializing parser stream"),a._parserBytesLeft=0,a._parserBuffers=[],a._parserBuffered=0,a._parserState=-1,a._parserCallback=null,typeof a.push=="function"&&(a._parserOutput=a.push.bind(a)),a._parserInit=!0}function T(a,i){S(!this._parserCallback,'there is already a "callback" set!'),S(isFinite(a)&&a>0,'can only buffer a finite number of bytes > 0, got "'+a+'"'),this._parserInit||l(this),k("buffering %o bytes",a),this._parserBytesLeft=a,this._parserCallback=i,this._parserState=0}function b(a,i){S(!this._parserCallback,'there is already a "callback" set!'),S(a>0,'can only skip > 0 bytes, got "'+a+'"'),this._parserInit||l(this),k("skipping %o bytes",a),this._parserBytesLeft=a,this._parserCallback=i,this._parserState=1}function d(a,i){S(!this._parserCallback,'There is already a "callback" set!'),S(a>0,'can only pass through > 0 bytes, got "'+a+'"'),this._parserInit||l(this),k("passing through %o bytes",a),this._parserBytesLeft=a,this._parserCallback=i,this._parserState=2}function s(a,i,u){this._parserInit||l(this),k("write(%o bytes)",a.length),typeof i=="function"&&(u=i),r(this,a,null,u)}function t(a,i,u){this._parserInit||l(this),k("transform(%o bytes)",a.length),typeof i!="function"&&(i=this._parserOutput),r(this,a,i,u)}function o(a,i,u,h){if(a._parserBytesLeft-=i.length,k("%o bytes left for stream piece",a._parserBytesLeft),a._parserState===0?(a._parserBuffers.push(i),a._parserBuffered+=i.length):a._parserState===2&&u(i),a._parserBytesLeft!==0)return h;var f=a._parserCallback;if(f&&a._parserState===0&&a._parserBuffers.length>1&&(i=Buffer.concat(a._parserBuffers,a._parserBuffered)),a._parserState!==0&&(i=null),a._parserCallback=null,a._parserBuffered=0,a._parserState=-1,a._parserBuffers.splice(0),f){var x=[];i&&x.push(i),u&&x.push(u);var v=f.length>x.length;v&&x.push(n(h));var g=f.apply(a,x);if(!v||h===g)return h}}K.exports=function(a){var i=a&&typeof a._transform=="function",u=a&&typeof a._write=="function";if(!i&&!u)throw new Error("must pass a Writable or Transform stream in");k("extending Parser into stream"),a._bytes=T,a._skipBytes=b,i&&(a._passthrough=d),i?a._transform=t:a._write=s};var r=n(function a(i,u,h,f){return i._parserBytesLeft<=0?f(new Error("got data but not currently parsing anything")):u.length<=i._parserBytesLeft?function(){return o(i,u,h,f)}:function(){var x=u.slice(0,i._parserBytesLeft);return o(i,x,h,function(v){return v?f(v):u.length>x.length?function(){return a(i,u.slice(x.length),h,f)}:void 0})}});function n(a){return function(){for(var i=a.apply(this,arguments);typeof i=="function";)i=i();return i}}},41633:function(K,z,e){var S=e(90386);function k(){var l;try{l=z.storage.debug}catch{}return!l&&S!==void 0&&"env"in S&&(l=S.env.DEBUG),l}(z=K.exports=e(74469)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},z.formatArgs=function(l){var T=this.useColors;if(l[0]=(T?"%c":"")+this.namespace+(T?" %c":" ")+l[0]+(T?"%c ":" ")+"+"+z.humanize(this.diff),T){var b="color: "+this.color;l.splice(1,0,b,"color: inherit");var d=0,s=0;l[0].replace(/%[a-zA-Z%]/g,function(t){t!=="%%"&&(d++,t==="%c"&&(s=d))}),l.splice(s,0,b)}},z.save=function(l){try{l==null?z.storage.removeItem("debug"):z.storage.debug=l}catch{}},z.load=k,z.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},z.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),z.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],z.formatters.j=function(l){try{return JSON.stringify(l)}catch(T){return"[UnexpectedJSONParseError]: "+T.message}},z.enable(k())},74469:function(K,z,e){var S;function k(l){function T(){if(T.enabled){var b=T,d=+new Date,s=d-(S||d);b.diff=s,b.prev=S,b.curr=d,S=d;for(var t=new Array(arguments.length),o=0;o<t.length;o++)t[o]=arguments[o];t[0]=z.coerce(t[0]),typeof t[0]!="string"&&t.unshift("%O");var r=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(a,i){if(a==="%%")return a;r++;var u=z.formatters[i];if(typeof u=="function"){var h=t[r];a=u.call(b,h),t.splice(r,1),r--}return a}),z.formatArgs.call(b,t);var n=T.log||z.log||console.log.bind(console);n.apply(b,t)}}return T.namespace=l,T.enabled=z.enabled(l),T.useColors=z.useColors(),T.color=function(b){var d,s=0;for(d in b)s=(s<<5)-s+b.charCodeAt(d),s|=0;return z.colors[Math.abs(s)%z.colors.length]}(l),typeof z.init=="function"&&z.init(T),T}(z=K.exports=k.debug=k.default=k).coerce=function(l){return l instanceof Error?l.stack||l.message:l},z.disable=function(){z.enable("")},z.enable=function(l){z.save(l),z.names=[],z.skips=[];for(var T=(typeof l=="string"?l:"").split(/[\s,]+/),b=T.length,d=0;d<b;d++)T[d]&&((l=T[d].replace(/\*/g,".*?"))[0]==="-"?z.skips.push(new RegExp("^"+l.substr(1)+"$")):z.names.push(new RegExp("^"+l+"$")))},z.enabled=function(l){var T,b;for(T=0,b=z.skips.length;T<b;T++)if(z.skips[T].test(l))return!1;for(T=0,b=z.names.length;T<b;T++)if(z.names[T].test(l))return!0;return!1},z.humanize=e(11375),z.names=[],z.skips=[],z.formatters={}},11375:function(K){var z=1e3,e=60*z,S=60*e,k=24*S;function l(T,b,d){if(!(T<b))return T<1.5*b?Math.floor(T/b)+" "+d:Math.ceil(T/b)+" "+d+"s"}K.exports=function(T,b){b=b||{};var d,s=typeof T;if(s==="string"&&T.length>0)return function(t){if(!((t=String(t)).length>100)){var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(o){var r=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"days":case"day":case"d":return r*k;case"hours":case"hour":case"hrs":case"hr":case"h":return r*S;case"minutes":case"minute":case"mins":case"min":case"m":return r*e;case"seconds":case"second":case"secs":case"sec":case"s":return r*z;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(T);if(s==="number"&&isNaN(T)===!1)return b.long?l(d=T,k,"day")||l(d,S,"hour")||l(d,e,"minute")||l(d,z,"second")||d+" ms":function(t){return t>=k?Math.round(t/k)+"d":t>=S?Math.round(t/S)+"h":t>=e?Math.round(t/e)+"m":t>=z?Math.round(t/z)+"s":t+"ms"}(T);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(T))}},99011:function(K,z,e){var S=e(88641);K.exports=function(k,l,T){if(k==null)throw Error("First argument should be a string");if(l==null)throw Error("Separator should be a string or a RegExp");T?(typeof T=="string"||Array.isArray(T))&&(T={ignore:T}):T={},T.escape==null&&(T.escape=!0),T.ignore==null?T.ignore=["[]","()","{}","<>",'""',"''","``","“”","«»"]:(typeof T.ignore=="string"&&(T.ignore=[T.ignore]),T.ignore=T.ignore.map(function(n){return n.length===1&&(n+=n),n}));var b=S.parse(k,{flat:!0,brackets:T.ignore}),d=b[0].split(l);if(T.escape){for(var s=[],t=0;t<d.length;t++){var o=d[t],r=d[t+1];o[o.length-1]==="\\"&&o[o.length-2]!=="\\"?(s.push(o+l+r),t++):s.push(o)}d=s}for(t=0;t<d.length;t++)b[0]=d[t],d[t]=S.stringify(b,{flat:!0});return d}},68664:function(K){K.exports=function(z){for(var e=z.length,S=new Array(e),k=new Array(e),l=new Array(e),T=new Array(e),b=new Array(e),d=new Array(e),s=0;s<e;++s)S[s]=-1,k[s]=0,l[s]=!1,T[s]=0,b[s]=-1,d[s]=[];var t,o=0,r=[],n=[];function a(h){var f=[h],x=[h];for(S[h]=k[h]=o,l[h]=!0,o+=1;x.length>0;){h=x[x.length-1];var v=z[h];if(T[h]<v.length){for(var g=T[h];g<v.length;++g){var y=v[g];if(S[y]<0){S[y]=k[y]=o,l[y]=!0,o+=1,f.push(y),x.push(y);break}l[y]&&(k[h]=0|Math.min(k[h],k[y])),b[y]>=0&&d[h].push(b[y])}T[h]=g}else{if(k[h]===S[h]){var p=[],m=[],w=0;for(g=f.length-1;g>=0;--g){var c=f[g];if(l[c]=!1,p.push(c),m.push(d[c]),w+=d[c].length,b[c]=r.length,c===h){f.length=g;break}}r.push(p);var M=new Array(w);for(g=0;g<m.length;g++)for(var _=0;_<m[g].length;_++)M[--w]=m[g][_];n.push(M)}x.pop()}}}for(s=0;s<e;++s)S[s]<0&&a(s);for(s=0;s<n.length;s++){var i=n[s];if(i.length!==0){i.sort(function(h,f){return h-f}),t=[i[0]];for(var u=1;u<i.length;u++)i[u]!==i[u-1]&&t.push(i[u]);n[s]=t}}return{components:r,adjacencyList:n}}},7095:function(K,z,e){e.r(z);var S=2*Math.PI,k=function(b,d,s,t,o,r,n){var a=b.x,i=b.y;return{x:t*(a*=d)-o*(i*=s)+r,y:o*a+t*i+n}},l=function(b,d){var s=d===1.5707963267948966?.551915024494:d===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(d/4),t=Math.cos(b),o=Math.sin(b),r=Math.cos(b+d),n=Math.sin(b+d);return[{x:t-o*s,y:o+t*s},{x:r+n*s,y:n-r*s},{x:r,y:n}]},T=function(b,d,s,t){var o=b*s+d*t;return o>1&&(o=1),o<-1&&(o=-1),(b*t-d*s<0?-1:1)*Math.acos(o)};z.default=function(b){var d=b.px,s=b.py,t=b.cx,o=b.cy,r=b.rx,n=b.ry,a=b.xAxisRotation,i=a===void 0?0:a,u=b.largeArcFlag,h=u===void 0?0:u,f=b.sweepFlag,x=f===void 0?0:f,v=[];if(r===0||n===0)return[];var g=Math.sin(i*S/360),y=Math.cos(i*S/360),p=y*(d-t)/2+g*(s-o)/2,m=-g*(d-t)/2+y*(s-o)/2;if(p===0&&m===0)return[];r=Math.abs(r),n=Math.abs(n);var w=Math.pow(p,2)/Math.pow(r,2)+Math.pow(m,2)/Math.pow(n,2);w>1&&(r*=Math.sqrt(w),n*=Math.sqrt(w));var c=function(R,V,F,D,U,j,J,X,Z,Y,W,Q){var ne=Math.pow(U,2),re=Math.pow(j,2),ie=Math.pow(W,2),se=Math.pow(Q,2),ge=ne*re-ne*se-re*ie;ge<0&&(ge=0),ge/=ne*se+re*ie;var ue=(ge=Math.sqrt(ge)*(J===X?-1:1))*U/j*Q,ce=ge*-j/U*W,le=Y*ue-Z*ce+(R+F)/2,de=Z*ue+Y*ce+(V+D)/2,Ce=(W-ue)/U,xe=(Q-ce)/j,_e=(-W-ue)/U,we=(-Q-ce)/j,Ae=T(1,0,Ce,xe),$=T(Ce,xe,_e,we);return X===0&&$>0&&($-=S),X===1&&$<0&&($+=S),[le,de,Ae,$]}(d,s,t,o,r,n,h,x,g,y,p,m),M=function(R,V){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return function(F,D){var U=[],j=!0,J=!1,X=void 0;try{for(var Z,Y=F[Symbol.iterator]();!(j=(Z=Y.next()).done)&&(U.push(Z.value),!D||U.length!==D);j=!0);}catch(W){J=!0,X=W}finally{try{!j&&Y.return&&Y.return()}finally{if(J)throw X}}return U}(R,V);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(c,4),_=M[0],E=M[1],L=M[2],C=M[3],O=Math.abs(C)/(S/4);Math.abs(1-O)<1e-7&&(O=1);var I=Math.max(Math.ceil(O),1);C/=I;for(var N=0;N<I;N++)v.push(l(L,C)),L+=C;return v.map(function(R){var V=k(R[0],r,n,y,g,_,E),F=V.x,D=V.y,U=k(R[1],r,n,y,g,_,E),j=U.x,J=U.y,X=k(R[2],r,n,y,g,_,E);return{x1:F,y1:D,x2:j,y2:J,x:X.x,y:X.y}})}},1750:function(K,z,e){var S=e(95616),k=e(65185),l=e(29988),T=e(89546),b=e(32791);K.exports=function(d){if(Array.isArray(d)&&d.length===1&&typeof d[0]=="string"&&(d=d[0]),typeof d=="string"&&(b(T(d),"String is not an SVG path."),d=S(d)),b(Array.isArray(d),"Argument should be a string or an array of path segments."),d=k(d),!(d=l(d)).length)return[0,0,0,0];for(var s=[1/0,1/0,-1/0,-1/0],t=0,o=d.length;t<o;t++)for(var r=d[t].slice(1),n=0;n<r.length;n+=2)r[n+0]<s[0]&&(s[0]=r[n+0]),r[n+1]<s[1]&&(s[1]=r[n+1]),r[n+0]>s[2]&&(s[2]=r[n+0]),r[n+1]>s[3]&&(s[3]=r[n+1]);return s}},29988:function(K,z,e){K.exports=function(T){for(var b,d=[],s=0,t=0,o=0,r=0,n=null,a=null,i=0,u=0,h=0,f=T.length;h<f;h++){var x=T[h],v=x[0];switch(v){case"M":o=x[1],r=x[2];break;case"A":var g=S({px:i,py:u,cx:x[6],cy:x[7],rx:x[1],ry:x[2],xAxisRotation:x[3],largeArcFlag:x[4],sweepFlag:x[5]});if(!g.length)continue;for(var y,p=0;p<g.length;p++)x=["C",(y=g[p]).x1,y.y1,y.x2,y.y2,y.x,y.y],p<g.length-1&&d.push(x);break;case"S":var m=i,w=u;b!="C"&&b!="S"||(m+=m-s,w+=w-t),x=["C",m,w,x[1],x[2],x[3],x[4]];break;case"T":b=="Q"||b=="T"?(n=2*i-n,a=2*u-a):(n=i,a=u),x=l(i,u,n,a,x[1],x[2]);break;case"Q":n=x[1],a=x[2],x=l(i,u,x[1],x[2],x[3],x[4]);break;case"L":x=k(i,u,x[1],x[2]);break;case"H":x=k(i,u,x[1],u);break;case"V":x=k(i,u,i,x[1]);break;case"Z":x=k(i,u,o,r)}b=v,i=x[x.length-2],u=x[x.length-1],x.length>4?(s=x[x.length-4],t=x[x.length-3]):(s=i,t=u),d.push(x)}return d};var S=e(7095);function k(T,b,d,s){return["C",T,b,d,s,d,s]}function l(T,b,d,s,t,o){return["C",T/3+.6666666666666666*d,b/3+.6666666666666666*s,t/3+.6666666666666666*d,o/3+.6666666666666666*s,t,o]}},82019:function(K,z,e){var S,k=e(1750),l=e(95616),T=e(31457),b=e(89546),d=e(44781),s=document.createElement("canvas"),t=s.getContext("2d");K.exports=function(o,r){if(!b(o))throw Error("Argument should be valid svg path string");var n,a;r||(r={}),r.shape?(n=r.shape[0],a=r.shape[1]):(n=s.width=r.w||r.width||200,a=s.height=r.h||r.height||200);var i=Math.min(n,a),u=r.stroke||0,h=r.viewbox||r.viewBox||k(o),f=[n/(h[2]-h[0]),a/(h[3]-h[1])],x=Math.min(f[0]||0,f[1]||0)/2;if(t.fillStyle="black",t.fillRect(0,0,n,a),t.fillStyle="white",u&&(typeof u!="number"&&(u=1),t.strokeStyle=u>0?"white":"black",t.lineWidth=Math.abs(u)),t.translate(.5*n,.5*a),t.scale(x,x),function(){if(S!=null)return S;var y=document.createElement("canvas").getContext("2d");if(y.canvas.width=y.canvas.height=1,!window.Path2D)return S=!1;var p=new Path2D("M0,0h1v1h-1v-1Z");y.fillStyle="black",y.fill(p);var m=y.getImageData(0,0,1,1);return S=m&&m.data&&m.data[3]===255}()){var v=new Path2D(o);t.fill(v),u&&t.stroke(v)}else{var g=l(o);T(t,g),t.fill(),u&&t.stroke()}return t.setTransform(1,0,0,1,0,0),d(t,{cutoff:r.cutoff!=null?r.cutoff:.5,radius:r.radius!=null?r.radius:.5*i})}},84267:function(K,z,e){var S;(function(k){var l=/^\s+/,T=/\s+$/,b=0,d=k.round,s=k.min,t=k.max,o=k.random;function r(W,Q){if(Q=Q||{},(W=W||"")instanceof r)return W;if(!(this instanceof r))return new r(W,Q);var ne=function(re){var ie,se,ge,ue={r:0,g:0,b:0},ce=1,le=null,de=null,Ce=null,xe=!1,_e=!1;return typeof re=="string"&&(re=function(we){we=we.replace(l,"").replace(T,"").toLowerCase();var Ae,$=!1;if(L[we])we=L[we],$=!0;else if(we=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(Ae=Z.rgb.exec(we))?{r:Ae[1],g:Ae[2],b:Ae[3]}:(Ae=Z.rgba.exec(we))?{r:Ae[1],g:Ae[2],b:Ae[3],a:Ae[4]}:(Ae=Z.hsl.exec(we))?{h:Ae[1],s:Ae[2],l:Ae[3]}:(Ae=Z.hsla.exec(we))?{h:Ae[1],s:Ae[2],l:Ae[3],a:Ae[4]}:(Ae=Z.hsv.exec(we))?{h:Ae[1],s:Ae[2],v:Ae[3]}:(Ae=Z.hsva.exec(we))?{h:Ae[1],s:Ae[2],v:Ae[3],a:Ae[4]}:(Ae=Z.hex8.exec(we))?{r:R(Ae[1]),g:R(Ae[2]),b:R(Ae[3]),a:U(Ae[4]),format:$?"name":"hex8"}:(Ae=Z.hex6.exec(we))?{r:R(Ae[1]),g:R(Ae[2]),b:R(Ae[3]),format:$?"name":"hex"}:(Ae=Z.hex4.exec(we))?{r:R(Ae[1]+""+Ae[1]),g:R(Ae[2]+""+Ae[2]),b:R(Ae[3]+""+Ae[3]),a:U(Ae[4]+""+Ae[4]),format:$?"name":"hex8"}:!!(Ae=Z.hex3.exec(we))&&{r:R(Ae[1]+""+Ae[1]),g:R(Ae[2]+""+Ae[2]),b:R(Ae[3]+""+Ae[3]),format:$?"name":"hex"}}(re)),typeof re=="object"&&(Y(re.r)&&Y(re.g)&&Y(re.b)?(ie=re.r,se=re.g,ge=re.b,ue={r:255*I(ie,255),g:255*I(se,255),b:255*I(ge,255)},xe=!0,_e=String(re.r).substr(-1)==="%"?"prgb":"rgb"):Y(re.h)&&Y(re.s)&&Y(re.v)?(le=F(re.s),de=F(re.v),ue=function(we,Ae,$){we=6*I(we,360),Ae=I(Ae,100),$=I($,100);var oe=k.floor(we),pe=we-oe,ye=$*(1-Ae),ke=$*(1-pe*Ae),De=$*(1-(1-pe)*Ae),Pe=oe%6;return{r:255*[$,ke,ye,ye,De,$][Pe],g:255*[De,$,$,ke,ye,ye][Pe],b:255*[ye,ye,De,$,$,ke][Pe]}}(re.h,le,de),xe=!0,_e="hsv"):Y(re.h)&&Y(re.s)&&Y(re.l)&&(le=F(re.s),Ce=F(re.l),ue=function(we,Ae,$){var oe,pe,ye;function ke(Re,fe,ve){return ve<0&&(ve+=1),ve>1&&(ve-=1),ve<1/6?Re+6*(fe-Re)*ve:ve<.5?fe:ve<2/3?Re+(fe-Re)*(2/3-ve)*6:Re}if(we=I(we,360),Ae=I(Ae,100),$=I($,100),Ae===0)oe=pe=ye=$;else{var De=$<.5?$*(1+Ae):$+Ae-$*Ae,Pe=2*$-De;oe=ke(Pe,De,we+1/3),pe=ke(Pe,De,we),ye=ke(Pe,De,we-1/3)}return{r:255*oe,g:255*pe,b:255*ye}}(re.h,le,Ce),xe=!0,_e="hsl"),re.hasOwnProperty("a")&&(ce=re.a)),ce=O(ce),{ok:xe,format:re.format||_e,r:s(255,t(ue.r,0)),g:s(255,t(ue.g,0)),b:s(255,t(ue.b,0)),a:ce}}(W);this._originalInput=W,this._r=ne.r,this._g=ne.g,this._b=ne.b,this._a=ne.a,this._roundA=d(100*this._a)/100,this._format=Q.format||ne.format,this._gradientType=Q.gradientType,this._r<1&&(this._r=d(this._r)),this._g<1&&(this._g=d(this._g)),this._b<1&&(this._b=d(this._b)),this._ok=ne.ok,this._tc_id=b++}function n(W,Q,ne){W=I(W,255),Q=I(Q,255),ne=I(ne,255);var re,ie,se=t(W,Q,ne),ge=s(W,Q,ne),ue=(se+ge)/2;if(se==ge)re=ie=0;else{var ce=se-ge;switch(ie=ue>.5?ce/(2-se-ge):ce/(se+ge),se){case W:re=(Q-ne)/ce+(Q<ne?6:0);break;case Q:re=(ne-W)/ce+2;break;case ne:re=(W-Q)/ce+4}re/=6}return{h:re,s:ie,l:ue}}function a(W,Q,ne){W=I(W,255),Q=I(Q,255),ne=I(ne,255);var re,ie,se=t(W,Q,ne),ge=s(W,Q,ne),ue=se,ce=se-ge;if(ie=se===0?0:ce/se,se==ge)re=0;else{switch(se){case W:re=(Q-ne)/ce+(Q<ne?6:0);break;case Q:re=(ne-W)/ce+2;break;case ne:re=(W-Q)/ce+4}re/=6}return{h:re,s:ie,v:ue}}function i(W,Q,ne,re){var ie=[V(d(W).toString(16)),V(d(Q).toString(16)),V(d(ne).toString(16))];return re&&ie[0].charAt(0)==ie[0].charAt(1)&&ie[1].charAt(0)==ie[1].charAt(1)&&ie[2].charAt(0)==ie[2].charAt(1)?ie[0].charAt(0)+ie[1].charAt(0)+ie[2].charAt(0):ie.join("")}function u(W,Q,ne,re){return[V(D(re)),V(d(W).toString(16)),V(d(Q).toString(16)),V(d(ne).toString(16))].join("")}function h(W,Q){Q=Q===0?0:Q||10;var ne=r(W).toHsl();return ne.s-=Q/100,ne.s=N(ne.s),r(ne)}function f(W,Q){Q=Q===0?0:Q||10;var ne=r(W).toHsl();return ne.s+=Q/100,ne.s=N(ne.s),r(ne)}function x(W){return r(W).desaturate(100)}function v(W,Q){Q=Q===0?0:Q||10;var ne=r(W).toHsl();return ne.l+=Q/100,ne.l=N(ne.l),r(ne)}function g(W,Q){Q=Q===0?0:Q||10;var ne=r(W).toRgb();return ne.r=t(0,s(255,ne.r-d(-Q/100*255))),ne.g=t(0,s(255,ne.g-d(-Q/100*255))),ne.b=t(0,s(255,ne.b-d(-Q/100*255))),r(ne)}function y(W,Q){Q=Q===0?0:Q||10;var ne=r(W).toHsl();return ne.l-=Q/100,ne.l=N(ne.l),r(ne)}function p(W,Q){var ne=r(W).toHsl(),re=(ne.h+Q)%360;return ne.h=re<0?360+re:re,r(ne)}function m(W){var Q=r(W).toHsl();return Q.h=(Q.h+180)%360,r(Q)}function w(W){var Q=r(W).toHsl(),ne=Q.h;return[r(W),r({h:(ne+120)%360,s:Q.s,l:Q.l}),r({h:(ne+240)%360,s:Q.s,l:Q.l})]}function c(W){var Q=r(W).toHsl(),ne=Q.h;return[r(W),r({h:(ne+90)%360,s:Q.s,l:Q.l}),r({h:(ne+180)%360,s:Q.s,l:Q.l}),r({h:(ne+270)%360,s:Q.s,l:Q.l})]}function M(W){var Q=r(W).toHsl(),ne=Q.h;return[r(W),r({h:(ne+72)%360,s:Q.s,l:Q.l}),r({h:(ne+216)%360,s:Q.s,l:Q.l})]}function _(W,Q,ne){Q=Q||6,ne=ne||30;var re=r(W).toHsl(),ie=360/ne,se=[r(W)];for(re.h=(re.h-(ie*Q>>1)+720)%360;--Q;)re.h=(re.h+ie)%360,se.push(r(re));return se}function E(W,Q){Q=Q||6;for(var ne=r(W).toHsv(),re=ne.h,ie=ne.s,se=ne.v,ge=[],ue=1/Q;Q--;)ge.push(r({h:re,s:ie,v:se})),se=(se+ue)%1;return ge}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var W=this.toRgb();return(299*W.r+587*W.g+114*W.b)/1e3},getLuminance:function(){var W,Q,ne,re=this.toRgb();return W=re.r/255,Q=re.g/255,ne=re.b/255,.2126*(W<=.03928?W/12.92:k.pow((W+.055)/1.055,2.4))+.7152*(Q<=.03928?Q/12.92:k.pow((Q+.055)/1.055,2.4))+.0722*(ne<=.03928?ne/12.92:k.pow((ne+.055)/1.055,2.4))},setAlpha:function(W){return this._a=O(W),this._roundA=d(100*this._a)/100,this},toHsv:function(){var W=a(this._r,this._g,this._b);return{h:360*W.h,s:W.s,v:W.v,a:this._a}},toHsvString:function(){var W=a(this._r,this._g,this._b),Q=d(360*W.h),ne=d(100*W.s),re=d(100*W.v);return this._a==1?"hsv("+Q+", "+ne+"%, "+re+"%)":"hsva("+Q+", "+ne+"%, "+re+"%, "+this._roundA+")"},toHsl:function(){var W=n(this._r,this._g,this._b);return{h:360*W.h,s:W.s,l:W.l,a:this._a}},toHslString:function(){var W=n(this._r,this._g,this._b),Q=d(360*W.h),ne=d(100*W.s),re=d(100*W.l);return this._a==1?"hsl("+Q+", "+ne+"%, "+re+"%)":"hsla("+Q+", "+ne+"%, "+re+"%, "+this._roundA+")"},toHex:function(W){return i(this._r,this._g,this._b,W)},toHexString:function(W){return"#"+this.toHex(W)},toHex8:function(W){return function(Q,ne,re,ie,se){var ge=[V(d(Q).toString(16)),V(d(ne).toString(16)),V(d(re).toString(16)),V(D(ie))];return se&&ge[0].charAt(0)==ge[0].charAt(1)&&ge[1].charAt(0)==ge[1].charAt(1)&&ge[2].charAt(0)==ge[2].charAt(1)&&ge[3].charAt(0)==ge[3].charAt(1)?ge[0].charAt(0)+ge[1].charAt(0)+ge[2].charAt(0)+ge[3].charAt(0):ge.join("")}(this._r,this._g,this._b,this._a,W)},toHex8String:function(W){return"#"+this.toHex8(W)},toRgb:function(){return{r:d(this._r),g:d(this._g),b:d(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+d(this._r)+", "+d(this._g)+", "+d(this._b)+")":"rgba("+d(this._r)+", "+d(this._g)+", "+d(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:d(100*I(this._r,255))+"%",g:d(100*I(this._g,255))+"%",b:d(100*I(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+d(100*I(this._r,255))+"%, "+d(100*I(this._g,255))+"%, "+d(100*I(this._b,255))+"%)":"rgba("+d(100*I(this._r,255))+"%, "+d(100*I(this._g,255))+"%, "+d(100*I(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(C[i(this._r,this._g,this._b,!0)]||!1)},toFilter:function(W){var Q="#"+u(this._r,this._g,this._b,this._a),ne=Q,re=this._gradientType?"GradientType = 1, ":"";if(W){var ie=r(W);ne="#"+u(ie._r,ie._g,ie._b,ie._a)}return"progid:DXImageTransform.Microsoft.gradient("+re+"startColorstr="+Q+",endColorstr="+ne+")"},toString:function(W){var Q=!!W;W=W||this._format;var ne=!1,re=this._a<1&&this._a>=0;return Q||!re||W!=="hex"&&W!=="hex6"&&W!=="hex3"&&W!=="hex4"&&W!=="hex8"&&W!=="name"?(W==="rgb"&&(ne=this.toRgbString()),W==="prgb"&&(ne=this.toPercentageRgbString()),W!=="hex"&&W!=="hex6"||(ne=this.toHexString()),W==="hex3"&&(ne=this.toHexString(!0)),W==="hex4"&&(ne=this.toHex8String(!0)),W==="hex8"&&(ne=this.toHex8String()),W==="name"&&(ne=this.toName()),W==="hsl"&&(ne=this.toHslString()),W==="hsv"&&(ne=this.toHsvString()),ne||this.toHexString()):W==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(W,Q){var ne=W.apply(null,[this].concat([].slice.call(Q)));return this._r=ne._r,this._g=ne._g,this._b=ne._b,this.setAlpha(ne._a),this},lighten:function(){return this._applyModification(v,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(h,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(x,arguments)},spin:function(){return this._applyModification(p,arguments)},_applyCombination:function(W,Q){return W.apply(null,[this].concat([].slice.call(Q)))},analogous:function(){return this._applyCombination(_,arguments)},complement:function(){return this._applyCombination(m,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(M,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(c,arguments)}},r.fromRatio=function(W,Q){if(typeof W=="object"){var ne={};for(var re in W)W.hasOwnProperty(re)&&(ne[re]=re==="a"?W[re]:F(W[re]));W=ne}return r(W,Q)},r.equals=function(W,Q){return!(!W||!Q)&&r(W).toRgbString()==r(Q).toRgbString()},r.random=function(){return r.fromRatio({r:o(),g:o(),b:o()})},r.mix=function(W,Q,ne){ne=ne===0?0:ne||50;var re=r(W).toRgb(),ie=r(Q).toRgb(),se=ne/100;return r({r:(ie.r-re.r)*se+re.r,g:(ie.g-re.g)*se+re.g,b:(ie.b-re.b)*se+re.b,a:(ie.a-re.a)*se+re.a})},r.readability=function(W,Q){var ne=r(W),re=r(Q);return(k.max(ne.getLuminance(),re.getLuminance())+.05)/(k.min(ne.getLuminance(),re.getLuminance())+.05)},r.isReadable=function(W,Q,ne){var re,ie,se,ge,ue,ce=r.readability(W,Q);switch(ie=!1,(se=ne,(ge=((se=se||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&ge!=="AAA"&&(ge="AA"),(ue=(se.size||"small").toLowerCase())!=="small"&&ue!=="large"&&(ue="small"),re={level:ge,size:ue}).level+re.size){case"AAsmall":case"AAAlarge":ie=ce>=4.5;break;case"AAlarge":ie=ce>=3;break;case"AAAsmall":ie=ce>=7}return ie},r.mostReadable=function(W,Q,ne){var re,ie,se,ge,ue=null,ce=0;ie=(ne=ne||{}).includeFallbackColors,se=ne.level,ge=ne.size;for(var le=0;le<Q.length;le++)(re=r.readability(W,Q[le]))>ce&&(ce=re,ue=r(Q[le]));return r.isReadable(W,ue,{level:se,size:ge})||!ie?ue:(ne.includeFallbackColors=!1,r.mostReadable(W,["#fff","#000"],ne))};var L=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},C=r.hexNames=function(W){var Q={};for(var ne in W)W.hasOwnProperty(ne)&&(Q[W[ne]]=ne);return Q}(L);function O(W){return W=parseFloat(W),(isNaN(W)||W<0||W>1)&&(W=1),W}function I(W,Q){(function(re){return typeof re=="string"&&re.indexOf(".")!=-1&&parseFloat(re)===1})(W)&&(W="100%");var ne=function(re){return typeof re=="string"&&re.indexOf("%")!=-1}(W);return W=s(Q,t(0,parseFloat(W))),ne&&(W=parseInt(W*Q,10)/100),k.abs(W-Q)<1e-6?1:W%Q/parseFloat(Q)}function N(W){return s(1,t(0,W))}function R(W){return parseInt(W,16)}function V(W){return W.length==1?"0"+W:""+W}function F(W){return W<=1&&(W=100*W+"%"),W}function D(W){return k.round(255*parseFloat(W)).toString(16)}function U(W){return R(W)/255}var j,J,X,Z=(J="[\\s|\\(]+("+(j="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+j+")[,|\\s]+("+j+")\\s*\\)?",X="[\\s|\\(]+("+j+")[,|\\s]+("+j+")[,|\\s]+("+j+")[,|\\s]+("+j+")\\s*\\)?",{CSS_UNIT:new RegExp(j),rgb:new RegExp("rgb"+J),rgba:new RegExp("rgba"+X),hsl:new RegExp("hsl"+J),hsla:new RegExp("hsla"+X),hsv:new RegExp("hsv"+J),hsva:new RegExp("hsva"+X),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Y(W){return!!Z.CSS_UNIT.exec(W)}K.exports?K.exports=r:(S=function(){return r}.call(z,e,z,K))===void 0||(K.exports=S)})(Math)},57060:function(K){K.exports=e,K.exports.float32=K.exports.float=e,K.exports.fract32=K.exports.fract=function(S,k){if(S.length){if(S instanceof Float32Array)return new Float32Array(S.length);k instanceof Float32Array||(k=e(S));for(var l=0,T=k.length;l<T;l++)k[l]=S[l]-k[l];return k}return e(S-e(S))};var z=new Float32Array(1);function e(S){return S.length?S instanceof Float32Array?S:new Float32Array(S):(z[0]=S,z[0])}},75686:function(K,z,e){var S=e(25677);function k(T,b){var d=S(getComputedStyle(T).getPropertyValue(b));return d[0]*l(d[1],T)}function l(T,b){switch(b=b||document.body,T=(T||"px").trim().toLowerCase(),b!==window&&b!==document||(b=document.body),T){case"%":return b.clientHeight/100;case"ch":case"ex":return function(d,s){var t=document.createElement("div");t.style["font-size"]="128"+d,s.appendChild(t);var o=k(t,"font-size")/128;return s.removeChild(t),o}(T,b);case"em":return k(b,"font-size");case"rem":return k(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 37.79527559055118;case"mm":return 3.7795275590551185;case"pt":return 1.3333333333333333;case"pc":return 16}return 1}K.exports=l},96892:function(K,z,e){function S(T){return T}function k(T,b){return typeof b=="string"&&(b=T.objects[b]),b.type==="GeometryCollection"?{type:"FeatureCollection",features:b.geometries.map(function(d){return l(T,d)})}:l(T,b)}function l(T,b){var d=b.id,s=b.bbox,t=b.properties==null?{}:b.properties,o=function(r,n){var a=function(g){if(g==null)return S;var y,p,m=g.scale[0],w=g.scale[1],c=g.translate[0],M=g.translate[1];return function(_,E){E||(y=p=0);var L=2,C=_.length,O=new Array(C);for(O[0]=(y+=_[0])*m+c,O[1]=(p+=_[1])*w+M;L<C;)O[L]=_[L],++L;return O}}(r.transform),i=r.arcs;function u(g,y){y.length&&y.pop();for(var p=i[g<0?~g:g],m=0,w=p.length;m<w;++m)y.push(a(p[m],m));g<0&&function(c,M){for(var _,E=c.length,L=E-M;L<--E;)_=c[L],c[L++]=c[E],c[E]=_}(y,w)}function h(g){return a(g)}function f(g){for(var y=[],p=0,m=g.length;p<m;++p)u(g[p],y);return y.length<2&&y.push(y[0]),y}function x(g){for(var y=f(g);y.length<4;)y.push(y[0]);return y}function v(g){return g.map(x)}return function g(y){var p,m=y.type;switch(m){case"GeometryCollection":return{type:m,geometries:y.geometries.map(g)};case"Point":p=h(y.coordinates);break;case"MultiPoint":p=y.coordinates.map(h);break;case"LineString":p=f(y.arcs);break;case"MultiLineString":p=y.arcs.map(f);break;case"Polygon":p=v(y.arcs);break;case"MultiPolygon":p=y.arcs.map(v);break;default:return null}return{type:m,coordinates:p}}(n)}(T,b);return d==null&&s==null?{type:"Feature",properties:t,geometry:o}:s==null?{type:"Feature",id:d,properties:t,geometry:o}:{type:"Feature",id:d,bbox:s,properties:t,geometry:o}}e.d(z,{zL:function(){return k}})},73116:function(K,z,e){var S=e(24511);K.exports=function(k){if(typeof k!="function"||!hasOwnProperty.call(k,"length"))return!1;try{if(typeof k.length!="number"||typeof k.call!="function"||typeof k.apply!="function")return!1}catch{return!1}return!S(k)}},69190:function(K,z,e){var S=e(24582),k=e(47403),l=e(9234),T=e(6048),b=function(d,s){return d.replace("%v",T(s))};K.exports=function(d,s,t){if(!k(t))throw new TypeError(b(s,d));if(!S(d)){if("default"in t)return t.default;if(t.isOptional)return null}var o=l(t.errorMessage);throw S(o)||(o=s),new TypeError(b(o,d))}},18497:function(K){K.exports=function(z){try{return z.toString()}catch{try{return String(z)}catch{return null}}}},6048:function(K,z,e){var S=e(18497),k=/[\n\r\u2028\u2029]/g;K.exports=function(l){var T=S(l);return T===null?"<Non-coercible to string value>":(T.length>100&&(T=T.slice(0,99)+"…"),T=T.replace(k,function(b){switch(b){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},47403:function(K,z,e){var S=e(24582),k={object:!0,function:!0,undefined:!0};K.exports=function(l){return!!S(l)&&hasOwnProperty.call(k,typeof l)}},82527:function(K,z,e){var S=e(69190),k=e(84985);K.exports=function(l){return k(l)?l:S(l,"%v is not a plain function",arguments[1])}},84985:function(K,z,e){var S=e(73116),k=/^\s*class[\s{/}]/,l=Function.prototype.toString;K.exports=function(T){return!!S(T)&&!k.test(l.call(T))}},24511:function(K,z,e){var S=e(47403);K.exports=function(k){if(!S(k))return!1;try{return!!k.constructor&&k.constructor.prototype===k}catch{return!1}}},9234:function(K,z,e){var S=e(24582),k=e(47403),l=Object.prototype.toString;K.exports=function(T){if(!S(T))return null;if(k(T)){var b=T.toString;if(typeof b!="function"||b===l)return null}try{return""+T}catch{return null}}},10424:function(K,z,e){var S=e(69190),k=e(24582);K.exports=function(l){return k(l)?l:S(l,"Cannot use %v",arguments[1])}},24582:function(K){K.exports=function(z){return z!=null}},58404:function(K,z,e){var S=e(13547),k=e(12129),l=e(12856).Buffer;e.g.__TYPEDARRAY_POOL||(e.g.__TYPEDARRAY_POOL={UINT8:k([32,0]),UINT16:k([32,0]),UINT32:k([32,0]),BIGUINT64:k([32,0]),INT8:k([32,0]),INT16:k([32,0]),INT32:k([32,0]),BIGINT64:k([32,0]),FLOAT:k([32,0]),DOUBLE:k([32,0]),DATA:k([32,0]),UINT8C:k([32,0]),BUFFER:k([32,0])});var T=typeof Uint8ClampedArray<"u",b=typeof BigUint64Array<"u",d=typeof BigInt64Array<"u",s=e.g.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=k([32,0])),s.BIGUINT64||(s.BIGUINT64=k([32,0])),s.BIGINT64||(s.BIGINT64=k([32,0])),s.BUFFER||(s.BUFFER=k([32,0]));var t=s.DATA,o=s.BUFFER;function r(M){if(M){var _=M.length||M.byteLength,E=S.log2(_);t[E].push(M)}}function n(M){M=S.nextPow2(M);var _=S.log2(M),E=t[_];return E.length>0?E.pop():new ArrayBuffer(M)}function a(M){return new Uint8Array(n(M),0,M)}function i(M){return new Uint16Array(n(2*M),0,M)}function u(M){return new Uint32Array(n(4*M),0,M)}function h(M){return new Int8Array(n(M),0,M)}function f(M){return new Int16Array(n(2*M),0,M)}function x(M){return new Int32Array(n(4*M),0,M)}function v(M){return new Float32Array(n(4*M),0,M)}function g(M){return new Float64Array(n(8*M),0,M)}function y(M){return T?new Uint8ClampedArray(n(M),0,M):a(M)}function p(M){return b?new BigUint64Array(n(8*M),0,M):null}function m(M){return d?new BigInt64Array(n(8*M),0,M):null}function w(M){return new DataView(n(M),0,M)}function c(M){M=S.nextPow2(M);var _=S.log2(M),E=o[_];return E.length>0?E.pop():new l(M)}z.free=function(M){if(l.isBuffer(M))o[S.log2(M.length)].push(M);else{if(Object.prototype.toString.call(M)!=="[object ArrayBuffer]"&&(M=M.buffer),!M)return;var _=M.length||M.byteLength,E=0|S.log2(_);t[E].push(M)}},z.freeUint8=z.freeUint16=z.freeUint32=z.freeBigUint64=z.freeInt8=z.freeInt16=z.freeInt32=z.freeBigInt64=z.freeFloat32=z.freeFloat=z.freeFloat64=z.freeDouble=z.freeUint8Clamped=z.freeDataView=function(M){r(M.buffer)},z.freeArrayBuffer=r,z.freeBuffer=function(M){o[S.log2(M.length)].push(M)},z.malloc=function(M,_){if(_===void 0||_==="arraybuffer")return n(M);switch(_){case"uint8":return a(M);case"uint16":return i(M);case"uint32":return u(M);case"int8":return h(M);case"int16":return f(M);case"int32":return x(M);case"float":case"float32":return v(M);case"double":case"float64":return g(M);case"uint8_clamped":return y(M);case"bigint64":return m(M);case"biguint64":return p(M);case"buffer":return c(M);case"data":case"dataview":return w(M);default:return null}return null},z.mallocArrayBuffer=n,z.mallocUint8=a,z.mallocUint16=i,z.mallocUint32=u,z.mallocInt8=h,z.mallocInt16=f,z.mallocInt32=x,z.mallocFloat32=z.mallocFloat=v,z.mallocFloat64=z.mallocDouble=g,z.mallocUint8Clamped=y,z.mallocBigUint64=p,z.mallocBigInt64=m,z.mallocDataView=w,z.mallocBuffer=c,z.clearCache=function(){for(var M=0;M<32;++M)s.UINT8[M].length=0,s.UINT16[M].length=0,s.UINT32[M].length=0,s.INT8[M].length=0,s.INT16[M].length=0,s.INT32[M].length=0,s.FLOAT[M].length=0,s.DOUBLE[M].length=0,s.BIGUINT64[M].length=0,s.BIGINT64[M].length=0,s.UINT8C[M].length=0,t[M].length=0,o[M].length=0}},90448:function(K){var z=/[\'\"]/;K.exports=function(e){return e?(z.test(e.charAt(0))&&(e=e.substr(1)),z.test(e.charAt(e.length-1))&&(e=e.substr(0,e.length-1)),e):""}},93447:function(K){K.exports=function(z,e,S){Array.isArray(S)||(S=[].slice.call(arguments,2));for(var k=0,l=S.length;k<l;k++){var T=S[k];for(var b in T)if((e[b]===void 0||Array.isArray(e[b])||z[b]!==e[b])&&b in e){var d;if(T[b]===!0)d=e[b];else if(T[b]===!1||typeof T[b]=="function"&&(d=T[b](e[b],z,e))===void 0)continue;z[b]=d}}return z}},20588:function(K,z,e){function S(k){try{if(!e.g.localStorage)return!1}catch{return!1}var l=e.g.localStorage[k];return l!=null&&String(l).toLowerCase()==="true"}K.exports=function(k,l){if(S("noDeprecation"))return k;var T=!1;return function(){if(!T){if(S("throwDeprecation"))throw new Error(l);S("traceDeprecation")?console.trace(l):console.warn(l),T=!0}return k.apply(this,arguments)}}},45920:function(K){K.exports=function(z){return z&&typeof z=="object"&&typeof z.copy=="function"&&typeof z.fill=="function"&&typeof z.readUInt8=="function"}},4936:function(K,z,e){var S=e(47216),k=e(65481),l=e(21099),T=e(9187);function b(I){return I.call.bind(I)}var d=typeof BigInt<"u",s=typeof Symbol<"u",t=b(Object.prototype.toString),o=b(Number.prototype.valueOf),r=b(String.prototype.valueOf),n=b(Boolean.prototype.valueOf);if(d)var a=b(BigInt.prototype.valueOf);if(s)var i=b(Symbol.prototype.valueOf);function u(I,N){if(typeof I!="object")return!1;try{return N(I),!0}catch{return!1}}function h(I){return t(I)==="[object Map]"}function f(I){return t(I)==="[object Set]"}function x(I){return t(I)==="[object WeakMap]"}function v(I){return t(I)==="[object WeakSet]"}function g(I){return t(I)==="[object ArrayBuffer]"}function y(I){return typeof ArrayBuffer<"u"&&(g.working?g(I):I instanceof ArrayBuffer)}function p(I){return t(I)==="[object DataView]"}function m(I){return typeof DataView<"u"&&(p.working?p(I):I instanceof DataView)}z.isArgumentsObject=S,z.isGeneratorFunction=k,z.isTypedArray=T,z.isPromise=function(I){return typeof Promise<"u"&&I instanceof Promise||I!==null&&typeof I=="object"&&typeof I.then=="function"&&typeof I.catch=="function"},z.isArrayBufferView=function(I){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(I):T(I)||m(I)},z.isUint8Array=function(I){return l(I)==="Uint8Array"},z.isUint8ClampedArray=function(I){return l(I)==="Uint8ClampedArray"},z.isUint16Array=function(I){return l(I)==="Uint16Array"},z.isUint32Array=function(I){return l(I)==="Uint32Array"},z.isInt8Array=function(I){return l(I)==="Int8Array"},z.isInt16Array=function(I){return l(I)==="Int16Array"},z.isInt32Array=function(I){return l(I)==="Int32Array"},z.isFloat32Array=function(I){return l(I)==="Float32Array"},z.isFloat64Array=function(I){return l(I)==="Float64Array"},z.isBigInt64Array=function(I){return l(I)==="BigInt64Array"},z.isBigUint64Array=function(I){return l(I)==="BigUint64Array"},h.working=typeof Map<"u"&&h(new Map),z.isMap=function(I){return typeof Map<"u"&&(h.working?h(I):I instanceof Map)},f.working=typeof Set<"u"&&f(new Set),z.isSet=function(I){return typeof Set<"u"&&(f.working?f(I):I instanceof Set)},x.working=typeof WeakMap<"u"&&x(new WeakMap),z.isWeakMap=function(I){return typeof WeakMap<"u"&&(x.working?x(I):I instanceof WeakMap)},v.working=typeof WeakSet<"u"&&v(new WeakSet),z.isWeakSet=function(I){return v(I)},g.working=typeof ArrayBuffer<"u"&&g(new ArrayBuffer),z.isArrayBuffer=y,p.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&p(new DataView(new ArrayBuffer(1),0,1)),z.isDataView=m;var w=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function c(I){return t(I)==="[object SharedArrayBuffer]"}function M(I){return w!==void 0&&(c.working===void 0&&(c.working=c(new w)),c.working?c(I):I instanceof w)}function _(I){return u(I,o)}function E(I){return u(I,r)}function L(I){return u(I,n)}function C(I){return d&&u(I,a)}function O(I){return s&&u(I,i)}z.isSharedArrayBuffer=M,z.isAsyncFunction=function(I){return t(I)==="[object AsyncFunction]"},z.isMapIterator=function(I){return t(I)==="[object Map Iterator]"},z.isSetIterator=function(I){return t(I)==="[object Set Iterator]"},z.isGeneratorObject=function(I){return t(I)==="[object Generator]"},z.isWebAssemblyCompiledModule=function(I){return t(I)==="[object WebAssembly.Module]"},z.isNumberObject=_,z.isStringObject=E,z.isBooleanObject=L,z.isBigIntObject=C,z.isSymbolObject=O,z.isBoxedPrimitive=function(I){return _(I)||E(I)||L(I)||C(I)||O(I)},z.isAnyArrayBuffer=function(I){return typeof Uint8Array<"u"&&(y(I)||M(I))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(I){Object.defineProperty(z,I,{enumerable:!1,value:function(){throw new Error(I+" is not supported in userland")}})})},43827:function(K,z,e){var S=e(90386),k=Object.getOwnPropertyDescriptors||function(I){for(var N=Object.keys(I),R={},V=0;V<N.length;V++)R[N[V]]=Object.getOwnPropertyDescriptor(I,N[V]);return R},l=/%[sdj%]/g;z.format=function(I){if(!x(I)){for(var N=[],R=0;R<arguments.length;R++)N.push(s(arguments[R]));return N.join(" ")}R=1;for(var V=arguments,F=V.length,D=String(I).replace(l,function(j){if(j==="%%")return"%";if(R>=F)return j;switch(j){case"%s":return String(V[R++]);case"%d":return Number(V[R++]);case"%j":try{return JSON.stringify(V[R++])}catch{return"[Circular]"}default:return j}}),U=V[R];R<F;U=V[++R])h(U)||!y(U)?D+=" "+U:D+=" "+s(U);return D},z.deprecate=function(I,N){if(S!==void 0&&S.noDeprecation===!0)return I;if(S===void 0)return function(){return z.deprecate(I,N).apply(this,arguments)};var R=!1;return function(){if(!R){if(S.throwDeprecation)throw new Error(N);S.traceDeprecation?console.trace(N):console.error(N),R=!0}return I.apply(this,arguments)}};var T={},b=/^$/;if(S.env.NODE_DEBUG){var d=S.env.NODE_DEBUG;d=d.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),b=new RegExp("^"+d+"$","i")}function s(I,N){var R={seen:[],stylize:o};return arguments.length>=3&&(R.depth=arguments[2]),arguments.length>=4&&(R.colors=arguments[3]),u(N)?R.showHidden=N:N&&z._extend(R,N),v(R.showHidden)&&(R.showHidden=!1),v(R.depth)&&(R.depth=2),v(R.colors)&&(R.colors=!1),v(R.customInspect)&&(R.customInspect=!0),R.colors&&(R.stylize=t),r(R,I,R.depth)}function t(I,N){var R=s.styles[N];return R?"\x1B["+s.colors[R][0]+"m"+I+"\x1B["+s.colors[R][1]+"m":I}function o(I,N){return I}function r(I,N,R){if(I.customInspect&&N&&w(N.inspect)&&N.inspect!==z.inspect&&(!N.constructor||N.constructor.prototype!==N)){var V=N.inspect(R,I);return x(V)||(V=r(I,V,R)),V}var F=function(W,Q){if(v(Q))return W.stylize("undefined","undefined");if(x(Q)){var ne="'"+JSON.stringify(Q).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return W.stylize(ne,"string")}return f(Q)?W.stylize(""+Q,"number"):u(Q)?W.stylize(""+Q,"boolean"):h(Q)?W.stylize("null","null"):void 0}(I,N);if(F)return F;var D=Object.keys(N),U=function(W){var Q={};return W.forEach(function(ne,re){Q[ne]=!0}),Q}(D);if(I.showHidden&&(D=Object.getOwnPropertyNames(N)),m(N)&&(D.indexOf("message")>=0||D.indexOf("description")>=0))return n(N);if(D.length===0){if(w(N)){var j=N.name?": "+N.name:"";return I.stylize("[Function"+j+"]","special")}if(g(N))return I.stylize(RegExp.prototype.toString.call(N),"regexp");if(p(N))return I.stylize(Date.prototype.toString.call(N),"date");if(m(N))return n(N)}var J,X="",Z=!1,Y=["{","}"];return i(N)&&(Z=!0,Y=["[","]"]),w(N)&&(X=" [Function"+(N.name?": "+N.name:"")+"]"),g(N)&&(X=" "+RegExp.prototype.toString.call(N)),p(N)&&(X=" "+Date.prototype.toUTCString.call(N)),m(N)&&(X=" "+n(N)),D.length!==0||Z&&N.length!=0?R<0?g(N)?I.stylize(RegExp.prototype.toString.call(N),"regexp"):I.stylize("[Object]","special"):(I.seen.push(N),J=Z?function(W,Q,ne,re,ie){for(var se=[],ge=0,ue=Q.length;ge<ue;++ge)L(Q,String(ge))?se.push(a(W,Q,ne,re,String(ge),!0)):se.push("");return ie.forEach(function(ce){ce.match(/^\d+$/)||se.push(a(W,Q,ne,re,ce,!0))}),se}(I,N,R,U,D):D.map(function(W){return a(I,N,R,U,W,Z)}),I.seen.pop(),function(W,Q,ne){return W.reduce(function(re,ie){return ie.indexOf(`
`),re+ie.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?ne[0]+(Q===""?"":Q+`
 `)+" "+W.join(`,
  `)+" "+ne[1]:ne[0]+Q+" "+W.join(", ")+" "+ne[1]}(J,X,Y)):Y[0]+X+Y[1]}function n(I){return"["+Error.prototype.toString.call(I)+"]"}function a(I,N,R,V,F,D){var U,j,J;if((J=Object.getOwnPropertyDescriptor(N,F)||{value:N[F]}).get?j=J.set?I.stylize("[Getter/Setter]","special"):I.stylize("[Getter]","special"):J.set&&(j=I.stylize("[Setter]","special")),L(V,F)||(U="["+F+"]"),j||(I.seen.indexOf(J.value)<0?(j=h(R)?r(I,J.value,null):r(I,J.value,R-1)).indexOf(`
`)>-1&&(j=D?j.split(`
`).map(function(X){return"  "+X}).join(`
`).slice(2):`
`+j.split(`
`).map(function(X){return"   "+X}).join(`
`)):j=I.stylize("[Circular]","special")),v(U)){if(D&&F.match(/^\d+$/))return j;(U=JSON.stringify(""+F)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(U=U.slice(1,-1),U=I.stylize(U,"name")):(U=U.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),U=I.stylize(U,"string"))}return U+": "+j}function i(I){return Array.isArray(I)}function u(I){return typeof I=="boolean"}function h(I){return I===null}function f(I){return typeof I=="number"}function x(I){return typeof I=="string"}function v(I){return I===void 0}function g(I){return y(I)&&c(I)==="[object RegExp]"}function y(I){return typeof I=="object"&&I!==null}function p(I){return y(I)&&c(I)==="[object Date]"}function m(I){return y(I)&&(c(I)==="[object Error]"||I instanceof Error)}function w(I){return typeof I=="function"}function c(I){return Object.prototype.toString.call(I)}function M(I){return I<10?"0"+I.toString(10):I.toString(10)}z.debuglog=function(I){if(I=I.toUpperCase(),!T[I])if(b.test(I)){var N=S.pid;T[I]=function(){var R=z.format.apply(z,arguments);console.error("%s %d: %s",I,N,R)}}else T[I]=function(){};return T[I]},z.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},z.types=e(4936),z.isArray=i,z.isBoolean=u,z.isNull=h,z.isNullOrUndefined=function(I){return I==null},z.isNumber=f,z.isString=x,z.isSymbol=function(I){return typeof I=="symbol"},z.isUndefined=v,z.isRegExp=g,z.types.isRegExp=g,z.isObject=y,z.isDate=p,z.types.isDate=p,z.isError=m,z.types.isNativeError=m,z.isFunction=w,z.isPrimitive=function(I){return I===null||typeof I=="boolean"||typeof I=="number"||typeof I=="string"||typeof I=="symbol"||I===void 0},z.isBuffer=e(45920);var _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(){var I=new Date,N=[M(I.getHours()),M(I.getMinutes()),M(I.getSeconds())].join(":");return[I.getDate(),_[I.getMonth()],N].join(" ")}function L(I,N){return Object.prototype.hasOwnProperty.call(I,N)}z.log=function(){console.log("%s - %s",E(),z.format.apply(z,arguments))},z.inherits=e(42018),z._extend=function(I,N){if(!N||!y(N))return I;for(var R=Object.keys(N),V=R.length;V--;)I[R[V]]=N[R[V]];return I};var C=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function O(I,N){if(!I){var R=new Error("Promise was rejected with a falsy value");R.reason=I,I=R}return N(I)}z.promisify=function(I){if(typeof I!="function")throw new TypeError('The "original" argument must be of type Function');if(C&&I[C]){var N;if(typeof(N=I[C])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(N,C,{value:N,enumerable:!1,writable:!1,configurable:!0}),N}function N(){for(var R,V,F=new Promise(function(j,J){R=j,V=J}),D=[],U=0;U<arguments.length;U++)D.push(arguments[U]);D.push(function(j,J){j?V(j):R(J)});try{I.apply(this,D)}catch(j){V(j)}return F}return Object.setPrototypeOf(N,Object.getPrototypeOf(I)),C&&Object.defineProperty(N,C,{value:N,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(N,k(I))},z.promisify.custom=C,z.callbackify=function(I){if(typeof I!="function")throw new TypeError('The "original" argument must be of type Function');function N(){for(var R=[],V=0;V<arguments.length;V++)R.push(arguments[V]);var F=R.pop();if(typeof F!="function")throw new TypeError("The last argument must be of type Function");var D=this,U=function(){return F.apply(D,arguments)};I.apply(this,R).then(function(j){S.nextTick(U.bind(null,null,j))},function(j){S.nextTick(O.bind(null,j,U))})}return Object.setPrototypeOf(N,Object.getPrototypeOf(I)),Object.defineProperties(N,k(I)),N}},40372:function(K,z,e){var S=e(86249);K.exports=function(k){return S("webgl",k)}},21099:function(K,z,e){var S=e(31353),k=e(72077),l=e(6614),T=e(40383),b=l("Object.prototype.toString"),d=e(84543)(),s=typeof globalThis>"u"?e.g:globalThis,t=k(),o=l("String.prototype.slice"),r={},n=Object.getPrototypeOf;d&&T&&n&&S(t,function(i){if(typeof s[i]=="function"){var u=new s[i];if(Symbol.toStringTag in u){var h=n(u),f=T(h,Symbol.toStringTag);if(!f){var x=n(h);f=T(x,Symbol.toStringTag)}r[i]=f.get}}});var a=e(9187);K.exports=function(i){return!!a(i)&&(d&&Symbol.toStringTag in i?function(u){var h=!1;return S(r,function(f,x){if(!h)try{var v=f.call(u);v===x&&(h=v)}catch{}}),h}(i):o(b(i),8,-1))}},3961:function(K,z,e){var S=e(63489),k=e(56131),l=S.instance();function T(n){this.local=this.regionalOptions[n||""]||this.regionalOptions[""]}T.prototype=new S.baseCalendar,k(T.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(n,a){if(typeof n=="string"){var i=n.match(d);return i?i[0]:""}var u=this._validateYear(n),h=n.month(),f=""+this.toChineseMonth(u,h);return a&&f.length<2&&(f="0"+f),this.isIntercalaryMonth(u,h)&&(f+="i"),f},monthNames:function(n){if(typeof n=="string"){var a=n.match(s);return a?a[0]:""}var i=this._validateYear(n),u=n.month(),h=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][this.toChineseMonth(i,u)-1];return this.isIntercalaryMonth(i,u)&&(h="闰"+h),h},monthNamesShort:function(n){if(typeof n=="string"){var a=n.match(t);return a?a[0]:""}var i=this._validateYear(n),u=n.month(),h=["一","二","三","四","五","六","七","八","九","十","十一","十二"][this.toChineseMonth(i,u)-1];return this.isIntercalaryMonth(i,u)&&(h="闰"+h),h},parseMonth:function(n,a){n=this._validateYear(n);var i,u=parseInt(a);if(isNaN(u))a[0]==="闰"&&(i=!0,a=a.substring(1)),a[a.length-1]==="月"&&(a=a.substring(0,a.length-1)),u=1+["一","二","三","四","五","六","七","八","九","十","十一","十二"].indexOf(a);else{var h=a[a.length-1];i=h==="i"||h==="I"}return this.toMonthIndex(n,u,i)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(n,a){if(n.year&&(n=n.year()),typeof n!="number"||n<1888||n>2111)throw a.replace(/\{0\}/,this.local.name);return n},toMonthIndex:function(n,a,i){var u=this.intercalaryMonth(n);if(i&&a!==u||a<1||a>12)throw S.local.invalidMonth.replace(/\{0\}/,this.local.name);return u?!i&&a<=u?a-1:a:a-1},toChineseMonth:function(n,a){n.year&&(a=(n=n.year()).month());var i=this.intercalaryMonth(n);if(a<0||a>(i?12:11))throw S.local.invalidMonth.replace(/\{0\}/,this.local.name);return i?a<i?a+1:a:a+1},intercalaryMonth:function(n){return n=this._validateYear(n),o[n-o[0]]>>13},isIntercalaryMonth:function(n,a){n.year&&(a=(n=n.year()).month());var i=this.intercalaryMonth(n);return!!i&&i===a},leapYear:function(n){return this.intercalaryMonth(n)!==0},weekOfYear:function(n,a,i){var u,h=this._validateYear(n,S.local.invalidyear),f=r[h-r[0]],x=f>>9&4095,v=f>>5&15,g=31&f;(u=l.newDate(x,v,g)).add(4-(u.dayOfWeek()||7),"d");var y=this.toJD(n,a,i)-u.toJD();return 1+Math.floor(y/7)},monthsInYear:function(n){return this.leapYear(n)?13:12},daysInMonth:function(n,a){n.year&&(a=n.month(),n=n.year()),n=this._validateYear(n);var i=o[n-o[0]];if(a>(i>>13?12:11))throw S.local.invalidMonth.replace(/\{0\}/,this.local.name);return i&1<<12-a?30:29},weekDay:function(n,a,i){return(this.dayOfWeek(n,a,i)||7)<6},toJD:function(n,a,i){var u=this._validate(n,f,i,S.local.invalidDate);n=this._validateYear(u.year()),a=u.month(),i=u.day();var h=this.isIntercalaryMonth(n,a),f=this.toChineseMonth(n,a),x=function(v,g,y,p,m){var w,c,M;if(typeof v=="object")c=v,w=g||{};else{var _;if(!(typeof v=="number"&&v>=1888&&v<=2111))throw new Error("Lunar year outside range 1888-2111");if(!(typeof g=="number"&&g>=1&&g<=12))throw new Error("Lunar month outside range 1 - 12");if(!(typeof y=="number"&&y>=1&&y<=30))throw new Error("Lunar day outside range 1 - 30");typeof p=="object"?(_=!1,w=p):(_=!!p,w={}),c={year:v,month:g,day:y,isIntercalary:_}}M=c.day-1;var E,L=o[c.year-o[0]],C=L>>13;E=C&&(c.month>C||c.isIntercalary)?c.month:c.month-1;for(var O=0;O<E;O++)M+=L&1<<12-O?30:29;var I=r[c.year-r[0]],N=new Date(I>>9&4095,(I>>5&15)-1,(31&I)+M);return w.year=N.getFullYear(),w.month=1+N.getMonth(),w.day=N.getDate(),w}(n,f,i,h);return l.toJD(x.year,x.month,x.day)},fromJD:function(n){var a=l.fromJD(n),i=function(h,f,x,v){var g,y;if(typeof h=="object")g=h,y=f||{};else{if(!(typeof h=="number"&&h>=1888&&h<=2111))throw new Error("Solar year outside range 1888-2111");if(!(typeof f=="number"&&f>=1&&f<=12))throw new Error("Solar month outside range 1 - 12");if(!(typeof x=="number"&&x>=1&&x<=31))throw new Error("Solar day outside range 1 - 31");g={year:h,month:f,day:x},y={}}var p=r[g.year-r[0]],m=g.year<<9|g.month<<5|g.day;y.year=m>=p?g.year:g.year-1,p=r[y.year-r[0]];var w,c=new Date(p>>9&4095,(p>>5&15)-1,31&p),M=new Date(g.year,g.month-1,g.day);w=Math.round((M-c)/864e5);var _,E=o[y.year-o[0]];for(_=0;_<13;_++){var L=E&1<<12-_?30:29;if(w<L)break;w-=L}var C=E>>13;return!C||_<C?(y.isIntercalary=!1,y.month=1+_):_===C?(y.isIntercalary=!0,y.month=_):(y.isIntercalary=!1,y.month=_),y.day=1+w,y}(a.year(),a.month(),a.day()),u=this.toMonthIndex(i.year,i.month,i.isIntercalary);return this.newDate(i.year,u,i.day)},fromString:function(n){var a=n.match(b),i=this._validateYear(+a[1]),u=+a[2],h=!!a[3],f=this.toMonthIndex(i,u,h),x=+a[4];return this.newDate(i,f,x)},add:function(n,a,i){var u=n.year(),h=n.month(),f=this.isIntercalaryMonth(u,h),x=this.toChineseMonth(u,h),v=Object.getPrototypeOf(T.prototype).add.call(this,n,a,i);if(i==="y"){var g=v.year(),y=v.month(),p=this.isIntercalaryMonth(g,x),m=f&&p?this.toMonthIndex(g,x,!0):this.toMonthIndex(g,x,!1);m!==y&&v.month(m)}return v}});var b=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,d=/^\d?\d[iI]?/m,s=/^闰?十?[一二三四五六七八九]?月/m,t=/^闰?十?[一二三四五六七八九]?/m;S.calendars.chinese=T;var o=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],r=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},38751:function(K,z,e){var S=e(63489),k=e(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new S.baseCalendar,k(l.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,S.local.invalidYear);return(T=b.year()+(b.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,S.local.invalidYear||S.regionalOptions[""].invalidYear),13},weekOfYear:function(T,b,d){var s=this.newDate(T,b,d);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var d=this._validate(T,b,this.minDay,S.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===13&&this.leapYear(d.year())?1:0)},weekDay:function(T,b,d){return(this.dayOfWeek(T,b,d)||7)<6},toJD:function(T,b,d){var s=this._validate(T,b,d,S.local.invalidDate);return(T=s.year())<0&&T++,s.day()+30*(s.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var b=Math.floor(T)+.5-this.jdEpoch,d=Math.floor((b-Math.floor((b+366)/1461))/365)+1;d<=0&&d--,b=Math.floor(T)+.5-this.newDate(d,1,1).toJD();var s=Math.floor(b/30)+1,t=b-30*(s-1)+1;return this.newDate(d,s,t)}}),S.calendars.coptic=l},86825:function(K,z,e){var S=e(63489),k=e(56131);function l(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}l.prototype=new S.baseCalendar,k(l.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(b){return this._validate(b,this.minMonth,this.minDay,S.local.invalidYear),!1},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,S.local.invalidYear),13},daysInYear:function(b){return this._validate(b,this.minMonth,this.minDay,S.local.invalidYear),400},weekOfYear:function(b,d,s){var t=this.newDate(b,d,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/8)+1},daysInMonth:function(b,d){var s=this._validate(b,d,this.minDay,S.local.invalidMonth);return this.daysPerMonth[s.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(b,d,s){return(this._validate(b,d,s,S.local.invalidDate).day()+1)%8},weekDay:function(b,d,s){var t=this.dayOfWeek(b,d,s);return t>=2&&t<=6},extraInfo:function(b,d,s){var t=this._validate(b,d,s,S.local.invalidDate);return{century:T[Math.floor((t.year()-1)/100)+1]||""}},toJD:function(b,d,s){var t=this._validate(b,d,s,S.local.invalidDate);return b=t.year()+(t.year()<0?1:0),d=t.month(),(s=t.day())+(d>1?16:0)+(d>2?32*(d-2):0)+400*(b-1)+this.jdEpoch-1},fromJD:function(b){b=Math.floor(b+.5)-Math.floor(this.jdEpoch)-1;var d=Math.floor(b/400)+1;b-=400*(d-1),b+=b>15?16:0;var s=Math.floor(b/32)+1,t=b-32*(s-1)+1;return this.newDate(d<=0?d-1:d,s,t)}});var T={20:"Fruitbat",21:"Anchovy"};S.calendars.discworld=l},37715:function(K,z,e){var S=e(63489),k=e(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new S.baseCalendar,k(l.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,S.local.invalidYear);return(T=b.year()+(b.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,S.local.invalidYear||S.regionalOptions[""].invalidYear),13},weekOfYear:function(T,b,d){var s=this.newDate(T,b,d);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var d=this._validate(T,b,this.minDay,S.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===13&&this.leapYear(d.year())?1:0)},weekDay:function(T,b,d){return(this.dayOfWeek(T,b,d)||7)<6},toJD:function(T,b,d){var s=this._validate(T,b,d,S.local.invalidDate);return(T=s.year())<0&&T++,s.day()+30*(s.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var b=Math.floor(T)+.5-this.jdEpoch,d=Math.floor((b-Math.floor((b+366)/1461))/365)+1;d<=0&&d--,b=Math.floor(T)+.5-this.newDate(d,1,1).toJD();var s=Math.floor(b/30)+1,t=b-30*(s-1)+1;return this.newDate(d,s,t)}}),S.calendars.ethiopian=l},99384:function(K,z,e){var S=e(63489),k=e(56131);function l(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}function T(b,d){return b-d*Math.floor(b/d)}l.prototype=new S.baseCalendar,k(l.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var d=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear);return this._leapYear(d.year())},_leapYear:function(b){return T(7*(b=b<0?b+1:b)+1,19)<7},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,S.local.invalidYear),this._leapYear(b.year?b.year():b)?13:12},weekOfYear:function(b,d,s){var t=this.newDate(b,d,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(b){return b=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear).year(),this.toJD(b===-1?1:b+1,7,1)-this.toJD(b,7,1)},daysInMonth:function(b,d){return b.year&&(d=b.month(),b=b.year()),this._validate(b,d,this.minDay,S.local.invalidMonth),d===12&&this.leapYear(b)||d===8&&T(this.daysInYear(b),10)===5?30:d===9&&T(this.daysInYear(b),10)===3?29:this.daysPerMonth[d-1]},weekDay:function(b,d,s){return this.dayOfWeek(b,d,s)!==6},extraInfo:function(b,d,s){var t=this._validate(b,d,s,S.local.invalidDate);return{yearType:(this.leapYear(t)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(t)%10-3]}},toJD:function(b,d,s){var t=this._validate(b,d,s,S.local.invalidDate);b=t.year(),d=t.month(),s=t.day();var o=b<=0?b+1:b,r=this.jdEpoch+this._delay1(o)+this._delay2(o)+s+1;if(d<7){for(var n=7;n<=this.monthsInYear(b);n++)r+=this.daysInMonth(b,n);for(n=1;n<d;n++)r+=this.daysInMonth(b,n)}else for(n=7;n<d;n++)r+=this.daysInMonth(b,n);return r},_delay1:function(b){var d=Math.floor((235*b-234)/19),s=12084+13753*d,t=29*d+Math.floor(s/25920);return T(3*(t+1),7)<3&&t++,t},_delay2:function(b){var d=this._delay1(b-1),s=this._delay1(b);return this._delay1(b+1)-s==356?2:s-d==382?1:0},fromJD:function(b){b=Math.floor(b)+.5;for(var d=Math.floor(98496*(b-this.jdEpoch)/35975351)-1;b>=this.toJD(d===-1?1:d+1,7,1);)d++;for(var s=b<this.toJD(d,1,1)?7:1;b>this.toJD(d,s,this.daysInMonth(d,s));)s++;var t=b-this.toJD(d,s,1)+1;return this.newDate(d,s,t)}}),S.calendars.hebrew=l},43805:function(K,z,e){var S=e(63489),k=e(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new S.baseCalendar,k(l.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khamīs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){return(11*this._validate(T,this.minMonth,this.minDay,S.local.invalidYear).year()+14)%30<11},weekOfYear:function(T,b,d){var s=this.newDate(T,b,d);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(T){return this.leapYear(T)?355:354},daysInMonth:function(T,b){var d=this._validate(T,b,this.minDay,S.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===12&&this.leapYear(d.year())?1:0)},weekDay:function(T,b,d){return this.dayOfWeek(T,b,d)!==5},toJD:function(T,b,d){var s=this._validate(T,b,d,S.local.invalidDate);return T=s.year(),b=s.month(),T=T<=0?T+1:T,(d=s.day())+Math.ceil(29.5*(b-1))+354*(T-1)+Math.floor((3+11*T)/30)+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var b=Math.floor((30*(T-this.jdEpoch)+10646)/10631);b=b<=0?b-1:b;var d=Math.min(12,Math.ceil((T-29-this.toJD(b,1,1))/29.5)+1),s=T-this.toJD(b,d,1)+1;return this.newDate(b,d,s)}}),S.calendars.islamic=l},88874:function(K,z,e){var S=e(63489),k=e(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new S.baseCalendar,k(l.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,S.local.invalidYear);return(T=b.year()<0?b.year()+1:b.year())%4==0},weekOfYear:function(T,b,d){var s=this.newDate(T,b,d);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var d=this._validate(T,b,this.minDay,S.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===2&&this.leapYear(d.year())?1:0)},weekDay:function(T,b,d){return(this.dayOfWeek(T,b,d)||7)<6},toJD:function(T,b,d){var s=this._validate(T,b,d,S.local.invalidDate);return T=s.year(),b=s.month(),d=s.day(),T<0&&T++,b<=2&&(T--,b+=12),Math.floor(365.25*(T+4716))+Math.floor(30.6001*(b+1))+d-1524.5},fromJD:function(T){var b=Math.floor(T+.5)+1524,d=Math.floor((b-122.1)/365.25),s=Math.floor(365.25*d),t=Math.floor((b-s)/30.6001),o=t-Math.floor(t<14?1:13),r=d-Math.floor(o>2?4716:4715),n=b-s-Math.floor(30.6001*t);return r<=0&&r--,this.newDate(r,o,n)}}),S.calendars.julian=l},83290:function(K,z,e){var S=e(63489),k=e(56131);function l(d){this.local=this.regionalOptions[d||""]||this.regionalOptions[""]}function T(d,s){return d-s*Math.floor(d/s)}function b(d,s){return T(d-1,s)+1}l.prototype=new S.baseCalendar,k(l.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(d){return this._validate(d,this.minMonth,this.minDay,S.local.invalidYear),!1},formatYear:function(d){d=this._validate(d,this.minMonth,this.minDay,S.local.invalidYear).year();var s=Math.floor(d/400);return d%=400,d+=d<0?400:0,s+"."+Math.floor(d/20)+"."+d%20},forYear:function(d){if((d=d.split(".")).length<3)throw"Invalid Mayan year";for(var s=0,t=0;t<d.length;t++){var o=parseInt(d[t],10);if(Math.abs(o)>19||t>0&&o<0)throw"Invalid Mayan year";s=20*s+o}return s},monthsInYear:function(d){return this._validate(d,this.minMonth,this.minDay,S.local.invalidYear),18},weekOfYear:function(d,s,t){return this._validate(d,s,t,S.local.invalidDate),0},daysInYear:function(d){return this._validate(d,this.minMonth,this.minDay,S.local.invalidYear),360},daysInMonth:function(d,s){return this._validate(d,s,this.minDay,S.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(d,s,t){return this._validate(d,s,t,S.local.invalidDate).day()},weekDay:function(d,s,t){return this._validate(d,s,t,S.local.invalidDate),!0},extraInfo:function(d,s,t){var o=this._validate(d,s,t,S.local.invalidDate).toJD(),r=this._toHaab(o),n=this._toTzolkin(o);return{haabMonthName:this.local.haabMonths[r[0]-1],haabMonth:r[0],haabDay:r[1],tzolkinDayName:this.local.tzolkinMonths[n[0]-1],tzolkinDay:n[0],tzolkinTrecena:n[1]}},_toHaab:function(d){var s=T(8+(d-=this.jdEpoch)+340,365);return[Math.floor(s/20)+1,T(s,20)]},_toTzolkin:function(d){return[b(20+(d-=this.jdEpoch),20),b(d+4,13)]},toJD:function(d,s,t){var o=this._validate(d,s,t,S.local.invalidDate);return o.day()+20*o.month()+360*o.year()+this.jdEpoch},fromJD:function(d){d=Math.floor(d)+.5-this.jdEpoch;var s=Math.floor(d/360);d%=360,d+=d<0?360:0;var t=Math.floor(d/20),o=d%20;return this.newDate(s,t,o)}}),S.calendars.mayan=l},29108:function(K,z,e){var S=e(63489),k=e(56131);function l(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}l.prototype=new S.baseCalendar;var T=S.instance("gregorian");k(l.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var d=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear||S.regionalOptions[""].invalidYear);return T.leapYear(d.year()+(d.year()<1?1:0)+1469)},weekOfYear:function(b,d,s){var t=this.newDate(b,d,s);return t.add(1-(t.dayOfWeek()||7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(b,d){var s=this._validate(b,d,this.minDay,S.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(b,d,s){return(this.dayOfWeek(b,d,s)||7)<6},toJD:function(b,d,s){var t=this._validate(b,d,s,S.local.invalidMonth);(b=t.year())<0&&b++;for(var o=t.day(),r=1;r<t.month();r++)o+=this.daysPerMonth[r-1];return o+T.toJD(b+1468,3,13)},fromJD:function(b){b=Math.floor(b+.5);for(var d=Math.floor((b-(this.jdEpoch-1))/366);b>=this.toJD(d+1,1,1);)d++;for(var s=b-Math.floor(this.toJD(d,1,1)+.5)+1,t=1;s>this.daysInMonth(d,t);)s-=this.daysInMonth(d,t),t++;return this.newDate(d,t,s)}}),S.calendars.nanakshahi=l},55422:function(K,z,e){var S=e(63489),k=e(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new S.baseCalendar,k(l.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(T){return this.daysInYear(T)!==this.daysPerYear},weekOfYear:function(T,b,d){var s=this.newDate(T,b,d);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(T){if(T=this._validate(T,this.minMonth,this.minDay,S.local.invalidYear).year(),this.NEPALI_CALENDAR_DATA[T]===void 0)return this.daysPerYear;for(var b=0,d=this.minMonth;d<=12;d++)b+=this.NEPALI_CALENDAR_DATA[T][d];return b},daysInMonth:function(T,b){return T.year&&(b=T.month(),T=T.year()),this._validate(T,b,this.minDay,S.local.invalidMonth),this.NEPALI_CALENDAR_DATA[T]===void 0?this.daysPerMonth[b-1]:this.NEPALI_CALENDAR_DATA[T][b]},weekDay:function(T,b,d){return this.dayOfWeek(T,b,d)!==6},toJD:function(T,b,d){var s=this._validate(T,b,d,S.local.invalidDate);T=s.year(),b=s.month(),d=s.day();var t=S.instance(),o=0,r=b,n=T;this._createMissingCalendarData(T);var a=T-(r>9||r===9&&d>=this.NEPALI_CALENDAR_DATA[n][0]?56:57);for(b!==9&&(o=d,r--);r!==9;)r<=0&&(r=12,n--),o+=this.NEPALI_CALENDAR_DATA[n][r],r--;return b===9?(o+=d-this.NEPALI_CALENDAR_DATA[n][0])<0&&(o+=t.daysInYear(a)):o+=this.NEPALI_CALENDAR_DATA[n][9]-this.NEPALI_CALENDAR_DATA[n][0],t.newDate(a,1,1).add(o,"d").toJD()},fromJD:function(T){var b=S.instance().fromJD(T),d=b.year(),s=b.dayOfYear(),t=d+56;this._createMissingCalendarData(t);for(var o=9,r=this.NEPALI_CALENDAR_DATA[t][0],n=this.NEPALI_CALENDAR_DATA[t][o]-r+1;s>n;)++o>12&&(o=1,t++),n+=this.NEPALI_CALENDAR_DATA[t][o];var a=this.NEPALI_CALENDAR_DATA[t][o]-(n-s);return this.newDate(t,o,a)},_createMissingCalendarData:function(T){var b=this.daysPerMonth.slice(0);b.unshift(17);for(var d=T-1;d<T+2;d++)this.NEPALI_CALENDAR_DATA[d]===void 0&&(this.NEPALI_CALENDAR_DATA[d]=b)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),S.calendars.nepali=l},94320:function(K,z,e){var S=e(63489),k=e(56131);function l(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}function T(b,d){return b-d*Math.floor(b/d)}l.prototype=new S.baseCalendar,k(l.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chæharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Chæ","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(b){var d=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear);return 682*((d.year()-(d.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(b,d,s){var t=this.newDate(b,d,s);return t.add(-(t.dayOfWeek()+1)%7,"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(b,d){var s=this._validate(b,d,this.minDay,S.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(b,d,s){return this.dayOfWeek(b,d,s)!==5},toJD:function(b,d,s){var t=this._validate(b,d,s,S.local.invalidDate);b=t.year(),d=t.month(),s=t.day();var o=b-(b>=0?474:473),r=474+T(o,2820);return s+(d<=7?31*(d-1):30*(d-1)+6)+Math.floor((682*r-110)/2816)+365*(r-1)+1029983*Math.floor(o/2820)+this.jdEpoch-1},fromJD:function(b){var d=(b=Math.floor(b)+.5)-this.toJD(475,1,1),s=Math.floor(d/1029983),t=T(d,1029983),o=2820;if(t!==1029982){var r=Math.floor(t/366),n=T(t,366);o=Math.floor((2134*r+2816*n+2815)/1028522)+r+1}var a=o+2820*s+474;a=a<=0?a-1:a;var i=b-this.toJD(a,1,1)+1,u=i<=186?Math.ceil(i/31):Math.ceil((i-6)/30),h=b-this.toJD(a,u,1)+1;return this.newDate(a,u,h)}}),S.calendars.persian=l,S.calendars.jalali=l},31320:function(K,z,e){var S=e(63489),k=e(56131),l=S.instance();function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}T.prototype=new S.baseCalendar,k(T.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(b){var d=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear);return b=this._t2gYear(d.year()),l.leapYear(b)},weekOfYear:function(b,d,s){var t=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear);return b=this._t2gYear(t.year()),l.weekOfYear(b,t.month(),t.day())},daysInMonth:function(b,d){var s=this._validate(b,d,this.minDay,S.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(b,d,s){return(this.dayOfWeek(b,d,s)||7)<6},toJD:function(b,d,s){var t=this._validate(b,d,s,S.local.invalidDate);return b=this._t2gYear(t.year()),l.toJD(b,t.month(),t.day())},fromJD:function(b){var d=l.fromJD(b),s=this._g2tYear(d.year());return this.newDate(s,d.month(),d.day())},_t2gYear:function(b){return b+this.yearsOffset+(b>=-this.yearsOffset&&b<=-1?1:0)},_g2tYear:function(b){return b-this.yearsOffset-(b>=1&&b<=this.yearsOffset?1:0)}}),S.calendars.taiwan=T},51367:function(K,z,e){var S=e(63489),k=e(56131),l=S.instance();function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}T.prototype=new S.baseCalendar,k(T.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var d=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear);return b=this._t2gYear(d.year()),l.leapYear(b)},weekOfYear:function(b,d,s){var t=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear);return b=this._t2gYear(t.year()),l.weekOfYear(b,t.month(),t.day())},daysInMonth:function(b,d){var s=this._validate(b,d,this.minDay,S.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(b,d,s){return(this.dayOfWeek(b,d,s)||7)<6},toJD:function(b,d,s){var t=this._validate(b,d,s,S.local.invalidDate);return b=this._t2gYear(t.year()),l.toJD(b,t.month(),t.day())},fromJD:function(b){var d=l.fromJD(b),s=this._g2tYear(d.year());return this.newDate(s,d.month(),d.day())},_t2gYear:function(b){return b-this.yearsOffset-(b>=1&&b<=this.yearsOffset?1:0)},_g2tYear:function(b){return b+this.yearsOffset+(b>=-this.yearsOffset&&b<=-1?1:0)}}),S.calendars.thai=T},21457:function(K,z,e){var S=e(63489),k=e(56131);function l(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}l.prototype=new S.baseCalendar,k(l.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalāthā’","Yawm al-Arba‘ā’","Yawm al-Khamīs","Yawm al-Jum‘a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(b){var d=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear);return this.daysInYear(d.year())===355},weekOfYear:function(b,d,s){var t=this.newDate(b,d,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(b){for(var d=0,s=1;s<=12;s++)d+=this.daysInMonth(b,s);return d},daysInMonth:function(b,d){for(var s=this._validate(b,d,this.minDay,S.local.invalidMonth).toJD()-24e5+.5,t=0,o=0;o<T.length;o++){if(T[o]>s)return T[t]-T[t-1];t++}return 30},weekDay:function(b,d,s){return this.dayOfWeek(b,d,s)!==5},toJD:function(b,d,s){var t=this._validate(b,d,s,S.local.invalidDate),o=12*(t.year()-1)+t.month()-15292;return t.day()+T[o-1]-1+24e5-.5},fromJD:function(b){for(var d=b-24e5+.5,s=0,t=0;t<T.length&&!(T[t]>d);t++)s++;var o=s+15292,r=Math.floor((o-1)/12),n=r+1,a=o-12*r,i=d-T[s-1]+1;return this.newDate(n,a,i)},isValid:function(b,d,s){var t=S.baseCalendar.prototype.isValid.apply(this,arguments);return t&&(t=(b=b.year!=null?b.year:b)>=1276&&b<=1500),t},_validate:function(b,d,s,t){var o=S.baseCalendar.prototype._validate.apply(this,arguments);if(o.year<1276||o.year>1500)throw t.replace(/\{0\}/,this.local.name);return o}}),S.calendars.ummalqura=l;var T=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},63489:function(K,z,e){var S=e(56131);function k(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function l(t,o,r,n){if(this._calendar=t,this._year=o,this._month=r,this._day=n,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function T(t,o){return"000000".substring(0,o-(t=""+t).length)+t}function b(){this.shortYearCutoff="+10"}function d(t){this.local=this.regionalOptions[t]||this.regionalOptions[""]}S(k.prototype,{instance:function(t,o){t=(t||"gregorian").toLowerCase(),o=o||"";var r=this._localCals[t+"-"+o];if(!r&&this.calendars[t]&&(r=new this.calendars[t](o),this._localCals[t+"-"+o]=r),!r)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,t);return r},newDate:function(t,o,r,n,a){return(n=(t!=null&&t.year?t.calendar():typeof n=="string"?this.instance(n,a):n)||this.instance()).newDate(t,o,r)},substituteDigits:function(t){return function(o){return(o+"").replace(/[0-9]/g,function(r){return t[r]})}},substituteChineseDigits:function(t,o){return function(r){for(var n="",a=0;r>0;){var i=r%10;n=(i===0?"":t[i]+o[a])+n,a++,r=Math.floor(r/10)}return n.indexOf(t[1]+o[1])===0&&(n=n.substr(1)),n||t[0]}}}),S(l.prototype,{newDate:function(t,o,r){return this._calendar.newDate(t??this,o,r)},year:function(t){return arguments.length===0?this._year:this.set(t,"y")},month:function(t){return arguments.length===0?this._month:this.set(t,"m")},day:function(t){return arguments.length===0?this._day:this.set(t,"d")},date:function(t,o,r){if(!this._calendar.isValid(t,o,r))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=t,this._month=o,this._day=r,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(t,o){return this._calendar.add(this,t,o)},set:function(t,o){return this._calendar.set(this,t,o)},compareTo:function(t){if(this._calendar.name!==t._calendar.name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,t._calendar.local.name);var o=this._year!==t._year?this._year-t._year:this._month!==t._month?this.monthOfYear()-t.monthOfYear():this._day-t._day;return o===0?0:o<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(t){return this._calendar.fromJD(t)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(t){return this._calendar.fromJSDate(t)},toString:function(){return(this.year()<0?"-":"")+T(Math.abs(this.year()),4)+"-"+T(this.month(),2)+"-"+T(this.day(),2)}}),S(b.prototype,{_validateLevel:0,newDate:function(t,o,r){return t==null?this.today():(t.year&&(this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),r=t.day(),o=t.month(),t=t.year()),new l(this,t,o,r))},today:function(){return this.fromJSDate(new Date)},epoch:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(t){var o=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(o.year()<0?"-":"")+T(Math.abs(o.year()),4)},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear),12},monthOfYear:function(t,o){var r=this._validate(t,o,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(t,o){var r=(o+this.firstMonth-2*this.minMonth)%this.monthsInYear(t)+this.minMonth;return this._validate(t,r,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth),r},daysInYear:function(t){var o=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return this.leapYear(o)?366:365},dayOfYear:function(t,o,r){var n=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return n.toJD()-this.newDate(n.year(),this.fromMonthOfYear(n.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(t,o,r){var n=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(n))+2)%this.daysInWeek()},extraInfo:function(t,o,r){return this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),{}},add:function(t,o,r){return this._validate(t,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate),this._correctAdd(t,this._add(t,o,r),o,r)},_add:function(t,o,r){if(this._validateLevel++,r==="d"||r==="w"){var n=t.toJD()+o*(r==="w"?this.daysInWeek():1),a=t.calendar().fromJD(n);return this._validateLevel--,[a.year(),a.month(),a.day()]}try{var i=t.year()+(r==="y"?o:0),u=t.monthOfYear()+(r==="m"?o:0);a=t.day(),r==="y"?(t.month()!==this.fromMonthOfYear(i,u)&&(u=this.newDate(i,t.month(),this.minDay).monthOfYear()),u=Math.min(u,this.monthsInYear(i)),a=Math.min(a,this.daysInMonth(i,this.fromMonthOfYear(i,u)))):r==="m"&&(function(f){for(;u<f.minMonth;)i--,u+=f.monthsInYear(i);for(var x=f.monthsInYear(i);u>x-1+f.minMonth;)i++,u-=x,x=f.monthsInYear(i)}(this),a=Math.min(a,this.daysInMonth(i,this.fromMonthOfYear(i,u))));var h=[i,this.fromMonthOfYear(i,u),a];return this._validateLevel--,h}catch(f){throw this._validateLevel--,f}},_correctAdd:function(t,o,r,n){if(!(this.hasYearZero||n!=="y"&&n!=="m"||o[0]!==0&&t.year()>0==o[0]>0)){var a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[n],i=r<0?-1:1;o=this._add(t,r*a[0]+i*a[1],a[2])}return t.date(o[0],o[1],o[2])},set:function(t,o,r){this._validate(t,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate);var n=r==="y"?o:t.year(),a=r==="m"?o:t.month(),i=r==="d"?o:t.day();return r!=="y"&&r!=="m"||(i=Math.min(i,this.daysInMonth(n,a))),t.date(n,a,i)},isValid:function(t,o,r){this._validateLevel++;var n=this.hasYearZero||t!==0;if(n){var a=this.newDate(t,o,this.minDay);n=o>=this.minMonth&&o-this.minMonth<this.monthsInYear(a)&&r>=this.minDay&&r-this.minDay<this.daysInMonth(a)}return this._validateLevel--,n},toJSDate:function(t,o,r){var n=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return s.instance().fromJD(this.toJD(n)).toJSDate()},fromJSDate:function(t){return this.fromJD(s.instance().fromJSDate(t).toJD())},_validate:function(t,o,r,n){if(t.year){if(this._validateLevel===0&&this.name!==t.calendar().name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,t.calendar().local.name);return t}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(t,o,r))throw n.replace(/\{0\}/,this.local.name);var a=this.newDate(t,o,r);return this._validateLevel--,a}catch(i){throw this._validateLevel--,i}}}),d.prototype=new b,S(d.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var o=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(t=o.year()+(o.year()<0?1:0))%4==0&&(t%100!=0||t%400==0)},weekOfYear:function(t,o,r){var n=this.newDate(t,o,r);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(t,o){var r=this._validate(t,o,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(t,o,r){return(this.dayOfWeek(t,o,r)||7)<6},toJD:function(t,o,r){var n=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);t=n.year(),o=n.month(),r=n.day(),t<0&&t++,o<3&&(o+=12,t--);var a=Math.floor(t/100),i=2-a+Math.floor(a/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(o+1))+r+i-1524.5},fromJD:function(t){var o=Math.floor(t+.5),r=Math.floor((o-186721625e-2)/36524.25),n=1524+(r=o+1+r-Math.floor(r/4)),a=Math.floor((n-122.1)/365.25),i=Math.floor(365.25*a),u=Math.floor((n-i)/30.6001),h=n-i-Math.floor(30.6001*u),f=u-(u>13.5?13:1),x=a-(f>2.5?4716:4715);return x<=0&&x--,this.newDate(x,f,h)},toJSDate:function(t,o,r){var n=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),a=new Date(n.year(),n.month()-1,n.day());return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(a.getHours()>12?a.getHours()+2:0),a},fromJSDate:function(t){return this.newDate(t.getFullYear(),t.getMonth()+1,t.getDate())}});var s=K.exports=new k;s.cdate=l,s.baseCalendar=b,s.calendars.gregorian=d},94338:function(K,z,e){var S=e(56131),k=e(63489);S(k.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),k.local=k.regionalOptions[""],S(k.cdate.prototype,{formatDate:function(l,T){return typeof l!="string"&&(T=l,l=""),this._calendar.formatDate(l||"",this,T)}}),S(k.baseCalendar.prototype,{UNIX_EPOCH:k.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:k.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(l,T,b){if(typeof l!="string"&&(b=T,T=l,l=""),!T)return"";if(T.calendar()!==this)throw k.local.invalidFormat||k.regionalOptions[""].invalidFormat;l=l||this.local.dateFormat;for(var d,s,t,o=(b=b||{}).dayNamesShort||this.local.dayNamesShort,r=b.dayNames||this.local.dayNames,n=b.monthNumbers||this.local.monthNumbers,a=b.monthNamesShort||this.local.monthNamesShort,i=b.monthNames||this.local.monthNames,u=(b.calculateWeek||this.local.calculateWeek,function(c,M){for(var _=1;w+_<l.length&&l.charAt(w+_)===c;)_++;return w+=_-1,Math.floor(_/(M||1))>1}),h=function(c,M,_,E){var L=""+M;if(u(c,E))for(;L.length<_;)L="0"+L;return L},f=this,x=function(c){return typeof n=="function"?n.call(f,c,u("m")):y(h("m",c.month(),2))},v=function(c,M){return M?typeof i=="function"?i.call(f,c):i[c.month()-f.minMonth]:typeof a=="function"?a.call(f,c):a[c.month()-f.minMonth]},g=this.local.digits,y=function(c){return b.localNumbers&&g?g(c):c},p="",m=!1,w=0;w<l.length;w++)if(m)l.charAt(w)!=="'"||u("'")?p+=l.charAt(w):m=!1;else switch(l.charAt(w)){case"d":p+=y(h("d",T.day(),2));break;case"D":p+=(d=T.dayOfWeek(),s=o,t=r,u("D")?t[d]:s[d]);break;case"o":p+=h("o",T.dayOfYear(),3);break;case"w":p+=h("w",T.weekOfYear(),2);break;case"m":p+=x(T);break;case"M":p+=v(T,u("M"));break;case"y":p+=u("y",2)?T.year():(T.year()%100<10?"0":"")+T.year()%100;break;case"Y":u("Y",2),p+=T.formatYear();break;case"J":p+=T.toJD();break;case"@":p+=(T.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":p+=(T.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":u("'")?p+="'":m=!0;break;default:p+=l.charAt(w)}return p},parseDate:function(l,T,b){if(T==null)throw k.local.invalidArguments||k.regionalOptions[""].invalidArguments;if((T=typeof T=="object"?T.toString():T+"")==="")return null;l=l||this.local.dateFormat;var d=(b=b||{}).shortYearCutoff||this.shortYearCutoff;d=typeof d!="string"?d:this.today().year()%100+parseInt(d,10);for(var s=b.dayNamesShort||this.local.dayNamesShort,t=b.dayNames||this.local.dayNames,o=b.parseMonth||this.local.parseMonth,r=b.monthNumbers||this.local.monthNumbers,n=b.monthNamesShort||this.local.monthNamesShort,a=b.monthNames||this.local.monthNames,i=-1,u=-1,h=-1,f=-1,x=-1,v=!1,g=!1,y=function(I,N){for(var R=1;L+R<l.length&&l.charAt(L+R)===I;)R++;return L+=R-1,Math.floor(R/(N||1))>1},p=function(I,N){var R=y(I,N),V=[2,3,R?4:2,R?4:2,10,11,20]["oyYJ@!".indexOf(I)+1],F=new RegExp("^-?\\d{1,"+V+"}"),D=T.substring(E).match(F);if(!D)throw(k.local.missingNumberAt||k.regionalOptions[""].missingNumberAt).replace(/\{0\}/,E);return E+=D[0].length,parseInt(D[0],10)},m=this,w=function(){if(typeof r=="function"){y("m");var I=r.call(m,T.substring(E));return E+=I.length,I}return p("m")},c=function(I,N,R,V){for(var F=y(I,V)?R:N,D=0;D<F.length;D++)if(T.substr(E,F[D].length).toLowerCase()===F[D].toLowerCase())return E+=F[D].length,D+m.minMonth;throw(k.local.unknownNameAt||k.regionalOptions[""].unknownNameAt).replace(/\{0\}/,E)},M=function(){if(typeof a=="function"){var I=y("M")?a.call(m,T.substring(E)):n.call(m,T.substring(E));return E+=I.length,I}return c("M",n,a)},_=function(){if(T.charAt(E)!==l.charAt(L))throw(k.local.unexpectedLiteralAt||k.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,E);E++},E=0,L=0;L<l.length;L++)if(g)l.charAt(L)!=="'"||y("'")?_():g=!1;else switch(l.charAt(L)){case"d":f=p("d");break;case"D":c("D",s,t);break;case"o":x=p("o");break;case"w":p("w");break;case"m":h=w();break;case"M":h=M();break;case"y":var C=L;v=!y("y",2),L=C,u=p("y",2);break;case"Y":u=p("Y",2);break;case"J":i=p("J")+.5,T.charAt(E)==="."&&(E++,p("J"));break;case"@":i=p("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":i=p("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":E=T.length;break;case"'":y("'")?_():g=!0;break;default:_()}if(E<T.length)throw k.local.unexpectedText||k.regionalOptions[""].unexpectedText;if(u===-1?u=this.today().year():u<100&&v&&(u+=d===-1?1900:this.today().year()-this.today().year()%100-(u<=d?0:100)),typeof h=="string"&&(h=o.call(this,u,h)),x>-1){h=1,f=x;for(var O=this.daysInMonth(u,h);f>O;O=this.daysInMonth(u,h))h++,f-=O}return i>-1?this.fromJD(i):this.newDate(u,h,f)},determineDate:function(l,T,b,d,s){b&&typeof b!="object"&&(s=d,d=b,b=null),typeof d!="string"&&(s=d,d="");var t=this;return T=T?T.newDate():null,l==null?T:typeof l=="string"?function(o){try{return t.parseDate(d,o,s)}catch{}for(var r=((o=o.toLowerCase()).match(/^c/)&&b?b.newDate():null)||t.today(),n=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,a=n.exec(o);a;)r.add(parseInt(a[1],10),a[2]||"d"),a=n.exec(o);return r}(l):typeof l=="number"?isNaN(l)||l===1/0||l===-1/0?T:t.today().add(l,"d"):t.newDate(l)}})},69862:function(){},40964:function(){},72077:function(K,z,e){var S=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],k=typeof globalThis>"u"?e.g:globalThis;K.exports=function(){for(var l=[],T=0;T<S.length;T++)typeof k[S[T]]=="function"&&(l[l.length]=S[T]);return l}},81684:function(K,z,e){function S(ue,ce,le){ue.prototype=ce.prototype=le,le.constructor=ue}function k(ue,ce){var le=Object.create(ue.prototype);for(var de in ce)le[de]=ce[de];return le}function l(){}e.d(z,{sX:function(){return ge},k4:function(){return Z}});var T=.7,b=1/T,d="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",o=/^#([0-9a-f]{3,8})$/,r=new RegExp("^rgb\\(".concat(d,",").concat(d,",").concat(d,"\\)$")),n=new RegExp("^rgb\\(".concat(t,",").concat(t,",").concat(t,"\\)$")),a=new RegExp("^rgba\\(".concat(d,",").concat(d,",").concat(d,",").concat(s,"\\)$")),i=new RegExp("^rgba\\(".concat(t,",").concat(t,",").concat(t,",").concat(s,"\\)$")),u=new RegExp("^hsl\\(".concat(s,",").concat(t,",").concat(t,"\\)$")),h=new RegExp("^hsla\\(".concat(s,",").concat(t,",").concat(t,",").concat(s,"\\)$")),f={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function x(){return this.rgb().formatHex()}function v(){return this.rgb().formatRgb()}function g(ue){var ce,le;return ue=(ue+"").trim().toLowerCase(),(ce=o.exec(ue))?(le=ce[1].length,ce=parseInt(ce[1],16),le===6?y(ce):le===3?new c(ce>>8&15|ce>>4&240,ce>>4&15|240&ce,(15&ce)<<4|15&ce,1):le===8?p(ce>>24&255,ce>>16&255,ce>>8&255,(255&ce)/255):le===4?p(ce>>12&15|ce>>8&240,ce>>8&15|ce>>4&240,ce>>4&15|240&ce,((15&ce)<<4|15&ce)/255):null):(ce=r.exec(ue))?new c(ce[1],ce[2],ce[3],1):(ce=n.exec(ue))?new c(255*ce[1]/100,255*ce[2]/100,255*ce[3]/100,1):(ce=a.exec(ue))?p(ce[1],ce[2],ce[3],ce[4]):(ce=i.exec(ue))?p(255*ce[1]/100,255*ce[2]/100,255*ce[3]/100,ce[4]):(ce=u.exec(ue))?O(ce[1],ce[2]/100,ce[3]/100,1):(ce=h.exec(ue))?O(ce[1],ce[2]/100,ce[3]/100,ce[4]):f.hasOwnProperty(ue)?y(f[ue]):ue==="transparent"?new c(NaN,NaN,NaN,0):null}function y(ue){return new c(ue>>16&255,ue>>8&255,255&ue,1)}function p(ue,ce,le,de){return de<=0&&(ue=ce=le=NaN),new c(ue,ce,le,de)}function m(ue){return ue instanceof l||(ue=g(ue)),ue?new c((ue=ue.rgb()).r,ue.g,ue.b,ue.opacity):new c}function w(ue,ce,le,de){return arguments.length===1?m(ue):new c(ue,ce,le,de??1)}function c(ue,ce,le,de){this.r=+ue,this.g=+ce,this.b=+le,this.opacity=+de}function M(){return"#".concat(C(this.r)).concat(C(this.g)).concat(C(this.b))}function _(){var ue=E(this.opacity);return"".concat(ue===1?"rgb(":"rgba(").concat(L(this.r),", ").concat(L(this.g),", ").concat(L(this.b)).concat(ue===1?")":", ".concat(ue,")"))}function E(ue){return isNaN(ue)?1:Math.max(0,Math.min(1,ue))}function L(ue){return Math.max(0,Math.min(255,Math.round(ue)||0))}function C(ue){return((ue=L(ue))<16?"0":"")+ue.toString(16)}function O(ue,ce,le,de){return de<=0?ue=ce=le=NaN:le<=0||le>=1?ue=ce=NaN:ce<=0&&(ue=NaN),new N(ue,ce,le,de)}function I(ue){if(ue instanceof N)return new N(ue.h,ue.s,ue.l,ue.opacity);if(ue instanceof l||(ue=g(ue)),!ue)return new N;if(ue instanceof N)return ue;var ce=(ue=ue.rgb()).r/255,le=ue.g/255,de=ue.b/255,Ce=Math.min(ce,le,de),xe=Math.max(ce,le,de),_e=NaN,we=xe-Ce,Ae=(xe+Ce)/2;return we?(_e=ce===xe?(le-de)/we+6*(le<de):le===xe?(de-ce)/we+2:(ce-le)/we+4,we/=Ae<.5?xe+Ce:2-xe-Ce,_e*=60):we=Ae>0&&Ae<1?0:_e,new N(_e,we,Ae,ue.opacity)}function N(ue,ce,le,de){this.h=+ue,this.s=+ce,this.l=+le,this.opacity=+de}function R(ue){return(ue=(ue||0)%360)<0?ue+360:ue}function V(ue){return Math.max(0,Math.min(1,ue||0))}function F(ue,ce,le){return 255*(ue<60?ce+(le-ce)*ue/60:ue<180?le:ue<240?ce+(le-ce)*(240-ue)/60:ce)}S(l,g,{copy:function(ue){return Object.assign(new this.constructor,this,ue)},displayable:function(){return this.rgb().displayable()},hex:x,formatHex:x,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return I(this).formatHsl()},formatRgb:v,toString:v}),S(c,w,k(l,{brighter:function(ue){return ue=ue==null?b:Math.pow(b,ue),new c(this.r*ue,this.g*ue,this.b*ue,this.opacity)},darker:function(ue){return ue=ue==null?T:Math.pow(T,ue),new c(this.r*ue,this.g*ue,this.b*ue,this.opacity)},rgb:function(){return this},clamp:function(){return new c(L(this.r),L(this.g),L(this.b),E(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:M,formatHex:M,formatHex8:function(){return"#".concat(C(this.r)).concat(C(this.g)).concat(C(this.b)).concat(C(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:_,toString:_})),S(N,function(ue,ce,le,de){return arguments.length===1?I(ue):new N(ue,ce,le,de??1)},k(l,{brighter:function(ue){return ue=ue==null?b:Math.pow(b,ue),new N(this.h,this.s,this.l*ue,this.opacity)},darker:function(ue){return ue=ue==null?T:Math.pow(T,ue),new N(this.h,this.s,this.l*ue,this.opacity)},rgb:function(){var ue=this.h%360+360*(this.h<0),ce=isNaN(ue)||isNaN(this.s)?0:this.s,le=this.l,de=le+(le<.5?le:1-le)*ce,Ce=2*le-de;return new c(F(ue>=240?ue-240:ue+120,Ce,de),F(ue,Ce,de),F(ue<120?ue+240:ue-120,Ce,de),this.opacity)},clamp:function(){return new N(R(this.h),V(this.s),V(this.l),E(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var ue=E(this.opacity);return"".concat(ue===1?"hsl(":"hsla(").concat(R(this.h),", ").concat(100*V(this.s),"%, ").concat(100*V(this.l),"%").concat(ue===1?")":", ".concat(ue,")"))}}));var D=function(ue){return function(){return ue}};function U(ue,ce){var le=ce-ue;return le?function(de,Ce){return function(xe){return de+xe*Ce}}(ue,le):D(isNaN(ue)?ce:ue)}var j=function ue(ce){var le=function(Ce){return(Ce=+Ce)==1?U:function(xe,_e){return _e-xe?function(we,Ae,$){return we=Math.pow(we,$),Ae=Math.pow(Ae,$)-we,$=1/$,function(oe){return Math.pow(we+oe*Ae,$)}}(xe,_e,Ce):D(isNaN(xe)?_e:xe)}}(ce);function de(Ce,xe){var _e=le((Ce=w(Ce)).r,(xe=w(xe)).r),we=le(Ce.g,xe.g),Ae=le(Ce.b,xe.b),$=U(Ce.opacity,xe.opacity);return function(oe){return Ce.r=_e(oe),Ce.g=we(oe),Ce.b=Ae(oe),Ce.opacity=$(oe),Ce+""}}return de.gamma=ue,de}(1);function J(ue,ce){var le,de=ce?ce.length:0,Ce=ue?Math.min(de,ue.length):0,xe=new Array(Ce),_e=new Array(de);for(le=0;le<Ce;++le)xe[le]=ge(ue[le],ce[le]);for(;le<de;++le)_e[le]=ce[le];return function(we){for(le=0;le<Ce;++le)_e[le]=xe[le](we);return _e}}function X(ue,ce){var le=new Date;return ue=+ue,ce=+ce,function(de){return le.setTime(ue*(1-de)+ce*de),le}}function Z(ue,ce){return ue=+ue,ce=+ce,function(le){return ue*(1-le)+ce*le}}function Y(ue){return Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ce){return typeof ce}:function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce},Y(ue)}function W(ue,ce){var le,de={},Ce={};for(le in ue!==null&&Y(ue)==="object"||(ue={}),ce!==null&&Y(ce)==="object"||(ce={}),ce)le in ue?de[le]=ge(ue[le],ce[le]):Ce[le]=ce[le];return function(xe){for(le in de)Ce[le]=de[le](xe);return Ce}}var Q=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ne=new RegExp(Q.source,"g");function re(ue,ce){var le,de,Ce,xe=Q.lastIndex=ne.lastIndex=0,_e=-1,we=[],Ae=[];for(ue+="",ce+="";(le=Q.exec(ue))&&(de=ne.exec(ce));)(Ce=de.index)>xe&&(Ce=ce.slice(xe,Ce),we[_e]?we[_e]+=Ce:we[++_e]=Ce),(le=le[0])===(de=de[0])?we[_e]?we[_e]+=de:we[++_e]=de:(we[++_e]=null,Ae.push({i:_e,x:Z(le,de)})),xe=ne.lastIndex;return xe<ce.length&&(Ce=ce.slice(xe),we[_e]?we[_e]+=Ce:we[++_e]=Ce),we.length<2?Ae[0]?function($){return function(oe){return $(oe)+""}}(Ae[0].x):function($){return function(){return $}}(ce):(ce=Ae.length,function($){for(var oe,pe=0;pe<ce;++pe)we[(oe=Ae[pe]).i]=oe.x($);return we.join("")})}function ie(ue,ce){ce||(ce=[]);var le,de=ue?Math.min(ce.length,ue.length):0,Ce=ce.slice();return function(xe){for(le=0;le<de;++le)Ce[le]=ue[le]*(1-xe)+ce[le]*xe;return Ce}}function se(ue){return se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ce){return typeof ce}:function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce},se(ue)}function ge(ue,ce){var le,de,Ce=se(ce);return ce==null||Ce==="boolean"?D(ce):(Ce==="number"?Z:Ce==="string"?(le=g(ce))?(ce=le,j):re:ce instanceof g?j:ce instanceof Date?X:(de=ce,!ArrayBuffer.isView(de)||de instanceof DataView?Array.isArray(ce)?J:typeof ce.valueOf!="function"&&typeof ce.toString!="function"||isNaN(ce)?W:Z:ie))(ue,ce)}},40402:function(K){K.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},83794:function(K){K.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},96209:function(K){K.exports=JSON.parse('["normal","italic","oblique"]')},15659:function(K){K.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},38732:function(K){K.exports=JSON.parse('["inherit","initial","unset"]')},41901:function(K){K.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},bu={};function As(K){var z=bu[K];if(z!==void 0)return z.exports;var e=bu[K]={exports:{}};return Yc[K].call(e.exports,e,e.exports,As),e.exports}return As.n=function(K){var z=K&&K.__esModule?function(){return K.default}:function(){return K};return As.d(z,{a:z}),z},As.d=function(K,z){for(var e in z)As.o(z,e)&&!As.o(K,e)&&Object.defineProperty(K,e,{enumerable:!0,get:z[e]})},As.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),As.o=function(K,z){return Object.prototype.hasOwnProperty.call(K,z)},As.r=function(K){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(K,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(K,"__esModule",{value:!0})},As(27909)}()})})(Lh);var pd=Lh.exports;const vd=hd(pd);export{vd as P};
