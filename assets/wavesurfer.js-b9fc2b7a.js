import{g as ae}from"./colormap-422ff84b.js";var $={exports:{}};/*!
 * wavesurfer.js 6.6.3 (2023-04-04)
 * https://wavesurfer-js.org
 * @license BSD-3-Clause
 */(function(ee,oe){(function(X,U){ee.exports=U()})(self,()=>(()=>{var J={"./src/drawer.canvasentry.js":(D,h,O)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var g=_(O("./src/util/style.js")),M=_(O("./src/util/get-id.js"));function _(p){return p&&p.__esModule?p:{default:p}}function T(p){"@babel/helpers - typeof";return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},T(p)}function W(p,c){if(!(p instanceof c))throw new TypeError("Cannot call a class as a function")}function B(p,c){for(var v=0;v<c.length;v++){var d=c[v];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(p,C(d.key),d)}}function b(p,c,v){return c&&B(p.prototype,c),v&&B(p,v),Object.defineProperty(p,"prototype",{writable:!1}),p}function C(p){var c=E(p,"string");return T(c)==="symbol"?c:String(c)}function E(p,c){if(T(p)!=="object"||p===null)return p;var v=p[Symbol.toPrimitive];if(v!==void 0){var d=v.call(p,c||"default");if(T(d)!=="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(p)}var R=function(){function p(){W(this,p),this.wave=null,this.waveCtx=null,this.progress=null,this.progressCtx=null,this.start=0,this.end=1,this.id=(0,M.default)(typeof this.constructor.name<"u"?this.constructor.name.toLowerCase()+"_":"canvasentry_"),this.canvasContextAttributes={}}return b(p,[{key:"initWave",value:function(v){this.wave=v,this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)}},{key:"initProgress",value:function(v){this.progress=v,this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)}},{key:"updateDimensions",value:function(v,d,A,w){this.start=this.wave.offsetLeft/d||0,this.end=this.start+v/d,this.wave.width=A,this.wave.height=w;var k={width:v+"px"};(0,g.default)(this.wave,k),this.hasProgressCanvas&&(this.progress.width=A,this.progress.height=w,(0,g.default)(this.progress,k))}},{key:"clearWave",value:function(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height),this.hasProgressCanvas&&this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)}},{key:"setFillStyles",value:function(v,d){this.waveCtx.fillStyle=this.getFillStyle(this.waveCtx,v),this.hasProgressCanvas&&(this.progressCtx.fillStyle=this.getFillStyle(this.progressCtx,d))}},{key:"getFillStyle",value:function(v,d){if(typeof d=="string"||d instanceof CanvasGradient)return d;var A=v.createLinearGradient(0,0,0,v.canvas.height);return d.forEach(function(w,k){return A.addColorStop(k/d.length,w)}),A}},{key:"applyCanvasTransforms",value:function(v){v&&(this.waveCtx.setTransform(0,1,1,0,0,0),this.hasProgressCanvas&&this.progressCtx.setTransform(0,1,1,0,0,0))}},{key:"fillRects",value:function(v,d,A,w,k){this.fillRectToContext(this.waveCtx,v,d,A,w,k),this.hasProgressCanvas&&this.fillRectToContext(this.progressCtx,v,d,A,w,k)}},{key:"fillRectToContext",value:function(v,d,A,w,k,y){v&&(y?this.drawRoundedRect(v,d,A,w,k,y):v.fillRect(d,A,w,k))}},{key:"drawRoundedRect",value:function(v,d,A,w,k,y){k!==0&&(k<0&&(k*=-1,A-=k),v.beginPath(),v.moveTo(d+y,A),v.lineTo(d+w-y,A),v.quadraticCurveTo(d+w,A,d+w,A+y),v.lineTo(d+w,A+k-y),v.quadraticCurveTo(d+w,A+k,d+w-y,A+k),v.lineTo(d+y,A+k),v.quadraticCurveTo(d,A+k,d,A+k-y),v.lineTo(d,A+y),v.quadraticCurveTo(d,A,d+y,A),v.closePath(),v.fill())}},{key:"drawLines",value:function(v,d,A,w,k,y){this.drawLineToContext(this.waveCtx,v,d,A,w,k,y),this.hasProgressCanvas&&this.drawLineToContext(this.progressCtx,v,d,A,w,k,y)}},{key:"drawLineToContext",value:function(v,d,A,w,k,y,f){if(v){var m=d.length/2,u=Math.round(m*this.start),n=Math.round(m*this.end)+1,i=u,o=n,r=this.wave.width/(o-i-1),t=w+k,s=A/w;v.beginPath(),v.moveTo((i-u)*r,t),v.lineTo((i-u)*r,t-Math.round((d[2*i]||0)/s));var a,e,l;for(a=i;a<o;a++)e=d[2*a]||0,l=Math.round(e/s),v.lineTo((a-u)*r+this.halfPixel,t-l);var P=o-1;for(P;P>=i;P--)e=d[2*P+1]||0,l=Math.round(e/s),v.lineTo((P-u)*r+this.halfPixel,t-l);v.lineTo((i-u)*r,t-Math.round((d[2*i+1]||0)/s)),v.closePath(),v.fill()}}},{key:"destroy",value:function(){this.waveCtx=null,this.wave=null,this.progressCtx=null,this.progress=null}},{key:"getImage",value:function(v,d,A){var w=this;if(A==="blob")return new Promise(function(k){w.wave.toBlob(k,v,d)});if(A==="dataURL")return this.wave.toDataURL(v,d)}}]),p}();h.default=R,D.exports=h.default},"./src/drawer.js":(D,h,O)=>{function g(y){"@babel/helpers - typeof";return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},g(y)}Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var M=T(O("./src/util/index.js"));function _(y){if(typeof WeakMap!="function")return null;var f=new WeakMap,m=new WeakMap;return(_=function(n){return n?m:f})(y)}function T(y,f){if(!f&&y&&y.__esModule)return y;if(y===null||g(y)!=="object"&&typeof y!="function")return{default:y};var m=_(f);if(m&&m.has(y))return m.get(y);var u={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in y)if(i!=="default"&&Object.prototype.hasOwnProperty.call(y,i)){var o=n?Object.getOwnPropertyDescriptor(y,i):null;o&&(o.get||o.set)?Object.defineProperty(u,i,o):u[i]=y[i]}return u.default=y,m&&m.set(y,u),u}function W(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}function B(y,f){for(var m=0;m<f.length;m++){var u=f[m];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(y,C(u.key),u)}}function b(y,f,m){return f&&B(y.prototype,f),m&&B(y,m),Object.defineProperty(y,"prototype",{writable:!1}),y}function C(y){var f=E(y,"string");return g(f)==="symbol"?f:String(f)}function E(y,f){if(g(y)!=="object"||y===null)return y;var m=y[Symbol.toPrimitive];if(m!==void 0){var u=m.call(y,f||"default");if(g(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(y)}function R(y,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(f&&f.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),f&&p(y,f)}function p(y,f){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,n){return u.__proto__=n,u},p(y,f)}function c(y){var f=A();return function(){var u=w(y),n;if(f){var i=w(this).constructor;n=Reflect.construct(u,arguments,i)}else n=u.apply(this,arguments);return v(this,n)}}function v(y,f){if(f&&(g(f)==="object"||typeof f=="function"))return f;if(f!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(y)}function d(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function A(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w(y){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},w(y)}var k=function(y){R(m,y);var f=c(m);function m(u,n){var i;return W(this,m),i=f.call(this),i.container=M.withOrientation(u,n.vertical),i.params=n,i.width=0,i.height=n.height*i.params.pixelRatio,i.lastPos=0,i.wrapper=null,i}return b(m,[{key:"style",value:function(n,i){return M.style(n,i)}},{key:"createWrapper",value:function(){this.wrapper=M.withOrientation(this.container.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",cursor:this.params.hideCursor?"none":"auto",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function(n,i){!i&&n.preventDefault();var o=M.withOrientation(n.targetTouches?n.targetTouches[0]:n,this.params.vertical).clientX,r=this.wrapper.getBoundingClientRect(),t=this.width,s=this.getWidth(),a=this.getProgressPixels(r,o),e;return!this.params.fillParent&&t<s?e=a*(this.params.pixelRatio/t)||0:e=(a+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,M.clamp(e,0,1)}},{key:"getProgressPixels",value:function(n,i){return this.params.rtl?n.right-i:i-n.left}},{key:"setupWrapperEvents",value:function(){var n=this;this.wrapper.addEventListener("click",function(i){var o=M.withOrientation(i,n.params.vertical),r=n.wrapper.offsetHeight-n.wrapper.clientHeight;if(r!==0){var t=n.wrapper.getBoundingClientRect();if(o.clientY>=t.bottom-r)return}n.params.interact&&n.fireEvent("click",i,n.handleEvent(i))}),this.wrapper.addEventListener("dblclick",function(i){n.params.interact&&n.fireEvent("dblclick",i,n.handleEvent(i))}),this.wrapper.addEventListener("scroll",function(i){return n.fireEvent("scroll",i)})}},{key:"drawPeaks",value:function(n,i,o,r){this.setWidth(i)||this.clearWave(),this.params.barWidth?this.drawBars(n,0,o,r):this.drawWave(n,0,o,r)}},{key:"resetScroll",value:function(){this.wrapper!==null&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(n){var i=this.wrapper.scrollWidth*n;this.recenterOnPosition(i,!0)}},{key:"recenterOnPosition",value:function(n,i){var o=this.wrapper.scrollLeft,r=~~(this.wrapper.clientWidth/2),t=this.wrapper.scrollWidth-this.wrapper.clientWidth,s=n-r,a=s-o;if(t!=0){if(!i&&-r<=a&&a<r){var e=this.params.autoCenterRate;e/=r,e*=t,a=Math.max(-e,Math.min(e,a)),s=o+a}s=Math.max(0,Math.min(t,s)),s!=o&&(this.wrapper.scrollLeft=s)}}},{key:"getScrollX",value:function(){var n=0;if(this.wrapper){var i=this.params.pixelRatio;if(n=Math.round(this.wrapper.scrollLeft*i),this.params.scrollParent){var o=~~(this.wrapper.scrollWidth*i-this.getWidth());n=Math.min(o,Math.max(0,n))}}return n}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(n){if(this.width==n)return!1;if(this.width=n,this.params.fillParent||this.params.scrollParent)this.style(this.wrapper,{width:""});else{var i=~~(this.width/this.params.pixelRatio)+"px";this.style(this.wrapper,{width:i})}return this.updateSize(),!0}},{key:"setHeight",value:function(n){return n==this.height?!1:(this.height=n,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function(n){var i=1/this.params.pixelRatio,o=Math.round(n*this.width)*i;if(o<this.lastPos||o-this.lastPos>=i){if(this.lastPos=o,this.params.scrollParent&&this.params.autoCenter){var r=~~(this.wrapper.scrollWidth*n);this.recenterOnPosition(r,this.params.autoCenterImmediately)}this.updateProgress(o)}}},{key:"destroy",value:function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container.domElement&&this.container.removeChild(this.wrapper.domElement),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(n,i,o,r){}},{key:"drawWave",value:function(n,i,o,r){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(n){}}]),m}(M.Observer);h.default=k,D.exports=h.default},"./src/drawer.multicanvas.js":(D,h,O)=>{function g(u){"@babel/helpers - typeof";return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},g(u)}Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var M=b(O("./src/drawer.js")),_=B(O("./src/util/index.js")),T=b(O("./src/drawer.canvasentry.js"));function W(u){if(typeof WeakMap!="function")return null;var n=new WeakMap,i=new WeakMap;return(W=function(r){return r?i:n})(u)}function B(u,n){if(!n&&u&&u.__esModule)return u;if(u===null||g(u)!=="object"&&typeof u!="function")return{default:u};var i=W(n);if(i&&i.has(u))return i.get(u);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in u)if(t!=="default"&&Object.prototype.hasOwnProperty.call(u,t)){var s=r?Object.getOwnPropertyDescriptor(u,t):null;s&&(s.get||s.set)?Object.defineProperty(o,t,s):o[t]=u[t]}return o.default=u,i&&i.set(u,o),o}function b(u){return u&&u.__esModule?u:{default:u}}function C(u,n){if(!(u instanceof n))throw new TypeError("Cannot call a class as a function")}function E(u,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(u,p(o.key),o)}}function R(u,n,i){return n&&E(u.prototype,n),i&&E(u,i),Object.defineProperty(u,"prototype",{writable:!1}),u}function p(u){var n=c(u,"string");return g(n)==="symbol"?n:String(n)}function c(u,n){if(g(u)!=="object"||u===null)return u;var i=u[Symbol.toPrimitive];if(i!==void 0){var o=i.call(u,n||"default");if(g(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(u)}function v(u,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(n&&n.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),Object.defineProperty(u,"prototype",{writable:!1}),n&&d(u,n)}function d(u,n){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,r){return o.__proto__=r,o},d(u,n)}function A(u){var n=y();return function(){var o=f(u),r;if(n){var t=f(this).constructor;r=Reflect.construct(o,arguments,t)}else r=o.apply(this,arguments);return w(this,r)}}function w(u,n){if(n&&(g(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k(u)}function k(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function f(u){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},f(u)}var m=function(u){v(i,u);var n=A(i);function i(o,r){var t;return C(this,i),t=n.call(this,o,r),t.maxCanvasWidth=r.maxCanvasWidth,t.maxCanvasElementWidth=Math.round(r.maxCanvasWidth/r.pixelRatio),t.hasProgressCanvas=r.waveColor!=r.progressColor,t.halfPixel=.5/r.pixelRatio,t.canvases=[],t.progressWave=null,t.EntryClass=T.default,t.canvasContextAttributes=r.drawingContextAttributes,t.overlap=2*Math.ceil(r.pixelRatio/2),t.barRadius=r.barRadius||0,t.vertical=r.vertical,t}return R(i,[{key:"init",value:function(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function(){this.progressWave=_.withOrientation(this.wrapper.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.progressWave,{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"}),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var r=this,t=Math.round(this.width/this.params.pixelRatio),s=Math.ceil(t/(this.maxCanvasElementWidth+this.overlap));this.canvases.length<s;)this.addCanvas();for(;this.canvases.length>s;)this.removeCanvas();var a=this.maxCanvasWidth+this.overlap,e=this.canvases.length-1;this.canvases.forEach(function(l,P){P==e&&(a=r.width-r.maxCanvasWidth*e),r.updateDimensions(l,a,r.height),l.clearWave()})}},{key:"addCanvas",value:function(){var r=new this.EntryClass;r.canvasContextAttributes=this.canvasContextAttributes,r.hasProgressCanvas=this.hasProgressCanvas,r.halfPixel=this.halfPixel;var t=this.maxCanvasElementWidth*this.canvases.length,s=_.withOrientation(this.wrapper.appendChild(document.createElement("canvas")),this.params.vertical);if(this.style(s,{position:"absolute",zIndex:2,left:t+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}),r.initWave(s),this.hasProgressCanvas){var a=_.withOrientation(this.progressWave.appendChild(document.createElement("canvas")),this.params.vertical);this.style(a,{position:"absolute",left:t+"px",top:0,bottom:0,height:"100%"}),r.initProgress(a)}this.canvases.push(r)}},{key:"removeCanvas",value:function(){var r=this.canvases[this.canvases.length-1];r.wave.parentElement.removeChild(r.wave.domElement),this.hasProgressCanvas&&r.progress.parentElement.removeChild(r.progress.domElement),r&&(r.destroy(),r=null),this.canvases.pop()}},{key:"updateDimensions",value:function(r,t,s){var a=Math.round(t/this.params.pixelRatio),e=Math.round(this.width/this.params.pixelRatio);r.updateDimensions(a,e,t,s),this.style(this.progressWave,{display:"block"})}},{key:"clearWave",value:function(){var r=this;_.frame(function(){r.canvases.forEach(function(t){return t.clearWave()})})()}},{key:"drawBars",value:function(r,t,s,a){var e=this;return this.prepareDraw(r,t,s,a,function(l){var P=l.absmax,x=l.hasMinVals;l.height;var S=l.offsetY,j=l.halfH,L=l.peaks,V=l.channelIndex;if(s!==void 0){var N=x?2:1,H=L.length/N,I=e.params.barWidth*e.params.pixelRatio,z=e.params.barGap===null?Math.max(e.params.pixelRatio,~~(I/2)):Math.max(e.params.pixelRatio,e.params.barGap*e.params.pixelRatio),F=I+z,q=H/e.width,re=s,ne=a,G=re;for(G;G<ne;G+=F){var Y=0,K=Math.floor(G*q)*N,ie=Math.floor((G+F)*q)*N;do{var Z=Math.abs(L[K]);Z>Y&&(Y=Z),K+=N}while(K<ie);var Q=Math.round(Y/P*j);e.params.barMinHeight&&(Q=Math.max(Q,e.params.barMinHeight)),e.fillRect(G+e.halfPixel,j-Q+S,I+e.halfPixel,Q*2,e.barRadius,V)}}})}},{key:"drawWave",value:function(r,t,s,a){var e=this;return this.prepareDraw(r,t,s,a,function(l){var P=l.absmax,x=l.hasMinVals;l.height;var S=l.offsetY,j=l.halfH,L=l.peaks,V=l.channelIndex;if(!x){var N=[],H=L.length,I=0;for(I;I<H;I++)N[2*I]=L[I],N[2*I+1]=-L[I];L=N}s!==void 0&&e.drawLine(L,P,j,S,s,a,V),e.fillRect(0,j+S-e.halfPixel,e.width,e.halfPixel,e.barRadius,V)})}},{key:"drawLine",value:function(r,t,s,a,e,l,P){var x=this,S=this.params.splitChannelsOptions.channelColors[P]||{},j=S.waveColor,L=S.progressColor;this.canvases.forEach(function(V,N){x.setFillStyles(V,j,L),x.applyCanvasTransforms(V,x.params.vertical),V.drawLines(r,t,s,a,e,l)})}},{key:"fillRect",value:function(r,t,s,a,e,l){var P=Math.floor(r/this.maxCanvasWidth),x=Math.min(Math.ceil((r+s)/this.maxCanvasWidth)+1,this.canvases.length),S=P;for(S;S<x;S++){var j=this.canvases[S],L=S*this.maxCanvasWidth,V={x1:Math.max(r,S*this.maxCanvasWidth),y1:t,x2:Math.min(r+s,S*this.maxCanvasWidth+j.wave.width),y2:t+a};if(V.x1<V.x2){var N=this.params.splitChannelsOptions.channelColors[l]||{},H=N.waveColor,I=N.progressColor;this.setFillStyles(j,H,I),this.applyCanvasTransforms(j,this.params.vertical),j.fillRects(V.x1-L,V.y1,V.x2-V.x1,V.y2-V.y1,e)}}}},{key:"hideChannel",value:function(r){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(r)}},{key:"prepareDraw",value:function(r,t,s,a,e,l,P){var x=this;return _.frame(function(){if(r[0]instanceof Array){var S=r;if(x.params.splitChannels){var j=S.filter(function(F,q){return!x.hideChannel(q)});x.params.splitChannelsOptions.overlay||x.setHeight(Math.max(j.length,1)*x.params.height*x.params.pixelRatio);var L;return x.params.splitChannelsOptions&&x.params.splitChannelsOptions.relativeNormalization&&(L=_.max(S.map(function(F){return _.absMax(F)}))),S.forEach(function(F,q){return x.prepareDraw(F,q,s,a,e,j.indexOf(F),L)})}r=S[0]}if(!x.hideChannel(t)){var V=1/x.params.barHeight;x.params.normalize&&(V=P===void 0?_.absMax(r):P);var N=[].some.call(r,function(F){return F<0}),H=x.params.height*x.params.pixelRatio,I=H/2,z=H*l||0;return x.params.splitChannelsOptions&&x.params.splitChannelsOptions.overlay&&(z=0),e({absmax:V,hasMinVals:N,height:H,offsetY:z,halfH:I,peaks:r,channelIndex:t})}})()}},{key:"setFillStyles",value:function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.params.waveColor,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.params.progressColor;r.setFillStyles(t,s)}},{key:"applyCanvasTransforms",value:function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r.applyCanvasTransforms(t)}},{key:"getImage",value:function(r,t,s){if(s==="blob")return Promise.all(this.canvases.map(function(e){return e.getImage(r,t,s)}));if(s==="dataURL"){var a=this.canvases.map(function(e){return e.getImage(r,t,s)});return a.length>1?a:a[0]}}},{key:"updateProgress",value:function(r){this.style(this.progressWave,{width:r+"px"})}}]),i}(M.default);h.default=m,D.exports=h.default},"./src/mediaelement-webaudio.js":(D,h,O)=>{function g(f){"@babel/helpers - typeof";return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},g(f)}Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var M=_(O("./src/mediaelement.js"));function _(f){return f&&f.__esModule?f:{default:f}}function T(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}function W(f,m){for(var u=0;u<m.length;u++){var n=m[u];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(f,b(n.key),n)}}function B(f,m,u){return m&&W(f.prototype,m),u&&W(f,u),Object.defineProperty(f,"prototype",{writable:!1}),f}function b(f){var m=C(f,"string");return g(m)==="symbol"?m:String(m)}function C(f,m){if(g(f)!=="object"||f===null)return f;var u=f[Symbol.toPrimitive];if(u!==void 0){var n=u.call(f,m||"default");if(g(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(f)}function E(){return typeof Reflect<"u"&&Reflect.get?E=Reflect.get.bind():E=function(m,u,n){var i=R(m,u);if(i){var o=Object.getOwnPropertyDescriptor(i,u);return o.get?o.get.call(arguments.length<3?m:n):o.value}},E.apply(this,arguments)}function R(f,m){for(;!Object.prototype.hasOwnProperty.call(f,m)&&(f=k(f),f!==null););return f}function p(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),Object.defineProperty(f,"prototype",{writable:!1}),m&&c(f,m)}function c(f,m){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},c(f,m)}function v(f){var m=w();return function(){var n=k(f),i;if(m){var o=k(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return d(this,i)}}function d(f,m){if(m&&(g(m)==="object"||typeof m=="function"))return m;if(m!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A(f)}function A(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function w(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function k(f){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(u){return u.__proto__||Object.getPrototypeOf(u)},k(f)}var y=function(f){p(u,f);var m=v(u);function u(n){var i;return T(this,u),i=m.call(this,n),i.params=n,i.sourceMediaElement=null,i}return B(u,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer(),this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode()}},{key:"_load",value:function(i,o,r){E(k(u.prototype),"_load",this).call(this,i,o,r),this.createMediaElementSource(i)}},{key:"createMediaElementSource",value:function(i){this.sourceMediaElement=this.ac.createMediaElementSource(i),this.sourceMediaElement.connect(this.analyser)}},{key:"play",value:function(i,o){return this.resumeAudioContext(),E(k(u.prototype),"play",this).call(this,i,o)}},{key:"destroy",value:function(){E(k(u.prototype),"destroy",this).call(this),this.destroyWebAudio()}}]),u}(M.default);h.default=y,D.exports=h.default},"./src/mediaelement.js":(D,h,O)=>{function g(n){"@babel/helpers - typeof";return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},g(n)}Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var M=B(O("./src/webaudio.js")),_=W(O("./src/util/index.js"));function T(n){if(typeof WeakMap!="function")return null;var i=new WeakMap,o=new WeakMap;return(T=function(t){return t?o:i})(n)}function W(n,i){if(!i&&n&&n.__esModule)return n;if(n===null||g(n)!=="object"&&typeof n!="function")return{default:n};var o=T(i);if(o&&o.has(n))return o.get(n);var r={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in n)if(s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)){var a=t?Object.getOwnPropertyDescriptor(n,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=n[s]}return r.default=n,o&&o.set(n,r),r}function B(n){return n&&n.__esModule?n:{default:n}}function b(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function C(n,i){for(var o=0;o<i.length;o++){var r=i[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,R(r.key),r)}}function E(n,i,o){return i&&C(n.prototype,i),o&&C(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n}function R(n){var i=p(n,"string");return g(i)==="symbol"?i:String(i)}function p(n,i){if(g(n)!=="object"||n===null)return n;var o=n[Symbol.toPrimitive];if(o!==void 0){var r=o.call(n,i||"default");if(g(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(n)}function c(){return typeof Reflect<"u"&&Reflect.get?c=Reflect.get.bind():c=function(i,o,r){var t=v(i,o);if(t){var s=Object.getOwnPropertyDescriptor(t,o);return s.get?s.get.call(arguments.length<3?i:r):s.value}},c.apply(this,arguments)}function v(n,i){for(;!Object.prototype.hasOwnProperty.call(n,i)&&(n=m(n),n!==null););return n}function d(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&A(n,i)}function A(n,i){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,t){return r.__proto__=t,r},A(n,i)}function w(n){var i=f();return function(){var r=m(n),t;if(i){var s=m(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return k(this,t)}}function k(n,i){if(i&&(g(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y(n)}function y(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function f(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function m(n){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},m(n)}var u=function(n){d(o,n);var i=w(o);function o(r){var t;return b(this,o),t=i.call(this,r),t.params=r,t.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0},t.mediaType=r.mediaType.toLowerCase(),t.elementPosition=r.elementPosition,t.peaks=null,t.playbackRate=1,t.volume=1,t.isMuted=!1,t.buffer=null,t.onPlayEnd=null,t.mediaListeners={},t}return E(o,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"_setupMediaListeners",value:function(){var t=this;this.mediaListeners.error=function(){t.fireEvent("error","Error loading media element")},this.mediaListeners.waiting=function(){t.fireEvent("waiting")},this.mediaListeners.canplay=function(){t.fireEvent("canplay")},this.mediaListeners.ended=function(){t.fireEvent("finish")},this.mediaListeners.play=function(){t.fireEvent("play")},this.mediaListeners.pause=function(){t.fireEvent("pause")},this.mediaListeners.seeked=function(s){t.fireEvent("seek")},this.mediaListeners.volumechange=function(s){t.isMuted=t.media.muted,t.isMuted?t.volume=0:t.volume=t.media.volume,t.fireEvent("volume")},Object.keys(this.mediaListeners).forEach(function(s){t.media.removeEventListener(s,t.mediaListeners[s]),t.media.addEventListener(s,t.mediaListeners[s])})}},{key:"createTimer",value:function(){var t=this,s=function a(){t.isPaused()||(t.fireEvent("audioprocess",t.getCurrentTime()),_.frame(a)())};this.on("play",s),this.on("pause",function(){t.fireEvent("audioprocess",t.getCurrentTime())})}},{key:"load",value:function(t,s,a,e){var l=document.createElement(this.mediaType);l.controls=this.params.mediaControls,l.autoplay=this.params.autoplay||!1,l.preload=e??"auto",l.src=t,l.style.width="100%";var P=s.querySelector(this.mediaType);P&&s.removeChild(P),s.appendChild(l),this._load(l,a,e)}},{key:"loadElt",value:function(t,s){t.controls=this.params.mediaControls,t.autoplay=this.params.autoplay||!1,this._load(t,s,t.preload)}},{key:"_load",value:function(t,s,a){if(!(t instanceof HTMLMediaElement)||typeof t.addEventListener>"u")throw new Error("media parameter is not a valid media element");typeof t.load=="function"&&!(s&&a=="none")&&t.load(),this.media=t,this._setupMediaListeners(),this.peaks=s,this.onPlayEnd=null,this.buffer=null,this.isMuted=t.muted,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;var t=(this.buffer||this.media).duration;return t>=1/0&&(t=this.media.seekable.end(0)),t}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(t){this.playbackRate=t||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(t){t!=null&&!isNaN(t)&&(this.media.currentTime=t),this.clearPlayEnd()}},{key:"play",value:function(t,s){this.seekTo(t);var a=this.media.play();return s&&this.setPlayEnd(s),a}},{key:"pause",value:function(){var t;return this.media&&(t=this.media.pause()),this.clearPlayEnd(),t}},{key:"setPlayEnd",value:function(t){var s=this;this.clearPlayEnd(),this._onPlayEnd=function(a){a>=t&&(s.pause(),s.seekTo(t))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function(t,s,a){return this.buffer?c(m(o.prototype),"getPeaks",this).call(this,t,s,a):this.peaks||[]}},{key:"setSinkId",value:function(t){return t?this.media.setSinkId?this.media.setSinkId(t):Promise.reject(new Error("setSinkId is not supported in your browser")):Promise.reject(new Error("Invalid deviceId: "+t))}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(t){this.volume=t,this.media.volume!==this.volume&&(this.media.volume=this.volume)}},{key:"setMute",value:function(t){this.isMuted=this.media.muted=t}},{key:"destroy",value:function(){var t=this;this.pause(),this.unAll(),this.destroyed=!0,Object.keys(this.mediaListeners).forEach(function(s){t.media&&t.media.removeEventListener(s,t.mediaListeners[s])}),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}]),o}(M.default);h.default=u,D.exports=h.default},"./src/peakcache.js":(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;function O(b){"@babel/helpers - typeof";return O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},O(b)}function g(b,C){if(!(b instanceof C))throw new TypeError("Cannot call a class as a function")}function M(b,C){for(var E=0;E<C.length;E++){var R=C[E];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(b,T(R.key),R)}}function _(b,C,E){return C&&M(b.prototype,C),E&&M(b,E),Object.defineProperty(b,"prototype",{writable:!1}),b}function T(b){var C=W(b,"string");return O(C)==="symbol"?C:String(C)}function W(b,C){if(O(b)!=="object"||b===null)return b;var E=b[Symbol.toPrimitive];if(E!==void 0){var R=E.call(b,C||"default");if(O(R)!=="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(b)}var B=function(){function b(){g(this,b),this.clearPeakCache()}return _(b,[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(E,R,p){E!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=E);for(var c=[],v=0;v<this.peakCacheRanges.length&&this.peakCacheRanges[v]<R;)v++;for(v%2==0&&c.push(R);v<this.peakCacheRanges.length&&this.peakCacheRanges[v]<=p;)c.push(this.peakCacheRanges[v]),v++;v%2==0&&c.push(p),c=c.filter(function(A,w,k){return w==0?A!=k[w+1]:w==k.length-1?A!=k[w-1]:A!=k[w-1]&&A!=k[w+1]}),this.peakCacheRanges=this.peakCacheRanges.concat(c),this.peakCacheRanges=this.peakCacheRanges.sort(function(A,w){return A-w}).filter(function(A,w,k){return w==0?A!=k[w+1]:w==k.length-1?A!=k[w-1]:A!=k[w-1]&&A!=k[w+1]});var d=[];for(v=0;v<c.length;v+=2)d.push([c[v],c[v+1]]);return d}},{key:"getCacheRanges",value:function(){var E=[],R;for(R=0;R<this.peakCacheRanges.length;R+=2)E.push([this.peakCacheRanges[R],this.peakCacheRanges[R+1]]);return E}}]),b}();h.default=B,D.exports=h.default},"./src/util/absMax.js":(D,h,O)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=T;var g=_(O("./src/util/max.js")),M=_(O("./src/util/min.js"));function _(W){return W&&W.__esModule?W:{default:W}}function T(W){var B=(0,g.default)(W),b=(0,M.default)(W);return-b>B?-b:B}D.exports=h.default},"./src/util/clamp.js":(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=O;function O(g,M,_){return Math.min(Math.max(M,g),_)}D.exports=h.default},"./src/util/fetch.js":(D,h,O)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=R;var g=M(O("./src/util/observer.js"));function M(p){return p&&p.__esModule?p:{default:p}}function _(p){"@babel/helpers - typeof";return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},_(p)}function T(p,c){if(!(p instanceof c))throw new TypeError("Cannot call a class as a function")}function W(p,c){for(var v=0;v<c.length;v++){var d=c[v];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(p,b(d.key),d)}}function B(p,c,v){return c&&W(p.prototype,c),v&&W(p,v),Object.defineProperty(p,"prototype",{writable:!1}),p}function b(p){var c=C(p,"string");return _(c)==="symbol"?c:String(c)}function C(p,c){if(_(p)!=="object"||p===null)return p;var v=p[Symbol.toPrimitive];if(v!==void 0){var d=v.call(p,c||"default");if(_(d)!=="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(p)}var E=function(){function p(c,v,d){T(this,p),this.instance=c,this.instance._reader=d.body.getReader(),this.total=parseInt(v,10),this.loaded=0}return B(p,[{key:"start",value:function(v){var d=this,A=function w(){d.instance._reader.read().then(function(k){var y=k.done,f=k.value;if(y){d.total===0&&d.instance.onProgress.call(d.instance,{loaded:d.loaded,total:d.total,lengthComputable:!1}),v.close();return}d.loaded+=f.byteLength,d.instance.onProgress.call(d.instance,{loaded:d.loaded,total:d.total,lengthComputable:d.total!==0}),v.enqueue(f),w()}).catch(function(k){v.error(k)})};A()}}]),p}();function R(p){if(p){if(!p.url)throw new Error("fetch url missing")}else throw new Error("fetch options missing");var c=new g.default,v=new Headers,d=new Request(p.url);c.controller=new AbortController,p&&p.requestHeaders&&p.requestHeaders.forEach(function(k){v.append(k.key,k.value)});var A=p.responseType||"json",w={method:p.method||"GET",headers:v,mode:p.mode||"cors",credentials:p.credentials||"same-origin",cache:p.cache||"default",redirect:p.redirect||"follow",referrer:p.referrer||"client",signal:c.controller.signal};return fetch(d,w).then(function(k){c.response=k;var y=!0;k.body||(y=!1);var f=k.headers.get("content-length");return f===null&&(y=!1),y?(c.onProgress=function(m){c.fireEvent("progress",m)},new Response(new ReadableStream(new E(c,f,k)),w)):k}).then(function(k){var y;if(k.ok)switch(A){case"arraybuffer":return k.arrayBuffer();case"json":return k.json();case"blob":return k.blob();case"text":return k.text();default:y="Unknown responseType: "+A;break}throw y||(y="HTTP error status: "+k.status),new Error(y)}).then(function(k){c.fireEvent("success",k)}).catch(function(k){c.fireEvent("error",k)}),c.fetchRequest=d,c}D.exports=h.default},"./src/util/frame.js":(D,h,O)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=_;var g=M(O("./src/util/request-animation-frame.js"));function M(T){return T&&T.__esModule?T:{default:T}}function _(T){return function(){for(var W=arguments.length,B=new Array(W),b=0;b<W;b++)B[b]=arguments[b];return(0,g.default)(function(){return T.apply(void 0,B)})}}D.exports=h.default},"./src/util/get-id.js":(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=O;function O(g){return g===void 0&&(g="wavesurfer_"),g+Math.random().toString(32).substring(2)}D.exports=h.default},"./src/util/index.js":(D,h,O)=>{Object.defineProperty(h,"__esModule",{value:!0}),Object.defineProperty(h,"Observer",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(h,"absMax",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(h,"clamp",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(h,"debounce",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(h,"fetchFile",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(h,"frame",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(h,"getId",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(h,"ignoreSilenceMode",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(h,"max",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(h,"min",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(h,"preventClick",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(h,"requestAnimationFrame",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(h,"style",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(h,"withOrientation",{enumerable:!0,get:function(){return v.default}});var g=A(O("./src/util/get-id.js")),M=A(O("./src/util/max.js")),_=A(O("./src/util/min.js")),T=A(O("./src/util/absMax.js")),W=A(O("./src/util/observer.js")),B=A(O("./src/util/style.js")),b=A(O("./src/util/request-animation-frame.js")),C=A(O("./src/util/frame.js")),E=A(O("./node_modules/debounce/index.js")),R=A(O("./src/util/prevent-click.js")),p=A(O("./src/util/fetch.js")),c=A(O("./src/util/clamp.js")),v=A(O("./src/util/orientation.js")),d=A(O("./src/util/silence-mode.js"));function A(w){return w&&w.__esModule?w:{default:w}}},"./src/util/max.js":(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=O;function O(g){var M=-1/0;return Object.keys(g).forEach(function(_){g[_]>M&&(M=g[_])}),M}D.exports=h.default},"./src/util/min.js":(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=O;function O(g){var M=1/0;return Object.keys(g).forEach(function(_){g[_]<M&&(M=g[_])}),M}D.exports=h.default},"./src/util/observer.js":(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;function O(b){"@babel/helpers - typeof";return O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},O(b)}function g(b,C){if(!(b instanceof C))throw new TypeError("Cannot call a class as a function")}function M(b,C){for(var E=0;E<C.length;E++){var R=C[E];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(b,T(R.key),R)}}function _(b,C,E){return C&&M(b.prototype,C),E&&M(b,E),Object.defineProperty(b,"prototype",{writable:!1}),b}function T(b){var C=W(b,"string");return O(C)==="symbol"?C:String(C)}function W(b,C){if(O(b)!=="object"||b===null)return b;var E=b[Symbol.toPrimitive];if(E!==void 0){var R=E.call(b,C||"default");if(O(R)!=="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(b)}var B=function(){function b(){g(this,b),this._disabledEventEmissions=[],this.handlers=null}return _(b,[{key:"on",value:function(E,R){var p=this;this.handlers||(this.handlers={});var c=this.handlers[E];return c||(c=this.handlers[E]=[]),c.push(R),{name:E,callback:R,un:function(d,A){return p.un(d,A)}}}},{key:"un",value:function(E,R){if(this.handlers){var p=this.handlers[E],c;if(p)if(R)for(c=p.length-1;c>=0;c--)p[c]==R&&p.splice(c,1);else p.length=0}}},{key:"unAll",value:function(){this.handlers=null}},{key:"once",value:function(E,R){var p=this,c=function v(){for(var d=arguments.length,A=new Array(d),w=0;w<d;w++)A[w]=arguments[w];R.apply(p,A),setTimeout(function(){p.un(E,v)},0)};return this.on(E,c)}},{key:"setDisabledEventEmissions",value:function(E){this._disabledEventEmissions=E}},{key:"_isDisabledEventEmission",value:function(E){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(E)}},{key:"fireEvent",value:function(E){for(var R=arguments.length,p=new Array(R>1?R-1:0),c=1;c<R;c++)p[c-1]=arguments[c];if(!(!this.handlers||this._isDisabledEventEmission(E))){var v=this.handlers[E];v&&v.forEach(function(d){d.apply(void 0,p)})}}}]),b}();h.default=B,D.exports=h.default},"./src/util/orientation.js":(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=_;var O={width:"height",height:"width",overflowX:"overflowY",overflowY:"overflowX",clientWidth:"clientHeight",clientHeight:"clientWidth",clientX:"clientY",clientY:"clientX",scrollWidth:"scrollHeight",scrollLeft:"scrollTop",offsetLeft:"offsetTop",offsetTop:"offsetLeft",offsetHeight:"offsetWidth",offsetWidth:"offsetHeight",left:"top",right:"bottom",top:"left",bottom:"right",borderRightStyle:"borderBottomStyle",borderRightWidth:"borderBottomWidth",borderRightColor:"borderBottomColor"};function g(T,W){return Object.prototype.hasOwnProperty.call(O,T)&&W?O[T]:T}var M=Symbol("isProxy");function _(T,W){return T[M]?T:new Proxy(T,{get:function(b,C,E){if(C===M)return!0;if(C==="domElement")return b;if(C==="style")return _(b.style,W);if(C==="canvas")return _(b.canvas,W);if(C==="getBoundingClientRect")return function(){return _(b.getBoundingClientRect.apply(b,arguments),W)};if(C==="getContext")return function(){return _(b.getContext.apply(b,arguments),W)};var R=b[g(C,W)];return typeof R=="function"?R.bind(b):R},set:function(b,C,E){return b[g(C,W)]=E,!0}})}D.exports=h.default},"./src/util/prevent-click.js":(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=g;function O(M){M.stopPropagation(),document.body.removeEventListener("click",O,!0)}function g(M){document.body.addEventListener("click",O,!0)}D.exports=h.default},"./src/util/request-animation-frame.js":(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var O=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(g,M){return setTimeout(g,1e3/60)}).bind(window);h.default=O,D.exports=h.default},"./src/util/silence-mode.js":(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=O;function O(){var g=new AudioContext,M=g.createBufferSource();M.buffer=g.createBuffer(1,1,44100),M.connect(g.destination),M.start();var _="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",T=document.createElement("div");T.innerHTML='<audio x-webkit-airplay="deny"></audio>';var W=T.children.item(0);W.src=_,W.preload="auto",W.type="audio/mpeg",W.disableRemotePlayback=!0,W.play(),W.remove(),T.remove()}D.exports=h.default},"./src/util/style.js":(D,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=O;function O(g,M){return Object.keys(M).forEach(function(_){g.style[_]!==M[_]&&(g.style[_]=M[_])}),g}D.exports=h.default},"./src/wavesurfer.js":(D,h,O)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var g=E(O("./src/util/index.js")),M=b(O("./src/drawer.multicanvas.js")),_=b(O("./src/webaudio.js")),T=b(O("./src/mediaelement.js")),W=b(O("./src/peakcache.js")),B=b(O("./src/mediaelement-webaudio.js"));function b(r){return r&&r.__esModule?r:{default:r}}function C(r){if(typeof WeakMap!="function")return null;var t=new WeakMap,s=new WeakMap;return(C=function(e){return e?s:t})(r)}function E(r,t){if(!t&&r&&r.__esModule)return r;if(r===null||y(r)!=="object"&&typeof r!="function")return{default:r};var s=C(t);if(s&&s.has(r))return s.get(r);var a={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in r)if(l!=="default"&&Object.prototype.hasOwnProperty.call(r,l)){var P=e?Object.getOwnPropertyDescriptor(r,l):null;P&&(P.get||P.set)?Object.defineProperty(a,l,P):a[l]=r[l]}return a.default=r,s&&s.set(r,a),a}function R(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&p(r,t)}function p(r,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,e){return a.__proto__=e,a},p(r,t)}function c(r){var t=A();return function(){var a=w(r),e;if(t){var l=w(this).constructor;e=Reflect.construct(a,arguments,l)}else e=a.apply(this,arguments);return v(this,e)}}function v(r,t){if(t&&(y(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(r)}function d(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function A(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w(r){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},w(r)}function k(r,t,s){return t=n(t),t in r?Object.defineProperty(r,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[t]=s,r}function y(r){"@babel/helpers - typeof";return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(r)}function f(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function m(r,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,n(a.key),a)}}function u(r,t,s){return t&&m(r.prototype,t),s&&m(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r}function n(r){var t=i(r,"string");return y(t)==="symbol"?t:String(t)}function i(r,t){if(y(r)!=="object"||r===null)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var a=s.call(r,t||"default");if(y(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var o=function(r){R(s,r);var t=c(s);function s(a){var e;if(f(this,s),e=t.call(this),k(d(e),"defaultParams",{audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backend:"WebAudio",backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,drawingContextAttributes:{desynchronized:!1},duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,hideCursor:!1,ignoreSilenceMode:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:M.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,splitChannelsOptions:{overlay:!1,channelColors:{},filterChannels:[],relativeNormalization:!1,splitDragSelection:!1},vertical:!1,waveColor:"#999",xhr:{}}),k(d(e),"backends",{MediaElement:T.default,WebAudio:_.default,MediaElementWebAudio:B.default}),k(d(e),"util",g),e.params=Object.assign({},e.defaultParams,a),e.params.splitChannelsOptions=Object.assign({},e.defaultParams.splitChannelsOptions,a.splitChannelsOptions),e.container=typeof a.container=="string"?document.querySelector(e.params.container):e.params.container,!e.container)throw new Error("Container element not found");if(e.params.mediaContainer==null?e.mediaContainer=e.container:typeof e.params.mediaContainer=="string"?e.mediaContainer=document.querySelector(e.params.mediaContainer):e.mediaContainer=e.params.mediaContainer,!e.mediaContainer)throw new Error("Media Container element not found");if(e.params.maxCanvasWidth<=1)throw new Error("maxCanvasWidth must be greater than 1");if(e.params.maxCanvasWidth%2==1)throw new Error("maxCanvasWidth must be an even number");if(e.params.rtl===!0&&(e.params.vertical===!0?g.style(e.container,{transform:"rotateX(180deg)"}):g.style(e.container,{transform:"rotateY(180deg)"})),e.params.backgroundColor&&e.setBackgroundColor(e.params.backgroundColor),e.savedVolume=0,e.isMuted=!1,e.tmpEvents=[],e.currentRequest=null,e.arraybuffer=null,e.drawer=null,e.backend=null,e.peakCache=null,typeof e.params.renderer!="function")throw new Error("Renderer parameter is invalid");e.Drawer=e.params.renderer,e.params.backend=="AudioElement"&&(e.params.backend="MediaElement"),(e.params.backend=="WebAudio"||e.params.backend==="MediaElementWebAudio")&&!_.default.prototype.supportsWebAudio.call(null)&&(e.params.backend="MediaElement"),e.Backend=e.backends[e.params.backend],e.initialisedPluginList={},e.isDestroyed=!1,e.isReady=!1;var l=0;return e._onResize=g.debounce(function(){e.drawer.wrapper&&l!=e.drawer.wrapper.clientWidth&&!e.params.scrollParent&&(l=e.drawer.wrapper.clientWidth,l&&e.drawer.fireEvent("redraw"))},typeof e.params.responsive=="number"?e.params.responsive:100),v(e,d(e))}return u(s,[{key:"init",value:function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function(e){var l=this;return e.forEach(function(P){return l.addPlugin(P)}),e.forEach(function(P){P.deferInit||l.initPlugin(P.name)}),this.fireEvent("plugins-registered",e),this}},{key:"getActivePlugins",value:function(){return this.initialisedPluginList}},{key:"addPlugin",value:function(e){var l=this;if(!e.name)throw new Error("Plugin does not have a name!");if(!e.instance)throw new Error("Plugin ".concat(e.name," does not have an instance property!"));e.staticProps&&Object.keys(e.staticProps).forEach(function(S){l[S]=e.staticProps[S]});var P=e.instance,x=Object.getOwnPropertyNames(g.Observer.prototype);return x.forEach(function(S){P.prototype[S]=g.Observer.prototype[S]}),this[e.name]=new P(e.params||{},this),this.fireEvent("plugin-added",e.name),this}},{key:"initPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet!"));return this.initialisedPluginList[e]&&this.destroyPlugin(e),this[e].init(),this.initialisedPluginList[e]=!0,this.fireEvent("plugin-initialised",e),this}},{key:"destroyPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[e])throw new Error("Plugin ".concat(e," is not active and cannot be destroyed!"));if(typeof this[e].destroy!="function")throw new Error("Plugin ".concat(e," does not have a destroy function!"));return this[e].destroy(),delete this.initialisedPluginList[e],this.fireEvent("plugin-destroyed",e),this}},{key:"destroyAllPlugins",value:function(){var e=this;Object.keys(this.initialisedPluginList).forEach(function(l){return e.destroyPlugin(l)})}},{key:"createDrawer",value:function(){var e=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),this.params.responsive!==!1&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",function(){e.drawBuffer(),e.drawer.progress(e.backend.getPlayedPercents())}),this.drawer.on("click",function(l,P){setTimeout(function(){return e.seekTo(P)},0)}),this.drawer.on("scroll",function(l){e.params.partialRender&&e.drawBuffer(),e.fireEvent("scroll",l)})}},{key:"createBackend",value:function(){var e=this;this.backend&&this.backend.destroy(),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",function(){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("finish")}),this.backend.on("play",function(){return e.fireEvent("play")}),this.backend.on("pause",function(){return e.fireEvent("pause")}),this.backend.on("audioprocess",function(l){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("audioprocess",l)}),(this.params.backend==="MediaElement"||this.params.backend==="MediaElementWebAudio")&&(this.backend.on("seek",function(){e.drawer.progress(e.backend.getPlayedPercents())}),this.backend.on("volume",function(){var l=e.getVolume();e.fireEvent("volume",l),e.backend.isMuted!==e.isMuted&&(e.isMuted=e.backend.isMuted,e.fireEvent("mute",e.isMuted))}))}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new W.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function(e){e>=this.getDuration()?this.seekTo(1):this.seekTo(e/this.getDuration())}},{key:"play",value:function(e,l){var P=this;return this.params.ignoreSilenceMode&&g.ignoreSilenceMode(),this.fireEvent("interaction",function(){return P.play(e,l)}),this.backend.play(e,l)}},{key:"setPlayEnd",value:function(e){this.backend.setPlayEnd(e)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(e){this.skip(-e||-this.params.skipLength)}},{key:"skipForward",value:function(e){this.skip(e||this.params.skipLength)}},{key:"skip",value:function(e){var l=this.getDuration()||1,P=this.getCurrentTime()||0;P=Math.max(0,Math.min(l,P+(e||0))),this.seekAndCenter(P/l)}},{key:"seekAndCenter",value:function(e){this.seekTo(e),this.drawer.recenter(e)}},{key:"seekTo",value:function(e){var l=this;if(typeof e!="number"||!isFinite(e)||e<0||e>1)throw new Error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",function(){return l.seekTo(e)});var P=this.params.backend==="WebAudio",x=this.backend.isPaused();P&&!x&&this.backend.pause();var S=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(e*this.getDuration()),this.drawer.progress(e),P&&!x&&this.backend.play(),this.params.scrollParent=S,this.fireEvent("seek",e)}},{key:"stop",value:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function(e){return this.backend.setSinkId(e)}},{key:"setVolume",value:function(e){if(this.isMuted===!0){this.savedVolume=e;return}this.backend.setVolume(e),this.fireEvent("volume",e)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(e){this.backend.setPlaybackRate(e)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(e){if(e===this.isMuted){this.fireEvent("mute",this.isMuted);return}this.backend.setMute?(this.backend.setMute(e),this.isMuted=e):e?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume)),this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[e]?this.params.splitChannelsOptions.channelColors[e].waveColor:this.params.waveColor}},{key:"setWaveColor",value:function(e){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.params.splitChannelsOptions.channelColors[l]?this.params.splitChannelsOptions.channelColors[l].waveColor=e:this.params.waveColor=e,this.drawBuffer()}},{key:"getProgressColor",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[e]?this.params.splitChannelsOptions.channelColors[e].progressColor:this.params.progressColor}},{key:"setProgressColor",value:function(e,l){this.params.splitChannelsOptions.channelColors[l]?this.params.splitChannelsOptions.channelColors[l].progressColor=e:this.params.progressColor=e,this.drawBuffer()}},{key:"getBackgroundColor",value:function(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function(e){this.params.backgroundColor=e,g.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(e){this.params.cursorColor=e,this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(e){this.params.height=e,this.drawer.setHeight(e*this.params.pixelRatio),this.drawBuffer()}},{key:"setFilteredChannels",value:function(e){this.params.splitChannelsOptions.filterChannels=e,this.drawBuffer()}},{key:"drawBuffer",value:function(){var e=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),l=this.drawer.getWidth(),P=e,x=0,S=Math.max(x+l,P);this.params.fillParent&&(!this.params.scrollParent||e<l)&&(P=l,x=0,S=P);var j;if(this.params.partialRender){var L=this.peakCache.addRangeToPeakCache(P,x,S),V;for(V=0;V<L.length;V++)j=this.backend.getPeaks(P,L[V][0],L[V][1]),this.drawer.drawPeaks(j,P,L[V][0],L[V][1])}else j=this.backend.getPeaks(P,x,S),this.drawer.drawPeaks(j,P,x,S);this.fireEvent("redraw",j,P)}},{key:"zoom",value:function(e){e?(this.params.minPxPerSec=e,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",e)}},{key:"loadArrayBuffer",value:function(e){var l=this;this.decodeArrayBuffer(e,function(P){l.isDestroyed||l.loadDecodedBuffer(P)})}},{key:"loadDecodedBuffer",value:function(e){this.backend.load(e),this.drawBuffer(),this.isReady=!0,this.fireEvent("ready")}},{key:"loadBlob",value:function(e){var l=this,P=new FileReader;P.addEventListener("progress",function(x){return l.onProgress(x)}),P.addEventListener("load",function(x){return l.loadArrayBuffer(x.target.result)}),P.addEventListener("error",function(){return l.fireEvent("error","Error reading file")}),P.readAsArrayBuffer(e),this.empty()}},{key:"load",value:function(e,l,P,x){if(!e)throw new Error("url parameter cannot be empty");if(this.empty(),P){var S={"Preload is not 'auto', 'none' or 'metadata'":["auto","metadata","none"].indexOf(P)===-1,"Peaks are not provided":!l,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":["MediaElement","MediaElementWebAudio"].indexOf(this.params.backend)===-1,"Url is not of type string":typeof e!="string"},j=Object.keys(S).filter(function(L){return S[L]});j.length&&(console.warn(`Preload parameter of wavesurfer.load will be ignored because:
	- `+j.join(`
	- `)),P=null)}switch(this.params.backend==="WebAudio"&&e instanceof HTMLMediaElement&&(e=e.src),this.params.backend){case"WebAudio":return this.loadBuffer(e,l,x);case"MediaElement":case"MediaElementWebAudio":return this.loadMediaElement(e,l,P,x)}}},{key:"loadBuffer",value:function(e,l,P){var x=this,S=function(L){return L&&x.tmpEvents.push(x.once("ready",L)),x.getArrayBuffer(e,function(V){return x.loadArrayBuffer(V)})};if(l)this.backend.setPeaks(l,P),this.drawBuffer(),this.fireEvent("waveform-ready"),this.tmpEvents.push(this.once("interaction",S));else return S()}},{key:"loadMediaElement",value:function(e,l,P,x){var S=this,j=e;if(typeof e=="string")this.backend.load(j,this.mediaContainer,l,P);else{var L=e;this.backend.loadElt(L,l),j=L.src}this.tmpEvents.push(this.backend.once("canplay",function(){S.backend.destroyed||(S.drawBuffer(),S.isReady=!0,S.fireEvent("ready"))}),this.backend.once("error",function(V){return S.fireEvent("error",V)})),l&&(this.backend.setPeaks(l,x),this.drawBuffer(),this.fireEvent("waveform-ready")),(!l||this.params.forceDecode)&&this.backend.supportsWebAudio()&&this.getArrayBuffer(j,function(V){S.decodeArrayBuffer(V,function(N){S.backend.buffer=N,S.backend.setPeaks(null),S.drawBuffer(),S.fireEvent("waveform-ready")})})}},{key:"decodeArrayBuffer",value:function(e,l){var P=this;this.isDestroyed||(this.arraybuffer=e,this.backend.decodeArrayBuffer(e,function(x){!P.isDestroyed&&P.arraybuffer==e&&(l(x),P.arraybuffer=null)},function(){return P.fireEvent("error","Error decoding audiobuffer")}))}},{key:"getArrayBuffer",value:function(e,l){var P=this,x=Object.assign({url:e,responseType:"arraybuffer"},this.params.xhr),S=g.fetchFile(x);return this.currentRequest=S,this.tmpEvents.push(S.on("progress",function(j){P.onProgress(j)}),S.on("success",function(j){l(j),P.currentRequest=null}),S.on("error",function(j){P.fireEvent("error",j),P.currentRequest=null})),S}},{key:"onProgress",value:function(e){var l;e.lengthComputable?l=e.loaded/e.total:l=e.loaded/(e.loaded+1e6),this.fireEvent("loading",Math.round(l*100),e.target)}},{key:"exportPCM",value:function(e,l,P,x,S){e=e||1024,x=x||0,l=l||1e4,P=P||!1;var j=this.backend.getPeaks(e,x,S),L=[].map.call(j,function(V){return Math.round(V*l)/l});return new Promise(function(V,N){if(!P){var H=new Blob([JSON.stringify(L)],{type:"application/json;charset=utf-8"}),I=URL.createObjectURL(H);window.open(I),URL.revokeObjectURL(I)}V(L)})}},{key:"exportImage",value:function(e,l,P){return e||(e="image/png"),l||(l=1),P||(P="dataURL"),this.drawer.getImage(e,l,P)}},{key:"cancelAjax",value:function(){this.currentRequest&&this.currentRequest.controller&&(this.currentRequest._reader&&this.currentRequest._reader.cancel().catch(function(e){}),this.currentRequest.controller.abort(),this.currentRequest=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach(function(e){return e.un()})}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),this.params.responsive!==!1&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend&&(this.backend.destroy(),this.backend=null),this.drawer&&this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}],[{key:"create",value:function(e){var l=new s(e);return l.init()}}]),s}(g.Observer);h.default=o,k(o,"VERSION","6.6.3"),k(o,"util",g),D.exports=h.default},"./src/webaudio.js":(D,h,O)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var g=_(O("./src/util/index.js"));function M(n){if(typeof WeakMap!="function")return null;var i=new WeakMap,o=new WeakMap;return(M=function(t){return t?o:i})(n)}function _(n,i){if(!i&&n&&n.__esModule)return n;if(n===null||T(n)!=="object"&&typeof n!="function")return{default:n};var o=M(i);if(o&&o.has(n))return o.get(n);var r={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in n)if(s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)){var a=t?Object.getOwnPropertyDescriptor(n,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=n[s]}return r.default=n,o&&o.set(n,r),r}function T(n){"@babel/helpers - typeof";return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},T(n)}function W(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function B(n,i){for(var o=0;o<i.length;o++){var r=i[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,w(r.key),r)}}function b(n,i,o){return i&&B(n.prototype,i),o&&B(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n}function C(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&E(n,i)}function E(n,i){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,t){return r.__proto__=t,r},E(n,i)}function R(n){var i=v();return function(){var r=d(n),t;if(i){var s=d(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return p(this,t)}}function p(n,i){if(i&&(T(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c(n)}function c(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function d(n){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},d(n)}function A(n,i,o){return i=w(i),i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n}function w(n){var i=k(n,"string");return T(i)==="symbol"?i:String(i)}function k(n,i){if(T(n)!=="object"||n===null)return n;var o=n[Symbol.toPrimitive];if(o!==void 0){var r=o.call(n,i||"default");if(T(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(n)}var y="playing",f="paused",m="finished",u=function(n){C(o,n);var i=R(o);function o(r){var t,s,a;return W(this,o),a=i.call(this),A(c(a),"audioContext",null),A(c(a),"stateBehaviors",(t={},A(t,y,{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var l=this.getDuration();return this.getCurrentTime()/l||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),A(t,f,{init:function(){},getPlayedPercents:function(){var l=this.getDuration();return this.getCurrentTime()/l||0},getCurrentTime:function(){return this.startPosition}}),A(t,m,{init:function(){this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),t)),a.params=r,a.ac=r.audioContext||(a.supportsWebAudio()?a.getAudioContext():{}),a.lastPlay=a.ac.currentTime,a.startPosition=0,a.scheduledPause=null,a.states=(s={},A(s,y,Object.create(a.stateBehaviors[y])),A(s,f,Object.create(a.stateBehaviors[f])),A(s,m,Object.create(a.stateBehaviors[m])),s),a.buffer=null,a.filters=[],a.gainNode=null,a.mergedPeaks=null,a.offlineAc=null,a.peaks=null,a.playbackRate=1,a.analyser=null,a.scriptNode=null,a.source=null,a.splitPeaks=[],a.state=null,a.explicitDuration=r.duration,a.sinkStreamDestination=null,a.sinkAudioElement=null,a.destroyed=!1,a}return b(o,[{key:"supportsWebAudio",value:function(){return!!(window.AudioContext||window.webkitAudioContext)}},{key:"getAudioContext",value:function(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(t){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,t)),window.WaveSurferOfflineAudioContext}},{key:"init",value:function(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(f),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach(function(t){t&&t.disconnect()}),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(t){this.state!==this.states[t]&&(this.state=this.states[t],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];this.setFilters(s)}},{key:"setFilters",value:function(t){this.disconnectFilters(),t&&t.length&&(this.filters=t,this.analyser.disconnect(),t.reduce(function(s,a){return s.connect(a),a},this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.params.audioScriptProcessor&&(this.scriptNode=this.params.audioScriptProcessor,this.scriptNode.connect(this.ac.destination))}},{key:"addOnAudioProcess",value:function(){var t=this,s=function a(){var e=t.getCurrentTime();e>=t.getDuration()&&t.state!==t.states[m]?(t.setState(m),t.fireEvent("pause")):e>=t.scheduledPause&&t.state!==t.states[f]?t.pause():t.state===t.states[y]&&(t.fireEvent("audioprocess",e),g.frame(a)())};s()}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(t){return t?(this.sinkAudioElement||(this.sinkAudioElement=new window.Audio,this.sinkAudioElement.autoplay=!0),this.sinkAudioElement.setSinkId?(this.sinkStreamDestination||(this.sinkStreamDestination=this.ac.createMediaStreamDestination()),this.gainNode.disconnect(),this.gainNode.connect(this.sinkStreamDestination),this.sinkAudioElement.srcObject=this.sinkStreamDestination.stream,this.sinkAudioElement.setSinkId(t)):Promise.reject(new Error("setSinkId is not supported in your browser"))):Promise.reject(new Error("Invalid deviceId: "+t))}},{key:"setVolume",value:function(t){this.gainNode.gain.setValueAtTime(t,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(t,s,a){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),"webkitAudioContext"in window?this.offlineAc.decodeAudioData(t,function(e){return s(e)},a):this.offlineAc.decodeAudioData(t).then(function(e){return s(e)}).catch(function(e){return a(e)})}},{key:"setPeaks",value:function(t,s){s!=null&&(this.explicitDuration=s),this.peaks=t}},{key:"setLength",value:function(t){if(!(this.mergedPeaks&&t==2*this.mergedPeaks.length-1+2)){this.splitPeaks=[],this.mergedPeaks=[];var s=this.buffer?this.buffer.numberOfChannels:1,a;for(a=0;a<s;a++)this.splitPeaks[a]=[],this.splitPeaks[a][2*(t-1)]=0,this.splitPeaks[a][2*(t-1)+1]=0;this.mergedPeaks[2*(t-1)]=0,this.mergedPeaks[2*(t-1)+1]=0}}},{key:"getPeaks",value:function(t,s,a){if(this.peaks)return this.peaks;if(!this.buffer)return[];if(s=s||0,a=a||t-1,this.setLength(t),!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;if(!this.buffer.length){var e=this.createBuffer(1,4096,this.sampleRate);this.buffer=e.buffer}var l=this.buffer.length/t,P=~~(l/10)||1,x=this.buffer.numberOfChannels,S;for(S=0;S<x;S++){var j=this.splitPeaks[S],L=this.buffer.getChannelData(S),V=void 0;for(V=s;V<=a;V++){var N=~~(V*l),H=~~(N+l),I=L[N],z=I,F=void 0;for(F=N;F<H;F+=P){var q=L[F];q>z&&(z=q),q<I&&(I=q)}j[2*V]=z,j[2*V+1]=I,(S==0||z>this.mergedPeaks[2*V])&&(this.mergedPeaks[2*V]=z),(S==0||I<this.mergedPeaks[2*V+1])&&(this.mergedPeaks[2*V+1]=I)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroyWebAudio",value:function(){this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode&&this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&(typeof this.ac.close=="function"&&this.ac.state!="closed"&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null),this.sinkStreamDestination&&(this.sinkAudioElement.pause(),this.sinkAudioElement.srcObject=null,this.sinkStreamDestination.disconnect(),this.sinkStreamDestination=null)}},{key:"destroy",value:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.destroyed=!0,this.destroyWebAudio()}},{key:"load",value:function(t){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=t,this.createSource()}},{key:"createSource",value:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.setPlaybackRate(this.playbackRate),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"resumeAudioContext",value:function(){this.ac.state=="suspended"&&this.ac.resume&&this.ac.resume()}},{key:"isPaused",value:function(){return this.state!==this.states[y]}},{key:"getDuration",value:function(){return this.explicitDuration?this.explicitDuration:this.buffer?this.buffer.duration:0}},{key:"seekTo",value:function(t,s){if(this.buffer)return this.scheduledPause=null,t==null&&(t=this.getCurrentTime(),t>=this.getDuration()&&(t=0)),s==null&&(s=this.getDuration()),this.startPosition=t,this.lastPlay=this.ac.currentTime,this.state===this.states[m]&&this.setState(f),{start:t,end:s}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(t,s){if(this.buffer){this.createSource();var a=this.seekTo(t,s);t=a.start,s=a.end,this.scheduledPause=s,this.source.start(0,t),this.resumeAudioContext(),this.setState(y),this.fireEvent("play")}}},{key:"pause",value:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime();try{this.source&&this.source.stop(0)}catch{}this.setState(f),this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(t){this.playbackRate=t||1,this.source&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime)}},{key:"setPlayEnd",value:function(t){this.scheduledPause=t}}]),o}(g.Observer);h.default=u,D.exports=h.default},"./node_modules/debounce/index.js":D=>{function h(O,g,M){var _,T,W,B,b;g==null&&(g=100);function C(){var R=Date.now()-B;R<g&&R>=0?_=setTimeout(C,g-R):(_=null,M||(b=O.apply(W,T),W=T=null))}var E=function(){W=this,T=arguments,B=Date.now();var R=M&&!_;return _||(_=setTimeout(C,g)),R&&(b=O.apply(W,T),W=T=null),b};return E.clear=function(){_&&(clearTimeout(_),_=null)},E.flush=function(){_&&(b=O.apply(W,T),W=T=null,clearTimeout(_),_=null)},E}h.debounce=h,D.exports=h}},X={};function U(D){var h=X[D];if(h!==void 0)return h.exports;var O=X[D]={exports:{}};return J[D](O,O.exports,U),O.exports}var te=U("./src/wavesurfer.js");return te})())})($);var se=$.exports;const le=ae(se);export{le as W};
