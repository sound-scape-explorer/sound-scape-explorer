import{g as wd}from"./chroma-js-b6626927.js";var Nh={exports:{}};(function(jh,kd){/*! For license information please see plotly.min.js.LICENSE.txt */(function(nf,Cu){jh.exports=Cu()})(self,function(){return function(){var nf={98847:function(Q,z,t){var S=t(71828),k={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var l in k){var T=l.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");S.addStyleRule(T,k[l])}},98222:function(Q,z,t){Q.exports=t(82887)},27206:function(Q,z,t){Q.exports=t(60822)},59893:function(Q,z,t){Q.exports=t(23381)},5224:function(Q,z,t){Q.exports=t(83832)},59509:function(Q,z,t){Q.exports=t(72201)},75557:function(Q,z,t){Q.exports=t(91815)},40338:function(Q,z,t){Q.exports=t(21462)},35080:function(Q,z,t){Q.exports=t(51319)},61396:function(Q,z,t){Q.exports=t(57516)},40549:function(Q,z,t){Q.exports=t(98128)},49866:function(Q,z,t){Q.exports=t(99442)},36089:function(Q,z,t){Q.exports=t(93740)},19548:function(Q,z,t){Q.exports=t(8729)},35831:function(Q,z,t){Q.exports=t(93814)},61039:function(Q,z,t){Q.exports=t(14382)},97040:function(Q,z,t){Q.exports=t(51759)},77986:function(Q,z,t){Q.exports=t(10421)},24296:function(Q,z,t){Q.exports=t(43102)},58872:function(Q,z,t){Q.exports=t(92165)},29626:function(Q,z,t){Q.exports=t(3325)},65591:function(Q,z,t){Q.exports=t(36071)},69738:function(Q,z,t){Q.exports=t(43905)},92650:function(Q,z,t){Q.exports=t(35902)},35630:function(Q,z,t){Q.exports=t(69816)},73434:function(Q,z,t){Q.exports=t(94507)},27909:function(Q,z,t){var S=t(19548);S.register([t(27206),t(5224),t(58872),t(65591),t(69738),t(92650),t(49866),t(25743),t(6197),t(97040),t(85461),t(73434),t(54201),t(81299),t(47645),t(35630),t(77986),t(83043),t(93005),t(96881),t(4534),t(50581),t(40549),t(77900),t(47582),t(35080),t(21641),t(17280),t(5861),t(29626),t(10021),t(65317),t(96268),t(61396),t(35831),t(16122),t(46163),t(40344),t(40338),t(48131),t(36089),t(55334),t(75557),t(19440),t(99488),t(59893),t(97393),t(98222),t(61039),t(24296),t(66398),t(59509)]),Q.exports=S},46163:function(Q,z,t){Q.exports=t(15154)},96881:function(Q,z,t){Q.exports=t(64943)},50581:function(Q,z,t){Q.exports=t(21164)},55334:function(Q,z,t){Q.exports=t(54186)},65317:function(Q,z,t){Q.exports=t(94873)},10021:function(Q,z,t){Q.exports=t(67618)},54201:function(Q,z,t){Q.exports=t(58810)},5861:function(Q,z,t){Q.exports=t(20593)},16122:function(Q,z,t){Q.exports=t(29396)},83043:function(Q,z,t){Q.exports=t(13551)},48131:function(Q,z,t){Q.exports=t(46858)},47582:function(Q,z,t){Q.exports=t(17988)},21641:function(Q,z,t){Q.exports=t(68868)},96268:function(Q,z,t){Q.exports=t(20467)},19440:function(Q,z,t){Q.exports=t(91271)},99488:function(Q,z,t){Q.exports=t(21461)},97393:function(Q,z,t){Q.exports=t(85956)},25743:function(Q,z,t){Q.exports=t(52979)},66398:function(Q,z,t){Q.exports=t(32275)},17280:function(Q,z,t){Q.exports=t(6419)},77900:function(Q,z,t){Q.exports=t(61510)},81299:function(Q,z,t){Q.exports=t(87619)},93005:function(Q,z,t){Q.exports=t(93601)},40344:function(Q,z,t){Q.exports=t(96595)},47645:function(Q,z,t){Q.exports=t(70954)},6197:function(Q,z,t){Q.exports=t(47462)},4534:function(Q,z,t){Q.exports=t(17659)},85461:function(Q,z,t){Q.exports=t(19990)},82884:function(Q){Q.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},50215:function(Q,z,t){var S=t(82884),k=t(41940),l=t(85555),T=t(44467).templatedArray;t(24695),Q.exports=T("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:S.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:S.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",l.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",l.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",l.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",l.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:k({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},3749:function(Q,z,t){var S=t(71828),k=t(89298),l=t(92605).draw;function T(d){var s=d._fullLayout;S.filterVisible(s.annotations).forEach(function(e){var i=k.getFromId(d,e.xref),r=k.getFromId(d,e.yref),n=k.getRefType(e.xref),a=k.getRefType(e.yref);e._extremes={},n==="range"&&b(e,i),a==="range"&&b(e,r)})}function b(d,s){var e,i=s._id,r=i.charAt(0),n=d[r],a=d["a"+r],o=d[r+"ref"],u=d["a"+r+"ref"],p=d["_"+r+"padplus"],c=d["_"+r+"padminus"],x={x:1,y:-1}[r]*d[r+"shift"],g=3*d.arrowsize*d.arrowwidth||0,f=g+x,y=g-x,v=3*d.startarrowsize*d.arrowwidth||0,m=v+x,_=v-x;if(u===o){var h=k.findExtremes(s,[s.r2c(n)],{ppadplus:f,ppadminus:y}),A=k.findExtremes(s,[s.r2c(a)],{ppadplus:Math.max(p,m),ppadminus:Math.max(c,_)});e={min:[h.min[0],A.min[0]],max:[h.max[0],A.max[0]]}}else m=a?m+a:m,_=a?_-a:_,e=k.findExtremes(s,[s.r2c(n)],{ppadplus:Math.max(p,f,m),ppadminus:Math.max(c,y,_)});d._extremes[i]=e}Q.exports=function(d){var s=d._fullLayout;if(S.filterVisible(s.annotations).length&&d._fullData.length)return S.syncOrAsync([l,T],d)}},44317:function(Q,z,t){var S=t(71828),k=t(73972),l=t(44467).arrayEditor;function T(d,s){var e,i,r,n,a,o,u,p=d._fullLayout.annotations,c=[],x=[],g=[],f=(s||[]).length;for(e=0;e<p.length;e++)if(n=(r=p[e]).clicktoshow){for(i=0;i<f;i++)if(o=(a=s[i]).xaxis,u=a.yaxis,o._id===r.xref&&u._id===r.yref&&o.d2r(a.x)===b(r._xclick,o)&&u.d2r(a.y)===b(r._yclick,u)){(r.visible?n==="onout"?x:g:c).push(e);break}i===f&&r.visible&&n==="onout"&&x.push(e)}return{on:c,off:x,explicitOff:g}}function b(d,s){return s.type==="log"?s.l2r(d):s.d2r(d)}Q.exports={hasClickToShow:function(d,s){var e=T(d,s);return e.on.length>0||e.explicitOff.length>0},onClick:function(d,s){var e,i,r=T(d,s),n=r.on,a=r.off.concat(r.explicitOff),o={},u=d._fullLayout.annotations;if(n.length||a.length){for(e=0;e<n.length;e++)(i=l(d.layout,"annotations",u[n[e]])).modifyItem("visible",!0),S.extendFlat(o,i.getUpdateObj());for(e=0;e<a.length;e++)(i=l(d.layout,"annotations",u[a[e]])).modifyItem("visible",!1),S.extendFlat(o,i.getUpdateObj());return k.call("update",d,{},o)}}}},25625:function(Q,z,t){var S=t(71828),k=t(7901);Q.exports=function(l,T,b,d){d("opacity");var s=d("bgcolor"),e=d("bordercolor"),i=k.opacity(e);d("borderpad");var r=d("borderwidth"),n=d("showarrow");if(d("text",n?" ":b._dfltTitle.annotation),d("textangle"),S.coerceFont(d,"font",b.font),d("width"),d("align"),d("height")&&d("valign"),n){var a,o,u=d("arrowside");u.indexOf("end")!==-1&&(a=d("arrowhead"),o=d("arrowsize")),u.indexOf("start")!==-1&&(d("startarrowhead",a),d("startarrowsize",o)),d("arrowcolor",i?T.bordercolor:k.defaultLine),d("arrowwidth",2*(i&&r||1)),d("standoff"),d("startstandoff")}var p=d("hovertext"),c=b.hoverlabel||{};if(p){var x=d("hoverlabel.bgcolor",c.bgcolor||(k.opacity(s)?k.rgb(s):k.defaultLine)),g=d("hoverlabel.bordercolor",c.bordercolor||k.contrast(x));S.coerceFont(d,"hoverlabel.font",{family:c.font.family,size:c.font.size,color:c.font.color||g})}d("captureevents",!!p)}},94128:function(Q,z,t){var S=t(92770),k=t(58163);Q.exports=function(l,T,b,d){T=T||{};var s=b==="log"&&T.type==="linear",e=b==="linear"&&T.type==="log";if(s||e)for(var i,r,n=l._fullLayout.annotations,a=T._id.charAt(0),o=0;o<n.length;o++)i=n[o],r="annotations["+o+"].",i[a+"ref"]===T._id&&u(a),i["a"+a+"ref"]===T._id&&u("a"+a);function u(p){var c=i[p],x=null;x=s?k(c,T.range):Math.pow(10,c),S(x)||(x=null),d(r+p,x)}}},84046:function(Q,z,t){var S=t(71828),k=t(89298),l=t(85501),T=t(25625),b=t(50215);function d(s,e,i){function r(A,w){return S.coerce(s,e,b,A,w)}var n=r("visible"),a=r("clicktoshow");if(n||a){T(s,e,i,r);for(var o=e.showarrow,u=["x","y"],p=[-10,-30],c={_fullLayout:i},x=0;x<2;x++){var g=u[x],f=k.coerceRef(s,e,c,g,"","paper");if(f!=="paper"&&k.getFromId(c,f)._annIndices.push(e._index),k.coercePosition(e,c,r,f,g,.5),o){var y="a"+g,v=k.coerceRef(s,e,c,y,"pixel",["pixel","paper"]);v!=="pixel"&&v!==f&&(v=e[y]="pixel");var m=v==="pixel"?p[x]:.4;k.coercePosition(e,c,r,v,y,m)}r(g+"anchor"),r(g+"shift")}if(S.noneOrAll(s,e,["x","y"]),o&&S.noneOrAll(s,e,["ax","ay"]),a){var _=r("xclick"),h=r("yclick");e._xclick=_===void 0?e.x:k.cleanPosition(_,c,e.xref),e._yclick=h===void 0?e.y:k.cleanPosition(h,c,e.yref)}}}Q.exports=function(s,e){l(s,e,{name:"annotations",handleItemDefaults:d})}},92605:function(Q,z,t){var S=t(39898),k=t(73972),l=t(74875),T=t(71828),b=T.strTranslate,d=t(89298),s=t(7901),e=t(91424),i=t(30211),r=t(63893),n=t(6964),a=t(28569),o=t(44467).arrayEditor,u=t(13011);function p(g,f){var y=g._fullLayout.annotations[f]||{},v=d.getFromId(g,y.xref),m=d.getFromId(g,y.yref);v&&v.setScale(),m&&m.setScale(),x(g,y,f,!1,v,m)}function c(g,f,y,v,m){var _=m[y],h=m[y+"ref"],A=y.indexOf("y")!==-1,w=d.getRefType(h)==="domain",E=A?v.h:v.w;return g?w?_+(A?-f:f)/g._length:g.p2r(g.r2p(_)+f):_+(A?-f:f)/E}function x(g,f,y,v,m,_){var h,A,w=g._fullLayout,E=g._fullLayout._size,L=g._context.edits;v?(h="annotation-"+v,A=v+".annotations"):(h="annotation",A="annotations");var C=o(g.layout,A,f),P=C.modifyBase,D=C.modifyItem,G=C.getUpdateObj;w._infolayer.selectAll("."+h+'[data-index="'+y+'"]').remove();var I="clip"+w._uid+"_ann"+y;if(f._input&&f.visible!==!1){var H={x:{},y:{}},N=+f.textangle||0,F=w._infolayer.append("g").classed(h,!0).attr("data-index",String(y)).style("opacity",f.opacity),V=F.append("g").classed("annotation-text-g",!0),q=L[f.showarrow?"annotationTail":"annotationPosition"],te=f.captureevents||L.annotationText||q,$=V.append("g").style("pointer-events",te?"all":null).call(n,"pointer").on("click",function(){g._dragging=!1,g.emit("plotly_clickannotation",ve(S.event))});f.hovertext&&$.on("mouseover",function(){var ge=f.hoverlabel,Oe=ge.font,Ae=this.getBoundingClientRect(),Te=g.getBoundingClientRect();i.loneHover({x0:Ae.left-Te.left,x1:Ae.right-Te.left,y:(Ae.top+Ae.bottom)/2-Te.top,text:f.hovertext,color:ge.bgcolor,borderColor:ge.bordercolor,fontFamily:Oe.family,fontSize:Oe.size,fontColor:Oe.color},{container:w._hoverlayer.node(),outerContainer:w._paper.node(),gd:g})}).on("mouseout",function(){i.loneUnhover(w._hoverlayer.node())});var W=f.borderwidth,Z=f.borderpad,J=W+Z,ee=$.append("rect").attr("class","bg").style("stroke-width",W+"px").call(s.stroke,f.bordercolor).call(s.fill,f.bgcolor),re=f.width||f.height,ae=w._topclips.selectAll("#"+I).data(re?[0]:[]);ae.enter().append("clipPath").classed("annclip",!0).attr("id",I).append("rect"),ae.exit().remove();var oe=f.font,ce=w._meta?T.templateString(f.text,w._meta):f.text,pe=$.append("text").classed("annotation-text",!0).text(ce);L.annotationText?pe.call(r.makeEditable,{delegate:$,gd:g}).call(we).on("edit",function(ge){f.text=ge,this.call(we),D("text",ge),m&&m.autorange&&P(m._name+".autorange",!0),_&&_.autorange&&P(_._name+".autorange",!0),k.call("_guiRelayout",g,G())}):pe.call(we)}else S.selectAll("#"+I).remove();function ve(ge){var Oe={index:y,annotation:f._input,fullAnnotation:f,event:ge};return v&&(Oe.subplotId=v),Oe}function we(ge){return ge.call(e.font,oe).attr({"text-anchor":{left:"start",right:"end"}[f.align]||"middle"}),r.convertToTspans(ge,g,xe),ge}function xe(){var ge=pe.selectAll("a");ge.size()===1&&ge.text()===pe.text()&&$.insert("a",":first-child").attr({"xlink:xlink:href":ge.attr("xlink:href"),"xlink:xlink:show":ge.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(ee.node());var Oe=$.select(".annotation-text-math-group"),Ae=!Oe.empty(),Te=e.bBox((Ae?Oe:pe).node()),se=Te.width,le=Te.height,ne=f.width||se,me=f.height||le,Ee=Math.round(ne+2*J),be=Math.round(me+2*J);function De(vt,ct){return ct==="auto"&&(ct=vt<.3333333333333333?"left":vt>.6666666666666666?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[ct]}for(var Ue=!1,he=["x","y"],ke=0;ke<he.length;ke++){var _e,Ce,Fe,Re,He,Ge=he[ke],$e=f[Ge+"ref"]||Ge,st=f["a"+Ge+"ref"],Ke={x:m,y:_}[Ge],gt=(N+(Ge==="x"?0:-90))*Math.PI/180,mt=Ee*Math.cos(gt),at=be*Math.sin(gt),rt=Math.abs(mt)+Math.abs(at),xt=f[Ge+"anchor"],Tt=f[Ge+"shift"]*(Ge==="x"?1:-1),wt=H[Ge],Ot=d.getRefType($e);if(Ke&&Ot!=="domain"){var Ct=Ke.r2fraction(f[Ge]);(Ct<0||Ct>1)&&(st===$e?((Ct=Ke.r2fraction(f["a"+Ge]))<0||Ct>1)&&(Ue=!0):Ue=!0),_e=Ke._offset+Ke.r2p(f[Ge]),Re=.5}else{var Ye=Ot==="domain";Ge==="x"?(Fe=f[Ge],_e=Ye?Ke._offset+Ke._length*Fe:_e=E.l+E.w*Fe):(Fe=1-f[Ge],_e=Ye?Ke._offset+Ke._length*Fe:_e=E.t+E.h*Fe),Re=f.showarrow?.5:Fe}if(f.showarrow){wt.head=_e;var Xe=f["a"+Ge];if(He=mt*De(.5,f.xanchor)-at*De(.5,f.yanchor),st===$e){var Ve=d.getRefType(st);Ve==="domain"?(Ge==="y"&&(Xe=1-Xe),wt.tail=Ke._offset+Ke._length*Xe):Ve==="paper"?Ge==="y"?(Xe=1-Xe,wt.tail=E.t+E.h*Xe):wt.tail=E.l+E.w*Xe:wt.tail=Ke._offset+Ke.r2p(Xe),Ce=He}else wt.tail=_e+Xe,Ce=He+Xe;wt.text=wt.tail+He;var We=w[Ge==="x"?"width":"height"];if($e==="paper"&&(wt.head=T.constrain(wt.head,1,We-1)),st==="pixel"){var nt=-Math.max(wt.tail-3,wt.text),ot=Math.min(wt.tail+3,wt.text)-We;nt>0?(wt.tail+=nt,wt.text+=nt):ot>0&&(wt.tail-=ot,wt.text-=ot)}wt.tail+=Tt,wt.head+=Tt}else Ce=He=rt*De(Re,xt),wt.text=_e+He;wt.text+=Tt,He+=Tt,Ce+=Tt,f["_"+Ge+"padplus"]=rt/2+Ce,f["_"+Ge+"padminus"]=rt/2-Ce,f["_"+Ge+"size"]=rt,f["_"+Ge+"shift"]=He}if(Ue)$.remove();else{var Ie=0,ze=0;if(f.align!=="left"&&(Ie=(ne-se)*(f.align==="center"?.5:1)),f.valign!=="top"&&(ze=(me-le)*(f.valign==="middle"?.5:1)),Ae)Oe.select("svg").attr({x:J+Ie-1,y:J+ze}).call(e.setClipUrl,re?I:null,g);else{var et=J+ze-Te.top,tt=J+Ie-Te.left;pe.call(r.positionText,tt,et).call(e.setClipUrl,re?I:null,g)}ae.select("rect").call(e.setRect,J,J,ne,me),ee.call(e.setRect,W/2,W/2,Ee-W,be-W),$.call(e.setTranslate,Math.round(H.x.text-Ee/2),Math.round(H.y.text-be/2)),V.attr({transform:"rotate("+N+","+H.x.text+","+H.y.text+")"});var dt,pt=function(vt,ct){F.selectAll(".annotation-arrow-g").remove();var kt=H.x.head,ut=H.y.head,ft=H.x.tail+vt,bt=H.y.tail+ct,It=H.x.text+vt,zt=H.y.text+ct,Rt=T.rotationXYMatrix(N,It,zt),Jt=T.apply2DTransform(Rt),qt=T.apply2DTransform2(Rt),Wt=+ee.attr("width"),jt=+ee.attr("height"),fn=It-.5*Wt,xn=fn+Wt,un=zt-.5*jt,Ht=un+jt,nn=[[fn,un,fn,Ht],[fn,Ht,xn,Ht],[xn,Ht,xn,un],[xn,un,fn,un]].map(qt);if(!nn.reduce(function(Qn,Gn){return Qn^!!T.segmentsIntersect(kt,ut,kt+1e6,ut+1e6,Gn[0],Gn[1],Gn[2],Gn[3])},!1)){nn.forEach(function(Qn){var Gn=T.segmentsIntersect(ft,bt,kt,ut,Qn[0],Qn[1],Qn[2],Qn[3]);Gn&&(ft=Gn.x,bt=Gn.y)});var Kt=f.arrowwidth,on=f.arrowcolor,hn=f.arrowside,dn=F.append("g").style({opacity:s.opacity(on)}).classed("annotation-arrow-g",!0),Mn=dn.append("path").attr("d","M"+ft+","+bt+"L"+kt+","+ut).style("stroke-width",Kt+"px").call(s.stroke,s.rgb(on));if(u(Mn,hn,f),L.annotationPosition&&Mn.node().parentNode&&!v){var Cn=kt,Tn=ut;if(f.standoff){var Pn=Math.sqrt(Math.pow(kt-ft,2)+Math.pow(ut-bt,2));Cn+=f.standoff*(ft-kt)/Pn,Tn+=f.standoff*(bt-ut)/Pn}var Wn,$n,ar=dn.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(ft-Cn)+","+(bt-Tn),transform:b(Cn,Tn)}).style("stroke-width",Kt+6+"px").call(s.stroke,"rgba(0,0,0,0)").call(s.fill,"rgba(0,0,0,0)");a.init({element:ar.node(),gd:g,prepFn:function(){var Qn=e.getTranslate($);Wn=Qn.x,$n=Qn.y,m&&m.autorange&&P(m._name+".autorange",!0),_&&_.autorange&&P(_._name+".autorange",!0)},moveFn:function(Qn,Gn){var dr=Jt(Wn,$n),Bt=dr[0]+Qn,tn=dr[1]+Gn;$.call(e.setTranslate,Bt,tn),D("x",c(m,Qn,"x",E,f)),D("y",c(_,Gn,"y",E,f)),f.axref===f.xref&&D("ax",c(m,Qn,"ax",E,f)),f.ayref===f.yref&&D("ay",c(_,Gn,"ay",E,f)),dn.attr("transform",b(Qn,Gn)),V.attr({transform:"rotate("+N+","+Bt+","+tn+")"})},doneFn:function(){k.call("_guiRelayout",g,G());var Qn=document.querySelector(".js-notes-box-panel");Qn&&Qn.redraw(Qn.selectedObj)}})}}};f.showarrow&&pt(0,0),q&&a.init({element:$.node(),gd:g,prepFn:function(){dt=V.attr("transform")},moveFn:function(vt,ct){var kt="pointer";if(f.showarrow)f.axref===f.xref?D("ax",c(m,vt,"ax",E,f)):D("ax",f.ax+vt),f.ayref===f.yref?D("ay",c(_,ct,"ay",E.w,f)):D("ay",f.ay+ct),pt(vt,ct);else{if(v)return;var ut,ft;if(m)ut=c(m,vt,"x",E,f);else{var bt=f._xsize/E.w,It=f.x+(f._xshift-f.xshift)/E.w-bt/2;ut=a.align(It+vt/E.w,bt,0,1,f.xanchor)}if(_)ft=c(_,ct,"y",E,f);else{var zt=f._ysize/E.h,Rt=f.y-(f._yshift+f.yshift)/E.h-zt/2;ft=a.align(Rt-ct/E.h,zt,0,1,f.yanchor)}D("x",ut),D("y",ft),m&&_||(kt=a.getCursor(m?.5:ut,_?.5:ft,f.xanchor,f.yanchor))}V.attr({transform:b(vt,ct)+dt}),n($,kt)},clickFn:function(vt,ct){f.captureevents&&g.emit("plotly_clickannotation",ve(ct))},doneFn:function(){n($),k.call("_guiRelayout",g,G());var vt=document.querySelector(".js-notes-box-panel");vt&&vt.redraw(vt.selectedObj)}})}}}Q.exports={draw:function(g){var f=g._fullLayout;f._infolayer.selectAll(".annotation").remove();for(var y=0;y<f.annotations.length;y++)f.annotations[y].visible&&p(g,y);return l.previousPromises(g)},drawOne:p,drawRaw:x}},13011:function(Q,z,t){var S=t(39898),k=t(7901),l=t(82884),T=t(71828),b=T.strScale,d=T.strRotate,s=T.strTranslate;Q.exports=function(e,i,r){var n,a,o,u,p=e.node(),c=l[r.arrowhead||0],x=l[r.startarrowhead||0],g=(r.arrowwidth||1)*(r.arrowsize||1),f=(r.arrowwidth||1)*(r.startarrowsize||1),y=i.indexOf("start")>=0,v=i.indexOf("end")>=0,m=c.backoff*g+r.standoff,_=x.backoff*f+r.startstandoff;if(p.nodeName==="line"){n={x:+e.attr("x1"),y:+e.attr("y1")},a={x:+e.attr("x2"),y:+e.attr("y2")};var h=n.x-a.x,A=n.y-a.y;if(u=(o=Math.atan2(A,h))+Math.PI,m&&_&&m+_>Math.sqrt(h*h+A*A))return void F();if(m){if(m*m>h*h+A*A)return void F();var w=m*Math.cos(o),E=m*Math.sin(o);a.x+=w,a.y+=E,e.attr({x2:a.x,y2:a.y})}if(_){if(_*_>h*h+A*A)return void F();var L=_*Math.cos(o),C=_*Math.sin(o);n.x-=L,n.y-=C,e.attr({x1:n.x,y1:n.y})}}else if(p.nodeName==="path"){var P=p.getTotalLength(),D="";if(P<m+_)return void F();var G=p.getPointAtLength(0),I=p.getPointAtLength(.1);o=Math.atan2(G.y-I.y,G.x-I.x),n=p.getPointAtLength(Math.min(_,P)),D="0px,"+_+"px,";var H=p.getPointAtLength(P),N=p.getPointAtLength(P-.1);u=Math.atan2(H.y-N.y,H.x-N.x),a=p.getPointAtLength(Math.max(0,P-m)),D+=P-(D?_+m:m)+"px,"+P+"px",e.style("stroke-dasharray",D)}function F(){e.style("stroke-dasharray","0px,100px")}function V(q,te,$,W){q.path&&(q.noRotate&&($=0),S.select(p.parentNode).append("path").attr({class:e.attr("class"),d:q.path,transform:s(te.x,te.y)+d(180*$/Math.PI)+b(W)}).style({fill:k.rgb(r.arrowcolor),"stroke-width":0}))}y&&V(x,n,o,f),v&&V(c,a,u,g)}},32745:function(Q,z,t){var S=t(92605),k=t(44317);Q.exports={moduleType:"component",name:"annotations",layoutAttributes:t(50215),supplyLayoutDefaults:t(84046),includeBasePlot:t(76325)("annotations"),calcAutorange:t(3749),draw:S.draw,drawOne:S.drawOne,drawRaw:S.drawRaw,hasClickToShow:k.hasClickToShow,onClick:k.onClick,convertCoords:t(94128)}},26997:function(Q,z,t){var S=t(50215),k=t(30962).overrideAll,l=t(44467).templatedArray;Q.exports=k(l("annotation",{visible:S.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:S.xanchor,xshift:S.xshift,yanchor:S.yanchor,yshift:S.yshift,text:S.text,textangle:S.textangle,font:S.font,width:S.width,height:S.height,opacity:S.opacity,align:S.align,valign:S.valign,bgcolor:S.bgcolor,bordercolor:S.bordercolor,borderpad:S.borderpad,borderwidth:S.borderwidth,showarrow:S.showarrow,arrowcolor:S.arrowcolor,arrowhead:S.arrowhead,startarrowhead:S.startarrowhead,arrowside:S.arrowside,arrowsize:S.arrowsize,startarrowsize:S.startarrowsize,arrowwidth:S.arrowwidth,standoff:S.standoff,startstandoff:S.startstandoff,hovertext:S.hovertext,hoverlabel:S.hoverlabel,captureevents:S.captureevents}),"calc","from-root")},5485:function(Q,z,t){var S=t(71828),k=t(89298);function l(T,b){var d=b.fullSceneLayout.domain,s=b.fullLayout._size,e={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};T._xa={},S.extendFlat(T._xa,e),k.setConvert(T._xa),T._xa._offset=s.l+d.x[0]*s.w,T._xa.l2p=function(){return .5*(1+T._pdata[0]/T._pdata[3])*s.w*(d.x[1]-d.x[0])},T._ya={},S.extendFlat(T._ya,e),k.setConvert(T._ya),T._ya._offset=s.t+(1-d.y[1])*s.h,T._ya.l2p=function(){return .5*(1-T._pdata[1]/T._pdata[3])*s.h*(d.y[1]-d.y[0])}}Q.exports=function(T){for(var b=T.fullSceneLayout.annotations,d=0;d<b.length;d++)l(b[d],T);T.fullLayout._infolayer.selectAll(".annotation-"+T.id).remove()}},20226:function(Q,z,t){var S=t(71828),k=t(89298),l=t(85501),T=t(25625),b=t(26997);function d(s,e,i,r){function n(o,u){return S.coerce(s,e,b,o,u)}function a(o){var u=o+"axis",p={_fullLayout:{}};return p._fullLayout[u]=i[u],k.coercePosition(e,p,n,o,o,.5)}n("visible")&&(T(s,e,r.fullLayout,n),a("x"),a("y"),a("z"),S.noneOrAll(s,e,["x","y","z"]),e.xref="x",e.yref="y",e.zref="z",n("xanchor"),n("yanchor"),n("xshift"),n("yshift"),e.showarrow&&(e.axref="pixel",e.ayref="pixel",n("ax",-10),n("ay",-30),S.noneOrAll(s,e,["ax","ay"])))}Q.exports=function(s,e,i){l(s,e,{name:"annotations",handleItemDefaults:d,fullLayout:i.fullLayout})}},82188:function(Q,z,t){var S=t(92605).drawRaw,k=t(63538),l=["x","y","z"];Q.exports=function(T){for(var b=T.fullSceneLayout,d=T.dataScale,s=b.annotations,e=0;e<s.length;e++){for(var i=s[e],r=!1,n=0;n<3;n++){var a=l[n],o=i[a],u=b[a+"axis"].r2fraction(o);if(u<0||u>1){r=!0;break}}r?T.fullLayout._infolayer.select(".annotation-"+T.id+'[data-index="'+e+'"]').remove():(i._pdata=k(T.glplot.cameraParams,[b.xaxis.r2l(i.x)*d[0],b.yaxis.r2l(i.y)*d[1],b.zaxis.r2l(i.z)*d[2]]),S(T.graphDiv,i,e,T.id,i._xa,i._ya))}}},2468:function(Q,z,t){var S=t(73972),k=t(71828);Q.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:t(26997)}}},layoutAttributes:t(26997),handleDefaults:t(20226),includeBasePlot:function(l,T){var b=S.subplotsRegistry.gl3d;if(b)for(var d=b.attrRegex,s=Object.keys(l),e=0;e<s.length;e++){var i=s[e];d.test(i)&&(l[i].annotations||[]).length&&(k.pushUnique(T._basePlotModules,b),k.pushUnique(T._subplots.gl3d,i))}},convert:t(5485),draw:t(82188)}},7561:function(Q,z,t){Q.exports=t(63489),t(94338),t(3961),t(38751),t(86825),t(37715),t(99384),t(43805),t(88874),t(83290),t(29108),t(55422),t(94320),t(31320),t(51367),t(21457)},72201:function(Q,z,t){var S=t(7561),k=t(71828),l=t(50606),T=l.EPOCHJD,b=l.ONEDAY,d={valType:"enumerated",values:k.sortObjectKeys(S.calendars),editType:"calc",dflt:"gregorian"},s=function(g,f,y,v){var m={};return m[y]=d,k.coerce(g,f,m,y,v)},e="##",i={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:e,w:e,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},r={};function n(g){var f=r[g];return f||(r[g]=S.instance(g))}function a(g){return k.extendFlat({},d,{description:g})}function o(g){return"Sets the calendar system to use with `"+g+"` date data."}var u={xcalendar:a(o("x"))},p=k.extendFlat({},u,{ycalendar:a(o("y"))}),c=k.extendFlat({},p,{zcalendar:a(o("z"))}),x=a(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));Q.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:p,bar:p,box:p,heatmap:p,contour:p,histogram:p,histogram2d:p,histogram2dcontour:p,scatter3d:c,surface:c,mesh3d:c,scattergl:p,ohlc:u,candlestick:u},layout:{calendar:a(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:x},yaxis:{calendar:x},scene:{xaxis:{calendar:x},yaxis:{calendar:x},zaxis:{calendar:x}},polar:{radialaxis:{calendar:x}}},transforms:{filter:{valuecalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:d,handleDefaults:s,handleTraceDefaults:function(g,f,y,v){for(var m=0;m<y.length;m++)s(g,f,y[m]+"calendar",v.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:n,worldCalFmt:function(g,f,y){for(var v,m,_,h,A,w=Math.floor((f+.05)/b)+T,E=n(y).fromJD(w),L=0;(L=g.indexOf("%",L))!==-1;)(v=g.charAt(L+1))==="0"||v==="-"||v==="_"?(_=3,m=g.charAt(L+2),v==="_"&&(v="-")):(m=v,v="0",_=2),(h=i[m])?(A=h===e?e:E.formatDate(h[v]),g=g.substr(0,L)+A+g.substr(L+_),L+=A.length):L+=_;return g}}},22399:function(Q,z){z.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],z.defaultLine="#444",z.lightLine="#eee",z.background="#fff",z.borderLine="#BEC8D9",z.lightFraction=90.9090909090909},7901:function(Q,z,t){var S=t(84267),k=t(92770),l=t(73627).isTypedArray,T=Q.exports={},b=t(22399);T.defaults=b.defaults;var d=T.defaultLine=b.defaultLine;T.lightLine=b.lightLine;var s=T.background=b.background;function e(i){if(k(i)||typeof i!="string")return i;var r=i.trim();if(r.substr(0,3)!=="rgb")return i;var n=r.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return i;var a=n[1].trim().split(/\s*[\s,]\s*/),o=r.charAt(3)==="a"&&a.length===4;if(!o&&a.length!==3)return i;for(var u=0;u<a.length;u++){if(!a[u].length||(a[u]=Number(a[u]),!(a[u]>=0)))return i;if(u===3)a[u]>1&&(a[u]=1);else if(a[u]>=1)return i}var p=Math.round(255*a[0])+", "+Math.round(255*a[1])+", "+Math.round(255*a[2]);return o?"rgba("+p+", "+a[3]+")":"rgb("+p+")"}T.tinyRGB=function(i){var r=i.toRgb();return"rgb("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+")"},T.rgb=function(i){return T.tinyRGB(S(i))},T.opacity=function(i){return i?S(i).getAlpha():0},T.addOpacity=function(i,r){var n=S(i).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+r+")"},T.combine=function(i,r){var n=S(i).toRgb();if(n.a===1)return S(i).toRgbString();var a=S(r||s).toRgb(),o=a.a===1?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a},u={r:o.r*(1-n.a)+n.r*n.a,g:o.g*(1-n.a)+n.g*n.a,b:o.b*(1-n.a)+n.b*n.a};return S(u).toRgbString()},T.contrast=function(i,r,n){var a=S(i);return a.getAlpha()!==1&&(a=S(T.combine(i,s))),(a.isDark()?r?a.lighten(r):s:n?a.darken(n):d).toString()},T.stroke=function(i,r){var n=S(r);i.style({stroke:T.tinyRGB(n),"stroke-opacity":n.getAlpha()})},T.fill=function(i,r){var n=S(r);i.style({fill:T.tinyRGB(n),"fill-opacity":n.getAlpha()})},T.clean=function(i){if(i&&typeof i=="object"){var r,n,a,o,u=Object.keys(i);for(r=0;r<u.length;r++)if(o=i[a=u[r]],a.substr(a.length-5)==="color")if(Array.isArray(o))for(n=0;n<o.length;n++)o[n]=e(o[n]);else i[a]=e(o);else if(a.substr(a.length-10)==="colorscale"&&Array.isArray(o))for(n=0;n<o.length;n++)Array.isArray(o[n])&&(o[n][1]=e(o[n][1]));else if(Array.isArray(o)){var p=o[0];if(!Array.isArray(p)&&p&&typeof p=="object")for(n=0;n<o.length;n++)T.clean(o[n])}else o&&typeof o=="object"&&!l(o)&&T.clean(o)}}},63583:function(Q,z,t){var S=t(13838),k=t(41940),l=t(1426).extendFlat,T=t(30962).overrideAll;Q.exports=T({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:S.linecolor,outlinewidth:S.linewidth,bordercolor:S.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:S.minor.tickmode,nticks:S.nticks,tick0:S.tick0,dtick:S.dtick,tickvals:S.tickvals,ticktext:S.ticktext,ticks:l({},S.ticks,{dflt:""}),ticklabeloverflow:l({},S.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:S.ticklen,tickwidth:S.tickwidth,tickcolor:S.tickcolor,ticklabelstep:S.ticklabelstep,showticklabels:S.showticklabels,labelalias:S.labelalias,tickfont:k({}),tickangle:S.tickangle,tickformat:S.tickformat,tickformatstops:S.tickformatstops,tickprefix:S.tickprefix,showtickprefix:S.showtickprefix,ticksuffix:S.ticksuffix,showticksuffix:S.showticksuffix,separatethousands:S.separatethousands,exponentformat:S.exponentformat,minexponent:S.minexponent,showexponent:S.showexponent,title:{text:{valType:"string"},font:k({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:k({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},30939:function(Q){Q.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},62499:function(Q,z,t){var S=t(71828),k=t(44467),l=t(26218),T=t(38701),b=t(96115),d=t(89426),s=t(63583);Q.exports=function(e,i,r){var n=k.newContainer(i,"colorbar"),a=e.colorbar||{};function o(D,G){return S.coerce(a,n,s,D,G)}var u=r.margin||{t:0,b:0,l:0,r:0},p=r.width-u.l-u.r,c=r.height-u.t-u.b,x=o("orientation")==="v",g=o("thicknessmode");o("thickness",g==="fraction"?30/(x?p:c):30);var f=o("lenmode");o("len",f==="fraction"?1:x?c:p);var y,v,m,_=o("yref")==="paper",h=o("xref")==="paper",A="left";x?(m="middle",A=h?"left":"right",y=h?1.02:1,v=.5):(m=_?"bottom":"top",A="center",y=.5,v=_?1.02:1),S.coerce(a,n,{x:{valType:"number",min:h?-2:0,max:h?3:1,dflt:y}},"x"),S.coerce(a,n,{y:{valType:"number",min:_?-2:0,max:_?3:1,dflt:v}},"y"),o("xanchor",A),o("xpad"),o("yanchor",m),o("ypad"),S.noneOrAll(a,n,["x","y"]),o("outlinecolor"),o("outlinewidth"),o("bordercolor"),o("borderwidth"),o("bgcolor");var w=S.coerce(a,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:x?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");o("ticklabeloverflow",w.indexOf("inside")!==-1?"hide past domain":"hide past div"),l(a,n,o,"linear");var E=r.font,L={outerTicks:!1,font:E};w.indexOf("inside")!==-1&&(L.bgColor="black"),d(a,n,o,"linear",L),b(a,n,o,"linear",L),T(a,n,o,"linear",L),o("title.text",r._dfltTitle.colorbar);var C=n.showticklabels?n.tickfont:E,P=S.extendFlat({},C,{color:E.color,size:S.bigFont(C.size)});S.coerceFont(o,"title.font",P),o("title.side",x?"top":"right")}},98981:function(Q,z,t){var S=t(39898),k=t(84267),l=t(74875),T=t(73972),b=t(89298),d=t(28569),s=t(71828),e=s.strTranslate,i=t(1426).extendFlat,r=t(6964),n=t(91424),a=t(7901),o=t(92998),u=t(63893),p=t(52075).flipScale,c=t(71453),x=t(52830),g=t(13838),f=t(18783),y=f.LINE_SPACING,v=f.FROM_TL,m=f.FROM_BR,_=t(30939).cn;Q.exports={draw:function(h){var A=h._fullLayout._infolayer.selectAll("g."+_.colorbar).data(function(w){var E,L,C,P,D=w._fullLayout,G=w.calcdata,I=[];function H(re){return i(re,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function N(){typeof P.calc=="function"?P.calc(w,C,E):(E._fillgradient=L.reversescale?p(L.colorscale):L.colorscale,E._zrange=[L[P.min],L[P.max]])}for(var F=0;F<G.length;F++){var V=G[F],q=(C=V[0].trace)._module.colorbar;if(C.visible===!0&&q)for(var te=Array.isArray(q),$=te?q:[q],W=0;W<$.length;W++){var Z=(P=$[W]).container;(L=Z?C[Z]:C)&&L.showscale&&((E=H(L.colorbar))._id="cb"+C.uid+(te&&Z?"-"+Z:""),E._traceIndex=C.index,E._propPrefix=(Z?Z+".":"")+"colorbar.",E._meta=C._meta,N(),I.push(E))}}for(var J in D._colorAxes)if((L=D[J]).showscale){var ee=D._colorAxes[J];(E=H(L.colorbar))._id="cb"+J,E._propPrefix=J+".colorbar.",E._meta=D._meta,P={min:"cmin",max:"cmax"},ee[0]!=="heatmap"&&(C=ee[1],P.calc=C._module.colorbar.calc),N(),I.push(E)}return I}(h),function(w){return w._id});A.enter().append("g").attr("class",function(w){return w._id}).classed(_.colorbar,!0),A.each(function(w){var E=S.select(this);s.ensureSingle(E,"rect",_.cbbg),s.ensureSingle(E,"g",_.cbfills),s.ensureSingle(E,"g",_.cblines),s.ensureSingle(E,"g",_.cbaxis,function(C){C.classed(_.crisp,!0)}),s.ensureSingle(E,"g",_.cbtitleunshift,function(C){C.append("g").classed(_.cbtitle,!0)}),s.ensureSingle(E,"rect",_.cboutline);var L=function(C,P,D){var G=P.orientation==="v",I=P.len,H=P.lenmode,N=P.thickness,F=P.thicknessmode,V=P.outlinewidth,q=P.borderwidth,te=P.bgcolor,$=P.xanchor,W=P.yanchor,Z=P.xpad,J=P.ypad,ee=P.x,re=G?P.y:1-P.y,ae=P.yref==="paper",oe=P.xref==="paper",ce=D._fullLayout,pe=ce._size,ve=P._fillcolor,we=P._line,xe=P.title,ge=xe.side,Oe=P._zrange||S.extent((typeof ve=="function"?ve:we.color).domain()),Ae=typeof we.color=="function"?we.color:function(){return we.color},Te=typeof ve=="function"?ve:function(){return ve},se=P._levels,le=function(Ve,We,nt){var ot,Ie,ze=We._levels,et=[],tt=[],dt=ze.end+ze.size/100,pt=ze.size,vt=1.001*nt[0]-.001*nt[1],ct=1.001*nt[1]-.001*nt[0];for(Ie=0;Ie<1e5&&(ot=ze.start+Ie*pt,!(pt>0?ot>=dt:ot<=dt));Ie++)ot>vt&&ot<ct&&et.push(ot);if(We._fillgradient)tt=[0];else if(typeof We._fillcolor=="function"){var kt=We._filllevels;if(kt)for(dt=kt.end+kt.size/100,pt=kt.size,Ie=0;Ie<1e5&&(ot=kt.start+Ie*pt,!(pt>0?ot>=dt:ot<=dt));Ie++)ot>nt[0]&&ot<nt[1]&&tt.push(ot);else(tt=et.map(function(ut){return ut-ze.size/2})).push(tt[tt.length-1]+ze.size)}else We._fillcolor&&typeof We._fillcolor=="string"&&(tt=[0]);return ze.size<0&&(et.reverse(),tt.reverse()),{line:et,fill:tt}}(0,P,Oe),ne=le.fill,me=le.line,Ee=Math.round(N*(F==="fraction"?G?pe.w:pe.h:1)),be=Ee/(G?pe.w:pe.h),De=Math.round(I*(H==="fraction"?G?pe.h:pe.w:1)),Ue=De/(G?pe.h:pe.w),he=oe?pe.w:D._fullLayout.width,ke=ae?pe.h:D._fullLayout.height,_e=Math.round(G?ee*he+Z:re*ke+J),Ce={center:.5,right:1}[$]||0,Fe={top:1,middle:.5}[W]||0,Re=G?ee-Ce*be:re-Fe*be,He=G?re-Fe*Ue:ee-Ce*Ue,Ge=Math.round(G?ke*(1-He):he*He);P._lenFrac=Ue,P._thickFrac=be,P._uFrac=Re,P._vFrac=He;var $e=P._axis=function(Ve,We,nt){var ot=Ve._fullLayout,Ie=We.orientation==="v",ze={type:"linear",range:nt,tickmode:We.tickmode,nticks:We.nticks,tick0:We.tick0,dtick:We.dtick,tickvals:We.tickvals,ticktext:We.ticktext,ticks:We.ticks,ticklen:We.ticklen,tickwidth:We.tickwidth,tickcolor:We.tickcolor,showticklabels:We.showticklabels,labelalias:We.labelalias,ticklabelposition:We.ticklabelposition,ticklabeloverflow:We.ticklabeloverflow,ticklabelstep:We.ticklabelstep,tickfont:We.tickfont,tickangle:We.tickangle,tickformat:We.tickformat,exponentformat:We.exponentformat,minexponent:We.minexponent,separatethousands:We.separatethousands,showexponent:We.showexponent,showtickprefix:We.showtickprefix,tickprefix:We.tickprefix,showticksuffix:We.showticksuffix,ticksuffix:We.ticksuffix,title:We.title,showline:!0,anchor:"free",side:Ie?"right":"bottom",position:1},et=Ie?"y":"x",tt={type:"linear",_id:et+We._id},dt={letter:et,font:ot.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:ot.calendar};function pt(vt,ct){return s.coerce(ze,tt,g,vt,ct)}return c(ze,tt,pt,dt,ot),x(ze,tt,pt,dt),tt}(D,P,Oe);$e.position=be+(G?ee+Z/pe.w:re+J/pe.h);var st=["top","bottom"].indexOf(ge)!==-1;if(G&&st&&($e.title.side=ge,$e.titlex=ee+Z/pe.w,$e.titley=He+(xe.side==="top"?Ue-J/pe.h:J/pe.h)),G||st||($e.title.side=ge,$e.titley=re+J/pe.h,$e.titlex=He+Z/pe.w),we.color&&P.tickmode==="auto"){$e.tickmode="linear",$e.tick0=se.start;var Ke=se.size,gt=s.constrain(De/50,4,15)+1,mt=(Oe[1]-Oe[0])/((P.nticks||gt)*Ke);if(mt>1){var at=Math.pow(10,Math.floor(Math.log(mt)/Math.LN10));Ke*=at*s.roundUp(mt/at,[2,5,10]),(Math.abs(se.start)/se.size+1e-6)%1<2e-6&&($e.tick0=0)}$e.dtick=Ke}$e.domain=G?[He+J/pe.h,He+Ue-J/pe.h]:[He+Z/pe.w,He+Ue-Z/pe.w],$e.setScale(),C.attr("transform",e(Math.round(pe.l),Math.round(pe.t)));var rt,xt=C.select("."+_.cbtitleunshift).attr("transform",e(-Math.round(pe.l),-Math.round(pe.t))),Tt=$e.ticklabelposition,wt=$e.title.font.size,Ot=C.select("."+_.cbaxis),Ct=0,Ye=0;function Xe(Ve,We){var nt={propContainer:$e,propName:P._propPrefix+"title",traceIndex:P._traceIndex,_meta:P._meta,placeholder:ce._dfltTitle.colorbar,containerGroup:C.select("."+_.cbtitle)},ot=Ve.charAt(0)==="h"?Ve.substr(1):"h"+Ve;C.selectAll("."+ot+",."+ot+"-math-group").remove(),o.draw(D,Ve,i(nt,We||{}))}return s.syncOrAsync([l.previousPromises,function(){var Ve,We;(G&&st||!G&&!st)&&(ge==="top"&&(Ve=Z+pe.l+he*ee,We=J+pe.t+ke*(1-He-Ue)+3+.75*wt),ge==="bottom"&&(Ve=Z+pe.l+he*ee,We=J+pe.t+ke*(1-He)-3-.25*wt),ge==="right"&&(We=J+pe.t+ke*re+3+.75*wt,Ve=Z+pe.l+he*He),Xe($e._id+"title",{attributes:{x:Ve,y:We,"text-anchor":G?"start":"middle"}}))},function(){if(!G&&!st||G&&st){var Ve,We=C.select("."+_.cbtitle),nt=We.select("text"),ot=[-V/2,V/2],Ie=We.select(".h"+$e._id+"title-math-group").node(),ze=15.6;if(nt.node()&&(ze=parseInt(nt.node().style.fontSize,10)*y),Ie?(Ve=n.bBox(Ie),Ye=Ve.width,(Ct=Ve.height)>ze&&(ot[1]-=(Ct-ze)/2)):nt.node()&&!nt.classed(_.jsPlaceholder)&&(Ve=n.bBox(nt.node()),Ye=Ve.width,Ct=Ve.height),G){if(Ct){if(Ct+=5,ge==="top")$e.domain[1]-=Ct/pe.h,ot[1]*=-1;else{$e.domain[0]+=Ct/pe.h;var et=u.lineCount(nt);ot[1]+=(1-et)*ze}We.attr("transform",e(ot[0],ot[1])),$e.setScale()}}else Ye&&(ge==="right"&&($e.domain[0]+=(Ye+wt/2)/pe.w),We.attr("transform",e(ot[0],ot[1])),$e.setScale())}C.selectAll("."+_.cbfills+",."+_.cblines).attr("transform",G?e(0,Math.round(pe.h*(1-$e.domain[1]))):e(Math.round(pe.w*$e.domain[0]),0)),Ot.attr("transform",G?e(0,Math.round(-pe.t)):e(Math.round(-pe.l),0));var tt=C.select("."+_.cbfills).selectAll("rect."+_.cbfill).attr("style","").data(ne);tt.enter().append("rect").classed(_.cbfill,!0).style("stroke","none"),tt.exit().remove();var dt=Oe.map($e.c2p).map(Math.round).sort(function(ut,ft){return ut-ft});tt.each(function(ut,ft){var bt=[ft===0?Oe[0]:(ne[ft]+ne[ft-1])/2,ft===ne.length-1?Oe[1]:(ne[ft]+ne[ft+1])/2].map($e.c2p).map(Math.round);G&&(bt[1]=s.constrain(bt[1]+(bt[1]>bt[0])?1:-1,dt[0],dt[1]));var It=S.select(this).attr(G?"x":"y",_e).attr(G?"y":"x",S.min(bt)).attr(G?"width":"height",Math.max(Ee,2)).attr(G?"height":"width",Math.max(S.max(bt)-S.min(bt),2));if(P._fillgradient)n.gradient(It,D,P._id,G?"vertical":"horizontalreversed",P._fillgradient,"fill");else{var zt=Te(ut).replace("e-","");It.attr("fill",k(zt).toHexString())}});var pt=C.select("."+_.cblines).selectAll("path."+_.cbline).data(we.color&&we.width?me:[]);pt.enter().append("path").classed(_.cbline,!0),pt.exit().remove(),pt.each(function(ut){var ft=_e,bt=Math.round($e.c2p(ut))+we.width/2%1;S.select(this).attr("d","M"+(G?ft+","+bt:bt+","+ft)+(G?"h":"v")+Ee).call(n.lineGroupStyle,we.width,Ae(ut),we.dash)}),Ot.selectAll("g."+$e._id+"tick,path").remove();var vt=_e+Ee+(V||0)/2-(P.ticks==="outside"?1:0),ct=b.calcTicks($e),kt=b.getTickSigns($e)[2];return b.drawTicks(D,$e,{vals:$e.ticks==="inside"?b.clipEnds($e,ct):ct,layer:Ot,path:b.makeTickPath($e,vt,kt),transFn:b.makeTransTickFn($e)}),b.drawLabels(D,$e,{vals:ct,layer:Ot,transFn:b.makeTransTickLabelFn($e),labelFns:b.makeLabelFns($e,vt)})},function(){if(G&&!st||!G&&st){var Ve,We,nt=$e.position||0,ot=$e._offset+$e._length/2;if(ge==="right")We=ot,Ve=pe.l+he*nt+10+wt*($e.showticklabels?1:.5);else if(Ve=ot,ge==="bottom"&&(We=pe.t+ke*nt+10+(Tt.indexOf("inside")===-1?$e.tickfont.size:0)+($e.ticks!=="intside"&&P.ticklen||0)),ge==="top"){var Ie=xe.text.split("<br>").length;We=pe.t+ke*nt+10-Ee-y*wt*Ie}Xe((G?"h":"v")+$e._id+"title",{avoid:{selection:S.select(D).selectAll("g."+$e._id+"tick"),side:ge,offsetTop:G?0:pe.t,offsetLeft:G?pe.l:0,maxShift:G?ce.width:ce.height},attributes:{x:Ve,y:We,"text-anchor":"middle"},transform:{rotate:G?-90:0,offset:0}})}},l.previousPromises,function(){var Ve,We=Ee+V/2;Tt.indexOf("inside")===-1&&(Ve=n.bBox(Ot.node()),We+=G?Ve.width:Ve.height),rt=xt.select("text");var nt=0,ot=G&&ge==="top",Ie=!G&&ge==="right",ze=0;if(rt.node()&&!rt.classed(_.jsPlaceholder)){var et,tt=xt.select(".h"+$e._id+"title-math-group").node();tt&&(G&&st||!G&&!st)?(nt=(Ve=n.bBox(tt)).width,et=Ve.height):(nt=(Ve=n.bBox(xt.node())).right-pe.l-(G?_e:Ge),et=Ve.bottom-pe.t-(G?Ge:_e),G||ge!=="top"||(We+=Ve.height,ze=Ve.height)),Ie&&(rt.attr("transform",e(nt/2+wt/2,0)),nt*=2),We=Math.max(We,G?nt:et)}var dt=2*(G?Z:J)+We+q+V/2,pt=0;!G&&xe.text&&W==="bottom"&&re<=0&&(dt+=pt=dt/2,ze+=pt),ce._hColorbarMoveTitle=pt,ce._hColorbarMoveCBTitle=ze;var vt=q+V,ct=(G?_e:Ge)-vt/2-(G?Z:0),kt=(G?Ge:_e)-(G?De:J+ze-pt);C.select("."+_.cbbg).attr("x",ct).attr("y",kt).attr(G?"width":"height",Math.max(dt-pt,2)).attr(G?"height":"width",Math.max(De+vt,2)).call(a.fill,te).call(a.stroke,P.bordercolor).style("stroke-width",q);var ut=Ie?Math.max(nt-10,0):0;C.selectAll("."+_.cboutline).attr("x",(G?_e:Ge+Z)+ut).attr("y",(G?Ge+J-De:_e)+(ot?Ct:0)).attr(G?"width":"height",Math.max(Ee,2)).attr(G?"height":"width",Math.max(De-(G?2*J+Ct:2*Z+ut),2)).call(a.stroke,P.outlinecolor).style({fill:"none","stroke-width":V});var ft=G?Ce*dt:0,bt=G?0:(1-Fe)*dt-ze;if(ft=oe?pe.l-ft:-ft,bt=ae?pe.t-bt:-bt,C.attr("transform",e(ft,bt)),!G&&(q||k(te).getAlpha()&&!k.equals(ce.paper_bgcolor,te))){var It=Ot.selectAll("text"),zt=It[0].length,Rt=C.select("."+_.cbbg).node(),Jt=n.bBox(Rt),qt=n.getTranslate(C);It.each(function(hn,dn){var Mn=zt-1;if(dn===0||dn===Mn){var Cn,Tn=n.bBox(this),Pn=n.getTranslate(this);if(dn===Mn){var Wn=Tn.right+Pn.x;(Cn=Jt.right+qt.x+Ge-q-2+ee-Wn)>0&&(Cn=0)}else if(dn===0){var $n=Tn.left+Pn.x;(Cn=Jt.left+qt.x+Ge+q+2-$n)<0&&(Cn=0)}Cn&&(zt<3?this.setAttribute("transform","translate("+Cn+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Wt={},jt=v[$],fn=m[$],xn=v[W],un=m[W],Ht=dt-Ee;G?(H==="pixels"?(Wt.y=re,Wt.t=De*xn,Wt.b=De*un):(Wt.t=Wt.b=0,Wt.yt=re+I*xn,Wt.yb=re-I*un),F==="pixels"?(Wt.x=ee,Wt.l=dt*jt,Wt.r=dt*fn):(Wt.l=Ht*jt,Wt.r=Ht*fn,Wt.xl=ee-N*jt,Wt.xr=ee+N*fn)):(H==="pixels"?(Wt.x=ee,Wt.l=De*jt,Wt.r=De*fn):(Wt.l=Wt.r=0,Wt.xl=ee+I*jt,Wt.xr=ee-I*fn),F==="pixels"?(Wt.y=1-re,Wt.t=dt*xn,Wt.b=dt*un):(Wt.t=Ht*xn,Wt.b=Ht*un,Wt.yt=re-N*xn,Wt.yb=re+N*un));var nn=P.y<.5?"b":"t",Kt=P.x<.5?"l":"r";D._fullLayout._reservedMargin[P._id]={};var on={r:ce.width-ct-ft,l:ct+Wt.r,b:ce.height-kt-bt,t:kt+Wt.b};oe&&ae?l.autoMargin(D,P._id,Wt):oe?D._fullLayout._reservedMargin[P._id][nn]=on[nn]:ae||G?D._fullLayout._reservedMargin[P._id][Kt]=on[Kt]:D._fullLayout._reservedMargin[P._id][nn]=on[nn]}],D)}(E,w,h);L&&L.then&&(h._promises||[]).push(L),h._context.edits.colorbarPosition&&function(C,P,D){var G,I,H,N=P.orientation==="v",F=D._fullLayout._size;d.init({element:C.node(),gd:D,prepFn:function(){G=C.attr("transform"),r(C)},moveFn:function(V,q){C.attr("transform",G+e(V,q)),I=d.align((N?P._uFrac:P._vFrac)+V/F.w,N?P._thickFrac:P._lenFrac,0,1,P.xanchor),H=d.align((N?P._vFrac:1-P._uFrac)-q/F.h,N?P._lenFrac:P._thickFrac,0,1,P.yanchor);var te=d.getCursor(I,H,P.xanchor,P.yanchor);r(C,te)},doneFn:function(){if(r(C),I!==void 0&&H!==void 0){var V={};V[P._propPrefix+"x"]=I,V[P._propPrefix+"y"]=H,P._traceIndex!==void 0?T.call("_guiRestyle",D,V,P._traceIndex):T.call("_guiRelayout",D,V)}}})}(E,w,h)}),A.exit().each(function(w){l.autoMargin(h,w._id)}).remove(),A.order()}}},76228:function(Q,z,t){var S=t(71828);Q.exports=function(k){return S.isPlainObject(k.colorbar)}},12311:function(Q,z,t){Q.exports={moduleType:"component",name:"colorbar",attributes:t(63583),supplyDefaults:t(62499),draw:t(98981).draw,hasColorbar:t(76228)}},50693:function(Q,z,t){var S=t(63583),k=t(30587).counter,l=t(78607),T=t(63282).scales;function b(d){return"`"+d+"`"}l(T),Q.exports=function(d,s){d=d||"";var e,i=(s=s||{}).cLetter||"c",r=("onlyIfNumerical"in s&&s.onlyIfNumerical,"noScale"in s?s.noScale:d==="marker.line"),n="showScaleDflt"in s?s.showScaleDflt:i==="z",a=typeof s.colorscaleDflt=="string"?T[s.colorscaleDflt]:null,o=s.editTypeOverride||"",u=d?d+".":"";"colorAttr"in s?(e=s.colorAttr,s.colorAttr):b(u+(e={z:"z",c:"color"}[i]));var p=i+"auto",c=i+"min",x=i+"max",g=i+"mid",f={};f[c]=f[x]=void 0;var y={};y[p]=!1;var v={};return e==="color"&&(v.color={valType:"color",arrayOk:!0,editType:o||"style"},s.anim&&(v.color.anim=!0)),v[p]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:f},v[c]={valType:"number",dflt:null,editType:o||"plot",impliedEdits:y},v[x]={valType:"number",dflt:null,editType:o||"plot",impliedEdits:y},v[g]={valType:"number",dflt:null,editType:"calc",impliedEdits:f},v.colorscale={valType:"colorscale",editType:"calc",dflt:a,impliedEdits:{autocolorscale:!1}},v.autocolorscale={valType:"boolean",dflt:s.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},v.reversescale={valType:"boolean",dflt:!1,editType:"plot"},r||(v.showscale={valType:"boolean",dflt:n,editType:"calc"},v.colorbar=S),s.noColorAxis||(v.coloraxis={valType:"subplotid",regex:k("coloraxis"),dflt:null,editType:"calc"}),v}},78803:function(Q,z,t){var S=t(92770),k=t(71828),l=t(52075).extractOpts;Q.exports=function(T,b,d){var s,e=T._fullLayout,i=d.vals,r=d.containerStr,n=r?k.nestedProperty(b,r).get():b,a=l(n),o=a.auto!==!1,u=a.min,p=a.max,c=a.mid,x=function(){return k.aggNums(Math.min,null,i)},g=function(){return k.aggNums(Math.max,null,i)};u===void 0?u=x():o&&(u=n._colorAx&&S(u)?Math.min(u,x()):x()),p===void 0?p=g():o&&(p=n._colorAx&&S(p)?Math.max(p,g()):g()),o&&c!==void 0&&(p-c>c-u?u=c-(p-c):p-c<c-u&&(p=c+(c-u))),u===p&&(u-=.5,p+=.5),a._sync("min",u),a._sync("max",p),a.autocolorscale&&(s=u*p<0?e.colorscale.diverging:u>=0?e.colorscale.sequential:e.colorscale.sequentialminus,a._sync("colorscale",s))}},33046:function(Q,z,t){var S=t(71828),k=t(52075).hasColorscale,l=t(52075).extractOpts;Q.exports=function(T,b){function d(o,u){var p=o["_"+u];p!==void 0&&(o[u]=p)}function s(o,u){var p=u.container?S.nestedProperty(o,u.container).get():o;if(p)if(p.coloraxis)p._colorAx=b[p.coloraxis];else{var c=l(p),x=c.auto;(x||c.min===void 0)&&d(p,u.min),(x||c.max===void 0)&&d(p,u.max),c.autocolorscale&&d(p,"colorscale")}}for(var e=0;e<T.length;e++){var i=T[e],r=i._module.colorbar;if(r)if(Array.isArray(r))for(var n=0;n<r.length;n++)s(i,r[n]);else s(i,r);k(i,"marker.line")&&s(i,{container:"marker.line",min:"cmin",max:"cmax"})}for(var a in b._colorAxes)s(b[a],{min:"cmin",max:"cmax"})}},1586:function(Q,z,t){var S=t(92770),k=t(71828),l=t(76228),T=t(62499),b=t(63282).isValid,d=t(73972).traceIs;function s(e,i){var r=i.slice(0,i.length-1);return i?k.nestedProperty(e,r).get()||{}:e}Q.exports=function e(i,r,n,a,o){var u=o.prefix,p=o.cLetter,c="_module"in r,x=s(i,u),g=s(r,u),f=s(r._template||{},u)||{},y=function(){return delete i.coloraxis,delete r.coloraxis,e(i,r,n,a,o)};if(c){var v=n._colorAxes||{},m=a(u+"coloraxis");if(m){var _=d(r,"contour")&&k.nestedProperty(r,"contours.coloring").get()||"heatmap",h=v[m];return void(h?(h[2].push(y),h[0]!==_&&(h[0]=!1,k.warn(["Ignoring coloraxis:",m,"setting","as it is linked to incompatible colorscales."].join(" ")))):v[m]=[_,r,[y]])}}var A=x[p+"min"],w=x[p+"max"],E=S(A)&&S(w)&&A<w;a(u+p+"auto",!E)?a(u+p+"mid"):(a(u+p+"min"),a(u+p+"max"));var L,C,P=x.colorscale,D=f.colorscale;P!==void 0&&(L=!b(P)),D!==void 0&&(L=!b(D)),a(u+"autocolorscale",L),a(u+"colorscale"),a(u+"reversescale"),u!=="marker.line."&&(u&&c&&(C=l(x)),a(u+"showscale",C)&&(u&&f&&(g._template=f),T(x,g,n)))}},52075:function(Q,z,t){var S=t(39898),k=t(84267),l=t(92770),T=t(71828),b=t(7901),d=t(63282).isValid,s=["showscale","autocolorscale","colorscale","reversescale","colorbar"],e=["min","max","mid","auto"];function i(u){var p,c,x,g=u._colorAx,f=g||u,y={};for(c=0;c<s.length;c++)y[x=s[c]]=f[x];if(g)for(p="c",c=0;c<e.length;c++)y[x=e[c]]=f["c"+x];else{var v;for(c=0;c<e.length;c++)((v="c"+(x=e[c]))in f||(v="z"+x)in f)&&(y[x]=f[v]);p=v.charAt(0)}return y._sync=function(m,_){var h=e.indexOf(m)!==-1?p+m:m;f[h]=f["_"+h]=_},y}function r(u){for(var p=i(u),c=p.min,x=p.max,g=p.reversescale?n(p.colorscale):p.colorscale,f=g.length,y=new Array(f),v=new Array(f),m=0;m<f;m++){var _=g[m];y[m]=c+_[0]*(x-c),v[m]=_[1]}return{domain:y,range:v}}function n(u){for(var p=u.length,c=new Array(p),x=p-1,g=0;x>=0;x--,g++){var f=u[x];c[g]=[1-f[0],f[1]]}return c}function a(u,p){p=p||{};for(var c=u.domain,x=u.range,g=x.length,f=new Array(g),y=0;y<g;y++){var v=k(x[y]).toRgb();f[y]=[v.r,v.g,v.b,v.a]}var m,_=S.scale.linear().domain(c).range(f).clamp(!0),h=p.noNumericCheck,A=p.returnArray;return(m=h&&A?_:h?function(w){return o(_(w))}:A?function(w){return l(w)?_(w):k(w).isValid()?w:b.defaultLine}:function(w){return l(w)?o(_(w)):k(w).isValid()?w:b.defaultLine}).domain=_.domain,m.range=function(){return x},m}function o(u){var p={r:u[0],g:u[1],b:u[2],a:u[3]};return k(p).toRgbString()}Q.exports={hasColorscale:function(u,p,c){var x=p?T.nestedProperty(u,p).get()||{}:u,g=x[c||"color"],f=!1;if(T.isArrayOrTypedArray(g)){for(var y=0;y<g.length;y++)if(l(g[y])){f=!0;break}}return T.isPlainObject(x)&&(f||x.showscale===!0||l(x.cmin)&&l(x.cmax)||d(x.colorscale)||T.isPlainObject(x.colorbar))},extractOpts:i,extractScale:r,flipScale:n,makeColorScaleFunc:a,makeColorScaleFuncFromTrace:function(u,p){return a(r(u),p)}}},21081:function(Q,z,t){var S=t(63282),k=t(52075);Q.exports={moduleType:"component",name:"colorscale",attributes:t(50693),layoutAttributes:t(72673),supplyLayoutDefaults:t(30959),handleDefaults:t(1586),crossTraceDefaults:t(33046),calc:t(78803),scales:S.scales,defaultScale:S.defaultScale,getScale:S.get,isValidScale:S.isValid,hasColorscale:k.hasColorscale,extractOpts:k.extractOpts,extractScale:k.extractScale,flipScale:k.flipScale,makeColorScaleFunc:k.makeColorScaleFunc,makeColorScaleFuncFromTrace:k.makeColorScaleFuncFromTrace}},72673:function(Q,z,t){var S=t(1426).extendFlat,k=t(50693),l=t(63282).scales;Q.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:l.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:l.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:l.RdBu,editType:"calc"}},coloraxis:S({_isSubplotObj:!0,editType:"calc"},k("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},30959:function(Q,z,t){var S=t(71828),k=t(44467),l=t(72673),T=t(1586);Q.exports=function(b,d){function s(p,c){return S.coerce(b,d,l,p,c)}s("colorscale.sequential"),s("colorscale.sequentialminus"),s("colorscale.diverging");var e,i,r=d._colorAxes;function n(p,c){return S.coerce(e,i,l.coloraxis,p,c)}for(var a in r){var o=r[a];if(o[0])e=b[a]||{},(i=k.newContainer(d,a,"coloraxis"))._name=a,T(e,i,d,n,{prefix:"",cLetter:"c"});else{for(var u=0;u<o[2].length;u++)o[2][u]();delete d._colorAxes[a]}}}},63282:function(Q,z,t){var S=t(84267),k={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},l=k.RdBu;function T(b){var d=0;if(!Array.isArray(b)||b.length<2||!b[0]||!b[b.length-1]||+b[0][0]!=0||+b[b.length-1][0]!=1)return!1;for(var s=0;s<b.length;s++){var e=b[s];if(e.length!==2||+e[0]<d||!S(e[1]).isValid())return!1;d=+e[0]}return!0}Q.exports={scales:k,defaultScale:l,get:function(b,d){if(d||(d=l),!b)return d;function s(){try{b=k[b]||JSON.parse(b)}catch{b=d}}return typeof b=="string"&&(s(),typeof b=="string"&&s()),T(b)?b:d},isValid:function(b){return k[b]!==void 0||T(b)}}},92807:function(Q){Q.exports=function(z,t,S,k,l){var T=(z-S)/(k-S),b=T+t/(k-S),d=(T+b)/2;return l==="left"||l==="bottom"?T:l==="center"||l==="middle"?d:l==="right"||l==="top"?b:T<.6666666666666666-d?T:b>1.3333333333333333-d?b:d}},70461:function(Q,z,t){var S=t(71828),k=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];Q.exports=function(l,T,b,d){return l=b==="left"?0:b==="center"?1:b==="right"?2:S.constrain(Math.floor(3*l),0,2),T=d==="bottom"?0:d==="middle"?1:d==="top"?2:S.constrain(Math.floor(3*T),0,2),k[T][l]}},64505:function(Q,z){z.selectMode=function(t){return t==="lasso"||t==="select"},z.drawMode=function(t){return t==="drawclosedpath"||t==="drawopenpath"||t==="drawline"||t==="drawrect"||t==="drawcircle"},z.openMode=function(t){return t==="drawline"||t==="drawopenpath"},z.rectMode=function(t){return t==="select"||t==="drawline"||t==="drawrect"||t==="drawcircle"},z.freeMode=function(t){return t==="lasso"||t==="drawclosedpath"||t==="drawopenpath"},z.selectingOrDrawing=function(t){return z.freeMode(t)||z.rectMode(t)}},28569:function(Q,z,t){var S=t(48956),k=t(57035),l=t(38520),T=t(71828).removeElement,b=t(85555),d=Q.exports={};d.align=t(92807),d.getCursor=t(70461);var s=t(26041);function e(){var r=document.createElement("div");r.className="dragcover";var n=r.style;return n.position="fixed",n.left=0,n.right=0,n.top=0,n.bottom=0,n.zIndex=999999999,n.background="none",document.body.appendChild(r),r}function i(r){return S(r.changedTouches?r.changedTouches[0]:r,document.body)}d.unhover=s.wrapped,d.unhoverRaw=s.raw,d.init=function(r){var n,a,o,u,p,c,x,g,f=r.gd,y=1,v=f._context.doubleClickDelay,m=r.element;f._mouseDownTime||(f._mouseDownTime=0),m.style.pointerEvents="all",m.onmousedown=h,l?(m._ontouchstart&&m.removeEventListener("touchstart",m._ontouchstart),m._ontouchstart=h,m.addEventListener("touchstart",h,{passive:!1})):m.ontouchstart=h;var _=r.clampFn||function(E,L,C){return Math.abs(E)<C&&(E=0),Math.abs(L)<C&&(L=0),[E,L]};function h(E){f._dragged=!1,f._dragging=!0;var L=i(E);n=L[0],a=L[1],x=E.target,c=E,g=E.buttons===2||E.ctrlKey,E.clientX===void 0&&E.clientY===void 0&&(E.clientX=n,E.clientY=a),(o=new Date().getTime())-f._mouseDownTime<v?y+=1:(y=1,f._mouseDownTime=o),r.prepFn&&r.prepFn(E,n,a),k&&!g?(p=e()).style.cursor=window.getComputedStyle(m).cursor:k||(p=document,u=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(m).cursor),document.addEventListener("mouseup",w),document.addEventListener("touchend",w),r.dragmode!==!1&&(E.preventDefault(),document.addEventListener("mousemove",A),document.addEventListener("touchmove",A,{passive:!1}))}function A(E){E.preventDefault();var L=i(E),C=r.minDrag||b.MINDRAG,P=_(L[0]-n,L[1]-a,C),D=P[0],G=P[1];(D||G)&&(f._dragged=!0,d.unhover(f,E)),f._dragged&&r.moveFn&&!g&&(f._dragdata={element:m,dx:D,dy:G},r.moveFn(D,G))}function w(E){if(delete f._dragdata,r.dragmode!==!1&&(E.preventDefault(),document.removeEventListener("mousemove",A),document.removeEventListener("touchmove",A)),document.removeEventListener("mouseup",w),document.removeEventListener("touchend",w),k?T(p):u&&(p.documentElement.style.cursor=u,u=null),f._dragging){if(f._dragging=!1,new Date().getTime()-f._mouseDownTime>v&&(y=Math.max(y-1,1)),f._dragged)r.doneFn&&r.doneFn();else if(r.clickFn&&r.clickFn(y,c),!g){var L;try{L=new MouseEvent("click",E)}catch{var C=i(E);(L=document.createEvent("MouseEvents")).initMouseEvent("click",E.bubbles,E.cancelable,E.view,E.detail,E.screenX,E.screenY,C[0],C[1],E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,E.relatedTarget)}x.dispatchEvent(L)}f._dragging=!1,f._dragged=!1}else f._dragged=!1}},d.coverSlip=e},26041:function(Q,z,t){var S=t(11086),k=t(79990),l=t(24401).getGraphDiv,T=t(26675),b=Q.exports={};b.wrapped=function(d,s,e){(d=l(d))._fullLayout&&k.clear(d._fullLayout._uid+T.HOVERID),b.raw(d,s,e)},b.raw=function(d,s){var e=d._fullLayout,i=d._hoverdata;s||(s={}),s.target&&!d._dragged&&S.triggerHandler(d,"plotly_beforehover",s)===!1||(e._hoverlayer.selectAll("g").remove(),e._hoverlayer.selectAll("line").remove(),e._hoverlayer.selectAll("circle").remove(),d._hoverdata=void 0,s.target&&i&&d.emit("plotly_unhover",{event:s,points:i}))}},79952:function(Q,z){z.P={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},z.u={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},91424:function(Q,z,t){var S=t(39898),k=t(71828),l=k.numberFormat,T=t(92770),b=t(84267),d=t(73972),s=t(7901),e=t(21081),i=k.strTranslate,r=t(63893),n=t(77922),a=t(18783).LINE_SPACING,o=t(37822).DESELECTDIM,u=t(34098),p=t(39984),c=t(23469).appendArrayPointValue,x=Q.exports={};function g(Ae,Te,se){var le=Te.fillpattern,ne=le&&x.getPatternAttr(le.shape,0,"");if(ne){var me=x.getPatternAttr(le.bgcolor,0,null),Ee=x.getPatternAttr(le.fgcolor,0,null),be=le.fgopacity,De=x.getPatternAttr(le.size,0,8),Ue=x.getPatternAttr(le.solidity,0,.3),he=Te.uid;x.pattern(Ae,"point",se,he,ne,De,Ue,void 0,le.fillmode,me,Ee,be)}else Te.fillcolor&&Ae.call(s.fill,Te.fillcolor)}x.font=function(Ae,Te,se,le){k.isPlainObject(Te)&&(le=Te.color,se=Te.size,Te=Te.family),Te&&Ae.style("font-family",Te),se+1&&Ae.style("font-size",se+"px"),le&&Ae.call(s.fill,le)},x.setPosition=function(Ae,Te,se){Ae.attr("x",Te).attr("y",se)},x.setSize=function(Ae,Te,se){Ae.attr("width",Te).attr("height",se)},x.setRect=function(Ae,Te,se,le,ne){Ae.call(x.setPosition,Te,se).call(x.setSize,le,ne)},x.translatePoint=function(Ae,Te,se,le){var ne=se.c2p(Ae.x),me=le.c2p(Ae.y);return!!(T(ne)&&T(me)&&Te.node())&&(Te.node().nodeName==="text"?Te.attr("x",ne).attr("y",me):Te.attr("transform",i(ne,me)),!0)},x.translatePoints=function(Ae,Te,se){Ae.each(function(le){var ne=S.select(this);x.translatePoint(le,ne,Te,se)})},x.hideOutsideRangePoint=function(Ae,Te,se,le,ne,me){Te.attr("display",se.isPtWithinRange(Ae,ne)&&le.isPtWithinRange(Ae,me)?null:"none")},x.hideOutsideRangePoints=function(Ae,Te){if(Te._hasClipOnAxisFalse){var se=Te.xaxis,le=Te.yaxis;Ae.each(function(ne){var me=ne[0].trace,Ee=me.xcalendar,be=me.ycalendar,De=d.traceIs(me,"bar-like")?".bartext":".point,.textpoint";Ae.selectAll(De).each(function(Ue){x.hideOutsideRangePoint(Ue,S.select(this),se,le,Ee,be)})})}},x.crispRound=function(Ae,Te,se){return Te&&T(Te)?Ae._context.staticPlot?Te:Te<1?1:Math.round(Te):se||0},x.singleLineStyle=function(Ae,Te,se,le,ne){Te.style("fill","none");var me=(((Ae||[])[0]||{}).trace||{}).line||{},Ee=se||me.width||0,be=ne||me.dash||"";s.stroke(Te,le||me.color),x.dashLine(Te,be,Ee)},x.lineGroupStyle=function(Ae,Te,se,le){Ae.style("fill","none").each(function(ne){var me=(((ne||[])[0]||{}).trace||{}).line||{},Ee=Te||me.width||0,be=le||me.dash||"";S.select(this).call(s.stroke,se||me.color).call(x.dashLine,be,Ee)})},x.dashLine=function(Ae,Te,se){se=+se||0,Te=x.dashStyle(Te,se),Ae.style({"stroke-dasharray":Te,"stroke-width":se+"px"})},x.dashStyle=function(Ae,Te){Te=+Te||1;var se=Math.max(Te,3);return Ae==="solid"?Ae="":Ae==="dot"?Ae=se+"px,"+se+"px":Ae==="dash"?Ae=3*se+"px,"+3*se+"px":Ae==="longdash"?Ae=5*se+"px,"+5*se+"px":Ae==="dashdot"?Ae=3*se+"px,"+se+"px,"+se+"px,"+se+"px":Ae==="longdashdot"&&(Ae=5*se+"px,"+2*se+"px,"+se+"px,"+2*se+"px"),Ae},x.singleFillStyle=function(Ae,Te){var se=S.select(Ae.node());g(Ae,((se.data()[0]||[])[0]||{}).trace||{},Te)},x.fillGroupStyle=function(Ae,Te){Ae.style("stroke-width",0).each(function(se){var le=S.select(this);se[0].trace&&g(le,se[0].trace,Te)})};var f=t(90998);x.symbolNames=[],x.symbolFuncs=[],x.symbolBackOffs=[],x.symbolNeedLines={},x.symbolNoDot={},x.symbolNoFill={},x.symbolList=[],Object.keys(f).forEach(function(Ae){var Te=f[Ae],se=Te.n;x.symbolList.push(se,String(se),Ae,se+100,String(se+100),Ae+"-open"),x.symbolNames[se]=Ae,x.symbolFuncs[se]=Te.f,x.symbolBackOffs[se]=Te.backoff||0,Te.needLine&&(x.symbolNeedLines[se]=!0),Te.noDot?x.symbolNoDot[se]=!0:x.symbolList.push(se+200,String(se+200),Ae+"-dot",se+300,String(se+300),Ae+"-open-dot"),Te.noFill&&(x.symbolNoFill[se]=!0)});var y=x.symbolNames.length;function v(Ae,Te,se,le){var ne=Ae%100;return x.symbolFuncs[ne](Te,se,le)+(Ae>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}x.symbolNumber=function(Ae){if(T(Ae))Ae=+Ae;else if(typeof Ae=="string"){var Te=0;Ae.indexOf("-open")>0&&(Te=100,Ae=Ae.replace("-open","")),Ae.indexOf("-dot")>0&&(Te+=200,Ae=Ae.replace("-dot","")),(Ae=x.symbolNames.indexOf(Ae))>=0&&(Ae+=Te)}return Ae%100>=y||Ae>=400?0:Math.floor(Math.max(Ae,0))};var m={x1:1,x2:0,y1:0,y2:0},_={x1:0,x2:0,y1:1,y2:0},h=l("~f"),A={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:m},horizontalreversed:{node:"linearGradient",attrs:m,reversed:!0},vertical:{node:"linearGradient",attrs:_},verticalreversed:{node:"linearGradient",attrs:_,reversed:!0}};x.gradient=function(Ae,Te,se,le,ne,me){for(var Ee=ne.length,be=A[le],De=new Array(Ee),Ue=0;Ue<Ee;Ue++)be.reversed?De[Ee-1-Ue]=[h(100*(1-ne[Ue][0])),ne[Ue][1]]:De[Ue]=[h(100*ne[Ue][0]),ne[Ue][1]];var he=Te._fullLayout,ke="g"+he._uid+"-"+se,_e=he._defs.select(".gradients").selectAll("#"+ke).data([le+De.join(";")],k.identity);_e.exit().remove(),_e.enter().append(be.node).each(function(){var Ce=S.select(this);be.attrs&&Ce.attr(be.attrs),Ce.attr("id",ke);var Fe=Ce.selectAll("stop").data(De);Fe.exit().remove(),Fe.enter().append("stop"),Fe.each(function(Re){var He=b(Re[1]);S.select(this).attr({offset:Re[0]+"%","stop-color":s.tinyRGB(He),"stop-opacity":He.getAlpha()})})}),Ae.style(me,$(ke,Te)).style(me+"-opacity",null),Ae.classed("gradient_filled",!0)},x.pattern=function(Ae,Te,se,le,ne,me,Ee,be,De,Ue,he,ke){var _e=Te==="legend";be&&(De==="overlay"?(Ue=be,he=s.contrast(Ue)):(Ue=void 0,he=be));var Ce,Fe,Re,He,Ge,$e,st,Ke,gt,mt=se._fullLayout,at="p"+mt._uid+"-"+le,rt={},xt=b(he),Tt=s.tinyRGB(xt),wt=ke*xt.getAlpha();switch(ne){case"/":Ce=me*Math.sqrt(2),Fe=me*Math.sqrt(2),$e="path",rt={d:Re="M-"+Ce/4+","+Fe/4+"l"+Ce/2+",-"+Fe/2+"M0,"+Fe+"L"+Ce+",0M"+Ce/4*3+","+Fe/4*5+"l"+Ce/2+",-"+Fe/2,opacity:wt,stroke:Tt,"stroke-width":(He=Ee*me)+"px"};break;case"\\":Ce=me*Math.sqrt(2),Fe=me*Math.sqrt(2),$e="path",rt={d:Re="M"+Ce/4*3+",-"+Fe/4+"l"+Ce/2+","+Fe/2+"M0,0L"+Ce+","+Fe+"M-"+Ce/4+","+Fe/4*3+"l"+Ce/2+","+Fe/2,opacity:wt,stroke:Tt,"stroke-width":(He=Ee*me)+"px"};break;case"x":Ce=me*Math.sqrt(2),Fe=me*Math.sqrt(2),Re="M-"+Ce/4+","+Fe/4+"l"+Ce/2+",-"+Fe/2+"M0,"+Fe+"L"+Ce+",0M"+Ce/4*3+","+Fe/4*5+"l"+Ce/2+",-"+Fe/2+"M"+Ce/4*3+",-"+Fe/4+"l"+Ce/2+","+Fe/2+"M0,0L"+Ce+","+Fe+"M-"+Ce/4+","+Fe/4*3+"l"+Ce/2+","+Fe/2,He=me-me*Math.sqrt(1-Ee),$e="path",rt={d:Re,opacity:wt,stroke:Tt,"stroke-width":He+"px"};break;case"|":$e="path",$e="path",rt={d:Re="M"+(Ce=me)/2+",0L"+Ce/2+","+(Fe=me),opacity:wt,stroke:Tt,"stroke-width":(He=Ee*me)+"px"};break;case"-":$e="path",$e="path",rt={d:Re="M0,"+(Fe=me)/2+"L"+(Ce=me)+","+Fe/2,opacity:wt,stroke:Tt,"stroke-width":(He=Ee*me)+"px"};break;case"+":$e="path",Re="M"+(Ce=me)/2+",0L"+Ce/2+","+(Fe=me)+"M0,"+Fe/2+"L"+Ce+","+Fe/2,He=me-me*Math.sqrt(1-Ee),$e="path",rt={d:Re,opacity:wt,stroke:Tt,"stroke-width":He+"px"};break;case".":Ce=me,Fe=me,Ee<Math.PI/4?Ge=Math.sqrt(Ee*me*me/Math.PI):(st=Ee,Ke=Math.PI/4,Ge=(gt=me/2)+(me/Math.sqrt(2)-gt)*(st-Ke)/(1-Ke)),$e="circle",rt={cx:Ce/2,cy:Fe/2,r:Ge,opacity:wt,fill:Tt}}var Ot=[ne||"noSh",Ue||"noBg",he||"noFg",me,Ee].join(";"),Ct=mt._defs.select(".patterns").selectAll("#"+at).data([Ot],k.identity);Ct.exit().remove(),Ct.enter().append("pattern").each(function(){var Ye=S.select(this);if(Ye.attr({id:at,width:Ce+"px",height:Fe+"px",patternUnits:"userSpaceOnUse",patternTransform:_e?"scale(0.8)":""}),Ue){var Xe=b(Ue),Ve=s.tinyRGB(Xe),We=Xe.getAlpha(),nt=Ye.selectAll("rect").data([0]);nt.exit().remove(),nt.enter().append("rect").attr({width:Ce+"px",height:Fe+"px",fill:Ve,"fill-opacity":We})}var ot=Ye.selectAll($e).data([0]);ot.exit().remove(),ot.enter().append($e).attr(rt)}),Ae.style("fill",$(at,se)).style("fill-opacity",null),Ae.classed("pattern_filled",!0)},x.initGradients=function(Ae){var Te=Ae._fullLayout;k.ensureSingle(Te._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),S.select(Ae).selectAll(".gradient_filled").classed("gradient_filled",!1)},x.initPatterns=function(Ae){var Te=Ae._fullLayout;k.ensureSingle(Te._defs,"g","patterns").selectAll("pattern").remove(),S.select(Ae).selectAll(".pattern_filled").classed("pattern_filled",!1)},x.getPatternAttr=function(Ae,Te,se){return Ae&&k.isArrayOrTypedArray(Ae)?Te<Ae.length?Ae[Te]:se:Ae},x.pointStyle=function(Ae,Te,se){if(Ae.size()){var le=x.makePointStyleFns(Te);Ae.each(function(ne){x.singlePointStyle(ne,S.select(this),Te,le,se)})}},x.singlePointStyle=function(Ae,Te,se,le,ne){var me=se.marker,Ee=me.line;if(Te.style("opacity",le.selectedOpacityFn?le.selectedOpacityFn(Ae):Ae.mo===void 0?me.opacity:Ae.mo),le.ms2mrc){var be;be=Ae.ms==="various"||me.size==="various"?3:le.ms2mrc(Ae.ms),Ae.mrc=be,le.selectedSizeFn&&(be=Ae.mrc=le.selectedSizeFn(Ae));var De=x.symbolNumber(Ae.mx||me.symbol)||0;Ae.om=De%200>=100;var Ue=Oe(Ae,se),he=J(Ae,se);Te.attr("d",v(De,be,Ue,he))}var ke,_e,Ce,Fe=!1;if(Ae.so)Ce=Ee.outlierwidth,_e=Ee.outliercolor,ke=me.outliercolor;else{var Re=(Ee||{}).width;Ce=(Ae.mlw+1||Re+1||(Ae.trace?(Ae.trace.marker.line||{}).width:0)+1)-1||0,_e="mlc"in Ae?Ae.mlcc=le.lineScale(Ae.mlc):k.isArrayOrTypedArray(Ee.color)?s.defaultLine:Ee.color,k.isArrayOrTypedArray(me.color)&&(ke=s.defaultLine,Fe=!0),ke="mc"in Ae?Ae.mcc=le.markerScale(Ae.mc):me.color||"rgba(0,0,0,0)",le.selectedColorFn&&(ke=le.selectedColorFn(Ae))}if(Ae.om)Te.call(s.stroke,ke).style({"stroke-width":(Ce||1)+"px",fill:"none"});else{Te.style("stroke-width",(Ae.isBlank?0:Ce)+"px");var He=me.gradient,Ge=Ae.mgt;Ge?Fe=!0:Ge=He&&He.type,k.isArrayOrTypedArray(Ge)&&(Ge=Ge[0],A[Ge]||(Ge=0));var $e=me.pattern,st=$e&&x.getPatternAttr($e.shape,Ae.i,"");if(Ge&&Ge!=="none"){var Ke=Ae.mgc;Ke?Fe=!0:Ke=He.color;var gt=se.uid;Fe&&(gt+="-"+Ae.i),x.gradient(Te,ne,gt,Ge,[[0,Ke],[1,ke]],"fill")}else if(st){var mt=x.getPatternAttr($e.bgcolor,Ae.i,null),at=x.getPatternAttr($e.fgcolor,Ae.i,null),rt=$e.fgopacity,xt=x.getPatternAttr($e.size,Ae.i,8),Tt=x.getPatternAttr($e.solidity,Ae.i,.3),wt=Ae.mcc||k.isArrayOrTypedArray($e.shape)||k.isArrayOrTypedArray($e.bgcolor)||k.isArrayOrTypedArray($e.size)||k.isArrayOrTypedArray($e.solidity),Ot=se.uid;wt&&(Ot+="-"+Ae.i),x.pattern(Te,"point",ne,Ot,st,xt,Tt,Ae.mcc,$e.fillmode,mt,at,rt)}else s.fill(Te,ke);Ce&&s.stroke(Te,_e)}},x.makePointStyleFns=function(Ae){var Te={},se=Ae.marker;return Te.markerScale=x.tryColorscale(se,""),Te.lineScale=x.tryColorscale(se,"line"),d.traceIs(Ae,"symbols")&&(Te.ms2mrc=u.isBubble(Ae)?p(Ae):function(){return(se.size||6)/2}),Ae.selectedpoints&&k.extendFlat(Te,x.makeSelectedPointStyleFns(Ae)),Te},x.makeSelectedPointStyleFns=function(Ae){var Te={},se=Ae.selected||{},le=Ae.unselected||{},ne=Ae.marker||{},me=se.marker||{},Ee=le.marker||{},be=ne.opacity,De=me.opacity,Ue=Ee.opacity,he=De!==void 0,ke=Ue!==void 0;(k.isArrayOrTypedArray(be)||he||ke)&&(Te.selectedOpacityFn=function(Ke){var gt=Ke.mo===void 0?ne.opacity:Ke.mo;return Ke.selected?he?De:gt:ke?Ue:o*gt});var _e=ne.color,Ce=me.color,Fe=Ee.color;(Ce||Fe)&&(Te.selectedColorFn=function(Ke){var gt=Ke.mcc||_e;return Ke.selected?Ce||gt:Fe||gt});var Re=ne.size,He=me.size,Ge=Ee.size,$e=He!==void 0,st=Ge!==void 0;return d.traceIs(Ae,"symbols")&&($e||st)&&(Te.selectedSizeFn=function(Ke){var gt=Ke.mrc||Re/2;return Ke.selected?$e?He/2:gt:st?Ge/2:gt}),Te},x.makeSelectedTextStyleFns=function(Ae){var Te={},se=Ae.selected||{},le=Ae.unselected||{},ne=Ae.textfont||{},me=se.textfont||{},Ee=le.textfont||{},be=ne.color,De=me.color,Ue=Ee.color;return Te.selectedTextColorFn=function(he){var ke=he.tc||be;return he.selected?De||ke:Ue||(De?ke:s.addOpacity(ke,o))},Te},x.selectedPointStyle=function(Ae,Te){if(Ae.size()&&Te.selectedpoints){var se=x.makeSelectedPointStyleFns(Te),le=Te.marker||{},ne=[];se.selectedOpacityFn&&ne.push(function(me,Ee){me.style("opacity",se.selectedOpacityFn(Ee))}),se.selectedColorFn&&ne.push(function(me,Ee){s.fill(me,se.selectedColorFn(Ee))}),se.selectedSizeFn&&ne.push(function(me,Ee){var be=Ee.mx||le.symbol||0,De=se.selectedSizeFn(Ee);me.attr("d",v(x.symbolNumber(be),De,Oe(Ee,Te),J(Ee,Te))),Ee.mrc2=De}),ne.length&&Ae.each(function(me){for(var Ee=S.select(this),be=0;be<ne.length;be++)ne[be](Ee,me)})}},x.tryColorscale=function(Ae,Te){var se=Te?k.nestedProperty(Ae,Te).get():Ae;if(se){var le=se.color;if((se.colorscale||se._colorAx)&&k.isArrayOrTypedArray(le))return e.makeColorScaleFuncFromTrace(se)}return k.identity};var w,E,L={start:1,end:-1,middle:0,bottom:1,top:-1};function C(Ae,Te,se,le,ne){var me=S.select(Ae.node().parentNode),Ee=Te.indexOf("top")!==-1?"top":Te.indexOf("bottom")!==-1?"bottom":"middle",be=Te.indexOf("left")!==-1?"end":Te.indexOf("right")!==-1?"start":"middle",De=le?le/.8+1:0,Ue=(r.lineCount(Ae)-1)*a+1,he=L[be]*De,ke=.75*se+L[Ee]*De+(L[Ee]-1)*Ue*se/2;Ae.attr("text-anchor",be),ne||me.attr("transform",i(he,ke))}function P(Ae,Te){var se=Ae.ts||Te.textfont.size;return T(se)&&se>0?se:0}function D(Ae,Te,se){return se&&(Ae=V(Ae)),Te?I(Ae[1]):G(Ae[0])}function G(Ae){var Te=S.round(Ae,2);return w=Te,Te}function I(Ae){var Te=S.round(Ae,2);return E=Te,Te}function H(Ae,Te,se,le){var ne=Ae[0]-Te[0],me=Ae[1]-Te[1],Ee=se[0]-Te[0],be=se[1]-Te[1],De=Math.pow(ne*ne+me*me,.25),Ue=Math.pow(Ee*Ee+be*be,.25),he=(Ue*Ue*ne-De*De*Ee)*le,ke=(Ue*Ue*me-De*De*be)*le,_e=3*Ue*(De+Ue),Ce=3*De*(De+Ue);return[[G(Te[0]+(_e&&he/_e)),I(Te[1]+(_e&&ke/_e))],[G(Te[0]-(Ce&&he/Ce)),I(Te[1]-(Ce&&ke/Ce))]]}x.textPointStyle=function(Ae,Te,se){if(Ae.size()){var le;if(Te.selectedpoints){var ne=x.makeSelectedTextStyleFns(Te);le=ne.selectedTextColorFn}var me=Te.texttemplate,Ee=se._fullLayout;Ae.each(function(be){var De=S.select(this),Ue=me?k.extractOption(be,Te,"txt","texttemplate"):k.extractOption(be,Te,"tx","text");if(Ue||Ue===0){if(me){var he=Te._module.formatLabels,ke=he?he(be,Te,Ee):{},_e={};c(_e,Te,be.i);var Ce=Te._meta||{};Ue=k.texttemplateString(Ue,ke,Ee._d3locale,_e,be,Ce)}var Fe=be.tp||Te.textposition,Re=P(be,Te),He=le?le(be):be.tc||Te.textfont.color;De.call(x.font,be.tf||Te.textfont.family,Re,He).text(Ue).call(r.convertToTspans,se).call(C,Fe,Re,be.mrc)}else De.remove()})}},x.selectedTextStyle=function(Ae,Te){if(Ae.size()&&Te.selectedpoints){var se=x.makeSelectedTextStyleFns(Te);Ae.each(function(le){var ne=S.select(this),me=se.selectedTextColorFn(le),Ee=le.tp||Te.textposition,be=P(le,Te);s.fill(ne,me);var De=d.traceIs(Te,"bar-like");C(ne,Ee,be,le.mrc2||le.mrc,De)})}},x.smoothopen=function(Ae,Te){if(Ae.length<3)return"M"+Ae.join("L");var se,le="M"+Ae[0],ne=[];for(se=1;se<Ae.length-1;se++)ne.push(H(Ae[se-1],Ae[se],Ae[se+1],Te));for(le+="Q"+ne[0][0]+" "+Ae[1],se=2;se<Ae.length-1;se++)le+="C"+ne[se-2][1]+" "+ne[se-1][0]+" "+Ae[se];return le+"Q"+ne[Ae.length-3][1]+" "+Ae[Ae.length-1]},x.smoothclosed=function(Ae,Te){if(Ae.length<3)return"M"+Ae.join("L")+"Z";var se,le="M"+Ae[0],ne=Ae.length-1,me=[H(Ae[ne],Ae[0],Ae[1],Te)];for(se=1;se<ne;se++)me.push(H(Ae[se-1],Ae[se],Ae[se+1],Te));for(me.push(H(Ae[ne-1],Ae[ne],Ae[0],Te)),se=1;se<=ne;se++)le+="C"+me[se-1][1]+" "+me[se][0]+" "+Ae[se];return le+"C"+me[ne][1]+" "+me[0][0]+" "+Ae[0]+"Z"};var N={hv:function(Ae,Te,se){return"H"+G(Te[0])+"V"+D(Te,1,se)},vh:function(Ae,Te,se){return"V"+I(Te[1])+"H"+D(Te,0,se)},hvh:function(Ae,Te,se){return"H"+G((Ae[0]+Te[0])/2)+"V"+I(Te[1])+"H"+D(Te,0,se)},vhv:function(Ae,Te,se){return"V"+I((Ae[1]+Te[1])/2)+"H"+G(Te[0])+"V"+D(Te,1,se)}},F=function(Ae,Te,se){return"L"+D(Te,0,se)+","+D(Te,1,se)};function V(Ae,Te){var se=Ae.backoff,le=Ae.trace,ne=Ae.d,me=Ae.i;if(se&&le&&le.marker&&le.marker.angle%360==0&&le.line&&le.line.shape!=="spline"){var Ee=k.isArrayOrTypedArray(se),be=Ae,De=Te?Te[0]:w||0,Ue=Te?Te[1]:E||0,he=be[0],ke=be[1],_e=he-De,Ce=ke-Ue,Fe=Math.atan2(Ce,_e),Re=Ee?se[me]:se;if(Re==="auto"){var He=be.i;le.type==="scatter"&&He--;var Ge=be.marker,$e=Ge.symbol;k.isArrayOrTypedArray($e)&&($e=$e[He]);var st=Ge.size;k.isArrayOrTypedArray(st)&&(st=st[He]),Re=Ge?x.symbolBackOffs[x.symbolNumber($e)]*st:0,Re+=x.getMarkerStandoff(ne[He],le)||0}var Ke=he-Re*Math.cos(Fe),gt=ke-Re*Math.sin(Fe);(Ke<=he&&Ke>=De||Ke>=he&&Ke<=De)&&(gt<=ke&&gt>=Ue||gt>=ke&&gt<=Ue)&&(Ae=[Ke,gt])}return Ae}x.steps=function(Ae){var Te=N[Ae]||F;return function(se){for(var le="M"+G(se[0][0])+","+I(se[0][1]),ne=se.length,me=1;me<ne;me++)le+=Te(se[me-1],se[me],me===ne-1);return le}},x.applyBackoff=V,x.makeTester=function(){var Ae=k.ensureSingleById(S.select("body"),"svg","js-plotly-tester",function(se){se.attr(n.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),Te=k.ensureSingle(Ae,"path","js-reference-point",function(se){se.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});x.tester=Ae,x.testref=Te},x.savedBBoxes={};var q=0;function te(Ae){var Te=Ae.getAttribute("data-unformatted");if(Te!==null)return Te+Ae.getAttribute("data-math")+Ae.getAttribute("text-anchor")+Ae.getAttribute("style")}function $(Ae,Te){if(!Ae)return null;var se=Te._context,le=se._exportedPlot?"":se._baseUrl||"";return le?"url('"+le+"#"+Ae+"')":"url(#"+Ae+")"}x.bBox=function(Ae,Te,se){var le,ne,me;if(se||(se=te(Ae)),se){if(le=x.savedBBoxes[se])return k.extendFlat({},le)}else if(Ae.childNodes.length===1){var Ee=Ae.childNodes[0];if(se=te(Ee)){var be=+Ee.getAttribute("x")||0,De=+Ee.getAttribute("y")||0,Ue=Ee.getAttribute("transform");if(!Ue){var he=x.bBox(Ee,!1,se);return be&&(he.left+=be,he.right+=be),De&&(he.top+=De,he.bottom+=De),he}if(se+="~"+be+"~"+De+"~"+Ue,le=x.savedBBoxes[se])return k.extendFlat({},le)}}Te?ne=Ae:(me=x.tester.node(),ne=Ae.cloneNode(!0),me.appendChild(ne)),S.select(ne).attr("transform",null).call(r.positionText,0,0);var ke=ne.getBoundingClientRect(),_e=x.testref.node().getBoundingClientRect();Te||me.removeChild(ne);var Ce={height:ke.height,width:ke.width,left:ke.left-_e.left,top:ke.top-_e.top,right:ke.right-_e.left,bottom:ke.bottom-_e.top};return q>=1e4&&(x.savedBBoxes={},q=0),se&&(x.savedBBoxes[se]=Ce),q++,k.extendFlat({},Ce)},x.setClipUrl=function(Ae,Te,se){Ae.attr("clip-path",$(Te,se))},x.getTranslate=function(Ae){var Te=(Ae[Ae.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(se,le,ne){return[le,ne].join(" ")}).split(" ");return{x:+Te[0]||0,y:+Te[1]||0}},x.setTranslate=function(Ae,Te,se){var le=Ae.attr?"attr":"getAttribute",ne=Ae.attr?"attr":"setAttribute",me=Ae[le]("transform")||"";return Te=Te||0,se=se||0,me=me.replace(/(\btranslate\(.*?\);?)/,"").trim(),me=(me+=i(Te,se)).trim(),Ae[ne]("transform",me),me},x.getScale=function(Ae){var Te=(Ae[Ae.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(se,le,ne){return[le,ne].join(" ")}).split(" ");return{x:+Te[0]||1,y:+Te[1]||1}},x.setScale=function(Ae,Te,se){var le=Ae.attr?"attr":"getAttribute",ne=Ae.attr?"attr":"setAttribute",me=Ae[le]("transform")||"";return Te=Te||1,se=se||1,me=me.replace(/(\bscale\(.*?\);?)/,"").trim(),me=(me+="scale("+Te+","+se+")").trim(),Ae[ne]("transform",me),me};var W=/\s*sc.*/;x.setPointGroupScale=function(Ae,Te,se){if(Te=Te||1,se=se||1,Ae){var le=Te===1&&se===1?"":"scale("+Te+","+se+")";Ae.each(function(){var ne=(this.getAttribute("transform")||"").replace(W,"");ne=(ne+=le).trim(),this.setAttribute("transform",ne)})}};var Z=/translate\([^)]*\)\s*$/;function J(Ae,Te){var se;return Ae&&(se=Ae.mf),se===void 0&&(se=Te.marker&&Te.marker.standoff||0),Te._geo||Te._xA?se:-se}x.setTextPointsScale=function(Ae,Te,se){Ae&&Ae.each(function(){var le,ne=S.select(this),me=ne.select("text");if(me.node()){var Ee=parseFloat(me.attr("x")||0),be=parseFloat(me.attr("y")||0),De=(ne.attr("transform")||"").match(Z);le=Te===1&&se===1?[]:[i(Ee,be),"scale("+Te+","+se+")",i(-Ee,-be)],De&&le.push(De),ne.attr("transform",le.join(""))}})},x.getMarkerStandoff=J;var ee,re,ae,oe,ce,pe,ve=Math.atan2,we=Math.cos,xe=Math.sin;function ge(Ae,Te){var se=Te[0],le=Te[1];return[se*we(Ae)-le*xe(Ae),se*xe(Ae)+le*we(Ae)]}function Oe(Ae,Te){var se,le,ne=Ae.ma;ne===void 0&&(ne=Te.marker.angle||0);var me=Te.marker.angleref;if(me==="previous"||me==="north"){if(Te._geo){var Ee=Te._geo.project(Ae.lonlat);se=Ee[0],le=Ee[1]}else{var be=Te._xA,De=Te._yA;if(!be||!De)return 90;se=be.c2p(Ae.x),le=De.c2p(Ae.y)}if(Te._geo){var Ue,he=Ae.lonlat[0],ke=Ae.lonlat[1],_e=Te._geo.project([he,ke+1e-5]),Ce=Te._geo.project([he+1e-5,ke]),Fe=ve(Ce[1]-le,Ce[0]-se),Re=ve(_e[1]-le,_e[0]-se);if(me==="north")Ue=ne/180*Math.PI;else if(me==="previous"){var He=he/180*Math.PI,Ge=ke/180*Math.PI,$e=ee/180*Math.PI,st=re/180*Math.PI,Ke=$e-He,gt=we(st)*xe(Ke),mt=xe(st)*we(Ge)-we(st)*xe(Ge)*we(Ke);Ue=-ve(gt,mt)-Math.PI,ee=he,re=ke}var at=ge(Fe,[we(Ue),0]),rt=ge(Re,[xe(Ue),0]);ne=ve(at[1]+rt[1],at[0]+rt[0])/Math.PI*180,me!=="previous"||pe===Te.uid&&Ae.i===ce+1||(ne=null)}if(me==="previous"&&!Te._geo)if(pe===Te.uid&&Ae.i===ce+1&&T(se)&&T(le)){var xt=se-ae,Tt=le-oe,wt=Te.line&&Te.line.shape||"",Ot=wt.slice(wt.length-1);Ot==="h"&&(Tt=0),Ot==="v"&&(xt=0),ne+=ve(Tt,xt)/Math.PI*180+90}else ne=null}return ae=se,oe=le,ce=Ae.i,pe=Te.uid,ne}x.getMarkerAngle=Oe},90998:function(Q,z,t){var S,k,l,T,b=t(95616),d=t(39898).round,s="M0,0Z",e=Math.sqrt(2),i=Math.sqrt(3),r=Math.PI,n=Math.cos,a=Math.sin;function o(p){return p===null}function u(p,c,x){if(!(p&&p%360!=0||c))return x;if(l===p&&T===c&&S===x)return k;function g(D,G){var I=n(D),H=a(D),N=G[0],F=G[1]+(c||0);return[N*I-F*H,N*H+F*I]}l=p,T=c,S=x;for(var f=p/180*r,y=0,v=0,m=b(x),_="",h=0;h<m.length;h++){var A=m[h],w=A[0],E=y,L=v;if(w==="M"||w==="L")y=+A[1],v=+A[2];else if(w==="m"||w==="l")y+=+A[1],v+=+A[2];else if(w==="H")y=+A[1];else if(w==="h")y+=+A[1];else if(w==="V")v=+A[1];else if(w==="v")v+=+A[1];else if(w==="A"){y=+A[1],v=+A[2];var C=g(f,[+A[6],+A[7]]);A[6]=C[0],A[7]=C[1],A[3]=+A[3]+p}w!=="H"&&w!=="V"||(w="L"),w!=="h"&&w!=="v"||(w="l"),w!=="m"&&w!=="l"||(y-=E,v-=L);var P=g(f,[y,v]);w!=="H"&&w!=="V"||(w="L"),w!=="M"&&w!=="L"&&w!=="m"&&w!=="l"||(A[1]=P[0],A[2]=P[1]),A[0]=w,_+=A[0]+A.slice(1).join(",")}return k=_,_}Q.exports={circle:{n:0,f:function(p,c,x){if(o(c))return s;var g=d(p,2),f="M"+g+",0A"+g+","+g+" 0 1,1 0,-"+g+"A"+g+","+g+" 0 0,1 "+g+",0Z";return x?u(c,x,f):f}},square:{n:1,f:function(p,c,x){if(o(c))return s;var g=d(p,2);return u(c,x,"M"+g+","+g+"H-"+g+"V-"+g+"H"+g+"Z")}},diamond:{n:2,f:function(p,c,x){if(o(c))return s;var g=d(1.3*p,2);return u(c,x,"M"+g+",0L0,"+g+"L-"+g+",0L0,-"+g+"Z")}},cross:{n:3,f:function(p,c,x){if(o(c))return s;var g=d(.4*p,2),f=d(1.2*p,2);return u(c,x,"M"+f+","+g+"H"+g+"V"+f+"H-"+g+"V"+g+"H-"+f+"V-"+g+"H-"+g+"V-"+f+"H"+g+"V-"+g+"H"+f+"Z")}},x:{n:4,f:function(p,c,x){if(o(c))return s;var g=d(.8*p/e,2),f="l"+g+","+g,y="l"+g+",-"+g,v="l-"+g+",-"+g,m="l-"+g+","+g;return u(c,x,"M0,"+g+f+y+v+y+v+m+v+m+f+m+f+"Z")}},"triangle-up":{n:5,f:function(p,c,x){if(o(c))return s;var g=d(2*p/i,2);return u(c,x,"M-"+g+","+d(p/2,2)+"H"+g+"L0,-"+d(p,2)+"Z")}},"triangle-down":{n:6,f:function(p,c,x){if(o(c))return s;var g=d(2*p/i,2);return u(c,x,"M-"+g+",-"+d(p/2,2)+"H"+g+"L0,"+d(p,2)+"Z")}},"triangle-left":{n:7,f:function(p,c,x){if(o(c))return s;var g=d(2*p/i,2);return u(c,x,"M"+d(p/2,2)+",-"+g+"V"+g+"L-"+d(p,2)+",0Z")}},"triangle-right":{n:8,f:function(p,c,x){if(o(c))return s;var g=d(2*p/i,2);return u(c,x,"M-"+d(p/2,2)+",-"+g+"V"+g+"L"+d(p,2)+",0Z")}},"triangle-ne":{n:9,f:function(p,c,x){if(o(c))return s;var g=d(.6*p,2),f=d(1.2*p,2);return u(c,x,"M-"+f+",-"+g+"H"+g+"V"+f+"Z")}},"triangle-se":{n:10,f:function(p,c,x){if(o(c))return s;var g=d(.6*p,2),f=d(1.2*p,2);return u(c,x,"M"+g+",-"+f+"V"+g+"H-"+f+"Z")}},"triangle-sw":{n:11,f:function(p,c,x){if(o(c))return s;var g=d(.6*p,2),f=d(1.2*p,2);return u(c,x,"M"+f+","+g+"H-"+g+"V-"+f+"Z")}},"triangle-nw":{n:12,f:function(p,c,x){if(o(c))return s;var g=d(.6*p,2),f=d(1.2*p,2);return u(c,x,"M-"+g+","+f+"V-"+g+"H"+f+"Z")}},pentagon:{n:13,f:function(p,c,x){if(o(c))return s;var g=d(.951*p,2),f=d(.588*p,2),y=d(-p,2),v=d(-.309*p,2);return u(c,x,"M"+g+","+v+"L"+f+","+d(.809*p,2)+"H-"+f+"L-"+g+","+v+"L0,"+y+"Z")}},hexagon:{n:14,f:function(p,c,x){if(o(c))return s;var g=d(p,2),f=d(p/2,2),y=d(p*i/2,2);return u(c,x,"M"+y+",-"+f+"V"+f+"L0,"+g+"L-"+y+","+f+"V-"+f+"L0,-"+g+"Z")}},hexagon2:{n:15,f:function(p,c,x){if(o(c))return s;var g=d(p,2),f=d(p/2,2),y=d(p*i/2,2);return u(c,x,"M-"+f+","+y+"H"+f+"L"+g+",0L"+f+",-"+y+"H-"+f+"L-"+g+",0Z")}},octagon:{n:16,f:function(p,c,x){if(o(c))return s;var g=d(.924*p,2),f=d(.383*p,2);return u(c,x,"M-"+f+",-"+g+"H"+f+"L"+g+",-"+f+"V"+f+"L"+f+","+g+"H-"+f+"L-"+g+","+f+"V-"+f+"Z")}},star:{n:17,f:function(p,c,x){if(o(c))return s;var g=1.4*p,f=d(.225*g,2),y=d(.951*g,2),v=d(.363*g,2),m=d(.588*g,2),_=d(-g,2),h=d(-.309*g,2),A=d(.118*g,2),w=d(.809*g,2);return u(c,x,"M"+f+","+h+"H"+y+"L"+v+","+A+"L"+m+","+w+"L0,"+d(.382*g,2)+"L-"+m+","+w+"L-"+v+","+A+"L-"+y+","+h+"H-"+f+"L0,"+_+"Z")}},hexagram:{n:18,f:function(p,c,x){if(o(c))return s;var g=d(.66*p,2),f=d(.38*p,2),y=d(.76*p,2);return u(c,x,"M-"+y+",0l-"+f+",-"+g+"h"+y+"l"+f+",-"+g+"l"+f+","+g+"h"+y+"l-"+f+","+g+"l"+f+","+g+"h-"+y+"l-"+f+","+g+"l-"+f+",-"+g+"h-"+y+"Z")}},"star-triangle-up":{n:19,f:function(p,c,x){if(o(c))return s;var g=d(p*i*.8,2),f=d(.8*p,2),y=d(1.6*p,2),v=d(4*p,2),m="A "+v+","+v+" 0 0 1 ";return u(c,x,"M-"+g+","+f+m+g+","+f+m+"0,-"+y+m+"-"+g+","+f+"Z")}},"star-triangle-down":{n:20,f:function(p,c,x){if(o(c))return s;var g=d(p*i*.8,2),f=d(.8*p,2),y=d(1.6*p,2),v=d(4*p,2),m="A "+v+","+v+" 0 0 1 ";return u(c,x,"M"+g+",-"+f+m+"-"+g+",-"+f+m+"0,"+y+m+g+",-"+f+"Z")}},"star-square":{n:21,f:function(p,c,x){if(o(c))return s;var g=d(1.1*p,2),f=d(2*p,2),y="A "+f+","+f+" 0 0 1 ";return u(c,x,"M-"+g+",-"+g+y+"-"+g+","+g+y+g+","+g+y+g+",-"+g+y+"-"+g+",-"+g+"Z")}},"star-diamond":{n:22,f:function(p,c,x){if(o(c))return s;var g=d(1.4*p,2),f=d(1.9*p,2),y="A "+f+","+f+" 0 0 1 ";return u(c,x,"M-"+g+",0"+y+"0,"+g+y+g+",0"+y+"0,-"+g+y+"-"+g+",0Z")}},"diamond-tall":{n:23,f:function(p,c,x){if(o(c))return s;var g=d(.7*p,2),f=d(1.4*p,2);return u(c,x,"M0,"+f+"L"+g+",0L0,-"+f+"L-"+g+",0Z")}},"diamond-wide":{n:24,f:function(p,c,x){if(o(c))return s;var g=d(1.4*p,2),f=d(.7*p,2);return u(c,x,"M0,"+f+"L"+g+",0L0,-"+f+"L-"+g+",0Z")}},hourglass:{n:25,f:function(p,c,x){if(o(c))return s;var g=d(p,2);return u(c,x,"M"+g+","+g+"H-"+g+"L"+g+",-"+g+"H-"+g+"Z")},noDot:!0},bowtie:{n:26,f:function(p,c,x){if(o(c))return s;var g=d(p,2);return u(c,x,"M"+g+","+g+"V-"+g+"L-"+g+","+g+"V-"+g+"Z")},noDot:!0},"circle-cross":{n:27,f:function(p,c,x){if(o(c))return s;var g=d(p,2);return u(c,x,"M0,"+g+"V-"+g+"M"+g+",0H-"+g+"M"+g+",0A"+g+","+g+" 0 1,1 0,-"+g+"A"+g+","+g+" 0 0,1 "+g+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(p,c,x){if(o(c))return s;var g=d(p,2),f=d(p/e,2);return u(c,x,"M"+f+","+f+"L-"+f+",-"+f+"M"+f+",-"+f+"L-"+f+","+f+"M"+g+",0A"+g+","+g+" 0 1,1 0,-"+g+"A"+g+","+g+" 0 0,1 "+g+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(p,c,x){if(o(c))return s;var g=d(p,2);return u(c,x,"M0,"+g+"V-"+g+"M"+g+",0H-"+g+"M"+g+","+g+"H-"+g+"V-"+g+"H"+g+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(p,c,x){if(o(c))return s;var g=d(p,2);return u(c,x,"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g+"M"+g+","+g+"H-"+g+"V-"+g+"H"+g+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(p,c,x){if(o(c))return s;var g=d(1.3*p,2);return u(c,x,"M"+g+",0L0,"+g+"L-"+g+",0L0,-"+g+"ZM0,-"+g+"V"+g+"M-"+g+",0H"+g)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(p,c,x){if(o(c))return s;var g=d(1.3*p,2),f=d(.65*p,2);return u(c,x,"M"+g+",0L0,"+g+"L-"+g+",0L0,-"+g+"ZM-"+f+",-"+f+"L"+f+","+f+"M-"+f+","+f+"L"+f+",-"+f)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(p,c,x){if(o(c))return s;var g=d(1.4*p,2);return u(c,x,"M0,"+g+"V-"+g+"M"+g+",0H-"+g)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(p,c,x){if(o(c))return s;var g=d(p,2);return u(c,x,"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(p,c,x){if(o(c))return s;var g=d(1.2*p,2),f=d(.85*p,2);return u(c,x,"M0,"+g+"V-"+g+"M"+g+",0H-"+g+"M"+f+","+f+"L-"+f+",-"+f+"M"+f+",-"+f+"L-"+f+","+f)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(p,c,x){if(o(c))return s;var g=d(p/2,2),f=d(p,2);return u(c,x,"M"+g+","+f+"V-"+f+"M"+(g-f)+",-"+f+"V"+f+"M"+f+","+g+"H-"+f+"M-"+f+","+(g-f)+"H"+f)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(p,c,x){if(o(c))return s;var g=d(1.2*p,2),f=d(1.6*p,2),y=d(.8*p,2);return u(c,x,"M-"+g+","+y+"L0,0M"+g+","+y+"L0,0M0,-"+f+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(p,c,x){if(o(c))return s;var g=d(1.2*p,2),f=d(1.6*p,2),y=d(.8*p,2);return u(c,x,"M-"+g+",-"+y+"L0,0M"+g+",-"+y+"L0,0M0,"+f+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(p,c,x){if(o(c))return s;var g=d(1.2*p,2),f=d(1.6*p,2),y=d(.8*p,2);return u(c,x,"M"+y+","+g+"L0,0M"+y+",-"+g+"L0,0M-"+f+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(p,c,x){if(o(c))return s;var g=d(1.2*p,2),f=d(1.6*p,2),y=d(.8*p,2);return u(c,x,"M-"+y+","+g+"L0,0M-"+y+",-"+g+"L0,0M"+f+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(p,c,x){if(o(c))return s;var g=d(1.4*p,2);return u(c,x,"M"+g+",0H-"+g)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(p,c,x){if(o(c))return s;var g=d(1.4*p,2);return u(c,x,"M0,"+g+"V-"+g)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(p,c,x){if(o(c))return s;var g=d(p,2);return u(c,x,"M"+g+",-"+g+"L-"+g+","+g)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(p,c,x){if(o(c))return s;var g=d(p,2);return u(c,x,"M"+g+","+g+"L-"+g+",-"+g)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(p,c,x){if(o(c))return s;var g=d(p,2);return u(c,x,"M0,0L-"+g+","+d(2*p,2)+"H"+g+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(p,c,x){if(o(c))return s;var g=d(p,2);return u(c,x,"M0,0L-"+g+",-"+d(2*p,2)+"H"+g+"Z")},noDot:!0},"arrow-left":{n:47,f:function(p,c,x){if(o(c))return s;var g=d(2*p,2),f=d(p,2);return u(c,x,"M0,0L"+g+",-"+f+"V"+f+"Z")},noDot:!0},"arrow-right":{n:48,f:function(p,c,x){if(o(c))return s;var g=d(2*p,2),f=d(p,2);return u(c,x,"M0,0L-"+g+",-"+f+"V"+f+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(p,c,x){if(o(c))return s;var g=d(p,2);return u(c,x,"M-"+g+",0H"+g+"M0,0L-"+g+","+d(2*p,2)+"H"+g+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(p,c,x){if(o(c))return s;var g=d(p,2);return u(c,x,"M-"+g+",0H"+g+"M0,0L-"+g+",-"+d(2*p,2)+"H"+g+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(p,c,x){if(o(c))return s;var g=d(2*p,2),f=d(p,2);return u(c,x,"M0,-"+f+"V"+f+"M0,0L"+g+",-"+f+"V"+f+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(p,c,x){if(o(c))return s;var g=d(2*p,2),f=d(p,2);return u(c,x,"M0,-"+f+"V"+f+"M0,0L-"+g+",-"+f+"V"+f+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(p,c,x){if(o(c))return s;var g=r/2.5,f=2*p*n(g),y=2*p*a(g);return u(c,x,"M0,0L"+-f+","+y+"L"+f+","+y+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(p,c,x){if(o(c))return s;var g=r/4,f=2*p*n(g),y=2*p*a(g);return u(c,x,"M0,0L"+-f+","+y+"A "+2*p+","+2*p+" 0 0 1 "+f+","+y+"Z")},backoff:.4,noDot:!0}}},25673:function(Q){Q.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},84532:function(Q,z,t){var S=t(92770),k=t(73972),l=t(89298),T=t(71828),b=t(45827);function d(s,e,i,r){var n=e["error_"+r]||{},a=[];if(n.visible&&["linear","log"].indexOf(i.type)!==-1){for(var o=b(n),u=0;u<s.length;u++){var p=s[u],c=p.i;if(c===void 0)c=u;else if(c===null)continue;var x=p[r];if(S(i.c2l(x))){var g=o(x,c);if(S(g[0])&&S(g[1])){var f=p[r+"s"]=x-g[0],y=p[r+"h"]=x+g[1];a.push(f,y)}}}var v=i._id,m=e._extremes[v],_=l.findExtremes(i,a,T.extendFlat({tozero:m.opts.tozero},{padded:!0}));m.min=m.min.concat(_.min),m.max=m.max.concat(_.max)}}Q.exports=function(s){for(var e=s.calcdata,i=0;i<e.length;i++){var r=e[i],n=r[0].trace;if(n.visible===!0&&k.traceIs(n,"errorBarsOK")){var a=l.getFromId(s,n.xaxis),o=l.getFromId(s,n.yaxis);d(r,n,a,"x"),d(r,n,o,"y")}}}},45827:function(Q){function z(t,S){return t==="percent"?function(k){return Math.abs(k*S/100)}:t==="constant"?function(){return Math.abs(S)}:t==="sqrt"?function(k){return Math.sqrt(Math.abs(k))}:void 0}Q.exports=function(t){var S=t.type,k=t.symmetric;if(S==="data"){var l=t.array||[];if(k)return function(s,e){var i=+l[e];return[i,i]};var T=t.arrayminus||[];return function(s,e){var i=+l[e],r=+T[e];return isNaN(i)&&isNaN(r)?[NaN,NaN]:[r||0,i||0]}}var b=z(S,t.value),d=z(S,t.valueminus);return k||t.valueminus===void 0?function(s){var e=b(s);return[e,e]}:function(s){return[d(s),b(s)]}}},97587:function(Q,z,t){var S=t(92770),k=t(73972),l=t(71828),T=t(44467),b=t(25673);Q.exports=function(d,s,e,i){var r="error_"+i.axis,n=T.newContainer(s,r),a=d[r]||{};function o(x,g){return l.coerce(a,n,b,x,g)}if(o("visible",a.array!==void 0||a.value!==void 0||a.type==="sqrt")!==!1){var u=o("type","array"in a?"data":"percent"),p=!0;u!=="sqrt"&&(p=o("symmetric",!((u==="data"?"arrayminus":"valueminus")in a))),u==="data"?(o("array"),o("traceref"),p||(o("arrayminus"),o("tracerefminus"))):u!=="percent"&&u!=="constant"||(o("value"),p||o("valueminus"));var c="copy_"+i.inherit+"style";i.inherit&&(s["error_"+i.inherit]||{}).visible&&o(c,!(a.color||S(a.thickness)||S(a.width))),i.inherit&&n[c]||(o("color",e),o("thickness"),o("width",k.traceIs(s,"gl3d")?0:4))}}},37369:function(Q,z,t){var S=t(71828),k=t(30962).overrideAll,l=t(25673),T={error_x:S.extendFlat({},l),error_y:S.extendFlat({},l)};delete T.error_x.copy_zstyle,delete T.error_y.copy_zstyle,delete T.error_y.copy_ystyle;var b={error_x:S.extendFlat({},l),error_y:S.extendFlat({},l),error_z:S.extendFlat({},l)};delete b.error_x.copy_ystyle,delete b.error_y.copy_ystyle,delete b.error_z.copy_ystyle,delete b.error_z.copy_zstyle,Q.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:T,bar:T,histogram:T,scatter3d:k(b,"calc","nested"),scattergl:k(T,"calc","nested")}},supplyDefaults:t(97587),calc:t(84532),makeComputeError:t(45827),plot:t(19398),style:t(62662),hoverInfo:function(d,s,e){(s.error_y||{}).visible&&(e.yerr=d.yh-d.y,s.error_y.symmetric||(e.yerrneg=d.y-d.ys)),(s.error_x||{}).visible&&(e.xerr=d.xh-d.x,s.error_x.symmetric||(e.xerrneg=d.x-d.xs))}}},19398:function(Q,z,t){var S=t(39898),k=t(92770),l=t(91424),T=t(34098);Q.exports=function(b,d,s,e){var i=s.xaxis,r=s.yaxis,n=e&&e.duration>0,a=b._context.staticPlot;d.each(function(o){var u,p=o[0].trace,c=p.error_x||{},x=p.error_y||{};p.ids&&(u=function(v){return v.id});var g=T.hasMarkers(p)&&p.marker.maxdisplayed>0;x.visible||c.visible||(o=[]);var f=S.select(this).selectAll("g.errorbar").data(o,u);if(f.exit().remove(),o.length){c.visible||f.selectAll("path.xerror").remove(),x.visible||f.selectAll("path.yerror").remove(),f.style("opacity",1);var y=f.enter().append("g").classed("errorbar",!0);n&&y.style("opacity",0).transition().duration(e.duration).style("opacity",1),l.setClipUrl(f,s.layerClipId,b),f.each(function(v){var m=S.select(this),_=function(C,P,D){var G={x:P.c2p(C.x),y:D.c2p(C.y)};return C.yh!==void 0&&(G.yh=D.c2p(C.yh),G.ys=D.c2p(C.ys),k(G.ys)||(G.noYS=!0,G.ys=D.c2p(C.ys,!0))),C.xh!==void 0&&(G.xh=P.c2p(C.xh),G.xs=P.c2p(C.xs),k(G.xs)||(G.noXS=!0,G.xs=P.c2p(C.xs,!0))),G}(v,i,r);if(!g||v.vis){var h,A=m.select("path.yerror");if(x.visible&&k(_.x)&&k(_.yh)&&k(_.ys)){var w=x.width;h="M"+(_.x-w)+","+_.yh+"h"+2*w+"m-"+w+",0V"+_.ys,_.noYS||(h+="m-"+w+",0h"+2*w),A.size()?n&&(A=A.transition().duration(e.duration).ease(e.easing)):A=m.append("path").style("vector-effect",a?"none":"non-scaling-stroke").classed("yerror",!0),A.attr("d",h)}else A.remove();var E=m.select("path.xerror");if(c.visible&&k(_.y)&&k(_.xh)&&k(_.xs)){var L=(c.copy_ystyle?x:c).width;h="M"+_.xh+","+(_.y-L)+"v"+2*L+"m0,-"+L+"H"+_.xs,_.noXS||(h+="m0,-"+L+"v"+2*L),E.size()?n&&(E=E.transition().duration(e.duration).ease(e.easing)):E=m.append("path").style("vector-effect",a?"none":"non-scaling-stroke").classed("xerror",!0),E.attr("d",h)}else E.remove()}})}})}},62662:function(Q,z,t){var S=t(39898),k=t(7901);Q.exports=function(l){l.each(function(T){var b=T[0].trace,d=b.error_y||{},s=b.error_x||{},e=S.select(this);e.selectAll("path.yerror").style("stroke-width",d.thickness+"px").call(k.stroke,d.color),s.copy_ystyle&&(s=d),e.selectAll("path.xerror").style("stroke-width",s.thickness+"px").call(k.stroke,s.color)})}},77914:function(Q,z,t){var S=t(41940),k=t(528).hoverlabel,l=t(1426).extendFlat;Q.exports={hoverlabel:{bgcolor:l({},k.bgcolor,{arrayOk:!0}),bordercolor:l({},k.bordercolor,{arrayOk:!0}),font:S({arrayOk:!0,editType:"none"}),align:l({},k.align,{arrayOk:!0}),namelength:l({},k.namelength,{arrayOk:!0}),editType:"none"}}},30732:function(Q,z,t){var S=t(71828),k=t(73972);function l(T,b,d,s){s=s||S.identity,Array.isArray(T)&&(b[0][d]=s(T))}Q.exports=function(T){var b=T.calcdata,d=T._fullLayout;function s(a){return function(o){return S.coerceHoverinfo({hoverinfo:o},{_module:a._module},d)}}for(var e=0;e<b.length;e++){var i=b[e],r=i[0].trace;if(!k.traceIs(r,"pie-like")){var n=k.traceIs(r,"2dMap")?l:S.fillArray;n(r.hoverinfo,i,"hi",s(r)),r.hovertemplate&&n(r.hovertemplate,i,"ht"),r.hoverlabel&&(n(r.hoverlabel.bgcolor,i,"hbg"),n(r.hoverlabel.bordercolor,i,"hbc"),n(r.hoverlabel.font.size,i,"hts"),n(r.hoverlabel.font.color,i,"htc"),n(r.hoverlabel.font.family,i,"htf"),n(r.hoverlabel.namelength,i,"hnl"),n(r.hoverlabel.align,i,"hta"))}}}},75914:function(Q,z,t){var S=t(73972),k=t(88335).hover;Q.exports=function(l,T,b){var d=S.getComponentMethod("annotations","onClick")(l,l._hoverdata);function s(){l.emit("plotly_click",{points:l._hoverdata,event:T})}b!==void 0&&k(l,T,b,!0),l._hoverdata&&T&&T.target&&(d&&d.then?d.then(s):s(),T.stopImmediatePropagation&&T.stopImmediatePropagation())}},26675:function(Q){Q.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},54268:function(Q,z,t){var S=t(71828),k=t(77914),l=t(38048);Q.exports=function(T,b,d,s){var e=S.extendFlat({},s.hoverlabel);b.hovertemplate&&(e.namelength=-1),l(T,b,function(i,r){return S.coerce(T,b,k,i,r)},e)}},23469:function(Q,z,t){var S=t(71828);z.getSubplot=function(s){return s.subplot||s.xaxis+s.yaxis||s.geo},z.isTraceInSubplots=function(s,e){if(s.type==="splom"){for(var i=s.xaxes||[],r=s.yaxes||[],n=0;n<i.length;n++)for(var a=0;a<r.length;a++)if(e.indexOf(i[n]+r[a])!==-1)return!0;return!1}return e.indexOf(z.getSubplot(s))!==-1},z.flat=function(s,e){for(var i=new Array(s.length),r=0;r<s.length;r++)i[r]=e;return i},z.p2c=function(s,e){for(var i=new Array(s.length),r=0;r<s.length;r++)i[r]=s[r].p2c(e);return i},z.getDistanceFunction=function(s,e,i,r){return s==="closest"?r||z.quadrature(e,i):s.charAt(0)==="x"?e:i},z.getClosest=function(s,e,i){if(i.index!==!1)i.index>=0&&i.index<s.length?i.distance=0:i.index=!1;else for(var r=0;r<s.length;r++){var n=e(s[r]);n<=i.distance&&(i.index=r,i.distance=n)}return i},z.inbox=function(s,e,i){return s*e<0||s===0?i:1/0},z.quadrature=function(s,e){return function(i){var r=s(i),n=e(i);return Math.sqrt(r*r+n*n)}},z.makeEventData=function(s,e,i){var r="index"in s?s.index:s.pointNumber,n={data:e._input,fullData:e,curveNumber:e.index,pointNumber:r};if(e._indexToPoints){var a=e._indexToPoints[r];a.length===1?n.pointIndex=a[0]:n.pointIndices=a}else n.pointIndex=r;return e._module.eventData?n=e._module.eventData(n,s,e,i,r):("xVal"in s?n.x=s.xVal:"x"in s&&(n.x=s.x),"yVal"in s?n.y=s.yVal:"y"in s&&(n.y=s.y),s.xa&&(n.xaxis=s.xa),s.ya&&(n.yaxis=s.ya),s.zLabelVal!==void 0&&(n.z=s.zLabelVal)),z.appendArrayPointValue(n,e,r),n},z.appendArrayPointValue=function(s,e,i){var r=e._arrayAttrs;if(r)for(var n=0;n<r.length;n++){var a=r[n],o=l(a);if(s[o]===void 0){var u=T(S.nestedProperty(e,a).get(),i);u!==void 0&&(s[o]=u)}}},z.appendArrayMultiPointValues=function(s,e,i){var r=e._arrayAttrs;if(r)for(var n=0;n<r.length;n++){var a=r[n],o=l(a);if(s[o]===void 0){for(var u=S.nestedProperty(e,a).get(),p=new Array(i.length),c=0;c<i.length;c++)p[c]=T(u,i[c]);s[o]=p}}};var k={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function l(s){return k[s]||s}function T(s,e){return Array.isArray(e)?Array.isArray(s)&&Array.isArray(s[e[0]])?s[e[0]][e[1]]:void 0:s[e]}var b={x:!0,y:!0},d={"x unified":!0,"y unified":!0};z.isUnifiedHover=function(s){return typeof s=="string"&&!!d[s]},z.isXYhover=function(s){return typeof s=="string"&&!!b[s]}},88335:function(Q,z,t){var S=t(39898),k=t(92770),l=t(84267),T=t(71828),b=T.strTranslate,d=T.strRotate,s=t(11086),e=t(63893),i=t(39918),r=t(91424),n=t(7901),a=t(28569),o=t(89298),u=t(73972),p=t(23469),c=t(26675),x=t(99017),g=t(43969),f=c.YANGLE,y=Math.PI*f/180,v=1/Math.sin(y),m=Math.cos(y),_=Math.sin(y),h=c.HOVERARROWSIZE,A=c.HOVERTEXTPAD,w={box:!0,ohlc:!0,violin:!0,candlestick:!0},E={scatter:!0,scattergl:!0,splom:!0};function L(Z){return[Z.trace.index,Z.index,Z.x0,Z.y0,Z.name,Z.attr,Z.xa?Z.xa._id:"",Z.ya?Z.ya._id:""].join(",")}z.hover=function(Z,J,ee,re){Z=T.getGraphDiv(Z);var ae=J.target;T.throttle(Z._fullLayout._uid+c.HOVERID,c.HOVERMINTIME,function(){(function(oe,ce,pe,ve,we){pe||(pe="xy");var xe=Array.isArray(pe)?pe:[pe],ge=oe._fullLayout,Oe=ge._plots||[],Ae=Oe[pe],Te=ge._has("cartesian");if(Ae){var se=Ae.overlays.map(function(Bt){return Bt.id});xe=xe.concat(se)}for(var le=xe.length,ne=new Array(le),me=new Array(le),Ee=!1,be=0;be<le;be++){var De=xe[be];if(Oe[De])Ee=!0,ne[be]=Oe[De].xaxis,me[be]=Oe[De].yaxis;else{if(!ge[De]||!ge[De]._subplot)return void T.warn("Unrecognized subplot: "+De);var Ue=ge[De]._subplot;ne[be]=Ue.xaxis,me[be]=Ue.yaxis}}var he=ce.hovermode||ge.hovermode;if(he&&!Ee&&(he="closest"),["x","y","closest","x unified","y unified"].indexOf(he)===-1||!oe.calcdata||oe.querySelector(".zoombox")||oe._dragging)return a.unhoverRaw(oe,ce);var ke=ge.hoverdistance;ke===-1&&(ke=1/0);var _e=ge.spikedistance;_e===-1&&(_e=1/0);var Ce,Fe,Re,He,Ge,$e,st,Ke,gt,mt,at,rt,xt,Tt=[],wt=[],Ot={hLinePoint:null,vLinePoint:null},Ct=!1;if(Array.isArray(ce))for(he="array",Re=0;Re<ce.length;Re++)(Ge=oe.calcdata[ce[Re].curveNumber||0])&&($e=Ge[0].trace,Ge[0].trace.hoverinfo!=="skip"&&(wt.push(Ge),$e.orientation==="h"&&(Ct=!0)));else{for(He=0;He<oe.calcdata.length;He++)Ge=oe.calcdata[He],($e=Ge[0].trace).hoverinfo!=="skip"&&p.isTraceInSubplots($e,xe)&&(wt.push(Ge),$e.orientation==="h"&&(Ct=!0));var Ye,Xe;if(we){if(s.triggerHandler(oe,"plotly_beforehover",ce)===!1)return;var Ve=we.getBoundingClientRect();Ye=ce.clientX-Ve.left,Xe=ce.clientY-Ve.top,ge._calcInverseTransform(oe);var We=T.apply3DTransform(ge._invTransform)(Ye,Xe);if(Ye=We[0],Xe=We[1],Ye<0||Ye>ne[0]._length||Xe<0||Xe>me[0]._length)return a.unhoverRaw(oe,ce)}else Ye="xpx"in ce?ce.xpx:ne[0]._length/2,Xe="ypx"in ce?ce.ypx:me[0]._length/2;if(ce.pointerX=Ye+ne[0]._offset,ce.pointerY=Xe+me[0]._offset,Ce="xval"in ce?p.flat(xe,ce.xval):p.p2c(ne,Ye),Fe="yval"in ce?p.flat(xe,ce.yval):p.p2c(me,Xe),!k(Ce[0])||!k(Fe[0]))return T.warn("Fx.hover failed",ce,oe),a.unhoverRaw(oe,ce)}var nt=1/0;function ot(Bt,tn){for(He=0;He<wt.length;He++)if((Ge=wt[He])&&Ge[0]&&Ge[0].trace&&($e=Ge[0].trace).visible===!0&&$e._length!==0&&["carpet","contourcarpet"].indexOf($e._module.name)===-1){if($e.type==="splom"?st=xe[Ke=0]:(st=p.getSubplot($e),Ke=xe.indexOf(st)),gt=he,p.isUnifiedHover(gt)&&(gt=gt.charAt(0)),rt={cd:Ge,trace:$e,xa:ne[Ke],ya:me[Ke],maxHoverDistance:ke,maxSpikeDistance:_e,index:!1,distance:Math.min(nt,ke),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:n.defaultLine,name:$e.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ge[st]&&(rt.subplot=ge[st]._subplot),ge._splomScenes&&ge._splomScenes[$e.uid]&&(rt.scene=ge._splomScenes[$e.uid]),xt=Tt.length,gt==="array"){var cn=ce[He];"pointNumber"in cn?(rt.index=cn.pointNumber,gt="closest"):(gt="","xval"in cn&&(mt=cn.xval,gt="x"),"yval"in cn&&(at=cn.yval,gt=gt?"closest":"y"))}else Bt!==void 0&&tn!==void 0?(mt=Bt,at=tn):(mt=Ce[Ke],at=Fe[Ke]);if(ke!==0)if($e._module&&$e._module.hoverPoints){var gn=$e._module.hoverPoints(rt,mt,at,gt,{finiteRange:!0,hoverLayer:ge._hoverlayer});if(gn)for(var kn,Vn=0;Vn<gn.length;Vn++)kn=gn[Vn],k(kn.x0)&&k(kn.y0)&&Tt.push(H(kn,he))}else T.log("Unrecognized trace type in hover:",$e);if(he==="closest"&&Tt.length>xt&&(Tt.splice(0,xt),nt=Tt[0].distance),Te&&_e!==0&&Tt.length===0){rt.distance=_e,rt.index=!1;var In=$e._module.hoverPoints(rt,mt,at,"closest",{hoverLayer:ge._hoverlayer});if(In&&(In=In.filter(function(Gt){return Gt.spikeDistance<=_e})),In&&In.length){var Dn,Kn=In.filter(function(Gt){return Gt.xa.showspikes&&Gt.xa.spikesnap!=="hovered data"});if(Kn.length){var Ut=Kn[0];k(Ut.x0)&&k(Ut.y0)&&(Dn=ze(Ut),(!Ot.vLinePoint||Ot.vLinePoint.spikeDistance>Dn.spikeDistance)&&(Ot.vLinePoint=Dn))}var bn=In.filter(function(Gt){return Gt.ya.showspikes&&Gt.ya.spikesnap!=="hovered data"});if(bn.length){var At=bn[0];k(At.x0)&&k(At.y0)&&(Dn=ze(At),(!Ot.hLinePoint||Ot.hLinePoint.spikeDistance>Dn.spikeDistance)&&(Ot.hLinePoint=Dn))}}}}}function Ie(Bt,tn,cn){for(var gn,kn=null,Vn=1/0,In=0;In<Bt.length;In++)gn=Bt[In].spikeDistance,cn&&In===0&&(gn=-1/0),gn<=Vn&&gn<=tn&&(kn=Bt[In],Vn=gn);return kn}function ze(Bt){return Bt?{xa:Bt.xa,ya:Bt.ya,x:Bt.xSpike!==void 0?Bt.xSpike:(Bt.x0+Bt.x1)/2,y:Bt.ySpike!==void 0?Bt.ySpike:(Bt.y0+Bt.y1)/2,distance:Bt.distance,spikeDistance:Bt.spikeDistance,curveNumber:Bt.trace.index,color:Bt.color,pointNumber:Bt.index}:null}ot();var et={fullLayout:ge,container:ge._hoverlayer,event:ce},tt=oe._spikepoints,dt={vLinePoint:Ot.vLinePoint,hLinePoint:Ot.hLinePoint};oe._spikepoints=dt;var pt=function(){Tt.sort(function(Bt,tn){return Bt.distance-tn.distance}),Tt=function(Bt,tn){for(var cn=tn.charAt(0),gn=[],kn=[],Vn=[],In=0;In<Bt.length;In++){var Dn=Bt[In];u.traceIs(Dn.trace,"bar-like")||u.traceIs(Dn.trace,"box-violin")?Vn.push(Dn):Dn.trace[cn+"period"]?kn.push(Dn):gn.push(Dn)}return gn.concat(kn).concat(Vn)}(Tt,he)};pt();var vt=he.charAt(0),ct=(vt==="x"||vt==="y")&&Tt[0]&&E[Tt[0].trace.type];if(Te&&_e!==0&&Tt.length!==0){var kt=Ie(Tt.filter(function(Bt){return Bt.ya.showspikes}),_e,ct);Ot.hLinePoint=ze(kt);var ut=Ie(Tt.filter(function(Bt){return Bt.xa.showspikes}),_e,ct);Ot.vLinePoint=ze(ut)}if(Tt.length===0){var ft=a.unhoverRaw(oe,ce);return!Te||Ot.hLinePoint===null&&Ot.vLinePoint===null||F(tt)&&N(oe,Ot,et),ft}if(Te&&F(tt)&&N(oe,Ot,et),p.isXYhover(gt)&&Tt[0].length!==0&&Tt[0].trace.type!=="splom"){var bt=Tt[0],It=(Tt=w[bt.trace.type]?Tt.filter(function(Bt){return Bt.trace.index===bt.trace.index}):[bt]).length;ot(q("x",bt,ge),q("y",bt,ge));var zt,Rt=[],Jt={},qt=0,Wt=function(Bt){var tn=w[Bt.trace.type]?L(Bt):Bt.trace.index;if(Jt[tn]){var cn=Jt[tn]-1,gn=Rt[cn];cn>0&&Math.abs(Bt.distance)<Math.abs(gn.distance)&&(Rt[cn]=Bt)}else qt++,Jt[tn]=qt,Rt.push(Bt)};for(zt=0;zt<It;zt++)Wt(Tt[zt]);for(zt=Tt.length-1;zt>It-1;zt--)Wt(Tt[zt]);Tt=Rt,pt()}var jt=oe._hoverdata,fn=[],xn=te(oe),un=$(oe);for(Re=0;Re<Tt.length;Re++){var Ht=Tt[Re],nn=p.makeEventData(Ht,Ht.trace,Ht.cd);if(Ht.hovertemplate!==!1){var Kt=!1;Ht.cd[Ht.index]&&Ht.cd[Ht.index].ht&&(Kt=Ht.cd[Ht.index].ht),Ht.hovertemplate=Kt||Ht.trace.hovertemplate||!1}if(Ht.xa&&Ht.ya){var on=Ht.x0+Ht.xa._offset,hn=Ht.x1+Ht.xa._offset,dn=Ht.y0+Ht.ya._offset,Mn=Ht.y1+Ht.ya._offset,Cn=Math.min(on,hn),Tn=Math.max(on,hn),Pn=Math.min(dn,Mn),Wn=Math.max(dn,Mn);nn.bbox={x0:Cn+un,x1:Tn+un,y0:Pn+xn,y1:Wn+xn}}Ht.eventData=[nn],fn.push(nn)}oe._hoverdata=fn;var $n=he==="y"&&(wt.length>1||Tt.length>1)||he==="closest"&&Ct&&Tt.length>1,ar=n.combine(ge.plot_bgcolor||n.background,ge.paper_bgcolor),Qn=P(Tt,{gd:oe,hovermode:he,rotateLabels:$n,bgColor:ar,container:ge._hoverlayer,outerContainer:ge._paper.node(),commonLabelOpts:ge.hoverlabel,hoverdistance:ge.hoverdistance}),Gn=Qn.hoverLabels;if(p.isUnifiedHover(he)||(function(Bt,tn,cn,gn){var kn,Vn,In,Dn,Kn,Ut,bn,At=tn?"xa":"ya",Gt=tn?"ya":"xa",$t=0,mn=1,yn=Bt.size(),An=new Array(yn),sn=0,Yt=gn.minX,Xt=gn.maxX,an=gn.minY,ln=gn.maxY,Sn=function(ur){return ur*cn._invScaleX},En=function(ur){return ur*cn._invScaleY};function jn(ur){var br=ur[0],Zn=ur[ur.length-1];if(Vn=br.pmin-br.pos-br.dp+br.size,In=Zn.pos+Zn.dp+Zn.size-br.pmax,Vn>.01){for(Kn=ur.length-1;Kn>=0;Kn--)ur[Kn].dp+=Vn;kn=!1}if(!(In<.01)){if(Vn<-.01){for(Kn=ur.length-1;Kn>=0;Kn--)ur[Kn].dp-=In;kn=!1}if(kn){var pr=0;for(Dn=0;Dn<ur.length;Dn++)(Ut=ur[Dn]).pos+Ut.dp+Ut.size>br.pmax&&pr++;for(Dn=ur.length-1;Dn>=0&&!(pr<=0);Dn--)(Ut=ur[Dn]).pos>br.pmax-1&&(Ut.del=!0,pr--);for(Dn=0;Dn<ur.length&&!(pr<=0);Dn++)if((Ut=ur[Dn]).pos<br.pmin+1)for(Ut.del=!0,pr--,In=2*Ut.size,Kn=ur.length-1;Kn>=0;Kn--)ur[Kn].dp-=In;for(Dn=ur.length-1;Dn>=0&&!(pr<=0);Dn--)(Ut=ur[Dn]).pos+Ut.dp+Ut.size>br.pmax&&(Ut.del=!0,pr--)}}}for(Bt.each(function(ur){var br=ur[At],Zn=ur[Gt],pr=br._id.charAt(0)==="x",Sr=br.range;sn===0&&Sr&&Sr[0]>Sr[1]!==pr&&(mn=-1);var Gr=0,ai=pr?cn.width:cn.height;if(cn.hovermode==="x"||cn.hovermode==="y"){var ni,ci,Kr=G(ur,tn),bi=ur.anchor,Ha=bi==="end"?-1:1;if(bi==="middle")ci=(ni=ur.crossPos+(pr?En(Kr.y-ur.by/2):Sn(ur.bx/2+ur.tx2width/2)))+(pr?En(ur.by):Sn(ur.bx));else if(pr)ci=(ni=ur.crossPos+En(h+Kr.y)-En(ur.by/2-h))+En(ur.by);else{var ha=Sn(Ha*h+Kr.x),eo=ha+Sn(Ha*ur.bx);ni=ur.crossPos+Math.min(ha,eo),ci=ur.crossPos+Math.max(ha,eo)}pr?an!==void 0&&ln!==void 0&&Math.min(ci,ln)-Math.max(ni,an)>1&&(Zn.side==="left"?(Gr=Zn._mainLinePosition,ai=cn.width):ai=Zn._mainLinePosition):Yt!==void 0&&Xt!==void 0&&Math.min(ci,Xt)-Math.max(ni,Yt)>1&&(Zn.side==="top"?(Gr=Zn._mainLinePosition,ai=cn.height):ai=Zn._mainLinePosition)}An[sn++]=[{datum:ur,traceIndex:ur.trace.index,dp:0,pos:ur.pos,posref:ur.posref,size:ur.by*(pr?v:1)/2,pmin:Gr,pmax:ai}]}),An.sort(function(ur,br){return ur[0].posref-br[0].posref||mn*(br[0].traceIndex-ur[0].traceIndex)});!kn&&$t<=yn;){for($t++,kn=!0,Dn=0;Dn<An.length-1;){var Fn=An[Dn],Xn=An[Dn+1],Hn=Fn[Fn.length-1],nr=Xn[0];if((Vn=Hn.pos+Hn.dp+Hn.size-nr.pos-nr.dp+nr.size)>.01&&Hn.pmin===nr.pmin&&Hn.pmax===nr.pmax){for(Kn=Xn.length-1;Kn>=0;Kn--)Xn[Kn].dp+=Vn;for(Fn.push.apply(Fn,Xn),An.splice(Dn+1,1),bn=0,Kn=Fn.length-1;Kn>=0;Kn--)bn+=Fn[Kn].dp;for(In=bn/Fn.length,Kn=Fn.length-1;Kn>=0;Kn--)Fn[Kn].dp-=In;kn=!1}else Dn++}An.forEach(jn)}for(Dn=An.length-1;Dn>=0;Dn--){var er=An[Dn];for(Kn=er.length-1;Kn>=0;Kn--){var tr=er[Kn],lr=tr.datum;lr.offset=tr.dp,lr.del=tr.del}}}(Gn,$n,ge,Qn.commonLabelBoundingBox),I(Gn,$n,ge._invScaleX,ge._invScaleY)),we&&we.tagName){var dr=u.getComponentMethod("annotations","hasClickToShow")(oe,fn);i(S.select(we),dr?"pointer":"")}we&&!ve&&function(Bt,tn,cn){if(!cn||cn.length!==Bt._hoverdata.length)return!0;for(var gn=cn.length-1;gn>=0;gn--){var kn=cn[gn],Vn=Bt._hoverdata[gn];if(kn.curveNumber!==Vn.curveNumber||String(kn.pointNumber)!==String(Vn.pointNumber)||String(kn.pointNumbers)!==String(Vn.pointNumbers))return!0}return!1}(oe,0,jt)&&(jt&&oe.emit("plotly_unhover",{event:ce,points:jt}),oe.emit("plotly_hover",{event:ce,points:oe._hoverdata,xaxes:ne,yaxes:me,xvals:Ce,yvals:Fe}))})(Z,J,ee,re,ae)})},z.loneHover=function(Z,J){var ee=!0;Array.isArray(Z)||(ee=!1,Z=[Z]);var re=J.gd,ae=te(re),oe=$(re),ce=P(Z.map(function(we){var xe=we._x0||we.x0||we.x||0,ge=we._x1||we.x1||we.x||0,Oe=we._y0||we.y0||we.y||0,Ae=we._y1||we.y1||we.y||0,Te=we.eventData;if(Te){var se=Math.min(xe,ge),le=Math.max(xe,ge),ne=Math.min(Oe,Ae),me=Math.max(Oe,Ae),Ee=we.trace;if(u.traceIs(Ee,"gl3d")){var be=re._fullLayout[Ee.scene]._scene.container,De=be.offsetLeft,Ue=be.offsetTop;se+=De,le+=De,ne+=Ue,me+=Ue}Te.bbox={x0:se+oe,x1:le+oe,y0:ne+ae,y1:me+ae},J.inOut_bbox&&J.inOut_bbox.push(Te.bbox)}else Te=!1;return{color:we.color||n.defaultLine,x0:we.x0||we.x||0,x1:we.x1||we.x||0,y0:we.y0||we.y||0,y1:we.y1||we.y||0,xLabel:we.xLabel,yLabel:we.yLabel,zLabel:we.zLabel,text:we.text,name:we.name,idealAlign:we.idealAlign,borderColor:we.borderColor,fontFamily:we.fontFamily,fontSize:we.fontSize,fontColor:we.fontColor,nameLength:we.nameLength,textAlign:we.textAlign,trace:we.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:we.hovertemplate||!1,hovertemplateLabels:we.hovertemplateLabels||!1,eventData:Te}}),{gd:re,hovermode:"closest",rotateLabels:!1,bgColor:J.bgColor||n.background,container:S.select(J.container),outerContainer:J.outerContainer||J.container}).hoverLabels,pe=0,ve=0;return ce.sort(function(we,xe){return we.y0-xe.y0}).each(function(we,xe){var ge=we.y0-we.by/2;we.offset=ge-5<pe?pe-ge+5:0,pe=ge+we.by+we.offset,xe===J.anchorIndex&&(ve=we.offset)}).each(function(we){we.offset-=ve}),I(ce,!1,re._fullLayout._invScaleX,re._fullLayout._invScaleY),ee?ce:ce.node()};var C=/<extra>([\s\S]*)<\/extra>/;function P(Z,J){var ee=J.gd,re=ee._fullLayout,ae=J.hovermode,oe=J.rotateLabels,ce=J.bgColor,pe=J.container,ve=J.outerContainer,we=J.commonLabelOpts||{};if(Z.length===0)return[[]];var xe=J.fontFamily||c.HOVERFONT,ge=J.fontSize||c.HOVERFONTSIZE,Oe=Z[0],Ae=Oe.xa,Te=Oe.ya,se=ae.charAt(0),le=se+"Label",ne=Oe[le];if(ne===void 0&&Ae.type==="multicategory")for(var me=0;me<Z.length&&(ne=Z[me][le])===void 0;me++);var Ee=W(ee,ve),be=Ee.top,De=Ee.width,Ue=Ee.height,he=ne!==void 0&&Oe.distance<=J.hoverdistance&&(ae==="x"||ae==="y");if(he){var ke,_e,Ce=!0;for(ke=0;ke<Z.length;ke++)if(Ce&&Z[ke].zLabel===void 0&&(Ce=!1),_e=Z[ke].hoverinfo||Z[ke].trace.hoverinfo){var Fe=Array.isArray(_e)?_e:_e.split("+");if(Fe.indexOf("all")===-1&&Fe.indexOf(ae)===-1){he=!1;break}}Ce&&(he=!1)}var Re=pe.selectAll("g.axistext").data(he?[0]:[]);Re.enter().append("g").classed("axistext",!0),Re.exit().remove();var He={minX:0,maxX:0,minY:0,maxY:0};if(Re.each(function(){var ft=S.select(this),bt=T.ensureSingle(ft,"path","",function(Pn){Pn.style({"stroke-width":"1px"})}),It=T.ensureSingle(ft,"text","",function(Pn){Pn.attr("data-notex",1)}),zt=we.bgcolor||n.defaultLine,Rt=we.bordercolor||n.contrast(zt),Jt=n.contrast(zt),qt={family:we.font.family||xe,size:we.font.size||ge,color:we.font.color||Jt};bt.style({fill:zt,stroke:Rt}),It.text(ne).call(r.font,qt).call(e.positionText,0,0).call(e.convertToTspans,ee),ft.attr("transform","");var Wt,jt,fn=W(ee,It.node());if(ae==="x"){var xn=Ae.side==="top"?"-":"";It.attr("text-anchor","middle").call(e.positionText,0,Ae.side==="top"?be-fn.bottom-h-A:be-fn.top+h+A),Wt=Ae._offset+(Oe.x0+Oe.x1)/2,jt=Te._offset+(Ae.side==="top"?0:Te._length);var un=fn.width/2+A;Wt<un?(Wt=un,bt.attr("d","M-"+(un-h)+",0L-"+(un-2*h)+","+xn+h+"H"+un+"v"+xn+(2*A+fn.height)+"H-"+un+"V"+xn+h+"Z")):Wt>re.width-un?(Wt=re.width-un,bt.attr("d","M"+(un-h)+",0L"+un+","+xn+h+"v"+xn+(2*A+fn.height)+"H-"+un+"V"+xn+h+"H"+(un-2*h)+"Z")):bt.attr("d","M0,0L"+h+","+xn+h+"H"+un+"v"+xn+(2*A+fn.height)+"H-"+un+"V"+xn+h+"H-"+h+"Z"),He.minX=Wt-un,He.maxX=Wt+un,Ae.side==="top"?(He.minY=jt-(2*A+fn.height),He.maxY=jt-A):(He.minY=jt+A,He.maxY=jt+(2*A+fn.height))}else{var Ht,nn,Kt;Te.side==="right"?(Ht="start",nn=1,Kt="",Wt=Ae._offset+Ae._length):(Ht="end",nn=-1,Kt="-",Wt=Ae._offset),jt=Te._offset+(Oe.y0+Oe.y1)/2,It.attr("text-anchor",Ht),bt.attr("d","M0,0L"+Kt+h+","+h+"V"+(A+fn.height/2)+"h"+Kt+(2*A+fn.width)+"V-"+(A+fn.height/2)+"H"+Kt+h+"V-"+h+"Z"),He.minY=jt-(A+fn.height/2),He.maxY=jt+(A+fn.height/2),Te.side==="right"?(He.minX=Wt+h,He.maxX=Wt+h+(2*A+fn.width)):(He.minX=Wt-h-(2*A+fn.width),He.maxX=Wt-h);var on,hn=fn.height/2,dn=be-fn.top-hn,Mn="clip"+re._uid+"commonlabel"+Te._id;if(Wt<fn.width+2*A+h){on="M-"+(h+A)+"-"+hn+"h-"+(fn.width-A)+"V"+hn+"h"+(fn.width-A)+"Z";var Cn=fn.width-Wt+A;e.positionText(It,Cn,dn),Ht==="end"&&It.selectAll("tspan").each(function(){var Pn=S.select(this),Wn=r.tester.append("text").text(Pn.text()).call(r.font,qt),$n=W(ee,Wn.node());Math.round($n.width)<Math.round(fn.width)&&Pn.attr("x",Cn-$n.width),Wn.remove()})}else e.positionText(It,nn*(A+h),dn),on=null;var Tn=re._topclips.selectAll("#"+Mn).data(on?[0]:[]);Tn.enter().append("clipPath").attr("id",Mn).append("path"),Tn.exit().remove(),Tn.select("path").attr("d",on),r.setClipUrl(It,on?Mn:null,ee)}ft.attr("transform",b(Wt,jt))}),p.isUnifiedHover(ae)){pe.selectAll("g.hovertext").remove();var Ge=Z.filter(function(ft){return ft.hoverinfo!=="none"});if(Ge.length===0)return;var $e=re.hoverlabel,st=$e.font,Ke={showlegend:!0,legend:{title:{text:ne,font:st},font:st,bgcolor:$e.bgcolor,bordercolor:$e.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:re.legend?re.legend.traceorder:void 0,orientation:"v"}},gt={font:st};x(Ke,gt,ee._fullData);var mt=gt.legend;mt.entries=[];for(var at=0;at<Ge.length;at++){var rt=Ge[at];if(rt.hoverinfo!=="none"){var xt=D(rt,!0,ae,re,ne),Tt=xt[0],wt=xt[1];rt.name=wt,rt.text=wt!==""?wt+" : "+Tt:Tt;var Ot=rt.cd[rt.index];Ot&&(Ot.mc&&(rt.mc=Ot.mc),Ot.mcc&&(rt.mc=Ot.mcc),Ot.mlc&&(rt.mlc=Ot.mlc),Ot.mlcc&&(rt.mlc=Ot.mlcc),Ot.mlw&&(rt.mlw=Ot.mlw),Ot.mrc&&(rt.mrc=Ot.mrc),Ot.dir&&(rt.dir=Ot.dir)),rt._distinct=!0,mt.entries.push([rt])}}mt.entries.sort(function(ft,bt){return ft[0].trace.index-bt[0].trace.index}),mt.layer=pe,mt._inHover=!0,mt._groupTitleFont=$e.grouptitlefont,g(ee,mt);var Ct,Ye,Xe,Ve,We=pe.select("g.legend"),nt=W(ee,We.node()),ot=nt.width+2*A,Ie=nt.height+2*A,ze=Ge[0],et=(ze.x0+ze.x1)/2,tt=(ze.y0+ze.y1)/2,dt=!(u.traceIs(ze.trace,"bar-like")||u.traceIs(ze.trace,"box-violin"));se==="y"?dt?(Ye=tt-A,Ct=tt+A):(Ye=Math.min.apply(null,Ge.map(function(ft){return Math.min(ft.y0,ft.y1)})),Ct=Math.max.apply(null,Ge.map(function(ft){return Math.max(ft.y0,ft.y1)}))):Ye=Ct=T.mean(Ge.map(function(ft){return(ft.y0+ft.y1)/2}))-Ie/2,se==="x"?dt?(Xe=et+A,Ve=et-A):(Xe=Math.max.apply(null,Ge.map(function(ft){return Math.max(ft.x0,ft.x1)})),Ve=Math.min.apply(null,Ge.map(function(ft){return Math.min(ft.x0,ft.x1)}))):Xe=Ve=T.mean(Ge.map(function(ft){return(ft.x0+ft.x1)/2}))-ot/2;var pt,vt,ct=Ae._offset,kt=Te._offset;return Ve+=ct-ot,Ye+=kt-Ie,pt=(Xe+=ct)+ot<De&&Xe>=0?Xe:Ve+ot<De&&Ve>=0?Ve:ct+ot<De?ct:Xe-et<et-Ve+ot?De-ot:0,pt+=A,vt=(Ct+=kt)+Ie<Ue&&Ct>=0?Ct:Ye+Ie<Ue&&Ye>=0?Ye:kt+Ie<Ue?kt:Ct-tt<tt-Ye+Ie?Ue-Ie:0,vt+=A,We.attr("transform",b(pt-1,vt-1)),We}var ut=pe.selectAll("g.hovertext").data(Z,function(ft){return L(ft)});return ut.enter().append("g").classed("hovertext",!0).each(function(){var ft=S.select(this);ft.append("rect").call(n.fill,n.addOpacity(ce,.8)),ft.append("text").classed("name",!0),ft.append("path").style("stroke-width","1px"),ft.append("text").classed("nums",!0).call(r.font,xe,ge)}),ut.exit().remove(),ut.each(function(ft){var bt=S.select(this).attr("transform",""),It=ft.color;Array.isArray(It)&&(It=It[ft.eventData[0].pointNumber]);var zt=ft.bgcolor||It,Rt=n.combine(n.opacity(zt)?zt:n.defaultLine,ce),Jt=n.combine(n.opacity(It)?It:n.defaultLine,ce),qt=ft.borderColor||n.contrast(Rt),Wt=D(ft,he,ae,re,ne,bt),jt=Wt[0],fn=Wt[1],xn=bt.select("text.nums").call(r.font,ft.fontFamily||xe,ft.fontSize||ge,ft.fontColor||qt).text(jt).attr("data-notex",1).call(e.positionText,0,0).call(e.convertToTspans,ee),un=bt.select("text.name"),Ht=0,nn=0;if(fn&&fn!==jt){un.call(r.font,ft.fontFamily||xe,ft.fontSize||ge,Jt).text(fn).attr("data-notex",1).call(e.positionText,0,0).call(e.convertToTspans,ee);var Kt=W(ee,un.node());Ht=Kt.width+2*A,nn=Kt.height+2*A}else un.remove(),bt.select("rect").remove();bt.select("path").style({fill:Rt,stroke:qt});var on=ft.xa._offset+(ft.x0+ft.x1)/2,hn=ft.ya._offset+(ft.y0+ft.y1)/2,dn=Math.abs(ft.x1-ft.x0),Mn=Math.abs(ft.y1-ft.y0),Cn=W(ee,xn.node()),Tn=Cn.width/re._invScaleX,Pn=Cn.height/re._invScaleY;ft.ty0=(be-Cn.top)/re._invScaleY,ft.bx=Tn+2*A,ft.by=Math.max(Pn+2*A,nn),ft.anchor="start",ft.txwidth=Tn,ft.tx2width=Ht,ft.offset=0;var Wn,$n,ar=(Tn+h+A+Ht)*re._invScaleX;if(oe)ft.pos=on,Wn=hn+Mn/2+ar<=Ue,$n=hn-Mn/2-ar>=0,ft.idealAlign!=="top"&&Wn||!$n?Wn?(hn+=Mn/2,ft.anchor="start"):ft.anchor="middle":(hn-=Mn/2,ft.anchor="end"),ft.crossPos=hn;else{if(ft.pos=hn,Wn=on+dn/2+ar<=De,$n=on-dn/2-ar>=0,ft.idealAlign!=="left"&&Wn||!$n)if(Wn)on+=dn/2,ft.anchor="start";else{ft.anchor="middle";var Qn=ar/2,Gn=on+Qn-De,dr=on-Qn;Gn>0&&(on-=Gn),dr<0&&(on+=-dr)}else on-=dn/2,ft.anchor="end";ft.crossPos=on}xn.attr("text-anchor",ft.anchor),Ht&&un.attr("text-anchor",ft.anchor),bt.attr("transform",b(on,hn)+(oe?d(f):""))}),{hoverLabels:ut,commonLabelBoundingBox:He}}function D(Z,J,ee,re,ae,oe){var ce="",pe="";Z.nameOverride!==void 0&&(Z.name=Z.nameOverride),Z.name&&(Z.trace._meta&&(Z.name=T.templateString(Z.name,Z.trace._meta)),ce=V(Z.name,Z.nameLength));var ve=ee.charAt(0),we=ve==="x"?"y":"x";Z.zLabel!==void 0?(Z.xLabel!==void 0&&(pe+="x: "+Z.xLabel+"<br>"),Z.yLabel!==void 0&&(pe+="y: "+Z.yLabel+"<br>"),Z.trace.type!=="choropleth"&&Z.trace.type!=="choroplethmapbox"&&(pe+=(pe?"z: ":"")+Z.zLabel)):J&&Z[ve+"Label"]===ae?pe=Z[we+"Label"]||"":Z.xLabel===void 0?Z.yLabel!==void 0&&Z.trace.type!=="scattercarpet"&&(pe=Z.yLabel):pe=Z.yLabel===void 0?Z.xLabel:"("+Z.xLabel+", "+Z.yLabel+")",!Z.text&&Z.text!==0||Array.isArray(Z.text)||(pe+=(pe?"<br>":"")+Z.text),Z.extraText!==void 0&&(pe+=(pe?"<br>":"")+Z.extraText),oe&&pe===""&&!Z.hovertemplate&&(ce===""&&oe.remove(),pe=ce);var xe=Z.hovertemplate||!1;if(xe){var ge=Z.hovertemplateLabels||Z;Z[ve+"Label"]!==ae&&(ge[ve+"other"]=ge[ve+"Val"],ge[ve+"otherLabel"]=ge[ve+"Label"]),pe=(pe=T.hovertemplateString(xe,ge,re._d3locale,Z.eventData[0]||{},Z.trace._meta)).replace(C,function(Oe,Ae){return ce=V(Ae,Z.nameLength),""})}return[pe,ce]}function G(Z,J){var ee=0,re=Z.offset;return J&&(re*=-_,ee=Z.offset*m),{x:ee,y:re}}function I(Z,J,ee,re){var ae=function(ce){return ce*ee},oe=function(ce){return ce*re};Z.each(function(ce){var pe=S.select(this);if(ce.del)return pe.remove();var ve,we,xe,ge,Oe=pe.select("text.nums"),Ae=ce.anchor,Te=Ae==="end"?-1:1,se=(ge=(xe=(we={start:1,end:-1,middle:0}[(ve=ce).anchor])*(h+A))+we*(ve.txwidth+A),ve.anchor==="middle"&&(xe-=ve.tx2width/2,ge+=ve.txwidth/2+A),{alignShift:we,textShiftX:xe,text2ShiftX:ge}),le=G(ce,J),ne=le.x,me=le.y,Ee=Ae==="middle";pe.select("path").attr("d",Ee?"M-"+ae(ce.bx/2+ce.tx2width/2)+","+oe(me-ce.by/2)+"h"+ae(ce.bx)+"v"+oe(ce.by)+"h-"+ae(ce.bx)+"Z":"M0,0L"+ae(Te*h+ne)+","+oe(h+me)+"v"+oe(ce.by/2-h)+"h"+ae(Te*ce.bx)+"v-"+oe(ce.by)+"H"+ae(Te*h+ne)+"V"+oe(me-h)+"Z");var be=ne+se.textShiftX,De=me+ce.ty0-ce.by/2+A,Ue=ce.textAlign||"auto";Ue!=="auto"&&(Ue==="left"&&Ae!=="start"?(Oe.attr("text-anchor","start"),be=Ee?-ce.bx/2-ce.tx2width/2+A:-ce.bx-A):Ue==="right"&&Ae!=="end"&&(Oe.attr("text-anchor","end"),be=Ee?ce.bx/2-ce.tx2width/2-A:ce.bx+A)),Oe.call(e.positionText,ae(be),oe(De)),ce.tx2width&&(pe.select("text.name").call(e.positionText,ae(se.text2ShiftX+se.alignShift*A+ne),oe(me+ce.ty0-ce.by/2+A)),pe.select("rect").call(r.setRect,ae(se.text2ShiftX+(se.alignShift-1)*ce.tx2width/2+ne),oe(me-ce.by/2-1),ae(ce.tx2width),oe(ce.by+2)))})}function H(Z,J){var ee=Z.index,re=Z.trace||{},ae=Z.cd[0],oe=Z.cd[ee]||{};function ce(Oe){return Oe||k(Oe)&&Oe===0}var pe=Array.isArray(ee)?function(Oe,Ae){var Te=T.castOption(ae,ee,Oe);return ce(Te)?Te:T.extractOption({},re,"",Ae)}:function(Oe,Ae){return T.extractOption(oe,re,Oe,Ae)};function ve(Oe,Ae,Te){var se=pe(Ae,Te);ce(se)&&(Z[Oe]=se)}if(ve("hoverinfo","hi","hoverinfo"),ve("bgcolor","hbg","hoverlabel.bgcolor"),ve("borderColor","hbc","hoverlabel.bordercolor"),ve("fontFamily","htf","hoverlabel.font.family"),ve("fontSize","hts","hoverlabel.font.size"),ve("fontColor","htc","hoverlabel.font.color"),ve("nameLength","hnl","hoverlabel.namelength"),ve("textAlign","hta","hoverlabel.align"),Z.posref=J==="y"||J==="closest"&&re.orientation==="h"?Z.xa._offset+(Z.x0+Z.x1)/2:Z.ya._offset+(Z.y0+Z.y1)/2,Z.x0=T.constrain(Z.x0,0,Z.xa._length),Z.x1=T.constrain(Z.x1,0,Z.xa._length),Z.y0=T.constrain(Z.y0,0,Z.ya._length),Z.y1=T.constrain(Z.y1,0,Z.ya._length),Z.xLabelVal!==void 0&&(Z.xLabel="xLabel"in Z?Z.xLabel:o.hoverLabelText(Z.xa,Z.xLabelVal,re.xhoverformat),Z.xVal=Z.xa.c2d(Z.xLabelVal)),Z.yLabelVal!==void 0&&(Z.yLabel="yLabel"in Z?Z.yLabel:o.hoverLabelText(Z.ya,Z.yLabelVal,re.yhoverformat),Z.yVal=Z.ya.c2d(Z.yLabelVal)),Z.zLabelVal!==void 0&&Z.zLabel===void 0&&(Z.zLabel=String(Z.zLabelVal)),!(isNaN(Z.xerr)||Z.xa.type==="log"&&Z.xerr<=0)){var we=o.tickText(Z.xa,Z.xa.c2l(Z.xerr),"hover").text;Z.xerrneg!==void 0?Z.xLabel+=" +"+we+" / -"+o.tickText(Z.xa,Z.xa.c2l(Z.xerrneg),"hover").text:Z.xLabel+="  "+we,J==="x"&&(Z.distance+=1)}if(!(isNaN(Z.yerr)||Z.ya.type==="log"&&Z.yerr<=0)){var xe=o.tickText(Z.ya,Z.ya.c2l(Z.yerr),"hover").text;Z.yerrneg!==void 0?Z.yLabel+=" +"+xe+" / -"+o.tickText(Z.ya,Z.ya.c2l(Z.yerrneg),"hover").text:Z.yLabel+="  "+xe,J==="y"&&(Z.distance+=1)}var ge=Z.hoverinfo||Z.trace.hoverinfo;return ge&&ge!=="all"&&((ge=Array.isArray(ge)?ge:ge.split("+")).indexOf("x")===-1&&(Z.xLabel=void 0),ge.indexOf("y")===-1&&(Z.yLabel=void 0),ge.indexOf("z")===-1&&(Z.zLabel=void 0),ge.indexOf("text")===-1&&(Z.text=void 0),ge.indexOf("name")===-1&&(Z.name=void 0)),Z}function N(Z,J,ee){var re,ae,oe=ee.container,ce=ee.fullLayout,pe=ce._size,ve=ee.event,we=!!J.hLinePoint,xe=!!J.vLinePoint;if(oe.selectAll(".spikeline").remove(),xe||we){var ge=n.combine(ce.plot_bgcolor,ce.paper_bgcolor);if(we){var Oe,Ae,Te=J.hLinePoint;re=Te&&Te.xa,(ae=Te&&Te.ya).spikesnap==="cursor"?(Oe=ve.pointerX,Ae=ve.pointerY):(Oe=re._offset+Te.x,Ae=ae._offset+Te.y);var se,le,ne=l.readability(Te.color,ge)<1.5?n.contrast(ge):Te.color,me=ae.spikemode,Ee=ae.spikethickness,be=ae.spikecolor||ne,De=o.getPxPosition(Z,ae);if(me.indexOf("toaxis")!==-1||me.indexOf("across")!==-1){if(me.indexOf("toaxis")!==-1&&(se=De,le=Oe),me.indexOf("across")!==-1){var Ue=ae._counterDomainMin,he=ae._counterDomainMax;ae.anchor==="free"&&(Ue=Math.min(Ue,ae.position),he=Math.max(he,ae.position)),se=pe.l+Ue*pe.w,le=pe.l+he*pe.w}oe.insert("line",":first-child").attr({x1:se,x2:le,y1:Ae,y2:Ae,"stroke-width":Ee,stroke:be,"stroke-dasharray":r.dashStyle(ae.spikedash,Ee)}).classed("spikeline",!0).classed("crisp",!0),oe.insert("line",":first-child").attr({x1:se,x2:le,y1:Ae,y2:Ae,"stroke-width":Ee+2,stroke:ge}).classed("spikeline",!0).classed("crisp",!0)}me.indexOf("marker")!==-1&&oe.insert("circle",":first-child").attr({cx:De+(ae.side!=="right"?Ee:-Ee),cy:Ae,r:Ee,fill:be}).classed("spikeline",!0)}if(xe){var ke,_e,Ce=J.vLinePoint;re=Ce&&Ce.xa,ae=Ce&&Ce.ya,re.spikesnap==="cursor"?(ke=ve.pointerX,_e=ve.pointerY):(ke=re._offset+Ce.x,_e=ae._offset+Ce.y);var Fe,Re,He=l.readability(Ce.color,ge)<1.5?n.contrast(ge):Ce.color,Ge=re.spikemode,$e=re.spikethickness,st=re.spikecolor||He,Ke=o.getPxPosition(Z,re);if(Ge.indexOf("toaxis")!==-1||Ge.indexOf("across")!==-1){if(Ge.indexOf("toaxis")!==-1&&(Fe=Ke,Re=_e),Ge.indexOf("across")!==-1){var gt=re._counterDomainMin,mt=re._counterDomainMax;re.anchor==="free"&&(gt=Math.min(gt,re.position),mt=Math.max(mt,re.position)),Fe=pe.t+(1-mt)*pe.h,Re=pe.t+(1-gt)*pe.h}oe.insert("line",":first-child").attr({x1:ke,x2:ke,y1:Fe,y2:Re,"stroke-width":$e,stroke:st,"stroke-dasharray":r.dashStyle(re.spikedash,$e)}).classed("spikeline",!0).classed("crisp",!0),oe.insert("line",":first-child").attr({x1:ke,x2:ke,y1:Fe,y2:Re,"stroke-width":$e+2,stroke:ge}).classed("spikeline",!0).classed("crisp",!0)}Ge.indexOf("marker")!==-1&&oe.insert("circle",":first-child").attr({cx:ke,cy:Ke-(re.side!=="top"?$e:-$e),r:$e,fill:st}).classed("spikeline",!0)}}}function F(Z,J){return!J||J.vLinePoint!==Z._spikepoints.vLinePoint||J.hLinePoint!==Z._spikepoints.hLinePoint}function V(Z,J){return e.plainText(Z||"",{len:J,allowedTags:["br","sub","sup","b","i","em"]})}function q(Z,J,ee){var re=J[Z+"a"],ae=J[Z+"Val"],oe=J.cd[0];if(re.type==="category"||re.type==="multicategory")ae=re._categoriesMap[ae];else if(re.type==="date"){var ce=J.trace[Z+"periodalignment"];if(ce){var pe=J.cd[J.index],ve=pe[Z+"Start"];ve===void 0&&(ve=pe[Z]);var we=pe[Z+"End"];we===void 0&&(we=pe[Z]);var xe=we-ve;ce==="end"?ae+=xe:ce==="middle"&&(ae+=xe/2)}ae=re.d2c(ae)}return oe&&oe.t&&oe.t.posLetter===re._id&&(ee.boxmode!=="group"&&ee.violinmode!=="group"||(ae+=oe.t.dPos)),ae}function te(Z){return Z.offsetTop+Z.clientTop}function $(Z){return Z.offsetLeft+Z.clientLeft}function W(Z,J){var ee=Z._fullLayout,re=J.getBoundingClientRect(),ae=re.left,oe=re.top,ce=ae+re.width,pe=oe+re.height,ve=T.apply3DTransform(ee._invTransform)(ae,oe),we=T.apply3DTransform(ee._invTransform)(ce,pe),xe=ve[0],ge=ve[1],Oe=we[0],Ae=we[1];return{x:xe,y:ge,width:Oe-xe,height:Ae-ge,top:Math.min(ge,Ae),left:Math.min(xe,Oe),right:Math.max(xe,Oe),bottom:Math.max(ge,Ae)}}},38048:function(Q,z,t){var S=t(71828),k=t(7901),l=t(23469).isUnifiedHover;Q.exports=function(T,b,d,s){s=s||{};var e=b.legend;function i(r){s.font[r]||(s.font[r]=e?b.legend.font[r]:b.font[r])}b&&l(b.hovermode)&&(s.font||(s.font={}),i("size"),i("family"),i("color"),e?(s.bgcolor||(s.bgcolor=k.combine(b.legend.bgcolor,b.paper_bgcolor)),s.bordercolor||(s.bordercolor=b.legend.bordercolor)):s.bgcolor||(s.bgcolor=b.paper_bgcolor)),d("hoverlabel.bgcolor",s.bgcolor),d("hoverlabel.bordercolor",s.bordercolor),d("hoverlabel.namelength",s.namelength),S.coerceFont(d,"hoverlabel.font",s.font),d("hoverlabel.align",s.align)}},98212:function(Q,z,t){var S=t(71828),k=t(528);Q.exports=function(l,T){function b(d,s){return T[d]!==void 0?T[d]:S.coerce(l,T,k,d,s)}return b("clickmode"),b("hovermode")}},30211:function(Q,z,t){var S=t(39898),k=t(71828),l=t(28569),T=t(23469),b=t(528),d=t(88335);Q.exports={moduleType:"component",name:"fx",constants:t(26675),schema:{layout:b},attributes:t(77914),layoutAttributes:b,supplyLayoutGlobalDefaults:t(22774),supplyDefaults:t(54268),supplyLayoutDefaults:t(34938),calc:t(30732),getDistanceFunction:T.getDistanceFunction,getClosest:T.getClosest,inbox:T.inbox,quadrature:T.quadrature,appendArrayPointValue:T.appendArrayPointValue,castHoverOption:function(s,e,i){return k.castOption(s,e,"hoverlabel."+i)},castHoverinfo:function(s,e,i){return k.castOption(s,i,"hoverinfo",function(r){return k.coerceHoverinfo({hoverinfo:r},{_module:s._module},e)})},hover:d.hover,unhover:l.unhover,loneHover:d.loneHover,loneUnhover:function(s){var e=k.isD3Selection(s)?s:S.select(s);e.selectAll("g.hovertext").remove(),e.selectAll(".spikeline").remove()},click:t(75914)}},528:function(Q,z,t){var S=t(26675),k=t(41940),l=k({editType:"none"});l.family.dflt=S.HOVERFONT,l.size.dflt=S.HOVERFONTSIZE,Q.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:l,grouptitlefont:k({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},34938:function(Q,z,t){var S=t(71828),k=t(528),l=t(98212),T=t(38048);Q.exports=function(b,d){function s(n,a){return S.coerce(b,d,k,n,a)}l(b,d)&&(s("hoverdistance"),s("spikedistance")),s("dragmode")==="select"&&s("selectdirection");var e=d._has("mapbox"),i=d._has("geo"),r=d._basePlotModules.length;d.dragmode==="zoom"&&((e||i)&&r===1||e&&i&&r===2)&&(d.dragmode="pan"),T(b,d,s),S.coerceFont(s,"hoverlabel.grouptitlefont",d.hoverlabel.font)}},22774:function(Q,z,t){var S=t(71828),k=t(38048),l=t(528);Q.exports=function(T,b){k(T,b,function(d,s){return S.coerce(T,b,l,d,s)})}},83312:function(Q,z,t){var S=t(71828),k=t(30587).counter,l=t(27670).Y,T=t(85555).idRegex,b=t(44467),d={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[k("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:l({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function s(r,n,a){var o=n[a+"axes"],u=Object.keys((r._splomAxes||{})[a]||{});return Array.isArray(o)?o:u.length?u:void 0}function e(r,n,a,o,u,p){var c=n(r+"gap",a),x=n("domain."+r);n(r+"side",o);for(var g=new Array(u),f=x[0],y=(x[1]-f)/(u-c),v=y*(1-c),m=0;m<u;m++){var _=f+y*m;g[p?u-1-m:m]=[_,_+v]}return g}function i(r,n,a,o,u){var p,c=new Array(a);function x(g,f){n.indexOf(f)!==-1&&o[f]===void 0?(c[g]=f,o[f]=g):c[g]=""}if(Array.isArray(r))for(p=0;p<a;p++)x(p,r[p]);else for(x(0,u),p=1;p<a;p++)x(p,u+(p+1));return c}Q.exports={moduleType:"component",name:"grid",schema:{layout:{grid:d}},layoutAttributes:d,sizeDefaults:function(r,n){var a=r.grid||{},o=s(n,a,"x"),u=s(n,a,"y");if(r.grid||o||u){var p,c,x=Array.isArray(a.subplots)&&Array.isArray(a.subplots[0]),g=Array.isArray(o),f=Array.isArray(u),y=g&&o!==a.xaxes&&f&&u!==a.yaxes;x?(p=a.subplots.length,c=a.subplots[0].length):(f&&(p=u.length),g&&(c=o.length));var v=b.newContainer(n,"grid"),m=C("rows",p),_=C("columns",c);if(m*_>1){x||g||f||C("pattern")==="independent"&&(x=!0),v._hasSubplotGrid=x;var h,A,w=C("roworder")==="top to bottom",E=x?.2:.1,L=x?.3:.1;y&&n._splomGridDflt&&(h=n._splomGridDflt.xside,A=n._splomGridDflt.yside),v._domains={x:e("x",C,E,h,_),y:e("y",C,L,A,m,w)}}else delete n.grid}function C(P,D){return S.coerce(a,v,d,P,D)}},contentDefaults:function(r,n){var a=n.grid;if(a&&a._domains){var o,u,p,c,x,g,f,y=r.grid||{},v=n._subplots,m=a._hasSubplotGrid,_=a.rows,h=a.columns,A=a.pattern==="independent",w=a._axisMap={};if(m){var E=y.subplots||[];g=a.subplots=new Array(_);var L=1;for(o=0;o<_;o++){var C=g[o]=new Array(h),P=E[o]||[];for(u=0;u<h;u++)if(A?(x=L===1?"xy":"x"+L+"y"+L,L++):x=P[u],C[u]="",v.cartesian.indexOf(x)!==-1){if(f=x.indexOf("y"),p=x.slice(0,f),c=x.slice(f),w[p]!==void 0&&w[p]!==u||w[c]!==void 0&&w[c]!==o)continue;C[u]=x,w[p]=u,w[c]=o}}}else{var D=s(n,y,"x"),G=s(n,y,"y");a.xaxes=i(D,v.xaxis,h,w,"x"),a.yaxes=i(G,v.yaxis,_,w,"y")}var I=a._anchors={},H=a.roworder==="top to bottom";for(var N in w){var F,V,q,te=N.charAt(0),$=a[te+"side"];if($.length<8)I[N]="free";else if(te==="x"){if($.charAt(0)==="t"===H?(F=0,V=1,q=_):(F=_-1,V=-1,q=-1),m){var W=w[N];for(o=F;o!==q;o+=V)if((x=g[o][W])&&(f=x.indexOf("y"),x.slice(0,f)===N)){I[N]=x.slice(f);break}}else for(o=F;o!==q;o+=V)if(c=a.yaxes[o],v.cartesian.indexOf(N+c)!==-1){I[N]=c;break}}else if($.charAt(0)==="l"?(F=0,V=1,q=h):(F=h-1,V=-1,q=-1),m){var Z=w[N];for(o=F;o!==q;o+=V)if((x=g[Z][o])&&(f=x.indexOf("y"),x.slice(f)===N)){I[N]=x.slice(0,f);break}}else for(o=F;o!==q;o+=V)if(p=a.xaxes[o],v.cartesian.indexOf(p+N)!==-1){I[N]=p;break}}}}}},69819:function(Q,z,t){var S=t(85555),k=t(44467).templatedArray;t(24695),Q.exports=k("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",S.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",S.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},75378:function(Q,z,t){var S=t(92770),k=t(58163);Q.exports=function(l,T,b,d){T=T||{};var s=b==="log"&&T.type==="linear",e=b==="linear"&&T.type==="log";if(s||e){for(var i,r,n=l._fullLayout.images,a=T._id.charAt(0),o=0;o<n.length;o++)if(r="images["+o+"].",(i=n[o])[a+"ref"]===T._id){var u=i[a],p=i["size"+a],c=null,x=null;if(s){c=k(u,T.range);var g=p/Math.pow(10,c)/2;x=2*Math.log(g+Math.sqrt(1+g*g))/Math.LN10}else x=(c=Math.pow(10,u))*(Math.pow(10,p/2)-Math.pow(10,-p/2));S(c)?S(x)||(x=null):(c=null,x=null),d(r+a,c),d(r+"size"+a,x)}}}},81603:function(Q,z,t){var S=t(71828),k=t(89298),l=t(85501),T=t(69819);function b(d,s,e){function i(c,x){return S.coerce(d,s,T,c,x)}var r=i("source");if(!i("visible",!!r))return s;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var n={_fullLayout:e},a=["x","y"],o=0;o<2;o++){var u=a[o],p=k.coerceRef(d,s,n,u,"paper",void 0);p!=="paper"&&k.getFromId(n,p)._imgIndices.push(s._index),k.coercePosition(s,n,i,p,u,0)}return s}Q.exports=function(d,s){l(d,s,{name:"images",handleItemDefaults:b})}},80750:function(Q,z,t){var S=t(39898),k=t(91424),l=t(89298),T=t(41675),b=t(77922);Q.exports=function(d){var s,e,i=d._fullLayout,r=[],n={},a=[];for(e=0;e<i.images.length;e++){var o=i.images[e];if(o.visible)if(o.layer==="below"&&o.xref!=="paper"&&o.yref!=="paper"){s=T.ref2id(o.xref)+T.ref2id(o.yref);var u=i._plots[s];if(!u){a.push(o);continue}u.mainplot&&(s=u.mainplot.id),n[s]||(n[s]=[]),n[s].push(o)}else o.layer==="above"?r.push(o):a.push(o)}var p={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},c={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function x(h){var A=S.select(this);if(this._imgSrc!==h.source)if(A.attr("xmlns",b.svg),h.source&&h.source.slice(0,5)==="data:")A.attr("xlink:href",h.source),this._imgSrc=h.source;else{var w=new Promise(function(E){var L=new Image;function C(){A.remove(),E()}this.img=L,L.setAttribute("crossOrigin","anonymous"),L.onerror=C,L.onload=function(){var P=document.createElement("canvas");P.width=this.width,P.height=this.height,P.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var D=P.toDataURL("image/png");A.attr("xlink:href",D),E()},A.on("error",C),L.src=h.source,this._imgSrc=h.source}.bind(this));d._promises.push(w)}}function g(h){var A,w,E=S.select(this),L=l.getFromId(d,h.xref),C=l.getFromId(d,h.yref),P=l.getRefType(h.xref)==="domain",D=l.getRefType(h.yref)==="domain",G=i._size;A=L!==void 0?typeof h.xref=="string"&&P?L._length*h.sizex:Math.abs(L.l2p(h.sizex)-L.l2p(0)):h.sizex*G.w,w=C!==void 0?typeof h.yref=="string"&&D?C._length*h.sizey:Math.abs(C.l2p(h.sizey)-C.l2p(0)):h.sizey*G.h;var I,H,N=A*p[h.xanchor].offset,F=w*c[h.yanchor].offset,V=p[h.xanchor].sizing+c[h.yanchor].sizing;switch(I=L!==void 0?typeof h.xref=="string"&&P?L._length*h.x+L._offset:L.r2p(h.x)+L._offset:h.x*G.w+G.l,I+=N,H=C!==void 0?typeof h.yref=="string"&&D?C._length*(1-h.y)+C._offset:C.r2p(h.y)+C._offset:G.h-h.y*G.h+G.t,H+=F,h.sizing){case"fill":V+=" slice";break;case"stretch":V="none"}E.attr({x:I,y:H,width:A,height:w,preserveAspectRatio:V,opacity:h.opacity});var q=(L&&l.getRefType(h.xref)!=="domain"?L._id:"")+(C&&l.getRefType(h.yref)!=="domain"?C._id:"");k.setClipUrl(E,q?"clip"+i._uid+q:null,d)}var f=i._imageLowerLayer.selectAll("image").data(a),y=i._imageUpperLayer.selectAll("image").data(r);f.enter().append("image"),y.enter().append("image"),f.exit().remove(),y.exit().remove(),f.each(function(h){x.bind(this)(h),g.bind(this)(h)}),y.each(function(h){x.bind(this)(h),g.bind(this)(h)});var v=Object.keys(i._plots);for(e=0;e<v.length;e++){s=v[e];var m=i._plots[s];if(m.imagelayer){var _=m.imagelayer.selectAll("image").data(n[s]||[]);_.enter().append("image"),_.exit().remove(),_.each(function(h){x.bind(this)(h),g.bind(this)(h)})}}}},68804:function(Q,z,t){Q.exports={moduleType:"component",name:"images",layoutAttributes:t(69819),supplyLayoutDefaults:t(81603),includeBasePlot:t(76325)("images"),draw:t(80750),convertCoords:t(75378)}},33030:function(Q,z,t){var S=t(41940),k=t(22399);Q.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:S({editType:"legend"}),grouptitlefont:S({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:S({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},14928:function(Q){Q.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},99017:function(Q,z,t){var S=t(73972),k=t(71828),l=t(44467),T=t(9012),b=t(33030),d=t(10820),s=t(10130);function e(i,r,n,a){var o=r[i]||{},u=l.newContainer(n,i);function p(H,N){return k.coerce(o,u,b,H,N)}var c=k.coerceFont(p,"font",n.font);if(p("bgcolor",n.paper_bgcolor),p("bordercolor"),p("visible")){for(var x,g=function(H,N){var F=x._input,V=x;return k.coerce(F,V,T,H,N)},f=n.font||{},y=k.coerceFont(p,"grouptitlefont",k.extendFlat({},f,{size:Math.round(1.1*f.size)})),v=0,m=!1,_="normal",h=0;h<a.length;h++)(x=a[h]).visible&&((x.showlegend||x._dfltShowLegend&&!(x._module&&x._module.attributes&&x._module.attributes.showlegend&&x._module.attributes.showlegend.dflt===!1))&&(v++,x.showlegend&&(m=!0,(S.traceIs(x,"pie-like")||x._input.showlegend===!0)&&v++),k.coerceFont(g,"legendgrouptitle.font",y)),(S.traceIs(x,"bar")&&n.barmode==="stack"||["tonextx","tonexty"].indexOf(x.fill)!==-1)&&(_=s.isGrouped({traceorder:_})?"grouped+reversed":"reversed"),x.legendgroup!==void 0&&x.legendgroup!==""&&(_=s.isReversed({traceorder:_})?"reversed+grouped":"grouped"));var A=k.coerce(r,n,d,"showlegend",m&&v>1);if(A===!1&&(n.legend=void 0),(A!==!1||o.uirevision)&&(p("uirevision",n.uirevision),A!==!1)){p("borderwidth");var w,E,L,C=p("orientation")==="h",P=p("yref")==="paper",D=p("xref")==="paper",G="left";if(C?(w=0,S.getComponentMethod("rangeslider","isVisible")(r.xaxis)?P?(E=1.1,L="bottom"):(E=1,L="top"):P?(E=-.1,L="top"):(E=0,L="bottom")):(E=1,L="auto",D?w=1.02:(w=1,G="right")),k.coerce(o,u,{x:{valType:"number",editType:"legend",min:D?-2:0,max:D?3:1,dflt:w}},"x"),k.coerce(o,u,{y:{valType:"number",editType:"legend",min:P?-2:0,max:P?3:1,dflt:E}},"y"),p("traceorder",_),s.isGrouped(n.legend)&&p("tracegroupgap"),p("entrywidth"),p("entrywidthmode"),p("itemsizing"),p("itemwidth"),p("itemclick"),p("itemdoubleclick"),p("groupclick"),p("xanchor",G),p("yanchor",L),p("valign"),k.noneOrAll(o,u,["x","y"]),p("title.text")){p("title.side",C?"left":"top");var I=k.extendFlat({},c,{size:k.bigFont(c.size)});k.coerceFont(p,"title.font",I)}}}}Q.exports=function(i,r,n){var a,o=["legend"];for(a=0;a<n.length;a++)k.pushUnique(o,n[a].legend);for(r._legends=[],a=0;a<o.length;a++){var u=o[a];e(u,i,r,n),r[u]&&r[u].visible&&(r[u]._id=u),r._legends.push(u)}}},43969:function(Q,z,t){var S=t(39898),k=t(71828),l=t(74875),T=t(73972),b=t(11086),d=t(28569),s=t(91424),e=t(7901),i=t(63893),r=t(85167),n=t(14928),a=t(18783),o=a.LINE_SPACING,u=a.FROM_TL,p=a.FROM_BR,c=t(82424),x=t(53630),g=t(10130),f=1,y=/^legend[0-9]*$/;function v(D,G){var I,H,N=G||{},F=D._fullLayout,V=P(N),q=N._inHover;if(q?(H=N.layer,I="hover"):(H=F._infolayer,I=V),H){var te;if(I+=F._uid,D._legendMouseDownTime||(D._legendMouseDownTime=0),q){if(!N.entries)return;te=c(N.entries,N)}else{if(!D.calcdata)return;te=F.showlegend&&c(D.calcdata,N,F._legends.length>1)}var $=F.hiddenlabels||[];if(!(q||F.showlegend&&te.length))return H.selectAll("."+V).remove(),F._topdefs.select("#"+I).remove(),l.autoMargin(D,V);var W=k.ensureSingle(H,"g",V,function(ve){q||ve.attr("pointer-events","all")}),Z=k.ensureSingleById(F._topdefs,"clipPath",I,function(ve){ve.append("rect")}),J=k.ensureSingle(W,"rect","bg",function(ve){ve.attr("shape-rendering","crispEdges")});J.call(e.stroke,N.bordercolor).call(e.fill,N.bgcolor).style("stroke-width",N.borderwidth+"px");var ee=k.ensureSingle(W,"g","scrollbox"),re=N.title;if(N._titleWidth=0,N._titleHeight=0,re.text){var ae=k.ensureSingle(ee,"text",V+"titletext");ae.attr("text-anchor","start").call(s.font,re.font).text(re.text),E(ae,ee,D,N,f)}else ee.selectAll("."+V+"titletext").remove();var oe=k.ensureSingle(W,"rect","scrollbar",function(ve){ve.attr(n.scrollBarEnterAttrs).call(e.fill,n.scrollBarColor)}),ce=ee.selectAll("g.groups").data(te);ce.enter().append("g").attr("class","groups"),ce.exit().remove();var pe=ce.selectAll("g.traces").data(k.identity);pe.enter().append("g").attr("class","traces"),pe.exit().remove(),pe.style("opacity",function(ve){var we=ve[0].trace;return T.traceIs(we,"pie-like")?$.indexOf(ve[0].label)!==-1?.5:1:we.visible==="legendonly"?.5:1}).each(function(){S.select(this).call(h,D,N)}).call(x,D,N).each(function(){q||S.select(this).call(w,D,V)}),k.syncOrAsync([l.previousPromises,function(){return function(ve,we,xe,ge){var Oe=ve._fullLayout,Ae=P(ge);ge||(ge=Oe[Ae]);var Te=Oe._size,se=g.isVertical(ge),le=g.isGrouped(ge),ne=ge.entrywidthmode==="fraction",me=ge.borderwidth,Ee=2*me,be=n.itemGap,De=ge.itemwidth+2*be,Ue=2*(me+be),he=C(ge),ke=ge.y<0||ge.y===0&&he==="top",_e=ge.y>1||ge.y===1&&he==="bottom",Ce=ge.tracegroupgap,Fe={};ge._maxHeight=Math.max(ke||_e?Oe.height/2:Te.h,30);var Re=0;ge._width=0,ge._height=0;var He=function(Ie){var ze=0,et=0,tt=Ie.title.side;return tt&&(tt.indexOf("left")!==-1&&(ze=Ie._titleWidth),tt.indexOf("top")!==-1&&(et=Ie._titleHeight)),[ze,et]}(ge);if(se)xe.each(function(Ie){var ze=Ie[0].height;s.setTranslate(this,me+He[0],me+He[1]+ge._height+ze/2+be),ge._height+=ze,ge._width=Math.max(ge._width,Ie[0].width)}),Re=De+ge._width,ge._width+=be+De+Ee,ge._height+=Ue,le&&(we.each(function(Ie,ze){s.setTranslate(this,0,ze*ge.tracegroupgap)}),ge._height+=(ge._lgroupsLength-1)*ge.tracegroupgap);else{var Ge=L(ge),$e=ge.x<0||ge.x===0&&Ge==="right",st=ge.x>1||ge.x===1&&Ge==="left",Ke=_e||ke,gt=Oe.width/2;ge._maxWidth=Math.max($e?Ke&&Ge==="left"?Te.l+Te.w:gt:st?Ke&&Ge==="right"?Te.r+Te.w:gt:Te.w,2*De);var mt=0,at=0;xe.each(function(Ie){var ze=m(Ie,ge,De);mt=Math.max(mt,ze),at+=ze}),Re=null;var rt=0;if(le){var xt=0,Tt=0,wt=0;we.each(function(){var Ie=0,ze=0;S.select(this).selectAll("g.traces").each(function(tt){var dt=m(tt,ge,De),pt=tt[0].height;s.setTranslate(this,He[0],He[1]+me+be+pt/2+ze),ze+=pt,Ie=Math.max(Ie,dt),Fe[tt[0].trace.legendgroup]=Ie});var et=Ie+be;Tt>0&&et+me+Tt>ge._maxWidth?(rt=Math.max(rt,Tt),Tt=0,wt+=xt+Ce,xt=ze):xt=Math.max(xt,ze),s.setTranslate(this,Tt,wt),Tt+=et}),ge._width=Math.max(rt,Tt)+me,ge._height=wt+xt+Ue}else{var Ot=xe.size(),Ct=at+Ee+(Ot-1)*be<ge._maxWidth,Ye=0,Xe=0,Ve=0,We=0;xe.each(function(Ie){var ze=Ie[0].height,et=m(Ie,ge,De),tt=Ct?et:mt;ne||(tt+=be),tt+me+Xe-be>=ge._maxWidth&&(rt=Math.max(rt,We),Xe=0,Ve+=Ye,ge._height+=Ye,Ye=0),s.setTranslate(this,He[0]+me+Xe,He[1]+me+Ve+ze/2+be),We=Xe+et+be,Xe+=tt,Ye=Math.max(Ye,ze)}),Ct?(ge._width=Xe+Ee,ge._height=Ye+Ue):(ge._width=Math.max(rt,We)+Ee,ge._height+=Ye+Ue)}}ge._width=Math.ceil(Math.max(ge._width+He[0],ge._titleWidth+2*(me+n.titlePad))),ge._height=Math.ceil(Math.max(ge._height+He[1],ge._titleHeight+2*(me+n.itemGap))),ge._effHeight=Math.min(ge._height,ge._maxHeight);var nt=ve._context.edits,ot=nt.legendText||nt.legendPosition;xe.each(function(Ie){var ze=S.select(this).select("."+Ae+"toggle"),et=Ie[0].height,tt=Ie[0].trace.legendgroup,dt=m(Ie,ge,De);le&&tt!==""&&(dt=Fe[tt]);var pt=ot?De:Re||dt;se||ne||(pt+=be/2),s.setRect(ze,0,-et/2,pt,et)})}(D,ce,pe,N)},function(){var ve,we,xe,ge,Oe=F._size,Ae=N.borderwidth,Te=N.xref==="paper",se=N.yref==="paper";if(!q){var le,ne;le=Te?Oe.l+Oe.w*N.x-u[L(N)]*N._width:F.width*N.x-u[L(N)]*N._width,ne=se?Oe.t+Oe.h*(1-N.y)-u[C(N)]*N._effHeight:F.height*(1-N.y)-u[C(N)]*N._effHeight;var me=function(Ke,gt,mt,at){var rt=Ke._fullLayout,xt=rt[gt],Tt=L(xt),wt=C(xt),Ot=xt.xref==="paper",Ct=xt.yref==="paper";Ke._fullLayout._reservedMargin[gt]={};var Ye=xt.y<.5?"b":"t",Xe=xt.x<.5?"l":"r",Ve={r:rt.width-mt,l:mt+xt._width,b:rt.height-at,t:at+xt._effHeight};if(Ot&&Ct)return l.autoMargin(Ke,gt,{x:xt.x,y:xt.y,l:xt._width*u[Tt],r:xt._width*p[Tt],b:xt._effHeight*p[wt],t:xt._effHeight*u[wt]});Ot?Ke._fullLayout._reservedMargin[gt][Ye]=Ve[Ye]:Ct||xt.orientation==="v"?Ke._fullLayout._reservedMargin[gt][Xe]=Ve[Xe]:Ke._fullLayout._reservedMargin[gt][Ye]=Ve[Ye]}(D,V,le,ne);if(me)return;if(F.margin.autoexpand){var Ee=le,be=ne;le=Te?k.constrain(le,0,F.width-N._width):Ee,ne=se?k.constrain(ne,0,F.height-N._effHeight):be,le!==Ee&&k.log("Constrain "+V+".x to make legend fit inside graph"),ne!==be&&k.log("Constrain "+V+".y to make legend fit inside graph")}s.setTranslate(W,le,ne)}if(oe.on(".drag",null),W.on("wheel",null),q||N._height<=N._maxHeight||D._context.staticPlot){var De=N._effHeight;q&&(De=N._height),J.attr({width:N._width-Ae,height:De-Ae,x:Ae/2,y:Ae/2}),s.setTranslate(ee,0,0),Z.select("rect").attr({width:N._width-2*Ae,height:De-2*Ae,x:Ae,y:Ae}),s.setClipUrl(ee,I,D),s.setRect(oe,0,0,0,0),delete N._scrollY}else{var Ue,he,ke,_e=Math.max(n.scrollBarMinHeight,N._effHeight*N._effHeight/N._height),Ce=N._effHeight-_e-2*n.scrollBarMargin,Fe=N._height-N._effHeight,Re=Ce/Fe,He=Math.min(N._scrollY||0,Fe);J.attr({width:N._width-2*Ae+n.scrollBarWidth+n.scrollBarMargin,height:N._effHeight-Ae,x:Ae/2,y:Ae/2}),Z.select("rect").attr({width:N._width-2*Ae+n.scrollBarWidth+n.scrollBarMargin,height:N._effHeight-2*Ae,x:Ae,y:Ae+He}),s.setClipUrl(ee,I,D),st(He,_e,Re),W.on("wheel",function(){st(He=k.constrain(N._scrollY+S.event.deltaY/Ce*Fe,0,Fe),_e,Re),He!==0&&He!==Fe&&S.event.preventDefault()});var Ge=S.behavior.drag().on("dragstart",function(){var Ke=S.event.sourceEvent;Ue=Ke.type==="touchstart"?Ke.changedTouches[0].clientY:Ke.clientY,ke=He}).on("drag",function(){var Ke=S.event.sourceEvent;Ke.buttons===2||Ke.ctrlKey||(he=Ke.type==="touchmove"?Ke.changedTouches[0].clientY:Ke.clientY,He=function(gt,mt,at){var rt=(at-mt)/Re+gt;return k.constrain(rt,0,Fe)}(ke,Ue,he),st(He,_e,Re))});oe.call(Ge);var $e=S.behavior.drag().on("dragstart",function(){var Ke=S.event.sourceEvent;Ke.type==="touchstart"&&(Ue=Ke.changedTouches[0].clientY,ke=He)}).on("drag",function(){var Ke=S.event.sourceEvent;Ke.type==="touchmove"&&(he=Ke.changedTouches[0].clientY,He=function(gt,mt,at){var rt=(mt-at)/Re+gt;return k.constrain(rt,0,Fe)}(ke,Ue,he),st(He,_e,Re))});ee.call($e)}function st(Ke,gt,mt){N._scrollY=D._fullLayout[V]._scrollY=Ke,s.setTranslate(ee,0,-Ke),s.setRect(oe,N._width,n.scrollBarMargin+Ke*mt,n.scrollBarWidth,gt),Z.select("rect").attr("y",Ae+Ke)}D._context.edits.legendPosition&&(W.classed("cursor-move",!0),d.init({element:W.node(),gd:D,prepFn:function(){var Ke=s.getTranslate(W);xe=Ke.x,ge=Ke.y},moveFn:function(Ke,gt){var mt=xe+Ke,at=ge+gt;s.setTranslate(W,mt,at),ve=d.align(mt,N._width,Oe.l,Oe.l+Oe.w,N.xanchor),we=d.align(at+N._height,-N._height,Oe.t+Oe.h,Oe.t,N.yanchor)},doneFn:function(){if(ve!==void 0&&we!==void 0){var Ke={};Ke[V+".x"]=ve,Ke[V+".y"]=we,T.call("_guiRelayout",D,Ke)}},clickFn:function(Ke,gt){var mt=ce.selectAll("g.traces").filter(function(){var at=this.getBoundingClientRect();return gt.clientX>=at.left&&gt.clientX<=at.right&&gt.clientY>=at.top&&gt.clientY<=at.bottom});mt.size()>0&&_(D,W,mt,Ke,gt)}}))}],D)}}function m(D,G,I){var H=D[0],N=H.width,F=G.entrywidthmode,V=H.trace.legendwidth||G.entrywidth;return F==="fraction"?G._maxWidth*V:I+(V||N)}function _(D,G,I,H,N){var F=I.data()[0][0].trace,V={event:N,node:I.node(),curveNumber:F.index,expandedIndex:F._expandedIndex,data:D.data,layout:D.layout,frames:D._transitionData._frames,config:D._context,fullData:D._fullData,fullLayout:D._fullLayout};F._group&&(V.group=F._group),T.traceIs(F,"pie-like")&&(V.label=I.datum()[0].label),b.triggerHandler(D,"plotly_legendclick",V)!==!1&&(H===1?G._clickTimeout=setTimeout(function(){D._fullLayout&&r(I,D,H)},D._context.doubleClickDelay):H===2&&(G._clickTimeout&&clearTimeout(G._clickTimeout),D._legendMouseDownTime=0,b.triggerHandler(D,"plotly_legenddoubleclick",V)!==!1&&r(I,D,H)))}function h(D,G,I){var H,N,F=P(I),V=D.data()[0][0],q=V.trace,te=T.traceIs(q,"pie-like"),$=!I._inHover&&G._context.edits.legendText&&!te,W=I._maxNameLength;V.groupTitle?(H=V.groupTitle.text,N=V.groupTitle.font):(N=I.font,I.entries?H=V.text:(H=te?V.label:q.name,q._meta&&(H=k.templateString(H,q._meta))));var Z=k.ensureSingle(D,"text",F+"text");Z.attr("text-anchor","start").call(s.font,N).text($?A(H,W):H);var J=I.itemwidth+2*n.itemGap;i.positionText(Z,J,0),$?Z.call(i.makeEditable,{gd:G,text:H}).call(E,D,G,I).on("edit",function(ee){this.text(A(ee,W)).call(E,D,G,I);var re=V.trace._fullInput||{},ae={};if(T.hasTransform(re,"groupby")){var oe=T.getTransformIndices(re,"groupby"),ce=oe[oe.length-1],pe=k.keyedContainer(re,"transforms["+ce+"].styles","target","value.name");pe.set(V.trace._group,ee),ae=pe.constructUpdate()}else ae.name=ee;return T.call("_guiRestyle",G,ae,q.index)}):E(Z,D,G,I)}function A(D,G){var I=Math.max(4,G);if(D&&D.trim().length>=I/2)return D;for(var H=I-(D=D||"").length;H>0;H--)D+=" ";return D}function w(D,G,I){var H,N=G._context.doubleClickDelay,F=1,V=k.ensureSingle(D,"rect",I+"toggle",function(q){G._context.staticPlot||q.style("cursor","pointer").attr("pointer-events","all"),q.call(e.fill,"rgba(0,0,0,0)")});G._context.staticPlot||(V.on("mousedown",function(){(H=new Date().getTime())-G._legendMouseDownTime<N?F+=1:(F=1,G._legendMouseDownTime=H)}),V.on("mouseup",function(){if(!G._dragged&&!G._editing){var q=G._fullLayout[I];new Date().getTime()-G._legendMouseDownTime>N&&(F=Math.max(F-1,1)),_(G,q,D,F,S.event)}}))}function E(D,G,I,H,N){H._inHover&&D.attr("data-notex",!0),i.convertToTspans(D,I,function(){(function(F,V,q,te){var $=F.data()[0][0];if(q._inHover||!$||$.trace.showlegend){var W=F.select("g[class*=math-group]"),Z=W.node(),J=P(q);q||(q=V._fullLayout[J]);var ee,re,ae=q.borderwidth,oe=(te===f?q.title.font:$.groupTitle?$.groupTitle.font:q.font).size*o;if(Z){var ce=s.bBox(Z);ee=ce.height,re=ce.width,te===f?s.setTranslate(W,ae,ae+.75*ee):s.setTranslate(W,0,.25*ee)}else{var pe="."+J+(te===f?"title":"")+"text",ve=F.select(pe),we=i.lineCount(ve),xe=ve.node();if(ee=oe*we,re=xe?s.bBox(xe).width:0,te===f)q.title.side==="left"&&(re+=2*n.itemGap),i.positionText(ve,ae+n.titlePad,ae+oe);else{var ge=2*n.itemGap+q.itemwidth;$.groupTitle&&(ge=n.itemGap,re-=q.itemwidth),i.positionText(ve,ge,-oe*((we-1)/2-.3))}}te===f?(q._titleWidth=re,q._titleHeight=ee):($.lineHeight=oe,$.height=Math.max(ee,16)+3,$.width=re)}else F.remove()})(G,I,H,N)})}function L(D){return k.isRightAnchor(D)?"right":k.isCenterAnchor(D)?"center":"left"}function C(D){return k.isBottomAnchor(D)?"bottom":k.isMiddleAnchor(D)?"middle":"top"}function P(D){return D._id||"legend"}Q.exports=function(D,G){if(G)v(D,G);else{var I=D._fullLayout,H=I._legends;I._infolayer.selectAll('[class^="legend"]').each(function(){var V=S.select(this),q=V.attr("class").split(" ")[0];q.match(y)&&H.indexOf(q)===-1&&V.remove()});for(var N=0;N<H.length;N++){var F=H[N];v(D,D._fullLayout[F])}}}},82424:function(Q,z,t){var S=t(73972),k=t(10130);Q.exports=function(l,T,b){var d,s,e=T._inHover,i=k.isGrouped(T),r=k.isReversed(T),n={},a=[],o=!1,u={},p=0,c=0;function x(H,N,F){if(T.visible!==!1&&(!b||H===T._id))if(N!==""&&k.isGrouped(T))a.indexOf(N)===-1?(a.push(N),o=!0,n[N]=[F]):n[N].push(F);else{var V="~~i"+p;a.push(V),n[V]=[F],p++}}for(d=0;d<l.length;d++){var g=l[d],f=g[0],y=f.trace,v=y.legend,m=y.legendgroup;if(e||y.visible&&y.showlegend)if(S.traceIs(y,"pie-like"))for(u[m]||(u[m]={}),s=0;s<g.length;s++){var _=g[s].label;u[m][_]||(x(v,m,{label:_,color:g[s].color,i:g[s].i,trace:y,pts:g[s].pts}),u[m][_]=!0,c=Math.max(c,(_||"").length))}else x(v,m,f),c=Math.max(c,(y.name||"").length)}if(!a.length)return[];var h=!o||!i,A=[];for(d=0;d<a.length;d++){var w=n[a[d]];h?A.push(w[0]):A.push(w)}for(h&&(A=[A]),d=0;d<A.length;d++){var E=1/0;for(s=0;s<A[d].length;s++){var L=A[d][s].trace.legendrank;E>L&&(E=L)}A[d][0]._groupMinRank=E,A[d][0]._preGroupSort=d}var C=function(H,N){return H.trace.legendrank-N.trace.legendrank||H._preSort-N._preSort};for(A.forEach(function(H,N){H[0]._preGroupSort=N}),A.sort(function(H,N){return H[0]._groupMinRank-N[0]._groupMinRank||H[0]._preGroupSort-N[0]._preGroupSort}),d=0;d<A.length;d++){A[d].forEach(function(H,N){H._preSort=N}),A[d].sort(C);var P=A[d][0].trace,D=null;for(s=0;s<A[d].length;s++){var G=A[d][s].trace.legendgrouptitle;if(G&&G.text){D=G,e&&(G.font=T._groupTitleFont);break}}if(r&&A[d].reverse(),D){var I=!1;for(s=0;s<A[d].length;s++)if(S.traceIs(A[d][s].trace,"pie-like")){I=!0;break}A[d].unshift({i:-1,groupTitle:D,noClick:I,trace:{showlegend:P.showlegend,legendgroup:P.legendgroup,visible:T.groupclick==="toggleitem"||P.visible}})}for(s=0;s<A[d].length;s++)A[d][s]=[A[d][s]]}return T._lgroupsLength=A.length,T._maxNameLength=c,A}},85167:function(Q,z,t){var S=t(71828),k=t(73972),l=!0;Q.exports=function(T,b,d){var s=b._fullLayout;if(!b._dragged&&!b._editing){var e,i=s.legend.itemclick,r=s.legend.itemdoubleclick,n=s.legend.groupclick;if(d===1&&i==="toggle"&&r==="toggleothers"&&l&&b.data&&b._context.showTips&&S.notifier(S._(b,"Double-click on legend to isolate one trace"),"long"),l=!1,d===1?e=i:d===2&&(e=r),e){var a=n==="togglegroup",o=s.hiddenlabels?s.hiddenlabels.slice():[],u=T.data()[0][0];if(!u.groupTitle||!u.noClick){var p,c,x,g,f,y=b._fullData,v=u.trace,m=v.legendgroup,_={},h=[],A=[],w=[];if(k.traceIs(v,"pie-like")){var E=u.label,L=o.indexOf(E);e==="toggle"?L===-1?o.push(E):o.splice(L,1):e==="toggleothers"&&(o=[],b.calcdata[0].forEach(function(Z){E!==Z.label&&o.push(Z.label)}),b._fullLayout.hiddenlabels&&b._fullLayout.hiddenlabels.length===o.length&&L===-1&&(o=[])),k.call("_guiRelayout",b,"hiddenlabels",o)}else{var C,P=m&&m.length,D=[];if(P)for(p=0;p<y.length;p++)(C=y[p]).visible&&C.legendgroup===m&&D.push(p);if(e==="toggle"){var G;switch(v.visible){case!0:G="legendonly";break;case!1:G=!1;break;case"legendonly":G=!0}if(P)if(a)for(p=0;p<y.length;p++)y[p].visible!==!1&&y[p].legendgroup===m&&W(y[p],G);else W(v,G);else W(v,G)}else if(e==="toggleothers"){var I,H,N,F,V=!0;for(p=0;p<y.length;p++)if(I=y[p]===v,N=y[p].showlegend!==!0,!(I||N||(H=P&&y[p].legendgroup===m)||y[p].visible!==!0||k.traceIs(y[p],"notLegendIsolatable"))){V=!1;break}for(p=0;p<y.length;p++)if(y[p].visible!==!1&&!k.traceIs(y[p],"notLegendIsolatable"))switch(v.visible){case"legendonly":W(y[p],!0);break;case!0:F=!!V||"legendonly",I=y[p]===v,N=y[p].showlegend!==!0&&!y[p].legendgroup,H=I||P&&y[p].legendgroup===m,W(y[p],!(!H&&!N)||F)}}for(p=0;p<A.length;p++)if(x=A[p]){var q=x.constructUpdate(),te=Object.keys(q);for(c=0;c<te.length;c++)g=te[c],(_[g]=_[g]||[])[w[p]]=q[g]}for(f=Object.keys(_),p=0;p<f.length;p++)for(g=f[p],c=0;c<h.length;c++)_[g].hasOwnProperty(c)||(_[g][c]=void 0);k.call("_guiRestyle",b,_,h)}}}}function $(Z,J,ee){var re=h.indexOf(Z),ae=_[J];return ae||(ae=_[J]=[]),h.indexOf(Z)===-1&&(h.push(Z),re=h.length-1),ae[re]=ee,re}function W(Z,J){if(!u.groupTitle||a){var ee=Z._fullInput;if(k.hasTransform(ee,"groupby")){var re=A[ee.index];if(!re){var ae=k.getTransformIndices(ee,"groupby"),oe=ae[ae.length-1];re=S.keyedContainer(ee,"transforms["+oe+"].styles","target","value.visible"),A[ee.index]=re}var ce=re.get(Z._group);ce===void 0&&(ce=!0),ce!==!1&&re.set(Z._group,J),w[ee.index]=$(ee.index,"visible",ee.visible!==!1)}else{var pe=ee.visible!==!1&&J;$(ee.index,"visible",pe)}}}}},10130:function(Q,z){z.isGrouped=function(t){return(t.traceorder||"").indexOf("grouped")!==-1},z.isVertical=function(t){return t.orientation!=="h"},z.isReversed=function(t){return(t.traceorder||"").indexOf("reversed")!==-1}},2199:function(Q,z,t){Q.exports={moduleType:"component",name:"legend",layoutAttributes:t(33030),supplyLayoutDefaults:t(99017),draw:t(43969),style:t(53630)}},53630:function(Q,z,t){var S=t(39898),k=t(73972),l=t(71828),T=l.strTranslate,b=t(91424),d=t(7901),s=t(52075).extractOpts,e=t(34098),i=t(63463),r=t(53581).castOption,n=t(14928);function a(p,c){return(c?"radial":"horizontal")+(p?"":"reversed")}function o(p){var c=p[0].trace,x=c.contours,g=e.hasLines(c),f=e.hasMarkers(c),y=c.visible&&c.fill&&c.fill!=="none",v=!1,m=!1;if(x){var _=x.coloring;_==="lines"?v=!0:g=_==="none"||_==="heatmap"||x.showlines,x.type==="constraint"?y=x._operation!=="=":_!=="fill"&&_!=="heatmap"||(m=!0)}return{showMarker:f,showLine:g,showFill:y,showGradientLine:v,showGradientFill:m,anyLine:g||v,anyFill:y||m}}function u(p,c,x){return p&&l.isArrayOrTypedArray(p)?c:p>x?x:p}Q.exports=function(p,c,x){var g=c._fullLayout;x||(x=g.legend);var f=x.itemsizing==="constant",y=x.itemwidth,v=(y+2*n.itemGap)/2,m=T(v,0),_=function(w,E,L,C){var P;if(w+1)P=w;else{if(!(E&&E.width>0))return 0;P=E.width}return f?C:Math.min(P,L)};function h(w,E,L){var C=w[0].trace,P=C.marker||{},D=P.line||{},G=L?C.visible&&C.type===L:k.traceIs(C,"bar"),I=S.select(E).select("g.legendpoints").selectAll("path.legend"+L).data(G?[w]:[]);I.enter().append("path").classed("legend"+L,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),I.exit().remove(),I.each(function(H){var N=S.select(this),F=H[0],V=_(F.mlw,P.line,5,2);N.style("stroke-width",V+"px");var q=F.mcc;if(!x._inHover&&"mc"in F){var te=s(P),$=te.mid;$===void 0&&($=(te.max+te.min)/2),q=b.tryColorscale(P,"")($)}var W=q||F.mc||P.color,Z=P.pattern,J=Z&&b.getPatternAttr(Z.shape,0,"");if(J){var ee=b.getPatternAttr(Z.bgcolor,0,null),re=b.getPatternAttr(Z.fgcolor,0,null),ae=Z.fgopacity,oe=u(Z.size,8,10),ce=u(Z.solidity,.5,1),pe="legend-"+C.uid;N.call(b.pattern,"legend",c,pe,J,oe,ce,q,Z.fillmode,ee,re,ae)}else N.call(d.fill,W);V&&d.stroke(N,F.mlc||D.color)})}function A(w,E,L){var C=w[0],P=C.trace,D=L?P.visible&&P.type===L:k.traceIs(P,L),G=S.select(E).select("g.legendpoints").selectAll("path.legend"+L).data(D?[w]:[]);if(G.enter().append("path").classed("legend"+L,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),G.exit().remove(),G.size()){var I=(P.marker||{}).line,H=_(r(I.width,C.pts),I,5,2),N=l.minExtend(P,{marker:{line:{width:H}}});N.marker.line.color=I.color;var F=l.minExtend(C,{trace:N});i(G,F,N)}}p.each(function(w){var E=S.select(this),L=l.ensureSingle(E,"g","layers");L.style("opacity",w[0].trace.opacity);var C=x.valign,P=w[0].lineHeight,D=w[0].height;if(C!=="middle"&&P&&D){var G={top:1,bottom:-1}[C]*(.5*(P-D+3));L.attr("transform",T(0,G))}else L.attr("transform",null);L.selectAll("g.legendfill").data([w]).enter().append("g").classed("legendfill",!0),L.selectAll("g.legendlines").data([w]).enter().append("g").classed("legendlines",!0);var I=L.selectAll("g.legendsymbols").data([w]);I.enter().append("g").classed("legendsymbols",!0),I.selectAll("g.legendpoints").data([w]).enter().append("g").classed("legendpoints",!0)}).each(function(w){var E,L=w[0].trace,C=[];if(L.visible)switch(L.type){case"histogram2d":case"heatmap":C=[["M-15,-2V4H15V-2Z"]],E=!0;break;case"choropleth":case"choroplethmapbox":C=[["M-6,-6V6H6V-6Z"]],E=!0;break;case"densitymapbox":C=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],E="radial";break;case"cone":C=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],E=!1;break;case"streamtube":C=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],E=!1;break;case"surface":C=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],E=!0;break;case"mesh3d":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!1;break;case"volume":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!0;break;case"isosurface":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],E=!1}var P=S.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(C);P.enter().append("path").classed("legend3dandfriends",!0).attr("transform",m).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(D,G){var I,H=S.select(this),N=s(L),F=N.colorscale,V=N.reversescale;if(F){if(!E){var q=F.length;I=G===0?F[V?q-1:0][1]:G===1?F[V?0:q-1][1]:F[Math.floor((q-1)/2)][1]}}else{var te=L.vertexcolor||L.facecolor||L.color;I=l.isArrayOrTypedArray(te)?te[G]||te[0]:te}H.attr("d",D[0]),I?H.call(d.fill,I):H.call(function($){if($.size()){var W="legendfill-"+L.uid;b.gradient($,c,W,a(V,E==="radial"),F,"fill")}})})}).each(function(w){var E=w[0].trace,L=E.type==="waterfall";if(w[0]._distinct&&L){var C=w[0].trace[w[0].dir].marker;return w[0].mc=C.color,w[0].mlw=C.line.width,w[0].mlc=C.line.color,h(w,this,"waterfall")}var P=[];E.visible&&L&&(P=w[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var D=S.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(P);D.enter().append("path").classed("legendwaterfall",!0).attr("transform",m).style("stroke-miterlimit",1),D.exit().remove(),D.each(function(G){var I=S.select(this),H=E[G[0]].marker,N=_(void 0,H.line,5,2);I.attr("d",G[1]).style("stroke-width",N+"px").call(d.fill,H.color),N&&I.call(d.stroke,H.line.color)})}).each(function(w){h(w,this,"funnel")}).each(function(w){h(w,this)}).each(function(w){var E=w[0].trace,L=S.select(this).select("g.legendpoints").selectAll("path.legendbox").data(E.visible&&k.traceIs(E,"box-violin")?[w]:[]);L.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),L.exit().remove(),L.each(function(){var C=S.select(this);if(E.boxpoints!=="all"&&E.points!=="all"||d.opacity(E.fillcolor)!==0||d.opacity((E.line||{}).color)!==0){var P=_(void 0,E.line,5,2);C.style("stroke-width",P+"px").call(d.fill,E.fillcolor),P&&d.stroke(C,E.line.color)}else{var D=l.minExtend(E,{marker:{size:f?12:l.constrain(E.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});L.call(b.pointStyle,D,c)}})}).each(function(w){A(w,this,"funnelarea")}).each(function(w){A(w,this,"pie")}).each(function(w){var E,L,C=o(w),P=C.showFill,D=C.showLine,G=C.showGradientLine,I=C.showGradientFill,H=C.anyFill,N=C.anyLine,F=w[0],V=F.trace,q=s(V),te=q.colorscale,$=q.reversescale,W=e.hasMarkers(V)||!H?"M5,0":N?"M5,-2":"M5,-3",Z=S.select(this),J=Z.select(".legendfill").selectAll("path").data(P||I?[w]:[]);if(J.enter().append("path").classed("js-fill",!0),J.exit().remove(),J.attr("d",W+"h"+y+"v6h-"+y+"z").call(function(ae){if(ae.size())if(P)b.fillGroupStyle(ae,c);else{var oe="legendfill-"+V.uid;b.gradient(ae,c,oe,a($),te,"fill")}}),D||G){var ee=_(void 0,V.line,10,5);L=l.minExtend(V,{line:{width:ee}}),E=[l.minExtend(F,{trace:L})]}var re=Z.select(".legendlines").selectAll("path").data(D||G?[E]:[]);re.enter().append("path").classed("js-line",!0),re.exit().remove(),re.attr("d",W+(G?"l"+y+",0.0001":"h"+y)).call(D?b.lineGroupStyle:function(ae){if(ae.size()){var oe="legendline-"+V.uid;b.lineGroupStyle(ae),b.gradient(ae,c,oe,a($),te,"stroke")}})}).each(function(w){var E,L,C=o(w),P=C.anyFill,D=C.anyLine,G=C.showLine,I=C.showMarker,H=w[0],N=H.trace,F=!I&&!D&&!P&&e.hasText(N);function V(re,ae,oe,ce){var pe=l.nestedProperty(N,re).get(),ve=l.isArrayOrTypedArray(pe)&&ae?ae(pe):pe;if(f&&ve&&ce!==void 0&&(ve=ce),oe){if(ve<oe[0])return oe[0];if(ve>oe[1])return oe[1]}return ve}function q(re){return H._distinct&&H.index&&re[H.index]?re[H.index]:re[0]}if(I||F||G){var te={},$={};if(I){te.mc=V("marker.color",q),te.mx=V("marker.symbol",q),te.mo=V("marker.opacity",l.mean,[.2,1]),te.mlc=V("marker.line.color",q),te.mlw=V("marker.line.width",l.mean,[0,5],2),$.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var W=V("marker.size",l.mean,[2,16],12);te.ms=W,$.marker.size=W}G&&($.line={width:V("line.width",q,[0,10],5)}),F&&(te.tx="Aa",te.tp=V("textposition",q),te.ts=10,te.tc=V("textfont.color",q),te.tf=V("textfont.family",q)),E=[l.minExtend(H,te)],(L=l.minExtend(N,$)).selectedpoints=null,L.texttemplate=null}var Z=S.select(this).select("g.legendpoints"),J=Z.selectAll("path.scatterpts").data(I?E:[]);J.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",m),J.exit().remove(),J.call(b.pointStyle,L,c),I&&(E[0].mrc=3);var ee=Z.selectAll("g.pointtext").data(F?E:[]);ee.enter().append("g").classed("pointtext",!0).append("text").attr("transform",m),ee.exit().remove(),ee.selectAll("text").call(b.textPointStyle,L,c)}).each(function(w){var E=w[0].trace,L=S.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(E.visible&&E.type==="candlestick"?[w,w]:[]);L.enter().append("path").classed("legendcandle",!0).attr("d",function(C,P){return P?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",m).style("stroke-miterlimit",1),L.exit().remove(),L.each(function(C,P){var D=S.select(this),G=E[P?"increasing":"decreasing"],I=_(void 0,G.line,5,2);D.style("stroke-width",I+"px").call(d.fill,G.fillcolor),I&&d.stroke(D,G.line.color)})}).each(function(w){var E=w[0].trace,L=S.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(E.visible&&E.type==="ohlc"?[w,w]:[]);L.enter().append("path").classed("legendohlc",!0).attr("d",function(C,P){return P?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",m).style("stroke-miterlimit",1),L.exit().remove(),L.each(function(C,P){var D=S.select(this),G=E[P?"increasing":"decreasing"],I=_(void 0,G.line,5,2);D.style("fill","none").call(b.dashLine,G.line.dash,I),I&&d.stroke(D,G.line.color)})})}},42068:function(Q,z,t){t(93348),Q.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},26023:function(Q,z,t){var S=t(73972),k=t(74875),l=t(41675),T=t(24255),b=t(34031).eraseActiveShape,d=t(71828),s=d._,e=Q.exports={};function i(g,f){var y,v,m=f.currentTarget,_=m.getAttribute("data-attr"),h=m.getAttribute("data-val")||!0,A=g._fullLayout,w={},E=l.list(g,null,!0),L=A._cartesianSpikesEnabled;if(_==="zoom"){var C,P=h==="in"?.5:2,D=(1+P)/2,G=(1-P)/2;for(v=0;v<E.length;v++)if(!(y=E[v]).fixedrange)if(C=y._name,h==="auto")w[C+".autorange"]=!0;else if(h==="reset"){if(y._rangeInitial===void 0)w[C+".autorange"]=!0;else{var I=y._rangeInitial.slice();w[C+".range[0]"]=I[0],w[C+".range[1]"]=I[1]}y._showSpikeInitial!==void 0&&(w[C+".showspikes"]=y._showSpikeInitial,L!=="on"||y._showSpikeInitial||(L="off"))}else{var H=[y.r2l(y.range[0]),y.r2l(y.range[1])],N=[D*H[0]+G*H[1],D*H[1]+G*H[0]];w[C+".range[0]"]=y.l2r(N[0]),w[C+".range[1]"]=y.l2r(N[1])}}else _!=="hovermode"||h!=="x"&&h!=="y"||(h=A._isHoriz?"y":"x",m.setAttribute("data-val",h)),w[_]=h;A._cartesianSpikesEnabled=L,S.call("_guiRelayout",g,w)}function r(g,f){for(var y=f.currentTarget,v=y.getAttribute("data-attr"),m=y.getAttribute("data-val")||!0,_=g._fullLayout._subplots.gl3d||[],h={},A=v.split("."),w=0;w<_.length;w++)h[_[w]+"."+A[1]]=m;var E=m==="pan"?m:"zoom";h.dragmode=E,S.call("_guiRelayout",g,h)}function n(g,f){for(var y=f.currentTarget.getAttribute("data-attr"),v=y==="resetLastSave",m=y==="resetDefault",_=g._fullLayout,h=_._subplots.gl3d||[],A={},w=0;w<h.length;w++){var E,L=h[w],C=L+".camera",P=L+".aspectratio",D=L+".aspectmode",G=_[L]._scene;v?(A[C+".up"]=G.viewInitial.up,A[C+".eye"]=G.viewInitial.eye,A[C+".center"]=G.viewInitial.center,E=!0):m&&(A[C+".up"]=null,A[C+".eye"]=null,A[C+".center"]=null,E=!0),E&&(A[P+".x"]=G.viewInitial.aspectratio.x,A[P+".y"]=G.viewInitial.aspectratio.y,A[P+".z"]=G.viewInitial.aspectratio.z,A[D]=G.viewInitial.aspectmode)}S.call("_guiRelayout",g,A)}function a(g,f){var y=f.currentTarget,v=y._previousVal,m=g._fullLayout,_=m._subplots.gl3d||[],h=["xaxis","yaxis","zaxis"],A={},w={};if(v)w=v,y._previousVal=null;else{for(var E=0;E<_.length;E++){var L=_[E],C=m[L],P=L+".hovermode";A[P]=C.hovermode,w[P]=!1;for(var D=0;D<3;D++){var G=h[D],I=L+"."+G+".showspikes";w[I]=!1,A[I]=C[G].showspikes}}y._previousVal=A}return w}function o(g,f){for(var y=f.currentTarget,v=y.getAttribute("data-attr"),m=y.getAttribute("data-val")||!0,_=g._fullLayout,h=_._subplots.geo||[],A=0;A<h.length;A++){var w=h[A],E=_[w];if(v==="zoom"){var L=E.projection.scale,C=m==="in"?2*L:.5*L;S.call("_guiRelayout",g,w+".projection.scale",C)}}v==="reset"&&x(g,"geo")}function u(g){var f=g._fullLayout;return!f.hovermode&&(f._has("cartesian")?f._isHoriz?"y":"x":"closest")}function p(g){var f=u(g);S.call("_guiRelayout",g,"hovermode",f)}function c(g,f){for(var y=f.currentTarget.getAttribute("data-val"),v=g._fullLayout,m=v._subplots.mapbox||[],_={},h=0;h<m.length;h++){var A=m[h],w=v[A].zoom,E=y==="in"?1.05*w:w/1.05;_[A+".zoom"]=E}S.call("_guiRelayout",g,_)}function x(g,f){for(var y=g._fullLayout,v=y._subplots[f]||[],m={},_=0;_<v.length;_++)for(var h=v[_],A=y[h]._subplot.viewInitial,w=Object.keys(A),E=0;E<w.length;E++){var L=w[E];m[h+"."+L]=A[L]}S.call("_guiRelayout",g,m)}e.toImage={name:"toImage",title:function(g){var f=(g._context.toImageButtonOptions||{}).format||"png";return s(g,f==="png"?"Download plot as a png":"Download plot")},icon:T.camera,click:function(g){var f=g._context.toImageButtonOptions,y={format:f.format||"png"};d.notifier(s(g,"Taking snapshot - this may take a few seconds"),"long"),y.format!=="svg"&&d.isIE()&&(d.notifier(s(g,"IE only supports svg.  Changing format to svg."),"long"),y.format="svg"),["filename","width","height","scale"].forEach(function(v){v in f&&(y[v]=f[v])}),S.call("downloadImage",g,y).then(function(v){d.notifier(s(g,"Snapshot succeeded")+" - "+v,"long")}).catch(function(){d.notifier(s(g,"Sorry, there was a problem downloading your snapshot!"),"long")})}},e.sendDataToCloud={name:"sendDataToCloud",title:function(g){return s(g,"Edit in Chart Studio")},icon:T.disk,click:function(g){k.sendDataToCloud(g)}},e.editInChartStudio={name:"editInChartStudio",title:function(g){return s(g,"Edit in Chart Studio")},icon:T.pencil,click:function(g){k.sendDataToCloud(g)}},e.zoom2d={name:"zoom2d",_cat:"zoom",title:function(g){return s(g,"Zoom")},attr:"dragmode",val:"zoom",icon:T.zoombox,click:i},e.pan2d={name:"pan2d",_cat:"pan",title:function(g){return s(g,"Pan")},attr:"dragmode",val:"pan",icon:T.pan,click:i},e.select2d={name:"select2d",_cat:"select",title:function(g){return s(g,"Box Select")},attr:"dragmode",val:"select",icon:T.selectbox,click:i},e.lasso2d={name:"lasso2d",_cat:"lasso",title:function(g){return s(g,"Lasso Select")},attr:"dragmode",val:"lasso",icon:T.lasso,click:i},e.drawclosedpath={name:"drawclosedpath",title:function(g){return s(g,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:T.drawclosedpath,click:i},e.drawopenpath={name:"drawopenpath",title:function(g){return s(g,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:T.drawopenpath,click:i},e.drawline={name:"drawline",title:function(g){return s(g,"Draw line")},attr:"dragmode",val:"drawline",icon:T.drawline,click:i},e.drawrect={name:"drawrect",title:function(g){return s(g,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:T.drawrect,click:i},e.drawcircle={name:"drawcircle",title:function(g){return s(g,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:T.drawcircle,click:i},e.eraseshape={name:"eraseshape",title:function(g){return s(g,"Erase active shape")},icon:T.eraseshape,click:b},e.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(g){return s(g,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:i},e.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(g){return s(g,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:i},e.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(g){return s(g,"Autoscale")},attr:"zoom",val:"auto",icon:T.autoscale,click:i},e.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(g){return s(g,"Reset axes")},attr:"zoom",val:"reset",icon:T.home,click:i},e.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(g){return s(g,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:i},e.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(g){return s(g,"Compare data on hover")},attr:"hovermode",val:function(g){return g._fullLayout._isHoriz?"y":"x"},icon:T.tooltip_compare,gravity:"ne",click:i},e.zoom3d={name:"zoom3d",_cat:"zoom",title:function(g){return s(g,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:T.zoombox,click:r},e.pan3d={name:"pan3d",_cat:"pan",title:function(g){return s(g,"Pan")},attr:"scene.dragmode",val:"pan",icon:T.pan,click:r},e.orbitRotation={name:"orbitRotation",title:function(g){return s(g,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:T["3d_rotate"],click:r},e.tableRotation={name:"tableRotation",title:function(g){return s(g,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:T["z-axis"],click:r},e.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(g){return s(g,"Reset camera to default")},attr:"resetDefault",icon:T.home,click:n},e.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(g){return s(g,"Reset camera to last save")},attr:"resetLastSave",icon:T.movie,click:n},e.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(g){return s(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(g,f){var y=a(g,f);S.call("_guiRelayout",g,y)}},e.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(g){return s(g,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:o},e.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(g){return s(g,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:o},e.resetGeo={name:"resetGeo",_cat:"reset",title:function(g){return s(g,"Reset")},attr:"reset",val:null,icon:T.autoscale,click:o},e.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(g){return s(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:p},e.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(g){return s(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:p},e.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(g){return s(g,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:p},e.resetViewSankey={name:"resetSankeyGroup",title:function(g){return s(g,"Reset view")},icon:T.home,click:function(g){for(var f={"node.groups":[],"node.x":[],"node.y":[]},y=0;y<g._fullData.length;y++){var v=g._fullData[y]._viewInitial;f["node.groups"].push(v.node.groups.slice()),f["node.x"].push(v.node.x.slice()),f["node.y"].push(v.node.y.slice())}S.call("restyle",g,f)}},e.toggleHover={name:"toggleHover",title:function(g){return s(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(g,f){var y=a(g,f);y.hovermode=u(g),S.call("_guiRelayout",g,y)}},e.resetViews={name:"resetViews",title:function(g){return s(g,"Reset views")},icon:T.home,click:function(g,f){var y=f.currentTarget;y.setAttribute("data-attr","zoom"),y.setAttribute("data-val","reset"),i(g,f),y.setAttribute("data-attr","resetLastSave"),n(g,f),x(g,"geo"),x(g,"mapbox")}},e.toggleSpikelines={name:"toggleSpikelines",title:function(g){return s(g,"Toggle Spike Lines")},icon:T.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(g){var f=g._fullLayout,y=f._cartesianSpikesEnabled;f._cartesianSpikesEnabled=y==="on"?"off":"on",S.call("_guiRelayout",g,function(v){for(var m=v._fullLayout._cartesianSpikesEnabled==="on",_=l.list(v,null,!0),h={},A=0;A<_.length;A++){var w=_[A];h[w._name+".showspikes"]=!!m||w._showSpikeInitial}return h}(g))}},e.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(g){return s(g,"Reset view")},attr:"reset",icon:T.home,click:function(g){x(g,"mapbox")}},e.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(g){return s(g,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:c},e.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(g){return s(g,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:c}},93348:function(Q,z,t){var S=t(26023),k=Object.keys(S),l=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],T=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(l),b=[];k.forEach(function(d){(function(s){if(T.indexOf(s._cat||s.name)===-1){var e=s.name,i=(s._cat||s.name).toLowerCase();b.indexOf(e)===-1&&b.push(e),b.indexOf(i)===-1&&b.push(i)}})(S[d])}),b.sort(),Q.exports={DRAW_MODES:l,backButtons:T,foreButtons:b}},35750:function(Q,z,t){var S=t(71828),k=t(7901),l=t(44467),T=t(42068);Q.exports=function(b,d){var s=b.modebar||{},e=l.newContainer(d,"modebar");function i(n,a){return S.coerce(s,e,T,n,a)}i("orientation"),i("bgcolor",k.addOpacity(d.paper_bgcolor,.5));var r=k.contrast(k.rgb(d.modebar.bgcolor));i("color",k.addOpacity(r,.3)),i("activecolor",k.addOpacity(r,.7)),i("uirevision",d.uirevision),i("add"),i("remove")}},64168:function(Q,z,t){Q.exports={moduleType:"component",name:"modebar",layoutAttributes:t(42068),supplyLayoutDefaults:t(35750),manage:t(14192)}},14192:function(Q,z,t){var S=t(41675),k=t(34098),l=t(73972),T=t(23469).isUnifiedHover,b=t(37676),d=t(26023),s=t(93348).DRAW_MODES,e=t(71828).extendDeep;Q.exports=function(i){var r=i._fullLayout,n=i._context,a=r._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var o,u=n.modeBarButtons;o=Array.isArray(u)&&u.length?function(p){for(var c=e([],p),x=0;x<c.length;x++)for(var g=c[x],f=0;f<g.length;f++){var y=g[f];if(typeof y=="string"){if(d[y]===void 0)throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));c[x][f]=d[y]}}return c}(u):!n.displayModeBar&&n.watermark?[]:function(p){var c=p._fullLayout,x=p._fullData,g=p._context;function f(pe,ve){if(typeof ve=="string"){if(ve.toLowerCase()===pe.toLowerCase())return!0}else{var we=ve.name,xe=ve._cat||ve.name;if(we===pe||xe===pe.toLowerCase())return!0}return!1}var y=c.modebar.add;typeof y=="string"&&(y=[y]);var v=c.modebar.remove;typeof v=="string"&&(v=[v]);var m=g.modeBarButtonsToAdd.concat(y.filter(function(pe){for(var ve=0;ve<g.modeBarButtonsToRemove.length;ve++)if(f(pe,g.modeBarButtonsToRemove[ve]))return!1;return!0})),_=g.modeBarButtonsToRemove.concat(v.filter(function(pe){for(var ve=0;ve<g.modeBarButtonsToAdd.length;ve++)if(f(pe,g.modeBarButtonsToAdd[ve]))return!1;return!0})),h=c._has("cartesian"),A=c._has("gl3d"),w=c._has("geo"),E=c._has("pie"),L=c._has("funnelarea"),C=c._has("gl2d"),P=c._has("ternary"),D=c._has("mapbox"),G=c._has("polar"),I=c._has("smith"),H=c._has("sankey"),N=function(pe){for(var ve=S.list({_fullLayout:pe},null,!0),we=0;we<ve.length;we++)if(!ve[we].fixedrange)return!1;return!0}(c),F=T(c.hovermode),V=[];function q(pe){if(pe.length){for(var ve=[],we=0;we<pe.length;we++){for(var xe=pe[we],ge=d[xe],Oe=ge.name.toLowerCase(),Ae=(ge._cat||ge.name).toLowerCase(),Te=!1,se=0;se<_.length;se++){var le=_[se].toLowerCase();if(le===Oe||le===Ae){Te=!0;break}}Te||ve.push(d[xe])}V.push(ve)}}var te=["toImage"];g.showEditInChartStudio?te.push("editInChartStudio"):g.showSendToCloud&&te.push("sendDataToCloud"),q(te);var $=[],W=[],Z=[],J=[];(h||C||E||L||P)+w+A+D+G+I>1?(W=["toggleHover"],Z=["resetViews"]):w?($=["zoomInGeo","zoomOutGeo"],W=["hoverClosestGeo"],Z=["resetGeo"]):A?(W=["hoverClosest3d"],Z=["resetCameraDefault3d","resetCameraLastSave3d"]):D?($=["zoomInMapbox","zoomOutMapbox"],W=["toggleHover"],Z=["resetViewMapbox"]):C?W=["hoverClosestGl2d"]:E?W=["hoverClosestPie"]:H?(W=["hoverClosestCartesian","hoverCompareCartesian"],Z=["resetViewSankey"]):W=["toggleHover"],h&&(W=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(pe){for(var ve=0;ve<pe.length;ve++)if(!l.traceIs(pe[ve],"noHover"))return!1;return!0}(x)||F)&&(W=[]),!h&&!C||N||($=["zoomIn2d","zoomOut2d","autoScale2d"],Z[0]!=="resetViews"&&(Z=["resetScale2d"])),A?J=["zoom3d","pan3d","orbitRotation","tableRotation"]:(h||C)&&!N||P?J=["zoom2d","pan2d"]:D||w?J=["pan2d"]:G&&(J=["zoom2d"]),function(pe){for(var ve=!1,we=0;we<pe.length&&!ve;we++){var xe=pe[we];xe._module&&xe._module.selectPoints&&(l.traceIs(xe,"scatter-like")?(k.hasMarkers(xe)||k.hasText(xe))&&(ve=!0):l.traceIs(xe,"box-violin")&&xe.boxpoints!=="all"&&xe.points!=="all"||(ve=!0))}return ve}(x)&&J.push("select2d","lasso2d");var ee=[],re=function(pe){ee.indexOf(pe)===-1&&W.indexOf(pe)!==-1&&ee.push(pe)};if(Array.isArray(m)){for(var ae=[],oe=0;oe<m.length;oe++){var ce=m[oe];typeof ce=="string"?(ce=ce.toLowerCase(),s.indexOf(ce)!==-1?(c._has("mapbox")||c._has("cartesian"))&&J.push(ce):ce==="togglespikelines"?re("toggleSpikelines"):ce==="togglehover"?re("toggleHover"):ce==="hovercompare"?re("hoverCompareCartesian"):ce==="hoverclosest"?(re("hoverClosestCartesian"),re("hoverClosestGeo"),re("hoverClosest3d"),re("hoverClosestGl2d"),re("hoverClosestPie")):ce==="v1hovermode"&&(re("toggleHover"),re("hoverClosestCartesian"),re("hoverCompareCartesian"),re("hoverClosestGeo"),re("hoverClosest3d"),re("hoverClosestGl2d"),re("hoverClosestPie"))):ae.push(ce)}m=ae}return q(J),q($.concat(Z)),q(ee),function(pe,ve){if(ve.length)if(Array.isArray(ve[0]))for(var we=0;we<ve.length;we++)pe.push(ve[we]);else pe.push(ve);return pe}(V,m)}(i),a?a.update(i,o):r._modeBar=b(i,o)}else a&&(a.destroy(),delete r._modeBar)}},37676:function(Q,z,t){var S=t(39898),k=t(92770),l=t(71828),T=t(24255),b=t(11506).version,d=new DOMParser;function s(i){this.container=i.container,this.element=document.createElement("div"),this.update(i.graphInfo,i.buttons),this.container.appendChild(this.element)}var e=s.prototype;e.update=function(i,r){this.graphInfo=i;var n=this.graphInfo._context,a=this.graphInfo._fullLayout,o="modebar-"+a._uid;this.element.setAttribute("id",o),this._uid=o,this.element.className="modebar",n.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),a.modebar.orientation==="v"&&(this.element.className+=" vertical",r=r.reverse());var u=a.modebar,p=n.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";l.deleteRelatedStyleRule(o),l.addRelatedStyleRule(o,p+"#"+o+" .modebar-group","background-color: "+u.bgcolor),l.addRelatedStyleRule(o,"#"+o+" .modebar-btn .icon path","fill: "+u.color),l.addRelatedStyleRule(o,"#"+o+" .modebar-btn:hover .icon path","fill: "+u.activecolor),l.addRelatedStyleRule(o,"#"+o+" .modebar-btn.active .icon path","fill: "+u.activecolor);var c=!this.hasButtons(r),x=this.hasLogo!==n.displaylogo,g=this.locale!==n.locale;if(this.locale=n.locale,(c||x||g)&&(this.removeAllButtons(),this.updateButtons(r),n.watermark||n.displaylogo)){var f=this.getLogo();n.watermark&&(f.className=f.className+" watermark"),a.modebar.orientation==="v"?this.element.insertBefore(f,this.element.childNodes[0]):this.element.appendChild(f),this.hasLogo=!0}this.updateActiveButton()},e.updateButtons=function(i){var r=this;this.buttons=i,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(n){var a=r.createGroup();n.forEach(function(o){var u=o.name;if(!u)throw new Error("must provide button 'name' in button config");if(r.buttonsNames.indexOf(u)!==-1)throw new Error("button name '"+u+"' is taken");r.buttonsNames.push(u);var p=r.createButton(o);r.buttonElements.push(p),a.appendChild(p)}),r.element.appendChild(a)})},e.createGroup=function(){var i=document.createElement("div");return i.className="modebar-group",i},e.createButton=function(i){var r=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var a=i.title;a===void 0?a=i.name:typeof a=="function"&&(a=a(this.graphInfo)),(a||a===0)&&n.setAttribute("data-title",a),i.attr!==void 0&&n.setAttribute("data-attr",i.attr);var o=i.val;if(o!==void 0&&(typeof o=="function"&&(o=o(this.graphInfo)),n.setAttribute("data-val",o)),typeof i.click!="function")throw new Error("must provide button 'click' function in button config");n.addEventListener("click",function(p){i.click(r.graphInfo,p),r.updateActiveButton(p.currentTarget)}),n.setAttribute("data-toggle",i.toggle||!1),i.toggle&&S.select(n).classed("active",!0);var u=i.icon;return typeof u=="function"?n.appendChild(u()):n.appendChild(this.createIcon(u||T.question)),n.setAttribute("data-gravity",i.gravity||"n"),n},e.createIcon=function(i){var r,n=k(i.height)?Number(i.height):i.ascent-i.descent,a="http://www.w3.org/2000/svg";if(i.path){(r=document.createElementNS(a,"svg")).setAttribute("viewBox",[0,0,i.width,n].join(" ")),r.setAttribute("class","icon");var o=document.createElementNS(a,"path");o.setAttribute("d",i.path),i.transform?o.setAttribute("transform",i.transform):i.ascent!==void 0&&o.setAttribute("transform","matrix(1 0 0 -1 0 "+i.ascent+")"),r.appendChild(o)}return i.svg&&(r=d.parseFromString(i.svg,"application/xml").childNodes[0]),r.setAttribute("height","1em"),r.setAttribute("width","1em"),r},e.updateActiveButton=function(i){var r=this.graphInfo._fullLayout,n=i!==void 0?i.getAttribute("data-attr"):null;this.buttonElements.forEach(function(a){var o=a.getAttribute("data-val")||!0,u=a.getAttribute("data-attr"),p=a.getAttribute("data-toggle")==="true",c=S.select(a);if(p)u===n&&c.classed("active",!c.classed("active"));else{var x=u===null?u:l.nestedProperty(r,u).get();c.classed("active",x===o)}})},e.hasButtons=function(i){var r=this.buttons;if(!r||i.length!==r.length)return!1;for(var n=0;n<i.length;++n){if(i[n].length!==r[n].length)return!1;for(var a=0;a<i[n].length;a++)if(i[n][a].name!==r[n][a].name)return!1}return!0},e.getLogo=function(){var i=this.createGroup(),r=document.createElement("a");return r.href="https://plotly.com/",r.target="_blank",r.setAttribute("data-title",l._(this.graphInfo,"Produced with Plotly.js")+" (v"+b+")"),r.className="modebar-btn plotlyjsicon modebar-btn--logo",r.appendChild(this.createIcon(T.newplotlylogo)),i.appendChild(r),i},e.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},e.destroy=function(){l.removeElement(this.container.querySelector(".modebar")),l.deleteRelatedStyleRule(this._uid)},Q.exports=function(i,r){var n=i._fullLayout,a=new s({graphInfo:i,container:n._modebardiv.node(),buttons:r});return n._privateplot&&S.select(a.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),a}},37113:function(Q,z,t){var S=t(41940),k=t(22399),l=(0,t(44467).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});Q.exports={visible:{valType:"boolean",editType:"plot"},buttons:l,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:S({editType:"plot"}),bgcolor:{valType:"color",dflt:k.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},89573:function(Q){Q.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},28674:function(Q,z,t){var S=t(71828),k=t(7901),l=t(44467),T=t(85501),b=t(37113),d=t(89573);function s(e,i,r,n){var a=n.calendar;function o(p,c){return S.coerce(e,i,b.buttons,p,c)}if(o("visible")){var u=o("step");u!=="all"&&(!a||a==="gregorian"||u!=="month"&&u!=="year"?o("stepmode"):i.stepmode="backward",o("count")),o("label")}}Q.exports=function(e,i,r,n,a){var o=e.rangeselector||{},u=l.newContainer(i,"rangeselector");function p(g,f){return S.coerce(o,u,b,g,f)}if(p("visible",T(o,u,{name:"buttons",handleItemDefaults:s,calendar:a}).length>0)){var c=function(g,f,y){for(var v=y.filter(function(A){return f[A].anchor===g._id}),m=0,_=0;_<v.length;_++){var h=f[v[_]].domain;h&&(m=Math.max(h[1],m))}return[g.domain[0],m+d.yPad]}(i,r,n);p("x",c[0]),p("y",c[1]),S.noneOrAll(e,i,["x","y"]),p("xanchor"),p("yanchor"),S.coerceFont(p,"font",r.font);var x=p("bgcolor");p("activecolor",k.contrast(x,d.lightAmount,d.darkAmount)),p("bordercolor"),p("borderwidth")}}},21598:function(Q,z,t){var S=t(39898),k=t(73972),l=t(74875),T=t(7901),b=t(91424),d=t(71828),s=d.strTranslate,e=t(63893),i=t(41675),r=t(18783),n=r.LINE_SPACING,a=r.FROM_TL,o=r.FROM_BR,u=t(89573),p=t(70565);function c(f){return f._id}function x(f,y,v){var m=d.ensureSingle(f,"rect","selector-rect",function(_){_.attr("shape-rendering","crispEdges")});m.attr({rx:u.rx,ry:u.ry}),m.call(T.stroke,y.bordercolor).call(T.fill,function(_,h){return h._isActive||h._isHovered?_.activecolor:_.bgcolor}(y,v)).style("stroke-width",y.borderwidth+"px")}function g(f,y,v,m){var _,h;d.ensureSingle(f,"text","selector-text",function(A){A.attr("text-anchor","middle")}).call(b.font,y.font).text((_=v,h=m._fullLayout._meta,_.label?h?d.templateString(_.label,h):_.label:_.step==="all"?"all":_.count+_.step.charAt(0))).call(function(A){e.convertToTspans(A,m)})}Q.exports=function(f){var y=f._fullLayout._infolayer.selectAll(".rangeselector").data(function(v){for(var m=i.list(v,"x",!0),_=[],h=0;h<m.length;h++){var A=m[h];A.rangeselector&&A.rangeselector.visible&&_.push(A)}return _}(f),c);y.enter().append("g").classed("rangeselector",!0),y.exit().remove(),y.style({cursor:"pointer","pointer-events":"all"}),y.each(function(v){var m=S.select(this),_=v,h=_.rangeselector,A=m.selectAll("g.button").data(d.filterVisible(h.buttons));A.enter().append("g").classed("button",!0),A.exit().remove(),A.each(function(w){var E=S.select(this),L=p(_,w);w._isActive=function(C,P,D){if(P.step==="all")return C.autorange===!0;var G=Object.keys(D);return C.range[0]===D[G[0]]&&C.range[1]===D[G[1]]}(_,w,L),E.call(x,h,w),E.call(g,h,w,f),E.on("click",function(){f._dragged||k.call("_guiRelayout",f,L)}),E.on("mouseover",function(){w._isHovered=!0,E.call(x,h,w)}),E.on("mouseout",function(){w._isHovered=!1,E.call(x,h,w)})}),function(w,E,L,C,P){var D=0,G=0,I=L.borderwidth;E.each(function(){var te=S.select(this).select(".selector-text"),$=L.font.size*n,W=Math.max($*e.lineCount(te),16)+3;G=Math.max(G,W)}),E.each(function(){var te=S.select(this),$=te.select(".selector-rect"),W=te.select(".selector-text"),Z=W.node()&&b.bBox(W.node()).width,J=L.font.size*n,ee=e.lineCount(W),re=Math.max(Z+10,u.minButtonWidth);te.attr("transform",s(I+D,I)),$.attr({x:0,y:0,width:re,height:G}),e.positionText(W,re/2,G/2-(ee-1)*J/2+3),D+=re+5});var H=w._fullLayout._size,N=H.l+H.w*L.x,F=H.t+H.h*(1-L.y),V="left";d.isRightAnchor(L)&&(N-=D,V="right"),d.isCenterAnchor(L)&&(N-=D/2,V="center");var q="top";d.isBottomAnchor(L)&&(F-=G,q="bottom"),d.isMiddleAnchor(L)&&(F-=G/2,q="middle"),D=Math.ceil(D),G=Math.ceil(G),N=Math.round(N),F=Math.round(F),l.autoMargin(w,C+"-range-selector",{x:L.x,y:L.y,l:D*a[V],r:D*o[V],b:G*o[q],t:G*a[q]}),P.attr("transform",s(N,F))}(f,A,h,_._name,m)})}},70565:function(Q,z,t){var S=t(81041),k=t(71828).titleCase;Q.exports=function(l,T){var b=l._name,d={};if(T.step==="all")d[b+".autorange"]=!0;else{var s=function(e,i){var r,n=e.range,a=new Date(e.r2l(n[1])),o=i.step,u=S["utc"+k(o)],p=i.count;switch(i.stepmode){case"backward":r=e.l2r(+u.offset(a,-p));break;case"todate":var c=u.offset(a,-p);r=e.l2r(+u.ceil(c))}return[r,n[1]]}(l,T);d[b+".range[0]"]=s[0],d[b+".range[1]"]=s[1]}return d}},97218:function(Q,z,t){Q.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:t(37113)}}},layoutAttributes:t(37113),handleDefaults:t(28674),draw:t(21598)}},75148:function(Q,z,t){var S=t(22399);Q.exports={bgcolor:{valType:"color",dflt:S.background,editType:"plot"},bordercolor:{valType:"color",dflt:S.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},88443:function(Q,z,t){var S=t(41675).list,k=t(71739).getAutoRange,l=t(73251);Q.exports=function(T){for(var b=S(T,"x",!0),d=0;d<b.length;d++){var s=b[d],e=s[l.name];e&&e.visible&&e.autorange&&(e._input.autorange=!0,e._input.range=e.range=k(T,s))}}},73251:function(Q){Q.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},26377:function(Q,z,t){var S=t(71828),k=t(44467),l=t(41675),T=t(75148),b=t(47850);Q.exports=function(d,s,e){var i=d[e],r=s[e];if(i.rangeslider||s._requestRangeslider[r._id]){S.isPlainObject(i.rangeslider)||(i.rangeslider={});var n,a,o=i.rangeslider,u=k.newContainer(r,"rangeslider");if(m("visible")){m("bgcolor",s.plot_bgcolor),m("bordercolor"),m("borderwidth"),m("thickness"),m("autorange",!r.isValidRange(o.range)),m("range");var p=s._subplots;if(p)for(var c=p.cartesian.filter(function(h){return h.substr(0,h.indexOf("y"))===l.name2id(e)}).map(function(h){return h.substr(h.indexOf("y"),h.length)}),x=S.simpleMap(c,l.id2name),g=0;g<x.length;g++){var f=x[g];n=o[f]||{},a=k.newContainer(u,f,"yaxis");var y,v=s[f];n.range&&v.isValidRange(n.range)&&(y="fixed"),_("rangemode",y)!=="match"&&_("range",v.range.slice())}u._input=o}}function m(h,A){return S.coerce(o,u,T,h,A)}function _(h,A){return S.coerce(n,a,b,h,A)}}},72413:function(Q,z,t){var S=t(39898),k=t(73972),l=t(74875),T=t(71828),b=T.strTranslate,d=t(91424),s=t(7901),e=t(92998),i=t(93612),r=t(41675),n=t(28569),a=t(6964),o=t(73251);function u(y,v,m,_){var h=T.ensureSingle(y,"rect",o.bgClassName,function(L){L.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),A=_.borderwidth%2==0?_.borderwidth:_.borderwidth-1,w=-_._offsetShift,E=d.crispRound(v,_.borderwidth);h.attr({width:_._width+A,height:_._height+A,transform:b(w,w),"stroke-width":E}).call(s.stroke,_.bordercolor).call(s.fill,_.bgcolor)}function p(y,v,m,_){var h=v._fullLayout;T.ensureSingleById(h._topdefs,"clipPath",_._clipId,function(A){A.append("rect").attr({x:0,y:0})}).select("rect").attr({width:_._width,height:_._height})}function c(y,v,m,_){var h,A=v.calcdata,w=y.selectAll("g."+o.rangePlotClassName).data(m._subplotsWith,T.identity);w.enter().append("g").attr("class",function(E){return o.rangePlotClassName+" "+E}).call(d.setClipUrl,_._clipId,v),w.order(),w.exit().remove(),w.each(function(E,L){var C=S.select(this),P=L===0,D=r.getFromId(v,E,"y"),G=D._name,I=_[G],H={data:[],layout:{xaxis:{type:m.type,domain:[0,1],range:_.range.slice(),calendar:m.calendar},width:_._width,height:_._height,margin:{t:0,b:0,l:0,r:0}},_context:v._context};m.rangebreaks&&(H.layout.xaxis.rangebreaks=m.rangebreaks),H.layout[G]={type:D.type,domain:[0,1],range:I.rangemode!=="match"?I.range.slice():D.range.slice(),calendar:D.calendar},D.rangebreaks&&(H.layout[G].rangebreaks=D.rangebreaks),l.supplyDefaults(H);var N=H._fullLayout.xaxis,F=H._fullLayout[G];N.clearCalc(),N.setScale(),F.clearCalc(),F.setScale();var V={id:E,plotgroup:C,xaxis:N,yaxis:F,isRangePlot:!0};P?h=V:(V.mainplot="xy",V.mainplotinfo=h),i.rangePlot(v,V,function(q,te){for(var $=[],W=0;W<q.length;W++){var Z=q[W],J=Z[0].trace;J.xaxis+J.yaxis===te&&$.push(Z)}return $}(A,E))})}function x(y,v,m,_,h){T.ensureSingle(y,"rect",o.maskMinClassName,function(A){A.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",_._height).call(s.fill,o.maskColor),T.ensureSingle(y,"rect",o.maskMaxClassName,function(A){A.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",_._height).call(s.fill,o.maskColor),h.rangemode!=="match"&&(T.ensureSingle(y,"rect",o.maskMinOppAxisClassName,function(A){A.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",_._width).call(s.fill,o.maskOppAxisColor),T.ensureSingle(y,"rect",o.maskMaxOppAxisClassName,function(A){A.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",_._width).style("border-top",o.maskOppBorder).call(s.fill,o.maskOppAxisColor))}function g(y,v,m,_){v._context.staticPlot||T.ensureSingle(y,"rect",o.slideBoxClassName,function(h){h.attr({y:0,cursor:o.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:_._height,fill:o.slideBoxFill})}function f(y,v,m,_){var h=T.ensureSingle(y,"g",o.grabberMinClassName),A=T.ensureSingle(y,"g",o.grabberMaxClassName),w={x:0,width:o.handleWidth,rx:o.handleRadius,fill:s.background,stroke:s.defaultLine,"stroke-width":o.handleStrokeWidth,"shape-rendering":"crispEdges"},E={y:Math.round(_._height/4),height:Math.round(_._height/2)};T.ensureSingle(h,"rect",o.handleMinClassName,function(C){C.attr(w)}).attr(E),T.ensureSingle(A,"rect",o.handleMaxClassName,function(C){C.attr(w)}).attr(E);var L={width:o.grabAreaWidth,x:0,y:0,fill:o.grabAreaFill,cursor:v._context.staticPlot?void 0:o.grabAreaCursor};T.ensureSingle(h,"rect",o.grabAreaMinClassName,function(C){C.attr(L)}).attr("height",_._height),T.ensureSingle(A,"rect",o.grabAreaMaxClassName,function(C){C.attr(L)}).attr("height",_._height)}Q.exports=function(y){for(var v=y._fullLayout,m=v._rangeSliderData,_=0;_<m.length;_++){var h=m[_][o.name];h._clipId=h._id+"-"+v._uid}var A=v._infolayer.selectAll("g."+o.containerClassName).data(m,function(w){return w._name});A.exit().each(function(w){var E=w[o.name];v._topdefs.select("#"+E._clipId).remove()}).remove(),m.length!==0&&(A.enter().append("g").classed(o.containerClassName,!0).attr("pointer-events","all"),A.each(function(w){var E=S.select(this),L=w[o.name],C=v[r.id2name(w.anchor)],P=L[r.id2name(w.anchor)];if(L.range){var D,G=T.simpleMap(L.range,w.r2l),I=T.simpleMap(w.range,w.r2l);D=I[0]<I[1]?[Math.min(G[0],I[0]),Math.max(G[1],I[1])]:[Math.max(G[0],I[0]),Math.min(G[1],I[1])],L.range=L._input.range=T.simpleMap(D,w.l2r)}w.cleanRange("rangeslider.range");var H=v._size,N=w.domain;L._width=H.w*(N[1]-N[0]);var F=Math.round(H.l+H.w*N[0]),V=Math.round(H.t+H.h*(1-w._counterDomainMin)+(w.side==="bottom"?w._depth:0)+L._offsetShift+o.extraPad);E.attr("transform",b(F,V)),L._rl=T.simpleMap(L.range,w.r2l);var q=L._rl[0],te=L._rl[1],$=te-q;if(L.p2d=function(pe){return pe/L._width*$+q},L.d2p=function(pe){return(pe-q)/$*L._width},w.rangebreaks){var W=w.locateBreaks(q,te);if(W.length){var Z,J,ee=0;for(Z=0;Z<W.length;Z++)ee+=(J=W[Z]).max-J.min;var re=L._width/(te-q-ee),ae=[-re*q];for(Z=0;Z<W.length;Z++)J=W[Z],ae.push(ae[ae.length-1]-re*(J.max-J.min));for(L.d2p=function(pe){for(var ve=ae[0],we=0;we<W.length;we++){var xe=W[we];if(pe>=xe.max)ve=ae[we+1];else if(pe<xe.min)break}return ve+re*pe},Z=0;Z<W.length;Z++)(J=W[Z]).pmin=L.d2p(J.min),J.pmax=L.d2p(J.max);L.p2d=function(pe){for(var ve=ae[0],we=0;we<W.length;we++){var xe=W[we];if(pe>=xe.pmax)ve=ae[we+1];else if(pe<xe.pmin)break}return(pe-ve)/re}}}if(P.rangemode!=="match"){var oe=C.r2l(P.range[0]),ce=C.r2l(P.range[1])-oe;L.d2pOppAxis=function(pe){return(pe-oe)/ce*L._height}}E.call(u,y,w,L).call(p,y,w,L).call(c,y,w,L).call(x,y,w,L,P).call(g,y,w,L).call(f,y,w,L),function(pe,ve,we,xe){if(!ve._context.staticPlot){var ge=pe.select("rect."+o.slideBoxClassName).node(),Oe=pe.select("rect."+o.grabAreaMinClassName).node(),Ae=pe.select("rect."+o.grabAreaMaxClassName).node();pe.on("mousedown",Te),pe.on("touchstart",Te)}function Te(){var se=S.event,le=se.target,ne=se.clientX||se.touches[0].clientX,me=ne-pe.node().getBoundingClientRect().left,Ee=xe.d2p(we._rl[0]),be=xe.d2p(we._rl[1]),De=n.coverSlip();function Ue(ke){var _e,Ce,Fe,Re=+(ke.clientX||ke.touches[0].clientX)-ne;switch(le){case ge:if(Fe="ew-resize",Ee+Re>we._length||be+Re<0)return;_e=Ee+Re,Ce=be+Re;break;case Oe:if(Fe="col-resize",Ee+Re>we._length)return;_e=Ee+Re,Ce=be;break;case Ae:if(Fe="col-resize",be+Re<0)return;_e=Ee,Ce=be+Re;break;default:Fe="ew-resize",_e=me,Ce=me+Re}if(Ce<_e){var He=Ce;Ce=_e,_e=He}xe._pixelMin=_e,xe._pixelMax=Ce,a(S.select(De),Fe),function(Ge,$e,st,Ke){function gt(rt){return st.l2r(T.constrain(rt,Ke._rl[0],Ke._rl[1]))}var mt=gt(Ke.p2d(Ke._pixelMin)),at=gt(Ke.p2d(Ke._pixelMax));window.requestAnimationFrame(function(){k.call("_guiRelayout",$e,st._name+".range",[mt,at])})}(0,ve,we,xe)}function he(){De.removeEventListener("mousemove",Ue),De.removeEventListener("mouseup",he),this.removeEventListener("touchmove",Ue),this.removeEventListener("touchend",he),T.removeElement(De)}this.addEventListener("touchmove",Ue),this.addEventListener("touchend",he),De.addEventListener("mousemove",Ue),De.addEventListener("mouseup",he)}}(E,y,w,L),function(pe,ve,we,xe,ge,Oe){var Ae=o.handleWidth/2;function Te(ke){return T.constrain(ke,0,xe._width)}function se(ke){return T.constrain(ke,0,xe._height)}function le(ke){return T.constrain(ke,-Ae,xe._width+Ae)}var ne=Te(xe.d2p(we._rl[0])),me=Te(xe.d2p(we._rl[1]));if(pe.select("rect."+o.slideBoxClassName).attr("x",ne).attr("width",me-ne),pe.select("rect."+o.maskMinClassName).attr("width",ne),pe.select("rect."+o.maskMaxClassName).attr("x",me).attr("width",xe._width-me),Oe.rangemode!=="match"){var Ee=xe._height-se(xe.d2pOppAxis(ge._rl[1])),be=xe._height-se(xe.d2pOppAxis(ge._rl[0]));pe.select("rect."+o.maskMinOppAxisClassName).attr("x",ne).attr("height",Ee).attr("width",me-ne),pe.select("rect."+o.maskMaxOppAxisClassName).attr("x",ne).attr("y",be).attr("height",xe._height-be).attr("width",me-ne),pe.select("rect."+o.slideBoxClassName).attr("y",Ee).attr("height",be-Ee)}var De=.5,Ue=Math.round(le(ne-Ae))-De,he=Math.round(le(me-Ae))+De;pe.select("g."+o.grabberMinClassName).attr("transform",b(Ue,De)),pe.select("g."+o.grabberMaxClassName).attr("transform",b(he,De))}(E,0,w,L,C,P),w.side==="bottom"&&e.draw(y,w._id+"title",{propContainer:w,propName:w._name+".title",placeholder:v._dfltTitle.x,attributes:{x:w._offset+w._length/2,y:V+L._height+L._offsetShift+10+1.5*w.title.font.size,"text-anchor":"middle"}})}))}},549:function(Q,z,t){var S=t(41675),k=t(63893),l=t(73251),T=t(18783).LINE_SPACING,b=l.name;function d(s){var e=s&&s[b];return e&&e.visible}z.isVisible=d,z.makeData=function(s){var e=S.list({_fullLayout:s},"x",!0),i=s.margin,r=[];if(!s._has("gl2d"))for(var n=0;n<e.length;n++){var a=e[n];if(d(a)){r.push(a);var o=a[b];o._id=b+a._id,o._height=(s.height-i.b-i.t)*o.thickness,o._offsetShift=Math.floor(o.borderwidth/2)}}s._rangeSliderData=r},z.autoMarginOpts=function(s,e){var i=s._fullLayout,r=e[b],n=e._id.charAt(0),a=0,o=0;return e.side==="bottom"&&(a=e._depth,e.title.text!==i._dfltTitle[n]&&(o=1.5*e.title.font.size+10+r._offsetShift,o+=(e.title.text.match(k.BR_TAG_ALL)||[]).length*e.title.font.size*T)),{x:0,y:e._counterDomainMin,l:0,r:0,t:0,b:r._height+a+Math.max(i.margin.b,o),pad:l.extraPad+2*r._offsetShift}}},13137:function(Q,z,t){var S=t(71828),k=t(75148),l=t(47850),T=t(549);Q.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:S.extendFlat({},k,{yaxis:l})}}},layoutAttributes:t(75148),handleDefaults:t(26377),calcAutorange:t(88443),draw:t(72413),isVisible:T.isVisible,makeData:T.makeData,autoMarginOpts:T.autoMarginOpts}},47850:function(Q){Q.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},8389:function(Q,z,t){var S=t(50215),k=t(82196).line,l=t(79952).P,T=t(1426).extendFlat,b=t(30962).overrideAll,d=t(44467).templatedArray;t(24695),Q.exports=b(d("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:T({},S.xref,{}),yref:T({},S.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:k.color,width:T({},k.width,{min:1,dflt:1}),dash:T({},l,{dflt:"dot"})}}),"arraydraw","from-root")},34122:function(Q){Q.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},59402:function(Q,z,t){var S=t(71828),k=t(89298),l=t(85501),T=t(8389),b=t(30477);function d(s,e,i){function r(E,L){return S.coerce(s,e,T,E,L)}var n=r("path"),a=r("type",n?"path":"rect")!=="path";a&&delete e.path,r("opacity"),r("line.color"),r("line.width"),r("line.dash");for(var o=["x","y"],u=0;u<2;u++){var p,c,x,g=o[u],f={_fullLayout:i},y=k.coerceRef(s,e,f,g);if((p=k.getFromId(f,y))._selectionIndices.push(e._index),x=b.rangeToShapePosition(p),c=b.shapePositionToRange(p),a){var v=g+"0",m=g+"1",_=s[v],h=s[m];s[v]=c(s[v],!0),s[m]=c(s[m],!0),k.coercePosition(e,f,r,y,v),k.coercePosition(e,f,r,y,m);var A=e[v],w=e[m];A!==void 0&&w!==void 0&&(e[v]=x(A),e[m]=x(w),s[v]=_,s[m]=h)}}a&&S.noneOrAll(s,e,["x0","x1","y0","y1"])}Q.exports=function(s,e){l(s,e,{name:"selections",handleItemDefaults:d});for(var i=e.selections,r=0;r<i.length;r++){var n=i[r];n&&n.path===void 0&&(n.x0!==void 0&&n.x1!==void 0&&n.y0!==void 0&&n.y1!==void 0||(e.selections[r]=null))}}},32485:function(Q,z,t){var S=t(60165).readPaths,k=t(42359),l=t(51873).clearOutlineControllers,T=t(7901),b=t(91424),d=t(44467).arrayEditor,s=t(30477),e=s.getPathString;function i(u){var p=u._fullLayout;for(var c in l(u),p._selectionLayer.selectAll("path").remove(),p._plots){var x=p._plots[c].selectionLayer;x&&x.selectAll("path").remove()}for(var g=0;g<p.selections.length;g++)n(u,g)}function r(u){return u._context.editSelection}function n(u,p){u._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+p+'"]').remove();var c=s.makeSelectionsOptionsAndPlotinfo(u,p),x=c.options,g=c.plotinfo;x._input&&function(f){var y=e(u,x),v={"data-index":p,"fill-rule":"evenodd",d:y},m=x.opacity,_="rgba(0,0,0,0)",h=x.line.color||T.contrast(u._fullLayout.plot_bgcolor),A=x.line.width,w=x.line.dash;A||(A=5,w="solid");var E=r(u)&&u._fullLayout._activeSelectionIndex===p;E&&(_=u._fullLayout.activeselection.fillcolor,m=u._fullLayout.activeselection.opacity);for(var L=[],C=1;C>=0;C--){var P=f.append("path").attr(v).style("opacity",C?.1:m).call(T.stroke,h).call(T.fill,_).call(b.dashLine,C?"solid":w,C?4+A:A);if(a(P,u,x),E){var D=d(u.layout,"selections",x);P.style({cursor:"move"});var G={element:P.node(),plotinfo:g,gd:u,editHelpers:D,isActiveSelection:!0},I=S(y,u);k(I,P,G)}else P.style("pointer-events",C?"all":"none");L[C]=P}var H=L[0];L[1].node().addEventListener("click",function(){return function(N,F){if(r(N)){var V=+F.node().getAttribute("data-index");if(V>=0){if(V===N._fullLayout._activeSelectionIndex)return void o(N);N._fullLayout._activeSelectionIndex=V,N._fullLayout._deactivateSelection=o,i(N)}}}(u,H)})}(u._fullLayout._selectionLayer)}function a(u,p,c){var x=c.xref+c.yref;b.setClipUrl(u,"clip"+p._fullLayout._uid+x,p)}function o(u){r(u)&&u._fullLayout._activeSelectionIndex>=0&&(l(u),delete u._fullLayout._activeSelectionIndex,i(u))}Q.exports={draw:i,drawOne:n,activateLastSelection:function(u){if(r(u)){var p=u._fullLayout.selections.length-1;u._fullLayout._activeSelectionIndex=p,u._fullLayout._deactivateSelection=o,i(u)}}}},53777:function(Q,z,t){var S=t(79952).P,k=t(1426).extendFlat;Q.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:k({},S,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},90849:function(Q){Q.exports=function(z,t,S){S("newselection.mode"),S("newselection.line.width")&&(S("newselection.line.color"),S("newselection.line.dash")),S("activeselection.fillcolor"),S("activeselection.opacity")}},35855:function(Q,z,t){var S=t(64505).selectMode,k=t(51873).clearOutline,l=t(60165),T=l.readPaths,b=l.writePaths,d=l.fixDatesForPaths;Q.exports=function(s,e){if(s.length){var i=s[0][0];if(i){var r=i.getAttribute("d"),n=e.gd,a=n._fullLayout.newselection,o=e.plotinfo,u=o.xaxis,p=o.yaxis,c=e.isActiveSelection,x=e.dragmode,g=(n.layout||{}).selections||[];if(!S(x)&&c!==void 0){var f=n._fullLayout._activeSelectionIndex;if(f<g.length)switch(n._fullLayout.selections[f].type){case"rect":x="select";break;case"path":x="lasso"}}var y,v=T(r,n,o,c),m={xref:u._id,yref:p._id,opacity:a.opacity,line:{color:a.line.color,width:a.line.width,dash:a.line.dash}};v.length===1&&(y=v[0]),y&&y.length===5&&x==="select"?(m.type="rect",m.x0=y[0][1],m.y0=y[0][2],m.x1=y[2][1],m.y1=y[2][2]):(m.type="path",u&&p&&d(v,u,p),m.path=b(v),y=null),k(n);for(var _=e.editHelpers,h=(_||{}).modifyItem,A=[],w=0;w<g.length;w++){var E=n._fullLayout.selections[w];if(E){if(A[w]=E._input,c!==void 0&&w===n._fullLayout._activeSelectionIndex){var L=m;switch(E.type){case"rect":h("x0",L.x0),h("x1",L.x1),h("y0",L.y0),h("y1",L.y1);break;case"path":h("path",L.path)}}}else A[w]=E}return c===void 0?(A.push(m),A):_?_.getUpdateObj():{}}}}},75549:function(Q,z,t){var S=t(71828).strTranslate;function k(l,T){switch(l.type){case"log":return l.p2d(T);case"date":return l.p2r(T,0,l.calendar);default:return l.p2r(T)}}Q.exports={p2r:k,r2p:function(l,T){switch(l.type){case"log":return l.d2p(T);case"date":return l.r2p(T,0,l.calendar);default:return l.r2p(T)}},axValue:function(l){var T=l._id.charAt(0)==="y"?1:0;return function(b){return k(l,b[T])}},getTransform:function(l){return S(l.xaxis._offset,l.yaxis._offset)}}},47322:function(Q,z,t){var S=t(32485),k=t(3937);Q.exports={moduleType:"component",name:"selections",layoutAttributes:t(8389),supplyLayoutDefaults:t(59402),supplyDrawNewSelectionDefaults:t(90849),includeBasePlot:t(76325)("selections"),draw:S.draw,drawOne:S.drawOne,reselect:k.reselect,prepSelect:k.prepSelect,clearOutline:k.clearOutline,clearSelectionsCache:k.clearSelectionsCache,selectOnClick:k.selectOnClick}},3937:function(Q,z,t){var S=t(52142),k=t(38258),l=t(73972),T=t(91424).dashStyle,b=t(7901),d=t(30211),s=t(23469).makeEventData,e=t(64505),i=e.freeMode,r=e.rectMode,n=e.drawMode,a=e.openMode,o=e.selectMode,u=t(30477),p=t(21459),c=t(42359),x=t(51873).clearOutline,g=t(60165),f=g.handleEllipse,y=g.readPaths,v=t(90551).newShapes,m=t(35855),_=t(32485).activateLastSelection,h=t(71828),A=h.sorterAsc,w=t(61082),E=t(79990),L=t(41675).getFromId,C=t(33306),P=t(61549).redrawReglTraces,D=t(34122),G=D.MINSELECT,I=w.filter,H=w.tester,N=t(75549),F=N.p2r,V=N.axValue,q=N.getTransform;function te(he){return he.subplot!==void 0}function $(he,ke,_e,Ce,Fe,Re,He){var Ge,$e,st,Ke,gt,mt,at,rt,xt,Tt=ke._hoverdata,wt=ke._fullLayout.clickmode.indexOf("event")>-1,Ot=[];if(function(We){return We&&Array.isArray(We)&&We[0].hoverOnBox!==!0}(Tt)){ee(he,ke,Re);var Ct=function(We,nt){var ot,Ie,ze=We[0],et=-1,tt=[];for(Ie=0;Ie<nt.length;Ie++)if(ot=nt[Ie],ze.fullData._expandedIndex===ot.cd[0].trace._expandedIndex){if(ze.hoverOnBox===!0)break;ze.pointNumber!==void 0?et=ze.pointNumber:ze.binNumber!==void 0&&(et=ze.binNumber,tt=ze.pointNumbers);break}return{pointNumber:et,pointNumbers:tt,searchInfo:ot}}(Tt,Ge=oe(ke,_e,Ce,Fe));if(Ct.pointNumbers.length>0?function(We,nt){var ot,Ie,ze,et=[];for(ze=0;ze<We.length;ze++)(ot=We[ze]).cd[0].trace.selectedpoints&&ot.cd[0].trace.selectedpoints.length>0&&et.push(ot);if(et.length===1&&et[0]===nt.searchInfo&&(Ie=nt.searchInfo.cd[0].trace).selectedpoints.length===nt.pointNumbers.length){for(ze=0;ze<nt.pointNumbers.length;ze++)if(Ie.selectedpoints.indexOf(nt.pointNumbers[ze])<0)return!1;return!0}return!1}(Ge,Ct):function(We){var nt,ot,Ie=0;for(ot=0;ot<We.length;ot++)if((nt=We[ot].cd[0].trace).selectedpoints&&(nt.selectedpoints.length>1||(Ie+=nt.selectedpoints.length)>1))return!1;return Ie===1}(Ge)&&(mt=pe(Ct))){for(He&&He.remove(),xt=0;xt<Ge.length;xt++)($e=Ge[xt])._module.selectPoints($e,!1);ve(ke,Ge),re(Re),wt&&Ue(ke)}else{for(at=he.shiftKey&&(mt!==void 0?mt:pe(Ct)),st=function(We,nt,ot){return{pointNumber:We,searchInfo:nt,subtract:!!ot}}(Ct.pointNumber,Ct.searchInfo,at),Ke=J(Re.selectionDefs.concat([st])),xt=0;xt<Ge.length;xt++)if(gt=xe(Ge[xt]._module.selectPoints(Ge[xt],Ke),Ge[xt]),Ot.length)for(var Ye=0;Ye<gt.length;Ye++)Ot.push(gt[Ye]);else Ot=gt;if(ve(ke,Ge,rt={points:Ot}),st&&Re&&Re.selectionDefs.push(st),He){var Xe=Re.mergedPolygons,Ve=a(Re.dragmode);c(ge(Xe,Ve),He,Re)}wt&&De(ke,rt)}}}function W(he){return"pointNumber"in he&&"searchInfo"in he}function Z(he){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(ke,_e,Ce,Fe){var Re=he.searchInfo.cd[0].trace._expandedIndex;return Fe.cd[0].trace._expandedIndex===Re&&Ce===he.pointNumber},isRect:!1,degenerate:!1,subtract:!!he.subtract}}function J(he){if(he.length){for(var ke=[],_e=W(he[0])?0:he[0][0][0],Ce=_e,Fe=W(he[0])?0:he[0][0][1],Re=Fe,He=0;He<he.length;He++)if(W(he[He]))ke.push(Z(he[He]));else{var Ge=H(he[He]);Ge.subtract=!!he[He].subtract,ke.push(Ge),_e=Math.min(_e,Ge.xmin),Ce=Math.max(Ce,Ge.xmax),Fe=Math.min(Fe,Ge.ymin),Re=Math.max(Re,Ge.ymax)}return{xmin:_e,xmax:Ce,ymin:Fe,ymax:Re,pts:[],contains:function($e,st,Ke,gt){for(var mt=!1,at=0;at<ke.length;at++)ke[at].contains($e,st,Ke,gt)&&(mt=!ke[at].subtract);return mt},isRect:!1,degenerate:!1}}}function ee(he,ke,_e){var Ce=ke._fullLayout,Fe=_e.plotinfo,Re=_e.dragmode,He=Ce._lastSelectedSubplot&&Ce._lastSelectedSubplot===Fe.id,Ge=(he.shiftKey||he.altKey)&&!(n(Re)&&a(Re));He&&Ge&&Fe.selection&&Fe.selection.selectionDefs&&!_e.selectionDefs?(_e.selectionDefs=Fe.selection.selectionDefs,_e.mergedPolygons=Fe.selection.mergedPolygons):Ge&&Fe.selection||re(_e),He||(x(ke),Ce._lastSelectedSubplot=Fe.id)}function re(he,ke){var _e=he.dragmode,Ce=he.plotinfo,Fe=he.gd;(function(gt){return gt._fullLayout._activeShapeIndex>=0})(Fe)&&Fe._fullLayout._deactivateShape(Fe),function(gt){return gt._fullLayout._activeSelectionIndex>=0}(Fe)&&Fe._fullLayout._deactivateSelection(Fe);var Re=Fe._fullLayout._zoomlayer,He=n(_e),Ge=o(_e);if(He||Ge){var $e,st,Ke=Re.selectAll(".select-outline-"+Ce.id);Ke&&Fe._fullLayout._outlining&&(He&&($e=v(Ke,he)),$e&&l.call("_guiRelayout",Fe,{shapes:$e}),Ge&&!te(he)&&(st=m(Ke,he)),st&&(Fe._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",Fe,{selections:st}).then(function(){ke&&_(Fe)})),Fe._fullLayout._outlining=!1)}Ce.selection={},Ce.selection.selectionDefs=he.selectionDefs=[],Ce.selection.mergedPolygons=he.mergedPolygons=[]}function ae(he){return he._id}function oe(he,ke,_e,Ce){if(!he.calcdata)return[];var Fe,Re,He,Ge=[],$e=ke.map(ae),st=_e.map(ae);for(He=0;He<he.calcdata.length;He++)if((Re=(Fe=he.calcdata[He])[0].trace).visible===!0&&Re._module&&Re._module.selectPoints)if(!te({subplot:Ce})||Re.subplot!==Ce&&Re.geo!==Ce)if(Re.type==="splom"){if(Re._xaxes[$e[0]]&&Re._yaxes[st[0]]){var Ke=ce(Re._module,Fe,ke[0],_e[0]);Ke.scene=he._fullLayout._splomScenes[Re.uid],Ge.push(Ke)}}else if(Re.type==="sankey"){var gt=ce(Re._module,Fe,ke[0],_e[0]);Ge.push(gt)}else{if($e.indexOf(Re.xaxis)===-1||st.indexOf(Re.yaxis)===-1)continue;Ge.push(ce(Re._module,Fe,L(he,Re.xaxis),L(he,Re.yaxis)))}else Ge.push(ce(Re._module,Fe,ke[0],_e[0]));return Ge}function ce(he,ke,_e,Ce){return{_module:he,cd:ke,xaxis:_e,yaxis:Ce}}function pe(he){var ke=he.searchInfo.cd[0].trace,_e=he.pointNumber,Ce=he.pointNumbers,Fe=Ce.length>0?Ce[0]:_e;return!!ke.selectedpoints&&ke.selectedpoints.indexOf(Fe)>-1}function ve(he,ke,_e){var Ce,Fe;for(Ce=0;Ce<ke.length;Ce++){var Re=ke[Ce].cd[0].trace._fullInput,He=he._fullLayout._tracePreGUI[Re.uid]||{};He.selectedpoints===void 0&&(He.selectedpoints=Re._input.selectedpoints||null)}if(_e){var Ge=_e.points||[];for(Ce=0;Ce<ke.length;Ce++)(Fe=ke[Ce].cd[0].trace)._input.selectedpoints=Fe._fullInput.selectedpoints=[],Fe._fullInput!==Fe&&(Fe.selectedpoints=[]);for(var $e=0;$e<Ge.length;$e++){var st=Ge[$e],Ke=st.data,gt=st.fullData,mt=st.pointIndex,at=st.pointIndices;at?([].push.apply(Ke.selectedpoints,at),Fe._fullInput!==Fe&&[].push.apply(gt.selectedpoints,at)):(Ke.selectedpoints.push(mt),Fe._fullInput!==Fe&&gt.selectedpoints.push(mt))}}else for(Ce=0;Ce<ke.length;Ce++)delete(Fe=ke[Ce].cd[0].trace).selectedpoints,delete Fe._input.selectedpoints,Fe._fullInput!==Fe&&delete Fe._fullInput.selectedpoints;(function(rt,xt){for(var Tt=!1,wt=0;wt<xt.length;wt++){var Ot=xt[wt],Ct=Ot.cd;l.traceIs(Ct[0].trace,"regl")&&(Tt=!0);var Ye=Ot._module,Xe=Ye.styleOnSelect||Ye.style;Xe&&(Xe(rt,Ct,Ct[0].node3),Ct[0].nodeRangePlot3&&Xe(rt,Ct,Ct[0].nodeRangePlot3))}Tt&&(C(rt),P(rt))})(he,ke)}function we(he,ke,_e){for(var Ce=(_e?S.difference:S.union)({regions:he},{regions:[ke]}).regions.reverse(),Fe=0;Fe<Ce.length;Fe++){var Re=Ce[Fe];Re.subtract=ne(Re,Ce.slice(0,Fe))}return Ce}function xe(he,ke){if(Array.isArray(he))for(var _e=ke.cd,Ce=ke.cd[0].trace,Fe=0;Fe<he.length;Fe++)he[Fe]=s(he[Fe],Ce,_e);return he}function ge(he,ke){for(var _e=[],Ce=0;Ce<he.length;Ce++){_e[Ce]=[];for(var Fe=0;Fe<he[Ce].length;Fe++){_e[Ce][Fe]=[],_e[Ce][Fe][0]=Fe?"L":"M";for(var Re=0;Re<he[Ce][Fe].length;Re++)_e[Ce][Fe].push(he[Ce][Fe][Re])}ke||_e[Ce].push(["Z",_e[Ce][0][1],_e[Ce][0][2]])}return _e}function Oe(he,ke){for(var _e,Ce,Fe=[],Re=[],He=0;He<ke.length;He++){var Ge=ke[He];Ce=Ge._module.selectPoints(Ge,he),Re.push(Ce),_e=xe(Ce,Ge),Fe=Fe.concat(_e)}return Fe}function Ae(he,ke,_e,Ce,Fe){var Re,He,Ge,$e=!!Ce;Fe&&(Re=Fe.plotinfo,He=Fe.xaxes[0]._id,Ge=Fe.yaxes[0]._id);var st=[],Ke=[],gt=le(he),mt=he._fullLayout;if(Re){var at=mt._zoomlayer,rt=mt.dragmode,xt=n(rt),Tt=o(rt);if(xt||Tt){var wt=L(he,He,"x"),Ot=L(he,Ge,"y");if(wt&&Ot){var Ct=at.selectAll(".select-outline-"+Re.id);if(Ct&&he._fullLayout._outlining&&Ct.length){for(var Ye=Ct[0][0].getAttribute("d"),Xe=y(Ye,he,Re),Ve=[],We=0;We<Xe.length;We++){for(var nt=Xe[We],ot=[],Ie=0;Ie<nt.length;Ie++)ot.push([me(wt,nt[Ie][1]),me(Ot,nt[Ie][2])]);ot.xref=He,ot.yref=Ge,ot.subtract=ne(ot,Ve),Ve.push(ot)}gt=gt.concat(Ve)}}}}var ze=He&&Ge?[He+Ge]:mt._subplots.cartesian;(function(Mn){var Cn=Mn.calcdata;if(Cn)for(var Tn=0;Tn<Cn.length;Tn++){var Pn=Cn[Tn][0].trace,Wn=Mn._fullLayout._splomScenes;if(Wn){var $n=Wn[Pn.uid];$n&&($n.selectBatch=[])}}})(he);for(var et={},tt=0;tt<ze.length;tt++){var dt=ze[tt],pt=dt.indexOf("y"),vt=dt.slice(0,pt),ct=dt.slice(pt),kt=He&&Ge?_e:void 0;if(kt=se(gt,vt,ct,kt)){var ut=Ce;if(!$e){var ft=L(he,vt,"x"),bt=L(he,ct,"y");ut=oe(he,[ft],[bt],dt);for(var It=0;It<ut.length;It++){var zt=ut[It],Rt=zt.cd[0],Jt=Rt.trace;if(zt._module.name==="scattergl"&&!Rt.t.xpx){var qt=Jt.x,Wt=Jt.y,jt=Jt._length;Rt.t.xpx=[],Rt.t.ypx=[];for(var fn=0;fn<jt;fn++)Rt.t.xpx[fn]=ft.c2p(qt[fn]),Rt.t.ypx[fn]=bt.c2p(Wt[fn])}zt._module.name==="splom"&&(et[Jt.uid]||(et[Jt.uid]=!0))}}var xn=Oe(kt,ut);st=st.concat(xn),Ke=Ke.concat(ut)}}var un={points:st};ve(he,Ke,un);var Ht=mt.clickmode.indexOf("event")>-1&&ke;if(!Re&&ke){var nn=le(he,!0);if(nn.length){var Kt=nn[0].xref,on=nn[0].yref;if(Kt&&on){var hn=Ee(nn);be([L(he,Kt,"x"),L(he,on,"y")])(un,hn)}}he._fullLayout._noEmitSelectedAtStart?he._fullLayout._noEmitSelectedAtStart=!1:Ht&&De(he,un),mt._reselect=!1}if(!Re&&mt._deselect){var dn=mt._deselect;(function(Mn,Cn,Tn){for(var Pn=0;Pn<Tn.length;Pn++){var Wn=Tn[Pn];if(Wn.xaxis&&Wn.xaxis._id===Mn&&Wn.yaxis&&Wn.yaxis._id===Cn)return!0}return!1})(He=dn.xref,Ge=dn.yref,Ke)||Te(he,He,Ge,Ce),Ht&&(un.points.length?De(he,un):Ue(he)),mt._deselect=!1}return{eventData:un,selectionTesters:_e}}function Te(he,ke,_e,Ce){Ce=oe(he,[L(he,ke,"x")],[L(he,_e,"y")],ke+_e);for(var Fe=0;Fe<Ce.length;Fe++){var Re=Ce[Fe];Re._module.selectPoints(Re,!1)}ve(he,Ce)}function se(he,ke,_e,Ce){for(var Fe,Re=0;Re<he.length;Re++){var He=he[Re];ke===He.xref&&_e===He.yref&&(Fe?Ce=J(Fe=we(Fe,He,!!He.subtract)):(Fe=[He],Ce=H(He)))}return Ce}function le(he,ke){for(var _e=[],Ce=he._fullLayout,Fe=Ce.selections,Re=Fe.length,He=0;He<Re;He++)if(!ke||He===Ce._activeSelectionIndex){var Ge=Fe[He];if(Ge){var $e,st,Ke,gt,mt,at=Ge.xref,rt=Ge.yref,xt=L(he,at,"x"),Tt=L(he,rt,"y");if(Ge.type==="rect"){mt=[];var wt=me(xt,Ge.x0),Ot=me(xt,Ge.x1),Ct=me(Tt,Ge.y0),Ye=me(Tt,Ge.y1);mt=[[wt,Ct],[wt,Ye],[Ot,Ye],[Ot,Ct]],$e=Math.min(wt,Ot),st=Math.max(wt,Ot),Ke=Math.min(Ct,Ye),gt=Math.max(Ct,Ye),mt.xmin=$e,mt.xmax=st,mt.ymin=Ke,mt.ymax=gt,mt.xref=at,mt.yref=rt,mt.subtract=!1,mt.isRect=!0,_e.push(mt)}else if(Ge.type==="path")for(var Xe=Ge.path.split("Z"),Ve=[],We=0;We<Xe.length;We++){var nt=Xe[We];if(nt){nt+="Z";var ot=u.extractPathCoords(nt,p.paramIsX,"raw"),Ie=u.extractPathCoords(nt,p.paramIsY,"raw");$e=1/0,st=-1/0,Ke=1/0,gt=-1/0,mt=[];for(var ze=0;ze<ot.length;ze++){var et=me(xt,ot[ze]),tt=me(Tt,Ie[ze]);mt.push([et,tt]),$e=Math.min(et,$e),st=Math.max(et,st),Ke=Math.min(tt,Ke),gt=Math.max(tt,gt)}mt.xmin=$e,mt.xmax=st,mt.ymin=Ke,mt.ymax=gt,mt.xref=at,mt.yref=rt,mt.subtract=ne(mt,Ve),Ve.push(mt),_e.push(mt)}}}}return _e}function ne(he,ke){for(var _e=!1,Ce=0;Ce<ke.length;Ce++)for(var Fe=ke[Ce],Re=0;Re<he.length;Re++)if(k(he[Re],Fe)){_e=!_e;break}return _e}function me(he,ke){return he.type==="date"&&(ke=ke.replace("_"," ")),he.type==="log"?he.c2p(ke):he.r2p(ke,null,he.calendar)}function Ee(he){for(var ke=he.length,_e=[],Ce=0;Ce<ke;Ce++){var Fe=he[Ce];_e=(_e=_e.concat(Fe)).concat([Fe[0]])}return(Re=_e).isRect=Re.length===5&&Re[0][0]===Re[4][0]&&Re[0][1]===Re[4][1]&&Re[0][0]===Re[1][0]&&Re[2][0]===Re[3][0]&&Re[0][1]===Re[3][1]&&Re[1][1]===Re[2][1]||Re[0][1]===Re[1][1]&&Re[2][1]===Re[3][1]&&Re[0][0]===Re[3][0]&&Re[1][0]===Re[2][0],Re.isRect&&(Re.xmin=Math.min(Re[0][0],Re[2][0]),Re.xmax=Math.max(Re[0][0],Re[2][0]),Re.ymin=Math.min(Re[0][1],Re[2][1]),Re.ymax=Math.max(Re[0][1],Re[2][1])),Re;var Re}function be(he){return function(ke,_e){for(var Ce,Fe,Re=0;Re<he.length;Re++){var He=he[Re],Ge=He._id,$e=Ge.charAt(0);if(_e.isRect){Ce||(Ce={});var st=_e[$e+"min"],Ke=_e[$e+"max"];st!==void 0&&Ke!==void 0&&(Ce[Ge]=[F(He,st),F(He,Ke)].sort(A))}else Fe||(Fe={}),Fe[Ge]=_e.map(V(He))}Ce&&(ke.range=Ce),Fe&&(ke.lassoPoints=Fe)}}function De(he,ke){ke&&(ke.selections=(he.layout||{}).selections||[]),he.emit("plotly_selected",ke)}function Ue(he){he.emit("plotly_deselect",null)}Q.exports={reselect:Ae,prepSelect:function(he,ke,_e,Ce,Fe){var Re=!te(Ce),He=i(Fe),Ge=r(Fe),$e=a(Fe),st=n(Fe),Ke=o(Fe),gt=Fe==="drawcircle",mt=Fe==="drawline"||gt,at=Ce.gd,rt=at._fullLayout,xt=Ke&&rt.newselection.mode==="immediate"&&Re,Tt=rt._zoomlayer,wt=Ce.element.getBoundingClientRect(),Ot=Ce.plotinfo,Ct=q(Ot),Ye=ke-wt.left,Xe=_e-wt.top;rt._calcInverseTransform(at);var Ve=h.apply3DTransform(rt._invTransform)(Ye,Xe);Ye=Ve[0],Xe=Ve[1];var We,nt,ot,Ie,ze,et,tt,dt=rt._invScaleX,pt=rt._invScaleY,vt=Ye,ct=Xe,kt="M"+Ye+","+Xe,ut=Ce.xaxes[0],ft=Ce.yaxes[0],bt=ut._length,It=ft._length,zt=he.altKey&&!(n(Fe)&&$e);ee(he,at,Ce),He&&(We=I([[Ye,Xe]],D.BENDPX));var Rt=Tt.selectAll("path.select-outline-"+Ot.id).data([1]),Jt=st?rt.newshape:rt.newselection;st&&(Ce.hasText=Jt.label.text||Jt.label.texttemplate);var qt=st&&!$e?Jt.fillcolor:"rgba(0,0,0,0)",Wt=Jt.line.color||(Re?b.contrast(at._fullLayout.plot_bgcolor):"#7f7f7f");Rt.enter().append("path").attr("class","select-outline select-outline-"+Ot.id).style({opacity:st?Jt.opacity/2:1,"stroke-dasharray":T(Jt.line.dash,Jt.line.width),"stroke-width":Jt.line.width+"px","shape-rendering":"crispEdges"}).call(b.stroke,Wt).call(b.fill,qt).attr("fill-rule","evenodd").classed("cursor-move",!!st).attr("transform",Ct).attr("d",kt+"Z");var jt=Tt.append("path").attr("class","zoombox-corners").style({fill:b.background,stroke:b.defaultLine,"stroke-width":1}).attr("transform",Ct).attr("d","M0,0Z");if(st&&Ce.hasText){var fn=Tt.select(".label-temp");fn.empty()&&(fn=Tt.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var xn=rt._uid+D.SELECTID,un=[],Ht=oe(at,Ce.xaxes,Ce.yaxes,Ce.subplot);xt&&!he.shiftKey&&(Ce._clearSubplotSelections=function(){if(Re){var Kt=ut._id,on=ft._id;Te(at,Kt,on,Ht);for(var hn=(at.layout||{}).selections||[],dn=[],Mn=!1,Cn=0;Cn<hn.length;Cn++){var Tn=rt.selections[Cn];Tn.xref!==Kt||Tn.yref!==on?dn.push(hn[Cn]):Mn=!0}Mn&&(at._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",at,{selections:dn}))}});var nn=function(Kt){return Kt.plotinfo.fillRangeItems||be(Kt.xaxes.concat(Kt.yaxes))}(Ce);Ce.moveFn=function(Kt,on){Ce._clearSubplotSelections&&(Ce._clearSubplotSelections(),Ce._clearSubplotSelections=void 0),vt=Math.max(0,Math.min(bt,dt*Kt+Ye)),ct=Math.max(0,Math.min(It,pt*on+Xe));var hn=Math.abs(vt-Ye),dn=Math.abs(ct-Xe);if(Ge){var Mn,Cn,Tn;if(Ke){var Pn=rt.selectdirection;switch(Mn=Pn==="any"?dn<Math.min(.6*hn,G)?"h":hn<Math.min(.6*dn,G)?"v":"d":Pn){case"h":Cn=gt?It/2:0,Tn=It;break;case"v":Cn=gt?bt/2:0,Tn=bt}}if(st)switch(rt.newshape.drawdirection){case"vertical":Mn="h",Cn=gt?It/2:0,Tn=It;break;case"horizontal":Mn="v",Cn=gt?bt/2:0,Tn=bt;break;case"ortho":hn<dn?(Mn="h",Cn=Xe,Tn=ct):(Mn="v",Cn=Ye,Tn=vt);break;default:Mn="d"}Mn==="h"?((Ie=mt?f(gt,[vt,Cn],[vt,Tn]):[[Ye,Cn],[Ye,Tn],[vt,Tn],[vt,Cn]]).xmin=mt?vt:Math.min(Ye,vt),Ie.xmax=mt?vt:Math.max(Ye,vt),Ie.ymin=Math.min(Cn,Tn),Ie.ymax=Math.max(Cn,Tn),jt.attr("d","M"+Ie.xmin+","+(Xe-G)+"h-4v"+2*G+"h4ZM"+(Ie.xmax-1)+","+(Xe-G)+"h4v"+2*G+"h-4Z")):Mn==="v"?((Ie=mt?f(gt,[Cn,ct],[Tn,ct]):[[Cn,Xe],[Cn,ct],[Tn,ct],[Tn,Xe]]).xmin=Math.min(Cn,Tn),Ie.xmax=Math.max(Cn,Tn),Ie.ymin=mt?ct:Math.min(Xe,ct),Ie.ymax=mt?ct:Math.max(Xe,ct),jt.attr("d","M"+(Ye-G)+","+Ie.ymin+"v-4h"+2*G+"v4ZM"+(Ye-G)+","+(Ie.ymax-1)+"v4h"+2*G+"v-4Z")):Mn==="d"&&((Ie=mt?f(gt,[Ye,Xe],[vt,ct]):[[Ye,Xe],[Ye,ct],[vt,ct],[vt,Xe]]).xmin=Math.min(Ye,vt),Ie.xmax=Math.max(Ye,vt),Ie.ymin=Math.min(Xe,ct),Ie.ymax=Math.max(Xe,ct),jt.attr("d","M0,0Z"))}else He&&(We.addPt([vt,ct]),Ie=We.filtered);if(Ce.selectionDefs&&Ce.selectionDefs.length?(ot=we(Ce.mergedPolygons,Ie,zt),Ie.subtract=zt,nt=J(Ce.selectionDefs.concat([Ie]))):(ot=[Ie],nt=H(Ie)),c(ge(ot,$e),Rt,Ce),Ke){var Wn,$n=Ae(at,!1),ar=$n.eventData?$n.eventData.points.slice():[];$n=Ae(at,!1,nt,Ht,Ce),nt=$n.selectionTesters,tt=$n.eventData,Wn=We?We.filtered:Ee(ot),E.throttle(xn,D.SELECTDELAY,function(){for(var Qn=(un=Oe(nt,Ht)).slice(),Gn=0;Gn<ar.length;Gn++){for(var dr=ar[Gn],Bt=!1,tn=0;tn<Qn.length;tn++)if(Qn[tn].curveNumber===dr.curveNumber&&Qn[tn].pointNumber===dr.pointNumber){Bt=!0;break}Bt||Qn.push(dr)}Qn.length&&(tt||(tt={}),tt.points=Qn),nn(tt,Wn),function(cn,gn){cn.emit("plotly_selecting",gn)}(at,tt)})}},Ce.clickFn=function(Kt,on){if(jt.remove(),at._fullLayout._activeShapeIndex>=0)at._fullLayout._deactivateShape(at);else if(!st){var hn=rt.clickmode;E.done(xn).then(function(){if(E.clear(xn),Kt===2){for(Rt.remove(),ze=0;ze<Ht.length;ze++)(et=Ht[ze])._module.selectPoints(et,!1);if(ve(at,Ht),re(Ce),Ue(at),Ht.length){var dn=Ht[0].xaxis,Mn=Ht[0].yaxis;if(dn&&Mn){for(var Cn=[],Tn=at._fullLayout.selections,Pn=0;Pn<Tn.length;Pn++){var Wn=Tn[Pn];Wn&&(Wn.xref===dn._id&&Wn.yref===Mn._id||Cn.push(Wn))}Cn.length<Tn.length&&(at._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",at,{selections:Cn}))}}}else hn.indexOf("select")>-1&&$(on,at,Ce.xaxes,Ce.yaxes,Ce.subplot,Ce,Rt),hn==="event"&&De(at,void 0);d.click(at,on)}).catch(h.error)}},Ce.doneFn=function(){jt.remove(),E.done(xn).then(function(){E.clear(xn),!xt&&Ie&&Ce.selectionDefs&&(Ie.subtract=zt,Ce.selectionDefs.push(Ie),Ce.mergedPolygons.length=0,[].push.apply(Ce.mergedPolygons,ot)),(xt||st)&&re(Ce,xt),Ce.doneFnCompleted&&Ce.doneFnCompleted(un),Ke&&De(at,tt)}).catch(h.error)}},clearOutline:x,clearSelectionsCache:re,selectOnClick:$}},89827:function(Q,z,t){var S=t(50215),k=t(41940),l=t(82196).line,T=t(79952).P,b=t(1426).extendFlat,d=t(44467).templatedArray,s=(t(24695),t(5386).R),e=t(37281);Q.exports=d("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:b({},S.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:b({},S.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:b({},l.color,{editType:"arraydraw"}),width:b({},l.width,{editType:"calc+arraydraw"}),dash:b({},T,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:s({},{keys:Object.keys(e)}),font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},5627:function(Q,z,t){var S=t(71828),k=t(89298),l=t(21459),T=t(30477);function b(i){return s(i.line.width,i.xsizemode,i.x0,i.x1,i.path,!1)}function d(i){return s(i.line.width,i.ysizemode,i.y0,i.y1,i.path,!0)}function s(i,r,n,a,o,u){var p=i/2,c=u;if(r==="pixel"){var x=o?T.extractPathCoords(o,u?l.paramIsY:l.paramIsX):[n,a],g=S.aggNums(Math.max,null,x),f=S.aggNums(Math.min,null,x),y=f<0?Math.abs(f)+p:p,v=g>0?g+p:p;return{ppad:p,ppadplus:c?y:v,ppadminus:c?v:y}}return{ppad:p}}function e(i,r,n,a,o){var u=i.type==="category"||i.type==="multicategory"?i.r2c:i.d2c;if(r!==void 0)return[u(r),u(n)];if(a){var p,c,x,g,f=1/0,y=-1/0,v=a.match(l.segmentRE);for(i.type==="date"&&(u=T.decodeDate(u)),p=0;p<v.length;p++)(c=o[v[p].charAt(0)].drawn)!==void 0&&(!(x=v[p].substr(1).match(l.paramRE))||x.length<c||((g=u(x[c]))<f&&(f=g),g>y&&(y=g)));return y>=f?[f,y]:void 0}}Q.exports=function(i){var r=i._fullLayout,n=S.filterVisible(r.shapes);if(n.length&&i._fullData.length)for(var a=0;a<n.length;a++){var o,u,p=n[a];p._extremes={};var c=k.getRefType(p.xref),x=k.getRefType(p.yref);if(p.xref!=="paper"&&c!=="domain"){var g=p.xsizemode==="pixel"?p.xanchor:p.x0,f=p.xsizemode==="pixel"?p.xanchor:p.x1;(u=e(o=k.getFromId(i,p.xref),g,f,p.path,l.paramIsX))&&(p._extremes[o._id]=k.findExtremes(o,u,b(p)))}if(p.yref!=="paper"&&x!=="domain"){var y=p.ysizemode==="pixel"?p.yanchor:p.y0,v=p.ysizemode==="pixel"?p.yanchor:p.y1;(u=e(o=k.getFromId(i,p.yref),y,v,p.path,l.paramIsY))&&(p._extremes[o._id]=k.findExtremes(o,u,d(p)))}}}},21459:function(Q){Q.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},84726:function(Q,z,t){var S=t(71828),k=t(89298),l=t(85501),T=t(89827),b=t(30477);function d(s,e,i){function r(N,F){return S.coerce(s,e,T,N,F)}if(r("visible")){var n=r("path"),a=r("type",n?"path":"rect"),o=a!=="path";o&&delete e.path,r("editable"),r("layer"),r("opacity"),r("fillcolor"),r("fillrule"),r("line.width")&&(r("line.color"),r("line.dash"));for(var u=r("xsizemode"),p=r("ysizemode"),c=["x","y"],x=0;x<2;x++){var g,f,y,v=c[x],m=v+"anchor",_=v==="x"?u:p,h={_fullLayout:i},A=k.coerceRef(s,e,h,v,void 0,"paper");if(k.getRefType(A)==="range"?((g=k.getFromId(h,A))._shapeIndices.push(e._index),y=b.rangeToShapePosition(g),f=b.shapePositionToRange(g)):f=y=S.identity,o){var w=v+"0",E=v+"1",L=s[w],C=s[E];s[w]=f(s[w],!0),s[E]=f(s[E],!0),_==="pixel"?(r(w,0),r(E,10)):(k.coercePosition(e,h,r,A,w,.25),k.coercePosition(e,h,r,A,E,.75)),e[w]=y(e[w]),e[E]=y(e[E]),s[w]=L,s[E]=C}if(_==="pixel"){var P=s[m];s[m]=f(s[m],!0),k.coercePosition(e,h,r,A,m,.25),e[m]=y(e[m]),s[m]=P}}o&&S.noneOrAll(s,e,["x0","x1","y0","y1"]);var D,G,I=a==="line";if(o&&(D=r("label.texttemplate")),D||(G=r("label.text")),G||D){r("label.textangle");var H=r("label.textposition",I?"middle":"middle center");r("label.xanchor"),r("label.yanchor",function(N,F){return N?"bottom":F.indexOf("top")!==-1?"top":F.indexOf("bottom")!==-1?"bottom":"middle"}(I,H)),r("label.padding"),S.coerceFont(r,"label.font",i.font)}}}Q.exports=function(s,e){l(s,e,{name:"shapes",handleItemDefaults:d})}},48100:function(Q,z,t){var S=t(71828),k=t(89298),l=t(63893),T=t(91424),b=t(60165).readPaths,d=t(30477),s=d.getPathString,e=t(37281),i=t(18783).FROM_TL;Q.exports=function(r,n,a,o){if(o.selectAll(".shape-label").remove(),a.label.text||a.label.texttemplate){var u;if(a.label.texttemplate){var p={};if(a.type!=="path"){var c=k.getFromId(r,a.xref),x=k.getFromId(r,a.yref);for(var g in e){var f=e[g](a,c,x);f!==void 0&&(p[g]=f)}}u=S.texttemplateStringForShapes(a.label.texttemplate,{},r._fullLayout._d3locale,p)}else u=a.label.text;var y,v,m,_,h={"data-index":n},A=a.label.font,w=o.append("g").attr(h).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(u);if(a.path){var E=s(r,a),L=b(E,r);y=1/0,m=1/0,v=-1/0,_=-1/0;for(var C=0;C<L.length;C++)for(var P=0;P<L[C].length;P++)for(var D=L[C][P],G=1;G<D.length;G+=2){var I=D[G],H=D[G+1];y=Math.min(y,I),v=Math.max(v,I),m=Math.min(m,H),_=Math.max(_,H)}}else{var N=k.getFromId(r,a.xref),F=k.getRefType(a.xref),V=k.getFromId(r,a.yref),q=k.getRefType(a.yref),te=d.getDataToPixel(r,N,!1,F),$=d.getDataToPixel(r,V,!0,q);y=te(a.x0),v=te(a.x1),m=$(a.y0),_=$(a.y1)}var W=a.label.textangle;W==="auto"&&(W=a.type==="line"?function(ae,oe,ce,pe){var ve,we;return we=Math.abs(ce-ae),ve=ce>=ae?oe-pe:pe-oe,-180/Math.PI*Math.atan2(ve,we)}(y,m,v,_):0),w.call(function(ae){return ae.call(T.font,A).attr({}),l.convertToTspans(ae,r),ae});var Z=function(ae,oe,ce,pe,ve,we,xe){var ge,Oe,Ae,Te,se=ve.label.textposition,le=ve.label.textangle,ne=ve.label.padding,me=ve.type,Ee=Math.PI/180*we,be=Math.sin(Ee),De=Math.cos(Ee),Ue=ve.label.xanchor,he=ve.label.yanchor;if(me==="line"){se==="start"?(ge=ae,Oe=oe):se==="end"?(ge=ce,Oe=pe):(ge=(ae+ce)/2,Oe=(oe+pe)/2),Ue==="auto"&&(Ue=se==="start"?le==="auto"?ce>ae?"left":ce<ae?"right":"center":ce>ae?"right":ce<ae?"left":"center":se==="end"?le==="auto"?ce>ae?"right":ce<ae?"left":"center":ce>ae?"left":ce<ae?"right":"center":"center");var ke={bottom:-1,middle:0,top:1};if(le==="auto"){var _e=ke[he];Ae=-ne*be*_e,Te=ne*De*_e}else Ae=ne*{left:1,center:0,right:-1}[Ue],Te=ne*ke[he];ge+=Ae,Oe+=Te}else Ae=ne+3,se.indexOf("right")!==-1?(ge=Math.max(ae,ce)-Ae,Ue==="auto"&&(Ue="right")):se.indexOf("left")!==-1?(ge=Math.min(ae,ce)+Ae,Ue==="auto"&&(Ue="left")):(ge=(ae+ce)/2,Ue==="auto"&&(Ue="center")),Oe=se.indexOf("top")!==-1?Math.min(oe,pe):se.indexOf("bottom")!==-1?Math.max(oe,pe):(oe+pe)/2,Te=ne,he==="bottom"?Oe-=Te:he==="top"&&(Oe+=Te);var Ce=i[he],Fe=ve.label.font.size,Re=xe.height;return{textx:ge+(Re*Ce-Fe)*be,texty:Oe+-(Re*Ce-Fe)*De,xanchor:Ue}}(y,m,v,_,a,W,T.bBox(w.node())),J=Z.textx,ee=Z.texty,re=Z.xanchor;w.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[re],y:ee,x:J,transform:"rotate("+W+","+J+","+ee+")"}).call(l.positionText,J,ee)}}},42359:function(Q,z,t){var S=t(71828).strTranslate,k=t(28569),l=t(64505),T=l.drawMode,b=l.selectMode,d=t(73972),s=t(7901),e=t(89995),i=e.i000,r=e.i090,n=e.i180,a=e.i270,o=t(51873).clearOutlineControllers,u=t(60165),p=u.pointsOnRectangle,c=u.pointsOnEllipse,x=u.writePaths,g=t(90551).newShapes,f=t(90551).createShapeObj,y=t(35855),v=t(48100);function m(_,h){var A,w,E,L=_[h][1],C=_[h][2],P=_.length;return w=_[A=(h+1)%P][1],E=_[A][2],w===L&&E===C&&(w=_[A=(h+2)%P][1],E=_[A][2]),[A,w,E]}Q.exports=function _(h,A,w,E){E||(E=0);var L=w.gd;function C(){_(h,A,w,E++),(c(h[0])||w.hasText)&&P({redrawing:!0})}function P(ve){var we={};w.isActiveShape!==void 0&&(w.isActiveShape=!1,we=g(A,w)),w.isActiveSelection!==void 0&&(w.isActiveSelection=!1,we=y(A,w),L._fullLayout._reselect=!0),Object.keys(we).length&&d.call((ve||{}).redrawing?"relayout":"_guiRelayout",L,we)}var D,G,I,H,N,F=L._fullLayout._zoomlayer,V=w.dragmode,q=T(V),te=b(V);if((q||te)&&(L._fullLayout._outlining=!0),o(L),A.attr("d",x(h)),E||!w.isActiveShape&&!w.isActiveSelection||(N=function(ve,we){for(var xe=0;xe<we.length;xe++){var ge=we[xe];ve[xe]=[];for(var Oe=0;Oe<ge.length;Oe++){ve[xe][Oe]=[];for(var Ae=0;Ae<ge[Oe].length;Ae++)ve[xe][Oe][Ae]=ge[Oe][Ae]}}return ve}([],h),function(ve){D=[];for(var we=0;we<h.length;we++){var xe=h[we],ge=p(xe),Oe=!ge&&c(xe);D[we]=[];for(var Ae=xe.length,Te=0;Te<Ae;Te++)if(xe[Te][0]!=="Z"&&(!Oe||Te===i||Te===r||Te===n||Te===a)){var se,le=ge&&w.isActiveSelection;le&&(se=m(xe,Te));var ne=xe[Te][1],me=xe[Te][2],Ee=ve.append(le?"rect":"circle").attr("data-i",we).attr("data-j",Te).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(le){var be=se[1]-ne,De=se[2]-me,Ue=De?5:Math.max(Math.min(25,Math.abs(be)-5),5),he=be?5:Math.max(Math.min(25,Math.abs(De)-5),5);Ee.classed(De?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Ue).attr("height",he).attr("x",ne-Ue/2).attr("y",me-he/2).attr("transform",S(be/2,De/2))}else Ee.classed("cursor-grab",!0).attr("r",5).attr("cx",ne).attr("cy",me);D[we][Te]={element:Ee.node(),gd:L,prepFn:Z,doneFn:ee,clickFn:re},k.init(D[we][Te])}}}(F.append("g").attr("class","outline-controllers")),function(){G=[],h.length&&(G[0]={element:A[0][0],gd:L,prepFn:oe,doneFn:ce,clickFn:pe},k.init(G[0]))}()),q&&w.hasText){var $=F.select(".label-temp"),W=f(A,w,w.dragmode);v(L,"label-temp",W,$)}function Z(ve){I=+ve.srcElement.getAttribute("data-i"),H=+ve.srcElement.getAttribute("data-j"),D[I][H].moveFn=J}function J(ve,we){if(h.length){var xe=N[I][H][1],ge=N[I][H][2],Oe=h[I],Ae=Oe.length;if(p(Oe)){var Te=ve,se=we;w.isActiveSelection&&(m(Oe,H)[1]===Oe[H][1]?se=0:Te=0);for(var le=0;le<Ae;le++)if(le!==H){var ne=Oe[le];ne[1]===Oe[H][1]&&(ne[1]=xe+Te),ne[2]===Oe[H][2]&&(ne[2]=ge+se)}if(Oe[H][1]=xe+Te,Oe[H][2]=ge+se,!p(Oe))for(var me=0;me<Ae;me++)for(var Ee=0;Ee<Oe[me].length;Ee++)Oe[me][Ee]=N[I][me][Ee]}else Oe[H][1]=xe+ve,Oe[H][2]=ge+we;C()}}function ee(){P()}function re(ve,we){if(ve===2){I=+we.srcElement.getAttribute("data-i"),H=+we.srcElement.getAttribute("data-j");var xe=h[I];p(xe)||c(xe)||function(){if(h.length&&h[I]&&h[I].length){for(var ge=[],Oe=0;Oe<h[I].length;Oe++)Oe!==H&&ge.push(h[I][Oe]);ge.length>1&&(ge.length!==2||ge[1][0]!=="Z")&&(H===0&&(ge[0][0]="M"),h[I]=ge,C(),P())}}()}}function ae(ve,we){(function(xe,ge){if(h.length)for(var Oe=0;Oe<h.length;Oe++)for(var Ae=0;Ae<h[Oe].length;Ae++)for(var Te=0;Te+2<h[Oe][Ae].length;Te+=2)h[Oe][Ae][Te+1]=N[Oe][Ae][Te+1]+xe,h[Oe][Ae][Te+2]=N[Oe][Ae][Te+2]+ge})(ve,we),C()}function oe(ve){(I=+ve.srcElement.getAttribute("data-i"))||(I=0),G[I].moveFn=ae}function ce(){P()}function pe(ve){ve===2&&function(we){if(b(we._fullLayout.dragmode)){o(we);var xe=we._fullLayout._activeSelectionIndex,ge=(we.layout||{}).selections||[];if(xe<ge.length){for(var Oe=[],Ae=0;Ae<ge.length;Ae++)Ae!==xe&&Oe.push(ge[Ae]);delete we._fullLayout._activeSelectionIndex;var Te=we._fullLayout.selections[xe];we._fullLayout._deselect={xref:Te.xref,yref:Te.yref},d.call("_guiRelayout",we,{selections:Oe})}}}(L)}}},34031:function(Q,z,t){var S=t(39898),k=t(73972),l=t(71828),T=t(89298),b=t(60165).readPaths,d=t(42359),s=t(48100),e=t(51873).clearOutlineControllers,i=t(7901),r=t(91424),n=t(44467).arrayEditor,a=t(28569),o=t(6964),u=t(21459),p=t(30477),c=p.getPathString;function x(h){var A=h._fullLayout;for(var w in A._shapeUpperLayer.selectAll("path").remove(),A._shapeLowerLayer.selectAll("path").remove(),A._shapeUpperLayer.selectAll("text").remove(),A._shapeLowerLayer.selectAll("text").remove(),A._plots){var E=A._plots[w].shapelayer;E&&(E.selectAll("path").remove(),E.selectAll("text").remove())}for(var L=0;L<A.shapes.length;L++)A.shapes[L].visible&&y(h,L)}function g(h){return!!h._fullLayout._outlining}function f(h){return!h._context.edits.shapePosition}function y(h,A){h._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+A+'"]').remove();var w=p.makeShapesOptionsAndPlotinfo(h,A),E=w.options,L=w.plotinfo;function C(P){var D=c(h,E),G={"data-index":A,"fill-rule":E.fillrule,d:D},I=E.opacity,H=E.fillcolor,N=E.line.width?E.line.color:"rgba(0,0,0,0)",F=E.line.width,V=E.line.dash;F||E.editable!==!0||(F=5,V="solid");var q=D[D.length-1]!=="Z",te=f(h)&&E.editable&&h._fullLayout._activeShapeIndex===A;te&&(H=q?"rgba(0,0,0,0)":h._fullLayout.activeshape.fillcolor,I=h._fullLayout.activeshape.opacity);var $,W=P.append("g").classed("shape-group",!0).attr({"data-index":A}),Z=W.append("path").attr(G).style("opacity",I).call(i.stroke,N).call(i.fill,H).call(r.dashLine,V,F);if(v(W,h,E),s(h,A,E,W),(te||h._context.edits.shapePosition)&&($=n(h.layout,"shapes",E)),te){Z.style({cursor:"move"});var J={element:Z.node(),plotinfo:L,gd:h,editHelpers:$,hasText:E.label.text||E.label.texttemplate,isActiveShape:!0},ee=b(D,h);d(ee,Z,J)}else h._context.edits.shapePosition?function(re,ae,oe,ce,pe,ve){var we,xe,ge,Oe,Ae,Te,se,le,ne,me,Ee,be,De,Ue,he,ke,_e=10,Ce=10,Fe=oe.xsizemode==="pixel",Re=oe.ysizemode==="pixel",He=oe.type==="line",Ge=oe.type==="path",$e=ve.modifyItem,st=S.select(ae.node().parentNode),Ke=T.getFromId(re,oe.xref),gt=T.getRefType(oe.xref),mt=T.getFromId(re,oe.yref),at=T.getRefType(oe.yref),rt=p.getDataToPixel(re,Ke,!1,gt),xt=p.getDataToPixel(re,mt,!0,at),Tt=p.getPixelToData(re,Ke,!1,gt),wt=p.getPixelToData(re,mt,!0,at),Ot=He?function(){var ot=10,Ie=Math.max(oe.line.width,ot),ze=pe.append("g").attr("data-index",ce).attr("drag-helper",!0);ze.append("path").attr("d",ae.attr("d")).style({cursor:"move","stroke-width":Ie,"stroke-opacity":"0"});var et={"fill-opacity":"0"},tt=Math.max(Ie/2,ot);return ze.append("circle").attr({"data-line-point":"start-point",cx:Fe?rt(oe.xanchor)+oe.x0:rt(oe.x0),cy:Re?xt(oe.yanchor)-oe.y0:xt(oe.y0),r:tt}).style(et).classed("cursor-grab",!0),ze.append("circle").attr({"data-line-point":"end-point",cx:Fe?rt(oe.xanchor)+oe.x1:rt(oe.x1),cy:Re?xt(oe.yanchor)-oe.y1:xt(oe.y1),r:tt}).style(et).classed("cursor-grab",!0),ze}():ae,Ct={element:Ot.node(),gd:re,prepFn:function(ot){g(re)||(Fe&&(Ae=rt(oe.xanchor)),Re&&(Te=xt(oe.yanchor)),oe.type==="path"?he=oe.path:(we=Fe?oe.x0:rt(oe.x0),xe=Re?oe.y0:xt(oe.y0),ge=Fe?oe.x1:rt(oe.x1),Oe=Re?oe.y1:xt(oe.y1)),we<ge?(ne=we,De="x0",me=ge,Ue="x1"):(ne=ge,De="x1",me=we,Ue="x0"),!Re&&xe<Oe||Re&&xe>Oe?(se=xe,Ee="y0",le=Oe,be="y1"):(se=Oe,Ee="y1",le=xe,be="y0"),Ye(ot),We(pe,oe),function(Ie,ze,et){var tt=ze.xref,dt=ze.yref,pt=T.getFromId(et,tt),vt=T.getFromId(et,dt),ct="";tt==="paper"||pt.autorange||(ct+=tt),dt==="paper"||vt.autorange||(ct+=dt),r.setClipUrl(Ie,ct?"clip"+et._fullLayout._uid+ct:null,et)}(ae,oe,re),Ct.moveFn=ke==="move"?Xe:Ve,Ct.altKey=ot.altKey)},doneFn:function(){g(re)||(o(ae),nt(pe),v(ae,re,oe),k.call("_guiRelayout",re,ve.getUpdateObj()))},clickFn:function(){g(re)||nt(pe)}};function Ye(ot){if(g(re))ke=null;else if(He)ke=ot.target.tagName==="path"?"move":ot.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Ie=Ct.element.getBoundingClientRect(),ze=Ie.right-Ie.left,et=Ie.bottom-Ie.top,tt=ot.clientX-Ie.left,dt=ot.clientY-Ie.top,pt=!Ge&&ze>_e&&et>Ce&&!ot.shiftKey?a.getCursor(tt/ze,1-dt/et):"move";o(ae,pt),ke=pt.split("-")[0]}}function Xe(ot,Ie){if(oe.type==="path"){var ze=function(dt){return dt},et=ze,tt=ze;Fe?$e("xanchor",oe.xanchor=Tt(Ae+ot)):(et=function(dt){return Tt(rt(dt)+ot)},Ke&&Ke.type==="date"&&(et=p.encodeDate(et))),Re?$e("yanchor",oe.yanchor=wt(Te+Ie)):(tt=function(dt){return wt(xt(dt)+Ie)},mt&&mt.type==="date"&&(tt=p.encodeDate(tt))),$e("path",oe.path=m(he,et,tt))}else Fe?$e("xanchor",oe.xanchor=Tt(Ae+ot)):($e("x0",oe.x0=Tt(we+ot)),$e("x1",oe.x1=Tt(ge+ot))),Re?$e("yanchor",oe.yanchor=wt(Te+Ie)):($e("y0",oe.y0=wt(xe+Ie)),$e("y1",oe.y1=wt(Oe+Ie)));ae.attr("d",c(re,oe)),We(pe,oe),s(re,ce,oe,st)}function Ve(ot,Ie){if(Ge){var ze=function(Wt){return Wt},et=ze,tt=ze;Fe?$e("xanchor",oe.xanchor=Tt(Ae+ot)):(et=function(Wt){return Tt(rt(Wt)+ot)},Ke&&Ke.type==="date"&&(et=p.encodeDate(et))),Re?$e("yanchor",oe.yanchor=wt(Te+Ie)):(tt=function(Wt){return wt(xt(Wt)+Ie)},mt&&mt.type==="date"&&(tt=p.encodeDate(tt))),$e("path",oe.path=m(he,et,tt))}else if(He){if(ke==="resize-over-start-point"){var dt=we+ot,pt=Re?xe-Ie:xe+Ie;$e("x0",oe.x0=Fe?dt:Tt(dt)),$e("y0",oe.y0=Re?pt:wt(pt))}else if(ke==="resize-over-end-point"){var vt=ge+ot,ct=Re?Oe-Ie:Oe+Ie;$e("x1",oe.x1=Fe?vt:Tt(vt)),$e("y1",oe.y1=Re?ct:wt(ct))}}else{var kt=function(Wt){return ke.indexOf(Wt)!==-1},ut=kt("n"),ft=kt("s"),bt=kt("w"),It=kt("e"),zt=ut?se+Ie:se,Rt=ft?le+Ie:le,Jt=bt?ne+ot:ne,qt=It?me+ot:me;Re&&(ut&&(zt=se-Ie),ft&&(Rt=le-Ie)),(!Re&&Rt-zt>Ce||Re&&zt-Rt>Ce)&&($e(Ee,oe[Ee]=Re?zt:wt(zt)),$e(be,oe[be]=Re?Rt:wt(Rt))),qt-Jt>_e&&($e(De,oe[De]=Fe?Jt:Tt(Jt)),$e(Ue,oe[Ue]=Fe?qt:Tt(qt)))}ae.attr("d",c(re,oe)),We(pe,oe),s(re,ce,oe,st)}function We(ot,Ie){(Fe||Re)&&function(){var ze=Ie.type!=="path",et=ot.selectAll(".visual-cue").data([0]);et.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var tt=rt(Fe?Ie.xanchor:l.midRange(ze?[Ie.x0,Ie.x1]:p.extractPathCoords(Ie.path,u.paramIsX))),dt=xt(Re?Ie.yanchor:l.midRange(ze?[Ie.y0,Ie.y1]:p.extractPathCoords(Ie.path,u.paramIsY)));if(tt=p.roundPositionForSharpStrokeRendering(tt,1),dt=p.roundPositionForSharpStrokeRendering(dt,1),Fe&&Re){var pt="M"+(tt-1-1)+","+(dt-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";et.attr("d",pt)}else if(Fe){var vt="M"+(tt-1-1)+","+(dt-9-1)+"v18 h2 v-18 Z";et.attr("d",vt)}else{var ct="M"+(tt-9-1)+","+(dt-1-1)+"h18 v2 h-18 Z";et.attr("d",ct)}}()}function nt(ot){ot.selectAll(".visual-cue").remove()}a.init(Ct),Ot.node().onmousemove=Ye}(h,Z,E,A,P,$):E.editable===!0&&Z.style("pointer-events",q||i.opacity(H)*I<=.5?"stroke":"all");Z.node().addEventListener("click",function(){return function(re,ae){if(f(re)){var oe=+ae.node().getAttribute("data-index");if(oe>=0){if(oe===re._fullLayout._activeShapeIndex)return void _(re);re._fullLayout._activeShapeIndex=oe,re._fullLayout._deactivateShape=_,x(re)}}}(h,Z)})}E._input&&E.visible!==!1&&(E.layer!=="below"?C(h._fullLayout._shapeUpperLayer):E.xref==="paper"||E.yref==="paper"?C(h._fullLayout._shapeLowerLayer):L._hadPlotinfo?C((L.mainplotinfo||L).shapelayer):C(h._fullLayout._shapeLowerLayer))}function v(h,A,w){var E=(w.xref+w.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");r.setClipUrl(h,E?"clip"+A._fullLayout._uid+E:null,A)}function m(h,A,w){return h.replace(u.segmentRE,function(E){var L=0,C=E.charAt(0),P=u.paramIsX[C],D=u.paramIsY[C],G=u.numParams[C];return C+E.substr(1).replace(u.paramRE,function(I){return L>=G||(P[L]?I=A(I):D[L]&&(I=w(I)),L++),I})})}function _(h){f(h)&&h._fullLayout._activeShapeIndex>=0&&(e(h),delete h._fullLayout._activeShapeIndex,x(h))}Q.exports={draw:x,drawOne:y,eraseActiveShape:function(h){if(f(h)){e(h);var A=h._fullLayout._activeShapeIndex,w=(h.layout||{}).shapes||[];if(A<w.length){for(var E=[],L=0;L<w.length;L++)L!==A&&E.push(w[L]);delete h._fullLayout._activeShapeIndex,k.call("_guiRelayout",h,{shapes:E})}}},drawLabel:s}},29241:function(Q,z,t){var S=t(41940),k=t(79952).P,l=t(1426).extendFlat,T=t(5386).R,b=t(37281);Q.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:l({},k,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},label:{text:{valType:"string",dflt:"",editType:"none"},texttemplate:T({newshape:!0,editType:"none"},{keys:Object.keys(b)}),font:S({editType:"none"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"none"},textangle:{valType:"angle",dflt:"auto",editType:"none"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"none"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"none"},padding:{valType:"number",dflt:3,min:0,editType:"none"},editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},89995:function(Q){Q.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},45547:function(Q,z,t){var S=t(7901),k=t(71828);Q.exports=function(l,T,b){if(b("newshape.drawdirection"),b("newshape.layer"),b("newshape.fillcolor"),b("newshape.fillrule"),b("newshape.opacity"),b("newshape.line.width")){var d=(l||{}).plot_bgcolor||"#FFF";b("newshape.line.color",S.contrast(d)),b("newshape.line.dash")}var s=l.dragmode==="drawline",e=b("newshape.label.text"),i=b("newshape.label.texttemplate");if(e||i){b("newshape.label.textangle");var r=b("newshape.label.textposition",s?"middle":"middle center");b("newshape.label.xanchor"),b("newshape.label.yanchor",function(n,a){return n?"bottom":a.indexOf("top")!==-1?"top":a.indexOf("bottom")!==-1?"bottom":"middle"}(s,r)),b("newshape.label.padding"),k.coerceFont(b,"newshape.label.font",T.font)}b("activeshape.fillcolor"),b("activeshape.opacity")}},60165:function(Q,z,t){var S=t(95616),k=t(89995),l=k.CIRCLE_SIDES,T=k.SQRT2,b=t(75549),d=b.p2r,s=b.r2p,e=[0,3,4,5,6,1,2],i=[0,3,4,1,2];function r(a,o){return Math.abs(a-o)<=1e-6}function n(a,o){var u=o[1]-a[1],p=o[2]-a[2];return Math.sqrt(u*u+p*p)}z.writePaths=function(a){var o=a.length;if(!o)return"M0,0Z";for(var u="",p=0;p<o;p++)for(var c=a[p].length,x=0;x<c;x++){var g=a[p][x][0];if(g==="Z")u+="Z";else for(var f=a[p][x].length,y=0;y<f;y++){var v=y;g==="Q"||g==="S"?v=i[y]:g==="C"&&(v=e[y]),u+=a[p][x][v],y>0&&y<f-1&&(u+=",")}}return u},z.readPaths=function(a,o,u,p){var c,x,g,f=S(a),y=[],v=-1,m=0,_=0,h=function(){x=m,g=_};h();for(var A=0;A<f.length;A++){var w,E,L,C,P=[],D=f[A][0],G=D;switch(D){case"M":y[++v]=[],m=+f[A][1],_=+f[A][2],P.push([G,m,_]),h();break;case"Q":case"S":w=+f[A][1],L=+f[A][2],m=+f[A][3],_=+f[A][4],P.push([G,m,_,w,L]);break;case"C":w=+f[A][1],L=+f[A][2],E=+f[A][3],C=+f[A][4],m=+f[A][5],_=+f[A][6],P.push([G,m,_,w,L,E,C]);break;case"T":case"L":m=+f[A][1],_=+f[A][2],P.push([G,m,_]);break;case"H":G="L",m=+f[A][1],P.push([G,m,_]);break;case"V":G="L",_=+f[A][1],P.push([G,m,_]);break;case"A":G="L";var I=+f[A][1],H=+f[A][2];+f[A][4]||(I=-I,H=-H);var N=m-I,F=_;for(c=1;c<=l/2;c++){var V=2*Math.PI*c/l;P.push([G,N+I*Math.cos(V),F+H*Math.sin(V)])}break;case"Z":m===x&&_===g||(m=x,_=g,P.push([G,m,_]))}for(var q=(u||{}).domain,te=o._fullLayout._size,$=u&&u.xsizemode==="pixel",W=u&&u.ysizemode==="pixel",Z=p===!1,J=0;J<P.length;J++){for(c=0;c+2<7;c+=2){var ee=P[J][c+1],re=P[J][c+2];ee!==void 0&&re!==void 0&&(m=ee,_=re,u&&(u.xaxis&&u.xaxis.p2r?(Z&&(ee-=u.xaxis._offset),ee=$?s(u.xaxis,u.xanchor)+ee:d(u.xaxis,ee)):(Z&&(ee-=te.l),q?ee=q.x[0]+ee/te.w:ee/=te.w),u.yaxis&&u.yaxis.p2r?(Z&&(re-=u.yaxis._offset),re=W?s(u.yaxis,u.yanchor)-re:d(u.yaxis,re)):(Z&&(re-=te.t),re=q?q.y[1]-re/te.h:1-re/te.h)),P[J][c+1]=ee,P[J][c+2]=re)}y[v].push(P[J].slice())}}return y},z.pointsOnRectangle=function(a){if(a.length!==5)return!1;for(var o=1;o<3;o++)if(!r(a[0][o]-a[1][o],a[3][o]-a[2][o])||!r(a[0][o]-a[3][o],a[1][o]-a[2][o]))return!1;return!(!r(a[0][1],a[1][1])&&!r(a[0][1],a[3][1])||!(n(a[0],a[1])*n(a[0],a[3])))},z.pointsOnEllipse=function(a){var o=a.length;if(o!==l+1)return!1;o=l;for(var u=0;u<o;u++){var p=(2*o-u)%o,c=(o/2+p)%o,x=(o/2+u)%o;if(!r(n(a[u],a[x]),n(a[p],a[c])))return!1}return!0},z.handleEllipse=function(a,o,u){if(!a)return[o,u];var p=z.ellipseOver({x0:o[0],y0:o[1],x1:u[0],y1:u[1]}),c=(p.x1+p.x0)/2,x=(p.y1+p.y0)/2,g=(p.x1-p.x0)/2,f=(p.y1-p.y0)/2;g||(g=f/=T),f||(f=g/=T);for(var y=[],v=0;v<l;v++){var m=2*v*Math.PI/l;y.push([c+g*Math.cos(m),x+f*Math.sin(m)])}return y},z.ellipseOver=function(a){var o=a.x0,u=a.y0,p=a.x1,c=a.y1,x=p-o,g=c-u,f=((o-=x)+p)/2,y=((u-=g)+c)/2;return{x0:f-(x*=T),y0:y-(g*=T),x1:f+x,y1:y+g}},z.fixDatesForPaths=function(a,o,u){var p=o.type==="date",c=u.type==="date";if(!p&&!c)return a;for(var x=0;x<a.length;x++)for(var g=0;g<a[x].length;g++)for(var f=0;f+2<a[x][g].length;f+=2)p&&(a[x][g][f+1]=a[x][g][f+1].replace(" ","_")),c&&(a[x][g][f+2]=a[x][g][f+2].replace(" ","_"));return a}},90551:function(Q,z,t){var S=t(64505),k=S.drawMode,l=S.openMode,T=t(89995),b=T.i000,d=T.i090,s=T.i180,e=T.i270,i=T.cos45,r=T.sin45,n=t(75549),a=n.p2r,o=n.r2p,u=t(51873).clearOutline,p=t(60165),c=p.readPaths,x=p.writePaths,g=p.ellipseOver,f=p.fixDatesForPaths;function y(v,m,_){var h,A=v[0][0],w=m.gd,E=A.getAttribute("d"),L=w._fullLayout.newshape,C=m.plotinfo,P=m.isActiveShape,D=C.xaxis,G=C.yaxis,I=!!C.domain||!C.xaxis,H=!!C.domain||!C.yaxis,N=l(_),F=c(E,w,C,P),V={editable:!0,label:L.label,xref:I?"paper":D._id,yref:H?"paper":G._id,layer:L.layer,opacity:L.opacity,line:{color:L.line.color,width:L.line.width,dash:L.line.dash}};if(N||(V.fillcolor=L.fillcolor,V.fillrule=L.fillrule),F.length===1&&(h=F[0]),h&&h.length===5&&_==="drawrect")V.type="rect",V.x0=h[0][1],V.y0=h[0][2],V.x1=h[2][1],V.y1=h[2][2];else if(h&&_==="drawline")V.type="line",V.x0=h[0][1],V.y0=h[0][2],V.x1=h[1][1],V.y1=h[1][2];else if(h&&_==="drawcircle"){V.type="circle";var q=h[b][1],te=h[d][1],$=h[s][1],W=h[e][1],Z=h[b][2],J=h[d][2],ee=h[s][2],re=h[e][2],ae=C.xaxis&&(C.xaxis.type==="date"||C.xaxis.type==="log"),oe=C.yaxis&&(C.yaxis.type==="date"||C.yaxis.type==="log");ae&&(q=o(C.xaxis,q),te=o(C.xaxis,te),$=o(C.xaxis,$),W=o(C.xaxis,W)),oe&&(Z=o(C.yaxis,Z),J=o(C.yaxis,J),ee=o(C.yaxis,ee),re=o(C.yaxis,re));var ce=(te+W)/2,pe=(Z+ee)/2,ve=g({x0:ce,y0:pe,x1:ce+(W-te+$-q)/2*i,y1:pe+(re-J+ee-Z)/2*r});ae&&(ve.x0=a(C.xaxis,ve.x0),ve.x1=a(C.xaxis,ve.x1)),oe&&(ve.y0=a(C.yaxis,ve.y0),ve.y1=a(C.yaxis,ve.y1)),V.x0=ve.x0,V.y0=ve.y0,V.x1=ve.x1,V.y1=ve.y1}else V.type="path",D&&G&&f(F,D,G),V.path=x(F),h=null;return V}Q.exports={newShapes:function(v,m){if(v.length&&v[0][0]){var _=m.gd,h=m.isActiveShape,A=m.dragmode,w=(_.layout||{}).shapes||[];if(!k(A)&&h!==void 0){var E=_._fullLayout._activeShapeIndex;if(E<w.length)switch(_._fullLayout.shapes[E].type){case"rect":A="drawrect";break;case"circle":A="drawcircle";break;case"line":A="drawline";break;case"path":var L=w[E].path||"";A=L[L.length-1]==="Z"?"drawclosedpath":"drawopenpath"}}var C=y(v,m,A);u(_);for(var P=m.editHelpers,D=(P||{}).modifyItem,G=[],I=0;I<w.length;I++){var H=_._fullLayout.shapes[I];if(G[I]=H._input,h!==void 0&&I===_._fullLayout._activeShapeIndex){var N=C;switch(H.type){case"line":case"rect":case"circle":D("x0",N.x0),D("x1",N.x1),D("y0",N.y0),D("y1",N.y1);break;case"path":D("path",N.path)}}}return h===void 0?(G.push(C),G):P?P.getUpdateObj():{}}},createShapeObj:y}},51873:function(Q){Q.exports={clearOutlineControllers:function(z){var t=z._fullLayout._zoomlayer;t&&t.selectAll(".outline-controllers").remove()},clearOutline:function(z){var t=z._fullLayout._zoomlayer;t&&t.selectAll(".select-outline").remove(),z._fullLayout._outlining=!1}}},30477:function(Q,z,t){var S=t(21459),k=t(71828),l=t(89298);z.rangeToShapePosition=function(T){return T.type==="log"?T.r2d:function(b){return b}},z.shapePositionToRange=function(T){return T.type==="log"?T.d2r:function(b){return b}},z.decodeDate=function(T){return function(b){return b.replace&&(b=b.replace("_"," ")),T(b)}},z.encodeDate=function(T){return function(b){return T(b).replace(" ","_")}},z.extractPathCoords=function(T,b,d){var s=[];return T.match(S.segmentRE).forEach(function(e){var i=b[e.charAt(0)].drawn;if(i!==void 0){var r=e.substr(1).match(S.paramRE);if(r&&!(r.length<i)){var n=r[i],a=d?n:k.cleanNumber(n);s.push(a)}}}),s},z.getDataToPixel=function(T,b,d,s){var e,i=T._fullLayout._size;if(b)if(s==="domain")e=function(n){return b._length*(d?1-n:n)+b._offset};else{var r=z.shapePositionToRange(b);e=function(n){return b._offset+b.r2p(r(n,!0))},b.type==="date"&&(e=z.decodeDate(e))}else e=d?function(n){return i.t+i.h*(1-n)}:function(n){return i.l+i.w*n};return e},z.getPixelToData=function(T,b,d,s){var e,i=T._fullLayout._size;if(b)if(s==="domain")e=function(n){var a=(n-b._offset)/b._length;return d?1-a:a};else{var r=z.rangeToShapePosition(b);e=function(n){return r(b.p2r(n-b._offset))}}else e=d?function(n){return 1-(n-i.t)/i.h}:function(n){return(n-i.l)/i.w};return e},z.roundPositionForSharpStrokeRendering=function(T,b){var d=Math.round(b%2)===1,s=Math.round(T);return d?s+.5:s},z.makeShapesOptionsAndPlotinfo=function(T,b){var d=T._fullLayout.shapes[b]||{},s=T._fullLayout._plots[d.xref+d.yref];return s?s._hadPlotinfo=!0:(s={},d.xref&&d.xref!=="paper"&&(s.xaxis=T._fullLayout[d.xref+"axis"]),d.yref&&d.yref!=="paper"&&(s.yaxis=T._fullLayout[d.yref+"axis"])),s.xsizemode=d.xsizemode,s.ysizemode=d.ysizemode,s.xanchor=d.xanchor,s.yanchor=d.yanchor,{options:d,plotinfo:s}},z.makeSelectionsOptionsAndPlotinfo=function(T,b){var d=T._fullLayout.selections[b]||{},s=T._fullLayout._plots[d.xref+d.yref];return s?s._hadPlotinfo=!0:(s={},d.xref&&(s.xaxis=T._fullLayout[d.xref+"axis"]),d.yref&&(s.yaxis=T._fullLayout[d.yref+"axis"])),{options:d,plotinfo:s}},z.getPathString=function(T,b){var d,s,e,i,r,n,a,o,u=b.type,p=l.getRefType(b.xref),c=l.getRefType(b.yref),x=l.getFromId(T,b.xref),g=l.getFromId(T,b.yref),f=T._fullLayout._size;if(x?p==="domain"?s=function(L){return x._offset+x._length*L}:(d=z.shapePositionToRange(x),s=function(L){return x._offset+x.r2p(d(L,!0))}):s=function(L){return f.l+f.w*L},g?c==="domain"?i=function(L){return g._offset+g._length*(1-L)}:(e=z.shapePositionToRange(g),i=function(L){return g._offset+g.r2p(e(L,!0))}):i=function(L){return f.t+f.h*(1-L)},u==="path")return x&&x.type==="date"&&(s=z.decodeDate(s)),g&&g.type==="date"&&(i=z.decodeDate(i)),function(L,C,P){var D=L.path,G=L.xsizemode,I=L.ysizemode,H=L.xanchor,N=L.yanchor;return D.replace(S.segmentRE,function(F){var V=0,q=F.charAt(0),te=S.paramIsX[q],$=S.paramIsY[q],W=S.numParams[q],Z=F.substr(1).replace(S.paramRE,function(J){return te[V]?J=G==="pixel"?C(H)+Number(J):C(J):$[V]&&(J=I==="pixel"?P(N)-Number(J):P(J)),++V>W&&(J="X"),J});return V>W&&(Z=Z.replace(/[\s,]*X.*/,""),k.log("Ignoring extra params in segment "+F)),q+Z})}(b,s,i);if(b.xsizemode==="pixel"){var y=s(b.xanchor);r=y+b.x0,n=y+b.x1}else r=s(b.x0),n=s(b.x1);if(b.ysizemode==="pixel"){var v=i(b.yanchor);a=v-b.y0,o=v-b.y1}else a=i(b.y0),o=i(b.y1);if(u==="line")return"M"+r+","+a+"L"+n+","+o;if(u==="rect")return"M"+r+","+a+"H"+n+"V"+o+"H"+r+"Z";var m=(r+n)/2,_=(a+o)/2,h=Math.abs(m-r),A=Math.abs(_-a),w="A"+h+","+A,E=m+h+","+_;return"M"+E+w+" 0 1,1 "+m+","+(_-A)+w+" 0 0,1 "+E+"Z"}},89853:function(Q,z,t){var S=t(34031);Q.exports={moduleType:"component",name:"shapes",layoutAttributes:t(89827),supplyLayoutDefaults:t(84726),supplyDrawNewShapeDefaults:t(45547),includeBasePlot:t(76325)("shapes"),calcAutorange:t(5627),draw:S.draw,drawOne:S.drawOne}},37281:function(Q){function z(l,T){return T?T.d2l(l):l}function t(l,T){return T?T.l2d(l):l}function S(l,T){return z(l.x1,T)-z(l.x0,T)}function k(l,T,b){return z(l.y1,b)-z(l.y0,b)}Q.exports={x0:function(l){return l.x0},x1:function(l){return l.x1},y0:function(l){return l.y0},y1:function(l){return l.y1},slope:function(l,T,b){return l.type!=="line"?void 0:k(l,0,b)/S(l,T)},dx:S,dy:k,width:function(l,T){return Math.abs(S(l,T))},height:function(l,T,b){return Math.abs(k(l,0,b))},length:function(l,T,b){return l.type!=="line"?void 0:Math.sqrt(Math.pow(S(l,T),2)+Math.pow(k(l,0,b),2))},xcenter:function(l,T){return t((z(l.x1,T)+z(l.x0,T))/2,T)},ycenter:function(l,T,b){return t((z(l.y1,b)+z(l.y0,b))/2,b)}}},75067:function(Q,z,t){var S=t(41940),k=t(35025),l=t(1426).extendDeepAll,T=t(30962).overrideAll,b=t(85594),d=t(44467).templatedArray,s=t(98292),e=d("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});Q.exports=T(d("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:e,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:l(k({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:b.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:S({})},font:S({}),activebgcolor:{valType:"color",dflt:s.gripBgActiveColor},bgcolor:{valType:"color",dflt:s.railBgColor},bordercolor:{valType:"color",dflt:s.railBorderColor},borderwidth:{valType:"number",min:0,dflt:s.railBorderWidth},ticklen:{valType:"number",min:0,dflt:s.tickLength},tickcolor:{valType:"color",dflt:s.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:s.minorTickLength}}),"arraydraw","from-root")},98292:function(Q){Q.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},12343:function(Q,z,t){var S=t(71828),k=t(85501),l=t(75067),T=t(98292).name,b=l.steps;function d(e,i,r){function n(c,x){return S.coerce(e,i,l,c,x)}for(var a=k(e,i,{name:"steps",handleItemDefaults:s}),o=0,u=0;u<a.length;u++)a[u].visible&&o++;if(o<2?i.visible=!1:n("visible")){i._stepCount=o;var p=i._visibleSteps=S.filterVisible(a);(a[n("active")]||{}).visible||(i.active=p[0]._index),n("x"),n("y"),S.noneOrAll(e,i,["x","y"]),n("xanchor"),n("yanchor"),n("len"),n("lenmode"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),S.coerceFont(n,"font",r.font),n("currentvalue.visible")&&(n("currentvalue.xanchor"),n("currentvalue.prefix"),n("currentvalue.suffix"),n("currentvalue.offset"),S.coerceFont(n,"currentvalue.font",i.font)),n("transition.duration"),n("transition.easing"),n("bgcolor"),n("activebgcolor"),n("bordercolor"),n("borderwidth"),n("ticklen"),n("tickwidth"),n("tickcolor"),n("minorticklen")}}function s(e,i){function r(a,o){return S.coerce(e,i,b,a,o)}if(e.method==="skip"||Array.isArray(e.args)?r("visible"):i.visible=!1){r("method"),r("args");var n=r("label","step-"+i._index);r("value",n),r("execute")}}Q.exports=function(e,i){k(e,i,{name:T,handleItemDefaults:d})}},44504:function(Q,z,t){var S=t(39898),k=t(74875),l=t(7901),T=t(91424),b=t(71828),d=b.strTranslate,s=t(63893),e=t(44467).arrayEditor,i=t(98292),r=t(18783),n=r.LINE_SPACING,a=r.FROM_TL,o=r.FROM_BR;function u(P){return i.autoMarginIdRoot+P._index}function p(P){return P._index}function c(P,D){var G=T.tester.selectAll("g."+i.labelGroupClass).data(D._visibleSteps);G.enter().append("g").classed(i.labelGroupClass,!0);var I=0,H=0;G.each(function(J){var ee=f(S.select(this),{step:J},D).node();if(ee){var re=T.bBox(ee);H=Math.max(H,re.height),I=Math.max(I,re.width)}}),G.remove();var N=D._dims={};N.inputAreaWidth=Math.max(i.railWidth,i.gripHeight);var F=P._fullLayout._size;N.lx=F.l+F.w*D.x,N.ly=F.t+F.h*(1-D.y),D.lenmode==="fraction"?N.outerLength=Math.round(F.w*D.len):N.outerLength=D.len,N.inputAreaStart=0,N.inputAreaLength=Math.round(N.outerLength-D.pad.l-D.pad.r);var V=(N.inputAreaLength-2*i.stepInset)/(D._stepCount-1),q=I+i.labelPadding;if(N.labelStride=Math.max(1,Math.ceil(q/V)),N.labelHeight=H,N.currentValueMaxWidth=0,N.currentValueHeight=0,N.currentValueTotalHeight=0,N.currentValueMaxLines=1,D.currentvalue.visible){var te=T.tester.append("g");G.each(function(J){var ee=x(te,D,J.label),re=ee.node()&&T.bBox(ee.node())||{width:0,height:0},ae=s.lineCount(ee);N.currentValueMaxWidth=Math.max(N.currentValueMaxWidth,Math.ceil(re.width)),N.currentValueHeight=Math.max(N.currentValueHeight,Math.ceil(re.height)),N.currentValueMaxLines=Math.max(N.currentValueMaxLines,ae)}),N.currentValueTotalHeight=N.currentValueHeight+D.currentvalue.offset,te.remove()}N.height=N.currentValueTotalHeight+i.tickOffset+D.ticklen+i.labelOffset+N.labelHeight+D.pad.t+D.pad.b;var $="left";b.isRightAnchor(D)&&(N.lx-=N.outerLength,$="right"),b.isCenterAnchor(D)&&(N.lx-=N.outerLength/2,$="center");var W="top";b.isBottomAnchor(D)&&(N.ly-=N.height,W="bottom"),b.isMiddleAnchor(D)&&(N.ly-=N.height/2,W="middle"),N.outerLength=Math.ceil(N.outerLength),N.height=Math.ceil(N.height),N.lx=Math.round(N.lx),N.ly=Math.round(N.ly);var Z={y:D.y,b:N.height*o[W],t:N.height*a[W]};D.lenmode==="fraction"?(Z.l=0,Z.xl=D.x-D.len*a[$],Z.r=0,Z.xr=D.x+D.len*o[$]):(Z.x=D.x,Z.l=N.outerLength*a[$],Z.r=N.outerLength*o[$]),k.autoMargin(P,u(D),Z)}function x(P,D,G){if(D.currentvalue.visible){var I,H,N=D._dims;switch(D.currentvalue.xanchor){case"right":I=N.inputAreaLength-i.currentValueInset-N.currentValueMaxWidth,H="left";break;case"center":I=.5*N.inputAreaLength,H="middle";break;default:I=i.currentValueInset,H="left"}var F=b.ensureSingle(P,"text",i.labelClass,function(Z){Z.attr({"text-anchor":H,"data-notex":1})}),V=D.currentvalue.prefix?D.currentvalue.prefix:"";if(typeof G=="string")V+=G;else{var q=D.steps[D.active].label,te=D._gd._fullLayout._meta;te&&(q=b.templateString(q,te)),V+=q}D.currentvalue.suffix&&(V+=D.currentvalue.suffix),F.call(T.font,D.currentvalue.font).text(V).call(s.convertToTspans,D._gd);var $=s.lineCount(F),W=(N.currentValueMaxLines+1-$)*D.currentvalue.font.size*n;return s.positionText(F,I,W),F}}function g(P,D,G){b.ensureSingle(P,"rect",i.gripRectClass,function(I){I.call(_,D,P,G).style("pointer-events","all")}).attr({width:i.gripWidth,height:i.gripHeight,rx:i.gripRadius,ry:i.gripRadius}).call(l.stroke,G.bordercolor).call(l.fill,G.bgcolor).style("stroke-width",G.borderwidth+"px")}function f(P,D,G){var I=b.ensureSingle(P,"text",i.labelClass,function(F){F.attr({"text-anchor":"middle","data-notex":1})}),H=D.step.label,N=G._gd._fullLayout._meta;return N&&(H=b.templateString(H,N)),I.call(T.font,G.font).text(H).call(s.convertToTspans,G._gd),I}function y(P,D){var G=b.ensureSingle(P,"g",i.labelsClass),I=D._dims,H=G.selectAll("g."+i.labelGroupClass).data(I.labelSteps);H.enter().append("g").classed(i.labelGroupClass,!0),H.exit().remove(),H.each(function(N){var F=S.select(this);F.call(f,N,D),T.setTranslate(F,w(D,N.fraction),i.tickOffset+D.ticklen+D.font.size*n+i.labelOffset+I.currentValueTotalHeight)})}function v(P,D,G,I,H){var N=Math.round(I*(G._stepCount-1)),F=G._visibleSteps[N]._index;F!==G.active&&m(P,D,G,F,!0,H)}function m(P,D,G,I,H,N){var F=G.active;G.active=I,e(P.layout,i.name,G).applyUpdate("active",I);var V=G.steps[G.active];D.call(A,G,N),D.call(x,G),P.emit("plotly_sliderchange",{slider:G,step:G.steps[G.active],interaction:H,previousActive:F}),V&&V.method&&H&&(D._nextMethod?(D._nextMethod.step=V,D._nextMethod.doCallback=H,D._nextMethod.doTransition=N):(D._nextMethod={step:V,doCallback:H,doTransition:N},D._nextMethodRaf=window.requestAnimationFrame(function(){var q=D._nextMethod.step;q.method&&(q.execute&&k.executeAPICommand(P,q.method,q.args),D._nextMethod=null,D._nextMethodRaf=null)})))}function _(P,D,G){if(!D._context.staticPlot){var I=G.node(),H=S.select(D);P.on("mousedown",F),P.on("touchstart",F)}function N(){return G.data()[0]}function F(){var V=N();D.emit("plotly_sliderstart",{slider:V});var q=G.select("."+i.gripRectClass);S.event.stopPropagation(),S.event.preventDefault(),q.call(l.fill,V.activebgcolor);var te=E(V,S.mouse(I)[0]);function $(){var Z=N(),J=E(Z,S.mouse(I)[0]);v(D,G,Z,J,!1)}function W(){var Z=N();Z._dragging=!1,q.call(l.fill,Z.bgcolor),H.on("mouseup",null),H.on("mousemove",null),H.on("touchend",null),H.on("touchmove",null),D.emit("plotly_sliderend",{slider:Z,step:Z.steps[Z.active]})}v(D,G,V,te,!0),V._dragging=!0,H.on("mousemove",$),H.on("touchmove",$),H.on("mouseup",W),H.on("touchend",W)}}function h(P,D){var G=P.selectAll("rect."+i.tickRectClass).data(D._visibleSteps),I=D._dims;G.enter().append("rect").classed(i.tickRectClass,!0),G.exit().remove(),G.attr({width:D.tickwidth+"px","shape-rendering":"crispEdges"}),G.each(function(H,N){var F=N%I.labelStride==0,V=S.select(this);V.attr({height:F?D.ticklen:D.minorticklen}).call(l.fill,D.tickcolor),T.setTranslate(V,w(D,N/(D._stepCount-1))-.5*D.tickwidth,(F?i.tickOffset:i.minorTickOffset)+I.currentValueTotalHeight)})}function A(P,D,G){for(var I=P.select("rect."+i.gripRectClass),H=0,N=0;N<D._stepCount;N++)if(D._visibleSteps[N]._index===D.active){H=N;break}var F=w(D,H/(D._stepCount-1));if(!D._invokingCommand){var V=I;G&&D.transition.duration>0&&(V=V.transition().duration(D.transition.duration).ease(D.transition.easing)),V.attr("transform",d(F-.5*i.gripWidth,D._dims.currentValueTotalHeight))}}function w(P,D){var G=P._dims;return G.inputAreaStart+i.stepInset+(G.inputAreaLength-2*i.stepInset)*Math.min(1,Math.max(0,D))}function E(P,D){var G=P._dims;return Math.min(1,Math.max(0,(D-i.stepInset-G.inputAreaStart)/(G.inputAreaLength-2*i.stepInset-2*G.inputAreaStart)))}function L(P,D,G){var I=G._dims,H=b.ensureSingle(P,"rect",i.railTouchRectClass,function(N){N.call(_,D,P,G).style("pointer-events","all")});H.attr({width:I.inputAreaLength,height:Math.max(I.inputAreaWidth,i.tickOffset+G.ticklen+I.labelHeight)}).call(l.fill,G.bgcolor).attr("opacity",0),T.setTranslate(H,0,I.currentValueTotalHeight)}function C(P,D){var G=D._dims,I=G.inputAreaLength-2*i.railInset,H=b.ensureSingle(P,"rect",i.railRectClass);H.attr({width:I,height:i.railWidth,rx:i.railRadius,ry:i.railRadius,"shape-rendering":"crispEdges"}).call(l.stroke,D.bordercolor).call(l.fill,D.bgcolor).style("stroke-width",D.borderwidth+"px"),T.setTranslate(H,i.railInset,.5*(G.inputAreaWidth-i.railWidth)+G.currentValueTotalHeight)}Q.exports=function(P){var D=P._context.staticPlot,G=P._fullLayout,I=function(te,$){for(var W=te[i.name],Z=[],J=0;J<W.length;J++){var ee=W[J];ee.visible&&(ee._gd=$,Z.push(ee))}return Z}(G,P),H=G._infolayer.selectAll("g."+i.containerClassName).data(I.length>0?[0]:[]);function N(te){te._commandObserver&&(te._commandObserver.remove(),delete te._commandObserver),k.autoMargin(P,u(te))}if(H.enter().append("g").classed(i.containerClassName,!0).style("cursor",D?null:"ew-resize"),H.exit().each(function(){S.select(this).selectAll("g."+i.groupClassName).each(N)}).remove(),I.length!==0){var F=H.selectAll("g."+i.groupClassName).data(I,p);F.enter().append("g").classed(i.groupClassName,!0),F.exit().each(N).remove();for(var V=0;V<I.length;V++){var q=I[V];c(P,q)}F.each(function(te){var $=S.select(this);(function(W){var Z=W._dims;Z.labelSteps=[];for(var J=W._stepCount,ee=0;ee<J;ee+=Z.labelStride)Z.labelSteps.push({fraction:ee/(J-1),step:W._visibleSteps[ee]})})(te),k.manageCommandObserver(P,te,te._visibleSteps,function(W){var Z=$.data()[0];Z.active!==W.index&&(Z._dragging||m(P,$,Z,W.index,!1,!0))}),function(W,Z,J){(J.steps[J.active]||{}).visible||(J.active=J._visibleSteps[0]._index),Z.call(x,J).call(C,J).call(y,J).call(h,J).call(L,W,J).call(g,W,J);var ee=J._dims;T.setTranslate(Z,ee.lx+J.pad.l,ee.ly+J.pad.t),Z.call(A,J,!1),Z.call(x,J)}(P,S.select(this),te)})}}},23243:function(Q,z,t){var S=t(98292);Q.exports={moduleType:"component",name:S.name,layoutAttributes:t(75067),supplyLayoutDefaults:t(12343),draw:t(44504)}},92998:function(Q,z,t){var S=t(39898),k=t(92770),l=t(74875),T=t(73972),b=t(71828),d=b.strTranslate,s=t(91424),e=t(7901),i=t(63893),r=t(37822),n=t(18783).OPPOSITE_SIDE,a=/ [XY][0-9]* /;Q.exports={draw:function(o,u,p){var c,x=p.propContainer,g=p.propName,f=p.placeholder,y=p.traceIndex,v=p.avoid||{},m=p.attributes,_=p.transform,h=p.containerGroup,A=o._fullLayout,w=1,E=!1,L=x.title,C=(L&&L.text?L.text:"").trim(),P=L&&L.font?L.font:{},D=P.family,G=P.size,I=P.color;g==="title.text"?c="titleText":g.indexOf("axis")!==-1?c="axisTitleText":g.indexOf(!0)&&(c="colorbarTitleText");var H=o._context.edits[c];C===""?w=0:C.replace(a," % ")===f.replace(a," % ")&&(w=.2,E=!0,H||(C="")),p._meta?C=b.templateString(C,p._meta):A._meta&&(C=b.templateString(C,A._meta));var N,F=C||H;h||(h=b.ensureSingle(A._infolayer,"g","g-"+u),N=A._hColorbarMoveTitle);var V=h.selectAll("text").data(F?[0]:[]);if(V.enter().append("text"),V.text(C).attr("class",u),V.exit().remove(),!F)return h;function q(W){b.syncOrAsync([te,$],W)}function te(W){var Z;return!_&&N&&(_={}),_?(Z="",_.rotate&&(Z+="rotate("+[_.rotate,m.x,m.y]+")"),(_.offset||N)&&(Z+=d(0,(_.offset||0)-(N||0)))):Z=null,W.attr("transform",Z),W.style({"font-family":D,"font-size":S.round(G,2)+"px",fill:e.rgb(I),opacity:w*e.opacity(I),"font-weight":l.fontWeight}).attr(m).call(i.convertToTspans,o),l.previousPromises(o)}function $(W){var Z=S.select(W.node().parentNode);if(v&&v.selection&&v.side&&C){Z.attr("transform",null);var J=n[v.side],ee=v.side==="left"||v.side==="top"?-1:1,re=k(v.pad)?v.pad:2,ae=s.bBox(Z.node()),oe={t:0,b:0,l:0,r:0},ce=o._fullLayout._reservedMargin;for(var pe in ce)for(var ve in ce[pe]){var we=ce[pe][ve];oe[ve]=Math.max(oe[ve],we)}var xe={left:oe.l,top:oe.t,right:A.width-oe.r,bottom:A.height-oe.b},ge=v.maxShift||ee*(xe[v.side]-ae[v.side]),Oe=0;if(ge<0)Oe=ge;else{var Ae=v.offsetLeft||0,Te=v.offsetTop||0;ae.left-=Ae,ae.right-=Ae,ae.top-=Te,ae.bottom-=Te,v.selection.each(function(){var le=s.bBox(this);b.bBoxIntersect(ae,le,re)&&(Oe=Math.max(Oe,ee*(le[v.side]-ae[J])+re))}),Oe=Math.min(ge,Oe),x._titleScoot=Math.abs(Oe)}if(Oe>0||ge<0){var se={left:[-Oe,0],right:[Oe,0],top:[0,-Oe],bottom:[0,Oe]}[v.side];Z.attr("transform",d(se[0],se[1]))}}}return V.call(q),H&&(C?V.on(".opacity",null):(w=0,E=!0,V.text(f).on("mouseover.opacity",function(){S.select(this).transition().duration(r.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){S.select(this).transition().duration(r.HIDE_PLACEHOLDER).style("opacity",0)})),V.call(i.makeEditable,{gd:o}).on("edit",function(W){y!==void 0?T.call("_guiRestyle",o,g,W,y):T.call("_guiRelayout",o,g,W)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(q)}).on("input",function(W){this.text(W||" ").call(i.positionText,m.x,m.y)})),V.classed("js-placeholder",E),h}}},7163:function(Q,z,t){var S=t(41940),k=t(22399),l=t(1426).extendFlat,T=t(30962).overrideAll,b=t(35025),d=t(44467).templatedArray,s=d("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});Q.exports=T(d("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:s,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:l(b({editType:"arraydraw"}),{}),font:S({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:k.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},75909:function(Q){Q.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},64897:function(Q,z,t){var S=t(71828),k=t(85501),l=t(7163),T=t(75909).name,b=l.buttons;function d(e,i,r){function n(a,o){return S.coerce(e,i,l,a,o)}n("visible",k(e,i,{name:"buttons",handleItemDefaults:s}).length>0)&&(n("active"),n("direction"),n("type"),n("showactive"),n("x"),n("y"),S.noneOrAll(e,i,["x","y"]),n("xanchor"),n("yanchor"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),S.coerceFont(n,"font",r.font),n("bgcolor",r.paper_bgcolor),n("bordercolor"),n("borderwidth"))}function s(e,i){function r(n,a){return S.coerce(e,i,b,n,a)}r("visible",e.method==="skip"||Array.isArray(e.args))&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}Q.exports=function(e,i){k(e,i,{name:T,handleItemDefaults:d})}},13689:function(Q,z,t){var S=t(39898),k=t(74875),l=t(7901),T=t(91424),b=t(71828),d=t(63893),s=t(44467).arrayEditor,e=t(18783).LINE_SPACING,i=t(75909),r=t(25849);function n(w){return w._index}function a(w,E){return+w.attr(i.menuIndexAttrName)===E._index}function o(w,E,L,C,P,D,G,I){E.active=G,s(w.layout,i.name,E).applyUpdate("active",G),E.type==="buttons"?p(w,C,null,null,E):E.type==="dropdown"&&(P.attr(i.menuIndexAttrName,"-1"),u(w,C,P,D,E),I||p(w,C,P,D,E))}function u(w,E,L,C,P){var D=b.ensureSingle(E,"g",i.headerClassName,function(V){V.style("pointer-events","all")}),G=P._dims,I=P.active,H=P.buttons[I]||i.blankHeaderOpts,N={y:P.pad.t,yPad:0,x:P.pad.l,xPad:0,index:0},F={width:G.headerWidth,height:G.headerHeight};D.call(c,P,H,w).call(h,P,N,F),b.ensureSingle(E,"text",i.headerArrowClassName,function(V){V.attr("text-anchor","end").call(T.font,P.font).text(i.arrowSymbol[P.direction])}).attr({x:G.headerWidth-i.arrowOffsetX+P.pad.l,y:G.headerHeight/2+i.textOffsetY+P.pad.t}),D.on("click",function(){L.call(A,String(a(L,P)?-1:P._index)),p(w,E,L,C,P)}),D.on("mouseover",function(){D.call(y)}),D.on("mouseout",function(){D.call(v,P)}),T.setTranslate(E,G.lx,G.ly)}function p(w,E,L,C,P){L||(L=E).attr("pointer-events","all");var D=function(Z){return+Z.attr(i.menuIndexAttrName)==-1}(L)&&P.type!=="buttons"?[]:P.buttons,G=P.type==="dropdown"?i.dropdownButtonClassName:i.buttonClassName,I=L.selectAll("g."+G).data(b.filterVisible(D)),H=I.enter().append("g").classed(G,!0),N=I.exit();P.type==="dropdown"?(H.attr("opacity","0").transition().attr("opacity","1"),N.transition().attr("opacity","0").remove()):N.remove();var F=0,V=0,q=P._dims,te=["up","down"].indexOf(P.direction)!==-1;P.type==="dropdown"&&(te?V=q.headerHeight+i.gapButtonHeader:F=q.headerWidth+i.gapButtonHeader),P.type==="dropdown"&&P.direction==="up"&&(V=-i.gapButtonHeader+i.gapButton-q.openHeight),P.type==="dropdown"&&P.direction==="left"&&(F=-i.gapButtonHeader+i.gapButton-q.openWidth);var $={x:q.lx+F+P.pad.l,y:q.ly+V+P.pad.t,yPad:i.gapButton,xPad:i.gapButton,index:0},W={l:$.x+P.borderwidth,t:$.y+P.borderwidth};I.each(function(Z,J){var ee=S.select(this);ee.call(c,P,Z,w).call(h,P,$),ee.on("click",function(){S.event.defaultPrevented||(Z.execute&&(Z.args2&&P.active===J?(o(w,P,0,E,L,C,-1),k.executeAPICommand(w,Z.method,Z.args2)):(o(w,P,0,E,L,C,J),k.executeAPICommand(w,Z.method,Z.args))),w.emit("plotly_buttonclicked",{menu:P,button:Z,active:P.active}))}),ee.on("mouseover",function(){ee.call(y)}),ee.on("mouseout",function(){ee.call(v,P),I.call(f,P)})}),I.call(f,P),te?(W.w=Math.max(q.openWidth,q.headerWidth),W.h=$.y-W.t):(W.w=$.x-W.l,W.h=Math.max(q.openHeight,q.headerHeight)),W.direction=P.direction,C&&(I.size()?function(Z,J,ee,re,ae,oe){var ce,pe,ve,we=ae.direction,xe=we==="up"||we==="down",ge=ae._dims,Oe=ae.active;if(xe)for(pe=0,ve=0;ve<Oe;ve++)pe+=ge.heights[ve]+i.gapButton;else for(ce=0,ve=0;ve<Oe;ve++)ce+=ge.widths[ve]+i.gapButton;re.enable(oe,ce,pe),re.hbar&&re.hbar.attr("opacity","0").transition().attr("opacity","1"),re.vbar&&re.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,C,P,W):function(Z){var J=!!Z.hbar,ee=!!Z.vbar;J&&Z.hbar.transition().attr("opacity","0").each("end",function(){J=!1,ee||Z.disable()}),ee&&Z.vbar.transition().attr("opacity","0").each("end",function(){ee=!1,J||Z.disable()})}(C))}function c(w,E,L,C){w.call(x,E).call(g,E,L,C)}function x(w,E){b.ensureSingle(w,"rect",i.itemRectClassName,function(L){L.attr({rx:i.rx,ry:i.ry,"shape-rendering":"crispEdges"})}).call(l.stroke,E.bordercolor).call(l.fill,E.bgcolor).style("stroke-width",E.borderwidth+"px")}function g(w,E,L,C){var P=b.ensureSingle(w,"text",i.itemTextClassName,function(I){I.attr({"text-anchor":"start","data-notex":1})}),D=L.label,G=C._fullLayout._meta;G&&(D=b.templateString(D,G)),P.call(T.font,E.font).text(D).call(d.convertToTspans,C)}function f(w,E){var L=E.active;w.each(function(C,P){var D=S.select(this);P===L&&E.showactive&&D.select("rect."+i.itemRectClassName).call(l.fill,i.activeColor)})}function y(w){w.select("rect."+i.itemRectClassName).call(l.fill,i.hoverColor)}function v(w,E){w.select("rect."+i.itemRectClassName).call(l.fill,E.bgcolor)}function m(w,E){var L=E._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},C=T.tester.selectAll("g."+i.dropdownButtonClassName).data(b.filterVisible(E.buttons));C.enter().append("g").classed(i.dropdownButtonClassName,!0);var P=["up","down"].indexOf(E.direction)!==-1;C.each(function(F,V){var q=S.select(this);q.call(c,E,F,w);var te=q.select("."+i.itemTextClassName),$=te.node()&&T.bBox(te.node()).width,W=Math.max($+i.textPadX,i.minWidth),Z=E.font.size*e,J=d.lineCount(te),ee=Math.max(Z*J,i.minHeight)+i.textOffsetY;ee=Math.ceil(ee),W=Math.ceil(W),L.widths[V]=W,L.heights[V]=ee,L.height1=Math.max(L.height1,ee),L.width1=Math.max(L.width1,W),P?(L.totalWidth=Math.max(L.totalWidth,W),L.openWidth=L.totalWidth,L.totalHeight+=ee+i.gapButton,L.openHeight+=ee+i.gapButton):(L.totalWidth+=W+i.gapButton,L.openWidth+=W+i.gapButton,L.totalHeight=Math.max(L.totalHeight,ee),L.openHeight=L.totalHeight)}),P?L.totalHeight-=i.gapButton:L.totalWidth-=i.gapButton,L.headerWidth=L.width1+i.arrowPadX,L.headerHeight=L.height1,E.type==="dropdown"&&(P?(L.width1+=i.arrowPadX,L.totalHeight=L.height1):L.totalWidth=L.width1,L.totalWidth+=i.arrowPadX),C.remove();var D=L.totalWidth+E.pad.l+E.pad.r,G=L.totalHeight+E.pad.t+E.pad.b,I=w._fullLayout._size;L.lx=I.l+I.w*E.x,L.ly=I.t+I.h*(1-E.y);var H="left";b.isRightAnchor(E)&&(L.lx-=D,H="right"),b.isCenterAnchor(E)&&(L.lx-=D/2,H="center");var N="top";b.isBottomAnchor(E)&&(L.ly-=G,N="bottom"),b.isMiddleAnchor(E)&&(L.ly-=G/2,N="middle"),L.totalWidth=Math.ceil(L.totalWidth),L.totalHeight=Math.ceil(L.totalHeight),L.lx=Math.round(L.lx),L.ly=Math.round(L.ly),k.autoMargin(w,_(E),{x:E.x,y:E.y,l:D*({right:1,center:.5}[H]||0),r:D*({left:1,center:.5}[H]||0),b:G*({top:1,middle:.5}[N]||0),t:G*({bottom:1,middle:.5}[N]||0)})}function _(w){return i.autoMarginIdRoot+w._index}function h(w,E,L,C){C=C||{};var P=w.select("."+i.itemRectClassName),D=w.select("."+i.itemTextClassName),G=E.borderwidth,I=L.index,H=E._dims;T.setTranslate(w,G+L.x,G+L.y);var N=["up","down"].indexOf(E.direction)!==-1,F=C.height||(N?H.heights[I]:H.height1);P.attr({x:0,y:0,width:C.width||(N?H.width1:H.widths[I]),height:F});var V=E.font.size*e,q=(d.lineCount(D)-1)*V/2;d.positionText(D,i.textOffsetX,F/2-q+i.textOffsetY),N?L.y+=H.heights[I]+L.yPad:L.x+=H.widths[I]+L.xPad,L.index++}function A(w,E){w.attr(i.menuIndexAttrName,E||"-1").selectAll("g."+i.dropdownButtonClassName).remove()}Q.exports=function(w){var E=w._fullLayout,L=b.filterVisible(E[i.name]);function C(V){k.autoMargin(w,_(V))}var P=E._menulayer.selectAll("g."+i.containerClassName).data(L.length>0?[0]:[]);if(P.enter().append("g").classed(i.containerClassName,!0).style("cursor","pointer"),P.exit().each(function(){S.select(this).selectAll("g."+i.headerGroupClassName).each(C)}).remove(),L.length!==0){var D=P.selectAll("g."+i.headerGroupClassName).data(L,n);D.enter().append("g").classed(i.headerGroupClassName,!0);for(var G=b.ensureSingle(P,"g",i.dropdownButtonGroupClassName,function(V){V.style("pointer-events","all")}),I=0;I<L.length;I++){var H=L[I];m(w,H)}var N="updatemenus"+E._uid,F=new r(w,G,N);D.enter().size()&&(G.node().parentNode.appendChild(G.node()),G.call(A)),D.exit().each(function(V){G.call(A),C(V)}).remove(),D.each(function(V){var q=S.select(this),te=V.type==="dropdown"?G:null;k.manageCommandObserver(w,V,V.buttons,function($){o(w,V,V.buttons[$.index],q,te,F,$.index,!0)}),V.type==="dropdown"?(u(w,q,G,F,V),a(G,V)&&p(w,q,G,F,V)):p(w,q,null,null,V)})}}},20763:function(Q,z,t){var S=t(75909);Q.exports={moduleType:"component",name:S.name,layoutAttributes:t(7163),supplyLayoutDefaults:t(64897),draw:t(13689)}},25849:function(Q,z,t){Q.exports=b;var S=t(39898),k=t(7901),l=t(91424),T=t(71828);function b(d,s,e){this.gd=d,this.container=s,this.id=e,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}b.barWidth=2,b.barLength=20,b.barRadius=2,b.barPad=1,b.barColor="#808BA4",b.prototype.enable=function(d,s,e){var i=this.gd._fullLayout,r=i.width,n=i.height;this.position=d;var a,o,u,p,c=this.position.l,x=this.position.w,g=this.position.t,f=this.position.h,y=this.position.direction,v=y==="down",m=y==="left",_=y==="up",h=x,A=f;v||m||y==="right"||_||(this.position.direction="down",v=!0),v||_?(o=(a=c)+h,v?(u=g,A=(p=Math.min(u+A,n))-u):A=(p=g+A)-(u=Math.max(p-A,0))):(p=(u=g)+A,m?h=(o=c+h)-(a=Math.max(o-h,0)):(a=c,h=(o=Math.min(a+h,r))-a)),this._box={l:a,t:u,w:h,h:A};var w=x>h,E=b.barLength+2*b.barPad,L=b.barWidth+2*b.barPad,C=c,P=g+f;P+L>n&&(P=n-L);var D=this.container.selectAll("rect.scrollbar-horizontal").data(w?[0]:[]);D.exit().on(".drag",null).remove(),D.enter().append("rect").classed("scrollbar-horizontal",!0).call(k.fill,b.barColor),w?(this.hbar=D.attr({rx:b.barRadius,ry:b.barRadius,x:C,y:P,width:E,height:L}),this._hbarXMin=C+E/2,this._hbarTranslateMax=h-E):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var G=f>A,I=b.barWidth+2*b.barPad,H=b.barLength+2*b.barPad,N=c+x,F=g;N+I>r&&(N=r-I);var V=this.container.selectAll("rect.scrollbar-vertical").data(G?[0]:[]);V.exit().on(".drag",null).remove(),V.enter().append("rect").classed("scrollbar-vertical",!0).call(k.fill,b.barColor),G?(this.vbar=V.attr({rx:b.barRadius,ry:b.barRadius,x:N,y:F,width:I,height:H}),this._vbarYMin=F+H/2,this._vbarTranslateMax=A-H):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var q=this.id,te=a-.5,$=G?o+I+.5:o+.5,W=u-.5,Z=w?p+L+.5:p+.5,J=i._topdefs.selectAll("#"+q).data(w||G?[0]:[]);if(J.exit().remove(),J.enter().append("clipPath").attr("id",q).append("rect"),w||G?(this._clipRect=J.select("rect").attr({x:Math.floor(te),y:Math.floor(W),width:Math.ceil($)-Math.floor(te),height:Math.ceil(Z)-Math.floor(W)}),this.container.call(l.setClipUrl,q,this.gd),this.bg.attr({x:c,y:g,width:x,height:f})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(l.setClipUrl,null),delete this._clipRect),w||G){var ee=S.behavior.drag().on("dragstart",function(){S.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(ee);var re=S.behavior.drag().on("dragstart",function(){S.event.sourceEvent.preventDefault(),S.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));w&&this.hbar.on(".drag",null).call(re),G&&this.vbar.on(".drag",null).call(re)}this.setTranslate(s,e)},b.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(l.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},b.prototype._onBoxDrag=function(){var d=this.translateX,s=this.translateY;this.hbar&&(d-=S.event.dx),this.vbar&&(s-=S.event.dy),this.setTranslate(d,s)},b.prototype._onBoxWheel=function(){var d=this.translateX,s=this.translateY;this.hbar&&(d+=S.event.deltaY),this.vbar&&(s+=S.event.deltaY),this.setTranslate(d,s)},b.prototype._onBarDrag=function(){var d=this.translateX,s=this.translateY;if(this.hbar){var e=d+this._hbarXMin,i=e+this._hbarTranslateMax;d=(T.constrain(S.event.x,e,i)-e)/(i-e)*(this.position.w-this._box.w)}if(this.vbar){var r=s+this._vbarYMin,n=r+this._vbarTranslateMax;s=(T.constrain(S.event.y,r,n)-r)/(n-r)*(this.position.h-this._box.h)}this.setTranslate(d,s)},b.prototype.setTranslate=function(d,s){var e=this.position.w-this._box.w,i=this.position.h-this._box.h;if(d=T.constrain(d||0,0,e),s=T.constrain(s||0,0,i),this.translateX=d,this.translateY=s,this.container.call(l.setTranslate,this._box.l-this.position.l-d,this._box.t-this.position.t-s),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+d-.5),y:Math.floor(this.position.t+s-.5)}),this.hbar){var r=d/e;this.hbar.call(l.setTranslate,d+r*this._hbarTranslateMax,s)}if(this.vbar){var n=s/i;this.vbar.call(l.setTranslate,d,s+n*this._vbarTranslateMax)}}},18783:function(Q){Q.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},24695:function(Q){Q.exports={axisRefDescription:function(z,t,S){return["If set to a",z,"axis id (e.g. *"+z+"* or","*"+z+"2*), the `"+z+"` position refers to a",z,"coordinate. If set to *paper*, the `"+z+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+S+"). If set to a",z,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+z+"2 domain* refers to the domain of the second",z," axis and a",z,"position of 0.5 refers to the","point between the",t,"and the",S,"of the domain of the","second",z,"axis."].join(" ")}}},22372:function(Q){Q.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:""},DECREASING:{COLOR:"#FF4136",SYMBOL:""}}},31562:function(Q){Q.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},74808:function(Q){Q.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},29659:function(Q){Q.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87381:function(Q){Q.exports={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",x:""}},37822:function(Q){Q.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},50606:function(Q){Q.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:""}},32396:function(Q,z){z.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],z.STYLE=z.CSS_DECLARATIONS.map(function(t){return t.join(": ")+"; "}).join("")},77922:function(Q,z){z.xmlns="http://www.w3.org/2000/xmlns/",z.svg="http://www.w3.org/2000/svg",z.xlink="http://www.w3.org/1999/xlink",z.svgAttrs={xmlns:z.svg,"xmlns:xlink":z.xlink}},8729:function(Q,z,t){z.version=t(11506).version,t(7417),t(98847);for(var S=t(73972),k=z.register=S.register,l=t(10641),T=Object.keys(l),b=0;b<T.length;b++){var d=T[b];d.charAt(0)!=="_"&&(z[d]=l[d]),k({moduleType:"apiMethod",name:d,fn:l[d]})}k(t(67368)),k([t(2199),t(30211),t(32745),t(2468),t(47322),t(89853),t(68804),t(20763),t(23243),t(13137),t(97218),t(83312),t(37369),t(21081),t(12311),t(64168)]),k([t(92177),t(37815)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(k(window.PlotlyLocales),delete window.PlotlyLocales),z.Icons=t(24255);var s=t(30211),e=t(74875);z.Plots={resize:e.resize,graphJson:e.graphJson,sendDataToCloud:e.sendDataToCloud},z.Fx={hover:s.hover,unhover:s.unhover,loneHover:s.loneHover,loneUnhover:s.loneUnhover},z.Snapshot=t(44511),z.PlotSchema=t(86281)},24255:function(Q){Q.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},99863:function(Q,z){z.isLeftAnchor=function(t){return t.xanchor==="left"||t.xanchor==="auto"&&t.x<=.3333333333333333},z.isCenterAnchor=function(t){return t.xanchor==="center"||t.xanchor==="auto"&&t.x>.3333333333333333&&t.x<.6666666666666666},z.isRightAnchor=function(t){return t.xanchor==="right"||t.xanchor==="auto"&&t.x>=.6666666666666666},z.isTopAnchor=function(t){return t.yanchor==="top"||t.yanchor==="auto"&&t.y>=.6666666666666666},z.isMiddleAnchor=function(t){return t.yanchor==="middle"||t.yanchor==="auto"&&t.y>.3333333333333333&&t.y<.6666666666666666},z.isBottomAnchor=function(t){return t.yanchor==="bottom"||t.yanchor==="auto"&&t.y<=.3333333333333333}},26348:function(Q,z,t){var S=t(64872),k=S.mod,l=S.modHalf,T=Math.PI,b=2*T;function d(r){return Math.abs(r[1]-r[0])>b-1e-14}function s(r,n){return l(n-r,b)}function e(r,n){if(d(n))return!0;var a,o;n[0]<n[1]?(a=n[0],o=n[1]):(a=n[1],o=n[0]),(a=k(a,b))>(o=k(o,b))&&(o+=b);var u=k(r,b),p=u+b;return u>=a&&u<=o||p>=a&&p<=o}function i(r,n,a,o,u,p,c){u=u||0,p=p||0;var x,g,f,y,v,m=d([a,o]);function _(E,L){return[E*Math.cos(L)+u,p-E*Math.sin(L)]}m?(x=0,g=T,f=b):a<o?(x=a,f=o):(x=o,f=a),r<n?(y=r,v=n):(y=n,v=r);var h,A=Math.abs(f-x)<=T?0:1;function w(E,L,C){return"A"+[E,E]+" "+[0,A,C]+" "+_(E,L)}return m?h=y===null?"M"+_(v,x)+w(v,g,0)+w(v,f,0)+"Z":"M"+_(y,x)+w(y,g,0)+w(y,f,0)+"ZM"+_(v,x)+w(v,g,1)+w(v,f,1)+"Z":y===null?(h="M"+_(v,x)+w(v,f,0),c&&(h+="L0,0Z")):h="M"+_(y,x)+"L"+_(v,x)+w(v,f,0)+"L"+_(y,f)+w(y,x,1)+"Z",h}Q.exports={deg2rad:function(r){return r/180*T},rad2deg:function(r){return r/T*180},angleDelta:s,angleDist:function(r,n){return Math.abs(s(r,n))},isFullCircle:d,isAngleInsideSector:e,isPtInsideSector:function(r,n,a,o){return!!e(n,o)&&(a[0]<a[1]?(u=a[0],p=a[1]):(u=a[1],p=a[0]),r>=u&&r<=p);var u,p},pathArc:function(r,n,a,o,u){return i(null,r,n,a,o,u,0)},pathSector:function(r,n,a,o,u){return i(null,r,n,a,o,u,1)},pathAnnulus:function(r,n,a,o,u,p){return i(r,n,a,o,u,p,1)}}},73627:function(Q,z){var t=Array.isArray,S=ArrayBuffer,k=DataView;function l(d){return S.isView(d)&&!(d instanceof k)}function T(d){return t(d)||l(d)}function b(d,s,e){if(T(d)){if(T(d[0])){for(var i=e,r=0;r<d.length;r++)i=s(i,d[r].length);return i}return d.length}return 0}z.isTypedArray=l,z.isArrayOrTypedArray=T,z.isArray1D=function(d){return!T(d[0])},z.ensureArray=function(d,s){return t(d)||(d=[]),d.length=s,d},z.concat=function(){var d,s,e,i,r,n,a,o,u=[],p=!0,c=0;for(e=0;e<arguments.length;e++)(n=(i=arguments[e]).length)&&(s?u.push(i):(s=i,r=n),t(i)?d=!1:(p=!1,c?d!==i.constructor&&(d=!1):d=i.constructor),c+=n);if(!c)return[];if(!u.length)return s;if(p)return s.concat.apply(s,u);if(d){for((a=new d(c)).set(s),e=0;e<u.length;e++)i=u[e],a.set(i,r),r+=i.length;return a}for(a=new Array(c),o=0;o<s.length;o++)a[o]=s[o];for(e=0;e<u.length;e++){for(i=u[e],o=0;o<i.length;o++)a[r+o]=i[o];r+=o}return a},z.maxRowLength=function(d){return b(d,Math.max,0)},z.minRowLength=function(d){return b(d,Math.min,1/0)}},95218:function(Q,z,t){var S=t(92770),k=t(50606).BADNUM,l=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;Q.exports=function(T){return typeof T=="string"&&(T=T.replace(l,"")),S(T)?Number(T):k}},33306:function(Q){Q.exports=function(z){var t=z._fullLayout;t._glcanvas&&t._glcanvas.size()&&t._glcanvas.each(function(S){S.regl&&S.regl.clear({color:!0,depth:!0})})}},86367:function(Q){Q.exports=function(z){z._responsiveChartHandler&&(window.removeEventListener("resize",z._responsiveChartHandler),delete z._responsiveChartHandler)}},96554:function(Q,z,t){var S=t(92770),k=t(84267),l=t(9012),T=t(63282),b=t(7901),d=t(37822).DESELECTDIM,s=t(65487),e=t(30587).counter,i=t(64872).modHalf,r=t(73627).isArrayOrTypedArray;function n(a,o){var u=z.valObjectMeta[o.valType];if(o.arrayOk&&r(a))return!0;if(u.validateFunction)return u.validateFunction(a,o);var p={},c=p,x={set:function(g){c=g}};return u.coerceFunction(a,x,p,o),c!==p}z.valObjectMeta={data_array:{coerceFunction:function(a,o,u){r(a)?o.set(a):u!==void 0&&o.set(u)}},enumerated:{coerceFunction:function(a,o,u,p){p.coerceNumber&&(a=+a),p.values.indexOf(a)===-1?o.set(u):o.set(a)},validateFunction:function(a,o){o.coerceNumber&&(a=+a);for(var u=o.values,p=0;p<u.length;p++){var c=String(u[p]);if(c.charAt(0)==="/"&&c.charAt(c.length-1)==="/"){if(new RegExp(c.substr(1,c.length-2)).test(a))return!0}else if(a===u[p])return!0}return!1}},boolean:{coerceFunction:function(a,o,u){a===!0||a===!1?o.set(a):o.set(u)}},number:{coerceFunction:function(a,o,u,p){!S(a)||p.min!==void 0&&a<p.min||p.max!==void 0&&a>p.max?o.set(u):o.set(+a)}},integer:{coerceFunction:function(a,o,u,p){a%1||!S(a)||p.min!==void 0&&a<p.min||p.max!==void 0&&a>p.max?o.set(u):o.set(+a)}},string:{coerceFunction:function(a,o,u,p){if(typeof a!="string"){var c=typeof a=="number";p.strict!==!0&&c?o.set(String(a)):o.set(u)}else p.noBlank&&!a?o.set(u):o.set(a)}},color:{coerceFunction:function(a,o,u){k(a).isValid()?o.set(a):o.set(u)}},colorlist:{coerceFunction:function(a,o,u){Array.isArray(a)&&a.length&&a.every(function(p){return k(p).isValid()})?o.set(a):o.set(u)}},colorscale:{coerceFunction:function(a,o,u){o.set(T.get(a,u))}},angle:{coerceFunction:function(a,o,u){a==="auto"?o.set("auto"):S(a)?o.set(i(+a,360)):o.set(u)}},subplotid:{coerceFunction:function(a,o,u,p){var c=p.regex||e(u);typeof a=="string"&&c.test(a)?o.set(a):o.set(u)},validateFunction:function(a,o){var u=o.dflt;return a===u||typeof a=="string"&&!!e(u).test(a)}},flaglist:{coerceFunction:function(a,o,u,p){if((p.extras||[]).indexOf(a)===-1)if(typeof a=="string"){for(var c=a.split("+"),x=0;x<c.length;){var g=c[x];p.flags.indexOf(g)===-1||c.indexOf(g)<x?c.splice(x,1):x++}c.length?o.set(c.join("+")):o.set(u)}else o.set(u);else o.set(a)}},any:{coerceFunction:function(a,o,u){a===void 0?o.set(u):o.set(a)}},info_array:{coerceFunction:function(a,o,u,p){function c(P,D,G){var I,H={set:function(N){I=N}};return G===void 0&&(G=D.dflt),z.valObjectMeta[D.valType].coerceFunction(P,H,G,D),I}var x=p.dimensions===2||p.dimensions==="1-2"&&Array.isArray(a)&&Array.isArray(a[0]);if(Array.isArray(a)){var g,f,y,v,m,_,h=p.items,A=[],w=Array.isArray(h),E=w&&x&&Array.isArray(h[0]),L=x&&w&&!E,C=w&&!L?h.length:a.length;if(u=Array.isArray(u)?u:[],x)for(g=0;g<C;g++)for(A[g]=[],y=Array.isArray(a[g])?a[g]:[],m=L?h.length:w?h[g].length:y.length,f=0;f<m;f++)v=L?h[f]:w?h[g][f]:h,(_=c(y[f],v,(u[g]||[])[f]))!==void 0&&(A[g][f]=_);else for(g=0;g<C;g++)(_=c(a[g],w?h[g]:h,u[g]))!==void 0&&(A[g]=_);o.set(A)}else o.set(u)},validateFunction:function(a,o){if(!Array.isArray(a))return!1;var u=o.items,p=Array.isArray(u),c=o.dimensions===2;if(!o.freeLength&&a.length!==u.length)return!1;for(var x=0;x<a.length;x++)if(c){if(!Array.isArray(a[x])||!o.freeLength&&a[x].length!==u[x].length)return!1;for(var g=0;g<a[x].length;g++)if(!n(a[x][g],p?u[x][g]:u))return!1}else if(!n(a[x],p?u[x]:u))return!1;return!0}}},z.coerce=function(a,o,u,p,c){var x=s(u,p).get(),g=s(a,p),f=s(o,p),y=g.get(),v=o._template;if(y===void 0&&v&&(y=s(v,p).get(),v=0),c===void 0&&(c=x.dflt),x.arrayOk&&r(y))return f.set(y),y;var m=z.valObjectMeta[x.valType].coerceFunction;m(y,f,c,x);var _=f.get();return v&&_===c&&!n(y,x)&&(m(y=s(v,p).get(),f,c,x),_=f.get()),_},z.coerce2=function(a,o,u,p,c){var x=s(a,p),g=z.coerce(a,o,u,p,c);return x.get()!=null&&g},z.coerceFont=function(a,o,u){var p={};return u=u||{},p.family=a(o+".family",u.family),p.size=a(o+".size",u.size),p.color=a(o+".color",u.color),p},z.coercePattern=function(a,o,u,p){if(a(o+".shape")){a(o+".solidity"),a(o+".size");var c=a(o+".fillmode")==="overlay";if(!p){var x=a(o+".bgcolor",c?u:void 0);a(o+".fgcolor",c?b.contrast(x):u)}a(o+".fgopacity",c?.5:1)}},z.coerceHoverinfo=function(a,o,u){var p,c=o._module.attributes,x=c.hoverinfo?c:l,g=x.hoverinfo;if(u._dataLength===1){var f=g.dflt==="all"?g.flags.slice():g.dflt.split("+");f.splice(f.indexOf("name"),1),p=f.join("+")}return z.coerce(a,o,x,"hoverinfo",p)},z.coerceSelectionMarkerOpacity=function(a,o){if(a.marker){var u,p,c=a.marker.opacity;c!==void 0&&(r(c)||a.selected||a.unselected||(u=c,p=d*c),o("selected.marker.opacity",u),o("unselected.marker.opacity",p))}},z.validate=n},41631:function(Q,z,t){var S,k,l=t(84096).i$,T=t(92770),b=t(47769),d=t(64872).mod,s=t(50606),e=s.BADNUM,i=s.ONEDAY,r=s.ONEHOUR,n=s.ONEMIN,a=s.ONESEC,o=s.EPOCHJD,u=t(73972),p=t(84096).g0,c=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,x=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,g=new Date().getFullYear()-70;function f(D){return D&&u.componentsRegistry.calendars&&typeof D=="string"&&D!=="gregorian"}function y(D,G){return String(D+Math.pow(10,G)).substr(1)}z.dateTick0=function(D,G){var I=function(N,F){return f(N)?F?u.getComponentMethod("calendars","CANONICAL_SUNDAY")[N]:u.getComponentMethod("calendars","CANONICAL_TICK")[N]:F?"2000-01-02":"2000-01-01"}(D,!!G);if(G<2)return I;var H=z.dateTime2ms(I,D);return H+=i*(G-1),z.ms2DateTime(H,0,D)},z.dfltRange=function(D){return f(D)?u.getComponentMethod("calendars","DFLTRANGE")[D]:["2000-01-01","2001-01-01"]},z.isJSDate=function(D){return typeof D=="object"&&D!==null&&typeof D.getTime=="function"},z.dateTime2ms=function(D,G){if(z.isJSDate(D)){var I=D.getTimezoneOffset()*n,H=(D.getUTCMinutes()-D.getMinutes())*n+(D.getUTCSeconds()-D.getSeconds())*a+(D.getUTCMilliseconds()-D.getMilliseconds());if(H){var N=3*n;I=I-N/2+d(H-I+N/2,N)}return(D=Number(D)-I)>=S&&D<=k?D:e}if(typeof D!="string"&&typeof D!="number")return e;D=String(D);var F=f(G),V=D.charAt(0);!F||V!=="G"&&V!=="g"||(D=D.substr(1),G="");var q=F&&G.substr(0,7)==="chinese",te=D.match(q?x:c);if(!te)return e;var $=te[1],W=te[3]||"1",Z=Number(te[5]||1),J=Number(te[7]||0),ee=Number(te[9]||0),re=Number(te[11]||0);if(F){if($.length===2)return e;var ae;$=Number($);try{var oe=u.getComponentMethod("calendars","getCal")(G);if(q){var ce=W.charAt(W.length-1)==="i";W=parseInt(W,10),ae=oe.newDate($,oe.toMonthIndex($,W,ce),Z)}else ae=oe.newDate($,Number(W),Z)}catch{return e}return ae?(ae.toJD()-o)*i+J*r+ee*n+re*a:e}$=$.length===2?(Number($)+2e3-g)%100+g:Number($),W-=1;var pe=new Date(Date.UTC(2e3,W,Z,J,ee));return pe.setUTCFullYear($),pe.getUTCMonth()!==W||pe.getUTCDate()!==Z?e:pe.getTime()+re*a},S=z.MIN_MS=z.dateTime2ms("-9999"),k=z.MAX_MS=z.dateTime2ms("9999-12-31 23:59:59.9999"),z.isDateTime=function(D,G){return z.dateTime2ms(D,G)!==e};var v=90*i,m=3*r,_=5*n;function h(D,G,I,H,N){if((G||I||H||N)&&(D+=" "+y(G,2)+":"+y(I,2),(H||N)&&(D+=":"+y(H,2),N))){for(var F=4;N%10==0;)F-=1,N/=10;D+="."+y(N,F)}return D}z.ms2DateTime=function(D,G,I){if(typeof D!="number"||!(D>=S&&D<=k))return e;G||(G=0);var H,N,F,V,q,te,$=Math.floor(10*d(D+.05,1)),W=Math.round(D-$/10);if(f(I)){var Z=Math.floor(W/i)+o,J=Math.floor(d(D,i));try{H=u.getComponentMethod("calendars","getCal")(I).fromJD(Z).formatDate("yyyy-mm-dd")}catch{H=p("G%Y-%m-%d")(new Date(W))}if(H.charAt(0)==="-")for(;H.length<11;)H="-0"+H.substr(1);else for(;H.length<10;)H="0"+H;N=G<v?Math.floor(J/r):0,F=G<v?Math.floor(J%r/n):0,V=G<m?Math.floor(J%n/a):0,q=G<_?J%a*10+$:0}else te=new Date(W),H=p("%Y-%m-%d")(te),N=G<v?te.getUTCHours():0,F=G<v?te.getUTCMinutes():0,V=G<m?te.getUTCSeconds():0,q=G<_?10*te.getUTCMilliseconds()+$:0;return h(H,N,F,V,q)},z.ms2DateTimeLocal=function(D){if(!(D>=S+i&&D<=k-i))return e;var G=Math.floor(10*d(D+.05,1)),I=new Date(Math.round(D-G/10));return h(l("%Y-%m-%d")(I),I.getHours(),I.getMinutes(),I.getSeconds(),10*I.getUTCMilliseconds()+G)},z.cleanDate=function(D,G,I){if(D===e)return G;if(z.isJSDate(D)||typeof D=="number"&&isFinite(D)){if(f(I))return b.error("JS Dates and milliseconds are incompatible with world calendars",D),G;if(!(D=z.ms2DateTimeLocal(+D))&&G!==void 0)return G}else if(!z.isDateTime(D,I))return b.error("unrecognized date",D),G;return D};var A=/%\d?f/g,w=/%h/g,E={1:"1",2:"1",3:"2",4:"2"};function L(D,G,I,H){D=D.replace(A,function(F){var V=Math.min(+F.charAt(1)||6,6);return(G/1e3%1+2).toFixed(V).substr(2).replace(/0+$/,"")||"0"});var N=new Date(Math.floor(G+.05));if(D=D.replace(w,function(){return E[I("%q")(N)]}),f(H))try{D=u.getComponentMethod("calendars","worldCalFmt")(D,G,H)}catch{return"Invalid"}return I(D)(N)}var C=[59,59.9,59.99,59.999,59.9999];z.formatDate=function(D,G,I,H,N,F){if(N=f(N)&&N,!G)if(I==="y")G=F.year;else if(I==="m")G=F.month;else{if(I!=="d")return function(V,q){var te=d(V+.05,i),$=y(Math.floor(te/r),2)+":"+y(d(Math.floor(te/n),60),2);if(q!=="M"){T(q)||(q=0);var W=(100+Math.min(d(V/a,60),C[q])).toFixed(q).substr(1);q>0&&(W=W.replace(/0+$/,"").replace(/[\.]$/,"")),$+=":"+W}return $}(D,I)+`
`+L(F.dayMonthYear,D,H,N);G=F.dayMonth+`
`+F.year}return L(G,D,H,N)};var P=3*i;z.incrementMonth=function(D,G,I){I=f(I)&&I;var H=d(D,i);if(D=Math.round(D-H),I)try{var N=Math.round(D/i)+o,F=u.getComponentMethod("calendars","getCal")(I),V=F.fromJD(N);return G%12?F.add(V,G,"m"):F.add(V,G/12,"y"),(V.toJD()-o)*i+H}catch{b.error("invalid ms "+D+" in calendar "+I)}var q=new Date(D+P);return q.setUTCMonth(q.getUTCMonth()+G)+H-P},z.findExactDates=function(D,G){for(var I,H,N=0,F=0,V=0,q=0,te=f(G)&&u.getComponentMethod("calendars","getCal")(G),$=0;$<D.length;$++)if(H=D[$],T(H)){if(!(H%i))if(te)try{(I=te.fromJD(H/i+o)).day()===1?I.month()===1?N++:F++:V++}catch{}else(I=new Date(H)).getUTCDate()===1?I.getUTCMonth()===0?N++:F++:V++}else q++;V+=F+=N;var W=D.length-q;return{exactYears:N/W,exactMonths:F/W,exactDays:V/W}}},24401:function(Q,z,t){var S=t(39898),k=t(47769),l=t(35657),T=t(79576);function b(r){var n=r&&r.parentNode;n&&n.removeChild(r)}function d(r,n,a){var o="plotly.js-style-"+r,u=document.getElementById(o);u||((u=document.createElement("style")).setAttribute("id",o),u.appendChild(document.createTextNode("")),document.head.appendChild(u));var p=u.sheet;p.insertRule?p.insertRule(n+"{"+a+"}",0):p.addRule?p.addRule(n,a,0):k.warn("addStyleRule failed")}function s(r){var n=window.getComputedStyle(r,null),a=n.getPropertyValue("-webkit-transform")||n.getPropertyValue("-moz-transform")||n.getPropertyValue("-ms-transform")||n.getPropertyValue("-o-transform")||n.getPropertyValue("transform");return a==="none"?null:a.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(o){return+o})}function e(r){for(var n=[];i(r);)n.push(r),r=r.parentNode;return n}function i(r){return r&&(r instanceof Element||r instanceof HTMLElement)}Q.exports={getGraphDiv:function(r){var n;if(typeof r=="string"){if((n=document.getElementById(r))===null)throw new Error("No DOM element with id '"+r+"' exists on the page.");return n}if(r==null)throw new Error("DOM element provided is null or undefined");return r},isPlotDiv:function(r){var n=S.select(r);return n.node()instanceof HTMLElement&&n.size()&&n.classed("js-plotly-plot")},removeElement:b,addStyleRule:function(r,n){d("global",r,n)},addRelatedStyleRule:d,deleteRelatedStyleRule:function(r){var n="plotly.js-style-"+r,a=document.getElementById(n);a&&b(a)},getFullTransformMatrix:function(r){var n=e(r),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return n.forEach(function(o){var u=s(o);if(u){var p=l.convertCssMatrix(u);a=T.multiply(a,a,p)}}),a},getElementTransformMatrix:s,getElementAndAncestors:e,equalDomRects:function(r,n){return r&&n&&r.top===n.top&&r.left===n.left&&r.right===n.right&&r.bottom===n.bottom}}},11086:function(Q,z,t){var S=t(15398).EventEmitter,k={init:function(l){if(l._ev instanceof S)return l;var T=new S,b=new S;return l._ev=T,l._internalEv=b,l.on=T.on.bind(T),l.once=T.once.bind(T),l.removeListener=T.removeListener.bind(T),l.removeAllListeners=T.removeAllListeners.bind(T),l._internalOn=b.on.bind(b),l._internalOnce=b.once.bind(b),l._removeInternalListener=b.removeListener.bind(b),l._removeAllInternalListeners=b.removeAllListeners.bind(b),l.emit=function(d,s){typeof jQuery<"u"&&jQuery(l).trigger(d,s),T.emit(d,s),b.emit(d,s)},l},triggerHandler:function(l,T,b){var d,s;typeof jQuery<"u"&&(d=jQuery(l).triggerHandler(T,b));var e=l._ev;if(!e)return d;var i,r=e._events[T];if(!r)return d;function n(a){return a.listener?(e.removeListener(T,a.listener),a.fired?void 0:(a.fired=!0,a.listener.apply(e,[b]))):a.apply(e,[b])}for(r=Array.isArray(r)?r:[r],i=0;i<r.length-1;i++)n(r[i]);return s=n(r[i]),d!==void 0?d:s},purge:function(l){return delete l._ev,delete l.on,delete l.once,delete l.removeListener,delete l.removeAllListeners,delete l.emit,delete l._ev,delete l._internalEv,delete l._internalOn,delete l._internalOnce,delete l._removeInternalListener,delete l._removeAllInternalListeners,l}};Q.exports=k},1426:function(Q,z,t){var S=t(41965),k=Array.isArray;function l(T,b,d,s){var e,i,r,n,a,o,u,p=T[0],c=T.length;if(c===2&&k(p)&&k(T[1])&&p.length===0){if(u=function(g,f){var y,v;for(y=0;y<g.length;y++){if((v=g[y])!==null&&typeof v=="object")return!1;v!==void 0&&(f[y]=v)}return!0}(T[1],p),u)return p;p.splice(0,p.length)}for(var x=1;x<c;x++)for(i in e=T[x])r=p[i],n=e[i],s&&k(n)?p[i]=n:b&&n&&(S(n)||(a=k(n)))?(a?(a=!1,o=r&&k(r)?r:[]):o=r&&S(r)?r:{},p[i]=l([o,n],b,d,s)):(n!==void 0||d)&&(p[i]=n);return p}z.extendFlat=function(){return l(arguments,!1,!1,!1)},z.extendDeep=function(){return l(arguments,!0,!1,!1)},z.extendDeepAll=function(){return l(arguments,!0,!0,!1)},z.extendDeepNoArrays=function(){return l(arguments,!0,!1,!0)}},75744:function(Q){Q.exports=function(z){for(var t={},S=[],k=0,l=0;l<z.length;l++){var T=z[l];t[T]!==1&&(t[T]=1,S[k++]=T)}return S}},76756:function(Q){function z(S){return S.visible===!0}function t(S){var k=S[0].trace;return k.visible===!0&&k._length!==0}Q.exports=function(S){for(var k,l=(k=S,Array.isArray(k)&&Array.isArray(k[0])&&k[0][0]&&k[0][0].trace?t:z),T=[],b=0;b<S.length;b++){var d=S[b];l(d)&&T.push(d)}return T}},41327:function(Q,z,t){var S=t(39898),k=t(24138),l=t(30774),T=t(29261),b=t(85268),d=t(23389),s=t(47769),e=t(41965),i=t(65487),r=t(61082),n=Object.keys(k),a={"ISO-3":d,"USA-states":d,"country names":function(u){for(var p=0;p<n.length;p++){var c=n[p];if(new RegExp(k[c]).test(u.trim().toLowerCase()))return c}return s.log("Unrecognized country name: "+u+"."),!1}};function o(u){var p=u.geojson,c=window.PlotlyGeoAssets||{},x=typeof p=="string"?c[p]:p;return e(x)?x:(s.error("Oops ... something went wrong when fetching "+p),!1)}Q.exports={locationToFeature:function(u,p,c){if(!p||typeof p!="string")return!1;var x,g,f,y=a[u](p);if(y){if(u==="USA-states")for(x=[],f=0;f<c.length;f++)(g=c[f]).properties&&g.properties.gu&&g.properties.gu==="USA"&&x.push(g);else x=c;for(f=0;f<x.length;f++)if((g=x[f]).id===y)return g;s.log(["Location with id",y,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(u){var p,c,x,g,f=u.geometry,y=f.coordinates,v=u.id,m=[];function _(h){for(var A=0;A<h.length-1;A++)if(h[A][0]>0&&h[A+1][0]<0)return A;return null}switch(p=v==="RUS"||v==="FJI"?function(h){var A;if(_(h)===null)A=h;else for(A=new Array(h.length),g=0;g<h.length;g++)A[g]=[h[g][0]<0?h[g][0]+360:h[g][0],h[g][1]];m.push(r.tester(A))}:v==="ATA"?function(h){var A=_(h);if(A===null)return m.push(r.tester(h));var w=new Array(h.length+1),E=0;for(g=0;g<h.length;g++)g>A?w[E++]=[h[g][0]+360,h[g][1]]:g===A?(w[E++]=h[g],w[E++]=[h[g][0],-90]):w[E++]=h[g];var L=r.tester(w);L.pts.pop(),m.push(L)}:function(h){m.push(r.tester(h))},f.type){case"MultiPolygon":for(c=0;c<y.length;c++)for(x=0;x<y[c].length;x++)p(y[c][x]);break;case"Polygon":for(c=0;c<y.length;c++)p(y[c])}return m},getTraceGeojson:o,extractTraceFeature:function(u){var p=u[0].trace,c=o(p);if(!c)return!1;var x,g={},f=[];for(x=0;x<p._length;x++){var y=u[x];(y.loc||y.loc===0)&&(g[y.loc]=y)}function v(h){var A=i(h,p.featureidkey||"id").get(),w=g[A];if(w){var E=h.geometry;if(E.type==="Polygon"||E.type==="MultiPolygon"){var L={type:"Feature",id:A,geometry:E,properties:{}};L.properties.ct=function(C){var P,D=C.geometry;if(D.type==="MultiPolygon")for(var G=D.coordinates,I=0,H=0;H<G.length;H++){var N={type:"Polygon",coordinates:G[H]},F=l.default(N);F>I&&(I=F,P=N)}else P=D;return T.default(P).geometry.coordinates}(L),w.fIn=h,w.fOut=L,f.push(L)}else s.log(["Location",w.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete g[A]}switch(c.type){case"FeatureCollection":var m=c.features;for(x=0;x<m.length;x++)v(m[x]);break;case"Feature":v(c);break;default:return s.warn(["Invalid GeoJSON type",(c.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var _ in g)s.log(["Location *"+_+"*","does not have a matching feature with id-key","*"+p.featureidkey+"*."].join(" "));return f},fetchTraceGeoData:function(u){var p=window.PlotlyGeoAssets||{},c=[];function x(v){return new Promise(function(m,_){S.json(v,function(h,A){if(h){delete p[v];var w=h.status===404?'GeoJSON at URL "'+v+'" does not exist.':"Unexpected error while fetching from "+v;return _(new Error(w))}return p[v]=A,m(A)})})}function g(v){return new Promise(function(m,_){var h=0,A=setInterval(function(){return p[v]&&p[v]!=="pending"?(clearInterval(A),m(p[v])):h>100?(clearInterval(A),_("Unexpected error while fetching from "+v)):void h++},50)})}for(var f=0;f<u.length;f++){var y=u[f][0].trace.geojson;typeof y=="string"&&(p[y]?p[y]==="pending"&&c.push(g(y)):(p[y]="pending",c.push(x(y))))}return c},computeBbox:function(u){return b.default(u)}}},18214:function(Q,z,t){var S=t(50606).BADNUM;z.calcTraceToLineCoords=function(k){for(var l=k[0].trace.connectgaps,T=[],b=[],d=0;d<k.length;d++){var s=k[d].lonlat;s[0]!==S?b.push(s):!l&&b.length>0&&(T.push(b),b=[])}return b.length>0&&T.push(b),T},z.makeLine=function(k){return k.length===1?{type:"LineString",coordinates:k[0]}:{type:"MultiLineString",coordinates:k}},z.makePolygon=function(k){if(k.length===1)return{type:"Polygon",coordinates:k};for(var l=new Array(k.length),T=0;T<k.length;T++)l[T]=[k[T]];return{type:"MultiPolygon",coordinates:l}},z.makeBlank=function(){return{type:"Point",coordinates:[]}}},87642:function(Q,z,t){var S,k,l,T=t(64872).mod;function b(s,e,i,r,n,a,o,u){var p=i-s,c=n-s,x=o-n,g=r-e,f=a-e,y=u-a,v=p*y-x*g;if(v===0)return null;var m=(c*y-x*f)/v,_=(c*g-p*f)/v;return _<0||_>1||m<0||m>1?null:{x:s+p*m,y:e+g*m}}function d(s,e,i,r,n){var a=r*s+n*e;if(a<0)return r*r+n*n;if(a>i){var o=r-s,u=n-e;return o*o+u*u}var p=r*e-n*s;return p*p/i}z.segmentsIntersect=b,z.segmentDistance=function(s,e,i,r,n,a,o,u){if(b(s,e,i,r,n,a,o,u))return 0;var p=i-s,c=r-e,x=o-n,g=u-a,f=p*p+c*c,y=x*x+g*g,v=Math.min(d(p,c,f,n-s,a-e),d(p,c,f,o-s,u-e),d(x,g,y,s-n,e-a),d(x,g,y,i-n,r-a));return Math.sqrt(v)},z.getTextLocation=function(s,e,i,r){if(s===k&&r===l||(S={},k=s,l=r),S[i])return S[i];var n=s.getPointAtLength(T(i-r/2,e)),a=s.getPointAtLength(T(i+r/2,e)),o=Math.atan((a.y-n.y)/(a.x-n.x)),u=s.getPointAtLength(T(i,e)),p={x:(4*u.x+n.x+a.x)/6,y:(4*u.y+n.y+a.y)/6,theta:o};return S[i]=p,p},z.clearLocationCache=function(){k=null},z.getVisibleSegment=function(s,e,i){var r,n,a=e.left,o=e.right,u=e.top,p=e.bottom,c=0,x=s.getTotalLength(),g=x;function f(v){var m=s.getPointAtLength(v);v===0?r=m:v===x&&(n=m);var _=m.x<a?a-m.x:m.x>o?m.x-o:0,h=m.y<u?u-m.y:m.y>p?m.y-p:0;return Math.sqrt(_*_+h*h)}for(var y=f(c);y;){if((c+=y+i)>g)return;y=f(c)}for(y=f(g);y;){if(c>(g-=y+i))return;y=f(g)}return{min:c,max:g,len:g-c,total:x,isClosed:c===0&&g===x&&Math.abs(r.x-n.x)<.1&&Math.abs(r.y-n.y)<.1}},z.findPointOnPath=function(s,e,i,r){for(var n,a,o,u=(r=r||{}).pathLength||s.getTotalLength(),p=r.tolerance||.001,c=r.iterationLimit||30,x=s.getPointAtLength(0)[i]>s.getPointAtLength(u)[i]?-1:1,g=0,f=0,y=u;g<c;){if(n=(f+y)/2,o=(a=s.getPointAtLength(n))[i]-e,Math.abs(o)<p)return a;x*o>0?y=n:f=n,g++}return a}},81697:function(Q,z,t){var S=t(92770),k=t(84267),l=t(25075),T=t(21081),b=t(22399).defaultLine,d=t(73627).isArrayOrTypedArray,s=l(b);function e(n,a){var o=n;return o[3]*=a,o}function i(n){if(S(n))return s;var a=l(n);return a.length?a:s}function r(n){return S(n)?n:1}Q.exports={formatColor:function(n,a,o){var u,p,c,x,g,f=n.color,y=d(f),v=d(a),m=T.extractOpts(n),_=[];if(u=m.colorscale!==void 0?T.makeColorScaleFuncFromTrace(n):i,p=y?function(A,w){return A[w]===void 0?s:l(u(A[w]))}:i,c=v?function(A,w){return A[w]===void 0?1:r(A[w])}:r,y||v)for(var h=0;h<o;h++)x=p(f,h),g=c(a,h),_[h]=e(x,g);else _=e(l(f),a);return _},parseColorScale:function(n){var a=T.extractOpts(n),o=a.colorscale;return a.reversescale&&(o=T.flipScale(a.colorscale)),o.map(function(u){var p=u[0],c=k(u[1]).toRgb();return{index:p,rgb:[c.r,c.g,c.b,c.a]}})}}},28984:function(Q,z,t){var S=t(23389);function k(l){return[l]}Q.exports={keyFun:function(l){return l.key},repeat:k,descend:S,wrap:k,unwrap:function(l){return l[0]}}},23389:function(Q){Q.exports=function(z){return z}},39240:function(Q){Q.exports=function(z,t){if(!t)return z;var S=1/Math.abs(t),k=S>1?(S*z+S*t)/S:z+t,l=String(k).length;if(l>16){var T=String(t).length;if(l>=String(z).length+T){var b=parseFloat(k).toPrecision(12);b.indexOf("e+")===-1&&(k=+b)}}return k}},71828:function(Q,z,t){var S=t(39898),k=t(84096).g0,l=t(60721).WU,T=t(92770),b=t(50606),d=b.FP_SAFE,s=-d,e=b.BADNUM,i=Q.exports={};i.adjustFormat=function(Z){return!Z||/^\d[.]\df/.test(Z)||/[.]\d%/.test(Z)?Z:Z==="0.f"?"~f":/^\d%/.test(Z)?"~%":/^\ds/.test(Z)?"~s":!/^[~,.0$]/.test(Z)&&/[&fps]/.test(Z)?"~"+Z:Z};var r={};i.warnBadFormat=function(Z){var J=String(Z);r[J]||(r[J]=1,i.warn('encountered bad format: "'+J+'"'))},i.noFormat=function(Z){return String(Z)},i.numberFormat=function(Z){var J;try{J=l(i.adjustFormat(Z))}catch{return i.warnBadFormat(Z),i.noFormat}return J},i.nestedProperty=t(65487),i.keyedContainer=t(66636),i.relativeAttr=t(6962),i.isPlainObject=t(41965),i.toLogRange=t(58163),i.relinkPrivateKeys=t(51332);var n=t(73627);i.isTypedArray=n.isTypedArray,i.isArrayOrTypedArray=n.isArrayOrTypedArray,i.isArray1D=n.isArray1D,i.ensureArray=n.ensureArray,i.concat=n.concat,i.maxRowLength=n.maxRowLength,i.minRowLength=n.minRowLength;var a=t(64872);i.mod=a.mod,i.modHalf=a.modHalf;var o=t(96554);i.valObjectMeta=o.valObjectMeta,i.coerce=o.coerce,i.coerce2=o.coerce2,i.coerceFont=o.coerceFont,i.coercePattern=o.coercePattern,i.coerceHoverinfo=o.coerceHoverinfo,i.coerceSelectionMarkerOpacity=o.coerceSelectionMarkerOpacity,i.validate=o.validate;var u=t(41631);i.dateTime2ms=u.dateTime2ms,i.isDateTime=u.isDateTime,i.ms2DateTime=u.ms2DateTime,i.ms2DateTimeLocal=u.ms2DateTimeLocal,i.cleanDate=u.cleanDate,i.isJSDate=u.isJSDate,i.formatDate=u.formatDate,i.incrementMonth=u.incrementMonth,i.dateTick0=u.dateTick0,i.dfltRange=u.dfltRange,i.findExactDates=u.findExactDates,i.MIN_MS=u.MIN_MS,i.MAX_MS=u.MAX_MS;var p=t(65888);i.findBin=p.findBin,i.sorterAsc=p.sorterAsc,i.sorterDes=p.sorterDes,i.distinctVals=p.distinctVals,i.roundUp=p.roundUp,i.sort=p.sort,i.findIndexOfMin=p.findIndexOfMin,i.sortObjectKeys=t(78607);var c=t(80038);i.aggNums=c.aggNums,i.len=c.len,i.mean=c.mean,i.median=c.median,i.midRange=c.midRange,i.variance=c.variance,i.stdev=c.stdev,i.interp=c.interp;var x=t(35657);i.init2dArray=x.init2dArray,i.transposeRagged=x.transposeRagged,i.dot=x.dot,i.translationMatrix=x.translationMatrix,i.rotationMatrix=x.rotationMatrix,i.rotationXYMatrix=x.rotationXYMatrix,i.apply3DTransform=x.apply3DTransform,i.apply2DTransform=x.apply2DTransform,i.apply2DTransform2=x.apply2DTransform2,i.convertCssMatrix=x.convertCssMatrix,i.inverseTransformMatrix=x.inverseTransformMatrix;var g=t(26348);i.deg2rad=g.deg2rad,i.rad2deg=g.rad2deg,i.angleDelta=g.angleDelta,i.angleDist=g.angleDist,i.isFullCircle=g.isFullCircle,i.isAngleInsideSector=g.isAngleInsideSector,i.isPtInsideSector=g.isPtInsideSector,i.pathArc=g.pathArc,i.pathSector=g.pathSector,i.pathAnnulus=g.pathAnnulus;var f=t(99863);i.isLeftAnchor=f.isLeftAnchor,i.isCenterAnchor=f.isCenterAnchor,i.isRightAnchor=f.isRightAnchor,i.isTopAnchor=f.isTopAnchor,i.isMiddleAnchor=f.isMiddleAnchor,i.isBottomAnchor=f.isBottomAnchor;var y=t(87642);i.segmentsIntersect=y.segmentsIntersect,i.segmentDistance=y.segmentDistance,i.getTextLocation=y.getTextLocation,i.clearLocationCache=y.clearLocationCache,i.getVisibleSegment=y.getVisibleSegment,i.findPointOnPath=y.findPointOnPath;var v=t(1426);i.extendFlat=v.extendFlat,i.extendDeep=v.extendDeep,i.extendDeepAll=v.extendDeepAll,i.extendDeepNoArrays=v.extendDeepNoArrays;var m=t(47769);i.log=m.log,i.warn=m.warn,i.error=m.error;var _=t(30587);i.counterRegex=_.counter;var h=t(79990);i.throttle=h.throttle,i.throttleDone=h.done,i.clearThrottle=h.clear;var A=t(24401);function w(Z){var J={};for(var ee in Z)for(var re=Z[ee],ae=0;ae<re.length;ae++)J[re[ae]]=+ee;return J}i.getGraphDiv=A.getGraphDiv,i.isPlotDiv=A.isPlotDiv,i.removeElement=A.removeElement,i.addStyleRule=A.addStyleRule,i.addRelatedStyleRule=A.addRelatedStyleRule,i.deleteRelatedStyleRule=A.deleteRelatedStyleRule,i.getFullTransformMatrix=A.getFullTransformMatrix,i.getElementTransformMatrix=A.getElementTransformMatrix,i.getElementAndAncestors=A.getElementAndAncestors,i.equalDomRects=A.equalDomRects,i.clearResponsive=t(86367),i.preserveDrawingBuffer=t(45142),i.makeTraceGroups=t(77310),i._=t(15867),i.notifier=t(75046),i.filterUnique=t(75744),i.filterVisible=t(76756),i.pushUnique=t(75138),i.increment=t(39240),i.cleanNumber=t(95218),i.ensureNumber=function(Z){return T(Z)?(Z=Number(Z))>d||Z<s?e:Z:e},i.isIndex=function(Z,J){return!(J!==void 0&&Z>=J)&&T(Z)&&Z>=0&&Z%1==0},i.noop=t(64213),i.identity=t(23389),i.repeat=function(Z,J){for(var ee=new Array(J),re=0;re<J;re++)ee[re]=Z;return ee},i.swapAttrs=function(Z,J,ee,re){ee||(ee="x"),re||(re="y");for(var ae=0;ae<J.length;ae++){var oe=J[ae],ce=i.nestedProperty(Z,oe.replace("?",ee)),pe=i.nestedProperty(Z,oe.replace("?",re)),ve=ce.get();ce.set(pe.get()),pe.set(ve)}},i.raiseToTop=function(Z){Z.parentNode.appendChild(Z)},i.cancelTransition=function(Z){return Z.transition().duration(0)},i.constrain=function(Z,J,ee){return J>ee?Math.max(ee,Math.min(J,Z)):Math.max(J,Math.min(ee,Z))},i.bBoxIntersect=function(Z,J,ee){return ee=ee||0,Z.left<=J.right+ee&&J.left<=Z.right+ee&&Z.top<=J.bottom+ee&&J.top<=Z.bottom+ee},i.simpleMap=function(Z,J,ee,re,ae){for(var oe=Z.length,ce=new Array(oe),pe=0;pe<oe;pe++)ce[pe]=J(Z[pe],ee,re,ae);return ce},i.randstr=function Z(J,ee,re,ae){if(re||(re=16),ee===void 0&&(ee=24),ee<=0)return"0";var oe,ce,pe=Math.log(Math.pow(2,ee))/Math.log(re),ve="";for(oe=2;pe===1/0;oe*=2)pe=Math.log(Math.pow(2,ee/oe))/Math.log(re)*oe;var we=pe-Math.floor(pe);for(oe=0;oe<Math.floor(pe);oe++)ve=Math.floor(Math.random()*re).toString(re)+ve;we&&(ce=Math.pow(re,we),ve=Math.floor(Math.random()*ce).toString(re)+ve);var xe=parseInt(ve,re);return J&&J[ve]||xe!==1/0&&xe>=Math.pow(2,ee)?ae>10?(i.warn("randstr failed uniqueness"),ve):Z(J,ee,re,(ae||0)+1):ve},i.OptionControl=function(Z,J){Z||(Z={}),J||(J="opt");var ee={optionList:[],_newoption:function(re){re[J]=Z,ee[re.name]=re,ee.optionList.push(re)}};return ee["_"+J]=Z,ee},i.smooth=function(Z,J){if((J=Math.round(J)||0)<2)return Z;var ee,re,ae,oe,ce=Z.length,pe=2*ce,ve=2*J-1,we=new Array(ve),xe=new Array(ce);for(ee=0;ee<ve;ee++)we[ee]=(1-Math.cos(Math.PI*(ee+1)/J))/(2*J);for(ee=0;ee<ce;ee++){for(oe=0,re=0;re<ve;re++)(ae=ee+re+1-J)<-ce?ae-=pe*Math.round(ae/pe):ae>=pe&&(ae-=pe*Math.floor(ae/pe)),ae<0?ae=-1-ae:ae>=ce&&(ae=pe-1-ae),oe+=Z[ae]*we[re];xe[ee]=oe}return xe},i.syncOrAsync=function(Z,J,ee){var re;function ae(){return i.syncOrAsync(Z,J,ee)}for(;Z.length;)if((re=(0,Z.splice(0,1)[0])(J))&&re.then)return re.then(ae);return ee&&ee(J)},i.stripTrailingSlash=function(Z){return Z.substr(-1)==="/"?Z.substr(0,Z.length-1):Z},i.noneOrAll=function(Z,J,ee){if(Z){var re,ae=!1,oe=!0;for(re=0;re<ee.length;re++)Z[ee[re]]!=null?ae=!0:oe=!1;if(ae&&!oe)for(re=0;re<ee.length;re++)Z[ee[re]]=J[ee[re]]}},i.mergeArray=function(Z,J,ee,re){var ae=typeof re=="function";if(i.isArrayOrTypedArray(Z))for(var oe=Math.min(Z.length,J.length),ce=0;ce<oe;ce++){var pe=Z[ce];J[ce][ee]=ae?re(pe):pe}},i.mergeArrayCastPositive=function(Z,J,ee){return i.mergeArray(Z,J,ee,function(re){var ae=+re;return isFinite(ae)&&ae>0?ae:0})},i.fillArray=function(Z,J,ee,re){if(re=re||i.identity,i.isArrayOrTypedArray(Z))for(var ae=0;ae<J.length;ae++)J[ae][ee]=re(Z[ae])},i.castOption=function(Z,J,ee,re){re=re||i.identity;var ae=i.nestedProperty(Z,ee).get();return i.isArrayOrTypedArray(ae)?Array.isArray(J)&&i.isArrayOrTypedArray(ae[J[0]])?re(ae[J[0]][J[1]]):re(ae[J]):ae},i.extractOption=function(Z,J,ee,re){if(ee in Z)return Z[ee];var ae=i.nestedProperty(J,re).get();return Array.isArray(ae)?void 0:ae},i.tagSelected=function(Z,J,ee){var re,ae,oe=J.selectedpoints,ce=J._indexToPoints;ce&&(re=w(ce));for(var pe=0;pe<oe.length;pe++){var ve=oe[pe];if(i.isIndex(ve)||i.isArrayOrTypedArray(ve)&&i.isIndex(ve[0])&&i.isIndex(ve[1])){var we=re?re[ve]:ve,xe=ee?ee[we]:we;(ae=xe)!==void 0&&ae<Z.length&&(Z[xe].selected=1)}}},i.selIndices2selPoints=function(Z){var J=Z.selectedpoints,ee=Z._indexToPoints;if(ee){for(var re=w(ee),ae=[],oe=0;oe<J.length;oe++){var ce=J[oe];if(i.isIndex(ce)){var pe=re[ce];i.isIndex(pe)&&ae.push(pe)}}return ae}return J},i.getTargetArray=function(Z,J){var ee=J.target;if(typeof ee=="string"&&ee){var re=i.nestedProperty(Z,ee).get();return!!Array.isArray(re)&&re}return!!Array.isArray(ee)&&ee},i.minExtend=function(Z,J){var ee={};typeof J!="object"&&(J={});var re,ae,oe,ce=Object.keys(Z);for(re=0;re<ce.length;re++)oe=Z[ae=ce[re]],ae.charAt(0)!=="_"&&typeof oe!="function"&&(ae==="module"?ee[ae]=oe:Array.isArray(oe)?ee[ae]=ae==="colorscale"?oe.slice():oe.slice(0,3):i.isTypedArray(oe)?ee[ae]=oe.subarray(0,3):ee[ae]=oe&&typeof oe=="object"?i.minExtend(Z[ae],J[ae]):oe);for(ce=Object.keys(J),re=0;re<ce.length;re++)typeof(oe=J[ae=ce[re]])=="object"&&ae in ee&&typeof ee[ae]=="object"||(ee[ae]=oe);return ee},i.titleCase=function(Z){return Z.charAt(0).toUpperCase()+Z.substr(1)},i.containsAny=function(Z,J){for(var ee=0;ee<J.length;ee++)if(Z.indexOf(J[ee])!==-1)return!0;return!1},i.isIE=function(){return window.navigator.msSaveBlob!==void 0};var E=/Version\/[\d\.]+.*Safari/;i.isSafari=function(){return E.test(window.navigator.userAgent)};var L=/iPad|iPhone|iPod/;i.isIOS=function(){return L.test(window.navigator.userAgent)};var C=/Firefox\/(\d+)\.\d+/;i.getFirefoxVersion=function(){var Z=C.exec(window.navigator.userAgent);if(Z&&Z.length===2){var J=parseInt(Z[1]);if(!isNaN(J))return J}return null},i.isD3Selection=function(Z){return Z instanceof S.selection},i.ensureSingle=function(Z,J,ee,re){var ae=Z.select(J+(ee?"."+ee:""));if(ae.size())return ae;var oe=Z.append(J);return ee&&oe.classed(ee,!0),re&&oe.call(re),oe},i.ensureSingleById=function(Z,J,ee,re){var ae=Z.select(J+"#"+ee);if(ae.size())return ae;var oe=Z.append(J).attr("id",ee);return re&&oe.call(re),oe},i.objectFromPath=function(Z,J){for(var ee,re=Z.split("."),ae=ee={},oe=0;oe<re.length;oe++){var ce=re[oe],pe=null,ve=re[oe].match(/(.*)\[([0-9]+)\]/);ve?(ce=ve[1],pe=ve[2],ee=ee[ce]=[],oe===re.length-1?ee[pe]=J:ee[pe]={},ee=ee[pe]):(oe===re.length-1?ee[ce]=J:ee[ce]={},ee=ee[ce])}return ae};var P=/^([^\[\.]+)\.(.+)?/,D=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;i.expandObjectPaths=function(Z){var J,ee,re,ae,oe,ce,pe;if(typeof Z=="object"&&!Array.isArray(Z))for(ee in Z)Z.hasOwnProperty(ee)&&((J=ee.match(P))?(ae=Z[ee],re=J[1],delete Z[ee],Z[re]=i.extendDeepNoArrays(Z[re]||{},i.objectFromPath(ee,i.expandObjectPaths(ae))[re])):(J=ee.match(D))?(ae=Z[ee],re=J[1],oe=parseInt(J[2]),delete Z[ee],Z[re]=Z[re]||[],J[3]==="."?(pe=J[4],ce=Z[re][oe]=Z[re][oe]||{},i.extendDeepNoArrays(ce,i.objectFromPath(pe,i.expandObjectPaths(ae)))):Z[re][oe]=i.expandObjectPaths(ae)):Z[ee]=i.expandObjectPaths(Z[ee]));return Z},i.numSeparate=function(Z,J,ee){if(ee||(ee=!1),typeof J!="string"||J.length===0)throw new Error("Separator string required for formatting!");typeof Z=="number"&&(Z=String(Z));var re=/(\d+)(\d{3})/,ae=J.charAt(0),oe=J.charAt(1),ce=Z.split("."),pe=ce[0],ve=ce.length>1?ae+ce[1]:"";if(oe&&(ce.length>1||pe.length>4||ee))for(;re.test(pe);)pe=pe.replace(re,"$1"+oe+"$2");return pe+ve},i.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var G=/^\w*$/;i.templateString=function(Z,J){var ee={};return Z.replace(i.TEMPLATE_STRING_REGEX,function(re,ae){var oe;return G.test(ae)?oe=J[ae]:(ee[ae]=ee[ae]||i.nestedProperty(J,ae).get,oe=ee[ae]()),i.isValidTextValue(oe)?oe:""})};var I={max:10,count:0,name:"hovertemplate"};i.hovertemplateString=function(){return q.apply(I,arguments)};var H={max:10,count:0,name:"texttemplate"};i.texttemplateString=function(){return q.apply(H,arguments)};var N=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/,F={max:10,count:0,name:"texttemplate",parseMultDiv:!0};i.texttemplateStringForShapes=function(){return q.apply(F,arguments)};var V=/^[:|\|]/;function q(Z,J,ee){var re=this,ae=arguments;J||(J={});var oe={};return Z.replace(i.TEMPLATE_STRING_REGEX,function(ce,pe,ve){var we=pe==="_xother"||pe==="_yother",xe=pe==="_xother_"||pe==="_yother_",ge=pe==="xother_"||pe==="yother_",Oe=pe==="xother"||pe==="yother"||we||ge||xe,Ae=pe;(we||xe)&&(Ae=Ae.substring(1)),(ge||xe)&&(Ae=Ae.substring(0,Ae.length-1));var Te,se,le,ne=null,me=null;if(re.parseMultDiv){var Ee=function(he){var ke=he.match(N);return ke?{key:ke[1],op:ke[2],number:Number(ke[3])}:{key:he,op:null,number:null}}(Ae);Ae=Ee.key,ne=Ee.op,me=Ee.number}if(Oe){if((Te=J[Ae])===void 0)return""}else for(le=3;le<ae.length;le++)if(se=ae[le]){if(se.hasOwnProperty(Ae)){Te=se[Ae];break}if(G.test(Ae)||(Te=i.nestedProperty(se,Ae).get(),(Te=oe[Ae]||i.nestedProperty(se,Ae).get())&&(oe[Ae]=Te)),Te!==void 0)break}if(Te!==void 0&&(ne==="*"&&(Te*=me),ne==="/"&&(Te/=me)),Te===void 0&&re)return re.count<re.max&&(i.warn("Variable '"+Ae+"' in "+re.name+" could not be found!"),Te=ce),re.count===re.max&&i.warn("Too many "+re.name+" warnings - additional warnings will be suppressed"),re.count++,ce;if(ve){var be;if(ve[0]===":"&&(Te=(be=ee?ee.numberFormat:i.numberFormat)(ve.replace(V,""))(Te)),ve[0]==="|"){be=ee?ee.timeFormat:k;var De=i.dateTime2ms(Te);Te=i.formatDate(De,ve.replace(V,""),!1,be)}}else{var Ue=Ae+"Label";J.hasOwnProperty(Ue)&&(Te=J[Ue])}return Oe&&(Te="("+Te+")",(we||xe)&&(Te=" "+Te),(ge||xe)&&(Te+=" ")),Te})}i.subplotSort=function(Z,J){for(var ee=Math.min(Z.length,J.length)+1,re=0,ae=0,oe=0;oe<ee;oe++){var ce=Z.charCodeAt(oe)||0,pe=J.charCodeAt(oe)||0,ve=ce>=48&&ce<=57,we=pe>=48&&pe<=57;if(ve&&(re=10*re+ce-48),we&&(ae=10*ae+pe-48),!ve||!we){if(re!==ae)return re-ae;if(ce!==pe)return ce-pe}}return ae-re};var te=2e9;i.seedPseudoRandom=function(){te=2e9},i.pseudoRandom=function(){var Z=te;return te=(69069*te+1)%4294967296,Math.abs(te-Z)<429496729?i.pseudoRandom():te/4294967296},i.fillText=function(Z,J,ee){var re=Array.isArray(ee)?function(ce){ee.push(ce)}:function(ce){ee.text=ce},ae=i.extractOption(Z,J,"htx","hovertext");if(i.isValidTextValue(ae))return re(ae);var oe=i.extractOption(Z,J,"tx","text");return i.isValidTextValue(oe)?re(oe):void 0},i.isValidTextValue=function(Z){return Z||Z===0},i.formatPercent=function(Z,J){J=J||0;for(var ee=(Math.round(100*Z*Math.pow(10,J))*Math.pow(.1,J)).toFixed(J)+"%",re=0;re<J;re++)ee.indexOf(".")!==-1&&(ee=(ee=ee.replace("0%","%")).replace(".%","%"));return ee},i.isHidden=function(Z){var J=window.getComputedStyle(Z).display;return!J||J==="none"},i.strTranslate=function(Z,J){return Z||J?"translate("+Z+","+J+")":""},i.strRotate=function(Z){return Z?"rotate("+Z+")":""},i.strScale=function(Z){return Z!==1?"scale("+Z+")":""},i.getTextTransform=function(Z){var J=Z.noCenter,ee=Z.textX,re=Z.textY,ae=Z.targetX,oe=Z.targetY,ce=Z.anchorX||0,pe=Z.anchorY||0,ve=Z.rotate,we=Z.scale;return we?we>1&&(we=1):we=0,i.strTranslate(ae-we*(ee+ce),oe-we*(re+pe))+i.strScale(we)+(ve?"rotate("+ve+(J?"":" "+ee+" "+re)+")":"")},i.setTransormAndDisplay=function(Z,J){Z.attr("transform",i.getTextTransform(J)),Z.style("display",J.scale?null:"none")},i.ensureUniformFontSize=function(Z,J){var ee=i.extendFlat({},J);return ee.size=Math.max(J.size,Z._fullLayout.uniformtext.minsize||0),ee},i.join2=function(Z,J,ee){var re=Z.length;return re>1?Z.slice(0,-1).join(J)+ee+Z[re-1]:Z.join(J)},i.bigFont=function(Z){return Math.round(1.2*Z)};var $=i.getFirefoxVersion(),W=$!==null&&$<86;i.getPositionFromD3Event=function(){return W?[S.event.layerX,S.event.layerY]:[S.event.offsetX,S.event.offsetY]}},41965:function(Q){Q.exports=function(z){return window&&window.process&&window.process.versions?Object.prototype.toString.call(z)==="[object Object]":Object.prototype.toString.call(z)==="[object Object]"&&Object.getPrototypeOf(z).hasOwnProperty("hasOwnProperty")}},66636:function(Q,z,t){var S=t(65487),k=/^\w*$/;Q.exports=function(l,T,b,d){var s,e,i;b=b||"name",d=d||"value";var r={};T&&T.length?(i=S(l,T),e=i.get()):e=l,T=T||"";var n={};if(e)for(s=0;s<e.length;s++)n[e[s][b]]=s;var a=k.test(d),o={set:function(u,p){var c=p===null?4:0;if(!e){if(!i||c===4)return;e=[],i.set(e)}var x=n[u];if(x===void 0){if(c===4)return;c|=3,x=e.length,n[u]=x}else p!==(a?e[x][d]:S(e[x],d).get())&&(c|=2);var g=e[x]=e[x]||{};return g[b]=u,a?g[d]=p:S(g,d).set(p),p!==null&&(c&=-5),r[x]=r[x]|c,o},get:function(u){if(e){var p=n[u];return p===void 0?void 0:a?e[p][d]:S(e[p],d).get()}},rename:function(u,p){var c=n[u];return c===void 0||(r[c]=1|r[c],n[p]=c,delete n[u],e[c][b]=p),o},remove:function(u){var p=n[u];if(p===void 0)return o;var c=e[p];if(Object.keys(c).length>2)return r[p]=2|r[p],o.set(u,null);if(a){for(s=p;s<e.length;s++)r[s]=3|r[s];for(s=p;s<e.length;s++)n[e[s][b]]--;e.splice(p,1),delete n[u]}else S(c,d).set(null),r[p]=6|r[p];return o},constructUpdate:function(){for(var u,p,c={},x=Object.keys(r),g=0;g<x.length;g++)p=x[g],u=T+"["+p+"]",e[p]?(1&r[p]&&(c[u+"."+b]=e[p][b]),2&r[p]&&(c[u+"."+d]=a?4&r[p]?null:e[p][d]:4&r[p]?null:S(e[p],d).get())):c[u]=null;return c}};return o}},15867:function(Q,z,t){var S=t(73972);Q.exports=function(k,l){for(var T=k._context.locale,b=0;b<2;b++){for(var d=k._context.locales,s=0;s<2;s++){var e=(d[T]||{}).dictionary;if(e){var i=e[l];if(i)return i}d=S.localeRegistry}var r=T.split("-")[0];if(r===T)break;T=r}return l}},47769:function(Q,z,t){var S=t(72075).dfltConfig,k=t(75046),l=Q.exports={};l.log=function(){var T;if(S.logging>1){var b=["LOG:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.trace.apply(console,b)}if(S.notifyOnLogging>1){var d=[];for(T=0;T<arguments.length;T++)d.push(arguments[T]);k(d.join("<br>"),"long")}},l.warn=function(){var T;if(S.logging>0){var b=["WARN:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.trace.apply(console,b)}if(S.notifyOnLogging>0){var d=[];for(T=0;T<arguments.length;T++)d.push(arguments[T]);k(d.join("<br>"),"stick")}},l.error=function(){var T;if(S.logging>0){var b=["ERROR:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.error.apply(console,b)}if(S.notifyOnLogging>0){var d=[];for(T=0;T<arguments.length;T++)d.push(arguments[T]);k(d.join("<br>"),"stick")}}},77310:function(Q,z,t){var S=t(39898);Q.exports=function(k,l,T){var b=k.selectAll("g."+T.replace(/\s/g,".")).data(l,function(s){return s[0].trace.uid});b.exit().remove(),b.enter().append("g").attr("class",T),b.order();var d=k.classed("rangeplot")?"nodeRangePlot3":"node3";return b.each(function(s){s[0][d]=S.select(this)}),b}},35657:function(Q,z,t){var S=t(79576);z.init2dArray=function(k,l){for(var T=new Array(k),b=0;b<k;b++)T[b]=new Array(l);return T},z.transposeRagged=function(k){var l,T,b=0,d=k.length;for(l=0;l<d;l++)b=Math.max(b,k[l].length);var s=new Array(b);for(l=0;l<b;l++)for(s[l]=new Array(d),T=0;T<d;T++)s[l][T]=k[T][l];return s},z.dot=function(k,l){if(!k.length||!l.length||k.length!==l.length)return null;var T,b,d=k.length;if(k[0].length)for(T=new Array(d),b=0;b<d;b++)T[b]=z.dot(k[b],l);else if(l[0].length){var s=z.transposeRagged(l);for(T=new Array(s.length),b=0;b<s.length;b++)T[b]=z.dot(k,s[b])}else for(T=0,b=0;b<d;b++)T+=k[b]*l[b];return T},z.translationMatrix=function(k,l){return[[1,0,k],[0,1,l],[0,0,1]]},z.rotationMatrix=function(k){var l=k*Math.PI/180;return[[Math.cos(l),-Math.sin(l),0],[Math.sin(l),Math.cos(l),0],[0,0,1]]},z.rotationXYMatrix=function(k,l,T){return z.dot(z.dot(z.translationMatrix(l,T),z.rotationMatrix(k)),z.translationMatrix(-l,-T))},z.apply3DTransform=function(k){return function(){var l=arguments,T=arguments.length===1?l[0]:[l[0],l[1],l[2]||0];return z.dot(k,[T[0],T[1],T[2],1]).slice(0,3)}},z.apply2DTransform=function(k){return function(){var l=arguments;l.length===3&&(l=l[0]);var T=arguments.length===1?l[0]:[l[0],l[1]];return z.dot(k,[T[0],T[1],1]).slice(0,2)}},z.apply2DTransform2=function(k){var l=z.apply2DTransform(k);return function(T){return l(T.slice(0,2)).concat(l(T.slice(2,4)))}},z.convertCssMatrix=function(k){if(k){var l=k.length;if(l===16)return k;if(l===6)return[k[0],k[1],0,0,k[2],k[3],0,0,0,0,1,0,k[4],k[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},z.inverseTransformMatrix=function(k){var l=[];return S.invert(l,k),[[l[0],l[1],l[2],l[3]],[l[4],l[5],l[6],l[7]],[l[8],l[9],l[10],l[11]],[l[12],l[13],l[14],l[15]]]}},64872:function(Q){Q.exports={mod:function(z,t){var S=z%t;return S<0?S+t:S},modHalf:function(z,t){return Math.abs(z)>t/2?z-Math.round(z/t)*t:z}}},65487:function(Q,z,t){var S=t(92770),k=t(73627).isArrayOrTypedArray;function l(r,n){return function(){var a,o,u,p,c,x=r;for(p=0;p<n.length-1;p++){if((a=n[p])===-1){for(o=!0,u=[],c=0;c<x.length;c++)u[c]=l(x[c],n.slice(p+1))(),u[c]!==u[0]&&(o=!1);return o?u[0]:u}if(typeof a=="number"&&!k(x)||typeof(x=x[a])!="object"||x===null)return}if(typeof x=="object"&&x!==null&&(u=x[n[p]])!==null)return u}}Q.exports=function(r,n){if(S(n))n=String(n);else if(typeof n!="string"||n.substr(n.length-4)==="[-1]")throw"bad property string";for(var a,o,u,p=0,c=n.split(".");p<c.length;){if(a=String(c[p]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(a[1])c[p]=a[1];else{if(p!==0)throw"bad property string";c.splice(0,1)}for(o=a[2].substr(1,a[2].length-2).split("]["),u=0;u<o.length;u++)p++,c.splice(p,0,Number(o[u]))}p++}return typeof r!="object"?function(x,g,f){return{set:function(){throw"bad container"},get:function(){},astr:g,parts:f,obj:x}}(r,n,c):{set:d(r,c,n),get:l(r,c),astr:n,parts:c,obj:r}};var T=/(^|\.)args\[/;function b(r,n){return r===void 0||r===null&&!n.match(T)}function d(r,n,a){return function(o){var u,p,c=r,x="",g=b(o,a);for(p=0;p<n.length-1;p++){if(typeof(u=n[p])=="number"&&!k(c))throw"array index but container is not an array";if(u===-1){if(g=!e(c,n.slice(p+1),o,a))break;return}if(!i(c,u,n[p+1],g))break;if(typeof(c=c[u])!="object"||c===null)throw"container is not an object";x=s(x,u)}if(g){if(p===n.length-1&&(delete c[n[p]],Array.isArray(c)&&+n[p]==c.length-1))for(;c.length&&c[c.length-1]===void 0;)c.pop()}else c[n[p]]=o}}function s(r,n){var a=n;return S(n)?a="["+n+"]":r&&(a="."+n),r+a}function e(r,n,a,o){var u,p=k(a),c=!0,x=a,g=o.replace("-1",0),f=!p&&b(a,g),y=n[0];for(u=0;u<r.length;u++)g=o.replace("-1",u),p&&(f=b(x=a[u%a.length],g)),f&&(c=!1),i(r,u,y,f)&&d(r[u],n,o.replace("-1",u))(x);return c}function i(r,n,a,o){if(r[n]===void 0){if(o)return!1;r[n]=typeof a=="number"?[]:{}}return!0}},64213:function(Q){Q.exports=function(){}},75046:function(Q,z,t){var S=t(39898),k=t(92770),l=[];Q.exports=function(T,b){if(l.indexOf(T)===-1){l.push(T);var d=1e3;k(b)?d=b:b==="long"&&(d=3e3);var s=S.select("body").selectAll(".plotly-notifier").data([0]);s.enter().append("div").classed("plotly-notifier",!0),s.selectAll(".notifier-note").data(l).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(i){var r=S.select(this);r.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){r.transition().call(e)});for(var n=r.append("p"),a=i.split(/<br\s*\/?>/g),o=0;o<a.length;o++)o&&n.append("br"),n.append("span").text(a[o]);b==="stick"?r.transition().duration(350).style("opacity",1):r.transition().duration(700).style("opacity",1).transition().delay(d).call(e)})}function e(i){i.duration(700).style("opacity",0).each("end",function(r){var n=l.indexOf(r);n!==-1&&l.splice(n,1),S.select(this).remove()})}}},39918:function(Q,z,t){var S=t(6964),k="data-savedcursor";Q.exports=function(l,T){var b=l.attr(k);if(T){if(!b){for(var d=(l.attr("class")||"").split(" "),s=0;s<d.length;s++){var e=d[s];e.indexOf("cursor-")===0&&l.attr(k,e.substr(7)).classed(e,!1)}l.attr(k)||l.attr(k,"!!")}S(l,T)}else b&&(l.attr(k,null),b==="!!"?S(l):S(l,b))}},61082:function(Q,z,t){var S=t(35657).dot,k=t(50606).BADNUM,l=Q.exports={};l.tester=function(T){var b,d=T.slice(),s=d[0][0],e=s,i=d[0][1],r=i;for(d[d.length-1][0]===d[0][0]&&d[d.length-1][1]===d[0][1]||d.push(d[0]),b=1;b<d.length;b++)s=Math.min(s,d[b][0]),e=Math.max(e,d[b][0]),i=Math.min(i,d[b][1]),r=Math.max(r,d[b][1]);var n,a=!1;d.length===5&&(d[0][0]===d[1][0]?d[2][0]===d[3][0]&&d[0][1]===d[3][1]&&d[1][1]===d[2][1]&&(a=!0,n=function(p){return p[0]===d[0][0]}):d[0][1]===d[1][1]&&d[2][1]===d[3][1]&&d[0][0]===d[3][0]&&d[1][0]===d[2][0]&&(a=!0,n=function(p){return p[1]===d[0][1]}));var o=!0,u=d[0];for(b=1;b<d.length;b++)if(u[0]!==d[b][0]||u[1]!==d[b][1]){o=!1;break}return{xmin:s,xmax:e,ymin:i,ymax:r,pts:d,contains:a?function(p,c){var x=p[0],g=p[1];return!(x===k||x<s||x>e||g===k||g<i||g>r||c&&n(p))}:function(p,c){var x=p[0],g=p[1];if(x===k||x<s||x>e||g===k||g<i||g>r)return!1;var f,y,v,m,_,h=d.length,A=d[0][0],w=d[0][1],E=0;for(f=1;f<h;f++)if(y=A,v=w,A=d[f][0],w=d[f][1],!(x<(m=Math.min(y,A))||x>Math.max(y,A)||g>Math.max(v,w)))if(g<Math.min(v,w))x!==m&&E++;else{if(g===(_=A===y?g:v+(x-y)*(w-v)/(A-y)))return f!==1||!c;g<=_&&x!==m&&E++}return E%2==1},isRect:a,degenerate:o}},l.isSegmentBent=function(T,b,d,s){var e,i,r,n=T[b],a=[T[d][0]-n[0],T[d][1]-n[1]],o=S(a,a),u=Math.sqrt(o),p=[-a[1]/u,a[0]/u];for(e=b+1;e<d;e++)if(i=[T[e][0]-n[0],T[e][1]-n[1]],(r=S(i,a))<0||r>o||Math.abs(S(i,p))>s)return!0;return!1},l.filter=function(T,b){var d=[T[0]],s=0,e=0;function i(r){T.push(r);var n=d.length,a=s;d.splice(e+1);for(var o=a+1;o<T.length;o++)(o===T.length-1||l.isSegmentBent(T,a,o+1,b))&&(d.push(T[o]),d.length<n-2&&(s=o,e=d.length-1),a=o)}return T.length>1&&i(T.pop()),{addPt:i,raw:T,filtered:d}}},79749:function(Q,z,t){var S=t(58617),k=t(98580);Q.exports=function(l,T,b){var d=l._fullLayout,s=!0;return d._glcanvas.each(function(e){if(e.regl)e.regl.preloadCachedCode(b);else if(!e.pick||d._has("parcoords")){try{e.regl=k({canvas:this,attributes:{antialias:!e.pick,preserveDrawingBuffer:!0},pixelRatio:l._context.plotGlPixelRatio||t.g.devicePixelRatio,extensions:T||[],cachedCode:b||{}})}catch{s=!1}e.regl||(s=!1),s&&this.addEventListener("webglcontextlost",function(i){l&&l.emit&&l.emit("plotly_webglcontextlost",{event:i,layer:e.key})},!1)}}),s||S({container:d._glcontainer.node()}),s}},45142:function(Q,z,t){var S=t(92770),k=t(35791);Q.exports=function(l){var T;if(typeof(T=l&&l.hasOwnProperty("userAgent")?l.userAgent:function(){var n;return typeof navigator<"u"&&(n=navigator.userAgent),n&&n.headers&&typeof n.headers["user-agent"]=="string"&&(n=n.headers["user-agent"]),n}())!="string")return!0;var b=k({ua:{headers:{"user-agent":T}},tablet:!0,featureDetect:!1});if(!b){for(var d=T.split(" "),s=1;s<d.length;s++)if(d[s].indexOf("Safari")!==-1)for(var e=s-1;e>-1;e--){var i=d[e];if(i.substr(0,8)==="Version/"){var r=i.substr(8).split(".")[0];if(S(r)&&(r=+r),r>=13)return!0}}}return b}},75138:function(Q){Q.exports=function(z,t){if(t instanceof RegExp){for(var S=t.toString(),k=0;k<z.length;k++)if(z[k]instanceof RegExp&&z[k].toString()===S)return z;z.push(t)}else!t&&t!==0||z.indexOf(t)!==-1||z.push(t);return z}},10847:function(Q,z,t){var S=t(71828),k=t(72075).dfltConfig,l={add:function(T,b,d,s,e){var i,r;T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},r=T.undoQueue.index,T.autoplay?T.undoQueue.inSequence||(T.autoplay=!1):(!T.undoQueue.sequence||T.undoQueue.beginSequence?(i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},T.undoQueue.queue.splice(r,T.undoQueue.queue.length-r,i),T.undoQueue.index+=1):i=T.undoQueue.queue[r-1],T.undoQueue.beginSequence=!1,i&&(i.undo.calls.unshift(b),i.undo.args.unshift(d),i.redo.calls.push(s),i.redo.args.push(e)),T.undoQueue.queue.length>k.queueLength&&(T.undoQueue.queue.shift(),T.undoQueue.index--))},startSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!0,T.undoQueue.beginSequence=!0},stopSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!1,T.undoQueue.beginSequence=!1},undo:function(T){var b,d;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index<=0)){for(T.undoQueue.index--,b=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,d=0;d<b.undo.calls.length;d++)l.plotDo(T,b.undo.calls[d],b.undo.args[d]);T.undoQueue.inSequence=!1,T.autoplay=!1}},redo:function(T){var b,d;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index>=T.undoQueue.queue.length)){for(b=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,d=0;d<b.redo.calls.length;d++)l.plotDo(T,b.redo.calls[d],b.redo.args[d]);T.undoQueue.inSequence=!1,T.autoplay=!1,T.undoQueue.index++}},plotDo:function(T,b,d){T.autoplay=!0,d=function(s,e){for(var i,r=[],n=0;n<e.length;n++)i=e[n],r[n]=i===s?i:typeof i=="object"?Array.isArray(i)?S.extendDeep([],i):S.extendDeepAll({},i):i;return r}(T,d),b.apply(null,d)}};Q.exports=l},30587:function(Q,z){z.counter=function(t,S,k,l){var T=(S||"")+(k?"":"$"),b=l===!1?"":"^";return t==="xy"?new RegExp(b+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+T):new RegExp(b+t+"([2-9]|[1-9][0-9]+)?"+T)}},6962:function(Q){var z=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,t=/^[^\.\[\]]+$/;Q.exports=function(S,k){for(;k;){var l=S.match(z);if(l)S=l[1];else{if(!S.match(t))throw new Error("bad relativeAttr call:"+[S,k]);S=""}if(k.charAt(0)!=="^")break;k=k.slice(1)}return S&&k.charAt(0)!=="["?S+"."+k:S+k}},51332:function(Q,z,t){var S=t(73627).isArrayOrTypedArray,k=t(41965);Q.exports=function l(T,b){for(var d in b){var s=b[d],e=T[d];if(e!==s)if(d.charAt(0)==="_"||typeof s=="function"){if(d in T)continue;T[d]=s}else if(S(s)&&S(e)&&k(s[0])){if(d==="customdata"||d==="ids")continue;for(var i=Math.min(s.length,e.length),r=0;r<i;r++)e[r]!==s[r]&&k(s[r])&&k(e[r])&&l(e[r],s[r])}else k(s)&&k(e)&&(l(e,s),Object.keys(e).length||delete T[d])}}},65888:function(Q,z,t){var S=t(92770),k=t(47769),l=t(23389),T=t(50606).BADNUM,b=1e-9;function d(r,n){return r<n}function s(r,n){return r<=n}function e(r,n){return r>n}function i(r,n){return r>=n}z.findBin=function(r,n,a){if(S(n.start))return a?Math.ceil((r-n.start)/n.size-b)-1:Math.floor((r-n.start)/n.size+b);var o,u,p=0,c=n.length,x=0,g=c>1?(n[c-1]-n[0])/(c-1):1;for(u=g>=0?a?d:s:a?i:e,r+=g*b*(a?-1:1)*(g>=0?1:-1);p<c&&x++<100;)u(n[o=Math.floor((p+c)/2)],r)?p=o+1:c=o;return x>90&&k.log("Long binary search..."),p-1},z.sorterAsc=function(r,n){return r-n},z.sorterDes=function(r,n){return n-r},z.distinctVals=function(r){var n,a=r.slice();for(a.sort(z.sorterAsc),n=a.length-1;n>-1&&a[n]===T;n--);for(var o,u=a[n]-a[0]||1,p=u/(n||1)/1e4,c=[],x=0;x<=n;x++){var g=a[x],f=g-o;o===void 0?(c.push(g),o=g):f>p&&(u=Math.min(u,f),c.push(g),o=g)}return{vals:c,minDiff:u}},z.roundUp=function(r,n,a){for(var o,u=0,p=n.length-1,c=0,x=a?0:1,g=a?1:0,f=a?Math.ceil:Math.floor;u<p&&c++<100;)n[o=f((u+p)/2)]<=r?u=o+x:p=o-g;return n[u]},z.sort=function(r,n){for(var a=0,o=0,u=1;u<r.length;u++){var p=n(r[u],r[u-1]);if(p<0?a=1:p>0&&(o=1),a&&o)return r.sort(n)}return o?r:r.reverse()},z.findIndexOfMin=function(r,n){n=n||l;for(var a,o=1/0,u=0;u<r.length;u++){var p=n(r[u]);p<o&&(o=p,a=u)}return a}},6964:function(Q){Q.exports=function(z,t){(z.attr("class")||"").split(" ").forEach(function(S){S.indexOf("cursor-")===0&&z.classed(S,!1)}),t&&z.classed("cursor-"+t,!0)}},58617:function(Q,z,t){var S=t(7901),k=function(){};Q.exports=function(l){for(var T in l)typeof l[T]=="function"&&(l[T]=k);l.destroy=function(){l.container.parentNode.removeChild(l.container)};var b=document.createElement("div");b.className="no-webgl",b.style.cursor="pointer",b.style.fontSize="24px",b.style.color=S.defaults[0],b.style.position="absolute",b.style.left=b.style.top="0px",b.style.width=b.style.height="100%",b.style["background-color"]=S.lightLine,b.style["z-index"]=30;var d=document.createElement("p");return d.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",d.style.position="relative",d.style.top="50%",d.style.left="50%",d.style.height="30%",d.style.width="50%",d.style.margin="-15% 0 0 -25%",b.appendChild(d),l.container.appendChild(b),l.container.style.background="#FFFFFF",l.container.onclick=function(){window.open("https://get.webgl.org")},!1}},78607:function(Q){Q.exports=function(z){return Object.keys(z).sort()}},80038:function(Q,z,t){var S=t(92770),k=t(73627).isArrayOrTypedArray;z.aggNums=function(l,T,b,d){var s,e;if((!d||d>b.length)&&(d=b.length),S(T)||(T=!1),k(b[0])){for(e=new Array(d),s=0;s<d;s++)e[s]=z.aggNums(l,T,b[s]);b=e}for(s=0;s<d;s++)S(T)?S(b[s])&&(T=l(+T,+b[s])):T=b[s];return T},z.len=function(l){return z.aggNums(function(T){return T+1},0,l)},z.mean=function(l,T){return T||(T=z.len(l)),z.aggNums(function(b,d){return b+d},0,l)/T},z.midRange=function(l){if(l!==void 0&&l.length!==0)return(z.aggNums(Math.max,null,l)+z.aggNums(Math.min,null,l))/2},z.variance=function(l,T,b){return T||(T=z.len(l)),S(b)||(b=z.mean(l,T)),z.aggNums(function(d,s){return d+Math.pow(s-b,2)},0,l)/T},z.stdev=function(l,T,b){return Math.sqrt(z.variance(l,T,b))},z.median=function(l){var T=l.slice().sort();return z.interp(T,.5)},z.interp=function(l,T){if(!S(T))throw"n should be a finite number";if((T=T*l.length-.5)<0)return l[0];if(T>l.length-1)return l[l.length-1];var b=T%1;return b*l[Math.ceil(T)]+(1-b)*l[Math.floor(T)]}},78614:function(Q,z,t){var S=t(25075);Q.exports=function(k){return k?S(k):[0,0,0,1]}},3883:function(Q,z,t){var S=t(32396),k=t(91424),l=t(71828),T=null;Q.exports=function(){if(T!==null)return T;T=!1;var b=l.isIE()||l.isSafari()||l.isIOS();if(window.navigator.userAgent&&!b){var d=Array.from(S.CSS_DECLARATIONS).reverse(),s=window.CSS&&window.CSS.supports||window.supportsCSS;if(typeof s=="function")T=d.some(function(r){return s.apply(null,r)});else{var e=k.tester.append("image").attr("style",S.STYLE),i=window.getComputedStyle(e.node()).imageRendering;T=d.some(function(r){var n=r[1];return i===n||i===n.toLowerCase()}),e.remove()}}return T}},63893:function(Q,z,t){var S=t(39898),k=t(71828),l=k.strTranslate,T=t(77922),b=t(18783).LINE_SPACING,d=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;z.convertToTspans=function(D,G,I){var H=D.text(),N=!D.attr("data-notex")&&G&&G._context.typesetMath&&typeof MathJax<"u"&&H.match(d),F=S.select(D.node().parentNode);if(!F.empty()){var V=D.attr("class")?D.attr("class").split(" ")[0]:"text";return V+="-math",F.selectAll("svg."+V).remove(),F.selectAll("g."+V+"-group").remove(),D.style("display",null).attr({"data-unformatted":H,"data-math":"N"}),N?(G&&G._promises||[]).push(new Promise(function(te){D.style("display","none");var $=parseInt(D.node().style.fontSize,10),W={fontSize:$};(function(Z,J,ee){var re,ae,oe,ce,pe=parseInt((MathJax.version||"").split(".")[0]);if(pe===2||pe===3){var ve=function(){var xe="math-output-"+k.randstr({},64),ge=(ce=S.select("body").append("div").attr({id:xe}).style({visibility:"hidden",position:"absolute","font-size":J.fontSize+"px"}).text(Z.replace(s,"\\lt ").replace(e,"\\gt "))).node();return pe===2?MathJax.Hub.Typeset(ge):MathJax.typeset([ge])},we=function(){var xe=ce.select(pe===2?".MathJax_SVG":".MathJax"),ge=!xe.empty()&&ce.select("svg").node();if(ge){var Oe,Ae=ge.getBoundingClientRect();Oe=pe===2?S.select("body").select("#MathJax_SVG_glyphs"):xe.select("defs"),ee(xe,Oe,Ae)}else k.log("There was an error in the tex syntax.",Z),ee();ce.remove()};pe===2?MathJax.Hub.Queue(function(){return ae=k.extendDeepAll({},MathJax.Hub.config),oe=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:i},displayAlign:"left"})},function(){if((re=MathJax.Hub.config.menuSettings.renderer)!=="SVG")return MathJax.Hub.setRenderer("SVG")},ve,we,function(){if(re!=="SVG")return MathJax.Hub.setRenderer(re)},function(){return oe!==void 0&&(MathJax.Hub.processSectionDelay=oe),MathJax.Hub.Config(ae)}):pe===3&&(ae=k.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=i,(re=MathJax.config.startup.output)!=="svg"&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){ve(),we(),re!=="svg"&&(MathJax.config.startup.output=re),MathJax.config=ae}))}else k.warn("No MathJax version:",MathJax.version)})(N[2],W,function(Z,J,ee){F.selectAll("svg."+V).remove(),F.selectAll("g."+V+"-group").remove();var re=Z&&Z.select("svg");if(!re||!re.node())return q(),void te();var ae=F.append("g").classed(V+"-group",!0).attr({"pointer-events":"none","data-unformatted":H,"data-math":"Y"});ae.node().appendChild(re.node()),J&&J.node()&&re.node().insertBefore(J.node().cloneNode(!0),re.node().firstChild);var oe=ee.width,ce=ee.height;re.attr({class:V,height:ce,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var pe=D.node().style.fill||"black",ve=re.select("g");ve.attr({fill:pe,stroke:pe});var we=ve.node().getBoundingClientRect(),xe=we.width,ge=we.height;(xe>oe||ge>ce)&&(re.style("overflow","hidden"),xe=(we=re.node().getBoundingClientRect()).width,ge=we.height);var Oe=+D.attr("x"),Ae=+D.attr("y"),Te=-($||D.node().getBoundingClientRect().height)/4;if(V[0]==="y")ae.attr({transform:"rotate("+[-90,Oe,Ae]+")"+l(-xe/2,Te-ge/2)});else if(V[0]==="l")Ae=Te-ge/2;else if(V[0]==="a"&&V.indexOf("atitle")!==0)Oe=0,Ae=Te;else{var se=D.attr("text-anchor");Oe-=xe*(se==="middle"?.5:se==="end"?1:0),Ae=Ae+Te-ge/2}re.attr({x:Oe,y:Ae}),I&&I.call(D,ae),te(ae)})})):q(),D}function q(){F.empty()||(V=D.attr("class")+"-math",F.select("svg."+V).remove()),D.text("").style("white-space","pre");var te=function($,W){W=W.replace(p," ");var Z,J=!1,ee=[],re=-1;function ae(){re++;var Ee=document.createElementNS(T.svg,"tspan");S.select(Ee).attr({class:"line",dy:re*b+"em"}),$.appendChild(Ee),Z=Ee;var be=ee;if(ee=[{node:Ee}],be.length>1)for(var De=1;De<be.length;De++)oe(be[De])}function oe(Ee){var be,De=Ee.type,Ue={};if(De==="a"){be="a";var he=Ee.target,ke=Ee.href,_e=Ee.popup;ke&&(Ue={"xlink:xlink:show":he==="_blank"||he.charAt(0)!=="_"?"new":"replace",target:he,"xlink:xlink:href":ke},_e&&(Ue.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+_e+'");return false;'))}else be="tspan";Ee.style&&(Ue.style=Ee.style);var Ce=document.createElementNS(T.svg,be);if(De==="sup"||De==="sub"){ce(Z,o),Z.appendChild(Ce);var Fe=document.createElementNS(T.svg,"tspan");ce(Fe,o),S.select(Fe).attr("dy",a[De]),Ue.dy=n[De],Z.appendChild(Ce),Z.appendChild(Fe)}else Z.appendChild(Ce);S.select(Ce).attr(Ue),Z=Ee.node=Ce,ee.push(Ee)}function ce(Ee,be){Ee.appendChild(document.createTextNode(be))}function pe(Ee){if(ee.length!==1){var be=ee.pop();Ee!==be.type&&k.log("Start tag <"+be.type+"> doesnt match end tag <"+Ee+">. Pretending it did match.",W),Z=ee[ee.length-1].node}else k.log("Ignoring unexpected end tag </"+Ee+">.",W)}g.test(W)?ae():(Z=$,ee=[{node:$}]);for(var ve=W.split(c),we=0;we<ve.length;we++){var xe=ve[we],ge=xe.match(x),Oe=ge&&ge[2].toLowerCase(),Ae=r[Oe];if(Oe==="br")ae();else if(Ae===void 0)ce(Z,E(xe));else if(ge[1])pe(Oe);else{var Te=ge[4],se={type:Oe},le=_(Te,f);if(le?(le=le.replace(h,"$1 fill:"),Ae&&(le+=";"+Ae)):Ae&&(le=Ae),le&&(se.style=le),Oe==="a"){J=!0;var ne=_(Te,y);if(ne){var me=L(ne);me&&(se.href=me,se.target=_(Te,v)||"_blank",se.popup=_(Te,m))}}oe(se)}}return J}(D.node(),H);te&&D.style("pointer-events","all"),z.positionText(D),I&&I.call(D)}};var s=/(<|&lt;|&#60;)/g,e=/(>|&gt;|&#62;)/g,i=[["$","$"],["\\(","\\)"]],r={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},n={sub:"0.3em",sup:"-0.6em"},a={sub:"-0.21em",sup:"0.42em"},o="",u=["http:","https:","mailto:","",void 0,":"],p=z.NEWLINES=/(\r\n?|\n)/g,c=/(<[^<>]*>)/,x=/<(\/?)([^ >]*)(\s+(.*))?>/i,g=/<br(\s+.*)?>/i;z.BR_TAG_ALL=/<br(\s+.*)?>/gi;var f=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,y=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,v=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,m=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function _(D,G){if(!D)return null;var I=D.match(G),H=I&&(I[3]||I[4]);return H&&E(H)}var h=/(^|;)\s*color:/;z.plainText=function(D,G){for(var I=(G=G||{}).len!==void 0&&G.len!==-1?G.len:1/0,H=G.allowedTags!==void 0?G.allowedTags:["br"],N=D.split(c),F=[],V="",q=0,te=0;te<N.length;te++){var $=N[te],W=$.match(x),Z=W&&W[2].toLowerCase();if(Z)H.indexOf(Z)!==-1&&(F.push($),V=Z);else{var J=$.length;if(q+J<I)F.push($),q+=J;else if(q<I){var ee=I-q;V&&(V!=="br"||ee<=3||J<=3)&&F.pop(),I>3?F.push($.substr(0,ee-3)+"..."):F.push($.substr(0,ee));break}V=""}}return F.join("")};var A={mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""},w=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function E(D){return D.replace(w,function(G,I){return(I.charAt(0)==="#"?function(H){if(!(H>1114111)){var N=String.fromCodePoint;if(N)return N(H);var F=String.fromCharCode;return H<=65535?F(H):F(55232+(H>>10),H%1024+56320)}}(I.charAt(1)==="x"?parseInt(I.substr(2),16):parseInt(I.substr(1),10)):A[I])||G})}function L(D){var G=encodeURI(decodeURI(D)),I=document.createElement("a"),H=document.createElement("a");I.href=D,H.href=G;var N=I.protocol,F=H.protocol;return u.indexOf(N)!==-1&&u.indexOf(F)!==-1?G:""}function C(D,G,I){var H,N,F,V=I.horizontalAlign,q=I.verticalAlign||"top",te=D.node().getBoundingClientRect(),$=G.node().getBoundingClientRect();return N=q==="bottom"?function(){return te.bottom-H.height}:q==="middle"?function(){return te.top+(te.height-H.height)/2}:function(){return te.top},F=V==="right"?function(){return te.right-H.width}:V==="center"?function(){return te.left+(te.width-H.width)/2}:function(){return te.left},function(){H=this.node().getBoundingClientRect();var W=F()-$.left,Z=N()-$.top,J=I.gd||{};if(I.gd){J._fullLayout._calcInverseTransform(J);var ee=k.apply3DTransform(J._fullLayout._invTransform)(W,Z);W=ee[0],Z=ee[1]}return this.style({top:Z+"px",left:W+"px","z-index":1e3}),this}}z.convertEntities=E,z.sanitizeHTML=function(D){D=D.replace(p," ");for(var G=document.createElement("p"),I=G,H=[],N=D.split(c),F=0;F<N.length;F++){var V=N[F],q=V.match(x),te=q&&q[2].toLowerCase();if(te in r)if(q[1])H.length&&(I=H.pop());else{var $=q[4],W=_($,f),Z=W?{style:W}:{};if(te==="a"){var J=_($,y);if(J){var ee=L(J);if(ee){Z.href=ee;var re=_($,v);re&&(Z.target=re)}}}var ae=document.createElement(te);I.appendChild(ae),S.select(ae).attr(Z),I=ae,H.push(ae)}else I.appendChild(document.createTextNode(E(V)))}return G.innerHTML},z.lineCount=function(D){return D.selectAll("tspan.line").size()||1},z.positionText=function(D,G,I){return D.each(function(){var H=S.select(this);function N(q,te){return te===void 0?(te=H.attr(q))===null&&(H.attr(q,0),te=0):H.attr(q,te),te}var F=N("x",G),V=N("y",I);this.nodeName==="text"&&H.selectAll("tspan.line").attr({x:F,y:V})})};var P="1px ";z.makeTextShadow=function(D){return P+P+P+D+", -"+P+"-"+P+P+D+", "+P+"-"+P+P+D+", -"+P+P+P+D},z.makeEditable=function(D,G){var I=G.gd,H=G.delegate,N=S.dispatch("edit","input","cancel"),F=H||D;if(D.style({"pointer-events":H?"none":"all"}),D.size()!==1)throw new Error("boo");function V(){var te,$,W,Z,J;te=S.select(I).select(".svg-container"),$=te.append("div"),W=D.node().style,Z=parseFloat(W.fontSize||12),(J=G.text)===void 0&&(J=D.attr("data-unformatted")),$.classed("plugin-editable editable",!0).style({position:"absolute","font-family":W.fontFamily||"Arial","font-size":Z,color:G.fill||W.fill||"black",opacity:1,"background-color":G.background||"transparent",outline:"#ffffff33 1px solid",margin:[-Z/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(J).call(C(D,te,G)).on("blur",function(){I._editing=!1,D.text(this.textContent).style({opacity:1});var ae,oe=S.select(this).attr("class");(ae=oe?"."+oe.split(" ")[0]+"-math-group":"[class*=-math-group]")&&S.select(D.node().parentNode).select(ae).style({opacity:0});var ce=this.textContent;S.select(this).transition().duration(0).remove(),S.select(document).on("mouseup",null),N.edit.call(D,ce)}).on("focus",function(){var ae=this;I._editing=!0,S.select(document).on("mouseup",function(){if(S.event.target===ae)return!1;document.activeElement===$.node()&&$.node().blur()})}).on("keyup",function(){S.event.which===27?(I._editing=!1,D.style({opacity:1}),S.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),N.cancel.call(D,this.textContent)):(N.input.call(D,this.textContent),S.select(this).call(C(D,te,G)))}).on("keydown",function(){S.event.which===13&&this.blur()}).call(q),D.style({opacity:0});var ee,re=F.attr("class");(ee=re?"."+re.split(" ")[0]+"-math-group":"[class*=-math-group]")&&S.select(D.node().parentNode).select(ee).style({opacity:0})}function q(te){var $=te.node(),W=document.createRange();W.selectNodeContents($);var Z=window.getSelection();Z.removeAllRanges(),Z.addRange(W),$.focus()}return G.immediate?V():F.on("click",V),S.rebind(D,N,"on")}},79990:function(Q,z){var t={};function S(k){k&&k.timer!==null&&(clearTimeout(k.timer),k.timer=null)}z.throttle=function(k,l,T){var b=t[k],d=Date.now();if(!b){for(var s in t)t[s].ts<d-6e4&&delete t[s];b=t[k]={ts:0,timer:null}}function e(){T(),b.ts=Date.now(),b.onDone&&(b.onDone(),b.onDone=null)}S(b),d>b.ts+l?e():b.timer=setTimeout(function(){e(),b.timer=null},l)},z.done=function(k){var l=t[k];return l&&l.timer?new Promise(function(T){var b=l.onDone;l.onDone=function(){b&&b(),T(),l.onDone=null}}):Promise.resolve()},z.clear=function(k){if(k)S(t[k]),delete t[k];else for(var l in t)z.clear(l)}},58163:function(Q,z,t){var S=t(92770);Q.exports=function(k,l){if(k>0)return Math.log(k)/Math.LN10;var T=Math.log(Math.min(l[0],l[1]))/Math.LN10;return S(T)||(T=Math.log(Math.max(l[0],l[1]))/Math.LN10-6),T}},90973:function(Q,z,t){var S=Q.exports={},k=t(78776).locationmodeToLayer,l=t(96892).zL;S.getTopojsonName=function(T){return[T.scope.replace(/ /g,"-"),"_",T.resolution.toString(),"m"].join("")},S.getTopojsonPath=function(T,b){return T+b+".json"},S.getTopojsonFeatures=function(T,b){var d=k[T.locationmode],s=b.objects[d];return l(b,s).features}},37815:function(Q){Q.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},92177:function(Q){Q.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},14458:function(Q,z,t){var S=t(73972);Q.exports=function(k){for(var l,T,b=S.layoutArrayContainers,d=S.layoutArrayRegexes,s=k.split("[")[0],e=0;e<d.length;e++)if((T=k.match(d[e]))&&T.index===0){l=T[0];break}if(l||(l=b[b.indexOf(s)]),!l)return!1;var i=k.substr(l.length);return i?!!(T=i.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:l,index:Number(T[1]),property:T[3]||""}:{array:l,index:"",property:""}}},30962:function(Q,z,t){var S=t(71828),k=S.extendFlat,l=S.isPlainObject,T={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},b={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},d=T.flags.slice().concat(["fullReplot"]),s=b.flags.slice().concat("layoutReplot");function e(n){for(var a={},o=0;o<n.length;o++)a[n[o]]=!1;return a}function i(n,a,o){var u=k({},n);for(var p in u){var c=u[p];l(c)&&(u[p]=r(c,a,0,p))}return o==="from-root"&&(u.editType=a),u}function r(n,a,o,u){if(n.valType){var p=k({},n);if(p.editType=a,Array.isArray(n.items)){p.items=new Array(n.items.length);for(var c=0;c<n.items.length;c++)p.items[c]=r(n.items[c],a)}return p}return i(n,a,u.charAt(0)==="_"?"nested":"from-root")}Q.exports={traces:T,layout:b,traceFlags:function(){return e(d)},layoutFlags:function(){return e(s)},update:function(n,a){var o=a.editType;if(o&&o!=="none")for(var u=o.split("+"),p=0;p<u.length;p++)n[u[p]]=!0},overrideAll:i}},58377:function(Q,z,t){var S=t(92770),k=t(27812),l=t(73972),T=t(71828),b=t(74875),d=t(41675),s=t(7901),e=d.cleanId,i=d.getFromTrace,r=l.traceIs;function n(y,v){var m=y[v],_=v.charAt(0);m&&m!=="paper"&&(y[v]=e(m,_,!0))}function a(y){function v(m,_){var h=y[m],A=y.title&&y.title[_];h&&!A&&(y.title||(y.title={}),y.title[_]=y[m],delete y[m])}y&&(typeof y.title!="string"&&typeof y.title!="number"||(y.title={text:y.title}),v("titlefont","font"),v("titleposition","position"),v("titleside","side"),v("titleoffset","offset"))}function o(y){if(!T.isPlainObject(y))return!1;var v=y.name;return delete y.name,delete y.showlegend,(typeof v=="string"||typeof v=="number")&&String(v)}function u(y,v,m,_){if(m&&!_)return y;if(_&&!m||!y.trim())return v;if(!v.trim())return y;var h,A=Math.min(y.length,v.length);for(h=0;h<A&&y.charAt(h)===v.charAt(h);h++);return y.substr(0,h).trim()}function p(y){var v="middle",m="center";return typeof y=="string"&&(y.indexOf("top")!==-1?v="top":y.indexOf("bottom")!==-1&&(v="bottom"),y.indexOf("left")!==-1?m="left":y.indexOf("right")!==-1&&(m="right")),v+" "+m}function c(y,v){return v in y&&typeof y[v]=="object"&&Object.keys(y[v]).length===0}z.clearPromiseQueue=function(y){Array.isArray(y._promises)&&y._promises.length>0&&T.log("Clearing previous rejected promises from queue."),y._promises=[]},z.cleanLayout=function(y){var v,m;y||(y={}),y.xaxis1&&(y.xaxis||(y.xaxis=y.xaxis1),delete y.xaxis1),y.yaxis1&&(y.yaxis||(y.yaxis=y.yaxis1),delete y.yaxis1),y.scene1&&(y.scene||(y.scene=y.scene1),delete y.scene1);var _=(b.subplotsRegistry.cartesian||{}).attrRegex,h=(b.subplotsRegistry.polar||{}).attrRegex,A=(b.subplotsRegistry.ternary||{}).attrRegex,w=(b.subplotsRegistry.gl3d||{}).attrRegex,E=Object.keys(y);for(v=0;v<E.length;v++){var L=E[v];if(_&&_.test(L)){var C=y[L];C.anchor&&C.anchor!=="free"&&(C.anchor=e(C.anchor)),C.overlaying&&(C.overlaying=e(C.overlaying)),C.type||(C.isdate?C.type="date":C.islog?C.type="log":C.isdate===!1&&C.islog===!1&&(C.type="linear")),C.autorange!=="withzero"&&C.autorange!=="tozero"||(C.autorange=!0,C.rangemode="tozero"),delete C.islog,delete C.isdate,delete C.categories,c(C,"domain")&&delete C.domain,C.autotick!==void 0&&(C.tickmode===void 0&&(C.tickmode=C.autotick?"auto":"linear"),delete C.autotick),a(C)}else if(h&&h.test(L))a(y[L].radialaxis);else if(A&&A.test(L)){var P=y[L];a(P.aaxis),a(P.baxis),a(P.caxis)}else if(w&&w.test(L)){var D=y[L],G=D.cameraposition;if(Array.isArray(G)&&G[0].length===4){var I=G[0],H=G[1],N=G[2],F=k([],I),V=[];for(m=0;m<3;++m)V[m]=H[m]+N*F[2+4*m];D.camera={eye:{x:V[0],y:V[1],z:V[2]},center:{x:H[0],y:H[1],z:H[2]},up:{x:0,y:0,z:1}},delete D.cameraposition}a(D.xaxis),a(D.yaxis),a(D.zaxis)}}var q=Array.isArray(y.annotations)?y.annotations.length:0;for(v=0;v<q;v++){var te=y.annotations[v];T.isPlainObject(te)&&(te.ref&&(te.ref==="paper"?(te.xref="paper",te.yref="paper"):te.ref==="data"&&(te.xref="x",te.yref="y"),delete te.ref),n(te,"xref"),n(te,"yref"))}var $=Array.isArray(y.shapes)?y.shapes.length:0;for(v=0;v<$;v++){var W=y.shapes[v];T.isPlainObject(W)&&(n(W,"xref"),n(W,"yref"))}var Z=Array.isArray(y.images)?y.images.length:0;for(v=0;v<Z;v++){var J=y.images[v];T.isPlainObject(J)&&(n(J,"xref"),n(J,"yref"))}var ee=y.legend;return ee&&(ee.x>3?(ee.x=1.02,ee.xanchor="left"):ee.x<-2&&(ee.x=-.02,ee.xanchor="right"),ee.y>3?(ee.y=1.02,ee.yanchor="bottom"):ee.y<-2&&(ee.y=-.02,ee.yanchor="top")),a(y),y.dragmode==="rotate"&&(y.dragmode="orbit"),s.clean(y),y.template&&y.template.layout&&z.cleanLayout(y.template.layout),y},z.cleanData=function(y){for(var v=0;v<y.length;v++){var m,_=y[v];if(_.type==="histogramy"&&"xbins"in _&&!("ybins"in _)&&(_.ybins=_.xbins,delete _.xbins),_.error_y&&"opacity"in _.error_y){var h=s.defaults,A=_.error_y.color||(r(_,"bar")?s.defaultLine:h[v%h.length]);_.error_y.color=s.addOpacity(s.rgb(A),s.opacity(A)*_.error_y.opacity),delete _.error_y.opacity}if("bardir"in _&&(_.bardir!=="h"||!r(_,"bar")&&_.type.substr(0,9)!=="histogram"||(_.orientation="h",z.swapXYData(_)),delete _.bardir),_.type==="histogramy"&&z.swapXYData(_),_.type!=="histogramx"&&_.type!=="histogramy"||(_.type="histogram"),"scl"in _&&!("colorscale"in _)&&(_.colorscale=_.scl,delete _.scl),"reversescl"in _&&!("reversescale"in _)&&(_.reversescale=_.reversescl,delete _.reversescl),_.xaxis&&(_.xaxis=e(_.xaxis,"x")),_.yaxis&&(_.yaxis=e(_.yaxis,"y")),r(_,"gl3d")&&_.scene&&(_.scene=b.subplotsRegistry.gl3d.cleanId(_.scene)),!r(_,"pie-like")&&!r(_,"bar-like"))if(Array.isArray(_.textposition))for(m=0;m<_.textposition.length;m++)_.textposition[m]=p(_.textposition[m]);else _.textposition&&(_.textposition=p(_.textposition));var w=l.getModule(_);if(w&&w.colorbar){var E=w.colorbar.container,L=E?_[E]:_;L&&L.colorscale&&(L.colorscale==="YIGnBu"&&(L.colorscale="YlGnBu"),L.colorscale==="YIOrRd"&&(L.colorscale="YlOrRd"))}if(_.type==="surface"&&T.isPlainObject(_.contours)){var C=["x","y","z"];for(m=0;m<C.length;m++){var P=_.contours[C[m]];T.isPlainObject(P)&&(P.highlightColor&&(P.highlightcolor=P.highlightColor,delete P.highlightColor),P.highlightWidth&&(P.highlightwidth=P.highlightWidth,delete P.highlightWidth))}}if(_.type==="candlestick"||_.type==="ohlc"){var D=(_.increasing||{}).showlegend!==!1,G=(_.decreasing||{}).showlegend!==!1,I=o(_.increasing),H=o(_.decreasing);if(I!==!1&&H!==!1){var N=u(I,H,D,G);N&&(_.name=N)}else!I&&!H||_.name||(_.name=I||H)}if(Array.isArray(_.transforms)){var F=_.transforms;for(m=0;m<F.length;m++){var V=F[m];if(T.isPlainObject(V))switch(V.type){case"filter":V.filtersrc&&(V.target=V.filtersrc,delete V.filtersrc),V.calendar&&(V.valuecalendar||(V.valuecalendar=V.calendar),delete V.calendar);break;case"groupby":if(V.styles=V.styles||V.style,V.styles&&!Array.isArray(V.styles)){var q=V.styles,te=Object.keys(q);V.styles=[];for(var $=0;$<te.length;$++)V.styles.push({target:te[$],value:q[te[$]]})}}}}c(_,"line")&&delete _.line,"marker"in _&&(c(_.marker,"line")&&delete _.marker.line,c(_,"marker")&&delete _.marker),s.clean(_),_.autobinx&&(delete _.autobinx,delete _.xbins),_.autobiny&&(delete _.autobiny,delete _.ybins),a(_),_.colorbar&&a(_.colorbar),_.marker&&_.marker.colorbar&&a(_.marker.colorbar),_.line&&_.line.colorbar&&a(_.line.colorbar),_.aaxis&&a(_.aaxis),_.baxis&&a(_.baxis)}},z.swapXYData=function(y){var v;if(T.swapAttrs(y,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(y.z)&&Array.isArray(y.z[0])&&(y.transpose?delete y.transpose:y.transpose=!0),y.error_x&&y.error_y){var m=y.error_y,_="copy_ystyle"in m?m.copy_ystyle:!(m.color||m.thickness||m.width);T.swapAttrs(y,["error_?.copy_ystyle"]),_&&T.swapAttrs(y,["error_?.color","error_?.thickness","error_?.width"])}if(typeof y.hoverinfo=="string"){var h=y.hoverinfo.split("+");for(v=0;v<h.length;v++)h[v]==="x"?h[v]="y":h[v]==="y"&&(h[v]="x");y.hoverinfo=h.join("+")}},z.coerceTraceIndices=function(y,v){if(S(v))return[v];if(!Array.isArray(v)||!v.length)return y.data.map(function(h,A){return A});if(Array.isArray(v)){for(var m=[],_=0;_<v.length;_++)T.isIndex(v[_],y.data.length)?m.push(v[_]):T.warn("trace index (",v[_],") is not a number or is out of bounds");return m}return v},z.manageArrayContainers=function(y,v,m){var _=y.obj,h=y.parts,A=h.length,w=h[A-1],E=S(w);if(E&&v===null){var L=h.slice(0,A-1).join(".");T.nestedProperty(_,L).get().splice(w,1)}else E&&y.get()===void 0&&y.get()===void 0&&(m[y.astr]=null),y.set(v)};var x=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function g(y){var v=y.search(x);if(v>0)return y.substr(0,v)}z.hasParent=function(y,v){for(var m=g(v);m;){if(m in y)return!0;m=g(m)}return!1};var f=["x","y","z"];z.clearAxisTypes=function(y,v,m){for(var _=0;_<v.length;_++)for(var h=y._fullData[_],A=0;A<3;A++){var w=i(y,h,f[A]);if(w&&w.type!=="log"){var E=w._name,L=w._id.substr(1);if(L.substr(0,5)==="scene"){if(m[L]!==void 0)continue;E=L+"."+E}var C=E+".type";m[E]===void 0&&m[C]===void 0&&T.nestedProperty(y.layout,C).set(null)}}}},10641:function(Q,z,t){var S=t(72391);z._doPlot=S._doPlot,z.newPlot=S.newPlot,z.restyle=S.restyle,z.relayout=S.relayout,z.redraw=S.redraw,z.update=S.update,z._guiRestyle=S._guiRestyle,z._guiRelayout=S._guiRelayout,z._guiUpdate=S._guiUpdate,z._storeDirectGUIEdit=S._storeDirectGUIEdit,z.react=S.react,z.extendTraces=S.extendTraces,z.prependTraces=S.prependTraces,z.addTraces=S.addTraces,z.deleteTraces=S.deleteTraces,z.moveTraces=S.moveTraces,z.purge=S.purge,z.addFrames=S.addFrames,z.deleteFrames=S.deleteFrames,z.animate=S.animate,z.setPlotConfig=S.setPlotConfig,z.toImage=t(403),z.validate=t(84936),z.downloadImage=t(7239);var k=t(96318);z.makeTemplate=k.makeTemplate,z.validateTemplate=k.validateTemplate},6611:function(Q,z,t){var S=t(41965),k=t(64213),l=t(47769),T=t(65888).sorterAsc,b=t(73972);z.containerArrayMatch=t(14458);var d=z.isAddVal=function(e){return e==="add"||S(e)},s=z.isRemoveVal=function(e){return e===null||e==="remove"};z.applyContainerArrayChanges=function(e,i,r,n,a){var o=i.astr,u=b.getComponentMethod(o,"supplyLayoutDefaults"),p=b.getComponentMethod(o,"draw"),c=b.getComponentMethod(o,"drawOne"),x=n.replot||n.recalc||u===k||p===k,g=e.layout,f=e._fullLayout;if(r[""]){Object.keys(r).length>1&&l.warn("Full array edits are incompatible with other edits",o);var y=r[""][""];if(s(y))i.set(null);else{if(!Array.isArray(y))return l.warn("Unrecognized full array edit value",o,y),!0;i.set(y)}return!x&&(u(g,f),p(e),!0)}var v,m,_,h,A,w,E,L,C=Object.keys(r).map(Number).sort(T),P=i.get(),D=P||[],G=a(f,o).get(),I=[],H=-1,N=D.length;for(v=0;v<C.length;v++)if(h=r[_=C[v]],A=Object.keys(h),w=h[""],E=d(w),_<0||_>D.length-(E?0:1))l.warn("index out of range",o,_);else if(w!==void 0)A.length>1&&l.warn("Insertion & removal are incompatible with edits to the same index.",o,_),s(w)?I.push(_):E?(w==="add"&&(w={}),D.splice(_,0,w),G&&G.splice(_,0,{})):l.warn("Unrecognized full object edit value",o,_,w),H===-1&&(H=_);else for(m=0;m<A.length;m++)L=o+"["+_+"].",a(D[_],A[m],L).set(h[A[m]]);for(v=I.length-1;v>=0;v--)D.splice(I[v],1),G&&G.splice(I[v],1);if(D.length?P||i.set(D):i.set(null),x)return!1;if(u(g,f),c!==k){var F;if(H===-1)F=C;else{for(N=Math.max(D.length,N),F=[],v=0;v<C.length&&!((_=C[v])>=H);v++)F.push(_);for(v=H;v<N;v++)F.push(v)}for(v=0;v<F.length;v++)c(e,F[v])}else p(e);return!0}},72391:function(Q,z,t){var S=t(39898),k=t(92770),l=t(57035),T=t(71828),b=T.nestedProperty,d=t(11086),s=t(10847),e=t(73972),i=t(86281),r=t(74875),n=t(89298),a=t(91424),o=t(7901),u=t(4305).initInteractions,p=t(77922),c=t(47322).clearOutline,x=t(72075).dfltConfig,g=t(6611),f=t(58377),y=t(61549),v=t(30962),m=t(85555).AX_NAME_PATTERN,_=0;function h(ne){var me=ne._fullLayout;me._redrawFromAutoMarginCount?me._redrawFromAutoMarginCount--:ne.emit("plotly_afterplot")}function A(ne,me){try{ne._fullLayout._paper.style("background",me)}catch(Ee){T.error(Ee)}}function w(ne,me){A(ne,o.combine(me,"white"))}function E(ne,me){if(!ne._context){ne._context=T.extendDeep({},x);var Ee=S.select("base");ne._context._baseUrl=Ee.size()&&Ee.attr("href")?window.location.href.split("#")[0]:""}var be,De,Ue,he=ne._context;if(me){for(De=Object.keys(me),be=0;be<De.length;be++)(Ue=De[be])!=="editable"&&Ue!=="edits"&&Ue in he&&(Ue==="setBackground"&&me[Ue]==="opaque"?he[Ue]=w:he[Ue]=me[Ue]);me.plot3dPixelRatio&&!he.plotGlPixelRatio&&(he.plotGlPixelRatio=he.plot3dPixelRatio);var ke=me.editable;if(ke!==void 0)for(he.editable=ke,De=Object.keys(he.edits),be=0;be<De.length;be++)he.edits[De[be]]=ke;if(me.edits)for(De=Object.keys(me.edits),be=0;be<De.length;be++)(Ue=De[be])in he.edits&&(he.edits[Ue]=me.edits[Ue]);he._exportedPlot=me._exportedPlot}he.staticPlot&&(he.editable=!1,he.edits={},he.autosizable=!1,he.scrollZoom=!1,he.doubleClick=!1,he.showTips=!1,he.showLink=!1,he.displayModeBar=!1),he.displayModeBar!=="hover"||l||(he.displayModeBar=!0),he.setBackground!=="transparent"&&typeof he.setBackground=="function"||(he.setBackground=A),he._hasZeroHeight=he._hasZeroHeight||ne.clientHeight===0,he._hasZeroWidth=he._hasZeroWidth||ne.clientWidth===0;var _e=he.scrollZoom,Ce=he._scrollZoom={};if(_e===!0)Ce.cartesian=1,Ce.gl3d=1,Ce.geo=1,Ce.mapbox=1;else if(typeof _e=="string"){var Fe=_e.split("+");for(be=0;be<Fe.length;be++)Ce[Fe[be]]=1}else _e!==!1&&(Ce.gl3d=1,Ce.geo=1,Ce.mapbox=1)}function L(ne,me){var Ee,be,De=me+1,Ue=[];for(Ee=0;Ee<ne.length;Ee++)(be=ne[Ee])<0?Ue.push(De+be):Ue.push(be);return Ue}function C(ne,me,Ee){var be,De;for(be=0;be<me.length;be++){if((De=me[be])!==parseInt(De,10))throw new Error("all values in "+Ee+" must be integers");if(De>=ne.data.length||De<-ne.data.length)throw new Error(Ee+" must be valid indices for gd.data.");if(me.indexOf(De,be+1)>-1||De>=0&&me.indexOf(-ne.data.length+De)>-1||De<0&&me.indexOf(ne.data.length+De)>-1)throw new Error("each index in "+Ee+" must be unique.")}}function P(ne,me,Ee){if(!Array.isArray(ne.data))throw new Error("gd.data must be an array.");if(me===void 0)throw new Error("currentIndices is a required argument.");if(Array.isArray(me)||(me=[me]),C(ne,me,"currentIndices"),Ee===void 0||Array.isArray(Ee)||(Ee=[Ee]),Ee!==void 0&&C(ne,Ee,"newIndices"),Ee!==void 0&&me.length!==Ee.length)throw new Error("current and new indices must be of equal length.")}function D(ne,me,Ee,be,De){(function(He,Ge,$e,st){var Ke=T.isPlainObject(st);if(!Array.isArray(He.data))throw new Error("gd.data must be an array");if(!T.isPlainObject(Ge))throw new Error("update must be a key:value object");if($e===void 0)throw new Error("indices must be an integer or array of integers");for(var gt in C(He,$e,"indices"),Ge){if(!Array.isArray(Ge[gt])||Ge[gt].length!==$e.length)throw new Error("attribute "+gt+" must be an array of length equal to indices array length");if(Ke&&(!(gt in st)||!Array.isArray(st[gt])||st[gt].length!==Ge[gt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}})(ne,me,Ee,be);for(var Ue=function(He,Ge,$e,st){var Ke,gt,mt,at,rt,xt=T.isPlainObject(st),Tt=[];for(var wt in Array.isArray($e)||($e=[$e]),$e=L($e,He.data.length-1),Ge)for(var Ot=0;Ot<$e.length;Ot++){if(Ke=He.data[$e[Ot]],gt=(mt=b(Ke,wt)).get(),at=Ge[wt][Ot],!T.isArrayOrTypedArray(at))throw new Error("attribute: "+wt+" index: "+Ot+" must be an array");if(!T.isArrayOrTypedArray(gt))throw new Error("cannot extend missing or non-array attribute: "+wt);if(gt.constructor!==at.constructor)throw new Error("cannot extend array with an array of a different type: "+wt);rt=xt?st[wt][Ot]:st,k(rt)||(rt=-1),Tt.push({prop:mt,target:gt,insert:at,maxp:Math.floor(rt)})}return Tt}(ne,me,Ee,be),he={},ke={},_e=0;_e<Ue.length;_e++){var Ce=Ue[_e].prop,Fe=Ue[_e].maxp,Re=De(Ue[_e].target,Ue[_e].insert,Fe);Ce.set(Re[0]),Array.isArray(he[Ce.astr])||(he[Ce.astr]=[]),he[Ce.astr].push(Re[1]),Array.isArray(ke[Ce.astr])||(ke[Ce.astr]=[]),ke[Ce.astr].push(Ue[_e].target.length)}return{update:he,maxPoints:ke}}function G(ne,me){var Ee=new ne.constructor(ne.length+me.length);return Ee.set(ne),Ee.set(me,ne.length),Ee}function I(ne,me,Ee,be){ne=T.getGraphDiv(ne),f.clearPromiseQueue(ne);var De={};if(typeof me=="string")De[me]=Ee;else{if(!T.isPlainObject(me))return T.warn("Restyle fail.",me,Ee,be),Promise.reject();De=T.extendFlat({},me),be===void 0&&(be=Ee)}Object.keys(De).length&&(ne.changed=!0);var Ue=f.coerceTraceIndices(ne,be),he=V(ne,De,Ue),ke=he.flags;ke.calc&&(ne.calcdata=void 0),ke.clearAxisTypes&&f.clearAxisTypes(ne,Ue,{});var _e=[];ke.fullReplot?_e.push(z._doPlot):(_e.push(r.previousPromises),r.supplyDefaults(ne),ke.markerSize&&(r.doCalcdata(ne),W(_e)),ke.style&&_e.push(y.doTraceStyle),ke.colorbars&&_e.push(y.doColorBars),_e.push(h)),_e.push(r.rehover,r.redrag,r.reselect),s.add(ne,I,[ne,he.undoit,he.traces],I,[ne,he.redoit,he.traces]);var Ce=T.syncOrAsync(_e,ne);return Ce&&Ce.then||(Ce=Promise.resolve()),Ce.then(function(){return ne.emit("plotly_restyle",he.eventData),ne})}function H(ne){return ne===void 0?null:ne}function N(ne,me){return me?function(Ee,be,De){var Ue=b(Ee,be),he=Ue.set;return Ue.set=function(ke){F((De||"")+be,Ue.get(),ke,ne),he(ke)},Ue}:b}function F(ne,me,Ee,be){if(Array.isArray(me)||Array.isArray(Ee))for(var De=Array.isArray(me)?me:[],Ue=Array.isArray(Ee)?Ee:[],he=Math.max(De.length,Ue.length),ke=0;ke<he;ke++)F(ne+"["+ke+"]",De[ke],Ue[ke],be);else if(T.isPlainObject(me)||T.isPlainObject(Ee)){var _e=T.isPlainObject(me)?me:{},Ce=T.isPlainObject(Ee)?Ee:{},Fe=T.extendFlat({},_e,Ce);for(var Re in Fe)F(ne+"."+Re,_e[Re],Ce[Re],be)}else be[ne]===void 0&&(be[ne]=H(me))}function V(ne,me,Ee){var be,De=ne._fullLayout,Ue=ne._fullData,he=ne.data,ke=De._guiEditing,_e=N(De._preGUI,ke),Ce=T.extendDeepAll({},me);q(me);var Fe,Re=v.traceFlags(),He={},Ge={};function $e(){return Ee.map(function(){})}function st(Rt){var Jt=n.id2name(Rt);Fe.indexOf(Jt)===-1&&Fe.push(Jt)}function Ke(Rt){return"LAYOUT"+Rt+".autorange"}function gt(Rt){return"LAYOUT"+Rt+".range"}function mt(Rt){for(var Jt=Rt;Jt<Ue.length;Jt++)if(Ue[Jt]._input===he[Rt])return Ue[Jt]}function at(Rt,Jt,qt){if(Array.isArray(Rt))Rt.forEach(function(fn){at(fn,Jt,qt)});else if(!(Rt in me)&&!f.hasParent(me,Rt)){var Wt;if(Rt.substr(0,6)==="LAYOUT")Wt=_e(ne.layout,Rt.replace("LAYOUT",""));else{var jt=Ee[qt];Wt=N(De._tracePreGUI[mt(jt)._fullInput.uid],ke)(he[jt],Rt)}Rt in Ge||(Ge[Rt]=$e()),Ge[Rt][qt]===void 0&&(Ge[Rt][qt]=H(Wt.get())),Jt!==void 0&&Wt.set(Jt)}}function rt(Rt){return function(Jt){return Ue[Jt][Rt]}}function xt(Rt){return function(Jt,qt){return Jt===!1?Ue[Ee[qt]][Rt]:null}}for(var Tt in me){if(f.hasParent(me,Tt))throw new Error("cannot set "+Tt+" and a parent attribute simultaneously");var wt,Ot,Ct,Ye,Xe,Ve,We=me[Tt];if(Tt!=="autobinx"&&Tt!=="autobiny"||(Tt=Tt.charAt(Tt.length-1)+"bins",We=Array.isArray(We)?We.map(xt(Tt)):We===!1?Ee.map(rt(Tt)):null),He[Tt]=We,Tt.substr(0,6)!=="LAYOUT"){for(Ge[Tt]=$e(),be=0;be<Ee.length;be++)if(wt=he[Ee[be]],Ot=mt(Ee[be]),Ye=(Ct=N(De._tracePreGUI[Ot._fullInput.uid],ke)(wt,Tt)).get(),(Xe=Array.isArray(We)?We[be%We.length]:We)!==void 0){var nt=Ct.parts[Ct.parts.length-1],ot=Tt.substr(0,Tt.length-nt.length-1),Ie=ot?ot+".":"",ze=ot?b(Ot,ot).get():Ot;if((Ve=i.getTraceValObject(Ot,Ct.parts))&&Ve.impliedEdits&&Xe!==null)for(var et in Ve.impliedEdits)at(T.relativeAttr(Tt,et),Ve.impliedEdits[et],be);else if(nt!=="thicknessmode"&&nt!=="lenmode"||Ye===Xe||Xe!=="fraction"&&Xe!=="pixels"||!ze){if(Tt==="type"&&(Xe==="pie"!=(Ye==="pie")||Xe==="funnelarea"!=(Ye==="funnelarea"))){var tt="x",dt="y";Xe!=="bar"&&Ye!=="bar"||wt.orientation!=="h"||(tt="y",dt="x"),T.swapAttrs(wt,["?","?src"],"labels",tt),T.swapAttrs(wt,["d?","?0"],"label",tt),T.swapAttrs(wt,["?","?src"],"values",dt),Ye==="pie"||Ye==="funnelarea"?(b(wt,"marker.color").set(b(wt,"marker.colors").get()),De._pielayer.selectAll("g.trace").remove()):e.traceIs(wt,"cartesian")&&b(wt,"marker.colors").set(b(wt,"marker.color").get())}}else{var pt=De._size,vt=ze.orient,ct=vt==="top"||vt==="bottom";if(nt==="thicknessmode"){var kt=ct?pt.h:pt.w;at(Ie+"thickness",ze.thickness*(Xe==="fraction"?1/kt:kt),be)}else{var ut=ct?pt.w:pt.h;at(Ie+"len",ze.len*(Xe==="fraction"?1/ut:ut),be)}}if(Ge[Tt][be]=H(Ye),["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Tt)!==-1){if(Tt==="orientation"){Ct.set(Xe);var ft=wt.x&&!wt.y?"h":"v";if((Ct.get()||ft)===Ot.orientation)continue}else Tt==="orientationaxes"&&(wt.orientation={v:"h",h:"v"}[Ot.orientation]);f.swapXYData(wt),Re.calc=Re.clearAxisTypes=!0}else r.dataArrayContainers.indexOf(Ct.parts[0])!==-1?(f.manageArrayContainers(Ct,Xe,Ge),Re.calc=!0):(Ve?Ve.arrayOk&&!e.traceIs(Ot,"regl")&&(T.isArrayOrTypedArray(Xe)||T.isArrayOrTypedArray(Ye))?Re.calc=!0:v.update(Re,Ve):Re.calc=!0,Ct.set(Xe))}if(["swapxyaxes","orientationaxes"].indexOf(Tt)!==-1&&n.swap(ne,Ee),Tt==="orientationaxes"){var bt=b(ne.layout,"hovermode"),It=bt.get();It==="x"?bt.set("y"):It==="y"?bt.set("x"):It==="x unified"?bt.set("y unified"):It==="y unified"&&bt.set("x unified")}if(["orientation","type"].indexOf(Tt)!==-1){for(Fe=[],be=0;be<Ee.length;be++){var zt=he[Ee[be]];e.traceIs(zt,"cartesian")&&(st(zt.xaxis||"x"),st(zt.yaxis||"y"))}at(Fe.map(Ke),!0,0),at(Fe.map(gt),[0,1],0)}}else Ct=_e(ne.layout,Tt.replace("LAYOUT","")),Ge[Tt]=[H(Ct.get())],Ct.set(Array.isArray(We)?We[0]:We),Re.calc=!0}return(Re.calc||Re.plot)&&(Re.fullReplot=!0),{flags:Re,undoit:Ge,redoit:He,traces:Ee,eventData:T.extendDeepNoArrays([],[Ce,Ee])}}function q(ne){var me,Ee,be,De=T.counterRegex("axis",".title",!1,!1),Ue=/colorbar\.title$/,he=Object.keys(ne);for(me=0;me<he.length;me++)Ee=he[me],be=ne[Ee],Ee!=="title"&&!De.test(Ee)&&!Ue.test(Ee)||typeof be!="string"&&typeof be!="number"?Ee.indexOf("titlefont")>-1&&Ee.indexOf("grouptitlefont")===-1?ke(Ee,Ee.replace("titlefont","title.font")):Ee.indexOf("titleposition")>-1?ke(Ee,Ee.replace("titleposition","title.position")):Ee.indexOf("titleside")>-1?ke(Ee,Ee.replace("titleside","title.side")):Ee.indexOf("titleoffset")>-1&&ke(Ee,Ee.replace("titleoffset","title.offset")):ke(Ee,Ee.replace("title","title.text"));function ke(_e,Ce){ne[Ce]=ne[_e],delete ne[_e]}}function te(ne,me,Ee){ne=T.getGraphDiv(ne),f.clearPromiseQueue(ne);var be={};if(typeof me=="string")be[me]=Ee;else{if(!T.isPlainObject(me))return T.warn("Relayout fail.",me,Ee),Promise.reject();be=T.extendFlat({},me)}Object.keys(be).length&&(ne.changed=!0);var De=re(ne,be),Ue=De.flags;Ue.calc&&(ne.calcdata=void 0);var he=[r.previousPromises];Ue.layoutReplot?he.push(y.layoutReplot):Object.keys(be).length&&($(ne,Ue,De)||r.supplyDefaults(ne),Ue.legend&&he.push(y.doLegend),Ue.layoutstyle&&he.push(y.layoutStyles),Ue.axrange&&W(he,De.rangesAltered),Ue.ticks&&he.push(y.doTicksRelayout),Ue.modebar&&he.push(y.doModeBar),Ue.camera&&he.push(y.doCamera),Ue.colorbars&&he.push(y.doColorBars),he.push(h)),he.push(r.rehover,r.redrag,r.reselect),s.add(ne,te,[ne,De.undoit],te,[ne,De.redoit]);var ke=T.syncOrAsync(he,ne);return ke&&ke.then||(ke=Promise.resolve(ne)),ke.then(function(){return ne.emit("plotly_relayout",De.eventData),ne})}function $(ne,me,Ee){var be=ne._fullLayout;if(!me.axrange)return!1;for(var De in me)if(De!=="axrange"&&me[De])return!1;for(var Ue in Ee.rangesAltered){var he=n.id2name(Ue),ke=ne.layout[he],_e=be[he];if(_e.autorange=ke.autorange,ke.range&&(_e.range=ke.range.slice()),_e.cleanRange(),_e._matchGroup){for(var Ce in _e._matchGroup)if(Ce!==Ue){var Fe=be[n.id2name(Ce)];Fe.autorange=_e.autorange,Fe.range=_e.range.slice(),Fe._input.range=_e.range.slice()}}}return!0}function W(ne,me){var Ee=me?function(be){var De=[];for(var Ue in me){var he=n.getFromId(be,Ue);if(De.push(Ue),(he.ticklabelposition||"").indexOf("inside")!==-1&&he._anchorAxis&&De.push(he._anchorAxis._id),he._matchGroup)for(var ke in he._matchGroup)me[ke]||De.push(ke)}return n.draw(be,De,{skipTitle:!0})}:function(be){return n.draw(be,"redraw")};ne.push(c,y.doAutoRangeAndConstraints,Ee,y.drawData,y.finalDraw)}var Z=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,J=/^[xyz]axis[0-9]*\.autorange$/,ee=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function re(ne,me){var Ee,be,De,Ue=ne.layout,he=ne._fullLayout,ke=he._guiEditing,_e=N(he._preGUI,ke),Ce=Object.keys(me),Fe=n.list(ne),Re=T.extendDeepAll({},me),He={};for(q(me),Ce=Object.keys(me),be=0;be<Ce.length;be++)if(Ce[be].indexOf("allaxes")===0){for(De=0;De<Fe.length;De++){var Ge=Fe[De]._id.substr(1),$e=Ge.indexOf("scene")!==-1?Ge+".":"",st=Ce[be].replace("allaxes",$e+Fe[De]._name);me[st]||(me[st]=me[Ce[be]])}delete me[Ce[be]]}var Ke=v.layoutFlags(),gt={},mt={};function at(jt,fn){if(Array.isArray(jt))jt.forEach(function(un){at(un,fn)});else if(!(jt in me)&&!f.hasParent(me,jt)){var xn=_e(Ue,jt);jt in mt||(mt[jt]=H(xn.get())),fn!==void 0&&xn.set(fn)}}var rt,xt={};function Tt(jt){var fn=n.name2id(jt.split(".")[0]);return xt[fn]=1,fn}for(var wt in me){if(f.hasParent(me,wt))throw new Error("cannot set "+wt+" and a parent attribute simultaneously");for(var Ot=_e(Ue,wt),Ct=me[wt],Ye=Ot.parts.length-1;Ye>0&&typeof Ot.parts[Ye]!="string";)Ye--;var Xe=Ot.parts[Ye],Ve=Ot.parts[Ye-1]+"."+Xe,We=Ot.parts.slice(0,Ye).join("."),nt=b(ne.layout,We).get(),ot=b(he,We).get(),Ie=Ot.get();if(Ct!==void 0){gt[wt]=Ct,mt[wt]=Xe==="reverse"?Ct:H(Ie);var ze=i.getLayoutValObject(he,Ot.parts);if(ze&&ze.impliedEdits&&Ct!==null)for(var et in ze.impliedEdits)at(T.relativeAttr(wt,et),ze.impliedEdits[et]);if(["width","height"].indexOf(wt)!==-1)if(Ct){at("autosize",null);var tt=wt==="height"?"width":"height";at(tt,he[tt])}else he[wt]=ne._initialAutoSize[wt];else if(wt==="autosize")at("width",Ct?null:he.width),at("height",Ct?null:he.height);else if(Ve.match(Z))Tt(Ve),b(he,We+"._inputRange").set(null);else if(Ve.match(J)){Tt(Ve),b(he,We+"._inputRange").set(null);var dt=b(he,We).get();dt._inputDomain&&(dt._input.domain=dt._inputDomain.slice())}else Ve.match(ee)&&b(he,We+"._inputDomain").set(null);if(Xe==="type"){rt=nt;var pt=ot.type==="linear"&&Ct==="log",vt=ot.type==="log"&&Ct==="linear";if(pt||vt){if(rt&&rt.range)if(ot.autorange)pt&&(rt.range=rt.range[1]>rt.range[0]?[1,2]:[2,1]);else{var ct=rt.range[0],kt=rt.range[1];pt?(ct<=0&&kt<=0&&at(We+".autorange",!0),ct<=0?ct=kt/1e6:kt<=0&&(kt=ct/1e6),at(We+".range[0]",Math.log(ct)/Math.LN10),at(We+".range[1]",Math.log(kt)/Math.LN10)):(at(We+".range[0]",Math.pow(10,ct)),at(We+".range[1]",Math.pow(10,kt)))}else at(We+".autorange",!0);Array.isArray(he._subplots.polar)&&he._subplots.polar.length&&he[Ot.parts[0]]&&Ot.parts[1]==="radialaxis"&&delete he[Ot.parts[0]]._subplot.viewInitial["radialaxis.range"],e.getComponentMethod("annotations","convertCoords")(ne,ot,Ct,at),e.getComponentMethod("images","convertCoords")(ne,ot,Ct,at)}else at(We+".autorange",!0),at(We+".range",null);b(he,We+"._inputRange").set(null)}else if(Xe.match(m)){var ut=b(he,wt).get(),ft=(Ct||{}).type;ft&&ft!=="-"||(ft="linear"),e.getComponentMethod("annotations","convertCoords")(ne,ut,ft,at),e.getComponentMethod("images","convertCoords")(ne,ut,ft,at)}var bt=g.containerArrayMatch(wt);if(bt){Ee=bt.array,be=bt.index;var It=bt.property,zt=ze||{editType:"calc"};be!==""&&It===""&&(g.isAddVal(Ct)?mt[wt]=null:g.isRemoveVal(Ct)?mt[wt]=(b(Ue,Ee).get()||[])[be]:T.warn("unrecognized full object value",me)),v.update(Ke,zt),He[Ee]||(He[Ee]={});var Rt=He[Ee][be];Rt||(Rt=He[Ee][be]={}),Rt[It]=Ct,delete me[wt]}else Xe==="reverse"?(nt.range?nt.range.reverse():(at(We+".autorange",!0),nt.range=[1,0]),ot.autorange?Ke.calc=!0:Ke.plot=!0):(wt==="dragmode"&&(Ct===!1&&Ie!==!1||Ct!==!1&&Ie===!1)||he._has("scatter-like")&&he._has("regl")&&wt==="dragmode"&&(Ct==="lasso"||Ct==="select")&&Ie!=="lasso"&&Ie!=="select"||he._has("gl2d")?Ke.plot=!0:ze?v.update(Ke,ze):Ke.calc=!0,Ot.set(Ct))}}for(Ee in He)g.applyContainerArrayChanges(ne,_e(Ue,Ee),He[Ee],Ke,_e)||(Ke.plot=!0);for(var Jt in xt){var qt=(rt=n.getFromId(ne,Jt))&&rt._constraintGroup;if(qt)for(var Wt in Ke.calc=!0,qt)xt[Wt]||(n.getFromId(ne,Wt)._constraintShrinkable=!0)}return(ae(ne)||me.height||me.width)&&(Ke.plot=!0),(Ke.plot||Ke.calc)&&(Ke.layoutReplot=!0),{flags:Ke,rangesAltered:xt,undoit:mt,redoit:gt,eventData:Re}}function ae(ne){var me=ne._fullLayout,Ee=me.width,be=me.height;return ne.layout.autosize&&r.plotAutoSize(ne,ne.layout,me),me.width!==Ee||me.height!==be}function oe(ne,me,Ee,be){ne=T.getGraphDiv(ne),f.clearPromiseQueue(ne),T.isPlainObject(me)||(me={}),T.isPlainObject(Ee)||(Ee={}),Object.keys(me).length&&(ne.changed=!0),Object.keys(Ee).length&&(ne.changed=!0);var De=f.coerceTraceIndices(ne,be),Ue=V(ne,T.extendFlat({},me),De),he=Ue.flags,ke=re(ne,T.extendFlat({},Ee)),_e=ke.flags;(he.calc||_e.calc)&&(ne.calcdata=void 0),he.clearAxisTypes&&f.clearAxisTypes(ne,De,Ee);var Ce=[];_e.layoutReplot?Ce.push(y.layoutReplot):he.fullReplot?Ce.push(z._doPlot):(Ce.push(r.previousPromises),$(ne,_e,ke)||r.supplyDefaults(ne),he.style&&Ce.push(y.doTraceStyle),(he.colorbars||_e.colorbars)&&Ce.push(y.doColorBars),_e.legend&&Ce.push(y.doLegend),_e.layoutstyle&&Ce.push(y.layoutStyles),_e.axrange&&W(Ce,ke.rangesAltered),_e.ticks&&Ce.push(y.doTicksRelayout),_e.modebar&&Ce.push(y.doModeBar),_e.camera&&Ce.push(y.doCamera),Ce.push(h)),Ce.push(r.rehover,r.redrag,r.reselect),s.add(ne,oe,[ne,Ue.undoit,ke.undoit,Ue.traces],oe,[ne,Ue.redoit,ke.redoit,Ue.traces]);var Fe=T.syncOrAsync(Ce,ne);return Fe&&Fe.then||(Fe=Promise.resolve(ne)),Fe.then(function(){return ne.emit("plotly_update",{data:Ue.eventData,layout:ke.eventData}),ne})}function ce(ne){return function(me){me._fullLayout._guiEditing=!0;var Ee=ne.apply(null,arguments);return me._fullLayout._guiEditing=!1,Ee}}var pe=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],ve=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function we(ne,me){for(var Ee=0;Ee<me.length;Ee++){var be=me[Ee],De=ne.match(be.pattern);if(De){var Ue=De[1]||"";return{head:Ue,tail:ne.substr(Ue.length+1),attr:be.attr}}}}function xe(ne,me){var Ee=b(me,ne).get();if(Ee!==void 0)return Ee;var be=ne.split(".");for(be.pop();be.length>1;)if(be.pop(),(Ee=b(me,be.join(".")+".uirevision").get())!==void 0)return Ee;return me.uirevision}function ge(ne,me){for(var Ee=0;Ee<me.length;Ee++)if(me[Ee]._fullInput.uid===ne)return Ee;return-1}function Oe(ne,me,Ee){for(var be=0;be<me.length;be++)if(me[be].uid===ne)return be;return!me[Ee]||me[Ee].uid?-1:Ee}function Ae(ne,me){var Ee=T.isPlainObject(ne),be=Array.isArray(ne);return Ee||be?(Ee&&T.isPlainObject(me)||be&&Array.isArray(me))&&JSON.stringify(ne)===JSON.stringify(me):ne===me}function Te(ne,me,Ee,be){var De,Ue,he,ke=be.getValObject,_e=be.flags,Ce=be.immutable,Fe=be.inArray,Re=be.arrayIndex;function He(){var nt=De.editType;Fe&&nt.indexOf("arraydraw")!==-1?T.pushUnique(_e.arrays[Fe],Re):(v.update(_e,De),nt!=="none"&&_e.nChanges++,be.transition&&De.anim&&_e.nChangesAnim++,(Z.test(he)||J.test(he))&&(_e.rangesAltered[Ee[0]]=1),ee.test(he)&&b(me,"_inputDomain").set(null),Ue==="datarevision"&&(_e.newDataRevision=1))}function Ge(nt){return nt.valType==="data_array"||nt.arrayOk}for(Ue in ne){if(_e.calc&&!be.transition)return;var $e=ne[Ue],st=me[Ue],Ke=Ee.concat(Ue);if(he=Ke.join("."),Ue.charAt(0)!=="_"&&typeof $e!="function"&&$e!==st){if((Ue==="tick0"||Ue==="dtick")&&Ee[0]!=="geo"){var gt=me.tickmode;if(gt==="auto"||gt==="array"||!gt)continue}if((Ue!=="range"||!me.autorange)&&(Ue!=="zmin"&&Ue!=="zmax"||me.type!=="contourcarpet")&&(De=ke(Ke))&&(!De._compareAsJSON||JSON.stringify($e)!==JSON.stringify(st))){var mt,at=De.valType,rt=Ge(De),xt=Array.isArray($e),Tt=Array.isArray(st);if(xt&&Tt){var wt="_input_"+Ue,Ot=ne[wt],Ct=me[wt];if(Array.isArray(Ot)&&Ot===Ct)continue}if(st===void 0)rt&&xt?_e.calc=!0:He();else if(De._isLinkedToArray){var Ye=[],Xe=!1;Fe||(_e.arrays[Ue]=Ye);var Ve=Math.min($e.length,st.length),We=Math.max($e.length,st.length);if(Ve!==We){if(De.editType!=="arraydraw"){He();continue}Xe=!0}for(mt=0;mt<Ve;mt++)Te($e[mt],st[mt],Ke.concat(mt),T.extendFlat({inArray:Ue,arrayIndex:mt},be));if(Xe)for(mt=Ve;mt<We;mt++)Ye.push(mt)}else!at&&T.isPlainObject($e)?Te($e,st,Ke,be):rt?xt&&Tt?(Ce&&(_e.calc=!0),(Ce||be.newDataRevision)&&He()):xt!==Tt?_e.calc=!0:He():xt&&Tt&&$e.length===st.length&&String($e)===String(st)||He()}}}for(Ue in me)if(!(Ue in ne)&&Ue.charAt(0)!=="_"&&typeof me[Ue]!="function"){if(Ge(De=ke(Ee.concat(Ue)))&&Array.isArray(me[Ue]))return void(_e.calc=!0);He()}}function se(ne,me){var Ee;for(Ee in ne)if(Ee.charAt(0)!=="_"){var be=ne[Ee],De=me[Ee];if(be!==De)if(T.isPlainObject(be)&&T.isPlainObject(De)){if(se(be,De))return!0}else{if(!Array.isArray(be)||!Array.isArray(De)||be.length!==De.length)return!0;for(var Ue=0;Ue<be.length;Ue++)if(be[Ue]!==De[Ue]&&(!T.isPlainObject(be[Ue])||!T.isPlainObject(De[Ue])||se(be[Ue],De[Ue])))return!0}}}function le(ne){var me=ne._fullLayout,Ee=ne.getBoundingClientRect();if(!T.equalDomRects(Ee,me._lastBBox)){var be=me._invTransform=T.inverseTransformMatrix(T.getFullTransformMatrix(ne));me._invScaleX=Math.sqrt(be[0][0]*be[0][0]+be[0][1]*be[0][1]+be[0][2]*be[0][2]),me._invScaleY=Math.sqrt(be[1][0]*be[1][0]+be[1][1]*be[1][1]+be[1][2]*be[1][2]),me._lastBBox=Ee}}z.animate=function(ne,me,Ee){if(ne=T.getGraphDiv(ne),!T.isPlotDiv(ne))throw new Error("This element is not a Plotly plot: "+ne+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var be=ne._transitionData;be._frameQueue||(be._frameQueue=[]);var De=(Ee=r.supplyAnimationDefaults(Ee)).transition,Ue=Ee.frame;function he(Ce){return Array.isArray(De)?Ce>=De.length?De[0]:De[Ce]:De}function ke(Ce){return Array.isArray(Ue)?Ce>=Ue.length?Ue[0]:Ue[Ce]:Ue}function _e(Ce,Fe){var Re=0;return function(){if(Ce&&++Re===Fe)return Ce()}}return be._frameWaitingCnt===void 0&&(be._frameWaitingCnt=0),new Promise(function(Ce,Fe){function Re(){ne.emit("plotly_animating"),be._lastFrameAt=-1/0,be._timeToNext=0,be._runningTransitions=0,be._currentFrame=null;var wt=function(){be._animationRaf=window.requestAnimationFrame(wt),Date.now()-be._lastFrameAt>be._timeToNext&&function(){be._currentFrame&&be._currentFrame.onComplete&&be._currentFrame.onComplete();var Ot=be._currentFrame=be._frameQueue.shift();if(Ot){var Ct=Ot.name?Ot.name.toString():null;ne._fullLayout._currentFrame=Ct,be._lastFrameAt=Date.now(),be._timeToNext=Ot.frameOpts.duration,r.transition(ne,Ot.frame.data,Ot.frame.layout,f.coerceTraceIndices(ne,Ot.frame.traces),Ot.frameOpts,Ot.transitionOpts).then(function(){Ot.onComplete&&Ot.onComplete()}),ne.emit("plotly_animatingframe",{name:Ct,frame:Ot.frame,animation:{frame:Ot.frameOpts,transition:Ot.transitionOpts}})}else ne.emit("plotly_animated"),window.cancelAnimationFrame(be._animationRaf),be._animationRaf=null}()};wt()}var He,Ge,$e=0;function st(wt){return Array.isArray(De)?$e>=De.length?wt.transitionOpts=De[$e]:wt.transitionOpts=De[0]:wt.transitionOpts=De,$e++,wt}var Ke=[],gt=me==null,mt=Array.isArray(me);if(gt||mt||!T.isPlainObject(me)){if(gt||["string","number"].indexOf(typeof me)!==-1)for(He=0;He<be._frames.length;He++)(Ge=be._frames[He])&&(gt||String(Ge.group)===String(me))&&Ke.push({type:"byname",name:String(Ge.name),data:st({name:Ge.name})});else if(mt)for(He=0;He<me.length;He++){var at=me[He];["number","string"].indexOf(typeof at)!==-1?(at=String(at),Ke.push({type:"byname",name:at,data:st({name:at})})):T.isPlainObject(at)&&Ke.push({type:"object",data:st(T.extendFlat({},at))})}}else Ke.push({type:"object",data:st(T.extendFlat({},me))});for(He=0;He<Ke.length;He++)if((Ge=Ke[He]).type==="byname"&&!be._frameHash[Ge.data.name])return T.warn('animate failure: frame not found: "'+Ge.data.name+'"'),void Fe();["next","immediate"].indexOf(Ee.mode)!==-1&&function(){if(be._frameQueue.length!==0){for(;be._frameQueue.length;){var wt=be._frameQueue.pop();wt.onInterrupt&&wt.onInterrupt()}ne.emit("plotly_animationinterrupted",[])}}(),Ee.direction==="reverse"&&Ke.reverse();var rt=ne._fullLayout._currentFrame;if(rt&&Ee.fromcurrent){var xt=-1;for(He=0;He<Ke.length;He++)if((Ge=Ke[He]).type==="byname"&&Ge.name===rt){xt=He;break}if(xt>0&&xt<Ke.length-1){var Tt=[];for(He=0;He<Ke.length;He++)Ge=Ke[He],(Ke[He].type!=="byname"||He>xt)&&Tt.push(Ge);Ke=Tt}}Ke.length>0?function(wt){if(wt.length!==0){for(var Ot=0;Ot<wt.length;Ot++){var Ct;Ct=wt[Ot].type==="byname"?r.computeFrame(ne,wt[Ot].name):wt[Ot].data;var Ye=ke(Ot),Xe=he(Ot);Xe.duration=Math.min(Xe.duration,Ye.duration);var Ve={frame:Ct,name:wt[Ot].name,frameOpts:Ye,transitionOpts:Xe};Ot===wt.length-1&&(Ve.onComplete=_e(Ce,2),Ve.onInterrupt=Fe),be._frameQueue.push(Ve)}Ee.mode==="immediate"&&(be._lastFrameAt=-1/0),be._animationRaf||Re()}}(Ke):(ne.emit("plotly_animated"),Ce())})},z.addFrames=function(ne,me,Ee){if(ne=T.getGraphDiv(ne),me==null)return Promise.resolve();if(!T.isPlotDiv(ne))throw new Error("This element is not a Plotly plot: "+ne+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var be,De,Ue,he,ke=ne._transitionData._frames,_e=ne._transitionData._frameHash;if(!Array.isArray(me))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+me);var Ce=ke.length+2*me.length,Fe=[],Re={};for(be=me.length-1;be>=0;be--)if(T.isPlainObject(me[be])){var He=me[be].name,Ge=(_e[He]||Re[He]||{}).name,$e=me[be].name,st=_e[Ge]||Re[Ge];Ge&&$e&&typeof $e=="number"&&st&&_<5&&(_++,T.warn('addFrames: overwriting frame "'+(_e[Ge]||Re[Ge]).name+'" with a frame whose name of type "number" also equates to "'+Ge+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),_===5&&T.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Re[He]={name:He},Fe.push({frame:r.supplyFrameDefaults(me[be]),index:Ee&&Ee[be]!==void 0&&Ee[be]!==null?Ee[be]:Ce+be})}Fe.sort(function(wt,Ot){return wt.index>Ot.index?-1:wt.index<Ot.index?1:0});var Ke=[],gt=[],mt=ke.length;for(be=Fe.length-1;be>=0;be--){if(typeof(De=Fe[be].frame).name=="number"&&T.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!De.name)for(;_e[De.name="frame "+ne._transitionData._counter++];);if(_e[De.name]){for(Ue=0;Ue<ke.length&&(ke[Ue]||{}).name!==De.name;Ue++);Ke.push({type:"replace",index:Ue,value:De}),gt.unshift({type:"replace",index:Ue,value:ke[Ue]})}else he=Math.max(0,Math.min(Fe[be].index,mt)),Ke.push({type:"insert",index:he,value:De}),gt.unshift({type:"delete",index:he}),mt++}var at=r.modifyFrames,rt=r.modifyFrames,xt=[ne,gt],Tt=[ne,Ke];return s&&s.add(ne,at,xt,rt,Tt),r.modifyFrames(ne,Ke)},z.deleteFrames=function(ne,me){if(ne=T.getGraphDiv(ne),!T.isPlotDiv(ne))throw new Error("This element is not a Plotly plot: "+ne);var Ee,be,De=ne._transitionData._frames,Ue=[],he=[];if(!me)for(me=[],Ee=0;Ee<De.length;Ee++)me.push(Ee);for((me=me.slice()).sort(),Ee=me.length-1;Ee>=0;Ee--)be=me[Ee],Ue.push({type:"delete",index:be}),he.unshift({type:"insert",index:be,value:De[be]});var ke=r.modifyFrames,_e=r.modifyFrames,Ce=[ne,he],Fe=[ne,Ue];return s&&s.add(ne,ke,Ce,_e,Fe),r.modifyFrames(ne,Ue)},z.addTraces=function ne(me,Ee,be){me=T.getGraphDiv(me);var De,Ue,he=[],ke=z.deleteTraces,_e=ne,Ce=[me,he],Fe=[me,Ee];for(function(Re,He,Ge){var $e,st;if(!Array.isArray(Re.data))throw new Error("gd.data must be an array.");if(He===void 0)throw new Error("traces must be defined.");for(Array.isArray(He)||(He=[He]),$e=0;$e<He.length;$e++)if(typeof(st=He[$e])!="object"||Array.isArray(st)||st===null)throw new Error("all values in traces array must be non-array objects");if(Ge===void 0||Array.isArray(Ge)||(Ge=[Ge]),Ge!==void 0&&Ge.length!==He.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(me,Ee,be),Array.isArray(Ee)||(Ee=[Ee]),Ee=Ee.map(function(Re){return T.extendFlat({},Re)}),f.cleanData(Ee),De=0;De<Ee.length;De++)me.data.push(Ee[De]);for(De=0;De<Ee.length;De++)he.push(-Ee.length+De);if(be===void 0)return Ue=z.redraw(me),s.add(me,ke,Ce,_e,Fe),Ue;Array.isArray(be)||(be=[be]);try{P(me,he,be)}catch(Re){throw me.data.splice(me.data.length-Ee.length,Ee.length),Re}return s.startSequence(me),s.add(me,ke,Ce,_e,Fe),Ue=z.moveTraces(me,he,be),s.stopSequence(me),Ue},z.deleteTraces=function ne(me,Ee){me=T.getGraphDiv(me);var be,De,Ue=[],he=z.addTraces,ke=ne,_e=[me,Ue,Ee],Ce=[me,Ee];if(Ee===void 0)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Ee)||(Ee=[Ee]),C(me,Ee,"indices"),(Ee=L(Ee,me.data.length-1)).sort(T.sorterDes),be=0;be<Ee.length;be+=1)De=me.data.splice(Ee[be],1)[0],Ue.push(De);var Fe=z.redraw(me);return s.add(me,he,_e,ke,Ce),Fe},z.extendTraces=function ne(me,Ee,be,De){var Ue=D(me=T.getGraphDiv(me),Ee,be,De,function(_e,Ce,Fe){var Re,He;if(T.isTypedArray(_e))if(Fe<0){var Ge=new _e.constructor(0),$e=G(_e,Ce);Fe<0?(Re=$e,He=Ge):(Re=Ge,He=$e)}else if(Re=new _e.constructor(Fe),He=new _e.constructor(_e.length+Ce.length-Fe),Fe===Ce.length)Re.set(Ce),He.set(_e);else if(Fe<Ce.length){var st=Ce.length-Fe;Re.set(Ce.subarray(st)),He.set(_e),He.set(Ce.subarray(0,st),_e.length)}else{var Ke=Fe-Ce.length,gt=_e.length-Ke;Re.set(_e.subarray(gt)),Re.set(Ce,Ke),He.set(_e.subarray(0,gt))}else Re=_e.concat(Ce),He=Fe>=0&&Fe<Re.length?Re.splice(0,Re.length-Fe):[];return[Re,He]}),he=z.redraw(me),ke=[me,Ue.update,be,Ue.maxPoints];return s.add(me,z.prependTraces,ke,ne,arguments),he},z.moveTraces=function ne(me,Ee,be){var De,Ue=[],he=[],ke=ne,_e=ne,Ce=[me=T.getGraphDiv(me),be,Ee],Fe=[me,Ee,be];if(P(me,Ee,be),Ee=Array.isArray(Ee)?Ee:[Ee],be===void 0)for(be=[],De=0;De<Ee.length;De++)be.push(-Ee.length+De);for(be=Array.isArray(be)?be:[be],Ee=L(Ee,me.data.length-1),be=L(be,me.data.length-1),De=0;De<me.data.length;De++)Ee.indexOf(De)===-1&&Ue.push(me.data[De]);for(De=0;De<Ee.length;De++)he.push({newIndex:be[De],trace:me.data[Ee[De]]});for(he.sort(function(He,Ge){return He.newIndex-Ge.newIndex}),De=0;De<he.length;De+=1)Ue.splice(he[De].newIndex,0,he[De].trace);me.data=Ue;var Re=z.redraw(me);return s.add(me,ke,Ce,_e,Fe),Re},z.prependTraces=function ne(me,Ee,be,De){var Ue=D(me=T.getGraphDiv(me),Ee,be,De,function(_e,Ce,Fe){var Re,He;if(T.isTypedArray(_e))if(Fe<=0){var Ge=new _e.constructor(0),$e=G(Ce,_e);Fe<0?(Re=$e,He=Ge):(Re=Ge,He=$e)}else if(Re=new _e.constructor(Fe),He=new _e.constructor(_e.length+Ce.length-Fe),Fe===Ce.length)Re.set(Ce),He.set(_e);else if(Fe<Ce.length){var st=Ce.length-Fe;Re.set(Ce.subarray(0,st)),He.set(Ce.subarray(st)),He.set(_e,st)}else{var Ke=Fe-Ce.length;Re.set(Ce),Re.set(_e.subarray(0,Ke),Ce.length),He.set(_e.subarray(Ke))}else Re=Ce.concat(_e),He=Fe>=0&&Fe<Re.length?Re.splice(Fe,Re.length):[];return[Re,He]}),he=z.redraw(me),ke=[me,Ue.update,be,Ue.maxPoints];return s.add(me,z.extendTraces,ke,ne,arguments),he},z.newPlot=function(ne,me,Ee,be){return ne=T.getGraphDiv(ne),r.cleanPlot([],{},ne._fullData||[],ne._fullLayout||{}),r.purge(ne),z._doPlot(ne,me,Ee,be)},z._doPlot=function(ne,me,Ee,be){var De;if(ne=T.getGraphDiv(ne),d.init(ne),T.isPlainObject(me)){var Ue=me;me=Ue.data,Ee=Ue.layout,be=Ue.config,De=Ue.frames}if(d.triggerHandler(ne,"plotly_beforeplot",[me,Ee,be])===!1)return Promise.reject();me||Ee||T.isPlotDiv(ne)||T.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",ne),E(ne,be),Ee||(Ee={}),S.select(ne).classed("js-plotly-plot",!0),a.makeTester(),Array.isArray(ne._promises)||(ne._promises=[]);var he=(ne.data||[]).length===0&&Array.isArray(me);Array.isArray(me)&&(f.cleanData(me),he?ne.data=me:ne.data.push.apply(ne.data,me),ne.empty=!1),ne.layout&&!he||(ne.layout=f.cleanLayout(Ee)),r.supplyDefaults(ne);var ke=ne._fullLayout,_e=ke._has("cartesian");ke._replotting=!0,(he||ke._shouldCreateBgLayer)&&(function(gt){var mt=S.select(gt),at=gt._fullLayout;if(at._calcInverseTransform=le,at._calcInverseTransform(gt),at._container=mt.selectAll(".plot-container").data([0]),at._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),at._paperdiv=at._container.selectAll(".svg-container").data([0]),at._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),at._glcontainer=at._paperdiv.selectAll(".gl-container").data([{}]),at._glcontainer.enter().append("div").classed("gl-container",!0),at._paperdiv.selectAll(".main-svg").remove(),at._paperdiv.select(".modebar-container").remove(),at._paper=at._paperdiv.insert("svg",":first-child").classed("main-svg",!0),at._toppaper=at._paperdiv.append("svg").classed("main-svg",!0),at._modebardiv=at._paperdiv.append("div"),delete at._modeBar,at._hoverpaper=at._paperdiv.append("svg").classed("main-svg",!0),!at._uid){var rt={};S.selectAll("defs").each(function(){this.id&&(rt[this.id.split("-")[1]]=1)}),at._uid=T.randstr(rt)}at._paperdiv.selectAll(".main-svg").attr(p.svgAttrs),at._defs=at._paper.append("defs").attr("id","defs-"+at._uid),at._clips=at._defs.append("g").classed("clips",!0),at._topdefs=at._toppaper.append("defs").attr("id","topdefs-"+at._uid),at._topclips=at._topdefs.append("g").classed("clips",!0),at._bgLayer=at._paper.append("g").classed("bglayer",!0),at._draggers=at._paper.append("g").classed("draglayer",!0);var xt=at._paper.append("g").classed("layer-below",!0);at._imageLowerLayer=xt.append("g").classed("imagelayer",!0),at._shapeLowerLayer=xt.append("g").classed("shapelayer",!0),at._cartesianlayer=at._paper.append("g").classed("cartesianlayer",!0),at._polarlayer=at._paper.append("g").classed("polarlayer",!0),at._smithlayer=at._paper.append("g").classed("smithlayer",!0),at._ternarylayer=at._paper.append("g").classed("ternarylayer",!0),at._geolayer=at._paper.append("g").classed("geolayer",!0),at._funnelarealayer=at._paper.append("g").classed("funnelarealayer",!0),at._pielayer=at._paper.append("g").classed("pielayer",!0),at._iciclelayer=at._paper.append("g").classed("iciclelayer",!0),at._treemaplayer=at._paper.append("g").classed("treemaplayer",!0),at._sunburstlayer=at._paper.append("g").classed("sunburstlayer",!0),at._indicatorlayer=at._toppaper.append("g").classed("indicatorlayer",!0),at._glimages=at._paper.append("g").classed("glimages",!0);var Tt=at._toppaper.append("g").classed("layer-above",!0);at._imageUpperLayer=Tt.append("g").classed("imagelayer",!0),at._shapeUpperLayer=Tt.append("g").classed("shapelayer",!0),at._selectionLayer=at._toppaper.append("g").classed("selectionlayer",!0),at._infolayer=at._toppaper.append("g").classed("infolayer",!0),at._menulayer=at._toppaper.append("g").classed("menulayer",!0),at._zoomlayer=at._toppaper.append("g").classed("zoomlayer",!0),at._hoverlayer=at._hoverpaper.append("g").classed("hoverlayer",!0),at._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),gt.emit("plotly_framework")}(ne),ke._shouldCreateBgLayer&&delete ke._shouldCreateBgLayer),a.initGradients(ne),a.initPatterns(ne),he&&n.saveShowSpikeInitial(ne);var Ce=!ne.calcdata||ne.calcdata.length!==(ne._fullData||[]).length;Ce&&r.doCalcdata(ne);for(var Fe=0;Fe<ne.calcdata.length;Fe++)ne.calcdata[Fe][0].trace=ne._fullData[Fe];ne._context.responsive?ne._responsiveChartHandler||(ne._responsiveChartHandler=function(){T.isHidden(ne)||r.resize(ne)},window.addEventListener("resize",ne._responsiveChartHandler)):T.clearResponsive(ne);var Re=T.extendFlat({},ke._size),He=0;function Ge(){if(r.clearAutoMarginIds(ne),y.drawMarginPushers(ne),n.allowAutoMargin(ne),ne._fullLayout.title.text&&ne._fullLayout.title.automargin&&r.allowAutoMargin(ne,"title.automargin"),ke._has("pie"))for(var gt=ne._fullData,mt=0;mt<gt.length;mt++){var at=gt[mt];at.type==="pie"&&at.automargin&&r.allowAutoMargin(ne,"pie."+at.uid+".automargin")}return r.doAutoMargin(ne),r.previousPromises(ne)}function $e(){ne._transitioning||(y.doAutoRangeAndConstraints(ne),he&&n.saveRangeInitial(ne),e.getComponentMethod("rangeslider","calcAutorange")(ne))}var st=[r.previousPromises,function(){if(De)return z.addFrames(ne,De)},function gt(){for(var mt=ke._basePlotModules,at=0;at<mt.length;at++)mt[at].drawFramework&&mt[at].drawFramework(ne);!ke._glcanvas&&ke._has("gl")&&(ke._glcanvas=ke._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(wt){return wt.key}),ke._glcanvas.enter().append("canvas").attr("class",function(wt){return"gl-canvas gl-canvas-"+wt.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var rt=ne._context.plotGlPixelRatio;if(ke._glcanvas){ke._glcanvas.attr("width",ke.width*rt).attr("height",ke.height*rt).style("width",ke.width+"px").style("height",ke.height+"px");var xt=ke._glcanvas.data()[0].regl;if(xt&&(Math.floor(ke.width*rt)!==xt._gl.drawingBufferWidth||Math.floor(ke.height*rt)!==xt._gl.drawingBufferHeight)){var Tt="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!He)return T.log(Tt+" Clearing graph and plotting again."),r.cleanPlot([],{},ne._fullData,ke),r.supplyDefaults(ne),ke=ne._fullLayout,r.doCalcdata(ne),He++,gt();T.error(Tt)}}return ke.modebar.orientation==="h"?ke._modebardiv.style("height",null).style("width","100%"):ke._modebardiv.style("width",null).style("height",ke.height+"px"),r.previousPromises(ne)},Ge,function(){if(r.didMarginChange(Re,ke._size))return T.syncOrAsync([Ge,y.layoutStyles],ne)}];_e&&st.push(function(){if(Ce)return T.syncOrAsync([e.getComponentMethod("shapes","calcAutorange"),e.getComponentMethod("annotations","calcAutorange"),$e],ne);$e()}),st.push(y.layoutStyles),_e&&st.push(function(){return n.draw(ne,he?"":"redraw")},function(gt){gt._fullLayout._insideTickLabelsAutorange&&te(gt,gt._fullLayout._insideTickLabelsAutorange).then(function(){gt._fullLayout._insideTickLabelsAutorange=void 0})}),st.push(y.drawData,y.finalDraw,u,r.addLinks,r.rehover,r.redrag,r.reselect,r.doAutoMargin,function(gt){gt._fullLayout._insideTickLabelsAutorange&&he&&n.saveRangeInitial(gt,!0)},r.previousPromises);var Ke=T.syncOrAsync(st,ne);return Ke&&Ke.then||(Ke=Promise.resolve()),Ke.then(function(){return h(ne),ne})},z.purge=function(ne){var me=(ne=T.getGraphDiv(ne))._fullLayout||{},Ee=ne._fullData||[];return r.cleanPlot([],{},Ee,me),r.purge(ne),d.purge(ne),me._container&&me._container.remove(),delete ne._context,ne},z.react=function(ne,me,Ee,be){var De,Ue;ne=T.getGraphDiv(ne),f.clearPromiseQueue(ne);var he=ne._fullData,ke=ne._fullLayout;if(T.isPlotDiv(ne)&&he&&ke){if(T.isPlainObject(me)){var _e=me;me=_e.data,Ee=_e.layout,be=_e.config,De=_e.frames}var Ce=!1;if(be){var Fe=T.extendDeep({},ne._context);ne._context=void 0,E(ne,be),Ce=se(Fe,ne._context)}ne.data=me||[],f.cleanData(ne.data),ne.layout=Ee||{},f.cleanLayout(ne.layout),function(We,nt,ot,Ie){var ze,et,tt,dt,pt,vt,ct,kt,ut,ft,bt=Ie._preGUI,It=[],zt={},Rt={};for(ze in bt){if(pt=we(ze,pe)){if(ut=pt.head,ft=pt.tail,et=pt.attr||ut+".uirevision",(dt=(tt=b(Ie,et).get())&&xe(et,nt))&&dt===tt){if((vt=bt[ze])===null&&(vt=void 0),Ae(kt=(ct=b(nt,ze)).get(),vt)){kt===void 0&&ft==="autorange"&&It.push(ut),ct.set(H(b(Ie,ze).get()));continue}if(ft==="autorange"||ft.substr(0,6)==="range["){var Jt=bt[ut+".range[0]"],qt=bt[ut+".range[1]"],Wt=bt[ut+".autorange"];if(Wt||Wt===null&&Jt===null&&qt===null){if(!(ut in zt)){var jt=b(nt,ut).get();zt[ut]=jt&&(jt.autorange||jt.autorange!==!1&&(!jt.range||jt.range.length!==2))}if(zt[ut]){ct.set(H(b(Ie,ze).get()));continue}}}}}else T.warn("unrecognized GUI edit: "+ze);delete bt[ze],pt&&pt.tail.substr(0,6)==="range["&&(Rt[pt.head]=1)}for(var fn=0;fn<It.length;fn++){var xn=It[fn];if(Rt[xn]){var un=b(nt,xn).get();un&&delete un.autorange}}var Ht=Ie._tracePreGUI;for(var nn in Ht){var Kt,on=Ht[nn],hn=null;for(ze in on){if(!hn){var dn=ge(nn,ot);if(dn<0){delete Ht[nn];break}var Mn=Oe(nn,We,(Kt=ot[dn]._fullInput).index);if(Mn<0){delete Ht[nn];break}hn=We[Mn]}if(pt=we(ze,ve)){if(pt.attr?dt=(tt=b(Ie,pt.attr).get())&&xe(pt.attr,nt):(tt=Kt.uirevision,(dt=hn.uirevision)===void 0&&(dt=nt.uirevision)),dt&&dt===tt&&((vt=on[ze])===null&&(vt=void 0),Ae(kt=(ct=b(hn,ze)).get(),vt))){ct.set(H(b(Kt,ze).get()));continue}}else T.warn("unrecognized GUI edit: "+ze+" in trace uid "+nn);delete on[ze]}}}(ne.data,ne.layout,he,ke),r.supplyDefaults(ne,{skipUpdateCalc:!0});var Re=ne._fullData,He=ne._fullLayout,Ge=He.datarevision===void 0,$e=He.transition,st=function(We,nt,ot,Ie,ze){var et=v.layoutFlags();return et.arrays={},et.rangesAltered={},et.nChanges=0,et.nChangesAnim=0,Te(nt,ot,[],{getValObject:function(tt){return i.getLayoutValObject(ot,tt)},flags:et,immutable:Ie,transition:ze,gd:We}),(et.plot||et.calc)&&(et.layoutReplot=!0),ze&&et.nChanges&&et.nChangesAnim&&(et.anim=et.nChanges===et.nChangesAnim?"all":"some"),et}(ne,ke,He,Ge,$e),Ke=st.newDataRevision,gt=function(We,nt,ot,Ie,ze,et){var tt=nt.length===ot.length;if(!ze&&!tt)return{fullReplot:!0,calc:!0};var dt,pt,vt=v.traceFlags();vt.arrays={},vt.nChanges=0,vt.nChangesAnim=0;var ct={getValObject:function(ut){var ft=i.getTraceValObject(pt,ut);return!pt._module.animatable&&ft.anim&&(ft.anim=!1),ft},flags:vt,immutable:Ie,transition:ze,newDataRevision:et,gd:We},kt={};for(dt=0;dt<nt.length;dt++)if(ot[dt]){if(pt=ot[dt]._fullInput,r.hasMakesDataTransform(pt)&&(pt=ot[dt]),kt[pt.uid])continue;kt[pt.uid]=1,Te(nt[dt]._fullInput,pt,[],ct)}return(vt.calc||vt.plot)&&(vt.fullReplot=!0),ze&&vt.nChanges&&vt.nChangesAnim&&(vt.anim=vt.nChanges===vt.nChangesAnim&&tt?"all":"some"),vt}(ne,he,Re,Ge,$e,Ke);if(ae(ne)&&(st.layoutReplot=!0),gt.calc||st.calc){ne.calcdata=void 0;for(var mt=Object.getOwnPropertyNames(He),at=0;at<mt.length;at++){var rt=mt[at],xt=rt.substring(0,5);if(xt==="xaxis"||xt==="yaxis"){var Tt=He[rt]._emptyCategories;Tt&&Tt()}}}else r.supplyDefaultsUpdateCalc(ne.calcdata,Re);var wt=[];if(De&&(ne._transitionData={},r.createTransitionData(ne),wt.push(function(){return z.addFrames(ne,De)})),He.transition&&!Ce&&(gt.anim||st.anim))st.ticks&&wt.push(y.doTicksRelayout),r.doCalcdata(ne),y.doAutoRangeAndConstraints(ne),wt.push(function(){return r.transitionFromReact(ne,gt,st,ke)});else if(gt.fullReplot||st.layoutReplot||Ce)ne._fullLayout._skipDefaults=!0,wt.push(z._doPlot);else{for(var Ot in st.arrays){var Ct=st.arrays[Ot];if(Ct.length){var Ye=e.getComponentMethod(Ot,"drawOne");if(Ye!==T.noop)for(var Xe=0;Xe<Ct.length;Xe++)Ye(ne,Ct[Xe]);else{var Ve=e.getComponentMethod(Ot,"draw");if(Ve===T.noop)throw new Error("cannot draw components: "+Ot);Ve(ne)}}}wt.push(r.previousPromises),gt.style&&wt.push(y.doTraceStyle),(gt.colorbars||st.colorbars)&&wt.push(y.doColorBars),st.legend&&wt.push(y.doLegend),st.layoutstyle&&wt.push(y.layoutStyles),st.axrange&&W(wt),st.ticks&&wt.push(y.doTicksRelayout),st.modebar&&wt.push(y.doModeBar),st.camera&&wt.push(y.doCamera),wt.push(h)}wt.push(r.rehover,r.redrag,r.reselect),(Ue=T.syncOrAsync(wt,ne))&&Ue.then||(Ue=Promise.resolve(ne))}else Ue=z.newPlot(ne,me,Ee,be);return Ue.then(function(){return ne.emit("plotly_react",{data:me,layout:Ee}),ne})},z.redraw=function(ne){if(ne=T.getGraphDiv(ne),!T.isPlotDiv(ne))throw new Error("This element is not a Plotly plot: "+ne);return f.cleanData(ne.data),f.cleanLayout(ne.layout),ne.calcdata=void 0,z._doPlot(ne).then(function(){return ne.emit("plotly_redraw"),ne})},z.relayout=te,z.restyle=I,z.setPlotConfig=function(ne){return T.extendFlat(x,ne)},z.update=oe,z._guiRelayout=ce(te),z._guiRestyle=ce(I),z._guiUpdate=ce(oe),z._storeDirectGUIEdit=function(ne,me,Ee){for(var be in Ee)F(be,b(ne,be).get(),Ee[be],me)}},72075:function(Q){var z={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},t={};(function S(k,l){for(var T in k){var b=k[T];b.valType?l[T]=b.dflt:(l[T]||(l[T]={}),S(b,l[T]))}})(z,t),Q.exports={configAttributes:z,dfltConfig:t}},86281:function(Q,z,t){var S=t(73972),k=t(71828),l=t(9012),T=t(10820),b=t(31391),d=t(85594),s=t(72075).configAttributes,e=t(30962),i=k.extendDeepAll,r=k.isPlainObject,n=k.isArrayOrTypedArray,a=k.nestedProperty,o=k.valObjectMeta,u="_isSubplotObj",p="_isLinkedToArray",c="_deprecated",x=[u,p,"_arrayAttrRegexps",c];function g(h,A,w){if(!h)return!1;if(h._isLinkedToArray){if(f(A[w]))w++;else if(w<A.length)return!1}for(;w<A.length;w++){var E=h[A[w]];if(!r(E)||(h=E,w===A.length-1))break;if(h._isLinkedToArray){if(!f(A[++w]))return!1}else if(h.valType==="info_array"){var L=A[++w];if(!f(L))return!1;var C=h.items;if(Array.isArray(C)){if(L>=C.length)return!1;if(h.dimensions===2){if(w++,A.length===w)return h;var P=A[w];if(!f(P))return!1;h=C[L][P]}else h=C[L]}else h=C}}return h}function f(h){return h===Math.round(h)&&h>=0}function y(){var h,A,w={};for(h in i(w,T),S.subplotsRegistry)if((A=S.subplotsRegistry[h]).layoutAttributes)if(Array.isArray(A.attr))for(var E=0;E<A.attr.length;E++)m(w,A,A.attr[E]);else m(w,A,A.attr==="subplot"?A.name:A.attr);for(h in S.componentsRegistry){var L=(A=S.componentsRegistry[h]).schema;if(L&&(L.subplots||L.layout)){var C=L.subplots;if(C&&C.xaxis&&!C.yaxis)for(var P in C.xaxis)delete w.yaxis[P];delete w.xaxis.shift,delete w.xaxis.autoshift}else A.name==="colorscale"?i(w,A.layoutAttributes):A.layoutAttributes&&_(w,A.layoutAttributes,A.name)}return{layoutAttributes:v(w)}}function v(h){return function(A){z.crawl(A,function(w,E,L){z.isValObject(w)?w.arrayOk!==!0&&w.valType!=="data_array"||(L[E+"src"]={valType:"string",editType:"none"}):r(w)&&(w.role="object")})}(h),function(A){z.crawl(A,function(w,E,L){if(w){var C=w[p];C&&(delete w[p],L[E]={items:{}},L[E].items[C]=w,L[E].role="object")}})}(h),function(A){(function w(E){for(var L in E)if(r(E[L]))w(E[L]);else if(Array.isArray(E[L]))for(var C=0;C<E[L].length;C++)w(E[L][C]);else E[L]instanceof RegExp&&(E[L]=E[L].toString())})(A)}(h),h}function m(h,A,w){var E=a(h,w),L=i({},A.layoutAttributes);L[u]=!0,E.set(L)}function _(h,A,w){var E=a(h,w);E.set(i(E.get()||{},A))}z.IS_SUBPLOT_OBJ=u,z.IS_LINKED_TO_ARRAY=p,z.DEPRECATED=c,z.UNDERSCORE_ATTRS=x,z.get=function(){var h={};S.allTypes.forEach(function(E){h[E]=function(L){var C,P;P=(C=S.modules[L]._module).basePlotModule;var D={type:null},G=i({},l),I=i({},C.attributes);z.crawl(I,function(F,V,q,te,$){a(G,$).set(void 0),F===void 0&&a(I,$).set(void 0)}),i(D,G),S.traceIs(L,"noOpacity")&&delete D.opacity,S.traceIs(L,"showLegend")||(delete D.showlegend,delete D.legendgroup),S.traceIs(L,"noHover")&&(delete D.hoverinfo,delete D.hoverlabel),C.selectPoints||delete D.selectedpoints,i(D,I),P.attributes&&i(D,P.attributes),D.type=L;var H={meta:C.meta||{},categories:C.categories||{},animatable:!!C.animatable,type:L,attributes:v(D)};if(C.layoutAttributes){var N={};i(N,C.layoutAttributes),H.layoutAttributes=v(N)}return C.animatable||z.crawl(H,function(F){z.isValObject(F)&&"anim"in F&&delete F.anim}),H}(E)});var A,w={};return Object.keys(S.transformsRegistry).forEach(function(E){w[E]=function(L){var C=S.transformsRegistry[L],P=i({},C.attributes);return Object.keys(S.componentsRegistry).forEach(function(D){var G=S.componentsRegistry[D];G.schema&&G.schema.transforms&&G.schema.transforms[L]&&Object.keys(G.schema.transforms[L]).forEach(function(I){_(P,G.schema.transforms[L][I],I)})}),{attributes:v(P)}}(E)}),{defs:{valObjects:o,metaKeys:x.concat(["description","role","editType","impliedEdits"]),editType:{traces:e.traces,layout:e.layout},impliedEdits:{}},traces:h,layout:y(),transforms:w,frames:(A={frames:i({},b)},v(A),A.frames),animation:v(d),config:v(s)}},z.crawl=function(h,A,w,E){var L=w||0;E=E||"",Object.keys(h).forEach(function(C){var P=h[C];if(x.indexOf(C)===-1){var D=(E?E+".":"")+C;A(P,C,h,L,D),z.isValObject(P)||r(P)&&C!=="impliedEdits"&&z.crawl(P,A,L+1,D)}})},z.isValObject=function(h){return h&&h.valType!==void 0},z.findArrayAttributes=function(h){var A,w,E=[],L=[],C=[];function P(F,V,q,te){L=L.slice(0,te).concat([V]),C=C.slice(0,te).concat([F&&F._isLinkedToArray]),F&&(F.valType==="data_array"||F.arrayOk===!0)&&(L[te-1]!=="colorbar"||V!=="ticktext"&&V!=="tickvals")&&D(A,0,"")}function D(F,V,q){var te=F[L[V]],$=q+L[V];if(V===L.length-1)n(te)&&E.push(w+$);else if(C[V]){if(Array.isArray(te))for(var W=0;W<te.length;W++)r(te[W])&&D(te[W],V+1,$+"["+W+"].")}else r(te)&&D(te,V+1,$+".")}A=h,w="",z.crawl(l,P),h._module&&h._module.attributes&&z.crawl(h._module.attributes,P);var G=h.transforms;if(G)for(var I=0;I<G.length;I++){var H=G[I],N=H._module;N&&(w="transforms["+I+"].",A=H,z.crawl(N.attributes,P))}return E},z.getTraceValObject=function(h,A){var w,E,L=A[0],C=1;if(L==="transforms"){if(A.length===1)return l.transforms;var P=h.transforms;if(!Array.isArray(P)||!P.length)return!1;var D=A[1];if(!f(D)||D>=P.length)return!1;E=(w=(S.transformsRegistry[P[D].type]||{}).attributes)&&w[A[2]],C=3}else{var G=h._module;if(G||(G=(S.modules[h.type||l.type.dflt]||{})._module),!G)return!1;if(!(E=(w=G.attributes)&&w[L])){var I=G.basePlotModule;I&&I.attributes&&(E=I.attributes[L])}E||(E=l[L])}return g(E,A,C)},z.getLayoutValObject=function(h,A){var w=function(E,L){var C,P,D,G,I=E._basePlotModules;if(I){var H;for(C=0;C<I.length;C++){if((D=I[C]).attrRegex&&D.attrRegex.test(L)){if(D.layoutAttrOverrides)return D.layoutAttrOverrides;!H&&D.layoutAttributes&&(H=D.layoutAttributes)}var N=D.baseLayoutAttrOverrides;if(N&&L in N)return N[L]}if(H)return H}var F=E._modules;if(F){for(C=0;C<F.length;C++)if((G=F[C].layoutAttributes)&&L in G)return G[L]}for(P in S.componentsRegistry){if((D=S.componentsRegistry[P]).name==="colorscale"&&L.indexOf("coloraxis")===0)return D.layoutAttributes[L];if(!D.schema&&L===D.name)return D.layoutAttributes}return L in T&&T[L]}(h,A[0]);return g(w,A,1)}},44467:function(Q,z,t){var S=t(71828),k=t(9012),l="templateitemname",T={name:{valType:"string",editType:"none"}};function b(s){return s&&typeof s=="string"}function d(s){var e=s.length-1;return s.charAt(e)!=="s"&&S.warn("bad argument to arrayDefaultKey: "+s),s.substr(0,s.length-1)+"defaults"}T[l]={valType:"string",editType:"calc"},z.templatedArray=function(s,e){return e._isLinkedToArray=s,e.name=T.name,e[l]=T[l],e},z.traceTemplater=function(s){var e,i,r={};for(e in s)i=s[e],Array.isArray(i)&&i.length&&(r[e]=0);return{newTrace:function(n){var a={type:e=S.coerce(n,{},k,"type"),_template:null};if(e in r){i=s[e];var o=r[e]%i.length;r[e]++,a._template=i[o]}return a}}},z.newContainer=function(s,e,i){var r=s._template,n=r&&(r[e]||i&&r[i]);return S.isPlainObject(n)||(n=null),s[e]={_template:n}},z.arrayTemplater=function(s,e,i){var r=s._template,n=r&&r[d(e)],a=r&&r[e];Array.isArray(a)&&a.length||(a=[]);var o={};return{newItem:function(u){var p={name:u.name,_input:u},c=p[l]=u[l];if(!b(c))return p._template=n,p;for(var x=0;x<a.length;x++){var g=a[x];if(g.name===c)return o[c]=1,p._template=g,p}return p[i]=u[i]||!1,p._template=!1,p},defaultItems:function(){for(var u=[],p=0;p<a.length;p++){var c=a[p],x=c.name;if(b(x)&&!o[x]){var g={_template:c,name:x,_input:{_templateitemname:x}};g[l]=c[l],u.push(g),o[x]=1}}return u}}},z.arrayDefaultKey=d,z.arrayEditor=function(s,e,i){var r=(S.nestedProperty(s,e).get()||[]).length,n=i._index,a=n>=r&&(i._input||{})._templateitemname;a&&(n=r);var o,u=e+"["+n+"]";function p(){o={},a&&(o[u]={},o[u][l]=a)}function c(g,f){a?S.nestedProperty(o[u],g).set(f):o[u+"."+g]=f}function x(){var g=o;return p(),g}return p(),{modifyBase:function(g,f){o[g]=f},modifyItem:c,getUpdateObj:x,applyUpdate:function(g,f){g&&c(g,f);var y=x();for(var v in y)S.nestedProperty(s,v).set(y[v])}}}},61549:function(Q,z,t){var S=t(39898),k=t(73972),l=t(74875),T=t(71828),b=t(63893),d=t(33306),s=t(7901),e=t(91424),i=t(92998),r=t(64168),n=t(89298),a=t(18783),o=t(99082),u=o.enforce,p=o.clean,c=t(71739).doAutoRange,x="start";function g(_,h,A){for(var w=0;w<A.length;w++){var E=A[w][0],L=A[w][1];if(!(E[0]>=_[1]||E[1]<=_[0])&&L[0]<h[1]&&L[1]>h[0])return!0}return!1}function f(_){var h,A,w,E,L,C,P=_._fullLayout,D=P._size,G=D.p,I=n.list(_,"",!0);if(P._paperdiv.style({width:_._context.responsive&&P.autosize&&!_._context._hasZeroWidth&&!_.layout.width?"100%":P.width+"px",height:_._context.responsive&&P.autosize&&!_._context._hasZeroHeight&&!_.layout.height?"100%":P.height+"px"}).selectAll(".main-svg").call(e.setSize,P.width,P.height),_._context.setBackground(_,P.paper_bgcolor),z.drawMainTitle(_),r.manage(_),!P._has("cartesian"))return l.previousPromises(_);function H(Re,He,Ge){var $e=Re._lw/2;return Re._id.charAt(0)==="x"?He?Ge==="top"?He._offset-G-$e:He._offset+He._length+G+$e:D.t+D.h*(1-(Re.position||0))+$e%1:He?Ge==="right"?He._offset+He._length+G+$e:He._offset-G-$e:D.l+D.w*(Re.position||0)+$e%1}for(h=0;h<I.length;h++){var N=(E=I[h])._anchorAxis;E._linepositions={},E._lw=e.crispRound(_,E.linewidth,1),E._mainLinePosition=H(E,N,E.side),E._mainMirrorPosition=E.mirror&&N?H(E,N,a.OPPOSITE_SIDE[E.side]):null}var F=[],V=[],q=[],te=s.opacity(P.paper_bgcolor)===1&&s.opacity(P.plot_bgcolor)===1&&P.paper_bgcolor===P.plot_bgcolor;for(A in P._plots)if((w=P._plots[A]).mainplot)w.bg&&w.bg.remove(),w.bg=void 0;else{var $=w.xaxis.domain,W=w.yaxis.domain,Z=w.plotgroup;if(g($,W,q)){var J=Z.node(),ee=w.bg=T.ensureSingle(Z,"rect","bg");J.insertBefore(ee.node(),J.childNodes[0]),V.push(A)}else Z.select("rect.bg").remove(),q.push([$,W]),te||(F.push(A),V.push(A))}var re,ae,oe,ce,pe,ve,we,xe,ge,Oe,Ae,Te,se,le=P._bgLayer.selectAll(".bg").data(F);for(le.enter().append("rect").classed("bg",!0),le.exit().remove(),le.each(function(Re){P._plots[Re].bg=S.select(this)}),h=0;h<V.length;h++)w=P._plots[V[h]],L=w.xaxis,C=w.yaxis,w.bg&&L._offset!==void 0&&C._offset!==void 0&&w.bg.call(e.setRect,L._offset-G,C._offset-G,L._length+2*G,C._length+2*G).call(s.fill,P.plot_bgcolor).style("stroke-width",0);if(!P._hasOnlyLargeSploms)for(A in P._plots){w=P._plots[A],L=w.xaxis,C=w.yaxis;var ne,me,Ee=w.clipId="clip"+P._uid+A+"plot",be=T.ensureSingleById(P._clips,"clipPath",Ee,function(Re){Re.classed("plotclip",!0).append("rect")});w.clipRect=be.select("rect").attr({width:L._length,height:C._length}),e.setTranslate(w.plot,L._offset,C._offset),w._hasClipOnAxisFalse?(ne=null,me=Ee):(ne=Ee,me=null),e.setClipUrl(w.plot,ne,_),w.layerClipId=me}function De(Re){return"M"+re+","+Re+"H"+ae}function Ue(Re){return"M"+L._offset+","+Re+"h"+L._length}function he(Re){return"M"+Re+","+xe+"V"+we}function ke(Re){return C._shift!==void 0&&(Re+=C._shift),"M"+Re+","+C._offset+"v"+C._length}function _e(Re,He,Ge){if(!Re.showline||A!==Re._mainSubplot)return"";if(!Re._anchorAxis)return Ge(Re._mainLinePosition);var $e=He(Re._mainLinePosition);return Re.mirror&&($e+=He(Re._mainMirrorPosition)),$e}for(A in P._plots){w=P._plots[A],L=w.xaxis,C=w.yaxis;var Ce="M0,0";y(L,A)&&(pe=m(L,"left",C,I),re=L._offset-(pe?G+pe:0),ve=m(L,"right",C,I),ae=L._offset+L._length+(ve?G+ve:0),oe=H(L,C,"bottom"),ce=H(L,C,"top"),!(se=!L._anchorAxis||A!==L._mainSubplot)||L.mirror!=="allticks"&&L.mirror!=="all"||(L._linepositions[A]=[oe,ce]),Ce=_e(L,De,Ue),se&&L.showline&&(L.mirror==="all"||L.mirror==="allticks")&&(Ce+=De(oe)+De(ce)),w.xlines.style("stroke-width",L._lw+"px").call(s.stroke,L.showline?L.linecolor:"rgba(0,0,0,0)")),w.xlines.attr("d",Ce);var Fe="M0,0";y(C,A)&&(Ae=m(C,"bottom",L,I),we=C._offset+C._length+(Ae?G:0),Te=m(C,"top",L,I),xe=C._offset-(Te?G:0),ge=H(C,L,"left"),Oe=H(C,L,"right"),!(se=!C._anchorAxis||A!==C._mainSubplot)||C.mirror!=="allticks"&&C.mirror!=="all"||(C._linepositions[A]=[ge,Oe]),Fe=_e(C,he,ke),se&&C.showline&&(C.mirror==="all"||C.mirror==="allticks")&&(Fe+=he(ge)+he(Oe)),w.ylines.style("stroke-width",C._lw+"px").call(s.stroke,C.showline?C.linecolor:"rgba(0,0,0,0)")),w.ylines.attr("d",Fe)}return n.makeClipPaths(_),l.previousPromises(_)}function y(_,h){return(_.ticks||_.showline)&&(h===_._mainSubplot||_.mirror==="all"||_.mirror==="allticks")}function v(_,h,A){if(!A.showline||!A._lw)return!1;if(A.mirror==="all"||A.mirror==="allticks")return!0;var w=A._anchorAxis;if(!w)return!1;var E=a.FROM_BL[h];return A.side===h?w.domain[E]===_.domain[E]:A.mirror&&w.domain[1-E]===_.domain[1-E]}function m(_,h,A,w){if(v(_,h,A))return A._lw;for(var E=0;E<w.length;E++){var L=w[E];if(L._mainAxis===A._mainAxis&&v(_,h,L))return L._lw}return 0}z.layoutStyles=function(_){return T.syncOrAsync([l.doAutoMargin,f],_)},z.drawMainTitle=function(_){var h,A=_._fullLayout.title,w=_._fullLayout,E=function(H){var N=H.title,F="middle";return T.isRightAnchor(N)?F="end":T.isLeftAnchor(N)&&(F=x),F}(w),L=function(H){var N=H.title,F="0em";return T.isTopAnchor(N)?F=a.CAP_SHIFT+"em":T.isMiddleAnchor(N)&&(F=a.MID_SHIFT+"em"),F}(w),C=function(H,N){var F=H.title,V=H._size,q=0;return N!=="0em"&&N?N===a.CAP_SHIFT+"em"&&(q=F.pad.t):q=-F.pad.b,F.y==="auto"?V.t/2:F.yref==="paper"?V.t+V.h-V.h*F.y+q:H.height-H.height*F.y+q}(w,L),P=function(H,N){var F=H.title,V=H._size,q=0;return N===x?q=F.pad.l:N==="end"&&(q=-F.pad.r),F.xref==="paper"?V.l+V.w*F.x+q:H.width*F.x+q}(w,E);if(i.draw(_,"gtitle",{propContainer:w,propName:"title.text",placeholder:w._dfltTitle.plot,attributes:{x:P,y:C,"text-anchor":E,dy:L}}),A.text&&A.automargin){var D=S.selectAll(".gtitle"),G=e.bBox(D.node()).height,I=function(H,N,F){var V=N.y,q=N.yanchor,te=V>.5?"t":"b",$=H._fullLayout.margin[te],W=0;return N.yref==="paper"?W=F+N.pad.t+N.pad.b:N.yref==="container"&&(W=function(Z,J,ee,re,ae){var oe=0;return ee==="middle"&&(oe+=ae/2),Z==="t"?(ee==="top"&&(oe+=ae),oe+=re-J*re):(ee==="bottom"&&(oe+=ae),oe+=J*re),oe}(te,V,q,H._fullLayout.height,F)+N.pad.t+N.pad.b),W>$?W:0}(_,A,G);I>0&&(function(H,N,F,V){var q="title.automargin",te=H._fullLayout.title,$=te.y>.5?"t":"b",W={x:te.x,y:te.y,t:0,b:0},Z={};te.yref==="paper"&&function(J,ee,re,ae,oe){var ce=ee.yref==="paper"?J._fullLayout._size.h:J._fullLayout.height,pe=T.isTopAnchor(ee)?ae:ae-oe,ve=re==="b"?ce-pe:pe;return!(T.isTopAnchor(ee)&&re==="t"||T.isBottomAnchor(ee)&&re==="b")&&ve<oe}(H,te,$,N,V)?W[$]=F:te.yref==="container"&&(Z[$]=F,H._fullLayout._reservedMargin[q]=Z),l.allowAutoMargin(H,q),l.autoMargin(H,q,W)}(_,C,I,G),D.attr({x:P,y:C,"text-anchor":E,dy:(h=A.yanchor,h==="top"?a.CAP_SHIFT+.3+"em":h==="bottom"?"-0.3em":a.MID_SHIFT+"em")}).call(b.positionText,P,C))}},z.doTraceStyle=function(_){var h,A=_.calcdata,w=[];for(h=0;h<A.length;h++){var E=A[h],L=E[0]||{},C=L.trace||{},P=C._module||{},D=P.arraysToCalcdata;D&&D(E,C);var G=P.editStyle;G&&w.push({fn:G,cd0:L})}if(w.length){for(h=0;h<w.length;h++){var I=w[h];I.fn(_,I.cd0)}d(_),z.redrawReglTraces(_)}return l.style(_),k.getComponentMethod("legend","draw")(_),l.previousPromises(_)},z.doColorBars=function(_){return k.getComponentMethod("colorbar","draw")(_),l.previousPromises(_)},z.layoutReplot=function(_){var h=_.layout;return _.layout=void 0,k.call("_doPlot",_,"",h)},z.doLegend=function(_){return k.getComponentMethod("legend","draw")(_),l.previousPromises(_)},z.doTicksRelayout=function(_){return n.draw(_,"redraw"),_._fullLayout._hasOnlyLargeSploms&&(k.subplotsRegistry.splom.updateGrid(_),d(_),z.redrawReglTraces(_)),z.drawMainTitle(_),l.previousPromises(_)},z.doModeBar=function(_){var h=_._fullLayout;r.manage(_);for(var A=0;A<h._basePlotModules.length;A++){var w=h._basePlotModules[A].updateFx;w&&w(_)}return l.previousPromises(_)},z.doCamera=function(_){for(var h=_._fullLayout,A=h._subplots.gl3d,w=0;w<A.length;w++){var E=h[A[w]];E._scene.setViewport(E)}},z.drawData=function(_){var h=_._fullLayout;d(_);for(var A=h._basePlotModules,w=0;w<A.length;w++)A[w].plot(_);return z.redrawReglTraces(_),l.style(_),k.getComponentMethod("selections","draw")(_),k.getComponentMethod("shapes","draw")(_),k.getComponentMethod("annotations","draw")(_),k.getComponentMethod("images","draw")(_),h._replotting=!1,l.previousPromises(_)},z.redrawReglTraces=function(_){var h=_._fullLayout;if(h._has("regl")){var A,w,E=_._fullData,L=[],C=[];for(h._hasOnlyLargeSploms&&h._splomGrid.draw(),A=0;A<E.length;A++){var P=E[A];P.visible===!0&&P._length!==0&&(P.type==="splom"?h._splomScenes[P.uid].draw():P.type==="scattergl"?T.pushUnique(L,P.xaxis+P.yaxis):P.type==="scatterpolargl"&&T.pushUnique(C,P.subplot))}for(A=0;A<L.length;A++)(w=h._plots[L[A]])._scene&&w._scene.draw();for(A=0;A<C.length;A++)(w=h[C[A]]._subplot)._scene&&w._scene.draw()}},z.doAutoRangeAndConstraints=function(_){for(var h,A=n.list(_,"",!0),w={},E=0;E<A.length;E++)if(!w[(h=A[E])._id]){w[h._id]=1,p(_,h),c(_,h);var L=h._matchGroup;if(L)for(var C in L){var P=n.getFromId(_,C);c(_,P,h.range),w[C]=1}}u(_)},z.finalDraw=function(_){k.getComponentMethod("rangeslider","draw")(_),k.getComponentMethod("rangeselector","draw")(_)},z.drawMarginPushers=function(_){k.getComponentMethod("legend","draw")(_),k.getComponentMethod("rangeselector","draw")(_),k.getComponentMethod("sliders","draw")(_),k.getComponentMethod("updatemenus","draw")(_),k.getComponentMethod("colorbar","draw")(_)}},96318:function(Q,z,t){var S=t(71828),k=S.isPlainObject,l=t(86281),T=t(74875),b=t(9012),d=t(44467),s=t(72075).dfltConfig;function e(c,x){c=S.extendDeep({},c);var g,f,y=Object.keys(c).sort();function v(w,E,L){if(k(E)&&k(w))e(w,E);else if(Array.isArray(E)&&Array.isArray(w)){var C=d.arrayTemplater({_template:c},L);for(f=0;f<E.length;f++){var P=E[f],D=C.newItem(P)._template;D&&e(D,P)}var G=C.defaultItems();for(f=0;f<G.length;f++)E.push(G[f]._template);for(f=0;f<E.length;f++)delete E[f].templateitemname}}for(g=0;g<y.length;g++){var m=y[g],_=c[m];if(m in x?v(_,x[m],m):x[m]=_,i(m)===m)for(var h in x){var A=i(h);h===A||A!==m||h in c||v(_,x[h],m)}}}function i(c){return c.replace(/[0-9]+$/,"")}function r(c,x,g,f,y){var v=y&&g(y);for(var m in c){var _=c[m],h=o(c,m,f),A=o(c,m,y),w=g(A);if(!w){var E=i(m);E!==m&&(w=g(A=o(c,E,y)))}if(!(v&&v===w||!w||w._noTemplating||w.valType==="data_array"||w.arrayOk&&Array.isArray(_)))if(!w.valType&&k(_))r(_,x,g,h,A);else if(w._isLinkedToArray&&Array.isArray(_))for(var L=!1,C=0,P={},D=0;D<_.length;D++){var G=_[D];if(k(G)){var I=G.name;if(I)P[I]||(r(G,x,g,o(_,C,h),o(_,C,A)),C++,P[I]=1);else if(!L){var H=o(c,d.arrayDefaultKey(m),f),N=o(_,C,h);r(G,x,g,N,o(_,C,A));var F=S.nestedProperty(x,N);S.nestedProperty(x,H).set(F.get()),F.set(null),L=!0}}}else S.nestedProperty(x,h).set(_)}}function n(c,x){return l.getLayoutValObject(c,S.nestedProperty({},x).parts)}function a(c,x){return l.getTraceValObject(c,S.nestedProperty({},x).parts)}function o(c,x,g){return g?Array.isArray(c)?g+"["+x+"]":g+"."+x:x}function u(c){for(var x=0;x<c.length;x++)if(k(c[x]))return!0}function p(c){var x;switch(c.code){case"data":x="The template has no key data.";break;case"layout":x="The template has no key layout.";break;case"missing":x=c.path?"There are no templates for item "+c.path+" with name "+c.templateitemname:"There are no templates for trace "+c.index+", of type "+c.traceType+".";break;case"unused":x=c.path?"The template item at "+c.path+" was not used in constructing the plot.":c.dataCount?"Some of the templates of type "+c.traceType+" were not used. The template has "+c.templateCount+" traces, the data only has "+c.dataCount+" of this type.":"The template has "+c.templateCount+" traces of type "+c.traceType+" but there are none in the data.";break;case"reused":x="Some of the templates of type "+c.traceType+" were used more than once. The template has "+c.templateCount+" traces, the data has "+c.dataCount+" of this type."}return c.msg=x,c}z.makeTemplate=function(c){c=S.isPlainObject(c)?c:S.getGraphDiv(c),c=S.extendDeep({_context:s},{data:c.data,layout:c.layout}),T.supplyDefaults(c);var x=c.data||[],g=c.layout||{};g._basePlotModules=c._fullLayout._basePlotModules,g._modules=c._fullLayout._modules;var f={data:{},layout:{}};x.forEach(function(C){var P={};r(C,P,a.bind(null,C));var D=S.coerce(C,{},b,"type"),G=f.data[D];G||(G=f.data[D]=[]),G.push(P)}),r(g,f.layout,n.bind(null,g)),delete f.layout.template;var y=g.template;if(k(y)){var v,m,_,h,A,w,E=y.layout;k(E)&&e(E,f.layout);var L=y.data;if(k(L)){for(m in f.data)if(_=L[m],Array.isArray(_)){for(w=(A=f.data[m]).length,h=_.length,v=0;v<w;v++)e(_[v%h],A[v]);for(v=w;v<h;v++)A.push(S.extendDeep({},_[v]))}for(m in L)m in f.data||(f.data[m]=S.extendDeep([],L[m]))}}return f},z.validateTemplate=function(c,x){var g=S.extendDeep({},{_context:s,data:c.data,layout:c.layout}),f=g.layout||{};k(x)||(x=f.template||{});var y=x.layout,v=x.data,m=[];g.layout=f,g.layout.template=x,T.supplyDefaults(g);var _=g._fullLayout,h=g._fullData,A={};if(k(y)?(function G(I,H){for(var N in I)if(N.charAt(0)!=="_"&&k(I[N])){var F,V=i(N),q=[];for(F=0;F<H.length;F++)q.push(o(I,N,H[F])),V!==N&&q.push(o(I,V,H[F]));for(F=0;F<q.length;F++)A[q[F]]=1;G(I[N],q)}}(_,["layout"]),function G(I,H){for(var N in I)if(N.indexOf("defaults")===-1&&k(I[N])){var F=o(I,N,H);A[F]?G(I[N],F):m.push({code:"unused",path:F})}}(y,"layout")):m.push({code:"layout"}),k(v)){for(var w,E={},L=0;L<h.length;L++){var C=h[L];E[w=C.type]=(E[w]||0)+1,C._fullInput._template||m.push({code:"missing",index:C._fullInput.index,traceType:w})}for(w in v){var P=v[w].length,D=E[w]||0;P>D?m.push({code:"unused",traceType:w,templateCount:P,dataCount:D}):D>P&&m.push({code:"reused",traceType:w,templateCount:P,dataCount:D})}}else m.push({code:"data"});if(function G(I,H){for(var N in I)if(N.charAt(0)!=="_"){var F=I[N],V=o(I,N,H);k(F)?(Array.isArray(I)&&F._template===!1&&F.templateitemname&&m.push({code:"missing",path:V,templateitemname:F.templateitemname}),G(F,V)):Array.isArray(F)&&u(F)&&G(F,V)}}({data:h,layout:_},""),m.length)return m.map(p)}},403:function(Q,z,t){var S=t(92770),k=t(72391),l=t(74875),T=t(71828),b=t(25095),d=t(5900),s=t(70942),e=t(11506).version,i={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};Q.exports=function(r,n){var a,o,u,p;function c(D){return!(D in n)||T.validate(n[D],i[D])}if(n=n||{},T.isPlainObject(r)?(a=r.data||[],o=r.layout||{},u=r.config||{},p={}):(r=T.getGraphDiv(r),a=T.extendDeep([],r.data),o=T.extendDeep({},r.layout),u=r._context,p=r._fullLayout||{}),!c("width")&&n.width!==null||!c("height")&&n.height!==null)throw new Error("Height and width should be pixel values.");if(!c("format"))throw new Error("Export format is not "+T.join2(i.format.values,", "," or ")+".");var x={};function g(D,G){return T.coerce(n,x,i,D,G)}var f=g("format"),y=g("width"),v=g("height"),m=g("scale"),_=g("setBackground"),h=g("imageDataOnly"),A=document.createElement("div");A.style.position="absolute",A.style.left="-5000px",document.body.appendChild(A);var w=T.extendFlat({},o);y?w.width=y:n.width===null&&S(p.width)&&(w.width=p.width),v?w.height=v:n.height===null&&S(p.height)&&(w.height=p.height);var E=T.extendFlat({},u,{_exportedPlot:!0,staticPlot:!0,setBackground:_}),L=b.getRedrawFunc(A);function C(){return new Promise(function(D){setTimeout(D,b.getDelay(A._fullLayout))})}function P(){return new Promise(function(D,G){var I=d(A,f,m),H=A._fullLayout.width,N=A._fullLayout.height;function F(){k.purge(A),document.body.removeChild(A)}if(f==="full-json"){var V=l.graphJson(A,!1,"keepdata","object",!0,!0);return V.version=e,V=JSON.stringify(V),F(),D(h?V:b.encodeJSON(V))}if(F(),f==="svg")return D(h?I:b.encodeSVG(I));var q=document.createElement("canvas");q.id=T.randstr(),s({format:f,width:H,height:N,scale:m,canvas:q,svg:I,promise:!0}).then(D).catch(G)})}return new Promise(function(D,G){k.newPlot(A,a,w,E).then(L).then(C).then(P).then(function(I){D(function(H){return h?H.replace(b.IMAGE_URL_PREFIX,""):H}(I))}).catch(function(I){G(I)})})}},84936:function(Q,z,t){var S=t(71828),k=t(74875),l=t(86281),T=t(72075).dfltConfig,b=S.isPlainObject,d=Array.isArray,s=S.isArrayOrTypedArray;function e(c,x,g,f,y,v){v=v||[];for(var m=Object.keys(c),_=0;_<m.length;_++){var h=m[_];if(h!=="transforms"){var A=v.slice();A.push(h);var w=c[h],E=x[h],L=o(g,h),C=(L||{}).valType,P=C==="info_array",D=C==="colorscale",G=(L||{}).items;if(a(g,h))if(b(w)&&b(E)&&C!=="any")e(w,E,L,f,y,A);else if(P&&d(w)){w.length>E.length&&f.push(n("unused",y,A.concat(E.length)));var I,H,N,F,V,q=E.length,te=Array.isArray(G);if(te&&(q=Math.min(q,G.length)),L.dimensions===2)for(H=0;H<q;H++)if(d(w[H])){w[H].length>E[H].length&&f.push(n("unused",y,A.concat(H,E[H].length)));var $=E[H].length;for(I=0;I<(te?Math.min($,G[H].length):$);I++)N=te?G[H][I]:G,F=w[H][I],V=E[H][I],S.validate(F,N)?V!==F&&V!==+F&&f.push(n("dynamic",y,A.concat(H,I),F,V)):f.push(n("value",y,A.concat(H,I),F))}else f.push(n("array",y,A.concat(H),w[H]));else for(H=0;H<q;H++)N=te?G[H]:G,F=w[H],V=E[H],S.validate(F,N)?V!==F&&V!==+F&&f.push(n("dynamic",y,A.concat(H),F,V)):f.push(n("value",y,A.concat(H),F))}else if(L.items&&!P&&d(w)){var W,Z,J=G[Object.keys(G)[0]],ee=[];for(W=0;W<E.length;W++){var re=E[W]._index||W;if((Z=A.slice()).push(re),b(w[re])&&b(E[W])){ee.push(re);var ae=w[re],oe=E[W];b(ae)&&ae.visible!==!1&&oe.visible===!1?f.push(n("invisible",y,Z)):e(ae,oe,J,f,y,Z)}}for(W=0;W<w.length;W++)(Z=A.slice()).push(W),b(w[W])?ee.indexOf(W)===-1&&f.push(n("unused",y,Z)):f.push(n("object",y,Z,w[W]))}else!b(w)&&b(E)?f.push(n("object",y,A,w)):s(w)||!s(E)||P||D?h in x?S.validate(w,L)?L.valType==="enumerated"&&(L.coerceNumber&&w!==+E||w!==E)&&f.push(n("dynamic",y,A,w,E)):f.push(n("value",y,A,w)):f.push(n("unused",y,A,w)):f.push(n("array",y,A,w));else f.push(n("schema",y,A))}}return f}Q.exports=function(c,x){c===void 0&&(c=[]),x===void 0&&(x={});var g,f,y=l.get(),v=[],m={_context:S.extendFlat({},T)};d(c)?(m.data=S.extendDeep([],c),g=c):(m.data=[],g=[],v.push(n("array","data"))),b(x)?(m.layout=S.extendDeep({},x),f=x):(m.layout={},f={},arguments.length>1&&v.push(n("object","layout"))),k.supplyDefaults(m);for(var _=m._fullData,h=g.length,A=0;A<h;A++){var w=g[A],E=["data",A];if(b(w)){var L=_[A],C=L.type,P=y.traces[C].attributes;P.type={valType:"enumerated",values:[C]},L.visible===!1&&w.visible!==!1&&v.push(n("invisible",E)),e(w,L,P,v,E);var D=w.transforms,G=L.transforms;if(D){d(D)||v.push(n("array",E,["transforms"])),E.push("transforms");for(var I=0;I<D.length;I++){var H=["transforms",I],N=D[I].type;if(b(D[I])){var F=y.transforms[N]?y.transforms[N].attributes:{};F.type={valType:"enumerated",values:Object.keys(y.transforms)},e(D[I],G[I],F,v,E,H)}else v.push(n("object",E,H))}}}else v.push(n("object",E))}var V=m._fullLayout,q=function(te,$){for(var W=te.layout.layoutAttributes,Z=0;Z<$.length;Z++){var J=$[Z],ee=te.traces[J.type],re=ee.layoutAttributes;re&&(J.subplot?S.extendFlat(W[ee.attributes.subplot.dflt],re):S.extendFlat(W,re))}return W}(y,_);return e(f,V,q,v,"layout"),v.length===0?void 0:v};var i={object:function(c,x){return(c==="layout"&&x===""?"The layout argument":c[0]==="data"&&x===""?"Trace "+c[1]+" in the data argument":r(c)+"key "+x)+" must be linked to an object container"},array:function(c,x){return(c==="data"?"The data argument":r(c)+"key "+x)+" must be linked to an array container"},schema:function(c,x){return r(c)+"key "+x+" is not part of the schema"},unused:function(c,x,g){var f=b(g)?"container":"key";return r(c)+f+" "+x+" did not get coerced"},dynamic:function(c,x,g,f){return[r(c)+"key",x,"(set to '"+g+"')","got reset to","'"+f+"'","during defaults."].join(" ")},invisible:function(c,x){return(x?r(c)+"item "+x:"Trace "+c[1])+" got defaulted to be not visible"},value:function(c,x,g){return[r(c)+"key "+x,"is set to an invalid value ("+g+")"].join(" ")}};function r(c){return d(c)?"In data trace "+c[1]+", ":"In "+c+", "}function n(c,x,g,f,y){var v,m;g=g||"",d(x)?(v=x[0],m=x[1]):(v=x,m=null);var _=function(A){if(!d(A))return String(A);for(var w="",E=0;E<A.length;E++){var L=A[E];typeof L=="number"?w=w.substr(0,w.length-1)+"["+L+"]":w+=L,E<A.length-1&&(w+=".")}return w}(g),h=i[c](x,_,f,y);return S.log(h),{code:c,container:v,trace:m,path:g,astr:_,msg:h}}function a(c,x){var g=p(x),f=g.keyMinusId,y=g.id;return!!(f in c&&c[f]._isSubplotObj&&y)||x in c}function o(c,x){return x in c?c[x]:c[p(x).keyMinusId]}var u=S.counterRegex("([a-z]+)");function p(c){var x=c.match(u);return{keyMinusId:x&&x[1],id:x&&x[2]}}},85594:function(Q){Q.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},85501:function(Q,z,t){var S=t(71828),k=t(44467);Q.exports=function(l,T,b){var d,s,e=b.name,i=b.inclusionAttr||"visible",r=T[e],n=S.isArrayOrTypedArray(l[e])?l[e]:[],a=T[e]=[],o=k.arrayTemplater(T,e,i);for(d=0;d<n.length;d++){var u=n[d];S.isPlainObject(u)?s=o.newItem(u):(s=o.newItem({}))[i]=!1,s._index=d,s[i]!==!1&&b.handleItemDefaults(u,s,T,b),a.push(s)}var p=o.defaultItems();for(d=0;d<p.length;d++)(s=p[d])._index=a.length,b.handleItemDefaults({},s,T,b,{}),a.push(s);if(S.isArrayOrTypedArray(r)){var c=Math.min(r.length,a.length);for(d=0;d<c;d++)S.relinkPrivateKeys(a[d],r[d])}return a}},9012:function(Q,z,t){var S=t(41940),k=t(77914);Q.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:S({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:k.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},42973:function(Q,z,t){var S=t(92770),k=t(71828),l=k.dateTime2ms,T=k.incrementMonth,b=t(50606).ONEAVGMONTH;Q.exports=function(d,s,e,i){if(s.type!=="date")return{vals:i};var r=d[e+"periodalignment"];if(!r)return{vals:i};var n,a=d[e+"period"];if(S(a)){if((a=+a)<=0)return{vals:i}}else if(typeof a=="string"&&a.charAt(0)==="M"){var o=+a.substring(1);if(!(o>0&&Math.round(o)===o))return{vals:i};n=o}for(var u=s.calendar,p=r==="start",c=r==="end",x=d[e+"period0"],g=l(x,u)||0,f=[],y=[],v=[],m=i.length,_=0;_<m;_++){var h,A,w,E=i[_];if(n){for(h=Math.round((E-g)/(n*b)),w=T(g,n*h,u);w>E;)w=T(w,-n,u);for(;w<=E;)w=T(w,n,u);A=T(w,-n,u)}else{for(w=g+(h=Math.round((E-g)/a))*a;w>E;)w-=a;for(;w<=E;)w+=a;A=w-a}f[_]=p?A:c?w:(A+w)/2,y[_]=A,v[_]=w}return{vals:f,starts:y,ends:v}}},89502:function(Q){Q.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},71739:function(Q,z,t){var S=t(39898),k=t(92770),l=t(71828),T=t(50606).FP_SAFE,b=t(73972),d=t(91424),s=t(41675),e=s.getFromId,i=s.isLinked;function r(v,m){var _,h,A=[],w=v._fullLayout,E=a(w,m,0),L=a(w,m,1),C=u(v,m),P=C.min,D=C.max;if(P.length===0||D.length===0)return l.simpleMap(m.range,m.r2l);var G=P[0].val,I=D[0].val;for(_=1;_<P.length&&G===I;_++)G=Math.min(G,P[_].val);for(_=1;_<D.length&&G===I;_++)I=Math.max(I,D[_].val);var H=!1;if(m.range){var N=l.simpleMap(m.range,m.r2l);H=N[1]<N[0]}m.autorange==="reversed"&&(H=!0,m.autorange=!0);var F,V,q,te,$,W,Z=m.rangemode,J=Z==="tozero",ee=Z==="nonnegative",re=m._length,ae=re/10,oe=0;for(_=0;_<P.length;_++)for(F=P[_],h=0;h<D.length;h++)(W=(V=D[h]).val-F.val-n(m,F.val,V.val))>0&&(($=re-E(F)-L(V))>ae?W/$>oe&&(q=F,te=V,oe=W/$):W/re>oe&&(q={val:F.val,nopad:1},te={val:V.val,nopad:1},oe=W/re));if(G===I){var ce=G-1,pe=G+1;if(J)if(G===0)A=[0,1];else{var ve=(G>0?D:P).reduce(function(xe,ge){return Math.max(xe,L(ge))},0),we=G/(1-Math.min(.5,ve/re));A=G>0?[0,we]:[we,0]}else A=ee?[Math.max(0,ce),Math.max(1,pe)]:[ce,pe]}else J?(q.val>=0&&(q={val:0,nopad:1}),te.val<=0&&(te={val:0,nopad:1})):ee&&(q.val-oe*E(q)<0&&(q={val:0,nopad:1}),te.val<=0&&(te={val:1,nopad:1})),oe=(te.val-q.val-n(m,F.val,V.val))/(re-E(q)-L(te)),A=[q.val-oe*E(q),te.val+oe*L(te)];return H&&A.reverse(),l.simpleMap(A,m.l2r||Number)}function n(v,m,_){var h=0;if(v.rangebreaks)for(var A=v.locateBreaks(m,_),w=0;w<A.length;w++){var E=A[w];h+=E.max-E.min}return h}function a(v,m,_){var h=.05*m._length,A=m._anchorAxis||{};if((m.ticklabelposition||"").indexOf("inside")!==-1||(A.ticklabelposition||"").indexOf("inside")!==-1){var w=m.autorange==="reversed";if(!w){var E=l.simpleMap(m.range,m.r2l);w=E[1]<E[0]}w&&(_=!_)}var L=0;return i(v,m._id)||(L=function(C,P,D){var G=0,I=P._id.charAt(0)==="x";for(var H in C._plots){var N=C._plots[H];if(P._id===N.xaxis._id||P._id===N.yaxis._id){var F=(I?N.yaxis:N.xaxis)||{};if((F.ticklabelposition||"").indexOf("inside")!==-1&&(!D&&(F.side==="left"||F.side==="bottom")||D&&(F.side==="top"||F.side==="right"))){if(F._vals){var V=l.deg2rad(F._tickAngles[F._id+"tick"]||0),q=Math.abs(Math.cos(V)),te=Math.abs(Math.sin(V));if(!F._vals[0].bb){var $=F._id+"tick";F._selections[$].each(function(re){var ae=S.select(this);ae.select(".text-math-group").empty()&&(re.bb=d.bBox(ae.node()))})}for(var W=0;W<F._vals.length;W++){var Z=F._vals[W].bb;if(Z){var J=2*o+Z.width,ee=2*o+Z.height;G=Math.max(G,I?Math.max(J*q,ee*te):Math.max(ee*q,J*te))}}}F.ticks==="inside"&&F.ticklabelposition==="inside"&&(G+=F.ticklen||0)}}}return G}(v,m,_)),h=Math.max(L,h),m.constrain==="domain"&&m._inputDomain&&(h*=(m._inputDomain[1]-m._inputDomain[0])/(m.domain[1]-m.domain[0])),function(C){return C.nopad?0:C.pad+(C.extrapad?h:L)}}Q.exports={getAutoRange:r,makePadFn:a,doAutoRange:function(v,m,_){if(m.setScale(),m.autorange){m.range=_?_.slice():r(v,m),m._r=m.range.slice(),m._rl=l.simpleMap(m._r,m.r2l);var h=m._input,A={};A[m._attr+".range"]=m.range,A[m._attr+".autorange"]=m.autorange,b.call("_storeDirectGUIEdit",v.layout,v._fullLayout._preGUI,A),h.range=m.range.slice(),h.autorange=m.autorange}var w=m._anchorAxis;if(w&&w.rangeslider){var E=w.rangeslider[m._name];E&&E.rangemode==="auto"&&(E.range=r(v,m)),w._input.rangeslider[m._name]=l.extendFlat({},E)}},findExtremes:function(v,m,_){_||(_={}),v._m||v.setScale();var h,A,w,E,L,C,P,D,G,I=[],H=[],N=m.length,F=_.padded||!1,V=_.tozero&&(v.type==="linear"||v.type==="-"),q=v.type==="log",te=!1,$=_.vpadLinearized||!1;function W(pe){if(Array.isArray(pe))return te=!0,function(we){return Math.max(Number(pe[we]||0),0)};var ve=Math.max(Number(pe||0),0);return function(){return ve}}var Z=W((v._m>0?_.ppadplus:_.ppadminus)||_.ppad||0),J=W((v._m>0?_.ppadminus:_.ppadplus)||_.ppad||0),ee=W(_.vpadplus||_.vpad),re=W(_.vpadminus||_.vpad);if(!te){if(D=1/0,G=-1/0,q)for(h=0;h<N;h++)(A=m[h])<D&&A>0&&(D=A),A>G&&A<T&&(G=A);else for(h=0;h<N;h++)(A=m[h])<D&&A>-T&&(D=A),A>G&&A<T&&(G=A);m=[D,G],N=2}var ae={tozero:V,extrapad:F};function oe(pe){w=m[pe],k(w)&&(C=Z(pe),P=J(pe),$?(E=v.c2l(w)-re(pe),L=v.c2l(w)+ee(pe)):(D=w-re(pe),G=w+ee(pe),q&&D<G/10&&(D=G/10),E=v.c2l(D),L=v.c2l(G)),V&&(E=Math.min(0,E),L=Math.max(0,L)),g(E)&&p(I,E,P,ae),g(L)&&c(H,L,C,ae))}var ce=Math.min(6,N);for(h=0;h<ce;h++)oe(h);for(h=N-1;h>=ce;h--)oe(h);return{min:I,max:H,opts:_}},concatExtremes:u};var o=3;function u(v,m,_){var h,A,w,E=m._id,L=v._fullData,C=v._fullLayout,P=[],D=[];function G(V,q){for(h=0;h<q.length;h++){var te=V[q[h]],$=(te._extremes||{})[E];if(te.visible===!0&&$){for(A=0;A<$.min.length;A++)w=$.min[A],p(P,w.val,w.pad,{extrapad:w.extrapad});for(A=0;A<$.max.length;A++)w=$.max[A],c(D,w.val,w.pad,{extrapad:w.extrapad})}}}if(G(L,m._traceIndices),G(C.annotations||[],m._annIndices||[]),G(C.shapes||[],m._shapeIndices||[]),m._matchGroup&&!_){for(var I in m._matchGroup)if(I!==m._id){var H=e(v,I),N=u(v,H,!0),F=m._length/H._length;for(A=0;A<N.min.length;A++)w=N.min[A],p(P,w.val,w.pad*F,{extrapad:w.extrapad});for(A=0;A<N.max.length;A++)w=N.max[A],c(D,w.val,w.pad*F,{extrapad:w.extrapad})}}return{min:P,max:D}}function p(v,m,_,h){x(v,m,_,h,f)}function c(v,m,_,h){x(v,m,_,h,y)}function x(v,m,_,h,A){for(var w=h.tozero,E=h.extrapad,L=!0,C=0;C<v.length&&L;C++){var P=v[C];if(A(P.val,m)&&P.pad>=_&&(P.extrapad||!E)){L=!1;break}A(m,P.val)&&P.pad<=_&&(E||!P.extrapad)&&(v.splice(C,1),C--)}if(L){var D=w&&m===0;v.push({val:m,pad:D?0:_,extrapad:!D&&E})}}function g(v){return k(v)&&Math.abs(v)<T}function f(v,m){return v<=m}function y(v,m){return v>=m}},89298:function(Q,z,t){var S=t(39898),k=t(92770),l=t(74875),T=t(73972),b=t(71828),d=b.strTranslate,s=t(63893),e=t(92998),i=t(7901),r=t(91424),n=t(13838),a=t(66287),o=t(50606),u=o.ONEMAXYEAR,p=o.ONEAVGYEAR,c=o.ONEMINYEAR,x=o.ONEMAXQUARTER,g=o.ONEAVGQUARTER,f=o.ONEMINQUARTER,y=o.ONEMAXMONTH,v=o.ONEAVGMONTH,m=o.ONEMINMONTH,_=o.ONEWEEK,h=o.ONEDAY,A=h/2,w=o.ONEHOUR,E=o.ONEMIN,L=o.ONESEC,C=o.MINUS_SIGN,P=o.BADNUM,D={K:"zeroline"},G={K:"gridline",L:"path"},I={K:"minor-gridline",L:"path"},H={K:"tick",L:"path"},N={K:"tick",L:"text"},F={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},V=t(18783),q=V.MID_SHIFT,te=V.CAP_SHIFT,$=V.LINE_SPACING,W=V.OPPOSITE_SIDE,Z=Q.exports={};Z.setConvert=t(21994);var J=t(4322),ee=t(41675),re=ee.idSort,ae=ee.isLinked;Z.id2name=ee.id2name,Z.name2id=ee.name2id,Z.cleanId=ee.cleanId,Z.list=ee.list,Z.listIds=ee.listIds,Z.getFromId=ee.getFromId,Z.getFromTrace=ee.getFromTrace;var oe=t(71739);Z.getAutoRange=oe.getAutoRange,Z.findExtremes=oe.findExtremes;var ce=1e-4;function pe(Ie){var ze=(Ie[1]-Ie[0])*ce;return[Ie[0]-ze,Ie[1]+ze]}Z.coerceRef=function(Ie,ze,et,tt,dt,pt){var vt=tt.charAt(tt.length-1),ct=et._fullLayout._subplots[vt+"axis"],kt=tt+"ref",ut={};return dt||(dt=ct[0]||(typeof pt=="string"?pt:pt[0])),pt||(pt=dt),ct=ct.concat(ct.map(function(ft){return ft+" domain"})),ut[kt]={valType:"enumerated",values:ct.concat(pt?typeof pt=="string"?[pt]:pt:[]),dflt:dt},b.coerce(Ie,ze,ut,kt)},Z.getRefType=function(Ie){return Ie===void 0?Ie:Ie==="paper"?"paper":Ie==="pixel"?"pixel":/( domain)$/.test(Ie)?"domain":"range"},Z.coercePosition=function(Ie,ze,et,tt,dt,pt){var vt,ct;if(Z.getRefType(tt)!=="range")vt=b.ensureNumber,ct=et(dt,pt);else{var kt=Z.getFromId(ze,tt);ct=et(dt,pt=kt.fraction2r(pt)),vt=kt.cleanPos}Ie[dt]=vt(ct)},Z.cleanPosition=function(Ie,ze,et){return(et==="paper"||et==="pixel"?b.ensureNumber:Z.getFromId(ze,et).cleanPos)(Ie)},Z.redrawComponents=function(Ie,ze){ze=ze||Z.listIds(Ie);var et=Ie._fullLayout;function tt(dt,pt,vt,ct){for(var kt=T.getComponentMethod(dt,pt),ut={},ft=0;ft<ze.length;ft++)for(var bt=et[Z.id2name(ze[ft])][vt],It=0;It<bt.length;It++){var zt=bt[It];if(!ut[zt]&&(kt(Ie,zt),ut[zt]=1,ct))return}}tt("annotations","drawOne","_annIndices"),tt("shapes","drawOne","_shapeIndices"),tt("images","draw","_imgIndices",!0),tt("selections","drawOne","_selectionIndices")};var ve=Z.getDataConversions=function(Ie,ze,et,tt){var dt,pt=et==="x"||et==="y"||et==="z"?et:tt;if(Array.isArray(pt)){if(dt={type:J(tt,void 0,{autotypenumbers:Ie._fullLayout.autotypenumbers}),_categories:[]},Z.setConvert(dt),dt.type==="category")for(var vt=0;vt<tt.length;vt++)dt.d2c(tt[vt])}else dt=Z.getFromTrace(Ie,ze,pt);return dt?{d2c:dt.d2c,c2d:dt.c2d}:pt==="ids"?{d2c:xe,c2d:xe}:{d2c:we,c2d:we}};function we(Ie){return+Ie}function xe(Ie){return String(Ie)}function ge(Ie,ze){return Math.abs((Ie/ze+.5)%1-.5)<.001}function Oe(Ie,ze){return Math.abs(Ie/ze-1)<.001}function Ae(Ie){return+Ie.substring(1)}function Te(Ie,ze){return Ie.rangebreaks&&(ze=ze.filter(function(et){return Ie.maskBreaks(et.x)!==P})),ze}function se(Ie){var ze=Ie._mainAxis,et=[];if(ze._vals){for(var tt=0;tt<ze._vals.length;tt++)if(!ze._vals[tt].noTick){var dt=ze.l2p(ze._vals[tt].x),pt=Ie.p2l(dt),vt=Z.tickText(Ie,pt);ze._vals[tt].minor&&(vt.minor=!0,vt.text=""),et.push(vt)}}return Te(Ie,et)}function le(Ie){var ze=pe(b.simpleMap(Ie.range,Ie.r2l)),et=Math.min(ze[0],ze[1]),tt=Math.max(ze[0],ze[1]),dt=Ie.type==="category"?Ie.d2l_noadd:Ie.d2l;Ie.type==="log"&&String(Ie.dtick).charAt(0)!=="L"&&(Ie.dtick="L"+Math.pow(10,Math.floor(Math.min(Ie.range[0],Ie.range[1]))-1));for(var pt=[],vt=0;vt<=1;vt++)if(!vt||Ie.minor){var ct=vt?Ie.minor.tickvals:Ie.tickvals,kt=vt?[]:Ie.ticktext;if(ct){Array.isArray(kt)||(kt=[]);for(var ut=0;ut<ct.length;ut++){var ft=dt(ct[ut]);if(ft>et&&ft<tt){var bt=kt[ut]===void 0?Z.tickText(Ie,ft):Ce(Ie,ft,String(kt[ut]));vt&&(bt.minor=!0,bt.text=""),pt.push(bt)}}}}return Te(Ie,pt)}Z.getDataToCoordFunc=function(Ie,ze,et,tt){return ve(Ie,ze,et,tt).d2c},Z.counterLetter=function(Ie){var ze=Ie.charAt(0);return ze==="x"?"y":ze==="y"?"x":void 0},Z.minDtick=function(Ie,ze,et,tt){["log","category","multicategory"].indexOf(Ie.type)===-1&&tt?Ie._minDtick===void 0?(Ie._minDtick=ze,Ie._forceTick0=et):Ie._minDtick&&((Ie._minDtick/ze+1e-6)%1<2e-6&&((et-Ie._forceTick0)/ze%1+1.000001)%1<2e-6?(Ie._minDtick=ze,Ie._forceTick0=et):((ze/Ie._minDtick+1e-6)%1>2e-6||((et-Ie._forceTick0)/Ie._minDtick%1+1.000001)%1>2e-6)&&(Ie._minDtick=0)):Ie._minDtick=0},Z.saveRangeInitial=function(Ie,ze){for(var et=Z.list(Ie,"",!0),tt=!1,dt=0;dt<et.length;dt++){var pt=et[dt],vt=pt._rangeInitial===void 0,ct=vt||!(pt.range[0]===pt._rangeInitial[0]&&pt.range[1]===pt._rangeInitial[1]);(vt&&pt.autorange===!1||ze&&ct)&&(pt._rangeInitial=pt.range.slice(),tt=!0)}return tt},Z.saveShowSpikeInitial=function(Ie,ze){for(var et=Z.list(Ie,"",!0),tt=!1,dt="on",pt=0;pt<et.length;pt++){var vt=et[pt],ct=vt._showSpikeInitial===void 0,kt=ct||vt.showspikes!==vt._showspikes;(ct||ze&&kt)&&(vt._showSpikeInitial=vt.showspikes,tt=!0),dt!=="on"||vt.showspikes||(dt="off")}return Ie._fullLayout._cartesianSpikesEnabled=dt,tt},Z.autoBin=function(Ie,ze,et,tt,dt,pt){var vt,ct=b.aggNums(Math.min,null,Ie),kt=b.aggNums(Math.max,null,Ie);if(ze.type==="category"||ze.type==="multicategory")return{start:ct-.5,end:kt+.5,size:Math.max(1,Math.round(pt)||1),_dataSpan:kt-ct};if(dt||(dt=ze.calendar),vt=ze.type==="log"?{type:"linear",range:[ct,kt]}:{type:ze.type,range:b.simpleMap([ct,kt],ze.c2r,0,dt),calendar:dt},Z.setConvert(vt),pt=pt&&a.dtick(pt,vt.type))vt.dtick=pt,vt.tick0=a.tick0(void 0,vt.type,dt);else{var ut;if(et)ut=(kt-ct)/et;else{var ft=b.distinctVals(Ie),bt=Math.pow(10,Math.floor(Math.log(ft.minDiff)/Math.LN10)),It=bt*b.roundUp(ft.minDiff/bt,[.9,1.9,4.9,9.9],!0);ut=Math.max(It,2*b.stdev(Ie)/Math.pow(Ie.length,tt?.25:.4)),k(ut)||(ut=1)}Z.autoTicks(vt,ut)}var zt,Rt=vt.dtick,Jt=Z.tickIncrement(Z.tickFirst(vt),Rt,"reverse",dt);if(typeof Rt=="number")Jt=function(qt,Wt,jt,fn,xn){var un=0,Ht=0,nn=0,Kt=0;function on(Cn){return(1+100*(Cn-qt)/jt.dtick)%100<2}for(var hn=0;hn<Wt.length;hn++)Wt[hn]%1==0?nn++:k(Wt[hn])||Kt++,on(Wt[hn])&&un++,on(Wt[hn]+jt.dtick/2)&&Ht++;var dn=Wt.length-Kt;if(nn===dn&&jt.type!=="date")jt.dtick<1?qt=fn-.5*jt.dtick:(qt-=.5)+jt.dtick<fn&&(qt+=jt.dtick);else if(Ht<.1*dn&&(un>.3*dn||on(fn)||on(xn))){var Mn=jt.dtick/2;qt+=qt+Mn<fn?Mn:-Mn}return qt}(Jt,Ie,vt,ct,kt),zt=Jt+(1+Math.floor((kt-Jt)/Rt))*Rt;else for(vt.dtick.charAt(0)==="M"&&(Jt=function(qt,Wt,jt,fn,xn){var un=b.findExactDates(Wt,xn);if(un.exactDays>.8){var Ht=Number(jt.substr(1));un.exactYears>.8&&Ht%12==0?qt=Z.tickIncrement(qt,"M6","reverse")+1.5*h:un.exactMonths>.8?qt=Z.tickIncrement(qt,"M1","reverse")+15.5*h:qt-=A;var nn=Z.tickIncrement(qt,jt);if(nn<=fn)return nn}return qt}(Jt,Ie,Rt,ct,dt)),zt=Jt;zt<=kt;)zt=Z.tickIncrement(zt,Rt,!1,dt);return{start:ze.c2r(Jt,0,dt),end:ze.c2r(zt,0,dt),size:Rt,_dataSpan:kt-ct}},Z.prepMinorTicks=function(Ie,ze,et){if(!ze.minor.dtick){delete Ie.dtick;var tt,dt=ze.dtick&&k(ze._tmin);if(dt){var pt=Z.tickIncrement(ze._tmin,ze.dtick,!0);tt=[ze._tmin,.99*pt+.01*ze._tmin]}else{var vt=b.simpleMap(ze.range,ze.r2l);tt=[vt[0],.8*vt[0]+.2*vt[1]]}if(Ie.range=b.simpleMap(tt,ze.l2r),Ie._isMinor=!0,Z.prepTicks(Ie,et),dt){var ct=k(ze.dtick),kt=k(Ie.dtick),ut=ct?ze.dtick:+ze.dtick.substring(1),ft=kt?Ie.dtick:+Ie.dtick.substring(1);ct&&kt?ge(ut,ft)?ut===2*_&&ft===2*h&&(Ie.dtick=_):ut===2*_&&ft===3*h?Ie.dtick=_:ut!==_||(ze._input.minor||{}).nticks?Oe(ut/ft,2.5)?Ie.dtick=ut/2:Ie.dtick=ut:Ie.dtick=h:String(ze.dtick).charAt(0)==="M"?kt?Ie.dtick="M1":ge(ut,ft)?ut>=12&&ft===2&&(Ie.dtick="M3"):Ie.dtick=ze.dtick:String(Ie.dtick).charAt(0)==="L"?String(ze.dtick).charAt(0)==="L"?ge(ut,ft)||(Ie.dtick=Oe(ut/ft,2.5)?ze.dtick/2:ze.dtick):Ie.dtick="D1":Ie.dtick==="D2"&&+ze.dtick>1&&(Ie.dtick=1)}Ie.range=ze.range}ze.minor._tick0Init===void 0&&(Ie.tick0=ze.tick0)},Z.prepTicks=function(Ie,ze){var et=b.simpleMap(Ie.range,Ie.r2l,void 0,void 0,ze);if(Ie.tickmode==="auto"||!Ie.dtick){var tt,dt=Ie.nticks;dt||(Ie.type==="category"||Ie.type==="multicategory"?(tt=Ie.tickfont?b.bigFont(Ie.tickfont.size||12):15,dt=Ie._length/tt):(tt=Ie._id.charAt(0)==="y"?40:80,dt=b.constrain(Ie._length/tt,4,9)+1),Ie._name==="radialaxis"&&(dt*=2)),Ie.minor&&Ie.minor.tickmode!=="array"||Ie.tickmode==="array"&&(dt*=100),Ie._roughDTick=Math.abs(et[1]-et[0])/dt,Z.autoTicks(Ie,Ie._roughDTick),Ie._minDtick>0&&Ie.dtick<2*Ie._minDtick&&(Ie.dtick=Ie._minDtick,Ie.tick0=Ie.l2r(Ie._forceTick0))}Ie.ticklabelmode==="period"&&function(pt){var vt;function ct(){return!(k(pt.dtick)||pt.dtick.charAt(0)!=="M")}var kt=ct(),ut=Z.getTickFormat(pt);if(ut){var ft=pt._dtickInit!==pt.dtick;/%[fLQsSMX]/.test(ut)||(/%[HI]/.test(ut)?(vt=w,ft&&!kt&&pt.dtick<w&&(pt.dtick=w)):/%p/.test(ut)?(vt=A,ft&&!kt&&pt.dtick<A&&(pt.dtick=A)):/%[Aadejuwx]/.test(ut)?(vt=h,ft&&!kt&&pt.dtick<h&&(pt.dtick=h)):/%[UVW]/.test(ut)?(vt=_,ft&&!kt&&pt.dtick<_&&(pt.dtick=_)):/%[Bbm]/.test(ut)?(vt=v,ft&&(kt?Ae(pt.dtick)<1:pt.dtick<m)&&(pt.dtick="M1")):/%[q]/.test(ut)?(vt=g,ft&&(kt?Ae(pt.dtick)<3:pt.dtick<f)&&(pt.dtick="M3")):/%[Yy]/.test(ut)&&(vt=p,ft&&(kt?Ae(pt.dtick)<12:pt.dtick<c)&&(pt.dtick="M12")))}(kt=ct())&&pt.tick0===pt._dowTick0&&(pt.tick0=pt._rawTick0),pt._definedDelta=vt}(Ie),Ie.tick0||(Ie.tick0=Ie.type==="date"?"2000-01-01":0),Ie.type==="date"&&Ie.dtick<.1&&(Ie.dtick=.1),_e(Ie)},Z.calcTicks=function(Ie,ze){for(var et,tt,dt=Ie.type,pt=Ie.calendar,vt=Ie.ticklabelstep,ct=Ie.ticklabelmode==="period",kt=b.simpleMap(Ie.range,Ie.r2l,void 0,void 0,ze),ut=kt[1]<kt[0],ft=Math.min(kt[0],kt[1]),bt=Math.max(kt[0],kt[1]),It=Math.max(1e3,Ie._length||0),zt=[],Rt=[],Jt=[],qt=[],Wt=Ie.minor&&(Ie.minor.ticks||Ie.minor.showgrid),jt=1;jt>=(Wt?0:1);jt--){var fn=!jt;jt?(Ie._dtickInit=Ie.dtick,Ie._tick0Init=Ie.tick0):(Ie.minor._dtickInit=Ie.minor.dtick,Ie.minor._tick0Init=Ie.minor.tick0);var xn=jt?Ie:b.extendFlat({},Ie,Ie.minor);if(fn?Z.prepMinorTicks(xn,Ie,ze):Z.prepTicks(xn,ze),xn.tickmode!=="array")if(xn.tickmode!=="sync"){var un=pe(kt),Ht=un[0],nn=un[1],Kt=k(xn.dtick),on=dt==="log"&&!(Kt||xn.dtick.charAt(0)==="L"),hn=Z.tickFirst(xn,ze);if(jt){if(Ie._tmin=hn,hn<Ht!==ut)break;dt!=="category"&&dt!=="multicategory"||(nn=ut?Math.max(-.5,nn):Math.min(Ie._categories.length-.5,nn))}var dn,Mn,Cn=null,Tn=hn;jt&&(Kt?Mn=Ie.dtick:dt==="date"?typeof Ie.dtick=="string"&&Ie.dtick.charAt(0)==="M"&&(Mn=v*Ie.dtick.substring(1)):Mn=Ie._roughDTick,dn=Math.round((Ie.r2l(Tn)-Ie.r2l(Ie.tick0))/Mn)-1);var Pn=xn.dtick;for(xn.rangebreaks&&xn._tick0Init!==xn.tick0&&(Tn=Ve(Tn,Ie),ut||(Tn=Z.tickIncrement(Tn,Pn,!ut,pt))),jt&&ct&&(Tn=Z.tickIncrement(Tn,Pn,!ut,pt),dn--);ut?Tn>=nn:Tn<=nn;Tn=Z.tickIncrement(Tn,Pn,ut,pt)){if(jt&&dn++,xn.rangebreaks&&!ut){if(Tn<Ht)continue;if(xn.maskBreaks(Tn)===P&&Ve(Tn,xn)>=bt)break}if(Jt.length>It||Tn===Cn)break;Cn=Tn;var Wn={value:Tn};jt?(on&&Tn!==(0|Tn)&&(Wn.simpleLabel=!0),vt>1&&dn%vt&&(Wn.skipLabel=!0),Jt.push(Wn)):(Wn.minor=!0,qt.push(Wn))}}else Jt=[],zt=se(Ie);else jt?(Jt=[],zt=le(Ie)):(qt=[],Rt=le(Ie))}if(Wt&&!(Ie.minor.ticks==="inside"&&Ie.ticks==="outside"||Ie.minor.ticks==="outside"&&Ie.ticks==="inside")){for(var $n=Jt.map(function(At){return At.value}),ar=[],Qn=0;Qn<qt.length;Qn++){var Gn=qt[Qn],dr=Gn.value;if($n.indexOf(dr)===-1){for(var Bt=!1,tn=0;!Bt&&tn<Jt.length;tn++)1e7+Jt[tn].value===1e7+dr&&(Bt=!0);Bt||ar.push(Gn)}}qt=ar}if(ct&&function(At,Gt,$t){for(var mn=0;mn<At.length;mn++){var yn=At[mn].value,An=mn,sn=mn+1;mn<At.length-1?(An=mn,sn=mn+1):mn>0?(An=mn-1,sn=mn):(An=mn,sn=mn);var Yt,Xt=At[An].value,an=At[sn].value,ln=Math.abs(an-Xt),Sn=$t||ln,En=0;Sn>=c?En=ln>=c&&ln<=u?ln:p:$t===g&&Sn>=f?En=ln>=f&&ln<=x?ln:g:Sn>=m?En=ln>=m&&ln<=y?ln:v:$t===_&&Sn>=_?En=_:Sn>=h?En=h:$t===A&&Sn>=A?En=A:$t===w&&Sn>=w&&(En=w),En>=ln&&(En=ln,Yt=!0);var jn=yn+En;if(Gt.rangebreaks&&En>0){for(var Fn=0,Xn=0;Xn<84;Xn++){var Hn=(Xn+.5)/84;Gt.maskBreaks(yn*(1-Hn)+Hn*jn)!==P&&Fn++}(En*=Fn/84)||(At[mn].drop=!0),Yt&&ln>_&&(En=ln)}(En>0||mn===0)&&(At[mn].periodX=yn+En/2)}}(Jt,Ie,Ie._definedDelta),Ie.rangebreaks){var cn=Ie._id.charAt(0)==="y",gn=1;Ie.tickmode==="auto"&&(gn=Ie.tickfont?Ie.tickfont.size:12);var kn=NaN;for(et=Jt.length-1;et>-1;et--)if(Jt[et].drop)Jt.splice(et,1);else{Jt[et].value=Ve(Jt[et].value,Ie);var Vn=Ie.c2p(Jt[et].value);(cn?kn>Vn-gn:kn<Vn+gn)?Jt.splice(ut?et+1:et,1):kn=Vn}}Xe(Ie)&&Math.abs(kt[1]-kt[0])===360&&Jt.pop(),Ie._tmax=(Jt[Jt.length-1]||{}).value,Ie._prevDateHead="",Ie._inCalcTicks=!0;var In,Dn,Kn=function(At){At.text="",Ie._prevDateHead=tt};for(Jt=Jt.concat(qt),et=0;et<Jt.length;et++){var Ut=Jt[et].minor,bn=Jt[et].value;Ut?Rt.push({x:bn,minor:!0}):(tt=Ie._prevDateHead,In=Z.tickText(Ie,bn,!1,Jt[et].simpleLabel),(Dn=Jt[et].periodX)!==void 0&&(In.periodX=Dn,(Dn>bt||Dn<ft)&&(Dn>bt&&(In.periodX=bt),Dn<ft&&(In.periodX=ft),Kn(In))),Jt[et].skipLabel&&Kn(In),zt.push(In))}return zt=zt.concat(Rt),Ie._inCalcTicks=!1,ct&&zt.length&&(zt[0].noTick=!0),zt};var ne=[2,5,10],me=[1,2,3,6,12],Ee=[1,2,5,10,15,30],be=[1,2,3,7,14],De=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ue=[-.301,0,.301,.699,1],he=[15,30,45,90,180];function ke(Ie,ze,et){return ze*b.roundUp(Ie/ze,et)}function _e(Ie){var ze=Ie.dtick;if(Ie._tickexponent=0,k(ze)||typeof ze=="string"||(ze=1),Ie.type!=="category"&&Ie.type!=="multicategory"||(Ie._tickround=null),Ie.type==="date"){var et=Ie.r2l(Ie.tick0),tt=Ie.l2r(et).replace(/(^-|i)/g,""),dt=tt.length;if(String(ze).charAt(0)==="M")dt>10||tt.substr(5)!=="01-01"?Ie._tickround="d":Ie._tickround=+ze.substr(1)%12==0?"y":"m";else if(ze>=h&&dt<=10||ze>=15*h)Ie._tickround="d";else if(ze>=E&&dt<=16||ze>=w)Ie._tickround="M";else if(ze>=L&&dt<=19||ze>=E)Ie._tickround="S";else{var pt=Ie.l2r(et+ze).replace(/^-/,"").length;Ie._tickround=Math.max(dt,pt)-20,Ie._tickround<0&&(Ie._tickround=4)}}else if(k(ze)||ze.charAt(0)==="L"){var vt=Ie.range.map(Ie.r2d||Number);k(ze)||(ze=Number(ze.substr(1))),Ie._tickround=2-Math.floor(Math.log(ze)/Math.LN10+.01);var ct=Math.max(Math.abs(vt[0]),Math.abs(vt[1])),kt=Math.floor(Math.log(ct)/Math.LN10+.01),ut=Ie.minexponent===void 0?3:Ie.minexponent;Math.abs(kt)>ut&&(Re(Ie.exponentformat)&&!He(kt)?Ie._tickexponent=3*Math.round((kt-1)/3):Ie._tickexponent=kt)}else Ie._tickround=null}function Ce(Ie,ze,et){var tt=Ie.tickfont||{};return{x:ze,dx:0,dy:0,text:et||"",fontSize:tt.size,font:tt.family,fontColor:tt.color}}Z.autoTicks=function(Ie,ze,et){var tt;function dt(bt){return Math.pow(bt,Math.floor(Math.log(ze)/Math.LN10))}if(Ie.type==="date"){Ie.tick0=b.dateTick0(Ie.calendar,0);var pt=2*ze;if(pt>p)ze/=p,tt=dt(10),Ie.dtick="M"+12*ke(ze,tt,ne);else if(pt>v)ze/=v,Ie.dtick="M"+ke(ze,1,me);else if(pt>h){if(Ie.dtick=ke(ze,h,Ie._hasDayOfWeekBreaks?[1,2,7,14]:be),!et){var vt=Z.getTickFormat(Ie),ct=Ie.ticklabelmode==="period";ct&&(Ie._rawTick0=Ie.tick0),/%[uVW]/.test(vt)?Ie.tick0=b.dateTick0(Ie.calendar,2):Ie.tick0=b.dateTick0(Ie.calendar,1),ct&&(Ie._dowTick0=Ie.tick0)}}else pt>w?Ie.dtick=ke(ze,w,me):pt>E?Ie.dtick=ke(ze,E,Ee):pt>L?Ie.dtick=ke(ze,L,Ee):(tt=dt(10),Ie.dtick=ke(ze,tt,ne))}else if(Ie.type==="log"){Ie.tick0=0;var kt=b.simpleMap(Ie.range,Ie.r2l);if(Ie._isMinor&&(ze*=1.5),ze>.7)Ie.dtick=Math.ceil(ze);else if(Math.abs(kt[1]-kt[0])<1){var ut=1.5*Math.abs((kt[1]-kt[0])/ze);ze=Math.abs(Math.pow(10,kt[1])-Math.pow(10,kt[0]))/ut,tt=dt(10),Ie.dtick="L"+ke(ze,tt,ne)}else Ie.dtick=ze>.3?"D2":"D1"}else Ie.type==="category"||Ie.type==="multicategory"?(Ie.tick0=0,Ie.dtick=Math.ceil(Math.max(ze,1))):Xe(Ie)?(Ie.tick0=0,tt=1,Ie.dtick=ke(ze,tt,he)):(Ie.tick0=0,tt=dt(10),Ie.dtick=ke(ze,tt,ne));if(Ie.dtick===0&&(Ie.dtick=1),!k(Ie.dtick)&&typeof Ie.dtick!="string"){var ft=Ie.dtick;throw Ie.dtick=1,"ax.dtick error: "+String(ft)}},Z.tickIncrement=function(Ie,ze,et,tt){var dt=et?-1:1;if(k(ze))return b.increment(Ie,dt*ze);var pt=ze.charAt(0),vt=dt*Number(ze.substr(1));if(pt==="M")return b.incrementMonth(Ie,vt,tt);if(pt==="L")return Math.log(Math.pow(10,Ie)+vt)/Math.LN10;if(pt==="D"){var ct=ze==="D2"?Ue:De,kt=Ie+.01*dt,ut=b.roundUp(b.mod(kt,1),ct,et);return Math.floor(kt)+Math.log(S.round(Math.pow(10,ut),1))/Math.LN10}throw"unrecognized dtick "+String(ze)},Z.tickFirst=function(Ie,ze){var et=Ie.r2l||Number,tt=b.simpleMap(Ie.range,et,void 0,void 0,ze),dt=tt[1]<tt[0],pt=dt?Math.floor:Math.ceil,vt=pe(tt)[0],ct=Ie.dtick,kt=et(Ie.tick0);if(k(ct)){var ut=pt((vt-kt)/ct)*ct+kt;return Ie.type!=="category"&&Ie.type!=="multicategory"||(ut=b.constrain(ut,0,Ie._categories.length-1)),ut}var ft=ct.charAt(0),bt=Number(ct.substr(1));if(ft==="M"){for(var It,zt,Rt,Jt=0,qt=kt;Jt<10;){if(((It=Z.tickIncrement(qt,ct,dt,Ie.calendar))-vt)*(qt-vt)<=0)return dt?Math.min(qt,It):Math.max(qt,It);zt=(vt-(qt+It)/2)/(It-qt),Rt=ft+(Math.abs(Math.round(zt))||1)*bt,qt=Z.tickIncrement(qt,Rt,zt<0?!dt:dt,Ie.calendar),Jt++}return b.error("tickFirst did not converge",Ie),qt}if(ft==="L")return Math.log(pt((Math.pow(10,vt)-kt)/bt)*bt+kt)/Math.LN10;if(ft==="D"){var Wt=ct==="D2"?Ue:De,jt=b.roundUp(b.mod(vt,1),Wt,dt);return Math.floor(vt)+Math.log(S.round(Math.pow(10,jt),1))/Math.LN10}throw"unrecognized dtick "+String(ct)},Z.tickText=function(Ie,ze,et,tt){var dt,pt=Ce(Ie,ze),vt=Ie.tickmode==="array",ct=et||vt,kt=Ie.type,ut=kt==="category"?Ie.d2l_noadd:Ie.d2l;if(vt&&Array.isArray(Ie.ticktext)){var ft=b.simpleMap(Ie.range,Ie.r2l),bt=(Math.abs(ft[1]-ft[0])-(Ie._lBreaks||0))/1e4;for(dt=0;dt<Ie.ticktext.length&&!(Math.abs(ze-ut(Ie.tickvals[dt]))<bt);dt++);if(dt<Ie.ticktext.length)return pt.text=String(Ie.ticktext[dt]),pt}function It(qt){if(qt===void 0)return!0;if(et)return qt==="none";var Wt={first:Ie._tmin,last:Ie._tmax}[qt];return qt!=="all"&&ze!==Wt}var zt=et?"never":Ie.exponentformat!=="none"&&It(Ie.showexponent)?"hide":"";if(kt==="date"?function(qt,Wt,jt,fn){var xn=qt._tickround,un=jt&&qt.hoverformat||Z.getTickFormat(qt);fn&&(xn=k(xn)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[xn]);var Ht,nn=b.formatDate(Wt.x,un,xn,qt._dateFormat,qt.calendar,qt._extraFormat),Kt=nn.indexOf(`
`);if(Kt!==-1&&(Ht=nn.substr(Kt+1),nn=nn.substr(0,Kt)),fn&&(nn==="00:00:00"||nn==="00:00"?(nn=Ht,Ht=""):nn.length===8&&(nn=nn.replace(/:00$/,""))),Ht)if(jt)xn==="d"?nn+=", "+Ht:nn=Ht+(nn?", "+nn:"");else if(qt._inCalcTicks&&qt._prevDateHead===Ht){var on=We(qt),hn=qt._trueSide||qt.side;(!on&&hn==="top"||on&&hn==="bottom")&&(nn+="<br> ")}else qt._prevDateHead=Ht,nn+="<br>"+Ht;Wt.text=nn}(Ie,pt,et,ct):kt==="log"?function(qt,Wt,jt,fn,xn){var un=qt.dtick,Ht=Wt.x,nn=qt.tickformat,Kt=typeof un=="string"&&un.charAt(0);if(xn==="never"&&(xn=""),fn&&Kt!=="L"&&(un="L3",Kt="L"),nn||Kt==="L")Wt.text=Ge(Math.pow(10,Ht),qt,xn,fn);else if(k(un)||Kt==="D"&&b.mod(Ht+.01,1)<.1){var on=Math.round(Ht),hn=Math.abs(on),dn=qt.exponentformat;dn==="power"||Re(dn)&&He(on)?(Wt.text=on===0?1:on===1?"10":"10<sup>"+(on>1?"":C)+hn+"</sup>",Wt.fontSize*=1.25):(dn==="e"||dn==="E")&&hn>2?Wt.text="1"+dn+(on>0?"+":C)+hn:(Wt.text=Ge(Math.pow(10,Ht),qt,"","fakehover"),un==="D1"&&qt._id.charAt(0)==="y"&&(Wt.dy-=Wt.fontSize/6))}else{if(Kt!=="D")throw"unrecognized dtick "+String(un);Wt.text=String(Math.round(Math.pow(10,b.mod(Ht,1)))),Wt.fontSize*=.75}if(qt.dtick==="D1"){var Mn=String(Wt.text).charAt(0);Mn!=="0"&&Mn!=="1"||(qt._id.charAt(0)==="y"?Wt.dx-=Wt.fontSize/4:(Wt.dy+=Wt.fontSize/2,Wt.dx+=(qt.range[1]>qt.range[0]?1:-1)*Wt.fontSize*(Ht<0?.5:.25)))}}(Ie,pt,0,ct,zt):kt==="category"?function(qt,Wt){var jt=qt._categories[Math.round(Wt.x)];jt===void 0&&(jt=""),Wt.text=String(jt)}(Ie,pt):kt==="multicategory"?function(qt,Wt,jt){var fn=Math.round(Wt.x),xn=qt._categories[fn]||[],un=xn[1]===void 0?"":String(xn[1]),Ht=xn[0]===void 0?"":String(xn[0]);jt?Wt.text=Ht+" - "+un:(Wt.text=un,Wt.text2=Ht)}(Ie,pt,et):Xe(Ie)?function(qt,Wt,jt,fn,xn){if(qt.thetaunit!=="radians"||jt)Wt.text=Ge(Wt.x,qt,xn,fn);else{var un=Wt.x/180;if(un===0)Wt.text="0";else{var Ht=function(Kt){function on(Cn,Tn){return Math.abs(Cn-Tn)<=1e-6}var hn=function(Cn){for(var Tn=1;!on(Math.round(Cn*Tn)/Tn,Cn);)Tn*=10;return Tn}(Kt),dn=Kt*hn,Mn=Math.abs(function Cn(Tn,Pn){return on(Pn,0)?Tn:Cn(Pn,Tn%Pn)}(dn,hn));return[Math.round(dn/Mn),Math.round(hn/Mn)]}(un);if(Ht[1]>=100)Wt.text=Ge(b.deg2rad(Wt.x),qt,xn,fn);else{var nn=Wt.x<0;Ht[1]===1?Ht[0]===1?Wt.text="":Wt.text=Ht[0]+"":Wt.text=["<sup>",Ht[0],"</sup>","","<sub>",Ht[1],"</sub>",""].join(""),nn&&(Wt.text=C+Wt.text)}}}}(Ie,pt,et,ct,zt):function(qt,Wt,jt,fn,xn){xn==="never"?xn="":qt.showexponent==="all"&&Math.abs(Wt.x/qt.dtick)<1e-6&&(xn="hide"),Wt.text=Ge(Wt.x,qt,xn,fn)}(Ie,pt,0,ct,zt),tt||(Ie.tickprefix&&!It(Ie.showtickprefix)&&(pt.text=Ie.tickprefix+pt.text),Ie.ticksuffix&&!It(Ie.showticksuffix)&&(pt.text+=Ie.ticksuffix)),Ie.labelalias&&Ie.labelalias.hasOwnProperty(pt.text)){var Rt=Ie.labelalias[pt.text];typeof Rt=="string"&&(pt.text=Rt)}if(Ie.tickson==="boundaries"||Ie.showdividers){var Jt=function(qt){var Wt=Ie.l2p(qt);return Wt>=0&&Wt<=Ie._length?qt:null};pt.xbnd=[Jt(pt.x-.5),Jt(pt.x+Ie.dtick-.5)]}return pt},Z.hoverLabelText=function(Ie,ze,et){et&&(Ie=b.extendFlat({},Ie,{hoverformat:et}));var tt=Array.isArray(ze)?ze[0]:ze,dt=Array.isArray(ze)?ze[1]:void 0;if(dt!==void 0&&dt!==tt)return Z.hoverLabelText(Ie,tt,et)+" - "+Z.hoverLabelText(Ie,dt,et);var pt=Ie.type==="log"&&tt<=0,vt=Z.tickText(Ie,Ie.c2l(pt?-tt:tt),"hover").text;return pt?tt===0?"0":C+vt:vt};var Fe=["f","p","n","","m","","k","M","G","T"];function Re(Ie){return Ie==="SI"||Ie==="B"}function He(Ie){return Ie>14||Ie<-15}function Ge(Ie,ze,et,tt){var dt=Ie<0,pt=ze._tickround,vt=et||ze.exponentformat||"B",ct=ze._tickexponent,kt=Z.getTickFormat(ze),ut=ze.separatethousands;if(tt){var ft={exponentformat:vt,minexponent:ze.minexponent,dtick:ze.showexponent==="none"?ze.dtick:k(Ie)&&Math.abs(Ie)||1,range:ze.showexponent==="none"?ze.range.map(ze.r2d):[0,Ie||1]};_e(ft),pt=(Number(ft._tickround)||0)+4,ct=ft._tickexponent,ze.hoverformat&&(kt=ze.hoverformat)}if(kt)return ze._numFormat(kt)(Ie).replace(/-/g,C);var bt,It=Math.pow(10,-pt)/2;if(vt==="none"&&(ct=0),(Ie=Math.abs(Ie))<It)Ie="0",dt=!1;else{if(Ie+=It,ct&&(Ie*=Math.pow(10,-ct),pt+=ct),pt===0)Ie=String(Math.floor(Ie));else if(pt<0){Ie=(Ie=String(Math.round(Ie))).substr(0,Ie.length+pt);for(var zt=pt;zt<0;zt++)Ie+="0"}else{var Rt=(Ie=String(Ie)).indexOf(".")+1;Rt&&(Ie=Ie.substr(0,Rt+pt).replace(/\.?0+$/,""))}Ie=b.numSeparate(Ie,ze._separators,ut)}return ct&&vt!=="hide"&&(Re(vt)&&He(ct)&&(vt="power"),bt=ct<0?C+-ct:vt!=="power"?"+"+ct:String(ct),vt==="e"||vt==="E"?Ie+=vt+bt:vt==="power"?Ie+="10<sup>"+bt+"</sup>":vt==="B"&&ct===9?Ie+="B":Re(vt)&&(Ie+=Fe[ct/3+5])),dt?C+Ie:Ie}function $e(Ie,ze){if(Ie){var et=Object.keys(F).reduce(function(tt,dt){return ze.indexOf(dt)!==-1&&F[dt].forEach(function(pt){tt[pt]=1}),tt},{});Object.keys(Ie).forEach(function(tt){et[tt]||(tt.length===1?Ie[tt]=0:delete Ie[tt])})}}function st(Ie,ze){for(var et=[],tt={},dt=0;dt<ze.length;dt++){var pt=ze[dt];tt[pt.text2]?tt[pt.text2].push(pt.x):tt[pt.text2]=[pt.x]}for(var vt in tt)et.push(Ce(Ie,b.interp(tt[vt],.5),vt));return et}function Ke(Ie){return Ie.periodX!==void 0?Ie.periodX:Ie.x}function gt(Ie){return[Ie.text,Ie.x,Ie.axInfo,Ie.font,Ie.fontSize,Ie.fontColor].join("_")}function mt(Ie){var ze=Ie.title.font.size,et=(Ie.title.text.match(s.BR_TAG_ALL)||[]).length;return Ie.title.hasOwnProperty("standoff")?et?ze*(te+et*$):ze*te:et?ze*(et+1)*$:ze}function at(Ie,ze){var et=Ie.l2p(ze);return et>1&&et<Ie._length-1}function rt(Ie){var ze=S.select(Ie),et=ze.select(".text-math-group");return et.empty()?ze.select("text"):et}function xt(Ie){return Ie._id+".automargin"}function Tt(Ie){return xt(Ie)+".mirror"}function wt(Ie){return Ie._id+".rangeslider"}function Ot(Ie,ze){for(var et=0;et<ze.length;et++)Ie.indexOf(ze[et])===-1&&Ie.push(ze[et])}function Ct(Ie,ze,et){var tt,dt,pt=[],vt=[],ct=Ie.layout;for(tt=0;tt<ze.length;tt++)pt.push(Z.getFromId(Ie,ze[tt]));for(tt=0;tt<et.length;tt++)vt.push(Z.getFromId(Ie,et[tt]));var kt=Object.keys(n),ut=["anchor","domain","overlaying","position","side","tickangle","editType"],ft=["linear","log"];for(tt=0;tt<kt.length;tt++){var bt=kt[tt],It=pt[0][bt],zt=vt[0][bt],Rt=!0,Jt=!1,qt=!1;if(bt.charAt(0)!=="_"&&typeof It!="function"&&ut.indexOf(bt)===-1){for(dt=1;dt<pt.length&&Rt;dt++){var Wt=pt[dt][bt];bt==="type"&&ft.indexOf(It)!==-1&&ft.indexOf(Wt)!==-1&&It!==Wt?Jt=!0:Wt!==It&&(Rt=!1)}for(dt=1;dt<vt.length&&Rt;dt++){var jt=vt[dt][bt];bt==="type"&&ft.indexOf(zt)!==-1&&ft.indexOf(jt)!==-1&&zt!==jt?qt=!0:vt[dt][bt]!==zt&&(Rt=!1)}Rt&&(Jt&&(ct[pt[0]._name].type="linear"),qt&&(ct[vt[0]._name].type="linear"),Ye(ct,bt,pt,vt,Ie._fullLayout._dfltTitle))}}for(tt=0;tt<Ie._fullLayout.annotations.length;tt++){var fn=Ie._fullLayout.annotations[tt];ze.indexOf(fn.xref)!==-1&&et.indexOf(fn.yref)!==-1&&b.swapAttrs(ct.annotations[tt],["?"])}}function Ye(Ie,ze,et,tt,dt){var pt,vt=b.nestedProperty,ct=vt(Ie[et[0]._name],ze).get(),kt=vt(Ie[tt[0]._name],ze).get();for(ze==="title"&&(ct&&ct.text===dt.x&&(ct.text=dt.y),kt&&kt.text===dt.y&&(kt.text=dt.x)),pt=0;pt<et.length;pt++)vt(Ie,et[pt]._name+"."+ze).set(kt);for(pt=0;pt<tt.length;pt++)vt(Ie,tt[pt]._name+"."+ze).set(ct)}function Xe(Ie){return Ie._id==="angularaxis"}function Ve(Ie,ze){for(var et=ze._rangebreaks.length,tt=0;tt<et;tt++){var dt=ze._rangebreaks[tt];if(Ie>=dt.min&&Ie<dt.max)return dt.max}return Ie}function We(Ie){return(Ie.ticklabelposition||"").indexOf("inside")!==-1}function nt(Ie,ze){We(Ie._anchorAxis||{})&&Ie._hideCounterAxisInsideTickLabels&&Ie._hideCounterAxisInsideTickLabels(ze)}function ot(Ie,ze,et,tt){var dt,pt=Ie.anchor==="free"||Ie.overlaying!==void 0&&Ie.overlaying!==!1?Ie.overlaying:Ie._id;dt=tt?Ie.side==="right"?ze:-ze:ze,pt in et||(et[pt]={}),Ie.side in et[pt]||(et[pt][Ie.side]=0),et[pt][Ie.side]+=dt}Z.getTickFormat=function(Ie){var ze,et,tt,dt,pt,vt,ct,kt;function ut(It){return typeof It!="string"?It:Number(It.replace("M",""))*v}function ft(It,zt){var Rt=["L","D"];if(typeof It==typeof zt){if(typeof It=="number")return It-zt;var Jt=Rt.indexOf(It.charAt(0)),qt=Rt.indexOf(zt.charAt(0));return Jt===qt?Number(It.replace(/(L|D)/g,""))-Number(zt.replace(/(L|D)/g,"")):Jt-qt}return typeof It=="number"?1:-1}function bt(It,zt){var Rt=zt[0]===null,Jt=zt[1]===null,qt=ft(It,zt[0])>=0,Wt=ft(It,zt[1])<=0;return(Rt||qt)&&(Jt||Wt)}if(Ie.tickformatstops&&Ie.tickformatstops.length>0)switch(Ie.type){case"date":case"linear":for(ze=0;ze<Ie.tickformatstops.length;ze++)if((tt=Ie.tickformatstops[ze]).enabled&&(dt=Ie.dtick,pt=tt.dtickrange,vt=void 0,ct=void 0,kt=void 0,vt=ut||function(It){return It},ct=pt[0],kt=pt[1],(!ct&&typeof ct!="number"||vt(ct)<=vt(dt))&&(!kt&&typeof kt!="number"||vt(kt)>=vt(dt)))){et=tt;break}break;case"log":for(ze=0;ze<Ie.tickformatstops.length;ze++)if((tt=Ie.tickformatstops[ze]).enabled&&bt(Ie.dtick,tt.dtickrange)){et=tt;break}}return et?et.value:Ie.tickformat},Z.getSubplots=function(Ie,ze){var et=Ie._fullLayout._subplots,tt=et.cartesian.concat(et.gl2d||[]),dt=ze?Z.findSubplotsWithAxis(tt,ze):tt;return dt.sort(function(pt,vt){var ct=pt.substr(1).split("y"),kt=vt.substr(1).split("y");return ct[0]===kt[0]?+ct[1]-+kt[1]:+ct[0]-+kt[0]}),dt},Z.findSubplotsWithAxis=function(Ie,ze){for(var et=new RegExp(ze._id.charAt(0)==="x"?"^"+ze._id+"y":ze._id+"$"),tt=[],dt=0;dt<Ie.length;dt++){var pt=Ie[dt];et.test(pt)&&tt.push(pt)}return tt},Z.makeClipPaths=function(Ie){var ze=Ie._fullLayout;if(!ze._hasOnlyLargeSploms){var et,tt,dt={_offset:0,_length:ze.width,_id:""},pt={_offset:0,_length:ze.height,_id:""},vt=Z.list(Ie,"x",!0),ct=Z.list(Ie,"y",!0),kt=[];for(et=0;et<vt.length;et++)for(kt.push({x:vt[et],y:pt}),tt=0;tt<ct.length;tt++)et===0&&kt.push({x:dt,y:ct[tt]}),kt.push({x:vt[et],y:ct[tt]});var ut=ze._clips.selectAll(".axesclip").data(kt,function(ft){return ft.x._id+ft.y._id});ut.enter().append("clipPath").classed("axesclip",!0).attr("id",function(ft){return"clip"+ze._uid+ft.x._id+ft.y._id}).append("rect"),ut.exit().remove(),ut.each(function(ft){S.select(this).select("rect").attr({x:ft.x._offset||0,y:ft.y._offset||0,width:ft.x._length||1,height:ft.y._length||1})})}},Z.draw=function(Ie,ze,et){var tt=Ie._fullLayout;ze==="redraw"&&tt._paper.selectAll("g.subplot").each(function(ct){var kt=ct[0],ut=tt._plots[kt];if(ut){var ft=ut.xaxis,bt=ut.yaxis;ut.xaxislayer.selectAll("."+ft._id+"tick").remove(),ut.yaxislayer.selectAll("."+bt._id+"tick").remove(),ut.xaxislayer.selectAll("."+ft._id+"tick2").remove(),ut.yaxislayer.selectAll("."+bt._id+"tick2").remove(),ut.xaxislayer.selectAll("."+ft._id+"divider").remove(),ut.yaxislayer.selectAll("."+bt._id+"divider").remove(),ut.minorGridlayer&&ut.minorGridlayer.selectAll("path").remove(),ut.gridlayer&&ut.gridlayer.selectAll("path").remove(),ut.zerolinelayer&&ut.zerolinelayer.selectAll("path").remove(),tt._infolayer.select(".g-"+ft._id+"title").remove(),tt._infolayer.select(".g-"+bt._id+"title").remove()}});var dt=ze&&ze!=="redraw"?ze:Z.listIds(Ie),pt=Z.list(Ie).filter(function(ct){return ct.autoshift}).map(function(ct){return ct.overlaying});dt.map(function(ct){var kt=Z.getFromId(Ie,ct);if(kt.tickmode==="sync"&&kt.overlaying){var ut=dt.findIndex(function(ft){return ft===kt.overlaying});ut>=0&&dt.unshift(dt.splice(ut,1).shift())}});var vt={false:{left:0,right:0}};return b.syncOrAsync(dt.map(function(ct){return function(){if(ct){var kt=Z.getFromId(Ie,ct);et||(et={}),et.axShifts=vt,et.overlayingShiftedAx=pt;var ut=Z.drawOne(Ie,kt,et);return kt._shiftPusher&&ot(kt,kt._fullDepth||0,vt,!0),kt._r=kt.range.slice(),kt._rl=b.simpleMap(kt._r,kt.r2l),ut}}}))},Z.drawOne=function(Ie,ze,et){var tt,dt,pt,vt=(et=et||{}).axShifts||{},ct=et.overlayingShiftedAx||[];ze.setScale();var kt=Ie._fullLayout,ut=ze._id,ft=ut.charAt(0),bt=Z.counterLetter(ut),It=kt._plots[ze._mainSubplot];if(It){if(ze._shiftPusher=ze.autoshift||ct.indexOf(ze._id)!==-1||ct.indexOf(ze.overlaying)!==-1,ze._shiftPusher&ze.anchor==="free"){var zt=ze.linewidth/2||0;ze.ticks==="inside"&&(zt+=ze.ticklen),ot(ze,zt,vt,!0),ot(ze,ze.shift||0,vt,!1)}et.skipTitle===!0&&ze._shift!==void 0||(ze._shift=function(sn,Yt){return sn.autoshift?Yt[sn.overlaying][sn.side]:sn.shift||0}(ze,vt));var Rt=It[ft+"axislayer"],Jt=ze._mainLinePosition,qt=Jt+=ze._shift,Wt=ze._mainMirrorPosition,jt=ze._vals=Z.calcTicks(ze),fn=[ze.mirror,qt,Wt].join("_");for(tt=0;tt<jt.length;tt++)jt[tt].axInfo=fn;ze._selections={},ze._tickAngles&&(ze._prevTickAngles=ze._tickAngles),ze._tickAngles={},ze._depth=null;var xn={};if(ze.visible){var un,Ht,nn=Z.makeTransTickFn(ze),Kt=Z.makeTransTickLabelFn(ze),on=ze.ticks==="inside",hn=ze.ticks==="outside";if(ze.tickson==="boundaries"){var dn=function(sn,Yt){var Xt,an=[],ln=function(Sn,En){var jn=Sn.xbnd[En];jn!==null&&an.push(b.extendFlat({},Sn,{x:jn}))};if(Yt.length){for(Xt=0;Xt<Yt.length;Xt++)ln(Yt[Xt],0);ln(Yt[Xt-1],1)}return an}(0,jt);Ht=Z.clipEnds(ze,dn),un=on?Ht:dn}else Ht=Z.clipEnds(ze,jt),un=on&&ze.ticklabelmode!=="period"?Ht:jt;var Mn,Cn=ze._gridVals=Ht,Tn=function(sn,Yt){var Xt,an,ln=[],Sn=Yt.length&&Yt[Yt.length-1].x<Yt[0].x,En=function(Fn,Xn){var Hn=Fn.xbnd[Xn];Hn!==null&&ln.push(b.extendFlat({},Fn,{x:Hn}))};if(sn.showdividers&&Yt.length){for(Xt=0;Xt<Yt.length;Xt++){var jn=Yt[Xt];jn.text2!==an&&En(jn,Sn?1:0),an=jn.text2}En(Yt[Xt-1],Sn?0:1)}return ln}(ze,jt);if(!kt._hasOnlyLargeSploms){var Pn=ze._subplotsWith,Wn={};for(tt=0;tt<Pn.length;tt++){dt=Pn[tt];var $n=(pt=kt._plots[dt])[bt+"axis"],ar=$n._mainAxis._id;if(!Wn[ar]){Wn[ar]=1;var Qn=ft==="x"?"M0,"+$n._offset+"v"+$n._length:"M"+$n._offset+",0h"+$n._length;Z.drawGrid(Ie,ze,{vals:Cn,counterAxis:$n,layer:pt.gridlayer.select("."+ut),minorLayer:pt.minorGridlayer.select("."+ut),path:Qn,transFn:nn}),Z.drawZeroLine(Ie,ze,{counterAxis:$n,layer:pt.zerolinelayer,path:Qn,transFn:nn})}}}var Gn=Z.getTickSigns(ze),dr=Z.getTickSigns(ze,"minor");if(ze.ticks||ze.minor&&ze.minor.ticks){var Bt,tn,cn,gn,kn=Z.makeTickPath(ze,qt,Gn[2]),Vn=Z.makeTickPath(ze,qt,dr[2],{minor:!0});if(ze._anchorAxis&&ze.mirror&&ze.mirror!==!0?(Bt=Z.makeTickPath(ze,Wt,Gn[3]),tn=Z.makeTickPath(ze,Wt,dr[3],{minor:!0}),cn=kn+Bt,gn=Vn+tn):(Bt="",tn="",cn=kn,gn=Vn),ze.showdividers&&hn&&ze.tickson==="boundaries"){var In={};for(tt=0;tt<Tn.length;tt++)In[Tn[tt].x]=1;Mn=function(sn){return In[sn.x]?Bt:cn}}else Mn=function(sn){return sn.minor?gn:cn}}if(Z.drawTicks(Ie,ze,{vals:un,layer:Rt,path:Mn,transFn:nn}),ze.mirror==="allticks"){var Dn=Object.keys(ze._linepositions||{});for(tt=0;tt<Dn.length;tt++){dt=Dn[tt],pt=kt._plots[dt];var Kn=ze._linepositions[dt]||[],Ut=Kn[0],bn=Kn[1],At=Kn[2],Gt=Z.makeTickPath(ze,Ut,At?Gn[0]:dr[0],{minor:At})+Z.makeTickPath(ze,bn,At?Gn[1]:dr[1],{minor:At});Z.drawTicks(Ie,ze,{vals:un,layer:pt[ft+"axislayer"],path:Gt,transFn:nn})}}var $t=[];if($t.push(function(){return Z.drawLabels(Ie,ze,{vals:jt,layer:Rt,plotinfo:pt,transFn:Kt,labelFns:Z.makeLabelFns(ze,qt)})}),ze.type==="multicategory"){var mn={x:2,y:10}[ft];$t.push(function(){var sn={x:"height",y:"width"}[ft],Yt=An()[sn]+mn+(ze._tickAngles[ut+"tick"]?ze.tickfont.size*$:0);return Z.drawLabels(Ie,ze,{vals:st(ze,jt),layer:Rt,cls:ut+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:nn,labelFns:Z.makeLabelFns(ze,qt+Yt*Gn[4])})}),$t.push(function(){return ze._depth=Gn[4]*(An("tick2")[ze.side]-qt),function(sn,Yt,Xt){var an=Yt._id+"divider",ln=Xt.vals,Sn=Xt.layer.selectAll("path."+an).data(ln,gt);Sn.exit().remove(),Sn.enter().insert("path",":first-child").classed(an,1).classed("crisp",1).call(i.stroke,Yt.dividercolor).style("stroke-width",r.crispRound(sn,Yt.dividerwidth,1)+"px"),Sn.attr("transform",Xt.transFn).attr("d",Xt.path)}(Ie,ze,{vals:Tn,layer:Rt,path:Z.makeTickPath(ze,qt,Gn[4],{len:ze._depth}),transFn:nn})})}else ze.title.hasOwnProperty("standoff")&&$t.push(function(){ze._depth=Gn[4]*(An()[ze.side]-qt)});var yn=T.getComponentMethod("rangeslider","isVisible")(ze);return et.skipTitle||yn&&ze.side==="bottom"||$t.push(function(){return function(sn,Yt){var Xt,an=sn._fullLayout,ln=Yt._id,Sn=ln.charAt(0),En=Yt.title.font.size;if(Yt.title.hasOwnProperty("standoff"))Xt=Yt._depth+Yt.title.standoff+mt(Yt);else{var jn=We(Yt);if(Yt.type==="multicategory")Xt=Yt._depth;else{var Fn=1.5*En;jn&&(Fn=.5*En,Yt.ticks==="outside"&&(Fn+=Yt.ticklen)),Xt=10+Fn+(Yt.linewidth?Yt.linewidth-1:0)}jn||(Xt+=Sn==="x"?Yt.side==="top"?En*(Yt.showticklabels?1:0):En*(Yt.showticklabels?1.5:.5):Yt.side==="right"?En*(Yt.showticklabels?1:.5):En*(Yt.showticklabels?.5:0))}var Xn,Hn,nr,er,tr=Z.getPxPosition(sn,Yt);if(Sn==="x"?(Hn=Yt._offset+Yt._length/2,nr=Yt.side==="top"?tr-Xt:tr+Xt):(nr=Yt._offset+Yt._length/2,Hn=Yt.side==="right"?tr+Xt:tr-Xt,Xn={rotate:"-90",offset:0}),Yt.type!=="multicategory"){var lr=Yt._selections[Yt._id+"tick"];if(er={selection:lr,side:Yt.side},lr&&lr.node()&&lr.node().parentNode){var ur=r.getTranslate(lr.node().parentNode);er.offsetLeft=ur.x,er.offsetTop=ur.y}Yt.title.hasOwnProperty("standoff")&&(er.pad=0)}return Yt._titleStandoff=Xt,e.draw(sn,ln+"title",{propContainer:Yt,propName:Yt._name+".title.text",placeholder:an._dfltTitle[Sn],avoid:er,transform:Xn,attributes:{x:Hn,y:nr,"text-anchor":"middle"}})}(Ie,ze)}),$t.push(function(){var sn,Yt,Xt,an,ln=ze.side.charAt(0),Sn=W[ze.side].charAt(0),En=Z.getPxPosition(Ie,ze),jn=hn?ze.ticklen:0;(ze.automargin||yn||ze._shiftPusher)&&(ze.type==="multicategory"?sn=An("tick2"):(sn=An(),ft==="x"&&ln==="b"&&(ze._depth=Math.max(sn.width>0?sn.bottom-En:0,jn))));var Fn=0,Xn=0;if(ze._shiftPusher&&(Fn=Math.max(jn,sn.height>0?ln==="l"?En-sn.left:sn.right-En:0),ze.title.text!==kt._dfltTitle[ft]&&(Xn=(ze._titleStandoff||0)+(ze._titleScoot||0),ln==="l"&&(Xn+=mt(ze))),ze._fullDepth=Math.max(Fn,Xn)),ze.automargin){Yt={x:0,y:0,r:0,l:0,t:0,b:0};var Hn=[0,1],nr=typeof ze._shift=="number"?ze._shift:0;if(ft==="x"){if(ln==="b"?Yt[ln]=ze._depth:(Yt[ln]=ze._depth=Math.max(sn.width>0?En-sn.top:0,jn),Hn.reverse()),sn.width>0){var er=sn.right-(ze._offset+ze._length);er>0&&(Yt.xr=1,Yt.r=er);var tr=ze._offset-sn.left;tr>0&&(Yt.xl=0,Yt.l=tr)}}else if(ln==="l"?(ze._depth=Math.max(sn.height>0?En-sn.left:0,jn),Yt[ln]=ze._depth-nr):(ze._depth=Math.max(sn.height>0?sn.right-En:0,jn),Yt[ln]=ze._depth+nr,Hn.reverse()),sn.height>0){var lr=sn.bottom-(ze._offset+ze._length);lr>0&&(Yt.yb=0,Yt.b=lr);var ur=ze._offset-sn.top;ur>0&&(Yt.yt=1,Yt.t=ur)}Yt[bt]=ze.anchor==="free"?ze.position:ze._anchorAxis.domain[Hn[0]],ze.title.text!==kt._dfltTitle[ft]&&(Yt[ln]+=mt(ze)+(ze.title.standoff||0)),ze.mirror&&ze.anchor!=="free"&&((Xt={x:0,y:0,r:0,l:0,t:0,b:0})[Sn]=ze.linewidth,ze.mirror&&ze.mirror!==!0&&(Xt[Sn]+=jn),ze.mirror===!0||ze.mirror==="ticks"?Xt[bt]=ze._anchorAxis.domain[Hn[1]]:ze.mirror!=="all"&&ze.mirror!=="allticks"||(Xt[bt]=[ze._counterDomainMin,ze._counterDomainMax][Hn[1]]))}yn&&(an=T.getComponentMethod("rangeslider","autoMarginOpts")(Ie,ze)),typeof ze.automargin=="string"&&($e(Yt,ze.automargin),$e(Xt,ze.automargin)),l.autoMargin(Ie,xt(ze),Yt),l.autoMargin(Ie,Tt(ze),Xt),l.autoMargin(Ie,wt(ze),an)}),b.syncOrAsync($t)}}function An(sn){var Yt=ut+(sn||"tick");return xn[Yt]||(xn[Yt]=function(Xt,an){var ln,Sn,En,jn;return Xt._selections[an].size()?(ln=1/0,Sn=-1/0,En=1/0,jn=-1/0,Xt._selections[an].each(function(){var Fn=rt(this),Xn=r.bBox(Fn.node().parentNode);ln=Math.min(ln,Xn.top),Sn=Math.max(Sn,Xn.bottom),En=Math.min(En,Xn.left),jn=Math.max(jn,Xn.right)})):(ln=0,Sn=0,En=0,jn=0),{top:ln,bottom:Sn,left:En,right:jn,height:Sn-ln,width:jn-En}}(ze,Yt)),xn[Yt]}},Z.getTickSigns=function(Ie,ze){var et=Ie._id.charAt(0),tt={x:"top",y:"right"}[et],dt=Ie.side===tt?1:-1,pt=[-1,1,dt,-dt];return(ze?(Ie.minor||{}).ticks:Ie.ticks)!=="inside"==(et==="x")&&(pt=pt.map(function(vt){return-vt})),Ie.side&&pt.push({l:-1,t:-1,r:1,b:1}[Ie.side.charAt(0)]),pt},Z.makeTransTickFn=function(Ie){return Ie._id.charAt(0)==="x"?function(ze){return d(Ie._offset+Ie.l2p(ze.x),0)}:function(ze){return d(0,Ie._offset+Ie.l2p(ze.x))}},Z.makeTransTickLabelFn=function(Ie){var ze=function(dt){var pt=dt.ticklabelposition||"",vt=function(Wt){return pt.indexOf(Wt)!==-1},ct=vt("top"),kt=vt("left"),ut=vt("right"),ft=vt("bottom"),bt=vt("inside"),It=ft||kt||ct||ut;if(!It&&!bt)return[0,0];var zt=dt.side,Rt=It?(dt.tickwidth||0)/2:0,Jt=3,qt=dt.tickfont?dt.tickfont.size:12;return(ft||ct)&&(Rt+=qt*te,Jt+=(dt.linewidth||0)/2),(kt||ut)&&(Rt+=(dt.linewidth||0)/2,Jt+=3),bt&&zt==="top"&&(Jt-=qt*(1-te)),(kt||ct)&&(Rt=-Rt),zt!=="bottom"&&zt!=="right"||(Jt=-Jt),[It?Rt:0,bt?Jt:0]}(Ie),et=ze[0],tt=ze[1];return Ie._id.charAt(0)==="x"?function(dt){return d(et+Ie._offset+Ie.l2p(Ke(dt)),tt)}:function(dt){return d(tt,et+Ie._offset+Ie.l2p(Ke(dt)))}},Z.makeTickPath=function(Ie,ze,et,tt){tt||(tt={});var dt=tt.minor;if(dt&&!Ie.minor)return"";var pt=tt.len!==void 0?tt.len:dt?Ie.minor.ticklen:Ie.ticklen,vt=Ie._id.charAt(0),ct=(Ie.linewidth||1)/2;return vt==="x"?"M0,"+(ze+ct*et)+"v"+pt*et:"M"+(ze+ct*et)+",0h"+pt*et},Z.makeLabelFns=function(Ie,ze,et){var tt=Ie.ticklabelposition||"",dt=function(dn){return tt.indexOf(dn)!==-1},pt=dt("top"),vt=dt("left"),ct=dt("right"),kt=dt("bottom")||vt||pt||ct,ut=dt("inside"),ft=tt==="inside"&&Ie.ticks==="inside"||!ut&&Ie.ticks==="outside"&&Ie.tickson!=="boundaries",bt=0,It=0,zt=ft?Ie.ticklen:0;if(ut?zt*=-1:kt&&(zt=0),ft&&(bt+=zt,et)){var Rt=b.deg2rad(et);bt=zt*Math.cos(Rt)+1,It=zt*Math.sin(Rt)}Ie.showticklabels&&(ft||Ie.showline)&&(bt+=.2*Ie.tickfont.size);var Jt,qt,Wt,jt,fn,xn={labelStandoff:bt+=(Ie.linewidth||1)/2*(ut?-1:1),labelShift:It},un=0,Ht=Ie.side,nn=Ie._id.charAt(0),Kt=Ie.tickangle;if(nn==="x")jt=(fn=!ut&&Ht==="bottom"||ut&&Ht==="top")?1:-1,ut&&(jt*=-1),Jt=It*jt,qt=ze+bt*jt,Wt=fn?1:-.2,Math.abs(Kt)===90&&(ut?Wt+=q:Wt=Kt===-90&&Ht==="bottom"?te:Kt===90&&Ht==="top"?q:.5,un=q/2*(Kt/90)),xn.xFn=function(dn){return dn.dx+Jt+un*dn.fontSize},xn.yFn=function(dn){return dn.dy+qt+dn.fontSize*Wt},xn.anchorFn=function(dn,Mn){if(kt){if(vt)return"end";if(ct)return"start"}return k(Mn)&&Mn!==0&&Mn!==180?Mn*jt<0!==ut?"end":"start":"middle"},xn.heightFn=function(dn,Mn,Cn){return Mn<-60||Mn>60?-.5*Cn:Ie.side==="top"!==ut?-Cn:0};else if(nn==="y"){if(jt=(fn=!ut&&Ht==="left"||ut&&Ht==="right")?1:-1,ut&&(jt*=-1),Jt=bt,qt=It*jt,Wt=0,ut||Math.abs(Kt)!==90||(Wt=Kt===-90&&Ht==="left"||Kt===90&&Ht==="right"?te:.5),ut){var on=k(Kt)?+Kt:0;if(on!==0){var hn=b.deg2rad(on);un=Math.abs(Math.sin(hn))*te*jt,Wt=0}}xn.xFn=function(dn){return dn.dx+ze-(Jt+dn.fontSize*Wt)*jt+un*dn.fontSize},xn.yFn=function(dn){return dn.dy+qt+dn.fontSize*q},xn.anchorFn=function(dn,Mn){return k(Mn)&&Math.abs(Mn)===90?"middle":fn?"end":"start"},xn.heightFn=function(dn,Mn,Cn){return Ie.side==="right"&&(Mn*=-1),Mn<-30?-Cn:Mn<30?-.5*Cn:0}}return xn},Z.drawTicks=function(Ie,ze,et){et=et||{};var tt=ze._id+"tick",dt=[].concat(ze.minor&&ze.minor.ticks?et.vals.filter(function(vt){return vt.minor&&!vt.noTick}):[]).concat(ze.ticks?et.vals.filter(function(vt){return!vt.minor&&!vt.noTick}):[]),pt=et.layer.selectAll("path."+tt).data(dt,gt);pt.exit().remove(),pt.enter().append("path").classed(tt,1).classed("ticks",1).classed("crisp",et.crisp!==!1).each(function(vt){return i.stroke(S.select(this),vt.minor?ze.minor.tickcolor:ze.tickcolor)}).style("stroke-width",function(vt){return r.crispRound(Ie,vt.minor?ze.minor.tickwidth:ze.tickwidth,1)+"px"}).attr("d",et.path).style("display",null),nt(ze,[H]),pt.attr("transform",et.transFn)},Z.drawGrid=function(Ie,ze,et){if(et=et||{},ze.tickmode!=="sync"){var tt=ze._id+"grid",dt=ze.minor&&ze.minor.showgrid,pt=dt?et.vals.filter(function(Wt){return Wt.minor}):[],vt=ze.showgrid?et.vals.filter(function(Wt){return!Wt.minor}):[],ct=et.counterAxis;if(ct&&Z.shouldShowZeroLine(Ie,ze,ct))for(var kt=ze.tickmode==="array",ut=0;ut<vt.length;ut++){var ft=vt[ut].x;if(kt?!ft:Math.abs(ft)<ze.dtick/100){if(vt=vt.slice(0,ut).concat(vt.slice(ut+1)),!kt)break;ut--}}ze._gw=r.crispRound(Ie,ze.gridwidth,1);for(var bt=dt?r.crispRound(Ie,ze.minor.gridwidth,1):0,It=et.layer,zt=et.minorLayer,Rt=1;Rt>=0;Rt--){var Jt=Rt?It:zt;if(Jt){var qt=Jt.selectAll("path."+tt).data(Rt?vt:pt,gt);qt.exit().remove(),qt.enter().append("path").classed(tt,1).classed("crisp",et.crisp!==!1),qt.attr("transform",et.transFn).attr("d",et.path).each(function(Wt){return i.stroke(S.select(this),Wt.minor?ze.minor.gridcolor:ze.gridcolor||"#ddd")}).style("stroke-dasharray",function(Wt){return r.dashStyle(Wt.minor?ze.minor.griddash:ze.griddash,Wt.minor?ze.minor.gridwidth:ze.gridwidth)}).style("stroke-width",function(Wt){return(Wt.minor?bt:ze._gw)+"px"}).style("display",null),typeof et.path=="function"&&qt.attr("d",et.path)}}nt(ze,[G,I])}},Z.drawZeroLine=function(Ie,ze,et){et=et||et;var tt=ze._id+"zl",dt=Z.shouldShowZeroLine(Ie,ze,et.counterAxis),pt=et.layer.selectAll("path."+tt).data(dt?[{x:0,id:ze._id}]:[]);pt.exit().remove(),pt.enter().append("path").classed(tt,1).classed("zl",1).classed("crisp",et.crisp!==!1).each(function(){et.layer.selectAll("path").sort(function(vt,ct){return re(vt.id,ct.id)})}),pt.attr("transform",et.transFn).attr("d",et.path).call(i.stroke,ze.zerolinecolor||i.defaultLine).style("stroke-width",r.crispRound(Ie,ze.zerolinewidth,ze._gw||1)+"px").style("display",null),nt(ze,[D])},Z.drawLabels=function(Ie,ze,et){et=et||{};var tt=Ie._fullLayout,dt=ze._id,pt=dt.charAt(0),vt=et.cls||dt+"tick",ct=et.vals.filter(function(jt){return jt.text}),kt=et.labelFns,ut=et.secondary?0:ze.tickangle,ft=(ze._prevTickAngles||{})[vt],bt=et.layer.selectAll("g."+vt).data(ze.showticklabels?ct:[],gt),It=[];function zt(jt,fn){jt.each(function(xn){var un=S.select(this),Ht=un.select(".text-math-group"),nn=kt.anchorFn(xn,fn),Kt=et.transFn.call(un.node(),xn)+(k(fn)&&+fn!=0?" rotate("+fn+","+kt.xFn(xn)+","+(kt.yFn(xn)-xn.fontSize/2)+")":""),on=s.lineCount(un),hn=$*xn.fontSize,dn=kt.heightFn(xn,k(fn)?+fn:0,(on-1)*hn);if(dn&&(Kt+=d(0,dn)),Ht.empty()){var Mn=un.select("text");Mn.attr({transform:Kt,"text-anchor":nn}),Mn.style("opacity",1),ze._adjustTickLabelsOverflow&&ze._adjustTickLabelsOverflow()}else{var Cn=r.bBox(Ht.node()).width*{end:-.5,start:.5}[nn];Ht.attr("transform",Kt+d(Cn,0))}})}bt.enter().append("g").classed(vt,1).append("text").attr("text-anchor","middle").each(function(jt){var fn=S.select(this),xn=Ie._promises.length;fn.call(s.positionText,kt.xFn(jt),kt.yFn(jt)).call(r.font,jt.font,jt.fontSize,jt.fontColor).text(jt.text).call(s.convertToTspans,Ie),Ie._promises[xn]?It.push(Ie._promises.pop().then(function(){zt(fn,ut)})):zt(fn,ut)}),nt(ze,[N]),bt.exit().remove(),et.repositionOnUpdate&&bt.each(function(jt){S.select(this).select("text").call(s.positionText,kt.xFn(jt),kt.yFn(jt))}),ze._adjustTickLabelsOverflow=function(){var jt=ze.ticklabeloverflow;if(jt&&jt!=="allow"){var fn=jt.indexOf("hide")!==-1,xn=ze._id.charAt(0)==="x",un=0,Ht=xn?Ie._fullLayout.width:Ie._fullLayout.height;if(jt.indexOf("domain")!==-1){var nn=b.simpleMap(ze.range,ze.r2l);un=ze.l2p(nn[0])+ze._offset,Ht=ze.l2p(nn[1])+ze._offset}var Kt=Math.min(un,Ht),on=Math.max(un,Ht),hn=ze.side,dn=1/0,Mn=-1/0;for(var Cn in bt.each(function(Wn){var $n=S.select(this);if($n.select(".text-math-group").empty()){var ar=r.bBox($n.node()),Qn=0;xn?(ar.right>on||ar.left<Kt)&&(Qn=1):(ar.bottom>on||ar.top+(ze.tickangle?0:Wn.fontSize/4)<Kt)&&(Qn=1);var Gn=$n.select("text");Qn?fn&&Gn.style("opacity",0):(Gn.style("opacity",1),dn=hn==="bottom"||hn==="right"?Math.min(dn,xn?ar.top:ar.left):-1/0,Mn=hn==="top"||hn==="left"?Math.max(Mn,xn?ar.bottom:ar.right):1/0)}}),tt._plots){var Tn=tt._plots[Cn];if(ze._id===Tn.xaxis._id||ze._id===Tn.yaxis._id){var Pn=xn?Tn.yaxis:Tn.xaxis;Pn&&(Pn["_visibleLabelMin_"+ze._id]=dn,Pn["_visibleLabelMax_"+ze._id]=Mn)}}}},ze._hideCounterAxisInsideTickLabels=function(jt){var fn=ze._id.charAt(0)==="x",xn=[];for(var un in tt._plots){var Ht=tt._plots[un];ze._id!==Ht.xaxis._id&&ze._id!==Ht.yaxis._id||xn.push(fn?Ht.yaxis:Ht.xaxis)}xn.forEach(function(nn,Kt){nn&&We(nn)&&(jt||[D,I,G,H,N]).forEach(function(on){var hn=on.K==="tick"&&on.L==="text"&&ze.ticklabelmode==="period",dn=tt._plots[ze._mainSubplot];(on.K===D.K?dn.zerolinelayer.selectAll("."+ze._id+"zl"):on.K===I.K?dn.minorGridlayer.selectAll("."+ze._id):on.K===G.K?dn.gridlayer.selectAll("."+ze._id):dn[ze._id.charAt(0)+"axislayer"]).each(function(){var Mn=S.select(this);on.L&&(Mn=Mn.selectAll(on.L)),Mn.each(function(Cn){var Tn=ze.l2p(hn?Ke(Cn):Cn.x)+ze._offset,Pn=S.select(this);Tn<ze["_visibleLabelMax_"+nn._id]&&Tn>ze["_visibleLabelMin_"+nn._id]?Pn.style("display","none"):on.K!=="tick"||Kt||Pn.style("display",null)})})})})},zt(bt,ft+1?ft:ut);var Rt=null;ze._selections&&(ze._selections[vt]=bt);var Jt=[function(){return It.length&&Promise.all(It)}];ze.automargin&&tt._redrawFromAutoMarginCount&&ft===90?(Rt=90,Jt.push(function(){zt(bt,ft)})):Jt.push(function(){if(zt(bt,ut),ct.length&&pt==="x"&&!k(ut)&&(ze.type!=="log"||String(ze.dtick).charAt(0)!=="D")){Rt=0;var jt,fn=0,xn=[];if(bt.each(function($n){fn=Math.max(fn,$n.fontSize);var ar=ze.l2p($n.x),Qn=rt(this),Gn=r.bBox(Qn.node());xn.push({top:0,bottom:10,height:10,left:ar-Gn.width/2,right:ar+Gn.width/2+2,width:Gn.width+2})}),ze.tickson!=="boundaries"&&!ze.showdividers||et.secondary){var un=ct.length,Ht=Math.abs((ct[un-1].x-ct[0].x)*ze._m)/(un-1),nn=ze.ticklabelposition||"",Kt=function($n){return nn.indexOf($n)!==-1},on=Kt("top"),hn=Kt("left"),dn=Kt("right"),Mn=Kt("bottom")||hn||on||dn?(ze.tickwidth||0)+6:0,Cn=Ht<2.5*fn||ze.type==="multicategory"||ze._name==="realaxis";for(jt=0;jt<xn.length-1;jt++)if(b.bBoxIntersect(xn[jt],xn[jt+1],Mn)){Rt=Cn?90:30;break}}else{var Tn=2;for(ze.ticks&&(Tn+=ze.tickwidth/2),jt=0;jt<xn.length;jt++){var Pn=ct[jt].xbnd,Wn=xn[jt];if(Pn[0]!==null&&Wn.left-ze.l2p(Pn[0])<Tn||Pn[1]!==null&&ze.l2p(Pn[1])-Wn.right<Tn){Rt=90;break}}}Rt&&zt(bt,Rt)}}),ze._tickAngles&&Jt.push(function(){ze._tickAngles[vt]=Rt===null?k(ut)?ut:0:Rt});var qt=ze._anchorAxis;qt&&qt.autorange&&We(ze)&&!ae(tt,ze._id)&&(tt._insideTickLabelsAutorange||(tt._insideTickLabelsAutorange={}),tt._insideTickLabelsAutorange[qt._name+".autorange"]=qt.autorange,Jt.push(function(){bt.each(function(jt,fn){var xn=rt(this);xn.select(".text-math-group").empty()&&(ze._vals[fn].bb=r.bBox(xn.node()))})}));var Wt=b.syncOrAsync(Jt);return Wt&&Wt.then&&Ie._promises.push(Wt),Wt},Z.getPxPosition=function(Ie,ze){var et,tt=Ie._fullLayout._size,dt=ze._id.charAt(0),pt=ze.side;return ze.anchor!=="free"?et=ze._anchorAxis:dt==="x"?et={_offset:tt.t+(1-(ze.position||0))*tt.h,_length:0}:dt==="y"&&(et={_offset:tt.l+(ze.position||0)*tt.w+ze._shift,_length:0}),pt==="top"||pt==="left"?et._offset:pt==="bottom"||pt==="right"?et._offset+et._length:void 0},Z.shouldShowZeroLine=function(Ie,ze,et){var tt=b.simpleMap(ze.range,ze.r2l);return tt[0]*tt[1]<=0&&ze.zeroline&&(ze.type==="linear"||ze.type==="-")&&!(ze.rangebreaks&&ze.maskBreaks(0)===P)&&(at(ze,0)||!function(dt,pt,vt,ct){var kt=vt._mainAxis;if(kt){var ut=dt._fullLayout,ft=pt._id.charAt(0),bt=Z.counterLetter(pt._id),It=pt._offset+(Math.abs(ct[0])<Math.abs(ct[1])==(ft==="x")?0:pt._length),zt=ut._plots[vt._mainSubplot];if(!(zt.mainplotinfo||zt).overlays.length)return Wt(vt);for(var Rt=Z.list(dt,bt),Jt=0;Jt<Rt.length;Jt++){var qt=Rt[Jt];if(qt._mainAxis===kt&&Wt(qt))return!0}}function Wt(jt){if(!jt.showline||!jt.linewidth)return!1;var fn=Math.max((jt.linewidth+pt.zerolinewidth)/2,1);function xn(nn){return typeof nn=="number"&&Math.abs(nn-It)<fn}if(xn(jt._mainLinePosition)||xn(jt._mainMirrorPosition))return!0;var un=jt._linepositions||{};for(var Ht in un)if(xn(un[Ht][0])||xn(un[Ht][1]))return!0}}(Ie,ze,et,tt)||function(dt,pt){for(var vt=dt._fullData,ct=pt._mainSubplot,kt=pt._id.charAt(0),ut=0;ut<vt.length;ut++){var ft=vt[ut];if(ft.visible===!0&&ft.xaxis+ft.yaxis===ct&&(T.traceIs(ft,"bar-like")&&ft.orientation==={x:"h",y:"v"}[kt]||ft.fill&&ft.fill.charAt(ft.fill.length-1)===kt))return!0}return!1}(Ie,ze))},Z.clipEnds=function(Ie,ze){return ze.filter(function(et){return at(Ie,et.x)})},Z.allowAutoMargin=function(Ie){for(var ze=Z.list(Ie,"",!0),et=0;et<ze.length;et++){var tt=ze[et];tt.automargin&&(l.allowAutoMargin(Ie,xt(tt)),tt.mirror&&l.allowAutoMargin(Ie,Tt(tt))),T.getComponentMethod("rangeslider","isVisible")(tt)&&l.allowAutoMargin(Ie,wt(tt))}},Z.swap=function(Ie,ze){for(var et=function(dt,pt){var vt,ct,kt=[];for(vt=0;vt<pt.length;vt++){var ut=[],ft=dt._fullData[pt[vt]].xaxis,bt=dt._fullData[pt[vt]].yaxis;if(ft&&bt){for(ct=0;ct<kt.length;ct++)kt[ct].x.indexOf(ft)===-1&&kt[ct].y.indexOf(bt)===-1||ut.push(ct);if(ut.length){var It,zt=kt[ut[0]];if(ut.length>1)for(ct=1;ct<ut.length;ct++)It=kt[ut[ct]],Ot(zt.x,It.x),Ot(zt.y,It.y);Ot(zt.x,[ft]),Ot(zt.y,[bt])}else kt.push({x:[ft],y:[bt]})}}return kt}(Ie,ze),tt=0;tt<et.length;tt++)Ct(Ie,et[tt].x,et[tt].y)}},4322:function(Q,z,t){var S=t(92770),k=t(71828),l=t(50606).BADNUM,T=k.isArrayOrTypedArray,b=k.isDateTime,d=k.cleanNumber,s=Math.round;function e(r,n){return n?S(r):typeof r=="number"}function i(r){return Math.max(1,(r-1)/1e3)}Q.exports=function(r,n,a){var o=r,u=a.noMultiCategory;if(T(o)&&!o.length)return"-";if(!u&&function(f){return T(f[0])&&T(f[1])}(o))return"multicategory";if(u&&Array.isArray(o[0])){for(var p=[],c=0;c<o.length;c++)if(T(o[c]))for(var x=0;x<o[c].length;x++)p.push(o[c][x]);o=p}if(function(f,y){for(var v=f.length,m=i(v),_=0,h=0,A={},w=0;w<v;w+=m){var E=f[s(w)],L=String(E);A[L]||(A[L]=1,b(E,y)&&_++,S(E)&&h++)}return _>2*h}(o,n))return"date";var g=a.autotypenumbers!=="strict";return function(f,y){for(var v=f.length,m=i(v),_=0,h=0,A={},w=0;w<v;w+=m){var E=f[s(w)],L=String(E);if(!A[L]){A[L]=1;var C=typeof E;C==="boolean"?h++:(y?d(E)!==l:C==="number")?_++:C==="string"&&h++}}return h>2*_}(o,g)?"category":function(f,y){for(var v=f.length,m=0;m<v;m++)if(e(f[m],y))return!0;return!1}(o,g)?"linear":"-"}},71453:function(Q,z,t){var S=t(92770),k=t(73972),l=t(71828),T=t(44467),b=t(85501),d=t(13838),s=t(26218),e=t(38701),i=t(96115),r=t(89426),n=t(15258),a=t(92128),o=t(21994),u=t(85555).WEEKDAY_PATTERN,p=t(85555).HOUR_PATTERN;function c(f,y,v){function m(P,D){return l.coerce(f,y,d.rangebreaks,P,D)}if(m("enabled")){var _=m("bounds");if(_&&_.length>=2){var h,A,w="";if(_.length===2){for(h=0;h<2;h++)if(A=g(_[h])){w=u;break}}var E=m("pattern",w);if(E===u)for(h=0;h<2;h++)(A=g(_[h]))&&(y.bounds[h]=_[h]=A-1);if(E)for(h=0;h<2;h++)switch(A=_[h],E){case u:if(!S(A)||(A=+A)!==Math.floor(A)||A<0||A>=7)return void(y.enabled=!1);y.bounds[h]=_[h]=A;break;case p:if(!S(A)||(A=+A)<0||A>24)return void(y.enabled=!1);y.bounds[h]=_[h]=A}if(v.autorange===!1){var L=v.range;if(L[0]<L[1]){if(_[0]<L[0]&&_[1]>L[1])return void(y.enabled=!1)}else if(_[0]>L[0]&&_[1]<L[1])return void(y.enabled=!1)}}else{var C=m("values");if(!C||!C.length)return void(y.enabled=!1);m("dvalue")}}}Q.exports=function(f,y,v,m,_){var h,A=m.letter,w=m.font||{},E=m.splomStash||{},L=v("visible",!m.visibleDflt),C=y._template||{},P=y.type||C.type||"-";P==="date"&&(k.getComponentMethod("calendars","handleDefaults")(f,y,"calendar",m.calendar),m.noTicklabelmode||(h=v("ticklabelmode")));var D="";m.noTicklabelposition&&P!=="multicategory"||(D=l.coerce(f,y,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:h==="period"?["outside","inside"]:A==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),m.noTicklabeloverflow||v("ticklabeloverflow",D.indexOf("inside")!==-1?"hide past domain":P==="category"||P==="multicategory"?"allow":"hide past div"),o(y,_);var G=!y.isValidRange(f.range);G&&m.reverseDflt&&(G="reversed"),!v("autorange",G)||P!=="linear"&&P!=="-"||v("rangemode"),v("range"),y.cleanRange(),n(f,y,v,m),P==="category"||m.noHover||v("hoverformat");var I=v("color"),H=I!==d.color.dflt?I:w.color,N=E.label||_._dfltTitle[A];if(r(f,y,v,P,m),!L)return y;v("title.text",N),l.coerceFont(v,"title.font",{family:w.family,size:l.bigFont(w.size),color:H}),s(f,y,v,P);var F=m.hasMinor;if(F&&(T.newContainer(y,"minor"),s(f,y,v,P,{isMinor:!0})),i(f,y,v,P,m),e(f,y,v,m),F){var V=m.isMinor;m.isMinor=!0,e(f,y,v,m),m.isMinor=V}a(f,y,v,{dfltColor:I,bgColor:m.bgColor,showGrid:m.showGrid,hasMinor:F,attributes:d}),!F||y.minor.ticks||y.minor.showgrid||delete y.minor,(y.showline||y.ticks)&&v("mirror");var q,te=P==="multicategory";if(m.noTickson||P!=="category"&&!te||!y.ticks&&!y.showgrid||(te&&(q="boundaries"),v("tickson",q)==="boundaries"&&delete y.ticklabelposition),te&&v("showdividers")&&(v("dividercolor"),v("dividerwidth")),P==="date")if(b(f,y,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:c}),y.rangebreaks.length){for(var $=0;$<y.rangebreaks.length;$++)if(y.rangebreaks[$].pattern===u){y._hasDayOfWeekBreaks=!0;break}if(o(y,_),_._has("scattergl")||_._has("splom"))for(var W=0;W<m.data.length;W++){var Z=m.data[W];Z.type!=="scattergl"&&Z.type!=="splom"||(Z.visible=!1,l.warn(Z.type+" traces do not work on axes with rangebreaks. Setting trace "+Z.index+" to `visible: false`."))}}else delete y.rangebreaks;return y};var x={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function g(f){if(typeof f=="string")return x[f.substr(0,3).toLowerCase()]}},12663:function(Q,z,t){var S=t(31562),k=S.FORMAT_LINK,l=S.DATE_FORMAT_LINK;function T(d,s){return["Sets the "+d+" formatting rule"+(s?"for `"+s+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+k+"."].join(" ")}function b(d,s){return T(d,s)+[" And for dates see: "+l+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}Q.exports={axisHoverFormat:function(d,s){return{valType:"string",dflt:"",editType:"none",description:(s?T:b)("hover text",d)+["By default the values are formatted using "+(s?"generic number format":"`"+d+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:T,descriptionWithDates:b}},41675:function(Q,z,t){var S=t(73972),k=t(85555);function l(T,b){if(b&&b.length){for(var d=0;d<b.length;d++)if(b[d][T])return!0}return!1}z.id2name=function(T){if(typeof T=="string"&&T.match(k.AX_ID_PATTERN)){var b=T.split(" ")[0].substr(1);return b==="1"&&(b=""),T.charAt(0)+"axis"+b}},z.name2id=function(T){if(T.match(k.AX_NAME_PATTERN)){var b=T.substr(5);return b==="1"&&(b=""),T.charAt(0)+b}},z.cleanId=function(T,b,d){var s=/( domain)$/.test(T);if(typeof T=="string"&&T.match(k.AX_ID_PATTERN)&&(!b||T.charAt(0)===b)&&(!s||d)){var e=T.split(" ")[0].substr(1).replace(/^0+/,"");return e==="1"&&(e=""),T.charAt(0)+e+(s&&d?" domain":"")}},z.list=function(T,b,d){var s=T._fullLayout;if(!s)return[];var e,i=z.listIds(T,b),r=new Array(i.length);for(e=0;e<i.length;e++){var n=i[e];r[e]=s[n.charAt(0)+"axis"+n.substr(1)]}if(!d){var a=s._subplots.gl3d||[];for(e=0;e<a.length;e++){var o=s[a[e]];b?r.push(o[b+"axis"]):r.push(o.xaxis,o.yaxis,o.zaxis)}}return r},z.listIds=function(T,b){var d=T._fullLayout;if(!d)return[];var s=d._subplots;return b?s[b+"axis"]:s.xaxis.concat(s.yaxis)},z.getFromId=function(T,b,d){var s=T._fullLayout;return b=b===void 0||typeof b!="string"?b:b.replace(" domain",""),d==="x"?b=b.replace(/y[0-9]*/,""):d==="y"&&(b=b.replace(/x[0-9]*/,"")),s[z.id2name(b)]},z.getFromTrace=function(T,b,d){var s=T._fullLayout,e=null;if(S.traceIs(b,"gl3d")){var i=b.scene;i.substr(0,5)==="scene"&&(e=s[i][d+"axis"])}else e=z.getFromId(T,b[d+"axis"]||d);return e},z.idSort=function(T,b){var d=T.charAt(0),s=b.charAt(0);return d!==s?d>s?1:-1:+(T.substr(1)||1)-+(b.substr(1)||1)},z.ref2id=function(T){return!!/^[xyz]/.test(T)&&T.split(" ")[0]},z.isLinked=function(T,b){return l(b,T._axisMatchGroups)||l(b,T._axisConstraintGroups)}},15258:function(Q){Q.exports=function(z,t,S,k){if(t.type==="category"){var l,T=z.categoryarray,b=Array.isArray(T)&&T.length>0;b&&(l="array");var d,s=S("categoryorder",l);s==="array"&&(d=S("categoryarray")),b||s!=="array"||(s=t.categoryorder="trace"),s==="trace"?t._initialCategories=[]:s==="array"?t._initialCategories=d.slice():(d=function(e,i){var r,n,a,o=i.dataAttr||e._id.charAt(0),u={};if(i.axData)r=i.axData;else for(r=[],n=0;n<i.data.length;n++){var p=i.data[n];p[o+"axis"]===e._id&&r.push(p)}for(n=0;n<r.length;n++){var c=r[n][o];for(a=0;a<c.length;a++){var x=c[a];x!=null&&(u[x]=1)}}return Object.keys(u)}(t,k).sort(),s==="category ascending"?t._initialCategories=d:s==="category descending"&&(t._initialCategories=d.reverse()))}}},66287:function(Q,z,t){var S=t(92770),k=t(71828),l=t(50606),T=l.ONEDAY,b=l.ONEWEEK;z.dtick=function(d,s){var e=s==="log",i=s==="date",r=s==="category",n=i?T:1;if(!d)return n;if(S(d))return(d=Number(d))<=0?n:r?Math.max(1,Math.round(d)):i?Math.max(.1,d):d;if(typeof d!="string"||!i&&!e)return n;var a=d.charAt(0),o=d.substr(1);return(o=S(o)?Number(o):0)<=0||!(i&&a==="M"&&o===Math.round(o)||e&&a==="L"||e&&a==="D"&&(o===1||o===2))?n:d},z.tick0=function(d,s,e,i){return s==="date"?k.cleanDate(d,k.dateTick0(e,i%b==0?1:0)):i!=="D1"&&i!=="D2"?S(d)?Number(d):0:void 0}},85555:function(Q,z,t){var S=t(30587).counter;Q.exports={idRegex:{x:S("x","( domain)?"),y:S("y","( domain)?")},attrRegex:S("[xy]axis"),xAxisMatch:S("xaxis"),yAxisMatch:S("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},99082:function(Q,z,t){var S=t(71828),k=t(71739),l=t(41675).id2name,T=t(13838),b=t(42449),d=t(21994),s=t(50606).ALMOST_EQUAL,e=t(18783).FROM_BL;function i(c,x,g){var f=g.axIds,y=g.layoutOut,v=g.hasImage,m=y._axisConstraintGroups,_=y._axisMatchGroups,h=x._id,A=h.charAt(0),w=((y._splomAxes||{})[A]||{})[h]||{},E=x._id,L=E.charAt(0)==="x";function C(J,ee){return S.coerce(c,x,T,J,ee)}x._matchGroup=null,x._constraintGroup=null,C("constrain",v?"domain":"range"),S.coerce(c,x,{constraintoward:{valType:"enumerated",values:L?["left","center","right"]:["bottom","middle","top"],dflt:L?"center":"middle"}},"constraintoward");var P,D,G=x.type,I=[];for(P=0;P<f.length;P++)(D=f[P])!==E&&y[l(D)].type===G&&I.push(D);var H=n(m,E);if(H){var N=[];for(P=0;P<I.length;P++)H[D=I[P]]||N.push(D);I=N}var F,V,q=I.length;q&&(c.matches||w.matches)&&(F=S.coerce(c,x,{matches:{valType:"enumerated",values:I,dflt:I.indexOf(w.matches)!==-1?w.matches:void 0}},"matches"));var te=v&&!L?x.anchor:void 0;if(q&&!F&&(c.scaleanchor||te)&&(V=S.coerce(c,x,{scaleanchor:{valType:"enumerated",values:I}},"scaleanchor",te)),F){x._matchGroup=a(_,E,F,1);var $=y[l(F)],W=r(y,x)/r(y,$);L!==(F.charAt(0)==="x")&&(W=(L?"x":"y")+W),a(m,E,F,W)}else c.matches&&f.indexOf(c.matches)!==-1&&S.warn("ignored "+x._name+'.matches: "'+c.matches+'" to avoid an infinite loop');if(V){var Z=C("scaleratio");Z||(Z=x.scaleratio=1),a(m,E,V,Z)}else c.scaleanchor&&f.indexOf(c.scaleanchor)!==-1&&S.warn("ignored "+x._name+'.scaleanchor: "'+c.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function r(c,x){var g=x.domain;return g||(g=c[l(x.overlaying)].domain),g[1]-g[0]}function n(c,x){for(var g=0;g<c.length;g++)if(c[g][x])return c[g];return null}function a(c,x,g,f){var y,v,m,_,h,A=n(c,x);A===null?((A={})[x]=1,h=c.length,c.push(A)):h=c.indexOf(A);var w=Object.keys(A);for(y=0;y<c.length;y++)if(m=c[y],y!==h&&m[g]){var E=m[g];for(v=0;v<w.length;v++)m[_=w[v]]=o(E,o(f,A[_]));return void c.splice(h,1)}if(f!==1)for(v=0;v<w.length;v++){var L=w[v];A[L]=o(f,A[L])}A[g]=1}function o(c,x){var g,f,y="",v="";typeof c=="string"&&(g=(y=c.match(/^[xy]*/)[0]).length,c=+c.substr(g)),typeof x=="string"&&(f=(v=x.match(/^[xy]*/)[0]).length,x=+x.substr(f));var m=c*x;return g||f?g&&f&&y.charAt(0)!==v.charAt(0)?g===f?m:(g>f?y.substr(f):v.substr(g))+m:y+v+c*x:m}function u(c,x){for(var g=x._size,f=g.h/g.w,y={},v=Object.keys(c),m=0;m<v.length;m++){var _=v[m],h=c[_];if(typeof h=="string"){var A=h.match(/^[xy]*/)[0],w=A.length;h=+h.substr(w);for(var E=A.charAt(0)==="y"?f:1/f,L=0;L<w;L++)h*=E}y[_]=h}return y}function p(c,x){var g=c._inputDomain,f=e[c.constraintoward],y=g[0]+(g[1]-g[0])*f;c.domain=c._input.domain=[y+(g[0]-y)/x,y+(g[1]-y)/x],c.setScale()}z.handleDefaults=function(c,x,g){var f,y,v,m,_,h,A,w,E=g.axIds,L=g.axHasImage,C=x._axisConstraintGroups=[],P=x._axisMatchGroups=[];for(f=0;f<E.length;f++)i(_=c[m=l(E[f])],h=x[m],{axIds:E,layoutOut:x,hasImage:L[m]});function D($,W){for(f=0;f<$.length;f++)for(v in y=$[f])x[l(v)][W]=y}for(D(P,"_matchGroup"),f=0;f<C.length;f++)for(v in y=C[f])if((h=x[l(v)]).fixedrange){for(var G in y){var I=l(G);(c[I]||{}).fixedrange===!1&&S.warn("fixedrange was specified as false for axis "+I+" but was overridden because another axis in its constraint group has fixedrange true"),x[I].fixedrange=!0}break}for(f=0;f<C.length;){for(v in y=C[f]){(h=x[l(v)])._matchGroup&&Object.keys(h._matchGroup).length===Object.keys(y).length&&(C.splice(f,1),f--);break}f++}D(C,"_constraintGroup");var H=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],N=!1,F=!1;function V(){w=h[A],A==="rangebreaks"&&(F=h._hasDayOfWeekBreaks)}for(f=0;f<P.length;f++){y=P[f];for(var q=0;q<H.length;q++){var te;for(v in A=H[q],w=null,y)if(_=c[m=l(v)],h=x[m],A in h){if(!h.matches&&(te=h,A in _)){V();break}w===null&&A in _&&V()}if(A==="range"&&w&&(N=!0),A==="autorange"&&w===null&&N&&(w=!1),w===null&&A in te&&(w=te[A]),w!==null)for(v in y)(h=x[l(v)])[A]=A==="range"?w.slice():w,A==="rangebreaks"&&(h._hasDayOfWeekBreaks=F,d(h,x))}}},z.enforce=function(c){var x,g,f,y,v,m,_,h,A=c._fullLayout,w=A._axisConstraintGroups||[];for(x=0;x<w.length;x++){f=u(w[x],A);var E=Object.keys(f),L=1/0,C=0,P=1/0,D={},G={},I=!1;for(g=0;g<E.length;g++)G[y=E[g]]=v=A[l(y)],v._inputDomain?v.domain=v._inputDomain.slice():v._inputDomain=v.domain.slice(),v._inputRange||(v._inputRange=v.range.slice()),v.setScale(),D[y]=m=Math.abs(v._m)/f[y],L=Math.min(L,m),v.constrain!=="domain"&&v._constraintShrinkable||(P=Math.min(P,m)),delete v._constraintShrinkable,C=Math.max(C,m),v.constrain==="domain"&&(I=!0);if(!(L>s*C)||I){for(g=0;g<E.length;g++)if(m=D[y=E[g]],_=(v=G[y]).constrain,m!==P||_==="domain")if(h=m/P,_==="range")b(v,h);else{var H=v._inputDomain,N=(v.domain[1]-v.domain[0])/(H[1]-H[0]),F=(v.r2l(v.range[1])-v.r2l(v.range[0]))/(v.r2l(v._inputRange[1])-v.r2l(v._inputRange[0]));if((h/=N)*F<1){v.domain=v._input.domain=H.slice(),b(v,h);continue}if(F<1&&(v.range=v._input.range=v._inputRange.slice(),h*=F),v.autorange){var V=v.r2l(v.range[0]),q=v.r2l(v.range[1]),te=(V+q)/2,$=te,W=te,Z=Math.abs(q-te),J=te-Z*h*1.0001,ee=te+Z*h*1.0001,re=k.makePadFn(A,v,0),ae=k.makePadFn(A,v,1);p(v,h);var oe,ce,pe=Math.abs(v._m),ve=k.concatExtremes(c,v),we=ve.min,xe=ve.max;for(ce=0;ce<we.length;ce++)(oe=we[ce].val-re(we[ce])/pe)>J&&oe<$&&($=oe);for(ce=0;ce<xe.length;ce++)(oe=xe[ce].val+ae(xe[ce])/pe)<ee&&oe>W&&(W=oe);h/=(W-$)/(2*Z),$=v.l2r($),W=v.l2r(W),v.range=v._input.range=V<q?[$,W]:[W,$]}p(v,h)}}}},z.getAxisGroup=function(c,x){for(var g=c._axisMatchGroups,f=0;f<g.length;f++)if(g[f][x])return"g"+f;return x},z.clean=function(c,x){if(x._inputDomain){for(var g=!1,f=x._id,y=c._fullLayout._axisConstraintGroups,v=0;v<y.length;v++)if(y[v][f]){g=!0;break}g&&x.constrain==="domain"||(x._input.domain=x.domain=x._inputDomain,delete x._inputDomain)}}},29323:function(Q,z,t){var S=t(39898),k=t(71828),l=k.numberFormat,T=t(84267),b=t(38520),d=t(73972),s=k.strTranslate,e=t(63893),i=t(7901),r=t(91424),n=t(30211),a=t(89298),o=t(6964),u=t(28569),p=t(64505),c=p.selectingOrDrawing,x=p.freeMode,g=t(18783).FROM_TL,f=t(33306),y=t(61549).redrawReglTraces,v=t(74875),m=t(41675).getFromId,_=t(47322).prepSelect,h=t(47322).clearOutline,A=t(47322).selectOnClick,w=t(42449),E=t(85555),L=E.MINDRAG,C=E.MINZOOM,P=!0;function D(oe,ce,pe,ve){var we=k.ensureSingle(oe.draglayer,ce,pe,function(xe){xe.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",oe.id)});return we.call(o,ve),we.node()}function G(oe,ce,pe,ve,we,xe,ge){var Oe=D(oe,"rect",ce,pe);return S.select(Oe).call(r.setRect,ve,we,xe,ge),Oe}function I(oe,ce){for(var pe=0;pe<oe.length;pe++)if(!oe[pe].fixedrange)return ce;return""}function H(oe,ce,pe,ve,we){for(var xe=0;xe<oe.length;xe++){var ge=oe[xe];if(!ge.fixedrange)if(ge.rangebreaks){var Oe=ge._id.charAt(0)==="y",Ae=Oe?1-ce:ce,Te=Oe?1-pe:pe;ve[ge._name+".range[0]"]=ge.l2r(ge.p2l(Ae*ge._length)),ve[ge._name+".range[1]"]=ge.l2r(ge.p2l(Te*ge._length))}else{var se=ge._rl[0],le=ge._rl[1]-se;ve[ge._name+".range[0]"]=ge.l2r(se+le*ce),ve[ge._name+".range[1]"]=ge.l2r(se+le*pe)}}if(we&&we.length){var ne=(ce+(1-pe))/2;H(we,ne,1-ne,ve,[])}}function N(oe,ce){for(var pe=0;pe<oe.length;pe++){var ve=oe[pe];if(!ve.fixedrange)if(ve.rangebreaks){var we=ve._length,xe=(ve.p2l(0+ce)-ve.p2l(0)+(ve.p2l(we+ce)-ve.p2l(we)))/2;ve.range=[ve.l2r(ve._rl[0]-xe),ve.l2r(ve._rl[1]-xe)]}else ve.range=[ve.l2r(ve._rl[0]-ce/ve._m),ve.l2r(ve._rl[1]-ce/ve._m)]}}function F(oe){return 1-(oe>=0?Math.min(oe,.9):1/(1/Math.max(oe,-.3)+3.222))}function V(oe,ce,pe,ve,we){return oe.append("path").attr("class","zoombox").style({fill:ce>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",s(pe,ve)).attr("d",we+"Z")}function q(oe,ce,pe){return oe.append("path").attr("class","zoombox-corners").style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("transform",s(ce,pe)).attr("d","M0,0Z")}function te(oe,ce,pe,ve,we,xe){oe.attr("d",ve+"M"+pe.l+","+pe.t+"v"+pe.h+"h"+pe.w+"v-"+pe.h+"h-"+pe.w+"Z"),$(oe,ce,we,xe)}function $(oe,ce,pe,ve){pe||(oe.transition().style("fill",ve>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ce.transition().style("opacity",1).duration(200))}function W(oe){S.select(oe).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Z(oe){P&&oe.data&&oe._context.showTips&&(k.notifier(k._(oe,"Double-click to zoom back out"),"long"),P=!1)}function J(oe){var ce=Math.floor(Math.min(oe.b-oe.t,oe.r-oe.l,C)/2);return"M"+(oe.l-3.5)+","+(oe.t-.5+ce)+"h3v"+-ce+"h"+ce+"v-3h-"+(ce+3)+"ZM"+(oe.r+3.5)+","+(oe.t-.5+ce)+"h-3v"+-ce+"h"+-ce+"v-3h"+(ce+3)+"ZM"+(oe.r+3.5)+","+(oe.b+.5-ce)+"h-3v"+ce+"h"+-ce+"v3h"+(ce+3)+"ZM"+(oe.l-3.5)+","+(oe.b+.5-ce)+"h3v"+ce+"h"+ce+"v3h-"+(ce+3)+"Z"}function ee(oe,ce,pe,ve,we){for(var xe,ge,Oe,Ae,Te=!1,se={},le={},ne=(we||{}).xaHash,me=(we||{}).yaHash,Ee=0;Ee<ce.length;Ee++){var be=ce[Ee];for(xe in pe)if(be[xe]){for(Oe in be)we&&(ne[Oe]||me[Oe])||(Oe.charAt(0)==="x"?pe:ve)[Oe]||(se[Oe]=xe);for(ge in ve)we&&(ne[ge]||me[ge])||!be[ge]||(Te=!0)}for(ge in ve)if(be[ge])for(Ae in be)we&&(ne[Ae]||me[Ae])||(Ae.charAt(0)==="x"?pe:ve)[Ae]||(le[Ae]=ge)}Te&&(k.extendFlat(se,le),le={});var De={},Ue=[];for(Oe in se){var he=m(oe,Oe);Ue.push(he),De[he._id]=he}var ke={},_e=[];for(Ae in le){var Ce=m(oe,Ae);_e.push(Ce),ke[Ce._id]=Ce}return{xaHash:De,yaHash:ke,xaxes:Ue,yaxes:_e,xLinks:se,yLinks:le,isSubplotConstrained:Te}}function re(oe,ce){if(b){var pe=oe.onwheel!==void 0?"wheel":"mousewheel";oe._onwheel&&oe.removeEventListener(pe,oe._onwheel),oe._onwheel=ce,oe.addEventListener(pe,ce,{passive:!1})}else oe.onwheel!==void 0?oe.onwheel=ce:oe.onmousewheel!==void 0?oe.onmousewheel=ce:oe.isAddedWheelEvent||(oe.isAddedWheelEvent=!0,oe.addEventListener("wheel",ce,{passive:!1}))}function ae(oe){var ce=[];for(var pe in oe)ce.push(oe[pe]);return ce}Q.exports={makeDragBox:function(oe,ce,pe,ve,we,xe,ge,Oe){var Ae,Te,se,le,ne,me,Ee,be,De,Ue,he,ke,_e,Ce,Fe,Re,He,Ge,$e,st,Ke,gt,mt,at=oe._fullLayout._zoomlayer,rt=ge+Oe==="nsew",xt=(ge+Oe).length===1;function Tt(){if(Ae=ce.xaxis,Te=ce.yaxis,De=Ae._length,Ue=Te._length,Ee=Ae._offset,be=Te._offset,(se={})[Ae._id]=Ae,(le={})[Te._id]=Te,ge&&Oe)for(var Ht=ce.overlays,nn=0;nn<Ht.length;nn++){var Kt=Ht[nn].xaxis;se[Kt._id]=Kt;var on=Ht[nn].yaxis;le[on._id]=on}ne=ae(se),me=ae(le),_e=I(ne,Oe),Ce=I(me,ge),Fe=!Ce&&!_e,ke=ee(oe,oe._fullLayout._axisMatchGroups,se,le);var hn=(he=ee(oe,oe._fullLayout._axisConstraintGroups,se,le,ke)).isSubplotConstrained||ke.isSubplotConstrained;Re=Oe||hn,He=ge||hn;var dn=oe._fullLayout;Ge=dn._has("scattergl"),$e=dn._has("splom"),st=dn._has("svg")}pe+=ce.yaxis._shift,Tt();var wt=function(Ht,nn,Kt){return Ht?Ht==="nsew"?Kt?"":nn==="pan"?"move":"crosshair":Ht.toLowerCase()+"-resize":"pointer"}(Ce+_e,oe._fullLayout.dragmode,rt),Ot=G(ce,ge+Oe+"drag",wt,pe,ve,we,xe);if(Fe&&!rt)return Ot.onmousedown=null,Ot.style.pointerEvents="none",Ot;var Ct,Ye,Xe,Ve,We,nt,ot,Ie,ze,et,tt={element:Ot,gd:oe,plotinfo:ce};function dt(){tt.plotinfo.selection=!1,h(oe)}function pt(Ht,nn){var Kt=tt.gd;if(Kt._fullLayout._activeShapeIndex>=0)Kt._fullLayout._deactivateShape(Kt);else{var on=Kt._fullLayout.clickmode;if(W(Kt),Ht!==2||xt||qt(),rt)on.indexOf("select")>-1&&A(nn,Kt,ne,me,ce.id,tt),on.indexOf("event")>-1&&n.click(Kt,nn,ce.id);else if(Ht===1&&xt){var hn=ge?Te:Ae,dn=ge==="s"||Oe==="w"?0:1,Mn=hn._name+".range["+dn+"]",Cn=function(Wn,$n){var ar,Qn=Wn.range[$n],Gn=Math.abs(Qn-Wn.range[1-$n]);return Wn.type==="date"?Qn:Wn.type==="log"?(ar=Math.ceil(Math.max(0,-Math.log(Gn)/Math.LN10))+3,l("."+ar+"g")(Math.pow(10,Qn))):(ar=Math.floor(Math.log(Math.abs(Qn))/Math.LN10)-Math.floor(Math.log(Gn)/Math.LN10)+4,l("."+String(ar)+"g")(Qn))}(hn,dn),Tn="left",Pn="middle";if(hn.fixedrange)return;ge?(Pn=ge==="n"?"top":"bottom",hn.side==="right"&&(Tn="right")):Oe==="e"&&(Tn="right"),Kt._context.showAxisRangeEntryBoxes&&S.select(Ot).call(e.makeEditable,{gd:Kt,immediate:!0,background:Kt._fullLayout.paper_bgcolor,text:String(Cn),fill:hn.tickfont?hn.tickfont.color:"#444",horizontalAlign:Tn,verticalAlign:Pn}).on("edit",function(Wn){var $n=hn.d2r(Wn);$n!==void 0&&d.call("_guiRelayout",Kt,Mn,$n)})}}}function vt(Ht,nn){if(oe._transitioningWithDuration)return!1;var Kt=Math.max(0,Math.min(De,gt*Ht+Ct)),on=Math.max(0,Math.min(Ue,mt*nn+Ye)),hn=Math.abs(Kt-Ct),dn=Math.abs(on-Ye);function Mn(){ot="",Xe.r=Xe.l,Xe.t=Xe.b,ze.attr("d","M0,0Z")}if(Xe.l=Math.min(Ct,Kt),Xe.r=Math.max(Ct,Kt),Xe.t=Math.min(Ye,on),Xe.b=Math.max(Ye,on),he.isSubplotConstrained)hn>C||dn>C?(ot="xy",hn/De>dn/Ue?(dn=hn*Ue/De,Ye>on?Xe.t=Ye-dn:Xe.b=Ye+dn):(hn=dn*De/Ue,Ct>Kt?Xe.l=Ct-hn:Xe.r=Ct+hn),ze.attr("d",J(Xe))):Mn();else if(ke.isSubplotConstrained)if(hn>C||dn>C){ot="xy";var Cn=Math.min(Xe.l/De,(Ue-Xe.b)/Ue),Tn=Math.max(Xe.r/De,(Ue-Xe.t)/Ue);Xe.l=Cn*De,Xe.r=Tn*De,Xe.b=(1-Cn)*Ue,Xe.t=(1-Tn)*Ue,ze.attr("d",J(Xe))}else Mn();else!Ce||dn<Math.min(Math.max(.6*hn,L),C)?hn<L||!_e?Mn():(Xe.t=0,Xe.b=Ue,ot="x",ze.attr("d",function(Pn,Wn){return"M"+(Pn.l-.5)+","+(Wn-C-.5)+"h-3v"+(2*C+1)+"h3ZM"+(Pn.r+.5)+","+(Wn-C-.5)+"h3v"+(2*C+1)+"h-3Z"}(Xe,Ye))):!_e||hn<Math.min(.6*dn,C)?(Xe.l=0,Xe.r=De,ot="y",ze.attr("d",function(Pn,Wn){return"M"+(Wn-C-.5)+","+(Pn.t-.5)+"v-3h"+(2*C+1)+"v3ZM"+(Wn-C-.5)+","+(Pn.b+.5)+"v3h"+(2*C+1)+"v-3Z"}(Xe,Ct))):(ot="xy",ze.attr("d",J(Xe)));Xe.w=Xe.r-Xe.l,Xe.h=Xe.b-Xe.t,ot&&(et=!0),oe._dragged=et,te(Ie,ze,Xe,We,nt,Ve),ct(),oe.emit("plotly_relayouting",Ke),nt=!0}function ct(){Ke={},ot!=="xy"&&ot!=="x"||(H(ne,Xe.l/De,Xe.r/De,Ke,he.xaxes),Rt("x",Ke)),ot!=="xy"&&ot!=="y"||(H(me,(Ue-Xe.b)/Ue,(Ue-Xe.t)/Ue,Ke,he.yaxes),Rt("y",Ke))}function kt(){ct(),W(oe),Wt(),Z(oe)}tt.prepFn=function(Ht,nn,Kt){var on=tt.dragmode,hn=oe._fullLayout.dragmode;hn!==on&&(tt.dragmode=hn),Tt(),gt=oe._fullLayout._invScaleX,mt=oe._fullLayout._invScaleY,Fe||(rt?Ht.shiftKey?hn==="pan"?hn="zoom":c(hn)||(hn="pan"):Ht.ctrlKey&&(hn="pan"):hn="pan"),x(hn)?tt.minDrag=1:tt.minDrag=void 0,c(hn)?(tt.xaxes=ne,tt.yaxes=me,_(Ht,nn,Kt,tt,hn)):(tt.clickFn=pt,c(on)&&dt(),Fe||(hn==="zoom"?(tt.moveFn=vt,tt.doneFn=kt,tt.minDrag=1,function(dn,Mn,Cn){var Tn=Ot.getBoundingClientRect();Ct=Mn-Tn.left,Ye=Cn-Tn.top,oe._fullLayout._calcInverseTransform(oe);var Pn=k.apply3DTransform(oe._fullLayout._invTransform)(Ct,Ye);Ct=Pn[0],Ye=Pn[1],Xe={l:Ct,r:Ct,w:0,t:Ye,b:Ye,h:0},Ve=oe._hmpixcount?oe._hmlumcount/oe._hmpixcount:T(oe._fullLayout.plot_bgcolor).getLuminance(),nt=!1,ot="xy",et=!1,Ie=V(at,Ve,Ee,be,We="M0,0H"+De+"V"+Ue+"H0V0"),ze=q(at,Ee,be)}(0,nn,Kt)):hn==="pan"&&(tt.moveFn=zt,tt.doneFn=Wt))),oe._fullLayout._redrag=function(){var dn=oe._dragdata;if(dn&&dn.element===Ot){var Mn=oe._fullLayout.dragmode;c(Mn)||(Tt(),jt([0,0,De,Ue]),tt.moveFn(dn.dx,dn.dy))}}},u.init(tt);var ut=[0,0,De,Ue],ft=null,bt=E.REDRAWDELAY,It=ce.mainplot?oe._fullLayout._plots[ce.mainplot]:ce;function zt(Ht,nn){if(Ht*=gt,nn*=mt,!oe._transitioningWithDuration){if(oe._fullLayout._replotting=!0,_e==="ew"||Ce==="ns"){var Kt=_e?-Ht:0,on=Ce?-nn:0;if(ke.isSubplotConstrained){if(_e&&Ce){var hn=(Ht/De-nn/Ue)/2;Kt=-(Ht=hn*De),on=-(nn=-hn*Ue)}Ce?Kt=-on*De/Ue:on=-Kt*Ue/De}return _e&&(N(ne,Ht),Rt("x")),Ce&&(N(me,nn),Rt("y")),jt([Kt,on,De,Ue]),Jt(),void oe.emit("plotly_relayouting",Ke)}var dn,Mn,Cn=_e==="w"==(Ce==="n")?1:-1;if(_e&&Ce&&(he.isSubplotConstrained||ke.isSubplotConstrained)){var Tn=(Ht/De+Cn*nn/Ue)/2;Ht=Tn*De,nn=Cn*Tn*Ue}if(_e==="w"?Ht=ar(ne,0,Ht):_e==="e"?Ht=ar(ne,1,-Ht):_e||(Ht=0),Ce==="n"?nn=ar(me,1,nn):Ce==="s"?nn=ar(me,0,-nn):Ce||(nn=0),dn=_e==="w"?Ht:0,Mn=Ce==="n"?nn:0,he.isSubplotConstrained&&!ke.isSubplotConstrained||ke.isSubplotConstrained&&_e&&Ce&&Cn>0){var Pn;if(ke.isSubplotConstrained||!_e&&Ce.length===1){for(Pn=0;Pn<ne.length;Pn++)ne[Pn].range=ne[Pn]._r.slice(),w(ne[Pn],1-nn/Ue);dn=(Ht=nn*De/Ue)/2}if(ke.isSubplotConstrained||!Ce&&_e.length===1){for(Pn=0;Pn<me.length;Pn++)me[Pn].range=me[Pn]._r.slice(),w(me[Pn],1-Ht/De);Mn=(nn=Ht*Ue/De)/2}}ke.isSubplotConstrained&&Ce||Rt("x"),ke.isSubplotConstrained&&_e||Rt("y");var Wn=De-Ht,$n=Ue-nn;!ke.isSubplotConstrained||_e&&Ce||(_e?(Mn=dn?0:Ht*Ue/De,$n=Wn*Ue/De):(dn=Mn?0:nn*De/Ue,Wn=$n*De/Ue)),jt([dn,Mn,Wn,$n]),Jt(),oe.emit("plotly_relayouting",Ke)}function ar(Qn,Gn,dr){for(var Bt,tn,cn=1-Gn,gn=0;gn<Qn.length;gn++){var kn=Qn[gn];if(!kn.fixedrange){Bt=kn,tn=kn._rl[cn]+(kn._rl[Gn]-kn._rl[cn])/F(dr/kn._length);var Vn=kn.l2r(tn);Vn!==!1&&Vn!==void 0&&(kn.range[Gn]=Vn)}}return Bt._length*(Bt._rl[Gn]-tn)/(Bt._rl[Gn]-Bt._rl[cn])}}function Rt(Ht,nn){for(var Kt=ke.isSubplotConstrained?{x:me,y:ne}[Ht]:ke[Ht+"axes"],on=ke.isSubplotConstrained?{x:ne,y:me}[Ht]:[],hn=0;hn<Kt.length;hn++){var dn=Kt[hn],Mn=dn._id,Cn=ke.xLinks[Mn]||ke.yLinks[Mn],Tn=on[0]||se[Cn]||le[Cn];Tn&&(nn?(nn[dn._name+".range[0]"]=nn[Tn._name+".range[0]"],nn[dn._name+".range[1]"]=nn[Tn._name+".range[1]"]):dn.range=Tn.range.slice())}}function Jt(){var Ht,nn=[];function Kt(Mn){for(Ht=0;Ht<Mn.length;Ht++)Mn[Ht].fixedrange||nn.push(Mn[Ht]._id)}function on(Mn,Cn){for(Ht=0;Ht<Mn.length;Ht++){var Tn=Mn[Ht],Pn=Tn[Cn];Tn.fixedrange||Pn.tickmode!=="sync"||nn.push(Pn._id)}}for(Re&&(Kt(ne),Kt(he.xaxes),Kt(ke.xaxes),on(ce.overlays,"xaxis")),He&&(Kt(me),Kt(he.yaxes),Kt(ke.yaxes),on(ce.overlays,"yaxis")),Ke={},Ht=0;Ht<nn.length;Ht++){var hn=nn[Ht],dn=m(oe,hn);a.drawOne(oe,dn,{skipTitle:!0}),Ke[dn._name+".range[0]"]=dn.range[0],Ke[dn._name+".range[1]"]=dn.range[1]}a.redrawComponents(oe,nn)}function qt(){if(!oe._transitioningWithDuration){var Ht=oe._context.doubleClick,nn=[];_e&&(nn=nn.concat(ne)),Ce&&(nn=nn.concat(me)),ke.xaxes&&(nn=nn.concat(ke.xaxes)),ke.yaxes&&(nn=nn.concat(ke.yaxes));var Kt,on,hn,dn={};if(Ht==="reset+autosize"){for(Ht="autosize",on=0;on<nn.length;on++)if((Kt=nn[on])._rangeInitial&&(Kt.range[0]!==Kt._rangeInitial[0]||Kt.range[1]!==Kt._rangeInitial[1])||!Kt._rangeInitial&&!Kt.autorange){Ht="reset";break}}if(Ht==="autosize")for(on=0;on<nn.length;on++)(Kt=nn[on]).fixedrange||(dn[Kt._name+".autorange"]=!0);else if(Ht==="reset")for((_e||he.isSubplotConstrained)&&(nn=nn.concat(he.xaxes)),Ce&&!he.isSubplotConstrained&&(nn=nn.concat(he.yaxes)),he.isSubplotConstrained&&(_e?Ce||(nn=nn.concat(me)):nn=nn.concat(ne)),on=0;on<nn.length;on++)(Kt=nn[on]).fixedrange||(Kt._rangeInitial?(hn=Kt._rangeInitial,dn[Kt._name+".range[0]"]=hn[0],dn[Kt._name+".range[1]"]=hn[1]):dn[Kt._name+".autorange"]=!0);oe.emit("plotly_doubleclick",null),d.call("_guiRelayout",oe,dn)}}function Wt(){jt([0,0,De,Ue]),k.syncOrAsync([v.previousPromises,function(){oe._fullLayout._replotting=!1,d.call("_guiRelayout",oe,Ke)}],oe)}function jt(Ht){var nn,Kt,on,hn,dn=oe._fullLayout,Mn=dn._plots,Cn=dn._subplots.cartesian;if($e&&d.subplotsRegistry.splom.drag(oe),Ge){for(nn=0;nn<Cn.length;nn++)if(on=(Kt=Mn[Cn[nn]]).xaxis,hn=Kt.yaxis,Kt._scene){var Tn=k.simpleMap(on.range,on.r2l),Pn=k.simpleMap(hn.range,hn.r2l);Kt._scene.update({range:[Tn[0],Pn[0],Tn[1],Pn[1]]})}}if(($e||Ge)&&(f(oe),y(oe)),st){var Wn=Ht[2]/Ae._length,$n=Ht[3]/Te._length;for(nn=0;nn<Cn.length;nn++){on=(Kt=Mn[Cn[nn]]).xaxis,hn=Kt.yaxis;var ar,Qn,Gn,dr,Bt=(Re||ke.isSubplotConstrained)&&!on.fixedrange&&se[on._id],tn=(He||ke.isSubplotConstrained)&&!hn.fixedrange&&le[hn._id];if(Bt?(ar=Wn,Gn=Oe||ke.isSubplotConstrained?Ht[0]:un(on,ar)):ke.xaHash[on._id]?(ar=Wn,Gn=Ht[0]*on._length/Ae._length):ke.yaHash[on._id]?(ar=$n,Gn=Ce==="ns"?-Ht[1]*on._length/Te._length:un(on,ar,{n:"top",s:"bottom"}[Ce])):Gn=xn(on,ar=fn(on,Wn,$n)),tn?(Qn=$n,dr=ge||ke.isSubplotConstrained?Ht[1]:un(hn,Qn)):ke.yaHash[hn._id]?(Qn=$n,dr=Ht[1]*hn._length/Te._length):ke.xaHash[hn._id]?(Qn=Wn,dr=_e==="ew"?-Ht[0]*hn._length/Ae._length:un(hn,Qn,{e:"right",w:"left"}[_e])):dr=xn(hn,Qn=fn(hn,Wn,$n)),ar||Qn){ar||(ar=1),Qn||(Qn=1);var cn=on._offset-Gn/ar,gn=hn._offset-dr/Qn;Kt.clipRect.call(r.setTranslate,Gn,dr).call(r.setScale,ar,Qn),Kt.plot.call(r.setTranslate,cn,gn).call(r.setScale,1/ar,1/Qn),ar===Kt.xScaleFactor&&Qn===Kt.yScaleFactor||(r.setPointGroupScale(Kt.zoomScalePts,ar,Qn),r.setTextPointsScale(Kt.zoomScaleTxt,ar,Qn)),r.hideOutsideRangePoints(Kt.clipOnAxisFalseTraces,Kt),Kt.xScaleFactor=ar,Kt.yScaleFactor=Qn}}}}function fn(Ht,nn,Kt){return Ht.fixedrange?0:Re&&he.xaHash[Ht._id]?nn:He&&(he.isSubplotConstrained?he.xaHash:he.yaHash)[Ht._id]?Kt:0}function xn(Ht,nn){return nn?(Ht.range=Ht._r.slice(),w(Ht,nn),un(Ht,nn)):0}function un(Ht,nn,Kt){return Ht._length*(1-nn)*g[Kt||Ht.constraintoward||"middle"]}return ge.length*Oe.length!=1&&re(Ot,function(Ht){if(oe._context._scrollZoom.cartesian||oe._fullLayout._enablescrollzoom){if(dt(),oe._transitioningWithDuration)return Ht.preventDefault(),void Ht.stopPropagation();Tt(),clearTimeout(ft);var nn=-Ht.deltaY;if(isFinite(nn)||(nn=Ht.wheelDelta/10),isFinite(nn)){var Kt,on=Math.exp(-Math.min(Math.max(nn,-20),20)/200),hn=It.draglayer.select(".nsewdrag").node().getBoundingClientRect(),dn=(Ht.clientX-hn.left)/hn.width,Mn=(hn.bottom-Ht.clientY)/hn.height;if(Re){for(Oe||(dn=.5),Kt=0;Kt<ne.length;Kt++)Cn(ne[Kt],dn,on);Rt("x"),ut[2]*=on,ut[0]+=ut[2]*dn*(1/on-1)}if(He){for(ge||(Mn=.5),Kt=0;Kt<me.length;Kt++)Cn(me[Kt],Mn,on);Rt("y"),ut[3]*=on,ut[1]+=ut[3]*(1-Mn)*(1/on-1)}jt(ut),Jt(),oe.emit("plotly_relayouting",Ke),ft=setTimeout(function(){oe._fullLayout&&(ut=[0,0,De,Ue],Wt())},bt),Ht.preventDefault()}else k.log("Did not find wheel motion attributes: ",Ht)}function Cn(Tn,Pn,Wn){if(!Tn.fixedrange){var $n=k.simpleMap(Tn.range,Tn.r2l),ar=$n[0]+($n[1]-$n[0])*Pn;Tn.range=$n.map(function(Qn){return Tn.l2r(ar+(Qn-ar)*Wn)})}}}),Ot},makeDragger:D,makeRectDragger:G,makeZoombox:V,makeCorners:q,updateZoombox:te,xyCorners:J,transitionZoombox:$,removeZoombox:W,showDoubleClickNotifier:Z,attachWheelEventHandler:re}},4305:function(Q,z,t){var S=t(39898),k=t(30211),l=t(28569),T=t(6964),b=t(29323).makeDragBox,d=t(85555).DRAGGERSIZE;z.initInteractions=function(s){var e=s._fullLayout;if(s._context.staticPlot)S.select(s).selectAll(".drag").remove();else if(e._has("cartesian")||e._has("splom")){Object.keys(e._plots||{}).sort(function(r,n){if((e._plots[r].mainplot&&!0)===(e._plots[n].mainplot&&!0)){var a=r.split("y"),o=n.split("y");return a[0]===o[0]?Number(a[1]||1)-Number(o[1]||1):Number(a[0]||1)-Number(o[0]||1)}return e._plots[r].mainplot?1:-1}).forEach(function(r){var n=e._plots[r],a=n.xaxis,o=n.yaxis;if(!n.mainplot){var u=b(s,n,a._offset,o._offset,a._length,o._length,"ns","ew");u.onmousemove=function(x){s._fullLayout._rehover=function(){s._fullLayout._hoversubplot===r&&s._fullLayout._plots[r]&&k.hover(s,x,r)},k.hover(s,x,r),s._fullLayout._lasthover=u,s._fullLayout._hoversubplot=r},u.onmouseout=function(x){s._dragging||(s._fullLayout._hoversubplot=null,l.unhover(s,x))},s._context.showAxisDragHandles&&(b(s,n,a._offset-d,o._offset-d,d,d,"n","w"),b(s,n,a._offset+a._length,o._offset-d,d,d,"n","e"),b(s,n,a._offset-d,o._offset+o._length,d,d,"s","w"),b(s,n,a._offset+a._length,o._offset+o._length,d,d,"s","e"))}if(s._context.showAxisDragHandles){if(r===a._mainSubplot){var p=a._mainLinePosition;a.side==="top"&&(p-=d),b(s,n,a._offset+.1*a._length,p,.8*a._length,d,"","ew"),b(s,n,a._offset,p,.1*a._length,d,"","w"),b(s,n,a._offset+.9*a._length,p,.1*a._length,d,"","e")}if(r===o._mainSubplot){var c=o._mainLinePosition;o.side!=="right"&&(c-=d),b(s,n,c,o._offset+.1*o._length,d,.8*o._length,"ns",""),b(s,n,c,o._offset+.9*o._length,d,.1*o._length,"s",""),b(s,n,c,o._offset,d,.1*o._length,"n","")}}});var i=e._hoverlayer.node();i.onmousemove=function(r){r.target=s._fullLayout._lasthover,k.hover(s,r,e._hoversubplot)},i.onclick=function(r){r.target=s._fullLayout._lasthover,k.click(s,r)},i.onmousedown=function(r){s._fullLayout._lasthover.onmousedown(r)},z.updateFx(s)}},z.updateFx=function(s){var e=s._fullLayout,i=e.dragmode==="pan"?"move":"crosshair";T(e._draggers,i)}},76325:function(Q,z,t){var S=t(73972),k=t(71828),l=t(41675);Q.exports=function(T){return function(b,d){var s=b[T];if(Array.isArray(s))for(var e=S.subplotsRegistry.cartesian,i=e.idRegex,r=d._subplots,n=r.xaxis,a=r.yaxis,o=r.cartesian,u=d._has("cartesian")||d._has("gl2d"),p=0;p<s.length;p++){var c=s[p];if(k.isPlainObject(c)){var x=l.cleanId(c.xref,"x",!1),g=l.cleanId(c.yref,"y",!1),f=i.x.test(x),y=i.y.test(g);if(f||y){u||k.pushUnique(d._basePlotModules,e);var v=!1;f&&n.indexOf(x)===-1&&(n.push(x),v=!0),y&&a.indexOf(g)===-1&&(a.push(g),v=!0),v&&f&&y&&o.push(x+g)}}}}}},93612:function(Q,z,t){var S=t(39898),k=t(73972),l=t(71828),T=t(74875),b=t(91424),d=t(27659).a0,s=t(41675),e=t(85555),i=t(77922),r=l.ensureSingle;function n(c,x,g){return l.ensureSingle(c,x,g,function(f){f.datum(g)})}function a(c,x,g,f,y){for(var v,m,_,h=e.traceLayerClasses,A=c._fullLayout,w=A._modules,E=[],L=[],C=0;C<w.length;C++){var P=(v=w[C]).name,D=k.modules[P].categories;if(D.svg){var G=v.layerName||P+"layer",I=v.plot;_=(m=d(g,I))[0],g=m[1],_.length&&E.push({i:h.indexOf(G),className:G,plotMethod:I,cdModule:_}),D.zoomScale&&L.push("."+G)}}E.sort(function(F,V){return F.i-V.i});var H=x.plot.selectAll("g.mlayer").data(E,function(F){return F.className});if(H.enter().append("g").attr("class",function(F){return F.className}).classed("mlayer",!0).classed("rangeplot",x.isRangePlot),H.exit().remove(),H.order(),H.each(function(F){var V=S.select(this),q=F.className;F.plotMethod(c,x,F.cdModule,V,f,y),e.clipOnAxisFalseQuery.indexOf("."+q)===-1&&b.setClipUrl(V,x.layerClipId,c)}),A._has("scattergl")&&(v=k.getModule("scattergl"),_=d(g,v)[0],v.plot(c,x,_)),!c._context.staticPlot&&(x._hasClipOnAxisFalse&&(x.clipOnAxisFalseTraces=x.plot.selectAll(e.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),L.length)){var N=x.plot.selectAll(L.join(",")).selectAll(".trace");x.zoomScalePts=N.selectAll("path.point"),x.zoomScaleTxt=N.selectAll(".textpoint")}}function o(c,x){var g=x.plotgroup,f=x.id,y=e.layerValue2layerClass[x.xaxis.layer],v=e.layerValue2layerClass[x.yaxis.layer],m=c._fullLayout._hasOnlyLargeSploms;if(x.mainplot){var _=x.mainplotinfo,h=_.plotgroup,A=f+"-x",w=f+"-y";x.minorGridlayer=_.minorGridlayer,x.gridlayer=_.gridlayer,x.zerolinelayer=_.zerolinelayer,r(_.overlinesBelow,"path",A),r(_.overlinesBelow,"path",w),r(_.overaxesBelow,"g",A),r(_.overaxesBelow,"g",w),x.plot=r(_.overplot,"g",f),r(_.overlinesAbove,"path",A),r(_.overlinesAbove,"path",w),r(_.overaxesAbove,"g",A),r(_.overaxesAbove,"g",w),x.xlines=h.select(".overlines-"+y).select("."+A),x.ylines=h.select(".overlines-"+v).select("."+w),x.xaxislayer=h.select(".overaxes-"+y).select("."+A),x.yaxislayer=h.select(".overaxes-"+v).select("."+w)}else if(m)x.xlines=r(g,"path","xlines-above"),x.ylines=r(g,"path","ylines-above"),x.xaxislayer=r(g,"g","xaxislayer-above"),x.yaxislayer=r(g,"g","yaxislayer-above");else{var E=r(g,"g","layer-subplot");x.shapelayer=r(E,"g","shapelayer"),x.imagelayer=r(E,"g","imagelayer"),x.minorGridlayer=r(g,"g","minor-gridlayer"),x.gridlayer=r(g,"g","gridlayer"),x.zerolinelayer=r(g,"g","zerolinelayer"),r(g,"path","xlines-below"),r(g,"path","ylines-below"),x.overlinesBelow=r(g,"g","overlines-below"),r(g,"g","xaxislayer-below"),r(g,"g","yaxislayer-below"),x.overaxesBelow=r(g,"g","overaxes-below"),x.plot=r(g,"g","plot"),x.overplot=r(g,"g","overplot"),x.xlines=r(g,"path","xlines-above"),x.ylines=r(g,"path","ylines-above"),x.overlinesAbove=r(g,"g","overlines-above"),r(g,"g","xaxislayer-above"),r(g,"g","yaxislayer-above"),x.overaxesAbove=r(g,"g","overaxes-above"),x.xlines=g.select(".xlines-"+y),x.ylines=g.select(".ylines-"+v),x.xaxislayer=g.select(".xaxislayer-"+y),x.yaxislayer=g.select(".yaxislayer-"+v)}m||(n(x.minorGridlayer,"g",x.xaxis._id),n(x.minorGridlayer,"g",x.yaxis._id),x.minorGridlayer.selectAll("g").map(function(L){return L[0]}).sort(s.idSort),n(x.gridlayer,"g",x.xaxis._id),n(x.gridlayer,"g",x.yaxis._id),x.gridlayer.selectAll("g").map(function(L){return L[0]}).sort(s.idSort)),x.xlines.style("fill","none").classed("crisp",!0),x.ylines.style("fill","none").classed("crisp",!0)}function u(c,x){if(c){var g={};for(var f in c.each(function(_){var h=_[0];S.select(this).remove(),p(h,x),g[h]=!0}),x._plots)for(var y=x._plots[f].overlays||[],v=0;v<y.length;v++){var m=y[v];g[m.id]&&m.plot.selectAll(".trace").remove()}}}function p(c,x){x._draggers.selectAll("g."+c).remove(),x._defs.select("#clip"+x._uid+c+"plot").remove()}z.name="cartesian",z.attr=["xaxis","yaxis"],z.idRoot=["x","y"],z.idRegex=e.idRegex,z.attrRegex=e.attrRegex,z.attributes=t(89502),z.layoutAttributes=t(13838),z.supplyLayoutDefaults=t(86763),z.transitionAxes=t(66847),z.finalizeSubplots=function(c,x){var g,f,y,v=x._subplots,m=v.xaxis,_=v.yaxis,h=v.cartesian,A=h.concat(v.gl2d||[]),w={},E={};for(g=0;g<A.length;g++){var L=A[g].split("y");w[L[0]]=1,E["y"+L[1]]=1}for(g=0;g<m.length;g++)w[f=m[g]]||(y=(c[s.id2name(f)]||{}).anchor,e.idRegex.y.test(y)||(y="y"),h.push(f+y),A.push(f+y),E[y]||(E[y]=1,l.pushUnique(_,y)));for(g=0;g<_.length;g++)E[y=_[g]]||(f=(c[s.id2name(y)]||{}).anchor,e.idRegex.x.test(f)||(f="x"),h.push(f+y),A.push(f+y),w[f]||(w[f]=1,l.pushUnique(m,f)));if(!A.length){for(var C in f="",y="",c)e.attrRegex.test(C)&&(C.charAt(0)==="x"?(!f||+C.substr(5)<+f.substr(5))&&(f=C):(!y||+C.substr(5)<+y.substr(5))&&(y=C));f=f?s.name2id(f):"x",y=y?s.name2id(y):"y",m.push(f),_.push(y),h.push(f+y)}},z.plot=function(c,x,g,f){var y,v=c._fullLayout,m=v._subplots.cartesian,_=c.calcdata;if(!Array.isArray(x))for(x=[],y=0;y<_.length;y++)x.push(y);for(y=0;y<m.length;y++){for(var h,A=m[y],w=v._plots[A],E=[],L=0;L<_.length;L++){var C=_[L],P=C[0].trace;P.xaxis+P.yaxis===A&&((x.indexOf(P.index)!==-1||P.carpet)&&(h&&h[0].trace.xaxis+h[0].trace.yaxis===A&&["tonextx","tonexty","tonext"].indexOf(P.fill)!==-1&&E.indexOf(h)===-1&&E.push(h),E.push(C)),h=C)}a(c,w,E,g,f)}},z.clean=function(c,x,g,f){var y,v,m,_=f._plots||{},h=x._plots||{},A=f._subplots||{};if(f._hasOnlyLargeSploms&&!x._hasOnlyLargeSploms)for(m in _)(y=_[m]).plotgroup&&y.plotgroup.remove();var w=f._has&&f._has("gl"),E=x._has&&x._has("gl");if(w&&!E)for(m in _)(y=_[m])._scene&&y._scene.destroy();if(A.xaxis&&A.yaxis){var L=s.listIds({_fullLayout:f});for(v=0;v<L.length;v++){var C=L[v];x[s.id2name(C)]||f._infolayer.selectAll(".g-"+C+"title").remove()}}var P=f._has&&f._has("cartesian"),D=x._has&&x._has("cartesian");if(P&&!D)u(f._cartesianlayer.selectAll(".subplot"),f),f._defs.selectAll(".axesclip").remove(),delete f._axisConstraintGroups,delete f._axisMatchGroups;else if(A.cartesian)for(v=0;v<A.cartesian.length;v++){var G=A.cartesian[v];if(!h[G]){var I="."+G+",."+G+"-x,."+G+"-y";f._cartesianlayer.selectAll(I).remove(),p(G,f)}}},z.drawFramework=function(c){var x=c._fullLayout,g=function(y){var v,m,_,h,A,w,E=y._fullLayout,L=E._subplots.cartesian,C=L.length,P=[],D=[];for(v=0;v<C;v++){_=L[v],A=(h=E._plots[_]).xaxis,w=h.yaxis;var G=A._mainAxis,I=w._mainAxis,H=G._id+I._id,N=E._plots[H];h.overlays=[],H!==_&&N?(h.mainplot=H,h.mainplotinfo=N,D.push(_)):(h.mainplot=void 0,h.mainplotinfo=void 0,P.push(_))}for(v=0;v<D.length;v++)_=D[v],(h=E._plots[_]).mainplotinfo.overlays.push(h);var F=P.concat(D),V=new Array(C);for(v=0;v<C;v++){_=F[v],A=(h=E._plots[_]).xaxis,w=h.yaxis;var q=[_,A.layer,w.layer,A.overlaying||"",w.overlaying||""];for(m=0;m<h.overlays.length;m++)q.push(h.overlays[m].id);V[v]=q}return V}(c),f=x._cartesianlayer.selectAll(".subplot").data(g,String);f.enter().append("g").attr("class",function(y){return"subplot "+y[0]}),f.order(),f.exit().call(u,x),f.each(function(y){var v=y[0],m=x._plots[v];m.plotgroup=S.select(this),o(c,m),m.draglayer=r(x._draggers,"g",v)})},z.rangePlot=function(c,x,g){o(c,x),a(c,x,g),T.style(c)},z.toSVG=function(c){var x=c._fullLayout._glimages,g=S.select(c).selectAll(".svg-container");g.filter(function(f,y){return y===g.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var f=this,y=f.toDataURL("image/png");x.append("svg:image").attr({xmlns:i.svg,"xlink:href":y,preserveAspectRatio:"none",x:0,y:0,width:f.style.width,height:f.style.height})})},z.updateFx=t(4305).updateFx},13838:function(Q,z,t){var S=t(41940),k=t(22399),l=t(79952).P,T=t(1426).extendFlat,b=t(44467).templatedArray,d=t(12663).descriptionWithDates,s=t(50606).ONEDAY,e=t(85555),i=e.HOUR_PATTERN,r=e.WEEKDAY_PATTERN,n={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},a=T({},n,{values:n.values.slice().concat(["sync"])});function o(A){return{valType:"integer",min:0,dflt:A?5:0,editType:"ticks"}}var u={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},p={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},c={valType:"data_array",editType:"ticks"},x={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function g(A){var w={valType:"number",min:0,editType:"ticks"};return A||(w.dflt=5),w}function f(A){var w={valType:"number",min:0,editType:"ticks"};return A||(w.dflt=1),w}var y={valType:"color",dflt:k.defaultLine,editType:"ticks"},v={valType:"color",dflt:k.lightLine,editType:"ticks"};function m(A){var w={valType:"number",min:0,editType:"ticks"};return A||(w.dflt=1),w}var _=T({},l,{editType:"ticks"}),h={valType:"boolean",editType:"ticks"};Q.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:k.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:S({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[e.idRegex.x.toString(),e.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[e.idRegex.x.toString(),e.idRegex.y.toString()],editType:"calc"},rangebreaks:b("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[r,i,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:s},editType:"calc"}),tickmode:a,nticks:o(),tick0:u,dtick:p,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:c,ticktext:{valType:"data_array",editType:"ticks"},ticks:x,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:g(),tickwidth:f(),tickcolor:y,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:T({},l,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:S({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:d("tick label")},tickformatstops:b("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:d("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:h,gridcolor:v,gridwidth:m(),griddash:_,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",e.idRegex.x.toString(),e.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",e.idRegex.x.toString(),e.idRegex.y.toString()],editType:"plot"},minor:{tickmode:n,nticks:o("minor"),tick0:u,dtick:p,tickvals:c,ticks:x,ticklen:g("minor"),tickwidth:f("minor"),tickcolor:y,gridcolor:v,gridwidth:m("minor"),griddash:_,showgrid:h,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:S({editType:"ticks"})}}},86763:function(Q,z,t){var S=t(71828),k=t(7901),l=t(23469).isUnifiedHover,T=t(98212),b=t(44467),d=t(10820),s=t(13838),e=t(951),i=t(71453),r=t(99082),n=t(52830),a=t(41675),o=a.id2name,u=a.name2id,p=t(85555).AX_ID_PATTERN,c=t(73972),x=c.traceIs,g=c.getComponentMethod;function f(y,v,m){Array.isArray(y[v])?y[v].push(m):y[v]=[m]}Q.exports=function(y,v,m){var _,h,A=v.autotypenumbers,w={},E={},L={},C={},P={},D={},G={},I={},H={},N={};for(_=0;_<m.length;_++){var F=m[_];if(x(F,"cartesian")||x(F,"gl2d")){var V,q;if(F.xaxis)V=o(F.xaxis),f(w,V,F);else if(F.xaxes)for(h=0;h<F.xaxes.length;h++)f(w,o(F.xaxes[h]),F);if(F.yaxis)q=o(F.yaxis),f(w,q,F);else if(F.yaxes)for(h=0;h<F.yaxes.length;h++)f(w,o(F.yaxes[h]),F);F.type==="funnel"?F.orientation==="h"?(V&&(E[V]=!0),q&&(G[q]=!0)):q&&(L[q]=!0):F.type==="image"?(q&&(I[q]=!0),V&&(I[V]=!0)):(q&&(P[q]=!0,D[q]=!0),x(F,"carpet")&&(F.type!=="carpet"||F._cheater)||V&&(C[V]=!0)),F.type==="carpet"&&F._cheater&&V&&(E[V]=!0),x(F,"2dMap")&&(H[V]=!0,H[q]=!0),x(F,"oriented")&&(N[F.orientation==="h"?q:V]=!0)}}var te=v._subplots,$=te.xaxis,W=te.yaxis,Z=S.simpleMap($,o),J=S.simpleMap(W,o),ee=Z.concat(J),re=k.background;$.length&&W.length&&(re=S.coerce(y,v,d,"plot_bgcolor"));var ae,oe,ce,pe,ve,we=k.combine(re,v.paper_bgcolor);function xe(){var xt=w[ae]||[];ve._traceIndices=xt.map(function(Tt){return Tt._expandedIndex}),ve._annIndices=[],ve._shapeIndices=[],ve._selectionIndices=[],ve._imgIndices=[],ve._subplotsWith=[],ve._counterAxes=[],ve._name=ve._attr=ae,ve._id=oe}function ge(xt,Tt){return S.coerce(pe,ve,s,xt,Tt)}function Oe(xt,Tt){return S.coerce2(pe,ve,s,xt,Tt)}function Ae(xt){return xt==="x"?W:$}function Te(xt,Tt){for(var wt=xt==="x"?Z:J,Ot=[],Ct=0;Ct<wt.length;Ct++){var Ye=wt[Ct];Ye===Tt||(y[Ye]||{}).overlaying||Ot.push(u(Ye))}return Ot}var se={x:Ae("x"),y:Ae("y")},le=se.x.concat(se.y),ne={},me=[];function Ee(){var xt=pe.matches;p.test(xt)&&le.indexOf(xt)===-1&&(ne[xt]=pe.type,me=Object.keys(ne))}var be=T(y,v),De=l(be);for(_=0;_<ee.length;_++){ae=ee[_],oe=u(ae),ce=ae.charAt(0),S.isPlainObject(y[ae])||(y[ae]={}),pe=y[ae],ve=b.newContainer(v,ae,ce+"axis"),xe();var Ue=ce==="x"&&!C[ae]&&E[ae]||ce==="y"&&!P[ae]&&L[ae],he=ce==="y"&&(!D[ae]&&G[ae]||I[ae]),ke={hasMinor:!0,letter:ce,font:v.font,outerTicks:H[ae],showGrid:!N[ae],data:w[ae]||[],bgColor:we,calendar:v.calendar,automargin:!0,visibleDflt:Ue,reverseDflt:he,autotypenumbersDflt:A,splomStash:((v._splomAxes||{})[ce]||{})[oe]};ge("uirevision",v.uirevision),e(pe,ve,ge,ke),i(pe,ve,ge,ke,v);var _e=De&&ce===be.charAt(0),Ce=Oe("spikecolor",De?ve.color:void 0),Fe=Oe("spikethickness",De?1.5:void 0),Re=Oe("spikedash",De?"dot":void 0),He=Oe("spikemode",De?"across":void 0),Ge=Oe("spikesnap");ge("showspikes",!!(_e||Ce||Fe||Re||He||Ge))||(delete ve.spikecolor,delete ve.spikethickness,delete ve.spikedash,delete ve.spikemode,delete ve.spikesnap);var $e=o(pe.overlaying),st=[0,1];if(v[$e]!==void 0){var Ke=o(v[$e].anchor);v[Ke]!==void 0&&(st=v[Ke].domain)}n(pe,ve,ge,{letter:ce,counterAxes:se[ce],overlayableAxes:Te(ce,ae),grid:v.grid,overlayingDomain:st}),ge("title.standoff"),Ee(),ve._input=pe}for(_=0;_<me.length;){oe=me[_++],ce=(ae=o(oe)).charAt(0),S.isPlainObject(y[ae])||(y[ae]={}),pe=y[ae],ve=b.newContainer(v,ae,ce+"axis"),xe();var gt={letter:ce,font:v.font,outerTicks:H[ae],showGrid:!N[ae],data:[],bgColor:we,calendar:v.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:A,splomStash:((v._splomAxes||{})[ce]||{})[oe]};ge("uirevision",v.uirevision),ve.type=ne[oe]||"linear",i(pe,ve,ge,gt,v),n(pe,ve,ge,{letter:ce,counterAxes:se[ce],overlayableAxes:Te(ce,ae),grid:v.grid}),ge("fixedrange"),Ee(),ve._input=pe}var mt=g("rangeslider","handleDefaults"),at=g("rangeselector","handleDefaults");for(_=0;_<Z.length;_++)ae=Z[_],pe=y[ae],ve=v[ae],mt(y,v,ae),ve.type==="date"&&at(pe,ve,v,J,ve.calendar),ge("fixedrange");for(_=0;_<J.length;_++){ae=J[_],pe=y[ae],ve=v[ae];var rt=v[o(ve.anchor)];ge("fixedrange",g("rangeslider","isVisible")(rt))}r.handleDefaults(y,v,{axIds:le.concat(me).sort(a.idSort),axHasImage:I})}},92128:function(Q,z,t){var S=t(84267).mix,k=t(22399),l=t(71828);Q.exports=function(T,b,d,s){var e=(s=s||{}).dfltColor;function i(y,v){return l.coerce2(T,b,s.attributes,y,v)}var r=i("linecolor",e),n=i("linewidth");d("showline",s.showLine||!!r||!!n)||(delete b.linecolor,delete b.linewidth);var a=i("gridcolor",S(e,s.bgColor,s.blend||k.lightFraction).toRgbString()),o=i("gridwidth"),u=i("griddash");if(d("showgrid",s.showGrid||!!a||!!o||!!u)||(delete b.gridcolor,delete b.gridwidth,delete b.griddash),s.hasMinor){var p=i("minor.gridcolor",S(b.gridcolor,s.bgColor,67).toRgbString()),c=i("minor.gridwidth",b.gridwidth||1),x=i("minor.griddash",b.griddash||"solid");d("minor.showgrid",!!p||!!c||!!x)||(delete b.minor.gridcolor,delete b.minor.gridwidth,delete b.minor.griddash)}if(!s.noZeroLine){var g=i("zerolinecolor",e),f=i("zerolinewidth");d("zeroline",s.showGrid||!!g||!!f)||(delete b.zerolinecolor,delete b.zerolinewidth)}}},52830:function(Q,z,t){var S=t(92770),k=t(71828);Q.exports=function(l,T,b,d){var s,e,i,r,n,a,o=d.counterAxes||[],u=d.overlayableAxes||[],p=d.letter,c=d.grid,x=d.overlayingDomain;c&&(e=c._domains[p][c._axisMap[T._id]],s=c._anchors[T._id],e&&(i=c[p+"side"].split(" ")[0],r=c.domain[p][i==="right"||i==="top"?1:0])),e=e||[0,1],s=s||(S(l.position)?"free":o[0]||"free"),i=i||(p==="x"?"bottom":"left"),r=r||0,n=0,a=!1;var g=k.coerce(l,T,{anchor:{valType:"enumerated",values:["free"].concat(o),dflt:s}},"anchor"),f=k.coerce(l,T,{side:{valType:"enumerated",values:p==="x"?["bottom","top"]:["left","right"],dflt:i}},"side");g==="free"&&(p==="y"&&(b("autoshift")&&(r=f==="left"?x[0]:x[1],a=!T.automargin||T.automargin,n=f==="left"?-3:3),b("shift",n)),b("position",r)),b("automargin",a);var y=!1;if(u.length&&(y=k.coerce(l,T,{overlaying:{valType:"enumerated",values:[!1].concat(u),dflt:!1}},"overlaying")),!y){var v=b("domain",e);v[0]>v[1]-.000244140625&&(T.domain=e),k.noneOrAll(l.domain,T.domain,e),T.tickmode==="sync"&&(T.tickmode="auto")}return b("layer"),T}},89426:function(Q,z,t){var S=t(59652);Q.exports=function(k,l,T,b,d){d||(d={});var s=d.tickSuffixDflt,e=S(k);T("tickprefix")&&T("showtickprefix",e),T("ticksuffix",s)&&T("showticksuffix",e)}},42449:function(Q,z,t){var S=t(18783).FROM_BL;Q.exports=function(k,l,T){T===void 0&&(T=S[k.constraintoward||"center"]);var b=[k.r2l(k.range[0]),k.r2l(k.range[1])],d=b[0]+(b[1]-b[0])*T;k.range=k._input.range=[k.l2r(d+(b[0]-d)*l),k.l2r(d+(b[1]-d)*l)],k.setScale()}},21994:function(Q,z,t){var S=t(39898),k=t(84096).g0,l=t(71828),T=l.numberFormat,b=t(92770),d=l.cleanNumber,s=l.ms2DateTime,e=l.dateTime2ms,i=l.ensureNumber,r=l.isArrayOrTypedArray,n=t(50606),a=n.FP_SAFE,o=n.BADNUM,u=n.LOG_CLIP,p=n.ONEWEEK,c=n.ONEDAY,x=n.ONEHOUR,g=n.ONEMIN,f=n.ONESEC,y=t(41675),v=t(85555),m=v.HOUR_PATTERN,_=v.WEEKDAY_PATTERN;function h(w){return Math.pow(10,w)}function A(w){return w!=null}Q.exports=function(w,E){E=E||{};var L=w._id||"x",C=L.charAt(0);function P(ee,re){if(ee>0)return Math.log(ee)/Math.LN10;if(ee<=0&&re&&w.range&&w.range.length===2){var ae=w.range[0],oe=w.range[1];return .5*(ae+oe-2*u*Math.abs(ae-oe))}return o}function D(ee,re,ae,oe){if((oe||{}).msUTC&&b(ee))return+ee;var ce=e(ee,ae||w.calendar);if(ce===o){if(!b(ee))return o;ee=+ee;var pe=Math.floor(10*l.mod(ee+.05,1)),ve=Math.round(ee-pe/10);ce=e(new Date(ve))+pe/10}return ce}function G(ee,re,ae){return s(ee,re,ae||w.calendar)}function I(ee){return w._categories[Math.round(ee)]}function H(ee){if(A(ee)){if(w._categoriesMap===void 0&&(w._categoriesMap={}),w._categoriesMap[ee]!==void 0)return w._categoriesMap[ee];w._categories.push(typeof ee=="number"?String(ee):ee);var re=w._categories.length-1;return w._categoriesMap[ee]=re,re}return o}function N(ee){if(w._categoriesMap)return w._categoriesMap[ee]}function F(ee){var re=N(ee);return re!==void 0?re:b(ee)?+ee:void 0}function V(ee){return b(ee)?+ee:N(ee)}function q(ee,re,ae){return S.round(ae+re*ee,2)}function te(ee,re,ae){return(ee-ae)/re}var $=function(ee){return b(ee)?q(ee,w._m,w._b):o},W=function(ee){return te(ee,w._m,w._b)};if(w.rangebreaks){var Z=C==="y";$=function(ee){if(!b(ee))return o;var re=w._rangebreaks.length;if(!re)return q(ee,w._m,w._b);var ae=Z;w.range[0]>w.range[1]&&(ae=!ae);for(var oe=ae?-1:1,ce=oe*ee,pe=0,ve=0;ve<re;ve++){var we=oe*w._rangebreaks[ve].min,xe=oe*w._rangebreaks[ve].max;if(ce<we)break;if(!(ce>xe)){pe=ce<(we+xe)/2?ve:ve+1;break}pe=ve+1}var ge=w._B[pe]||0;return isFinite(ge)?q(ee,w._m2,ge):0},W=function(ee){var re=w._rangebreaks.length;if(!re)return te(ee,w._m,w._b);for(var ae=0,oe=0;oe<re&&!(ee<w._rangebreaks[oe].pmin);oe++)ee>w._rangebreaks[oe].pmax&&(ae=oe+1);return te(ee,w._m2,w._B[ae])}}w.c2l=w.type==="log"?P:i,w.l2c=w.type==="log"?h:i,w.l2p=$,w.p2l=W,w.c2p=w.type==="log"?function(ee,re){return $(P(ee,re))}:$,w.p2c=w.type==="log"?function(ee){return h(W(ee))}:W,["linear","-"].indexOf(w.type)!==-1?(w.d2r=w.r2d=w.d2c=w.r2c=w.d2l=w.r2l=d,w.c2d=w.c2r=w.l2d=w.l2r=i,w.d2p=w.r2p=function(ee){return w.l2p(d(ee))},w.p2d=w.p2r=W,w.cleanPos=i):w.type==="log"?(w.d2r=w.d2l=function(ee,re){return P(d(ee),re)},w.r2d=w.r2c=function(ee){return h(d(ee))},w.d2c=w.r2l=d,w.c2d=w.l2r=i,w.c2r=P,w.l2d=h,w.d2p=function(ee,re){return w.l2p(w.d2r(ee,re))},w.p2d=function(ee){return h(W(ee))},w.r2p=function(ee){return w.l2p(d(ee))},w.p2r=W,w.cleanPos=i):w.type==="date"?(w.d2r=w.r2d=l.identity,w.d2c=w.r2c=w.d2l=w.r2l=D,w.c2d=w.c2r=w.l2d=w.l2r=G,w.d2p=w.r2p=function(ee,re,ae){return w.l2p(D(ee,0,ae))},w.p2d=w.p2r=function(ee,re,ae){return G(W(ee),re,ae)},w.cleanPos=function(ee){return l.cleanDate(ee,o,w.calendar)}):w.type==="category"?(w.d2c=w.d2l=H,w.r2d=w.c2d=w.l2d=I,w.d2r=w.d2l_noadd=F,w.r2c=function(ee){var re=V(ee);return re!==void 0?re:w.fraction2r(.5)},w.l2r=w.c2r=i,w.r2l=V,w.d2p=function(ee){return w.l2p(w.r2c(ee))},w.p2d=function(ee){return I(W(ee))},w.r2p=w.d2p,w.p2r=W,w.cleanPos=function(ee){return typeof ee=="string"&&ee!==""?ee:i(ee)}):w.type==="multicategory"&&(w.r2d=w.c2d=w.l2d=I,w.d2r=w.d2l_noadd=F,w.r2c=function(ee){var re=F(ee);return re!==void 0?re:w.fraction2r(.5)},w.r2c_just_indices=N,w.l2r=w.c2r=i,w.r2l=F,w.d2p=function(ee){return w.l2p(w.r2c(ee))},w.p2d=function(ee){return I(W(ee))},w.r2p=w.d2p,w.p2r=W,w.cleanPos=function(ee){return Array.isArray(ee)||typeof ee=="string"&&ee!==""?ee:i(ee)},w.setupMultiCategory=function(ee){var re,ae,oe=w._traceIndices,ce=w._matchGroup;if(ce&&w._categories.length===0){for(var pe in ce)if(pe!==L){var ve=E[y.id2name(pe)];oe=oe.concat(ve._traceIndices)}}var we=[[0,{}],[0,{}]],xe=[];for(re=0;re<oe.length;re++){var ge=ee[oe[re]];if(C in ge){var Oe=ge[C],Ae=ge._length||l.minRowLength(Oe);if(r(Oe[0])&&r(Oe[1]))for(ae=0;ae<Ae;ae++){var Te=Oe[0][ae],se=Oe[1][ae];A(Te)&&A(se)&&(xe.push([Te,se]),Te in we[0][1]||(we[0][1][Te]=we[0][0]++),se in we[1][1]||(we[1][1][se]=we[1][0]++))}}}for(xe.sort(function(le,ne){var me=we[0][1],Ee=me[le[0]]-me[ne[0]];if(Ee)return Ee;var be=we[1][1];return be[le[1]]-be[ne[1]]}),re=0;re<xe.length;re++)H(xe[re])}),w.fraction2r=function(ee){var re=w.r2l(w.range[0]),ae=w.r2l(w.range[1]);return w.l2r(re+ee*(ae-re))},w.r2fraction=function(ee){var re=w.r2l(w.range[0]),ae=w.r2l(w.range[1]);return(w.r2l(ee)-re)/(ae-re)},w.cleanRange=function(ee,re){re||(re={}),ee||(ee="range");var ae,oe,ce=l.nestedProperty(w,ee).get();if(oe=(oe=w.type==="date"?l.dfltRange(w.calendar):C==="y"?v.DFLTRANGEY:w._name==="realaxis"?[0,1]:re.dfltRange||v.DFLTRANGEX).slice(),w.rangemode!=="tozero"&&w.rangemode!=="nonnegative"||(oe[0]=0),ce&&ce.length===2)for(w.type!=="date"||w.autorange||(ce[0]=l.cleanDate(ce[0],o,w.calendar),ce[1]=l.cleanDate(ce[1],o,w.calendar)),ae=0;ae<2;ae++)if(w.type==="date"){if(!l.isDateTime(ce[ae],w.calendar)){w[ee]=oe;break}if(w.r2l(ce[0])===w.r2l(ce[1])){var pe=l.constrain(w.r2l(ce[0]),l.MIN_MS+1e3,l.MAX_MS-1e3);ce[0]=w.l2r(pe-1e3),ce[1]=w.l2r(pe+1e3);break}}else{if(!b(ce[ae])){if(!b(ce[1-ae])){w[ee]=oe;break}ce[ae]=ce[1-ae]*(ae?10:.1)}if(ce[ae]<-a?ce[ae]=-a:ce[ae]>a&&(ce[ae]=a),ce[0]===ce[1]){var ve=Math.max(1,Math.abs(1e-6*ce[0]));ce[0]-=ve,ce[1]+=ve}}else l.nestedProperty(w,ee).set(oe)},w.setScale=function(ee){var re=E._size;if(w.overlaying){var ae=y.getFromId({_fullLayout:E},w.overlaying);w.domain=ae.domain}var oe=ee&&w._r?"_r":"range",ce=w.calendar;w.cleanRange(oe);var pe,ve,we=w.r2l(w[oe][0],ce),xe=w.r2l(w[oe][1],ce),ge=C==="y";if(ge?(w._offset=re.t+(1-w.domain[1])*re.h,w._length=re.h*(w.domain[1]-w.domain[0]),w._m=w._length/(we-xe),w._b=-w._m*xe):(w._offset=re.l+w.domain[0]*re.w,w._length=re.w*(w.domain[1]-w.domain[0]),w._m=w._length/(xe-we),w._b=-w._m*we),w._rangebreaks=[],w._lBreaks=0,w._m2=0,w._B=[],w.rangebreaks&&(w._rangebreaks=w.locateBreaks(Math.min(we,xe),Math.max(we,xe)),w._rangebreaks.length)){for(pe=0;pe<w._rangebreaks.length;pe++)ve=w._rangebreaks[pe],w._lBreaks+=Math.abs(ve.max-ve.min);var Oe=ge;we>xe&&(Oe=!Oe),Oe&&w._rangebreaks.reverse();var Ae=Oe?-1:1;for(w._m2=Ae*w._length/(Math.abs(xe-we)-w._lBreaks),w._B.push(-w._m2*(ge?xe:we)),pe=0;pe<w._rangebreaks.length;pe++)ve=w._rangebreaks[pe],w._B.push(w._B[w._B.length-1]-Ae*w._m2*(ve.max-ve.min));for(pe=0;pe<w._rangebreaks.length;pe++)(ve=w._rangebreaks[pe]).pmin=$(ve.min),ve.pmax=$(ve.max)}if(!isFinite(w._m)||!isFinite(w._b)||w._length<0)throw E._replotting=!1,new Error("Something went wrong with axis scaling")},w.maskBreaks=function(ee){var re,ae,oe,ce,pe,ve=w.rangebreaks||[];ve._cachedPatterns||(ve._cachedPatterns=ve.map(function(Te){return Te.enabled&&Te.bounds?l.simpleMap(Te.bounds,Te.pattern?d:w.d2c):null})),ve._cachedValues||(ve._cachedValues=ve.map(function(Te){return Te.enabled&&Te.values?l.simpleMap(Te.values,w.d2c).sort(l.sorterAsc):null}));for(var we=0;we<ve.length;we++){var xe=ve[we];if(xe.enabled){if(xe.bounds){var ge=xe.pattern;switch(ae=(re=ve._cachedPatterns[we])[0],oe=re[1],ge){case _:ce=(pe=new Date(ee)).getUTCDay(),ae>oe&&(oe+=7,ce<ae&&(ce+=7));break;case m:ce=(pe=new Date(ee)).getUTCHours()+(pe.getUTCMinutes()/60+pe.getUTCSeconds()/3600+pe.getUTCMilliseconds()/36e5),ae>oe&&(oe+=24,ce<ae&&(ce+=24));break;case"":ce=ee}if(ce>=ae&&ce<oe)return o}else for(var Oe=ve._cachedValues[we],Ae=0;Ae<Oe.length;Ae++)if(oe=(ae=Oe[Ae])+xe.dvalue,ee>=ae&&ee<oe)return o}}return ee},w.locateBreaks=function(ee,re){var ae,oe,ce,pe,ve=[];if(!w.rangebreaks)return ve;var we=w.rangebreaks.slice().sort(function(be,De){return be.pattern===_&&De.pattern===m?-1:De.pattern===_&&be.pattern===m?1:0}),xe=function(be,De){if((be=l.constrain(be,ee,re))!==(De=l.constrain(De,ee,re))){for(var Ue=!0,he=0;he<ve.length;he++){var ke=ve[he];be<ke.max&&De>=ke.min&&(be<ke.min&&(ke.min=be),De>ke.max&&(ke.max=De),Ue=!1)}Ue&&ve.push({min:be,max:De})}};for(ae=0;ae<we.length;ae++){var ge=we[ae];if(ge.enabled)if(ge.bounds){var Oe=ee,Ae=re;ge.pattern&&(Oe=Math.floor(Oe)),ce=(oe=l.simpleMap(ge.bounds,ge.pattern?d:w.r2l))[0],pe=oe[1];var Te,se,le=new Date(Oe);switch(ge.pattern){case _:se=p,Te=(pe-ce+(pe<ce?7:0))*c,Oe+=ce*c-(le.getUTCDay()*c+le.getUTCHours()*x+le.getUTCMinutes()*g+le.getUTCSeconds()*f+le.getUTCMilliseconds());break;case m:se=c,Te=(pe-ce+(pe<ce?24:0))*x,Oe+=ce*x-(le.getUTCHours()*x+le.getUTCMinutes()*g+le.getUTCSeconds()*f+le.getUTCMilliseconds());break;default:Oe=Math.min(oe[0],oe[1]),Te=se=(Ae=Math.max(oe[0],oe[1]))-Oe}for(var ne=Oe;ne<Ae;ne+=se)xe(ne,ne+Te)}else for(var me=l.simpleMap(ge.values,w.d2c),Ee=0;Ee<me.length;Ee++)xe(ce=me[Ee],pe=ce+ge.dvalue)}return ve.sort(function(be,De){return be.min-De.min}),ve},w.makeCalcdata=function(ee,re,ae){var oe,ce,pe,ve,we=w.type,xe=we==="date"&&ee[re+"calendar"];if(re in ee){if(oe=ee[re],ve=ee._length||l.minRowLength(oe),l.isTypedArray(oe)&&(we==="linear"||we==="log")){if(ve===oe.length)return oe;if(oe.subarray)return oe.subarray(0,ve)}if(we==="multicategory")return function(Ae,Te){for(var se=new Array(Te),le=0;le<Te;le++){var ne=(Ae[0]||[])[le],me=(Ae[1]||[])[le];se[le]=N([ne,me])}return se}(oe,ve);for(ce=new Array(ve),pe=0;pe<ve;pe++)ce[pe]=w.d2c(oe[pe],0,xe,ae)}else{var ge=re+"0"in ee?w.d2c(ee[re+"0"],0,xe):0,Oe=ee["d"+re]?Number(ee["d"+re]):1;for(oe=ee[{x:"y",y:"x"}[re]],ve=ee._length||oe.length,ce=new Array(ve),pe=0;pe<ve;pe++)ce[pe]=ge+pe*Oe}if(w.rangebreaks)for(pe=0;pe<ve;pe++)ce[pe]=w.maskBreaks(ce[pe]);return ce},w.isValidRange=function(ee){return Array.isArray(ee)&&ee.length===2&&b(w.r2l(ee[0]))&&b(w.r2l(ee[1]))},w.isPtWithinRange=function(ee,re){var ae=w.c2l(ee[C],null,re),oe=w.r2l(w.range[0]),ce=w.r2l(w.range[1]);return oe<ce?oe<=ae&&ae<=ce:ce<=ae&&ae<=oe},w._emptyCategories=function(){w._categories=[],w._categoriesMap={}},w.clearCalc=function(){var ee=w._matchGroup;if(ee){var re=null,ae=null;for(var oe in ee){var ce=E[y.id2name(oe)];if(ce._categories){re=ce._categories,ae=ce._categoriesMap;break}}re&&ae?(w._categories=re,w._categoriesMap=ae):w._emptyCategories()}else w._emptyCategories();if(w._initialCategories)for(var pe=0;pe<w._initialCategories.length;pe++)H(w._initialCategories[pe])},w.sortByInitialCategories=function(){var ee=[];if(w._emptyCategories(),w._initialCategories)for(var re=0;re<w._initialCategories.length;re++)H(w._initialCategories[re]);ee=ee.concat(w._traceIndices);var ae=w._matchGroup;for(var oe in ae)if(L!==oe){var ce=E[y.id2name(oe)];ce._categories=w._categories,ce._categoriesMap=w._categoriesMap,ee=ee.concat(ce._traceIndices)}return ee};var J=E._d3locale;w.type==="date"&&(w._dateFormat=J?J.timeFormat:k,w._extraFormat=E._extraFormat),w._separators=E.separators,w._numFormat=J?J.numberFormat:T,delete w._minDtick,delete w._forceTick0}},59652:function(Q){Q.exports=function(z){var t=["showexponent","showtickprefix","showticksuffix"].filter(function(S){return z[S]!==void 0});if(t.every(function(S){return z[S]===z[t[0]]})||t.length===1)return z[t[0]]}},96115:function(Q,z,t){var S=t(71828),k=t(7901).contrast,l=t(13838),T=t(59652),b=t(85501);function d(s,e){function i(r,n){return S.coerce(s,e,l.tickformatstops,r,n)}i("enabled")&&(i("dtickrange"),i("value"))}Q.exports=function(s,e,i,r,n){n||(n={});var a=i("labelalias");S.isPlainObject(a)||delete e.labelalias;var o=T(s);if(i("showticklabels")){var u=n.font||{},p=e.color,c=(e.ticklabelposition||"").indexOf("inside")!==-1?k(n.bgColor):p&&p!==l.color.dflt?p:u.color;if(S.coerceFont(i,"tickfont",{family:u.family,size:u.size,color:c}),n.noTicklabelstep||r==="multicategory"||r==="log"||i("ticklabelstep"),n.noAng||i("tickangle"),r!=="category"){var x=i("tickformat");b(s,e,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:d}),e.tickformatstops.length||delete e.tickformatstops,n.noExp||x||r==="date"||(i("showexponent",o),i("exponentformat"),i("minexponent"),i("separatethousands"))}}}},38701:function(Q,z,t){var S=t(71828),k=t(13838);Q.exports=function(l,T,b,d){var s=d.isMinor,e=s?l.minor||{}:l,i=s?T.minor:T,r=s?k.minor:k,n=s?"minor.":"",a=S.coerce2(e,i,r,"ticklen",s?.6*(T.ticklen||5):void 0),o=S.coerce2(e,i,r,"tickwidth",s?T.tickwidth||1:void 0),u=S.coerce2(e,i,r,"tickcolor",(s?T.tickcolor:void 0)||i.color);b(n+"ticks",!s&&d.outerTicks||a||o||u?"outside":"")||(delete i.ticklen,delete i.tickwidth,delete i.tickcolor)}},26218:function(Q,z,t){var S=t(66287),k=t(71828).isArrayOrTypedArray;Q.exports=function(l,T,b,d,s){s||(s={});var e=s.isMinor,i=e?l.minor||{}:l,r=e?T.minor:T,n=e?"minor.":"";function a(g){var f=i[g];return f!==void 0?f:(r._template||{})[g]}var o=a("tick0"),u=a("dtick"),p=a("tickvals"),c=b(n+"tickmode",k(p)?"array":u?"linear":"auto");if(c==="auto"||c==="sync")b(n+"nticks");else if(c==="linear"){var x=r.dtick=S.dtick(u,d);r.tick0=S.tick0(o,d,T.calendar,x)}else d!=="multicategory"&&(b(n+"tickvals")===void 0?r.tickmode="auto":e||b("ticktext"))}},66847:function(Q,z,t){var S=t(39898),k=t(73972),l=t(71828),T=t(91424),b=t(89298);Q.exports=function(d,s,e,i){var r=d._fullLayout;if(s.length!==0){var n,a,o,u;i&&(n=i());var p=S.ease(e.easing);return d._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(u),u=null,function(){for(var g={},f=0;f<s.length;f++){var y=s[f],v=y.plotinfo.xaxis,m=y.plotinfo.yaxis;y.xr0&&(g[v._name+".range"]=y.xr0.slice()),y.yr0&&(g[m._name+".range"]=y.yr0.slice())}return k.call("relayout",d,g).then(function(){for(var _=0;_<s.length;_++)c(s[_].plotinfo)})}()}),a=Date.now(),u=window.requestAnimationFrame(function g(){o=Date.now();for(var f=Math.min(1,(o-a)/e.duration),y=p(f),v=0;v<s.length;v++)x(s[v],y);o-a>e.duration?(function(){for(var m={},_=0;_<s.length;_++){var h=s[_],A=h.plotinfo.xaxis,w=h.plotinfo.yaxis;h.xr1&&(m[A._name+".range"]=h.xr1.slice()),h.yr1&&(m[w._name+".range"]=h.yr1.slice())}n&&n(),k.call("relayout",d,m).then(function(){for(var E=0;E<s.length;E++)c(s[E].plotinfo)})}(),u=window.cancelAnimationFrame(g)):u=window.requestAnimationFrame(g)}),Promise.resolve()}function c(g){var f=g.xaxis,y=g.yaxis;r._defs.select("#"+g.clipId+"> rect").call(T.setTranslate,0,0).call(T.setScale,1,1),g.plot.call(T.setTranslate,f._offset,y._offset).call(T.setScale,1,1);var v=g.plot.selectAll(".scatterlayer .trace");v.selectAll(".point").call(T.setPointGroupScale,1,1),v.selectAll(".textpoint").call(T.setTextPointsScale,1,1),v.call(T.hideOutsideRangePoints,g)}function x(g,f){var y=g.plotinfo,v=y.xaxis,m=y.yaxis,_=v._length,h=m._length,A=!!g.xr1,w=!!g.yr1,E=[];if(A){var L=l.simpleMap(g.xr0,v.r2l),C=l.simpleMap(g.xr1,v.r2l),P=L[1]-L[0],D=C[1]-C[0];E[0]=(L[0]*(1-f)+f*C[0]-L[0])/(L[1]-L[0])*_,E[2]=_*(1-f+f*D/P),v.range[0]=v.l2r(L[0]*(1-f)+f*C[0]),v.range[1]=v.l2r(L[1]*(1-f)+f*C[1])}else E[0]=0,E[2]=_;if(w){var G=l.simpleMap(g.yr0,m.r2l),I=l.simpleMap(g.yr1,m.r2l),H=G[1]-G[0],N=I[1]-I[0];E[1]=(G[1]*(1-f)+f*I[1]-G[1])/(G[0]-G[1])*h,E[3]=h*(1-f+f*N/H),m.range[0]=v.l2r(G[0]*(1-f)+f*I[0]),m.range[1]=m.l2r(G[1]*(1-f)+f*I[1])}else E[1]=0,E[3]=h;b.drawOne(d,v,{skipTitle:!0}),b.drawOne(d,m,{skipTitle:!0}),b.redrawComponents(d,[v._id,m._id]);var F=A?_/E[2]:1,V=w?h/E[3]:1,q=A?E[0]:0,te=w?E[1]:0,$=A?E[0]/E[2]*_:0,W=w?E[1]/E[3]*h:0,Z=v._offset-$,J=m._offset-W;y.clipRect.call(T.setTranslate,q,te).call(T.setScale,1/F,1/V),y.plot.call(T.setTranslate,Z,J).call(T.setScale,F,V),T.setPointGroupScale(y.zoomScalePts,1/F,1/V),T.setTextPointsScale(y.zoomScaleTxt,1/F,1/V)}b.redrawComponents(d)}},951:function(Q,z,t){var S=t(73972).traceIs,k=t(4322);function l(b){return{v:"x",h:"y"}[b.orientation||"v"]}function T(b,d){var s=l(b),e=S(b,"box-violin"),i=S(b._fullInput||{},"candlestick");return e&&!i&&d===s&&b[s]===void 0&&b[s+"0"]===void 0}Q.exports=function(b,d,s,e){s("autotypenumbers",e.autotypenumbersDflt),s("type",(e.splomStash||{}).type)==="-"&&(function(i,r){if(i.type==="-"){var n,a=i._id,o=a.charAt(0);a.indexOf("scene")!==-1&&(a=o);var u=function(m,_,h){for(var A=0;A<m.length;A++){var w=m[A];if(w.type==="splom"&&w._length>0&&(w["_"+h+"axes"]||{})[_]||(w[h+"axis"]||h)===_&&(T(w,h)||(w[h]||[]).length||w[h+"0"]))return w}}(r,a,o);if(u)if(u.type!=="histogram"||o!=={v:"y",h:"x"}[u.orientation||"v"]){var p=o+"calendar",c=u[p],x={noMultiCategory:!S(u,"cartesian")||S(u,"noMultiCategory")};if(u.type==="box"&&u._hasPreCompStats&&o==={h:"x",v:"y"}[u.orientation||"v"]&&(x.noMultiCategory=!0),x.autotypenumbers=i.autotypenumbers,T(u,o)){var g=l(u),f=[];for(n=0;n<r.length;n++){var y=r[n];S(y,"box-violin")&&(y[o+"axis"]||o)===a&&(y[g]!==void 0?f.push(y[g][0]):y.name!==void 0?f.push(y.name):f.push("text"),y[p]!==c&&(c=void 0))}i.type=k(f,c,x)}else if(u.type==="splom"){var v=u.dimensions[u._axesDim[a]];v.visible&&(i.type=k(v.values,c,x))}else i.type=k(u[o]||[u[o+"0"]],c,x)}else i.type="linear"}}(d,e.data),d.type==="-"?d.type="linear":b.type=d.type)}},31137:function(Q,z,t){var S=t(73972),k=t(71828);function l(s,e,i){var r,n,a,o=!1;if(e.type==="data")r=s._fullData[e.traces!==null?e.traces[0]:0];else{if(e.type!=="layout")return!1;r=s._fullLayout}return n=k.nestedProperty(r,e.prop).get(),(a=i[e.type]=i[e.type]||{}).hasOwnProperty(e.prop)&&a[e.prop]!==n&&(o=!0),a[e.prop]=n,{changed:o,value:n}}function T(s,e){var i=[],r=e[0],n={};if(typeof r=="string")n[r]=e[1];else{if(!k.isPlainObject(r))return i;n=r}return d(n,function(a,o,u){i.push({type:"layout",prop:a,value:u})},"",0),i}function b(s,e){var i,r,n,a,o=[];if(r=e[0],n=e[1],i=e[2],a={},typeof r=="string")a[r]=n;else{if(!k.isPlainObject(r))return o;a=r,i===void 0&&(i=n)}return i===void 0&&(i=null),d(a,function(u,p,c){var x,g;if(Array.isArray(c)){g=c.slice();var f=Math.min(g.length,s.data.length);i&&(f=Math.min(f,i.length)),x=[];for(var y=0;y<f;y++)x[y]=i?i[y]:y}else g=c,x=i?i.slice():null;if(x===null)Array.isArray(g)&&(g=g[0]);else if(Array.isArray(x)){if(!Array.isArray(g)){var v=g;g=[];for(var m=0;m<x.length;m++)g[m]=v}g.length=Math.min(x.length,g.length)}o.push({type:"data",prop:u,traces:x,value:g})},"",0),o}function d(s,e,i,r){Object.keys(s).forEach(function(n){var a=s[n];if(n[0]!=="_"){var o=i+(r>0?".":"")+n;k.isPlainObject(a)?d(a,e,o,r+1):e(o,n,a)}})}z.manageCommandObserver=function(s,e,i,r){var n={},a=!0;e&&e._commandObserver&&(n=e._commandObserver),n.cache||(n.cache={}),n.lookupTable={};var o=z.hasSimpleAPICommandBindings(s,i,n.lookupTable);if(e&&e._commandObserver){if(o)return n;if(e._commandObserver.remove)return e._commandObserver.remove(),e._commandObserver=null,n}if(o){l(s,o,n.cache),n.check=function(){if(a){var c=l(s,o,n.cache);return c.changed&&r&&n.lookupTable[c.value]!==void 0&&(n.disable(),Promise.resolve(r({value:c.value,type:o.type,prop:o.prop,traces:o.traces,index:n.lookupTable[c.value]})).then(n.enable,n.enable)),c.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],p=0;p<u.length;p++)s._internalOn(u[p],n.check);n.remove=function(){for(var c=0;c<u.length;c++)s._removeInternalListener(u[c],n.check)}}else k.log("Unable to automatically bind plot updates to API command"),n.lookupTable={},n.remove=function(){};return n.disable=function(){a=!1},n.enable=function(){a=!0},e&&(e._commandObserver=n),n},z.hasSimpleAPICommandBindings=function(s,e,i){var r,n,a=e.length;for(r=0;r<a;r++){var o,u=e[r],p=u.method,c=u.args;if(Array.isArray(c)||(c=[]),!p)return!1;var x=z.computeAPICommandBindings(s,p,c);if(x.length!==1)return!1;if(n){if((o=x[0]).type!==n.type||o.prop!==n.prop)return!1;if(Array.isArray(n.traces)){if(!Array.isArray(o.traces))return!1;o.traces.sort();for(var g=0;g<n.traces.length;g++)if(n.traces[g]!==o.traces[g])return!1}else if(o.prop!==n.prop)return!1}else n=x[0],Array.isArray(n.traces)&&n.traces.sort();var f=(o=x[0]).value;if(Array.isArray(f)){if(f.length!==1)return!1;f=f[0]}i&&(i[f]=r)}return n},z.executeAPICommand=function(s,e,i){if(e==="skip")return Promise.resolve();var r=S.apiMethodRegistry[e],n=[s];Array.isArray(i)||(i=[]);for(var a=0;a<i.length;a++)n.push(i[a]);return r.apply(null,n).catch(function(o){return k.warn("API call to Plotly."+e+" rejected.",o),Promise.reject(o)})},z.computeAPICommandBindings=function(s,e,i){var r;switch(Array.isArray(i)||(i=[]),e){case"restyle":r=b(s,i);break;case"relayout":r=T(0,i);break;case"update":r=b(s,[i[0],i[2]]).concat(T(0,[i[1]]));break;case"animate":r=function(n,a){return Array.isArray(a[0])&&a[0].length===1&&["string","number"].indexOf(typeof a[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:a[0][0].toString()}]:[]}(0,i);break;default:r=[]}return r}},27670:function(Q,z,t){var S=t(1426).extendFlat;z.Y=function(k,l){l=l||{};var T={valType:"info_array",editType:(k=k||{}).editType,items:[{valType:"number",min:0,max:1,editType:k.editType},{valType:"number",min:0,max:1,editType:k.editType}],dflt:[0,1]},b=(k.name&&k.name,k.trace,l.description&&l.description,{x:S({},T,{}),y:S({},T,{}),editType:k.editType});return k.noGridCell||(b.row={valType:"integer",min:0,dflt:0,editType:k.editType},b.column={valType:"integer",min:0,dflt:0,editType:k.editType}),b},z.c=function(k,l,T,b){var d=b&&b.x||[0,1],s=b&&b.y||[0,1],e=l.grid;if(e){var i=T("domain.column");i!==void 0&&(i<e.columns?d=e._domains.x[i]:delete k.domain.column);var r=T("domain.row");r!==void 0&&(r<e.rows?s=e._domains.y[r]:delete k.domain.row)}var n=T("domain.x",d),a=T("domain.y",s);n[0]<n[1]||(k.domain.x=d.slice()),a[0]<a[1]||(k.domain.y=s.slice())}},41940:function(Q){Q.exports=function(z){var t=z.editType,S=z.colorEditType;S===void 0&&(S=t);var k={family:{valType:"string",noBlank:!0,strict:!0,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:S},editType:t};return z.autoSize&&(k.size.dflt="auto"),z.autoColor&&(k.color.dflt="auto"),z.arrayOk&&(k.family.arrayOk=!0,k.size.arrayOk=!0,k.color.arrayOk=!0),k}},31391:function(Q){Q.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},78776:function(Q,z){z.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},z.axesNames=["lonaxis","lataxis"],z.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},z.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},z.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},z.clipPad=.001,z.precision=.1,z.landColor="#F0DC82",z.waterColor="#3399FF",z.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},z.sphereSVG={type:"Sphere"},z.fillLayers={ocean:1,land:1,lakes:1},z.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},z.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],z.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],z.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},69082:function(Q,z,t){var S=t(39898),k=t(27362),l=k.geoPath,T=k.geoDistance,b=t(65704),d=t(73972),s=t(71828),e=s.strTranslate,i=t(7901),r=t(91424),n=t(30211),a=t(74875),o=t(89298),u=t(71739).getAutoRange,p=t(28569),c=t(47322).prepSelect,x=t(47322).clearOutline,g=t(47322).selectOnClick,f=t(74455),y=t(78776),v=t(41327),m=t(90973),_=t(96892).zL;function h(E){this.id=E.id,this.graphDiv=E.graphDiv,this.container=E.container,this.topojsonURL=E.topojsonURL,this.isStatic=E.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var A=h.prototype;function w(E,L){var C=y.clipPad,P=E[0]+C,D=E[1]-C,G=L[0]+C,I=L[1]-C;P>0&&D<0&&(D+=360);var H=(D-P)/4;return{type:"Polygon",coordinates:[[[P,G],[P,I],[P+H,I],[P+2*H,I],[P+3*H,I],[D,I],[D,G],[D-H,G],[D-2*H,G],[D-3*H,G],[P,G]]]}}Q.exports=function(E){return new h(E)},A.plot=function(E,L,C,P){var D=this;if(P)return D.update(E,L,!0);D._geoCalcData=E,D._fullLayout=L;var G=L[this.id],I=[],H=!1;for(var N in y.layerNameToAdjective)if(N!=="frame"&&G["show"+N]){H=!0;break}for(var F=!1,V=0;V<E.length;V++){var q=E[0][0].trace;q._geo=D,q.locationmode&&(H=!0);var te=q.marker;if(te){var $=te.angle,W=te.angleref;($||W==="north"||W==="previous")&&(F=!0)}}if(this._hasMarkerAngles=F,H){var Z=m.getTopojsonName(G);D.topojson!==null&&Z===D.topojsonName||(D.topojsonName=Z,PlotlyGeoAssets.topojson[D.topojsonName]===void 0&&I.push(D.fetchTopojson()))}I=I.concat(v.fetchTraceGeoData(E)),C.push(new Promise(function(J,ee){Promise.all(I).then(function(){D.topojson=PlotlyGeoAssets.topojson[D.topojsonName],D.update(E,L),J()}).catch(ee)}))},A.fetchTopojson=function(){var E=this,L=m.getTopojsonPath(E.topojsonURL,E.topojsonName);return new Promise(function(C,P){S.json(L,function(D,G){if(D)return D.status===404?P(new Error(["plotly.js could not find topojson file at",L+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):P(new Error(["unexpected error while fetching topojson file at",L].join(" ")));PlotlyGeoAssets.topojson[E.topojsonName]=G,C()})})},A.update=function(E,L,C){var P=L[this.id];this.hasChoropleth=!1;for(var D=0;D<E.length;D++){var G=E[D],I=G[0].trace;I.type==="choropleth"&&(this.hasChoropleth=!0),I.visible===!0&&I._length>0&&I._module.calcGeoJSON(G,L)}if(!C){if(this.updateProjection(E,L))return;this.viewInitial&&this.scope===P.scope||this.saveViewInitial(P)}this.scope=P.scope,this.updateBaseLayers(L,P),this.updateDims(L,P),this.updateFx(L,P),a.generalUpdatePerTraceModule(this.graphDiv,this,E,P);var H=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=H.selectAll(".point"),this.dataPoints.text=H.selectAll("text"),this.dataPaths.line=H.selectAll(".js-line");var N=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=N.selectAll("path"),this._render()},A.updateProjection=function(E,L){var C=this.graphDiv,P=L[this.id],D=L._size,G=P.domain,I=P.projection,H=P.lonaxis,N=P.lataxis,F=H._ax,V=N._ax,q=this.projection=function(le){var ne=le.projection,me=ne.type,Ee=y.projNames[me];Ee="geo"+s.titleCase(Ee);for(var be=(k[Ee]||b[Ee])(),De=le._isSatellite?180*Math.acos(1/ne.distance)/Math.PI:le._isClipped?y.lonaxisSpan[me]/2:null,Ue=["center","rotate","parallels","clipExtent"],he=function(Ce){return Ce?be:[]},ke=0;ke<Ue.length;ke++){var _e=Ue[ke];typeof be[_e]!="function"&&(be[_e]=he)}return be.isLonLatOverEdges=function(Ce){if(be(Ce)===null)return!0;if(De){var Fe=be.rotate();return T(Ce,[-Fe[0],-Fe[1]])>De*Math.PI/180}return!1},be.getPath=function(){return l().projection(be)},be.getBounds=function(Ce){return be.getPath().bounds(Ce)},be.precision(y.precision),le._isSatellite&&be.tilt(ne.tilt).distance(ne.distance),De&&be.clipAngle(De-y.clipPad),be}(P),te=[[D.l+D.w*G.x[0],D.t+D.h*(1-G.y[1])],[D.l+D.w*G.x[1],D.t+D.h*(1-G.y[0])]],$=P.center||{},W=I.rotation||{},Z=H.range||[],J=N.range||[];if(P.fitbounds){F._length=te[1][0]-te[0][0],V._length=te[1][1]-te[0][1],F.range=u(C,F),V.range=u(C,V);var ee=(F.range[0]+F.range[1])/2,re=(V.range[0]+V.range[1])/2;if(P._isScoped)$={lon:ee,lat:re};else if(P._isClipped){$={lon:ee,lat:re},W={lon:ee,lat:re,roll:W.roll};var ae=I.type,oe=y.lonaxisSpan[ae]/2||180,ce=y.lataxisSpan[ae]/2||90;Z=[ee-oe,ee+oe],J=[re-ce,re+ce]}else $={lon:ee,lat:re},W={lon:ee,lat:W.lat,roll:W.roll}}q.center([$.lon-W.lon,$.lat-W.lat]).rotate([-W.lon,-W.lat,W.roll]).parallels(I.parallels);var pe=w(Z,J);q.fitExtent(te,pe);var ve=this.bounds=q.getBounds(pe),we=this.fitScale=q.scale(),xe=q.translate();if(P.fitbounds){var ge=q.getBounds(w(F.range,V.range)),Oe=Math.min((ve[1][0]-ve[0][0])/(ge[1][0]-ge[0][0]),(ve[1][1]-ve[0][1])/(ge[1][1]-ge[0][1]));isFinite(Oe)?q.scale(Oe*we):s.warn("Something went wrong during"+this.id+"fitbounds computations.")}else q.scale(I.scale*we);var Ae=this.midPt=[(ve[0][0]+ve[1][0])/2,(ve[0][1]+ve[1][1])/2];if(q.translate([xe[0]+(Ae[0]-xe[0]),xe[1]+(Ae[1]-xe[1])]).clipExtent(ve),P._isAlbersUsa){var Te=q([$.lon,$.lat]),se=q.translate();q.translate([se[0]-(Te[0]-se[0]),se[1]-(Te[1]-se[1])])}},A.updateBaseLayers=function(E,L){var C=this,P=C.topojson,D=C.layers,G=C.basePaths;function I(q){return q==="lonaxis"||q==="lataxis"}function H(q){return!!y.lineLayers[q]}function N(q){return!!y.fillLayers[q]}var F=(this.hasChoropleth?y.layersForChoropleth:y.layers).filter(function(q){return H(q)||N(q)?L["show"+q]:!I(q)||L[q].showgrid}),V=C.framework.selectAll(".layer").data(F,String);V.exit().each(function(q){delete D[q],delete G[q],S.select(this).remove()}),V.enter().append("g").attr("class",function(q){return"layer "+q}).each(function(q){var te=D[q]=S.select(this);q==="bg"?C.bgRect=te.append("rect").style("pointer-events","all"):I(q)?G[q]=te.append("path").style("fill","none"):q==="backplot"?te.append("g").classed("choroplethlayer",!0):q==="frontplot"?te.append("g").classed("scatterlayer",!0):H(q)?G[q]=te.append("path").style("fill","none").style("stroke-miterlimit",2):N(q)&&(G[q]=te.append("path").style("stroke","none"))}),V.order(),V.each(function(q){var te=G[q],$=y.layerNameToAdjective[q];q==="frame"?te.datum(y.sphereSVG):H(q)||N(q)?te.datum(_(P,P.objects[q])):I(q)&&te.datum(function(W,Z,J){var ee,re,ae,oe=Z[W],ce=y.scopeDefaults[Z.scope];W==="lonaxis"?(ee=ce.lonaxisRange,re=ce.lataxisRange,ae=function(se,le){return[se,le]}):W==="lataxis"&&(ee=ce.lataxisRange,re=ce.lonaxisRange,ae=function(se,le){return[le,se]});var pe={type:"linear",range:[ee[0],ee[1]-1e-6],tick0:oe.tick0,dtick:oe.dtick};o.setConvert(pe,J);var ve=o.calcTicks(pe);Z.isScoped||W!=="lonaxis"||ve.pop();for(var we=ve.length,xe=new Array(we),ge=0;ge<we;ge++)for(var Oe=ve[ge].x,Ae=xe[ge]=[],Te=re[0];Te<re[1]+2.5;Te+=2.5)Ae.push(ae(Oe,Te));return{type:"MultiLineString",coordinates:xe}}(q,L,E)).call(i.stroke,L[q].gridcolor).call(r.dashLine,L[q].griddash,L[q].gridwidth),H(q)?te.call(i.stroke,L[$+"color"]).call(r.dashLine,"",L[$+"width"]):N(q)&&te.call(i.fill,L[$+"color"])})},A.updateDims=function(E,L){var C=this.bounds,P=(L.framewidth||0)/2,D=C[0][0]-P,G=C[0][1]-P,I=C[1][0]-D+P,H=C[1][1]-G+P;r.setRect(this.clipRect,D,G,I,H),this.bgRect.call(r.setRect,D,G,I,H).call(i.fill,L.bgcolor),this.xaxis._offset=D,this.xaxis._length=I,this.yaxis._offset=G,this.yaxis._length=H},A.updateFx=function(E,L){var C=this,P=C.graphDiv,D=C.bgRect,G=E.dragmode,I=E.clickmode;if(!C.isStatic){var H={element:C.bgRect.node(),gd:P,plotinfo:{id:C.id,xaxis:C.xaxis,yaxis:C.yaxis,fillRangeItems:function(F,V){V.isRect?(F.range={})[C.id]=[N([V.xmin,V.ymin]),N([V.xmax,V.ymax])]:(F.lassoPoints={})[C.id]=V.map(N)}},xaxes:[C.xaxis],yaxes:[C.yaxis],subplot:C.id,clickFn:function(F){F===2&&x(P)}};G==="pan"?(D.node().onmousedown=null,D.call(f(C,L)),D.on("dblclick.zoom",function(){var F=C.viewInitial,V={};for(var q in F)V[C.id+"."+q]=F[q];d.call("_guiRelayout",P,V),P.emit("plotly_doubleclick",null)}),P._context._scrollZoom.geo||D.on("wheel.zoom",null)):G!=="select"&&G!=="lasso"||(D.on(".zoom",null),H.prepFn=function(F,V,q){c(F,V,q,H,G)},p.init(H)),D.on("mousemove",function(){var F=C.projection.invert(s.getPositionFromD3Event());if(!F)return p.unhover(P,S.event);C.xaxis.p2c=function(){return F[0]},C.yaxis.p2c=function(){return F[1]},n.hover(P,S.event,C.id)}),D.on("mouseout",function(){P._dragging||p.unhover(P,S.event)}),D.on("click",function(){G!=="select"&&G!=="lasso"&&(I.indexOf("select")>-1&&g(S.event,P,[C.xaxis],[C.yaxis],C.id,H),I.indexOf("event")>-1&&n.click(P,S.event))})}function N(F){return C.projection.invert([F[0]+C.xaxis._offset,F[1]+C.yaxis._offset])}},A.makeFramework=function(){var E=this,L=E.graphDiv,C=L._fullLayout,P="clip"+C._uid+E.id;E.clipDef=C._clips.append("clipPath").attr("id",P),E.clipRect=E.clipDef.append("rect"),E.framework=S.select(E.container).append("g").attr("class","geo "+E.id).call(r.setClipUrl,P,L),E.project=function(D){var G=E.projection(D);return G?[G[0]-E.xaxis._offset,G[1]-E.yaxis._offset]:[null,null]},E.xaxis={_id:"x",c2p:function(D){return E.project(D)[0]}},E.yaxis={_id:"y",c2p:function(D){return E.project(D)[1]}},E.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},o.setConvert(E.mockAxis,C)},A.saveViewInitial=function(E){var L,C=E.center||{},P=E.projection,D=P.rotation||{};this.viewInitial={fitbounds:E.fitbounds,"projection.scale":P.scale},L=E._isScoped?{"center.lon":C.lon,"center.lat":C.lat}:E._isClipped?{"projection.rotation.lon":D.lon,"projection.rotation.lat":D.lat}:{"center.lon":C.lon,"center.lat":C.lat,"projection.rotation.lon":D.lon},s.extendFlat(this.viewInitial,L)},A.render=function(E){this._hasMarkerAngles&&E?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},A._render=function(){var E,L=this.projection,C=L.getPath();function P(G){var I=L(G.lonlat);return I?e(I[0],I[1]):null}function D(G){return L.isLonLatOverEdges(G.lonlat)?"none":null}for(E in this.basePaths)this.basePaths[E].attr("d",C);for(E in this.dataPaths)this.dataPaths[E].attr("d",function(G){return C(G.geojson)});for(E in this.dataPoints)this.dataPoints[E].attr("display",D).attr("transform",P)}},44622:function(Q,z,t){var S=t(27659).AU,k=t(71828).counterRegex,l=t(69082),T="geo",b=k(T),d={};d[T]={valType:"subplotid",dflt:T,editType:"calc"},Q.exports={attr:T,name:T,idRoot:T,idRegex:b,attrRegex:b,attributes:d,layoutAttributes:t(77519),supplyLayoutDefaults:t(82161),plot:function(s){for(var e=s._fullLayout,i=s.calcdata,r=e._subplots[T],n=0;n<r.length;n++){var a=r[n],o=S(i,T,a),u=e[a]._subplot;u||(u=l({id:a,graphDiv:s,container:e._geolayer.node(),topojsonURL:s._context.topojsonURL,staticPlot:s._context.staticPlot}),e[a]._subplot=u),u.plot(o,e,s._promises)}},updateFx:function(s){for(var e=s._fullLayout,i=e._subplots[T],r=0;r<i.length;r++){var n=e[i[r]];n._subplot.updateFx(e,n)}},clean:function(s,e,i,r){for(var n=r._subplots[T]||[],a=0;a<n.length;a++){var o=n[a],u=r[o]._subplot;!e[o]&&u&&(u.framework.remove(),u.clipDef.remove())}}}},77519:function(Q,z,t){var S=t(22399),k=t(27670).Y,l=t(79952).P,T=t(78776),b=t(30962).overrideAll,d=t(78607),s={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:S.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:l};(Q.exports=b({domain:k({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:d(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:d(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:S.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:S.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:S.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:S.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:S.background},lonaxis:s,lataxis:s},"plot","from-root")).uirevision={valType:"any",editType:"none"}},82161:function(Q,z,t){var S=t(71828),k=t(49119),l=t(27659).NG,T=t(78776),b=t(77519),d=T.axesNames;function s(e,i,r,n){var a=l(n.fullData,"geo",n.id).map(function(W){return W._expandedIndex}),o=r("resolution"),u=r("scope"),p=T.scopeDefaults[u],c=r("projection.type",p.projType),x=i._isAlbersUsa=c==="albers usa";x&&(u=i.scope="usa");var g=i._isScoped=u!=="world",f=i._isSatellite=c==="satellite",y=i._isConic=c.indexOf("conic")!==-1||c==="albers",v=i._isClipped=!!T.lonaxisSpan[c];if(e.visible===!1){var m=S.extendDeep({},i._template);m.showcoastlines=!1,m.showcountries=!1,m.showframe=!1,m.showlakes=!1,m.showland=!1,m.showocean=!1,m.showrivers=!1,m.showsubunits=!1,m.lonaxis&&(m.lonaxis.showgrid=!1),m.lataxis&&(m.lataxis.showgrid=!1),i._template=m}for(var _=r("visible"),h=0;h<d.length;h++){var A,w=d[h],E=[30,10][h];if(g)A=p[w+"Range"];else{var L=T[w+"Span"],C=(L[c]||L["*"])/2,P=r("projection.rotation."+w.substr(0,3),p.projRotate[h]);A=[P-C,P+C]}var D=r(w+".range",A);r(w+".tick0"),r(w+".dtick",E),r(w+".showgrid",!!_&&void 0)&&(r(w+".gridcolor"),r(w+".gridwidth"),r(w+".griddash")),i[w]._ax={type:"linear",_id:w.slice(0,3),_traceIndices:a,setScale:S.identity,c2l:S.identity,r2l:S.identity,autorange:!0,range:D.slice(),_m:1,_input:{}}}var G=i.lonaxis.range,I=i.lataxis.range,H=G[0],N=G[1];H>0&&N<0&&(N+=360);var F,V,q,te=(H+N)/2;if(!x){var $=g?p.projRotate:[te,0,0];F=r("projection.rotation.lon",$[0]),r("projection.rotation.lat",$[1]),r("projection.rotation.roll",$[2]),r("showcoastlines",!g&&_)&&(r("coastlinecolor"),r("coastlinewidth")),r("showocean",!!_&&void 0)&&r("oceancolor")}x?(V=-96.6,q=38.7):(V=g?te:F,q=(I[0]+I[1])/2),r("center.lon",V),r("center.lat",q),f&&(r("projection.tilt"),r("projection.distance")),y&&r("projection.parallels",p.projParallels||[0,60]),r("projection.scale"),r("showland",!!_&&void 0)&&r("landcolor"),r("showlakes",!!_&&void 0)&&r("lakecolor"),r("showrivers",!!_&&void 0)&&(r("rivercolor"),r("riverwidth")),r("showcountries",g&&u!=="usa"&&_)&&(r("countrycolor"),r("countrywidth")),(u==="usa"||u==="north america"&&o===50)&&(r("showsubunits",_),r("subunitcolor"),r("subunitwidth")),g||r("showframe",_)&&(r("framecolor"),r("framewidth")),r("bgcolor"),r("fitbounds")&&(delete i.projection.scale,g?(delete i.center.lon,delete i.center.lat):v?(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon,delete i.projection.rotation.lat,delete i.lonaxis.range,delete i.lataxis.range):(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon))}Q.exports=function(e,i,r){k(e,i,r,{type:"geo",attributes:b,handleDefaults:s,fullData:r,partition:"y"})}},74455:function(Q,z,t){var S=t(39898),k=t(71828),l=t(73972),T=Math.PI/180,b=180/Math.PI,d={cursor:"pointer"},s={cursor:"auto"};function e(g,f){return S.behavior.zoom().translate(f.translate()).scale(f.scale())}function i(g,f,y){var v=g.id,m=g.graphDiv,_=m.layout,h=_[v],A=m._fullLayout,w=A[v],E={},L={};function C(P,D){E[v+"."+P]=k.nestedProperty(h,P).get(),l.call("_storeDirectGUIEdit",_,A._preGUI,E);var G=k.nestedProperty(w,P);G.get()!==D&&(G.set(D),k.nestedProperty(h,P).set(D),L[v+"."+P]=D)}y(C),C("projection.scale",f.scale()/g.fitScale),C("fitbounds",!1),m.emit("plotly_relayout",L)}function r(g,f){var y=e(0,f);function v(m){var _=f.invert(g.midPt);m("center.lon",_[0]),m("center.lat",_[1])}return y.on("zoomstart",function(){S.select(this).style(d)}).on("zoom",function(){f.scale(S.event.scale).translate(S.event.translate),g.render(!0);var m=f.invert(g.midPt);g.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":f.scale()/g.fitScale,"geo.center.lon":m[0],"geo.center.lat":m[1]})}).on("zoomend",function(){S.select(this).style(s),i(g,f,v)}),y}function n(g,f){var y,v,m,_,h,A,w,E,L,C=e(0,f);function P(G){return f.invert(G)}function D(G){var I=f.rotate(),H=f.invert(g.midPt);G("projection.rotation.lon",-I[0]),G("center.lon",H[0]),G("center.lat",H[1])}return C.on("zoomstart",function(){S.select(this).style(d),y=S.mouse(this),v=f.rotate(),m=f.translate(),_=v,h=P(y)}).on("zoom",function(){if(A=S.mouse(this),function(H){var N=P(H);if(!N)return!0;var F=f(N);return Math.abs(F[0]-H[0])>2||Math.abs(F[1]-H[1])>2}(y))return C.scale(f.scale()),void C.translate(f.translate());f.scale(S.event.scale),f.translate([m[0],S.event.translate[1]]),h?P(A)&&(E=P(A),w=[_[0]+(E[0]-h[0]),v[1],v[2]],f.rotate(w),_=w):h=P(y=A),L=!0,g.render(!0);var G=f.rotate(),I=f.invert(g.midPt);g.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":f.scale()/g.fitScale,"geo.center.lon":I[0],"geo.center.lat":I[1],"geo.projection.rotation.lon":-G[0]})}).on("zoomend",function(){S.select(this).style(s),L&&i(g,f,D)}),C}function a(g,f){var y;f.rotate(),f.scale();var v=e(0,f),m=function(w){for(var E=0,L=arguments.length,C=[];++E<L;)C.push(arguments[E]);var P=S.dispatch.apply(null,C);return P.of=function(D,G){return function(I){var H;try{H=I.sourceEvent=S.event,I.target=w,S.event=I,P[I.type].apply(D,G)}finally{S.event=H}}},P}(v,"zoomstart","zoom","zoomend"),_=0,h=v.on;function A(w){var E=f.rotate();w("projection.rotation.lon",-E[0]),w("projection.rotation.lat",-E[1])}return v.on("zoomstart",function(){S.select(this).style(d);var w,E,L,C,P,D,G,I,H,N,F,V=S.mouse(this),q=f.rotate(),te=q,$=f.translate(),W=(E=.5*(w=q)[0]*T,L=.5*w[1]*T,C=.5*w[2]*T,P=Math.sin(E),D=Math.cos(E),G=Math.sin(L),I=Math.cos(L),H=Math.sin(C),[D*I*(N=Math.cos(C))+P*G*H,P*I*N-D*G*H,D*G*N+P*I*H,D*I*H-P*G*N]);y=o(f,V),h.call(v,"zoom",function(){var Z,J,ee,re,ae,oe,ce,pe,ve,we,xe=S.mouse(this);if(f.scale(S.event.scale),y){if(o(f,xe)){f.rotate(q).translate($);var ge=o(f,xe),Oe=function(se,le){if(se&&le){var ne=function(De,Ue){return[De[1]*Ue[2]-De[2]*Ue[1],De[2]*Ue[0]-De[0]*Ue[2],De[0]*Ue[1]-De[1]*Ue[0]]}(se,le),me=Math.sqrt(x(ne,ne)),Ee=.5*Math.acos(Math.max(-1,Math.min(1,x(se,le)))),be=Math.sin(Ee)/me;return me&&[Math.cos(Ee),ne[2]*be,-ne[1]*be,ne[0]*be]}}(y,ge),Ae=function(se){return[Math.atan2(2*(se[0]*se[1]+se[2]*se[3]),1-2*(se[1]*se[1]+se[2]*se[2]))*b,Math.asin(Math.max(-1,Math.min(1,2*(se[0]*se[2]-se[3]*se[1]))))*b,Math.atan2(2*(se[0]*se[3]+se[1]*se[2]),1-2*(se[2]*se[2]+se[3]*se[3]))*b]}((ee=(Z=W)[0],re=Z[1],ae=Z[2],oe=Z[3],[ee*(ce=(J=Oe)[0])-re*(pe=J[1])-ae*(ve=J[2])-oe*(we=J[3]),ee*pe+re*ce+ae*we-oe*ve,ee*ve-re*we+ae*ce+oe*pe,ee*we+re*ve-ae*pe+oe*ce])),Te=function(se,le,ne){var me=c(le,2,se[0]);me=c(me,1,se[1]),me=c(me,0,se[2]-ne[2]);var Ee,be,De=le[0],Ue=le[1],he=le[2],ke=me[0],_e=me[1],Ce=me[2],Fe=Math.atan2(Ue,De)*b,Re=Math.sqrt(De*De+Ue*Ue);Math.abs(_e)>Re?(be=(_e>0?90:-90)-Fe,Ee=0):(be=Math.asin(_e/Re)*b-Fe,Ee=Math.sqrt(Re*Re-_e*_e));var He=180-be-2*Fe,Ge=(Math.atan2(Ce,ke)-Math.atan2(he,Ee))*b,$e=(Math.atan2(Ce,ke)-Math.atan2(he,-Ee))*b;return u(ne[0],ne[1],be,Ge)<=u(ne[0],ne[1],He,$e)?[be,Ge,ne[2]]:[He,$e,ne[2]]}(Ae,y,te);isFinite(Te[0])&&isFinite(Te[1])&&isFinite(Te[2])||(Te=te),f.rotate(Te),te=Te}}else y=o(f,V=xe);m.of(this,arguments)({type:"zoom"})}),F=m.of(this,arguments),_++||F({type:"zoomstart"})}).on("zoomend",function(){var w;S.select(this).style(s),h.call(v,"zoom",null),w=m.of(this,arguments),--_||w({type:"zoomend"}),i(g,f,A)}).on("zoom.redraw",function(){g.render(!0);var w=f.rotate();g.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":f.scale()/g.fitScale,"geo.projection.rotation.lon":-w[0],"geo.projection.rotation.lat":-w[1]})}),S.rebind(v,m,"on")}function o(g,f){var y=g.invert(f);return y&&isFinite(y[0])&&isFinite(y[1])&&function(v){var m=v[0]*T,_=v[1]*T,h=Math.cos(_);return[h*Math.cos(m),h*Math.sin(m),Math.sin(_)]}(y)}function u(g,f,y,v){var m=p(y-g),_=p(v-f);return Math.sqrt(m*m+_*_)}function p(g){return(g%360+540)%360-180}function c(g,f,y){var v=y*T,m=g.slice(),_=f===0?1:0,h=f===2?1:2,A=Math.cos(v),w=Math.sin(v);return m[_]=g[_]*A-g[h]*w,m[h]=g[h]*A+g[_]*w,m}function x(g,f){for(var y=0,v=0,m=g.length;v<m;++v)y+=g[v]*f[v];return y}Q.exports=function(g,f){var y=g.projection;return(f._isScoped?r:f._isClipped?a:n)(g,y)}},27659:function(Q,z,t){var S=t(73972),k=t(85555).SUBPLOT_PATTERN;z.AU=function(l,T,b){var d=S.subplotsRegistry[T];if(!d)return[];for(var s=d.attr,e=[],i=0;i<l.length;i++){var r=l[i];r[0].trace[s]===b&&e.push(r)}return e},z.a0=function(l,T){var b,d=[],s=[];if(!(b=typeof T=="string"?S.getModule(T).plot:typeof T=="function"?T:T.plot))return[d,l];for(var e=0;e<l.length;e++){var i=l[e],r=i[0].trace;r.visible===!0&&r._length!==0&&(r._module.plot===b?d.push(i):s.push(i))}return[d,s]},z.NG=function(l,T,b){if(!S.subplotsRegistry[T])return[];var d,s,e,i=S.subplotsRegistry[T].attr,r=[];if(T==="gl2d"){var n=b.match(k);s="x"+n[1],e="y"+n[2]}for(var a=0;a<l.length;a++)d=l[a],T==="gl2d"&&S.traceIs(d,"gl2d")?d[i[0]]===s&&d[i[1]]===e&&r.push(d):d[i]===b&&r.push(d);return r}},75071:function(Q,z,t){var S=t(16825),k=t(1195),l=t(48956),T=t(85555),b=t(38520);function d(s,e){this.element=s,this.plot=e,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}Q.exports=function(s){var e=s.mouseContainer,i=s.glplot,r=new d(e,i);function n(){s.xaxis.autorange=!1,s.yaxis.autorange=!1}function a(o,u,p){var c,x,g=s.calcDataBox(),f=i.viewBox,y=r.lastPos[0],v=r.lastPos[1],m=T.MINDRAG*i.pixelRatio,_=T.MINZOOM*i.pixelRatio;function h(P,D,G){var I=Math.min(D,G),H=Math.max(D,G);I!==H?(g[P]=I,g[P+2]=H,r.dataBox=g,s.setRanges(g)):(s.selectBox.selectBox=[0,0,1,1],s.glplot.setDirty())}switch(u*=i.pixelRatio,p*=i.pixelRatio,p=f[3]-f[1]-p,s.fullLayout.dragmode){case"zoom":if(o){var A=u/(f[2]-f[0])*(g[2]-g[0])+g[0],w=p/(f[3]-f[1])*(g[3]-g[1])+g[1];r.boxInited||(r.boxStart[0]=A,r.boxStart[1]=w,r.dragStart[0]=u,r.dragStart[1]=p),r.boxEnd[0]=A,r.boxEnd[1]=w,r.boxInited=!0,r.boxEnabled||r.boxStart[0]===r.boxEnd[0]&&r.boxStart[1]===r.boxEnd[1]||(r.boxEnabled=!0);var E=Math.abs(r.dragStart[0]-u)<_,L=Math.abs(r.dragStart[1]-p)<_;if(!function(){for(var P=s.graphDiv._fullLayout._axisConstraintGroups,D=s.xaxis._id,G=s.yaxis._id,I=0;I<P.length;I++)if(P[I][D]!==-1){if(P[I][G]!==-1)return!0;break}return!1}()||E&&L)E&&(r.boxEnd[0]=r.boxStart[0]),L&&(r.boxEnd[1]=r.boxStart[1]);else{c=r.boxEnd[0]-r.boxStart[0],x=r.boxEnd[1]-r.boxStart[1];var C=(g[3]-g[1])/(g[2]-g[0]);Math.abs(c*C)>Math.abs(x)?(r.boxEnd[1]=r.boxStart[1]+Math.abs(c)*C*(x>=0?1:-1),r.boxEnd[1]<g[1]?(r.boxEnd[1]=g[1],r.boxEnd[0]=r.boxStart[0]+(g[1]-r.boxStart[1])/Math.abs(C)):r.boxEnd[1]>g[3]&&(r.boxEnd[1]=g[3],r.boxEnd[0]=r.boxStart[0]+(g[3]-r.boxStart[1])/Math.abs(C))):(r.boxEnd[0]=r.boxStart[0]+Math.abs(x)/C*(c>=0?1:-1),r.boxEnd[0]<g[0]?(r.boxEnd[0]=g[0],r.boxEnd[1]=r.boxStart[1]+(g[0]-r.boxStart[0])*Math.abs(C)):r.boxEnd[0]>g[2]&&(r.boxEnd[0]=g[2],r.boxEnd[1]=r.boxStart[1]+(g[2]-r.boxStart[0])*Math.abs(C)))}}else r.boxEnabled?(c=r.boxStart[0]!==r.boxEnd[0],x=r.boxStart[1]!==r.boxEnd[1],c||x?(c&&(h(0,r.boxStart[0],r.boxEnd[0]),s.xaxis.autorange=!1),x&&(h(1,r.boxStart[1],r.boxEnd[1]),s.yaxis.autorange=!1),s.relayoutCallback()):s.glplot.setDirty(),r.boxEnabled=!1,r.boxInited=!1):r.boxInited&&(r.boxInited=!1);break;case"pan":r.boxEnabled=!1,r.boxInited=!1,o?(r.panning||(r.dragStart[0]=u,r.dragStart[1]=p),Math.abs(r.dragStart[0]-u)<m&&(u=r.dragStart[0]),Math.abs(r.dragStart[1]-p)<m&&(p=r.dragStart[1]),c=(y-u)*(g[2]-g[0])/(i.viewBox[2]-i.viewBox[0]),x=(v-p)*(g[3]-g[1])/(i.viewBox[3]-i.viewBox[1]),g[0]+=c,g[2]+=c,g[1]+=x,g[3]+=x,s.setRanges(g),r.panning=!0,r.lastInputTime=Date.now(),n(),s.cameraChanged(),s.handleAnnotations()):r.panning&&(r.panning=!1,s.relayoutCallback())}r.lastPos[0]=u,r.lastPos[1]=p}return r.mouseListener=S(e,a),e.addEventListener("touchstart",function(o){var u=l(o.changedTouches[0],e);a(0,u[0],u[1]),a(1,u[0],u[1]),o.preventDefault()},!!b&&{passive:!1}),e.addEventListener("touchmove",function(o){o.preventDefault();var u=l(o.changedTouches[0],e);a(1,u[0],u[1]),o.preventDefault()},!!b&&{passive:!1}),e.addEventListener("touchend",function(o){a(0,r.lastPos[0],r.lastPos[1]),o.preventDefault()},!!b&&{passive:!1}),r.wheelListener=k(e,function(o,u){if(!s.scrollZoom)return!1;var p=s.calcDataBox(),c=i.viewBox,x=r.lastPos[0],g=r.lastPos[1],f=Math.exp(5*u/(c[3]-c[1])),y=x/(c[2]-c[0])*(p[2]-p[0])+p[0],v=g/(c[3]-c[1])*(p[3]-p[1])+p[1];return p[0]=(p[0]-y)*f+y,p[2]=(p[2]-y)*f+y,p[1]=(p[1]-v)*f+v,p[3]=(p[3]-v)*f+v,s.setRanges(p),r.lastInputTime=Date.now(),n(),s.cameraChanged(),s.handleAnnotations(),s.relayoutCallback(),!0},!0),r}},82961:function(Q,z,t){var S=t(89298),k=t(78614);function l(d){this.scene=d,this.gl=d.gl,this.pixelRatio=d.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var T=l.prototype,b=["xaxis","yaxis"];T.merge=function(d){var s,e,i,r,n,a,o,u,p,c,x;for(this.titleEnable=!1,this.backgroundColor=k(d.plot_bgcolor),c=0;c<2;++c){var g=(s=b[c]).charAt(0);for(i=(e=d[this.scene[s]._name]).title.text===this.scene.fullLayout._dfltTitle[g]?"":e.title.text,x=0;x<=2;x+=2)this.labelEnable[c+x]=!1,this.labels[c+x]=i,this.labelColor[c+x]=k(e.title.font.color),this.labelFont[c+x]=e.title.font.family,this.labelSize[c+x]=e.title.font.size,this.labelPad[c+x]=this.getLabelPad(s,e),this.tickEnable[c+x]=!1,this.tickColor[c+x]=k((e.tickfont||{}).color),this.tickAngle[c+x]=e.tickangle==="auto"?0:Math.PI*-e.tickangle/180,this.tickPad[c+x]=this.getTickPad(e),this.tickMarkLength[c+x]=0,this.tickMarkWidth[c+x]=e.tickwidth||0,this.tickMarkColor[c+x]=k(e.tickcolor),this.borderLineEnable[c+x]=!1,this.borderLineColor[c+x]=k(e.linecolor),this.borderLineWidth[c+x]=e.linewidth||0;o=this.hasSharedAxis(e),n=this.hasAxisInDfltPos(s,e)&&!o,a=this.hasAxisInAltrPos(s,e)&&!o,r=e.mirror||!1,u=o?String(r).indexOf("all")!==-1:!!r,p=o?r==="allticks":String(r).indexOf("ticks")!==-1,n?this.labelEnable[c]=!0:a&&(this.labelEnable[c+2]=!0),n?this.tickEnable[c]=e.showticklabels:a&&(this.tickEnable[c+2]=e.showticklabels),(n||u)&&(this.borderLineEnable[c]=e.showline),(a||u)&&(this.borderLineEnable[c+2]=e.showline),(n||p)&&(this.tickMarkLength[c]=this.getTickMarkLength(e)),(a||p)&&(this.tickMarkLength[c+2]=this.getTickMarkLength(e)),this.gridLineEnable[c]=e.showgrid,this.gridLineColor[c]=k(e.gridcolor),this.gridLineWidth[c]=e.gridwidth,this.zeroLineEnable[c]=e.zeroline,this.zeroLineColor[c]=k(e.zerolinecolor),this.zeroLineWidth[c]=e.zerolinewidth}},T.hasSharedAxis=function(d){var s=this.scene,e=s.fullLayout._subplots.gl2d;return S.findSubplotsWithAxis(e,d).indexOf(s.id)!==0},T.hasAxisInDfltPos=function(d,s){var e=s.side;return d==="xaxis"?e==="bottom":d==="yaxis"?e==="left":void 0},T.hasAxisInAltrPos=function(d,s){var e=s.side;return d==="xaxis"?e==="top":d==="yaxis"?e==="right":void 0},T.getLabelPad=function(d,s){var e=1.5,i=s.title.font.size,r=s.showticklabels;return d==="xaxis"?s.side==="top"?i*(e+(r?1:0))-10:i*(e+(r?.5:0))-10:d==="yaxis"?s.side==="right"?10+i*(e+(r?1:.5)):10+i*(e+(r?.5:0)):void 0},T.getTickPad=function(d){return d.ticks==="outside"?10+d.ticklen:15},T.getTickMarkLength=function(d){if(!d.ticks)return 0;var s=d.ticklen;return d.ticks==="inside"?-s:s},Q.exports=function(d){return new l(d)}},4796:function(Q,z,t){var S=t(30962).overrideAll,k=t(92918),l=t(10820),T=t(77922),b=t(85555),d=t(93612),s=t(528),e=t(27659).NG;z.name="gl2d",z.attr=["xaxis","yaxis"],z.idRoot=["x","y"],z.idRegex=b.idRegex,z.attrRegex=b.attrRegex,z.attributes=t(89502),z.supplyLayoutDefaults=function(i,r,n){r._has("cartesian")||d.supplyLayoutDefaults(i,r,n)},z.layoutAttrOverrides=S(d.layoutAttributes,"plot","from-root"),z.baseLayoutAttrOverrides=S({plot_bgcolor:l.plot_bgcolor,hoverlabel:s.hoverlabel},"plot","nested"),z.plot=function(i){for(var r=i._fullLayout,n=i._fullData,a=r._subplots.gl2d,o=0;o<a.length;o++){var u=a[o],p=r._plots[u],c=e(n,"gl2d",u),x=p._scene2d;x===void 0&&(x=new k({id:u,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio},r),p._scene2d=x),x.plot(c,i.calcdata,r,i.layout)}},z.clean=function(i,r,n,a){for(var o=a._subplots.gl2d||[],u=0;u<o.length;u++){var p=o[u],c=a._plots[p];c._scene2d&&e(i,"gl2d",p).length===0&&(c._scene2d.destroy(),delete a._plots[p])}d.clean.apply(this,arguments)},z.drawFramework=function(i){i._context.staticPlot||d.drawFramework(i)},z.toSVG=function(i){for(var r=i._fullLayout,n=r._subplots.gl2d,a=0;a<n.length;a++){var o=r._plots[n[a]]._scene2d,u=o.toImage("png");r._glimages.append("svg:image").attr({xmlns:T.svg,"xlink:href":u,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),o.destroy()}},z.updateFx=function(i){for(var r=i._fullLayout,n=r._subplots.gl2d,a=0;a<n.length;a++)r._plots[n[a]]._scene2d.updateFx(r.dragmode)}},92918:function(Q,z,t){var S,k,l=t(73972),T=t(89298),b=t(30211),d=t(9330).gl_plot2d,s=t(9330).gl_spikes2d,e=t(9330).gl_select_box,i=t(40372),r=t(82961),n=t(75071),a=t(58617),o=t(99082),u=o.enforce,p=o.clean,c=t(71739).doAutoRange,x=t(64505),g=x.drawMode,f=x.selectMode,y=["xaxis","yaxis"],v=t(85555).SUBPLOT_PATTERN;function m(h,A){this.container=h.container,this.graphDiv=h.graphDiv,this.pixelRatio=h.plotGlPixelRatio||window.devicePixelRatio,this.id=h.id,this.staticPlot=!!h.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(A),this.makeFramework(),this.stopped||(this.glplotOptions=r(this),this.glplotOptions.merge(A),this.glplot=d(this.glplotOptions),this.camera=n(this),this.traces={},this.spikes=s(this.glplot),this.selectBox=e(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}Q.exports=m;var _=m.prototype;_.makeFramework=function(){if(this.staticPlot){if(!(k||(S=document.createElement("canvas"),k=i({canvas:S,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=S,this.gl=k}else{var h=this.container.querySelector(".gl-canvas-focus"),A=i({canvas:h,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!A)return a(this),void(this.stopped=!0);this.canvas=h,this.gl=A}var w=this.canvas;w.style.width="100%",w.style.height="100%",w.style.position="absolute",w.style.top="0px",w.style.left="0px",w.style["pointer-events"]="none",this.updateSize(w);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var L=this.mouseContainer=document.createElement("div");L.style.position="absolute",L.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var C=this.container;C.appendChild(E),C.appendChild(L);var P=this;L.addEventListener("mouseout",function(){P.isMouseOver=!1,P.unhover()}),L.addEventListener("mouseover",function(){P.isMouseOver=!0})},_.toImage=function(h){h||(h="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(S),this.updateSize(this.canvas);var A=this.glplot.gl,w=A.drawingBufferWidth,E=A.drawingBufferHeight;A.clearColor(1,1,1,0),A.clear(A.COLOR_BUFFER_BIT|A.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),A.bindFramebuffer(A.FRAMEBUFFER,null);var L=new Uint8Array(w*E*4);A.readPixels(0,0,w,E,A.RGBA,A.UNSIGNED_BYTE,L);for(var C=0,P=E-1;C<P;++C,--P)for(var D=0;D<w;++D)for(var G=0;G<4;++G){var I=L[4*(w*C+D)+G];L[4*(w*C+D)+G]=L[4*(w*P+D)+G],L[4*(w*P+D)+G]=I}var H=document.createElement("canvas");H.width=w,H.height=E;var N,F=H.getContext("2d",{willReadFrequently:!0}),V=F.createImageData(w,E);switch(V.data.set(L),F.putImageData(V,0,0),h){case"jpeg":N=H.toDataURL("image/jpeg");break;case"webp":N=H.toDataURL("image/webp");break;default:N=H.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(S),N},_.updateSize=function(h){h||(h=this.canvas);var A=this.pixelRatio,w=this.fullLayout,E=w.width,L=w.height,C=0|Math.ceil(A*E),P=0|Math.ceil(A*L);return h.width===C&&h.height===P||(h.width=C,h.height=P),h},_.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var h=[T.calcTicks(this.xaxis),T.calcTicks(this.yaxis)],A=0;A<2;++A)for(var w=0;w<h[A].length;++w)h[A][w].text=h[A][w].text+"";return h},_.updateRefs=function(h){this.fullLayout=h;var A=this.id.match(v),w="xaxis"+A[1],E="yaxis"+A[2];this.xaxis=this.fullLayout[w],this.yaxis=this.fullLayout[E]},_.relayoutCallback=function(){var h=this.graphDiv,A=this.xaxis,w=this.yaxis,E=h.layout,L={},C=L[A._name+".range"]=A.range.slice(),P=L[w._name+".range"]=w.range.slice();L[A._name+".autorange"]=A.autorange,L[w._name+".autorange"]=w.autorange,l.call("_storeDirectGUIEdit",h.layout,h._fullLayout._preGUI,L);var D=E[A._name];D.range=C,D.autorange=A.autorange;var G=E[w._name];G.range=P,G.autorange=w.autorange,L.lastInputTime=this.camera.lastInputTime,h.emit("plotly_relayout",L)},_.cameraChanged=function(){var h=this.camera;this.glplot.setDataBox(this.calcDataBox());var A=this.computeTickMarks();(function(w,E){for(var L=0;L<2;++L){var C=w[L],P=E[L];if(C.length!==P.length)return!0;for(var D=0;D<C.length;++D)if(C[D].x!==P[D].x)return!0}return!1})(A,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=A,this.glplotOptions.dataBox=h.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},_.handleAnnotations=function(){for(var h=this.graphDiv,A=this.fullLayout.annotations,w=0;w<A.length;w++){var E=A[w];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&l.getComponentMethod("annotations","drawOne")(h,w)}},_.destroy=function(){if(this.glplot){var h=this.traces;h&&Object.keys(h).map(function(A){h[A].dispose(),delete h[A]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},_.plot=function(h,A,w){var E=this.glplot;this.updateRefs(w),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(h,A),this.updateFx(w.dragmode);var L=w.width,C=w.height;this.updateSize(this.canvas);var P=this.glplotOptions;P.merge(w),P.screenBox=[0,0,L,C];var D={_fullLayout:{_axisConstraintGroups:w._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:w._size}};p(D,this.xaxis),p(D,this.yaxis);var G,I,H=w._size,N=this.xaxis.domain,F=this.yaxis.domain;for(P.viewBox=[H.l+N[0]*H.w,H.b+F[0]*H.h,L-H.r-(1-N[1])*H.w,C-H.t-(1-F[1])*H.h],this.mouseContainer.style.width=H.w*(N[1]-N[0])+"px",this.mouseContainer.style.height=H.h*(F[1]-F[0])+"px",this.mouseContainer.height=H.h*(F[1]-F[0]),this.mouseContainer.style.left=H.l+N[0]*H.w+"px",this.mouseContainer.style.top=H.t+(1-F[1])*H.h+"px",I=0;I<2;++I)(G=this[y[I]])._length=P.viewBox[I+2]-P.viewBox[I],c(this.graphDiv,G),G.setScale();u(D),P.ticks=this.computeTickMarks(),P.dataBox=this.calcDataBox(),P.merge(w),E.update(P),this.glplot.draw()},_.calcDataBox=function(){var h=this.xaxis,A=this.yaxis,w=h.range,E=A.range,L=h.r2l,C=A.r2l;return[L(w[0]),C(E[0]),L(w[1]),C(E[1])]},_.setRanges=function(h){var A=this.xaxis,w=this.yaxis,E=A.l2r,L=w.l2r;A.range=[E(h[0]),E(h[2])],w.range=[L(h[1]),L(h[3])]},_.updateTraces=function(h,A){var w,E,L,C=Object.keys(this.traces);this.fullData=h;e:for(w=0;w<C.length;w++){var P=C[w],D=this.traces[P];for(E=0;E<h.length;E++)if((L=h[E]).uid===P&&L.type===D.type)continue e;D.dispose(),delete this.traces[P]}for(w=0;w<h.length;w++){L=h[w];var G=A[w],I=this.traces[L.uid];I?I.update(L,G):(I=L._module.plot(this,L,G),this.traces[L.uid]=I)}this.glplot.objects.sort(function(H,N){return H._trace.index-N._trace.index})},_.updateFx=function(h){f(h)||g(h)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor=h==="pan"?"move":h==="zoom"?"crosshair":null},_.emitPointAction=function(h,A){for(var w,E=h.trace.uid,L=h.pointIndex,C=0;C<this.fullData.length;C++)this.fullData[C].uid===E&&(w=this.fullData[C]);var P={x:h.traceCoord[0],y:h.traceCoord[1],curveNumber:w.index,pointNumber:L,data:w._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};b.appendArrayPointValue(P,w,L),this.graphDiv.emit(A,{points:[P]})},_.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var h=this.glplot,A=this.camera,w=A.mouseListener,E=this.lastButtonState===1&&w.buttons===0,L=this.fullLayout;this.lastButtonState=w.buttons,this.cameraChanged();var C,P=w.x*h.pixelRatio,D=this.canvas.height-h.pixelRatio*w.y;if(A.boxEnabled&&L.dragmode==="zoom"){this.selectBox.enabled=!0;for(var G=this.selectBox.selectBox=[Math.min(A.boxStart[0],A.boxEnd[0]),Math.min(A.boxStart[1],A.boxEnd[1]),Math.max(A.boxStart[0],A.boxEnd[0]),Math.max(A.boxStart[1],A.boxEnd[1])],I=0;I<2;I++)A.boxStart[I]===A.boxEnd[I]&&(G[I]=h.dataBox[I],G[I+2]=h.dataBox[I+2]);h.setDirty()}else if(!A.panning&&this.isMouseOver){this.selectBox.enabled=!1;var H=L._size,N=this.xaxis.domain,F=this.yaxis.domain,V=(C=h.pick(P/h.pixelRatio+H.l+N[0]*H.w,D/h.pixelRatio-(H.t+(1-F[1])*H.h)))&&C.object._trace.handlePick(C);if(V&&E&&this.emitPointAction(V,"plotly_click"),C&&C.object._trace.hoverinfo!=="skip"&&L.hovermode&&V&&(!this.lastPickResult||this.lastPickResult.traceUid!==V.trace.uid||this.lastPickResult.dataCoord[0]!==V.dataCoord[0]||this.lastPickResult.dataCoord[1]!==V.dataCoord[1])){var q=V;this.lastPickResult={traceUid:V.trace?V.trace.uid:null,dataCoord:V.dataCoord.slice()},this.spikes.update({center:C.dataCoord}),q.screenCoord=[((h.viewBox[2]-h.viewBox[0])*(C.dataCoord[0]-h.dataBox[0])/(h.dataBox[2]-h.dataBox[0])+h.viewBox[0])/h.pixelRatio,(this.canvas.height-(h.viewBox[3]-h.viewBox[1])*(C.dataCoord[1]-h.dataBox[1])/(h.dataBox[3]-h.dataBox[1])-h.viewBox[1])/h.pixelRatio],this.emitPointAction(V,"plotly_hover");var te=this.fullData[q.trace.index]||{},$=q.pointIndex,W=b.castHoverinfo(te,L,$);if(W&&W!=="all"){var Z=W.split("+");Z.indexOf("x")===-1&&(q.traceCoord[0]=void 0),Z.indexOf("y")===-1&&(q.traceCoord[1]=void 0),Z.indexOf("z")===-1&&(q.traceCoord[2]=void 0),Z.indexOf("text")===-1&&(q.textLabel=void 0),Z.indexOf("name")===-1&&(q.name=void 0)}b.loneHover({x:q.screenCoord[0],y:q.screenCoord[1],xLabel:this.hoverFormatter("xaxis",q.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",q.traceCoord[1]),zLabel:q.traceCoord[2],text:q.textLabel,name:q.name,color:b.castHoverOption(te,$,"bgcolor")||q.color,borderColor:b.castHoverOption(te,$,"bordercolor"),fontFamily:b.castHoverOption(te,$,"font.family"),fontSize:b.castHoverOption(te,$,"font.size"),fontColor:b.castHoverOption(te,$,"font.color"),nameLength:b.castHoverOption(te,$,"namelength"),textAlign:b.castHoverOption(te,$,"align")},{container:this.svgContainer,gd:this.graphDiv})}}C||this.unhover(),h.draw()}},_.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),b.loneUnhover(this.svgContainer))},_.hoverFormatter=function(h,A){if(A!==void 0){var w=this[h];return T.tickText(w,w.c2l(A),"hover").text}}},58547:function(Q,z,t){var S=t(30962).overrideAll,k=t(528),l=t(33539),T=t(27659).NG,b=t(71828),d=t(77922),s="gl3d",e="scene";z.name=s,z.attr=e,z.idRoot=e,z.idRegex=z.attrRegex=b.counterRegex("scene"),z.attributes=t(59084),z.layoutAttributes=t(65500),z.baseLayoutAttrOverrides=S({hoverlabel:k.hoverlabel},"plot","nested"),z.supplyLayoutDefaults=t(24682),z.plot=function(i){for(var r=i._fullLayout,n=i._fullData,a=r._subplots[s],o=0;o<a.length;o++){var u=a[o],p=T(n,s,u),c=r[u],x=c.camera,g=c._scene;g||(g=new l({id:u,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio,camera:x},r),c._scene=g),g.viewInitial||(g.viewInitial={up:{x:x.up.x,y:x.up.y,z:x.up.z},eye:{x:x.eye.x,y:x.eye.y,z:x.eye.z},center:{x:x.center.x,y:x.center.y,z:x.center.z}}),g.plot(p,r,i.layout)}},z.clean=function(i,r,n,a){for(var o=a._subplots[s]||[],u=0;u<o.length;u++){var p=o[u];!r[p]&&a[p]._scene&&(a[p]._scene.destroy(),a._infolayer&&a._infolayer.selectAll(".annotation-"+p).remove())}},z.toSVG=function(i){for(var r=i._fullLayout,n=r._subplots[s],a=r._size,o=0;o<n.length;o++){var u=r[n[o]],p=u.domain,c=u._scene,x=c.toImage("png");r._glimages.append("svg:image").attr({xmlns:d.svg,"xlink:href":x,x:a.l+a.w*p.x[0],y:a.t+a.h*(1-p.y[1]),width:a.w*(p.x[1]-p.x[0]),height:a.h*(p.y[1]-p.y[0]),preserveAspectRatio:"none"}),c.destroy()}},z.cleanId=function(i){if(i.match(/^scene[0-9]*$/)){var r=i.substr(5);return r==="1"&&(r=""),e+r}},z.updateFx=function(i){for(var r=i._fullLayout,n=r._subplots[s],a=0;a<n.length;a++)r[n[a]]._scene.updateFx(r.dragmode,r.hovermode)}},59084:function(Q){Q.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},77894:function(Q,z,t){var S=t(7901),k=t(13838),l=t(1426).extendFlat,T=t(30962).overrideAll;Q.exports=T({visible:k.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:S.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:k.color,categoryorder:k.categoryorder,categoryarray:k.categoryarray,title:{text:k.title.text,font:k.title.font},type:l({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorange:k.autorange,rangemode:k.rangemode,range:l({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,mirror:k.mirror,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,tickfont:k.tickfont,tickangle:k.tickangle,tickprefix:k.tickprefix,showtickprefix:k.showtickprefix,ticksuffix:k.ticksuffix,showticksuffix:k.showticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickformat:k.tickformat,tickformatstops:k.tickformatstops,hoverformat:k.hoverformat,showline:k.showline,linecolor:k.linecolor,linewidth:k.linewidth,showgrid:k.showgrid,gridcolor:l({},k.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:k.gridwidth,zeroline:k.zeroline,zerolinecolor:k.zerolinecolor,zerolinewidth:k.zerolinewidth,_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}},"plot","from-root")},3277:function(Q,z,t){var S=t(84267).mix,k=t(71828),l=t(44467),T=t(77894),b=t(951),d=t(71453),s=["xaxis","yaxis","zaxis"];Q.exports=function(e,i,r){var n,a;function o(c,x){return k.coerce(n,a,T,c,x)}for(var u=0;u<s.length;u++){var p=s[u];n=e[p]||{},(a=l.newContainer(i,p))._id=p[0]+r.scene,a._name=p,b(n,a,o,r),d(n,a,o,{font:r.font,letter:p[0],data:r.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:r.bgColor,calendar:r.calendar},r.fullLayout),o("gridcolor",S(a.color,r.bgColor,72.72727272727273).toRgbString()),o("title.text",p[0]),a.setScale=k.noop,o("showspikes")&&(o("spikesides"),o("spikethickness"),o("spikecolor",a.color)),o("showaxeslabels"),o("showbackground")&&o("backgroundcolor")}}},30422:function(Q,z,t){var S=t(78614),k=t(71828),l=["xaxis","yaxis","zaxis"];function T(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}T.prototype.merge=function(b,d){for(var s=this,e=0;e<3;++e){var i=d[l[e]];i.visible?(s.labels[e]=b._meta?k.templateString(i.title.text,b._meta):i.title.text,"font"in i.title&&(i.title.font.color&&(s.labelColor[e]=S(i.title.font.color)),i.title.font.family&&(s.labelFont[e]=i.title.font.family),i.title.font.size&&(s.labelSize[e]=i.title.font.size)),"showline"in i&&(s.lineEnable[e]=i.showline),"linecolor"in i&&(s.lineColor[e]=S(i.linecolor)),"linewidth"in i&&(s.lineWidth[e]=i.linewidth),"showgrid"in i&&(s.gridEnable[e]=i.showgrid),"gridcolor"in i&&(s.gridColor[e]=S(i.gridcolor)),"gridwidth"in i&&(s.gridWidth[e]=i.gridwidth),i.type==="log"?s.zeroEnable[e]=!1:"zeroline"in i&&(s.zeroEnable[e]=i.zeroline),"zerolinecolor"in i&&(s.zeroLineColor[e]=S(i.zerolinecolor)),"zerolinewidth"in i&&(s.zeroLineWidth[e]=i.zerolinewidth),"ticks"in i&&i.ticks?s.lineTickEnable[e]=!0:s.lineTickEnable[e]=!1,"ticklen"in i&&(s.lineTickLength[e]=s._defaultLineTickLength[e]=i.ticklen),"tickcolor"in i&&(s.lineTickColor[e]=S(i.tickcolor)),"tickwidth"in i&&(s.lineTickWidth[e]=i.tickwidth),"tickangle"in i&&(s.tickAngle[e]=i.tickangle==="auto"?-3600:Math.PI*-i.tickangle/180),"showticklabels"in i&&(s.tickEnable[e]=i.showticklabels),"tickfont"in i&&(i.tickfont.color&&(s.tickColor[e]=S(i.tickfont.color)),i.tickfont.family&&(s.tickFont[e]=i.tickfont.family),i.tickfont.size&&(s.tickSize[e]=i.tickfont.size)),"mirror"in i?["ticks","all","allticks"].indexOf(i.mirror)!==-1?(s.lineTickMirror[e]=!0,s.lineMirror[e]=!0):i.mirror===!0?(s.lineTickMirror[e]=!1,s.lineMirror[e]=!0):(s.lineTickMirror[e]=!1,s.lineMirror[e]=!1):s.lineMirror[e]=!1,"showbackground"in i&&i.showbackground!==!1?(s.backgroundEnable[e]=!0,s.backgroundColor[e]=S(i.backgroundcolor)):s.backgroundEnable[e]=!1):(s.tickEnable[e]=!1,s.labelEnable[e]=!1,s.lineEnable[e]=!1,s.lineTickEnable[e]=!1,s.gridEnable[e]=!1,s.zeroEnable[e]=!1,s.backgroundEnable[e]=!1)}},Q.exports=function(b,d){var s=new T;return s.merge(b,d),s}},24682:function(Q,z,t){var S=t(71828),k=t(7901),l=t(73972),T=t(49119),b=t(3277),d=t(65500),s=t(27659).NG,e="gl3d";function i(r,n,a,o){for(var u=a("bgcolor"),p=k.combine(u,o.paper_bgcolor),c=["up","center","eye"],x=0;x<c.length;x++)a("camera."+c[x]+".x"),a("camera."+c[x]+".y"),a("camera."+c[x]+".z");a("camera.projection.type");var g=!!a("aspectratio.x")&&!!a("aspectratio.y")&&!!a("aspectratio.z"),f=a("aspectmode",g?"manual":"auto");g||(r.aspectratio=n.aspectratio={x:1,y:1,z:1},f==="manual"&&(n.aspectmode="auto"),r.aspectmode=n.aspectmode);var y=s(o.fullData,e,o.id);b(r,n,{font:o.font,scene:o.id,data:y,bgColor:p,calendar:o.calendar,autotypenumbersDflt:o.autotypenumbersDflt,fullLayout:o.fullLayout}),l.getComponentMethod("annotations3d","handleDefaults")(r,n,o);var v=o.getDfltFromLayout("dragmode");if(v!==!1&&!v)if(v="orbit",r.camera&&r.camera.up){var m=r.camera.up.x,_=r.camera.up.y,h=r.camera.up.z;h!==0&&(m&&_&&h?h/Math.sqrt(m*m+_*_+h*h)>.999&&(v="turntable"):v="turntable")}else v="turntable";a("dragmode",v),a("hovermode",o.getDfltFromLayout("hovermode"))}Q.exports=function(r,n,a){var o=n._basePlotModules.length>1;T(r,n,a,{type:e,attributes:d,handleDefaults:i,fullLayout:n,font:n.font,fullData:a,getDfltFromLayout:function(u){if(!o)return S.validate(r[u],d[u])?r[u]:void 0},autotypenumbersDflt:n.autotypenumbers,paper_bgcolor:n.paper_bgcolor,calendar:n.calendar})}},65500:function(Q,z,t){var S=t(77894),k=t(27670).Y,l=t(1426).extendFlat,T=t(71828).counterRegex;function b(d,s,e){return{x:{valType:"number",dflt:d,editType:"camera"},y:{valType:"number",dflt:s,editType:"camera"},z:{valType:"number",dflt:e,editType:"camera"},editType:"camera"}}Q.exports={_arrayAttrRegexps:[T("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:l(b(0,0,1),{}),center:l(b(0,0,0),{}),eye:l(b(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:k({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:S,yaxis:S,zaxis:S,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},13133:function(Q,z,t){var S=t(78614),k=["xaxis","yaxis","zaxis"];function l(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}l.prototype.merge=function(T){for(var b=0;b<3;++b){var d=T[k[b]];d.visible?(this.enabled[b]=d.showspikes,this.colors[b]=S(d.spikecolor),this.drawSides[b]=d.spikesides,this.lineWidth[b]=d.spikethickness):(this.enabled[b]=!1,this.drawSides[b]=!1)}},Q.exports=function(T){var b=new l;return b.merge(T),b}},96085:function(Q,z,t){Q.exports=function(b){for(var d=b.axesOptions,s=b.glplot.axesPixels,e=b.fullSceneLayout,i=[[],[],[]],r=0;r<3;++r){var n=e[l[r]];if(n._length=(s[r].hi-s[r].lo)*s[r].pixelsPerDataUnit/b.dataScale[r],Math.abs(n._length)===1/0||isNaN(n._length))i[r]=[];else{n._input_range=n.range.slice(),n.range[0]=s[r].lo/b.dataScale[r],n.range[1]=s[r].hi/b.dataScale[r],n._m=1/(b.dataScale[r]*s[r].pixelsPerDataUnit),n.range[0]===n.range[1]&&(n.range[0]-=1,n.range[1]+=1);var a=n.tickmode;if(n.tickmode==="auto"){n.tickmode="linear";var o=n.nticks||k.constrain(n._length/40,4,9);S.autoTicks(n,Math.abs(n.range[1]-n.range[0])/o)}for(var u=S.calcTicks(n,{msUTC:!0}),p=0;p<u.length;++p)u[p].x=u[p].x*b.dataScale[r],n.type==="date"&&(u[p].text=u[p].text.replace(/\<br\>/g," "));i[r]=u,n.tickmode=a}}for(d.ticks=i,r=0;r<3;++r)for(T[r]=.5*(b.glplot.bounds[0][r]+b.glplot.bounds[1][r]),p=0;p<2;++p)d.bounds[p][r]=b.glplot.bounds[p][r];b.contourLevels=function(c){for(var x=new Array(3),g=0;g<3;++g){for(var f=c[g],y=new Array(f.length),v=0;v<f.length;++v)y[v]=f[v].x;x[g]=y}return x}(i)};var S=t(89298),k=t(71828),l=["xaxis","yaxis","zaxis"],T=[0,0,0]},63538:function(Q){function z(t,S){var k,l,T=[0,0,0,0];for(k=0;k<4;++k)for(l=0;l<4;++l)T[l]+=t[4*k+l]*S[k];return T}Q.exports=function(t,S){return z(t.projection,z(t.view,z(t.model,[S[0],S[1],S[2],1])))}},33539:function(Q,z,t){var S,k,l=t(9330).gl_plot3d,T=l.createCamera,b=l.createScene,d=t(40372),s=t(38520),e=t(73972),i=t(71828),r=i.preserveDrawingBuffer(),n=t(89298),a=t(30211),o=t(78614),u=t(58617),p=t(63538),c=t(30422),x=t(13133),g=t(96085),f=!1;function y(A,w){var E=document.createElement("div"),L=A.container;this.graphDiv=A.graphDiv;var C=document.createElementNS("http://www.w3.org/2000/svg","svg");C.style.position="absolute",C.style.top=C.style.left="0px",C.style.width=C.style.height="100%",C.style["z-index"]=20,C.style["pointer-events"]="none",E.appendChild(C),this.svgContainer=C,E.id=A.id,E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",L.appendChild(E),this.fullLayout=w,this.id=A.id||"scene",this.fullSceneLayout=w[this.id],this.plotArgs=[[],{},{}],this.axesOptions=c(w,w[this.id]),this.spikeOptions=x(w[this.id]),this.container=E,this.staticMode=!!A.staticPlot,this.pixelRatio=this.pixelRatio||A.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=e.getComponentMethod("annotations3d","convert"),this.drawAnnotations=e.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var v=y.prototype;v.prepareOptions=function(){var A=this,w={canvas:A.canvas,gl:A.gl,glOptions:{preserveDrawingBuffer:r,premultipliedAlpha:!0,antialias:!0},container:A.container,axes:A.axesOptions,spikes:A.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:A.camera,pixelRatio:A.pixelRatio};if(A.staticMode){if(!(k||(S=document.createElement("canvas"),k=d({canvas:S,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");w.gl=k,w.canvas=S}return w};var m=!0;v.tryCreatePlot=function(){var A=this,w=A.prepareOptions(),E=!0;try{A.glplot=b(w)}catch{if(A.staticMode||!m||r)E=!1;else{i.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{r=w.glOptions.preserveDrawingBuffer=!0,A.glplot=b(w)}catch{r=w.glOptions.preserveDrawingBuffer=!1,E=!1}}}return m=!1,E},v.initializeGLCamera=function(){var A=this,w=A.fullSceneLayout.camera,E=w.projection.type==="orthographic";A.camera=T(A.container,{center:[w.center.x,w.center.y,w.center.z],eye:[w.eye.x,w.eye.y,w.eye.z],up:[w.up.x,w.up.y,w.up.z],_ortho:E,zoomMin:.01,zoomMax:100,mode:"orbit"})},v.initializeGLPlot=function(){var A=this;if(A.initializeGLCamera(),!A.tryCreatePlot())return u(A);A.traces={},A.make4thDimension();var w=A.graphDiv,E=w.layout,L=function(){var P={};return A.isCameraChanged(E)&&(P[A.id+".camera"]=A.getCamera()),A.isAspectChanged(E)&&(P[A.id+".aspectratio"]=A.glplot.getAspectratio(),E[A.id].aspectmode!=="manual"&&(A.fullSceneLayout.aspectmode=E[A.id].aspectmode=P[A.id+".aspectmode"]="manual")),P},C=function(P){if(P.fullSceneLayout.dragmode!==!1){var D=L();P.saveLayout(E),P.graphDiv.emit("plotly_relayout",D)}};return A.glplot.canvas&&(A.glplot.canvas.addEventListener("mouseup",function(){C(A)}),A.glplot.canvas.addEventListener("touchstart",function(){f=!0}),A.glplot.canvas.addEventListener("wheel",function(P){if(w._context._scrollZoom.gl3d){if(A.camera._ortho){var D=P.deltaX>P.deltaY?1.1:.9090909090909091,G=A.glplot.getAspectratio();A.glplot.setAspectratio({x:D*G.x,y:D*G.y,z:D*G.z})}C(A)}},!!s&&{passive:!1}),A.glplot.canvas.addEventListener("mousemove",function(){if(A.fullSceneLayout.dragmode!==!1&&A.camera.mouseListener.buttons!==0){var P=L();A.graphDiv.emit("plotly_relayouting",P)}}),A.staticMode||A.glplot.canvas.addEventListener("webglcontextlost",function(P){w&&w.emit&&w.emit("plotly_webglcontextlost",{event:P,layer:A.id})},!1)),A.glplot.oncontextloss=function(){A.recoverContext()},A.glplot.onrender=function(){A.render()},!0},v.render=function(){var A,w=this,E=w.graphDiv,L=w.svgContainer,C=w.container.getBoundingClientRect();E._fullLayout._calcInverseTransform(E);var P=E._fullLayout._invScaleX,D=E._fullLayout._invScaleY,G=C.width*P,I=C.height*D;L.setAttributeNS(null,"viewBox","0 0 "+G+" "+I),L.setAttributeNS(null,"width",G),L.setAttributeNS(null,"height",I),g(w),w.glplot.axes.update(w.axesOptions);for(var H=Object.keys(w.traces),N=null,F=w.glplot.selection,V=0;V<H.length;++V)(A=w.traces[H[V]]).data.hoverinfo!=="skip"&&A.handlePick(F)&&(N=A),A.setContourLevels&&A.setContourLevels();function q(we,xe,ge){var Oe=w.fullSceneLayout[we+"axis"];return Oe.type!=="log"&&(xe=Oe.d2l(xe)),n.hoverLabelText(Oe,xe,ge)}if(N!==null){var te=p(w.glplot.cameraParams,F.dataCoordinate);A=N.data;var $,W=E._fullData[A.index],Z=F.index,J={xLabel:q("x",F.traceCoordinate[0],A.xhoverformat),yLabel:q("y",F.traceCoordinate[1],A.yhoverformat),zLabel:q("z",F.traceCoordinate[2],A.zhoverformat)},ee=a.castHoverinfo(W,w.fullLayout,Z),re=(ee||"").split("+"),ae=ee&&ee==="all";W.hovertemplate||ae||(re.indexOf("x")===-1&&(J.xLabel=void 0),re.indexOf("y")===-1&&(J.yLabel=void 0),re.indexOf("z")===-1&&(J.zLabel=void 0),re.indexOf("text")===-1&&(F.textLabel=void 0),re.indexOf("name")===-1&&(N.name=void 0));var oe=[];A.type==="cone"||A.type==="streamtube"?(J.uLabel=q("x",F.traceCoordinate[3],A.uhoverformat),(ae||re.indexOf("u")!==-1)&&oe.push("u: "+J.uLabel),J.vLabel=q("y",F.traceCoordinate[4],A.vhoverformat),(ae||re.indexOf("v")!==-1)&&oe.push("v: "+J.vLabel),J.wLabel=q("z",F.traceCoordinate[5],A.whoverformat),(ae||re.indexOf("w")!==-1)&&oe.push("w: "+J.wLabel),J.normLabel=F.traceCoordinate[6].toPrecision(3),(ae||re.indexOf("norm")!==-1)&&oe.push("norm: "+J.normLabel),A.type==="streamtube"&&(J.divergenceLabel=F.traceCoordinate[7].toPrecision(3),(ae||re.indexOf("divergence")!==-1)&&oe.push("divergence: "+J.divergenceLabel)),F.textLabel&&oe.push(F.textLabel),$=oe.join("<br>")):A.type==="isosurface"||A.type==="volume"?(J.valueLabel=n.hoverLabelText(w._mockAxis,w._mockAxis.d2l(F.traceCoordinate[3]),A.valuehoverformat),oe.push("value: "+J.valueLabel),F.textLabel&&oe.push(F.textLabel),$=oe.join("<br>")):$=F.textLabel;var ce={x:F.traceCoordinate[0],y:F.traceCoordinate[1],z:F.traceCoordinate[2],data:W._input,fullData:W,curveNumber:W.index,pointNumber:Z};a.appendArrayPointValue(ce,W,Z),A._module.eventData&&(ce=W._module.eventData(ce,F,W,{},Z));var pe={points:[ce]};if(w.fullSceneLayout.hovermode){var ve=[];a.loneHover({trace:W,x:(.5+.5*te[0]/te[3])*G,y:(.5-.5*te[1]/te[3])*I,xLabel:J.xLabel,yLabel:J.yLabel,zLabel:J.zLabel,text:$,name:N.name,color:a.castHoverOption(W,Z,"bgcolor")||N.color,borderColor:a.castHoverOption(W,Z,"bordercolor"),fontFamily:a.castHoverOption(W,Z,"font.family"),fontSize:a.castHoverOption(W,Z,"font.size"),fontColor:a.castHoverOption(W,Z,"font.color"),nameLength:a.castHoverOption(W,Z,"namelength"),textAlign:a.castHoverOption(W,Z,"align"),hovertemplate:i.castOption(W,Z,"hovertemplate"),hovertemplateLabels:i.extendFlat({},ce,J),eventData:[ce]},{container:L,gd:E,inOut_bbox:ve}),ce.bbox=ve[0]}F.distance<5&&(F.buttons||f)?E.emit("plotly_click",pe):E.emit("plotly_hover",pe),this.oldEventData=pe}else a.loneUnhover(L),this.oldEventData&&E.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;w.drawAnnotations(w)},v.recoverContext=function(){var A=this;A.glplot.dispose();var w=function(){A.glplot.gl.isContextLost()?requestAnimationFrame(w):A.initializeGLPlot()?A.plot.apply(A,A.plotArgs):i.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(w)};var _=["xaxis","yaxis","zaxis"];function h(A,w,E){for(var L=A.fullSceneLayout,C=0;C<3;C++){var P=_[C],D=P.charAt(0),G=L[P],I=w[D],H=w[D+"calendar"],N=w["_"+D+"length"];if(i.isArrayOrTypedArray(I))for(var F,V=0;V<(N||I.length);V++)if(i.isArrayOrTypedArray(I[V]))for(var q=0;q<I[V].length;++q)F=G.d2l(I[V][q],0,H),!isNaN(F)&&isFinite(F)&&(E[0][C]=Math.min(E[0][C],F),E[1][C]=Math.max(E[1][C],F));else F=G.d2l(I[V],0,H),!isNaN(F)&&isFinite(F)&&(E[0][C]=Math.min(E[0][C],F),E[1][C]=Math.max(E[1][C],F));else E[0][C]=Math.min(E[0][C],0),E[1][C]=Math.max(E[1][C],N-1)}}v.plot=function(A,w,E){var L=this;if(L.plotArgs=[A,w,E],!L.glplot.contextLost){var C,P,D,G,I,H,N=w[L.id],F=E[L.id];L.fullLayout=w,L.fullSceneLayout=N,L.axesOptions.merge(w,N),L.spikeOptions.merge(N),L.setViewport(N),L.updateFx(N.dragmode,N.hovermode),L.camera.enableWheel=L.graphDiv._context._scrollZoom.gl3d,L.glplot.setClearColor(o(N.bgcolor)),L.setConvert(I),A?Array.isArray(A)||(A=[A]):A=[];var V=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(D=0;D<A.length;++D)(C=A[D]).visible===!0&&C._length!==0&&h(this,C,V);(function(be,De){for(var Ue=be.fullSceneLayout,he=Ue.annotations||[],ke=0;ke<3;ke++)for(var _e=_[ke],Ce=_e.charAt(0),Fe=Ue[_e],Re=0;Re<he.length;Re++){var He=he[Re];if(He.visible){var Ge=Fe.r2l(He[Ce]);!isNaN(Ge)&&isFinite(Ge)&&(De[0][ke]=Math.min(De[0][ke],Ge),De[1][ke]=Math.max(De[1][ke],Ge))}}})(this,V);var q=[1,1,1];for(G=0;G<3;++G)V[1][G]===V[0][G]?q[G]=1:q[G]=1/(V[1][G]-V[0][G]);for(L.dataScale=q,L.convertAnnotations(this),D=0;D<A.length;++D)(C=A[D]).visible===!0&&C._length!==0&&((P=L.traces[C.uid])?P.data.type===C.type?P.update(C):(P.dispose(),P=C._module.plot(this,C),L.traces[C.uid]=P):(P=C._module.plot(this,C),L.traces[C.uid]=P),P.name=C.name);var te=Object.keys(L.traces);e:for(D=0;D<te.length;++D){for(G=0;G<A.length;++G)if(A[G].uid===te[D]&&A[G].visible===!0&&A[G]._length!==0)continue e;(P=L.traces[te[D]]).dispose(),delete L.traces[te[D]]}L.glplot.objects.sort(function(be,De){return be._trace.data.index-De._trace.data.index});var $,W=[[0,0,0],[0,0,0]],Z=[],J={};for(D=0;D<3;++D){if((H=(I=N[_[D]]).type)in J?(J[H].acc*=q[D],J[H].count+=1):J[H]={acc:q[D],count:1},I.autorange){W[0][D]=1/0,W[1][D]=-1/0;var ee=L.glplot.objects,re=L.fullSceneLayout.annotations||[],ae=I._name.charAt(0);for(G=0;G<ee.length;G++){var oe=ee[G],ce=oe.bounds,pe=oe._trace.data._pad||0;oe.constructor.name==="ErrorBars"&&I._lowerLogErrorBound?W[0][D]=Math.min(W[0][D],I._lowerLogErrorBound):W[0][D]=Math.min(W[0][D],ce[0][D]/q[D]-pe),W[1][D]=Math.max(W[1][D],ce[1][D]/q[D]+pe)}for(G=0;G<re.length;G++){var ve=re[G];if(ve.visible){var we=I.r2l(ve[ae]);W[0][D]=Math.min(W[0][D],we),W[1][D]=Math.max(W[1][D],we)}}if("rangemode"in I&&I.rangemode==="tozero"&&(W[0][D]=Math.min(W[0][D],0),W[1][D]=Math.max(W[1][D],0)),W[0][D]>W[1][D])W[0][D]=-1,W[1][D]=1;else{var xe=W[1][D]-W[0][D];W[0][D]-=xe/32,W[1][D]+=xe/32}if(I.autorange==="reversed"){var ge=W[0][D];W[0][D]=W[1][D],W[1][D]=ge}}else{var Oe=I.range;W[0][D]=I.r2l(Oe[0]),W[1][D]=I.r2l(Oe[1])}W[0][D]===W[1][D]&&(W[0][D]-=1,W[1][D]+=1),Z[D]=W[1][D]-W[0][D],L.glplot.setBounds(D,{min:W[0][D]*q[D],max:W[1][D]*q[D]})}var Ae=N.aspectmode;if(Ae==="cube")$=[1,1,1];else if(Ae==="manual"){var Te=N.aspectratio;$=[Te.x,Te.y,Te.z]}else{if(Ae!=="auto"&&Ae!=="data")throw new Error("scene.js aspectRatio was not one of the enumerated types");var se=[1,1,1];for(D=0;D<3;++D){var le=J[H=(I=N[_[D]]).type];se[D]=Math.pow(le.acc,1/le.count)/q[D]}$=Ae==="data"||Math.max.apply(null,se)/Math.min.apply(null,se)<=4?se:[1,1,1]}N.aspectratio.x=F.aspectratio.x=$[0],N.aspectratio.y=F.aspectratio.y=$[1],N.aspectratio.z=F.aspectratio.z=$[2],L.glplot.setAspectratio(N.aspectratio),L.viewInitial.aspectratio||(L.viewInitial.aspectratio={x:N.aspectratio.x,y:N.aspectratio.y,z:N.aspectratio.z}),L.viewInitial.aspectmode||(L.viewInitial.aspectmode=N.aspectmode);var ne=N.domain||null,me=w._size||null;if(ne&&me){var Ee=L.container.style;Ee.position="absolute",Ee.left=me.l+ne.x[0]*me.w+"px",Ee.top=me.t+(1-ne.y[1])*me.h+"px",Ee.width=me.w*(ne.x[1]-ne.x[0])+"px",Ee.height=me.h*(ne.y[1]-ne.y[0])+"px"}L.glplot.redraw()}},v.destroy=function(){var A=this;A.glplot&&(A.camera.mouseListener.enabled=!1,A.container.removeEventListener("wheel",A.camera.wheelListener),A.camera=null,A.glplot.dispose(),A.container.parentNode.removeChild(A.container),A.glplot=null)},v.getCamera=function(){var A,w=this;return w.camera.view.recalcMatrix(w.camera.view.lastT()),{up:{x:(A=w.camera).up[0],y:A.up[1],z:A.up[2]},center:{x:A.center[0],y:A.center[1],z:A.center[2]},eye:{x:A.eye[0],y:A.eye[1],z:A.eye[2]},projection:{type:A._ortho===!0?"orthographic":"perspective"}}},v.setViewport=function(A){var w,E=this,L=A.camera;E.camera.lookAt.apply(this,[[(w=L).eye.x,w.eye.y,w.eye.z],[w.center.x,w.center.y,w.center.z],[w.up.x,w.up.y,w.up.z]]),E.glplot.setAspectratio(A.aspectratio),L.projection.type==="orthographic"!==E.camera._ortho&&(E.glplot.redraw(),E.glplot.clearRGBA(),E.glplot.dispose(),E.initializeGLPlot())},v.isCameraChanged=function(A){var w=this.getCamera(),E=i.nestedProperty(A,this.id+".camera").get();function L(G,I,H,N){var F=["up","center","eye"],V=["x","y","z"];return I[F[H]]&&G[F[H]][V[N]]===I[F[H]][V[N]]}var C=!1;if(E===void 0)C=!0;else{for(var P=0;P<3;P++)for(var D=0;D<3;D++)if(!L(w,E,P,D)){C=!0;break}(!E.projection||w.projection&&w.projection.type!==E.projection.type)&&(C=!0)}return C},v.isAspectChanged=function(A){var w=this.glplot.getAspectratio(),E=i.nestedProperty(A,this.id+".aspectratio").get();return E===void 0||E.x!==w.x||E.y!==w.y||E.z!==w.z},v.saveLayout=function(A){var w,E,L,C,P,D,G=this,I=G.fullLayout,H=G.isCameraChanged(A),N=G.isAspectChanged(A),F=H||N;if(F){var V={};H&&(w=G.getCamera(),L=(E=i.nestedProperty(A,G.id+".camera")).get(),V[G.id+".camera"]=L),N&&(C=G.glplot.getAspectratio(),D=(P=i.nestedProperty(A,G.id+".aspectratio")).get(),V[G.id+".aspectratio"]=D),e.call("_storeDirectGUIEdit",A,I._preGUI,V),H&&(E.set(w),i.nestedProperty(I,G.id+".camera").set(w)),N&&(P.set(C),i.nestedProperty(I,G.id+".aspectratio").set(C),G.glplot.redraw())}return F},v.updateFx=function(A,w){var E=this,L=E.camera;if(L)if(A==="orbit")L.mode="orbit",L.keyBindingMode="rotate";else if(A==="turntable"){L.up=[0,0,1],L.mode="turntable",L.keyBindingMode="rotate";var C=E.graphDiv,P=C._fullLayout,D=E.fullSceneLayout.camera,G=D.up.x,I=D.up.y,H=D.up.z;if(H/Math.sqrt(G*G+I*I+H*H)<.999){var N=E.id+".camera.up",F={x:0,y:0,z:1},V={};V[N]=F;var q=C.layout;e.call("_storeDirectGUIEdit",q,P._preGUI,V),D.up=F,i.nestedProperty(q,N).set(F)}}else L.keyBindingMode=A;E.fullSceneLayout.hovermode=w},v.toImage=function(A){var w=this;A||(A="png"),w.staticMode&&w.container.appendChild(S),w.glplot.redraw();var E=w.glplot.gl,L=E.drawingBufferWidth,C=E.drawingBufferHeight;E.bindFramebuffer(E.FRAMEBUFFER,null);var P=new Uint8Array(L*C*4);E.readPixels(0,0,L,C,E.RGBA,E.UNSIGNED_BYTE,P),function(N,F,V){for(var q=0,te=V-1;q<te;++q,--te)for(var $=0;$<F;++$)for(var W=0;W<4;++W){var Z=4*(F*q+$)+W,J=4*(F*te+$)+W,ee=N[Z];N[Z]=N[J],N[J]=ee}}(P,L,C),function(N,F,V){for(var q=0;q<V;++q)for(var te=0;te<F;++te){var $=4*(F*q+te),W=N[$+3];if(W>0)for(var Z=255/W,J=0;J<3;++J)N[$+J]=Math.min(Z*N[$+J],255)}}(P,L,C);var D=document.createElement("canvas");D.width=L,D.height=C;var G,I=D.getContext("2d",{willReadFrequently:!0}),H=I.createImageData(L,C);switch(H.data.set(P),I.putImageData(H,0,0),A){case"jpeg":G=D.toDataURL("image/jpeg");break;case"webp":G=D.toDataURL("image/webp");break;default:G=D.toDataURL("image/png")}return w.staticMode&&w.container.removeChild(S),G},v.setConvert=function(){for(var A=0;A<3;A++){var w=this.fullSceneLayout[_[A]];n.setConvert(w,this.fullLayout),w.setScale=i.noop}},v.make4thDimension=function(){var A=this,w=A.graphDiv._fullLayout;A._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},n.setConvert(A._mockAxis,w)},Q.exports=y},90060:function(Q){Q.exports=function(z,t,S,k){k=k||z.length;for(var l=new Array(k),T=0;T<k;T++)l[T]=[z[T],t[T],S[T]];return l}},10820:function(Q,z,t){var S=t(41940),k=t(85594),l=t(22399),T=t(29241),b=t(53777),d=t(35025),s=t(1426).extendFlat,e=S({editType:"calc"});e.family.dflt='"Open Sans", verdana, arial, sans-serif',e.size.dflt=12,e.color.dflt=l.defaultLine,Q.exports={font:e,title:{text:{valType:"string",editType:"layoutstyle"},font:S({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:s(d({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:l.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:l.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:l.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:T.newshape,activeshape:T.activeshape,newselection:b.newselection,activeselection:b.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:s({},k.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:S({editType:"layoutstyle"})}}},77734:function(Q,z,t){var S=t(78607),k="1.10.1",l=' <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',T=[' <a target="_blank" href="https://carto.com/">Carto</a>',l].join(" "),b=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),d={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:l,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:b,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:b,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},s=S(d);Q.exports={requiredVersion:k,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:d,styleValuesNonMapbox:s,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+k+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",s.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},13056:function(Q,z,t){var S=t(71828);Q.exports=function(k,l){var T=k.split(" "),b=T[0],d=T[1],s=S.isArrayOrTypedArray(l)?S.mean(l):l,e=.5+s/100,i=1.5+s/100,r=["",""],n=[0,0];switch(b){case"top":r[0]="top",n[1]=-i;break;case"bottom":r[0]="bottom",n[1]=i}switch(d){case"left":r[1]="right",n[0]=-e;break;case"right":r[1]="left",n[0]=e}return{anchor:r[0]&&r[1]?r.join("-"):r[0]?r[0]:r[1]?r[1]:"center",offset:n}}},50101:function(Q,z,t){var S=t(44517),k=t(71828),l=k.strTranslate,T=k.strScale,b=t(27659).AU,d=t(77922),s=t(39898),e=t(91424),i=t(63893),r=t(10481),n="mapbox",a=z.constants=t(77734);function o(u){return typeof u=="string"&&(a.styleValuesMapbox.indexOf(u)!==-1||u.indexOf("mapbox://")===0)}z.name=n,z.attr="subplot",z.idRoot=n,z.idRegex=z.attrRegex=k.counterRegex(n),z.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},z.layoutAttributes=t(23585),z.supplyLayoutDefaults=t(77882),z.plot=function(u){var p=u._fullLayout,c=u.calcdata,x=p._subplots[n];if(S.version!==a.requiredVersion)throw new Error(a.wrongVersionErrorMsg);var g=function(h,A){var w=h._fullLayout;if(h._context.mapboxAccessToken==="")return"";for(var E=[],L=[],C=!1,P=!1,D=0;D<A.length;D++){var G=w[A[D]],I=G.accesstoken;o(G.style)&&(I?k.pushUnique(E,I):(o(G._input.style)&&(k.error("Uses Mapbox map style, but did not set an access token."),C=!0),P=!0)),I&&k.pushUnique(L,I)}if(P){var H=C?a.noAccessTokenErrorMsg:a.missingStyleErrorMsg;throw k.error(H),new Error(H)}return E.length?(E.length>1&&k.warn(a.multipleTokensErrorMsg),E[0]):(L.length&&k.log(["Listed mapbox access token(s)",L.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(u,x);S.accessToken=g;for(var f=0;f<x.length;f++){var y=x[f],v=b(c,n,y),m=p[y],_=m._subplot;_||(_=new r(u,y),p[y]._subplot=_),_.viewInitial||(_.viewInitial={center:k.extendFlat({},m.center),zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),_.plot(v,p,u._promises)}},z.clean=function(u,p,c,x){for(var g=x._subplots[n]||[],f=0;f<g.length;f++){var y=g[f];!p[y]&&x[y]._subplot&&x[y]._subplot.destroy()}},z.toSVG=function(u){for(var p=u._fullLayout,c=p._subplots[n],x=p._size,g=0;g<c.length;g++){var f=p[c[g]],y=f.domain,v=f._subplot.toImage("png");p._glimages.append("svg:image").attr({xmlns:d.svg,"xlink:href":v,x:x.l+x.w*y.x[0],y:x.t+x.h*(1-y.y[1]),width:x.w*(y.x[1]-y.x[0]),height:x.h*(y.y[1]-y.y[0]),preserveAspectRatio:"none"});var m=s.select(f._subplot.div);if(m.select(".mapboxgl-ctrl-logo").node().offsetParent!==null){var _=p._glimages.append("g");_.attr("transform",l(x.l+x.w*y.x[0]+10,x.t+x.h*(1-y.y[0])-31)),_.append("path").attr("d",a.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),_.append("path").attr("d",a.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),_.append("path").attr("d",a.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),_.append("polygon").attr("points",a.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var h=m.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),A=p._glimages.append("g"),w=A.append("text");w.text(h).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":h});var E=e.bBox(w.node()),L=x.w*(y.x[1]-y.x[0]);if(E.width>L/2){var C=h.split("|").join("<br>");w.text(C).attr("data-unformatted",C).call(i.convertToTspans,u),E=e.bBox(w.node())}w.attr("transform",l(-3,8-E.height)),A.insert("rect",".static-attribution").attr({x:-E.width-6,y:-E.height-3,width:E.width+6,height:E.height+3,fill:"rgba(255, 255, 255, 0.75)"});var P=1;E.width+6>L&&(P=L/(E.width+6));var D=[x.l+x.w*y.x[1],x.t+x.h*(1-y.y[0])];A.attr("transform",l(D[0],D[1])+T(P))}},z.updateFx=function(u){for(var p=u._fullLayout,c=p._subplots[n],x=0;x<c.length;x++)p[c[x]]._subplot.updateFx(p)}},67911:function(Q,z,t){var S=t(71828),k=t(63893).sanitizeHTML,l=t(13056),T=t(77734);function b(i,r){this.subplot=i,this.uid=i.uid+"-"+r,this.index=r,this.idSource="source-"+this.uid,this.idLayer=T.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var d=b.prototype;function s(i){if(!i.visible)return!1;var r=i.source;if(Array.isArray(r)&&r.length>0){for(var n=0;n<r.length;n++)if(typeof r[n]!="string"||r[n].length===0)return!1;return!0}return S.isPlainObject(r)||typeof r=="string"&&r.length>0}function e(i){var r={},n={};switch(i.type){case"circle":S.extendFlat(n,{"circle-radius":i.circle.radius,"circle-color":i.color,"circle-opacity":i.opacity});break;case"line":S.extendFlat(n,{"line-width":i.line.width,"line-color":i.color,"line-opacity":i.opacity,"line-dasharray":i.line.dash});break;case"fill":S.extendFlat(n,{"fill-color":i.color,"fill-outline-color":i.fill.outlinecolor,"fill-opacity":i.opacity});break;case"symbol":var a=i.symbol,o=l(a.textposition,a.iconsize);S.extendFlat(r,{"icon-image":a.icon+"-15","icon-size":a.iconsize/10,"text-field":a.text,"text-size":a.textfont.size,"text-anchor":o.anchor,"text-offset":o.offset,"symbol-placement":a.placement}),S.extendFlat(n,{"icon-color":i.color,"text-color":a.textfont.color,"text-opacity":i.opacity});break;case"raster":S.extendFlat(n,{"raster-fade-duration":0,"raster-opacity":i.opacity})}return{layout:r,paint:n}}d.update=function(i){this.visible?this.needsNewImage(i)?this.updateImage(i):this.needsNewSource(i)?(this.removeLayer(),this.updateSource(i),this.updateLayer(i)):this.needsNewLayer(i)?this.updateLayer(i):this.updateStyle(i):(this.updateSource(i),this.updateLayer(i)),this.visible=s(i)},d.needsNewImage=function(i){return this.subplot.map.getSource(this.idSource)&&this.sourceType==="image"&&i.sourcetype==="image"&&(this.source!==i.source||JSON.stringify(this.coordinates)!==JSON.stringify(i.coordinates))},d.needsNewSource=function(i){return this.sourceType!==i.sourcetype||JSON.stringify(this.source)!==JSON.stringify(i.source)||this.layerType!==i.type},d.needsNewLayer=function(i){return this.layerType!==i.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},d.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},d.updateImage=function(i){this.subplot.map.getSource(this.idSource).updateImage({url:i.source,coordinates:i.coordinates});var r=this.findFollowingMapboxLayerId(this.lookupBelow());r!==null&&this.subplot.map.moveLayer(this.idLayer,r)},d.updateSource=function(i){var r=this.subplot.map;if(r.getSource(this.idSource)&&r.removeSource(this.idSource),this.sourceType=i.sourcetype,this.source=i.source,s(i)){var n=function(a){var o,u=a.sourcetype,p=a.source,c={type:u};return u==="geojson"?o="data":u==="vector"?o=typeof p=="string"?"url":"tiles":u==="raster"?(o="tiles",c.tileSize=256):u==="image"&&(o="url",c.coordinates=a.coordinates),c[o]=p,a.sourceattribution&&(c.attribution=k(a.sourceattribution)),c}(i);r.addSource(this.idSource,n)}},d.findFollowingMapboxLayerId=function(i){if(i==="traces")for(var r=this.subplot.getMapLayers(),n=0;n<r.length;n++){var a=r[n].id;if(typeof a=="string"&&a.indexOf(T.traceLayerPrefix)===0){i=a;break}}return i},d.updateLayer=function(i){var r=this.subplot,n=e(i),a=this.lookupBelow(),o=this.findFollowingMapboxLayerId(a);this.removeLayer(),s(i)&&r.addLayer({id:this.idLayer,source:this.idSource,"source-layer":i.sourcelayer||"",type:i.type,minzoom:i.minzoom,maxzoom:i.maxzoom,layout:n.layout,paint:n.paint},o),this.layerType=i.type,this.below=a},d.updateStyle=function(i){if(s(i)){var r=e(i);this.subplot.setOptions(this.idLayer,"setLayoutProperty",r.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",r.paint)}},d.removeLayer=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer)},d.dispose=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer),i.getSource(this.idSource)&&i.removeSource(this.idSource)},Q.exports=function(i,r,n){var a=new b(i,r);return a.update(n),a}},23585:function(Q,z,t){var S=t(71828),k=t(7901).defaultLine,l=t(27670).Y,T=t(41940),b=t(82196).textposition,d=t(30962).overrideAll,s=t(44467).templatedArray,e=t(77734),i=T({});i.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(Q.exports=d({_arrayAttrRegexps:[S.counterRegex("mapbox",".layers",!0)],domain:l({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:e.styleValuesMapbox.concat(e.styleValuesNonMapbox),dflt:e.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:s("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:k},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:k}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:i,textposition:S.extendFlat({},b,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},77882:function(Q,z,t){var S=t(71828),k=t(49119),l=t(85501),T=t(23585);function b(s,e,i,r){i("accesstoken",r.accessToken),i("style"),i("center.lon"),i("center.lat"),i("zoom"),i("bearing"),i("pitch");var n=i("bounds.west"),a=i("bounds.east"),o=i("bounds.south"),u=i("bounds.north");n!==void 0&&a!==void 0&&o!==void 0&&u!==void 0||delete e.bounds,l(s,e,{name:"layers",handleItemDefaults:d}),e._input=s}function d(s,e){function i(u,p){return S.coerce(s,e,T.layers,u,p)}if(i("visible")){var r,n=i("sourcetype"),a=n==="raster"||n==="image";i("source"),i("sourceattribution"),n==="vector"&&i("sourcelayer"),n==="image"&&i("coordinates"),a&&(r="raster");var o=i("type",r);a&&o!=="raster"&&(o=e.type="raster",S.log("Source types *raster* and *image* must drawn *raster* layer type.")),i("below"),i("color"),i("opacity"),i("minzoom"),i("maxzoom"),o==="circle"&&i("circle.radius"),o==="line"&&(i("line.width"),i("line.dash")),o==="fill"&&i("fill.outlinecolor"),o==="symbol"&&(i("symbol.icon"),i("symbol.iconsize"),i("symbol.text"),S.coerceFont(i,"symbol.textfont"),i("symbol.textposition"),i("symbol.placement"))}}Q.exports=function(s,e,i){k(s,e,i,{type:"mapbox",attributes:T,handleDefaults:b,partition:"y",accessToken:e._mapboxAccessToken})}},10481:function(Q,z,t){var S=t(44517),k=t(71828),l=t(41327),T=t(73972),b=t(89298),d=t(28569),s=t(30211),e=t(64505),i=e.drawMode,r=e.selectMode,n=t(47322).prepSelect,a=t(47322).clearOutline,o=t(47322).clearSelectionsCache,u=t(47322).selectOnClick,p=t(77734),c=t(67911);function x(_,h){this.id=h,this.gd=_;var A=_._fullLayout,w=_._context;this.container=A._glcontainer.node(),this.isStatic=w.staticPlot,this.uid=A._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(A),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var g=x.prototype;g.plot=function(_,h,A){var w,E=this,L=h[E.id];E.map&&L.accesstoken!==E.accessToken&&(E.map.remove(),E.map=null,E.styleObj=null,E.traceHash={},E.layerList=[]),w=E.map?new Promise(function(C,P){E.updateMap(_,h,C,P)}):new Promise(function(C,P){E.createMap(_,h,C,P)}),A.push(w)},g.createMap=function(_,h,A,w){var E=this,L=h[E.id],C=E.styleObj=y(L.style);E.accessToken=L.accesstoken;var P=L.bounds,D=P?[[P.west,P.south],[P.east,P.north]]:null,G=E.map=new S.Map({container:E.div,style:C.style,center:m(L.center),zoom:L.zoom,bearing:L.bearing,pitch:L.pitch,maxBounds:D,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new S.AttributionControl({compact:!0}));G._canvas.style.left="0px",G._canvas.style.top="0px",E.rejectOnError(w),E.isStatic||E.initFx(_,h);var I=[];I.push(new Promise(function(H){G.once("load",H)})),I=I.concat(l.fetchTraceGeoData(_)),Promise.all(I).then(function(){E.fillBelowLookup(_,h),E.updateData(_),E.updateLayout(h),E.resolveOnRender(A)}).catch(w)},g.updateMap=function(_,h,A,w){var E=this,L=E.map,C=h[this.id];E.rejectOnError(w);var P=[],D=y(C.style);JSON.stringify(E.styleObj)!==JSON.stringify(D)&&(E.styleObj=D,L.setStyle(D.style),E.traceHash={},P.push(new Promise(function(G){L.once("styledata",G)}))),P=P.concat(l.fetchTraceGeoData(_)),Promise.all(P).then(function(){E.fillBelowLookup(_,h),E.updateData(_),E.updateLayout(h),E.resolveOnRender(A)}).catch(w)},g.fillBelowLookup=function(_,h){var A,w,E=h[this.id].layers,L=this.belowLookup={},C=!1;for(A=0;A<_.length;A++){var P=_[A][0].trace,D=P._module;typeof P.below=="string"?w=P.below:D.getBelow&&(w=D.getBelow(P,this)),w===""&&(C=!0),L["trace-"+P.uid]=w||""}for(A=0;A<E.length;A++){var G=E[A];w=typeof G.below=="string"?G.below:C?"traces":"",L["layout-"+A]=w}var I,H,N={};for(I in L)N[w=L[I]]?N[w].push(I):N[w]=[I];for(w in N){var F=N[w];if(F.length>1)for(A=0;A<F.length;A++)(I=F[A]).indexOf("trace-")===0?(H=I.split("trace-")[1],this.traceHash[H]&&(this.traceHash[H].below=null)):I.indexOf("layout-")===0&&(H=I.split("layout-")[1],this.layerList[H]&&(this.layerList[H].below=null))}};var f={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function y(_){var h={};return k.isPlainObject(_)?(h.id=_.id,h.style=_):typeof _=="string"?(h.id=_,p.styleValuesMapbox.indexOf(_)!==-1?h.style=v(_):p.stylesNonMapbox[_]?h.style=p.stylesNonMapbox[_]:h.style=_):(h.id=p.styleValueDflt,h.style=v(p.styleValueDflt)),h.transition={duration:0,delay:0},h}function v(_){return p.styleUrlPrefix+_+"-"+p.styleUrlSuffix}function m(_){return[_.lon,_.lat]}g.updateData=function(_){var h,A,w,E,L=this.traceHash,C=_.slice().sort(function(H,N){return f[H[0].trace.type]-f[N[0].trace.type]});for(w=0;w<C.length;w++){var P=C[w],D=!1;(h=L[(A=P[0].trace).uid])&&(h.type===A.type?(h.update(P),D=!0):h.dispose()),!D&&A._module&&(L[A.uid]=A._module.plot(this,P))}var G=Object.keys(L);e:for(w=0;w<G.length;w++){var I=G[w];for(E=0;E<_.length;E++)if(I===(A=_[E][0].trace).uid)continue e;(h=L[I]).dispose(),delete L[I]}},g.updateLayout=function(_){var h=this.map,A=_[this.id];this.dragging||this.wheeling||(h.setCenter(m(A.center)),h.setZoom(A.zoom),h.setBearing(A.bearing),h.setPitch(A.pitch)),this.updateLayers(_),this.updateFramework(_),this.updateFx(_),this.map.resize(),this.gd._context._scrollZoom.mapbox?h.scrollZoom.enable():h.scrollZoom.disable()},g.resolveOnRender=function(_){var h=this.map;h.on("render",function A(){h.loaded()&&(h.off("render",A),setTimeout(_,10))})},g.rejectOnError=function(_){var h=this.map;function A(){_(new Error(p.mapOnErrorMsg))}h.once("error",A),h.once("style.error",A),h.once("source.error",A),h.once("tile.error",A),h.once("layer.error",A)},g.createFramework=function(_){var h=this,A=h.div=document.createElement("div");A.id=h.uid,A.style.position="absolute",h.container.appendChild(A),h.xaxis={_id:"x",c2p:function(w){return h.project(w).x}},h.yaxis={_id:"y",c2p:function(w){return h.project(w).y}},h.updateFramework(_),h.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},b.setConvert(h.mockAxis,_)},g.initFx=function(_,h){var A=this,w=A.gd,E=A.map;function L(){s.loneUnhover(h._hoverlayer)}function C(){var P=A.getView();w.emit("plotly_relayouting",A.getViewEditsWithDerived(P))}E.on("moveend",function(P){if(A.map){var D=w._fullLayout;if(P.originalEvent||A.wheeling){var G=D[A.id];T.call("_storeDirectGUIEdit",w.layout,D._preGUI,A.getViewEdits(G));var I=A.getView();G._input.center=G.center=I.center,G._input.zoom=G.zoom=I.zoom,G._input.bearing=G.bearing=I.bearing,G._input.pitch=G.pitch=I.pitch,w.emit("plotly_relayout",A.getViewEditsWithDerived(I))}P.originalEvent&&P.originalEvent.type==="mouseup"?A.dragging=!1:A.wheeling&&(A.wheeling=!1),D._rehover&&D._rehover()}}),E.on("wheel",function(){A.wheeling=!0}),E.on("mousemove",function(P){var D=A.div.getBoundingClientRect(),G=[P.originalEvent.offsetX,P.originalEvent.offsetY];P.target.getBoundingClientRect=function(){return D},A.xaxis.p2c=function(){return E.unproject(G).lng},A.yaxis.p2c=function(){return E.unproject(G).lat},w._fullLayout._rehover=function(){w._fullLayout._hoversubplot===A.id&&w._fullLayout[A.id]&&s.hover(w,P,A.id)},s.hover(w,P,A.id),w._fullLayout._hoversubplot=A.id}),E.on("dragstart",function(){A.dragging=!0,L()}),E.on("zoomstart",L),E.on("mouseout",function(){w._fullLayout._hoversubplot=null}),E.on("drag",C),E.on("zoom",C),E.on("dblclick",function(){var P=w._fullLayout[A.id];T.call("_storeDirectGUIEdit",w.layout,w._fullLayout._preGUI,A.getViewEdits(P));var D=A.viewInitial;E.setCenter(m(D.center)),E.setZoom(D.zoom),E.setBearing(D.bearing),E.setPitch(D.pitch);var G=A.getView();P._input.center=P.center=G.center,P._input.zoom=P.zoom=G.zoom,P._input.bearing=P.bearing=G.bearing,P._input.pitch=P.pitch=G.pitch,w.emit("plotly_doubleclick",null),w.emit("plotly_relayout",A.getViewEditsWithDerived(G))}),A.clearOutline=function(){o(A.dragOptions),a(A.dragOptions.gd)},A.onClickInPanFn=function(P){return function(D){var G=w._fullLayout.clickmode;G.indexOf("select")>-1&&u(D.originalEvent,w,[A.xaxis],[A.yaxis],A.id,P),G.indexOf("event")>-1&&s.click(w,D.originalEvent)}}},g.updateFx=function(_){var h=this,A=h.map,w=h.gd;if(!h.isStatic){var E,L=_.dragmode;E=function(D,G){G.isRect?(D.range={})[h.id]=[P([G.xmin,G.ymin]),P([G.xmax,G.ymax])]:(D.lassoPoints={})[h.id]=G.map(P)};var C=h.dragOptions;h.dragOptions=k.extendDeep(C||{},{dragmode:_.dragmode,element:h.div,gd:w,plotinfo:{id:h.id,domain:_[h.id].domain,xaxis:h.xaxis,yaxis:h.yaxis,fillRangeItems:E},xaxes:[h.xaxis],yaxes:[h.yaxis],subplot:h.id}),A.off("click",h.onClickInPanHandler),r(L)||i(L)?(A.dragPan.disable(),A.on("zoomstart",h.clearOutline),h.dragOptions.prepFn=function(D,G,I){n(D,G,I,h.dragOptions,L)},d.init(h.dragOptions)):(A.dragPan.enable(),A.off("zoomstart",h.clearOutline),h.div.onmousedown=null,h.div.ontouchstart=null,h.div.removeEventListener("touchstart",h.div._ontouchstart),h.onClickInPanHandler=h.onClickInPanFn(h.dragOptions),A.on("click",h.onClickInPanHandler))}function P(D){var G=h.map.unproject(D);return[G.lng,G.lat]}},g.updateFramework=function(_){var h=_[this.id].domain,A=_._size,w=this.div.style;w.width=A.w*(h.x[1]-h.x[0])+"px",w.height=A.h*(h.y[1]-h.y[0])+"px",w.left=A.l+h.x[0]*A.w+"px",w.top=A.t+(1-h.y[1])*A.h+"px",this.xaxis._offset=A.l+h.x[0]*A.w,this.xaxis._length=A.w*(h.x[1]-h.x[0]),this.yaxis._offset=A.t+(1-h.y[1])*A.h,this.yaxis._length=A.h*(h.y[1]-h.y[0])},g.updateLayers=function(_){var h,A=_[this.id].layers,w=this.layerList;if(A.length!==w.length){for(h=0;h<w.length;h++)w[h].dispose();for(w=this.layerList=[],h=0;h<A.length;h++)w.push(c(this,h,A[h]))}else for(h=0;h<A.length;h++)w[h].update(A[h])},g.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},g.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},g.setOptions=function(_,h,A){for(var w in A)this.map[h](_,w,A[w])},g.getMapLayers=function(){return this.map.getStyle().layers},g.addLayer=function(_,h){var A=this.map;if(typeof h=="string"){if(h==="")return void A.addLayer(_,h);for(var w=this.getMapLayers(),E=0;E<w.length;E++)if(h===w[E].id)return void A.addLayer(_,h);k.warn(["Trying to add layer with *below* value",h,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}A.addLayer(_)},g.project=function(_){return this.map.project(new S.LngLat(_[0],_[1]))},g.getView=function(){var _=this.map,h=_.getCenter(),A={lon:h.lng,lat:h.lat},w=_.getCanvas(),E=parseInt(w.style.width),L=parseInt(w.style.height);return{center:A,zoom:_.getZoom(),bearing:_.getBearing(),pitch:_.getPitch(),_derived:{coordinates:[_.unproject([0,0]).toArray(),_.unproject([E,0]).toArray(),_.unproject([E,L]).toArray(),_.unproject([0,L]).toArray()]}}},g.getViewEdits=function(_){for(var h=this.id,A=["center","zoom","bearing","pitch"],w={},E=0;E<A.length;E++){var L=A[E];w[h+"."+L]=_[L]}return w},g.getViewEditsWithDerived=function(_){var h=this.id,A=this.getViewEdits(_);return A[h+"._derived"]=_._derived,A},Q.exports=x},35025:function(Q){Q.exports=function(z){var t=z.editType;return{t:{valType:"number",dflt:0,editType:t},r:{valType:"number",dflt:0,editType:t},b:{valType:"number",dflt:0,editType:t},l:{valType:"number",dflt:0,editType:t},editType:t}}},74875:function(Q,z,t){var S=t(39898),k=t(84096).Dq,l=t(60721).FF,T=t(92770),b=t(73972),d=t(86281),s=t(44467),e=t(71828),i=t(7901),r=t(50606).BADNUM,n=t(41675),a=t(51873).clearOutline,o=t(21479),u=t(85594),p=t(31391),c=t(27659).a0,x=e.relinkPrivateKeys,g=e._,f=Q.exports={};e.extendFlat(f,b),f.attributes=t(9012),f.attributes.type.values=f.allTypes,f.fontAttrs=t(41940),f.layoutAttributes=t(10820),f.fontWeight="normal";var y=f.transformsRegistry,v=t(31137);f.executeAPICommand=v.executeAPICommand,f.computeAPICommandBindings=v.computeAPICommandBindings,f.manageCommandObserver=v.manageCommandObserver,f.hasSimpleAPICommandBindings=v.hasSimpleAPICommandBindings,f.redrawText=function(N){return N=e.getGraphDiv(N),new Promise(function(F){setTimeout(function(){N._fullLayout&&(b.getComponentMethod("annotations","draw")(N),b.getComponentMethod("legend","draw")(N),b.getComponentMethod("colorbar","draw")(N),F(f.previousPromises(N)))},300)})},f.resize=function(N){var F;N=e.getGraphDiv(N);var V=new Promise(function(q,te){N&&!e.isHidden(N)||te(new Error("Resize must be passed a displayed plot div element.")),N._redrawTimer&&clearTimeout(N._redrawTimer),N._resolveResize&&(F=N._resolveResize),N._resolveResize=q,N._redrawTimer=setTimeout(function(){if(!N.layout||N.layout.width&&N.layout.height||e.isHidden(N))q(N);else{delete N.layout.width,delete N.layout.height;var $=N.changed;N.autoplay=!0,b.call("relayout",N,{autosize:!0}).then(function(){N.changed=$,N._resolveResize===q&&(delete N._resolveResize,q(N))})}},100)});return F&&F(V),V},f.previousPromises=function(N){if((N._promises||[]).length)return Promise.all(N._promises).then(function(){N._promises=[]})},f.addLinks=function(N){if(N._context.showLink||N._context.showSources){var F=N._fullLayout,V=e.ensureSingle(F._paper,"text","js-plot-link-container",function(J){J.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:i.defaultLine,"pointer-events":"all"}).each(function(){var ee=S.select(this);ee.append("tspan").classed("js-link-to-tool",!0),ee.append("tspan").classed("js-link-spacer",!0),ee.append("tspan").classed("js-sourcelinks",!0)})}),q=V.node(),te={y:F._paper.attr("height")-9};document.body.contains(q)&&q.getComputedTextLength()>=F.width-20?(te["text-anchor"]="start",te.x=5):(te["text-anchor"]="end",te.x=F._paper.attr("width")-7),V.attr(te);var $=V.select(".js-link-to-tool"),W=V.select(".js-link-spacer"),Z=V.select(".js-sourcelinks");N._context.showSources&&N._context.showSources(N),N._context.showLink&&function(J,ee){ee.text("");var re=ee.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(J._context.linkText+" "+String.fromCharCode(187));if(J._context.sendData)re.on("click",function(){f.sendDataToCloud(J)});else{var ae=window.location.pathname.split("/"),oe=window.location.search;re.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+ae[2].split(".")[0]+"/"+ae[1]+oe})}}(N,$),W.text($.text()&&Z.text()?" - ":"")}},f.sendDataToCloud=function(N){var F=(window.PLOTLYENV||{}).BASE_URL||N._context.plotlyServerURL;if(F){N.emit("plotly_beforeexport");var V=S.select(N).append("div").attr("id","hiddenform").style("display","none"),q=V.append("form").attr({action:F+"/external",method:"post",target:"_blank"});return q.append("input").attr({type:"text",name:"data"}).node().value=f.graphJson(N,!1,"keepdata"),q.node().submit(),V.remove(),N.emit("plotly_afterexport"),!1}};var m=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],_=["year","month","dayMonth","dayMonthYear"];function h(N,F){var V=N._context.locale;V||(V="en-US");var q=!1,te={};function $(ae){for(var oe=!0,ce=0;ce<F.length;ce++){var pe=F[ce];te[pe]||(ae[pe]?te[pe]=ae[pe]:oe=!1)}oe&&(q=!0)}for(var W=0;W<2;W++){for(var Z=N._context.locales,J=0;J<2;J++){var ee=(Z[V]||{}).format;if(ee&&($(ee),q))break;Z=b.localeRegistry}var re=V.split("-")[0];if(q||re===V)break;V=re}return q||$(b.localeRegistry.en.format),te}function A(N,F){var V={_fullLayout:F},q=N._id.charAt(0)==="x",te=N._mainAxis._anchorAxis,$="",W="",Z="";if(te&&(Z=te._mainAxis._id,$=q?N._id+Z:Z+N._id),!$||!F._plots[$]){$="";for(var J=N._counterAxes,ee=0;ee<J.length;ee++){var re=J[ee],ae=q?N._id+re:re+N._id;W||(W=ae);var oe=n.getFromId(V,re);if(Z&&oe.overlaying===Z){$=ae;break}}}return $||W}function w(N){var F=N.transforms;if(Array.isArray(F)&&F.length)for(var V=0;V<F.length;V++){var q=F[V],te=q._module||y[q.type];if(te&&te.makesData)return!0}return!1}function E(N,F,V,q){for(var te=N.transforms,$=[N],W=0;W<te.length;W++){var Z=te[W],J=y[Z.type];J&&J.transform&&($=J.transform($,{transform:Z,fullTrace:N,fullData:F,layout:V,fullLayout:q,transformIndex:W}))}return $}function L(N){return typeof N=="string"&&N.substr(N.length-2)==="px"&&parseFloat(N)}function C(N){var F=N.margin;if(!N._size){var V=N._size={l:Math.round(F.l),r:Math.round(F.r),t:Math.round(F.t),b:Math.round(F.b),p:Math.round(F.pad)};V.w=Math.round(N.width)-V.l-V.r,V.h=Math.round(N.height)-V.t-V.b}N._pushmargin||(N._pushmargin={}),N._pushmarginIds||(N._pushmarginIds={}),N._reservedMargin||(N._reservedMargin={})}f.supplyDefaults=function(N,F){var V=F&&F.skipUpdateCalc,q=N._fullLayout||{};if(q._skipDefaults)delete q._skipDefaults;else{var te,$=N._fullLayout={},W=N.layout||{},Z=N._fullData||[],J=N._fullData=[],ee=N.data||[],re=N.calcdata||[],ae=N._context||{};N._transitionData||f.createTransitionData(N),$._dfltTitle={plot:g(N,"Click to enter Plot title"),x:g(N,"Click to enter X axis title"),y:g(N,"Click to enter Y axis title"),colorbar:g(N,"Click to enter Colorscale title"),annotation:g(N,"new text")},$._traceWord=g(N,"trace");var oe=h(N,m);if($._mapboxAccessToken=ae.mapboxAccessToken,q._initialAutoSizeIsDone){var ce=q.width,pe=q.height;f.supplyLayoutGlobalDefaults(W,$,oe),W.width||($.width=ce),W.height||($.height=pe),f.sanitizeMargins($)}else{f.supplyLayoutGlobalDefaults(W,$,oe);var ve=!W.width||!W.height,we=$.autosize,xe=ae.autosizable;ve&&(we||xe)?f.plotAutoSize(N,W,$):ve&&f.sanitizeMargins($),!we&&ve&&(W.width=$.width,W.height=$.height)}$._d3locale=function(Fe,Re){return Fe.decimal=Re.charAt(0),Fe.thousands=Re.charAt(1),{numberFormat:function(He){try{He=l(Fe).format(e.adjustFormat(He))}catch{return e.warnBadFormat(He),e.noFormat}return He},timeFormat:k(Fe).utcFormat}}(oe,$.separators),$._extraFormat=h(N,_),$._initialAutoSizeIsDone=!0,$._dataLength=ee.length,$._modules=[],$._visibleModules=[],$._basePlotModules=[];var ge=$._subplots=function(){var Fe,Re,He=b.collectableSubplotTypes,Ge={};if(!He){He=[];var $e=b.subplotsRegistry;for(var st in $e){var Ke=$e[st].attr;if(Ke&&(He.push(st),Array.isArray(Ke)))for(Re=0;Re<Ke.length;Re++)e.pushUnique(He,Ke[Re])}}for(Fe=0;Fe<He.length;Fe++)Ge[He[Fe]]=[];return Ge}(),Oe=$._splomAxes={x:{},y:{}},Ae=$._splomSubplots={};$._splomGridDflt={},$._scatterStackOpts={},$._firstScatter={},$._alignmentOpts={},$._colorAxes={},$._requestRangeslider={},$._traceUids=function(Fe,Re){var He,Ge,$e=Re.length,st=[];for(He=0;He<Fe.length;He++){var Ke=Fe[He]._fullInput;Ke!==Ge&&st.push(Ke),Ge=Ke}var gt=st.length,mt=new Array($e),at={};function rt(wt,Ot){mt[Ot]=wt,at[wt]=1}function xt(wt,Ot){if(wt&&typeof wt=="string"&&!at[wt])return rt(wt,Ot),!0}for(He=0;He<$e;He++){var Tt=Re[He].uid;typeof Tt=="number"&&(Tt=String(Tt)),xt(Tt,He)||He<gt&&xt(st[He].uid,He)||rt(e.randstr(at),He)}return mt}(Z,ee),$._globalTransforms=(N._context||{}).globalTransforms,f.supplyDataDefaults(ee,J,W,$);var Te=Object.keys(Oe.x),se=Object.keys(Oe.y);if(Te.length>1&&se.length>1){for(b.getComponentMethod("grid","sizeDefaults")(W,$),te=0;te<Te.length;te++)e.pushUnique(ge.xaxis,Te[te]);for(te=0;te<se.length;te++)e.pushUnique(ge.yaxis,se[te]);for(var le in Ae)e.pushUnique(ge.cartesian,le)}if($._has=f._hasPlotType.bind($),Z.length===J.length)for(te=0;te<J.length;te++)x(J[te],Z[te]);f.supplyLayoutModuleDefaults(W,$,J,N._transitionData);var ne=$._visibleModules,me=[];for(te=0;te<ne.length;te++){var Ee=ne[te].crossTraceDefaults;Ee&&e.pushUnique(me,Ee)}for(te=0;te<me.length;te++)me[te](J,$);$._hasOnlyLargeSploms=$._basePlotModules.length===1&&$._basePlotModules[0].name==="splom"&&Te.length>15&&se.length>15&&$.shapes.length===0&&$.images.length===0,f.linkSubplots(J,$,Z,q),f.cleanPlot(J,$,Z,q);var be=!(!q._has||!q._has("gl2d")),De=!(!$._has||!$._has("gl2d")),Ue=!(!q._has||!q._has("cartesian"))||be,he=!(!$._has||!$._has("cartesian"))||De;Ue&&!he?q._bgLayer.remove():he&&!Ue&&($._shouldCreateBgLayer=!0),q._zoomlayer&&!N._dragging&&a({_fullLayout:q}),function(Fe,Re){var He,Ge=[];Re.meta&&(He=Re._meta={meta:Re.meta,layout:{meta:Re.meta}});for(var $e=0;$e<Fe.length;$e++){var st=Fe[$e];st.meta?Ge[st.index]=st._meta={meta:st.meta}:Re.meta&&(st._meta={meta:Re.meta}),Re.meta&&(st._meta.layout={meta:Re.meta})}Ge.length&&(He||(He=Re._meta={}),He.data=Ge)}(J,$),x($,q),b.getComponentMethod("colorscale","crossTraceDefaults")(J,$),$._preGUI||($._preGUI={}),$._tracePreGUI||($._tracePreGUI={});var ke,_e=$._tracePreGUI,Ce={};for(ke in _e)Ce[ke]="old";for(te=0;te<J.length;te++)Ce[ke=J[te]._fullInput.uid]||(_e[ke]={}),Ce[ke]="new";for(ke in Ce)Ce[ke]==="old"&&delete _e[ke];C($),b.getComponentMethod("rangeslider","makeData")($),V||re.length!==J.length||f.supplyDefaultsUpdateCalc(re,J)}},f.supplyDefaultsUpdateCalc=function(N,F){for(var V=0;V<F.length;V++){var q=F[V],te=(N[V]||[])[0];if(te&&te.trace){var $=te.trace;if($._hasCalcTransform){var W,Z,J,ee=$._arrayAttrs;for(W=0;W<ee.length;W++)Z=ee[W],J=e.nestedProperty($,Z).get().slice(),e.nestedProperty(q,Z).set(J)}te.trace=q}}},f.createTransitionData=function(N){N._transitionData||(N._transitionData={}),N._transitionData._frames||(N._transitionData._frames=[]),N._transitionData._frameHash||(N._transitionData._frameHash={}),N._transitionData._counter||(N._transitionData._counter=0),N._transitionData._interruptCallbacks||(N._transitionData._interruptCallbacks=[])},f._hasPlotType=function(N){var F,V=this._basePlotModules||[];for(F=0;F<V.length;F++)if(V[F].name===N)return!0;var q=this._modules||[];for(F=0;F<q.length;F++){var te=q[F].name;if(te===N)return!0;var $=b.modules[te];if($&&$.categories[N])return!0}return!1},f.cleanPlot=function(N,F,V,q){var te,$,W=q._basePlotModules||[];for(te=0;te<W.length;te++){var Z=W[te];Z.clean&&Z.clean(N,F,V,q)}var J=q._has&&q._has("gl"),ee=F._has&&F._has("gl");J&&!ee&&q._glcontainer!==void 0&&(q._glcontainer.selectAll(".gl-canvas").remove(),q._glcontainer.selectAll(".no-webgl").remove(),q._glcanvas=null);var re=!!q._infolayer;e:for(te=0;te<V.length;te++){var ae=V[te].uid;for($=0;$<N.length;$++)if(ae===N[$].uid)continue e;re&&q._infolayer.select(".cb"+ae).remove()}},f.linkSubplots=function(N,F,V,q){var te,$,W=q._plots||{},Z=F._plots={},J=F._subplots,ee={_fullData:N,_fullLayout:F},re=J.cartesian.concat(J.gl2d||[]);for(te=0;te<re.length;te++){var ae,oe=re[te],ce=W[oe],pe=n.getFromId(ee,oe,"x"),ve=n.getFromId(ee,oe,"y");for(ce?ae=Z[oe]=ce:(ae=Z[oe]={}).id=oe,pe._counterAxes.push(ve._id),ve._counterAxes.push(pe._id),pe._subplotsWith.push(oe),ve._subplotsWith.push(oe),ae.xaxis=pe,ae.yaxis=ve,ae._hasClipOnAxisFalse=!1,$=0;$<N.length;$++){var we=N[$];if(we.xaxis===ae.xaxis._id&&we.yaxis===ae.yaxis._id&&we.cliponaxis===!1){ae._hasClipOnAxisFalse=!0;break}}}var xe,ge=n.list(ee,null,!0);for(te=0;te<ge.length;te++){var Oe=null;(xe=ge[te]).overlaying&&(Oe=n.getFromId(ee,xe.overlaying))&&Oe.overlaying&&(xe.overlaying=!1,Oe=null),xe._mainAxis=Oe||xe,Oe&&(xe.domain=Oe.domain.slice()),xe._anchorAxis=xe.anchor==="free"?null:n.getFromId(ee,xe.anchor)}for(te=0;te<ge.length;te++)if((xe=ge[te])._counterAxes.sort(n.idSort),xe._subplotsWith.sort(e.subplotSort),xe._mainSubplot=A(xe,F),xe._counterAxes.length&&(xe.spikemode&&xe.spikemode.indexOf("across")!==-1||xe.automargin&&xe.mirror&&xe.anchor!=="free"||b.getComponentMethod("rangeslider","isVisible")(xe))){var Ae=1,Te=0;for($=0;$<xe._counterAxes.length;$++){var se=n.getFromId(ee,xe._counterAxes[$]);Ae=Math.min(Ae,se.domain[0]),Te=Math.max(Te,se.domain[1])}Ae<Te&&(xe._counterDomainMin=Ae,xe._counterDomainMax=Te)}},f.clearExpandedTraceDefaultColors=function(N){var F,V,q;for(V=[],(F=N._module._colorAttrs)||(N._module._colorAttrs=F=[],d.crawl(N._module.attributes,function(te,$,W,Z){V[Z]=$,V.length=Z+1,te.valType==="color"&&te.dflt===void 0&&F.push(V.join("."))})),q=0;q<F.length;q++)e.nestedProperty(N,"_input."+F[q]).get()||e.nestedProperty(N,F[q]).set(null)},f.supplyDataDefaults=function(N,F,V,q){var te,$,W,Z=q._modules,J=q._visibleModules,ee=q._basePlotModules,re=0,ae=0;function oe(le){F.push(le);var ne=le._module;ne&&(e.pushUnique(Z,ne),le.visible===!0&&e.pushUnique(J,ne),e.pushUnique(ee,le._module.basePlotModule),re++,le._input.visible!==!1&&ae++)}q._transformModules=[];var ce={},pe=[],ve=(V.template||{}).data||{},we=s.traceTemplater(ve);for(te=0;te<N.length;te++){if(W=N[te],($=we.newTrace(W)).uid=q._traceUids[te],f.supplyTraceDefaults(W,$,ae,q,te),$.index=te,$._input=W,$._expandedIndex=re,$.transforms&&$.transforms.length)for(var xe=W.visible!==!1&&$.visible===!1,ge=E($,F,V,q),Oe=0;Oe<ge.length;Oe++){var Ae=ge[Oe],Te={_template:$._template,type:$.type,uid:$.uid+Oe};xe&&Ae.visible===!1&&delete Ae.visible,f.supplyTraceDefaults(Ae,Te,re,q,te),x(Te,Ae),Te.index=te,Te._input=W,Te._fullInput=$,Te._expandedIndex=re,Te._expandedInput=Ae,oe(Te)}else $._fullInput=$,$._expandedInput=$,oe($);b.traceIs($,"carpetAxis")&&(ce[$.carpet]=$),b.traceIs($,"carpetDependent")&&pe.push(te)}for(te=0;te<pe.length;te++)if(($=F[pe[te]]).visible){var se=ce[$.carpet];$._carpet=se,se&&se.visible?($.xaxis=se.xaxis,$.yaxis=se.yaxis):$.visible=!1}},f.supplyAnimationDefaults=function(N){var F;N=N||{};var V={};function q(te,$){return e.coerce(N||{},V,u,te,$)}if(q("mode"),q("direction"),q("fromcurrent"),Array.isArray(N.frame))for(V.frame=[],F=0;F<N.frame.length;F++)V.frame[F]=f.supplyAnimationFrameDefaults(N.frame[F]||{});else V.frame=f.supplyAnimationFrameDefaults(N.frame||{});if(Array.isArray(N.transition))for(V.transition=[],F=0;F<N.transition.length;F++)V.transition[F]=f.supplyAnimationTransitionDefaults(N.transition[F]||{});else V.transition=f.supplyAnimationTransitionDefaults(N.transition||{});return V},f.supplyAnimationFrameDefaults=function(N){var F={};function V(q,te){return e.coerce(N||{},F,u.frame,q,te)}return V("duration"),V("redraw"),F},f.supplyAnimationTransitionDefaults=function(N){var F={};function V(q,te){return e.coerce(N||{},F,u.transition,q,te)}return V("duration"),V("easing"),F},f.supplyFrameDefaults=function(N){var F={};function V(q,te){return e.coerce(N,F,p,q,te)}return V("group"),V("name"),V("traces"),V("baseframe"),V("data"),V("layout"),F},f.supplyTraceDefaults=function(N,F,V,q,te){var $,W=q.colorway||i.defaults,Z=W[V%W.length];function J(ge,Oe){return e.coerce(N,F,f.attributes,ge,Oe)}var ee=J("visible");J("type"),J("name",q._traceWord+" "+te),J("uirevision",q.uirevision);var re=f.getModule(F);if(F._module=re,re){var ae=re.basePlotModule,oe=ae.attr,ce=ae.attributes;if(oe&&ce){var pe=q._subplots,ve="";if(ee||ae.name!=="gl2d"){if(Array.isArray(oe))for($=0;$<oe.length;$++){var we=oe[$],xe=e.coerce(N,F,ce,we);pe[we]&&e.pushUnique(pe[we],xe),ve+=xe}else ve=e.coerce(N,F,ce,oe);pe[ae.name]&&e.pushUnique(pe[ae.name],ve)}}}return ee&&(J("customdata"),J("ids"),J("meta"),b.traceIs(F,"showLegend")?(e.coerce(N,F,re.attributes.showlegend?re.attributes:f.attributes,"showlegend"),J("legend"),J("legendwidth"),J("legendgroup"),J("legendgrouptitle.text"),J("legendrank"),F._dfltShowLegend=!0):F._dfltShowLegend=!1,re&&re.supplyDefaults(N,F,Z,q),b.traceIs(F,"noOpacity")||J("opacity"),b.traceIs(F,"notLegendIsolatable")&&(F.visible=!!F.visible),b.traceIs(F,"noHover")||(F.hovertemplate||e.coerceHoverinfo(N,F,q),F.type!=="parcats"&&b.getComponentMethod("fx","supplyDefaults")(N,F,Z,q)),re&&re.selectPoints&&J("selectedpoints"),f.supplyTransformDefaults(N,F,q)),F},f.hasMakesDataTransform=w,f.supplyTransformDefaults=function(N,F,V){if(F._length||w(N)){var q=V._globalTransforms||[],te=V._transformModules||[];if(Array.isArray(N.transforms)||q.length!==0)for(var $=N.transforms||[],W=q.concat($),Z=F.transforms=[],J=0;J<W.length;J++){var ee,re=W[J],ae=re.type,oe=y[ae],ce=!(re._module&&re._module===oe),pe=oe&&typeof oe.transform=="function";oe||e.warn("Unrecognized transform type "+ae+"."),oe&&oe.supplyDefaults&&(ce||pe)?((ee=oe.supplyDefaults(re,F,V,N)).type=ae,ee._module=oe,e.pushUnique(te,oe)):ee=e.extendFlat({},re),Z.push(ee)}}},f.supplyLayoutGlobalDefaults=function(N,F,V){function q(re,ae){return e.coerce(N,F,f.layoutAttributes,re,ae)}var te=N.template;e.isPlainObject(te)&&(F.template=te,F._template=te.layout,F._dataTemplate=te.data),q("autotypenumbers");var $=e.coerceFont(q,"font"),W=$.size;e.coerceFont(q,"title.font",e.extendFlat({},$,{size:Math.round(1.4*W)})),q("title.text",F._dfltTitle.plot),q("title.xref");var Z=q("title.yref");q("title.pad.t"),q("title.pad.r"),q("title.pad.b"),q("title.pad.l");var J=q("title.automargin");q("title.x"),q("title.xanchor"),q("title.y"),q("title.yanchor"),J&&(Z==="paper"&&(F.title.y!==0&&(F.title.y=1),F.title.yanchor==="auto"&&(F.title.yanchor=F.title.y===0?"top":"bottom")),Z==="container"&&(F.title.y==="auto"&&(F.title.y=1),F.title.yanchor==="auto"&&(F.title.yanchor=F.title.y<.5?"bottom":"top"))),q("uniformtext.mode")&&q("uniformtext.minsize"),q("autosize",!(N.width&&N.height)),q("width"),q("height"),q("minreducedwidth"),q("minreducedheight"),q("margin.l"),q("margin.r"),q("margin.t"),q("margin.b"),q("margin.pad"),q("margin.autoexpand"),N.width&&N.height&&f.sanitizeMargins(F),b.getComponentMethod("grid","sizeDefaults")(N,F),q("paper_bgcolor"),q("separators",V.decimal+V.thousands),q("hidesources"),q("colorway"),q("datarevision");var ee=q("uirevision");q("editrevision",ee),q("selectionrevision",ee),b.getComponentMethod("modebar","supplyLayoutDefaults")(N,F),b.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(N,F,q),b.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(N,F,q),q("meta"),e.isPlainObject(N.transition)&&(q("transition.duration"),q("transition.easing"),q("transition.ordering")),b.getComponentMethod("calendars","handleDefaults")(N,F,"calendar"),b.getComponentMethod("fx","supplyLayoutGlobalDefaults")(N,F,q),e.coerce(N,F,o,"scattermode")},f.plotAutoSize=function(N,F,V){var q,te,$=N._context||{},W=$.frameMargins,Z=e.isPlotDiv(N);if(Z&&N.emit("plotly_autosize"),$.fillFrame)q=window.innerWidth,te=window.innerHeight,document.body.style.overflow="hidden";else{var J=Z?window.getComputedStyle(N):{};if(q=L(J.width)||L(J.maxWidth)||V.width,te=L(J.height)||L(J.maxHeight)||V.height,T(W)&&W>0){var ee=1-2*W;q=Math.round(ee*q),te=Math.round(ee*te)}}var re=f.layoutAttributes.width.min,ae=f.layoutAttributes.height.min;q<re&&(q=re),te<ae&&(te=ae);var oe=!F.width&&Math.abs(V.width-q)>1,ce=!F.height&&Math.abs(V.height-te)>1;(ce||oe)&&(oe&&(V.width=q),ce&&(V.height=te)),N._initialAutoSize||(N._initialAutoSize={width:q,height:te}),f.sanitizeMargins(V)},f.supplyLayoutModuleDefaults=function(N,F,V,q){var te,$,W,Z=b.componentsRegistry,J=F._basePlotModules,ee=b.subplotsRegistry.cartesian;for(te in Z)(W=Z[te]).includeBasePlot&&W.includeBasePlot(N,F);for(var re in J.length||J.push(ee),F._has("cartesian")&&(b.getComponentMethod("grid","contentDefaults")(N,F),ee.finalizeSubplots(N,F)),F._subplots)F._subplots[re].sort(e.subplotSort);for($=0;$<J.length;$++)(W=J[$]).supplyLayoutDefaults&&W.supplyLayoutDefaults(N,F,V);var ae=F._modules;for($=0;$<ae.length;$++)(W=ae[$]).supplyLayoutDefaults&&W.supplyLayoutDefaults(N,F,V);var oe=F._transformModules;for($=0;$<oe.length;$++)(W=oe[$]).supplyLayoutDefaults&&W.supplyLayoutDefaults(N,F,V,q);for(te in Z)(W=Z[te]).supplyLayoutDefaults&&W.supplyLayoutDefaults(N,F,V)},f.purge=function(N){var F=N._fullLayout||{};F._glcontainer!==void 0&&(F._glcontainer.selectAll(".gl-canvas").remove(),F._glcontainer.remove(),F._glcanvas=null),F._modeBar&&F._modeBar.destroy(),N._transitionData&&(N._transitionData._interruptCallbacks&&(N._transitionData._interruptCallbacks.length=0),N._transitionData._animationRaf&&window.cancelAnimationFrame(N._transitionData._animationRaf)),e.clearThrottle(),e.clearResponsive(N),delete N.data,delete N.layout,delete N._fullData,delete N._fullLayout,delete N.calcdata,delete N.empty,delete N.fid,delete N.undoqueue,delete N.undonum,delete N.autoplay,delete N.changed,delete N._promises,delete N._redrawTimer,delete N._hmlumcount,delete N._hmpixcount,delete N._transitionData,delete N._transitioning,delete N._initialAutoSize,delete N._transitioningWithDuration,delete N._dragging,delete N._dragged,delete N._dragdata,delete N._hoverdata,delete N._snapshotInProgress,delete N._editing,delete N._mouseDownTime,delete N._legendMouseDownTime,N.removeAllListeners&&N.removeAllListeners()},f.style=function(N){var F,V=N._fullLayout._visibleModules,q=[];for(F=0;F<V.length;F++){var te=V[F];te.style&&e.pushUnique(q,te.style)}for(F=0;F<q.length;F++)q[F](N)},f.sanitizeMargins=function(N){if(N&&N.margin){var F,V=N.width,q=N.height,te=N.margin,$=V-(te.l+te.r),W=q-(te.t+te.b);$<0&&(F=(V-1)/(te.l+te.r),te.l=Math.floor(F*te.l),te.r=Math.floor(F*te.r)),W<0&&(F=(q-1)/(te.t+te.b),te.t=Math.floor(F*te.t),te.b=Math.floor(F*te.b))}},f.clearAutoMarginIds=function(N){N._fullLayout._pushmarginIds={}},f.allowAutoMargin=function(N,F){N._fullLayout._pushmarginIds[F]=1},f.autoMargin=function(N,F,V){var q=N._fullLayout,te=q.width,$=q.height,W=q.margin,Z=q.minreducedwidth,J=q.minreducedheight,ee=e.constrain(te-W.l-W.r,2,Z),re=e.constrain($-W.t-W.b,2,J),ae=Math.max(0,te-ee),oe=Math.max(0,$-re),ce=q._pushmargin,pe=q._pushmarginIds;if(W.autoexpand!==!1){if(V){var ve=V.pad;if(ve===void 0&&(ve=Math.min(12,W.l,W.r,W.t,W.b)),ae){var we=(V.l+V.r)/ae;we>1&&(V.l/=we,V.r/=we)}if(oe){var xe=(V.t+V.b)/oe;xe>1&&(V.t/=xe,V.b/=xe)}var ge=V.xl!==void 0?V.xl:V.x,Oe=V.xr!==void 0?V.xr:V.x,Ae=V.yt!==void 0?V.yt:V.y,Te=V.yb!==void 0?V.yb:V.y;ce[F]={l:{val:ge,size:V.l+ve},r:{val:Oe,size:V.r+ve},b:{val:Te,size:V.b+ve},t:{val:Ae,size:V.t+ve}},pe[F]=1}else delete ce[F],delete pe[F];if(!q._replotting)return f.doAutoMargin(N)}},f.doAutoMargin=function(N){var F=N._fullLayout,V=F.width,q=F.height;F._size||(F._size={}),C(F);var te=F._size,$=F.margin,W={t:0,b:0,l:0,r:0},Z=e.extendFlat({},te),J=N._fullLayout._reservedMargin;for(var ee in J)for(var re in J[ee]){var ae=J[ee][re];W[re]=Math.max(W[re],ae)}var oe=$.l,ce=$.r,pe=$.t,ve=$.b,we=F._pushmargin,xe=F._pushmarginIds,ge=F.minreducedwidth,Oe=F.minreducedheight;if(F.margin.autoexpand!==!1){for(var Ae in we)xe[Ae]||delete we[Ae];for(var Te in we.base={l:{val:0,size:oe},r:{val:1,size:ce},t:{val:1,size:pe},b:{val:0,size:ve}},we){var se=we[Te].l||{},le=we[Te].b||{},ne=se.val,me=se.size,Ee=le.val,be=le.size,De=V-W.r-W.l,Ue=q-W.t-W.b;for(var he in we){if(T(me)&&we[he].r){var ke=we[he].r.val,_e=we[he].r.size;if(ke>ne){var Ce=(me*ke+(_e-De)*ne)/(ke-ne),Fe=(_e*(1-ne)+(me-De)*(1-ke))/(ke-ne);Ce+Fe>oe+ce&&(oe=Ce,ce=Fe)}}if(T(be)&&we[he].t){var Re=we[he].t.val,He=we[he].t.size;if(Re>Ee){var Ge=(be*Re+(He-Ue)*Ee)/(Re-Ee),$e=(He*(1-Ee)+(be-Ue)*(1-Re))/(Re-Ee);Ge+$e>ve+pe&&(ve=Ge,pe=$e)}}}}}var st=e.constrain(V-$.l-$.r,2,ge),Ke=e.constrain(q-$.t-$.b,2,Oe),gt=Math.max(0,V-st),mt=Math.max(0,q-Ke);if(gt){var at=(oe+ce)/gt;at>1&&(oe/=at,ce/=at)}if(mt){var rt=(ve+pe)/mt;rt>1&&(ve/=rt,pe/=rt)}if(te.l=Math.round(oe)+W.l,te.r=Math.round(ce)+W.r,te.t=Math.round(pe)+W.t,te.b=Math.round(ve)+W.b,te.p=Math.round($.pad),te.w=Math.round(V)-te.l-te.r,te.h=Math.round(q)-te.t-te.b,!F._replotting&&(f.didMarginChange(Z,te)||function(Tt){if("_redrawFromAutoMarginCount"in Tt._fullLayout)return!1;var wt=n.list(Tt,"",!0);for(var Ot in wt)if(wt[Ot].autoshift||wt[Ot].shift)return!0;return!1}(N))){"_redrawFromAutoMarginCount"in F?F._redrawFromAutoMarginCount++:F._redrawFromAutoMarginCount=1;var xt=3*(1+Object.keys(xe).length);if(F._redrawFromAutoMarginCount<xt)return b.call("_doPlot",N);F._size=Z,e.warn("Too many auto-margin redraws.")}(function(Tt){var wt=n.list(Tt,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(Ot){for(var Ct=0;Ct<wt.length;Ct++){var Ye=wt[Ct][Ot];Ye&&Ye()}})})(N)};var P=["l","r","t","b","p","w","h"];function D(N,F,V){var q=!1,te=[f.previousPromises,function(){if(N._transitionData)return N._transitioning=!1,function(W){var Z=Promise.resolve();if(!W)return Z;for(;W.length;)Z=Z.then(W.shift());return Z}(N._transitionData._interruptCallbacks)},V.prepareFn,f.rehover,f.reselect,function(){return N.emit("plotly_transitioning",[]),new Promise(function(W){N._transitioning=!0,F.duration>0&&(N._transitioningWithDuration=!0),N._transitionData._interruptCallbacks.push(function(){q=!0}),V.redraw&&N._transitionData._interruptCallbacks.push(function(){return b.call("redraw",N)}),N._transitionData._interruptCallbacks.push(function(){N.emit("plotly_transitioninterrupted",[])});var Z=0,J=0;function ee(){return Z++,function(){var re;J++,q||J!==Z||(re=W,N._transitionData&&(function(ae){if(ae)for(;ae.length;)ae.shift()}(N._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(V.redraw)return b.call("redraw",N)}).then(function(){N._transitioning=!1,N._transitioningWithDuration=!1,N.emit("plotly_transitioned",[])}).then(re)))}}V.runFn(ee),setTimeout(ee())})}],$=e.syncOrAsync(te,N);return $&&$.then||($=Promise.resolve()),$.then(function(){return N})}f.didMarginChange=function(N,F){for(var V=0;V<P.length;V++){var q=P[V],te=N[q],$=F[q];if(!T(te)||Math.abs($-te)>1)return!0}return!1},f.graphJson=function(N,F,V,q,te,$){(te&&F&&!N._fullData||te&&!F&&!N._fullLayout)&&f.supplyDefaults(N);var W=te?N._fullData:N.data,Z=te?N._fullLayout:N.layout,J=(N._transitionData||{})._frames;function ee(oe,ce){if(typeof oe=="function")return ce?"_function_":null;if(e.isPlainObject(oe)){var pe,ve={};return Object.keys(oe).sort().forEach(function(we){if(["_","["].indexOf(we.charAt(0))===-1)if(typeof oe[we]!="function"){if(V==="keepdata"){if(we.substr(we.length-3)==="src")return}else if(V==="keepstream"){if(typeof(pe=oe[we+"src"])=="string"&&pe.indexOf(":")>0&&!e.isPlainObject(oe.stream))return}else if(V!=="keepall"&&typeof(pe=oe[we+"src"])=="string"&&pe.indexOf(":")>0)return;ve[we]=ee(oe[we],ce)}else ce&&(ve[we]="_function")}),ve}return Array.isArray(oe)?oe.map(function(we){return ee(we,ce)}):e.isTypedArray(oe)?e.simpleMap(oe,e.identity):e.isJSDate(oe)?e.ms2DateTimeLocal(+oe):oe}var re={data:(W||[]).map(function(oe){var ce=ee(oe);return F&&delete ce.fit,ce})};if(!F&&(re.layout=ee(Z),te)){var ae=Z._size;re.layout.computed={margin:{b:ae.b,l:ae.l,r:ae.r,t:ae.t}}}return J&&(re.frames=ee(J)),$&&(re.config=ee(N._context,!0)),q==="object"?re:JSON.stringify(re)},f.modifyFrames=function(N,F){var V,q,te,$=N._transitionData._frames,W=N._transitionData._frameHash;for(V=0;V<F.length;V++)switch((q=F[V]).type){case"replace":te=q.value;var Z=($[q.index]||{}).name,J=te.name;$[q.index]=W[J]=te,J!==Z&&(delete W[Z],W[J]=te);break;case"insert":W[(te=q.value).name]=te,$.splice(q.index,0,te);break;case"delete":delete W[(te=$[q.index]).name],$.splice(q.index,1)}return Promise.resolve()},f.computeFrame=function(N,F){var V,q,te,$,W=N._transitionData._frameHash;if(!F)throw new Error("computeFrame must be given a string frame name");var Z=W[F.toString()];if(!Z)return!1;for(var J=[Z],ee=[Z.name];Z.baseframe&&(Z=W[Z.baseframe.toString()])&&ee.indexOf(Z.name)===-1;)J.push(Z),ee.push(Z.name);for(var re={};Z=J.pop();)if(Z.layout&&(re.layout=f.extendLayout(re.layout,Z.layout)),Z.data){if(re.data||(re.data=[]),!(q=Z.traces))for(q=[],V=0;V<Z.data.length;V++)q[V]=V;for(re.traces||(re.traces=[]),V=0;V<Z.data.length;V++)(te=q[V])!=null&&(($=re.traces.indexOf(te))===-1&&($=re.data.length,re.traces[$]=te),re.data[$]=f.extendTrace(re.data[$],Z.data[V]))}return re},f.recomputeFrameHash=function(N){for(var F=N._transitionData._frameHash={},V=N._transitionData._frames,q=0;q<V.length;q++){var te=V[q];te&&te.name&&(F[te.name]=te)}},f.extendObjectWithContainers=function(N,F,V){var q,te,$,W,Z,J,ee,re=e.extendDeepNoArrays({},F||{}),ae=e.expandObjectPaths(re),oe={};if(V&&V.length)for($=0;$<V.length;$++)(te=(q=e.nestedProperty(ae,V[$])).get())===void 0?e.nestedProperty(oe,V[$]).set(null):(q.set(null),e.nestedProperty(oe,V[$]).set(te));if(N=e.extendDeepNoArrays(N||{},ae),V&&V.length){for($=0;$<V.length;$++)if(J=e.nestedProperty(oe,V[$]).get()){for(ee=(Z=e.nestedProperty(N,V[$])).get(),Array.isArray(ee)||(ee=[],Z.set(ee)),W=0;W<J.length;W++){var ce=J[W];ee[W]=ce===null?null:f.extendObjectWithContainers(ee[W],ce)}Z.set(ee)}}return N},f.dataArrayContainers=["transforms","dimensions"],f.layoutArrayContainers=b.layoutArrayContainers,f.extendTrace=function(N,F){return f.extendObjectWithContainers(N,F,f.dataArrayContainers)},f.extendLayout=function(N,F){return f.extendObjectWithContainers(N,F,f.layoutArrayContainers)},f.transition=function(N,F,V,q,te,$){var W={redraw:te.redraw},Z={},J=[];return W.prepareFn=function(){for(var ee=Array.isArray(F)?F.length:0,re=q.slice(0,ee),ae=0;ae<re.length;ae++){var oe=re[ae],ce=N._fullData[oe]._module;if(ce){if(ce.animatable){var pe=ce.basePlotModule.name;Z[pe]||(Z[pe]=[]),Z[pe].push(oe)}N.data[re[ae]]=f.extendTrace(N.data[re[ae]],F[ae])}}var ve=e.expandObjectPaths(e.extendDeepNoArrays({},V)),we=/^[xy]axis[0-9]*$/;for(var xe in ve)we.test(xe)&&delete ve[xe].range;f.extendLayout(N.layout,ve),delete N.calcdata,f.supplyDefaults(N),f.doCalcdata(N);var ge=e.expandObjectPaths(V);if(ge){var Oe=N._fullLayout._plots;for(var Ae in Oe){var Te=Oe[Ae],se=Te.xaxis,le=Te.yaxis,ne=se.range.slice(),me=le.range.slice(),Ee=null,be=null,De=null,Ue=null;Array.isArray(ge[se._name+".range"])?Ee=ge[se._name+".range"].slice():Array.isArray((ge[se._name]||{}).range)&&(Ee=ge[se._name].range.slice()),Array.isArray(ge[le._name+".range"])?be=ge[le._name+".range"].slice():Array.isArray((ge[le._name]||{}).range)&&(be=ge[le._name].range.slice()),ne&&Ee&&(se.r2l(ne[0])!==se.r2l(Ee[0])||se.r2l(ne[1])!==se.r2l(Ee[1]))&&(De={xr0:ne,xr1:Ee}),me&&be&&(le.r2l(me[0])!==le.r2l(be[0])||le.r2l(me[1])!==le.r2l(be[1]))&&(Ue={yr0:me,yr1:be}),(De||Ue)&&J.push(e.extendFlat({plotinfo:Te},De,Ue))}}return Promise.resolve()},W.runFn=function(ee){var re,ae,oe=N._fullLayout._basePlotModules,ce=J.length;if(V)for(ae=0;ae<oe.length;ae++)oe[ae].transitionAxes&&oe[ae].transitionAxes(N,J,$,ee);for(var pe in ce?((re=e.extendFlat({},$)).duration=0,delete Z.cartesian):re=$,Z){var ve=Z[pe];N._fullData[ve[0]]._module.basePlotModule.plot(N,ve,re,ee)}},D(N,$,W)},f.transitionFromReact=function(N,F,V,q){var te=N._fullLayout,$=te.transition,W={},Z=[];return W.prepareFn=function(){var J=te._plots;for(var ee in W.redraw=!1,F.anim==="some"&&(W.redraw=!0),V.anim==="some"&&(W.redraw=!0),J){var re=J[ee],ae=re.xaxis,oe=re.yaxis,ce=q[ae._name].range.slice(),pe=q[oe._name].range.slice(),ve=ae.range.slice(),we=oe.range.slice();ae.setScale(),oe.setScale();var xe=null,ge=null;ae.r2l(ce[0])===ae.r2l(ve[0])&&ae.r2l(ce[1])===ae.r2l(ve[1])||(xe={xr0:ce,xr1:ve}),oe.r2l(pe[0])===oe.r2l(we[0])&&oe.r2l(pe[1])===oe.r2l(we[1])||(ge={yr0:pe,yr1:we}),(xe||ge)&&Z.push(e.extendFlat({plotinfo:re},xe,ge))}return Promise.resolve()},W.runFn=function(J){for(var ee,re,ae,oe=N._fullData,ce=N._fullLayout._basePlotModules,pe=[],ve=0;ve<oe.length;ve++)pe.push(ve);function we(){if(N._fullLayout)for(var ge=0;ge<ce.length;ge++)ce[ge].transitionAxes&&ce[ge].transitionAxes(N,Z,ee,J)}function xe(){if(N._fullLayout)for(var ge=0;ge<ce.length;ge++)ce[ge].plot(N,ae,re,J)}Z.length&&F.anim?$.ordering==="traces first"?(ee=e.extendFlat({},$,{duration:0}),ae=pe,re=$,setTimeout(we,$.duration),xe()):(ee=$,ae=null,re=e.extendFlat({},$,{duration:0}),setTimeout(xe,ee.duration),we()):Z.length?(ee=$,we()):F.anim&&(ae=pe,re=$,xe())},D(N,$,W)},f.doCalcdata=function(N,F){var V,q,te,$,W=n.list(N),Z=N._fullData,J=N._fullLayout,ee=new Array(Z.length),re=(N.calcdata||[]).slice();for(N.calcdata=ee,J._numBoxes=0,J._numViolins=0,J._violinScaleGroupStats={},N._hmpixcount=0,N._hmlumcount=0,J._piecolormap={},J._sunburstcolormap={},J._treemapcolormap={},J._iciclecolormap={},J._funnelareacolormap={},te=0;te<Z.length;te++)Array.isArray(F)&&F.indexOf(te)===-1&&(ee[te]=re[te]);for(te=0;te<Z.length;te++)(V=Z[te])._arrayAttrs=d.findArrayAttributes(V),V._extremes={};var ae=J._subplots.polar||[];for(te=0;te<ae.length;te++)W.push(J[ae[te]].radialaxis,J[ae[te]].angularaxis);for(var oe in J._colorAxes){var ce=J[oe];ce.cauto!==!1&&(delete ce.cmin,delete ce.cmax)}var pe=!1;function ve(ge){if(V=Z[ge],q=V._module,V.visible===!0&&V.transforms){if(q&&q.calc){var Oe=q.calc(N,V);Oe[0]&&Oe[0].t&&Oe[0].t._scene&&delete Oe[0].t._scene.dirty}for($=0;$<V.transforms.length;$++){var Ae=V.transforms[$];(q=y[Ae.type])&&q.calcTransform&&(V._hasCalcTransform=!0,pe=!0,q.calcTransform(N,V,Ae))}}}function we(ge,Oe){if(V=Z[ge],!!(q=V._module).isContainer===Oe){var Ae=[];if(V.visible===!0&&V._length!==0){delete V._indexToPoints;var Te=V.transforms||[];for($=Te.length-1;$>=0;$--)if(Te[$].enabled){V._indexToPoints=Te[$]._indexToPoints;break}q&&q.calc&&(Ae=q.calc(N,V))}Array.isArray(Ae)&&Ae[0]||(Ae=[{x:r,y:r}]),Ae[0].t||(Ae[0].t={}),Ae[0].trace=V,ee[ge]=Ae}}for(I(W,Z,J),te=0;te<Z.length;te++)we(te,!0);for(te=0;te<Z.length;te++)ve(te);for(pe&&I(W,Z,J),te=0;te<Z.length;te++)we(te,!0);for(te=0;te<Z.length;te++)we(te,!1);H(N);var xe=function(ge,Oe){var Ae,Te,se,le,ne,me=[];function Ee(Ye,Xe,Ve){var We=Xe._id.charAt(0);if(Ye==="histogram2dcontour"){var nt=Xe._counterAxes[0],ot=n.getFromId(Oe,nt),Ie=We==="x"||nt==="x"&&ot.type==="category",ze=We==="y"||nt==="y"&&ot.type==="category";return function(et,tt){return et===0||tt===0||Ie&&et===Ve[tt].length-1||ze&&tt===Ve.length-1?-1:(We==="y"?tt:et)-1}}return function(et,tt){return We==="y"?tt:et}}var be={min:function(Ye){return e.aggNums(Math.min,null,Ye)},max:function(Ye){return e.aggNums(Math.max,null,Ye)},sum:function(Ye){return e.aggNums(function(Xe,Ve){return Xe+Ve},null,Ye)},total:function(Ye){return e.aggNums(function(Xe,Ve){return Xe+Ve},null,Ye)},mean:function(Ye){return e.mean(Ye)},median:function(Ye){return e.median(Ye)}};for(Ae=0;Ae<ge.length;Ae++){var De=ge[Ae];if(De.type==="category"){var Ue=De.categoryorder.match(G);if(Ue){var he=Ue[1],ke=Ue[2],_e=De._id.charAt(0),Ce=_e==="x",Fe=[];for(Te=0;Te<De._categories.length;Te++)Fe.push([De._categories[Te],[]]);for(Te=0;Te<De._traceIndices.length;Te++){var Re=De._traceIndices[Te],He=Oe._fullData[Re];if(He.visible===!0){var Ge=He.type;b.traceIs(He,"histogram")&&(delete He._xautoBinFinished,delete He._yautoBinFinished);var $e=Ge==="splom",st=Ge==="scattergl",Ke=Oe.calcdata[Re];for(se=0;se<Ke.length;se++){var gt,mt,at=Ke[se];if($e){var rt=He._axesDim[De._id];if(!Ce){var xt=He._diag[rt][0];xt&&(De=Oe._fullLayout[n.id2name(xt)])}var Tt=at.trace.dimensions[rt].values;for(le=0;le<Tt.length;le++)for(gt=De._categoriesMap[Tt[le]],ne=0;ne<at.trace.dimensions.length;ne++)if(ne!==rt){var wt=at.trace.dimensions[ne];Fe[gt][1].push(wt.values[le])}}else if(st){for(le=0;le<at.t.x.length;le++)Ce?(gt=at.t.x[le],mt=at.t.y[le]):(gt=at.t.y[le],mt=at.t.x[le]),Fe[gt][1].push(mt);at.t&&at.t._scene&&delete at.t._scene.dirty}else if(at.hasOwnProperty("z")){mt=at.z;var Ot=Ee(He.type,De,mt);for(le=0;le<mt.length;le++)for(ne=0;ne<mt[le].length;ne++)(gt=Ot(ne,le))+1&&Fe[gt][1].push(mt[le][ne])}else for((gt=at.p)===void 0&&(gt=at[_e]),(mt=at.s)===void 0&&(mt=at.v),mt===void 0&&(mt=Ce?at.y:at.x),Array.isArray(mt)||(mt=mt===void 0?[]:[mt]),le=0;le<mt.length;le++)Fe[gt][1].push(mt[le])}}}De._categoriesValue=Fe;var Ct=[];for(Te=0;Te<Fe.length;Te++)Ct.push([Fe[Te][0],be[he](Fe[Te][1])]);Ct.sort(function(Ye,Xe){return Ye[1]-Xe[1]}),De._categoriesAggregatedValue=Ct,De._initialCategories=Ct.map(function(Ye){return Ye[0]}),ke==="descending"&&De._initialCategories.reverse(),me=me.concat(De.sortByInitialCategories())}}}return me}(W,N);if(xe.length){for(J._numBoxes=0,J._numViolins=0,te=0;te<xe.length;te++)we(xe[te],!0);for(te=0;te<xe.length;te++)we(xe[te],!1);H(N)}b.getComponentMethod("fx","calc")(N),b.getComponentMethod("errorbars","calc")(N)};var G=/(total|sum|min|max|mean|median) (ascending|descending)/;function I(N,F,V){var q={};function te(J){J.clearCalc(),J.type==="multicategory"&&J.setupMultiCategory(F),q[J._id]=1}e.simpleMap(N,te);for(var $=V._axisMatchGroups||[],W=0;W<$.length;W++)for(var Z in $[W])q[Z]||te(V[n.id2name(Z)])}function H(N){var F,V,q,te=N._fullLayout,$=te._visibleModules,W={};for(V=0;V<$.length;V++){var Z=$[V],J=Z.crossTraceCalc;if(J){var ee=Z.basePlotModule.name;W[ee]?e.pushUnique(W[ee],J):W[ee]=[J]}}for(q in W){var re=W[q],ae=te._subplots[q];if(Array.isArray(ae))for(F=0;F<ae.length;F++){var oe=ae[F],ce=q==="cartesian"?te._plots[oe]:te[oe];for(V=0;V<re.length;V++)re[V](N,ce,oe)}else for(V=0;V<re.length;V++)re[V](N)}}f.rehover=function(N){N._fullLayout._rehover&&N._fullLayout._rehover()},f.redrag=function(N){N._fullLayout._redrag&&N._fullLayout._redrag()},f.reselect=function(N){var F=N._fullLayout,V=(N.layout||{}).selections,q=F._previousSelections;F._previousSelections=V;var te=F._reselect||JSON.stringify(V)!==JSON.stringify(q);b.getComponentMethod("selections","reselect")(N,te)},f.generalUpdatePerTraceModule=function(N,F,V,q){var te,$=F.traceHash,W={};for(te=0;te<V.length;te++){var Z=V[te],J=Z[0].trace;J.visible&&(W[J.type]=W[J.type]||[],W[J.type].push(Z))}for(var ee in $)if(!W[ee]){var re=$[ee][0];re[0].trace.visible=!1,W[ee]=[re]}for(var ae in W){var oe=W[ae];oe[0][0].trace._module.plot(N,F,e.filterVisible(oe),q)}F.traceHash=W},f.plotBasePlot=function(N,F,V,q,te){var $=b.getModule(N),W=c(F.calcdata,$)[0];$.plot(F,W,q,te)},f.cleanBasePlot=function(N,F,V,q,te){var $=te._has&&te._has(N),W=V._has&&V._has(N);$&&!W&&te["_"+N+"layer"].selectAll("g.trace").remove()}},9813:function(Q){Q.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},10869:function(Q,z,t){var S=t(71828),k=t(61082).tester,l=S.findIndexOfMin,T=S.isAngleInsideSector,b=S.angleDelta,d=S.angleDist;function s(n,a,o,u){var p,c,x=u[0],g=u[1],f=i(Math.sin(a)-Math.sin(n)),y=i(Math.cos(a)-Math.cos(n)),v=Math.tan(o),m=i(1/v),_=f/y,h=g-_*x;return m?f&&y?c=v*(p=h/(v-_)):y?(p=g*m,c=g):(p=x,c=x*v):f&&y?(p=0,c=h):y?(p=0,c=g):p=c=NaN,[p,c]}function e(n,a,o,u){return S.isFullCircle([a,o])?function(p,c){var x,g=c.length,f=new Array(g+1);for(x=0;x<g;x++){var y=c[x];f[x]=[p*Math.cos(y),p*Math.sin(y)]}return f[x]=f[0].slice(),f}(n,u):function(p,c,x,g){var f,y,v=g.length,m=[];function _(G){return[p*Math.cos(G),p*Math.sin(G)]}function h(G,I,H){return s(G,I,H,_(G))}function A(G){return S.mod(G,v)}function w(G){return T(G,[c,x])}var E=l(g,function(G){return w(G)?d(G,c):1/0}),L=h(g[E],g[A(E-1)],c);for(m.push(L),f=E,y=0;y<v;f++,y++){var C=g[A(f)];if(!w(C))break;m.push(_(C))}var P=l(g,function(G){return w(G)?d(G,x):1/0}),D=h(g[P],g[A(P+1)],x);return m.push(D),m.push([0,0]),m.push(m[0].slice()),m}(n,a,o,u)}function i(n){return Math.abs(n)>1e-10?n:0}function r(n,a,o){a=a||0,o=o||0;for(var u=n.length,p=new Array(u),c=0;c<u;c++){var x=n[c];p[c]=[a+x[0],o-x[1]]}return p}Q.exports={isPtInsidePolygon:function(n,a,o,u,p){if(!T(a,u))return!1;var c,x;o[0]<o[1]?(c=o[0],x=o[1]):(c=o[1],x=o[0]);var g=k(e(c,u[0],u[1],p)),f=k(e(x,u[0],u[1],p)),y=[n*Math.cos(a),n*Math.sin(a)];return f.contains(y)&&!g.contains(y)},findPolygonOffset:function(n,a,o,u){for(var p=1/0,c=1/0,x=e(n,a,o,u),g=0;g<x.length;g++){var f=x[g];p=Math.min(p,f[0]),c=Math.min(c,-f[1])}return[p,c]},findEnclosingVertexAngles:function(n,a){var o=l(a,function(p){var c=b(p,n);return c>0?c:1/0}),u=S.mod(o+1,a.length);return[a[o],a[u]]},findIntersectionXY:s,findXYatLength:function(n,a,o,u){var p=-a*o,c=a*a+1,x=2*(a*p-o),g=p*p+o*o-n*n,f=Math.sqrt(x*x-4*c*g),y=(-x+f)/(2*c),v=(-x-f)/(2*c);return[[y,a*y+p+u],[v,a*v+p+u]]},clampTiny:i,pathPolygon:function(n,a,o,u,p,c){return"M"+r(e(n,a,o,u),p,c).join("L")},pathPolygonAnnulus:function(n,a,o,u,p,c,x){var g,f;n<a?(g=n,f=a):(g=a,f=n);var y=r(e(g,o,u,p),c,x);return"M"+r(e(f,o,u,p),c,x).reverse().join("L")+"M"+y.join("L")}}},23580:function(Q,z,t){var S=t(27659).AU,k=t(71828).counterRegex,l=t(77997),T=t(9813),b=T.attr,d=T.name,s=k(d),e={};e[b]={valType:"subplotid",dflt:d,editType:"calc"},Q.exports={attr:b,name:d,idRoot:d,idRegex:s,attrRegex:s,attributes:e,layoutAttributes:t(73812),supplyLayoutDefaults:t(68993),plot:function(i){for(var r=i._fullLayout,n=i.calcdata,a=r._subplots[d],o=0;o<a.length;o++){var u=a[o],p=S(n,d,u),c=r[u]._subplot;c||(c=l(i,u),r[u]._subplot=c),c.plot(p,r,i._promises)}},clean:function(i,r,n,a){for(var o=a._subplots[d]||[],u=a._has&&a._has("gl"),p=r._has&&r._has("gl"),c=u&&!p,x=0;x<o.length;x++){var g=o[x],f=a[g]._subplot;if(!r[g]&&f)for(var y in f.framework.remove(),f.layers["radial-axis-title"].remove(),f.clipPaths)f.clipPaths[y].remove();c&&f._scene&&(f._scene.destroy(),f._scene=null)}},toSVG:t(93612).toSVG}},73812:function(Q,z,t){var S=t(22399),k=t(13838),l=t(27670).Y,T=t(71828).extendFlat,b=t(30962).overrideAll,d=b({color:k.color,showline:T({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:T({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),s=b({tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,ticklabelstep:k.ticklabelstep,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickfont:k.tickfont,tickangle:k.tickangle,tickformat:k.tickformat,tickformatstops:k.tickformatstops,layer:k.layer},"plot","from-root"),e={visible:T({},k.visible,{dflt:!0}),type:T({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorange:T({},k.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:T({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:k.categoryorder,categoryarray:k.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:T({},k.title.text,{editType:"plot",dflt:""}),font:T({},k.title.font,{editType:"plot"}),editType:"plot"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}};T(e,d,s);var i={visible:T({},k.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:k.autotypenumbers,categoryorder:k.categoryorder,categoryarray:k.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};T(i,d,s),Q.exports={domain:l({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:S.background},radialaxis:e,angularaxis:i,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},68993:function(Q,z,t){var S=t(71828),k=t(7901),l=t(44467),T=t(49119),b=t(27659).NG,d=t(26218),s=t(38701),e=t(96115),i=t(89426),r=t(15258),n=t(92128),a=t(4322),o=t(73812),u=t(12101),p=t(9813),c=p.axisNames;function x(f,y,v,m){var _=v("bgcolor");m.bgColor=k.combine(_,m.paper_bgcolor);var h=v("sector");v("hole");var A,w=b(m.fullData,p.name,m.id),E=m.layoutOut;function L(J,ee){return v(A+"."+J,ee)}for(var C=0;C<c.length;C++){A=c[C],S.isPlainObject(f[A])||(f[A]={});var P=f[A],D=l.newContainer(y,A);D._id=D._name=A,D._attr=m.id+"."+A,D._traceIndices=w.map(function(J){return J._expandedIndex});var G=p.axisName2dataArray[A],I=g(P,D,L,w,G,m);r(P,D,L,{axData:w,dataAttr:G});var H=L("visible");switch(u(D,y,E),L("uirevision",y.uirevision),D._m=1,A){case"radialaxis":var N=L("autorange",!D.isValidRange(P.range));P.autorange=N,!N||I!=="linear"&&I!=="-"||L("rangemode"),N==="reversed"&&(D._m=-1),L("range"),D.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(I==="date"){S.log("Polar plots do not support date angular axes yet.");for(var F=0;F<w.length;F++)w[F].visible=!1;I=P.type=D.type="linear"}L(I==="linear"?"thetaunit":"period");var V=L("direction");L("rotation",{counterclockwise:0,clockwise:90}[V])}if(i(P,D,L,D.type,{tickSuffixDflt:D.thetaunit==="degrees"?"":void 0}),H){var q,te,$,W,Z=m.font||{};te=(q=L("color"))===P.color?q:Z.color,$=Z.size,W=Z.family,d(P,D,L,D.type),e(P,D,L,D.type,{font:{color:te,size:$,family:W}}),s(P,D,L,{outerTicks:!0}),n(P,D,L,{dfltColor:q,bgColor:m.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:o[A]}),L("layer"),A==="radialaxis"&&(L("side"),L("angle",h[0]),L("title.text"),S.coerceFont(L,"title.font",{color:te,size:S.bigFont($),family:W}))}I!=="category"&&L("hoverformat"),D._input=P}y.angularaxis.type==="category"&&v("gridshape")}function g(f,y,v,m,_,h){var A=v("autotypenumbers",h.autotypenumbersDflt);if(v("type")==="-"){for(var w,E=0;E<m.length;E++)if(m[E].visible){w=m[E];break}w&&w[_]&&(y.type=a(w[_],"gregorian",{noMultiCategory:!0,autotypenumbers:A})),y.type==="-"?y.type="linear":f.type=y.type}return y.type}Q.exports=function(f,y,v){T(f,y,v,{type:p.name,attributes:o,handleDefaults:x,font:y.font,autotypenumbersDflt:y.autotypenumbers,paper_bgcolor:y.paper_bgcolor,fullData:v,layoutOut:y})}},77997:function(Q,z,t){var S=t(39898),k=t(84267),l=t(73972),T=t(71828),b=T.strRotate,d=T.strTranslate,s=t(7901),e=t(91424),i=t(74875),r=t(89298),n=t(21994),a=t(12101),o=t(71739).doAutoRange,u=t(29323),p=t(28569),c=t(30211),x=t(92998),g=t(47322).prepSelect,f=t(47322).selectOnClick,y=t(47322).clearOutline,v=t(6964),m=t(33306),_=t(61549).redrawReglTraces,h=t(18783).MID_SHIFT,A=t(9813),w=t(10869),E=t(23893),L=E.smith,C=E.reactanceArc,P=E.resistanceArc,D=E.smithTransform,G=T._,I=T.mod,H=T.deg2rad,N=T.rad2deg;function F(W,Z,J){this.isSmith=J||!1,this.id=Z,this.gd=W,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var ee=W._fullLayout,re="clip"+ee._uid+Z;this.clipIds.forTraces=re+"-for-traces",this.clipPaths.forTraces=ee._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=ee["_"+(J?"smith":"polar")+"layer"].append("g").attr("class",Z),this.getHole=function(ae){return this.isSmith?0:ae.hole},this.getSector=function(ae){return this.isSmith?[0,360]:ae.sector},this.getRadial=function(ae){return this.isSmith?ae.realaxis:ae.radialaxis},this.getAngular=function(ae){return this.isSmith?ae.imaginaryaxis:ae.angularaxis},J||(this.radialTickLayout=null,this.angularTickLayout=null)}var V=F.prototype;function q(W){var Z=W.ticks+String(W.ticklen)+String(W.showticklabels);return"side"in W&&(Z+=W.side),Z}function te(W,Z){return Z[T.findIndexOfMin(Z,function(J){return T.angleDist(W,J)})]}function $(W,Z,J){return Z?(W.attr("display",null),W.attr(J)):W&&W.attr("display","none"),W}Q.exports=function(W,Z,J){return new F(W,Z,J)},V.plot=function(W,Z){for(var J=this,ee=Z[J.id],re=!1,ae=0;ae<W.length;ae++)if(W[ae][0].trace.cliponaxis===!1){re=!0;break}J._hasClipOnAxisFalse=re,J.updateLayers(Z,ee),J.updateLayout(Z,ee),i.generalUpdatePerTraceModule(J.gd,J,W,ee),J.updateFx(Z,ee),J.isSmith&&(delete ee.realaxis.range,delete ee.imaginaryaxis.range)},V.updateLayers=function(W,Z){var J=this,ee=J.isSmith,re=J.layers,ae=J.getRadial(Z),oe=J.getAngular(Z),ce=A.layerNames,pe=ce.indexOf("frontplot"),ve=ce.slice(0,pe),we=oe.layer==="below traces",xe=ae.layer==="below traces";we&&ve.push("angular-line"),xe&&ve.push("radial-line"),we&&ve.push("angular-axis"),xe&&ve.push("radial-axis"),ve.push("frontplot"),we||ve.push("angular-line"),xe||ve.push("radial-line"),we||ve.push("angular-axis"),xe||ve.push("radial-axis");var ge=(ee?"smith":"polar")+"sublayer",Oe=J.framework.selectAll("."+ge).data(ve,String);Oe.enter().append("g").attr("class",function(Ae){return ge+" "+Ae}).each(function(Ae){var Te=re[Ae]=S.select(this);switch(Ae){case"frontplot":ee||Te.append("g").classed("barlayer",!0),Te.append("g").classed("scatterlayer",!0);break;case"backplot":Te.append("g").classed("maplayer",!0);break;case"plotbg":re.bg=Te.append("path");break;case"radial-grid":case"angular-grid":Te.style("fill","none");break;case"radial-line":Te.append("line").style("fill","none");break;case"angular-line":Te.append("path").style("fill","none")}}),Oe.order()},V.updateLayout=function(W,Z){var J=this,ee=J.layers,re=W._size,ae=J.getRadial(Z),oe=J.getAngular(Z),ce=Z.domain.x,pe=Z.domain.y;J.xOffset=re.l+re.w*ce[0],J.yOffset=re.t+re.h*(1-pe[1]);var ve=J.xLength=re.w*(ce[1]-ce[0]),we=J.yLength=re.h*(pe[1]-pe[0]),xe=J.getSector(Z);J.sectorInRad=xe.map(H);var ge,Oe,Ae,Te,se,le=J.sectorBBox=function(st){var Ke,gt=st[0],mt=st[1]-gt,at=I(gt,360),rt=at+mt,xt=Math.cos(H(at)),Tt=Math.sin(H(at)),wt=Math.cos(H(rt)),Ot=Math.sin(H(rt));return Ke=at<=90&&rt>=90||at>90&&rt>=450?1:Tt<=0&&Ot<=0?0:Math.max(Tt,Ot),[at<=180&&rt>=180||at>180&&rt>=540?-1:xt>=0&&wt>=0?0:Math.min(xt,wt),at<=270&&rt>=270||at>270&&rt>=630?-1:Tt>=0&&Ot>=0?0:Math.min(Tt,Ot),rt>=360?1:xt<=0&&wt<=0?0:Math.max(xt,wt),Ke]}(xe),ne=le[2]-le[0],me=le[3]-le[1],Ee=we/ve,be=Math.abs(me/ne);Ee>be?(ge=ve,se=(we-(Oe=ve*be))/re.h/2,Ae=[ce[0],ce[1]],Te=[pe[0]+se,pe[1]-se]):(Oe=we,se=(ve-(ge=we/be))/re.w/2,Ae=[ce[0]+se,ce[1]-se],Te=[pe[0],pe[1]]),J.xLength2=ge,J.yLength2=Oe,J.xDomain2=Ae,J.yDomain2=Te;var De,Ue=J.xOffset2=re.l+re.w*Ae[0],he=J.yOffset2=re.t+re.h*(1-Te[1]),ke=J.radius=ge/ne,_e=J.innerRadius=J.getHole(Z)*ke,Ce=J.cx=Ue-ke*le[0],Fe=J.cy=he+ke*le[3],Re=J.cxx=Ce-Ue,He=J.cyy=Fe-he,Ge=ae.side;Ge==="counterclockwise"?(De=Ge,Ge="top"):Ge==="clockwise"&&(De=Ge,Ge="bottom"),J.radialAxis=J.mockAxis(W,Z,ae,{_id:"x",side:Ge,_trueSide:De,domain:[_e/re.w,ke/re.w]}),J.angularAxis=J.mockAxis(W,Z,oe,{side:"right",domain:[0,Math.PI],autorange:!1}),J.doAutoRange(W,Z),J.updateAngularAxis(W,Z),J.updateRadialAxis(W,Z),J.updateRadialAxisTitle(W,Z),J.xaxis=J.mockCartesianAxis(W,Z,{_id:"x",domain:Ae}),J.yaxis=J.mockCartesianAxis(W,Z,{_id:"y",domain:Te});var $e=J.pathSubplot();J.clipPaths.forTraces.select("path").attr("d",$e).attr("transform",d(Re,He)),ee.frontplot.attr("transform",d(Ue,he)).call(e.setClipUrl,J._hasClipOnAxisFalse?null:J.clipIds.forTraces,J.gd),ee.bg.attr("d",$e).attr("transform",d(Ce,Fe)).call(s.fill,Z.bgcolor)},V.mockAxis=function(W,Z,J,ee){var re=T.extendFlat({},J,ee);return a(re,Z,W),re},V.mockCartesianAxis=function(W,Z,J){var ee=this,re=ee.isSmith,ae=J._id,oe=T.extendFlat({type:"linear"},J);n(oe,W);var ce={x:[0,2],y:[1,3]};return oe.setRange=function(){var pe=ee.sectorBBox,ve=ce[ae],we=ee.radialAxis._rl,xe=(we[1]-we[0])/(1-ee.getHole(Z));oe.range=[pe[ve[0]]*xe,pe[ve[1]]*xe]},oe.isPtWithinRange=ae!=="x"||re?function(){return!0}:function(pe){return ee.isPtInside(pe)},oe.setRange(),oe.setScale(),oe},V.doAutoRange=function(W,Z){var J=this,ee=J.gd,re=J.radialAxis,ae=J.getRadial(Z);o(ee,re);var oe=re.range;ae.range=oe.slice(),ae._input.range=oe.slice(),re._rl=[re.r2l(oe[0],null,"gregorian"),re.r2l(oe[1],null,"gregorian")]},V.updateRadialAxis=function(W,Z){var J=this,ee=J.gd,re=J.layers,ae=J.radius,oe=J.innerRadius,ce=J.cx,pe=J.cy,ve=J.getRadial(Z),we=I(J.getSector(Z)[0],360),xe=J.radialAxis,ge=oe<ae,Oe=J.isSmith;Oe||(J.fillViewInitialKey("radialaxis.angle",ve.angle),J.fillViewInitialKey("radialaxis.range",xe.range.slice()),xe.setGeometry()),xe.tickangle==="auto"&&we>90&&we<=270&&(xe.tickangle=180);var Ae=Oe?function(he){var ke=D(J,L([he.x,0]));return d(ke[0]-ce,ke[1]-pe)}:function(he){return d(xe.l2p(he.x)+oe,0)},Te=Oe?function(he){return P(J,he.x,-1/0,1/0)}:function(he){return J.pathArc(xe.r2p(he.x)+oe)},se=q(ve);if(J.radialTickLayout!==se&&(re["radial-axis"].selectAll(".xtick").remove(),J.radialTickLayout=se),ge){xe.setScale();var le=0,ne=Oe?(xe.tickvals||[]).filter(function(he){return he>=0}).map(function(he){return r.tickText(xe,he,!0,!1)}):r.calcTicks(xe),me=Oe?ne:r.clipEnds(xe,ne),Ee=r.getTickSigns(xe)[2];Oe&&((xe.ticks==="top"&&xe.side==="bottom"||xe.ticks==="bottom"&&xe.side==="top")&&(Ee=-Ee),xe.ticks==="top"&&xe.side==="top"&&(le=-xe.ticklen),xe.ticks==="bottom"&&xe.side==="bottom"&&(le=xe.ticklen)),r.drawTicks(ee,xe,{vals:ne,layer:re["radial-axis"],path:r.makeTickPath(xe,0,Ee),transFn:Ae,crisp:!1}),r.drawGrid(ee,xe,{vals:me,layer:re["radial-grid"],path:Te,transFn:T.noop,crisp:!1}),r.drawLabels(ee,xe,{vals:ne,layer:re["radial-axis"],transFn:Ae,labelFns:r.makeLabelFns(xe,le)})}var be=J.radialAxisAngle=J.vangles?N(te(H(ve.angle),J.vangles)):ve.angle,De=d(ce,pe),Ue=De+b(-be);$(re["radial-axis"],ge&&(ve.showticklabels||ve.ticks),{transform:Ue}),$(re["radial-grid"],ge&&ve.showgrid,{transform:Oe?"":De}),$(re["radial-line"].select("line"),ge&&ve.showline,{x1:Oe?-ae:oe,y1:0,x2:ae,y2:0,transform:Ue}).attr("stroke-width",ve.linewidth).call(s.stroke,ve.linecolor)},V.updateRadialAxisTitle=function(W,Z,J){if(!this.isSmith){var ee=this,re=ee.gd,ae=ee.radius,oe=ee.cx,ce=ee.cy,pe=ee.getRadial(Z),ve=ee.id+"title",we=0;if(pe.title){var xe=e.bBox(ee.layers["radial-axis"].node()).height,ge=pe.title.font.size,Oe=pe.side;we=Oe==="top"?ge:Oe==="counterclockwise"?-(xe+.4*ge):xe+.8*ge}var Ae=J!==void 0?J:ee.radialAxisAngle,Te=H(Ae),se=Math.cos(Te),le=Math.sin(Te),ne=oe+ae/2*se+we*le,me=ce-ae/2*le+we*se;ee.layers["radial-axis-title"]=x.draw(re,ve,{propContainer:pe,propName:ee.id+".radialaxis.title",placeholder:G(re,"Click to enter radial axis title"),attributes:{x:ne,y:me,"text-anchor":"middle"},transform:{rotate:-Ae}})}},V.updateAngularAxis=function(W,Z){var J=this,ee=J.gd,re=J.layers,ae=J.radius,oe=J.innerRadius,ce=J.cx,pe=J.cy,ve=J.getAngular(Z),we=J.angularAxis,xe=J.isSmith;xe||(J.fillViewInitialKey("angularaxis.rotation",ve.rotation),we.setGeometry(),we.setScale());var ge=xe?function(he){var ke=D(J,L([0,he.x]));return Math.atan2(ke[0]-ce,ke[1]-pe)-Math.PI/2}:function(he){return we.t2g(he.x)};we.type==="linear"&&we.thetaunit==="radians"&&(we.tick0=N(we.tick0),we.dtick=N(we.dtick));var Oe=function(he){return d(ce+ae*Math.cos(he),pe-ae*Math.sin(he))},Ae=xe?function(he){var ke=D(J,L([0,he.x]));return d(ke[0],ke[1])}:function(he){return Oe(ge(he))},Te=xe?function(he){var ke=D(J,L([0,he.x])),_e=Math.atan2(ke[0]-ce,ke[1]-pe)-Math.PI/2;return d(ke[0],ke[1])+b(-N(_e))}:function(he){var ke=ge(he);return Oe(ke)+b(-N(ke))},se=xe?function(he){return C(J,he.x,0,1/0)}:function(he){var ke=ge(he),_e=Math.cos(ke),Ce=Math.sin(ke);return"M"+[ce+oe*_e,pe-oe*Ce]+"L"+[ce+ae*_e,pe-ae*Ce]},le=r.makeLabelFns(we,0).labelStandoff,ne={xFn:function(he){var ke=ge(he);return Math.cos(ke)*le},yFn:function(he){var ke=ge(he),_e=Math.sin(ke)>0?.2:1;return-Math.sin(ke)*(le+he.fontSize*_e)+Math.abs(Math.cos(ke))*(he.fontSize*h)},anchorFn:function(he){var ke=ge(he),_e=Math.cos(ke);return Math.abs(_e)<.1?"middle":_e>0?"start":"end"},heightFn:function(he,ke,_e){var Ce=ge(he);return-.5*(1+Math.sin(Ce))*_e}},me=q(ve);J.angularTickLayout!==me&&(re["angular-axis"].selectAll("."+we._id+"tick").remove(),J.angularTickLayout=me);var Ee,be=xe?[1/0].concat(we.tickvals||[]).map(function(he){return r.tickText(we,he,!0,!1)}):r.calcTicks(we);if(xe&&(be[0].text="",be[0].fontSize*=1.75),Z.gridshape==="linear"?(Ee=be.map(ge),T.angleDelta(Ee[0],Ee[1])<0&&(Ee=Ee.slice().reverse())):Ee=null,J.vangles=Ee,we.type==="category"&&(be=be.filter(function(he){return T.isAngleInsideSector(ge(he),J.sectorInRad)})),we.visible){var De=we.ticks==="inside"?-1:1,Ue=(we.linewidth||1)/2;r.drawTicks(ee,we,{vals:be,layer:re["angular-axis"],path:"M"+De*Ue+",0h"+De*we.ticklen,transFn:Te,crisp:!1}),r.drawGrid(ee,we,{vals:be,layer:re["angular-grid"],path:se,transFn:T.noop,crisp:!1}),r.drawLabels(ee,we,{vals:be,layer:re["angular-axis"],repositionOnUpdate:!0,transFn:Ae,labelFns:ne})}$(re["angular-line"].select("path"),ve.showline,{d:J.pathSubplot(),transform:d(ce,pe)}).attr("stroke-width",ve.linewidth).call(s.stroke,ve.linecolor)},V.updateFx=function(W,Z){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(W),this.updateRadialDrag(W,Z,0),this.updateRadialDrag(W,Z,1)),this.updateHoverAndMainDrag(W))},V.updateHoverAndMainDrag=function(W){var Z,J,ee=this,re=ee.isSmith,ae=ee.gd,oe=ee.layers,ce=W._zoomlayer,pe=A.MINZOOM,ve=A.OFFEDGE,we=ee.radius,xe=ee.innerRadius,ge=ee.cx,Oe=ee.cy,Ae=ee.cxx,Te=ee.cyy,se=ee.sectorInRad,le=ee.vangles,ne=ee.radialAxis,me=w.clampTiny,Ee=w.findXYatLength,be=w.findEnclosingVertexAngles,De=A.cornerHalfWidth,Ue=A.cornerLen/2,he=u.makeDragger(oe,"path","maindrag",W.dragmode===!1?"none":"crosshair");S.select(he).attr("d",ee.pathSubplot()).attr("transform",d(ge,Oe)),he.onmousemove=function(ot){c.hover(ae,ot,ee.id),ae._fullLayout._lasthover=he,ae._fullLayout._hoversubplot=ee.id},he.onmouseout=function(ot){ae._dragging||p.unhover(ae,ot)};var ke,_e,Ce,Fe,Re,He,Ge,$e,st,Ke={element:he,gd:ae,subplot:ee.id,plotinfo:{id:ee.id,xaxis:ee.xaxis,yaxis:ee.yaxis},xaxes:[ee.xaxis],yaxes:[ee.yaxis]};function gt(ot,Ie){return Math.sqrt(ot*ot+Ie*Ie)}function mt(ot,Ie){return gt(ot-Ae,Ie-Te)}function at(ot,Ie){return Math.atan2(Te-Ie,ot-Ae)}function rt(ot,Ie){return[ot*Math.cos(Ie),ot*Math.sin(-Ie)]}function xt(ot,Ie){if(ot===0)return ee.pathSector(2*De);var ze=Ue/ot,et=Ie-ze,tt=Ie+ze,dt=Math.max(0,Math.min(ot,we)),pt=dt-De,vt=dt+De;return"M"+rt(pt,et)+"A"+[pt,pt]+" 0,0,0 "+rt(pt,tt)+"L"+rt(vt,tt)+"A"+[vt,vt]+" 0,0,1 "+rt(vt,et)+"Z"}function Tt(ot,Ie,ze){if(ot===0)return ee.pathSector(2*De);var et,tt,dt=rt(ot,Ie),pt=rt(ot,ze),vt=me((dt[0]+pt[0])/2),ct=me((dt[1]+pt[1])/2);if(vt&&ct){var kt=ct/vt,ut=-1/kt,ft=Ee(De,kt,vt,ct);et=Ee(Ue,ut,ft[0][0],ft[0][1]),tt=Ee(Ue,ut,ft[1][0],ft[1][1])}else{var bt,It;ct?(bt=Ue,It=De):(bt=De,It=Ue),et=[[vt-bt,ct-It],[vt+bt,ct-It]],tt=[[vt-bt,ct+It],[vt+bt,ct+It]]}return"M"+et.join("L")+"L"+tt.reverse().join("L")+"Z"}function wt(ot,Ie){return Ie=Math.max(Math.min(Ie,we),xe),ot<ve?ot=0:we-ot<ve?ot=we:Ie<ve?Ie=0:we-Ie<ve&&(Ie=we),Math.abs(Ie-ot)>pe?(ot<Ie?(Ce=ot,Fe=Ie):(Ce=Ie,Fe=ot),!0):(Ce=null,Fe=null,!1)}function Ot(ot,Ie){ot=ot||Re,Ie=Ie||"M0,0Z",$e.attr("d",ot),st.attr("d",Ie),u.transitionZoombox($e,st,He,Ge),He=!0;var ze={};We(ze),ae.emit("plotly_relayouting",ze)}function Ct(ot,Ie){var ze,et,tt=ke+(ot*=Z),dt=_e+(Ie*=J),pt=mt(ke,_e),vt=Math.min(mt(tt,dt),we),ct=at(ke,_e);wt(pt,vt)&&(ze=Re+ee.pathSector(Fe),Ce&&(ze+=ee.pathSector(Ce)),et=xt(Ce,ct)+xt(Fe,ct)),Ot(ze,et)}function Ye(ot,Ie,ze,et){var tt=w.findIntersectionXY(ze,et,ze,[ot-Ae,Te-Ie]);return gt(tt[0],tt[1])}function Xe(ot,Ie){var ze,et,tt=ke+ot,dt=_e+Ie,pt=at(ke,_e),vt=at(tt,dt),ct=be(pt,le),kt=be(vt,le);wt(Ye(ke,_e,ct[0],ct[1]),Math.min(Ye(tt,dt,kt[0],kt[1]),we))&&(ze=Re+ee.pathSector(Fe),Ce&&(ze+=ee.pathSector(Ce)),et=[Tt(Ce,ct[0],ct[1]),Tt(Fe,ct[0],ct[1])].join(" ")),Ot(ze,et)}function Ve(){if(u.removeZoombox(ae),Ce!==null&&Fe!==null){var ot={};We(ot),u.showDoubleClickNotifier(ae),l.call("_guiRelayout",ae,ot)}}function We(ot){var Ie=ne._rl,ze=(Ie[1]-Ie[0])/(1-xe/we)/we,et=[Ie[0]+(Ce-xe)*ze,Ie[0]+(Fe-xe)*ze];ot[ee.id+".radialaxis.range"]=et}function nt(ot,Ie){var ze=ae._fullLayout.clickmode;if(u.removeZoombox(ae),ot===2){var et={};for(var tt in ee.viewInitial)et[ee.id+"."+tt]=ee.viewInitial[tt];ae.emit("plotly_doubleclick",null),l.call("_guiRelayout",ae,et)}ze.indexOf("select")>-1&&ot===1&&f(Ie,ae,[ee.xaxis],[ee.yaxis],ee.id,Ke),ze.indexOf("event")>-1&&c.click(ae,Ie,ee.id)}Ke.prepFn=function(ot,Ie,ze){var et=ae._fullLayout.dragmode,tt=he.getBoundingClientRect();ae._fullLayout._calcInverseTransform(ae);var dt=ae._fullLayout._invTransform;Z=ae._fullLayout._invScaleX,J=ae._fullLayout._invScaleY;var pt=T.apply3DTransform(dt)(Ie-tt.left,ze-tt.top);if(ke=pt[0],_e=pt[1],le){var vt=w.findPolygonOffset(we,se[0],se[1],le);ke+=Ae+vt[0],_e+=Te+vt[1]}switch(et){case"zoom":Ke.clickFn=nt,re||(Ke.moveFn=le?Xe:Ct,Ke.doneFn=Ve,function(){Ce=null,Fe=null,Re=ee.pathSubplot(),He=!1;var ct=ae._fullLayout[ee.id];Ge=k(ct.bgcolor).getLuminance(),($e=u.makeZoombox(ce,Ge,ge,Oe,Re)).attr("fill-rule","evenodd"),st=u.makeCorners(ce,ge,Oe),y(ae)}());break;case"select":case"lasso":g(ot,Ie,ze,Ke,et)}},p.init(Ke)},V.updateRadialDrag=function(W,Z,J){var ee=this,re=ee.gd,ae=ee.layers,oe=ee.radius,ce=ee.innerRadius,pe=ee.cx,ve=ee.cy,we=ee.radialAxis,xe=A.radialDragBoxSize,ge=xe/2;if(we.visible){var Oe,Ae,Te,se=H(ee.radialAxisAngle),le=we._rl,ne=le[0],me=le[1],Ee=le[J],be=.75*(le[1]-le[0])/(1-ee.getHole(Z))/oe;J?(Oe=pe+(oe+ge)*Math.cos(se),Ae=ve-(oe+ge)*Math.sin(se),Te="radialdrag"):(Oe=pe+(ce-ge)*Math.cos(se),Ae=ve-(ce-ge)*Math.sin(se),Te="radialdrag-inner");var De,Ue,he,ke=u.makeRectDragger(ae,Te,"crosshair",-ge,-ge,xe,xe),_e={element:ke,gd:re};W.dragmode===!1&&(_e.dragmode=!1),$(S.select(ke),we.visible&&ce<oe,{transform:d(Oe,Ae)}),_e.prepFn=function(){De=null,Ue=null,he=null,_e.moveFn=Ce,_e.doneFn=Fe,y(re)},_e.clampFn=function(Ge,$e){return Math.sqrt(Ge*Ge+$e*$e)<A.MINDRAG&&(Ge=0,$e=0),[Ge,$e]},p.init(_e)}function Ce(Ge,$e){if(De)De(Ge,$e);else{var st=[Ge,-$e],Ke=[Math.cos(se),Math.sin(se)],gt=Math.abs(T.dot(st,Ke)/Math.sqrt(T.dot(st,st)));isNaN(gt)||(De=gt<.5?Re:He)}var mt={};(function(at){Ue!==null?at[ee.id+".radialaxis.angle"]=Ue:he!==null&&(at[ee.id+".radialaxis.range["+J+"]"]=he)})(mt),re.emit("plotly_relayouting",mt)}function Fe(){Ue!==null?l.call("_guiRelayout",re,ee.id+".radialaxis.angle",Ue):he!==null&&l.call("_guiRelayout",re,ee.id+".radialaxis.range["+J+"]",he)}function Re(Ge,$e){if(J!==0){var st=Oe+Ge,Ke=Ae+$e;Ue=Math.atan2(ve-Ke,st-pe),ee.vangles&&(Ue=te(Ue,ee.vangles)),Ue=N(Ue);var gt=d(pe,ve)+b(-Ue);ae["radial-axis"].attr("transform",gt),ae["radial-line"].select("line").attr("transform",gt);var mt=ee.gd._fullLayout,at=mt[ee.id];ee.updateRadialAxisTitle(mt,at,Ue)}}function He(Ge,$e){var st=T.dot([Ge,-$e],[Math.cos(se),Math.sin(se)]);if(he=Ee-be*st,be>0==(J?he>ne:he<me)){var Ke=re._fullLayout,gt=Ke[ee.id];we.range[J]=he,we._rl[J]=he,ee.updateRadialAxis(Ke,gt),ee.xaxis.setRange(),ee.xaxis.setScale(),ee.yaxis.setRange(),ee.yaxis.setScale();var mt=!1;for(var at in ee.traceHash){var rt=ee.traceHash[at],xt=T.filterVisible(rt);rt[0][0].trace._module.plot(re,ee,xt,gt),l.traceIs(at,"gl")&&xt.length&&(mt=!0)}mt&&(m(re),_(re))}else he=null}},V.updateAngularDrag=function(W){var Z=this,J=Z.gd,ee=Z.layers,re=Z.radius,ae=Z.angularAxis,oe=Z.cx,ce=Z.cy,pe=Z.cxx,ve=Z.cyy,we=A.angularDragBoxSize,xe=u.makeDragger(ee,"path","angulardrag",W.dragmode===!1?"none":"move"),ge={element:xe,gd:J};function Oe(_e,Ce){return Math.atan2(ve+we-Ce,_e-pe-we)}W.dragmode===!1?ge.dragmode=!1:S.select(xe).attr("d",Z.pathAnnulus(re,re+we)).attr("transform",d(oe,ce)).call(v,"move");var Ae,Te,se,le,ne,me,Ee=ee.frontplot.select(".scatterlayer").selectAll(".trace"),be=Ee.selectAll(".point"),De=Ee.selectAll(".textpoint");function Ue(_e,Ce){var Fe=Z.gd._fullLayout,Re=Fe[Z.id],He=Oe(Ae+_e*W._invScaleX,Te+Ce*W._invScaleY),Ge=N(He-me);if(le=se+Ge,ee.frontplot.attr("transform",d(Z.xOffset2,Z.yOffset2)+b([-Ge,pe,ve])),Z.vangles){ne=Z.radialAxisAngle+Ge;var $e=d(oe,ce)+b(-Ge),st=d(oe,ce)+b(-ne);ee.bg.attr("transform",$e),ee["radial-grid"].attr("transform",$e),ee["radial-axis"].attr("transform",st),ee["radial-line"].select("line").attr("transform",st),Z.updateRadialAxisTitle(Fe,Re,ne)}else Z.clipPaths.forTraces.select("path").attr("transform",d(pe,ve)+b(Ge));be.each(function(){var xt=S.select(this),Tt=e.getTranslate(xt);xt.attr("transform",d(Tt.x,Tt.y)+b([Ge]))}),De.each(function(){var xt=S.select(this),Tt=xt.select("text"),wt=e.getTranslate(xt);xt.attr("transform",b([Ge,Tt.attr("x"),Tt.attr("y")])+d(wt.x,wt.y))}),ae.rotation=T.modHalf(le,360),Z.updateAngularAxis(Fe,Re),Z._hasClipOnAxisFalse&&!T.isFullCircle(Z.sectorInRad)&&Ee.call(e.hideOutsideRangePoints,Z);var Ke=!1;for(var gt in Z.traceHash)if(l.traceIs(gt,"gl")){var mt=Z.traceHash[gt],at=T.filterVisible(mt);mt[0][0].trace._module.plot(J,Z,at,Re),at.length&&(Ke=!0)}Ke&&(m(J),_(J));var rt={};he(rt),J.emit("plotly_relayouting",rt)}function he(_e){_e[Z.id+".angularaxis.rotation"]=le,Z.vangles&&(_e[Z.id+".radialaxis.angle"]=ne)}function ke(){De.select("text").attr("transform",null);var _e={};he(_e),l.call("_guiRelayout",J,_e)}ge.prepFn=function(_e,Ce,Fe){var Re=W[Z.id];se=Re.angularaxis.rotation;var He=xe.getBoundingClientRect();Ae=Ce-He.left,Te=Fe-He.top,J._fullLayout._calcInverseTransform(J);var Ge=T.apply3DTransform(W._invTransform)(Ae,Te);Ae=Ge[0],Te=Ge[1],me=Oe(Ae,Te),ge.moveFn=Ue,ge.doneFn=ke,y(J)},Z.vangles&&!T.isFullCircle(Z.sectorInRad)&&(ge.prepFn=T.noop,v(S.select(xe),null)),p.init(ge)},V.isPtInside=function(W){if(this.isSmith)return!0;var Z=this.sectorInRad,J=this.vangles,ee=this.angularAxis.c2g(W.theta),re=this.radialAxis,ae=re.c2l(W.r),oe=re._rl;return(J?w.isPtInsidePolygon:T.isPtInsideSector)(ae,ee,oe,Z,J)},V.pathArc=function(W){var Z=this.sectorInRad,J=this.vangles;return(J?w.pathPolygon:T.pathArc)(W,Z[0],Z[1],J)},V.pathSector=function(W){var Z=this.sectorInRad,J=this.vangles;return(J?w.pathPolygon:T.pathSector)(W,Z[0],Z[1],J)},V.pathAnnulus=function(W,Z){var J=this.sectorInRad,ee=this.vangles;return(ee?w.pathPolygonAnnulus:T.pathAnnulus)(W,Z,J[0],J[1],ee)},V.pathSubplot=function(){var W=this.innerRadius,Z=this.radius;return W?this.pathAnnulus(W,Z):this.pathSector(Z)},V.fillViewInitialKey=function(W,Z){W in this.viewInitial||(this.viewInitial[W]=Z)}},12101:function(Q,z,t){var S=t(71828),k=t(21994),l=S.deg2rad,T=S.rad2deg;Q.exports=function(b,d,s){switch(k(b,s),b._id){case"x":case"radialaxis":(function(e,i){var r=i._subplot;e.setGeometry=function(){var n=e._rl[0],a=e._rl[1],o=r.innerRadius,u=(r.radius-o)/(a-n),p=o/u,c=n>a?function(x){return x<=0}:function(x){return x>=0};e.c2g=function(x){var g=e.c2l(x)-n;return(c(g)?g:0)+p},e.g2c=function(x){return e.l2c(x+n-p)},e.g2p=function(x){return x*u},e.c2p=function(x){return e.g2p(e.c2g(x))}}})(b,d);break;case"angularaxis":(function(e,i){var r=e.type;if(r==="linear"){var n=e.d2c,a=e.c2d;e.d2c=function(o,u){return function(p,c){return c==="degrees"?l(p):p}(n(o),u)},e.c2d=function(o,u){return a(function(p,c){return c==="degrees"?T(p):p}(o,u))}}e.makeCalcdata=function(o,u){var p,c,x=o[u],g=o._length,f=function(h){return e.d2c(h,o.thetaunit)};if(x){if(S.isTypedArray(x)&&r==="linear"){if(g===x.length)return x;if(x.subarray)return x.subarray(0,g)}for(p=new Array(g),c=0;c<g;c++)p[c]=f(x[c])}else{var y=u+"0",v="d"+u,m=y in o?f(o[y]):0,_=o[v]?f(o[v]):(e.period||2*Math.PI)/g;for(p=new Array(g),c=0;c<g;c++)p[c]=m+c*_}return p},e.setGeometry=function(){var o,u,p,c,x=i.sector,g=x.map(l),f={clockwise:-1,counterclockwise:1}[e.direction],y=l(e.rotation),v=function(A){return f*A+y},m=function(A){return(A-y)/f};switch(r){case"linear":u=o=S.identity,c=l,p=T,e.range=S.isFullCircle(g)?[x[0],x[0]+360]:g.map(m).map(T);break;case"category":var _=e._categories.length,h=e.period?Math.max(e.period,_):_;h===0&&(h=1),u=c=function(A){return 2*A*Math.PI/h},o=p=function(A){return A*h/Math.PI/2},e.range=[0,h]}e.c2g=function(A){return v(u(A))},e.g2c=function(A){return o(m(A))},e.t2g=function(A){return v(c(A))},e.g2t=function(A){return p(m(A))}}})(b,d)}}},39779:function(Q){Q.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},23893:function(Q){function z(l){return l<0?-1:l>0?1:0}function t(l){var T=l[0],b=l[1];if(!isFinite(T)||!isFinite(b))return[1,0];var d=(T+1)*(T+1)+b*b;return[(T*T+b*b-1)/d,2*b/d]}function S(l,T){var b=T[0],d=T[1];return[b*l.radius+l.cx,-d*l.radius+l.cy]}function k(l,T){return T*l.radius}Q.exports={smith:t,reactanceArc:function(l,T,b,d){var s=S(l,t([b,T])),e=s[0],i=s[1],r=S(l,t([d,T])),n=r[0],a=r[1];if(T===0)return["M"+e+","+i,"L"+n+","+a].join(" ");var o=k(l,1/Math.abs(T));return["M"+e+","+i,"A"+o+","+o+" 0 0,"+(T<0?1:0)+" "+n+","+a].join(" ")},resistanceArc:function(l,T,b,d){var s=k(l,1/(T+1)),e=S(l,t([T,b])),i=e[0],r=e[1],n=S(l,t([T,d])),a=n[0],o=n[1];if(z(b)!==z(d)){var u=S(l,t([T,0]));return["M"+i+","+r,"A"+s+","+s+" 0 0,"+(0<b?0:1)+" "+u[0]+","+u[1],"A"+s+","+s+" 0 0,"+(d<0?0:1)+a+","+o].join(" ")}return["M"+i+","+r,"A"+s+","+s+" 0 0,"+(d<b?0:1)+" "+a+","+o].join(" ")},smithTransform:S}},7504:function(Q,z,t){var S=t(27659).AU,k=t(71828).counterRegex,l=t(77997),T=t(39779),b=T.attr,d=T.name,s=k(d),e={};e[b]={valType:"subplotid",dflt:d,editType:"calc"},Q.exports={attr:b,name:d,idRoot:d,idRegex:s,attrRegex:s,attributes:e,layoutAttributes:t(33419),supplyLayoutDefaults:t(9558),plot:function(i){for(var r=i._fullLayout,n=i.calcdata,a=r._subplots[d],o=0;o<a.length;o++){var u=a[o],p=S(n,d,u),c=r[u]._subplot;c||(c=l(i,u,!0),r[u]._subplot=c),c.plot(p,r,i._promises)}},clean:function(i,r,n,a){for(var o=a._subplots[d]||[],u=0;u<o.length;u++){var p=o[u],c=a[p]._subplot;if(!r[p]&&c)for(var x in c.framework.remove(),c.clipPaths)c.clipPaths[x].remove()}},toSVG:t(93612).toSVG}},33419:function(Q,z,t){var S=t(22399),k=t(13838),l=t(27670).Y,T=t(71828).extendFlat,b=t(30962).overrideAll,d=b({color:k.color,showline:T({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:T({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),s=b({ticklen:k.ticklen,tickwidth:T({},k.tickwidth,{dflt:2}),tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,tickfont:k.tickfont,tickformat:k.tickformat,hoverformat:k.hoverformat,layer:k.layer},"plot","from-root"),e=T({visible:T({},k.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:T({},k.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},d,s),i=T({visible:T({},k.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:k.ticks,editType:"calc"},d,s);Q.exports={domain:l({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:S.background},realaxis:e,imaginaryaxis:i,editType:"calc"}},9558:function(Q,z,t){var S,k,l,T=t(71828),b=t(7901),d=t(44467),s=t(49119),e=t(27659).NG,i=t(89426),r=t(96115),n=t(92128),a=t(21994),o=t(33419),u=t(39779),p=u.axisNames,c=(S=function(g){return g.slice().reverse().map(function(f){return-f}).concat([0]).concat(g)},k=String,l={},function(g){var f=k?k(g):g;if(f in l)return l[f];var y=S(g);return l[f]=y,y});function x(g,f,y,v){var m=y("bgcolor");v.bgColor=b.combine(m,v.paper_bgcolor);var _,h=e(v.fullData,u.name,v.id),A=v.layoutOut;function w(V,q){return y(_+"."+V,q)}for(var E=0;E<p.length;E++){_=p[E],T.isPlainObject(g[_])||(g[_]={});var L=g[_],C=d.newContainer(f,_);C._id=C._name=_,C._attr=v.id+"."+_,C._traceIndices=h.map(function(V){return V._expandedIndex});var P=w("visible");if(C.type="linear",a(C,A),i(L,C,w,C.type),P){var D,G,I,H,N=_==="realaxis";N&&w("side"),N?w("tickvals"):w("tickvals",c(f.realaxis.tickvals||o.realaxis.tickvals.dflt));var F=v.font||{};P&&(G=(D=w("color"))===L.color?D:F.color,I=F.size,H=F.family),r(L,C,w,C.type,{noTicklabelstep:!0,noAng:!N,noExp:!0,font:{color:G,size:I,family:H}}),T.coerce2(g,f,o,_+".ticklen"),T.coerce2(g,f,o,_+".tickwidth"),T.coerce2(g,f,o,_+".tickcolor",f.color),w("ticks")||(delete f[_].ticklen,delete f[_].tickwidth,delete f[_].tickcolor),n(L,C,w,{dfltColor:D,bgColor:v.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:o[_]}),w("layer")}w("hoverformat"),delete C.type,C._input=L}}Q.exports=function(g,f,y){s(g,f,y,{noUirevision:!0,type:u.name,attributes:o,handleDefaults:x,font:f.font,paper_bgcolor:f.paper_bgcolor,fullData:y,layoutOut:f})}},49119:function(Q,z,t){var S=t(71828),k=t(44467),l=t(27670).c;Q.exports=function(T,b,d,s){var e,i,r=s.type,n=s.attributes,a=s.handleDefaults,o=s.partition||"x",u=b._subplots[r],p=u.length,c=p&&u[0].replace(/\d+$/,"");function x(v,m){return S.coerce(e,i,n,v,m)}for(var g=0;g<p;g++){var f=u[g];e=T[f]?T[f]:T[f]={},i=k.newContainer(b,f,c),s.noUirevision||x("uirevision",b.uirevision);var y={};y[o]=[g/p,(g+1)/p],l(i,b,x,y),s.id=f,a(e,i,x,s)}}},5386:function(Q,z,t){var S=t(31562);function k(l){var T=l.description?" "+l.description:"",b=l.keys||[];if(b.length>0){for(var d=[],s=0;s<b.length;s++)d[s]="`"+b[s]+"`";T+="Finally, the template string has access to ",T=b.length===1?T+"variable "+d[0]:T+"variables "+d.slice(0,-1).join(", ")+" and "+d.slice(-1)+"."}return T}S.FORMAT_LINK,S.DATE_FORMAT_LINK,z.fF=function(l,T){l=l||{},k(T=T||{});var b={valType:"string",dflt:"",editType:l.editType||"none"};return l.arrayOk!==!1&&(b.arrayOk=!0),b},z.si=function(l,T){l=l||{},k(T=T||{});var b={valType:"string",dflt:"",editType:l.editType||"calc"};return l.arrayOk!==!1&&(b.arrayOk=!0),b},z.R=function(l,T){return T=T||{},(l=l||{}).newshape,k(T),{valType:"string",dflt:"",editType:l.editType||"arraydraw"}}},61639:function(Q,z,t){var S=t(64380),k=t(27659).AU,l=t(71828).counterRegex,T="ternary";z.name=T;var b=z.attr="subplot";z.idRoot=T,z.idRegex=z.attrRegex=l(T),(z.attributes={})[b]={valType:"subplotid",dflt:"ternary",editType:"calc"},z.layoutAttributes=t(81367),z.supplyLayoutDefaults=t(25369),z.plot=function(d){for(var s=d._fullLayout,e=d.calcdata,i=s._subplots[T],r=0;r<i.length;r++){var n=i[r],a=k(e,T,n),o=s[n]._subplot;o||(o=new S({id:n,graphDiv:d,container:s._ternarylayer.node()},s),s[n]._subplot=o),o.plot(a,s,d._promises)}},z.clean=function(d,s,e,i){for(var r=i._subplots[T]||[],n=0;n<r.length;n++){var a=r[n],o=i[a]._subplot;!s[a]&&o&&(o.plotContainer.remove(),o.clipDef.remove(),o.clipDefRelative.remove(),o.layers["a-title"].remove(),o.layers["b-title"].remove(),o.layers["c-title"].remove())}}},81367:function(Q,z,t){var S=t(22399),k=t(27670).Y,l=t(13838),T=t(30962).overrideAll,b=t(1426).extendFlat,d={title:{text:l.title.text,font:l.title.font},color:l.color,tickmode:l.minor.tickmode,nticks:b({},l.nticks,{dflt:6,min:1}),tick0:l.tick0,dtick:l.dtick,tickvals:l.tickvals,ticktext:l.ticktext,ticks:l.ticks,ticklen:l.ticklen,tickwidth:l.tickwidth,tickcolor:l.tickcolor,ticklabelstep:l.ticklabelstep,showticklabels:l.showticklabels,labelalias:l.labelalias,showtickprefix:l.showtickprefix,tickprefix:l.tickprefix,showticksuffix:l.showticksuffix,ticksuffix:l.ticksuffix,showexponent:l.showexponent,exponentformat:l.exponentformat,minexponent:l.minexponent,separatethousands:l.separatethousands,tickfont:l.tickfont,tickangle:l.tickangle,tickformat:l.tickformat,tickformatstops:l.tickformatstops,hoverformat:l.hoverformat,showline:b({},l.showline,{dflt:!0}),linecolor:l.linecolor,linewidth:l.linewidth,showgrid:b({},l.showgrid,{dflt:!0}),gridcolor:l.gridcolor,gridwidth:l.gridwidth,griddash:l.griddash,layer:l.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:l._deprecated.title,titlefont:l._deprecated.titlefont}},s=Q.exports=T({domain:k({name:"ternary"}),bgcolor:{valType:"color",dflt:S.background},sum:{valType:"number",dflt:1,min:0},aaxis:d,baxis:d,caxis:d},"plot","from-root");s.uirevision={valType:"any",editType:"none"},s.aaxis.uirevision=s.baxis.uirevision=s.caxis.uirevision={valType:"any",editType:"none"}},25369:function(Q,z,t){var S=t(7901),k=t(44467),l=t(71828),T=t(49119),b=t(96115),d=t(89426),s=t(38701),e=t(26218),i=t(92128),r=t(81367),n=["aaxis","baxis","caxis"];function a(u,p,c,x){var g,f,y,v=c("bgcolor"),m=c("sum");x.bgColor=S.combine(v,x.paper_bgcolor);for(var _=0;_<n.length;_++)f=u[g=n[_]]||{},(y=k.newContainer(p,g))._name=g,o(f,y,x,p);var h=p.aaxis,A=p.baxis,w=p.caxis;h.min+A.min+w.min>=m&&(h.min=0,A.min=0,w.min=0,u.aaxis&&delete u.aaxis.min,u.baxis&&delete u.baxis.min,u.caxis&&delete u.caxis.min)}function o(u,p,c,x){var g=r[p._name];function f(A,w){return l.coerce(u,p,g,A,w)}f("uirevision",x.uirevision),p.type="linear";var y=f("color"),v=y!==g.color.dflt?y:c.font.color,m=p._name.charAt(0).toUpperCase(),_="Component "+m,h=f("title.text",_);p._hovertitle=h===_?h:m,l.coerceFont(f,"title.font",{family:c.font.family,size:l.bigFont(c.font.size),color:v}),f("min"),e(u,p,f,"linear"),d(u,p,f,"linear"),b(u,p,f,"linear"),s(u,p,f,{outerTicks:!0}),f("showticklabels")&&(l.coerceFont(f,"tickfont",{family:c.font.family,size:c.font.size,color:v}),f("tickangle"),f("tickformat")),i(u,p,f,{dfltColor:y,bgColor:c.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:g}),f("hoverformat"),f("layer")}Q.exports=function(u,p,c){T(u,p,c,{type:"ternary",attributes:r,handleDefaults:a,font:p.font,paper_bgcolor:p.paper_bgcolor})}},64380:function(Q,z,t){var S=t(39898),k=t(84267),l=t(73972),T=t(71828),b=T.strTranslate,d=T._,s=t(7901),e=t(91424),i=t(21994),r=t(1426).extendFlat,n=t(74875),a=t(89298),o=t(28569),u=t(30211),p=t(64505),c=p.freeMode,x=p.rectMode,g=t(92998),f=t(47322).prepSelect,y=t(47322).selectOnClick,v=t(47322).clearOutline,m=t(47322).clearSelectionsCache,_=t(85555);function h(I,H){this.id=I.id,this.graphDiv=I.graphDiv,this.init(H),this.makeFramework(H),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}Q.exports=h;var A=h.prototype;A.init=function(I){this.container=I._ternarylayer,this.defs=I._defs,this.layoutId=I._uid,this.traceHash={},this.layers={}},A.plot=function(I,H){var N=this,F=H[N.id],V=H._size;N._hasClipOnAxisFalse=!1;for(var q=0;q<I.length;q++)if(I[q][0].trace.cliponaxis===!1){N._hasClipOnAxisFalse=!0;break}N.updateLayers(F),N.adjustLayout(F,V),n.generalUpdatePerTraceModule(N.graphDiv,N,I,F),N.layers.plotbg.select("path").call(s.fill,F.bgcolor)},A.makeFramework=function(I){var H=this,N=H.graphDiv,F=I[H.id],V=H.clipId="clip"+H.layoutId+H.id,q=H.clipIdRelative="clip-relative"+H.layoutId+H.id;H.clipDef=T.ensureSingleById(I._clips,"clipPath",V,function(te){te.append("path").attr("d","M0,0Z")}),H.clipDefRelative=T.ensureSingleById(I._clips,"clipPath",q,function(te){te.append("path").attr("d","M0,0Z")}),H.plotContainer=T.ensureSingle(H.container,"g",H.id),H.updateLayers(F),e.setClipUrl(H.layers.backplot,V,N),e.setClipUrl(H.layers.grids,V,N)},A.updateLayers=function(I){var H=this.layers,N=["draglayer","plotbg","backplot","grids"];I.aaxis.layer==="below traces"&&N.push("aaxis","aline"),I.baxis.layer==="below traces"&&N.push("baxis","bline"),I.caxis.layer==="below traces"&&N.push("caxis","cline"),N.push("frontplot"),I.aaxis.layer==="above traces"&&N.push("aaxis","aline"),I.baxis.layer==="above traces"&&N.push("baxis","bline"),I.caxis.layer==="above traces"&&N.push("caxis","cline");var F=this.plotContainer.selectAll("g.toplevel").data(N,String),V=["agrid","bgrid","cgrid"];F.enter().append("g").attr("class",function(q){return"toplevel "+q}).each(function(q){var te=S.select(this);H[q]=te,q==="frontplot"?te.append("g").classed("scatterlayer",!0):q==="backplot"?te.append("g").classed("maplayer",!0):q==="plotbg"?te.append("path").attr("d","M0,0Z"):q==="aline"||q==="bline"||q==="cline"?te.append("path"):q==="grids"&&V.forEach(function($){H[$]=te.append("g").classed("grid "+$,!0)})}),F.order()};var w=Math.sqrt(4/3);A.adjustLayout=function(I,H){var N,F,V,q,te,$,W=this,Z=I.domain,J=(Z.x[0]+Z.x[1])/2,ee=(Z.y[0]+Z.y[1])/2,re=Z.x[1]-Z.x[0],ae=Z.y[1]-Z.y[0],oe=re*H.w,ce=ae*H.h,pe=I.sum,ve=I.aaxis.min,we=I.baxis.min,xe=I.caxis.min;oe>w*ce?V=(q=ce)*w:q=(V=oe)/w,te=re*V/oe,$=ae*q/ce,N=H.l+H.w*J-V/2,F=H.t+H.h*(1-ee)-q/2,W.x0=N,W.y0=F,W.w=V,W.h=q,W.sum=pe,W.xaxis={type:"linear",range:[ve+2*xe-pe,pe-ve-2*we],domain:[J-te/2,J+te/2],_id:"x"},i(W.xaxis,W.graphDiv._fullLayout),W.xaxis.setScale(),W.xaxis.isPtWithinRange=function(De){return De.a>=W.aaxis.range[0]&&De.a<=W.aaxis.range[1]&&De.b>=W.baxis.range[1]&&De.b<=W.baxis.range[0]&&De.c>=W.caxis.range[1]&&De.c<=W.caxis.range[0]},W.yaxis={type:"linear",range:[ve,pe-we-xe],domain:[ee-$/2,ee+$/2],_id:"y"},i(W.yaxis,W.graphDiv._fullLayout),W.yaxis.setScale(),W.yaxis.isPtWithinRange=function(){return!0};var ge=W.yaxis.domain[0],Oe=W.aaxis=r({},I.aaxis,{range:[ve,pe-we-xe],side:"left",tickangle:(+I.aaxis.tickangle||0)-30,domain:[ge,ge+$*w],anchor:"free",position:0,_id:"y",_length:V});i(Oe,W.graphDiv._fullLayout),Oe.setScale();var Ae=W.baxis=r({},I.baxis,{range:[pe-ve-xe,we],side:"bottom",domain:W.xaxis.domain,anchor:"free",position:0,_id:"x",_length:V});i(Ae,W.graphDiv._fullLayout),Ae.setScale();var Te=W.caxis=r({},I.caxis,{range:[pe-ve-we,xe],side:"right",tickangle:(+I.caxis.tickangle||0)+30,domain:[ge,ge+$*w],anchor:"free",position:0,_id:"y",_length:V});i(Te,W.graphDiv._fullLayout),Te.setScale();var se="M"+N+","+(F+q)+"h"+V+"l-"+V/2+",-"+q+"Z";W.clipDef.select("path").attr("d",se),W.layers.plotbg.select("path").attr("d",se);var le="M0,"+q+"h"+V+"l-"+V/2+",-"+q+"Z";W.clipDefRelative.select("path").attr("d",le);var ne=b(N,F);W.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ne),W.clipDefRelative.select("path").attr("transform",null);var me=b(N-Ae._offset,F+q);W.layers.baxis.attr("transform",me),W.layers.bgrid.attr("transform",me);var Ee=b(N+V/2,F)+"rotate(30)"+b(0,-Oe._offset);W.layers.aaxis.attr("transform",Ee),W.layers.agrid.attr("transform",Ee);var be=b(N+V/2,F)+"rotate(-30)"+b(0,-Te._offset);W.layers.caxis.attr("transform",be),W.layers.cgrid.attr("transform",be),W.drawAxes(!0),W.layers.aline.select("path").attr("d",Oe.showline?"M"+N+","+(F+q)+"l"+V/2+",-"+q:"M0,0").call(s.stroke,Oe.linecolor||"#000").style("stroke-width",(Oe.linewidth||0)+"px"),W.layers.bline.select("path").attr("d",Ae.showline?"M"+N+","+(F+q)+"h"+V:"M0,0").call(s.stroke,Ae.linecolor||"#000").style("stroke-width",(Ae.linewidth||0)+"px"),W.layers.cline.select("path").attr("d",Te.showline?"M"+(N+V/2)+","+F+"l"+V/2+","+q:"M0,0").call(s.stroke,Te.linecolor||"#000").style("stroke-width",(Te.linewidth||0)+"px"),W.graphDiv._context.staticPlot||W.initInteractions(),e.setClipUrl(W.layers.frontplot,W._hasClipOnAxisFalse?null:W.clipId,W.graphDiv)},A.drawAxes=function(I){var H=this,N=H.graphDiv,F=H.id.substr(7)+"title",V=H.layers,q=H.aaxis,te=H.baxis,$=H.caxis;if(H.drawAx(q),H.drawAx(te),H.drawAx($),I){var W=Math.max(q.showticklabels?q.tickfont.size/2:0,($.showticklabels?.75*$.tickfont.size:0)+($.ticks==="outside"?.87*$.ticklen:0)),Z=(te.showticklabels?te.tickfont.size:0)+(te.ticks==="outside"?te.ticklen:0)+3;V["a-title"]=g.draw(N,"a"+F,{propContainer:q,propName:H.id+".aaxis.title",placeholder:d(N,"Click to enter Component A title"),attributes:{x:H.x0+H.w/2,y:H.y0-q.title.font.size/3-W,"text-anchor":"middle"}}),V["b-title"]=g.draw(N,"b"+F,{propContainer:te,propName:H.id+".baxis.title",placeholder:d(N,"Click to enter Component B title"),attributes:{x:H.x0-Z,y:H.y0+H.h+.83*te.title.font.size+Z,"text-anchor":"middle"}}),V["c-title"]=g.draw(N,"c"+F,{propContainer:$,propName:H.id+".caxis.title",placeholder:d(N,"Click to enter Component C title"),attributes:{x:H.x0+H.w+Z,y:H.y0+H.h+.83*$.title.font.size+Z,"text-anchor":"middle"}})}},A.drawAx=function(I){var H,N=this,F=N.graphDiv,V=I._name,q=V.charAt(0),te=I._id,$=N.layers[V],W=q+"tickLayout",Z=(H=I).ticks+String(H.ticklen)+String(H.showticklabels);N[W]!==Z&&($.selectAll("."+te+"tick").remove(),N[W]=Z),I.setScale();var J=a.calcTicks(I),ee=a.clipEnds(I,J),re=a.makeTransTickFn(I),ae=a.getTickSigns(I)[2],oe=T.deg2rad(30),ce=ae*(I.linewidth||1)/2,pe=ae*I.ticklen,ve=N.w,we=N.h,xe=q==="b"?"M0,"+ce+"l"+Math.sin(oe)*pe+","+Math.cos(oe)*pe:"M"+ce+",0l"+Math.cos(oe)*pe+","+-Math.sin(oe)*pe,ge={a:"M0,0l"+we+",-"+ve/2,b:"M0,0l-"+ve/2+",-"+we,c:"M0,0l-"+we+","+ve/2}[q];a.drawTicks(F,I,{vals:I.ticks==="inside"?ee:J,layer:$,path:xe,transFn:re,crisp:!1}),a.drawGrid(F,I,{vals:ee,layer:N.layers[q+"grid"],path:ge,transFn:re,crisp:!1}),a.drawLabels(F,I,{vals:J,layer:$,transFn:re,labelFns:a.makeLabelFns(I,0,30)})};var E=_.MINZOOM/2+.87,L="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(.87*E+4.5)+"l2.6,1.5l-"+E/2+","+.87*E+"Z",C="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-2.6,1.5l"+E/2+","+.87*E+"Z",P="m0,1l"+E/2+","+.87*E+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-"+(E/2+2.6)+","+(.87*E+4.5)+"l2.6,1.5l"+E/2+",-"+.87*E+"Z",D=!0;function G(I){S.select(I).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}A.clearOutline=function(){m(this.dragOptions),v(this.dragOptions.gd)},A.initInteractions=function(){var I,H,N,F,V,q,te,$,W,Z,J,ee,re=this,ae=re.layers.plotbg.select("path").node(),oe=re.graphDiv,ce=oe._fullLayout._zoomlayer;function pe(le){var ne={};return ne[re.id+".aaxis.min"]=le.a,ne[re.id+".baxis.min"]=le.b,ne[re.id+".caxis.min"]=le.c,ne}function ve(le,ne){var me=oe._fullLayout.clickmode;G(oe),le===2&&(oe.emit("plotly_doubleclick",null),l.call("_guiRelayout",oe,pe({a:0,b:0,c:0}))),me.indexOf("select")>-1&&le===1&&y(ne,oe,[re.xaxis],[re.yaxis],re.id,re.dragOptions),me.indexOf("event")>-1&&u.click(oe,ne,re.id)}function we(le,ne){return 1-ne/re.h}function xe(le,ne){return 1-(le+(re.h-ne)/Math.sqrt(3))/re.w}function ge(le,ne){return(le-(re.h-ne)/Math.sqrt(3))/re.w}function Oe(le,ne){var me=N+le*I,Ee=F+ne*H,be=Math.max(0,Math.min(1,we(0,F),we(0,Ee))),De=Math.max(0,Math.min(1,xe(N,F),xe(me,Ee))),Ue=Math.max(0,Math.min(1,ge(N,F),ge(me,Ee))),he=(be/2+Ue)*re.w,ke=(1-be/2-De)*re.w,_e=(he+ke)/2,Ce=ke-he,Fe=(1-be)*re.h,Re=Fe-Ce/w;Ce<_.MINZOOM?(te=V,J.attr("d",W),ee.attr("d","M0,0Z")):(te={a:V.a+be*q,b:V.b+De*q,c:V.c+Ue*q},J.attr("d",W+"M"+he+","+Fe+"H"+ke+"L"+_e+","+Re+"L"+he+","+Fe+"Z"),ee.attr("d","M"+N+","+F+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+he+","+Fe+L+"M"+ke+","+Fe+C+"M"+_e+","+Re+P)),Z||(J.transition().style("fill",$>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ee.transition().style("opacity",1).duration(200),Z=!0),oe.emit("plotly_relayouting",pe(te))}function Ae(){G(oe),te!==V&&(l.call("_guiRelayout",oe,pe(te)),D&&oe.data&&oe._context.showTips&&(T.notifier(d(oe,"Double-click to zoom back out"),"long"),D=!1))}function Te(le,ne){var me=le/re.xaxis._m,Ee=ne/re.yaxis._m,be=[(te={a:V.a-Ee,b:V.b+(me+Ee)/2,c:V.c-(me-Ee)/2}).a,te.b,te.c].sort(T.sorterAsc),De=be.indexOf(te.a),Ue=be.indexOf(te.b),he=be.indexOf(te.c);be[0]<0&&(be[1]+be[0]/2<0?(be[2]+=be[0]+be[1],be[0]=be[1]=0):(be[2]+=be[0]/2,be[1]+=be[0]/2,be[0]=0),te={a:be[De],b:be[Ue],c:be[he]},ne=(V.a-te.a)*re.yaxis._m,le=(V.c-te.c-V.b+te.b)*re.xaxis._m);var ke=b(re.x0+le,re.y0+ne);re.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ke);var _e=b(-le,-ne);re.clipDefRelative.select("path").attr("transform",_e),re.aaxis.range=[te.a,re.sum-te.b-te.c],re.baxis.range=[re.sum-te.a-te.c,te.b],re.caxis.range=[re.sum-te.a-te.b,te.c],re.drawAxes(!1),re._hasClipOnAxisFalse&&re.plotContainer.select(".scatterlayer").selectAll(".trace").call(e.hideOutsideRangePoints,re),oe.emit("plotly_relayouting",pe(te))}function se(){l.call("_guiRelayout",oe,pe(te))}this.dragOptions={element:ae,gd:oe,plotinfo:{id:re.id,domain:oe._fullLayout[re.id].domain,xaxis:re.xaxis,yaxis:re.yaxis},subplot:re.id,prepFn:function(le,ne,me){re.dragOptions.xaxes=[re.xaxis],re.dragOptions.yaxes=[re.yaxis],I=oe._fullLayout._invScaleX,H=oe._fullLayout._invScaleY;var Ee=re.dragOptions.dragmode=oe._fullLayout.dragmode;c(Ee)?re.dragOptions.minDrag=1:re.dragOptions.minDrag=void 0,Ee==="zoom"?(re.dragOptions.moveFn=Oe,re.dragOptions.clickFn=ve,re.dragOptions.doneFn=Ae,function(be,De,Ue){var he=ae.getBoundingClientRect();N=De-he.left,F=Ue-he.top,oe._fullLayout._calcInverseTransform(oe);var ke=oe._fullLayout._invTransform,_e=T.apply3DTransform(ke)(N,F);N=_e[0],F=_e[1],V={a:re.aaxis.range[0],b:re.baxis.range[1],c:re.caxis.range[1]},te=V,q=re.aaxis.range[1]-V.a,$=k(re.graphDiv._fullLayout[re.id].bgcolor).getLuminance(),W="M0,"+re.h+"L"+re.w/2+", 0L"+re.w+","+re.h+"Z",Z=!1,J=ce.append("path").attr("class","zoombox").attr("transform",b(re.x0,re.y0)).style({fill:$>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",W),ee=ce.append("path").attr("class","zoombox-corners").attr("transform",b(re.x0,re.y0)).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),re.clearOutline(oe)}(0,ne,me)):Ee==="pan"?(re.dragOptions.moveFn=Te,re.dragOptions.clickFn=ve,re.dragOptions.doneFn=se,V={a:re.aaxis.range[0],b:re.baxis.range[1],c:re.caxis.range[1]},te=V,re.clearOutline(oe)):(x(Ee)||c(Ee))&&f(le,ne,me,re.dragOptions,Ee)}},ae.onmousemove=function(le){u.hover(oe,le,re.id),oe._fullLayout._lasthover=ae,oe._fullLayout._hoversubplot=re.id},ae.onmouseout=function(le){oe._dragging||o.unhover(oe,le)},o.init(this.dragOptions)}},73972:function(Q,z,t){var S=t(47769),k=t(64213),l=t(75138),T=t(41965),b=t(24401).addStyleRule,d=t(1426),s=t(9012),e=t(10820),i=d.extendFlat,r=d.extendDeepAll;function n(y){var v=y.name,m=y.categories,_=y.meta;if(z.modules[v])S.log("Type "+v+" already registered");else{z.subplotsRegistry[y.basePlotModule.name]||function(D){var G=D.name;if(z.subplotsRegistry[G])S.log("Plot type "+G+" already registered.");else for(var I in p(D),z.subplotsRegistry[G]=D,z.componentsRegistry)g(I,D.name)}(y.basePlotModule);for(var h={},A=0;A<m.length;A++)h[m[A]]=!0,z.allCategories[m[A]]=!0;for(var w in z.modules[v]={_module:y,categories:h},_&&Object.keys(_).length&&(z.modules[v].meta=_),z.allTypes.push(v),z.componentsRegistry)c(w,v);y.layoutAttributes&&i(z.traceLayoutAttributes,y.layoutAttributes);var E=y.basePlotModule,L=E.name;if(L==="mapbox"){var C=E.constants.styleRules;for(var P in C)b(".js-plotly-plot .plotly .mapboxgl-"+P,C[P])}L!=="geo"&&L!=="mapbox"||window.PlotlyGeoAssets!==void 0||(window.PlotlyGeoAssets={topojson:{}})}}function a(y){if(typeof y.name!="string")throw new Error("Component module *name* must be a string.");var v=y.name;for(var m in z.componentsRegistry[v]=y,y.layoutAttributes&&(y.layoutAttributes._isLinkedToArray&&l(z.layoutArrayContainers,v),p(y)),z.modules)c(v,m);for(var _ in z.subplotsRegistry)g(v,_);for(var h in z.transformsRegistry)x(v,h);y.schema&&y.schema.layout&&r(e,y.schema.layout)}function o(y){if(typeof y.name!="string")throw new Error("Transform module *name* must be a string.");var v="Transform module "+y.name,m=typeof y.transform=="function",_=typeof y.calcTransform=="function";if(!m&&!_)throw new Error(v+" is missing a *transform* or *calcTransform* method.");for(var h in m&&_&&S.log([v+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),T(y.attributes)||S.log(v+" registered without an *attributes* object."),typeof y.supplyDefaults!="function"&&S.log(v+" registered without a *supplyDefaults* method."),z.transformsRegistry[y.name]=y,z.componentsRegistry)x(h,y.name)}function u(y){var v=y.name,m=v.split("-")[0],_=y.dictionary,h=y.format,A=_&&Object.keys(_).length,w=h&&Object.keys(h).length,E=z.localeRegistry,L=E[v];if(L||(E[v]=L={}),m!==v){var C=E[m];C||(E[m]=C={}),A&&C.dictionary===L.dictionary&&(C.dictionary=_),w&&C.format===L.format&&(C.format=h)}A&&(L.dictionary=_),w&&(L.format=h)}function p(y){if(y.layoutAttributes){var v=y.layoutAttributes._arrayAttrRegexps;if(v)for(var m=0;m<v.length;m++)l(z.layoutArrayRegexes,v[m])}}function c(y,v){var m=z.componentsRegistry[y].schema;if(m&&m.traces){var _=m.traces[v];_&&r(z.modules[v]._module.attributes,_)}}function x(y,v){var m=z.componentsRegistry[y].schema;if(m&&m.transforms){var _=m.transforms[v];_&&r(z.transformsRegistry[v].attributes,_)}}function g(y,v){var m=z.componentsRegistry[y].schema;if(m&&m.subplots){var _=z.subplotsRegistry[v],h=_.layoutAttributes,A=_.attr==="subplot"?_.name:_.attr;Array.isArray(A)&&(A=A[0]);var w=m.subplots[A];h&&w&&r(h,w)}}function f(y){return typeof y=="object"&&(y=y.type),y}z.modules={},z.allCategories={},z.allTypes=[],z.subplotsRegistry={},z.transformsRegistry={},z.componentsRegistry={},z.layoutArrayContainers=[],z.layoutArrayRegexes=[],z.traceLayoutAttributes={},z.localeRegistry={},z.apiMethodRegistry={},z.collectableSubplotTypes=null,z.register=function(y){if(z.collectableSubplotTypes=null,!y)throw new Error("No argument passed to Plotly.register.");y&&!Array.isArray(y)&&(y=[y]);for(var v=0;v<y.length;v++){var m=y[v];if(!m)throw new Error("Invalid module was attempted to be registered!");switch(m.moduleType){case"trace":n(m);break;case"transform":o(m);break;case"component":a(m);break;case"locale":u(m);break;case"apiMethod":var _=m.name;z.apiMethodRegistry[_]=m.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},z.getModule=function(y){var v=z.modules[f(y)];return!!v&&v._module},z.traceIs=function(y,v){if((y=f(y))==="various")return!1;var m=z.modules[y];return m||(y&&S.log("Unrecognized trace type "+y+"."),m=z.modules[s.type.dflt]),!!m.categories[v]},z.getTransformIndices=function(y,v){for(var m=[],_=y.transforms||[],h=0;h<_.length;h++)_[h].type===v&&m.push(h);return m},z.hasTransform=function(y,v){for(var m=y.transforms||[],_=0;_<m.length;_++)if(m[_].type===v)return!0;return!1},z.getComponentMethod=function(y,v){var m=z.componentsRegistry[y];return m&&m[v]||k},z.call=function(){var y=arguments[0],v=[].slice.call(arguments,1);return z.apiMethodRegistry[y].apply(null,v)}},61914:function(Q,z,t){var S=t(73972),k=t(71828),l=k.extendFlat,T=k.extendDeep;function b(d){var s;switch(d){case"themes__thumb":s={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":s={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:s={}}return s}Q.exports=function(d,s){var e,i,r=d.data,n=d.layout,a=T([],r),o=T({},n,b(s.tileClass)),u=d._context||{};if(s.width&&(o.width=s.width),s.height&&(o.height=s.height),s.tileClass==="thumbnail"||s.tileClass==="themes__thumb"){o.annotations=[];var p=Object.keys(o);for(e=0;e<p.length;e++)i=p[e],["xaxis","yaxis","zaxis"].indexOf(i.slice(0,5))>-1&&(o[p[e]].title={text:""});for(e=0;e<a.length;e++){var c=a[e];c.showscale=!1,c.marker&&(c.marker.showscale=!1),S.traceIs(c,"pie-like")&&(c.textposition="none")}}if(Array.isArray(s.annotations))for(e=0;e<s.annotations.length;e++)o.annotations.push(s.annotations[e]);var x=Object.keys(o).filter(function(m){return m.match(/^scene\d*$/)});if(x.length){var g={};for(s.tileClass==="thumbnail"&&(g={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),e=0;e<x.length;e++){var f=o[x[e]];f.xaxis||(f.xaxis={}),f.yaxis||(f.yaxis={}),f.zaxis||(f.zaxis={}),l(f.xaxis,g),l(f.yaxis,g),l(f.zaxis,g),f._scene=null}}var y=document.createElement("div");s.tileClass&&(y.className=s.tileClass);var v={gd:y,td:y,layout:o,data:a,config:{staticPlot:s.staticPlot===void 0||s.staticPlot,plotGlPixelRatio:s.plotGlPixelRatio===void 0?2:s.plotGlPixelRatio,displaylogo:s.displaylogo||!1,showLink:s.showLink||!1,showTips:s.showTips||!1,mapboxAccessToken:u.mapboxAccessToken}};return s.setBackground!=="transparent"&&(v.config.setBackground=s.setBackground||"opaque"),v.gd.defaultLayout=b(s.tileClass),v}},7239:function(Q,z,t){var S=t(71828),k=t(403),l=t(22435),T=t(25095);Q.exports=function(b,d){var s;return S.isPlainObject(b)||(s=S.getGraphDiv(b)),(d=d||{}).format=d.format||"png",d.width=d.width||null,d.height=d.height||null,d.imageDataOnly=!0,new Promise(function(e,i){s&&s._snapshotInProgress&&i(new Error("Snapshotting already in progress.")),S.isIE()&&d.format!=="svg"&&i(new Error(T.MSG_IE_BAD_FORMAT)),s&&(s._snapshotInProgress=!0);var r=k(b,d),n=d.filename||b.fn||"newplot";n+="."+d.format.replace("-","."),r.then(function(a){return s&&(s._snapshotInProgress=!1),l(a,n,d.format)}).then(function(a){e(a)}).catch(function(a){s&&(s._snapshotInProgress=!1),i(a)})})}},22435:function(Q,z,t){var S=t(71828),k=t(25095);Q.exports=function(l,T,b){var d=document.createElement("a"),s="download"in d;return new Promise(function(e,i){var r,n;if(S.isIE())return r=k.createBlob(l,"svg"),window.navigator.msSaveBlob(r,T),r=null,e(T);if(s)return r=k.createBlob(l,b),n=k.createObjectURL(r),d.href=n,d.download=T,document.body.appendChild(d),d.click(),document.body.removeChild(d),k.revokeObjectURL(n),r=null,e(T);if(S.isSafari()){var a=b==="svg"?",":";base64,";return k.octetStream(a+encodeURIComponent(l)),e(T)}i(new Error("download error"))})}},25095:function(Q,z,t){var S=t(73972);z.getDelay=function(l){return l._has&&(l._has("gl3d")||l._has("gl2d")||l._has("mapbox"))?500:0},z.getRedrawFunc=function(l){return function(){S.getComponentMethod("colorbar","draw")(l)}},z.encodeSVG=function(l){return"data:image/svg+xml,"+encodeURIComponent(l)},z.encodeJSON=function(l){return"data:application/json,"+encodeURIComponent(l)};var k=window.URL||window.webkitURL;z.createObjectURL=function(l){return k.createObjectURL(l)},z.revokeObjectURL=function(l){return k.revokeObjectURL(l)},z.createBlob=function(l,T){if(T==="svg")return new window.Blob([l],{type:"image/svg+xml;charset=utf-8"});if(T==="full-json")return new window.Blob([l],{type:"application/json;charset=utf-8"});var b=function(d){for(var s=d.length,e=new ArrayBuffer(s),i=new Uint8Array(e),r=0;r<s;r++)i[r]=d.charCodeAt(r);return e}(window.atob(l));return new window.Blob([b],{type:"image/"+T})},z.octetStream=function(l){document.location.href="data:application/octet-stream"+l},z.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,z.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},44511:function(Q,z,t){var S=t(25095),k={getDelay:S.getDelay,getRedrawFunc:S.getRedrawFunc,clone:t(61914),toSVG:t(5900),svgToImg:t(70942),toImage:t(56395),downloadImage:t(7239)};Q.exports=k},70942:function(Q,z,t){var S=t(71828),k=t(15398).EventEmitter,l=t(25095);Q.exports=function(T){var b=T.emitter||new k,d=new Promise(function(s,e){var i=window.Image,r=T.svg,n=T.format||"png";if(S.isIE()&&n!=="svg"){var a=new Error(l.MSG_IE_BAD_FORMAT);return e(a),T.promise?d:b.emit("error",a)}var o,u,p=T.canvas,c=T.scale||1,x=T.width||300,g=T.height||150,f=c*x,y=c*g,v=p.getContext("2d",{willReadFrequently:!0}),m=new i;n==="svg"||S.isSafari()?u=l.encodeSVG(r):(o=l.createBlob(r,"svg"),u=l.createObjectURL(o)),p.width=f,p.height=y,m.onload=function(){var _;switch(o=null,l.revokeObjectURL(u),n!=="svg"&&v.drawImage(m,0,0,f,y),n){case"jpeg":_=p.toDataURL("image/jpeg");break;case"png":_=p.toDataURL("image/png");break;case"webp":_=p.toDataURL("image/webp");break;case"svg":_=u;break;default:var h="Image format is not jpeg, png, svg or webp.";if(e(new Error(h)),!T.promise)return b.emit("error",h)}s(_),T.promise||b.emit("success",_)},m.onerror=function(_){if(o=null,l.revokeObjectURL(u),e(_),!T.promise)return b.emit("error",_)},m.src=u});return T.promise?d:b}},56395:function(Q,z,t){var S=t(15398).EventEmitter,k=t(73972),l=t(71828),T=t(25095),b=t(61914),d=t(5900),s=t(70942);Q.exports=function(e,i){var r=new S,n=b(e,{format:"png"}),a=n.gd;a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a);var o=T.getRedrawFunc(a);return k.call("_doPlot",a,n.data,n.layout,n.config).then(o).then(function(){var u=T.getDelay(a._fullLayout);setTimeout(function(){var p=d(a),c=document.createElement("canvas");c.id=l.randstr(),(r=s({format:i.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:c,emitter:r,svg:p})).clean=function(){a&&document.body.removeChild(a)}},u)}).catch(function(u){r.emit("error",u)}),r}},5900:function(Q,z,t){var S=t(39898),k=t(71828),l=t(91424),T=t(7901),b=t(77922),d=/"/g,s="TOBESTRIPPED",e=new RegExp('("'+s+")|("+s+'")',"g");Q.exports=function(i,r,n){var a,o=i._fullLayout,u=o._paper,p=o._toppaper,c=o.width,x=o.height;u.insert("rect",":first-child").call(l.setRect,0,0,c,x).call(T.fill,o.paper_bgcolor);var g=o._basePlotModules||[];for(a=0;a<g.length;a++){var f=g[a];f.toSVG&&f.toSVG(i)}if(p){var y=p.node().childNodes,v=Array.prototype.slice.call(y);for(a=0;a<v.length;a++){var m=v[a];m.childNodes.length&&u.node().appendChild(m)}}o._draggers&&o._draggers.remove(),u.node().style.background="",u.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var h=S.select(this);if(this.style.visibility!=="hidden"&&this.style.display!=="none"){h.style({visibility:null,display:null});var A=this.style.fontFamily;A&&A.indexOf('"')!==-1&&h.style("font-family",A.replace(d,s))}else h.remove()}),u.selectAll(".gradient_filled,.pattern_filled").each(function(){var h=S.select(this),A=this.style.fill;A&&A.indexOf("url(")!==-1&&h.style("fill",A.replace(d,s));var w=this.style.stroke;w&&w.indexOf("url(")!==-1&&h.style("stroke",w.replace(d,s))}),r!=="pdf"&&r!=="eps"||u.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),u.node().setAttributeNS(b.xmlns,"xmlns",b.svg),u.node().setAttributeNS(b.xmlns,"xmlns:xlink",b.xlink),r==="svg"&&n&&(u.attr("width",n*c),u.attr("height",n*x),u.attr("viewBox","0 0 "+c+" "+x));var _=new window.XMLSerializer().serializeToString(u.node());return _=(_=(_=function(h){var A=S.select("body").append("div").style({display:"none"}).html(""),w=h.replace(/(&[^;]*;)/gi,function(E){return E==="&lt;"?"&#60;":E==="&rt;"?"&#62;":E.indexOf("<")!==-1||E.indexOf(">")!==-1?"":A.html(E).text()});return A.remove(),w}(_)).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(e,"'"),k.isIE()&&(_=(_=(_=_.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),_}},75341:function(Q,z,t){var S=t(71828);Q.exports=function(k,l){for(var T=0;T<k.length;T++)k[T].i=T;S.mergeArray(l.text,k,"tx"),S.mergeArray(l.hovertext,k,"htx");var b=l.marker;if(b){S.mergeArray(b.opacity,k,"mo",!0),S.mergeArray(b.color,k,"mc");var d=b.line;d&&(S.mergeArray(d.color,k,"mlc"),S.mergeArrayCastPositive(d.width,k,"mlw"))}}},1486:function(Q,z,t){var S=t(82196),k=t(12663).axisHoverFormat,l=t(5386).fF,T=t(5386).si,b=t(50693),d=t(41940),s=t(97313),e=t(79952).u,i=t(1426).extendFlat,r=d({editType:"calc",arrayOk:!0,colorEditType:"style"}),n=i({},S.marker.line.width,{dflt:0}),a=i({width:n,editType:"calc"},b("marker.line")),o=i({line:a,editType:"calc"},b("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:e});Q.exports={x:S.x,x0:S.x0,dx:S.dx,y:S.y,y0:S.y0,dy:S.dy,xperiod:S.xperiod,yperiod:S.yperiod,xperiod0:S.xperiod0,yperiod0:S.yperiod0,xperiodalignment:S.xperiodalignment,yperiodalignment:S.yperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),text:S.text,texttemplate:T({editType:"plot"},{keys:s.eventDataKeys}),hovertext:S.hovertext,hovertemplate:l({},{keys:s.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:i({},r,{}),insidetextfont:i({},r,{}),outsidetextfont:i({},r,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:i({},S.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:o,offsetgroup:S.offsetgroup,alignmentgroup:S.alignmentgroup,selected:{marker:{opacity:S.selected.marker.opacity,color:S.selected.marker.color,editType:"style"},textfont:S.selected.textfont,editType:"style"},unselected:{marker:{opacity:S.unselected.marker.opacity,color:S.unselected.marker.color,editType:"style"},textfont:S.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},92290:function(Q,z,t){var S=t(89298),k=t(42973),l=t(52075).hasColorscale,T=t(78803),b=t(75341),d=t(66279);Q.exports=function(s,e){var i,r,n,a,o,u,p=S.getFromId(s,e.xaxis||"x"),c=S.getFromId(s,e.yaxis||"y"),x={msUTC:!(!e.base&&e.base!==0)};e.orientation==="h"?(i=p.makeCalcdata(e,"x",x),n=c.makeCalcdata(e,"y"),a=k(e,c,"y",n),o=!!e.yperiodalignment,u="y"):(i=c.makeCalcdata(e,"y",x),n=p.makeCalcdata(e,"x"),a=k(e,p,"x",n),o=!!e.xperiodalignment,u="x"),r=a.vals;for(var g=Math.min(r.length,i.length),f=new Array(g),y=0;y<g;y++)f[y]={p:r[y],s:i[y]},o&&(f[y].orig_p=n[y],f[y][u+"End"]=a.ends[y],f[y][u+"Start"]=a.starts[y]),e.ids&&(f[y].id=String(e.ids[y]));return l(e,"marker")&&T(s,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),l(e,"marker.line")&&T(s,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}),b(f,e),d(f,e),f}},97313:function(Q){Q.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},11661:function(Q,z,t){var S=t(92770),k=t(71828).isArrayOrTypedArray,l=t(50606).BADNUM,T=t(73972),b=t(89298),d=t(99082).getAxisGroup,s=t(61546);function e(g,f,y,v,m){if(v.length){var _,h,A,w;switch(function(E,L){var C,P;for(C=0;C<L.length;C++){var D,G=L[C],I=G[0].trace,H=I.type==="funnel"?I._base:I.base,N=I.orientation==="h"?I.xcalendar:I.ycalendar,F=E.type==="category"||E.type==="multicategory"?function(){return null}:E.d2c;if(k(H)){for(P=0;P<Math.min(H.length,G.length);P++)D=F(H[P],0,N),S(D)?(G[P].b=+D,G[P].hasB=1):G[P].b=0;for(;P<G.length;P++)G[P].b=0}else{D=F(H,0,N);var V=S(D);for(D=V?D:0,P=0;P<G.length;P++)G[P].b=D,V&&(G[P].hasB=1)}}}(y,v),m.mode){case"overlay":i(f,y,v,m);break;case"group":for(_=[],h=[],A=0;A<v.length;A++)(w=v[A])[0].trace.offset===void 0?h.push(w):_.push(w);h.length&&function(E,L,C,P,D){var G=new s(P,{posAxis:L,sepNegVal:!1,overlapNoMerge:!D.norm});(function(I,H,N,F){for(var V=I._fullLayout,q=N.positions,te=N.distinctPositions,$=N.minDiff,W=N.traces,Z=W.length,J=q.length!==te.length,ee=$*(1-F.gap),re=d(V,H._id)+W[0][0].trace.orientation,ae=V._alignmentOpts[re]||{},oe=0;oe<Z;oe++){var ce,pe,ve=W[oe],we=ve[0].trace,xe=ae[we.alignmentgroup]||{},ge=Object.keys(xe.offsetGroups||{}).length,Oe=(ce=ge?ee/ge:J?ee/Z:ee)*(1-(F.groupgap||0));pe=ge?((2*we._offsetIndex+1-ge)*ce-Oe)/2:J?((2*oe+1-Z)*ce-Oe)/2:-Oe/2;var Ae=ve[0].t;Ae.barwidth=Oe,Ae.poffset=pe,Ae.bargroupwidth=ee,Ae.bardelta=$}N.binWidth=W[0][0].t.barwidth/100,n(N),a(H,N),o(H,N,J)})(E,L,G,D),function(I,H){for(var N=I.traces,F=0;F<N.length;F++){var V=N[F];if(V[0].trace.base===void 0)for(var q=new s([V],{posAxis:H,sepNegVal:!0,overlapNoMerge:!0}),te=0;te<V.length;te++){var $=V[te];if($.p!==l){var W=q.put($.p,$.b+$.s);W&&($.b=W)}}}}(G,L),D.norm?(p(G),c(C,G,D)):u(C,G)}(g,f,y,h,m),_.length&&i(f,y,_,m);break;case"stack":case"relative":for(_=[],h=[],A=0;A<v.length;A++)(w=v[A])[0].trace.base===void 0?h.push(w):_.push(w);h.length&&function(E,L,C,P,D){var G=new s(P,{posAxis:L,sepNegVal:D.mode==="relative",overlapNoMerge:!(D.norm||D.mode==="stack"||D.mode==="relative")});r(L,G,D),function(V,q,te){var $,W,Z,J,ee,re,ae=x(V),oe=q.traces;for(J=0;J<oe.length;J++)if((W=($=oe[J])[0].trace).type==="funnel")for(ee=0;ee<$.length;ee++)(re=$[ee]).s!==l&&q.put(re.p,-.5*re.s);for(J=0;J<oe.length;J++){Z=(W=($=oe[J])[0].trace).type==="funnel";var ce=[];for(ee=0;ee<$.length;ee++)if((re=$[ee]).s!==l){var pe;pe=Z?re.s:re.s+re.b;var ve=q.put(re.p,pe),we=ve+pe;re.b=ve,re[ae]=we,te.norm||(ce.push(we),re.hasB&&ce.push(ve))}te.norm||(W._extremes[V._id]=b.findExtremes(V,ce,{tozero:!0,padded:!0}))}}(C,G,D);for(var I=0;I<P.length;I++)for(var H=P[I],N=0;N<H.length;N++){var F=H[N];F.s!==l&&F.b+F.s===G.get(F.p,F.s)&&(F._outmost=!0)}D.norm&&c(C,G,D)}(0,f,y,h,m),_.length&&i(f,y,_,m)}(function(E,L){var C,P,D,G=x(L),I={},H=1/0,N=-1/0;for(C=0;C<E.length;C++)for(D=E[C],P=0;P<D.length;P++){var F=D[P].p;S(F)&&(H=Math.min(H,F),N=Math.max(N,F))}var V=1e4/(N-H),q=I.round=function(re){return String(Math.round(V*(re-H)))};for(C=0;C<E.length;C++){(D=E[C])[0].t.extents=I;var te=D[0].t.poffset,$=Array.isArray(te);for(P=0;P<D.length;P++){var W=D[P],Z=W[G]-W.w/2;if(S(Z)){var J=W[G]+W.w/2,ee=q(W.p);I[ee]?I[ee]=[Math.min(Z,I[ee][0]),Math.max(J,I[ee][1])]:I[ee]=[Z,J]}W.p0=W.p+($?te[P]:te),W.p1=W.p0+W.w,W.s0=W.b,W.s1=W.s0+W.s}}})(v,f)}}function i(g,f,y,v){for(var m=0;m<y.length;m++){var _=y[m],h=new s([_],{posAxis:g,sepNegVal:!1,overlapNoMerge:!v.norm});r(g,h,v),v.norm?(p(h),c(f,h,v)):u(f,h)}}function r(g,f,y){for(var v=f.minDiff,m=f.traces,_=v*(1-y.gap),h=_*(1-(y.groupgap||0)),A=-h/2,w=0;w<m.length;w++){var E=m[w][0].t;E.barwidth=h,E.poffset=A,E.bargroupwidth=_,E.bardelta=v}f.binWidth=m[0][0].t.barwidth/100,n(f),a(g,f),o(g,f)}function n(g){var f,y,v=g.traces;for(f=0;f<v.length;f++){var m,_=v[f],h=_[0],A=h.trace,w=h.t,E=A._offset||A.offset,L=w.poffset;if(k(E)){for(m=Array.prototype.slice.call(E,0,_.length),y=0;y<m.length;y++)S(m[y])||(m[y]=L);for(y=m.length;y<_.length;y++)m.push(L);w.poffset=m}else E!==void 0&&(w.poffset=E);var C=A._width||A.width,P=w.barwidth;if(k(C)){var D=Array.prototype.slice.call(C,0,_.length);for(y=0;y<D.length;y++)S(D[y])||(D[y]=P);for(y=D.length;y<_.length;y++)D.push(P);if(w.barwidth=D,E===void 0){for(m=[],y=0;y<_.length;y++)m.push(L+(P-D[y])/2);w.poffset=m}}else C!==void 0&&(w.barwidth=C,E===void 0&&(w.poffset=L+(P-C)/2))}}function a(g,f){for(var y=f.traces,v=x(g),m=0;m<y.length;m++)for(var _=y[m],h=_[0].t,A=h.poffset,w=Array.isArray(A),E=h.barwidth,L=Array.isArray(E),C=0;C<_.length;C++){var P=_[C],D=P.w=L?E[C]:E;P.p===void 0&&(P.p=P[v],P["orig_"+v]=P[v]);var G=(w?A[C]:A)+D/2;P[v]=P.p+G}}function o(g,f,y){var v=f.traces,m=f.minDiff/2;b.minDtick(g,f.minDiff,f.distinctPositions[0],y);for(var _=0;_<v.length;_++){var h,A,w,E,L=v[_],C=L[0],P=C.trace,D=[];for(E=0;E<L.length;E++)A=(h=L[E]).p-m,w=h.p+m,D.push(A,w);if(P.width||P.offset){var G=C.t,I=G.poffset,H=G.barwidth,N=Array.isArray(I),F=Array.isArray(H);for(E=0;E<L.length;E++){h=L[E];var V=N?I[E]:I,q=F?H[E]:H;w=(A=h.p+V)+q,D.push(A,w)}}P._extremes[g._id]=b.findExtremes(g,D,{padded:!1})}}function u(g,f){for(var y=f.traces,v=x(g),m=0;m<y.length;m++){for(var _=y[m],h=_[0].trace,A=h.type==="scatter",w=h.orientation==="v",E=[],L=!1,C=0;C<_.length;C++){var P=_[C],D=A?0:P.b,G=A?w?P.y:P.x:D+P.s;P[v]=G,E.push(G),P.hasB&&E.push(D),P.hasB&&P.b||(L=!0)}h._extremes[g._id]=b.findExtremes(g,E,{tozero:L,padded:!0})}}function p(g){for(var f=g.traces,y=0;y<f.length;y++)for(var v=f[y],m=0;m<v.length;m++){var _=v[m];_.s!==l&&g.put(_.p,_.b+_.s)}}function c(g,f,y){var v=f.traces,m=x(g),_=y.norm==="fraction"?1:100,h=_/1e9,A=g.l2c(g.c2l(0)),w=y.mode==="stack"?_:A;function E(te){return S(g.c2l(te))&&(te<A-h||te>w+h||!S(A))}for(var L=0;L<v.length;L++){for(var C=v[L],P=C[0].trace,D=[],G=!1,I=!1,H=0;H<C.length;H++){var N=C[H];if(N.s!==l){var F=Math.abs(_/f.get(N.p,N.s));N.b*=F,N.s*=F;var V=N.b,q=V+N.s;N[m]=q,D.push(q),I=I||E(q),N.hasB&&(D.push(V),I=I||E(V)),N.hasB&&N.b||(G=!0)}}P._extremes[g._id]=b.findExtremes(g,D,{tozero:G,padded:I})}}function x(g){return g._id.charAt(0)}Q.exports={crossTraceCalc:function(g,f){for(var y=f.xaxis,v=f.yaxis,m=g._fullLayout,_=g._fullData,h=g.calcdata,A=[],w=[],E=0;E<_.length;E++){var L=_[E];if(L.visible===!0&&T.traceIs(L,"bar")&&L.xaxis===y._id&&L.yaxis===v._id&&(L.orientation==="h"?A.push(h[E]):w.push(h[E]),L._computePh))for(var C=g.calcdata[E],P=0;P<C.length;P++)typeof C[P].ph0=="function"&&(C[P].ph0=C[P].ph0()),typeof C[P].ph1=="function"&&(C[P].ph1=C[P].ph1())}var D={xCat:y.type==="category"||y.type==="multicategory",yCat:v.type==="category"||v.type==="multicategory",mode:m.barmode,norm:m.barnorm,gap:m.bargap,groupgap:m.bargroupgap};e(g,y,v,w,D),e(g,v,y,A,D)},setGroupPositions:e}},90769:function(Q,z,t){var S=t(71828),k=t(7901),l=t(73972),T=t(67513),b=t(73927),d=t(98340),s=t(26125),e=t(1486),i=S.coerceFont;function r(n,a,o,u,p,c){var x=(c=c||{}).moduleHasSelected!==!1,g=c.moduleHasUnselected!==!1,f=c.moduleHasConstrain!==!1,y=c.moduleHasCliponaxis!==!1,v=c.moduleHasTextangle!==!1,m=c.moduleHasInsideanchor!==!1,_=!!c.hasPathbar,h=Array.isArray(p)||p==="auto",A=h||p==="inside",w=h||p==="outside";if(A||w){var E=i(u,"textfont",o.font),L=S.extendFlat({},E),C=!(n.textfont&&n.textfont.color);if(C&&delete L.color,i(u,"insidetextfont",L),_){var P=S.extendFlat({},E);C&&delete P.color,i(u,"pathbar.textfont",P)}w&&i(u,"outsidetextfont",E),x&&u("selected.textfont.color"),g&&u("unselected.textfont.color"),f&&u("constraintext"),y&&u("cliponaxis"),v&&u("textangle"),u("texttemplate")}A&&m&&u("insidetextanchor")}Q.exports={supplyDefaults:function(n,a,o,u){function p(f,y){return S.coerce(n,a,e,f,y)}if(T(n,a,u,p)){b(n,a,u,p),p("xhoverformat"),p("yhoverformat"),p("orientation",a.x&&!a.y?"h":"v"),p("base"),p("offset"),p("width"),p("text"),p("hovertext"),p("hovertemplate");var c=p("textposition");r(n,0,u,p,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),d(n,a,p,o,u);var x=(a.marker.line||{}).color,g=l.getComponentMethod("errorbars","supplyDefaults");g(n,a,x||k.defaultLine,{axis:"y"}),g(n,a,x||k.defaultLine,{axis:"x",inherit:"y"}),S.coerceSelectionMarkerOpacity(a,p)}else a.visible=!1},crossTraceDefaults:function(n,a){var o,u;function p(x){return S.coerce(u._input,u,e,x)}if(a.barmode==="group")for(var c=0;c<n.length;c++)(u=n[c]).type==="bar"&&(o=u._input,s(o,u,a,p))},handleText:r}},58065:function(Q){Q.exports=function(z,t,S){return z.x="xVal"in t?t.xVal:t.x,z.y="yVal"in t?t.yVal:t.y,t.xa&&(z.xaxis=t.xa),t.ya&&(z.yaxis=t.ya),S.orientation==="h"?(z.label=z.y,z.value=z.x):(z.label=z.x,z.value=z.y),z}},69383:function(Q,z,t){var S=t(92770),k=t(84267),l=t(71828).isArrayOrTypedArray;z.coerceString=function(T,b,d){if(typeof b=="string"){if(b||!T.noBlank)return b}else if((typeof b=="number"||b===!0)&&!T.strict)return String(b);return d!==void 0?d:T.dflt},z.coerceNumber=function(T,b,d){if(S(b)){b=+b;var s=T.min,e=T.max;if(!(s!==void 0&&b<s||e!==void 0&&b>e))return b}return d!==void 0?d:T.dflt},z.coerceColor=function(T,b,d){return k(b).isValid()?b:d!==void 0?d:T.dflt},z.coerceEnumerated=function(T,b,d){return T.coerceNumber&&(b=+b),T.values.indexOf(b)!==-1?b:d!==void 0?d:T.dflt},z.getValue=function(T,b){var d;return Array.isArray(T)?b<T.length&&(d=T[b]):d=T,d},z.getLineWidth=function(T,b){return 0<b.mlw?b.mlw:l(T.marker.line.width)?0:T.marker.line.width}},95423:function(Q,z,t){var S=t(30211),k=t(73972),l=t(7901),T=t(71828).fillText,b=t(69383).getLineWidth,d=t(89298).hoverLabelText,s=t(50606).BADNUM;function e(r,n,a,o,u){var p,c,x,g,f,y,v,m=r.cd,_=m[0].trace,h=m[0].t,A=o==="closest",w=_.type==="waterfall",E=r.maxHoverDistance,L=r.maxSpikeDistance;_.orientation==="h"?(p=a,c=n,x="y",g="x",f=$,y=q):(p=n,c=a,x="x",g="y",y=$,f=q);var C=_[x+"period"],P=A||C;function D(ce){return I(ce,-1)}function G(ce){return I(ce,1)}function I(ce,pe){var ve=ce.w;return ce[x]+pe*ve/2}function H(ce){return ce[x+"End"]-ce[x+"Start"]}var N=A?D:C?function(ce){return ce.p-H(ce)/2}:function(ce){return Math.min(D(ce),ce.p-h.bardelta/2)},F=A?G:C?function(ce){return ce.p+H(ce)/2}:function(ce){return Math.max(G(ce),ce.p+h.bardelta/2)};function V(ce,pe,ve){return u.finiteRange&&(ve=0),S.inbox(ce-p,pe-p,ve+Math.min(1,Math.abs(pe-ce)/v)-1)}function q(ce){return V(N(ce),F(ce),E)}function te(ce){var pe=ce[g];if(w){var ve=Math.abs(ce.rawS)||0;c>0?pe+=ve:c<0&&(pe-=ve)}return pe}function $(ce){var pe=c,ve=ce.b,we=te(ce);return S.inbox(ve-pe,we-pe,E+(we-pe)/(we-ve)-1)}var W=r[x+"a"],Z=r[g+"a"];v=Math.abs(W.r2c(W.range[1])-W.r2c(W.range[0]));var J=S.getDistanceFunction(o,f,y,function(ce){return(f(ce)+y(ce))/2});if(S.getClosest(m,J,r),r.index!==!1&&m[r.index].p!==s){P||(N=function(ce){return Math.min(D(ce),ce.p-h.bargroupwidth/2)},F=function(ce){return Math.max(G(ce),ce.p+h.bargroupwidth/2)});var ee=m[r.index],re=_.base?ee.b+ee.s:ee.s;r[g+"0"]=r[g+"1"]=Z.c2p(ee[g],!0),r[g+"LabelVal"]=re;var ae=h.extents[h.extents.round(ee.p)];r[x+"0"]=W.c2p(A?N(ee):ae[0],!0),r[x+"1"]=W.c2p(A?F(ee):ae[1],!0);var oe=ee.orig_p!==void 0;return r[x+"LabelVal"]=oe?ee.orig_p:ee.p,r.labelLabel=d(W,r[x+"LabelVal"],_[x+"hoverformat"]),r.valueLabel=d(Z,r[g+"LabelVal"],_[g+"hoverformat"]),r.baseLabel=d(Z,ee.b,_[g+"hoverformat"]),r.spikeDistance=(function(ce){var pe=c,ve=ce.b,we=te(ce);return S.inbox(ve-pe,we-pe,L+(we-pe)/(we-ve)-1)}(ee)+function(ce){return V(D(ce),G(ce),L)}(ee))/2,r[x+"Spike"]=W.c2p(ee.p,!0),T(ee,_,r),r.hovertemplate=_.hovertemplate,r}}function i(r,n){var a=n.mcc||r.marker.color,o=n.mlcc||r.marker.line.color,u=b(r,n);return l.opacity(a)?a:l.opacity(o)&&u?o:void 0}Q.exports={hoverPoints:function(r,n,a,o,u){var p=e(r,n,a,o,u);if(p){var c=p.cd,x=c[0].trace,g=c[p.index];return p.color=i(x,g),k.getComponentMethod("errorbars","hoverInfo")(g,x,p),[p]}},hoverOnBars:e,getTraceColor:i}},60822:function(Q,z,t){Q.exports={attributes:t(1486),layoutAttributes:t(43641),supplyDefaults:t(90769).supplyDefaults,crossTraceDefaults:t(90769).crossTraceDefaults,supplyLayoutDefaults:t(13957),calc:t(92290),crossTraceCalc:t(11661).crossTraceCalc,colorbar:t(4898),arraysToCalcdata:t(75341),plot:t(17295).plot,style:t(16688).style,styleOnSelect:t(16688).styleOnSelect,hoverPoints:t(95423).hoverPoints,eventData:t(58065),selectPoints:t(81974),moduleType:"trace",name:"bar",basePlotModule:t(93612),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},43641:function(Q){Q.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},13957:function(Q,z,t){var S=t(73972),k=t(89298),l=t(71828),T=t(43641);Q.exports=function(b,d,s){function e(x,g){return l.coerce(b,d,T,x,g)}for(var i=!1,r=!1,n=!1,a={},o=e("barmode"),u=0;u<s.length;u++){var p=s[u];if(S.traceIs(p,"bar")&&p.visible){if(i=!0,o==="group"){var c=p.xaxis+p.yaxis;a[c]&&(n=!0),a[c]=!0}p.visible&&p.type==="histogram"&&k.getFromId({_fullLayout:d},p[p.orientation==="v"?"xaxis":"yaxis"]).type!=="category"&&(r=!0)}}i?(o!=="overlay"&&e("barnorm"),e("bargap",r&&!n?0:.2),e("bargroupgap")):delete d.barmode}},17295:function(Q,z,t){var S=t(39898),k=t(92770),l=t(71828),T=t(63893),b=t(7901),d=t(91424),s=t(73972),e=t(89298).tickText,i=t(72597),r=i.recordMinTextSize,n=i.clearMinTextSize,a=t(16688),o=t(69383),u=t(97313),p=t(1486),c=p.text,x=p.textposition,g=t(23469).appendArrayPointValue,f=u.TEXTPAD;function y(L){return L.id}function v(L){if(L.ids)return y}function m(L,C){return L<C?1:-1}function _(L,C,P,D){var G;return!C.uniformtext.mode&&h(P)?(D&&(G=D()),L.transition().duration(P.duration).ease(P.easing).each("end",function(){G&&G()}).each("interrupt",function(){G&&G()})):L}function h(L){return L&&L.duration>0}function A(L){return L==="auto"?0:L}function w(L,C){var P=Math.PI/180*C,D=Math.abs(Math.sin(P)),G=Math.abs(Math.cos(P));return{x:L.width*G+L.height*D,y:L.width*D+L.height*G}}function E(L,C,P,D,G,I){var H=!!I.isHorizontal,N=!!I.constrained,F=I.angle||0,V=I.anchor||"end",q=V==="end",te=V==="start",$=((I.leftToRight||0)+1)/2,W=1-$,Z=G.width,J=G.height,ee=Math.abs(C-L),re=Math.abs(D-P),ae=ee>2*f&&re>2*f?f:0;ee-=2*ae,re-=2*ae;var oe=A(F);F!=="auto"||Z<=ee&&J<=re||!(Z>ee||J>re)||(Z>re||J>ee)&&Z<J==ee<re||(oe+=90);var ce=w(G,oe),pe=1;N&&(pe=Math.min(1,ee/ce.x,re/ce.y));var ve=G.left*W+G.right*$,we=(G.top+G.bottom)/2,xe=(L+f)*W+(C-f)*$,ge=(P+D)/2,Oe=0,Ae=0;if(te||q){var Te=(H?ce.x:ce.y)/2,se=H?m(L,C):m(P,D);H?te?(xe=L+se*ae,Oe=-se*Te):(xe=C-se*ae,Oe=se*Te):te?(ge=P+se*ae,Ae=-se*Te):(ge=D-se*ae,Ae=se*Te)}return{textX:ve,textY:we,targetX:xe,targetY:ge,anchorX:Oe,anchorY:Ae,scale:pe,rotate:oe}}Q.exports={plot:function(L,C,P,D,G,I){var H=C.xaxis,N=C.yaxis,F=L._fullLayout,V=L._context.staticPlot;G||(G={mode:F.barmode,norm:F.barmode,gap:F.bargap,groupgap:F.bargroupgap},n("bar",F));var q=l.makeTraceGroups(D,P,"trace bars").each(function(te){var $=S.select(this),W=te[0].trace,Z=W.type==="waterfall",J=W.type==="funnel",ee=W.type==="bar"||J,re=0;Z&&W.connector.visible&&W.connector.mode==="between"&&(re=W.connector.line.width/2);var ae=W.orientation==="h",oe=h(G),ce=l.ensureSingle($,"g","points"),pe=v(W),ve=ce.selectAll("g.point").data(l.identity,pe);ve.enter().append("g").classed("point",!0),ve.exit().remove(),ve.each(function(xe,ge){var Oe,Ae,Te=S.select(this),se=function(Ce,Fe,Re,He){var Ge=[],$e=[],st=He?Fe:Re,Ke=He?Re:Fe;return Ge[0]=st.c2p(Ce.s0,!0),$e[0]=Ke.c2p(Ce.p0,!0),Ge[1]=st.c2p(Ce.s1,!0),$e[1]=Ke.c2p(Ce.p1,!0),He?[Ge,$e]:[$e,Ge]}(xe,H,N,ae),le=se[0][0],ne=se[0][1],me=se[1][0],Ee=se[1][1],be=(ae?ne-le:Ee-me)==0;if(be&&ee&&o.getLineWidth(W,xe)&&(be=!1),be||(be=!(k(le)&&k(ne)&&k(me)&&k(Ee))),xe.isBlank=be,be&&(ae?ne=le:Ee=me),re&&!be&&(ae?(le-=m(le,ne)*re,ne+=m(le,ne)*re):(me-=m(me,Ee)*re,Ee+=m(me,Ee)*re)),W.type==="waterfall"){if(!be){var De=W[xe.dir].marker;Oe=De.line.width,Ae=De.color}}else Oe=o.getLineWidth(W,xe),Ae=xe.mc||W.marker.color;function Ue(Ce){var Fe=S.round(Oe/2%1,2);return G.gap===0&&G.groupgap===0?S.round(Math.round(Ce)-Fe,2):Ce}if(!L._context.staticPlot){var he=b.opacity(Ae)<1||Oe>.01?Ue:function(Ce,Fe,Re){return Re&&Ce===Fe?Ce:Math.abs(Ce-Fe)>=2?Ue(Ce):Ce>Fe?Math.ceil(Ce):Math.floor(Ce)};le=he(le,ne,ae),ne=he(ne,le,ae),me=he(me,Ee,!ae),Ee=he(Ee,me,!ae)}var ke=_(l.ensureSingle(Te,"path"),F,G,I);if(ke.style("vector-effect",V?"none":"non-scaling-stroke").attr("d",isNaN((ne-le)*(Ee-me))||be&&L._context.staticPlot?"M0,0Z":"M"+le+","+me+"V"+Ee+"H"+ne+"V"+me+"Z").call(d.setClipUrl,C.layerClipId,L),!F.uniformtext.mode&&oe){var _e=d.makePointStyleFns(W);d.singlePointStyle(xe,ke,W,_e,L)}(function(Ce,Fe,Re,He,Ge,$e,st,Ke,gt,mt,at){var rt,xt=Fe.xaxis,Tt=Fe.yaxis,wt=Ce._fullLayout;function Ot(Jt,qt,Wt){return l.ensureSingle(Jt,"text").text(qt).attr({class:"bartext bartext-"+rt,"text-anchor":"middle","data-notex":1}).call(d.font,Wt).call(T.convertToTspans,Ce)}var Ct=He[0].trace,Ye=Ct.orientation==="h",Xe=function(Jt,qt,Wt,jt,fn){var xn,un=qt[0].trace;return xn=un.texttemplate?function(Ht,nn,Kt,on,hn){var dn=nn[0].trace,Mn=l.castOption(dn,Kt,"texttemplate");if(!Mn)return"";var Cn,Tn,Pn,Wn,$n=dn.type==="histogram",ar=dn.type==="waterfall",Qn=dn.type==="funnel",Gn=dn.orientation==="h";function dr(In){return e(Wn,Wn.c2l(In),!0).text}Gn?(Cn="y",Tn=hn,Pn="x",Wn=on):(Cn="x",Tn=on,Pn="y",Wn=hn);var Bt,tn=nn[Kt],cn={};cn.label=tn.p,cn.labelLabel=cn[Cn+"Label"]=(Bt=tn.p,e(Tn,Tn.c2l(Bt),!0).text);var gn=l.castOption(dn,tn.i,"text");(gn===0||gn)&&(cn.text=gn),cn.value=tn.s,cn.valueLabel=cn[Pn+"Label"]=dr(tn.s);var kn={};g(kn,dn,tn.i),($n||kn.x===void 0)&&(kn.x=Gn?cn.value:cn.label),($n||kn.y===void 0)&&(kn.y=Gn?cn.label:cn.value),($n||kn.xLabel===void 0)&&(kn.xLabel=Gn?cn.valueLabel:cn.labelLabel),($n||kn.yLabel===void 0)&&(kn.yLabel=Gn?cn.labelLabel:cn.valueLabel),ar&&(cn.delta=+tn.rawS||tn.s,cn.deltaLabel=dr(cn.delta),cn.final=tn.v,cn.finalLabel=dr(cn.final),cn.initial=cn.final-cn.delta,cn.initialLabel=dr(cn.initial)),Qn&&(cn.value=tn.s,cn.valueLabel=dr(cn.value),cn.percentInitial=tn.begR,cn.percentInitialLabel=l.formatPercent(tn.begR),cn.percentPrevious=tn.difR,cn.percentPreviousLabel=l.formatPercent(tn.difR),cn.percentTotal=tn.sumR,cn.percenTotalLabel=l.formatPercent(tn.sumR));var Vn=l.castOption(dn,tn.i,"customdata");return Vn&&(cn.customdata=Vn),l.texttemplateString(Mn,cn,Ht._d3locale,kn,cn,dn._meta||{})}(Jt,qt,Wt,jt,fn):un.textinfo?function(Ht,nn,Kt,on){var hn=Ht[0].trace,dn=hn.orientation==="h",Mn=hn.type==="waterfall",Cn=hn.type==="funnel";function Tn(Vn){return e(dn?Kt:on,+Vn,!0).text}var Pn,Wn,$n=hn.textinfo,ar=Ht[nn],Qn=$n.split("+"),Gn=[],dr=function(Vn){return Qn.indexOf(Vn)!==-1};if(dr("label")&&Gn.push((Wn=Ht[nn].p,e(dn?on:Kt,Wn,!0).text)),dr("text")&&((Pn=l.castOption(hn,ar.i,"text"))===0||Pn)&&Gn.push(Pn),Mn){var Bt=+ar.rawS||ar.s,tn=ar.v,cn=tn-Bt;dr("initial")&&Gn.push(Tn(cn)),dr("delta")&&Gn.push(Tn(Bt)),dr("final")&&Gn.push(Tn(tn))}if(Cn){dr("value")&&Gn.push(Tn(ar.s));var gn=0;dr("percent initial")&&gn++,dr("percent previous")&&gn++,dr("percent total")&&gn++;var kn=gn>1;dr("percent initial")&&(Pn=l.formatPercent(ar.begR),kn&&(Pn+=" of initial"),Gn.push(Pn)),dr("percent previous")&&(Pn=l.formatPercent(ar.difR),kn&&(Pn+=" of previous"),Gn.push(Pn)),dr("percent total")&&(Pn=l.formatPercent(ar.sumR),kn&&(Pn+=" of total"),Gn.push(Pn))}return Gn.join("<br>")}(qt,Wt,jt,fn):o.getValue(un.text,Wt),o.coerceString(c,xn)}(wt,He,Ge,xt,Tt);rt=function(Jt,qt){var Wt=o.getValue(Jt.textposition,qt);return o.coerceEnumerated(x,Wt)}(Ct,Ge);var Ve=mt.mode==="stack"||mt.mode==="relative",We=He[Ge],nt=!Ve||We._outmost;if(Xe&&rt!=="none"&&(!We.isBlank&&$e!==st&&Ke!==gt||rt!=="auto"&&rt!=="inside")){var ot=wt.font,Ie=a.getBarColor(He[Ge],Ct),ze=a.getInsideTextFont(Ct,Ge,ot,Ie),et=a.getOutsideTextFont(Ct,Ge,ot),tt=Re.datum();Ye?xt.type==="log"&&tt.s0<=0&&($e=xt.range[0]<xt.range[1]?0:xt._length):Tt.type==="log"&&tt.s0<=0&&(Ke=Tt.range[0]<Tt.range[1]?Tt._length:0);var dt,pt,vt,ct,kt,ut=Math.abs(st-$e)-2*f,ft=Math.abs(gt-Ke)-2*f;if(rt==="outside"&&(nt||We.hasB||(rt="inside")),rt==="auto"&&(nt?(rt="inside",dt=Ot(Re,Xe,kt=l.ensureUniformFontSize(Ce,ze)),vt=(pt=d.bBox(dt.node())).width,ct=pt.height,vt>0&&ct>0&&(vt<=ut&&ct<=ft||vt<=ft&&ct<=ut||(Ye?ut>=vt*(ft/ct):ft>=ct*(ut/vt)))?rt="inside":(rt="outside",dt.remove(),dt=null)):rt="inside"),!dt){var bt=(dt=Ot(Re,Xe,kt=l.ensureUniformFontSize(Ce,rt==="outside"?et:ze))).attr("transform");if(dt.attr("transform",""),vt=(pt=d.bBox(dt.node())).width,ct=pt.height,dt.attr("transform",bt),vt<=0||ct<=0)return void dt.remove()}var It,zt=Ct.textangle;It=rt==="outside"?function(Jt,qt,Wt,jt,fn,xn){var un,Ht=!!xn.isHorizontal,nn=!!xn.constrained,Kt=xn.angle||0,on=fn.width,hn=fn.height,dn=Math.abs(qt-Jt),Mn=Math.abs(jt-Wt);un=Ht?Mn>2*f?f:0:dn>2*f?f:0;var Cn=1;nn&&(Cn=Ht?Math.min(1,Mn/hn):Math.min(1,dn/on));var Tn=A(Kt),Pn=w(fn,Tn),Wn=(Ht?Pn.x:Pn.y)/2,$n=(fn.left+fn.right)/2,ar=(fn.top+fn.bottom)/2,Qn=(Jt+qt)/2,Gn=(Wt+jt)/2,dr=0,Bt=0,tn=Ht?m(qt,Jt):m(Wt,jt);return Ht?(Qn=qt-tn*un,dr=tn*Wn):(Gn=jt+tn*un,Bt=-tn*Wn),{textX:$n,textY:ar,targetX:Qn,targetY:Gn,anchorX:dr,anchorY:Bt,scale:Cn,rotate:Tn}}($e,st,Ke,gt,pt,{isHorizontal:Ye,constrained:Ct.constraintext==="both"||Ct.constraintext==="outside",angle:zt}):E($e,st,Ke,gt,pt,{isHorizontal:Ye,constrained:Ct.constraintext==="both"||Ct.constraintext==="inside",angle:zt,anchor:Ct.insidetextanchor}),It.fontSize=kt.size,r(Ct.type==="histogram"?"bar":Ct.type,It,wt),We.transform=It;var Rt=_(dt,wt,mt,at);l.setTransormAndDisplay(Rt,It)}else Re.select("text").remove()})(L,C,Te,te,ge,le,ne,me,Ee,G,I),C.layerClipId&&d.hideOutsideRangePoint(xe,Te.select("text"),H,N,W.xcalendar,W.ycalendar)});var we=W.cliponaxis===!1;d.setClipUrl($,we?null:C.layerClipId,L)});s.getComponentMethod("errorbars","plot")(L,q,C,G)},toMoveInsideBar:E}},81974:function(Q){function z(t,S,k,l,T){var b=S.c2p(l?t.s0:t.p0,!0),d=S.c2p(l?t.s1:t.p1,!0),s=k.c2p(l?t.p0:t.s0,!0),e=k.c2p(l?t.p1:t.s1,!0);return T?[(b+d)/2,(s+e)/2]:l?[d,(s+e)/2]:[(b+d)/2,e]}Q.exports=function(t,S){var k,l=t.cd,T=t.xaxis,b=t.yaxis,d=l[0].trace,s=d.type==="funnel",e=d.orientation==="h",i=[];if(S===!1)for(k=0;k<l.length;k++)l[k].selected=0;else for(k=0;k<l.length;k++){var r=l[k],n="ct"in r?r.ct:z(r,T,b,e,s);S.contains(n,!1,k,t)?(i.push({pointNumber:k,x:T.c2d(r.x),y:b.c2d(r.y)}),r.selected=1):r.selected=0}return i}},61546:function(Q,z,t){Q.exports=k;var S=t(71828).distinctVals;function k(l,T){this.traces=l,this.sepNegVal=T.sepNegVal,this.overlapNoMerge=T.overlapNoMerge;for(var b=1/0,d=T.posAxis._id.charAt(0),s=[],e=0;e<l.length;e++){for(var i=l[e],r=0;r<i.length;r++){var n=i[r],a=n.p;a===void 0&&(a=n[d]),a!==void 0&&s.push(a)}i[0]&&i[0].width1&&(b=Math.min(i[0].width1,b))}this.positions=s;var o=S(s);this.distinctPositions=o.vals,o.vals.length===1&&b!==1/0?this.minDiff=b:this.minDiff=Math.min(o.minDiff,b);var u=(T.posAxis||{}).type;u!=="category"&&u!=="multicategory"||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}k.prototype.put=function(l,T){var b=this.getLabel(l,T),d=this.bins[b]||0;return this.bins[b]=d+T,d},k.prototype.get=function(l,T){var b=this.getLabel(l,T);return this.bins[b]||0},k.prototype.getLabel=function(l,T){return(T<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?l:Math.round(l/this.binWidth))}},16688:function(Q,z,t){var S=t(39898),k=t(7901),l=t(91424),T=t(71828),b=t(73972),d=t(72597).resizeText,s=t(1486),e=s.textfont,i=s.insidetextfont,r=s.outsidetextfont,n=t(69383);function a(y,v,m){l.pointStyle(y.selectAll("path"),v,m),o(y,v,m)}function o(y,v,m){y.selectAll("text").each(function(_){var h=S.select(this),A=T.ensureUniformFontSize(m,u(h,_,v,m));l.font(h,A)})}function u(y,v,m,_){var h=_._fullLayout.font,A=m.textfont;if(y.classed("bartext-inside")){var w=f(v,m);A=c(m,v.i,h,w)}else y.classed("bartext-outside")&&(A=x(m,v.i,h));return A}function p(y,v,m){return g(e,y.textfont,v,m)}function c(y,v,m,_){var h=p(y,v,m);return(y._input.textfont===void 0||y._input.textfont.color===void 0||Array.isArray(y.textfont.color)&&y.textfont.color[v]===void 0)&&(h={color:k.contrast(_),family:h.family,size:h.size}),g(i,y.insidetextfont,v,h)}function x(y,v,m){var _=p(y,v,m);return g(r,y.outsidetextfont,v,_)}function g(y,v,m,_){v=v||{};var h=n.getValue(v.family,m),A=n.getValue(v.size,m),w=n.getValue(v.color,m);return{family:n.coerceString(y.family,h,_.family),size:n.coerceNumber(y.size,A,_.size),color:n.coerceColor(y.color,w,_.color)}}function f(y,v){return v.type==="waterfall"?v[y.dir].marker.color:y.mcc||y.mc||v.marker.color}Q.exports={style:function(y){var v=S.select(y).selectAll("g.barlayer").selectAll("g.trace");d(y,v,"bar");var m=v.size(),_=y._fullLayout;v.style("opacity",function(h){return h[0].trace.opacity}).each(function(h){(_.barmode==="stack"&&m>1||_.bargap===0&&_.bargroupgap===0&&!h[0].trace.marker.line.width)&&S.select(this).attr("shape-rendering","crispEdges")}),v.selectAll("g.points").each(function(h){a(S.select(this),h[0].trace,y)}),b.getComponentMethod("errorbars","style")(v)},styleTextPoints:o,styleOnSelect:function(y,v,m){var _=v[0].trace;_.selectedpoints?function(h,A,w){l.selectedPointStyle(h.selectAll("path"),A),function(E,L,C){E.each(function(P){var D,G=S.select(this);if(P.selected){D=T.ensureUniformFontSize(C,u(G,P,L,C));var I=L.selected.textfont&&L.selected.textfont.color;I&&(D.color=I),l.font(G,D)}else l.selectedTextStyle(G,L)})}(h.selectAll("text"),A,w)}(m,_,y):(a(m,_,y),b.getComponentMethod("errorbars","style")(m))},getInsideTextFont:c,getOutsideTextFont:x,getBarColor:f,resizeText:d}},98340:function(Q,z,t){var S=t(7901),k=t(52075).hasColorscale,l=t(1586),T=t(71828).coercePattern;Q.exports=function(b,d,s,e,i){var r=s("marker.color",e),n=k(b,"marker");n&&l(b,d,i,s,{prefix:"marker.",cLetter:"c"}),s("marker.line.color",S.defaultLine),k(b,"marker.line")&&l(b,d,i,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width"),s("marker.opacity"),T(s,"marker.pattern",r,n),s("selected.marker.color"),s("unselected.marker.color")}},72597:function(Q,z,t){var S=t(39898),k=t(71828);function l(T){return"_"+T+"Text_minsize"}Q.exports={recordMinTextSize:function(T,b,d){if(d.uniformtext.mode){var s=l(T),e=d.uniformtext.minsize,i=b.scale*b.fontSize;b.hide=i<e,d[s]=d[s]||1/0,b.hide||(d[s]=Math.min(d[s],Math.max(i,e)))}},clearMinTextSize:function(T,b){b[l(T)]=void 0},resizeText:function(T,b,d){var s=T._fullLayout,e=s["_"+d+"Text_minsize"];if(e){var i,r=s.uniformtext.mode==="hide";switch(d){case"funnelarea":case"pie":case"sunburst":i="g.slice";break;case"treemap":case"icicle":i="g.slice, g.pathbar";break;default:i="g.points > g.point"}b.selectAll(i).each(function(n){var a=n.transform;if(a){a.scale=r&&a.hide?0:e/a.fontSize;var o=S.select(this).select("text");k.setTransormAndDisplay(o,a)}})}}}},55023:function(Q,z,t){var S=t(5386).fF,k=t(1426).extendFlat,l=t(81245),T=t(1486);Q.exports={r:l.r,theta:l.theta,r0:l.r0,dr:l.dr,theta0:l.theta0,dtheta:l.dtheta,thetaunit:l.thetaunit,base:k({},T.base,{}),offset:k({},T.offset,{}),width:k({},T.width,{}),text:k({},T.text,{}),hovertext:k({},T.hovertext,{}),marker:T.marker,hoverinfo:l.hoverinfo,hovertemplate:S(),selected:T.selected,unselected:T.unselected}},74692:function(Q,z,t){var S=t(52075).hasColorscale,k=t(78803),l=t(75341),T=t(11661).setGroupPositions,b=t(66279),d=t(73972).traceIs,s=t(71828).extendFlat;Q.exports={calc:function(e,i){for(var r=e._fullLayout,n=i.subplot,a=r[n].radialaxis,o=r[n].angularaxis,u=a.makeCalcdata(i,"r"),p=o.makeCalcdata(i,"theta"),c=i._length,x=new Array(c),g=u,f=p,y=0;y<c;y++)x[y]={p:f[y],s:g[y]};function v(m){var _=i[m];_!==void 0&&(i["_"+m]=Array.isArray(_)?o.makeCalcdata(i,m):o.d2c(_,i.thetaunit))}return o.type==="linear"&&(v("width"),v("offset")),S(i,"marker")&&k(e,i,{vals:i.marker.color,containerStr:"marker",cLetter:"c"}),S(i,"marker.line")&&k(e,i,{vals:i.marker.line.color,containerStr:"marker.line",cLetter:"c"}),l(x,i),b(x,i),x},crossTraceCalc:function(e,i,r){for(var n=e.calcdata,a=[],o=0;o<n.length;o++){var u=n[o],p=u[0].trace;p.visible===!0&&d(p,"bar")&&p.subplot===r&&a.push(u)}var c=s({},i.radialaxis,{_id:"x"}),x=i.angularaxis;T(e,x,c,a,{mode:i.barmode,norm:i.barnorm,gap:i.bargap,groupgap:i.bargroupgap})}}},6135:function(Q,z,t){var S=t(71828),k=t(22184).handleRThetaDefaults,l=t(98340),T=t(55023);Q.exports=function(b,d,s,e){function i(r,n){return S.coerce(b,d,T,r,n)}k(b,d,e,i)?(i("thetaunit"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate"),l(b,d,i,s,e),S.coerceSelectionMarkerOpacity(d,i)):d.visible=!1}},27379:function(Q,z,t){var S=t(30211),k=t(71828),l=t(95423).getTraceColor,T=k.fillText,b=t(59150).makeHoverPointText,d=t(10869).isPtInsidePolygon;Q.exports=function(s,e,i){var r=s.cd,n=r[0].trace,a=s.subplot,o=a.radialAxis,u=a.angularAxis,p=a.vangles,c=p?d:k.isPtInsideSector,x=s.maxHoverDistance,g=u._period||2*Math.PI,f=Math.abs(o.g2p(Math.sqrt(e*e+i*i))),y=Math.atan2(i,e);if(o.range[0]>o.range[1]&&(y+=Math.PI),S.getClosest(r,function(_){return c(f,y,[_.rp0,_.rp1],[_.thetag0,_.thetag1],p)?x+Math.min(1,Math.abs(_.thetag1-_.thetag0)/g)-1+(_.rp1-f)/(_.rp1-_.rp0)-1:1/0},s),s.index!==!1){var v=r[s.index];s.x0=s.x1=v.ct[0],s.y0=s.y1=v.ct[1];var m=k.extendFlat({},v,{r:v.s,theta:v.p});return T(v,n,s),b(m,n,a,s),s.hovertemplate=n.hovertemplate,s.color=l(n,v),s.xLabelVal=s.yLabelVal=void 0,v.s<0&&(s.idealAlign="left"),[s]}}},23381:function(Q,z,t){Q.exports={moduleType:"trace",name:"barpolar",basePlotModule:t(23580),categories:["polar","bar","showLegend"],attributes:t(55023),layoutAttributes:t(40151),supplyDefaults:t(6135),supplyLayoutDefaults:t(19860),calc:t(74692).calc,crossTraceCalc:t(74692).crossTraceCalc,plot:t(60173),colorbar:t(4898),formatLabels:t(98608),style:t(16688).style,styleOnSelect:t(16688).styleOnSelect,hoverPoints:t(27379),selectPoints:t(81974),meta:{}}},40151:function(Q){Q.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},19860:function(Q,z,t){var S=t(71828),k=t(40151);Q.exports=function(l,T,b){var d,s={};function e(n,a){return S.coerce(l[d]||{},T[d],k,n,a)}for(var i=0;i<b.length;i++){var r=b[i];r.type==="barpolar"&&r.visible===!0&&(s[d=r.subplot]||(e("barmode"),e("bargap"),s[d]=1))}}},60173:function(Q,z,t){var S=t(39898),k=t(92770),l=t(71828),T=t(91424),b=t(10869);Q.exports=function(d,s,e){var i=d._context.staticPlot,r=s.xaxis,n=s.yaxis,a=s.radialAxis,o=s.angularAxis,u=function(c){var x=c.cxx,g=c.cyy;return c.vangles?function(f,y,v,m){var _,h;l.angleDelta(v,m)>0?(_=v,h=m):(_=m,h=v);var A=[b.findEnclosingVertexAngles(_,c.vangles)[0],(_+h)/2,b.findEnclosingVertexAngles(h,c.vangles)[1]];return b.pathPolygonAnnulus(f,y,_,h,A,x,g)}:function(f,y,v,m){return l.pathAnnulus(f,y,v,m,x,g)}}(s),p=s.layers.frontplot.select("g.barlayer");l.makeTraceGroups(p,e,"trace bars").each(function(){var c=S.select(this),x=l.ensureSingle(c,"g","points").selectAll("g.point").data(l.identity);x.enter().append("g").style("vector-effect",i?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),x.exit().remove(),x.each(function(g){var f,y=S.select(this),v=g.rp0=a.c2p(g.s0),m=g.rp1=a.c2p(g.s1),_=g.thetag0=o.c2g(g.p0),h=g.thetag1=o.c2g(g.p1);if(k(v)&&k(m)&&k(_)&&k(h)&&v!==m&&_!==h){var A=a.c2g(g.s1),w=(_+h)/2;g.ct=[r.c2p(A*Math.cos(w)),n.c2p(A*Math.sin(w))],f=u(v,m,_,h)}else f="M0,0Z";l.ensureSingle(y,"path").attr("d",f)}),T.setClipUrl(c,s._hasClipOnAxisFalse?s.clipIds.forTraces:null,d)})}},53522:function(Q,z,t){var S=t(82196),k=t(1486),l=t(22399),T=t(12663).axisHoverFormat,b=t(5386).fF,d=t(1426).extendFlat,s=S.marker,e=s.line;Q.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:S.xperiod,yperiod:S.yperiod,xperiod0:S.xperiod0,yperiod0:S.yperiod0,xperiodalignment:S.xperiodalignment,yperiodalignment:S.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:d({},s.symbol,{arrayOk:!1,editType:"plot"}),opacity:d({},s.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:d({},s.angle,{arrayOk:!1,editType:"calc"}),size:d({},s.size,{arrayOk:!1,editType:"calc"}),color:d({},s.color,{arrayOk:!1,editType:"style"}),line:{color:d({},e.color,{arrayOk:!1,dflt:l.defaultLine,editType:"style"}),width:d({},e.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:S.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup,selected:{marker:S.selected.marker,editType:"style"},unselected:{marker:S.unselected.marker,editType:"style"},text:d({},S.text,{}),hovertext:d({},S.hovertext,{}),hovertemplate:b({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},48518:function(Q,z,t){var S=t(92770),k=t(89298),l=t(42973),T=t(71828),b=t(50606).BADNUM,d=T._;Q.exports=function(c,x){var g,f,y,v,m,_,h,A=c._fullLayout,w=k.getFromId(c,x.xaxis||"x"),E=k.getFromId(c,x.yaxis||"y"),L=[],C=x.type==="violin"?"_numViolins":"_numBoxes";x.orientation==="h"?(y=w,v="x",m=E,_="y",h=!!x.yperiodalignment):(y=E,v="y",m=w,_="x",h=!!x.xperiodalignment);var P,D,G,I,H,N,F=function(Fe,Re,He,Ge){var $e,st=Re+"0"in Fe;if(Re in Fe||st&&"d"+Re in Fe){var Ke=He.makeCalcdata(Fe,Re);return[l(Fe,He,Re,Ke).vals,Ke]}$e=st?Fe[Re+"0"]:"name"in Fe&&(He.type==="category"||S(Fe.name)&&["linear","log"].indexOf(He.type)!==-1||T.isDateTime(Fe.name)&&He.type==="date")?Fe.name:Ge;for(var gt=He.type==="multicategory"?He.r2c_just_indices($e):He.d2c($e,0,Fe[Re+"calendar"]),mt=Fe._length,at=new Array(mt),rt=0;rt<mt;rt++)at[rt]=gt;return[at]}(x,_,m,A[C]),V=F[0],q=F[1],te=T.distinctVals(V,m),$=te.vals,W=te.minDiff/2,Z=(x.boxpoints||x.points)==="all"?T.identity:function(Fe){return Fe.v<P.lf||Fe.v>P.uf};if(x._hasPreCompStats){var J=x[v],ee=function(Fe){return y.d2c((x[Fe]||[])[g])},re=1/0,ae=-1/0;for(g=0;g<x._length;g++){var oe=V[g];if(S(oe)){if((P={}).pos=P[_]=oe,h&&q&&(P.orig_p=q[g]),P.q1=ee("q1"),P.med=ee("median"),P.q3=ee("q3"),D=[],J&&T.isArrayOrTypedArray(J[g]))for(f=0;f<J[g].length;f++)(N=y.d2c(J[g][f]))!==b&&(e(H={v:N,i:[g,f]},x,[g,f]),D.push(H));if(P.pts=D.sort(i),I=(G=P[v]=D.map(r)).length,P.med!==b&&P.q1!==b&&P.q3!==b&&P.med>=P.q1&&P.q3>=P.med){var ce=ee("lowerfence");P.lf=ce!==b&&ce<=P.q1?ce:n(P,G,I);var pe=ee("upperfence");P.uf=pe!==b&&pe>=P.q3?pe:a(P,G,I);var ve=ee("mean");P.mean=ve!==b?ve:I?T.mean(G,I):(P.q1+P.q3)/2;var we=ee("sd");P.sd=ve!==b&&we>=0?we:I?T.stdev(G,I,P.mean):P.q3-P.q1,P.lo=o(P),P.uo=u(P);var xe=ee("notchspan");xe=xe!==b&&xe>0?xe:p(P,I),P.ln=P.med-xe,P.un=P.med+xe;var ge=P.lf,Oe=P.uf;x.boxpoints&&G.length&&(ge=Math.min(ge,G[0]),Oe=Math.max(Oe,G[I-1])),x.notched&&(ge=Math.min(ge,P.ln),Oe=Math.max(Oe,P.un)),P.min=ge,P.max=Oe}else{var Ae;T.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+P.q1,"median = "+P.med,"q3 = "+P.q3].join(`
`)),Ae=P.med!==b?P.med:P.q1!==b?P.q3!==b?(P.q1+P.q3)/2:P.q1:P.q3!==b?P.q3:0,P.med=Ae,P.q1=P.q3=Ae,P.lf=P.uf=Ae,P.mean=P.sd=Ae,P.ln=P.un=Ae,P.min=P.max=Ae}re=Math.min(re,P.min),ae=Math.max(ae,P.max),P.pts2=D.filter(Z),L.push(P)}}x._extremes[y._id]=k.findExtremes(y,[re,ae],{padded:!0})}else{var Te=y.makeCalcdata(x,v),se=function(Fe,Re){for(var He=Fe.length,Ge=new Array(He+1),$e=0;$e<He;$e++)Ge[$e]=Fe[$e]-Re;return Ge[He]=Fe[He-1]+Re,Ge}($,W),le=$.length,ne=function(Fe){for(var Re=new Array(Fe),He=0;He<Fe;He++)Re[He]=[];return Re}(le);for(g=0;g<x._length;g++)if(N=Te[g],S(N)){var me=T.findBin(V[g],se);me>=0&&me<le&&(e(H={v:N,i:g},x,g),ne[me].push(H))}var Ee=1/0,be=-1/0,De=x.quartilemethod,Ue=De==="exclusive",he=De==="inclusive";for(g=0;g<le;g++)if(ne[g].length>0){var ke,_e;(P={}).pos=P[_]=$[g],D=P.pts=ne[g].sort(i),I=(G=P[v]=D.map(r)).length,P.min=G[0],P.max=G[I-1],P.mean=T.mean(G,I),P.sd=T.stdev(G,I,P.mean),P.med=T.interp(G,.5),I%2&&(Ue||he)?(Ue?(ke=G.slice(0,I/2),_e=G.slice(I/2+1)):he&&(ke=G.slice(0,I/2+1),_e=G.slice(I/2)),P.q1=T.interp(ke,.5),P.q3=T.interp(_e,.5)):(P.q1=T.interp(G,.25),P.q3=T.interp(G,.75)),P.lf=n(P,G,I),P.uf=a(P,G,I),P.lo=o(P),P.uo=u(P);var Ce=p(P,I);P.ln=P.med-Ce,P.un=P.med+Ce,Ee=Math.min(Ee,P.ln),be=Math.max(be,P.un),P.pts2=D.filter(Z),L.push(P)}x._extremes[y._id]=k.findExtremes(y,x.notched?Te.concat([Ee,be]):Te,{padded:!0})}return function(Fe,Re){if(T.isArrayOrTypedArray(Re.selectedpoints))for(var He=0;He<Fe.length;He++){for(var Ge=Fe[He].pts||[],$e={},st=0;st<Ge.length;st++)$e[Ge[st].i]=st;T.tagSelected(Ge,Re,$e)}}(L,x),L.length>0?(L[0].t={num:A[C],dPos:W,posLetter:_,valLetter:v,labels:{med:d(c,"median:"),min:d(c,"min:"),q1:d(c,"q1:"),q3:d(c,"q3:"),max:d(c,"max:"),mean:x.boxmean==="sd"?d(c,"mean  :"):d(c,"mean:"),lf:d(c,"lower fence:"),uf:d(c,"upper fence:")}},A[C]++,L):[{t:{empty:!0}}]};var s={text:"tx",hovertext:"htx"};function e(c,x,g){for(var f in s)T.isArrayOrTypedArray(x[f])&&(Array.isArray(g)?T.isArrayOrTypedArray(x[f][g[0]])&&(c[s[f]]=x[f][g[0]][g[1]]):c[s[f]]=x[f][g])}function i(c,x){return c.v-x.v}function r(c){return c.v}function n(c,x,g){return g===0?c.q1:Math.min(c.q1,x[Math.min(T.findBin(2.5*c.q1-1.5*c.q3,x,!0)+1,g-1)])}function a(c,x,g){return g===0?c.q3:Math.max(c.q3,x[Math.max(T.findBin(2.5*c.q3-1.5*c.q1,x),0)])}function o(c){return 4*c.q1-3*c.q3}function u(c){return 4*c.q3-3*c.q1}function p(c,x){return x===0?0:1.57*(c.q3-c.q1)/Math.sqrt(x)}},37188:function(Q,z,t){var S=t(89298),k=t(71828),l=t(99082).getAxisGroup,T=["v","h"];function b(d,s,e,i){var r,n,a,o=s.calcdata,u=s._fullLayout,p=i._id,c=p.charAt(0),x=[],g=0;for(r=0;r<e.length;r++)for(a=o[e[r]],n=0;n<a.length;n++)x.push(i.c2l(a[n].pos,!0)),g+=(a[n].pts2||[]).length;if(x.length){var f=k.distinctVals(x);i.type!=="category"&&i.type!=="multicategory"||(f.minDiff=1);var y=f.minDiff/2;S.minDtick(i,f.minDiff,f.vals[0],!0);var v=u[d==="violin"?"_numViolins":"_numBoxes"],m=u[d+"mode"]==="group"&&v>1,_=1-u[d+"gap"],h=1-u[d+"groupgap"];for(r=0;r<e.length;r++){var A,w,E,L,C,P,D=(a=o[e[r]])[0].trace,G=a[0].t,I=D.width,H=D.side;if(I)A=w=L=I/2,E=0;else if(A=y,m){var N=l(u,i._id)+D.orientation,F=(u._alignmentOpts[N]||{})[D.alignmentgroup]||{},V=Object.keys(F.offsetGroups||{}).length,q=V||v;w=A*_*h/q,E=2*A*(((V?D._offsetIndex:G.num)+.5)/q-.5)*_,L=A*_/q}else w=A*_*h,E=0,L=A;G.dPos=A,G.bPos=E,G.bdPos=w,G.wHover=L;var te,$,W,Z,J,ee,re=E+w,ae=!!I;if(H==="positive"?(C=A*(I?1:.5),te=re,P=te=E):H==="negative"?(C=te=E,P=A*(I?1:.5),$=re):(C=P=A,te=$=re),(D.boxpoints||D.points)&&g>0){var oe=D.pointpos,ce=D.jitter,pe=D.marker.size/2,ve=0;oe+ce>=0&&((ve=re*(oe+ce))>C?(ae=!0,J=pe,W=ve):ve>te&&(J=pe,W=C)),ve<=C&&(W=C);var we=0;oe-ce<=0&&((we=-re*(oe-ce))>P?(ae=!0,ee=pe,Z=we):we>$&&(ee=pe,Z=P)),we<=P&&(Z=P)}else W=C,Z=P;var xe=new Array(a.length);for(n=0;n<a.length;n++)xe[n]=a[n].pos;D._extremes[p]=S.findExtremes(i,xe,{padded:ae,vpadminus:Z,vpadplus:W,vpadLinearized:!0,ppadminus:{x:ee,y:J}[c],ppadplus:{x:J,y:ee}[c]})}}}Q.exports={crossTraceCalc:function(d,s){for(var e=d.calcdata,i=s.xaxis,r=s.yaxis,n=0;n<T.length;n++){for(var a=T[n],o=a==="h"?r:i,u=[],p=0;p<e.length;p++){var c=e[p],x=c[0].t,g=c[0].trace;g.visible!==!0||g.type!=="box"&&g.type!=="candlestick"||x.empty||(g.orientation||"v")!==a||g.xaxis!==i._id||g.yaxis!==r._id||u.push(p)}b("box",d,u,o)}},setPositionOffset:b}},36411:function(Q,z,t){var S=t(71828),k=t(73972),l=t(7901),T=t(73927),b=t(26125),d=t(4322),s=t(53522);function e(r,n,a,o){function u(H){var N=0;return H&&H.length&&(N+=1,S.isArrayOrTypedArray(H[0])&&H[0].length&&(N+=1)),N}function p(H){return S.validate(r[H],s[H])}var c,x=a("y"),g=a("x");if(n.type==="box"){var f=a("q1"),y=a("median"),v=a("q3");n._hasPreCompStats=f&&f.length&&y&&y.length&&v&&v.length,c=Math.min(S.minRowLength(f),S.minRowLength(y),S.minRowLength(v))}var m,_,h=u(x),A=u(g),w=h&&S.minRowLength(x),E=A&&S.minRowLength(g),L=o.calendar,C={autotypenumbers:o.autotypenumbers};if(n._hasPreCompStats)switch(String(A)+String(h)){case"00":var P=p("x0")||p("dx");m=!p("y0")&&!p("dy")||P?"v":"h",_=c;break;case"10":m="v",_=Math.min(c,E);break;case"20":m="h",_=Math.min(c,g.length);break;case"01":m="h",_=Math.min(c,w);break;case"02":m="v",_=Math.min(c,x.length);break;case"12":m="v",_=Math.min(c,E,x.length);break;case"21":m="h",_=Math.min(c,g.length,w);break;case"11":_=0;break;case"22":var D,G=!1;for(D=0;D<g.length;D++)if(d(g[D],L,C)==="category"){G=!0;break}if(G)m="v",_=Math.min(c,E,x.length);else{for(D=0;D<x.length;D++)if(d(x[D],L,C)==="category"){G=!0;break}G?(m="h",_=Math.min(c,g.length,w)):(m="v",_=Math.min(c,E,x.length))}}else h>0?(m="v",_=A>0?Math.min(E,w):Math.min(w)):A>0?(m="h",_=Math.min(E)):_=0;if(_){n._length=_;var I=a("orientation",m);n._hasPreCompStats?I==="v"&&A===0?(a("x0",0),a("dx",1)):I==="h"&&h===0&&(a("y0",0),a("dy",1)):I==="v"&&A===0?a("x0"):I==="h"&&h===0&&a("y0"),k.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y"],o)}else n.visible=!1}function i(r,n,a,o){var u=o.prefix,p=S.coerce2(r,n,s,"marker.outliercolor"),c=a("marker.line.outliercolor"),x="outliers";n._hasPreCompStats?x="all":(p||c)&&(x="suspectedoutliers");var g=a(u+"points",x);g?(a("jitter",g==="all"?.3:0),a("pointpos",g==="all"?-1.5:0),a("marker.symbol"),a("marker.opacity"),a("marker.size"),a("marker.angle"),a("marker.color",n.line.color),a("marker.line.color"),a("marker.line.width"),g==="suspectedoutliers"&&(a("marker.line.outliercolor",n.marker.color),a("marker.line.outlierwidth")),a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size"),a("text"),a("hovertext")):delete n.marker;var f=a("hoveron");f!=="all"&&f.indexOf("points")===-1||a("hovertemplate"),S.coerceSelectionMarkerOpacity(n,a)}Q.exports={supplyDefaults:function(r,n,a,o){function u(v,m){return S.coerce(r,n,s,v,m)}if(e(r,n,u,o),n.visible!==!1){T(r,n,o,u),u("xhoverformat"),u("yhoverformat");var p=n._hasPreCompStats;p&&(u("lowerfence"),u("upperfence")),u("line.color",(r.marker||{}).color||a),u("line.width"),u("fillcolor",l.addOpacity(n.line.color,.5));var c=!1;if(p){var x=u("mean"),g=u("sd");x&&x.length&&(c=!0,g&&g.length&&(c="sd"))}u("boxmean",c),u("whiskerwidth"),u("width"),u("quartilemethod");var f=!1;if(p){var y=u("notchspan");y&&y.length&&(f=!0)}else S.validate(r.notchwidth,s.notchwidth)&&(f=!0);u("notched",f)&&u("notchwidth"),i(r,n,u,{prefix:"box"})}},crossTraceDefaults:function(r,n){var a,o;function u(x){return S.coerce(o._input,o,s,x)}for(var p=0;p<r.length;p++){var c=(o=r[p]).type;c!=="box"&&c!=="violin"||(a=o._input,n[c+"mode"]==="group"&&b(a,o,n,u))}},handleSampleDefaults:e,handlePointsDefaults:i}},74907:function(Q){Q.exports=function(z,t){return t.hoverOnBox&&(z.hoverOnBox=t.hoverOnBox),"xVal"in t&&(z.x=t.xVal),"yVal"in t&&(z.y=t.yVal),t.xa&&(z.xaxis=t.xa),t.ya&&(z.yaxis=t.ya),z}},41868:function(Q,z,t){var S=t(89298),k=t(71828),l=t(30211),T=t(7901),b=k.fillText;function d(e,i,r,n){var a,o,u,p,c,x,g,f,y,v,m,_,h,A,w=e.cd,E=e.xa,L=e.ya,C=w[0].trace,P=w[0].t,D=C.type==="violin",G=P.bdPos,I=P.wHover,H=function(Ae){return u.c2l(Ae.pos)+P.bPos-u.c2l(x)};D&&C.side!=="both"?(C.side==="positive"&&(y=function(Ae){var Te=H(Ae);return l.inbox(Te,Te+I,v)},_=G,h=0),C.side==="negative"&&(y=function(Ae){var Te=H(Ae);return l.inbox(Te-I,Te,v)},_=0,h=G)):(y=function(Ae){var Te=H(Ae);return l.inbox(Te-I,Te+I,v)},_=h=G),A=D?function(Ae){return l.inbox(Ae.span[0]-c,Ae.span[1]-c,v)}:function(Ae){return l.inbox(Ae.min-c,Ae.max-c,v)},C.orientation==="h"?(c=i,x=r,g=A,f=y,a="y",u=L,o="x",p=E):(c=r,x=i,g=y,f=A,a="x",u=E,o="y",p=L);var N=Math.min(1,G/Math.abs(u.r2c(u.range[1])-u.r2c(u.range[0])));function F(Ae){return(g(Ae)+f(Ae))/2}v=e.maxHoverDistance-N,m=e.maxSpikeDistance-N;var V=l.getDistanceFunction(n,g,f,F);if(l.getClosest(w,V,e),e.index===!1)return[];var q=w[e.index],te=C.line.color,$=(C.marker||{}).color;T.opacity(te)&&C.line.width?e.color=te:T.opacity($)&&C.boxpoints?e.color=$:e.color=C.fillcolor,e[a+"0"]=u.c2p(q.pos+P.bPos-h,!0),e[a+"1"]=u.c2p(q.pos+P.bPos+_,!0),e[a+"LabelVal"]=q.orig_p!==void 0?q.orig_p:q.pos;var W=a+"Spike";e.spikeDistance=F(q)*m/v,e[W]=u.c2p(q.pos,!0);var Z=C.boxmean||(C.meanline||{}).visible,J=C.boxpoints||C.points,ee=J&&Z?["max","uf","q3","med","mean","q1","lf","min"]:J&&!Z?["max","uf","q3","med","q1","lf","min"]:!J&&Z?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],re=p.range[1]<p.range[0];C.orientation===(re?"v":"h")&&ee.reverse();for(var ae=e.spikeDistance,oe=e[W],ce=[],pe=0;pe<ee.length;pe++){var ve=ee[pe];if(ve in q){var we=q[ve],xe=p.c2p(we,!0),ge=k.extendFlat({},e);ge.attr=ve,ge[o+"0"]=ge[o+"1"]=xe,ge[o+"LabelVal"]=we,ge[o+"Label"]=(P.labels?P.labels[ve]+" ":"")+S.hoverLabelText(p,we,C[o+"hoverformat"]),ge.hoverOnBox=!0,ve==="mean"&&"sd"in q&&C.boxmean==="sd"&&(ge[o+"err"]=q.sd),ge.hovertemplate=!1,ce.push(ge)}}e.name="",e.spikeDistance=void 0,e[W]=void 0;for(var Oe=0;Oe<ce.length;Oe++)ce[Oe].attr!=="med"?(ce[Oe].name="",ce[Oe].spikeDistance=void 0,ce[Oe][W]=void 0):(ce[Oe].spikeDistance=ae,ce[Oe][W]=oe);return ce}function s(e,i,r){for(var n,a,o,u=e.cd,p=e.xa,c=e.ya,x=u[0].trace,g=p.c2p(i),f=c.c2p(r),y=l.quadrature(function(D){var G=Math.max(3,D.mrc||0);return Math.max(Math.abs(p.c2p(D.x)-g)-G,1-3/G)},function(D){var G=Math.max(3,D.mrc||0);return Math.max(Math.abs(c.c2p(D.y)-f)-G,1-3/G)}),v=!1,m=0;m<u.length;m++){a=u[m];for(var _=0;_<(a.pts||[]).length;_++){var h=y(o=a.pts[_]);h<=e.distance&&(e.distance=h,v=[m,_])}}if(!v)return!1;o=(a=u[v[0]]).pts[v[1]];var A=p.c2p(o.x,!0),w=c.c2p(o.y,!0),E=o.mrc||1;n=k.extendFlat({},e,{index:o.i,color:(x.marker||{}).color,name:x.name,x0:A-E,x1:A+E,y0:w-E,y1:w+E,spikeDistance:e.distance,hovertemplate:x.hovertemplate});var L,C=a.orig_p,P=C!==void 0?C:a.pos;return x.orientation==="h"?(L=c,n.xLabelVal=o.x,n.yLabelVal=P):(L=p,n.xLabelVal=P,n.yLabelVal=o.y),n[L._id.charAt(0)+"Spike"]=L.c2p(a.pos,!0),b(o,x,n),n}Q.exports={hoverPoints:function(e,i,r,n){var a,o=e.cd[0].trace.hoveron,u=[];return o.indexOf("boxes")!==-1&&(u=u.concat(d(e,i,r,n))),o.indexOf("points")!==-1&&(a=s(e,i,r)),n==="closest"?a?[a]:u:(a&&u.push(a),u)},hoverOnBoxes:d,hoverOnPoints:s}},83832:function(Q,z,t){Q.exports={attributes:t(53522),layoutAttributes:t(40094),supplyDefaults:t(36411).supplyDefaults,crossTraceDefaults:t(36411).crossTraceDefaults,supplyLayoutDefaults:t(4199).supplyLayoutDefaults,calc:t(48518),crossTraceCalc:t(37188).crossTraceCalc,plot:t(86047).plot,style:t(58063).style,styleOnSelect:t(58063).styleOnSelect,hoverPoints:t(41868).hoverPoints,eventData:t(74907),selectPoints:t(24626),moduleType:"trace",name:"box",basePlotModule:t(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},40094:function(Q){Q.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},4199:function(Q,z,t){var S=t(73972),k=t(71828),l=t(40094);function T(b,d,s,e,i){for(var r=i+"Layout",n=!1,a=0;a<s.length;a++){var o=s[a];if(S.traceIs(o,r)){n=!0;break}}n&&(e(i+"mode"),e(i+"gap"),e(i+"groupgap"))}Q.exports={supplyLayoutDefaults:function(b,d,s){T(0,0,s,function(e,i){return k.coerce(b,d,l,e,i)},"box")},_supply:T}},86047:function(Q,z,t){var S=t(39898),k=t(71828),l=t(91424);function T(s,e,i,r,n){var a,o,u=i.orientation==="h",p=e.val,c=e.pos,x=!!c.rangebreaks,g=r.bPos,f=r.wdPos||0,y=r.bPosPxOffset||0,v=i.whiskerwidth||0,m=i.notched||!1,_=m?1-2*i.notchwidth:1;Array.isArray(r.bdPos)?(a=r.bdPos[0],o=r.bdPos[1]):(a=r.bdPos,o=r.bdPos);var h=s.selectAll("path.box").data(i.type!=="violin"||i.box.visible?k.identity:[]);h.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","box"),h.exit().remove(),h.each(function(A){if(A.empty)return"M0,0Z";var w=c.c2l(A.pos+g,!0),E=c.l2p(w-a)+y,L=c.l2p(w+o)+y,C=x?(E+L)/2:c.l2p(w)+y,P=i.whiskerwidth,D=x?E*P+(1-P)*C:c.l2p(w-f)+y,G=x?L*P+(1-P)*C:c.l2p(w+f)+y,I=c.l2p(w-a*_)+y,H=c.l2p(w+o*_)+y,N=p.c2p(A.q1,!0),F=p.c2p(A.q3,!0),V=k.constrain(p.c2p(A.med,!0),Math.min(N,F)+1,Math.max(N,F)-1),q=A.lf===void 0||i.boxpoints===!1,te=p.c2p(q?A.min:A.lf,!0),$=p.c2p(q?A.max:A.uf,!0),W=p.c2p(A.ln,!0),Z=p.c2p(A.un,!0);u?S.select(this).attr("d","M"+V+","+I+"V"+H+"M"+N+","+E+"V"+L+(m?"H"+W+"L"+V+","+H+"L"+Z+","+L:"")+"H"+F+"V"+E+(m?"H"+Z+"L"+V+","+I+"L"+W+","+E:"")+"ZM"+N+","+C+"H"+te+"M"+F+","+C+"H"+$+(v===0?"":"M"+te+","+D+"V"+G+"M"+$+","+D+"V"+G)):S.select(this).attr("d","M"+I+","+V+"H"+H+"M"+E+","+N+"H"+L+(m?"V"+W+"L"+H+","+V+"L"+L+","+Z:"")+"V"+F+"H"+E+(m?"V"+Z+"L"+I+","+V+"L"+E+","+W:"")+"ZM"+C+","+N+"V"+te+"M"+C+","+F+"V"+$+(v===0?"":"M"+D+","+te+"H"+G+"M"+D+","+$+"H"+G))})}function b(s,e,i,r){var n=e.x,a=e.y,o=r.bdPos,u=r.bPos,p=i.boxpoints||i.points;k.seedPseudoRandom();var c=s.selectAll("g.points").data(p?function(g){return g.forEach(function(f){f.t=r,f.trace=i}),g}:[]);c.enter().append("g").attr("class","points"),c.exit().remove();var x=c.selectAll("path").data(function(g){var f,y,v=g.pts2,m=Math.max((g.max-g.min)/10,g.q3-g.q1),_=1e-9*m,h=.01*m,A=[],w=0;if(i.jitter){if(m===0)for(w=1,A=new Array(v.length),f=0;f<v.length;f++)A[f]=1;else for(f=0;f<v.length;f++){var E=Math.max(0,f-5),L=v[E].v,C=Math.min(v.length-1,f+5),P=v[C].v;p!=="all"&&(v[f].v<g.lf?P=Math.min(P,g.lf):L=Math.max(L,g.uf));var D=Math.sqrt(h*(C-E)/(P-L+_))||0;D=k.constrain(Math.abs(D),0,1),A.push(D),w=Math.max(D,w)}y=2*i.jitter/(w||1)}for(f=0;f<v.length;f++){var G=v[f],I=G.v,H=i.jitter?y*A[f]*(k.pseudoRandom()-.5):0,N=g.pos+u+o*(i.pointpos+H);i.orientation==="h"?(G.y=N,G.x=I):(G.x=N,G.y=I),p==="suspectedoutliers"&&I<g.uo&&I>g.lo&&(G.so=!0)}return v});x.enter().append("path").classed("point",!0),x.exit().remove(),x.call(l.translatePoints,n,a)}function d(s,e,i,r){var n,a,o=e.val,u=e.pos,p=!!u.rangebreaks,c=r.bPos,x=r.bPosPxOffset||0,g=i.boxmean||(i.meanline||{}).visible;Array.isArray(r.bdPos)?(n=r.bdPos[0],a=r.bdPos[1]):(n=r.bdPos,a=r.bdPos);var f=s.selectAll("path.mean").data(i.type==="box"&&i.boxmean||i.type==="violin"&&i.box.visible&&i.meanline.visible?k.identity:[]);f.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),f.exit().remove(),f.each(function(y){var v=u.c2l(y.pos+c,!0),m=u.l2p(v-n)+x,_=u.l2p(v+a)+x,h=p?(m+_)/2:u.l2p(v)+x,A=o.c2p(y.mean,!0),w=o.c2p(y.mean-y.sd,!0),E=o.c2p(y.mean+y.sd,!0);i.orientation==="h"?S.select(this).attr("d","M"+A+","+m+"V"+_+(g==="sd"?"m0,0L"+w+","+h+"L"+A+","+m+"L"+E+","+h+"Z":"")):S.select(this).attr("d","M"+m+","+A+"H"+_+(g==="sd"?"m0,0L"+h+","+w+"L"+m+","+A+"L"+h+","+E+"Z":""))})}Q.exports={plot:function(s,e,i,r){var n=s._context.staticPlot,a=e.xaxis,o=e.yaxis;k.makeTraceGroups(r,i,"trace boxes").each(function(u){var p,c,x=S.select(this),g=u[0],f=g.t,y=g.trace;f.wdPos=f.bdPos*y.whiskerwidth,y.visible!==!0||f.empty?x.remove():(y.orientation==="h"?(p=o,c=a):(p=a,c=o),T(x,{pos:p,val:c},y,f,n),b(x,{x:a,y:o},y,f),d(x,{pos:p,val:c},y,f))})},plotBoxAndWhiskers:T,plotPoints:b,plotBoxMean:d}},24626:function(Q){Q.exports=function(z,t){var S,k,l=z.cd,T=z.xaxis,b=z.yaxis,d=[];if(t===!1)for(S=0;S<l.length;S++)for(k=0;k<(l[S].pts||[]).length;k++)l[S].pts[k].selected=0;else for(S=0;S<l.length;S++)for(k=0;k<(l[S].pts||[]).length;k++){var s=l[S].pts[k],e=T.c2p(s.x),i=b.c2p(s.y);t.contains([e,i],null,s.i,z)?(d.push({pointNumber:s.i,x:T.c2d(s.x),y:b.c2d(s.y)}),s.selected=1):s.selected=0}return d}},58063:function(Q,z,t){var S=t(39898),k=t(7901),l=t(91424);Q.exports={style:function(T,b,d){var s=d||S.select(T).selectAll("g.trace.boxes");s.style("opacity",function(e){return e[0].trace.opacity}),s.each(function(e){var i=S.select(this),r=e[0].trace,n=r.line.width;function a(p,c,x,g){p.style("stroke-width",c+"px").call(k.stroke,x).call(k.fill,g)}var o=i.selectAll("path.box");if(r.type==="candlestick")o.each(function(p){if(!p.empty){var c=S.select(this),x=r[p.dir];a(c,x.line.width,x.line.color,x.fillcolor),c.style("opacity",r.selectedpoints&&!p.selected?.3:1)}});else{a(o,n,r.line.color,r.fillcolor),i.selectAll("path.mean").style({"stroke-width":n,"stroke-dasharray":2*n+"px,"+n+"px"}).call(k.stroke,r.line.color);var u=i.selectAll("path.point");l.pointStyle(u,r,T)}})},styleOnSelect:function(T,b,d){var s=b[0].trace,e=d.selectAll("path.point");s.selectedpoints?l.selectedPointStyle(e,s):l.pointStyle(e,s,T)}}},75343:function(Q,z,t){var S=t(71828).extendFlat,k=t(12663).axisHoverFormat,l=t(2522),T=t(53522);function b(d){return{line:{color:S({},T.line.color,{dflt:d}),width:T.line.width,editType:"style"},fillcolor:T.fillcolor,editType:"style"}}Q.exports={xperiod:l.xperiod,xperiod0:l.xperiod0,xperiodalignment:l.xperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),x:l.x,open:l.open,high:l.high,low:l.low,close:l.close,line:{width:S({},T.line.width,{}),editType:"style"},increasing:b(l.increasing.line.color.dflt),decreasing:b(l.decreasing.line.color.dflt),text:l.text,hovertext:l.hovertext,whiskerwidth:S({},T.whiskerwidth,{dflt:0}),hoverlabel:l.hoverlabel}},41197:function(Q,z,t){var S=t(71828),k=t(89298),l=t(42973),T=t(3485).calcCommon;function b(d,s,e,i){return{min:e,q1:Math.min(d,i),med:i,q3:Math.max(d,i),max:s}}Q.exports=function(d,s){var e=d._fullLayout,i=k.getFromId(d,s.xaxis),r=k.getFromId(d,s.yaxis),n=i.makeCalcdata(s,"x"),a=l(s,i,"x",n).vals,o=T(d,s,n,a,r,b);return o.length?(S.extendFlat(o[0].t,{num:e._numBoxes,dPos:S.distinctVals(a).minDiff/2,posLetter:"x",valLetter:"y"}),e._numBoxes++,o):[{t:{empty:!0}}]}},1026:function(Q,z,t){var S=t(71828),k=t(7901),l=t(14555),T=t(73927),b=t(75343);function d(s,e,i,r){var n=i(r+".line.color");i(r+".line.width",e.line.width),i(r+".fillcolor",k.addOpacity(n,.5))}Q.exports=function(s,e,i,r){function n(a,o){return S.coerce(s,e,b,a,o)}l(s,e,n,r)?(T(s,e,r,n,{x:!0}),n("xhoverformat"),n("yhoverformat"),n("line.width"),d(0,e,n,"increasing"),d(0,e,n,"decreasing"),n("text"),n("hovertext"),n("whiskerwidth"),r._requestRangeslider[e.xaxis]=!0):e.visible=!1}},91815:function(Q,z,t){Q.exports={moduleType:"trace",name:"candlestick",basePlotModule:t(93612),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:t(75343),layoutAttributes:t(40094),supplyLayoutDefaults:t(4199).supplyLayoutDefaults,crossTraceCalc:t(37188).crossTraceCalc,supplyDefaults:t(1026),calc:t(41197),plot:t(86047).plot,layerName:"boxlayer",style:t(58063).style,hoverPoints:t(66449).hoverPoints,selectPoints:t(67324)}},13145:function(Q,z,t){var S=t(11500),k=t(44467);Q.exports=function(l,T,b,d,s){d("a")||(d("da"),d("a0")),d("b")||(d("db"),d("b0")),function(e,i,r,n){["aaxis","baxis"].forEach(function(a){var o=a.charAt(0),u=e[a]||{},p=k.newContainer(i,a),c={noTicklabelstep:!0,tickfont:"x",id:o+"axis",letter:o,font:i.font,name:a,data:e[o],calendar:i.calendar,dfltColor:n,bgColor:r.paper_bgcolor,autotypenumbersDflt:r.autotypenumbers,fullLayout:r};S(u,p,c),p._categories=p._categories||[],e[a]||u.type==="-"||(e[a]={type:u.type})})}(l,T,b,s)}},402:function(Q,z,t){var S=t(71828).isArrayOrTypedArray;function k(l,T){if(!S(l)||T>=10)return null;for(var b=1/0,d=-1/0,s=l.length,e=0;e<s;e++){var i=l[e];if(S(i)){var r=k(i,T+1);r&&(b=Math.min(r[0],b),d=Math.max(r[1],d))}else b=Math.min(i,b),d=Math.max(i,d)}return[b,d]}Q.exports=function(l){return k(l,0)}},99798:function(Q,z,t){var S=t(41940),k=t(1928),l=t(22399),T=S({editType:"calc"});T.family.dflt='"Open Sans", verdana, arial, sans-serif',T.size.dflt=12,T.color.dflt=l.defaultLine,Q.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:k,baxis:k,font:T,color:{valType:"color",dflt:l.defaultLine,editType:"plot"},transforms:void 0}},4536:function(Q,z,t){var S=t(71828).isArrayOrTypedArray;Q.exports=function(k,l,T,b){var d,s,e,i,r,n,a,o,u,p,c,x,g,f=S(T)?"a":"b",y=(f==="a"?k.aaxis:k.baxis).smoothing,v=f==="a"?k.a2i:k.b2j,m=f==="a"?T:b,_=f==="a"?b:T,h=f==="a"?l.a.length:l.b.length,A=f==="a"?l.b.length:l.a.length,w=Math.floor(f==="a"?k.b2j(_):k.a2i(_)),E=f==="a"?function(te){return k.evalxy([],te,w)}:function(te){return k.evalxy([],w,te)};y&&(e=Math.max(0,Math.min(A-2,w)),i=w-e,s=f==="a"?function(te,$){return k.dxydi([],te,e,$,i)}:function(te,$){return k.dxydj([],e,te,i,$)});var L=v(m[0]),C=v(m[1]),P=L<C?1:-1,D=1e-8*(C-L),G=P>0?Math.floor:Math.ceil,I=P>0?Math.ceil:Math.floor,H=P>0?Math.min:Math.max,N=P>0?Math.max:Math.min,F=G(L+D),V=I(C-D),q=[[a=E(L)]];for(d=F;d*P<V*P;d+=P)r=[],c=N(L,d),g=(x=H(C,d+P))-c,n=Math.max(0,Math.min(h-2,Math.floor(.5*(c+x)))),o=E(x),y&&(u=s(n,c-n),p=s(n,x-n),r.push([a[0]+u[0]/3*g,a[1]+u[1]/3*g]),r.push([o[0]-p[0]/3*g,o[1]-p[1]/3*g])),r.push(o),q.push(r),a=o;return q}},1928:function(Q,z,t){var S=t(41940),k=t(22399),l=t(13838),T=t(12663).descriptionWithDates,b=t(30962).overrideAll,d=t(79952).P,s=t(1426).extendFlat;Q.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:S({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:l.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:s({},l.labelalias,{editType:"calc"}),tickfont:S({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:T("tick label")},tickformatstops:b(l.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:s({},d,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:s({},d,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:k.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:S({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},11500:function(Q,z,t){var S=t(99798),k=t(7901).addOpacity,l=t(73972),T=t(71828),b=t(26218),d=t(96115),s=t(89426),e=t(15258),i=t(21994),r=t(4322);Q.exports=function(n,a,o){var u=o.letter,p=o.font||{},c=S[u+"axis"];function x(P,D){return T.coerce(n,a,c,P,D)}function g(P,D){return T.coerce2(n,a,c,P,D)}o.name&&(a._name=o.name,a._id=o.name),x("autotypenumbers",o.autotypenumbersDflt);var f=x("type");f==="-"&&(o.data&&function(P,D){if(P.type==="-"){var G=P._id.charAt(0),I=P[G+"calendar"];P.type=r(D,I,{autotypenumbers:P.autotypenumbers})}}(a,o.data),a.type==="-"?a.type="linear":f=n.type=a.type),x("smoothing"),x("cheatertype"),x("showticklabels"),x("labelprefix",u+" = "),x("labelsuffix"),x("showtickprefix"),x("showticksuffix"),x("separatethousands"),x("tickformat"),x("exponentformat"),x("minexponent"),x("showexponent"),x("categoryorder"),x("tickmode"),x("tickvals"),x("ticktext"),x("tick0"),x("dtick"),a.tickmode==="array"&&(x("arraytick0"),x("arraydtick")),x("labelpadding"),a._hovertitle=u,f==="date"&&l.getComponentMethod("calendars","handleDefaults")(n,a,"calendar",o.calendar),i(a,o.fullLayout),a.c2p=T.identity;var y=x("color",o.dfltColor),v=y===n.color?y:p.color;x("title.text")&&(T.coerceFont(x,"title.font",{family:p.family,size:T.bigFont(p.size),color:v}),x("title.offset")),x("tickangle"),x("autorange",!a.isValidRange(n.range))&&x("rangemode"),x("range"),a.cleanRange(),x("fixedrange"),b(n,a,x,f),s(n,a,x,f,o),d(n,a,x,f,o),e(n,a,x,{data:o.data,dataAttr:u});var m=g("gridcolor",k(y,.3)),_=g("gridwidth"),h=g("griddash"),A=x("showgrid");A||(delete a.gridcolor,delete a.gridwidth,delete a.griddash);var w=g("startlinecolor",y),E=g("startlinewidth",_);x("startline",a.showgrid||!!w||!!E)||(delete a.startlinecolor,delete a.startlinewidth);var L=g("endlinecolor",y),C=g("endlinewidth",_);return x("endline",a.showgrid||!!L||!!C)||(delete a.endlinecolor,delete a.endlinewidth),A?(x("minorgridcount"),x("minorgridwidth",_),x("minorgriddash",h),x("minorgridcolor",k(m,.06)),a.minorgridcount||(delete a.minorgridwidth,delete a.minorgriddash,delete a.minorgridcolor)):(delete a.gridcolor,delete a.gridwidth,delete a.griddash),a.showticklabels==="none"&&(delete a.tickfont,delete a.tickangle,delete a.showexponent,delete a.exponentformat,delete a.minexponent,delete a.tickformat,delete a.showticksuffix,delete a.showtickprefix),a.showticksuffix||delete a.ticksuffix,a.showtickprefix||delete a.tickprefix,x("tickmode"),a}},25281:function(Q,z,t){var S=t(89298),k=t(71828).isArray1D,l=t(53824),T=t(402),b=t(20347),d=t(83311),s=t(44807),e=t(4742),i=t(72505),r=t(68296),n=t(11435);Q.exports=function(a,o){var u=S.getFromId(a,o.xaxis),p=S.getFromId(a,o.yaxis),c=o.aaxis,x=o.baxis,g=o.x,f=o.y,y=[];g&&k(g)&&y.push("x"),f&&k(f)&&y.push("y"),y.length&&r(o,c,x,"a","b",y);var v=o._a=o._a||o.a,m=o._b=o._b||o.b;g=o._x||o.x,f=o._y||o.y;var _={};if(o._cheater){var h=c.cheatertype==="index"?v.length:v,A=x.cheatertype==="index"?m.length:m;g=l(h,A,o.cheaterslope)}o._x=g=e(g),o._y=f=e(f),i(g,v,m),i(f,v,m),n(o),o.setScale();var w=T(g),E=T(f),L=.5*(w[1]-w[0]),C=.5*(w[1]+w[0]),P=.5*(E[1]-E[0]),D=.5*(E[1]+E[0]),G=1.3;return w=[C-L*G,C+L*G],E=[D-P*G,D+P*G],o._extremes[u._id]=S.findExtremes(u,w,{padded:!0}),o._extremes[p._id]=S.findExtremes(p,E,{padded:!0}),b(o,"a","b"),b(o,"b","a"),d(o,c),d(o,x),_.clipsegments=s(o._xctrl,o._yctrl,c,x),_.x=g,_.y=f,_.a=v,_.b=m,[_]}},44807:function(Q){Q.exports=function(z,t,S,k){var l,T,b,d=[],s=!!S.smoothing,e=!!k.smoothing,i=z[0].length-1,r=z.length-1;for(l=0,T=[],b=[];l<=i;l++)T[l]=z[0][l],b[l]=t[0][l];for(d.push({x:T,y:b,bicubic:s}),l=0,T=[],b=[];l<=r;l++)T[l]=z[l][i],b[l]=t[l][i];for(d.push({x:T,y:b,bicubic:e}),l=i,T=[],b=[];l>=0;l--)T[i-l]=z[r][l],b[i-l]=t[r][l];for(d.push({x:T,y:b,bicubic:s}),l=r,T=[],b=[];l>=0;l--)T[r-l]=z[l][0],b[r-l]=t[l][0];return d.push({x:T,y:b,bicubic:e}),d}},20347:function(Q,z,t){var S=t(89298),k=t(1426).extendFlat;Q.exports=function(l,T,b){var d,s,e,i,r,n,a,o,u,p,c,x,g,f,y=l["_"+T],v=l[T+"axis"],m=v._gridlines=[],_=v._minorgridlines=[],h=v._boundarylines=[],A=l["_"+b],w=l[b+"axis"];v.tickmode==="array"&&(v.tickvals=y.slice());var E=l._xctrl,L=l._yctrl,C=E[0].length,P=E.length,D=l._a.length,G=l._b.length;S.prepTicks(v),v.tickmode==="array"&&delete v.tickvals;var I=v.smoothing?3:1;function H(F){var V,q,te,$,W,Z,J,ee,re,ae,oe,ce,pe=[],ve=[],we={};if(T==="b")for(q=l.b2j(F),te=Math.floor(Math.max(0,Math.min(G-2,q))),$=q-te,we.length=G,we.crossLength=D,we.xy=function(xe){return l.evalxy([],xe,q)},we.dxy=function(xe,ge){return l.dxydi([],xe,te,ge,$)},V=0;V<D;V++)Z=Math.min(D-2,V),J=V-Z,ee=l.evalxy([],V,q),w.smoothing&&V>0&&(re=l.dxydi([],V-1,te,0,$),pe.push(W[0]+re[0]/3),ve.push(W[1]+re[1]/3),ae=l.dxydi([],V-1,te,1,$),pe.push(ee[0]-ae[0]/3),ve.push(ee[1]-ae[1]/3)),pe.push(ee[0]),ve.push(ee[1]),W=ee;else for(V=l.a2i(F),Z=Math.floor(Math.max(0,Math.min(D-2,V))),J=V-Z,we.length=D,we.crossLength=G,we.xy=function(xe){return l.evalxy([],V,xe)},we.dxy=function(xe,ge){return l.dxydj([],Z,xe,J,ge)},q=0;q<G;q++)te=Math.min(G-2,q),$=q-te,ee=l.evalxy([],V,q),w.smoothing&&q>0&&(oe=l.dxydj([],Z,q-1,J,0),pe.push(W[0]+oe[0]/3),ve.push(W[1]+oe[1]/3),ce=l.dxydj([],Z,q-1,J,1),pe.push(ee[0]-ce[0]/3),ve.push(ee[1]-ce[1]/3)),pe.push(ee[0]),ve.push(ee[1]),W=ee;return we.axisLetter=T,we.axis=v,we.crossAxis=w,we.value=F,we.constvar=b,we.index=o,we.x=pe,we.y=ve,we.smoothing=w.smoothing,we}function N(F){var V,q,te,$,W,Z=[],J=[],ee={};if(ee.length=y.length,ee.crossLength=A.length,T==="b")for(te=Math.max(0,Math.min(G-2,F)),W=Math.min(1,Math.max(0,F-te)),ee.xy=function(re){return l.evalxy([],re,F)},ee.dxy=function(re,ae){return l.dxydi([],re,te,ae,W)},V=0;V<C;V++)Z[V]=E[F*I][V],J[V]=L[F*I][V];else for(q=Math.max(0,Math.min(D-2,F)),$=Math.min(1,Math.max(0,F-q)),ee.xy=function(re){return l.evalxy([],F,re)},ee.dxy=function(re,ae){return l.dxydj([],q,re,$,ae)},V=0;V<P;V++)Z[V]=E[V][F*I],J[V]=L[V][F*I];return ee.axisLetter=T,ee.axis=v,ee.crossAxis=w,ee.value=y[F],ee.constvar=b,ee.index=F,ee.x=Z,ee.y=J,ee.smoothing=w.smoothing,ee}if(v.tickmode==="array"){for(i=5e-15,n=(r=[Math.floor((y.length-1-v.arraytick0)/v.arraydtick*(1+i)),Math.ceil(-v.arraytick0/v.arraydtick/(1+i))].sort(function(F,V){return F-V}))[0]-1,a=r[1]+1,o=n;o<a;o++)(s=v.arraytick0+v.arraydtick*o)<0||s>y.length-1||m.push(k(N(s),{color:v.gridcolor,width:v.gridwidth,dash:v.griddash}));for(o=n;o<a;o++)if(e=v.arraytick0+v.arraydtick*o,c=Math.min(e+v.arraydtick,y.length-1),!(e<0||e>y.length-1||c<0||c>y.length-1))for(x=y[e],g=y[c],d=0;d<v.minorgridcount;d++)(f=c-e)<=0||(p=x+(g-x)*(d+1)/(v.minorgridcount+1)*(v.arraydtick/f))<y[0]||p>y[y.length-1]||_.push(k(H(p),{color:v.minorgridcolor,width:v.minorgridwidth,dash:v.minorgriddash}));v.startline&&h.push(k(N(0),{color:v.startlinecolor,width:v.startlinewidth})),v.endline&&h.push(k(N(y.length-1),{color:v.endlinecolor,width:v.endlinewidth}))}else{for(i=5e-15,n=(r=[Math.floor((y[y.length-1]-v.tick0)/v.dtick*(1+i)),Math.ceil((y[0]-v.tick0)/v.dtick/(1+i))].sort(function(F,V){return F-V}))[0],a=r[1],o=n;o<=a;o++)u=v.tick0+v.dtick*o,m.push(k(H(u),{color:v.gridcolor,width:v.gridwidth,dash:v.griddash}));for(o=n-1;o<a+1;o++)for(u=v.tick0+v.dtick*o,d=0;d<v.minorgridcount;d++)(p=u+v.dtick*(d+1)/(v.minorgridcount+1))<y[0]||p>y[y.length-1]||_.push(k(H(p),{color:v.minorgridcolor,width:v.minorgridwidth,dash:v.minorgriddash}));v.startline&&h.push(k(H(y[0]),{color:v.startlinecolor,width:v.startlinewidth})),v.endline&&h.push(k(H(y[y.length-1]),{color:v.endlinecolor,width:v.endlinewidth}))}}},83311:function(Q,z,t){var S=t(89298),k=t(1426).extendFlat;Q.exports=function(l,T){var b,d,s,e=T._labels=[],i=T._gridlines;for(b=0;b<i.length;b++)s=i[b],["start","both"].indexOf(T.showticklabels)!==-1&&(d=S.tickText(T,s.value),k(d,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:s.xy(0),dxy:s.dxy(0,0),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:b===0,isLast:b===i.length-1}),e.push(d)),["end","both"].indexOf(T.showticklabels)!==-1&&(d=S.tickText(T,s.value),k(d,{endAnchor:!1,xy:s.xy(s.crossLength-1),dxy:s.dxy(s.crossLength-2,1),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:b===0,isLast:b===i.length-1}),e.push(d))}},42048:function(Q){Q.exports=function(z,t,S,k){var l=z[0]-t[0],T=z[1]-t[1],b=S[0]-t[0],d=S[1]-t[1],s=Math.pow(l*l+T*T,.25),e=Math.pow(b*b+d*d,.25),i=(e*e*l-s*s*b)*k,r=(e*e*T-s*s*d)*k,n=e*(s+e)*3,a=s*(s+e)*3;return[[t[0]+(n&&i/n),t[1]+(n&&r/n)],[t[0]-(a&&i/a),t[1]-(a&&r/a)]]}},53824:function(Q,z,t){var S=t(71828).isArrayOrTypedArray;Q.exports=function(k,l,T){var b,d,s,e,i,r,n=[],a=S(k)?k.length:k,o=S(l)?l.length:l,u=S(k)?k:null,p=S(l)?l:null;u&&(s=(u.length-1)/(u[u.length-1]-u[0])/(a-1)),p&&(e=(p.length-1)/(p[p.length-1]-p[0])/(o-1));var c=1/0,x=-1/0;for(d=0;d<o;d++)for(n[d]=[],i=p?(p[d]-p[0])*e:d/(o-1),b=0;b<a;b++)r=(u?(u[b]-u[0])*s:b/(a-1))-i*T,c=Math.min(r,c),x=Math.max(r,x),n[d][b]=r;var g=1/(x-c),f=-c*g;for(d=0;d<o;d++)for(b=0;b<a;b++)n[d][b]=g*n[d][b]+f;return n}},45664:function(Q,z,t){var S=t(42048),k=t(71828).ensureArray;function l(T,b,d){var s=-.5*d[0]+1.5*b[0],e=-.5*d[1]+1.5*b[1];return[(2*s+T[0])/3,(2*e+T[1])/3]}Q.exports=function(T,b,d,s,e,i){var r,n,a,o,u,p,c,x,g,f,y=d[0].length,v=d.length,m=e?3*y-2:y,_=i?3*v-2:v;for(T=k(T,_),b=k(b,_),a=0;a<_;a++)T[a]=k(T[a],m),b[a]=k(b[a],m);for(n=0,o=0;n<v;n++,o+=i?3:1)for(u=T[o],p=b[o],c=d[n],x=s[n],r=0,a=0;r<y;r++,a+=e?3:1)u[a]=c[r],p[a]=x[r];if(e)for(n=0,o=0;n<v;n++,o+=i?3:1){for(r=1,a=3;r<y-1;r++,a+=3)g=S([d[n][r-1],s[n][r-1]],[d[n][r],s[n][r]],[d[n][r+1],s[n][r+1]],e),T[o][a-1]=g[0][0],b[o][a-1]=g[0][1],T[o][a+1]=g[1][0],b[o][a+1]=g[1][1];f=l([T[o][0],b[o][0]],[T[o][2],b[o][2]],[T[o][3],b[o][3]]),T[o][1]=f[0],b[o][1]=f[1],f=l([T[o][m-1],b[o][m-1]],[T[o][m-3],b[o][m-3]],[T[o][m-4],b[o][m-4]]),T[o][m-2]=f[0],b[o][m-2]=f[1]}if(i)for(a=0;a<m;a++){for(o=3;o<_-3;o+=3)g=S([T[o-3][a],b[o-3][a]],[T[o][a],b[o][a]],[T[o+3][a],b[o+3][a]],i),T[o-1][a]=g[0][0],b[o-1][a]=g[0][1],T[o+1][a]=g[1][0],b[o+1][a]=g[1][1];f=l([T[0][a],b[0][a]],[T[2][a],b[2][a]],[T[3][a],b[3][a]]),T[1][a]=f[0],b[1][a]=f[1],f=l([T[_-1][a],b[_-1][a]],[T[_-3][a],b[_-3][a]],[T[_-4][a],b[_-4][a]]),T[_-2][a]=f[0],b[_-2][a]=f[1]}if(e&&i)for(o=1;o<_;o+=(o+1)%3==0?2:1){for(a=3;a<m-3;a+=3)g=S([T[o][a-3],b[o][a-3]],[T[o][a],b[o][a]],[T[o][a+3],b[o][a+3]],e),T[o][a-1]=.5*(T[o][a-1]+g[0][0]),b[o][a-1]=.5*(b[o][a-1]+g[0][1]),T[o][a+1]=.5*(T[o][a+1]+g[1][0]),b[o][a+1]=.5*(b[o][a+1]+g[1][1]);f=l([T[o][0],b[o][0]],[T[o][2],b[o][2]],[T[o][3],b[o][3]]),T[o][1]=.5*(T[o][1]+f[0]),b[o][1]=.5*(b[o][1]+f[1]),f=l([T[o][m-1],b[o][m-1]],[T[o][m-3],b[o][m-3]],[T[o][m-4],b[o][m-4]]),T[o][m-2]=.5*(T[o][m-2]+f[0]),b[o][m-2]=.5*(b[o][m-2]+f[1])}return[T,b]}},35509:function(Q){Q.exports={RELATIVE_CULL_TOLERANCE:1e-6}},54495:function(Q){Q.exports=function(z,t,S){return t&&S?function(k,l,T,b,d){var s,e,i,r,n,a;k||(k=[]),l*=3,T*=3;var o=b*b,u=1-b,p=u*u,c=u*b*2,x=-3*p,g=3*(p-c),f=3*(c-o),y=3*o,v=d*d,m=v*d,_=1-d,h=_*_,A=h*_;for(a=0;a<z.length;a++)s=x*(n=z[a])[T][l]+g*n[T][l+1]+f*n[T][l+2]+y*n[T][l+3],e=x*n[T+1][l]+g*n[T+1][l+1]+f*n[T+1][l+2]+y*n[T+1][l+3],i=x*n[T+2][l]+g*n[T+2][l+1]+f*n[T+2][l+2]+y*n[T+2][l+3],r=x*n[T+3][l]+g*n[T+3][l+1]+f*n[T+3][l+2]+y*n[T+3][l+3],k[a]=A*s+3*(h*d*e+_*v*i)+m*r;return k}:t?function(k,l,T,b,d){var s,e,i,r;k||(k=[]),l*=3;var n=b*b,a=1-b,o=a*a,u=a*b*2,p=-3*o,c=3*(o-u),x=3*(u-n),g=3*n,f=1-d;for(i=0;i<z.length;i++)s=p*(r=z[i])[T][l]+c*r[T][l+1]+x*r[T][l+2]+g*r[T][l+3],e=p*r[T+1][l]+c*r[T+1][l+1]+x*r[T+1][l+2]+g*r[T+1][l+3],k[i]=f*s+d*e;return k}:S?function(k,l,T,b,d){var s,e,i,r,n,a;k||(k=[]),T*=3;var o=d*d,u=o*d,p=1-d,c=p*p,x=c*p;for(n=0;n<z.length;n++)s=(a=z[n])[T][l+1]-a[T][l],e=a[T+1][l+1]-a[T+1][l],i=a[T+2][l+1]-a[T+2][l],r=a[T+3][l+1]-a[T+3][l],k[n]=x*s+3*(c*d*e+p*o*i)+u*r;return k}:function(k,l,T,b,d){var s,e,i,r;k||(k=[]);var n=1-d;for(i=0;i<z.length;i++)s=(r=z[i])[T][l+1]-r[T][l],e=r[T+1][l+1]-r[T+1][l],k[i]=n*s+d*e;return k}}},73057:function(Q){Q.exports=function(z,t,S){return t&&S?function(k,l,T,b,d){var s,e,i,r,n,a;k||(k=[]),l*=3,T*=3;var o=b*b,u=o*b,p=1-b,c=p*p,x=c*p,g=d*d,f=1-d,y=f*f,v=f*d*2,m=-3*y,_=3*(y-v),h=3*(v-g),A=3*g;for(a=0;a<z.length;a++)s=m*(n=z[a])[T][l]+_*n[T+1][l]+h*n[T+2][l]+A*n[T+3][l],e=m*n[T][l+1]+_*n[T+1][l+1]+h*n[T+2][l+1]+A*n[T+3][l+1],i=m*n[T][l+2]+_*n[T+1][l+2]+h*n[T+2][l+2]+A*n[T+3][l+2],r=m*n[T][l+3]+_*n[T+1][l+3]+h*n[T+2][l+3]+A*n[T+3][l+3],k[a]=x*s+3*(c*b*e+p*o*i)+u*r;return k}:t?function(k,l,T,b,d){var s,e,i,r,n,a;k||(k=[]),l*=3;var o=d*d,u=o*d,p=1-d,c=p*p,x=c*p;for(n=0;n<z.length;n++)s=(a=z[n])[T+1][l]-a[T][l],e=a[T+1][l+1]-a[T][l+1],i=a[T+1][l+2]-a[T][l+2],r=a[T+1][l+3]-a[T][l+3],k[n]=x*s+3*(c*d*e+p*o*i)+u*r;return k}:S?function(k,l,T,b,d){var s,e,i,r;k||(k=[]),T*=3;var n=1-b,a=d*d,o=1-d,u=o*o,p=o*d*2,c=-3*u,x=3*(u-p),g=3*(p-a),f=3*a;for(i=0;i<z.length;i++)s=c*(r=z[i])[T][l]+x*r[T+1][l]+g*r[T+2][l]+f*r[T+3][l],e=c*r[T][l+1]+x*r[T+1][l+1]+g*r[T+2][l+1]+f*r[T+3][l+1],k[i]=n*s+b*e;return k}:function(k,l,T,b,d){var s,e,i,r;k||(k=[]);var n=1-b;for(i=0;i<z.length;i++)s=(r=z[i])[T+1][l]-r[T][l],e=r[T+1][l+1]-r[T][l+1],k[i]=n*s+b*e;return k}}},20349:function(Q){Q.exports=function(z,t,S,k,l){var T=t-2,b=S-2;return k&&l?function(d,s,e){var i,r,n,a,o,u;d||(d=[]);var p=Math.max(0,Math.min(Math.floor(s),T)),c=Math.max(0,Math.min(Math.floor(e),b)),x=Math.max(0,Math.min(1,s-p)),g=Math.max(0,Math.min(1,e-c));p*=3,c*=3;var f=x*x,y=f*x,v=1-x,m=v*v,_=m*v,h=g*g,A=h*g,w=1-g,E=w*w,L=E*w;for(u=0;u<z.length;u++)i=_*(o=z[u])[c][p]+3*(m*x*o[c][p+1]+v*f*o[c][p+2])+y*o[c][p+3],r=_*o[c+1][p]+3*(m*x*o[c+1][p+1]+v*f*o[c+1][p+2])+y*o[c+1][p+3],n=_*o[c+2][p]+3*(m*x*o[c+2][p+1]+v*f*o[c+2][p+2])+y*o[c+2][p+3],a=_*o[c+3][p]+3*(m*x*o[c+3][p+1]+v*f*o[c+3][p+2])+y*o[c+3][p+3],d[u]=L*i+3*(E*g*r+w*h*n)+A*a;return d}:k?function(d,s,e){d||(d=[]);var i,r,n,a,o,u,p=Math.max(0,Math.min(Math.floor(s),T)),c=Math.max(0,Math.min(Math.floor(e),b)),x=Math.max(0,Math.min(1,s-p)),g=Math.max(0,Math.min(1,e-c));p*=3;var f=x*x,y=f*x,v=1-x,m=v*v,_=m*v,h=1-g;for(o=0;o<z.length;o++)i=h*(u=z[o])[c][p]+g*u[c+1][p],r=h*u[c][p+1]+g*u[c+1][p+1],n=h*u[c][p+2]+g*u[c+1][p+1],a=h*u[c][p+3]+g*u[c+1][p+1],d[o]=_*i+3*(m*x*r+v*f*n)+y*a;return d}:l?function(d,s,e){d||(d=[]);var i,r,n,a,o,u,p=Math.max(0,Math.min(Math.floor(s),T)),c=Math.max(0,Math.min(Math.floor(e),b)),x=Math.max(0,Math.min(1,s-p)),g=Math.max(0,Math.min(1,e-c));c*=3;var f=g*g,y=f*g,v=1-g,m=v*v,_=m*v,h=1-x;for(o=0;o<z.length;o++)i=h*(u=z[o])[c][p]+x*u[c][p+1],r=h*u[c+1][p]+x*u[c+1][p+1],n=h*u[c+2][p]+x*u[c+2][p+1],a=h*u[c+3][p]+x*u[c+3][p+1],d[o]=_*i+3*(m*g*r+v*f*n)+y*a;return d}:function(d,s,e){d||(d=[]);var i,r,n,a,o=Math.max(0,Math.min(Math.floor(s),T)),u=Math.max(0,Math.min(Math.floor(e),b)),p=Math.max(0,Math.min(1,s-o)),c=Math.max(0,Math.min(1,e-u)),x=1-c,g=1-p;for(n=0;n<z.length;n++)i=g*(a=z[n])[u][o]+p*a[u][o+1],r=g*a[u+1][o]+p*a[u+1][o+1],d[n]=x*i+c*r;return d}}},92087:function(Q,z,t){var S=t(71828),k=t(19237),l=t(13145),T=t(99798),b=t(22399);Q.exports=function(d,s,e,i){function r(a,o){return S.coerce(d,s,T,a,o)}s._clipPathId="clip"+s.uid+"carpet";var n=r("color",b.defaultLine);S.coerceFont(r,"font"),r("carpet"),l(d,s,i,r,n),s.a&&s.b?(s.a.length<3&&(s.aaxis.smoothing=0),s.b.length<3&&(s.baxis.smoothing=0),k(d,s,r)||(s.visible=!1),s._cheater&&r("cheaterslope")):s.visible=!1}},21462:function(Q,z,t){Q.exports={attributes:t(99798),supplyDefaults:t(92087),plot:t(89740),calc:t(25281),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:t(93612),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},22882:function(Q){Q.exports=function(z,t){for(var S,k=z._fullData.length,l=0;l<k;l++){var T=z._fullData[l];if(T.index!==t.index&&T.type==="carpet"&&(S||(S=T),T.carpet===t.carpet))return T}return S}},67961:function(Q){Q.exports=function(z,t,S){if(z.length===0)return"";var k,l=[],T=S?3:1;for(k=0;k<z.length;k+=T)l.push(z[k]+","+t[k]),S&&k<z.length-T&&(l.push("C"),l.push([z[k+1]+","+t[k+1],z[k+2]+","+t[k+2]+" "].join(" ")));return l.join(S?"":"L")}},27669:function(Q,z,t){var S=t(71828).isArrayOrTypedArray;Q.exports=function(k,l,T){var b;for(S(k)?k.length>l.length&&(k=k.slice(0,l.length)):k=[],b=0;b<l.length;b++)k[b]=T(l[b]);return k}},11651:function(Q){Q.exports=function(z,t,S,k,l,T){var b=l[0]*z.dpdx(t),d=l[1]*z.dpdy(S),s=1,e=1;if(T){var i=Math.sqrt(l[0]*l[0]+l[1]*l[1]),r=Math.sqrt(T[0]*T[0]+T[1]*T[1]),n=(l[0]*T[0]+l[1]*T[1])/i/r;e=Math.max(0,n)}var a=180*Math.atan2(d,b)/Math.PI;return a<-90?(a+=180,s=-s):a>90&&(a-=180,s=-s),{angle:a,flip:s,p:z.c2p(k,t,S),offsetMultplier:e}}},89740:function(Q,z,t){var S=t(39898),k=t(91424),l=t(27669),T=t(67961),b=t(11651),d=t(63893),s=t(71828),e=s.strRotate,i=s.strTranslate,r=t(18783);function n(c,x,g,f,y,v,m){var _="const-"+y+"-lines",h=g.selectAll("."+_).data(v);h.enter().append("path").classed(_,!0).style("vector-effect",m?"none":"non-scaling-stroke"),h.each(function(A){var w=A,E=w.x,L=w.y,C=l([],E,c.c2p),P=l([],L,x.c2p),D="M"+T(C,P,w.smoothing);S.select(this).attr("d",D).style("stroke-width",w.width).style("stroke",w.color).style("stroke-dasharray",k.dashStyle(w.dash,w.width)).style("fill","none")}),h.exit().remove()}function a(c,x,g,f,y,v,m,_){var h=v.selectAll("text."+_).data(m);h.enter().append("text").classed(_,!0);var A=0,w={};return h.each(function(E,L){var C;if(E.axis.tickangle==="auto")C=b(f,x,g,E.xy,E.dxy);else{var P=(E.axis.tickangle+180)*Math.PI/180;C=b(f,x,g,E.xy,[Math.cos(P),Math.sin(P)])}L||(w={angle:C.angle,flip:C.flip});var D=(E.endAnchor?-1:1)*C.flip,G=S.select(this).attr({"text-anchor":D>0?"start":"end","data-notex":1}).call(k.font,E.font).text(E.text).call(d.convertToTspans,c),I=k.bBox(this);G.attr("transform",i(C.p[0],C.p[1])+e(C.angle)+i(E.axis.labelpadding*D,.3*I.height)),A=Math.max(A,I.width+E.axis.labelpadding)}),h.exit().remove(),w.maxExtent=A,w}Q.exports=function(c,x,g,f){var y=c._context.staticPlot,v=x.xaxis,m=x.yaxis,_=c._fullLayout._clips;s.makeTraceGroups(f,g,"trace").each(function(h){var A=S.select(this),w=h[0],E=w.trace,L=E.aaxis,C=E.baxis,P=s.ensureSingle(A,"g","minorlayer"),D=s.ensureSingle(A,"g","majorlayer"),G=s.ensureSingle(A,"g","boundarylayer"),I=s.ensureSingle(A,"g","labellayer");A.style("opacity",E.opacity),n(v,m,D,0,"a",L._gridlines,!0),n(v,m,D,0,"b",C._gridlines,!0),n(v,m,P,0,"a",L._minorgridlines,!0),n(v,m,P,0,"b",C._minorgridlines,!0),n(v,m,G,0,"a-boundary",L._boundarylines,y),n(v,m,G,0,"b-boundary",C._boundarylines,y);var H=a(c,v,m,E,0,I,L._labels,"a-label"),N=a(c,v,m,E,0,I,C._labels,"b-label");(function(F,V,q,te,$,W,Z,J){var ee,re,ae,oe,ce=s.aggNums(Math.min,null,q.a),pe=s.aggNums(Math.max,null,q.a),ve=s.aggNums(Math.min,null,q.b),we=s.aggNums(Math.max,null,q.b);ee=.5*(ce+pe),re=ve,ae=q.ab2xy(ee,re,!0),oe=q.dxyda_rough(ee,re),Z.angle===void 0&&s.extendFlat(Z,b(q,$,W,ae,q.dxydb_rough(ee,re))),p(F,V,q,0,ae,oe,q.aaxis,$,W,Z,"a-title"),ee=ce,re=.5*(ve+we),ae=q.ab2xy(ee,re,!0),oe=q.dxydb_rough(ee,re),J.angle===void 0&&s.extendFlat(J,b(q,$,W,ae,q.dxyda_rough(ee,re))),p(F,V,q,0,ae,oe,q.baxis,$,W,J,"b-title")})(c,I,E,0,v,m,H,N),function(F,V,q,te,$){var W,Z,J,ee,re=q.select("#"+F._clipPathId);re.size()||(re=q.append("clipPath").classed("carpetclip",!0));var ae=s.ensureSingle(re,"path","carpetboundary"),oe=V.clipsegments,ce=[];for(ee=0;ee<oe.length;ee++)W=oe[ee],Z=l([],W.x,te.c2p),J=l([],W.y,$.c2p),ce.push(T(Z,J,W.bicubic));var pe="M"+ce.join("L")+"Z";re.attr("id",F._clipPathId),ae.attr("d",pe)}(E,w,_,v,m)})};var o=r.LINE_SPACING,u=(1-r.MID_SHIFT)/o+1;function p(c,x,g,f,y,v,m,_,h,A,w){var E=[];m.title.text&&E.push(m.title.text);var L=x.selectAll("text."+w).data(E),C=A.maxExtent;L.enter().append("text").classed(w,!0),L.each(function(){var P=b(g,_,h,y,v);["start","both"].indexOf(m.showticklabels)===-1&&(C=0);var D=m.title.font.size;C+=D+m.title.offset;var G=(A.angle+(A.flip<0?180:0)-P.angle+450)%360,I=G>90&&G<270,H=S.select(this);H.text(m.title.text).call(d.convertToTspans,c),I&&(C=(-d.lineCount(H)+u)*o*D-C),H.attr("transform",i(P.p[0],P.p[1])+e(P.angle)+i(0,C)).attr("text-anchor","middle").call(k.font,m.title.font)}),L.exit().remove()}},11435:function(Q,z,t){var S=t(35509),k=t(65888).findBin,l=t(45664),T=t(20349),b=t(54495),d=t(73057);Q.exports=function(s){var e=s._a,i=s._b,r=e.length,n=i.length,a=s.aaxis,o=s.baxis,u=e[0],p=e[r-1],c=i[0],x=i[n-1],g=e[e.length-1]-e[0],f=i[i.length-1]-i[0],y=g*S.RELATIVE_CULL_TOLERANCE,v=f*S.RELATIVE_CULL_TOLERANCE;u-=y,p+=y,c-=v,x+=v,s.isVisible=function(m,_){return m>u&&m<p&&_>c&&_<x},s.isOccluded=function(m,_){return m<u||m>p||_<c||_>x},s.setScale=function(){var m=s._x,_=s._y,h=l(s._xctrl,s._yctrl,m,_,a.smoothing,o.smoothing);s._xctrl=h[0],s._yctrl=h[1],s.evalxy=T([s._xctrl,s._yctrl],r,n,a.smoothing,o.smoothing),s.dxydi=b([s._xctrl,s._yctrl],a.smoothing,o.smoothing),s.dxydj=d([s._xctrl,s._yctrl],a.smoothing,o.smoothing)},s.i2a=function(m){var _=Math.max(0,Math.floor(m[0]),r-2),h=m[0]-_;return(1-h)*e[_]+h*e[_+1]},s.j2b=function(m){var _=Math.max(0,Math.floor(m[1]),r-2),h=m[1]-_;return(1-h)*i[_]+h*i[_+1]},s.ij2ab=function(m){return[s.i2a(m[0]),s.j2b(m[1])]},s.a2i=function(m){var _=Math.max(0,Math.min(k(m,e),r-2)),h=e[_],A=e[_+1];return Math.max(0,Math.min(r-1,_+(m-h)/(A-h)))},s.b2j=function(m){var _=Math.max(0,Math.min(k(m,i),n-2)),h=i[_],A=i[_+1];return Math.max(0,Math.min(n-1,_+(m-h)/(A-h)))},s.ab2ij=function(m){return[s.a2i(m[0]),s.b2j(m[1])]},s.i2c=function(m,_){return s.evalxy([],m,_)},s.ab2xy=function(m,_,h){if(!h&&(m<e[0]||m>e[r-1]|_<i[0]||_>i[n-1]))return[!1,!1];var A=s.a2i(m),w=s.b2j(_),E=s.evalxy([],A,w);if(h){var L,C,P,D,G=0,I=0,H=[];m<e[0]?(L=0,C=0,G=(m-e[0])/(e[1]-e[0])):m>e[r-1]?(L=r-2,C=1,G=(m-e[r-1])/(e[r-1]-e[r-2])):C=A-(L=Math.max(0,Math.min(r-2,Math.floor(A)))),_<i[0]?(P=0,D=0,I=(_-i[0])/(i[1]-i[0])):_>i[n-1]?(P=n-2,D=1,I=(_-i[n-1])/(i[n-1]-i[n-2])):D=w-(P=Math.max(0,Math.min(n-2,Math.floor(w)))),G&&(s.dxydi(H,L,P,C,D),E[0]+=H[0]*G,E[1]+=H[1]*G),I&&(s.dxydj(H,L,P,C,D),E[0]+=H[0]*I,E[1]+=H[1]*I)}return E},s.c2p=function(m,_,h){return[_.c2p(m[0]),h.c2p(m[1])]},s.p2x=function(m,_,h){return[_.p2c(m[0]),h.p2c(m[1])]},s.dadi=function(m){var _=Math.max(0,Math.min(e.length-2,m));return e[_+1]-e[_]},s.dbdj=function(m){var _=Math.max(0,Math.min(i.length-2,m));return i[_+1]-i[_]},s.dxyda=function(m,_,h,A){var w=s.dxydi(null,m,_,h,A),E=s.dadi(m,h);return[w[0]/E,w[1]/E]},s.dxydb=function(m,_,h,A){var w=s.dxydj(null,m,_,h,A),E=s.dbdj(_,A);return[w[0]/E,w[1]/E]},s.dxyda_rough=function(m,_,h){var A=g*(h||.1),w=s.ab2xy(m+A,_,!0),E=s.ab2xy(m-A,_,!0);return[.5*(w[0]-E[0])/A,.5*(w[1]-E[1])/A]},s.dxydb_rough=function(m,_,h){var A=f*(h||.1),w=s.ab2xy(m,_+A,!0),E=s.ab2xy(m,_-A,!0);return[.5*(w[0]-E[0])/A,.5*(w[1]-E[1])/A]},s.dpdx=function(m){return m._m},s.dpdy=function(m){return m._m}}},72505:function(Q,z,t){var S=t(71828);Q.exports=function(k,l,T){var b,d,s,e=[],i=[],r=k[0].length,n=k.length;function a(F,V){var q,te=0,$=0;return F>0&&(q=k[V][F-1])!==void 0&&($++,te+=q),F<r-1&&(q=k[V][F+1])!==void 0&&($++,te+=q),V>0&&(q=k[V-1][F])!==void 0&&($++,te+=q),V<n-1&&(q=k[V+1][F])!==void 0&&($++,te+=q),te/Math.max(1,$)}var o,u,p,c,x,g,f,y,v,m,_,h=0;for(b=0;b<r;b++)for(d=0;d<n;d++)k[d][b]===void 0&&(e.push(b),i.push(d),k[d][b]=a(b,d)),h=Math.max(h,Math.abs(k[d][b]));if(!e.length)return k;var A=0,w=0,E=e.length;do{for(A=0,s=0;s<E;s++){b=e[s],d=i[s];var L,C,P,D,G,I,H=0,N=0;b===0?(P=l[G=Math.min(r-1,2)],D=l[1],L=k[d][G],N+=(C=k[d][1])+(C-L)*(l[0]-D)/(D-P),H++):b===r-1&&(P=l[G=Math.max(0,r-3)],D=l[r-2],L=k[d][G],N+=(C=k[d][r-2])+(C-L)*(l[r-1]-D)/(D-P),H++),(b===0||b===r-1)&&d>0&&d<n-1&&(o=T[d+1]-T[d],N+=((u=T[d]-T[d-1])*k[d+1][b]+o*k[d-1][b])/(u+o),H++),d===0?(P=T[I=Math.min(n-1,2)],D=T[1],L=k[I][b],N+=(C=k[1][b])+(C-L)*(T[0]-D)/(D-P),H++):d===n-1&&(P=T[I=Math.max(0,n-3)],D=T[n-2],L=k[I][b],N+=(C=k[n-2][b])+(C-L)*(T[n-1]-D)/(D-P),H++),(d===0||d===n-1)&&b>0&&b<r-1&&(o=l[b+1]-l[b],N+=((u=l[b]-l[b-1])*k[d][b+1]+o*k[d][b-1])/(u+o),H++),H?N/=H:(p=l[b+1]-l[b],c=l[b]-l[b-1],y=(x=T[d+1]-T[d])*(g=T[d]-T[d-1])*(x+g),N=((f=p*c*(p+c))*(g*k[d+1][b]+x*k[d-1][b])+y*(c*k[d][b+1]+p*k[d][b-1]))/(y*(c+p)+f*(g+x))),A+=(m=(v=N-k[d][b])/h)*m,_=H?0:.85,k[d][b]+=v*(1+_)}A=Math.sqrt(A)}while(w++<100&&A>1e-5);return S.log("Smoother converged to",A,"after",w,"iterations"),k}},19237:function(Q,z,t){var S=t(71828).isArray1D;Q.exports=function(k,l,T){var b=T("x"),d=b&&b.length,s=T("y"),e=s&&s.length;if(!d&&!e)return!1;if(l._cheater=!b,d&&!S(b)||e&&!S(s))l._length=null;else{var i=d?b.length:1/0;e&&(i=Math.min(i,s.length)),l.a&&l.a.length&&(i=Math.min(i,l.a.length)),l.b&&l.b.length&&(i=Math.min(i,l.b.length)),l._length=i}return!0}},69568:function(Q,z,t){var S=t(5386).fF,k=t(19316),l=t(50693),T=t(9012),b=t(22399).defaultLine,d=t(1426).extendFlat,s=k.marker.line;Q.exports=d({locations:{valType:"data_array",editType:"calc"},locationmode:k.locationmode,z:{valType:"data_array",editType:"calc"},geojson:d({},k.geojson,{}),featureidkey:k.featureidkey,text:d({},k.text,{}),hovertext:d({},k.hovertext,{}),marker:{line:{color:d({},s.color,{dflt:b}),width:d({},s.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:k.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:k.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:d({},T.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:S(),showlegend:d({},T.showlegend,{dflt:!1})},l("",{cLetter:"z",editTypeOverride:"calc"}))},38675:function(Q,z,t){var S=t(92770),k=t(50606).BADNUM,l=t(78803),T=t(75225),b=t(66279);function d(s){return s&&typeof s=="string"}Q.exports=function(s,e){var i,r=e._length,n=new Array(r);i=e.geojson?function(c){return d(c)||S(c)}:d;for(var a=0;a<r;a++){var o=n[a]={},u=e.locations[a],p=e.z[a];i(u)&&S(p)?(o.loc=u,o.z=p):(o.loc=null,o.z=k),o.index=a}return T(n,e),l(s,e,{vals:e.z,containerStr:"",cLetter:"z"}),b(n,e),n}},61869:function(Q,z,t){var S=t(71828),k=t(1586),l=t(69568);Q.exports=function(T,b,d,s){function e(o,u){return S.coerce(T,b,l,o,u)}var i=e("locations"),r=e("z");if(i&&i.length&&S.isArrayOrTypedArray(r)&&r.length){b._length=Math.min(i.length,r.length);var n,a=e("geojson");(typeof a=="string"&&a!==""||S.isPlainObject(a))&&(n="geojson-id"),e("locationmode",n)==="geojson-id"&&e("featureidkey"),e("text"),e("hovertext"),e("hovertemplate"),e("marker.line.width")&&e("marker.line.color"),e("marker.opacity"),k(T,b,s,e,{prefix:"",cLetter:"z"}),S.coerceSelectionMarkerOpacity(b,e)}else b.visible=!1}},92069:function(Q){Q.exports=function(z,t,S,k,l){z.location=t.location,z.z=t.z;var T=k[l];return T.fIn&&T.fIn.properties&&(z.properties=T.fIn.properties),z.ct=T.ct,z}},42300:function(Q,z,t){var S=t(89298),k=t(69568),l=t(71828).fillText;Q.exports=function(T,b,d){var s,e,i,r,n=T.cd,a=n[0].trace,o=T.subplot,u=[b,d],p=[b+360,d];for(e=0;e<n.length;e++)if(r=!1,(s=n[e])._polygons){for(i=0;i<s._polygons.length;i++)s._polygons[i].contains(u)&&(r=!r),s._polygons[i].contains(p)&&(r=!r);if(r)break}if(r&&s)return T.x0=T.x1=T.xa.c2p(s.ct),T.y0=T.y1=T.ya.c2p(s.ct),T.index=s.index,T.location=s.loc,T.z=s.z,T.zLabel=S.tickText(o.mockAxis,o.mockAxis.c2l(s.z),"hover").text,T.hovertemplate=s.hovertemplate,function(c,x,g){if(!x.hovertemplate){var f=g.hi||x.hoverinfo,y=String(g.loc),v=f==="all"?k.hoverinfo.flags:f.split("+"),m=v.indexOf("name")!==-1,_=v.indexOf("location")!==-1,h=v.indexOf("z")!==-1,A=v.indexOf("text")!==-1,w=[];!m&&_?c.nameOverride=y:(m&&(c.nameOverride=x.name),_&&w.push(y)),h&&w.push(c.zLabel),A&&l(g,x,w),c.extraText=w.join("<br>")}}(T,a,s),[T]}},51319:function(Q,z,t){Q.exports={attributes:t(69568),supplyDefaults:t(61869),colorbar:t(61243),calc:t(38675),calcGeoJSON:t(99841).calcGeoJSON,plot:t(99841).plot,style:t(99636).style,styleOnSelect:t(99636).styleOnSelect,hoverPoints:t(42300),eventData:t(92069),selectPoints:t(81253),moduleType:"trace",name:"choropleth",basePlotModule:t(44622),categories:["geo","noOpacity","showLegend"],meta:{}}},99841:function(Q,z,t){var S=t(39898),k=t(71828),l=t(41327),T=t(90973).getTopojsonFeatures,b=t(71739).findExtremes,d=t(99636).style;Q.exports={calcGeoJSON:function(s,e){for(var i=s[0].trace,r=e[i.geo],n=r._subplot,a=i.locationmode,o=i._length,u=a==="geojson-id"?l.extractTraceFeature(s):T(i,n.topojson),p=[],c=[],x=0;x<o;x++){var g=s[x],f=a==="geojson-id"?g.fOut:l.locationToFeature(a,g.loc,u);if(f){g.geojson=f,g.ct=f.properties.ct,g._polygons=l.feature2polygons(f);var y=l.computeBbox(f);p.push(y[0],y[2]),c.push(y[1],y[3])}else g.geojson=null}if(r.fitbounds==="geojson"&&a==="geojson-id"){var v=l.computeBbox(l.getTraceGeojson(i));p=[v[0],v[2]],c=[v[1],v[3]]}var m={padded:!0};i._extremes.lon=b(r.lonaxis._ax,p,m),i._extremes.lat=b(r.lataxis._ax,c,m)},plot:function(s,e,i){var r=e.layers.backplot.select(".choroplethlayer");k.makeTraceGroups(r,i,"trace choropleth").each(function(n){var a=S.select(this).selectAll("path.choroplethlocation").data(k.identity);a.enter().append("path").classed("choroplethlocation",!0),a.exit().remove(),d(s,n)})}}},81253:function(Q){Q.exports=function(z,t){var S,k,l,T,b,d=z.cd,s=z.xaxis,e=z.yaxis,i=[];if(t===!1)for(S=0;S<d.length;S++)d[S].selected=0;else for(S=0;S<d.length;S++)(l=(k=d[S]).ct)&&(T=s.c2p(l),b=e.c2p(l),t.contains([T,b],null,S,z)?(i.push({pointNumber:S,lon:l[0],lat:l[1]}),k.selected=1):k.selected=0);return i}},99636:function(Q,z,t){var S=t(39898),k=t(7901),l=t(91424),T=t(21081);function b(d,s){var e=s[0].trace,i=s[0].node3.selectAll(".choroplethlocation"),r=e.marker||{},n=r.line||{},a=T.makeColorScaleFuncFromTrace(e);i.each(function(o){S.select(this).attr("fill",a(o.z)).call(k.stroke,o.mlc||n.color).call(l.dashLine,"",o.mlw||n.width||0).style("opacity",r.opacity)}),l.selectedPointStyle(i,e)}Q.exports={style:function(d,s){s&&b(0,s)},styleOnSelect:function(d,s){var e=s[0].node3,i=s[0].trace;i.selectedpoints?l.selectedPointStyle(e.selectAll(".choroplethlocation"),i):b(0,s)}}},64496:function(Q,z,t){var S=t(69568),k=t(50693),l=t(5386).fF,T=t(9012),b=t(1426).extendFlat;Q.exports=b({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:b({},S.featureidkey,{}),below:{valType:"string",editType:"plot"},text:S.text,hovertext:S.hovertext,marker:{line:{color:b({},S.marker.line.color,{editType:"plot"}),width:b({},S.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:b({},S.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:b({},S.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:b({},S.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:S.hoverinfo,hovertemplate:l({},{keys:["properties"]}),showlegend:b({},T.showlegend,{dflt:!1})},k("",{cLetter:"z",editTypeOverride:"calc"}))},82004:function(Q,z,t){var S=t(92770),k=t(71828),l=t(21081),T=t(91424),b=t(18214).makeBlank,d=t(41327);function s(e){var i,r=e[0].trace,n=r._opts;if(r.selectedpoints){for(var a=T.makeSelectedPointStyleFns(r),o=0;o<e.length;o++){var u=e[o];u.fOut&&(u.fOut.properties.mo2=a.selectedOpacityFn(u))}i={type:"identity",property:"mo2"}}else i=k.isArrayOrTypedArray(r.marker.opacity)?{type:"identity",property:"mo"}:r.marker.opacity;return k.extendFlat(n.fill.paint,{"fill-opacity":i}),k.extendFlat(n.line.paint,{"line-opacity":i}),n}Q.exports={convert:function(e){var i=e[0].trace,r=i.visible===!0&&i._length!==0,n={layout:{visibility:"none"},paint:{}},a={layout:{visibility:"none"},paint:{}},o=i._opts={fill:n,line:a,geojson:b()};if(!r)return o;var u=d.extractTraceFeature(e);if(!u)return o;var p,c,x,g=l.makeColorScaleFuncFromTrace(i),f=i.marker,y=f.line||{};k.isArrayOrTypedArray(f.opacity)&&(p=function(w){var E=w.mo;return S(E)?+k.constrain(E,0,1):0}),k.isArrayOrTypedArray(y.color)&&(c=function(w){return w.mlc}),k.isArrayOrTypedArray(y.width)&&(x=function(w){return w.mlw});for(var v=0;v<e.length;v++){var m=e[v],_=m.fOut;if(_){var h=_.properties;h.fc=g(m.z),p&&(h.mo=p(m)),c&&(h.mlc=c(m)),x&&(h.mlw=x(m)),m.ct=h.ct,m._polygons=d.feature2polygons(_)}}var A=p?{type:"identity",property:"mo"}:f.opacity;return k.extendFlat(n.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":A}),k.extendFlat(a.paint,{"line-color":c?{type:"identity",property:"mlc"}:y.color,"line-width":x?{type:"identity",property:"mlw"}:y.width,"line-opacity":A}),n.layout.visibility="visible",a.layout.visibility="visible",o.geojson={type:"FeatureCollection",features:u},s(e),o},convertOnSelect:s}},22654:function(Q,z,t){var S=t(71828),k=t(1586),l=t(64496);Q.exports=function(T,b,d,s){function e(a,o){return S.coerce(T,b,l,a,o)}var i=e("locations"),r=e("z"),n=e("geojson");S.isArrayOrTypedArray(i)&&i.length&&S.isArrayOrTypedArray(r)&&r.length&&(typeof n=="string"&&n!==""||S.isPlainObject(n))?(e("featureidkey"),b._length=Math.min(i.length,r.length),e("below"),e("text"),e("hovertext"),e("hovertemplate"),e("marker.line.width")&&e("marker.line.color"),e("marker.opacity"),k(T,b,s,e,{prefix:"",cLetter:"z"}),S.coerceSelectionMarkerOpacity(b,e)):b.visible=!1}},57516:function(Q,z,t){Q.exports={attributes:t(64496),supplyDefaults:t(22654),colorbar:t(61243),calc:t(38675),plot:t(7852),hoverPoints:t(42300),eventData:t(92069),selectPoints:t(81253),styleOnSelect:function(S,k){k&&k[0].trace._glTrace.updateOnSelect(k)},getBelow:function(S,k){for(var l=k.getMapLayers(),T=l.length-2;T>=0;T--){var b=l[T].id;if(typeof b=="string"&&b.indexOf("water")===0){for(var d=T+1;d<l.length;d++)if(typeof(b=l[d].id)=="string"&&b.indexOf("plotly-")===-1)return b}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:t(50101),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},7852:function(Q,z,t){var S=t(82004).convert,k=t(82004).convertOnSelect,l=t(77734).traceLayerPrefix;function T(d,s){this.type="choroplethmapbox",this.subplot=d,this.uid=s,this.sourceId="source-"+s,this.layerList=[["fill",l+s+"-fill"],["line",l+s+"-line"]],this.below=null}var b=T.prototype;b.update=function(d){this._update(S(d)),d[0].trace._glTrace=this},b.updateOnSelect=function(d){this._update(k(d))},b._update=function(d){var s=this.subplot,e=this.layerList,i=s.belowLookup["trace-"+this.uid];s.map.getSource(this.sourceId).setData(d.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(d,i),this.below=i);for(var r=0;r<e.length;r++){var n=e[r],a=n[0],o=n[1],u=d[a];s.setOptions(o,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&s.setOptions(o,"setPaintProperty",u.paint)}},b._addLayers=function(d,s){for(var e=this.subplot,i=this.layerList,r=this.sourceId,n=0;n<i.length;n++){var a=i[n],o=a[0],u=d[o];e.addLayer({type:o,id:a[1],source:r,layout:u.layout,paint:u.paint},s)}},b._removeLayers=function(){for(var d=this.subplot.map,s=this.layerList,e=s.length-1;e>=0;e--)d.removeLayer(s[e][1])},b.dispose=function(){var d=this.subplot.map;this._removeLayers(),d.removeSource(this.sourceId)},Q.exports=function(d,s){var e=s[0].trace,i=new T(d,e.uid),r=i.sourceId,n=S(s),a=i.below=d.belowLookup["trace-"+e.uid];return d.map.addSource(r,{type:"geojson",data:n.geojson}),i._addLayers(n,a),s[0].trace._glTrace=i,i}},12674:function(Q,z,t){var S=t(50693),k=t(12663).axisHoverFormat,l=t(5386).fF,T=t(2418),b=t(9012),d=t(1426).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:l({editType:"calc"},{keys:["norm"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:d({},b.showlegend,{dflt:!1})};d(s,S("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(e){s[e]=T[e]}),s.hoverinfo=d({},b.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,Q.exports=s},31371:function(Q,z,t){var S=t(78803);Q.exports=function(k,l){for(var T=l.u,b=l.v,d=l.w,s=Math.min(l.x.length,l.y.length,l.z.length,T.length,b.length,d.length),e=-1/0,i=1/0,r=0;r<s;r++){var n=T[r],a=b[r],o=d[r],u=Math.sqrt(n*n+a*a+o*o);e=Math.max(e,u),i=Math.min(i,u)}l._len=s,l._normMax=e,S(k,l,{vals:[i,e],containerStr:"",cLetter:"c"})}},5453:function(Q,z,t){var S=t(9330).gl_cone3d,k=t(9330).gl_cone3d.createConeMesh,l=t(71828).simpleMap,T=t(81697).parseColorScale,b=t(21081).extractOpts,d=t(90060);function s(o,u){this.scene=o,this.uid=u,this.mesh=null,this.data=null}var e=s.prototype;e.handlePick=function(o){if(o.object===this.mesh){var u=o.index=o.data.index,p=this.data.x[u],c=this.data.y[u],x=this.data.z[u],g=this.data.u[u],f=this.data.v[u],y=this.data.w[u];o.traceCoordinate=[p,c,x,g,f,y,Math.sqrt(g*g+f*f+y*y)];var v=this.data.hovertext||this.data.text;return Array.isArray(v)&&v[u]!==void 0?o.textLabel=v[u]:v&&(o.textLabel=v),!0}};var i={xaxis:0,yaxis:1,zaxis:2},r={tip:1,tail:0,cm:.25,center:.5},n={tip:1,tail:1,cm:.75,center:.5};function a(o,u){var p=o.fullSceneLayout,c=o.dataScale,x={};function g(m,_){var h=p[_],A=c[i[_]];return l(m,function(w){return h.d2l(w)*A})}x.vectors=d(g(u.u,"xaxis"),g(u.v,"yaxis"),g(u.w,"zaxis"),u._len),x.positions=d(g(u.x,"xaxis"),g(u.y,"yaxis"),g(u.z,"zaxis"),u._len);var f=b(u);x.colormap=T(u),x.vertexIntensityBounds=[f.min/u._normMax,f.max/u._normMax],x.coneOffset=r[u.anchor],u.sizemode==="scaled"?x.coneSize=u.sizeref||.5:x.coneSize=u.sizeref&&u._normMax?u.sizeref/u._normMax:.5;var y=S(x),v=u.lightposition;return y.lightPosition=[v.x,v.y,v.z],y.ambient=u.lighting.ambient,y.diffuse=u.lighting.diffuse,y.specular=u.lighting.specular,y.roughness=u.lighting.roughness,y.fresnel=u.lighting.fresnel,y.opacity=u.opacity,u._pad=n[u.anchor]*y.vectorScale*y.coneScale*u._normMax,y}e.update=function(o){this.data=o;var u=a(this.scene,o);this.mesh.update(u)},e.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},Q.exports=function(o,u){var p=o.glplot.gl,c=a(o,u),x=k(p,c),g=new s(o,u.uid);return g.mesh=x,g.data=u,x._trace=g,o.glplot.add(x),g}},91750:function(Q,z,t){var S=t(71828),k=t(1586),l=t(12674);Q.exports=function(T,b,d,s){function e(p,c){return S.coerce(T,b,l,p,c)}var i=e("u"),r=e("v"),n=e("w"),a=e("x"),o=e("y"),u=e("z");i&&i.length&&r&&r.length&&n&&n.length&&a&&a.length&&o&&o.length&&u&&u.length?(e("sizeref"),e("sizemode"),e("anchor"),e("lighting.ambient"),e("lighting.diffuse"),e("lighting.specular"),e("lighting.roughness"),e("lighting.fresnel"),e("lightposition.x"),e("lightposition.y"),e("lightposition.z"),k(T,b,s,e,{prefix:"",cLetter:"c"}),e("text"),e("hovertext"),e("hovertemplate"),e("uhoverformat"),e("vhoverformat"),e("whoverformat"),e("xhoverformat"),e("yhoverformat"),e("zhoverformat"),b._length=null):b.visible=!1}},98128:function(Q,z,t){Q.exports={moduleType:"trace",name:"cone",basePlotModule:t(58547),categories:["gl3d","showLegend"],attributes:t(12674),supplyDefaults:t(91750),colorbar:{min:"cmin",max:"cmax"},calc:t(31371),plot:t(5453),eventData:function(S,k){return S.norm=k.traceCoordinate[6],S},meta:{}}},70600:function(Q,z,t){var S=t(21606),k=t(82196),l=t(12663),T=l.axisHoverFormat,b=l.descriptionOnlyNumbers,d=t(50693),s=t(79952).P,e=t(41940),i=t(1426).extendFlat,r=t(74808),n=r.COMPARISON_OPS2,a=r.INTERVAL_OPS,o=k.line;Q.exports=i({z:S.z,x:S.x,x0:S.x0,dx:S.dx,y:S.y,y0:S.y0,dy:S.dy,xperiod:S.xperiod,yperiod:S.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:S.xperiodalignment,yperiodalignment:S.yperiodalignment,text:S.text,hovertext:S.hovertext,transpose:S.transpose,xtype:S.xtype,ytype:S.ytype,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:S.hovertemplate,texttemplate:i({},S.texttemplate,{}),textfont:i({},S.textfont,{}),hoverongaps:S.hoverongaps,connectgaps:i({},S.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:e({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:b("contour label")},operation:{valType:"enumerated",values:[].concat(n).concat(a),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:i({},o.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:s,smoothing:i({},o.smoothing,{}),editType:"plot"}},d("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},27529:function(Q,z,t){var S=t(21081),k=t(90757),l=t(18670),T=t(53572);Q.exports=function(b,d){var s=k(b,d),e=s[0].z;l(d,e);var i,r=d.contours,n=S.extractOpts(d);if(r.coloring==="heatmap"&&n.auto&&d.autocontour===!1){var a=r.start,o=T(r),u=r.size||1,p=Math.floor((o-a)/u)+1;isFinite(u)||(u=1,p=1);var c=a-u/2;i=[c,c+p*u]}else i=e;return S.calc(b,d,{vals:i,cLetter:"z"}),s}},20083:function(Q){Q.exports=function(z,t){var S,k=z[0],l=k.z;switch(t.type){case"levels":var T=Math.min(l[0][0],l[0][1]);for(S=0;S<z.length;S++){var b=z[S];b.prefixBoundary=!b.edgepaths.length&&(T>b.level||b.starts.length&&T===b.level)}break;case"constraint":if(k.prefixBoundary=!1,k.edgepaths.length)return;var d=k.x.length,s=k.y.length,e=-1/0,i=1/0;for(S=0;S<s;S++)i=Math.min(i,l[S][0]),i=Math.min(i,l[S][d-1]),e=Math.max(e,l[S][0]),e=Math.max(e,l[S][d-1]);for(S=1;S<d-1;S++)i=Math.min(i,l[0][S]),i=Math.min(i,l[s-1][S]),e=Math.max(e,l[0][S]),e=Math.max(e,l[s-1][S]);var r,n,a=t.value;switch(t._operation){case">":a>e&&(k.prefixBoundary=!0);break;case"<":(a<i||k.starts.length&&a===i)&&(k.prefixBoundary=!0);break;case"[]":r=Math.min(a[0],a[1]),((n=Math.max(a[0],a[1]))<i||r>e||k.starts.length&&n===i)&&(k.prefixBoundary=!0);break;case"][":r=Math.min(a[0],a[1]),n=Math.max(a[0],a[1]),r<i&&n>e&&(k.prefixBoundary=!0)}}}},90654:function(Q,z,t){var S=t(21081),k=t(86068),l=t(53572);Q.exports={min:"zmin",max:"zmax",calc:function(T,b,d){var s=b.contours,e=b.line,i=s.size||1,r=s.coloring,n=k(b,{isColorbar:!0});if(r==="heatmap"){var a=S.extractOpts(b);d._fillgradient=a.reversescale?S.flipScale(a.colorscale):a.colorscale,d._zrange=[a.min,a.max]}else r==="fill"&&(d._fillcolor=n);d._line={color:r==="lines"?n:e.color,width:s.showlines!==!1?e.width:0,dash:e.dash},d._levels={start:s.start,end:l(s),size:i}}}},36914:function(Q){Q.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},83179:function(Q,z,t){var S=t(92770),k=t(14523),l=t(7901),T=l.addOpacity,b=l.opacity,d=t(74808),s=d.CONSTRAINT_REDUCTION,e=d.COMPARISON_OPS2;Q.exports=function(i,r,n,a,o,u){var p,c,x,g=r.contours,f=n("contours.operation");g._operation=s[f],function(y,v){var m;e.indexOf(v.operation)===-1?(y("contours.value",[0,1]),Array.isArray(v.value)?v.value.length>2?v.value=v.value.slice(2):v.length===0?v.value=[0,1]:v.length<2?(m=parseFloat(v.value[0]),v.value=[m,m+1]):v.value=[parseFloat(v.value[0]),parseFloat(v.value[1])]:S(v.value)&&(m=parseFloat(v.value),v.value=[m,m+1])):(y("contours.value",0),S(v.value)||(Array.isArray(v.value)?v.value=parseFloat(v.value[0]):v.value=0))}(n,g),f==="="?p=g.showlines=!0:(p=n("contours.showlines"),x=n("fillcolor",T((i.line||{}).color||o,.5))),p&&(c=n("line.color",x&&b(x)?T(r.fillcolor,1):o),n("line.width",2),n("line.dash")),n("line.smoothing"),k(n,a,c,u)}},64237:function(Q,z,t){var S=t(74808),k=t(92770);function l(d,s){var e,i=Array.isArray(s);function r(n){return k(n)?+n:null}return S.COMPARISON_OPS2.indexOf(d)!==-1?e=r(i?s[0]:s):S.INTERVAL_OPS.indexOf(d)!==-1?e=i?[r(s[0]),r(s[1])]:[r(s),r(s)]:S.SET_OPS.indexOf(d)!==-1&&(e=i?s.map(r):[r(s)]),e}function T(d){return function(s){s=l(d,s);var e=Math.min(s[0],s[1]),i=Math.max(s[0],s[1]);return{start:e,end:i,size:i-e}}}function b(d){return function(s){return{start:s=l(d,s),end:1/0,size:1/0}}}Q.exports={"[]":T("[]"),"][":T("]["),">":b(">"),"<":b("<"),"=":b("=")}},67217:function(Q){Q.exports=function(z,t,S,k){var l=k("contours.start"),T=k("contours.end"),b=l===!1||T===!1,d=S("contours.size");!(b?t.autocontour=!0:S("autocontour",!1))&&d||S("ncontours")}},84857:function(Q,z,t){var S=t(71828);function k(l){return S.extendFlat({},l,{edgepaths:S.extendDeep([],l.edgepaths),paths:S.extendDeep([],l.paths),starts:S.extendDeep([],l.starts)})}Q.exports=function(l,T){var b,d,s,e=function(n){return n.reverse()},i=function(n){return n};switch(T){case"=":case"<":return l;case">":for(l.length!==1&&S.warn("Contour data invalid for the specified inequality operation."),d=l[0],b=0;b<d.edgepaths.length;b++)d.edgepaths[b]=e(d.edgepaths[b]);for(b=0;b<d.paths.length;b++)d.paths[b]=e(d.paths[b]);for(b=0;b<d.starts.length;b++)d.starts[b]=e(d.starts[b]);return l;case"][":var r=e;e=i,i=r;case"[]":for(l.length!==2&&S.warn("Contour data invalid for the specified inequality range operation."),d=k(l[0]),s=k(l[1]),b=0;b<d.edgepaths.length;b++)d.edgepaths[b]=e(d.edgepaths[b]);for(b=0;b<d.paths.length;b++)d.paths[b]=e(d.paths[b]);for(b=0;b<d.starts.length;b++)d.starts[b]=e(d.starts[b]);for(;s.edgepaths.length;)d.edgepaths.push(i(s.edgepaths.shift()));for(;s.paths.length;)d.paths.push(i(s.paths.shift()));for(;s.starts.length;)d.starts.push(i(s.starts.shift()));return[d]}}},13031:function(Q,z,t){var S=t(71828),k=t(67684),l=t(73927),T=t(83179),b=t(67217),d=t(8724),s=t(58623),e=t(70600);Q.exports=function(i,r,n,a){function o(p,c){return S.coerce(i,r,e,p,c)}if(k(i,r,o,a)){l(i,r,a,o),o("xhoverformat"),o("yhoverformat"),o("text"),o("hovertext"),o("hoverongaps"),o("hovertemplate");var u=o("contours.type")==="constraint";o("connectgaps",S.isArray1D(r.z)),u?T(i,r,o,a,n):(b(i,r,o,function(p){return S.coerce2(i,r,e,p)}),d(i,r,o,a)),r.contours&&r.contours.coloring==="heatmap"&&s(o,a)}else r.visible=!1}},87558:function(Q,z,t){var S=t(71828),k=t(64237),l=t(53572);Q.exports=function(T,b,d){for(var s=T.type==="constraint"?k[T._operation](T.value):T,e=s.size,i=[],r=l(s),n=d.trace._carpetTrace,a=n?{xaxis:n.aaxis,yaxis:n.baxis,x:d.a,y:d.b}:{xaxis:b.xaxis,yaxis:b.yaxis,x:d.x,y:d.y},o=s.start;o<r;o+=e)if(i.push(S.extendFlat({level:o,crossings:{},starts:[],edgepaths:[],paths:[],z:d.z,smoothing:d.trace.line.smoothing},a)),i.length>1e3){S.warn("Too many contours, clipping at 1000",T);break}return i}},53572:function(Q){Q.exports=function(z){return z.end+z.size/1e6}},81696:function(Q,z,t){var S=t(71828),k=t(36914);function l(d,s,e,i){return Math.abs(d[0]-s[0])<e&&Math.abs(d[1]-s[1])<i}function T(d,s,e,i,r){var n,a=s.join(","),o=d.crossings[a],u=function(re,ae,oe){var ce=0,pe=0;return re>20&&ae?re===208||re===1114?ce=oe[0]===0?1:-1:pe=oe[1]===0?1:-1:k.BOTTOMSTART.indexOf(re)!==-1?pe=1:k.LEFTSTART.indexOf(re)!==-1?ce=1:k.TOPSTART.indexOf(re)!==-1?pe=-1:ce=-1,[ce,pe]}(o,e,s),p=[b(d,s,[-u[0],-u[1]])],c=d.z.length,x=d.z[0].length,g=s.slice(),f=u.slice();for(n=0;n<1e4;n++){if(o>20?(o=k.CHOOSESADDLE[o][(u[0]||u[1])<0?0:1],d.crossings[a]=k.SADDLEREMAINDER[o]):delete d.crossings[a],!(u=k.NEWDELTA[o])){S.log("Found bad marching index:",o,s,d.level);break}p.push(b(d,s,u)),s[0]+=u[0],s[1]+=u[1],a=s.join(","),l(p[p.length-1],p[p.length-2],i,r)&&p.pop();var y=u[0]&&(s[0]<0||s[0]>x-2)||u[1]&&(s[1]<0||s[1]>c-2);if(s[0]===g[0]&&s[1]===g[1]&&u[0]===f[0]&&u[1]===f[1]||e&&y)break;o=d.crossings[a]}n===1e4&&S.log("Infinite loop in contour?");var v,m,_,h,A,w,E,L,C,P,D,G,I,H,N,F=l(p[0],p[p.length-1],i,r),V=0,q=.2*d.smoothing,te=[],$=0;for(n=1;n<p.length;n++)G=p[n],I=p[n-1],H=G[2]-I[2],N=G[3]-I[3],V+=E=Math.sqrt(H*H+N*N),te.push(E);var W=V/te.length*q;function Z(re){return p[re%p.length]}for(n=p.length-2;n>=$;n--)if((v=te[n])<W){for(_=0,m=n-1;m>=$&&v+te[m]<W;m--)v+=te[m];if(F&&n===p.length-2)for(_=0;_<m&&v+te[_]<W;_++)v+=te[_];A=n-m+_+1,w=Math.floor((n+m+_+2)/2),h=F||n!==p.length-2?F||m!==-1?A%2?Z(w):[(Z(w)[0]+Z(w+1)[0])/2,(Z(w)[1]+Z(w+1)[1])/2]:p[0]:p[p.length-1],p.splice(m+1,n-m+1,h),n=m+1,_&&($=_),F&&(n===p.length-2?p[_]=p[p.length-1]:n===0&&(p[p.length-1]=p[0]))}for(p.splice(0,$),n=0;n<p.length;n++)p[n].length=2;if(!(p.length<2))if(F)p.pop(),d.paths.push(p);else{e||S.log("Unclosed interior contour?",d.level,g.join(","),p.join("L"));var J=!1;for(L=0;L<d.edgepaths.length;L++)if(P=d.edgepaths[L],!J&&l(P[0],p[p.length-1],i,r)){p.pop(),J=!0;var ee=!1;for(C=0;C<d.edgepaths.length;C++)if(l((D=d.edgepaths[C])[D.length-1],p[0],i,r)){ee=!0,p.shift(),d.edgepaths.splice(L,1),C===L?d.paths.push(p.concat(D)):(C>L&&C--,d.edgepaths[C]=D.concat(p,P));break}ee||(d.edgepaths[L]=p.concat(P))}for(L=0;L<d.edgepaths.length&&!J;L++)l((P=d.edgepaths[L])[P.length-1],p[0],i,r)&&(p.shift(),d.edgepaths[L]=P.concat(p),J=!0);J||d.edgepaths.push(p)}}function b(d,s,e){var i=s[0]+Math.max(e[0],0),r=s[1]+Math.max(e[1],0),n=d.z[r][i],a=d.xaxis,o=d.yaxis;if(e[1]){var u=(d.level-n)/(d.z[r][i+1]-n),p=(u!==1?(1-u)*a.c2l(d.x[i]):0)+(u!==0?u*a.c2l(d.x[i+1]):0);return[a.c2p(a.l2c(p),!0),o.c2p(d.y[r],!0),i+u,r]}var c=(d.level-n)/(d.z[r+1][i]-n),x=(c!==1?(1-c)*o.c2l(d.y[r]):0)+(c!==0?c*o.c2l(d.y[r+1]):0);return[a.c2p(d.x[i],!0),o.c2p(o.l2c(x),!0),i,r+c]}Q.exports=function(d,s,e){var i,r,n,a;for(s=s||.01,e=e||.01,r=0;r<d.length;r++){for(n=d[r],a=0;a<n.starts.length;a++)T(n,n.starts[a],"edge",s,e);for(i=0;Object.keys(n.crossings).length&&i<1e4;)i++,T(n,Object.keys(n.crossings)[0].split(",").map(Number),void 0,s,e);i===1e4&&S.log("Infinite loop in contour?")}}},52421:function(Q,z,t){var S=t(7901),k=t(46248);Q.exports=function(l,T,b,d,s){s||(s={}),s.isContour=!0;var e=k(l,T,b,d,s);return e&&e.forEach(function(i){var r=i.trace;r.contours.type==="constraint"&&(r.fillcolor&&S.opacity(r.fillcolor)?i.color=S.addOpacity(r.fillcolor,1):r.contours.showlines&&S.opacity(r.line.color)&&(i.color=S.addOpacity(r.line.color,1)))}),e}},99442:function(Q,z,t){Q.exports={attributes:t(70600),supplyDefaults:t(13031),calc:t(27529),plot:t(29854).plot,style:t(84426),colorbar:t(90654),hoverPoints:t(52421),moduleType:"trace",name:"contour",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},14523:function(Q,z,t){var S=t(71828);Q.exports=function(k,l,T,b){if(b||(b={}),k("contours.showlabels")){var d=l.font;S.coerceFont(k,"contours.labelfont",{family:d.family,size:d.size,color:T}),k("contours.labelformat")}b.hasHover!==!1&&k("zhoverformat")}},86068:function(Q,z,t){var S=t(39898),k=t(21081),l=t(53572);Q.exports=function(T){var b=T.contours,d=b.start,s=l(b),e=b.size||1,i=Math.floor((s-d)/e)+1,r=b.coloring==="lines"?0:1,n=k.extractOpts(T);isFinite(e)||(e=1,i=1);var a,o,u=n.reversescale?k.flipScale(n.colorscale):n.colorscale,p=u.length,c=new Array(p),x=new Array(p);if(b.coloring==="heatmap"){var g=n.min,f=n.max;for(o=0;o<p;o++)a=u[o],c[o]=a[0]*(f-g)+g,x[o]=a[1];var y=S.extent([g,f,b.start,b.start+e*(i-1)]),v=y[g<f?0:1],m=y[g<f?1:0];v!==g&&(c.splice(0,0,v),x.splice(0,0,x[0])),m!==f&&(c.push(m),x.push(x[x.length-1]))}else for(o=0;o<p;o++)a=u[o],c[o]=(a[0]*(i+r-1)-r/2)*e+d,x[o]=a[1];return k.makeColorScaleFunc({domain:c,range:x},{noNumericCheck:!0})}},87678:function(Q,z,t){var S=t(36914);function k(l,T){var b=(T[0][0]>l?0:1)+(T[0][1]>l?0:2)+(T[1][1]>l?0:4)+(T[1][0]>l?0:8);return b===5||b===10?l>(T[0][0]+T[0][1]+T[1][0]+T[1][1])/4?b===5?713:1114:b===5?104:208:b===15?0:b}Q.exports=function(l){var T,b,d,s,e,i,r,n,a,o=l[0].z,u=o.length,p=o[0].length,c=u===2||p===2;for(b=0;b<u-1;b++)for(s=[],b===0&&(s=s.concat(S.BOTTOMSTART)),b===u-2&&(s=s.concat(S.TOPSTART)),T=0;T<p-1;T++)for(d=s.slice(),T===0&&(d=d.concat(S.LEFTSTART)),T===p-2&&(d=d.concat(S.RIGHTSTART)),e=T+","+b,i=[[o[b][T],o[b][T+1]],[o[b+1][T],o[b+1][T+1]]],a=0;a<l.length;a++)(r=k((n=l[a]).level,i))&&(n.crossings[e]=r,d.indexOf(r)!==-1&&(n.starts.push([T,b]),c&&d.indexOf(r,d.indexOf(r)+1)!==-1&&n.starts.push([T,b])))}},29854:function(Q,z,t){var S=t(39898),k=t(71828),l=t(91424),T=t(21081),b=t(63893),d=t(89298),s=t(21994),e=t(50347),i=t(87678),r=t(81696),n=t(87558),a=t(84857),o=t(20083),u=t(36914),p=u.LABELOPTIMIZER;function c(f,y){var v,m,_,h,A,w,E,L="",C=0,P=f.edgepaths.map(function(F,V){return V}),D=!0;function G(F){return Math.abs(F[1]-y[2][1])<.01}function I(F){return Math.abs(F[0]-y[0][0])<.01}function H(F){return Math.abs(F[0]-y[2][0])<.01}for(;P.length;){for(w=l.smoothopen(f.edgepaths[C],f.smoothing),L+=D?w:w.replace(/^M/,"L"),P.splice(P.indexOf(C),1),v=f.edgepaths[C][f.edgepaths[C].length-1],h=-1,_=0;_<4;_++){if(!v){k.log("Missing end?",C,f);break}for(E=v,Math.abs(E[1]-y[0][1])<.01&&!H(v)?m=y[1]:I(v)?m=y[0]:G(v)?m=y[3]:H(v)&&(m=y[2]),A=0;A<f.edgepaths.length;A++){var N=f.edgepaths[A][0];Math.abs(v[0]-m[0])<.01?Math.abs(v[0]-N[0])<.01&&(N[1]-v[1])*(m[1]-N[1])>=0&&(m=N,h=A):Math.abs(v[1]-m[1])<.01?Math.abs(v[1]-N[1])<.01&&(N[0]-v[0])*(m[0]-N[0])>=0&&(m=N,h=A):k.log("endpt to newendpt is not vert. or horz.",v,m,N)}if(v=m,h>=0)break;L+="L"+m}if(h===f.edgepaths.length){k.log("unclosed perimeter path");break}C=h,(D=P.indexOf(C)===-1)&&(C=P[0],L+="Z")}for(C=0;C<f.paths.length;C++)L+=l.smoothclosed(f.paths[C],f.smoothing);return L}function x(f,y,v,m){var _=y.width/2,h=y.height/2,A=f.x,w=f.y,E=f.theta,L=Math.cos(E)*_,C=Math.sin(E)*_,P=(A>m.center?m.right-A:A-m.left)/(L+Math.abs(Math.sin(E)*h)),D=(w>m.middle?m.bottom-w:w-m.top)/(Math.abs(C)+Math.cos(E)*h);if(P<1||D<1)return 1/0;var G=p.EDGECOST*(1/(P-1)+1/(D-1));G+=p.ANGLECOST*E*E;for(var I=A-L,H=w-C,N=A+L,F=w+C,V=0;V<v.length;V++){var q=v[V],te=Math.cos(q.theta)*q.width/2,$=Math.sin(q.theta)*q.width/2,W=2*k.segmentDistance(I,H,N,F,q.x-te,q.y-$,q.x+te,q.y+$)/(y.height+q.height),Z=q.level===y.level,J=Z?p.SAMELEVELDISTANCE:1;if(W<=J)return 1/0;G+=p.NEIGHBORCOST*(Z?p.SAMELEVELFACTOR:1)/(W-J)}return G}function g(f){var y,v,m=f.trace._emptypoints,_=[],h=f.z.length,A=f.z[0].length,w=[];for(y=0;y<A;y++)w.push(1);for(y=0;y<h;y++)_.push(w.slice());for(y=0;y<m.length;y++)_[(v=m[y])[0]][v[1]]=0;return f.zmask=_,_}z.plot=function(f,y,v,m){var _=y.xaxis,h=y.yaxis;k.makeTraceGroups(m,v,"contour").each(function(A){var w=S.select(this),E=A[0],L=E.trace,C=E.x,P=E.y,D=L.contours,G=n(D,y,E),I=k.ensureSingle(w,"g","heatmapcoloring"),H=[];D.coloring==="heatmap"&&(H=[A]),e(f,y,H,I),i(G),r(G);var N=_.c2p(C[0],!0),F=_.c2p(C[C.length-1],!0),V=h.c2p(P[0],!0),q=h.c2p(P[P.length-1],!0),te=[[N,q],[F,q],[F,V],[N,V]],$=G;D.type==="constraint"&&($=a(G,D._operation)),function(W,Z,J){var ee=k.ensureSingle(W,"g","contourbg").selectAll("path").data(J.coloring==="fill"?[0]:[]);ee.enter().append("path"),ee.exit().remove(),ee.attr("d","M"+Z.join("L")+"Z").style("stroke","none")}(w,te,D),function(W,Z,J,ee){var re=ee.coloring==="fill"||ee.type==="constraint"&&ee._operation!=="=",ae="M"+J.join("L")+"Z";re&&o(Z,ee);var oe=k.ensureSingle(W,"g","contourfill").selectAll("path").data(re?Z:[]);oe.enter().append("path"),oe.exit().remove(),oe.each(function(ce){var pe=(ce.prefixBoundary?ae:"")+c(ce,J);pe?S.select(this).attr("d",pe).style("stroke","none"):S.select(this).remove()})}(w,$,te,D),function(W,Z,J,ee,re){var ae=J._context.staticPlot,oe=k.ensureSingle(W,"g","contourlines"),ce=re.showlines!==!1,pe=re.showlabels,ve=ce&&pe,we=z.createLines(oe,ce||pe,Z,ae),xe=z.createLineClip(oe,ve,J,ee.trace.uid),ge=W.selectAll("g.contourlabels").data(pe?[0]:[]);if(ge.exit().remove(),ge.enter().append("g").classed("contourlabels",!0),pe){var Oe=[],Ae=[];k.clearLocationCache();var Te=z.labelFormatter(J,ee),se=l.tester.append("text").attr("data-notex",1).call(l.font,re.labelfont),le=Z[0].xaxis,ne=Z[0].yaxis,me=le._length,Ee=ne._length,be=le.range,De=ne.range,Ue=k.aggNums(Math.min,null,ee.x),he=k.aggNums(Math.max,null,ee.x),ke=k.aggNums(Math.min,null,ee.y),_e=k.aggNums(Math.max,null,ee.y),Ce=Math.max(le.c2p(Ue,!0),0),Fe=Math.min(le.c2p(he,!0),me),Re=Math.max(ne.c2p(_e,!0),0),He=Math.min(ne.c2p(ke,!0),Ee),Ge={};be[0]<be[1]?(Ge.left=Ce,Ge.right=Fe):(Ge.left=Fe,Ge.right=Ce),De[0]<De[1]?(Ge.top=Re,Ge.bottom=He):(Ge.top=He,Ge.bottom=Re),Ge.middle=(Ge.top+Ge.bottom)/2,Ge.center=(Ge.left+Ge.right)/2,Oe.push([[Ge.left,Ge.top],[Ge.right,Ge.top],[Ge.right,Ge.bottom],[Ge.left,Ge.bottom]]);var $e=Math.sqrt(me*me+Ee*Ee),st=u.LABELDISTANCE*$e/Math.max(1,Z.length/u.LABELINCREASE);we.each(function(Ke){var gt=z.calcTextOpts(Ke.level,Te,se,J);S.select(this).selectAll("path").each(function(){var mt=k.getVisibleSegment(this,Ge,gt.height/2);if(mt&&!(mt.len<(gt.width+gt.height)*u.LABELMIN))for(var at=Math.min(Math.ceil(mt.len/st),u.LABELMAX),rt=0;rt<at;rt++){var xt=z.findBestTextLocation(this,mt,gt,Ae,Ge);if(!xt)break;z.addLabelData(xt,gt,Ae,Oe)}})}),se.remove(),z.drawLabels(ge,Ae,J,xe,ve?Oe:null)}pe&&!ce&&we.remove()}(w,G,f,E,D),function(W,Z,J,ee,re){var ae=ee.trace,oe=J._fullLayout._clips,ce="clip"+ae.uid,pe=oe.selectAll("#"+ce).data(ae.connectgaps?[]:[0]);if(pe.enter().append("clipPath").classed("contourclip",!0).attr("id",ce),pe.exit().remove(),ae.connectgaps===!1){var ve={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:Z.xaxis,yaxis:Z.yaxis,x:ee.x,y:ee.y,z:g(ee),smoothing:0};i([ve]),r([ve]),o([ve],{type:"levels"}),k.ensureSingle(pe,"path","").attr("d",(ve.prefixBoundary?"M"+re.join("L")+"Z":"")+c(ve,re))}else ce=null;l.setClipUrl(W,ce,J)}(w,y,f,E,te)})},z.createLines=function(f,y,v,m){var _=v[0].smoothing,h=f.selectAll("g.contourlevel").data(y?v:[]);if(h.exit().remove(),h.enter().append("g").classed("contourlevel",!0),y){var A=h.selectAll("path.openline").data(function(E){return E.pedgepaths||E.edgepaths});A.exit().remove(),A.enter().append("path").classed("openline",!0),A.attr("d",function(E){return l.smoothopen(E,_)}).style("stroke-miterlimit",1).style("vector-effect",m?"none":"non-scaling-stroke");var w=h.selectAll("path.closedline").data(function(E){return E.ppaths||E.paths});w.exit().remove(),w.enter().append("path").classed("closedline",!0),w.attr("d",function(E){return l.smoothclosed(E,_)}).style("stroke-miterlimit",1).style("vector-effect",m?"none":"non-scaling-stroke")}return h},z.createLineClip=function(f,y,v,m){var _=y?"clipline"+m:null,h=v._fullLayout._clips.selectAll("#"+_).data(y?[0]:[]);return h.exit().remove(),h.enter().append("clipPath").classed("contourlineclip",!0).attr("id",_),l.setClipUrl(f,_,v),h},z.labelFormatter=function(f,y){var v=f._fullLayout,m=y.trace,_=m.contours,h={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(_.labelformat)h.tickformat=_.labelformat,s(h,v);else{var A=T.extractOpts(m);if(A&&A.colorbar&&A.colorbar._axis)h=A.colorbar._axis;else{if(_.type==="constraint"){var w=_.value;Array.isArray(w)?h.range=[w[0],w[w.length-1]]:h.range=[w,w]}else h.range=[_.start,_.end],h.nticks=(_.end-_.start)/_.size;h.range[0]===h.range[1]&&(h.range[1]+=h.range[0]||1),h.nticks||(h.nticks=1e3),s(h,v),d.prepTicks(h),h._tmin=null,h._tmax=null}}return function(E){return d.tickText(h,E).text}},z.calcTextOpts=function(f,y,v,m){var _=y(f);v.text(_).call(b.convertToTspans,m);var h=v.node(),A=l.bBox(h,!0);return{text:_,width:A.width,height:A.height,fontSize:+h.style["font-size"].replace("px",""),level:f,dy:(A.top+A.bottom)/2}},z.findBestTextLocation=function(f,y,v,m,_){var h,A,w,E,L,C=v.width;y.isClosed?(A=y.len/p.INITIALSEARCHPOINTS,h=y.min+A/2,w=y.max):(A=(y.len-C)/(p.INITIALSEARCHPOINTS+1),h=y.min+A+C/2,w=y.max-(A+C)/2);for(var P=1/0,D=0;D<p.ITERATIONS;D++){for(var G=h;G<w;G+=A){var I=k.getTextLocation(f,y.total,G,C),H=x(I,v,m,_);H<P&&(P=H,L=I,E=G)}if(P>2*p.MAXCOST)break;D&&(A/=2),w=(h=E-A/2)+1.5*A}if(P<=p.MAXCOST)return L},z.addLabelData=function(f,y,v,m){var _=y.fontSize,h=y.width+_/3,A=Math.max(0,y.height-_/3),w=f.x,E=f.y,L=f.theta,C=Math.sin(L),P=Math.cos(L),D=function(I,H){return[w+I*P-H*C,E+I*C+H*P]},G=[D(-h/2,-A/2),D(-h/2,A/2),D(h/2,A/2),D(h/2,-A/2)];v.push({text:y.text,x:w,y:E,dy:y.dy,theta:L,level:y.level,width:h,height:A}),m.push(G)},z.drawLabels=function(f,y,v,m,_){var h=f.selectAll("text").data(y,function(E){return E.text+","+E.x+","+E.y+","+E.theta});if(h.exit().remove(),h.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(E){var L=E.x+Math.sin(E.theta)*E.dy,C=E.y-Math.cos(E.theta)*E.dy;S.select(this).text(E.text).attr({x:L,y:C,transform:"rotate("+180*E.theta/Math.PI+" "+L+" "+C+")"}).call(b.convertToTspans,v)}),_){for(var A="",w=0;w<_.length;w++)A+="M"+_[w].join("L")+"Z";k.ensureSingle(m,"path","").attr("d",A)}}},18670:function(Q,z,t){var S=t(89298),k=t(71828);function l(T,b,d){var s={type:"linear",range:[T,b]};return S.autoTicks(s,(b-T)/(d||15)),s}Q.exports=function(T,b){var d=T.contours;if(T.autocontour){var s=T.zmin,e=T.zmax;(T.zauto||s===void 0)&&(s=k.aggNums(Math.min,null,b)),(T.zauto||e===void 0)&&(e=k.aggNums(Math.max,null,b));var i=l(s,e,T.ncontours);d.size=i.dtick,d.start=S.tickFirst(i),i.range.reverse(),d.end=S.tickFirst(i),d.start===s&&(d.start+=d.size),d.end===e&&(d.end-=d.size),d.start>d.end&&(d.start=d.end=(d.start+d.end)/2),T._input.contours||(T._input.contours={}),k.extendFlat(T._input.contours,{start:d.start,end:d.end,size:d.size}),T._input.autocontour=!0}else if(d.type!=="constraint"){var r,n=d.start,a=d.end,o=T._input.contours;n>a&&(d.start=o.start=a,a=d.end=o.end=n,n=d.start),d.size>0||(r=n===a?1:l(n,a,T.ncontours).dtick,o.size=d.size=r)}}},84426:function(Q,z,t){var S=t(39898),k=t(91424),l=t(70035),T=t(86068);Q.exports=function(b){var d=S.select(b).selectAll("g.contour");d.style("opacity",function(s){return s[0].trace.opacity}),d.each(function(s){var e=S.select(this),i=s[0].trace,r=i.contours,n=i.line,a=r.size||1,o=r.start,u=r.type==="constraint",p=!u&&r.coloring==="lines",c=!u&&r.coloring==="fill",x=p||c?T(i):null;e.selectAll("g.contourlevel").each(function(y){S.select(this).selectAll("path").call(k.lineGroupStyle,n.width,p?x(y.level):n.color,n.dash)});var g=r.labelfont;if(e.selectAll("g.contourlabels text").each(function(y){k.font(S.select(this),{family:g.family,size:g.size,color:g.color||(p?x(y.level):n.color)})}),u)e.selectAll("g.contourfill path").style("fill",i.fillcolor);else if(c){var f;e.selectAll("g.contourfill path").style("fill",function(y){return f===void 0&&(f=y.level),x(y.level+.5*a)}),f===void 0&&(f=o),e.selectAll("g.contourbg path").style("fill",x(f-.5*a))}}),l(b)}},8724:function(Q,z,t){var S=t(1586),k=t(14523);Q.exports=function(l,T,b,d,s){var e,i=b("contours.coloring"),r="";i==="fill"&&(e=b("contours.showlines")),e!==!1&&(i!=="lines"&&(r=b("line.color","#000")),b("line.width",.5),b("line.dash")),i!=="none"&&(l.showlegend!==!0&&(T.showlegend=!1),T._dfltShowLegend=!1,S(l,T,d,b,{prefix:"",cLetter:"z"})),b("line.smoothing"),k(b,d,r,s)}},88085:function(Q,z,t){var S=t(21606),k=t(70600),l=t(50693),T=t(1426).extendFlat,b=k.contours;Q.exports=T({carpet:{valType:"string",editType:"calc"},z:S.z,a:S.x,a0:S.x0,da:S.dx,b:S.y,b0:S.y0,db:S.dy,text:S.text,hovertext:S.hovertext,transpose:S.transpose,atype:S.xtype,btype:S.ytype,fillcolor:k.fillcolor,autocontour:k.autocontour,ncontours:k.ncontours,contours:{type:b.type,start:b.start,end:b.end,size:b.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:b.showlines,showlabels:b.showlabels,labelfont:b.labelfont,labelformat:b.labelformat,operation:b.operation,value:b.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:k.line.color,width:k.line.width,dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},transforms:void 0},l("",{cLetter:"z",autoColorDflt:!1}))},59885:function(Q,z,t){var S=t(78803),k=t(71828),l=t(68296),T=t(4742),b=t(824),d=t(43907),s=t(70769),e=t(75005),i=t(22882),r=t(18670);Q.exports=function(n,a){var o=a._carpetTrace=i(n,a);if(o&&o.visible&&o.visible!=="legendonly"){if(!a.a||!a.b){var u=n.data[o.index],p=n.data[a.index];p.a||(p.a=u.a),p.b||(p.b=u.b),e(p,a,a._defaultColor,n._fullLayout)}var c=function(x,g){var f,y,v,m,_,h,A,w=g._carpetTrace,E=w.aaxis,L=w.baxis;E._minDtick=0,L._minDtick=0,k.isArray1D(g.z)&&l(g,E,L,"a","b",["z"]),f=g._a=g._a||g.a,m=g._b=g._b||g.b,f=f?E.makeCalcdata(g,"_a"):[],m=m?L.makeCalcdata(g,"_b"):[],y=g.a0||0,v=g.da||1,_=g.b0||0,h=g.db||1,A=g._z=T(g._z||g.z,g.transpose),g._emptypoints=d(A),b(A,g._emptypoints);var C=k.maxRowLength(A),P=g.xtype==="scaled"?"":f,D=s(g,P,y,v,C,E),G=g.ytype==="scaled"?"":m,I={a:D,b:s(g,G,_,h,A.length,L),z:A};return g.contours.type==="levels"&&g.contours.coloring!=="none"&&S(x,g,{vals:A,containerStr:"",cLetter:"z"}),[I]}(n,a);return r(a,a._z),c}}},75005:function(Q,z,t){var S=t(71828),k=t(67684),l=t(88085),T=t(83179),b=t(67217),d=t(8724);Q.exports=function(s,e,i,r){function n(a,o){return S.coerce(s,e,l,a,o)}if(n("carpet"),s.a&&s.b){if(!k(s,e,n,r,"a","b"))return void(e.visible=!1);n("text"),n("contours.type")==="constraint"?T(s,e,n,r,i,{hasHover:!1}):(b(s,e,n,function(a){return S.coerce2(s,e,l,a)}),d(s,e,n,r,{hasHover:!1}))}else e._defaultColor=i,e._length=null}},93740:function(Q,z,t){Q.exports={attributes:t(88085),supplyDefaults:t(75005),colorbar:t(90654),calc:t(59885),plot:t(51048),style:t(84426),moduleType:"trace",name:"contourcarpet",basePlotModule:t(93612),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},51048:function(Q,z,t){var S=t(39898),k=t(27669),l=t(67961),T=t(91424),b=t(71828),d=t(87678),s=t(81696),e=t(29854),i=t(36914),r=t(84857),n=t(87558),a=t(20083),o=t(22882),u=t(4536);function p(g,f,y){var v=g.getPointAtLength(f),m=g.getPointAtLength(y),_=m.x-v.x,h=m.y-v.y,A=Math.sqrt(_*_+h*h);return[_/A,h/A]}function c(g){var f=Math.sqrt(g[0]*g[0]+g[1]*g[1]);return[g[0]/f,g[1]/f]}function x(g,f){var y=Math.abs(g[0]*f[0]+g[1]*f[1]);return Math.sqrt(1-y*y)/y}Q.exports=function(g,f,y,v){var m=f.xaxis,_=f.yaxis;b.makeTraceGroups(v,y,"contour").each(function(h){var A=S.select(this),w=h[0],E=w.trace,L=E._carpetTrace=o(g,E),C=g.calcdata[L.index][0];if(L.visible&&L.visible!=="legendonly"){var P=w.a,D=w.b,G=E.contours,I=n(G,f,w),H=G.type==="constraint",N=G._operation,F=H?N==="="?"lines":"fill":G.coloring,V=[[P[0],D[D.length-1]],[P[P.length-1],D[D.length-1]],[P[P.length-1],D[0]],[P[0],D[0]]];d(I);var q=1e-8*(P[P.length-1]-P[0]),te=1e-8*(D[D.length-1]-D[0]);s(I,q,te);var $,W,Z,J,ee=I;G.type==="constraint"&&(ee=r(I,N)),function(ce,pe){var ve,we,xe,ge,Oe,Ae,Te,se,le;for(ve=0;ve<ce.length;ve++){for(Oe=(ge=ce[ve]).pedgepaths=[],Ae=ge.ppaths=[],we=0;we<ge.edgepaths.length;we++){for(le=ge.edgepaths[we],Te=[],xe=0;xe<le.length;xe++)Te[xe]=pe(le[xe]);Oe.push(Te)}for(we=0;we<ge.paths.length;we++){for(le=ge.paths[we],se=[],xe=0;xe<le.length;xe++)se[xe]=pe(le[xe]);Ae.push(se)}}}(I,oe);var re=[];for(J=C.clipsegments.length-1;J>=0;J--)$=C.clipsegments[J],W=k([],$.x,m.c2p),Z=k([],$.y,_.c2p),W.reverse(),Z.reverse(),re.push(l(W,Z,$.bicubic));var ae="M"+re.join("L")+"Z";(function(ce,pe,ve,we,xe,ge){var Oe,Ae,Te,se,le=b.ensureSingle(ce,"g","contourbg").selectAll("path").data(ge!=="fill"||xe?[]:[0]);le.enter().append("path"),le.exit().remove();var ne=[];for(se=0;se<pe.length;se++)Oe=pe[se],Ae=k([],Oe.x,ve.c2p),Te=k([],Oe.y,we.c2p),ne.push(l(Ae,Te,Oe.bicubic));le.attr("d","M"+ne.join("L")+"Z").style("stroke","none")})(A,C.clipsegments,m,_,H,F),function(ce,pe,ve,we,xe,ge,Oe,Ae,Te,se,le){var ne=se==="fill";ne&&a(xe,ce.contours);var me=b.ensureSingle(pe,"g","contourfill").selectAll("path").data(ne?xe:[]);me.enter().append("path"),me.exit().remove(),me.each(function(Ee){var be=(Ee.prefixBoundary?le:"")+function(De,Ue,he,ke,_e,Ce,Fe,Re){var He,Ge,$e,st,Ke,gt,mt,at="",rt=Ue.edgepaths.map(function(ot,Ie){return Ie}),xt=!0,Tt=1e-4*Math.abs(he[0][0]-he[2][0]),wt=1e-4*Math.abs(he[0][1]-he[2][1]);function Ot(ot){return Math.abs(ot[1]-he[0][1])<wt}function Ct(ot){return Math.abs(ot[1]-he[2][1])<wt}function Ye(ot){return Math.abs(ot[0]-he[0][0])<Tt}function Xe(ot){return Math.abs(ot[0]-he[2][0])<Tt}function Ve(ot,Ie){var ze,et,tt,dt,pt="";for(Ot(ot)&&!Xe(ot)||Ct(ot)&&!Ye(ot)?(dt=_e.aaxis,tt=u(_e,Ce,[ot[0],Ie[0]],.5*(ot[1]+Ie[1]))):(dt=_e.baxis,tt=u(_e,Ce,.5*(ot[0]+Ie[0]),[ot[1],Ie[1]])),ze=1;ze<tt.length;ze++)for(pt+=dt.smoothing?"C":"L",et=0;et<tt[ze].length;et++){var vt=tt[ze][et];pt+=[Fe.c2p(vt[0]),Re.c2p(vt[1])]+" "}return pt}for(He=0,Ge=null;rt.length;){var We=Ue.edgepaths[He][0];for(Ge&&(at+=Ve(Ge,We)),mt=T.smoothopen(Ue.edgepaths[He].map(ke),Ue.smoothing),at+=xt?mt:mt.replace(/^M/,"L"),rt.splice(rt.indexOf(He),1),Ge=Ue.edgepaths[He][Ue.edgepaths[He].length-1],Ke=-1,st=0;st<4;st++){if(!Ge){b.log("Missing end?",He,Ue);break}for(Ot(Ge)&&!Xe(Ge)?$e=he[1]:Ye(Ge)?$e=he[0]:Ct(Ge)?$e=he[3]:Xe(Ge)&&($e=he[2]),gt=0;gt<Ue.edgepaths.length;gt++){var nt=Ue.edgepaths[gt][0];Math.abs(Ge[0]-$e[0])<Tt?Math.abs(Ge[0]-nt[0])<Tt&&(nt[1]-Ge[1])*($e[1]-nt[1])>=0&&($e=nt,Ke=gt):Math.abs(Ge[1]-$e[1])<wt?Math.abs(Ge[1]-nt[1])<wt&&(nt[0]-Ge[0])*($e[0]-nt[0])>=0&&($e=nt,Ke=gt):b.log("endpt to newendpt is not vert. or horz.",Ge,$e,nt)}if(Ke>=0)break;at+=Ve(Ge,$e),Ge=$e}if(Ke===Ue.edgepaths.length){b.log("unclosed perimeter path");break}He=Ke,(xt=rt.indexOf(He)===-1)&&(He=rt[0],at+=Ve(Ge,$e)+"Z",Ge=null)}for(He=0;He<Ue.paths.length;He++)at+=T.smoothclosed(Ue.paths[He].map(ke),Ue.smoothing);return at}(0,Ee,ge,Oe,Ae,Te,ve,we);be?S.select(this).attr("d",be).style("stroke","none"):S.select(this).remove()})}(E,A,m,_,ee,V,oe,L,C,F,ae),function(ce,pe,ve,we,xe,ge,Oe){var Ae=ve._context.staticPlot,Te=b.ensureSingle(ce,"g","contourlines"),se=xe.showlines!==!1,le=xe.showlabels,ne=se&&le,me=e.createLines(Te,se||le,pe,Ae),Ee=e.createLineClip(Te,ne,ve,we.trace.uid),be=ce.selectAll("g.contourlabels").data(le?[0]:[]);if(be.exit().remove(),be.enter().append("g").classed("contourlabels",!0),le){var De=ge.xaxis,Ue=ge.yaxis,he=De._length,ke=Ue._length,_e=[[[0,0],[he,0],[he,ke],[0,ke]]],Ce=[];b.clearLocationCache();var Fe=e.labelFormatter(ve,we),Re=T.tester.append("text").attr("data-notex",1).call(T.font,xe.labelfont),He={left:0,right:he,center:he/2,top:0,bottom:ke,middle:ke/2},Ge=Math.sqrt(he*he+ke*ke),$e=i.LABELDISTANCE*Ge/Math.max(1,pe.length/i.LABELINCREASE);me.each(function(st){var Ke=e.calcTextOpts(st.level,Fe,Re,ve);S.select(this).selectAll("path").each(function(gt){var mt=this,at=b.getVisibleSegment(mt,He,Ke.height/2);if(at&&(function(wt,Ot,Ct,Ye,Xe,Ve){for(var We,nt=0;nt<Ct.pedgepaths.length;nt++)Ot===Ct.pedgepaths[nt]&&(We=Ct.edgepaths[nt]);if(We){var ot=Xe.a[0],Ie=Xe.a[Xe.a.length-1],ze=Xe.b[0],et=Xe.b[Xe.b.length-1],tt=p(wt,0,1),dt=p(wt,Ye.total,Ye.total-1),pt=ct(We[0],tt),vt=Ye.total-ct(We[We.length-1],dt);Ye.min<pt&&(Ye.min=pt),Ye.max>vt&&(Ye.max=vt),Ye.len=Ye.max-Ye.min}function ct(kt,ut){var ft,bt=0,It=.1;return(Math.abs(kt[0]-ot)<It||Math.abs(kt[0]-Ie)<It)&&(ft=c(Xe.dxydb_rough(kt[0],kt[1],It)),bt=Math.max(bt,Ve*x(ut,ft)/2)),(Math.abs(kt[1]-ze)<It||Math.abs(kt[1]-et)<It)&&(ft=c(Xe.dxyda_rough(kt[0],kt[1],It)),bt=Math.max(bt,Ve*x(ut,ft)/2)),bt}}(mt,gt,st,at,Oe,Ke.height),!(at.len<(Ke.width+Ke.height)*i.LABELMIN)))for(var rt=Math.min(Math.ceil(at.len/$e),i.LABELMAX),xt=0;xt<rt;xt++){var Tt=e.findBestTextLocation(mt,at,Ke,Ce,He);if(!Tt)break;e.addLabelData(Tt,Ke,Ce,_e)}})}),Re.remove(),e.drawLabels(be,Ce,ve,Ee,ne?_e:null)}le&&!se&&me.remove()}(A,I,g,w,G,f,L),T.setClipUrl(A,L._clipPathId,g)}function oe(ce){var pe=L.ab2xy(ce[0],ce[1],!0);return[m.c2p(pe[0]),_.c2p(pe[1])]}})}},64096:function(Q,z,t){var S=t(50693),k=t(5386).fF,l=t(9012),T=t(99181),b=t(1426).extendFlat;Q.exports=b({lon:T.lon,lat:T.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,hoverinfo:b({},l.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:k(),showlegend:b({},l.showlegend,{dflt:!1})},S("",{cLetter:"z",editTypeOverride:"calc"}))},85070:function(Q,z,t){var S=t(92770),k=t(71828).isArrayOrTypedArray,l=t(50606).BADNUM,T=t(78803),b=t(71828)._;Q.exports=function(d,s){for(var e=s._length,i=new Array(e),r=s.z,n=k(r)&&r.length,a=0;a<e;a++){var o=i[a]={},u=s.lon[a],p=s.lat[a];if(o.lonlat=S(u)&&S(p)?[+u,+p]:[l,l],n){var c=r[a];o.z=S(c)?c:l}}return T(d,s,{vals:n?r:[0,1],containerStr:"",cLetter:"z"}),e&&(i[0].t={labels:{lat:b(d,"lat:")+" ",lon:b(d,"lon:")+" "}}),i}},52414:function(Q,z,t){var S=t(92770),k=t(71828),l=t(7901),T=t(21081),b=t(50606).BADNUM,d=t(18214).makeBlank;Q.exports=function(s){var e=s[0].trace,i=e.visible===!0&&e._length!==0,r=e._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:d()};if(!i)return r;var n,a=[],o=e.z,u=e.radius,p=k.isArrayOrTypedArray(o)&&o.length,c=k.isArrayOrTypedArray(u);for(n=0;n<s.length;n++){var x=s[n],g=x.lonlat;if(g[0]!==b){var f={};if(p){var y=x.z;f.z=y!==b?y:0}c&&(f.r=S(u[n])&&u[n]>0?+u[n]:0),a.push({type:"Feature",geometry:{type:"Point",coordinates:g},properties:f})}}var v=T.extractOpts(e),m=v.reversescale?T.flipScale(v.colorscale):v.colorscale,_=m[0][1],h=["interpolate",["linear"],["heatmap-density"],0,l.opacity(_)<1?_:l.addOpacity(_,0)];for(n=1;n<m.length;n++)h.push(m[n][0],m[n][1]);var A=["interpolate",["linear"],["get","z"],v.min,0,v.max,1];return k.extendFlat(r.heatmap.paint,{"heatmap-weight":p?A:1/(v.max-v.min),"heatmap-color":h,"heatmap-radius":c?{type:"identity",property:"r"}:e.radius,"heatmap-opacity":e.opacity}),r.geojson={type:"FeatureCollection",features:a},r.heatmap.layout.visibility="visible",r}},79429:function(Q,z,t){var S=t(71828),k=t(1586),l=t(64096);Q.exports=function(T,b,d,s){function e(a,o){return S.coerce(T,b,l,a,o)}var i=e("lon")||[],r=e("lat")||[],n=Math.min(i.length,r.length);n?(b._length=n,e("z"),e("radius"),e("below"),e("text"),e("hovertext"),e("hovertemplate"),k(T,b,s,e,{prefix:"",cLetter:"z"})):b.visible=!1}},62474:function(Q){Q.exports=function(z,t){return z.lon=t.lon,z.lat=t.lat,z.z=t.z,z}},84684:function(Q,z,t){var S=t(89298),k=t(28178).hoverPoints,l=t(28178).getExtraText;Q.exports=function(T,b,d){var s=k(T,b,d);if(s){var e=s[0],i=e.cd,r=i[0].trace,n=i[e.index];if(delete e.color,"z"in n){var a=e.subplot.mockAxis;e.z=n.z,e.zLabel=S.tickText(a,a.c2l(n.z),"hover").text}return e.extraText=l(r,n,i[0].t.labels),[e]}}},93814:function(Q,z,t){Q.exports={attributes:t(64096),supplyDefaults:t(79429),colorbar:t(61243),formatLabels:t(15636),calc:t(85070),plot:t(7336),hoverPoints:t(84684),eventData:t(62474),getBelow:function(S,k){for(var l=k.getMapLayers(),T=0;T<l.length;T++){var b=l[T],d=b.id;if(b.type==="symbol"&&typeof d=="string"&&d.indexOf("plotly-")===-1)return d}},moduleType:"trace",name:"densitymapbox",basePlotModule:t(50101),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},7336:function(Q,z,t){var S=t(52414),k=t(77734).traceLayerPrefix;function l(b,d){this.type="densitymapbox",this.subplot=b,this.uid=d,this.sourceId="source-"+d,this.layerList=[["heatmap",k+d+"-heatmap"]],this.below=null}var T=l.prototype;T.update=function(b){var d=this.subplot,s=this.layerList,e=S(b),i=d.belowLookup["trace-"+this.uid];d.map.getSource(this.sourceId).setData(e.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(e,i),this.below=i);for(var r=0;r<s.length;r++){var n=s[r],a=n[0],o=n[1],u=e[a];d.setOptions(o,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&d.setOptions(o,"setPaintProperty",u.paint)}},T._addLayers=function(b,d){for(var s=this.subplot,e=this.layerList,i=this.sourceId,r=0;r<e.length;r++){var n=e[r],a=n[0],o=b[a];s.addLayer({type:a,id:n[1],source:i,layout:o.layout,paint:o.paint},d)}},T._removeLayers=function(){for(var b=this.subplot.map,d=this.layerList,s=d.length-1;s>=0;s--)b.removeLayer(d[s][1])},T.dispose=function(){var b=this.subplot.map;this._removeLayers(),b.removeSource(this.sourceId)},Q.exports=function(b,d){var s=d[0].trace,e=new l(b,s.uid),i=e.sourceId,r=S(d),n=e.below=b.belowLookup["trace-"+s.uid];return b.map.addSource(i,{type:"geojson",data:r.geojson}),e._addLayers(r,n),e}},49789:function(Q,z,t){var S=t(71828);Q.exports=function(k,l){for(var T=0;T<k.length;T++)k[T].i=T;S.mergeArray(l.text,k,"tx"),S.mergeArray(l.hovertext,k,"htx");var b=l.marker;if(b){S.mergeArray(b.opacity,k,"mo"),S.mergeArray(b.color,k,"mc");var d=b.line;d&&(S.mergeArray(d.color,k,"mlc"),S.mergeArrayCastPositive(d.width,k,"mlw"))}}},1285:function(Q,z,t){var S,k=t(1486),l=t(82196).line,T=t(9012),b=t(12663).axisHoverFormat,d=t(5386).fF,s=t(5386).si,e=t(18517),i=t(1426).extendFlat,r=t(7901);Q.exports={x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),hovertext:k.hovertext,hovertemplate:d({},{keys:e.eventDataKeys}),hoverinfo:i({},T.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:s({editType:"plot"},{keys:e.eventDataKeys.concat(["label","value"])}),text:k.text,textposition:k.textposition,insidetextanchor:i({},k.insidetextanchor,{dflt:"middle"}),textangle:i({},k.textangle,{dflt:0}),textfont:k.textfont,insidetextfont:k.insidetextfont,outsidetextfont:k.outsidetextfont,constraintext:k.constraintext,cliponaxis:k.cliponaxis,orientation:i({},k.orientation,{}),offset:i({},k.offset,{arrayOk:!1}),width:i({},k.width,{arrayOk:!1}),marker:(S=i({},k.marker),delete S.pattern,S),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:i({},l.color,{dflt:r.defaultLine}),width:i({},l.width,{dflt:0,editType:"plot"}),dash:l.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup}},9532:function(Q,z,t){var S=t(89298),k=t(42973),l=t(49789),T=t(66279),b=t(50606).BADNUM;function d(s){return s===b?0:s}Q.exports=function(s,e){var i,r,n,a,o,u,p,c,x=S.getFromId(s,e.xaxis||"x"),g=S.getFromId(s,e.yaxis||"y");e.orientation==="h"?(i=x.makeCalcdata(e,"x"),n=g.makeCalcdata(e,"y"),a=k(e,g,"y",n),o=!!e.yperiodalignment,u="y"):(i=g.makeCalcdata(e,"y"),n=x.makeCalcdata(e,"x"),a=k(e,x,"x",n),o=!!e.xperiodalignment,u="x"),r=a.vals;var f,y=Math.min(r.length,i.length),v=new Array(y);for(e._base=[],p=0;p<y;p++){i[p]<0&&(i[p]=b);var m=!1;i[p]!==b&&p+1<y&&i[p+1]!==b&&(m=!0),c=v[p]={p:r[p],s:i[p],cNext:m},e._base[p]=-.5*c.s,o&&(v[p].orig_p=n[p],v[p][u+"End"]=a.ends[p],v[p][u+"Start"]=a.starts[p]),e.ids&&(c.id=String(e.ids[p])),p===0&&(v[0].vTotal=0),v[0].vTotal+=d(c.s),c.begR=d(c.s)/d(v[0].s)}for(p=0;p<y;p++)(c=v[p]).s!==b&&(c.sumR=c.s/v[0].vTotal,c.difR=f!==void 0?c.s/f:1,f=c.s);return l(v,e),T(v,e),v}},18517:function(Q){Q.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},8984:function(Q,z,t){var S=t(11661).setGroupPositions;Q.exports=function(k,l){var T,b,d=k._fullLayout,s=k._fullData,e=k.calcdata,i=l.xaxis,r=l.yaxis,n=[],a=[],o=[];for(b=0;b<s.length;b++){var u=s[b],p=u.orientation==="h";u.visible===!0&&u.xaxis===i._id&&u.yaxis===r._id&&u.type==="funnel"&&(T=e[b],p?o.push(T):a.push(T),n.push(T))}var c={mode:d.funnelmode,norm:d.funnelnorm,gap:d.funnelgap,groupgap:d.funnelgroupgap};for(S(k,i,r,a,c),S(k,r,i,o,c),b=0;b<n.length;b++){T=n[b];for(var x=0;x<T.length;x++)x+1<T.length&&(T[x].nextP0=T[x+1].p0,T[x].nextS0=T[x+1].s0,T[x].nextP1=T[x+1].p1,T[x].nextS1=T[x+1].s1)}}},26199:function(Q,z,t){var S=t(71828),k=t(26125),l=t(90769).handleText,T=t(67513),b=t(73927),d=t(1285),s=t(7901);Q.exports={supplyDefaults:function(e,i,r,n){function a(c,x){return S.coerce(e,i,d,c,x)}if(T(e,i,n,a)){b(e,i,n,a),a("xhoverformat"),a("yhoverformat"),a("orientation",i.y&&!i.x?"v":"h"),a("offset"),a("width");var o=a("text");a("hovertext"),a("hovertemplate");var u=a("textposition");l(e,i,n,a,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i.textposition==="none"||i.texttemplate||a("textinfo",Array.isArray(o)?"text+value":"value");var p=a("marker.color",r);a("marker.line.color",s.defaultLine),a("marker.line.width"),a("connector.visible")&&(a("connector.fillcolor",function(c){var x=S.isArrayOrTypedArray(c)?"#000":c;return s.addOpacity(x,.5*s.opacity(x))}(p)),a("connector.line.width")&&(a("connector.line.color"),a("connector.line.dash")))}else i.visible=!1},crossTraceDefaults:function(e,i){var r,n;function a(u){return S.coerce(n._input,n,d,u)}if(i.funnelmode==="group")for(var o=0;o<e.length;o++)r=(n=e[o])._input,k(r,n,i,a)}}},34598:function(Q){Q.exports=function(z,t){return z.x="xVal"in t?t.xVal:t.x,z.y="yVal"in t?t.yVal:t.y,"percentInitial"in t&&(z.percentInitial=t.percentInitial),"percentPrevious"in t&&(z.percentPrevious=t.percentPrevious),"percentTotal"in t&&(z.percentTotal=t.percentTotal),t.xa&&(z.xaxis=t.xa),t.ya&&(z.yaxis=t.ya),z}},63341:function(Q,z,t){var S=t(7901).opacity,k=t(95423).hoverOnBars,l=t(71828).formatPercent;Q.exports=function(T,b,d,s,e){var i=k(T,b,d,s,e);if(i){var r=i.cd,n=r[0].trace,a=n.orientation==="h",o=r[i.index];i[(a?"x":"y")+"LabelVal"]=o.s,i.percentInitial=o.begR,i.percentInitialLabel=l(o.begR,1),i.percentPrevious=o.difR,i.percentPreviousLabel=l(o.difR,1),i.percentTotal=o.sumR,i.percentTotalLabel=l(o.sumR,1);var u=o.hi||n.hoverinfo,p=[];if(u&&u!=="none"&&u!=="skip"){var c=u==="all",x=u.split("+"),g=function(f){return c||x.indexOf(f)!==-1};g("percent initial")&&p.push(i.percentInitialLabel+" of initial"),g("percent previous")&&p.push(i.percentPreviousLabel+" of previous"),g("percent total")&&p.push(i.percentTotalLabel+" of total")}return i.extraText=p.join("<br>"),i.color=function(f,y){var v=f.marker,m=y.mc||v.color,_=y.mlc||v.line.color,h=y.mlw||v.line.width;return S(m)?m:S(_)&&h?_:void 0}(n,o),[i]}}},51759:function(Q,z,t){Q.exports={attributes:t(1285),layoutAttributes:t(10440),supplyDefaults:t(26199).supplyDefaults,crossTraceDefaults:t(26199).crossTraceDefaults,supplyLayoutDefaults:t(93138),calc:t(9532),crossTraceCalc:t(8984),plot:t(80461),style:t(68266).style,hoverPoints:t(63341),eventData:t(34598),selectPoints:t(81974),moduleType:"trace",name:"funnel",basePlotModule:t(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},10440:function(Q){Q.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},93138:function(Q,z,t){var S=t(71828),k=t(10440);Q.exports=function(l,T,b){var d=!1;function s(r,n){return S.coerce(l,T,k,r,n)}for(var e=0;e<b.length;e++){var i=b[e];if(i.visible&&i.type==="funnel"){d=!0;break}}d&&(s("funnelmode"),s("funnelgap",.2),s("funnelgroupgap"))}},80461:function(Q,z,t){var S=t(39898),k=t(71828),l=t(91424),T=t(50606).BADNUM,b=t(17295),d=t(72597).clearMinTextSize;function s(e,i,r,n){var a=[],o=[],u=n?i:r,p=n?r:i;return a[0]=u.c2p(e.s0,!0),o[0]=p.c2p(e.p0,!0),a[1]=u.c2p(e.s1,!0),o[1]=p.c2p(e.p1,!0),a[2]=u.c2p(e.nextS0,!0),o[2]=p.c2p(e.nextP0,!0),a[3]=u.c2p(e.nextS1,!0),o[3]=p.c2p(e.nextP1,!0),n?[a,o]:[o,a]}Q.exports=function(e,i,r,n){var a=e._fullLayout;d("funnel",a),function(o,u,p,c){var x=u.xaxis,g=u.yaxis;k.makeTraceGroups(c,p,"trace bars").each(function(f){var y=S.select(this),v=f[0].trace,m=k.ensureSingle(y,"g","regions");if(v.connector&&v.connector.visible){var _=v.orientation==="h",h=m.selectAll("g.region").data(k.identity);h.enter().append("g").classed("region",!0),h.exit().remove();var A=h.size();h.each(function(w,E){if(E===A-1||w.cNext){var L=s(w,x,g,_),C=L[0],P=L[1],D="";C[0]!==T&&P[0]!==T&&C[1]!==T&&P[1]!==T&&C[2]!==T&&P[2]!==T&&C[3]!==T&&P[3]!==T&&(D+=_?"M"+C[0]+","+P[1]+"L"+C[2]+","+P[2]+"H"+C[3]+"L"+C[1]+","+P[1]+"Z":"M"+C[1]+","+P[1]+"L"+C[2]+","+P[3]+"V"+P[2]+"L"+C[1]+","+P[0]+"Z"),D===""&&(D="M0,0Z"),k.ensureSingle(S.select(this),"path").attr("d",D).call(l.setClipUrl,u.layerClipId,o)}})}else m.remove()})}(e,i,r,n),function(o,u,p,c){var x=u.xaxis,g=u.yaxis;k.makeTraceGroups(c,p,"trace bars").each(function(f){var y=S.select(this),v=f[0].trace,m=k.ensureSingle(y,"g","lines");if(v.connector&&v.connector.visible&&v.connector.line.width){var _=v.orientation==="h",h=m.selectAll("g.line").data(k.identity);h.enter().append("g").classed("line",!0),h.exit().remove();var A=h.size();h.each(function(w,E){if(E===A-1||w.cNext){var L=s(w,x,g,_),C=L[0],P=L[1],D="";C[3]!==void 0&&P[3]!==void 0&&(_?(D+="M"+C[0]+","+P[1]+"L"+C[2]+","+P[2],D+="M"+C[1]+","+P[1]+"L"+C[3]+","+P[2]):(D+="M"+C[1]+","+P[1]+"L"+C[2]+","+P[3],D+="M"+C[1]+","+P[0]+"L"+C[2]+","+P[2])),D===""&&(D="M0,0Z"),k.ensureSingle(S.select(this),"path").attr("d",D).call(l.setClipUrl,u.layerClipId,o)}})}else m.remove()})}(e,i,r,n),b.plot(e,i,r,n,{mode:a.funnelmode,norm:a.funnelmode,gap:a.funnelgap,groupgap:a.funnelgroupgap})}},68266:function(Q,z,t){var S=t(39898),k=t(91424),l=t(7901),T=t(37822).DESELECTDIM,b=t(16688),d=t(72597).resizeText,s=b.styleTextPoints;Q.exports={style:function(e,i,r){var n=r||S.select(e).selectAll("g.funnellayer").selectAll("g.trace");d(e,n,"funnel"),n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var o=S.select(this),u=a[0].trace;o.selectAll(".point > path").each(function(p){if(!p.isBlank){var c=u.marker;S.select(this).call(l.fill,p.mc||c.color).call(l.stroke,p.mlc||c.line.color).call(k.dashLine,c.line.dash,p.mlw||c.line.width).style("opacity",u.selectedpoints&&!p.selected?T:1)}}),s(o,u,e),o.selectAll(".regions").each(function(){S.select(this).selectAll("path").style("stroke-width",0).call(l.fill,u.connector.fillcolor)}),o.selectAll(".lines").each(function(){var p=u.connector.line;k.lineGroupStyle(S.select(this).selectAll("path"),p.width,p.color,p.dash)})})}}},86807:function(Q,z,t){var S=t(34e3),k=t(9012),l=t(27670).Y,T=t(5386).fF,b=t(5386).si,d=t(1426).extendFlat;Q.exports={labels:S.labels,label0:S.label0,dlabel:S.dlabel,values:S.values,marker:{colors:S.marker.colors,line:{color:d({},S.marker.line.color,{dflt:null}),width:d({},S.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:S.text,hovertext:S.hovertext,scalegroup:d({},S.scalegroup,{}),textinfo:d({},S.textinfo,{flags:["label","text","value","percent"]}),texttemplate:b({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:d({},k.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","text","percent"]}),textposition:d({},S.textposition,{values:["inside","none"],dflt:"inside"}),textfont:S.textfont,insidetextfont:S.insidetextfont,title:{text:S.title.text,font:S.title.font,position:d({},S.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:l({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},6452:function(Q,z,t){var S=t(74875);z.name="funnelarea",z.plot=function(k,l,T,b){S.plotBasePlot(z.name,k,l,T,b)},z.clean=function(k,l,T,b){S.cleanBasePlot(z.name,k,l,T,b)}},89574:function(Q,z,t){var S=t(32354);Q.exports={calc:function(k,l){return S.calc(k,l)},crossTraceCalc:function(k){S.crossTraceCalc(k,{type:"funnelarea"})}}},86282:function(Q,z,t){var S=t(71828),k=t(86807),l=t(27670).c,T=t(90769).handleText,b=t(37434).handleLabelsAndValues;Q.exports=function(d,s,e,i){function r(f,y){return S.coerce(d,s,k,f,y)}var n=r("labels"),a=r("values"),o=b(n,a),u=o.len;if(s._hasLabels=o.hasLabels,s._hasValues=o.hasValues,!s._hasLabels&&s._hasValues&&(r("label0"),r("dlabel")),u){s._length=u,r("marker.line.width")&&r("marker.line.color",i.paper_bgcolor),r("marker.colors"),r("scalegroup");var p,c=r("text"),x=r("texttemplate");if(x||(p=r("textinfo",Array.isArray(c)?"text+percent":"percent")),r("hovertext"),r("hovertemplate"),x||p&&p!=="none"){var g=r("textposition");T(d,s,i,r,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}l(s,i,r),r("title.text")&&(r("title.position"),S.coerceFont(r,"title.font",i.font)),r("aspectratio"),r("baseratio")}else s.visible=!1}},10421:function(Q,z,t){Q.exports={moduleType:"trace",name:"funnelarea",basePlotModule:t(6452),categories:["pie-like","funnelarea","showLegend"],attributes:t(86807),layoutAttributes:t(80097),supplyDefaults:t(86282),supplyLayoutDefaults:t(57402),calc:t(89574).calc,crossTraceCalc:t(89574).crossTraceCalc,plot:t(79187),style:t(71858),styleOne:t(63463),meta:{}}},80097:function(Q,z,t){var S=t(92774).hiddenlabels;Q.exports={hiddenlabels:S,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57402:function(Q,z,t){var S=t(71828),k=t(80097);Q.exports=function(l,T){function b(d,s){return S.coerce(l,T,k,d,s)}b("hiddenlabels"),b("funnelareacolorway",T.colorway),b("extendfunnelareacolors")}},79187:function(Q,z,t){var S=t(39898),k=t(91424),l=t(71828),T=l.strScale,b=l.strTranslate,d=t(63893),s=t(17295).toMoveInsideBar,e=t(72597),i=e.recordMinTextSize,r=e.clearMinTextSize,n=t(53581),a=t(14575),o=a.attachFxHandlers,u=a.determineInsideTextFont,p=a.layoutAreas,c=a.prerenderTitles,x=a.positionTitleOutside,g=a.formatSliceLabel;function f(y,v){return"l"+(v[0]-y[0])+","+(v[1]-y[1])}Q.exports=function(y,v){var m=y._context.staticPlot,_=y._fullLayout;r("funnelarea",_),c(v,y),p(v,_._size),l.makeTraceGroups(_._funnelarealayer,v,"trace").each(function(h){var A=S.select(this),w=h[0],E=w.trace;(function(L){if(L.length){var C=L[0],P=C.trace,D=P.aspectratio,G=P.baseratio;G>.999&&(G=.999);var I,H,N,F=Math.pow(G,2),V=C.vTotal,q=V,te=V*F/(1-F)/V,$=[];for($.push(Te()),H=L.length-1;H>-1;H--)if(!(N=L[H]).hidden){var W=N.v/q;te+=W,$.push(Te())}var Z=1/0,J=-1/0;for(H=0;H<$.length;H++)I=$[H],Z=Math.min(Z,I[1]),J=Math.max(J,I[1]);for(H=0;H<$.length;H++)$[H][1]-=(J+Z)/2;var ee=$[$.length-1][0],re=C.r,ae=(J-Z)/2,oe=re/ee,ce=re/ae*D;for(C.r=ce*ae,H=0;H<$.length;H++)$[H][0]*=oe,$[H][1]*=ce;var pe,ve,we=[-(I=$[0])[0],I[1]],xe=[I[0],I[1]],ge=0;for(H=L.length-1;H>-1;H--)if(!(N=L[H]).hidden){var Oe=$[ge+=1][0],Ae=$[ge][1];N.TL=[-Oe,Ae],N.TR=[Oe,Ae],N.BL=we,N.BR=xe,N.pxmid=(pe=N.TR,ve=N.BR,[.5*(pe[0]+ve[0]),.5*(pe[1]+ve[1])]),we=N.TL,xe=N.TR}}function Te(){var se,le={x:se=Math.sqrt(te),y:-se};return[le.x,le.y]}})(h),A.each(function(){var L=S.select(this).selectAll("g.slice").data(h);L.enter().append("g").classed("slice",!0),L.exit().remove(),L.each(function(P,D){if(P.hidden)S.select(this).selectAll("path,g").remove();else{P.pointNumber=P.i,P.curveNumber=E.index;var G=w.cx,I=w.cy,H=S.select(this),N=H.selectAll("path.surface").data([P]);N.enter().append("path").classed("surface",!0).style({"pointer-events":m?"none":"all"}),H.call(o,y,h);var F="M"+(G+P.TR[0])+","+(I+P.TR[1])+f(P.TR,P.BR)+f(P.BR,P.BL)+f(P.BL,P.TL)+"Z";N.attr("d",F),g(y,P,w);var V=n.castOption(E.textposition,P.pts),q=H.selectAll("g.slicetext").data(P.text&&V!=="none"?[0]:[]);q.enter().append("g").classed("slicetext",!0),q.exit().remove(),q.each(function(){var te=l.ensureSingle(S.select(this),"text","",function(oe){oe.attr("data-notex",1)}),$=l.ensureUniformFontSize(y,u(E,P,_.font));te.text(P.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(k.font,$).call(d.convertToTspans,y);var W,Z,J,ee=k.bBox(te.node()),re=Math.min(P.BL[1],P.BR[1])+I,ae=Math.max(P.TL[1],P.TR[1])+I;Z=Math.max(P.TL[0],P.BL[0])+G,J=Math.min(P.TR[0],P.BR[0])+G,(W=s(Z,J,re,ae,ee,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=$.size,i(E.type,W,_),h[D].transform=W,l.setTransormAndDisplay(te,W)})}});var C=S.select(this).selectAll("g.titletext").data(E.title.text?[0]:[]);C.enter().append("g").classed("titletext",!0),C.exit().remove(),C.each(function(){var P=l.ensureSingle(S.select(this),"text","",function(I){I.attr("data-notex",1)}),D=E.title.text;E._meta&&(D=l.templateString(D,E._meta)),P.text(D).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(k.font,E.title.font).call(d.convertToTspans,y);var G=x(w,_._size);P.attr("transform",b(G.x,G.y)+T(Math.min(1,G.scale))+b(G.tx,G.ty))})})})}},71858:function(Q,z,t){var S=t(39898),k=t(63463),l=t(72597).resizeText;Q.exports=function(T){var b=T._fullLayout._funnelarealayer.selectAll(".trace");l(T,b,"funnelarea"),b.each(function(d){var s=d[0].trace,e=S.select(this);e.style({opacity:s.opacity}),e.selectAll("path.surface").each(function(i){S.select(this).call(k,i,s)})})}},21606:function(Q,z,t){var S=t(82196),k=t(9012),l=t(41940),T=t(12663).axisHoverFormat,b=t(5386).fF,d=t(5386).si,s=t(50693),e=t(1426).extendFlat;Q.exports=e({z:{valType:"data_array",editType:"calc"},x:e({},S.x,{impliedEdits:{xtype:"array"}}),x0:e({},S.x0,{impliedEdits:{xtype:"scaled"}}),dx:e({},S.dx,{impliedEdits:{xtype:"scaled"}}),y:e({},S.y,{impliedEdits:{ytype:"array"}}),y0:e({},S.y0,{impliedEdits:{ytype:"scaled"}}),dy:e({},S.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:e({},S.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:e({},S.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:e({},S.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:e({},S.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:e({},S.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:e({},S.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:b(),texttemplate:d({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:l({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:e({},k.showlegend,{dflt:!1})},{transforms:void 0},s("",{cLetter:"z",autoColorDflt:!1}))},90757:function(Q,z,t){var S=t(73972),k=t(71828),l=t(89298),T=t(42973),b=t(17562),d=t(78803),s=t(68296),e=t(4742),i=t(824),r=t(43907),n=t(70769),a=t(50606).BADNUM;function o(u){for(var p=[],c=u.length,x=0;x<c;x++){var g=u[x];g!==a&&p.push(g)}return p}Q.exports=function(u,p){var c,x,g,f,y,v,m,_,h,A,w,E=l.getFromId(u,p.xaxis||"x"),L=l.getFromId(u,p.yaxis||"y"),C=S.traceIs(p,"contour"),P=S.traceIs(p,"histogram"),D=S.traceIs(p,"gl2d"),G=C?"best":p.zsmooth;if(E._minDtick=0,L._minDtick=0,P)f=(w=b(u,p)).orig_x,c=w.x,x=w.x0,g=w.dx,_=w.orig_y,y=w.y,v=w.y0,m=w.dy,h=w.z;else{var I=p.z;k.isArray1D(I)?(s(p,E,L,"x","y",["z"]),c=p._x,y=p._y,I=p._z):(f=p.x?E.makeCalcdata(p,"x"):[],_=p.y?L.makeCalcdata(p,"y"):[],c=T(p,E,"x",f).vals,y=T(p,L,"y",_).vals,p._x=c,p._y=y),x=p.x0,g=p.dx,v=p.y0,m=p.dy,h=e(I,p,E,L)}function H(J){G=p._input.zsmooth=p.zsmooth=!1,k.warn('cannot use zsmooth: "fast": '+J)}function N(J){if(J.length>1){var ee=(J[J.length-1]-J[0])/(J.length-1),re=Math.abs(ee/100);for(A=0;A<J.length-1;A++)if(Math.abs(J[A+1]-J[A]-ee)>re)return!1}return!0}(E.rangebreaks||L.rangebreaks)&&(h=function(J,ee,re){for(var ae=[],oe=-1,ce=0;ce<re.length;ce++)if(ee[ce]!==a){ae[++oe]=[];for(var pe=0;pe<re[ce].length;pe++)J[pe]!==a&&ae[oe].push(re[ce][pe])}return ae}(c,y,h),P||(c=o(c),y=o(y),p._x=c,p._y=y)),P||!C&&!p.connectgaps||(p._emptypoints=r(h),i(h,p._emptypoints)),p._islinear=!1,E.type==="log"||L.type==="log"?G==="fast"&&H("log axis found"):N(c)?N(y)?p._islinear=!0:G==="fast"&&H("y scale is not linear"):G==="fast"&&H("x scale is not linear");var F=k.maxRowLength(h),V=p.xtype==="scaled"?"":c,q=n(p,V,x,g,F,E),te=p.ytype==="scaled"?"":y,$=n(p,te,v,m,h.length,L);D||(p._extremes[E._id]=l.findExtremes(E,q),p._extremes[L._id]=l.findExtremes(L,$));var W={x:q,y:$,z:h,text:p._text||p.text,hovertext:p._hovertext||p.hovertext};if(p.xperiodalignment&&f&&(W.orig_x=f),p.yperiodalignment&&_&&(W.orig_y=_),V&&V.length===q.length-1&&(W.xCenter=V),te&&te.length===$.length-1&&(W.yCenter=te),P&&(W.xRanges=w.xRanges,W.yRanges=w.yRanges,W.pts=w.pts),C||d(u,p,{vals:h,cLetter:"z"}),C&&p.contours&&p.contours.coloring==="heatmap"){var Z={type:p.type==="contour"?"heatmap":"histogram2d",xcalendar:p.xcalendar,ycalendar:p.ycalendar};W.xfill=n(Z,V,x,g,F,E),W.yfill=n(Z,te,v,m,h.length,L)}return[W]}},4742:function(Q,z,t){var S=t(92770),k=t(71828),l=t(50606).BADNUM;Q.exports=function(T,b,d,s){var e,i,r,n,a,o;function u(y){if(S(y))return+y}if(b&&b.transpose){for(e=0,a=0;a<T.length;a++)e=Math.max(e,T[a].length);if(e===0)return!1;r=function(y){return y.length},n=function(y,v,m){return(y[m]||[])[v]}}else e=T.length,r=function(y,v){return y[v].length},n=function(y,v,m){return(y[v]||[])[m]};var p=function(y,v,m){return v===l||m===l?l:n(y,v,m)};function c(y){if(b&&b.type!=="carpet"&&b.type!=="contourcarpet"&&y&&y.type==="category"&&b["_"+y._id.charAt(0)].length){var v=y._id.charAt(0),m={},_=b["_"+v+"CategoryMap"]||b[v];for(a=0;a<_.length;a++)m[_[a]]=a;return function(h){var A=m[y._categories[h]];return A+1?A:l}}return k.identity}var x=c(d),g=c(s);s&&s.type==="category"&&(e=s._categories.length);var f=new Array(e);for(a=0;a<e;a++)for(i=d&&d.type==="category"?d._categories.length:r(T,a),f[a]=new Array(i),o=0;o<i;o++)f[a][o]=u(p(T,g(a),x(o)));return f}},61243:function(Q){Q.exports={min:"zmin",max:"zmax"}},68296:function(Q,z,t){var S=t(71828),k=t(50606).BADNUM,l=t(42973);Q.exports=function(T,b,d,s,e,i){var r=T._length,n=b.makeCalcdata(T,s),a=d.makeCalcdata(T,e);n=l(T,b,s,n).vals,a=l(T,d,e,a).vals;var o,u,p,c,x=T.text,g=x!==void 0&&S.isArray1D(x),f=T.hovertext,y=f!==void 0&&S.isArray1D(f),v=S.distinctVals(n),m=v.vals,_=S.distinctVals(a),h=_.vals,A=[],w=h.length,E=m.length;for(o=0;o<i.length;o++)A[o]=S.init2dArray(w,E);g&&(p=S.init2dArray(w,E)),y&&(c=S.init2dArray(w,E));var L=S.init2dArray(w,E);for(o=0;o<r;o++)if(n[o]!==k&&a[o]!==k){var C=S.findBin(n[o]+v.minDiff/2,m),P=S.findBin(a[o]+_.minDiff/2,h);for(u=0;u<i.length;u++){var D=T[i[u]];A[u][P][C]=D[o],L[P][C]=o}g&&(p[P][C]=x[o]),y&&(c[P][C]=f[o])}for(T["_"+s]=m,T["_"+e]=h,u=0;u<i.length;u++)T["_"+i[u]]=A[u];g&&(T._text=p),y&&(T._hovertext=c),b&&b.type==="category"&&(T["_"+s+"CategoryMap"]=m.map(function(G){return b._categories[G]})),d&&d.type==="category"&&(T["_"+e+"CategoryMap"]=h.map(function(G){return d._categories[G]})),T._after2before=L}},76382:function(Q,z,t){var S=t(71828),k=t(67684),l=t(58623),T=t(73927),b=t(49901),d=t(1586),s=t(21606);Q.exports=function(e,i,r,n){function a(o,u){return S.coerce(e,i,s,o,u)}k(e,i,a,n)?(T(e,i,n,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hovertemplate"),l(a,n),b(e,i,a,n),a("hoverongaps"),a("connectgaps",S.isArray1D(i.z)&&i.zsmooth!==!1),d(e,i,n,a,{prefix:"",cLetter:"z"})):i.visible=!1}},43907:function(Q,z,t){var S=t(71828).maxRowLength;Q.exports=function(k){var l,T,b,d,s,e,i,r,n=[],a={},o=[],u=k[0],p=[],c=[0,0,0],x=S(k);for(T=0;T<k.length;T++)for(l=p,p=u,u=k[T+1]||[],b=0;b<x;b++)p[b]===void 0&&((e=(p[b-1]!==void 0?1:0)+(p[b+1]!==void 0?1:0)+(l[b]!==void 0?1:0)+(u[b]!==void 0?1:0))?(T===0&&e++,b===0&&e++,T===k.length-1&&e++,b===p.length-1&&e++,e<4&&(a[[T,b]]=[T,b,e]),n.push([T,b,e])):o.push([T,b]));for(;o.length;){for(i={},r=!1,s=o.length-1;s>=0;s--)(e=((a[[(T=(d=o[s])[0])-1,b=d[1]]]||c)[2]+(a[[T+1,b]]||c)[2]+(a[[T,b-1]]||c)[2]+(a[[T,b+1]]||c)[2])/20)&&(i[d]=[T,b,e],o.splice(s,1),r=!0);if(!r)throw"findEmpties iterated with no new neighbors";for(d in i)a[d]=i[d],n.push(i[d])}return n.sort(function(g,f){return f[2]-g[2]})}},46248:function(Q,z,t){var S=t(30211),k=t(71828),l=t(89298),T=t(21081).extractOpts;Q.exports=function(b,d,s,e,i){i||(i={});var r,n,a,o,u=i.isContour,p=b.cd[0],c=p.trace,x=b.xa,g=b.ya,f=p.x,y=p.y,v=p.z,m=p.xCenter,_=p.yCenter,h=p.zmask,A=c.zhoverformat,w=f,E=y;if(b.index!==!1){try{a=Math.round(b.index[1]),o=Math.round(b.index[0])}catch{return void k.error("Error hovering on heatmap, pointNumber must be [row,col], found:",b.index)}if(a<0||a>=v[0].length||o<0||o>v.length)return}else{if(S.inbox(d-f[0],d-f[f.length-1],0)>0||S.inbox(s-y[0],s-y[y.length-1],0)>0)return;if(u){var L;for(w=[2*f[0]-f[1]],L=1;L<f.length;L++)w.push((f[L]+f[L-1])/2);for(w.push([2*f[f.length-1]-f[f.length-2]]),E=[2*y[0]-y[1]],L=1;L<y.length;L++)E.push((y[L]+y[L-1])/2);E.push([2*y[y.length-1]-y[y.length-2]])}a=Math.max(0,Math.min(w.length-2,k.findBin(d,w))),o=Math.max(0,Math.min(E.length-2,k.findBin(s,E)))}var C,P,D=x.c2p(f[a]),G=x.c2p(f[a+1]),I=g.c2p(y[o]),H=g.c2p(y[o+1]);u?(C=p.orig_x||f,P=p.orig_y||y,G=D,r=C[a],H=I,n=P[o]):(C=p.orig_x||m||f,P=p.orig_y||_||y,r=m?C[a]:(C[a]+C[a+1])/2,n=_?P[o]:(P[o]+P[o+1])/2,x&&x.type==="category"&&(r=f[a]),g&&g.type==="category"&&(n=y[o]),c.zsmooth&&(D=G=x.c2p(r),I=H=g.c2p(n)));var N=v[o][a];if(h&&!h[o][a]&&(N=void 0),N!==void 0||c.hoverongaps){var F;Array.isArray(p.hovertext)&&Array.isArray(p.hovertext[o])?F=p.hovertext[o][a]:Array.isArray(p.text)&&Array.isArray(p.text[o])&&(F=p.text[o][a]);var V=T(c),q={type:"linear",range:[V.min,V.max],hoverformat:A,_separators:x._separators,_numFormat:x._numFormat},te=l.tickText(q,N,"hover").text;return[k.extendFlat(b,{index:c._after2before?c._after2before[o][a]:[o,a],distance:b.maxHoverDistance,spikeDistance:b.maxSpikeDistance,x0:D,x1:G,y0:I,y1:H,xLabelVal:r,yLabelVal:n,zLabelVal:N,zLabel:te,text:F})]}}},92165:function(Q,z,t){Q.exports={attributes:t(21606),supplyDefaults:t(76382),calc:t(90757),plot:t(50347),colorbar:t(61243),style:t(70035),hoverPoints:t(46248),moduleType:"trace",name:"heatmap",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},824:function(Q,z,t){var S=t(71828),k=[[-1,0],[1,0],[0,-1],[0,1]];function l(b){return .5-.25*Math.min(1,.5*b)}function T(b,d,s){var e,i,r,n,a,o,u,p,c,x,g,f,y,v=0;for(n=0;n<d.length;n++){for(i=(e=d[n])[0],r=e[1],g=b[i][r],x=0,c=0,a=0;a<4;a++)(u=b[i+(o=k[a])[0]])&&(p=u[r+o[1]])!==void 0&&(x===0?f=y=p:(f=Math.min(f,p),y=Math.max(y,p)),c++,x+=p);if(c===0)throw"iterateInterp2d order is wrong: no defined neighbors";b[i][r]=x/c,g===void 0?c<4&&(v=1):(b[i][r]=(1+s)*b[i][r]-s*g,y>f&&(v=Math.max(v,Math.abs(b[i][r]-g)/(y-f))))}return v}Q.exports=function(b,d){var s,e=1;for(T(b,d),s=0;s<d.length&&!(d[s][2]<4);s++);for(d=d.slice(s),s=0;s<100&&e>.01;s++)e=T(b,d,l(e));return e>.01&&S.log("interp2d didn't converge quickly",e),b}},58623:function(Q,z,t){var S=t(71828);Q.exports=function(k,l){k("texttemplate");var T=S.extendFlat({},l.font,{color:"auto",size:"auto"});S.coerceFont(k,"textfont",T)}},70769:function(Q,z,t){var S=t(73972),k=t(71828).isArrayOrTypedArray;Q.exports=function(l,T,b,d,s,e){var i,r,n,a=[],o=S.traceIs(l,"contour"),u=S.traceIs(l,"histogram"),p=S.traceIs(l,"gl2d");if(k(T)&&T.length>1&&!u&&e.type!=="category"){var c=T.length;if(!(c<=s))return o?T.slice(0,s):T.slice(0,s+1);if(o||p)a=T.slice(0,s);else if(s===1)a=[T[0]-.5,T[0]+.5];else{for(a=[1.5*T[0]-.5*T[1]],n=1;n<c;n++)a.push(.5*(T[n-1]+T[n]));a.push(1.5*T[c-1]-.5*T[c-2])}if(c<s){var x=a[a.length-1],g=x-a[a.length-2];for(n=c;n<s;n++)x+=g,a.push(x)}}else{var f=l[e._id.charAt(0)+"calendar"];for(i=u?e.r2c(b,0,f):k(T)&&T.length===1?T[0]:b===void 0?0:(e.type==="log"?e.d2c:e.r2c)(b,0,f),r=d||1,n=o||p?0:-.5;n<s;n++)a.push(i+r*n)}return a}},50347:function(Q,z,t){var S=t(39898),k=t(84267),l=t(73972),T=t(91424),b=t(89298),d=t(71828),s=t(63893),e=t(8225),i=t(7901),r=t(21081).extractOpts,n=t(21081).makeColorScaleFuncFromTrace,a=t(77922),o=t(18783).LINE_SPACING,u=t(3883),p=t(32396).STYLE,c="heatmap-label";function x(m){return m.selectAll("g."+c)}function g(m){x(m).remove()}function f(m,_){var h=_.length-2,A=d.constrain(d.findBin(m,_),0,h),w=_[A],E=_[A+1],L=d.constrain(A+(m-w)/(E-w)-.5,0,h),C=Math.round(L),P=Math.abs(L-C);return L&&L!==h&&P?{bin0:C,frac:P,bin1:Math.round(C+P/(L-C))}:{bin0:C,bin1:C,frac:0}}function y(m,_){var h=_.length-1,A=d.constrain(d.findBin(m,_),0,h),w=_[A],E=(m-w)/(_[A+1]-w)||0;return E<=0?{bin0:A,bin1:A,frac:0}:E<.5?{bin0:A,bin1:A+1,frac:E}:{bin0:A+1,bin1:A,frac:1-E}}function v(m,_,h){m[_]=h[0],m[_+1]=h[1],m[_+2]=h[2],m[_+3]=Math.round(255*h[3])}Q.exports=function(m,_,h,A){var w=_.xaxis,E=_.yaxis;d.makeTraceGroups(A,h,"hm").each(function(L){var C,P,D,G,I,H,N,F,V=S.select(this),q=L[0],te=q.trace,$=te.xgap||0,W=te.ygap||0,Z=q.z,J=q.x,ee=q.y,re=q.xCenter,ae=q.yCenter,oe=l.traceIs(te,"contour"),ce=oe?"best":te.zsmooth,pe=Z.length,ve=d.maxRowLength(Z),we=!1,xe=!1;for(H=0;C===void 0&&H<J.length-1;)C=w.c2p(J[H]),H++;for(H=J.length-1;P===void 0&&H>0;)P=w.c2p(J[H]),H--;for(P<C&&(D=P,P=C,C=D,we=!0),H=0;G===void 0&&H<ee.length-1;)G=E.c2p(ee[H]),H++;for(H=ee.length-1;I===void 0&&H>0;)I=E.c2p(ee[H]),H--;I<G&&(D=G,G=I,I=D,xe=!0),oe&&(re=J,ae=ee,J=q.xfill,ee=q.yfill);var ge="default";if(ce?ge=ce==="best"?"smooth":"fast":te._islinear&&$===0&&W===0&&u()&&(ge="fast"),ge!=="fast"){var Oe=ce==="best"?0:.5;C=Math.max(-Oe*w._length,C),P=Math.min((1+Oe)*w._length,P),G=Math.max(-Oe*E._length,G),I=Math.min((1+Oe)*E._length,I)}var Ae,Te,se=Math.round(P-C),le=Math.round(I-G);if(C>=w._length||P<=0||G>=E._length||I<=0)return V.selectAll("image").data([]).exit().remove(),void g(V);ge==="fast"?(Ae=ve,Te=pe):(Ae=se,Te=le);var ne=document.createElement("canvas");ne.width=Ae,ne.height=Te;var me,Ee,be=ne.getContext("2d"),De=n(te,{noNumericCheck:!0,returnArray:!0});ge==="fast"?(me=we?function(Bt){return ve-1-Bt}:d.identity,Ee=xe?function(Bt){return pe-1-Bt}:d.identity):(me=function(Bt){return d.constrain(Math.round(w.c2p(J[Bt])-C),0,se)},Ee=function(Bt){return d.constrain(Math.round(E.c2p(ee[Bt])-G),0,le)});var Ue,he,ke,_e,Ce=Ee(0),Fe=[Ce,Ce],Re=we?0:1,He=xe?0:1,Ge=0,$e=0,st=0,Ke=0;function gt(Bt,tn){if(Bt!==void 0){var cn=De(Bt);return cn[0]=Math.round(cn[0]),cn[1]=Math.round(cn[1]),cn[2]=Math.round(cn[2]),Ge+=tn,$e+=cn[0]*tn,st+=cn[1]*tn,Ke+=cn[2]*tn,cn}return[0,0,0,0]}function mt(Bt,tn,cn,gn){var kn=Bt[cn.bin0];if(kn===void 0)return gt(void 0,1);var Vn,In=Bt[cn.bin1],Dn=tn[cn.bin0],Kn=tn[cn.bin1],Ut=In-kn||0,bn=Dn-kn||0;return Vn=In===void 0?Kn===void 0?0:Dn===void 0?2*(Kn-kn):2*(2*Kn-Dn-kn)/3:Kn===void 0?Dn===void 0?0:2*(2*kn-In-Dn)/3:Dn===void 0?2*(2*Kn-In-kn)/3:Kn+kn-In-Dn,gt(kn+cn.frac*Ut+gn.frac*(bn+cn.frac*Vn))}if(ge!=="default"){var at,rt=0;try{at=new Uint8Array(Ae*Te*4)}catch{at=new Array(Ae*Te*4)}if(ge==="smooth"){var xt,Tt,wt,Ot=re||J,Ct=ae||ee,Ye=new Array(Ot.length),Xe=new Array(Ct.length),Ve=new Array(se),We=re?y:f,nt=ae?y:f;for(H=0;H<Ot.length;H++)Ye[H]=Math.round(w.c2p(Ot[H])-C);for(H=0;H<Ct.length;H++)Xe[H]=Math.round(E.c2p(Ct[H])-G);for(H=0;H<se;H++)Ve[H]=We(H,Ye);for(N=0;N<le;N++)for(Tt=Z[(xt=nt(N,Xe)).bin0],wt=Z[xt.bin1],H=0;H<se;H++,rt+=4)v(at,rt,_e=mt(Tt,wt,Ve[H],xt))}else for(N=0;N<pe;N++)for(ke=Z[N],Fe=Ee(N),H=0;H<ve;H++)_e=gt(ke[H],1),v(at,rt=4*(Fe*ve+me(H)),_e);var ot=be.createImageData(Ae,Te);try{ot.data.set(at)}catch{var Ie=ot.data,ze=Ie.length;for(N=0;N<ze;N++)Ie[N]=at[N]}be.putImageData(ot,0,0)}else{var et=Math.floor($/2),tt=Math.floor(W/2);for(N=0;N<pe;N++)if(ke=Z[N],Fe.reverse(),Fe[He]=Ee(N+1),Fe[0]!==Fe[1]&&Fe[0]!==void 0&&Fe[1]!==void 0)for(Ue=[he=me(0),he],H=0;H<ve;H++)Ue.reverse(),Ue[Re]=me(H+1),Ue[0]!==Ue[1]&&Ue[0]!==void 0&&Ue[1]!==void 0&&(_e=gt(ke[H],(Ue[1]-Ue[0])*(Fe[1]-Fe[0])),be.fillStyle="rgba("+_e.join(",")+")",be.fillRect(Ue[0]+et,Fe[0]+tt,Ue[1]-Ue[0]-$,Fe[1]-Fe[0]-W))}$e=Math.round($e/Ge),st=Math.round(st/Ge),Ke=Math.round(Ke/Ge);var dt=k("rgb("+$e+","+st+","+Ke+")");m._hmpixcount=(m._hmpixcount||0)+Ge,m._hmlumcount=(m._hmlumcount||0)+Ge*dt.getLuminance();var pt=V.selectAll("image").data(L);pt.enter().append("svg:image").attr({xmlns:a.svg,preserveAspectRatio:"none"}),pt.attr({height:le,width:se,x:C,y:G,"xlink:href":ne.toDataURL("image/png")}),ge!=="fast"||ce||pt.attr("style",p),g(V);var vt=te.texttemplate;if(vt){var ct=r(te),kt={type:"linear",range:[ct.min,ct.max],_separators:w._separators,_numFormat:w._numFormat},ut=te.type==="histogram2dcontour",ft=te.type==="contour",bt=ft?pe-1:pe,It=ft?1:0,zt=ft?ve-1:ve,Rt=[];for(H=ft?1:0;H<bt;H++){var Jt;if(ft)Jt=q.y[H];else if(ut){if(H===0||H===pe-1)continue;Jt=q.y[H]}else if(q.yCenter)Jt=q.yCenter[H];else{if(H+1===pe&&q.y[H+1]===void 0)continue;Jt=(q.y[H]+q.y[H+1])/2}var qt=Math.round(E.c2p(Jt));if(!(0>qt||qt>E._length))for(N=It;N<zt;N++){var Wt;if(ft)Wt=q.x[N];else if(ut){if(N===0||N===ve-1)continue;Wt=q.x[N]}else if(q.xCenter)Wt=q.xCenter[N];else{if(N+1===ve&&q.x[N+1]===void 0)continue;Wt=(q.x[N]+q.x[N+1])/2}var jt=Math.round(w.c2p(Wt));if(!(0>jt||jt>w._length)){var fn=e({x:Wt,y:Jt},te,m._fullLayout);fn.x=Wt,fn.y=Jt;var xn=q.z[H][N];xn===void 0?(fn.z="",fn.zLabel=""):(fn.z=xn,fn.zLabel=b.tickText(kt,xn,"hover").text);var un=q.text&&q.text[H]&&q.text[H][N];un!==void 0&&un!==!1||(un=""),fn.text=un;var Ht=d.texttemplateString(vt,fn,m._fullLayout._d3locale,fn,te._meta||{});if(Ht){var nn=Ht.split("<br>"),Kt=nn.length,on=0;for(F=0;F<Kt;F++)on=Math.max(on,nn[F].length);Rt.push({l:Kt,c:on,t:Ht,x:jt,y:qt,z:xn})}}}}var hn=te.textfont,dn=hn.family,Mn=hn.size,Cn=m._fullLayout.font.size;if(!Mn||Mn==="auto"){var Tn=1/0,Pn=1/0,Wn=0,$n=0;for(F=0;F<Rt.length;F++){var ar=Rt[F];if(Wn=Math.max(Wn,ar.l),$n=Math.max($n,ar.c),F<Rt.length-1){var Qn=Rt[F+1],Gn=Math.abs(Qn.x-ar.x),dr=Math.abs(Qn.y-ar.y);Gn&&(Tn=Math.min(Tn,Gn)),dr&&(Pn=Math.min(Pn,dr))}}isFinite(Tn)&&isFinite(Pn)?(Tn-=$,Pn-=W,Tn/=$n,Pn/=Wn,Tn/=o/2,Pn/=o,Mn=Math.min(Math.floor(Tn),Math.floor(Pn),Cn)):Mn=Cn}if(Mn<=0||!isFinite(Mn))return;x(V).data(Rt).enter().append("g").classed(c,1).append("text").attr("text-anchor","middle").each(function(Bt){var tn=S.select(this),cn=hn.color;cn&&cn!=="auto"||(cn=i.contrast("rgba("+De(Bt.z).join()+")")),tn.attr("data-notex",1).call(s.positionText,function(gn){return gn.x}(Bt),function(gn){return gn.y-Mn*(gn.l*o/2-1)}(Bt)).call(T.font,dn,Mn,cn).text(Bt.t).call(s.convertToTspans,m)})}})}},70035:function(Q,z,t){var S=t(39898);Q.exports=function(k){S.select(k).selectAll(".hm image").style("opacity",function(l){return l.trace.opacity})}},49901:function(Q){Q.exports=function(z,t,S){S("zsmooth")===!1&&(S("xgap"),S("ygap")),S("zhoverformat")}},67684:function(Q,z,t){var S=t(92770),k=t(71828),l=t(73972);function T(b,d){var s=d(b);return(s?d(b+"type","array"):"scaled")==="scaled"&&(d(b+"0"),d("d"+b)),s}Q.exports=function(b,d,s,e,i,r){var n,a,o=s("z");if(i=i||"x",r=r||"y",o===void 0||!o.length)return 0;if(k.isArray1D(b.z)){n=s(i),a=s(r);var u=k.minRowLength(n),p=k.minRowLength(a);if(u===0||p===0)return 0;d._length=Math.min(u,p,o.length)}else{if(n=T(i,s),a=T(r,s),!function(c){for(var x,g=!0,f=!1,y=!1,v=0;v<c.length;v++){if(x=c[v],!k.isArrayOrTypedArray(x)){g=!1;break}x.length>0&&(f=!0);for(var m=0;m<x.length;m++)if(S(x[m])){y=!0;break}}return g&&f&&y}(o))return 0;s("transpose"),d._length=null}return b.type==="heatmapgl"||l.getComponentMethod("calendars","handleTraceDefaults")(b,d,[i,r],e),!0}},16063:function(Q,z,t){for(var S=t(21606),k=t(50693),l=t(1426).extendFlat,T=t(30962).overrideAll,b=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],d={},s=0;s<b.length;s++){var e=b[s];d[e]=S[e]}d.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},l(d,k("",{cLetter:"z",autoColorDflt:!1})),Q.exports=T(d,"calc","nested")},59560:function(Q,z,t){var S=t(9330).gl_heatmap2d,k=t(89298),l=t(78614);function T(d,s){this.scene=d,this.uid=s,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=S(d.glplot,this.options),this.heatmap._trace=this}var b=T.prototype;b.handlePick=function(d){var s=this.options,e=s.shape,i=d.pointId,r=i%e[0],n=Math.floor(i/e[0]),a=i;return{trace:this,dataCoord:d.dataCoord,traceCoord:[s.x[r],s.y[n],s.z[a]],textLabel:this.textLabels[i],name:this.name,pointIndex:[n,r],hoverinfo:this.hoverinfo}},b.update=function(d,s){var e=s[0];this.index=d.index,this.name=d.name,this.hoverinfo=d.hoverinfo;var i=e.z;this.options.z=[].concat.apply([],i);var r=i[0].length,n=i.length;this.options.shape=[r,n],this.options.x=e.x,this.options.y=e.y,this.options.zsmooth=d.zsmooth;var a=function(x){for(var g=x.colorscale,f=x.zmin,y=x.zmax,v=g.length,m=new Array(v),_=new Array(4*v),h=0;h<v;h++){var A=g[h],w=l(A[1]);m[h]=f+A[0]*(y-f);for(var E=0;E<4;E++)_[4*h+E]=w[E]}return{colorLevels:m,colorValues:_}}(d);this.options.colorLevels=a.colorLevels,this.options.colorValues=a.colorValues,this.textLabels=[].concat.apply([],d.text),this.heatmap.update(this.options);var o,u,p=this.scene.xaxis,c=this.scene.yaxis;d.zsmooth===!1&&(o={ppad:e.x[1]-e.x[0]},u={ppad:e.y[1]-e.y[0]}),d._extremes[p._id]=k.findExtremes(p,e.x,o),d._extremes[c._id]=k.findExtremes(c,e.y,u)},b.dispose=function(){this.heatmap.dispose()},Q.exports=function(d,s,e){var i=new T(d,s.uid);return i.update(s,e),i}},19600:function(Q,z,t){var S=t(71828),k=t(67684),l=t(1586),T=t(16063);Q.exports=function(b,d,s,e){function i(r,n){return S.coerce(b,d,T,r,n)}k(b,d,i,e)?(i("text"),i("zsmooth"),l(b,d,e,i,{prefix:"",cLetter:"z"})):d.visible=!1}},3325:function(Q,z,t){Q.exports={attributes:t(16063),supplyDefaults:t(19600),colorbar:t(61243),calc:t(90757),plot:t(59560),moduleType:"trace",name:"heatmapgl",basePlotModule:t(4796),categories:["gl","gl2d","2dMap"],meta:{}}},7745:function(Q,z,t){var S=t(1486),k=t(12663).axisHoverFormat,l=t(5386).fF,T=t(5386).si,b=t(41940),d=t(17656),s=t(72406),e=t(1426).extendFlat;Q.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:k("x"),yhoverformat:k("y"),text:e({},S.text,{}),hovertext:e({},S.hovertext,{}),orientation:S.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:d("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:d("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:l({},{keys:s.eventDataKeys}),texttemplate:T({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:e({},S.textposition,{arrayOk:!1}),textfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:S.insidetextanchor,textangle:S.textangle,cliponaxis:S.cliponaxis,constraintext:S.constraintext,marker:S.marker,offsetgroup:S.offsetgroup,alignmentgroup:S.alignmentgroup,selected:S.selected,unselected:S.unselected,_deprecated:{bardir:S._deprecated.bardir}}},42174:function(Q){Q.exports=function(z,t){for(var S=z.length,k=0,l=0;l<S;l++)t[l]?(z[l]/=t[l],k+=z[l]):z[l]=null;return k}},17656:function(Q){Q.exports=function(z,t){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},59575:function(Q,z,t){var S=t(92770);Q.exports={count:function(k,l,T){return T[k]++,1},sum:function(k,l,T,b){var d=b[l];return S(d)?(d=Number(d),T[k]+=d,d):0},avg:function(k,l,T,b,d){var s=b[l];return S(s)&&(s=Number(s),T[k]+=s,d[k]++),0},min:function(k,l,T,b){var d=b[l];if(S(d)){if(d=Number(d),!S(T[k]))return T[k]=d,d;if(T[k]>d){var s=d-T[k];return T[k]=d,s}}return 0},max:function(k,l,T,b){var d=b[l];if(S(d)){if(d=Number(d),!S(T[k]))return T[k]=d,d;if(T[k]<d){var s=d-T[k];return T[k]=d,s}}return 0}}},40965:function(Q,z,t){var S=t(50606),k=S.ONEAVGYEAR,l=S.ONEAVGMONTH,T=S.ONEDAY,b=S.ONEHOUR,d=S.ONEMIN,s=S.ONESEC,e=t(89298).tickIncrement;function i(o,u,p,c){if(o*u<=0)return 1/0;for(var x=Math.abs(u-o),g=p.type==="date",f=r(x,g),y=0;y<10;y++){var v=r(80*f,g);if(f===v||!n(v,o,u,g,p,c))break;f=v}return f}function r(o,u){return u&&o>s?o>T?o>1.1*k?k:o>1.1*l?l:T:o>b?b:o>d?d:s:Math.pow(10,Math.floor(Math.log(o)/Math.LN10))}function n(o,u,p,c,x,g){if(c&&o>T){var f=a(u,x,g),y=a(p,x,g),v=o===k?0:1;return f[v]!==y[v]}return Math.floor(p/o)-Math.floor(u/o)>.1}function a(o,u,p){var c=u.c2d(o,k,p).split("-");return c[0]===""&&(c.unshift(),c[0]="-"+c[0]),c}Q.exports=function(o,u,p,c,x){var g,f,y=-1.1*u,v=-.1*u,m=o-v,_=p[0],h=p[1],A=Math.min(i(_+v,_+m,c,x),i(h+v,h+m,c,x)),w=Math.min(i(_+y,_+v,c,x),i(h+y,h+v,c,x));if(A>w&&w<Math.abs(h-_)/4e3?(g=A,f=!1):(g=Math.min(A,w),f=!0),c.type==="date"&&g>T){var E=g===k?1:6,L=g===k?"M12":"M1";return function(C,P){var D=c.c2d(C,k,x),G=D.indexOf("-",E);G>0&&(D=D.substr(0,G));var I=c.d2c(D,0,x);if(I<C){var H=e(I,L,!1,x);(I+H)/2<C+o&&(I=H)}return P&&f?e(I,L,!0,x):I}}return function(C,P){var D=g*Math.round(C/g);return D+g/10<C&&D+.9*g<C+o&&(D+=g),P&&f&&(D-=g),D}}},72138:function(Q,z,t){var S=t(92770),k=t(71828),l=t(73972),T=t(89298),b=t(75341),d=t(59575),s=t(36362),e=t(42174),i=t(40965);function r(n,a,o,u,p){var c,x,g,f,y,v,m,_=u+"bins",h=n._fullLayout,A=a["_"+u+"bingroup"],w=h._histogramBinOpts[A],E=h.barmode==="overlay",L=function(xe){return o.r2c(xe,0,f)},C=function(xe){return o.c2r(xe,0,f)},P=o.type==="date"?function(xe){return xe||xe===0?k.cleanDate(xe,null,f):null}:function(xe){return S(xe)?Number(xe):null};function D(xe,ge,Oe){ge[xe+"Found"]?(ge[xe]=P(ge[xe]),ge[xe]===null&&(ge[xe]=Oe[xe])):(v[xe]=ge[xe]=Oe[xe],k.nestedProperty(x[0],_+"."+xe).set(Oe[xe]))}if(a["_"+u+"autoBinFinished"])delete a["_"+u+"autoBinFinished"];else{x=w.traces;var G=[],I=!0,H=!1,N=!1;for(c=0;c<x.length;c++)if((g=x[c]).visible){var F=w.dirs[c];y=g["_"+F+"pos0"]=o.makeCalcdata(g,F),G=k.concat(G,y),delete g["_"+u+"autoBinFinished"],a.visible===!0&&(I?I=!1:(delete g._autoBin,g["_"+u+"autoBinFinished"]=1),l.traceIs(g,"2dMap")&&(H=!0),g.type==="histogram2dcontour"&&(N=!0))}f=x[0][u+"calendar"];var V=T.autoBin(G,o,w.nbins,H,f,w.sizeFound&&w.size),q=x[0]._autoBin={};if(v=q[w.dirs[0]]={},N&&(w.size||(V.start=C(T.tickIncrement(L(V.start),V.size,!0,f))),w.end===void 0&&(V.end=C(T.tickIncrement(L(V.end),V.size,!1,f)))),E&&!l.traceIs(a,"2dMap")&&V._dataSpan===0&&o.type!=="category"&&o.type!=="multicategory"){if(p)return[V,y,!0];V=function(xe,ge,Oe,Ae,Te){var se,le,ne,me=xe._fullLayout,Ee=function($e,st){for(var Ke=st.xaxis,gt=st.yaxis,mt=st.orientation,at=[],rt=$e._fullData,xt=0;xt<rt.length;xt++){var Tt=rt[xt];Tt.type==="histogram"&&Tt.visible===!0&&Tt.orientation===mt&&Tt.xaxis===Ke&&Tt.yaxis===gt&&at.push(Tt)}return at}(xe,ge),be=!1,De=1/0,Ue=[ge];for(se=0;se<Ee.length;se++)if((le=Ee[se])===ge)be=!0;else if(be){var he=r(xe,le,Oe,Ae,!0),ke=he[0],_e=he[2];le["_"+Ae+"autoBinFinished"]=1,le["_"+Ae+"pos0"]=he[1],_e?Ue.push(le):De=Math.min(De,ke.size)}else ne=me._histogramBinOpts[le["_"+Ae+"bingroup"]],De=Math.min(De,ne.size||le[Te].size);var Ce=new Array(Ue.length);for(se=0;se<Ue.length;se++)for(var Fe=Ue[se]["_"+Ae+"pos0"],Re=0;Re<Fe.length;Re++)if(Fe[Re]!==void 0){Ce[se]=Fe[Re];break}for(isFinite(De)||(De=k.distinctVals(Ce).minDiff),se=0;se<Ue.length;se++){var He=(le=Ue[se])[Ae+"calendar"],Ge={start:Oe.c2r(Ce[se]-De/2,0,He),end:Oe.c2r(Ce[se]+De/2,0,He),size:De};le._input[Te]=le[Te]=Ge,(ne=me._histogramBinOpts[le["_"+Ae+"bingroup"]])&&k.extendFlat(ne,Ge)}return ge[Te]}(n,a,o,u,_)}(m=g.cumulative||{}).enabled&&m.currentbin!=="include"&&(m.direction==="decreasing"?V.start=C(T.tickIncrement(L(V.start),V.size,!0,f)):V.end=C(T.tickIncrement(L(V.end),V.size,!1,f))),w.size=V.size,w.sizeFound||(v.size=V.size,k.nestedProperty(x[0],_+".size").set(V.size)),D("start",w,V),D("end",w,V)}y=a["_"+u+"pos0"],delete a["_"+u+"pos0"];var te=a._input[_]||{},$=k.extendFlat({},w),W=w.start,Z=o.r2l(te.start),J=Z!==void 0;if((w.startFound||J)&&Z!==o.r2l(W)){var ee=J?Z:k.aggNums(Math.min,null,y),re={type:o.type==="category"||o.type==="multicategory"?"linear":o.type,r2l:o.r2l,dtick:w.size,tick0:W,calendar:f,range:[ee,T.tickIncrement(ee,w.size,!1,f)].map(o.l2r)},ae=T.tickFirst(re);ae>o.r2l(ee)&&(ae=T.tickIncrement(ae,w.size,!0,f)),$.start=o.l2r(ae),J||k.nestedProperty(a,_+".start").set($.start)}var oe=w.end,ce=o.r2l(te.end),pe=ce!==void 0;if((w.endFound||pe)&&ce!==o.r2l(oe)){var ve=pe?ce:k.aggNums(Math.max,null,y);$.end=o.l2r(ve),pe||k.nestedProperty(a,_+".start").set($.end)}var we="autobin"+u;return a._input[we]===!1&&(a._input[_]=k.extendFlat({},a[_]||{}),delete a._input[we],delete a[we]),[$,y]}Q.exports={calc:function(n,a){var o,u,p,c,x=[],g=[],f=a.orientation==="h",y=T.getFromId(n,f?a.yaxis:a.xaxis),v=f?"y":"x",m={x:"y",y:"x"}[v],_=a[v+"calendar"],h=a.cumulative,A=r(n,a,y,v),w=A[0],E=A[1],L=typeof w.size=="string",C=[],P=L?C:w,D=[],G=[],I=[],H=0,N=a.histnorm,F=a.histfunc,V=N.indexOf("density")!==-1;h.enabled&&V&&(N=N.replace(/ ?density$/,""),V=!1);var q,te=F==="max"||F==="min"?null:0,$=d.count,W=s[N],Z=!1,J=function(le){return y.r2c(le,0,_)};for(k.isArrayOrTypedArray(a[m])&&F!=="count"&&(q=a[m],Z=F==="avg",$=d[F]),o=J(w.start),p=J(w.end)+(o-T.tickIncrement(o,w.size,!1,_))/1e6;o<p&&x.length<1e6&&(u=T.tickIncrement(o,w.size,!1,_),x.push((o+u)/2),g.push(te),I.push([]),C.push(o),V&&D.push(1/(u-o)),Z&&G.push(0),!(u<=o));)o=u;C.push(o),L||y.type!=="date"||(P={start:J(P.start),end:J(P.end),size:P.size}),n._fullLayout._roundFnOpts||(n._fullLayout._roundFnOpts={});var ee=a["_"+v+"bingroup"],re={leftGap:1/0,rightGap:1/0};ee&&(n._fullLayout._roundFnOpts[ee]||(n._fullLayout._roundFnOpts[ee]=re),re=n._fullLayout._roundFnOpts[ee]);var ae,oe=g.length,ce=!0,pe=re.leftGap,ve=re.rightGap,we={};for(o=0;o<E.length;o++){var xe=E[o];(c=k.findBin(xe,P))>=0&&c<oe&&(H+=$(c,o,g,q,G),ce&&I[c].length&&xe!==E[I[c][0]]&&(ce=!1),I[c].push(o),we[o]=c,pe=Math.min(pe,xe-C[c]),ve=Math.min(ve,C[c+1]-xe))}re.leftGap=pe,re.rightGap=ve,ce||(ae=function(le,ne){return function(){var me=n._fullLayout._roundFnOpts[ee];return i(me.leftGap,me.rightGap,C,y,_)(le,ne)}}),Z&&(H=e(g,G)),W&&W(g,H,D),h.enabled&&function(le,ne,me){var Ee,be,De;function Ue(ke){De=le[ke],le[ke]/=2}function he(ke){be=le[ke],le[ke]=De+be/2,De+=be}if(me==="half")if(ne==="increasing")for(Ue(0),Ee=1;Ee<le.length;Ee++)he(Ee);else for(Ue(le.length-1),Ee=le.length-2;Ee>=0;Ee--)he(Ee);else if(ne==="increasing"){for(Ee=1;Ee<le.length;Ee++)le[Ee]+=le[Ee-1];me==="exclude"&&(le.unshift(0),le.pop())}else{for(Ee=le.length-2;Ee>=0;Ee--)le[Ee]+=le[Ee+1];me==="exclude"&&(le.push(0),le.shift())}}(g,h.direction,h.currentbin);var ge=Math.min(x.length,g.length),Oe=[],Ae=0,Te=ge-1;for(o=0;o<ge;o++)if(g[o]){Ae=o;break}for(o=ge-1;o>=Ae;o--)if(g[o]){Te=o;break}for(o=Ae;o<=Te;o++)if(S(x[o])&&S(g[o])){var se={p:x[o],s:g[o],b:0};h.enabled||(se.pts=I[o],ce?se.ph0=se.ph1=I[o].length?E[I[o][0]]:x[o]:(a._computePh=!0,se.ph0=ae(C[o]),se.ph1=ae(C[o+1],!0))),Oe.push(se)}return Oe.length===1&&(Oe[0].width1=T.tickIncrement(Oe[0].p,w.size,!1,_)-Oe[0].p),b(Oe,a),k.isArrayOrTypedArray(a.selectedpoints)&&k.tagSelected(Oe,a,we),Oe},calcAllAutoBins:r}},72406:function(Q){Q.exports={eventDataKeys:["binNumber"]}},82222:function(Q,z,t){var S=t(71828),k=t(41675),l=t(73972).traceIs,T=t(26125),b=S.nestedProperty,d=t(99082).getAxisGroup,s=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],e=["x","y"];Q.exports=function(i,r){var n,a,o,u,p,c,x,g=r._histogramBinOpts={},f=[],y={},v=[];function m(V,q){return S.coerce(n._input,n,n._module.attributes,V,q)}function _(V){return V.orientation==="v"?"x":"y"}function h(V,q,te){var $=V.uid+"__"+te;q||(q=$);var W=function(re,ae){return k.getFromTrace({_fullLayout:r},re,ae).type}(V,te),Z=V[te+"calendar"]||"",J=g[q],ee=!0;J&&(W===J.axType&&Z===J.calendar?(ee=!1,J.traces.push(V),J.dirs.push(te)):(q=$,W!==J.axType&&S.warn(["Attempted to group the bins of trace",V.index,"set on a","type:"+W,"axis","with bins on","type:"+J.axType,"axis."].join(" ")),Z!==J.calendar&&S.warn(["Attempted to group the bins of trace",V.index,"set with a",Z,"calendar","with bins",J.calendar?"on a "+J.calendar+" calendar":"w/o a set calendar"].join(" ")))),ee&&(g[q]={traces:[V],dirs:[te],axType:W,calendar:V[te+"calendar"]||""}),V["_"+te+"bingroup"]=q}for(p=0;p<i.length;p++)n=i[p],l(n,"histogram")&&(f.push(n),delete n._xautoBinFinished,delete n._yautoBinFinished,l(n,"2dMap")||T(n._input,n,r,m));var A=r._alignmentOpts||{};for(p=0;p<f.length;p++){if(n=f[p],o="",!l(n,"2dMap")){if(u=_(n),r.barmode==="group"&&n.alignmentgroup){var w=n[u+"axis"],E=d(r,w)+n.orientation;(A[E]||{})[n.alignmentgroup]&&(o=E)}o||r.barmode==="overlay"||(o=d(r,n.xaxis)+d(r,n.yaxis)+_(n))}o?(y[o]||(y[o]=[]),y[o].push(n)):v.push(n)}for(o in y)if((a=y[o]).length!==1){var L=!1;for(a.length&&(n=a[0],L=m("bingroup")),o=L||o,p=0;p<a.length;p++){var C=(n=a[p])._input.bingroup;C&&C!==o&&S.warn(["Trace",n.index,"must match","within bingroup",o+".","Ignoring its bingroup:",C,"setting."].join(" ")),n.bingroup=o,h(n,o,_(n))}}else v.push(a[0]);for(p=0;p<v.length;p++){n=v[p];var P=m("bingroup");if(l(n,"2dMap"))for(x=0;x<2;x++){var D=m((u=e[x])+"bingroup",P?P+"__"+u:null);h(n,D,u)}else h(n,P,_(n))}for(o in g){var G=g[o];for(a=G.traces,c=0;c<s.length;c++){var I,H,N=s[c],F=N.name;if(F!=="nbins"||!G.sizeFound){for(p=0;p<a.length;p++){if(n=a[p],u=G.dirs[p],I=N.aStr[u],b(n._input,I).get()!==void 0){G[F]=m(I),G[F+"Found"]=!0;break}(H=(n._autoBin||{})[u]||{})[F]&&b(n,I).set(H[F])}if(F==="start"||F==="end")for(;p<a.length;p++)(n=a[p])["_"+u+"bingroup"]&&m(I,(H=(n._autoBin||{})[u]||{})[F]);F!=="nbins"||G.sizeFound||G.nbinsFound||(n=a[0],G[F]=m(I))}}}}},11385:function(Q,z,t){var S=t(73972),k=t(71828),l=t(7901),T=t(90769).handleText,b=t(98340),d=t(7745);Q.exports=function(s,e,i,r){function n(v,m){return k.coerce(s,e,d,v,m)}var a=n("x"),o=n("y");n("cumulative.enabled")&&(n("cumulative.direction"),n("cumulative.currentbin")),n("text");var u=n("textposition");T(s,e,r,n,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),n("hovertext"),n("hovertemplate"),n("xhoverformat"),n("yhoverformat");var p=n("orientation",o&&!a?"h":"v"),c=p==="v"?"x":"y",x=p==="v"?"y":"x",g=a&&o?Math.min(k.minRowLength(a)&&k.minRowLength(o)):k.minRowLength(e[c]||[]);if(g){e._length=g,S.getComponentMethod("calendars","handleTraceDefaults")(s,e,["x","y"],r),e[x]&&n("histfunc"),n("histnorm"),n("autobin"+c),b(s,e,n,i,r),k.coerceSelectionMarkerOpacity(e,n);var f=(e.marker.line||{}).color,y=S.getComponentMethod("errorbars","supplyDefaults");y(s,e,f||l.defaultLine,{axis:"y"}),y(s,e,f||l.defaultLine,{axis:"x",inherit:"y"})}else e.visible=!1}},84402:function(Q){Q.exports=function(z,t,S,k,l){if(z.x="xVal"in t?t.xVal:t.x,z.y="yVal"in t?t.yVal:t.y,"zLabelVal"in t&&(z.z=t.zLabelVal),t.xa&&(z.xaxis=t.xa),t.ya&&(z.yaxis=t.ya),!(S.cumulative||{}).enabled){var T,b=Array.isArray(l)?k[0].pts[l[0]][l[1]]:k[l].pts;if(z.pointNumbers=b,z.binNumber=z.pointNumber,delete z.pointNumber,delete z.pointIndex,S._indexToPoints){T=[];for(var d=0;d<b.length;d++)T=T.concat(S._indexToPoints[b[d]])}else T=b;z.pointIndices=T}return z}},76440:function(Q,z,t){var S=t(95423).hoverPoints,k=t(89298).hoverLabelText;Q.exports=function(l,T,b,d,s){var e=S(l,T,b,d,s);if(e){var i=(l=e[0]).cd[l.index],r=l.cd[0].trace;if(!r.cumulative.enabled){var n=r.orientation==="h"?"y":"x";l[n+"Label"]=k(l[n+"a"],[i.ph0,i.ph1],r[n+"hoverformat"])}return e}}},36071:function(Q,z,t){Q.exports={attributes:t(7745),layoutAttributes:t(43641),supplyDefaults:t(11385),crossTraceDefaults:t(82222),supplyLayoutDefaults:t(13957),calc:t(72138).calc,crossTraceCalc:t(11661).crossTraceCalc,plot:t(17295).plot,layerName:"barlayer",style:t(16688).style,styleOnSelect:t(16688).styleOnSelect,colorbar:t(4898),hoverPoints:t(76440),selectPoints:t(81974),eventData:t(84402),moduleType:"trace",name:"histogram",basePlotModule:t(93612),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},36362:function(Q){Q.exports={percent:function(z,t){for(var S=z.length,k=100/t,l=0;l<S;l++)z[l]*=k},probability:function(z,t){for(var S=z.length,k=0;k<S;k++)z[k]/=t},density:function(z,t,S,k){var l=z.length;k=k||1;for(var T=0;T<l;T++)z[T]*=S[T]*k},"probability density":function(z,t,S,k){var l=z.length;k&&(t/=k);for(var T=0;T<l;T++)z[T]*=S[T]/t}}},35361:function(Q,z,t){var S=t(7745),k=t(17656),l=t(21606),T=t(9012),b=t(12663).axisHoverFormat,d=t(5386).fF,s=t(5386).si,e=t(50693),i=t(1426).extendFlat;Q.exports=i({x:S.x,y:S.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:S.histnorm,histfunc:S.histfunc,nbinsx:S.nbinsx,xbins:k("x"),nbinsy:S.nbinsy,ybins:k("y"),autobinx:S.autobinx,autobiny:S.autobiny,bingroup:i({},S.bingroup,{}),xbingroup:i({},S.bingroup,{}),ybingroup:i({},S.bingroup,{}),xgap:l.xgap,ygap:l.ygap,zsmooth:l.zsmooth,xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z",1),hovertemplate:d({},{keys:"z"}),texttemplate:s({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:l.textfont,showlegend:i({},T.showlegend,{dflt:!1})},e("",{cLetter:"z",autoColorDflt:!1}))},17562:function(Q,z,t){var S=t(71828),k=t(89298),l=t(59575),T=t(36362),b=t(42174),d=t(40965),s=t(72138).calcAllAutoBins;function e(n,a,o,u){var p,c=new Array(n);if(u)for(p=0;p<n;p++)c[p]=1/(a[p+1]-a[p]);else{var x=1/o;for(p=0;p<n;p++)c[p]=x}return c}function i(n,a){return{start:n(a.start),end:n(a.end),size:a.size}}function r(n,a,o,u,p,c){var x,g=n.length-1,f=new Array(g),y=d(o,u,n,p,c);for(x=0;x<g;x++){var v=(a||[])[x];f[x]=v===void 0?[y(n[x]),y(n[x+1],!0)]:[v,v]}return f}Q.exports=function(n,a){var o,u,p,c,x=k.getFromId(n,a.xaxis),g=k.getFromId(n,a.yaxis),f=a.xcalendar,y=a.ycalendar,v=function(gt){return x.r2c(gt,0,f)},m=function(gt){return g.r2c(gt,0,y)},_=s(n,a,x,"x"),h=_[0],A=_[1],w=s(n,a,g,"y"),E=w[0],L=w[1],C=a._length;A.length>C&&A.splice(C,A.length-C),L.length>C&&L.splice(C,L.length-C);var P=[],D=[],G=[],I=typeof h.size=="string",H=typeof E.size=="string",N=[],F=[],V=I?N:h,q=H?F:E,te=0,$=[],W=[],Z=a.histnorm,J=a.histfunc,ee=Z.indexOf("density")!==-1,re=J==="max"||J==="min"?null:0,ae=l.count,oe=T[Z],ce=!1,pe=[],ve=[],we="z"in a?a.z:"marker"in a&&Array.isArray(a.marker.color)?a.marker.color:"";we&&J!=="count"&&(ce=J==="avg",ae=l[J]);var xe=h.size,ge=v(h.start),Oe=v(h.end)+(ge-k.tickIncrement(ge,xe,!1,f))/1e6;for(o=ge;o<Oe;o=k.tickIncrement(o,xe,!1,f))D.push(re),N.push(o),ce&&G.push(0);N.push(o);var Ae,Te=D.length,se=(o-ge)/Te,le=(Ae=ge+se/2,x.c2r(Ae,0,f)),ne=E.size,me=m(E.start),Ee=m(E.end)+(me-k.tickIncrement(me,ne,!1,y))/1e6;for(o=me;o<Ee;o=k.tickIncrement(o,ne,!1,y)){P.push(D.slice()),F.push(o);var be=new Array(Te);for(u=0;u<Te;u++)be[u]=[];W.push(be),ce&&$.push(G.slice())}F.push(o);var De=P.length,Ue=(o-me)/De,he=function(gt){return g.c2r(gt,0,y)}(me+Ue/2);ee&&(pe=e(D.length,V,se,I),ve=e(P.length,q,Ue,H)),I||x.type!=="date"||(V=i(v,V)),H||g.type!=="date"||(q=i(m,q));var ke=!0,_e=!0,Ce=new Array(Te),Fe=new Array(De),Re=1/0,He=1/0,Ge=1/0,$e=1/0;for(o=0;o<C;o++){var st=A[o],Ke=L[o];p=S.findBin(st,V),c=S.findBin(Ke,q),p>=0&&p<Te&&c>=0&&c<De&&(te+=ae(p,o,P[c],we,$[c]),W[c][p].push(o),ke&&(Ce[p]===void 0?Ce[p]=st:Ce[p]!==st&&(ke=!1)),_e&&(Fe[c]===void 0?Fe[c]=Ke:Fe[c]!==Ke&&(_e=!1)),Re=Math.min(Re,st-N[p]),He=Math.min(He,N[p+1]-st),Ge=Math.min(Ge,Ke-F[c]),$e=Math.min($e,F[c+1]-Ke))}if(ce)for(c=0;c<De;c++)te+=b(P[c],$[c]);if(oe)for(c=0;c<De;c++)oe(P[c],te,pe,ve[c]);return{x:A,xRanges:r(N,ke&&Ce,Re,He,x,f),x0:le,dx:se,y:L,yRanges:r(F,_e&&Fe,Ge,$e,g,y),y0:he,dy:Ue,z:P,pts:W}}},93888:function(Q,z,t){var S=t(71828),k=t(75238),l=t(49901),T=t(1586),b=t(58623),d=t(35361);Q.exports=function(s,e,i,r){function n(a,o){return S.coerce(s,e,d,a,o)}k(s,e,n,r),e.visible!==!1&&(l(s,e,n,r),T(s,e,r,n,{prefix:"",cLetter:"z"}),n("hovertemplate"),b(n,r),n("xhoverformat"),n("yhoverformat"))}},76128:function(Q,z,t){var S=t(46248),k=t(89298).hoverLabelText;Q.exports=function(l,T,b,d,s){var e=S(l,T,b,d,s);if(e){var i=(l=e[0]).index,r=i[0],n=i[1],a=l.cd[0],o=a.trace,u=a.xRanges[n],p=a.yRanges[r];return l.xLabel=k(l.xa,[u[0],u[1]],o.xhoverformat),l.yLabel=k(l.ya,[p[0],p[1]],o.yhoverformat),e}}},43905:function(Q,z,t){Q.exports={attributes:t(35361),supplyDefaults:t(93888),crossTraceDefaults:t(82222),calc:t(90757),plot:t(50347),layerName:"heatmaplayer",colorbar:t(61243),style:t(70035),hoverPoints:t(76128),eventData:t(84402),moduleType:"trace",name:"histogram2d",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},75238:function(Q,z,t){var S=t(73972),k=t(71828);Q.exports=function(l,T,b,d){var s=b("x"),e=b("y"),i=k.minRowLength(s),r=k.minRowLength(e);i&&r?(T._length=Math.min(i,r),S.getComponentMethod("calendars","handleTraceDefaults")(l,T,["x","y"],d),(b("z")||b("marker.color"))&&b("histfunc"),b("histnorm"),b("autobinx"),b("autobiny")):T.visible=!1}},99066:function(Q,z,t){var S=t(35361),k=t(70600),l=t(50693),T=t(12663).axisHoverFormat,b=t(1426).extendFlat;Q.exports=b({x:S.x,y:S.y,z:S.z,marker:S.marker,histnorm:S.histnorm,histfunc:S.histfunc,nbinsx:S.nbinsx,xbins:S.xbins,nbinsy:S.nbinsy,ybins:S.ybins,autobinx:S.autobinx,autobiny:S.autobiny,bingroup:S.bingroup,xbingroup:S.xbingroup,ybingroup:S.ybingroup,autocontour:k.autocontour,ncontours:k.ncontours,contours:k.contours,line:{color:k.line.color,width:b({},k.line.width,{dflt:.5}),dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:S.hovertemplate,texttemplate:k.texttemplate,textfont:k.textfont},l("",{cLetter:"z",editTypeOverride:"calc"}))},62654:function(Q,z,t){var S=t(71828),k=t(75238),l=t(67217),T=t(8724),b=t(58623),d=t(99066);Q.exports=function(s,e,i,r){function n(a,o){return S.coerce(s,e,d,a,o)}k(s,e,n,r),e.visible!==!1&&(l(s,e,n,function(a){return S.coerce2(s,e,d,a)}),T(s,e,n,r),n("xhoverformat"),n("yhoverformat"),n("hovertemplate"),e.contours&&e.contours.coloring==="heatmap"&&b(n,r))}},35902:function(Q,z,t){Q.exports={attributes:t(99066),supplyDefaults:t(62654),crossTraceDefaults:t(82222),calc:t(27529),plot:t(29854).plot,layerName:"contourlayer",style:t(84426),colorbar:t(90654),hoverPoints:t(52421),moduleType:"trace",name:"histogram2dcontour",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},46291:function(Q,z,t){var S=t(5386).fF,k=t(5386).si,l=t(50693),T=t(27670).Y,b=t(34e3),d=t(57564),s=t(45802),e=t(43473),i=t(1426).extendFlat;Q.exports={labels:d.labels,parents:d.parents,values:d.values,branchvalues:d.branchvalues,count:d.count,level:d.level,maxdepth:d.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:s.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:i({colors:d.marker.colors,line:d.marker.line,editType:"calc"},l("marker",{colorAttr:"colors",anim:!1})),leaf:d.leaf,pathbar:s.pathbar,text:b.text,textinfo:d.textinfo,texttemplate:k({editType:"plot"},{keys:e.eventDataKeys.concat(["label","value"])}),hovertext:b.hovertext,hoverinfo:d.hoverinfo,hovertemplate:S({},{keys:e.eventDataKeys}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:s.outsidetextfont,textposition:s.textposition,sort:b.sort,root:d.root,domain:T({name:"icicle",trace:!0,editType:"calc"})}},96346:function(Q,z,t){var S=t(74875);z.name="icicle",z.plot=function(k,l,T,b){S.plotBasePlot(z.name,k,l,T,b)},z.clean=function(k,l,T,b){S.cleanBasePlot(z.name,k,l,T,b)}},46584:function(Q,z,t){var S=t(52147);z.y=function(k,l){return S.calc(k,l)},z.T=function(k){return S._runCrossTraceCalc("icicle",k)}},56524:function(Q,z,t){var S=t(71828),k=t(46291),l=t(7901),T=t(27670).c,b=t(90769).handleText,d=t(97313).TEXTPAD,s=t(21081),e=s.hasColorscale,i=s.handleDefaults;Q.exports=function(r,n,a,o){function u(v,m){return S.coerce(r,n,k,v,m)}var p=u("labels"),c=u("parents");if(p&&p.length&&c&&c.length){var x=u("values");x&&x.length?u("branchvalues"):u("count"),u("level"),u("maxdepth"),u("tiling.orientation"),u("tiling.flip"),u("tiling.pad");var g=u("text");u("texttemplate"),n.texttemplate||u("textinfo",Array.isArray(g)?"text+label":"label"),u("hovertext"),u("hovertemplate");var f=u("pathbar.visible");b(r,n,o,u,"auto",{hasPathbar:f,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),u("textposition"),u("marker.line.width")&&u("marker.line.color",o.paper_bgcolor),u("marker.colors");var y=n._hasColorscale=e(r,"marker","colors")||(r.marker||{}).coloraxis;y&&i(r,n,o,u,{prefix:"marker.",cLetter:"c"}),u("leaf.opacity",y?1:.7),n._hovered={marker:{line:{width:2,color:l.contrast(o.paper_bgcolor)}}},f&&(u("pathbar.thickness",n.pathbar.textfont.size+2*d),u("pathbar.side"),u("pathbar.edgeshape")),u("sort"),u("root.color"),T(n,o,u),n._length=null}else n.visible=!1}},90666:function(Q,z,t){var S=t(39898),k=t(71828),l=t(91424),T=t(63893),b=t(21538),d=t(82454).styleOne,s=t(43473),e=t(2791),i=t(83523),r=t(24714).formatSliceLabel,n=!1;Q.exports=function(a,o,u,p,c){var x=c.width,g=c.height,f=c.viewX,y=c.viewY,v=c.pathSlice,m=c.toMoveInsideSlice,_=c.strTransform,h=c.hasTransition,A=c.handleSlicesExit,w=c.makeUpdateSliceInterpolator,E=c.makeUpdateTextInterpolator,L=c.prevEntry,C=a._context.staticPlot,P=a._fullLayout,D=o[0].trace,G=D.textposition.indexOf("left")!==-1,I=D.textposition.indexOf("right")!==-1,H=D.textposition.indexOf("bottom")!==-1,N=b(u,[x,g],{flipX:D.tiling.flip.indexOf("x")>-1,flipY:D.tiling.flip.indexOf("y")>-1,orientation:D.tiling.orientation,pad:{inner:D.tiling.pad},maxDepth:D._maxDepth}).descendants(),F=1/0,V=-1/0;N.forEach(function(Z){var J=Z.depth;J>=D._maxDepth?(Z.x0=Z.x1=(Z.x0+Z.x1)/2,Z.y0=Z.y1=(Z.y0+Z.y1)/2):(F=Math.min(F,J),V=Math.max(V,J))}),p=p.data(N,e.getPtId),D._maxVisibleLayers=isFinite(V)?V-F+1:0,p.enter().append("g").classed("slice",!0),A(p,n,{},[x,g],v),p.order();var q=null;if(h&&L){var te=e.getPtId(L);p.each(function(Z){q===null&&e.getPtId(Z)===te&&(q={x0:Z.x0,x1:Z.x1,y0:Z.y0,y1:Z.y1})})}var $=function(){return q||{x0:0,x1:x,y0:0,y1:g}},W=p;return h&&(W=W.transition().each("end",function(){var Z=S.select(this);e.setSliceCursor(Z,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),W.each(function(Z){Z._x0=f(Z.x0),Z._x1=f(Z.x1),Z._y0=y(Z.y0),Z._y1=y(Z.y1),Z._hoverX=f(Z.x1-D.tiling.pad),Z._hoverY=y(H?Z.y1-D.tiling.pad/2:Z.y0+D.tiling.pad/2);var J=S.select(this),ee=k.ensureSingle(J,"path","surface",function(ce){ce.style("pointer-events",C?"none":"all")});h?ee.transition().attrTween("d",function(ce){var pe=w(ce,n,$(),[x,g],{orientation:D.tiling.orientation,flipX:D.tiling.flip.indexOf("x")>-1,flipY:D.tiling.flip.indexOf("y")>-1});return function(ve){return v(pe(ve))}}):ee.attr("d",v),J.call(i,u,a,o,{styleOne:d,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(e.setSliceCursor,a,{isTransitioning:a._transitioning}),ee.call(d,Z,D,{hovered:!1}),Z.x0===Z.x1||Z.y0===Z.y1?Z._text="":Z._text=r(Z,u,D,o,P)||"";var re=k.ensureSingle(J,"g","slicetext"),ae=k.ensureSingle(re,"text","",function(ce){ce.attr("data-notex",1)}),oe=k.ensureUniformFontSize(a,e.determineTextFont(D,Z,P.font));ae.text(Z._text||" ").classed("slicetext",!0).attr("text-anchor",I?"end":G?"start":"middle").call(l.font,oe).call(T.convertToTspans,a),Z.textBB=l.bBox(ae.node()),Z.transform=m(Z,{fontSize:oe.size}),Z.transform.fontSize=oe.size,h?ae.transition().attrTween("transform",function(ce){var pe=E(ce,n,$(),[x,g]);return function(ve){return _(pe(ve))}}):ae.attr("transform",_(Z))}),q}},69816:function(Q,z,t){Q.exports={moduleType:"trace",name:"icicle",basePlotModule:t(96346),categories:[],animatable:!0,attributes:t(46291),layoutAttributes:t(92894),supplyDefaults:t(56524),supplyLayoutDefaults:t(21070),calc:t(46584).y,crossTraceCalc:t(46584).T,plot:t(85596),style:t(82454).style,colorbar:t(4898),meta:{}}},92894:function(Q){Q.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},21070:function(Q,z,t){var S=t(71828),k=t(92894);Q.exports=function(l,T){function b(d,s){return S.coerce(l,T,k,d,s)}b("iciclecolorway",T.colorway),b("extendiciclecolors")}},21538:function(Q,z,t){var S=t(674),k=t(14102);Q.exports=function(l,T,b){var d=b.flipX,s=b.flipY,e=b.orientation==="h",i=b.maxDepth,r=T[0],n=T[1];i&&(r=(l.height+1)*T[0]/Math.min(l.height+1,i),n=(l.height+1)*T[1]/Math.min(l.height+1,i));var a=S.partition().padding(b.pad.inner).size(e?[T[1],r]:[T[0],n])(l);return(e||d||s)&&k(a,T,{swapXY:e,flipX:d,flipY:s}),a}},85596:function(Q,z,t){var S=t(80694),k=t(90666);Q.exports=function(l,T,b,d){return S(l,T,b,d,{type:"icicle",drawDescendants:k})}},82454:function(Q,z,t){var S=t(39898),k=t(7901),l=t(71828),T=t(72597).resizeText;function b(d,s,e){var i=s.data.data,r=!s.children,n=i.i,a=l.castOption(e,n,"marker.line.color")||k.defaultLine,o=l.castOption(e,n,"marker.line.width")||0;d.style("stroke-width",o).call(k.fill,i.color).call(k.stroke,a).style("opacity",r?e.leaf.opacity:null)}Q.exports={style:function(d){var s=d._fullLayout._iciclelayer.selectAll(".trace");T(d,s,"icicle"),s.each(function(e){var i=S.select(this),r=e[0].trace;i.style("opacity",r.opacity),i.selectAll("path.surface").each(function(n){S.select(this).call(b,n,r)})})},styleOne:b}},17230:function(Q,z,t){for(var S=t(9012),k=t(5386).fF,l=t(1426).extendFlat,T=t(51877).colormodel,b=["rgb","rgba","rgba256","hsl","hsla"],d=[],s=[],e=0;e<b.length;e++){var i=T[b[e]];d.push("For the `"+b[e]+"` colormodel, it is ["+(i.zminDflt||i.min).join(", ")+"]."),s.push("For the `"+b[e]+"` colormodel, it is ["+(i.zmaxDflt||i.max).join(", ")+"].")}Q.exports=l({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:b,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:l({},S.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:k({},{keys:["z","color","colormodel"]}),transforms:void 0})},71113:function(Q,z,t){var S=t(71828),k=t(51877),l=t(92770),T=t(89298),b=t(71828).maxRowLength,d=t(67395).A;function s(i,r,n,a){return function(o){return S.constrain((o-i)*r,n,a)}}function e(i,r){return function(n){return S.constrain(n,i,r)}}Q.exports=function(i,r){var n,a;if(r._hasZ)n=r.z.length,a=b(r.z);else if(r._hasSource){var o=d(r.source);n=o.height,a=o.width}var u,p=T.getFromId(i,r.xaxis||"x"),c=T.getFromId(i,r.yaxis||"y"),x=p.d2c(r.x0)-r.dx/2,g=c.d2c(r.y0)-r.dy/2,f=[x,x+a*r.dx],y=[g,g+n*r.dy];if(p&&p.type==="log")for(u=0;u<a;u++)f.push(x+u*r.dx);if(c&&c.type==="log")for(u=0;u<n;u++)y.push(g+u*r.dy);return r._extremes[p._id]=T.findExtremes(p,f),r._extremes[c._id]=T.findExtremes(c,y),r._scaler=function(v){var m=k.colormodel[v.colormodel],_=(m.colormodel||v.colormodel).length;v._sArray=[];for(var h=0;h<_;h++)m.min[h]!==v.zmin[h]||m.max[h]!==v.zmax[h]?v._sArray.push(s(v.zmin[h],(m.max[h]-m.min[h])/(v.zmax[h]-v.zmin[h]),m.min[h],m.max[h])):v._sArray.push(e(m.min[h],m.max[h]));return function(A){for(var w=A.slice(0,_),E=0;E<_;E++){var L=w[E];if(!l(L))return!1;w[E]=v._sArray[E](L)}return w}}(r),[{x0:x,y0:g,z:r.z,w:a,h:n}]}},51877:function(Q){Q.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(z){return z.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(z){return z.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(z){return z.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(z){var t=z.slice(0,3);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(z){var t=z.slice(0,4);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["","%","%",""]}}}},13245:function(Q,z,t){var S=t(71828),k=t(17230),l=t(51877),T=t(25095).IMAGE_URL_PREFIX;Q.exports=function(b,d){function s(r,n){return S.coerce(b,d,k,r,n)}s("source"),d.source&&!d.source.match(T)&&delete d.source,d._hasSource=!!d.source;var e,i=s("z");d._hasZ=!(i===void 0||!i.length||!i[0]||!i[0].length),d._hasZ||d._hasSource?(s("x0"),s("y0"),s("dx"),s("dy"),d._hasZ?(s("colormodel","rgb"),s("zmin",(e=l.colormodel[d.colormodel]).zminDflt||e.min),s("zmax",e.zmaxDflt||e.max)):d._hasSource&&(d.colormodel="rgba256",e=l.colormodel[d.colormodel],d.zmin=e.zminDflt,d.zmax=e.zmaxDflt),s("zsmooth"),s("text"),s("hovertext"),s("hovertemplate"),d._length=null):d.visible=!1}},30835:function(Q){Q.exports=function(z,t){return"xVal"in t&&(z.x=t.xVal),"yVal"in t&&(z.y=t.yVal),t.xa&&(z.xaxis=t.xa),t.ya&&(z.yaxis=t.ya),z.color=t.color,z.colormodel=t.trace.colormodel,z.z||(z.z=t.color),z}},67395:function(Q,z,t){var S=t(33575),k=t(25095).IMAGE_URL_PREFIX,l=t(12856).Buffer;z.A=function(T){var b=T.replace(k,""),d=new l(b,"base64");return S(d)}},28749:function(Q,z,t){var S=t(30211),k=t(71828),l=t(51877);Q.exports=function(T,b,d){var s=T.cd[0],e=s.trace,i=T.xa,r=T.ya;if(!(S.inbox(b-s.x0,b-(s.x0+s.w*e.dx),0)>0||S.inbox(d-s.y0,d-(s.y0+s.h*e.dy),0)>0)){var n,a=Math.floor((b-s.x0)/e.dx),o=Math.floor(Math.abs(d-s.y0)/e.dy);if(e._hasZ?n=s.z[o][a]:e._hasSource&&(n=e._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(a,o,1,1).data),n){var u,p=s.hi||e.hoverinfo;if(p){var c=p.split("+");c.indexOf("all")!==-1&&(c=["color"]),c.indexOf("color")!==-1&&(u=!0)}var x,g=l.colormodel[e.colormodel],f=g.colormodel||e.colormodel,y=f.length,v=e._scaler(n),m=g.suffix,_=[];(e.hovertemplate||u)&&(_.push("["+[v[0]+m[0],v[1]+m[1],v[2]+m[2]].join(", ")),y===4&&_.push(", "+v[3]+m[3]),_.push("]"),_=_.join(""),T.extraText=f.toUpperCase()+": "+_),Array.isArray(e.hovertext)&&Array.isArray(e.hovertext[o])?x=e.hovertext[o][a]:Array.isArray(e.text)&&Array.isArray(e.text[o])&&(x=e.text[o][a]);var h=r.c2p(s.y0+(o+.5)*e.dy),A=s.x0+(a+.5)*e.dx,w=s.y0+(o+.5)*e.dy,E="["+n.slice(0,e.colormodel.length).join(", ")+"]";return[k.extendFlat(T,{index:[o,a],x0:i.c2p(s.x0+a*e.dx),x1:i.c2p(s.x0+(a+1)*e.dx),y0:h,y1:h,color:v,xVal:A,xLabelVal:A,yVal:w,yLabelVal:w,zLabelVal:E,text:x,hovertemplateLabels:{zLabel:E,colorLabel:_,"color[0]Label":v[0]+m[0],"color[1]Label":v[1]+m[1],"color[2]Label":v[2]+m[2],"color[3]Label":v[3]+m[3]}})]}}}},94507:function(Q,z,t){Q.exports={attributes:t(17230),supplyDefaults:t(13245),calc:t(71113),plot:t(60775),style:t(12826),hoverPoints:t(28749),eventData:t(30835),moduleType:"trace",name:"image",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},60775:function(Q,z,t){var S=t(39898),k=t(71828),l=k.strTranslate,T=t(77922),b=t(51877),d=t(3883),s=t(32396).STYLE;Q.exports=function(e,i,r,n){var a=i.xaxis,o=i.yaxis,u=!e._context._exportedPlot&&d();k.makeTraceGroups(n,r,"im").each(function(p){var c=S.select(this),x=p[0],g=x.trace,f=(g.zsmooth==="fast"||g.zsmooth===!1&&u)&&!g._hasZ&&g._hasSource&&a.type==="linear"&&o.type==="linear";g._realImage=f;var y,v,m,_,h,A,w=x.z,E=x.x0,L=x.y0,C=x.w,P=x.h,D=g.dx,G=g.dy;for(A=0;y===void 0&&A<C;)y=a.c2p(E+A*D),A++;for(A=C;v===void 0&&A>0;)v=a.c2p(E+A*D),A--;for(A=0;_===void 0&&A<P;)_=o.c2p(L+A*G),A++;for(A=P;h===void 0&&A>0;)h=o.c2p(L+A*G),A--;v<y&&(m=v,v=y,y=m),h<_&&(m=_,_=h,h=m),f||(y=Math.max(-.5*a._length,y),v=Math.min(1.5*a._length,v),_=Math.max(-.5*o._length,_),h=Math.min(1.5*o._length,h));var I=Math.round(v-y),H=Math.round(h-_);if(I<=0||H<=0)c.selectAll("image").data([]).exit().remove();else{var N=c.selectAll("image").data([p]);N.enter().append("svg:image").attr({xmlns:T.svg,preserveAspectRatio:"none"}),N.exit().remove();var F=g.zsmooth===!1?s:"";if(f){var V=k.simpleMap(a.range,a.r2l),q=k.simpleMap(o.range,o.r2l),te=V[1]<V[0],$=q[1]>q[0];if(te||$){var W=y+I/2,Z=_+H/2;F+="transform:"+l(W+"px",Z+"px")+"scale("+(te?-1:1)+","+($?-1:1)+")"+l(-W+"px",-Z+"px")+";"}}N.attr("style",F);var J=new Promise(function(re){if(g._hasZ)re();else if(g._hasSource)if(g._canvas&&g._canvas.el.width===C&&g._canvas.el.height===P&&g._canvas.source===g.source)re();else{var ae=document.createElement("canvas");ae.width=C,ae.height=P;var oe=ae.getContext("2d",{willReadFrequently:!0});g._image=g._image||new Image;var ce=g._image;ce.onload=function(){oe.drawImage(ce,0,0),g._canvas={el:ae,source:g.source},re()},ce.setAttribute("src",g.source)}}).then(function(){var re,ae;if(g._hasZ)ae=ee(function(ce,pe){return w[pe][ce]}),re=ae.toDataURL("image/png");else if(g._hasSource)if(f)re=g.source;else{var oe=g._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,C,P).data;ae=ee(function(ce,pe){var ve=4*(pe*C+ce);return[oe[ve],oe[ve+1],oe[ve+2],oe[ve+3]]}),re=ae.toDataURL("image/png")}N.attr({"xlink:href":re,height:H,width:I,x:y,y:_})});e._promises.push(J)}function ee(re){var ae=document.createElement("canvas");ae.width=I,ae.height=H;var oe,ce=ae.getContext("2d",{willReadFrequently:!0}),pe=function(ne){return k.constrain(Math.round(a.c2p(E+ne*D)-y),0,I)},ve=function(ne){return k.constrain(Math.round(o.c2p(L+ne*G)-_),0,H)},we=b.colormodel[g.colormodel],xe=we.colormodel||g.colormodel,ge=we.fmt;for(A=0;A<x.w;A++){var Oe=pe(A),Ae=pe(A+1);if(Ae!==Oe&&!isNaN(Ae)&&!isNaN(Oe))for(var Te=0;Te<x.h;Te++){var se=ve(Te),le=ve(Te+1);le===se||isNaN(le)||isNaN(se)||!re(A,Te)||(oe=g._scaler(re(A,Te)),ce.fillStyle=oe?xe+"("+ge(oe).join(",")+")":"rgba(0,0,0,0)",ce.fillRect(Oe,se,Ae-Oe,le-se))}}return ae}})}},12826:function(Q,z,t){var S=t(39898);Q.exports=function(k){S.select(k).selectAll(".im image").style("opacity",function(l){return l[0].trace.opacity})}},54846:function(Q,z,t){var S=t(1426).extendFlat,k=t(1426).extendDeep,l=t(30962).overrideAll,T=t(41940),b=t(22399),d=t(27670).Y,s=t(13838),e=t(44467).templatedArray,i=t(22372),r=t(12663).descriptionOnlyNumbers,n=T({editType:"plot",colorEditType:"plot"}),a={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:b.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},o={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},u=e("step",k({},a,{range:o}));Q.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:d({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:S({},n,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:r("value")},font:S({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:r("value")},increasing:{symbol:{valType:"string",dflt:i.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:i.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:S({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:k({},a,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:l({range:o,visible:S({},s.visible,{dflt:!0}),tickmode:s.minor.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:S({},s.ticks,{dflt:"outside"}),ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,ticklabelstep:s.ticklabelstep,showticklabels:s.showticklabels,labelalias:s.labelalias,tickfont:T({}),tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,tickprefix:s.tickprefix,showtickprefix:s.showtickprefix,ticksuffix:s.ticksuffix,showticksuffix:s.showticksuffix,separatethousands:s.separatethousands,exponentformat:s.exponentformat,minexponent:s.minexponent,showexponent:s.showexponent,editType:"plot"},"plot"),steps:u,threshold:{line:{color:S({},a.line.color,{}),width:S({},a.line.width,{dflt:1}),editType:"plot"},thickness:S({},a.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},15970:function(Q,z,t){var S=t(74875);z.name="indicator",z.plot=function(k,l,T,b){S.plotBasePlot(z.name,k,l,T,b)},z.clean=function(k,l,T,b){S.cleanBasePlot(z.name,k,l,T,b)}},24667:function(Q){Q.exports={calc:function(z,t){var S=[],k=t.value;typeof t._lastValue!="number"&&(t._lastValue=t.value);var l=t._lastValue,T=l;return t._hasDelta&&typeof t.delta.reference=="number"&&(T=t.delta.reference),S[0]={y:k,lastY:l,delta:k-T,relativeDelta:(k-T)/T},S}}},84577:function(Q){Q.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},94425:function(Q,z,t){var S=t(71828),k=t(54846),l=t(27670).c,T=t(44467),b=t(85501),d=t(84577),s=t(26218),e=t(38701),i=t(96115),r=t(89426);function n(a,o){function u(p,c){return S.coerce(a,o,k.gauge.steps,p,c)}u("color"),u("line.color"),u("line.width"),u("range"),u("thickness")}Q.exports={supplyDefaults:function(a,o,u,p){function c(L,C){return S.coerce(a,o,k,L,C)}l(o,p,c),c("mode"),o._hasNumber=o.mode.indexOf("number")!==-1,o._hasDelta=o.mode.indexOf("delta")!==-1,o._hasGauge=o.mode.indexOf("gauge")!==-1;var x=c("value");o._range=[0,typeof x=="number"?1.5*x:1];var g,f,y,v,m,_,h=new Array(2);function A(L,C){return S.coerce(y,v,k.gauge,L,C)}function w(L,C){return S.coerce(m,_,k.gauge.axis,L,C)}if(o._hasNumber&&(c("number.valueformat"),c("number.font.color",p.font.color),c("number.font.family",p.font.family),c("number.font.size"),o.number.font.size===void 0&&(o.number.font.size=d.defaultNumberFontSize,h[0]=!0),c("number.prefix"),c("number.suffix"),g=o.number.font.size),o._hasDelta&&(c("delta.font.color",p.font.color),c("delta.font.family",p.font.family),c("delta.font.size"),o.delta.font.size===void 0&&(o.delta.font.size=(o._hasNumber?.5:1)*(g||d.defaultNumberFontSize),h[1]=!0),c("delta.reference",o.value),c("delta.relative"),c("delta.valueformat",o.delta.relative?"2%":""),c("delta.increasing.symbol"),c("delta.increasing.color"),c("delta.decreasing.symbol"),c("delta.decreasing.color"),c("delta.position"),c("delta.prefix"),c("delta.suffix"),f=o.delta.font.size),o._scaleNumbers=(!o._hasNumber||h[0])&&(!o._hasDelta||h[1])||!1,c("title.font.color",p.font.color),c("title.font.family",p.font.family),c("title.font.size",.25*(g||f||d.defaultNumberFontSize)),c("title.text"),o._hasGauge){(y=a.gauge)||(y={}),v=T.newContainer(o,"gauge"),A("shape"),(o._isBullet=o.gauge.shape==="bullet")||c("title.align","center"),(o._isAngular=o.gauge.shape==="angular")||c("align","center"),A("bgcolor",p.paper_bgcolor),A("borderwidth"),A("bordercolor"),A("bar.color"),A("bar.line.color"),A("bar.line.width"),A("bar.thickness",d.valueThickness*(o.gauge.shape==="bullet"?.5:1)),b(y,v,{name:"steps",handleItemDefaults:n}),A("threshold.value"),A("threshold.thickness"),A("threshold.line.width"),A("threshold.line.color"),m={},y&&(m=y.axis||{}),_=T.newContainer(v,"axis"),w("visible"),o._range=w("range",o._range);var E={outerTicks:!0};s(m,_,w,"linear"),r(m,_,w,"linear",E),i(m,_,w,"linear",E),e(m,_,w,E)}else c("title.align","center"),c("align","center"),o._isAngular=o._isBullet=!1;o._length=null}}},15154:function(Q,z,t){Q.exports={moduleType:"trace",name:"indicator",basePlotModule:t(15970),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:t(54846),supplyDefaults:t(94425).supplyDefaults,calc:t(24667).calc,plot:t(75634),meta:{}}},75634:function(Q,z,t){var S=t(39898),k=t(81684).sX,l=t(81684).k4,T=t(71828),b=T.strScale,d=T.strTranslate,s=T.rad2deg,e=t(18783).MID_SHIFT,i=t(91424),r=t(84577),n=t(63893),a=t(89298),o=t(71453),u=t(52830),p=t(13838),c=t(7901),x={left:"start",center:"middle",right:"end"},g={left:0,center:.5,right:1},f=/[yzafpnmkMGTPEZY]/;function y(w){return w&&w.duration>0}function v(w){w.each(function(E){c.stroke(S.select(this),E.line.color)}).each(function(E){c.fill(S.select(this),E.color)}).style("stroke-width",function(E){return E.line.width})}function m(w,E,L){var C=w._fullLayout,P=T.extendFlat({type:"linear",ticks:"outside",range:L,showline:!0},E),D={type:"linear",_id:"x"+E._id},G={letter:"x",font:C.font,noHover:!0,noTickson:!0};function I(H,N){return T.coerce(P,D,p,H,N)}return o(P,D,I,G,C),u(P,D,I,G),D}function _(w,E,L){return[Math.min(E/w.width,L/w.height),w,E+"x"+L]}function h(w,E,L,C){var P=document.createElementNS("http://www.w3.org/2000/svg","text"),D=S.select(P);return D.text(w).attr("x",0).attr("y",0).attr("text-anchor",L).attr("data-unformatted",w).call(n.convertToTspans,C).call(i.font,E),i.bBox(D.node())}function A(w,E,L,C,P,D){var G="_cache"+E;w[G]&&w[G].key===P||(w[G]={key:P,value:L});var I=T.aggNums(D,null,[w[G].value,C],2);return w[G].value=I,I}Q.exports=function(w,E,L,C){var P,D=w._fullLayout;y(L)&&C&&(P=C()),T.makeTraceGroups(D._indicatorlayer,E,"trace").each(function(G){var I,H,N,F,V,q=G[0].trace,te=S.select(this),$=q._hasGauge,W=q._isAngular,Z=q._isBullet,J=q.domain,ee={w:D._size.w*(J.x[1]-J.x[0]),h:D._size.h*(J.y[1]-J.y[0]),l:D._size.l+D._size.w*J.x[0],r:D._size.r+D._size.w*(1-J.x[1]),t:D._size.t+D._size.h*(1-J.y[1]),b:D._size.b+D._size.h*J.y[0]},re=ee.l+ee.w/2,ae=ee.t+ee.h/2,oe=Math.min(ee.w/2,ee.h),ce=r.innerRadius*oe,pe=q.align||"center";if(H=ae,$){if(W&&(I=re,H=ae+oe/2,N=function(se){return function(le,ne){return[ne/Math.sqrt(le.width/2*(le.width/2)+le.height*le.height),le,ne]}(se,.9*ce)}),Z){var ve=r.bulletPadding,we=1-r.bulletNumberDomainSize+ve;I=ee.l+(we+(1-we)*g[pe])*ee.w,N=function(se){return _(se,(r.bulletNumberDomainSize-ve)*ee.w,ee.h)}}}else I=ee.l+g[pe]*ee.w,N=function(se){return _(se,ee.w,ee.h)};(function(se,le,ne,me){var Ee,be,De,Ue=ne[0].trace,he=me.numbersX,ke=me.numbersY,_e=Ue.align||"center",Ce=x[_e],Fe=me.transitionOpts,Re=me.onComplete,He=T.ensureSingle(le,"g","numbers"),Ge=[];Ue._hasNumber&&Ge.push("number"),Ue._hasDelta&&(Ge.push("delta"),Ue.delta.position==="left"&&Ge.reverse());var $e=He.selectAll("text").data(Ge);function st(wt,Ot,Ct,Ye){if(!wt.match("s")||Ct>=0==Ye>=0||Ot(Ct).slice(-1).match(f)||Ot(Ye).slice(-1).match(f))return Ot;var Xe=wt.slice().replace("s","f").replace(/\d+/,function(We){return parseInt(We)-1}),Ve=m(se,{tickformat:Xe});return function(We){return Math.abs(We)<1?a.tickText(Ve,We).text:Ot(We)}}$e.enter().append("text"),$e.attr("text-anchor",function(){return Ce}).attr("class",function(wt){return wt}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),$e.exit().remove();var Ke,gt=Ue.mode+Ue.align;if(Ue._hasDelta&&(Ke=function(){var wt=m(se,{tickformat:Ue.delta.valueformat},Ue._range);wt.setScale(),a.prepTicks(wt);var Ot=function(Ie){return a.tickText(wt,Ie).text},Ct=Ue.delta.suffix,Ye=Ue.delta.prefix,Xe=function(Ie){return Ue.delta.relative?Ie.relativeDelta:Ie.delta},Ve=function(Ie,ze){return Ie===0||typeof Ie!="number"||isNaN(Ie)?"-":(Ie>0?Ue.delta.increasing.symbol:Ue.delta.decreasing.symbol)+Ye+ze(Ie)+Ct},We=function(Ie){return Ie.delta>=0?Ue.delta.increasing.color:Ue.delta.decreasing.color};Ue._deltaLastValue===void 0&&(Ue._deltaLastValue=Xe(ne[0]));var nt=He.select("text.delta");function ot(){nt.text(Ve(Xe(ne[0]),Ot)).call(c.fill,We(ne[0])).call(n.convertToTspans,se)}return nt.call(i.font,Ue.delta.font).call(c.fill,We({delta:Ue._deltaLastValue})),y(Fe)?nt.transition().duration(Fe.duration).ease(Fe.easing).tween("text",function(){var Ie=S.select(this),ze=Xe(ne[0]),et=Ue._deltaLastValue,tt=st(Ue.delta.valueformat,Ot,et,ze),dt=l(et,ze);return Ue._deltaLastValue=ze,function(pt){Ie.text(Ve(dt(pt),tt)),Ie.call(c.fill,We({delta:dt(pt)}))}}).each("end",function(){ot(),Re&&Re()}).each("interrupt",function(){ot(),Re&&Re()}):ot(),be=h(Ve(Xe(ne[0]),Ot),Ue.delta.font,Ce,se),nt}(),gt+=Ue.delta.position+Ue.delta.font.size+Ue.delta.font.family+Ue.delta.valueformat,gt+=Ue.delta.increasing.symbol+Ue.delta.decreasing.symbol,De=be),Ue._hasNumber&&(function(){var wt=m(se,{tickformat:Ue.number.valueformat},Ue._range);wt.setScale(),a.prepTicks(wt);var Ot=function(We){return a.tickText(wt,We).text},Ct=Ue.number.suffix,Ye=Ue.number.prefix,Xe=He.select("text.number");function Ve(){var We=typeof ne[0].y=="number"?Ye+Ot(ne[0].y)+Ct:"-";Xe.text(We).call(i.font,Ue.number.font).call(n.convertToTspans,se)}y(Fe)?Xe.transition().duration(Fe.duration).ease(Fe.easing).each("end",function(){Ve(),Re&&Re()}).each("interrupt",function(){Ve(),Re&&Re()}).attrTween("text",function(){var We=S.select(this),nt=l(ne[0].lastY,ne[0].y);Ue._lastValue=ne[0].y;var ot=st(Ue.number.valueformat,Ot,ne[0].lastY,ne[0].y);return function(Ie){We.text(Ye+ot(nt(Ie))+Ct)}}):Ve(),Ee=h(Ye+Ot(ne[0].y)+Ct,Ue.number.font,Ce,se)}(),gt+=Ue.number.font.size+Ue.number.font.family+Ue.number.valueformat+Ue.number.suffix+Ue.number.prefix,De=Ee),Ue._hasDelta&&Ue._hasNumber){var mt,at,rt=[(Ee.left+Ee.right)/2,(Ee.top+Ee.bottom)/2],xt=[(be.left+be.right)/2,(be.top+be.bottom)/2],Tt=.75*Ue.delta.font.size;Ue.delta.position==="left"&&(mt=A(Ue,"deltaPos",0,-1*(Ee.width*g[Ue.align]+be.width*(1-g[Ue.align])+Tt),gt,Math.min),at=rt[1]-xt[1],De={width:Ee.width+be.width+Tt,height:Math.max(Ee.height,be.height),left:be.left+mt,right:Ee.right,top:Math.min(Ee.top,be.top+at),bottom:Math.max(Ee.bottom,be.bottom+at)}),Ue.delta.position==="right"&&(mt=A(Ue,"deltaPos",0,Ee.width*(1-g[Ue.align])+be.width*g[Ue.align]+Tt,gt,Math.max),at=rt[1]-xt[1],De={width:Ee.width+be.width+Tt,height:Math.max(Ee.height,be.height),left:Ee.left,right:be.right+mt,top:Math.min(Ee.top,be.top+at),bottom:Math.max(Ee.bottom,be.bottom+at)}),Ue.delta.position==="bottom"&&(mt=null,at=be.height,De={width:Math.max(Ee.width,be.width),height:Ee.height+be.height,left:Math.min(Ee.left,be.left),right:Math.max(Ee.right,be.right),top:Ee.bottom-Ee.height,bottom:Ee.bottom+be.height}),Ue.delta.position==="top"&&(mt=null,at=Ee.top,De={width:Math.max(Ee.width,be.width),height:Ee.height+be.height,left:Math.min(Ee.left,be.left),right:Math.max(Ee.right,be.right),top:Ee.bottom-Ee.height-be.height,bottom:Ee.bottom}),Ke.attr({dx:mt,dy:at})}(Ue._hasNumber||Ue._hasDelta)&&He.attr("transform",function(){var wt=me.numbersScaler(De);gt+=wt[2];var Ot,Ct=A(Ue,"numbersScale",1,wt[0],gt,Math.min);Ue._scaleNumbers||(Ct=1),Ot=Ue._isAngular?ke-Ct*De.bottom:ke-Ct*(De.top+De.bottom)/2,Ue._numbersTop=Ct*De.top+Ot;var Ye=De[_e];_e==="center"&&(Ye=(De.left+De.right)/2);var Xe=he-Ct*Ye;return Xe=A(Ue,"numbersTranslate",0,Xe,gt,Math.max),d(Xe,Ot)+b(Ct)})})(w,te,G,{numbersX:I,numbersY:H,numbersScaler:N,transitionOpts:L,onComplete:P}),$&&(F={range:q.gauge.axis.range,color:q.gauge.bgcolor,line:{color:q.gauge.bordercolor,width:0},thickness:1},V={range:q.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:q.gauge.bordercolor,width:q.gauge.borderwidth},thickness:1});var xe=te.selectAll("g.angular").data(W?G:[]);xe.exit().remove();var ge=te.selectAll("g.angularaxis").data(W?G:[]);ge.exit().remove(),W&&function(se,le,ne,me){var Ee,be,De,Ue,he=ne[0].trace,ke=me.size,_e=me.radius,Ce=me.innerRadius,Fe=me.gaugeBg,Re=me.gaugeOutline,He=[ke.l+ke.w/2,ke.t+ke.h/2+_e/2],Ge=me.gauge,$e=me.layer,st=me.transitionOpts,Ke=me.onComplete,gt=Math.PI/2;function mt(pt){var vt=he.gauge.axis.range[0],ct=(pt-vt)/(he.gauge.axis.range[1]-vt)*Math.PI-gt;return ct<-gt?-gt:ct>gt?gt:ct}function at(pt){return S.svg.arc().innerRadius((Ce+_e)/2-pt/2*(_e-Ce)).outerRadius((Ce+_e)/2+pt/2*(_e-Ce)).startAngle(-gt)}function rt(pt){pt.attr("d",function(vt){return at(vt.thickness).startAngle(mt(vt.range[0])).endAngle(mt(vt.range[1]))()})}Ge.enter().append("g").classed("angular",!0),Ge.attr("transform",d(He[0],He[1])),$e.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),$e.selectAll("g.xangularaxistick,path,text").remove(),(Ee=m(se,he.gauge.axis)).type="linear",Ee.range=he.gauge.axis.range,Ee._id="xangularaxis",Ee.ticklabeloverflow="allow",Ee.setScale();var xt=function(pt){return(Ee.range[0]-pt.x)/(Ee.range[1]-Ee.range[0])*Math.PI+Math.PI},Tt={},wt=a.makeLabelFns(Ee,0).labelStandoff;Tt.xFn=function(pt){var vt=xt(pt);return Math.cos(vt)*wt},Tt.yFn=function(pt){var vt=xt(pt),ct=Math.sin(vt)>0?.2:1;return-Math.sin(vt)*(wt+pt.fontSize*ct)+Math.abs(Math.cos(vt))*(pt.fontSize*e)},Tt.anchorFn=function(pt){var vt=xt(pt),ct=Math.cos(vt);return Math.abs(ct)<.1?"middle":ct>0?"start":"end"},Tt.heightFn=function(pt,vt,ct){var kt=xt(pt);return-.5*(1+Math.sin(kt))*ct};var Ot=function(pt){return d(He[0]+_e*Math.cos(pt),He[1]-_e*Math.sin(pt))};if(De=function(pt){return Ot(xt(pt))},be=a.calcTicks(Ee),Ue=a.getTickSigns(Ee)[2],Ee.visible){Ue=Ee.ticks==="inside"?-1:1;var Ct=(Ee.linewidth||1)/2;a.drawTicks(se,Ee,{vals:be,layer:$e,path:"M"+Ue*Ct+",0h"+Ue*Ee.ticklen,transFn:function(pt){var vt=xt(pt);return Ot(vt)+"rotate("+-s(vt)+")"}}),a.drawLabels(se,Ee,{vals:be,layer:$e,transFn:De,labelFns:Tt})}var Ye=[Fe].concat(he.gauge.steps),Xe=Ge.selectAll("g.bg-arc").data(Ye);Xe.enter().append("g").classed("bg-arc",!0).append("path"),Xe.select("path").call(rt).call(v),Xe.exit().remove();var Ve=at(he.gauge.bar.thickness),We=Ge.selectAll("g.value-arc").data([he.gauge.bar]);We.enter().append("g").classed("value-arc",!0).append("path");var nt,ot,Ie,ze=We.select("path");y(st)?(ze.transition().duration(st.duration).ease(st.easing).each("end",function(){Ke&&Ke()}).each("interrupt",function(){Ke&&Ke()}).attrTween("d",(nt=Ve,ot=mt(ne[0].lastY),Ie=mt(ne[0].y),function(){var pt=k(ot,Ie);return function(vt){return nt.endAngle(pt(vt))()}})),he._lastValue=ne[0].y):ze.attr("d",typeof ne[0].y=="number"?Ve.endAngle(mt(ne[0].y)):"M0,0Z"),ze.call(v),We.exit().remove(),Ye=[];var et=he.gauge.threshold.value;(et||et===0)&&Ye.push({range:[et,et],color:he.gauge.threshold.color,line:{color:he.gauge.threshold.line.color,width:he.gauge.threshold.line.width},thickness:he.gauge.threshold.thickness});var tt=Ge.selectAll("g.threshold-arc").data(Ye);tt.enter().append("g").classed("threshold-arc",!0).append("path"),tt.select("path").call(rt).call(v),tt.exit().remove();var dt=Ge.selectAll("g.gauge-outline").data([Re]);dt.enter().append("g").classed("gauge-outline",!0).append("path"),dt.select("path").call(rt).call(v),dt.exit().remove()}(w,0,G,{radius:oe,innerRadius:ce,gauge:xe,layer:ge,size:ee,gaugeBg:F,gaugeOutline:V,transitionOpts:L,onComplete:P});var Oe=te.selectAll("g.bullet").data(Z?G:[]);Oe.exit().remove();var Ae=te.selectAll("g.bulletaxis").data(Z?G:[]);Ae.exit().remove(),Z&&function(se,le,ne,me){var Ee,be,De,Ue,he,ke=ne[0].trace,_e=me.gauge,Ce=me.layer,Fe=me.gaugeBg,Re=me.gaugeOutline,He=me.size,Ge=ke.domain,$e=me.transitionOpts,st=me.onComplete;_e.enter().append("g").classed("bullet",!0),_e.attr("transform",d(He.l,He.t)),Ce.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Ce.selectAll("g.xbulletaxistick,path,text").remove();var Ke=He.h,gt=ke.gauge.bar.thickness*Ke,mt=Ge.x[0],at=Ge.x[0]+(Ge.x[1]-Ge.x[0])*(ke._hasNumber||ke._hasDelta?1-r.bulletNumberDomainSize:1);function rt(Xe){Xe.attr("width",function(Ve){return Math.max(0,Ee.c2p(Ve.range[1])-Ee.c2p(Ve.range[0]))}).attr("x",function(Ve){return Ee.c2p(Ve.range[0])}).attr("y",function(Ve){return .5*(1-Ve.thickness)*Ke}).attr("height",function(Ve){return Ve.thickness*Ke})}(Ee=m(se,ke.gauge.axis))._id="xbulletaxis",Ee.domain=[mt,at],Ee.setScale(),be=a.calcTicks(Ee),De=a.makeTransTickFn(Ee),Ue=a.getTickSigns(Ee)[2],he=He.t+He.h,Ee.visible&&(a.drawTicks(se,Ee,{vals:Ee.ticks==="inside"?a.clipEnds(Ee,be):be,layer:Ce,path:a.makeTickPath(Ee,he,Ue),transFn:De}),a.drawLabels(se,Ee,{vals:be,layer:Ce,transFn:De,labelFns:a.makeLabelFns(Ee,he)}));var xt=[Fe].concat(ke.gauge.steps),Tt=_e.selectAll("g.bg-bullet").data(xt);Tt.enter().append("g").classed("bg-bullet",!0).append("rect"),Tt.select("rect").call(rt).call(v),Tt.exit().remove();var wt=_e.selectAll("g.value-bullet").data([ke.gauge.bar]);wt.enter().append("g").classed("value-bullet",!0).append("rect"),wt.select("rect").attr("height",gt).attr("y",(Ke-gt)/2).call(v),y($e)?wt.select("rect").transition().duration($e.duration).ease($e.easing).each("end",function(){st&&st()}).each("interrupt",function(){st&&st()}).attr("width",Math.max(0,Ee.c2p(Math.min(ke.gauge.axis.range[1],ne[0].y)))):wt.select("rect").attr("width",typeof ne[0].y=="number"?Math.max(0,Ee.c2p(Math.min(ke.gauge.axis.range[1],ne[0].y))):0),wt.exit().remove();var Ot=ne.filter(function(){return ke.gauge.threshold.value||ke.gauge.threshold.value===0}),Ct=_e.selectAll("g.threshold-bullet").data(Ot);Ct.enter().append("g").classed("threshold-bullet",!0).append("line"),Ct.select("line").attr("x1",Ee.c2p(ke.gauge.threshold.value)).attr("x2",Ee.c2p(ke.gauge.threshold.value)).attr("y1",(1-ke.gauge.threshold.thickness)/2*Ke).attr("y2",(1-(1-ke.gauge.threshold.thickness)/2)*Ke).call(c.stroke,ke.gauge.threshold.line.color).style("stroke-width",ke.gauge.threshold.line.width),Ct.exit().remove();var Ye=_e.selectAll("g.gauge-outline").data([Re]);Ye.enter().append("g").classed("gauge-outline",!0).append("rect"),Ye.select("rect").call(rt).call(v),Ye.exit().remove()}(w,0,G,{gauge:Oe,layer:Ae,size:ee,gaugeBg:F,gaugeOutline:V,transitionOpts:L,onComplete:P});var Te=te.selectAll("text.title").data(G);Te.exit().remove(),Te.enter().append("text").classed("title",!0),Te.attr("text-anchor",function(){return Z?x.right:x[q.title.align]}).text(q.title.text).call(i.font,q.title.font).call(n.convertToTspans,w),Te.attr("transform",function(){var se,le=ee.l+ee.w*g[q.title.align],ne=r.titlePadding,me=i.bBox(Te.node());return $?(W&&(se=q.gauge.axis.visible?i.bBox(ge.node()).top-ne-me.bottom:ee.t+ee.h/2-oe/2-me.bottom-ne),Z&&(se=H-(me.top+me.bottom)/2,le=ee.l-r.bulletPadding*ee.w)):se=q._numbersTop-ne-me.bottom,d(le,se)})})}},16249:function(Q,z,t){var S=t(50693),k=t(12663).axisHoverFormat,l=t(5386).fF,T=t(2418),b=t(9012),d=t(1426).extendFlat,s=t(30962).overrideAll,e=Q.exports=s(d({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:l(),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),valuehoverformat:k("value",1),showlegend:d({},b.showlegend,{dflt:!1})},S("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,lightposition:T.lightposition,lighting:T.lighting,flatshading:T.flatshading,contour:T.contour,hoverinfo:d({},b.hoverinfo)}),"calc","nested");e.flatshading.dflt=!0,e.lighting.facenormalsepsilon.dflt=0,e.x.editType=e.y.editType=e.z.editType=e.value.editType="calc+clearAxisTypes",e.transforms=void 0},56959:function(Q,z,t){var S=t(78803),k=t(88489).processGrid,l=t(88489).filter;Q.exports=function(T,b){b._len=Math.min(b.x.length,b.y.length,b.z.length,b.value.length),b._x=l(b.x,b._len),b._y=l(b.y,b._len),b._z=l(b.z,b._len),b._value=l(b.value,b._len);var d=k(b);b._gridFill=d.fill,b._Xs=d.Xs,b._Ys=d.Ys,b._Zs=d.Zs,b._len=d.len;for(var s=1/0,e=-1/0,i=0;i<b._len;i++){var r=b._value[i];s=Math.min(s,r),e=Math.max(e,r)}b._minValues=s,b._maxValues=e,b._vMin=b.isomin===void 0||b.isomin===null?s:b.isomin,b._vMax=b.isomax===void 0||b.isomin===null?e:b.isomax,S(T,b,{vals:[b._vMin,b._vMax],containerStr:"",cLetter:"c"})}},22674:function(Q,z,t){var S=t(9330).gl_mesh3d,k=t(81697).parseColorScale,l=t(78614),T=t(21081).extractOpts,b=t(90060),d=function(n,a){for(var o=a.length-1;o>0;o--){var u=Math.min(a[o],a[o-1]),p=Math.max(a[o],a[o-1]);if(p>u&&u<n&&n<=p)return{id:o,distRatio:(p-n)/(p-u)}}return{id:0,distRatio:0}};function s(n,a,o){this.scene=n,this.uid=o,this.mesh=a,this.name="",this.data=null,this.showContour=!1}var e=s.prototype;e.handlePick=function(n){if(n.object===this.mesh){var a=n.data.index,o=this.data._meshX[a],u=this.data._meshY[a],p=this.data._meshZ[a],c=this.data._Ys.length,x=this.data._Zs.length,g=d(o,this.data._Xs).id,f=d(u,this.data._Ys).id,y=d(p,this.data._Zs).id,v=n.index=y+x*f+x*c*g;n.traceCoordinate=[this.data._meshX[v],this.data._meshY[v],this.data._meshZ[v],this.data._value[v]];var m=this.data.hovertext||this.data.text;return Array.isArray(m)&&m[v]!==void 0?n.textLabel=m[v]:m&&(n.textLabel=m),!0}},e.update=function(n){var a=this.scene,o=a.fullSceneLayout;function u(x,g,f,y){return g.map(function(v){return x.d2l(v,0,y)*f})}this.data=r(n);var p={positions:b(u(o.xaxis,n._meshX,a.dataScale[0],n.xcalendar),u(o.yaxis,n._meshY,a.dataScale[1],n.ycalendar),u(o.zaxis,n._meshZ,a.dataScale[2],n.zcalendar)),cells:b(n._meshI,n._meshJ,n._meshK),lightPosition:[n.lightposition.x,n.lightposition.y,n.lightposition.z],ambient:n.lighting.ambient,diffuse:n.lighting.diffuse,specular:n.lighting.specular,roughness:n.lighting.roughness,fresnel:n.lighting.fresnel,vertexNormalsEpsilon:n.lighting.vertexnormalsepsilon,faceNormalsEpsilon:n.lighting.facenormalsepsilon,opacity:n.opacity,contourEnable:n.contour.show,contourColor:l(n.contour.color).slice(0,3),contourWidth:n.contour.width,useFacetNormals:n.flatshading},c=T(n);p.vertexIntensity=n._meshIntensity,p.vertexIntensityBounds=[c.min,c.max],p.colormap=k(n),this.mesh.update(p)},e.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var i=["xyz","xzy","yxz","yzx","zxy","zyx"];function r(n){n._meshI=[],n._meshJ=[],n._meshK=[];var a,o,u,p,c,x,g,f=n.surface.show,y=n.spaceframe.show,v=n.surface.fill,m=n.spaceframe.fill,_=!1,h=!1,A=0,w=n._Xs,E=n._Ys,L=n._Zs,C=w.length,P=E.length,D=L.length,G=i.indexOf(n._gridFill.replace(/-/g,"").replace(/\+/g,"")),I=function(_e,Ce,Fe){switch(G){case 5:return Fe+D*Ce+D*P*_e;case 4:return Fe+D*_e+D*C*Ce;case 3:return Ce+P*Fe+P*D*_e;case 2:return Ce+P*_e+P*C*Fe;case 1:return _e+C*Fe+C*D*Ce;default:return _e+C*Ce+C*P*Fe}},H=n._minValues,N=n._maxValues,F=n._vMin,V=n._vMax;function q(_e,Ce,Fe){for(var Re=x.length,He=o;He<Re;He++)if(_e===u[He]&&Ce===p[He]&&Fe===c[He])return He;return-1}function te(){o=a}function $(){u=[],p=[],c=[],x=[],a=0,te()}function W(_e,Ce,Fe,Re){return u.push(_e),p.push(Ce),c.push(Fe),x.push(Re),++a-1}function Z(_e,Ce,Fe){for(var Re=[],He=0;He<_e.length;He++)Re[He]=_e[He]*(1-Fe)+Fe*Ce[He];return Re}function J(_e){g=_e}function ee(_e,Ce){return _e==="all"||_e===null||_e.indexOf(Ce)>-1}function re(_e,Ce){return _e===null?Ce:_e}function ae(_e,Ce,Fe){te();var Re,He,Ge,$e=[Ce],st=[Fe];if(g>=1)$e=[Ce],st=[Fe];else if(g>0){var Ke=function(Ct,Ye){var Xe=Ct[0],Ve=Ct[1],We=Ct[2],nt=function(vt,ct,kt){for(var ut=[],ft=0;ft<vt.length;ft++)ut[ft]=(vt[ft]+ct[ft]+kt[ft])/3;return ut}(Xe,Ve,We),ot=Math.sqrt(1-g),Ie=Z(nt,Xe,ot),ze=Z(nt,Ve,ot),et=Z(nt,We,ot),tt=Ye[0],dt=Ye[1],pt=Ye[2];return{xyzv:[[Xe,Ve,ze],[ze,Ie,Xe],[Ve,We,et],[et,ze,Ve],[We,Xe,Ie],[Ie,et,We]],abc:[[tt,dt,-1],[-1,-1,tt],[dt,pt,-1],[-1,-1,dt],[pt,tt,-1],[-1,-1,pt]]}}(Ce,Fe);$e=Ke.xyzv,st=Ke.abc}for(var gt=0;gt<$e.length;gt++){Ce=$e[gt],Fe=st[gt];for(var mt=[],at=0;at<3;at++){var rt=Ce[at][0],xt=Ce[at][1],Tt=Ce[at][2],wt=Ce[at][3],Ot=Fe[at]>-1?Fe[at]:q(rt,xt,Tt);mt[at]=Ot>-1?Ot:W(rt,xt,Tt,re(_e,wt))}Re=mt[0],He=mt[1],Ge=mt[2],n._meshI.push(Re),n._meshJ.push(He),n._meshK.push(Ge),++A}}function oe(_e,Ce,Fe,Re){var He=_e[3];He<Fe&&(He=Fe),He>Re&&(He=Re);for(var Ge=(_e[3]-He)/(_e[3]-Ce[3]+1e-9),$e=[],st=0;st<4;st++)$e[st]=(1-Ge)*_e[st]+Ge*Ce[st];return $e}function ce(_e,Ce,Fe){return _e>=Ce&&_e<=Fe}function pe(_e){var Ce=.001*(V-F);return _e>=F-Ce&&_e<=V+Ce}function ve(_e){for(var Ce=[],Fe=0;Fe<4;Fe++){var Re=_e[Fe];Ce.push([n._x[Re],n._y[Re],n._z[Re],n._value[Re]])}return Ce}var we=3;function xe(_e,Ce,Fe,Re,He,Ge){Ge||(Ge=1),Fe=[-1,-1,-1];var $e=!1,st=[ce(Ce[0][3],Re,He),ce(Ce[1][3],Re,He),ce(Ce[2][3],Re,He)];if(!st[0]&&!st[1]&&!st[2])return!1;var Ke=function(mt,at,rt){return pe(at[0][3])&&pe(at[1][3])&&pe(at[2][3])?(ae(mt,at,rt),!0):Ge<we&&xe(mt,at,rt,F,V,++Ge)};if(st[0]&&st[1]&&st[2])return Ke(_e,Ce,Fe)||$e;var gt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(mt){if(st[mt[0]]&&st[mt[1]]&&!st[mt[2]]){var at=Ce[mt[0]],rt=Ce[mt[1]],xt=Ce[mt[2]],Tt=oe(xt,at,Re,He),wt=oe(xt,rt,Re,He);$e=Ke(_e,[wt,Tt,at],[-1,-1,Fe[mt[0]]])||$e,$e=Ke(_e,[at,rt,wt],[Fe[mt[0]],Fe[mt[1]],-1])||$e,gt=!0}}),gt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(mt){if(st[mt[0]]&&!st[mt[1]]&&!st[mt[2]]){var at=Ce[mt[0]],rt=Ce[mt[1]],xt=Ce[mt[2]],Tt=oe(rt,at,Re,He),wt=oe(xt,at,Re,He);$e=Ke(_e,[wt,Tt,at],[-1,-1,Fe[mt[0]]])||$e,gt=!0}}),$e}function ge(_e,Ce,Fe,Re){var He=!1,Ge=ve(Ce),$e=[ce(Ge[0][3],Fe,Re),ce(Ge[1][3],Fe,Re),ce(Ge[2][3],Fe,Re),ce(Ge[3][3],Fe,Re)];if(!($e[0]||$e[1]||$e[2]||$e[3]))return He;if($e[0]&&$e[1]&&$e[2]&&$e[3])return h&&(He=function(Ke,gt,mt){var at=function(rt,xt,Tt){ae(Ke,[gt[rt],gt[xt],gt[Tt]],[mt[rt],mt[xt],mt[Tt]])};at(0,1,2),at(3,0,1),at(2,3,0),at(1,2,3)}(_e,Ge,Ce)||He),He;var st=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Ke){if($e[Ke[0]]&&$e[Ke[1]]&&$e[Ke[2]]&&!$e[Ke[3]]){var gt=Ge[Ke[0]],mt=Ge[Ke[1]],at=Ge[Ke[2]],rt=Ge[Ke[3]];if(h)He=ae(_e,[gt,mt,at],[Ce[Ke[0]],Ce[Ke[1]],Ce[Ke[2]]])||He;else{var xt=oe(rt,gt,Fe,Re),Tt=oe(rt,mt,Fe,Re),wt=oe(rt,at,Fe,Re);He=ae(null,[xt,Tt,wt],[-1,-1,-1])||He}st=!0}}),st||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Ke){if($e[Ke[0]]&&$e[Ke[1]]&&!$e[Ke[2]]&&!$e[Ke[3]]){var gt=Ge[Ke[0]],mt=Ge[Ke[1]],at=Ge[Ke[2]],rt=Ge[Ke[3]],xt=oe(at,gt,Fe,Re),Tt=oe(at,mt,Fe,Re),wt=oe(rt,mt,Fe,Re),Ot=oe(rt,gt,Fe,Re);h?(He=ae(_e,[gt,Ot,xt],[Ce[Ke[0]],-1,-1])||He,He=ae(_e,[mt,Tt,wt],[Ce[Ke[1]],-1,-1])||He):He=function(Ct,Ye,Xe){var Ve=function(We,nt,ot){ae(null,[Ye[We],Ye[nt],Ye[ot]],[Xe[We],Xe[nt],Xe[ot]])};Ve(0,1,2),Ve(2,3,0)}(0,[xt,Tt,wt,Ot],[-1,-1,-1,-1])||He,st=!0}}),st||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Ke){if($e[Ke[0]]&&!$e[Ke[1]]&&!$e[Ke[2]]&&!$e[Ke[3]]){var gt=Ge[Ke[0]],mt=Ge[Ke[1]],at=Ge[Ke[2]],rt=Ge[Ke[3]],xt=oe(mt,gt,Fe,Re),Tt=oe(at,gt,Fe,Re),wt=oe(rt,gt,Fe,Re);h?(He=ae(_e,[gt,xt,Tt],[Ce[Ke[0]],-1,-1])||He,He=ae(_e,[gt,Tt,wt],[Ce[Ke[0]],-1,-1])||He,He=ae(_e,[gt,wt,xt],[Ce[Ke[0]],-1,-1])||He):He=ae(null,[xt,Tt,wt],[-1,-1,-1])||He,st=!0}})),He}function Oe(_e,Ce,Fe,Re,He,Ge,$e,st,Ke,gt,mt){var at=!1;return _&&(ee(_e,"A")&&(at=ge(null,[Ce,Fe,Re,Ge],gt,mt)||at),ee(_e,"B")&&(at=ge(null,[Fe,Re,He,Ke],gt,mt)||at),ee(_e,"C")&&(at=ge(null,[Fe,Ge,$e,Ke],gt,mt)||at),ee(_e,"D")&&(at=ge(null,[Re,Ge,st,Ke],gt,mt)||at),ee(_e,"E")&&(at=ge(null,[Fe,Re,Ge,Ke],gt,mt)||at)),h&&(at=ge(_e,[Fe,Re,Ge,Ke],gt,mt)||at),at}function Ae(_e,Ce,Fe,Re,He,Ge,$e,st){return[st[0]===!0||xe(_e,ve([Ce,Fe,Re]),[Ce,Fe,Re],Ge,$e),st[1]===!0||xe(_e,ve([Re,He,Ce]),[Re,He,Ce],Ge,$e)]}function Te(_e,Ce,Fe,Re,He,Ge,$e,st,Ke){return st?Ae(_e,Ce,Fe,He,Re,Ge,$e,Ke):Ae(_e,Fe,He,Re,Ce,Ge,$e,Ke)}function se(_e,Ce,Fe,Re,He,Ge,$e){var st,Ke,gt,mt,at=!1,rt=function(){at=xe(_e,[st,Ke,gt],[-1,-1,-1],He,Ge)||at,at=xe(_e,[gt,mt,st],[-1,-1,-1],He,Ge)||at},xt=$e[0],Tt=$e[1],wt=$e[2];return xt&&(st=Z(ve([I(Ce,Fe-0,Re-0)])[0],ve([I(Ce-1,Fe-0,Re-0)])[0],xt),Ke=Z(ve([I(Ce,Fe-0,Re-1)])[0],ve([I(Ce-1,Fe-0,Re-1)])[0],xt),gt=Z(ve([I(Ce,Fe-1,Re-1)])[0],ve([I(Ce-1,Fe-1,Re-1)])[0],xt),mt=Z(ve([I(Ce,Fe-1,Re-0)])[0],ve([I(Ce-1,Fe-1,Re-0)])[0],xt),rt()),Tt&&(st=Z(ve([I(Ce-0,Fe,Re-0)])[0],ve([I(Ce-0,Fe-1,Re-0)])[0],Tt),Ke=Z(ve([I(Ce-0,Fe,Re-1)])[0],ve([I(Ce-0,Fe-1,Re-1)])[0],Tt),gt=Z(ve([I(Ce-1,Fe,Re-1)])[0],ve([I(Ce-1,Fe-1,Re-1)])[0],Tt),mt=Z(ve([I(Ce-1,Fe,Re-0)])[0],ve([I(Ce-1,Fe-1,Re-0)])[0],Tt),rt()),wt&&(st=Z(ve([I(Ce-0,Fe-0,Re)])[0],ve([I(Ce-0,Fe-0,Re-1)])[0],wt),Ke=Z(ve([I(Ce-0,Fe-1,Re)])[0],ve([I(Ce-0,Fe-1,Re-1)])[0],wt),gt=Z(ve([I(Ce-1,Fe-1,Re)])[0],ve([I(Ce-1,Fe-1,Re-1)])[0],wt),mt=Z(ve([I(Ce-1,Fe-0,Re)])[0],ve([I(Ce-1,Fe-0,Re-1)])[0],wt),rt()),at}function le(_e,Ce,Fe,Re,He,Ge,$e,st,Ke,gt,mt,at){var rt=_e;return at?(_&&_e==="even"&&(rt=null),Oe(rt,Ce,Fe,Re,He,Ge,$e,st,Ke,gt,mt)):(_&&_e==="odd"&&(rt=null),Oe(rt,Ke,st,$e,Ge,He,Re,Fe,Ce,gt,mt))}function ne(_e,Ce,Fe,Re,He){for(var Ge=[],$e=0,st=0;st<Ce.length;st++)for(var Ke=Ce[st],gt=1;gt<D;gt++)for(var mt=1;mt<P;mt++)Ge.push(Te(_e,I(Ke,mt-1,gt-1),I(Ke,mt-1,gt),I(Ke,mt,gt-1),I(Ke,mt,gt),Fe,Re,(Ke+mt+gt)%2,He&&He[$e]?He[$e]:[])),$e++;return Ge}function me(_e,Ce,Fe,Re,He){for(var Ge=[],$e=0,st=0;st<Ce.length;st++)for(var Ke=Ce[st],gt=1;gt<C;gt++)for(var mt=1;mt<D;mt++)Ge.push(Te(_e,I(gt-1,Ke,mt-1),I(gt,Ke,mt-1),I(gt-1,Ke,mt),I(gt,Ke,mt),Fe,Re,(gt+Ke+mt)%2,He&&He[$e]?He[$e]:[])),$e++;return Ge}function Ee(_e,Ce,Fe,Re,He){for(var Ge=[],$e=0,st=0;st<Ce.length;st++)for(var Ke=Ce[st],gt=1;gt<P;gt++)for(var mt=1;mt<C;mt++)Ge.push(Te(_e,I(mt-1,gt-1,Ke),I(mt-1,gt,Ke),I(mt,gt-1,Ke),I(mt,gt,Ke),Fe,Re,(mt+gt+Ke)%2,He&&He[$e]?He[$e]:[])),$e++;return Ge}function be(_e,Ce,Fe){for(var Re=1;Re<D;Re++)for(var He=1;He<P;He++)for(var Ge=1;Ge<C;Ge++)le(_e,I(Ge-1,He-1,Re-1),I(Ge-1,He-1,Re),I(Ge-1,He,Re-1),I(Ge-1,He,Re),I(Ge,He-1,Re-1),I(Ge,He-1,Re),I(Ge,He,Re-1),I(Ge,He,Re),Ce,Fe,(Ge+He+Re)%2)}function De(_e,Ce,Fe,Re,He,Ge){for(var $e=[],st=0,Ke=0;Ke<Ce.length;Ke++)for(var gt=Ce[Ke],mt=1;mt<D;mt++)for(var at=1;at<P;at++)$e.push(se(_e,gt,at,mt,Fe,Re,He[Ke],Ge&&Ge[st]&&Ge[st])),st++;return $e}function Ue(_e,Ce,Fe,Re,He,Ge){for(var $e=[],st=0,Ke=0;Ke<Ce.length;Ke++)for(var gt=Ce[Ke],mt=1;mt<C;mt++)for(var at=1;at<D;at++)$e.push(se(_e,mt,gt,at,Fe,Re,He[Ke],Ge&&Ge[st]&&Ge[st])),st++;return $e}function he(_e,Ce,Fe,Re,He,Ge){for(var $e=[],st=0,Ke=0;Ke<Ce.length;Ke++)for(var gt=Ce[Ke],mt=1;mt<P;mt++)for(var at=1;at<C;at++)$e.push(se(_e,at,mt,gt,Fe,Re,He[Ke],Ge&&Ge[st]&&Ge[st])),st++;return $e}function ke(_e,Ce){for(var Fe=[],Re=_e;Re<Ce;Re++)Fe.push(Re);return Fe}return function(){$(),function(){for(var Ke=0;Ke<C;Ke++)for(var gt=0;gt<P;gt++)for(var mt=0;mt<D;mt++){var at=I(Ke,gt,mt);W(n._x[at],n._y[at],n._z[at],n._value[at])}}();var _e=null;if(y&&m&&(J(m),h=!0,be(_e,F,V),h=!1),f&&v){J(v);for(var Ce=n.surface.pattern,Fe=n.surface.count,Re=0;Re<Fe;Re++){var He=Fe===1?.5:Re/(Fe-1),Ge=(1-He)*F+He*V,$e=Math.abs(Ge-H)>Math.abs(Ge-N)?[H,Ge]:[Ge,N];_=!0,be(Ce,$e[0],$e[1]),_=!1}}var st=[[Math.min(F,N),Math.max(F,N)],[Math.min(H,V),Math.max(H,V)]];["x","y","z"].forEach(function(Ke){for(var gt=[],mt=0;mt<st.length;mt++){var at=0,rt=st[mt][0],xt=st[mt][1],Tt=n.slices[Ke];if(Tt.show&&Tt.fill){J(Tt.fill);var wt=[],Ot=[],Ct=[];if(Tt.locations.length)for(var Ye=0;Ye<Tt.locations.length;Ye++){var Xe=d(Tt.locations[Ye],Ke==="x"?w:Ke==="y"?E:L);Xe.distRatio===0?wt.push(Xe.id):Xe.id>0&&(Ot.push(Xe.id),Ke==="x"?Ct.push([Xe.distRatio,0,0]):Ke==="y"?Ct.push([0,Xe.distRatio,0]):Ct.push([0,0,Xe.distRatio]))}else wt=ke(1,Ke==="x"?C-1:Ke==="y"?P-1:D-1);Ot.length>0&&(gt[at]=Ke==="x"?De(_e,Ot,rt,xt,Ct,gt[at]):Ke==="y"?Ue(_e,Ot,rt,xt,Ct,gt[at]):he(_e,Ot,rt,xt,Ct,gt[at]),at++),wt.length>0&&(gt[at]=Ke==="x"?ne(_e,wt,rt,xt,gt[at]):Ke==="y"?me(_e,wt,rt,xt,gt[at]):Ee(_e,wt,rt,xt,gt[at]),at++)}var Ve=n.caps[Ke];Ve.show&&Ve.fill&&(J(Ve.fill),gt[at]=Ke==="x"?ne(_e,[0,C-1],rt,xt,gt[at]):Ke==="y"?me(_e,[0,P-1],rt,xt,gt[at]):Ee(_e,[0,D-1],rt,xt,gt[at]),at++)}}),A===0&&$(),n._meshX=u,n._meshY=p,n._meshZ=c,n._meshIntensity=x,n._Xs=w,n._Ys=E,n._Zs=L}(),n}Q.exports={findNearestOnAxis:d,generateIsoMeshes:r,createIsosurfaceTrace:function(n,a){var o=n.glplot.gl,u=S({gl:o}),p=new s(n,u,a.uid);return u._trace=p,p.update(a),n.glplot.add(u),p}}},82738:function(Q,z,t){var S=t(71828),k=t(73972),l=t(16249),T=t(1586);function b(d,s,e,i,r){var n=r("isomin"),a=r("isomax");a!=null&&n!=null&&n>a&&(s.isomin=null,s.isomax=null);var o=r("x"),u=r("y"),p=r("z"),c=r("value");o&&o.length&&u&&u.length&&p&&p.length&&c&&c.length?(k.getComponentMethod("calendars","handleTraceDefaults")(d,s,["x","y","z"],i),r("valuehoverformat"),["x","y","z"].forEach(function(x){r(x+"hoverformat");var g="caps."+x;r(g+".show")&&r(g+".fill");var f="slices."+x;r(f+".show")&&(r(f+".fill"),r(f+".locations"))}),r("spaceframe.show")&&r("spaceframe.fill"),r("surface.show")&&(r("surface.count"),r("surface.fill"),r("surface.pattern")),r("contour.show")&&(r("contour.color"),r("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(x){r(x)}),T(d,s,i,r,{prefix:"",cLetter:"c"}),s._length=null):s.visible=!1}Q.exports={supplyDefaults:function(d,s,e,i){b(d,s,0,i,function(r,n){return S.coerce(d,s,l,r,n)})},supplyIsoDefaults:b}},64943:function(Q,z,t){Q.exports={attributes:t(16249),supplyDefaults:t(82738).supplyDefaults,calc:t(56959),colorbar:{min:"cmin",max:"cmax"},plot:t(22674).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:t(58547),categories:["gl3d","showLegend"],meta:{}}},2418:function(Q,z,t){var S=t(50693),k=t(12663).axisHoverFormat,l=t(5386).fF,T=t(54532),b=t(9012),d=t(1426).extendFlat;Q.exports=d({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:l({editType:"calc"}),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},S("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:d({},T.contours.x.show,{}),color:T.contours.x.color,width:T.contours.x.width,editType:"calc"},lightposition:{x:d({},T.lightposition.x,{dflt:1e5}),y:d({},T.lightposition.y,{dflt:1e5}),z:d({},T.lightposition.z,{dflt:0}),editType:"calc"},lighting:d({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},T.lighting),hoverinfo:d({},b.hoverinfo,{editType:"calc"}),showlegend:d({},b.showlegend,{dflt:!1})})},82932:function(Q,z,t){var S=t(78803);Q.exports=function(k,l){l.intensity&&S(k,l,{vals:l.intensity,containerStr:"",cLetter:"c"})}},91134:function(Q,z,t){var S=t(9330).gl_mesh3d,k=t(9330).delaunay_triangulate,l=t(9330).alpha_shape,T=t(9330).convex_hull,b=t(81697).parseColorScale,d=t(78614),s=t(21081).extractOpts,e=t(90060);function i(p,c,x){this.scene=p,this.uid=x,this.mesh=c,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var r=i.prototype;function n(p){for(var c=[],x=p.length,g=0;g<x;g++)c[g]=d(p[g]);return c}function a(p,c,x,g){for(var f=[],y=c.length,v=0;v<y;v++)f[v]=p.d2l(c[v],0,g)*x;return f}function o(p){for(var c=[],x=p.length,g=0;g<x;g++)c[g]=Math.round(p[g]);return c}function u(p,c){for(var x=p.length,g=0;g<x;g++)if(p[g]<=-.5||p[g]>=c-.5)return!1;return!0}r.handlePick=function(p){if(p.object===this.mesh){var c=p.index=p.data.index;p.data._cellCenter?p.traceCoordinate=p.data.dataCoordinate:p.traceCoordinate=[this.data.x[c],this.data.y[c],this.data.z[c]];var x=this.data.hovertext||this.data.text;return Array.isArray(x)&&x[c]!==void 0?p.textLabel=x[c]:x&&(p.textLabel=x),!0}},r.update=function(p){var c=this.scene,x=c.fullSceneLayout;this.data=p;var g,f=p.x.length,y=e(a(x.xaxis,p.x,c.dataScale[0],p.xcalendar),a(x.yaxis,p.y,c.dataScale[1],p.ycalendar),a(x.zaxis,p.z,c.dataScale[2],p.zcalendar));if(p.i&&p.j&&p.k){if(p.i.length!==p.j.length||p.j.length!==p.k.length||!u(p.i,f)||!u(p.j,f)||!u(p.k,f))return;g=e(o(p.i),o(p.j),o(p.k))}else g=p.alphahull===0?T(y):p.alphahull>0?l(p.alphahull,y):function(h,A){for(var w=["x","y","z"].indexOf(h),E=[],L=A.length,C=0;C<L;C++)E[C]=[A[C][(w+1)%3],A[C][(w+2)%3]];return k(E)}(p.delaunayaxis,y);var v={positions:y,cells:g,lightPosition:[p.lightposition.x,p.lightposition.y,p.lightposition.z],ambient:p.lighting.ambient,diffuse:p.lighting.diffuse,specular:p.lighting.specular,roughness:p.lighting.roughness,fresnel:p.lighting.fresnel,vertexNormalsEpsilon:p.lighting.vertexnormalsepsilon,faceNormalsEpsilon:p.lighting.facenormalsepsilon,opacity:p.opacity,contourEnable:p.contour.show,contourColor:d(p.contour.color).slice(0,3),contourWidth:p.contour.width,useFacetNormals:p.flatshading};if(p.intensity){var m=s(p);this.color="#fff";var _=p.intensitymode;v[_+"Intensity"]=p.intensity,v[_+"IntensityBounds"]=[m.min,m.max],v.colormap=b(p)}else p.vertexcolor?(this.color=p.vertexcolor[0],v.vertexColors=n(p.vertexcolor)):p.facecolor?(this.color=p.facecolor[0],v.cellColors=n(p.facecolor)):(this.color=p.color,v.meshColor=d(p.color));this.mesh.update(v)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},Q.exports=function(p,c){var x=p.glplot.gl,g=S({gl:x}),f=new i(p,g,c.uid);return g._trace=f,f.update(c),p.glplot.add(g),f}},58669:function(Q,z,t){var S=t(73972),k=t(71828),l=t(1586),T=t(2418);Q.exports=function(b,d,s,e){function i(n,a){return k.coerce(b,d,T,n,a)}function r(n){var a=n.map(function(o){var u=i(o);return u&&k.isArrayOrTypedArray(u)?u:null});return a.every(function(o){return o&&o.length===a[0].length})&&a}r(["x","y","z"])?(r(["i","j","k"]),(!d.i||d.j&&d.k)&&(!d.j||d.k&&d.i)&&(!d.k||d.i&&d.j)?(S.getComponentMethod("calendars","handleTraceDefaults")(b,d,["x","y","z"],e),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(n){i(n)}),i("contour.show")&&(i("contour.color"),i("contour.width")),"intensity"in b?(i("intensity"),i("intensitymode"),l(b,d,e,i,{prefix:"",cLetter:"c"})):(d.showscale=!1,"facecolor"in b?i("facecolor"):"vertexcolor"in b?i("vertexcolor"):i("color",s)),i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),d._length=null):d.visible=!1):d.visible=!1}},21164:function(Q,z,t){Q.exports={attributes:t(2418),supplyDefaults:t(58669),calc:t(82932),colorbar:{min:"cmin",max:"cmax"},plot:t(91134),moduleType:"trace",name:"mesh3d",basePlotModule:t(58547),categories:["gl3d","showLegend"],meta:{}}},2522:function(Q,z,t){var S=t(71828).extendFlat,k=t(82196),l=t(12663).axisHoverFormat,T=t(79952).P,b=t(77914),d=t(22372),s=d.INCREASING.COLOR,e=d.DECREASING.COLOR,i=k.line;function r(n){return{line:{color:S({},i.color,{dflt:n}),width:i.width,dash:T,editType:"style"},editType:"style"}}Q.exports={xperiod:k.xperiod,xperiod0:k.xperiod0,xperiodalignment:k.xperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:S({},i.width,{}),dash:S({},T,{}),editType:"style"},increasing:r(s),decreasing:r(e),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:S({},b.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},3485:function(Q,z,t){var S=t(71828),k=S._,l=t(89298),T=t(42973),b=t(50606).BADNUM;function d(e,i,r,n){return{o:e,h:i,l:r,c:n}}function s(e,i,r,n,a,o){for(var u=a.makeCalcdata(i,"open"),p=a.makeCalcdata(i,"high"),c=a.makeCalcdata(i,"low"),x=a.makeCalcdata(i,"close"),g=Array.isArray(i.text),f=Array.isArray(i.hovertext),y=!0,v=null,m=!!i.xperiodalignment,_=[],h=0;h<n.length;h++){var A=n[h],w=u[h],E=p[h],L=c[h],C=x[h];if(A!==b&&w!==b&&E!==b&&L!==b&&C!==b){C===w?v!==null&&C!==v&&(y=C>v):y=C>w,v=C;var P=o(w,E,L,C);P.pos=A,P.yc=(w+C)/2,P.i=h,P.dir=y?"increasing":"decreasing",P.x=P.pos,P.y=[L,E],m&&(P.orig_p=r[h]),g&&(P.tx=i.text[h]),f&&(P.htx=i.hovertext[h]),_.push(P)}else _.push({pos:A,empty:!0})}return i._extremes[a._id]=l.findExtremes(a,S.concat(c,p),{padded:!0}),_.length&&(_[0].t={labels:{open:k(e,"open:")+" ",high:k(e,"high:")+" ",low:k(e,"low:")+" ",close:k(e,"close:")+" "}}),_}Q.exports={calc:function(e,i){var r=l.getFromId(e,i.xaxis),n=l.getFromId(e,i.yaxis),a=function(x,g,f){var y=f._minDiff;if(!y){var v,m=x._fullData,_=[];for(y=1/0,v=0;v<m.length;v++){var h=m[v];if(h.type==="ohlc"&&h.visible===!0&&h.xaxis===g._id){_.push(h);var A=g.makeCalcdata(h,"x");h._origX=A;var w=T(f,g,"x",A).vals;h._xcalc=w;var E=S.distinctVals(w).minDiff;E&&isFinite(E)&&(y=Math.min(y,E))}}for(y===1/0&&(y=1),v=0;v<_.length;v++)_[v]._minDiff=y}return y*f.tickwidth}(e,r,i),o=i._minDiff;i._minDiff=null;var u=i._origX;i._origX=null;var p=i._xcalc;i._xcalc=null;var c=s(e,i,u,p,n,d);return i._extremes[r._id]=l.findExtremes(r,p,{vpad:o/2}),c.length?(S.extendFlat(c[0].t,{wHover:o/2,tickLen:a}),c):[{t:{empty:!0}}]},calcCommon:s}},16169:function(Q,z,t){var S=t(71828),k=t(14555),l=t(73927),T=t(2522);function b(d,s,e,i){e(i+".line.color"),e(i+".line.width",s.line.width),e(i+".line.dash",s.line.dash)}Q.exports=function(d,s,e,i){function r(n,a){return S.coerce(d,s,T,n,a)}k(d,s,r,i)?(l(d,s,i,r,{x:!0}),r("xhoverformat"),r("yhoverformat"),r("line.width"),r("line.dash"),b(0,s,r,"increasing"),b(0,s,r,"decreasing"),r("text"),r("hovertext"),r("tickwidth"),i._requestRangeslider[s.xaxis]=!0):s.visible=!1}},66449:function(Q,z,t){var S=t(89298),k=t(71828),l=t(30211),T=t(7901),b=t(71828).fillText,d=t(22372),s={increasing:d.INCREASING.SYMBOL,decreasing:d.DECREASING.SYMBOL};function e(n,a,o,u){var p,c,x=n.cd,g=n.xa,f=x[0].trace,y=x[0].t,v=f.type,m=v==="ohlc"?"l":"min",_=v==="ohlc"?"h":"max",h=y.bPos||0,A=function(F){return F.pos+h-a},w=y.bdPos||y.tickLen,E=y.wHover,L=Math.min(1,w/Math.abs(g.r2c(g.range[1])-g.r2c(g.range[0])));function C(F){var V=A(F);return l.inbox(V-E,V+E,p)}function P(F){var V=F[m],q=F[_];return V===q||l.inbox(V-o,q-o,p)}function D(F){return(C(F)+P(F))/2}p=n.maxHoverDistance-L,c=n.maxSpikeDistance-L;var G=l.getDistanceFunction(u,C,P,D);if(l.getClosest(x,G,n),n.index===!1)return null;var I=x[n.index];if(I.empty)return null;var H=f[I.dir],N=H.line.color;return T.opacity(N)&&H.line.width?n.color=N:n.color=H.fillcolor,n.x0=g.c2p(I.pos+h-w,!0),n.x1=g.c2p(I.pos+h+w,!0),n.xLabelVal=I.orig_p!==void 0?I.orig_p:I.pos,n.spikeDistance=D(I)*c/p,n.xSpike=g.c2p(I.pos,!0),n}function i(n,a,o,u){var p=n.cd,c=n.ya,x=p[0].trace,g=p[0].t,f=[],y=e(n,a,o,u);if(!y)return[];var v=p[y.index].hi||x.hoverinfo,m=v.split("+");if(v!=="all"&&m.indexOf("y")===-1)return[];for(var _=["high","open","close","low"],h={},A=0;A<_.length;A++){var w,E=_[A],L=x[E][y.index],C=c.c2p(L,!0);L in h?(w=h[L]).yLabel+="<br>"+g.labels[E]+S.hoverLabelText(c,L,x.yhoverformat):((w=k.extendFlat({},y)).y0=w.y1=C,w.yLabelVal=L,w.yLabel=g.labels[E]+S.hoverLabelText(c,L,x.yhoverformat),w.name="",f.push(w),h[L]=w)}return f}function r(n,a,o,u){var p=n.cd,c=n.ya,x=p[0].trace,g=p[0].t,f=e(n,a,o,u);if(!f)return[];var y=p[f.index],v=f.index=y.i,m=y.dir;function _(P){return g.labels[P]+S.hoverLabelText(c,x[P][v],x.yhoverformat)}var h=y.hi||x.hoverinfo,A=h.split("+"),w=h==="all",E=w||A.indexOf("y")!==-1,L=w||A.indexOf("text")!==-1,C=E?[_("open"),_("high"),_("low"),_("close")+"  "+s[m]]:[];return L&&b(y,x,C),f.extraText=C.join("<br>"),f.y0=f.y1=c.c2p(y.yc,!0),[f]}Q.exports={hoverPoints:function(n,a,o,u){return n.cd[0].trace.hoverlabel.split?i(n,a,o,u):r(n,a,o,u)},hoverSplit:i,hoverOnPoints:r}},54186:function(Q,z,t){Q.exports={moduleType:"trace",name:"ohlc",basePlotModule:t(93612),categories:["cartesian","svg","showLegend"],meta:{},attributes:t(2522),supplyDefaults:t(16169),calc:t(3485).calc,plot:t(72314),style:t(53101),hoverPoints:t(66449).hoverPoints,selectPoints:t(67324)}},14555:function(Q,z,t){var S=t(73972),k=t(71828);Q.exports=function(l,T,b,d){var s=b("x"),e=b("open"),i=b("high"),r=b("low"),n=b("close");if(b("hoverlabel.split"),S.getComponentMethod("calendars","handleTraceDefaults")(l,T,["x"],d),e&&i&&r&&n){var a=Math.min(e.length,i.length,r.length,n.length);return s&&(a=Math.min(a,k.minRowLength(s))),T._length=a,a}}},72314:function(Q,z,t){var S=t(39898),k=t(71828);Q.exports=function(l,T,b,d){var s=T.yaxis,e=T.xaxis,i=!!e.rangebreaks;k.makeTraceGroups(d,b,"trace ohlc").each(function(r){var n=S.select(this),a=r[0],o=a.t;if(a.trace.visible!==!0||o.empty)n.remove();else{var u=o.tickLen,p=n.selectAll("path").data(k.identity);p.enter().append("path"),p.exit().remove(),p.attr("d",function(c){if(c.empty)return"M0,0Z";var x=e.c2p(c.pos-u,!0),g=e.c2p(c.pos+u,!0),f=i?(x+g)/2:e.c2p(c.pos,!0);return"M"+x+","+s.c2p(c.o,!0)+"H"+f+"M"+f+","+s.c2p(c.h,!0)+"V"+s.c2p(c.l,!0)+"M"+g+","+s.c2p(c.c,!0)+"H"+f})}})}},67324:function(Q){Q.exports=function(z,t){var S,k=z.cd,l=z.xaxis,T=z.yaxis,b=[],d=k[0].t.bPos||0;if(t===!1)for(S=0;S<k.length;S++)k[S].selected=0;else for(S=0;S<k.length;S++){var s=k[S];t.contains([l.c2p(s.pos+d),T.c2p(s.yc)],null,s.i,z)?(b.push({pointNumber:s.i,x:l.c2d(s.pos),y:T.c2d(s.yc)}),s.selected=1):s.selected=0}return b}},53101:function(Q,z,t){var S=t(39898),k=t(91424),l=t(7901);Q.exports=function(T,b,d){var s=d||S.select(T).selectAll("g.ohlclayer").selectAll("g.trace");s.style("opacity",function(e){return e[0].trace.opacity}),s.each(function(e){var i=e[0].trace;S.select(this).selectAll("path").each(function(r){if(!r.empty){var n=i[r.dir].line;S.select(this).style("fill","none").call(l.stroke,n.color).call(k.dashLine,n.dash,n.width).style("opacity",i.selectedpoints&&!r.selected?.3:1)}})})}},99506:function(Q,z,t){var S=t(1426).extendFlat,k=t(9012),l=t(41940),T=t(50693),b=t(5386).fF,d=t(27670).Y,s=S({editType:"calc"},T("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:b({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});Q.exports={domain:d({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:S({},k.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:b({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:l({editType:"calc"}),tickfont:l({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:s,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},27677:function(Q,z,t){var S=t(27659).a0,k=t(45784),l="parcats";z.name=l,z.plot=function(T,b,d,s){var e=S(T.calcdata,l);if(e.length){var i=e[0];k(T,i,d,s)}},z.clean=function(T,b,d,s){var e=s._has&&s._has("parcats"),i=b._has&&b._has("parcats");e&&!i&&s._paperdiv.selectAll(".parcats").remove()}},28699:function(Q,z,t){var S=t(28984).wrap,k=t(52075).hasColorscale,l=t(78803),T=t(75744),b=t(91424),d=t(71828),s=t(92770);function e(n,a,o){n.valueInds.push(a),n.count+=o}function i(n,a,o){return{categoryInds:n,color:a,rawColor:o,valueInds:[],count:0}}function r(n,a,o){n.valueInds.push(a),n.count+=o}Q.exports=function(n,a){var o=d.filterVisible(a.dimensions);if(o.length===0)return[];var u,p,c,x=o.map(function(q){var te;if(q.categoryorder==="trace")te=null;else if(q.categoryorder==="array")te=q.categoryarray;else{te=T(q.values);for(var $=!0,W=0;W<te.length;W++)if(!s(te[W])){$=!1;break}te.sort($?d.sorterAsc:void 0),q.categoryorder==="category descending"&&(te=te.reverse())}return function(Z,J){J=J==null?[]:J.map(function(we){return we});var ee={},re={},ae=[];J.forEach(function(we,xe){ee[we]=0,re[we]=xe});for(var oe=0;oe<Z.length;oe++){var ce,pe=Z[oe];ee[pe]===void 0?(ee[pe]=1,ce=J.push(pe)-1,re[pe]=ce):(ee[pe]++,ce=re[pe]),ae.push(ce)}var ve=J.map(function(we){return ee[we]});return{uniqueValues:J,uniqueCounts:ve,inds:ae}}(q.values,te)});u=d.isArrayOrTypedArray(a.counts)?a.counts:[a.counts],function(q){var te,$=q.map(function(W){return W.displayindex});if(function(W){for(var Z=new Array(W.length),J=0;J<W.length;J++){if(W[J]<0||W[J]>=W.length||Z[W[J]]!==void 0)return!1;Z[W[J]]=!0}return!0}($))for(te=0;te<q.length;te++)q[te]._displayindex=q[te].displayindex;else for(te=0;te<q.length;te++)q[te]._displayindex=te}(o),o.forEach(function(q,te){(function($,W){$._categoryarray=W.uniqueValues,$.ticktext===null||$.ticktext===void 0?$._ticktext=[]:$._ticktext=$.ticktext.slice();for(var Z=$._ticktext.length;Z<W.uniqueValues.length;Z++)$._ticktext.push(W.uniqueValues[Z])})(q,x[te])});var g,f=a.line;f?(k(a,"line")&&l(n,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),g=b.tryColorscale(f)):g=d.identity;var y,v,m,_,h,A=o[0].values.length,w={},E=x.map(function(q){return q.inds});for(c=0,y=0;y<A;y++){var L=[];for(v=0;v<E.length;v++)L.push(E[v][y]);p=u[y%u.length],c+=p;var C=(m=y,_=void 0,h=void 0,d.isArrayOrTypedArray(f.color)?h=_=f.color[m%f.color.length]:_=f.color,{color:g(_),rawColor:h}),P=L+"-"+C.rawColor;w[P]===void 0&&(w[P]=i(L,C.color,C.rawColor)),r(w[P],y,p)}var D,G=o.map(function(q,te){return function($,W,Z,J,ee){return{dimensionInd:$,containerInd:W,displayInd:Z,dimensionLabel:J,count:ee,categories:[],dragX:null}}(te,q._index,q._displayindex,q.label,c)});for(y=0;y<A;y++)for(p=u[y%u.length],v=0;v<G.length;v++){var I=G[v].containerInd,H=x[v].inds[y],N=G[v].categories;if(N[H]===void 0){var F=a.dimensions[I]._categoryarray[H],V=a.dimensions[I]._ticktext[H];N[H]={dimensionInd:v,categoryInd:D=H,categoryValue:F,displayInd:D,categoryLabel:V,valueInds:[],count:0,dragY:null}}e(N[H],y,p)}return S(function(q,te,$){var W=q.map(function(Z){return Z.categories.length}).reduce(function(Z,J){return Math.max(Z,J)});return{dimensions:q,paths:te,trace:void 0,maxCats:W,count:$}}(G,w,c))}},14647:function(Q,z,t){var S=t(71828),k=t(52075).hasColorscale,l=t(1586),T=t(27670).c,b=t(85501),d=t(99506),s=t(94397);function e(i,r){function n(g,f){return S.coerce(i,r,d.dimensions,g,f)}var a=n("values"),o=n("visible");if(a&&a.length||(o=r.visible=!1),o){n("label"),n("displayindex",r._index);var u,p=i.categoryarray,c=Array.isArray(p)&&p.length>0;c&&(u="array");var x=n("categoryorder",u);x==="array"?(n("categoryarray"),n("ticktext")):(delete i.categoryarray,delete i.ticktext),c||x!=="array"||(r.categoryorder="trace")}}Q.exports=function(i,r,n,a){function o(g,f){return S.coerce(i,r,d,g,f)}var u=b(i,r,{name:"dimensions",handleItemDefaults:e}),p=function(g,f,y,v,m){m("line.shape"),m("line.hovertemplate");var _=m("line.color",v.colorway[0]);if(k(g,"line")&&S.isArrayOrTypedArray(_)){if(_.length)return m("line.colorscale"),l(g,f,v,m,{prefix:"line.",cLetter:"c"}),_.length;f.line.color=y}return 1/0}(i,r,n,a,o);T(r,a,o),Array.isArray(u)&&u.length||(r.visible=!1),s(r,u,"values",p),o("hoveron"),o("hovertemplate"),o("arrangement"),o("bundlecolors"),o("sortpaths"),o("counts");var c={family:a.font.family,size:Math.round(a.font.size),color:a.font.color};S.coerceFont(o,"labelfont",c);var x={family:a.font.family,size:Math.round(a.font.size/1.2),color:a.font.color};S.coerceFont(o,"tickfont",x)}},94873:function(Q,z,t){Q.exports={attributes:t(99506),supplyDefaults:t(14647),calc:t(28699),plot:t(45784),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:t(27677),categories:["noOpacity"],meta:{}}},45460:function(Q,z,t){var S=t(39898),k=t(81684).k4,l=t(72391),T=t(30211),b=t(71828),d=b.strTranslate,s=t(91424),e=t(84267),i=t(63893);function r($,W,Z,J){var ee=W._context.staticPlot,re=$.map(N.bind(0,W,Z)),ae=J.selectAll("g.parcatslayer").data([null]);ae.enter().append("g").attr("class","parcatslayer").style("pointer-events",ee?"none":"all");var oe=ae.selectAll("g.trace.parcats").data(re,n),ce=oe.enter().append("g").attr("class","trace parcats");oe.attr("transform",function(se){return d(se.x,se.y)}),ce.append("g").attr("class","paths");var pe=oe.select("g.paths").selectAll("path.path").data(function(se){return se.paths},n);pe.attr("fill",function(se){return se.model.color});var ve=pe.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(se){return se.model.color}).attr("fill-opacity",0);f(ve),pe.attr("d",function(se){return se.svgD}),ve.empty()||pe.sort(o),pe.exit().remove(),pe.on("mouseover",u).on("mouseout",p).on("click",g),ce.append("g").attr("class","dimensions");var we=oe.select("g.dimensions").selectAll("g.dimension").data(function(se){return se.dimensions},n);we.enter().append("g").attr("class","dimension"),we.attr("transform",function(se){return d(se.x,0)}),we.exit().remove();var xe=we.selectAll("g.category").data(function(se){return se.categories},n),ge=xe.enter().append("g").attr("class","category");xe.attr("transform",function(se){return d(0,se.y)}),ge.append("rect").attr("class","catrect").attr("pointer-events","none"),xe.select("rect.catrect").attr("fill","none").attr("width",function(se){return se.width}).attr("height",function(se){return se.height}),v(ge);var Oe=xe.selectAll("rect.bandrect").data(function(se){return se.bands},n);Oe.each(function(){b.raiseToTop(this)}),Oe.attr("fill",function(se){return se.color});var Ae=Oe.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(se){return se.color}).attr("fill-opacity",0);Oe.attr("fill",function(se){return se.color}).attr("width",function(se){return se.width}).attr("height",function(se){return se.height}).attr("y",function(se){return se.y}).attr("cursor",function(se){return se.parcatsViewModel.arrangement==="fixed"?"default":se.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),m(Ae),Oe.exit().remove(),ge.append("text").attr("class","catlabel").attr("pointer-events","none");var Te=W._fullLayout.paper_bgcolor;xe.select("text.catlabel").attr("text-anchor",function(se){return a(se)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",i.makeTextShadow(Te)).style("fill","rgb(0, 0, 0)").attr("x",function(se){return a(se)?se.width+5:-5}).attr("y",function(se){return se.height/2}).text(function(se){return se.model.categoryLabel}).each(function(se){s.font(S.select(this),se.parcatsViewModel.categorylabelfont),i.convertToTspans(S.select(this),W)}),ge.append("text").attr("class","dimlabel"),xe.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(se){return se.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(se){return se.width/2}).attr("y",-5).text(function(se,le){return le===0?se.parcatsViewModel.model.dimensions[se.model.dimensionInd].dimensionLabel:null}).each(function(se){s.font(S.select(this),se.parcatsViewModel.labelfont)}),xe.selectAll("rect.bandrect").on("mouseover",E).on("mouseout",L),xe.exit().remove(),we.call(S.behavior.drag().origin(function(se){return{x:se.x,y:0}}).on("dragstart",C).on("drag",P).on("dragend",D)),oe.each(function(se){se.traceSelection=S.select(this),se.pathSelection=S.select(this).selectAll("g.paths").selectAll("path.path"),se.dimensionSelection=S.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),oe.exit().remove()}function n($){return $.key}function a($){var W=$.parcatsViewModel.dimensions.length,Z=$.parcatsViewModel.dimensions[W-1].model.dimensionInd;return $.model.dimensionInd===Z}function o($,W){return $.model.rawColor>W.model.rawColor?1:$.model.rawColor<W.model.rawColor?-1:0}function u($){if(!$.parcatsViewModel.dragDimension&&$.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){b.raiseToTop(this),y(S.select(this));var W=c($),Z=x($);if($.parcatsViewModel.graphDiv.emit("plotly_hover",{points:W,event:S.event,constraints:Z}),$.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var J,ee,re,ae=S.mouse(this)[0],oe=$.parcatsViewModel.graphDiv,ce=$.parcatsViewModel.trace,pe=oe._fullLayout,ve=pe._paperdiv.node().getBoundingClientRect(),we=$.parcatsViewModel.graphDiv.getBoundingClientRect();for(re=0;re<$.leftXs.length-1;re++)if($.leftXs[re]+$.dimWidths[re]-2<=ae&&ae<=$.leftXs[re+1]+2){var xe=$.parcatsViewModel.dimensions[re],ge=$.parcatsViewModel.dimensions[re+1];J=(xe.x+xe.width+ge.x)/2,ee=($.topYs[re]+$.topYs[re+1]+$.height)/2;break}var Oe=$.parcatsViewModel.x+J,Ae=$.parcatsViewModel.y+ee,Te=e.mostReadable($.model.color,["black","white"]),se=$.model.count,le=se/$.parcatsViewModel.model.count,ne={countLabel:se,probabilityLabel:le.toFixed(3)},me=[];$.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&me.push(["Count:",ne.countLabel].join(" ")),$.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&me.push(["P:",ne.probabilityLabel].join(" "));var Ee=me.join("<br>"),be=S.mouse(oe)[0];T.loneHover({trace:ce,x:Oe-ve.left+we.left,y:Ae-ve.top+we.top,text:Ee,color:$.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Te,idealAlign:be<Oe?"right":"left",hovertemplate:(ce.line||{}).hovertemplate,hovertemplateLabels:ne,eventData:[{data:ce._input,fullData:ce,count:se,probability:le}]},{container:pe._hoverlayer.node(),outerContainer:pe._paper.node(),gd:oe})}}}function p($){if(!$.parcatsViewModel.dragDimension&&(f(S.select(this)),T.loneUnhover($.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),$.parcatsViewModel.pathSelection.sort(o),$.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var W=c($),Z=x($);$.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:W,event:S.event,constraints:Z})}}function c($){for(var W=[],Z=G($.parcatsViewModel),J=0;J<$.model.valueInds.length;J++){var ee=$.model.valueInds[J];W.push({curveNumber:Z,pointNumber:ee})}return W}function x($){for(var W={},Z=$.parcatsViewModel.model.dimensions,J=0;J<Z.length;J++){var ee=Z[J],re=ee.categories[$.model.categoryInds[J]];W[ee.containerInd]=re.categoryValue}return $.model.rawColor!==void 0&&(W.color=$.model.rawColor),W}function g($){if($.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var W=c($),Z=x($);$.parcatsViewModel.graphDiv.emit("plotly_click",{points:W,event:S.event,constraints:Z})}}function f($){$.attr("fill",function(W){return W.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function y($){$.attr("fill-opacity",.8).attr("stroke",function(W){return e.mostReadable(W.model.color,["black","white"])}).attr("stroke-width",.3)}function v($){$.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function m($){$.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function _($){var W=$.parcatsViewModel.pathSelection,Z=$.categoryViewModel.model.dimensionInd,J=$.categoryViewModel.model.categoryInd;return W.filter(function(ee){return ee.model.categoryInds[Z]===J&&ee.model.color===$.color})}function h($,W,Z){var J=S.select($).datum(),ee=J.categoryViewModel.model,re=J.parcatsViewModel.graphDiv,ae=S.select($.parentNode).selectAll("rect.bandrect"),oe=[];ae.each(function(pe){_(pe).each(function(ve){Array.prototype.push.apply(oe,c(ve))})});var ce={};ce[ee.dimensionInd]=ee.categoryValue,re.emit(W,{points:oe,event:Z,constraints:ce})}function A($,W,Z){var J=S.select($).datum(),ee=J.categoryViewModel.model,re=J.parcatsViewModel.graphDiv,ae=_(J),oe=[];ae.each(function(pe){Array.prototype.push.apply(oe,c(pe))});var ce={};ce[ee.dimensionInd]=ee.categoryValue,J.rawColor!==void 0&&(ce.color=J.rawColor),re.emit(W,{points:oe,event:Z,constraints:ce})}function w($,W,Z){$._fullLayout._calcInverseTransform($);var J,ee,re=$._fullLayout._invScaleX,ae=$._fullLayout._invScaleY,oe=S.select(Z.parentNode).select("rect.catrect"),ce=oe.node().getBoundingClientRect(),pe=oe.datum(),ve=pe.parcatsViewModel,we=ve.model.dimensions[pe.model.dimensionInd],xe=ve.trace,ge=ce.top+ce.height/2;ve.dimensions.length>1&&we.displayInd===ve.dimensions.length-1?(J=ce.left,ee="left"):(J=ce.left+ce.width,ee="right");var Oe=pe.model.count,Ae=pe.model.categoryLabel,Te=Oe/pe.parcatsViewModel.model.count,se={countLabel:Oe,categoryLabel:Ae,probabilityLabel:Te.toFixed(3)},le=[];pe.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&le.push(["Count:",se.countLabel].join(" ")),pe.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&le.push(["P("+se.categoryLabel+"):",se.probabilityLabel].join(" "));var ne=le.join("<br>");return{trace:xe,x:re*(J-W.left),y:ae*(ge-W.top),text:ne,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:ee,hovertemplate:xe.hovertemplate,hovertemplateLabels:se,eventData:[{data:xe._input,fullData:xe,count:Oe,category:Ae,probability:Te}]}}function E($){if(!$.parcatsViewModel.dragDimension&&$.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){if(S.mouse(this)[1]<-1)return;var W,Z=$.parcatsViewModel.graphDiv,J=Z._fullLayout,ee=J._paperdiv.node().getBoundingClientRect(),re=$.parcatsViewModel.hoveron,ae=this;re==="color"?(function(oe){var ce=S.select(oe).datum(),pe=_(ce);y(pe),pe.each(function(){b.raiseToTop(this)}),S.select(oe.parentNode).selectAll("rect.bandrect").filter(function(ve){return ve.color===ce.color}).each(function(){b.raiseToTop(this),S.select(this).attr("stroke","black").attr("stroke-width",1.5)})}(ae),A(ae,"plotly_hover",S.event)):(function(oe){S.select(oe.parentNode).selectAll("rect.bandrect").each(function(ce){var pe=_(ce);y(pe),pe.each(function(){b.raiseToTop(this)})}),S.select(oe.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(ae),h(ae,"plotly_hover",S.event)),$.parcatsViewModel.hoverinfoItems.indexOf("none")===-1&&(re==="category"?W=w(Z,ee,ae):re==="color"?W=function(oe,ce,pe){oe._fullLayout._calcInverseTransform(oe);var ve,we,xe=oe._fullLayout._invScaleX,ge=oe._fullLayout._invScaleY,Oe=pe.getBoundingClientRect(),Ae=S.select(pe).datum(),Te=Ae.categoryViewModel,se=Te.parcatsViewModel,le=se.model.dimensions[Te.model.dimensionInd],ne=se.trace,me=Oe.y+Oe.height/2;se.dimensions.length>1&&le.displayInd===se.dimensions.length-1?(ve=Oe.left,we="left"):(ve=Oe.left+Oe.width,we="right");var Ee=Te.model.categoryLabel,be=Ae.parcatsViewModel.model.count,De=0;Ae.categoryViewModel.bands.forEach(function($e){$e.color===Ae.color&&(De+=$e.count)});var Ue=Te.model.count,he=0;se.pathSelection.each(function($e){$e.model.color===Ae.color&&(he+=$e.model.count)});var ke=De/be,_e=De/he,Ce=De/Ue,Fe={countLabel:be,categoryLabel:Ee,probabilityLabel:ke.toFixed(3)},Re=[];Te.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Re.push(["Count:",Fe.countLabel].join(" ")),Te.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Re.push("P(color  "+Ee+"): "+Fe.probabilityLabel),Re.push("P("+Ee+" | color): "+_e.toFixed(3)),Re.push("P(color | "+Ee+"): "+Ce.toFixed(3)));var He=Re.join("<br>"),Ge=e.mostReadable(Ae.color,["black","white"]);return{trace:ne,x:xe*(ve-ce.left),y:ge*(me-ce.top),text:He,color:Ae.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:Ge,fontSize:10,idealAlign:we,hovertemplate:ne.hovertemplate,hovertemplateLabels:Fe,eventData:[{data:ne._input,fullData:ne,category:Ee,count:be,probability:ke,categorycount:Ue,colorcount:he,bandcolorcount:De}]}}(Z,ee,ae):re==="dimension"&&(W=function(oe,ce,pe){var ve=[];return S.select(pe.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){ve.push(w(oe,ce,this))}),ve}(Z,ee,ae)),W&&T.loneHover(W,{container:J._hoverlayer.node(),outerContainer:J._paper.node(),gd:Z}))}}function L($){var W=$.parcatsViewModel;W.dragDimension||(f(W.pathSelection),v(W.dimensionSelection.selectAll("g.category")),m(W.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover(W.graphDiv._fullLayout._hoverlayer.node()),W.pathSelection.sort(o),W.hoverinfoItems.indexOf("skip")!==-1)||($.parcatsViewModel.hoveron==="color"?A(this,"plotly_unhover",S.event):h(this,"plotly_unhover",S.event))}function C($){$.parcatsViewModel.arrangement!=="fixed"&&($.dragDimensionDisplayInd=$.model.displayInd,$.initialDragDimensionDisplayInds=$.parcatsViewModel.model.dimensions.map(function(W){return W.displayInd}),$.dragHasMoved=!1,$.dragCategoryDisplayInd=null,S.select(this).selectAll("g.category").select("rect.catrect").each(function(W){var Z=S.mouse(this)[0],J=S.mouse(this)[1];-2<=Z&&Z<=W.width+2&&-2<=J&&J<=W.height+2&&($.dragCategoryDisplayInd=W.model.displayInd,$.initialDragCategoryDisplayInds=$.model.categories.map(function(ee){return ee.displayInd}),W.model.dragY=W.y,b.raiseToTop(this.parentNode),S.select(this.parentNode).selectAll("rect.bandrect").each(function(ee){ee.y<J&&J<=ee.y+ee.height&&($.potentialClickBand=this)}))}),$.parcatsViewModel.dragDimension=$,T.loneUnhover($.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function P($){if($.parcatsViewModel.arrangement!=="fixed"&&($.dragHasMoved=!0,$.dragDimensionDisplayInd!==null)){var W=$.dragDimensionDisplayInd,Z=W-1,J=W+1,ee=$.parcatsViewModel.dimensions[W];if($.dragCategoryDisplayInd!==null){var re=ee.categories[$.dragCategoryDisplayInd];re.model.dragY+=S.event.dy;var ae=re.model.dragY,oe=re.model.displayInd,ce=ee.categories,pe=ce[oe-1],ve=ce[oe+1];pe!==void 0&&ae<pe.y+pe.height/2&&(re.model.displayInd=pe.model.displayInd,pe.model.displayInd=oe),ve!==void 0&&ae+re.height>ve.y+ve.height/2&&(re.model.displayInd=ve.model.displayInd,ve.model.displayInd=oe),$.dragCategoryDisplayInd=re.model.displayInd}if($.dragCategoryDisplayInd===null||$.parcatsViewModel.arrangement==="freeform"){ee.model.dragX=S.event.x;var we=$.parcatsViewModel.dimensions[Z],xe=$.parcatsViewModel.dimensions[J];we!==void 0&&ee.model.dragX<we.x+we.width&&(ee.model.displayInd=we.model.displayInd,we.model.displayInd=W),xe!==void 0&&ee.model.dragX+ee.width>xe.x&&(ee.model.displayInd=xe.model.displayInd,xe.model.displayInd=$.dragDimensionDisplayInd),$.dragDimensionDisplayInd=ee.model.displayInd}q($.parcatsViewModel),V($.parcatsViewModel),H($.parcatsViewModel),I($.parcatsViewModel)}}function D($){if($.parcatsViewModel.arrangement!=="fixed"&&$.dragDimensionDisplayInd!==null){S.select(this).selectAll("text").attr("font-weight","normal");var W={},Z=G($.parcatsViewModel),J=$.parcatsViewModel.model.dimensions.map(function(ve){return ve.displayInd}),ee=$.initialDragDimensionDisplayInds.some(function(ve,we){return ve!==J[we]});ee&&J.forEach(function(ve,we){var xe=$.parcatsViewModel.model.dimensions[we].containerInd;W["dimensions["+xe+"].displayindex"]=ve});var re=!1;if($.dragCategoryDisplayInd!==null){var ae=$.model.categories.map(function(ve){return ve.displayInd});if(re=$.initialDragCategoryDisplayInds.some(function(ve,we){return ve!==ae[we]})){var oe=$.model.categories.slice().sort(function(ve,we){return ve.displayInd-we.displayInd}),ce=oe.map(function(ve){return ve.categoryValue}),pe=oe.map(function(ve){return ve.categoryLabel});W["dimensions["+$.model.containerInd+"].categoryarray"]=[ce],W["dimensions["+$.model.containerInd+"].ticktext"]=[pe],W["dimensions["+$.model.containerInd+"].categoryorder"]="array"}}$.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!$.dragHasMoved&&$.potentialClickBand&&($.parcatsViewModel.hoveron==="color"?A($.potentialClickBand,"plotly_click",S.event.sourceEvent):h($.potentialClickBand,"plotly_click",S.event.sourceEvent)),$.model.dragX=null,$.dragCategoryDisplayInd!==null&&($.parcatsViewModel.dimensions[$.dragDimensionDisplayInd].categories[$.dragCategoryDisplayInd].model.dragY=null,$.dragCategoryDisplayInd=null),$.dragDimensionDisplayInd=null,$.parcatsViewModel.dragDimension=null,$.dragHasMoved=null,$.potentialClickBand=null,q($.parcatsViewModel),V($.parcatsViewModel),S.transition().duration(300).ease("cubic-in-out").each(function(){H($.parcatsViewModel,!0),I($.parcatsViewModel,!0)}).each("end",function(){(ee||re)&&l.restyle($.parcatsViewModel.graphDiv,W,[Z])})}}function G($){for(var W,Z=$.graphDiv._fullData,J=0;J<Z.length;J++)if($.key===Z[J].uid){W=J;break}return W}function I($,W){var Z;W===void 0&&(W=!1),$.pathSelection.data(function(J){return J.paths},n),(Z=$.pathSelection,W?Z.transition():Z).attr("d",function(J){return J.svgD})}function H($,W){function Z(ae){return W?ae.transition():ae}W===void 0&&(W=!1),$.dimensionSelection.data(function(ae){return ae.dimensions},n);var J=$.dimensionSelection.selectAll("g.category").data(function(ae){return ae.categories},n);Z($.dimensionSelection).attr("transform",function(ae){return d(ae.x,0)}),Z(J).attr("transform",function(ae){return d(0,ae.y)}),J.select(".dimlabel").text(function(ae,oe){return oe===0?ae.parcatsViewModel.model.dimensions[ae.model.dimensionInd].dimensionLabel:null}),J.select(".catlabel").attr("text-anchor",function(ae){return a(ae)?"start":"end"}).attr("x",function(ae){return a(ae)?ae.width+5:-5}).each(function(ae){var oe,ce;a(ae)?(oe=ae.width+5,ce="start"):(oe=-5,ce="end"),S.select(this).selectAll("tspan").attr("x",oe).attr("text-anchor",ce)});var ee=J.selectAll("rect.bandrect").data(function(ae){return ae.bands},n),re=ee.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(ae){return ae.color}).attr("fill-opacity",0);ee.attr("fill",function(ae){return ae.color}).attr("width",function(ae){return ae.width}).attr("height",function(ae){return ae.height}).attr("y",function(ae){return ae.y}),m(re),ee.each(function(){b.raiseToTop(this)}),ee.exit().remove()}function N($,W,Z){var J,ee=Z[0],re=W.margin||{l:80,r:80,t:100,b:80},ae=ee.trace,oe=ae.domain,ce=W.width,pe=W.height,ve=Math.floor(ce*(oe.x[1]-oe.x[0])),we=Math.floor(pe*(oe.y[1]-oe.y[0])),xe=oe.x[0]*ce+re.l,ge=W.height-oe.y[1]*W.height+re.t,Oe=ae.line.shape;J=ae.hoverinfo==="all"?["count","probability"]:(ae.hoverinfo||"").split("+");var Ae={trace:ae,key:ae.uid,model:ee,x:xe,y:ge,width:ve,height:we,hoveron:ae.hoveron,hoverinfoItems:J,arrangement:ae.arrangement,bundlecolors:ae.bundlecolors,sortpaths:ae.sortpaths,labelfont:ae.labelfont,categorylabelfont:ae.tickfont,pathShape:Oe,dragDimension:null,margin:re,paths:[],dimensions:[],graphDiv:$,traceSelection:null,pathSelection:null,dimensionSelection:null};return ee.dimensions&&(q(Ae),V(Ae)),Ae}function F($,W,Z,J,ee){var re,ae,oe=[],ce=[];for(ae=0;ae<Z.length-1;ae++)re=k(Z[ae]+$[ae],$[ae+1]),oe.push(re(ee)),ce.push(re(1-ee));var pe="M "+$[0]+","+W[0];for(pe+="l"+Z[0]+",0 ",ae=1;ae<Z.length;ae++)pe+="C"+oe[ae-1]+","+W[ae-1]+" "+ce[ae-1]+","+W[ae]+" "+$[ae]+","+W[ae],pe+="l"+Z[ae]+",0 ";for(pe+="l0,"+J+" ",pe+="l -"+Z[Z.length-1]+",0 ",ae=Z.length-2;ae>=0;ae--)pe+="C"+ce[ae]+","+(W[ae+1]+J)+" "+oe[ae]+","+(W[ae]+J)+" "+($[ae]+Z[ae])+","+(W[ae]+J),pe+="l-"+Z[ae]+",0 ";return pe+"Z"}function V($){var W=$.dimensions,Z=$.model,J=W.map(function(Fe){return Fe.categories.map(function(Re){return Re.y})}),ee=$.model.dimensions.map(function(Fe){return Fe.categories.map(function(Re){return Re.displayInd})}),re=$.model.dimensions.map(function(Fe){return Fe.displayInd}),ae=$.dimensions.map(function(Fe){return Fe.model.dimensionInd}),oe=W.map(function(Fe){return Fe.x}),ce=W.map(function(Fe){return Fe.width}),pe=[];for(var ve in Z.paths)Z.paths.hasOwnProperty(ve)&&pe.push(Z.paths[ve]);function we(Fe){var Re=Fe.categoryInds.map(function(He,Ge){return ee[Ge][He]});return ae.map(function(He){return Re[He]})}pe.sort(function(Fe,Re){var He=we(Fe),Ge=we(Re);return $.sortpaths==="backward"&&(He.reverse(),Ge.reverse()),He.push(Fe.valueInds[0]),Ge.push(Re.valueInds[0]),$.bundlecolors&&(He.unshift(Fe.rawColor),Ge.unshift(Re.rawColor)),He<Ge?-1:He>Ge?1:0});for(var xe=new Array(pe.length),ge=W[0].model.count,Oe=W[0].categories.map(function(Fe){return Fe.height}).reduce(function(Fe,Re){return Fe+Re}),Ae=0;Ae<pe.length;Ae++){var Te,se=pe[Ae];Te=ge>0?Oe*(se.count/ge):0;for(var le,ne=new Array(J.length),me=0;me<se.categoryInds.length;me++){var Ee=se.categoryInds[me],be=ee[me][Ee],De=re[me];ne[De]=J[De][be],J[De][be]+=Te;var Ue=$.dimensions[De].categories[be],he=Ue.bands.length,ke=Ue.bands[he-1];if(ke===void 0||se.rawColor!==ke.rawColor){var _e=ke===void 0?0:ke.y+ke.height;Ue.bands.push({key:_e,color:se.color,rawColor:se.rawColor,height:Te,width:Ue.width,count:se.count,y:_e,categoryViewModel:Ue,parcatsViewModel:$})}else{var Ce=Ue.bands[he-1];Ce.height+=Te,Ce.count+=se.count}}le=$.pathShape==="hspline"?F(oe,ne,ce,Te,.5):F(oe,ne,ce,Te,0),xe[Ae]={key:se.valueInds[0],model:se,height:Te,leftXs:oe,topYs:ne,dimWidths:ce,svgD:le,parcatsViewModel:$}}$.paths=xe}function q($){var W=$.model.dimensions.map(function(ae){return{displayInd:ae.displayInd,dimensionInd:ae.dimensionInd}});W.sort(function(ae,oe){return ae.displayInd-oe.displayInd});var Z=[];for(var J in W){var ee=W[J].dimensionInd,re=$.model.dimensions[ee];Z.push(te($,re))}$.dimensions=Z}function te($,W){var Z,J=$.model.dimensions.length,ee=W.displayInd;Z=40+(J>1?($.width-80-16)/(J-1):0)*ee;var re,ae,oe,ce,pe,ve=[],we=$.model.maxCats,xe=W.categories.length,ge=W.count,Oe=$.height-8*(we-1),Ae=8*(we-xe)/2,Te=W.categories.map(function(se){return{displayInd:se.displayInd,categoryInd:se.categoryInd}});for(Te.sort(function(se,le){return se.displayInd-le.displayInd}),pe=0;pe<xe;pe++)ce=Te[pe].categoryInd,ae=W.categories[ce],re=ge>0?ae.count/ge*Oe:0,oe={key:ae.valueInds[0],model:ae,width:16,height:re,y:ae.dragY!==null?ae.dragY:Ae,bands:[],parcatsViewModel:$},Ae=Ae+re+8,ve.push(oe);return{key:W.dimensionInd,x:W.dragX!==null?W.dragX:Z,y:0,width:16,model:W,categories:ve,parcatsViewModel:$,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}Q.exports=function($,W,Z,J){r(Z,$,J,W)}},45784:function(Q,z,t){var S=t(45460);Q.exports=function(k,l,T,b){var d=k._fullLayout,s=d._paper,e=d._size;S(k,s,l,{width:e.w,height:e.h,margin:{t:e.t,r:e.r,b:e.b,l:e.l}},T,b)}},73362:function(Q,z,t){var S=t(50693),k=t(13838),l=t(41940),T=t(27670).Y,b=t(1426).extendFlat,d=t(44467).templatedArray;Q.exports={domain:T({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:l({editType:"plot"}),tickfont:l({editType:"plot"}),rangefont:l({editType:"plot"}),dimensions:d("dimension",{label:{valType:"string",editType:"plot"},tickvals:b({},k.tickvals,{editType:"plot"}),ticktext:b({},k.ticktext,{editType:"plot"}),tickformat:b({},k.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:b({editType:"calc"},S("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},57920:function(Q,z,t){var S=t(25706),k=t(39898),l=t(28984).keyFun,T=t(28984).repeat,b=t(71828).sorterAsc,d=t(71828).strTranslate,s=S.bar.snapRatio;function e(w,E){return w*(1-s)+E*s}var i=S.bar.snapClose;function r(w,E){return w*(1-i)+E*i}function n(w,E,L,C){if(function(te,$){for(var W=0;W<$.length;W++)if(te>=$[W][0]&&te<=$[W][1])return!0;return!1}(L,C))return L;var P=w?-1:1,D=0,G=E.length-1;if(P<0){var I=D;D=G,G=I}for(var H=E[D],N=H,F=D;P*F<P*G;F+=P){var V=F+P,q=E[V];if(P*L<P*r(H,q))return e(H,N);if(P*L<P*q||V===G)return e(q,H);N=H,H=q}}function a(w){w.attr("x",-S.bar.captureWidth/2).attr("width",S.bar.captureWidth)}function o(w){w.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function u(w){if(!w.brush.filterSpecified)return"0,"+w.height;for(var E,L,C,P=p(w.brush.filter.getConsolidated(),w.height),D=[0],G=P.length?P[0][0]:null,I=0;I<P.length;I++)L=(E=P[I])[1]-E[0],D.push(G),D.push(L),(C=I+1)<P.length&&(G=P[C][0]-E[1]);return D.push(w.height),D}function p(w,E){return w.map(function(L){return L.map(function(C){return Math.max(0,C*E)}).sort(b)})}function c(){k.select(document.body).style("cursor",null)}function x(w){w.attr("stroke-dasharray",u)}function g(w,E){var L=k.select(w).selectAll(".highlight, .highlight-shadow");x(E?L.transition().duration(S.bar.snapDuration).each("end",E):L)}function f(w,E){var L,C=w.brush,P=NaN,D={};if(C.filterSpecified){var G=w.height,I=C.filter.getConsolidated(),H=p(I,G),N=NaN,F=NaN,V=NaN;for(L=0;L<=H.length;L++){var q=H[L];if(q&&q[0]<=E&&E<=q[1]){N=L;break}if(F=L?L-1:NaN,q&&q[0]>E){V=L;break}}if(P=N,isNaN(P)&&(P=isNaN(F)||isNaN(V)?isNaN(F)?V:F:E-H[F][1]<H[V][0]-E?F:V),!isNaN(P)){var te=H[P],$=function(ee,re){var ae=S.bar.handleHeight;if(!(re>ee[1]+ae||re<ee[0]-ae))return re>=.9*ee[1]+.1*ee[0]?"n":re<=.9*ee[0]+.1*ee[1]?"s":"ns"}(te,E);$&&(D.interval=I[P],D.intervalPix=te,D.region=$)}}if(w.ordinal&&!D.region){var W=w.unitTickvals,Z=w.unitToPaddedPx.invert(E);for(L=0;L<W.length;L++){var J=[.25*W[Math.max(L-1,0)]+.75*W[L],.25*W[Math.min(L+1,W.length-1)]+.75*W[L]];if(Z>=J[0]&&Z<=J[1]){D.clickableOrdinalRange=J;break}}}return D}function y(w,E){k.event.sourceEvent.stopPropagation();var L=E.height-k.mouse(w)[1]-2*S.verticalPadding,C=E.brush.svgBrush;C.wasDragged=!0,C._dragging=!0,C.grabbingBar?C.newExtent=[L-C.grabPoint,L+C.barLength-C.grabPoint].map(E.unitToPaddedPx.invert):C.newExtent=[C.startExtent,E.unitToPaddedPx.invert(L)].sort(b),E.brush.filterSpecified=!0,C.extent=C.stayingIntervals.concat([C.newExtent]),C.brushCallback(E),g(w.parentNode)}function v(w,E){var L=f(E,E.height-k.mouse(w)[1]-2*S.verticalPadding),C="crosshair";L.clickableOrdinalRange?C="pointer":L.region&&(C=L.region+"-resize"),k.select(document.body).style("cursor",C)}function m(w){w.on("mousemove",function(E){k.event.preventDefault(),E.parent.inBrushDrag||v(this,E)}).on("mouseleave",function(E){E.parent.inBrushDrag||c()}).call(k.behavior.drag().on("dragstart",function(E){(function(L,C){k.event.sourceEvent.stopPropagation();var P=C.height-k.mouse(L)[1]-2*S.verticalPadding,D=C.unitToPaddedPx.invert(P),G=C.brush,I=f(C,P),H=I.interval,N=G.svgBrush;if(N.wasDragged=!1,N.grabbingBar=I.region==="ns",N.grabbingBar){var F=H.map(C.unitToPaddedPx);N.grabPoint=P-F[0]-S.verticalPadding,N.barLength=F[1]-F[0]}N.clickableOrdinalRange=I.clickableOrdinalRange,N.stayingIntervals=C.multiselect&&G.filterSpecified?G.filter.getConsolidated():[],H&&(N.stayingIntervals=N.stayingIntervals.filter(function(V){return V[0]!==H[0]&&V[1]!==H[1]})),N.startExtent=I.region?H[I.region==="s"?1:0]:D,C.parent.inBrushDrag=!0,N.brushStartCallback()})(this,E)}).on("drag",function(E){y(this,E)}).on("dragend",function(E){(function(L,C){var P=C.brush,D=P.filter,G=P.svgBrush;G._dragging||(v(L,C),y(L,C),C.brush.svgBrush.wasDragged=!1),G._dragging=!1,k.event.sourceEvent.stopPropagation();var I=G.grabbingBar;if(G.grabbingBar=!1,G.grabLocation=void 0,C.parent.inBrushDrag=!1,c(),!G.wasDragged)return G.wasDragged=void 0,G.clickableOrdinalRange?P.filterSpecified&&C.multiselect?G.extent.push(G.clickableOrdinalRange):(G.extent=[G.clickableOrdinalRange],P.filterSpecified=!0):I?(G.extent=G.stayingIntervals,G.extent.length===0&&h(P)):h(P),G.brushCallback(C),g(L.parentNode),void G.brushEndCallback(P.filterSpecified?D.getConsolidated():[]);var H=function(){D.set(D.getConsolidated())};if(C.ordinal){var N=C.unitTickvals;N[N.length-1]<N[0]&&N.reverse(),G.newExtent=[n(0,N,G.newExtent[0],G.stayingIntervals),n(1,N,G.newExtent[1],G.stayingIntervals)];var F=G.newExtent[1]>G.newExtent[0];G.extent=G.stayingIntervals.concat(F?[G.newExtent]:[]),G.extent.length||h(P),G.brushCallback(C),F?g(L.parentNode,H):(H(),g(L.parentNode))}else H();G.brushEndCallback(P.filterSpecified?D.getConsolidated():[])})(this,E)}))}function _(w,E){return w[0]-E[0]}function h(w){w.filterSpecified=!1,w.svgBrush.extent=[[-1/0,1/0]]}function A(w){for(var E,L=w.slice(),C=[],P=L.shift();P;){for(E=P.slice();(P=L.shift())&&P[0]<=E[1];)E[1]=Math.max(E[1],P[1]);C.push(E)}return C.length===1&&C[0][0]>C[0][1]&&(C=[]),C}Q.exports={makeBrush:function(w,E,L,C,P,D){var G,I=function(){var H,N,F=[];return{set:function(V){(F=V.map(function(q){return q.slice().sort(b)}).sort(_)).length===1&&F[0][0]===-1/0&&F[0][1]===1/0&&(F=[[0,-1]]),H=A(F),N=F.reduce(function(q,te){return[Math.min(q[0],te[0]),Math.max(q[1],te[1])]},[1/0,-1/0])},get:function(){return F.slice()},getConsolidated:function(){return H},getBounds:function(){return N}}}();return I.set(L),{filter:I,filterSpecified:E,svgBrush:{extent:[],brushStartCallback:C,brushCallback:(G=P,function(H){var N=H.brush,F=function(q){return q.svgBrush.extent.map(function(te){return te.slice()})}(N),V=F.slice();N.filter.set(V),G()}),brushEndCallback:D}}},ensureAxisBrush:function(w,E,L){var C=w.selectAll("."+S.cn.axisBrush).data(T,l);C.enter().append("g").classed(S.cn.axisBrush,!0),function(P,D,G){var I=G._context.staticPlot,H=P.selectAll(".background").data(T);H.enter().append("rect").classed("background",!0).call(a).call(o).style("pointer-events",I?"none":"auto").attr("transform",d(0,S.verticalPadding)),H.call(m).attr("height",function(V){return V.height-S.verticalPadding});var N=P.selectAll(".highlight-shadow").data(T);N.enter().append("line").classed("highlight-shadow",!0).attr("x",-S.bar.width/2).attr("stroke-width",S.bar.width+S.bar.strokeWidth).attr("stroke",D).attr("opacity",S.bar.strokeOpacity).attr("stroke-linecap","butt"),N.attr("y1",function(V){return V.height}).call(x);var F=P.selectAll(".highlight").data(T);F.enter().append("line").classed("highlight",!0).attr("x",-S.bar.width/2).attr("stroke-width",S.bar.width-S.bar.strokeWidth).attr("stroke",S.bar.fillColor).attr("opacity",S.bar.fillOpacity).attr("stroke-linecap","butt"),F.attr("y1",function(V){return V.height}).call(x)}(C,E,L)},cleanRanges:function(w,E){if(Array.isArray(w[0])?(w=w.map(function(C){return C.sort(b)}),w=E.multiselect?A(w.sort(_)):[w[0]]):w=[w.sort(b)],E.tickvals){var L=E.tickvals.slice().sort(b);if(!(w=w.map(function(C){var P=[n(0,L,C[0],[]),n(1,L,C[1],[])];if(P[1]>P[0])return P}).filter(function(C){return C})).length)return}return w.length>1?w:w[0]}}},71791:function(Q,z,t){Q.exports={attributes:t(73362),supplyDefaults:t(3633),calc:t(24639),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:t(49351),categories:["gl","regl","noOpacity","noHover"],meta:{}}},49351:function(Q,z,t){var S=t(39898),k=t(27659).a0,l=t(21341),T=t(77922);z.name="parcoords",z.plot=function(b){var d=k(b.calcdata,"parcoords")[0];d.length&&l(b,d)},z.clean=function(b,d,s,e){var i=e._has&&e._has("parcoords"),r=d._has&&d._has("parcoords");i&&!r&&(e._paperdiv.selectAll(".parcoords").remove(),e._glimages.selectAll("*").remove())},z.toSVG=function(b){var d=b._fullLayout._glimages,s=S.select(b).selectAll(".svg-container");s.filter(function(e,i){return i===s.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var e=this,i=e.toDataURL("image/png");d.append("svg:image").attr({xmlns:T.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:e.style.width,height:e.style.height})}),window.setTimeout(function(){S.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},24639:function(Q,z,t){var S=t(71828).isArrayOrTypedArray,k=t(21081),l=t(28984).wrap;Q.exports=function(T,b){var d,s;return k.hasColorscale(b,"line")&&S(b.line.color)?(d=b.line.color,s=k.extractOpts(b.line).colorscale,k.calc(T,b,{vals:d,containerStr:"line",cLetter:"c"})):(d=function(e){for(var i=new Array(e),r=0;r<e;r++)i[r]=.5;return i}(b._length),s=[[0,b.line.color],[1,b.line.color]]),l({lineColor:d,cscale:s})}},25706:function(Q){Q.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},3633:function(Q,z,t){var S=t(71828),k=t(52075).hasColorscale,l=t(1586),T=t(27670).c,b=t(85501),d=t(89298),s=t(73362),e=t(57920),i=t(25706).maxDimensionCount,r=t(94397);function n(a,o,u,p){function c(v,m){return S.coerce(a,o,s.dimensions,v,m)}var x=c("values"),g=c("visible");if(x&&x.length||(g=o.visible=!1),g){c("label"),c("tickvals"),c("ticktext"),c("tickformat");var f=c("range");o._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:f},d.setConvert(o._ax,p.layout),c("multiselect");var y=c("constraintrange");y&&(o.constraintrange=e.cleanRanges(y,o))}}Q.exports=function(a,o,u,p){function c(v,m){return S.coerce(a,o,s,v,m)}var x=a.dimensions;Array.isArray(x)&&x.length>i&&(S.log("parcoords traces support up to "+i+" dimensions at the moment"),x.splice(i));var g=b(a,o,{name:"dimensions",layout:p,handleItemDefaults:n}),f=function(v,m,_,h,A){var w=A("line.color",_);if(k(v,"line")&&S.isArrayOrTypedArray(w)){if(w.length)return A("line.colorscale"),l(v,m,h,A,{prefix:"line.",cLetter:"c"}),w.length;m.line.color=_}return 1/0}(a,o,u,p,c);T(o,p,c),Array.isArray(g)&&g.length||(o.visible=!1),r(o,g,"values",f);var y={family:p.font.family,size:Math.round(p.font.size/1.2),color:p.font.color};S.coerceFont(c,"labelfont",y),S.coerceFont(c,"tickfont",y),S.coerceFont(c,"rangefont",y),c("labelangle"),c("labelside"),c("unselected.line.color"),c("unselected.line.opacity")}},1602:function(Q,z,t){var S=t(71828).isTypedArray;z.convertTypedArray=function(k){return S(k)?Array.prototype.slice.call(k):k},z.isOrdinal=function(k){return!!k.tickvals},z.isVisible=function(k){return k.visible||!("visible"in k)}},67618:function(Q,z,t){var S=t(71791);S.plot=t(21341),Q.exports=S},83398:function(Q,z,t){var S=t(56068),k=S([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),l=S([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),T=t(25706).maxDimensionCount,b=t(71828),d=1e-6,s=new Uint8Array(4),e=new Uint8Array(4),i={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function r(f,y,v,m,_){var h=f._gl;h.enable(h.SCISSOR_TEST),h.scissor(y,v,m,_),f.clear({color:[0,0,0,0],depth:1})}function n(f,y,v,m,_,h){var A=h.key;v.drawCompleted||(function(w){w.read({x:0,y:0,width:1,height:1,data:s})}(f),v.drawCompleted=!0),function w(E){var L=Math.min(m,_-E*m);E===0&&(window.cancelAnimationFrame(v.currentRafs[A]),delete v.currentRafs[A],r(f,h.scissorX,h.scissorY,h.scissorWidth,h.viewBoxSize[1])),v.clearOnly||(h.count=2*L,h.offset=2*E*m,y(h),E*m+L<_&&(v.currentRafs[A]=window.requestAnimationFrame(function(){w(E+1)})),v.drawCompleted=!1)}(0)}function a(f,y){for(var v=new Array(256),m=0;m<256;m++)v[m]=f(m/255).concat(y);return v}function o(f,y){return(f>>>8*y)%256/255}function u(f,y,v){for(var m=new Array(8*y),_=0,h=0;h<y;h++)for(var A=0;A<2;A++)for(var w=0;w<4;w++){var E=4*f+w,L=v[64*h+E];E===63&&A===0&&(L*=-1),m[_++]=L}return m}function p(f){var y="0"+f;return y.substr(y.length-2)}function c(f){return f<T?"p"+p(f+1)+"_"+p(f+4):"colors"}function x(f,y,v,m,_,h,A,w,E,L,C,P,D,G){for(var I=[[],[]],H=0;H<64;H++)I[0][H]=H===_?1:0,I[1][H]=H===h?1:0;A*=G,w*=G,E*=G,L*=G;var N=f.lines.canvasOverdrag*G,F=f.domain,V=f.canvasWidth*G,q=f.canvasHeight*G,te=f.pad.l*G,$=f.pad.b*G,W=f.layoutHeight*G,Z=f.layoutWidth*G,J=f.deselectedLines.color,ee=f.deselectedLines.opacity;return b.extendFlat({key:C,resolution:[V,q],viewBoxPos:[A+N,w],viewBoxSize:[E,L],i0:_,i1:h,dim0A:I[0].slice(0,16),dim0B:I[0].slice(16,32),dim0C:I[0].slice(32,48),dim0D:I[0].slice(48,64),dim1A:I[1].slice(0,16),dim1B:I[1].slice(16,32),dim1C:I[1].slice(32,48),dim1D:I[1].slice(48,64),drwLayer:P,contextColor:[J[0]/255,J[1]/255,J[2]/255,ee!=="auto"?J[3]*ee:Math.max(.00392156862745098,Math.pow(1/f.lines.color.length,.3333333333333333))],scissorX:(m===y?0:A+N)+(te-N)+Z*F.x[0],scissorWidth:(m===v?V-A+N:E+.5)+(m===y?A+N:0),scissorY:w+$+W*F.y[0],scissorHeight:L,viewportX:te-N+Z*F.x[0],viewportY:$+W*F.y[0],viewportWidth:V,viewportHeight:q},D)}function g(f){var y=2047,v=Math.max(0,Math.floor(f[0]*y),0),m=Math.min(y,Math.ceil(f[1]*y),y);return[Math.min(v,m),Math.max(v,m)]}Q.exports=function(f,y){var v,m,_,h,A,w=y.context,E=y.pick,L=y.regl,C=L._gl,P=C.getParameter(C.ALIASED_LINE_WIDTH_RANGE),D=Math.max(P[0],Math.min(P[1],y.viewModel.plotGlPixelRatio)),G={currentRafs:{},drawCompleted:!0,clearOnly:!1},I=function(q){for(var te={},$=0;$<=T;$+=4)te[c($)]=q.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return te}(L),H=L.texture(i),N=[];V(y);var F=L({profile:!1,blend:{enable:w,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!w,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:L.prop("scissorX"),y:L.prop("scissorY"),width:L.prop("scissorWidth"),height:L.prop("scissorHeight")}},viewport:{x:L.prop("viewportX"),y:L.prop("viewportY"),width:L.prop("viewportWidth"),height:L.prop("viewportHeight")},dither:!1,vert:k,frag:l,primitive:"lines",lineWidth:D,attributes:I,uniforms:{resolution:L.prop("resolution"),viewBoxPos:L.prop("viewBoxPos"),viewBoxSize:L.prop("viewBoxSize"),dim0A:L.prop("dim0A"),dim1A:L.prop("dim1A"),dim0B:L.prop("dim0B"),dim1B:L.prop("dim1B"),dim0C:L.prop("dim0C"),dim1C:L.prop("dim1C"),dim0D:L.prop("dim0D"),dim1D:L.prop("dim1D"),loA:L.prop("loA"),hiA:L.prop("hiA"),loB:L.prop("loB"),hiB:L.prop("hiB"),loC:L.prop("loC"),hiC:L.prop("hiC"),loD:L.prop("loD"),hiD:L.prop("hiD"),palette:H,contextColor:L.prop("contextColor"),maskTexture:L.prop("maskTexture"),drwLayer:L.prop("drwLayer"),maskHeight:L.prop("maskHeight")},offset:L.prop("offset"),count:L.prop("count")});function V(q){v=q.model,m=q.viewModel,_=m.dimensions.slice(),h=_[0]?_[0].values.length:0;var te=v.lines,$=E?te.color.map(function(Z,J){return J/te.color.length}):te.color,W=function(Z,J,ee){for(var re,ae=new Array(Z*(T+4)),oe=0,ce=0;ce<Z;ce++){for(var pe=0;pe<T;pe++)ae[oe++]=pe<J.length?J[pe].paddedUnitValues[ce]:.5;ae[oe++]=o(ce,2),ae[oe++]=o(ce,1),ae[oe++]=o(ce,0),ae[oe++]=(re=ee[ce],Math.max(d,Math.min(.999999,re)))}return ae}(h,_,$);(function(Z,J,ee){for(var re=0;re<=T;re+=4)Z[c(re)](u(re/4,J,ee))})(I,h,W),w||E||(H=L.texture(b.extendFlat({data:a(v.unitToColor,255)},i)))}return{render:function(q,te,$){var W,Z,J,ee=q.length,re=1/0,ae=-1/0;for(W=0;W<ee;W++)q[W].dim0.canvasX<re&&(re=q[W].dim0.canvasX,Z=W),q[W].dim1.canvasX>ae&&(ae=q[W].dim1.canvasX,J=W);ee===0&&r(L,0,0,v.canvasWidth,v.canvasHeight);var oe=function(se){var le,ne,me,Ee=[[],[]];for(me=0;me<64;me++){var be=!se&&me<_.length?_[me].brush.filter.getBounds():[-1/0,1/0];Ee[0][me]=be[0],Ee[1][me]=be[1]}var De=new Array(16384);for(le=0;le<16384;le++)De[le]=255;if(!se)for(le=0;le<_.length;le++){var Ue=le%8,he=(le-Ue)/8,ke=Math.pow(2,Ue),_e=_[le].brush.filter.get();if(!(_e.length<2)){var Ce=g(_e[0])[1];for(ne=1;ne<_e.length;ne++){var Fe=g(_e[ne]);for(me=Ce+1;me<Fe[0];me++)De[8*me+he]&=~ke;Ce=Math.max(Ce,Fe[1])}}}var Re={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:De};return A?A(Re):A=L.texture(Re),{maskTexture:A,maskHeight:2048,loA:Ee[0].slice(0,16),loB:Ee[0].slice(16,32),loC:Ee[0].slice(32,48),loD:Ee[0].slice(48,64),hiA:Ee[1].slice(0,16),hiB:Ee[1].slice(16,32),hiC:Ee[1].slice(32,48),hiD:Ee[1].slice(48,64)}}(w);for(W=0;W<ee;W++){var ce=q[W],pe=ce.dim0.crossfilterDimensionIndex,ve=ce.dim1.crossfilterDimensionIndex,we=ce.canvasX,xe=ce.canvasY,ge=we+ce.panelSizeX,Oe=ce.plotGlPixelRatio;if(te||!N[pe]||N[pe][0]!==we||N[pe][1]!==ge){N[pe]=[we,ge];var Ae=x(v,Z,J,W,pe,ve,we,xe,ce.panelSizeX,ce.panelSizeY,ce.dim0.crossfilterDimensionIndex,w?0:E?2:1,oe,Oe);G.clearOnly=$;var Te=te?v.lines.blockLineCount:h;n(L,F,G,Te,h,Ae)}}},readPixel:function(q,te){return L.read({x:q,y:te,width:1,height:1,data:e}),e},readPixels:function(q,te,$,W){var Z=new Uint8Array(4*$*W);return L.read({x:q,y:te,width:$,height:W,data:Z}),Z},destroy:function(){for(var q in f.style["pointer-events"]="none",H.destroy(),A&&A.destroy(),I)I[q].destroy()},update:V}}},94397:function(Q){Q.exports=function(z,t,S,k){var l,T;for(k||(k=1/0),l=0;l<t.length;l++)(T=t[l]).visible&&(k=Math.min(k,T[S].length));for(k===1/0&&(k=0),z._length=k,l=0;l<t.length;l++)(T=t[l]).visible&&(T._length=k);return k}},17171:function(Q,z,t){var S=t(39898),k=t(71828),l=k.numberFormat,T=t(36652),b=t(89298),d=k.strRotate,s=k.strTranslate,e=t(63893),i=t(91424),r=t(21081),n=t(28984),a=n.keyFun,o=n.repeat,u=n.unwrap,p=t(1602),c=t(25706),x=t(57920),g=t(83398);function f(H,N,F){return k.aggNums(H,null,N,F)}function y(H,N){return m(f(Math.min,H,N),f(Math.max,H,N))}function v(H){var N=H.range;return N?m(N[0],N[1]):y(H.values,H._length)}function m(H,N){return!isNaN(H)&&isFinite(H)||(H=0),!isNaN(N)&&isFinite(N)||(N=0),H===N&&(H===0?(H-=1,N+=1):(H*=.9,N*=1.1)),[H,N]}function _(H,N,F,V,q){var te,$,W=v(F);return V?S.scale.ordinal().domain(V.map((te=l(F.tickformat),$=q,$?function(Z,J){var ee=$[J];return ee??te(Z)}:te))).range(V.map(function(Z){var J=(Z-W[0])/(W[1]-W[0]);return H-N+J*(2*N-H)})):S.scale.linear().domain(W).range([H-N,N])}function h(H){if(H.tickvals){var N=v(H);return S.scale.ordinal().domain(H.tickvals).range(H.tickvals.map(function(F){return(F-N[0])/(N[1]-N[0])}))}}function A(H){var N=H.map(function(q){return q[0]}),F=H.map(function(q){var te=T(q[1]);return S.rgb("rgb("+te[0]+","+te[1]+","+te[2]+")")}),V="rgb".split("").map(function(q){return S.scale.linear().clamp(!0).domain(N).range(F.map((te=q,function($){return $[te]})));var te});return function(q){return V.map(function(te){return te(q)})}}function w(H){return H.dimensions.some(function(N){return N.brush.filterSpecified})}function E(H,N,F){var V=u(N),q=V.trace,te=p.convertTypedArray(V.lineColor),$=q.line,W={color:T(q.unselected.line.color),opacity:q.unselected.line.opacity},Z=r.extractOpts($),J=Z.reversescale?r.flipScale(V.cscale):V.cscale,ee=q.domain,re=q.dimensions,ae=H.width,oe=q.labelangle,ce=q.labelside,pe=q.labelfont,ve=q.tickfont,we=q.rangefont,xe=k.extendDeepNoArrays({},$,{color:te.map(S.scale.linear().domain(v({values:te,range:[Z.min,Z.max],_length:q._length}))),blockLineCount:c.blockLineCount,canvasOverdrag:c.overdrag*c.canvasPixelRatio}),ge=Math.floor(ae*(ee.x[1]-ee.x[0])),Oe=Math.floor(H.height*(ee.y[1]-ee.y[0])),Ae=H.margin||{l:80,r:80,t:100,b:80},Te=ge,se=Oe;return{key:F,colCount:re.filter(p.isVisible).length,dimensions:re,tickDistance:c.tickDistance,unitToColor:A(J),lines:xe,deselectedLines:W,labelAngle:oe,labelSide:ce,labelFont:pe,tickFont:ve,rangeFont:we,layoutWidth:ae,layoutHeight:H.height,domain:ee,translateX:ee.x[0]*ae,translateY:H.height-ee.y[1]*H.height,pad:Ae,canvasWidth:Te*c.canvasPixelRatio+2*xe.canvasOverdrag,canvasHeight:se*c.canvasPixelRatio,width:Te,height:se,canvasPixelRatio:c.canvasPixelRatio}}function L(H,N,F){var V=F.width,q=F.height,te=F.dimensions,$=F.canvasPixelRatio,W=function(ae){return V*ae/Math.max(1,F.colCount-1)},Z=c.verticalPadding/q,J=function(ae,oe){return S.scale.linear().range([oe,ae-oe])}(q,c.verticalPadding),ee={key:F.key,xScale:W,model:F,inBrushDrag:!1},re={};return ee.dimensions=te.filter(p.isVisible).map(function(ae,oe){var ce=function(be,De){return S.scale.linear().domain(v(be)).range([De,1-De])}(ae,Z),pe=re[ae.label];re[ae.label]=(pe||0)+1;var ve=ae.label+(pe?"__"+pe:""),we=ae.constraintrange,xe=we&&we.length;xe&&!Array.isArray(we[0])&&(we=[we]);var ge=xe?we.map(function(be){return be.map(ce)}):[[-1/0,1/0]],Oe=ae.values;Oe.length>ae._length&&(Oe=Oe.slice(0,ae._length));var Ae,Te=ae.tickvals;function se(be,De){return{val:be,text:Ae[De]}}function le(be,De){return be.val-De.val}if(Array.isArray(Te)&&Te.length){Ae=ae.ticktext,Array.isArray(Ae)&&Ae.length?Ae.length>Te.length?Ae=Ae.slice(0,Te.length):Te.length>Ae.length&&(Te=Te.slice(0,Ae.length)):Ae=Te.map(l(ae.tickformat));for(var ne=1;ne<Te.length;ne++)if(Te[ne]<Te[ne-1]){for(var me=Te.map(se).sort(le),Ee=0;Ee<Te.length;Ee++)Te[Ee]=me[Ee].val,Ae[Ee]=me[Ee].text;break}}else Te=void 0;return Oe=p.convertTypedArray(Oe),{key:ve,label:ae.label,tickFormat:ae.tickformat,tickvals:Te,ticktext:Ae,ordinal:p.isOrdinal(ae),multiselect:ae.multiselect,xIndex:oe,crossfilterDimensionIndex:oe,visibleIndex:ae._index,height:q,values:Oe,paddedUnitValues:Oe.map(ce),unitTickvals:Te&&Te.map(ce),xScale:W,x:W(oe),canvasX:W(oe)*$,unitToPaddedPx:J,domainScale:_(q,c.verticalPadding,ae,Te,Ae),ordinalScale:h(ae),parent:ee,model:F,brush:x.makeBrush(H,xe,ge,function(){H.linePickActive(!1)},function(){var be=ee;be.focusLayer&&be.focusLayer.render(be.panels,!0);var De=w(be);!H.contextShown()&&De?(be.contextLayer&&be.contextLayer.render(be.panels,!0),H.contextShown(!0)):H.contextShown()&&!De&&(be.contextLayer&&be.contextLayer.render(be.panels,!0,!0),H.contextShown(!1))},function(be){if(ee.focusLayer.render(ee.panels,!0),ee.pickLayer&&ee.pickLayer.render(ee.panels,!0),H.linePickActive(!0),N&&N.filterChanged){var De=ce.invert,Ue=be.map(function(he){return he.map(De).sort(k.sorterAsc)}).sort(function(he,ke){return he[0]-ke[0]});N.filterChanged(ee.key,ae._index,Ue)}})}}),ee}function C(H){H.classed(c.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function P(H,N){var F=N==="top"?1:-1,V=H*Math.PI/180;return{dir:F,dx:Math.sin(V),dy:Math.cos(V),degrees:H}}function D(H,N,F){for(var V=N.panels||(N.panels=[]),q=H.data(),te=0;te<q.length-1;te++){var $=V[te]||(V[te]={}),W=q[te],Z=q[te+1];$.dim0=W,$.dim1=Z,$.canvasX=W.canvasX,$.panelSizeX=Z.canvasX-W.canvasX,$.panelSizeY=N.model.canvasHeight,$.y=0,$.canvasY=0,$.plotGlPixelRatio=F}}function G(H,N){return b.tickText(H._ax,N,!1).text}function I(H,N){if(H.ordinal)return"";var F=H.domainScale.domain(),V=F[N?F.length-1:0];return G(H.model.dimensions[H.visibleIndex],V)}Q.exports=function(H,N,F,V){var q=H._context.staticPlot,te=H._fullLayout,$=te._toppaper,W=te._glcontainer,Z=H._context.plotGlPixelRatio,J=H._fullLayout.paper_bgcolor;(function(be){for(var De=0;De<be.length;De++)for(var Ue=0;Ue<be[De].length;Ue++)for(var he=be[De][Ue].trace,ke=he.dimensions,_e=0;_e<ke.length;_e++){var Ce=ke[_e].values,Fe=ke[_e]._ax;Fe&&(Fe.range?Fe.range=m(Fe.range[0],Fe.range[1]):Fe.range=y(Ce,he._length),Fe.dtick||(Fe.dtick=.01*(Math.abs(Fe.range[1]-Fe.range[0])||1)),Fe.tickformat=ke[_e].tickformat,b.calcTicks(Fe),Fe.cleanRange())}})(N);var ee,re,ae=(ee=!0,re=!1,{linePickActive:function(be){return arguments.length?ee=!!be:ee},contextShown:function(be){return arguments.length?re=!!be:re}}),oe=N.filter(function(be){return u(be).trace.visible}).map(E.bind(0,F)).map(L.bind(0,ae,V));W.each(function(be,De){return k.extendFlat(be,oe[De])});var ce=W.selectAll(".gl-canvas").each(function(be){be.viewModel=oe[0],be.viewModel.plotGlPixelRatio=Z,be.viewModel.paperColor=J,be.model=be.viewModel?be.viewModel.model:null}),pe=null;ce.filter(function(be){return be.pick}).style("pointer-events",q?"none":"auto").on("mousemove",function(be){if(ae.linePickActive()&&be.lineLayer&&V&&V.hover){var De=S.event,Ue=this.width,he=this.height,ke=S.mouse(this),_e=ke[0],Ce=ke[1];if(_e<0||Ce<0||_e>=Ue||Ce>=he)return;var Fe=be.lineLayer.readPixel(_e,he-1-Ce),Re=Fe[3]!==0,He=Re?Fe[2]+256*(Fe[1]+256*Fe[0]):null,Ge={x:_e,y:Ce,clientX:De.clientX,clientY:De.clientY,dataIndex:be.model.key,curveNumber:He};He!==pe&&(Re?V.hover(Ge):V.unhover&&V.unhover(Ge),pe=He)}}),ce.style("opacity",function(be){return be.pick?0:1}),$.style("background","rgba(255, 255, 255, 0)");var ve=$.selectAll("."+c.cn.parcoords).data(oe,a);ve.exit().remove(),ve.enter().append("g").classed(c.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),ve.attr("transform",function(be){return s(be.model.translateX,be.model.translateY)});var we=ve.selectAll("."+c.cn.parcoordsControlView).data(o,a);we.enter().append("g").classed(c.cn.parcoordsControlView,!0),we.attr("transform",function(be){return s(be.model.pad.l,be.model.pad.t)});var xe=we.selectAll("."+c.cn.yAxis).data(function(be){return be.dimensions},a);xe.enter().append("g").classed(c.cn.yAxis,!0),we.each(function(be){D(xe,be,Z)}),ce.each(function(be){if(be.viewModel){!be.lineLayer||V?be.lineLayer=g(this,be):be.lineLayer.update(be),(be.key||be.key===0)&&(be.viewModel[be.key]=be.lineLayer);var De=!be.context||V;be.lineLayer.render(be.viewModel.panels,De)}}),xe.attr("transform",function(be){return s(be.xScale(be.xIndex),0)}),xe.call(S.behavior.drag().origin(function(be){return be}).on("drag",function(be){var De=be.parent;ae.linePickActive(!1),be.x=Math.max(-c.overdrag,Math.min(be.model.width+c.overdrag,S.event.x)),be.canvasX=be.x*be.model.canvasPixelRatio,xe.sort(function(Ue,he){return Ue.x-he.x}).each(function(Ue,he){Ue.xIndex=he,Ue.x=be===Ue?Ue.x:Ue.xScale(Ue.xIndex),Ue.canvasX=Ue.x*Ue.model.canvasPixelRatio}),D(xe,De,Z),xe.filter(function(Ue){return Math.abs(be.xIndex-Ue.xIndex)!==0}).attr("transform",function(Ue){return s(Ue.xScale(Ue.xIndex),0)}),S.select(this).attr("transform",s(be.x,0)),xe.each(function(Ue,he,ke){ke===be.parent.key&&(De.dimensions[he]=Ue)}),De.contextLayer&&De.contextLayer.render(De.panels,!1,!w(De)),De.focusLayer.render&&De.focusLayer.render(De.panels)}).on("dragend",function(be){var De=be.parent;be.x=be.xScale(be.xIndex),be.canvasX=be.x*be.model.canvasPixelRatio,D(xe,De,Z),S.select(this).attr("transform",function(Ue){return s(Ue.x,0)}),De.contextLayer&&De.contextLayer.render(De.panels,!1,!w(De)),De.focusLayer&&De.focusLayer.render(De.panels),De.pickLayer&&De.pickLayer.render(De.panels,!0),ae.linePickActive(!0),V&&V.axesMoved&&V.axesMoved(De.key,De.dimensions.map(function(Ue){return Ue.crossfilterDimensionIndex}))})),xe.exit().remove();var ge=xe.selectAll("."+c.cn.axisOverlays).data(o,a);ge.enter().append("g").classed(c.cn.axisOverlays,!0),ge.selectAll("."+c.cn.axis).remove();var Oe=ge.selectAll("."+c.cn.axis).data(o,a);Oe.enter().append("g").classed(c.cn.axis,!0),Oe.each(function(be){var De=be.model.height/be.model.tickDistance,Ue=be.domainScale,he=Ue.domain();S.select(this).call(S.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(De,be.tickFormat).tickValues(be.ordinal?he:null).tickFormat(function(ke){return p.isOrdinal(be)?ke:G(be.model.dimensions[be.visibleIndex],ke)}).scale(Ue)),i.font(Oe.selectAll("text"),be.model.tickFont)}),Oe.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),Oe.selectAll("text").style("text-shadow",e.makeTextShadow(J)).style("cursor","default");var Ae=ge.selectAll("."+c.cn.axisHeading).data(o,a);Ae.enter().append("g").classed(c.cn.axisHeading,!0);var Te=Ae.selectAll("."+c.cn.axisTitle).data(o,a);Te.enter().append("text").classed(c.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",q?"none":"auto"),Te.text(function(be){return be.label}).each(function(be){var De=S.select(this);i.font(De,be.model.labelFont),e.convertToTspans(De,H)}).attr("transform",function(be){var De=P(be.model.labelAngle,be.model.labelSide),Ue=c.axisTitleOffset;return(De.dir>0?"":s(0,2*Ue+be.model.height))+d(De.degrees)+s(-Ue*De.dx,-Ue*De.dy)}).attr("text-anchor",function(be){var De=P(be.model.labelAngle,be.model.labelSide);return 2*Math.abs(De.dx)>Math.abs(De.dy)?De.dir*De.dx<0?"start":"end":"middle"});var se=ge.selectAll("."+c.cn.axisExtent).data(o,a);se.enter().append("g").classed(c.cn.axisExtent,!0);var le=se.selectAll("."+c.cn.axisExtentTop).data(o,a);le.enter().append("g").classed(c.cn.axisExtentTop,!0),le.attr("transform",s(0,-c.axisExtentOffset));var ne=le.selectAll("."+c.cn.axisExtentTopText).data(o,a);ne.enter().append("text").classed(c.cn.axisExtentTopText,!0).call(C),ne.text(function(be){return I(be,!0)}).each(function(be){i.font(S.select(this),be.model.rangeFont)});var me=se.selectAll("."+c.cn.axisExtentBottom).data(o,a);me.enter().append("g").classed(c.cn.axisExtentBottom,!0),me.attr("transform",function(be){return s(0,be.model.height+c.axisExtentOffset)});var Ee=me.selectAll("."+c.cn.axisExtentBottomText).data(o,a);Ee.enter().append("text").classed(c.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(C),Ee.text(function(be){return I(be,!1)}).each(function(be){i.font(S.select(this),be.model.rangeFont)}),x.ensureAxisBrush(ge,J,H)}},21341:function(Q,z,t){var S=t(17171),k=t(79749),l=t(1602).isVisible,T={};function b(d,s,e){var i=s.indexOf(e),r=d.indexOf(i);return r===-1&&(r+=s.length),r}(Q.exports=function(d,s){var e=d._fullLayout;if(k(d,[],T)){var i={},r={},n={},a={},o=e._size;s.forEach(function(u,p){var c=u[0].trace;n[p]=c.index;var x=a[p]=c._fullInput.index;i[p]=d.data[x].dimensions,r[p]=d.data[x].dimensions.slice()}),S(d,s,{width:o.w,height:o.h,margin:{t:o.t,r:o.r,b:o.b,l:o.l}},{filterChanged:function(u,p,c){var x=r[u][p],g=c.map(function(h){return h.slice()}),f="dimensions["+p+"].constraintrange",y=e._tracePreGUI[d._fullData[n[u]]._fullInput.uid];if(y[f]===void 0){var v=x.constraintrange;y[f]=v||null}var m=d._fullData[n[u]].dimensions[p];g.length?(g.length===1&&(g=g[0]),x.constraintrange=g,m.constraintrange=g.slice(),g=[g]):(delete x.constraintrange,delete m.constraintrange,g=null);var _={};_[f]=g,d.emit("plotly_restyle",[_,[a[u]]])},hover:function(u){d.emit("plotly_hover",u)},unhover:function(u){d.emit("plotly_unhover",u)},axesMoved:function(u,p){var c=function(x,g){return function(f,y){return b(x,g,f)-b(x,g,y)}}(p,r[u].filter(l));i[u].sort(c),r[u].filter(function(x){return!l(x)}).sort(function(x){return r[u].indexOf(x)}).forEach(function(x){i[u].splice(i[u].indexOf(x),1),i[u].splice(r[u].indexOf(x),0,x)}),d.emit("plotly_restyle",[{dimensions:[i[u]]},[a[u]]])}})}}).reglPrecompiled=T},34e3:function(Q,z,t){var S=t(9012),k=t(27670).Y,l=t(41940),T=t(22399),b=t(5386).fF,d=t(5386).si,s=t(1426).extendFlat,e=l({editType:"plot",arrayOk:!0,colorEditType:"plot"});Q.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:s({},S.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:b({},{keys:["label","color","value","percent","text"]}),texttemplate:d({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:s({},e,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:s({},e,{}),outsidetextfont:s({},e,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:s({},e,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:k({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:s({},e,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},13584:function(Q,z,t){var S=t(74875);z.name="pie",z.plot=function(k,l,T,b){S.plotBasePlot(z.name,k,l,T,b)},z.clean=function(k,l,T,b){S.cleanBasePlot(z.name,k,l,T,b)}},32354:function(Q,z,t){var S=t(92770),k=t(84267),l=t(7901),T={};function b(s){return function(e,i){return!!e&&!!(e=k(e)).isValid()&&(e=l.addOpacity(e,e.getAlpha()),s[i]||(s[i]=e),e)}}function d(s,e){var i,r=JSON.stringify(s),n=e[r];if(!n){for(n=s.slice(),i=0;i<s.length;i++)n.push(k(s[i]).lighten(20).toHexString());for(i=0;i<s.length;i++)n.push(k(s[i]).darken(20).toHexString());e[r]=n}return n}Q.exports={calc:function(s,e){var i,r,n=[],a=s._fullLayout,o=a.hiddenlabels||[],u=e.labels,p=e.marker.colors||[],c=e.values,x=e._length,g=e._hasValues&&x;if(e.dlabel)for(u=new Array(x),i=0;i<x;i++)u[i]=String(e.label0+i*e.dlabel);var f={},y=b(a["_"+e.type+"colormap"]),v=0,m=!1;for(i=0;i<x;i++){var _,h,A;if(g){if(_=c[i],!S(_))continue;_=+_}else _=1;(h=u[i])!==void 0&&h!==""||(h=i);var w=f[h=String(h)];w===void 0?(f[h]=n.length,(A=o.indexOf(h)!==-1)||(v+=_),n.push({v:_,label:h,color:y(p[i],h),i,pts:[i],hidden:A})):(m=!0,(r=n[w]).v+=_,r.pts.push(i),r.hidden||(v+=_),r.color===!1&&p[i]&&(r.color=y(p[i],h)))}return n=n.filter(function(E){return E.v>=0}),(e.type==="funnelarea"?m:e.sort)&&n.sort(function(E,L){return L.v-E.v}),n[0]&&(n[0].vTotal=v),n},crossTraceCalc:function(s,e){var i=(e||{}).type;i||(i="pie");var r=s._fullLayout,n=s.calcdata,a=r[i+"colorway"],o=r["_"+i+"colormap"];r["extend"+i+"colors"]&&(a=d(a,T));for(var u=0,p=0;p<n.length;p++){var c=n[p];if(c[0].trace.type===i)for(var x=0;x<c.length;x++){var g=c[x];g.color===!1&&(o[g.label]?g.color=o[g.label]:(o[g.label]=g.color=a[u%a.length],u++))}}},makePullColorFn:b,generateExtendedColors:d}},37434:function(Q,z,t){var S=t(92770),k=t(71828),l=t(34e3),T=t(27670).c,b=t(90769).handleText;function d(s,e){var i=Array.isArray(s),r=k.isArrayOrTypedArray(e),n=Math.min(i?s.length:1/0,r?e.length:1/0);if(isFinite(n)||(n=0),n&&r){for(var a,o=0;o<n;o++){var u=e[o];if(S(u)&&u>0){a=!0;break}}a||(n=0)}return{hasLabels:i,hasValues:r,len:n}}Q.exports={handleLabelsAndValues:d,supplyDefaults:function(s,e,i,r){function n(y,v){return k.coerce(s,e,l,y,v)}var a=d(n("labels"),n("values")),o=a.len;if(e._hasLabels=a.hasLabels,e._hasValues=a.hasValues,!e._hasLabels&&e._hasValues&&(n("label0"),n("dlabel")),o){e._length=o,n("marker.line.width")&&n("marker.line.color"),n("marker.colors"),n("scalegroup");var u,p=n("text"),c=n("texttemplate");if(c||(u=n("textinfo",Array.isArray(p)?"text+percent":"percent")),n("hovertext"),n("hovertemplate"),c||u&&u!=="none"){var x=n("textposition");b(s,e,r,n,x,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(x)||x==="auto"||x==="outside")&&n("automargin"),(x==="inside"||x==="auto"||Array.isArray(x))&&n("insidetextorientation")}T(e,r,n);var g=n("hole");if(n("title.text")){var f=n("title.position",g?"middle center":"top center");g||f!=="middle center"||(e.title.position="top center"),k.coerceFont(n,"title.font",r.font)}n("sort"),n("direction"),n("rotation"),n("pull")}else e.visible=!1}}},20007:function(Q,z,t){var S=t(23469).appendArrayMultiPointValues;Q.exports=function(k,l){var T={curveNumber:l.index,pointNumbers:k.pts,data:l._input,fullData:l,label:k.label,color:k.color,value:k.v,percent:k.percent,text:k.text,bbox:k.bbox,v:k.v};return k.pts.length===1&&(T.pointNumber=T.i=k.pts[0]),S(T,l,k.pts),l.type==="funnelarea"&&(delete T.v,delete T.i),T}},53581:function(Q,z,t){var S=t(71828);function k(l){return l.indexOf("e")!==-1?l.replace(/[.]?0+e/,"e"):l.indexOf(".")!==-1?l.replace(/[.]?0+$/,""):l}z.formatPiePercent=function(l,T){var b=k((100*l).toPrecision(3));return S.numSeparate(b,T)+"%"},z.formatPieValue=function(l,T){var b=k(l.toPrecision(10));return S.numSeparate(b,T)},z.getFirstFilled=function(l,T){if(Array.isArray(l))for(var b=0;b<T.length;b++){var d=l[T[b]];if(d||d===0||d==="")return d}},z.castOption=function(l,T){return Array.isArray(l)?z.getFirstFilled(l,T):l||void 0},z.getRotationAngle=function(l){return(l==="auto"?0:l)*Math.PI/180}},58810:function(Q,z,t){Q.exports={attributes:t(34e3),supplyDefaults:t(37434).supplyDefaults,supplyLayoutDefaults:t(92097),layoutAttributes:t(92774),calc:t(32354).calc,crossTraceCalc:t(32354).crossTraceCalc,plot:t(14575).plot,style:t(68357),styleOne:t(63463),moduleType:"trace",name:"pie",basePlotModule:t(13584),categories:["pie-like","pie","showLegend"],meta:{}}},92774:function(Q){Q.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},92097:function(Q,z,t){var S=t(71828),k=t(92774);Q.exports=function(l,T){function b(d,s){return S.coerce(l,T,k,d,s)}b("hiddenlabels"),b("piecolorway",T.colorway),b("extendpiecolors")}},14575:function(Q,z,t){var S=t(39898),k=t(74875),l=t(30211),T=t(7901),b=t(91424),d=t(71828),s=d.strScale,e=d.strTranslate,i=t(63893),r=t(72597),n=r.recordMinTextSize,a=r.clearMinTextSize,o=t(97313).TEXTPAD,u=t(53581),p=t(20007),c=t(71828).isValidTextValue;function x(N,F,V){var q=V[0],te=q.cx,$=q.cy,W=q.trace,Z=W.type==="funnelarea";"_hasHoverLabel"in W||(W._hasHoverLabel=!1),"_hasHoverEvent"in W||(W._hasHoverEvent=!1),N.on("mouseover",function(J){var ee=F._fullLayout,re=F._fullData[W.index];if(!F._dragging&&ee.hovermode!==!1){var ae=re.hoverinfo;if(Array.isArray(ae)&&(ae=l.castHoverinfo({hoverinfo:[u.castOption(ae,J.pts)],_module:W._module},ee,0)),ae==="all"&&(ae="label+text+value+percent+name"),re.hovertemplate||ae!=="none"&&ae!=="skip"&&ae){var oe=J.rInscribed||0,ce=te+J.pxmid[0]*(1-oe),pe=$+J.pxmid[1]*(1-oe),ve=ee.separators,we=[];if(ae&&ae.indexOf("label")!==-1&&we.push(J.label),J.text=u.castOption(re.hovertext||re.text,J.pts),ae&&ae.indexOf("text")!==-1){var xe=J.text;d.isValidTextValue(xe)&&we.push(xe)}J.value=J.v,J.valueLabel=u.formatPieValue(J.v,ve),ae&&ae.indexOf("value")!==-1&&we.push(J.valueLabel),J.percent=J.v/q.vTotal,J.percentLabel=u.formatPiePercent(J.percent,ve),ae&&ae.indexOf("percent")!==-1&&we.push(J.percentLabel);var ge=re.hoverlabel,Oe=ge.font,Ae=[];l.loneHover({trace:W,x0:ce-oe*q.r,x1:ce+oe*q.r,y:pe,_x0:Z?te+J.TL[0]:ce-oe*q.r,_x1:Z?te+J.TR[0]:ce+oe*q.r,_y0:Z?$+J.TL[1]:pe-oe*q.r,_y1:Z?$+J.BL[1]:pe+oe*q.r,text:we.join("<br>"),name:re.hovertemplate||ae.indexOf("name")!==-1?re.name:void 0,idealAlign:J.pxmid[0]<0?"left":"right",color:u.castOption(ge.bgcolor,J.pts)||J.color,borderColor:u.castOption(ge.bordercolor,J.pts),fontFamily:u.castOption(Oe.family,J.pts),fontSize:u.castOption(Oe.size,J.pts),fontColor:u.castOption(Oe.color,J.pts),nameLength:u.castOption(ge.namelength,J.pts),textAlign:u.castOption(ge.align,J.pts),hovertemplate:u.castOption(re.hovertemplate,J.pts),hovertemplateLabels:J,eventData:[p(J,re)]},{container:ee._hoverlayer.node(),outerContainer:ee._paper.node(),gd:F,inOut_bbox:Ae}),J.bbox=Ae[0],W._hasHoverLabel=!0}W._hasHoverEvent=!0,F.emit("plotly_hover",{points:[p(J,re)],event:S.event})}}),N.on("mouseout",function(J){var ee=F._fullLayout,re=F._fullData[W.index],ae=S.select(this).datum();W._hasHoverEvent&&(J.originalEvent=S.event,F.emit("plotly_unhover",{points:[p(ae,re)],event:S.event}),W._hasHoverEvent=!1),W._hasHoverLabel&&(l.loneUnhover(ee._hoverlayer.node()),W._hasHoverLabel=!1)}),N.on("click",function(J){var ee=F._fullLayout,re=F._fullData[W.index];F._dragging||ee.hovermode===!1||(F._hoverdata=[p(J,re)],l.click(F,S.event))})}function g(N,F,V){var q=u.castOption(N.insidetextfont.color,F.pts);!q&&N._input.textfont&&(q=u.castOption(N._input.textfont.color,F.pts));var te=u.castOption(N.insidetextfont.family,F.pts)||u.castOption(N.textfont.family,F.pts)||V.family,$=u.castOption(N.insidetextfont.size,F.pts)||u.castOption(N.textfont.size,F.pts)||V.size;return{color:q||T.contrast(F.color),family:te,size:$}}function f(N,F){for(var V,q,te=0;te<N.length;te++)if((q=(V=N[te][0]).trace).title.text){var $=q.title.text;q._meta&&($=d.templateString($,q._meta));var W=b.tester.append("text").attr("data-notex",1).text($).call(b.font,q.title.font).call(i.convertToTspans,F),Z=b.bBox(W.node(),!0);V.titleBox={width:Z.width,height:Z.height},W.remove()}}function y(N,F,V){var q=V.r||F.rpx1,te=F.rInscribed;if(F.startangle===F.stopangle)return{rCenter:1-te,scale:0,rotate:0,textPosAngle:0};var $,W=F.ring,Z=W===1&&Math.abs(F.startangle-F.stopangle)===2*Math.PI,J=F.halfangle,ee=F.midangle,re=V.trace.insidetextorientation,ae=re==="horizontal",oe=re==="tangential",ce=re==="radial",pe=re==="auto",ve=[];if(!pe){var we,xe=function(le,ne){if(function(De,Ue){var he=De.startangle,ke=De.stopangle;return he>Ue&&Ue>ke||he<Ue&&Ue<ke}(F,le)){var me=Math.abs(le-F.startangle),Ee=Math.abs(le-F.stopangle),be=me<Ee?me:Ee;($=ne==="tan"?m(N,q,W,be,0):v(N,q,W,be,Math.PI/2)).textPosAngle=le,ve.push($)}};if(ae||oe){for(we=4;we>=-4;we-=2)xe(Math.PI*we,"tan");for(we=4;we>=-4;we-=2)xe(Math.PI*(we+1),"tan")}if(ae||ce){for(we=4;we>=-4;we-=2)xe(Math.PI*(we+1.5),"rad");for(we=4;we>=-4;we-=2)xe(Math.PI*(we+.5),"rad")}}if(Z||pe||ae){var ge=Math.sqrt(N.width*N.width+N.height*N.height);if(($={scale:te*q*2/ge,rCenter:1-te,rotate:0}).textPosAngle=(F.startangle+F.stopangle)/2,$.scale>=1)return $;ve.push($)}(pe||ce)&&(($=v(N,q,W,J,ee)).textPosAngle=(F.startangle+F.stopangle)/2,ve.push($)),(pe||oe)&&(($=m(N,q,W,J,ee)).textPosAngle=(F.startangle+F.stopangle)/2,ve.push($));for(var Oe=0,Ae=0,Te=0;Te<ve.length;Te++){var se=ve[Te].scale;if(Ae<se&&(Ae=se,Oe=Te),!pe&&Ae>=1)break}return ve[Oe]}function v(N,F,V,q,te){F=Math.max(0,F-2*o);var $=N.width/N.height,W=A($,q,F,V);return{scale:2*W/N.height,rCenter:_($,W/F),rotate:h(te)}}function m(N,F,V,q,te){F=Math.max(0,F-2*o);var $=N.height/N.width,W=A($,q,F,V);return{scale:2*W/N.width,rCenter:_($,W/F),rotate:h(te+Math.PI/2)}}function _(N,F){return Math.cos(F)-N*F}function h(N){return(180/Math.PI*N+720)%180-90}function A(N,F,V,q){var te=N+1/(2*Math.tan(F));return V*Math.min(1/(Math.sqrt(te*te+.5)+te),q/(Math.sqrt(N*N+q/2)+N))}function w(N,F){return N.v!==F.vTotal||F.trace.hole?Math.min(1/(1+1/Math.sin(N.halfangle)),N.ring/2):1}function E(N,F){var V=F.pxmid[0],q=F.pxmid[1],te=N.width/2,$=N.height/2;return V<0&&(te*=-1),q<0&&($*=-1),{scale:1,rCenter:1,rotate:0,x:te+Math.abs($)*(te>0?1:-1)/2,y:$/(1+V*V/(q*q)),outside:!0}}function L(N,F){var V,q,te,$=N.trace,W={x:N.cx,y:N.cy},Z={tx:0,ty:0};Z.ty+=$.title.font.size,te=P($),$.title.position.indexOf("top")!==-1?(W.y-=(1+te)*N.r,Z.ty-=N.titleBox.height):$.title.position.indexOf("bottom")!==-1&&(W.y+=(1+te)*N.r);var J,ee=N.r/((J=N.trace.aspectratio)===void 0?1:J),re=F.w*($.domain.x[1]-$.domain.x[0])/2;return $.title.position.indexOf("left")!==-1?(re+=ee,W.x-=(1+te)*ee,Z.tx+=N.titleBox.width/2):$.title.position.indexOf("center")!==-1?re*=2:$.title.position.indexOf("right")!==-1&&(re+=ee,W.x+=(1+te)*ee,Z.tx-=N.titleBox.width/2),V=re/N.titleBox.width,q=C(N,F)/N.titleBox.height,{x:W.x,y:W.y,scale:Math.min(V,q),tx:Z.tx,ty:Z.ty}}function C(N,F){var V=N.trace,q=F.h*(V.domain.y[1]-V.domain.y[0]);return Math.min(N.titleBox.height,q/2)}function P(N){var F,V=N.pull;if(!V)return 0;if(Array.isArray(V))for(V=0,F=0;F<N.pull.length;F++)N.pull[F]>V&&(V=N.pull[F]);return V}function D(N,F){for(var V=[],q=0;q<N.length;q++){var te=N[q][0],$=te.trace,W=$.domain,Z=F.w*(W.x[1]-W.x[0]),J=F.h*(W.y[1]-W.y[0]);$.title.text&&$.title.position!=="middle center"&&(J-=C(te,F));var ee=Z/2,re=J/2;$.type!=="funnelarea"||$.scalegroup||(re/=$.aspectratio),te.r=Math.min(ee,re)/(1+P($)),te.cx=F.l+F.w*($.domain.x[1]+$.domain.x[0])/2,te.cy=F.t+F.h*(1-$.domain.y[0])-J/2,$.title.text&&$.title.position.indexOf("bottom")!==-1&&(te.cy-=C(te,F)),$.scalegroup&&V.indexOf($.scalegroup)===-1&&V.push($.scalegroup)}(function(ae,oe){for(var ce,pe,ve,we=0;we<oe.length;we++){var xe=1/0,ge=oe[we];for(pe=0;pe<ae.length;pe++)if((ve=(ce=ae[pe][0]).trace).scalegroup===ge){var Oe;if(ve.type==="pie")Oe=ce.r*ce.r;else if(ve.type==="funnelarea"){var Ae,Te;ve.aspectratio>1?Te=(Ae=ce.r)/ve.aspectratio:Ae=(Te=ce.r)*ve.aspectratio,Oe=(Ae*=(1+ve.baseratio)/2)*Te}xe=Math.min(xe,Oe/ce.vTotal)}for(pe=0;pe<ae.length;pe++)if((ve=(ce=ae[pe][0]).trace).scalegroup===ge){var se=xe*ce.vTotal;ve.type==="funnelarea"&&(se/=(1+ve.baseratio)/2,se/=ve.aspectratio),ce.r=Math.sqrt(se)}}})(N,V)}function G(N,F){return[N*Math.sin(F),-N*Math.cos(F)]}function I(N,F,V){var q=N._fullLayout,te=V.trace,$=te.texttemplate,W=te.textinfo;if(!$&&W&&W!=="none"){var Z,J=W.split("+"),ee=function(Oe){return J.indexOf(Oe)!==-1},re=ee("label"),ae=ee("text"),oe=ee("value"),ce=ee("percent"),pe=q.separators;if(Z=re?[F.label]:[],ae){var ve=u.getFirstFilled(te.text,F.pts);c(ve)&&Z.push(ve)}oe&&Z.push(u.formatPieValue(F.v,pe)),ce&&Z.push(u.formatPiePercent(F.v/V.vTotal,pe)),F.text=Z.join("<br>")}if($){var we=d.castOption(te,F.i,"texttemplate");if(we){var xe=function(Oe){return{label:Oe.label,value:Oe.v,valueLabel:u.formatPieValue(Oe.v,q.separators),percent:Oe.v/V.vTotal,percentLabel:u.formatPiePercent(Oe.v/V.vTotal,q.separators),color:Oe.color,text:Oe.text,customdata:d.castOption(te,Oe.i,"customdata")}}(F),ge=u.getFirstFilled(te.text,F.pts);(c(ge)||ge==="")&&(xe.text=ge),F.text=d.texttemplateString(we,xe,N._fullLayout._d3locale,xe,te._meta||{})}else F.text=""}}function H(N,F){var V=N.rotate*Math.PI/180,q=Math.cos(V),te=Math.sin(V),$=(F.left+F.right)/2,W=(F.top+F.bottom)/2;N.textX=$*q-W*te,N.textY=$*te+W*q,N.noCenter=!0}Q.exports={plot:function(N,F){var V=N._context.staticPlot,q=N._fullLayout,te=q._size;a("pie",q),f(F,N),D(F,te);var $=d.makeTraceGroups(q._pielayer,F,"trace").each(function(W){var Z=S.select(this),J=W[0],ee=J.trace;(function(re){var ae,oe,ce,pe=re[0],ve=pe.r,we=pe.trace,xe=u.getRotationAngle(we.rotation),ge=2*Math.PI/pe.vTotal,Oe="px0",Ae="px1";if(we.direction==="counterclockwise"){for(ae=0;ae<re.length&&re[ae].hidden;ae++);if(ae===re.length)return;xe+=ge*re[ae].v,ge*=-1,Oe="px1",Ae="px0"}for(ce=G(ve,xe),ae=0;ae<re.length;ae++)(oe=re[ae]).hidden||(oe[Oe]=ce,oe.startangle=xe,xe+=ge*oe.v/2,oe.pxmid=G(ve,xe),oe.midangle=xe,ce=G(ve,xe+=ge*oe.v/2),oe.stopangle=xe,oe[Ae]=ce,oe.largeArc=oe.v>pe.vTotal/2?1:0,oe.halfangle=Math.PI*Math.min(oe.v/pe.vTotal,.5),oe.ring=1-we.hole,oe.rInscribed=w(oe,pe))})(W),Z.attr("stroke-linejoin","round"),Z.each(function(){var re=S.select(this).selectAll("g.slice").data(W);re.enter().append("g").classed("slice",!0),re.exit().remove();var ae=[[[],[]],[[],[]]],oe=!1;re.each(function(Ae,Te){if(Ae.hidden)S.select(this).selectAll("path,g").remove();else{Ae.pointNumber=Ae.i,Ae.curveNumber=ee.index,ae[Ae.pxmid[1]<0?0:1][Ae.pxmid[0]<0?0:1].push(Ae);var se=J.cx,le=J.cy,ne=S.select(this),me=ne.selectAll("path.surface").data([Ae]);if(me.enter().append("path").classed("surface",!0).style({"pointer-events":V?"none":"all"}),ne.call(x,N,W),ee.pull){var Ee=+u.castOption(ee.pull,Ae.pts)||0;Ee>0&&(se+=Ee*Ae.pxmid[0],le+=Ee*Ae.pxmid[1])}Ae.cxFinal=se,Ae.cyFinal=le;var be=ee.hole;if(Ae.v===J.vTotal){var De="M"+(se+Ae.px0[0])+","+(le+Ae.px0[1])+Ce(Ae.px0,Ae.pxmid,!0,1)+Ce(Ae.pxmid,Ae.px0,!0,1)+"Z";be?me.attr("d","M"+(se+be*Ae.px0[0])+","+(le+be*Ae.px0[1])+Ce(Ae.px0,Ae.pxmid,!1,be)+Ce(Ae.pxmid,Ae.px0,!1,be)+"Z"+De):me.attr("d",De)}else{var Ue=Ce(Ae.px0,Ae.px1,!0,1);if(be){var he=1-be;me.attr("d","M"+(se+be*Ae.px1[0])+","+(le+be*Ae.px1[1])+Ce(Ae.px1,Ae.px0,!1,be)+"l"+he*Ae.px0[0]+","+he*Ae.px0[1]+Ue+"Z")}else me.attr("d","M"+se+","+le+"l"+Ae.px0[0]+","+Ae.px0[1]+Ue+"Z")}I(N,Ae,J);var ke=u.castOption(ee.textposition,Ae.pts),_e=ne.selectAll("g.slicetext").data(Ae.text&&ke!=="none"?[0]:[]);_e.enter().append("g").classed("slicetext",!0),_e.exit().remove(),_e.each(function(){var Fe=d.ensureSingle(S.select(this),"text","",function(mt){mt.attr("data-notex",1)}),Re=d.ensureUniformFontSize(N,ke==="outside"?function(mt,at,rt){return{color:u.castOption(mt.outsidetextfont.color,at.pts)||u.castOption(mt.textfont.color,at.pts)||rt.color,family:u.castOption(mt.outsidetextfont.family,at.pts)||u.castOption(mt.textfont.family,at.pts)||rt.family,size:u.castOption(mt.outsidetextfont.size,at.pts)||u.castOption(mt.textfont.size,at.pts)||rt.size}}(ee,Ae,q.font):g(ee,Ae,q.font));Fe.text(Ae.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(b.font,Re).call(i.convertToTspans,N);var He,Ge=b.bBox(Fe.node());if(ke==="outside")He=E(Ge,Ae);else if(He=y(Ge,Ae,J),ke==="auto"&&He.scale<1){var $e=d.ensureUniformFontSize(N,ee.outsidetextfont);Fe.call(b.font,$e),He=E(Ge=b.bBox(Fe.node()),Ae)}var st=He.textPosAngle,Ke=st===void 0?Ae.pxmid:G(J.r,st);if(He.targetX=se+Ke[0]*He.rCenter+(He.x||0),He.targetY=le+Ke[1]*He.rCenter+(He.y||0),H(He,Ge),He.outside){var gt=He.targetY;Ae.yLabelMin=gt-Ge.height/2,Ae.yLabelMid=gt,Ae.yLabelMax=gt+Ge.height/2,Ae.labelExtraX=0,Ae.labelExtraY=0,oe=!0}He.fontSize=Re.size,n(ee.type,He,q),W[Te].transform=He,d.setTransormAndDisplay(Fe,He)})}function Ce(Fe,Re,He,Ge){var $e=Ge*(Re[0]-Fe[0]),st=Ge*(Re[1]-Fe[1]);return"a"+Ge*J.r+","+Ge*J.r+" 0 "+Ae.largeArc+(He?" 1 ":" 0 ")+$e+","+st}});var ce=S.select(this).selectAll("g.titletext").data(ee.title.text?[0]:[]);if(ce.enter().append("g").classed("titletext",!0),ce.exit().remove(),ce.each(function(){var Ae,Te=d.ensureSingle(S.select(this),"text","",function(le){le.attr("data-notex",1)}),se=ee.title.text;ee._meta&&(se=d.templateString(se,ee._meta)),Te.text(se).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(b.font,ee.title.font).call(i.convertToTspans,N),Ae=ee.title.position==="middle center"?function(le){var ne=Math.sqrt(le.titleBox.width*le.titleBox.width+le.titleBox.height*le.titleBox.height);return{x:le.cx,y:le.cy,scale:le.trace.hole*le.r*2/ne,tx:0,ty:-le.titleBox.height/2+le.trace.title.font.size}}(J):L(J,te),Te.attr("transform",e(Ae.x,Ae.y)+s(Math.min(1,Ae.scale))+e(Ae.tx,Ae.ty))}),oe&&function(Ae,Te){var se,le,ne,me,Ee,be,De,Ue,he,ke,_e,Ce,Fe;function Re(st,Ke){return st.pxmid[1]-Ke.pxmid[1]}function He(st,Ke){return Ke.pxmid[1]-st.pxmid[1]}function Ge(st,Ke){Ke||(Ke={});var gt,mt,at,rt,xt=Ke.labelExtraY+(le?Ke.yLabelMax:Ke.yLabelMin),Tt=le?st.yLabelMin:st.yLabelMax,wt=le?st.yLabelMax:st.yLabelMin,Ot=st.cyFinal+Ee(st.px0[1],st.px1[1]),Ct=xt-Tt;if(Ct*De>0&&(st.labelExtraY=Ct),Array.isArray(Te.pull))for(mt=0;mt<ke.length;mt++)(at=ke[mt])===st||(u.castOption(Te.pull,st.pts)||0)>=(u.castOption(Te.pull,at.pts)||0)||((st.pxmid[1]-at.pxmid[1])*De>0?(Ct=at.cyFinal+Ee(at.px0[1],at.px1[1])-Tt-st.labelExtraY)*De>0&&(st.labelExtraY+=Ct):(wt+st.labelExtraY-Ot)*De>0&&(gt=3*be*Math.abs(mt-ke.indexOf(st)),(rt=at.cxFinal+me(at.px0[0],at.px1[0])+gt-(st.cxFinal+st.pxmid[0])-st.labelExtraX)*be>0&&(st.labelExtraX+=rt)))}for(le=0;le<2;le++)for(ne=le?Re:He,Ee=le?Math.max:Math.min,De=le?1:-1,se=0;se<2;se++){for(me=se?Math.max:Math.min,be=se?1:-1,(Ue=Ae[le][se]).sort(ne),he=Ae[1-le][se],ke=he.concat(Ue),Ce=[],_e=0;_e<Ue.length;_e++)Ue[_e].yLabelMid!==void 0&&Ce.push(Ue[_e]);for(Fe=!1,_e=0;le&&_e<he.length;_e++)if(he[_e].yLabelMid!==void 0){Fe=he[_e];break}for(_e=0;_e<Ce.length;_e++){var $e=_e&&Ce[_e-1];Fe&&!_e&&($e=Fe),Ge(Ce[_e],$e)}}}(ae,ee),function(Ae,Te){Ae.each(function(se){var le=S.select(this);if(se.labelExtraX||se.labelExtraY){var ne=le.select("g.slicetext text");se.transform.targetX+=se.labelExtraX,se.transform.targetY+=se.labelExtraY,d.setTransormAndDisplay(ne,se.transform);var me=se.cxFinal+se.pxmid[0],Ee="M"+me+","+(se.cyFinal+se.pxmid[1]),be=(se.yLabelMax-se.yLabelMin)*(se.pxmid[0]<0?-1:1)/4;if(se.labelExtraX){var De=se.labelExtraX*se.pxmid[1]/se.pxmid[0],Ue=se.yLabelMid+se.labelExtraY-(se.cyFinal+se.pxmid[1]);Math.abs(De)>Math.abs(Ue)?Ee+="l"+Ue*se.pxmid[0]/se.pxmid[1]+","+Ue+"H"+(me+se.labelExtraX+be):Ee+="l"+se.labelExtraX+","+De+"v"+(Ue-De)+"h"+be}else Ee+="V"+(se.yLabelMid+se.labelExtraY)+"h"+be;d.ensureSingle(le,"path","textline").call(T.stroke,Te.outsidetextfont.color).attr({"stroke-width":Math.min(2,Te.outsidetextfont.size/8),d:Ee,fill:"none"})}else le.select("path.textline").remove()})}(re,ee),oe&&ee.automargin){var pe=b.bBox(Z.node()),ve=ee.domain,we=te.w*(ve.x[1]-ve.x[0]),xe=te.h*(ve.y[1]-ve.y[0]),ge=(.5*we-J.r)/te.w,Oe=(.5*xe-J.r)/te.h;k.autoMargin(N,"pie."+ee.uid+".automargin",{xl:ve.x[0]-ge,xr:ve.x[1]+ge,yb:ve.y[0]-Oe,yt:ve.y[1]+Oe,l:Math.max(J.cx-J.r-pe.left,0),r:Math.max(pe.right-(J.cx+J.r),0),b:Math.max(pe.bottom-(J.cy+J.r),0),t:Math.max(J.cy-J.r-pe.top,0),pad:5})}})});setTimeout(function(){$.selectAll("tspan").each(function(){var W=S.select(this);W.attr("dy")&&W.attr("dy",W.attr("dy"))})},0)},formatSliceLabel:I,transformInsideText:y,determineInsideTextFont:g,positionTitleOutside:L,prerenderTitles:f,layoutAreas:D,attachFxHandlers:x,computeTransform:H}},68357:function(Q,z,t){var S=t(39898),k=t(63463),l=t(72597).resizeText;Q.exports=function(T){var b=T._fullLayout._pielayer.selectAll(".trace");l(T,b,"pie"),b.each(function(d){var s=d[0].trace,e=S.select(this);e.style({opacity:s.opacity}),e.selectAll("path.surface").each(function(i){S.select(this).call(k,i,s)})})}},63463:function(Q,z,t){var S=t(7901),k=t(53581).castOption;Q.exports=function(l,T,b){var d=b.marker.line,s=k(d.color,T.pts)||S.defaultLine,e=k(d.width,T.pts)||0;l.style("stroke-width",e).call(S.fill,T.color).call(S.stroke,s)}},10959:function(Q,z,t){var S=t(82196);Q.exports={x:S.x,y:S.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:S.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},42743:function(Q,z,t){var S=t(9330).gl_pointcloud2d,k=t(78614),l=t(71739).findExtremes,T=t(34603);function b(s,e){this.scene=s,this.uid=e,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=S(s.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var d=b.prototype;d.handlePick=function(s){var e=this.idToIndex[s.pointId];return{trace:this,dataCoord:s.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*e],this.pickXYData[2*e+1]]:[this.pickXData[e],this.pickYData[e]],textLabel:Array.isArray(this.textLabels)?this.textLabels[e]:this.textLabels,color:this.color,name:this.name,pointIndex:e,hoverinfo:this.hoverinfo}},d.update=function(s){this.index=s.index,this.textLabels=s.text,this.name=s.name,this.hoverinfo=s.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(s),this.color=T(s,{})},d.updateFast=function(s){var e,i,r,n,a,o,u=this.xData=this.pickXData=s.x,p=this.yData=this.pickYData=s.y,c=this.pickXYData=s.xy,x=s.xbounds&&s.ybounds,g=s.indices,f=this.bounds;if(c){if(r=c,e=c.length>>>1,x)f[0]=s.xbounds[0],f[2]=s.xbounds[1],f[1]=s.ybounds[0],f[3]=s.ybounds[1];else for(o=0;o<e;o++)n=r[2*o],a=r[2*o+1],n<f[0]&&(f[0]=n),n>f[2]&&(f[2]=n),a<f[1]&&(f[1]=a),a>f[3]&&(f[3]=a);if(g)i=g;else for(i=new Int32Array(e),o=0;o<e;o++)i[o]=o}else for(e=u.length,r=new Float32Array(2*e),i=new Int32Array(e),o=0;o<e;o++)n=u[o],a=p[o],i[o]=o,r[2*o]=n,r[2*o+1]=a,n<f[0]&&(f[0]=n),n>f[2]&&(f[2]=n),a<f[1]&&(f[1]=a),a>f[3]&&(f[3]=a);this.idToIndex=i,this.pointcloudOptions.idToIndex=i,this.pointcloudOptions.positions=r;var y=k(s.marker.color),v=k(s.marker.border.color),m=s.opacity*s.marker.opacity;y[3]*=m,this.pointcloudOptions.color=y;var _=s.marker.blend;_===null&&(_=u.length<100||p.length<100),this.pointcloudOptions.blend=_,v[3]*=m,this.pointcloudOptions.borderColor=v;var h=s.marker.sizemin,A=Math.max(s.marker.sizemax,s.marker.sizemin);this.pointcloudOptions.sizeMin=h,this.pointcloudOptions.sizeMax=A,this.pointcloudOptions.areaRatio=s.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var w=this.scene.xaxis,E=this.scene.yaxis,L=A/2||.5;s._extremes[w._id]=l(w,[f[0],f[2]],{ppad:L}),s._extremes[E._id]=l(E,[f[1],f[3]],{ppad:L})},d.dispose=function(){this.pointcloud.dispose()},Q.exports=function(s,e){var i=new b(s,e.uid);return i.update(e),i}},33876:function(Q,z,t){var S=t(71828),k=t(10959);Q.exports=function(l,T,b){function d(s,e){return S.coerce(l,T,k,s,e)}d("x"),d("y"),d("xbounds"),d("ybounds"),l.xy&&l.xy instanceof Float32Array&&(T.xy=l.xy),l.indices&&l.indices instanceof Int32Array&&(T.indices=l.indices),d("text"),d("marker.color",b),d("marker.opacity"),d("marker.blend"),d("marker.sizemin"),d("marker.sizemax"),d("marker.border.color",b),d("marker.border.arearatio"),T._length=null}},20593:function(Q,z,t){Q.exports={attributes:t(10959),supplyDefaults:t(33876),calc:t(36563),plot:t(42743),moduleType:"trace",name:"pointcloud",basePlotModule:t(4796),categories:["gl","gl2d","showLegend"],meta:{}}},39953:function(Q,z,t){var S=t(41940),k=t(9012),l=t(22399),T=t(77914),b=t(27670).Y,d=t(5386).fF,s=t(50693),e=t(44467).templatedArray,i=t(12663).descriptionOnlyNumbers,r=t(1426).extendFlat,n=t(30962).overrideAll;(Q.exports=n({hoverinfo:r({},k.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:T.hoverlabel,domain:b({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:i("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:S({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:d({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:d({},{keys:["value","label"]}),colorscales:e("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:r(s().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},75536:function(Q,z,t){var S=t(30962).overrideAll,k=t(27659).a0,l=t(60436),T=t(528),b=t(6964),d=t(28569),s=t(47322).prepSelect,e=t(71828),i=t(73972),r="sankey";function n(a,o){var u=a._fullData[o],p=a._fullLayout,c=p.dragmode,x=p.dragmode==="pan"?"move":"crosshair",g=u._bgRect;if(g&&c!=="pan"&&c!=="zoom"){b(g,x);var f={_id:"x",c2p:e.identity,_offset:u._sankey.translateX,_length:u._sankey.width},y={_id:"y",c2p:e.identity,_offset:u._sankey.translateY,_length:u._sankey.height},v={gd:a,element:g.node(),plotinfo:{id:o,xaxis:f,yaxis:y,fillRangeItems:e.noop},subplot:o,xaxes:[f],yaxes:[y],doneFnCompleted:function(m){var _,h=a._fullData[o],A=h.node.groups.slice(),w=[];function E(D){for(var G=h._sankey.graph.nodes,I=0;I<G.length;I++)if(G[I].pointNumber===D)return G[I]}for(var L=0;L<m.length;L++){var C=E(m[L].pointNumber);if(C)if(C.group){for(var P=0;P<C.childrenNodes.length;P++)w.push(C.childrenNodes[P].pointNumber);A[C.pointNumber-h.node._count]=!1}else w.push(C.pointNumber)}_=A.filter(Boolean).concat([w]),i.call("_guiRestyle",a,{"node.groups":[_]},o)},prepFn:function(m,_,h){s(m,_,h,v,c)}};d.init(v)}}z.name=r,z.baseLayoutAttrOverrides=S({hoverlabel:T.hoverlabel},"plot","nested"),z.plot=function(a){var o=k(a.calcdata,r)[0];l(a,o),z.updateFx(a)},z.clean=function(a,o,u,p){var c=p._has&&p._has(r),x=o._has&&o._has(r);c&&!x&&(p._paperdiv.selectAll(".sankey").remove(),p._paperdiv.selectAll(".bgsankey").remove())},z.updateFx=function(a){for(var o=0;o<a._fullData.length;o++)n(a,o)}},92930:function(Q,z,t){var S=t(68664),k=t(71828),l=t(28984).wrap,T=k.isArrayOrTypedArray,b=k.isIndex,d=t(21081);Q.exports=function(s,e){var i=function(r){var n,a=r.node,o=r.link,u=[],p=T(o.color),c=T(o.customdata),x={},g={},f=o.colorscales.length;for(n=0;n<f;n++){var y=o.colorscales[n],v=d.extractScale(y,{cLetter:"c"}),m=d.makeColorScaleFunc(v);g[y.label]=m}var _=0;for(n=0;n<o.value.length;n++)o.source[n]>_&&(_=o.source[n]),o.target[n]>_&&(_=o.target[n]);var h,A=_+1;r.node._count=A;var w=r.node.groups,E={};for(n=0;n<w.length;n++){var L=w[n];for(h=0;h<L.length;h++){var C=L[h],P=A+n;E.hasOwnProperty(C)?k.warn("Node "+C+" is already part of a group."):E[C]=P}}var D={source:[],target:[]};for(n=0;n<o.value.length;n++){var G=o.value[n],I=o.source[n],H=o.target[n];if(G>0&&b(I,A)&&b(H,A)&&(!E.hasOwnProperty(I)||!E.hasOwnProperty(H)||E[I]!==E[H])){E.hasOwnProperty(H)&&(H=E[H]),E.hasOwnProperty(I)&&(I=E[I]),H=+H,x[I=+I]=x[H]=!0;var N="";o.label&&o.label[n]&&(N=o.label[n]);var F=null;N&&g.hasOwnProperty(N)&&(F=g[N]),u.push({pointNumber:n,label:N,color:p?o.color[n]:o.color,customdata:c?o.customdata[n]:o.customdata,concentrationscale:F,source:I,target:H,value:+G}),D.source.push(I),D.target.push(H)}}var V=A+w.length,q=T(a.color),te=T(a.customdata),$=[];for(n=0;n<V;n++)if(x[n]){var W=a.label[n];$.push({group:n>A-1,childrenNodes:[],pointNumber:n,label:W,color:q?a.color[n]:a.color,customdata:te?a.customdata[n]:a.customdata})}var Z=!1;return function(J,ee,re){for(var ae=k.init2dArray(J,0),oe=0;oe<Math.min(ee.length,re.length);oe++)if(k.isIndex(ee[oe],J)&&k.isIndex(re[oe],J)){if(ee[oe]===re[oe])return!0;ae[ee[oe]].push(re[oe])}return S(ae).components.some(function(ce){return ce.length>1})}(V,D.source,D.target)&&(Z=!0),{circular:Z,links:u,nodes:$,groups:w,groupLookup:E}}(e);return l({circular:i.circular,_nodes:i.nodes,_links:i.links,_groups:i.groups,_groupLookup:i.groupLookup})}},85247:function(Q){Q.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},26857:function(Q,z,t){var S=t(71828),k=t(39953),l=t(7901),T=t(84267),b=t(27670).c,d=t(38048),s=t(44467),e=t(85501);function i(r,n){function a(o,u){return S.coerce(r,n,k.link.colorscales,o,u)}a("label"),a("cmin"),a("cmax"),a("colorscale")}Q.exports=function(r,n,a,o){function u(A,w){return S.coerce(r,n,k,A,w)}var p=S.extendDeep(o.hoverlabel,r.hoverlabel),c=r.node,x=s.newContainer(n,"node");function g(A,w){return S.coerce(c,x,k.node,A,w)}g("label"),g("groups"),g("x"),g("y"),g("pad"),g("thickness"),g("line.color"),g("line.width"),g("hoverinfo",r.hoverinfo),d(c,x,g,p),g("hovertemplate");var f=o.colorway;g("color",x.label.map(function(A,w){return l.addOpacity(function(E){return f[E%f.length]}(w),.8)})),g("customdata");var y=r.link||{},v=s.newContainer(n,"link");function m(A,w){return S.coerce(y,v,k.link,A,w)}m("label"),m("arrowlen"),m("source"),m("target"),m("value"),m("line.color"),m("line.width"),m("hoverinfo",r.hoverinfo),d(y,v,m,p),m("hovertemplate");var _,h=T(o.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";m("color",S.repeat(h,v.value.length)),m("customdata"),e(y,v,{name:"colorscales",handleItemDefaults:i}),b(n,o,u),u("orientation"),u("valueformat"),u("valuesuffix"),x.x.length&&x.y.length&&(_="freeform"),u("arrangement",_),S.coerceFont(u,"textfont",S.extendFlat({},o.font)),n._length=null}},29396:function(Q,z,t){Q.exports={attributes:t(39953),supplyDefaults:t(26857),calc:t(92930),plot:t(60436),moduleType:"trace",name:"sankey",basePlotModule:t(75536),selectPoints:t(84564),categories:["noOpacity"],meta:{}}},60436:function(Q,z,t){var S=t(39898),k=t(71828),l=k.numberFormat,T=t(3393),b=t(30211),d=t(7901),s=t(85247).cn,e=k._;function i(y){return y!==""}function r(y,v){return y.filter(function(m){return m.key===v.traceId})}function n(y,v){S.select(y).select("path").style("fill-opacity",v),S.select(y).select("rect").style("fill-opacity",v)}function a(y){S.select(y).select("text.name").style("fill","black")}function o(y){return function(v){return y.node.sourceLinks.indexOf(v.link)!==-1||y.node.targetLinks.indexOf(v.link)!==-1}}function u(y){return function(v){return v.node.sourceLinks.indexOf(y.link)!==-1||v.node.targetLinks.indexOf(y.link)!==-1}}function p(y,v,m){v&&m&&r(m,v).selectAll("."+s.sankeyLink).filter(o(v)).call(x.bind(0,v,m,!1))}function c(y,v,m){v&&m&&r(m,v).selectAll("."+s.sankeyLink).filter(o(v)).call(g.bind(0,v,m,!1))}function x(y,v,m,_){var h=_.datum().link.label;_.style("fill-opacity",function(A){if(!A.link.concentrationscale)return .4}),h&&r(v,y).selectAll("."+s.sankeyLink).filter(function(A){return A.link.label===h}).style("fill-opacity",function(A){if(!A.link.concentrationscale)return .4}),m&&r(v,y).selectAll("."+s.sankeyNode).filter(u(y)).call(p)}function g(y,v,m,_){var h=_.datum().link.label;_.style("fill-opacity",function(A){return A.tinyColorAlpha}),h&&r(v,y).selectAll("."+s.sankeyLink).filter(function(A){return A.link.label===h}).style("fill-opacity",function(A){return A.tinyColorAlpha}),m&&r(v,y).selectAll(s.sankeyNode).filter(u(y)).call(c)}function f(y,v){var m=y.hoverlabel||{},_=k.nestedProperty(m,v).get();return!Array.isArray(_)&&_}Q.exports=function(y,v){for(var m=y._fullLayout,_=m._paper,h=m._size,A=0;A<y._fullData.length;A++)if(y._fullData[A].visible&&y._fullData[A].type===s.sankey&&!y._fullData[A]._viewInitial){var w=y._fullData[A].node;y._fullData[A]._viewInitial={node:{groups:w.groups.slice(),x:w.x.slice(),y:w.y.slice()}}}var E=e(y,"source:")+" ",L=e(y,"target:")+" ",C=e(y,"concentration:")+" ",P=e(y,"incoming flow count:")+" ",D=e(y,"outgoing flow count:")+" ";T(y,_,v,{width:h.w,height:h.h,margin:{t:h.t,r:h.r,b:h.b,l:h.l}},{linkEvents:{hover:function(G,I,H){y._fullLayout.hovermode!==!1&&(S.select(G).call(x.bind(0,I,H,!0)),I.link.trace.link.hoverinfo!=="skip"&&(I.link.fullData=I.link.trace,y.emit("plotly_hover",{event:S.event,points:[I.link]})))},follow:function(G,I){if(y._fullLayout.hovermode!==!1){var H=I.link.trace.link;if(H.hoverinfo!=="none"&&H.hoverinfo!=="skip"){for(var N=[],F=0,V=0;V<I.flow.links.length;V++){var q=I.flow.links[V];if(y._fullLayout.hovermode!=="closest"||I.link.pointNumber===q.pointNumber){I.link.pointNumber===q.pointNumber&&(F=V),q.fullData=q.trace,H=I.link.trace.link;var te=W(q),$={valueLabel:l(I.valueFormat)(q.value)+I.valueSuffix};N.push({x:te[0],y:te[1],name:$.valueLabel,text:[q.label||"",E+q.source.label,L+q.target.label,q.concentrationscale?C+l("%0.2f")(q.flow.labelConcentration):""].filter(i).join("<br>"),color:f(H,"bgcolor")||d.addOpacity(q.color,1),borderColor:f(H,"bordercolor"),fontFamily:f(H,"font.family"),fontSize:f(H,"font.size"),fontColor:f(H,"font.color"),nameLength:f(H,"namelength"),textAlign:f(H,"align"),idealAlign:S.event.x<te[0]?"right":"left",hovertemplate:H.hovertemplate,hovertemplateLabels:$,eventData:[q]})}}b.loneHover(N,{container:m._hoverlayer.node(),outerContainer:m._paper.node(),gd:y,anchorIndex:F}).each(function(){I.link.concentrationscale||n(this,.65),a(this)})}}function W(Z){var J,ee;Z.circular?(J=(Z.circularPathData.leftInnerExtent+Z.circularPathData.rightInnerExtent)/2,ee=Z.circularPathData.verticalFullExtent):(J=(Z.source.x1+Z.target.x0)/2,ee=(Z.y0+Z.y1)/2);var re=[J,ee];return Z.trace.orientation==="v"&&re.reverse(),re[0]+=I.parent.translateX,re[1]+=I.parent.translateY,re}},unhover:function(G,I,H){y._fullLayout.hovermode!==!1&&(S.select(G).call(g.bind(0,I,H,!0)),I.link.trace.link.hoverinfo!=="skip"&&(I.link.fullData=I.link.trace,y.emit("plotly_unhover",{event:S.event,points:[I.link]})),b.loneUnhover(m._hoverlayer.node()))},select:function(G,I){var H=I.link;H.originalEvent=S.event,y._hoverdata=[H],b.click(y,{target:!0})}},nodeEvents:{hover:function(G,I,H){y._fullLayout.hovermode!==!1&&(S.select(G).call(p,I,H),I.node.trace.node.hoverinfo!=="skip"&&(I.node.fullData=I.node.trace,y.emit("plotly_hover",{event:S.event,points:[I.node]})))},follow:function(G,I){if(y._fullLayout.hovermode!==!1){var H=I.node.trace.node;if(H.hoverinfo!=="none"&&H.hoverinfo!=="skip"){var N=S.select(G).select("."+s.nodeRect),F=y._fullLayout._paperdiv.node().getBoundingClientRect(),V=N.node().getBoundingClientRect(),q=V.left-2-F.left,te=V.right+2-F.left,$=V.top+V.height/4-F.top,W={valueLabel:l(I.valueFormat)(I.node.value)+I.valueSuffix};I.node.fullData=I.node.trace,y._fullLayout._calcInverseTransform(y);var Z=y._fullLayout._invScaleX,J=y._fullLayout._invScaleY,ee=b.loneHover({x0:Z*q,x1:Z*te,y:J*$,name:l(I.valueFormat)(I.node.value)+I.valueSuffix,text:[I.node.label,P+I.node.targetLinks.length,D+I.node.sourceLinks.length].filter(i).join("<br>"),color:f(H,"bgcolor")||I.tinyColorHue,borderColor:f(H,"bordercolor"),fontFamily:f(H,"font.family"),fontSize:f(H,"font.size"),fontColor:f(H,"font.color"),nameLength:f(H,"namelength"),textAlign:f(H,"align"),idealAlign:"left",hovertemplate:H.hovertemplate,hovertemplateLabels:W,eventData:[I.node]},{container:m._hoverlayer.node(),outerContainer:m._paper.node(),gd:y});n(ee,.85),a(ee)}}},unhover:function(G,I,H){y._fullLayout.hovermode!==!1&&(S.select(G).call(c,I,H),I.node.trace.node.hoverinfo!=="skip"&&(I.node.fullData=I.node.trace,y.emit("plotly_unhover",{event:S.event,points:[I.node]})),b.loneUnhover(m._hoverlayer.node()))},select:function(G,I,H){var N=I.node;N.originalEvent=S.event,y._hoverdata=[N],S.select(G).call(c,I,H),b.click(y,{target:!0})}}})}},3393:function(Q,z,t){var S=t(49887),k=t(81684).k4,l=t(39898),T=t(30838),b=t(86781),d=t(85247),s=t(84267),e=t(7901),i=t(91424),r=t(71828),n=r.strTranslate,a=r.strRotate,o=t(28984),u=o.keyFun,p=o.repeat,c=o.unwrap,x=t(63893),g=t(73972),f=t(18783),y=f.CAP_SHIFT,v=f.LINE_SPACING;function m(V,q,te){var $,W=c(q),Z=W.trace,J=Z.domain,ee=Z.orientation==="h",re=Z.node.pad,ae=Z.node.thickness,oe=V.width*(J.x[1]-J.x[0]),ce=V.height*(J.y[1]-J.y[0]),pe=W._nodes,ve=W._links,we=W.circular;($=we?b.sankeyCircular().circularLinkGap(0):T.sankey()).iterations(d.sankeyIterations).size(ee?[oe,ce]:[ce,oe]).nodeWidth(ae).nodePadding(re).nodeId(function(be){return be.pointNumber}).nodes(pe).links(ve);var xe,ge,Oe,Ae=$();for(var Te in $.nodePadding()<re&&r.warn("node.pad was reduced to ",$.nodePadding()," to fit within the figure."),W._groupLookup){var se,le=parseInt(W._groupLookup[Te]);for(xe=0;xe<Ae.nodes.length;xe++)if(Ae.nodes[xe].pointNumber===le){se=Ae.nodes[xe];break}if(se){var ne={pointNumber:parseInt(Te),x0:se.x0,x1:se.x1,y0:se.y0,y1:se.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};Ae.nodes.unshift(ne),se.childrenNodes.unshift(ne)}}if(function(){for(xe=0;xe<Ae.nodes.length;xe++){var be,De,Ue=Ae.nodes[xe],he={};for(ge=0;ge<Ue.targetLinks.length;ge++)be=(De=Ue.targetLinks[ge]).source.pointNumber+":"+De.target.pointNumber,he.hasOwnProperty(be)||(he[be]=[]),he[be].push(De);var ke=Object.keys(he);for(ge=0;ge<ke.length;ge++){var _e=he[be=ke[ge]],Ce=0,Fe={};for(Oe=0;Oe<_e.length;Oe++)Fe[(De=_e[Oe]).label]||(Fe[De.label]=0),Fe[De.label]+=De.value,Ce+=De.value;for(Oe=0;Oe<_e.length;Oe++)(De=_e[Oe]).flow={value:Ce,labelConcentration:Fe[De.label]/Ce,concentration:De.value/Ce,links:_e},De.concentrationscale&&(De.color=s(De.concentrationscale(De.flow.labelConcentration)))}var Re=0;for(ge=0;ge<Ue.sourceLinks.length;ge++)Re+=Ue.sourceLinks[ge].value;for(ge=0;ge<Ue.sourceLinks.length;ge++)(De=Ue.sourceLinks[ge]).concentrationOut=De.value/Re;var He=0;for(ge=0;ge<Ue.targetLinks.length;ge++)He+=Ue.targetLinks[ge].value;for(ge=0;ge<Ue.targetLinks.length;ge++)(De=Ue.targetLinks[ge]).concenrationIn=De.value/He}}(),Z.node.x.length&&Z.node.y.length){for(xe=0;xe<Math.min(Z.node.x.length,Z.node.y.length,Ae.nodes.length);xe++)if(Z.node.x[xe]&&Z.node.y[xe]){var me=[Z.node.x[xe]*oe,Z.node.y[xe]*ce];Ae.nodes[xe].x0=me[0]-ae/2,Ae.nodes[xe].x1=me[0]+ae/2;var Ee=Ae.nodes[xe].y1-Ae.nodes[xe].y0;Ae.nodes[xe].y0=me[1]-Ee/2,Ae.nodes[xe].y1=me[1]+Ee/2}Z.arrangement==="snap"&&function(be){var De,Ue,he=be.map(function(Re,He){return{x0:Re.x0,index:He}}).sort(function(Re,He){return Re.x0-He.x0}),ke=[],_e=-1,Ce=-1/0;for(xe=0;xe<he.length;xe++){var Fe=be[he[xe].index];Fe.x0>Ce+ae&&(_e+=1,De=Fe.x0),Ce=Fe.x0,ke[_e]||(ke[_e]=[]),ke[_e].push(Fe),Ue=De-Fe.x0,Fe.x0+=Ue,Fe.x1+=Ue}return ke}(pe=Ae.nodes).forEach(function(be){var De,Ue,he,ke=0,_e=be.length;for(be.sort(function(Ce,Fe){return Ce.y0-Fe.y0}),he=0;he<_e;++he)(De=be[he]).y0>=ke||(Ue=ke-De.y0)>1e-6&&(De.y0+=Ue,De.y1+=Ue),ke=De.y1+re}),$.update(Ae)}return{circular:we,key:te,trace:Z,guid:r.randstr(),horizontal:ee,width:oe,height:ce,nodePad:Z.node.pad,nodeLineColor:Z.node.line.color,nodeLineWidth:Z.node.line.width,linkLineColor:Z.link.line.color,linkLineWidth:Z.link.line.width,linkArrowLength:Z.link.arrowlen,valueFormat:Z.valueformat,valueSuffix:Z.valuesuffix,textFont:Z.textfont,translateX:J.x[0]*V.width+V.margin.l,translateY:V.height-J.y[1]*V.height+V.margin.t,dragParallel:ee?ce:oe,dragPerpendicular:ee?oe:ce,arrangement:Z.arrangement,sankey:$,graph:Ae,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function _(V,q,te){var $=s(q.color),W=q.source.label+"|"+q.target.label+"__"+te;return q.trace=V.trace,q.curveNumber=V.trace.index,{circular:V.circular,key:W,traceId:V.key,pointNumber:q.pointNumber,link:q,tinyColorHue:e.tinyRGB($),tinyColorAlpha:$.getAlpha(),linkPath:h,linkLineColor:V.linkLineColor,linkLineWidth:V.linkLineWidth,linkArrowLength:V.linkArrowLength,valueFormat:V.valueFormat,valueSuffix:V.valueSuffix,sankey:V.sankey,parent:V,interactionState:V.interactionState,flow:q.flow}}function h(){return function(V){var q=V.linkArrowLength;if(V.link.circular)return function(ge,Oe){var Ae=ge.width/2,Te=ge.circularPathData;return ge.circularLinkType==="top"?"M "+(Te.targetX-Oe)+" "+(Te.targetY+Ae)+" L"+(Te.rightInnerExtent-Oe)+" "+(Te.targetY+Ae)+"A"+(Te.rightLargeArcRadius+Ae)+" "+(Te.rightSmallArcRadius+Ae)+" 0 0 1 "+(Te.rightFullExtent-Ae-Oe)+" "+(Te.targetY-Te.rightSmallArcRadius)+"L"+(Te.rightFullExtent-Ae-Oe)+" "+Te.verticalRightInnerExtent+"A"+(Te.rightLargeArcRadius+Ae)+" "+(Te.rightLargeArcRadius+Ae)+" 0 0 1 "+(Te.rightInnerExtent-Oe)+" "+(Te.verticalFullExtent-Ae)+"L"+Te.leftInnerExtent+" "+(Te.verticalFullExtent-Ae)+"A"+(Te.leftLargeArcRadius+Ae)+" "+(Te.leftLargeArcRadius+Ae)+" 0 0 1 "+(Te.leftFullExtent+Ae)+" "+Te.verticalLeftInnerExtent+"L"+(Te.leftFullExtent+Ae)+" "+(Te.sourceY-Te.leftSmallArcRadius)+"A"+(Te.leftLargeArcRadius+Ae)+" "+(Te.leftSmallArcRadius+Ae)+" 0 0 1 "+Te.leftInnerExtent+" "+(Te.sourceY+Ae)+"L"+Te.sourceX+" "+(Te.sourceY+Ae)+"L"+Te.sourceX+" "+(Te.sourceY-Ae)+"L"+Te.leftInnerExtent+" "+(Te.sourceY-Ae)+"A"+(Te.leftLargeArcRadius-Ae)+" "+(Te.leftSmallArcRadius-Ae)+" 0 0 0 "+(Te.leftFullExtent-Ae)+" "+(Te.sourceY-Te.leftSmallArcRadius)+"L"+(Te.leftFullExtent-Ae)+" "+Te.verticalLeftInnerExtent+"A"+(Te.leftLargeArcRadius-Ae)+" "+(Te.leftLargeArcRadius-Ae)+" 0 0 0 "+Te.leftInnerExtent+" "+(Te.verticalFullExtent+Ae)+"L"+(Te.rightInnerExtent-Oe)+" "+(Te.verticalFullExtent+Ae)+"A"+(Te.rightLargeArcRadius-Ae)+" "+(Te.rightLargeArcRadius-Ae)+" 0 0 0 "+(Te.rightFullExtent+Ae-Oe)+" "+Te.verticalRightInnerExtent+"L"+(Te.rightFullExtent+Ae-Oe)+" "+(Te.targetY-Te.rightSmallArcRadius)+"A"+(Te.rightLargeArcRadius-Ae)+" "+(Te.rightSmallArcRadius-Ae)+" 0 0 0 "+(Te.rightInnerExtent-Oe)+" "+(Te.targetY-Ae)+"L"+(Te.targetX-Oe)+" "+(Te.targetY-Ae)+(Oe>0?"L"+Te.targetX+" "+Te.targetY:"")+"Z":"M "+(Te.targetX-Oe)+" "+(Te.targetY-Ae)+" L"+(Te.rightInnerExtent-Oe)+" "+(Te.targetY-Ae)+"A"+(Te.rightLargeArcRadius+Ae)+" "+(Te.rightSmallArcRadius+Ae)+" 0 0 0 "+(Te.rightFullExtent-Ae-Oe)+" "+(Te.targetY+Te.rightSmallArcRadius)+"L"+(Te.rightFullExtent-Ae-Oe)+" "+Te.verticalRightInnerExtent+"A"+(Te.rightLargeArcRadius+Ae)+" "+(Te.rightLargeArcRadius+Ae)+" 0 0 0 "+(Te.rightInnerExtent-Oe)+" "+(Te.verticalFullExtent+Ae)+"L"+Te.leftInnerExtent+" "+(Te.verticalFullExtent+Ae)+"A"+(Te.leftLargeArcRadius+Ae)+" "+(Te.leftLargeArcRadius+Ae)+" 0 0 0 "+(Te.leftFullExtent+Ae)+" "+Te.verticalLeftInnerExtent+"L"+(Te.leftFullExtent+Ae)+" "+(Te.sourceY+Te.leftSmallArcRadius)+"A"+(Te.leftLargeArcRadius+Ae)+" "+(Te.leftSmallArcRadius+Ae)+" 0 0 0 "+Te.leftInnerExtent+" "+(Te.sourceY-Ae)+"L"+Te.sourceX+" "+(Te.sourceY-Ae)+"L"+Te.sourceX+" "+(Te.sourceY+Ae)+"L"+Te.leftInnerExtent+" "+(Te.sourceY+Ae)+"A"+(Te.leftLargeArcRadius-Ae)+" "+(Te.leftSmallArcRadius-Ae)+" 0 0 1 "+(Te.leftFullExtent-Ae)+" "+(Te.sourceY+Te.leftSmallArcRadius)+"L"+(Te.leftFullExtent-Ae)+" "+Te.verticalLeftInnerExtent+"A"+(Te.leftLargeArcRadius-Ae)+" "+(Te.leftLargeArcRadius-Ae)+" 0 0 1 "+Te.leftInnerExtent+" "+(Te.verticalFullExtent-Ae)+"L"+(Te.rightInnerExtent-Oe)+" "+(Te.verticalFullExtent-Ae)+"A"+(Te.rightLargeArcRadius-Ae)+" "+(Te.rightLargeArcRadius-Ae)+" 0 0 1 "+(Te.rightFullExtent+Ae-Oe)+" "+Te.verticalRightInnerExtent+"L"+(Te.rightFullExtent+Ae-Oe)+" "+(Te.targetY+Te.rightSmallArcRadius)+"A"+(Te.rightLargeArcRadius-Ae)+" "+(Te.rightSmallArcRadius-Ae)+" 0 0 1 "+(Te.rightInnerExtent-Oe)+" "+(Te.targetY+Ae)+"L"+(Te.targetX-Oe)+" "+(Te.targetY+Ae)+(Oe>0?"L"+Te.targetX+" "+Te.targetY:"")+"Z"}(V.link,q);var te=Math.abs((V.link.target.x0-V.link.source.x1)/2);q>te&&(q=te);var $=V.link.source.x1,W=V.link.target.x0-q,Z=k($,W),J=Z(.5),ee=Z(.5),re=V.link.y0-V.link.width/2,ae=V.link.y0+V.link.width/2,oe=V.link.y1-V.link.width/2,ce=V.link.y1+V.link.width/2,pe="M"+$+","+re,ve="C"+J+","+re+" "+ee+","+oe+" "+W+","+oe,we="C"+ee+","+ce+" "+J+","+ae+" "+$+","+ae,xe=q>0?"L"+(W+q)+","+(oe+V.link.width/2):"";return pe+ve+(xe+="L"+W+","+ce)+we+"Z"}}function A(V,q){var te=s(q.color),$=d.nodePadAcross,W=V.nodePad/2;q.dx=q.x1-q.x0,q.dy=q.y1-q.y0;var Z=q.dx,J=Math.max(.5,q.dy),ee="node_"+q.pointNumber;return q.group&&(ee=r.randstr()),q.trace=V.trace,q.curveNumber=V.trace.index,{index:q.pointNumber,key:ee,partOfGroup:q.partOfGroup||!1,group:q.group,traceId:V.key,trace:V.trace,node:q,nodePad:V.nodePad,nodeLineColor:V.nodeLineColor,nodeLineWidth:V.nodeLineWidth,textFont:V.textFont,size:V.horizontal?V.height:V.width,visibleWidth:Math.ceil(Z),visibleHeight:J,zoneX:-$,zoneY:-W,zoneWidth:Z+2*$,zoneHeight:J+2*W,labelY:V.horizontal?q.dy/2+1:q.dx/2+1,left:q.originalLayer===1,sizeAcross:V.width,forceLayouts:V.forceLayouts,horizontal:V.horizontal,darkBackground:te.getBrightness()<=128,tinyColorHue:e.tinyRGB(te),tinyColorAlpha:te.getAlpha(),valueFormat:V.valueFormat,valueSuffix:V.valueSuffix,sankey:V.sankey,graph:V.graph,arrangement:V.arrangement,uniqueNodeLabelPathId:[V.guid,V.key,ee].join("_"),interactionState:V.interactionState,figure:V}}function w(V){V.attr("transform",function(q){return n(q.node.x0.toFixed(3),q.node.y0.toFixed(3))})}function E(V){V.call(w)}function L(V,q){V.call(E),q.attr("d",h())}function C(V){V.attr("width",function(q){return q.node.x1-q.node.x0}).attr("height",function(q){return q.visibleHeight})}function P(V){return V.link.width>1||V.linkLineWidth>0}function D(V){return n(V.translateX,V.translateY)+(V.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function G(V,q,te){V.on(".basic",null).on("mouseover.basic",function($){$.interactionState.dragInProgress||$.partOfGroup||(te.hover(this,$,q),$.interactionState.hovered=[this,$])}).on("mousemove.basic",function($){$.interactionState.dragInProgress||$.partOfGroup||(te.follow(this,$),$.interactionState.hovered=[this,$])}).on("mouseout.basic",function($){$.interactionState.dragInProgress||$.partOfGroup||(te.unhover(this,$,q),$.interactionState.hovered=!1)}).on("click.basic",function($){$.interactionState.hovered&&(te.unhover(this,$,q),$.interactionState.hovered=!1),$.interactionState.dragInProgress||$.partOfGroup||te.select(this,$,q)})}function I(V,q,te,$){var W=l.behavior.drag().origin(function(Z){return{x:Z.node.x0+Z.visibleWidth/2,y:Z.node.y0+Z.visibleHeight/2}}).on("dragstart",function(Z){if(Z.arrangement!=="fixed"&&(r.ensureSingle($._fullLayout._infolayer,"g","dragcover",function(ee){$._fullLayout._dragCover=ee}),r.raiseToTop(this),Z.interactionState.dragInProgress=Z.node,N(Z.node),Z.interactionState.hovered&&(te.nodeEvents.unhover.apply(0,Z.interactionState.hovered),Z.interactionState.hovered=!1),Z.arrangement==="snap")){var J=Z.traceId+"|"+Z.key;Z.forceLayouts[J]?Z.forceLayouts[J].alpha(1):function(ee,re,ae,oe){(function(pe){for(var ve=0;ve<pe.length;ve++)pe[ve].y=(pe[ve].y0+pe[ve].y1)/2,pe[ve].x=(pe[ve].x0+pe[ve].x1)/2})(ae.graph.nodes);var ce=ae.graph.nodes.filter(function(pe){return pe.originalX===ae.node.originalX}).filter(function(pe){return!pe.partOfGroup});ae.forceLayouts[re]=S.forceSimulation(ce).alphaDecay(0).force("collide",S.forceCollide().radius(function(pe){return pe.dy/2+ae.nodePad/2}).strength(1).iterations(d.forceIterations)).force("constrain",function(pe,ve,we,xe){return function(){for(var ge=0,Oe=0;Oe<we.length;Oe++){var Ae=we[Oe];Ae===xe.interactionState.dragInProgress?(Ae.x=Ae.lastDraggedX,Ae.y=Ae.lastDraggedY):(Ae.vx=(Ae.originalX-Ae.x)/d.forceTicksPerFrame,Ae.y=Math.min(xe.size-Ae.dy/2,Math.max(Ae.dy/2,Ae.y))),ge=Math.max(ge,Math.abs(Ae.vx),Math.abs(Ae.vy))}!xe.interactionState.dragInProgress&&ge<.1&&xe.forceLayouts[ve].alpha()>0&&xe.forceLayouts[ve].alpha(0)}}(0,re,ce,ae)).stop()}(0,J,Z),function(ee,re,ae,oe,ce){window.requestAnimationFrame(function pe(){var ve;for(ve=0;ve<d.forceTicksPerFrame;ve++)ae.forceLayouts[oe].tick();if(function(xe){for(var ge=0;ge<xe.length;ge++)xe[ge].y0=xe[ge].y-xe[ge].dy/2,xe[ge].y1=xe[ge].y0+xe[ge].dy,xe[ge].x0=xe[ge].x-xe[ge].dx/2,xe[ge].x1=xe[ge].x0+xe[ge].dx}(ae.graph.nodes),ae.sankey.update(ae.graph),L(ee.filter(F(ae)),re),ae.forceLayouts[oe].alpha()>0)window.requestAnimationFrame(pe);else{var we=ae.node.originalX;ae.node.x0=we-ae.visibleWidth/2,ae.node.x1=we+ae.visibleWidth/2,H(ae,ce)}})}(V,q,Z,J,$)}}).on("drag",function(Z){if(Z.arrangement!=="fixed"){var J=l.event.x,ee=l.event.y;Z.arrangement==="snap"?(Z.node.x0=J-Z.visibleWidth/2,Z.node.x1=J+Z.visibleWidth/2,Z.node.y0=ee-Z.visibleHeight/2,Z.node.y1=ee+Z.visibleHeight/2):(Z.arrangement==="freeform"&&(Z.node.x0=J-Z.visibleWidth/2,Z.node.x1=J+Z.visibleWidth/2),ee=Math.max(0,Math.min(Z.size-Z.visibleHeight/2,ee)),Z.node.y0=ee-Z.visibleHeight/2,Z.node.y1=ee+Z.visibleHeight/2),N(Z.node),Z.arrangement!=="snap"&&(Z.sankey.update(Z.graph),L(V.filter(F(Z)),q))}}).on("dragend",function(Z){if(Z.arrangement!=="fixed"){Z.interactionState.dragInProgress=!1;for(var J=0;J<Z.node.childrenNodes.length;J++)Z.node.childrenNodes[J].x=Z.node.x,Z.node.childrenNodes[J].y=Z.node.y;Z.arrangement!=="snap"&&H(Z,$)}});V.on(".drag",null).call(W)}function H(V,q){for(var te=[],$=[],W=0;W<V.graph.nodes.length;W++){var Z=(V.graph.nodes[W].x0+V.graph.nodes[W].x1)/2,J=(V.graph.nodes[W].y0+V.graph.nodes[W].y1)/2;te.push(Z/V.figure.width),$.push(J/V.figure.height)}g.call("_guiRestyle",q,{"node.x":[te],"node.y":[$]},V.trace.index).then(function(){q._fullLayout._dragCover&&q._fullLayout._dragCover.remove()})}function N(V){V.lastDraggedX=V.x0+V.dx/2,V.lastDraggedY=V.y0+V.dy/2}function F(V){return function(q){return q.node.originalX===V.node.originalX}}Q.exports=function(V,q,te,$,W){var Z=V._context.staticPlot,J=!1;r.ensureSingle(V._fullLayout._infolayer,"g","first-render",function(){J=!0});var ee=V._fullLayout._dragCover,re=te.filter(function(ge){return c(ge).trace.visible}).map(m.bind(null,$)),ae=q.selectAll("."+d.cn.sankey).data(re,u);ae.exit().remove(),ae.enter().append("g").classed(d.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",Z?"none":"auto").attr("transform",D),ae.each(function(ge,Oe){V._fullData[Oe]._sankey=ge;var Ae="bgsankey-"+ge.trace.uid+"-"+Oe;r.ensureSingle(V._fullLayout._draggers,"rect",Ae),V._fullData[Oe]._bgRect=l.select("."+Ae),V._fullData[Oe]._bgRect.style("pointer-events",Z?"none":"all").attr("width",ge.width).attr("height",ge.height).attr("x",ge.translateX).attr("y",ge.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),ae.transition().ease(d.ease).duration(d.duration).attr("transform",D);var oe=ae.selectAll("."+d.cn.sankeyLinks).data(p,u);oe.enter().append("g").classed(d.cn.sankeyLinks,!0).style("fill","none");var ce=oe.selectAll("."+d.cn.sankeyLink).data(function(ge){return ge.graph.links.filter(function(Oe){return Oe.value}).map(_.bind(null,ge))},u);ce.enter().append("path").classed(d.cn.sankeyLink,!0).call(G,ae,W.linkEvents),ce.style("stroke",function(ge){return P(ge)?e.tinyRGB(s(ge.linkLineColor)):ge.tinyColorHue}).style("stroke-opacity",function(ge){return P(ge)?e.opacity(ge.linkLineColor):ge.tinyColorAlpha}).style("fill",function(ge){return ge.tinyColorHue}).style("fill-opacity",function(ge){return ge.tinyColorAlpha}).style("stroke-width",function(ge){return P(ge)?ge.linkLineWidth:1}).attr("d",h()),ce.style("opacity",function(){return V._context.staticPlot||J||ee?1:0}).transition().ease(d.ease).duration(d.duration).style("opacity",1),ce.exit().transition().ease(d.ease).duration(d.duration).style("opacity",0).remove();var pe=ae.selectAll("."+d.cn.sankeyNodeSet).data(p,u);pe.enter().append("g").classed(d.cn.sankeyNodeSet,!0),pe.style("cursor",function(ge){switch(ge.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var ve=pe.selectAll("."+d.cn.sankeyNode).data(function(ge){var Oe=ge.graph.nodes;return function(Ae){var Te,se=[];for(Te=0;Te<Ae.length;Te++)Ae[Te].originalX=(Ae[Te].x0+Ae[Te].x1)/2,Ae[Te].originalY=(Ae[Te].y0+Ae[Te].y1)/2,se.indexOf(Ae[Te].originalX)===-1&&se.push(Ae[Te].originalX);for(se.sort(function(le,ne){return le-ne}),Te=0;Te<Ae.length;Te++)Ae[Te].originalLayerIndex=se.indexOf(Ae[Te].originalX),Ae[Te].originalLayer=Ae[Te].originalLayerIndex/(se.length-1)}(Oe),Oe.map(A.bind(null,ge))},u);ve.enter().append("g").classed(d.cn.sankeyNode,!0).call(w).style("opacity",function(ge){return!V._context.staticPlot&&!J||ge.partOfGroup?0:1}),ve.call(G,ae,W.nodeEvents).call(I,ce,W,V),ve.transition().ease(d.ease).duration(d.duration).call(w).style("opacity",function(ge){return ge.partOfGroup?0:1}),ve.exit().transition().ease(d.ease).duration(d.duration).style("opacity",0).remove();var we=ve.selectAll("."+d.cn.nodeRect).data(p);we.enter().append("rect").classed(d.cn.nodeRect,!0).call(C),we.style("stroke-width",function(ge){return ge.nodeLineWidth}).style("stroke",function(ge){return e.tinyRGB(s(ge.nodeLineColor))}).style("stroke-opacity",function(ge){return e.opacity(ge.nodeLineColor)}).style("fill",function(ge){return ge.tinyColorHue}).style("fill-opacity",function(ge){return ge.tinyColorAlpha}),we.transition().ease(d.ease).duration(d.duration).call(C);var xe=ve.selectAll("."+d.cn.nodeLabel).data(p);xe.enter().append("text").classed(d.cn.nodeLabel,!0).style("cursor","default"),xe.attr("data-notex",1).text(function(ge){return ge.node.label}).each(function(ge){var Oe=l.select(this);i.font(Oe,ge.textFont),x.convertToTspans(Oe,V)}).style("text-shadow",x.makeTextShadow(V._fullLayout.paper_bgcolor)).attr("text-anchor",function(ge){return ge.horizontal&&ge.left?"end":"start"}).attr("transform",function(ge){var Oe=l.select(this),Ae=x.lineCount(Oe),Te=ge.textFont.size*((Ae-1)*v-y),se=ge.nodeLineWidth/2+3,le=((ge.horizontal?ge.visibleHeight:ge.visibleWidth)-Te)/2;ge.horizontal&&(ge.left?se=-se:se+=ge.visibleWidth);var ne=ge.horizontal?"":"scale(-1,1)"+a(90);return n(ge.horizontal?se:le,ge.horizontal?le:se)+ne}),xe.transition().ease(d.ease).duration(d.duration)}},84564:function(Q){Q.exports=function(z,t){for(var S=[],k=z.cd[0].trace,l=k._sankey.graph.nodes,T=0;T<l.length;T++){var b=l[T];if(!b.partOfGroup){var d=[(b.x0+b.x1)/2,(b.y0+b.y1)/2];k.orientation==="v"&&d.reverse(),t&&t.contains(d,!1,T,z)&&S.push({pointNumber:b.pointNumber})}}return S}},75225:function(Q,z,t){var S=t(71828);Q.exports=function(k,l){for(var T=0;T<k.length;T++)k[T].i=T;S.mergeArray(l.text,k,"tx"),S.mergeArray(l.texttemplate,k,"txt"),S.mergeArray(l.hovertext,k,"htx"),S.mergeArray(l.customdata,k,"data"),S.mergeArray(l.textposition,k,"tp"),l.textfont&&(S.mergeArrayCastPositive(l.textfont.size,k,"ts"),S.mergeArray(l.textfont.color,k,"tc"),S.mergeArray(l.textfont.family,k,"tf"));var b=l.marker;if(b){S.mergeArrayCastPositive(b.size,k,"ms"),S.mergeArrayCastPositive(b.opacity,k,"mo"),S.mergeArray(b.symbol,k,"mx"),S.mergeArray(b.angle,k,"ma"),S.mergeArray(b.standoff,k,"mf"),S.mergeArray(b.color,k,"mc");var d=b.line;b.line&&(S.mergeArray(d.color,k,"mlc"),S.mergeArrayCastPositive(d.width,k,"mlw"));var s=b.gradient;s&&s.type!=="none"&&(S.mergeArray(s.type,k,"mgt"),S.mergeArray(s.color,k,"mgc"))}}},82196:function(Q,z,t){var S=t(12663).axisHoverFormat,k=t(5386).si,l=t(5386).fF,T=t(50693),b=t(41940),d=t(79952).P,s=t(79952).u,e=t(91424),i=t(47581),r=t(1426).extendFlat;Q.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:S("x"),yhoverformat:S("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:k({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:l({},{keys:i.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:r({},d,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:s,marker:r({symbol:{valType:"enumerated",values:e.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:r({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},T("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},T("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:b({editType:"calc",colorEditType:"style",arrayOk:!0})}},47761:function(Q,z,t){var S=t(92770),k=t(71828),l=t(89298),T=t(42973),b=t(50606).BADNUM,d=t(34098),s=t(36922),e=t(75225),i=t(66279);function r(p,c,x,g,f,y,v){var m=c._length,_=p._fullLayout,h=x._id,A=g._id,w=_._firstScatter[o(c)]===c.uid,E=(u(c,_,x,g)||{}).orientation,L=c.fill;x._minDtick=0,g._minDtick=0;var C={padded:!0},P={padded:!0};v&&(C.ppad=P.ppad=v);var D=m<2||f[0]!==f[m-1]||y[0]!==y[m-1];D&&(L==="tozerox"||L==="tonextx"&&(w||E==="h"))?C.tozero=!0:(c.error_y||{}).visible||L!=="tonexty"&&L!=="tozeroy"&&(d.hasMarkers(c)||d.hasText(c))||(C.padded=!1,C.ppad=0),D&&(L==="tozeroy"||L==="tonexty"&&(w||E==="v"))?P.tozero=!0:L!=="tonextx"&&L!=="tozerox"||(P.padded=!1),h&&(c._extremes[h]=l.findExtremes(x,f,C)),A&&(c._extremes[A]=l.findExtremes(g,y,P))}function n(p,c){if(d.hasMarkers(p)){var x,g=p.marker,f=1.6*(p.marker.sizeref||1);if(x=p.marker.sizemode==="area"?function(h){return Math.max(Math.sqrt((h||0)/f),3)}:function(h){return Math.max((h||0)/f,3)},k.isArrayOrTypedArray(g.size)){var y={type:"linear"};l.setConvert(y);for(var v=y.makeCalcdata(p.marker,"size"),m=new Array(c),_=0;_<c;_++)m[_]=x(v[_]);return m}return x(g.size)}}function a(p,c){var x=o(c),g=p._firstScatter;g[x]||(g[x]=c.uid)}function o(p){var c=p.stackgroup;return p.xaxis+p.yaxis+p.type+(c?"-"+c:"")}function u(p,c,x,g){var f=p.stackgroup;if(f){var y=c._scatterStackOpts[x._id+g._id][f],v=y.orientation==="v"?g:x;return v.type==="linear"||v.type==="log"?y:void 0}}Q.exports={calc:function(p,c){var x,g,f,y,v,m,_=p._fullLayout,h=c._xA=l.getFromId(p,c.xaxis||"x","x"),A=c._yA=l.getFromId(p,c.yaxis||"y","y"),w=h.makeCalcdata(c,"x"),E=A.makeCalcdata(c,"y"),L=T(c,h,"x",w),C=T(c,A,"y",E),P=L.vals,D=C.vals,G=c._length,I=new Array(G),H=c.ids,N=u(c,_,h,A),F=!1;a(_,c);var V,q="x",te="y";N?(k.pushUnique(N.traceIndices,c._expandedIndex),(x=N.orientation==="v")?(te="s",V="x"):(q="s",V="y"),v=N.stackgaps==="interpolate"):r(p,c,h,A,P,D,n(c,G));var $=!!c.xperiodalignment,W=!!c.yperiodalignment;for(g=0;g<G;g++){var Z=I[g]={},J=S(P[g]),ee=S(D[g]);J&&ee?(Z[q]=P[g],Z[te]=D[g],$&&(Z.orig_x=w[g],Z.xEnd=L.ends[g],Z.xStart=L.starts[g]),W&&(Z.orig_y=E[g],Z.yEnd=C.ends[g],Z.yStart=C.starts[g])):N&&(x?J:ee)?(Z[V]=x?P[g]:D[g],Z.gap=!0,v?(Z.s=b,F=!0):Z.s=0):Z[q]=Z[te]=b,H&&(Z.id=String(H[g]))}if(e(I,c),s(p,c),i(I,c),N){for(g=0;g<I.length;)I[g][V]===b?I.splice(g,1):g++;if(k.sort(I,function(ce,pe){return ce[V]-pe[V]||ce.i-pe.i}),F){for(g=0;g<I.length-1&&I[g].gap;)g++;for((m=I[g].s)||(m=I[g].s=0),f=0;f<g;f++)I[f].s=m;for(y=I.length-1;y>g&&I[y].gap;)y--;for(m=I[y].s,f=I.length-1;f>y;f--)I[f].s=m;for(;g<y;)if(I[++g].gap){for(f=g+1;I[f].gap;)f++;for(var re=I[g-1][V],ae=I[g-1].s,oe=(I[f].s-ae)/(I[f][V]-re);g<f;)I[g].s=ae+(I[g][V]-re)*oe,g++}}}return I},calcMarkerSize:n,calcAxisExpansion:r,setFirstScatter:a,getStackOpts:u}},66279:function(Q,z,t){var S=t(71828);Q.exports=function(k,l){S.isArrayOrTypedArray(l.selectedpoints)&&S.tagSelected(k,l)}},36922:function(Q,z,t){var S=t(52075).hasColorscale,k=t(78803),l=t(34098);Q.exports=function(T,b){l.hasLines(b)&&S(b,"line")&&k(T,b,{vals:b.line.color,containerStr:"line",cLetter:"c"}),l.hasMarkers(b)&&(S(b,"marker")&&k(T,b,{vals:b.marker.color,containerStr:"marker",cLetter:"c"}),S(b,"marker.line")&&k(T,b,{vals:b.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},47581:function(Q){Q.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},72626:function(Q,z,t){var S=t(47761),k=t(11661).setGroupPositions;function l(T,b,d,s,e,i,r){e[s]=!0;var n={i:null,gap:!0,s:0};if(n[r]=d,T.splice(b,0,n),b&&d===T[b-1][r]){var a=T[b-1];n.s=a.s,n.i=a.i,n.gap=a.gap}else i&&(n.s=function(o,u,p,c){var x=o[u-1],g=o[u+1];return g?x?x.s+(g.s-x.s)*(p-x[c])/(g[c]-x[c]):g.s:x.s}(T,b,d,r));b||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}Q.exports=function(T,b){T._fullLayout.scattermode==="group"&&function(V,q){for(var te=q.xaxis,$=q.yaxis,W=V._fullLayout,Z=V._fullData,J=V.calcdata,ee=[],re=[],ae=0;ae<Z.length;ae++){var oe=Z[ae];oe.visible===!0&&oe.type==="scatter"&&oe.xaxis===te._id&&oe.yaxis===$._id&&(oe.orientation==="h"?ee.push(J[ae]):oe.orientation==="v"&&re.push(J[ae]))}var ce={mode:W.scattermode,gap:W.scattergap};k(V,te,$,re,ce),k(V,$,te,ee,ce)}(T,b);var d=b.xaxis,s=b.yaxis,e=d._id+s._id,i=T._fullLayout._scatterStackOpts[e];if(i){var r,n,a,o,u,p,c,x,g,f,y,v,m,_,h,A=T.calcdata;for(var w in i){var E=(f=i[w]).traceIndices;if(E.length){for(y=f.stackgaps==="interpolate",v=f.groupnorm,f.orientation==="v"?(m="x",_="y"):(m="y",_="x"),h=new Array(E.length),r=0;r<h.length;r++)h[r]=!1;p=A[E[0]];var L=new Array(p.length);for(r=0;r<p.length;r++)L[r]=p[r][m];for(r=1;r<E.length;r++){for(u=A[E[r]],n=a=0;n<u.length;n++){for(c=u[n][m];c>L[a]&&a<L.length;a++)l(u,n,L[a],r,h,y,m),n++;if(c!==L[a]){for(o=0;o<r;o++)l(A[E[o]],a,c,o,h,y,m);L.splice(a,0,c)}a++}for(;a<L.length;a++)l(u,n,L[a],r,h,y,m),n++}var C=L.length;for(n=0;n<p.length;n++){for(x=p[n][_]=p[n].s,r=1;r<E.length;r++)(u=A[E[r]])[0].trace._rawLength=u[0].trace._length,u[0].trace._length=C,x+=u[n].s,u[n][_]=x;if(v)for(g=(v==="fraction"?x:x/100)||1,r=0;r<E.length;r++){var P=A[E[r]][n];P[_]/=g,P.sNorm=P.s/g}}for(r=0;r<E.length;r++){var D=(u=A[E[r]])[0].trace,G=S.calcMarkerSize(D,D._rawLength),I=Array.isArray(G);if(G&&h[r]||I){var H=G;for(G=new Array(C),n=0;n<C;n++)G[n]=u[n].gap?0:I?H[u[n].i]:H}var N=new Array(C),F=new Array(C);for(n=0;n<C;n++)N[n]=u[n].x,F[n]=u[n].y;S.calcAxisExpansion(T,D,d,s,N,F,G),u[0].t.orientation=f.orientation}}}}}},34936:function(Q,z,t){var S=t(71828),k=t(26125),l=t(82196);Q.exports=function(T,b){var d,s,e;function i(u){return S.coerce(s._input,s,l,u)}if(b.scattermode==="group")for(e=0;e<T.length;e++)(s=T[e]).type==="scatter"&&(d=s._input,k(d,s,b,i));for(e=0;e<T.length;e++){var r=T[e];if(r.type==="scatter"){var n=r.fill;if(n!=="none"&&n!=="toself"&&(r.opacity=void 0,n==="tonexty"||n==="tonextx"))for(var a=e-1;a>=0;a--){var o=T[a];if(o.type==="scatter"&&o.xaxis===r.xaxis&&o.yaxis===r.yaxis){o.opacity=void 0;break}}}}}},17438:function(Q,z,t){var S=t(71828),k=t(73972),l=t(82196),T=t(47581),b=t(34098),d=t(67513),s=t(73927),e=t(565),i=t(49508),r=t(11058),n=t(94039),a=t(82410),o=t(28908),u=t(71828).coercePattern;Q.exports=function(p,c,x,g){function f(E,L){return S.coerce(p,c,l,E,L)}var y=d(p,c,g,f);if(y||(c.visible=!1),c.visible){s(p,c,g,f),f("xhoverformat"),f("yhoverformat");var v=e(p,c,g,f);g.scattermode==="group"&&c.orientation===void 0&&f("orientation","v");var m=!v&&y<T.PTS_LINESONLY?"lines+markers":"lines";f("text"),f("hovertext"),f("mode",m),b.hasLines(c)&&(r(p,c,x,g,f,{backoff:!0}),n(p,c,f),f("connectgaps"),f("line.simplify")),b.hasMarkers(c)&&i(p,c,x,g,f,{gradient:!0}),b.hasText(c)&&(f("texttemplate"),a(p,c,g,f));var _=[];(b.hasMarkers(c)||b.hasText(c))&&(f("cliponaxis"),f("marker.maxdisplayed"),_.push("points")),f("fill",v?v.fillDflt:"none"),c.fill!=="none"&&(o(p,c,x,f),b.hasLines(c)||n(p,c,f),u(f,"fillpattern",c.fillcolor,!1));var h=(c.line||{}).color,A=(c.marker||{}).color;c.fill!=="tonext"&&c.fill!=="toself"||_.push("fills"),f("hoveron",_.join("+")||"points"),c.hoveron!=="fills"&&f("hovertemplate");var w=k.getComponentMethod("errorbars","supplyDefaults");w(p,c,h||A||x,{axis:"y"}),w(p,c,h||A||x,{axis:"x",inherit:"y"}),S.coerceSelectionMarkerOpacity(c,f)}}},28908:function(Q,z,t){var S=t(7901),k=t(71828).isArrayOrTypedArray;Q.exports=function(l,T,b,d){var s=!1;if(T.marker){var e=T.marker.color,i=(T.marker.line||{}).color;e&&!k(e)?s=e:i&&!k(i)&&(s=i)}d("fillcolor",S.addOpacity((T.line||{}).color||s||b,.5))}},8225:function(Q,z,t){var S=t(89298);Q.exports=function(k,l,T){var b={},d={_fullLayout:T},s=S.getFromTrace(d,l,"x"),e=S.getFromTrace(d,l,"y"),i=k.orig_x;i===void 0&&(i=k.x);var r=k.orig_y;return r===void 0&&(r=k.y),b.xLabel=S.tickText(s,s.c2l(i),!0).text,b.yLabel=S.tickText(e,e.c2l(r),!0).text,b}},34603:function(Q,z,t){var S=t(7901),k=t(34098);Q.exports=function(l,T){var b,d;if(l.mode==="lines")return(b=l.line.color)&&S.opacity(b)?b:l.fillcolor;if(l.mode==="none")return l.fill?l.fillcolor:"";var s=T.mcc||(l.marker||{}).color,e=T.mlcc||((l.marker||{}).line||{}).color;return(d=s&&S.opacity(s)?s:e&&S.opacity(e)&&(T.mlw||((l.marker||{}).line||{}).width)?e:"")?S.opacity(d)<.3?S.addOpacity(d,.3):d:(b=(l.line||{}).color)&&S.opacity(b)&&k.hasLines(l)&&l.line.width?b:l.fillcolor}},26125:function(Q,z,t){var S=t(99082).getAxisGroup;Q.exports=function(k,l,T,b){var d=l.orientation,s=l[{v:"x",h:"y"}[d]+"axis"],e=S(T,s)+d,i=T._alignmentOpts||{},r=b("alignmentgroup"),n=i[e];n||(n=i[e]={});var a=n[r];a?a.traces.push(l):a=n[r]={traces:[l],alignmentIndex:Object.keys(n).length,offsetGroups:{}};var o=b("offsetgroup"),u=a.offsetGroups,p=u[o];o&&(p||(p=u[o]={offsetIndex:Object.keys(u).length}),l._offsetIndex=p.offsetIndex)}},33720:function(Q,z,t){var S=t(71828),k=t(30211),l=t(73972),T=t(34603),b=t(7901),d=S.fillText;Q.exports=function(s,e,i,r){var n=s.cd,a=n[0].trace,o=s.xa,u=s.ya,p=o.c2p(e),c=u.c2p(i),x=[p,c],g=a.hoveron||"",f=a.mode.indexOf("markers")!==-1?3:.5,y=!!a.xperiodalignment,v=!!a.yperiodalignment;if(g.indexOf("points")!==-1){var m=function(ve){var we=Math.max(f,ve.mrc||0),xe=o.c2p(ve.x)-p,ge=u.c2p(ve.y)-c;return Math.max(Math.sqrt(xe*xe+ge*ge)-we,1-f/we)},_=k.getDistanceFunction(r,function(ve){if(y){var we=o.c2p(ve.xStart),xe=o.c2p(ve.xEnd);return p>=Math.min(we,xe)&&p<=Math.max(we,xe)?0:1/0}var ge=Math.max(3,ve.mrc||0),Oe=1-1/ge,Ae=Math.abs(o.c2p(ve.x)-p);return Ae<ge?Oe*Ae/ge:Ae-ge+Oe},function(ve){if(v){var we=u.c2p(ve.yStart),xe=u.c2p(ve.yEnd);return c>=Math.min(we,xe)&&c<=Math.max(we,xe)?0:1/0}var ge=Math.max(3,ve.mrc||0),Oe=1-1/ge,Ae=Math.abs(u.c2p(ve.y)-c);return Ae<ge?Oe*Ae/ge:Ae-ge+Oe},m);if(k.getClosest(n,_,s),s.index!==!1){var h=n[s.index],A=o.c2p(h.x,!0),w=u.c2p(h.y,!0),E=h.mrc||1;s.index=h.i;var L=n[0].t.orientation,C=L&&(h.sNorm||h.s),P=L==="h"?C:h.orig_x!==void 0?h.orig_x:h.x,D=L==="v"?C:h.orig_y!==void 0?h.orig_y:h.y;return S.extendFlat(s,{color:T(a,h),x0:A-E,x1:A+E,xLabelVal:P,y0:w-E,y1:w+E,yLabelVal:D,spikeDistance:m(h),hovertemplate:a.hovertemplate}),d(h,a,s),l.getComponentMethod("errorbars","hoverInfo")(h,a,s),[s]}}if(g.indexOf("fills")!==-1&&a._polygons){var G,I,H,N,F,V,q,te,$,W=a._polygons,Z=[],J=!1,ee=1/0,re=-1/0,ae=1/0,oe=-1/0;for(G=0;G<W.length;G++)(H=W[G]).contains(x)&&(J=!J,Z.push(H),ae=Math.min(ae,H.ymin),oe=Math.max(oe,H.ymax));if(J){var ce=((ae=Math.max(ae,0))+(oe=Math.min(oe,u._length)))/2;for(G=0;G<Z.length;G++)for(N=Z[G].pts,I=1;I<N.length;I++)(te=N[I-1][1])>ce!=($=N[I][1])>=ce&&(V=N[I-1][0],q=N[I][0],$-te&&(F=V+(q-V)*(ce-te)/($-te),ee=Math.min(ee,F),re=Math.max(re,F)));ee=Math.max(ee,0),re=Math.min(re,o._length);var pe=b.defaultLine;return b.opacity(a.fillcolor)?pe=a.fillcolor:b.opacity((a.line||{}).color)&&(pe=a.line.color),S.extendFlat(s,{distance:s.maxHoverDistance,x0:ee,x1:re,y0:ce,y1:ce,color:pe,hovertemplate:!1}),delete s.index,a.text&&!Array.isArray(a.text)?s.text=String(a.text):s.text=a.name,[s]}}}},67368:function(Q,z,t){var S=t(34098);Q.exports={hasLines:S.hasLines,hasMarkers:S.hasMarkers,hasText:S.hasText,isBubble:S.isBubble,attributes:t(82196),layoutAttributes:t(21479),supplyDefaults:t(17438),crossTraceDefaults:t(34936),supplyLayoutDefaults:t(79334),calc:t(47761).calc,crossTraceCalc:t(72626),arraysToCalcdata:t(75225),plot:t(32663),colorbar:t(4898),formatLabels:t(8225),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(33720),selectPoints:t(98002),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:t(93612),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},21479:function(Q){Q.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},79334:function(Q,z,t){var S=t(71828),k=t(21479);Q.exports=function(l,T){var b,d=T.barmode==="group";T.scattermode==="group"&&(b=d?T.bargap:.2,S.coerce(l,T,k,"scattergap",b))}},11058:function(Q,z,t){var S=t(71828).isArrayOrTypedArray,k=t(52075).hasColorscale,l=t(1586);Q.exports=function(T,b,d,s,e,i){i||(i={});var r=(T.marker||{}).color;e("line.color",d),k(T,"line")?l(T,b,s,e,{prefix:"line.",cLetter:"c"}):e("line.color",!S(r)&&r||d),e("line.width"),i.noDash||e("line.dash"),i.backoff&&e("line.backoff")}},34621:function(Q,z,t){var S=t(91424),k=t(50606),l=k.BADNUM,T=k.LOG_CLIP,b=T+.5,d=T-.5,s=t(71828),e=s.segmentsIntersect,i=s.constrain,r=t(47581);Q.exports=function(n,a){var o,u,p,c,x,g,f,y,v,m,_,h,A,w,E,L,C,P,D=a.trace||{},G=a.xaxis,I=a.yaxis,H=G.type==="log",N=I.type==="log",F=G._length,V=I._length,q=a.backoff,te=D.marker,$=a.connectGaps,W=a.baseTolerance,Z=a.shape,J=Z==="linear",ee=D.fill&&D.fill!=="none",re=[],ae=r.minTolerance,oe=n.length,ce=new Array(oe),pe=0;function ve(Ct){var Ye=n[Ct];if(!Ye)return!1;var Xe=a.linearized?G.l2p(Ye.x):G.c2p(Ye.x),Ve=a.linearized?I.l2p(Ye.y):I.c2p(Ye.y);if(Xe===l){if(H&&(Xe=G.c2p(Ye.x,!0)),Xe===l)return!1;N&&Ve===l&&(Xe*=Math.abs(G._m*V*(G._m>0?b:d)/(I._m*F*(I._m>0?b:d)))),Xe*=1e3}if(Ve===l){if(N&&(Ve=I.c2p(Ye.y,!0)),Ve===l)return!1;Ve*=1e3}return[Xe,Ve]}function we(Ct,Ye,Xe,Ve){var We=Xe-Ct,nt=Ve-Ye,ot=.5-Ct,Ie=.5-Ye,ze=We*We+nt*nt,et=We*ot+nt*Ie;if(et>0&&et<ze){var tt=ot*nt-Ie*We;if(tt*tt<ze)return!0}}function xe(Ct,Ye){var Xe=Ct[0]/F,Ve=Ct[1]/V,We=Math.max(0,-Xe,Xe-1,-Ve,Ve-1);return We&&C!==void 0&&we(Xe,Ve,C,P)&&(We=0),We&&Ye&&we(Xe,Ve,Ye[0]/F,Ye[1]/V)&&(We=0),(1+r.toleranceGrowth*We)*W}function ge(Ct,Ye){var Xe=Ct[0]-Ye[0],Ve=Ct[1]-Ye[1];return Math.sqrt(Xe*Xe+Ve*Ve)}var Oe,Ae,Te,se,le,ne,me,Ee=r.maxScreensAway,be=-F*Ee,De=F*(1+Ee),Ue=-V*Ee,he=V*(1+Ee),ke=[[be,Ue,De,Ue],[De,Ue,De,he],[De,he,be,he],[be,he,be,Ue]];function _e(Ct){if(Ct[0]<be||Ct[0]>De||Ct[1]<Ue||Ct[1]>he)return[i(Ct[0],be,De),i(Ct[1],Ue,he)]}function Ce(Ct,Ye){return Ct[0]===Ye[0]&&(Ct[0]===be||Ct[0]===De)||Ct[1]===Ye[1]&&(Ct[1]===Ue||Ct[1]===he)||void 0}function Fe(Ct,Ye,Xe){return function(Ve,We){var nt=_e(Ve),ot=_e(We),Ie=[];if(nt&&ot&&Ce(nt,ot))return Ie;nt&&Ie.push(nt),ot&&Ie.push(ot);var ze=2*s.constrain((Ve[Ct]+We[Ct])/2,Ye,Xe)-((nt||Ve)[Ct]+(ot||We)[Ct]);return ze&&((nt&&ot?ze>0==nt[Ct]>ot[Ct]?nt:ot:nt||ot)[Ct]+=ze),Ie}}function Re(Ct){var Ye=Ct[0],Xe=Ct[1],Ve=Ye===ce[pe-1][0],We=Xe===ce[pe-1][1];if(!Ve||!We)if(pe>1){var nt=Ye===ce[pe-2][0],ot=Xe===ce[pe-2][1];Ve&&(Ye===be||Ye===De)&&nt?ot?pe--:ce[pe-1]=Ct:We&&(Xe===Ue||Xe===he)&&ot?nt?pe--:ce[pe-1]=Ct:ce[pe++]=Ct}else ce[pe++]=Ct}function He(Ct){ce[pe-1][0]!==Ct[0]&&ce[pe-1][1]!==Ct[1]&&Re([Te,se]),Re(Ct),le=null,Te=se=0}Z==="linear"||Z==="spline"?me=function(Ct,Ye){for(var Xe=[],Ve=0,We=0;We<4;We++){var nt=ke[We],ot=e(Ct[0],Ct[1],Ye[0],Ye[1],nt[0],nt[1],nt[2],nt[3]);ot&&(!Ve||Math.abs(ot.x-Xe[0][0])>1||Math.abs(ot.y-Xe[0][1])>1)&&(ot=[ot.x,ot.y],Ve&&ge(ot,Ct)<ge(Xe[0],Ct)?Xe.unshift(ot):Xe.push(ot),Ve++)}return Xe}:Z==="hv"||Z==="vh"?me=function(Ct,Ye){var Xe=[],Ve=_e(Ct),We=_e(Ye);return Ve&&We&&Ce(Ve,We)||(Ve&&Xe.push(Ve),We&&Xe.push(We)),Xe}:Z==="hvh"?me=Fe(0,be,De):Z==="vhv"&&(me=Fe(1,Ue,he));var Ge=s.isArrayOrTypedArray(te);function $e(Ct){if(Ct&&q&&(Ct.i=o,Ct.d=n,Ct.trace=D,Ct.marker=Ge?te[Ct.i]:te,Ct.backoff=q),C=Ct[0]/F,P=Ct[1]/V,Oe=Ct[0]<be?be:Ct[0]>De?De:0,Ae=Ct[1]<Ue?Ue:Ct[1]>he?he:0,Oe||Ae){if(pe)if(le){var Ye=me(le,Ct);Ye.length>1&&(He(Ye[0]),ce[pe++]=Ye[1])}else ne=me(ce[pe-1],Ct)[0],ce[pe++]=ne;else ce[pe++]=[Oe||Ct[0],Ae||Ct[1]];var Xe=ce[pe-1];Oe&&Ae&&(Xe[0]!==Oe||Xe[1]!==Ae)?(le&&(Te!==Oe&&se!==Ae?Re(Te&&se?(Ve=le,nt=(We=Ct)[0]-Ve[0],ot=(We[1]-Ve[1])/nt,(Ve[1]*We[0]-We[1]*Ve[0])/nt>0?[ot>0?be:De,he]:[ot>0?De:be,Ue]):[Te||Oe,se||Ae]):Te&&se&&Re([Te,se])),Re([Oe,Ae])):Te-Oe&&se-Ae&&Re([Oe||Te,Ae||se]),le=Ct,Te=Oe,se=Ae}else le&&He(me(le,Ct)[0]),ce[pe++]=Ct;var Ve,We,nt,ot}for(o=0;o<oe;o++)if(u=ve(o)){for(pe=0,le=null,$e(u),o++;o<oe;o++){if(!(c=ve(o))){if($)continue;break}if(J&&a.simplify){var st=ve(o+1);if(m=ge(c,u),ee&&(pe===0||pe===oe-1)||!(m<xe(c,st)*ae)){for(y=[(c[0]-u[0])/m,(c[1]-u[1])/m],x=u,_=m,h=w=E=0,f=!1,p=c,o++;o<n.length;o++){if(g=st,st=ve(o+1),!g){if($)continue;break}if(L=(v=[g[0]-u[0],g[1]-u[1]])[0]*y[1]-v[1]*y[0],w=Math.min(w,L),(E=Math.max(E,L))-w>xe(g,st))break;p=g,(A=v[0]*y[0]+v[1]*y[1])>_?(_=A,c=g,f=!1):A<h&&(h=A,x=g,f=!0)}if(f?($e(c),p!==x&&$e(x)):(x!==u&&$e(x),p!==c&&$e(c)),$e(p),o>=n.length||!g)break;$e(g),u=g}}else $e(c)}le&&Re([Te||le[0],se||le[1]]),re.push(ce.slice(0,pe))}var Ke=Z.slice(Z.length-1);if(q&&Ke!=="h"&&Ke!=="v"){for(var gt=!1,mt=-1,at=[],rt=0;rt<re.length;rt++)for(var xt=0;xt<re[rt].length-1;xt++){var Tt=re[rt][xt],wt=re[rt][xt+1],Ot=S.applyBackoff(wt,Tt);Ot[0]===wt[0]&&Ot[1]===wt[1]||(gt=!0),at[mt+1]||(at[++mt]=[Tt,[Ot[0],Ot[1]]])}return gt?at:re}return re}},94039:function(Q){Q.exports=function(z,t,S){S("line.shape")==="spline"&&S("line.smoothing")}},68687:function(Q){var z={tonextx:1,tonexty:1,tonext:1};Q.exports=function(t,S,k){var l,T,b,d,s,e={},i=!1,r=-1,n=0,a=-1;for(T=0;T<k.length;T++)(b=(l=k[T][0].trace).stackgroup||"")?b in e?s=e[b]:(s=e[b]=n,n++):l.fill in z&&a>=0?s=a:(s=a=n,n++),s<r&&(i=!0),l._groupIndex=r=s;var o=k.slice();i&&o.sort(function(p,c){var x=p[0].trace,g=c[0].trace;return x._groupIndex-g._groupIndex||x.index-g.index});var u={};for(T=0;T<o.length;T++)b=(l=o[T][0].trace).stackgroup||"",l.visible===!0?(l._nexttrace=null,l.fill in z&&(d=u[b],l._prevtrace=d||null,d&&(d._nexttrace=l)),l._ownfill=l.fill&&(l.fill.substr(0,6)==="tozero"||l.fill==="toself"||l.fill.substr(0,2)==="to"&&!l._prevtrace),u[b]=l):l._prevtrace=l._nexttrace=l._ownfill=null;return o}},39984:function(Q,z,t){var S=t(92770);Q.exports=function(k,l){l||(l=2);var T=k.marker,b=T.sizeref||1,d=T.sizemin||0,s=T.sizemode==="area"?function(e){return Math.sqrt(e/b)}:function(e){return e/b};return function(e){var i=s(e/l);return S(i)&&i>0?Math.max(i,d):0}}},4898:function(Q){Q.exports={container:"marker",min:"cmin",max:"cmax"}},49508:function(Q,z,t){var S=t(7901),k=t(52075).hasColorscale,l=t(1586),T=t(34098);Q.exports=function(b,d,s,e,i,r){var n=T.isBubble(b),a=(b.line||{}).color;r=r||{},a&&(s=a),i("marker.symbol"),i("marker.opacity",n?.7:1),i("marker.size"),r.noAngle||(i("marker.angle"),r.noAngleRef||i("marker.angleref"),r.noStandOff||i("marker.standoff")),i("marker.color",s),k(b,"marker")&&l(b,d,e,i,{prefix:"marker.",cLetter:"c"}),r.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),r.noLine||(i("marker.line.color",a&&!Array.isArray(a)&&d.marker.color!==a?a:n?S.background:S.defaultLine),k(b,"marker.line")&&l(b,d,e,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",n?1:0)),n&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),r.gradient&&i("marker.gradient.type")!=="none"&&i("marker.gradient.color")}},73927:function(Q,z,t){var S=t(71828).dateTick0,k=t(50606).ONEWEEK;function l(T,b){return S(b,T%k==0?1:0)}Q.exports=function(T,b,d,s,e){if(e||(e={x:!0,y:!0}),e.x){var i=s("xperiod");i&&(s("xperiod0",l(i,b.xcalendar)),s("xperiodalignment"))}if(e.y){var r=s("yperiod");r&&(s("yperiod0",l(r,b.ycalendar)),s("yperiodalignment"))}}},32663:function(Q,z,t){var S=t(39898),k=t(73972),l=t(71828),T=l.ensureSingle,b=l.identity,d=t(91424),s=t(34098),e=t(34621),i=t(68687),r=t(61082).tester;function n(a,o,u,p,c,x,g){var f,y=a._context.staticPlot;(function(me,Ee,be,De,Ue){var he=be.xaxis,ke=be.yaxis,_e=S.extent(l.simpleMap(he.range,he.r2c)),Ce=S.extent(l.simpleMap(ke.range,ke.r2c)),Fe=De[0].trace;if(s.hasMarkers(Fe)){var Re=Fe.marker.maxdisplayed;if(Re!==0){var He=De.filter(function(Ke){return Ke.x>=_e[0]&&Ke.x<=_e[1]&&Ke.y>=Ce[0]&&Ke.y<=Ce[1]}),Ge=Math.ceil(He.length/Re),$e=0;Ue.forEach(function(Ke,gt){var mt=Ke[0].trace;s.hasMarkers(mt)&&mt.marker.maxdisplayed>0&&gt<Ee&&$e++});var st=Math.round($e*Ge/3+Math.floor($e/3)*Ge/7.1);De.forEach(function(Ke){delete Ke.vis}),He.forEach(function(Ke,gt){Math.round((gt+st)%Ge)===0&&(Ke.vis=!0)})}}})(0,o,u,p,c);var v=!!g&&g.duration>0;function m(me){return v?me.transition():me}var _=u.xaxis,h=u.yaxis,A=p[0].trace,w=A.line,E=S.select(x),L=T(E,"g","errorbars"),C=T(E,"g","lines"),P=T(E,"g","points"),D=T(E,"g","text");if(k.getComponentMethod("errorbars","plot")(a,L,u,g),A.visible===!0){var G,I;m(E).style("opacity",A.opacity);var H=A.fill.charAt(A.fill.length-1);H!=="x"&&H!=="y"&&(H=""),p[0][u.isRangePlot?"nodeRangePlot3":"node3"]=E;var N,F,V="",q=[],te=A._prevtrace;te&&(V=te._prevRevpath||"",I=te._nextFill,q=te._polygons);var $,W,Z,J,ee,re,ae,oe="",ce="",pe=[],ve=l.noop;if(G=A._ownFill,s.hasLines(A)||A.fill!=="none"){for(I&&I.datum(p),["hv","vh","hvh","vhv"].indexOf(w.shape)!==-1?($=d.steps(w.shape),W=d.steps(w.shape.split("").reverse().join(""))):$=W=w.shape==="spline"?function(me){var Ee=me[me.length-1];return me.length>1&&me[0][0]===Ee[0]&&me[0][1]===Ee[1]?d.smoothclosed(me.slice(1),w.smoothing):d.smoothopen(me,w.smoothing)}:function(me){return"M"+me.join("L")},Z=function(me){return W(me.reverse())},pe=e(p,{xaxis:_,yaxis:h,trace:A,connectGaps:A.connectgaps,baseTolerance:Math.max(w.width||1,3)/4,shape:w.shape,backoff:w.backoff,simplify:w.simplify,fill:A.fill}),ae=A._polygons=new Array(pe.length),f=0;f<pe.length;f++)A._polygons[f]=r(pe[f]);pe.length&&(J=pe[0][0],re=(ee=pe[pe.length-1])[ee.length-1]),ve=function(me){return function(Ee){if(N=$(Ee),F=Z(Ee),oe?H?(oe+="L"+N.substr(1),ce=F+"L"+ce.substr(1)):(oe+="Z"+N,ce=F+"Z"+ce):(oe=N,ce=F),s.hasLines(A)){var be=S.select(this);if(be.datum(p),me)m(be.style("opacity",0).attr("d",N).call(d.lineGroupStyle)).style("opacity",1);else{var De=m(be);De.attr("d",N),d.singleLineStyle(p,De)}}}}}var we=C.selectAll(".js-line").data(pe);m(we.exit()).style("opacity",0).remove(),we.each(ve(!1)),we.enter().append("path").classed("js-line",!0).style("vector-effect",y?"none":"non-scaling-stroke").call(d.lineGroupStyle).each(ve(!0)),d.setClipUrl(we,u.layerClipId,a),pe.length?(G?(G.datum(p),J&&re&&(H?(H==="y"?J[1]=re[1]=h.c2p(0,!0):H==="x"&&(J[0]=re[0]=_.c2p(0,!0)),m(G).attr("d","M"+re+"L"+J+"L"+oe.substr(1)).call(d.singleFillStyle,a)):m(G).attr("d",oe+"Z").call(d.singleFillStyle,a))):I&&(A.fill.substr(0,6)==="tonext"&&oe&&V?(A.fill==="tonext"?m(I).attr("d",oe+"Z"+V+"Z").call(d.singleFillStyle,a):m(I).attr("d",oe+"L"+V.substr(1)+"Z").call(d.singleFillStyle,a),A._polygons=A._polygons.concat(q)):(ge(I),A._polygons=null)),A._prevRevpath=ce,A._prevPolygons=ae):(G?ge(G):I&&ge(I),A._polygons=A._prevRevpath=A._prevPolygons=null),P.datum(p),D.datum(p),function(me,Ee,be){var De,Ue=be[0].trace,he=s.hasMarkers(Ue),ke=s.hasText(Ue),_e=le(Ue),Ce=ne,Fe=ne;if(he||ke){var Re=b,He=Ue.stackgroup,Ge=He&&a._fullLayout._scatterStackOpts[_._id+h._id][He].stackgaps==="infer zero";Ue.marker.maxdisplayed||Ue._needsCull?Re=Ge?Ae:Oe:He&&!Ge&&(Re=Te),he&&(Ce=Re),ke&&(Fe=Re)}var $e,st=(De=me.selectAll("path.point").data(Ce,_e)).enter().append("path").classed("point",!0);v&&st.call(d.pointStyle,Ue,a).call(d.translatePoints,_,h).style("opacity",0).transition().style("opacity",1),De.order(),he&&($e=d.makePointStyleFns(Ue)),De.each(function(Ke){var gt=S.select(this),mt=m(gt);d.translatePoint(Ke,mt,_,h)?(d.singlePointStyle(Ke,mt,Ue,$e,a),u.layerClipId&&d.hideOutsideRangePoint(Ke,mt,_,h,Ue.xcalendar,Ue.ycalendar),Ue.customdata&&gt.classed("plotly-customdata",Ke.data!==null&&Ke.data!==void 0)):mt.remove()}),v?De.exit().transition().style("opacity",0).remove():De.exit().remove(),(De=Ee.selectAll("g").data(Fe,_e)).enter().append("g").classed("textpoint",!0).append("text"),De.order(),De.each(function(Ke){var gt=S.select(this),mt=m(gt.select("text"));d.translatePoint(Ke,mt,_,h)?u.layerClipId&&d.hideOutsideRangePoint(Ke,gt,_,h,Ue.xcalendar,Ue.ycalendar):gt.remove()}),De.selectAll("text").call(d.textPointStyle,Ue,a).each(function(Ke){var gt=_.c2p(Ke.x),mt=h.c2p(Ke.y);S.select(this).selectAll("tspan.line").each(function(){m(S.select(this)).attr({x:gt,y:mt})})}),De.exit().remove()}(P,D,p);var xe=A.cliponaxis===!1?null:u.layerClipId;d.setClipUrl(P,xe,a),d.setClipUrl(D,xe,a)}function ge(me){m(me).attr("d","M0,0Z")}function Oe(me){return me.filter(function(Ee){return!Ee.gap&&Ee.vis})}function Ae(me){return me.filter(function(Ee){return Ee.vis})}function Te(me){return me.filter(function(Ee){return!Ee.gap})}function se(me){return me.id}function le(me){if(me.ids)return se}function ne(){return!1}}Q.exports=function(a,o,u,p,c,x){var g,f,y=!c,v=!!c&&c.duration>0,m=i(a,o,u);(g=p.selectAll("g.trace").data(m,function(_){return _[0].trace.uid})).enter().append("g").attr("class",function(_){return"trace scatter trace"+_[0].trace.uid}).style("stroke-miterlimit",2),g.order(),function(_,h,A){h.each(function(w){var E=T(S.select(this),"g","fills");d.setClipUrl(E,A.layerClipId,_);var L=w[0].trace,C=[];L._ownfill&&C.push("_ownFill"),L._nexttrace&&C.push("_nextFill");var P=E.selectAll("g").data(C,b);P.enter().append("g"),P.exit().each(function(D){L[D]=null}).remove(),P.order().each(function(D){L[D]=T(S.select(this),"path","js-fill")})})}(a,g,o),v?(x&&(f=x()),S.transition().duration(c.duration).ease(c.easing).each("end",function(){f&&f()}).each("interrupt",function(){f&&f()}).each(function(){p.selectAll("g.trace").each(function(_,h){n(a,h,o,_,m,this,c)})})):g.each(function(_,h){n(a,h,o,_,m,this,c)}),y&&g.exit().remove(),p.selectAll("path:not([d])").remove()}},98002:function(Q,z,t){var S=t(34098);Q.exports=function(k,l){var T,b,d,s,e=k.cd,i=k.xaxis,r=k.yaxis,n=[],a=e[0].trace;if(!S.hasMarkers(a)&&!S.hasText(a))return[];if(l===!1)for(T=0;T<e.length;T++)e[T].selected=0;else for(T=0;T<e.length;T++)b=e[T],d=i.c2p(b.x),s=r.c2p(b.y),b.i!==null&&l.contains([d,s],!1,T,k)?(n.push({pointNumber:b.i,x:i.c2d(b.x),y:r.c2d(b.y)}),b.selected=1):b.selected=0;return n}},565:function(Q){var z=["orientation","groupnorm","stackgaps"];Q.exports=function(t,S,k,l){var T=k._scatterStackOpts,b=l("stackgroup");if(b){var d=S.xaxis+S.yaxis,s=T[d];s||(s=T[d]={});var e=s[b],i=!1;e?e.traces.push(S):(e=s[b]={traceIndices:[],traces:[S]},i=!0);for(var r={orientation:S.x&&!S.y?"h":"v"},n=0;n<z.length;n++){var a=z[n],o=a+"Found";if(!e[o]){var u=t[a]!==void 0,p=a==="orientation";if((u||i)&&(e[a]=l(a,r[a]),p&&(e.fillDflt=e[a]==="h"?"tonextx":"tonexty"),u&&(e[o]=!0,!i&&(delete e.traces[0][a],p))))for(var c=0;c<e.traces.length-1;c++){var x=e.traces[c];x._input.fill!==x.fill&&(x.fill=e.fillDflt)}}}return e}}},16296:function(Q,z,t){var S=t(39898),k=t(91424),l=t(73972);function T(d,s,e){k.pointStyle(d.selectAll("path.point"),s,e)}function b(d,s,e){k.textPointStyle(d.selectAll("text"),s,e)}Q.exports={style:function(d){var s=S.select(d).selectAll("g.trace.scatter");s.style("opacity",function(e){return e[0].trace.opacity}),s.selectAll("g.points").each(function(e){T(S.select(this),e.trace||e[0].trace,d)}),s.selectAll("g.text").each(function(e){b(S.select(this),e.trace||e[0].trace,d)}),s.selectAll("g.trace path.js-line").call(k.lineGroupStyle),s.selectAll("g.trace path.js-fill").call(k.fillGroupStyle,d),l.getComponentMethod("errorbars","style")(s)},stylePoints:T,styleText:b,styleOnSelect:function(d,s,e){var i=s[0].trace;i.selectedpoints?(k.selectedPointStyle(e.selectAll("path.point"),i),k.selectedTextStyle(e.selectAll("text"),i)):(T(e,i,d),b(e,i,d))}}},34098:function(Q,z,t){var S=t(71828);Q.exports={hasLines:function(k){return k.visible&&k.mode&&k.mode.indexOf("lines")!==-1},hasMarkers:function(k){return k.visible&&(k.mode&&k.mode.indexOf("markers")!==-1||k.type==="splom")},hasText:function(k){return k.visible&&k.mode&&k.mode.indexOf("text")!==-1},isBubble:function(k){return S.isPlainObject(k.marker)&&S.isArrayOrTypedArray(k.marker.size)}}},82410:function(Q,z,t){var S=t(71828);Q.exports=function(k,l,T,b,d){d=d||{},b("textposition"),S.coerceFont(b,"textfont",T.font),d.noSelect||(b("selected.textfont.color"),b("unselected.textfont.color"))}},67513:function(Q,z,t){var S=t(71828),k=t(73972);Q.exports=function(l,T,b,d){var s,e=d("x"),i=d("y");if(k.getComponentMethod("calendars","handleTraceDefaults")(l,T,["x","y"],b),e){var r=S.minRowLength(e);i?s=Math.min(r,S.minRowLength(i)):(s=r,d("y0"),d("dy"))}else{if(!i)return 0;s=S.minRowLength(i),d("x0"),d("dx")}return T._length=s,s}},44542:function(Q,z,t){var S=t(82196),k=t(50693),l=t(12663).axisHoverFormat,T=t(5386).fF,b=t(5386).si,d=t(9012),s=t(29659),e=t(87381),i=t(1426).extendFlat,r=t(30962).overrideAll,n=t(78607),a=S.line,o=S.marker,u=o.line,p=i({width:a.width,dash:{valType:"enumerated",values:n(s),dflt:"solid"}},k("line")),c=Q.exports=r({x:S.x,y:S.y,z:{valType:"data_array"},text:i({},S.text,{}),texttemplate:b({},{}),hovertext:i({},S.hovertext,{}),hovertemplate:T(),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),mode:i({},S.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:S.connectgaps,line:p,marker:i({symbol:{valType:"enumerated",values:n(e),dflt:"circle",arrayOk:!0},size:i({},o.size,{dflt:8}),sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,opacity:i({},o.opacity,{arrayOk:!1}),colorbar:o.colorbar,line:i({width:i({},u.width,{arrayOk:!1})},k("marker.line"))},k("marker")),textposition:i({},S.textposition,{dflt:"top center"}),textfont:{color:S.textfont.color,size:S.textfont.size,family:i({},S.textfont.family,{arrayOk:!1})},opacity:d.opacity,hoverinfo:i({},d.hoverinfo)},"calc","nested");c.x.editType=c.y.editType=c.z.editType="calc+clearAxisTypes"},36563:function(Q,z,t){var S=t(75225),k=t(36922);Q.exports=function(l,T){var b=[{x:!1,y:!1,trace:T,t:{}}];return S(b,T),k(l,T),b}},67336:function(Q,z,t){var S=t(73972);function k(l,T,b,d){if(!T||!T.visible)return null;for(var s=S.getComponentMethod("errorbars","makeComputeError")(T),e=new Array(l.length),i=0;i<l.length;i++){var r=s(+l[i],i);if(d.type==="log"){var n=d.c2l(l[i]),a=l[i]-r[0],o=l[i]+r[1];if(e[i]=[(d.c2l(a,!0)-n)*b,(d.c2l(o,!0)-n)*b],a>0){var u=d.c2l(a);d._lowerLogErrorBound||(d._lowerLogErrorBound=u),d._lowerErrorBound=Math.min(d._lowerLogErrorBound,u)}}else e[i]=[-r[0]*b,r[1]*b]}return e}Q.exports=function(l,T,b){var d=[k(l.x,l.error_x,T[0],b.xaxis),k(l.y,l.error_y,T[1],b.yaxis),k(l.z,l.error_z,T[2],b.zaxis)],s=function(o){for(var u=0;u<o.length;u++)if(o[u])return o[u].length;return 0}(d);if(s===0)return null;for(var e=new Array(s),i=0;i<s;i++){for(var r=[[0,0,0],[0,0,0]],n=0;n<3;n++)if(d[n])for(var a=0;a<2;a++)r[a][n]=d[n][i][a];e[i]=r}return e}},58925:function(Q,z,t){var S=t(9330).gl_line3d,k=t(9330).gl_scatter3d,l=t(9330).gl_error3d,T=t(9330).gl_mesh3d,b=t(9330).delaunay_triangulate,d=t(71828),s=t(78614),e=t(81697).formatColor,i=t(39984),r=t(29659),n=t(87381),a=t(89298),o=t(23469).appendArrayPointValue,u=t(67336);function p(h,A){this.scene=h,this.uid=A,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var c=p.prototype;function x(h){return h==null?0:h.indexOf("left")>-1?-1:h.indexOf("right")>-1?1:0}function g(h){return h==null?0:h.indexOf("top")>-1?-1:h.indexOf("bottom")>-1?1:0}function f(h,A){return A(4*h)}function y(h){return n[h]}function v(h,A,w,E,L){var C=null;if(d.isArrayOrTypedArray(h)){C=[];for(var P=0;P<A;P++)h[P]===void 0?C[P]=E:C[P]=w(h[P],L)}else C=w(h,d.identity);return C}function m(h){if(d.isArrayOrTypedArray(h)){var A=h[0];return d.isArrayOrTypedArray(A)&&(h=A),"rgb("+h.slice(0,3).map(function(w){return Math.round(255*w)})+")"}return null}function _(h){return d.isArrayOrTypedArray(h)?h.length===4&&typeof h[0]=="number"?m(h):h.map(m):null}c.handlePick=function(h){if(h.object&&(h.object===this.linePlot||h.object===this.delaunayMesh||h.object===this.textMarkers||h.object===this.scatterPlot)){var A=h.index=h.data.index;return h.object.highlight&&h.object.highlight(null),this.scatterPlot&&(h.object=this.scatterPlot,this.scatterPlot.highlight(h.data)),h.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[A]||this.textLabels[A]===0)&&(h.textLabel=this.textLabels[A]):h.textLabel=this.textLabels),h.traceCoordinate=[this.data.x[A],this.data.y[A],this.data.z[A]],!0}},c.update=function(h){var A,w,E,L,C=this.scene.glplot.gl,P=r.solid;this.data=h;var D=function(H,N){var F,V,q,te,$,W,Z=[],J=H.fullSceneLayout,ee=H.dataScale,re=J.xaxis,ae=J.yaxis,oe=J.zaxis,ce=N.marker,pe=N.line,ve=N.x||[],we=N.y||[],xe=N.z||[],ge=ve.length,Oe=N.xcalendar,Ae=N.ycalendar,Te=N.zcalendar;for($=0;$<ge;$++)F=re.d2l(ve[$],0,Oe)*ee[0],V=ae.d2l(we[$],0,Ae)*ee[1],q=oe.d2l(xe[$],0,Te)*ee[2],Z[$]=[F,V,q];if(Array.isArray(N.text))W=N.text;else if(N.text!==void 0)for(W=new Array(ge),$=0;$<ge;$++)W[$]=N.text;function se(He,Ge){var $e=J[He];return a.tickText($e,$e.d2l(Ge),!0).text}var le=N.texttemplate;if(le){var ne=H.fullLayout._d3locale,me=Array.isArray(le),Ee=me?Math.min(le.length,ge):ge,be=me?function(He){return le[He]}:function(){return le};for(W=new Array(Ee),$=0;$<Ee;$++){var De={x:ve[$],y:we[$],z:xe[$]},Ue={xLabel:se("xaxis",ve[$]),yLabel:se("yaxis",we[$]),zLabel:se("zaxis",xe[$])},he={};o(he,N,$);var ke=N._meta||{};W[$]=d.texttemplateString(be($),Ue,ne,he,De,ke)}}if(te={position:Z,mode:N.mode,text:W},"line"in N&&(te.lineColor=e(pe,1,ge),te.lineWidth=pe.width,te.lineDashes=pe.dash),"marker"in N){var _e=i(N);te.scatterColor=e(ce,1,ge),te.scatterSize=v(ce.size,ge,f,20,_e),te.scatterMarker=v(ce.symbol,ge,y,""),te.scatterLineWidth=ce.line.width,te.scatterLineColor=e(ce.line,1,ge),te.scatterAngle=0}"textposition"in N&&(te.textOffset=function(He){var Ge=[0,0];if(Array.isArray(He))for(var $e=0;$e<He.length;$e++)Ge[$e]=[0,0],He[$e]&&(Ge[$e][0]=x(He[$e]),Ge[$e][1]=g(He[$e]));else Ge[0]=x(He),Ge[1]=g(He);return Ge}(N.textposition),te.textColor=e(N.textfont,1,ge),te.textSize=v(N.textfont.size,ge,d.identity,12),te.textFont=N.textfont.family,te.textAngle=0);var Ce=["x","y","z"];for(te.project=[!1,!1,!1],te.projectScale=[1,1,1],te.projectOpacity=[1,1,1],$=0;$<3;++$){var Fe=N.projection[Ce[$]];(te.project[$]=Fe.show)&&(te.projectOpacity[$]=Fe.opacity,te.projectScale[$]=Fe.scale)}te.errorBounds=u(N,ee,J);var Re=function(He){for(var Ge=[0,0,0],$e=[[0,0,0],[0,0,0],[0,0,0]],st=[1,1,1],Ke=0;Ke<3;Ke++){var gt=He[Ke];gt&&gt.copy_zstyle!==!1&&He[2].visible!==!1&&(gt=He[2]),gt&&gt.visible&&(Ge[Ke]=gt.width/2,$e[Ke]=s(gt.color),st[Ke]=gt.thickness)}return{capSize:Ge,color:$e,lineWidth:st}}([N.error_x,N.error_y,N.error_z]);return te.errorColor=Re.color,te.errorLineWidth=Re.lineWidth,te.errorCapSize=Re.capSize,te.delaunayAxis=N.surfaceaxis,te.delaunayColor=s(N.surfacecolor),te}(this.scene,h);"mode"in D&&(this.mode=D.mode),"lineDashes"in D&&D.lineDashes in r&&(P=r[D.lineDashes]),this.color=_(D.scatterColor)||_(D.lineColor),this.dataPoints=D.position,A={gl:this.scene.glplot.gl,position:D.position,color:D.lineColor,lineWidth:D.lineWidth||1,dashes:P[0],dashScale:P[1],opacity:h.opacity,connectGaps:h.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(A):(this.linePlot=S(A),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var G=h.opacity;if(h.marker&&h.marker.opacity!==void 0&&(G*=h.marker.opacity),w={gl:this.scene.glplot.gl,position:D.position,color:D.scatterColor,size:D.scatterSize,glyph:D.scatterMarker,opacity:G,orthographic:!0,lineWidth:D.scatterLineWidth,lineColor:D.scatterLineColor,project:D.project,projectScale:D.projectScale,projectOpacity:D.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(w):(this.scatterPlot=k(w),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),L={gl:this.scene.glplot.gl,position:D.position,glyph:D.text,color:D.textColor,size:D.textSize,angle:D.textAngle,alignment:D.textOffset,font:D.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:h.opacity},this.textLabels=h.hovertext||h.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(L):(this.textMarkers=k(L),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),E={gl:this.scene.glplot.gl,position:D.position,color:D.errorColor,error:D.errorBounds,lineWidth:D.errorLineWidth,capSize:D.errorCapSize,opacity:h.opacity},this.errorBars?D.errorBounds?this.errorBars.update(E):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):D.errorBounds&&(this.errorBars=l(E),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),D.delaunayAxis>=0){var I=function(H,N,F){var V,q=(F+1)%3,te=(F+2)%3,$=[],W=[];for(V=0;V<H.length;++V){var Z=H[V];!isNaN(Z[q])&&isFinite(Z[q])&&!isNaN(Z[te])&&isFinite(Z[te])&&($.push([Z[q],Z[te]]),W.push(V))}var J=b($);for(V=0;V<J.length;++V)for(var ee=J[V],re=0;re<ee.length;++re)ee[re]=W[ee[re]];return{positions:H,cells:J,meshColor:N}}(D.position,D.delaunayColor,D.delaunayAxis);I.opacity=h.opacity,this.delaunayMesh?this.delaunayMesh.update(I):(I.gl=C,this.delaunayMesh=T(I),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},c.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},Q.exports=function(h,A){var w=new p(h,A.uid);return w.update(A),w}},21428:function(Q,z,t){var S=t(73972),k=t(71828),l=t(34098),T=t(49508),b=t(11058),d=t(82410),s=t(44542);Q.exports=function(e,i,r,n){function a(y,v){return k.coerce(e,i,s,y,v)}var o=function(y,v,m,_){var h=0,A=m("x"),w=m("y"),E=m("z");return S.getComponentMethod("calendars","handleTraceDefaults")(y,v,["x","y","z"],_),A&&w&&E&&(h=Math.min(A.length,w.length,E.length),v._length=v._xlength=v._ylength=v._zlength=h),h}(e,i,a,n);if(o){a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),a("mode"),l.hasLines(i)&&(a("connectgaps"),b(e,i,r,n,a)),l.hasMarkers(i)&&T(e,i,r,n,a,{noSelect:!0,noAngle:!0}),l.hasText(i)&&(a("texttemplate"),d(e,i,n,a,{noSelect:!0}));var u=(i.line||{}).color,p=(i.marker||{}).color;a("surfaceaxis")>=0&&a("surfacecolor",u||p);for(var c=["x","y","z"],x=0;x<3;++x){var g="projection."+c[x];a(g+".show")&&(a(g+".opacity"),a(g+".scale"))}var f=S.getComponentMethod("errorbars","supplyDefaults");f(e,i,u||p||r,{axis:"z"}),f(e,i,u||p||r,{axis:"y",inherit:"z"}),f(e,i,u||p||r,{axis:"x",inherit:"z"})}else i.visible=!1}},13551:function(Q,z,t){Q.exports={plot:t(58925),attributes:t(44542),markerSymbols:t(87381),supplyDefaults:t(21428),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:t(36563),moduleType:"trace",name:"scatter3d",basePlotModule:t(58547),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},97001:function(Q,z,t){var S=t(82196),k=t(9012),l=t(5386).fF,T=t(5386).si,b=t(50693),d=t(1426).extendFlat,s=S.marker,e=S.line,i=s.line;Q.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:d({},S.mode,{dflt:"markers"}),text:d({},S.text,{}),texttemplate:T({editType:"plot"},{keys:["a","b","text"]}),hovertext:d({},S.hovertext,{}),line:{color:e.color,width:e.width,dash:e.dash,backoff:e.backoff,shape:d({},e.shape,{values:["linear","spline"]}),smoothing:e.smoothing,editType:"calc"},connectgaps:S.connectgaps,fill:d({},S.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:S.fillcolor,marker:d({symbol:s.symbol,opacity:s.opacity,maxdisplayed:s.maxdisplayed,angle:s.angle,angleref:s.angleref,standoff:s.standoff,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode,line:d({width:i.width,editType:"calc"},b("marker.line")),gradient:s.gradient,editType:"calc"},b("marker")),textfont:S.textfont,textposition:S.textposition,selected:S.selected,unselected:S.unselected,hoverinfo:d({},k.hoverinfo,{flags:["a","b","text","name"]}),hoveron:S.hoveron,hovertemplate:l()}},34618:function(Q,z,t){var S=t(92770),k=t(36922),l=t(75225),T=t(66279),b=t(47761).calcMarkerSize,d=t(22882);Q.exports=function(s,e){var i=e._carpetTrace=d(s,e);if(i&&i.visible&&i.visible!=="legendonly"){var r;e.xaxis=i.xaxis,e.yaxis=i.yaxis;var n,a,o=e._length,u=new Array(o),p=!1;for(r=0;r<o;r++)if(n=e.a[r],a=e.b[r],S(n)&&S(a)){var c=i.ab2xy(+n,+a,!0),x=i.isVisible(+n,+a);x||(p=!0),u[r]={x:c[0],y:c[1],a:n,b:a,vis:x}}else u[r]={x:!1,y:!1};return e._needsCull=p,u[0].carpet=i,u[0].trace=e,b(e,o),k(s,e),l(u,e),T(u,e),u}}},98965:function(Q,z,t){var S=t(71828),k=t(47581),l=t(34098),T=t(49508),b=t(11058),d=t(94039),s=t(82410),e=t(28908),i=t(97001);Q.exports=function(r,n,a,o){function u(f,y){return S.coerce(r,n,i,f,y)}u("carpet"),n.xaxis="x",n.yaxis="y";var p=u("a"),c=u("b"),x=Math.min(p.length,c.length);if(x){n._length=x,u("text"),u("texttemplate"),u("hovertext"),u("mode",x<k.PTS_LINESONLY?"lines+markers":"lines"),l.hasLines(n)&&(b(r,n,a,o,u,{backoff:!0}),d(r,n,u),u("connectgaps")),l.hasMarkers(n)&&T(r,n,a,o,u,{gradient:!0}),l.hasText(n)&&s(r,n,o,u);var g=[];(l.hasMarkers(n)||l.hasText(n))&&(u("marker.maxdisplayed"),g.push("points")),u("fill"),n.fill!=="none"&&(e(r,n,a,u),l.hasLines(n)||d(r,n,u)),n.fill!=="tonext"&&n.fill!=="toself"||g.push("fills"),u("hoveron",g.join("+")||"points")!=="fills"&&u("hovertemplate"),S.coerceSelectionMarkerOpacity(n,u)}else n.visible=!1}},16165:function(Q){Q.exports=function(z,t,S,k,l){var T=k[l];return z.a=T.a,z.b=T.b,z.y=T.y,z}},48953:function(Q){Q.exports=function(z,t){var S={},k=t._carpet,l=k.ab2ij([z.a,z.b]),T=Math.floor(l[0]),b=l[0]-T,d=Math.floor(l[1]),s=l[1]-d,e=k.evalxy([],T,d,b,s);return S.yLabel=e[1].toFixed(3),S}},22931:function(Q,z,t){var S=t(33720),k=t(71828).fillText;Q.exports=function(l,T,b,d){var s=S(l,T,b,d);if(s&&s[0].index!==!1){var e=s[0];if(e.index===void 0){var i=1-e.y0/l.ya._length,r=l.xa._length,n=r*i/2,a=r-n;return e.x0=Math.max(Math.min(e.x0,a),n),e.x1=Math.max(Math.min(e.x1,a),n),s}var o=e.cd[e.index];e.a=o.a,e.b=o.b,e.xLabelVal=void 0,e.yLabelVal=void 0;var u=e.trace,p=u._carpet,c=u._module.formatLabels(o,u);e.yLabel=c.yLabel,delete e.text;var x=[];if(!u.hovertemplate){var g=(o.hi||u.hoverinfo).split("+");g.indexOf("all")!==-1&&(g=["a","b","text"]),g.indexOf("a")!==-1&&f(p.aaxis,o.a),g.indexOf("b")!==-1&&f(p.baxis,o.b),x.push("y: "+e.yLabel),g.indexOf("text")!==-1&&k(o,u,x),e.extraText=x.join("<br>")}return s}function f(y,v){var m;m=y.labelprefix&&y.labelprefix.length>0?y.labelprefix.replace(/ = $/,""):y._hovertitle,x.push(m+": "+v.toFixed(3)+y.labelsuffix)}}},46858:function(Q,z,t){Q.exports={attributes:t(97001),supplyDefaults:t(98965),colorbar:t(4898),formatLabels:t(48953),calc:t(34618),plot:t(1913),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(22931),selectPoints:t(98002),eventData:t(16165),moduleType:"trace",name:"scattercarpet",basePlotModule:t(93612),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},1913:function(Q,z,t){var S=t(32663),k=t(89298),l=t(91424);Q.exports=function(T,b,d,s){var e,i,r,n=d[0][0].carpet,a=k.getFromId(T,n.xaxis||"x"),o=k.getFromId(T,n.yaxis||"y"),u={xaxis:a,yaxis:o,plot:b.plot};for(e=0;e<d.length;e++)(i=d[e][0].trace)._xA=a,i._yA=o;for(S(T,u,d,s),e=0;e<d.length;e++)i=d[e][0].trace,r=s.selectAll("g.trace"+i.uid+" .js-line"),l.setClipUrl(r,d[e][0].carpet._clipPathId,T)}},19316:function(Q,z,t){var S=t(5386).fF,k=t(5386).si,l=t(82196),T=t(9012),b=t(50693),d=t(79952).P,s=t(1426).extendFlat,e=t(30962).overrideAll,i=l.marker,r=l.line,n=i.line;Q.exports=e({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:s({},l.mode,{dflt:"markers"}),text:s({},l.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:s({},l.hovertext,{}),textfont:l.textfont,textposition:l.textposition,line:{color:r.color,width:r.width,dash:d},connectgaps:l.connectgaps,marker:s({symbol:i.symbol,opacity:i.opacity,angle:i.angle,angleref:s({},i.angleref,{values:["previous","up","north"]}),standoff:i.standoff,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,colorbar:i.colorbar,line:s({width:n.width},b("marker.line")),gradient:i.gradient},b("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:l.fillcolor,selected:l.selected,unselected:l.unselected,hoverinfo:s({},T.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:S()},"calc","nested")},84622:function(Q,z,t){var S=t(92770),k=t(50606).BADNUM,l=t(36922),T=t(75225),b=t(66279),d=t(71828)._;function s(e){return e&&typeof e=="string"}Q.exports=function(e,i){var r,n=Array.isArray(i.locations),a=n?i.locations.length:i._length,o=new Array(a);r=i.geojson?function(f){return s(f)||S(f)}:s;for(var u=0;u<a;u++){var p=o[u]={};if(n){var c=i.locations[u];p.loc=r(c)?c:null}else{var x=i.lon[u],g=i.lat[u];S(x)&&S(g)?p.lonlat=[+x,+g]:p.lonlat=[k,k]}}return T(o,i),l(e,i),b(o,i),a&&(o[0].t={labels:{lat:d(e,"lat:")+" ",lon:d(e,"lon:")+" "}}),o}},10659:function(Q,z,t){var S=t(71828),k=t(34098),l=t(49508),T=t(11058),b=t(82410),d=t(28908),s=t(19316);Q.exports=function(e,i,r,n){function a(f,y){return S.coerce(e,i,s,f,y)}var o,u=a("locations");if(u&&u.length){var p,c=a("geojson");(typeof c=="string"&&c!==""||S.isPlainObject(c))&&(p="geojson-id"),a("locationmode",p)==="geojson-id"&&a("featureidkey"),o=u.length}else{var x=a("lon")||[],g=a("lat")||[];o=Math.min(x.length,g.length)}o?(i._length=o,a("text"),a("hovertext"),a("hovertemplate"),a("mode"),k.hasLines(i)&&(T(e,i,r,n,a),a("connectgaps")),k.hasMarkers(i)&&l(e,i,r,n,a,{gradient:!0}),k.hasText(i)&&(a("texttemplate"),b(e,i,n,a)),a("fill"),i.fill!=="none"&&d(e,i,r,a),S.coerceSelectionMarkerOpacity(i,a)):i.visible=!1}},84084:function(Q){Q.exports=function(z,t,S,k,l){z.lon=t.lon,z.lat=t.lat,z.location=t.loc?t.loc:null;var T=k[l];return T.fIn&&T.fIn.properties&&(z.properties=T.fIn.properties),z}},82719:function(Q,z,t){var S=t(89298);Q.exports=function(k,l,T){var b={},d=T[l.geo]._subplot.mockAxis,s=k.lonlat;return b.lonLabel=S.tickText(d,d.c2l(s[0]),!0).text,b.latLabel=S.tickText(d,d.c2l(s[1]),!0).text,b}},14977:function(Q,z,t){var S=t(30211),k=t(50606).BADNUM,l=t(34603),T=t(71828).fillText,b=t(19316);Q.exports=function(d,s,e){var i=d.cd,r=i[0].trace,n=d.xa,a=d.ya,o=d.subplot,u=o.projection.isLonLatOverEdges,p=o.project;if(S.getClosest(i,function(m){var _=m.lonlat;if(_[0]===k||u(_))return 1/0;var h=p(_),A=p([s,e]),w=Math.abs(h[0]-A[0]),E=Math.abs(h[1]-A[1]),L=Math.max(3,m.mrc||0);return Math.max(Math.sqrt(w*w+E*E)-L,1-3/L)},d),d.index!==!1){var c=i[d.index],x=c.lonlat,g=[n.c2p(x),a.c2p(x)],f=c.mrc||1;d.x0=g[0]-f,d.x1=g[0]+f,d.y0=g[1]-f,d.y1=g[1]+f,d.loc=c.loc,d.lon=x[0],d.lat=x[1];var y={};y[r.geo]={_subplot:o};var v=r._module.formatLabels(c,r,y);return d.lonLabel=v.lonLabel,d.latLabel=v.latLabel,d.color=l(r,c),d.extraText=function(m,_,h,A){if(!m.hovertemplate){var w=_.hi||m.hoverinfo,E=w==="all"?b.hoverinfo.flags:w.split("+"),L=E.indexOf("location")!==-1&&Array.isArray(m.locations),C=E.indexOf("lon")!==-1,P=E.indexOf("lat")!==-1,D=E.indexOf("text")!==-1,G=[];return L?G.push(_.loc):C&&P?G.push("("+I(h.latLabel)+", "+I(h.lonLabel)+")"):C?G.push(A.lon+I(h.lonLabel)):P&&G.push(A.lat+I(h.latLabel)),D&&T(_,m,G),G.join("<br>")}function I(H){return H+""}}(r,c,d,i[0].t.labels),d.hovertemplate=r.hovertemplate,[d]}}},17988:function(Q,z,t){Q.exports={attributes:t(19316),supplyDefaults:t(10659),colorbar:t(4898),formatLabels:t(82719),calc:t(84622),calcGeoJSON:t(89171).calcGeoJSON,plot:t(89171).plot,style:t(33095),styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(14977),eventData:t(84084),selectPoints:t(20548),moduleType:"trace",name:"scattergeo",basePlotModule:t(44622),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},89171:function(Q,z,t){var S=t(39898),k=t(71828),l=t(90973).getTopojsonFeatures,T=t(18214),b=t(41327),d=t(71739).findExtremes,s=t(50606).BADNUM,e=t(47761).calcMarkerSize,i=t(34098),r=t(33095);Q.exports={calcGeoJSON:function(n,a){var o,u,p=n[0].trace,c=a[p.geo],x=c._subplot,g=p._length;if(Array.isArray(p.locations)){var f=p.locationmode,y=f==="geojson-id"?b.extractTraceFeature(n):l(p,x.topojson);for(o=0;o<g;o++){u=n[o];var v=f==="geojson-id"?u.fOut:b.locationToFeature(f,u.loc,y);u.lonlat=v?v.properties.ct:[s,s]}}var m,_,h={padded:!0};if(c.fitbounds==="geojson"&&p.locationmode==="geojson-id"){var A=b.computeBbox(b.getTraceGeojson(p));m=[A[0],A[2]],_=[A[1],A[3]]}else{for(m=new Array(g),_=new Array(g),o=0;o<g;o++)u=n[o],m[o]=u.lonlat[0],_[o]=u.lonlat[1];h.ppad=e(p,g)}p._extremes.lon=d(c.lonaxis._ax,m,h),p._extremes.lat=d(c.lataxis._ax,_,h)},plot:function(n,a,o){var u=a.layers.frontplot.select(".scatterlayer"),p=k.makeTraceGroups(u,o,"trace scattergeo");function c(x,g){x.lonlat[0]===s&&S.select(g).remove()}p.selectAll("*").remove(),p.each(function(x){var g=S.select(this),f=x[0].trace;if(i.hasLines(f)||f.fill!=="none"){var y=T.calcTraceToLineCoords(x),v=f.fill!=="none"?T.makePolygon(y):T.makeLine(y);g.selectAll("path.js-line").data([{geojson:v,trace:f}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}i.hasMarkers(f)&&g.selectAll("path.point").data(k.identity).enter().append("path").classed("point",!0).each(function(m){c(m,this)}),i.hasText(f)&&g.selectAll("g").data(k.identity).enter().append("g").append("text").each(function(m){c(m,this)}),r(n,x)})}}},20548:function(Q,z,t){var S=t(34098),k=t(50606).BADNUM;Q.exports=function(l,T){var b,d,s,e,i,r=l.cd,n=l.xaxis,a=l.yaxis,o=[],u=r[0].trace;if(!S.hasMarkers(u)&&!S.hasText(u))return[];if(T===!1)for(i=0;i<r.length;i++)r[i].selected=0;else for(i=0;i<r.length;i++)(d=(b=r[i]).lonlat)[0]!==k&&(s=n.c2p(d),e=a.c2p(d),T.contains([s,e],null,i,l)?(o.push({pointNumber:i,lon:d[0],lat:d[1]}),b.selected=1):b.selected=0);return o}},33095:function(Q,z,t){var S=t(39898),k=t(91424),l=t(7901),T=t(16296),b=T.stylePoints,d=T.styleText;Q.exports=function(s,e){e&&function(i,r){var n=r[0].trace,a=r[0].node3;a.style("opacity",r[0].trace.opacity),b(a,n,i),d(a,n,i),a.selectAll("path.js-line").style("fill","none").each(function(o){var u=S.select(this),p=o.trace,c=p.line||{};u.call(l.stroke,c.color).call(k.dashLine,c.dash||"",c.width||0),p.fill!=="none"&&u.call(l.fill,p.fillcolor)})}(s,e)}},42341:function(Q,z,t){var S=t(9012),k=t(82196),l=t(12663).axisHoverFormat,T=t(50693),b=t(78607),d=t(1426).extendFlat,s=t(30962).overrideAll,e=t(78232).DASHES,i=k.line,r=k.marker,n=r.line,a=Q.exports=s({x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),text:k.text,hovertext:k.hovertext,textposition:k.textposition,textfont:k.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:i.color,width:i.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:b(e),dflt:"solid"}},marker:d({},T("marker"),{symbol:r.symbol,angle:r.angle,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:d({},T("marker.line"),{width:n.width})}),connectgaps:k.connectgaps,fill:d({},k.fill,{dflt:"none"}),fillcolor:k.fillcolor,selected:{marker:k.selected.marker,textfont:k.selected.textfont},unselected:{marker:k.unselected.marker,textfont:k.unselected.textfont},opacity:S.opacity},"calc","nested");a.x.editType=a.y.editType=a.x0.editType=a.y0.editType="calc+clearAxisTypes",a.hovertemplate=k.hovertemplate,a.texttemplate=k.texttemplate},72156:function(Q,z,t){var S=t(20794);Q.exports={moduleType:"trace",name:"scattergl",basePlotModule:t(93612),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:t(42341),supplyDefaults:t(47148),crossTraceDefaults:t(34936),colorbar:t(4898),formatLabels:t(68101),calc:t(45032),hoverPoints:S.hoverPoints,selectPoints:t(58147),meta:{}}},45032:function(Q,z,t){var S=t(88294),k=t(71828),l=t(41675),T=t(71739).findExtremes,b=t(42973),d=t(47761),s=d.calcMarkerSize,e=d.calcAxisExpansion,i=d.setFirstScatter,r=t(36922),n=t(19635),a=t(38967),o=t(50606).BADNUM,u=t(78232).TOO_MANY_POINTS;function p(c,x,g){var f=c._extremes[x._id],y=T(x,g._bnds,{padded:!0});f.min=f.min.concat(y.min),f.max=f.max.concat(y.max)}Q.exports=function(c,x){var g,f=c._fullLayout,y=x._xA=l.getFromId(c,x.xaxis,"x"),v=x._yA=l.getFromId(c,x.yaxis,"y"),m=f._plots[x.xaxis+x.yaxis],_=x._length,h=_>=u,A=2*_,w={},E=y.makeCalcdata(x,"x"),L=v.makeCalcdata(x,"y"),C=b(x,y,"x",E),P=b(x,v,"y",L),D=C.vals,G=P.vals;x._x=D,x._y=G,x.xperiodalignment&&(x._origX=E,x._xStarts=C.starts,x._xEnds=C.ends),x.yperiodalignment&&(x._origY=L,x._yStarts=P.starts,x._yEnds=P.ends);var I=new Array(A),H=new Array(_);for(g=0;g<_;g++)I[2*g]=D[g]===o?NaN:D[g],I[2*g+1]=G[g]===o?NaN:G[g],H[g]=g;if(y.type==="log")for(g=0;g<A;g+=2)I[g]=y.c2l(I[g]);if(v.type==="log")for(g=1;g<A;g+=2)I[g]=v.c2l(I[g]);h&&y.type!=="log"&&v.type!=="log"?w.tree=S(I):w.ids=H,r(c,x);var N,F=function(q,te,$,W,Z,J){var ee=n.style(q,$);if(ee.marker&&(ee.marker.positions=W),ee.line&&W.length>1&&k.extendFlat(ee.line,n.linePositions(q,$,W)),ee.errorX||ee.errorY){var re=n.errorBarPositions(q,$,W,Z,J);ee.errorX&&k.extendFlat(ee.errorX,re.x),ee.errorY&&k.extendFlat(ee.errorY,re.y)}return ee.text&&(k.extendFlat(ee.text,{positions:W},n.textPosition(q,$,ee.text,ee.marker)),k.extendFlat(ee.textSel,{positions:W},n.textPosition(q,$,ee.text,ee.markerSel)),k.extendFlat(ee.textUnsel,{positions:W},n.textPosition(q,$,ee.text,ee.markerUnsel))),ee}(c,0,x,I,D,G),V=a(c,m);return i(f,x),h?F.marker&&(N=F.marker.sizeAvg||Math.max(F.marker.size,3)):N=s(x,_),e(c,x,y,v,D,G,N),F.errorX&&p(x,y,F.errorX),F.errorY&&p(x,v,F.errorY),F.fill&&!V.fill2d&&(V.fill2d=!0),F.marker&&!V.scatter2d&&(V.scatter2d=!0),F.line&&!V.line2d&&(V.line2d=!0),!F.errorX&&!F.errorY||V.error2d||(V.error2d=!0),F.text&&!V.glText&&(V.glText=!0),F.marker&&(F.marker.snap=_),V.lineOptions.push(F.line),V.errorXOptions.push(F.errorX),V.errorYOptions.push(F.errorY),V.fillOptions.push(F.fill),V.markerOptions.push(F.marker),V.markerSelectedOptions.push(F.markerSel),V.markerUnselectedOptions.push(F.markerUnsel),V.textOptions.push(F.text),V.textSelectedOptions.push(F.textSel),V.textUnselectedOptions.push(F.textUnsel),V.selectBatch.push([]),V.unselectBatch.push([]),w._scene=V,w.index=V.count,w.x=D,w.y=G,w.positions=I,V.count++,[{x:!1,y:!1,t:w,trace:x}]}},78232:function(Q){Q.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},19635:function(Q,z,t){var S=t(92770),k=t(82019),l=t(25075),T=t(73972),b=t(71828),d=t(91424),s=t(41675),e=t(81697).formatColor,i=t(34098),r=t(39984),n=t(68645),a=t(78232),o=t(37822).DESELECTDIM,u={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},p=t(23469).appendArrayPointValue;function c(E,L){var C,P=E._fullLayout,D=L._length,G=L.textfont,I=L.textposition,H=Array.isArray(I)?I:[I],N=G.color,F=G.size,V=G.family,q={},te=E._context.plotGlPixelRatio,$=L.texttemplate;if($){q.text=[];var W=P._d3locale,Z=Array.isArray($),J=Z?Math.min($.length,D):D,ee=Z?function(we){return $[we]}:function(){return $};for(C=0;C<J;C++){var re={i:C},ae=L._module.formatLabels(re,L,P),oe={};p(oe,L,C);var ce=L._meta||{};q.text.push(b.texttemplateString(ee(C),ae,W,oe,re,ce))}}else Array.isArray(L.text)&&L.text.length<D?q.text=L.text.slice():q.text=L.text;if(Array.isArray(q.text))for(C=q.text.length;C<D;C++)q.text[C]="";for(q.opacity=L.opacity,q.font={},q.align=[],q.baseline=[],C=0;C<H.length;C++){var pe=H[C].split(/\s+/);switch(pe[1]){case"left":q.align.push("right");break;case"right":q.align.push("left");break;default:q.align.push(pe[1])}switch(pe[0]){case"top":q.baseline.push("bottom");break;case"bottom":q.baseline.push("top");break;default:q.baseline.push(pe[0])}}if(Array.isArray(N))for(q.color=new Array(D),C=0;C<D;C++)q.color[C]=N[C];else q.color=N;if(b.isArrayOrTypedArray(F)||Array.isArray(V))for(q.font=new Array(D),C=0;C<D;C++){var ve=q.font[C]={};ve.size=(b.isTypedArray(F)?F[C]:Array.isArray(F)?S(F[C])?F[C]:0:F)*te,ve.family=Array.isArray(V)?V[C]:V}else q.font={size:F*te,family:V};return q}function x(E,L){var C,P,D=L._length,G=L.marker,I={},H=b.isArrayOrTypedArray(G.symbol),N=b.isArrayOrTypedArray(G.angle),F=b.isArrayOrTypedArray(G.color),V=b.isArrayOrTypedArray(G.line.color),q=b.isArrayOrTypedArray(G.opacity),te=b.isArrayOrTypedArray(G.size),$=b.isArrayOrTypedArray(G.line.width);if(H||(P=n.isOpenSymbol(G.symbol)),H||F||V||q||N){I.symbols=new Array(D),I.angles=new Array(D),I.colors=new Array(D),I.borderColors=new Array(D);var W=G.symbol,Z=G.angle,J=e(G,G.opacity,D),ee=e(G.line,G.opacity,D);if(!Array.isArray(ee[0])){var re=ee;for(ee=Array(D),C=0;C<D;C++)ee[C]=re}if(!Array.isArray(J[0])){var ae=J;for(J=Array(D),C=0;C<D;C++)J[C]=ae}if(!Array.isArray(W)){var oe=W;for(W=Array(D),C=0;C<D;C++)W[C]=oe}if(!Array.isArray(Z)){var ce=Z;for(Z=Array(D),C=0;C<D;C++)Z[C]=ce}for(I.symbols=W,I.angles=Z,I.colors=J,I.borderColors=ee,C=0;C<D;C++)H&&(P=n.isOpenSymbol(G.symbol[C])),P&&(ee[C]=J[C].slice(),J[C]=J[C].slice(),J[C][3]=0);for(I.opacity=L.opacity,I.markers=new Array(D),C=0;C<D;C++)I.markers[C]=w({mx:I.symbols[C],ma:I.angles[C]},L)}else P?(I.color=l(G.color,"uint8"),I.color[3]=0,I.borderColor=l(G.color,"uint8")):(I.color=l(G.color,"uint8"),I.borderColor=l(G.line.color,"uint8")),I.opacity=L.opacity*G.opacity,I.marker=w({mx:G.symbol,ma:G.angle},L);var pe,ve=r(L,1);if(te||$){var we,xe=I.sizes=new Array(D),ge=I.borderSizes=new Array(D),Oe=0;if(te){for(C=0;C<D;C++)xe[C]=ve(G.size[C]),Oe+=xe[C];we=Oe/D}else for(pe=ve(G.size),C=0;C<D;C++)xe[C]=pe;if($)for(C=0;C<D;C++)ge[C]=G.line.width[C];else for(pe=G.line.width,C=0;C<D;C++)ge[C]=pe;I.sizeAvg=we}else I.size=ve(G&&G.size||10),I.borderSizes=ve(G.line.width);return I}function g(E,L,C){var P=L.marker,D={};return C&&(C.marker&&C.marker.symbol?D=x(0,b.extendFlat({},P,C.marker)):C.marker&&(C.marker.size&&(D.size=C.marker.size),C.marker.color&&(D.colors=C.marker.color),C.marker.opacity!==void 0&&(D.opacity=C.marker.opacity))),D}function f(E,L,C){var P={};if(!C)return P;if(C.textfont){var D={opacity:1,text:L.text,texttemplate:L.texttemplate,textposition:L.textposition,textfont:b.extendFlat({},L.textfont)};C.textfont&&b.extendFlat(D.textfont,C.textfont),P=c(E,D)}return P}function y(E,L,C){var P={capSize:2*L.width*C,lineWidth:L.thickness*C,color:L.color};return L.copy_ystyle&&(P=E.error_y),P}var v=a.SYMBOL_SDF_SIZE,m=a.SYMBOL_SIZE,_=a.SYMBOL_STROKE,h={},A=d.symbolFuncs[0](.05*m);function w(E,L){var C,P,D=E.mx;if(D==="circle")return null;var G=d.symbolNumber(D),I=d.symbolFuncs[G%100],H=!!d.symbolNoDot[G%100],N=!!d.symbolNoFill[G%100],F=n.isDotSymbol(D);if(E.ma&&(D+="_"+E.ma),h[D])return h[D];var V=d.getMarkerAngle(E,L);return C=F&&!H?I(1.1*m,V)+A:I(m,V),P=k(C,{w:v,h:v,viewBox:[-m,-m,m,m],stroke:N?_:-_}),h[D]=P,P||null}Q.exports={style:function(E,L){var C,P={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},D=E._context.plotGlPixelRatio;if(L.visible!==!0)return P;if(i.hasText(L)&&(P.text=c(E,L),P.textSel=f(E,L,L.selected),P.textUnsel=f(E,L,L.unselected)),i.hasMarkers(L)&&(P.marker=x(0,L),P.markerSel=g(0,L,L.selected),P.markerUnsel=g(0,L,L.unselected),!L.unselected&&b.isArrayOrTypedArray(L.marker.opacity))){var G=L.marker.opacity;for(P.markerUnsel.opacity=new Array(G.length),C=0;C<G.length;C++)P.markerUnsel.opacity[C]=o*G[C]}if(i.hasLines(L)){P.line={overlay:!0,thickness:L.line.width*D,color:L.line.color,opacity:L.opacity};var I=(a.DASHES[L.line.dash]||[1]).slice();for(C=0;C<I.length;++C)I[C]*=L.line.width*D;P.line.dashes=I}return L.error_x&&L.error_x.visible&&(P.errorX=y(L,L.error_x,D)),L.error_y&&L.error_y.visible&&(P.errorY=y(L,L.error_y,D)),L.fill&&L.fill!=="none"&&(P.fill={closed:!0,fill:L.fillcolor,thickness:0}),P},markerStyle:x,markerSelection:g,linePositions:function(E,L,C){var P,D,G=C.length,I=G/2;if(i.hasLines(L)&&I)if(L.line.shape==="hv"){for(P=[],D=0;D<I-1;D++)isNaN(C[2*D])||isNaN(C[2*D+1])?P.push(NaN,NaN,NaN,NaN):(P.push(C[2*D],C[2*D+1]),isNaN(C[2*D+2])||isNaN(C[2*D+3])?P.push(NaN,NaN):P.push(C[2*D+2],C[2*D+1]));P.push(C[G-2],C[G-1])}else if(L.line.shape==="hvh"){for(P=[],D=0;D<I-1;D++)if(isNaN(C[2*D])||isNaN(C[2*D+1])||isNaN(C[2*D+2])||isNaN(C[2*D+3]))isNaN(C[2*D])||isNaN(C[2*D+1])?P.push(NaN,NaN):P.push(C[2*D],C[2*D+1]),P.push(NaN,NaN);else{var H=(C[2*D]+C[2*D+2])/2;P.push(C[2*D],C[2*D+1],H,C[2*D+1],H,C[2*D+3])}P.push(C[G-2],C[G-1])}else if(L.line.shape==="vhv"){for(P=[],D=0;D<I-1;D++)if(isNaN(C[2*D])||isNaN(C[2*D+1])||isNaN(C[2*D+2])||isNaN(C[2*D+3]))isNaN(C[2*D])||isNaN(C[2*D+1])?P.push(NaN,NaN):P.push(C[2*D],C[2*D+1]),P.push(NaN,NaN);else{var N=(C[2*D+1]+C[2*D+3])/2;P.push(C[2*D],C[2*D+1],C[2*D],N,C[2*D+2],N)}P.push(C[G-2],C[G-1])}else if(L.line.shape==="vh"){for(P=[],D=0;D<I-1;D++)isNaN(C[2*D])||isNaN(C[2*D+1])?P.push(NaN,NaN,NaN,NaN):(P.push(C[2*D],C[2*D+1]),isNaN(C[2*D+2])||isNaN(C[2*D+3])?P.push(NaN,NaN):P.push(C[2*D],C[2*D+3]));P.push(C[G-2],C[G-1])}else P=C;var F=!1;for(D=0;D<P.length;D++)if(isNaN(P[D])){F=!0;break}var V=F||P.length>a.TOO_MANY_POINTS||i.hasMarkers(L)?"rect":"round";if(F&&L.connectgaps){var q=P[0],te=P[1];for(D=0;D<P.length;D+=2)isNaN(P[D])||isNaN(P[D+1])?(P[D]=q,P[D+1]=te):(q=P[D],te=P[D+1])}return{join:V,positions:P}},errorBarPositions:function(E,L,C,P,D){var G=T.getComponentMethod("errorbars","makeComputeError"),I=s.getFromId(E,L.xaxis,"x"),H=s.getFromId(E,L.yaxis,"y"),N=C.length/2,F={};function V(q,te){var $=te._id.charAt(0),W=L["error_"+$];if(W&&W.visible&&(te.type==="linear"||te.type==="log")){for(var Z=G(W),J={x:0,y:1}[$],ee={x:[0,1,2,3],y:[2,3,0,1]}[$],re=new Float64Array(4*N),ae=1/0,oe=-1/0,ce=0,pe=0;ce<N;ce++,pe+=4){var ve=q[ce];if(S(ve)){var we=C[2*ce+J],xe=Z(ve,ce),ge=xe[0],Oe=xe[1];if(S(ge)&&S(Oe)){var Ae=ve-ge,Te=ve+Oe;re[pe+ee[0]]=we-te.c2l(Ae),re[pe+ee[1]]=te.c2l(Te)-we,re[pe+ee[2]]=0,re[pe+ee[3]]=0,ae=Math.min(ae,ve-ge),oe=Math.max(oe,ve+Oe)}}}F[$]={positions:C,errors:re,_bnds:[ae,oe]}}}return V(P,I),V(D,H),F},textPosition:function(E,L,C,P){var D,G=L._length,I={};if(i.hasMarkers(L)){var H=C.font,N=C.align,F=C.baseline;for(I.offset=new Array(G),D=0;D<G;D++){var V=P.sizes?P.sizes[D]:P.size,q=Array.isArray(H)?H[D].size:H.size,te=Array.isArray(N)?N.length>1?N[D]:N[0]:N,$=Array.isArray(F)?F.length>1?F[D]:F[0]:F,W=u[te],Z=u[$],J=V?V/.8+1:0,ee=-Z*J-.5*Z;I.offset[D]=[W*J/q,ee/q]}}return I}}},47148:function(Q,z,t){var S=t(71828),k=t(73972),l=t(68645),T=t(42341),b=t(47581),d=t(34098),s=t(67513),e=t(73927),i=t(49508),r=t(11058),n=t(28908),a=t(82410);Q.exports=function(o,u,p,c){function x(A,w){return S.coerce(o,u,T,A,w)}var g=!!o.marker&&l.isOpenSymbol(o.marker.symbol),f=d.isBubble(o),y=s(o,u,c,x);if(y){e(o,u,c,x),x("xhoverformat"),x("yhoverformat");var v=y<b.PTS_LINESONLY?"lines+markers":"lines";x("text"),x("hovertext"),x("hovertemplate"),x("mode",v),d.hasLines(u)&&(x("connectgaps"),r(o,u,p,c,x),x("line.shape")),d.hasMarkers(u)&&(i(o,u,p,c,x,{noAngleRef:!0,noStandOff:!0}),x("marker.line.width",g||f?1:0)),d.hasText(u)&&(x("texttemplate"),a(o,u,c,x));var m=(u.line||{}).color,_=(u.marker||{}).color;x("fill"),u.fill!=="none"&&n(o,u,p,x);var h=k.getComponentMethod("errorbars","supplyDefaults");h(o,u,m||_||p,{axis:"y"}),h(o,u,m||_||p,{axis:"x",inherit:"y"}),S.coerceSelectionMarkerOpacity(u,x)}else u.visible=!1}},5345:function(Q,z,t){var S=t(71828),k=t(7901),l=t(37822).DESELECTDIM;Q.exports={styleTextSelection:function(T){var b,d,s=T[0],e=s.trace,i=s.t,r=i._scene,n=i.index,a=r.selectBatch[n],o=r.unselectBatch[n],u=r.textOptions[n],p=r.textSelectedOptions[n]||{},c=r.textUnselectedOptions[n]||{},x=S.extendFlat({},u);if(a.length||o.length){var g=p.color,f=c.color,y=u.color,v=Array.isArray(y);for(x.color=new Array(e._length),b=0;b<a.length;b++)d=a[b],x.color[d]=g||(v?y[d]:y);for(b=0;b<o.length;b++){d=o[b];var m=v?y[d]:y;x.color[d]=f||(g?m:k.addOpacity(m,l))}}r.glText[n].update(x)}}},68101:function(Q,z,t){var S=t(8225);Q.exports=function(k,l,T){var b=k.i;return"x"in k||(k.x=l._x[b]),"y"in k||(k.y=l._y[b]),S(k,l,T)}},68645:function(Q,z,t){var S=t(78232);z.isOpenSymbol=function(k){return typeof k=="string"?S.OPEN_RE.test(k):k%200>100},z.isDotSymbol=function(k){return typeof k=="string"?S.DOT_RE.test(k):k>200}},20794:function(Q,z,t){var S=t(73972),k=t(71828),l=t(34603);function T(b,d,s,e){var i=b.xa,r=b.ya,n=b.distance,a=b.dxy,o=b.index,u={pointNumber:o,x:d[o],y:s[o]};u.tx=Array.isArray(e.text)?e.text[o]:e.text,u.htx=Array.isArray(e.hovertext)?e.hovertext[o]:e.hovertext,u.data=Array.isArray(e.customdata)?e.customdata[o]:e.customdata,u.tp=Array.isArray(e.textposition)?e.textposition[o]:e.textposition;var p=e.textfont;p&&(u.ts=k.isArrayOrTypedArray(p.size)?p.size[o]:p.size,u.tc=Array.isArray(p.color)?p.color[o]:p.color,u.tf=Array.isArray(p.family)?p.family[o]:p.family);var c=e.marker;c&&(u.ms=k.isArrayOrTypedArray(c.size)?c.size[o]:c.size,u.mo=k.isArrayOrTypedArray(c.opacity)?c.opacity[o]:c.opacity,u.mx=k.isArrayOrTypedArray(c.symbol)?c.symbol[o]:c.symbol,u.ma=k.isArrayOrTypedArray(c.angle)?c.angle[o]:c.angle,u.mc=k.isArrayOrTypedArray(c.color)?c.color[o]:c.color);var x=c&&c.line;x&&(u.mlc=Array.isArray(x.color)?x.color[o]:x.color,u.mlw=k.isArrayOrTypedArray(x.width)?x.width[o]:x.width);var g=c&&c.gradient;g&&g.type!=="none"&&(u.mgt=Array.isArray(g.type)?g.type[o]:g.type,u.mgc=Array.isArray(g.color)?g.color[o]:g.color);var f=i.c2p(u.x,!0),y=r.c2p(u.y,!0),v=u.mrc||1,m=e.hoverlabel;m&&(u.hbg=Array.isArray(m.bgcolor)?m.bgcolor[o]:m.bgcolor,u.hbc=Array.isArray(m.bordercolor)?m.bordercolor[o]:m.bordercolor,u.hts=k.isArrayOrTypedArray(m.font.size)?m.font.size[o]:m.font.size,u.htc=Array.isArray(m.font.color)?m.font.color[o]:m.font.color,u.htf=Array.isArray(m.font.family)?m.font.family[o]:m.font.family,u.hnl=k.isArrayOrTypedArray(m.namelength)?m.namelength[o]:m.namelength);var _=e.hoverinfo;_&&(u.hi=Array.isArray(_)?_[o]:_);var h=e.hovertemplate;h&&(u.ht=Array.isArray(h)?h[o]:h);var A={};A[b.index]=u;var w=e._origX,E=e._origY,L=k.extendFlat({},b,{color:l(e,u),x0:f-v,x1:f+v,xLabelVal:w?w[o]:u.x,y0:y-v,y1:y+v,yLabelVal:E?E[o]:u.y,cd:A,distance:n,spikeDistance:a,hovertemplate:u.ht});return u.htx?L.text=u.htx:u.tx?L.text=u.tx:e.text&&(L.text=e.text),k.fillText(u,e,L),S.getComponentMethod("errorbars","hoverInfo")(u,e,L),L}Q.exports={hoverPoints:function(b,d,s,e){var i,r,n,a,o,u,p,c,x,g,f=b.cd,y=f[0].t,v=f[0].trace,m=b.xa,_=b.ya,h=y.x,A=y.y,w=m.c2p(d),E=_.c2p(s),L=b.distance;if(y.tree){var C=m.p2c(w-L),P=m.p2c(w+L),D=_.p2c(E-L),G=_.p2c(E+L);i=e==="x"?y.tree.range(Math.min(C,P),Math.min(_._rl[0],_._rl[1]),Math.max(C,P),Math.max(_._rl[0],_._rl[1])):y.tree.range(Math.min(C,P),Math.min(D,G),Math.max(C,P),Math.max(D,G))}else i=y.ids;var I=L;if(e==="x"){var H=!!v.xperiodalignment,N=!!v.yperiodalignment;for(u=0;u<i.length;u++){if(a=h[r=i[u]],p=Math.abs(m.c2p(a)-w),H){var F=m.c2p(v._xStarts[r]),V=m.c2p(v._xEnds[r]);p=w>=Math.min(F,V)&&w<=Math.max(F,V)?0:1/0}if(p<I){if(I=p,o=A[r],c=_.c2p(o)-E,N){var q=_.c2p(v._yStarts[r]),te=_.c2p(v._yEnds[r]);c=E>=Math.min(q,te)&&E<=Math.max(q,te)?0:1/0}g=Math.sqrt(p*p+c*c),n=i[u]}}}else for(u=i.length-1;u>-1;u--)a=h[r=i[u]],o=A[r],p=m.c2p(a)-w,c=_.c2p(o)-E,(x=Math.sqrt(p*p+c*c))<I&&(I=g=x,n=r);return b.index=n,b.distance=I,b.dxy=g,n===void 0?[b]:[T(b,h,A,v)]},calcHover:T}},68868:function(Q,z,t){var S=t(72156);S.plot=t(26787),Q.exports=S},26787:function(Q,z,t){var S=t(11870),k=t(46075),l=t(3593),T=t(42505),b=t(71828),d=t(64505).selectMode,s=t(79749),e=t(34098),i=t(68687),r=t(5345).styleTextSelection,n={};function a(o,u,p,c){var x=o._size,g=o.width*c,f=o.height*c,y=x.l*c,v=x.b*c,m=x.r*c,_=x.t*c,h=x.w*c,A=x.h*c;return[y+u.domain[0]*h,v+p.domain[0]*A,g-m-(1-u.domain[1])*h,f-_-(1-p.domain[1])*A]}(Q.exports=function(o,u,p){if(p.length){var c,x,g=o._fullLayout,f=u._scene,y=u.xaxis,v=u.yaxis;if(f)if(s(o,["ANGLE_instanced_arrays","OES_element_index_uint"],n)){var m=f.count,_=g._glcanvas.data()[0].regl;if(i(o,u,p),f.dirty){if(f.error2d===!0&&(f.error2d=l(_)),f.line2d===!0&&(f.line2d=k(_)),f.scatter2d===!0&&(f.scatter2d=S(_)),f.fill2d===!0&&(f.fill2d=k(_)),f.glText===!0)for(f.glText=new Array(m),c=0;c<m;c++)f.glText[c]=new T(_);if(f.glText){if(m>f.glText.length){var h=m-f.glText.length;for(c=0;c<h;c++)f.glText.push(new T(_))}else if(m<f.glText.length){var A=f.glText.length-m;f.glText.splice(m,A).forEach(function(re){re.destroy()})}for(c=0;c<m;c++)f.glText[c].update(f.textOptions[c])}if(f.line2d&&(f.line2d.update(f.lineOptions),f.lineOptions=f.lineOptions.map(function(re){if(re&&re.positions){for(var ae=re.positions,oe=0;oe<ae.length&&(isNaN(ae[oe])||isNaN(ae[oe+1]));)oe+=2;for(var ce=ae.length-2;ce>oe&&(isNaN(ae[ce])||isNaN(ae[ce+1]));)ce-=2;re.positions=ae.slice(oe,ce+2)}return re}),f.line2d.update(f.lineOptions)),f.error2d){var w=(f.errorXOptions||[]).concat(f.errorYOptions||[]);f.error2d.update(w)}f.scatter2d&&f.scatter2d.update(f.markerOptions),f.fillOrder=b.repeat(null,m),f.fill2d&&(f.fillOptions=f.fillOptions.map(function(re,ae){var oe=p[ae];if(re&&oe&&oe[0]&&oe[0].trace){var ce,pe,ve=oe[0],we=ve.trace,xe=ve.t,ge=f.lineOptions[ae],Oe=[];we._ownfill&&Oe.push(ae),we._nexttrace&&Oe.push(ae+1),Oe.length&&(f.fillOrder[ae]=Oe);var Ae,Te,se=[],le=ge&&ge.positions||xe.positions;if(we.fill==="tozeroy"){for(Ae=0;Ae<le.length&&isNaN(le[Ae+1]);)Ae+=2;for(Te=le.length-2;Te>Ae&&isNaN(le[Te+1]);)Te-=2;le[Ae+1]!==0&&(se=[le[Ae],0]),se=se.concat(le.slice(Ae,Te+2)),le[Te+1]!==0&&(se=se.concat([le[Te],0]))}else if(we.fill==="tozerox"){for(Ae=0;Ae<le.length&&isNaN(le[Ae]);)Ae+=2;for(Te=le.length-2;Te>Ae&&isNaN(le[Te]);)Te-=2;le[Ae]!==0&&(se=[0,le[Ae+1]]),se=se.concat(le.slice(Ae,Te+2)),le[Te]!==0&&(se=se.concat([0,le[Te+1]]))}else if(we.fill==="toself"||we.fill==="tonext"){for(se=[],ce=0,re.splitNull=!0,pe=0;pe<le.length;pe+=2)(isNaN(le[pe])||isNaN(le[pe+1]))&&((se=se.concat(le.slice(ce,pe))).push(le[ce],le[ce+1]),se.push(null,null),ce=pe+2);se=se.concat(le.slice(ce)),ce&&se.push(le[ce],le[ce+1])}else{var ne=we._nexttrace;if(ne){var me=f.lineOptions[ae+1];if(me){var Ee=me.positions;if(we.fill==="tonexty"){for(se=le.slice(),ae=Math.floor(Ee.length/2);ae--;){var be=Ee[2*ae],De=Ee[2*ae+1];isNaN(be)||isNaN(De)||se.push(be,De)}re.fill=ne.fillcolor}}}}if(we._prevtrace&&we._prevtrace.fill==="tonext"){var Ue=f.lineOptions[ae-1].positions,he=se.length/2,ke=[ce=he];for(pe=0;pe<Ue.length;pe+=2)(isNaN(Ue[pe])||isNaN(Ue[pe+1]))&&(ke.push(pe/2+he+1),ce=pe+2);se=se.concat(Ue),re.hole=ke}return re.fillmode=we.fill,re.opacity=we.opacity,re.positions=se,re}}),f.fill2d.update(f.fillOptions))}var E=g.dragmode,L=d(E),C=g.clickmode.indexOf("select")>-1;for(c=0;c<m;c++){var P=p[c][0],D=P.trace,G=P.t,I=G.index,H=D._length,N=G.x,F=G.y;if(D.selectedpoints||L||C){if(L||(L=!0),D.selectedpoints){var V=f.selectBatch[I]=b.selIndices2selPoints(D),q={};for(x=0;x<V.length;x++)q[V[x]]=1;var te=[];for(x=0;x<H;x++)q[x]||te.push(x);f.unselectBatch[I]=te}var $=G.xpx=new Array(H),W=G.ypx=new Array(H);for(x=0;x<H;x++)$[x]=y.c2p(N[x]),W[x]=v.c2p(F[x])}else G.xpx=G.ypx=null}if(L){if(f.select2d||(f.select2d=S(g._glcanvas.data()[1].regl)),f.scatter2d){var Z=new Array(m);for(c=0;c<m;c++)Z[c]=f.selectBatch[c].length||f.unselectBatch[c].length?f.markerUnselectedOptions[c]:{};f.scatter2d.update(Z)}f.select2d&&(f.select2d.update(f.markerOptions),f.select2d.update(f.markerSelectedOptions)),f.glText&&p.forEach(function(re){var ae=((re||[])[0]||{}).trace||{};e.hasText(ae)&&r(re)})}else f.scatter2d&&f.scatter2d.update(f.markerOptions);var J={viewport:a(g,y,v,o._context.plotGlPixelRatio),range:[(y._rl||y.range)[0],(v._rl||v.range)[0],(y._rl||y.range)[1],(v._rl||v.range)[1]]},ee=b.repeat(J,f.count);f.fill2d&&f.fill2d.update(ee),f.line2d&&f.line2d.update(ee),f.error2d&&f.error2d.update(ee.concat(ee)),f.scatter2d&&f.scatter2d.update(ee),f.select2d&&f.select2d.update(ee),f.glText&&f.glText.forEach(function(re){re.update(J)})}else f.init()}}).reglPrecompiled=n},38967:function(Q,z,t){var S=t(71828);Q.exports=function(k,l){var T=l._scene,b={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},d={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return l._scene||((T=l._scene={}).init=function(){S.extendFlat(T,d,b)},T.init(),T.update=function(s){var e=S.repeat(s,T.count);if(T.fill2d&&T.fill2d.update(e),T.scatter2d&&T.scatter2d.update(e),T.line2d&&T.line2d.update(e),T.error2d&&T.error2d.update(e.concat(e)),T.select2d&&T.select2d.update(e),T.glText)for(var i=0;i<T.count;i++)T.glText[i].update(s)},T.draw=function(){for(var s=T.count,e=T.fill2d,i=T.error2d,r=T.line2d,n=T.scatter2d,a=T.glText,o=T.select2d,u=T.selectBatch,p=T.unselectBatch,c=0;c<s;c++){if(e&&T.fillOrder[c]&&e.draw(T.fillOrder[c]),r&&T.lineOptions[c]&&r.draw(c),i&&(T.errorXOptions[c]&&i.draw(c),T.errorYOptions[c]&&i.draw(c+s)),n&&T.markerOptions[c])if(p[c].length){var x=S.repeat([],T.count);x[c]=p[c],n.draw(x)}else u[c].length||n.draw(c);a[c]&&T.textOptions[c]&&a[c].render()}o&&o.draw(u),T.dirty=!1},T.destroy=function(){T.fill2d&&T.fill2d.destroy&&T.fill2d.destroy(),T.scatter2d&&T.scatter2d.destroy&&T.scatter2d.destroy(),T.error2d&&T.error2d.destroy&&T.error2d.destroy(),T.line2d&&T.line2d.destroy&&T.line2d.destroy(),T.select2d&&T.select2d.destroy&&T.select2d.destroy(),T.glText&&T.glText.forEach(function(s){s.destroy&&s.destroy()}),T.lineOptions=null,T.fillOptions=null,T.markerOptions=null,T.markerSelectedOptions=null,T.markerUnselectedOptions=null,T.errorXOptions=null,T.errorYOptions=null,T.textOptions=null,T.textSelectedOptions=null,T.textUnselectedOptions=null,T.selectBatch=null,T.unselectBatch=null,l._scene=null}),T.dirty||S.extendFlat(T,b),T}},58147:function(Q,z,t){var S=t(34098),k=t(5345).styleTextSelection;Q.exports=function(l,T){var b=l.cd,d=l.xaxis,s=l.yaxis,e=[],i=b[0].trace,r=b[0].t,n=i._length,a=r.x,o=r.y,u=r._scene,p=r.index;if(!u)return e;var c=S.hasText(i),x=S.hasMarkers(i),g=!x&&!c;if(i.visible!==!0||g)return e;var f=[],y=[];if(T!==!1&&!T.degenerate)for(var v=0;v<n;v++)T.contains([r.xpx[v],r.ypx[v]],!1,v,l)?(f.push(v),e.push({pointNumber:v,x:d.c2d(a[v]),y:s.c2d(o[v])})):y.push(v);if(x){var m=u.scatter2d;if(f.length||y.length){if(!u.selectBatch[p].length&&!u.unselectBatch[p].length){var _=new Array(u.count);_[p]=u.markerUnselectedOptions[p],m.update.apply(m,_)}}else{var h=new Array(u.count);h[p]=u.markerOptions[p],m.update.apply(m,h)}}return u.selectBatch[p]=f,u.unselectBatch[p]=y,c&&k(b),e}},99181:function(Q,z,t){var S=t(5386).fF,k=t(5386).si,l=t(19316),T=t(82196),b=t(23585),d=t(9012),s=t(50693),e=t(1426).extendFlat,i=t(30962).overrideAll,r=t(23585),n=l.line,a=l.marker;Q.exports=i({lon:l.lon,lat:l.lat,cluster:{enabled:{valType:"boolean"},maxzoom:e({},r.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:e({},a.opacity,{dflt:1})},mode:e({},T.mode,{dflt:"markers"}),text:e({},T.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:e({},T.hovertext,{}),line:{color:n.color,width:n.width},connectgaps:T.connectgaps,marker:e({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:a.opacity,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode},s("marker")),fill:l.fill,fillcolor:T.fillcolor,textfont:b.layers.symbol.textfont,textposition:b.layers.symbol.textposition,below:{valType:"string"},selected:{marker:T.selected.marker},unselected:{marker:T.unselected.marker},hoverinfo:e({},d.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:S()},"calc","nested")},15790:function(Q,z,t){var S=t(92770),k=t(71828),l=t(50606).BADNUM,T=t(18214),b=t(21081),d=t(91424),s=t(39984),e=t(34098),i=t(13056),r=t(23469).appendArrayPointValue,n=t(63893).NEWLINES,a=t(63893).BR_TAG_ALL;function o(g){return{type:g,geojson:T.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function u(g,f){return k.isArrayOrTypedArray(g)?f?function(y){return S(g[y])?+g[y]:0}:function(y){return g[y]}:g?function(){return g}:p}function p(){return""}function c(g){return g[0]===l}function x(g,f){var y;if(k.isArrayOrTypedArray(g)&&k.isArrayOrTypedArray(f)){y=["step",["get","point_count"],g[0]];for(var v=1;v<g.length;v++)y.push(f[v-1],g[v])}else y=g;return y}Q.exports=function(g,f){var y,v=f[0].trace,m=v.visible===!0&&v._length!==0,_=v.fill!=="none",h=e.hasLines(v),A=e.hasMarkers(v),w=e.hasText(v),E=A&&v.marker.symbol==="circle",L=A&&v.marker.symbol!=="circle",C=v.cluster&&v.cluster.enabled,P=o("fill"),D=o("line"),G=o("circle"),I=o("symbol"),H={fill:P,line:D,circle:G,symbol:I};if(!m)return H;if((_||h)&&(y=T.calcTraceToLineCoords(f)),_&&(P.geojson=T.makePolygon(y),P.layout.visibility="visible",k.extendFlat(P.paint,{"fill-color":v.fillcolor})),h&&(D.geojson=T.makeLine(y),D.layout.visibility="visible",k.extendFlat(D.paint,{"line-width":v.line.width,"line-color":v.line.color,"line-opacity":v.opacity})),E){var N=function(q){var te,$,W,Z,J=q[0].trace,ee=J.marker,re=J.selectedpoints,ae=k.isArrayOrTypedArray(ee.color),oe=k.isArrayOrTypedArray(ee.size),ce=k.isArrayOrTypedArray(ee.opacity);function pe(se){return J.opacity*se}ae&&($=b.hasColorscale(J,"marker")?b.makeColorScaleFuncFromTrace(ee):k.identity),oe&&(W=s(J)),ce&&(Z=function(se){return pe(S(se)?+k.constrain(se,0,1):0)});var ve,we,xe=[];for(te=0;te<q.length;te++){var ge=q[te],Oe=ge.lonlat;if(!c(Oe)){var Ae={};$&&(Ae.mcc=ge.mcc=$(ge.mc)),W&&(Ae.mrc=ge.mrc=W(ge.ms)),Z&&(Ae.mo=Z(ge.mo)),re&&(Ae.selected=ge.selected||0),xe.push({type:"Feature",id:te+1,geometry:{type:"Point",coordinates:Oe},properties:Ae})}}if(re)for(ve=d.makeSelectedPointStyleFns(J),te=0;te<xe.length;te++){var Te=xe[te].properties;ve.selectedOpacityFn&&(Te.mo=pe(ve.selectedOpacityFn(Te))),ve.selectedColorFn&&(Te.mcc=ve.selectedColorFn(Te)),ve.selectedSizeFn&&(Te.mrc=ve.selectedSizeFn(Te))}return{geojson:{type:"FeatureCollection",features:xe},mcc:ae||ve&&ve.selectedColorFn?{type:"identity",property:"mcc"}:ee.color,mrc:oe||ve&&ve.selectedSizeFn?{type:"identity",property:"mrc"}:(we=ee.size,we/2),mo:ce||ve&&ve.selectedOpacityFn?{type:"identity",property:"mo"}:pe(ee.opacity)}}(f);G.geojson=N.geojson,G.layout.visibility="visible",C&&(G.filter=["!",["has","point_count"]],H.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":x(v.cluster.color,v.cluster.step),"circle-radius":x(v.cluster.size,v.cluster.step),"circle-opacity":x(v.cluster.opacity,v.cluster.step)}},H.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),k.extendFlat(G.paint,{"circle-color":N.mcc,"circle-radius":N.mrc,"circle-opacity":N.mo})}if(E&&C&&(G.filter=["!",["has","point_count"]]),(L||w)&&(I.geojson=function(q,te){for(var $=te._fullLayout,W=q[0].trace,Z=W.marker||{},J=Z.symbol,ee=Z.angle,re=J!=="circle"?u(J):p,ae=ee!=="auto"?u(ee,!0):p,oe=e.hasText(W)?u(W.text):p,ce=[],pe=0;pe<q.length;pe++){var ve=q[pe];if(!c(ve.lonlat)){var we,xe=W.texttemplate;if(xe){var ge=Array.isArray(xe)?xe[pe]||"":xe,Oe=W._module.formatLabels(ve,W,$),Ae={};r(Ae,W,ve.i);var Te=W._meta||{};we=k.texttemplateString(ge,Oe,$._d3locale,Ae,ve,Te)}else we=oe(pe);we&&(we=we.replace(n,"").replace(a,`
`)),ce.push({type:"Feature",geometry:{type:"Point",coordinates:ve.lonlat},properties:{symbol:re(pe),angle:ae(pe),text:we}})}}return{type:"FeatureCollection",features:ce}}(f,g),k.extendFlat(I.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),L&&(k.extendFlat(I.layout,{"icon-size":v.marker.size/10}),"angle"in v.marker&&v.marker.angle!=="auto"&&k.extendFlat(I.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),I.layout["icon-allow-overlap"]=v.marker.allowoverlap,k.extendFlat(I.paint,{"icon-opacity":v.opacity*v.marker.opacity,"icon-color":v.marker.color})),w)){var F=(v.marker||{}).size,V=i(v.textposition,F);k.extendFlat(I.layout,{"text-size":v.textfont.size,"text-anchor":V.anchor,"text-offset":V.offset}),k.extendFlat(I.paint,{"text-color":v.textfont.color,"text-opacity":v.opacity})}return H}},76645:function(Q,z,t){var S=t(71828),k=t(34098),l=t(49508),T=t(11058),b=t(82410),d=t(28908),s=t(99181);Q.exports=function(e,i,r,n){function a(v,m){return S.coerce(e,i,s,v,m)}function o(v,m){return S.coerce2(e,i,s,v,m)}var u=function(v,m,_){var h=_("lon")||[],A=_("lat")||[],w=Math.min(h.length,A.length);return m._length=w,w}(0,i,a);if(u){if(a("text"),a("texttemplate"),a("hovertext"),a("hovertemplate"),a("mode"),a("below"),k.hasLines(i)&&(T(e,i,r,n,a,{noDash:!0}),a("connectgaps")),k.hasMarkers(i)){l(e,i,r,n,a,{noLine:!0,noAngle:!0}),a("marker.allowoverlap"),a("marker.angle");var p=i.marker;p.symbol!=="circle"&&(S.isArrayOrTypedArray(p.size)&&(p.size=p.size[0]),S.isArrayOrTypedArray(p.color)&&(p.color=p.color[0]))}var c=o("cluster.maxzoom"),x=o("cluster.step"),g=o("cluster.color",i.marker&&i.marker.color||r),f=o("cluster.size"),y=o("cluster.opacity");a("cluster.enabled",c!==!1||x!==!1||g!==!1||f!==!1||y!==!1),k.hasText(i)&&b(e,i,n,a,{noSelect:!0}),a("fill"),i.fill!=="none"&&d(e,i,r,a),S.coerceSelectionMarkerOpacity(i,a)}else i.visible=!1}},53353:function(Q){Q.exports=function(z,t){return z.lon=t.lon,z.lat=t.lat,z}},15636:function(Q,z,t){var S=t(89298);Q.exports=function(k,l,T){var b={},d=T[l.subplot]._subplot.mockAxis,s=k.lonlat;return b.lonLabel=S.tickText(d,d.c2l(s[0]),!0).text,b.latLabel=S.tickText(d,d.c2l(s[1]),!0).text,b}},28178:function(Q,z,t){var S=t(30211),k=t(71828),l=t(34603),T=k.fillText,b=t(50606).BADNUM,d=t(77734).traceLayerPrefix;function s(e,i,r){if(!e.hovertemplate){var n=(i.hi||e.hoverinfo).split("+"),a=n.indexOf("all")!==-1,o=n.indexOf("lon")!==-1,u=n.indexOf("lat")!==-1,p=i.lonlat,c=[];return a||o&&u?c.push("("+x(p[1])+", "+x(p[0])+")"):o?c.push(r.lon+x(p[0])):u&&c.push(r.lat+x(p[1])),(a||n.indexOf("text")!==-1)&&T(i,e,c),c.join("<br>")}function x(g){return g+""}}Q.exports={hoverPoints:function(e,i,r){var n=e.cd,a=n[0].trace,o=e.xa,u=e.ya,p=e.subplot,c=[],x=d+a.uid+"-circle",g=a.cluster&&a.cluster.enabled;if(g){var f=p.map.queryRenderedFeatures(null,{layers:[x]});c=f.map(function(P){return P.id})}var y=360*(i>=0?Math.floor((i+180)/360):Math.ceil((i-180)/360)),v=i-y;if(S.getClosest(n,function(P){var D=P.lonlat;if(D[0]===b||g&&c.indexOf(P.i+1)===-1)return 1/0;var G=k.modHalf(D[0],360),I=D[1],H=p.project([G,I]),N=H.x-o.c2p([v,I]),F=H.y-u.c2p([G,r]),V=Math.max(3,P.mrc||0);return Math.max(Math.sqrt(N*N+F*F)-V,1-3/V)},e),e.index!==!1){var m=n[e.index],_=m.lonlat,h=[k.modHalf(_[0],360)+y,_[1]],A=o.c2p(h),w=u.c2p(h),E=m.mrc||1;e.x0=A-E,e.x1=A+E,e.y0=w-E,e.y1=w+E;var L={};L[a.subplot]={_subplot:p};var C=a._module.formatLabels(m,a,L);return e.lonLabel=C.lonLabel,e.latLabel=C.latLabel,e.color=l(a,m),e.extraText=s(a,m,n[0].t.labels),e.hovertemplate=a.hovertemplate,[e]}},getExtraText:s}},20467:function(Q,z,t){Q.exports={attributes:t(99181),supplyDefaults:t(76645),colorbar:t(4898),formatLabels:t(15636),calc:t(84622),plot:t(86951),hoverPoints:t(28178).hoverPoints,eventData:t(53353),selectPoints:t(86387),styleOnSelect:function(S,k){k&&k[0].trace._glTrace.update(k)},moduleType:"trace",name:"scattermapbox",basePlotModule:t(50101),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},86951:function(Q,z,t){var S=t(71828),k=t(15790),l=t(77734).traceLayerPrefix,T={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function b(s,e,i,r){this.type="scattermapbox",this.subplot=s,this.uid=e,this.clusterEnabled=i,this.isHidden=r,this.sourceIds={fill:"source-"+e+"-fill",line:"source-"+e+"-line",circle:"source-"+e+"-circle",symbol:"source-"+e+"-symbol",cluster:"source-"+e+"-circle",clusterCount:"source-"+e+"-circle"},this.layerIds={fill:l+e+"-fill",line:l+e+"-line",circle:l+e+"-circle",symbol:l+e+"-symbol",cluster:l+e+"-cluster",clusterCount:l+e+"-cluster-count"},this.below=null}var d=b.prototype;d.addSource=function(s,e,i){var r={type:"geojson",data:e.geojson};i&&i.enabled&&S.extendFlat(r,{cluster:!0,clusterMaxZoom:i.maxzoom});var n=this.subplot.map.getSource(this.sourceIds[s]);n?n.setData(e.geojson):this.subplot.map.addSource(this.sourceIds[s],r)},d.setSourceData=function(s,e){this.subplot.map.getSource(this.sourceIds[s]).setData(e.geojson)},d.addLayer=function(s,e,i){var r={type:e.type,id:this.layerIds[s],source:this.sourceIds[s],layout:e.layout,paint:e.paint};e.filter&&(r.filter=e.filter);for(var n,a=this.layerIds[s],o=this.subplot.getMapLayers(),u=0;u<o.length;u++)if(o[u].id===a){n=!0;break}n?(this.subplot.setOptions(a,"setLayoutProperty",r.layout),r.layout.visibility==="visible"&&this.subplot.setOptions(a,"setPaintProperty",r.paint)):this.subplot.addLayer(r,i)},d.update=function(s){var e=s[0].trace,i=this.subplot,r=i.map,n=k(i.gd,s),a=i.belowLookup["trace-"+this.uid],o=!(!e.cluster||!e.cluster.enabled),u=!!this.clusterEnabled,p=this;function c(v){u?function(m){for(var _=T.cluster,h=_.length-1;h>=0;h--){var A=_[h];r.removeLayer(p.layerIds[A])}m||r.removeSource(p.sourceIds.circle)}(v):function(m){for(var _=T.nonCluster,h=_.length-1;h>=0;h--){var A=_[h];r.removeLayer(p.layerIds[A]),m||r.removeSource(p.sourceIds[A])}}(v)}function x(v){o?function(m){m||p.addSource("circle",n.circle,e.cluster);for(var _=T.cluster,h=0;h<_.length;h++){var A=_[h],w=n[A];p.addLayer(A,w,a)}}(v):function(m){for(var _=T.nonCluster,h=0;h<_.length;h++){var A=_[h],w=n[A];m||p.addSource(A,w),p.addLayer(A,w,a)}}(v)}function g(){for(var v=o?T.cluster:T.nonCluster,m=0;m<v.length;m++){var _=v[m],h=n[_];h&&(i.setOptions(p.layerIds[_],"setLayoutProperty",h.layout),h.layout.visibility==="visible"&&(_!=="cluster"&&p.setSourceData(_,h),i.setOptions(p.layerIds[_],"setPaintProperty",h.paint)))}}var f=this.isHidden,y=e.visible!==!0;y?f||c():f?y||x():u!==o?(c(),x()):(this.below!==a&&(c(!0),x(!0)),g()),this.clusterEnabled=o,this.isHidden=y,this.below=a,s[0].trace._glTrace=this},d.dispose=function(){for(var s=this.subplot.map,e=this.clusterEnabled?T.cluster:T.nonCluster,i=e.length-1;i>=0;i--){var r=e[i];s.removeLayer(this.layerIds[r]),s.removeSource(this.sourceIds[r])}},Q.exports=function(s,e){var i,r,n,a=e[0].trace,o=a.cluster&&a.cluster.enabled,u=a.visible!==!0,p=new b(s,a.uid,o,u),c=k(s.gd,e),x=p.below=s.belowLookup["trace-"+a.uid];if(o)for(p.addSource("circle",c.circle,a.cluster),i=0;i<T.cluster.length;i++)n=c[r=T.cluster[i]],p.addLayer(r,n,x);else for(i=0;i<T.nonCluster.length;i++)n=c[r=T.nonCluster[i]],p.addSource(r,n,a.cluster),p.addLayer(r,n,x);return e[0].trace._glTrace=p,p}},86387:function(Q,z,t){var S=t(71828),k=t(34098),l=t(50606).BADNUM;Q.exports=function(T,b){var d,s=T.cd,e=T.xaxis,i=T.yaxis,r=[],n=s[0].trace;if(!k.hasMarkers(n))return[];if(b===!1)for(d=0;d<s.length;d++)s[d].selected=0;else for(d=0;d<s.length;d++){var a=s[d],o=a.lonlat;if(o[0]!==l){var u=[S.modHalf(o[0],360),o[1]],p=[e.c2p(u),i.c2p(u)];b.contains(p,null,d,T)?(r.push({pointNumber:d,lon:o[0],lat:o[1]}),a.selected=1):a.selected=0}}return r}},81245:function(Q,z,t){var S=t(5386).fF,k=t(5386).si,l=t(1426).extendFlat,T=t(82196),b=t(9012),d=T.line;Q.exports={mode:T.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:k({editType:"plot"},{keys:["r","theta","text"]}),hovertext:T.hovertext,line:{color:d.color,width:d.width,dash:d.dash,backoff:d.backoff,shape:l({},d.shape,{values:["linear","spline"]}),smoothing:d.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:l({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:l({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:l({},b.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:T.hoveron,hovertemplate:S(),selected:T.selected,unselected:T.unselected}},26442:function(Q,z,t){var S=t(92770),k=t(50606).BADNUM,l=t(89298),T=t(36922),b=t(75225),d=t(66279),s=t(47761).calcMarkerSize;Q.exports=function(e,i){for(var r=e._fullLayout,n=i.subplot,a=r[n].radialaxis,o=r[n].angularaxis,u=a.makeCalcdata(i,"r"),p=o.makeCalcdata(i,"theta"),c=i._length,x=new Array(c),g=0;g<c;g++){var f=u[g],y=p[g],v=x[g]={};S(f)&&S(y)?(v.r=f,v.theta=y):v.r=k}var m=s(i,c);return i._extremes.x=l.findExtremes(a,u,{ppad:m}),T(e,i),b(x,i),d(x,i),x}},22184:function(Q,z,t){var S=t(71828),k=t(34098),l=t(49508),T=t(11058),b=t(94039),d=t(82410),s=t(28908),e=t(47581).PTS_LINESONLY,i=t(81245);function r(n,a,o,u){var p,c=u("r"),x=u("theta");if(c)x?p=Math.min(c.length,x.length):(p=c.length,u("theta0"),u("dtheta"));else{if(!x)return 0;p=a.theta.length,u("r0"),u("dr")}return a._length=p,p}Q.exports={handleRThetaDefaults:r,supplyDefaults:function(n,a,o,u){function p(g,f){return S.coerce(n,a,i,g,f)}var c=r(0,a,0,p);if(c){p("thetaunit"),p("mode",c<e?"lines+markers":"lines"),p("text"),p("hovertext"),a.hoveron!=="fills"&&p("hovertemplate"),k.hasLines(a)&&(T(n,a,o,u,p,{backoff:!0}),b(n,a,p),p("connectgaps")),k.hasMarkers(a)&&l(n,a,o,u,p,{gradient:!0}),k.hasText(a)&&(p("texttemplate"),d(n,a,u,p));var x=[];(k.hasMarkers(a)||k.hasText(a))&&(p("cliponaxis"),p("marker.maxdisplayed"),x.push("points")),p("fill"),a.fill!=="none"&&(s(n,a,o,p),k.hasLines(a)||b(n,a,p)),a.fill!=="tonext"&&a.fill!=="toself"||x.push("fills"),p("hoveron",x.join("+")||"points"),S.coerceSelectionMarkerOpacity(a,p)}else a.visible=!1}}},98608:function(Q,z,t){var S=t(71828),k=t(89298);Q.exports=function(l,T,b){var d,s,e={},i=b[T.subplot]._subplot;i?(d=i.radialAxis,s=i.angularAxis):(d=(i=b[T.subplot]).radialaxis,s=i.angularaxis);var r=d.c2l(l.r);e.rLabel=k.tickText(d,r,!0).text;var n=s.thetaunit==="degrees"?S.rad2deg(l.theta):l.theta;return e.thetaLabel=k.tickText(s,n,!0).text,e}},59150:function(Q,z,t){var S=t(33720);function k(l,T,b,d){var s=b.radialAxis,e=b.angularAxis;s._hovertitle="r",e._hovertitle="";var i={};i[T.subplot]={_subplot:b};var r=T._module.formatLabels(l,T,i);d.rLabel=r.rLabel,d.thetaLabel=r.thetaLabel;var n=l.hi||T.hoverinfo,a=[];function o(p,c){a.push(p._hovertitle+": "+c)}if(!T.hovertemplate){var u=n.split("+");u.indexOf("all")!==-1&&(u=["r","theta","text"]),u.indexOf("r")!==-1&&o(s,d.rLabel),u.indexOf("theta")!==-1&&o(e,d.thetaLabel),u.indexOf("text")!==-1&&d.text&&(a.push(d.text),delete d.text),d.extraText=a.join("<br>")}}Q.exports={hoverPoints:function(l,T,b,d){var s=S(l,T,b,d);if(s&&s[0].index!==!1){var e=s[0];if(e.index===void 0)return s;var i=l.subplot,r=e.cd[e.index],n=e.trace;if(i.isPtInside(r))return e.xLabelVal=void 0,e.yLabelVal=void 0,k(r,n,i,e),e.hovertemplate=n.hovertemplate,s}},makeHoverPointText:k}},91271:function(Q,z,t){Q.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:t(23580),categories:["polar","symbols","showLegend","scatter-like"],attributes:t(81245),supplyDefaults:t(22184).supplyDefaults,colorbar:t(4898),formatLabels:t(98608),calc:t(26442),plot:t(45162),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(59150).hoverPoints,selectPoints:t(98002),meta:{}}},45162:function(Q,z,t){var S=t(32663),k=t(50606).BADNUM;Q.exports=function(l,T,b){for(var d=T.layers.frontplot.select("g.scatterlayer"),s=T.xaxis,e=T.yaxis,i={xaxis:s,yaxis:e,plot:T.framework,layerClipId:T._hasClipOnAxisFalse?T.clipIds.forTraces:null},r=T.radialAxis,n=T.angularAxis,a=0;a<b.length;a++)for(var o=b[a],u=0;u<o.length;u++){u===0&&(o[0].trace._xA=s,o[0].trace._yA=e);var p=o[u],c=p.r;if(c===k)p.x=p.y=k;else{var x=r.c2g(c),g=n.c2g(p.theta);p.x=x*Math.cos(g),p.y=x*Math.sin(g)}}S(l,i,b,d)}},53286:function(Q,z,t){var S=t(81245),k=t(42341),l=t(5386).si;Q.exports={mode:S.mode,r:S.r,theta:S.theta,r0:S.r0,dr:S.dr,theta0:S.theta0,dtheta:S.dtheta,thetaunit:S.thetaunit,text:S.text,texttemplate:l({editType:"plot"},{keys:["r","theta","text"]}),hovertext:S.hovertext,hovertemplate:S.hovertemplate,line:k.line,connectgaps:k.connectgaps,marker:k.marker,fill:k.fill,fillcolor:k.fillcolor,textposition:k.textposition,textfont:k.textfont,hoverinfo:S.hoverinfo,selected:S.selected,unselected:S.unselected}},65746:function(Q,z,t){Q.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:t(23580),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:t(53286),supplyDefaults:t(75485),colorbar:t(4898),formatLabels:t(46255),calc:t(37499),hoverPoints:t(29347).hoverPoints,selectPoints:t(58147),meta:{}}},37499:function(Q,z,t){var S=t(36922),k=t(47761).calcMarkerSize,l=t(19635),T=t(89298),b=t(78232).TOO_MANY_POINTS;Q.exports=function(d,s){var e=d._fullLayout,i=s.subplot,r=e[i].radialaxis,n=e[i].angularaxis,a=s._r=r.makeCalcdata(s,"r"),o=s._theta=n.makeCalcdata(s,"theta"),u=s._length,p={};u<a.length&&(a=a.slice(0,u)),u<o.length&&(o=o.slice(0,u)),p.r=a,p.theta=o,S(d,s);var c,x=p.opts=l.style(d,s);return u<b?c=k(s,u):x.marker&&(c=2*(x.marker.sizeAvg||Math.max(x.marker.size,3))),s._extremes.x=T.findExtremes(r,a,{ppad:c}),[{x:!1,y:!1,t:p,trace:s}]}},75485:function(Q,z,t){var S=t(71828),k=t(34098),l=t(22184).handleRThetaDefaults,T=t(49508),b=t(11058),d=t(82410),s=t(28908),e=t(47581).PTS_LINESONLY,i=t(53286);Q.exports=function(r,n,a,o){function u(c,x){return S.coerce(r,n,i,c,x)}var p=l(r,n,o,u);p?(u("thetaunit"),u("mode",p<e?"lines+markers":"lines"),u("text"),u("hovertext"),n.hoveron!=="fills"&&u("hovertemplate"),k.hasLines(n)&&(b(r,n,a,o,u),u("connectgaps")),k.hasMarkers(n)&&T(r,n,a,o,u,{noAngleRef:!0,noStandOff:!0}),k.hasText(n)&&(u("texttemplate"),d(r,n,o,u)),u("fill"),n.fill!=="none"&&s(r,n,a,u),S.coerceSelectionMarkerOpacity(n,u)):n.visible=!1}},46255:function(Q,z,t){var S=t(98608);Q.exports=function(k,l,T){var b=k.i;return"r"in k||(k.r=l._r[b]),"theta"in k||(k.theta=l._theta[b]),S(k,l,T)}},29347:function(Q,z,t){var S=t(20794),k=t(59150).makeHoverPointText;Q.exports={hoverPoints:function(l,T,b,d){var s=l.cd[0].t,e=s.r,i=s.theta,r=S.hoverPoints(l,T,b,d);if(r&&r[0].index!==!1){var n=r[0];if(n.index===void 0)return r;var a=l.subplot,o=n.cd[n.index],u=n.trace;if(o.r=e[n.index],o.theta=i[n.index],a.isPtInside(o))return n.xLabelVal=void 0,n.yLabelVal=void 0,k(o,u,a,n),r}}}},21461:function(Q,z,t){var S=t(65746);S.plot=t(49741),Q.exports=S},49741:function(Q,z,t){var S=t(88294),k=t(92770),l=t(26787),T=t(38967),b=t(19635),d=t(71828),s=t(78232).TOO_MANY_POINTS;Q.exports=function(e,i,r){if(r.length){var n=i.radialAxis,a=i.angularAxis,o=T(e,i);return r.forEach(function(u){if(u&&u[0]&&u[0].trace){var p,c=u[0],x=c.trace,g=c.t,f=x._length,y=g.r,v=g.theta,m=g.opts,_=y.slice(),h=v.slice();for(p=0;p<y.length;p++)i.isPtInside({r:y[p],theta:v[p]})||(_[p]=NaN,h[p]=NaN);var A=new Array(2*f),w=Array(f),E=Array(f);for(p=0;p<f;p++){var L,C,P=_[p];if(k(P)){var D=n.c2g(P),G=a.c2g(h[p],x.thetaunit);L=D*Math.cos(G),C=D*Math.sin(G)}else L=C=NaN;w[p]=A[2*p]=L,E[p]=A[2*p+1]=C}g.tree=S(A),m.marker&&f>=s&&(m.marker.cluster=g.tree),m.marker&&(m.markerSel.positions=m.markerUnsel.positions=m.marker.positions=A),m.line&&A.length>1&&d.extendFlat(m.line,b.linePositions(e,x,A)),m.text&&(d.extendFlat(m.text,{positions:A},b.textPosition(e,x,m.text,m.marker)),d.extendFlat(m.textSel,{positions:A},b.textPosition(e,x,m.text,m.markerSel)),d.extendFlat(m.textUnsel,{positions:A},b.textPosition(e,x,m.text,m.markerUnsel))),m.fill&&!o.fill2d&&(o.fill2d=!0),m.marker&&!o.scatter2d&&(o.scatter2d=!0),m.line&&!o.line2d&&(o.line2d=!0),m.text&&!o.glText&&(o.glText=!0),o.lineOptions.push(m.line),o.fillOptions.push(m.fill),o.markerOptions.push(m.marker),o.markerSelectedOptions.push(m.markerSel),o.markerUnselectedOptions.push(m.markerUnsel),o.textOptions.push(m.text),o.textSelectedOptions.push(m.textSel),o.textUnselectedOptions.push(m.textUnsel),o.selectBatch.push([]),o.unselectBatch.push([]),g.x=w,g.y=E,g.rawx=w,g.rawy=E,g.r=y,g.theta=v,g.positions=A,g._scene=o,g.index=o.count,o.count++}}),l(e,i,r)}},Q.exports.reglPrecompiled={}},48300:function(Q,z,t){var S=t(5386).fF,k=t(5386).si,l=t(1426).extendFlat,T=t(82196),b=t(9012),d=T.line;Q.exports={mode:T.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:k({editType:"plot"},{keys:["real","imag","text"]}),hovertext:T.hovertext,line:{color:d.color,width:d.width,dash:d.dash,backoff:d.backoff,shape:l({},d.shape,{values:["linear","spline"]}),smoothing:d.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:l({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:l({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:l({},b.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:T.hoveron,hovertemplate:S(),selected:T.selected,unselected:T.unselected}},30621:function(Q,z,t){var S=t(92770),k=t(50606).BADNUM,l=t(36922),T=t(75225),b=t(66279),d=t(47761).calcMarkerSize;Q.exports=function(s,e){for(var i=s._fullLayout,r=e.subplot,n=i[r].realaxis,a=i[r].imaginaryaxis,o=n.makeCalcdata(e,"real"),u=a.makeCalcdata(e,"imag"),p=e._length,c=new Array(p),x=0;x<p;x++){var g=o[x],f=u[x],y=c[x]={};S(g)&&S(f)?(y.real=g,y.imag=f):y.real=k}return d(e,p),l(s,e),T(c,e),b(c,e),c}},65269:function(Q,z,t){var S=t(71828),k=t(34098),l=t(49508),T=t(11058),b=t(94039),d=t(82410),s=t(28908),e=t(47581).PTS_LINESONLY,i=t(48300);Q.exports=function(r,n,a,o){function u(x,g){return S.coerce(r,n,i,x,g)}var p=function(x,g,f,y){var v,m=y("real"),_=y("imag");return m&&_&&(v=Math.min(m.length,_.length)),g._length=v,v}(0,n,0,u);if(p){u("mode",p<e?"lines+markers":"lines"),u("text"),u("hovertext"),n.hoveron!=="fills"&&u("hovertemplate"),k.hasLines(n)&&(T(r,n,a,o,u,{backoff:!0}),b(r,n,u),u("connectgaps")),k.hasMarkers(n)&&l(r,n,a,o,u,{gradient:!0}),k.hasText(n)&&(u("texttemplate"),d(r,n,o,u));var c=[];(k.hasMarkers(n)||k.hasText(n))&&(u("cliponaxis"),u("marker.maxdisplayed"),c.push("points")),u("fill"),n.fill!=="none"&&(s(r,n,a,u),k.hasLines(n)||b(r,n,u)),n.fill!=="tonext"&&n.fill!=="toself"||c.push("fills"),u("hoveron",c.join("+")||"points"),S.coerceSelectionMarkerOpacity(n,u)}else n.visible=!1}},62047:function(Q,z,t){var S=t(89298);Q.exports=function(k,l,T){var b={},d=T[l.subplot]._subplot;return b.realLabel=S.tickText(d.radialAxis,k.real,!0).text,b.imagLabel=S.tickText(d.angularAxis,k.imag,!0).text,b}},11350:function(Q,z,t){var S=t(33720);function k(l,T,b,d){var s=b.radialAxis,e=b.angularAxis;s._hovertitle="real",e._hovertitle="imag";var i={};i[T.subplot]={_subplot:b};var r=T._module.formatLabels(l,T,i);d.realLabel=r.realLabel,d.imagLabel=r.imagLabel;var n=l.hi||T.hoverinfo,a=[];function o(p,c){a.push(p._hovertitle+": "+c)}if(!T.hovertemplate){var u=n.split("+");u.indexOf("all")!==-1&&(u=["real","imag","text"]),u.indexOf("real")!==-1&&o(s,d.realLabel),u.indexOf("imag")!==-1&&o(e,d.imagLabel),u.indexOf("text")!==-1&&d.text&&(a.push(d.text),delete d.text),d.extraText=a.join("<br>")}}Q.exports={hoverPoints:function(l,T,b,d){var s=S(l,T,b,d);if(s&&s[0].index!==!1){var e=s[0];if(e.index===void 0)return s;var i=l.subplot,r=e.cd[e.index],n=e.trace;if(i.isPtInside(r))return e.xLabelVal=void 0,e.yLabelVal=void 0,k(r,n,i,e),e.hovertemplate=n.hovertemplate,s}},makeHoverPointText:k}},85956:function(Q,z,t){Q.exports={moduleType:"trace",name:"scattersmith",basePlotModule:t(7504),categories:["smith","symbols","showLegend","scatter-like"],attributes:t(48300),supplyDefaults:t(65269),colorbar:t(4898),formatLabels:t(62047),calc:t(30621),plot:t(12480),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(11350).hoverPoints,selectPoints:t(98002),meta:{}}},12480:function(Q,z,t){var S=t(32663),k=t(50606).BADNUM,l=t(23893).smith;Q.exports=function(T,b,d){for(var s=b.layers.frontplot.select("g.scatterlayer"),e=b.xaxis,i=b.yaxis,r={xaxis:e,yaxis:i,plot:b.framework,layerClipId:b._hasClipOnAxisFalse?b.clipIds.forTraces:null},n=0;n<d.length;n++)for(var a=d[n],o=0;o<a.length;o++){o===0&&(a[0].trace._xA=e,a[0].trace._yA=i);var u=a[o],p=u.real;if(p===k)u.x=u.y=k;else{var c=l([p,u.imag]);u.x=c[0],u.y=c[1]}}S(T,r,d,s)}},50413:function(Q,z,t){var S=t(5386).fF,k=t(5386).si,l=t(82196),T=t(9012),b=t(50693),d=t(79952).P,s=t(1426).extendFlat,e=l.marker,i=l.line,r=e.line;Q.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:s({},l.mode,{dflt:"markers"}),text:s({},l.text,{}),texttemplate:k({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:s({},l.hovertext,{}),line:{color:i.color,width:i.width,dash:d,backoff:i.backoff,shape:s({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:l.connectgaps,cliponaxis:l.cliponaxis,fill:s({},l.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:l.fillcolor,marker:s({symbol:e.symbol,opacity:e.opacity,angle:e.angle,angleref:e.angleref,standoff:e.standoff,maxdisplayed:e.maxdisplayed,size:e.size,sizeref:e.sizeref,sizemin:e.sizemin,sizemode:e.sizemode,line:s({width:r.width,editType:"calc"},b("marker.line")),gradient:e.gradient,editType:"calc"},b("marker")),textfont:l.textfont,textposition:l.textposition,selected:l.selected,unselected:l.unselected,hoverinfo:s({},T.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:l.hoveron,hovertemplate:S()}},54337:function(Q,z,t){var S=t(92770),k=t(36922),l=t(75225),T=t(66279),b=t(47761).calcMarkerSize,d=["a","b","c"],s={a:["b","c"],b:["a","c"],c:["a","b"]};Q.exports=function(e,i){var r,n,a,o,u,p,c=e._fullLayout[i.subplot].sum,x=i.sum||c,g={a:i.a,b:i.b,c:i.c};for(r=0;r<d.length;r++)if(!g[a=d[r]]){for(u=g[s[a][0]],p=g[s[a][1]],o=new Array(u.length),n=0;n<u.length;n++)o[n]=x-u[n]-p[n];g[a]=o}var f,y,v,m,_,h,A=i._length,w=new Array(A);for(r=0;r<A;r++)f=g.a[r],y=g.b[r],v=g.c[r],S(f)&&S(y)&&S(v)?((m=c/((f=+f)+(y=+y)+(v=+v)))!=1&&(f*=m,y*=m,v*=m),h=f,_=v-y,w[r]={x:_,y:h,a:f,b:y,c:v}):w[r]={x:!1,y:!1};return b(i,A),k(e,i),l(w,i),T(w,i),w}},46008:function(Q,z,t){var S=t(71828),k=t(47581),l=t(34098),T=t(49508),b=t(11058),d=t(94039),s=t(82410),e=t(28908),i=t(50413);Q.exports=function(r,n,a,o){function u(y,v){return S.coerce(r,n,i,y,v)}var p,c=u("a"),x=u("b"),g=u("c");if(c?(p=c.length,x?(p=Math.min(p,x.length),g&&(p=Math.min(p,g.length))):p=g?Math.min(p,g.length):0):x&&g&&(p=Math.min(x.length,g.length)),p){n._length=p,u("sum"),u("text"),u("hovertext"),n.hoveron!=="fills"&&u("hovertemplate"),u("mode",p<k.PTS_LINESONLY?"lines+markers":"lines"),l.hasLines(n)&&(b(r,n,a,o,u,{backoff:!0}),d(r,n,u),u("connectgaps")),l.hasMarkers(n)&&T(r,n,a,o,u,{gradient:!0}),l.hasText(n)&&(u("texttemplate"),s(r,n,o,u));var f=[];(l.hasMarkers(n)||l.hasText(n))&&(u("cliponaxis"),u("marker.maxdisplayed"),f.push("points")),u("fill"),n.fill!=="none"&&(e(r,n,a,u),l.hasLines(n)||d(r,n,u)),n.fill!=="tonext"&&n.fill!=="toself"||f.push("fills"),u("hoveron",f.join("+")||"points"),S.coerceSelectionMarkerOpacity(n,u)}else n.visible=!1}},4524:function(Q){Q.exports=function(z,t,S,k,l){if(t.xa&&(z.xaxis=t.xa),t.ya&&(z.yaxis=t.ya),k[l]){var T=k[l];z.a=T.a,z.b=T.b,z.c=T.c}else z.a=t.a,z.b=t.b,z.c=t.c;return z}},93645:function(Q,z,t){var S=t(89298);Q.exports=function(k,l,T){var b={},d=T[l.subplot]._subplot;return b.aLabel=S.tickText(d.aaxis,k.a,!0).text,b.bLabel=S.tickText(d.baxis,k.b,!0).text,b.cLabel=S.tickText(d.caxis,k.c,!0).text,b}},47250:function(Q,z,t){var S=t(33720);Q.exports=function(k,l,T,b){var d=S(k,l,T,b);if(d&&d[0].index!==!1){var s=d[0];if(s.index===void 0){var e=1-s.y0/k.ya._length,i=k.xa._length,r=i*e/2,n=i-r;return s.x0=Math.max(Math.min(s.x0,n),r),s.x1=Math.max(Math.min(s.x1,n),r),d}var a=s.cd[s.index],o=s.trace,u=s.subplot;s.a=a.a,s.b=a.b,s.c=a.c,s.xLabelVal=void 0,s.yLabelVal=void 0;var p={};p[o.subplot]={_subplot:u};var c=o._module.formatLabels(a,o,p);s.aLabel=c.aLabel,s.bLabel=c.bLabel,s.cLabel=c.cLabel;var x=a.hi||o.hoverinfo,g=[];if(!o.hovertemplate){var f=x.split("+");f.indexOf("all")!==-1&&(f=["a","b","c"]),f.indexOf("a")!==-1&&y(u.aaxis,s.aLabel),f.indexOf("b")!==-1&&y(u.baxis,s.bLabel),f.indexOf("c")!==-1&&y(u.caxis,s.cLabel)}return s.extraText=g.join("<br>"),s.hovertemplate=o.hovertemplate,d}function y(v,m){g.push(v._hovertitle+": "+m)}}},52979:function(Q,z,t){Q.exports={attributes:t(50413),supplyDefaults:t(46008),colorbar:t(4898),formatLabels:t(93645),calc:t(54337),plot:t(7507),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(47250),selectPoints:t(98002),eventData:t(4524),moduleType:"trace",name:"scatterternary",basePlotModule:t(61639),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},7507:function(Q,z,t){var S=t(32663);Q.exports=function(k,l,T){var b=l.plotContainer;b.select(".scatterlayer").selectAll("*").remove();for(var d=l.xaxis,s=l.yaxis,e={xaxis:d,yaxis:s,plot:b,layerClipId:l._hasClipOnAxisFalse?l.clipIdRelative:null},i=l.layers.frontplot.select("g.scatterlayer"),r=0;r<T.length;r++){var n=T[r];n.length&&(n[0].trace._xA=d,n[0].trace._yA=s)}S(k,e,T,i)}},46880:function(Q,z,t){var S=t(82196),k=t(50693),l=t(12663).axisHoverFormat,T=t(5386).fF,b=t(42341),d=t(85555).idRegex,s=t(44467).templatedArray,e=t(1426).extendFlat,i=S.marker,r=i.line,n=e(k("marker.line",{editTypeOverride:"calc"}),{width:e({},r.width,{editType:"calc"}),editType:"calc"}),a=e(k("marker"),{symbol:i.symbol,angle:i.angle,size:e({},i.size,{editType:"markerSize"}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:i.opacity,colorbar:i.colorbar,line:n,editType:"calc"});function o(u){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:d[u],editType:"plot"}}}a.color.editType=a.cmin.editType=a.cmax.editType="style",Q.exports={dimensions:s("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:e({},b.text,{}),hovertext:e({},b.hovertext,{}),hovertemplate:T(),xhoverformat:l("x"),yhoverformat:l("y"),marker:a,xaxes:o("x"),yaxes:o("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:b.selected.marker,editType:"calc"},unselected:{marker:b.unselected.marker,editType:"calc"},opacity:b.opacity}},65017:function(Q,z,t){var S=t(73972),k=t(83312);Q.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:t(46880),supplyDefaults:t(25784),colorbar:t(4898),calc:t(87625),plot:t(79410),hoverPoints:t(8567).hoverPoints,selectPoints:t(8689),editStyle:t(28801),meta:{}},S.register(k)},16947:function(Q,z,t){var S=t(46075),k=t(73972),l=t(79749),T=t(27659).a0,b=t(93612),d=t(41675).getFromId,s=t(89298).shouldShowZeroLine,e="splom",i={};function r(a,o,u){for(var p=u.matrixOptions.data.length,c=o._visibleDims,x=u.viewOpts.ranges=new Array(p),g=0;g<c.length;g++){var f=c[g],y=x[g]=new Array(4),v=d(a,o._diag[f][0]);v&&(y[0]=v.r2l(v.range[0]),y[2]=v.r2l(v.range[1]));var m=d(a,o._diag[f][1]);m&&(y[1]=m.r2l(m.range[0]),y[3]=m.r2l(m.range[1]))}u.selectBatch.length||u.unselectBatch.length?u.matrix.update({ranges:x},{ranges:x}):u.matrix.update({ranges:x})}function n(a){var o=a._fullLayout,u=o._glcanvas.data()[0].regl,p=o._splomGrid;p||(p=o._splomGrid=S(u)),p.update(function(c){var x,g=c._context.plotGlPixelRatio,f=c._fullLayout,y=f._size,v=[0,0,f.width*g,f.height*g],m={};function _(q,te,$,W,Z,J){$*=g,W*=g,Z*=g,J*=g;var ee=te[q+"color"],re=te[q+"width"],ae=String(ee+re);ae in m?m[ae].data.push(NaN,NaN,$,W,Z,J):m[ae]={data:[$,W,Z,J],join:"rect",thickness:re*g,color:ee,viewport:v,range:v,overlay:!1}}for(x in f._splomSubplots){var h,A,w=f._plots[x],E=w.xaxis,L=w.yaxis,C=E._gridVals,P=L._gridVals,D=E._offset,G=E._length,I=L._length,H=y.b+L.domain[0]*y.h,N=-L._m,F=-N*L.r2l(L.range[0],L.calendar);if(E.showgrid)for(x=0;x<C.length;x++)h=D+E.l2p(C[x].x),_("grid",E,h,H,h,H+I);if(L.showgrid)for(x=0;x<P.length;x++)_("grid",L,D,A=H+F+N*P[x].x,D+G,A);s(c,E,L)&&(h=D+E.l2p(0),_("zeroline",E,h,H,h,H+I)),s(c,L,E)&&_("zeroline",L,D,A=H+F+0,D+G,A)}var V=[];for(x in m)V.push(m[x]);return V}(a))}Q.exports={name:e,attr:b.attr,attrRegex:b.attrRegex,layoutAttributes:b.layoutAttributes,supplyLayoutDefaults:b.supplyLayoutDefaults,drawFramework:b.drawFramework,plot:function(a){var o=a._fullLayout,u=k.getModule(e),p=T(a.calcdata,u)[0];l(a,["ANGLE_instanced_arrays","OES_element_index_uint"],i)&&(o._hasOnlyLargeSploms&&n(a),u.plot(a,{},p))},drag:function(a){var o=a.calcdata,u=a._fullLayout;u._hasOnlyLargeSploms&&n(a);for(var p=0;p<o.length;p++){var c=o[p][0].trace,x=u._splomScenes[c.uid];c.type==="splom"&&x&&x.matrix&&r(a,c,x)}},updateGrid:n,clean:function(a,o,u,p){var c,x={};if(p._splomScenes){for(c=0;c<a.length;c++){var g=a[c];g.type==="splom"&&(x[g.uid]=1)}for(c=0;c<u.length;c++){var f=u[c];if(!x[f.uid]){var y=p._splomScenes[f.uid];y&&y.destroy&&y.destroy(),p._splomScenes[f.uid]=null,delete p._splomScenes[f.uid]}}}Object.keys(p._splomScenes||{}).length===0&&delete p._splomScenes,p._splomGrid&&!o._hasOnlyLargeSploms&&p._hasOnlyLargeSploms&&(p._splomGrid.destroy(),p._splomGrid=null,delete p._splomGrid),b.clean(a,o,u,p)},updateFx:b.updateFx,toSVG:b.toSVG,reglPrecompiled:i}},87625:function(Q,z,t){var S=t(71828),k=t(41675),l=t(47761).calcMarkerSize,T=t(47761).calcAxisExpansion,b=t(36922),d=t(19635).markerSelection,s=t(19635).markerStyle,e=t(10164),i=t(50606).BADNUM,r=t(78232).TOO_MANY_POINTS;Q.exports=function(n,a){var o,u,p,c,x,g,f=a.dimensions,y=a._length,v={},m=v.cdata=[],_=v.data=[],h=a._visibleDims=[];function A(E,L){for(var C=E.makeCalcdata({v:L.values,vcalendar:a.calendar},"v"),P=0;P<C.length;P++)C[P]=C[P]===i?NaN:C[P];m.push(C),_.push(E.type==="log"?S.simpleMap(C,E.c2l):C)}for(o=0;o<f.length;o++)if((p=f[o]).visible){if(c=k.getFromId(n,a._diag[o][0]),x=k.getFromId(n,a._diag[o][1]),c&&x&&c.type!==x.type){S.log("Skipping splom dimension "+o+" with conflicting axis types");continue}c?(A(c,p),x&&x.type==="category"&&(x._categories=c._categories.slice())):A(x,p),h.push(o)}for(b(n,a),S.extendFlat(v,s(n,a)),g=m.length*y>r?v.sizeAvg||Math.max(v.size,3):l(a,y),u=0;u<h.length;u++)p=f[o=h[u]],c=k.getFromId(n,a._diag[o][0])||{},x=k.getFromId(n,a._diag[o][1])||{},T(n,a,c,x,m[u],m[u],g);var w=e(n,a);return w.matrix||(w.matrix=!0),w.matrixOptions=v,w.selectedOptions=d(n,a,a.selected),w.unselectedOptions=d(n,a,a.unselected),[{x:!1,y:!1,t:{},trace:a}]}},25784:function(Q,z,t){var S=t(71828),k=t(85501),l=t(46880),T=t(34098),b=t(49508),d=t(94397),s=t(68645).isOpenSymbol;function e(i,r){function n(o,u){return S.coerce(i,r,l.dimensions,o,u)}n("label");var a=n("values");a&&a.length?n("visible"):r.visible=!1,n("axis.type"),n("axis.matches")}Q.exports=function(i,r,n,a){function o(y,v){return S.coerce(i,r,l,y,v)}var u=k(i,r,{name:"dimensions",handleItemDefaults:e}),p=o("diagonal.visible"),c=o("showupperhalf"),x=o("showlowerhalf");if(d(r,u,"values")&&(p||c||x)){o("text"),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat"),b(i,r,n,a,o,{noAngleRef:!0,noStandOff:!0});var g=s(r.marker.symbol),f=T.isBubble(r);o("marker.line.width",g||f?1:0),function(y,v,m,_){var h,A,w=v.dimensions,E=w.length,L=v.showupperhalf,C=v.showlowerhalf,P=v.diagonal.visible,D=new Array(E),G=new Array(E);for(h=0;h<E;h++){var I=h?h+1:"";D[h]="x"+I,G[h]="y"+I}var H=_("xaxes",D),N=_("yaxes",G),F=v._diag=new Array(E);v._xaxes={},v._yaxes={};var V=[],q=[];function te(ce,pe,ve,we){if(ce){var xe=ce.charAt(0),ge=m._splomAxes[xe];if(v["_"+xe+"axes"][ce]=1,we.push(ce),!(ce in ge)){var Oe=ge[ce]={};ve&&(Oe.label=ve.label||"",ve.visible&&ve.axis&&(ve.axis.type&&(Oe.type=ve.axis.type),ve.axis.matches&&(Oe.matches=pe)))}}}var $=!P&&!C,W=!P&&!L;for(v._axesDim={},h=0;h<E;h++){var Z=w[h],J=h===0,ee=h===E-1,re=J&&$||ee&&W?void 0:H[h],ae=J&&W||ee&&$?void 0:N[h];te(re,ae,Z,V),te(ae,re,Z,q),F[h]=[re,ae],v._axesDim[re]=h,v._axesDim[ae]=h}for(h=0;h<V.length;h++)for(A=0;A<q.length;A++){var oe=V[h]+q[A];h>A&&L||h<A&&C?m._splomSubplots[oe]=1:h!==A||!P&&C&&L||(m._splomSubplots[oe]=1)}(!C||!P&&L&&C)&&(m._splomGridDflt.xside="bottom",m._splomGridDflt.yside="left")}(0,r,a,o),S.coerceSelectionMarkerOpacity(r,o)}else r.visible=!1}},28801:function(Q,z,t){var S=t(71828),k=t(36922),l=t(19635).markerStyle;Q.exports=function(T,b){var d=b.trace,s=T._fullLayout._splomScenes[d.uid];if(s){k(T,d),S.extendFlat(s.matrixOptions,l(T,d));var e=S.extendFlat({},s.matrixOptions,s.viewOpts);s.matrix.update(e,null)}}},35948:function(Q,z){z.getDimIndex=function(t,S){for(var k=S._id,l={x:0,y:1}[k.charAt(0)],T=t._visibleDims,b=0;b<T.length;b++){var d=T[b];if(t._diag[d][l]===k)return b}return!1}},8567:function(Q,z,t){var S=t(35948),k=t(20794).calcHover;Q.exports={hoverPoints:function(l,T,b){var d=l.cd[0].trace,s=l.scene.matrixOptions.cdata,e=l.xa,i=l.ya,r=e.c2p(T),n=i.c2p(b),a=l.distance,o=S.getDimIndex(d,e),u=S.getDimIndex(d,i);if(o===!1||u===!1)return[l];for(var p,c,x=s[o],g=s[u],f=a,y=0;y<x.length;y++){var v=x[y],m=g[y],_=e.c2p(v)-r,h=i.c2p(m)-n,A=Math.sqrt(_*_+h*h);A<f&&(f=c=A,p=y)}return l.index=p,l.distance=f,l.dxy=c,p===void 0?[l]:[k(l,x,g,d)]}}},6419:function(Q,z,t){var S=t(65017);S.basePlotModule=t(16947),Q.exports=S},79410:function(Q,z,t){var S=t(60487),k=t(71828),l=t(41675),T=t(64505).selectMode;function b(d,s){var e,i,r,n,a,o=d._fullLayout,u=o._size,p=s.trace,c=s.t,x=o._splomScenes[p.uid],g=x.matrixOptions,f=g.cdata,y=o._glcanvas.data()[0].regl,v=o.dragmode;if(f.length!==0){g.lower=p.showupperhalf,g.upper=p.showlowerhalf,g.diagonal=p.diagonal.visible;var m=p._visibleDims,_=f.length,h=x.viewOpts={};for(h.ranges=new Array(_),h.domains=new Array(_),a=0;a<m.length;a++){r=m[a];var A=h.ranges[a]=new Array(4),w=h.domains[a]=new Array(4);(e=l.getFromId(d,p._diag[r][0]))&&(A[0]=e._rl[0],A[2]=e._rl[1],w[0]=e.domain[0],w[2]=e.domain[1]),(i=l.getFromId(d,p._diag[r][1]))&&(A[1]=i._rl[0],A[3]=i._rl[1],w[1]=i.domain[0],w[3]=i.domain[1])}var E=d._context.plotGlPixelRatio,L=u.l*E,C=u.b*E,P=u.w*E,D=u.h*E;h.viewport=[L,C,P+L,D+C],x.matrix===!0&&(x.matrix=S(y));var G=o.clickmode.indexOf("select")>-1,I=!0;if(T(v)||p.selectedpoints||G){var H=p._length;if(p.selectedpoints){x.selectBatch=p.selectedpoints;var N=p.selectedpoints,F={};for(r=0;r<N.length;r++)F[N[r]]=!0;var V=[];for(r=0;r<H;r++)F[r]||V.push(r);x.unselectBatch=V}var q=c.xpx=new Array(_),te=c.ypx=new Array(_);for(a=0;a<m.length;a++){if(r=m[a],e=l.getFromId(d,p._diag[r][0]))for(q[a]=new Array(H),n=0;n<H;n++)q[a][n]=e.c2p(f[a][n]);if(i=l.getFromId(d,p._diag[r][1]))for(te[a]=new Array(H),n=0;n<H;n++)te[a][n]=i.c2p(f[a][n])}if(x.selectBatch.length||x.unselectBatch.length){var $=k.extendFlat({},g,x.unselectedOptions,h),W=k.extendFlat({},g,x.selectedOptions,h);x.matrix.update($,W),I=!1}}else c.xpx=c.ypx=null;if(I){var Z=k.extendFlat({},g,h);x.matrix.update(Z,null)}}}Q.exports=function(d,s,e){if(e.length)for(var i=0;i<e.length;i++)b(d,e[i][0])}},10164:function(Q,z,t){var S=t(71828);Q.exports=function(k,l){var T=k._fullLayout,b=l.uid,d=T._splomScenes;d||(d=T._splomScenes={});var s={dirty:!0,selectBatch:[],unselectBatch:[]},e=d[l.uid];return e||((e=d[b]=S.extendFlat({},s,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){e.matrix&&e.matrix.draw&&(e.selectBatch.length||e.unselectBatch.length?e.matrix.draw(e.unselectBatch,e.selectBatch):e.matrix.draw()),e.dirty=!1},e.destroy=function(){e.matrix&&e.matrix.destroy&&e.matrix.destroy(),e.matrixOptions=null,e.selectBatch=null,e.unselectBatch=null,e=null}),e.dirty||S.extendFlat(e,s),e}},8689:function(Q,z,t){var S=t(71828),k=S.pushUnique,l=t(34098),T=t(35948);Q.exports=function(b,d){var s=b.cd,e=s[0].trace,i=s[0].t,r=b.scene,n=r.matrixOptions.cdata,a=b.xaxis,o=b.yaxis,u=[];if(!r)return u;var p=!l.hasMarkers(e)&&!l.hasText(e);if(e.visible!==!0||p)return u;var c=T.getDimIndex(e,a),x=T.getDimIndex(e,o);if(c===!1||x===!1)return u;var g=i.xpx[c],f=i.ypx[x],y=n[c],v=n[x],m=(b.scene.selectBatch||[]).slice(),_=[];if(d!==!1&&!d.degenerate)for(var h=0;h<y.length;h++)d.contains([g[h],f[h]],null,h,b)?(u.push({pointNumber:h,x:y[h],y:v[h]}),k(m,h)):m.indexOf(h)!==-1?k(m,h):_.push(h);var A=r.matrixOptions;return m.length||_.length?r.selectBatch.length||r.unselectBatch.length||r.matrix.update(r.unselectedOptions,S.extendFlat({},A,r.selectedOptions,r.viewOpts)):r.matrix.update(A,null),r.selectBatch=m,r.unselectBatch=_,u}},21850:function(Q,z,t){var S=t(50693),k=t(12663).axisHoverFormat,l=t(5386).fF,T=t(2418),b=t(9012),d=t(1426).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:l({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:d({},b.showlegend,{dflt:!1})};d(s,S("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(e){s[e]=T[e]}),s.hoverinfo=d({},b.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,Q.exports=s},88489:function(Q,z,t){var S=t(71828),k=t(78803);function l(d){var s,e,i,r,n,a,o,u,p,c,x,g,f=d._x,y=d._y,v=d._z,m=d._len,_=-1/0,h=1/0,A=-1/0,w=1/0,E=-1/0,L=1/0,C="";for(m&&(o=f[0],p=y[0],x=v[0]),m>1&&(u=f[m-1],c=y[m-1],g=v[m-1]),s=0;s<m;s++)_=Math.max(_,f[s]),h=Math.min(h,f[s]),A=Math.max(A,y[s]),w=Math.min(w,y[s]),E=Math.max(E,v[s]),L=Math.min(L,v[s]),r||f[s]===o||(r=!0,C+="x"),n||y[s]===p||(n=!0,C+="y"),a||v[s]===x||(a=!0,C+="z");r||(C+="x"),n||(C+="y"),a||(C+="z");var P=T(d._x),D=T(d._y),G=T(d._z);C=(C=(C=C.replace("x",(o>u?"-":"+")+"x")).replace("y",(p>c?"-":"+")+"y")).replace("z",(x>g?"-":"+")+"z");var I=function(){m=0,P=[],D=[],G=[]};(!m||m<P.length*D.length*G.length)&&I();var H=function(xe){return xe==="x"?f:xe==="y"?y:v},N=function(xe){return xe==="x"?P:xe==="y"?D:G},F=function(xe){return xe[m-1]<xe[0]?-1:1},V=H(C[1]),q=H(C[3]),te=H(C[5]),$=N(C[1]).length,W=N(C[3]).length,Z=N(C[5]).length,J=!1,ee=function(xe,ge,Oe){return $*(W*xe+ge)+Oe},re=F(H(C[1])),ae=F(H(C[3])),oe=F(H(C[5]));for(s=0;s<Z-1;s++){for(e=0;e<W-1;e++){for(i=0;i<$-1;i++){var ce=ee(s,e,i),pe=ee(s,e,i+1),ve=ee(s,e+1,i),we=ee(s+1,e,i);if(V[ce]*re<V[pe]*re&&q[ce]*ae<q[ve]*ae&&te[ce]*oe<te[we]*oe||(J=!0),J)break}if(J)break}if(J)break}return J&&(S.warn("Encountered arbitrary coordinates! Unable to input data grid."),I()),{xMin:h,yMin:w,zMin:L,xMax:_,yMax:A,zMax:E,Xs:P,Ys:D,Zs:G,len:m,fill:C}}function T(d){return S.distinctVals(d).vals}function b(d,s){if(s===void 0&&(s=d.length),S.isTypedArray(d))return d.subarray(0,s);for(var e=[],i=0;i<s;i++)e[i]=+d[i];return e}Q.exports={calc:function(d,s){s._len=Math.min(s.u.length,s.v.length,s.w.length,s.x.length,s.y.length,s.z.length),s._u=b(s.u,s._len),s._v=b(s.v,s._len),s._w=b(s.w,s._len),s._x=b(s.x,s._len),s._y=b(s.y,s._len),s._z=b(s.z,s._len);var e=l(s);s._gridFill=e.fill,s._Xs=e.Xs,s._Ys=e.Ys,s._Zs=e.Zs,s._len=e.len;var i,r,n,a=0;s.starts&&(i=b(s.starts.x||[]),r=b(s.starts.y||[]),n=b(s.starts.z||[]),a=Math.min(i.length,r.length,n.length)),s._startsX=i||[],s._startsY=r||[],s._startsZ=n||[];var o,u=0,p=1/0;for(o=0;o<s._len;o++){var c=s._u[o],x=s._v[o],g=s._w[o],f=Math.sqrt(c*c+x*x+g*g);u=Math.max(u,f),p=Math.min(p,f)}for(k(d,s,{vals:[p,u],containerStr:"",cLetter:"c"}),o=0;o<a;o++){var y=i[o];e.xMax=Math.max(e.xMax,y),e.xMin=Math.min(e.xMin,y);var v=r[o];e.yMax=Math.max(e.yMax,v),e.yMin=Math.min(e.yMin,v);var m=n[o];e.zMax=Math.max(e.zMax,m),e.zMin=Math.min(e.zMin,m)}s._slen=a,s._normMax=u,s._xbnds=[e.xMin,e.xMax],s._ybnds=[e.yMin,e.yMax],s._zbnds=[e.zMin,e.zMax]},filter:b,processGrid:l}},90154:function(Q,z,t){var S=t(9330).gl_streamtube3d,k=S.createTubeMesh,l=t(71828),T=t(81697).parseColorScale,b=t(21081).extractOpts,d=t(90060),s={xaxis:0,yaxis:1,zaxis:2};function e(o,u){this.scene=o,this.uid=u,this.mesh=null,this.data=null}var i=e.prototype;function r(o){var u=o.length;return u>2?o.slice(1,u-1):u===2?[(o[0]+o[1])/2]:o}function n(o){var u=o.length;return u===1?[.5,.5]:[o[1]-o[0],o[u-1]-o[u-2]]}function a(o,u){var p=o.fullSceneLayout,c=o.dataScale,x=u._len,g={};function f($,W){var Z=p[W],J=c[s[W]];return l.simpleMap($,function(ee){return Z.d2l(ee)*J})}if(g.vectors=d(f(u._u,"xaxis"),f(u._v,"yaxis"),f(u._w,"zaxis"),x),!x)return{positions:[],cells:[]};var y=f(u._Xs,"xaxis"),v=f(u._Ys,"yaxis"),m=f(u._Zs,"zaxis");if(g.meshgrid=[y,v,m],g.gridFill=u._gridFill,u._slen)g.startingPositions=d(f(u._startsX,"xaxis"),f(u._startsY,"yaxis"),f(u._startsZ,"zaxis"));else{for(var _=v[0],h=r(y),A=r(m),w=new Array(h.length*A.length),E=0,L=0;L<h.length;L++)for(var C=0;C<A.length;C++)w[E++]=[h[L],_,A[C]];g.startingPositions=w}g.colormap=T(u),g.tubeSize=u.sizeref,g.maxLength=u.maxdisplayed;var P=f(u._xbnds,"xaxis"),D=f(u._ybnds,"yaxis"),G=f(u._zbnds,"zaxis"),I=n(y),H=n(v),N=n(m),F=[[P[0]-I[0],D[0]-H[0],G[0]-N[0]],[P[1]+I[1],D[1]+H[1],G[1]+N[1]]],V=S(g,F),q=b(u);V.vertexIntensityBounds=[q.min/u._normMax,q.max/u._normMax];var te=u.lightposition;return V.lightPosition=[te.x,te.y,te.z],V.ambient=u.lighting.ambient,V.diffuse=u.lighting.diffuse,V.specular=u.lighting.specular,V.roughness=u.lighting.roughness,V.fresnel=u.lighting.fresnel,V.opacity=u.opacity,u._pad=V.tubeScale*u.sizeref*2,V}i.handlePick=function(o){var u=this.scene.fullSceneLayout,p=this.scene.dataScale;function c(f,y){var v=u[y],m=p[s[y]];return v.l2c(f)/m}if(o.object===this.mesh){var x=o.data.position,g=o.data.velocity;return o.traceCoordinate=[c(x[0],"xaxis"),c(x[1],"yaxis"),c(x[2],"zaxis"),c(g[0],"xaxis"),c(g[1],"yaxis"),c(g[2],"zaxis"),o.data.intensity*this.data._normMax,o.data.divergence],o.textLabel=this.data.hovertext||this.data.text,!0}},i.update=function(o){this.data=o;var u=a(this.scene,o);this.mesh.update(u)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},Q.exports=function(o,u){var p=o.glplot.gl,c=a(o,u),x=k(p,c),g=new e(o,u.uid);return g.mesh=x,g.data=u,x._trace=g,o.glplot.add(x),g}},22459:function(Q,z,t){var S=t(71828),k=t(1586),l=t(21850);Q.exports=function(T,b,d,s){function e(p,c){return S.coerce(T,b,l,p,c)}var i=e("u"),r=e("v"),n=e("w"),a=e("x"),o=e("y"),u=e("z");i&&i.length&&r&&r.length&&n&&n.length&&a&&a.length&&o&&o.length&&u&&u.length?(e("starts.x"),e("starts.y"),e("starts.z"),e("maxdisplayed"),e("sizeref"),e("lighting.ambient"),e("lighting.diffuse"),e("lighting.specular"),e("lighting.roughness"),e("lighting.fresnel"),e("lightposition.x"),e("lightposition.y"),e("lightposition.z"),k(T,b,s,e,{prefix:"",cLetter:"c"}),e("text"),e("hovertext"),e("hovertemplate"),e("uhoverformat"),e("vhoverformat"),e("whoverformat"),e("xhoverformat"),e("yhoverformat"),e("zhoverformat"),b._length=null):b.visible=!1}},61510:function(Q,z,t){Q.exports={moduleType:"trace",name:"streamtube",basePlotModule:t(58547),categories:["gl3d","showLegend"],attributes:t(21850),supplyDefaults:t(22459),colorbar:{min:"cmin",max:"cmax"},calc:t(88489).calc,plot:t(90154),eventData:function(S,k){return S.tubex=S.x,S.tubey=S.y,S.tubez=S.z,S.tubeu=k.traceCoordinate[3],S.tubev=k.traceCoordinate[4],S.tubew=k.traceCoordinate[5],S.norm=k.traceCoordinate[6],S.divergence=k.traceCoordinate[7],delete S.x,delete S.y,delete S.z,S},meta:{}}},57564:function(Q,z,t){var S=t(9012),k=t(5386).fF,l=t(5386).si,T=t(50693),b=t(27670).Y,d=t(34e3),s=t(7055),e=t(1426).extendFlat;Q.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:e({colors:{valType:"data_array",editType:"calc"},line:{color:e({},d.marker.line.color,{dflt:null}),width:e({},d.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:d.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:l({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:d.hovertext,hoverinfo:e({},S.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:k({},{keys:s.eventDataKeys}),textfont:d.textfont,insidetextorientation:d.insidetextorientation,insidetextfont:d.insidetextfont,outsidetextfont:e({},d.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:d.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:b({name:"sunburst",trace:!0,editType:"calc"})}},66888:function(Q,z,t){var S=t(74875);z.name="sunburst",z.plot=function(k,l,T,b){S.plotBasePlot(z.name,k,l,T,b)},z.clean=function(k,l,T,b){S.cleanBasePlot(z.name,k,l,T,b)}},52147:function(Q,z,t){var S=t(674),k=t(92770),l=t(71828),T=t(21081).makeColorScaleFuncFromTrace,b=t(32354).makePullColorFn,d=t(32354).generateExtendedColors,s=t(21081).calc,e=t(50606).ALMOST_EQUAL,i={},r={},n={};function a(o,u,p){var c=0,x=o.children;if(x){for(var g=x.length,f=0;f<g;f++)c+=a(x[f],u,p);p.branches&&c++}else p.leaves&&c++;return o.value=o.data.data.value=c,u._values||(u._values=[]),u._values[o.data.data.i]=c,c}z.calc=function(o,u){var p,c,x,g,f,y,v=o._fullLayout,m=u.ids,_=l.isArrayOrTypedArray(m),h=u.labels,A=u.parents,w=u.values,E=l.isArrayOrTypedArray(w),L=[],C={},P={},D=function(oe){return oe||typeof oe=="number"},G=function(oe){return!E||k(w[oe])&&w[oe]>=0};_?(p=Math.min(m.length,A.length),c=function(oe){return D(m[oe])&&G(oe)},x=function(oe){return String(m[oe])}):(p=Math.min(h.length,A.length),c=function(oe){return D(h[oe])&&G(oe)},x=function(oe){return String(h[oe])}),E&&(p=Math.min(p,w.length));for(var I=0;I<p;I++)if(c(I)){var H=x(I),N=D(A[I])?String(A[I]):"",F={i:I,id:H,pid:N,label:D(h[I])?String(h[I]):""};E&&(F.v=+w[I]),L.push(F),f=H,C[g=N]?C[g].push(f):C[g]=[f],P[f]=1}if(C[""]){if(C[""].length>1){for(var V=l.randstr(),q=0;q<L.length;q++)L[q].pid===""&&(L[q].pid=V);L.unshift({hasMultipleRoots:!0,id:V,pid:"",label:""})}}else{var te,$=[];for(te in C)P[te]||$.push(te);if($.length!==1)return l.warn(["Multiple implied roots, cannot build",u.type,"hierarchy of",u.name+".","These roots include:",$.join(", ")].join(" "));te=$[0],L.unshift({hasImpliedRoot:!0,id:te,pid:"",label:te})}try{y=S.stratify().id(function(oe){return oe.id}).parentId(function(oe){return oe.pid})(L)}catch(oe){return l.warn(["Failed to build",u.type,"hierarchy of",u.name+".","Error:",oe.message].join(" "))}var W=S.hierarchy(y),Z=!1;if(E)switch(u.branchvalues){case"remainder":W.sum(function(oe){return oe.data.v});break;case"total":W.each(function(oe){var ce=oe.data.data,pe=ce.v;if(oe.children){var ve=oe.children.reduce(function(we,xe){return we+xe.data.data.v},0);if((ce.hasImpliedRoot||ce.hasMultipleRoots)&&(pe=ve),pe<ve*e)return Z=!0,l.warn(["Total value for node",oe.data.data.id,"of",u.name,"is smaller than the sum of its children.",`
parent value =`,pe,`
children sum =`,ve].join(" "))}oe.value=pe})}else a(W,u,{branches:u.count.indexOf("branches")!==-1,leaves:u.count.indexOf("leaves")!==-1});if(!Z){var J,ee;u.sort&&W.sort(function(oe,ce){return ce.value-oe.value});var re=u.marker.colors||[],ae=!!re.length;return u._hasColorscale?(ae||(re=E?u.values:u._values),s(o,u,{vals:re,containerStr:"marker",cLetter:"c"}),ee=T(u.marker)):J=b(v["_"+u.type+"colormap"]),W.each(function(oe){var ce=oe.data.data;ce.color=u._hasColorscale?ee(re[ce.i]):J(re[ce.i],ce.id)}),L[0].hierarchy=W,L}},z._runCrossTraceCalc=function(o,u){var p=u._fullLayout,c=u.calcdata,x=p[o+"colorway"],g=p["_"+o+"colormap"];p["extend"+o+"colors"]&&(x=d(x,o==="icicle"?n:o==="treemap"?r:i));var f,y=0;function v(h){var A=h.data.data,w=A.id;A.color===!1&&(g[w]?A.color=g[w]:h.parent?h.parent.parent?A.color=h.parent.data.data.color:(g[w]=A.color=x[y%x.length],y++):A.color=f)}for(var m=0;m<c.length;m++){var _=c[m][0];_.trace.type===o&&_.hierarchy&&(f=_.trace.root.color,_.hierarchy.each(v))}},z.crossTraceCalc=function(o){return z._runCrossTraceCalc("sunburst",o)}},7055:function(Q){Q.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},17094:function(Q,z,t){var S=t(71828),k=t(57564),l=t(27670).c,T=t(90769).handleText,b=t(21081),d=b.hasColorscale,s=b.handleDefaults;Q.exports=function(e,i,r,n){function a(g,f){return S.coerce(e,i,k,g,f)}var o=a("labels"),u=a("parents");if(o&&o.length&&u&&u.length){var p=a("values");p&&p.length?a("branchvalues"):a("count"),a("level"),a("maxdepth"),a("marker.line.width")&&a("marker.line.color",n.paper_bgcolor),a("marker.colors");var c=i._hasColorscale=d(e,"marker","colors")||(e.marker||{}).coloraxis;c&&s(e,i,n,a,{prefix:"marker.",cLetter:"c"}),a("leaf.opacity",c?1:.7);var x=a("text");a("texttemplate"),i.texttemplate||a("textinfo",Array.isArray(x)?"text+label":"label"),a("hovertext"),a("hovertemplate"),T(e,i,n,a,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),a("insidetextorientation"),a("sort"),a("rotation"),a("root.color"),l(i,n,a),i._length=null}else i.visible=!1}},83523:function(Q,z,t){var S=t(39898),k=t(73972),l=t(23469).appendArrayPointValue,T=t(30211),b=t(71828),d=t(11086),s=t(2791),e=t(53581).formatPieValue;function i(r,n,a){for(var o=r.data.data,u={curveNumber:n.index,pointNumber:o.i,data:n._input,fullData:n},p=0;p<a.length;p++){var c=a[p];c in r&&(u[c]=r[c])}return"parentString"in r&&!s.isHierarchyRoot(r)&&(u.parent=r.parentString),l(u,n,o.i),u}Q.exports=function(r,n,a,o,u){var p=o[0],c=p.trace,x=p.hierarchy,g=c.type==="sunburst",f=c.type==="treemap"||c.type==="icicle";"_hasHoverLabel"in c||(c._hasHoverLabel=!1),"_hasHoverEvent"in c||(c._hasHoverEvent=!1),r.on("mouseover",function(y){var v=a._fullLayout;if(!a._dragging&&v.hovermode!==!1){var m,_=a._fullData[c.index],h=y.data.data,A=h.i,w=s.isHierarchyRoot(y),E=s.getParent(x,y),L=s.getValue(y),C=function(re){return b.castOption(_,A,re)},P=C("hovertemplate"),D=T.castHoverinfo(_,v,A),G=v.separators;if(P||D&&D!=="none"&&D!=="skip"){var I,H;g&&(I=p.cx+y.pxmid[0]*(1-y.rInscribed),H=p.cy+y.pxmid[1]*(1-y.rInscribed)),f&&(I=y._hoverX,H=y._hoverY);var N,F={},V=[],q=[],te=function(re){return V.indexOf(re)!==-1};D&&(V=D==="all"?_._module.attributes.hoverinfo.flags:D.split("+")),F.label=h.label,te("label")&&F.label&&q.push(F.label),h.hasOwnProperty("v")&&(F.value=h.v,F.valueLabel=e(F.value,G),te("value")&&q.push(F.valueLabel)),F.currentPath=y.currentPath=s.getPath(y.data),te("current path")&&!w&&q.push(F.currentPath);var $=[],W=function(){$.indexOf(N)===-1&&(q.push(N),$.push(N))};F.percentParent=y.percentParent=L/s.getValue(E),F.parent=y.parentString=s.getPtLabel(E),te("percent parent")&&(N=s.formatPercent(F.percentParent,G)+" of "+F.parent,W()),F.percentEntry=y.percentEntry=L/s.getValue(n),F.entry=y.entry=s.getPtLabel(n),!te("percent entry")||w||y.onPathbar||(N=s.formatPercent(F.percentEntry,G)+" of "+F.entry,W()),F.percentRoot=y.percentRoot=L/s.getValue(x),F.root=y.root=s.getPtLabel(x),te("percent root")&&!w&&(N=s.formatPercent(F.percentRoot,G)+" of "+F.root,W()),F.text=C("hovertext")||C("text"),te("text")&&(N=F.text,b.isValidTextValue(N)&&q.push(N)),m=[i(y,_,u.eventDataKeys)];var Z={trace:_,y:H,_x0:y._x0,_x1:y._x1,_y0:y._y0,_y1:y._y1,text:q.join("<br>"),name:P||te("name")?_.name:void 0,color:C("hoverlabel.bgcolor")||h.color,borderColor:C("hoverlabel.bordercolor"),fontFamily:C("hoverlabel.font.family"),fontSize:C("hoverlabel.font.size"),fontColor:C("hoverlabel.font.color"),nameLength:C("hoverlabel.namelength"),textAlign:C("hoverlabel.align"),hovertemplate:P,hovertemplateLabels:F,eventData:m};g&&(Z.x0=I-y.rInscribed*y.rpx1,Z.x1=I+y.rInscribed*y.rpx1,Z.idealAlign=y.pxmid[0]<0?"left":"right"),f&&(Z.x=I,Z.idealAlign=I<0?"left":"right");var J=[];T.loneHover(Z,{container:v._hoverlayer.node(),outerContainer:v._paper.node(),gd:a,inOut_bbox:J}),m[0].bbox=J[0],c._hasHoverLabel=!0}if(f){var ee=r.select("path.surface");u.styleOne(ee,y,_,{hovered:!0})}c._hasHoverEvent=!0,a.emit("plotly_hover",{points:m||[i(y,_,u.eventDataKeys)],event:S.event})}}),r.on("mouseout",function(y){var v=a._fullLayout,m=a._fullData[c.index],_=S.select(this).datum();if(c._hasHoverEvent&&(y.originalEvent=S.event,a.emit("plotly_unhover",{points:[i(_,m,u.eventDataKeys)],event:S.event}),c._hasHoverEvent=!1),c._hasHoverLabel&&(T.loneUnhover(v._hoverlayer.node()),c._hasHoverLabel=!1),f){var h=r.select("path.surface");u.styleOne(h,_,m,{hovered:!1})}}),r.on("click",function(y){var v=a._fullLayout,m=a._fullData[c.index],_=g&&(s.isHierarchyRoot(y)||s.isLeaf(y)),h=s.getPtId(y),A=s.isEntry(y)?s.findEntryWithChild(x,h):s.findEntryWithLevel(x,h),w=s.getPtId(A),E={points:[i(y,m,u.eventDataKeys)],event:S.event};_||(E.nextLevel=w);var L=d.triggerHandler(a,"plotly_"+c.type+"click",E);if(L!==!1&&v.hovermode&&(a._hoverdata=[i(y,m,u.eventDataKeys)],T.click(a,S.event)),!_&&L!==!1&&!a._dragging&&!a._transitioning){k.call("_storeDirectGUIEdit",m,v._tracePreGUI[m.uid],{level:m.level});var C={data:[{level:w}],traces:[c.index]},P={frame:{redraw:!1,duration:u.transitionTime},transition:{duration:u.transitionTime,easing:u.transitionEasing},mode:"immediate",fromcurrent:!0};T.loneUnhover(v._hoverlayer.node()),k.call("animate",a,C,P)}})}},2791:function(Q,z,t){var S=t(71828),k=t(7901),l=t(6964),T=t(53581);function b(d){return d.data.data.pid}z.findEntryWithLevel=function(d,s){var e;return s&&d.eachAfter(function(i){if(z.getPtId(i)===s)return e=i.copy()}),e||d},z.findEntryWithChild=function(d,s){var e;return d.eachAfter(function(i){for(var r=i.children||[],n=0;n<r.length;n++){var a=r[n];if(z.getPtId(a)===s)return e=i.copy()}}),e||d},z.isEntry=function(d){return!d.parent},z.isLeaf=function(d){return!d.children},z.getPtId=function(d){return d.data.data.id},z.getPtLabel=function(d){return d.data.data.label},z.getValue=function(d){return d.value},z.isHierarchyRoot=function(d){return b(d)===""},z.setSliceCursor=function(d,s,e){var i=e.isTransitioning;if(!i){var r=d.datum();i=e.hideOnRoot&&z.isHierarchyRoot(r)||e.hideOnLeaves&&z.isLeaf(r)}l(d,i?null:"pointer")},z.getInsideTextFontKey=function(d,s,e,i,r){var n=(r||{}).onPathbar?"pathbar.textfont":"insidetextfont",a=e.data.data.i;return S.castOption(s,a,n+"."+d)||S.castOption(s,a,"textfont."+d)||i.size},z.getOutsideTextFontKey=function(d,s,e,i){var r=e.data.data.i;return S.castOption(s,r,"outsidetextfont."+d)||S.castOption(s,r,"textfont."+d)||i.size},z.isOutsideText=function(d,s){return!d._hasColorscale&&z.isHierarchyRoot(s)},z.determineTextFont=function(d,s,e,i){return z.isOutsideText(d,s)?function(r,n,a){return{color:z.getOutsideTextFontKey("color",r,n,a),family:z.getOutsideTextFontKey("family",r,n,a),size:z.getOutsideTextFontKey("size",r,n,a)}}(d,s,e):function(r,n,a,o){var u=(o||{}).onPathbar,p=n.data.data,c=p.i,x=S.castOption(r,c,(u?"pathbar.textfont":"insidetextfont")+".color");return!x&&r._input.textfont&&(x=S.castOption(r._input,c,"textfont.color")),{color:x||k.contrast(p.color),family:z.getInsideTextFontKey("family",r,n,a,o),size:z.getInsideTextFontKey("size",r,n,a,o)}}(d,s,e,i)},z.hasTransition=function(d){return!!(d&&d.duration>0)},z.getMaxDepth=function(d){return d.maxdepth>=0?d.maxdepth:1/0},z.isHeader=function(d,s){return!(z.isLeaf(d)||d.depth===s._maxDepth-1)},z.getParent=function(d,s){return z.findEntryWithLevel(d,b(s))},z.listPath=function(d,s){var e=d.parent;if(!e)return[];var i=s?[e.data[s]]:[e];return z.listPath(e,s).concat(i)},z.getPath=function(d){return z.listPath(d,"label").join("/")+"/"},z.formatValue=T.formatPieValue,z.formatPercent=function(d,s){var e=S.formatPercent(d,0);return e==="0%"&&(e=T.formatPiePercent(d,s)),e}},87619:function(Q,z,t){Q.exports={moduleType:"trace",name:"sunburst",basePlotModule:t(66888),categories:[],animatable:!0,attributes:t(57564),layoutAttributes:t(2654),supplyDefaults:t(17094),supplyLayoutDefaults:t(57034),calc:t(52147).calc,crossTraceCalc:t(52147).crossTraceCalc,plot:t(24714).plot,style:t(29969).style,colorbar:t(4898),meta:{}}},2654:function(Q){Q.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57034:function(Q,z,t){var S=t(71828),k=t(2654);Q.exports=function(l,T){function b(d,s){return S.coerce(l,T,k,d,s)}b("sunburstcolorway",T.colorway),b("extendsunburstcolors")}},24714:function(Q,z,t){var S=t(39898),k=t(674),l=t(81684).sX,T=t(91424),b=t(71828),d=t(63893),s=t(72597),e=s.recordMinTextSize,i=s.clearMinTextSize,r=t(14575),n=t(53581).getRotationAngle,a=r.computeTransform,o=r.transformInsideText,u=t(29969).styleOne,p=t(16688).resizeText,c=t(83523),x=t(7055),g=t(2791);function f(v,m,_,h){var A=v._context.staticPlot,w=v._fullLayout,E=!w.uniformtext.mode&&g.hasTransition(h),L=S.select(_).selectAll("g.slice"),C=m[0],P=C.trace,D=C.hierarchy,G=g.findEntryWithLevel(D,P.level),I=g.getMaxDepth(P),H=w._size,N=P.domain,F=H.w*(N.x[1]-N.x[0]),V=H.h*(N.y[1]-N.y[0]),q=.5*Math.min(F,V),te=C.cx=H.l+H.w*(N.x[1]+N.x[0])/2,$=C.cy=H.t+H.h*(1-N.y[0])-V/2;if(!G)return L.remove();var W=null,Z={};E&&L.each(function(le){Z[g.getPtId(le)]={rpx0:le.rpx0,rpx1:le.rpx1,x0:le.x0,x1:le.x1,transform:le.transform},!W&&g.isEntry(le)&&(W=le)});var J=function(le){return k.partition().size([2*Math.PI,le.height+1])(le)}(G).descendants(),ee=G.height+1,re=0,ae=I;C.hasMultipleRoots&&g.isHierarchyRoot(G)&&(J=J.slice(1),ee-=1,re=1,ae+=1),J=J.filter(function(le){return le.y1<=ae});var oe=n(P.rotation);oe&&J.forEach(function(le){le.x0+=oe,le.x1+=oe});var ce=Math.min(ee,I),pe=function(le){return(le-re)/ce*q},ve=function(le,ne){return[le*Math.cos(ne),-le*Math.sin(ne)]},we=function(le){return b.pathAnnulus(le.rpx0,le.rpx1,le.x0,le.x1,te,$)},xe=function(le){return te+y(le)[0]*(le.transform.rCenter||0)+(le.transform.x||0)},ge=function(le){return $+y(le)[1]*(le.transform.rCenter||0)+(le.transform.y||0)};(L=L.data(J,g.getPtId)).enter().append("g").classed("slice",!0),E?L.exit().transition().each(function(){var le=S.select(this);le.select("path.surface").transition().attrTween("d",function(ne){var me=function(Ee){var be,De=g.getPtId(Ee),Ue=Z[De],he=Z[g.getPtId(G)];if(he){var ke=(Ee.x1>he.x1?2*Math.PI:0)+oe;be=Ee.rpx1<he.rpx1?{x0:Ee.x0,x1:Ee.x1,rpx0:0,rpx1:0}:{x0:ke,x1:ke,rpx0:Ee.rpx0,rpx1:Ee.rpx1}}else{var _e,Ce=g.getPtId(Ee.parent);L.each(function($e){if(g.getPtId($e)===Ce)return _e=$e});var Fe,Re=_e.children;Re.forEach(function($e,st){if(g.getPtId($e)===De)return Fe=st});var He=Re.length,Ge=l(_e.x0,_e.x1);be={rpx0:q,rpx1:q,x0:Ge(Fe/He),x1:Ge((Fe+1)/He)}}return l(Ue,be)}(ne);return function(Ee){return we(me(Ee))}}),le.select("g.slicetext").attr("opacity",0)}).remove():L.exit().remove(),L.order();var Oe=null;if(E&&W){var Ae=g.getPtId(W);L.each(function(le){Oe===null&&g.getPtId(le)===Ae&&(Oe=le.x1)})}var Te=L;function se(le){var ne=le.parent,me=Z[g.getPtId(ne)],Ee={};if(me){var be=ne.children,De=be.indexOf(le),Ue=be.length,he=l(me.x0,me.x1);Ee.x0=he(De/Ue),Ee.x1=he(De/Ue)}else Ee.x0=Ee.x1=0;return Ee}E&&(Te=Te.transition().each("end",function(){var le=S.select(this);g.setSliceCursor(le,v,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Te.each(function(le){var ne=S.select(this),me=b.ensureSingle(ne,"path","surface",function(ke){ke.style("pointer-events",A?"none":"all")});le.rpx0=pe(le.y0),le.rpx1=pe(le.y1),le.xmid=(le.x0+le.x1)/2,le.pxmid=ve(le.rpx1,le.xmid),le.midangle=-(le.xmid-Math.PI/2),le.startangle=-(le.x0-Math.PI/2),le.stopangle=-(le.x1-Math.PI/2),le.halfangle=.5*Math.min(b.angleDelta(le.x0,le.x1)||Math.PI,Math.PI),le.ring=1-le.rpx0/le.rpx1,le.rInscribed=function(ke){return ke.rpx0===0&&b.isFullCircle([ke.x0,ke.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(ke.halfangle)),ke.ring/2))}(le),E?me.transition().attrTween("d",function(ke){var _e=function(Ce){var Fe,Re=Z[g.getPtId(Ce)],He={x0:Ce.x0,x1:Ce.x1,rpx0:Ce.rpx0,rpx1:Ce.rpx1};if(Re)Fe=Re;else if(W)if(Ce.parent)if(Oe){var Ge=(Ce.x1>Oe?2*Math.PI:0)+oe;Fe={x0:Ge,x1:Ge}}else Fe={rpx0:q,rpx1:q},b.extendFlat(Fe,se(Ce));else Fe={rpx0:0,rpx1:0};else Fe={x0:oe,x1:oe};return l(Fe,He)}(ke);return function(Ce){return we(_e(Ce))}}):me.attr("d",we),ne.call(c,G,v,m,{eventDataKeys:x.eventDataKeys,transitionTime:x.CLICK_TRANSITION_TIME,transitionEasing:x.CLICK_TRANSITION_EASING}).call(g.setSliceCursor,v,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:v._transitioning}),me.call(u,le,P);var Ee=b.ensureSingle(ne,"g","slicetext"),be=b.ensureSingle(Ee,"text","",function(ke){ke.attr("data-notex",1)}),De=b.ensureUniformFontSize(v,g.determineTextFont(P,le,w.font));be.text(z.formatSliceLabel(le,G,P,m,w)).classed("slicetext",!0).attr("text-anchor","middle").call(T.font,De).call(d.convertToTspans,v);var Ue=T.bBox(be.node());le.transform=o(Ue,le,C),le.transform.targetX=xe(le),le.transform.targetY=ge(le);var he=function(ke,_e){var Ce=ke.transform;return a(Ce,_e),Ce.fontSize=De.size,e(P.type,Ce,w),b.getTextTransform(Ce)};E?be.transition().attrTween("transform",function(ke){var _e=function(Ce){var Fe,Re=Z[g.getPtId(Ce)],He=Ce.transform;if(Re)Fe=Re;else if(Fe={rpx1:Ce.rpx1,transform:{textPosAngle:He.textPosAngle,scale:0,rotate:He.rotate,rCenter:He.rCenter,x:He.x,y:He.y}},W)if(Ce.parent)if(Oe){var Ge=Ce.x1>Oe?2*Math.PI:0;Fe.x0=Fe.x1=Ge}else b.extendFlat(Fe,se(Ce));else Fe.x0=Fe.x1=oe;else Fe.x0=Fe.x1=oe;var $e=l(Fe.transform.textPosAngle,Ce.transform.textPosAngle),st=l(Fe.rpx1,Ce.rpx1),Ke=l(Fe.x0,Ce.x0),gt=l(Fe.x1,Ce.x1),mt=l(Fe.transform.scale,He.scale),at=l(Fe.transform.rotate,He.rotate),rt=He.rCenter===0?3:Fe.transform.rCenter===0?1/3:1,xt=l(Fe.transform.rCenter,He.rCenter);return function(Tt){var wt=st(Tt),Ot=Ke(Tt),Ct=gt(Tt),Ye=function(Ve){return xt(Math.pow(Ve,rt))}(Tt),Xe={pxmid:ve(wt,(Ot+Ct)/2),rpx1:wt,transform:{textPosAngle:$e(Tt),rCenter:Ye,x:He.x,y:He.y}};return e(P.type,He,w),{transform:{targetX:xe(Xe),targetY:ge(Xe),scale:mt(Tt),rotate:at(Tt),rCenter:Ye}}}}(ke);return function(Ce){return he(_e(Ce),Ue)}}):be.attr("transform",he(le,Ue))})}function y(v){return m=v.rpx1,_=v.transform.textPosAngle,[m*Math.sin(_),-m*Math.cos(_)];var m,_}z.plot=function(v,m,_,h){var A,w,E=v._fullLayout,L=E._sunburstlayer,C=!_,P=!E.uniformtext.mode&&g.hasTransition(_);i("sunburst",E),(A=L.selectAll("g.trace.sunburst").data(m,function(D){return D[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),A.order(),P?(h&&(w=h()),S.transition().duration(_.duration).ease(_.easing).each("end",function(){w&&w()}).each("interrupt",function(){w&&w()}).each(function(){L.selectAll("g.trace").each(function(D){f(v,D,this,_)})})):(A.each(function(D){f(v,D,this,_)}),E.uniformtext.mode&&p(v,E._sunburstlayer.selectAll(".trace"),"sunburst")),C&&A.exit().remove()},z.formatSliceLabel=function(v,m,_,h,A){var w=_.texttemplate,E=_.textinfo;if(!(w||E&&E!=="none"))return"";var L=A.separators,C=h[0],P=v.data.data,D=C.hierarchy,G=g.isHierarchyRoot(v),I=g.getParent(D,v),H=g.getValue(v);if(!w){var N,F=E.split("+"),V=function(ae){return F.indexOf(ae)!==-1},q=[];if(V("label")&&P.label&&q.push(P.label),P.hasOwnProperty("v")&&V("value")&&q.push(g.formatValue(P.v,L)),!G){V("current path")&&q.push(g.getPath(v.data));var te=0;V("percent parent")&&te++,V("percent entry")&&te++,V("percent root")&&te++;var $=te>1;if(te){var W,Z=function(ae){N=g.formatPercent(W,L),$&&(N+=" of "+ae),q.push(N)};V("percent parent")&&!G&&(W=H/g.getValue(I),Z("parent")),V("percent entry")&&(W=H/g.getValue(m),Z("entry")),V("percent root")&&(W=H/g.getValue(D),Z("root"))}}return V("text")&&(N=b.castOption(_,P.i,"text"),b.isValidTextValue(N)&&q.push(N)),q.join("<br>")}var J=b.castOption(_,P.i,"texttemplate");if(!J)return"";var ee={};P.label&&(ee.label=P.label),P.hasOwnProperty("v")&&(ee.value=P.v,ee.valueLabel=g.formatValue(P.v,L)),ee.currentPath=g.getPath(v.data),G||(ee.percentParent=H/g.getValue(I),ee.percentParentLabel=g.formatPercent(ee.percentParent,L),ee.parent=g.getPtLabel(I)),ee.percentEntry=H/g.getValue(m),ee.percentEntryLabel=g.formatPercent(ee.percentEntry,L),ee.entry=g.getPtLabel(m),ee.percentRoot=H/g.getValue(D),ee.percentRootLabel=g.formatPercent(ee.percentRoot,L),ee.root=g.getPtLabel(D),P.hasOwnProperty("color")&&(ee.color=P.color);var re=b.castOption(_,P.i,"text");return(b.isValidTextValue(re)||re==="")&&(ee.text=re),ee.customdata=b.castOption(_,P.i,"customdata"),b.texttemplateString(J,ee,A._d3locale,ee,_._meta||{})}},29969:function(Q,z,t){var S=t(39898),k=t(7901),l=t(71828),T=t(72597).resizeText;function b(d,s,e){var i=s.data.data,r=!s.children,n=i.i,a=l.castOption(e,n,"marker.line.color")||k.defaultLine,o=l.castOption(e,n,"marker.line.width")||0;d.style("stroke-width",o).call(k.fill,i.color).call(k.stroke,a).style("opacity",r?e.leaf.opacity:null)}Q.exports={style:function(d){var s=d._fullLayout._sunburstlayer.selectAll(".trace");T(d,s,"sunburst"),s.each(function(e){var i=S.select(this),r=e[0].trace;i.style("opacity",r.opacity),i.selectAll("path.surface").each(function(n){S.select(this).call(b,n,r)})})},styleOne:b}},54532:function(Q,z,t){var S=t(7901),k=t(50693),l=t(12663).axisHoverFormat,T=t(5386).fF,b=t(9012),d=t(1426).extendFlat,s=t(30962).overrideAll;function e(r){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:S.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:S.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var i=Q.exports=s(d({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},k("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:e(),y:e(),z:e()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:d({},k.zauto,{}),zmin:d({},k.zmin,{}),zmax:d({},k.zmax,{})},hoverinfo:d({},b.hoverinfo),showlegend:d({},b.showlegend,{dflt:!1})}),"calc","nested");i.x.editType=i.y.editType=i.z.editType="calc+clearAxisTypes",i.transforms=void 0},18396:function(Q,z,t){var S=t(78803);Q.exports=function(k,l){l.surfacecolor?S(k,l,{vals:l.surfacecolor,containerStr:"",cLetter:"c"}):S(k,l,{vals:l.z,containerStr:"",cLetter:"c"})}},43768:function(Q,z,t){var S=t(9330).gl_surface3d,k=t(9330).ndarray,l=t(9330).ndarray_linear_interpolate.d2,T=t(824),b=t(43907),d=t(71828).isArrayOrTypedArray,s=t(81697).parseColorScale,e=t(78614),i=t(21081).extractOpts;function r(_,h,A){this.scene=_,this.uid=A,this.surface=h,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var n=r.prototype;n.getXat=function(_,h,A,w){var E=d(this.data.x)?d(this.data.x[0])?this.data.x[h][_]:this.data.x[_]:_;return A===void 0?E:w.d2l(E,0,A)},n.getYat=function(_,h,A,w){var E=d(this.data.y)?d(this.data.y[0])?this.data.y[h][_]:this.data.y[h]:h;return A===void 0?E:w.d2l(E,0,A)},n.getZat=function(_,h,A,w){var E=this.data.z[h][_];return E===null&&this.data.connectgaps&&this.data._interpolatedZ&&(E=this.data._interpolatedZ[h][_]),A===void 0?E:w.d2l(E,0,A)},n.handlePick=function(_){if(_.object===this.surface){var h=(_.data.index[0]-1)/this.dataScaleX-1,A=(_.data.index[1]-1)/this.dataScaleY-1,w=Math.max(Math.min(Math.round(h),this.data.z[0].length-1),0),E=Math.max(Math.min(Math.round(A),this.data._ylength-1),0);_.index=[w,E],_.traceCoordinate=[this.getXat(w,E),this.getYat(w,E),this.getZat(w,E)],_.dataCoordinate=[this.getXat(w,E,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(w,E,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(w,E,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var L=0;L<3;L++)_.dataCoordinate[L]!=null&&(_.dataCoordinate[L]*=this.scene.dataScale[L]);var C=this.data.hovertext||this.data.text;return Array.isArray(C)&&C[E]&&C[E][w]!==void 0?_.textLabel=C[E][w]:_.textLabel=C||"",_.data.dataCoordinate=_.dataCoordinate.slice(),this.surface.highlight(_.data),this.scene.glplot.spikes.position=_.dataCoordinate,!0}};var a=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function o(_,h){if(_<h)return 0;for(var A=0;Math.floor(_%h)===0;)_/=h,A++;return A}function u(_){for(var h=[],A=0;A<a.length;A++){var w=a[A];h.push(o(_,w))}return h}function p(_){for(var h=u(_),A=_,w=0;w<a.length;w++)if(h[w]>0){A=a[w];break}return A}function c(_,h){if(!(_<1||h<1)){for(var A=u(_),w=u(h),E=1,L=0;L<a.length;L++)E*=Math.pow(a[L],Math.max(A[L],w[L]));return E}}n.calcXnums=function(_){var h,A=[];for(h=1;h<_;h++){var w=this.getXat(h-1,0),E=this.getXat(h,0);A[h-1]=E!==w&&w!=null&&E!=null?Math.abs(E-w):0}var L=0;for(h=1;h<_;h++)L+=A[h-1];for(h=1;h<_;h++)A[h-1]===0?A[h-1]=1:A[h-1]=Math.round(L/A[h-1]);return A},n.calcYnums=function(_){var h,A=[];for(h=1;h<_;h++){var w=this.getYat(0,h-1),E=this.getYat(0,h);A[h-1]=E!==w&&w!=null&&E!=null?Math.abs(E-w):0}var L=0;for(h=1;h<_;h++)L+=A[h-1];for(h=1;h<_;h++)A[h-1]===0?A[h-1]=1:A[h-1]=Math.round(L/A[h-1]);return A};var x=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],g=x[9],f=x[13];function y(_,h,A){var w=A[8]+A[2]*h[0]+A[5]*h[1];return _[0]=(A[6]+A[0]*h[0]+A[3]*h[1])/w,_[1]=(A[7]+A[1]*h[0]+A[4]*h[1])/w,_}function v(_,h,A){return function(w,E,L,C){for(var P=[0,0],D=w.shape[0],G=w.shape[1],I=0;I<D;I++)for(var H=0;H<G;H++)L(P,[I,H],C),w.set(I,H,l(E,P[0],P[1]))}(_,h,y,A),_}function m(_,h){for(var A=!1,w=0;w<_.length;w++)if(h===_[w]){A=!0;break}A===!1&&_.push(h)}n.estimateScale=function(_,h){for(var A=1+function(E){if(E.length!==0){for(var L=1,C=0;C<E.length;C++)L=c(L,E[C]);return L}}(h===0?this.calcXnums(_):this.calcYnums(_));A<g;)A*=2;for(;A>f;)A--,A/=p(A),++A<g&&(A=f);var w=Math.round(A/_);return w>1?w:1},n.refineCoords=function(_){for(var h=this.dataScaleX,A=this.dataScaleY,w=_[0].shape[0],E=_[0].shape[1],L=0|Math.floor(_[0].shape[0]*h+1),C=0|Math.floor(_[0].shape[1]*A+1),P=1+w+1,D=1+E+1,G=k(new Float32Array(P*D),[P,D]),I=[1/h,0,0,0,1/A,0,0,0,1],H=0;H<_.length;++H){this.surface.padField(G,_[H]);var N=k(new Float32Array(L*C),[L,C]);v(N,G,I),_[H]=N}},n.setContourLevels=function(){var _,h,A,w=[[],[],[]],E=[!1,!1,!1],L=!1;for(_=0;_<3;++_)if(this.showContour[_]&&(L=!0,this.contourSize[_]>0&&this.contourStart[_]!==null&&this.contourEnd[_]!==null&&this.contourEnd[_]>this.contourStart[_]))for(E[_]=!0,h=this.contourStart[_];h<this.contourEnd[_];h+=this.contourSize[_])A=h*this.scene.dataScale[_],m(w[_],A);if(L){var C=[[],[],[]];for(_=0;_<3;++_)this.showContour[_]&&(C[_]=E[_]?w[_]:this.scene.contourLevels[_]);this.surface.update({levels:C})}},n.update=function(_){var h,A,w,E,L=this.scene,C=L.fullSceneLayout,P=this.surface,D=s(_),G=L.dataScale,I=_.z[0].length,H=_._ylength,N=L.contourLevels;this.data=_;var F=[];for(h=0;h<3;h++)for(F[h]=[],A=0;A<I;A++)F[h][A]=[];for(A=0;A<I;A++)for(w=0;w<H;w++)F[0][A][w]=this.getXat(A,w,_.xcalendar,C.xaxis),F[1][A][w]=this.getYat(A,w,_.ycalendar,C.yaxis),F[2][A][w]=this.getZat(A,w,_.zcalendar,C.zaxis);if(_.connectgaps)for(_._emptypoints=b(F[2]),T(F[2],_._emptypoints),_._interpolatedZ=[],A=0;A<I;A++)for(_._interpolatedZ[A]=[],w=0;w<H;w++)_._interpolatedZ[A][w]=F[2][A][w];for(h=0;h<3;h++)for(A=0;A<I;A++)for(w=0;w<H;w++)(E=F[h][A][w])==null?F[h][A][w]=NaN:E=F[h][A][w]*=G[h];for(h=0;h<3;h++)for(A=0;A<I;A++)for(w=0;w<H;w++)(E=F[h][A][w])!=null&&(this.minValues[h]>E&&(this.minValues[h]=E),this.maxValues[h]<E&&(this.maxValues[h]=E));for(h=0;h<3;h++)this.objectOffset[h]=.5*(this.minValues[h]+this.maxValues[h]);for(h=0;h<3;h++)for(A=0;A<I;A++)for(w=0;w<H;w++)(E=F[h][A][w])!=null&&(F[h][A][w]-=this.objectOffset[h]);var V=[k(new Float32Array(I*H),[I,H]),k(new Float32Array(I*H),[I,H]),k(new Float32Array(I*H),[I,H])];for(h=0;h<3;h++)for(A=0;A<I;A++)for(w=0;w<H;w++)V[h].set(A,w,F[h][A][w]);F=[];var q={colormap:D,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!_.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:_.opacityscale,opacity:_.opacity},te=i(_);if(q.intensityBounds=[te.min,te.max],_.surfacecolor){var $=k(new Float32Array(I*H),[I,H]);for(A=0;A<I;A++)for(w=0;w<H;w++)$.set(A,w,_.surfacecolor[w][A]);V.push($)}else q.intensityBounds[0]*=G[2],q.intensityBounds[1]*=G[2];(f<V[0].shape[0]||f<V[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(V[0].shape[0],0),this.dataScaleY=this.estimateScale(V[0].shape[1],1),this.dataScaleX===1&&this.dataScaleY===1||this.refineCoords(V)),_.surfacecolor&&(q.intensity=V.pop());var W=[!0,!0,!0],Z=["x","y","z"];for(h=0;h<3;++h){var J=_.contours[Z[h]];W[h]=J.highlight,q.showContour[h]=J.show||J.highlight,q.showContour[h]&&(q.contourProject[h]=[J.project.x,J.project.y,J.project.z],J.show?(this.showContour[h]=!0,q.levels[h]=N[h],P.highlightColor[h]=q.contourColor[h]=e(J.color),J.usecolormap?P.highlightTint[h]=q.contourTint[h]=0:P.highlightTint[h]=q.contourTint[h]=1,q.contourWidth[h]=J.width,this.contourStart[h]=J.start,this.contourEnd[h]=J.end,this.contourSize[h]=J.size):(this.showContour[h]=!1,this.contourStart[h]=null,this.contourEnd[h]=null,this.contourSize[h]=0),J.highlight&&(q.dynamicColor[h]=e(J.highlightcolor),q.dynamicWidth[h]=J.highlightwidth))}(function(ee){var re=ee[0].rgb,ae=ee[ee.length-1].rgb;return re[0]===ae[0]&&re[1]===ae[1]&&re[2]===ae[2]&&re[3]===ae[3]})(D)&&(q.vertexColor=!0),q.objectOffset=this.objectOffset,q.coords=V,P.update(q),P.visible=_.visible,P.enableDynamic=W,P.enableHighlight=W,P.snapToData=!0,"lighting"in _&&(P.ambientLight=_.lighting.ambient,P.diffuseLight=_.lighting.diffuse,P.specularLight=_.lighting.specular,P.roughness=_.lighting.roughness,P.fresnel=_.lighting.fresnel),"lightposition"in _&&(P.lightPosition=[_.lightposition.x,_.lightposition.y,_.lightposition.z])},n.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},Q.exports=function(_,h){var A=_.glplot.gl,w=S({gl:A}),E=new r(_,w,h.uid);return w._trace=E,E.update(h),_.glplot.add(w),E}},91831:function(Q,z,t){var S=t(73972),k=t(71828),l=t(1586),T=t(54532);function b(s,e,i,r){var n=r("opacityscale");n==="max"?e.opacityscale=[[0,.1],[1,1]]:n==="min"?e.opacityscale=[[0,1],[1,.1]]:n==="extremes"?e.opacityscale=function(a,o){for(var u=[],p=0;p<32;p++){var c=p/31,x=.1+.9*(1-Math.pow(Math.sin(1*c*Math.PI),2));u.push([c,Math.max(0,Math.min(1,x))])}return u}():function(a){var o=0;if(!Array.isArray(a)||a.length<2||!a[0]||!a[a.length-1]||+a[0][0]!=0||+a[a.length-1][0]!=1)return!1;for(var u=0;u<a.length;u++){var p=a[u];if(p.length!==2||+p[0]<o)return!1;o=+p[0]}return!0}(n)||(e.opacityscale=void 0)}function d(s,e,i){e in s&&!(i in s)&&(s[i]=s[e])}Q.exports={supplyDefaults:function(s,e,i,r){var n,a;function o(m,_){return k.coerce(s,e,T,m,_)}var u=o("x"),p=o("y"),c=o("z");if(!c||!c.length||u&&u.length<1||p&&p.length<1)e.visible=!1;else{e._xlength=Array.isArray(u)&&k.isArrayOrTypedArray(u[0])?c.length:c[0].length,e._ylength=c.length,S.getComponentMethod("calendars","handleTraceDefaults")(s,e,["x","y","z"],r),o("text"),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(m){o(m)});var x=o("surfacecolor"),g=["x","y","z"];for(n=0;n<3;++n){var f="contours."+g[n],y=o(f+".show"),v=o(f+".highlight");if(y||v)for(a=0;a<3;++a)o(f+".project."+g[a]);y&&(o(f+".color"),o(f+".width"),o(f+".usecolormap")),v&&(o(f+".highlightcolor"),o(f+".highlightwidth")),o(f+".start"),o(f+".end"),o(f+".size")}x||(d(s,"zmin","cmin"),d(s,"zmax","cmax"),d(s,"zauto","cauto")),l(s,e,r,o,{prefix:"",cLetter:"c"}),b(0,e,0,o),e._length=null}},opacityscaleDefaults:b}},93601:function(Q,z,t){Q.exports={attributes:t(54532),supplyDefaults:t(91831).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:t(18396),plot:t(43768),moduleType:"trace",name:"surface",basePlotModule:t(58547),categories:["gl3d","2dMap","showLegend"],meta:{}}},44464:function(Q,z,t){var S=t(50215),k=t(1426).extendFlat,l=t(30962).overrideAll,T=t(41940),b=t(27670).Y,d=t(12663).descriptionOnlyNumbers;(Q.exports=l({domain:b({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:d("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:k({},S.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},T({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:d("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:k({},S.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},T({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},99469:function(Q,z,t){var S=t(27659).a0,k=t(36736),l="table";z.name=l,z.plot=function(T){var b=S(T.calcdata,l)[0];b.length&&k(T,b)},z.clean=function(T,b,d,s){var e=s._has&&s._has(l),i=b._has&&b._has(l);e&&!i&&s._paperdiv.selectAll(".table").remove()}},76333:function(Q,z,t){var S=t(28984).wrap;Q.exports=function(){return S({})}},49850:function(Q){Q.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},51018:function(Q,z,t){var S=t(49850),k=t(1426).extendFlat,l=t(92770);function T(n){if(Array.isArray(n)){for(var a=0,o=0;o<n.length;o++)a=Math.max(a,T(n[o]));return a}return n}function b(n,a){return n+a}function d(n){var a,o=n.slice(),u=1/0,p=0;for(a=0;a<o.length;a++)Array.isArray(o[a])||(o[a]=[o[a]]),u=Math.min(u,o[a].length),p=Math.max(p,o[a].length);if(u!==p)for(a=0;a<o.length;a++){var c=p-o[a].length;c&&(o[a]=o[a].concat(s(c)))}return o}function s(n){for(var a=new Array(n),o=0;o<n;o++)a[o]="";return a}function e(n){return n.calcdata.columns.reduce(function(a,o){return o.xIndex<n.xIndex?a+o.columnWidth:a},0)}function i(n,a){return Object.keys(n).map(function(o){return k({},n[o],{auxiliaryBlocks:a})})}function r(n,a){for(var o,u={},p=0,c=0,x={firstRowIndex:null,lastRowIndex:null,rows:[]},g=0,f=0,y=0;y<n.length;y++)o=n[y],x.rows.push({rowIndex:y,rowHeight:o}),((c+=o)>=a||y===n.length-1)&&(u[p]=x,x.key=f++,x.firstRowIndex=g,x.lastRowIndex=y,x={firstRowIndex:null,lastRowIndex:null,rows:[]},p+=c,g=y+1,c=0);return u}Q.exports=function(n,a){var o=d(a.cells.values),u=function(G){return G.slice(a.header.values.length,G.length)},p=d(a.header.values);p.length&&!p[0].length&&(p[0]=[""],p=d(p));var c=p.concat(u(o).map(function(){return s((p[0]||[""]).length)})),x=a.domain,g=Math.floor(n._fullLayout._size.w*(x.x[1]-x.x[0])),f=Math.floor(n._fullLayout._size.h*(x.y[1]-x.y[0])),y=a.header.values.length?c[0].map(function(){return a.header.height}):[S.emptyHeaderHeight],v=o.length?o[0].map(function(){return a.cells.height}):[],m=y.reduce(b,0),_=r(v,f-m+S.uplift),h=i(r(y,m),[]),A=i(_,h),w={},E=a._fullInput.columnorder.concat(u(o.map(function(G,I){return I}))),L=c.map(function(G,I){var H=Array.isArray(a.columnwidth)?a.columnwidth[Math.min(I,a.columnwidth.length-1)]:a.columnwidth;return l(H)?Number(H):1}),C=L.reduce(b,0);L=L.map(function(G){return G/C*g});var P=Math.max(T(a.header.line.width),T(a.cells.line.width)),D={key:a.uid+n._context.staticPlot,translateX:x.x[0]*n._fullLayout._size.w,translateY:n._fullLayout._size.h*(1-x.y[1]),size:n._fullLayout._size,width:g,maxLineWidth:P,height:f,columnOrder:E,groupHeight:f,rowBlocks:A,headerRowBlocks:h,scrollY:0,cells:k({},a.cells,{values:o}),headerCells:k({},a.header,{values:c}),gdColumns:c.map(function(G){return G[0]}),gdColumnsOriginalOrder:c.map(function(G){return G[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:c.map(function(G,I){var H=w[G];return w[G]=(H||0)+1,{key:G+"__"+w[G],label:G,specIndex:I,xIndex:E[I],xScale:e,x:void 0,calcdata:void 0,columnWidth:L[I]}})};return D.columns.forEach(function(G){G.calcdata=D,G.x=e(G)}),D}},56269:function(Q,z,t){var S=t(1426).extendFlat;z.splitToPanels=function(k){var l=[0,0],T=S({},k,{key:"header",type:"header",page:0,prevPages:l,currentRepaint:[null,null],dragHandle:!0,values:k.calcdata.headerCells.values[k.specIndex],rowBlocks:k.calcdata.headerRowBlocks,calcdata:S({},k.calcdata,{cells:k.calcdata.headerCells})});return[S({},k,{key:"cells1",type:"cells",page:0,prevPages:l,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),S({},k,{key:"cells2",type:"cells",page:1,prevPages:l,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),T]},z.splitToCells=function(k){var l=function(T){var b=T.rowBlocks[T.page],d=b?b.rows[0].rowIndex:0;return[d,b?d+b.rows.length:0]}(k);return(k.values||[]).slice(l[0],l[1]).map(function(T,b){return{keyWithinBlock:b+(typeof T=="string"&&T.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:l[0]+b,column:k,calcdata:k.calcdata,page:k.page,rowBlocks:k.rowBlocks,value:T}})}},39754:function(Q,z,t){var S=t(71828),k=t(44464),l=t(27670).c;Q.exports=function(T,b,d,s){function e(i,r){return S.coerce(T,b,k,i,r)}l(b,s,e),e("columnwidth"),e("header.values"),e("header.format"),e("header.align"),e("header.prefix"),e("header.suffix"),e("header.height"),e("header.line.width"),e("header.line.color"),e("header.fill.color"),S.coerceFont(e,"header.font",S.extendFlat({},s.font)),function(i,r){for(var n=i.columnorder||[],a=i.header.values.length,o=n.slice(0,a),u=o.slice().sort(function(x,g){return x-g}),p=o.map(function(x){return u.indexOf(x)}),c=p.length;c<a;c++)p.push(c);r("columnorder",p)}(b,e),e("cells.values"),e("cells.format"),e("cells.align"),e("cells.prefix"),e("cells.suffix"),e("cells.height"),e("cells.line.width"),e("cells.line.color"),e("cells.fill.color"),S.coerceFont(e,"cells.font",S.extendFlat({},s.font)),b._length=null}},96595:function(Q,z,t){Q.exports={attributes:t(44464),supplyDefaults:t(39754),calc:t(76333),plot:t(36736),moduleType:"trace",name:"table",basePlotModule:t(99469),categories:["noOpacity"],meta:{}}},36736:function(Q,z,t){var S=t(49850),k=t(39898),l=t(71828).numberFormat,T=t(28984),b=t(91424),d=t(63893),s=t(71828).raiseToTop,e=t(71828).strTranslate,i=t(71828).cancelTransition,r=t(51018),n=t(56269),a=t(7901);function o(V){return Math.ceil(V.calcdata.maxLineWidth/2)}function u(V,q){return"clip"+V._fullLayout._uid+"_scrollAreaBottomClip_"+q.key}function p(V,q){return"clip"+V._fullLayout._uid+"_columnBoundaryClippath_"+q.calcdata.key+"_"+q.specIndex}function c(V){return[].concat.apply([],V.map(function(q){return q})).map(function(q){return q.__data__})}function x(V,q,te){var $=V.selectAll("."+S.cn.scrollbarKit).data(T.repeat,T.keyFun);$.enter().append("g").classed(S.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),$.each(function(re){var ae=re.scrollbarState;ae.totalHeight=function(oe){var ce=oe.rowBlocks;return I(ce,ce.length-1)+(ce.length?H(ce[ce.length-1],1/0):1)}(re),ae.scrollableAreaHeight=re.groupHeight-A(re),ae.currentlyVisibleHeight=Math.min(ae.totalHeight,ae.scrollableAreaHeight),ae.ratio=ae.currentlyVisibleHeight/ae.totalHeight,ae.barLength=Math.max(ae.ratio*ae.currentlyVisibleHeight,S.goldenRatio*S.scrollbarWidth),ae.barWiggleRoom=ae.currentlyVisibleHeight-ae.barLength,ae.wiggleRoom=Math.max(0,ae.totalHeight-ae.scrollableAreaHeight),ae.topY=ae.barWiggleRoom===0?0:re.scrollY/ae.wiggleRoom*ae.barWiggleRoom,ae.bottomY=ae.topY+ae.barLength,ae.dragMultiplier=ae.wiggleRoom/ae.barWiggleRoom}).attr("transform",function(re){var ae=re.width+S.scrollbarWidth/2+S.scrollbarOffset;return e(ae,A(re))});var W=$.selectAll("."+S.cn.scrollbar).data(T.repeat,T.keyFun);W.enter().append("g").classed(S.cn.scrollbar,!0);var Z=W.selectAll("."+S.cn.scrollbarSlider).data(T.repeat,T.keyFun);Z.enter().append("g").classed(S.cn.scrollbarSlider,!0),Z.attr("transform",function(re){return e(0,re.scrollbarState.topY||0)});var J=Z.selectAll("."+S.cn.scrollbarGlyph).data(T.repeat,T.keyFun);J.enter().append("line").classed(S.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",S.scrollbarWidth).attr("stroke-linecap","round").attr("y1",S.scrollbarWidth/2),J.attr("y2",function(re){return re.scrollbarState.barLength-S.scrollbarWidth/2}).attr("stroke-opacity",function(re){return re.columnDragInProgress||!re.scrollbarState.barWiggleRoom||te?0:.4}),J.transition().delay(0).duration(0),J.transition().delay(S.scrollbarHideDelay).duration(S.scrollbarHideDuration).attr("stroke-opacity",0);var ee=W.selectAll("."+S.cn.scrollbarCaptureZone).data(T.repeat,T.keyFun);ee.enter().append("line").classed(S.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",S.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(re){var ae=k.event.y,oe=this.getBoundingClientRect(),ce=re.scrollbarState,pe=ae-oe.top,ve=k.scale.linear().domain([0,ce.scrollableAreaHeight]).range([0,ce.totalHeight]).clamp(!0);ce.topY<=pe&&pe<=ce.bottomY||E(q,V,null,ve(pe-ce.barLength/2))(re)}).call(k.behavior.drag().origin(function(re){return k.event.stopPropagation(),re.scrollbarState.scrollbarScrollInProgress=!0,re}).on("drag",E(q,V)).on("dragend",function(){})),ee.attr("y2",function(re){return re.scrollbarState.scrollableAreaHeight}),q._context.staticPlot&&(J.remove(),ee.remove())}function g(V,q,te,$){var W=function(ae){var oe=ae.selectAll("."+S.cn.columnCells).data(T.repeat,T.keyFun);return oe.enter().append("g").classed(S.cn.columnCells,!0),oe.exit().remove(),oe}(te),Z=function(ae){var oe=ae.selectAll("."+S.cn.columnCell).data(n.splitToCells,function(ce){return ce.keyWithinBlock});return oe.enter().append("g").classed(S.cn.columnCell,!0),oe.exit().remove(),oe}(W);(function(ae){ae.each(function(oe,ce){var pe=oe.calcdata.cells.font,ve=oe.column.specIndex,we={size:v(pe.size,ve,ce),color:v(pe.color,ve,ce),family:v(pe.family,ve,ce)};oe.rowNumber=oe.key,oe.align=v(oe.calcdata.cells.align,ve,ce),oe.cellBorderWidth=v(oe.calcdata.cells.line.width,ve,ce),oe.font=we})})(Z);var J=function(ae){var oe=ae.selectAll("."+S.cn.cellRect).data(T.repeat,function(ce){return ce.keyWithinBlock});return oe.enter().append("rect").classed(S.cn.cellRect,!0),oe}(Z);(function(ae){ae.attr("width",function(oe){return oe.column.columnWidth}).attr("stroke-width",function(oe){return oe.cellBorderWidth}).each(function(oe){var ce=k.select(this);a.stroke(ce,v(oe.calcdata.cells.line.color,oe.column.specIndex,oe.rowNumber)),a.fill(ce,v(oe.calcdata.cells.fill.color,oe.column.specIndex,oe.rowNumber))})})(J);var ee=function(ae){var oe=ae.selectAll("."+S.cn.cellTextHolder).data(T.repeat,function(ce){return ce.keyWithinBlock});return oe.enter().append("g").classed(S.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),oe}(Z),re=function(ae){var oe=ae.selectAll("."+S.cn.cellText).data(T.repeat,function(ce){return ce.keyWithinBlock});return oe.enter().append("text").classed(S.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){k.event.stopPropagation()}),oe}(ee);(function(ae){ae.each(function(oe){b.font(k.select(this),oe.font)})})(re),f(re,q,$,V),G(Z)}function f(V,q,te,$){V.text(function(W){var Z=W.column.specIndex,J=W.rowNumber,ee=W.value,re=typeof ee=="string",ae=re&&ee.match(/<br>/i),oe=!re||ae;W.mayHaveMarkup=re&&ee.match(/[<&>]/);var ce,pe=typeof(ce=ee)=="string"&&ce.match(S.latexCheck);W.latex=pe;var ve,we,xe=pe?"":v(W.calcdata.cells.prefix,Z,J)||"",ge=pe?"":v(W.calcdata.cells.suffix,Z,J)||"",Oe=pe?null:v(W.calcdata.cells.format,Z,J)||null,Ae=xe+(Oe?l(Oe)(W.value):W.value)+ge;if(W.wrappingNeeded=!W.wrapped&&!oe&&!pe&&(ve=y(Ae)),W.cellHeightMayIncrease=ae||pe||W.mayHaveMarkup||(ve===void 0?y(Ae):ve),W.needsConvertToTspans=W.mayHaveMarkup||W.wrappingNeeded||W.latex,W.wrappingNeeded){var Te=(S.wrapSplitCharacter===" "?Ae.replace(/<a href=/gi,"<a_href="):Ae).split(S.wrapSplitCharacter),se=S.wrapSplitCharacter===" "?Te.map(function(le){return le.replace(/<a_href=/gi,"<a href=")}):Te;W.fragments=se.map(function(le){return{text:le,width:null}}),W.fragments.push({fragment:S.wrapSpacer,width:null}),we=se.join(S.lineBreaker)+S.lineBreaker+S.wrapSpacer}else delete W.fragments,we=Ae;return we}).attr("dy",function(W){return W.needsConvertToTspans?0:"0.75em"}).each(function(W){var Z=this,J=k.select(Z),ee=W.wrappingNeeded?C:P;W.needsConvertToTspans?d.convertToTspans(J,$,ee(te,Z,q,$,W)):k.select(Z.parentNode).attr("transform",function(re){return e(D(re),S.cellPad)}).attr("text-anchor",function(re){return{left:"start",center:"middle",right:"end"}[re.align]})})}function y(V){return V.indexOf(S.wrapSplitCharacter)!==-1}function v(V,q,te){if(Array.isArray(V)){var $=V[Math.min(q,V.length-1)];return Array.isArray($)?$[Math.min(te,$.length-1)]:$}return V}function m(V,q,te){V.transition().ease(S.releaseTransitionEase).duration(S.releaseTransitionDuration).attr("transform",e(q.x,te))}function _(V){return V.type==="cells"}function h(V){return V.type==="header"}function A(V){return(V.rowBlocks.length?V.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(q,te){return q+H(te,1/0)},0)}function w(V,q,te){var $=c(q)[0];if($!==void 0){var W=$.rowBlocks,Z=$.calcdata,J=I(W,W.length),ee=$.calcdata.groupHeight-A($),re=Z.scrollY=Math.max(0,Math.min(J-ee,Z.scrollY)),ae=function(oe,ce,pe){for(var ve=[],we=0,xe=0;xe<oe.length;xe++){for(var ge=oe[xe],Oe=ge.rows,Ae=0,Te=0;Te<Oe.length;Te++)Ae+=Oe[Te].rowHeight;ge.allRowsHeight=Ae,ce<we+Ae&&ce+pe>we&&ve.push(xe),we+=Ae}return ve}(W,re,ee);ae.length===1&&(ae[0]===W.length-1?ae.unshift(ae[0]-1):ae.push(ae[0]+1)),ae[0]%2&&ae.reverse(),q.each(function(oe,ce){oe.page=ae[ce],oe.scrollY=re}),q.attr("transform",function(oe){var ce=I(oe.rowBlocks,oe.page)-oe.scrollY;return e(0,ce)}),V&&(L(V,te,q,ae,$.prevPages,$,0),L(V,te,q,ae,$.prevPages,$,1),x(te,V))}}function E(V,q,te,$){return function(W){var Z=W.calcdata?W.calcdata:W,J=q.filter(function(oe){return Z.key===oe.key}),ee=te||Z.scrollbarState.dragMultiplier,re=Z.scrollY;Z.scrollY=$===void 0?Z.scrollY+ee*k.event.dy:$;var ae=J.selectAll("."+S.cn.yColumn).selectAll("."+S.cn.columnBlock).filter(_);return w(V,ae,J),Z.scrollY===re}}function L(V,q,te,$,W,Z,J){$[J]!==W[J]&&(clearTimeout(Z.currentRepaint[J]),Z.currentRepaint[J]=setTimeout(function(){var ee=te.filter(function(re,ae){return ae===J&&$[ae]!==W[ae]});g(V,q,ee,te),W[J]=$[J]}))}function C(V,q,te,$){return function(){var W=k.select(q.parentNode);W.each(function(Z){var J=Z.fragments;W.selectAll("tspan.line").each(function(we,xe){J[xe].width=this.getComputedTextLength()});var ee,re,ae=J[J.length-1].width,oe=J.slice(0,-1),ce=[],pe=0,ve=Z.column.columnWidth-2*S.cellPad;for(Z.value="";oe.length;)pe+(re=(ee=oe.shift()).width+ae)>ve&&(Z.value+=ce.join(S.wrapSpacer)+S.lineBreaker,ce=[],pe=0),ce.push(ee.text),pe+=re;pe&&(Z.value+=ce.join(S.wrapSpacer)),Z.wrapped=!0}),W.selectAll("tspan.line").remove(),f(W.select("."+S.cn.cellText),te,V,$),k.select(q.parentNode.parentNode).call(G)}}function P(V,q,te,$,W){return function(){if(!W.settledY){var Z=k.select(q.parentNode),J=F(W),ee=W.key-J.firstRowIndex,re=J.rows[ee].rowHeight,ae=W.cellHeightMayIncrease?q.parentNode.getBoundingClientRect().height+2*S.cellPad:re,oe=Math.max(ae,re);oe-J.rows[ee].rowHeight&&(J.rows[ee].rowHeight=oe,V.selectAll("."+S.cn.columnCell).call(G),w(null,V.filter(_),0),x(te,$,!0)),Z.attr("transform",function(){var ce=this,pe=ce.parentNode.getBoundingClientRect(),ve=k.select(ce.parentNode).select("."+S.cn.cellRect).node().getBoundingClientRect(),we=ce.transform.baseVal.consolidate(),xe=ve.top-pe.top+(we?we.matrix.f:S.cellPad);return e(D(W,k.select(ce.parentNode).select("."+S.cn.cellTextHolder).node().getBoundingClientRect().width),xe)}),W.settledY=!0}}}function D(V,q){switch(V.align){case"left":default:return S.cellPad;case"right":return V.column.columnWidth-(q||0)-S.cellPad;case"center":return(V.column.columnWidth-(q||0))/2}}function G(V){V.attr("transform",function(q){var te=q.rowBlocks[0].auxiliaryBlocks.reduce(function(W,Z){return W+H(Z,1/0)},0),$=H(F(q),q.key);return e(0,$+te)}).selectAll("."+S.cn.cellRect).attr("height",function(q){return(te=F(q),$=q.key,te.rows[$-te.firstRowIndex]).rowHeight;var te,$})}function I(V,q){for(var te=0,$=q-1;$>=0;$--)te+=N(V[$]);return te}function H(V,q){for(var te=0,$=0;$<V.rows.length&&V.rows[$].rowIndex<q;$++)te+=V.rows[$].rowHeight;return te}function N(V){var q=V.allRowsHeight;if(q!==void 0)return q;for(var te=0,$=0;$<V.rows.length;$++)te+=V.rows[$].rowHeight;return V.allRowsHeight=te,te}function F(V){return V.rowBlocks[V.page]}Q.exports=function(V,q){var te=!V._context.staticPlot,$=V._fullLayout._paper.selectAll("."+S.cn.table).data(q.map(function(ge){var Oe=T.unwrap(ge).trace;return r(V,Oe)}),T.keyFun);$.exit().remove(),$.enter().append("g").classed(S.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),$.attr("width",function(ge){return ge.width+ge.size.l+ge.size.r}).attr("height",function(ge){return ge.height+ge.size.t+ge.size.b}).attr("transform",function(ge){return e(ge.translateX,ge.translateY)});var W=$.selectAll("."+S.cn.tableControlView).data(T.repeat,T.keyFun),Z=W.enter().append("g").classed(S.cn.tableControlView,!0).style("box-sizing","content-box");if(te){var J="onwheel"in document?"wheel":"mousewheel";Z.on("mousemove",function(ge){W.filter(function(Oe){return ge===Oe}).call(x,V)}).on(J,function(ge){if(!ge.scrollbarState.wheeling){ge.scrollbarState.wheeling=!0;var Oe=ge.scrollY+k.event.deltaY;E(V,W,null,Oe)(ge)||(k.event.stopPropagation(),k.event.preventDefault()),ge.scrollbarState.wheeling=!1}}).call(x,V,!0)}W.attr("transform",function(ge){return e(ge.size.l,ge.size.t)});var ee=W.selectAll("."+S.cn.scrollBackground).data(T.repeat,T.keyFun);ee.enter().append("rect").classed(S.cn.scrollBackground,!0).attr("fill","none"),ee.attr("width",function(ge){return ge.width}).attr("height",function(ge){return ge.height}),W.each(function(ge){b.setClipUrl(k.select(this),u(V,ge),V)});var re=W.selectAll("."+S.cn.yColumn).data(function(ge){return ge.columns},T.keyFun);re.enter().append("g").classed(S.cn.yColumn,!0),re.exit().remove(),re.attr("transform",function(ge){return e(ge.x,0)}),te&&re.call(k.behavior.drag().origin(function(ge){return m(k.select(this),ge,-S.uplift),s(this),ge.calcdata.columnDragInProgress=!0,x(W.filter(function(Oe){return ge.calcdata.key===Oe.key}),V),ge}).on("drag",function(ge){var Oe=k.select(this),Ae=function(Te){return(ge===Te?k.event.x:Te.x)+Te.columnWidth/2};ge.x=Math.max(-S.overdrag,Math.min(ge.calcdata.width+S.overdrag-ge.columnWidth,k.event.x)),c(re).filter(function(Te){return Te.calcdata.key===ge.calcdata.key}).sort(function(Te,se){return Ae(Te)-Ae(se)}).forEach(function(Te,se){Te.xIndex=se,Te.x=ge===Te?Te.x:Te.xScale(Te)}),re.filter(function(Te){return ge!==Te}).transition().ease(S.transitionEase).duration(S.transitionDuration).attr("transform",function(Te){return e(Te.x,0)}),Oe.call(i).attr("transform",e(ge.x,-S.uplift))}).on("dragend",function(ge){var Oe=k.select(this),Ae=ge.calcdata;ge.x=ge.xScale(ge),ge.calcdata.columnDragInProgress=!1,m(Oe,ge,0),function(Te,se,le){var ne=se.gdColumnsOriginalOrder;se.gdColumns.sort(function(me,Ee){return le[ne.indexOf(me)]-le[ne.indexOf(Ee)]}),se.columnorder=le,Te.emit("plotly_restyle")}(V,Ae,Ae.columns.map(function(Te){return Te.xIndex}))})),re.each(function(ge){b.setClipUrl(k.select(this),p(V,ge),V)});var ae=re.selectAll("."+S.cn.columnBlock).data(n.splitToPanels,T.keyFun);ae.enter().append("g").classed(S.cn.columnBlock,!0).attr("id",function(ge){return ge.key}),ae.style("cursor",function(ge){return ge.dragHandle?"ew-resize":ge.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var oe=ae.filter(h),ce=ae.filter(_);te&&ce.call(k.behavior.drag().origin(function(ge){return k.event.stopPropagation(),ge}).on("drag",E(V,W,-1)).on("dragend",function(){})),g(V,W,oe,ae),g(V,W,ce,ae);var pe=W.selectAll("."+S.cn.scrollAreaClip).data(T.repeat,T.keyFun);pe.enter().append("clipPath").classed(S.cn.scrollAreaClip,!0).attr("id",function(ge){return u(V,ge)});var ve=pe.selectAll("."+S.cn.scrollAreaClipRect).data(T.repeat,T.keyFun);ve.enter().append("rect").classed(S.cn.scrollAreaClipRect,!0).attr("x",-S.overdrag).attr("y",-S.uplift).attr("fill","none"),ve.attr("width",function(ge){return ge.width+2*S.overdrag}).attr("height",function(ge){return ge.height+S.uplift}),re.selectAll("."+S.cn.columnBoundary).data(T.repeat,T.keyFun).enter().append("g").classed(S.cn.columnBoundary,!0);var we=re.selectAll("."+S.cn.columnBoundaryClippath).data(T.repeat,T.keyFun);we.enter().append("clipPath").classed(S.cn.columnBoundaryClippath,!0),we.attr("id",function(ge){return p(V,ge)});var xe=we.selectAll("."+S.cn.columnBoundaryRect).data(T.repeat,T.keyFun);xe.enter().append("rect").classed(S.cn.columnBoundaryRect,!0).attr("fill","none"),xe.attr("width",function(ge){return ge.columnWidth+2*o(ge)}).attr("height",function(ge){return ge.calcdata.height+2*o(ge)+S.uplift}).attr("x",function(ge){return-o(ge)}).attr("y",function(ge){return-o(ge)}),w(null,ce,W)}},45802:function(Q,z,t){var S=t(5386).fF,k=t(5386).si,l=t(50693),T=t(27670).Y,b=t(34e3),d=t(57564),s=t(43473),e=t(1426).extendFlat;Q.exports={labels:d.labels,parents:d.parents,values:d.values,branchvalues:d.branchvalues,count:d.count,level:d.level,maxdepth:d.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:e({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:d.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:d.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},l("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:e({},b.textfont,{}),editType:"calc"},text:b.text,textinfo:d.textinfo,texttemplate:k({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:b.hovertext,hoverinfo:d.hoverinfo,hovertemplate:S({},{keys:s.eventDataKeys}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:e({},b.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:b.sort,root:d.root,domain:T({name:"treemap",trace:!0,editType:"calc"})}},78018:function(Q,z,t){var S=t(74875);z.name="treemap",z.plot=function(k,l,T,b){S.plotBasePlot(z.name,k,l,T,b)},z.clean=function(k,l,T,b){S.cleanBasePlot(z.name,k,l,T,b)}},65039:function(Q,z,t){var S=t(52147);z.y=function(k,l){return S.calc(k,l)},z.T=function(k){return S._runCrossTraceCalc("treemap",k)}},43473:function(Q){Q.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},91174:function(Q,z,t){var S=t(71828),k=t(45802),l=t(7901),T=t(27670).c,b=t(90769).handleText,d=t(97313).TEXTPAD,s=t(21081),e=s.hasColorscale,i=s.handleDefaults;Q.exports=function(r,n,a,o){function u(_,h){return S.coerce(r,n,k,_,h)}var p=u("labels"),c=u("parents");if(p&&p.length&&c&&c.length){var x=u("values");x&&x.length?u("branchvalues"):u("count"),u("level"),u("maxdepth"),u("tiling.packing")==="squarify"&&u("tiling.squarifyratio"),u("tiling.flip"),u("tiling.pad");var g=u("text");u("texttemplate"),n.texttemplate||u("textinfo",Array.isArray(g)?"text+label":"label"),u("hovertext"),u("hovertemplate");var f=u("pathbar.visible");b(r,n,o,u,"auto",{hasPathbar:f,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),u("textposition");var y=n.textposition.indexOf("bottom")!==-1;u("marker.line.width")&&u("marker.line.color",o.paper_bgcolor);var v=u("marker.colors");(n._hasColorscale=e(r,"marker","colors")||(r.marker||{}).coloraxis)?i(r,n,o,u,{prefix:"marker.",cLetter:"c"}):u("marker.depthfade",!(v||[]).length);var m=2*n.textfont.size;u("marker.pad.t",y?m/4:m),u("marker.pad.l",m/4),u("marker.pad.r",m/4),u("marker.pad.b",y?m:m/4),u("marker.cornerradius"),n._hovered={marker:{line:{width:2,color:l.contrast(o.paper_bgcolor)}}},f&&(u("pathbar.thickness",n.pathbar.textfont.size+2*d),u("pathbar.side"),u("pathbar.edgeshape")),u("sort"),u("root.color"),T(n,o,u),n._length=null}else n.visible=!1}},80694:function(Q,z,t){var S=t(39898),k=t(2791),l=t(72597).clearMinTextSize,T=t(16688).resizeText,b=t(46650);Q.exports=function(d,s,e,i,r){var n,a,o=r.type,u=r.drawDescendants,p=d._fullLayout,c=p["_"+o+"layer"],x=!e;l(o,p),(n=c.selectAll("g.trace."+o).data(s,function(g){return g[0].trace.uid})).enter().append("g").classed("trace",!0).classed(o,!0),n.order(),!p.uniformtext.mode&&k.hasTransition(e)?(i&&(a=i()),S.transition().duration(e.duration).ease(e.easing).each("end",function(){a&&a()}).each("interrupt",function(){a&&a()}).each(function(){c.selectAll("g.trace").each(function(g){b(d,g,this,e,u)})})):(n.each(function(g){b(d,g,this,e,u)}),p.uniformtext.mode&&T(d,c.selectAll(".trace"),o)),x&&n.exit().remove()}},66209:function(Q,z,t){var S=t(39898),k=t(71828),l=t(91424),T=t(63893),b=t(37210),d=t(96362).styleOne,s=t(43473),e=t(2791),i=t(83523),r=!0;Q.exports=function(n,a,o,u,p){var c=p.barDifY,x=p.width,g=p.height,f=p.viewX,y=p.viewY,v=p.pathSlice,m=p.toMoveInsideSlice,_=p.strTransform,h=p.hasTransition,A=p.handleSlicesExit,w=p.makeUpdateSliceInterpolator,E=p.makeUpdateTextInterpolator,L={},C=n._context.staticPlot,P=n._fullLayout,D=a[0],G=D.trace,I=D.hierarchy,H=x/G._entryDepth,N=e.listPath(o.data,"id"),F=b(I.copy(),[x,g],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(F=F.filter(function(q){var te=N.indexOf(q.data.id);return te!==-1&&(q.x0=H*te,q.x1=H*(te+1),q.y0=c,q.y1=c+g,q.onPathbar=!0,!0)})).reverse(),(u=u.data(F,e.getPtId)).enter().append("g").classed("pathbar",!0),A(u,r,L,[x,g],v),u.order();var V=u;h&&(V=V.transition().each("end",function(){var q=S.select(this);e.setSliceCursor(q,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),V.each(function(q){q._x0=f(q.x0),q._x1=f(q.x1),q._y0=y(q.y0),q._y1=y(q.y1),q._hoverX=f(q.x1-Math.min(x,g)/2),q._hoverY=y(q.y1-g/2);var te=S.select(this),$=k.ensureSingle(te,"path","surface",function(ee){ee.style("pointer-events",C?"none":"all")});h?$.transition().attrTween("d",function(ee){var re=w(ee,r,L,[x,g]);return function(ae){return v(re(ae))}}):$.attr("d",v),te.call(i,o,n,a,{styleOne:d,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(e.setSliceCursor,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:n._transitioning}),$.call(d,q,G,{hovered:!1}),q._text=(e.getPtLabel(q)||"").split("<br>").join(" ")||"";var W=k.ensureSingle(te,"g","slicetext"),Z=k.ensureSingle(W,"text","",function(ee){ee.attr("data-notex",1)}),J=k.ensureUniformFontSize(n,e.determineTextFont(G,q,P.font,{onPathbar:!0}));Z.text(q._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(l.font,J).call(T.convertToTspans,n),q.textBB=l.bBox(Z.node()),q.transform=m(q,{fontSize:J.size,onPathbar:!0}),q.transform.fontSize=J.size,h?Z.transition().attrTween("transform",function(ee){var re=E(ee,r,L,[x,g]);return function(ae){return _(re(ae))}}):Z.attr("transform",_(q))})}},52583:function(Q,z,t){var S=t(39898),k=t(71828),l=t(91424),T=t(63893),b=t(37210),d=t(96362).styleOne,s=t(43473),e=t(2791),i=t(83523),r=t(24714).formatSliceLabel,n=!1;Q.exports=function(a,o,u,p,c){var x=c.width,g=c.height,f=c.viewX,y=c.viewY,v=c.pathSlice,m=c.toMoveInsideSlice,_=c.strTransform,h=c.hasTransition,A=c.handleSlicesExit,w=c.makeUpdateSliceInterpolator,E=c.makeUpdateTextInterpolator,L=c.prevEntry,C=a._context.staticPlot,P=a._fullLayout,D=o[0].trace,G=D.textposition.indexOf("left")!==-1,I=D.textposition.indexOf("right")!==-1,H=D.textposition.indexOf("bottom")!==-1,N=!H&&!D.marker.pad.t||H&&!D.marker.pad.b,F=b(u,[x,g],{packing:D.tiling.packing,squarifyratio:D.tiling.squarifyratio,flipX:D.tiling.flip.indexOf("x")>-1,flipY:D.tiling.flip.indexOf("y")>-1,pad:{inner:D.tiling.pad,top:D.marker.pad.t,left:D.marker.pad.l,right:D.marker.pad.r,bottom:D.marker.pad.b}}).descendants(),V=1/0,q=-1/0;F.forEach(function(J){var ee=J.depth;ee>=D._maxDepth?(J.x0=J.x1=(J.x0+J.x1)/2,J.y0=J.y1=(J.y0+J.y1)/2):(V=Math.min(V,ee),q=Math.max(q,ee))}),p=p.data(F,e.getPtId),D._maxVisibleLayers=isFinite(q)?q-V+1:0,p.enter().append("g").classed("slice",!0),A(p,n,{},[x,g],v),p.order();var te=null;if(h&&L){var $=e.getPtId(L);p.each(function(J){te===null&&e.getPtId(J)===$&&(te={x0:J.x0,x1:J.x1,y0:J.y0,y1:J.y1})})}var W=function(){return te||{x0:0,x1:x,y0:0,y1:g}},Z=p;return h&&(Z=Z.transition().each("end",function(){var J=S.select(this);e.setSliceCursor(J,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),Z.each(function(J){var ee=e.isHeader(J,D);J._x0=f(J.x0),J._x1=f(J.x1),J._y0=y(J.y0),J._y1=y(J.y1),J._hoverX=f(J.x1-D.marker.pad.r),J._hoverY=y(H?J.y1-D.marker.pad.b/2:J.y0+D.marker.pad.t/2);var re=S.select(this),ae=k.ensureSingle(re,"path","surface",function(ve){ve.style("pointer-events",C?"none":"all")});h?ae.transition().attrTween("d",function(ve){var we=w(ve,n,W(),[x,g]);return function(xe){return v(we(xe))}}):ae.attr("d",v),re.call(i,u,a,o,{styleOne:d,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(e.setSliceCursor,a,{isTransitioning:a._transitioning}),ae.call(d,J,D,{hovered:!1}),J.x0===J.x1||J.y0===J.y1?J._text="":J._text=ee?N?"":e.getPtLabel(J)||"":r(J,u,D,o,P)||"";var oe=k.ensureSingle(re,"g","slicetext"),ce=k.ensureSingle(oe,"text","",function(ve){ve.attr("data-notex",1)}),pe=k.ensureUniformFontSize(a,e.determineTextFont(D,J,P.font));ce.text(J._text||" ").classed("slicetext",!0).attr("text-anchor",I?"end":G||ee?"start":"middle").call(l.font,pe).call(T.convertToTspans,a),J.textBB=l.bBox(ce.node()),J.transform=m(J,{fontSize:pe.size,isHeader:ee}),J.transform.fontSize=pe.size,h?ce.transition().attrTween("transform",function(ve){var we=E(ve,n,W(),[x,g]);return function(xe){return _(we(xe))}}):ce.attr("transform",_(J))}),te}},14102:function(Q){Q.exports=function z(t,S,k){var l;k.swapXY&&(l=t.x0,t.x0=t.y0,t.y0=l,l=t.x1,t.x1=t.y1,t.y1=l),k.flipX&&(l=t.x0,t.x0=S[0]-t.x1,t.x1=S[0]-l),k.flipY&&(l=t.y0,t.y0=S[1]-t.y1,t.y1=S[1]-l);var T=t.children;if(T)for(var b=0;b<T.length;b++)z(T[b],S,k)}},70954:function(Q,z,t){Q.exports={moduleType:"trace",name:"treemap",basePlotModule:t(78018),categories:[],animatable:!0,attributes:t(45802),layoutAttributes:t(55479),supplyDefaults:t(91174),supplyLayoutDefaults:t(77182),calc:t(65039).y,crossTraceCalc:t(65039).T,plot:t(5893),style:t(96362).style,colorbar:t(4898),meta:{}}},55479:function(Q){Q.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77182:function(Q,z,t){var S=t(71828),k=t(55479);Q.exports=function(l,T){function b(d,s){return S.coerce(l,T,k,d,s)}b("treemapcolorway",T.colorway),b("extendtreemapcolors")}},37210:function(Q,z,t){var S=t(674),k=t(14102);Q.exports=function(l,T,b){var d,s=b.flipX,e=b.flipY,i=b.packing==="dice-slice",r=b.pad[e?"bottom":"top"],n=b.pad[s?"right":"left"],a=b.pad[s?"left":"right"],o=b.pad[e?"top":"bottom"];i&&(d=n,n=r,r=d,d=a,a=o,o=d);var u=S.treemap().tile(function(p,c){switch(p){case"squarify":return S.treemapSquarify.ratio(c);case"binary":return S.treemapBinary;case"dice":return S.treemapDice;case"slice":return S.treemapSlice;default:return S.treemapSliceDice}}(b.packing,b.squarifyratio)).paddingInner(b.pad.inner).paddingLeft(n).paddingRight(a).paddingTop(r).paddingBottom(o).size(i?[T[1],T[0]]:T)(l);return(i||s||e)&&k(u,T,{swapXY:i,flipX:s,flipY:e}),u}},5893:function(Q,z,t){var S=t(80694),k=t(52583);Q.exports=function(l,T,b,d){return S(l,T,b,d,{type:"treemap",drawDescendants:k})}},46650:function(Q,z,t){var S=t(39898),k=t(81684).sX,l=t(2791),T=t(71828),b=t(97313).TEXTPAD,d=t(17295).toMoveInsideBar,s=t(72597).recordMinTextSize,e=t(43473),i=t(66209);function r(n){return l.isHierarchyRoot(n)?"":l.getPtId(n)}Q.exports=function(n,a,o,u,p){var c=n._fullLayout,x=a[0],g=x.trace,f=g.type==="icicle",y=x.hierarchy,v=l.findEntryWithLevel(y,g.level),m=S.select(o),_=m.selectAll("g.pathbar"),h=m.selectAll("g.slice");if(!v)return _.remove(),void h.remove();var A=l.isHierarchyRoot(v),w=!c.uniformtext.mode&&l.hasTransition(u),E=l.getMaxDepth(g),L=c._size,C=g.domain,P=L.w*(C.x[1]-C.x[0]),D=L.h*(C.y[1]-C.y[0]),G=P,I=g.pathbar.thickness,H=g.marker.line.width+e.gapWithPathbar,N=g.pathbar.visible?g.pathbar.side.indexOf("bottom")>-1?D+H:-(I+H):0,F={x0:G,x1:G,y0:N,y1:N+I},V=function(_e,Ce,Fe){var Re=g.tiling.pad,He=function(Ke){return Ke-Re<=Ce.x0},Ge=function(Ke){return Ke+Re>=Ce.x1},$e=function(Ke){return Ke-Re<=Ce.y0},st=function(Ke){return Ke+Re>=Ce.y1};return _e.x0===Ce.x0&&_e.x1===Ce.x1&&_e.y0===Ce.y0&&_e.y1===Ce.y1?{x0:_e.x0,x1:_e.x1,y0:_e.y0,y1:_e.y1}:{x0:He(_e.x0-Re)?0:Ge(_e.x0-Re)?Fe[0]:_e.x0,x1:He(_e.x1+Re)?0:Ge(_e.x1+Re)?Fe[0]:_e.x1,y0:$e(_e.y0-Re)?0:st(_e.y0-Re)?Fe[1]:_e.y0,y1:$e(_e.y1+Re)?0:st(_e.y1+Re)?Fe[1]:_e.y1}},q=null,te={},$={},W=null,Z=function(_e,Ce){return Ce?te[r(_e)]:$[r(_e)]};x.hasMultipleRoots&&A&&E++,g._maxDepth=E,g._backgroundColor=c.paper_bgcolor,g._entryDepth=v.data.depth,g._atRootLevel=A;var J=-P/2+L.l+L.w*(C.x[1]+C.x[0])/2,ee=-D/2+L.t+L.h*(1-(C.y[1]+C.y[0])/2),re=function(_e){return J+_e},ae=function(_e){return ee+_e},oe=ae(0),ce=re(0),pe=function(_e){return ce+_e},ve=function(_e){return oe+_e};function we(_e,Ce){return _e+","+Ce}var xe=pe(0),ge=function(_e){_e.x=Math.max(xe,_e.x)},Oe=g.pathbar.edgeshape,Ae=g[f?"tiling":"marker"].pad,Te=function(_e){return g.textposition.indexOf(_e)!==-1},se=Te("top"),le=Te("left"),ne=Te("right"),me=Te("bottom"),Ee=function(_e,Ce){var Fe=_e.x0,Re=_e.x1,He=_e.y0,Ge=_e.y1,$e=_e.textBB,st=se||Ce.isHeader&&!me?"start":me?"end":"middle",Ke=Te("right"),gt=Te("left")||Ce.onPathbar?-1:Ke?1:0;if(Ce.isHeader){if((Fe+=(f?Ae:Ae.l)-b)>=(Re-=(f?Ae:Ae.r)-b)){var mt=(Fe+Re)/2;Fe=mt,Re=mt}var at;me?He<(at=Ge-(f?Ae:Ae.b))&&at<Ge&&(He=at):He<(at=He+(f?Ae:Ae.t))&&at<Ge&&(Ge=at)}var rt=d(Fe,Re,He,Ge,$e,{isHorizontal:!1,constrained:!0,angle:0,anchor:st,leftToRight:gt});return rt.fontSize=Ce.fontSize,rt.targetX=re(rt.targetX),rt.targetY=ae(rt.targetY),isNaN(rt.targetX)||isNaN(rt.targetY)?{}:(Fe!==Re&&He!==Ge&&s(g.type,rt,c),{scale:rt.scale,rotate:rt.rotate,textX:rt.textX,textY:rt.textY,anchorX:rt.anchorX,anchorY:rt.anchorY,targetX:rt.targetX,targetY:rt.targetY})},be=function(_e,Ce){for(var Fe,Re=0,He=_e;!Fe&&Re<E;)Re++,(He=He.parent)?Fe=Z(He,Ce):Re=E;return Fe||{}},De=function(_e,Ce,Fe,Re,He){var Ge,$e=Z(_e,Ce);if($e)Ge=$e;else if(Ce)Ge=F;else if(q)if(_e.parent){var st=W||Fe;st&&!Ce?Ge=V(_e,st,Re):(Ge={},T.extendFlat(Ge,be(_e,Ce)))}else Ge=T.extendFlat({},_e),f&&(He.orientation==="h"?He.flipX?Ge.x0=_e.x1:Ge.x1=0:He.flipY?Ge.y0=_e.y1:Ge.y1=0);else Ge={};return k(Ge,{x0:_e.x0,x1:_e.x1,y0:_e.y0,y1:_e.y1})},Ue=function(_e,Ce,Fe,Re){var He=Z(_e,Ce),Ge={},$e=function(Ke,gt,mt,at){if(gt)return te[r(y)]||F;var rt=$[g.level]||mt;return function(xt){return xt.data.depth-v.data.depth<E}(Ke)?V(Ke,rt,at):{}}(_e,Ce,Fe,Re);T.extendFlat(Ge,{transform:Ee({x0:$e.x0,x1:$e.x1,y0:$e.y0,y1:$e.y1,textBB:_e.textBB,_text:_e._text},{isHeader:l.isHeader(_e,g)})}),He?Ge=He:_e.parent&&T.extendFlat(Ge,be(_e,Ce));var st=_e.transform;return _e.x0!==_e.x1&&_e.y0!==_e.y1&&s(g.type,st,c),k(Ge,{transform:{scale:st.scale,rotate:st.rotate,textX:st.textX,textY:st.textY,anchorX:st.anchorX,anchorY:st.anchorY,targetX:st.targetX,targetY:st.targetY}})},he=function(_e,Ce,Fe,Re,He){var Ge=Re[0],$e=Re[1];w?_e.exit().transition().each(function(){var st=S.select(this);st.select("path.surface").transition().attrTween("d",function(Ke){var gt=function(mt,at,rt,xt){var Tt,wt=Z(mt,at);if(at)Tt=F;else{var Ot=Z(v,at);Tt=Ot?V(mt,Ot,xt):{}}return k(wt,Tt)}(Ke,Ce,0,[Ge,$e]);return function(mt){return He(gt(mt))}}),st.select("g.slicetext").attr("opacity",0)}).remove():_e.exit().remove()},ke=function(_e){var Ce=_e.transform;return _e.x0!==_e.x1&&_e.y0!==_e.y1&&s(g.type,Ce,c),T.getTextTransform({textX:Ce.textX,textY:Ce.textY,anchorX:Ce.anchorX,anchorY:Ce.anchorY,targetX:Ce.targetX,targetY:Ce.targetY,scale:Ce.scale,rotate:Ce.rotate})};w&&(_.each(function(_e){te[r(_e)]={x0:_e.x0,x1:_e.x1,y0:_e.y0,y1:_e.y1},_e.transform&&(te[r(_e)].transform={textX:_e.transform.textX,textY:_e.transform.textY,anchorX:_e.transform.anchorX,anchorY:_e.transform.anchorY,targetX:_e.transform.targetX,targetY:_e.transform.targetY,scale:_e.transform.scale,rotate:_e.transform.rotate})}),h.each(function(_e){$[r(_e)]={x0:_e.x0,x1:_e.x1,y0:_e.y0,y1:_e.y1},_e.transform&&($[r(_e)].transform={textX:_e.transform.textX,textY:_e.transform.textY,anchorX:_e.transform.anchorX,anchorY:_e.transform.anchorY,targetX:_e.transform.targetX,targetY:_e.transform.targetY,scale:_e.transform.scale,rotate:_e.transform.rotate}),!q&&l.isEntry(_e)&&(q=_e)})),W=p(n,a,v,h,{width:P,height:D,viewX:re,viewY:ae,pathSlice:function(_e){var Ce=re(_e.x0),Fe=re(_e.x1),Re=ae(_e.y0),He=ae(_e.y1),Ge=Fe-Ce,$e=He-Re;if(!Ge||!$e)return"";var st=g.marker.cornerradius||0,Ke=Math.min(st,Ge/2,$e/2);Ke&&_e.data&&_e.data.data&&_e.data.data.label&&(se&&(Ke=Math.min(Ke,Ae.t)),le&&(Ke=Math.min(Ke,Ae.l)),ne&&(Ke=Math.min(Ke,Ae.r)),me&&(Ke=Math.min(Ke,Ae.b)));var gt=function(mt,at){return Ke?"a"+we(Ke,Ke)+" 0 0 1 "+we(mt,at):""};return"M"+we(Ce,Re+Ke)+gt(Ke,-Ke)+"L"+we(Fe-Ke,Re)+gt(Ke,Ke)+"L"+we(Fe,He-Ke)+gt(-Ke,Ke)+"L"+we(Ce+Ke,He)+gt(-Ke,-Ke)+"Z"},toMoveInsideSlice:Ee,prevEntry:q,makeUpdateSliceInterpolator:De,makeUpdateTextInterpolator:Ue,handleSlicesExit:he,hasTransition:w,strTransform:ke}),g.pathbar.visible?i(n,a,v,_,{barDifY:N,width:G,height:I,viewX:pe,viewY:ve,pathSlice:function(_e){var Ce=pe(Math.max(Math.min(_e.x0,_e.x0),0)),Fe=pe(Math.min(Math.max(_e.x1,_e.x1),G)),Re=ve(_e.y0),He=ve(_e.y1),Ge=I/2,$e={},st={};$e.x=Ce,st.x=Fe,$e.y=st.y=(Re+He)/2;var Ke={x:Ce,y:Re},gt={x:Fe,y:Re},mt={x:Fe,y:He},at={x:Ce,y:He};return Oe===">"?(Ke.x-=Ge,gt.x-=Ge,mt.x-=Ge,at.x-=Ge):Oe==="/"?(mt.x-=Ge,at.x-=Ge,$e.x-=Ge/2,st.x-=Ge/2):Oe==="\\"?(Ke.x-=Ge,gt.x-=Ge,$e.x-=Ge/2,st.x-=Ge/2):Oe==="<"&&($e.x-=Ge,st.x-=Ge),ge(Ke),ge(at),ge($e),ge(gt),ge(mt),ge(st),"M"+we(Ke.x,Ke.y)+"L"+we(gt.x,gt.y)+"L"+we(st.x,st.y)+"L"+we(mt.x,mt.y)+"L"+we(at.x,at.y)+"L"+we($e.x,$e.y)+"Z"},toMoveInsideSlice:Ee,makeUpdateSliceInterpolator:De,makeUpdateTextInterpolator:Ue,handleSlicesExit:he,hasTransition:w,strTransform:ke}):_.remove()}},96362:function(Q,z,t){var S=t(39898),k=t(7901),l=t(71828),T=t(2791),b=t(72597).resizeText;function d(s,e,i,r){var n,a,o=(r||{}).hovered,u=e.data.data,p=u.i,c=u.color,x=T.isHierarchyRoot(e),g=1;if(o)n=i._hovered.marker.line.color,a=i._hovered.marker.line.width;else if(x&&c===i.root.color)g=100,n="rgba(0,0,0,0)",a=0;else if(n=l.castOption(i,p,"marker.line.color")||k.defaultLine,a=l.castOption(i,p,"marker.line.width")||0,!i._hasColorscale&&!e.onPathbar){var f=i.marker.depthfade;if(f){var y,v=k.combine(k.addOpacity(i._backgroundColor,.75),c);if(f===!0){var m=T.getMaxDepth(i);y=isFinite(m)?T.isLeaf(e)?0:i._maxVisibleLayers-(e.data.depth-i._entryDepth):e.data.height+1}else y=e.data.depth-i._entryDepth,i._atRootLevel||y++;if(y>0)for(var _=0;_<y;_++){var h=.5*_/y;c=k.combine(k.addOpacity(v,h),c)}}}s.style("stroke-width",a).call(k.fill,c).call(k.stroke,n).style("opacity",g)}Q.exports={style:function(s){var e=s._fullLayout._treemaplayer.selectAll(".trace");b(s,e,"treemap"),e.each(function(i){var r=S.select(this),n=i[0].trace;r.style("opacity",n.opacity),r.selectAll("path.surface").each(function(a){S.select(this).call(d,a,n,{hovered:!1})})})},styleOne:d}},68875:function(Q,z,t){var S=t(53522),k=t(1426).extendFlat,l=t(12663).axisHoverFormat;Q.exports={y:S.y,x:S.x,x0:S.x0,y0:S.y0,xhoverformat:l("x"),yhoverformat:l("y"),name:k({},S.name,{}),orientation:k({},S.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:S.fillcolor,points:k({},S.boxpoints,{}),jitter:k({},S.jitter,{}),pointpos:k({},S.pointpos,{}),width:k({},S.width,{}),marker:S.marker,text:S.text,hovertext:S.hovertext,hovertemplate:S.hovertemplate,quartilemethod:S.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:S.offsetgroup,alignmentgroup:S.alignmentgroup,selected:S.selected,unselected:S.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},38603:function(Q,z,t){var S=t(71828),k=t(89298),l=t(48518),T=t(60168),b=t(50606).BADNUM;function d(e,i,r){var n=i.max-i.min;if(!n)return e.bandwidth?e.bandwidth:0;if(e.bandwidth)return Math.max(e.bandwidth,n/1e4);var a=r.length,o=S.stdev(r,a-1,i.mean);return Math.max(function(u,p,c){return 1.059*Math.min(p,c/1.349)*Math.pow(u,-.2)}(a,o,i.q3-i.q1),n/100)}function s(e,i,r,n){var a,o=e.spanmode,u=e.span||[],p=[i.min,i.max],c=[i.min-2*n,i.max+2*n];function x(f){var y=u[f],v=r.type==="multicategory"?r.r2c(y):r.d2c(y,0,e[i.valLetter+"calendar"]);return v===b?c[f]:v}var g={type:"linear",range:a=o==="soft"?c:o==="hard"?p:[x(0),x(1)]};return k.setConvert(g),g.cleanRange(),a}Q.exports=function(e,i){var r=l(e,i);if(r[0].t.empty)return r;for(var n=e._fullLayout,a=k.getFromId(e,i[i.orientation==="h"?"xaxis":"yaxis"]),o=1/0,u=-1/0,p=0,c=0,x=0;x<r.length;x++){var g=r[x],f=g.pts.map(T.extractVal),y=g.bandwidth=d(i,g,f),v=g.span=s(i,g,a,y);if(g.min===g.max&&y===0)v=g.span=[g.min,g.max],g.density=[{v:1,t:v[0]}],g.bandwidth=y,p=Math.max(p,1);else{var m=v[1]-v[0],_=Math.ceil(m/(y/3)),h=m/_;if(!isFinite(h)||!isFinite(_))return S.error("Something went wrong with computing the violin span"),r[0].t.empty=!0,r;var A=T.makeKDE(g,i,f);g.density=new Array(_);for(var w=0,E=v[0];E<v[1]+h/2;w++,E+=h){var L=A(E);g.density[w]={v:L,t:E},p=Math.max(p,L)}}c=Math.max(c,f.length),o=Math.min(o,v[0]),u=Math.max(u,v[1])}var C=k.findExtremes(a,[o,u],{padded:!0});if(i._extremes[a._id]=C,i.width)r[0].t.maxKDE=p;else{var P=n._violinScaleGroupStats,D=i.scalegroup,G=P[D];G?(G.maxKDE=Math.max(G.maxKDE,p),G.maxCount=Math.max(G.maxCount,c)):P[D]={maxKDE:p,maxCount:c}}return r[0].t.labels.kde=S._(e,"kde:"),r}},86403:function(Q,z,t){var S=t(37188).setPositionOffset,k=["v","h"];Q.exports=function(l,T){for(var b=l.calcdata,d=T.xaxis,s=T.yaxis,e=0;e<k.length;e++){for(var i=k[e],r=i==="h"?s:d,n=[],a=0;a<b.length;a++){var o=b[a],u=o[0].t,p=o[0].trace;p.visible!==!0||p.type!=="violin"||u.empty||p.orientation!==i||p.xaxis!==d._id||p.yaxis!==s._id||n.push(a)}S("violin",l,n,r)}}},15899:function(Q,z,t){var S=t(71828),k=t(7901),l=t(36411),T=t(68875);Q.exports=function(b,d,s,e){function i(m,_){return S.coerce(b,d,T,m,_)}function r(m,_){return S.coerce2(b,d,T,m,_)}if(l.handleSampleDefaults(b,d,i,e),d.visible!==!1){i("bandwidth"),i("side"),i("width")||(i("scalegroup",d.name),i("scalemode"));var n,a=i("span");Array.isArray(a)&&(n="manual"),i("spanmode",n);var o=i("line.color",(b.marker||{}).color||s),u=i("line.width"),p=i("fillcolor",k.addOpacity(d.line.color,.5));l.handlePointsDefaults(b,d,i,{prefix:""});var c=r("box.width"),x=r("box.fillcolor",p),g=r("box.line.color",o),f=r("box.line.width",u);i("box.visible",!!(c||x||g||f))||(d.box={visible:!1});var y=r("meanline.color",o),v=r("meanline.width",u);i("meanline.visible",!!(y||v))||(d.meanline={visible:!1}),i("quartilemethod")}}},60168:function(Q,z,t){var S=t(71828),k=function(l){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*l*l)};z.makeKDE=function(l,T,b){var d=b.length,s=k,e=l.bandwidth,i=1/(d*e);return function(r){for(var n=0,a=0;a<d;a++)n+=s((r-b[a])/e);return i*n}},z.getPositionOnKdePath=function(l,T,b){var d,s;T.orientation==="h"?(d="y",s="x"):(d="x",s="y");var e=S.findPointOnPath(l.path,b,s,{pathLength:l.pathLength}),i=l.posCenterPx,r=e[d];return[r,T.side==="both"?2*i-r:i]},z.getKdeValue=function(l,T,b){var d=l.pts.map(z.extractVal);return z.makeKDE(l,T,d)(b)/l.posDensityScale},z.extractVal=function(l){return l.v}},57634:function(Q,z,t){var S=t(7901),k=t(71828),l=t(89298),T=t(41868),b=t(60168);Q.exports=function(d,s,e,i,r){r||(r={});var n,a,o=r.hoverLayer,u=d.cd,p=u[0].trace,c=p.hoveron,x=c.indexOf("violins")!==-1,g=c.indexOf("kde")!==-1,f=[];if(x||g){var y=T.hoverOnBoxes(d,s,e,i);if(g&&y.length>0){var v,m,_,h,A,w=d.xa,E=d.ya;p.orientation==="h"?(A=s,v="y",_=E,m="x",h=w):(A=e,v="x",_=w,m="y",h=E);var L=u[d.index];if(A>=L.span[0]&&A<=L.span[1]){var C=k.extendFlat({},d),P=h.c2p(A,!0),D=b.getKdeValue(L,p,A),G=b.getPositionOnKdePath(L,p,P),I=_._offset,H=_._length;C[v+"0"]=G[0],C[v+"1"]=G[1],C[m+"0"]=C[m+"1"]=P,C[m+"Label"]=m+": "+l.hoverLabelText(h,A,p[m+"hoverformat"])+", "+u[0].t.labels.kde+" "+D.toFixed(3);for(var N=0,F=0;F<y.length;F++)if(y[F].attr==="med"){N=F;break}C.spikeDistance=y[N].spikeDistance;var V=v+"Spike";C[V]=y[N][V],y[N].spikeDistance=void 0,y[N][V]=void 0,C.hovertemplate=!1,f.push(C),(a={})[v+"1"]=k.constrain(I+G[0],I,I+H),a[v+"2"]=k.constrain(I+G[1],I,I+H),a[m+"1"]=a[m+"2"]=h._offset+P}}x&&(f=f.concat(y))}c.indexOf("points")!==-1&&(n=T.hoverOnPoints(d,s,e));var q=o.selectAll(".violinline-"+p.uid).data(a?[0]:[]);return q.enter().append("line").classed("violinline-"+p.uid,!0).attr("stroke-width",1.5),q.exit().remove(),q.attr(a).call(S.stroke,d.color),i==="closest"?n?[n]:f:(n&&f.push(n),f)}},47462:function(Q,z,t){Q.exports={attributes:t(68875),layoutAttributes:t(9228),supplyDefaults:t(15899),crossTraceDefaults:t(36411).crossTraceDefaults,supplyLayoutDefaults:t(33598),calc:t(38603),crossTraceCalc:t(86403),plot:t(28443),style:t(31847),styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(57634),selectPoints:t(24626),moduleType:"trace",name:"violin",basePlotModule:t(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},9228:function(Q,z,t){var S=t(40094),k=t(71828).extendFlat;Q.exports={violinmode:k({},S.boxmode,{}),violingap:k({},S.boxgap,{}),violingroupgap:k({},S.boxgroupgap,{})}},33598:function(Q,z,t){var S=t(71828),k=t(9228),l=t(4199);Q.exports=function(T,b,d){l._supply(T,b,d,function(s,e){return S.coerce(T,b,k,s,e)},"violin")}},28443:function(Q,z,t){var S=t(39898),k=t(71828),l=t(91424),T=t(86047),b=t(34621),d=t(60168);Q.exports=function(s,e,i,r){var n=s._context.staticPlot,a=s._fullLayout,o=e.xaxis,u=e.yaxis;function p(c,x){var g=b(c,{xaxis:o,yaxis:u,trace:x,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return l.smoothopen(g[0],1)}k.makeTraceGroups(r,i,"trace violins").each(function(c){var x=S.select(this),g=c[0],f=g.t,y=g.trace;if(y.visible!==!0||f.empty)x.remove();else{var v=f.bPos,m=f.bdPos,_=e[f.valLetter+"axis"],h=e[f.posLetter+"axis"],A=y.side==="both",w=A||y.side==="positive",E=A||y.side==="negative",L=x.selectAll("path.violin").data(k.identity);L.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","violin"),L.exit().remove(),L.each(function(F){var V,q,te,$,W,Z,J,ee,re=S.select(this),ae=F.density,oe=ae.length,ce=h.c2l(F.pos+v,!0),pe=h.l2p(ce);if(y.width)V=f.maxKDE/m;else{var ve=a._violinScaleGroupStats[y.scalegroup];V=y.scalemode==="count"?ve.maxKDE/m*(ve.maxCount/F.pts.length):ve.maxKDE/m}if(w){for(J=new Array(oe),W=0;W<oe;W++)(ee=J[W]={})[f.posLetter]=ce+ae[W].v/V,ee[f.valLetter]=_.c2l(ae[W].t,!0);q=p(J,y)}if(E){for(J=new Array(oe),Z=0,W=oe-1;Z<oe;Z++,W--)(ee=J[Z]={})[f.posLetter]=ce-ae[W].v/V,ee[f.valLetter]=_.c2l(ae[W].t,!0);te=p(J,y)}if(A)$=q+"L"+te.substr(1)+"Z";else{var we=[pe,_.c2p(ae[0].t)],xe=[pe,_.c2p(ae[oe-1].t)];y.orientation==="h"&&(we.reverse(),xe.reverse()),$=w?"M"+we+"L"+q.substr(1)+"L"+xe:"M"+xe+"L"+te.substr(1)+"L"+we}re.attr("d",$),F.posCenterPx=pe,F.posDensityScale=V*m,F.path=re.node(),F.pathLength=F.path.getTotalLength()/(A?2:1)});var C,P,D,G=y.box,I=G.width,H=(G.line||{}).width;A?(C=m*I,P=0):w?(C=[0,m*I/2],P=H*{x:1,y:-1}[f.posLetter]):(C=[m*I/2,0],P=H*{x:-1,y:1}[f.posLetter]),T.plotBoxAndWhiskers(x,{pos:h,val:_},y,{bPos:v,bdPos:C,bPosPxOffset:P}),T.plotBoxMean(x,{pos:h,val:_},y,{bPos:v,bdPos:C,bPosPxOffset:P}),!y.box.visible&&y.meanline.visible&&(D=k.identity);var N=x.selectAll("path.meanline").data(D||[]);N.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",n?"none":"non-scaling-stroke"),N.exit().remove(),N.each(function(F){var V=_.c2p(F.mean,!0),q=d.getPositionOnKdePath(F,y,V);S.select(this).attr("d",y.orientation==="h"?"M"+V+","+q[0]+"V"+q[1]:"M"+q[0]+","+V+"H"+q[1])}),T.plotPoints(x,{x:o,y:u},y,f)}})}},31847:function(Q,z,t){var S=t(39898),k=t(7901),l=t(16296).stylePoints;Q.exports=function(T){var b=S.select(T).selectAll("g.trace.violins");b.style("opacity",function(d){return d[0].trace.opacity}),b.each(function(d){var s=d[0].trace,e=S.select(this),i=s.box||{},r=i.line||{},n=s.meanline||{},a=n.width;e.selectAll("path.violin").style("stroke-width",s.line.width+"px").call(k.stroke,s.line.color).call(k.fill,s.fillcolor),e.selectAll("path.box").style("stroke-width",r.width+"px").call(k.stroke,r.color).call(k.fill,i.fillcolor);var o={"stroke-width":a+"px","stroke-dasharray":2*a+"px,"+a+"px"};e.selectAll("path.mean").style(o).call(k.stroke,n.color),e.selectAll("path.meanline").style(o).call(k.stroke,n.color),l(e,s,T)})}},16336:function(Q,z,t){var S=t(50693),k=t(16249),l=t(54532),T=t(9012),b=t(1426).extendFlat,d=t(30962).overrideAll,s=Q.exports=d(b({x:k.x,y:k.y,z:k.z,value:k.value,isomin:k.isomin,isomax:k.isomax,surface:k.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:k.slices,caps:k.caps,text:k.text,hovertext:k.hovertext,xhoverformat:k.xhoverformat,yhoverformat:k.yhoverformat,zhoverformat:k.zhoverformat,valuehoverformat:k.valuehoverformat,hovertemplate:k.hovertemplate},S("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:k.colorbar,opacity:k.opacity,opacityscale:l.opacityscale,lightposition:k.lightposition,lighting:k.lighting,flatshading:k.flatshading,contour:k.contour,hoverinfo:b({},T.hoverinfo),showlegend:b({},T.showlegend,{dflt:!1})}),"calc","nested");s.x.editType=s.y.editType=s.z.editType=s.value.editType="calc+clearAxisTypes",s.transforms=void 0},64809:function(Q,z,t){var S=t(9330).gl_mesh3d,k=t(81697).parseColorScale,l=t(78614),T=t(21081).extractOpts,b=t(90060),d=t(22674).findNearestOnAxis,s=t(22674).generateIsoMeshes;function e(r,n,a){this.scene=r,this.uid=a,this.mesh=n,this.name="",this.data=null,this.showContour=!1}var i=e.prototype;i.handlePick=function(r){if(r.object===this.mesh){var n=r.data.index,a=this.data._meshX[n],o=this.data._meshY[n],u=this.data._meshZ[n],p=this.data._Ys.length,c=this.data._Zs.length,x=d(a,this.data._Xs).id,g=d(o,this.data._Ys).id,f=d(u,this.data._Zs).id,y=r.index=f+c*g+c*p*x;r.traceCoordinate=[this.data._meshX[y],this.data._meshY[y],this.data._meshZ[y],this.data._value[y]];var v=this.data.hovertext||this.data.text;return Array.isArray(v)&&v[y]!==void 0?r.textLabel=v[y]:v&&(r.textLabel=v),!0}},i.update=function(r){var n=this.scene,a=n.fullSceneLayout;function o(c,x,g,f){return x.map(function(y){return c.d2l(y,0,f)*g})}this.data=s(r);var u={positions:b(o(a.xaxis,r._meshX,n.dataScale[0],r.xcalendar),o(a.yaxis,r._meshY,n.dataScale[1],r.ycalendar),o(a.zaxis,r._meshZ,n.dataScale[2],r.zcalendar)),cells:b(r._meshI,r._meshJ,r._meshK),lightPosition:[r.lightposition.x,r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,diffuse:r.lighting.diffuse,specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,opacityscale:r.opacityscale,contourEnable:r.contour.show,contourColor:l(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading},p=T(r);u.vertexIntensity=r._meshIntensity,u.vertexIntensityBounds=[p.min,p.max],u.colormap=k(r),this.mesh.update(u)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},Q.exports=function(r,n){var a=r.glplot.gl,o=S({gl:a}),u=new e(r,o,n.uid);return o._trace=u,u.update(n),r.glplot.add(o),u}},47651:function(Q,z,t){var S=t(71828),k=t(16336),l=t(82738).supplyIsoDefaults,T=t(91831).opacityscaleDefaults;Q.exports=function(b,d,s,e){function i(r,n){return S.coerce(b,d,k,r,n)}l(b,d,s,e,i),T(b,d,e,i)}},17659:function(Q,z,t){Q.exports={attributes:t(16336),supplyDefaults:t(47651),calc:t(56959),colorbar:{min:"cmin",max:"cmax"},plot:t(64809),moduleType:"trace",name:"volume",basePlotModule:t(58547),categories:["gl3d","showLegend"],meta:{}}},43037:function(Q,z,t){var S=t(1486),k=t(82196).line,l=t(9012),T=t(12663).axisHoverFormat,b=t(5386).fF,d=t(5386).si,s=t(48334),e=t(1426).extendFlat,i=t(7901);function r(n){return{marker:{color:e({},S.marker.color,{arrayOk:!1,editType:"style"}),line:{color:e({},S.marker.line.color,{arrayOk:!1,editType:"style"}),width:e({},S.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}Q.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:S.x,x0:S.x0,dx:S.dx,y:S.y,y0:S.y0,dy:S.dy,xperiod:S.xperiod,yperiod:S.yperiod,xperiod0:S.xperiod0,yperiod0:S.yperiod0,xperiodalignment:S.xperiodalignment,yperiodalignment:S.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:S.hovertext,hovertemplate:b({},{keys:s.eventDataKeys}),hoverinfo:e({},l.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:d({editType:"plot"},{keys:s.eventDataKeys.concat(["label"])}),text:S.text,textposition:S.textposition,insidetextanchor:S.insidetextanchor,textangle:S.textangle,textfont:S.textfont,insidetextfont:S.insidetextfont,outsidetextfont:S.outsidetextfont,constraintext:S.constraintext,cliponaxis:S.cliponaxis,orientation:S.orientation,offset:S.offset,width:S.width,increasing:r(),decreasing:r(),totals:r(),connector:{line:{color:e({},k.color,{dflt:i.defaultLine}),width:e({},k.width,{editType:"plot"}),dash:k.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:S.offsetgroup,alignmentgroup:S.alignmentgroup}},52752:function(Q,z,t){var S=t(89298),k=t(42973),l=t(71828).mergeArray,T=t(66279),b=t(50606).BADNUM;function d(e){return e==="a"||e==="absolute"}function s(e){return e==="t"||e==="total"}Q.exports=function(e,i){var r,n,a,o,u,p,c=S.getFromId(e,i.xaxis||"x"),x=S.getFromId(e,i.yaxis||"y");i.orientation==="h"?(r=c.makeCalcdata(i,"x"),a=x.makeCalcdata(i,"y"),o=k(i,x,"y",a),u=!!i.yperiodalignment,p="y"):(r=x.makeCalcdata(i,"y"),a=c.makeCalcdata(i,"x"),o=k(i,c,"x",a),u=!!i.xperiodalignment,p="x"),n=o.vals;for(var g,f=Math.min(n.length,r.length),y=new Array(f),v=0,m=!1,_=0;_<f;_++){var h=r[_]||0,A=!1;(r[_]!==b||s(i.measure[_])||d(i.measure[_]))&&_+1<f&&(r[_+1]!==b||s(i.measure[_+1])||d(i.measure[_+1]))&&(A=!0);var w=y[_]={i:_,p:n[_],s:h,rawS:h,cNext:A};d(i.measure[_])?(v=w.s,w.isSum=!0,w.dir="totals",w.s=v):s(i.measure[_])?(w.isSum=!0,w.dir="totals",w.s=v):(w.isSum=!1,w.dir=w.rawS<0?"decreasing":"increasing",g=w.s,w.s=v+g,v+=g),w.dir==="totals"&&(m=!0),u&&(y[_].orig_p=a[_],y[_][p+"End"]=o.ends[_],y[_][p+"Start"]=o.starts[_]),i.ids&&(w.id=String(i.ids[_])),w.v=(i.base||0)+v}return y.length&&(y[0].hasTotals=m),l(i.text,y,"tx"),l(i.hovertext,y,"htx"),T(y,i),y}},48334:function(Q){Q.exports={eventDataKeys:["initial","delta","final"]}},70766:function(Q,z,t){var S=t(11661).setGroupPositions;Q.exports=function(k,l){var T,b,d=k._fullLayout,s=k._fullData,e=k.calcdata,i=l.xaxis,r=l.yaxis,n=[],a=[],o=[];for(b=0;b<s.length;b++){var u=s[b];u.visible===!0&&u.xaxis===i._id&&u.yaxis===r._id&&u.type==="waterfall"&&(T=e[b],u.orientation==="h"?o.push(T):a.push(T),n.push(T))}var p={mode:d.waterfallmode,norm:d.waterfallnorm,gap:d.waterfallgap,groupgap:d.waterfallgroupgap};for(S(k,i,r,a,p),S(k,r,i,o,p),b=0;b<n.length;b++){T=n[b];for(var c=0;c<T.length;c++){var x=T[c];x.isSum===!1&&(x.s0+=c===0?0:T[c-1].s),c+1<T.length&&(T[c].nextP0=T[c+1].p0,T[c].nextS0=T[c+1].s0)}}}},83266:function(Q,z,t){var S=t(71828),k=t(26125),l=t(90769).handleText,T=t(67513),b=t(73927),d=t(43037),s=t(7901),e=t(22372),i=e.INCREASING.COLOR,r=e.DECREASING.COLOR;function n(a,o,u){a(o+".marker.color",u),a(o+".marker.line.color",s.defaultLine),a(o+".marker.line.width")}Q.exports={supplyDefaults:function(a,o,u,p){function c(g,f){return S.coerce(a,o,d,g,f)}if(T(a,o,p,c)){b(a,o,p,c),c("xhoverformat"),c("yhoverformat"),c("measure"),c("orientation",o.x&&!o.y?"h":"v"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate");var x=c("textposition");l(a,o,p,c,x,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o.textposition!=="none"&&(c("texttemplate"),o.texttemplate||c("textinfo")),n(c,"increasing",i),n(c,"decreasing",r),n(c,"totals","#4499FF"),c("connector.visible")&&(c("connector.mode"),c("connector.line.width")&&(c("connector.line.color"),c("connector.line.dash")))}else o.visible=!1},crossTraceDefaults:function(a,o){var u,p;function c(g){return S.coerce(p._input,p,d,g)}if(o.waterfallmode==="group")for(var x=0;x<a.length;x++)u=(p=a[x])._input,k(u,p,o,c)}}},58593:function(Q){Q.exports=function(z,t){return z.x="xVal"in t?t.xVal:t.x,z.y="yVal"in t?t.yVal:t.y,"initial"in t&&(z.initial=t.initial),"delta"in t&&(z.delta=t.delta),"final"in t&&(z.final=t.final),t.xa&&(z.xaxis=t.xa),t.ya&&(z.yaxis=t.ya),z}},61326:function(Q,z,t){var S=t(89298).hoverLabelText,k=t(7901).opacity,l=t(95423).hoverOnBars,T=t(22372),b=T.INCREASING.SYMBOL,d=T.DECREASING.SYMBOL;Q.exports=function(s,e,i,r,n){var a=l(s,e,i,r,n);if(a){var o=a.cd,u=o[0].trace,p=u.orientation==="h",c=p?"x":"y",x=p?s.xa:s.ya,g=o[a.index],f=g.isSum?g.b+g.s:g.rawS;if(!g.isSum){a.initial=g.b+g.s-f,a.delta=f,a.final=a.initial+a.delta;var y=w(Math.abs(a.delta));a.deltaLabel=f<0?"("+y+")":y,a.finalLabel=w(a.final),a.initialLabel=w(a.initial)}var v=g.hi||u.hoverinfo,m=[];if(v&&v!=="none"&&v!=="skip"){var _=v==="all",h=v.split("+"),A=function(E){return _||h.indexOf(E)!==-1};g.isSum||(!A("final")||A(p?"x":"y")||m.push(a.finalLabel),A("delta")&&(f<0?m.push(a.deltaLabel+" "+d):m.push(a.deltaLabel+" "+b)),A("initial")&&m.push("Initial: "+a.initialLabel))}return m.length&&(a.extraText=m.join("<br>")),a.color=function(E,L){var C=E[L.dir].marker,P=C.color,D=C.line.color,G=C.line.width;return k(P)?P:k(D)&&G?D:void 0}(u,g),[a]}function w(E){return S(x,E,u[c+"hoverformat"])}}},19990:function(Q,z,t){Q.exports={attributes:t(43037),layoutAttributes:t(13494),supplyDefaults:t(83266).supplyDefaults,crossTraceDefaults:t(83266).crossTraceDefaults,supplyLayoutDefaults:t(5176),calc:t(52752),crossTraceCalc:t(70766),plot:t(30436),style:t(55750).style,hoverPoints:t(61326),eventData:t(58593),selectPoints:t(81974),moduleType:"trace",name:"waterfall",basePlotModule:t(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},13494:function(Q){Q.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},5176:function(Q,z,t){var S=t(71828),k=t(13494);Q.exports=function(l,T,b){var d=!1;function s(r,n){return S.coerce(l,T,k,r,n)}for(var e=0;e<b.length;e++){var i=b[e];if(i.visible&&i.type==="waterfall"){d=!0;break}}d&&(s("waterfallmode"),s("waterfallgap",.2),s("waterfallgroupgap"))}},30436:function(Q,z,t){var S=t(39898),k=t(71828),l=t(91424),T=t(50606).BADNUM,b=t(17295),d=t(72597).clearMinTextSize;Q.exports=function(s,e,i,r){var n=s._fullLayout;d("waterfall",n),b.plot(s,e,i,r,{mode:n.waterfallmode,norm:n.waterfallmode,gap:n.waterfallgap,groupgap:n.waterfallgroupgap}),function(a,o,u,p){var c=o.xaxis,x=o.yaxis;k.makeTraceGroups(p,u,"trace bars").each(function(g){var f=S.select(this),y=g[0].trace,v=k.ensureSingle(f,"g","lines");if(y.connector&&y.connector.visible){var m=y.orientation==="h",_=y.connector.mode,h=v.selectAll("g.line").data(k.identity);h.enter().append("g").classed("line",!0),h.exit().remove();var A=h.size();h.each(function(w,E){if(E===A-1||w.cNext){var L=function(G,I,H,N){var F=[],V=[],q=N?I:H,te=N?H:I;return F[0]=q.c2p(G.s0,!0),V[0]=te.c2p(G.p0,!0),F[1]=q.c2p(G.s1,!0),V[1]=te.c2p(G.p1,!0),F[2]=q.c2p(G.nextS0,!0),V[2]=te.c2p(G.nextP0,!0),N?[F,V]:[V,F]}(w,c,x,m),C=L[0],P=L[1],D="";C[0]!==T&&P[0]!==T&&C[1]!==T&&P[1]!==T&&(_==="spanning"&&!w.isSum&&E>0&&(D+=m?"M"+C[0]+","+P[1]+"V"+P[0]:"M"+C[1]+","+P[0]+"H"+C[0]),_!=="between"&&(w.isSum||E<A-1)&&(D+=m?"M"+C[1]+","+P[0]+"V"+P[1]:"M"+C[0]+","+P[1]+"H"+C[1]),C[2]!==T&&P[2]!==T&&(D+=m?"M"+C[1]+","+P[1]+"V"+P[2]:"M"+C[1]+","+P[1]+"H"+C[2])),D===""&&(D="M0,0Z"),k.ensureSingle(S.select(this),"path").attr("d",D).call(l.setClipUrl,o.layerClipId,a)}})}else v.remove()})}(s,e,i,r)}},55750:function(Q,z,t){var S=t(39898),k=t(91424),l=t(7901),T=t(37822).DESELECTDIM,b=t(16688),d=t(72597).resizeText,s=b.styleTextPoints;Q.exports={style:function(e,i,r){var n=r||S.select(e).selectAll("g.waterfalllayer").selectAll("g.trace");d(e,n,"waterfall"),n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var o=S.select(this),u=a[0].trace;o.selectAll(".point > path").each(function(p){if(!p.isBlank){var c=u[p.dir].marker;S.select(this).call(l.fill,c.color).call(l.stroke,c.line.color).call(k.dashLine,c.line.dash,c.line.width).style("opacity",u.selectedpoints&&!p.selected?T:1)}}),s(o,u,e),o.selectAll(".lines").each(function(){var p=u.connector.line;k.lineGroupStyle(S.select(this).selectAll("path"),p.width,p.color,p.dash)})})}}},82887:function(Q,z,t){var S=t(89298),k=t(71828),l=t(86281),T=t(79344).p,b=t(50606).BADNUM;z.moduleType="transform",z.name="aggregate";var d=z.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},s=d.aggregations;function e(a,o,u,p){if(p.enabled){for(var c=p.target,x=k.nestedProperty(o,c),g=x.get(),f=function(m,_){var h=m.func,A=_.d2c,w=_.c2d;switch(h){case"count":return i;case"first":return r;case"last":return n;case"sum":return function(E,L){for(var C=0,P=0;P<L.length;P++){var D=A(E[L[P]]);D!==b&&(C+=D)}return w(C)};case"avg":return function(E,L){for(var C=0,P=0,D=0;D<L.length;D++){var G=A(E[L[D]]);G!==b&&(C+=G,P++)}return P?w(C/P):b};case"min":return function(E,L){for(var C=1/0,P=0;P<L.length;P++){var D=A(E[L[P]]);D!==b&&(C=Math.min(C,D))}return C===1/0?b:w(C)};case"max":return function(E,L){for(var C=-1/0,P=0;P<L.length;P++){var D=A(E[L[P]]);D!==b&&(C=Math.max(C,D))}return C===-1/0?b:w(C)};case"range":return function(E,L){for(var C=1/0,P=-1/0,D=0;D<L.length;D++){var G=A(E[L[D]]);G!==b&&(C=Math.min(C,G),P=Math.max(P,G))}return P===-1/0||C===1/0?b:w(P-C)};case"change":return function(E,L){var C=A(E[L[0]]),P=A(E[L[L.length-1]]);return C===b||P===b?b:w(P-C)};case"median":return function(E,L){for(var C=[],P=0;P<L.length;P++){var D=A(E[L[P]]);D!==b&&C.push(D)}if(!C.length)return b;C.sort(k.sorterAsc);var G=(C.length-1)/2;return w((C[Math.floor(G)]+C[Math.ceil(G)])/2)};case"mode":return function(E,L){for(var C={},P=0,D=b,G=0;G<L.length;G++){var I=A(E[L[G]]);if(I!==b){var H=C[I]=(C[I]||0)+1;H>P&&(P=H,D=I)}}return P?w(D):b};case"rms":return function(E,L){for(var C=0,P=0,D=0;D<L.length;D++){var G=A(E[L[D]]);G!==b&&(C+=G*G,P++)}return P?w(Math.sqrt(C/P)):b};case"stddev":return function(E,L){var C,P=0,D=0,G=1,I=b;for(C=0;C<L.length&&I===b;C++)I=A(E[L[C]]);if(I===b)return b;for(;C<L.length;C++){var H=A(E[L[C]]);if(H!==b){var N=H-I;P+=N,D+=N*N,G++}}var F=m.funcmode==="sample"?G-1:G;return F?Math.sqrt((D-P*P/G)/F):0}}}(p,S.getDataConversions(a,o,c,g)),y=new Array(u.length),v=0;v<u.length;v++)y[v]=f(g,u[v]);x.set(y),p.func==="count"&&k.pushUnique(o._arrayAttrs,c)}}function i(a,o){return o.length}function r(a,o){return a[o[0]]}function n(a,o){return a[o[o.length-1]]}z.supplyDefaults=function(a,o){var u,p={};function c(w,E){return k.coerce(a,p,d,w,E)}if(!c("enabled"))return p;var x=l.findArrayAttributes(o),g={};for(u=0;u<x.length;u++)g[x[u]]=1;var f=c("groups");if(!Array.isArray(f)){if(!g[f])return p.enabled=!1,p;g[f]=0}var y,v=a.aggregations||[],m=p.aggregations=new Array(v.length);function _(w,E){return k.coerce(v[u],y,s,w,E)}for(u=0;u<v.length;u++){y={_index:u};var h=_("target"),A=_("func");_("enabled")&&h&&(g[h]||A==="count"&&g[h]===void 0)?(A==="stddev"&&_("funcmode"),g[h]=0,m[u]=y):m[u]={enabled:!1,_index:u}}for(u=0;u<x.length;u++)g[x[u]]&&m.push({target:x[u],func:s.func.dflt,enabled:!0,_index:-1});return p},z.calcTransform=function(a,o,u){if(u.enabled){var p=u.groups,c=k.getTargetArray(o,{target:p});if(c){var x,g,f,y,v={},m={},_=[],h=T(o.transforms,u),A=c.length;for(o._length&&(A=Math.min(A,o._length)),x=0;x<A;x++)(f=v[g=c[x]])===void 0?(v[g]=_.length,y=[x],_.push(y),m[v[g]]=h(x)):(_[f].push(x),m[v[g]]=(m[v[g]]||[]).concat(h(x)));u._indexToPoints=m;var w=u.aggregations;for(x=0;x<w.length;x++)e(a,o,_,w[x]);typeof p=="string"&&e(a,o,_,{target:p,func:"first",enabled:!0}),o._length=_.length}}}},14382:function(Q,z,t){var S=t(71828),k=t(73972),l=t(89298),T=t(79344).p,b=t(74808),d=b.COMPARISON_OPS,s=b.INTERVAL_OPS,e=b.SET_OPS;z.moduleType="transform",z.name="filter",z.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(d).concat(s).concat(e),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},z.supplyDefaults=function(i){var r={};function n(u,p){return S.coerce(i,r,z.attributes,u,p)}if(n("enabled")){var a=n("target");if(S.isArrayOrTypedArray(a)&&a.length===0)return r.enabled=!1,r;n("preservegaps"),n("operation"),n("value");var o=k.getComponentMethod("calendars","handleDefaults");o(i,r,"valuecalendar",null),o(i,r,"targetcalendar",null)}return r},z.calcTransform=function(i,r,n){if(n.enabled){var a=S.getTargetArray(r,n);if(a){var o=n.target,u=a.length;r._length&&(u=Math.min(u,r._length));var p=n.targetcalendar,c=r._arrayAttrs,x=n.preservegaps;if(typeof o=="string"){var g=S.nestedProperty(r,o+"calendar").get();g&&(p=g)}var f,y,v=function(L,C,P){var D=L.operation,G=L.value,I=Array.isArray(G);function H(q){return q.indexOf(D)!==-1}var N,F=function(q){return C(q,0,L.valuecalendar)},V=function(q){return C(q,0,P)};switch(H(d)?N=F(I?G[0]:G):H(s)?N=I?[F(G[0]),F(G[1])]:[F(G),F(G)]:H(e)&&(N=I?G.map(F):[F(G)]),D){case"=":return function(q){return V(q)===N};case"!=":return function(q){return V(q)!==N};case"<":return function(q){return V(q)<N};case"<=":return function(q){return V(q)<=N};case">":return function(q){return V(q)>N};case">=":return function(q){return V(q)>=N};case"[]":return function(q){var te=V(q);return te>=N[0]&&te<=N[1]};case"()":return function(q){var te=V(q);return te>N[0]&&te<N[1]};case"[)":return function(q){var te=V(q);return te>=N[0]&&te<N[1]};case"(]":return function(q){var te=V(q);return te>N[0]&&te<=N[1]};case"][":return function(q){var te=V(q);return te<=N[0]||te>=N[1]};case")(":return function(q){var te=V(q);return te<N[0]||te>N[1]};case"](":return function(q){var te=V(q);return te<=N[0]||te>N[1]};case")[":return function(q){var te=V(q);return te<N[0]||te>=N[1]};case"{}":return function(q){return N.indexOf(V(q))!==-1};case"}{":return function(q){return N.indexOf(V(q))===-1}}}(n,l.getDataToCoordFunc(i,r,o,a),p),m={},_={},h=0;x?(f=function(L){m[L.astr]=S.extendDeep([],L.get()),L.set(new Array(u))},y=function(L,C){var P=m[L.astr][C];L.get()[C]=P}):(f=function(L){m[L.astr]=S.extendDeep([],L.get()),L.set([])},y=function(L,C){var P=m[L.astr][C];L.get().push(P)}),E(f);for(var A=T(r.transforms,n),w=0;w<u;w++)v(a[w])?(E(y,w),_[h++]=A(w)):x&&h++;n._indexToPoints=_,r._length=h}}function E(L,C){for(var P=0;P<c.length;P++)L(S.nestedProperty(r,c[P]),C)}}},43102:function(Q,z,t){var S=t(71828),k=t(86281),l=t(74875),T=t(79344).p;function b(d,s){var e,i,r,n,a,o,u,p,c,x,g=s.transform,f=s.transformIndex,y=d.transforms[f].groups,v=T(d.transforms,g);if(!S.isArrayOrTypedArray(y)||y.length===0)return[d];var m=S.filterUnique(y),_=new Array(m.length),h=y.length,A=k.findArrayAttributes(d),w=g.styles||[],E={};for(e=0;e<w.length;e++)E[w[e].target]=w[e].value;g.styles&&(x=S.keyedContainer(g,"styles","target","value.name"));var L={},C={};for(e=0;e<m.length;e++){L[o=m[e]]=e,C[o]=0,(u=_[e]=S.extendDeepNoArrays({},d))._group=o,u.transforms[f]._indexToPoints={};var P=null;for(x&&(P=x.get(o)),u.name=P||P===""?P:S.templateString(g.nameformat,{trace:d.name,group:o}),p=u.transforms,u.transforms=[],i=0;i<p.length;i++)u.transforms[i]=S.extendDeepNoArrays({},p[i]);for(i=0;i<A.length;i++)S.nestedProperty(u,A[i]).set([])}for(r=0;r<A.length;r++){for(n=A[r],i=0,c=[];i<m.length;i++)c[i]=S.nestedProperty(_[i],n).get();for(a=S.nestedProperty(d,n).get(),i=0;i<h;i++)c[L[y[i]]].push(a[i])}for(i=0;i<h;i++)(u=_[L[y[i]]]).transforms[f]._indexToPoints[C[y[i]]]=v(i),C[y[i]]++;for(e=0;e<m.length;e++)o=m[e],u=_[e],l.clearExpandedTraceDefaultColors(u),u=S.extendDeepNoArrays(u,E[o]||{});return _}z.moduleType="transform",z.name="groupby",z.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},z.supplyDefaults=function(d,s,e){var i,r={};function n(c,x){return S.coerce(d,r,z.attributes,c,x)}if(!n("enabled"))return r;n("groups"),n("nameformat",e._dataLength>1?"%{group} (%{trace})":"%{group}");var a=d.styles,o=r.styles=[];if(a)for(i=0;i<a.length;i++){var u=o[i]={};S.coerce(a[i],o[i],z.attributes.styles,"target");var p=S.coerce(a[i],o[i],z.attributes.styles,"value");S.isPlainObject(p)?u.value=S.extendDeep({},p):p&&delete u.value}return r},z.transform=function(d,s){var e,i,r,n=[];for(i=0;i<d.length;i++)for(e=b(d[i],s),r=0;r<e.length;r++)n.push(e[r]);return n}},79344:function(Q,z){z.p=function(t,S){for(var k,l,T=0;T<t.length&&(k=t[T])!==S;T++)k._indexToPoints&&k.enabled!==!1&&(l=k._indexToPoints);var b=l?function(d){return l[d]}:function(d){return[d]};return b}},32275:function(Q,z,t){var S=t(71828),k=t(89298),l=t(79344).p,T=t(50606).BADNUM;z.moduleType="transform",z.name="sort",z.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},z.supplyDefaults=function(b){var d={};function s(e,i){return S.coerce(b,d,z.attributes,e,i)}return s("enabled")&&(s("target"),s("order")),d},z.calcTransform=function(b,d,s){if(s.enabled){var e=S.getTargetArray(d,s);if(e){var i=s.target,r=e.length;d._length&&(r=Math.min(r,d._length));var n,a,o=d._arrayAttrs,u=function(y,v,m,_){var h,A=new Array(_),w=new Array(_);for(h=0;h<_;h++)A[h]={v:v[h],i:h};for(A.sort(function(E,L){switch(E.order){case"ascending":return function(C,P){var D=L(C.v),G=L(P.v);return D===T?1:G===T?-1:D-G};case"descending":return function(C,P){var D=L(C.v),G=L(P.v);return D===T?1:G===T?-1:G-D}}}(y,m)),h=0;h<_;h++)w[h]=A[h].i;return w}(s,e,k.getDataToCoordFunc(b,d,i,e),r),p=l(d.transforms,s),c={};for(n=0;n<o.length;n++){var x=S.nestedProperty(d,o[n]),g=x.get(),f=new Array(r);for(a=0;a<r;a++)f[a]=g[u[a]];x.set(f)}for(a=0;a<r;a++)c[a]=p(u[a]);s._indexToPoints=c,d._length=r}}}},11506:function(Q,z){z.version="2.23.2"},9330:function(Q,z,t){var S,k=t(90386);S=function(){return function(){var l={7386:function(d,s,e){d.exports={alpha_shape:e(2350),convex_hull:e(5537),delaunay_triangulate:e(4419),gl_cone3d:e(1140),gl_error3d:e(3110),gl_heatmap2d:e(6386),gl_line3d:e(6086),gl_mesh3d:e(8116),gl_plot2d:e(2117),gl_plot3d:e(1059),gl_pointcloud2d:e(8271),gl_scatter3d:e(2182),gl_select_box:e(6623),gl_spikes2d:e(3050),gl_streamtube3d:e(7307),gl_surface3d:e(3754),ndarray:e(5050),ndarray_linear_interpolate:e(3581)}},2146:function(d,s,e){function i(he,ke){for(var _e=0;_e<ke.length;_e++){var Ce=ke[_e];Ce.enumerable=Ce.enumerable||!1,Ce.configurable=!0,"value"in Ce&&(Ce.writable=!0),Object.defineProperty(he,Ce.key,Ce)}}function r(he,ke){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_e,Ce){return _e.__proto__=Ce,_e},r(he,ke)}function n(he){if(he===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return he}function a(he){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ke){return ke.__proto__||Object.getPrototypeOf(ke)},a(he)}function o(he){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ke){return typeof ke}:function(ke){return ke&&typeof Symbol=="function"&&ke.constructor===Symbol&&ke!==Symbol.prototype?"symbol":typeof ke},o(he)}var u=e(3910),p=e(3187),c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.lW=f,s.h2=50;var x=2147483647;function g(he){if(he>x)throw new RangeError('The value "'+he+'" is invalid for option "size"');var ke=new Uint8Array(he);return Object.setPrototypeOf(ke,f.prototype),ke}function f(he,ke,_e){if(typeof he=="number"){if(typeof ke=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(he)}return y(he,ke,_e)}function y(he,ke,_e){if(typeof he=="string")return function(Re,He){if(typeof He=="string"&&He!==""||(He="utf8"),!f.isEncoding(He))throw new TypeError("Unknown encoding: "+He);var Ge=0|w(Re,He),$e=g(Ge),st=$e.write(Re,He);return st!==Ge&&($e=$e.slice(0,st)),$e}(he,ke);if(ArrayBuffer.isView(he))return function(Re){if(me(Re,Uint8Array)){var He=new Uint8Array(Re);return h(He.buffer,He.byteOffset,He.byteLength)}return _(Re)}(he);if(he==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+o(he));if(me(he,ArrayBuffer)||he&&me(he.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(me(he,SharedArrayBuffer)||he&&me(he.buffer,SharedArrayBuffer)))return h(he,ke,_e);if(typeof he=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Ce=he.valueOf&&he.valueOf();if(Ce!=null&&Ce!==he)return f.from(Ce,ke,_e);var Fe=function(Re){if(f.isBuffer(Re)){var He=0|A(Re.length),Ge=g(He);return Ge.length===0||Re.copy(Ge,0,0,He),Ge}return Re.length!==void 0?typeof Re.length!="number"||Ee(Re.length)?g(0):_(Re):Re.type==="Buffer"&&Array.isArray(Re.data)?_(Re.data):void 0}(he);if(Fe)return Fe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof he[Symbol.toPrimitive]=="function")return f.from(he[Symbol.toPrimitive]("string"),ke,_e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+o(he))}function v(he){if(typeof he!="number")throw new TypeError('"size" argument must be of type number');if(he<0)throw new RangeError('The value "'+he+'" is invalid for option "size"')}function m(he){return v(he),g(he<0?0:0|A(he))}function _(he){for(var ke=he.length<0?0:0|A(he.length),_e=g(ke),Ce=0;Ce<ke;Ce+=1)_e[Ce]=255&he[Ce];return _e}function h(he,ke,_e){if(ke<0||he.byteLength<ke)throw new RangeError('"offset" is outside of buffer bounds');if(he.byteLength<ke+(_e||0))throw new RangeError('"length" is outside of buffer bounds');var Ce;return Ce=ke===void 0&&_e===void 0?new Uint8Array(he):_e===void 0?new Uint8Array(he,ke):new Uint8Array(he,ke,_e),Object.setPrototypeOf(Ce,f.prototype),Ce}function A(he){if(he>=x)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+x.toString(16)+" bytes");return 0|he}function w(he,ke){if(f.isBuffer(he))return he.length;if(ArrayBuffer.isView(he)||me(he,ArrayBuffer))return he.byteLength;if(typeof he!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+o(he));var _e=he.length,Ce=arguments.length>2&&arguments[2]===!0;if(!Ce&&_e===0)return 0;for(var Fe=!1;;)switch(ke){case"ascii":case"latin1":case"binary":return _e;case"utf8":case"utf-8":return se(he).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*_e;case"hex":return _e>>>1;case"base64":return le(he).length;default:if(Fe)return Ce?-1:se(he).length;ke=(""+ke).toLowerCase(),Fe=!0}}function E(he,ke,_e){var Ce=!1;if((ke===void 0||ke<0)&&(ke=0),ke>this.length||((_e===void 0||_e>this.length)&&(_e=this.length),_e<=0)||(_e>>>=0)<=(ke>>>=0))return"";for(he||(he="utf8");;)switch(he){case"hex":return W(this,ke,_e);case"utf8":case"utf-8":return V(this,ke,_e);case"ascii":return te(this,ke,_e);case"latin1":case"binary":return $(this,ke,_e);case"base64":return F(this,ke,_e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,ke,_e);default:if(Ce)throw new TypeError("Unknown encoding: "+he);he=(he+"").toLowerCase(),Ce=!0}}function L(he,ke,_e){var Ce=he[ke];he[ke]=he[_e],he[_e]=Ce}function C(he,ke,_e,Ce,Fe){if(he.length===0)return-1;if(typeof _e=="string"?(Ce=_e,_e=0):_e>2147483647?_e=2147483647:_e<-2147483648&&(_e=-2147483648),Ee(_e=+_e)&&(_e=Fe?0:he.length-1),_e<0&&(_e=he.length+_e),_e>=he.length){if(Fe)return-1;_e=he.length-1}else if(_e<0){if(!Fe)return-1;_e=0}if(typeof ke=="string"&&(ke=f.from(ke,Ce)),f.isBuffer(ke))return ke.length===0?-1:P(he,ke,_e,Ce,Fe);if(typeof ke=="number")return ke&=255,typeof Uint8Array.prototype.indexOf=="function"?Fe?Uint8Array.prototype.indexOf.call(he,ke,_e):Uint8Array.prototype.lastIndexOf.call(he,ke,_e):P(he,[ke],_e,Ce,Fe);throw new TypeError("val must be string, number or Buffer")}function P(he,ke,_e,Ce,Fe){var Re,He=1,Ge=he.length,$e=ke.length;if(Ce!==void 0&&((Ce=String(Ce).toLowerCase())==="ucs2"||Ce==="ucs-2"||Ce==="utf16le"||Ce==="utf-16le")){if(he.length<2||ke.length<2)return-1;He=2,Ge/=2,$e/=2,_e/=2}function st(at,rt){return He===1?at[rt]:at.readUInt16BE(rt*He)}if(Fe){var Ke=-1;for(Re=_e;Re<Ge;Re++)if(st(he,Re)===st(ke,Ke===-1?0:Re-Ke)){if(Ke===-1&&(Ke=Re),Re-Ke+1===$e)return Ke*He}else Ke!==-1&&(Re-=Re-Ke),Ke=-1}else for(_e+$e>Ge&&(_e=Ge-$e),Re=_e;Re>=0;Re--){for(var gt=!0,mt=0;mt<$e;mt++)if(st(he,Re+mt)!==st(ke,mt)){gt=!1;break}if(gt)return Re}return-1}function D(he,ke,_e,Ce){_e=Number(_e)||0;var Fe=he.length-_e;Ce?(Ce=Number(Ce))>Fe&&(Ce=Fe):Ce=Fe;var Re,He=ke.length;for(Ce>He/2&&(Ce=He/2),Re=0;Re<Ce;++Re){var Ge=parseInt(ke.substr(2*Re,2),16);if(Ee(Ge))return Re;he[_e+Re]=Ge}return Re}function G(he,ke,_e,Ce){return ne(se(ke,he.length-_e),he,_e,Ce)}function I(he,ke,_e,Ce){return ne(function(Fe){for(var Re=[],He=0;He<Fe.length;++He)Re.push(255&Fe.charCodeAt(He));return Re}(ke),he,_e,Ce)}function H(he,ke,_e,Ce){return ne(le(ke),he,_e,Ce)}function N(he,ke,_e,Ce){return ne(function(Fe,Re){for(var He,Ge,$e,st=[],Ke=0;Ke<Fe.length&&!((Re-=2)<0);++Ke)Ge=(He=Fe.charCodeAt(Ke))>>8,$e=He%256,st.push($e),st.push(Ge);return st}(ke,he.length-_e),he,_e,Ce)}function F(he,ke,_e){return ke===0&&_e===he.length?u.fromByteArray(he):u.fromByteArray(he.slice(ke,_e))}function V(he,ke,_e){_e=Math.min(he.length,_e);for(var Ce=[],Fe=ke;Fe<_e;){var Re=he[Fe],He=null,Ge=Re>239?4:Re>223?3:Re>191?2:1;if(Fe+Ge<=_e){var $e=void 0,st=void 0,Ke=void 0,gt=void 0;switch(Ge){case 1:Re<128&&(He=Re);break;case 2:(192&($e=he[Fe+1]))==128&&(gt=(31&Re)<<6|63&$e)>127&&(He=gt);break;case 3:$e=he[Fe+1],st=he[Fe+2],(192&$e)==128&&(192&st)==128&&(gt=(15&Re)<<12|(63&$e)<<6|63&st)>2047&&(gt<55296||gt>57343)&&(He=gt);break;case 4:$e=he[Fe+1],st=he[Fe+2],Ke=he[Fe+3],(192&$e)==128&&(192&st)==128&&(192&Ke)==128&&(gt=(15&Re)<<18|(63&$e)<<12|(63&st)<<6|63&Ke)>65535&&gt<1114112&&(He=gt)}}He===null?(He=65533,Ge=1):He>65535&&(He-=65536,Ce.push(He>>>10&1023|55296),He=56320|1023&He),Ce.push(He),Fe+=Ge}return function(mt){var at=mt.length;if(at<=q)return String.fromCharCode.apply(String,mt);for(var rt="",xt=0;xt<at;)rt+=String.fromCharCode.apply(String,mt.slice(xt,xt+=q));return rt}(Ce)}f.TYPED_ARRAY_SUPPORT=function(){try{var he=new Uint8Array(1),ke={foo:function(){return 42}};return Object.setPrototypeOf(ke,Uint8Array.prototype),Object.setPrototypeOf(he,ke),he.foo()===42}catch{return!1}}(),f.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),f.poolSize=8192,f.from=function(he,ke,_e){return y(he,ke,_e)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),f.alloc=function(he,ke,_e){return function(Ce,Fe,Re){return v(Ce),Ce<=0?g(Ce):Fe!==void 0?typeof Re=="string"?g(Ce).fill(Fe,Re):g(Ce).fill(Fe):g(Ce)}(he,ke,_e)},f.allocUnsafe=function(he){return m(he)},f.allocUnsafeSlow=function(he){return m(he)},f.isBuffer=function(he){return he!=null&&he._isBuffer===!0&&he!==f.prototype},f.compare=function(he,ke){if(me(he,Uint8Array)&&(he=f.from(he,he.offset,he.byteLength)),me(ke,Uint8Array)&&(ke=f.from(ke,ke.offset,ke.byteLength)),!f.isBuffer(he)||!f.isBuffer(ke))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(he===ke)return 0;for(var _e=he.length,Ce=ke.length,Fe=0,Re=Math.min(_e,Ce);Fe<Re;++Fe)if(he[Fe]!==ke[Fe]){_e=he[Fe],Ce=ke[Fe];break}return _e<Ce?-1:Ce<_e?1:0},f.isEncoding=function(he){switch(String(he).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(he,ke){if(!Array.isArray(he))throw new TypeError('"list" argument must be an Array of Buffers');if(he.length===0)return f.alloc(0);var _e;if(ke===void 0)for(ke=0,_e=0;_e<he.length;++_e)ke+=he[_e].length;var Ce=f.allocUnsafe(ke),Fe=0;for(_e=0;_e<he.length;++_e){var Re=he[_e];if(me(Re,Uint8Array))Fe+Re.length>Ce.length?(f.isBuffer(Re)||(Re=f.from(Re)),Re.copy(Ce,Fe)):Uint8Array.prototype.set.call(Ce,Re,Fe);else{if(!f.isBuffer(Re))throw new TypeError('"list" argument must be an Array of Buffers');Re.copy(Ce,Fe)}Fe+=Re.length}return Ce},f.byteLength=w,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var he=this.length;if(he%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ke=0;ke<he;ke+=2)L(this,ke,ke+1);return this},f.prototype.swap32=function(){var he=this.length;if(he%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ke=0;ke<he;ke+=4)L(this,ke,ke+3),L(this,ke+1,ke+2);return this},f.prototype.swap64=function(){var he=this.length;if(he%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ke=0;ke<he;ke+=8)L(this,ke,ke+7),L(this,ke+1,ke+6),L(this,ke+2,ke+5),L(this,ke+3,ke+4);return this},f.prototype.toString=function(){var he=this.length;return he===0?"":arguments.length===0?V(this,0,he):E.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(he){if(!f.isBuffer(he))throw new TypeError("Argument must be a Buffer");return this===he||f.compare(this,he)===0},f.prototype.inspect=function(){var he="",ke=s.h2;return he=this.toString("hex",0,ke).replace(/(.{2})/g,"$1 ").trim(),this.length>ke&&(he+=" ... "),"<Buffer "+he+">"},c&&(f.prototype[c]=f.prototype.inspect),f.prototype.compare=function(he,ke,_e,Ce,Fe){if(me(he,Uint8Array)&&(he=f.from(he,he.offset,he.byteLength)),!f.isBuffer(he))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+o(he));if(ke===void 0&&(ke=0),_e===void 0&&(_e=he?he.length:0),Ce===void 0&&(Ce=0),Fe===void 0&&(Fe=this.length),ke<0||_e>he.length||Ce<0||Fe>this.length)throw new RangeError("out of range index");if(Ce>=Fe&&ke>=_e)return 0;if(Ce>=Fe)return-1;if(ke>=_e)return 1;if(this===he)return 0;for(var Re=(Fe>>>=0)-(Ce>>>=0),He=(_e>>>=0)-(ke>>>=0),Ge=Math.min(Re,He),$e=this.slice(Ce,Fe),st=he.slice(ke,_e),Ke=0;Ke<Ge;++Ke)if($e[Ke]!==st[Ke]){Re=$e[Ke],He=st[Ke];break}return Re<He?-1:He<Re?1:0},f.prototype.includes=function(he,ke,_e){return this.indexOf(he,ke,_e)!==-1},f.prototype.indexOf=function(he,ke,_e){return C(this,he,ke,_e,!0)},f.prototype.lastIndexOf=function(he,ke,_e){return C(this,he,ke,_e,!1)},f.prototype.write=function(he,ke,_e,Ce){if(ke===void 0)Ce="utf8",_e=this.length,ke=0;else if(_e===void 0&&typeof ke=="string")Ce=ke,_e=this.length,ke=0;else{if(!isFinite(ke))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ke>>>=0,isFinite(_e)?(_e>>>=0,Ce===void 0&&(Ce="utf8")):(Ce=_e,_e=void 0)}var Fe=this.length-ke;if((_e===void 0||_e>Fe)&&(_e=Fe),he.length>0&&(_e<0||ke<0)||ke>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ce||(Ce="utf8");for(var Re=!1;;)switch(Ce){case"hex":return D(this,he,ke,_e);case"utf8":case"utf-8":return G(this,he,ke,_e);case"ascii":case"latin1":case"binary":return I(this,he,ke,_e);case"base64":return H(this,he,ke,_e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,he,ke,_e);default:if(Re)throw new TypeError("Unknown encoding: "+Ce);Ce=(""+Ce).toLowerCase(),Re=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var q=4096;function te(he,ke,_e){var Ce="";_e=Math.min(he.length,_e);for(var Fe=ke;Fe<_e;++Fe)Ce+=String.fromCharCode(127&he[Fe]);return Ce}function $(he,ke,_e){var Ce="";_e=Math.min(he.length,_e);for(var Fe=ke;Fe<_e;++Fe)Ce+=String.fromCharCode(he[Fe]);return Ce}function W(he,ke,_e){var Ce=he.length;(!ke||ke<0)&&(ke=0),(!_e||_e<0||_e>Ce)&&(_e=Ce);for(var Fe="",Re=ke;Re<_e;++Re)Fe+=be[he[Re]];return Fe}function Z(he,ke,_e){for(var Ce=he.slice(ke,_e),Fe="",Re=0;Re<Ce.length-1;Re+=2)Fe+=String.fromCharCode(Ce[Re]+256*Ce[Re+1]);return Fe}function J(he,ke,_e){if(he%1!=0||he<0)throw new RangeError("offset is not uint");if(he+ke>_e)throw new RangeError("Trying to access beyond buffer length")}function ee(he,ke,_e,Ce,Fe,Re){if(!f.isBuffer(he))throw new TypeError('"buffer" argument must be a Buffer instance');if(ke>Fe||ke<Re)throw new RangeError('"value" argument is out of bounds');if(_e+Ce>he.length)throw new RangeError("Index out of range")}function re(he,ke,_e,Ce,Fe){ge(ke,Ce,Fe,he,_e,7);var Re=Number(ke&BigInt(4294967295));he[_e++]=Re,Re>>=8,he[_e++]=Re,Re>>=8,he[_e++]=Re,Re>>=8,he[_e++]=Re;var He=Number(ke>>BigInt(32)&BigInt(4294967295));return he[_e++]=He,He>>=8,he[_e++]=He,He>>=8,he[_e++]=He,He>>=8,he[_e++]=He,_e}function ae(he,ke,_e,Ce,Fe){ge(ke,Ce,Fe,he,_e,7);var Re=Number(ke&BigInt(4294967295));he[_e+7]=Re,Re>>=8,he[_e+6]=Re,Re>>=8,he[_e+5]=Re,Re>>=8,he[_e+4]=Re;var He=Number(ke>>BigInt(32)&BigInt(4294967295));return he[_e+3]=He,He>>=8,he[_e+2]=He,He>>=8,he[_e+1]=He,He>>=8,he[_e]=He,_e+8}function oe(he,ke,_e,Ce,Fe,Re){if(_e+Ce>he.length)throw new RangeError("Index out of range");if(_e<0)throw new RangeError("Index out of range")}function ce(he,ke,_e,Ce,Fe){return ke=+ke,_e>>>=0,Fe||oe(he,0,_e,4),p.write(he,ke,_e,Ce,23,4),_e+4}function pe(he,ke,_e,Ce,Fe){return ke=+ke,_e>>>=0,Fe||oe(he,0,_e,8),p.write(he,ke,_e,Ce,52,8),_e+8}f.prototype.slice=function(he,ke){var _e=this.length;(he=~~he)<0?(he+=_e)<0&&(he=0):he>_e&&(he=_e),(ke=ke===void 0?_e:~~ke)<0?(ke+=_e)<0&&(ke=0):ke>_e&&(ke=_e),ke<he&&(ke=he);var Ce=this.subarray(he,ke);return Object.setPrototypeOf(Ce,f.prototype),Ce},f.prototype.readUintLE=f.prototype.readUIntLE=function(he,ke,_e){he>>>=0,ke>>>=0,_e||J(he,ke,this.length);for(var Ce=this[he],Fe=1,Re=0;++Re<ke&&(Fe*=256);)Ce+=this[he+Re]*Fe;return Ce},f.prototype.readUintBE=f.prototype.readUIntBE=function(he,ke,_e){he>>>=0,ke>>>=0,_e||J(he,ke,this.length);for(var Ce=this[he+--ke],Fe=1;ke>0&&(Fe*=256);)Ce+=this[he+--ke]*Fe;return Ce},f.prototype.readUint8=f.prototype.readUInt8=function(he,ke){return he>>>=0,ke||J(he,1,this.length),this[he]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(he,ke){return he>>>=0,ke||J(he,2,this.length),this[he]|this[he+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(he,ke){return he>>>=0,ke||J(he,2,this.length),this[he]<<8|this[he+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(he,ke){return he>>>=0,ke||J(he,4,this.length),(this[he]|this[he+1]<<8|this[he+2]<<16)+16777216*this[he+3]},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(he,ke){return he>>>=0,ke||J(he,4,this.length),16777216*this[he]+(this[he+1]<<16|this[he+2]<<8|this[he+3])},f.prototype.readBigUInt64LE=De(function(he){Oe(he>>>=0,"offset");var ke=this[he],_e=this[he+7];ke!==void 0&&_e!==void 0||Ae(he,this.length-8);var Ce=ke+this[++he]*Math.pow(2,8)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,24),Fe=this[++he]+this[++he]*Math.pow(2,8)+this[++he]*Math.pow(2,16)+_e*Math.pow(2,24);return BigInt(Ce)+(BigInt(Fe)<<BigInt(32))}),f.prototype.readBigUInt64BE=De(function(he){Oe(he>>>=0,"offset");var ke=this[he],_e=this[he+7];ke!==void 0&&_e!==void 0||Ae(he,this.length-8);var Ce=ke*Math.pow(2,24)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,8)+this[++he],Fe=this[++he]*Math.pow(2,24)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,8)+_e;return(BigInt(Ce)<<BigInt(32))+BigInt(Fe)}),f.prototype.readIntLE=function(he,ke,_e){he>>>=0,ke>>>=0,_e||J(he,ke,this.length);for(var Ce=this[he],Fe=1,Re=0;++Re<ke&&(Fe*=256);)Ce+=this[he+Re]*Fe;return Ce>=(Fe*=128)&&(Ce-=Math.pow(2,8*ke)),Ce},f.prototype.readIntBE=function(he,ke,_e){he>>>=0,ke>>>=0,_e||J(he,ke,this.length);for(var Ce=ke,Fe=1,Re=this[he+--Ce];Ce>0&&(Fe*=256);)Re+=this[he+--Ce]*Fe;return Re>=(Fe*=128)&&(Re-=Math.pow(2,8*ke)),Re},f.prototype.readInt8=function(he,ke){return he>>>=0,ke||J(he,1,this.length),128&this[he]?-1*(255-this[he]+1):this[he]},f.prototype.readInt16LE=function(he,ke){he>>>=0,ke||J(he,2,this.length);var _e=this[he]|this[he+1]<<8;return 32768&_e?4294901760|_e:_e},f.prototype.readInt16BE=function(he,ke){he>>>=0,ke||J(he,2,this.length);var _e=this[he+1]|this[he]<<8;return 32768&_e?4294901760|_e:_e},f.prototype.readInt32LE=function(he,ke){return he>>>=0,ke||J(he,4,this.length),this[he]|this[he+1]<<8|this[he+2]<<16|this[he+3]<<24},f.prototype.readInt32BE=function(he,ke){return he>>>=0,ke||J(he,4,this.length),this[he]<<24|this[he+1]<<16|this[he+2]<<8|this[he+3]},f.prototype.readBigInt64LE=De(function(he){Oe(he>>>=0,"offset");var ke=this[he],_e=this[he+7];ke!==void 0&&_e!==void 0||Ae(he,this.length-8);var Ce=this[he+4]+this[he+5]*Math.pow(2,8)+this[he+6]*Math.pow(2,16)+(_e<<24);return(BigInt(Ce)<<BigInt(32))+BigInt(ke+this[++he]*Math.pow(2,8)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,24))}),f.prototype.readBigInt64BE=De(function(he){Oe(he>>>=0,"offset");var ke=this[he],_e=this[he+7];ke!==void 0&&_e!==void 0||Ae(he,this.length-8);var Ce=(ke<<24)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,8)+this[++he];return(BigInt(Ce)<<BigInt(32))+BigInt(this[++he]*Math.pow(2,24)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,8)+_e)}),f.prototype.readFloatLE=function(he,ke){return he>>>=0,ke||J(he,4,this.length),p.read(this,he,!0,23,4)},f.prototype.readFloatBE=function(he,ke){return he>>>=0,ke||J(he,4,this.length),p.read(this,he,!1,23,4)},f.prototype.readDoubleLE=function(he,ke){return he>>>=0,ke||J(he,8,this.length),p.read(this,he,!0,52,8)},f.prototype.readDoubleBE=function(he,ke){return he>>>=0,ke||J(he,8,this.length),p.read(this,he,!1,52,8)},f.prototype.writeUintLE=f.prototype.writeUIntLE=function(he,ke,_e,Ce){he=+he,ke>>>=0,_e>>>=0,Ce||ee(this,he,ke,_e,Math.pow(2,8*_e)-1,0);var Fe=1,Re=0;for(this[ke]=255&he;++Re<_e&&(Fe*=256);)this[ke+Re]=he/Fe&255;return ke+_e},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(he,ke,_e,Ce){he=+he,ke>>>=0,_e>>>=0,Ce||ee(this,he,ke,_e,Math.pow(2,8*_e)-1,0);var Fe=_e-1,Re=1;for(this[ke+Fe]=255&he;--Fe>=0&&(Re*=256);)this[ke+Fe]=he/Re&255;return ke+_e},f.prototype.writeUint8=f.prototype.writeUInt8=function(he,ke,_e){return he=+he,ke>>>=0,_e||ee(this,he,ke,1,255,0),this[ke]=255&he,ke+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(he,ke,_e){return he=+he,ke>>>=0,_e||ee(this,he,ke,2,65535,0),this[ke]=255&he,this[ke+1]=he>>>8,ke+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(he,ke,_e){return he=+he,ke>>>=0,_e||ee(this,he,ke,2,65535,0),this[ke]=he>>>8,this[ke+1]=255&he,ke+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(he,ke,_e){return he=+he,ke>>>=0,_e||ee(this,he,ke,4,4294967295,0),this[ke+3]=he>>>24,this[ke+2]=he>>>16,this[ke+1]=he>>>8,this[ke]=255&he,ke+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(he,ke,_e){return he=+he,ke>>>=0,_e||ee(this,he,ke,4,4294967295,0),this[ke]=he>>>24,this[ke+1]=he>>>16,this[ke+2]=he>>>8,this[ke+3]=255&he,ke+4},f.prototype.writeBigUInt64LE=De(function(he){return re(this,he,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=De(function(he){return ae(this,he,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(he,ke,_e,Ce){if(he=+he,ke>>>=0,!Ce){var Fe=Math.pow(2,8*_e-1);ee(this,he,ke,_e,Fe-1,-Fe)}var Re=0,He=1,Ge=0;for(this[ke]=255&he;++Re<_e&&(He*=256);)he<0&&Ge===0&&this[ke+Re-1]!==0&&(Ge=1),this[ke+Re]=(he/He>>0)-Ge&255;return ke+_e},f.prototype.writeIntBE=function(he,ke,_e,Ce){if(he=+he,ke>>>=0,!Ce){var Fe=Math.pow(2,8*_e-1);ee(this,he,ke,_e,Fe-1,-Fe)}var Re=_e-1,He=1,Ge=0;for(this[ke+Re]=255&he;--Re>=0&&(He*=256);)he<0&&Ge===0&&this[ke+Re+1]!==0&&(Ge=1),this[ke+Re]=(he/He>>0)-Ge&255;return ke+_e},f.prototype.writeInt8=function(he,ke,_e){return he=+he,ke>>>=0,_e||ee(this,he,ke,1,127,-128),he<0&&(he=255+he+1),this[ke]=255&he,ke+1},f.prototype.writeInt16LE=function(he,ke,_e){return he=+he,ke>>>=0,_e||ee(this,he,ke,2,32767,-32768),this[ke]=255&he,this[ke+1]=he>>>8,ke+2},f.prototype.writeInt16BE=function(he,ke,_e){return he=+he,ke>>>=0,_e||ee(this,he,ke,2,32767,-32768),this[ke]=he>>>8,this[ke+1]=255&he,ke+2},f.prototype.writeInt32LE=function(he,ke,_e){return he=+he,ke>>>=0,_e||ee(this,he,ke,4,2147483647,-2147483648),this[ke]=255&he,this[ke+1]=he>>>8,this[ke+2]=he>>>16,this[ke+3]=he>>>24,ke+4},f.prototype.writeInt32BE=function(he,ke,_e){return he=+he,ke>>>=0,_e||ee(this,he,ke,4,2147483647,-2147483648),he<0&&(he=4294967295+he+1),this[ke]=he>>>24,this[ke+1]=he>>>16,this[ke+2]=he>>>8,this[ke+3]=255&he,ke+4},f.prototype.writeBigInt64LE=De(function(he){return re(this,he,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=De(function(he){return ae(this,he,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeFloatLE=function(he,ke,_e){return ce(this,he,ke,!0,_e)},f.prototype.writeFloatBE=function(he,ke,_e){return ce(this,he,ke,!1,_e)},f.prototype.writeDoubleLE=function(he,ke,_e){return pe(this,he,ke,!0,_e)},f.prototype.writeDoubleBE=function(he,ke,_e){return pe(this,he,ke,!1,_e)},f.prototype.copy=function(he,ke,_e,Ce){if(!f.isBuffer(he))throw new TypeError("argument should be a Buffer");if(_e||(_e=0),Ce||Ce===0||(Ce=this.length),ke>=he.length&&(ke=he.length),ke||(ke=0),Ce>0&&Ce<_e&&(Ce=_e),Ce===_e||he.length===0||this.length===0)return 0;if(ke<0)throw new RangeError("targetStart out of bounds");if(_e<0||_e>=this.length)throw new RangeError("Index out of range");if(Ce<0)throw new RangeError("sourceEnd out of bounds");Ce>this.length&&(Ce=this.length),he.length-ke<Ce-_e&&(Ce=he.length-ke+_e);var Fe=Ce-_e;return this===he&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ke,_e,Ce):Uint8Array.prototype.set.call(he,this.subarray(_e,Ce),ke),Fe},f.prototype.fill=function(he,ke,_e,Ce){if(typeof he=="string"){if(typeof ke=="string"?(Ce=ke,ke=0,_e=this.length):typeof _e=="string"&&(Ce=_e,_e=this.length),Ce!==void 0&&typeof Ce!="string")throw new TypeError("encoding must be a string");if(typeof Ce=="string"&&!f.isEncoding(Ce))throw new TypeError("Unknown encoding: "+Ce);if(he.length===1){var Fe=he.charCodeAt(0);(Ce==="utf8"&&Fe<128||Ce==="latin1")&&(he=Fe)}}else typeof he=="number"?he&=255:typeof he=="boolean"&&(he=Number(he));if(ke<0||this.length<ke||this.length<_e)throw new RangeError("Out of range index");if(_e<=ke)return this;var Re;if(ke>>>=0,_e=_e===void 0?this.length:_e>>>0,he||(he=0),typeof he=="number")for(Re=ke;Re<_e;++Re)this[Re]=he;else{var He=f.isBuffer(he)?he:f.from(he,Ce),Ge=He.length;if(Ge===0)throw new TypeError('The value "'+he+'" is invalid for argument "value"');for(Re=0;Re<_e-ke;++Re)this[Re+ke]=He[Re%Ge]}return this};var ve={};function we(he,ke,_e){ve[he]=function(Ce){(function(Ke,gt){if(typeof gt!="function"&&gt!==null)throw new TypeError("Super expression must either be null or a function");Ke.prototype=Object.create(gt&&gt.prototype,{constructor:{value:Ke,writable:!0,configurable:!0}}),Object.defineProperty(Ke,"prototype",{writable:!1}),gt&&r(Ke,gt)})(st,Ce);var Fe,Re,He,Ge,$e=(He=st,Ge=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ke,gt=a(He);if(Ge){var mt=a(this).constructor;Ke=Reflect.construct(gt,arguments,mt)}else Ke=gt.apply(this,arguments);return function(at,rt){if(rt&&(o(rt)==="object"||typeof rt=="function"))return rt;if(rt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n(at)}(this,Ke)});function st(){var Ke;return function(gt,mt){if(!(gt instanceof mt))throw new TypeError("Cannot call a class as a function")}(this,st),Ke=$e.call(this),Object.defineProperty(n(Ke),"message",{value:ke.apply(n(Ke),arguments),writable:!0,configurable:!0}),Ke.name="".concat(Ke.name," [").concat(he,"]"),Ke.stack,delete Ke.name,Ke}return Fe=st,(Re=[{key:"code",get:function(){return he},set:function(Ke){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ke,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(he,"]: ").concat(this.message)}}])&&i(Fe.prototype,Re),Object.defineProperty(Fe,"prototype",{writable:!1}),st}(_e)}function xe(he){for(var ke="",_e=he.length,Ce=he[0]==="-"?1:0;_e>=Ce+4;_e-=3)ke="_".concat(he.slice(_e-3,_e)).concat(ke);return"".concat(he.slice(0,_e)).concat(ke)}function ge(he,ke,_e,Ce,Fe,Re){if(he>_e||he<ke){var He,Ge=typeof ke=="bigint"?"n":"";throw He=Re>3?ke===0||ke===BigInt(0)?">= 0".concat(Ge," and < 2").concat(Ge," ** ").concat(8*(Re+1)).concat(Ge):">= -(2".concat(Ge," ** ").concat(8*(Re+1)-1).concat(Ge,") and < 2 ** ")+"".concat(8*(Re+1)-1).concat(Ge):">= ".concat(ke).concat(Ge," and <= ").concat(_e).concat(Ge),new ve.ERR_OUT_OF_RANGE("value",He,he)}(function($e,st,Ke){Oe(st,"offset"),$e[st]!==void 0&&$e[st+Ke]!==void 0||Ae(st,$e.length-(Ke+1))})(Ce,Fe,Re)}function Oe(he,ke){if(typeof he!="number")throw new ve.ERR_INVALID_ARG_TYPE(ke,"number",he)}function Ae(he,ke,_e){throw Math.floor(he)!==he?(Oe(he,_e),new ve.ERR_OUT_OF_RANGE(_e||"offset","an integer",he)):ke<0?new ve.ERR_BUFFER_OUT_OF_BOUNDS:new ve.ERR_OUT_OF_RANGE(_e||"offset",">= ".concat(_e?1:0," and <= ").concat(ke),he)}we("ERR_BUFFER_OUT_OF_BOUNDS",function(he){return he?"".concat(he," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),we("ERR_INVALID_ARG_TYPE",function(he,ke){return'The "'.concat(he,'" argument must be of type number. Received type ').concat(o(ke))},TypeError),we("ERR_OUT_OF_RANGE",function(he,ke,_e){var Ce='The value of "'.concat(he,'" is out of range.'),Fe=_e;return Number.isInteger(_e)&&Math.abs(_e)>Math.pow(2,32)?Fe=xe(String(_e)):typeof _e=="bigint"&&(Fe=String(_e),(_e>Math.pow(BigInt(2),BigInt(32))||_e<-Math.pow(BigInt(2),BigInt(32)))&&(Fe=xe(Fe)),Fe+="n"),Ce+" It must be ".concat(ke,". Received ").concat(Fe)},RangeError);var Te=/[^+/0-9A-Za-z-_]/g;function se(he,ke){var _e;ke=ke||1/0;for(var Ce=he.length,Fe=null,Re=[],He=0;He<Ce;++He){if((_e=he.charCodeAt(He))>55295&&_e<57344){if(!Fe){if(_e>56319){(ke-=3)>-1&&Re.push(239,191,189);continue}if(He+1===Ce){(ke-=3)>-1&&Re.push(239,191,189);continue}Fe=_e;continue}if(_e<56320){(ke-=3)>-1&&Re.push(239,191,189),Fe=_e;continue}_e=65536+(Fe-55296<<10|_e-56320)}else Fe&&(ke-=3)>-1&&Re.push(239,191,189);if(Fe=null,_e<128){if((ke-=1)<0)break;Re.push(_e)}else if(_e<2048){if((ke-=2)<0)break;Re.push(_e>>6|192,63&_e|128)}else if(_e<65536){if((ke-=3)<0)break;Re.push(_e>>12|224,_e>>6&63|128,63&_e|128)}else{if(!(_e<1114112))throw new Error("Invalid code point");if((ke-=4)<0)break;Re.push(_e>>18|240,_e>>12&63|128,_e>>6&63|128,63&_e|128)}}return Re}function le(he){return u.toByteArray(function(ke){if((ke=(ke=ke.split("=")[0]).trim().replace(Te,"")).length<2)return"";for(;ke.length%4!=0;)ke+="=";return ke}(he))}function ne(he,ke,_e,Ce){var Fe;for(Fe=0;Fe<Ce&&!(Fe+_e>=ke.length||Fe>=he.length);++Fe)ke[Fe+_e]=he[Fe];return Fe}function me(he,ke){return he instanceof ke||he!=null&&he.constructor!=null&&he.constructor.name!=null&&he.constructor.name===ke.name}function Ee(he){return he!=he}var be=function(){for(var he="0123456789abcdef",ke=new Array(256),_e=0;_e<16;++_e)for(var Ce=16*_e,Fe=0;Fe<16;++Fe)ke[Ce+Fe]=he[_e]+he[Fe];return ke}();function De(he){return typeof BigInt>"u"?Ue:he}function Ue(){throw new Error("BigInt not supported")}},2321:function(d){d.exports=r,d.exports.isMobile=r,d.exports.default=r;var s=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,i=/android|ipad|playbook|silk/i;function r(n){n||(n={});var a=n.ua;if(a||typeof navigator>"u"||(a=navigator.userAgent),a&&a.headers&&typeof a.headers["user-agent"]=="string"&&(a=a.headers["user-agent"]),typeof a!="string")return!1;var o=s.test(a)&&!e.test(a)||!!n.tablet&&i.test(a);return!o&&n.tablet&&n.featureDetect&&navigator&&navigator.maxTouchPoints>1&&a.indexOf("Macintosh")!==-1&&a.indexOf("Safari")!==-1&&(o=!0),o}},3910:function(d,s){s.byteLength=function(p){var c=o(p),x=c[0],g=c[1];return 3*(x+g)/4-g},s.toByteArray=function(p){var c,x,g=o(p),f=g[0],y=g[1],v=new r(function(h,A,w){return 3*(A+w)/4-w}(0,f,y)),m=0,_=y>0?f-4:f;for(x=0;x<_;x+=4)c=i[p.charCodeAt(x)]<<18|i[p.charCodeAt(x+1)]<<12|i[p.charCodeAt(x+2)]<<6|i[p.charCodeAt(x+3)],v[m++]=c>>16&255,v[m++]=c>>8&255,v[m++]=255&c;return y===2&&(c=i[p.charCodeAt(x)]<<2|i[p.charCodeAt(x+1)]>>4,v[m++]=255&c),y===1&&(c=i[p.charCodeAt(x)]<<10|i[p.charCodeAt(x+1)]<<4|i[p.charCodeAt(x+2)]>>2,v[m++]=c>>8&255,v[m++]=255&c),v},s.fromByteArray=function(p){for(var c,x=p.length,g=x%3,f=[],y=16383,v=0,m=x-g;v<m;v+=y)f.push(u(p,v,v+y>m?m:v+y));return g===1?(c=p[x-1],f.push(e[c>>2]+e[c<<4&63]+"==")):g===2&&(c=(p[x-2]<<8)+p[x-1],f.push(e[c>>10]+e[c>>4&63]+e[c<<2&63]+"=")),f.join("")};for(var e=[],i=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)e[a]=n[a],i[n.charCodeAt(a)]=a;function o(p){var c=p.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=p.indexOf("=");return x===-1&&(x=c),[x,x===c?0:4-x%4]}function u(p,c,x){for(var g,f,y=[],v=c;v<x;v+=3)g=(p[v]<<16&16711680)+(p[v+1]<<8&65280)+(255&p[v+2]),y.push(e[(f=g)>>18&63]+e[f>>12&63]+e[f>>6&63]+e[63&f]);return y.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},3187:function(d,s){s.read=function(e,i,r,n,a){var o,u,p=8*a-n-1,c=(1<<p)-1,x=c>>1,g=-7,f=r?a-1:0,y=r?-1:1,v=e[i+f];for(f+=y,o=v&(1<<-g)-1,v>>=-g,g+=p;g>0;o=256*o+e[i+f],f+=y,g-=8);for(u=o&(1<<-g)-1,o>>=-g,g+=n;g>0;u=256*u+e[i+f],f+=y,g-=8);if(o===0)o=1-x;else{if(o===c)return u?NaN:1/0*(v?-1:1);u+=Math.pow(2,n),o-=x}return(v?-1:1)*u*Math.pow(2,o-n)},s.write=function(e,i,r,n,a,o){var u,p,c,x=8*o-a-1,g=(1<<x)-1,f=g>>1,y=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=n?0:o-1,m=n?1:-1,_=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(p=isNaN(i)?1:0,u=g):(u=Math.floor(Math.log(i)/Math.LN2),i*(c=Math.pow(2,-u))<1&&(u--,c*=2),(i+=u+f>=1?y/c:y*Math.pow(2,1-f))*c>=2&&(u++,c/=2),u+f>=g?(p=0,u=g):u+f>=1?(p=(i*c-1)*Math.pow(2,a),u+=f):(p=i*Math.pow(2,f-1)*Math.pow(2,a),u=0));a>=8;e[r+v]=255&p,v+=m,p/=256,a-=8);for(u=u<<a|p,x+=a;x>0;e[r+v]=255&u,v+=m,u/=256,x-=8);e[r+v-m]|=128*_}},1152:function(d,s,e){d.exports=function(u){var p=(u=u||{}).eye||[0,0,1],c=u.center||[0,0,0],x=u.up||[0,1,0],g=u.distanceLimits||[0,1/0],f=u.mode||"turntable",y=i(),v=r(),m=n();return y.setDistanceLimits(g[0],g[1]),y.lookAt(0,p,c,x),v.setDistanceLimits(g[0],g[1]),v.lookAt(0,p,c,x),m.setDistanceLimits(g[0],g[1]),m.lookAt(0,p,c,x),new a({turntable:y,orbit:v,matrix:m},f)};var i=e(3440),r=e(7774),n=e(9298);function a(u,p){this._controllerNames=Object.keys(u),this._controllerList=this._controllerNames.map(function(c){return u[c]}),this._mode=p,this._active=u[p],this._active||(this._mode="turntable",this._active=u.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var o=a.prototype;o.flush=function(u){for(var p=this._controllerList,c=0;c<p.length;++c)p[c].flush(u)},o.idle=function(u){for(var p=this._controllerList,c=0;c<p.length;++c)p[c].idle(u)},o.lookAt=function(u,p,c,x){for(var g=this._controllerList,f=0;f<g.length;++f)g[f].lookAt(u,p,c,x)},o.rotate=function(u,p,c,x){for(var g=this._controllerList,f=0;f<g.length;++f)g[f].rotate(u,p,c,x)},o.pan=function(u,p,c,x){for(var g=this._controllerList,f=0;f<g.length;++f)g[f].pan(u,p,c,x)},o.translate=function(u,p,c,x){for(var g=this._controllerList,f=0;f<g.length;++f)g[f].translate(u,p,c,x)},o.setMatrix=function(u,p){for(var c=this._controllerList,x=0;x<c.length;++x)c[x].setMatrix(u,p)},o.setDistanceLimits=function(u,p){for(var c=this._controllerList,x=0;x<c.length;++x)c[x].setDistanceLimits(u,p)},o.setDistance=function(u,p){for(var c=this._controllerList,x=0;x<c.length;++x)c[x].setDistance(u,p)},o.recalcMatrix=function(u){this._active.recalcMatrix(u)},o.getDistance=function(u){return this._active.getDistance(u)},o.getDistanceLimits=function(u){return this._active.getDistanceLimits(u)},o.lastT=function(){return this._active.lastT()},o.setMode=function(u){if(u!==this._mode){var p=this._controllerNames.indexOf(u);if(!(p<0)){var c=this._active,x=this._controllerList[p],g=Math.max(c.lastT(),x.lastT());c.recalcMatrix(g),x.setMatrix(g,c.computedMatrix),this._active=x,this._mode=u,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},o.getMode=function(){return this._mode}},8126:function(d,s,e){var i=typeof WeakMap>"u"?e(5346):WeakMap,r=e(5827),n=e(2944),a=new i;d.exports=function(o){var u=a.get(o),p=u&&(u._triangleBuffer.handle||u._triangleBuffer.buffer);if(!p||!o.isBuffer(p)){var c=r(o,new Float32Array([-1,-1,-1,4,4,-1]));(u=n(o,[{buffer:c,type:o.FLOAT,size:2}]))._triangleBuffer=c,a.set(o,u)}u.bind(),o.drawArrays(o.TRIANGLES,0,3),u.unbind()}},8008:function(d,s,e){var i=e(4930);d.exports=function(r,n,a){n=typeof n=="number"?n:1,a=a||": ";var o=r.split(/\r?\n/),u=String(o.length+n-1).length;return o.map(function(p,c){var x=c+n,g=String(x).length;return i(x,u-g)+a+p}).join(`
`)}},2153:function(d,s,e){d.exports=function(n){var a=n.length;if(a===0)return[];if(a===1)return[0];for(var o=n[0].length,u=[n[0]],p=[0],c=1;c<a;++c)if(u.push(n[c]),r(u,o)){if(p.push(c),p.length===o+1)return p}else u.pop();return p};var i=e(417);function r(n,a){for(var o=new Array(a+1),u=0;u<n.length;++u)o[u]=n[u];for(u=0;u<=n.length;++u){for(var p=n.length;p<=a;++p){for(var c=new Array(a),x=0;x<a;++x)c[x]=Math.pow(p+1-u,x);o[p]=c}if(i.apply(void 0,o))return!0}return!1}},4653:function(d,s,e){d.exports=function(n,a){return i(a).filter(function(o){for(var u=new Array(o.length),p=0;p<o.length;++p)u[p]=a[o[p]];return r(u)*n<1})};var i=e(4419),r=e(1778)},2350:function(d,s,e){d.exports=function(n,a){return r(i(n,a))};var i=e(4653),r=e(8691)},7896:function(d){d.exports=function(s){return atob(s)}},957:function(d,s,e){d.exports=function(n,a){for(var o=a.length,u=new Array(o+1),p=0;p<o;++p){for(var c=new Array(o+1),x=0;x<=o;++x)c[x]=n[x][p];u[p]=c}for(u[o]=new Array(o+1),p=0;p<=o;++p)u[o][p]=1;var g=new Array(o+1);for(p=0;p<o;++p)g[p]=a[p];g[o]=1;var f=i(u,g),y=r(f[o+1]);y===0&&(y=1);var v=new Array(o+1);for(p=0;p<=o;++p)v[p]=r(f[p])/y;return v};var i=e(6606);function r(n){for(var a=0,o=0;o<n.length;++o)a+=n[o];return a}},1539:function(d,s,e){var i=e(8524);d.exports=function(r,n){return i(r[0].mul(n[1]).add(n[0].mul(r[1])),r[1].mul(n[1]))}},8846:function(d){d.exports=function(s,e){return s[0].mul(e[1]).cmp(e[0].mul(s[1]))}},9189:function(d,s,e){var i=e(8524);d.exports=function(r,n){return i(r[0].mul(n[1]),r[1].mul(n[0]))}},5125:function(d,s,e){var i=e(234),r=e(3218),n=e(5514),a=e(2813),o=e(8524),u=e(9189);d.exports=function p(c,x){if(i(c))return x?u(c,p(x)):[c[0].clone(),c[1].clone()];var g,f,y=0;if(r(c))g=c.clone();else if(typeof c=="string")g=a(c);else{if(c===0)return[n(0),n(1)];if(c===Math.floor(c))g=n(c);else{for(;c!==Math.floor(c);)c*=Math.pow(2,256),y-=256;g=n(c)}}if(i(x))g.mul(x[1]),f=x[0].clone();else if(r(x))f=x.clone();else if(typeof x=="string")f=a(x);else if(x)if(x===Math.floor(x))f=n(x);else{for(;x!==Math.floor(x);)x*=Math.pow(2,256),y+=256;f=n(x)}else f=n(1);return y>0?g=g.ushln(y):y<0&&(f=f.ushln(-y)),o(g,f)}},234:function(d,s,e){var i=e(3218);d.exports=function(r){return Array.isArray(r)&&r.length===2&&i(r[0])&&i(r[1])}},4275:function(d,s,e){var i=e(1928);d.exports=function(r){return r.cmp(new i(0))}},9958:function(d,s,e){var i=e(4275);d.exports=function(r){var n=r.length,a=r.words,o=0;if(n===1)o=a[0];else if(n===2)o=a[0]+67108864*a[1];else for(var u=0;u<n;u++)o+=a[u]*Math.pow(67108864,u);return i(r)*o}},1112:function(d,s,e){var i=e(8362),r=e(2288).countTrailingZeros;d.exports=function(n){var a=r(i.lo(n));if(a<32)return a;var o=r(i.hi(n));return o>20?52:o+32}},3218:function(d,s,e){e(1928),d.exports=function(i){return i&&typeof i=="object"&&!!i.words}},5514:function(d,s,e){var i=e(1928),r=e(8362);d.exports=function(n){var a=r.exponent(n);return a<52?new i(n):new i(n*Math.pow(2,52-a)).ushln(a-52)}},8524:function(d,s,e){var i=e(5514),r=e(4275);d.exports=function(n,a){var o=r(n),u=r(a);if(o===0)return[i(0),i(1)];if(u===0)return[i(0),i(0)];u<0&&(n=n.neg(),a=a.neg());var p=n.gcd(a);return p.cmpn(1)?[n.div(p),a.div(p)]:[n,a]}},2813:function(d,s,e){var i=e(1928);d.exports=function(r){return new i(r)}},3962:function(d,s,e){var i=e(8524);d.exports=function(r,n){return i(r[0].mul(n[0]),r[1].mul(n[1]))}},4951:function(d,s,e){var i=e(4275);d.exports=function(r){return i(r[0])*i(r[1])}},4354:function(d,s,e){var i=e(8524);d.exports=function(r,n){return i(r[0].mul(n[1]).sub(r[1].mul(n[0])),r[1].mul(n[1]))}},7999:function(d,s,e){var i=e(9958),r=e(1112);d.exports=function(n){var a=n[0],o=n[1];if(a.cmpn(0)===0)return 0;var u=a.abs().divmod(o.abs()),p=u.div,c=i(p),x=u.mod,g=a.negative!==o.negative?-1:1;if(x.cmpn(0)===0)return g*c;if(c){var f=r(c)+4;return g*(c+(v=i(x.ushln(f).divRound(o)))*Math.pow(2,-f))}var y=o.bitLength()-x.bitLength()+53,v=i(x.ushln(y).divRound(o));return y<1023?g*v*Math.pow(2,-y):g*(v*=Math.pow(2,-1023))*Math.pow(2,1023-y)}},5070:function(d){function s(o,u,p,c,x){for(var g=x+1;c<=x;){var f=c+x>>>1,y=o[f];(p!==void 0?p(y,u):y-u)>=0?(g=f,x=f-1):c=f+1}return g}function e(o,u,p,c,x){for(var g=x+1;c<=x;){var f=c+x>>>1,y=o[f];(p!==void 0?p(y,u):y-u)>0?(g=f,x=f-1):c=f+1}return g}function i(o,u,p,c,x){for(var g=c-1;c<=x;){var f=c+x>>>1,y=o[f];(p!==void 0?p(y,u):y-u)<0?(g=f,c=f+1):x=f-1}return g}function r(o,u,p,c,x){for(var g=c-1;c<=x;){var f=c+x>>>1,y=o[f];(p!==void 0?p(y,u):y-u)<=0?(g=f,c=f+1):x=f-1}return g}function n(o,u,p,c,x){for(;c<=x;){var g=c+x>>>1,f=o[g],y=p!==void 0?p(f,u):f-u;if(y===0)return g;y<=0?c=g+1:x=g-1}return-1}function a(o,u,p,c,x,g){return typeof p=="function"?g(o,u,p,c===void 0?0:0|c,x===void 0?o.length-1:0|x):g(o,u,void 0,p===void 0?0:0|p,c===void 0?o.length-1:0|c)}d.exports={ge:function(o,u,p,c,x){return a(o,u,p,c,x,s)},gt:function(o,u,p,c,x){return a(o,u,p,c,x,e)},lt:function(o,u,p,c,x){return a(o,u,p,c,x,i)},le:function(o,u,p,c,x){return a(o,u,p,c,x,r)},eq:function(o,u,p,c,x){return a(o,u,p,c,x,n)}}},2288:function(d,s){function e(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(r){return(r>0)-(r<0)},s.abs=function(r){var n=r>>31;return(r^n)-n},s.min=function(r,n){return n^(r^n)&-(r<n)},s.max=function(r,n){return r^(r^n)&-(r<n)},s.isPow2=function(r){return!(r&r-1||!r)},s.log2=function(r){var n,a;return n=(r>65535)<<4,n|=a=((r>>>=n)>255)<<3,n|=a=((r>>>=a)>15)<<2,(n|=a=((r>>>=a)>3)<<1)|(r>>>=a)>>1},s.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},s.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},s.countTrailingZeros=e,s.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},s.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},s.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var i=new Array(256);(function(r){for(var n=0;n<256;++n){var a=n,o=n,u=7;for(a>>>=1;a;a>>>=1)o<<=1,o|=1&a,--u;r[n]=o<<u&255}})(i),s.reverse=function(r){return i[255&r]<<24|i[r>>>8&255]<<16|i[r>>>16&255]<<8|i[r>>>24&255]},s.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},s.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},s.interleave3=function(r,n,a){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},s.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},s.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>e(r)+1}},1928:function(d,s,e){(function(i,r){function n(I,H){if(!I)throw new Error(H||"Assertion failed")}function a(I,H){I.super_=H;var N=function(){};N.prototype=H.prototype,I.prototype=new N,I.prototype.constructor=I}function o(I,H,N){if(o.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&(H!=="le"&&H!=="be"||(N=H,H=10),this._init(I||0,H||10,N||"be"))}var u;typeof i=="object"?i.exports=o:r.BN=o,o.BN=o,o.wordSize=26;try{u=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:e(6601).Buffer}catch{}function p(I,H){var N=I.charCodeAt(H);return N>=65&&N<=70?N-55:N>=97&&N<=102?N-87:N-48&15}function c(I,H,N){var F=p(I,N);return N-1>=H&&(F|=p(I,N-1)<<4),F}function x(I,H,N,F){for(var V=0,q=Math.min(I.length,N),te=H;te<q;te++){var $=I.charCodeAt(te)-48;V*=F,V+=$>=49?$-49+10:$>=17?$-17+10:$}return V}o.isBN=function(I){return I instanceof o||I!==null&&typeof I=="object"&&I.constructor.wordSize===o.wordSize&&Array.isArray(I.words)},o.max=function(I,H){return I.cmp(H)>0?I:H},o.min=function(I,H){return I.cmp(H)<0?I:H},o.prototype._init=function(I,H,N){if(typeof I=="number")return this._initNumber(I,H,N);if(typeof I=="object")return this._initArray(I,H,N);H==="hex"&&(H=16),n(H===(0|H)&&H>=2&&H<=36);var F=0;(I=I.toString().replace(/\s+/g,""))[0]==="-"&&(F++,this.negative=1),F<I.length&&(H===16?this._parseHex(I,F,N):(this._parseBase(I,H,F),N==="le"&&this._initArray(this.toArray(),H,N)))},o.prototype._initNumber=function(I,H,N){I<0&&(this.negative=1,I=-I),I<67108864?(this.words=[67108863&I],this.length=1):I<4503599627370496?(this.words=[67108863&I,I/67108864&67108863],this.length=2):(n(I<9007199254740992),this.words=[67108863&I,I/67108864&67108863,1],this.length=3),N==="le"&&this._initArray(this.toArray(),H,N)},o.prototype._initArray=function(I,H,N){if(n(typeof I.length=="number"),I.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(I.length/3),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var V,q,te=0;if(N==="be")for(F=I.length-1,V=0;F>=0;F-=3)q=I[F]|I[F-1]<<8|I[F-2]<<16,this.words[V]|=q<<te&67108863,this.words[V+1]=q>>>26-te&67108863,(te+=24)>=26&&(te-=26,V++);else if(N==="le")for(F=0,V=0;F<I.length;F+=3)q=I[F]|I[F+1]<<8|I[F+2]<<16,this.words[V]|=q<<te&67108863,this.words[V+1]=q>>>26-te&67108863,(te+=24)>=26&&(te-=26,V++);return this.strip()},o.prototype._parseHex=function(I,H,N){this.length=Math.ceil((I.length-H)/6),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var V,q=0,te=0;if(N==="be")for(F=I.length-1;F>=H;F-=2)V=c(I,H,F)<<q,this.words[te]|=67108863&V,q>=18?(q-=18,te+=1,this.words[te]|=V>>>26):q+=8;else for(F=(I.length-H)%2==0?H+1:H;F<I.length;F+=2)V=c(I,H,F)<<q,this.words[te]|=67108863&V,q>=18?(q-=18,te+=1,this.words[te]|=V>>>26):q+=8;this.strip()},o.prototype._parseBase=function(I,H,N){this.words=[0],this.length=1;for(var F=0,V=1;V<=67108863;V*=H)F++;F--,V=V/H|0;for(var q=I.length-N,te=q%F,$=Math.min(q,q-te)+N,W=0,Z=N;Z<$;Z+=F)W=x(I,Z,Z+F,H),this.imuln(V),this.words[0]+W<67108864?this.words[0]+=W:this._iaddn(W);if(te!==0){var J=1;for(W=x(I,Z,I.length,H),Z=0;Z<te;Z++)J*=H;this.imuln(J),this.words[0]+W<67108864?this.words[0]+=W:this._iaddn(W)}this.strip()},o.prototype.copy=function(I){I.words=new Array(this.length);for(var H=0;H<this.length;H++)I.words[H]=this.words[H];I.length=this.length,I.negative=this.negative,I.red=this.red},o.prototype.clone=function(){var I=new o(null);return this.copy(I),I},o.prototype._expand=function(I){for(;this.length<I;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function v(I,H,N){N.negative=H.negative^I.negative;var F=I.length+H.length|0;N.length=F,F=F-1|0;var V=0|I.words[0],q=0|H.words[0],te=V*q,$=67108863&te,W=te/67108864|0;N.words[0]=$;for(var Z=1;Z<F;Z++){for(var J=W>>>26,ee=67108863&W,re=Math.min(Z,H.length-1),ae=Math.max(0,Z-I.length+1);ae<=re;ae++){var oe=Z-ae|0;J+=(te=(V=0|I.words[oe])*(q=0|H.words[ae])+ee)/67108864|0,ee=67108863&te}N.words[Z]=0|ee,W=0|J}return W!==0?N.words[Z]=0|W:N.length--,N.strip()}o.prototype.toString=function(I,H){var N;if(H=0|H||1,(I=I||10)===16||I==="hex"){N="";for(var F=0,V=0,q=0;q<this.length;q++){var te=this.words[q],$=(16777215&(te<<F|V)).toString(16);N=(V=te>>>24-F&16777215)!=0||q!==this.length-1?g[6-$.length]+$+N:$+N,(F+=2)>=26&&(F-=26,q--)}for(V!==0&&(N=V.toString(16)+N);N.length%H!=0;)N="0"+N;return this.negative!==0&&(N="-"+N),N}if(I===(0|I)&&I>=2&&I<=36){var W=f[I],Z=y[I];N="";var J=this.clone();for(J.negative=0;!J.isZero();){var ee=J.modn(Z).toString(I);N=(J=J.idivn(Z)).isZero()?ee+N:g[W-ee.length]+ee+N}for(this.isZero()&&(N="0"+N);N.length%H!=0;)N="0"+N;return this.negative!==0&&(N="-"+N),N}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var I=this.words[0];return this.length===2?I+=67108864*this.words[1]:this.length===3&&this.words[2]===1?I+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-I:I},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(I,H){return n(u!==void 0),this.toArrayLike(u,I,H)},o.prototype.toArray=function(I,H){return this.toArrayLike(Array,I,H)},o.prototype.toArrayLike=function(I,H,N){var F=this.byteLength(),V=N||Math.max(1,F);n(F<=V,"byte array longer than desired length"),n(V>0,"Requested array length <= 0"),this.strip();var q,te,$=H==="le",W=new I(V),Z=this.clone();if($){for(te=0;!Z.isZero();te++)q=Z.andln(255),Z.iushrn(8),W[te]=q;for(;te<V;te++)W[te]=0}else{for(te=0;te<V-F;te++)W[te]=0;for(te=0;!Z.isZero();te++)q=Z.andln(255),Z.iushrn(8),W[V-te-1]=q}return W},Math.clz32?o.prototype._countBits=function(I){return 32-Math.clz32(I)}:o.prototype._countBits=function(I){var H=I,N=0;return H>=4096&&(N+=13,H>>>=13),H>=64&&(N+=7,H>>>=7),H>=8&&(N+=4,H>>>=4),H>=2&&(N+=2,H>>>=2),N+H},o.prototype._zeroBits=function(I){if(I===0)return 26;var H=I,N=0;return!(8191&H)&&(N+=13,H>>>=13),!(127&H)&&(N+=7,H>>>=7),!(15&H)&&(N+=4,H>>>=4),!(3&H)&&(N+=2,H>>>=2),!(1&H)&&N++,N},o.prototype.bitLength=function(){var I=this.words[this.length-1],H=this._countBits(I);return 26*(this.length-1)+H},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var I=0,H=0;H<this.length;H++){var N=this._zeroBits(this.words[H]);if(I+=N,N!==26)break}return I},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(I){return this.negative!==0?this.abs().inotn(I).iaddn(1):this.clone()},o.prototype.fromTwos=function(I){return this.testn(I-1)?this.notn(I).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(I){for(;this.length<I.length;)this.words[this.length++]=0;for(var H=0;H<I.length;H++)this.words[H]=this.words[H]|I.words[H];return this.strip()},o.prototype.ior=function(I){return n((this.negative|I.negative)==0),this.iuor(I)},o.prototype.or=function(I){return this.length>I.length?this.clone().ior(I):I.clone().ior(this)},o.prototype.uor=function(I){return this.length>I.length?this.clone().iuor(I):I.clone().iuor(this)},o.prototype.iuand=function(I){var H;H=this.length>I.length?I:this;for(var N=0;N<H.length;N++)this.words[N]=this.words[N]&I.words[N];return this.length=H.length,this.strip()},o.prototype.iand=function(I){return n((this.negative|I.negative)==0),this.iuand(I)},o.prototype.and=function(I){return this.length>I.length?this.clone().iand(I):I.clone().iand(this)},o.prototype.uand=function(I){return this.length>I.length?this.clone().iuand(I):I.clone().iuand(this)},o.prototype.iuxor=function(I){var H,N;this.length>I.length?(H=this,N=I):(H=I,N=this);for(var F=0;F<N.length;F++)this.words[F]=H.words[F]^N.words[F];if(this!==H)for(;F<H.length;F++)this.words[F]=H.words[F];return this.length=H.length,this.strip()},o.prototype.ixor=function(I){return n((this.negative|I.negative)==0),this.iuxor(I)},o.prototype.xor=function(I){return this.length>I.length?this.clone().ixor(I):I.clone().ixor(this)},o.prototype.uxor=function(I){return this.length>I.length?this.clone().iuxor(I):I.clone().iuxor(this)},o.prototype.inotn=function(I){n(typeof I=="number"&&I>=0);var H=0|Math.ceil(I/26),N=I%26;this._expand(H),N>0&&H--;for(var F=0;F<H;F++)this.words[F]=67108863&~this.words[F];return N>0&&(this.words[F]=~this.words[F]&67108863>>26-N),this.strip()},o.prototype.notn=function(I){return this.clone().inotn(I)},o.prototype.setn=function(I,H){n(typeof I=="number"&&I>=0);var N=I/26|0,F=I%26;return this._expand(N+1),this.words[N]=H?this.words[N]|1<<F:this.words[N]&~(1<<F),this.strip()},o.prototype.iadd=function(I){var H,N,F;if(this.negative!==0&&I.negative===0)return this.negative=0,H=this.isub(I),this.negative^=1,this._normSign();if(this.negative===0&&I.negative!==0)return I.negative=0,H=this.isub(I),I.negative=1,H._normSign();this.length>I.length?(N=this,F=I):(N=I,F=this);for(var V=0,q=0;q<F.length;q++)H=(0|N.words[q])+(0|F.words[q])+V,this.words[q]=67108863&H,V=H>>>26;for(;V!==0&&q<N.length;q++)H=(0|N.words[q])+V,this.words[q]=67108863&H,V=H>>>26;if(this.length=N.length,V!==0)this.words[this.length]=V,this.length++;else if(N!==this)for(;q<N.length;q++)this.words[q]=N.words[q];return this},o.prototype.add=function(I){var H;return I.negative!==0&&this.negative===0?(I.negative=0,H=this.sub(I),I.negative^=1,H):I.negative===0&&this.negative!==0?(this.negative=0,H=I.sub(this),this.negative=1,H):this.length>I.length?this.clone().iadd(I):I.clone().iadd(this)},o.prototype.isub=function(I){if(I.negative!==0){I.negative=0;var H=this.iadd(I);return I.negative=1,H._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(I),this.negative=1,this._normSign();var N,F,V=this.cmp(I);if(V===0)return this.negative=0,this.length=1,this.words[0]=0,this;V>0?(N=this,F=I):(N=I,F=this);for(var q=0,te=0;te<F.length;te++)q=(H=(0|N.words[te])-(0|F.words[te])+q)>>26,this.words[te]=67108863&H;for(;q!==0&&te<N.length;te++)q=(H=(0|N.words[te])+q)>>26,this.words[te]=67108863&H;if(q===0&&te<N.length&&N!==this)for(;te<N.length;te++)this.words[te]=N.words[te];return this.length=Math.max(this.length,te),N!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(I){return this.clone().isub(I)};var m=function(I,H,N){var F,V,q,te=I.words,$=H.words,W=N.words,Z=0,J=0|te[0],ee=8191&J,re=J>>>13,ae=0|te[1],oe=8191&ae,ce=ae>>>13,pe=0|te[2],ve=8191&pe,we=pe>>>13,xe=0|te[3],ge=8191&xe,Oe=xe>>>13,Ae=0|te[4],Te=8191&Ae,se=Ae>>>13,le=0|te[5],ne=8191&le,me=le>>>13,Ee=0|te[6],be=8191&Ee,De=Ee>>>13,Ue=0|te[7],he=8191&Ue,ke=Ue>>>13,_e=0|te[8],Ce=8191&_e,Fe=_e>>>13,Re=0|te[9],He=8191&Re,Ge=Re>>>13,$e=0|$[0],st=8191&$e,Ke=$e>>>13,gt=0|$[1],mt=8191&gt,at=gt>>>13,rt=0|$[2],xt=8191&rt,Tt=rt>>>13,wt=0|$[3],Ot=8191&wt,Ct=wt>>>13,Ye=0|$[4],Xe=8191&Ye,Ve=Ye>>>13,We=0|$[5],nt=8191&We,ot=We>>>13,Ie=0|$[6],ze=8191&Ie,et=Ie>>>13,tt=0|$[7],dt=8191&tt,pt=tt>>>13,vt=0|$[8],ct=8191&vt,kt=vt>>>13,ut=0|$[9],ft=8191&ut,bt=ut>>>13;N.negative=I.negative^H.negative,N.length=19;var It=(Z+(F=Math.imul(ee,st))|0)+((8191&(V=(V=Math.imul(ee,Ke))+Math.imul(re,st)|0))<<13)|0;Z=((q=Math.imul(re,Ke))+(V>>>13)|0)+(It>>>26)|0,It&=67108863,F=Math.imul(oe,st),V=(V=Math.imul(oe,Ke))+Math.imul(ce,st)|0,q=Math.imul(ce,Ke);var zt=(Z+(F=F+Math.imul(ee,mt)|0)|0)+((8191&(V=(V=V+Math.imul(ee,at)|0)+Math.imul(re,mt)|0))<<13)|0;Z=((q=q+Math.imul(re,at)|0)+(V>>>13)|0)+(zt>>>26)|0,zt&=67108863,F=Math.imul(ve,st),V=(V=Math.imul(ve,Ke))+Math.imul(we,st)|0,q=Math.imul(we,Ke),F=F+Math.imul(oe,mt)|0,V=(V=V+Math.imul(oe,at)|0)+Math.imul(ce,mt)|0,q=q+Math.imul(ce,at)|0;var Rt=(Z+(F=F+Math.imul(ee,xt)|0)|0)+((8191&(V=(V=V+Math.imul(ee,Tt)|0)+Math.imul(re,xt)|0))<<13)|0;Z=((q=q+Math.imul(re,Tt)|0)+(V>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,F=Math.imul(ge,st),V=(V=Math.imul(ge,Ke))+Math.imul(Oe,st)|0,q=Math.imul(Oe,Ke),F=F+Math.imul(ve,mt)|0,V=(V=V+Math.imul(ve,at)|0)+Math.imul(we,mt)|0,q=q+Math.imul(we,at)|0,F=F+Math.imul(oe,xt)|0,V=(V=V+Math.imul(oe,Tt)|0)+Math.imul(ce,xt)|0,q=q+Math.imul(ce,Tt)|0;var Jt=(Z+(F=F+Math.imul(ee,Ot)|0)|0)+((8191&(V=(V=V+Math.imul(ee,Ct)|0)+Math.imul(re,Ot)|0))<<13)|0;Z=((q=q+Math.imul(re,Ct)|0)+(V>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,F=Math.imul(Te,st),V=(V=Math.imul(Te,Ke))+Math.imul(se,st)|0,q=Math.imul(se,Ke),F=F+Math.imul(ge,mt)|0,V=(V=V+Math.imul(ge,at)|0)+Math.imul(Oe,mt)|0,q=q+Math.imul(Oe,at)|0,F=F+Math.imul(ve,xt)|0,V=(V=V+Math.imul(ve,Tt)|0)+Math.imul(we,xt)|0,q=q+Math.imul(we,Tt)|0,F=F+Math.imul(oe,Ot)|0,V=(V=V+Math.imul(oe,Ct)|0)+Math.imul(ce,Ot)|0,q=q+Math.imul(ce,Ct)|0;var qt=(Z+(F=F+Math.imul(ee,Xe)|0)|0)+((8191&(V=(V=V+Math.imul(ee,Ve)|0)+Math.imul(re,Xe)|0))<<13)|0;Z=((q=q+Math.imul(re,Ve)|0)+(V>>>13)|0)+(qt>>>26)|0,qt&=67108863,F=Math.imul(ne,st),V=(V=Math.imul(ne,Ke))+Math.imul(me,st)|0,q=Math.imul(me,Ke),F=F+Math.imul(Te,mt)|0,V=(V=V+Math.imul(Te,at)|0)+Math.imul(se,mt)|0,q=q+Math.imul(se,at)|0,F=F+Math.imul(ge,xt)|0,V=(V=V+Math.imul(ge,Tt)|0)+Math.imul(Oe,xt)|0,q=q+Math.imul(Oe,Tt)|0,F=F+Math.imul(ve,Ot)|0,V=(V=V+Math.imul(ve,Ct)|0)+Math.imul(we,Ot)|0,q=q+Math.imul(we,Ct)|0,F=F+Math.imul(oe,Xe)|0,V=(V=V+Math.imul(oe,Ve)|0)+Math.imul(ce,Xe)|0,q=q+Math.imul(ce,Ve)|0;var Wt=(Z+(F=F+Math.imul(ee,nt)|0)|0)+((8191&(V=(V=V+Math.imul(ee,ot)|0)+Math.imul(re,nt)|0))<<13)|0;Z=((q=q+Math.imul(re,ot)|0)+(V>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,F=Math.imul(be,st),V=(V=Math.imul(be,Ke))+Math.imul(De,st)|0,q=Math.imul(De,Ke),F=F+Math.imul(ne,mt)|0,V=(V=V+Math.imul(ne,at)|0)+Math.imul(me,mt)|0,q=q+Math.imul(me,at)|0,F=F+Math.imul(Te,xt)|0,V=(V=V+Math.imul(Te,Tt)|0)+Math.imul(se,xt)|0,q=q+Math.imul(se,Tt)|0,F=F+Math.imul(ge,Ot)|0,V=(V=V+Math.imul(ge,Ct)|0)+Math.imul(Oe,Ot)|0,q=q+Math.imul(Oe,Ct)|0,F=F+Math.imul(ve,Xe)|0,V=(V=V+Math.imul(ve,Ve)|0)+Math.imul(we,Xe)|0,q=q+Math.imul(we,Ve)|0,F=F+Math.imul(oe,nt)|0,V=(V=V+Math.imul(oe,ot)|0)+Math.imul(ce,nt)|0,q=q+Math.imul(ce,ot)|0;var jt=(Z+(F=F+Math.imul(ee,ze)|0)|0)+((8191&(V=(V=V+Math.imul(ee,et)|0)+Math.imul(re,ze)|0))<<13)|0;Z=((q=q+Math.imul(re,et)|0)+(V>>>13)|0)+(jt>>>26)|0,jt&=67108863,F=Math.imul(he,st),V=(V=Math.imul(he,Ke))+Math.imul(ke,st)|0,q=Math.imul(ke,Ke),F=F+Math.imul(be,mt)|0,V=(V=V+Math.imul(be,at)|0)+Math.imul(De,mt)|0,q=q+Math.imul(De,at)|0,F=F+Math.imul(ne,xt)|0,V=(V=V+Math.imul(ne,Tt)|0)+Math.imul(me,xt)|0,q=q+Math.imul(me,Tt)|0,F=F+Math.imul(Te,Ot)|0,V=(V=V+Math.imul(Te,Ct)|0)+Math.imul(se,Ot)|0,q=q+Math.imul(se,Ct)|0,F=F+Math.imul(ge,Xe)|0,V=(V=V+Math.imul(ge,Ve)|0)+Math.imul(Oe,Xe)|0,q=q+Math.imul(Oe,Ve)|0,F=F+Math.imul(ve,nt)|0,V=(V=V+Math.imul(ve,ot)|0)+Math.imul(we,nt)|0,q=q+Math.imul(we,ot)|0,F=F+Math.imul(oe,ze)|0,V=(V=V+Math.imul(oe,et)|0)+Math.imul(ce,ze)|0,q=q+Math.imul(ce,et)|0;var fn=(Z+(F=F+Math.imul(ee,dt)|0)|0)+((8191&(V=(V=V+Math.imul(ee,pt)|0)+Math.imul(re,dt)|0))<<13)|0;Z=((q=q+Math.imul(re,pt)|0)+(V>>>13)|0)+(fn>>>26)|0,fn&=67108863,F=Math.imul(Ce,st),V=(V=Math.imul(Ce,Ke))+Math.imul(Fe,st)|0,q=Math.imul(Fe,Ke),F=F+Math.imul(he,mt)|0,V=(V=V+Math.imul(he,at)|0)+Math.imul(ke,mt)|0,q=q+Math.imul(ke,at)|0,F=F+Math.imul(be,xt)|0,V=(V=V+Math.imul(be,Tt)|0)+Math.imul(De,xt)|0,q=q+Math.imul(De,Tt)|0,F=F+Math.imul(ne,Ot)|0,V=(V=V+Math.imul(ne,Ct)|0)+Math.imul(me,Ot)|0,q=q+Math.imul(me,Ct)|0,F=F+Math.imul(Te,Xe)|0,V=(V=V+Math.imul(Te,Ve)|0)+Math.imul(se,Xe)|0,q=q+Math.imul(se,Ve)|0,F=F+Math.imul(ge,nt)|0,V=(V=V+Math.imul(ge,ot)|0)+Math.imul(Oe,nt)|0,q=q+Math.imul(Oe,ot)|0,F=F+Math.imul(ve,ze)|0,V=(V=V+Math.imul(ve,et)|0)+Math.imul(we,ze)|0,q=q+Math.imul(we,et)|0,F=F+Math.imul(oe,dt)|0,V=(V=V+Math.imul(oe,pt)|0)+Math.imul(ce,dt)|0,q=q+Math.imul(ce,pt)|0;var xn=(Z+(F=F+Math.imul(ee,ct)|0)|0)+((8191&(V=(V=V+Math.imul(ee,kt)|0)+Math.imul(re,ct)|0))<<13)|0;Z=((q=q+Math.imul(re,kt)|0)+(V>>>13)|0)+(xn>>>26)|0,xn&=67108863,F=Math.imul(He,st),V=(V=Math.imul(He,Ke))+Math.imul(Ge,st)|0,q=Math.imul(Ge,Ke),F=F+Math.imul(Ce,mt)|0,V=(V=V+Math.imul(Ce,at)|0)+Math.imul(Fe,mt)|0,q=q+Math.imul(Fe,at)|0,F=F+Math.imul(he,xt)|0,V=(V=V+Math.imul(he,Tt)|0)+Math.imul(ke,xt)|0,q=q+Math.imul(ke,Tt)|0,F=F+Math.imul(be,Ot)|0,V=(V=V+Math.imul(be,Ct)|0)+Math.imul(De,Ot)|0,q=q+Math.imul(De,Ct)|0,F=F+Math.imul(ne,Xe)|0,V=(V=V+Math.imul(ne,Ve)|0)+Math.imul(me,Xe)|0,q=q+Math.imul(me,Ve)|0,F=F+Math.imul(Te,nt)|0,V=(V=V+Math.imul(Te,ot)|0)+Math.imul(se,nt)|0,q=q+Math.imul(se,ot)|0,F=F+Math.imul(ge,ze)|0,V=(V=V+Math.imul(ge,et)|0)+Math.imul(Oe,ze)|0,q=q+Math.imul(Oe,et)|0,F=F+Math.imul(ve,dt)|0,V=(V=V+Math.imul(ve,pt)|0)+Math.imul(we,dt)|0,q=q+Math.imul(we,pt)|0,F=F+Math.imul(oe,ct)|0,V=(V=V+Math.imul(oe,kt)|0)+Math.imul(ce,ct)|0,q=q+Math.imul(ce,kt)|0;var un=(Z+(F=F+Math.imul(ee,ft)|0)|0)+((8191&(V=(V=V+Math.imul(ee,bt)|0)+Math.imul(re,ft)|0))<<13)|0;Z=((q=q+Math.imul(re,bt)|0)+(V>>>13)|0)+(un>>>26)|0,un&=67108863,F=Math.imul(He,mt),V=(V=Math.imul(He,at))+Math.imul(Ge,mt)|0,q=Math.imul(Ge,at),F=F+Math.imul(Ce,xt)|0,V=(V=V+Math.imul(Ce,Tt)|0)+Math.imul(Fe,xt)|0,q=q+Math.imul(Fe,Tt)|0,F=F+Math.imul(he,Ot)|0,V=(V=V+Math.imul(he,Ct)|0)+Math.imul(ke,Ot)|0,q=q+Math.imul(ke,Ct)|0,F=F+Math.imul(be,Xe)|0,V=(V=V+Math.imul(be,Ve)|0)+Math.imul(De,Xe)|0,q=q+Math.imul(De,Ve)|0,F=F+Math.imul(ne,nt)|0,V=(V=V+Math.imul(ne,ot)|0)+Math.imul(me,nt)|0,q=q+Math.imul(me,ot)|0,F=F+Math.imul(Te,ze)|0,V=(V=V+Math.imul(Te,et)|0)+Math.imul(se,ze)|0,q=q+Math.imul(se,et)|0,F=F+Math.imul(ge,dt)|0,V=(V=V+Math.imul(ge,pt)|0)+Math.imul(Oe,dt)|0,q=q+Math.imul(Oe,pt)|0,F=F+Math.imul(ve,ct)|0,V=(V=V+Math.imul(ve,kt)|0)+Math.imul(we,ct)|0,q=q+Math.imul(we,kt)|0;var Ht=(Z+(F=F+Math.imul(oe,ft)|0)|0)+((8191&(V=(V=V+Math.imul(oe,bt)|0)+Math.imul(ce,ft)|0))<<13)|0;Z=((q=q+Math.imul(ce,bt)|0)+(V>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,F=Math.imul(He,xt),V=(V=Math.imul(He,Tt))+Math.imul(Ge,xt)|0,q=Math.imul(Ge,Tt),F=F+Math.imul(Ce,Ot)|0,V=(V=V+Math.imul(Ce,Ct)|0)+Math.imul(Fe,Ot)|0,q=q+Math.imul(Fe,Ct)|0,F=F+Math.imul(he,Xe)|0,V=(V=V+Math.imul(he,Ve)|0)+Math.imul(ke,Xe)|0,q=q+Math.imul(ke,Ve)|0,F=F+Math.imul(be,nt)|0,V=(V=V+Math.imul(be,ot)|0)+Math.imul(De,nt)|0,q=q+Math.imul(De,ot)|0,F=F+Math.imul(ne,ze)|0,V=(V=V+Math.imul(ne,et)|0)+Math.imul(me,ze)|0,q=q+Math.imul(me,et)|0,F=F+Math.imul(Te,dt)|0,V=(V=V+Math.imul(Te,pt)|0)+Math.imul(se,dt)|0,q=q+Math.imul(se,pt)|0,F=F+Math.imul(ge,ct)|0,V=(V=V+Math.imul(ge,kt)|0)+Math.imul(Oe,ct)|0,q=q+Math.imul(Oe,kt)|0;var nn=(Z+(F=F+Math.imul(ve,ft)|0)|0)+((8191&(V=(V=V+Math.imul(ve,bt)|0)+Math.imul(we,ft)|0))<<13)|0;Z=((q=q+Math.imul(we,bt)|0)+(V>>>13)|0)+(nn>>>26)|0,nn&=67108863,F=Math.imul(He,Ot),V=(V=Math.imul(He,Ct))+Math.imul(Ge,Ot)|0,q=Math.imul(Ge,Ct),F=F+Math.imul(Ce,Xe)|0,V=(V=V+Math.imul(Ce,Ve)|0)+Math.imul(Fe,Xe)|0,q=q+Math.imul(Fe,Ve)|0,F=F+Math.imul(he,nt)|0,V=(V=V+Math.imul(he,ot)|0)+Math.imul(ke,nt)|0,q=q+Math.imul(ke,ot)|0,F=F+Math.imul(be,ze)|0,V=(V=V+Math.imul(be,et)|0)+Math.imul(De,ze)|0,q=q+Math.imul(De,et)|0,F=F+Math.imul(ne,dt)|0,V=(V=V+Math.imul(ne,pt)|0)+Math.imul(me,dt)|0,q=q+Math.imul(me,pt)|0,F=F+Math.imul(Te,ct)|0,V=(V=V+Math.imul(Te,kt)|0)+Math.imul(se,ct)|0,q=q+Math.imul(se,kt)|0;var Kt=(Z+(F=F+Math.imul(ge,ft)|0)|0)+((8191&(V=(V=V+Math.imul(ge,bt)|0)+Math.imul(Oe,ft)|0))<<13)|0;Z=((q=q+Math.imul(Oe,bt)|0)+(V>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,F=Math.imul(He,Xe),V=(V=Math.imul(He,Ve))+Math.imul(Ge,Xe)|0,q=Math.imul(Ge,Ve),F=F+Math.imul(Ce,nt)|0,V=(V=V+Math.imul(Ce,ot)|0)+Math.imul(Fe,nt)|0,q=q+Math.imul(Fe,ot)|0,F=F+Math.imul(he,ze)|0,V=(V=V+Math.imul(he,et)|0)+Math.imul(ke,ze)|0,q=q+Math.imul(ke,et)|0,F=F+Math.imul(be,dt)|0,V=(V=V+Math.imul(be,pt)|0)+Math.imul(De,dt)|0,q=q+Math.imul(De,pt)|0,F=F+Math.imul(ne,ct)|0,V=(V=V+Math.imul(ne,kt)|0)+Math.imul(me,ct)|0,q=q+Math.imul(me,kt)|0;var on=(Z+(F=F+Math.imul(Te,ft)|0)|0)+((8191&(V=(V=V+Math.imul(Te,bt)|0)+Math.imul(se,ft)|0))<<13)|0;Z=((q=q+Math.imul(se,bt)|0)+(V>>>13)|0)+(on>>>26)|0,on&=67108863,F=Math.imul(He,nt),V=(V=Math.imul(He,ot))+Math.imul(Ge,nt)|0,q=Math.imul(Ge,ot),F=F+Math.imul(Ce,ze)|0,V=(V=V+Math.imul(Ce,et)|0)+Math.imul(Fe,ze)|0,q=q+Math.imul(Fe,et)|0,F=F+Math.imul(he,dt)|0,V=(V=V+Math.imul(he,pt)|0)+Math.imul(ke,dt)|0,q=q+Math.imul(ke,pt)|0,F=F+Math.imul(be,ct)|0,V=(V=V+Math.imul(be,kt)|0)+Math.imul(De,ct)|0,q=q+Math.imul(De,kt)|0;var hn=(Z+(F=F+Math.imul(ne,ft)|0)|0)+((8191&(V=(V=V+Math.imul(ne,bt)|0)+Math.imul(me,ft)|0))<<13)|0;Z=((q=q+Math.imul(me,bt)|0)+(V>>>13)|0)+(hn>>>26)|0,hn&=67108863,F=Math.imul(He,ze),V=(V=Math.imul(He,et))+Math.imul(Ge,ze)|0,q=Math.imul(Ge,et),F=F+Math.imul(Ce,dt)|0,V=(V=V+Math.imul(Ce,pt)|0)+Math.imul(Fe,dt)|0,q=q+Math.imul(Fe,pt)|0,F=F+Math.imul(he,ct)|0,V=(V=V+Math.imul(he,kt)|0)+Math.imul(ke,ct)|0,q=q+Math.imul(ke,kt)|0;var dn=(Z+(F=F+Math.imul(be,ft)|0)|0)+((8191&(V=(V=V+Math.imul(be,bt)|0)+Math.imul(De,ft)|0))<<13)|0;Z=((q=q+Math.imul(De,bt)|0)+(V>>>13)|0)+(dn>>>26)|0,dn&=67108863,F=Math.imul(He,dt),V=(V=Math.imul(He,pt))+Math.imul(Ge,dt)|0,q=Math.imul(Ge,pt),F=F+Math.imul(Ce,ct)|0,V=(V=V+Math.imul(Ce,kt)|0)+Math.imul(Fe,ct)|0,q=q+Math.imul(Fe,kt)|0;var Mn=(Z+(F=F+Math.imul(he,ft)|0)|0)+((8191&(V=(V=V+Math.imul(he,bt)|0)+Math.imul(ke,ft)|0))<<13)|0;Z=((q=q+Math.imul(ke,bt)|0)+(V>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,F=Math.imul(He,ct),V=(V=Math.imul(He,kt))+Math.imul(Ge,ct)|0,q=Math.imul(Ge,kt);var Cn=(Z+(F=F+Math.imul(Ce,ft)|0)|0)+((8191&(V=(V=V+Math.imul(Ce,bt)|0)+Math.imul(Fe,ft)|0))<<13)|0;Z=((q=q+Math.imul(Fe,bt)|0)+(V>>>13)|0)+(Cn>>>26)|0,Cn&=67108863;var Tn=(Z+(F=Math.imul(He,ft))|0)+((8191&(V=(V=Math.imul(He,bt))+Math.imul(Ge,ft)|0))<<13)|0;return Z=((q=Math.imul(Ge,bt))+(V>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,W[0]=It,W[1]=zt,W[2]=Rt,W[3]=Jt,W[4]=qt,W[5]=Wt,W[6]=jt,W[7]=fn,W[8]=xn,W[9]=un,W[10]=Ht,W[11]=nn,W[12]=Kt,W[13]=on,W[14]=hn,W[15]=dn,W[16]=Mn,W[17]=Cn,W[18]=Tn,Z!==0&&(W[19]=Z,N.length++),N};function _(I,H,N){return new h().mulp(I,H,N)}function h(I,H){this.x=I,this.y=H}Math.imul||(m=v),o.prototype.mulTo=function(I,H){var N,F=this.length+I.length;return N=this.length===10&&I.length===10?m(this,I,H):F<63?v(this,I,H):F<1024?function(V,q,te){te.negative=q.negative^V.negative,te.length=V.length+q.length;for(var $=0,W=0,Z=0;Z<te.length-1;Z++){var J=W;W=0;for(var ee=67108863&$,re=Math.min(Z,q.length-1),ae=Math.max(0,Z-V.length+1);ae<=re;ae++){var oe=Z-ae,ce=(0|V.words[oe])*(0|q.words[ae]),pe=67108863&ce;ee=67108863&(pe=pe+ee|0),W+=(J=(J=J+(ce/67108864|0)|0)+(pe>>>26)|0)>>>26,J&=67108863}te.words[Z]=ee,$=J,J=W}return $!==0?te.words[Z]=$:te.length--,te.strip()}(this,I,H):_(this,I,H),N},h.prototype.makeRBT=function(I){for(var H=new Array(I),N=o.prototype._countBits(I)-1,F=0;F<I;F++)H[F]=this.revBin(F,N,I);return H},h.prototype.revBin=function(I,H,N){if(I===0||I===N-1)return I;for(var F=0,V=0;V<H;V++)F|=(1&I)<<H-V-1,I>>=1;return F},h.prototype.permute=function(I,H,N,F,V,q){for(var te=0;te<q;te++)F[te]=H[I[te]],V[te]=N[I[te]]},h.prototype.transform=function(I,H,N,F,V,q){this.permute(q,I,H,N,F,V);for(var te=1;te<V;te<<=1)for(var $=te<<1,W=Math.cos(2*Math.PI/$),Z=Math.sin(2*Math.PI/$),J=0;J<V;J+=$)for(var ee=W,re=Z,ae=0;ae<te;ae++){var oe=N[J+ae],ce=F[J+ae],pe=N[J+ae+te],ve=F[J+ae+te],we=ee*pe-re*ve;ve=ee*ve+re*pe,pe=we,N[J+ae]=oe+pe,F[J+ae]=ce+ve,N[J+ae+te]=oe-pe,F[J+ae+te]=ce-ve,ae!==$&&(we=W*ee-Z*re,re=W*re+Z*ee,ee=we)}},h.prototype.guessLen13b=function(I,H){var N=1|Math.max(H,I),F=1&N,V=0;for(N=N/2|0;N;N>>>=1)V++;return 1<<V+1+F},h.prototype.conjugate=function(I,H,N){if(!(N<=1))for(var F=0;F<N/2;F++){var V=I[F];I[F]=I[N-F-1],I[N-F-1]=V,V=H[F],H[F]=-H[N-F-1],H[N-F-1]=-V}},h.prototype.normalize13b=function(I,H){for(var N=0,F=0;F<H/2;F++){var V=8192*Math.round(I[2*F+1]/H)+Math.round(I[2*F]/H)+N;I[F]=67108863&V,N=V<67108864?0:V/67108864|0}return I},h.prototype.convert13b=function(I,H,N,F){for(var V=0,q=0;q<H;q++)V+=0|I[q],N[2*q]=8191&V,V>>>=13,N[2*q+1]=8191&V,V>>>=13;for(q=2*H;q<F;++q)N[q]=0;n(V===0),n((-8192&V)==0)},h.prototype.stub=function(I){for(var H=new Array(I),N=0;N<I;N++)H[N]=0;return H},h.prototype.mulp=function(I,H,N){var F=2*this.guessLen13b(I.length,H.length),V=this.makeRBT(F),q=this.stub(F),te=new Array(F),$=new Array(F),W=new Array(F),Z=new Array(F),J=new Array(F),ee=new Array(F),re=N.words;re.length=F,this.convert13b(I.words,I.length,te,F),this.convert13b(H.words,H.length,Z,F),this.transform(te,q,$,W,F,V),this.transform(Z,q,J,ee,F,V);for(var ae=0;ae<F;ae++){var oe=$[ae]*J[ae]-W[ae]*ee[ae];W[ae]=$[ae]*ee[ae]+W[ae]*J[ae],$[ae]=oe}return this.conjugate($,W,F),this.transform($,W,re,q,F,V),this.conjugate(re,q,F),this.normalize13b(re,F),N.negative=I.negative^H.negative,N.length=I.length+H.length,N.strip()},o.prototype.mul=function(I){var H=new o(null);return H.words=new Array(this.length+I.length),this.mulTo(I,H)},o.prototype.mulf=function(I){var H=new o(null);return H.words=new Array(this.length+I.length),_(this,I,H)},o.prototype.imul=function(I){return this.clone().mulTo(I,this)},o.prototype.imuln=function(I){n(typeof I=="number"),n(I<67108864);for(var H=0,N=0;N<this.length;N++){var F=(0|this.words[N])*I,V=(67108863&F)+(67108863&H);H>>=26,H+=F/67108864|0,H+=V>>>26,this.words[N]=67108863&V}return H!==0&&(this.words[N]=H,this.length++),this},o.prototype.muln=function(I){return this.clone().imuln(I)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(I){var H=function(q){for(var te=new Array(q.bitLength()),$=0;$<te.length;$++){var W=$/26|0,Z=$%26;te[$]=(q.words[W]&1<<Z)>>>Z}return te}(I);if(H.length===0)return new o(1);for(var N=this,F=0;F<H.length&&H[F]===0;F++,N=N.sqr());if(++F<H.length)for(var V=N.sqr();F<H.length;F++,V=V.sqr())H[F]!==0&&(N=N.mul(V));return N},o.prototype.iushln=function(I){n(typeof I=="number"&&I>=0);var H,N=I%26,F=(I-N)/26,V=67108863>>>26-N<<26-N;if(N!==0){var q=0;for(H=0;H<this.length;H++){var te=this.words[H]&V,$=(0|this.words[H])-te<<N;this.words[H]=$|q,q=te>>>26-N}q&&(this.words[H]=q,this.length++)}if(F!==0){for(H=this.length-1;H>=0;H--)this.words[H+F]=this.words[H];for(H=0;H<F;H++)this.words[H]=0;this.length+=F}return this.strip()},o.prototype.ishln=function(I){return n(this.negative===0),this.iushln(I)},o.prototype.iushrn=function(I,H,N){var F;n(typeof I=="number"&&I>=0),F=H?(H-H%26)/26:0;var V=I%26,q=Math.min((I-V)/26,this.length),te=67108863^67108863>>>V<<V,$=N;if(F-=q,F=Math.max(0,F),$){for(var W=0;W<q;W++)$.words[W]=this.words[W];$.length=q}if(q!==0)if(this.length>q)for(this.length-=q,W=0;W<this.length;W++)this.words[W]=this.words[W+q];else this.words[0]=0,this.length=1;var Z=0;for(W=this.length-1;W>=0&&(Z!==0||W>=F);W--){var J=0|this.words[W];this.words[W]=Z<<26-V|J>>>V,Z=J&te}return $&&Z!==0&&($.words[$.length++]=Z),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(I,H,N){return n(this.negative===0),this.iushrn(I,H,N)},o.prototype.shln=function(I){return this.clone().ishln(I)},o.prototype.ushln=function(I){return this.clone().iushln(I)},o.prototype.shrn=function(I){return this.clone().ishrn(I)},o.prototype.ushrn=function(I){return this.clone().iushrn(I)},o.prototype.testn=function(I){n(typeof I=="number"&&I>=0);var H=I%26,N=(I-H)/26,F=1<<H;return!(this.length<=N||!(this.words[N]&F))},o.prototype.imaskn=function(I){n(typeof I=="number"&&I>=0);var H=I%26,N=(I-H)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=N)return this;if(H!==0&&N++,this.length=Math.min(N,this.length),H!==0){var F=67108863^67108863>>>H<<H;this.words[this.length-1]&=F}return this.strip()},o.prototype.maskn=function(I){return this.clone().imaskn(I)},o.prototype.iaddn=function(I){return n(typeof I=="number"),n(I<67108864),I<0?this.isubn(-I):this.negative!==0?this.length===1&&(0|this.words[0])<I?(this.words[0]=I-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(I),this.negative=1,this):this._iaddn(I)},o.prototype._iaddn=function(I){this.words[0]+=I;for(var H=0;H<this.length&&this.words[H]>=67108864;H++)this.words[H]-=67108864,H===this.length-1?this.words[H+1]=1:this.words[H+1]++;return this.length=Math.max(this.length,H+1),this},o.prototype.isubn=function(I){if(n(typeof I=="number"),n(I<67108864),I<0)return this.iaddn(-I);if(this.negative!==0)return this.negative=0,this.iaddn(I),this.negative=1,this;if(this.words[0]-=I,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var H=0;H<this.length&&this.words[H]<0;H++)this.words[H]+=67108864,this.words[H+1]-=1;return this.strip()},o.prototype.addn=function(I){return this.clone().iaddn(I)},o.prototype.subn=function(I){return this.clone().isubn(I)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(I,H,N){var F,V,q=I.length+N;this._expand(q);var te=0;for(F=0;F<I.length;F++){V=(0|this.words[F+N])+te;var $=(0|I.words[F])*H;te=((V-=67108863&$)>>26)-($/67108864|0),this.words[F+N]=67108863&V}for(;F<this.length-N;F++)te=(V=(0|this.words[F+N])+te)>>26,this.words[F+N]=67108863&V;if(te===0)return this.strip();for(n(te===-1),te=0,F=0;F<this.length;F++)te=(V=-(0|this.words[F])+te)>>26,this.words[F]=67108863&V;return this.negative=1,this.strip()},o.prototype._wordDiv=function(I,H){var N=(this.length,I.length),F=this.clone(),V=I,q=0|V.words[V.length-1];(N=26-this._countBits(q))!=0&&(V=V.ushln(N),F.iushln(N),q=0|V.words[V.length-1]);var te,$=F.length-V.length;if(H!=="mod"){(te=new o(null)).length=$+1,te.words=new Array(te.length);for(var W=0;W<te.length;W++)te.words[W]=0}var Z=F.clone()._ishlnsubmul(V,1,$);Z.negative===0&&(F=Z,te&&(te.words[$]=1));for(var J=$-1;J>=0;J--){var ee=67108864*(0|F.words[V.length+J])+(0|F.words[V.length+J-1]);for(ee=Math.min(ee/q|0,67108863),F._ishlnsubmul(V,ee,J);F.negative!==0;)ee--,F.negative=0,F._ishlnsubmul(V,1,J),F.isZero()||(F.negative^=1);te&&(te.words[J]=ee)}return te&&te.strip(),F.strip(),H!=="div"&&N!==0&&F.iushrn(N),{div:te||null,mod:F}},o.prototype.divmod=function(I,H,N){return n(!I.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:this.negative!==0&&I.negative===0?(q=this.neg().divmod(I,H),H!=="mod"&&(F=q.div.neg()),H!=="div"&&(V=q.mod.neg(),N&&V.negative!==0&&V.iadd(I)),{div:F,mod:V}):this.negative===0&&I.negative!==0?(q=this.divmod(I.neg(),H),H!=="mod"&&(F=q.div.neg()),{div:F,mod:q.mod}):this.negative&I.negative?(q=this.neg().divmod(I.neg(),H),H!=="div"&&(V=q.mod.neg(),N&&V.negative!==0&&V.isub(I)),{div:q.div,mod:V}):I.length>this.length||this.cmp(I)<0?{div:new o(0),mod:this}:I.length===1?H==="div"?{div:this.divn(I.words[0]),mod:null}:H==="mod"?{div:null,mod:new o(this.modn(I.words[0]))}:{div:this.divn(I.words[0]),mod:new o(this.modn(I.words[0]))}:this._wordDiv(I,H);var F,V,q},o.prototype.div=function(I){return this.divmod(I,"div",!1).div},o.prototype.mod=function(I){return this.divmod(I,"mod",!1).mod},o.prototype.umod=function(I){return this.divmod(I,"mod",!0).mod},o.prototype.divRound=function(I){var H=this.divmod(I);if(H.mod.isZero())return H.div;var N=H.div.negative!==0?H.mod.isub(I):H.mod,F=I.ushrn(1),V=I.andln(1),q=N.cmp(F);return q<0||V===1&&q===0?H.div:H.div.negative!==0?H.div.isubn(1):H.div.iaddn(1)},o.prototype.modn=function(I){n(I<=67108863);for(var H=67108864%I,N=0,F=this.length-1;F>=0;F--)N=(H*N+(0|this.words[F]))%I;return N},o.prototype.idivn=function(I){n(I<=67108863);for(var H=0,N=this.length-1;N>=0;N--){var F=(0|this.words[N])+67108864*H;this.words[N]=F/I|0,H=F%I}return this.strip()},o.prototype.divn=function(I){return this.clone().idivn(I)},o.prototype.egcd=function(I){n(I.negative===0),n(!I.isZero());var H=this,N=I.clone();H=H.negative!==0?H.umod(I):H.clone();for(var F=new o(1),V=new o(0),q=new o(0),te=new o(1),$=0;H.isEven()&&N.isEven();)H.iushrn(1),N.iushrn(1),++$;for(var W=N.clone(),Z=H.clone();!H.isZero();){for(var J=0,ee=1;!(H.words[0]&ee)&&J<26;++J,ee<<=1);if(J>0)for(H.iushrn(J);J-- >0;)(F.isOdd()||V.isOdd())&&(F.iadd(W),V.isub(Z)),F.iushrn(1),V.iushrn(1);for(var re=0,ae=1;!(N.words[0]&ae)&&re<26;++re,ae<<=1);if(re>0)for(N.iushrn(re);re-- >0;)(q.isOdd()||te.isOdd())&&(q.iadd(W),te.isub(Z)),q.iushrn(1),te.iushrn(1);H.cmp(N)>=0?(H.isub(N),F.isub(q),V.isub(te)):(N.isub(H),q.isub(F),te.isub(V))}return{a:q,b:te,gcd:N.iushln($)}},o.prototype._invmp=function(I){n(I.negative===0),n(!I.isZero());var H=this,N=I.clone();H=H.negative!==0?H.umod(I):H.clone();for(var F,V=new o(1),q=new o(0),te=N.clone();H.cmpn(1)>0&&N.cmpn(1)>0;){for(var $=0,W=1;!(H.words[0]&W)&&$<26;++$,W<<=1);if($>0)for(H.iushrn($);$-- >0;)V.isOdd()&&V.iadd(te),V.iushrn(1);for(var Z=0,J=1;!(N.words[0]&J)&&Z<26;++Z,J<<=1);if(Z>0)for(N.iushrn(Z);Z-- >0;)q.isOdd()&&q.iadd(te),q.iushrn(1);H.cmp(N)>=0?(H.isub(N),V.isub(q)):(N.isub(H),q.isub(V))}return(F=H.cmpn(1)===0?V:q).cmpn(0)<0&&F.iadd(I),F},o.prototype.gcd=function(I){if(this.isZero())return I.abs();if(I.isZero())return this.abs();var H=this.clone(),N=I.clone();H.negative=0,N.negative=0;for(var F=0;H.isEven()&&N.isEven();F++)H.iushrn(1),N.iushrn(1);for(;;){for(;H.isEven();)H.iushrn(1);for(;N.isEven();)N.iushrn(1);var V=H.cmp(N);if(V<0){var q=H;H=N,N=q}else if(V===0||N.cmpn(1)===0)break;H.isub(N)}return N.iushln(F)},o.prototype.invm=function(I){return this.egcd(I).a.umod(I)},o.prototype.isEven=function(){return(1&this.words[0])==0},o.prototype.isOdd=function(){return(1&this.words[0])==1},o.prototype.andln=function(I){return this.words[0]&I},o.prototype.bincn=function(I){n(typeof I=="number");var H=I%26,N=(I-H)/26,F=1<<H;if(this.length<=N)return this._expand(N+1),this.words[N]|=F,this;for(var V=F,q=N;V!==0&&q<this.length;q++){var te=0|this.words[q];V=(te+=V)>>>26,te&=67108863,this.words[q]=te}return V!==0&&(this.words[q]=V,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(I){var H,N=I<0;if(this.negative!==0&&!N)return-1;if(this.negative===0&&N)return 1;if(this.strip(),this.length>1)H=1;else{N&&(I=-I),n(I<=67108863,"Number is too big");var F=0|this.words[0];H=F===I?0:F<I?-1:1}return this.negative!==0?0|-H:H},o.prototype.cmp=function(I){if(this.negative!==0&&I.negative===0)return-1;if(this.negative===0&&I.negative!==0)return 1;var H=this.ucmp(I);return this.negative!==0?0|-H:H},o.prototype.ucmp=function(I){if(this.length>I.length)return 1;if(this.length<I.length)return-1;for(var H=0,N=this.length-1;N>=0;N--){var F=0|this.words[N],V=0|I.words[N];if(F!==V){F<V?H=-1:F>V&&(H=1);break}}return H},o.prototype.gtn=function(I){return this.cmpn(I)===1},o.prototype.gt=function(I){return this.cmp(I)===1},o.prototype.gten=function(I){return this.cmpn(I)>=0},o.prototype.gte=function(I){return this.cmp(I)>=0},o.prototype.ltn=function(I){return this.cmpn(I)===-1},o.prototype.lt=function(I){return this.cmp(I)===-1},o.prototype.lten=function(I){return this.cmpn(I)<=0},o.prototype.lte=function(I){return this.cmp(I)<=0},o.prototype.eqn=function(I){return this.cmpn(I)===0},o.prototype.eq=function(I){return this.cmp(I)===0},o.red=function(I){return new D(I)},o.prototype.toRed=function(I){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),I.convertTo(this)._forceRed(I)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(I){return this.red=I,this},o.prototype.forceRed=function(I){return n(!this.red,"Already a number in reduction context"),this._forceRed(I)},o.prototype.redAdd=function(I){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,I)},o.prototype.redIAdd=function(I){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,I)},o.prototype.redSub=function(I){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,I)},o.prototype.redISub=function(I){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,I)},o.prototype.redShl=function(I){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,I)},o.prototype.redMul=function(I){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,I),this.red.mul(this,I)},o.prototype.redIMul=function(I){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,I),this.red.imul(this,I)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(I){return n(this.red&&!I.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,I)};var A={k256:null,p224:null,p192:null,p25519:null};function w(I,H){this.name=I,this.p=new o(H,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function L(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function C(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function D(I){if(typeof I=="string"){var H=o._prime(I);this.m=H.p,this.prime=H}else n(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}function G(I){D.call(this,I),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var I=new o(null);return I.words=new Array(Math.ceil(this.n/13)),I},w.prototype.ireduce=function(I){var H,N=I;do this.split(N,this.tmp),H=(N=(N=this.imulK(N)).iadd(this.tmp)).bitLength();while(H>this.n);var F=H<this.n?-1:N.ucmp(this.p);return F===0?(N.words[0]=0,N.length=1):F>0?N.isub(this.p):N.strip!==void 0?N.strip():N._strip(),N},w.prototype.split=function(I,H){I.iushrn(this.n,0,H)},w.prototype.imulK=function(I){return I.imul(this.k)},a(E,w),E.prototype.split=function(I,H){for(var N=4194303,F=Math.min(I.length,9),V=0;V<F;V++)H.words[V]=I.words[V];if(H.length=F,I.length<=9)return I.words[0]=0,void(I.length=1);var q=I.words[9];for(H.words[H.length++]=q&N,V=10;V<I.length;V++){var te=0|I.words[V];I.words[V-10]=(te&N)<<4|q>>>22,q=te}q>>>=22,I.words[V-10]=q,q===0&&I.length>10?I.length-=10:I.length-=9},E.prototype.imulK=function(I){I.words[I.length]=0,I.words[I.length+1]=0,I.length+=2;for(var H=0,N=0;N<I.length;N++){var F=0|I.words[N];H+=977*F,I.words[N]=67108863&H,H=64*F+(H/67108864|0)}return I.words[I.length-1]===0&&(I.length--,I.words[I.length-1]===0&&I.length--),I},a(L,w),a(C,w),a(P,w),P.prototype.imulK=function(I){for(var H=0,N=0;N<I.length;N++){var F=19*(0|I.words[N])+H,V=67108863&F;F>>>=26,I.words[N]=V,H=F}return H!==0&&(I.words[I.length++]=H),I},o._prime=function(I){if(A[I])return A[I];var H;if(I==="k256")H=new E;else if(I==="p224")H=new L;else if(I==="p192")H=new C;else{if(I!=="p25519")throw new Error("Unknown prime "+I);H=new P}return A[I]=H,H},D.prototype._verify1=function(I){n(I.negative===0,"red works only with positives"),n(I.red,"red works only with red numbers")},D.prototype._verify2=function(I,H){n((I.negative|H.negative)==0,"red works only with positives"),n(I.red&&I.red===H.red,"red works only with red numbers")},D.prototype.imod=function(I){return this.prime?this.prime.ireduce(I)._forceRed(this):I.umod(this.m)._forceRed(this)},D.prototype.neg=function(I){return I.isZero()?I.clone():this.m.sub(I)._forceRed(this)},D.prototype.add=function(I,H){this._verify2(I,H);var N=I.add(H);return N.cmp(this.m)>=0&&N.isub(this.m),N._forceRed(this)},D.prototype.iadd=function(I,H){this._verify2(I,H);var N=I.iadd(H);return N.cmp(this.m)>=0&&N.isub(this.m),N},D.prototype.sub=function(I,H){this._verify2(I,H);var N=I.sub(H);return N.cmpn(0)<0&&N.iadd(this.m),N._forceRed(this)},D.prototype.isub=function(I,H){this._verify2(I,H);var N=I.isub(H);return N.cmpn(0)<0&&N.iadd(this.m),N},D.prototype.shl=function(I,H){return this._verify1(I),this.imod(I.ushln(H))},D.prototype.imul=function(I,H){return this._verify2(I,H),this.imod(I.imul(H))},D.prototype.mul=function(I,H){return this._verify2(I,H),this.imod(I.mul(H))},D.prototype.isqr=function(I){return this.imul(I,I.clone())},D.prototype.sqr=function(I){return this.mul(I,I)},D.prototype.sqrt=function(I){if(I.isZero())return I.clone();var H=this.m.andln(3);if(n(H%2==1),H===3){var N=this.m.add(new o(1)).iushrn(2);return this.pow(I,N)}for(var F=this.m.subn(1),V=0;!F.isZero()&&F.andln(1)===0;)V++,F.iushrn(1);n(!F.isZero());var q=new o(1).toRed(this),te=q.redNeg(),$=this.m.subn(1).iushrn(1),W=this.m.bitLength();for(W=new o(2*W*W).toRed(this);this.pow(W,$).cmp(te)!==0;)W.redIAdd(te);for(var Z=this.pow(W,F),J=this.pow(I,F.addn(1).iushrn(1)),ee=this.pow(I,F),re=V;ee.cmp(q)!==0;){for(var ae=ee,oe=0;ae.cmp(q)!==0;oe++)ae=ae.redSqr();n(oe<re);var ce=this.pow(Z,new o(1).iushln(re-oe-1));J=J.redMul(ce),Z=ce.redSqr(),ee=ee.redMul(Z),re=oe}return J},D.prototype.invm=function(I){var H=I._invmp(this.m);return H.negative!==0?(H.negative=0,this.imod(H).redNeg()):this.imod(H)},D.prototype.pow=function(I,H){if(H.isZero())return new o(1).toRed(this);if(H.cmpn(1)===0)return I.clone();var N=new Array(16);N[0]=new o(1).toRed(this),N[1]=I;for(var F=2;F<N.length;F++)N[F]=this.mul(N[F-1],I);var V=N[0],q=0,te=0,$=H.bitLength()%26;for($===0&&($=26),F=H.length-1;F>=0;F--){for(var W=H.words[F],Z=$-1;Z>=0;Z--){var J=W>>Z&1;V!==N[0]&&(V=this.sqr(V)),J!==0||q!==0?(q<<=1,q|=J,(++te==4||F===0&&Z===0)&&(V=this.mul(V,N[q]),te=0,q=0)):te=0}$=26}return V},D.prototype.convertTo=function(I){var H=I.umod(this.m);return H===I?H.clone():H},D.prototype.convertFrom=function(I){var H=I.clone();return H.red=null,H},o.mont=function(I){return new G(I)},a(G,D),G.prototype.convertTo=function(I){return this.imod(I.ushln(this.shift))},G.prototype.convertFrom=function(I){var H=this.imod(I.mul(this.rinv));return H.red=null,H},G.prototype.imul=function(I,H){if(I.isZero()||H.isZero())return I.words[0]=0,I.length=1,I;var N=I.imul(H),F=N.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),V=N.isub(F).iushrn(this.shift),q=V;return V.cmp(this.m)>=0?q=V.isub(this.m):V.cmpn(0)<0&&(q=V.iadd(this.m)),q._forceRed(this)},G.prototype.mul=function(I,H){if(I.isZero()||H.isZero())return new o(0)._forceRed(this);var N=I.mul(H),F=N.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),V=N.isub(F).iushrn(this.shift),q=V;return V.cmp(this.m)>=0?q=V.isub(this.m):V.cmpn(0)<0&&(q=V.iadd(this.m)),q._forceRed(this)},G.prototype.invm=function(I){return this.imod(I._invmp(this.m).mul(this.r2))._forceRed(this)}})(d=e.nmd(d),this)},2692:function(d){d.exports=function(s){var e,i,r,n=s.length,a=0;for(e=0;e<n;++e)a+=s[e].length;var o=new Array(a),u=0;for(e=0;e<n;++e){var p=s[e],c=p.length;for(i=0;i<c;++i){var x=o[u++]=new Array(c-1),g=0;for(r=0;r<c;++r)r!==i&&(x[g++]=p[r]);if(1&i){var f=x[1];x[1]=x[0],x[0]=f}}}return o}},2569:function(d,s,e){d.exports=function(x,g,f){switch(arguments.length){case 1:return i=[],p(y=x,y,c,!0),i;case 2:return typeof g=="function"?p(x,x,g,!0):function(v,m){return i=[],p(v,m,c,!1),i}(x,g);case 3:return p(x,g,f,!1);default:throw new Error("box-intersect: Invalid arguments")}var y};var i,r=e(5306),n=e(1390),a=e(2337);function o(x,g){for(var f=0;f<x;++f)if(!(g[f]<=g[f+x]))return!0;return!1}function u(x,g,f,y){for(var v=0,m=0,_=0,h=x.length;_<h;++_){var A=x[_];if(!o(g,A)){for(var w=0;w<2*g;++w)f[v++]=A[w];y[m++]=_}}return m}function p(x,g,f,y){var v=x.length,m=g.length;if(!(v<=0||m<=0)){var _=x[0].length>>>1;if(!(_<=0)){var h,A=r.mallocDouble(2*_*v),w=r.mallocInt32(v);if((v=u(x,_,A,w))>0){if(_===1&&y)n.init(v),h=n.sweepComplete(_,f,0,v,A,w,0,v,A,w);else{var E=r.mallocDouble(2*_*m),L=r.mallocInt32(m);(m=u(g,_,E,L))>0&&(n.init(v+m),h=_===1?n.sweepBipartite(_,f,0,v,A,w,0,m,E,L):a(_,f,y,v,A,w,m,E,L),r.free(E),r.free(L))}r.free(A),r.free(w)}return h}}}function c(x,g){i.push([x,g])}},7333:function(d,s){function e(i){return i?function(r,n,a,o,u,p,c,x,g,f,y){return u-o>g-x?function(v,m,_,h,A,w,E,L,C,P,D){for(var G=2*v,I=h,H=G*h;I<A;++I,H+=G){var N=w[m+H],F=w[m+H+v],V=E[I];e:for(var q=L,te=G*L;q<C;++q,te+=G){var $=P[m+te],W=P[m+te+v],Z=D[q];if(!(W<N||F<$)){for(var J=m+1;J<v;++J){var ee=w[J+H],re=w[J+v+H],ae=P[J+te],oe=P[J+v+te];if(re<ae||oe<ee)continue e}var ce=_(V,Z);if(ce!==void 0)return ce}}}}(r,n,a,o,u,p,c,x,g,f,y):function(v,m,_,h,A,w,E,L,C,P,D){for(var G=2*v,I=L,H=G*L;I<C;++I,H+=G){var N=P[m+H],F=P[m+H+v],V=D[I];e:for(var q=h,te=G*h;q<A;++q,te+=G){var $=w[m+te],W=w[m+te+v],Z=E[q];if(!(F<$||W<N)){for(var J=m+1;J<v;++J){var ee=w[J+te],re=w[J+v+te],ae=P[J+H],oe=P[J+v+H];if(re<ae||oe<ee)continue e}var ce=_(Z,V);if(ce!==void 0)return ce}}}}(r,n,a,o,u,p,c,x,g,f,y)}:function(r,n,a,o,u,p,c,x,g,f,y,v){return p-u>f-g?o?function(m,_,h,A,w,E,L,C,P,D,G){for(var I=2*m,H=A,N=I*A;H<w;++H,N+=I){var F=E[_+N],V=E[_+N+m],q=L[H];e:for(var te=C,$=I*C;te<P;++te,$+=I){var W=D[_+$],Z=G[te];if(!(W<=F||V<W)){for(var J=_+1;J<m;++J){var ee=E[J+N],re=E[J+m+N],ae=D[J+$],oe=D[J+m+$];if(re<ae||oe<ee)continue e}var ce=h(Z,q);if(ce!==void 0)return ce}}}}(r,n,a,u,p,c,x,g,f,y,v):function(m,_,h,A,w,E,L,C,P,D,G){for(var I=2*m,H=A,N=I*A;H<w;++H,N+=I){var F=E[_+N],V=E[_+N+m],q=L[H];e:for(var te=C,$=I*C;te<P;++te,$+=I){var W=D[_+$],Z=G[te];if(!(W<F||V<W)){for(var J=_+1;J<m;++J){var ee=E[J+N],re=E[J+m+N],ae=D[J+$],oe=D[J+m+$];if(re<ae||oe<ee)continue e}var ce=h(q,Z);if(ce!==void 0)return ce}}}}(r,n,a,u,p,c,x,g,f,y,v):o?function(m,_,h,A,w,E,L,C,P,D,G){for(var I=2*m,H=C,N=I*C;H<P;++H,N+=I){var F=D[_+N],V=G[H];e:for(var q=A,te=I*A;q<w;++q,te+=I){var $=E[_+te],W=E[_+te+m],Z=L[q];if(!(F<=$||W<F)){for(var J=_+1;J<m;++J){var ee=E[J+te],re=E[J+m+te],ae=D[J+N],oe=D[J+m+N];if(re<ae||oe<ee)continue e}var ce=h(V,Z);if(ce!==void 0)return ce}}}}(r,n,a,u,p,c,x,g,f,y,v):function(m,_,h,A,w,E,L,C,P,D,G){for(var I=2*m,H=C,N=I*C;H<P;++H,N+=I){var F=D[_+N],V=G[H];e:for(var q=A,te=I*A;q<w;++q,te+=I){var $=E[_+te],W=E[_+te+m],Z=L[q];if(!(F<$||W<F)){for(var J=_+1;J<m;++J){var ee=E[J+te],re=E[J+m+te],ae=D[J+N],oe=D[J+m+N];if(re<ae||oe<ee)continue e}var ce=h(Z,V);if(ce!==void 0)return ce}}}}(r,n,a,u,p,c,x,g,f,y,v)}}s.partial=e(!1),s.full=e(!0)},2337:function(d,s,e){d.exports=function(I,H,N,F,V,q,te,$,W){(function(Fe,Re){var He=8*r.log2(Re+1)*(Fe+1)|0,Ge=r.nextPow2(w*He);L.length<Ge&&(i.free(L),L=i.mallocInt32(Ge));var $e=r.nextPow2(E*He);C.length<$e&&(i.free(C),C=i.mallocDouble($e))})(I,F+te);var Z,J=0,ee=2*I;for(P(J++,0,0,F,0,te,N?16:0,-1/0,1/0),N||P(J++,0,0,te,0,F,1,-1/0,1/0);J>0;){var re=(J-=1)*w,ae=L[re],oe=L[re+1],ce=L[re+2],pe=L[re+3],ve=L[re+4],we=L[re+5],xe=J*E,ge=C[xe],Oe=C[xe+1],Ae=1&we,Te=!!(16&we),se=V,le=q,ne=$,me=W;if(Ae&&(se=$,le=W,ne=V,me=q),!(2&we&&oe>=(ce=m(I,ae,oe,ce,se,le,Oe))||4&we&&(oe=_(I,ae,oe,ce,se,le,ge))>=ce)){var Ee=ce-oe,be=ve-pe;if(Te){if(I*Ee*(Ee+be)<f){if((Z=u.scanComplete(I,ae,H,oe,ce,se,le,pe,ve,ne,me))!==void 0)return Z;continue}}else{if(I*Math.min(Ee,be)<x){if((Z=a(I,ae,H,Ae,oe,ce,se,le,pe,ve,ne,me))!==void 0)return Z;continue}if(I*Ee*be<g){if((Z=u.scanBipartite(I,ae,H,Ae,oe,ce,se,le,pe,ve,ne,me))!==void 0)return Z;continue}}var De=y(I,ae,oe,ce,se,le,ge,Oe);if(oe<De)if(I*(De-oe)<x){if((Z=o(I,ae+1,H,oe,De,se,le,pe,ve,ne,me))!==void 0)return Z}else if(ae===I-2){if((Z=Ae?u.sweepBipartite(I,H,pe,ve,ne,me,oe,De,se,le):u.sweepBipartite(I,H,oe,De,se,le,pe,ve,ne,me))!==void 0)return Z}else P(J++,ae+1,oe,De,pe,ve,Ae,-1/0,1/0),P(J++,ae+1,pe,ve,oe,De,1^Ae,-1/0,1/0);if(De<ce){var Ue=p(I,ae,pe,ve,ne,me),he=ne[ee*Ue+ae],ke=v(I,ae,Ue,ve,ne,me,he);if(ke<ve&&P(J++,ae,De,ce,ke,ve,(4|Ae)+(Te?16:0),he,Oe),pe<Ue&&P(J++,ae,De,ce,pe,Ue,(2|Ae)+(Te?16:0),ge,he),Ue+1===ke){if((Z=Te?G(I,ae,H,De,ce,se,le,Ue,ne,me[Ue]):D(I,ae,H,Ae,De,ce,se,le,Ue,ne,me[Ue]))!==void 0)return Z}else if(Ue<ke){var _e;if(Te){if(De<(_e=h(I,ae,De,ce,se,le,he))){var Ce=v(I,ae,De,_e,se,le,he);if(ae===I-2){if(De<Ce&&(Z=u.sweepComplete(I,H,De,Ce,se,le,Ue,ke,ne,me))!==void 0||Ce<_e&&(Z=u.sweepBipartite(I,H,Ce,_e,se,le,Ue,ke,ne,me))!==void 0)return Z}else De<Ce&&P(J++,ae+1,De,Ce,Ue,ke,16,-1/0,1/0),Ce<_e&&(P(J++,ae+1,Ce,_e,Ue,ke,0,-1/0,1/0),P(J++,ae+1,Ue,ke,Ce,_e,1,-1/0,1/0))}}else De<(_e=Ae?A(I,ae,De,ce,se,le,he):h(I,ae,De,ce,se,le,he))&&(ae===I-2?Z=Ae?u.sweepBipartite(I,H,Ue,ke,ne,me,De,_e,se,le):u.sweepBipartite(I,H,De,_e,se,le,Ue,ke,ne,me):(P(J++,ae+1,De,_e,Ue,ke,Ae,-1/0,1/0),P(J++,ae+1,Ue,ke,De,_e,1^Ae,-1/0,1/0)))}}}}};var i=e(5306),r=e(2288),n=e(7333),a=n.partial,o=n.full,u=e(1390),p=e(2464),c=e(122),x=128,g=1<<22,f=1<<22,y=c("!(lo>=p0)&&!(p1>=hi)"),v=c("lo===p0"),m=c("lo<p0"),_=c("hi<=p0"),h=c("lo<=p0&&p0<=hi"),A=c("lo<p0&&p0<=hi"),w=6,E=2,L=i.mallocInt32(1024),C=i.mallocDouble(1024);function P(I,H,N,F,V,q,te,$,W){var Z=w*I;L[Z]=H,L[Z+1]=N,L[Z+2]=F,L[Z+3]=V,L[Z+4]=q,L[Z+5]=te;var J=E*I;C[J]=$,C[J+1]=W}function D(I,H,N,F,V,q,te,$,W,Z,J){var ee=2*I,re=W*ee,ae=Z[re+H];e:for(var oe=V,ce=V*ee;oe<q;++oe,ce+=ee){var pe=te[ce+H],ve=te[ce+H+I];if(!(ae<pe||ve<ae||F&&ae===pe)){for(var we,xe=$[oe],ge=H+1;ge<I;++ge){pe=te[ce+ge],ve=te[ce+ge+I];var Oe=Z[re+ge],Ae=Z[re+ge+I];if(ve<Oe||Ae<pe)continue e}if((we=F?N(J,xe):N(xe,J))!==void 0)return we}}}function G(I,H,N,F,V,q,te,$,W,Z){var J=2*I,ee=$*J,re=W[ee+H];e:for(var ae=F,oe=F*J;ae<V;++ae,oe+=J){var ce=te[ae];if(ce!==Z){var pe=q[oe+H],ve=q[oe+H+I];if(!(re<pe||ve<re)){for(var we=H+1;we<I;++we){pe=q[oe+we],ve=q[oe+we+I];var xe=W[ee+we],ge=W[ee+we+I];if(ve<xe||ge<pe)continue e}var Oe=N(ce,Z);if(Oe!==void 0)return Oe}}}}},2464:function(d,s,e){d.exports=function(a,o,u,p,c,x){if(p<=u+1)return u;for(var g=u,f=p,y=p+u>>>1,v=2*a,m=y,_=c[v*y+o];g<f;){if(f-g<r){n(a,o,g,f,c,x),_=c[v*y+o];break}var h=f-g,A=Math.random()*h+g|0,w=c[v*A+o],E=Math.random()*h+g|0,L=c[v*E+o],C=Math.random()*h+g|0,P=c[v*C+o];w<=L?P>=L?(m=E,_=L):w>=P?(m=A,_=w):(m=C,_=P):L>=P?(m=E,_=L):P>=w?(m=A,_=w):(m=C,_=P);for(var D=v*(f-1),G=v*m,I=0;I<v;++I,++D,++G){var H=c[D];c[D]=c[G],c[G]=H}var N=x[f-1];for(x[f-1]=x[m],x[m]=N,D=v*(f-1),G=v*(m=i(a,o,g,f-1,c,x,_)),I=0;I<v;++I,++D,++G)H=c[D],c[D]=c[G],c[G]=H;if(N=x[f-1],x[f-1]=x[m],x[m]=N,y<m){for(f=m-1;g<f&&c[v*(f-1)+o]===_;)f-=1;f+=1}else{if(!(m<y))break;for(g=m+1;g<f&&c[v*g+o]===_;)g+=1}}return i(a,o,u,y,c,x,c[v*y+o])};var i=e(122)("lo<p0"),r=8;function n(a,o,u,p,c,x){for(var g=2*a,f=g*(u+1)+o,y=u+1;y<p;++y,f+=g)for(var v=c[f],m=y,_=g*(y-1);m>u&&c[_+o]>v;--m,_-=g){for(var h=_,A=_+g,w=0;w<g;++w,++h,++A){var E=c[h];c[h]=c[A],c[A]=E}var L=x[m];x[m]=x[m-1],x[m-1]=L}}},122:function(d){d.exports=function(e){return s[e]};var s={"lo===p0":function(e,i,r,n,a,o,u){for(var p=2*e,c=p*r,x=c,g=r,f=i,y=r;n>y;++y,c+=p)if(a[c+f]===u)if(g===y)g+=1,x+=p;else{for(var v=0;p>v;++v){var m=a[c+v];a[c+v]=a[x],a[x++]=m}var _=o[y];o[y]=o[g],o[g++]=_}return g},"lo<p0":function(e,i,r,n,a,o,u){for(var p=2*e,c=p*r,x=c,g=r,f=i,y=r;n>y;++y,c+=p)if(a[c+f]<u)if(g===y)g+=1,x+=p;else{for(var v=0;p>v;++v){var m=a[c+v];a[c+v]=a[x],a[x++]=m}var _=o[y];o[y]=o[g],o[g++]=_}return g},"lo<=p0":function(e,i,r,n,a,o,u){for(var p=2*e,c=p*r,x=c,g=r,f=e+i,y=r;n>y;++y,c+=p)if(a[c+f]<=u)if(g===y)g+=1,x+=p;else{for(var v=0;p>v;++v){var m=a[c+v];a[c+v]=a[x],a[x++]=m}var _=o[y];o[y]=o[g],o[g++]=_}return g},"hi<=p0":function(e,i,r,n,a,o,u){for(var p=2*e,c=p*r,x=c,g=r,f=e+i,y=r;n>y;++y,c+=p)if(a[c+f]<=u)if(g===y)g+=1,x+=p;else{for(var v=0;p>v;++v){var m=a[c+v];a[c+v]=a[x],a[x++]=m}var _=o[y];o[y]=o[g],o[g++]=_}return g},"lo<p0&&p0<=hi":function(e,i,r,n,a,o,u){for(var p=2*e,c=p*r,x=c,g=r,f=i,y=e+i,v=r;n>v;++v,c+=p){var m=a[c+f],_=a[c+y];if(m<u&&u<=_)if(g===v)g+=1,x+=p;else{for(var h=0;p>h;++h){var A=a[c+h];a[c+h]=a[x],a[x++]=A}var w=o[v];o[v]=o[g],o[g++]=w}}return g},"lo<=p0&&p0<=hi":function(e,i,r,n,a,o,u){for(var p=2*e,c=p*r,x=c,g=r,f=i,y=e+i,v=r;n>v;++v,c+=p){var m=a[c+f],_=a[c+y];if(m<=u&&u<=_)if(g===v)g+=1,x+=p;else{for(var h=0;p>h;++h){var A=a[c+h];a[c+h]=a[x],a[x++]=A}var w=o[v];o[v]=o[g],o[g++]=w}}return g},"!(lo>=p0)&&!(p1>=hi)":function(e,i,r,n,a,o,u,p){for(var c=2*e,x=c*r,g=x,f=r,y=i,v=e+i,m=r;n>m;++m,x+=c){var _=a[x+y],h=a[x+v];if(!(_>=u||p>=h))if(f===m)f+=1,g+=c;else{for(var A=0;c>A;++A){var w=a[x+A];a[x+A]=a[g],a[g++]=w}var E=o[m];o[m]=o[f],o[f++]=E}}return f}}},309:function(d){d.exports=function(c,x){x<=4*s?e(0,x-1,c):p(0,x-1,c)};var s=32;function e(c,x,g){for(var f=2*(c+1),y=c+1;y<=x;++y){for(var v=g[f++],m=g[f++],_=y,h=f-2;_-- >c;){var A=g[h-2],w=g[h-1];if(A<v||A===v&&w<m)break;g[h]=A,g[h+1]=w,h-=2}g[h]=v,g[h+1]=m}}function i(c,x,g){x*=2;var f=g[c*=2],y=g[c+1];g[c]=g[x],g[c+1]=g[x+1],g[x]=f,g[x+1]=y}function r(c,x,g){x*=2,g[c*=2]=g[x],g[c+1]=g[x+1]}function n(c,x,g,f){x*=2,g*=2;var y=f[c*=2],v=f[c+1];f[c]=f[x],f[c+1]=f[x+1],f[x]=f[g],f[x+1]=f[g+1],f[g]=y,f[g+1]=v}function a(c,x,g,f,y){x*=2,y[c*=2]=y[x],y[x]=g,y[c+1]=y[x+1],y[x+1]=f}function o(c,x,g){x*=2;var f=g[c*=2],y=g[x];return!(f<y)&&(f!==y||g[c+1]>g[x+1])}function u(c,x,g,f){var y=f[c*=2];return y<x||y===x&&f[c+1]<g}function p(c,x,g){var f=(x-c+1)/6|0,y=c+f,v=x-f,m=c+x>>1,_=m-f,h=m+f,A=y,w=_,E=m,L=h,C=v,P=c+1,D=x-1,G=0;o(A,w,g)&&(G=A,A=w,w=G),o(L,C,g)&&(G=L,L=C,C=G),o(A,E,g)&&(G=A,A=E,E=G),o(w,E,g)&&(G=w,w=E,E=G),o(A,L,g)&&(G=A,A=L,L=G),o(E,L,g)&&(G=E,E=L,L=G),o(w,C,g)&&(G=w,w=C,C=G),o(w,E,g)&&(G=w,w=E,E=G),o(L,C,g)&&(G=L,L=C,C=G);for(var I=g[2*w],H=g[2*w+1],N=g[2*L],F=g[2*L+1],V=2*A,q=2*E,te=2*C,$=2*y,W=2*m,Z=2*v,J=0;J<2;++J){var ee=g[V+J],re=g[q+J],ae=g[te+J];g[$+J]=ee,g[W+J]=re,g[Z+J]=ae}r(_,c,g),r(h,x,g);for(var oe=P;oe<=D;++oe)if(u(oe,I,H,g))oe!==P&&i(oe,P,g),++P;else if(!u(oe,N,F,g))for(;;){if(u(D,N,F,g)){u(D,I,H,g)?(n(oe,P,D,g),++P,--D):(i(oe,D,g),--D);break}if(--D<oe)break}a(c,P-1,I,H,g),a(x,D+1,N,F,g),P-2-c<=s?e(c,P-2,g):p(c,P-2,g),x-(D+2)<=s?e(D+2,x,g):p(D+2,x,g),D-P<=s?e(P,D,g):p(P,D,g)}},1390:function(d,s,e){d.exports={init:function(_){var h=r.nextPow2(_);u.length<h&&(i.free(u),u=i.mallocInt32(h)),p.length<h&&(i.free(p),p=i.mallocInt32(h)),c.length<h&&(i.free(c),c=i.mallocInt32(h)),x.length<h&&(i.free(x),x=i.mallocInt32(h)),g.length<h&&(i.free(g),g=i.mallocInt32(h)),f.length<h&&(i.free(f),f=i.mallocInt32(h));var A=8*h;y.length<A&&(i.free(y),y=i.mallocDouble(A))},sweepBipartite:function(_,h,A,w,E,L,C,P,D,G){for(var I=0,H=2*_,N=_-1,F=H-1,V=A;V<w;++V){var q=L[V],te=H*V;y[I++]=E[te+N],y[I++]=-(q+1),y[I++]=E[te+F],y[I++]=q}for(V=C;V<P;++V){q=G[V]+a;var $=H*V;y[I++]=D[$+N],y[I++]=-q,y[I++]=D[$+F],y[I++]=q}var W=I>>>1;n(y,W);var Z=0,J=0;for(V=0;V<W;++V){var ee=0|y[2*V+1];if(ee>=a)v(c,x,J--,ee=ee-a|0);else if(ee>=0)v(u,p,Z--,ee);else if(ee<=-a){ee=-ee-a|0;for(var re=0;re<Z;++re)if((ae=h(u[re],ee))!==void 0)return ae;m(c,x,J++,ee)}else{for(ee=-ee-1|0,re=0;re<J;++re){var ae;if((ae=h(ee,c[re]))!==void 0)return ae}m(u,p,Z++,ee)}}},sweepComplete:function(_,h,A,w,E,L,C,P,D,G){for(var I=0,H=2*_,N=_-1,F=H-1,V=A;V<w;++V){var q=L[V]+1<<1,te=H*V;y[I++]=E[te+N],y[I++]=-q,y[I++]=E[te+F],y[I++]=q}for(V=C;V<P;++V){q=G[V]+1<<1;var $=H*V;y[I++]=D[$+N],y[I++]=1|-q,y[I++]=D[$+F],y[I++]=1|q}var W=I>>>1;n(y,W);var Z=0,J=0,ee=0;for(V=0;V<W;++V){var re=0|y[2*V+1],ae=1&re;if(V<W-1&&re>>1==y[2*V+3]>>1&&(ae=2,V+=1),re<0){for(var oe=-(re>>1)-1,ce=0;ce<ee;++ce)if((pe=h(g[ce],oe))!==void 0)return pe;if(ae!==0){for(ce=0;ce<Z;++ce)if((pe=h(u[ce],oe))!==void 0)return pe}if(ae!==1)for(ce=0;ce<J;++ce){var pe;if((pe=h(c[ce],oe))!==void 0)return pe}ae===0?m(u,p,Z++,oe):ae===1?m(c,x,J++,oe):ae===2&&m(g,f,ee++,oe)}else oe=(re>>1)-1,ae===0?v(u,p,Z--,oe):ae===1?v(c,x,J--,oe):ae===2&&v(g,f,ee--,oe)}},scanBipartite:function(_,h,A,w,E,L,C,P,D,G,I,H){var N=0,F=2*_,V=h,q=h+_,te=1,$=1;w?$=a:te=a;for(var W=E;W<L;++W){var Z=W+te,J=F*W;y[N++]=C[J+V],y[N++]=-Z,y[N++]=C[J+q],y[N++]=Z}for(W=D;W<G;++W){Z=W+$;var ee=F*W;y[N++]=I[ee+V],y[N++]=-Z}var re=N>>>1;n(y,re);var ae=0;for(W=0;W<re;++W){var oe=0|y[2*W+1];if(oe<0){var ce=!1;if((Z=-oe)>=a?(ce=!w,Z-=a):(ce=!!w,Z-=1),ce)m(u,p,ae++,Z);else{var pe=H[Z],ve=F*Z,we=I[ve+h+1],xe=I[ve+h+1+_];e:for(var ge=0;ge<ae;++ge){var Oe=u[ge],Ae=F*Oe;if(!(xe<C[Ae+h+1]||C[Ae+h+1+_]<we)){for(var Te=h+2;Te<_;++Te)if(I[ve+Te+_]<C[Ae+Te]||C[Ae+Te+_]<I[ve+Te])continue e;var se,le=P[Oe];if((se=w?A(pe,le):A(le,pe))!==void 0)return se}}}}else v(u,p,ae--,oe-te)}},scanComplete:function(_,h,A,w,E,L,C,P,D,G,I){for(var H=0,N=2*_,F=h,V=h+_,q=w;q<E;++q){var te=q+a,$=N*q;y[H++]=L[$+F],y[H++]=-te,y[H++]=L[$+V],y[H++]=te}for(q=P;q<D;++q){te=q+1;var W=N*q;y[H++]=G[W+F],y[H++]=-te}var Z=H>>>1;n(y,Z);var J=0;for(q=0;q<Z;++q){var ee=0|y[2*q+1];if(ee<0)if((te=-ee)>=a)u[J++]=te-a;else{var re=I[te-=1],ae=N*te,oe=G[ae+h+1],ce=G[ae+h+1+_];e:for(var pe=0;pe<J;++pe){var ve=u[pe],we=C[ve];if(we===re)break;var xe=N*ve;if(!(ce<L[xe+h+1]||L[xe+h+1+_]<oe)){for(var ge=h+2;ge<_;++ge)if(G[ae+ge+_]<L[xe+ge]||L[xe+ge+_]<G[ae+ge])continue e;var Oe=A(we,re);if(Oe!==void 0)return Oe}}}else{for(te=ee-a,pe=J-1;pe>=0;--pe)if(u[pe]===te){for(ge=pe+1;ge<J;++ge)u[ge-1]=u[ge];break}--J}}}};var i=e(5306),r=e(2288),n=e(309),a=1<<28,o=1024,u=i.mallocInt32(o),p=i.mallocInt32(o),c=i.mallocInt32(o),x=i.mallocInt32(o),g=i.mallocInt32(o),f=i.mallocInt32(o),y=i.mallocDouble(8192);function v(_,h,A,w){var E=h[w],L=_[A-1];_[E]=L,h[L]=E}function m(_,h,A,w){_[A]=w,h[w]=A}},7761:function(d,s,e){var i=e(9971),r=e(743),n=e(2161),a=e(7098);function o(c){return[Math.min(c[0],c[1]),Math.max(c[0],c[1])]}function u(c,x){return c[0]-x[0]||c[1]-x[1]}function p(c,x,g){return x in c?c[x]:g}d.exports=function(c,x,g){Array.isArray(x)?(g=g||{},x=x||[]):(g=x||{},x=[]);var f=!!p(g,"delaunay",!0),y=!!p(g,"interior",!0),v=!!p(g,"exterior",!0),m=!!p(g,"infinity",!1);if(!y&&!v||c.length===0)return[];var _=i(c,x);if(f||y!==v||m){for(var h=r(c.length,function(E){return E.map(o).sort(u)}(x)),A=0;A<_.length;++A){var w=_[A];h.addTriangle(w[0],w[1],w[2])}return f&&n(c,h),v?y?m?a(h,0,m):h.cells():a(h,1,m):a(h,-1)}return _}},2161:function(d,s,e){var i=e(2227)[4];function r(n,a,o,u,p,c){var x=a.opposite(u,p);if(!(x<0)){if(p<u){var g=u;u=p,p=g,g=c,c=x,x=g}a.isConstraint(u,p)||i(n[u],n[p],n[c],n[x])<0&&o.push(u,p)}}e(5070),d.exports=function(n,a){for(var o=[],u=n.length,p=a.stars,c=0;c<u;++c)for(var x=p[c],g=1;g<x.length;g+=2)if(!((m=x[g])<c||a.isConstraint(c,m))){for(var f=x[g-1],y=-1,v=1;v<x.length;v+=2)if(x[v-1]===m){y=x[v];break}y<0||i(n[c],n[m],n[f],n[y])<0&&o.push(c,m)}for(;o.length>0;){for(var m=o.pop(),_=(f=-1,y=-1,x=p[c=o.pop()],1);_<x.length;_+=2){var h=x[_-1],A=x[_];h===m?y=A:A===m&&(f=h)}f<0||y<0||i(n[c],n[m],n[f],n[y])>=0||(a.flip(c,m),r(n,a,o,f,c,y),r(n,a,o,c,y,f),r(n,a,o,y,m,f),r(n,a,o,m,f,y))}}},7098:function(d,s,e){var i,r=e(5070);function n(o,u,p,c,x,g,f){this.cells=o,this.neighbor=u,this.flags=c,this.constraint=p,this.active=x,this.next=g,this.boundary=f}function a(o,u){return o[0]-u[0]||o[1]-u[1]||o[2]-u[2]}d.exports=function(o,u,p){var c=function(C,P){for(var D=C.cells(),G=D.length,I=0;I<G;++I){var H=(ee=D[I])[0],N=ee[1],F=ee[2];N<F?N<H&&(ee[0]=N,ee[1]=F,ee[2]=H):F<H&&(ee[0]=F,ee[1]=H,ee[2]=N)}D.sort(a);var V=new Array(G);for(I=0;I<V.length;++I)V[I]=0;var q=[],te=[],$=new Array(3*G),W=new Array(3*G),Z=null;P&&(Z=[]);var J=new n(D,$,W,V,q,te,Z);for(I=0;I<G;++I)for(var ee=D[I],re=0;re<3;++re){H=ee[re],N=ee[(re+1)%3];var ae=$[3*I+re]=J.locate(N,H,C.opposite(N,H)),oe=W[3*I+re]=C.isConstraint(H,N);ae<0&&(oe?te.push(I):(q.push(I),V[I]=1),P&&Z.push([N,H,-1]))}return J}(o,p);if(u===0)return p?c.cells.concat(c.boundary):c.cells;for(var x=1,g=c.active,f=c.next,y=c.flags,v=c.cells,m=c.constraint,_=c.neighbor;g.length>0||f.length>0;){for(;g.length>0;){var h=g.pop();if(y[h]!==-x){y[h]=x,v[h];for(var A=0;A<3;++A){var w=_[3*h+A];w>=0&&y[w]===0&&(m[3*h+A]?f.push(w):(g.push(w),y[w]=x))}}}var E=f;f=g,g=E,f.length=0,x=-x}var L=function(C,P,D){for(var G=0,I=0;I<C.length;++I)P[I]===D&&(C[G++]=C[I]);return C.length=G,C}(v,y,u);return p?L.concat(c.boundary):L},n.prototype.locate=(i=[0,0,0],function(o,u,p){var c=o,x=u,g=p;return u<p?u<o&&(c=u,x=p,g=o):p<o&&(c=p,x=o,g=u),c<0?-1:(i[0]=c,i[1]=x,i[2]=g,r.eq(this.cells,i,a))})},9971:function(d,s,e){var i=e(5070),r=e(417)[3];function n(f,y,v,m,_){this.a=f,this.b=y,this.idx=v,this.lowerIds=m,this.upperIds=_}function a(f,y,v,m){this.a=f,this.b=y,this.type=v,this.idx=m}function o(f,y){var v=f.a[0]-y.a[0]||f.a[1]-y.a[1]||f.type-y.type;return v||(f.type!==0&&(v=r(f.a,f.b,y.b))?v:f.idx-y.idx)}function u(f,y){return r(f.a,f.b,y)}function p(f,y,v,m,_){for(var h=i.lt(y,m,u),A=i.gt(y,m,u),w=h;w<A;++w){for(var E=y[w],L=E.lowerIds,C=L.length;C>1&&r(v[L[C-2]],v[L[C-1]],m)>0;)f.push([L[C-1],L[C-2],_]),C-=1;L.length=C,L.push(_);var P=E.upperIds;for(C=P.length;C>1&&r(v[P[C-2]],v[P[C-1]],m)<0;)f.push([P[C-2],P[C-1],_]),C-=1;P.length=C,P.push(_)}}function c(f,y){var v;return(v=f.a[0]<y.a[0]?r(f.a,f.b,y.a):r(y.b,y.a,f.a))?v:(v=y.b[0]<f.b[0]?r(f.a,f.b,y.b):r(y.b,y.a,f.b))||f.idx-y.idx}function x(f,y,v){var m=i.le(f,v,c),_=f[m],h=_.upperIds,A=h[h.length-1];_.upperIds=[A],f.splice(m+1,0,new n(v.a,v.b,v.idx,[A],h))}function g(f,y,v){var m=v.a;v.a=v.b,v.b=m;var _=i.eq(f,v,c),h=f[_];f[_-1].upperIds=h.upperIds,f.splice(_,1)}d.exports=function(f,y){for(var v=f.length,m=y.length,_=[],h=0;h<v;++h)_.push(new a(f[h],null,0,h));for(h=0;h<m;++h){var A=y[h],w=f[A[0]],E=f[A[1]];w[0]<E[0]?_.push(new a(w,E,2,h),new a(E,w,1,h)):w[0]>E[0]&&_.push(new a(E,w,2,h),new a(w,E,1,h))}_.sort(o);for(var L=_[0].a[0]-(1+Math.abs(_[0].a[0]))*Math.pow(2,-52),C=[new n([L,1],[L,0],-1,[],[])],P=[],D=(h=0,_.length);h<D;++h){var G=_[h],I=G.type;I===0?p(P,C,f,G.a,G.idx):I===2?x(C,0,G):g(C,0,G)}return P}},743:function(d,s,e){var i=e(5070);function r(o,u){this.stars=o,this.edges=u}d.exports=function(o,u){for(var p=new Array(o),c=0;c<o;++c)p[c]=[];return new r(p,u)};var n=r.prototype;function a(o,u,p){for(var c=1,x=o.length;c<x;c+=2)if(o[c-1]===u&&o[c]===p)return o[c-1]=o[x-2],o[c]=o[x-1],void(o.length=x-2)}n.isConstraint=function(){var o=[0,0];function u(p,c){return p[0]-c[0]||p[1]-c[1]}return function(p,c){return o[0]=Math.min(p,c),o[1]=Math.max(p,c),i.eq(this.edges,o,u)>=0}}(),n.removeTriangle=function(o,u,p){var c=this.stars;a(c[o],u,p),a(c[u],p,o),a(c[p],o,u)},n.addTriangle=function(o,u,p){var c=this.stars;c[o].push(u,p),c[u].push(p,o),c[p].push(o,u)},n.opposite=function(o,u){for(var p=this.stars[u],c=1,x=p.length;c<x;c+=2)if(p[c]===o)return p[c-1];return-1},n.flip=function(o,u){var p=this.opposite(o,u),c=this.opposite(u,o);this.removeTriangle(o,u,p),this.removeTriangle(u,o,c),this.addTriangle(o,c,p),this.addTriangle(u,p,c)},n.edges=function(){for(var o=this.stars,u=[],p=0,c=o.length;p<c;++p)for(var x=o[p],g=0,f=x.length;g<f;g+=2)u.push([x[g],x[g+1]]);return u},n.cells=function(){for(var o=this.stars,u=[],p=0,c=o.length;p<c;++p)for(var x=o[p],g=0,f=x.length;g<f;g+=2){var y=x[g],v=x[g+1];p<Math.min(y,v)&&u.push([p,y,v])}return u}},9887:function(d){d.exports=function(s){for(var e=1,i=1;i<s.length;++i)for(var r=0;r<i;++r)if(s[i]<s[r])e=-e;else if(s[r]===s[i])return 0;return e}},9243:function(d,s,e){var i=e(3094),r=e(6606);function n(u,p){for(var c=0,x=u.length,g=0;g<x;++g)c+=u[g]*p[g];return c}function a(u){var p=u.length;if(p===0)return[];u[0].length;var c=i([u.length+1,u.length+1],1),x=i([u.length+1],1);c[p][p]=0;for(var g=0;g<p;++g){for(var f=0;f<=g;++f)c[f][g]=c[g][f]=2*n(u[g],u[f]);x[g]=n(u[g],u[g])}var y=r(c,x),v=0,m=y[p+1];for(g=0;g<m.length;++g)v+=m[g];var _=new Array(p);for(g=0;g<p;++g){m=y[g];var h=0;for(f=0;f<m.length;++f)h+=m[f];_[g]=h/v}return _}function o(u){if(u.length===0)return[];for(var p=u[0].length,c=i([p]),x=a(u),g=0;g<u.length;++g)for(var f=0;f<p;++f)c[f]+=u[g][f]*x[g];return c}o.barycenetric=a,d.exports=o},1778:function(d,s,e){d.exports=function(r){for(var n=i(r),a=0,o=0;o<r.length;++o)for(var u=r[o],p=0;p<n.length;++p)a+=Math.pow(u[p]-n[p],2);return Math.sqrt(a/r.length)};var i=e(9243)},197:function(d,s,e){d.exports=function(A,w,E){var L;if(E){L=w;for(var C=new Array(w.length),P=0;P<w.length;++P){var D=w[P];C[P]=[D[0],D[1],E[P]]}w=C}for(var G=function(I,H,N){var F=y(I,[],f(I));return _(H,F,N),!!F}(A,w,!!E);h(A,w,!!E);)G=!0;if(E&&G)for(L.length=0,E.length=0,P=0;P<w.length;++P)D=w[P],L.push([D[0],D[1]]),E.push(D[2]);return G};var i=e(1731),r=e(2569),n=e(4434),a=e(5125),o=e(8846),u=e(7999),p=e(2826),c=e(8551),x=e(5528);function g(A){var w=u(A);return[c(w,-1/0),c(w,1/0)]}function f(A){for(var w=new Array(A.length),E=0;E<A.length;++E){var L=A[E];w[E]=[c(L[0],-1/0),c(L[1],-1/0),c(L[0],1/0),c(L[1],1/0)]}return w}function y(A,w,E){for(var L=w.length,C=new i(L),P=[],D=0;D<w.length;++D){var G=w[D],I=g(G[0]),H=g(G[1]);P.push([c(I[0],-1/0),c(H[0],-1/0),c(I[1],1/0),c(H[1],1/0)])}r(P,function(te,$){C.link(te,$)});var N=!0,F=new Array(L);for(D=0;D<L;++D)(q=C.find(D))!==D&&(N=!1,A[q]=[Math.min(A[D][0],A[q][0]),Math.min(A[D][1],A[q][1])]);if(N)return null;var V=0;for(D=0;D<L;++D){var q;(q=C.find(D))===D?(F[D]=V,A[V++]=A[D]):F[D]=-1}for(A.length=V,D=0;D<L;++D)F[D]<0&&(F[D]=F[C.find(D)]);return F}function v(A,w){return A[0]-w[0]||A[1]-w[1]}function m(A,w){return A[0]-w[0]||A[1]-w[1]||(A[2]<w[2]?-1:A[2]>w[2]?1:0)}function _(A,w,E){if(A.length!==0){if(w)for(var L=0;L<A.length;++L){var C=w[(D=A[L])[0]],P=w[D[1]];D[0]=Math.min(C,P),D[1]=Math.max(C,P)}else for(L=0;L<A.length;++L){var D;C=(D=A[L])[0],P=D[1],D[0]=Math.min(C,P),D[1]=Math.max(C,P)}E?A.sort(m):A.sort(v);var G=1;for(L=1;L<A.length;++L){var I=A[L-1],H=A[L];(H[0]!==I[0]||H[1]!==I[1]||E&&H[2]!==I[2])&&(A[G++]=H)}A.length=G}}function h(A,w,E){var L=function(I,H){for(var N=new Array(H.length),F=0;F<H.length;++F){var V=H[F],q=I[V[0]],te=I[V[1]];N[F]=[c(Math.min(q[0],te[0]),-1/0),c(Math.min(q[1],te[1]),-1/0),c(Math.max(q[0],te[0]),1/0),c(Math.max(q[1],te[1]),1/0)]}return N}(A,w),C=function(I,H,N){var F=[];return r(N,function(V,q){var te=H[V],$=H[q];if(te[0]!==$[0]&&te[0]!==$[1]&&te[1]!==$[0]&&te[1]!==$[1]){var W=I[te[0]],Z=I[te[1]],J=I[$[0]],ee=I[$[1]];n(W,Z,J,ee)&&F.push([V,q])}}),F}(A,w,L),P=function(I,H,N,F){var V=[];return r(N,F,function(q,te){var $=H[q];if($[0]!==te&&$[1]!==te){var W=I[te],Z=I[$[0]],J=I[$[1]];n(Z,J,W,W)&&V.push([q,te])}}),V}(A,w,L,f(A)),D=function(I,H,N,F,V){var q,te,$=I.map(function(se){return[a(se[0]),a(se[1])]});for(q=0;q<N.length;++q){var W=N[q];te=W[0];var Z=W[1],J=H[te],ee=H[Z],re=x(p(I[J[0]]),p(I[J[1]]),p(I[ee[0]]),p(I[ee[1]]));if(re){var ae=I.length;I.push([u(re[0]),u(re[1])]),$.push(re),F.push([te,ae],[Z,ae])}}for(F.sort(function(se,le){if(se[0]!==le[0])return se[0]-le[0];var ne=$[se[1]],me=$[le[1]];return o(ne[0],me[0])||o(ne[1],me[1])}),q=F.length-1;q>=0;--q){var oe=H[te=(Ae=F[q])[0]],ce=oe[0],pe=oe[1],ve=I[ce],we=I[pe];if((ve[0]-we[0]||ve[1]-we[1])<0){var xe=ce;ce=pe,pe=xe}oe[0]=ce;var ge,Oe=oe[1]=Ae[1];for(V&&(ge=oe[2]);q>0&&F[q-1][0]===te;){var Ae,Te=(Ae=F[--q])[1];V?H.push([Oe,Te,ge]):H.push([Oe,Te]),Oe=Te}V?H.push([Oe,pe,ge]):H.push([Oe,pe])}return $}(A,w,C,P,E),G=y(A,D);return _(w,G,E),!!G||C.length>0||P.length>0}},5528:function(d,s,e){d.exports=function(x,g,f,y){var v=o(g,x),m=o(y,f),_=c(v,m);if(a(_)===0)return null;var h=c(m,o(x,f)),A=r(h,_),w=p(v,A);return u(x,w)};var i=e(3962),r=e(9189),n=e(4354),a=e(4951),o=e(6695),u=e(7584),p=e(4469);function c(x,g){return n(i(x[0],g[1]),i(x[1],g[0]))}},5692:function(d){d.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},9156:function(d,s,e){var i=e(5692),r=e(3578);function n(u){return[u[0]/255,u[1]/255,u[2]/255,u[3]]}function a(u){for(var p,c="#",x=0;x<3;++x)c+=("00"+(p=(p=u[x]).toString(16))).substr(p.length);return c}function o(u){return"rgba("+u.join(",")+")"}d.exports=function(u){var p,c,x,g,f,y,v,m,_,h;if(u||(u={}),m=(u.nshades||72)-1,v=u.format||"hex",(y=u.colormap)||(y="jet"),typeof y=="string"){if(y=y.toLowerCase(),!i[y])throw Error(y+" not a supported colorscale");f=i[y]}else{if(!Array.isArray(y))throw Error("unsupported colormap option",y);f=y.slice()}if(f.length>m+1)throw new Error(y+" map requires nshades to be at least size "+f.length);_=Array.isArray(u.alpha)?u.alpha.length!==2?[1,1]:u.alpha.slice():typeof u.alpha=="number"?[u.alpha,u.alpha]:[1,1],p=f.map(function(C){return Math.round(C.index*m)}),_[0]=Math.min(Math.max(_[0],0),1),_[1]=Math.min(Math.max(_[1],0),1);var A=f.map(function(C,P){var D=f[P].index,G=f[P].rgb.slice();return G.length===4&&G[3]>=0&&G[3]<=1||(G[3]=_[0]+(_[1]-_[0])*D),G}),w=[];for(h=0;h<p.length-1;++h){g=p[h+1]-p[h],c=A[h],x=A[h+1];for(var E=0;E<g;E++){var L=E/g;w.push([Math.round(r(c[0],x[0],L)),Math.round(r(c[1],x[1],L)),Math.round(r(c[2],x[2],L)),r(c[3],x[3],L)])}}return w.push(f[f.length-1].rgb.concat(_[1])),v==="hex"?w=w.map(a):v==="rgbaString"?w=w.map(o):v==="float"&&(w=w.map(n)),w}},9398:function(d,s,e){d.exports=function(p,c,x,g){var f=i(c,x,g);if(f===0){var y=r(i(p,c,x)),v=r(i(p,c,g));if(y===v){if(y===0){var m=u(p,c,x);return m===u(p,c,g)?0:m?1:-1}return 0}return v===0?y>0||u(p,c,g)?-1:1:y===0?v>0||u(p,c,x)?1:-1:r(v-y)}var _=i(p,c,x);return _>0?f>0&&i(p,c,g)>0?1:-1:_<0?f>0||i(p,c,g)>0?1:-1:i(p,c,g)>0||u(p,c,x)?1:-1};var i=e(417),r=e(7538),n=e(87),a=e(2019),o=e(9662);function u(p,c,x){var g=n(p[0],-c[0]),f=n(p[1],-c[1]),y=n(x[0],-c[0]),v=n(x[1],-c[1]),m=o(a(g,y),a(f,v));return m[m.length-1]>=0}},7538:function(d){d.exports=function(s){return s<0?-1:s>0?1:0}},9209:function(d){d.exports=function(i,r){var n=i.length,a=i.length-r.length;if(a)return a;switch(n){case 0:return 0;case 1:return i[0]-r[0];case 2:return i[0]+i[1]-r[0]-r[1]||s(i[0],i[1])-s(r[0],r[1]);case 3:var o=i[0]+i[1],u=r[0]+r[1];if(a=o+i[2]-(u+r[2]))return a;var p=s(i[0],i[1]),c=s(r[0],r[1]);return s(p,i[2])-s(c,r[2])||s(p+i[2],o)-s(c+r[2],u);case 4:var x=i[0],g=i[1],f=i[2],y=i[3],v=r[0],m=r[1],_=r[2],h=r[3];return x+g+f+y-(v+m+_+h)||s(x,g,f,y)-s(v,m,_,h,v)||s(x+g,x+f,x+y,g+f,g+y,f+y)-s(v+m,v+_,v+h,m+_,m+h,_+h)||s(x+g+f,x+g+y,x+f+y,g+f+y)-s(v+m+_,v+m+h,v+_+h,m+_+h);default:for(var A=i.slice().sort(e),w=r.slice().sort(e),E=0;E<n;++E)if(a=A[E]-w[E])return a;return 0}};var s=Math.min;function e(i,r){return i-r}},1284:function(d,s,e){var i=e(9209),r=e(9887);d.exports=function(n,a){return i(n,a)||r(n)-r(a)}},5537:function(d,s,e){var i=e(8950),r=e(8722),n=e(3332);d.exports=function(a){var o=a.length;if(o===0)return[];if(o===1)return[[0]];var u=a[0].length;return u===0?[]:u===1?i(a):u===2?r(a):n(a,u)}},8950:function(d){d.exports=function(s){for(var e=0,i=0,r=1;r<s.length;++r)s[r][0]<s[e][0]&&(e=r),s[r][0]>s[i][0]&&(i=r);return e<i?[[e],[i]]:e>i?[[i],[e]]:[[e]]}},8722:function(d,s,e){d.exports=function(r){var n=i(r),a=n.length;if(a<=2)return[];for(var o=new Array(a),u=n[a-1],p=0;p<a;++p){var c=n[p];o[p]=[u,c],u=c}return o};var i=e(3266)},3332:function(d,s,e){d.exports=function(n,a){try{return i(n,!0)}catch{var o=r(n);if(o.length<=a)return[];var u=function(c,x){for(var g=c.length,f=new Array(g),y=0;y<x.length;++y)f[y]=c[x[y]];var v=x.length;for(y=0;y<g;++y)x.indexOf(y)<0&&(f[v++]=c[y]);return f}(n,o);return function(c,x){for(var g=c.length,f=x.length,y=0;y<g;++y)for(var v=c[y],m=0;m<v.length;++m){var _=v[m];if(_<f)v[m]=x[_];else{_-=f;for(var h=0;h<f;++h)_>=x[h]&&(_+=1);v[m]=_}}return c}(i(u,!0),o)}};var i=e(2183),r=e(2153)},9680:function(d){d.exports=function(s,e,i,r,n,a){var o=n-1,u=n*n,p=o*o,c=(1+2*n)*p,x=n*p,g=u*(3-2*n),f=u*o;if(s.length){a||(a=new Array(s.length));for(var y=s.length-1;y>=0;--y)a[y]=c*s[y]+x*e[y]+g*i[y]+f*r[y];return a}return c*s+x*e+g*i+f*r},d.exports.derivative=function(s,e,i,r,n,a){var o=6*n*n-6*n,u=3*n*n-4*n+1,p=-6*n*n+6*n,c=3*n*n-2*n;if(s.length){a||(a=new Array(s.length));for(var x=s.length-1;x>=0;--x)a[x]=o*s[x]+u*e[x]+p*i[x]+c*r[x];return a}return o*s+u*e+p*i[x]+c*r}},4419:function(d,s,e){var i=e(2183),r=e(1215);function n(o,u){this.point=o,this.index=u}function a(o,u){for(var p=o.point,c=u.point,x=p.length,g=0;g<x;++g){var f=c[g]-p[g];if(f)return f}return 0}d.exports=function(o,u){var p=o.length;if(p===0)return[];var c=o[0].length;if(c<1)return[];if(c===1)return function(D,G,I){if(D===1)return I?[[-1,0]]:[];var H=G.map(function(te,$){return[te[0],$]});H.sort(function(te,$){return te[0]-$[0]});for(var N=new Array(D-1),F=1;F<D;++F){var V=H[F-1],q=H[F];N[F-1]=[V[1],q[1]]}return I&&N.push([-1,N[0][1]],[N[D-1][1],-1]),N}(p,o,u);for(var x=new Array(p),g=1,f=0;f<p;++f){for(var y=o[f],v=new Array(c+1),m=0,_=0;_<c;++_){var h=y[_];v[_]=h,m+=h*h}v[c]=m,x[f]=new n(v,f),g=Math.max(m,g)}r(x,a),p=x.length;var A=new Array(p+c+1),w=new Array(p+c+1),E=(c+1)*(c+1)*g,L=new Array(c+1);for(f=0;f<=c;++f)L[f]=0;for(L[c]=E,A[0]=L.slice(),w[0]=-1,f=0;f<=c;++f)(v=L.slice())[f]=1,A[f+1]=v,w[f+1]=-1;for(f=0;f<p;++f){var C=x[f];A[f+c+1]=C.point,w[f+c+1]=C.index}var P=i(A,!1);if(P=u?P.filter(function(D){for(var G=0,I=0;I<=c;++I){var H=w[D[I]];if(H<0&&++G>=2)return!1;D[I]=H}return!0}):P.filter(function(D){for(var G=0;G<=c;++G){var I=w[D[G]];if(I<0)return!1;D[G]=I}return!0}),1&c)for(f=0;f<P.length;++f)v=(C=P[f])[0],C[0]=C[1],C[1]=v;return P}},8362:function(d){var s=!1;if(typeof Float64Array<"u"){var e=new Float64Array(1),i=new Uint32Array(e.buffer);e[0]=1,s=!0,i[1]===1072693248?(d.exports=function(n){return e[0]=n,[i[0],i[1]]},d.exports.pack=function(n,a){return i[0]=n,i[1]=a,e[0]},d.exports.lo=function(n){return e[0]=n,i[0]},d.exports.hi=function(n){return e[0]=n,i[1]}):i[0]===1072693248?(d.exports=function(n){return e[0]=n,[i[1],i[0]]},d.exports.pack=function(n,a){return i[1]=n,i[0]=a,e[0]},d.exports.lo=function(n){return e[0]=n,i[1]},d.exports.hi=function(n){return e[0]=n,i[0]}):s=!1}if(!s){var r=new Buffer(8);d.exports=function(n){return r.writeDoubleLE(n,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},d.exports.pack=function(n,a){return r.writeUInt32LE(n,0,!0),r.writeUInt32LE(a,4,!0),r.readDoubleLE(0,!0)},d.exports.lo=function(n){return r.writeDoubleLE(n,0,!0),r.readUInt32LE(0,!0)},d.exports.hi=function(n){return r.writeDoubleLE(n,0,!0),r.readUInt32LE(4,!0)}}d.exports.sign=function(n){return d.exports.hi(n)>>>31},d.exports.exponent=function(n){return(d.exports.hi(n)<<1>>>21)-1023},d.exports.fraction=function(n){var a=d.exports.lo(n),o=d.exports.hi(n),u=1048575&o;return 2146435072&o&&(u+=1048576),[a,u]},d.exports.denormalized=function(n){return!(2146435072&d.exports.hi(n))}},3094:function(d){function s(e,i,r){var n=0|e[r];if(n<=0)return[];var a,o=new Array(n);if(r===e.length-1)for(a=0;a<n;++a)o[a]=i;else for(a=0;a<n;++a)o[a]=s(e,i,r+1);return o}d.exports=function(e,i){switch(i===void 0&&(i=0),typeof e){case"number":if(e>0)return function(r,n){var a,o;for(a=new Array(r),o=0;o<r;++o)a[o]=n;return a}(0|e,i);break;case"object":if(typeof e.length=="number")return s(e,i,0)}return[]}},8348:function(d,s,e){d.exports=function(r,n){var a=r.length;if(typeof n!="number"){n=0;for(var o=0;o<a;++o){var u=r[o];n=Math.max(n,u[0],u[1])}n=1+(0|n)}n|=0;var p=new Array(n);for(o=0;o<n;++o)p[o]=[];for(o=0;o<a;++o)p[(u=r[o])[0]].push(u[1]),p[u[1]].push(u[0]);for(var c=0;c<n;++c)i(p[c],function(x,g){return x-g});return p};var i=e(1215)},5795:function(d){d.exports=function(s,e,i){var r=e||0,n=i||1;return[[s[12]+s[0],s[13]+s[1],s[14]+s[2],s[15]+s[3]],[s[12]-s[0],s[13]-s[1],s[14]-s[2],s[15]-s[3]],[s[12]+s[4],s[13]+s[5],s[14]+s[6],s[15]+s[7]],[s[12]-s[4],s[13]-s[5],s[14]-s[6],s[15]-s[7]],[r*s[12]+s[8],r*s[13]+s[9],r*s[14]+s[10],r*s[15]+s[11]],[n*s[12]-s[8],n*s[13]-s[9],n*s[14]-s[10],n*s[15]-s[11]]]}},8444:function(d,s,e){d.exports=function(p,c,x){switch(arguments.length){case 0:return new a([0],[0],0);case 1:return typeof p=="number"?new a(g=u(p),g,0):new a(p,u(p.length),0);case 2:var g;if(typeof c=="number")return new a(p,g=u(p.length),+c);x=0;case 3:if(p.length!==c.length)throw new Error("state and velocity lengths must match");return new a(p,c,x)}};var i=e(9680),r=e(5070);function n(p,c,x){return Math.min(c,Math.max(p,x))}function a(p,c,x){this.dimension=p.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var g=0;g<this.dimension;++g)this.bounds[0][g]=-1/0,this.bounds[1][g]=1/0;this._state=p.slice().reverse(),this._velocity=c.slice().reverse(),this._time=[x],this._scratch=[p.slice(),p.slice(),p.slice(),p.slice(),p.slice()]}var o=a.prototype;function u(p){for(var c=new Array(p),x=0;x<p;++x)c[x]=0;return c}o.flush=function(p){var c=r.gt(this._time,p)-1;c<=0||(this._time.splice(0,c),this._state.splice(0,c*this.dimension),this._velocity.splice(0,c*this.dimension))},o.curve=function(p){var c=this._time,x=c.length,g=r.le(c,p),f=this._scratch[0],y=this._state,v=this._velocity,m=this.dimension,_=this.bounds;if(g<0)for(var h=m-1,A=0;A<m;++A,--h)f[A]=y[h];else if(g>=x-1){h=y.length-1;var w=p-c[x-1];for(A=0;A<m;++A,--h)f[A]=y[h]+w*v[h]}else{h=m*(g+1)-1;var E=c[g],L=c[g+1]-E||1,C=this._scratch[1],P=this._scratch[2],D=this._scratch[3],G=this._scratch[4],I=!0;for(A=0;A<m;++A,--h)C[A]=y[h],D[A]=v[h]*L,P[A]=y[h+m],G[A]=v[h+m]*L,I=I&&C[A]===P[A]&&D[A]===G[A]&&D[A]===0;if(I)for(A=0;A<m;++A)f[A]=C[A];else i(C,D,P,G,(p-E)/L,f)}var H=_[0],N=_[1];for(A=0;A<m;++A)f[A]=n(H[A],N[A],f[A]);return f},o.dcurve=function(p){var c=this._time,x=c.length,g=r.le(c,p),f=this._scratch[0],y=this._state,v=this._velocity,m=this.dimension;if(g>=x-1)for(var _=y.length-1,h=(c[x-1],0);h<m;++h,--_)f[h]=v[_];else{_=m*(g+1)-1;var A=c[g],w=c[g+1]-A||1,E=this._scratch[1],L=this._scratch[2],C=this._scratch[3],P=this._scratch[4],D=!0;for(h=0;h<m;++h,--_)E[h]=y[_],C[h]=v[_]*w,L[h]=y[_+m],P[h]=v[_+m]*w,D=D&&E[h]===L[h]&&C[h]===P[h]&&C[h]===0;if(D)for(h=0;h<m;++h)f[h]=0;else for(i.derivative(E,C,L,P,(p-A)/w,f),h=0;h<m;++h)f[h]/=w}return f},o.lastT=function(){var p=this._time;return p[p.length-1]},o.stable=function(){for(var p=this._velocity,c=p.length,x=this.dimension-1;x>=0;--x)if(p[--c])return!1;return!0},o.jump=function(p){var c=this.lastT(),x=this.dimension;if(!(p<c||arguments.length!==x+1)){var g=this._state,f=this._velocity,y=g.length-this.dimension,v=this.bounds,m=v[0],_=v[1];this._time.push(c,p);for(var h=0;h<2;++h)for(var A=0;A<x;++A)g.push(g[y++]),f.push(0);for(this._time.push(p),A=x;A>0;--A)g.push(n(m[A-1],_[A-1],arguments[A])),f.push(0)}},o.push=function(p){var c=this.lastT(),x=this.dimension;if(!(p<c||arguments.length!==x+1)){var g=this._state,f=this._velocity,y=g.length-this.dimension,v=p-c,m=this.bounds,_=m[0],h=m[1],A=v>1e-6?1/v:0;this._time.push(p);for(var w=x;w>0;--w){var E=n(_[w-1],h[w-1],arguments[w]);g.push(E),f.push((E-g[y++])*A)}}},o.set=function(p){var c=this.dimension;if(!(p<this.lastT()||arguments.length!==c+1)){var x=this._state,g=this._velocity,f=this.bounds,y=f[0],v=f[1];this._time.push(p);for(var m=c;m>0;--m)x.push(n(y[m-1],v[m-1],arguments[m])),g.push(0)}},o.move=function(p){var c=this.lastT(),x=this.dimension;if(!(p<=c||arguments.length!==x+1)){var g=this._state,f=this._velocity,y=g.length-this.dimension,v=this.bounds,m=v[0],_=v[1],h=p-c,A=h>1e-6?1/h:0;this._time.push(p);for(var w=x;w>0;--w){var E=arguments[w];g.push(n(m[w-1],_[w-1],g[y++]+E)),f.push(E*A)}}},o.idle=function(p){var c=this.lastT();if(!(p<c)){var x=this.dimension,g=this._state,f=this._velocity,y=g.length-x,v=this.bounds,m=v[0],_=v[1],h=p-c;this._time.push(p);for(var A=x-1;A>=0;--A)g.push(n(m[A],_[A],g[y]+h*f[y])),f.push(0),y+=1}}},7080:function(d){function s(y,v,m,_,h,A){this._color=y,this.key=v,this.value=m,this.left=_,this.right=h,this._count=A}function e(y){return new s(y._color,y.key,y.value,y.left,y.right,y._count)}function i(y,v){return new s(y,v.key,v.value,v.left,v.right,v._count)}function r(y){y._count=1+(y.left?y.left._count:0)+(y.right?y.right._count:0)}function n(y,v){this._compare=y,this.root=v}d.exports=function(y){return new n(y||f,null)};var a=n.prototype;function o(y,v){var m;return v.left&&(m=o(y,v.left))?m:(m=y(v.key,v.value))||(v.right?o(y,v.right):void 0)}function u(y,v,m,_){if(v(y,_.key)<=0){var h;if(_.left&&(h=u(y,v,m,_.left))||(h=m(_.key,_.value)))return h}if(_.right)return u(y,v,m,_.right)}function p(y,v,m,_,h){var A,w=m(y,h.key),E=m(v,h.key);if(w<=0&&(h.left&&(A=p(y,v,m,_,h.left))||E>0&&(A=_(h.key,h.value))))return A;if(E>0&&h.right)return p(y,v,m,_,h.right)}function c(y,v){this.tree=y,this._stack=v}Object.defineProperty(a,"keys",{get:function(){var y=[];return this.forEach(function(v,m){y.push(v)}),y}}),Object.defineProperty(a,"values",{get:function(){var y=[];return this.forEach(function(v,m){y.push(m)}),y}}),Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}}),a.insert=function(y,v){for(var m=this._compare,_=this.root,h=[],A=[];_;){var w=m(y,_.key);h.push(_),A.push(w),_=w<=0?_.left:_.right}h.push(new s(0,y,v,null,null,1));for(var E=h.length-2;E>=0;--E)_=h[E],A[E]<=0?h[E]=new s(_._color,_.key,_.value,h[E+1],_.right,_._count+1):h[E]=new s(_._color,_.key,_.value,_.left,h[E+1],_._count+1);for(E=h.length-1;E>1;--E){var L=h[E-1];if(_=h[E],L._color===1||_._color===1)break;var C=h[E-2];if(C.left===L)if(L.left===_){if(!(P=C.right)||P._color!==0){C._color=0,C.left=L.right,L._color=1,L.right=C,h[E-2]=L,h[E-1]=_,r(C),r(L),E>=3&&((D=h[E-3]).left===C?D.left=L:D.right=L);break}L._color=1,C.right=i(1,P),C._color=0,E-=1}else{if(!(P=C.right)||P._color!==0){L.right=_.left,C._color=0,C.left=_.right,_._color=1,_.left=L,_.right=C,h[E-2]=_,h[E-1]=L,r(C),r(L),r(_),E>=3&&((D=h[E-3]).left===C?D.left=_:D.right=_);break}L._color=1,C.right=i(1,P),C._color=0,E-=1}else if(L.right===_){if(!(P=C.left)||P._color!==0){C._color=0,C.right=L.left,L._color=1,L.left=C,h[E-2]=L,h[E-1]=_,r(C),r(L),E>=3&&((D=h[E-3]).right===C?D.right=L:D.left=L);break}L._color=1,C.left=i(1,P),C._color=0,E-=1}else{var P;if(!(P=C.left)||P._color!==0){var D;L.left=_.right,C._color=0,C.right=_.left,_._color=1,_.right=L,_.left=C,h[E-2]=_,h[E-1]=L,r(C),r(L),r(_),E>=3&&((D=h[E-3]).right===C?D.right=_:D.left=_);break}L._color=1,C.left=i(1,P),C._color=0,E-=1}}return h[0]._color=1,new n(m,h[0])},a.forEach=function(y,v,m){if(this.root)switch(arguments.length){case 1:return o(y,this.root);case 2:return u(v,this._compare,y,this.root);case 3:return this._compare(v,m)>=0?void 0:p(v,m,this._compare,y,this.root)}},Object.defineProperty(a,"begin",{get:function(){for(var y=[],v=this.root;v;)y.push(v),v=v.left;return new c(this,y)}}),Object.defineProperty(a,"end",{get:function(){for(var y=[],v=this.root;v;)y.push(v),v=v.right;return new c(this,y)}}),a.at=function(y){if(y<0)return new c(this,[]);for(var v=this.root,m=[];;){if(m.push(v),v.left){if(y<v.left._count){v=v.left;continue}y-=v.left._count}if(!y)return new c(this,m);if(y-=1,!v.right||y>=v.right._count)break;v=v.right}return new c(this,[])},a.ge=function(y){for(var v=this._compare,m=this.root,_=[],h=0;m;){var A=v(y,m.key);_.push(m),A<=0&&(h=_.length),m=A<=0?m.left:m.right}return _.length=h,new c(this,_)},a.gt=function(y){for(var v=this._compare,m=this.root,_=[],h=0;m;){var A=v(y,m.key);_.push(m),A<0&&(h=_.length),m=A<0?m.left:m.right}return _.length=h,new c(this,_)},a.lt=function(y){for(var v=this._compare,m=this.root,_=[],h=0;m;){var A=v(y,m.key);_.push(m),A>0&&(h=_.length),m=A<=0?m.left:m.right}return _.length=h,new c(this,_)},a.le=function(y){for(var v=this._compare,m=this.root,_=[],h=0;m;){var A=v(y,m.key);_.push(m),A>=0&&(h=_.length),m=A<0?m.left:m.right}return _.length=h,new c(this,_)},a.find=function(y){for(var v=this._compare,m=this.root,_=[];m;){var h=v(y,m.key);if(_.push(m),h===0)return new c(this,_);m=h<=0?m.left:m.right}return new c(this,[])},a.remove=function(y){var v=this.find(y);return v?v.remove():this},a.get=function(y){for(var v=this._compare,m=this.root;m;){var _=v(y,m.key);if(_===0)return m.value;m=_<=0?m.left:m.right}};var x=c.prototype;function g(y,v){y.key=v.key,y.value=v.value,y.left=v.left,y.right=v.right,y._color=v._color,y._count=v._count}function f(y,v){return y<v?-1:y>v?1:0}Object.defineProperty(x,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(x,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),x.clone=function(){return new c(this.tree,this._stack.slice())},x.remove=function(){var y=this._stack;if(y.length===0)return this.tree;var v=new Array(y.length),m=y[y.length-1];v[v.length-1]=new s(m._color,m.key,m.value,m.left,m.right,m._count);for(var _=y.length-2;_>=0;--_)(m=y[_]).left===y[_+1]?v[_]=new s(m._color,m.key,m.value,v[_+1],m.right,m._count):v[_]=new s(m._color,m.key,m.value,m.left,v[_+1],m._count);if((m=v[v.length-1]).left&&m.right){var h=v.length;for(m=m.left;m.right;)v.push(m),m=m.right;var A=v[h-1];for(v.push(new s(m._color,A.key,A.value,m.left,m.right,m._count)),v[h-1].key=m.key,v[h-1].value=m.value,_=v.length-2;_>=h;--_)m=v[_],v[_]=new s(m._color,m.key,m.value,m.left,v[_+1],m._count);v[h-1].left=v[h]}if((m=v[v.length-1])._color===0){var w=v[v.length-2];for(w.left===m?w.left=null:w.right===m&&(w.right=null),v.pop(),_=0;_<v.length;++_)v[_]._count--;return new n(this.tree._compare,v[0])}if(m.left||m.right){for(m.left?g(m,m.left):m.right&&g(m,m.right),m._color=1,_=0;_<v.length-1;++_)v[_]._count--;return new n(this.tree._compare,v[0])}if(v.length===1)return new n(this.tree._compare,null);for(_=0;_<v.length;++_)v[_]._count--;var E=v[v.length-2];return function(L){for(var C,P,D,G,I=L.length-1;I>=0;--I){if(C=L[I],I===0)return void(C._color=1);if((P=L[I-1]).left===C){if((D=P.right).right&&D.right._color===0)return G=(D=P.right=e(D)).right=e(D.right),P.right=D.left,D.left=P,D.right=G,D._color=P._color,C._color=1,P._color=1,G._color=1,r(P),r(D),I>1&&((H=L[I-2]).left===P?H.left=D:H.right=D),void(L[I-1]=D);if(D.left&&D.left._color===0)return G=(D=P.right=e(D)).left=e(D.left),P.right=G.left,D.left=G.right,G.left=P,G.right=D,G._color=P._color,P._color=1,D._color=1,C._color=1,r(P),r(D),r(G),I>1&&((H=L[I-2]).left===P?H.left=G:H.right=G),void(L[I-1]=G);if(D._color===1){if(P._color===0)return P._color=1,void(P.right=i(0,D));P.right=i(0,D);continue}D=e(D),P.right=D.left,D.left=P,D._color=P._color,P._color=0,r(P),r(D),I>1&&((H=L[I-2]).left===P?H.left=D:H.right=D),L[I-1]=D,L[I]=P,I+1<L.length?L[I+1]=C:L.push(C),I+=2}else{if((D=P.left).left&&D.left._color===0)return G=(D=P.left=e(D)).left=e(D.left),P.left=D.right,D.right=P,D.left=G,D._color=P._color,C._color=1,P._color=1,G._color=1,r(P),r(D),I>1&&((H=L[I-2]).right===P?H.right=D:H.left=D),void(L[I-1]=D);if(D.right&&D.right._color===0)return G=(D=P.left=e(D)).right=e(D.right),P.left=G.right,D.right=G.left,G.right=P,G.left=D,G._color=P._color,P._color=1,D._color=1,C._color=1,r(P),r(D),r(G),I>1&&((H=L[I-2]).right===P?H.right=G:H.left=G),void(L[I-1]=G);if(D._color===1){if(P._color===0)return P._color=1,void(P.left=i(0,D));P.left=i(0,D);continue}var H;D=e(D),P.left=D.right,D.right=P,D._color=P._color,P._color=0,r(P),r(D),I>1&&((H=L[I-2]).right===P?H.right=D:H.left=D),L[I-1]=D,L[I]=P,I+1<L.length?L[I+1]=C:L.push(C),I+=2}}}(v),E.left===m?E.left=null:E.right=null,new n(this.tree._compare,v[0])},Object.defineProperty(x,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(x,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(x,"index",{get:function(){var y=0,v=this._stack;if(v.length===0){var m=this.tree.root;return m?m._count:0}v[v.length-1].left&&(y=v[v.length-1].left._count);for(var _=v.length-2;_>=0;--_)v[_+1]===v[_].right&&(++y,v[_].left&&(y+=v[_].left._count));return y},enumerable:!0}),x.next=function(){var y=this._stack;if(y.length!==0){var v=y[y.length-1];if(v.right)for(v=v.right;v;)y.push(v),v=v.left;else for(y.pop();y.length>0&&y[y.length-1].right===v;)v=y[y.length-1],y.pop()}},Object.defineProperty(x,"hasNext",{get:function(){var y=this._stack;if(y.length===0)return!1;if(y[y.length-1].right)return!0;for(var v=y.length-1;v>0;--v)if(y[v-1].left===y[v])return!0;return!1}}),x.update=function(y){var v=this._stack;if(v.length===0)throw new Error("Can't update empty node!");var m=new Array(v.length),_=v[v.length-1];m[m.length-1]=new s(_._color,_.key,y,_.left,_.right,_._count);for(var h=v.length-2;h>=0;--h)(_=v[h]).left===v[h+1]?m[h]=new s(_._color,_.key,_.value,m[h+1],_.right,_._count):m[h]=new s(_._color,_.key,_.value,_.left,m[h+1],_._count);return new n(this.tree._compare,m[0])},x.prev=function(){var y=this._stack;if(y.length!==0){var v=y[y.length-1];if(v.left)for(v=v.left;v;)y.push(v),v=v.right;else for(y.pop();y.length>0&&y[y.length-1].left===v;)v=y[y.length-1],y.pop()}},Object.defineProperty(x,"hasPrev",{get:function(){var y=this._stack;if(y.length===0)return!1;if(y[y.length-1].left)return!0;for(var v=y.length-1;v>0;--v)if(y[v-1].right===y[v])return!0;return!1}})},7453:function(d,s,e){d.exports=function(w,E){var L=new c(w);return L.update(E),L};var i=e(9557),r=e(1681),n=e(1011),a=e(2864),o=e(8468),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function p(w,E){return w[0]=E[0],w[1]=E[1],w[2]=E[2],w}function c(w){this.gl=w,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=n(w)}var x=c.prototype;function g(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}x.update=function(w){function E(te,$,W){if(W in w){var Z,J=w[W],ee=this[W];(te?Array.isArray(J)&&Array.isArray(J[0]):Array.isArray(J))?this[W]=Z=[$(J[0]),$(J[1]),$(J[2])]:this[W]=Z=[$(J),$(J),$(J)];for(var re=0;re<3;++re)if(Z[re]!==ee[re])return!0}return!1}w=w||{};var L,C=E.bind(this,!1,Number),P=E.bind(this,!1,Boolean),D=E.bind(this,!1,String),G=E.bind(this,!0,function(te){if(Array.isArray(te)){if(te.length===3)return[+te[0],+te[1],+te[2],1];if(te.length===4)return[+te[0],+te[1],+te[2],+te[3]]}return[0,0,0,1]}),I=!1,H=!1;if("bounds"in w)for(var N=w.bounds,F=0;F<2;++F)for(var V=0;V<3;++V)N[F][V]!==this.bounds[F][V]&&(H=!0),this.bounds[F][V]=N[F][V];if("ticks"in w)for(L=w.ticks,I=!0,this.autoTicks=!1,F=0;F<3;++F)this.tickSpacing[F]=0;else C("tickSpacing")&&(this.autoTicks=!0,H=!0);if(this._firstInit&&("ticks"in w||"tickSpacing"in w||(this.autoTicks=!0),H=!0,I=!0,this._firstInit=!1),H&&this.autoTicks&&(L=o.create(this.bounds,this.tickSpacing),I=!0),I){for(F=0;F<3;++F)L[F].sort(function(te,$){return te.x-$.x});o.equal(L,this.ticks)?I=!1:this.ticks=L}P("tickEnable"),D("tickFont")&&(I=!0),C("tickSize"),C("tickAngle"),C("tickPad"),G("tickColor");var q=D("labels");D("labelFont")&&(q=!0),P("labelEnable"),C("labelSize"),C("labelPad"),G("labelColor"),P("lineEnable"),P("lineMirror"),C("lineWidth"),G("lineColor"),P("lineTickEnable"),P("lineTickMirror"),C("lineTickLength"),C("lineTickWidth"),G("lineTickColor"),P("gridEnable"),C("gridWidth"),G("gridColor"),P("zeroEnable"),G("zeroLineColor"),C("zeroLineWidth"),P("backgroundEnable"),G("backgroundColor"),this._text?this._text&&(q||I)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=i(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&I&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=r(this.gl,this.bounds,this.ticks))};var f=[new g,new g,new g];function y(w,E,L,C,P){for(var D=w.primalOffset,G=w.primalMinor,I=w.mirrorOffset,H=w.mirrorMinor,N=C[E],F=0;F<3;++F)if(E!==F){var V=D,q=I,te=G,$=H;N&1<<F&&(V=I,q=D,te=H,$=G),V[F]=L[0][F],q[F]=L[1][F],P[F]>0?(te[F]=-1,$[F]=0):(te[F]=0,$[F]=1)}}var v=[0,0,0],m={model:u,view:u,projection:u,_ortho:!1};x.isOpaque=function(){return!0},x.isTransparent=function(){return!1},x.drawTransparent=function(w){};var _=[0,0,0],h=[0,0,0],A=[0,0,0];x.draw=function(w){w=w||m;for(var E=this.gl,L=w.model||u,C=w.view||u,P=w.projection||u,D=this.bounds,G=w._ortho||!1,I=a(L,C,P,D,G),H=I.cubeEdges,N=I.axis,F=C[12],V=C[13],q=C[14],te=C[15],$=(G?2:1)*this.pixelRatio*(P[3]*F+P[7]*V+P[11]*q+P[15]*te)/E.drawingBufferHeight,W=0;W<3;++W)this.lastCubeProps.cubeEdges[W]=H[W],this.lastCubeProps.axis[W]=N[W];var Z=f;for(W=0;W<3;++W)y(f[W],W,this.bounds,H,N);E=this.gl;var J,ee,re,ae=v;for(W=0;W<3;++W)this.backgroundEnable[W]?ae[W]=N[W]:ae[W]=0;for(this._background.draw(L,C,P,D,ae,this.backgroundColor),this._lines.bind(L,C,P,this),W=0;W<3;++W){var oe=[0,0,0];N[W]>0?oe[W]=D[1][W]:oe[W]=D[0][W];for(var ce=0;ce<2;++ce){var pe=(W+1+ce)%3,ve=(W+1+(1^ce))%3;this.gridEnable[pe]&&this._lines.drawGrid(pe,ve,this.bounds,oe,this.gridColor[pe],this.gridWidth[pe]*this.pixelRatio)}for(ce=0;ce<2;++ce)pe=(W+1+ce)%3,ve=(W+1+(1^ce))%3,this.zeroEnable[ve]&&Math.min(D[0][ve],D[1][ve])<=0&&Math.max(D[0][ve],D[1][ve])>=0&&this._lines.drawZero(pe,ve,this.bounds,oe,this.zeroLineColor[ve],this.zeroLineWidth[ve]*this.pixelRatio)}for(W=0;W<3;++W){this.lineEnable[W]&&this._lines.drawAxisLine(W,this.bounds,Z[W].primalOffset,this.lineColor[W],this.lineWidth[W]*this.pixelRatio),this.lineMirror[W]&&this._lines.drawAxisLine(W,this.bounds,Z[W].mirrorOffset,this.lineColor[W],this.lineWidth[W]*this.pixelRatio);var we=p(_,Z[W].primalMinor),xe=p(h,Z[W].mirrorMinor),ge=this.lineTickLength;for(ce=0;ce<3;++ce){var Oe=$/L[5*ce];we[ce]*=ge[ce]*Oe,xe[ce]*=ge[ce]*Oe}this.lineTickEnable[W]&&this._lines.drawAxisTicks(W,Z[W].primalOffset,we,this.lineTickColor[W],this.lineTickWidth[W]*this.pixelRatio),this.lineTickMirror[W]&&this._lines.drawAxisTicks(W,Z[W].mirrorOffset,xe,this.lineTickColor[W],this.lineTickWidth[W]*this.pixelRatio)}function Ae(Ee){(re=[0,0,0])[Ee]=1}function Te(Ee,be,De){var Ue=(Ee+1)%3,he=(Ee+2)%3,ke=be[Ue],_e=be[he],Ce=De[Ue],Fe=De[he];ke>0&&Fe>0||ke>0&&Fe<0||ke<0&&Fe>0||ke<0&&Fe<0?Ae(Ue):(_e>0&&Ce>0||_e>0&&Ce<0||_e<0&&Ce>0||_e<0&&Ce<0)&&Ae(he)}for(this._lines.unbind(),this._text.bind(L,C,P,this.pixelRatio),W=0;W<3;++W){var se=Z[W].primalMinor,le=Z[W].mirrorMinor,ne=p(A,Z[W].primalOffset);for(ce=0;ce<3;++ce)this.lineTickEnable[W]&&(ne[ce]+=$*se[ce]*Math.max(this.lineTickLength[ce],0)/L[5*ce]);var me=[0,0,0];if(me[W]=1,this.tickEnable[W]){for(this.tickAngle[W]===-3600?(this.tickAngle[W]=0,this.tickAlign[W]="auto"):this.tickAlign[W]=-1,ee=1,(J=[this.tickAlign[W],.5,ee])[0]==="auto"?J[0]=0:J[0]=parseInt(""+J[0]),re=[0,0,0],Te(W,se,le),ce=0;ce<3;++ce)ne[ce]+=$*se[ce]*this.tickPad[ce]/L[5*ce];this._text.drawTicks(W,this.tickSize[W],this.tickAngle[W],ne,this.tickColor[W],me,re,J)}if(this.labelEnable[W]){for(ee=0,re=[0,0,0],this.labels[W].length>4&&(Ae(W),ee=1),(J=[this.labelAlign[W],.5,ee])[0]==="auto"?J[0]=0:J[0]=parseInt(""+J[0]),ce=0;ce<3;++ce)ne[ce]+=$*se[ce]*this.labelPad[ce]/L[5*ce];ne[W]+=.5*(D[0][W]+D[1][W]),this._text.drawLabel(W,this.labelSize[W],this.labelAngle[W],ne,this.labelColor[W],[0,0,0],re,J)}}this._text.unbind()},x.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},1011:function(d,s,e){d.exports=function(u){for(var p=[],c=[],x=0,g=0;g<3;++g)for(var f=(g+1)%3,y=(g+2)%3,v=[0,0,0],m=[0,0,0],_=-1;_<=1;_+=2){c.push(x,x+2,x+1,x+1,x+2,x+3),v[g]=_,m[g]=_;for(var h=-1;h<=1;h+=2){v[f]=h;for(var A=-1;A<=1;A+=2)v[y]=A,p.push(v[0],v[1],v[2],m[0],m[1],m[2]),x+=1}var w=f;f=y,y=w}var E=i(u,new Float32Array(p)),L=i(u,new Uint16Array(c),u.ELEMENT_ARRAY_BUFFER),C=r(u,[{buffer:E,type:u.FLOAT,size:3,offset:0,stride:24},{buffer:E,type:u.FLOAT,size:3,offset:12,stride:24}],L),P=n(u);return P.attributes.position.location=0,P.attributes.normal.location=1,new a(u,E,C,P)};var i=e(5827),r=e(2944),n=e(1943).bg;function a(u,p,c,x){this.gl=u,this.buffer=p,this.vao=c,this.shader=x}var o=a.prototype;o.draw=function(u,p,c,x,g,f){for(var y=!1,v=0;v<3;++v)y=y||g[v];if(y){var m=this.gl;m.enable(m.POLYGON_OFFSET_FILL),m.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:u,view:p,projection:c,bounds:x,enable:g,colors:f},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),m.disable(m.POLYGON_OFFSET_FILL)}},o.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},2864:function(d,s,e){d.exports=function(h,A,w,E,L){r(o,A,h),r(o,w,o);for(var C=0,P=0;P<2;++P){c[2]=E[P][2];for(var D=0;D<2;++D){c[1]=E[D][1];for(var G=0;G<2;++G)c[0]=E[G][0],g(u[C],c,o),C+=1}}var I=-1;for(P=0;P<8;++P){for(var H=u[P][3],N=0;N<3;++N)p[P][N]=u[P][N]/H;L&&(p[P][2]*=-1),H<0&&(I<0||p[P][2]<p[I][2])&&(I=P)}if(I<0){I=0;for(var F=0;F<3;++F){for(var V=(F+2)%3,q=(F+1)%3,te=-1,$=-1,W=0;W<2;++W){var Z=(ee=W<<F)+(W<<V)+(1-W<<q),J=ee+(1-W<<V)+(W<<q);a(p[ee],p[Z],p[J],x)<0||(W?te=1:$=1)}if(te<0||$<0)$>te&&(I|=1<<F);else{for(W=0;W<2;++W){Z=(ee=W<<F)+(W<<V)+(1-W<<q),J=ee+(1-W<<V)+(W<<q);var ee,re=y([u[ee],u[Z],u[J],u[ee+(1<<V)+(1<<q)]]);W?te=re:$=re}$>te&&(I|=1<<F)}}}var ae=7^I,oe=-1;for(P=0;P<8;++P)P!==I&&P!==ae&&(oe<0||p[oe][1]>p[P][1])&&(oe=P);var ce=-1;for(P=0;P<3;++P)(ve=oe^1<<P)!==I&&ve!==ae&&(ce<0&&(ce=ve),(q=p[ve])[0]<p[ce][0]&&(ce=ve));var pe=-1;for(P=0;P<3;++P){var ve;(ve=oe^1<<P)!==I&&ve!==ae&&ve!==ce&&(pe<0&&(pe=ve),(q=p[ve])[0]>p[pe][0]&&(pe=ve))}var we=v;we[0]=we[1]=we[2]=0,we[i.log2(ce^oe)]=oe&ce,we[i.log2(oe^pe)]=oe&pe;var xe=7^pe;xe===I||xe===ae?(xe=7^ce,we[i.log2(pe^xe)]=xe&pe):we[i.log2(ce^xe)]=xe&ce;var ge=m,Oe=I;for(F=0;F<3;++F)ge[F]=Oe&1<<F?-1:1;return _};var i=e(2288),r=e(104),n=e(4670),a=e(417),o=new Array(16),u=new Array(8),p=new Array(8),c=new Array(3),x=[0,0,0];function g(h,A,w){for(var E=0;E<4;++E){h[E]=w[12+E];for(var L=0;L<3;++L)h[E]+=A[L]*w[4*L+E]}}(function(){for(var h=0;h<8;++h)u[h]=[1,1,1,1],p[h]=[1,1,1]})();var f=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function y(h){for(var A=0;A<f.length;++A)if((h=n.positive(h,f[A])).length<3)return 0;var w=h[0],E=w[0]/w[3],L=w[1]/w[3],C=0;for(A=1;A+1<h.length;++A){var P=h[A],D=h[A+1],G=P[0]/P[3]-E,I=P[1]/P[3]-L,H=D[0]/D[3]-E,N=D[1]/D[3]-L;C+=Math.abs(G*N-I*H)}return C}var v=[1,1,1],m=[0,0,0],_={cubeEdges:v,axis:m}},1681:function(d,s,e){d.exports=function(v,m,_){var h=[],A=[0,0,0],w=[0,0,0],E=[0,0,0],L=[0,0,0];h.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var C=0;C<3;++C){for(var P=h.length/3|0,D=0;D<_[C].length;++D){var G=+_[C][D].x;h.push(G,0,1,G,1,1,G,0,-1,G,0,-1,G,1,1,G,1,-1)}var I=h.length/3|0;A[C]=P,w[C]=I-P,P=h.length/3|0;for(var H=0;H<_[C].length;++H)G=+_[C][H].x,h.push(G,0,1,G,1,1,G,0,-1,G,0,-1,G,1,1,G,1,-1);I=h.length/3|0,E[C]=P,L[C]=I-P}var N=i(v,new Float32Array(h)),F=r(v,[{buffer:N,type:v.FLOAT,size:3,stride:0,offset:0}]),V=n(v);return V.attributes.position.location=0,new f(v,N,F,V,w,A,L,E)};var i=e(5827),r=e(2944),n=e(1943).j,a=[0,0,0],o=[0,0,0],u=[0,0,0],p=[0,0,0],c=[1,1];function x(v){return v[0]=v[1]=v[2]=0,v}function g(v,m){return v[0]=m[0],v[1]=m[1],v[2]=m[2],v}function f(v,m,_,h,A,w,E,L){this.gl=v,this.vertBuffer=m,this.vao=_,this.shader=h,this.tickCount=A,this.tickOffset=w,this.gridCount=E,this.gridOffset=L}var y=f.prototype;y.bind=function(v,m,_){this.shader.bind(),this.shader.uniforms.model=v,this.shader.uniforms.view=m,this.shader.uniforms.projection=_,c[0]=this.gl.drawingBufferWidth,c[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=c,this.vao.bind()},y.unbind=function(){this.vao.unbind()},y.drawAxisLine=function(v,m,_,h,A){var w=x(o);this.shader.uniforms.majorAxis=o,w[v]=m[1][v]-m[0][v],this.shader.uniforms.minorAxis=w;var E,L=g(p,_);L[v]+=m[0][v],this.shader.uniforms.offset=L,this.shader.uniforms.lineWidth=A,this.shader.uniforms.color=h,(E=x(u))[(v+2)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6),(E=x(u))[(v+1)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6)},y.drawAxisTicks=function(v,m,_,h,A){if(this.tickCount[v]){var w=x(a);w[v]=1,this.shader.uniforms.majorAxis=w,this.shader.uniforms.offset=m,this.shader.uniforms.minorAxis=_,this.shader.uniforms.color=h,this.shader.uniforms.lineWidth=A;var E=x(u);E[v]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[v],this.tickOffset[v])}},y.drawGrid=function(v,m,_,h,A,w){if(this.gridCount[v]){var E=x(o);E[m]=_[1][m]-_[0][m],this.shader.uniforms.minorAxis=E;var L=g(p,h);L[m]+=_[0][m],this.shader.uniforms.offset=L;var C=x(a);C[v]=1,this.shader.uniforms.majorAxis=C;var P=x(u);P[v]=1,this.shader.uniforms.screenAxis=P,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=A,this.vao.draw(this.gl.TRIANGLES,this.gridCount[v],this.gridOffset[v])}},y.drawZero=function(v,m,_,h,A,w){var E=x(o);this.shader.uniforms.majorAxis=E,E[v]=_[1][v]-_[0][v],this.shader.uniforms.minorAxis=E;var L=g(p,h);L[v]+=_[0][v],this.shader.uniforms.offset=L;var C=x(u);C[m]=1,this.shader.uniforms.screenAxis=C,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=A,this.vao.draw(this.gl.TRIANGLES,6)},y.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1943:function(d,s,e){var i=e(6832),r=e(5158),n=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),a=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.j=function(x){return r(x,n,a,null,[{name:"position",type:"vec3"}])};var o=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),u=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.f=function(x){return r(x,o,u,null,[{name:"position",type:"vec3"}])};var p=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),c=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);s.bg=function(x){return r(x,p,c,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},9557:function(d,s,e){d.exports=function(g,f,y,v,m,_){var h=i(g),A=r(g,[{buffer:h,size:3}]),w=a(g);w.attributes.position.location=0;var E=new p(g,w,h,A);return E.update(f,y,v,m,_),E};var i=e(5827),r=e(2944),n=e(875),a=e(1943).f,o=window||k.global||{},u=o.__TEXT_CACHE||{};function p(g,f,y,v){this.gl=g,this.shader=f,this.buffer=y,this.vao=v,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}o.__TEXT_CACHE={};var c=p.prototype,x=[0,0];c.bind=function(g,f,y,v){this.vao.bind(),this.shader.bind();var m=this.shader.uniforms;m.model=g,m.view=f,m.projection=y,m.pixelScale=v,x[0]=this.gl.drawingBufferWidth,x[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=x},c.unbind=function(){this.vao.unbind()},c.update=function(g,f,y,v,m){var _=[];function h(G,I,H,N,F,V){var q=u[H];q||(q=u[H]={});var te=q[I];te||(te=q[I]=function(ce,pe){try{return n(ce,pe)}catch(ve){return console.warn('error vectorizing text:"'+ce+'" error:',ve),{cells:[],positions:[]}}}(I,{triangles:!0,font:H,textAlign:"center",textBaseline:"middle",lineSpacing:F,styletags:V}));for(var $=(N||12)/12,W=te.positions,Z=te.cells,J=0,ee=Z.length;J<ee;++J)for(var re=Z[J],ae=2;ae>=0;--ae){var oe=W[re[ae]];_.push($*oe[0],-$*oe[1],G)}}for(var A=[0,0,0],w=[0,0,0],E=[0,0,0],L=[0,0,0],C={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},P=0;P<3;++P){E[P]=_.length/3|0,h(.5*(g[0][P]+g[1][P]),f[P],y[P],12,1.25,C),L[P]=(_.length/3|0)-E[P],A[P]=_.length/3|0;for(var D=0;D<v[P].length;++D)v[P][D].text&&h(v[P][D].x,v[P][D].text,v[P][D].font||m,v[P][D].fontSize||12,1.25,C);w[P]=(_.length/3|0)-A[P]}this.buffer.update(_),this.tickOffset=A,this.tickCount=w,this.labelOffset=E,this.labelCount=L},c.drawTicks=function(g,f,y,v,m,_,h,A){this.tickCount[g]&&(this.shader.uniforms.axis=_,this.shader.uniforms.color=m,this.shader.uniforms.angle=y,this.shader.uniforms.scale=f,this.shader.uniforms.offset=v,this.shader.uniforms.alignDir=h,this.shader.uniforms.alignOpt=A,this.vao.draw(this.gl.TRIANGLES,this.tickCount[g],this.tickOffset[g]))},c.drawLabel=function(g,f,y,v,m,_,h,A){this.labelCount[g]&&(this.shader.uniforms.axis=_,this.shader.uniforms.color=m,this.shader.uniforms.angle=y,this.shader.uniforms.scale=f,this.shader.uniforms.offset=v,this.shader.uniforms.alignDir=h,this.shader.uniforms.alignOpt=A,this.vao.draw(this.gl.TRIANGLES,this.labelCount[g],this.labelOffset[g]))},c.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},8468:function(d,s){function e(i,r){var n=i+"",a=n.indexOf("."),o=0;a>=0&&(o=n.length-a-1);var u=Math.pow(10,o),p=Math.round(i*r*u),c=p+"";if(c.indexOf("e")>=0)return c;var x=p/u,g=p%u;p<0?(x=0|-Math.ceil(x),g=0|-g):(x=0|Math.floor(x),g|=0);var f=""+x;if(p<0&&(f="-"+f),o){for(var y=""+g;y.length<o;)y="0"+y;return f+"."+y}return f}s.create=function(i,r){for(var n=[],a=0;a<3;++a){for(var o=[],u=(i[0][a],i[1][a],0);u*r[a]<=i[1][a];++u)o.push({x:u*r[a],text:e(r[a],u)});for(u=-1;u*r[a]>=i[0][a];--u)o.push({x:u*r[a],text:e(r[a],u)});n.push(o)}return n},s.equal=function(i,r){for(var n=0;n<3;++n){if(i[n].length!==r[n].length)return!1;for(var a=0;a<i[n].length;++a){var o=i[n][a],u=r[n][a];if(o.x!==u.x||o.text!==u.text||o.font!==u.font||o.fontColor!==u.fontColor||o.fontSize!==u.fontSize||o.dx!==u.dx||o.dy!==u.dy)return!1}}return!0}},2771:function(d,s,e){d.exports=function(_,h,A,w,E){var L=h.model||p,C=h.view||p,P=h.projection||p,D=h._ortho||!1,G=_.bounds,I=(E=E||n(L,C,P,G,D)).axis;a(c,C,L),a(c,P,c);for(var H=v,N=0;N<3;++N)H[N].lo=1/0,H[N].hi=-1/0,H[N].pixelsPerDataUnit=1/0;var F=i(o(c,c));o(c,c);for(var V=0;V<3;++V){var q=(V+1)%3,te=(V+2)%3,$=m;e:for(N=0;N<2;++N){var W=[];if(I[V]<0!=!!N){$[V]=G[N][V];for(var Z=0;Z<2;++Z){$[q]=G[Z^N][q];for(var J=0;J<2;++J)$[te]=G[J^Z^N][te],W.push($.slice())}var ee=D?5:4;for(Z=ee;Z===ee;++Z){if(W.length===0)continue e;W=r.positive(W,F[Z])}for(Z=0;Z<W.length;++Z){te=W[Z];var re=y(m,c,te,A,w);for(J=0;J<3;++J)H[J].lo=Math.min(H[J].lo,te[J]),H[J].hi=Math.max(H[J].hi,te[J]),J!==V&&(H[J].pixelsPerDataUnit=Math.min(H[J].pixelsPerDataUnit,Math.abs(re[J])))}}}}return H};var i=e(5795),r=e(4670),n=e(2864),a=e(104),o=e(2142),u=e(6342),p=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),c=new Float32Array(16);function x(_,h,A){this.lo=_,this.hi=h,this.pixelsPerDataUnit=A}var g=[0,0,0,1],f=[0,0,0,1];function y(_,h,A,w,E){for(var L=0;L<3;++L){for(var C=g,P=f,D=0;D<3;++D)P[D]=C[D]=A[D];P[3]=C[3]=1,P[L]+=1,u(P,P,h),P[3]<0&&(_[L]=1/0),C[L]-=1,u(C,C,h),C[3]<0&&(_[L]=1/0);var G=(C[0]/C[3]-P[0]/P[3])*w,I=(C[1]/C[3]-P[1]/P[3])*E;_[L]=.25*Math.sqrt(G*G+I*I)}return _}var v=[new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0)],m=[0,0,0]},5827:function(d,s,e){var i=e(5306),r=e(7498),n=e(5050),a=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function o(x,g,f,y,v){this.gl=x,this.type=g,this.handle=f,this.length=y,this.usage=v}var u=o.prototype;function p(x,g,f,y,v,m){var _=v.length*v.BYTES_PER_ELEMENT;if(m<0)return x.bufferData(g,v,y),_;if(_+m>f)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return x.bufferSubData(g,m,v),f}function c(x,g){for(var f=i.malloc(x.length,g),y=x.length,v=0;v<y;++v)f[v]=x[v];return f}u.bind=function(){this.gl.bindBuffer(this.type,this.handle)},u.unbind=function(){this.gl.bindBuffer(this.type,null)},u.dispose=function(){this.gl.deleteBuffer(this.handle)},u.update=function(x,g){if(typeof g!="number"&&(g=-1),this.bind(),typeof x=="object"&&x.shape!==void 0){var f=x.dtype;if(a.indexOf(f)<0&&(f="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(f=gl.getExtension("OES_element_index_uint")&&f!=="uint16"?"uint32":"uint16"),f===x.dtype&&function(_,h){for(var A=1,w=h.length-1;w>=0;--w){if(h[w]!==A)return!1;A*=_[w]}return!0}(x.shape,x.stride))x.offset===0&&x.data.length===x.shape[0]?this.length=p(this.gl,this.type,this.length,this.usage,x.data,g):this.length=p(this.gl,this.type,this.length,this.usage,x.data.subarray(x.offset,x.shape[0]),g);else{var y=i.malloc(x.size,f),v=n(y,x.shape);r.assign(v,x),this.length=p(this.gl,this.type,this.length,this.usage,g<0?y:y.subarray(0,x.size),g),i.free(y)}}else if(Array.isArray(x)){var m;m=this.type===this.gl.ELEMENT_ARRAY_BUFFER?c(x,"uint16"):c(x,"float32"),this.length=p(this.gl,this.type,this.length,this.usage,g<0?m:m.subarray(0,x.length),g),i.free(m)}else if(typeof x=="object"&&typeof x.length=="number")this.length=p(this.gl,this.type,this.length,this.usage,x,g);else{if(typeof x!="number"&&x!==void 0)throw new Error("gl-buffer: Invalid data type");if(g>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(x|=0)<=0&&(x=1),this.gl.bufferData(this.type,0|x,this.usage),this.length=x}},d.exports=function(x,g,f,y){if(f=f||x.ARRAY_BUFFER,y=y||x.DYNAMIC_DRAW,f!==x.ARRAY_BUFFER&&f!==x.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(y!==x.DYNAMIC_DRAW&&y!==x.STATIC_DRAW&&y!==x.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var v=x.createBuffer(),m=new o(x,f,v,0,y);return m.update(g),m}},1140:function(d,s,e){var i=e(2858);d.exports=function(n,a){var o=n.positions,u=n.vectors,p={positions:[],vertexIntensity:[],vertexIntensityBounds:n.vertexIntensityBounds,vectors:[],cells:[],coneOffset:n.coneOffset,colormap:n.colormap};if(n.positions.length===0)return a&&(a[0]=[0,0,0],a[1]=[0,0,0]),p;for(var c=0,x=1/0,g=-1/0,f=1/0,y=-1/0,v=1/0,m=-1/0,_=null,h=null,A=[],w=1/0,E=!1,L=0;L<o.length;L++){var C=o[L];x=Math.min(C[0],x),g=Math.max(C[0],g),f=Math.min(C[1],f),y=Math.max(C[1],y),v=Math.min(C[2],v),m=Math.max(C[2],m);var P=u[L];if(i.length(P)>c&&(c=i.length(P)),L){var D=2*i.distance(_,C)/(i.length(h)+i.length(P));D?(w=Math.min(w,D),E=!1):E=!0}E||(_=C,h=P),A.push(P)}var G=[x,f,v],I=[g,y,m];a&&(a[0]=G,a[1]=I),c===0&&(c=1);var H=1/c;isFinite(w)||(w=1),p.vectorScale=w;var N=n.coneSize||.5;n.absoluteConeSize&&(N=n.absoluteConeSize*H),p.coneScale=N,L=0;for(var F=0;L<o.length;L++)for(var V=(C=o[L])[0],q=C[1],te=C[2],$=A[L],W=i.length($)*H,Z=0;Z<8;Z++){p.positions.push([V,q,te,F++]),p.positions.push([V,q,te,F++]),p.positions.push([V,q,te,F++]),p.positions.push([V,q,te,F++]),p.positions.push([V,q,te,F++]),p.positions.push([V,q,te,F++]),p.vectors.push($),p.vectors.push($),p.vectors.push($),p.vectors.push($),p.vectors.push($),p.vectors.push($),p.vertexIntensity.push(W,W,W),p.vertexIntensity.push(W,W,W);var J=p.positions.length;p.cells.push([J-6,J-5,J-4],[J-3,J-2,J-1])}return p};var r=e(7234);d.exports.createMesh=e(5028),d.exports.createConeMesh=function(n,a){return d.exports.createMesh(n,a,{shaders:r,traceType:"cone"})}},5028:function(d,s,e){var i=e(5158),r=e(5827),n=e(2944),a=e(8931),o=e(104),u=e(7437),p=e(5050),c=e(9156),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(y,v,m,_,h,A,w,E,L,C,P){this.gl=y,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=v,this.dirty=!0,this.triShader=m,this.pickShader=_,this.trianglePositions=h,this.triangleVectors=A,this.triangleColors=E,this.triangleUVs=L,this.triangleIds=w,this.triangleVAO=C,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=P,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=x,this._view=x,this._projection=x,this._resolution=[1,1]}var f=g.prototype;f.isOpaque=function(){return this.opacity>=1},f.isTransparent=function(){return this.opacity<1},f.pickSlots=1,f.setPickBase=function(y){this.pickId=y},f.update=function(y){y=y||{};var v=this.gl;this.dirty=!0,"lightPosition"in y&&(this.lightPosition=y.lightPosition),"opacity"in y&&(this.opacity=y.opacity),"ambient"in y&&(this.ambientLight=y.ambient),"diffuse"in y&&(this.diffuseLight=y.diffuse),"specular"in y&&(this.specularLight=y.specular),"roughness"in y&&(this.roughness=y.roughness),"fresnel"in y&&(this.fresnel=y.fresnel),y.tubeScale!==void 0&&(this.tubeScale=y.tubeScale),y.vectorScale!==void 0&&(this.vectorScale=y.vectorScale),y.coneScale!==void 0&&(this.coneScale=y.coneScale),y.coneOffset!==void 0&&(this.coneOffset=y.coneOffset),y.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=v.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=v.LINEAR,this.texture.setPixels(function(re){for(var ae=c({colormap:re,nshades:256,format:"rgba"}),oe=new Uint8Array(1024),ce=0;ce<256;++ce){for(var pe=ae[ce],ve=0;ve<3;++ve)oe[4*ce+ve]=pe[ve];oe[4*ce+3]=255*pe[3]}return p(oe,[256,256,4],[4,0,1])}(y.colormap)),this.texture.generateMipmap());var m=y.cells,_=y.positions,h=y.vectors;if(_&&m&&h){var A=[],w=[],E=[],L=[],C=[];this.cells=m,this.positions=_,this.vectors=h;var P=y.meshColor||[1,1,1,1],D=y.vertexIntensity,G=1/0,I=-1/0;if(D)if(y.vertexIntensityBounds)G=+y.vertexIntensityBounds[0],I=+y.vertexIntensityBounds[1];else for(var H=0;H<D.length;++H){var N=D[H];G=Math.min(G,N),I=Math.max(I,N)}else for(H=0;H<_.length;++H)N=_[H][2],G=Math.min(G,N),I=Math.max(I,N);for(this.intensity=D||function(re){for(var ae=re.length,oe=new Array(ae),ce=0;ce<ae;++ce)oe[ce]=re[ce][2];return oe}(_),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],H=0;H<_.length;++H)for(var F=_[H],V=0;V<3;++V)!isNaN(F[V])&&isFinite(F[V])&&(this.bounds[0][V]=Math.min(this.bounds[0][V],F[V]),this.bounds[1][V]=Math.max(this.bounds[1][V],F[V]));var q=0;e:for(H=0;H<m.length;++H){var te=m[H];if(te.length===3){for(V=0;V<3;++V){F=_[W=te[V]];for(var $=0;$<3;++$)if(isNaN(F[$])||!isFinite(F[$]))continue e}for(V=0;V<3;++V){var W;F=_[W=te[2-V]],A.push(F[0],F[1],F[2],F[3]);var Z=h[W];w.push(Z[0],Z[1],Z[2],Z[3]||0);var J,ee=P;ee.length===3?E.push(ee[0],ee[1],ee[2],1):E.push(ee[0],ee[1],ee[2],ee[3]),J=D?[(D[W]-G)/(I-G),0]:[(F[2]-G)/(I-G),0],L.push(J[0],J[1]),C.push(H)}q+=1}}this.triangleCount=q,this.trianglePositions.update(A),this.triangleVectors.update(w),this.triangleColors.update(E),this.triangleUVs.update(L),this.triangleIds.update(new Uint32Array(C))}},f.drawTransparent=f.draw=function(y){y=y||{};for(var v=this.gl,m=y.model||x,_=y.view||x,h=y.projection||x,A=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)A[0][w]=Math.max(A[0][w],this.clipBounds[0][w]),A[1][w]=Math.min(A[1][w],this.clipBounds[1][w]);var E={model:m,view:_,projection:h,inverseModel:x.slice(),clipBounds:A,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};E.inverseModel=u(E.inverseModel,E.model),v.disable(v.CULL_FACE),this.texture.bind(0);var L=new Array(16);for(o(L,E.view,E.model),o(L,E.projection,L),u(L,L),w=0;w<3;++w)E.eyePosition[w]=L[12+w]/L[15];var C=L[15];for(w=0;w<3;++w)C+=this.lightPosition[w]*L[4*w+3];for(w=0;w<3;++w){for(var P=L[12+w],D=0;D<3;++D)P+=L[4*D+w]*this.lightPosition[D];E.lightPosition[w]=P/C}if(this.triangleCount>0){var G=this.triShader;G.bind(),G.uniforms=E,this.triangleVAO.bind(),v.drawArrays(v.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},f.drawPick=function(y){y=y||{};for(var v=this.gl,m=y.model||x,_=y.view||x,h=y.projection||x,A=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)A[0][w]=Math.max(A[0][w],this.clipBounds[0][w]),A[1][w]=Math.min(A[1][w],this.clipBounds[1][w]);this._model=[].slice.call(m),this._view=[].slice.call(_),this._projection=[].slice.call(h),this._resolution=[v.drawingBufferWidth,v.drawingBufferHeight];var E={model:m,view:_,projection:h,clipBounds:A,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},L=this.pickShader;L.bind(),L.uniforms=E,this.triangleCount>0&&(this.triangleVAO.bind(),v.drawArrays(v.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},f.pick=function(y){if(!y||y.id!==this.pickId)return null;var v=y.value[0]+256*y.value[1]+65536*y.value[2],m=this.cells[v],_=this.positions[m[1]].slice(0,3),h={position:_,dataCoordinate:_,index:Math.floor(m[1]/48)};return this.traceType==="cone"?h.index=Math.floor(m[1]/48):this.traceType==="streamtube"&&(h.intensity=this.intensity[m[1]],h.velocity=this.vectors[m[1]].slice(0,3),h.divergence=this.vectors[m[1]][3],h.index=v),h},f.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},d.exports=function(y,v,m){var _=m.shaders;arguments.length===1&&(y=(v=y).gl);var h=function(I,H){var N=i(I,H.meshShader.vertex,H.meshShader.fragment,null,H.meshShader.attributes);return N.attributes.position.location=0,N.attributes.color.location=2,N.attributes.uv.location=3,N.attributes.vector.location=4,N}(y,_),A=function(I,H){var N=i(I,H.pickShader.vertex,H.pickShader.fragment,null,H.pickShader.attributes);return N.attributes.position.location=0,N.attributes.id.location=1,N.attributes.vector.location=4,N}(y,_),w=a(y,p(new Uint8Array([255,255,255,255]),[1,1,4]));w.generateMipmap(),w.minFilter=y.LINEAR_MIPMAP_LINEAR,w.magFilter=y.LINEAR;var E=r(y),L=r(y),C=r(y),P=r(y),D=r(y),G=new g(y,w,h,A,E,L,D,C,P,n(y,[{buffer:E,type:y.FLOAT,size:4},{buffer:D,type:y.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:C,type:y.FLOAT,size:4},{buffer:P,type:y.FLOAT,size:2},{buffer:L,type:y.FLOAT,size:4}]),m.traceType||"cone");return G.update(v),G}},7234:function(d,s,e){var i=e(6832),r=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),a=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),o=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},s.pickShader={vertex:a,fragment:o,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},1950:function(d){d.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},6603:function(d,s,e){var i=e(1950);d.exports=function(r){return i[r]}},3110:function(d,s,e){d.exports=function(g){var f=g.gl,y=i(f),v=r(f,[{buffer:y,type:f.FLOAT,size:3,offset:0,stride:40},{buffer:y,type:f.FLOAT,size:4,offset:12,stride:40},{buffer:y,type:f.FLOAT,size:3,offset:28,stride:40}]),m=n(f);m.attributes.position.location=0,m.attributes.color.location=1,m.attributes.offset.location=2;var _=new o(f,y,v,m);return _.update(g),_};var i=e(5827),r=e(2944),n=e(7667),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function o(g,f,y,v){this.gl=g,this.shader=v,this.buffer=f,this.vao=y,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var u=o.prototype;function p(g,f){for(var y=0;y<3;++y)g[0][y]=Math.min(g[0][y],f[y]),g[1][y]=Math.max(g[1][y],f[y])}u.isOpaque=function(){return!this.hasAlpha},u.isTransparent=function(){return this.hasAlpha},u.drawTransparent=u.draw=function(g){var f=this.gl,y=this.shader.uniforms;this.shader.bind();var v=y.view=g.view||a,m=y.projection=g.projection||a;y.model=g.model||a,y.clipBounds=this.clipBounds,y.opacity=this.opacity;var _=v[12],h=v[13],A=v[14],w=v[15],E=(g._ortho?2:1)*this.pixelRatio*(m[3]*_+m[7]*h+m[11]*A+m[15]*w)/f.drawingBufferHeight;this.vao.bind();for(var L=0;L<3;++L)f.lineWidth(this.lineWidth[L]*this.pixelRatio),y.capSize=this.capSize[L]*E,this.lineCount[L]&&f.drawArrays(f.LINES,this.lineOffset[L],this.lineCount[L]);this.vao.unbind()};var c=function(){for(var g=new Array(3),f=0;f<3;++f){for(var y=[],v=1;v<=2;++v)for(var m=-1;m<=1;m+=2){var _=[0,0,0];_[(v+f)%3]=m,y.push(_)}g[f]=y}return g}();function x(g,f,y,v){for(var m=c[v],_=0;_<m.length;++_){var h=m[_];g.push(f[0],f[1],f[2],y[0],y[1],y[2],y[3],h[0],h[1],h[2])}return m.length}u.update=function(g){"lineWidth"in(g=g||{})&&(this.lineWidth=g.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in g&&(this.capSize=g.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in g&&(this.opacity=+g.opacity,this.opacity<1&&(this.hasAlpha=!0));var f=g.color||[[0,0,0],[0,0,0],[0,0,0]],y=g.position,v=g.error;if(Array.isArray(f[0])||(f=[f,f,f]),y&&v){var m=[],_=y.length,h=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var A=0;A<3;++A){this.lineOffset[A]=h;e:for(var w=0;w<_;++w){for(var E=y[w],L=0;L<3;++L)if(isNaN(E[L])||!isFinite(E[L]))continue e;var C,P=v[w],D=f[A];Array.isArray(D[0])&&(D=f[w]),D.length===3?D=[D[0],D[1],D[2],1]:D.length===4&&(D=[D[0],D[1],D[2],D[3]],!this.hasAlpha&&D[3]<1&&(this.hasAlpha=!0)),isNaN(P[0][A])||isNaN(P[1][A])||(P[0][A]<0&&((C=E.slice())[A]+=P[0][A],m.push(E[0],E[1],E[2],D[0],D[1],D[2],D[3],0,0,0,C[0],C[1],C[2],D[0],D[1],D[2],D[3],0,0,0),p(this.bounds,C),h+=2+x(m,C,D,A)),P[1][A]>0&&((C=E.slice())[A]+=P[1][A],m.push(E[0],E[1],E[2],D[0],D[1],D[2],D[3],0,0,0,C[0],C[1],C[2],D[0],D[1],D[2],D[3],0,0,0),p(this.bounds,C),h+=2+x(m,C,D,A)))}this.lineCount[A]=h-this.lineOffset[A]}this.buffer.update(m)}},u.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},7667:function(d,s,e){var i=e(6832),r=e(5158),n=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),a=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);d.exports=function(o){return r(o,n,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},4234:function(d,s,e){var i=e(8931);d.exports=function(_,h,A,w){r||(r=_.FRAMEBUFFER_UNSUPPORTED,n=_.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,a=_.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,o=_.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var E=_.getExtension("WEBGL_draw_buffers");if(!u&&E&&function(H,N){var F=H.getParameter(N.MAX_COLOR_ATTACHMENTS_WEBGL);u=new Array(F+1);for(var V=0;V<=F;++V){for(var q=new Array(F),te=0;te<V;++te)q[te]=H.COLOR_ATTACHMENT0+te;for(te=V;te<F;++te)q[te]=H.NONE;u[V]=q}}(_,E),Array.isArray(h)&&(w=A,A=0|h[1],h=0|h[0]),typeof h!="number")throw new Error("gl-fbo: Missing shape parameter");var L=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(h<0||h>L||A<0||A>L)throw new Error("gl-fbo: Parameters are too large for FBO");var C=1;if("color"in(w=w||{})){if((C=Math.max(0|w.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(C>1){if(!E)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(C>_.getParameter(E.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+C+" draw buffers")}}var P=_.UNSIGNED_BYTE,D=_.getExtension("OES_texture_float");if(w.float&&C>0){if(!D)throw new Error("gl-fbo: Context does not support floating point textures");P=_.FLOAT}else w.preferFloat&&C>0&&D&&(P=_.FLOAT);var G=!0;"depth"in w&&(G=!!w.depth);var I=!1;return"stencil"in w&&(I=!!w.stencil),new y(_,h,A,P,C,G,I,E)};var r,n,a,o,u=null;function p(_){return[_.getParameter(_.FRAMEBUFFER_BINDING),_.getParameter(_.RENDERBUFFER_BINDING),_.getParameter(_.TEXTURE_BINDING_2D)]}function c(_,h){_.bindFramebuffer(_.FRAMEBUFFER,h[0]),_.bindRenderbuffer(_.RENDERBUFFER,h[1]),_.bindTexture(_.TEXTURE_2D,h[2])}function x(_){switch(_){case r:throw new Error("gl-fbo: Framebuffer unsupported");case n:throw new Error("gl-fbo: Framebuffer incomplete attachment");case a:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case o:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function g(_,h,A,w,E,L){if(!w)return null;var C=i(_,h,A,E,w);return C.magFilter=_.NEAREST,C.minFilter=_.NEAREST,C.mipSamples=1,C.bind(),_.framebufferTexture2D(_.FRAMEBUFFER,L,_.TEXTURE_2D,C.handle,0),C}function f(_,h,A,w,E){var L=_.createRenderbuffer();return _.bindRenderbuffer(_.RENDERBUFFER,L),_.renderbufferStorage(_.RENDERBUFFER,w,h,A),_.framebufferRenderbuffer(_.FRAMEBUFFER,E,_.RENDERBUFFER,L),L}function y(_,h,A,w,E,L,C,P){this.gl=_,this._shape=[0|h,0|A],this._destroyed=!1,this._ext=P,this.color=new Array(E);for(var D=0;D<E;++D)this.color[D]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=w,this._useDepth=L,this._useStencil=C;var G=this,I=[0|h,0|A];Object.defineProperties(I,{0:{get:function(){return G._shape[0]},set:function(H){return G.width=H}},1:{get:function(){return G._shape[1]},set:function(H){return G.height=H}}}),this._shapeVector=I,function(H){var N=p(H.gl),F=H.gl,V=H.handle=F.createFramebuffer(),q=H._shape[0],te=H._shape[1],$=H.color.length,W=H._ext,Z=H._useStencil,J=H._useDepth,ee=H._colorType;F.bindFramebuffer(F.FRAMEBUFFER,V);for(var re=0;re<$;++re)H.color[re]=g(F,q,te,ee,F.RGBA,F.COLOR_ATTACHMENT0+re);$===0?(H._color_rb=f(F,q,te,F.RGBA4,F.COLOR_ATTACHMENT0),W&&W.drawBuffersWEBGL(u[0])):$>1&&W.drawBuffersWEBGL(u[$]);var ae=F.getExtension("WEBGL_depth_texture");ae?Z?H.depth=g(F,q,te,ae.UNSIGNED_INT_24_8_WEBGL,F.DEPTH_STENCIL,F.DEPTH_STENCIL_ATTACHMENT):J&&(H.depth=g(F,q,te,F.UNSIGNED_SHORT,F.DEPTH_COMPONENT,F.DEPTH_ATTACHMENT)):J&&Z?H._depth_rb=f(F,q,te,F.DEPTH_STENCIL,F.DEPTH_STENCIL_ATTACHMENT):J?H._depth_rb=f(F,q,te,F.DEPTH_COMPONENT16,F.DEPTH_ATTACHMENT):Z&&(H._depth_rb=f(F,q,te,F.STENCIL_INDEX,F.STENCIL_ATTACHMENT));var oe=F.checkFramebufferStatus(F.FRAMEBUFFER);if(oe!==F.FRAMEBUFFER_COMPLETE){for(H._destroyed=!0,F.bindFramebuffer(F.FRAMEBUFFER,null),F.deleteFramebuffer(H.handle),H.handle=null,H.depth&&(H.depth.dispose(),H.depth=null),H._depth_rb&&(F.deleteRenderbuffer(H._depth_rb),H._depth_rb=null),re=0;re<H.color.length;++re)H.color[re].dispose(),H.color[re]=null;H._color_rb&&(F.deleteRenderbuffer(H._color_rb),H._color_rb=null),c(F,N),x(oe)}c(F,N)}(this)}var v=y.prototype;function m(_,h,A){if(_._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(_._shape[0]!==h||_._shape[1]!==A){var w=_.gl,E=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(h<0||h>E||A<0||A>E)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");_._shape[0]=h,_._shape[1]=A;for(var L=p(w),C=0;C<_.color.length;++C)_.color[C].shape=_._shape;_._color_rb&&(w.bindRenderbuffer(w.RENDERBUFFER,_._color_rb),w.renderbufferStorage(w.RENDERBUFFER,w.RGBA4,_._shape[0],_._shape[1])),_.depth&&(_.depth.shape=_._shape),_._depth_rb&&(w.bindRenderbuffer(w.RENDERBUFFER,_._depth_rb),_._useDepth&&_._useStencil?w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_STENCIL,_._shape[0],_._shape[1]):_._useDepth?w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_COMPONENT16,_._shape[0],_._shape[1]):_._useStencil&&w.renderbufferStorage(w.RENDERBUFFER,w.STENCIL_INDEX,_._shape[0],_._shape[1])),w.bindFramebuffer(w.FRAMEBUFFER,_.handle);var P=w.checkFramebufferStatus(w.FRAMEBUFFER);P!==w.FRAMEBUFFER_COMPLETE&&(_.dispose(),c(w,L),x(P)),c(w,L)}}Object.defineProperties(v,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(_){if(Array.isArray(_)||(_=[0|_,0|_]),_.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var h=0|_[0],A=0|_[1];return m(this,h,A),[h,A]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(_){return m(this,_|=0,this._shape[1]),_},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(_){return _|=0,m(this,this._shape[0],_),_},enumerable:!1}}),v.bind=function(){if(!this._destroyed){var _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,this.handle),_.viewport(0,0,this._shape[0],this._shape[1])}},v.dispose=function(){if(!this._destroyed){this._destroyed=!0;var _=this.gl;_.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(_.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var h=0;h<this.color.length;++h)this.color[h].dispose(),this.color[h]=null;this._color_rb&&(_.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},3530:function(d,s,e){var i=e(8974).sprintf,r=e(6603),n=e(9365),a=e(8008);d.exports=function(o,u,p){var c=n(u)||"of unknown name (see npm glsl-shader-name)",x="unknown type";p!==void 0&&(x=p===r.FRAGMENT_SHADER?"fragment":"vertex");for(var g=i(`Error compiling %s shader %s:
`,x,c),f=i("%s%s",g,o),y=o.split(`
`),v={},m=0;m<y.length;m++){var _=y[m];if(_!==""&&_!=="\0"){var h=parseInt(_.split(":")[2]);if(isNaN(h))throw new Error(i("Could not parse error: %s",_));v[h]=_}}var A=a(u).split(`
`);for(m=0;m<A.length;m++)if((v[m+3]||v[m+2]||v[m+1])&&(g+=A[m]+`
`,v[m+1])){var w=v[m+1];w=w.substr(w.split(":",3).join(":").length+1).trim(),g+=i(`^^^ %s

`,w)}return{long:g.trim(),short:f.trim()}}},6386:function(d,s,e){d.exports=function(f,y){var v=f.gl,m=new p(f,a(v,u.vertex,u.fragment),a(v,u.pickVertex,u.pickFragment),o(v),o(v),o(v),o(v));return m.update(y),f.addObject(m),m};var i=e(5070),r=e(9560),n=e(5306),a=e(5158),o=e(5827),u=e(1292);function p(f,y,v,m,_,h,A){this.plot=f,this.shader=y,this.pickShader=v,this.positionBuffer=m,this.weightBuffer=_,this.colorBuffer=h,this.idBuffer=A,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var c,x=p.prototype,g=[0,0,1,0,0,1,1,0,1,1,0,1];x.draw=(c=[1,0,0,0,1,0,0,0,1],function(){var f=this.plot,y=this.shader,v=this.bounds,m=this.numVertices;if(!(m<=0)){var _=f.gl,h=f.dataBox,A=v[2]-v[0],w=v[3]-v[1],E=h[2]-h[0],L=h[3]-h[1];c[0]=2*A/E,c[4]=2*w/L,c[6]=2*(v[0]-h[0])/E-1,c[7]=2*(v[1]-h[1])/L-1,y.bind();var C=y.uniforms;C.viewTransform=c,C.shape=this.shape;var P=y.attributes;this.positionBuffer.bind(),P.position.pointer(),this.weightBuffer.bind(),P.weight.pointer(_.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),P.color.pointer(_.UNSIGNED_BYTE,!0),_.drawArrays(_.TRIANGLES,0,m)}}),x.drawPick=function(){var f=[1,0,0,0,1,0,0,0,1],y=[0,0,0,0];return function(v){var m=this.plot,_=this.pickShader,h=this.bounds,A=this.numVertices;if(!(A<=0)){var w=m.gl,E=m.dataBox,L=h[2]-h[0],C=h[3]-h[1],P=E[2]-E[0],D=E[3]-E[1];f[0]=2*L/P,f[4]=2*C/D,f[6]=2*(h[0]-E[0])/P-1,f[7]=2*(h[1]-E[1])/D-1;for(var G=0;G<4;++G)y[G]=v>>8*G&255;this.pickOffset=v,_.bind();var I=_.uniforms;I.viewTransform=f,I.pickOffset=y,I.shape=this.shape;var H=_.attributes;return this.positionBuffer.bind(),H.position.pointer(),this.weightBuffer.bind(),H.weight.pointer(w.UNSIGNED_BYTE,!1),this.idBuffer.bind(),H.pickId.pointer(w.UNSIGNED_BYTE,!1),w.drawArrays(w.TRIANGLES,0,A),v+this.shape[0]*this.shape[1]}}}(),x.pick=function(f,y,v){var m=this.pickOffset,_=this.shape[0]*this.shape[1];if(v<m||v>=m+_)return null;var h=v-m,A=this.xData,w=this.yData;return{object:this,pointId:h,dataCoord:[A[h%this.shape[0]],w[h/this.shape[0]|0]]}},x.update=function(f){var y=(f=f||{}).shape||[0,0],v=f.x||r(y[0]),m=f.y||r(y[1]),_=f.z||new Float32Array(y[0]*y[1]),h=f.zsmooth!==!1;this.xData=v,this.yData=m;var A,w,E,L,C=f.colorLevels||[0],P=f.colorValues||[0,0,0,1],D=C.length,G=this.bounds;h?(A=G[0]=v[0],w=G[1]=m[0],E=G[2]=v[v.length-1],L=G[3]=m[m.length-1]):(A=G[0]=v[0]+(v[1]-v[0])/2,w=G[1]=m[0]+(m[1]-m[0])/2,E=G[2]=v[v.length-1]+(v[v.length-1]-v[v.length-2])/2,L=G[3]=m[m.length-1]+(m[m.length-1]-m[m.length-2])/2);var I=1/(E-A),H=1/(L-w),N=y[0],F=y[1];this.shape=[N,F];var V=(h?(N-1)*(F-1):N*F)*(g.length>>>1);this.numVertices=V;for(var q=n.mallocUint8(4*V),te=n.mallocFloat32(2*V),$=n.mallocUint8(2*V),W=n.mallocUint32(V),Z=0,J=h?N-1:N,ee=h?F-1:F,re=0;re<ee;++re){var ae,oe;h?(ae=H*(m[re]-w),oe=H*(m[re+1]-w)):(ae=re<F-1?H*(m[re]-(m[re+1]-m[re])/2-w):H*(m[re]-(m[re]-m[re-1])/2-w),oe=re<F-1?H*(m[re]+(m[re+1]-m[re])/2-w):H*(m[re]+(m[re]-m[re-1])/2-w));for(var ce=0;ce<J;++ce){var pe,ve;h?(pe=I*(v[ce]-A),ve=I*(v[ce+1]-A)):(pe=ce<N-1?I*(v[ce]-(v[ce+1]-v[ce])/2-A):I*(v[ce]-(v[ce]-v[ce-1])/2-A),ve=ce<N-1?I*(v[ce]+(v[ce+1]-v[ce])/2-A):I*(v[ce]+(v[ce]-v[ce-1])/2-A));for(var we=0;we<g.length;we+=2){var xe,ge,Oe,Ae,Te=g[we],se=g[we+1],le=_[h?(re+se)*N+(ce+Te):re*N+ce],ne=i.le(C,le);if(ne<0)xe=P[0],ge=P[1],Oe=P[2],Ae=P[3];else if(ne===D-1)xe=P[4*D-4],ge=P[4*D-3],Oe=P[4*D-2],Ae=P[4*D-1];else{var me=(le-C[ne])/(C[ne+1]-C[ne]),Ee=1-me,be=4*ne,De=4*(ne+1);xe=Ee*P[be]+me*P[De],ge=Ee*P[be+1]+me*P[De+1],Oe=Ee*P[be+2]+me*P[De+2],Ae=Ee*P[be+3]+me*P[De+3]}q[4*Z]=255*xe,q[4*Z+1]=255*ge,q[4*Z+2]=255*Oe,q[4*Z+3]=255*Ae,te[2*Z]=.5*pe+.5*ve,te[2*Z+1]=.5*ae+.5*oe,$[2*Z]=Te,$[2*Z+1]=se,W[Z]=re*N+ce,Z+=1}}}this.positionBuffer.update(te),this.weightBuffer.update($),this.colorBuffer.update(q),this.idBuffer.update(W),n.free(te),n.free(q),n.free($),n.free(W)},x.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},1292:function(d,s,e){var i=e(6832);d.exports={fragment:i([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},248:function(d,s,e){var i=e(6832),r=e(5158),n=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),a=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),o=i([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),u=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];s.createShader=function(p){return r(p,n,a,null,u)},s.createPickShader=function(p){return r(p,n,o,null,u)}},6086:function(d,s,e){d.exports=function(A){var w=A.gl||A.scene&&A.scene.gl,E=x(w);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;var L=g(w);L.attributes.position.location=0,L.attributes.nextPosition.location=1,L.attributes.arcLength.location=2,L.attributes.lineWidth.location=3,L.attributes.color.location=4;for(var C=i(w),P=r(w,[{buffer:C,size:3,offset:0,stride:48},{buffer:C,size:3,offset:12,stride:48},{buffer:C,size:1,offset:24,stride:48},{buffer:C,size:1,offset:28,stride:48},{buffer:C,size:4,offset:32,stride:48}]),D=p(new Array(1024),[256,1,4]),G=0;G<1024;++G)D.data[G]=255;var I=n(w,D);I.wrap=w.REPEAT;var H=new _(w,E,L,C,P,I);return H.update(A),H};var i=e(5827),r=e(2944),n=e(8931),a=new Uint8Array(4),o=new Float32Array(a.buffer),u=e(5070),p=e(5050),c=e(248),x=c.createShader,g=c.createPickShader,f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function y(A,w){for(var E=0,L=0;L<3;++L){var C=A[L]-w[L];E+=C*C}return Math.sqrt(E)}function v(A){for(var w=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)w[0][E]=Math.max(A[0][E],w[0][E]),w[1][E]=Math.min(A[1][E],w[1][E]);return w}function m(A,w,E,L){this.arcLength=A,this.position=w,this.index=E,this.dataCoordinate=L}function _(A,w,E,L,C,P){this.gl=A,this.shader=w,this.pickShader=E,this.buffer=L,this.vao=C,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=P,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var h=_.prototype;h.isTransparent=function(){return this.hasAlpha},h.isOpaque=function(){return!this.hasAlpha},h.pickSlots=1,h.setPickBase=function(A){this.pickId=A},h.drawTransparent=h.draw=function(A){if(this.vertexCount){var w=this.gl,E=this.shader,L=this.vao;E.bind(),E.uniforms={model:A.model||f,view:A.view||f,projection:A.projection||f,clipBounds:v(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(w.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},h.drawPick=function(A){if(this.vertexCount){var w=this.gl,E=this.pickShader,L=this.vao;E.bind(),E.uniforms={model:A.model||f,view:A.view||f,projection:A.projection||f,pickId:this.pickId,clipBounds:v(this.clipBounds),screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(w.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},h.update=function(A){var w,E;this.dirty=!0;var L=!!A.connectGaps;"dashScale"in A&&(this.dashScale=A.dashScale),this.hasAlpha=!1,"opacity"in A&&(this.opacity=+A.opacity,this.opacity<1&&(this.hasAlpha=!0));var C=[],P=[],D=[],G=0,I=0,H=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],N=A.position||A.positions;if(N){var F=A.color||A.colors||[0,0,0,1],V=A.lineWidth||1,q=!1;e:for(w=1;w<N.length;++w){var te,$,W,Z=N[w-1],J=N[w];for(P.push(G),D.push(Z.slice()),E=0;E<3;++E){if(isNaN(Z[E])||isNaN(J[E])||!isFinite(Z[E])||!isFinite(J[E])){if(!L&&C.length>0){for(var ee=0;ee<24;++ee)C.push(C[C.length-12]);I+=2,q=!0}continue e}H[0][E]=Math.min(H[0][E],Z[E],J[E]),H[1][E]=Math.max(H[1][E],Z[E],J[E])}Array.isArray(F[0])?(te=F.length>w-1?F[w-1]:F.length>0?F[F.length-1]:[0,0,0,1],$=F.length>w?F[w]:F.length>0?F[F.length-1]:[0,0,0,1]):te=$=F,te.length===3&&(te=[te[0],te[1],te[2],1]),$.length===3&&($=[$[0],$[1],$[2],1]),!this.hasAlpha&&te[3]<1&&(this.hasAlpha=!0),W=Array.isArray(V)?V.length>w-1?V[w-1]:V.length>0?V[V.length-1]:[0,0,0,1]:V;var re=G;if(G+=y(Z,J),q){for(E=0;E<2;++E)C.push(Z[0],Z[1],Z[2],J[0],J[1],J[2],re,W,te[0],te[1],te[2],te[3]);I+=2,q=!1}C.push(Z[0],Z[1],Z[2],J[0],J[1],J[2],re,W,te[0],te[1],te[2],te[3],Z[0],Z[1],Z[2],J[0],J[1],J[2],re,-W,te[0],te[1],te[2],te[3],J[0],J[1],J[2],Z[0],Z[1],Z[2],G,-W,$[0],$[1],$[2],$[3],J[0],J[1],J[2],Z[0],Z[1],Z[2],G,W,$[0],$[1],$[2],$[3]),I+=4}}if(this.buffer.update(C),P.push(G),D.push(N[N.length-1].slice()),this.bounds=H,this.vertexCount=I,this.points=D,this.arcLength=P,"dashes"in A){var ae=A.dashes.slice();for(ae.unshift(0),w=1;w<ae.length;++w)ae[w]=ae[w-1]+ae[w];var oe=p(new Array(1024),[256,1,4]);for(w=0;w<256;++w){for(E=0;E<4;++E)oe.set(w,0,E,0);1&u.le(ae,ae[ae.length-1]*w/255)?oe.set(w,0,0,0):oe.set(w,0,0,255)}this.texture.setPixels(oe)}},h.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},h.pick=function(A){if(!A||A.id!==this.pickId)return null;var w=function(N,F,V,q){return a[0]=0,a[1]=V,a[2]=F,a[3]=N,o[0]}(A.value[0],A.value[1],A.value[2]),E=u.le(this.arcLength,w);if(E<0)return null;if(E===this.arcLength.length-1)return new m(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),E);for(var L=this.points[E],C=this.points[Math.min(E+1,this.points.length-1)],P=(w-this.arcLength[E])/(this.arcLength[E+1]-this.arcLength[E]),D=1-P,G=[0,0,0],I=0;I<3;++I)G[I]=D*L[I]+P*C[I];var H=Math.min(P<.5?E:E+1,this.points.length-1);return new m(w,G,H,this.points[H])}},7332:function(d){d.exports=function(s){var e=new Float32Array(16);return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e[4]=s[4],e[5]=s[5],e[6]=s[6],e[7]=s[7],e[8]=s[8],e[9]=s[9],e[10]=s[10],e[11]=s[11],e[12]=s[12],e[13]=s[13],e[14]=s[14],e[15]=s[15],e}},9823:function(d){d.exports=function(){var s=new Float32Array(16);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7787:function(d){d.exports=function(s){var e=s[0],i=s[1],r=s[2],n=s[3],a=s[4],o=s[5],u=s[6],p=s[7],c=s[8],x=s[9],g=s[10],f=s[11],y=s[12],v=s[13],m=s[14],_=s[15];return(e*o-i*a)*(g*_-f*m)-(e*u-r*a)*(x*_-f*v)+(e*p-n*a)*(x*m-g*v)+(i*u-r*o)*(c*_-f*y)-(i*p-n*o)*(c*m-g*y)+(r*p-n*u)*(c*v-x*y)}},5950:function(d){d.exports=function(s,e){var i=e[0],r=e[1],n=e[2],a=e[3],o=i+i,u=r+r,p=n+n,c=i*o,x=r*o,g=r*u,f=n*o,y=n*u,v=n*p,m=a*o,_=a*u,h=a*p;return s[0]=1-g-v,s[1]=x+h,s[2]=f-_,s[3]=0,s[4]=x-h,s[5]=1-c-v,s[6]=y+m,s[7]=0,s[8]=f+_,s[9]=y-m,s[10]=1-c-g,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7280:function(d){d.exports=function(s,e,i){var r=e[0],n=e[1],a=e[2],o=e[3],u=r+r,p=n+n,c=a+a,x=r*u,g=r*p,f=r*c,y=n*p,v=n*c,m=a*c,_=o*u,h=o*p,A=o*c;return s[0]=1-(y+m),s[1]=g+A,s[2]=f-h,s[3]=0,s[4]=g-A,s[5]=1-(x+m),s[6]=v+_,s[7]=0,s[8]=f+h,s[9]=v-_,s[10]=1-(x+y),s[11]=0,s[12]=i[0],s[13]=i[1],s[14]=i[2],s[15]=1,s}},9947:function(d){d.exports=function(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7437:function(d){d.exports=function(s,e){var i=e[0],r=e[1],n=e[2],a=e[3],o=e[4],u=e[5],p=e[6],c=e[7],x=e[8],g=e[9],f=e[10],y=e[11],v=e[12],m=e[13],_=e[14],h=e[15],A=i*u-r*o,w=i*p-n*o,E=i*c-a*o,L=r*p-n*u,C=r*c-a*u,P=n*c-a*p,D=x*m-g*v,G=x*_-f*v,I=x*h-y*v,H=g*_-f*m,N=g*h-y*m,F=f*h-y*_,V=A*F-w*N+E*H+L*I-C*G+P*D;return V?(V=1/V,s[0]=(u*F-p*N+c*H)*V,s[1]=(n*N-r*F-a*H)*V,s[2]=(m*P-_*C+h*L)*V,s[3]=(f*C-g*P-y*L)*V,s[4]=(p*I-o*F-c*G)*V,s[5]=(i*F-n*I+a*G)*V,s[6]=(_*E-v*P-h*w)*V,s[7]=(x*P-f*E+y*w)*V,s[8]=(o*N-u*I+c*D)*V,s[9]=(r*I-i*N-a*D)*V,s[10]=(v*C-m*E+h*A)*V,s[11]=(g*E-x*C-y*A)*V,s[12]=(u*G-o*H-p*D)*V,s[13]=(i*H-r*G+n*D)*V,s[14]=(m*w-v*L-_*A)*V,s[15]=(x*L-g*w+f*A)*V,s):null}},3012:function(d,s,e){var i=e(9947);d.exports=function(r,n,a,o){var u,p,c,x,g,f,y,v,m,_,h=n[0],A=n[1],w=n[2],E=o[0],L=o[1],C=o[2],P=a[0],D=a[1],G=a[2];return Math.abs(h-P)<1e-6&&Math.abs(A-D)<1e-6&&Math.abs(w-G)<1e-6?i(r):(y=h-P,v=A-D,m=w-G,u=L*(m*=_=1/Math.sqrt(y*y+v*v+m*m))-C*(v*=_),p=C*(y*=_)-E*m,c=E*v-L*y,(_=Math.sqrt(u*u+p*p+c*c))?(u*=_=1/_,p*=_,c*=_):(u=0,p=0,c=0),x=v*c-m*p,g=m*u-y*c,f=y*p-v*u,(_=Math.sqrt(x*x+g*g+f*f))?(x*=_=1/_,g*=_,f*=_):(x=0,g=0,f=0),r[0]=u,r[1]=x,r[2]=y,r[3]=0,r[4]=p,r[5]=g,r[6]=v,r[7]=0,r[8]=c,r[9]=f,r[10]=m,r[11]=0,r[12]=-(u*h+p*A+c*w),r[13]=-(x*h+g*A+f*w),r[14]=-(y*h+v*A+m*w),r[15]=1,r)}},104:function(d){d.exports=function(s,e,i){var r=e[0],n=e[1],a=e[2],o=e[3],u=e[4],p=e[5],c=e[6],x=e[7],g=e[8],f=e[9],y=e[10],v=e[11],m=e[12],_=e[13],h=e[14],A=e[15],w=i[0],E=i[1],L=i[2],C=i[3];return s[0]=w*r+E*u+L*g+C*m,s[1]=w*n+E*p+L*f+C*_,s[2]=w*a+E*c+L*y+C*h,s[3]=w*o+E*x+L*v+C*A,w=i[4],E=i[5],L=i[6],C=i[7],s[4]=w*r+E*u+L*g+C*m,s[5]=w*n+E*p+L*f+C*_,s[6]=w*a+E*c+L*y+C*h,s[7]=w*o+E*x+L*v+C*A,w=i[8],E=i[9],L=i[10],C=i[11],s[8]=w*r+E*u+L*g+C*m,s[9]=w*n+E*p+L*f+C*_,s[10]=w*a+E*c+L*y+C*h,s[11]=w*o+E*x+L*v+C*A,w=i[12],E=i[13],L=i[14],C=i[15],s[12]=w*r+E*u+L*g+C*m,s[13]=w*n+E*p+L*f+C*_,s[14]=w*a+E*c+L*y+C*h,s[15]=w*o+E*x+L*v+C*A,s}},5268:function(d){d.exports=function(s,e,i,r,n,a,o){var u=1/(e-i),p=1/(r-n),c=1/(a-o);return s[0]=-2*u,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*p,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*c,s[11]=0,s[12]=(e+i)*u,s[13]=(n+r)*p,s[14]=(o+a)*c,s[15]=1,s}},1120:function(d){d.exports=function(s,e,i,r,n){var a=1/Math.tan(e/2),o=1/(r-n);return s[0]=a/i,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=a,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=(n+r)*o,s[11]=-1,s[12]=0,s[13]=0,s[14]=2*n*r*o,s[15]=0,s}},4422:function(d){d.exports=function(s,e,i,r){var n,a,o,u,p,c,x,g,f,y,v,m,_,h,A,w,E,L,C,P,D,G,I,H,N=r[0],F=r[1],V=r[2],q=Math.sqrt(N*N+F*F+V*V);return Math.abs(q)<1e-6?null:(N*=q=1/q,F*=q,V*=q,n=Math.sin(i),o=1-(a=Math.cos(i)),u=e[0],p=e[1],c=e[2],x=e[3],g=e[4],f=e[5],y=e[6],v=e[7],m=e[8],_=e[9],h=e[10],A=e[11],w=N*N*o+a,E=F*N*o+V*n,L=V*N*o-F*n,C=N*F*o-V*n,P=F*F*o+a,D=V*F*o+N*n,G=N*V*o+F*n,I=F*V*o-N*n,H=V*V*o+a,s[0]=u*w+g*E+m*L,s[1]=p*w+f*E+_*L,s[2]=c*w+y*E+h*L,s[3]=x*w+v*E+A*L,s[4]=u*C+g*P+m*D,s[5]=p*C+f*P+_*D,s[6]=c*C+y*P+h*D,s[7]=x*C+v*P+A*D,s[8]=u*G+g*I+m*H,s[9]=p*G+f*I+_*H,s[10]=c*G+y*I+h*H,s[11]=x*G+v*I+A*H,e!==s&&(s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15]),s)}},6109:function(d){d.exports=function(s,e,i){var r=Math.sin(i),n=Math.cos(i),a=e[4],o=e[5],u=e[6],p=e[7],c=e[8],x=e[9],g=e[10],f=e[11];return e!==s&&(s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=e[3],s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15]),s[4]=a*n+c*r,s[5]=o*n+x*r,s[6]=u*n+g*r,s[7]=p*n+f*r,s[8]=c*n-a*r,s[9]=x*n-o*r,s[10]=g*n-u*r,s[11]=f*n-p*r,s}},7115:function(d){d.exports=function(s,e,i){var r=Math.sin(i),n=Math.cos(i),a=e[0],o=e[1],u=e[2],p=e[3],c=e[8],x=e[9],g=e[10],f=e[11];return e!==s&&(s[4]=e[4],s[5]=e[5],s[6]=e[6],s[7]=e[7],s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15]),s[0]=a*n-c*r,s[1]=o*n-x*r,s[2]=u*n-g*r,s[3]=p*n-f*r,s[8]=a*r+c*n,s[9]=o*r+x*n,s[10]=u*r+g*n,s[11]=p*r+f*n,s}},5240:function(d){d.exports=function(s,e,i){var r=Math.sin(i),n=Math.cos(i),a=e[0],o=e[1],u=e[2],p=e[3],c=e[4],x=e[5],g=e[6],f=e[7];return e!==s&&(s[8]=e[8],s[9]=e[9],s[10]=e[10],s[11]=e[11],s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15]),s[0]=a*n+c*r,s[1]=o*n+x*r,s[2]=u*n+g*r,s[3]=p*n+f*r,s[4]=c*n-a*r,s[5]=x*n-o*r,s[6]=g*n-u*r,s[7]=f*n-p*r,s}},3668:function(d){d.exports=function(s,e,i){var r=i[0],n=i[1],a=i[2];return s[0]=e[0]*r,s[1]=e[1]*r,s[2]=e[2]*r,s[3]=e[3]*r,s[4]=e[4]*n,s[5]=e[5]*n,s[6]=e[6]*n,s[7]=e[7]*n,s[8]=e[8]*a,s[9]=e[9]*a,s[10]=e[10]*a,s[11]=e[11]*a,s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15],s}},998:function(d){d.exports=function(s,e,i){var r,n,a,o,u,p,c,x,g,f,y,v,m=i[0],_=i[1],h=i[2];return e===s?(s[12]=e[0]*m+e[4]*_+e[8]*h+e[12],s[13]=e[1]*m+e[5]*_+e[9]*h+e[13],s[14]=e[2]*m+e[6]*_+e[10]*h+e[14],s[15]=e[3]*m+e[7]*_+e[11]*h+e[15]):(r=e[0],n=e[1],a=e[2],o=e[3],u=e[4],p=e[5],c=e[6],x=e[7],g=e[8],f=e[9],y=e[10],v=e[11],s[0]=r,s[1]=n,s[2]=a,s[3]=o,s[4]=u,s[5]=p,s[6]=c,s[7]=x,s[8]=g,s[9]=f,s[10]=y,s[11]=v,s[12]=r*m+u*_+g*h+e[12],s[13]=n*m+p*_+f*h+e[13],s[14]=a*m+c*_+y*h+e[14],s[15]=o*m+x*_+v*h+e[15]),s}},2142:function(d){d.exports=function(s,e){if(s===e){var i=e[1],r=e[2],n=e[3],a=e[6],o=e[7],u=e[11];s[1]=e[4],s[2]=e[8],s[3]=e[12],s[4]=i,s[6]=e[9],s[7]=e[13],s[8]=r,s[9]=a,s[11]=e[14],s[12]=n,s[13]=o,s[14]=u}else s[0]=e[0],s[1]=e[4],s[2]=e[8],s[3]=e[12],s[4]=e[1],s[5]=e[5],s[6]=e[9],s[7]=e[13],s[8]=e[2],s[9]=e[6],s[10]=e[10],s[11]=e[14],s[12]=e[3],s[13]=e[7],s[14]=e[11],s[15]=e[15];return s}},4340:function(d,s,e){var i=e(957),r=e(7309);function n(u,p){for(var c=[0,0,0,0],x=0;x<4;++x)for(var g=0;g<4;++g)c[g]+=u[4*x+g]*p[x];return c}function a(u,p,c,x,g){for(var f=n(x,n(c,n(p,[u[0],u[1],u[2],1]))),y=0;y<3;++y)f[y]/=f[3];return[.5*g[0]*(1+f[0]),.5*g[1]*(1-f[1])]}function o(u,p){for(var c=[0,0,0],x=0;x<u.length;++x)for(var g=u[x],f=p[x],y=0;y<3;++y)c[y]+=f*g[y];return c}d.exports=function(u,p,c,x,g,f){if(u.length===1)return[0,u[0].slice()];for(var y=new Array(u.length),v=0;v<u.length;++v)y[v]=a(u[v],c,x,g,f);var m=0,_=1/0;for(v=0;v<y.length;++v){for(var h=0,A=0;A<2;++A)h+=Math.pow(y[v][A]-p[A],2);h<_&&(_=h,m=v)}var w=function(L,C){if(L.length===2){for(var P=0,D=0,G=0;G<2;++G)P+=Math.pow(C[G]-L[0][G],2),D+=Math.pow(C[G]-L[1][G],2);return(P=Math.sqrt(P))+(D=Math.sqrt(D))<1e-6?[1,0]:[D/(P+D),P/(D+P)]}if(L.length===3){var I=[0,0];return r(L[0],L[1],L[2],C,I),i(L,I)}return[]}(y,p),E=0;for(v=0;v<3;++v){if(w[v]<-.001||w[v]>1.0001)return null;E+=w[v]}return Math.abs(E-1)>.001?null:[m,o(u,w),w]}},2056:function(d,s,e){var i=e(6832),r=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),n=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),a=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),o=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),u=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),p=i([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),c=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),x=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),g=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),f=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),y=i([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.wireShader={vertex:a,fragment:o,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.pointShader={vertex:u,fragment:p,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},s.pickShader={vertex:c,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},s.pointPickShader={vertex:g,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},s.contourShader={vertex:f,fragment:y,attributes:[{name:"position",type:"vec3"}]}},8116:function(d,s,e){var i=e(5158),r=e(5827),n=e(2944),a=e(8931),o=e(115),u=e(104),p=e(7437),c=e(5050),x=e(9156),g=e(7212),f=e(5306),y=e(2056),v=e(4340),m=y.meshShader,_=y.wireShader,h=y.pointShader,A=y.pickShader,w=y.pointPickShader,E=y.contourShader,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function C(F,V,q,te,$,W,Z,J,ee,re,ae,oe,ce,pe,ve,we,xe,ge,Oe,Ae,Te,se,le,ne,me,Ee,be){this.gl=F,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=V,this.dirty=!0,this.triShader=q,this.lineShader=te,this.pointShader=$,this.pickShader=W,this.pointPickShader=Z,this.contourShader=J,this.trianglePositions=ee,this.triangleColors=ae,this.triangleNormals=ce,this.triangleUVs=oe,this.triangleIds=re,this.triangleVAO=pe,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ve,this.edgeColors=xe,this.edgeUVs=ge,this.edgeIds=we,this.edgeVAO=Oe,this.edgeCount=0,this.pointPositions=Ae,this.pointColors=se,this.pointUVs=le,this.pointSizes=ne,this.pointIds=Te,this.pointVAO=me,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Ee,this.contourVAO=be,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=L,this._view=L,this._projection=L,this._resolution=[1,1]}var P=C.prototype;function D(F,V){if(!V||!V.length)return 1;for(var q=0;q<V.length;++q){if(V.length<2)return 1;if(V[q][0]===F)return V[q][1];if(V[q][0]>F&&q>0){var te=(V[q][0]-F)/(V[q][0]-V[q-1][0]);return V[q][1]*(1-te)+te*V[q-1][1]}}return 1}function G(F){var V=i(F,h.vertex,h.fragment);return V.attributes.position.location=0,V.attributes.color.location=2,V.attributes.uv.location=3,V.attributes.pointSize.location=4,V}function I(F){var V=i(F,A.vertex,A.fragment);return V.attributes.position.location=0,V.attributes.id.location=1,V}function H(F){var V=i(F,w.vertex,w.fragment);return V.attributes.position.location=0,V.attributes.id.location=1,V.attributes.pointSize.location=4,V}function N(F){var V=i(F,E.vertex,E.fragment);return V.attributes.position.location=0,V}P.isOpaque=function(){return!this.hasAlpha},P.isTransparent=function(){return this.hasAlpha},P.pickSlots=1,P.setPickBase=function(F){this.pickId=F},P.highlight=function(F){if(F&&this.contourEnable){for(var V=g(this.cells,this.intensity,F.intensity),q=V.cells,te=V.vertexIds,$=V.vertexWeights,W=q.length,Z=f.mallocFloat32(6*W),J=0,ee=0;ee<W;++ee)for(var re=q[ee],ae=0;ae<2;++ae){var oe=re[0];re.length===2&&(oe=re[ae]);for(var ce=te[oe][0],pe=te[oe][1],ve=$[oe],we=1-ve,xe=this.positions[ce],ge=this.positions[pe],Oe=0;Oe<3;++Oe)Z[J++]=ve*xe[Oe]+we*ge[Oe]}this.contourCount=J/3|0,this.contourPositions.update(Z.subarray(0,J)),f.free(Z)}else this.contourCount=0},P.update=function(F){F=F||{};var V=this.gl;this.dirty=!0,"contourEnable"in F&&(this.contourEnable=F.contourEnable),"contourColor"in F&&(this.contourColor=F.contourColor),"lineWidth"in F&&(this.lineWidth=F.lineWidth),"lightPosition"in F&&(this.lightPosition=F.lightPosition),this.hasAlpha=!1,"opacity"in F&&(this.opacity=F.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in F&&(this.opacityscale=F.opacityscale,this.hasAlpha=!0),"ambient"in F&&(this.ambientLight=F.ambient),"diffuse"in F&&(this.diffuseLight=F.diffuse),"specular"in F&&(this.specularLight=F.specular),"roughness"in F&&(this.roughness=F.roughness),"fresnel"in F&&(this.fresnel=F.fresnel),F.texture?(this.texture.dispose(),this.texture=a(V,F.texture)):F.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=V.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=V.LINEAR,this.texture.setPixels(function(wt,Ot){for(var Ct=x({colormap:wt,nshades:256,format:"rgba"}),Ye=new Uint8Array(1024),Xe=0;Xe<256;++Xe){for(var Ve=Ct[Xe],We=0;We<3;++We)Ye[4*Xe+We]=Ve[We];Ye[4*Xe+3]=Ot?255*D(Xe/255,Ot):255*Ve[3]}return c(Ye,[256,256,4],[4,0,1])}(F.colormap,this.opacityscale)),this.texture.generateMipmap());var q=F.cells,te=F.positions;if(te&&q){var $=[],W=[],Z=[],J=[],ee=[],re=[],ae=[],oe=[],ce=[],pe=[],ve=[],we=[],xe=[],ge=[];this.cells=q,this.positions=te;var Oe=F.vertexNormals,Ae=F.cellNormals,Te=F.vertexNormalsEpsilon===void 0?1e-6:F.vertexNormalsEpsilon,se=F.faceNormalsEpsilon===void 0?1e-6:F.faceNormalsEpsilon;F.useFacetNormals&&!Ae&&(Ae=o.faceNormals(q,te,se)),Ae||Oe||(Oe=o.vertexNormals(q,te,Te));var le=F.vertexColors,ne=F.cellColors,me=F.meshColor||[1,1,1,1],Ee=F.vertexUVs,be=F.vertexIntensity,De=F.cellUVs,Ue=F.cellIntensity,he=1/0,ke=-1/0;if(!Ee&&!De)if(be)if(F.vertexIntensityBounds)he=+F.vertexIntensityBounds[0],ke=+F.vertexIntensityBounds[1];else for(var _e=0;_e<be.length;++_e){var Ce=be[_e];he=Math.min(he,Ce),ke=Math.max(ke,Ce)}else if(Ue)if(F.cellIntensityBounds)he=+F.cellIntensityBounds[0],ke=+F.cellIntensityBounds[1];else for(_e=0;_e<Ue.length;++_e)Ce=Ue[_e],he=Math.min(he,Ce),ke=Math.max(ke,Ce);else for(_e=0;_e<te.length;++_e)Ce=te[_e][2],he=Math.min(he,Ce),ke=Math.max(ke,Ce);this.intensity=be||Ue||function(wt){for(var Ot=wt.length,Ct=new Array(Ot),Ye=0;Ye<Ot;++Ye)Ct[Ye]=wt[Ye][2];return Ct}(te),this.pickVertex=!(Ue||ne);var Fe=F.pointSizes,Re=F.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],_e=0;_e<te.length;++_e)for(var He=te[_e],Ge=0;Ge<3;++Ge)!isNaN(He[Ge])&&isFinite(He[Ge])&&(this.bounds[0][Ge]=Math.min(this.bounds[0][Ge],He[Ge]),this.bounds[1][Ge]=Math.max(this.bounds[1][Ge],He[Ge]));var $e=0,st=0,Ke=0;e:for(_e=0;_e<q.length;++_e){var gt=q[_e];switch(gt.length){case 1:for(He=te[at=gt[0]],Ge=0;Ge<3;++Ge)if(isNaN(He[Ge])||!isFinite(He[Ge]))continue e;pe.push(He[0],He[1],He[2]),rt=le?le[at]:ne?ne[_e]:me,this.opacityscale&&be?W.push(rt[0],rt[1],rt[2],this.opacity*D((be[at]-he)/(ke-he),this.opacityscale)):rt.length===3?ve.push(rt[0],rt[1],rt[2],this.opacity):(ve.push(rt[0],rt[1],rt[2],rt[3]*this.opacity),rt[3]<1&&(this.hasAlpha=!0)),xt=Ee?Ee[at]:be?[(be[at]-he)/(ke-he),0]:De?De[_e]:Ue?[(Ue[_e]-he)/(ke-he),0]:[(He[2]-he)/(ke-he),0],we.push(xt[0],xt[1]),Fe?xe.push(Fe[at]):xe.push(Re),ge.push(_e),Ke+=1;break;case 2:for(Ge=0;Ge<2;++Ge){He=te[at=gt[Ge]];for(var mt=0;mt<3;++mt)if(isNaN(He[mt])||!isFinite(He[mt]))continue e}for(Ge=0;Ge<2;++Ge)He=te[at=gt[Ge]],re.push(He[0],He[1],He[2]),rt=le?le[at]:ne?ne[_e]:me,this.opacityscale&&be?W.push(rt[0],rt[1],rt[2],this.opacity*D((be[at]-he)/(ke-he),this.opacityscale)):rt.length===3?ae.push(rt[0],rt[1],rt[2],this.opacity):(ae.push(rt[0],rt[1],rt[2],rt[3]*this.opacity),rt[3]<1&&(this.hasAlpha=!0)),xt=Ee?Ee[at]:be?[(be[at]-he)/(ke-he),0]:De?De[_e]:Ue?[(Ue[_e]-he)/(ke-he),0]:[(He[2]-he)/(ke-he),0],oe.push(xt[0],xt[1]),ce.push(_e);st+=1;break;case 3:for(Ge=0;Ge<3;++Ge)for(He=te[at=gt[Ge]],mt=0;mt<3;++mt)if(isNaN(He[mt])||!isFinite(He[mt]))continue e;for(Ge=0;Ge<3;++Ge){var at,rt,xt,Tt;He=te[at=gt[2-Ge]],$.push(He[0],He[1],He[2]),(rt=le?le[at]:ne?ne[_e]:me)?this.opacityscale&&be?W.push(rt[0],rt[1],rt[2],this.opacity*D((be[at]-he)/(ke-he),this.opacityscale)):rt.length===3?W.push(rt[0],rt[1],rt[2],this.opacity):(W.push(rt[0],rt[1],rt[2],rt[3]*this.opacity),rt[3]<1&&(this.hasAlpha=!0)):W.push(.5,.5,.5,1),xt=Ee?Ee[at]:be?[(be[at]-he)/(ke-he),0]:De?De[_e]:Ue?[(Ue[_e]-he)/(ke-he),0]:[(He[2]-he)/(ke-he),0],J.push(xt[0],xt[1]),Tt=Oe?Oe[at]:Ae[_e],Z.push(Tt[0],Tt[1],Tt[2]),ee.push(_e)}$e+=1}}this.pointCount=Ke,this.edgeCount=st,this.triangleCount=$e,this.pointPositions.update(pe),this.pointColors.update(ve),this.pointUVs.update(we),this.pointSizes.update(xe),this.pointIds.update(new Uint32Array(ge)),this.edgePositions.update(re),this.edgeColors.update(ae),this.edgeUVs.update(oe),this.edgeIds.update(new Uint32Array(ce)),this.trianglePositions.update($),this.triangleColors.update(W),this.triangleUVs.update(J),this.triangleNormals.update(Z),this.triangleIds.update(new Uint32Array(ee))}},P.drawTransparent=P.draw=function(F){F=F||{};for(var V=this.gl,q=F.model||L,te=F.view||L,$=F.projection||L,W=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],Z=0;Z<3;++Z)W[0][Z]=Math.max(W[0][Z],this.clipBounds[0][Z]),W[1][Z]=Math.min(W[1][Z],this.clipBounds[1][Z]);var J={model:q,view:te,projection:$,inverseModel:L.slice(),clipBounds:W,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};J.inverseModel=p(J.inverseModel,J.model),V.disable(V.CULL_FACE),this.texture.bind(0);var ee=new Array(16);for(u(ee,J.view,J.model),u(ee,J.projection,ee),p(ee,ee),Z=0;Z<3;++Z)J.eyePosition[Z]=ee[12+Z]/ee[15];var re,ae=ee[15];for(Z=0;Z<3;++Z)ae+=this.lightPosition[Z]*ee[4*Z+3];for(Z=0;Z<3;++Z){for(var oe=ee[12+Z],ce=0;ce<3;++ce)oe+=ee[4*ce+Z]*this.lightPosition[ce];J.lightPosition[Z]=oe/ae}this.triangleCount>0&&((re=this.triShader).bind(),re.uniforms=J,this.triangleVAO.bind(),V.drawArrays(V.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((re=this.lineShader).bind(),re.uniforms=J,this.edgeVAO.bind(),V.lineWidth(this.lineWidth*this.pixelRatio),V.drawArrays(V.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((re=this.pointShader).bind(),re.uniforms=J,this.pointVAO.bind(),V.drawArrays(V.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((re=this.contourShader).bind(),re.uniforms=J,this.contourVAO.bind(),V.drawArrays(V.LINES,0,this.contourCount),this.contourVAO.unbind())},P.drawPick=function(F){F=F||{};for(var V=this.gl,q=F.model||L,te=F.view||L,$=F.projection||L,W=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],Z=0;Z<3;++Z)W[0][Z]=Math.max(W[0][Z],this.clipBounds[0][Z]),W[1][Z]=Math.min(W[1][Z],this.clipBounds[1][Z]);this._model=[].slice.call(q),this._view=[].slice.call(te),this._projection=[].slice.call($),this._resolution=[V.drawingBufferWidth,V.drawingBufferHeight];var J,ee={model:q,view:te,projection:$,clipBounds:W,pickId:this.pickId/255};(J=this.pickShader).bind(),J.uniforms=ee,this.triangleCount>0&&(this.triangleVAO.bind(),V.drawArrays(V.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),V.lineWidth(this.lineWidth*this.pixelRatio),V.drawArrays(V.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((J=this.pointPickShader).bind(),J.uniforms=ee,this.pointVAO.bind(),V.drawArrays(V.POINTS,0,this.pointCount),this.pointVAO.unbind())},P.pick=function(F){if(!F||F.id!==this.pickId)return null;for(var V=F.value[0]+256*F.value[1]+65536*F.value[2],q=this.cells[V],te=this.positions,$=new Array(q.length),W=0;W<q.length;++W)$[W]=te[q[W]];var Z=F.coord[0],J=F.coord[1];if(!this.pickVertex){var ee=this.positions[q[0]],re=this.positions[q[1]],ae=this.positions[q[2]],oe=[(ee[0]+re[0]+ae[0])/3,(ee[1]+re[1]+ae[1])/3,(ee[2]+re[2]+ae[2])/3];return{_cellCenter:!0,position:[Z,J],index:V,cell:q,cellId:V,intensity:this.intensity[V],dataCoordinate:oe}}var ce=v($,[Z*this.pixelRatio,this._resolution[1]-J*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ce)return null;var pe=ce[2],ve=0;for(W=0;W<q.length;++W)ve+=pe[W]*this.intensity[q[W]];return{position:ce[1],index:q[ce[0]],cell:q,cellId:V,intensity:ve,dataCoordinate:this.positions[q[ce[0]]]}},P.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},d.exports=function(F,V){if(arguments.length===1&&(F=(V=F).gl),!(F.getExtension("OES_standard_derivatives")||F.getExtension("MOZ_OES_standard_derivatives")||F.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var q=function(Ue){var he=i(Ue,m.vertex,m.fragment);return he.attributes.position.location=0,he.attributes.color.location=2,he.attributes.uv.location=3,he.attributes.normal.location=4,he}(F),te=function(Ue){var he=i(Ue,_.vertex,_.fragment);return he.attributes.position.location=0,he.attributes.color.location=2,he.attributes.uv.location=3,he}(F),$=G(F),W=I(F),Z=H(F),J=N(F),ee=a(F,c(new Uint8Array([255,255,255,255]),[1,1,4]));ee.generateMipmap(),ee.minFilter=F.LINEAR_MIPMAP_LINEAR,ee.magFilter=F.LINEAR;var re=r(F),ae=r(F),oe=r(F),ce=r(F),pe=r(F),ve=n(F,[{buffer:re,type:F.FLOAT,size:3},{buffer:pe,type:F.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ae,type:F.FLOAT,size:4},{buffer:oe,type:F.FLOAT,size:2},{buffer:ce,type:F.FLOAT,size:3}]),we=r(F),xe=r(F),ge=r(F),Oe=r(F),Ae=n(F,[{buffer:we,type:F.FLOAT,size:3},{buffer:Oe,type:F.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:xe,type:F.FLOAT,size:4},{buffer:ge,type:F.FLOAT,size:2}]),Te=r(F),se=r(F),le=r(F),ne=r(F),me=r(F),Ee=n(F,[{buffer:Te,type:F.FLOAT,size:3},{buffer:me,type:F.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:se,type:F.FLOAT,size:4},{buffer:le,type:F.FLOAT,size:2},{buffer:ne,type:F.FLOAT,size:1}]),be=r(F),De=new C(F,ee,q,te,$,W,Z,J,re,pe,ae,oe,ce,ve,we,Oe,xe,ge,Ae,Te,me,se,le,ne,Ee,be,n(F,[{buffer:be,type:F.FLOAT,size:3}]));return De.update(V),De}},4554:function(d,s,e){d.exports=function(c){var x=c.gl;return new a(c,i(x,[0,0,0,1,1,0,1,1]),r(x,n.boxVert,n.lineFrag))};var i=e(5827),r=e(5158),n=e(2709);function a(c,x,g){this.plot=c,this.vbo=x,this.shader=g}var o,u,p=a.prototype;p.bind=function(){var c=this.shader;this.vbo.bind(),this.shader.bind(),c.attributes.coord.pointer(),c.uniforms.screenBox=this.plot.screenBox},p.drawBox=(o=[0,0],u=[0,0],function(c,x,g,f,y){var v=this.plot,m=this.shader,_=v.gl;o[0]=c,o[1]=x,u[0]=g,u[1]=f,m.uniforms.lo=o,m.uniforms.hi=u,m.uniforms.color=y,_.drawArrays(_.TRIANGLE_STRIP,0,4)}),p.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3016:function(d,s,e){d.exports=function(v){var m=v.gl;return new o(v,i(m),r(m,a.gridVert,a.gridFrag),r(m,a.tickVert,a.gridFrag))};var i=e(5827),r=e(5158),n=e(5070),a=e(2709);function o(v,m,_,h){this.plot=v,this.vbo=m,this.shader=_,this.tickShader=h,this.ticks=[[],[]]}function u(v,m){return v-m}var p,c,x,g,f,y=o.prototype;y.draw=(p=[0,0],c=[0,0],x=[0,0],function(){for(var v=this.plot,m=this.vbo,_=this.shader,h=this.ticks,A=v.gl,w=v._tickBounds,E=v.dataBox,L=v.viewBox,C=v.gridLineWidth,P=v.gridLineColor,D=v.gridLineEnable,G=v.pixelRatio,I=0;I<2;++I){var H=w[I],N=w[I+2]-H,F=.5*(E[I+2]+E[I]),V=E[I+2]-E[I];c[I]=2*N/V,p[I]=2*(H-F)/V}_.bind(),m.bind(),_.attributes.dataCoord.pointer(),_.uniforms.dataShift=p,_.uniforms.dataScale=c;var q=0;for(I=0;I<2;++I){x[0]=x[1]=0,x[I]=1,_.uniforms.dataAxis=x,_.uniforms.lineWidth=C[I]/(L[I+2]-L[I])*G,_.uniforms.color=P[I];var te=6*h[I].length;D[I]&&te&&A.drawArrays(A.TRIANGLES,q,te),q+=te}}),y.drawTickMarks=function(){var v=[0,0],m=[0,0],_=[1,0],h=[0,1],A=[0,0],w=[0,0];return function(){for(var E=this.plot,L=this.vbo,C=this.tickShader,P=this.ticks,D=E.gl,G=E._tickBounds,I=E.dataBox,H=E.viewBox,N=E.pixelRatio,F=E.screenBox,V=F[2]-F[0],q=F[3]-F[1],te=H[2]-H[0],$=H[3]-H[1],W=0;W<2;++W){var Z=G[W],J=G[W+2]-Z,ee=.5*(I[W+2]+I[W]),re=I[W+2]-I[W];m[W]=2*J/re,v[W]=2*(Z-ee)/re}m[0]*=te/V,v[0]*=te/V,m[1]*=$/q,v[1]*=$/q,C.bind(),L.bind(),C.attributes.dataCoord.pointer();var ae=C.uniforms;ae.dataShift=v,ae.dataScale=m;var oe=E.tickMarkLength,ce=E.tickMarkWidth,pe=E.tickMarkColor,ve=6*P[0].length,we=Math.min(n.ge(P[0],(I[0]-G[0])/(G[2]-G[0]),u),P[0].length),xe=Math.min(n.gt(P[0],(I[2]-G[0])/(G[2]-G[0]),u),P[0].length),ge=0+6*we,Oe=6*Math.max(0,xe-we),Ae=Math.min(n.ge(P[1],(I[1]-G[1])/(G[3]-G[1]),u),P[1].length),Te=Math.min(n.gt(P[1],(I[3]-G[1])/(G[3]-G[1]),u),P[1].length),se=ve+6*Ae,le=6*Math.max(0,Te-Ae);A[0]=2*(H[0]-oe[1])/V-1,A[1]=(H[3]+H[1])/q-1,w[0]=oe[1]*N/V,w[1]=ce[1]*N/q,le&&(ae.color=pe[1],ae.tickScale=w,ae.dataAxis=h,ae.screenOffset=A,D.drawArrays(D.TRIANGLES,se,le)),A[0]=(H[2]+H[0])/V-1,A[1]=2*(H[1]-oe[0])/q-1,w[0]=ce[0]*N/V,w[1]=oe[0]*N/q,Oe&&(ae.color=pe[0],ae.tickScale=w,ae.dataAxis=_,ae.screenOffset=A,D.drawArrays(D.TRIANGLES,ge,Oe)),A[0]=2*(H[2]+oe[3])/V-1,A[1]=(H[3]+H[1])/q-1,w[0]=oe[3]*N/V,w[1]=ce[3]*N/q,le&&(ae.color=pe[3],ae.tickScale=w,ae.dataAxis=h,ae.screenOffset=A,D.drawArrays(D.TRIANGLES,se,le)),A[0]=(H[2]+H[0])/V-1,A[1]=2*(H[3]+oe[2])/q-1,w[0]=ce[2]*N/V,w[1]=oe[2]*N/q,Oe&&(ae.color=pe[2],ae.tickScale=w,ae.dataAxis=_,ae.screenOffset=A,D.drawArrays(D.TRIANGLES,ge,Oe))}}(),y.update=(g=[1,1,-1,-1,1,-1],f=[1,-1,1,1,-1,-1],function(v){for(var m=v.ticks,_=v.bounds,h=new Float32Array(18*(m[0].length+m[1].length)),A=(this.plot.zeroLineEnable,0),w=[[],[]],E=0;E<2;++E)for(var L=w[E],C=m[E],P=_[E],D=_[E+2],G=0;G<C.length;++G){var I=(C[G].x-P)/(D-P);L.push(I);for(var H=0;H<6;++H)h[A++]=I,h[A++]=g[H],h[A++]=f[H]}this.ticks=w,this.vbo.update(h)}),y.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},1154:function(d,s,e){d.exports=function(c){var x=c.gl;return new a(c,i(x,[-1,-1,-1,1,1,-1,1,1]),r(x,n.lineVert,n.lineFrag))};var i=e(5827),r=e(5158),n=e(2709);function a(c,x,g){this.plot=c,this.vbo=x,this.shader=g}var o,u,p=a.prototype;p.bind=function(){var c=this.shader;this.vbo.bind(),this.shader.bind(),c.attributes.coord.pointer(),c.uniforms.screenBox=this.plot.screenBox},p.drawLine=(o=[0,0],u=[0,0],function(c,x,g,f,y,v){var m=this.plot,_=this.shader,h=m.gl;o[0]=c,o[1]=x,u[0]=g,u[1]=f,_.uniforms.start=o,_.uniforms.end=u,_.uniforms.width=y*m.pixelRatio,_.uniforms.color=v,h.drawArrays(h.TRIANGLE_STRIP,0,4)}),p.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2709:function(d,s,e){var i=e(6832),r=i([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);d.exports={lineVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:r,textVert:i([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:r,gridVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:r,boxVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},5613:function(d,s,e){d.exports=function(m){var _=m.gl;return new u(m,i(_),r(_,o.textVert,o.textFrag))};var i=e(5827),r=e(5158),n=e(6946),a=e(5070),o=e(2709);function u(m,_,h){this.plot=m,this.vbo=_,this.shader=h,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var p,c,x,g,f,y,v=u.prototype;v.drawTicks=(p=[0,0],c=[0,0],x=[0,0],function(m){var _=this.plot,h=this.shader,A=this.tickX[m],w=this.tickOffset[m],E=_.gl,L=_.viewBox,C=_.dataBox,P=_.screenBox,D=_.pixelRatio,G=_.tickEnable,I=_.tickPad,H=_.tickColor,N=_.tickAngle,F=_.labelEnable,V=_.labelPad,q=_.labelColor,te=_.labelAngle,$=this.labelOffset[m],W=this.labelCount[m],Z=a.lt(A,C[m]),J=a.le(A,C[m+2]);p[0]=p[1]=0,p[m]=1,c[m]=(L[2+m]+L[m])/(P[2+m]-P[m])-1;var ee=2/P[2+(1^m)]-P[1^m];c[1^m]=ee*L[1^m]-1,G[m]&&(c[1^m]-=ee*D*I[m],Z<J&&w[J]>w[Z]&&(h.uniforms.dataAxis=p,h.uniforms.screenOffset=c,h.uniforms.color=H[m],h.uniforms.angle=N[m],E.drawArrays(E.TRIANGLES,w[Z],w[J]-w[Z]))),F[m]&&W&&(c[1^m]-=ee*D*V[m],h.uniforms.dataAxis=x,h.uniforms.screenOffset=c,h.uniforms.color=q[m],h.uniforms.angle=te[m],E.drawArrays(E.TRIANGLES,$,W)),c[1^m]=ee*L[2+(1^m)]-1,G[m+2]&&(c[1^m]+=ee*D*I[m+2],Z<J&&w[J]>w[Z]&&(h.uniforms.dataAxis=p,h.uniforms.screenOffset=c,h.uniforms.color=H[m+2],h.uniforms.angle=N[m+2],E.drawArrays(E.TRIANGLES,w[Z],w[J]-w[Z]))),F[m+2]&&W&&(c[1^m]+=ee*D*V[m+2],h.uniforms.dataAxis=x,h.uniforms.screenOffset=c,h.uniforms.color=q[m+2],h.uniforms.angle=te[m+2],E.drawArrays(E.TRIANGLES,$,W))}),v.drawTitle=function(){var m=[0,0],_=[0,0];return function(){var h=this.plot,A=this.shader,w=h.gl,E=h.screenBox,L=h.titleCenter,C=h.titleAngle,P=h.titleColor,D=h.pixelRatio;if(this.titleCount){for(var G=0;G<2;++G)_[G]=2*(L[G]*D-E[G])/(E[2+G]-E[G])-1;A.bind(),A.uniforms.dataAxis=m,A.uniforms.screenOffset=_,A.uniforms.angle=C,A.uniforms.color=P,w.drawArrays(w.TRIANGLES,this.titleOffset,this.titleCount)}}}(),v.bind=(g=[0,0],f=[0,0],y=[0,0],function(){var m=this.plot,_=this.shader,h=m._tickBounds,A=m.dataBox,w=m.screenBox,E=m.viewBox;_.bind();for(var L=0;L<2;++L){var C=h[L],P=h[L+2]-C,D=.5*(A[L+2]+A[L]),G=A[L+2]-A[L],I=E[L],H=E[L+2]-I,N=w[L],F=w[L+2]-N;f[L]=2*P/G*H/F,g[L]=2*(C-D)/G*H/F}y[1]=2*m.pixelRatio/(w[3]-w[1]),y[0]=y[1]*(w[3]-w[1])/(w[2]-w[0]),_.uniforms.dataScale=f,_.uniforms.dataShift=g,_.uniforms.textScale=y,this.vbo.bind(),_.attributes.textCoordinate.pointer()}),v.update=function(m){var _,h,A,w,E,L=[],C=m.ticks,P=m.bounds;for(E=0;E<2;++E){var D=[Math.floor(L.length/3)],G=[-1/0],I=C[E];for(_=0;_<I.length;++_){var H=I[_],N=H.x,F=H.text,V=H.font||"sans-serif";w=H.fontSize||12;for(var q=1/(P[E+2]-P[E]),te=P[E],$=F.split(`
`),W=0;W<$.length;W++)for(A=n(V,$[W]).data,h=0;h<A.length;h+=2)L.push(A[h]*w,-A[h+1]*w-W*w*1.2,(N-te)*q);D.push(Math.floor(L.length/3)),G.push(N)}this.tickOffset[E]=D,this.tickX[E]=G}for(E=0;E<2;++E){for(this.labelOffset[E]=Math.floor(L.length/3),A=n(m.labelFont[E],m.labels[E],{textAlign:"center"}).data,w=m.labelSize[E],_=0;_<A.length;_+=2)L.push(A[_]*w,-A[_+1]*w,0);this.labelCount[E]=Math.floor(L.length/3)-this.labelOffset[E]}for(this.titleOffset=Math.floor(L.length/3),A=n(m.titleFont,m.title).data,w=m.titleSize,_=0;_<A.length;_+=2)L.push(A[_]*w,-A[_+1]*w,0);this.titleCount=Math.floor(L.length/3)-this.titleOffset,this.vbo.update(L)},v.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2117:function(d,s,e){d.exports=function(g){var f=g.gl,y=new u(f,i(f,[f.drawingBufferWidth,f.drawingBufferHeight]));return y.grid=r(y),y.text=n(y),y.line=a(y),y.box=o(y),y.update(g),y};var i=e(2611),r=e(3016),n=e(5613),a=e(1154),o=e(4554);function u(g,f){this.gl=g,this.pickBuffer=f,this.screenBox=[0,0,g.drawingBufferWidth,g.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var p=u.prototype;function c(g){for(var f=g.slice(),y=0;y<f.length;++y)f[y]=f[y].slice();return f}function x(g,f){return g.x-f.x}p.setDirty=function(){this.dirty=this.pickDirty=!0},p.setOverlayDirty=function(){this.dirty=!0},p.nextDepthValue=function(){return this._depthCounter++/65536},p.draw=function(){var g=this.gl,f=this.screenBox,y=this.viewBox,v=this.dataBox,m=this.pixelRatio,_=this.grid,h=this.line,A=this.text,w=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,g.bindFramebuffer(g.FRAMEBUFFER,null),g.enable(g.SCISSOR_TEST),g.disable(g.DEPTH_TEST),g.depthFunc(g.LESS),g.depthMask(!1),g.enable(g.BLEND),g.blendEquation(g.FUNC_ADD,g.FUNC_ADD),g.blendFunc(g.ONE,g.ONE_MINUS_SRC_ALPHA),this.borderColor){g.scissor(f[0],f[1],f[2]-f[0],f[3]-f[1]);var E=this.borderColor;g.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT)}g.scissor(y[0],y[1],y[2]-y[0],y[3]-y[1]),g.viewport(y[0],y[1],y[2]-y[0],y[3]-y[1]);var L=this.backgroundColor;g.clearColor(L[0]*L[3],L[1]*L[3],L[2]*L[3],L[3]),g.clear(g.COLOR_BUFFER_BIT),_.draw();var C=this.zeroLineEnable,P=this.zeroLineColor,D=this.zeroLineWidth;if(C[0]||C[1]){h.bind();for(var G=0;G<2;++G)if(C[G]&&v[G]<=0&&v[G+2]>=0){var I=f[G]-v[G]*(f[G+2]-f[G])/(v[G+2]-v[G]);G===0?h.drawLine(I,f[1],I,f[3],D[G],P[G]):h.drawLine(f[0],I,f[2],I,D[G],P[G])}}for(G=0;G<w.length;++G)w[G].draw();g.viewport(f[0],f[1],f[2]-f[0],f[3]-f[1]),g.scissor(f[0],f[1],f[2]-f[0],f[3]-f[1]),this.grid.drawTickMarks(),h.bind();var H=this.borderLineEnable,N=this.borderLineWidth,F=this.borderLineColor;for(H[1]&&h.drawLine(y[0],y[1]-.5*N[1]*m,y[0],y[3]+.5*N[3]*m,N[1],F[1]),H[0]&&h.drawLine(y[0]-.5*N[0]*m,y[1],y[2]+.5*N[2]*m,y[1],N[0],F[0]),H[3]&&h.drawLine(y[2],y[1]-.5*N[1]*m,y[2],y[3]+.5*N[3]*m,N[3],F[3]),H[2]&&h.drawLine(y[0]-.5*N[0]*m,y[3],y[2]+.5*N[2]*m,y[3],N[2],F[2]),A.bind(),G=0;G<2;++G)A.drawTicks(G);this.titleEnable&&A.drawTitle();var V=this.overlays;for(G=0;G<V.length;++G)V[G].draw();g.disable(g.SCISSOR_TEST),g.disable(g.BLEND),g.depthMask(!0)}},p.drawPick=function(){if(!this.static){var g=this.pickBuffer;this.gl,this._pickTimeout=null,g.begin();for(var f=1,y=this.objects,v=0;v<y.length;++v)f=y[v].drawPick(f);g.end()}},p.pick=function(g,f){if(!this.static){var y=this.pixelRatio,v=this.pickPixelRatio,m=this.viewBox,_=0|Math.round((g-m[0]/y)*v),h=0|Math.round((f-m[1]/y)*v),A=this.pickBuffer.query(_,h,this.pickRadius);if(!A)return null;for(var w=A.id+(A.value[0]<<8)+(A.value[1]<<16)+(A.value[2]<<24),E=this.objects,L=0;L<E.length;++L){var C=E[L].pick(_,h,w);if(C)return C}return null}},p.setScreenBox=function(g){var f=this.screenBox,y=this.pixelRatio;f[0]=0|Math.round(g[0]*y),f[1]=0|Math.round(g[1]*y),f[2]=0|Math.round(g[2]*y),f[3]=0|Math.round(g[3]*y),this.setDirty()},p.setDataBox=function(g){var f=this.dataBox;(f[0]!==g[0]||f[1]!==g[1]||f[2]!==g[2]||f[3]!==g[3])&&(f[0]=g[0],f[1]=g[1],f[2]=g[2],f[3]=g[3],this.setDirty())},p.setViewBox=function(g){var f=this.pixelRatio,y=this.viewBox;y[0]=0|Math.round(g[0]*f),y[1]=0|Math.round(g[1]*f),y[2]=0|Math.round(g[2]*f),y[3]=0|Math.round(g[3]*f);var v=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((g[2]-g[0])*v),0|Math.round((g[3]-g[1])*v)],this.setDirty()},p.update=function(g){g=g||{};var f=this.gl;this.pixelRatio=g.pixelRatio||1;var y=this.pixelRatio;this.pickPixelRatio=Math.max(y,1),this.setScreenBox(g.screenBox||[0,0,f.drawingBufferWidth/y,f.drawingBufferHeight/y]),this.screenBox,this.setViewBox(g.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/y,.125*(this.screenBox[3]-this.screenBox[1])/y,.875*(this.screenBox[2]-this.screenBox[0])/y,.875*(this.screenBox[3]-this.screenBox[1])/y]);var v=this.viewBox,m=(v[2]-v[0])/(v[3]-v[1]);this.setDataBox(g.dataBox||[-10,-10/m,10,10/m]),this.borderColor=g.borderColor!==!1&&(g.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(g.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(g.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(g.gridLineWidth||[1,1]).slice(),this.gridLineColor=c(g.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(g.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(g.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=c(g.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(g.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(g.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=c(g.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(g.titleCenter||[.5*(v[0]+v[2])/y,(v[3]+120)/y]).slice(),this.titleEnable=!("titleEnable"in g)||!!g.titleEnable,this.titleAngle=g.titleAngle||0,this.titleColor=(g.titleColor||[0,0,0,1]).slice(),this.labelPad=(g.labelPad||[15,15,15,15]).slice(),this.labelAngle=(g.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(g.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=c(g.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(g.tickPad||[15,15,15,15]).slice(),this.tickAngle=(g.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(g.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=c(g.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(g.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(g.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=c(g.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var _=g.ticks||[[],[]],h=this._tickBounds;h[0]=h[1]=1/0,h[2]=h[3]=-1/0;for(var A=0;A<2;++A){var w=_[A].slice(0);w.length!==0&&(w.sort(x),h[A]=Math.min(h[A],w[0].x),h[A+2]=Math.max(h[A+2],w[w.length-1].x))}this.grid.update({bounds:h,ticks:_}),this.text.update({bounds:h,ticks:_,labels:g.labels||["x","y"],labelSize:g.labelSize||[12,12],labelFont:g.labelFont||["sans-serif","sans-serif"],title:g.title||"",titleSize:g.titleSize||18,titleFont:g.titleFont||"sans-serif"}),this.static=!!g.static,this.setDirty()},p.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var g=this.objects.length-1;g>=0;--g)this.objects[g].dispose();for(this.objects.length=0,g=this.overlays.length-1;g>=0;--g)this.overlays[g].dispose();this.overlays.length=0,this.gl=null},p.addObject=function(g){this.objects.indexOf(g)<0&&(this.objects.push(g),this.setDirty())},p.removeObject=function(g){for(var f=this.objects,y=0;y<f.length;++y)if(f[y]===g){f.splice(y,1),this.setDirty();break}},p.addOverlay=function(g){this.overlays.indexOf(g)<0&&(this.overlays.push(g),this.setOverlayDirty())},p.removeOverlay=function(g){for(var f=this.overlays,y=0;y<f.length;++y)if(f[y]===g){f.splice(y,1),this.setOverlayDirty();break}}},4296:function(d,s,e){d.exports=function(p,c){p=p||document.body;var x=[.01,1/0];"distanceLimits"in(c=c||{})&&(x[0]=c.distanceLimits[0],x[1]=c.distanceLimits[1]),"zoomMin"in c&&(x[0]=c.zoomMin),"zoomMax"in c&&(x[1]=c.zoomMax);var g=r({center:c.center||[0,0,0],up:c.up||[0,1,0],eye:c.eye||[0,0,10],mode:c.mode||"orbit",distanceLimits:x}),f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=0,v=p.clientWidth,m=p.clientHeight,_={keyBindingMode:"rotate",enableWheel:!0,view:g,element:p,delay:c.delay||16,rotateSpeed:c.rotateSpeed||1,zoomSpeed:c.zoomSpeed||1,translateSpeed:c.translateSpeed||1,flipX:!!c.flipX,flipY:!!c.flipY,modes:g.modes,_ortho:c._ortho||c.projection&&c.projection.type==="orthographic"||!1,tick:function(){var h=i(),A=this.delay,w=h-2*A;g.idle(h-A),g.recalcMatrix(w),g.flush(h-(100+2*A));for(var E=!0,L=g.computedMatrix,C=0;C<16;++C)E=E&&f[C]===L[C],f[C]=L[C];var P=p.clientWidth===v&&p.clientHeight===m;return v=p.clientWidth,m=p.clientHeight,E?!P:(y=Math.exp(g.computedRadius[0]),!0)},lookAt:function(h,A,w){g.lookAt(g.lastT(),h,A,w)},rotate:function(h,A,w){g.rotate(g.lastT(),h,A,w)},pan:function(h,A,w){g.pan(g.lastT(),h,A,w)},translate:function(h,A,w){g.translate(g.lastT(),h,A,w)}};return Object.defineProperties(_,{matrix:{get:function(){return g.computedMatrix},set:function(h){return g.setMatrix(g.lastT(),h),g.computedMatrix},enumerable:!0},mode:{get:function(){return g.getMode()},set:function(h){var A=g.computedUp.slice(),w=g.computedEye.slice(),E=g.computedCenter.slice();if(g.setMode(h),h==="turntable"){var L=i();g._active.lookAt(L,w,E,A),g._active.lookAt(L+500,w,E,[0,0,1]),g._active.flush(L)}return g.getMode()},enumerable:!0},center:{get:function(){return g.computedCenter},set:function(h){return g.lookAt(g.lastT(),null,h),g.computedCenter},enumerable:!0},eye:{get:function(){return g.computedEye},set:function(h){return g.lookAt(g.lastT(),h),g.computedEye},enumerable:!0},up:{get:function(){return g.computedUp},set:function(h){return g.lookAt(g.lastT(),null,null,h),g.computedUp},enumerable:!0},distance:{get:function(){return y},set:function(h){return g.setDistance(g.lastT(),h),h},enumerable:!0},distanceLimits:{get:function(){return g.getDistanceLimits(x)},set:function(h){return g.setDistanceLimits(h),h},enumerable:!0}}),p.addEventListener("contextmenu",function(h){return h.preventDefault(),!1}),_._lastX=-1,_._lastY=-1,_._lastMods={shift:!1,control:!1,alt:!1,meta:!1},_.enableMouseListeners=function(){function h(A,w,E,L){var C=_.keyBindingMode;if(C!==!1){var P=C==="rotate",D=C==="pan",G=C==="zoom",I=!!L.control,H=!!L.alt,N=!!L.shift,F=!!(1&A),V=!!(2&A),q=!!(4&A),te=1/p.clientHeight,$=te*(w-_._lastX),W=te*(E-_._lastY),Z=_.flipX?1:-1,J=_.flipY?1:-1,ee=Math.PI*_.rotateSpeed,re=i();if(_._lastX!==-1&&_._lastY!==-1&&((P&&F&&!I&&!H&&!N||F&&!I&&!H&&N)&&g.rotate(re,Z*ee*$,-J*ee*W,0),(D&&F&&!I&&!H&&!N||V||F&&I&&!H&&!N)&&g.pan(re,-_.translateSpeed*$*y,_.translateSpeed*W*y,0),G&&F&&!I&&!H&&!N||q||F&&!I&&H&&!N)){var ae=-_.zoomSpeed*W/window.innerHeight*(re-g.lastT())*100;g.pan(re,0,0,y*(Math.exp(ae)-1))}return _._lastX=w,_._lastY=E,_._lastMods=L,!0}}_.mouseListener=n(p,h),p.addEventListener("touchstart",function(A){var w=o(A.changedTouches[0],p);h(0,w[0],w[1],_._lastMods),h(1,w[0],w[1],_._lastMods)},!!u&&{passive:!0}),p.addEventListener("touchmove",function(A){var w=o(A.changedTouches[0],p);h(1,w[0],w[1],_._lastMods),A.preventDefault()},!!u&&{passive:!1}),p.addEventListener("touchend",function(A){h(0,_._lastX,_._lastY,_._lastMods)},!!u&&{passive:!0}),_.wheelListener=a(p,function(A,w){if(_.keyBindingMode!==!1&&_.enableWheel){var E=_.flipX?1:-1,L=_.flipY?1:-1,C=i();if(Math.abs(A)>Math.abs(w))g.rotate(C,0,0,-A*E*Math.PI*_.rotateSpeed/window.innerWidth);else if(!_._ortho){var P=-_.zoomSpeed*L*w/window.innerHeight*(C-g.lastT())/20;g.pan(C,0,0,y*(Math.exp(P)-1))}}},!0)},_.enableMouseListeners(),_};var i=e(8161),r=e(1152),n=e(6145),a=e(6475),o=e(2565),u=e(5233)},8245:function(d,s,e){var i=e(6832),r=e(5158),n=i([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),a=i([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);d.exports=function(o){return r(o,n,a,null,[{name:"position",type:"vec2"}])}},1059:function(d,s,e){var i=e(4296),r=e(7453),n=e(2771),a=e(6496),o=e(2611),u=e(4234),p=e(8126),c=e(6145),x=e(1120),g=e(5268),f=e(8245),y=e(2321)({tablet:!0,featureDetect:!0});function v(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function m(h){var A=Math.round(Math.log(Math.abs(h))/Math.log(10));if(A<0){var w=Math.round(Math.pow(10,-A));return Math.ceil(h*w)/w}return A>0?(w=Math.round(Math.pow(10,A)),Math.ceil(h/w)*w):Math.ceil(h)}function _(h){return typeof h!="boolean"||h}d.exports={createScene:function(h){(h=h||{}).camera=h.camera||{};var A=h.canvas;A||(A=document.createElement("canvas"),h.container?h.container.appendChild(A):document.body.appendChild(A));var w=h.gl;if(w||(h.glOptions&&(y=!!h.glOptions.preserveDrawingBuffer),w=function(Oe,Ae){var Te=null;try{(Te=Oe.getContext("webgl",Ae))||(Te=Oe.getContext("experimental-webgl",Ae))}catch{return null}return Te}(A,h.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:y})),!w)throw new Error("webgl not supported");var E=h.bounds||[[-10,-10,-10],[10,10,10]],L=new v,C=u(w,w.drawingBufferWidth,w.drawingBufferHeight,{preferFloat:!y}),P=f(w),D=h.cameraObject&&h.cameraObject._ortho===!0||h.camera.projection&&h.camera.projection.type==="orthographic"||!1,G={eye:h.camera.eye||[2,0,0],center:h.camera.center||[0,0,0],up:h.camera.up||[0,1,0],zoomMin:h.camera.zoomMax||.1,zoomMax:h.camera.zoomMin||100,mode:h.camera.mode||"turntable",_ortho:D},I=h.axes||{},H=r(w,I);H.enable=!I.disable;var N=h.spikes||{},F=a(w,N),V=[],q=[],te=[],$=[],W=!0,Z=!0,J={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},ee=(Z=!0,[w.drawingBufferWidth,w.drawingBufferHeight]),re=h.cameraObject||i(A,G),ae={gl:w,contextLost:!1,pixelRatio:h.pixelRatio||1,canvas:A,selection:L,camera:re,axes:H,axesPixels:null,spikes:F,bounds:E,objects:V,shape:ee,aspect:h.aspectRatio||[1,1,1],pickRadius:h.pickRadius||10,zNear:h.zNear||.01,zFar:h.zFar||1e3,fovy:h.fovy||Math.PI/4,clearColor:h.clearColor||[0,0,0,0],autoResize:_(h.autoResize),autoBounds:_(h.autoBounds),autoScale:!!h.autoScale,autoCenter:_(h.autoCenter),clipToBounds:_(h.clipToBounds),snapToData:!!h.snapToData,onselect:h.onselect||null,onrender:h.onrender||null,onclick:h.onclick||null,cameraParams:J,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(Oe){this.aspect[0]=Oe.x,this.aspect[1]=Oe.y,this.aspect[2]=Oe.z,Z=!0},setBounds:function(Oe,Ae){this.bounds[0][Oe]=Ae.min,this.bounds[1][Oe]=Ae.max},setClearColor:function(Oe){this.clearColor=Oe},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},oe=[w.drawingBufferWidth/ae.pixelRatio|0,w.drawingBufferHeight/ae.pixelRatio|0];function ce(){if(!ae._stopped&&ae.autoResize){var Oe=A.parentNode,Ae=1,Te=1;Oe&&Oe!==document.body?(Ae=Oe.clientWidth,Te=Oe.clientHeight):(Ae=window.innerWidth,Te=window.innerHeight);var se=0|Math.ceil(Ae*ae.pixelRatio),le=0|Math.ceil(Te*ae.pixelRatio);if(se!==A.width||le!==A.height){A.width=se,A.height=le;var ne=A.style;ne.position=ne.position||"absolute",ne.left="0px",ne.top="0px",ne.width=Ae+"px",ne.height=Te+"px",W=!0}}}function pe(){for(var Oe=V.length,Ae=$.length,Te=0;Te<Ae;++Te)te[Te]=0;e:for(Te=0;Te<Oe;++Te){var se=V[Te],le=se.pickSlots;if(le){for(var ne=0;ne<Ae;++ne)if(te[ne]+le<255){q[Te]=ne,se.setPickBase(te[ne]+1),te[ne]+=le;continue e}var me=o(w,ee);q[Te]=Ae,$.push(me),te.push(le),se.setPickBase(1),Ae+=1}else q[Te]=-1}for(;Ae>0&&te[Ae-1]===0;)te.pop(),$.pop().dispose()}function ve(){if(ae.contextLost)return!0;w.isContextLost()&&(ae.contextLost=!0,ae.mouseListener.enabled=!1,ae.selection.object=null,ae.oncontextloss&&ae.oncontextloss())}ae.autoResize&&ce(),window.addEventListener("resize",ce),ae.update=function(Oe){ae._stopped||(W=!0,Z=!0)},ae.add=function(Oe){ae._stopped||(Oe.axes=H,V.push(Oe),q.push(-1),W=!0,Z=!0,pe())},ae.remove=function(Oe){if(!ae._stopped){var Ae=V.indexOf(Oe);Ae<0||(V.splice(Ae,1),q.pop(),W=!0,Z=!0,pe())}},ae.dispose=function(){if(!ae._stopped&&(ae._stopped=!0,window.removeEventListener("resize",ce),A.removeEventListener("webglcontextlost",ve),ae.mouseListener.enabled=!1,!ae.contextLost)){H.dispose(),F.dispose();for(var Oe=0;Oe<V.length;++Oe)V[Oe].dispose();for(C.dispose(),Oe=0;Oe<$.length;++Oe)$[Oe].dispose();P.dispose(),w=null,H=null,F=null,V=[]}},ae._mouseRotating=!1,ae._prevButtons=0,ae.enableMouseListeners=function(){ae.mouseListener=c(A,function(Oe,Ae,Te){if(!ae._stopped){var se=$.length,le=V.length,ne=L.object;L.distance=1/0,L.mouse[0]=Ae,L.mouse[1]=Te,L.object=null,L.screen=null,L.dataCoordinate=L.dataPosition=null;var me=!1;if(Oe&&ae._prevButtons)ae._mouseRotating=!0;else{ae._mouseRotating&&(Z=!0),ae._mouseRotating=!1;for(var Ee=0;Ee<se;++Ee){var be=$[Ee].query(Ae,oe[1]-Te-1,ae.pickRadius);if(be){if(be.distance>L.distance)continue;for(var De=0;De<le;++De){var Ue=V[De];if(q[De]===Ee){var he=Ue.pick(be);he&&(L.buttons=Oe,L.screen=be.coord,L.distance=be.distance,L.object=Ue,L.index=he.distance,L.dataPosition=he.position,L.dataCoordinate=he.dataCoordinate,L.data=he,me=!0)}}}}}ne&&ne!==L.object&&(ne.highlight&&ne.highlight(null),W=!0),L.object&&(L.object.highlight&&L.object.highlight(L.data),W=!0),(me=me||L.object!==ne)&&ae.onselect&&ae.onselect(L),1&Oe&&!(1&ae._prevButtons)&&ae.onclick&&ae.onclick(L),ae._prevButtons=Oe}})},A.addEventListener("webglcontextlost",ve);var we=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],xe=[we[0].slice(),we[1].slice()];function ge(){if(!ve()){ce();var Oe=ae.camera.tick();J.view=ae.camera.matrix,W=W||Oe,Z=Z||Oe,H.pixelRatio=ae.pixelRatio,F.pixelRatio=ae.pixelRatio;var Ae=V.length,Te=we[0],se=we[1];Te[0]=Te[1]=Te[2]=1/0,se[0]=se[1]=se[2]=-1/0;for(var le=0;le<Ae;++le){(Re=V[le]).pixelRatio=ae.pixelRatio,Re.axes=ae.axes,W=W||!!Re.dirty,Z=Z||!!Re.dirty;var ne=Re.bounds;if(ne)for(var me=ne[0],Ee=ne[1],be=0;be<3;++be)Te[be]=Math.min(Te[be],me[be]),se[be]=Math.max(se[be],Ee[be])}var De=ae.bounds;if(ae.autoBounds)for(be=0;be<3;++be){if(se[be]<Te[be])Te[be]=-1,se[be]=1;else{Te[be]===se[be]&&(Te[be]-=1,se[be]+=1);var Ue=.05*(se[be]-Te[be]);Te[be]=Te[be]-Ue,se[be]=se[be]+Ue}De[0][be]=Te[be],De[1][be]=se[be]}var he=!1;for(be=0;be<3;++be)he=he||xe[0][be]!==De[0][be]||xe[1][be]!==De[1][be],xe[0][be]=De[0][be],xe[1][be]=De[1][be];if(Z=Z||he,W=W||he){if(he){var ke=[0,0,0];for(le=0;le<3;++le)ke[le]=m((De[1][le]-De[0][le])/10);H.autoTicks?H.update({bounds:De,tickSpacing:ke}):H.update({bounds:De})}var _e=w.drawingBufferWidth,Ce=w.drawingBufferHeight;for(ee[0]=_e,ee[1]=Ce,oe[0]=0|Math.max(_e/ae.pixelRatio,1),oe[1]=0|Math.max(Ce/ae.pixelRatio,1),function(He,Ge){var $e=He.bounds,st=He.cameraParams,Ke=st.projection,gt=st.model,mt=He.gl.drawingBufferWidth,at=He.gl.drawingBufferHeight,rt=He.zNear,xt=He.zFar,Tt=He.fovy,wt=mt/at;Ge?(g(Ke,-wt,wt,-1,1,rt,xt),st._ortho=!0):(x(Ke,Tt,wt,rt,xt),st._ortho=!1);for(var Ot=0;Ot<16;++Ot)gt[Ot]=0;gt[15]=1;var Ct=0;for(Ot=0;Ot<3;++Ot)Ct=Math.max(Ct,$e[1][Ot]-$e[0][Ot]);for(Ot=0;Ot<3;++Ot)He.autoScale?gt[5*Ot]=He.aspect[Ot]/($e[1][Ot]-$e[0][Ot]):gt[5*Ot]=1/Ct,He.autoCenter&&(gt[12+Ot]=.5*-gt[5*Ot]*($e[0][Ot]+$e[1][Ot]))}(ae,D),le=0;le<Ae;++le)(Re=V[le]).axesBounds=De,ae.clipToBounds&&(Re.clipBounds=De);L.object&&(ae.snapToData?F.position=L.dataCoordinate:F.position=L.dataPosition,F.bounds=De),Z&&(Z=!1,function(){if(!ve()){w.colorMask(!0,!0,!0,!0),w.depthMask(!0),w.disable(w.BLEND),w.enable(w.DEPTH_TEST),w.depthFunc(w.LEQUAL);for(var He=V.length,Ge=$.length,$e=0;$e<Ge;++$e){var st=$[$e];st.shape=oe,st.begin();for(var Ke=0;Ke<He;++Ke)if(q[Ke]===$e){var gt=V[Ke];gt.drawPick&&(gt.pixelRatio=1,gt.drawPick(J))}st.end()}}}()),ae.axesPixels=n(ae.axes,J,_e,Ce),ae.onrender&&ae.onrender(),w.bindFramebuffer(w.FRAMEBUFFER,null),w.viewport(0,0,_e,Ce),ae.clearRGBA(),w.depthMask(!0),w.colorMask(!0,!0,!0,!0),w.enable(w.DEPTH_TEST),w.depthFunc(w.LEQUAL),w.disable(w.BLEND),w.disable(w.CULL_FACE);var Fe=!1;for(H.enable&&(Fe=Fe||H.isTransparent(),H.draw(J)),F.axes=H,L.object&&F.draw(J),w.disable(w.CULL_FACE),le=0;le<Ae;++le)(Re=V[le]).axes=H,Re.pixelRatio=ae.pixelRatio,Re.isOpaque&&Re.isOpaque()&&Re.draw(J),Re.isTransparent&&Re.isTransparent()&&(Fe=!0);if(Fe){for(C.shape=ee,C.bind(),w.clear(w.DEPTH_BUFFER_BIT),w.colorMask(!1,!1,!1,!1),w.depthMask(!0),w.depthFunc(w.LESS),H.enable&&H.isTransparent()&&H.drawTransparent(J),le=0;le<Ae;++le)(Re=V[le]).isOpaque&&Re.isOpaque()&&Re.draw(J);for(w.enable(w.BLEND),w.blendEquation(w.FUNC_ADD),w.blendFunc(w.ONE,w.ONE_MINUS_SRC_ALPHA),w.colorMask(!0,!0,!0,!0),w.depthMask(!1),w.clearColor(0,0,0,0),w.clear(w.COLOR_BUFFER_BIT),H.isTransparent()&&H.drawTransparent(J),le=0;le<Ae;++le){var Re;(Re=V[le]).isTransparent&&Re.isTransparent()&&Re.drawTransparent(J)}w.bindFramebuffer(w.FRAMEBUFFER,null),w.blendFunc(w.ONE,w.ONE_MINUS_SRC_ALPHA),w.disable(w.DEPTH_TEST),P.bind(),C.color[0].bind(0),P.uniforms.accumBuffer=0,p(w),w.disable(w.BLEND)}for(W=!1,le=0;le<Ae;++le)V[le].dirty=!1}}}return ae.enableMouseListeners(),function Oe(){ae._stopped||ae.contextLost||(ge(),requestAnimationFrame(Oe))}(),ae.redraw=function(){ae._stopped||(W=!0,ge())},ae},createCamera:i}},8023:function(d,s,e){var i=e(6832);s.pointVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),s.pointFragment=i([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),s.pickVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),s.pickFragment=i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},8271:function(d,s,e){var i=e(5158),r=e(5827),n=e(5306),a=e(8023);function o(x,g,f,y,v){this.plot=x,this.offsetBuffer=g,this.pickBuffer=f,this.shader=y,this.pickShader=v,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}d.exports=function(x,g){var f=x.gl,y=new o(x,r(f),r(f),i(f,a.pointVertex,a.pointFragment),i(f,a.pickVertex,a.pickFragment));return y.update(g),x.addObject(y),y};var u,p,c=o.prototype;c.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},c.update=function(x){var g;function f(w,E){return w in x?x[w]:E}x=x||{},this.sizeMin=f("sizeMin",.5),this.sizeMax=f("sizeMax",20),this.color=f("color",[1,0,0,1]).slice(),this.areaRatio=f("areaRatio",1),this.borderColor=f("borderColor",[0,0,0,1]).slice(),this.blend=f("blend",!1);var y=x.positions.length>>>1,v=x.positions instanceof Float32Array,m=x.idToIndex instanceof Int32Array&&x.idToIndex.length>=y,_=x.positions,h=v?_:n.mallocFloat32(_.length),A=m?x.idToIndex:n.mallocInt32(y);if(v||h.set(_),!m)for(h.set(_),g=0;g<y;g++)A[g]=g;this.points=_,this.offsetBuffer.update(h),this.pickBuffer.update(A),v||n.free(h),m||n.free(A),this.pointCount=y,this.pickOffset=0},c.unifiedDraw=(u=[1,0,0,0,1,0,0,0,1],p=[0,0,0,0],function(x){var g=x!==void 0,f=g?this.pickShader:this.shader,y=this.plot.gl,v=this.plot.dataBox;if(this.pointCount===0)return x;var m=v[2]-v[0],_=v[3]-v[1],h=function(L,C){var P,D=0,G=L.length>>>1;for(P=0;P<G;P++){var I=L[2*P],H=L[2*P+1];I>=C[0]&&I<=C[2]&&H>=C[1]&&H<=C[3]&&D++}return D}(this.points,v),A=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(h,.33333)));u[0]=2/m,u[4]=2/_,u[6]=-2*v[0]/m-1,u[7]=-2*v[1]/_-1,this.offsetBuffer.bind(),f.bind(),f.attributes.position.pointer(),f.uniforms.matrix=u,f.uniforms.color=this.color,f.uniforms.borderColor=this.borderColor,f.uniforms.pointCloud=A<5,f.uniforms.pointSize=A,f.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),g&&(p[0]=255&x,p[1]=x>>8&255,p[2]=x>>16&255,p[3]=x>>24&255,this.pickBuffer.bind(),f.attributes.pickId.pointer(y.UNSIGNED_BYTE),f.uniforms.pickOffset=p,this.pickOffset=x);var w=y.getParameter(y.BLEND),E=y.getParameter(y.DITHER);return w&&!this.blend&&y.disable(y.BLEND),E&&y.disable(y.DITHER),y.drawArrays(y.POINTS,0,this.pointCount),w&&!this.blend&&y.enable(y.BLEND),E&&y.enable(y.DITHER),x+this.pointCount}),c.draw=c.unifiedDraw,c.drawPick=c.unifiedDraw,c.pick=function(x,g,f){var y=this.pickOffset,v=this.pointCount;if(f<y||f>=y+v)return null;var m=f-y,_=this.points;return{object:this,pointId:m,dataCoord:[_[2*m],_[2*m+1]]}}},6093:function(d){d.exports=function(s,e,i,r){var n,a,o,u,p,c=e[0],x=e[1],g=e[2],f=e[3],y=i[0],v=i[1],m=i[2],_=i[3];return(a=c*y+x*v+g*m+f*_)<0&&(a=-a,y=-y,v=-v,m=-m,_=-_),1-a>1e-6?(n=Math.acos(a),o=Math.sin(n),u=Math.sin((1-r)*n)/o,p=Math.sin(r*n)/o):(u=1-r,p=r),s[0]=u*c+p*y,s[1]=u*x+p*v,s[2]=u*g+p*m,s[3]=u*f+p*_,s}},8240:function(d){d.exports=function(s){return s||s===0?s.toString():""}},4123:function(d,s,e){var i=e(875);d.exports=function(n,a,o){var u=r[a];if(u||(u=r[a]={}),n in u)return u[n];var p={textAlign:"center",textBaseline:"middle",lineHeight:1,font:a,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},c=i(n,p);p.triangles=!1;var x,g,f=i(n,p);if(o&&o!==1){for(x=0;x<c.positions.length;++x)for(g=0;g<c.positions[x].length;++g)c.positions[x][g]/=o;for(x=0;x<f.positions.length;++x)for(g=0;g<f.positions[x].length;++g)f.positions[x][g]/=o}var y=[[1/0,1/0],[-1/0,-1/0]],v=f.positions.length;for(x=0;x<v;++x){var m=f.positions[x];for(g=0;g<2;++g)y[0][g]=Math.min(y[0][g],m[g]),y[1][g]=Math.max(y[1][g],m[g])}return u[n]=[c,f,y]};var r={}},9282:function(d,s,e){var i=e(5158),r=e(6832),n=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),a=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),o=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),u=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),p=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),c=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],x={vertex:n,fragment:u,attributes:c},g={vertex:a,fragment:u,attributes:c},f={vertex:o,fragment:u,attributes:c},y={vertex:n,fragment:p,attributes:c},v={vertex:a,fragment:p,attributes:c},m={vertex:o,fragment:p,attributes:c};function _(h,A){var w=i(h,A),E=w.attributes;return E.position.location=0,E.color.location=1,E.glyph.location=2,E.id.location=3,w}s.createPerspective=function(h){return _(h,x)},s.createOrtho=function(h){return _(h,g)},s.createProject=function(h){return _(h,f)},s.createPickPerspective=function(h){return _(h,y)},s.createPickOrtho=function(h){return _(h,v)},s.createPickProject=function(h){return _(h,m)}},2182:function(d,s,e){var i=e(3596),r=e(5827),n=e(2944),a=e(5306),o=e(104),u=e(9282),p=e(4123),c=e(8240),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(q,te){var $=q[0],W=q[1],Z=q[2],J=q[3];return q[0]=te[0]*$+te[4]*W+te[8]*Z+te[12]*J,q[1]=te[1]*$+te[5]*W+te[9]*Z+te[13]*J,q[2]=te[2]*$+te[6]*W+te[10]*Z+te[14]*J,q[3]=te[3]*$+te[7]*W+te[11]*Z+te[15]*J,q}function f(q,te,$,W){return g(W,W),g(W,W),g(W,W)}function y(q,te){this.index=q,this.dataCoordinate=this.position=te}function v(q){return q===!0||q>1?1:q}function m(q,te,$,W,Z,J,ee,re,ae,oe,ce,pe){this.gl=q,this.pixelRatio=1,this.shader=te,this.orthoShader=$,this.projectShader=W,this.pointBuffer=Z,this.colorBuffer=J,this.glyphBuffer=ee,this.idBuffer=re,this.vao=ae,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=oe,this.pickOrthoShader=ce,this.pickProjectShader=pe,this.points=[],this._selectResult=new y(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}d.exports=function(q){var te=q.gl,$=u.createPerspective(te),W=u.createOrtho(te),Z=u.createProject(te),J=u.createPickPerspective(te),ee=u.createPickOrtho(te),re=u.createPickProject(te),ae=r(te),oe=r(te),ce=r(te),pe=r(te),ve=new m(te,$,W,Z,ae,oe,ce,pe,n(te,[{buffer:ae,size:3,type:te.FLOAT},{buffer:oe,size:4,type:te.FLOAT},{buffer:ce,size:2,type:te.FLOAT},{buffer:pe,size:4,type:te.UNSIGNED_BYTE,normalized:!0}]),J,ee,re);return ve.update(q),ve};var _=m.prototype;_.pickSlots=1,_.setPickBase=function(q){this.pickId=q},_.isTransparent=function(){if(this.hasAlpha)return!0;for(var q=0;q<3;++q)if(this.axesProject[q]&&this.projectHasAlpha)return!0;return!1},_.isOpaque=function(){if(!this.hasAlpha)return!0;for(var q=0;q<3;++q)if(this.axesProject[q]&&!this.projectHasAlpha)return!0;return!1};var h=[0,0],A=[0,0,0],w=[0,0,0],E=[0,0,0,1],L=[0,0,0,1],C=x.slice(),P=[0,0,0],D=[[0,0,0],[0,0,0]];function G(q){return q[0]=q[1]=q[2]=0,q}function I(q,te){return q[0]=te[0],q[1]=te[1],q[2]=te[2],q[3]=1,q}function H(q,te,$,W){return q[0]=te[0],q[1]=te[1],q[2]=te[2],q[$]=W,q}var N=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function F(q,te,$,W,Z,J,ee){var re=$.gl;if((J===$.projectHasAlpha||ee)&&function(oe,ce,pe,ve){var we,xe=ce.axesProject,ge=ce.gl,Oe=oe.uniforms,Ae=pe.model||x,Te=pe.view||x,se=pe.projection||x,le=ce.axesBounds,ne=function($e){for(var st=D,Ke=0;Ke<2;++Ke)for(var gt=0;gt<3;++gt)st[Ke][gt]=Math.max(Math.min($e[Ke][gt],1e8),-1e8);return st}(ce.clipBounds);we=ce.axes&&ce.axes.lastCubeProps?ce.axes.lastCubeProps.axis:[1,1,1],h[0]=2/ge.drawingBufferWidth,h[1]=2/ge.drawingBufferHeight,oe.bind(),Oe.view=Te,Oe.projection=se,Oe.screenSize=h,Oe.highlightId=ce.highlightId,Oe.highlightScale=ce.highlightScale,Oe.clipBounds=ne,Oe.pickGroup=ce.pickId/255,Oe.pixelRatio=ve;for(var me=0;me<3;++me)if(xe[me]){Oe.scale=ce.projectScale[me],Oe.opacity=ce.projectOpacity[me];for(var Ee=C,be=0;be<16;++be)Ee[be]=0;for(be=0;be<4;++be)Ee[5*be]=1;Ee[5*me]=0,we[me]<0?Ee[12+me]=le[0][me]:Ee[12+me]=le[1][me],o(Ee,Ae,Ee),Oe.model=Ee;var De=(me+1)%3,Ue=(me+2)%3,he=G(A),ke=G(w);he[De]=1,ke[Ue]=1;var _e=f(0,0,0,I(E,he)),Ce=f(0,0,0,I(L,ke));if(Math.abs(_e[1])>Math.abs(Ce[1])){var Fe=_e;_e=Ce,Ce=Fe,Fe=he,he=ke,ke=Fe;var Re=De;De=Ue,Ue=Re}_e[0]<0&&(he[De]=-1),Ce[1]>0&&(ke[Ue]=-1);var He=0,Ge=0;for(be=0;be<4;++be)He+=Math.pow(Ae[4*De+be],2),Ge+=Math.pow(Ae[4*Ue+be],2);he[De]/=Math.sqrt(He),ke[Ue]/=Math.sqrt(Ge),Oe.axes[0]=he,Oe.axes[1]=ke,Oe.fragClipBounds[0]=H(P,ne[0],me,-1e8),Oe.fragClipBounds[1]=H(P,ne[1],me,1e8),ce.vao.bind(),ce.vao.draw(ge.TRIANGLES,ce.vertexCount),ce.lineWidth>0&&(ge.lineWidth(ce.lineWidth*ve),ce.vao.draw(ge.LINES,ce.lineVertexCount,ce.vertexCount)),ce.vao.unbind()}}(te,$,W,Z),J===$.hasAlpha||ee){q.bind();var ae=q.uniforms;ae.model=W.model||x,ae.view=W.view||x,ae.projection=W.projection||x,h[0]=2/re.drawingBufferWidth,h[1]=2/re.drawingBufferHeight,ae.screenSize=h,ae.highlightId=$.highlightId,ae.highlightScale=$.highlightScale,ae.fragClipBounds=N,ae.clipBounds=$.axes.bounds,ae.opacity=$.opacity,ae.pickGroup=$.pickId/255,ae.pixelRatio=Z,$.vao.bind(),$.vao.draw(re.TRIANGLES,$.vertexCount),$.lineWidth>0&&(re.lineWidth($.lineWidth*Z),$.vao.draw(re.LINES,$.lineVertexCount,$.vertexCount)),$.vao.unbind()}}function V(q,te,$,W){var Z;Z=Array.isArray(q)?te<q.length?q[te]:void 0:q,Z=c(Z);var J=!0;i(Z)&&(Z="",J=!1);var ee=p(Z,$,W);return{mesh:ee[0],lines:ee[1],bounds:ee[2],visible:J}}_.draw=function(q){F(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,q,this.pixelRatio,!1,!1)},_.drawTransparent=function(q){F(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,q,this.pixelRatio,!0,!1)},_.drawPick=function(q){F(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,q,1,!0,!0)},_.pick=function(q){if(!q||q.id!==this.pickId)return null;var te=q.value[2]+(q.value[1]<<8)+(q.value[0]<<16);if(te>=this.pointCount||te<0)return null;var $=this.points[te],W=this._selectResult;W.index=te;for(var Z=0;Z<3;++Z)W.position[Z]=W.dataCoordinate[Z]=$[Z];return W},_.highlight=function(q){if(q){var te=q.index,$=255&te,W=te>>8&255,Z=te>>16&255;this.highlightId=[$/255,W/255,Z/255,0]}else this.highlightId=[1,1,1,1]},_.update=function(q){if("perspective"in(q=q||{})&&(this.useOrtho=!q.perspective),"orthographic"in q&&(this.useOrtho=!!q.orthographic),"lineWidth"in q&&(this.lineWidth=q.lineWidth),"project"in q)if(Array.isArray(q.project))this.axesProject=q.project;else{var te=!!q.project;this.axesProject=[te,te,te]}if("projectScale"in q)if(Array.isArray(q.projectScale))this.projectScale=q.projectScale.slice();else{var $=+q.projectScale;this.projectScale=[$,$,$]}if(this.projectHasAlpha=!1,"projectOpacity"in q){Array.isArray(q.projectOpacity)?this.projectOpacity=q.projectOpacity.slice():($=+q.projectOpacity,this.projectOpacity=[$,$,$]);for(var W=0;W<3;++W)this.projectOpacity[W]=v(this.projectOpacity[W]),this.projectOpacity[W]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in q&&(this.opacity=v(q.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var Z,J,ee=q.position,re=q.font||"normal",ae=q.alignment||[0,0];if(ae.length===2)Z=ae[0],J=ae[1];else for(Z=[],J=[],W=0;W<ae.length;++W)Z[W]=ae[W][0],J[W]=ae[W][1];var oe=[1/0,1/0,1/0],ce=[-1/0,-1/0,-1/0],pe=q.glyph,ve=q.color,we=q.size,xe=q.angle,ge=q.lineColor,Oe=-1,Ae=0,Te=0,se=0;if(ee.length){se=ee.length;e:for(W=0;W<se;++W){for(var le=ee[W],ne=0;ne<3;++ne)if(isNaN(le[ne])||!isFinite(le[ne]))continue e;var me=(st=V(pe,W,re,this.pixelRatio)).mesh,Ee=st.lines,be=st.bounds;Ae+=3*me.cells.length,Te+=2*Ee.edges.length}}var De=Ae+Te,Ue=a.mallocFloat(3*De),he=a.mallocFloat(4*De),ke=a.mallocFloat(2*De),_e=a.mallocUint32(De);if(De>0){var Ce=0,Fe=Ae,Re=[0,0,0,1],He=[0,0,0,1],Ge=Array.isArray(ve)&&Array.isArray(ve[0]),$e=Array.isArray(ge)&&Array.isArray(ge[0]);e:for(W=0;W<se;++W){for(Oe+=1,le=ee[W],ne=0;ne<3;++ne){if(isNaN(le[ne])||!isFinite(le[ne]))continue e;ce[ne]=Math.max(ce[ne],le[ne]),oe[ne]=Math.min(oe[ne],le[ne])}me=(st=V(pe,W,re,this.pixelRatio)).mesh,Ee=st.lines,be=st.bounds;var st,Ke=st.visible;if(Ke)if(Array.isArray(ve)){if((gt=Ge?W<ve.length?ve[W]:[0,0,0,0]:ve).length===3){for(ne=0;ne<3;++ne)Re[ne]=gt[ne];Re[3]=1}else if(gt.length===4){for(ne=0;ne<4;++ne)Re[ne]=gt[ne];!this.hasAlpha&&gt[3]<1&&(this.hasAlpha=!0)}}else Re[0]=Re[1]=Re[2]=0,Re[3]=1;else Re=[1,1,1,0];if(Ke)if(Array.isArray(ge)){var gt;if((gt=$e?W<ge.length?ge[W]:[0,0,0,0]:ge).length===3){for(ne=0;ne<3;++ne)He[ne]=gt[ne];He[ne]=1}else if(gt.length===4){for(ne=0;ne<4;++ne)He[ne]=gt[ne];!this.hasAlpha&&gt[3]<1&&(this.hasAlpha=!0)}}else He[0]=He[1]=He[2]=0,He[3]=1;else He=[1,1,1,0];var mt=.5;Ke?Array.isArray(we)?mt=W<we.length?+we[W]:12:we?mt=+we:this.useOrtho&&(mt=12):mt=0;var at=0;Array.isArray(xe)?at=W<xe.length?+xe[W]:0:xe&&(at=+xe);var rt=Math.cos(at),xt=Math.sin(at);for(le=ee[W],ne=0;ne<3;++ne)ce[ne]=Math.max(ce[ne],le[ne]),oe[ne]=Math.min(oe[ne],le[ne]);var Tt=Z,wt=J;Tt=0,Array.isArray(Z)?Tt=W<Z.length?Z[W]:0:Z&&(Tt=Z),wt=0,Array.isArray(J)?wt=W<J.length?J[W]:0:J&&(wt=J);var Ot=[Tt*=Tt>0?1-be[0][0]:Tt<0?1+be[1][0]:1,wt*=wt>0?1-be[0][1]:wt<0?1+be[1][1]:1],Ct=me.cells||[],Ye=me.positions||[];for(ne=0;ne<Ct.length;++ne)for(var Xe=Ct[ne],Ve=0;Ve<3;++Ve){for(var We=0;We<3;++We)Ue[3*Ce+We]=le[We];for(We=0;We<4;++We)he[4*Ce+We]=Re[We];_e[Ce]=Oe;var nt=Ye[Xe[Ve]];ke[2*Ce]=mt*(rt*nt[0]-xt*nt[1]+Ot[0]),ke[2*Ce+1]=mt*(xt*nt[0]+rt*nt[1]+Ot[1]),Ce+=1}for(Ct=Ee.edges,Ye=Ee.positions,ne=0;ne<Ct.length;++ne)for(Xe=Ct[ne],Ve=0;Ve<2;++Ve){for(We=0;We<3;++We)Ue[3*Fe+We]=le[We];for(We=0;We<4;++We)he[4*Fe+We]=He[We];_e[Fe]=Oe,nt=Ye[Xe[Ve]],ke[2*Fe]=mt*(rt*nt[0]-xt*nt[1]+Ot[0]),ke[2*Fe+1]=mt*(xt*nt[0]+rt*nt[1]+Ot[1]),Fe+=1}}}this.bounds=[oe,ce],this.points=ee,this.pointCount=ee.length,this.vertexCount=Ae,this.lineVertexCount=Te,this.pointBuffer.update(Ue),this.colorBuffer.update(he),this.glyphBuffer.update(ke),this.idBuffer.update(_e),a.free(Ue),a.free(he),a.free(ke),a.free(_e)},_.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},1884:function(d,s,e){var i=e(6832);s.boxVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),s.boxFragment=i([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},6623:function(d,s,e){var i=e(5158),r=e(5827),n=e(1884);function a(u,p,c){this.plot=u,this.boxBuffer=p,this.boxShader=c,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}d.exports=function(u,p){var c=u.gl,x=new a(u,r(c,[0,0,0,1,1,0,1,1]),i(c,n.boxVertex,n.boxFragment));return x.update(p),u.addOverlay(x),x};var o=a.prototype;o.draw=function(){if(this.enabled){var u=this.plot,p=this.selectBox,c=this.borderWidth,x=(this.innerFill,this.innerColor),g=(this.outerFill,this.outerColor),f=this.borderColor,y=u.box,v=u.screenBox,m=u.dataBox,_=u.viewBox,h=u.pixelRatio,A=(p[0]-m[0])*(_[2]-_[0])/(m[2]-m[0])+_[0],w=(p[1]-m[1])*(_[3]-_[1])/(m[3]-m[1])+_[1],E=(p[2]-m[0])*(_[2]-_[0])/(m[2]-m[0])+_[0],L=(p[3]-m[1])*(_[3]-_[1])/(m[3]-m[1])+_[1];if(A=Math.max(A,_[0]),w=Math.max(w,_[1]),E=Math.min(E,_[2]),L=Math.min(L,_[3]),!(E<A||L<w)){y.bind();var C=v[2]-v[0],P=v[3]-v[1];if(this.outerFill&&(y.drawBox(0,0,C,w,g),y.drawBox(0,w,A,L,g),y.drawBox(0,L,C,P,g),y.drawBox(E,w,C,L,g)),this.innerFill&&y.drawBox(A,w,E,L,x),c>0){var D=c*h;y.drawBox(A-D,w-D,E+D,w+D,f),y.drawBox(A-D,L-D,E+D,L+D,f),y.drawBox(A-D,w-D,A+D,L+D,f),y.drawBox(E-D,w-D,E+D,L+D,f)}}}},o.update=function(u){u=u||{},this.innerFill=!!u.innerFill,this.outerFill=!!u.outerFill,this.innerColor=(u.innerColor||[0,0,0,.5]).slice(),this.outerColor=(u.outerColor||[0,0,0,.5]).slice(),this.borderColor=(u.borderColor||[0,0,0,1]).slice(),this.borderWidth=u.borderWidth||0,this.selectBox=(u.selectBox||this.selectBox).slice()},o.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},2611:function(d,s,e){d.exports=function(c,x){var g=x[0],f=x[1];return new u(c,i(c,g,f,{}),r.mallocUint8(g*f*4))};var i=e(4234),r=e(5306),n=e(5050),a=e(2288).nextPow2;function o(c,x,g,f,y){this.coord=[c,x],this.id=g,this.value=f,this.distance=y}function u(c,x,g){this.gl=c,this.fbo=x,this.buffer=g,this._readTimeout=null;var f=this;this._readCallback=function(){f.gl&&(x.bind(),c.readPixels(0,0,x.shape[0],x.shape[1],c.RGBA,c.UNSIGNED_BYTE,f.buffer),f._readTimeout=null)}}var p=u.prototype;Object.defineProperty(p,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(c){if(this.gl){this.fbo.shape=c;var x=this.fbo.shape[0],g=this.fbo.shape[1];if(g*x*4>this.buffer.length){r.free(this.buffer);for(var f=this.buffer=r.mallocUint8(a(g*x*4)),y=0;y<g*x*4;++y)f[y]=255}return c}}}),p.begin=function(){var c=this.gl;this.shape,c&&(this.fbo.bind(),c.clearColor(1,1,1,1),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT))},p.end=function(){var c=this.gl;c&&(c.bindFramebuffer(c.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},p.query=function(c,x,g){if(!this.gl)return null;var f=this.fbo.shape.slice();c|=0,x|=0,typeof g!="number"&&(g=1);var y=0|Math.min(Math.max(c-g,0),f[0]),v=0|Math.min(Math.max(c+g,0),f[0]),m=0|Math.min(Math.max(x-g,0),f[1]),_=0|Math.min(Math.max(x+g,0),f[1]);if(v<=y||_<=m)return null;var h=[v-y,_-m],A=n(this.buffer,[h[0],h[1],4],[4,4*f[0],1],4*(y+f[0]*m)),w=function(C,P,D){for(var G=1e8,I=-1,H=-1,N=C.shape[0],F=C.shape[1],V=0;V<N;V++)for(var q=0;q<F;q++){var te=C.get(V,q,0),$=C.get(V,q,1),W=C.get(V,q,2),Z=C.get(V,q,3);if(te<255||$<255||W<255||Z<255){var J=P-V,ee=D-q,re=J*J+ee*ee;re<G&&(G=re,I=V,H=q)}}return[I,H,G]}(A.hi(h[0],h[1],1),g,g),E=w[0],L=w[1];return E<0||Math.pow(this.radius,2)<w[2]?null:new o(E+y|0,L+m|0,A.get(E,L,0),[A.get(E,L,1),A.get(E,L,2),A.get(E,L,3)],Math.sqrt(w[2]))},p.dispose=function(){this.gl&&(this.fbo.dispose(),r.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},5158:function(d,s,e){var i=e(9016),r=e(4280),n=e(3984),a=e(1628),o=e(2631),u=e(9068);function p(g){this.gl=g,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var c=p.prototype;function x(g,f){return g.name<f.name?-1:1}c.bind=function(){var g;this.program||this._relink();var f=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),y=this.gl.lastAttribCount;if(f>y)for(g=y;g<f;g++)this.gl.enableVertexAttribArray(g);else if(y>f)for(g=f;g<y;g++)this.gl.disableVertexAttribArray(g);this.gl.lastAttribCount=f,this.gl.useProgram(this.program)},c.dispose=function(){for(var g=this.gl.lastAttribCount,f=0;f<g;f++)this.gl.disableVertexAttribArray(f);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},c.update=function(g,f,y,v){if(!f||arguments.length===1){var m=g;g=m.vertex,f=m.fragment,y=m.uniforms,v=m.attributes}var _=this,h=_.gl,A=_._vref;_._vref=a.shader(h,h.VERTEX_SHADER,g),A&&A.dispose(),_.vertShader=_._vref.shader;var w=this._fref;if(_._fref=a.shader(h,h.FRAGMENT_SHADER,f),w&&w.dispose(),_.fragShader=_._fref.shader,!y||!v){var E=h.createProgram();if(h.attachShader(E,_.fragShader),h.attachShader(E,_.vertShader),h.linkProgram(E),!h.getProgramParameter(E,h.LINK_STATUS)){var L=h.getProgramInfoLog(E);throw new u(L,"Error linking program:"+L)}y=y||o.uniforms(h,E),v=v||o.attributes(h,E),h.deleteProgram(E)}(v=v.slice()).sort(x);var C,P=[],D=[],G=[];for(C=0;C<v.length;++C){var I=v[C];if(I.type.indexOf("mat")>=0){for(var H=0|I.type.charAt(I.type.length-1),N=new Array(H),F=0;F<H;++F)N[F]=G.length,D.push(I.name+"["+F+"]"),typeof I.location=="number"?G.push(I.location+F):Array.isArray(I.location)&&I.location.length===H&&typeof I.location[F]=="number"?G.push(0|I.location[F]):G.push(-1);P.push({name:I.name,type:I.type,locations:N})}else P.push({name:I.name,type:I.type,locations:[G.length]}),D.push(I.name),typeof I.location=="number"?G.push(0|I.location):G.push(-1)}var V=0;for(C=0;C<G.length;++C)if(G[C]<0){for(;G.indexOf(V)>=0;)V+=1;G[C]=V}var q=new Array(y.length);function te(){_.program=a.program(h,_._vref,_._fref,D,G);for(var $=0;$<y.length;++$)q[$]=h.getUniformLocation(_.program,y[$].name)}te(),_._relink=te,_.types={uniforms:n(y),attributes:n(v)},_.attributes=r(h,_,P,G),Object.defineProperty(_,"uniforms",i(h,_,y,q))},d.exports=function(g,f,y,v,m){var _=new p(g);return _.update(f,y,v,m),_}},9068:function(d){function s(e,i,r){this.shortMessage=i||"",this.longMessage=r||"",this.rawError=e||"",this.message="gl-shader: "+(i||e||"")+(r?`
`+r:""),this.stack=new Error().stack}s.prototype=new Error,s.prototype.name="GLError",s.prototype.constructor=s,d.exports=s},4280:function(d,s,e){d.exports=function(p,c,x,g){for(var f={},y=0,v=x.length;y<v;++y){var m=x[y],_=m.name,h=m.type,A=m.locations;switch(h){case"bool":case"int":case"float":o(p,c,A[0],g,1,f,_);break;default:if(h.indexOf("vec")>=0){if((w=h.charCodeAt(h.length-1)-48)<2||w>4)throw new i("","Invalid data type for attribute "+_+": "+h);o(p,c,A[0],g,w,f,_)}else{if(!(h.indexOf("mat")>=0))throw new i("","Unknown data type for attribute "+_+": "+h);var w;if((w=h.charCodeAt(h.length-1)-48)<2||w>4)throw new i("","Invalid data type for attribute "+_+": "+h);u(p,c,A,g,w,f,_)}}}return f};var i=e(9068);function r(p,c,x,g,f,y){this._gl=p,this._wrapper=c,this._index=x,this._locations=g,this._dimension=f,this._constFunc=y}var n=r.prototype;n.pointer=function(p,c,x,g){var f=this,y=f._gl,v=f._locations[f._index];y.vertexAttribPointer(v,f._dimension,p||y.FLOAT,!!c,x||0,g||0),y.enableVertexAttribArray(v)},n.set=function(p,c,x,g){return this._constFunc(this._locations[this._index],p,c,x,g)},Object.defineProperty(n,"location",{get:function(){return this._locations[this._index]},set:function(p){return p!==this._locations[this._index]&&(this._locations[this._index]=0|p,this._wrapper.program=null),0|p}});var a=[function(p,c,x){return x.length===void 0?p.vertexAttrib1f(c,x):p.vertexAttrib1fv(c,x)},function(p,c,x,g){return x.length===void 0?p.vertexAttrib2f(c,x,g):p.vertexAttrib2fv(c,x)},function(p,c,x,g,f){return x.length===void 0?p.vertexAttrib3f(c,x,g,f):p.vertexAttrib3fv(c,x)},function(p,c,x,g,f,y){return x.length===void 0?p.vertexAttrib4f(c,x,g,f,y):p.vertexAttrib4fv(c,x)}];function o(p,c,x,g,f,y,v){var m=a[f],_=new r(p,c,x,g,f,m);Object.defineProperty(y,v,{set:function(h){return p.disableVertexAttribArray(g[x]),m(p,g[x],h),h},get:function(){return _},enumerable:!0})}function u(p,c,x,g,f,y,v){for(var m=new Array(f),_=new Array(f),h=0;h<f;++h)o(p,c,x[h],g,f,m,h),_[h]=m[h];Object.defineProperty(m,"location",{set:function(E){if(Array.isArray(E))for(var L=0;L<f;++L)_[L].location=E[L];else for(L=0;L<f;++L)_[L].location=E+L;return E},get:function(){for(var E=new Array(f),L=0;L<f;++L)E[L]=g[x[L]];return E},enumerable:!0}),m.pointer=function(E,L,C,P){E=E||p.FLOAT,L=!!L,C=C||f*f,P=P||0;for(var D=0;D<f;++D){var G=g[x[D]];p.vertexAttribPointer(G,f,E,L,C,P+D*f),p.enableVertexAttribArray(G)}};var A=new Array(f),w=p["vertexAttrib"+f+"fv"];Object.defineProperty(y,v,{set:function(E){for(var L=0;L<f;++L){var C=g[x[L]];if(p.disableVertexAttribArray(C),Array.isArray(E[0]))w.call(p,C,E[L]);else{for(var P=0;P<f;++P)A[P]=E[f*L+P];w.call(p,C,A)}}return E},get:function(){return m},enumerable:!0})}},9016:function(d,s,e){var i=e(3984),r=e(9068);function n(o){return function(){return o}}function a(o,u){for(var p=new Array(o),c=0;c<o;++c)p[c]=u;return p}d.exports=function(o,u,p,c){function x(m){return function(_){for(var h=g("",m),A=0;A<h.length;++A){var w=h[A],E=w[0],L=w[1];if(c[L]){var C=_;if(typeof E=="string"&&(E.indexOf(".")===0||E.indexOf("[")===0)){var P=E;if(E.indexOf(".")===0&&(P=E.slice(1)),P.indexOf("]")===P.length-1){var D=P.indexOf("["),G=P.slice(0,D),I=P.slice(D+1,P.length-1);C=G?_[G][I]:_[I]}else C=_[P]}var H,N=p[L].type;switch(N){case"bool":case"int":case"sampler2D":case"samplerCube":o.uniform1i(c[L],C);break;case"float":o.uniform1f(c[L],C);break;default:var F=N.indexOf("vec");if(!(0<=F&&F<=1&&N.length===4+F)){if(N.indexOf("mat")===0&&N.length===4){if((H=N.charCodeAt(N.length-1)-48)<2||H>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+N);o["uniformMatrix"+H+"fv"](c[L],!1,C);break}throw new r("","Unknown uniform data type for "+name+": "+N)}if((H=N.charCodeAt(N.length-1)-48)<2||H>4)throw new r("","Invalid data type");switch(N.charAt(0)){case"b":case"i":o["uniform"+H+"iv"](c[L],C);break;case"v":o["uniform"+H+"fv"](c[L],C);break;default:throw new r("","Unrecognized data type for vector "+name+": "+N)}}}}}}function g(m,_){if(typeof _!="object")return[[m,_]];var h=[];for(var A in _){var w=_[A],E=m;parseInt(A)+""===A?E+="["+A+"]":E+="."+A,typeof w=="object"?h.push.apply(h,g(E,w)):h.push([E,w])}return h}function f(m,_,h){if(typeof h=="object"){var A=y(h);Object.defineProperty(m,_,{get:n(A),set:x(h),enumerable:!0,configurable:!1})}else c[h]?Object.defineProperty(m,_,{get:(w=h,function(E,L,C){return E.getUniform(L.program,C[w])}),set:x(h),enumerable:!0,configurable:!1}):m[_]=function(E){switch(E){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var L=E.indexOf("vec");if(0<=L&&L<=1&&E.length===4+L){if((C=E.charCodeAt(E.length-1)-48)<2||C>4)throw new r("","Invalid data type");return E.charAt(0)==="b"?a(C,!1):a(C,0)}if(E.indexOf("mat")===0&&E.length===4){var C;if((C=E.charCodeAt(E.length-1)-48)<2||C>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+E);return a(C*C,0)}throw new r("","Unknown uniform data type for "+name+": "+E)}}(p[h].type);var w}function y(m){var _;if(Array.isArray(m)){_=new Array(m.length);for(var h=0;h<m.length;++h)f(_,h,m[h])}else for(var A in _={},m)f(_,A,m[A]);return _}var v=i(p,!0);return{get:n(y(v)),set:x(v),enumerable:!0,configurable:!0}}},3984:function(d){d.exports=function(s,e){for(var i={},r=0;r<s.length;++r)for(var n=s[r].name.split("."),a=i,o=0;o<n.length;++o){var u=n[o].split("[");if(u.length>1){u[0]in a||(a[u[0]]=[]),a=a[u[0]];for(var p=1;p<u.length;++p){var c=parseInt(u[p]);p<u.length-1||o<n.length-1?(c in a||(p<u.length-1?a[c]=[]:a[c]={}),a=a[c]):a[c]=e?r:s[r].type}}else o<n.length-1?(u[0]in a||(a[u[0]]={}),a=a[u[0]]):a[u[0]]=e?r:s[r].type}return i}},2631:function(d,s){s.uniforms=function(n,a){for(var o=n.getProgramParameter(a,n.ACTIVE_UNIFORMS),u=[],p=0;p<o;++p){var c=n.getActiveUniform(a,p);if(c){var x=r(n,c.type);if(c.size>1)for(var g=0;g<c.size;++g)u.push({name:c.name.replace("[0]","["+g+"]"),type:x});else u.push({name:c.name,type:x})}}return u},s.attributes=function(n,a){for(var o=n.getProgramParameter(a,n.ACTIVE_ATTRIBUTES),u=[],p=0;p<o;++p){var c=n.getActiveAttrib(a,p);c&&u.push({name:c.name,type:r(n,c.type)})}return u};var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},i=null;function r(n,a){if(!i){var o=Object.keys(e);i={};for(var u=0;u<o.length;++u){var p=o[u];i[n[p]]=e[p]}}return i[a]}},1628:function(d,s,e){s.shader=function(x,g,f){return c(x).getShaderReference(g,f)},s.program=function(x,g,f,y,v){return c(x).getProgram(g,f,y,v)};var i=e(9068),r=e(3530),n=new(typeof WeakMap>"u"?e(4037):WeakMap),a=0;function o(x,g,f,y,v,m,_){this.id=x,this.src=g,this.type=f,this.shader=y,this.count=m,this.programs=[],this.cache=_}function u(x){this.gl=x,this.shaders=[{},{}],this.programs={}}o.prototype.dispose=function(){if(--this.count==0){for(var x=this.cache,g=x.gl,f=this.programs,y=0,v=f.length;y<v;++y){var m=x.programs[f[y]];m&&(delete x.programs[y],g.deleteProgram(m))}g.deleteShader(this.shader),delete x.shaders[this.type===g.FRAGMENT_SHADER|0][this.src]}};var p=u.prototype;function c(x){var g=n.get(x);return g||(g=new u(x),n.set(x,g)),g}p.getShaderReference=function(x,g){var f=this.gl,y=this.shaders[x===f.FRAGMENT_SHADER|0],v=y[g];if(v&&f.isShader(v.shader))v.count+=1;else{var m=function(_,h,A){var w=_.createShader(h);if(_.shaderSource(w,A),_.compileShader(w),!_.getShaderParameter(w,_.COMPILE_STATUS)){var E=_.getShaderInfoLog(w);try{var L=r(E,A,h)}catch(C){throw console.warn("Failed to format compiler error: "+C),new i(E,`Error compiling shader:
`+E)}throw new i(E,L.short,L.long)}return w}(f,x,g);v=y[g]=new o(a++,g,x,m,[],1,this)}return v},p.getProgram=function(x,g,f,y){var v=[x.id,g.id,f.join(":"),y.join(":")].join("@"),m=this.programs[v];return m&&this.gl.isProgram(m)||(this.programs[v]=m=function(_,h,A,w,E){var L=_.createProgram();_.attachShader(L,h),_.attachShader(L,A);for(var C=0;C<w.length;++C)_.bindAttribLocation(L,E[C],w[C]);if(_.linkProgram(L),!_.getProgramParameter(L,_.LINK_STATUS)){var P=_.getProgramInfoLog(L);throw new i(P,"Error linking program: "+P)}return L}(this.gl,x.shader,g.shader,f,y),x.programs.push(v),g.programs.push(v)),m}},3050:function(d){function s(i){this.plot=i,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}d.exports=function(i,r){var n=new s(i);return n.update(r),i.addOverlay(n),n};var e=s.prototype;e.update=function(i){i=i||{},this.enable=(i.enable||[!0,!0,!1,!1]).slice(),this.width=(i.width||[1,1,1,1]).slice(),this.color=(i.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(i.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},e.draw=function(){var i=this.enable,r=this.width,n=this.color,a=this.center,o=this.plot,u=o.line,p=o.dataBox,c=o.viewBox;if(u.bind(),p[0]<=a[0]&&a[0]<=p[2]&&p[1]<=a[1]&&a[1]<=p[3]){var x=c[0]+(a[0]-p[0])/(p[2]-p[0])*(c[2]-c[0]),g=c[1]+(a[1]-p[1])/(p[3]-p[1])*(c[3]-c[1]);i[0]&&u.drawLine(x,g,c[0],g,r[0],n[0]),i[1]&&u.drawLine(x,g,x,c[1],r[1],n[1]),i[2]&&u.drawLine(x,g,c[2],g,r[2],n[2]),i[3]&&u.drawLine(x,g,x,c[3],r[3],n[3])}},e.dispose=function(){this.plot.removeOverlay(this)}},3540:function(d,s,e){var i=e(6832),r=e(5158),n=i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),a=i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);d.exports=function(o){return r(o,n,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},6496:function(d,s,e){var i=e(5827),r=e(2944),n=e(3540);d.exports=function(g,f){var y=[];function v(w,E,L,C,P,D){var G=[w,E,L,0,0,0,1];G[C+3]=1,G[C]=P,y.push.apply(y,G),G[6]=-1,y.push.apply(y,G),G[C]=D,y.push.apply(y,G),y.push.apply(y,G),G[6]=1,y.push.apply(y,G),G[C]=P,y.push.apply(y,G)}v(0,0,0,0,0,1),v(0,0,0,1,0,1),v(0,0,0,2,0,1),v(1,0,0,1,-1,1),v(1,0,0,2,-1,1),v(0,1,0,0,-1,1),v(0,1,0,2,-1,1),v(0,0,1,0,-1,1),v(0,0,1,1,-1,1);var m=i(g,y),_=r(g,[{type:g.FLOAT,buffer:m,size:3,offset:0,stride:28},{type:g.FLOAT,buffer:m,size:3,offset:12,stride:28},{type:g.FLOAT,buffer:m,size:1,offset:24,stride:28}]),h=n(g);h.attributes.position.location=0,h.attributes.color.location=1,h.attributes.weight.location=2;var A=new o(g,m,_,h);return A.update(f),A};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function o(g,f,y,v){this.gl=g,this.buffer=f,this.vao=y,this.shader=v,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var u=o.prototype,p=[0,0,0],c=[0,0,0],x=[0,0];u.isTransparent=function(){return!1},u.drawTransparent=function(g){},u.draw=function(g){var f=this.gl,y=this.vao,v=this.shader;y.bind(),v.bind();var m,_=g.model||a,h=g.view||a,A=g.projection||a;this.axes&&(m=this.axes.lastCubeProps.axis);for(var w=p,E=c,L=0;L<3;++L)m&&m[L]<0?(w[L]=this.bounds[0][L],E[L]=this.bounds[1][L]):(w[L]=this.bounds[1][L],E[L]=this.bounds[0][L]);for(x[0]=f.drawingBufferWidth,x[1]=f.drawingBufferHeight,v.uniforms.model=_,v.uniforms.view=h,v.uniforms.projection=A,v.uniforms.coordinates=[this.position,w,E],v.uniforms.colors=this.colors,v.uniforms.screenShape=x,L=0;L<3;++L)v.uniforms.lineWidth=this.lineWidth[L]*this.pixelRatio,this.enabled[L]&&(y.draw(f.TRIANGLES,6,6*L),this.drawSides[L]&&y.draw(f.TRIANGLES,12,18+12*L));y.unbind()},u.update=function(g){g&&("bounds"in g&&(this.bounds=g.bounds),"position"in g&&(this.position=g.position),"lineWidth"in g&&(this.lineWidth=g.lineWidth),"colors"in g&&(this.colors=g.colors),"enabled"in g&&(this.enabled=g.enabled),"drawSides"in g&&(this.drawSides=g.drawSides))},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},9578:function(d,s,e){var i=e(6832),r=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),a=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),o=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},s.pickShader={vertex:a,fragment:o,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7307:function(d,s,e){var i=e(2858),r=e(4020),n=["xyz","xzy","yxz","yzx","zxy","zyx"],a=function(x,g){var f,y=x.length;for(f=0;f<y;f++){var v=x[f];if(v===g)return f;if(v>g)return f-1}return f},o=function(x,g,f){return x<g?g:x>f?f:x},u=function(x){var g=1/0;x.sort(function(m,_){return m-_});for(var f=x.length,y=1;y<f;y++){var v=Math.abs(x[y]-x[y-1]);v<g&&(g=v)}return g};d.exports=function(x,g){var f=x.startingPositions,y=x.maxLength||1e3,v=x.tubeSize||1,m=x.absoluteTubeSize,_=x.gridFill||"+x+y+z",h={};_.indexOf("-x")!==-1&&(h.reversedX=!0),_.indexOf("-y")!==-1&&(h.reversedY=!0),_.indexOf("-z")!==-1&&(h.reversedZ=!0),h.filled=n.indexOf(_.replace(/-/g,"").replace(/\+/g,""));var A=x.getVelocity||function(ge){return function(Oe,Ae,Te){var se=Ae.vectors,le=Ae.meshgrid,ne=Oe[0],me=Oe[1],Ee=Oe[2],be=le[0].length,De=le[1].length,Ue=le[2].length,he=a(le[0],ne),ke=a(le[1],me),_e=a(le[2],Ee),Ce=he+1,Fe=ke+1,Re=_e+1;if(he=o(he,0,be-1),Ce=o(Ce,0,be-1),ke=o(ke,0,De-1),Fe=o(Fe,0,De-1),_e=o(_e,0,Ue-1),Re=o(Re,0,Ue-1),he<0||ke<0||_e<0||Ce>be-1||Fe>De-1||Re>Ue-1)return i.create();var He,Ge,$e,st,Ke,gt,mt=le[0][he],at=le[0][Ce],rt=le[1][ke],xt=le[1][Fe],Tt=le[2][_e],wt=(ne-mt)/(at-mt),Ot=(me-rt)/(xt-rt),Ct=(Ee-Tt)/(le[2][Re]-Tt);switch(isFinite(wt)||(wt=.5),isFinite(Ot)||(Ot=.5),isFinite(Ct)||(Ct=.5),Te.reversedX&&(he=be-1-he,Ce=be-1-Ce),Te.reversedY&&(ke=De-1-ke,Fe=De-1-Fe),Te.reversedZ&&(_e=Ue-1-_e,Re=Ue-1-Re),Te.filled){case 5:Ke=_e,gt=Re,$e=ke*Ue,st=Fe*Ue,He=he*Ue*De,Ge=Ce*Ue*De;break;case 4:Ke=_e,gt=Re,He=he*Ue,Ge=Ce*Ue,$e=ke*Ue*be,st=Fe*Ue*be;break;case 3:$e=ke,st=Fe,Ke=_e*De,gt=Re*De,He=he*De*Ue,Ge=Ce*De*Ue;break;case 2:$e=ke,st=Fe,He=he*De,Ge=Ce*De,Ke=_e*De*be,gt=Re*De*be;break;case 1:He=he,Ge=Ce,Ke=_e*be,gt=Re*be,$e=ke*be*Ue,st=Fe*be*Ue;break;default:He=he,Ge=Ce,$e=ke*be,st=Fe*be,Ke=_e*be*De,gt=Re*be*De}var Ye=se[He+$e+Ke],Xe=se[He+$e+gt],Ve=se[He+st+Ke],We=se[He+st+gt],nt=se[Ge+$e+Ke],ot=se[Ge+$e+gt],Ie=se[Ge+st+Ke],ze=se[Ge+st+gt],et=i.create(),tt=i.create(),dt=i.create(),pt=i.create();i.lerp(et,Ye,nt,wt),i.lerp(tt,Xe,ot,wt),i.lerp(dt,Ve,Ie,wt),i.lerp(pt,We,ze,wt);var vt=i.create(),ct=i.create();i.lerp(vt,et,dt,Ot),i.lerp(ct,tt,pt,Ot);var kt=i.create();return i.lerp(kt,vt,ct,Ct),kt}(ge,x,h)},w=x.getDivergence||function(ge,Oe){var Ae=i.create(),Te=1e-4;i.add(Ae,ge,[Te,0,0]);var se=A(Ae);i.subtract(se,se,Oe),i.scale(se,se,1/Te),i.add(Ae,ge,[0,Te,0]);var le=A(Ae);i.subtract(le,le,Oe),i.scale(le,le,1/Te),i.add(Ae,ge,[0,0,Te]);var ne=A(Ae);return i.subtract(ne,ne,Oe),i.scale(ne,ne,1/Te),i.add(Ae,se,le),i.add(Ae,Ae,ne),Ae},E=[],L=g[0][0],C=g[0][1],P=g[0][2],D=g[1][0],G=g[1][1],I=g[1][2],H=function(ge){var Oe=ge[0],Ae=ge[1],Te=ge[2];return!(Oe<L||Oe>D||Ae<C||Ae>G||Te<P||Te>I)},N=10*i.distance(g[0],g[1])/y,F=N*N,V=1,q=0,te=f.length;te>1&&(V=function(ge){for(var Oe=[],Ae=[],Te=[],se={},le={},ne={},me=ge.length,Ee=0;Ee<me;Ee++){var be=ge[Ee],De=be[0],Ue=be[1],he=be[2];se[De]||(Oe.push(De),se[De]=!0),le[Ue]||(Ae.push(Ue),le[Ue]=!0),ne[he]||(Te.push(he),ne[he]=!0)}var ke=u(Oe),_e=u(Ae),Ce=u(Te),Fe=Math.min(ke,_e,Ce);return isFinite(Fe)?Fe:1}(f));for(var $=0;$<te;$++){var W=i.create();i.copy(W,f[$]);var Z=[W],J=[],ee=A(W),re=W;J.push(ee);var ae=[],oe=w(W,ee),ce=i.length(oe);isFinite(ce)&&ce>q&&(q=ce),ae.push(ce),E.push({points:Z,velocities:J,divergences:ae});for(var pe=0;pe<100*y&&Z.length<y&&H(W);){pe++;var ve=i.clone(ee),we=i.squaredLength(ve);if(we===0)break;we>F&&i.scale(ve,ve,N/Math.sqrt(we)),i.add(ve,ve,W),ee=A(ve),i.squaredDistance(re,ve)-F>-1e-4*F&&(Z.push(ve),re=ve,J.push(ee),oe=w(ve,ee),ce=i.length(oe),isFinite(ce)&&ce>q&&(q=ce),ae.push(ce)),W=ve}}var xe=function(ge,Oe,Ae,Te){for(var se=0,le=0;le<ge.length;le++)for(var ne=ge[le].velocities,me=0;me<ne.length;me++)se=Math.max(se,i.length(ne[me]));var Ee=ge.map(function(He){return function(Ge,$e,st,Ke){for(var gt=Ge.points,mt=Ge.velocities,at=Ge.divergences,rt=[],xt=[],Tt=[],wt=[],Ot=[],Ct=[],Ye=0,Xe=0,Ve=r.create(),We=r.create(),nt=0;nt<gt.length;nt++){var ot=gt[nt],Ie=mt[nt],ze=at[nt];$e===0&&(ze=.05*st),Xe=i.length(Ie)/Ke,Ve=r.create(),i.copy(Ve,Ie),Ve[3]=ze;for(var et=0;et<8;et++)Ot[et]=[ot[0],ot[1],ot[2],et];if(wt.length>0)for(et=0;et<8;et++){var tt=(et+1)%8;rt.push(wt[et],Ot[et],Ot[tt],Ot[tt],wt[tt],wt[et]),Tt.push(We,Ve,Ve,Ve,We,We),Ct.push(Ye,Xe,Xe,Xe,Ye,Ye);var dt=rt.length;xt.push([dt-6,dt-5,dt-4],[dt-3,dt-2,dt-1])}var pt=wt;wt=Ot,Ot=pt;var vt=We;We=Ve,Ve=vt;var ct=Ye;Ye=Xe,Xe=ct}return{positions:rt,cells:xt,vectors:Tt,vertexIntensity:Ct}}(He,Ae,Te,se)}),be=[],De=[],Ue=[],he=[];for(le=0;le<Ee.length;le++){var ke=Ee[le],_e=be.length;for(be=be.concat(ke.positions),Ue=Ue.concat(ke.vectors),he=he.concat(ke.vertexIntensity),me=0;me<ke.cells.length;me++){var Ce=ke.cells[me],Fe=[];De.push(Fe);for(var Re=0;Re<Ce.length;Re++)Fe.push(Ce[Re]+_e)}}return{positions:be,cells:De,vectors:Ue,vertexIntensity:he,colormap:Oe}}(E,x.colormap,q,V);return m?xe.tubeScale=m:(q===0&&(q=1),xe.tubeScale=.5*v*V/q),xe};var p=e(9578),c=e(1140).createMesh;d.exports.createTubeMesh=function(x,g){return c(x,g,{shaders:p,traceType:"streamtube"})}},9054:function(d,s,e){var i=e(5158),r=e(6832),n=r([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),a=r([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color  in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),o=r([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),u=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);s.createShader=function(p){var c=i(p,n,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c.attributes.normal.location=2,c},s.createPickShader=function(p){var c=i(p,n,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c.attributes.normal.location=2,c},s.createContourShader=function(p){var c=i(p,o,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c},s.createPickContourShader=function(p){var c=i(p,o,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c}},3754:function(d,s,e){d.exports=function(oe){var ce=oe.gl,pe=h(ce),ve=w(ce),we=A(ce),xe=E(ce),ge=r(ce),Oe=n(ce,[{buffer:ge,size:4,stride:L,offset:0},{buffer:ge,size:3,stride:L,offset:16},{buffer:ge,size:3,stride:L,offset:28}]),Ae=r(ce),Te=n(ce,[{buffer:Ae,size:4,stride:20,offset:0},{buffer:Ae,size:1,stride:20,offset:16}]),se=r(ce),le=n(ce,[{buffer:se,size:2,type:ce.FLOAT}]),ne=a(ce,1,I,ce.RGBA,ce.UNSIGNED_BYTE);ne.minFilter=ce.LINEAR,ne.magFilter=ce.LINEAR;var me=new H(ce,[0,0],[[0,0,0],[0,0,0]],pe,ve,ge,Oe,ne,we,xe,Ae,Te,se,le,[0,0,0]),Ee={levels:[[],[],[]]};for(var be in oe)Ee[be]=oe[be];return Ee.colormap=Ee.colormap||"jet",me.update(Ee),me};var i=e(2288),r=e(5827),n=e(2944),a=e(8931),o=e(5306),u=e(9156),p=e(7498),c=e(7382),x=e(5050),g=e(4162),f=e(104),y=e(7437),v=e(5070),m=e(9144),_=e(9054),h=_.createShader,A=_.createContourShader,w=_.createPickShader,E=_.createPickContourShader,L=40,C=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],P=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],D=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function G(oe,ce,pe,ve,we){this.position=oe,this.index=ce,this.uv=pe,this.level=ve,this.dataCoordinate=we}(function(){for(var oe=0;oe<3;++oe){var ce=D[oe],pe=(oe+2)%3;ce[(oe+1)%3+0]=1,ce[pe+3]=1,ce[oe+6]=1}})();var I=256;function H(oe,ce,pe,ve,we,xe,ge,Oe,Ae,Te,se,le,ne,me,Ee){this.gl=oe,this.shape=ce,this.bounds=pe,this.objectOffset=Ee,this.intensityBounds=[],this._shader=ve,this._pickShader=we,this._coordinateBuffer=xe,this._vao=ge,this._colorMap=Oe,this._contourShader=Ae,this._contourPickShader=Te,this._contourBuffer=se,this._contourVAO=le,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new G([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=ne,this._dynamicVAO=me,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[x(o.mallocFloat(1024),[0,0]),x(o.mallocFloat(1024),[0,0]),x(o.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var N=H.prototype;N.genColormap=function(oe,ce){var pe=!1,ve=c([u({colormap:oe,nshades:I,format:"rgba"}).map(function(we,xe){var ge=ce?function(Oe,Ae){if(!Ae||!Ae.length)return 1;for(var Te=0;Te<Ae.length;++Te){if(Ae.length<2)return 1;if(Ae[Te][0]===Oe)return Ae[Te][1];if(Ae[Te][0]>Oe&&Te>0){var se=(Ae[Te][0]-Oe)/(Ae[Te][0]-Ae[Te-1][0]);return Ae[Te][1]*(1-se)+se*Ae[Te-1][1]}}return 1}(xe/255,ce):we[3];return ge<1&&(pe=!0),[we[0],we[1],we[2],255*ge]})]);return p.divseq(ve,255),this.hasAlphaScale=pe,ve},N.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},N.isOpaque=function(){return!this.isTransparent()},N.pickSlots=1,N.setPickBase=function(oe){this.pickId=oe};var F=[0,0,0],V={showSurface:!1,showContour:!1,projections:[C.slice(),C.slice(),C.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function q(oe,ce){var pe,ve,we,xe=ce.axes&&ce.axes.lastCubeProps.axis||F,ge=ce.showSurface,Oe=ce.showContour;for(pe=0;pe<3;++pe)for(ge=ge||ce.surfaceProject[pe],ve=0;ve<3;++ve)Oe=Oe||ce.contourProject[pe][ve];for(pe=0;pe<3;++pe){var Ae=V.projections[pe];for(ve=0;ve<16;++ve)Ae[ve]=0;for(ve=0;ve<4;++ve)Ae[5*ve]=1;Ae[5*pe]=0,Ae[12+pe]=ce.axesBounds[+(xe[pe]>0)][pe],f(Ae,oe.model,Ae);var Te=V.clipBounds[pe];for(we=0;we<2;++we)for(ve=0;ve<3;++ve)Te[we][ve]=oe.clipBounds[we][ve];Te[0][pe]=-1e8,Te[1][pe]=1e8}return V.showSurface=ge,V.showContour=Oe,V}var te={model:C,view:C,projection:C,inverseModel:C.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},$=C.slice(),W=[1,0,0,0,1,0,0,0,1];function Z(oe,ce){oe=oe||{};var pe=this.gl;pe.disable(pe.CULL_FACE),this._colorMap.bind(0);var ve=te;ve.model=oe.model||C,ve.view=oe.view||C,ve.projection=oe.projection||C,ve.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],ve.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],ve.objectOffset=this.objectOffset,ve.contourColor=this.contourColor[0],ve.inverseModel=y(ve.inverseModel,ve.model);for(var we=0;we<2;++we)for(var xe=ve.clipBounds[we],ge=0;ge<3;++ge)xe[ge]=Math.min(Math.max(this.clipBounds[we][ge],-1e8),1e8);ve.kambient=this.ambientLight,ve.kdiffuse=this.diffuseLight,ve.kspecular=this.specularLight,ve.roughness=this.roughness,ve.fresnel=this.fresnel,ve.opacity=this.opacity,ve.height=0,ve.permutation=W,ve.vertexColor=this.vertexColor;var Oe=$;for(f(Oe,ve.view,ve.model),f(Oe,ve.projection,Oe),y(Oe,Oe),we=0;we<3;++we)ve.eyePosition[we]=Oe[12+we]/Oe[15];var Ae=Oe[15];for(we=0;we<3;++we)Ae+=this.lightPosition[we]*Oe[4*we+3];for(we=0;we<3;++we){var Te=Oe[12+we];for(ge=0;ge<3;++ge)Te+=Oe[4*ge+we]*this.lightPosition[ge];ve.lightPosition[we]=Te/Ae}var se=q(ve,this);if(se.showSurface){for(this._shader.bind(),this._shader.uniforms=ve,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(pe.TRIANGLES,this._vertexCount),we=0;we<3;++we)this.surfaceProject[we]&&this.vertexCount&&(this._shader.uniforms.model=se.projections[we],this._shader.uniforms.clipBounds=se.clipBounds[we],this._vao.draw(pe.TRIANGLES,this._vertexCount));this._vao.unbind()}if(se.showContour){var le=this._contourShader;ve.kambient=1,ve.kdiffuse=0,ve.kspecular=0,ve.opacity=1,le.bind(),le.uniforms=ve;var ne=this._contourVAO;for(ne.bind(),we=0;we<3;++we)for(le.uniforms.permutation=D[we],pe.lineWidth(this.contourWidth[we]*this.pixelRatio),ge=0;ge<this.contourLevels[we].length;++ge)ge===this.highlightLevel[we]?(le.uniforms.contourColor=this.highlightColor[we],le.uniforms.contourTint=this.highlightTint[we]):ge!==0&&ge-1!==this.highlightLevel[we]||(le.uniforms.contourColor=this.contourColor[we],le.uniforms.contourTint=this.contourTint[we]),this._contourCounts[we][ge]&&(le.uniforms.height=this.contourLevels[we][ge],ne.draw(pe.LINES,this._contourCounts[we][ge],this._contourOffsets[we][ge]));for(we=0;we<3;++we)for(le.uniforms.model=se.projections[we],le.uniforms.clipBounds=se.clipBounds[we],ge=0;ge<3;++ge)if(this.contourProject[we][ge]){le.uniforms.permutation=D[ge],pe.lineWidth(this.contourWidth[ge]*this.pixelRatio);for(var me=0;me<this.contourLevels[ge].length;++me)me===this.highlightLevel[ge]?(le.uniforms.contourColor=this.highlightColor[ge],le.uniforms.contourTint=this.highlightTint[ge]):me!==0&&me-1!==this.highlightLevel[ge]||(le.uniforms.contourColor=this.contourColor[ge],le.uniforms.contourTint=this.contourTint[ge]),this._contourCounts[ge][me]&&(le.uniforms.height=this.contourLevels[ge][me],ne.draw(pe.LINES,this._contourCounts[ge][me],this._contourOffsets[ge][me]))}for(ne.unbind(),(ne=this._dynamicVAO).bind(),we=0;we<3;++we)if(this._dynamicCounts[we]!==0)for(le.uniforms.model=ve.model,le.uniforms.clipBounds=ve.clipBounds,le.uniforms.permutation=D[we],pe.lineWidth(this.dynamicWidth[we]*this.pixelRatio),le.uniforms.contourColor=this.dynamicColor[we],le.uniforms.contourTint=this.dynamicTint[we],le.uniforms.height=this.dynamicLevel[we],ne.draw(pe.LINES,this._dynamicCounts[we],this._dynamicOffsets[we]),ge=0;ge<3;++ge)this.contourProject[ge][we]&&(le.uniforms.model=se.projections[ge],le.uniforms.clipBounds=se.clipBounds[ge],ne.draw(pe.LINES,this._dynamicCounts[we],this._dynamicOffsets[we]));ne.unbind()}}N.draw=function(oe){return Z.call(this,oe,!1)},N.drawTransparent=function(oe){return Z.call(this,oe,!0)};var J={model:C,view:C,projection:C,inverseModel:C,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function ee(oe,ce){return Array.isArray(oe)?[ce(oe[0]),ce(oe[1]),ce(oe[2])]:[ce(oe),ce(oe),ce(oe)]}function re(oe){return Array.isArray(oe)?oe.length===3?[oe[0],oe[1],oe[2],1]:[oe[0],oe[1],oe[2],oe[3]]:[0,0,0,1]}function ae(oe){if(Array.isArray(oe)){if(Array.isArray(oe))return[re(oe[0]),re(oe[1]),re(oe[2])];var ce=re(oe);return[ce.slice(),ce.slice(),ce.slice()]}}N.drawPick=function(oe){oe=oe||{};var ce=this.gl;ce.disable(ce.CULL_FACE);var pe=J;pe.model=oe.model||C,pe.view=oe.view||C,pe.projection=oe.projection||C,pe.shape=this._field[2].shape,pe.pickId=this.pickId/255,pe.lowerBound=this.bounds[0],pe.upperBound=this.bounds[1],pe.objectOffset=this.objectOffset,pe.permutation=W;for(var ve=0;ve<2;++ve)for(var we=pe.clipBounds[ve],xe=0;xe<3;++xe)we[xe]=Math.min(Math.max(this.clipBounds[ve][xe],-1e8),1e8);var ge=q(pe,this);if(ge.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=pe,this._vao.bind(),this._vao.draw(ce.TRIANGLES,this._vertexCount),ve=0;ve<3;++ve)this.surfaceProject[ve]&&(this._pickShader.uniforms.model=ge.projections[ve],this._pickShader.uniforms.clipBounds=ge.clipBounds[ve],this._vao.draw(ce.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ge.showContour){var Oe=this._contourPickShader;Oe.bind(),Oe.uniforms=pe;var Ae=this._contourVAO;for(Ae.bind(),xe=0;xe<3;++xe)for(ce.lineWidth(this.contourWidth[xe]*this.pixelRatio),Oe.uniforms.permutation=D[xe],ve=0;ve<this.contourLevels[xe].length;++ve)this._contourCounts[xe][ve]&&(Oe.uniforms.height=this.contourLevels[xe][ve],Ae.draw(ce.LINES,this._contourCounts[xe][ve],this._contourOffsets[xe][ve]));for(ve=0;ve<3;++ve)for(Oe.uniforms.model=ge.projections[ve],Oe.uniforms.clipBounds=ge.clipBounds[ve],xe=0;xe<3;++xe)if(this.contourProject[ve][xe]){Oe.uniforms.permutation=D[xe],ce.lineWidth(this.contourWidth[xe]*this.pixelRatio);for(var Te=0;Te<this.contourLevels[xe].length;++Te)this._contourCounts[xe][Te]&&(Oe.uniforms.height=this.contourLevels[xe][Te],Ae.draw(ce.LINES,this._contourCounts[xe][Te],this._contourOffsets[xe][Te]))}Ae.unbind()}},N.pick=function(oe){if(!oe||oe.id!==this.pickId)return null;var ce=this._field[2].shape,pe=this._pickResult,ve=ce[0]*(oe.value[0]+(oe.value[2]>>4)/16)/255,we=Math.floor(ve),xe=ve-we,ge=ce[1]*(oe.value[1]+(15&oe.value[2])/16)/255,Oe=Math.floor(ge),Ae=ge-Oe;we+=1,Oe+=1;var Te=pe.position;Te[0]=Te[1]=Te[2]=0;for(var se=0;se<2;++se)for(var le=se?xe:1-xe,ne=0;ne<2;++ne)for(var me=we+se,Ee=Oe+ne,be=le*(ne?Ae:1-Ae),De=0;De<3;++De)Te[De]+=this._field[De].get(me,Ee)*be;for(var Ue=this._pickResult.level,he=0;he<3;++he)if(Ue[he]=v.le(this.contourLevels[he],Te[he]),Ue[he]<0)this.contourLevels[he].length>0&&(Ue[he]=0);else if(Ue[he]<this.contourLevels[he].length-1){var ke=this.contourLevels[he][Ue[he]],_e=this.contourLevels[he][Ue[he]+1];Math.abs(ke-Te[he])>Math.abs(_e-Te[he])&&(Ue[he]+=1)}for(pe.index[0]=xe<.5?we:we+1,pe.index[1]=Ae<.5?Oe:Oe+1,pe.uv[0]=ve/ce[0],pe.uv[1]=ge/ce[1],De=0;De<3;++De)pe.dataCoordinate[De]=this._field[De].get(pe.index[0],pe.index[1]);return pe},N.padField=function(oe,ce){var pe=ce.shape.slice(),ve=oe.shape.slice();p.assign(oe.lo(1,1).hi(pe[0],pe[1]),ce),p.assign(oe.lo(1).hi(pe[0],1),ce.hi(pe[0],1)),p.assign(oe.lo(1,ve[1]-1).hi(pe[0],1),ce.lo(0,pe[1]-1).hi(pe[0],1)),p.assign(oe.lo(0,1).hi(1,pe[1]),ce.hi(1)),p.assign(oe.lo(ve[0]-1,1).hi(1,pe[1]),ce.lo(pe[0]-1)),oe.set(0,0,ce.get(0,0)),oe.set(0,ve[1]-1,ce.get(0,pe[1]-1)),oe.set(ve[0]-1,0,ce.get(pe[0]-1,0)),oe.set(ve[0]-1,ve[1]-1,ce.get(pe[0]-1,pe[1]-1))},N.update=function(oe){oe=oe||{},this.objectOffset=oe.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in oe&&(this.contourWidth=ee(oe.contourWidth,Number)),"showContour"in oe&&(this.showContour=ee(oe.showContour,Boolean)),"showSurface"in oe&&(this.showSurface=!!oe.showSurface),"contourTint"in oe&&(this.contourTint=ee(oe.contourTint,Boolean)),"contourColor"in oe&&(this.contourColor=ae(oe.contourColor)),"contourProject"in oe&&(this.contourProject=ee(oe.contourProject,function(nn){return ee(nn,Boolean)})),"surfaceProject"in oe&&(this.surfaceProject=oe.surfaceProject),"dynamicColor"in oe&&(this.dynamicColor=ae(oe.dynamicColor)),"dynamicTint"in oe&&(this.dynamicTint=ee(oe.dynamicTint,Number)),"dynamicWidth"in oe&&(this.dynamicWidth=ee(oe.dynamicWidth,Number)),"opacity"in oe&&(this.opacity=oe.opacity),"opacityscale"in oe&&(this.opacityscale=oe.opacityscale),"colorBounds"in oe&&(this.colorBounds=oe.colorBounds),"vertexColor"in oe&&(this.vertexColor=oe.vertexColor?1:0),"colormap"in oe&&this._colorMap.setPixels(this.genColormap(oe.colormap,this.opacityscale));var ce=oe.field||oe.coords&&oe.coords[2]||null,pe=!1;if(ce||(ce=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in oe||"coords"in oe){var ve=(ce.shape[0]+2)*(ce.shape[1]+2);ve>this._field[2].data.length&&(o.freeFloat(this._field[2].data),this._field[2].data=o.mallocFloat(i.nextPow2(ve))),this._field[2]=x(this._field[2].data,[ce.shape[0]+2,ce.shape[1]+2]),this.padField(this._field[2],ce),this.shape=ce.shape.slice();for(var we=this.shape,xe=0;xe<2;++xe)this._field[2].size>this._field[xe].data.length&&(o.freeFloat(this._field[xe].data),this._field[xe].data=o.mallocFloat(this._field[2].size)),this._field[xe]=x(this._field[xe].data,[we[0]+2,we[1]+2]);if(oe.coords){var ge=oe.coords;if(!Array.isArray(ge)||ge.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(xe=0;xe<2;++xe){var Oe=ge[xe];for(ne=0;ne<2;++ne)if(Oe.shape[ne]!==we[ne])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[xe],Oe)}}else if(oe.ticks){var Ae=oe.ticks;if(!Array.isArray(Ae)||Ae.length!==2)throw new Error("gl-surface: invalid ticks");for(xe=0;xe<2;++xe){var Te=Ae[xe];if((Array.isArray(Te)||Te.length)&&(Te=x(Te)),Te.shape[0]!==we[xe])throw new Error("gl-surface: invalid tick length");var se=x(Te.data,we);se.stride[xe]=Te.stride[0],se.stride[1^xe]=0,this.padField(this._field[xe],se)}}else{for(xe=0;xe<2;++xe){var le=[0,0];le[xe]=1,this._field[xe]=x(this._field[xe].data,[we[0]+2,we[1]+2],le,0)}this._field[0].set(0,0,0);for(var ne=0;ne<we[0];++ne)this._field[0].set(ne+1,0,ne);for(this._field[0].set(we[0]+1,0,we[0]-1),this._field[1].set(0,0,0),ne=0;ne<we[1];++ne)this._field[1].set(0,ne+1,ne);this._field[1].set(0,we[1]+1,we[1]-1)}var me=this._field,Ee=x(o.mallocFloat(3*me[2].size*2),[3,we[0]+2,we[1]+2,2]);for(xe=0;xe<3;++xe)m(Ee.pick(xe),me[xe],"mirror");var be=x(o.mallocFloat(3*me[2].size),[we[0]+2,we[1]+2,3]);for(xe=0;xe<we[0]+2;++xe)for(ne=0;ne<we[1]+2;++ne){var De=Ee.get(0,xe,ne,0),Ue=Ee.get(0,xe,ne,1),he=Ee.get(1,xe,ne,0),ke=Ee.get(1,xe,ne,1),_e=Ee.get(2,xe,ne,0),Ce=Ee.get(2,xe,ne,1),Fe=he*Ce-ke*_e,Re=_e*Ue-Ce*De,He=De*ke-Ue*he,Ge=Math.sqrt(Fe*Fe+Re*Re+He*He);Ge<1e-8?(Ge=Math.max(Math.abs(Fe),Math.abs(Re),Math.abs(He)))<1e-8?(He=1,Re=Fe=0,Ge=1):Ge=1/Ge:Ge=1/Math.sqrt(Ge),be.set(xe,ne,0,Fe*Ge),be.set(xe,ne,1,Re*Ge),be.set(xe,ne,2,He*Ge)}o.free(Ee.data);var $e=[1/0,1/0,1/0],st=[-1/0,-1/0,-1/0],Ke=1/0,gt=-1/0,mt=(we[0]-1)*(we[1]-1)*6,at=o.mallocFloat(i.nextPow2(10*mt)),rt=0,xt=0;for(xe=0;xe<we[0]-1;++xe)e:for(ne=0;ne<we[1]-1;++ne){for(var Tt=0;Tt<2;++Tt)for(var wt=0;wt<2;++wt)for(var Ot=0;Ot<3;++Ot){var Ct=this._field[Ot].get(1+xe+Tt,1+ne+wt);if(isNaN(Ct)||!isFinite(Ct))continue e}for(Ot=0;Ot<6;++Ot){var Ye=xe+P[Ot][0],Xe=ne+P[Ot][1],Ve=this._field[0].get(Ye+1,Xe+1),We=this._field[1].get(Ye+1,Xe+1);Ct=this._field[2].get(Ye+1,Xe+1),Fe=be.get(Ye+1,Xe+1,0),Re=be.get(Ye+1,Xe+1,1),He=be.get(Ye+1,Xe+1,2),oe.intensity&&(nt=oe.intensity.get(Ye,Xe));var nt=oe.intensity?oe.intensity.get(Ye,Xe):Ct+this.objectOffset[2];at[rt++]=Ye,at[rt++]=Xe,at[rt++]=Ve,at[rt++]=We,at[rt++]=Ct,at[rt++]=0,at[rt++]=nt,at[rt++]=Fe,at[rt++]=Re,at[rt++]=He,$e[0]=Math.min($e[0],Ve+this.objectOffset[0]),$e[1]=Math.min($e[1],We+this.objectOffset[1]),$e[2]=Math.min($e[2],Ct+this.objectOffset[2]),Ke=Math.min(Ke,nt),st[0]=Math.max(st[0],Ve+this.objectOffset[0]),st[1]=Math.max(st[1],We+this.objectOffset[1]),st[2]=Math.max(st[2],Ct+this.objectOffset[2]),gt=Math.max(gt,nt),xt+=1}}for(oe.intensityBounds&&(Ke=+oe.intensityBounds[0],gt=+oe.intensityBounds[1]),xe=6;xe<rt;xe+=10)at[xe]=(at[xe]-Ke)/(gt-Ke);this._vertexCount=xt,this._coordinateBuffer.update(at.subarray(0,rt)),o.freeFloat(at),o.free(be.data),this.bounds=[$e,st],this.intensity=oe.intensity||this._field[2],this.intensityBounds[0]===Ke&&this.intensityBounds[1]===gt||(pe=!0),this.intensityBounds=[Ke,gt]}if("levels"in oe){var ot=oe.levels;for(ot=Array.isArray(ot[0])?ot.slice():[[],[],ot],xe=0;xe<3;++xe)ot[xe]=ot[xe].slice(),ot[xe].sort(function(nn,Kt){return nn-Kt});for(xe=0;xe<3;++xe)for(ne=0;ne<ot[xe].length;++ne)ot[xe][ne]-=this.objectOffset[xe];e:for(xe=0;xe<3;++xe){if(ot[xe].length!==this.contourLevels[xe].length){pe=!0;break}for(ne=0;ne<ot[xe].length;++ne)if(ot[xe][ne]!==this.contourLevels[xe][ne]){pe=!0;break e}}this.contourLevels=ot}if(pe){me=this._field,we=this.shape;for(var Ie=[],ze=0;ze<3;++ze){var et=this.contourLevels[ze],tt=[],dt=[],pt=[0,0,0];for(xe=0;xe<et.length;++xe){var vt=g(this._field[ze],et[xe]);tt.push(Ie.length/5|0),xt=0;e:for(ne=0;ne<vt.cells.length;++ne){var ct=vt.cells[ne];for(Ot=0;Ot<2;++Ot){var kt=vt.positions[ct[Ot]],ut=kt[0],ft=0|Math.floor(ut),bt=ut-ft,It=kt[1],zt=0|Math.floor(It),Rt=It-zt,Jt=!1;t:for(var qt=0;qt<3;++qt){pt[qt]=0;var Wt=(ze+qt+1)%3;for(Tt=0;Tt<2;++Tt){var jt=Tt?bt:1-bt;for(Ye=0|Math.min(Math.max(ft+Tt,0),we[0]),wt=0;wt<2;++wt){var fn=wt?Rt:1-Rt;if(Xe=0|Math.min(Math.max(zt+wt,0),we[1]),Ct=qt<2?this._field[Wt].get(Ye,Xe):(this.intensity.get(Ye,Xe)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Ct)||isNaN(Ct)){Jt=!0;break t}var xn=jt*fn;pt[qt]+=xn*Ct}}}if(Jt){if(Ot>0){for(var un=0;un<5;++un)Ie.pop();xt-=1}continue e}Ie.push(pt[0],pt[1],kt[0],kt[1],pt[2]),xt+=1}}dt.push(xt)}this._contourOffsets[ze]=tt,this._contourCounts[ze]=dt}var Ht=o.mallocFloat(Ie.length);for(xe=0;xe<Ie.length;++xe)Ht[xe]=Ie[xe];this._contourBuffer.update(Ht),o.freeFloat(Ht)}},N.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var oe=0;oe<3;++oe)o.freeFloat(this._field[oe].data)},N.highlight=function(oe){var ce,pe;if(!oe)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(ce=0;ce<3;++ce)this.enableHighlight[ce]?this.highlightLevel[ce]=oe.level[ce]:this.highlightLevel[ce]=-1;for(pe=this.snapToData?oe.dataCoordinate:oe.position,ce=0;ce<3;++ce)pe[ce]-=this.objectOffset[ce];if(this.enableDynamic[0]&&pe[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&pe[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&pe[2]!==this.dynamicLevel[2]){for(var ve=0,we=this.shape,xe=o.mallocFloat(12*we[0]*we[1]),ge=0;ge<3;++ge)if(this.enableDynamic[ge]){this.dynamicLevel[ge]=pe[ge];var Oe=(ge+1)%3,Ae=(ge+2)%3,Te=this._field[ge],se=this._field[Oe],le=this._field[Ae],ne=g(Te,pe[ge]),me=ne.cells,Ee=ne.positions;for(this._dynamicOffsets[ge]=ve,ce=0;ce<me.length;++ce)for(var be=me[ce],De=0;De<2;++De){var Ue=Ee[be[De]],he=+Ue[0],ke=0|he,_e=0|Math.min(ke+1,we[0]),Ce=he-ke,Fe=1-Ce,Re=+Ue[1],He=0|Re,Ge=0|Math.min(He+1,we[1]),$e=Re-He,st=1-$e,Ke=Fe*st,gt=Fe*$e,mt=Ce*st,at=Ce*$e,rt=Ke*se.get(ke,He)+gt*se.get(ke,Ge)+mt*se.get(_e,He)+at*se.get(_e,Ge),xt=Ke*le.get(ke,He)+gt*le.get(ke,Ge)+mt*le.get(_e,He)+at*le.get(_e,Ge);if(isNaN(rt)||isNaN(xt)){De&&(ve-=1);break}xe[2*ve+0]=rt,xe[2*ve+1]=xt,ve+=1}this._dynamicCounts[ge]=ve-this._dynamicOffsets[ge]}else this.dynamicLevel[ge]=NaN,this._dynamicCounts[ge]=0;this._dynamicBuffer.update(xe.subarray(0,2*ve)),o.freeFloat(xe)}}},8931:function(d,s,e){var i=e(5050),r=e(7498),n=e(5306);d.exports=function(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(a||function(w){a=[w.LINEAR,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_NEAREST],o=[w.NEAREST,w.LINEAR,w.NEAREST_MIPMAP_NEAREST,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_LINEAR],u=[w.REPEAT,w.CLAMP_TO_EDGE,w.MIRRORED_REPEAT]}(_),typeof arguments[1]=="number")return m(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return m(_,0|arguments[1][0],0|arguments[1][1],arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var h=arguments[1],A=p(h)?h:h.raw;if(A)return function(w,E,L,C,P,D){var G=v(w);return w.texImage2D(w.TEXTURE_2D,0,P,P,D,E),new g(w,G,L,C,P,D)}(_,A,0|h.width,0|h.height,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(h.shape&&h.data&&h.stride)return function(w,E){var L=E.dtype,C=E.shape.slice(),P=w.getParameter(w.MAX_TEXTURE_SIZE);if(C[0]<0||C[0]>P||C[1]<0||C[1]>P)throw new Error("gl-texture2d: Invalid texture size");var D=y(C,E.stride.slice()),G=0;L==="float32"?G=w.FLOAT:L==="float64"?(G=w.FLOAT,D=!1,L="float32"):L==="uint8"?G=w.UNSIGNED_BYTE:(G=w.UNSIGNED_BYTE,D=!1,L="uint8");var I,H,N=0;if(C.length===2)N=w.LUMINANCE,C=[C[0],C[1],1],E=i(E.data,C,[E.stride[0],E.stride[1],1],E.offset);else{if(C.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(C[2]===1)N=w.ALPHA;else if(C[2]===2)N=w.LUMINANCE_ALPHA;else if(C[2]===3)N=w.RGB;else{if(C[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");N=w.RGBA}}G!==w.FLOAT||w.getExtension("OES_texture_float")||(G=w.UNSIGNED_BYTE,D=!1);var F=E.size;if(D)I=E.offset===0&&E.data.length===F?E.data:E.data.subarray(E.offset,E.offset+F);else{var V=[C[2],C[2]*C[0],1];H=n.malloc(F,L);var q=i(H,C,V,0);L!=="float32"&&L!=="float64"||G!==w.UNSIGNED_BYTE?r.assign(q,E):c(q,E),I=H.subarray(0,F)}var te=v(w);return w.texImage2D(w.TEXTURE_2D,0,N,C[0],C[1],0,N,G,I),D||n.free(H),new g(w,te,C[0],C[1],N,G)}(_,h)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var a=null,o=null,u=null;function p(_){return typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&_ instanceof HTMLVideoElement||typeof ImageData<"u"&&_ instanceof ImageData}var c=function(_,h){r.muls(_,h,255)};function x(_,h,A){var w=_.gl,E=w.getParameter(w.MAX_TEXTURE_SIZE);if(h<0||h>E||A<0||A>E)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[h,A],_.bind(),w.texImage2D(w.TEXTURE_2D,0,_.format,h,A,0,_.format,_.type,null),_._mipLevels=[0],_}function g(_,h,A,w,E,L){this.gl=_,this.handle=h,this.format=E,this.type=L,this._shape=[A,w],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var C=this,P=[this._wrapS,this._wrapT];Object.defineProperties(P,[{get:function(){return C._wrapS},set:function(G){return C.wrapS=G}},{get:function(){return C._wrapT},set:function(G){return C.wrapT=G}}]),this._wrapVector=P;var D=[this._shape[0],this._shape[1]];Object.defineProperties(D,[{get:function(){return C._shape[0]},set:function(G){return C.width=G}},{get:function(){return C._shape[1]},set:function(G){return C.height=G}}]),this._shapeVector=D}var f=g.prototype;function y(_,h){return _.length===3?h[2]===1&&h[1]===_[0]*_[2]&&h[0]===_[2]:h[0]===1&&h[1]===_[0]}function v(_){var h=_.createTexture();return _.bindTexture(_.TEXTURE_2D,h),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),h}function m(_,h,A,w,E){var L=_.getParameter(_.MAX_TEXTURE_SIZE);if(h<0||h>L||A<0||A>L)throw new Error("gl-texture2d: Invalid texture shape");if(E===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var C=v(_);return _.texImage2D(_.TEXTURE_2D,0,w,h,A,0,w,E,null),new g(_,C,h,A,w,E)}Object.defineProperties(f,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var h=this.gl;if(this.type===h.FLOAT&&a.indexOf(_)>=0&&(h.getExtension("OES_texture_float_linear")||(_=h.NEAREST)),o.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var h=this.gl;if(this.type===h.FLOAT&&a.indexOf(_)>=0&&(h.getExtension("OES_texture_float_linear")||(_=h.NEAREST)),o.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var h=this._anisoSamples;if(this._anisoSamples=0|Math.max(_,1),h!==this._anisoSamples){var A=this.gl.getExtension("EXT_texture_filter_anisotropic");A&&this.gl.texParameterf(this.gl.TEXTURE_2D,A.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),u.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),u.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),_.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var h=0;h<2;++h)if(u.indexOf(_[h])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var A=this.gl;return this.bind(),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,this._wrapS),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(Array.isArray(_)){if(_.length!==2)throw new Error("gl-texture2d: Invalid texture shape")}else _=[0|_,0|_];return x(this,0|_[0],0|_[1]),[0|_[0],0|_[1]]}},width:{get:function(){return this._shape[0]},set:function(_){return x(this,_|=0,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return _|=0,x(this,this._shape[0],_),_}}}),f.bind=function(_){var h=this.gl;return _!==void 0&&h.activeTexture(h.TEXTURE0+(0|_)),h.bindTexture(h.TEXTURE_2D,this.handle),_!==void 0?0|_:h.getParameter(h.ACTIVE_TEXTURE)-h.TEXTURE0},f.dispose=function(){this.gl.deleteTexture(this.handle)},f.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),h=0;_>0;++h,_>>>=1)this._mipLevels.indexOf(h)<0&&this._mipLevels.push(h)},f.setPixels=function(_,h,A,w){var E=this.gl;this.bind(),Array.isArray(h)?(w=A,A=0|h[1],h=0|h[0]):(h=h||0,A=A||0),w=w||0;var L=p(_)?_:_.raw;if(L)this._mipLevels.indexOf(w)<0?(E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,this.type,L),this._mipLevels.push(w)):E.texSubImage2D(E.TEXTURE_2D,w,h,A,this.format,this.type,L);else{if(!(_.shape&&_.stride&&_.data))throw new Error("gl-texture2d: Unsupported data type");if(_.shape.length<2||h+_.shape[1]>this._shape[1]>>>w||A+_.shape[0]>this._shape[0]>>>w||h<0||A<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");(function(C,P,D,G,I,H,N,F){var V=F.dtype,q=F.shape.slice();if(q.length<2||q.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var te=0,$=0,W=y(q,F.stride.slice());if(V==="float32"?te=C.FLOAT:V==="float64"?(te=C.FLOAT,W=!1,V="float32"):V==="uint8"?te=C.UNSIGNED_BYTE:(te=C.UNSIGNED_BYTE,W=!1,V="uint8"),q.length===2)$=C.LUMINANCE,q=[q[0],q[1],1],F=i(F.data,q,[F.stride[0],F.stride[1],1],F.offset);else{if(q.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(q[2]===1)$=C.ALPHA;else if(q[2]===2)$=C.LUMINANCE_ALPHA;else if(q[2]===3)$=C.RGB;else{if(q[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");$=C.RGBA}q[2]}if($!==C.LUMINANCE&&$!==C.ALPHA||I!==C.LUMINANCE&&I!==C.ALPHA||($=I),$!==I)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var Z=F.size,J=N.indexOf(G)<0;if(J&&N.push(G),te===H&&W)F.offset===0&&F.data.length===Z?J?C.texImage2D(C.TEXTURE_2D,G,I,q[0],q[1],0,I,H,F.data):C.texSubImage2D(C.TEXTURE_2D,G,P,D,q[0],q[1],I,H,F.data):J?C.texImage2D(C.TEXTURE_2D,G,I,q[0],q[1],0,I,H,F.data.subarray(F.offset,F.offset+Z)):C.texSubImage2D(C.TEXTURE_2D,G,P,D,q[0],q[1],I,H,F.data.subarray(F.offset,F.offset+Z));else{var ee;ee=H===C.FLOAT?n.mallocFloat32(Z):n.mallocUint8(Z);var re=i(ee,q,[q[2],q[2]*q[0],1]);te===C.FLOAT&&H===C.UNSIGNED_BYTE?c(re,F):r.assign(re,F),J?C.texImage2D(C.TEXTURE_2D,G,I,q[0],q[1],0,I,H,ee.subarray(0,Z)):C.texSubImage2D(C.TEXTURE_2D,G,P,D,q[0],q[1],I,H,ee.subarray(0,Z)),H===C.FLOAT?n.freeFloat32(ee):n.freeUint8(ee)}})(E,h,A,w,this.format,this.type,this._mipLevels,_)}}},3056:function(d){d.exports=function(s,e,i){e?e.bind():s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,null);var r=0|s.getParameter(s.MAX_VERTEX_ATTRIBS);if(i){if(i.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var n=0;n<i.length;++n){var a=i[n];if(a.buffer){var o=a.buffer,u=a.size||4,p=a.type||s.FLOAT,c=!!a.normalized,x=a.stride||0,g=a.offset||0;o.bind(),s.enableVertexAttribArray(n),s.vertexAttribPointer(n,u,p,c,x,g)}else{if(typeof a=="number")s.vertexAttrib1f(n,a);else if(a.length===1)s.vertexAttrib1f(n,a[0]);else if(a.length===2)s.vertexAttrib2f(n,a[0],a[1]);else if(a.length===3)s.vertexAttrib3f(n,a[0],a[1],a[2]);else{if(a.length!==4)throw new Error("gl-vao: Invalid vertex attribute");s.vertexAttrib4f(n,a[0],a[1],a[2],a[3])}s.disableVertexAttribArray(n)}}for(;n<r;++n)s.disableVertexAttribArray(n)}else for(s.bindBuffer(s.ARRAY_BUFFER,null),n=0;n<r;++n)s.disableVertexAttribArray(n)}},7220:function(d,s,e){var i=e(3056);function r(n){this.gl=n,this._elements=null,this._attributes=null,this._elementsType=n.UNSIGNED_SHORT}r.prototype.bind=function(){i(this.gl,this._elements,this._attributes)},r.prototype.update=function(n,a,o){this._elements=a,this._attributes=n,this._elementsType=o||this.gl.UNSIGNED_SHORT},r.prototype.dispose=function(){},r.prototype.unbind=function(){},r.prototype.draw=function(n,a,o){o=o||0;var u=this.gl;this._elements?u.drawElements(n,a,this._elementsType,o):u.drawArrays(n,o,a)},d.exports=function(n){return new r(n)}},3778:function(d,s,e){var i=e(3056);function r(a,o,u,p,c,x){this.location=a,this.dimension=o,this.a=u,this.b=p,this.c=c,this.d=x}function n(a,o,u){this.gl=a,this._ext=o,this.handle=u,this._attribs=[],this._useElements=!1,this._elementsType=a.UNSIGNED_SHORT}r.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)},n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},n.prototype.update=function(a,o,u){if(this.bind(),i(this.gl,o,a),this.unbind(),this._attribs.length=0,a)for(var p=0;p<a.length;++p){var c=a[p];typeof c=="number"?this._attribs.push(new r(p,1,c)):Array.isArray(c)&&this._attribs.push(new r(p,c.length,c[0],c[1],c[2],c[3]))}this._useElements=!!o,this._elementsType=u||this.gl.UNSIGNED_SHORT},n.prototype.draw=function(a,o,u){u=u||0;var p=this.gl;this._useElements?p.drawElements(a,o,this._elementsType,u):p.drawArrays(a,u,o)},d.exports=function(a,o){return new n(a,o,o.createVertexArrayOES())}},2944:function(d,s,e){var i=e(3778),r=e(7220);function n(a){this.bindVertexArrayOES=a.bindVertexArray.bind(a),this.createVertexArrayOES=a.createVertexArray.bind(a),this.deleteVertexArrayOES=a.deleteVertexArray.bind(a)}d.exports=function(a,o,u,p){var c,x=a.createVertexArray?new n(a):a.getExtension("OES_vertex_array_object");return(c=x?i(a,x):r(a)).update(o,u,p),c}},2598:function(d){d.exports=function(s,e,i){return s[0]=e[0]+i[0],s[1]=e[1]+i[1],s[2]=e[2]+i[2],s}},5879:function(d,s,e){d.exports=function(a,o){var u=i(a[0],a[1],a[2]),p=i(o[0],o[1],o[2]);r(u,u),r(p,p);var c=n(u,p);return c>1?0:Math.acos(c)};var i=e(5415),r=e(899),n=e(9305)},8827:function(d){d.exports=function(s,e){return s[0]=Math.ceil(e[0]),s[1]=Math.ceil(e[1]),s[2]=Math.ceil(e[2]),s}},7622:function(d){d.exports=function(s){var e=new Float32Array(3);return e[0]=s[0],e[1]=s[1],e[2]=s[2],e}},8782:function(d){d.exports=function(s,e){return s[0]=e[0],s[1]=e[1],s[2]=e[2],s}},8501:function(d){d.exports=function(){var s=new Float32Array(3);return s[0]=0,s[1]=0,s[2]=0,s}},903:function(d){d.exports=function(s,e,i){var r=e[0],n=e[1],a=e[2],o=i[0],u=i[1],p=i[2];return s[0]=n*p-a*u,s[1]=a*o-r*p,s[2]=r*u-n*o,s}},5981:function(d,s,e){d.exports=e(8288)},8288:function(d){d.exports=function(s,e){var i=e[0]-s[0],r=e[1]-s[1],n=e[2]-s[2];return Math.sqrt(i*i+r*r+n*n)}},8629:function(d,s,e){d.exports=e(7979)},7979:function(d){d.exports=function(s,e,i){return s[0]=e[0]/i[0],s[1]=e[1]/i[1],s[2]=e[2]/i[2],s}},9305:function(d){d.exports=function(s,e){return s[0]*e[0]+s[1]*e[1]+s[2]*e[2]}},154:function(d){d.exports=1e-6},4932:function(d,s,e){d.exports=function(r,n){var a=r[0],o=r[1],u=r[2],p=n[0],c=n[1],x=n[2];return Math.abs(a-p)<=i*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-c)<=i*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(u-x)<=i*Math.max(1,Math.abs(u),Math.abs(x))};var i=e(154)},5777:function(d){d.exports=function(s,e){return s[0]===e[0]&&s[1]===e[1]&&s[2]===e[2]}},3306:function(d){d.exports=function(s,e){return s[0]=Math.floor(e[0]),s[1]=Math.floor(e[1]),s[2]=Math.floor(e[2]),s}},7447:function(d,s,e){d.exports=function(r,n,a,o,u,p){var c,x;for(n||(n=3),a||(a=0),x=o?Math.min(o*n+a,r.length):r.length,c=a;c<x;c+=n)i[0]=r[c],i[1]=r[c+1],i[2]=r[c+2],u(i,i,p),r[c]=i[0],r[c+1]=i[1],r[c+2]=i[2];return r};var i=e(8501)()},5415:function(d){d.exports=function(s,e,i){var r=new Float32Array(3);return r[0]=s,r[1]=e,r[2]=i,r}},2858:function(d,s,e){d.exports={EPSILON:e(154),create:e(8501),clone:e(7622),angle:e(5879),fromValues:e(5415),copy:e(8782),set:e(831),equals:e(4932),exactEquals:e(5777),add:e(2598),subtract:e(911),sub:e(8921),multiply:e(105),mul:e(5733),divide:e(7979),div:e(8629),min:e(3605),max:e(1716),floor:e(3306),ceil:e(8827),round:e(1624),scale:e(5685),scaleAndAdd:e(6722),distance:e(8288),dist:e(5981),squaredDistance:e(6403),sqrDist:e(5294),length:e(4693),len:e(1468),squaredLength:e(4337),sqrLen:e(3303),negate:e(435),inverse:e(2073),normalize:e(899),dot:e(9305),cross:e(903),lerp:e(1868),random:e(6660),transformMat4:e(3255),transformMat3:e(9908),transformQuat:e(6568),rotateX:e(392),rotateY:e(3222),rotateZ:e(3388),forEach:e(7447)}},2073:function(d){d.exports=function(s,e){return s[0]=1/e[0],s[1]=1/e[1],s[2]=1/e[2],s}},1468:function(d,s,e){d.exports=e(4693)},4693:function(d){d.exports=function(s){var e=s[0],i=s[1],r=s[2];return Math.sqrt(e*e+i*i+r*r)}},1868:function(d){d.exports=function(s,e,i,r){var n=e[0],a=e[1],o=e[2];return s[0]=n+r*(i[0]-n),s[1]=a+r*(i[1]-a),s[2]=o+r*(i[2]-o),s}},1716:function(d){d.exports=function(s,e,i){return s[0]=Math.max(e[0],i[0]),s[1]=Math.max(e[1],i[1]),s[2]=Math.max(e[2],i[2]),s}},3605:function(d){d.exports=function(s,e,i){return s[0]=Math.min(e[0],i[0]),s[1]=Math.min(e[1],i[1]),s[2]=Math.min(e[2],i[2]),s}},5733:function(d,s,e){d.exports=e(105)},105:function(d){d.exports=function(s,e,i){return s[0]=e[0]*i[0],s[1]=e[1]*i[1],s[2]=e[2]*i[2],s}},435:function(d){d.exports=function(s,e){return s[0]=-e[0],s[1]=-e[1],s[2]=-e[2],s}},899:function(d){d.exports=function(s,e){var i=e[0],r=e[1],n=e[2],a=i*i+r*r+n*n;return a>0&&(a=1/Math.sqrt(a),s[0]=e[0]*a,s[1]=e[1]*a,s[2]=e[2]*a),s}},6660:function(d){d.exports=function(s,e){e=e||1;var i=2*Math.random()*Math.PI,r=2*Math.random()-1,n=Math.sqrt(1-r*r)*e;return s[0]=Math.cos(i)*n,s[1]=Math.sin(i)*n,s[2]=r*e,s}},392:function(d){d.exports=function(s,e,i,r){var n=i[1],a=i[2],o=e[1]-n,u=e[2]-a,p=Math.sin(r),c=Math.cos(r);return s[0]=e[0],s[1]=n+o*c-u*p,s[2]=a+o*p+u*c,s}},3222:function(d){d.exports=function(s,e,i,r){var n=i[0],a=i[2],o=e[0]-n,u=e[2]-a,p=Math.sin(r),c=Math.cos(r);return s[0]=n+u*p+o*c,s[1]=e[1],s[2]=a+u*c-o*p,s}},3388:function(d){d.exports=function(s,e,i,r){var n=i[0],a=i[1],o=e[0]-n,u=e[1]-a,p=Math.sin(r),c=Math.cos(r);return s[0]=n+o*c-u*p,s[1]=a+o*p+u*c,s[2]=e[2],s}},1624:function(d){d.exports=function(s,e){return s[0]=Math.round(e[0]),s[1]=Math.round(e[1]),s[2]=Math.round(e[2]),s}},5685:function(d){d.exports=function(s,e,i){return s[0]=e[0]*i,s[1]=e[1]*i,s[2]=e[2]*i,s}},6722:function(d){d.exports=function(s,e,i,r){return s[0]=e[0]+i[0]*r,s[1]=e[1]+i[1]*r,s[2]=e[2]+i[2]*r,s}},831:function(d){d.exports=function(s,e,i,r){return s[0]=e,s[1]=i,s[2]=r,s}},5294:function(d,s,e){d.exports=e(6403)},3303:function(d,s,e){d.exports=e(4337)},6403:function(d){d.exports=function(s,e){var i=e[0]-s[0],r=e[1]-s[1],n=e[2]-s[2];return i*i+r*r+n*n}},4337:function(d){d.exports=function(s){var e=s[0],i=s[1],r=s[2];return e*e+i*i+r*r}},8921:function(d,s,e){d.exports=e(911)},911:function(d){d.exports=function(s,e,i){return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],s}},9908:function(d){d.exports=function(s,e,i){var r=e[0],n=e[1],a=e[2];return s[0]=r*i[0]+n*i[3]+a*i[6],s[1]=r*i[1]+n*i[4]+a*i[7],s[2]=r*i[2]+n*i[5]+a*i[8],s}},3255:function(d){d.exports=function(s,e,i){var r=e[0],n=e[1],a=e[2],o=i[3]*r+i[7]*n+i[11]*a+i[15];return o=o||1,s[0]=(i[0]*r+i[4]*n+i[8]*a+i[12])/o,s[1]=(i[1]*r+i[5]*n+i[9]*a+i[13])/o,s[2]=(i[2]*r+i[6]*n+i[10]*a+i[14])/o,s}},6568:function(d){d.exports=function(s,e,i){var r=e[0],n=e[1],a=e[2],o=i[0],u=i[1],p=i[2],c=i[3],x=c*r+u*a-p*n,g=c*n+p*r-o*a,f=c*a+o*n-u*r,y=-o*r-u*n-p*a;return s[0]=x*c+y*-o+g*-p-f*-u,s[1]=g*c+y*-u+f*-o-x*-p,s[2]=f*c+y*-p+x*-u-g*-o,s}},3433:function(d){d.exports=function(s,e,i){return s[0]=e[0]+i[0],s[1]=e[1]+i[1],s[2]=e[2]+i[2],s[3]=e[3]+i[3],s}},1413:function(d){d.exports=function(s){var e=new Float32Array(4);return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e}},3470:function(d){d.exports=function(s,e){return s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=e[3],s}},5313:function(d){d.exports=function(){var s=new Float32Array(4);return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s}},5446:function(d){d.exports=function(s,e){var i=e[0]-s[0],r=e[1]-s[1],n=e[2]-s[2],a=e[3]-s[3];return Math.sqrt(i*i+r*r+n*n+a*a)}},205:function(d){d.exports=function(s,e,i){return s[0]=e[0]/i[0],s[1]=e[1]/i[1],s[2]=e[2]/i[2],s[3]=e[3]/i[3],s}},4242:function(d){d.exports=function(s,e){return s[0]*e[0]+s[1]*e[1]+s[2]*e[2]+s[3]*e[3]}},5680:function(d){d.exports=function(s,e,i,r){var n=new Float32Array(4);return n[0]=s,n[1]=e,n[2]=i,n[3]=r,n}},4020:function(d,s,e){d.exports={create:e(5313),clone:e(1413),fromValues:e(5680),copy:e(3470),set:e(6453),add:e(3433),subtract:e(2705),multiply:e(746),divide:e(205),min:e(2170),max:e(3030),scale:e(5510),scaleAndAdd:e(4224),distance:e(5446),squaredDistance:e(1542),length:e(8177),squaredLength:e(9037),negate:e(6459),inverse:e(8057),normalize:e(381),dot:e(4242),lerp:e(8746),random:e(3770),transformMat4:e(6342),transformQuat:e(5022)}},8057:function(d){d.exports=function(s,e){return s[0]=1/e[0],s[1]=1/e[1],s[2]=1/e[2],s[3]=1/e[3],s}},8177:function(d){d.exports=function(s){var e=s[0],i=s[1],r=s[2],n=s[3];return Math.sqrt(e*e+i*i+r*r+n*n)}},8746:function(d){d.exports=function(s,e,i,r){var n=e[0],a=e[1],o=e[2],u=e[3];return s[0]=n+r*(i[0]-n),s[1]=a+r*(i[1]-a),s[2]=o+r*(i[2]-o),s[3]=u+r*(i[3]-u),s}},3030:function(d){d.exports=function(s,e,i){return s[0]=Math.max(e[0],i[0]),s[1]=Math.max(e[1],i[1]),s[2]=Math.max(e[2],i[2]),s[3]=Math.max(e[3],i[3]),s}},2170:function(d){d.exports=function(s,e,i){return s[0]=Math.min(e[0],i[0]),s[1]=Math.min(e[1],i[1]),s[2]=Math.min(e[2],i[2]),s[3]=Math.min(e[3],i[3]),s}},746:function(d){d.exports=function(s,e,i){return s[0]=e[0]*i[0],s[1]=e[1]*i[1],s[2]=e[2]*i[2],s[3]=e[3]*i[3],s}},6459:function(d){d.exports=function(s,e){return s[0]=-e[0],s[1]=-e[1],s[2]=-e[2],s[3]=-e[3],s}},381:function(d){d.exports=function(s,e){var i=e[0],r=e[1],n=e[2],a=e[3],o=i*i+r*r+n*n+a*a;return o>0&&(o=1/Math.sqrt(o),s[0]=i*o,s[1]=r*o,s[2]=n*o,s[3]=a*o),s}},3770:function(d,s,e){var i=e(381),r=e(5510);d.exports=function(n,a){return a=a||1,n[0]=Math.random(),n[1]=Math.random(),n[2]=Math.random(),n[3]=Math.random(),i(n,n),r(n,n,a),n}},5510:function(d){d.exports=function(s,e,i){return s[0]=e[0]*i,s[1]=e[1]*i,s[2]=e[2]*i,s[3]=e[3]*i,s}},4224:function(d){d.exports=function(s,e,i,r){return s[0]=e[0]+i[0]*r,s[1]=e[1]+i[1]*r,s[2]=e[2]+i[2]*r,s[3]=e[3]+i[3]*r,s}},6453:function(d){d.exports=function(s,e,i,r,n){return s[0]=e,s[1]=i,s[2]=r,s[3]=n,s}},1542:function(d){d.exports=function(s,e){var i=e[0]-s[0],r=e[1]-s[1],n=e[2]-s[2],a=e[3]-s[3];return i*i+r*r+n*n+a*a}},9037:function(d){d.exports=function(s){var e=s[0],i=s[1],r=s[2],n=s[3];return e*e+i*i+r*r+n*n}},2705:function(d){d.exports=function(s,e,i){return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],s[3]=e[3]-i[3],s}},6342:function(d){d.exports=function(s,e,i){var r=e[0],n=e[1],a=e[2],o=e[3];return s[0]=i[0]*r+i[4]*n+i[8]*a+i[12]*o,s[1]=i[1]*r+i[5]*n+i[9]*a+i[13]*o,s[2]=i[2]*r+i[6]*n+i[10]*a+i[14]*o,s[3]=i[3]*r+i[7]*n+i[11]*a+i[15]*o,s}},5022:function(d){d.exports=function(s,e,i){var r=e[0],n=e[1],a=e[2],o=i[0],u=i[1],p=i[2],c=i[3],x=c*r+u*a-p*n,g=c*n+p*r-o*a,f=c*a+o*n-u*r,y=-o*r-u*n-p*a;return s[0]=x*c+y*-o+g*-p-f*-u,s[1]=g*c+y*-u+f*-o-x*-p,s[2]=f*c+y*-p+x*-u-g*-o,s[3]=e[3],s}},9365:function(d,s,e){var i=e(8096),r=e(7896);d.exports=function(n){for(var a=Array.isArray(n)?n:i(n),o=0;o<a.length;o++){var u=a[o];if(u.type==="preprocessor"){var p=u.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(p&&p[2]){var c=p[1],x=p[2];return(c?r(x):x).trim()}}}}},3193:function(d,s,e){d.exports=function(C){var P,D,G,I=0,H=0,N=u,F=[],V=[],q=1,te=0,$=0,W=!1,Z=!1,J="",ee=n,re=i;(C=C||{}).version==="300 es"&&(ee=o,re=a);var ae={},oe={};for(I=0;I<ee.length;I++)ae[ee[I]]=!0;for(I=0;I<re.length;I++)oe[re[I]]=!0;return function(ne){return V=[],ne!==null?function(me){var Ee;for(I=0,me.toString&&(me=me.toString()),J+=me.replace(/\r\n/g,`
`),G=J.length;P=J[I],I<G;){switch(Ee=I,N){case c:I=xe();break;case x:case g:I=we();break;case f:I=ge();break;case y:I=Te();break;case E:I=Ae();break;case v:I=se();break;case p:I=le();break;case A:I=ve();break;case u:I=pe()}Ee!==I&&(J[Ee]===`
`?(te=0,++q):++te)}return H+=I,J=J.slice(I),V}(ne):(F.length&&ce(F.join("")),N=w,ce("(eof)"),V)};function ce(ne){ne.length&&V.push({type:L[N],data:ne,position:$,line:q,column:te})}function pe(){return F=F.length?[]:F,D==="/"&&P==="*"?($=H+I-1,N=c,D=P,I+1):D==="/"&&P==="/"?($=H+I-1,N=x,D=P,I+1):P==="#"?(N=g,$=H+I,I):/\s/.test(P)?(N=A,$=H+I,I):(W=/\d/.test(P),Z=/[^\w_]/.test(P),$=H+I,N=W?y:Z?f:p,I)}function ve(){return/[^\s]/g.test(P)?(ce(F.join("")),N=u,I):(F.push(P),D=P,I+1)}function we(){return P!=="\r"&&P!==`
`||D==="\\"?(F.push(P),D=P,I+1):(ce(F.join("")),N=u,I)}function xe(){return P==="/"&&D==="*"?(F.push(P),ce(F.join("")),N=u,I+1):(F.push(P),D=P,I+1)}function ge(){if(D==="."&&/\d/.test(P))return N=v,I;if(D==="/"&&P==="*")return N=c,I;if(D==="/"&&P==="/")return N=x,I;if(P==="."&&F.length){for(;Oe(F););return N=v,I}if(P===";"||P===")"||P==="("){if(F.length)for(;Oe(F););return ce(P),N=u,I+1}var ne=F.length===2&&P!=="=";if(/[\w_\d\s]/.test(P)||ne){for(;Oe(F););return N=u,I}return F.push(P),D=P,I+1}function Oe(ne){for(var me,Ee,be=0;;){if(me=r.indexOf(ne.slice(0,ne.length+be).join("")),Ee=r[me],me===-1){if(be--+ne.length>0)continue;Ee=ne.slice(0,1).join("")}return ce(Ee),$+=Ee.length,(F=F.slice(Ee.length)).length}}function Ae(){return/[^a-fA-F0-9]/.test(P)?(ce(F.join("")),N=u,I):(F.push(P),D=P,I+1)}function Te(){return P==="."||/[eE]/.test(P)?(F.push(P),N=v,D=P,I+1):P==="x"&&F.length===1&&F[0]==="0"?(N=E,F.push(P),D=P,I+1):/[^\d]/.test(P)?(ce(F.join("")),N=u,I):(F.push(P),D=P,I+1)}function se(){return P==="f"&&(F.push(P),D=P,I+=1),/[eE]/.test(P)?(F.push(P),D=P,I+1):(P!=="-"&&P!=="+"||!/[eE]/.test(D))&&/[^\d]/.test(P)?(ce(F.join("")),N=u,I):(F.push(P),D=P,I+1)}function le(){if(/[^\d\w_]/.test(P)){var ne=F.join("");return N=oe[ne]?h:ae[ne]?_:m,ce(F.join("")),N=u,I}return F.push(P),D=P,I+1}};var i=e(399),r=e(9746),n=e(9525),a=e(9458),o=e(3585),u=999,p=9999,c=0,x=1,g=2,f=3,y=4,v=5,m=6,_=7,h=8,A=9,w=10,E=11,L=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3585:function(d,s,e){var i=e(9525);i=i.slice().filter(function(r){return!/^(gl\_|texture)/.test(r)}),d.exports=i.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},9525:function(d){d.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},9458:function(d,s,e){var i=e(399);d.exports=i.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},399:function(d){d.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},9746:function(d){d.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},8096:function(d,s,e){var i=e(3193);d.exports=function(r,n){var a=i(n),o=[];return(o=o.concat(a(r))).concat(a(null))}},6832:function(d){d.exports=function(s){typeof s=="string"&&(s=[s]);for(var e=[].slice.call(arguments,1),i=[],r=0;r<s.length-1;r++)i.push(s[r],e[r]||"");return i.push(s[r]),i.join("")}},5233:function(d,s,e){var i=e(4846);d.exports=i&&function(){var r=!1;try{var n=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{r=!1}return r}()},2183:function(d,s,e){d.exports=function(x,g){var f=x.length;if(f===0)throw new Error("Must have at least d+1 points");var y=x[0].length;if(f<=y)throw new Error("Must input at least d+1 points");var v=x.slice(0,y+1),m=i.apply(void 0,v);if(m===0)throw new Error("Input not in general position");for(var _=new Array(y+1),h=0;h<=y;++h)_[h]=h;m<0&&(_[0]=1,_[1]=0);var A=new n(_,new Array(y+1),!1),w=A.adjacent,E=new Array(y+2);for(h=0;h<=y;++h){for(var L=_.slice(),C=0;C<=y;++C)C===h&&(L[C]=-1);var P=L[0];L[0]=L[1],L[1]=P;var D=new n(L,new Array(y+1),!0);w[h]=D,E[h]=D}for(E[y+1]=A,h=0;h<=y;++h){L=w[h].vertices;var G=w[h].adjacent;for(C=0;C<=y;++C){var I=L[C];if(I<0)G[C]=A;else for(var H=0;H<=y;++H)w[H].vertices.indexOf(I)<0&&(G[C]=w[H])}}var N=new p(y,v,E),F=!!g;for(h=y+1;h<f;++h)N.insert(x[h],F);return N.boundary()};var i=e(417),r=e(8211).H;function n(x,g,f){this.vertices=x,this.adjacent=g,this.boundary=f,this.lastVisited=-1}function a(x,g,f){this.vertices=x,this.cell=g,this.index=f}function o(x,g){return r(x.vertices,g.vertices)}n.prototype.flip=function(){var x=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=x;var g=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=g};var u=[];function p(x,g,f){this.dimension=x,this.vertices=g,this.simplices=f,this.interior=f.filter(function(_){return!_.boundary}),this.tuple=new Array(x+1);for(var y=0;y<=x;++y)this.tuple[y]=this.vertices[y];var v,m=u[x];m||(m=u[x]=((v=i[x+1])||(v=i),function(_){return function(){var h=this.tuple;return _.apply(this,h)}}(v))),this.orient=m}var c=p.prototype;c.handleBoundaryDegeneracy=function(x,g){var f=this.dimension,y=this.vertices.length-1,v=this.tuple,m=this.vertices,_=[x];for(x.lastVisited=-y;_.length>0;)for(var h=(x=_.pop()).adjacent,A=0;A<=f;++A){var w=h[A];if(w.boundary&&!(w.lastVisited<=-y)){for(var E=w.vertices,L=0;L<=f;++L){var C=E[L];v[L]=C<0?g:m[C]}var P=this.orient();if(P>0)return w;w.lastVisited=-y,P===0&&_.push(w)}}return null},c.walk=function(x,g){var f=this.vertices.length-1,y=this.dimension,v=this.vertices,m=this.tuple,_=g?this.interior.length*Math.random()|0:this.interior.length-1,h=this.interior[_];e:for(;!h.boundary;){for(var A=h.vertices,w=h.adjacent,E=0;E<=y;++E)m[E]=v[A[E]];for(h.lastVisited=f,E=0;E<=y;++E){var L=w[E];if(!(L.lastVisited>=f)){var C=m[E];m[E]=x;var P=this.orient();if(m[E]=C,P<0){h=L;continue e}L.boundary?L.lastVisited=-f:L.lastVisited=f}}return}return h},c.addPeaks=function(x,g){var f=this.vertices.length-1,y=this.dimension,v=this.vertices,m=this.tuple,_=this.interior,h=this.simplices,A=[g];g.lastVisited=f,g.vertices[g.vertices.indexOf(-1)]=f,g.boundary=!1,_.push(g);for(var w=[];A.length>0;){var E=(g=A.pop()).vertices,L=g.adjacent,C=E.indexOf(f);if(!(C<0)){for(var P=0;P<=y;++P)if(P!==C){var D=L[P];if(D.boundary&&!(D.lastVisited>=f)){var G=D.vertices;if(D.lastVisited!==-f){for(var I=0,H=0;H<=y;++H)G[H]<0?(I=H,m[H]=x):m[H]=v[G[H]];if(this.orient()>0){G[I]=f,D.boundary=!1,_.push(D),A.push(D),D.lastVisited=f;continue}D.lastVisited=-f}var N=D.adjacent,F=E.slice(),V=L.slice(),q=new n(F,V,!0);h.push(q);var te=N.indexOf(g);if(!(te<0))for(N[te]=q,V[C]=D,F[P]=-1,V[P]=g,L[P]=q,q.flip(),H=0;H<=y;++H){var $=F[H];if(!($<0||$===f)){for(var W=new Array(y-1),Z=0,J=0;J<=y;++J){var ee=F[J];ee<0||J===H||(W[Z++]=ee)}w.push(new a(W,q,H))}}}}}}for(w.sort(o),P=0;P+1<w.length;P+=2){var re=w[P],ae=w[P+1],oe=re.index,ce=ae.index;oe<0||ce<0||(re.cell.adjacent[re.index]=ae.cell,ae.cell.adjacent[ae.index]=re.cell)}},c.insert=function(x,g){var f=this.vertices;f.push(x);var y=this.walk(x,g);if(y){for(var v=this.dimension,m=this.tuple,_=0;_<=v;++_){var h=y.vertices[_];m[_]=h<0?x:f[h]}var A=this.orient(m);A<0||(A!==0||(y=this.handleBoundaryDegeneracy(y,x)))&&this.addPeaks(x,y)}},c.boundary=function(){for(var x=this.dimension,g=[],f=this.simplices,y=f.length,v=0;v<y;++v){var m=f[v];if(m.boundary){for(var _=new Array(x),h=m.vertices,A=0,w=0,E=0;E<=x;++E)h[E]>=0?_[A++]=h[E]:w=1&E;if(w===(1&x)){var L=_[0];_[0]=_[1],_[1]=L}g.push(_)}}return g}},9014:function(d,s,e){var i=e(5070);function r(A,w,E,L,C){this.mid=A,this.left=w,this.right=E,this.leftPoints=L,this.rightPoints=C,this.count=(w?w.count:0)+(E?E.count:0)+L.length}d.exports=function(A){return A&&A.length!==0?new _(m(A)):new _(null)};var n=r.prototype;function a(A,w){A.mid=w.mid,A.left=w.left,A.right=w.right,A.leftPoints=w.leftPoints,A.rightPoints=w.rightPoints,A.count=w.count}function o(A,w){var E=m(w);A.mid=E.mid,A.left=E.left,A.right=E.right,A.leftPoints=E.leftPoints,A.rightPoints=E.rightPoints,A.count=E.count}function u(A,w){var E=A.intervals([]);E.push(w),o(A,E)}function p(A,w){var E=A.intervals([]),L=E.indexOf(w);return L<0?0:(E.splice(L,1),o(A,E),1)}function c(A,w,E){for(var L=0;L<A.length&&A[L][0]<=w;++L){var C=E(A[L]);if(C)return C}}function x(A,w,E){for(var L=A.length-1;L>=0&&A[L][1]>=w;--L){var C=E(A[L]);if(C)return C}}function g(A,w){for(var E=0;E<A.length;++E){var L=w(A[E]);if(L)return L}}function f(A,w){return A-w}function y(A,w){return A[0]-w[0]||A[1]-w[1]}function v(A,w){return A[1]-w[1]||A[0]-w[0]}function m(A){if(A.length===0)return null;for(var w=[],E=0;E<A.length;++E)w.push(A[E][0],A[E][1]);w.sort(f);var L=w[w.length>>1],C=[],P=[],D=[];for(E=0;E<A.length;++E){var G=A[E];G[1]<L?C.push(G):L<G[0]?P.push(G):D.push(G)}var I=D,H=D.slice();return I.sort(y),H.sort(v),new r(L,m(C),m(P),I,H)}function _(A){this.root=A}n.intervals=function(A){return A.push.apply(A,this.leftPoints),this.left&&this.left.intervals(A),this.right&&this.right.intervals(A),A},n.insert=function(A){var w=this.count-this.leftPoints.length;if(this.count+=1,A[1]<this.mid)this.left?4*(this.left.count+1)>3*(w+1)?u(this,A):this.left.insert(A):this.left=m([A]);else if(A[0]>this.mid)this.right?4*(this.right.count+1)>3*(w+1)?u(this,A):this.right.insert(A):this.right=m([A]);else{var E=i.ge(this.leftPoints,A,y),L=i.ge(this.rightPoints,A,v);this.leftPoints.splice(E,0,A),this.rightPoints.splice(L,0,A)}},n.remove=function(A){var w=this.count-this.leftPoints;if(A[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(w-1)?p(this,A):(P=this.left.remove(A))===2?(this.left=null,this.count-=1,1):(P===1&&(this.count-=1),P):0;if(A[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(w-1)?p(this,A):(P=this.right.remove(A))===2?(this.right=null,this.count-=1,1):(P===1&&(this.count-=1),P):0;if(this.count===1)return this.leftPoints[0]===A?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===A){if(this.left&&this.right){for(var E=this,L=this.left;L.right;)E=L,L=L.right;if(E===this)L.right=this.right;else{var C=this.left,P=this.right;E.count-=L.count,E.right=L.left,L.left=C,L.right=P}a(this,L),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?a(this,this.left):a(this,this.right);return 1}for(C=i.ge(this.leftPoints,A,y);C<this.leftPoints.length&&this.leftPoints[C][0]===A[0];++C)if(this.leftPoints[C]===A){for(this.count-=1,this.leftPoints.splice(C,1),P=i.ge(this.rightPoints,A,v);P<this.rightPoints.length&&this.rightPoints[P][1]===A[1];++P)if(this.rightPoints[P]===A)return this.rightPoints.splice(P,1),1}return 0},n.queryPoint=function(A,w){return A<this.mid?this.left&&(E=this.left.queryPoint(A,w))?E:c(this.leftPoints,A,w):A>this.mid?this.right&&(E=this.right.queryPoint(A,w))?E:x(this.rightPoints,A,w):g(this.leftPoints,w);var E},n.queryInterval=function(A,w,E){var L;return A<this.mid&&this.left&&(L=this.left.queryInterval(A,w,E))||w>this.mid&&this.right&&(L=this.right.queryInterval(A,w,E))?L:w<this.mid?c(this.leftPoints,w,E):A>this.mid?x(this.rightPoints,A,E):g(this.leftPoints,E)};var h=_.prototype;h.insert=function(A){this.root?this.root.insert(A):this.root=new r(A[0],null,null,[A],[A])},h.remove=function(A){if(this.root){var w=this.root.remove(A);return w===2&&(this.root=null),w!==0}return!1},h.queryPoint=function(A,w){if(this.root)return this.root.queryPoint(A,w)},h.queryInterval=function(A,w,E){if(A<=w&&this.root)return this.root.queryInterval(A,w,E)},Object.defineProperty(h,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(h,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},9560:function(d){d.exports=function(s){for(var e=new Array(s),i=0;i<s;++i)e[i]=i;return e}},4846:function(d){d.exports=!0},4780:function(d){function s(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}d.exports=function(e){return e!=null&&(s(e)||function(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&s(i.slice(0,0))}(e)||!!e._isBuffer)}},3596:function(d){d.exports=function(s){for(var e,i=s.length,r=0;r<i;r++)if(((e=s.charCodeAt(r))<9||e>13)&&e!==32&&e!==133&&e!==160&&e!==5760&&e!==6158&&(e<8192||e>8205)&&e!==8232&&e!==8233&&e!==8239&&e!==8287&&e!==8288&&e!==12288&&e!==65279)return!1;return!0}},3578:function(d){d.exports=function(s,e,i){return s*(1-i)+e*i}},7191:function(d,s,e){var i=e(4690),r=e(9823),n=e(7332),a=e(7787),o=e(7437),u=e(2142),p={length:e(4693),normalize:e(899),dot:e(9305),cross:e(903)},c=r(),x=r(),g=[0,0,0,0],f=[[0,0,0],[0,0,0],[0,0,0]],y=[0,0,0];function v(m,_,h,A,w){m[0]=_[0]*A+h[0]*w,m[1]=_[1]*A+h[1]*w,m[2]=_[2]*A+h[2]*w}d.exports=function(m,_,h,A,w,E){if(_||(_=[0,0,0]),h||(h=[0,0,0]),A||(A=[0,0,0]),w||(w=[0,0,0,1]),E||(E=[0,0,0,1]),!i(c,m)||(n(x,c),x[3]=0,x[7]=0,x[11]=0,x[15]=1,Math.abs(a(x)<1e-8)))return!1;var L,C,P,D,G,I,H,N=c[3],F=c[7],V=c[11],q=c[12],te=c[13],$=c[14],W=c[15];if(N!==0||F!==0||V!==0){if(g[0]=N,g[1]=F,g[2]=V,g[3]=W,!o(x,x))return!1;u(x,x),L=w,P=x,D=(C=g)[0],G=C[1],I=C[2],H=C[3],L[0]=P[0]*D+P[4]*G+P[8]*I+P[12]*H,L[1]=P[1]*D+P[5]*G+P[9]*I+P[13]*H,L[2]=P[2]*D+P[6]*G+P[10]*I+P[14]*H,L[3]=P[3]*D+P[7]*G+P[11]*I+P[15]*H}else w[0]=w[1]=w[2]=0,w[3]=1;if(_[0]=q,_[1]=te,_[2]=$,function(J,ee){J[0][0]=ee[0],J[0][1]=ee[1],J[0][2]=ee[2],J[1][0]=ee[4],J[1][1]=ee[5],J[1][2]=ee[6],J[2][0]=ee[8],J[2][1]=ee[9],J[2][2]=ee[10]}(f,c),h[0]=p.length(f[0]),p.normalize(f[0],f[0]),A[0]=p.dot(f[0],f[1]),v(f[1],f[1],f[0],1,-A[0]),h[1]=p.length(f[1]),p.normalize(f[1],f[1]),A[0]/=h[1],A[1]=p.dot(f[0],f[2]),v(f[2],f[2],f[0],1,-A[1]),A[2]=p.dot(f[1],f[2]),v(f[2],f[2],f[1],1,-A[2]),h[2]=p.length(f[2]),p.normalize(f[2],f[2]),A[1]/=h[2],A[2]/=h[2],p.cross(y,f[1],f[2]),p.dot(f[0],y)<0)for(var Z=0;Z<3;Z++)h[Z]*=-1,f[Z][0]*=-1,f[Z][1]*=-1,f[Z][2]*=-1;return E[0]=.5*Math.sqrt(Math.max(1+f[0][0]-f[1][1]-f[2][2],0)),E[1]=.5*Math.sqrt(Math.max(1-f[0][0]+f[1][1]-f[2][2],0)),E[2]=.5*Math.sqrt(Math.max(1-f[0][0]-f[1][1]+f[2][2],0)),E[3]=.5*Math.sqrt(Math.max(1+f[0][0]+f[1][1]+f[2][2],0)),f[2][1]>f[1][2]&&(E[0]=-E[0]),f[0][2]>f[2][0]&&(E[1]=-E[1]),f[1][0]>f[0][1]&&(E[2]=-E[2]),!0}},4690:function(d){d.exports=function(s,e){var i=e[15];if(i===0)return!1;for(var r=1/i,n=0;n<16;n++)s[n]=e[n]*r;return!0}},7649:function(d,s,e){var i=e(1868),r=e(1102),n=e(7191),a=e(7787),o=e(1116),u=x(),p=x(),c=x();function x(){return{translate:g(),scale:g(1),skew:g(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function g(f){return[f||0,f||0,f||0]}d.exports=function(f,y,v,m){if(a(y)===0||a(v)===0)return!1;var _=n(y,u.translate,u.scale,u.skew,u.perspective,u.quaternion),h=n(v,p.translate,p.scale,p.skew,p.perspective,p.quaternion);return!(!_||!h||(i(c.translate,u.translate,p.translate,m),i(c.skew,u.skew,p.skew,m),i(c.scale,u.scale,p.scale,m),i(c.perspective,u.perspective,p.perspective,m),o(c.quaternion,u.quaternion,p.quaternion,m),r(f,c.translate,c.scale,c.skew,c.perspective,c.quaternion),0))}},1102:function(d,s,e){var i={identity:e(9947),translate:e(998),multiply:e(104),create:e(9823),scale:e(3668),fromRotationTranslation:e(7280)},r=(i.create(),i.create());d.exports=function(n,a,o,u,p,c){return i.identity(n),i.fromRotationTranslation(n,c,a),n[3]=p[0],n[7]=p[1],n[11]=p[2],n[15]=p[3],i.identity(r),u[2]!==0&&(r[9]=u[2],i.multiply(n,n,r)),u[1]!==0&&(r[9]=0,r[8]=u[1],i.multiply(n,n,r)),u[0]!==0&&(r[8]=0,r[4]=u[0],i.multiply(n,n,r)),i.scale(n,n,o),n}},9298:function(d,s,e){var i=e(5070),r=e(7649),n=e(7437),a=e(6109),o=e(7115),u=e(5240),p=e(3012),c=e(998),x=(e(3668),e(899)),g=[0,0,0];function f(m){this._components=m.slice(),this._time=[0],this.prevMatrix=m.slice(),this.nextMatrix=m.slice(),this.computedMatrix=m.slice(),this.computedInverse=m.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}d.exports=function(m){return new f((m=m||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var y=f.prototype;y.recalcMatrix=function(m){var _=this._time,h=i.le(_,m),A=this.computedMatrix;if(!(h<0)){var w=this._components;if(h===_.length-1)for(var E=16*h,L=0;L<16;++L)A[L]=w[E++];else{var C=_[h+1]-_[h],P=(E=16*h,this.prevMatrix),D=!0;for(L=0;L<16;++L)P[L]=w[E++];var G=this.nextMatrix;for(L=0;L<16;++L)G[L]=w[E++],D=D&&P[L]===G[L];if(C<1e-6||D)for(L=0;L<16;++L)A[L]=P[L];else r(A,P,G,(m-_[h])/C)}var I=this.computedUp;I[0]=A[1],I[1]=A[5],I[2]=A[9],x(I,I);var H=this.computedInverse;n(H,A);var N=this.computedEye,F=H[15];N[0]=H[12]/F,N[1]=H[13]/F,N[2]=H[14]/F;var V=this.computedCenter,q=Math.exp(this.computedRadius[0]);for(L=0;L<3;++L)V[L]=N[L]-A[2+4*L]*q}},y.idle=function(m){if(!(m<this.lastT())){for(var _=this._components,h=_.length-16,A=0;A<16;++A)_.push(_[h++]);this._time.push(m)}},y.flush=function(m){var _=i.gt(this._time,m)-2;_<0||(this._time.splice(0,_),this._components.splice(0,16*_))},y.lastT=function(){return this._time[this._time.length-1]},y.lookAt=function(m,_,h,A){this.recalcMatrix(m),_=_||this.computedEye,h=h||g,A=A||this.computedUp,this.setMatrix(m,p(this.computedMatrix,_,h,A));for(var w=0,E=0;E<3;++E)w+=Math.pow(h[E]-_[E],2);w=Math.log(Math.sqrt(w)),this.computedRadius[0]=w},y.rotate=function(m,_,h,A){this.recalcMatrix(m);var w=this.computedInverse;_&&o(w,w,_),h&&a(w,w,h),A&&u(w,w,A),this.setMatrix(m,n(this.computedMatrix,w))};var v=[0,0,0];y.pan=function(m,_,h,A){v[0]=-(_||0),v[1]=-(h||0),v[2]=-(A||0),this.recalcMatrix(m);var w=this.computedInverse;c(w,w,v),this.setMatrix(m,n(w,w))},y.translate=function(m,_,h,A){v[0]=_||0,v[1]=h||0,v[2]=A||0,this.recalcMatrix(m);var w=this.computedMatrix;c(w,w,v),this.setMatrix(m,w)},y.setMatrix=function(m,_){if(!(m<this.lastT())){this._time.push(m);for(var h=0;h<16;++h)this._components.push(_[h])}},y.setDistance=function(m,_){this.computedRadius[0]=_},y.setDistanceLimits=function(m,_){var h=this._limits;h[0]=m,h[1]=_},y.getDistanceLimits=function(m){var _=this._limits;return m?(m[0]=_[0],m[1]=_[1],m):_}},3266:function(d,s,e){d.exports=function(r){var n=r.length;if(n<3){for(var a=new Array(n),o=0;o<n;++o)a[o]=o;return n===2&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:a}var u=new Array(n);for(o=0;o<n;++o)u[o]=o;u.sort(function(_,h){return r[_][0]-r[h][0]||r[_][1]-r[h][1]});var p=[u[0],u[1]],c=[u[0],u[1]];for(o=2;o<n;++o){for(var x=u[o],g=r[x],f=p.length;f>1&&i(r[p[f-2]],r[p[f-1]],g)<=0;)f-=1,p.pop();for(p.push(x),f=c.length;f>1&&i(r[c[f-2]],r[c[f-1]],g)>=0;)f-=1,c.pop();c.push(x)}a=new Array(c.length+p.length-2);for(var y=0,v=(o=0,p.length);o<v;++o)a[y++]=p[o];for(var m=c.length-2;m>0;--m)a[y++]=c[m];return a};var i=e(417)[3]},6145:function(d,s,e){d.exports=function(r,n){n||(n=r,r=window);var a=0,o=0,u=0,p={shift:!1,alt:!1,control:!1,meta:!1},c=!1;function x(E){var L=!1;return"altKey"in E&&(L=L||E.altKey!==p.alt,p.alt=!!E.altKey),"shiftKey"in E&&(L=L||E.shiftKey!==p.shift,p.shift=!!E.shiftKey),"ctrlKey"in E&&(L=L||E.ctrlKey!==p.control,p.control=!!E.ctrlKey),"metaKey"in E&&(L=L||E.metaKey!==p.meta,p.meta=!!E.metaKey),L}function g(E,L){var C=i.x(L),P=i.y(L);"buttons"in L&&(E=0|L.buttons),(E!==a||C!==o||P!==u||x(L))&&(a=0|E,o=C||0,u=P||0,n&&n(a,o,u,p))}function f(E){g(0,E)}function y(){(a||o||u||p.shift||p.alt||p.meta||p.control)&&(o=u=0,a=0,p.shift=p.alt=p.control=p.meta=!1,n&&n(0,0,0,p))}function v(E){x(E)&&n&&n(a,o,u,p)}function m(E){i.buttons(E)===0?g(0,E):g(a,E)}function _(E){g(a|i.buttons(E),E)}function h(E){g(a&~i.buttons(E),E)}function A(){c||(c=!0,r.addEventListener("mousemove",m),r.addEventListener("mousedown",_),r.addEventListener("mouseup",h),r.addEventListener("mouseleave",f),r.addEventListener("mouseenter",f),r.addEventListener("mouseout",f),r.addEventListener("mouseover",f),r.addEventListener("blur",y),r.addEventListener("keyup",v),r.addEventListener("keydown",v),r.addEventListener("keypress",v),r!==window&&(window.addEventListener("blur",y),window.addEventListener("keyup",v),window.addEventListener("keydown",v),window.addEventListener("keypress",v)))}A();var w={element:r};return Object.defineProperties(w,{enabled:{get:function(){return c},set:function(E){E?A():c&&(c=!1,r.removeEventListener("mousemove",m),r.removeEventListener("mousedown",_),r.removeEventListener("mouseup",h),r.removeEventListener("mouseleave",f),r.removeEventListener("mouseenter",f),r.removeEventListener("mouseout",f),r.removeEventListener("mouseover",f),r.removeEventListener("blur",y),r.removeEventListener("keyup",v),r.removeEventListener("keydown",v),r.removeEventListener("keypress",v),r!==window&&(window.removeEventListener("blur",y),window.removeEventListener("keyup",v),window.removeEventListener("keydown",v),window.removeEventListener("keypress",v)))},enumerable:!0},buttons:{get:function(){return a},enumerable:!0},x:{get:function(){return o},enumerable:!0},y:{get:function(){return u},enumerable:!0},mods:{get:function(){return p},enumerable:!0}}),w};var i=e(4110)},2565:function(d){var s={left:0,top:0};d.exports=function(e,i,r){i=i||e.currentTarget||e.srcElement,Array.isArray(r)||(r=[0,0]);var n,a=e.clientX||0,o=e.clientY||0,u=(n=i)===window||n===document||n===document.body?s:n.getBoundingClientRect();return r[0]=a-u.left,r[1]=o-u.top,r}},4110:function(d,s){function e(i){return i.target||i.srcElement||window}s.buttons=function(i){if(typeof i=="object"){if("buttons"in i)return i.buttons;if("which"in i){if((r=i.which)===2)return 4;if(r===3)return 2;if(r>0)return 1<<r-1}else if("button"in i){var r;if((r=i.button)===1)return 4;if(r===2)return 2;if(r>=0)return 1<<r}}return 0},s.element=e,s.x=function(i){if(typeof i=="object"){if("offsetX"in i)return i.offsetX;var r=e(i).getBoundingClientRect();return i.clientX-r.left}return 0},s.y=function(i){if(typeof i=="object"){if("offsetY"in i)return i.offsetY;var r=e(i).getBoundingClientRect();return i.clientY-r.top}return 0}},6475:function(d,s,e){var i=e(14);d.exports=function(r,n,a){typeof r=="function"&&(a=!!n,n=r,r=window);var o=i("ex",r),u=function(p){a&&p.preventDefault();var c=p.deltaX||0,x=p.deltaY||0,g=p.deltaZ||0,f=1;switch(p.deltaMode){case 1:f=o;break;case 2:f=window.innerHeight}if(x*=f,g*=f,(c*=f)||x||g)return n(c,x,g,p)};return r.addEventListener("wheel",u),u}},9284:function(d,s,e){var i=e(5306);d.exports=function(n){function a(g){throw new Error("ndarray-extract-contour: "+g)}typeof n!="object"&&a("Must specify arguments");var o=n.order;Array.isArray(o)||a("Must specify order");var u=n.arrayArguments||1;u<1&&a("Must have at least one array argument"),(n.scalarArguments||0)<0&&a("Scalar arg count must be > 0"),typeof n.vertex!="function"&&a("Must specify vertex creation function"),typeof n.cell!="function"&&a("Must specify cell creation function"),typeof n.phase!="function"&&a("Must specify phase function");for(var p=n.getters||[],c=new Array(u),x=0;x<u;++x)p.indexOf(x)>=0?c[x]=!0:c[x]=!1;return function(g,f,y,v,m,_){var h=[_,m].join(",");return(0,r[h])(g,f,y,i.mallocUint32,i.freeUint32)}(n.vertex,n.cell,n.phase,0,o,c)};var r={"false,0,1":function(n,a,o,u,p){return function(c,x,g,f){var y,v=0|c.shape[0],m=0|c.shape[1],_=c.data,h=0|c.offset,A=0|c.stride[0],w=0|c.stride[1],E=h,L=0|-A,C=0,P=0|-w,D=0,G=-A-w|0,I=0,H=0|A,N=w-A*v|0,F=0,V=0,q=0,te=2*v|0,$=u(te),W=u(te),Z=0,J=0,ee=-1,re=-1,ae=0,oe=0|-v,ce=0|v,pe=0,ve=-v-1|0,we=v-1|0,xe=0,ge=0,Oe=0;for(F=0;F<v;++F)$[Z++]=o(_[E],x,g,f),E+=H;if(E+=N,m>0){if(V=1,$[Z++]=o(_[E],x,g,f),E+=H,v>0)for(F=1,y=_[E],J=$[Z]=o(y,x,g,f),ae=$[Z+ee],pe=$[Z+oe],xe=$[Z+ve],J===ae&&J===pe&&J===xe||(C=_[E+L],D=_[E+P],I=_[E+G],n(F,V,y,C,D,I,J,ae,pe,xe,x,g,f),ge=W[Z]=q++),Z+=1,E+=H,F=2;F<v;++F)y=_[E],J=$[Z]=o(y,x,g,f),ae=$[Z+ee],pe=$[Z+oe],xe=$[Z+ve],J===ae&&J===pe&&J===xe||(C=_[E+L],D=_[E+P],I=_[E+G],n(F,V,y,C,D,I,J,ae,pe,xe,x,g,f),ge=W[Z]=q++,xe!==ae&&a(W[Z+ee],ge,I,C,xe,ae,x,g,f)),Z+=1,E+=H;for(E+=N,Z=0,Oe=ee,ee=re,re=Oe,Oe=oe,oe=ce,ce=Oe,Oe=ve,ve=we,we=Oe,V=2;V<m;++V){if($[Z++]=o(_[E],x,g,f),E+=H,v>0)for(F=1,y=_[E],J=$[Z]=o(y,x,g,f),ae=$[Z+ee],pe=$[Z+oe],xe=$[Z+ve],J===ae&&J===pe&&J===xe||(C=_[E+L],D=_[E+P],I=_[E+G],n(F,V,y,C,D,I,J,ae,pe,xe,x,g,f),ge=W[Z]=q++,xe!==pe&&a(W[Z+oe],ge,D,I,pe,xe,x,g,f)),Z+=1,E+=H,F=2;F<v;++F)y=_[E],J=$[Z]=o(y,x,g,f),ae=$[Z+ee],pe=$[Z+oe],xe=$[Z+ve],J===ae&&J===pe&&J===xe||(C=_[E+L],D=_[E+P],I=_[E+G],n(F,V,y,C,D,I,J,ae,pe,xe,x,g,f),ge=W[Z]=q++,xe!==pe&&a(W[Z+oe],ge,D,I,pe,xe,x,g,f),xe!==ae&&a(W[Z+ee],ge,I,C,xe,ae,x,g,f)),Z+=1,E+=H;1&V&&(Z=0),Oe=ee,ee=re,re=Oe,Oe=oe,oe=ce,ce=Oe,Oe=ve,ve=we,we=Oe,E+=N}}p(W),p($)}},"false,1,0":function(n,a,o,u,p){return function(c,x,g,f){var y,v=0|c.shape[0],m=0|c.shape[1],_=c.data,h=0|c.offset,A=0|c.stride[0],w=0|c.stride[1],E=h,L=0|-A,C=0,P=0|-w,D=0,G=-A-w|0,I=0,H=0|w,N=A-w*m|0,F=0,V=0,q=0,te=2*m|0,$=u(te),W=u(te),Z=0,J=0,ee=-1,re=-1,ae=0,oe=0|-m,ce=0|m,pe=0,ve=-m-1|0,we=m-1|0,xe=0,ge=0,Oe=0;for(V=0;V<m;++V)$[Z++]=o(_[E],x,g,f),E+=H;if(E+=N,v>0){if(F=1,$[Z++]=o(_[E],x,g,f),E+=H,m>0)for(V=1,y=_[E],J=$[Z]=o(y,x,g,f),pe=$[Z+oe],ae=$[Z+ee],xe=$[Z+ve],J===pe&&J===ae&&J===xe||(C=_[E+L],D=_[E+P],I=_[E+G],n(F,V,y,C,D,I,J,pe,ae,xe,x,g,f),ge=W[Z]=q++),Z+=1,E+=H,V=2;V<m;++V)y=_[E],J=$[Z]=o(y,x,g,f),pe=$[Z+oe],ae=$[Z+ee],xe=$[Z+ve],J===pe&&J===ae&&J===xe||(C=_[E+L],D=_[E+P],I=_[E+G],n(F,V,y,C,D,I,J,pe,ae,xe,x,g,f),ge=W[Z]=q++,xe!==ae&&a(W[Z+ee],ge,D,I,ae,xe,x,g,f)),Z+=1,E+=H;for(E+=N,Z=0,Oe=oe,oe=ce,ce=Oe,Oe=ee,ee=re,re=Oe,Oe=ve,ve=we,we=Oe,F=2;F<v;++F){if($[Z++]=o(_[E],x,g,f),E+=H,m>0)for(V=1,y=_[E],J=$[Z]=o(y,x,g,f),pe=$[Z+oe],ae=$[Z+ee],xe=$[Z+ve],J===pe&&J===ae&&J===xe||(C=_[E+L],D=_[E+P],I=_[E+G],n(F,V,y,C,D,I,J,pe,ae,xe,x,g,f),ge=W[Z]=q++,xe!==pe&&a(W[Z+oe],ge,I,C,xe,pe,x,g,f)),Z+=1,E+=H,V=2;V<m;++V)y=_[E],J=$[Z]=o(y,x,g,f),pe=$[Z+oe],ae=$[Z+ee],xe=$[Z+ve],J===pe&&J===ae&&J===xe||(C=_[E+L],D=_[E+P],I=_[E+G],n(F,V,y,C,D,I,J,pe,ae,xe,x,g,f),ge=W[Z]=q++,xe!==ae&&a(W[Z+ee],ge,D,I,ae,xe,x,g,f),xe!==pe&&a(W[Z+oe],ge,I,C,xe,pe,x,g,f)),Z+=1,E+=H;1&F&&(Z=0),Oe=oe,oe=ce,ce=Oe,Oe=ee,ee=re,re=Oe,Oe=ve,ve=we,we=Oe,E+=N}}p(W),p($)}}}},9144:function(d,s,e){var i=e(3094),r={zero:function(v,m,_,h){var A=v[0];h|=0;var w=0,E=_[0];for(w=0;w<A;++w)m[h]=0,h+=E},fdTemplate1:function(v,m,_,h,A,w,E){var L=v[0],C=_[0],P=-1*C,D=C;h|=0,E|=0;var G=0,I=C,H=w[0];for(G=0;G<L;++G)A[E]=.5*(m[h+P]-m[h+D]),h+=I,E+=H},fdTemplate2:function(v,m,_,h,A,w,E,L,C,P){var D=v[0],G=v[1],I=_[0],H=_[1],N=w[0],F=w[1],V=C[0],q=C[1],te=-1*I,$=I,W=-1*H,Z=H;h|=0,E|=0,P|=0;var J=0,ee=0,re=H,ae=I-G*H,oe=F,ce=N-G*F,pe=q,ve=V-G*q;for(ee=0;ee<D;++ee){for(J=0;J<G;++J)A[E]=.5*(m[h+te]-m[h+$]),L[P]=.5*(m[h+W]-m[h+Z]),h+=re,E+=oe,P+=pe;h+=ae,E+=ce,P+=ve}}},n={cdiff:function(v){var m={};return function(_,h,A){var w=_.dtype,E=_.order,L=h.dtype,C=h.order,P=A.dtype,D=A.order,G=[w,E.join(),L,C.join(),P,D.join()].join(),I=m[G];return I||(m[G]=I=v([w,E,L,C,P,D])),I(_.shape.slice(0),_.data,_.stride,0|_.offset,h.data,h.stride,0|h.offset,A.data,A.stride,0|A.offset)}},zero:function(v){var m={};return function(_){var h=_.dtype,A=_.order,w=[h,A.join()].join(),E=m[w];return E||(m[w]=E=v([h,A])),E(_.shape.slice(0),_.data,_.stride,0|_.offset)}},fdTemplate1:function(v){var m={};return function(_,h){var A=_.dtype,w=_.order,E=h.dtype,L=h.order,C=[A,w.join(),E,L.join()].join(),P=m[C];return P||(m[C]=P=v([A,w,E,L])),P(_.shape.slice(0),_.data,_.stride,0|_.offset,h.data,h.stride,0|h.offset)}},fdTemplate2:function(v){var m={};return function(_,h,A){var w=_.dtype,E=_.order,L=h.dtype,C=h.order,P=A.dtype,D=A.order,G=[w,E.join(),L,C.join(),P,D.join()].join(),I=m[G];return I||(m[G]=I=v([w,E,L,C,P,D])),I(_.shape.slice(0),_.data,_.stride,0|_.offset,h.data,h.stride,0|h.offset,A.data,A.stride,0|A.offset)}}};function a(v){return(0,n[v.funcName])(o.bind(void 0,v))}function o(v){return r[v.funcName]}function u(v){return a({funcName:v.funcName})}var p={},c={},x=u({funcName:"cdiff"}),g=u({funcName:"zero"});function f(v){return v in p?p[v]:p[v]=u({funcName:"fdTemplate"+v})}function y(v,m,_,h){return function(A,w){var E=w.shape.slice();return E[0]>2&&E[1]>2&&h(w.pick(-1,-1).lo(1,1).hi(E[0]-2,E[1]-2),A.pick(-1,-1,0).lo(1,1).hi(E[0]-2,E[1]-2),A.pick(-1,-1,1).lo(1,1).hi(E[0]-2,E[1]-2)),E[1]>2&&(_(w.pick(0,-1).lo(1).hi(E[1]-2),A.pick(0,-1,1).lo(1).hi(E[1]-2)),m(A.pick(0,-1,0).lo(1).hi(E[1]-2))),E[1]>2&&(_(w.pick(E[0]-1,-1).lo(1).hi(E[1]-2),A.pick(E[0]-1,-1,1).lo(1).hi(E[1]-2)),m(A.pick(E[0]-1,-1,0).lo(1).hi(E[1]-2))),E[0]>2&&(_(w.pick(-1,0).lo(1).hi(E[0]-2),A.pick(-1,0,0).lo(1).hi(E[0]-2)),m(A.pick(-1,0,1).lo(1).hi(E[0]-2))),E[0]>2&&(_(w.pick(-1,E[1]-1).lo(1).hi(E[0]-2),A.pick(-1,E[1]-1,0).lo(1).hi(E[0]-2)),m(A.pick(-1,E[1]-1,1).lo(1).hi(E[0]-2))),A.set(0,0,0,0),A.set(0,0,1,0),A.set(E[0]-1,0,0,0),A.set(E[0]-1,0,1,0),A.set(0,E[1]-1,0,0),A.set(0,E[1]-1,1,0),A.set(E[0]-1,E[1]-1,0,0),A.set(E[0]-1,E[1]-1,1,0),A}}d.exports=function(v,m,_){return Array.isArray(_)||(_=i(m.dimension,typeof _=="string"?_:"clamp")),m.size===0?v:m.dimension===0?(v.set(0),v):function(h){var A=h.join();if(C=c[A])return C;for(var w=h.length,E=[x,g],L=1;L<=w;++L)E.push(f(L));var C=y.apply(void 0,E);return c[A]=C,C}(_)(v,m)}},3581:function(d){function s(n,a){var o=Math.floor(a),u=a-o,p=0<=o&&o<n.shape[0],c=0<=o+1&&o+1<n.shape[0];return(1-u)*(p?+n.get(o):0)+u*(c?+n.get(o+1):0)}function e(n,a,o){var u=Math.floor(a),p=a-u,c=0<=u&&u<n.shape[0],x=0<=u+1&&u+1<n.shape[0],g=Math.floor(o),f=o-g,y=0<=g&&g<n.shape[1],v=0<=g+1&&g+1<n.shape[1],m=c&&y?n.get(u,g):0,_=c&&v?n.get(u,g+1):0;return(1-f)*((1-p)*m+p*(x&&y?n.get(u+1,g):0))+f*((1-p)*_+p*(x&&v?n.get(u+1,g+1):0))}function i(n,a,o,u){var p=Math.floor(a),c=a-p,x=0<=p&&p<n.shape[0],g=0<=p+1&&p+1<n.shape[0],f=Math.floor(o),y=o-f,v=0<=f&&f<n.shape[1],m=0<=f+1&&f+1<n.shape[1],_=Math.floor(u),h=u-_,A=0<=_&&_<n.shape[2],w=0<=_+1&&_+1<n.shape[2],E=x&&v&&A?n.get(p,f,_):0,L=x&&m&&A?n.get(p,f+1,_):0,C=g&&v&&A?n.get(p+1,f,_):0,P=g&&m&&A?n.get(p+1,f+1,_):0,D=x&&v&&w?n.get(p,f,_+1):0,G=x&&m&&w?n.get(p,f+1,_+1):0;return(1-h)*((1-y)*((1-c)*E+c*C)+y*((1-c)*L+c*P))+h*((1-y)*((1-c)*D+c*(g&&v&&w?n.get(p+1,f,_+1):0))+y*((1-c)*G+c*(g&&m&&w?n.get(p+1,f+1,_+1):0)))}function r(n){var a,o,u=0|n.shape.length,p=new Array(u),c=new Array(u),x=new Array(u),g=new Array(u);for(a=0;a<u;++a)o=+arguments[a+1],p[a]=Math.floor(o),c[a]=o-p[a],x[a]=0<=p[a]&&p[a]<n.shape[a],g[a]=0<=p[a]+1&&p[a]+1<n.shape[a];var f,y,v,m=0;e:for(a=0;a<1<<u;++a){for(y=1,v=n.offset,f=0;f<u;++f)if(a&1<<f){if(!g[f])continue e;y*=c[f],v+=n.stride[f]*(p[f]+1)}else{if(!x[f])continue e;y*=1-c[f],v+=n.stride[f]*p[f]}m+=y*n.data[v]}return m}d.exports=function(n,a,o,u){switch(n.shape.length){case 0:return 0;case 1:return s(n,a);case 2:return e(n,a,o);case 3:return i(n,a,o,u);default:return r.apply(void 0,arguments)}},d.exports.d1=s,d.exports.d2=e,d.exports.d3=i},7498:function(d,s){var e={"float64,2,1,0":function(){return function(o,u,p,c,x){var g=o[0],f=o[1],y=o[2],v=p[0],m=p[1],_=p[2];c|=0;var h=0,A=0,w=0,E=_,L=m-y*_,C=v-f*m;for(w=0;w<g;++w){for(A=0;A<f;++A){for(h=0;h<y;++h)u[c]/=x,c+=E;c+=L}c+=C}}},"uint8,2,0,1,float64,2,1,0":function(){return function(o,u,p,c,x,g,f,y){for(var v=o[0],m=o[1],_=o[2],h=p[0],A=p[1],w=p[2],E=g[0],L=g[1],C=g[2],P=c|=0,D=f|=0,G=0|o[0];G>0;){G<64?(v=G,G=0):(v=64,G-=64);for(var I=0|o[1];I>0;){I<64?(m=I,I=0):(m=64,I-=64),c=P+G*h+I*A,f=D+G*E+I*L;var H=0,N=0,F=0,V=w,q=h-_*w,te=A-v*h,$=C,W=E-_*C,Z=L-v*E;for(F=0;F<m;++F){for(N=0;N<v;++N){for(H=0;H<_;++H)u[c]=x[f]*y,c+=V,f+=$;c+=q,f+=W}c+=te,f+=Z}}}}},"float32,1,0,float32,1,0":function(){return function(o,u,p,c,x,g,f){var y=o[0],v=o[1],m=p[0],_=p[1],h=g[0],A=g[1];c|=0,f|=0;var w=0,E=0,L=_,C=m-v*_,P=A,D=h-v*A;for(E=0;E<y;++E){for(w=0;w<v;++w)u[c]=x[f],c+=L,f+=P;c+=C,f+=D}}},"float32,1,0,float32,0,1":function(){return function(o,u,p,c,x,g,f){for(var y=o[0],v=o[1],m=p[0],_=p[1],h=g[0],A=g[1],w=c|=0,E=f|=0,L=0|o[1];L>0;){L<64?(v=L,L=0):(v=64,L-=64);for(var C=0|o[0];C>0;){C<64?(y=C,C=0):(y=64,C-=64),c=w+L*_+C*m,f=E+L*A+C*h;var P=0,D=0,G=_,I=m-v*_,H=A,N=h-v*A;for(D=0;D<y;++D){for(P=0;P<v;++P)u[c]=x[f],c+=G,f+=H;c+=I,f+=N}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(o,u,p,c,x,g,f){for(var y=o[0],v=o[1],m=o[2],_=p[0],h=p[1],A=p[2],w=g[0],E=g[1],L=g[2],C=c|=0,P=f|=0,D=0|o[2];D>0;){D<64?(m=D,D=0):(m=64,D-=64);for(var G=0|o[0];G>0;){G<64?(y=G,G=0):(y=64,G-=64);for(var I=0|o[1];I>0;){I<64?(v=I,I=0):(v=64,I-=64),c=C+D*A+G*_+I*h,f=P+D*L+G*w+I*E;var H=0,N=0,F=0,V=A,q=_-m*A,te=h-y*_,$=L,W=w-m*L,Z=E-y*w;for(F=0;F<v;++F){for(N=0;N<y;++N){for(H=0;H<m;++H)u[c]=x[f],c+=V,f+=$;c+=q,f+=W}c+=te,f+=Z}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(o,u,p,c,x,g,f){var y=o[0],v=o[1],m=o[2],_=p[0],h=p[1],A=p[2],w=g[0],E=g[1],L=g[2];c|=0,f|=0;var C=0,P=0,D=0,G=A,I=_-m*A,H=h-y*_,N=L,F=w-m*L,V=E-y*w;for(D=0;D<v;++D){for(P=0;P<y;++P){for(C=0;C<m;++C)u[c]=x[f],c+=G,f+=N;c+=I,f+=F}c+=H,f+=V}}}},i=function(o,u){var p=u.join(",");return(0,e[p])()},r={mul:function(o){var u={};return function(p,c,x){var g=p.dtype,f=p.order,y=c.dtype,v=c.order,m=x.dtype,_=x.order,h=[g,f.join(),y,v.join(),m,_.join()].join(),A=u[h];return A||(u[h]=A=o([g,f,y,v,m,_])),A(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset,x.data,x.stride,0|x.offset)}},muls:function(o){var u={};return function(p,c,x){var g=p.dtype,f=p.order,y=c.dtype,v=c.order,m=[g,f.join(),y,v.join()].join(),_=u[m];return _||(u[m]=_=o([g,f,y,v])),_(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset,x)}},mulseq:function(o){var u={};return function(p,c){var x=p.dtype,g=p.order,f=[x,g.join()].join(),y=u[f];return y||(u[f]=y=o([x,g])),y(p.shape.slice(0),p.data,p.stride,0|p.offset,c)}},div:function(o){var u={};return function(p,c,x){var g=p.dtype,f=p.order,y=c.dtype,v=c.order,m=x.dtype,_=x.order,h=[g,f.join(),y,v.join(),m,_.join()].join(),A=u[h];return A||(u[h]=A=o([g,f,y,v,m,_])),A(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset,x.data,x.stride,0|x.offset)}},divs:function(o){var u={};return function(p,c,x){var g=p.dtype,f=p.order,y=c.dtype,v=c.order,m=[g,f.join(),y,v.join()].join(),_=u[m];return _||(u[m]=_=o([g,f,y,v])),_(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset,x)}},divseq:function(o){var u={};return function(p,c){var x=p.dtype,g=p.order,f=[x,g.join()].join(),y=u[f];return y||(u[f]=y=o([x,g])),y(p.shape.slice(0),p.data,p.stride,0|p.offset,c)}},assign:function(o){var u={};return function(p,c){var x=p.dtype,g=p.order,f=c.dtype,y=c.order,v=[x,g.join(),f,y.join()].join(),m=u[v];return m||(u[v]=m=o([x,g,f,y])),m(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset)}}};function n(o){return u={funcName:o.funcName},(0,r[u.funcName])(i.bind(void 0,u));var u}var a={mul:"*",div:"/"};(function(){for(var o in a)s[o]=n({funcName:o}),s[o+"s"]=n({funcName:o+"s"}),s[o+"seq"]=n({funcName:o+"seq"})})(),s.assign=n({funcName:"assign"})},7382:function(d,s,e){var i=e(5050),r=e(9262);d.exports=function(n,a){for(var o=[],u=n,p=1;Array.isArray(u);)o.push(u.length),p*=u.length,u=u[0];return o.length===0?i():(a||(a=i(new Float64Array(p),o)),r(a,n),a)}},9262:function(d){d.exports=function(s){var e={};return function(i,r){var n=i.dtype,a=i.order,o=[n,a.join()].join(),u=e[o];return u||(e[o]=u=s([n,a])),u(i.shape.slice(0),i.data,i.stride,0|i.offset,r)}}(function(){return function(s,e,i,r,n){var a=s[0],o=s[1],u=s[2],p=i[0],c=i[1],x=i[2],g=[0,0,0];r|=0;var f=0,y=0,v=0,m=x,_=c-u*x,h=p-o*c;for(v=0;v<a;++v){for(y=0;y<o;++y){for(f=0;f<u;++f){var A,w=n;for(A=0;A<g.length-1;++A)w=w[g[A]];e[r]=w[g[g.length-1]],r+=m,++g[2]}r+=_,g[2]-=u,++g[1]}r+=h,g[1]-=o,++g[0]}}}.bind(void 0,{funcName:"convert"}))},8139:function(d,s,e){var i=e(5306);function r(u){return u==="uint32"?[i.mallocUint32,i.freeUint32]:null}var n={"uint32,1,0":function(u,p){return function(c,x,g,f,y,v,m,_,h,A,w){var E,L,C,P,D,G,I,H,N=c*y+f,F=u(_);for(E=c+1;E<=x;++E){for(L=E,C=N+=y,D=0,G=N,P=0;P<_;++P)F[D++]=g[G],G+=h;e:for(;L-- >c;){D=0,G=C-y;t:for(P=0;P<_;++P){if((I=g[G])<(H=F[D]))break e;if(I>H)break t;G+=A,D+=w}for(D=C,G=C-y,P=0;P<_;++P)g[D]=g[G],D+=h,G+=h;C-=y}for(D=C,G=0,P=0;P<_;++P)g[D]=F[G++],D+=h}p(F)}}},a={"uint32,1,0":function(u,p,c){return function x(g,f,y,v,m,_,h,A,w,E,L){var C,P,D,G,I,H,N,F,V,q,te,$,W,Z,J,ee,re,ae,oe,ce,pe,ve,we,xe,ge,Oe=(f-g+1)/6|0,Ae=g+Oe,Te=f-Oe,se=g+f>>1,le=se-Oe,ne=se+Oe,me=Ae,Ee=le,be=se,De=ne,Ue=Te,he=g+1,ke=f-1,_e=!0,Ce=0,Fe=0,Re=0,He=A,Ge=p(He),$e=p(He);te=m*me,$=m*Ee,ge=v;e:for(q=0;q<A;++q){if(F=$+ge,(Re=y[N=te+ge]-y[F])>0){P=me,me=Ee,Ee=P;break e}if(Re<0)break e;ge+=E}te=m*De,$=m*Ue,ge=v;e:for(q=0;q<A;++q){if(F=$+ge,(Re=y[N=te+ge]-y[F])>0){P=De,De=Ue,Ue=P;break e}if(Re<0)break e;ge+=E}te=m*me,$=m*be,ge=v;e:for(q=0;q<A;++q){if(F=$+ge,(Re=y[N=te+ge]-y[F])>0){P=me,me=be,be=P;break e}if(Re<0)break e;ge+=E}te=m*Ee,$=m*be,ge=v;e:for(q=0;q<A;++q){if(F=$+ge,(Re=y[N=te+ge]-y[F])>0){P=Ee,Ee=be,be=P;break e}if(Re<0)break e;ge+=E}te=m*me,$=m*De,ge=v;e:for(q=0;q<A;++q){if(F=$+ge,(Re=y[N=te+ge]-y[F])>0){P=me,me=De,De=P;break e}if(Re<0)break e;ge+=E}te=m*be,$=m*De,ge=v;e:for(q=0;q<A;++q){if(F=$+ge,(Re=y[N=te+ge]-y[F])>0){P=be,be=De,De=P;break e}if(Re<0)break e;ge+=E}te=m*Ee,$=m*Ue,ge=v;e:for(q=0;q<A;++q){if(F=$+ge,(Re=y[N=te+ge]-y[F])>0){P=Ee,Ee=Ue,Ue=P;break e}if(Re<0)break e;ge+=E}te=m*Ee,$=m*be,ge=v;e:for(q=0;q<A;++q){if(F=$+ge,(Re=y[N=te+ge]-y[F])>0){P=Ee,Ee=be,be=P;break e}if(Re<0)break e;ge+=E}te=m*De,$=m*Ue,ge=v;e:for(q=0;q<A;++q){if(F=$+ge,(Re=y[N=te+ge]-y[F])>0){P=De,De=Ue,Ue=P;break e}if(Re<0)break e;ge+=E}for(te=m*me,$=m*Ee,W=m*be,Z=m*De,J=m*Ue,ee=m*Ae,re=m*se,ae=m*Te,xe=0,ge=v,q=0;q<A;++q)N=te+ge,F=$+ge,V=W+ge,oe=Z+ge,ce=J+ge,pe=ee+ge,ve=re+ge,we=ae+ge,Ge[xe]=y[F],$e[xe]=y[oe],_e=_e&&Ge[xe]===$e[xe],D=y[N],G=y[V],I=y[ce],y[pe]=D,y[ve]=G,y[we]=I,++xe,ge+=w;for(te=m*le,$=m*g,ge=v,q=0;q<A;++q)F=$+ge,y[N=te+ge]=y[F],ge+=w;for(te=m*ne,$=m*f,ge=v,q=0;q<A;++q)F=$+ge,y[N=te+ge]=y[F],ge+=w;if(_e)for(H=he;H<=ke;++H){for(N=v+H*m,xe=0,q=0;q<A&&(Re=y[N]-Ge[xe])==0;++q)xe+=L,N+=E;if(Re!==0)if(Re<0){if(H!==he)for(te=m*H,$=m*he,ge=v,q=0;q<A;++q)F=$+ge,C=y[N=te+ge],y[N]=y[F],y[F]=C,ge+=w;++he}else for(;;){for(N=v+ke*m,xe=0,q=0;q<A&&(Re=y[N]-Ge[xe])==0;++q)xe+=L,N+=E;if(!(Re>0)){if(Re<0){for(te=m*H,$=m*he,W=m*ke,ge=v,q=0;q<A;++q)F=$+ge,V=W+ge,C=y[N=te+ge],y[N]=y[F],y[F]=y[V],y[V]=C,ge+=w;++he,--ke;break}for(te=m*H,$=m*ke,ge=v,q=0;q<A;++q)F=$+ge,C=y[N=te+ge],y[N]=y[F],y[F]=C,ge+=w;--ke;break}ke--}}else for(H=he;H<=ke;++H){for(N=v+H*m,xe=0,q=0;q<A&&(Ce=y[N]-Ge[xe])==0;++q)xe+=L,N+=E;if(Ce<0){if(H!==he)for(te=m*H,$=m*he,ge=v,q=0;q<A;++q)F=$+ge,C=y[N=te+ge],y[N]=y[F],y[F]=C,ge+=w;++he}else{for(N=v+H*m,xe=0,q=0;q<A&&(Fe=y[N]-$e[xe])==0;++q)xe+=L,N+=E;if(Fe>0)for(;;){for(N=v+ke*m,xe=0,q=0;q<A&&(Re=y[N]-$e[xe])==0;++q)xe+=L,N+=E;if(!(Re>0)){for(N=v+ke*m,xe=0,q=0;q<A&&(Re=y[N]-Ge[xe])==0;++q)xe+=L,N+=E;if(Re<0){for(te=m*H,$=m*he,W=m*ke,ge=v,q=0;q<A;++q)F=$+ge,V=W+ge,C=y[N=te+ge],y[N]=y[F],y[F]=y[V],y[V]=C,ge+=w;++he,--ke}else{for(te=m*H,$=m*ke,ge=v,q=0;q<A;++q)F=$+ge,C=y[N=te+ge],y[N]=y[F],y[F]=C,ge+=w;--ke}break}if(--ke<H)break}}}for(te=m*g,$=m*(he-1),xe=0,ge=v,q=0;q<A;++q)F=$+ge,y[N=te+ge]=y[F],y[F]=Ge[xe],++xe,ge+=w;for(te=m*f,$=m*(ke+1),xe=0,ge=v,q=0;q<A;++q)F=$+ge,y[N=te+ge]=y[F],y[F]=$e[xe],++xe,ge+=w;if(he-2-g<=32?u(g,he-2,y,v,m,_,h,A,w,E,L):x(g,he-2,y,v,m,_,h,A,w,E,L),f-(ke+2)<=32?u(ke+2,f,y,v,m,_,h,A,w,E,L):x(ke+2,f,y,v,m,_,h,A,w,E,L),_e)return c(Ge),void c($e);if(he<Ae&&ke>Te){e:for(;;){for(N=v+he*m,xe=0,ge=v,q=0;q<A;++q){if(y[N]!==Ge[xe])break e;++xe,N+=w}++he}e:for(;;){for(N=v+ke*m,xe=0,ge=v,q=0;q<A;++q){if(y[N]!==$e[xe])break e;++xe,N+=w}--ke}for(H=he;H<=ke;++H){for(N=v+H*m,xe=0,q=0;q<A&&(Ce=y[N]-Ge[xe])==0;++q)xe+=L,N+=E;if(Ce===0){if(H!==he)for(te=m*H,$=m*he,ge=v,q=0;q<A;++q)F=$+ge,C=y[N=te+ge],y[N]=y[F],y[F]=C,ge+=w;++he}else{for(N=v+H*m,xe=0,q=0;q<A&&(Fe=y[N]-$e[xe])==0;++q)xe+=L,N+=E;if(Fe===0)for(;;){for(N=v+ke*m,xe=0,q=0;q<A&&(Re=y[N]-$e[xe])==0;++q)xe+=L,N+=E;if(Re!==0){for(N=v+ke*m,xe=0,q=0;q<A&&(Re=y[N]-Ge[xe])==0;++q)xe+=L,N+=E;if(Re<0){for(te=m*H,$=m*he,W=m*ke,ge=v,q=0;q<A;++q)F=$+ge,V=W+ge,C=y[N=te+ge],y[N]=y[F],y[F]=y[V],y[V]=C,ge+=w;++he,--ke}else{for(te=m*H,$=m*ke,ge=v,q=0;q<A;++q)F=$+ge,C=y[N=te+ge],y[N]=y[F],y[F]=C,ge+=w;--ke}break}if(--ke<H)break}}}}c(Ge),c($e),ke-he<=32?u(he,ke,y,v,m,_,h,A,w,E,L):x(he,ke,y,v,m,_,h,A,w,E,L)}}},o={"uint32,1,0":function(u,p){return function(c){var x=c.data,g=0|c.offset,f=c.shape,y=c.stride,v=0|y[0],m=0|f[0],_=0|y[1],h=0|f[1],A=_,w=_;m<=32?u(0,m-1,x,g,v,_,m,h,A,w,1):p(0,m-1,x,g,v,_,m,h,A,w,1)}}};d.exports=function(u,p){var c=[p,u].join(","),x=o[c],g=function(y,v){var m=r(v),_=[v,y].join(","),h=n[_];return m?h(m[0],m[1]):h()}(u,p),f=function(y,v,m){var _=r(v),h=[v,y].join(","),A=a[h];return y.length>1&&_?A(m,_[0],_[1]):A(m)}(u,p,g);return x(g,f)}},8729:function(d,s,e){var i=e(8139),r={};d.exports=function(n){var a=n.order,o=n.dtype,u=[a,o].join(":"),p=r[u];return p||(r[u]=p=i(a,o)),p(n),n}},5050:function(d,s,e){var i=e(4780),r=typeof Float64Array<"u";function n(c,x){return c[0]-x[0]}function a(){var c,x=this.stride,g=new Array(x.length);for(c=0;c<g.length;++c)g[c]=[Math.abs(x[c]),c];g.sort(n);var f=new Array(g.length);for(c=0;c<f.length;++c)f[c]=g[c][1];return f}var o={T:function(c){function x(f){this.data=f}var g=x.prototype;return g.dtype=c,g.index=function(){return-1},g.size=0,g.dimension=-1,g.shape=g.stride=g.order=[],g.lo=g.hi=g.transpose=g.step=function(){return new x(this.data)},g.get=g.set=function(){},g.pick=function(){return null},function(f){return new x(f)}},0:function(c,x){function g(y,v){this.data=y,this.offset=v}var f=g.prototype;return f.dtype=c,f.index=function(){return this.offset},f.dimension=0,f.size=1,f.shape=f.stride=f.order=[],f.lo=f.hi=f.transpose=f.step=function(){return new g(this.data,this.offset)},f.pick=function(){return x(this.data)},f.valueOf=f.get=function(){return c==="generic"?this.data.get(this.offset):this.data[this.offset]},f.set=function(y){return c==="generic"?this.data.set(this.offset,y):this.data[this.offset]=y},function(y,v,m,_){return new g(y,_)}},1:function(c,x,g){function f(v,m,_,h){this.data=v,this.shape=[m],this.stride=[_],this.offset=0|h}var y=f.prototype;return y.dtype=c,y.dimension=1,Object.defineProperty(y,"size",{get:function(){return this.shape[0]}}),y.order=[0],y.set=function(v,m){return c==="generic"?this.data.set(this.offset+this.stride[0]*v,m):this.data[this.offset+this.stride[0]*v]=m},y.get=function(v){return c==="generic"?this.data.get(this.offset+this.stride[0]*v):this.data[this.offset+this.stride[0]*v]},y.index=function(v){return this.offset+this.stride[0]*v},y.hi=function(v){return new f(this.data,typeof v!="number"||v<0?this.shape[0]:0|v,this.stride[0],this.offset)},y.lo=function(v){var m=this.offset,_=0,h=this.shape[0],A=this.stride[0];return typeof v=="number"&&v>=0&&(m+=A*(_=0|v),h-=_),new f(this.data,h,A,m)},y.step=function(v){var m=this.shape[0],_=this.stride[0],h=this.offset,A=0,w=Math.ceil;return typeof v=="number"&&((A=0|v)<0?(h+=_*(m-1),m=w(-m/A)):m=w(m/A),_*=A),new f(this.data,m,_,h)},y.transpose=function(v){v=v===void 0?0:0|v;var m=this.shape,_=this.stride;return new f(this.data,m[v],_[v],this.offset)},y.pick=function(v){var m=[],_=[],h=this.offset;return typeof v=="number"&&v>=0?h=h+this.stride[0]*v|0:(m.push(this.shape[0]),_.push(this.stride[0])),(0,x[m.length+1])(this.data,m,_,h)},function(v,m,_,h){return new f(v,m[0],_[0],h)}},2:function(c,x,g){function f(v,m,_,h,A,w){this.data=v,this.shape=[m,_],this.stride=[h,A],this.offset=0|w}var y=f.prototype;return y.dtype=c,y.dimension=2,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(y,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),y.set=function(v,m,_){return c==="generic"?this.data.set(this.offset+this.stride[0]*v+this.stride[1]*m,_):this.data[this.offset+this.stride[0]*v+this.stride[1]*m]=_},y.get=function(v,m){return c==="generic"?this.data.get(this.offset+this.stride[0]*v+this.stride[1]*m):this.data[this.offset+this.stride[0]*v+this.stride[1]*m]},y.index=function(v,m){return this.offset+this.stride[0]*v+this.stride[1]*m},y.hi=function(v,m){return new f(this.data,typeof v!="number"||v<0?this.shape[0]:0|v,typeof m!="number"||m<0?this.shape[1]:0|m,this.stride[0],this.stride[1],this.offset)},y.lo=function(v,m){var _=this.offset,h=0,A=this.shape[0],w=this.shape[1],E=this.stride[0],L=this.stride[1];return typeof v=="number"&&v>=0&&(_+=E*(h=0|v),A-=h),typeof m=="number"&&m>=0&&(_+=L*(h=0|m),w-=h),new f(this.data,A,w,E,L,_)},y.step=function(v,m){var _=this.shape[0],h=this.shape[1],A=this.stride[0],w=this.stride[1],E=this.offset,L=0,C=Math.ceil;return typeof v=="number"&&((L=0|v)<0?(E+=A*(_-1),_=C(-_/L)):_=C(_/L),A*=L),typeof m=="number"&&((L=0|m)<0?(E+=w*(h-1),h=C(-h/L)):h=C(h/L),w*=L),new f(this.data,_,h,A,w,E)},y.transpose=function(v,m){v=v===void 0?0:0|v,m=m===void 0?1:0|m;var _=this.shape,h=this.stride;return new f(this.data,_[v],_[m],h[v],h[m],this.offset)},y.pick=function(v,m){var _=[],h=[],A=this.offset;return typeof v=="number"&&v>=0?A=A+this.stride[0]*v|0:(_.push(this.shape[0]),h.push(this.stride[0])),typeof m=="number"&&m>=0?A=A+this.stride[1]*m|0:(_.push(this.shape[1]),h.push(this.stride[1])),(0,x[_.length+1])(this.data,_,h,A)},function(v,m,_,h){return new f(v,m[0],m[1],_[0],_[1],h)}},3:function(c,x,g){function f(v,m,_,h,A,w,E,L){this.data=v,this.shape=[m,_,h],this.stride=[A,w,E],this.offset=0|L}var y=f.prototype;return y.dtype=c,y.dimension=3,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(y,"order",{get:function(){var v=Math.abs(this.stride[0]),m=Math.abs(this.stride[1]),_=Math.abs(this.stride[2]);return v>m?m>_?[2,1,0]:v>_?[1,2,0]:[1,0,2]:v>_?[2,0,1]:_>m?[0,1,2]:[0,2,1]}}),y.set=function(v,m,_,h){return c==="generic"?this.data.set(this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_,h):this.data[this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_]=h},y.get=function(v,m,_){return c==="generic"?this.data.get(this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_):this.data[this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_]},y.index=function(v,m,_){return this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_},y.hi=function(v,m,_){return new f(this.data,typeof v!="number"||v<0?this.shape[0]:0|v,typeof m!="number"||m<0?this.shape[1]:0|m,typeof _!="number"||_<0?this.shape[2]:0|_,this.stride[0],this.stride[1],this.stride[2],this.offset)},y.lo=function(v,m,_){var h=this.offset,A=0,w=this.shape[0],E=this.shape[1],L=this.shape[2],C=this.stride[0],P=this.stride[1],D=this.stride[2];return typeof v=="number"&&v>=0&&(h+=C*(A=0|v),w-=A),typeof m=="number"&&m>=0&&(h+=P*(A=0|m),E-=A),typeof _=="number"&&_>=0&&(h+=D*(A=0|_),L-=A),new f(this.data,w,E,L,C,P,D,h)},y.step=function(v,m,_){var h=this.shape[0],A=this.shape[1],w=this.shape[2],E=this.stride[0],L=this.stride[1],C=this.stride[2],P=this.offset,D=0,G=Math.ceil;return typeof v=="number"&&((D=0|v)<0?(P+=E*(h-1),h=G(-h/D)):h=G(h/D),E*=D),typeof m=="number"&&((D=0|m)<0?(P+=L*(A-1),A=G(-A/D)):A=G(A/D),L*=D),typeof _=="number"&&((D=0|_)<0?(P+=C*(w-1),w=G(-w/D)):w=G(w/D),C*=D),new f(this.data,h,A,w,E,L,C,P)},y.transpose=function(v,m,_){v=v===void 0?0:0|v,m=m===void 0?1:0|m,_=_===void 0?2:0|_;var h=this.shape,A=this.stride;return new f(this.data,h[v],h[m],h[_],A[v],A[m],A[_],this.offset)},y.pick=function(v,m,_){var h=[],A=[],w=this.offset;return typeof v=="number"&&v>=0?w=w+this.stride[0]*v|0:(h.push(this.shape[0]),A.push(this.stride[0])),typeof m=="number"&&m>=0?w=w+this.stride[1]*m|0:(h.push(this.shape[1]),A.push(this.stride[1])),typeof _=="number"&&_>=0?w=w+this.stride[2]*_|0:(h.push(this.shape[2]),A.push(this.stride[2])),(0,x[h.length+1])(this.data,h,A,w)},function(v,m,_,h){return new f(v,m[0],m[1],m[2],_[0],_[1],_[2],h)}},4:function(c,x,g){function f(v,m,_,h,A,w,E,L,C,P){this.data=v,this.shape=[m,_,h,A],this.stride=[w,E,L,C],this.offset=0|P}var y=f.prototype;return y.dtype=c,y.dimension=4,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(y,"order",{get:g}),y.set=function(v,m,_,h,A){return c==="generic"?this.data.set(this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_+this.stride[3]*h,A):this.data[this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_+this.stride[3]*h]=A},y.get=function(v,m,_,h){return c==="generic"?this.data.get(this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_+this.stride[3]*h):this.data[this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_+this.stride[3]*h]},y.index=function(v,m,_,h){return this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_+this.stride[3]*h},y.hi=function(v,m,_,h){return new f(this.data,typeof v!="number"||v<0?this.shape[0]:0|v,typeof m!="number"||m<0?this.shape[1]:0|m,typeof _!="number"||_<0?this.shape[2]:0|_,typeof h!="number"||h<0?this.shape[3]:0|h,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},y.lo=function(v,m,_,h){var A=this.offset,w=0,E=this.shape[0],L=this.shape[1],C=this.shape[2],P=this.shape[3],D=this.stride[0],G=this.stride[1],I=this.stride[2],H=this.stride[3];return typeof v=="number"&&v>=0&&(A+=D*(w=0|v),E-=w),typeof m=="number"&&m>=0&&(A+=G*(w=0|m),L-=w),typeof _=="number"&&_>=0&&(A+=I*(w=0|_),C-=w),typeof h=="number"&&h>=0&&(A+=H*(w=0|h),P-=w),new f(this.data,E,L,C,P,D,G,I,H,A)},y.step=function(v,m,_,h){var A=this.shape[0],w=this.shape[1],E=this.shape[2],L=this.shape[3],C=this.stride[0],P=this.stride[1],D=this.stride[2],G=this.stride[3],I=this.offset,H=0,N=Math.ceil;return typeof v=="number"&&((H=0|v)<0?(I+=C*(A-1),A=N(-A/H)):A=N(A/H),C*=H),typeof m=="number"&&((H=0|m)<0?(I+=P*(w-1),w=N(-w/H)):w=N(w/H),P*=H),typeof _=="number"&&((H=0|_)<0?(I+=D*(E-1),E=N(-E/H)):E=N(E/H),D*=H),typeof h=="number"&&((H=0|h)<0?(I+=G*(L-1),L=N(-L/H)):L=N(L/H),G*=H),new f(this.data,A,w,E,L,C,P,D,G,I)},y.transpose=function(v,m,_,h){v=v===void 0?0:0|v,m=m===void 0?1:0|m,_=_===void 0?2:0|_,h=h===void 0?3:0|h;var A=this.shape,w=this.stride;return new f(this.data,A[v],A[m],A[_],A[h],w[v],w[m],w[_],w[h],this.offset)},y.pick=function(v,m,_,h){var A=[],w=[],E=this.offset;return typeof v=="number"&&v>=0?E=E+this.stride[0]*v|0:(A.push(this.shape[0]),w.push(this.stride[0])),typeof m=="number"&&m>=0?E=E+this.stride[1]*m|0:(A.push(this.shape[1]),w.push(this.stride[1])),typeof _=="number"&&_>=0?E=E+this.stride[2]*_|0:(A.push(this.shape[2]),w.push(this.stride[2])),typeof h=="number"&&h>=0?E=E+this.stride[3]*h|0:(A.push(this.shape[3]),w.push(this.stride[3])),(0,x[A.length+1])(this.data,A,w,E)},function(v,m,_,h){return new f(v,m[0],m[1],m[2],m[3],_[0],_[1],_[2],_[3],h)}},5:function(c,x,g){function f(v,m,_,h,A,w,E,L,C,P,D,G){this.data=v,this.shape=[m,_,h,A,w],this.stride=[E,L,C,P,D],this.offset=0|G}var y=f.prototype;return y.dtype=c,y.dimension=5,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(y,"order",{get:g}),y.set=function(v,m,_,h,A,w){return c==="generic"?this.data.set(this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_+this.stride[3]*h+this.stride[4]*A,w):this.data[this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_+this.stride[3]*h+this.stride[4]*A]=w},y.get=function(v,m,_,h,A){return c==="generic"?this.data.get(this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_+this.stride[3]*h+this.stride[4]*A):this.data[this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_+this.stride[3]*h+this.stride[4]*A]},y.index=function(v,m,_,h,A){return this.offset+this.stride[0]*v+this.stride[1]*m+this.stride[2]*_+this.stride[3]*h+this.stride[4]*A},y.hi=function(v,m,_,h,A){return new f(this.data,typeof v!="number"||v<0?this.shape[0]:0|v,typeof m!="number"||m<0?this.shape[1]:0|m,typeof _!="number"||_<0?this.shape[2]:0|_,typeof h!="number"||h<0?this.shape[3]:0|h,typeof A!="number"||A<0?this.shape[4]:0|A,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},y.lo=function(v,m,_,h,A){var w=this.offset,E=0,L=this.shape[0],C=this.shape[1],P=this.shape[2],D=this.shape[3],G=this.shape[4],I=this.stride[0],H=this.stride[1],N=this.stride[2],F=this.stride[3],V=this.stride[4];return typeof v=="number"&&v>=0&&(w+=I*(E=0|v),L-=E),typeof m=="number"&&m>=0&&(w+=H*(E=0|m),C-=E),typeof _=="number"&&_>=0&&(w+=N*(E=0|_),P-=E),typeof h=="number"&&h>=0&&(w+=F*(E=0|h),D-=E),typeof A=="number"&&A>=0&&(w+=V*(E=0|A),G-=E),new f(this.data,L,C,P,D,G,I,H,N,F,V,w)},y.step=function(v,m,_,h,A){var w=this.shape[0],E=this.shape[1],L=this.shape[2],C=this.shape[3],P=this.shape[4],D=this.stride[0],G=this.stride[1],I=this.stride[2],H=this.stride[3],N=this.stride[4],F=this.offset,V=0,q=Math.ceil;return typeof v=="number"&&((V=0|v)<0?(F+=D*(w-1),w=q(-w/V)):w=q(w/V),D*=V),typeof m=="number"&&((V=0|m)<0?(F+=G*(E-1),E=q(-E/V)):E=q(E/V),G*=V),typeof _=="number"&&((V=0|_)<0?(F+=I*(L-1),L=q(-L/V)):L=q(L/V),I*=V),typeof h=="number"&&((V=0|h)<0?(F+=H*(C-1),C=q(-C/V)):C=q(C/V),H*=V),typeof A=="number"&&((V=0|A)<0?(F+=N*(P-1),P=q(-P/V)):P=q(P/V),N*=V),new f(this.data,w,E,L,C,P,D,G,I,H,N,F)},y.transpose=function(v,m,_,h,A){v=v===void 0?0:0|v,m=m===void 0?1:0|m,_=_===void 0?2:0|_,h=h===void 0?3:0|h,A=A===void 0?4:0|A;var w=this.shape,E=this.stride;return new f(this.data,w[v],w[m],w[_],w[h],w[A],E[v],E[m],E[_],E[h],E[A],this.offset)},y.pick=function(v,m,_,h,A){var w=[],E=[],L=this.offset;return typeof v=="number"&&v>=0?L=L+this.stride[0]*v|0:(w.push(this.shape[0]),E.push(this.stride[0])),typeof m=="number"&&m>=0?L=L+this.stride[1]*m|0:(w.push(this.shape[1]),E.push(this.stride[1])),typeof _=="number"&&_>=0?L=L+this.stride[2]*_|0:(w.push(this.shape[2]),E.push(this.stride[2])),typeof h=="number"&&h>=0?L=L+this.stride[3]*h|0:(w.push(this.shape[3]),E.push(this.stride[3])),typeof A=="number"&&A>=0?L=L+this.stride[4]*A|0:(w.push(this.shape[4]),E.push(this.stride[4])),(0,x[w.length+1])(this.data,w,E,L)},function(v,m,_,h){return new f(v,m[0],m[1],m[2],m[3],m[4],_[0],_[1],_[2],_[3],_[4],h)}}};function u(c,x){var g=x===-1?"T":String(x),f=o[g];return x===-1?f(c):x===0?f(c,p[c][0]):f(c,p[c],a)}var p={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};d.exports=function(c,x,g,f){if(c===void 0)return(0,p.array[0])([]);typeof c=="number"&&(c=[c]),x===void 0&&(x=[c.length]);var y=x.length;if(g===void 0){g=new Array(y);for(var v=y-1,m=1;v>=0;--v)g[v]=m,m*=x[v]}if(f===void 0)for(f=0,v=0;v<y;++v)g[v]<0&&(f-=(x[v]-1)*g[v]);for(var _=function(A){if(i(A))return"buffer";if(r)switch(Object.prototype.toString.call(A)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(A)?"array":"generic"}(c),h=p[_];h.length<=y+1;)h.push(u(_,h.length-1));return(0,h[y+1])(c,x,g,f)}},8551:function(d,s,e){var i=e(8362),r=Math.pow(2,-1074),n=-1>>>0;d.exports=function(a,o){if(isNaN(a)||isNaN(o))return NaN;if(a===o)return a;if(a===0)return o<0?-r:r;var u=i.hi(a),p=i.lo(a);return o>a==a>0?p===n?(u+=1,p=0):p+=1:p===0?(p=n,u-=1):p-=1,i.pack(p,u)}},115:function(d,s){s.vertexNormals=function(e,i,r){for(var n=i.length,a=new Array(n),o=r===void 0?1e-6:r,u=0;u<n;++u)a[u]=[0,0,0];for(u=0;u<e.length;++u)for(var p=e[u],c=0,x=p[p.length-1],g=p[0],f=0;f<p.length;++f){c=x,x=g,g=p[(f+1)%p.length];for(var y=i[c],v=i[x],m=i[g],_=new Array(3),h=0,A=new Array(3),w=0,E=0;E<3;++E)_[E]=y[E]-v[E],h+=_[E]*_[E],A[E]=m[E]-v[E],w+=A[E]*A[E];if(h*w>o){var L=a[x],C=1/Math.sqrt(h*w);for(E=0;E<3;++E){var P=(E+1)%3,D=(E+2)%3;L[E]+=C*(A[P]*_[D]-A[D]*_[P])}}}for(u=0;u<n;++u){L=a[u];var G=0;for(E=0;E<3;++E)G+=L[E]*L[E];if(G>o)for(C=1/Math.sqrt(G),E=0;E<3;++E)L[E]*=C;else for(E=0;E<3;++E)L[E]=0}return a},s.faceNormals=function(e,i,r){for(var n=e.length,a=new Array(n),o=r===void 0?1e-6:r,u=0;u<n;++u){for(var p=e[u],c=new Array(3),x=0;x<3;++x)c[x]=i[p[x]];var g=new Array(3),f=new Array(3);for(x=0;x<3;++x)g[x]=c[1][x]-c[0][x],f[x]=c[2][x]-c[0][x];var y=new Array(3),v=0;for(x=0;x<3;++x){var m=(x+1)%3,_=(x+2)%3;y[x]=g[m]*f[_]-g[_]*f[m],v+=y[x]*y[x]}for(v=v>o?1/Math.sqrt(v):0,x=0;x<3;++x)y[x]*=v;a[u]=y}return a}},567:function(d){d.exports=function(s,e,i,r,n,a,o,u,p,c){var x=e+a+c;if(g>0){var g=Math.sqrt(x+1);s[0]=.5*(o-p)/g,s[1]=.5*(u-r)/g,s[2]=.5*(i-a)/g,s[3]=.5*g}else{var f=Math.max(e,a,c);g=Math.sqrt(2*f-x+1),e>=f?(s[0]=.5*g,s[1]=.5*(n+i)/g,s[2]=.5*(u+r)/g,s[3]=.5*(o-p)/g):a>=f?(s[0]=.5*(i+n)/g,s[1]=.5*g,s[2]=.5*(p+o)/g,s[3]=.5*(u-r)/g):(s[0]=.5*(r+u)/g,s[1]=.5*(o+p)/g,s[2]=.5*g,s[3]=.5*(i-n)/g)}return s}},7774:function(d,s,e){d.exports=function(f){var y=(f=f||{}).center||[0,0,0],v=f.rotation||[0,0,0,1],m=f.radius||1;y=[].slice.call(y,0,3),c(v=[].slice.call(v,0,4),v);var _=new x(v,y,Math.log(m));return _.setDistanceLimits(f.zoomMin,f.zoomMax),("eye"in f||"up"in f)&&_.lookAt(0,f.eye,f.center,f.up),_};var i=e(8444),r=e(3012),n=e(5950),a=e(7437),o=e(567);function u(f,y,v){return Math.sqrt(Math.pow(f,2)+Math.pow(y,2)+Math.pow(v,2))}function p(f,y,v,m){return Math.sqrt(Math.pow(f,2)+Math.pow(y,2)+Math.pow(v,2)+Math.pow(m,2))}function c(f,y){var v=y[0],m=y[1],_=y[2],h=y[3],A=p(v,m,_,h);A>1e-6?(f[0]=v/A,f[1]=m/A,f[2]=_/A,f[3]=h/A):(f[0]=f[1]=f[2]=0,f[3]=1)}function x(f,y,v){this.radius=i([v]),this.center=i(y),this.rotation=i(f),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var g=x.prototype;g.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},g.recalcMatrix=function(f){this.radius.curve(f),this.center.curve(f),this.rotation.curve(f);var y=this.computedRotation;c(y,y);var v=this.computedMatrix;n(v,y);var m=this.computedCenter,_=this.computedEye,h=this.computedUp,A=Math.exp(this.computedRadius[0]);_[0]=m[0]+A*v[2],_[1]=m[1]+A*v[6],_[2]=m[2]+A*v[10],h[0]=v[1],h[1]=v[5],h[2]=v[9];for(var w=0;w<3;++w){for(var E=0,L=0;L<3;++L)E+=v[w+4*L]*_[L];v[12+w]=-E}},g.getMatrix=function(f,y){this.recalcMatrix(f);var v=this.computedMatrix;if(y){for(var m=0;m<16;++m)y[m]=v[m];return y}return v},g.idle=function(f){this.center.idle(f),this.radius.idle(f),this.rotation.idle(f)},g.flush=function(f){this.center.flush(f),this.radius.flush(f),this.rotation.flush(f)},g.pan=function(f,y,v,m){y=y||0,v=v||0,m=m||0,this.recalcMatrix(f);var _=this.computedMatrix,h=_[1],A=_[5],w=_[9],E=u(h,A,w);h/=E,A/=E,w/=E;var L=_[0],C=_[4],P=_[8],D=L*h+C*A+P*w,G=u(L-=h*D,C-=A*D,P-=w*D);L/=G,C/=G,P/=G,_[2],_[6],_[10];var I=L*y+h*v,H=C*y+A*v,N=P*y+w*v;this.center.move(f,I,H,N);var F=Math.exp(this.computedRadius[0]);F=Math.max(1e-4,F+m),this.radius.set(f,Math.log(F))},g.rotate=function(f,y,v,m){this.recalcMatrix(f),y=y||0,v=v||0;var _=this.computedMatrix,h=_[0],A=_[4],w=_[8],E=_[1],L=_[5],C=_[9],P=_[2],D=_[6],G=_[10],I=y*h+v*E,H=y*A+v*L,N=y*w+v*C,F=-(D*N-G*H),V=-(G*I-P*N),q=-(P*H-D*I),te=Math.sqrt(Math.max(0,1-Math.pow(F,2)-Math.pow(V,2)-Math.pow(q,2))),$=p(F,V,q,te);$>1e-6?(F/=$,V/=$,q/=$,te/=$):(F=V=q=0,te=1);var W=this.computedRotation,Z=W[0],J=W[1],ee=W[2],re=W[3],ae=Z*te+re*F+J*q-ee*V,oe=J*te+re*V+ee*F-Z*q,ce=ee*te+re*q+Z*V-J*F,pe=re*te-Z*F-J*V-ee*q;if(m){F=P,V=D,q=G;var ve=Math.sin(m)/u(F,V,q);F*=ve,V*=ve,q*=ve,pe=pe*(te=Math.cos(y))-(ae=ae*te+pe*F+oe*q-ce*V)*F-(oe=oe*te+pe*V+ce*F-ae*q)*V-(ce=ce*te+pe*q+ae*V-oe*F)*q}var we=p(ae,oe,ce,pe);we>1e-6?(ae/=we,oe/=we,ce/=we,pe/=we):(ae=oe=ce=0,pe=1),this.rotation.set(f,ae,oe,ce,pe)},g.lookAt=function(f,y,v,m){this.recalcMatrix(f),v=v||this.computedCenter,y=y||this.computedEye,m=m||this.computedUp;var _=this.computedMatrix;r(_,y,v,m);var h=this.computedRotation;o(h,_[0],_[1],_[2],_[4],_[5],_[6],_[8],_[9],_[10]),c(h,h),this.rotation.set(f,h[0],h[1],h[2],h[3]);for(var A=0,w=0;w<3;++w)A+=Math.pow(v[w]-y[w],2);this.radius.set(f,.5*Math.log(Math.max(A,1e-6))),this.center.set(f,v[0],v[1],v[2])},g.translate=function(f,y,v,m){this.center.move(f,y||0,v||0,m||0)},g.setMatrix=function(f,y){var v=this.computedRotation;o(v,y[0],y[1],y[2],y[4],y[5],y[6],y[8],y[9],y[10]),c(v,v),this.rotation.set(f,v[0],v[1],v[2],v[3]);var m=this.computedMatrix;a(m,y);var _=m[15];if(Math.abs(_)>1e-6){var h=m[12]/_,A=m[13]/_,w=m[14]/_;this.recalcMatrix(f);var E=Math.exp(this.computedRadius[0]);this.center.set(f,h-m[2]*E,A-m[6]*E,w-m[10]*E),this.radius.idle(f)}else this.center.idle(f),this.radius.idle(f)},g.setDistance=function(f,y){y>0&&this.radius.set(f,Math.log(y))},g.setDistanceLimits=function(f,y){f=f>0?Math.log(f):-1/0,y=y>0?Math.log(y):1/0,y=Math.max(y,f),this.radius.bounds[0][0]=f,this.radius.bounds[1][0]=y},g.getDistanceLimits=function(f){var y=this.radius.bounds;return f?(f[0]=Math.exp(y[0][0]),f[1]=Math.exp(y[1][0]),f):[Math.exp(y[0][0]),Math.exp(y[1][0])]},g.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},g.fromJSON=function(f){var y=this.lastT(),v=f.center;v&&this.center.set(y,v[0],v[1],v[2]);var m=f.rotation;m&&this.rotation.set(y,m[0],m[1],m[2],m[3]);var _=f.distance;_&&_>0&&this.radius.set(y,Math.log(_)),this.setDistanceLimits(f.zoomMin,f.zoomMax)}},4930:function(d,s,e){var i=e(6184);d.exports=function(r,n,a){return i(a=a!==void 0?a+"":" ",n)+r}},4405:function(d){d.exports=function(s,e){e||(e=[0,""]),s=String(s);var i=parseFloat(s,10);return e[0]=i,e[1]=s.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},4166:function(d,s,e){d.exports=function(r,n){for(var a=0|n.length,o=r.length,u=[new Array(a),new Array(a)],p=0;p<a;++p)u[0][p]=[],u[1][p]=[];for(p=0;p<o;++p){var c=r[p];u[0][c[0]].push(c),u[1][c[1]].push(c)}var x=[];for(p=0;p<a;++p)u[0][p].length+u[1][p].length===0&&x.push([p]);function g(A,w){var E=u[w][A[w]];E.splice(E.indexOf(A),1)}function f(A,w,E){for(var L,C,P,D=0;D<2;++D)if(u[D][w].length>0){L=u[D][w][0],P=D;break}C=L[1^P];for(var G=0;G<2;++G)for(var I=u[G][w],H=0;H<I.length;++H){var N=I[H],F=N[1^G];i(n[A],n[w],n[C],n[F])>0&&(L=N,C=F,P=G)}return E||L&&g(L,P),C}function y(A,w){var E=u[w][A][0],L=[A];g(E,w);for(var C=E[1^w];;){for(;C!==A;)L.push(C),C=f(L[L.length-2],C,!1);if(u[0][A].length+u[1][A].length===0)break;var P=L[L.length-1],D=A,G=L[1],I=f(P,D,!0);if(i(n[P],n[D],n[G],n[I])<0)break;L.push(A),C=f(P,D)}return L}function v(A,w){return w[1]===w[w.length-1]}for(p=0;p<a;++p)for(var m=0;m<2;++m){for(var _=[];u[m][p].length>0;){u[0][p].length;var h=y(p,m);v(0,h)?_.push.apply(_,h):(_.length>0&&x.push(_),_=h)}_.length>0&&x.push(_)}return x};var i=e(9398)},3959:function(d,s,e){d.exports=function(r,n){for(var a=i(r,n.length),o=new Array(n.length),u=new Array(n.length),p=[],c=0;c<n.length;++c){var x=a[c].length;u[c]=x,o[c]=!0,x<=1&&p.push(c)}for(;p.length>0;){o[m=p.pop()]=!1;var g=a[m];for(c=0;c<g.length;++c){var f=g[c];--u[f]==0&&p.push(f)}}var y=new Array(n.length),v=[];for(c=0;c<n.length;++c)if(o[c]){var m=v.length;y[c]=m,v.push(n[c])}else y[c]=-1;var _=[];for(c=0;c<r.length;++c){var h=r[c];o[h[0]]&&o[h[1]]&&_.push([y[h[0]],y[h[1]]])}return[_,v]};var i=e(8348)},8040:function(d,s,e){d.exports=function(x,g){var f=p(x,g);x=f[0];for(var y=(g=f[1]).length,v=(x.length,i(x,g.length)),m=0;m<y;++m)if(v[m].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var _=r(x,g),h=(_=_.filter(function(Oe){for(var Ae=Oe.length,Te=[0],se=0;se<Ae;++se){var le=g[Oe[se]],ne=g[Oe[(se+1)%Ae]],me=a(-le[0],le[1]),Ee=a(-le[0],ne[1]),be=a(ne[0],le[1]),De=a(ne[0],ne[1]);Te=o(Te,o(o(me,Ee),o(be,De)))}return Te[Te.length-1]>0})).length,A=new Array(h),w=new Array(h);for(m=0;m<h;++m){A[m]=m;var E=new Array(h),L=_[m].map(function(Oe){return g[Oe]}),C=n([L]),P=0;e:for(var D=0;D<h;++D)if(E[D]=0,m!==D){for(var G=(xe=_[D]).length,I=0;I<G;++I){var H=C(g[xe[I]]);if(H!==0){H<0&&(E[D]=1,P+=1);continue e}}E[D]=1,P+=1}w[m]=[P,m,E]}for(w.sort(function(Oe,Ae){return Ae[0]-Oe[0]}),m=0;m<h;++m){var N=(E=w[m])[1],F=E[2];for(D=0;D<h;++D)F[D]&&(A[D]=N)}var V=function(Oe){for(var Ae=new Array(Oe),Te=0;Te<Oe;++Te)Ae[Te]=[];return Ae}(h);for(m=0;m<h;++m)V[m].push(A[m]),V[A[m]].push(m);var q={},te=c(y,!1);for(m=0;m<h;++m)for(G=(xe=_[m]).length,D=0;D<G;++D){var $=xe[D],W=xe[(D+1)%G],Z=Math.min($,W)+":"+Math.max($,W);if(Z in q){var J=q[Z];V[J].push(m),V[m].push(J),te[$]=te[W]=!0}else q[Z]=m}function ee(Oe){for(var Ae=Oe.length,Te=0;Te<Ae;++Te)if(!te[Oe[Te]])return!1;return!0}var re=[],ae=c(h,-1);for(m=0;m<h;++m)A[m]!==m||ee(_[m])?ae[m]=-1:(re.push(m),ae[m]=0);for(f=[];re.length>0;){var oe=re.pop(),ce=V[oe];u(ce,function(Oe,Ae){return Oe-Ae});var pe,ve=ce.length,we=ae[oe];for(we===0&&(pe=[xe=_[oe]]),m=0;m<ve;++m){var xe,ge=ce[m];ae[ge]>=0||(ae[ge]=1^we,re.push(ge),we===0&&(ee(xe=_[ge])||(xe.reverse(),pe.push(xe))))}we===0&&f.push(pe)}return f};var i=e(8348),r=e(4166),n=e(211),a=e(9660),o=e(9662),u=e(1215),p=e(3959);function c(x,g){for(var f=new Array(x),y=0;y<x;++y)f[y]=g;return f}},211:function(d,s,e){d.exports=function(c){for(var x=c.length,g=[],f=[],y=0;y<x;++y)for(var v=c[y],m=v.length,_=m-1,h=0;h<m;_=h++){var A=v[_],w=v[h];A[0]===w[0]?f.push([A,w]):g.push([A,w])}if(g.length===0)return f.length===0?p:(E=u(f),function(P){return E(P[0],P[1])?0:1});var E,L=r(g),C=function(P,D){return function(G){var I=a.le(D,G[0]);if(I<0)return 1;var H=P[I];if(!H){if(!(I>0&&D[I]===G[0]))return 1;H=P[I-1]}for(var N=1;H;){var F=H.key,V=i(G,F[0],F[1]);if(F[0][0]<F[1][0])if(V<0)H=H.left;else{if(!(V>0))return 0;N=-1,H=H.right}else if(V>0)H=H.left;else{if(!(V<0))return 0;N=1,H=H.right}}return N}}(L.slabs,L.coordinates);return f.length===0?C:function(P,D){return function(G){return P(G[0],G[1])?0:D(G)}}(u(f),C)};var i=e(417)[3],r=e(4385),n=e(9014),a=e(5070);function o(){return!0}function u(c){for(var x={},g=0;g<c.length;++g){var f=c[g],y=f[0][0],v=f[0][1],m=f[1][1],_=[Math.min(v,m),Math.max(v,m)];y in x?x[y].push(_):x[y]=[_]}var h={},A=Object.keys(x);for(g=0;g<A.length;++g){var w=x[A[g]];h[A[g]]=n(w)}return function(E){return function(L,C){var P=E[L];return!!P&&!!P.queryPoint(C,o)}}(h)}function p(c){return 1}},7309:function(d){var s=new Float64Array(4),e=new Float64Array(4),i=new Float64Array(4);d.exports=function(r,n,a,o,u){s.length<o.length&&(s=new Float64Array(o.length),e=new Float64Array(o.length),i=new Float64Array(o.length));for(var p=0;p<o.length;++p)s[p]=r[p]-o[p],e[p]=n[p]-r[p],i[p]=a[p]-r[p];var c=0,x=0,g=0,f=0,y=0,v=0;for(p=0;p<o.length;++p){var m=e[p],_=i[p],h=s[p];c+=m*m,x+=m*_,g+=_*_,f+=h*m,y+=h*_,v+=h*h}var A,w,E,L,C,P=Math.abs(c*g-x*x),D=x*y-g*f,G=x*f-c*y;if(D+G<=P)if(D<0)G<0&&f<0?(G=0,-f>=c?(D=1,A=c+2*f+v):A=f*(D=-f/c)+v):(D=0,y>=0?(G=0,A=v):-y>=g?(G=1,A=g+2*y+v):A=y*(G=-y/g)+v);else if(G<0)G=0,f>=0?(D=0,A=v):-f>=c?(D=1,A=c+2*f+v):A=f*(D=-f/c)+v;else{var I=1/P;A=(D*=I)*(c*D+x*(G*=I)+2*f)+G*(x*D+g*G+2*y)+v}else D<0?(E=g+y)>(w=x+f)?(L=E-w)>=(C=c-2*x+g)?(D=1,G=0,A=c+2*f+v):A=(D=L/C)*(c*D+x*(G=1-D)+2*f)+G*(x*D+g*G+2*y)+v:(D=0,E<=0?(G=1,A=g+2*y+v):y>=0?(G=0,A=v):A=y*(G=-y/g)+v):G<0?(E=c+f)>(w=x+y)?(L=E-w)>=(C=c-2*x+g)?(G=1,D=0,A=g+2*y+v):A=(D=1-(G=L/C))*(c*D+x*G+2*f)+G*(x*D+g*G+2*y)+v:(G=0,E<=0?(D=1,A=c+2*f+v):f>=0?(D=0,A=v):A=f*(D=-f/c)+v):(L=g+y-x-f)<=0?(D=0,G=1,A=g+2*y+v):L>=(C=c-2*x+g)?(D=1,G=0,A=c+2*f+v):A=(D=L/C)*(c*D+x*(G=1-D)+2*f)+G*(x*D+g*G+2*y)+v;var H=1-D-G;for(p=0;p<o.length;++p)u[p]=H*r[p]+D*n[p]+G*a[p];return A<0?0:A}},1116:function(d,s,e){d.exports=e(6093)},7584:function(d,s,e){var i=e(1539);d.exports=function(r,n){for(var a=r.length,o=new Array(a),u=0;u<a;++u)o[u]=i(r[u],n[u]);return o}},2826:function(d,s,e){d.exports=function(r){for(var n=new Array(r.length),a=0;a<r.length;++a)n[a]=i(r[a]);return n};var i=e(5125)},4469:function(d,s,e){var i=e(5125),r=e(3962);d.exports=function(n,a){for(var o=i(a),u=n.length,p=new Array(u),c=0;c<u;++c)p[c]=r(n[c],o);return p}},6695:function(d,s,e){var i=e(4354);d.exports=function(r,n){for(var a=r.length,o=new Array(a),u=0;u<a;++u)o[u]=i(r[u],n[u]);return o}},7037:function(d,s,e){var i=e(9209),r=e(1284),n=e(9887);d.exports=function(a){a.sort(r);for(var o=a.length,u=0,p=0;p<o;++p){var c=a[p],x=n(c);if(x!==0){if(u>0){var g=a[u-1];if(i(c,g)===0&&n(g)!==x){u-=1;continue}}a[u++]=c}}return a.length=u,a}},6184:function(d){var s,e="";d.exports=function(i,r){if(typeof i!="string")throw new TypeError("expected a string");if(r===1)return i;if(r===2)return i+i;var n=i.length*r;if(s!==i||s===void 0)s=i,e="";else if(e.length>=n)return e.substr(0,n);for(;n>e.length&&r>1;)1&r&&(e+=i),r>>=1,i+=i;return e=(e+=i).substr(0,n)}},8161:function(d,s,e){d.exports=e.g.performance&&e.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},402:function(d){d.exports=function(s){for(var e=s.length,i=s[s.length-1],r=e,n=e-2;n>=0;--n){var a=i;(p=(u=s[n])-((i=a+u)-a))&&(s[--r]=i,i=p)}var o=0;for(n=r;n<e;++n){var u,p;(p=(u=i)-((i=(a=s[n])+u)-a))&&(s[o++]=p)}return s[o++]=i,s.length=o,s}},8167:function(d,s,e){var i=e(9660),r=e(9662),n=e(8289),a=e(402);function o(y,v,m,_){return function(h){return _(y(m(h[0][0],h[1][1]),m(-h[0][1],h[1][0])))}}function u(y,v,m,_){return function(h){return _(y(v(y(m(h[1][1],h[2][2]),m(-h[1][2],h[2][1])),h[0][0]),y(v(y(m(h[1][0],h[2][2]),m(-h[1][2],h[2][0])),-h[0][1]),v(y(m(h[1][0],h[2][1]),m(-h[1][1],h[2][0])),h[0][2]))))}}function p(y,v,m,_){return function(h){return _(y(y(v(y(v(y(m(h[2][2],h[3][3]),m(-h[2][3],h[3][2])),h[1][1]),y(v(y(m(h[2][1],h[3][3]),m(-h[2][3],h[3][1])),-h[1][2]),v(y(m(h[2][1],h[3][2]),m(-h[2][2],h[3][1])),h[1][3]))),h[0][0]),v(y(v(y(m(h[2][2],h[3][3]),m(-h[2][3],h[3][2])),h[1][0]),y(v(y(m(h[2][0],h[3][3]),m(-h[2][3],h[3][0])),-h[1][2]),v(y(m(h[2][0],h[3][2]),m(-h[2][2],h[3][0])),h[1][3]))),-h[0][1])),y(v(y(v(y(m(h[2][1],h[3][3]),m(-h[2][3],h[3][1])),h[1][0]),y(v(y(m(h[2][0],h[3][3]),m(-h[2][3],h[3][0])),-h[1][1]),v(y(m(h[2][0],h[3][1]),m(-h[2][1],h[3][0])),h[1][3]))),h[0][2]),v(y(v(y(m(h[2][1],h[3][2]),m(-h[2][2],h[3][1])),h[1][0]),y(v(y(m(h[2][0],h[3][2]),m(-h[2][2],h[3][0])),-h[1][1]),v(y(m(h[2][0],h[3][1]),m(-h[2][1],h[3][0])),h[1][2]))),-h[0][3]))))}}function c(y,v,m,_){return function(h){return _(y(y(v(y(y(v(y(v(y(m(h[3][3],h[4][4]),m(-h[3][4],h[4][3])),h[2][2]),y(v(y(m(h[3][2],h[4][4]),m(-h[3][4],h[4][2])),-h[2][3]),v(y(m(h[3][2],h[4][3]),m(-h[3][3],h[4][2])),h[2][4]))),h[1][1]),v(y(v(y(m(h[3][3],h[4][4]),m(-h[3][4],h[4][3])),h[2][1]),y(v(y(m(h[3][1],h[4][4]),m(-h[3][4],h[4][1])),-h[2][3]),v(y(m(h[3][1],h[4][3]),m(-h[3][3],h[4][1])),h[2][4]))),-h[1][2])),y(v(y(v(y(m(h[3][2],h[4][4]),m(-h[3][4],h[4][2])),h[2][1]),y(v(y(m(h[3][1],h[4][4]),m(-h[3][4],h[4][1])),-h[2][2]),v(y(m(h[3][1],h[4][2]),m(-h[3][2],h[4][1])),h[2][4]))),h[1][3]),v(y(v(y(m(h[3][2],h[4][3]),m(-h[3][3],h[4][2])),h[2][1]),y(v(y(m(h[3][1],h[4][3]),m(-h[3][3],h[4][1])),-h[2][2]),v(y(m(h[3][1],h[4][2]),m(-h[3][2],h[4][1])),h[2][3]))),-h[1][4]))),h[0][0]),v(y(y(v(y(v(y(m(h[3][3],h[4][4]),m(-h[3][4],h[4][3])),h[2][2]),y(v(y(m(h[3][2],h[4][4]),m(-h[3][4],h[4][2])),-h[2][3]),v(y(m(h[3][2],h[4][3]),m(-h[3][3],h[4][2])),h[2][4]))),h[1][0]),v(y(v(y(m(h[3][3],h[4][4]),m(-h[3][4],h[4][3])),h[2][0]),y(v(y(m(h[3][0],h[4][4]),m(-h[3][4],h[4][0])),-h[2][3]),v(y(m(h[3][0],h[4][3]),m(-h[3][3],h[4][0])),h[2][4]))),-h[1][2])),y(v(y(v(y(m(h[3][2],h[4][4]),m(-h[3][4],h[4][2])),h[2][0]),y(v(y(m(h[3][0],h[4][4]),m(-h[3][4],h[4][0])),-h[2][2]),v(y(m(h[3][0],h[4][2]),m(-h[3][2],h[4][0])),h[2][4]))),h[1][3]),v(y(v(y(m(h[3][2],h[4][3]),m(-h[3][3],h[4][2])),h[2][0]),y(v(y(m(h[3][0],h[4][3]),m(-h[3][3],h[4][0])),-h[2][2]),v(y(m(h[3][0],h[4][2]),m(-h[3][2],h[4][0])),h[2][3]))),-h[1][4]))),-h[0][1])),y(v(y(y(v(y(v(y(m(h[3][3],h[4][4]),m(-h[3][4],h[4][3])),h[2][1]),y(v(y(m(h[3][1],h[4][4]),m(-h[3][4],h[4][1])),-h[2][3]),v(y(m(h[3][1],h[4][3]),m(-h[3][3],h[4][1])),h[2][4]))),h[1][0]),v(y(v(y(m(h[3][3],h[4][4]),m(-h[3][4],h[4][3])),h[2][0]),y(v(y(m(h[3][0],h[4][4]),m(-h[3][4],h[4][0])),-h[2][3]),v(y(m(h[3][0],h[4][3]),m(-h[3][3],h[4][0])),h[2][4]))),-h[1][1])),y(v(y(v(y(m(h[3][1],h[4][4]),m(-h[3][4],h[4][1])),h[2][0]),y(v(y(m(h[3][0],h[4][4]),m(-h[3][4],h[4][0])),-h[2][1]),v(y(m(h[3][0],h[4][1]),m(-h[3][1],h[4][0])),h[2][4]))),h[1][3]),v(y(v(y(m(h[3][1],h[4][3]),m(-h[3][3],h[4][1])),h[2][0]),y(v(y(m(h[3][0],h[4][3]),m(-h[3][3],h[4][0])),-h[2][1]),v(y(m(h[3][0],h[4][1]),m(-h[3][1],h[4][0])),h[2][3]))),-h[1][4]))),h[0][2]),y(v(y(y(v(y(v(y(m(h[3][2],h[4][4]),m(-h[3][4],h[4][2])),h[2][1]),y(v(y(m(h[3][1],h[4][4]),m(-h[3][4],h[4][1])),-h[2][2]),v(y(m(h[3][1],h[4][2]),m(-h[3][2],h[4][1])),h[2][4]))),h[1][0]),v(y(v(y(m(h[3][2],h[4][4]),m(-h[3][4],h[4][2])),h[2][0]),y(v(y(m(h[3][0],h[4][4]),m(-h[3][4],h[4][0])),-h[2][2]),v(y(m(h[3][0],h[4][2]),m(-h[3][2],h[4][0])),h[2][4]))),-h[1][1])),y(v(y(v(y(m(h[3][1],h[4][4]),m(-h[3][4],h[4][1])),h[2][0]),y(v(y(m(h[3][0],h[4][4]),m(-h[3][4],h[4][0])),-h[2][1]),v(y(m(h[3][0],h[4][1]),m(-h[3][1],h[4][0])),h[2][4]))),h[1][2]),v(y(v(y(m(h[3][1],h[4][2]),m(-h[3][2],h[4][1])),h[2][0]),y(v(y(m(h[3][0],h[4][2]),m(-h[3][2],h[4][0])),-h[2][1]),v(y(m(h[3][0],h[4][1]),m(-h[3][1],h[4][0])),h[2][2]))),-h[1][4]))),-h[0][3]),v(y(y(v(y(v(y(m(h[3][2],h[4][3]),m(-h[3][3],h[4][2])),h[2][1]),y(v(y(m(h[3][1],h[4][3]),m(-h[3][3],h[4][1])),-h[2][2]),v(y(m(h[3][1],h[4][2]),m(-h[3][2],h[4][1])),h[2][3]))),h[1][0]),v(y(v(y(m(h[3][2],h[4][3]),m(-h[3][3],h[4][2])),h[2][0]),y(v(y(m(h[3][0],h[4][3]),m(-h[3][3],h[4][0])),-h[2][2]),v(y(m(h[3][0],h[4][2]),m(-h[3][2],h[4][0])),h[2][3]))),-h[1][1])),y(v(y(v(y(m(h[3][1],h[4][3]),m(-h[3][3],h[4][1])),h[2][0]),y(v(y(m(h[3][0],h[4][3]),m(-h[3][3],h[4][0])),-h[2][1]),v(y(m(h[3][0],h[4][1]),m(-h[3][1],h[4][0])),h[2][3]))),h[1][2]),v(y(v(y(m(h[3][1],h[4][2]),m(-h[3][2],h[4][1])),h[2][0]),y(v(y(m(h[3][0],h[4][2]),m(-h[3][2],h[4][0])),-h[2][1]),v(y(m(h[3][0],h[4][1]),m(-h[3][1],h[4][0])),h[2][2]))),-h[1][3]))),h[0][4])))))}}function x(y){return(y===2?o:y===3?u:y===4?p:y===5?c:void 0)(r,n,i,a)}var g=[function(){return[0]},function(y){return[y[0][0]]}];function f(y,v,m,_,h,A,w,E){return function(L){switch(L.length){case 0:return y(L);case 1:return v(L);case 2:return m(L);case 3:return _(L);case 4:return h(L);case 5:return A(L)}var C=w[L.length];return C||(C=w[L.length]=E(L.length)),C(L)}}(function(){for(;g.length<6;)g.push(x(g.length));d.exports=f.apply(void 0,g.concat([g,x]));for(var y=0;y<g.length;++y)d.exports[y]=g[y]})()},9130:function(d,s,e){var i=e(9660),r=e(9662);d.exports=function(n,a){for(var o=i(n[0],a[0]),u=1;u<n.length;++u)o=r(o,i(n[u],a[u]));return o}},2227:function(d,s,e){var i=e(9660),r=e(9662),n=e(4078),a=e(8289);function o(v){return(v===3?u:v===4?p:v===5?c:x)(r,n,i,a)}function u(v,m,_,h){return function(A,w,E){var L=_(A[0],A[0]),C=h(L,w[0]),P=h(L,E[0]),D=_(w[0],w[0]),G=h(D,A[0]),I=h(D,E[0]),H=_(E[0],E[0]),N=h(H,A[0]),F=h(H,w[0]),V=v(m(F,I),m(G,C)),q=m(N,P),te=m(V,q);return te[te.length-1]}}function p(v,m,_,h){return function(A,w,E,L){var C=v(_(A[0],A[0]),_(A[1],A[1])),P=h(C,w[0]),D=h(C,E[0]),G=h(C,L[0]),I=v(_(w[0],w[0]),_(w[1],w[1])),H=h(I,A[0]),N=h(I,E[0]),F=h(I,L[0]),V=v(_(E[0],E[0]),_(E[1],E[1])),q=h(V,A[0]),te=h(V,w[0]),$=h(V,L[0]),W=v(_(L[0],L[0]),_(L[1],L[1])),Z=h(W,A[0]),J=h(W,w[0]),ee=h(W,E[0]),re=v(v(h(m(ee,$),w[1]),v(h(m(J,F),-E[1]),h(m(te,N),L[1]))),v(h(m(J,F),A[1]),v(h(m(Z,G),-w[1]),h(m(H,P),L[1])))),ae=v(v(h(m(ee,$),A[1]),v(h(m(Z,G),-E[1]),h(m(q,D),L[1]))),v(h(m(te,N),A[1]),v(h(m(q,D),-w[1]),h(m(H,P),E[1])))),oe=m(re,ae);return oe[oe.length-1]}}function c(v,m,_,h){return function(A,w,E,L,C){var P=v(_(A[0],A[0]),v(_(A[1],A[1]),_(A[2],A[2]))),D=h(P,w[0]),G=h(P,E[0]),I=h(P,L[0]),H=h(P,C[0]),N=v(_(w[0],w[0]),v(_(w[1],w[1]),_(w[2],w[2]))),F=h(N,A[0]),V=h(N,E[0]),q=h(N,L[0]),te=h(N,C[0]),$=v(_(E[0],E[0]),v(_(E[1],E[1]),_(E[2],E[2]))),W=h($,A[0]),Z=h($,w[0]),J=h($,L[0]),ee=h($,C[0]),re=v(_(L[0],L[0]),v(_(L[1],L[1]),_(L[2],L[2]))),ae=h(re,A[0]),oe=h(re,w[0]),ce=h(re,E[0]),pe=h(re,C[0]),ve=v(_(C[0],C[0]),v(_(C[1],C[1]),_(C[2],C[2]))),we=h(ve,A[0]),xe=h(ve,w[0]),ge=h(ve,E[0]),Oe=h(ve,L[0]),Ae=v(v(v(h(v(h(m(Oe,pe),E[1]),v(h(m(ge,ee),-L[1]),h(m(ce,J),C[1]))),w[2]),v(h(v(h(m(Oe,pe),w[1]),v(h(m(xe,te),-L[1]),h(m(oe,q),C[1]))),-E[2]),h(v(h(m(ge,ee),w[1]),v(h(m(xe,te),-E[1]),h(m(Z,V),C[1]))),L[2]))),v(h(v(h(m(ce,J),w[1]),v(h(m(oe,q),-E[1]),h(m(Z,V),L[1]))),-C[2]),v(h(v(h(m(Oe,pe),w[1]),v(h(m(xe,te),-L[1]),h(m(oe,q),C[1]))),A[2]),h(v(h(m(Oe,pe),A[1]),v(h(m(we,H),-L[1]),h(m(ae,I),C[1]))),-w[2])))),v(v(h(v(h(m(xe,te),A[1]),v(h(m(we,H),-w[1]),h(m(F,D),C[1]))),L[2]),v(h(v(h(m(oe,q),A[1]),v(h(m(ae,I),-w[1]),h(m(F,D),L[1]))),-C[2]),h(v(h(m(ce,J),w[1]),v(h(m(oe,q),-E[1]),h(m(Z,V),L[1]))),A[2]))),v(h(v(h(m(ce,J),A[1]),v(h(m(ae,I),-E[1]),h(m(W,G),L[1]))),-w[2]),v(h(v(h(m(oe,q),A[1]),v(h(m(ae,I),-w[1]),h(m(F,D),L[1]))),E[2]),h(v(h(m(Z,V),A[1]),v(h(m(W,G),-w[1]),h(m(F,D),E[1]))),-L[2]))))),Te=v(v(v(h(v(h(m(Oe,pe),E[1]),v(h(m(ge,ee),-L[1]),h(m(ce,J),C[1]))),A[2]),h(v(h(m(Oe,pe),A[1]),v(h(m(we,H),-L[1]),h(m(ae,I),C[1]))),-E[2])),v(h(v(h(m(ge,ee),A[1]),v(h(m(we,H),-E[1]),h(m(W,G),C[1]))),L[2]),h(v(h(m(ce,J),A[1]),v(h(m(ae,I),-E[1]),h(m(W,G),L[1]))),-C[2]))),v(v(h(v(h(m(ge,ee),w[1]),v(h(m(xe,te),-E[1]),h(m(Z,V),C[1]))),A[2]),h(v(h(m(ge,ee),A[1]),v(h(m(we,H),-E[1]),h(m(W,G),C[1]))),-w[2])),v(h(v(h(m(xe,te),A[1]),v(h(m(we,H),-w[1]),h(m(F,D),C[1]))),E[2]),h(v(h(m(Z,V),A[1]),v(h(m(W,G),-w[1]),h(m(F,D),E[1]))),-C[2])))),se=m(Ae,Te);return se[se.length-1]}}function x(v,m,_,h){return function(A,w,E,L,C,P){var D=v(v(_(A[0],A[0]),_(A[1],A[1])),v(_(A[2],A[2]),_(A[3],A[3]))),G=h(D,w[0]),I=h(D,E[0]),H=h(D,L[0]),N=h(D,C[0]),F=h(D,P[0]),V=v(v(_(w[0],w[0]),_(w[1],w[1])),v(_(w[2],w[2]),_(w[3],w[3]))),q=h(V,A[0]),te=h(V,E[0]),$=h(V,L[0]),W=h(V,C[0]),Z=h(V,P[0]),J=v(v(_(E[0],E[0]),_(E[1],E[1])),v(_(E[2],E[2]),_(E[3],E[3]))),ee=h(J,A[0]),re=h(J,w[0]),ae=h(J,L[0]),oe=h(J,C[0]),ce=h(J,P[0]),pe=v(v(_(L[0],L[0]),_(L[1],L[1])),v(_(L[2],L[2]),_(L[3],L[3]))),ve=h(pe,A[0]),we=h(pe,w[0]),xe=h(pe,E[0]),ge=h(pe,C[0]),Oe=h(pe,P[0]),Ae=v(v(_(C[0],C[0]),_(C[1],C[1])),v(_(C[2],C[2]),_(C[3],C[3]))),Te=h(Ae,A[0]),se=h(Ae,w[0]),le=h(Ae,E[0]),ne=h(Ae,L[0]),me=h(Ae,P[0]),Ee=v(v(_(P[0],P[0]),_(P[1],P[1])),v(_(P[2],P[2]),_(P[3],P[3]))),be=h(Ee,A[0]),De=h(Ee,w[0]),Ue=h(Ee,E[0]),he=h(Ee,L[0]),ke=h(Ee,C[0]),_e=v(v(v(h(v(v(h(v(h(m(ke,me),L[1]),v(h(m(he,Oe),-C[1]),h(m(ne,ge),P[1]))),E[2]),h(v(h(m(ke,me),E[1]),v(h(m(Ue,ce),-C[1]),h(m(le,oe),P[1]))),-L[2])),v(h(v(h(m(he,Oe),E[1]),v(h(m(Ue,ce),-L[1]),h(m(xe,ae),P[1]))),C[2]),h(v(h(m(ne,ge),E[1]),v(h(m(le,oe),-L[1]),h(m(xe,ae),C[1]))),-P[2]))),w[3]),v(h(v(v(h(v(h(m(ke,me),L[1]),v(h(m(he,Oe),-C[1]),h(m(ne,ge),P[1]))),w[2]),h(v(h(m(ke,me),w[1]),v(h(m(De,Z),-C[1]),h(m(se,W),P[1]))),-L[2])),v(h(v(h(m(he,Oe),w[1]),v(h(m(De,Z),-L[1]),h(m(we,$),P[1]))),C[2]),h(v(h(m(ne,ge),w[1]),v(h(m(se,W),-L[1]),h(m(we,$),C[1]))),-P[2]))),-E[3]),h(v(v(h(v(h(m(ke,me),E[1]),v(h(m(Ue,ce),-C[1]),h(m(le,oe),P[1]))),w[2]),h(v(h(m(ke,me),w[1]),v(h(m(De,Z),-C[1]),h(m(se,W),P[1]))),-E[2])),v(h(v(h(m(Ue,ce),w[1]),v(h(m(De,Z),-E[1]),h(m(re,te),P[1]))),C[2]),h(v(h(m(le,oe),w[1]),v(h(m(se,W),-E[1]),h(m(re,te),C[1]))),-P[2]))),L[3]))),v(v(h(v(v(h(v(h(m(he,Oe),E[1]),v(h(m(Ue,ce),-L[1]),h(m(xe,ae),P[1]))),w[2]),h(v(h(m(he,Oe),w[1]),v(h(m(De,Z),-L[1]),h(m(we,$),P[1]))),-E[2])),v(h(v(h(m(Ue,ce),w[1]),v(h(m(De,Z),-E[1]),h(m(re,te),P[1]))),L[2]),h(v(h(m(xe,ae),w[1]),v(h(m(we,$),-E[1]),h(m(re,te),L[1]))),-P[2]))),-C[3]),h(v(v(h(v(h(m(ne,ge),E[1]),v(h(m(le,oe),-L[1]),h(m(xe,ae),C[1]))),w[2]),h(v(h(m(ne,ge),w[1]),v(h(m(se,W),-L[1]),h(m(we,$),C[1]))),-E[2])),v(h(v(h(m(le,oe),w[1]),v(h(m(se,W),-E[1]),h(m(re,te),C[1]))),L[2]),h(v(h(m(xe,ae),w[1]),v(h(m(we,$),-E[1]),h(m(re,te),L[1]))),-C[2]))),P[3])),v(h(v(v(h(v(h(m(ke,me),L[1]),v(h(m(he,Oe),-C[1]),h(m(ne,ge),P[1]))),w[2]),h(v(h(m(ke,me),w[1]),v(h(m(De,Z),-C[1]),h(m(se,W),P[1]))),-L[2])),v(h(v(h(m(he,Oe),w[1]),v(h(m(De,Z),-L[1]),h(m(we,$),P[1]))),C[2]),h(v(h(m(ne,ge),w[1]),v(h(m(se,W),-L[1]),h(m(we,$),C[1]))),-P[2]))),A[3]),h(v(v(h(v(h(m(ke,me),L[1]),v(h(m(he,Oe),-C[1]),h(m(ne,ge),P[1]))),A[2]),h(v(h(m(ke,me),A[1]),v(h(m(be,F),-C[1]),h(m(Te,N),P[1]))),-L[2])),v(h(v(h(m(he,Oe),A[1]),v(h(m(be,F),-L[1]),h(m(ve,H),P[1]))),C[2]),h(v(h(m(ne,ge),A[1]),v(h(m(Te,N),-L[1]),h(m(ve,H),C[1]))),-P[2]))),-w[3])))),v(v(v(h(v(v(h(v(h(m(ke,me),w[1]),v(h(m(De,Z),-C[1]),h(m(se,W),P[1]))),A[2]),h(v(h(m(ke,me),A[1]),v(h(m(be,F),-C[1]),h(m(Te,N),P[1]))),-w[2])),v(h(v(h(m(De,Z),A[1]),v(h(m(be,F),-w[1]),h(m(q,G),P[1]))),C[2]),h(v(h(m(se,W),A[1]),v(h(m(Te,N),-w[1]),h(m(q,G),C[1]))),-P[2]))),L[3]),h(v(v(h(v(h(m(he,Oe),w[1]),v(h(m(De,Z),-L[1]),h(m(we,$),P[1]))),A[2]),h(v(h(m(he,Oe),A[1]),v(h(m(be,F),-L[1]),h(m(ve,H),P[1]))),-w[2])),v(h(v(h(m(De,Z),A[1]),v(h(m(be,F),-w[1]),h(m(q,G),P[1]))),L[2]),h(v(h(m(we,$),A[1]),v(h(m(ve,H),-w[1]),h(m(q,G),L[1]))),-P[2]))),-C[3])),v(h(v(v(h(v(h(m(ne,ge),w[1]),v(h(m(se,W),-L[1]),h(m(we,$),C[1]))),A[2]),h(v(h(m(ne,ge),A[1]),v(h(m(Te,N),-L[1]),h(m(ve,H),C[1]))),-w[2])),v(h(v(h(m(se,W),A[1]),v(h(m(Te,N),-w[1]),h(m(q,G),C[1]))),L[2]),h(v(h(m(we,$),A[1]),v(h(m(ve,H),-w[1]),h(m(q,G),L[1]))),-C[2]))),P[3]),h(v(v(h(v(h(m(he,Oe),E[1]),v(h(m(Ue,ce),-L[1]),h(m(xe,ae),P[1]))),w[2]),h(v(h(m(he,Oe),w[1]),v(h(m(De,Z),-L[1]),h(m(we,$),P[1]))),-E[2])),v(h(v(h(m(Ue,ce),w[1]),v(h(m(De,Z),-E[1]),h(m(re,te),P[1]))),L[2]),h(v(h(m(xe,ae),w[1]),v(h(m(we,$),-E[1]),h(m(re,te),L[1]))),-P[2]))),A[3]))),v(v(h(v(v(h(v(h(m(he,Oe),E[1]),v(h(m(Ue,ce),-L[1]),h(m(xe,ae),P[1]))),A[2]),h(v(h(m(he,Oe),A[1]),v(h(m(be,F),-L[1]),h(m(ve,H),P[1]))),-E[2])),v(h(v(h(m(Ue,ce),A[1]),v(h(m(be,F),-E[1]),h(m(ee,I),P[1]))),L[2]),h(v(h(m(xe,ae),A[1]),v(h(m(ve,H),-E[1]),h(m(ee,I),L[1]))),-P[2]))),-w[3]),h(v(v(h(v(h(m(he,Oe),w[1]),v(h(m(De,Z),-L[1]),h(m(we,$),P[1]))),A[2]),h(v(h(m(he,Oe),A[1]),v(h(m(be,F),-L[1]),h(m(ve,H),P[1]))),-w[2])),v(h(v(h(m(De,Z),A[1]),v(h(m(be,F),-w[1]),h(m(q,G),P[1]))),L[2]),h(v(h(m(we,$),A[1]),v(h(m(ve,H),-w[1]),h(m(q,G),L[1]))),-P[2]))),E[3])),v(h(v(v(h(v(h(m(Ue,ce),w[1]),v(h(m(De,Z),-E[1]),h(m(re,te),P[1]))),A[2]),h(v(h(m(Ue,ce),A[1]),v(h(m(be,F),-E[1]),h(m(ee,I),P[1]))),-w[2])),v(h(v(h(m(De,Z),A[1]),v(h(m(be,F),-w[1]),h(m(q,G),P[1]))),E[2]),h(v(h(m(re,te),A[1]),v(h(m(ee,I),-w[1]),h(m(q,G),E[1]))),-P[2]))),-L[3]),h(v(v(h(v(h(m(xe,ae),w[1]),v(h(m(we,$),-E[1]),h(m(re,te),L[1]))),A[2]),h(v(h(m(xe,ae),A[1]),v(h(m(ve,H),-E[1]),h(m(ee,I),L[1]))),-w[2])),v(h(v(h(m(we,$),A[1]),v(h(m(ve,H),-w[1]),h(m(q,G),L[1]))),E[2]),h(v(h(m(re,te),A[1]),v(h(m(ee,I),-w[1]),h(m(q,G),E[1]))),-L[2]))),P[3]))))),Ce=v(v(v(h(v(v(h(v(h(m(ke,me),L[1]),v(h(m(he,Oe),-C[1]),h(m(ne,ge),P[1]))),E[2]),h(v(h(m(ke,me),E[1]),v(h(m(Ue,ce),-C[1]),h(m(le,oe),P[1]))),-L[2])),v(h(v(h(m(he,Oe),E[1]),v(h(m(Ue,ce),-L[1]),h(m(xe,ae),P[1]))),C[2]),h(v(h(m(ne,ge),E[1]),v(h(m(le,oe),-L[1]),h(m(xe,ae),C[1]))),-P[2]))),A[3]),v(h(v(v(h(v(h(m(ke,me),L[1]),v(h(m(he,Oe),-C[1]),h(m(ne,ge),P[1]))),A[2]),h(v(h(m(ke,me),A[1]),v(h(m(be,F),-C[1]),h(m(Te,N),P[1]))),-L[2])),v(h(v(h(m(he,Oe),A[1]),v(h(m(be,F),-L[1]),h(m(ve,H),P[1]))),C[2]),h(v(h(m(ne,ge),A[1]),v(h(m(Te,N),-L[1]),h(m(ve,H),C[1]))),-P[2]))),-E[3]),h(v(v(h(v(h(m(ke,me),E[1]),v(h(m(Ue,ce),-C[1]),h(m(le,oe),P[1]))),A[2]),h(v(h(m(ke,me),A[1]),v(h(m(be,F),-C[1]),h(m(Te,N),P[1]))),-E[2])),v(h(v(h(m(Ue,ce),A[1]),v(h(m(be,F),-E[1]),h(m(ee,I),P[1]))),C[2]),h(v(h(m(le,oe),A[1]),v(h(m(Te,N),-E[1]),h(m(ee,I),C[1]))),-P[2]))),L[3]))),v(v(h(v(v(h(v(h(m(he,Oe),E[1]),v(h(m(Ue,ce),-L[1]),h(m(xe,ae),P[1]))),A[2]),h(v(h(m(he,Oe),A[1]),v(h(m(be,F),-L[1]),h(m(ve,H),P[1]))),-E[2])),v(h(v(h(m(Ue,ce),A[1]),v(h(m(be,F),-E[1]),h(m(ee,I),P[1]))),L[2]),h(v(h(m(xe,ae),A[1]),v(h(m(ve,H),-E[1]),h(m(ee,I),L[1]))),-P[2]))),-C[3]),h(v(v(h(v(h(m(ne,ge),E[1]),v(h(m(le,oe),-L[1]),h(m(xe,ae),C[1]))),A[2]),h(v(h(m(ne,ge),A[1]),v(h(m(Te,N),-L[1]),h(m(ve,H),C[1]))),-E[2])),v(h(v(h(m(le,oe),A[1]),v(h(m(Te,N),-E[1]),h(m(ee,I),C[1]))),L[2]),h(v(h(m(xe,ae),A[1]),v(h(m(ve,H),-E[1]),h(m(ee,I),L[1]))),-C[2]))),P[3])),v(h(v(v(h(v(h(m(ke,me),E[1]),v(h(m(Ue,ce),-C[1]),h(m(le,oe),P[1]))),w[2]),h(v(h(m(ke,me),w[1]),v(h(m(De,Z),-C[1]),h(m(se,W),P[1]))),-E[2])),v(h(v(h(m(Ue,ce),w[1]),v(h(m(De,Z),-E[1]),h(m(re,te),P[1]))),C[2]),h(v(h(m(le,oe),w[1]),v(h(m(se,W),-E[1]),h(m(re,te),C[1]))),-P[2]))),A[3]),h(v(v(h(v(h(m(ke,me),E[1]),v(h(m(Ue,ce),-C[1]),h(m(le,oe),P[1]))),A[2]),h(v(h(m(ke,me),A[1]),v(h(m(be,F),-C[1]),h(m(Te,N),P[1]))),-E[2])),v(h(v(h(m(Ue,ce),A[1]),v(h(m(be,F),-E[1]),h(m(ee,I),P[1]))),C[2]),h(v(h(m(le,oe),A[1]),v(h(m(Te,N),-E[1]),h(m(ee,I),C[1]))),-P[2]))),-w[3])))),v(v(v(h(v(v(h(v(h(m(ke,me),w[1]),v(h(m(De,Z),-C[1]),h(m(se,W),P[1]))),A[2]),h(v(h(m(ke,me),A[1]),v(h(m(be,F),-C[1]),h(m(Te,N),P[1]))),-w[2])),v(h(v(h(m(De,Z),A[1]),v(h(m(be,F),-w[1]),h(m(q,G),P[1]))),C[2]),h(v(h(m(se,W),A[1]),v(h(m(Te,N),-w[1]),h(m(q,G),C[1]))),-P[2]))),E[3]),h(v(v(h(v(h(m(Ue,ce),w[1]),v(h(m(De,Z),-E[1]),h(m(re,te),P[1]))),A[2]),h(v(h(m(Ue,ce),A[1]),v(h(m(be,F),-E[1]),h(m(ee,I),P[1]))),-w[2])),v(h(v(h(m(De,Z),A[1]),v(h(m(be,F),-w[1]),h(m(q,G),P[1]))),E[2]),h(v(h(m(re,te),A[1]),v(h(m(ee,I),-w[1]),h(m(q,G),E[1]))),-P[2]))),-C[3])),v(h(v(v(h(v(h(m(le,oe),w[1]),v(h(m(se,W),-E[1]),h(m(re,te),C[1]))),A[2]),h(v(h(m(le,oe),A[1]),v(h(m(Te,N),-E[1]),h(m(ee,I),C[1]))),-w[2])),v(h(v(h(m(se,W),A[1]),v(h(m(Te,N),-w[1]),h(m(q,G),C[1]))),E[2]),h(v(h(m(re,te),A[1]),v(h(m(ee,I),-w[1]),h(m(q,G),E[1]))),-C[2]))),P[3]),h(v(v(h(v(h(m(ne,ge),E[1]),v(h(m(le,oe),-L[1]),h(m(xe,ae),C[1]))),w[2]),h(v(h(m(ne,ge),w[1]),v(h(m(se,W),-L[1]),h(m(we,$),C[1]))),-E[2])),v(h(v(h(m(le,oe),w[1]),v(h(m(se,W),-E[1]),h(m(re,te),C[1]))),L[2]),h(v(h(m(xe,ae),w[1]),v(h(m(we,$),-E[1]),h(m(re,te),L[1]))),-C[2]))),A[3]))),v(v(h(v(v(h(v(h(m(ne,ge),E[1]),v(h(m(le,oe),-L[1]),h(m(xe,ae),C[1]))),A[2]),h(v(h(m(ne,ge),A[1]),v(h(m(Te,N),-L[1]),h(m(ve,H),C[1]))),-E[2])),v(h(v(h(m(le,oe),A[1]),v(h(m(Te,N),-E[1]),h(m(ee,I),C[1]))),L[2]),h(v(h(m(xe,ae),A[1]),v(h(m(ve,H),-E[1]),h(m(ee,I),L[1]))),-C[2]))),-w[3]),h(v(v(h(v(h(m(ne,ge),w[1]),v(h(m(se,W),-L[1]),h(m(we,$),C[1]))),A[2]),h(v(h(m(ne,ge),A[1]),v(h(m(Te,N),-L[1]),h(m(ve,H),C[1]))),-w[2])),v(h(v(h(m(se,W),A[1]),v(h(m(Te,N),-w[1]),h(m(q,G),C[1]))),L[2]),h(v(h(m(we,$),A[1]),v(h(m(ve,H),-w[1]),h(m(q,G),L[1]))),-C[2]))),E[3])),v(h(v(v(h(v(h(m(le,oe),w[1]),v(h(m(se,W),-E[1]),h(m(re,te),C[1]))),A[2]),h(v(h(m(le,oe),A[1]),v(h(m(Te,N),-E[1]),h(m(ee,I),C[1]))),-w[2])),v(h(v(h(m(se,W),A[1]),v(h(m(Te,N),-w[1]),h(m(q,G),C[1]))),E[2]),h(v(h(m(re,te),A[1]),v(h(m(ee,I),-w[1]),h(m(q,G),E[1]))),-C[2]))),-L[3]),h(v(v(h(v(h(m(xe,ae),w[1]),v(h(m(we,$),-E[1]),h(m(re,te),L[1]))),A[2]),h(v(h(m(xe,ae),A[1]),v(h(m(ve,H),-E[1]),h(m(ee,I),L[1]))),-w[2])),v(h(v(h(m(we,$),A[1]),v(h(m(ve,H),-w[1]),h(m(q,G),L[1]))),E[2]),h(v(h(m(re,te),A[1]),v(h(m(ee,I),-w[1]),h(m(q,G),E[1]))),-L[2]))),C[3]))))),Fe=m(_e,Ce);return Fe[Fe.length-1]}}var g=[function(){return 0},function(){return 0},function(){return 0}];function f(v){var m=g[v.length];return m||(m=g[v.length]=o(v.length)),m.apply(void 0,v)}function y(v,m,_,h,A,w,E,L){return function(C,P,D,G,I,H){switch(arguments.length){case 0:case 1:return 0;case 2:return h(C,P);case 3:return A(C,P,D);case 4:return w(C,P,D,G);case 5:return E(C,P,D,G,I);case 6:return L(C,P,D,G,I,H)}for(var N=new Array(arguments.length),F=0;F<arguments.length;++F)N[F]=arguments[F];return v(N)}}(function(){for(;g.length<=6;)g.push(o(g.length));d.exports=y.apply(void 0,[f].concat(g));for(var v=0;v<=6;++v)d.exports[v]=g[v]})()},6606:function(d,s,e){var i=e(8167);function r(g){return(g===2?n:g===3?a:g===4?o:g===5?u:p)(g<6?i[g]:i)}function n(g){return function(f,y){return[g([[+y[0],+f[0][1]],[+y[1],+f[1][1]]]),g([[+f[0][0],+y[0]],[+f[1][0],+y[1]]]),g(f)]}}function a(g){return function(f,y){return[g([[+y[0],+f[0][1],+f[0][2]],[+y[1],+f[1][1],+f[1][2]],[+y[2],+f[2][1],+f[2][2]]]),g([[+f[0][0],+y[0],+f[0][2]],[+f[1][0],+y[1],+f[1][2]],[+f[2][0],+y[2],+f[2][2]]]),g([[+f[0][0],+f[0][1],+y[0]],[+f[1][0],+f[1][1],+y[1]],[+f[2][0],+f[2][1],+y[2]]]),g(f)]}}function o(g){return function(f,y){return[g([[+y[0],+f[0][1],+f[0][2],+f[0][3]],[+y[1],+f[1][1],+f[1][2],+f[1][3]],[+y[2],+f[2][1],+f[2][2],+f[2][3]],[+y[3],+f[3][1],+f[3][2],+f[3][3]]]),g([[+f[0][0],+y[0],+f[0][2],+f[0][3]],[+f[1][0],+y[1],+f[1][2],+f[1][3]],[+f[2][0],+y[2],+f[2][2],+f[2][3]],[+f[3][0],+y[3],+f[3][2],+f[3][3]]]),g([[+f[0][0],+f[0][1],+y[0],+f[0][3]],[+f[1][0],+f[1][1],+y[1],+f[1][3]],[+f[2][0],+f[2][1],+y[2],+f[2][3]],[+f[3][0],+f[3][1],+y[3],+f[3][3]]]),g([[+f[0][0],+f[0][1],+f[0][2],+y[0]],[+f[1][0],+f[1][1],+f[1][2],+y[1]],[+f[2][0],+f[2][1],+f[2][2],+y[2]],[+f[3][0],+f[3][1],+f[3][2],+y[3]]]),g(f)]}}function u(g){return function(f,y){return[g([[+y[0],+f[0][1],+f[0][2],+f[0][3],+f[0][4]],[+y[1],+f[1][1],+f[1][2],+f[1][3],+f[1][4]],[+y[2],+f[2][1],+f[2][2],+f[2][3],+f[2][4]],[+y[3],+f[3][1],+f[3][2],+f[3][3],+f[3][4]],[+y[4],+f[4][1],+f[4][2],+f[4][3],+f[4][4]]]),g([[+f[0][0],+y[0],+f[0][2],+f[0][3],+f[0][4]],[+f[1][0],+y[1],+f[1][2],+f[1][3],+f[1][4]],[+f[2][0],+y[2],+f[2][2],+f[2][3],+f[2][4]],[+f[3][0],+y[3],+f[3][2],+f[3][3],+f[3][4]],[+f[4][0],+y[4],+f[4][2],+f[4][3],+f[4][4]]]),g([[+f[0][0],+f[0][1],+y[0],+f[0][3],+f[0][4]],[+f[1][0],+f[1][1],+y[1],+f[1][3],+f[1][4]],[+f[2][0],+f[2][1],+y[2],+f[2][3],+f[2][4]],[+f[3][0],+f[3][1],+y[3],+f[3][3],+f[3][4]],[+f[4][0],+f[4][1],+y[4],+f[4][3],+f[4][4]]]),g([[+f[0][0],+f[0][1],+f[0][2],+y[0],+f[0][4]],[+f[1][0],+f[1][1],+f[1][2],+y[1],+f[1][4]],[+f[2][0],+f[2][1],+f[2][2],+y[2],+f[2][4]],[+f[3][0],+f[3][1],+f[3][2],+y[3],+f[3][4]],[+f[4][0],+f[4][1],+f[4][2],+y[4],+f[4][4]]]),g([[+f[0][0],+f[0][1],+f[0][2],+f[0][3],+y[0]],[+f[1][0],+f[1][1],+f[1][2],+f[1][3],+y[1]],[+f[2][0],+f[2][1],+f[2][2],+f[2][3],+y[2]],[+f[3][0],+f[3][1],+f[3][2],+f[3][3],+y[3]],[+f[4][0],+f[4][1],+f[4][2],+f[4][3],+y[4]]]),g(f)]}}function p(g){return function(f,y){return[g([[+y[0],+f[0][1],+f[0][2],+f[0][3],+f[0][4],+f[0][5]],[+y[1],+f[1][1],+f[1][2],+f[1][3],+f[1][4],+f[1][5]],[+y[2],+f[2][1],+f[2][2],+f[2][3],+f[2][4],+f[2][5]],[+y[3],+f[3][1],+f[3][2],+f[3][3],+f[3][4],+f[3][5]],[+y[4],+f[4][1],+f[4][2],+f[4][3],+f[4][4],+f[4][5]],[+y[5],+f[5][1],+f[5][2],+f[5][3],+f[5][4],+f[5][5]]]),g([[+f[0][0],+y[0],+f[0][2],+f[0][3],+f[0][4],+f[0][5]],[+f[1][0],+y[1],+f[1][2],+f[1][3],+f[1][4],+f[1][5]],[+f[2][0],+y[2],+f[2][2],+f[2][3],+f[2][4],+f[2][5]],[+f[3][0],+y[3],+f[3][2],+f[3][3],+f[3][4],+f[3][5]],[+f[4][0],+y[4],+f[4][2],+f[4][3],+f[4][4],+f[4][5]],[+f[5][0],+y[5],+f[5][2],+f[5][3],+f[5][4],+f[5][5]]]),g([[+f[0][0],+f[0][1],+y[0],+f[0][3],+f[0][4],+f[0][5]],[+f[1][0],+f[1][1],+y[1],+f[1][3],+f[1][4],+f[1][5]],[+f[2][0],+f[2][1],+y[2],+f[2][3],+f[2][4],+f[2][5]],[+f[3][0],+f[3][1],+y[3],+f[3][3],+f[3][4],+f[3][5]],[+f[4][0],+f[4][1],+y[4],+f[4][3],+f[4][4],+f[4][5]],[+f[5][0],+f[5][1],+y[5],+f[5][3],+f[5][4],+f[5][5]]]),g([[+f[0][0],+f[0][1],+f[0][2],+y[0],+f[0][4],+f[0][5]],[+f[1][0],+f[1][1],+f[1][2],+y[1],+f[1][4],+f[1][5]],[+f[2][0],+f[2][1],+f[2][2],+y[2],+f[2][4],+f[2][5]],[+f[3][0],+f[3][1],+f[3][2],+y[3],+f[3][4],+f[3][5]],[+f[4][0],+f[4][1],+f[4][2],+y[4],+f[4][4],+f[4][5]],[+f[5][0],+f[5][1],+f[5][2],+y[5],+f[5][4],+f[5][5]]]),g([[+f[0][0],+f[0][1],+f[0][2],+f[0][3],+y[0],+f[0][5]],[+f[1][0],+f[1][1],+f[1][2],+f[1][3],+y[1],+f[1][5]],[+f[2][0],+f[2][1],+f[2][2],+f[2][3],+y[2],+f[2][5]],[+f[3][0],+f[3][1],+f[3][2],+f[3][3],+y[3],+f[3][5]],[+f[4][0],+f[4][1],+f[4][2],+f[4][3],+y[4],+f[4][5]],[+f[5][0],+f[5][1],+f[5][2],+f[5][3],+y[5],+f[5][5]]]),g([[+f[0][0],+f[0][1],+f[0][2],+f[0][3],+f[0][4],+y[0]],[+f[1][0],+f[1][1],+f[1][2],+f[1][3],+f[1][4],+y[1]],[+f[2][0],+f[2][1],+f[2][2],+f[2][3],+f[2][4],+y[2]],[+f[3][0],+f[3][1],+f[3][2],+f[3][3],+f[3][4],+y[3]],[+f[4][0],+f[4][1],+f[4][2],+f[4][3],+f[4][4],+y[4]],[+f[5][0],+f[5][1],+f[5][2],+f[5][3],+f[5][4],+y[5]]]),g(f)]}}var c=[function(){return[[0]]},function(g,f){return[[f[0]],[g[0][0]]]}];function x(g,f,y,v,m,_,h,A){return function(w,E){switch(w.length){case 0:return g(w,E);case 1:return f(w,E);case 2:return y(w,E);case 3:return v(w,E);case 4:return m(w,E);case 5:return _(w,E)}var L=h[w.length];return L||(L=h[w.length]=A(w.length)),L(w,E)}}(function(){for(;c.length<6;)c.push(r(c.length));d.exports=x.apply(void 0,c.concat([c,r]));for(var g=0;g<6;++g)d.exports[g]=c[g]})()},417:function(d,s,e){var i=e(9660),r=e(9662),n=e(8289),a=e(4078);function o(m,_,h,A){return function(w,E,L){var C=m(m(_(E[1],L[0]),_(-L[1],E[0])),m(_(w[1],E[0]),_(-E[1],w[0]))),P=m(_(w[1],L[0]),_(-L[1],w[0])),D=A(C,P);return D[D.length-1]}}function u(m,_,h,A){return function(w,E,L,C){var P=m(m(h(m(_(L[1],C[0]),_(-C[1],L[0])),E[2]),m(h(m(_(E[1],C[0]),_(-C[1],E[0])),-L[2]),h(m(_(E[1],L[0]),_(-L[1],E[0])),C[2]))),m(h(m(_(E[1],C[0]),_(-C[1],E[0])),w[2]),m(h(m(_(w[1],C[0]),_(-C[1],w[0])),-E[2]),h(m(_(w[1],E[0]),_(-E[1],w[0])),C[2])))),D=m(m(h(m(_(L[1],C[0]),_(-C[1],L[0])),w[2]),m(h(m(_(w[1],C[0]),_(-C[1],w[0])),-L[2]),h(m(_(w[1],L[0]),_(-L[1],w[0])),C[2]))),m(h(m(_(E[1],L[0]),_(-L[1],E[0])),w[2]),m(h(m(_(w[1],L[0]),_(-L[1],w[0])),-E[2]),h(m(_(w[1],E[0]),_(-E[1],w[0])),L[2])))),G=A(P,D);return G[G.length-1]}}function p(m,_,h,A){return function(w,E,L,C,P){var D=m(m(m(h(m(h(m(_(C[1],P[0]),_(-P[1],C[0])),L[2]),m(h(m(_(L[1],P[0]),_(-P[1],L[0])),-C[2]),h(m(_(L[1],C[0]),_(-C[1],L[0])),P[2]))),E[3]),m(h(m(h(m(_(C[1],P[0]),_(-P[1],C[0])),E[2]),m(h(m(_(E[1],P[0]),_(-P[1],E[0])),-C[2]),h(m(_(E[1],C[0]),_(-C[1],E[0])),P[2]))),-L[3]),h(m(h(m(_(L[1],P[0]),_(-P[1],L[0])),E[2]),m(h(m(_(E[1],P[0]),_(-P[1],E[0])),-L[2]),h(m(_(E[1],L[0]),_(-L[1],E[0])),P[2]))),C[3]))),m(h(m(h(m(_(L[1],C[0]),_(-C[1],L[0])),E[2]),m(h(m(_(E[1],C[0]),_(-C[1],E[0])),-L[2]),h(m(_(E[1],L[0]),_(-L[1],E[0])),C[2]))),-P[3]),m(h(m(h(m(_(C[1],P[0]),_(-P[1],C[0])),E[2]),m(h(m(_(E[1],P[0]),_(-P[1],E[0])),-C[2]),h(m(_(E[1],C[0]),_(-C[1],E[0])),P[2]))),w[3]),h(m(h(m(_(C[1],P[0]),_(-P[1],C[0])),w[2]),m(h(m(_(w[1],P[0]),_(-P[1],w[0])),-C[2]),h(m(_(w[1],C[0]),_(-C[1],w[0])),P[2]))),-E[3])))),m(m(h(m(h(m(_(E[1],P[0]),_(-P[1],E[0])),w[2]),m(h(m(_(w[1],P[0]),_(-P[1],w[0])),-E[2]),h(m(_(w[1],E[0]),_(-E[1],w[0])),P[2]))),C[3]),m(h(m(h(m(_(E[1],C[0]),_(-C[1],E[0])),w[2]),m(h(m(_(w[1],C[0]),_(-C[1],w[0])),-E[2]),h(m(_(w[1],E[0]),_(-E[1],w[0])),C[2]))),-P[3]),h(m(h(m(_(L[1],C[0]),_(-C[1],L[0])),E[2]),m(h(m(_(E[1],C[0]),_(-C[1],E[0])),-L[2]),h(m(_(E[1],L[0]),_(-L[1],E[0])),C[2]))),w[3]))),m(h(m(h(m(_(L[1],C[0]),_(-C[1],L[0])),w[2]),m(h(m(_(w[1],C[0]),_(-C[1],w[0])),-L[2]),h(m(_(w[1],L[0]),_(-L[1],w[0])),C[2]))),-E[3]),m(h(m(h(m(_(E[1],C[0]),_(-C[1],E[0])),w[2]),m(h(m(_(w[1],C[0]),_(-C[1],w[0])),-E[2]),h(m(_(w[1],E[0]),_(-E[1],w[0])),C[2]))),L[3]),h(m(h(m(_(E[1],L[0]),_(-L[1],E[0])),w[2]),m(h(m(_(w[1],L[0]),_(-L[1],w[0])),-E[2]),h(m(_(w[1],E[0]),_(-E[1],w[0])),L[2]))),-C[3]))))),G=m(m(m(h(m(h(m(_(C[1],P[0]),_(-P[1],C[0])),L[2]),m(h(m(_(L[1],P[0]),_(-P[1],L[0])),-C[2]),h(m(_(L[1],C[0]),_(-C[1],L[0])),P[2]))),w[3]),h(m(h(m(_(C[1],P[0]),_(-P[1],C[0])),w[2]),m(h(m(_(w[1],P[0]),_(-P[1],w[0])),-C[2]),h(m(_(w[1],C[0]),_(-C[1],w[0])),P[2]))),-L[3])),m(h(m(h(m(_(L[1],P[0]),_(-P[1],L[0])),w[2]),m(h(m(_(w[1],P[0]),_(-P[1],w[0])),-L[2]),h(m(_(w[1],L[0]),_(-L[1],w[0])),P[2]))),C[3]),h(m(h(m(_(L[1],C[0]),_(-C[1],L[0])),w[2]),m(h(m(_(w[1],C[0]),_(-C[1],w[0])),-L[2]),h(m(_(w[1],L[0]),_(-L[1],w[0])),C[2]))),-P[3]))),m(m(h(m(h(m(_(L[1],P[0]),_(-P[1],L[0])),E[2]),m(h(m(_(E[1],P[0]),_(-P[1],E[0])),-L[2]),h(m(_(E[1],L[0]),_(-L[1],E[0])),P[2]))),w[3]),h(m(h(m(_(L[1],P[0]),_(-P[1],L[0])),w[2]),m(h(m(_(w[1],P[0]),_(-P[1],w[0])),-L[2]),h(m(_(w[1],L[0]),_(-L[1],w[0])),P[2]))),-E[3])),m(h(m(h(m(_(E[1],P[0]),_(-P[1],E[0])),w[2]),m(h(m(_(w[1],P[0]),_(-P[1],w[0])),-E[2]),h(m(_(w[1],E[0]),_(-E[1],w[0])),P[2]))),L[3]),h(m(h(m(_(E[1],L[0]),_(-L[1],E[0])),w[2]),m(h(m(_(w[1],L[0]),_(-L[1],w[0])),-E[2]),h(m(_(w[1],E[0]),_(-E[1],w[0])),L[2]))),-P[3])))),I=A(D,G);return I[I.length-1]}}function c(m){return(m===3?o:m===4?u:p)(r,i,n,a)}var x=c(3),g=c(4),f=[function(){return 0},function(){return 0},function(m,_){return _[0]-m[0]},function(m,_,h){var A,w=(m[1]-h[1])*(_[0]-h[0]),E=(m[0]-h[0])*(_[1]-h[1]),L=w-E;if(w>0){if(E<=0)return L;A=w+E}else{if(!(w<0)||E>=0)return L;A=-(w+E)}var C=33306690738754716e-32*A;return L>=C||L<=-C?L:x(m,_,h)},function(m,_,h,A){var w=m[0]-A[0],E=_[0]-A[0],L=h[0]-A[0],C=m[1]-A[1],P=_[1]-A[1],D=h[1]-A[1],G=m[2]-A[2],I=_[2]-A[2],H=h[2]-A[2],N=E*D,F=L*P,V=L*C,q=w*D,te=w*P,$=E*C,W=G*(N-F)+I*(V-q)+H*(te-$),Z=7771561172376103e-31*((Math.abs(N)+Math.abs(F))*Math.abs(G)+(Math.abs(V)+Math.abs(q))*Math.abs(I)+(Math.abs(te)+Math.abs($))*Math.abs(H));return W>Z||-W>Z?W:g(m,_,h,A)}];function y(m){var _=f[m.length];return _||(_=f[m.length]=c(m.length)),_.apply(void 0,m)}function v(m,_,h,A,w,E,L){return function(C,P,D,G,I){switch(arguments.length){case 0:case 1:return 0;case 2:return A(C,P);case 3:return w(C,P,D);case 4:return E(C,P,D,G);case 5:return L(C,P,D,G,I)}for(var H=new Array(arguments.length),N=0;N<arguments.length;++N)H[N]=arguments[N];return m(H)}}(function(){for(;f.length<=5;)f.push(c(f.length));d.exports=v.apply(void 0,[y].concat(f));for(var m=0;m<=5;++m)d.exports[m]=f[m]})()},2019:function(d,s,e){var i=e(9662),r=e(8289);d.exports=function(n,a){if(n.length===1)return r(a,n[0]);if(a.length===1)return r(n,a[0]);if(n.length===0||a.length===0)return[0];var o=[0];if(n.length<a.length)for(var u=0;u<n.length;++u)o=i(o,r(a,n[u]));else for(u=0;u<a.length;++u)o=i(o,r(n,a[u]));return o}},8289:function(d,s,e){var i=e(9660),r=e(87);d.exports=function(n,a){var o=n.length;if(o===1){var u=i(n[0],a);return u[0]?u:[u[1]]}var p=new Array(2*o),c=[.1,.1],x=[.1,.1],g=0;i(n[0],a,c),c[0]&&(p[g++]=c[0]);for(var f=1;f<o;++f){i(n[f],a,x);var y=c[1];r(y,x[0],c),c[0]&&(p[g++]=c[0]);var v=x[1],m=c[1],_=v+m,h=m-(_-v);c[1]=_,h&&(p[g++]=h)}return c[1]&&(p[g++]=c[1]),g===0&&(p[g++]=0),p.length=g,p}},4434:function(d,s,e){d.exports=function(r,n,a,o){var u=i(r,a,o),p=i(n,a,o);if(u>0&&p>0||u<0&&p<0)return!1;var c=i(a,r,n),x=i(o,r,n);return!(c>0&&x>0||c<0&&x<0)&&(u!==0||p!==0||c!==0||x!==0||function(g,f,y,v){for(var m=0;m<2;++m){var _=g[m],h=f[m],A=Math.min(_,h),w=Math.max(_,h),E=y[m],L=v[m],C=Math.min(E,L);if(Math.max(E,L)<A||w<C)return!1}return!0}(r,n,a,o))};var i=e(417)[3]},4078:function(d){d.exports=function(s,e){var i=0|s.length,r=0|e.length;if(i===1&&r===1)return function(C,P){var D=C+P,G=D-C,I=C-(D-G)+(P-G);return I?[I,D]:[D]}(s[0],-e[0]);var n,a,o=new Array(i+r),u=0,p=0,c=0,x=Math.abs,g=s[p],f=x(g),y=-e[c],v=x(y);f<v?(a=g,(p+=1)<i&&(f=x(g=s[p]))):(a=y,(c+=1)<r&&(v=x(y=-e[c]))),p<i&&f<v||c>=r?(n=g,(p+=1)<i&&(f=x(g=s[p]))):(n=y,(c+=1)<r&&(v=x(y=-e[c])));for(var m,_,h=n+a,A=h-n,w=a-A,E=w,L=h;p<i&&c<r;)f<v?(n=g,(p+=1)<i&&(f=x(g=s[p]))):(n=y,(c+=1)<r&&(v=x(y=-e[c]))),(w=(a=E)-(A=(h=n+a)-n))&&(o[u++]=w),E=L-((m=L+h)-(_=m-L))+(h-_),L=m;for(;p<i;)(w=(a=E)-(A=(h=(n=g)+a)-n))&&(o[u++]=w),E=L-((m=L+h)-(_=m-L))+(h-_),L=m,(p+=1)<i&&(g=s[p]);for(;c<r;)(w=(a=E)-(A=(h=(n=y)+a)-n))&&(o[u++]=w),E=L-((m=L+h)-(_=m-L))+(h-_),L=m,(c+=1)<r&&(y=-e[c]);return E&&(o[u++]=E),L&&(o[u++]=L),u||(o[u++]=0),o.length=u,o}},9662:function(d){d.exports=function(s,e){var i=0|s.length,r=0|e.length;if(i===1&&r===1)return function(C,P){var D=C+P,G=D-C,I=C-(D-G)+(P-G);return I?[I,D]:[D]}(s[0],e[0]);var n,a,o=new Array(i+r),u=0,p=0,c=0,x=Math.abs,g=s[p],f=x(g),y=e[c],v=x(y);f<v?(a=g,(p+=1)<i&&(f=x(g=s[p]))):(a=y,(c+=1)<r&&(v=x(y=e[c]))),p<i&&f<v||c>=r?(n=g,(p+=1)<i&&(f=x(g=s[p]))):(n=y,(c+=1)<r&&(v=x(y=e[c])));for(var m,_,h=n+a,A=h-n,w=a-A,E=w,L=h;p<i&&c<r;)f<v?(n=g,(p+=1)<i&&(f=x(g=s[p]))):(n=y,(c+=1)<r&&(v=x(y=e[c]))),(w=(a=E)-(A=(h=n+a)-n))&&(o[u++]=w),E=L-((m=L+h)-(_=m-L))+(h-_),L=m;for(;p<i;)(w=(a=E)-(A=(h=(n=g)+a)-n))&&(o[u++]=w),E=L-((m=L+h)-(_=m-L))+(h-_),L=m,(p+=1)<i&&(g=s[p]);for(;c<r;)(w=(a=E)-(A=(h=(n=y)+a)-n))&&(o[u++]=w),E=L-((m=L+h)-(_=m-L))+(h-_),L=m,(c+=1)<r&&(y=e[c]);return E&&(o[u++]=E),L&&(o[u++]=L),u||(o[u++]=0),o.length=u,o}},8691:function(d,s,e){d.exports=function(n){return r(i(n))};var i=e(2692),r=e(7037)},7212:function(d,s,e){d.exports=function(o,u,p,c){if(p=p||0,c===void 0&&(c=function(h){for(var A=h.length,w=0,E=0;E<A;++E)w=0|Math.max(w,h[E].length);return w-1}(o)),o.length===0||c<1)return{cells:[],vertexIds:[],vertexWeights:[]};var x=function(h,A){for(var w=h.length,E=r.mallocUint8(w),L=0;L<w;++L)E[L]=h[L]<A|0;return E}(u,+p),g=function(h,A){for(var w=h.length,E=A*(A+1)/2*w|0,L=r.mallocUint32(2*E),C=0,P=0;P<w;++P)for(var D=h[P],G=(A=D.length,0);G<A;++G)for(var I=0;I<G;++I){var H=D[I],N=D[G];L[C++]=0|Math.min(H,N),L[C++]=0|Math.max(H,N)}n(i(L,[C/2|0,2]));var F=2;for(P=2;P<C;P+=2)L[P-2]===L[P]&&L[P-1]===L[P+1]||(L[F++]=L[P],L[F++]=L[P+1]);return i(L,[F/2|0,2])}(o,c),f=function(h,A,w,E){for(var L=h.data,C=h.shape[0],P=r.mallocDouble(C),D=0,G=0;G<C;++G){var I=L[2*G],H=L[2*G+1];if(w[I]!==w[H]){var N=A[I],F=A[H];L[2*D]=I,L[2*D+1]=H,P[D++]=(F-E)/(F-N)}}return h.shape[0]=D,i(P,[D])}(g,u,x,+p),y=function(h,A){var w=r.mallocInt32(2*A),E=h.shape[0],L=h.data;w[0]=0;for(var C=0,P=0;P<E;++P){var D=L[2*P];if(D!==C){for(w[2*C+1]=P;++C<D;)w[2*C]=P,w[2*C+1]=P;w[2*C]=P}}for(w[2*C+1]=E;++C<A;)w[2*C]=w[2*C+1]=E;return w}(g,0|u.length),v=a(c)(o,g.data,y,x),m=function(h){for(var A=0|h.shape[0],w=h.data,E=new Array(A),L=0;L<A;++L)E[L]=[w[2*L],w[2*L+1]];return E}(g),_=[].slice.call(f.data,0,f.shape[0]);return r.free(x),r.free(g.data),r.free(f.data),r.free(y),{cells:v,vertexIds:m,vertexWeights:_}};var i=e(5050),r=e(5306),n=e(8729),a=e(1168)},1168:function(d){d.exports=function(e){return s[e]()};var s=[function(){return function(e,i,r,n){for(var a=e.length,o=0;o<a;++o)e[o].length;return[]}},function(){function e(i,r,n,a){for(var o=0|Math.min(n,a),u=0|Math.max(n,a),p=i[2*o],c=i[2*o+1];p<c;){var x=p+c>>1,g=r[2*x+1];if(g===u)return x;u<g?c=x:p=x+1}return p}return function(i,r,n,a){for(var o=i.length,u=[],p=0;p<o;++p){var c=i[p];if(c.length===2){var x=(a[c[0]]<<0)+(a[c[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:case 3:break;case 1:u.push([e(n,r,c[0],c[1])]);break;case 2:u.push([e(n,r,c[1],c[0])])}}}return u}},function(){function e(i,r,n,a){for(var o=0|Math.min(n,a),u=0|Math.max(n,a),p=i[2*o],c=i[2*o+1];p<c;){var x=p+c>>1,g=r[2*x+1];if(g===u)return x;u<g?c=x:p=x+1}return p}return function(i,r,n,a){for(var o=i.length,u=[],p=0;p<o;++p){var c=i[p],x=c.length;if(x===3){if((g=(a[c[0]]<<0)+(a[c[1]]<<1)+(a[c[2]]<<2))==0||g===7)continue;switch(g){case 0:case 7:break;case 1:u.push([e(n,r,c[0],c[2]),e(n,r,c[0],c[1])]);break;case 2:u.push([e(n,r,c[1],c[0]),e(n,r,c[1],c[2])]);break;case 3:u.push([e(n,r,c[0],c[2]),e(n,r,c[1],c[2])]);break;case 4:u.push([e(n,r,c[2],c[1]),e(n,r,c[2],c[0])]);break;case 5:u.push([e(n,r,c[2],c[1]),e(n,r,c[0],c[1])]);break;case 6:u.push([e(n,r,c[1],c[0]),e(n,r,c[2],c[0])])}}else if(x===2){var g;if((g=(a[c[0]]<<0)+(a[c[1]]<<1))==0||g===3)continue;switch(g){case 0:case 3:break;case 1:u.push([e(n,r,c[0],c[1])]);break;case 2:u.push([e(n,r,c[1],c[0])])}}}return u}},function(){function e(i,r,n,a){for(var o=0|Math.min(n,a),u=0|Math.max(n,a),p=i[2*o],c=i[2*o+1];p<c;){var x=p+c>>1,g=r[2*x+1];if(g===u)return x;u<g?c=x:p=x+1}return p}return function(i,r,n,a){for(var o=i.length,u=[],p=0;p<o;++p){var c=i[p],x=c.length;if(x===4){if((g=(a[c[0]]<<0)+(a[c[1]]<<1)+(a[c[2]]<<2)+(a[c[3]]<<3))==0||g===15)continue;switch(g){case 0:case 15:break;case 1:u.push([e(n,r,c[0],c[1]),e(n,r,c[0],c[2]),e(n,r,c[0],c[3])]);break;case 2:u.push([e(n,r,c[1],c[2]),e(n,r,c[1],c[0]),e(n,r,c[1],c[3])]);break;case 3:u.push([e(n,r,c[1],c[2]),e(n,r,c[0],c[2]),e(n,r,c[0],c[3])],[e(n,r,c[1],c[3]),e(n,r,c[1],c[2]),e(n,r,c[0],c[3])]);break;case 4:u.push([e(n,r,c[2],c[0]),e(n,r,c[2],c[1]),e(n,r,c[2],c[3])]);break;case 5:u.push([e(n,r,c[0],c[1]),e(n,r,c[2],c[1]),e(n,r,c[0],c[3])],[e(n,r,c[2],c[1]),e(n,r,c[2],c[3]),e(n,r,c[0],c[3])]);break;case 6:u.push([e(n,r,c[2],c[0]),e(n,r,c[1],c[0]),e(n,r,c[1],c[3])],[e(n,r,c[2],c[3]),e(n,r,c[2],c[0]),e(n,r,c[1],c[3])]);break;case 7:u.push([e(n,r,c[0],c[3]),e(n,r,c[1],c[3]),e(n,r,c[2],c[3])]);break;case 8:u.push([e(n,r,c[3],c[1]),e(n,r,c[3],c[0]),e(n,r,c[3],c[2])]);break;case 9:u.push([e(n,r,c[3],c[1]),e(n,r,c[0],c[1]),e(n,r,c[0],c[2])],[e(n,r,c[3],c[2]),e(n,r,c[3],c[1]),e(n,r,c[0],c[2])]);break;case 10:u.push([e(n,r,c[1],c[0]),e(n,r,c[3],c[0]),e(n,r,c[1],c[2])],[e(n,r,c[3],c[0]),e(n,r,c[3],c[2]),e(n,r,c[1],c[2])]);break;case 11:u.push([e(n,r,c[1],c[2]),e(n,r,c[0],c[2]),e(n,r,c[3],c[2])]);break;case 12:u.push([e(n,r,c[3],c[0]),e(n,r,c[2],c[0]),e(n,r,c[2],c[1])],[e(n,r,c[3],c[1]),e(n,r,c[3],c[0]),e(n,r,c[2],c[1])]);break;case 13:u.push([e(n,r,c[0],c[1]),e(n,r,c[2],c[1]),e(n,r,c[3],c[1])]);break;case 14:u.push([e(n,r,c[2],c[0]),e(n,r,c[1],c[0]),e(n,r,c[3],c[0])])}}else if(x===3){if((g=(a[c[0]]<<0)+(a[c[1]]<<1)+(a[c[2]]<<2))==0||g===7)continue;switch(g){case 0:case 7:break;case 1:u.push([e(n,r,c[0],c[2]),e(n,r,c[0],c[1])]);break;case 2:u.push([e(n,r,c[1],c[0]),e(n,r,c[1],c[2])]);break;case 3:u.push([e(n,r,c[0],c[2]),e(n,r,c[1],c[2])]);break;case 4:u.push([e(n,r,c[2],c[1]),e(n,r,c[2],c[0])]);break;case 5:u.push([e(n,r,c[2],c[1]),e(n,r,c[0],c[1])]);break;case 6:u.push([e(n,r,c[1],c[0]),e(n,r,c[2],c[0])])}}else if(x===2){var g;if((g=(a[c[0]]<<0)+(a[c[1]]<<1))==0||g===3)continue;switch(g){case 0:case 3:break;case 1:u.push([e(n,r,c[0],c[1])]);break;case 2:u.push([e(n,r,c[1],c[0])])}}}return u}}]},8211:function(d,s,e){e(2288),e(1731),s.H=function(i,r){var n=i.length,a=i.length-r.length,o=Math.min;if(a)return a;switch(n){case 0:return 0;case 1:return i[0]-r[0];case 2:return(c=i[0]+i[1]-r[0]-r[1])||o(i[0],i[1])-o(r[0],r[1]);case 3:var u=i[0]+i[1],p=r[0]+r[1];if(c=u+i[2]-(p+r[2]))return c;var c,x=o(i[0],i[1]),g=o(r[0],r[1]);return(c=o(x,i[2])-o(g,r[2]))||o(x+i[2],u)-o(g+r[2],p);default:var f=i.slice(0);f.sort();var y=r.slice(0);y.sort();for(var v=0;v<n;++v)if(a=f[v]-y[v])return a;return 0}}},9392:function(d,s){function e(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(r){return(r>0)-(r<0)},s.abs=function(r){var n=r>>31;return(r^n)-n},s.min=function(r,n){return n^(r^n)&-(r<n)},s.max=function(r,n){return r^(r^n)&-(r<n)},s.isPow2=function(r){return!(r&r-1||!r)},s.log2=function(r){var n,a;return n=(r>65535)<<4,n|=a=((r>>>=n)>255)<<3,n|=a=((r>>>=a)>15)<<2,(n|=a=((r>>>=a)>3)<<1)|(r>>>=a)>>1},s.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},s.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},s.countTrailingZeros=e,s.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},s.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},s.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var i=new Array(256);(function(r){for(var n=0;n<256;++n){var a=n,o=n,u=7;for(a>>>=1;a;a>>>=1)o<<=1,o|=1&a,--u;r[n]=o<<u&255}})(i),s.reverse=function(r){return i[255&r]<<24|i[r>>>8&255]<<16|i[r>>>16&255]<<8|i[r>>>24&255]},s.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},s.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},s.interleave3=function(r,n,a){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},s.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},s.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>e(r)+1}},6656:function(d,s,e){var i=e(9392),r=e(9521);function n(g,f){var y=g.length,v=g.length-f.length,m=Math.min;if(v)return v;switch(y){case 0:return 0;case 1:return g[0]-f[0];case 2:return(A=g[0]+g[1]-f[0]-f[1])||m(g[0],g[1])-m(f[0],f[1]);case 3:var _=g[0]+g[1],h=f[0]+f[1];if(A=_+g[2]-(h+f[2]))return A;var A,w=m(g[0],g[1]),E=m(f[0],f[1]);return(A=m(w,g[2])-m(E,f[2]))||m(w+g[2],_)-m(E+f[2],h);default:var L=g.slice(0);L.sort();var C=f.slice(0);C.sort();for(var P=0;P<y;++P)if(v=L[P]-C[P])return v;return 0}}function a(g,f){return n(g[0],f[0])}function o(g,f){if(f){for(var y=g.length,v=new Array(y),m=0;m<y;++m)v[m]=[g[m],f[m]];for(v.sort(a),m=0;m<y;++m)g[m]=v[m][0],f[m]=v[m][1];return g}return g.sort(n),g}function u(g){if(g.length===0)return[];for(var f=1,y=g.length,v=1;v<y;++v){var m=g[v];if(n(m,g[v-1])){if(v===f){f++;continue}g[f++]=m}}return g.length=f,g}function p(g,f){for(var y=0,v=g.length-1,m=-1;y<=v;){var _=y+v>>1,h=n(g[_],f);h<=0?(h===0&&(m=_),y=_+1):h>0&&(v=_-1)}return m}function c(g,f){for(var y=new Array(g.length),v=0,m=y.length;v<m;++v)y[v]=[];for(var _=[],h=(v=0,f.length);v<h;++v)for(var A=f[v],w=A.length,E=1,L=1<<w;E<L;++E){_.length=i.popCount(E);for(var C=0,P=0;P<w;++P)E&1<<P&&(_[C++]=A[P]);var D=p(g,_);if(!(D<0))for(;y[D++].push(v),!(D>=g.length||n(g[D],_)!==0););}return y}function x(g,f){if(f<0)return[];for(var y=[],v=(1<<f+1)-1,m=0;m<g.length;++m)for(var _=g[m],h=v;h<1<<_.length;h=i.nextCombination(h)){for(var A=new Array(f+1),w=0,E=0;E<_.length;++E)h&1<<E&&(A[w++]=_[E]);y.push(A)}return o(y)}s.dimension=function(g){for(var f=0,y=Math.max,v=0,m=g.length;v<m;++v)f=y(f,g[v].length);return f-1},s.countVertices=function(g){for(var f=-1,y=Math.max,v=0,m=g.length;v<m;++v)for(var _=g[v],h=0,A=_.length;h<A;++h)f=y(f,_[h]);return f+1},s.cloneCells=function(g){for(var f=new Array(g.length),y=0,v=g.length;y<v;++y)f[y]=g[y].slice(0);return f},s.compareCells=n,s.normalize=o,s.unique=u,s.findCell=p,s.incidence=c,s.dual=function(g,f){if(!f)return c(u(x(g,0)),g);for(var y=new Array(f),v=0;v<f;++v)y[v]=[];v=0;for(var m=g.length;v<m;++v)for(var _=g[v],h=0,A=_.length;h<A;++h)y[_[h]].push(v);return y},s.explode=function(g){for(var f=[],y=0,v=g.length;y<v;++y)for(var m=g[y],_=0|m.length,h=1,A=1<<_;h<A;++h){for(var w=[],E=0;E<_;++E)h>>>E&1&&w.push(m[E]);f.push(w)}return o(f)},s.skeleton=x,s.boundary=function(g){for(var f=[],y=0,v=g.length;y<v;++y)for(var m=g[y],_=0,h=m.length;_<h;++_){for(var A=new Array(m.length-1),w=0,E=0;w<h;++w)w!==_&&(A[E++]=m[w]);f.push(A)}return o(f)},s.connectedComponents=function(g,f){return f?function(y,v){for(var m=new r(v),_=0;_<y.length;++_)for(var h=y[_],A=0;A<h.length;++A)for(var w=A+1;w<h.length;++w)m.link(h[A],h[w]);var E=[],L=m.ranks;for(_=0;_<L.length;++_)L[_]=-1;for(_=0;_<y.length;++_){var C=m.find(y[_][0]);L[C]<0?(L[C]=E.length,E.push([y[_].slice(0)])):E[L[C]].push(y[_].slice(0))}return E}(g,f):function(y){for(var v=u(o(x(y,0))),m=new r(v.length),_=0;_<y.length;++_)for(var h=y[_],A=0;A<h.length;++A)for(var w=p(v,[h[A]]),E=A+1;E<h.length;++E)m.link(w,p(v,[h[E]]));var L=[],C=m.ranks;for(_=0;_<C.length;++_)C[_]=-1;for(_=0;_<y.length;++_){var P=m.find(p(v,[y[_][0]]));C[P]<0?(C[P]=L.length,L.push([y[_].slice(0)])):L[C[P]].push(y[_].slice(0))}return L}(g)}},9521:function(d){function s(e){this.roots=new Array(e),this.ranks=new Array(e);for(var i=0;i<e;++i)this.roots[i]=i,this.ranks[i]=0}d.exports=s,s.prototype.length=function(){return this.roots.length},s.prototype.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},s.prototype.find=function(e){for(var i=this.roots;i[e]!==e;){var r=i[e];i[e]=i[r],e=r}return e},s.prototype.link=function(e,i){var r=this.find(e),n=this.find(i);if(r!==n){var a=this.ranks,o=this.roots,u=a[r],p=a[n];u<p?o[r]=n:p<u?o[n]=r:(o[n]=r,++a[r])}}},8243:function(d,s,e){d.exports=function(n,a,o){for(var u=a.length,p=n.length,c=new Array(u),x=new Array(u),g=new Array(u),f=new Array(u),y=0;y<u;++y)c[y]=x[y]=-1,g[y]=1/0,f[y]=!1;for(y=0;y<p;++y){var v=n[y];if(v.length!==2)throw new Error("Input must be a graph");var m=v[1],_=v[0];x[_]!==-1?x[_]=-2:x[_]=m,c[m]!==-1?c[m]=-2:c[m]=_}function h($){if(f[$])return 1/0;var W,Z,J,ee=c[$],re=x[$];return ee<0||re<0?1/0:(W=a[$],Z=a[ee],J=a[re],Math.abs(i(W,Z,J))/Math.sqrt(Math.pow(Z[0]-J[0],2)+Math.pow(Z[1]-J[1],2)))}function A($,W){var Z=I[$],J=I[W];I[$]=J,I[W]=Z,H[Z]=W,H[J]=$}function w($){return g[I[$]]}function E($){return 1&$?$-1>>1:($>>1)-1}function L($){for(var W=w($);;){var Z=W,J=2*$+1,ee=2*($+1),re=$;if(J<N){var ae=w(J);ae<Z&&(re=J,Z=ae)}if(ee<N&&w(ee)<Z&&(re=ee),re===$)return $;A($,re),$=re}}function C($){for(var W=w($);$>0;){var Z=E($);if(!(Z>=0&&W<w(Z)))return $;A($,Z),$=Z}}function P(){if(N>0){var $=I[0];return A(0,N-1),N-=1,L(0),$}return-1}function D($,W){var Z=I[$];return g[Z]===W?$:(g[Z]=-1/0,C($),P(),g[Z]=W,C((N+=1)-1))}function G($){if(!f[$]){f[$]=!0;var W=c[$],Z=x[$];c[Z]>=0&&(c[Z]=W),x[W]>=0&&(x[W]=Z),H[W]>=0&&D(H[W],h(W)),H[Z]>=0&&D(H[Z],h(Z))}}var I=[],H=new Array(u);for(y=0;y<u;++y)(g[y]=h(y))<1/0?(H[y]=I.length,I.push(y)):H[y]=-1;var N=I.length;for(y=N>>1;y>=0;--y)L(y);for(;;){var F=P();if(F<0||g[F]>o)break;G(F)}var V=[];for(y=0;y<u;++y)f[y]||(H[y]=V.length,V.push(a[y].slice()));function q($,W){if($[W]<0)return W;var Z=W,J=W;do{var ee=$[J];if(!f[J]||ee<0||ee===J||(ee=$[J=ee],!f[J]||ee<0||ee===J))break;J=ee,Z=$[Z]}while(Z!==J);for(var re=W;re!==J;re=$[re])$[re]=J;return J}V.length;var te=[];return n.forEach(function($){var W=q(c,$[0]),Z=q(x,$[1]);if(W>=0&&Z>=0&&W!==Z){var J=H[W],ee=H[Z];J!==ee&&te.push([J,ee])}}),r.unique(r.normalize(te)),{positions:V,edges:te}};var i=e(417),r=e(6656)},6638:function(d,s,e){d.exports=function(n,a){var o,u,p,c;if(a[0][0]<a[1][0])o=a[0],u=a[1];else{if(!(a[0][0]>a[1][0]))return r(a,n);o=a[1],u=a[0]}if(n[0][0]<n[1][0])p=n[0],c=n[1];else{if(!(n[0][0]>n[1][0]))return-r(n,a);p=n[1],c=n[0]}var x=i(o,u,c),g=i(o,u,p);if(x<0){if(g<=0)return x}else if(x>0){if(g>=0)return x}else if(g)return g;if(x=i(c,p,u),g=i(c,p,o),x<0){if(g<=0)return x}else if(x>0){if(g>=0)return x}else if(g)return g;return u[0]-c[0]};var i=e(417);function r(n,a){var o,u,p,c;if(a[0][0]<a[1][0])o=a[0],u=a[1];else{if(!(a[0][0]>a[1][0])){var x=Math.min(n[0][1],n[1][1]),g=Math.max(n[0][1],n[1][1]),f=Math.min(a[0][1],a[1][1]),y=Math.max(a[0][1],a[1][1]);return g<f?g-f:x>y?x-y:g-y}o=a[1],u=a[0]}n[0][1]<n[1][1]?(p=n[0],c=n[1]):(p=n[1],c=n[0]);var v=i(u,o,p);return v||(v=i(u,o,c))||c-u}},4385:function(d,s,e){d.exports=function(g){for(var f=g.length,y=2*f,v=new Array(y),m=0;m<f;++m){var _=g[m],h=_[0][0]<_[1][0];v[2*m]=new x(_[0][0],_,h,m),v[2*m+1]=new x(_[1][0],_,!h,m)}v.sort(function(G,I){var H=G.x-I.x;return H||(H=G.create-I.create)||Math.min(G.segment[0][1],G.segment[1][1])-Math.min(I.segment[0][1],I.segment[1][1])});var A=r(a),w=[],E=[],L=[];for(m=0;m<y;){for(var C=v[m].x,P=[];m<y;){var D=v[m];if(D.x!==C)break;m+=1,D.segment[0][0]===D.x&&D.segment[1][0]===D.x?D.create&&(D.segment[0][1]<D.segment[1][1]?(P.push(new c(D.segment[0][1],D.index,!0,!0)),P.push(new c(D.segment[1][1],D.index,!1,!1))):(P.push(new c(D.segment[1][1],D.index,!0,!1)),P.push(new c(D.segment[0][1],D.index,!1,!0)))):A=D.create?A.insert(D.segment,D.index):A.remove(D.segment)}w.push(A.root),E.push(C),L.push(P)}return new o(w,E,L)};var i=e(5070),r=e(7080),n=e(417),a=e(6638);function o(g,f,y){this.slabs=g,this.coordinates=f,this.horizontal=y}function u(g,f){return g.y-f}function p(g,f){for(var y=null;g;){var v,m,_=g.key;_[0][0]<_[1][0]?(v=_[0],m=_[1]):(v=_[1],m=_[0]);var h=n(v,m,f);if(h<0)g=g.left;else if(h>0)if(f[0]!==_[1][0])y=g,g=g.right;else{if(A=p(g.right,f))return A;g=g.left}else{if(f[0]!==_[1][0])return g;var A;if(A=p(g.right,f))return A;g=g.left}}return y}function c(g,f,y,v){this.y=g,this.index=f,this.start=y,this.closed=v}function x(g,f,y,v){this.x=g,this.segment=f,this.create=y,this.index=v}o.prototype.castUp=function(g){var f=i.le(this.coordinates,g[0]);if(f<0)return-1;this.slabs[f];var y=p(this.slabs[f],g),v=-1;if(y&&(v=y.value),this.coordinates[f]===g[0]){var m=null;if(y&&(m=y.key),f>0){var _=p(this.slabs[f-1],g);_&&(m?a(_.key,m)>0&&(m=_.key,v=_.value):(v=_.value,m=_.key))}var h=this.horizontal[f];if(h.length>0){var A=i.ge(h,g[1],u);if(A<h.length){var w=h[A];if(g[1]===w.y){if(w.closed)return w.index;for(;A<h.length-1&&h[A+1].y===g[1];)if((w=h[A+=1]).closed)return w.index;if(w.y===g[1]&&!w.start){if((A+=1)>=h.length)return v;w=h[A]}}if(w.start)if(m){var E=n(m[0],m[1],[g[0],w.y]);m[0][0]>m[1][0]&&(E=-E),E>0&&(v=w.index)}else v=w.index;else w.y!==g[1]&&(v=w.index)}}}return v}},4670:function(d,s,e){var i=e(9130),r=e(9662);function n(o,u){var p=r(i(o,u),[u[u.length-1]]);return p[p.length-1]}function a(o,u,p,c){var x=-u/(c-u);x<0?x=0:x>1&&(x=1);for(var g=1-x,f=o.length,y=new Array(f),v=0;v<f;++v)y[v]=x*o[v]+g*p[v];return y}d.exports=function(o,u){for(var p=[],c=[],x=n(o[o.length-1],u),g=o[o.length-1],f=o[0],y=0;y<o.length;++y,g=f){var v=n(f=o[y],u);if(x<0&&v>0||x>0&&v<0){var m=a(g,v,f,x);p.push(m),c.push(m.slice())}v<0?c.push(f.slice()):v>0?p.push(f.slice()):(p.push(f.slice()),c.push(f.slice())),x=v}return{positive:p,negative:c}},d.exports.positive=function(o,u){for(var p=[],c=n(o[o.length-1],u),x=o[o.length-1],g=o[0],f=0;f<o.length;++f,x=g){var y=n(g=o[f],u);(c<0&&y>0||c>0&&y<0)&&p.push(a(x,y,g,c)),y>=0&&p.push(g.slice()),c=y}return p},d.exports.negative=function(o,u){for(var p=[],c=n(o[o.length-1],u),x=o[o.length-1],g=o[0],f=0;f<o.length;++f,x=g){var y=n(g=o[f],u);(c<0&&y>0||c>0&&y<0)&&p.push(a(x,y,g,c)),y<=0&&p.push(g.slice()),c=y}return p}},8974:function(d,s,e){var i;(function(){var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(u){return function(p,c){var x,g,f,y,v,m,_,h,A,w=1,E=p.length,L="";for(g=0;g<E;g++)if(typeof p[g]=="string")L+=p[g];else if(typeof p[g]=="object"){if((y=p[g]).keys)for(x=c[w],f=0;f<y.keys.length;f++){if(x==null)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',y.keys[f],y.keys[f-1]));x=x[y.keys[f]]}else x=y.param_no?c[y.param_no]:c[w++];if(r.not_type.test(y.type)&&r.not_primitive.test(y.type)&&x instanceof Function&&(x=x()),r.numeric_arg.test(y.type)&&typeof x!="number"&&isNaN(x))throw new TypeError(n("[sprintf] expecting number but found %T",x));switch(r.number.test(y.type)&&(h=x>=0),y.type){case"b":x=parseInt(x,10).toString(2);break;case"c":x=String.fromCharCode(parseInt(x,10));break;case"d":case"i":x=parseInt(x,10);break;case"j":x=JSON.stringify(x,null,y.width?parseInt(y.width):0);break;case"e":x=y.precision?parseFloat(x).toExponential(y.precision):parseFloat(x).toExponential();break;case"f":x=y.precision?parseFloat(x).toFixed(y.precision):parseFloat(x);break;case"g":x=y.precision?String(Number(x.toPrecision(y.precision))):parseFloat(x);break;case"o":x=(parseInt(x,10)>>>0).toString(8);break;case"s":x=String(x),x=y.precision?x.substring(0,y.precision):x;break;case"t":x=String(!!x),x=y.precision?x.substring(0,y.precision):x;break;case"T":x=Object.prototype.toString.call(x).slice(8,-1).toLowerCase(),x=y.precision?x.substring(0,y.precision):x;break;case"u":x=parseInt(x,10)>>>0;break;case"v":x=x.valueOf(),x=y.precision?x.substring(0,y.precision):x;break;case"x":x=(parseInt(x,10)>>>0).toString(16);break;case"X":x=(parseInt(x,10)>>>0).toString(16).toUpperCase()}r.json.test(y.type)?L+=x:(!r.number.test(y.type)||h&&!y.sign?A="":(A=h?"+":"-",x=x.toString().replace(r.sign,"")),m=y.pad_char?y.pad_char==="0"?"0":y.pad_char.charAt(1):" ",_=y.width-(A+x).length,v=y.width&&_>0?m.repeat(_):"",L+=y.align?A+x+v:m==="0"?A+v+x:v+A+x)}return L}(function(p){if(o[p])return o[p];for(var c,x=p,g=[],f=0;x;){if((c=r.text.exec(x))!==null)g.push(c[0]);else if((c=r.modulo.exec(x))!==null)g.push("%");else{if((c=r.placeholder.exec(x))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(c[2]){f|=1;var y=[],v=c[2],m=[];if((m=r.key.exec(v))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");for(y.push(m[1]);(v=v.substring(m[0].length))!=="";)if((m=r.key_access.exec(v))!==null)y.push(m[1]);else{if((m=r.index_access.exec(v))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");y.push(m[1])}c[2]=y}else f|=2;if(f===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");g.push({placeholder:c[0],param_no:c[1],keys:c[2],sign:c[3],pad_char:c[4],align:c[5],width:c[6],precision:c[7],type:c[8]})}x=x.substring(c[0].length)}return o[p]=g}(u),arguments)}function a(u,p){return n.apply(null,[u].concat(p||[]))}var o=Object.create(null);s.sprintf=n,s.vsprintf=a,typeof window<"u"&&(window.sprintf=n,window.vsprintf=a,(i=function(){return{sprintf:n,vsprintf:a}}.call(s,e,s,d))===void 0||(d.exports=i))})()},4162:function(d,s,e){d.exports=function(o,u){if(o.dimension<=0)return{positions:[],cells:[]};if(o.dimension===1)return function(x,g){for(var f=r(x,g),y=f.length,v=new Array(y),m=new Array(y),_=0;_<y;++_)v[_]=[f[_]],m[_]=[_];return{positions:v,cells:m}}(o,u);var p=o.order.join()+"-"+o.dtype,c=a[p];return u=+u||0,c||(c=a[p]=function(x,g){var f=x.length+"d",y=n[f];if(y)return y(i,x,g)}(o.order,o.dtype)),c(o,u)};var i=e(9284),r=e(9584),n={"2d":function(o,u,p){var c=o({order:u,scalarArguments:3,getters:p==="generic"?[0]:void 0,phase:function(x,g,f,y){return x>y|0},vertex:function(x,g,f,y,v,m,_,h,A,w,E,L,C){var P=(_<<0)+(h<<1)+(A<<2)+(w<<3)|0;if(P!==0&&P!==15)switch(P){case 0:case 15:E.push([x-.5,g-.5]);break;case 1:E.push([x-.25-.25*(y+f-2*C)/(f-y),g-.25-.25*(v+f-2*C)/(f-v)]);break;case 2:E.push([x-.75-.25*(-y-f+2*C)/(y-f),g-.25-.25*(m+y-2*C)/(y-m)]);break;case 3:E.push([x-.5,g-.5-.5*(v+f+m+y-4*C)/(f-v+y-m)]);break;case 4:E.push([x-.25-.25*(m+v-2*C)/(v-m),g-.75-.25*(-v-f+2*C)/(v-f)]);break;case 5:E.push([x-.5-.5*(y+f+m+v-4*C)/(f-y+v-m),g-.5]);break;case 6:E.push([x-.5-.25*(-y-f+m+v)/(y-f+v-m),g-.5-.25*(-v-f+m+y)/(v-f+y-m)]);break;case 7:E.push([x-.75-.25*(m+v-2*C)/(v-m),g-.75-.25*(m+y-2*C)/(y-m)]);break;case 8:E.push([x-.75-.25*(-m-v+2*C)/(m-v),g-.75-.25*(-m-y+2*C)/(m-y)]);break;case 9:E.push([x-.5-.25*(y+f+-m-v)/(f-y+m-v),g-.5-.25*(v+f+-m-y)/(f-v+m-y)]);break;case 10:E.push([x-.5-.5*(-y-f-m-v+4*C)/(y-f+m-v),g-.5]);break;case 11:E.push([x-.25-.25*(-m-v+2*C)/(m-v),g-.75-.25*(v+f-2*C)/(f-v)]);break;case 12:E.push([x-.5,g-.5-.5*(-v-f-m-y+4*C)/(v-f+m-y)]);break;case 13:E.push([x-.75-.25*(y+f-2*C)/(f-y),g-.25-.25*(-m-y+2*C)/(m-y)]);break;case 14:E.push([x-.25-.25*(-y-f+2*C)/(y-f),g-.25-.25*(-v-f+2*C)/(v-f)])}},cell:function(x,g,f,y,v,m,_,h,A){v?h.push([x,g]):h.push([g,x])}});return function(x,g){var f=[],y=[];return c(x,f,y,g),{positions:f,cells:y}}}},a={}},6946:function(d,s,e){d.exports=function a(o,u,p){p=p||{};var c=n[o];c||(c=n[o]={" ":{data:new Float32Array(0),shape:.2}});var x=c[u];if(!x)if(u.length<=1||!/\d/.test(u))x=c[u]=function(L){for(var C=L.cells,P=L.positions,D=new Float32Array(6*C.length),G=0,I=0,H=0;H<C.length;++H)for(var N=C[H],F=0;F<3;++F){var V=P[N[F]];D[G++]=V[0],D[G++]=V[1]+1.4,I=Math.max(V[0],I)}return{data:D,shape:I}}(i(u,{triangles:!0,font:o,textAlign:p.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var g=u.split(/(\d|\s)/),f=new Array(g.length),y=0,v=0,m=0;m<g.length;++m)f[m]=a(o,g[m]),y+=f[m].data.length,v+=f[m].shape,m>0&&(v+=.02);var _=new Float32Array(y),h=0,A=-.5*v;for(m=0;m<f.length;++m){for(var w=f[m].data,E=0;E<w.length;E+=2)_[h++]=w[E]+A,_[h++]=w[E+1];A+=f[m].shape+.02}x=c[u]={data:_,shape:v}}return x};var i=e(875),r=window||k.global||{},n=r.__TEXT_CACHE||{};r.__TEXT_CACHE={}},14:function(d,s,e){var i=e(4405);d.exports=a;var r=96;function n(o,u){var p=i(getComputedStyle(o).getPropertyValue(u));return p[0]*a(p[1],o)}function a(o,u){switch(u=u||document.body,o=(o||"px").trim().toLowerCase(),u!==window&&u!==document||(u=document.body),o){case"%":return u.clientHeight/100;case"ch":case"ex":return function(p,c){var x=document.createElement("div");x.style["font-size"]="128"+p,c.appendChild(x);var g=n(x,"font-size")/128;return c.removeChild(x),g}(o,u);case"em":return n(u,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return r;case"cm":return r/2.54;case"mm":return r/25.4;case"pt":return r/72;case"pc":return r/6}return 1}},3440:function(d,s,e){d.exports=function(v){var m=(v=v||{}).center||[0,0,0],_=v.up||[0,1,0],h=v.right||x(_),A=v.radius||1,w=v.theta||0,E=v.phi||0;if(m=[].slice.call(m,0,3),_=[].slice.call(_,0,3),o(_,_),h=[].slice.call(h,0,3),o(h,h),"eye"in v){var L=v.eye,C=[L[0]-m[0],L[1]-m[1],L[2]-m[2]];a(h,C,_),p(h[0],h[1],h[2])<1e-6?h=x(_):o(h,h),A=p(C[0],C[1],C[2]);var P=u(_,C)/A,D=u(h,C)/A;E=Math.acos(P),w=Math.acos(D)}return A=Math.log(A),new g(v.zoomMin,v.zoomMax,m,_,h,A,w,E)};var i=e(8444),r=e(7437),n=e(4422),a=e(903),o=e(899),u=e(9305);function p(v,m,_){return Math.sqrt(Math.pow(v,2)+Math.pow(m,2)+Math.pow(_,2))}function c(v){return Math.min(1,Math.max(-1,v))}function x(v){var m=Math.abs(v[0]),_=Math.abs(v[1]),h=Math.abs(v[2]),A=[0,0,0];m>Math.max(_,h)?A[2]=1:_>Math.max(m,h)?A[0]=1:A[1]=1;for(var w=0,E=0,L=0;L<3;++L)w+=v[L]*v[L],E+=A[L]*v[L];for(L=0;L<3;++L)A[L]-=E/w*v[L];return o(A,A),A}function g(v,m,_,h,A,w,E,L){this.center=i(_),this.up=i(h),this.right=i(A),this.radius=i([w]),this.angle=i([E,L]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(v,m),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var C=0;C<16;++C)this.computedMatrix[C]=.5;this.recalcMatrix(0)}var f=g.prototype;f.setDistanceLimits=function(v,m){v=v>0?Math.log(v):-1/0,m=m>0?Math.log(m):1/0,m=Math.max(m,v),this.radius.bounds[0][0]=v,this.radius.bounds[1][0]=m},f.getDistanceLimits=function(v){var m=this.radius.bounds[0];return v?(v[0]=Math.exp(m[0][0]),v[1]=Math.exp(m[1][0]),v):[Math.exp(m[0][0]),Math.exp(m[1][0])]},f.recalcMatrix=function(v){this.center.curve(v),this.up.curve(v),this.right.curve(v),this.radius.curve(v),this.angle.curve(v);for(var m=this.computedUp,_=this.computedRight,h=0,A=0,w=0;w<3;++w)A+=m[w]*_[w],h+=m[w]*m[w];var E=Math.sqrt(h),L=0;for(w=0;w<3;++w)_[w]-=m[w]*A/h,L+=_[w]*_[w],m[w]/=E;var C=Math.sqrt(L);for(w=0;w<3;++w)_[w]/=C;var P=this.computedToward;a(P,m,_),o(P,P);var D=Math.exp(this.computedRadius[0]),G=this.computedAngle[0],I=this.computedAngle[1],H=Math.cos(G),N=Math.sin(G),F=Math.cos(I),V=Math.sin(I),q=this.computedCenter,te=H*F,$=N*F,W=V,Z=-H*V,J=-N*V,ee=F,re=this.computedEye,ae=this.computedMatrix;for(w=0;w<3;++w){var oe=te*_[w]+$*P[w]+W*m[w];ae[4*w+1]=Z*_[w]+J*P[w]+ee*m[w],ae[4*w+2]=oe,ae[4*w+3]=0}var ce=ae[1],pe=ae[5],ve=ae[9],we=ae[2],xe=ae[6],ge=ae[10],Oe=pe*ge-ve*xe,Ae=ve*we-ce*ge,Te=ce*xe-pe*we,se=p(Oe,Ae,Te);for(Oe/=se,Ae/=se,Te/=se,ae[0]=Oe,ae[4]=Ae,ae[8]=Te,w=0;w<3;++w)re[w]=q[w]+ae[2+4*w]*D;for(w=0;w<3;++w){L=0;for(var le=0;le<3;++le)L+=ae[w+4*le]*re[le];ae[12+w]=-L}ae[15]=1},f.getMatrix=function(v,m){this.recalcMatrix(v);var _=this.computedMatrix;if(m){for(var h=0;h<16;++h)m[h]=_[h];return m}return _};var y=[0,0,0];f.rotate=function(v,m,_,h){if(this.angle.move(v,m,_),h){this.recalcMatrix(v);var A=this.computedMatrix;y[0]=A[2],y[1]=A[6],y[2]=A[10];for(var w=this.computedUp,E=this.computedRight,L=this.computedToward,C=0;C<3;++C)A[4*C]=w[C],A[4*C+1]=E[C],A[4*C+2]=L[C];for(n(A,A,h,y),C=0;C<3;++C)w[C]=A[4*C],E[C]=A[4*C+1];this.up.set(v,w[0],w[1],w[2]),this.right.set(v,E[0],E[1],E[2])}},f.pan=function(v,m,_,h){m=m||0,_=_||0,h=h||0,this.recalcMatrix(v);var A=this.computedMatrix,w=(Math.exp(this.computedRadius[0]),A[1]),E=A[5],L=A[9],C=p(w,E,L);w/=C,E/=C,L/=C;var P=A[0],D=A[4],G=A[8],I=P*w+D*E+G*L,H=p(P-=w*I,D-=E*I,G-=L*I),N=(P/=H)*m+w*_,F=(D/=H)*m+E*_,V=(G/=H)*m+L*_;this.center.move(v,N,F,V);var q=Math.exp(this.computedRadius[0]);q=Math.max(1e-4,q+h),this.radius.set(v,Math.log(q))},f.translate=function(v,m,_,h){this.center.move(v,m||0,_||0,h||0)},f.setMatrix=function(v,m,_,h){var A=1;typeof _=="number"&&(A=0|_),(A<0||A>3)&&(A=1);var w=(A+2)%3;m||(this.recalcMatrix(v),m=this.computedMatrix);var E=m[A],L=m[A+4],C=m[A+8];if(h){var P=Math.abs(E),D=Math.abs(L),G=Math.abs(C),I=Math.max(P,D,G);P===I?(E=E<0?-1:1,L=C=0):G===I?(C=C<0?-1:1,E=L=0):(L=L<0?-1:1,E=C=0)}else{var H=p(E,L,C);E/=H,L/=H,C/=H}var N,F,V=m[w],q=m[w+4],te=m[w+8],$=V*E+q*L+te*C,W=p(V-=E*$,q-=L*$,te-=C*$),Z=L*(te/=W)-C*(q/=W),J=C*(V/=W)-E*te,ee=E*q-L*V,re=p(Z,J,ee);if(Z/=re,J/=re,ee/=re,this.center.jump(v,be,De,Ue),this.radius.idle(v),this.up.jump(v,E,L,C),this.right.jump(v,V,q,te),A===2){var ae=m[1],oe=m[5],ce=m[9],pe=ae*V+oe*q+ce*te,ve=ae*Z+oe*J+ce*ee;N=Oe<0?-Math.PI/2:Math.PI/2,F=Math.atan2(ve,pe)}else{var we=m[2],xe=m[6],ge=m[10],Oe=we*E+xe*L+ge*C,Ae=we*V+xe*q+ge*te,Te=we*Z+xe*J+ge*ee;N=Math.asin(c(Oe)),F=Math.atan2(Te,Ae)}this.angle.jump(v,F,N),this.recalcMatrix(v);var se=m[2],le=m[6],ne=m[10],me=this.computedMatrix;r(me,m);var Ee=me[15],be=me[12]/Ee,De=me[13]/Ee,Ue=me[14]/Ee,he=Math.exp(this.computedRadius[0]);this.center.jump(v,be-se*he,De-le*he,Ue-ne*he)},f.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},f.idle=function(v){this.center.idle(v),this.up.idle(v),this.right.idle(v),this.radius.idle(v),this.angle.idle(v)},f.flush=function(v){this.center.flush(v),this.up.flush(v),this.right.flush(v),this.radius.flush(v),this.angle.flush(v)},f.setDistance=function(v,m){m>0&&this.radius.set(v,Math.log(m))},f.lookAt=function(v,m,_,h){this.recalcMatrix(v),m=m||this.computedEye,_=_||this.computedCenter;var A=(h=h||this.computedUp)[0],w=h[1],E=h[2],L=p(A,w,E);if(!(L<1e-6)){A/=L,w/=L,E/=L;var C=m[0]-_[0],P=m[1]-_[1],D=m[2]-_[2],G=p(C,P,D);if(!(G<1e-6)){C/=G,P/=G,D/=G;var I=this.computedRight,H=I[0],N=I[1],F=I[2],V=A*H+w*N+E*F,q=p(H-=V*A,N-=V*w,F-=V*E);if(!(q<.01&&(q=p(H=w*D-E*P,N=E*C-A*D,F=A*P-w*C))<1e-6)){H/=q,N/=q,F/=q,this.up.set(v,A,w,E),this.right.set(v,H,N,F),this.center.set(v,_[0],_[1],_[2]),this.radius.set(v,Math.log(G));var te=w*F-E*N,$=E*H-A*F,W=A*N-w*H,Z=p(te,$,W),J=A*C+w*P+E*D,ee=H*C+N*P+F*D,re=(te/=Z)*C+($/=Z)*P+(W/=Z)*D,ae=Math.asin(c(J)),oe=Math.atan2(re,ee),ce=this.angle._state,pe=ce[ce.length-1],ve=ce[ce.length-2];pe%=2*Math.PI;var we=Math.abs(pe+2*Math.PI-oe),xe=Math.abs(pe-oe),ge=Math.abs(pe-2*Math.PI-oe);we<xe&&(pe+=2*Math.PI),ge<xe&&(pe-=2*Math.PI),this.angle.jump(this.angle.lastT(),pe,ve),this.angle.set(v,oe,ae)}}}}},9660:function(d){d.exports=function(e,i,r){var n=e*i,a=s*e,o=a-(a-e),u=e-o,p=s*i,c=p-(p-i),x=i-c,g=u*x-(n-o*c-u*c-o*x);return r?(r[0]=g,r[1]=n,r):[g,n]};var s=+(Math.pow(2,27)+1)},87:function(d){d.exports=function(s,e,i){var r=s+e,n=r-s,a=e-n,o=s-(r-n);return i?(i[0]=o+a,i[1]=r,i):[o+a,r]}},5306:function(d,s,e){var i=e(2288),r=e(3094),n=e(2146).lW;e.g.__TYPEDARRAY_POOL||(e.g.__TYPEDARRAY_POOL={UINT8:r([32,0]),UINT16:r([32,0]),UINT32:r([32,0]),BIGUINT64:r([32,0]),INT8:r([32,0]),INT16:r([32,0]),INT32:r([32,0]),BIGINT64:r([32,0]),FLOAT:r([32,0]),DOUBLE:r([32,0]),DATA:r([32,0]),UINT8C:r([32,0]),BUFFER:r([32,0])});var a=typeof Uint8ClampedArray<"u",o=typeof BigUint64Array<"u",u=typeof BigInt64Array<"u",p=e.g.__TYPEDARRAY_POOL;p.UINT8C||(p.UINT8C=r([32,0])),p.BIGUINT64||(p.BIGUINT64=r([32,0])),p.BIGINT64||(p.BIGINT64=r([32,0])),p.BUFFER||(p.BUFFER=r([32,0]));var c=p.DATA,x=p.BUFFER;function g(I){if(I){var H=I.length||I.byteLength,N=i.log2(H);c[N].push(I)}}function f(I){I=i.nextPow2(I);var H=i.log2(I),N=c[H];return N.length>0?N.pop():new ArrayBuffer(I)}function y(I){return new Uint8Array(f(I),0,I)}function v(I){return new Uint16Array(f(2*I),0,I)}function m(I){return new Uint32Array(f(4*I),0,I)}function _(I){return new Int8Array(f(I),0,I)}function h(I){return new Int16Array(f(2*I),0,I)}function A(I){return new Int32Array(f(4*I),0,I)}function w(I){return new Float32Array(f(4*I),0,I)}function E(I){return new Float64Array(f(8*I),0,I)}function L(I){return a?new Uint8ClampedArray(f(I),0,I):y(I)}function C(I){return o?new BigUint64Array(f(8*I),0,I):null}function P(I){return u?new BigInt64Array(f(8*I),0,I):null}function D(I){return new DataView(f(I),0,I)}function G(I){I=i.nextPow2(I);var H=i.log2(I),N=x[H];return N.length>0?N.pop():new n(I)}s.free=function(I){if(n.isBuffer(I))x[i.log2(I.length)].push(I);else{if(Object.prototype.toString.call(I)!=="[object ArrayBuffer]"&&(I=I.buffer),!I)return;var H=I.length||I.byteLength,N=0|i.log2(H);c[N].push(I)}},s.freeUint8=s.freeUint16=s.freeUint32=s.freeBigUint64=s.freeInt8=s.freeInt16=s.freeInt32=s.freeBigInt64=s.freeFloat32=s.freeFloat=s.freeFloat64=s.freeDouble=s.freeUint8Clamped=s.freeDataView=function(I){g(I.buffer)},s.freeArrayBuffer=g,s.freeBuffer=function(I){x[i.log2(I.length)].push(I)},s.malloc=function(I,H){if(H===void 0||H==="arraybuffer")return f(I);switch(H){case"uint8":return y(I);case"uint16":return v(I);case"uint32":return m(I);case"int8":return _(I);case"int16":return h(I);case"int32":return A(I);case"float":case"float32":return w(I);case"double":case"float64":return E(I);case"uint8_clamped":return L(I);case"bigint64":return P(I);case"biguint64":return C(I);case"buffer":return G(I);case"data":case"dataview":return D(I);default:return null}return null},s.mallocArrayBuffer=f,s.mallocUint8=y,s.mallocUint16=v,s.mallocUint32=m,s.mallocInt8=_,s.mallocInt16=h,s.mallocInt32=A,s.mallocFloat32=s.mallocFloat=w,s.mallocFloat64=s.mallocDouble=E,s.mallocUint8Clamped=L,s.mallocBigUint64=C,s.mallocBigInt64=P,s.mallocDataView=D,s.mallocBuffer=G,s.clearCache=function(){for(var I=0;I<32;++I)p.UINT8[I].length=0,p.UINT16[I].length=0,p.UINT32[I].length=0,p.INT8[I].length=0,p.INT16[I].length=0,p.INT32[I].length=0,p.FLOAT[I].length=0,p.DOUBLE[I].length=0,p.BIGUINT64[I].length=0,p.BIGINT64[I].length=0,p.UINT8C[I].length=0,c[I].length=0,x[I].length=0}},1731:function(d){function s(i){this.roots=new Array(i),this.ranks=new Array(i);for(var r=0;r<i;++r)this.roots[r]=r,this.ranks[r]=0}d.exports=s;var e=s.prototype;Object.defineProperty(e,"length",{get:function(){return this.roots.length}}),e.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},e.find=function(i){for(var r=i,n=this.roots;n[i]!==i;)i=n[i];for(;n[r]!==i;){var a=n[r];n[r]=i,r=a}return i},e.link=function(i,r){var n=this.find(i),a=this.find(r);if(n!==a){var o=this.ranks,u=this.roots,p=o[n],c=o[a];p<c?u[n]=a:c<p?u[a]=n:(u[a]=n,++o[n])}}},1215:function(d){d.exports=function(s,e,i){return s.length===0?s:e?(i||s.sort(e),function(r,n){for(var a=1,o=r.length,u=r[0],p=r[0],c=1;c<o;++c)if(p=u,n(u=r[c],p)){if(c===a){a++;continue}r[a++]=u}return r.length=a,r}(s,e)):(i||s.sort(),function(r){for(var n=1,a=r.length,o=r[0],u=r[0],p=1;p<a;++p,u=o)if(u=o,(o=r[p])!==u){if(p===n){n++;continue}r[n++]=o}return r.length=n,r}(s))}},875:function(d,s,e){d.exports=function(a,o){return typeof o=="object"&&o!==null||(o={}),i(a,o.canvas||r,o.context||n,o)};var i=e(712),r=null,n=null;typeof document<"u"&&((r=document.createElement("canvas")).width=8192,r.height=1024,n=r.getContext("2d"))},712:function(d,s,e){d.exports=function(C,P,D,G){var I=64,H=1.25,N={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return G&&(G.size&&G.size>0&&(I=G.size),G.lineSpacing&&G.lineSpacing>0&&(H=G.lineSpacing),G.styletags&&G.styletags.breaklines&&(N.breaklines=!!G.styletags.breaklines),G.styletags&&G.styletags.bolds&&(N.bolds=!!G.styletags.bolds),G.styletags&&G.styletags.italics&&(N.italics=!!G.styletags.italics),G.styletags&&G.styletags.subscripts&&(N.subscripts=!!G.styletags.subscripts),G.styletags&&G.styletags.superscripts&&(N.superscripts=!!G.styletags.superscripts)),D.font=[G.fontStyle,G.fontVariant,G.fontWeight,I+"px",G.font].filter(function(F){return F}).join(" "),D.textAlign="start",D.textBaseline="alphabetic",D.direction="ltr",L(function(F,V,q,te,$,W){q=q.replace(/\n/g,""),q=W.breaklines===!0?q.replace(/\<br\>/g,`
`):q.replace(/\<br\>/g," ");var Z="",J=[];for(oe=0;oe<q.length;++oe)J[oe]=Z;W.bolds===!0&&(J=A(p,c,q,J)),W.italics===!0&&(J=A(x,g,q,J)),W.superscripts===!0&&(J=A(f,v,q,J)),W.subscripts===!0&&(J=A(m,h,q,J));var ee=[],re="";for(oe=0;oe<q.length;++oe)J[oe]!==null&&(re+=q[oe],ee.push(J[oe]));var ae,oe,ce,pe,ve,we=re.split(`
`),xe=we.length,ge=Math.round($*te),Oe=te,Ae=2*te,Te=0,se=xe*ge+Ae;F.height<se&&(F.height=se),V.fillStyle="#000",V.fillRect(0,0,F.width,F.height),V.fillStyle="#fff";var le=0,ne="";function me(){if(ne!==""){var Ce=V.measureText(ne).width;V.fillText(ne,Oe+ce,Ae+pe),ce+=Ce}}function Ee(){return Math.round(ve)+"px "}function be(Ce,Fe){var Re=""+V.font;if(W.subscripts===!0){var He=Ce.indexOf(_),Ge=Fe.indexOf(_),$e=He>-1?parseInt(Ce[1+He]):0,st=Ge>-1?parseInt(Fe[1+Ge]):0;$e!==st&&(Re=Re.replace(Ee(),"?px "),ve*=Math.pow(.75,st-$e),Re=Re.replace("?px ",Ee())),pe+=.25*ge*(st-$e)}if(W.superscripts===!0){var Ke=Ce.indexOf(y),gt=Fe.indexOf(y),mt=Ke>-1?parseInt(Ce[1+Ke]):0,at=gt>-1?parseInt(Fe[1+gt]):0;mt!==at&&(Re=Re.replace(Ee(),"?px "),ve*=Math.pow(.75,at-mt),Re=Re.replace("?px ",Ee())),pe-=.25*ge*(at-mt)}if(W.bolds===!0){var rt=Ce.indexOf(c)>-1,xt=Fe.indexOf(c)>-1;!rt&&xt&&(Re=Tt?Re.replace("italic ","italic bold "):"bold "+Re),rt&&!xt&&(Re=Re.replace("bold ",""))}if(W.italics===!0){var Tt=Ce.indexOf(g)>-1,wt=Fe.indexOf(g)>-1;!Tt&&wt&&(Re="italic "+Re),Tt&&!wt&&(Re=Re.replace("italic ",""))}V.font=Re}for(ae=0;ae<xe;++ae){var De=we[ae]+`
`;for(ce=0,pe=ae*ge,ve=te,ne="",oe=0;oe<De.length;++oe){var Ue=oe+le<ee.length?ee[oe+le]:ee[ee.length-1];Z===Ue?ne+=De[oe]:(me(),ne=De[oe],Ue!==void 0&&(be(Z,Ue),Z=Ue))}me(),le+=De.length;var he=0|Math.round(ce+2*Oe);Te<he&&(Te=he)}var ke=Te,_e=Ae+ge*xe;return r(V.getImageData(0,0,ke,_e).data,[_e,ke,4]).pick(-1,-1,0).transpose(1,0)}(P,D,C,I,H,N),G,I)},d.exports.processPixels=L;var i=e(4162),r=e(5050),n=e(8243),a=e(197),o=e(7761),u=e(8040),p="b",c="b|",x="i",g="i|",f="sup",y="+",v="+1",m="sub",_="-",h="-1";function A(C,P,D,G){for(var I="<"+C+">",H="</"+C+">",N=I.length,F=H.length,V=P[0]===y||P[0]===_,q=0,te=-F;q>-1&&(q=D.indexOf(I,q))!==-1&&(te=D.indexOf(H,q+N))!==-1&&!(te<=q);){for(var $=q;$<te+F;++$)if($<q+N||$>=te)G[$]=null,D=D.substr(0,$)+" "+D.substr($+1);else if(G[$]!==null){var W=G[$].indexOf(P[0]);W===-1?G[$]+=P:V&&(G[$]=G[$].substr(0,W+1)+(1+parseInt(G[$][W+1]))+G[$].substr(W+2))}var Z=q+N,J=D.substr(Z,te-Z).indexOf(I);q=J!==-1?J:te+F}return G}function w(C,P){var D=i(C,128);return P?n(D.cells,D.positions,.25):{edges:D.cells,positions:D.positions}}function E(C,P,D,G){var I=w(C,G),H=function(ae,oe,ce){for(var pe=oe.textAlign||"start",ve=oe.textBaseline||"alphabetic",we=[1<<30,1<<30],xe=[0,0],ge=ae.length,Oe=0;Oe<ge;++Oe)for(var Ae=ae[Oe],Te=0;Te<2;++Te)we[Te]=0|Math.min(we[Te],Ae[Te]),xe[Te]=0|Math.max(xe[Te],Ae[Te]);var se=0;switch(pe){case"center":se=-.5*(we[0]+xe[0]);break;case"right":case"end":se=-xe[0];break;case"left":case"start":se=-we[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+pe+"'")}var le=0;switch(ve){case"hanging":case"top":le=-we[1];break;case"middle":le=-.5*(we[1]+xe[1]);break;case"alphabetic":case"ideographic":le=-3*ce;break;case"bottom":le=-xe[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+ve+"'")}var ne=1/ce;return"lineHeight"in oe?ne*=+oe.lineHeight:"width"in oe?ne=oe.width/(xe[0]-we[0]):"height"in oe&&(ne=oe.height/(xe[1]-we[1])),ae.map(function(me){return[ne*(me[0]+se),ne*(me[1]+le)]})}(I.positions,P,D),N=I.edges,F=P.orientation==="ccw";if(a(H,N),P.polygons||P.polygon||P.polyline){for(var V=u(N,H),q=new Array(V.length),te=0;te<V.length;++te){for(var $=V[te],W=new Array($.length),Z=0;Z<$.length;++Z){for(var J=$[Z],ee=new Array(J.length),re=0;re<J.length;++re)ee[re]=H[J[re]].slice();F&&ee.reverse(),W[Z]=ee}q[te]=W}return q}return P.triangles||P.triangulate||P.triangle?{cells:o(H,N,{delaunay:!1,exterior:!1,interior:!0}),positions:H}:{edges:N,positions:H}}function L(C,P,D){try{return E(C,P,D,!0)}catch{}try{return E(C,P,D,!1)}catch{}return P.polygons||P.polyline||P.polygon?[]:P.triangles||P.triangulate||P.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},5346:function(d){(function(){if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=m);var s=!1;if(typeof WeakMap=="function"){var e=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var i=new e,r=Object.freeze({});if(i.set(r,1),i.get(r)===1)return void(d.exports=WeakMap);s=!0}}var n=Object.getOwnPropertyNames,a=Object.defineProperty,o=Object.isExtensible,u="weakmap:",p=u+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var c=new ArrayBuffer(25),x=new Uint8Array(c);crypto.getRandomValues(x),p=u+"rand:"+Array.prototype.map.call(x,function(E){return(E%36).toString(36)}).join("")+"___"}if(a(Object,"getOwnPropertyNames",{value:function(E){return n(E).filter(_)}}),"getPropertyNames"in Object){var g=Object.getPropertyNames;a(Object,"getPropertyNames",{value:function(E){return g(E).filter(_)}})}(function(){var E=Object.freeze;a(Object,"freeze",{value:function(P){return h(P),E(P)}});var L=Object.seal;a(Object,"seal",{value:function(P){return h(P),L(P)}});var C=Object.preventExtensions;a(Object,"preventExtensions",{value:function(P){return h(P),C(P)}})})();var f=!1,y=0,v=function(){this instanceof v||w();var E=[],L=[],C=y++;return Object.create(v.prototype,{get___:{value:A(function(P,D){var G,I=h(P);return I?C in I?I[C]:D:(G=E.indexOf(P))>=0?L[G]:D})},has___:{value:A(function(P){var D=h(P);return D?C in D:E.indexOf(P)>=0})},set___:{value:A(function(P,D){var G,I=h(P);return I?I[C]=D:(G=E.indexOf(P))>=0?L[G]=D:(G=E.length,L[G]=D,E[G]=P),this})},delete___:{value:A(function(P){var D,G,I=h(P);return I?C in I&&delete I[C]:!((D=E.indexOf(P))<0||(G=E.length-1,E[D]=void 0,L[D]=L[G],E[D]=E[G],E.length=G,L.length=G,0))})}})};v.prototype=Object.create(Object.prototype,{get:{value:function(E,L){return this.get___(E,L)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,L){return this.set___(E,L)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),typeof e=="function"?function(){function E(){this instanceof v||w();var L,C=new e,P=void 0,D=!1;return L=s?function(G,I){return C.set(G,I),C.has(G)||(P||(P=new v),P.set(G,I)),this}:function(G,I){if(D)try{C.set(G,I)}catch{P||(P=new v),P.set___(G,I)}else C.set(G,I);return this},Object.create(v.prototype,{get___:{value:A(function(G,I){return P?C.has(G)?C.get(G):P.get___(G,I):C.get(G,I)})},has___:{value:A(function(G){return C.has(G)||!!P&&P.has___(G)})},set___:{value:A(L)},delete___:{value:A(function(G){var I=!!C.delete(G);return P&&P.delete___(G)||I})},permitHostObjects___:{value:A(function(G){if(G!==m)throw new Error("bogus call to permitHostObjects___");D=!0})}})}s&&typeof Proxy<"u"&&(Proxy=void 0),E.prototype=v.prototype,d.exports=E,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),d.exports=v)}function m(E){E.permitHostObjects___&&E.permitHostObjects___(m)}function _(E){return!(E.substr(0,8)==u&&E.substr(E.length-3)==="___")}function h(E){if(E!==Object(E))throw new TypeError("Not an object: "+E);var L=E[p];if(L&&L.key===E)return L;if(o(E)){L={key:E};try{return a(E,p,{value:L,writable:!1,enumerable:!1,configurable:!1}),L}catch{return}}}function A(E){return E.prototype=null,Object.freeze(E)}function w(){f||typeof console>"u"||(f=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}})()},9222:function(d,s,e){var i=e(7178);d.exports=function(){var r={};return function(n){if((typeof n!="object"||n===null)&&typeof n!="function")throw new Error("Weakmap-shim: Key must be object");var a=n.valueOf(r);return a&&a.identity===r?a:i(n,r)}}},7178:function(d){d.exports=function(s,e){var i={identity:e},r=s.valueOf;return Object.defineProperty(s,"valueOf",{value:function(n){return n!==e?r.apply(this,arguments):i},writable:!0}),i}},4037:function(d,s,e){var i=e(9222);d.exports=function(){var r=i();return{get:function(n,a){var o=r(n);return o.hasOwnProperty("value")?o.value:a},set:function(n,a){return r(n).value=a,this},has:function(n){return"value"in r(n)},delete:function(n){return delete r(n).value}}}},6183:function(d){d.exports=function(s){var e={};return function(i,r,n){var a=i.dtype,o=i.order,u=[a,o.join()].join(),p=e[u];return p||(e[u]=p=s([a,o])),p(i.shape.slice(0),i.data,i.stride,0|i.offset,r,n)}}(function(){return function(s,e,i,r,n,a){var o=s[0],u=i[0],p=[0],c=u;r|=0;var x=0,g=u;for(x=0;x<o;++x){var f=e[r]-a,y=e[r+c]-a;f>=0!=y>=0&&n.push(p[0]+.5+.5*(f+y)/(f-y)),r+=g,++p[0]}}}.bind(void 0,{funcName:"zeroCrossings"}))},9584:function(d,s,e){d.exports=function(r,n){var a=[];return n=+n||0,i(r.hi(r.shape[0]-1),a,n),a};var i=e(6183)},6601:function(){}},T={};function b(d){var s=T[d];if(s!==void 0)return s.exports;var e=T[d]={id:d,loaded:!1,exports:{}};return l[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}return b.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),b.nmd=function(d){return d.paths=[],d.children||(d.children=[]),d},b(7386)}()},Q.exports=S()},12856:function(Q,z,t){function S(se,le){for(var ne=0;ne<le.length;ne++){var me=le[ne];me.enumerable=me.enumerable||!1,me.configurable=!0,"value"in me&&(me.writable=!0),Object.defineProperty(se,me.key,me)}}function k(se,le){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ne,me){return ne.__proto__=me,ne},k(se,le)}function l(se){if(se===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se}function T(se){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(le){return le.__proto__||Object.getPrototypeOf(le)},T(se)}function b(se){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(le){return typeof le}:function(le){return le&&typeof Symbol=="function"&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le},b(se)}var d=t(95341),s=t(95280),e=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;z.Buffer=n,z.SlowBuffer=function(se){return+se!=se&&(se=0),n.alloc(+se)},z.INSPECT_MAX_BYTES=50;var i=2147483647;function r(se){if(se>i)throw new RangeError('The value "'+se+'" is invalid for option "size"');var le=new Uint8Array(se);return Object.setPrototypeOf(le,n.prototype),le}function n(se,le,ne){if(typeof se=="number"){if(typeof le=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(se)}return a(se,le,ne)}function a(se,le,ne){if(typeof se=="string")return function(be,De){if(typeof De=="string"&&De!==""||(De="utf8"),!n.isEncoding(De))throw new TypeError("Unknown encoding: "+De);var Ue=0|g(be,De),he=r(Ue),ke=he.write(be,De);return ke!==Ue&&(he=he.slice(0,ke)),he}(se,le);if(ArrayBuffer.isView(se))return function(be){if(xe(be,Uint8Array)){var De=new Uint8Array(be);return c(De.buffer,De.byteOffset,De.byteLength)}return p(be)}(se);if(se==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+b(se));if(xe(se,ArrayBuffer)||se&&xe(se.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(xe(se,SharedArrayBuffer)||se&&xe(se.buffer,SharedArrayBuffer)))return c(se,le,ne);if(typeof se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var me=se.valueOf&&se.valueOf();if(me!=null&&me!==se)return n.from(me,le,ne);var Ee=function(be){if(n.isBuffer(be)){var De=0|x(be.length),Ue=r(De);return Ue.length===0||be.copy(Ue,0,0,De),Ue}return be.length!==void 0?typeof be.length!="number"||ge(be.length)?r(0):p(be):be.type==="Buffer"&&Array.isArray(be.data)?p(be.data):void 0}(se);if(Ee)return Ee;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof se[Symbol.toPrimitive]=="function")return n.from(se[Symbol.toPrimitive]("string"),le,ne);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+b(se))}function o(se){if(typeof se!="number")throw new TypeError('"size" argument must be of type number');if(se<0)throw new RangeError('The value "'+se+'" is invalid for option "size"')}function u(se){return o(se),r(se<0?0:0|x(se))}function p(se){for(var le=se.length<0?0:0|x(se.length),ne=r(le),me=0;me<le;me+=1)ne[me]=255&se[me];return ne}function c(se,le,ne){if(le<0||se.byteLength<le)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<le+(ne||0))throw new RangeError('"length" is outside of buffer bounds');var me;return me=le===void 0&&ne===void 0?new Uint8Array(se):ne===void 0?new Uint8Array(se,le):new Uint8Array(se,le,ne),Object.setPrototypeOf(me,n.prototype),me}function x(se){if(se>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|se}function g(se,le){if(n.isBuffer(se))return se.length;if(ArrayBuffer.isView(se)||xe(se,ArrayBuffer))return se.byteLength;if(typeof se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+b(se));var ne=se.length,me=arguments.length>2&&arguments[2]===!0;if(!me&&ne===0)return 0;for(var Ee=!1;;)switch(le){case"ascii":case"latin1":case"binary":return ne;case"utf8":case"utf-8":return pe(se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ne;case"hex":return ne>>>1;case"base64":return ve(se).length;default:if(Ee)return me?-1:pe(se).length;le=(""+le).toLowerCase(),Ee=!0}}function f(se,le,ne){var me=!1;if((le===void 0||le<0)&&(le=0),le>this.length||((ne===void 0||ne>this.length)&&(ne=this.length),ne<=0)||(ne>>>=0)<=(le>>>=0))return"";for(se||(se="utf8");;)switch(se){case"hex":return I(this,le,ne);case"utf8":case"utf-8":return C(this,le,ne);case"ascii":return D(this,le,ne);case"latin1":case"binary":return G(this,le,ne);case"base64":return L(this,le,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,le,ne);default:if(me)throw new TypeError("Unknown encoding: "+se);se=(se+"").toLowerCase(),me=!0}}function y(se,le,ne){var me=se[le];se[le]=se[ne],se[ne]=me}function v(se,le,ne,me,Ee){if(se.length===0)return-1;if(typeof ne=="string"?(me=ne,ne=0):ne>2147483647?ne=2147483647:ne<-2147483648&&(ne=-2147483648),ge(ne=+ne)&&(ne=Ee?0:se.length-1),ne<0&&(ne=se.length+ne),ne>=se.length){if(Ee)return-1;ne=se.length-1}else if(ne<0){if(!Ee)return-1;ne=0}if(typeof le=="string"&&(le=n.from(le,me)),n.isBuffer(le))return le.length===0?-1:m(se,le,ne,me,Ee);if(typeof le=="number")return le&=255,typeof Uint8Array.prototype.indexOf=="function"?Ee?Uint8Array.prototype.indexOf.call(se,le,ne):Uint8Array.prototype.lastIndexOf.call(se,le,ne):m(se,[le],ne,me,Ee);throw new TypeError("val must be string, number or Buffer")}function m(se,le,ne,me,Ee){var be,De=1,Ue=se.length,he=le.length;if(me!==void 0&&((me=String(me).toLowerCase())==="ucs2"||me==="ucs-2"||me==="utf16le"||me==="utf-16le")){if(se.length<2||le.length<2)return-1;De=2,Ue/=2,he/=2,ne/=2}function ke(Re,He){return De===1?Re[He]:Re.readUInt16BE(He*De)}if(Ee){var _e=-1;for(be=ne;be<Ue;be++)if(ke(se,be)===ke(le,_e===-1?0:be-_e)){if(_e===-1&&(_e=be),be-_e+1===he)return _e*De}else _e!==-1&&(be-=be-_e),_e=-1}else for(ne+he>Ue&&(ne=Ue-he),be=ne;be>=0;be--){for(var Ce=!0,Fe=0;Fe<he;Fe++)if(ke(se,be+Fe)!==ke(le,Fe)){Ce=!1;break}if(Ce)return be}return-1}function _(se,le,ne,me){ne=Number(ne)||0;var Ee=se.length-ne;me?(me=Number(me))>Ee&&(me=Ee):me=Ee;var be,De=le.length;for(me>De/2&&(me=De/2),be=0;be<me;++be){var Ue=parseInt(le.substr(2*be,2),16);if(ge(Ue))return be;se[ne+be]=Ue}return be}function h(se,le,ne,me){return we(pe(le,se.length-ne),se,ne,me)}function A(se,le,ne,me){return we(function(Ee){for(var be=[],De=0;De<Ee.length;++De)be.push(255&Ee.charCodeAt(De));return be}(le),se,ne,me)}function w(se,le,ne,me){return we(ve(le),se,ne,me)}function E(se,le,ne,me){return we(function(Ee,be){for(var De,Ue,he,ke=[],_e=0;_e<Ee.length&&!((be-=2)<0);++_e)Ue=(De=Ee.charCodeAt(_e))>>8,he=De%256,ke.push(he),ke.push(Ue);return ke}(le,se.length-ne),se,ne,me)}function L(se,le,ne){return le===0&&ne===se.length?d.fromByteArray(se):d.fromByteArray(se.slice(le,ne))}function C(se,le,ne){ne=Math.min(se.length,ne);for(var me=[],Ee=le;Ee<ne;){var be=se[Ee],De=null,Ue=be>239?4:be>223?3:be>191?2:1;if(Ee+Ue<=ne){var he=void 0,ke=void 0,_e=void 0,Ce=void 0;switch(Ue){case 1:be<128&&(De=be);break;case 2:(192&(he=se[Ee+1]))==128&&(Ce=(31&be)<<6|63&he)>127&&(De=Ce);break;case 3:he=se[Ee+1],ke=se[Ee+2],(192&he)==128&&(192&ke)==128&&(Ce=(15&be)<<12|(63&he)<<6|63&ke)>2047&&(Ce<55296||Ce>57343)&&(De=Ce);break;case 4:he=se[Ee+1],ke=se[Ee+2],_e=se[Ee+3],(192&he)==128&&(192&ke)==128&&(192&_e)==128&&(Ce=(15&be)<<18|(63&he)<<12|(63&ke)<<6|63&_e)>65535&&Ce<1114112&&(De=Ce)}}De===null?(De=65533,Ue=1):De>65535&&(De-=65536,me.push(De>>>10&1023|55296),De=56320|1023&De),me.push(De),Ee+=Ue}return function(Fe){var Re=Fe.length;if(Re<=P)return String.fromCharCode.apply(String,Fe);for(var He="",Ge=0;Ge<Re;)He+=String.fromCharCode.apply(String,Fe.slice(Ge,Ge+=P));return He}(me)}z.kMaxLength=i,n.TYPED_ARRAY_SUPPORT=function(){try{var se=new Uint8Array(1),le={foo:function(){return 42}};return Object.setPrototypeOf(le,Uint8Array.prototype),Object.setPrototypeOf(se,le),se.foo()===42}catch{return!1}}(),n.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),n.poolSize=8192,n.from=function(se,le,ne){return a(se,le,ne)},Object.setPrototypeOf(n.prototype,Uint8Array.prototype),Object.setPrototypeOf(n,Uint8Array),n.alloc=function(se,le,ne){return function(me,Ee,be){return o(me),me<=0?r(me):Ee!==void 0?typeof be=="string"?r(me).fill(Ee,be):r(me).fill(Ee):r(me)}(se,le,ne)},n.allocUnsafe=function(se){return u(se)},n.allocUnsafeSlow=function(se){return u(se)},n.isBuffer=function(se){return se!=null&&se._isBuffer===!0&&se!==n.prototype},n.compare=function(se,le){if(xe(se,Uint8Array)&&(se=n.from(se,se.offset,se.byteLength)),xe(le,Uint8Array)&&(le=n.from(le,le.offset,le.byteLength)),!n.isBuffer(se)||!n.isBuffer(le))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(se===le)return 0;for(var ne=se.length,me=le.length,Ee=0,be=Math.min(ne,me);Ee<be;++Ee)if(se[Ee]!==le[Ee]){ne=se[Ee],me=le[Ee];break}return ne<me?-1:me<ne?1:0},n.isEncoding=function(se){switch(String(se).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(se,le){if(!Array.isArray(se))throw new TypeError('"list" argument must be an Array of Buffers');if(se.length===0)return n.alloc(0);var ne;if(le===void 0)for(le=0,ne=0;ne<se.length;++ne)le+=se[ne].length;var me=n.allocUnsafe(le),Ee=0;for(ne=0;ne<se.length;++ne){var be=se[ne];if(xe(be,Uint8Array))Ee+be.length>me.length?(n.isBuffer(be)||(be=n.from(be)),be.copy(me,Ee)):Uint8Array.prototype.set.call(me,be,Ee);else{if(!n.isBuffer(be))throw new TypeError('"list" argument must be an Array of Buffers');be.copy(me,Ee)}Ee+=be.length}return me},n.byteLength=g,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var se=this.length;if(se%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var le=0;le<se;le+=2)y(this,le,le+1);return this},n.prototype.swap32=function(){var se=this.length;if(se%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var le=0;le<se;le+=4)y(this,le,le+3),y(this,le+1,le+2);return this},n.prototype.swap64=function(){var se=this.length;if(se%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var le=0;le<se;le+=8)y(this,le,le+7),y(this,le+1,le+6),y(this,le+2,le+5),y(this,le+3,le+4);return this},n.prototype.toString=function(){var se=this.length;return se===0?"":arguments.length===0?C(this,0,se):f.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(se){if(!n.isBuffer(se))throw new TypeError("Argument must be a Buffer");return this===se||n.compare(this,se)===0},n.prototype.inspect=function(){var se="",le=z.INSPECT_MAX_BYTES;return se=this.toString("hex",0,le).replace(/(.{2})/g,"$1 ").trim(),this.length>le&&(se+=" ... "),"<Buffer "+se+">"},e&&(n.prototype[e]=n.prototype.inspect),n.prototype.compare=function(se,le,ne,me,Ee){if(xe(se,Uint8Array)&&(se=n.from(se,se.offset,se.byteLength)),!n.isBuffer(se))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+b(se));if(le===void 0&&(le=0),ne===void 0&&(ne=se?se.length:0),me===void 0&&(me=0),Ee===void 0&&(Ee=this.length),le<0||ne>se.length||me<0||Ee>this.length)throw new RangeError("out of range index");if(me>=Ee&&le>=ne)return 0;if(me>=Ee)return-1;if(le>=ne)return 1;if(this===se)return 0;for(var be=(Ee>>>=0)-(me>>>=0),De=(ne>>>=0)-(le>>>=0),Ue=Math.min(be,De),he=this.slice(me,Ee),ke=se.slice(le,ne),_e=0;_e<Ue;++_e)if(he[_e]!==ke[_e]){be=he[_e],De=ke[_e];break}return be<De?-1:De<be?1:0},n.prototype.includes=function(se,le,ne){return this.indexOf(se,le,ne)!==-1},n.prototype.indexOf=function(se,le,ne){return v(this,se,le,ne,!0)},n.prototype.lastIndexOf=function(se,le,ne){return v(this,se,le,ne,!1)},n.prototype.write=function(se,le,ne,me){if(le===void 0)me="utf8",ne=this.length,le=0;else if(ne===void 0&&typeof le=="string")me=le,ne=this.length,le=0;else{if(!isFinite(le))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");le>>>=0,isFinite(ne)?(ne>>>=0,me===void 0&&(me="utf8")):(me=ne,ne=void 0)}var Ee=this.length-le;if((ne===void 0||ne>Ee)&&(ne=Ee),se.length>0&&(ne<0||le<0)||le>this.length)throw new RangeError("Attempt to write outside buffer bounds");me||(me="utf8");for(var be=!1;;)switch(me){case"hex":return _(this,se,le,ne);case"utf8":case"utf-8":return h(this,se,le,ne);case"ascii":case"latin1":case"binary":return A(this,se,le,ne);case"base64":return w(this,se,le,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,se,le,ne);default:if(be)throw new TypeError("Unknown encoding: "+me);me=(""+me).toLowerCase(),be=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function D(se,le,ne){var me="";ne=Math.min(se.length,ne);for(var Ee=le;Ee<ne;++Ee)me+=String.fromCharCode(127&se[Ee]);return me}function G(se,le,ne){var me="";ne=Math.min(se.length,ne);for(var Ee=le;Ee<ne;++Ee)me+=String.fromCharCode(se[Ee]);return me}function I(se,le,ne){var me=se.length;(!le||le<0)&&(le=0),(!ne||ne<0||ne>me)&&(ne=me);for(var Ee="",be=le;be<ne;++be)Ee+=Oe[se[be]];return Ee}function H(se,le,ne){for(var me=se.slice(le,ne),Ee="",be=0;be<me.length-1;be+=2)Ee+=String.fromCharCode(me[be]+256*me[be+1]);return Ee}function N(se,le,ne){if(se%1!=0||se<0)throw new RangeError("offset is not uint");if(se+le>ne)throw new RangeError("Trying to access beyond buffer length")}function F(se,le,ne,me,Ee,be){if(!n.isBuffer(se))throw new TypeError('"buffer" argument must be a Buffer instance');if(le>Ee||le<be)throw new RangeError('"value" argument is out of bounds');if(ne+me>se.length)throw new RangeError("Index out of range")}function V(se,le,ne,me,Ee){re(le,me,Ee,se,ne,7);var be=Number(le&BigInt(4294967295));se[ne++]=be,be>>=8,se[ne++]=be,be>>=8,se[ne++]=be,be>>=8,se[ne++]=be;var De=Number(le>>BigInt(32)&BigInt(4294967295));return se[ne++]=De,De>>=8,se[ne++]=De,De>>=8,se[ne++]=De,De>>=8,se[ne++]=De,ne}function q(se,le,ne,me,Ee){re(le,me,Ee,se,ne,7);var be=Number(le&BigInt(4294967295));se[ne+7]=be,be>>=8,se[ne+6]=be,be>>=8,se[ne+5]=be,be>>=8,se[ne+4]=be;var De=Number(le>>BigInt(32)&BigInt(4294967295));return se[ne+3]=De,De>>=8,se[ne+2]=De,De>>=8,se[ne+1]=De,De>>=8,se[ne]=De,ne+8}function te(se,le,ne,me,Ee,be){if(ne+me>se.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("Index out of range")}function $(se,le,ne,me,Ee){return le=+le,ne>>>=0,Ee||te(se,0,ne,4),s.write(se,le,ne,me,23,4),ne+4}function W(se,le,ne,me,Ee){return le=+le,ne>>>=0,Ee||te(se,0,ne,8),s.write(se,le,ne,me,52,8),ne+8}n.prototype.slice=function(se,le){var ne=this.length;(se=~~se)<0?(se+=ne)<0&&(se=0):se>ne&&(se=ne),(le=le===void 0?ne:~~le)<0?(le+=ne)<0&&(le=0):le>ne&&(le=ne),le<se&&(le=se);var me=this.subarray(se,le);return Object.setPrototypeOf(me,n.prototype),me},n.prototype.readUintLE=n.prototype.readUIntLE=function(se,le,ne){se>>>=0,le>>>=0,ne||N(se,le,this.length);for(var me=this[se],Ee=1,be=0;++be<le&&(Ee*=256);)me+=this[se+be]*Ee;return me},n.prototype.readUintBE=n.prototype.readUIntBE=function(se,le,ne){se>>>=0,le>>>=0,ne||N(se,le,this.length);for(var me=this[se+--le],Ee=1;le>0&&(Ee*=256);)me+=this[se+--le]*Ee;return me},n.prototype.readUint8=n.prototype.readUInt8=function(se,le){return se>>>=0,le||N(se,1,this.length),this[se]},n.prototype.readUint16LE=n.prototype.readUInt16LE=function(se,le){return se>>>=0,le||N(se,2,this.length),this[se]|this[se+1]<<8},n.prototype.readUint16BE=n.prototype.readUInt16BE=function(se,le){return se>>>=0,le||N(se,2,this.length),this[se]<<8|this[se+1]},n.prototype.readUint32LE=n.prototype.readUInt32LE=function(se,le){return se>>>=0,le||N(se,4,this.length),(this[se]|this[se+1]<<8|this[se+2]<<16)+16777216*this[se+3]},n.prototype.readUint32BE=n.prototype.readUInt32BE=function(se,le){return se>>>=0,le||N(se,4,this.length),16777216*this[se]+(this[se+1]<<16|this[se+2]<<8|this[se+3])},n.prototype.readBigUInt64LE=Ae(function(se){ae(se>>>=0,"offset");var le=this[se],ne=this[se+7];le!==void 0&&ne!==void 0||oe(se,this.length-8);var me=le+this[++se]*Math.pow(2,8)+this[++se]*Math.pow(2,16)+this[++se]*Math.pow(2,24),Ee=this[++se]+this[++se]*Math.pow(2,8)+this[++se]*Math.pow(2,16)+ne*Math.pow(2,24);return BigInt(me)+(BigInt(Ee)<<BigInt(32))}),n.prototype.readBigUInt64BE=Ae(function(se){ae(se>>>=0,"offset");var le=this[se],ne=this[se+7];le!==void 0&&ne!==void 0||oe(se,this.length-8);var me=le*Math.pow(2,24)+this[++se]*Math.pow(2,16)+this[++se]*Math.pow(2,8)+this[++se],Ee=this[++se]*Math.pow(2,24)+this[++se]*Math.pow(2,16)+this[++se]*Math.pow(2,8)+ne;return(BigInt(me)<<BigInt(32))+BigInt(Ee)}),n.prototype.readIntLE=function(se,le,ne){se>>>=0,le>>>=0,ne||N(se,le,this.length);for(var me=this[se],Ee=1,be=0;++be<le&&(Ee*=256);)me+=this[se+be]*Ee;return me>=(Ee*=128)&&(me-=Math.pow(2,8*le)),me},n.prototype.readIntBE=function(se,le,ne){se>>>=0,le>>>=0,ne||N(se,le,this.length);for(var me=le,Ee=1,be=this[se+--me];me>0&&(Ee*=256);)be+=this[se+--me]*Ee;return be>=(Ee*=128)&&(be-=Math.pow(2,8*le)),be},n.prototype.readInt8=function(se,le){return se>>>=0,le||N(se,1,this.length),128&this[se]?-1*(255-this[se]+1):this[se]},n.prototype.readInt16LE=function(se,le){se>>>=0,le||N(se,2,this.length);var ne=this[se]|this[se+1]<<8;return 32768&ne?4294901760|ne:ne},n.prototype.readInt16BE=function(se,le){se>>>=0,le||N(se,2,this.length);var ne=this[se+1]|this[se]<<8;return 32768&ne?4294901760|ne:ne},n.prototype.readInt32LE=function(se,le){return se>>>=0,le||N(se,4,this.length),this[se]|this[se+1]<<8|this[se+2]<<16|this[se+3]<<24},n.prototype.readInt32BE=function(se,le){return se>>>=0,le||N(se,4,this.length),this[se]<<24|this[se+1]<<16|this[se+2]<<8|this[se+3]},n.prototype.readBigInt64LE=Ae(function(se){ae(se>>>=0,"offset");var le=this[se],ne=this[se+7];le!==void 0&&ne!==void 0||oe(se,this.length-8);var me=this[se+4]+this[se+5]*Math.pow(2,8)+this[se+6]*Math.pow(2,16)+(ne<<24);return(BigInt(me)<<BigInt(32))+BigInt(le+this[++se]*Math.pow(2,8)+this[++se]*Math.pow(2,16)+this[++se]*Math.pow(2,24))}),n.prototype.readBigInt64BE=Ae(function(se){ae(se>>>=0,"offset");var le=this[se],ne=this[se+7];le!==void 0&&ne!==void 0||oe(se,this.length-8);var me=(le<<24)+this[++se]*Math.pow(2,16)+this[++se]*Math.pow(2,8)+this[++se];return(BigInt(me)<<BigInt(32))+BigInt(this[++se]*Math.pow(2,24)+this[++se]*Math.pow(2,16)+this[++se]*Math.pow(2,8)+ne)}),n.prototype.readFloatLE=function(se,le){return se>>>=0,le||N(se,4,this.length),s.read(this,se,!0,23,4)},n.prototype.readFloatBE=function(se,le){return se>>>=0,le||N(se,4,this.length),s.read(this,se,!1,23,4)},n.prototype.readDoubleLE=function(se,le){return se>>>=0,le||N(se,8,this.length),s.read(this,se,!0,52,8)},n.prototype.readDoubleBE=function(se,le){return se>>>=0,le||N(se,8,this.length),s.read(this,se,!1,52,8)},n.prototype.writeUintLE=n.prototype.writeUIntLE=function(se,le,ne,me){se=+se,le>>>=0,ne>>>=0,me||F(this,se,le,ne,Math.pow(2,8*ne)-1,0);var Ee=1,be=0;for(this[le]=255&se;++be<ne&&(Ee*=256);)this[le+be]=se/Ee&255;return le+ne},n.prototype.writeUintBE=n.prototype.writeUIntBE=function(se,le,ne,me){se=+se,le>>>=0,ne>>>=0,me||F(this,se,le,ne,Math.pow(2,8*ne)-1,0);var Ee=ne-1,be=1;for(this[le+Ee]=255&se;--Ee>=0&&(be*=256);)this[le+Ee]=se/be&255;return le+ne},n.prototype.writeUint8=n.prototype.writeUInt8=function(se,le,ne){return se=+se,le>>>=0,ne||F(this,se,le,1,255,0),this[le]=255&se,le+1},n.prototype.writeUint16LE=n.prototype.writeUInt16LE=function(se,le,ne){return se=+se,le>>>=0,ne||F(this,se,le,2,65535,0),this[le]=255&se,this[le+1]=se>>>8,le+2},n.prototype.writeUint16BE=n.prototype.writeUInt16BE=function(se,le,ne){return se=+se,le>>>=0,ne||F(this,se,le,2,65535,0),this[le]=se>>>8,this[le+1]=255&se,le+2},n.prototype.writeUint32LE=n.prototype.writeUInt32LE=function(se,le,ne){return se=+se,le>>>=0,ne||F(this,se,le,4,4294967295,0),this[le+3]=se>>>24,this[le+2]=se>>>16,this[le+1]=se>>>8,this[le]=255&se,le+4},n.prototype.writeUint32BE=n.prototype.writeUInt32BE=function(se,le,ne){return se=+se,le>>>=0,ne||F(this,se,le,4,4294967295,0),this[le]=se>>>24,this[le+1]=se>>>16,this[le+2]=se>>>8,this[le+3]=255&se,le+4},n.prototype.writeBigUInt64LE=Ae(function(se){return V(this,se,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeBigUInt64BE=Ae(function(se){return q(this,se,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeIntLE=function(se,le,ne,me){if(se=+se,le>>>=0,!me){var Ee=Math.pow(2,8*ne-1);F(this,se,le,ne,Ee-1,-Ee)}var be=0,De=1,Ue=0;for(this[le]=255&se;++be<ne&&(De*=256);)se<0&&Ue===0&&this[le+be-1]!==0&&(Ue=1),this[le+be]=(se/De>>0)-Ue&255;return le+ne},n.prototype.writeIntBE=function(se,le,ne,me){if(se=+se,le>>>=0,!me){var Ee=Math.pow(2,8*ne-1);F(this,se,le,ne,Ee-1,-Ee)}var be=ne-1,De=1,Ue=0;for(this[le+be]=255&se;--be>=0&&(De*=256);)se<0&&Ue===0&&this[le+be+1]!==0&&(Ue=1),this[le+be]=(se/De>>0)-Ue&255;return le+ne},n.prototype.writeInt8=function(se,le,ne){return se=+se,le>>>=0,ne||F(this,se,le,1,127,-128),se<0&&(se=255+se+1),this[le]=255&se,le+1},n.prototype.writeInt16LE=function(se,le,ne){return se=+se,le>>>=0,ne||F(this,se,le,2,32767,-32768),this[le]=255&se,this[le+1]=se>>>8,le+2},n.prototype.writeInt16BE=function(se,le,ne){return se=+se,le>>>=0,ne||F(this,se,le,2,32767,-32768),this[le]=se>>>8,this[le+1]=255&se,le+2},n.prototype.writeInt32LE=function(se,le,ne){return se=+se,le>>>=0,ne||F(this,se,le,4,2147483647,-2147483648),this[le]=255&se,this[le+1]=se>>>8,this[le+2]=se>>>16,this[le+3]=se>>>24,le+4},n.prototype.writeInt32BE=function(se,le,ne){return se=+se,le>>>=0,ne||F(this,se,le,4,2147483647,-2147483648),se<0&&(se=4294967295+se+1),this[le]=se>>>24,this[le+1]=se>>>16,this[le+2]=se>>>8,this[le+3]=255&se,le+4},n.prototype.writeBigInt64LE=Ae(function(se){return V(this,se,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeBigInt64BE=Ae(function(se){return q(this,se,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeFloatLE=function(se,le,ne){return $(this,se,le,!0,ne)},n.prototype.writeFloatBE=function(se,le,ne){return $(this,se,le,!1,ne)},n.prototype.writeDoubleLE=function(se,le,ne){return W(this,se,le,!0,ne)},n.prototype.writeDoubleBE=function(se,le,ne){return W(this,se,le,!1,ne)},n.prototype.copy=function(se,le,ne,me){if(!n.isBuffer(se))throw new TypeError("argument should be a Buffer");if(ne||(ne=0),me||me===0||(me=this.length),le>=se.length&&(le=se.length),le||(le=0),me>0&&me<ne&&(me=ne),me===ne||se.length===0||this.length===0)return 0;if(le<0)throw new RangeError("targetStart out of bounds");if(ne<0||ne>=this.length)throw new RangeError("Index out of range");if(me<0)throw new RangeError("sourceEnd out of bounds");me>this.length&&(me=this.length),se.length-le<me-ne&&(me=se.length-le+ne);var Ee=me-ne;return this===se&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(le,ne,me):Uint8Array.prototype.set.call(se,this.subarray(ne,me),le),Ee},n.prototype.fill=function(se,le,ne,me){if(typeof se=="string"){if(typeof le=="string"?(me=le,le=0,ne=this.length):typeof ne=="string"&&(me=ne,ne=this.length),me!==void 0&&typeof me!="string")throw new TypeError("encoding must be a string");if(typeof me=="string"&&!n.isEncoding(me))throw new TypeError("Unknown encoding: "+me);if(se.length===1){var Ee=se.charCodeAt(0);(me==="utf8"&&Ee<128||me==="latin1")&&(se=Ee)}}else typeof se=="number"?se&=255:typeof se=="boolean"&&(se=Number(se));if(le<0||this.length<le||this.length<ne)throw new RangeError("Out of range index");if(ne<=le)return this;var be;if(le>>>=0,ne=ne===void 0?this.length:ne>>>0,se||(se=0),typeof se=="number")for(be=le;be<ne;++be)this[be]=se;else{var De=n.isBuffer(se)?se:n.from(se,me),Ue=De.length;if(Ue===0)throw new TypeError('The value "'+se+'" is invalid for argument "value"');for(be=0;be<ne-le;++be)this[be+le]=De[be%Ue]}return this};var Z={};function J(se,le,ne){Z[se]=function(me){(function(_e,Ce){if(typeof Ce!="function"&&Ce!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(Ce&&Ce.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),Ce&&k(_e,Ce)})(ke,me);var Ee,be,De,Ue,he=(De=ke,Ue=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var _e,Ce=T(De);if(Ue){var Fe=T(this).constructor;_e=Reflect.construct(Ce,arguments,Fe)}else _e=Ce.apply(this,arguments);return function(Re,He){if(He&&(b(He)==="object"||typeof He=="function"))return He;if(He!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l(Re)}(this,_e)});function ke(){var _e;return function(Ce,Fe){if(!(Ce instanceof Fe))throw new TypeError("Cannot call a class as a function")}(this,ke),_e=he.call(this),Object.defineProperty(l(_e),"message",{value:le.apply(l(_e),arguments),writable:!0,configurable:!0}),_e.name="".concat(_e.name," [").concat(se,"]"),_e.stack,delete _e.name,_e}return Ee=ke,(be=[{key:"code",get:function(){return se},set:function(_e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:_e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(se,"]: ").concat(this.message)}}])&&S(Ee.prototype,be),Object.defineProperty(Ee,"prototype",{writable:!1}),ke}(ne)}function ee(se){for(var le="",ne=se.length,me=se[0]==="-"?1:0;ne>=me+4;ne-=3)le="_".concat(se.slice(ne-3,ne)).concat(le);return"".concat(se.slice(0,ne)).concat(le)}function re(se,le,ne,me,Ee,be){if(se>ne||se<le){var De,Ue=typeof le=="bigint"?"n":"";throw De=be>3?le===0||le===BigInt(0)?">= 0".concat(Ue," and < 2").concat(Ue," ** ").concat(8*(be+1)).concat(Ue):">= -(2".concat(Ue," ** ").concat(8*(be+1)-1).concat(Ue,") and < 2 ** ")+"".concat(8*(be+1)-1).concat(Ue):">= ".concat(le).concat(Ue," and <= ").concat(ne).concat(Ue),new Z.ERR_OUT_OF_RANGE("value",De,se)}(function(he,ke,_e){ae(ke,"offset"),he[ke]!==void 0&&he[ke+_e]!==void 0||oe(ke,he.length-(_e+1))})(me,Ee,be)}function ae(se,le){if(typeof se!="number")throw new Z.ERR_INVALID_ARG_TYPE(le,"number",se)}function oe(se,le,ne){throw Math.floor(se)!==se?(ae(se,ne),new Z.ERR_OUT_OF_RANGE(ne||"offset","an integer",se)):le<0?new Z.ERR_BUFFER_OUT_OF_BOUNDS:new Z.ERR_OUT_OF_RANGE(ne||"offset",">= ".concat(ne?1:0," and <= ").concat(le),se)}J("ERR_BUFFER_OUT_OF_BOUNDS",function(se){return se?"".concat(se," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),J("ERR_INVALID_ARG_TYPE",function(se,le){return'The "'.concat(se,'" argument must be of type number. Received type ').concat(b(le))},TypeError),J("ERR_OUT_OF_RANGE",function(se,le,ne){var me='The value of "'.concat(se,'" is out of range.'),Ee=ne;return Number.isInteger(ne)&&Math.abs(ne)>Math.pow(2,32)?Ee=ee(String(ne)):typeof ne=="bigint"&&(Ee=String(ne),(ne>Math.pow(BigInt(2),BigInt(32))||ne<-Math.pow(BigInt(2),BigInt(32)))&&(Ee=ee(Ee)),Ee+="n"),me+" It must be ".concat(le,". Received ").concat(Ee)},RangeError);var ce=/[^+/0-9A-Za-z-_]/g;function pe(se,le){var ne;le=le||1/0;for(var me=se.length,Ee=null,be=[],De=0;De<me;++De){if((ne=se.charCodeAt(De))>55295&&ne<57344){if(!Ee){if(ne>56319){(le-=3)>-1&&be.push(239,191,189);continue}if(De+1===me){(le-=3)>-1&&be.push(239,191,189);continue}Ee=ne;continue}if(ne<56320){(le-=3)>-1&&be.push(239,191,189),Ee=ne;continue}ne=65536+(Ee-55296<<10|ne-56320)}else Ee&&(le-=3)>-1&&be.push(239,191,189);if(Ee=null,ne<128){if((le-=1)<0)break;be.push(ne)}else if(ne<2048){if((le-=2)<0)break;be.push(ne>>6|192,63&ne|128)}else if(ne<65536){if((le-=3)<0)break;be.push(ne>>12|224,ne>>6&63|128,63&ne|128)}else{if(!(ne<1114112))throw new Error("Invalid code point");if((le-=4)<0)break;be.push(ne>>18|240,ne>>12&63|128,ne>>6&63|128,63&ne|128)}}return be}function ve(se){return d.toByteArray(function(le){if((le=(le=le.split("=")[0]).trim().replace(ce,"")).length<2)return"";for(;le.length%4!=0;)le+="=";return le}(se))}function we(se,le,ne,me){var Ee;for(Ee=0;Ee<me&&!(Ee+ne>=le.length||Ee>=se.length);++Ee)le[Ee+ne]=se[Ee];return Ee}function xe(se,le){return se instanceof le||se!=null&&se.constructor!=null&&se.constructor.name!=null&&se.constructor.name===le.name}function ge(se){return se!=se}var Oe=function(){for(var se="0123456789abcdef",le=new Array(256),ne=0;ne<16;++ne)for(var me=16*ne,Ee=0;Ee<16;++Ee)le[me+Ee]=se[ne]+se[Ee];return le}();function Ae(se){return typeof BigInt>"u"?Te:se}function Te(){throw new Error("BigInt not supported")}},35791:function(Q){Q.exports=k,Q.exports.isMobile=k,Q.exports.default=k;var z=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/CrOS/,S=/android|ipad|playbook|silk/i;function k(l){l||(l={});var T=l.ua;if(T||typeof navigator>"u"||(T=navigator.userAgent),T&&T.headers&&typeof T.headers["user-agent"]=="string"&&(T=T.headers["user-agent"]),typeof T!="string")return!1;var b=z.test(T)&&!t.test(T)||!!l.tablet&&S.test(T);return!b&&l.tablet&&l.featureDetect&&navigator&&navigator.maxTouchPoints>1&&T.indexOf("Macintosh")!==-1&&T.indexOf("Safari")!==-1&&(b=!0),b}},86781:function(Q,z,t){t.r(z),t.d(z,{sankeyCenter:function(){return r},sankeyCircular:function(){return L},sankeyJustify:function(){return i},sankeyLeft:function(){return s},sankeyRight:function(){return e}});var S=t(33064),k=t(15140),l=t(45879),T=t(2502),b=t.n(T);function d(we){return we.target.depth}function s(we){return we.depth}function e(we,xe){return xe-1-we.height}function i(we,xe){return we.sourceLinks.length?we.depth:xe-1}function r(we){return we.targetLinks.length?we.depth:we.sourceLinks.length?(0,S.VV)(we.sourceLinks,d)-1:0}function n(we){return function(){return we}}var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(we){return typeof we}:function(we){return we&&typeof Symbol=="function"&&we.constructor===Symbol&&we!==Symbol.prototype?"symbol":typeof we};function o(we,xe){return p(we.source,xe.source)||we.index-xe.index}function u(we,xe){return p(we.target,xe.target)||we.index-xe.index}function p(we,xe){return we.partOfCycle===xe.partOfCycle?we.y0-xe.y0:we.circularLinkType==="top"||xe.circularLinkType==="bottom"?-1:1}function c(we){return we.value}function x(we){return(we.y0+we.y1)/2}function g(we){return x(we.source)}function f(we){return x(we.target)}function y(we){return we.index}function v(we){return we.nodes}function m(we){return we.links}function _(we,xe){var ge=we.get(xe);if(!ge)throw new Error("missing: "+xe);return ge}function h(we,xe){return xe(we)}var A=25,w=10,E=.3;function L(){var we,xe,ge=0,Oe=0,Ae=1,Te=1,se=24,le=y,ne=i,me=v,Ee=m,be=32,De=2,Ue=null;function he(){var _e={nodes:me.apply(null,arguments),links:Ee.apply(null,arguments)};(function(Fe){Fe.nodes.forEach(function(He,Ge){He.index=Ge,He.sourceLinks=[],He.targetLinks=[]});var Re=(0,k.UI)(Fe.nodes,le);Fe.links.forEach(function(He,Ge){He.index=Ge;var $e=He.source,st=He.target;($e===void 0?"undefined":a($e))!=="object"&&($e=He.source=_(Re,$e)),(st===void 0?"undefined":a(st))!=="object"&&(st=He.target=_(Re,st)),$e.sourceLinks.push(He),st.targetLinks.push(He)})})(_e),function(Fe,Re,He){var Ge=0;if(He===null){for(var $e=[],st=0;st<Fe.links.length;st++){var Ke=Fe.links[st],gt=Ke.source.index,mt=Ke.target.index;$e[gt]||($e[gt]=[]),$e[mt]||($e[mt]=[]),$e[gt].indexOf(mt)===-1&&$e[gt].push(mt)}var at=b()($e);at.sort(function(Tt,wt){return Tt.length-wt.length});var rt={};for(st=0;st<at.length;st++){var xt=at[st].slice(-2);rt[xt[0]]||(rt[xt[0]]={}),rt[xt[0]][xt[1]]=!0}Fe.links.forEach(function(Tt){var wt=Tt.target.index,Ot=Tt.source.index;wt===Ot||rt[Ot]&&rt[Ot][wt]?(Tt.circular=!0,Tt.circularLinkID=Ge,Ge+=1):Tt.circular=!1})}else Fe.links.forEach(function(Tt){Tt.source[He]<Tt.target[He]?Tt.circular=!1:(Tt.circular=!0,Tt.circularLinkID=Ge,Ge+=1)})}(_e,0,Ue),function(Fe){Fe.nodes.forEach(function(Re){Re.partOfCycle=!1,Re.value=Math.max((0,S.Sm)(Re.sourceLinks,c),(0,S.Sm)(Re.targetLinks,c)),Re.sourceLinks.forEach(function(He){He.circular&&(Re.partOfCycle=!0,Re.circularLinkType=He.circularLinkType)}),Re.targetLinks.forEach(function(He){He.circular&&(Re.partOfCycle=!0,Re.circularLinkType=He.circularLinkType)})})}(_e),function(Fe){var Re,He,Ge;for(Re=Fe.nodes,He=[],Ge=0;Re.length;++Ge,Re=He,He=[])Re.forEach(function($e){$e.depth=Ge,$e.sourceLinks.forEach(function(st){He.indexOf(st.target)<0&&!st.circular&&He.push(st.target)})});for(Re=Fe.nodes,He=[],Ge=0;Re.length;++Ge,Re=He,He=[])Re.forEach(function($e){$e.height=Ge,$e.targetLinks.forEach(function(st){He.indexOf(st.source)<0&&!st.circular&&He.push(st.source)})});Fe.nodes.forEach(function($e){$e.column=Math.floor(ne.call(null,$e,Ge))})}(_e),C(_e,le),function(Fe,Re,He){var Ge=(0,k.b1)().key(function(mt){return mt.column}).sortKeys(S.j2).entries(Fe.nodes).map(function(mt){return mt.values});(function(mt){if(xe){var at=1/0;Ge.forEach(function(wt){var Ot=Te*xe/(wt.length+1);at=Ot<at?Ot:at}),we=at}var rt=(0,S.VV)(Ge,function(wt){return(Te-Oe-(wt.length-1)*we)/(0,S.Sm)(wt,c)});rt*=E,Fe.links.forEach(function(wt){wt.width=wt.value*rt});var xt=function(wt){var Ot=0,Ct=0,Ye=0,Xe=0,Ve=(0,S.Fp)(wt.nodes,function(We){return We.column});return wt.links.forEach(function(We){We.circular&&(We.circularLinkType=="top"?Ot+=We.width:Ct+=We.width,We.target.column==0&&(Xe+=We.width),We.source.column==Ve&&(Ye+=We.width))}),{top:Ot=Ot>0?Ot+A+w:Ot,bottom:Ct=Ct>0?Ct+A+w:Ct,left:Xe=Xe>0?Xe+A+w:Xe,right:Ye=Ye>0?Ye+A+w:Ye}}(Fe),Tt=function(wt,Ot){var Ct=(0,S.Fp)(wt.nodes,function(nt){return nt.column}),Ye=Ae-ge,Xe=Te-Oe,Ve=Ye/(Ye+Ot.right+Ot.left),We=Xe/(Xe+Ot.top+Ot.bottom);return ge=ge*Ve+Ot.left,Ae=Ot.right==0?Ae:Ae*Ve,Oe=Oe*We+Ot.top,Te*=We,wt.nodes.forEach(function(nt){nt.x0=ge+nt.column*((Ae-ge-se)/Ct),nt.x1=nt.x0+se}),We}(Fe,xt);rt*=Tt,Fe.links.forEach(function(wt){wt.width=wt.value*rt}),Ge.forEach(function(wt){var Ot=wt.length;wt.forEach(function(Ct,Ye){Ct.depth==Ge.length-1&&Ot==1||Ct.depth==0&&Ot==1?(Ct.y0=Te/2-Ct.value*rt,Ct.y1=Ct.y0+Ct.value*rt):Ct.partOfCycle?D(Ct,mt)==0?(Ct.y0=Te/2+Ye,Ct.y1=Ct.y0+Ct.value*rt):Ct.circularLinkType=="top"?(Ct.y0=Oe+Ye,Ct.y1=Ct.y0+Ct.value*rt):(Ct.y0=Te-Ct.value*rt-Ye,Ct.y1=Ct.y0+Ct.value*rt):xt.top==0||xt.bottom==0?(Ct.y0=(Te-Oe)/Ot*Ye,Ct.y1=Ct.y0+Ct.value*rt):(Ct.y0=(Te-Oe)/2-Ot/2+Ye,Ct.y1=Ct.y0+Ct.value*rt)})})})(He),gt();for(var $e=1,st=Re;st>0;--st)Ke($e*=.99,He),gt();function Ke(mt,at){var rt=Ge.length;Ge.forEach(function(xt){var Tt=xt.length,wt=xt[0].depth;xt.forEach(function(Ot){var Ct;if((Ot.sourceLinks.length||Ot.targetLinks.length)&&!(Ot.partOfCycle&&D(Ot,at)>0))if(wt==0&&Tt==1)Ct=Ot.y1-Ot.y0,Ot.y0=Te/2-Ct/2,Ot.y1=Te/2+Ct/2;else if(wt==rt-1&&Tt==1)Ct=Ot.y1-Ot.y0,Ot.y0=Te/2-Ct/2,Ot.y1=Te/2+Ct/2;else{var Ye=(0,S.J6)(Ot.sourceLinks,f),Xe=(0,S.J6)(Ot.targetLinks,g),Ve=((Ye&&Xe?(Ye+Xe)/2:Ye||Xe)-x(Ot))*mt;Ot.y0+=Ve,Ot.y1+=Ve}})})}function gt(){Ge.forEach(function(mt){var at,rt,xt,Tt=Oe,wt=mt.length;for(mt.sort(p),xt=0;xt<wt;++xt)(rt=Tt-(at=mt[xt]).y0)>0&&(at.y0+=rt,at.y1+=rt),Tt=at.y1+we;if((rt=Tt-we-Te)>0)for(Tt=at.y0-=rt,at.y1-=rt,xt=wt-2;xt>=0;--xt)(rt=(at=mt[xt]).y1+we-Tt)>0&&(at.y0-=rt,at.y1-=rt),Tt=at.y0})}}(_e,be,le),ke(_e);for(var Ce=0;Ce<4;Ce++)ae(_e,Te,le),oe(_e,0,le),ee(_e,Oe,Te,le),ae(_e,Te,le),oe(_e,0,le);return function(Fe,Re,He){var Ge=Fe.nodes,$e=Fe.links,st=!1,Ke=!1;if($e.forEach(function(at){at.circularLinkType=="top"?st=!0:at.circularLinkType=="bottom"&&(Ke=!0)}),st==0||Ke==0){var gt=(0,S.VV)(Ge,function(at){return at.y0}),mt=(He-Re)/((0,S.Fp)(Ge,function(at){return at.y1})-gt);Ge.forEach(function(at){var rt=(at.y1-at.y0)*mt;at.y0=(at.y0-gt)*mt,at.y1=at.y0+rt}),$e.forEach(function(at){at.y0=(at.y0-gt)*mt,at.y1=(at.y1-gt)*mt,at.width=at.width*mt})}}(_e,Oe,Te),H(_e,De,Te,le),_e}function ke(_e){_e.nodes.forEach(function(Ce){Ce.sourceLinks.sort(u),Ce.targetLinks.sort(o)}),_e.nodes.forEach(function(Ce){var Fe=Ce.y0,Re=Fe,He=Ce.y1,Ge=He;Ce.sourceLinks.forEach(function($e){$e.circular?($e.y0=He-$e.width/2,He-=$e.width):($e.y0=Fe+$e.width/2,Fe+=$e.width)}),Ce.targetLinks.forEach(function($e){$e.circular?($e.y1=Ge-$e.width/2,Ge-=$e.width):($e.y1=Re+$e.width/2,Re+=$e.width)})})}return he.nodeId=function(_e){return arguments.length?(le=typeof _e=="function"?_e:n(_e),he):le},he.nodeAlign=function(_e){return arguments.length?(ne=typeof _e=="function"?_e:n(_e),he):ne},he.nodeWidth=function(_e){return arguments.length?(se=+_e,he):se},he.nodePadding=function(_e){return arguments.length?(we=+_e,he):we},he.nodes=function(_e){return arguments.length?(me=typeof _e=="function"?_e:n(_e),he):me},he.links=function(_e){return arguments.length?(Ee=typeof _e=="function"?_e:n(_e),he):Ee},he.size=function(_e){return arguments.length?(ge=Oe=0,Ae=+_e[0],Te=+_e[1],he):[Ae-ge,Te-Oe]},he.extent=function(_e){return arguments.length?(ge=+_e[0][0],Ae=+_e[1][0],Oe=+_e[0][1],Te=+_e[1][1],he):[[ge,Oe],[Ae,Te]]},he.iterations=function(_e){return arguments.length?(be=+_e,he):be},he.circularLinkGap=function(_e){return arguments.length?(De=+_e,he):De},he.nodePaddingRatio=function(_e){return arguments.length?(xe=+_e,he):xe},he.sortNodes=function(_e){return arguments.length?(Ue=_e,he):Ue},he.update=function(_e){return C(_e,le),ke(_e),_e.links.forEach(function(Ce){Ce.circular&&(Ce.circularLinkType=Ce.y0+Ce.y1<Te?"top":"bottom",Ce.source.circularLinkType=Ce.circularLinkType,Ce.target.circularLinkType=Ce.circularLinkType)}),ae(_e,Te,le,!1),oe(_e,0,le),H(_e,De,Te,le),_e},he}function C(we,xe){var ge=0,Oe=0;we.links.forEach(function(Ae){Ae.circular&&(Ae.source.circularLinkType||Ae.target.circularLinkType?Ae.circularLinkType=Ae.source.circularLinkType?Ae.source.circularLinkType:Ae.target.circularLinkType:Ae.circularLinkType=ge<Oe?"top":"bottom",Ae.circularLinkType=="top"?ge+=1:Oe+=1,we.nodes.forEach(function(Te){h(Te,xe)!=h(Ae.source,xe)&&h(Te,xe)!=h(Ae.target,xe)||(Te.circularLinkType=Ae.circularLinkType)}))}),we.links.forEach(function(Ae){Ae.circular&&(Ae.source.circularLinkType==Ae.target.circularLinkType&&(Ae.circularLinkType=Ae.source.circularLinkType),ve(Ae,xe)&&(Ae.circularLinkType=Ae.source.circularLinkType))})}function P(we){var xe=Math.abs(we.y1-we.y0),ge=Math.abs(we.target.x0-we.source.x1);return Math.atan(ge/xe)}function D(we,xe){var ge=0;we.sourceLinks.forEach(function(Ae){ge=Ae.circular&&!ve(Ae,xe)?ge+1:ge});var Oe=0;return we.targetLinks.forEach(function(Ae){Oe=Ae.circular&&!ve(Ae,xe)?Oe+1:Oe}),ge+Oe}function G(we){var xe=we.source.sourceLinks,ge=0;xe.forEach(function(Te){ge=Te.circular?ge+1:ge});var Oe=we.target.targetLinks,Ae=0;return Oe.forEach(function(Te){Ae=Te.circular?Ae+1:Ae}),!(ge>1||Ae>1)}function I(we,xe,ge){return we.sort(N),we.forEach(function(Oe,Ae){var Te,se,le=0;if(ve(Oe,ge)&&G(Oe))Oe.circularPathData.verticalBuffer=le+Oe.width/2;else{for(var ne=0;ne<Ae;ne++)if(Te=we[Ae],se=we[ne],!(Te.source.column<se.target.column||Te.target.column>se.source.column)){var me=we[ne].circularPathData.verticalBuffer+we[ne].width/2+xe;le=me>le?me:le}Oe.circularPathData.verticalBuffer=le+Oe.width/2}}),we}function H(we,xe,ge,Oe){var Ae=(0,S.VV)(we.links,function(Te){return Te.source.y0});we.links.forEach(function(Te){Te.circular&&(Te.circularPathData={})}),I(we.links.filter(function(Te){return Te.circularLinkType=="top"}),xe,Oe),I(we.links.filter(function(Te){return Te.circularLinkType=="bottom"}),xe,Oe),we.links.forEach(function(Te){if(Te.circular){if(Te.circularPathData.arcRadius=Te.width+w,Te.circularPathData.leftNodeBuffer=5,Te.circularPathData.rightNodeBuffer=5,Te.circularPathData.sourceWidth=Te.source.x1-Te.source.x0,Te.circularPathData.sourceX=Te.source.x0+Te.circularPathData.sourceWidth,Te.circularPathData.targetX=Te.target.x0,Te.circularPathData.sourceY=Te.y0,Te.circularPathData.targetY=Te.y1,ve(Te,Oe)&&G(Te))Te.circularPathData.leftSmallArcRadius=w+Te.width/2,Te.circularPathData.leftLargeArcRadius=w+Te.width/2,Te.circularPathData.rightSmallArcRadius=w+Te.width/2,Te.circularPathData.rightLargeArcRadius=w+Te.width/2,Te.circularLinkType=="bottom"?(Te.circularPathData.verticalFullExtent=Te.source.y1+A+Te.circularPathData.verticalBuffer,Te.circularPathData.verticalLeftInnerExtent=Te.circularPathData.verticalFullExtent-Te.circularPathData.leftLargeArcRadius,Te.circularPathData.verticalRightInnerExtent=Te.circularPathData.verticalFullExtent-Te.circularPathData.rightLargeArcRadius):(Te.circularPathData.verticalFullExtent=Te.source.y0-A-Te.circularPathData.verticalBuffer,Te.circularPathData.verticalLeftInnerExtent=Te.circularPathData.verticalFullExtent+Te.circularPathData.leftLargeArcRadius,Te.circularPathData.verticalRightInnerExtent=Te.circularPathData.verticalFullExtent+Te.circularPathData.rightLargeArcRadius);else{var se=Te.source.column,le=Te.circularLinkType,ne=we.links.filter(function(be){return be.source.column==se&&be.circularLinkType==le});Te.circularLinkType=="bottom"?ne.sort(V):ne.sort(F);var me=0;ne.forEach(function(be,De){be.circularLinkID==Te.circularLinkID&&(Te.circularPathData.leftSmallArcRadius=w+Te.width/2+me,Te.circularPathData.leftLargeArcRadius=w+Te.width/2+De*xe+me),me+=be.width}),se=Te.target.column,ne=we.links.filter(function(be){return be.target.column==se&&be.circularLinkType==le}),Te.circularLinkType=="bottom"?ne.sort(te):ne.sort(q),me=0,ne.forEach(function(be,De){be.circularLinkID==Te.circularLinkID&&(Te.circularPathData.rightSmallArcRadius=w+Te.width/2+me,Te.circularPathData.rightLargeArcRadius=w+Te.width/2+De*xe+me),me+=be.width}),Te.circularLinkType=="bottom"?(Te.circularPathData.verticalFullExtent=Math.max(ge,Te.source.y1,Te.target.y1)+A+Te.circularPathData.verticalBuffer,Te.circularPathData.verticalLeftInnerExtent=Te.circularPathData.verticalFullExtent-Te.circularPathData.leftLargeArcRadius,Te.circularPathData.verticalRightInnerExtent=Te.circularPathData.verticalFullExtent-Te.circularPathData.rightLargeArcRadius):(Te.circularPathData.verticalFullExtent=Ae-A-Te.circularPathData.verticalBuffer,Te.circularPathData.verticalLeftInnerExtent=Te.circularPathData.verticalFullExtent+Te.circularPathData.leftLargeArcRadius,Te.circularPathData.verticalRightInnerExtent=Te.circularPathData.verticalFullExtent+Te.circularPathData.rightLargeArcRadius)}Te.circularPathData.leftInnerExtent=Te.circularPathData.sourceX+Te.circularPathData.leftNodeBuffer,Te.circularPathData.rightInnerExtent=Te.circularPathData.targetX-Te.circularPathData.rightNodeBuffer,Te.circularPathData.leftFullExtent=Te.circularPathData.sourceX+Te.circularPathData.leftLargeArcRadius+Te.circularPathData.leftNodeBuffer,Te.circularPathData.rightFullExtent=Te.circularPathData.targetX-Te.circularPathData.rightLargeArcRadius-Te.circularPathData.rightNodeBuffer}if(Te.circular)Te.path=function(be){return be.circularLinkType=="top"?"M"+be.circularPathData.sourceX+" "+be.circularPathData.sourceY+" L"+be.circularPathData.leftInnerExtent+" "+be.circularPathData.sourceY+" A"+be.circularPathData.leftLargeArcRadius+" "+be.circularPathData.leftSmallArcRadius+" 0 0 0 "+be.circularPathData.leftFullExtent+" "+(be.circularPathData.sourceY-be.circularPathData.leftSmallArcRadius)+" L"+be.circularPathData.leftFullExtent+" "+be.circularPathData.verticalLeftInnerExtent+" A"+be.circularPathData.leftLargeArcRadius+" "+be.circularPathData.leftLargeArcRadius+" 0 0 0 "+be.circularPathData.leftInnerExtent+" "+be.circularPathData.verticalFullExtent+" L"+be.circularPathData.rightInnerExtent+" "+be.circularPathData.verticalFullExtent+" A"+be.circularPathData.rightLargeArcRadius+" "+be.circularPathData.rightLargeArcRadius+" 0 0 0 "+be.circularPathData.rightFullExtent+" "+be.circularPathData.verticalRightInnerExtent+" L"+be.circularPathData.rightFullExtent+" "+(be.circularPathData.targetY-be.circularPathData.rightSmallArcRadius)+" A"+be.circularPathData.rightLargeArcRadius+" "+be.circularPathData.rightSmallArcRadius+" 0 0 0 "+be.circularPathData.rightInnerExtent+" "+be.circularPathData.targetY+" L"+be.circularPathData.targetX+" "+be.circularPathData.targetY:"M"+be.circularPathData.sourceX+" "+be.circularPathData.sourceY+" L"+be.circularPathData.leftInnerExtent+" "+be.circularPathData.sourceY+" A"+be.circularPathData.leftLargeArcRadius+" "+be.circularPathData.leftSmallArcRadius+" 0 0 1 "+be.circularPathData.leftFullExtent+" "+(be.circularPathData.sourceY+be.circularPathData.leftSmallArcRadius)+" L"+be.circularPathData.leftFullExtent+" "+be.circularPathData.verticalLeftInnerExtent+" A"+be.circularPathData.leftLargeArcRadius+" "+be.circularPathData.leftLargeArcRadius+" 0 0 1 "+be.circularPathData.leftInnerExtent+" "+be.circularPathData.verticalFullExtent+" L"+be.circularPathData.rightInnerExtent+" "+be.circularPathData.verticalFullExtent+" A"+be.circularPathData.rightLargeArcRadius+" "+be.circularPathData.rightLargeArcRadius+" 0 0 1 "+be.circularPathData.rightFullExtent+" "+be.circularPathData.verticalRightInnerExtent+" L"+be.circularPathData.rightFullExtent+" "+(be.circularPathData.targetY+be.circularPathData.rightSmallArcRadius)+" A"+be.circularPathData.rightLargeArcRadius+" "+be.circularPathData.rightSmallArcRadius+" 0 0 1 "+be.circularPathData.rightInnerExtent+" "+be.circularPathData.targetY+" L"+be.circularPathData.targetX+" "+be.circularPathData.targetY}(Te);else{var Ee=(0,l.h5)().source(function(be){return[be.source.x0+(be.source.x1-be.source.x0),be.y0]}).target(function(be){return[be.target.x0,be.y1]});Te.path=Ee(Te)}})}function N(we,xe){return $(we)==$(xe)?we.circularLinkType=="bottom"?V(we,xe):F(we,xe):$(xe)-$(we)}function F(we,xe){return we.y0-xe.y0}function V(we,xe){return xe.y0-we.y0}function q(we,xe){return we.y1-xe.y1}function te(we,xe){return xe.y1-we.y1}function $(we){return we.target.column-we.source.column}function W(we){return we.target.x0-we.source.x1}function Z(we,xe){var ge=P(we),Oe=W(xe)/Math.tan(ge);return pe(we)=="up"?we.y1+Oe:we.y1-Oe}function J(we,xe){var ge=P(we),Oe=W(xe)/Math.tan(ge);return pe(we)=="up"?we.y1-Oe:we.y1+Oe}function ee(we,xe,ge,Oe){we.links.forEach(function(Ae){if(!Ae.circular&&Ae.target.column-Ae.source.column>1){var Te=Ae.source.column+1,se=Ae.target.column-1,le=1,ne=se-Te+1;for(le=1;Te<=se;Te++,le++)we.nodes.forEach(function(me){if(me.column==Te){var Ee,be=le/(ne+1),De=Math.pow(1-be,3),Ue=3*be*Math.pow(1-be,2),he=3*Math.pow(be,2)*(1-be),ke=Math.pow(be,3),_e=De*Ae.y0+Ue*Ae.y0+he*Ae.y1+ke*Ae.y1,Ce=_e-Ae.width/2,Fe=_e+Ae.width/2;Ce>me.y0&&Ce<me.y1?(Ee=me.y1-Ce+10,Ee=me.circularLinkType=="bottom"?Ee:-Ee,me=re(me,Ee,xe,ge),we.nodes.forEach(function(Re){var He,Ge;h(Re,Oe)!=h(me,Oe)&&Re.column==me.column&&(Ge=Re,(He=me).y0>Ge.y0&&He.y0<Ge.y1||He.y1>Ge.y0&&He.y1<Ge.y1||He.y0<Ge.y0&&He.y1>Ge.y1)&&re(Re,Ee,xe,ge)})):(Fe>me.y0&&Fe<me.y1||Ce<me.y0&&Fe>me.y1)&&(Ee=Fe-me.y0+10,me=re(me,Ee,xe,ge),we.nodes.forEach(function(Re){h(Re,Oe)!=h(me,Oe)&&Re.column==me.column&&Re.y0<me.y1&&Re.y1>me.y1&&re(Re,Ee,xe,ge)}))}})}})}function re(we,xe,ge,Oe){return we.y0+xe>=ge&&we.y1+xe<=Oe&&(we.y0=we.y0+xe,we.y1=we.y1+xe,we.targetLinks.forEach(function(Ae){Ae.y1=Ae.y1+xe}),we.sourceLinks.forEach(function(Ae){Ae.y0=Ae.y0+xe})),we}function ae(we,xe,ge,Oe){we.nodes.forEach(function(Ae){Oe&&Ae.y+(Ae.y1-Ae.y0)>xe&&(Ae.y=Ae.y-(Ae.y+(Ae.y1-Ae.y0)-xe));var Te=we.links.filter(function(ne){return h(ne.source,ge)==h(Ae,ge)}),se=Te.length;se>1&&Te.sort(function(ne,me){if(!ne.circular&&!me.circular){if(ne.target.column==me.target.column||!ce(ne,me))return ne.y1-me.y1;if(ne.target.column>me.target.column){var Ee=J(me,ne);return ne.y1-Ee}if(me.target.column>ne.target.column)return J(ne,me)-me.y1}return ne.circular&&!me.circular?ne.circularLinkType=="top"?-1:1:me.circular&&!ne.circular?me.circularLinkType=="top"?1:-1:ne.circular&&me.circular?ne.circularLinkType===me.circularLinkType&&ne.circularLinkType=="top"?ne.target.column===me.target.column?ne.target.y1-me.target.y1:me.target.column-ne.target.column:ne.circularLinkType===me.circularLinkType&&ne.circularLinkType=="bottom"?ne.target.column===me.target.column?me.target.y1-ne.target.y1:ne.target.column-me.target.column:ne.circularLinkType=="top"?-1:1:void 0});var le=Ae.y0;Te.forEach(function(ne){ne.y0=le+ne.width/2,le+=ne.width}),Te.forEach(function(ne,me){if(ne.circularLinkType=="bottom"){for(var Ee=me+1,be=0;Ee<se;Ee++)be+=Te[Ee].width;ne.y0=Ae.y1-be-ne.width/2}})})}function oe(we,xe,ge){we.nodes.forEach(function(Oe){var Ae=we.links.filter(function(le){return h(le.target,ge)==h(Oe,ge)}),Te=Ae.length;Te>1&&Ae.sort(function(le,ne){if(!le.circular&&!ne.circular){if(le.source.column==ne.source.column||!ce(le,ne))return le.y0-ne.y0;if(ne.source.column<le.source.column){var me=Z(ne,le);return le.y0-me}if(le.source.column<ne.source.column)return Z(le,ne)-ne.y0}return le.circular&&!ne.circular?le.circularLinkType=="top"?-1:1:ne.circular&&!le.circular?ne.circularLinkType=="top"?1:-1:le.circular&&ne.circular?le.circularLinkType===ne.circularLinkType&&le.circularLinkType=="top"?le.source.column===ne.source.column?le.source.y1-ne.source.y1:le.source.column-ne.source.column:le.circularLinkType===ne.circularLinkType&&le.circularLinkType=="bottom"?le.source.column===ne.source.column?le.source.y1-ne.source.y1:ne.source.column-le.source.column:le.circularLinkType=="top"?-1:1:void 0});var se=Oe.y0;Ae.forEach(function(le){le.y1=se+le.width/2,se+=le.width}),Ae.forEach(function(le,ne){if(le.circularLinkType=="bottom"){for(var me=ne+1,Ee=0;me<Te;me++)Ee+=Ae[me].width;le.y1=Oe.y1-Ee-le.width/2}})})}function ce(we,xe){return pe(we)==pe(xe)}function pe(we){return we.y0-we.y1>0?"up":"down"}function ve(we,xe){return h(we.source,xe)==h(we.target,xe)}},30838:function(Q,z,t){t.r(z),t.d(z,{sankey:function(){return y},sankeyCenter:function(){return s},sankeyJustify:function(){return d},sankeyLeft:function(){return T},sankeyLinkHorizontal:function(){return h},sankeyRight:function(){return b}});var S=t(33064),k=t(15140);function l(A){return A.target.depth}function T(A){return A.depth}function b(A,w){return w-1-A.height}function d(A,w){return A.sourceLinks.length?A.depth:w-1}function s(A){return A.targetLinks.length?A.depth:A.sourceLinks.length?(0,S.VV)(A.sourceLinks,l)-1:0}function e(A){return function(){return A}}function i(A,w){return n(A.source,w.source)||A.index-w.index}function r(A,w){return n(A.target,w.target)||A.index-w.index}function n(A,w){return A.y0-w.y0}function a(A){return A.value}function o(A){return(A.y0+A.y1)/2}function u(A){return o(A.source)*A.value}function p(A){return o(A.target)*A.value}function c(A){return A.index}function x(A){return A.nodes}function g(A){return A.links}function f(A,w){var E=A.get(w);if(!E)throw new Error("missing: "+w);return E}function y(){var A=0,w=0,E=1,L=1,C=24,P=8,D=c,G=d,I=x,H=g,N=32;function F(){var q={nodes:I.apply(null,arguments),links:H.apply(null,arguments)};return function(te){te.nodes.forEach(function(W,Z){W.index=Z,W.sourceLinks=[],W.targetLinks=[]});var $=(0,k.UI)(te.nodes,D);te.links.forEach(function(W,Z){W.index=Z;var J=W.source,ee=W.target;typeof J!="object"&&(J=W.source=f($,J)),typeof ee!="object"&&(ee=W.target=f($,ee)),J.sourceLinks.push(W),ee.targetLinks.push(W)})}(q),function(te){te.nodes.forEach(function($){$.value=Math.max((0,S.Sm)($.sourceLinks,a),(0,S.Sm)($.targetLinks,a))})}(q),function(te){var $,W,Z;for($=te.nodes,W=[],Z=0;$.length;++Z,$=W,W=[])$.forEach(function(ee){ee.depth=Z,ee.sourceLinks.forEach(function(re){W.indexOf(re.target)<0&&W.push(re.target)})});for($=te.nodes,W=[],Z=0;$.length;++Z,$=W,W=[])$.forEach(function(ee){ee.height=Z,ee.targetLinks.forEach(function(re){W.indexOf(re.source)<0&&W.push(re.source)})});var J=(E-A-C)/(Z-1);te.nodes.forEach(function(ee){ee.x1=(ee.x0=A+Math.max(0,Math.min(Z-1,Math.floor(G.call(null,ee,Z))))*J)+C})}(q),function(te){var $=(0,k.b1)().key(function(ae){return ae.x0}).sortKeys(S.j2).entries(te.nodes).map(function(ae){return ae.values});(function(){var ae=(0,S.Fp)($,function(pe){return pe.length}),oe=.6666666666666666*(L-w)/(ae-1);P>oe&&(P=oe);var ce=(0,S.VV)($,function(pe){return(L-w-(pe.length-1)*P)/(0,S.Sm)(pe,a)});$.forEach(function(pe){pe.forEach(function(ve,we){ve.y1=(ve.y0=we)+ve.value*ce})}),te.links.forEach(function(pe){pe.width=pe.value*ce})})(),re();for(var W=1,Z=N;Z>0;--Z)ee(W*=.99),re(),J(W),re();function J(ae){$.forEach(function(oe){oe.forEach(function(ce){if(ce.targetLinks.length){var pe=((0,S.Sm)(ce.targetLinks,u)/(0,S.Sm)(ce.targetLinks,a)-o(ce))*ae;ce.y0+=pe,ce.y1+=pe}})})}function ee(ae){$.slice().reverse().forEach(function(oe){oe.forEach(function(ce){if(ce.sourceLinks.length){var pe=((0,S.Sm)(ce.sourceLinks,p)/(0,S.Sm)(ce.sourceLinks,a)-o(ce))*ae;ce.y0+=pe,ce.y1+=pe}})})}function re(){$.forEach(function(ae){var oe,ce,pe,ve=w,we=ae.length;for(ae.sort(n),pe=0;pe<we;++pe)(ce=ve-(oe=ae[pe]).y0)>0&&(oe.y0+=ce,oe.y1+=ce),ve=oe.y1+P;if((ce=ve-P-L)>0)for(ve=oe.y0-=ce,oe.y1-=ce,pe=we-2;pe>=0;--pe)(ce=(oe=ae[pe]).y1+P-ve)>0&&(oe.y0-=ce,oe.y1-=ce),ve=oe.y0})}}(q),V(q),q}function V(q){q.nodes.forEach(function(te){te.sourceLinks.sort(r),te.targetLinks.sort(i)}),q.nodes.forEach(function(te){var $=te.y0,W=$;te.sourceLinks.forEach(function(Z){Z.y0=$+Z.width/2,$+=Z.width}),te.targetLinks.forEach(function(Z){Z.y1=W+Z.width/2,W+=Z.width})})}return F.update=function(q){return V(q),q},F.nodeId=function(q){return arguments.length?(D=typeof q=="function"?q:e(q),F):D},F.nodeAlign=function(q){return arguments.length?(G=typeof q=="function"?q:e(q),F):G},F.nodeWidth=function(q){return arguments.length?(C=+q,F):C},F.nodePadding=function(q){return arguments.length?(P=+q,F):P},F.nodes=function(q){return arguments.length?(I=typeof q=="function"?q:e(q),F):I},F.links=function(q){return arguments.length?(H=typeof q=="function"?q:e(q),F):H},F.size=function(q){return arguments.length?(A=w=0,E=+q[0],L=+q[1],F):[E-A,L-w]},F.extent=function(q){return arguments.length?(A=+q[0][0],E=+q[1][0],w=+q[0][1],L=+q[1][1],F):[[A,w],[E,L]]},F.iterations=function(q){return arguments.length?(N=+q,F):N},F}var v=t(45879);function m(A){return[A.source.x1,A.y0]}function _(A){return[A.target.x0,A.y1]}function h(){return(0,v.h5)().source(m).target(_)}},39898:function(Q,z,t){var S,k;(function(){var l={version:"3.8.0"},T=[].slice,b=function(B){return T.call(B)},d=self.document;function s(B){return B&&(B.ownerDocument||B.document||B).documentElement}function e(B){return B&&(B.ownerDocument&&B.ownerDocument.defaultView||B.document&&B||B.defaultView)}if(d)try{b(d.documentElement.childNodes)[0].nodeType}catch{b=function(K){for(var ie=K.length,de=new Array(ie);ie--;)de[ie]=K[ie];return de}}if(Date.now||(Date.now=function(){return+new Date}),d)try{d.createElement("DIV").style.setProperty("opacity",0,"")}catch{var i=this.Element.prototype,r=i.setAttribute,n=i.setAttributeNS,a=this.CSSStyleDeclaration.prototype,o=a.setProperty;i.setAttribute=function(K,ie){r.call(this,K,ie+"")},i.setAttributeNS=function(K,ie,de){n.call(this,K,ie,de+"")},a.setProperty=function(K,ie,de){o.call(this,K,ie+"",de)}}function u(B,K){return B<K?-1:B>K?1:B>=K?0:NaN}function p(B){return B===null?NaN:+B}function c(B){return!isNaN(B)}function x(B){return{left:function(K,ie,de,ye){for(arguments.length<3&&(de=0),arguments.length<4&&(ye=K.length);de<ye;){var Le=de+ye>>>1;B(K[Le],ie)<0?de=Le+1:ye=Le}return de},right:function(K,ie,de,ye){for(arguments.length<3&&(de=0),arguments.length<4&&(ye=K.length);de<ye;){var Le=de+ye>>>1;B(K[Le],ie)>0?ye=Le:de=Le+1}return de}}}l.ascending=u,l.descending=function(B,K){return K<B?-1:K>B?1:K>=B?0:NaN},l.min=function(B,K){var ie,de,ye=-1,Le=B.length;if(arguments.length===1){for(;++ye<Le;)if((de=B[ye])!=null&&de>=de){ie=de;break}for(;++ye<Le;)(de=B[ye])!=null&&ie>de&&(ie=de)}else{for(;++ye<Le;)if((de=K.call(B,B[ye],ye))!=null&&de>=de){ie=de;break}for(;++ye<Le;)(de=K.call(B,B[ye],ye))!=null&&ie>de&&(ie=de)}return ie},l.max=function(B,K){var ie,de,ye=-1,Le=B.length;if(arguments.length===1){for(;++ye<Le;)if((de=B[ye])!=null&&de>=de){ie=de;break}for(;++ye<Le;)(de=B[ye])!=null&&de>ie&&(ie=de)}else{for(;++ye<Le;)if((de=K.call(B,B[ye],ye))!=null&&de>=de){ie=de;break}for(;++ye<Le;)(de=K.call(B,B[ye],ye))!=null&&de>ie&&(ie=de)}return ie},l.extent=function(B,K){var ie,de,ye,Le=-1,Be=B.length;if(arguments.length===1){for(;++Le<Be;)if((de=B[Le])!=null&&de>=de){ie=ye=de;break}for(;++Le<Be;)(de=B[Le])!=null&&(ie>de&&(ie=de),ye<de&&(ye=de))}else{for(;++Le<Be;)if((de=K.call(B,B[Le],Le))!=null&&de>=de){ie=ye=de;break}for(;++Le<Be;)(de=K.call(B,B[Le],Le))!=null&&(ie>de&&(ie=de),ye<de&&(ye=de))}return[ie,ye]},l.sum=function(B,K){var ie,de=0,ye=B.length,Le=-1;if(arguments.length===1)for(;++Le<ye;)c(ie=+B[Le])&&(de+=ie);else for(;++Le<ye;)c(ie=+K.call(B,B[Le],Le))&&(de+=ie);return de},l.mean=function(B,K){var ie,de=0,ye=B.length,Le=-1,Be=ye;if(arguments.length===1)for(;++Le<ye;)c(ie=p(B[Le]))?de+=ie:--Be;else for(;++Le<ye;)c(ie=p(K.call(B,B[Le],Le)))?de+=ie:--Be;if(Be)return de/Be},l.quantile=function(B,K){var ie=(B.length-1)*K+1,de=Math.floor(ie),ye=+B[de-1],Le=ie-de;return Le?ye+Le*(B[de]-ye):ye},l.median=function(B,K){var ie,de=[],ye=B.length,Le=-1;if(arguments.length===1)for(;++Le<ye;)c(ie=p(B[Le]))&&de.push(ie);else for(;++Le<ye;)c(ie=p(K.call(B,B[Le],Le)))&&de.push(ie);if(de.length)return l.quantile(de.sort(u),.5)},l.variance=function(B,K){var ie,de,ye=B.length,Le=0,Be=0,je=-1,qe=0;if(arguments.length===1)for(;++je<ye;)c(ie=p(B[je]))&&(Be+=(de=ie-Le)*(ie-(Le+=de/++qe)));else for(;++je<ye;)c(ie=p(K.call(B,B[je],je)))&&(Be+=(de=ie-Le)*(ie-(Le+=de/++qe)));if(qe>1)return Be/(qe-1)},l.deviation=function(){var B=l.variance.apply(this,arguments);return B&&Math.sqrt(B)};var g=x(u);function f(B){return B.length}l.bisectLeft=g.left,l.bisect=l.bisectRight=g.right,l.bisector=function(B){return x(B.length===1?function(K,ie){return u(B(K),ie)}:B)},l.shuffle=function(B,K,ie){(Le=arguments.length)<3&&(ie=B.length,Le<2&&(K=0));for(var de,ye,Le=ie-K;Le;)ye=Math.random()*Le--|0,de=B[Le+K],B[Le+K]=B[ye+K],B[ye+K]=de;return B},l.permute=function(B,K){for(var ie=K.length,de=new Array(ie);ie--;)de[ie]=B[K[ie]];return de},l.pairs=function(B){for(var K=0,ie=B.length-1,de=B[0],ye=new Array(ie<0?0:ie);K<ie;)ye[K]=[de,de=B[++K]];return ye},l.transpose=function(B){if(!(ye=B.length))return[];for(var K=-1,ie=l.min(B,f),de=new Array(ie);++K<ie;)for(var ye,Le=-1,Be=de[K]=new Array(ye);++Le<ye;)Be[Le]=B[Le][K];return de},l.zip=function(){return l.transpose(arguments)},l.keys=function(B){var K=[];for(var ie in B)K.push(ie);return K},l.values=function(B){var K=[];for(var ie in B)K.push(B[ie]);return K},l.entries=function(B){var K=[];for(var ie in B)K.push({key:ie,value:B[ie]});return K},l.merge=function(B){for(var K,ie,de,ye=B.length,Le=-1,Be=0;++Le<ye;)Be+=B[Le].length;for(ie=new Array(Be);--ye>=0;)for(K=(de=B[ye]).length;--K>=0;)ie[--Be]=de[K];return ie};var y=Math.abs;function v(B,K){for(var ie in K)Object.defineProperty(B.prototype,ie,{value:K[ie],enumerable:!1})}function m(){this._=Object.create(null)}l.range=function(B,K,ie){if(arguments.length<3&&(ie=1,arguments.length<2&&(K=B,B=0)),(K-B)/ie==1/0)throw new Error("infinite range");var de,ye=[],Le=function(je){for(var qe=1;je*qe%1;)qe*=10;return qe}(y(ie)),Be=-1;if(B*=Le,K*=Le,(ie*=Le)<0)for(;(de=B+ie*++Be)>K;)ye.push(de/Le);else for(;(de=B+ie*++Be)<K;)ye.push(de/Le);return ye},l.map=function(B,K){var ie=new m;if(B instanceof m)B.forEach(function(je,qe){ie.set(je,qe)});else if(Array.isArray(B)){var de,ye=-1,Le=B.length;if(arguments.length===1)for(;++ye<Le;)ie.set(ye,B[ye]);else for(;++ye<Le;)ie.set(K.call(B,de=B[ye],ye),de)}else for(var Be in B)ie.set(Be,B[Be]);return ie};var _="__proto__",h="\0";function A(B){return(B+="")===_||B[0]===h?h+B:B}function w(B){return(B+="")[0]===h?B.slice(1):B}function E(B){return A(B)in this._}function L(B){return(B=A(B))in this._&&delete this._[B]}function C(){var B=[];for(var K in this._)B.push(w(K));return B}function P(){var B=0;for(var K in this._)++B;return B}function D(){for(var B in this._)return!1;return!0}function G(){this._=Object.create(null)}function I(B){return B}function H(B,K,ie){return function(){var de=ie.apply(K,arguments);return de===K?B:de}}function N(B,K){if(K in B)return K;K=K.charAt(0).toUpperCase()+K.slice(1);for(var ie=0,de=F.length;ie<de;++ie){var ye=F[ie]+K;if(ye in B)return ye}}v(m,{has:E,get:function(B){return this._[A(B)]},set:function(B,K){return this._[A(B)]=K},remove:L,keys:C,values:function(){var B=[];for(var K in this._)B.push(this._[K]);return B},entries:function(){var B=[];for(var K in this._)B.push({key:w(K),value:this._[K]});return B},size:P,empty:D,forEach:function(B){for(var K in this._)B.call(this,w(K),this._[K])}}),l.nest=function(){var B,K,ie={},de=[],ye=[];function Le(je,qe,Ze){if(Ze>=de.length)return K?K.call(ie,qe):B?qe.sort(B):qe;for(var Qe,lt,ht,St,Lt=-1,Mt=qe.length,Ft=de[Ze++],Et=new m;++Lt<Mt;)(St=Et.get(Qe=Ft(lt=qe[Lt])))?St.push(lt):Et.set(Qe,[lt]);return je?(lt=je(),ht=function(en,Zt){lt.set(en,Le(je,Zt,Ze))}):(lt={},ht=function(en,Zt){lt[en]=Le(je,Zt,Ze)}),Et.forEach(ht),lt}function Be(je,qe){if(qe>=de.length)return je;var Ze=[],Qe=ye[qe++];return je.forEach(function(lt,ht){Ze.push({key:lt,values:Be(ht,qe)})}),Qe?Ze.sort(function(lt,ht){return Qe(lt.key,ht.key)}):Ze}return ie.map=function(je,qe){return Le(qe,je,0)},ie.entries=function(je){return Be(Le(l.map,je,0),0)},ie.key=function(je){return de.push(je),ie},ie.sortKeys=function(je){return ye[de.length-1]=je,ie},ie.sortValues=function(je){return B=je,ie},ie.rollup=function(je){return K=je,ie},ie},l.set=function(B){var K=new G;if(B)for(var ie=0,de=B.length;ie<de;++ie)K.add(B[ie]);return K},v(G,{has:E,add:function(B){return this._[A(B+="")]=!0,B},remove:L,values:C,size:P,empty:D,forEach:function(B){for(var K in this._)B.call(this,w(K))}}),l.behavior={},l.rebind=function(B,K){for(var ie,de=1,ye=arguments.length;++de<ye;)B[ie=arguments[de]]=H(B,K,K[ie]);return B};var F=["webkit","ms","moz","Moz","o","O"];function V(){}function q(){}function te(B){var K=[],ie=new m;function de(){for(var ye,Le=K,Be=-1,je=Le.length;++Be<je;)(ye=Le[Be].on)&&ye.apply(this,arguments);return B}return de.on=function(ye,Le){var Be,je=ie.get(ye);return arguments.length<2?je&&je.on:(je&&(je.on=null,K=K.slice(0,Be=K.indexOf(je)).concat(K.slice(Be+1)),ie.remove(ye)),Le&&K.push(ie.set(ye,{on:Le})),B)},de}function $(){l.event.preventDefault()}function W(){for(var B,K=l.event;B=K.sourceEvent;)K=B;return K}function Z(B){for(var K=new q,ie=0,de=arguments.length;++ie<de;)K[arguments[ie]]=te(K);return K.of=function(ye,Le){return function(Be){try{var je=Be.sourceEvent=l.event;Be.target=B,l.event=Be,K[Be.type].apply(ye,Le)}finally{l.event=je}}},K}l.dispatch=function(){for(var B=new q,K=-1,ie=arguments.length;++K<ie;)B[arguments[K]]=te(B);return B},q.prototype.on=function(B,K){var ie=B.indexOf("."),de="";if(ie>=0&&(de=B.slice(ie+1),B=B.slice(0,ie)),B)return arguments.length<2?this[B].on(de):this[B].on(de,K);if(arguments.length===2){if(K==null)for(B in this)this.hasOwnProperty(B)&&this[B].on(de,null);return this}},l.event=null,l.requote=function(B){return B.replace(J,"\\$&")};var J=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ee={}.__proto__?function(B,K){B.__proto__=K}:function(B,K){for(var ie in K)B[ie]=K[ie]};function re(B){return ee(B,pe),B}var ae=function(B,K){return K.querySelector(B)},oe=function(B,K){return K.querySelectorAll(B)},ce=function(B,K){var ie=B.matches||B[N(B,"matchesSelector")];return ce=function(de,ye){return ie.call(de,ye)},ce(B,K)};typeof Sizzle=="function"&&(ae=function(B,K){return Sizzle(B,K)[0]||null},oe=Sizzle,ce=Sizzle.matchesSelector),l.selection=function(){return l.select(d.documentElement)};var pe=l.selection.prototype=[];function ve(B){return typeof B=="function"?B:function(){return ae(B,this)}}function we(B){return typeof B=="function"?B:function(){return oe(B,this)}}pe.select=function(B){var K,ie,de,ye,Le=[];B=ve(B);for(var Be=-1,je=this.length;++Be<je;){Le.push(K=[]),K.parentNode=(de=this[Be]).parentNode;for(var qe=-1,Ze=de.length;++qe<Ze;)(ye=de[qe])?(K.push(ie=B.call(ye,ye.__data__,qe,Be)),ie&&"__data__"in ye&&(ie.__data__=ye.__data__)):K.push(null)}return re(Le)},pe.selectAll=function(B){var K,ie,de=[];B=we(B);for(var ye=-1,Le=this.length;++ye<Le;)for(var Be=this[ye],je=-1,qe=Be.length;++je<qe;)(ie=Be[je])&&(de.push(K=b(B.call(ie,ie.__data__,je,ye))),K.parentNode=ie);return re(de)};var xe="http://www.w3.org/1999/xhtml",ge={svg:"http://www.w3.org/2000/svg",xhtml:xe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Oe(B,K){return B=l.ns.qualify(B),K==null?B.local?function(){this.removeAttributeNS(B.space,B.local)}:function(){this.removeAttribute(B)}:typeof K=="function"?B.local?function(){var ie=K.apply(this,arguments);ie==null?this.removeAttributeNS(B.space,B.local):this.setAttributeNS(B.space,B.local,ie)}:function(){var ie=K.apply(this,arguments);ie==null?this.removeAttribute(B):this.setAttribute(B,ie)}:B.local?function(){this.setAttributeNS(B.space,B.local,K)}:function(){this.setAttribute(B,K)}}function Ae(B){return B.trim().replace(/\s+/g," ")}function Te(B){return new RegExp("(?:^|\\s+)"+l.requote(B)+"(?:\\s+|$)","g")}function se(B){return(B+"").trim().split(/^|\s+/)}function le(B,K){var ie=(B=se(B).map(ne)).length;return typeof K=="function"?function(){for(var de=-1,ye=K.apply(this,arguments);++de<ie;)B[de](this,ye)}:function(){for(var de=-1;++de<ie;)B[de](this,K)}}function ne(B){var K=Te(B);return function(ie,de){if(ye=ie.classList)return de?ye.add(B):ye.remove(B);var ye=ie.getAttribute("class")||"";de?(K.lastIndex=0,K.test(ye)||ie.setAttribute("class",Ae(ye+" "+B))):ie.setAttribute("class",Ae(ye.replace(K," ")))}}function me(B,K,ie){return K==null?function(){this.style.removeProperty(B)}:typeof K=="function"?function(){var de=K.apply(this,arguments);de==null?this.style.removeProperty(B):this.style.setProperty(B,de,ie)}:function(){this.style.setProperty(B,K,ie)}}function Ee(B,K){return K==null?function(){delete this[B]}:typeof K=="function"?function(){var ie=K.apply(this,arguments);ie==null?delete this[B]:this[B]=ie}:function(){this[B]=K}}function be(B){return typeof B=="function"?B:(B=l.ns.qualify(B)).local?function(){return this.ownerDocument.createElementNS(B.space,B.local)}:function(){var K=this.ownerDocument,ie=this.namespaceURI;return ie===xe&&K.documentElement.namespaceURI===xe?K.createElement(B):K.createElementNS(ie,B)}}function De(){var B=this.parentNode;B&&B.removeChild(this)}function Ue(B){return{__data__:B}}function he(B){return function(){return ce(this,B)}}function ke(B){return arguments.length||(B=u),function(K,ie){return K&&ie?B(K.__data__,ie.__data__):!K-!ie}}function _e(B,K){for(var ie=0,de=B.length;ie<de;ie++)for(var ye,Le=B[ie],Be=0,je=Le.length;Be<je;Be++)(ye=Le[Be])&&K(ye,Be,ie);return B}function Ce(B){return ee(B,Fe),B}l.ns={prefix:ge,qualify:function(B){var K=B.indexOf(":"),ie=B;return K>=0&&(ie=B.slice(0,K))!=="xmlns"&&(B=B.slice(K+1)),ge.hasOwnProperty(ie)?{space:ge[ie],local:B}:B}},pe.attr=function(B,K){if(arguments.length<2){if(typeof B=="string"){var ie=this.node();return(B=l.ns.qualify(B)).local?ie.getAttributeNS(B.space,B.local):ie.getAttribute(B)}for(K in B)this.each(Oe(K,B[K]));return this}return this.each(Oe(B,K))},pe.classed=function(B,K){if(arguments.length<2){if(typeof B=="string"){var ie=this.node(),de=(B=se(B)).length,ye=-1;if(K=ie.classList){for(;++ye<de;)if(!K.contains(B[ye]))return!1}else for(K=ie.getAttribute("class");++ye<de;)if(!Te(B[ye]).test(K))return!1;return!0}for(K in B)this.each(le(K,B[K]));return this}return this.each(le(B,K))},pe.style=function(B,K,ie){var de=arguments.length;if(de<3){if(typeof B!="string"){for(ie in de<2&&(K=""),B)this.each(me(ie,B[ie],K));return this}if(de<2){var ye=this.node();return e(ye).getComputedStyle(ye,null).getPropertyValue(B)}ie=""}return this.each(me(B,K,ie))},pe.property=function(B,K){if(arguments.length<2){if(typeof B=="string")return this.node()[B];for(K in B)this.each(Ee(K,B[K]));return this}return this.each(Ee(B,K))},pe.text=function(B){return arguments.length?this.each(typeof B=="function"?function(){var K=B.apply(this,arguments);this.textContent=K??""}:B==null?function(){this.textContent=""}:function(){this.textContent=B}):this.node().textContent},pe.html=function(B){return arguments.length?this.each(typeof B=="function"?function(){var K=B.apply(this,arguments);this.innerHTML=K??""}:B==null?function(){this.innerHTML=""}:function(){this.innerHTML=B}):this.node().innerHTML},pe.append=function(B){return B=be(B),this.select(function(){return this.appendChild(B.apply(this,arguments))})},pe.insert=function(B,K){return B=be(B),K=ve(K),this.select(function(){return this.insertBefore(B.apply(this,arguments),K.apply(this,arguments)||null)})},pe.remove=function(){return this.each(De)},pe.data=function(B,K){var ie,de,ye=-1,Le=this.length;if(!arguments.length){for(B=new Array(Le=(ie=this[0]).length);++ye<Le;)(de=ie[ye])&&(B[ye]=de.__data__);return B}function Be(Qe,lt){var ht,St,Lt,Mt=Qe.length,Ft=lt.length,Et=Math.min(Mt,Ft),en=new Array(Ft),Zt=new Array(Ft),Vt=new Array(Mt);if(K){var pn,vn=new m,zn=new Array(Mt);for(ht=-1;++ht<Mt;)(St=Qe[ht])&&(vn.has(pn=K.call(St,St.__data__,ht))?Vt[ht]=St:vn.set(pn,St),zn[ht]=pn);for(ht=-1;++ht<Ft;)(St=vn.get(pn=K.call(lt,Lt=lt[ht],ht)))?St!==!0&&(en[ht]=St,St.__data__=Lt):Zt[ht]=Ue(Lt),vn.set(pn,!0);for(ht=-1;++ht<Mt;)ht in zn&&vn.get(zn[ht])!==!0&&(Vt[ht]=Qe[ht])}else{for(ht=-1;++ht<Et;)St=Qe[ht],Lt=lt[ht],St?(St.__data__=Lt,en[ht]=St):Zt[ht]=Ue(Lt);for(;ht<Ft;++ht)Zt[ht]=Ue(lt[ht]);for(;ht<Mt;++ht)Vt[ht]=Qe[ht]}Zt.update=en,Zt.parentNode=en.parentNode=Vt.parentNode=Qe.parentNode,je.push(Zt),qe.push(en),Ze.push(Vt)}var je=Ce([]),qe=re([]),Ze=re([]);if(typeof B=="function")for(;++ye<Le;)Be(ie=this[ye],B.call(ie,ie.parentNode.__data__,ye));else for(;++ye<Le;)Be(ie=this[ye],B);return qe.enter=function(){return je},qe.exit=function(){return Ze},qe},pe.datum=function(B){return arguments.length?this.property("__data__",B):this.property("__data__")},pe.filter=function(B){var K,ie,de,ye=[];typeof B!="function"&&(B=he(B));for(var Le=0,Be=this.length;Le<Be;Le++){ye.push(K=[]),K.parentNode=(ie=this[Le]).parentNode;for(var je=0,qe=ie.length;je<qe;je++)(de=ie[je])&&B.call(de,de.__data__,je,Le)&&K.push(de)}return re(ye)},pe.order=function(){for(var B=-1,K=this.length;++B<K;)for(var ie,de=this[B],ye=de.length-1,Le=de[ye];--ye>=0;)(ie=de[ye])&&(Le&&Le!==ie.nextSibling&&Le.parentNode.insertBefore(ie,Le),Le=ie);return this},pe.sort=function(B){B=ke.apply(this,arguments);for(var K=-1,ie=this.length;++K<ie;)this[K].sort(B);return this.order()},pe.each=function(B){return _e(this,function(K,ie,de){B.call(K,K.__data__,ie,de)})},pe.call=function(B){var K=b(arguments);return B.apply(K[0]=this,K),this},pe.empty=function(){return!this.node()},pe.node=function(){for(var B=0,K=this.length;B<K;B++)for(var ie=this[B],de=0,ye=ie.length;de<ye;de++){var Le=ie[de];if(Le)return Le}return null},pe.size=function(){var B=0;return _e(this,function(){++B}),B};var Fe=[];function Re(B,K,ie){var de="__on"+B,ye=B.indexOf("."),Le=Ge;ye>0&&(B=B.slice(0,ye));var Be=He.get(B);function je(){var qe=this[de];qe&&(this.removeEventListener(B,qe,qe.$),delete this[de])}return Be&&(B=Be,Le=$e),ye?K?function(){var qe=Le(K,b(arguments));je.call(this),this.addEventListener(B,this[de]=qe,qe.$=ie),qe._=K}:je:K?V:function(){var qe,Ze=new RegExp("^__on([^.]+)"+l.requote(B)+"$");for(var Qe in this)if(qe=Qe.match(Ze)){var lt=this[Qe];this.removeEventListener(qe[1],lt,lt.$),delete this[Qe]}}}l.selection.enter=Ce,l.selection.enter.prototype=Fe,Fe.append=pe.append,Fe.empty=pe.empty,Fe.node=pe.node,Fe.call=pe.call,Fe.size=pe.size,Fe.select=function(B){for(var K,ie,de,ye,Le,Be=[],je=-1,qe=this.length;++je<qe;){de=(ye=this[je]).update,Be.push(K=[]),K.parentNode=ye.parentNode;for(var Ze=-1,Qe=ye.length;++Ze<Qe;)(Le=ye[Ze])?(K.push(de[Ze]=ie=B.call(ye.parentNode,Le.__data__,Ze,je)),ie.__data__=Le.__data__):K.push(null)}return re(Be)},Fe.insert=function(B,K){var ie,de,ye;return arguments.length<2&&(ie=this,K=function(Le,Be,je){var qe,Ze=ie[je].update,Qe=Ze.length;for(je!=ye&&(ye=je,de=0),Be>=de&&(de=Be+1);!(qe=Ze[de])&&++de<Qe;);return qe}),pe.insert.call(this,B,K)},l.select=function(B){var K;return typeof B=="string"?(K=[ae(B,d)]).parentNode=d.documentElement:(K=[B]).parentNode=s(B),re([K])},l.selectAll=function(B){var K;return typeof B=="string"?(K=b(oe(B,d))).parentNode=d.documentElement:(K=b(B)).parentNode=null,re([K])},pe.on=function(B,K,ie){var de=arguments.length;if(de<3){if(typeof B!="string"){for(ie in de<2&&(K=!1),B)this.each(Re(ie,B[ie],K));return this}if(de<2)return(de=this.node()["__on"+B])&&de._;ie=!1}return this.each(Re(B,K,ie))};var He=l.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ge(B,K){return function(ie){var de=l.event;l.event=ie,K[0]=this.__data__;try{B.apply(this,K)}finally{l.event=de}}}function $e(B,K){var ie=Ge(B,K);return function(de){var ye=this,Le=de.relatedTarget;Le&&(Le===ye||8&Le.compareDocumentPosition(ye))||ie.call(ye,de)}}d&&He.forEach(function(B){"on"+B in d&&He.remove(B)});var st,Ke=0;function gt(B){var K=".dragsuppress-"+ ++Ke,ie="click"+K,de=l.select(e(B)).on("touchmove"+K,$).on("dragstart"+K,$).on("selectstart"+K,$);if(st==null&&(st=!("onselectstart"in B)&&N(B.style,"userSelect")),st){var ye=s(B).style,Le=ye[st];ye[st]="none"}return function(Be){if(de.on(K,null),st&&(ye[st]=Le),Be){var je=function(){de.on(ie,null)};de.on(ie,function(){$(),je()},!0),setTimeout(je,0)}}}l.mouse=function(B){return at(B,W())};var mt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function at(B,K){K.changedTouches&&(K=K.changedTouches[0]);var ie=B.ownerSVGElement||B;if(ie.createSVGPoint){var de=ie.createSVGPoint();if(mt<0){var ye=e(B);if(ye.scrollX||ye.scrollY){var Le=(ie=l.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();mt=!(Le.f||Le.e),ie.remove()}}return mt?(de.x=K.pageX,de.y=K.pageY):(de.x=K.clientX,de.y=K.clientY),[(de=de.matrixTransform(B.getScreenCTM().inverse())).x,de.y]}var Be=B.getBoundingClientRect();return[K.clientX-Be.left-B.clientLeft,K.clientY-Be.top-B.clientTop]}function rt(){return l.event.changedTouches[0].identifier}l.touch=function(B,K,ie){if(arguments.length<3&&(ie=K,K=W().changedTouches),K){for(var de,ye=0,Le=K.length;ye<Le;++ye)if((de=K[ye]).identifier===ie)return at(B,de)}},l.behavior.drag=function(){var B=Z(ye,"drag","dragstart","dragend"),K=null,ie=Le(V,l.mouse,e,"mousemove","mouseup"),de=Le(rt,l.touch,I,"touchmove","touchend");function ye(){this.on("mousedown.drag",ie).on("touchstart.drag",de)}function Le(Be,je,qe,Ze,Qe){return function(){var lt,ht=this,St=l.event.target.correspondingElement||l.event.target,Lt=ht.parentNode,Mt=B.of(ht,arguments),Ft=0,Et=Be(),en=".drag"+(Et==null?"":"-"+Et),Zt=l.select(qe(St)).on(Ze+en,function(){var vn,zn,Rn=je(Lt,Et);Rn&&(vn=Rn[0]-pn[0],zn=Rn[1]-pn[1],Ft|=vn|zn,pn=Rn,Mt({type:"drag",x:Rn[0]+lt[0],y:Rn[1]+lt[1],dx:vn,dy:zn}))}).on(Qe+en,function(){je(Lt,Et)&&(Zt.on(Ze+en,null).on(Qe+en,null),Vt(Ft),Mt({type:"dragend"}))}),Vt=gt(St),pn=je(Lt,Et);lt=K?[(lt=K.apply(ht,arguments)).x-pn[0],lt.y-pn[1]]:[0,0],Mt({type:"dragstart"})}}return ye.origin=function(Be){return arguments.length?(K=Be,ye):K},l.rebind(ye,B,"on")},l.touches=function(B,K){return arguments.length<2&&(K=W().touches),K?b(K).map(function(ie){var de=at(B,ie);return de.identifier=ie.identifier,de}):[]};var xt=1e-6,Tt=xt*xt,wt=Math.PI,Ot=2*wt,Ct=Ot-xt,Ye=wt/2,Xe=wt/180,Ve=180/wt;function We(B){return B>1?Ye:B<-1?-Ye:Math.asin(B)}function nt(B){return((B=Math.exp(B))+1/B)/2}var ot=Math.SQRT2;l.interpolateZoom=function(B,K){var ie,de,ye=B[0],Le=B[1],Be=B[2],je=K[0],qe=K[1],Ze=K[2],Qe=je-ye,lt=qe-Le,ht=Qe*Qe+lt*lt;if(ht<Tt)de=Math.log(Ze/Be)/ot,ie=function(en){return[ye+en*Qe,Le+en*lt,Be*Math.exp(ot*en*de)]};else{var St=Math.sqrt(ht),Lt=(Ze*Ze-Be*Be+4*ht)/(2*Be*2*St),Mt=(Ze*Ze-Be*Be-4*ht)/(2*Ze*2*St),Ft=Math.log(Math.sqrt(Lt*Lt+1)-Lt),Et=Math.log(Math.sqrt(Mt*Mt+1)-Mt);de=(Et-Ft)/ot,ie=function(en){var Zt,Vt=en*de,pn=nt(Ft),vn=Be/(2*St)*(pn*(Zt=ot*Vt+Ft,((Zt=Math.exp(2*Zt))-1)/(Zt+1))-function(zn){return((zn=Math.exp(zn))-1/zn)/2}(Ft));return[ye+vn*Qe,Le+vn*lt,Be*pn/nt(ot*Vt+Ft)]}}return ie.duration=1e3*de,ie},l.behavior.zoom=function(){var B,K,ie,de,ye,Le,Be,je,qe,Ze={x:0,y:0,k:1},Qe=[960,500],lt=et,ht=250,St=0,Lt="mousedown.zoom",Mt="mousemove.zoom",Ft="mouseup.zoom",Et="touchstart.zoom",en=Z(Zt,"zoomstart","zoom","zoomend");function Zt(Bn){Bn.on(Lt,ir).on(ze+".zoom",mr).on("dblclick.zoom",Lr).on(Et,cr)}function Vt(Bn){return[(Bn[0]-Ze.x)/Ze.k,(Bn[1]-Ze.y)/Ze.k]}function pn(Bn){Ze.k=Math.max(lt[0],Math.min(lt[1],Bn))}function vn(Bn,rr){rr=function(fr){return[fr[0]*Ze.k+Ze.x,fr[1]*Ze.k+Ze.y]}(rr),Ze.x+=Bn[0]-rr[0],Ze.y+=Bn[1]-rr[1]}function zn(Bn,rr,fr,yr){Bn.__chart__={x:Ze.x,y:Ze.y,k:Ze.k},pn(Math.pow(2,yr)),vn(K=rr,fr),Bn=l.select(Bn),ht>0&&(Bn=Bn.transition().duration(ht)),Bn.call(Zt.event)}function Rn(){Be&&Be.domain(Le.range().map(function(Bn){return(Bn-Ze.x)/Ze.k}).map(Le.invert)),qe&&qe.domain(je.range().map(function(Bn){return(Bn-Ze.y)/Ze.k}).map(je.invert))}function Un(Bn){St++||Bn({type:"zoomstart"})}function Yn(Bn){Rn(),Bn({type:"zoom",scale:Ze.k,translate:[Ze.x,Ze.y]})}function or(Bn){--St||(Bn({type:"zoomend"}),K=null)}function ir(){var Bn=this,rr=en.of(Bn,arguments),fr=0,yr=l.select(e(Bn)).on(Mt,function(){fr=1,vn(l.mouse(Bn),Mr),Yn(rr)}).on(Ft,function(){yr.on(Mt,null).on(Ft,null),Ir(fr),or(rr)}),Mr=Vt(l.mouse(Bn)),Ir=gt(Bn);Wi.call(Bn),Un(rr)}function cr(){var Bn,rr=this,fr=en.of(rr,arguments),yr={},Mr=0,Ir=".zoom-"+l.event.changedTouches[0].identifier,Br="touchmove"+Ir,Zr="touchend"+Ir,oi=[],si=l.select(rr),Yr=gt(rr);function wi(){var Ur=l.touches(rr);return Bn=Ze.k,Ur.forEach(function(Fr){Fr.identifier in yr&&(yr[Fr.identifier]=Vt(Fr))}),Ur}function Hi(){var Ur=l.event.target;l.select(Ur).on(Br,Li).on(Zr,Ri),oi.push(Ur);for(var Fr=l.event.changedTouches,li=0,ti=Fr.length;li<ti;++li)yr[Fr[li].identifier]=null;var fi=wi(),sa=Date.now();if(fi.length===1){if(sa-ye<500){var mi=fi[0];zn(rr,mi,yr[mi.identifier],Math.floor(Math.log(Ze.k)/Math.LN2)+1),$()}ye=sa}else if(fi.length>1){mi=fi[0];var Wr=fi[1],Qo=mi[0]-Wr[0],ga=mi[1]-Wr[1];Mr=Qo*Qo+ga*ga}}function Li(){var Ur,Fr,li,ti,fi=l.touches(rr);Wi.call(rr);for(var sa=0,mi=fi.length;sa<mi;++sa,ti=null)if(li=fi[sa],ti=yr[li.identifier]){if(Fr)break;Ur=li,Fr=ti}if(ti){var Wr=(Wr=li[0]-Ur[0])*Wr+(Wr=li[1]-Ur[1])*Wr,Qo=Mr&&Math.sqrt(Wr/Mr);Ur=[(Ur[0]+li[0])/2,(Ur[1]+li[1])/2],Fr=[(Fr[0]+ti[0])/2,(Fr[1]+ti[1])/2],pn(Qo*Bn)}ye=null,vn(Ur,Fr),Yn(fr)}function Ri(){if(l.event.touches.length){for(var Ur=l.event.changedTouches,Fr=0,li=Ur.length;Fr<li;++Fr)delete yr[Ur[Fr].identifier];for(var ti in yr)return void wi()}l.selectAll(oi).on(Ir,null),si.on(Lt,ir).on(Et,cr),Yr(),or(fr)}Hi(),Un(fr),si.on(Lt,null).on(Et,Hi)}function mr(){var Bn=en.of(this,arguments);de?clearTimeout(de):(Wi.call(this),B=Vt(K=ie||l.mouse(this)),Un(Bn)),de=setTimeout(function(){de=null,or(Bn)},50),$(),pn(Math.pow(2,.002*Ie())*Ze.k),vn(K,B),Yn(Bn)}function Lr(){var Bn=l.mouse(this),rr=Math.log(Ze.k)/Math.LN2;zn(this,Bn,Vt(Bn),l.event.shiftKey?Math.ceil(rr)-1:Math.floor(rr)+1)}return ze||(ze="onwheel"in d?(Ie=function(){return-l.event.deltaY*(l.event.deltaMode?120:1)},"wheel"):"onmousewheel"in d?(Ie=function(){return l.event.wheelDelta},"mousewheel"):(Ie=function(){return-l.event.detail},"MozMousePixelScroll")),Zt.event=function(Bn){Bn.each(function(){var rr=en.of(this,arguments),fr=Ze;Po?l.select(this).transition().each("start.zoom",function(){Ze=this.__chart__||{x:0,y:0,k:1},Un(rr)}).tween("zoom:zoom",function(){var yr=Qe[0],Mr=Qe[1],Ir=K?K[0]:yr/2,Br=K?K[1]:Mr/2,Zr=l.interpolateZoom([(Ir-Ze.x)/Ze.k,(Br-Ze.y)/Ze.k,yr/Ze.k],[(Ir-fr.x)/fr.k,(Br-fr.y)/fr.k,yr/fr.k]);return function(oi){var si=Zr(oi),Yr=yr/si[2];this.__chart__=Ze={x:Ir-si[0]*Yr,y:Br-si[1]*Yr,k:Yr},Yn(rr)}}).each("interrupt.zoom",function(){or(rr)}).each("end.zoom",function(){or(rr)}):(this.__chart__=Ze,Un(rr),Yn(rr),or(rr))})},Zt.translate=function(Bn){return arguments.length?(Ze={x:+Bn[0],y:+Bn[1],k:Ze.k},Rn(),Zt):[Ze.x,Ze.y]},Zt.scale=function(Bn){return arguments.length?(Ze={x:Ze.x,y:Ze.y,k:null},pn(+Bn),Rn(),Zt):Ze.k},Zt.scaleExtent=function(Bn){return arguments.length?(lt=Bn==null?et:[+Bn[0],+Bn[1]],Zt):lt},Zt.center=function(Bn){return arguments.length?(ie=Bn&&[+Bn[0],+Bn[1]],Zt):ie},Zt.size=function(Bn){return arguments.length?(Qe=Bn&&[+Bn[0],+Bn[1]],Zt):Qe},Zt.duration=function(Bn){return arguments.length?(ht=+Bn,Zt):ht},Zt.x=function(Bn){return arguments.length?(Be=Bn,Le=Bn.copy(),Ze={x:0,y:0,k:1},Zt):Be},Zt.y=function(Bn){return arguments.length?(qe=Bn,je=Bn.copy(),Ze={x:0,y:0,k:1},Zt):qe},l.rebind(Zt,en,"on")};var Ie,ze,et=[0,1/0];function tt(){}function dt(B,K,ie){return this instanceof dt?(this.h=+B,this.s=+K,void(this.l=+ie)):arguments.length<2?B instanceof dt?new dt(B.h,B.s,B.l):on(""+B,hn,dt):new dt(B,K,ie)}l.color=tt,tt.prototype.toString=function(){return this.rgb()+""},l.hsl=dt;var pt=dt.prototype=new tt;function vt(B,K,ie){var de,ye;function Le(Be){return Math.round(255*function(je){return je>360?je-=360:je<0&&(je+=360),je<60?de+(ye-de)*je/60:je<180?ye:je<240?de+(ye-de)*(240-je)/60:de}(Be))}return B=isNaN(B)?0:(B%=360)<0?B+360:B,K=isNaN(K)||K<0?0:K>1?1:K,de=2*(ie=ie<0?0:ie>1?1:ie)-(ye=ie<=.5?ie*(1+K):ie+K-ie*K),new xn(Le(B+120),Le(B),Le(B-120))}function ct(B,K,ie){return this instanceof ct?(this.h=+B,this.c=+K,void(this.l=+ie)):arguments.length<2?B instanceof ct?new ct(B.h,B.c,B.l):function(de,ye,Le){return de>0?new ct(Math.atan2(Le,ye)*Ve,Math.sqrt(ye*ye+Le*Le),de):new ct(NaN,NaN,de)}(B instanceof ft?B.l:(B=dn((B=l.rgb(B)).r,B.g,B.b)).l,B.a,B.b):new ct(B,K,ie)}pt.brighter=function(B){return B=Math.pow(.7,arguments.length?B:1),new dt(this.h,this.s,this.l/B)},pt.darker=function(B){return B=Math.pow(.7,arguments.length?B:1),new dt(this.h,this.s,B*this.l)},pt.rgb=function(){return vt(this.h,this.s,this.l)},l.hcl=ct;var kt=ct.prototype=new tt;function ut(B,K,ie){return isNaN(B)&&(B=0),isNaN(K)&&(K=0),new ft(ie,Math.cos(B*=Xe)*K,Math.sin(B)*K)}function ft(B,K,ie){return this instanceof ft?(this.l=+B,this.a=+K,void(this.b=+ie)):arguments.length<2?B instanceof ft?new ft(B.l,B.a,B.b):B instanceof ct?ut(B.h,B.c,B.l):dn((B=xn(B)).r,B.g,B.b):new ft(B,K,ie)}kt.brighter=function(B){return new ct(this.h,this.c,Math.min(100,this.l+bt*(arguments.length?B:1)))},kt.darker=function(B){return new ct(this.h,this.c,Math.max(0,this.l-bt*(arguments.length?B:1)))},kt.rgb=function(){return ut(this.h,this.c,this.l).rgb()},l.lab=ft;var bt=18,It=.95047,zt=1,Rt=1.08883,Jt=ft.prototype=new tt;function qt(B,K,ie){var de=(B+16)/116,ye=de+K/500,Le=de-ie/200;return new xn(fn(3.2404542*(ye=Wt(ye)*It)-1.5371385*(de=Wt(de)*zt)-.4985314*(Le=Wt(Le)*Rt)),fn(-.969266*ye+1.8760108*de+.041556*Le),fn(.0556434*ye-.2040259*de+1.0572252*Le))}function Wt(B){return B>.206893034?B*B*B:(B-.13793103448275862)/7.787037}function jt(B){return B>.008856?Math.pow(B,.3333333333333333):7.787037*B+.13793103448275862}function fn(B){return Math.round(255*(B<=.00304?12.92*B:1.055*Math.pow(B,.4166666666666667)-.055))}function xn(B,K,ie){return this instanceof xn?(this.r=~~B,this.g=~~K,void(this.b=~~ie)):arguments.length<2?B instanceof xn?new xn(B.r,B.g,B.b):on(""+B,xn,vt):new xn(B,K,ie)}function un(B){return new xn(B>>16,B>>8&255,255&B)}function Ht(B){return un(B)+""}Jt.brighter=function(B){return new ft(Math.min(100,this.l+bt*(arguments.length?B:1)),this.a,this.b)},Jt.darker=function(B){return new ft(Math.max(0,this.l-bt*(arguments.length?B:1)),this.a,this.b)},Jt.rgb=function(){return qt(this.l,this.a,this.b)},l.rgb=xn;var nn=xn.prototype=new tt;function Kt(B){return B<16?"0"+Math.max(0,B).toString(16):Math.min(255,B).toString(16)}function on(B,K,ie){var de,ye,Le,Be=0,je=0,qe=0;if(de=/([a-z]+)\((.*)\)/.exec(B=B.toLowerCase()))switch(ye=de[2].split(","),de[1]){case"hsl":return ie(parseFloat(ye[0]),parseFloat(ye[1])/100,parseFloat(ye[2])/100);case"rgb":return K(Cn(ye[0]),Cn(ye[1]),Cn(ye[2]))}return(Le=Tn.get(B))?K(Le.r,Le.g,Le.b):(B==null||B.charAt(0)!=="#"||isNaN(Le=parseInt(B.slice(1),16))||(B.length===4?(Be=(3840&Le)>>4,Be|=Be>>4,je=240&Le,je|=je>>4,qe=15&Le,qe|=qe<<4):B.length===7&&(Be=(16711680&Le)>>16,je=(65280&Le)>>8,qe=255&Le)),K(Be,je,qe))}function hn(B,K,ie){var de,ye,Le=Math.min(B/=255,K/=255,ie/=255),Be=Math.max(B,K,ie),je=Be-Le,qe=(Be+Le)/2;return je?(ye=qe<.5?je/(Be+Le):je/(2-Be-Le),de=B==Be?(K-ie)/je+(K<ie?6:0):K==Be?(ie-B)/je+2:(B-K)/je+4,de*=60):(de=NaN,ye=qe>0&&qe<1?0:de),new dt(de,ye,qe)}function dn(B,K,ie){var de=jt((.4124564*(B=Mn(B))+.3575761*(K=Mn(K))+.1804375*(ie=Mn(ie)))/It),ye=jt((.2126729*B+.7151522*K+.072175*ie)/zt);return ft(116*ye-16,500*(de-ye),200*(ye-jt((.0193339*B+.119192*K+.9503041*ie)/Rt)))}function Mn(B){return(B/=255)<=.04045?B/12.92:Math.pow((B+.055)/1.055,2.4)}function Cn(B){var K=parseFloat(B);return B.charAt(B.length-1)==="%"?Math.round(2.55*K):K}nn.brighter=function(B){B=Math.pow(.7,arguments.length?B:1);var K=this.r,ie=this.g,de=this.b,ye=30;return K||ie||de?(K&&K<ye&&(K=ye),ie&&ie<ye&&(ie=ye),de&&de<ye&&(de=ye),new xn(Math.min(255,K/B),Math.min(255,ie/B),Math.min(255,de/B))):new xn(ye,ye,ye)},nn.darker=function(B){return new xn((B=Math.pow(.7,arguments.length?B:1))*this.r,B*this.g,B*this.b)},nn.hsl=function(){return hn(this.r,this.g,this.b)},nn.toString=function(){return"#"+Kt(this.r)+Kt(this.g)+Kt(this.b)};var Tn=l.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Pn(B){return typeof B=="function"?B:function(){return B}}function Wn(B){return function(K,ie,de){return arguments.length===2&&typeof ie=="function"&&(de=ie,ie=null),$n(K,ie,B,de)}}function $n(B,K,ie,de){var ye={},Le=l.dispatch("beforesend","progress","load","error"),Be={},je=new XMLHttpRequest,qe=null;function Ze(){var Qe,lt=je.status;if(!lt&&function(ht){var St=ht.responseType;return St&&St!=="text"?ht.response:ht.responseText}(je)||lt>=200&&lt<300||lt===304){try{Qe=ie.call(ye,je)}catch(ht){return void Le.error.call(ye,ht)}Le.load.call(ye,Qe)}else Le.error.call(ye,je)}return self.XDomainRequest&&!("withCredentials"in je)&&/^(http(s)?:)?\/\//.test(B)&&(je=new XDomainRequest),"onload"in je?je.onload=je.onerror=Ze:je.onreadystatechange=function(){je.readyState>3&&Ze()},je.onprogress=function(Qe){var lt=l.event;l.event=Qe;try{Le.progress.call(ye,je)}finally{l.event=lt}},ye.header=function(Qe,lt){return Qe=(Qe+"").toLowerCase(),arguments.length<2?Be[Qe]:(lt==null?delete Be[Qe]:Be[Qe]=lt+"",ye)},ye.mimeType=function(Qe){return arguments.length?(K=Qe==null?null:Qe+"",ye):K},ye.responseType=function(Qe){return arguments.length?(qe=Qe,ye):qe},ye.response=function(Qe){return ie=Qe,ye},["get","post"].forEach(function(Qe){ye[Qe]=function(){return ye.send.apply(ye,[Qe].concat(b(arguments)))}}),ye.send=function(Qe,lt,ht){if(arguments.length===2&&typeof lt=="function"&&(ht=lt,lt=null),je.open(Qe,B,!0),K==null||"accept"in Be||(Be.accept=K+",*/*"),je.setRequestHeader)for(var St in Be)je.setRequestHeader(St,Be[St]);return K!=null&&je.overrideMimeType&&je.overrideMimeType(K),qe!=null&&(je.responseType=qe),ht!=null&&ye.on("error",ht).on("load",function(Lt){ht(null,Lt)}),Le.beforesend.call(ye,je),je.send(lt??null),ye},ye.abort=function(){return je.abort(),ye},l.rebind(ye,Le,"on"),de==null?ye:ye.get(function(Qe){return Qe.length===1?function(lt,ht){Qe(lt==null?ht:null)}:Qe}(de))}Tn.forEach(function(B,K){Tn.set(B,un(K))}),l.functor=Pn,l.xhr=Wn(I),l.dsv=function(B,K){var ie=new RegExp('["'+B+`
]`),de=B.charCodeAt(0);function ye(Ze,Qe,lt){arguments.length<3&&(lt=Qe,Qe=null);var ht=$n(Ze,K,Qe==null?Le:Be(Qe),lt);return ht.row=function(St){return arguments.length?ht.response((Qe=St)==null?Le:Be(St)):Qe},ht}function Le(Ze){return ye.parse(Ze.responseText)}function Be(Ze){return function(Qe){return ye.parse(Qe.responseText,Ze)}}function je(Ze){return Ze.map(qe).join(B)}function qe(Ze){return ie.test(Ze)?'"'+Ze.replace(/\"/g,'""')+'"':Ze}return ye.parse=function(Ze,Qe){var lt;return ye.parseRows(Ze,function(ht,St){if(lt)return lt(ht,St-1);var Lt=function(Mt){for(var Ft={},Et=ht.length,en=0;en<Et;++en)Ft[ht[en]]=Mt[en];return Ft};lt=Qe?function(Mt,Ft){return Qe(Lt(Mt),Ft)}:Lt})},ye.parseRows=function(Ze,Qe){var lt,ht,St={},Lt={},Mt=[],Ft=Ze.length,Et=0,en=0;function Zt(){if(Et>=Ft)return Lt;if(ht)return ht=!1,St;var pn=Et;if(Ze.charCodeAt(pn)===34){for(var vn=pn;vn++<Ft;)if(Ze.charCodeAt(vn)===34){if(Ze.charCodeAt(vn+1)!==34)break;++vn}return Et=vn+2,(zn=Ze.charCodeAt(vn+1))===13?(ht=!0,Ze.charCodeAt(vn+2)===10&&++Et):zn===10&&(ht=!0),Ze.slice(pn+1,vn).replace(/""/g,'"')}for(;Et<Ft;){var zn,Rn=1;if((zn=Ze.charCodeAt(Et++))===10)ht=!0;else if(zn===13)ht=!0,Ze.charCodeAt(Et)===10&&(++Et,++Rn);else if(zn!==de)continue;return Ze.slice(pn,Et-Rn)}return Ze.slice(pn)}for(;(lt=Zt())!==Lt;){for(var Vt=[];lt!==St&&lt!==Lt;)Vt.push(lt),lt=Zt();Qe&&(Vt=Qe(Vt,en++))==null||Mt.push(Vt)}return Mt},ye.format=function(Ze){if(Array.isArray(Ze[0]))return ye.formatRows(Ze);var Qe=new G,lt=[];return Ze.forEach(function(ht){for(var St in ht)Qe.has(St)||lt.push(Qe.add(St))}),[lt.map(qe).join(B)].concat(Ze.map(function(ht){return lt.map(function(St){return qe(ht[St])}).join(B)})).join(`
`)},ye.formatRows=function(Ze){return Ze.map(je).join(`
`)},ye},l.csv=l.dsv(",","text/csv"),l.tsv=l.dsv("	","text/tab-separated-values");var ar,Qn,Gn,dr,Bt=this[N(this,"requestAnimationFrame")]||function(B){setTimeout(B,17)};function tn(B,K,ie){var de=arguments.length;de<2&&(K=0),de<3&&(ie=Date.now());var ye={c:B,t:ie+K,n:null};return Qn?Qn.n=ye:ar=ye,Qn=ye,Gn||(dr=clearTimeout(dr),Gn=1,Bt(cn)),ye}function cn(){var B=gn(),K=kn()-B;K>24?(isFinite(K)&&(clearTimeout(dr),dr=setTimeout(cn,K)),Gn=0):(Gn=1,Bt(cn))}function gn(){for(var B=Date.now(),K=ar;K;)B>=K.t&&K.c(B-K.t)&&(K.c=null),K=K.n;return B}function kn(){for(var B,K=ar,ie=1/0;K;)K.c?(K.t<ie&&(ie=K.t),K=(B=K).n):K=B?B.n=K.n:ar=K.n;return Qn=B,ie}function Vn(B){return B[0]}function In(B){return B[1]}function Dn(B){for(var K,ie,de,ye=B.length,Le=[0,1],Be=2,je=2;je<ye;je++){for(;Be>1&&(K=B[Le[Be-2]],ie=B[Le[Be-1]],de=B[je],(ie[0]-K[0])*(de[1]-K[1])-(ie[1]-K[1])*(de[0]-K[0])<=0);)--Be;Le[Be++]=je}return Le.slice(0,Be)}function Kn(B,K){return B[0]-K[0]||B[1]-K[1]}l.timer=function(){tn.apply(this,arguments)},l.timer.flush=function(){gn(),kn()},l.round=function(B,K){return K?Math.round(B*(K=Math.pow(10,K)))/K:Math.round(B)},l.geom={},l.geom.hull=function(B){var K=Vn,ie=In;if(arguments.length)return de(B);function de(ye){if(ye.length<3)return[];var Le,Be=Pn(K),je=Pn(ie),qe=ye.length,Ze=[],Qe=[];for(Le=0;Le<qe;Le++)Ze.push([+Be.call(this,ye[Le],Le),+je.call(this,ye[Le],Le),Le]);for(Ze.sort(Kn),Le=0;Le<qe;Le++)Qe.push([Ze[Le][0],-Ze[Le][1]]);var lt=Dn(Ze),ht=Dn(Qe),St=ht[0]===lt[0],Lt=ht[ht.length-1]===lt[lt.length-1],Mt=[];for(Le=lt.length-1;Le>=0;--Le)Mt.push(ye[Ze[lt[Le]][2]]);for(Le=+St;Le<ht.length-Lt;++Le)Mt.push(ye[Ze[ht[Le]][2]]);return Mt}return de.x=function(ye){return arguments.length?(K=ye,de):K},de.y=function(ye){return arguments.length?(ie=ye,de):ie},de},l.geom.polygon=function(B){return ee(B,Ut),B};var Ut=l.geom.polygon.prototype=[];function bn(B,K,ie){return(ie[0]-K[0])*(B[1]-K[1])<(ie[1]-K[1])*(B[0]-K[0])}function At(B,K,ie,de){var ye=B[0],Le=ie[0],Be=K[0]-ye,je=de[0]-Le,qe=B[1],Ze=ie[1],Qe=K[1]-qe,lt=de[1]-Ze,ht=(je*(qe-Ze)-lt*(ye-Le))/(lt*Be-je*Qe);return[ye+ht*Be,qe+ht*Qe]}function Gt(B){var K=B[0],ie=B[B.length-1];return!(K[0]-ie[0]||K[1]-ie[1])}Ut.area=function(){for(var B,K=-1,ie=this.length,de=this[ie-1],ye=0;++K<ie;)B=de,de=this[K],ye+=B[1]*de[0]-B[0]*de[1];return .5*ye},Ut.centroid=function(B){var K,ie,de=-1,ye=this.length,Le=0,Be=0,je=this[ye-1];for(arguments.length||(B=-1/(6*this.area()));++de<ye;)K=je,je=this[de],ie=K[0]*je[1]-je[0]*K[1],Le+=(K[0]+je[0])*ie,Be+=(K[1]+je[1])*ie;return[Le*B,Be*B]},Ut.clip=function(B){for(var K,ie,de,ye,Le,Be,je=Gt(B),qe=-1,Ze=this.length-Gt(this),Qe=this[Ze-1];++qe<Ze;){for(K=B.slice(),B.length=0,ye=this[qe],Le=K[(de=K.length-je)-1],ie=-1;++ie<de;)bn(Be=K[ie],Qe,ye)?(bn(Le,Qe,ye)||B.push(At(Le,Be,Qe,ye)),B.push(Be)):bn(Le,Qe,ye)&&B.push(At(Le,Be,Qe,ye)),Le=Be;je&&B.push(B[0]),Qe=ye}return B};var $t,mn,yn,An,sn,Yt=[],Xt=[];function an(){ai(this),this.edge=this.site=this.circle=null}function ln(B){var K=Yt.pop()||new an;return K.site=B,K}function Sn(B){lr(B),yn.remove(B),Yt.push(B),ai(B)}function En(B){var K=B.circle,ie=K.x,de=K.cy,ye={x:ie,y:de},Le=B.P,Be=B.N,je=[B];Sn(B);for(var qe=Le;qe.circle&&y(ie-qe.circle.x)<xt&&y(de-qe.circle.cy)<xt;)Le=qe.P,je.unshift(qe),Sn(qe),qe=Le;je.unshift(qe),lr(qe);for(var Ze=Be;Ze.circle&&y(ie-Ze.circle.x)<xt&&y(de-Ze.circle.cy)<xt;)Be=Ze.N,je.push(Ze),Sn(Ze),Ze=Be;je.push(Ze),lr(Ze);var Qe,lt=je.length;for(Qe=1;Qe<lt;++Qe)Ze=je[Qe],qe=je[Qe-1],pr(Ze.edge,qe.site,Ze.site,ye);qe=je[0],(Ze=je[lt-1]).edge=Zn(qe.site,Ze.site,null,ye),tr(qe),tr(Ze)}function jn(B){for(var K,ie,de,ye,Le=B.x,Be=B.y,je=yn._;je;)if((de=Fn(je,Be)-Le)>xt)je=je.L;else{if(!((ye=Le-Xn(je,Be))>xt)){de>-xt?(K=je.P,ie=je):ye>-xt?(K=je,ie=je.N):K=ie=je;break}if(!je.R){K=je;break}je=je.R}var qe=ln(B);if(yn.insert(K,qe),K||ie){if(K===ie)return lr(K),ie=ln(K.site),yn.insert(qe,ie),qe.edge=ie.edge=Zn(K.site,qe.site),tr(K),void tr(ie);if(ie){lr(K),lr(ie);var Ze=K.site,Qe=Ze.x,lt=Ze.y,ht=B.x-Qe,St=B.y-lt,Lt=ie.site,Mt=Lt.x-Qe,Ft=Lt.y-lt,Et=2*(ht*Ft-St*Mt),en=ht*ht+St*St,Zt=Mt*Mt+Ft*Ft,Vt={x:(Ft*en-St*Zt)/Et+Qe,y:(ht*Zt-Mt*en)/Et+lt};pr(ie.edge,Ze,Lt,Vt),qe.edge=Zn(Ze,B,null,Vt),ie.edge=Zn(B,Lt,null,Vt),tr(K),tr(ie)}else qe.edge=Zn(K.site,qe.site)}}function Fn(B,K){var ie=B.site,de=ie.x,ye=ie.y,Le=ye-K;if(!Le)return de;var Be=B.P;if(!Be)return-1/0;var je=(ie=Be.site).x,qe=ie.y,Ze=qe-K;if(!Ze)return je;var Qe=je-de,lt=1/Le-1/Ze,ht=Qe/Ze;return lt?(-ht+Math.sqrt(ht*ht-2*lt*(Qe*Qe/(-2*Ze)-qe+Ze/2+ye-Le/2)))/lt+de:(de+je)/2}function Xn(B,K){var ie=B.N;if(ie)return Fn(ie,K);var de=B.site;return de.y===K?de.x:1/0}function Hn(B){this.site=B,this.edges=[]}function nr(B,K){return K.angle-B.angle}function er(){ai(this),this.x=this.y=this.arc=this.site=this.cy=null}function tr(B){var K=B.P,ie=B.N;if(K&&ie){var de=K.site,ye=B.site,Le=ie.site;if(de!==Le){var Be=ye.x,je=ye.y,qe=de.x-Be,Ze=de.y-je,Qe=Le.x-Be,lt=2*(qe*(Ft=Le.y-je)-Ze*Qe);if(!(lt>=-Tt)){var ht=qe*qe+Ze*Ze,St=Qe*Qe+Ft*Ft,Lt=(Ft*ht-Ze*St)/lt,Mt=(qe*St-Qe*ht)/lt,Ft=Mt+je,Et=Xt.pop()||new er;Et.arc=B,Et.site=ye,Et.x=Lt+Be,Et.y=Ft+Math.sqrt(Lt*Lt+Mt*Mt),Et.cy=Ft,B.circle=Et;for(var en=null,Zt=sn._;Zt;)if(Et.y<Zt.y||Et.y===Zt.y&&Et.x<=Zt.x){if(!Zt.L){en=Zt.P;break}Zt=Zt.L}else{if(!Zt.R){en=Zt;break}Zt=Zt.R}sn.insert(en,Et),en||(An=Et)}}}}function lr(B){var K=B.circle;K&&(K.P||(An=K.N),sn.remove(K),Xt.push(K),ai(K),B.circle=null)}function ur(B,K){var ie=B.b;if(ie)return!0;var de,ye,Le=B.a,Be=K[0][0],je=K[1][0],qe=K[0][1],Ze=K[1][1],Qe=B.l,lt=B.r,ht=Qe.x,St=Qe.y,Lt=lt.x,Mt=lt.y,Ft=(ht+Lt)/2,Et=(St+Mt)/2;if(Mt===St){if(Ft<Be||Ft>=je)return;if(ht>Lt){if(Le){if(Le.y>=Ze)return}else Le={x:Ft,y:qe};ie={x:Ft,y:Ze}}else{if(Le){if(Le.y<qe)return}else Le={x:Ft,y:Ze};ie={x:Ft,y:qe}}}else if(ye=Et-(de=(ht-Lt)/(Mt-St))*Ft,de<-1||de>1)if(ht>Lt){if(Le){if(Le.y>=Ze)return}else Le={x:(qe-ye)/de,y:qe};ie={x:(Ze-ye)/de,y:Ze}}else{if(Le){if(Le.y<qe)return}else Le={x:(Ze-ye)/de,y:Ze};ie={x:(qe-ye)/de,y:qe}}else if(St<Mt){if(Le){if(Le.x>=je)return}else Le={x:Be,y:de*Be+ye};ie={x:je,y:de*je+ye}}else{if(Le){if(Le.x<Be)return}else Le={x:je,y:de*je+ye};ie={x:Be,y:de*Be+ye}}return B.a=Le,B.b=ie,!0}function br(B,K){this.l=B,this.r=K,this.a=this.b=null}function Zn(B,K,ie,de){var ye=new br(B,K);return $t.push(ye),ie&&pr(ye,B,K,ie),de&&pr(ye,K,B,de),mn[B.i].edges.push(new Sr(ye,B,K)),mn[K.i].edges.push(new Sr(ye,K,B)),ye}function pr(B,K,ie,de){B.a||B.b?B.l===ie?B.b=de:B.a=de:(B.a=de,B.l=K,B.r=ie)}function Sr(B,K,ie){var de=B.a,ye=B.b;this.edge=B,this.site=K,this.angle=ie?Math.atan2(ie.y-K.y,ie.x-K.x):B.l===K?Math.atan2(ye.x-de.x,de.y-ye.y):Math.atan2(de.x-ye.x,ye.y-de.y)}function Gr(){this._=null}function ai(B){B.U=B.C=B.L=B.R=B.P=B.N=null}function ni(B,K){var ie=K,de=K.R,ye=ie.U;ye?ye.L===ie?ye.L=de:ye.R=de:B._=de,de.U=ye,ie.U=de,ie.R=de.L,ie.R&&(ie.R.U=ie),de.L=ie}function ci(B,K){var ie=K,de=K.L,ye=ie.U;ye?ye.L===ie?ye.L=de:ye.R=de:B._=de,de.U=ye,ie.U=de,ie.L=de.R,ie.L&&(ie.L.U=ie),de.R=ie}function Kr(B){for(;B.L;)B=B.L;return B}function bi(B,K){var ie,de,ye,Le=B.sort(Ha).pop();for($t=[],mn=new Array(B.length),yn=new Gr,sn=new Gr;;)if(ye=An,Le&&(!ye||Le.y<ye.y||Le.y===ye.y&&Le.x<ye.x))Le.x===ie&&Le.y===de||(mn[Le.i]=new Hn(Le),jn(Le),ie=Le.x,de=Le.y),Le=B.pop();else{if(!ye)break;En(ye.arc)}K&&(function(je){for(var qe,Ze,Qe,lt,ht,St=$t,Lt=(Ze=je[0][0],Qe=je[0][1],lt=je[1][0],ht=je[1][1],function(Ft){var Et,en=Ft.a,Zt=Ft.b,Vt=en.x,pn=en.y,vn=0,zn=1,Rn=Zt.x-Vt,Un=Zt.y-pn;if(Et=Ze-Vt,Rn||!(Et>0)){if(Et/=Rn,Rn<0){if(Et<vn)return;Et<zn&&(zn=Et)}else if(Rn>0){if(Et>zn)return;Et>vn&&(vn=Et)}if(Et=lt-Vt,Rn||!(Et<0)){if(Et/=Rn,Rn<0){if(Et>zn)return;Et>vn&&(vn=Et)}else if(Rn>0){if(Et<vn)return;Et<zn&&(zn=Et)}if(Et=Qe-pn,Un||!(Et>0)){if(Et/=Un,Un<0){if(Et<vn)return;Et<zn&&(zn=Et)}else if(Un>0){if(Et>zn)return;Et>vn&&(vn=Et)}if(Et=ht-pn,Un||!(Et<0)){if(Et/=Un,Un<0){if(Et>zn)return;Et>vn&&(vn=Et)}else if(Un>0){if(Et<vn)return;Et<zn&&(zn=Et)}return vn>0&&(Ft.a={x:Vt+vn*Rn,y:pn+vn*Un}),zn<1&&(Ft.b={x:Vt+zn*Rn,y:pn+zn*Un}),Ft}}}}}),Mt=St.length;Mt--;)(!ur(qe=St[Mt],je)||!Lt(qe)||y(qe.a.x-qe.b.x)<xt&&y(qe.a.y-qe.b.y)<xt)&&(qe.a=qe.b=null,St.splice(Mt,1))}(K),function(je){for(var qe,Ze,Qe,lt,ht,St,Lt,Mt,Ft,Et,en=je[0][0],Zt=je[1][0],Vt=je[0][1],pn=je[1][1],vn=mn,zn=vn.length;zn--;)if((ht=vn[zn])&&ht.prepare())for(Mt=(Lt=ht.edges).length,St=0;St<Mt;)Qe=(Et=Lt[St].end()).x,lt=Et.y,qe=(Ft=Lt[++St%Mt].start()).x,Ze=Ft.y,(y(Qe-qe)>xt||y(lt-Ze)>xt)&&(Lt.splice(St,0,new Sr((Rn=ht.site,Un=Et,Yn=y(Qe-en)<xt&&pn-lt>xt?{x:en,y:y(qe-en)<xt?Ze:pn}:y(lt-pn)<xt&&Zt-Qe>xt?{x:y(Ze-pn)<xt?qe:Zt,y:pn}:y(Qe-Zt)<xt&&lt-Vt>xt?{x:Zt,y:y(qe-Zt)<xt?Ze:Vt}:y(lt-Vt)<xt&&Qe-en>xt?{x:y(Ze-Vt)<xt?qe:en,y:Vt}:null,or=void 0,(or=new br(Rn,null)).a=Un,or.b=Yn,$t.push(or),or),ht.site,null)),++Mt);var Rn,Un,Yn,or}(K));var Be={cells:mn,edges:$t};return yn=sn=$t=mn=null,Be}function Ha(B,K){return K.y-B.y||K.x-B.x}Hn.prototype.prepare=function(){for(var B,K=this.edges,ie=K.length;ie--;)(B=K[ie].edge).b&&B.a||K.splice(ie,1);return K.sort(nr),K.length},Sr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Gr.prototype={insert:function(B,K){var ie,de,ye;if(B){if(K.P=B,K.N=B.N,B.N&&(B.N.P=K),B.N=K,B.R){for(B=B.R;B.L;)B=B.L;B.L=K}else B.R=K;ie=B}else this._?(B=Kr(this._),K.P=null,K.N=B,B.P=B.L=K,ie=B):(K.P=K.N=null,this._=K,ie=null);for(K.L=K.R=null,K.U=ie,K.C=!0,B=K;ie&&ie.C;)ie===(de=ie.U).L?(ye=de.R)&&ye.C?(ie.C=ye.C=!1,de.C=!0,B=de):(B===ie.R&&(ni(this,ie),ie=(B=ie).U),ie.C=!1,de.C=!0,ci(this,de)):(ye=de.L)&&ye.C?(ie.C=ye.C=!1,de.C=!0,B=de):(B===ie.L&&(ci(this,ie),ie=(B=ie).U),ie.C=!1,de.C=!0,ni(this,de)),ie=B.U;this._.C=!1},remove:function(B){B.N&&(B.N.P=B.P),B.P&&(B.P.N=B.N),B.N=B.P=null;var K,ie,de,ye=B.U,Le=B.L,Be=B.R;if(ie=Le?Be?Kr(Be):Le:Be,ye?ye.L===B?ye.L=ie:ye.R=ie:this._=ie,Le&&Be?(de=ie.C,ie.C=B.C,ie.L=Le,Le.U=ie,ie!==Be?(ye=ie.U,ie.U=B.U,B=ie.R,ye.L=B,ie.R=Be,Be.U=ie):(ie.U=ye,ye=ie,B=ie.R)):(de=B.C,B=ie),B&&(B.U=ye),!de)if(B&&B.C)B.C=!1;else{do{if(B===this._)break;if(B===ye.L){if((K=ye.R).C&&(K.C=!1,ye.C=!0,ni(this,ye),K=ye.R),K.L&&K.L.C||K.R&&K.R.C){K.R&&K.R.C||(K.L.C=!1,K.C=!0,ci(this,K),K=ye.R),K.C=ye.C,ye.C=K.R.C=!1,ni(this,ye),B=this._;break}}else if((K=ye.L).C&&(K.C=!1,ye.C=!0,ci(this,ye),K=ye.L),K.L&&K.L.C||K.R&&K.R.C){K.L&&K.L.C||(K.R.C=!1,K.C=!0,ni(this,K),K=ye.L),K.C=ye.C,ye.C=K.L.C=!1,ci(this,ye),B=this._;break}K.C=!0,B=ye,ye=ye.U}while(!B.C);B&&(B.C=!1)}}},l.geom.voronoi=function(B){var K=Vn,ie=In,de=K,ye=ie,Le=ha;if(B)return Be(B);function Be(qe){var Ze=new Array(qe.length),Qe=Le[0][0],lt=Le[0][1],ht=Le[1][0],St=Le[1][1];return bi(je(qe),Le).cells.forEach(function(Lt,Mt){var Ft=Lt.edges,Et=Lt.site;(Ze[Mt]=Ft.length?Ft.map(function(en){var Zt=en.start();return[Zt.x,Zt.y]}):Et.x>=Qe&&Et.x<=ht&&Et.y>=lt&&Et.y<=St?[[Qe,St],[ht,St],[ht,lt],[Qe,lt]]:[]).point=qe[Mt]}),Ze}function je(qe){return qe.map(function(Ze,Qe){return{x:Math.round(de(Ze,Qe)/xt)*xt,y:Math.round(ye(Ze,Qe)/xt)*xt,i:Qe}})}return Be.links=function(qe){return bi(je(qe)).edges.filter(function(Ze){return Ze.l&&Ze.r}).map(function(Ze){return{source:qe[Ze.l.i],target:qe[Ze.r.i]}})},Be.triangles=function(qe){var Ze=[];return bi(je(qe)).cells.forEach(function(Qe,lt){for(var ht,St,Lt,Mt,Ft=Qe.site,Et=Qe.edges.sort(nr),en=-1,Zt=Et.length,Vt=Et[Zt-1].edge,pn=Vt.l===Ft?Vt.r:Vt.l;++en<Zt;)ht=pn,pn=(Vt=Et[en].edge).l===Ft?Vt.r:Vt.l,lt<ht.i&&lt<pn.i&&(Lt=ht,Mt=pn,((St=Ft).x-Mt.x)*(Lt.y-St.y)-(St.x-Lt.x)*(Mt.y-St.y)<0)&&Ze.push([qe[lt],qe[ht.i],qe[pn.i]])}),Ze},Be.x=function(qe){return arguments.length?(de=Pn(K=qe),Be):K},Be.y=function(qe){return arguments.length?(ye=Pn(ie=qe),Be):ie},Be.clipExtent=function(qe){return arguments.length?(Le=qe??ha,Be):Le===ha?null:Le},Be.size=function(qe){return arguments.length?Be.clipExtent(qe&&[[0,0],qe]):Le===ha?null:Le&&Le[1]},Be};var ha=[[-1e6,-1e6],[1e6,1e6]];function eo(B){return B.x}function Vs(B){return B.y}function Ro(B,K,ie,de,ye,Le){if(!B(K,ie,de,ye,Le)){var Be=.5*(ie+ye),je=.5*(de+Le),qe=K.nodes;qe[0]&&Ro(B,qe[0],ie,de,Be,je),qe[1]&&Ro(B,qe[1],Be,de,ye,je),qe[2]&&Ro(B,qe[2],ie,je,Be,Le),qe[3]&&Ro(B,qe[3],Be,je,ye,Le)}}function hs(B,K){B=l.rgb(B),K=l.rgb(K);var ie=B.r,de=B.g,ye=B.b,Le=K.r-ie,Be=K.g-de,je=K.b-ye;return function(qe){return"#"+Kt(Math.round(ie+Le*qe))+Kt(Math.round(de+Be*qe))+Kt(Math.round(ye+je*qe))}}function Hs(B,K){var ie,de={},ye={};for(ie in B)ie in K?de[ie]=Ga(B[ie],K[ie]):ye[ie]=B[ie];for(ie in K)ie in B||(ye[ie]=K[ie]);return function(Le){for(ie in de)ye[ie]=de[ie](Le);return ye}}function qa(B,K){return B=+B,K=+K,function(ie){return B*(1-ie)+K*ie}}function nl(B,K){var ie,de,ye,Le=Fo.lastIndex=Bo.lastIndex=0,Be=-1,je=[],qe=[];for(B+="",K+="";(ie=Fo.exec(B))&&(de=Bo.exec(K));)(ye=de.index)>Le&&(ye=K.slice(Le,ye),je[Be]?je[Be]+=ye:je[++Be]=ye),(ie=ie[0])===(de=de[0])?je[Be]?je[Be]+=de:je[++Be]=de:(je[++Be]=null,qe.push({i:Be,x:qa(ie,de)})),Le=Bo.lastIndex;return Le<K.length&&(ye=K.slice(Le),je[Be]?je[Be]+=ye:je[++Be]=ye),je.length<2?qe[0]?(K=qe[0].x,function(Ze){return K(Ze)+""}):function(){return K}:(K=qe.length,function(Ze){for(var Qe,lt=0;lt<K;++lt)je[(Qe=qe[lt]).i]=Qe.x(Ze);return je.join("")})}l.geom.delaunay=function(B){return l.geom.voronoi().triangles(B)},l.geom.quadtree=function(B,K,ie,de,ye){var Le,Be=Vn,je=In;if(Le=arguments.length)return Be=eo,je=Vs,Le===3&&(ye=ie,de=K,ie=K=0),qe(B);function qe(Ze){var Qe,lt,ht,St,Lt,Mt,Ft,Et,en,Zt=Pn(Be),Vt=Pn(je);if(K!=null)Mt=K,Ft=ie,Et=de,en=ye;else if(Et=en=-(Mt=Ft=1/0),lt=[],ht=[],Lt=Ze.length,Le)for(St=0;St<Lt;++St)(Qe=Ze[St]).x<Mt&&(Mt=Qe.x),Qe.y<Ft&&(Ft=Qe.y),Qe.x>Et&&(Et=Qe.x),Qe.y>en&&(en=Qe.y),lt.push(Qe.x),ht.push(Qe.y);else for(St=0;St<Lt;++St){var pn=+Zt(Qe=Ze[St],St),vn=+Vt(Qe,St);pn<Mt&&(Mt=pn),vn<Ft&&(Ft=vn),pn>Et&&(Et=pn),vn>en&&(en=vn),lt.push(pn),ht.push(vn)}var zn=Et-Mt,Rn=en-Ft;function Un(ir,cr,mr,Lr,Bn,rr,fr,yr){if(!isNaN(mr)&&!isNaN(Lr))if(ir.leaf){var Mr=ir.x,Ir=ir.y;if(Mr!=null)if(y(Mr-mr)+y(Ir-Lr)<.01)Yn(ir,cr,mr,Lr,Bn,rr,fr,yr);else{var Br=ir.point;ir.x=ir.y=ir.point=null,Yn(ir,Br,Mr,Ir,Bn,rr,fr,yr),Yn(ir,cr,mr,Lr,Bn,rr,fr,yr)}else ir.x=mr,ir.y=Lr,ir.point=cr}else Yn(ir,cr,mr,Lr,Bn,rr,fr,yr)}function Yn(ir,cr,mr,Lr,Bn,rr,fr,yr){var Mr=.5*(Bn+fr),Ir=.5*(rr+yr),Br=mr>=Mr,Zr=Lr>=Ir,oi=Zr<<1|Br;ir.leaf=!1,Br?Bn=Mr:fr=Mr,Zr?rr=Ir:yr=Ir,Un(ir=ir.nodes[oi]||(ir.nodes[oi]={leaf:!0,nodes:[],point:null,x:null,y:null}),cr,mr,Lr,Bn,rr,fr,yr)}zn>Rn?en=Ft+zn:Et=Mt+Rn;var or={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(ir){Un(or,ir,+Zt(ir,++St),+Vt(ir,St),Mt,Ft,Et,en)}};if(or.visit=function(ir){Ro(ir,or,Mt,Ft,Et,en)},or.find=function(ir){return function(cr,mr,Lr,Bn,rr,fr,yr){var Mr,Ir=1/0;return function Br(Zr,oi,si,Yr,wi){if(!(oi>fr||si>yr||Yr<Bn||wi<rr)){if(Hi=Zr.point){var Hi,Li=mr-Zr.x,Ri=Lr-Zr.y,Ur=Li*Li+Ri*Ri;if(Ur<Ir){var Fr=Math.sqrt(Ir=Ur);Bn=mr-Fr,rr=Lr-Fr,fr=mr+Fr,yr=Lr+Fr,Mr=Hi}}for(var li=Zr.nodes,ti=.5*(oi+Yr),fi=.5*(si+wi),sa=(Lr>=fi)<<1|mr>=ti,mi=sa+4;sa<mi;++sa)if(Zr=li[3&sa])switch(3&sa){case 0:Br(Zr,oi,si,ti,fi);break;case 1:Br(Zr,ti,si,Yr,fi);break;case 2:Br(Zr,oi,fi,ti,wi);break;case 3:Br(Zr,ti,fi,Yr,wi)}}}(cr,Bn,rr,fr,yr),Mr}(or,ir[0],ir[1],Mt,Ft,Et,en)},St=-1,K==null){for(;++St<Lt;)Un(or,Ze[St],lt[St],ht[St],Mt,Ft,Et,en);--St}else Ze.forEach(or.add);return lt=ht=Ze=Qe=null,or}return qe.x=function(Ze){return arguments.length?(Be=Ze,qe):Be},qe.y=function(Ze){return arguments.length?(je=Ze,qe):je},qe.extent=function(Ze){return arguments.length?(Ze==null?K=ie=de=ye=null:(K=+Ze[0][0],ie=+Ze[0][1],de=+Ze[1][0],ye=+Ze[1][1]),qe):K==null?null:[[K,ie],[de,ye]]},qe.size=function(Ze){return arguments.length?(Ze==null?K=ie=de=ye=null:(K=ie=0,de=+Ze[0],ye=+Ze[1]),qe):K==null?null:[de-K,ye-ie]},qe},l.interpolateRgb=hs,l.interpolateObject=Hs,l.interpolateNumber=qa,l.interpolateString=nl;var Fo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bo=new RegExp(Fo.source,"g");function Ga(B,K){for(var ie,de=l.interpolators.length;--de>=0&&!(ie=l.interpolators[de](B,K)););return ie}function Si(B,K){var ie,de=[],ye=[],Le=B.length,Be=K.length,je=Math.min(B.length,K.length);for(ie=0;ie<je;++ie)de.push(Ga(B[ie],K[ie]));for(;ie<Le;++ie)ye[ie]=B[ie];for(;ie<Be;++ie)ye[ie]=K[ie];return function(qe){for(ie=0;ie<je;++ie)ye[ie]=de[ie](qe);return ye}}l.interpolate=Ga,l.interpolators=[function(B,K){var ie=typeof K;return(ie==="string"?Tn.has(K.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(K)?hs:nl:K instanceof tt?hs:Array.isArray(K)?Si:ie==="object"&&isNaN(K)?Hs:qa)(B,K)}],l.interpolateArray=Si;var ps=function(){return I},Vr=l.map({linear:ps,poly:function(B){return function(K){return Math.pow(K,B)}},quad:function(){return Ia},cubic:function(){return mo},sin:function(){return ro},exp:function(){return Cs},circle:function(){return rl},elastic:function(B,K){var ie;return arguments.length<2&&(K=.45),arguments.length?ie=K/Ot*Math.asin(1/B):(B=1,ie=K/4),function(de){return 1+B*Math.pow(2,-10*de)*Math.sin((de-ie)*Ot/K)}},back:function(B){return B||(B=1.70158),function(K){return K*K*((B+1)*K-B)}},bounce:function(){return yo}}),Za=l.map({in:I,out:ba,"in-out":to,"out-in":function(B){return to(ba(B))}});function ba(B){return function(K){return 1-B(1-K)}}function to(B){return function(K){return .5*(K<.5?B(2*K):2-B(2-2*K))}}function Ia(B){return B*B}function mo(B){return B*B*B}function no(B){if(B<=0)return 0;if(B>=1)return 1;var K=B*B,ie=K*B;return 4*(B<.5?ie:3*(B-K)+ie-.75)}function ro(B){return 1-Math.cos(B*Ye)}function Cs(B){return Math.pow(2,10*(B-1))}function rl(B){return 1-Math.sqrt(1-B*B)}function yo(B){return B<.36363636363636365?7.5625*B*B:B<.7272727272727273?7.5625*(B-=.5454545454545454)*B+.75:B<.9090909090909091?7.5625*(B-=.8181818181818182)*B+.9375:7.5625*(B-=.9545454545454546)*B+.984375}function il(B,K){return K-=B,function(ie){return Math.round(B+K*ie)}}function qs(B){var K,ie,de,ye=[B.a,B.b],Le=[B.c,B.d],Be=Gs(ye),je=al(ye,Le),qe=Gs(((K=Le)[0]+=(de=-je)*(ie=ye)[0],K[1]+=de*ie[1],K))||0;ye[0]*Le[1]<Le[0]*ye[1]&&(ye[0]*=-1,ye[1]*=-1,Be*=-1,je*=-1),this.rotate=(Be?Math.atan2(ye[1],ye[0]):Math.atan2(-Le[0],Le[1]))*Ve,this.translate=[B.e,B.f],this.scale=[Be,qe],this.skew=qe?Math.atan2(je,qe)*Ve:0}function al(B,K){return B[0]*K[0]+B[1]*K[1]}function Gs(B){var K=Math.sqrt(al(B,B));return K&&(B[0]/=K,B[1]/=K),K}l.ease=function(B){var K,ie=B.indexOf("-"),de=ie>=0?B.slice(0,ie):B,ye=ie>=0?B.slice(ie+1):"in";return de=Vr.get(de)||ps,ye=Za.get(ye)||I,K=ye(de.apply(null,T.call(arguments,1))),function(Le){return Le<=0?0:Le>=1?1:K(Le)}},l.interpolateHcl=function(B,K){B=l.hcl(B),K=l.hcl(K);var ie=B.h,de=B.c,ye=B.l,Le=K.h-ie,Be=K.c-de,je=K.l-ye;return isNaN(Be)&&(Be=0,de=isNaN(de)?K.c:de),isNaN(Le)?(Le=0,ie=isNaN(ie)?K.h:ie):Le>180?Le-=360:Le<-180&&(Le+=360),function(qe){return ut(ie+Le*qe,de+Be*qe,ye+je*qe)+""}},l.interpolateHsl=function(B,K){B=l.hsl(B),K=l.hsl(K);var ie=B.h,de=B.s,ye=B.l,Le=K.h-ie,Be=K.s-de,je=K.l-ye;return isNaN(Be)&&(Be=0,de=isNaN(de)?K.s:de),isNaN(Le)?(Le=0,ie=isNaN(ie)?K.h:ie):Le>180?Le-=360:Le<-180&&(Le+=360),function(qe){return vt(ie+Le*qe,de+Be*qe,ye+je*qe)+""}},l.interpolateLab=function(B,K){B=l.lab(B),K=l.lab(K);var ie=B.l,de=B.a,ye=B.b,Le=K.l-ie,Be=K.a-de,je=K.b-ye;return function(qe){return qt(ie+Le*qe,de+Be*qe,ye+je*qe)+""}},l.interpolateRound=il,l.transform=function(B){var K=d.createElementNS(l.ns.prefix.svg,"g");return(l.transform=function(ie){if(ie!=null){K.setAttribute("transform",ie);var de=K.transform.baseVal.consolidate()}return new qs(de?de.matrix:ol)})(B)},qs.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ol={a:1,b:0,c:0,d:1,e:0,f:0};function es(B){return B.length?B.pop()+",":""}function xo(B,K){var ie=[],de=[];return B=l.transform(B),K=l.transform(K),function(ye,Le,Be,je){if(ye[0]!==Le[0]||ye[1]!==Le[1]){var qe=Be.push("translate(",null,",",null,")");je.push({i:qe-4,x:qa(ye[0],Le[0])},{i:qe-2,x:qa(ye[1],Le[1])})}else(Le[0]||Le[1])&&Be.push("translate("+Le+")")}(B.translate,K.translate,ie,de),function(ye,Le,Be,je){ye!==Le?(ye-Le>180?Le+=360:Le-ye>180&&(ye+=360),je.push({i:Be.push(es(Be)+"rotate(",null,")")-2,x:qa(ye,Le)})):Le&&Be.push(es(Be)+"rotate("+Le+")")}(B.rotate,K.rotate,ie,de),function(ye,Le,Be,je){ye!==Le?je.push({i:Be.push(es(Be)+"skewX(",null,")")-2,x:qa(ye,Le)}):Le&&Be.push(es(Be)+"skewX("+Le+")")}(B.skew,K.skew,ie,de),function(ye,Le,Be,je){if(ye[0]!==Le[0]||ye[1]!==Le[1]){var qe=Be.push(es(Be)+"scale(",null,",",null,")");je.push({i:qe-4,x:qa(ye[0],Le[0])},{i:qe-2,x:qa(ye[1],Le[1])})}else Le[0]===1&&Le[1]===1||Be.push(es(Be)+"scale("+Le+")")}(B.scale,K.scale,ie,de),B=K=null,function(ye){for(var Le,Be=-1,je=de.length;++Be<je;)ie[(Le=de[Be]).i]=Le.x(ye);return ie.join("")}}function No(B,K){return K=(K-=B=+B)||1/K,function(ie){return(ie-B)/K}}function ts(B,K){return K=(K-=B=+B)||1/K,function(ie){return Math.max(0,Math.min(1,(ie-B)/K))}}function Ps(B){for(var K=B.source,ie=B.target,de=function(Be,je){if(Be===je)return Be;for(var qe=Zs(Be),Ze=Zs(je),Qe=qe.pop(),lt=Ze.pop(),ht=null;Qe===lt;)ht=Qe,Qe=qe.pop(),lt=Ze.pop();return ht}(K,ie),ye=[K];K!==de;)K=K.parent,ye.push(K);for(var Le=ye.length;ie!==de;)ye.splice(Le,0,ie),ie=ie.parent;return ye}function Zs(B){for(var K=[],ie=B.parent;ie!=null;)K.push(B),B=ie,ie=ie.parent;return K.push(B),K}function Ys(B){B.fixed|=2}function Aa(B){B.fixed&=-7}function jo(B){B.fixed|=4,B.px=B.x,B.py=B.y}function Ya(B){B.fixed&=-5}function io(B,K,ie){var de=0,ye=0;if(B.charge=0,!B.leaf)for(var Le,Be=B.nodes,je=Be.length,qe=-1;++qe<je;)(Le=Be[qe])!=null&&(io(Le,K,ie),B.charge+=Le.charge,de+=Le.charge*Le.cx,ye+=Le.charge*Le.cy);if(B.point){B.leaf||(B.point.x+=Math.random()-.5,B.point.y+=Math.random()-.5);var Ze=K*ie[B.point.index];B.charge+=B.pointCharge=Ze,de+=Ze*B.point.x,ye+=Ze*B.point.y}B.cx=de/B.charge,B.cy=ye/B.charge}l.interpolateTransform=xo,l.layout={},l.layout.bundle=function(){return function(B){for(var K=[],ie=-1,de=B.length;++ie<de;)K.push(Ps(B[ie]));return K}},l.layout.chord=function(){var B,K,ie,de,ye,Le,Be,je={},qe=0;function Ze(){var lt,ht,St,Lt,Mt,Ft={},Et=[],en=l.range(de),Zt=[];for(B=[],K=[],lt=0,Lt=-1;++Lt<de;){for(ht=0,Mt=-1;++Mt<de;)ht+=ie[Lt][Mt];Et.push(ht),Zt.push(l.range(de)),lt+=ht}for(ye&&en.sort(function(or,ir){return ye(Et[or],Et[ir])}),Le&&Zt.forEach(function(or,ir){or.sort(function(cr,mr){return Le(ie[ir][cr],ie[ir][mr])})}),lt=(Ot-qe*de)/lt,ht=0,Lt=-1;++Lt<de;){for(St=ht,Mt=-1;++Mt<de;){var Vt=en[Lt],pn=Zt[Vt][Mt],vn=ie[Vt][pn],zn=ht,Rn=ht+=vn*lt;Ft[Vt+"-"+pn]={index:Vt,subindex:pn,startAngle:zn,endAngle:Rn,value:vn}}K[Vt]={index:Vt,startAngle:St,endAngle:ht,value:Et[Vt]},ht+=qe}for(Lt=-1;++Lt<de;)for(Mt=Lt-1;++Mt<de;){var Un=Ft[Lt+"-"+Mt],Yn=Ft[Mt+"-"+Lt];(Un.value||Yn.value)&&B.push(Un.value<Yn.value?{source:Yn,target:Un}:{source:Un,target:Yn})}Be&&Qe()}function Qe(){B.sort(function(lt,ht){return Be((lt.source.value+lt.target.value)/2,(ht.source.value+ht.target.value)/2)})}return je.matrix=function(lt){return arguments.length?(de=(ie=lt)&&ie.length,B=K=null,je):ie},je.padding=function(lt){return arguments.length?(qe=lt,B=K=null,je):qe},je.sortGroups=function(lt){return arguments.length?(ye=lt,B=K=null,je):ye},je.sortSubgroups=function(lt){return arguments.length?(Le=lt,B=null,je):Le},je.sortChords=function(lt){return arguments.length?(Be=lt,B&&Qe(),je):Be},je.chords=function(){return B||Ze(),B},je.groups=function(){return K||Ze(),K},je},l.layout.force=function(){var B,K,ie,de,ye,Le,Be={},je=l.dispatch("start","tick","end"),qe=[1,1],Ze=.9,Qe=sl,lt=bo,ht=-30,St=$r,Lt=.1,Mt=.64,Ft=[],Et=[];function en(Vt){return function(pn,vn,zn,Rn){if(pn.point!==Vt){var Un=pn.cx-Vt.x,Yn=pn.cy-Vt.y,or=Rn-vn,ir=Un*Un+Yn*Yn;if(or*or/Mt<ir){if(ir<St){var cr=pn.charge/ir;Vt.px-=Un*cr,Vt.py-=Yn*cr}return!0}pn.point&&ir&&ir<St&&(cr=pn.pointCharge/ir,Vt.px-=Un*cr,Vt.py-=Yn*cr)}return!pn.charge}}function Zt(Vt){Vt.px=l.event.x,Vt.py=l.event.y,Be.resume()}return Be.tick=function(){if((ie*=.99)<.005)return B=null,je.end({type:"end",alpha:ie=0}),!0;var Vt,pn,vn,zn,Rn,Un,Yn,or,ir,cr=Ft.length,mr=Et.length;for(pn=0;pn<mr;++pn)zn=(vn=Et[pn]).source,(Un=(or=(Rn=vn.target).x-zn.x)*or+(ir=Rn.y-zn.y)*ir)&&(or*=Un=ie*ye[pn]*((Un=Math.sqrt(Un))-de[pn])/Un,ir*=Un,Rn.x-=or*(Yn=zn.weight+Rn.weight?zn.weight/(zn.weight+Rn.weight):.5),Rn.y-=ir*Yn,zn.x+=or*(Yn=1-Yn),zn.y+=ir*Yn);if((Yn=ie*Lt)&&(or=qe[0]/2,ir=qe[1]/2,pn=-1,Yn))for(;++pn<cr;)(vn=Ft[pn]).x+=(or-vn.x)*Yn,vn.y+=(ir-vn.y)*Yn;if(ht)for(io(Vt=l.geom.quadtree(Ft),ie,Le),pn=-1;++pn<cr;)(vn=Ft[pn]).fixed||Vt.visit(en(vn));for(pn=-1;++pn<cr;)(vn=Ft[pn]).fixed?(vn.x=vn.px,vn.y=vn.py):(vn.x-=(vn.px-(vn.px=vn.x))*Ze,vn.y-=(vn.py-(vn.py=vn.y))*Ze);je.tick({type:"tick",alpha:ie})},Be.nodes=function(Vt){return arguments.length?(Ft=Vt,Be):Ft},Be.links=function(Vt){return arguments.length?(Et=Vt,Be):Et},Be.size=function(Vt){return arguments.length?(qe=Vt,Be):qe},Be.linkDistance=function(Vt){return arguments.length?(Qe=typeof Vt=="function"?Vt:+Vt,Be):Qe},Be.distance=Be.linkDistance,Be.linkStrength=function(Vt){return arguments.length?(lt=typeof Vt=="function"?Vt:+Vt,Be):lt},Be.friction=function(Vt){return arguments.length?(Ze=+Vt,Be):Ze},Be.charge=function(Vt){return arguments.length?(ht=typeof Vt=="function"?Vt:+Vt,Be):ht},Be.chargeDistance=function(Vt){return arguments.length?(St=Vt*Vt,Be):Math.sqrt(St)},Be.gravity=function(Vt){return arguments.length?(Lt=+Vt,Be):Lt},Be.theta=function(Vt){return arguments.length?(Mt=Vt*Vt,Be):Math.sqrt(Mt)},Be.alpha=function(Vt){return arguments.length?(Vt=+Vt,ie?Vt>0?ie=Vt:(B.c=null,B.t=NaN,B=null,je.end({type:"end",alpha:ie=0})):Vt>0&&(je.start({type:"start",alpha:ie=Vt}),B=tn(Be.tick)),Be):ie},Be.start=function(){var Vt,pn,vn,zn=Ft.length,Rn=Et.length,Un=qe[0],Yn=qe[1];for(Vt=0;Vt<zn;++Vt)(vn=Ft[Vt]).index=Vt,vn.weight=0;for(Vt=0;Vt<Rn;++Vt)typeof(vn=Et[Vt]).source=="number"&&(vn.source=Ft[vn.source]),typeof vn.target=="number"&&(vn.target=Ft[vn.target]),++vn.source.weight,++vn.target.weight;for(Vt=0;Vt<zn;++Vt)vn=Ft[Vt],isNaN(vn.x)&&(vn.x=or("x",Un)),isNaN(vn.y)&&(vn.y=or("y",Yn)),isNaN(vn.px)&&(vn.px=vn.x),isNaN(vn.py)&&(vn.py=vn.y);if(de=[],typeof Qe=="function")for(Vt=0;Vt<Rn;++Vt)de[Vt]=+Qe.call(this,Et[Vt],Vt);else for(Vt=0;Vt<Rn;++Vt)de[Vt]=Qe;if(ye=[],typeof lt=="function")for(Vt=0;Vt<Rn;++Vt)ye[Vt]=+lt.call(this,Et[Vt],Vt);else for(Vt=0;Vt<Rn;++Vt)ye[Vt]=lt;if(Le=[],typeof ht=="function")for(Vt=0;Vt<zn;++Vt)Le[Vt]=+ht.call(this,Ft[Vt],Vt);else for(Vt=0;Vt<zn;++Vt)Le[Vt]=ht;function or(ir,cr){if(!pn){for(pn=new Array(zn),rr=0;rr<zn;++rr)pn[rr]=[];for(rr=0;rr<Rn;++rr){var mr=Et[rr];pn[mr.source.index].push(mr.target),pn[mr.target.index].push(mr.source)}}for(var Lr,Bn=pn[Vt],rr=-1,fr=Bn.length;++rr<fr;)if(!isNaN(Lr=Bn[rr][ir]))return Lr;return Math.random()*cr}return Be.resume()},Be.resume=function(){return Be.alpha(.1)},Be.stop=function(){return Be.alpha(0)},Be.drag=function(){if(K||(K=l.behavior.drag().origin(I).on("dragstart.force",Ys).on("drag.force",Zt).on("dragend.force",Aa)),!arguments.length)return K;this.on("mouseover.force",jo).on("mouseout.force",Ya).call(K)},l.rebind(Be,je,"on")};var sl=20,bo=1,$r=1/0;function Da(B,K){return l.rebind(B,K,"sort","children","value"),B.nodes=B,B.links=ll,B}function ds(B,K){for(var ie=[B];(B=ie.pop())!=null;)if(K(B),(ye=B.children)&&(de=ye.length))for(var de,ye;--de>=0;)ie.push(ye[de])}function Ma(B,K){for(var ie=[B],de=[];(B=ie.pop())!=null;)if(de.push(B),(Le=B.children)&&(ye=Le.length))for(var ye,Le,Be=-1;++Be<ye;)ie.push(Le[Be]);for(;(B=de.pop())!=null;)K(B)}function Uo(B){return B.children}function yl(B){return B.value}function Os(B,K){return K.value-B.value}function ll(B){return l.merge(B.map(function(K){return(K.children||[]).map(function(ie){return{source:K,target:ie}})}))}l.layout.hierarchy=function(){var B=Os,K=Uo,ie=yl;function de(ye){var Le,Be=[ye],je=[];for(ye.depth=0;(Le=Be.pop())!=null;)if(je.push(Le),(Ze=K.call(de,Le,Le.depth))&&(qe=Ze.length)){for(var qe,Ze,Qe;--qe>=0;)Be.push(Qe=Ze[qe]),Qe.parent=Le,Qe.depth=Le.depth+1;ie&&(Le.value=0),Le.children=Ze}else ie&&(Le.value=+ie.call(de,Le,Le.depth)||0),delete Le.children;return Ma(ye,function(lt){var ht,St;B&&(ht=lt.children)&&ht.sort(B),ie&&(St=lt.parent)&&(St.value+=lt.value)}),je}return de.sort=function(ye){return arguments.length?(B=ye,de):B},de.children=function(ye){return arguments.length?(K=ye,de):K},de.value=function(ye){return arguments.length?(ie=ye,de):ie},de.revalue=function(ye){return ie&&(ds(ye,function(Le){Le.children&&(Le.value=0)}),Ma(ye,function(Le){var Be;Le.children||(Le.value=+ie.call(de,Le,Le.depth)||0),(Be=Le.parent)&&(Be.value+=Le.value)})),ye},de},l.layout.partition=function(){var B=l.layout.hierarchy(),K=[1,1];function ie(Le,Be,je,qe){var Ze=Le.children;if(Le.x=Be,Le.y=Le.depth*qe,Le.dx=je,Le.dy=qe,Ze&&(Qe=Ze.length)){var Qe,lt,ht,St=-1;for(je=Le.value?je/Le.value:0;++St<Qe;)ie(lt=Ze[St],Be,ht=lt.value*je,qe),Be+=ht}}function de(Le){var Be=Le.children,je=0;if(Be&&(qe=Be.length))for(var qe,Ze=-1;++Ze<qe;)je=Math.max(je,de(Be[Ze]));return 1+je}function ye(Le,Be){var je=B.call(this,Le,Be);return ie(je[0],0,K[0],K[1]/de(je[0])),je}return ye.size=function(Le){return arguments.length?(K=Le,ye):K},Da(ye,B)},l.layout.pie=function(){var B=Number,K=ul,ie=0,de=Ot,ye=0;function Le(Be){var je,qe=Be.length,Ze=Be.map(function(en,Zt){return+B.call(Le,en,Zt)}),Qe=+(typeof ie=="function"?ie.apply(this,arguments):ie),lt=(typeof de=="function"?de.apply(this,arguments):de)-Qe,ht=Math.min(Math.abs(lt)/qe,+(typeof ye=="function"?ye.apply(this,arguments):ye)),St=ht*(lt<0?-1:1),Lt=l.sum(Ze),Mt=Lt?(lt-qe*St)/Lt:0,Ft=l.range(qe),Et=[];return K!=null&&Ft.sort(K===ul?function(en,Zt){return Ze[Zt]-Ze[en]}:function(en,Zt){return K(Be[en],Be[Zt])}),Ft.forEach(function(en){Et[en]={data:Be[en],value:je=Ze[en],startAngle:Qe,endAngle:Qe+=je*Mt+St,padAngle:ht}}),Et}return Le.value=function(Be){return arguments.length?(B=Be,Le):B},Le.sort=function(Be){return arguments.length?(K=Be,Le):K},Le.startAngle=function(Be){return arguments.length?(ie=Be,Le):ie},Le.endAngle=function(Be){return arguments.length?(de=Be,Le):de},Le.padAngle=function(Be){return arguments.length?(ye=Be,Le):ye},Le};var ul={};function gs(B){return B.x}function ns(B){return B.y}function vs(B,K,ie){B.y0=K,B.y=ie}l.layout.stack=function(){var B=I,K=wo,ie=oo,de=vs,ye=gs,Le=ns;function Be(je,qe){if(!(ht=je.length))return je;var Ze=je.map(function(en,Zt){return B.call(Be,en,Zt)}),Qe=Ze.map(function(en){return en.map(function(Zt,Vt){return[ye.call(Be,Zt,Vt),Le.call(Be,Zt,Vt)]})}),lt=K.call(Be,Qe,qe);Ze=l.permute(Ze,lt),Qe=l.permute(Qe,lt);var ht,St,Lt,Mt,Ft=ie.call(Be,Qe,qe),Et=Ze[0].length;for(Lt=0;Lt<Et;++Lt)for(de.call(Be,Ze[0][Lt],Mt=Ft[Lt],Qe[0][Lt][1]),St=1;St<ht;++St)de.call(Be,Ze[St][Lt],Mt+=Qe[St-1][Lt][1],Qe[St][Lt][1]);return je}return Be.values=function(je){return arguments.length?(B=je,Be):B},Be.order=function(je){return arguments.length?(K=typeof je=="function"?je:_o.get(je)||wo,Be):K},Be.offset=function(je){return arguments.length?(ie=typeof je=="function"?je:ao.get(je)||oo,Be):ie},Be.x=function(je){return arguments.length?(ye=je,Be):ye},Be.y=function(je){return arguments.length?(Le=je,Be):Le},Be.out=function(je){return arguments.length?(de=je,Be):de},Be};var _o=l.map({"inside-out":function(B){var K,ie,de=B.length,ye=B.map(Is),Le=B.map(za),Be=l.range(de).sort(function(lt,ht){return ye[lt]-ye[ht]}),je=0,qe=0,Ze=[],Qe=[];for(K=0;K<de;++K)ie=Be[K],je<qe?(je+=Le[ie],Ze.push(ie)):(qe+=Le[ie],Qe.push(ie));return Qe.reverse().concat(Ze)},reverse:function(B){return l.range(B.length).reverse()},default:wo}),ao=l.map({silhouette:function(B){var K,ie,de,ye=B.length,Le=B[0].length,Be=[],je=0,qe=[];for(ie=0;ie<Le;++ie){for(K=0,de=0;K<ye;K++)de+=B[K][ie][1];de>je&&(je=de),Be.push(de)}for(ie=0;ie<Le;++ie)qe[ie]=(je-Be[ie])/2;return qe},wiggle:function(B){var K,ie,de,ye,Le,Be,je,qe,Ze,Qe=B.length,lt=B[0],ht=lt.length,St=[];for(St[0]=qe=Ze=0,ie=1;ie<ht;++ie){for(K=0,ye=0;K<Qe;++K)ye+=B[K][ie][1];for(K=0,Le=0,je=lt[ie][0]-lt[ie-1][0];K<Qe;++K){for(de=0,Be=(B[K][ie][1]-B[K][ie-1][1])/(2*je);de<K;++de)Be+=(B[de][ie][1]-B[de][ie-1][1])/je;Le+=Be*B[K][ie][1]}St[ie]=qe-=ye?Le/ye*je:0,qe<Ze&&(Ze=qe)}for(ie=0;ie<ht;++ie)St[ie]-=Ze;return St},expand:function(B){var K,ie,de,ye=B.length,Le=B[0].length,Be=1/ye,je=[];for(ie=0;ie<Le;++ie){for(K=0,de=0;K<ye;K++)de+=B[K][ie][1];if(de)for(K=0;K<ye;K++)B[K][ie][1]/=de;else for(K=0;K<ye;K++)B[K][ie][1]=Be}for(ie=0;ie<Le;++ie)je[ie]=0;return je},zero:oo});function wo(B){return l.range(B.length)}function oo(B){for(var K=-1,ie=B[0].length,de=[];++K<ie;)de[K]=0;return de}function Is(B){for(var K,ie=1,de=0,ye=B[0][1],Le=B.length;ie<Le;++ie)(K=B[ie][1])>ye&&(de=ie,ye=K);return de}function za(B){return B.reduce(cl,0)}function cl(B,K){return B+K[1]}function fl(B,K){return Ds(B,Math.ceil(Math.log(K.length)/Math.LN2+1))}function Ds(B,K){for(var ie=-1,de=+B[0],ye=(B[1]-de)/K,Le=[];++ie<=K;)Le[ie]=ye*ie+de;return Le}function To(B){return[l.min(B),l.max(B)]}function zs(B,K){return B.value-K.value}function Vo(B,K){var ie=B._pack_next;B._pack_next=K,K._pack_prev=B,K._pack_next=ie,ie._pack_prev=K}function Ws(B,K){B._pack_next=K,K._pack_prev=B}function rs(B,K){var ie=K.x-B.x,de=K.y-B.y,ye=B.r+K.r;return .999*ye*ye>ie*ie+de*de}function Ho(B){if((K=B.children)&&(qe=K.length)){var K,ie,de,ye,Le,Be,je,qe,Ze=1/0,Qe=-1/0,lt=1/0,ht=-1/0;if(K.forEach(ms),(ie=K[0]).x=-ie.r,ie.y=0,Zt(ie),qe>1&&((de=K[1]).x=de.r,de.y=0,Zt(de),qe>2))for(ko(ie,de,ye=K[2]),Zt(ye),Vo(ie,ye),ie._pack_prev=ye,Vo(ye,de),de=ie._pack_next,Le=3;Le<qe;Le++){ko(ie,de,ye=K[Le]);var St=0,Lt=1,Mt=1;for(Be=de._pack_next;Be!==de;Be=Be._pack_next,Lt++)if(rs(Be,ye)){St=1;break}if(St==1)for(je=ie._pack_prev;je!==Be._pack_prev&&!rs(je,ye);je=je._pack_prev,Mt++);St?(Lt<Mt||Lt==Mt&&de.r<ie.r?Ws(ie,de=Be):Ws(ie=je,de),Le--):(Vo(ie,ye),de=ye,Zt(ye))}var Ft=(Ze+Qe)/2,Et=(lt+ht)/2,en=0;for(Le=0;Le<qe;Le++)(ye=K[Le]).x-=Ft,ye.y-=Et,en=Math.max(en,ye.r+Math.sqrt(ye.x*ye.x+ye.y*ye.y));B.r=en,K.forEach(is)}function Zt(Vt){Ze=Math.min(Vt.x-Vt.r,Ze),Qe=Math.max(Vt.x+Vt.r,Qe),lt=Math.min(Vt.y-Vt.r,lt),ht=Math.max(Vt.y+Vt.r,ht)}}function ms(B){B._pack_next=B._pack_prev=B}function is(B){delete B._pack_next,delete B._pack_prev}function Qr(B,K,ie,de){var ye=B.children;if(B.x=K+=de*B.x,B.y=ie+=de*B.y,B.r*=de,ye)for(var Le=-1,Be=ye.length;++Le<Be;)Qr(ye[Le],K,ie,de)}function ko(B,K,ie){var de=B.r+ie.r,ye=K.x-B.x,Le=K.y-B.y;if(de&&(ye||Le)){var Be=K.r+ie.r,je=ye*ye+Le*Le,qe=.5+((de*=de)-(Be*=Be))/(2*je),Ze=Math.sqrt(Math.max(0,2*Be*(de+je)-(de-=je)*de-Be*Be))/(2*je);ie.x=B.x+qe*ye+Ze*Le,ie.y=B.y+qe*Le-Ze*ye}else ie.x=B.x+de,ie.y=B.y}function so(B,K){return B.parent==K.parent?1:2}function Ni(B){var K=B.children;return K.length?K[0]:B.t}function Nr(B){var K,ie=B.children;return(K=ie.length)?ie[K-1]:B.t}function Hr(B,K,ie){var de=ie/(K.i-B.i);K.c-=de,K.s+=ie,B.c+=de,K.z+=ie,K.m+=ie}function Ao(B,K,ie){return B.a.parent===K.parent?B.a:ie}function lo(B){var K=B.children;return K&&K.length?lo(K[0]):B}function Xs(B){var K,ie=B.children;return ie&&(K=ie.length)?Xs(ie[K-1]):B}function ys(B){return{x:B.x,y:B.y,dx:B.dx,dy:B.dy}}function Mo(B,K){var ie=B.x+K[3],de=B.y+K[0],ye=B.dx-K[1]-K[3],Le=B.dy-K[0]-K[2];return ye<0&&(ie+=ye/2,ye=0),Le<0&&(de+=Le/2,Le=0),{x:ie,y:de,dx:ye,dy:Le}}function xs(B){var K=B[0],ie=B[B.length-1];return K<ie?[K,ie]:[ie,K]}function uo(B){return B.rangeExtent?B.rangeExtent():xs(B.range())}function qo(B,K,ie,de){var ye=ie(B[0],B[1]),Le=de(K[0],K[1]);return function(Be){return Le(ye(Be))}}function So(B,K){var ie,de=0,ye=B.length-1,Le=B[de],Be=B[ye];return Be<Le&&(ie=de,de=ye,ye=ie,ie=Le,Le=Be,Be=ie),B[de]=K.floor(Le),B[ye]=K.ceil(Be),B}function di(B){return B?{floor:function(K){return Math.floor(K/B)*B},ceil:function(K){return Math.ceil(K/B)*B}}:Go}l.layout.histogram=function(){var B=!0,K=Number,ie=To,de=fl;function ye(Le,Be){for(var je,qe,Ze=[],Qe=Le.map(K,this),lt=ie.call(this,Qe,Be),ht=de.call(this,lt,Qe,Be),St=(Be=-1,Qe.length),Lt=ht.length-1,Mt=B?1:1/St;++Be<Lt;)(je=Ze[Be]=[]).dx=ht[Be+1]-(je.x=ht[Be]),je.y=0;if(Lt>0)for(Be=-1;++Be<St;)(qe=Qe[Be])>=lt[0]&&qe<=lt[1]&&((je=Ze[l.bisect(ht,qe,1,Lt)-1]).y+=Mt,je.push(Le[Be]));return Ze}return ye.value=function(Le){return arguments.length?(K=Le,ye):K},ye.range=function(Le){return arguments.length?(ie=Pn(Le),ye):ie},ye.bins=function(Le){return arguments.length?(de=typeof Le=="number"?function(Be){return Ds(Be,Le)}:Pn(Le),ye):de},ye.frequency=function(Le){return arguments.length?(B=!!Le,ye):B},ye},l.layout.pack=function(){var B,K=l.layout.hierarchy().sort(zs),ie=0,de=[1,1];function ye(Le,Be){var je=K.call(this,Le,Be),qe=je[0],Ze=de[0],Qe=de[1],lt=B==null?Math.sqrt:typeof B=="function"?B:function(){return B};if(qe.x=qe.y=0,Ma(qe,function(St){St.r=+lt(St.value)}),Ma(qe,Ho),ie){var ht=ie*(B?1:Math.max(2*qe.r/Ze,2*qe.r/Qe))/2;Ma(qe,function(St){St.r+=ht}),Ma(qe,Ho),Ma(qe,function(St){St.r-=ht})}return Qr(qe,Ze/2,Qe/2,B?1:1/Math.max(2*qe.r/Ze,2*qe.r/Qe)),je}return ye.size=function(Le){return arguments.length?(de=Le,ye):de},ye.radius=function(Le){return arguments.length?(B=Le==null||typeof Le=="function"?Le:+Le,ye):B},ye.padding=function(Le){return arguments.length?(ie=+Le,ye):ie},Da(ye,K)},l.layout.tree=function(){var B=l.layout.hierarchy().sort(null).value(null),K=so,ie=[1,1],de=null;function ye(qe,Ze){var Qe=B.call(this,qe,Ze),lt=Qe[0],ht=function(Zt){for(var Vt,pn={A:null,children:[Zt]},vn=[pn];(Vt=vn.pop())!=null;)for(var zn,Rn=Vt.children,Un=0,Yn=Rn.length;Un<Yn;++Un)vn.push((Rn[Un]=zn={_:Rn[Un],parent:Vt,children:(zn=Rn[Un].children)&&zn.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Un}).a=zn);return pn.children[0]}(lt);if(Ma(ht,Le),ht.parent.m=-ht.z,ds(ht,Be),de)ds(lt,je);else{var St=lt,Lt=lt,Mt=lt;ds(lt,function(Zt){Zt.x<St.x&&(St=Zt),Zt.x>Lt.x&&(Lt=Zt),Zt.depth>Mt.depth&&(Mt=Zt)});var Ft=K(St,Lt)/2-St.x,Et=ie[0]/(Lt.x+K(Lt,St)/2+Ft),en=ie[1]/(Mt.depth||1);ds(lt,function(Zt){Zt.x=(Zt.x+Ft)*Et,Zt.y=Zt.depth*en})}return Qe}function Le(qe){var Ze=qe.children,Qe=qe.parent.children,lt=qe.i?Qe[qe.i-1]:null;if(Ze.length){(function(St){for(var Lt,Mt=0,Ft=0,Et=St.children,en=Et.length;--en>=0;)(Lt=Et[en]).z+=Mt,Lt.m+=Mt,Mt+=Lt.s+(Ft+=Lt.c)})(qe);var ht=(Ze[0].z+Ze[Ze.length-1].z)/2;lt?(qe.z=lt.z+K(qe._,lt._),qe.m=qe.z-ht):qe.z=ht}else lt&&(qe.z=lt.z+K(qe._,lt._));qe.parent.A=function(St,Lt,Mt){if(Lt){for(var Ft,Et=St,en=St,Zt=Lt,Vt=Et.parent.children[0],pn=Et.m,vn=en.m,zn=Zt.m,Rn=Vt.m;Zt=Nr(Zt),Et=Ni(Et),Zt&&Et;)Vt=Ni(Vt),(en=Nr(en)).a=St,(Ft=Zt.z+zn-Et.z-pn+K(Zt._,Et._))>0&&(Hr(Ao(Zt,St,Mt),St,Ft),pn+=Ft,vn+=Ft),zn+=Zt.m,pn+=Et.m,Rn+=Vt.m,vn+=en.m;Zt&&!Nr(en)&&(en.t=Zt,en.m+=zn-vn),Et&&!Ni(Vt)&&(Vt.t=Et,Vt.m+=pn-Rn,Mt=St)}return Mt}(qe,lt,qe.parent.A||Qe[0])}function Be(qe){qe._.x=qe.z+qe.parent.m,qe.m+=qe.parent.m}function je(qe){qe.x*=ie[0],qe.y=qe.depth*ie[1]}return ye.separation=function(qe){return arguments.length?(K=qe,ye):K},ye.size=function(qe){return arguments.length?(de=(ie=qe)==null?je:null,ye):de?null:ie},ye.nodeSize=function(qe){return arguments.length?(de=(ie=qe)==null?null:je,ye):de?ie:null},Da(ye,B)},l.layout.cluster=function(){var B=l.layout.hierarchy().sort(null).value(null),K=so,ie=[1,1],de=!1;function ye(Le,Be){var je,qe=B.call(this,Le,Be),Ze=qe[0],Qe=0;Ma(Ze,function(Mt){var Ft=Mt.children;Ft&&Ft.length?(Mt.x=function(Et){return Et.reduce(function(en,Zt){return en+Zt.x},0)/Et.length}(Ft),Mt.y=function(Et){return 1+l.max(Et,function(en){return en.y})}(Ft)):(Mt.x=je?Qe+=K(Mt,je):0,Mt.y=0,je=Mt)});var lt=lo(Ze),ht=Xs(Ze),St=lt.x-K(lt,ht)/2,Lt=ht.x+K(ht,lt)/2;return Ma(Ze,de?function(Mt){Mt.x=(Mt.x-Ze.x)*ie[0],Mt.y=(Ze.y-Mt.y)*ie[1]}:function(Mt){Mt.x=(Mt.x-St)/(Lt-St)*ie[0],Mt.y=(1-(Ze.y?Mt.y/Ze.y:1))*ie[1]}),qe}return ye.separation=function(Le){return arguments.length?(K=Le,ye):K},ye.size=function(Le){return arguments.length?(de=(ie=Le)==null,ye):de?null:ie},ye.nodeSize=function(Le){return arguments.length?(de=(ie=Le)!=null,ye):de?ie:null},Da(ye,B)},l.layout.treemap=function(){var B,K=l.layout.hierarchy(),ie=Math.round,de=[1,1],ye=null,Le=ys,Be=!1,je="squarify",qe=.5*(1+Math.sqrt(5));function Ze(Mt,Ft){for(var Et,en,Zt=-1,Vt=Mt.length;++Zt<Vt;)en=(Et=Mt[Zt]).value*(Ft<0?0:Ft),Et.area=isNaN(en)||en<=0?0:en}function Qe(Mt){var Ft=Mt.children;if(Ft&&Ft.length){var Et,en,Zt,Vt=Le(Mt),pn=[],vn=Ft.slice(),zn=1/0,Rn=je==="slice"?Vt.dx:je==="dice"?Vt.dy:je==="slice-dice"?1&Mt.depth?Vt.dy:Vt.dx:Math.min(Vt.dx,Vt.dy);for(Ze(vn,Vt.dx*Vt.dy/Mt.value),pn.area=0;(Zt=vn.length)>0;)pn.push(Et=vn[Zt-1]),pn.area+=Et.area,je!=="squarify"||(en=ht(pn,Rn))<=zn?(vn.pop(),zn=en):(pn.area-=pn.pop().area,St(pn,Rn,Vt,!1),Rn=Math.min(Vt.dx,Vt.dy),pn.length=pn.area=0,zn=1/0);pn.length&&(St(pn,Rn,Vt,!0),pn.length=pn.area=0),Ft.forEach(Qe)}}function lt(Mt){var Ft=Mt.children;if(Ft&&Ft.length){var Et,en=Le(Mt),Zt=Ft.slice(),Vt=[];for(Ze(Zt,en.dx*en.dy/Mt.value),Vt.area=0;Et=Zt.pop();)Vt.push(Et),Vt.area+=Et.area,Et.z!=null&&(St(Vt,Et.z?en.dx:en.dy,en,!Zt.length),Vt.length=Vt.area=0);Ft.forEach(lt)}}function ht(Mt,Ft){for(var Et,en=Mt.area,Zt=0,Vt=1/0,pn=-1,vn=Mt.length;++pn<vn;)(Et=Mt[pn].area)&&(Et<Vt&&(Vt=Et),Et>Zt&&(Zt=Et));return Ft*=Ft,(en*=en)?Math.max(Ft*Zt*qe/en,en/(Ft*Vt*qe)):1/0}function St(Mt,Ft,Et,en){var Zt,Vt=-1,pn=Mt.length,vn=Et.x,zn=Et.y,Rn=Ft?ie(Mt.area/Ft):0;if(Ft==Et.dx){for((en||Rn>Et.dy)&&(Rn=Et.dy);++Vt<pn;)(Zt=Mt[Vt]).x=vn,Zt.y=zn,Zt.dy=Rn,vn+=Zt.dx=Math.min(Et.x+Et.dx-vn,Rn?ie(Zt.area/Rn):0);Zt.z=!0,Zt.dx+=Et.x+Et.dx-vn,Et.y+=Rn,Et.dy-=Rn}else{for((en||Rn>Et.dx)&&(Rn=Et.dx);++Vt<pn;)(Zt=Mt[Vt]).x=vn,Zt.y=zn,Zt.dx=Rn,zn+=Zt.dy=Math.min(Et.y+Et.dy-zn,Rn?ie(Zt.area/Rn):0);Zt.z=!1,Zt.dy+=Et.y+Et.dy-zn,Et.x+=Rn,Et.dx-=Rn}}function Lt(Mt){var Ft=B||K(Mt),Et=Ft[0];return Et.x=Et.y=0,Et.value?(Et.dx=de[0],Et.dy=de[1]):Et.dx=Et.dy=0,B&&K.revalue(Et),Ze([Et],Et.dx*Et.dy/Et.value),(B?lt:Qe)(Et),Be&&(B=Ft),Ft}return Lt.size=function(Mt){return arguments.length?(de=Mt,Lt):de},Lt.padding=function(Mt){if(!arguments.length)return ye;function Ft(en){return Mo(en,Mt)}var Et;return Le=(ye=Mt)==null?ys:(Et=typeof Mt)=="function"?function(en){var Zt=Mt.call(Lt,en,en.depth);return Zt==null?ys(en):Mo(en,typeof Zt=="number"?[Zt,Zt,Zt,Zt]:Zt)}:(Et==="number"&&(Mt=[Mt,Mt,Mt,Mt]),Ft),Lt},Lt.round=function(Mt){return arguments.length?(ie=Mt?Math.round:Number,Lt):ie!=Number},Lt.sticky=function(Mt){return arguments.length?(Be=Mt,B=null,Lt):Be},Lt.ratio=function(Mt){return arguments.length?(qe=Mt,Lt):qe},Lt.mode=function(Mt){return arguments.length?(je=Mt+"",Lt):je},Da(Lt,K)},l.random={normal:function(B,K){var ie=arguments.length;return ie<2&&(K=1),ie<1&&(B=0),function(){var de,ye,Le;do Le=(de=2*Math.random()-1)*de+(ye=2*Math.random()-1)*ye;while(!Le||Le>1);return B+K*de*Math.sqrt(-2*Math.log(Le)/Le)}},logNormal:function(){var B=l.random.normal.apply(l,arguments);return function(){return Math.exp(B())}},bates:function(B){var K=l.random.irwinHall(B);return function(){return K()/B}},irwinHall:function(B){return function(){for(var K=0,ie=0;ie<B;ie++)K+=Math.random();return K}}},l.scale={};var Go={floor:I,ceil:I};function Zo(B,K,ie,de){var ye=[],Le=[],Be=0,je=Math.min(B.length,K.length)-1;for(B[je]<B[0]&&(B=B.slice().reverse(),K=K.slice().reverse());++Be<=je;)ye.push(ie(B[Be-1],B[Be])),Le.push(de(K[Be-1],K[Be]));return function(qe){var Ze=l.bisect(B,qe,1,je)-1;return Le[Ze](ye[Ze](qe))}}function Pi(B,K,ie,de){var ye,Le;function Be(){var qe=Math.min(B.length,K.length)>2?Zo:qo,Ze=de?ts:No;return ye=qe(B,K,Ze,ie),Le=qe(K,B,Ze,Ga),je}function je(qe){return ye(qe)}return je.invert=function(qe){return Le(qe)},je.domain=function(qe){return arguments.length?(B=qe.map(Number),Be()):B},je.range=function(qe){return arguments.length?(K=qe,Be()):K},je.rangeRound=function(qe){return je.range(qe).interpolate(il)},je.clamp=function(qe){return arguments.length?(de=qe,Be()):de},je.interpolate=function(qe){return arguments.length?(ie=qe,Be()):ie},je.ticks=function(qe){return ra(B,qe)},je.tickFormat=function(qe,Ze){return d3_scale_linearTickFormat(B,qe,Ze)},je.nice=function(qe){return Zi(B,qe),Be()},je.copy=function(){return Pi(B,K,ie,de)},Be()}function Ji(B,K){return l.rebind(B,K,"range","rangeRound","interpolate","clamp")}function Zi(B,K){return So(B,di(Oi(B,K)[2])),So(B,di(Oi(B,K)[2])),B}function Oi(B,K){K==null&&(K=10);var ie=xs(B),de=ie[1]-ie[0],ye=Math.pow(10,Math.floor(Math.log(de/K)/Math.LN10)),Le=K/de*ye;return Le<=.15?ye*=10:Le<=.35?ye*=5:Le<=.75&&(ye*=2),ie[0]=Math.ceil(ie[0]/ye)*ye,ie[1]=Math.floor(ie[1]/ye)*ye+.5*ye,ie[2]=ye,ie}function ra(B,K){return l.range.apply(l,Oi(B,K))}function Eo(B,K,ie,de){function ye(je){return(ie?Math.log(je<0?0:je):-Math.log(je>0?0:-je))/Math.log(K)}function Le(je){return ie?Math.pow(K,je):-Math.pow(K,-je)}function Be(je){return B(ye(je))}return Be.invert=function(je){return Le(B.invert(je))},Be.domain=function(je){return arguments.length?(ie=je[0]>=0,B.domain((de=je.map(Number)).map(ye)),Be):de},Be.base=function(je){return arguments.length?(K=+je,B.domain(de.map(ye)),Be):K},Be.nice=function(){var je=So(de.map(ye),ie?Math:Ra);return B.domain(je),de=je.map(Le),Be},Be.ticks=function(){var je=xs(de),qe=[],Ze=je[0],Qe=je[1],lt=Math.floor(ye(Ze)),ht=Math.ceil(ye(Qe)),St=K%1?2:K;if(isFinite(ht-lt)){if(ie){for(;lt<ht;lt++)for(var Lt=1;Lt<St;Lt++)qe.push(Le(lt)*Lt);qe.push(Le(lt))}else for(qe.push(Le(lt));lt++<ht;)for(Lt=St-1;Lt>0;Lt--)qe.push(Le(lt)*Lt);for(lt=0;qe[lt]<Ze;lt++);for(ht=qe.length;qe[ht-1]>Qe;ht--);qe=qe.slice(lt,ht)}return qe},Be.copy=function(){return Eo(B.copy(),K,ie,de)},Ji(Be,B)}l.scale.linear=function(){return Pi([0,1],[0,1],Ga,!1)},l.scale.log=function(){return Eo(l.scale.linear().domain([0,1]),10,!0,[1,10])};var Ra={floor:function(B){return-Math.ceil(-B)},ceil:function(B){return-Math.floor(-B)}};function ji(B,K,ie){var de=_a(K),ye=_a(1/K);function Le(Be){return B(de(Be))}return Le.invert=function(Be){return ye(B.invert(Be))},Le.domain=function(Be){return arguments.length?(B.domain((ie=Be.map(Number)).map(de)),Le):ie},Le.ticks=function(Be){return ra(ie,Be)},Le.tickFormat=function(Be,je){return d3_scale_linearTickFormat(ie,Be,je)},Le.nice=function(Be){return Le.domain(Zi(ie,Be))},Le.exponent=function(Be){return arguments.length?(de=_a(K=Be),ye=_a(1/K),B.domain(ie.map(de)),Le):K},Le.copy=function(){return ji(B.copy(),K,ie)},Ji(Le,B)}function _a(B){return function(K){return K<0?-Math.pow(-K,B):Math.pow(K,B)}}function Sa(B,K){var ie,de,ye;function Le(je){return de[((ie.get(je)||(K.t==="range"?ie.set(je,B.push(je)):NaN))-1)%de.length]}function Be(je,qe){return l.range(B.length).map(function(Ze){return je+qe*Ze})}return Le.domain=function(je){if(!arguments.length)return B;B=[],ie=new m;for(var qe,Ze=-1,Qe=je.length;++Ze<Qe;)ie.has(qe=je[Ze])||ie.set(qe,B.push(qe));return Le[K.t].apply(Le,K.a)},Le.range=function(je){return arguments.length?(de=je,ye=0,K={t:"range",a:arguments},Le):de},Le.rangePoints=function(je,qe){arguments.length<2&&(qe=0);var Ze=je[0],Qe=je[1],lt=B.length<2?(Ze=(Ze+Qe)/2,0):(Qe-Ze)/(B.length-1+qe);return de=Be(Ze+lt*qe/2,lt),ye=0,K={t:"rangePoints",a:arguments},Le},Le.rangeRoundPoints=function(je,qe){arguments.length<2&&(qe=0);var Ze=je[0],Qe=je[1],lt=B.length<2?(Ze=Qe=Math.round((Ze+Qe)/2),0):(Qe-Ze)/(B.length-1+qe)|0;return de=Be(Ze+Math.round(lt*qe/2+(Qe-Ze-(B.length-1+qe)*lt)/2),lt),ye=0,K={t:"rangeRoundPoints",a:arguments},Le},Le.rangeBands=function(je,qe,Ze){arguments.length<2&&(qe=0),arguments.length<3&&(Ze=qe);var Qe=je[1]<je[0],lt=je[Qe-0],ht=(je[1-Qe]-lt)/(B.length-qe+2*Ze);return de=Be(lt+ht*Ze,ht),Qe&&de.reverse(),ye=ht*(1-qe),K={t:"rangeBands",a:arguments},Le},Le.rangeRoundBands=function(je,qe,Ze){arguments.length<2&&(qe=0),arguments.length<3&&(Ze=qe);var Qe=je[1]<je[0],lt=je[Qe-0],ht=je[1-Qe],St=Math.floor((ht-lt)/(B.length-qe+2*Ze));return de=Be(lt+Math.round((ht-lt-(B.length-qe)*St)/2),St),Qe&&de.reverse(),ye=Math.round(St*(1-qe)),K={t:"rangeRoundBands",a:arguments},Le},Le.rangeBand=function(){return ye},Le.rangeExtent=function(){return xs(K.a[0])},Le.copy=function(){return Sa(B,K)},Le.domain(B)}l.scale.pow=function(){return ji(l.scale.linear(),1,[0,1])},l.scale.sqrt=function(){return l.scale.pow().exponent(.5)},l.scale.ordinal=function(){return Sa([],{t:"range",a:[[]]})},l.scale.category10=function(){return l.scale.ordinal().range(Rs)},l.scale.category20=function(){return l.scale.ordinal().range(Ea)},l.scale.category20b=function(){return l.scale.ordinal().range(Ui)},l.scale.category20c=function(){return l.scale.ordinal().range(xr)};var Rs=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Ht),Ea=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Ht),Ui=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Ht),xr=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Ht);function Ki(B,K){var ie;function de(){var Le=0,Be=K.length;for(ie=[];++Le<Be;)ie[Le-1]=l.quantile(B,Le/Be);return ye}function ye(Le){if(!isNaN(Le=+Le))return K[l.bisect(ie,Le)]}return ye.domain=function(Le){return arguments.length?(B=Le.map(p).filter(c).sort(u),de()):B},ye.range=function(Le){return arguments.length?(K=Le,de()):K},ye.quantiles=function(){return ie},ye.invertExtent=function(Le){return(Le=K.indexOf(Le))<0?[NaN,NaN]:[Le>0?ie[Le-1]:B[0],Le<ie.length?ie[Le]:B[B.length-1]]},ye.copy=function(){return Ki(B,K)},de()}function bs(B,K,ie){var de,ye;function Le(je){return ie[Math.max(0,Math.min(ye,Math.floor(de*(je-B))))]}function Be(){return de=ie.length/(K-B),ye=ie.length-1,Le}return Le.domain=function(je){return arguments.length?(B=+je[0],K=+je[je.length-1],Be()):[B,K]},Le.range=function(je){return arguments.length?(ie=je,Be()):ie},Le.invertExtent=function(je){return[je=(je=ie.indexOf(je))<0?NaN:je/de+B,je+1/de]},Le.copy=function(){return bs(B,K,ie)},Be()}function Fs(B,K){function ie(de){if(de<=de)return K[l.bisect(B,de)]}return ie.domain=function(de){return arguments.length?(B=de,ie):B},ie.range=function(de){return arguments.length?(K=de,ie):K},ie.invertExtent=function(de){return de=K.indexOf(de),[B[de-1],B[de]]},ie.copy=function(){return Fs(B,K)},ie}function Yo(B){function K(ie){return+ie}return K.invert=K,K.domain=K.range=function(ie){return arguments.length?(B=ie.map(K),K):B},K.ticks=function(ie){return ra(B,ie)},K.tickFormat=function(ie,de){return d3_scale_linearTickFormat(B,ie,de)},K.copy=function(){return Yo(B)},K}function Wo(){return 0}l.scale.quantile=function(){return Ki([],[])},l.scale.quantize=function(){return bs(0,1,[0,1])},l.scale.threshold=function(){return Fs([.5],[0,1])},l.scale.identity=function(){return Yo([0,1])},l.svg={},l.svg.arc=function(){var B=vr,K=Fa,ie=Wo,de=co,ye=as,Le=_s,Be=$i;function je(){var Ze=Math.max(0,+B.apply(this,arguments)),Qe=Math.max(0,+K.apply(this,arguments)),lt=ye.apply(this,arguments)-Ye,ht=Le.apply(this,arguments)-Ye,St=Math.abs(ht-lt),Lt=lt>ht?0:1;if(Qe<Ze&&(Mt=Qe,Qe=Ze,Ze=Mt),St>=Ct)return qe(Qe,Lt)+(Ze?qe(Ze,1-Lt):"")+"Z";var Mt,Ft,Et,en,Zt,Vt,pn,vn,zn,Rn,Un,Yn,or=0,ir=0,cr=[];if((en=(+Be.apply(this,arguments)||0)/2)&&(Et=de===co?Math.sqrt(Ze*Ze+Qe*Qe):+de.apply(this,arguments),Lt||(ir*=-1),Qe&&(ir=We(Et/Qe*Math.sin(en))),Ze&&(or=We(Et/Ze*Math.sin(en)))),Qe){Zt=Qe*Math.cos(lt+ir),Vt=Qe*Math.sin(lt+ir),pn=Qe*Math.cos(ht-ir),vn=Qe*Math.sin(ht-ir);var mr=Math.abs(ht-lt-2*ir)<=wt?0:1;if(ir&&Ba(Zt,Vt,pn,vn)===Lt^mr){var Lr=(lt+ht)/2;Zt=Qe*Math.cos(Lr),Vt=Qe*Math.sin(Lr),pn=vn=null}}else Zt=Vt=0;if(Ze){zn=Ze*Math.cos(ht-or),Rn=Ze*Math.sin(ht-or),Un=Ze*Math.cos(lt+or),Yn=Ze*Math.sin(lt+or);var Bn=Math.abs(lt-ht+2*or)<=wt?0:1;if(or&&Ba(zn,Rn,Un,Yn)===1-Lt^Bn){var rr=(lt+ht)/2;zn=Ze*Math.cos(rr),Rn=Ze*Math.sin(rr),Un=Yn=null}}else zn=Rn=0;if(St>xt&&(Mt=Math.min(Math.abs(Qe-Ze)/2,+ie.apply(this,arguments)))>.001){Ft=Ze<Qe^Lt?0:1;var fr=Mt,yr=Mt;if(St<wt){var Mr=Un==null?[zn,Rn]:pn==null?[Zt,Vt]:At([Zt,Vt],[Un,Yn],[pn,vn],[zn,Rn]),Ir=Zt-Mr[0],Br=Vt-Mr[1],Zr=pn-Mr[0],oi=vn-Mr[1],si=1/Math.sin(Math.acos((Ir*Zr+Br*oi)/(Math.sqrt(Ir*Ir+Br*Br)*Math.sqrt(Zr*Zr+oi*oi)))/2),Yr=Math.sqrt(Mr[0]*Mr[0]+Mr[1]*Mr[1]);yr=Math.min(Mt,(Ze-Yr)/(si-1)),fr=Math.min(Mt,(Qe-Yr)/(si+1))}if(pn!=null){var wi=La(Un==null?[zn,Rn]:[Un,Yn],[Zt,Vt],Qe,fr,Lt),Hi=La([pn,vn],[zn,Rn],Qe,fr,Lt);Mt===fr?cr.push("M",wi[0],"A",fr,",",fr," 0 0,",Ft," ",wi[1],"A",Qe,",",Qe," 0 ",1-Lt^Ba(wi[1][0],wi[1][1],Hi[1][0],Hi[1][1]),",",Lt," ",Hi[1],"A",fr,",",fr," 0 0,",Ft," ",Hi[0]):cr.push("M",wi[0],"A",fr,",",fr," 0 1,",Ft," ",Hi[0])}else cr.push("M",Zt,",",Vt);if(Un!=null){var Li=La([Zt,Vt],[Un,Yn],Ze,-yr,Lt),Ri=La([zn,Rn],pn==null?[Zt,Vt]:[pn,vn],Ze,-yr,Lt);Mt===yr?cr.push("L",Ri[0],"A",yr,",",yr," 0 0,",Ft," ",Ri[1],"A",Ze,",",Ze," 0 ",Lt^Ba(Ri[1][0],Ri[1][1],Li[1][0],Li[1][1]),",",1-Lt," ",Li[1],"A",yr,",",yr," 0 0,",Ft," ",Li[0]):cr.push("L",Ri[0],"A",yr,",",yr," 0 0,",Ft," ",Li[0])}else cr.push("L",zn,",",Rn)}else cr.push("M",Zt,",",Vt),pn!=null&&cr.push("A",Qe,",",Qe," 0 ",mr,",",Lt," ",pn,",",vn),cr.push("L",zn,",",Rn),Un!=null&&cr.push("A",Ze,",",Ze," 0 ",Bn,",",1-Lt," ",Un,",",Yn);return cr.push("Z"),cr.join("")}function qe(Ze,Qe){return"M0,"+Ze+"A"+Ze+","+Ze+" 0 1,"+Qe+" 0,"+-Ze+"A"+Ze+","+Ze+" 0 1,"+Qe+" 0,"+Ze}return je.innerRadius=function(Ze){return arguments.length?(B=Pn(Ze),je):B},je.outerRadius=function(Ze){return arguments.length?(K=Pn(Ze),je):K},je.cornerRadius=function(Ze){return arguments.length?(ie=Pn(Ze),je):ie},je.padRadius=function(Ze){return arguments.length?(de=Ze==co?co:Pn(Ze),je):de},je.startAngle=function(Ze){return arguments.length?(ye=Pn(Ze),je):ye},je.endAngle=function(Ze){return arguments.length?(Le=Pn(Ze),je):Le},je.padAngle=function(Ze){return arguments.length?(Be=Pn(Ze),je):Be},je.centroid=function(){var Ze=(+B.apply(this,arguments)+ +K.apply(this,arguments))/2,Qe=(+ye.apply(this,arguments)+ +Le.apply(this,arguments))/2-Ye;return[Math.cos(Qe)*Ze,Math.sin(Qe)*Ze]},je};var co="auto";function vr(B){return B.innerRadius}function Fa(B){return B.outerRadius}function as(B){return B.startAngle}function _s(B){return B.endAngle}function $i(B){return B&&B.padAngle}function Ba(B,K,ie,de){return(B-ie)*K-(K-de)*B>0?0:1}function La(B,K,ie,de,ye){var Le=B[0]-K[0],Be=B[1]-K[1],je=(ye?de:-de)/Math.sqrt(Le*Le+Be*Be),qe=je*Be,Ze=-je*Le,Qe=B[0]+qe,lt=B[1]+Ze,ht=K[0]+qe,St=K[1]+Ze,Lt=(Qe+ht)/2,Mt=(lt+St)/2,Ft=ht-Qe,Et=St-lt,en=Ft*Ft+Et*Et,Zt=ie-de,Vt=Qe*St-ht*lt,pn=(Et<0?-1:1)*Math.sqrt(Math.max(0,Zt*Zt*en-Vt*Vt)),vn=(Vt*Et-Ft*pn)/en,zn=(-Vt*Ft-Et*pn)/en,Rn=(Vt*Et+Ft*pn)/en,Un=(-Vt*Ft+Et*pn)/en,Yn=vn-Lt,or=zn-Mt,ir=Rn-Lt,cr=Un-Mt;return Yn*Yn+or*or>ir*ir+cr*cr&&(vn=Rn,zn=Un),[[vn-qe,zn-Ze],[vn*ie/Zt,zn*ie/Zt]]}function wa(){return!0}function Wa(B){var K=Vn,ie=In,de=wa,ye=Ii,Le=ye.key,Be=.7;function je(qe){var Ze,Qe=[],lt=[],ht=-1,St=qe.length,Lt=Pn(K),Mt=Pn(ie);function Ft(){Qe.push("M",ye(B(lt),Be))}for(;++ht<St;)de.call(this,Ze=qe[ht],ht)?lt.push([+Lt.call(this,Ze,ht),+Mt.call(this,Ze,ht)]):lt.length&&(Ft(),lt=[]);return lt.length&&Ft(),Qe.length?Qe.join(""):null}return je.x=function(qe){return arguments.length?(K=qe,je):K},je.y=function(qe){return arguments.length?(ie=qe,je):ie},je.defined=function(qe){return arguments.length?(de=qe,je):de},je.interpolate=function(qe){return arguments.length?(Le=typeof qe=="function"?ye=qe:(ye=fo.get(qe)||Ii).key,je):Le},je.tension=function(qe){return arguments.length?(Be=qe,je):Be},je}l.svg.line=function(){return Wa(I)};var fo=l.map({linear:Ii,"linear-closed":Xo,step:function(B){for(var K=0,ie=B.length,de=B[0],ye=[de[0],",",de[1]];++K<ie;)ye.push("H",(de[0]+(de=B[K])[0])/2,"V",de[1]);return ie>1&&ye.push("H",de[0]),ye.join("")},"step-before":os,"step-after":Vi,basis:pa,"basis-open":function(B){if(B.length<4)return Ii(B);for(var K,ie=[],de=-1,ye=B.length,Le=[0],Be=[0];++de<3;)K=B[de],Le.push(K[0]),Be.push(K[1]);for(ie.push(Di(_i,Le)+","+Di(_i,Be)),--de;++de<ye;)K=B[de],Le.shift(),Le.push(K[0]),Be.shift(),Be.push(K[1]),Xr(ie,Le,Be);return ie.join("")},"basis-closed":function(B){for(var K,ie,de=-1,ye=B.length,Le=ye+4,Be=[],je=[];++de<4;)ie=B[de%ye],Be.push(ie[0]),je.push(ie[1]);for(K=[Di(_i,Be),",",Di(_i,je)],--de;++de<Le;)ie=B[de%ye],Be.shift(),Be.push(ie[0]),je.shift(),je.push(ie[1]),Xr(K,Be,je);return K.join("")},bundle:function(B,K){var ie=B.length-1;if(ie)for(var de,ye,Le=B[0][0],Be=B[0][1],je=B[ie][0]-Le,qe=B[ie][1]-Be,Ze=-1;++Ze<=ie;)ye=Ze/ie,(de=B[Ze])[0]=K*de[0]+(1-K)*(Le+ye*je),de[1]=K*de[1]+(1-K)*(Be+ye*qe);return pa(B)},cardinal:function(B,K){return B.length<3?Ii(B):B[0]+ei(B,ws(B,K))},"cardinal-open":function(B,K){return B.length<4?Ii(B):B[1]+ei(B.slice(1,-1),ws(B,K))},"cardinal-closed":function(B,K){return B.length<3?Xo(B):B[0]+ei((B.push(B[0]),B),ws([B[B.length-2]].concat(B,[B[1]]),K))},monotone:function(B){return B.length<3?Ii(B):B[0]+ei(B,function(K){for(var ie,de,ye,Le,Be=[],je=function(Qe){for(var lt=0,ht=Qe.length-1,St=[],Lt=Qe[0],Mt=Qe[1],Ft=St[0]=Ta(Lt,Mt);++lt<ht;)St[lt]=(Ft+(Ft=Ta(Lt=Mt,Mt=Qe[lt+1])))/2;return St[lt]=Ft,St}(K),qe=-1,Ze=K.length-1;++qe<Ze;)ie=Ta(K[qe],K[qe+1]),y(ie)<xt?je[qe]=je[qe+1]=0:(Le=(de=je[qe]/ie)*de+(ye=je[qe+1]/ie)*ye)>9&&(Le=3*ie/Math.sqrt(Le),je[qe]=Le*de,je[qe+1]=Le*ye);for(qe=-1;++qe<=Ze;)Le=(K[Math.min(Ze,qe+1)][0]-K[Math.max(0,qe-1)][0])/(6*(1+je[qe]*je[qe])),Be.push([Le||0,je[qe]*Le||0]);return Be}(B))}});function Ii(B){return B.length>1?B.join("L"):B+"Z"}function Xo(B){return B.join("L")+"Z"}function os(B){for(var K=0,ie=B.length,de=B[0],ye=[de[0],",",de[1]];++K<ie;)ye.push("V",(de=B[K])[1],"H",de[0]);return ye.join("")}function Vi(B){for(var K=0,ie=B.length,de=B[0],ye=[de[0],",",de[1]];++K<ie;)ye.push("H",(de=B[K])[0],"V",de[1]);return ye.join("")}function ei(B,K){if(K.length<1||B.length!=K.length&&B.length!=K.length+2)return Ii(B);var ie=B.length!=K.length,de="",ye=B[0],Le=B[1],Be=K[0],je=Be,qe=1;if(ie&&(de+="Q"+(Le[0]-2*Be[0]/3)+","+(Le[1]-2*Be[1]/3)+","+Le[0]+","+Le[1],ye=B[1],qe=2),K.length>1){je=K[1],Le=B[qe],qe++,de+="C"+(ye[0]+Be[0])+","+(ye[1]+Be[1])+","+(Le[0]-je[0])+","+(Le[1]-je[1])+","+Le[0]+","+Le[1];for(var Ze=2;Ze<K.length;Ze++,qe++)Le=B[qe],je=K[Ze],de+="S"+(Le[0]-je[0])+","+(Le[1]-je[1])+","+Le[0]+","+Le[1]}if(ie){var Qe=B[qe];de+="Q"+(Le[0]+2*je[0]/3)+","+(Le[1]+2*je[1]/3)+","+Qe[0]+","+Qe[1]}return de}function ws(B,K){for(var ie,de=[],ye=(1-K)/2,Le=B[0],Be=B[1],je=1,qe=B.length;++je<qe;)ie=Le,Le=Be,Be=B[je],de.push([ye*(Be[0]-ie[0]),ye*(Be[1]-ie[1])]);return de}function pa(B){if(B.length<3)return Ii(B);var K=1,ie=B.length,de=B[0],ye=de[0],Le=de[1],Be=[ye,ye,ye,(de=B[1])[0]],je=[Le,Le,Le,de[1]],qe=[ye,",",Le,"L",Di(_i,Be),",",Di(_i,je)];for(B.push(B[ie-1]);++K<=ie;)de=B[K],Be.shift(),Be.push(de[0]),je.shift(),je.push(de[1]),Xr(qe,Be,je);return B.pop(),qe.push("L",de),qe.join("")}function Di(B,K){return B[0]*K[0]+B[1]*K[1]+B[2]*K[2]+B[3]*K[3]}fo.forEach(function(B,K){K.key=B,K.closed=/-closed$/.test(B)});var Xa=[0,2/3,1/3,0],Js=[0,1/3,2/3,0],_i=[0,1/6,2/3,1/6];function Xr(B,K,ie){B.push("C",Di(Xa,K),",",Di(Xa,ie),",",Di(Js,K),",",Di(Js,ie),",",Di(_i,K),",",Di(_i,ie))}function Ta(B,K){return(K[1]-B[1])/(K[0]-B[0])}function Ja(B){for(var K,ie,de,ye=-1,Le=B.length;++ye<Le;)ie=(K=B[ye])[0],de=K[1]-Ye,K[0]=ie*Math.cos(de),K[1]=ie*Math.sin(de);return B}function Na(B){var K=Vn,ie=Vn,de=0,ye=In,Le=wa,Be=Ii,je=Be.key,qe=Be,Ze="L",Qe=.7;function lt(ht){var St,Lt,Mt,Ft=[],Et=[],en=[],Zt=-1,Vt=ht.length,pn=Pn(K),vn=Pn(de),zn=K===ie?function(){return Lt}:Pn(ie),Rn=de===ye?function(){return Mt}:Pn(ye);function Un(){Ft.push("M",Be(B(en),Qe),Ze,qe(B(Et.reverse()),Qe),"Z")}for(;++Zt<Vt;)Le.call(this,St=ht[Zt],Zt)?(Et.push([Lt=+pn.call(this,St,Zt),Mt=+vn.call(this,St,Zt)]),en.push([+zn.call(this,St,Zt),+Rn.call(this,St,Zt)])):Et.length&&(Un(),Et=[],en=[]);return Et.length&&Un(),Ft.length?Ft.join(""):null}return lt.x=function(ht){return arguments.length?(K=ie=ht,lt):ie},lt.x0=function(ht){return arguments.length?(K=ht,lt):K},lt.x1=function(ht){return arguments.length?(ie=ht,lt):ie},lt.y=function(ht){return arguments.length?(de=ye=ht,lt):ye},lt.y0=function(ht){return arguments.length?(de=ht,lt):de},lt.y1=function(ht){return arguments.length?(ye=ht,lt):ye},lt.defined=function(ht){return arguments.length?(Le=ht,lt):Le},lt.interpolate=function(ht){return arguments.length?(je=typeof ht=="function"?Be=ht:(Be=fo.get(ht)||Ii).key,qe=Be.reverse||Be,Ze=Be.closed?"M":"L",lt):je},lt.tension=function(ht){return arguments.length?(Qe=ht,lt):Qe},lt}function Bs(B){return B.source}function Lo(B){return B.target}function Jo(B){return B.radius}function Ei(B){return[B.x,B.y]}function Yi(){return 64}function Tr(){return"circle"}function Ar(B){var K=Math.sqrt(B/wt);return"M0,"+K+"A"+K+","+K+" 0 1,1 0,"+-K+"A"+K+","+K+" 0 1,1 0,"+K+"Z"}l.svg.line.radial=function(){var B=Wa(Ja);return B.radius=B.x,delete B.x,B.angle=B.y,delete B.y,B},os.reverse=Vi,Vi.reverse=os,l.svg.area=function(){return Na(I)},l.svg.area.radial=function(){var B=Na(Ja);return B.radius=B.x,delete B.x,B.innerRadius=B.x0,delete B.x0,B.outerRadius=B.x1,delete B.x1,B.angle=B.y,delete B.y,B.startAngle=B.y0,delete B.y0,B.endAngle=B.y1,delete B.y1,B},l.svg.chord=function(){var B=Bs,K=Lo,ie=Jo,de=as,ye=_s;function Le(Ze,Qe){var lt,ht,St=Be(this,B,Ze,Qe),Lt=Be(this,K,Ze,Qe);return"M"+St.p0+je(St.r,St.p1,St.a1-St.a0)+(ht=Lt,((lt=St).a0==ht.a0&&lt.a1==ht.a1?qe(St.r,St.p1,St.r,St.p0):qe(St.r,St.p1,Lt.r,Lt.p0)+je(Lt.r,Lt.p1,Lt.a1-Lt.a0)+qe(Lt.r,Lt.p1,St.r,St.p0))+"Z")}function Be(Ze,Qe,lt,ht){var St=Qe.call(Ze,lt,ht),Lt=ie.call(Ze,St,ht),Mt=de.call(Ze,St,ht)-Ye,Ft=ye.call(Ze,St,ht)-Ye;return{r:Lt,a0:Mt,a1:Ft,p0:[Lt*Math.cos(Mt),Lt*Math.sin(Mt)],p1:[Lt*Math.cos(Ft),Lt*Math.sin(Ft)]}}function je(Ze,Qe,lt){return"A"+Ze+","+Ze+" 0 "+ +(lt>wt)+",1 "+Qe}function qe(Ze,Qe,lt,ht){return"Q 0,0 "+ht}return Le.radius=function(Ze){return arguments.length?(ie=Pn(Ze),Le):ie},Le.source=function(Ze){return arguments.length?(B=Pn(Ze),Le):B},Le.target=function(Ze){return arguments.length?(K=Pn(Ze),Le):K},Le.startAngle=function(Ze){return arguments.length?(de=Pn(Ze),Le):de},Le.endAngle=function(Ze){return arguments.length?(ye=Pn(Ze),Le):ye},Le},l.svg.diagonal=function(){var B=Bs,K=Lo,ie=Ei;function de(ye,Le){var Be=B.call(this,ye,Le),je=K.call(this,ye,Le),qe=(Be.y+je.y)/2,Ze=[Be,{x:Be.x,y:qe},{x:je.x,y:qe},je];return"M"+(Ze=Ze.map(ie))[0]+"C"+Ze[1]+" "+Ze[2]+" "+Ze[3]}return de.source=function(ye){return arguments.length?(B=Pn(ye),de):B},de.target=function(ye){return arguments.length?(K=Pn(ye),de):K},de.projection=function(ye){return arguments.length?(ie=ye,de):ie},de},l.svg.diagonal.radial=function(){var B=l.svg.diagonal(),K=Ei,ie=B.projection;return B.projection=function(de){return arguments.length?ie(function(ye){return function(){var Le=ye.apply(this,arguments),Be=Le[0],je=Le[1]-Ye;return[Be*Math.cos(je),Be*Math.sin(je)]}}(K=de)):K},B},l.svg.symbol=function(){var B=Tr,K=Yi;function ie(de,ye){return(ss.get(B.call(this,de,ye))||Ar)(K.call(this,de,ye))}return ie.type=function(de){return arguments.length?(B=Pn(de),ie):B},ie.size=function(de){return arguments.length?(K=Pn(de),ie):K},ie};var ss=l.map({circle:Ar,cross:function(B){var K=Math.sqrt(B/5)/2;return"M"+-3*K+","+-K+"H"+-K+"V"+-3*K+"H"+K+"V"+-K+"H"+3*K+"V"+K+"H"+K+"V"+3*K+"H"+-K+"V"+K+"H"+-3*K+"Z"},diamond:function(B){var K=Math.sqrt(B/(2*Co)),ie=K*Co;return"M0,"+-K+"L"+ie+",0 0,"+K+" "+-ie+",0Z"},square:function(B){var K=Math.sqrt(B)/2;return"M"+-K+","+-K+"L"+K+","+-K+" "+K+","+K+" "+-K+","+K+"Z"},"triangle-down":function(B){var K=Math.sqrt(B/ia),ie=K*ia/2;return"M0,"+ie+"L"+K+","+-ie+" "+-K+","+-ie+"Z"},"triangle-up":function(B){var K=Math.sqrt(B/ia),ie=K*ia/2;return"M0,"+-ie+"L"+K+","+ie+" "+-K+","+ie+"Z"}});l.svg.symbolTypes=ss.keys();var ia=Math.sqrt(3),Co=Math.tan(30*Xe);pe.transition=function(B){for(var K,ie,de=Po||++zi,ye=Ko(B),Le=[],Be=Oo||{time:Date.now(),ease:no,delay:0,duration:250},je=-1,qe=this.length;++je<qe;){Le.push(K=[]);for(var Ze=this[je],Qe=-1,lt=Ze.length;++Qe<lt;)(ie=Ze[Qe])&&us(ie,Qe,ye,de,Be),K.push(ie)}return Xi(Le,ye,de)},pe.interrupt=function(B){return this.each(B==null?Wi:ls(Ko(B)))};var Wi=ls(Ko());function ls(B){return function(){var K,ie,de;(K=this[B])&&(de=K[ie=K.active])&&(de.timer.c=null,de.timer.t=NaN,--K.count?delete K[ie]:delete this[B],K.active+=.5,de.event&&de.event.interrupt.call(this,this.__data__,de.index))}}function Xi(B,K,ie){return ee(B,Cr),B.namespace=K,B.id=ie,B}var Po,Oo,Cr=[],zi=0;function Ka(B,K,ie,de){var ye=B.id,Le=B.namespace;return _e(B,typeof ie=="function"?function(Be,je,qe){Be[Le][ye].tween.set(K,de(ie.call(Be,Be.__data__,je,qe)))}:(ie=de(ie),function(Be){Be[Le][ye].tween.set(K,ie)}))}function da(B){return B==null&&(B=""),function(){this.textContent=B}}function Ko(B){return B==null?"__transition__":"__transition_"+B+"__"}function us(B,K,ie,de,ye){var Le,Be,je,qe,Ze,Qe=B[ie]||(B[ie]={active:0,count:0}),lt=Qe[de];function ht(Lt){var Mt=Qe.active,Ft=Qe[Mt];for(var Et in Ft&&(Ft.timer.c=null,Ft.timer.t=NaN,--Qe.count,delete Qe[Mt],Ft.event&&Ft.event.interrupt.call(B,B.__data__,Ft.index)),Qe)if(+Et<de){var en=Qe[Et];en.timer.c=null,en.timer.t=NaN,--Qe.count,delete Qe[Et]}Be.c=St,tn(function(){return Be.c&&St(Lt||1)&&(Be.c=null,Be.t=NaN),1},0,Le),Qe.active=de,lt.event&&lt.event.start.call(B,B.__data__,K),Ze=[],lt.tween.forEach(function(Zt,Vt){(Vt=Vt.call(B,B.__data__,K))&&Ze.push(Vt)}),qe=lt.ease,je=lt.duration}function St(Lt){for(var Mt=Lt/je,Ft=qe(Mt),Et=Ze.length;Et>0;)Ze[--Et].call(B,Ft);if(Mt>=1)return lt.event&&lt.event.end.call(B,B.__data__,K),--Qe.count?delete Qe[de]:delete B[ie],1}lt||(Le=ye.time,Be=tn(function(Lt){var Mt=lt.delay;if(Be.t=Mt+Le,Mt<=Lt)return ht(Lt-Mt);Be.c=ht},0,Le),lt=Qe[de]={tween:new m,time:Le,timer:Be,delay:ye.delay,duration:ye.duration,ease:ye.ease,index:K},ye=null,++Qe.count)}Cr.call=pe.call,Cr.empty=pe.empty,Cr.node=pe.node,Cr.size=pe.size,l.transition=function(B,K){return B&&B.transition?Po?B.transition(K):B:l.selection().transition(B)},l.transition.prototype=Cr,Cr.select=function(B){var K,ie,de,ye=this.id,Le=this.namespace,Be=[];B=ve(B);for(var je=-1,qe=this.length;++je<qe;){Be.push(K=[]);for(var Ze=this[je],Qe=-1,lt=Ze.length;++Qe<lt;)(de=Ze[Qe])&&(ie=B.call(de,de.__data__,Qe,je))?("__data__"in de&&(ie.__data__=de.__data__),us(ie,Qe,Le,ye,de[Le][ye]),K.push(ie)):K.push(null)}return Xi(Be,Le,ye)},Cr.selectAll=function(B){var K,ie,de,ye,Le,Be=this.id,je=this.namespace,qe=[];B=we(B);for(var Ze=-1,Qe=this.length;++Ze<Qe;)for(var lt=this[Ze],ht=-1,St=lt.length;++ht<St;)if(de=lt[ht]){Le=de[je][Be],ie=B.call(de,de.__data__,ht,Ze),qe.push(K=[]);for(var Lt=-1,Mt=ie.length;++Lt<Mt;)(ye=ie[Lt])&&us(ye,Lt,je,Be,Le),K.push(ye)}return Xi(qe,je,Be)},Cr.filter=function(B){var K,ie,de=[];typeof B!="function"&&(B=he(B));for(var ye=0,Le=this.length;ye<Le;ye++){de.push(K=[]);for(var Be,je=0,qe=(Be=this[ye]).length;je<qe;je++)(ie=Be[je])&&B.call(ie,ie.__data__,je,ye)&&K.push(ie)}return Xi(de,this.namespace,this.id)},Cr.tween=function(B,K){var ie=this.id,de=this.namespace;return arguments.length<2?this.node()[de][ie].tween.get(B):_e(this,K==null?function(ye){ye[de][ie].tween.remove(B)}:function(ye){ye[de][ie].tween.set(B,K)})},Cr.attr=function(B,K){if(arguments.length<2){for(K in B)this.attr(K,B[K]);return this}var ie=B=="transform"?xo:Ga,de=l.ns.qualify(B);function ye(){this.removeAttribute(de)}function Le(){this.removeAttributeNS(de.space,de.local)}return Ka(this,"attr."+B,K,de.local?function(Be){return Be==null?Le:(Be+="",function(){var je,qe=this.getAttributeNS(de.space,de.local);return qe!==Be&&(je=ie(qe,Be),function(Ze){this.setAttributeNS(de.space,de.local,je(Ze))})})}:function(Be){return Be==null?ye:(Be+="",function(){var je,qe=this.getAttribute(de);return qe!==Be&&(je=ie(qe,Be),function(Ze){this.setAttribute(de,je(Ze))})})})},Cr.attrTween=function(B,K){var ie=l.ns.qualify(B);return this.tween("attr."+B,ie.local?function(de,ye){var Le=K.call(this,de,ye,this.getAttributeNS(ie.space,ie.local));return Le&&function(Be){this.setAttributeNS(ie.space,ie.local,Le(Be))}}:function(de,ye){var Le=K.call(this,de,ye,this.getAttribute(ie));return Le&&function(Be){this.setAttribute(ie,Le(Be))}})},Cr.style=function(B,K,ie){var de=arguments.length;if(de<3){if(typeof B!="string"){for(ie in de<2&&(K=""),B)this.style(ie,B[ie],K);return this}ie=""}function ye(){this.style.removeProperty(B)}return Ka(this,"style."+B,K,function(Le){return Le==null?ye:(Le+="",function(){var Be,je=e(this).getComputedStyle(this,null).getPropertyValue(B);return je!==Le&&(Be=Ga(je,Le),function(qe){this.style.setProperty(B,Be(qe),ie)})})})},Cr.styleTween=function(B,K,ie){return arguments.length<3&&(ie=""),this.tween("style."+B,function(de,ye){var Le=K.call(this,de,ye,e(this).getComputedStyle(this,null).getPropertyValue(B));return Le&&function(Be){this.style.setProperty(B,Le(Be),ie)}})},Cr.text=function(B){return Ka(this,"text",B,da)},Cr.remove=function(){var B=this.namespace;return this.each("end.transition",function(){var K;this[B].count<2&&(K=this.parentNode)&&K.removeChild(this)})},Cr.ease=function(B){var K=this.id,ie=this.namespace;return arguments.length<1?this.node()[ie][K].ease:(typeof B!="function"&&(B=l.ease.apply(l,arguments)),_e(this,function(de){de[ie][K].ease=B}))},Cr.delay=function(B){var K=this.id,ie=this.namespace;return arguments.length<1?this.node()[ie][K].delay:_e(this,typeof B=="function"?function(de,ye,Le){de[ie][K].delay=+B.call(de,de.__data__,ye,Le)}:(B=+B,function(de){de[ie][K].delay=B}))},Cr.duration=function(B){var K=this.id,ie=this.namespace;return arguments.length<1?this.node()[ie][K].duration:_e(this,typeof B=="function"?function(de,ye,Le){de[ie][K].duration=Math.max(1,B.call(de,de.__data__,ye,Le))}:(B=Math.max(1,B),function(de){de[ie][K].duration=B}))},Cr.each=function(B,K){var ie=this.id,de=this.namespace;if(arguments.length<2){var ye=Oo,Le=Po;try{Po=ie,_e(this,function(Be,je,qe){Oo=Be[de][ie],B.call(Be,Be.__data__,je,qe)})}finally{Oo=ye,Po=Le}}else _e(this,function(Be){var je=Be[de][ie];(je.event||(je.event=l.dispatch("start","end","interrupt"))).on(B,K)});return this},Cr.transition=function(){for(var B,K,ie,de=this.id,ye=++zi,Le=this.namespace,Be=[],je=0,qe=this.length;je<qe;je++){Be.push(B=[]);for(var Ze,Qe=0,lt=(Ze=this[je]).length;Qe<lt;Qe++)(K=Ze[Qe])&&us(K,Qe,Le,ye,{time:(ie=K[Le][de]).time,ease:ie.ease,delay:ie.delay+ie.duration,duration:ie.duration}),B.push(K)}return Xi(Be,Le,ye)},l.svg.axis=function(){var B,K=l.scale.linear(),ie=$o,de=6,ye=6,Le=3,Be=[10],je=null;function qe(Ze){Ze.each(function(){var Qe,lt=l.select(this),ht=this.__chart__||K,St=this.__chart__=K.copy(),Lt=je??(St.ticks?St.ticks.apply(St,Be):St.domain()),Mt=B??(St.tickFormat?St.tickFormat.apply(St,Be):I),Ft=lt.selectAll(".tick").data(Lt,St),Et=Ft.enter().insert("g",".domain").attr("class","tick").style("opacity",xt),en=l.transition(Ft.exit()).style("opacity",xt).remove(),Zt=l.transition(Ft.order()).style("opacity",1),Vt=Math.max(de,0)+Le,pn=uo(St),vn=lt.selectAll(".domain").data([0]),zn=(vn.enter().append("path").attr("class","domain"),l.transition(vn));Et.append("line"),Et.append("text");var Rn,Un,Yn,or,ir=Et.select("line"),cr=Zt.select("line"),mr=Ft.select("text").text(Mt),Lr=Et.select("text"),Bn=Zt.select("text"),rr=ie==="top"||ie==="left"?-1:1;if(ie==="bottom"||ie==="top"?(Qe=R,Rn="x",Yn="y",Un="x2",or="y2",mr.attr("dy",rr<0?"0em":".71em").style("text-anchor","middle"),zn.attr("d","M"+pn[0]+","+rr*ye+"V0H"+pn[1]+"V"+rr*ye)):(Qe=U,Rn="y",Yn="x",Un="y2",or="x2",mr.attr("dy",".32em").style("text-anchor",rr<0?"end":"start"),zn.attr("d","M"+rr*ye+","+pn[0]+"H0V"+pn[1]+"H"+rr*ye)),ir.attr(or,rr*de),Lr.attr(Yn,rr*Vt),cr.attr(Un,0).attr(or,rr*de),Bn.attr(Rn,0).attr(Yn,rr*Vt),St.rangeBand){var fr=St,yr=fr.rangeBand()/2;ht=St=function(Mr){return fr(Mr)+yr}}else ht.rangeBand?ht=St:en.call(Qe,St,ht);Et.call(Qe,ht,St),Zt.call(Qe,St,St)})}return qe.scale=function(Ze){return arguments.length?(K=Ze,qe):K},qe.orient=function(Ze){return arguments.length?(ie=Ze in ho?Ze+"":$o,qe):ie},qe.ticks=function(){return arguments.length?(Be=b(arguments),qe):Be},qe.tickValues=function(Ze){return arguments.length?(je=Ze,qe):je},qe.tickFormat=function(Ze){return arguments.length?(B=Ze,qe):B},qe.tickSize=function(Ze){var Qe=arguments.length;return Qe?(de=+Ze,ye=+arguments[Qe-1],qe):de},qe.innerTickSize=function(Ze){return arguments.length?(de=+Ze,qe):de},qe.outerTickSize=function(Ze){return arguments.length?(ye=+Ze,qe):ye},qe.tickPadding=function(Ze){return arguments.length?(Le=+Ze,qe):Le},qe.tickSubdivide=function(){return arguments.length&&qe},qe};var $o="bottom",ho={top:1,right:1,bottom:1,left:1};function R(B,K,ie){B.attr("transform",function(de){var ye=K(de);return"translate("+(isFinite(ye)?ye:ie(de))+",0)"})}function U(B,K,ie){B.attr("transform",function(de){var ye=K(de);return"translate(0,"+(isFinite(ye)?ye:ie(de))+")"})}l.svg.brush=function(){var B,K,ie=Z(Qe,"brushstart","brush","brushend"),de=null,ye=null,Le=[0,0],Be=[0,0],je=!0,qe=!0,Ze=X[0];function Qe(Mt){Mt.each(function(){var Ft=l.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Lt).on("touchstart.brush",Lt),Et=Ft.selectAll(".background").data([0]);Et.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Ft.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var en=Ft.selectAll(".resize").data(Ze,I);en.exit().remove(),en.enter().append("g").attr("class",function(vn){return"resize "+vn}).style("cursor",function(vn){return j[vn]}).append("rect").attr("x",function(vn){return/[ew]$/.test(vn)?-3:null}).attr("y",function(vn){return/^[ns]/.test(vn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),en.style("display",Qe.empty()?"none":null);var Zt,Vt=l.transition(Ft),pn=l.transition(Et);de&&(Zt=uo(de),pn.attr("x",Zt[0]).attr("width",Zt[1]-Zt[0]),ht(Vt)),ye&&(Zt=uo(ye),pn.attr("y",Zt[0]).attr("height",Zt[1]-Zt[0]),St(Vt)),lt(Vt)})}function lt(Mt){Mt.selectAll(".resize").attr("transform",function(Ft){return"translate("+Le[+/e$/.test(Ft)]+","+Be[+/^s/.test(Ft)]+")"})}function ht(Mt){Mt.select(".extent").attr("x",Le[0]),Mt.selectAll(".extent,.n>rect,.s>rect").attr("width",Le[1]-Le[0])}function St(Mt){Mt.select(".extent").attr("y",Be[0]),Mt.selectAll(".extent,.e>rect,.w>rect").attr("height",Be[1]-Be[0])}function Lt(){var Mt,Ft,Et=this,en=l.select(l.event.target),Zt=ie.of(Et,arguments),Vt=l.select(Et),pn=en.datum(),vn=!/^(n|s)$/.test(pn)&&de,zn=!/^(e|w)$/.test(pn)&&ye,Rn=en.classed("extent"),Un=gt(Et),Yn=l.mouse(Et),or=l.select(e(Et)).on("keydown.brush",function(){l.event.keyCode==32&&(Rn||(Mt=null,Yn[0]-=Le[1],Yn[1]-=Be[1],Rn=2),$())}).on("keyup.brush",function(){l.event.keyCode==32&&Rn==2&&(Yn[0]+=Le[1],Yn[1]+=Be[1],Rn=0,$())});if(l.event.changedTouches?or.on("touchmove.brush",mr).on("touchend.brush",Bn):or.on("mousemove.brush",mr).on("mouseup.brush",Bn),Vt.interrupt().selectAll("*").interrupt(),Rn)Yn[0]=Le[0]-Yn[0],Yn[1]=Be[0]-Yn[1];else if(pn){var ir=+/w$/.test(pn),cr=+/^n/.test(pn);Ft=[Le[1-ir]-Yn[0],Be[1-cr]-Yn[1]],Yn[0]=Le[ir],Yn[1]=Be[cr]}else l.event.altKey&&(Mt=Yn.slice());function mr(){var rr=l.mouse(Et),fr=!1;Ft&&(rr[0]+=Ft[0],rr[1]+=Ft[1]),Rn||(l.event.altKey?(Mt||(Mt=[(Le[0]+Le[1])/2,(Be[0]+Be[1])/2]),Yn[0]=Le[+(rr[0]<Mt[0])],Yn[1]=Be[+(rr[1]<Mt[1])]):Mt=null),vn&&Lr(rr,de,0)&&(ht(Vt),fr=!0),zn&&Lr(rr,ye,1)&&(St(Vt),fr=!0),fr&&(lt(Vt),Zt({type:"brush",mode:Rn?"move":"resize"}))}function Lr(rr,fr,yr){var Mr,Ir,Br=uo(fr),Zr=Br[0],oi=Br[1],si=Yn[yr],Yr=yr?Be:Le,wi=Yr[1]-Yr[0];if(Rn&&(Zr-=si,oi-=wi+si),Mr=(yr?qe:je)?Math.max(Zr,Math.min(oi,rr[yr])):rr[yr],Rn?Ir=(Mr+=si)+wi:(Mt&&(si=Math.max(Zr,Math.min(oi,2*Mt[yr]-Mr))),si<Mr?(Ir=Mr,Mr=si):Ir=si),Yr[0]!=Mr||Yr[1]!=Ir)return yr?K=null:B=null,Yr[0]=Mr,Yr[1]=Ir,!0}function Bn(){mr(),Vt.style("pointer-events","all").selectAll(".resize").style("display",Qe.empty()?"none":null),l.select("body").style("cursor",null),or.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Un(),Zt({type:"brushend"})}Vt.style("pointer-events","none").selectAll(".resize").style("display",null),l.select("body").style("cursor",en.style("cursor")),Zt({type:"brushstart"}),mr()}return Qe.event=function(Mt){Mt.each(function(){var Ft=ie.of(this,arguments),Et={x:Le,y:Be,i:B,j:K},en=this.__chart__||Et;this.__chart__=Et,Po?l.select(this).transition().each("start.brush",function(){B=en.i,K=en.j,Le=en.x,Be=en.y,Ft({type:"brushstart"})}).tween("brush:brush",function(){var Zt=Si(Le,Et.x),Vt=Si(Be,Et.y);return B=K=null,function(pn){Le=Et.x=Zt(pn),Be=Et.y=Vt(pn),Ft({type:"brush",mode:"resize"})}}).each("end.brush",function(){B=Et.i,K=Et.j,Ft({type:"brush",mode:"resize"}),Ft({type:"brushend"})}):(Ft({type:"brushstart"}),Ft({type:"brush",mode:"resize"}),Ft({type:"brushend"}))})},Qe.x=function(Mt){return arguments.length?(Ze=X[!(de=Mt)<<1|!ye],Qe):de},Qe.y=function(Mt){return arguments.length?(Ze=X[!de<<1|!(ye=Mt)],Qe):ye},Qe.clamp=function(Mt){return arguments.length?(de&&ye?(je=!!Mt[0],qe=!!Mt[1]):de?je=!!Mt:ye&&(qe=!!Mt),Qe):de&&ye?[je,qe]:de?je:ye?qe:null},Qe.extent=function(Mt){var Ft,Et,en,Zt,Vt;return arguments.length?(de&&(Ft=Mt[0],Et=Mt[1],ye&&(Ft=Ft[0],Et=Et[0]),B=[Ft,Et],de.invert&&(Ft=de(Ft),Et=de(Et)),Et<Ft&&(Vt=Ft,Ft=Et,Et=Vt),Ft==Le[0]&&Et==Le[1]||(Le=[Ft,Et])),ye&&(en=Mt[0],Zt=Mt[1],de&&(en=en[1],Zt=Zt[1]),K=[en,Zt],ye.invert&&(en=ye(en),Zt=ye(Zt)),Zt<en&&(Vt=en,en=Zt,Zt=Vt),en==Be[0]&&Zt==Be[1]||(Be=[en,Zt])),Qe):(de&&(B?(Ft=B[0],Et=B[1]):(Ft=Le[0],Et=Le[1],de.invert&&(Ft=de.invert(Ft),Et=de.invert(Et)),Et<Ft&&(Vt=Ft,Ft=Et,Et=Vt))),ye&&(K?(en=K[0],Zt=K[1]):(en=Be[0],Zt=Be[1],ye.invert&&(en=ye.invert(en),Zt=ye.invert(Zt)),Zt<en&&(Vt=en,en=Zt,Zt=Vt))),de&&ye?[[Ft,en],[Et,Zt]]:de?[Ft,Et]:ye&&[en,Zt])},Qe.clear=function(){return Qe.empty()||(Le=[0,0],Be=[0,0],B=K=null),Qe},Qe.empty=function(){return!!de&&Le[0]==Le[1]||!!ye&&Be[0]==Be[1]},l.rebind(Qe,ie,"on")};var j={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},X=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function fe(B){return JSON.parse(B.responseText)}function Me(B){var K=d.createRange();return K.selectNode(d.body),K.createContextualFragment(B.responseText)}l.text=Wn(function(B){return B.responseText}),l.json=function(B,K){return $n(B,"application/json",fe,K)},l.html=function(B,K){return $n(B,"text/html",Me,K)},l.xml=Wn(function(B){return B.responseXML}),(k=typeof(S=l)=="function"?S.call(z,t,z,Q):S)===void 0||(Q.exports=k)}).apply(self)},88294:function(Q,z,t){Q.exports=t(62849)},62849:function(Q,z,t){var S=t(91358),k=t(53435),l=t(18863),T=t(21527),b=t(71299),d=t(46775),s=t(30120),e=t(64941),i=t(90660),r=t(27084);function n(a,o){for(var u=o[0],p=o[1],c=1/(o[2]-u),x=1/(o[3]-p),g=new Array(a.length),f=0,y=a.length/2;f<y;f++)g[2*f]=k((a[2*f]-u)*c,0,1),g[2*f+1]=k((a[2*f+1]-p)*x,0,1);return g}Q.exports=function(a,o){o||(o={}),a=s(a,"float64"),o=b(o,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var u=d(o.maxDepth,255),p=d(o.bounds,T(a,2));p[0]===p[2]&&p[2]++,p[1]===p[3]&&p[3]++;var c,x=n(a,p),g=a.length>>>1;o.dtype||(o.dtype="array"),typeof o.dtype=="string"?c=new(i(o.dtype))(g):o.dtype&&(c=o.dtype,Array.isArray(c)&&(c.length=g));for(var f=0;f<g;++f)c[f]=f;var y=[],v=[],m=[],_=[];(function D(G,I,H,N,F,V){if(!N.length)return null;var q=y[F]||(y[F]=[]),te=m[F]||(m[F]=[]),$=v[F]||(v[F]=[]),W=q.length;if(++F>u||V>1073741824){for(var Z=0;Z<N.length;Z++)q.push(N[Z]),te.push(V),$.push(null,null,null,null);return W}if(q.push(N[0]),te.push(V),N.length<=1)return $.push(null,null,null,null),W;for(var J=.5*H,ee=G+J,re=I+J,ae=[],oe=[],ce=[],pe=[],ve=1,we=N.length;ve<we;ve++){var xe=N[ve],ge=x[2*xe],Oe=x[2*xe+1];ge<ee?Oe<re?ae.push(xe):oe.push(xe):Oe<re?ce.push(xe):pe.push(xe)}return V<<=2,$.push(D(G,I,J,ae,F,V),D(G,re,J,oe,F,V+1),D(ee,I,J,ce,F,V+2),D(ee,re,J,pe,F,V+3)),W})(0,0,1,c,0,1);for(var h=0,A=0;A<y.length;A++){var w=y[A];if(c.set)c.set(w,h);else for(var E=0,L=w.length;E<L;E++)c[E+h]=w[E];var C=h+y[A].length;_[A]=[h,C],h=C}return c.range=function(){for(var D,G=[],I=arguments.length;I--;)G[I]=arguments[I];if(e(G[G.length-1])){var H=G.pop();G.length||H.x==null&&H.l==null&&H.left==null||(G=[H],D={}),D=b(H,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else D={};G.length||(G=p);var N,F=l.apply(void 0,G),V=[Math.min(F.x,F.x+F.width),Math.min(F.y,F.y+F.height),Math.max(F.x,F.x+F.width),Math.max(F.y,F.y+F.height)],q=V[0],te=V[1],$=V[2],W=V[3],Z=n([q,te,$,W],p),J=Z[0],ee=Z[1],re=Z[2],ae=Z[3],oe=d(D.level,y.length);if(D.d!=null&&(typeof D.d=="number"?N=[D.d,D.d]:D.d.length&&(N=D.d),oe=Math.min(Math.max(Math.ceil(-r(Math.abs(N[0])/(p[2]-p[0]))),Math.ceil(-r(Math.abs(N[1])/(p[3]-p[1])))),oe)),oe=Math.min(oe,y.length),D.lod)return function(pe,ve,we,xe,ge){for(var Oe=[],Ae=0;Ae<ge;Ae++){var Te=m[Ae],se=_[Ae][0],le=P(pe,ve,Ae),ne=P(we,xe,Ae),me=S.ge(Te,le),Ee=S.gt(Te,ne,me,Te.length-1);Oe[Ae]=[me+se,Ee+se]}return Oe}(J,ee,re,ae,oe);var ce=[];return function pe(ve,we,xe,ge,Oe,Ae){if(Oe!==null&&Ae!==null&&!(J>ve+xe||ee>we+xe||re<ve||ae<we||ge>=oe||Oe===Ae)){var Te=y[ge];Ae===void 0&&(Ae=Te.length);for(var se=Oe;se<Ae;se++){var le=Te[se],ne=a[2*le],me=a[2*le+1];ne>=q&&ne<=$&&me>=te&&me<=W&&ce.push(le)}var Ee=v[ge],be=Ee[4*Oe+0],De=Ee[4*Oe+1],Ue=Ee[4*Oe+2],he=Ee[4*Oe+3],ke=function(Fe,Re){for(var He=null,Ge=0;He===null;)if(He=Fe[4*Re+Ge],++Ge>Fe.length)return null;return He}(Ee,Oe+1),_e=.5*xe,Ce=ge+1;pe(ve,we,_e,Ce,be,De||Ue||he||ke),pe(ve,we+_e,_e,Ce,De,Ue||he||ke),pe(ve+_e,we,_e,Ce,Ue,he||ke),pe(ve+_e,we+_e,_e,Ce,he,ke)}}(0,0,1,0,0,1),ce},c;function P(D,G,I){for(var H=1,N=.5,F=.5,V=.5,q=0;q<I;q++)H<<=2,H+=D<N?G<F?0:1:G<F?2:3,V*=.5,N+=D<N?-V:V,F+=G<F?-V:V;return H}}},30774:function(Q,z,t){Object.defineProperty(z,"__esModule",{value:!0});var S=t(60302),k=6378137;function l(d){var s=0;if(d&&d.length>0){s+=Math.abs(T(d[0]));for(var e=1;e<d.length;e++)s-=Math.abs(T(d[e]))}return s}function T(d){var s,e,i,r,n,a,o=0,u=d.length;if(u>2){for(a=0;a<u;a++)a===u-2?(i=u-2,r=u-1,n=0):a===u-1?(i=u-1,r=0,n=1):(i=a,r=a+1,n=a+2),s=d[i],e=d[r],o+=(b(d[n][0])-b(s[0]))*Math.sin(b(e[1]));o=o*k*k/2}return o}function b(d){return d*Math.PI/180}z.default=function(d){return S.geomReduce(d,function(s,e){return s+function(i){var r,n=0;switch(i.type){case"Polygon":return l(i.coordinates);case"MultiPolygon":for(r=0;r<i.coordinates.length;r++)n+=l(i.coordinates[r]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)},0)}},23132:function(Q,z){function t(a,o,u){u===void 0&&(u={});var p={type:"Feature"};return(u.id===0||u.id)&&(p.id=u.id),u.bbox&&(p.bbox=u.bbox),p.properties=o||{},p.geometry=a,p}function S(a,o,u){if(u===void 0&&(u={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n(a[0])||!n(a[1]))throw new Error("coordinates must contain numbers");return t({type:"Point",coordinates:a},o,u)}function k(a,o,u){u===void 0&&(u={});for(var p=0,c=a;p<c.length;p++){var x=c[p];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<x[x.length-1].length;g++)if(x[x.length-1][g]!==x[0][g])throw new Error("First and last Position are not equivalent.")}return t({type:"Polygon",coordinates:a},o,u)}function l(a,o,u){if(u===void 0&&(u={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return t({type:"LineString",coordinates:a},o,u)}function T(a,o){o===void 0&&(o={});var u={type:"FeatureCollection"};return o.id&&(u.id=o.id),o.bbox&&(u.bbox=o.bbox),u.features=a,u}function b(a,o,u){return u===void 0&&(u={}),t({type:"MultiLineString",coordinates:a},o,u)}function d(a,o,u){return u===void 0&&(u={}),t({type:"MultiPoint",coordinates:a},o,u)}function s(a,o,u){return u===void 0&&(u={}),t({type:"MultiPolygon",coordinates:a},o,u)}function e(a,o){o===void 0&&(o="kilometers");var u=z.factors[o];if(!u)throw new Error(o+" units is invalid");return a*u}function i(a,o){o===void 0&&(o="kilometers");var u=z.factors[o];if(!u)throw new Error(o+" units is invalid");return a/u}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}Object.defineProperty(z,"__esModule",{value:!0}),z.earthRadius=63710088e-1,z.factors={centimeters:100*z.earthRadius,centimetres:100*z.earthRadius,degrees:z.earthRadius/111325,feet:3.28084*z.earthRadius,inches:39.37*z.earthRadius,kilometers:z.earthRadius/1e3,kilometres:z.earthRadius/1e3,meters:z.earthRadius,metres:z.earthRadius,miles:z.earthRadius/1609.344,millimeters:1e3*z.earthRadius,millimetres:1e3*z.earthRadius,nauticalmiles:z.earthRadius/1852,radians:1,yards:1.0936*z.earthRadius},z.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/z.earthRadius,yards:1.0936133},z.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},z.feature=t,z.geometry=function(a,o,u){switch(a){case"Point":return S(o).geometry;case"LineString":return l(o).geometry;case"Polygon":return k(o).geometry;case"MultiPoint":return d(o).geometry;case"MultiLineString":return b(o).geometry;case"MultiPolygon":return s(o).geometry;default:throw new Error(a+" is invalid")}},z.point=S,z.points=function(a,o,u){return u===void 0&&(u={}),T(a.map(function(p){return S(p,o)}),u)},z.polygon=k,z.polygons=function(a,o,u){return u===void 0&&(u={}),T(a.map(function(p){return k(p,o)}),u)},z.lineString=l,z.lineStrings=function(a,o,u){return u===void 0&&(u={}),T(a.map(function(p){return l(p,o)}),u)},z.featureCollection=T,z.multiLineString=b,z.multiPoint=d,z.multiPolygon=s,z.geometryCollection=function(a,o,u){return u===void 0&&(u={}),t({type:"GeometryCollection",geometries:a},o,u)},z.round=function(a,o){if(o===void 0&&(o=0),o&&!(o>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,o||0);return Math.round(a*u)/u},z.radiansToLength=e,z.lengthToRadians=i,z.lengthToDegrees=function(a,o){return r(i(a,o))},z.bearingToAzimuth=function(a){var o=a%360;return o<0&&(o+=360),o},z.radiansToDegrees=r,z.degreesToRadians=function(a){return a%360*Math.PI/180},z.convertLength=function(a,o,u){if(o===void 0&&(o="kilometers"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("length must be a positive number");return e(i(a,o),u)},z.convertArea=function(a,o,u){if(o===void 0&&(o="meters"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("area must be a positive number");var p=z.areaFactors[o];if(!p)throw new Error("invalid original units");var c=z.areaFactors[u];if(!c)throw new Error("invalid final units");return a/p*c},z.isNumber=n,z.isObject=function(a){return!!a&&a.constructor===Object},z.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(o){if(!n(o))throw new Error("bbox must only contain numbers")})},z.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")}},60302:function(Q,z,t){Object.defineProperty(z,"__esModule",{value:!0});var S=t(23132);function k(i,r,n){if(i!==null)for(var a,o,u,p,c,x,g,f,y=0,v=0,m=i.type,_=m==="FeatureCollection",h=m==="Feature",A=_?i.features.length:1,w=0;w<A;w++){c=(f=!!(g=_?i.features[w].geometry:h?i.geometry:i)&&g.type==="GeometryCollection")?g.geometries.length:1;for(var E=0;E<c;E++){var L=0,C=0;if((p=f?g.geometries[E]:g)!==null){x=p.coordinates;var P=p.type;switch(y=!n||P!=="Polygon"&&P!=="MultiPolygon"?0:1,P){case null:break;case"Point":if(r(x,v,w,L,C)===!1)return!1;v++,L++;break;case"LineString":case"MultiPoint":for(a=0;a<x.length;a++){if(r(x[a],v,w,L,C)===!1)return!1;v++,P==="MultiPoint"&&L++}P==="LineString"&&L++;break;case"Polygon":case"MultiLineString":for(a=0;a<x.length;a++){for(o=0;o<x[a].length-y;o++){if(r(x[a][o],v,w,L,C)===!1)return!1;v++}P==="MultiLineString"&&L++,P==="Polygon"&&C++}P==="Polygon"&&L++;break;case"MultiPolygon":for(a=0;a<x.length;a++){for(C=0,o=0;o<x[a].length;o++){for(u=0;u<x[a][o].length-y;u++){if(r(x[a][o][u],v,w,L,C)===!1)return!1;v++}C++}L++}break;case"GeometryCollection":for(a=0;a<p.geometries.length;a++)if(k(p.geometries[a],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(i,r){var n;switch(i.type){case"FeatureCollection":for(n=0;n<i.features.length&&r(i.features[n].properties,n)!==!1;n++);break;case"Feature":r(i.properties,0)}}function T(i,r){if(i.type==="Feature")r(i,0);else if(i.type==="FeatureCollection")for(var n=0;n<i.features.length&&r(i.features[n],n)!==!1;n++);}function b(i,r){var n,a,o,u,p,c,x,g,f,y,v=0,m=i.type==="FeatureCollection",_=i.type==="Feature",h=m?i.features.length:1;for(n=0;n<h;n++){for(c=m?i.features[n].geometry:_?i.geometry:i,g=m?i.features[n].properties:_?i.properties:{},f=m?i.features[n].bbox:_?i.bbox:void 0,y=m?i.features[n].id:_?i.id:void 0,p=(x=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,o=0;o<p;o++)if((u=x?c.geometries[o]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(u,v,g,f,y)===!1)return!1;break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)if(r(u.geometries[a],v,g,f,y)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,v,g,f,y)===!1)return!1;v++}}function d(i,r){b(i,function(n,a,o,u,p){var c,x=n===null?null:n.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return r(S.feature(n,o,{bbox:u,id:p}),a,0)!==!1&&void 0}switch(x){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var g=0;g<n.coordinates.length;g++){var f={type:c,coordinates:n.coordinates[g]};if(r(S.feature(f,o),a,g)===!1)return!1}})}function s(i,r){d(i,function(n,a,o){var u=0;if(n.geometry){var p=n.geometry.type;if(p!=="Point"&&p!=="MultiPoint"){var c,x=0,g=0,f=0;return k(n,function(y,v,m,_,h){if(c===void 0||a>x||_>g||h>f)return c=y,x=a,g=_,f=h,void(u=0);var A=S.lineString([c,y],n.properties);if(r(A,a,o,h,u)===!1)return!1;u++,c=y})!==!1&&void 0}}})}function e(i,r){if(!i)throw new Error("geojson is required");d(i,function(n,a,o){if(n.geometry!==null){var u=n.geometry.type,p=n.geometry.coordinates;switch(u){case"LineString":if(r(n,a,o,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<p.length;c++)if(r(S.lineString(p[c],n.properties),a,o,c)===!1)return!1}}})}z.coordEach=k,z.coordReduce=function(i,r,n,a){var o=n;return k(i,function(u,p,c,x,g){o=p===0&&n===void 0?u:r(o,u,p,c,x,g)},a),o},z.propEach=l,z.propReduce=function(i,r,n){var a=n;return l(i,function(o,u){a=u===0&&n===void 0?o:r(a,o,u)}),a},z.featureEach=T,z.featureReduce=function(i,r,n){var a=n;return T(i,function(o,u){a=u===0&&n===void 0?o:r(a,o,u)}),a},z.coordAll=function(i){var r=[];return k(i,function(n){r.push(n)}),r},z.geomEach=b,z.geomReduce=function(i,r,n){var a=n;return b(i,function(o,u,p,c,x){a=u===0&&n===void 0?o:r(a,o,u,p,c,x)}),a},z.flattenEach=d,z.flattenReduce=function(i,r,n){var a=n;return d(i,function(o,u,p){a=u===0&&p===0&&n===void 0?o:r(a,o,u,p)}),a},z.segmentEach=s,z.segmentReduce=function(i,r,n){var a=n,o=!1;return s(i,function(u,p,c,x,g){a=o===!1&&n===void 0?u:r(a,u,p,c,x,g),o=!0}),a},z.lineEach=e,z.lineReduce=function(i,r,n){var a=n;return e(i,function(o,u,p,c){a=u===0&&n===void 0?o:r(a,o,u,p,c)}),a},z.findSegment=function(i,r){if(r=r||{},!S.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,o=r.multiFeatureIndex||0,u=r.geometryIndex||0,p=r.segmentIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,n=i.features[a].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return p<0&&(p=x.length+p-1),S.lineString([x[p],x[p+1]],c,r);case"Polygon":return u<0&&(u=x.length+u),p<0&&(p=x[u].length+p-1),S.lineString([x[u][p],x[u][p+1]],c,r);case"MultiLineString":return o<0&&(o=x.length+o),p<0&&(p=x[o].length+p-1),S.lineString([x[o][p],x[o][p+1]],c,r);case"MultiPolygon":return o<0&&(o=x.length+o),u<0&&(u=x[o].length+u),p<0&&(p=x[o][u].length-p-1),S.lineString([x[o][u][p],x[o][u][p+1]],c,r)}throw new Error("geojson is invalid")},z.findPoint=function(i,r){if(r=r||{},!S.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,o=r.multiFeatureIndex||0,u=r.geometryIndex||0,p=r.coordIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,n=i.features[a].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":return S.point(x,c,r);case"MultiPoint":return o<0&&(o=x.length+o),S.point(x[o],c,r);case"LineString":return p<0&&(p=x.length+p),S.point(x[p],c,r);case"Polygon":return u<0&&(u=x.length+u),p<0&&(p=x[u].length+p),S.point(x[u][p],c,r);case"MultiLineString":return o<0&&(o=x.length+o),p<0&&(p=x[o].length+p),S.point(x[o][p],c,r);case"MultiPolygon":return o<0&&(o=x.length+o),u<0&&(u=x[o].length+u),p<0&&(p=x[o][u].length-p),S.point(x[o][u][p],c,r)}throw new Error("geojson is invalid")}},85268:function(Q,z,t){Object.defineProperty(z,"__esModule",{value:!0});var S=t(27138);function k(l){var T=[1/0,1/0,-1/0,-1/0];return S.coordEach(l,function(b){T[0]>b[0]&&(T[0]=b[0]),T[1]>b[1]&&(T[1]=b[1]),T[2]<b[0]&&(T[2]=b[0]),T[3]<b[1]&&(T[3]=b[1])}),T}k.default=k,z.default=k},94228:function(Q,z){function t(a,o,u){u===void 0&&(u={});var p={type:"Feature"};return(u.id===0||u.id)&&(p.id=u.id),u.bbox&&(p.bbox=u.bbox),p.properties=o||{},p.geometry=a,p}function S(a,o,u){if(u===void 0&&(u={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n(a[0])||!n(a[1]))throw new Error("coordinates must contain numbers");return t({type:"Point",coordinates:a},o,u)}function k(a,o,u){u===void 0&&(u={});for(var p=0,c=a;p<c.length;p++){var x=c[p];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<x[x.length-1].length;g++)if(x[x.length-1][g]!==x[0][g])throw new Error("First and last Position are not equivalent.")}return t({type:"Polygon",coordinates:a},o,u)}function l(a,o,u){if(u===void 0&&(u={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return t({type:"LineString",coordinates:a},o,u)}function T(a,o){o===void 0&&(o={});var u={type:"FeatureCollection"};return o.id&&(u.id=o.id),o.bbox&&(u.bbox=o.bbox),u.features=a,u}function b(a,o,u){return u===void 0&&(u={}),t({type:"MultiLineString",coordinates:a},o,u)}function d(a,o,u){return u===void 0&&(u={}),t({type:"MultiPoint",coordinates:a},o,u)}function s(a,o,u){return u===void 0&&(u={}),t({type:"MultiPolygon",coordinates:a},o,u)}function e(a,o){o===void 0&&(o="kilometers");var u=z.factors[o];if(!u)throw new Error(o+" units is invalid");return a*u}function i(a,o){o===void 0&&(o="kilometers");var u=z.factors[o];if(!u)throw new Error(o+" units is invalid");return a/u}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}Object.defineProperty(z,"__esModule",{value:!0}),z.earthRadius=63710088e-1,z.factors={centimeters:100*z.earthRadius,centimetres:100*z.earthRadius,degrees:z.earthRadius/111325,feet:3.28084*z.earthRadius,inches:39.37*z.earthRadius,kilometers:z.earthRadius/1e3,kilometres:z.earthRadius/1e3,meters:z.earthRadius,metres:z.earthRadius,miles:z.earthRadius/1609.344,millimeters:1e3*z.earthRadius,millimetres:1e3*z.earthRadius,nauticalmiles:z.earthRadius/1852,radians:1,yards:1.0936*z.earthRadius},z.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/z.earthRadius,yards:1.0936133},z.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},z.feature=t,z.geometry=function(a,o,u){switch(a){case"Point":return S(o).geometry;case"LineString":return l(o).geometry;case"Polygon":return k(o).geometry;case"MultiPoint":return d(o).geometry;case"MultiLineString":return b(o).geometry;case"MultiPolygon":return s(o).geometry;default:throw new Error(a+" is invalid")}},z.point=S,z.points=function(a,o,u){return u===void 0&&(u={}),T(a.map(function(p){return S(p,o)}),u)},z.polygon=k,z.polygons=function(a,o,u){return u===void 0&&(u={}),T(a.map(function(p){return k(p,o)}),u)},z.lineString=l,z.lineStrings=function(a,o,u){return u===void 0&&(u={}),T(a.map(function(p){return l(p,o)}),u)},z.featureCollection=T,z.multiLineString=b,z.multiPoint=d,z.multiPolygon=s,z.geometryCollection=function(a,o,u){return u===void 0&&(u={}),t({type:"GeometryCollection",geometries:a},o,u)},z.round=function(a,o){if(o===void 0&&(o=0),o&&!(o>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,o||0);return Math.round(a*u)/u},z.radiansToLength=e,z.lengthToRadians=i,z.lengthToDegrees=function(a,o){return r(i(a,o))},z.bearingToAzimuth=function(a){var o=a%360;return o<0&&(o+=360),o},z.radiansToDegrees=r,z.degreesToRadians=function(a){return a%360*Math.PI/180},z.convertLength=function(a,o,u){if(o===void 0&&(o="kilometers"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("length must be a positive number");return e(i(a,o),u)},z.convertArea=function(a,o,u){if(o===void 0&&(o="meters"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("area must be a positive number");var p=z.areaFactors[o];if(!p)throw new Error("invalid original units");var c=z.areaFactors[u];if(!c)throw new Error("invalid final units");return a/p*c},z.isNumber=n,z.isObject=function(a){return!!a&&a.constructor===Object},z.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(o){if(!n(o))throw new Error("bbox must only contain numbers")})},z.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")}},27138:function(Q,z,t){Object.defineProperty(z,"__esModule",{value:!0});var S=t(94228);function k(i,r,n){if(i!==null)for(var a,o,u,p,c,x,g,f,y=0,v=0,m=i.type,_=m==="FeatureCollection",h=m==="Feature",A=_?i.features.length:1,w=0;w<A;w++){c=(f=!!(g=_?i.features[w].geometry:h?i.geometry:i)&&g.type==="GeometryCollection")?g.geometries.length:1;for(var E=0;E<c;E++){var L=0,C=0;if((p=f?g.geometries[E]:g)!==null){x=p.coordinates;var P=p.type;switch(y=!n||P!=="Polygon"&&P!=="MultiPolygon"?0:1,P){case null:break;case"Point":if(r(x,v,w,L,C)===!1)return!1;v++,L++;break;case"LineString":case"MultiPoint":for(a=0;a<x.length;a++){if(r(x[a],v,w,L,C)===!1)return!1;v++,P==="MultiPoint"&&L++}P==="LineString"&&L++;break;case"Polygon":case"MultiLineString":for(a=0;a<x.length;a++){for(o=0;o<x[a].length-y;o++){if(r(x[a][o],v,w,L,C)===!1)return!1;v++}P==="MultiLineString"&&L++,P==="Polygon"&&C++}P==="Polygon"&&L++;break;case"MultiPolygon":for(a=0;a<x.length;a++){for(C=0,o=0;o<x[a].length;o++){for(u=0;u<x[a][o].length-y;u++){if(r(x[a][o][u],v,w,L,C)===!1)return!1;v++}C++}L++}break;case"GeometryCollection":for(a=0;a<p.geometries.length;a++)if(k(p.geometries[a],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(i,r){var n;switch(i.type){case"FeatureCollection":for(n=0;n<i.features.length&&r(i.features[n].properties,n)!==!1;n++);break;case"Feature":r(i.properties,0)}}function T(i,r){if(i.type==="Feature")r(i,0);else if(i.type==="FeatureCollection")for(var n=0;n<i.features.length&&r(i.features[n],n)!==!1;n++);}function b(i,r){var n,a,o,u,p,c,x,g,f,y,v=0,m=i.type==="FeatureCollection",_=i.type==="Feature",h=m?i.features.length:1;for(n=0;n<h;n++){for(c=m?i.features[n].geometry:_?i.geometry:i,g=m?i.features[n].properties:_?i.properties:{},f=m?i.features[n].bbox:_?i.bbox:void 0,y=m?i.features[n].id:_?i.id:void 0,p=(x=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,o=0;o<p;o++)if((u=x?c.geometries[o]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(u,v,g,f,y)===!1)return!1;break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)if(r(u.geometries[a],v,g,f,y)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,v,g,f,y)===!1)return!1;v++}}function d(i,r){b(i,function(n,a,o,u,p){var c,x=n===null?null:n.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return r(S.feature(n,o,{bbox:u,id:p}),a,0)!==!1&&void 0}switch(x){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var g=0;g<n.coordinates.length;g++){var f={type:c,coordinates:n.coordinates[g]};if(r(S.feature(f,o),a,g)===!1)return!1}})}function s(i,r){d(i,function(n,a,o){var u=0;if(n.geometry){var p=n.geometry.type;if(p!=="Point"&&p!=="MultiPoint"){var c,x=0,g=0,f=0;return k(n,function(y,v,m,_,h){if(c===void 0||a>x||_>g||h>f)return c=y,x=a,g=_,f=h,void(u=0);var A=S.lineString([c,y],n.properties);if(r(A,a,o,h,u)===!1)return!1;u++,c=y})!==!1&&void 0}}})}function e(i,r){if(!i)throw new Error("geojson is required");d(i,function(n,a,o){if(n.geometry!==null){var u=n.geometry.type,p=n.geometry.coordinates;switch(u){case"LineString":if(r(n,a,o,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<p.length;c++)if(r(S.lineString(p[c],n.properties),a,o,c)===!1)return!1}}})}z.coordEach=k,z.coordReduce=function(i,r,n,a){var o=n;return k(i,function(u,p,c,x,g){o=p===0&&n===void 0?u:r(o,u,p,c,x,g)},a),o},z.propEach=l,z.propReduce=function(i,r,n){var a=n;return l(i,function(o,u){a=u===0&&n===void 0?o:r(a,o,u)}),a},z.featureEach=T,z.featureReduce=function(i,r,n){var a=n;return T(i,function(o,u){a=u===0&&n===void 0?o:r(a,o,u)}),a},z.coordAll=function(i){var r=[];return k(i,function(n){r.push(n)}),r},z.geomEach=b,z.geomReduce=function(i,r,n){var a=n;return b(i,function(o,u,p,c,x){a=u===0&&n===void 0?o:r(a,o,u,p,c,x)}),a},z.flattenEach=d,z.flattenReduce=function(i,r,n){var a=n;return d(i,function(o,u,p){a=u===0&&p===0&&n===void 0?o:r(a,o,u,p)}),a},z.segmentEach=s,z.segmentReduce=function(i,r,n){var a=n,o=!1;return s(i,function(u,p,c,x,g){a=o===!1&&n===void 0?u:r(a,u,p,c,x,g),o=!0}),a},z.lineEach=e,z.lineReduce=function(i,r,n){var a=n;return e(i,function(o,u,p,c){a=u===0&&n===void 0?o:r(a,o,u,p,c)}),a},z.findSegment=function(i,r){if(r=r||{},!S.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,o=r.multiFeatureIndex||0,u=r.geometryIndex||0,p=r.segmentIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,n=i.features[a].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return p<0&&(p=x.length+p-1),S.lineString([x[p],x[p+1]],c,r);case"Polygon":return u<0&&(u=x.length+u),p<0&&(p=x[u].length+p-1),S.lineString([x[u][p],x[u][p+1]],c,r);case"MultiLineString":return o<0&&(o=x.length+o),p<0&&(p=x[o].length+p-1),S.lineString([x[o][p],x[o][p+1]],c,r);case"MultiPolygon":return o<0&&(o=x.length+o),u<0&&(u=x[o].length+u),p<0&&(p=x[o][u].length-p-1),S.lineString([x[o][u][p],x[o][u][p+1]],c,r)}throw new Error("geojson is invalid")},z.findPoint=function(i,r){if(r=r||{},!S.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,o=r.multiFeatureIndex||0,u=r.geometryIndex||0,p=r.coordIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,n=i.features[a].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":return S.point(x,c,r);case"MultiPoint":return o<0&&(o=x.length+o),S.point(x[o],c,r);case"LineString":return p<0&&(p=x.length+p),S.point(x[p],c,r);case"Polygon":return u<0&&(u=x.length+u),p<0&&(p=x[u].length+p),S.point(x[u][p],c,r);case"MultiLineString":return o<0&&(o=x.length+o),p<0&&(p=x[o].length+p),S.point(x[o][p],c,r);case"MultiPolygon":return o<0&&(o=x.length+o),u<0&&(u=x[o].length+u),p<0&&(p=x[o][u].length-p),S.point(x[o][u][p],c,r)}throw new Error("geojson is invalid")}},29261:function(Q,z,t){Object.defineProperty(z,"__esModule",{value:!0});var S=t(88553),k=t(64182);z.default=function(l,T){T===void 0&&(T={});var b=0,d=0,s=0;return S.coordEach(l,function(e){b+=e[0],d+=e[1],s++}),k.point([b/s,d/s],T.properties)}},64182:function(Q,z){function t(a,o,u){u===void 0&&(u={});var p={type:"Feature"};return(u.id===0||u.id)&&(p.id=u.id),u.bbox&&(p.bbox=u.bbox),p.properties=o||{},p.geometry=a,p}function S(a,o,u){return u===void 0&&(u={}),t({type:"Point",coordinates:a},o,u)}function k(a,o,u){u===void 0&&(u={});for(var p=0,c=a;p<c.length;p++){var x=c[p];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<x[x.length-1].length;g++)if(x[x.length-1][g]!==x[0][g])throw new Error("First and last Position are not equivalent.")}return t({type:"Polygon",coordinates:a},o,u)}function l(a,o,u){if(u===void 0&&(u={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return t({type:"LineString",coordinates:a},o,u)}function T(a,o){o===void 0&&(o={});var u={type:"FeatureCollection"};return o.id&&(u.id=o.id),o.bbox&&(u.bbox=o.bbox),u.features=a,u}function b(a,o,u){return u===void 0&&(u={}),t({type:"MultiLineString",coordinates:a},o,u)}function d(a,o,u){return u===void 0&&(u={}),t({type:"MultiPoint",coordinates:a},o,u)}function s(a,o,u){return u===void 0&&(u={}),t({type:"MultiPolygon",coordinates:a},o,u)}function e(a,o){o===void 0&&(o="kilometers");var u=z.factors[o];if(!u)throw new Error(o+" units is invalid");return a*u}function i(a,o){o===void 0&&(o="kilometers");var u=z.factors[o];if(!u)throw new Error(o+" units is invalid");return a/u}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)&&!/^\s*$/.test(a)}Object.defineProperty(z,"__esModule",{value:!0}),z.earthRadius=63710088e-1,z.factors={centimeters:100*z.earthRadius,centimetres:100*z.earthRadius,degrees:z.earthRadius/111325,feet:3.28084*z.earthRadius,inches:39.37*z.earthRadius,kilometers:z.earthRadius/1e3,kilometres:z.earthRadius/1e3,meters:z.earthRadius,metres:z.earthRadius,miles:z.earthRadius/1609.344,millimeters:1e3*z.earthRadius,millimetres:1e3*z.earthRadius,nauticalmiles:z.earthRadius/1852,radians:1,yards:z.earthRadius/1.0936},z.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/z.earthRadius,yards:.91441111923921},z.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},z.feature=t,z.geometry=function(a,o,u){switch(a){case"Point":return S(o).geometry;case"LineString":return l(o).geometry;case"Polygon":return k(o).geometry;case"MultiPoint":return d(o).geometry;case"MultiLineString":return b(o).geometry;case"MultiPolygon":return s(o).geometry;default:throw new Error(a+" is invalid")}},z.point=S,z.points=function(a,o,u){return u===void 0&&(u={}),T(a.map(function(p){return S(p,o)}),u)},z.polygon=k,z.polygons=function(a,o,u){return u===void 0&&(u={}),T(a.map(function(p){return k(p,o)}),u)},z.lineString=l,z.lineStrings=function(a,o,u){return u===void 0&&(u={}),T(a.map(function(p){return l(p,o)}),u)},z.featureCollection=T,z.multiLineString=b,z.multiPoint=d,z.multiPolygon=s,z.geometryCollection=function(a,o,u){return u===void 0&&(u={}),t({type:"GeometryCollection",geometries:a},o,u)},z.round=function(a,o){if(o===void 0&&(o=0),o&&!(o>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,o||0);return Math.round(a*u)/u},z.radiansToLength=e,z.lengthToRadians=i,z.lengthToDegrees=function(a,o){return r(i(a,o))},z.bearingToAzimuth=function(a){var o=a%360;return o<0&&(o+=360),o},z.radiansToDegrees=r,z.degreesToRadians=function(a){return a%360*Math.PI/180},z.convertLength=function(a,o,u){if(o===void 0&&(o="kilometers"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("length must be a positive number");return e(i(a,o),u)},z.convertArea=function(a,o,u){if(o===void 0&&(o="meters"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("area must be a positive number");var p=z.areaFactors[o];if(!p)throw new Error("invalid original units");var c=z.areaFactors[u];if(!c)throw new Error("invalid final units");return a/p*c},z.isNumber=n,z.isObject=function(a){return!!a&&a.constructor===Object},z.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(o){if(!n(o))throw new Error("bbox must only contain numbers")})},z.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")},z.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},z.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},z.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},z.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},z.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},z.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},z.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},88553:function(Q,z,t){Object.defineProperty(z,"__esModule",{value:!0});var S=t(64182);function k(i,r,n){if(i!==null)for(var a,o,u,p,c,x,g,f,y=0,v=0,m=i.type,_=m==="FeatureCollection",h=m==="Feature",A=_?i.features.length:1,w=0;w<A;w++){c=(f=!!(g=_?i.features[w].geometry:h?i.geometry:i)&&g.type==="GeometryCollection")?g.geometries.length:1;for(var E=0;E<c;E++){var L=0,C=0;if((p=f?g.geometries[E]:g)!==null){x=p.coordinates;var P=p.type;switch(y=!n||P!=="Polygon"&&P!=="MultiPolygon"?0:1,P){case null:break;case"Point":if(r(x,v,w,L,C)===!1)return!1;v++,L++;break;case"LineString":case"MultiPoint":for(a=0;a<x.length;a++){if(r(x[a],v,w,L,C)===!1)return!1;v++,P==="MultiPoint"&&L++}P==="LineString"&&L++;break;case"Polygon":case"MultiLineString":for(a=0;a<x.length;a++){for(o=0;o<x[a].length-y;o++){if(r(x[a][o],v,w,L,C)===!1)return!1;v++}P==="MultiLineString"&&L++,P==="Polygon"&&C++}P==="Polygon"&&L++;break;case"MultiPolygon":for(a=0;a<x.length;a++){for(C=0,o=0;o<x[a].length;o++){for(u=0;u<x[a][o].length-y;u++){if(r(x[a][o][u],v,w,L,C)===!1)return!1;v++}C++}L++}break;case"GeometryCollection":for(a=0;a<p.geometries.length;a++)if(k(p.geometries[a],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(i,r){var n;switch(i.type){case"FeatureCollection":for(n=0;n<i.features.length&&r(i.features[n].properties,n)!==!1;n++);break;case"Feature":r(i.properties,0)}}function T(i,r){if(i.type==="Feature")r(i,0);else if(i.type==="FeatureCollection")for(var n=0;n<i.features.length&&r(i.features[n],n)!==!1;n++);}function b(i,r){var n,a,o,u,p,c,x,g,f,y,v=0,m=i.type==="FeatureCollection",_=i.type==="Feature",h=m?i.features.length:1;for(n=0;n<h;n++){for(c=m?i.features[n].geometry:_?i.geometry:i,g=m?i.features[n].properties:_?i.properties:{},f=m?i.features[n].bbox:_?i.bbox:void 0,y=m?i.features[n].id:_?i.id:void 0,p=(x=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,o=0;o<p;o++)if((u=x?c.geometries[o]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(u,v,g,f,y)===!1)return!1;break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)if(r(u.geometries[a],v,g,f,y)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,v,g,f,y)===!1)return!1;v++}}function d(i,r){b(i,function(n,a,o,u,p){var c,x=n===null?null:n.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return r(S.feature(n,o,{bbox:u,id:p}),a,0)!==!1&&void 0}switch(x){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var g=0;g<n.coordinates.length;g++){var f={type:c,coordinates:n.coordinates[g]};if(r(S.feature(f,o),a,g)===!1)return!1}})}function s(i,r){d(i,function(n,a,o){var u=0;if(n.geometry){var p=n.geometry.type;if(p!=="Point"&&p!=="MultiPoint"){var c,x=0,g=0,f=0;return k(n,function(y,v,m,_,h){if(c===void 0||a>x||_>g||h>f)return c=y,x=a,g=_,f=h,void(u=0);var A=S.lineString([c,y],n.properties);if(r(A,a,o,h,u)===!1)return!1;u++,c=y})!==!1&&void 0}}})}function e(i,r){if(!i)throw new Error("geojson is required");d(i,function(n,a,o){if(n.geometry!==null){var u=n.geometry.type,p=n.geometry.coordinates;switch(u){case"LineString":if(r(n,a,o,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<p.length;c++)if(r(S.lineString(p[c],n.properties),a,o,c)===!1)return!1}}})}z.coordEach=k,z.coordReduce=function(i,r,n,a){var o=n;return k(i,function(u,p,c,x,g){o=p===0&&n===void 0?u:r(o,u,p,c,x,g)},a),o},z.propEach=l,z.propReduce=function(i,r,n){var a=n;return l(i,function(o,u){a=u===0&&n===void 0?o:r(a,o,u)}),a},z.featureEach=T,z.featureReduce=function(i,r,n){var a=n;return T(i,function(o,u){a=u===0&&n===void 0?o:r(a,o,u)}),a},z.coordAll=function(i){var r=[];return k(i,function(n){r.push(n)}),r},z.geomEach=b,z.geomReduce=function(i,r,n){var a=n;return b(i,function(o,u,p,c,x){a=u===0&&n===void 0?o:r(a,o,u,p,c,x)}),a},z.flattenEach=d,z.flattenReduce=function(i,r,n){var a=n;return d(i,function(o,u,p){a=u===0&&p===0&&n===void 0?o:r(a,o,u,p)}),a},z.segmentEach=s,z.segmentReduce=function(i,r,n){var a=n,o=!1;return s(i,function(u,p,c,x,g){a=o===!1&&n===void 0?u:r(a,u,p,c,x,g),o=!0}),a},z.lineEach=e,z.lineReduce=function(i,r,n){var a=n;return e(i,function(o,u,p,c){a=u===0&&n===void 0?o:r(a,o,u,p,c)}),a},z.findSegment=function(i,r){if(r=r||{},!S.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,o=r.multiFeatureIndex||0,u=r.geometryIndex||0,p=r.segmentIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,n=i.features[a].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return p<0&&(p=x.length+p-1),S.lineString([x[p],x[p+1]],c,r);case"Polygon":return u<0&&(u=x.length+u),p<0&&(p=x[u].length+p-1),S.lineString([x[u][p],x[u][p+1]],c,r);case"MultiLineString":return o<0&&(o=x.length+o),p<0&&(p=x[o].length+p-1),S.lineString([x[o][p],x[o][p+1]],c,r);case"MultiPolygon":return o<0&&(o=x.length+o),u<0&&(u=x[o].length+u),p<0&&(p=x[o][u].length-p-1),S.lineString([x[o][u][p],x[o][u][p+1]],c,r)}throw new Error("geojson is invalid")},z.findPoint=function(i,r){if(r=r||{},!S.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,o=r.multiFeatureIndex||0,u=r.geometryIndex||0,p=r.coordIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,n=i.features[a].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":return S.point(x,c,r);case"MultiPoint":return o<0&&(o=x.length+o),S.point(x[o],c,r);case"LineString":return p<0&&(p=x.length+p),S.point(x[p],c,r);case"Polygon":return u<0&&(u=x.length+u),p<0&&(p=x[u].length+p),S.point(x[u][p],c,r);case"MultiLineString":return o<0&&(o=x.length+o),p<0&&(p=x[o].length+p),S.point(x[o][p],c,r);case"MultiPolygon":return o<0&&(o=x.length+o),u<0&&(u=x[o].length+u),p<0&&(p=x[o][u].length-p),S.point(x[o][u][p],c,r)}throw new Error("geojson is invalid")}},65185:function(Q){Q.exports=function(z){var t=0,S=0,k=0,l=0;return z.map(function(T){var b=(T=T.slice())[0],d=b.toUpperCase();if(b!=d)switch(T[0]=d,b){case"a":T[6]+=k,T[7]+=l;break;case"v":T[1]+=l;break;case"h":T[1]+=k;break;default:for(var s=1;s<T.length;)T[s++]+=k,T[s++]+=l}switch(d){case"Z":k=t,l=S;break;case"H":k=T[1];break;case"V":l=T[1];break;case"M":k=t=T[1],l=S=T[2];break;default:k=T[T.length-2],l=T[T.length-1]}return T})}},21527:function(Q){Q.exports=function(z,t){if(!z||z.length==null)throw Error("Argument should be an array");t=t==null?1:Math.floor(t);for(var S=Array(2*t),k=0;k<t;k++){for(var l=-1/0,T=1/0,b=k,d=z.length;b<d;b+=t)z[b]>l&&(l=z[b]),z[b]<T&&(T=z[b]);S[k]=T,S[t+k]=l}return S}},6851:function(Q){Q.exports=function(z,t,S){if(typeof Array.prototype.findIndex=="function")return z.findIndex(t,S);if(typeof t!="function")throw new TypeError("predicate must be a function");var k=Object(z),l=k.length;if(l===0)return-1;for(var T=0;T<l;T++)if(t.call(S,k[T],T,k))return T;return-1}},54:function(Q,z,t){var S=t(21527);Q.exports=function(k,l,T){if(!k||k.length==null)throw Error("Argument should be an array");l==null&&(l=1),T==null&&(T=S(k,l));for(var b=0;b<l;b++){var d=T[l+b],s=T[b],e=b,i=k.length;if(d===1/0&&s===-1/0)for(e=b;e<i;e+=l)k[e]=k[e]===d?1:k[e]===s?0:.5;else if(d===1/0)for(e=b;e<i;e+=l)k[e]=k[e]===d?1:0;else if(s===-1/0)for(e=b;e<i;e+=l)k[e]=k[e]===s?0:1;else{var r=d-s;for(e=b;e<i;e+=l)isNaN(k[e])||(k[e]=r===0?.5:(k[e]-s)/r)}}return k}},57471:function(Q){Q.exports=function(z,t){var S=typeof z=="number",k=typeof t=="number";S&&!k?(t=z,z=0):S||k||(z=0,t=0);var l=(t|=0)-(z|=0);if(l<0)throw new Error("array length must be positive");for(var T=new Array(l),b=0,d=z;b<l;b++,d++)T[b]=d;return T}},32791:function(Q,z,t){var S=t(90386);function k(I){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},k(I)}var l,T,b=t(79616).codes,d=b.ERR_AMBIGUOUS_ARGUMENT,s=b.ERR_INVALID_ARG_TYPE,e=b.ERR_INVALID_ARG_VALUE,i=b.ERR_INVALID_RETURN_VALUE,r=b.ERR_MISSING_ARGS,n=t(73894),a=t(43827).inspect,o=t(43827).types,u=o.isPromise,p=o.isRegExp,c=Object.assign?Object.assign:t(73523).assign,x=Object.is?Object.is:t(64003);function g(){var I=t(74061);l=I.isDeepEqual,T=I.isDeepStrictEqual}var f=!1,y=Q.exports=h,v={};function m(I){throw I.message instanceof Error?I.message:new n(I)}function _(I,H,N,F){if(!N){var V=!1;if(H===0)V=!0,F="No value argument passed to `assert.ok()`";else if(F instanceof Error)throw F;var q=new n({actual:N,expected:!0,message:F,operator:"==",stackStartFn:I});throw q.generatedMessage=V,q}}function h(){for(var I=arguments.length,H=new Array(I),N=0;N<I;N++)H[N]=arguments[N];_.apply(void 0,[h,H.length].concat(H))}y.fail=function I(H,N,F,V,q){var te,$=arguments.length;if($===0?te="Failed":$===1?(F=H,H=void 0):(f===!1&&(f=!0,(S.emitWarning?S.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),$===2&&(V="!=")),F instanceof Error)throw F;var W={actual:H,expected:N,operator:V===void 0?"fail":V,stackStartFn:q||I};F!==void 0&&(W.message=F);var Z=new n(W);throw te&&(Z.message=te,Z.generatedMessage=!0),Z},y.AssertionError=n,y.ok=h,y.equal=function I(H,N,F){if(arguments.length<2)throw new r("actual","expected");H!=N&&m({actual:H,expected:N,message:F,operator:"==",stackStartFn:I})},y.notEqual=function I(H,N,F){if(arguments.length<2)throw new r("actual","expected");H==N&&m({actual:H,expected:N,message:F,operator:"!=",stackStartFn:I})},y.deepEqual=function I(H,N,F){if(arguments.length<2)throw new r("actual","expected");l===void 0&&g(),l(H,N)||m({actual:H,expected:N,message:F,operator:"deepEqual",stackStartFn:I})},y.notDeepEqual=function I(H,N,F){if(arguments.length<2)throw new r("actual","expected");l===void 0&&g(),l(H,N)&&m({actual:H,expected:N,message:F,operator:"notDeepEqual",stackStartFn:I})},y.deepStrictEqual=function I(H,N,F){if(arguments.length<2)throw new r("actual","expected");l===void 0&&g(),T(H,N)||m({actual:H,expected:N,message:F,operator:"deepStrictEqual",stackStartFn:I})},y.notDeepStrictEqual=function I(H,N,F){if(arguments.length<2)throw new r("actual","expected");l===void 0&&g(),T(H,N)&&m({actual:H,expected:N,message:F,operator:"notDeepStrictEqual",stackStartFn:I})},y.strictEqual=function I(H,N,F){if(arguments.length<2)throw new r("actual","expected");x(H,N)||m({actual:H,expected:N,message:F,operator:"strictEqual",stackStartFn:I})},y.notStrictEqual=function I(H,N,F){if(arguments.length<2)throw new r("actual","expected");x(H,N)&&m({actual:H,expected:N,message:F,operator:"notStrictEqual",stackStartFn:I})};var A=function I(H,N,F){var V=this;(function(q,te){if(!(q instanceof te))throw new TypeError("Cannot call a class as a function")})(this,I),N.forEach(function(q){q in H&&(F!==void 0&&typeof F[q]=="string"&&p(H[q])&&H[q].test(F[q])?V[q]=F[q]:V[q]=H[q])})};function w(I,H,N,F){if(typeof H!="function"){if(p(H))return H.test(I);if(arguments.length===2)throw new s("expected",["Function","RegExp"],H);if(k(I)!=="object"||I===null){var V=new n({actual:I,expected:H,message:N,operator:"deepStrictEqual",stackStartFn:F});throw V.operator=F.name,V}var q=Object.keys(H);if(H instanceof Error)q.push("name","message");else if(q.length===0)throw new e("error",H,"may not be an empty object");return l===void 0&&g(),q.forEach(function(te){typeof I[te]=="string"&&p(H[te])&&H[te].test(I[te])||function($,W,Z,J,ee,re){if(!(Z in $)||!T($[Z],W[Z])){if(!J){var ae=new A($,ee),oe=new A(W,ee,$),ce=new n({actual:ae,expected:oe,operator:"deepStrictEqual",stackStartFn:re});throw ce.actual=$,ce.expected=W,ce.operator=re.name,ce}m({actual:$,expected:W,message:J,operator:re.name,stackStartFn:re})}}(I,H,te,N,q,F)}),!0}return H.prototype!==void 0&&I instanceof H||!Error.isPrototypeOf(H)&&H.call({},I)===!0}function E(I){if(typeof I!="function")throw new s("fn","Function",I);try{I()}catch(H){return H}return v}function L(I){return u(I)||I!==null&&k(I)==="object"&&typeof I.then=="function"&&typeof I.catch=="function"}function C(I){return Promise.resolve().then(function(){var H;if(typeof I=="function"){if(!L(H=I()))throw new i("instance of Promise","promiseFn",H)}else{if(!L(I))throw new s("promiseFn",["Function","Promise"],I);H=I}return Promise.resolve().then(function(){return H}).then(function(){return v}).catch(function(N){return N})})}function P(I,H,N,F){if(typeof N=="string"){if(arguments.length===4)throw new s("error",["Object","Error","Function","RegExp"],N);if(k(H)==="object"&&H!==null){if(H.message===N)throw new d("error/message",'The error message "'.concat(H.message,'" is identical to the message.'))}else if(H===N)throw new d("error/message",'The error "'.concat(H,'" is identical to the message.'));F=N,N=void 0}else if(N!=null&&k(N)!=="object"&&typeof N!="function")throw new s("error",["Object","Error","Function","RegExp"],N);if(H===v){var V="";N&&N.name&&(V+=" (".concat(N.name,")")),V+=F?": ".concat(F):".";var q=I.name==="rejects"?"rejection":"exception";m({actual:void 0,expected:N,operator:I.name,message:"Missing expected ".concat(q).concat(V),stackStartFn:I})}if(N&&!w(H,N,F,I))throw H}function D(I,H,N,F){if(H!==v){if(typeof N=="string"&&(F=N,N=void 0),!N||w(H,N)){var V=F?": ".concat(F):".",q=I.name==="doesNotReject"?"rejection":"exception";m({actual:H,expected:N,operator:I.name,message:"Got unwanted ".concat(q).concat(V,`
`)+'Actual message: "'.concat(H&&H.message,'"'),stackStartFn:I})}throw H}}function G(){for(var I=arguments.length,H=new Array(I),N=0;N<I;N++)H[N]=arguments[N];_.apply(void 0,[G,H.length].concat(H))}y.throws=function I(H){for(var N=arguments.length,F=new Array(N>1?N-1:0),V=1;V<N;V++)F[V-1]=arguments[V];P.apply(void 0,[I,E(H)].concat(F))},y.rejects=function I(H){for(var N=arguments.length,F=new Array(N>1?N-1:0),V=1;V<N;V++)F[V-1]=arguments[V];return C(H).then(function(q){return P.apply(void 0,[I,q].concat(F))})},y.doesNotThrow=function I(H){for(var N=arguments.length,F=new Array(N>1?N-1:0),V=1;V<N;V++)F[V-1]=arguments[V];D.apply(void 0,[I,E(H)].concat(F))},y.doesNotReject=function I(H){for(var N=arguments.length,F=new Array(N>1?N-1:0),V=1;V<N;V++)F[V-1]=arguments[V];return C(H).then(function(q){return D.apply(void 0,[I,q].concat(F))})},y.ifError=function I(H){if(H!=null){var N="ifError got unwanted exception: ";k(H)==="object"&&typeof H.message=="string"?H.message.length===0&&H.constructor?N+=H.constructor.name:N+=H.message:N+=a(H);var F=new n({actual:H,expected:null,operator:"ifError",message:N,stackStartFn:I}),V=H.stack;if(typeof V=="string"){var q=V.split(`
`);q.shift();for(var te=F.stack.split(`
`),$=0;$<q.length;$++){var W=te.indexOf(q[$]);if(W!==-1){te=te.slice(0,W);break}}F.stack="".concat(te.join(`
`),`
`).concat(q.join(`
`))}throw F}},y.strict=c(G,y,{equal:y.strictEqual,deepEqual:y.deepStrictEqual,notEqual:y.notStrictEqual,notDeepEqual:y.notDeepStrictEqual}),y.strict.strict=y.strict},73894:function(Q,z,t){var S=t(90386);function k(m,_,h){return _ in m?Object.defineProperty(m,_,{value:h,enumerable:!0,configurable:!0,writable:!0}):m[_]=h,m}function l(m,_){for(var h=0;h<_.length;h++){var A=_[h];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(m,A.key,A)}}function T(m,_){return!_||r(_)!=="object"&&typeof _!="function"?b(m):_}function b(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function d(m){var _=typeof Map=="function"?new Map:void 0;return d=function(h){if(h===null||(A=h,Function.toString.call(A).indexOf("[native code]")===-1))return h;var A;if(typeof h!="function")throw new TypeError("Super expression must either be null or a function");if(_!==void 0){if(_.has(h))return _.get(h);_.set(h,w)}function w(){return s(h,arguments,i(this).constructor)}return w.prototype=Object.create(h.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),e(w,h)},d(m)}function s(m,_,h){return s=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(A,w,E){var L=[null];L.push.apply(L,w);var C=new(Function.bind.apply(A,L));return E&&e(C,E.prototype),C},s.apply(null,arguments)}function e(m,_){return e=Object.setPrototypeOf||function(h,A){return h.__proto__=A,h},e(m,_)}function i(m){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},i(m)}function r(m){return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},r(m)}var n=t(43827).inspect,a=t(79616).codes.ERR_INVALID_ARG_TYPE;function o(m,_,h){return(h===void 0||h>m.length)&&(h=m.length),m.substring(h-_.length,h)===_}var u="",p="",c="",x="",g={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function f(m){var _=Object.keys(m),h=Object.create(Object.getPrototypeOf(m));return _.forEach(function(A){h[A]=m[A]}),Object.defineProperty(h,"message",{value:m.message}),h}function y(m){return n(m,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var v=function(m){function _(w){var E;if(function(te,$){if(!(te instanceof $))throw new TypeError("Cannot call a class as a function")}(this,_),r(w)!=="object"||w===null)throw new a("options","Object",w);var L=w.message,C=w.operator,P=w.stackStartFn,D=w.actual,G=w.expected,I=Error.stackTraceLimit;if(Error.stackTraceLimit=0,L!=null)E=T(this,i(_).call(this,String(L)));else if(S.stderr&&S.stderr.isTTY&&(S.stderr&&S.stderr.getColorDepth&&S.stderr.getColorDepth()!==1?(u="\x1B[34m",p="\x1B[32m",x="\x1B[39m",c="\x1B[31m"):(u="",p="",x="",c="")),r(D)==="object"&&D!==null&&r(G)==="object"&&G!==null&&"stack"in D&&D instanceof Error&&"stack"in G&&G instanceof Error&&(D=f(D),G=f(G)),C==="deepStrictEqual"||C==="strictEqual")E=T(this,i(_).call(this,function(te,$,W){var Z="",J="",ee=0,re="",ae=!1,oe=y(te),ce=oe.split(`
`),pe=y($).split(`
`),ve=0,we="";if(W==="strictEqual"&&r(te)==="object"&&r($)==="object"&&te!==null&&$!==null&&(W="strictEqualObject"),ce.length===1&&pe.length===1&&ce[0]!==pe[0]){var xe=ce[0].length+pe[0].length;if(xe<=10){if(!(r(te)==="object"&&te!==null||r($)==="object"&&$!==null||te===0&&$===0))return"".concat(g[W],`

`)+"".concat(ce[0]," !== ").concat(pe[0],`
`)}else if(W!=="strictEqualObject"&&xe<(S.stderr&&S.stderr.isTTY?S.stderr.columns:80)){for(;ce[0][ve]===pe[0][ve];)ve++;ve>2&&(we=`
  `.concat(function(Ue,he){if(he=Math.floor(he),Ue.length==0||he==0)return"";var ke=Ue.length*he;for(he=Math.floor(Math.log(he)/Math.log(2));he;)Ue+=Ue,he--;return Ue+Ue.substring(0,ke-Ue.length)}(" ",ve),"^"),ve=0)}}for(var ge=ce[ce.length-1],Oe=pe[pe.length-1];ge===Oe&&(ve++<2?re=`
  `.concat(ge).concat(re):Z=ge,ce.pop(),pe.pop(),ce.length!==0&&pe.length!==0);)ge=ce[ce.length-1],Oe=pe[pe.length-1];var Ae=Math.max(ce.length,pe.length);if(Ae===0){var Te=oe.split(`
`);if(Te.length>30)for(Te[26]="".concat(u,"...").concat(x);Te.length>27;)Te.pop();return"".concat(g.notIdentical,`

`).concat(Te.join(`
`),`
`)}ve>3&&(re=`
`.concat(u,"...").concat(x).concat(re),ae=!0),Z!==""&&(re=`
  `.concat(Z).concat(re),Z="");var se=0,le=g[W]+`
`.concat(p,"+ actual").concat(x," ").concat(c,"- expected").concat(x),ne=" ".concat(u,"...").concat(x," Lines skipped");for(ve=0;ve<Ae;ve++){var me=ve-ee;if(ce.length<ve+1)me>1&&ve>2&&(me>4?(J+=`
`.concat(u,"...").concat(x),ae=!0):me>3&&(J+=`
  `.concat(pe[ve-2]),se++),J+=`
  `.concat(pe[ve-1]),se++),ee=ve,Z+=`
`.concat(c,"-").concat(x," ").concat(pe[ve]),se++;else if(pe.length<ve+1)me>1&&ve>2&&(me>4?(J+=`
`.concat(u,"...").concat(x),ae=!0):me>3&&(J+=`
  `.concat(ce[ve-2]),se++),J+=`
  `.concat(ce[ve-1]),se++),ee=ve,J+=`
`.concat(p,"+").concat(x," ").concat(ce[ve]),se++;else{var Ee=pe[ve],be=ce[ve],De=be!==Ee&&(!o(be,",")||be.slice(0,-1)!==Ee);De&&o(Ee,",")&&Ee.slice(0,-1)===be&&(De=!1,be+=","),De?(me>1&&ve>2&&(me>4?(J+=`
`.concat(u,"...").concat(x),ae=!0):me>3&&(J+=`
  `.concat(ce[ve-2]),se++),J+=`
  `.concat(ce[ve-1]),se++),ee=ve,J+=`
`.concat(p,"+").concat(x," ").concat(be),Z+=`
`.concat(c,"-").concat(x," ").concat(Ee),se+=2):(J+=Z,Z="",me!==1&&ve!==0||(J+=`
  `.concat(be),se++))}if(se>20&&ve<Ae-2)return"".concat(le).concat(ne,`
`).concat(J,`
`).concat(u,"...").concat(x).concat(Z,`
`)+"".concat(u,"...").concat(x)}return"".concat(le).concat(ae?ne:"",`
`).concat(J).concat(Z).concat(re).concat(we)}(D,G,C)));else if(C==="notDeepStrictEqual"||C==="notStrictEqual"){var H=g[C],N=y(D).split(`
`);if(C==="notStrictEqual"&&r(D)==="object"&&D!==null&&(H=g.notStrictEqualObject),N.length>30)for(N[26]="".concat(u,"...").concat(x);N.length>27;)N.pop();E=N.length===1?T(this,i(_).call(this,"".concat(H," ").concat(N[0]))):T(this,i(_).call(this,"".concat(H,`

`).concat(N.join(`
`),`
`)))}else{var F=y(D),V="",q=g[C];C==="notDeepEqual"||C==="notEqual"?(F="".concat(g[C],`

`).concat(F)).length>1024&&(F="".concat(F.slice(0,1021),"...")):(V="".concat(y(G)),F.length>512&&(F="".concat(F.slice(0,509),"...")),V.length>512&&(V="".concat(V.slice(0,509),"...")),C==="deepEqual"||C==="equal"?F="".concat(q,`

`).concat(F,`

should equal

`):V=" ".concat(C," ").concat(V)),E=T(this,i(_).call(this,"".concat(F).concat(V)))}return Error.stackTraceLimit=I,E.generatedMessage=!L,Object.defineProperty(b(E),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),E.code="ERR_ASSERTION",E.actual=D,E.expected=G,E.operator=C,Error.captureStackTrace&&Error.captureStackTrace(b(E),P),E.stack,E.name="AssertionError",T(E)}var h,A;return function(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(E&&E.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),E&&e(w,E)}(_,m),h=_,A=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:n.custom,value:function(w,E){return n(this,function(L){for(var C=1;C<arguments.length;C++){var P=arguments[C]!=null?arguments[C]:{},D=Object.keys(P);typeof Object.getOwnPropertySymbols=="function"&&(D=D.concat(Object.getOwnPropertySymbols(P).filter(function(G){return Object.getOwnPropertyDescriptor(P,G).enumerable}))),D.forEach(function(G){k(L,G,P[G])})}return L}({},E,{customInspect:!1,depth:0}))}}],A&&l(h.prototype,A),_}(d(Error));Q.exports=v},79616:function(Q,z,t){function S(i){return S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},S(i)}function k(i){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},k(i)}function l(i,r){return l=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},l(i,r)}var T,b,d={};function s(i,r,n){n||(n=Error);var a=function(o){function u(p,c,x){var g;return function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")}(this,u),g=function(f,y){return!y||S(y)!=="object"&&typeof y!="function"?function(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}(f):y}(this,k(u).call(this,function(f,y,v){return typeof r=="string"?r:r(f,y,v)}(p,c,x))),g.code=i,g}return function(p,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(c&&c.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),c&&l(p,c)}(u,o),u}(n);d[i]=a}function e(i,r){if(Array.isArray(i)){var n=i.length;return i=i.map(function(a){return String(a)}),n>2?"one of ".concat(r," ").concat(i.slice(0,n-1).join(", "),", or ")+i[n-1]:n===2?"one of ".concat(r," ").concat(i[0]," or ").concat(i[1]):"of ".concat(r," ").concat(i[0])}return"of ".concat(r," ").concat(String(i))}s("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),s("ERR_INVALID_ARG_TYPE",function(i,r,n){var a,o,u,p,c;if(T===void 0&&(T=t(32791)),T(typeof i=="string","'name' must be a string"),typeof r=="string"&&(o="not ",r.substr(0,4)===o)?(a="must not be",r=r.replace(/^not /,"")):a="must be",function(g,f,y){return(y===void 0||y>g.length)&&(y=g.length),g.substring(y-9,y)===f}(i," argument"))u="The ".concat(i," ").concat(a," ").concat(e(r,"type"));else{var x=(typeof c!="number"&&(c=0),c+1>(p=i).length||p.indexOf(".",c)===-1?"argument":"property");u='The "'.concat(i,'" ').concat(x," ").concat(a," ").concat(e(r,"type"))}return u+". Received type ".concat(S(n))},TypeError),s("ERR_INVALID_ARG_VALUE",function(i,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";b===void 0&&(b=t(43827));var a=b.inspect(r);return a.length>128&&(a="".concat(a.slice(0,128),"...")),"The argument '".concat(i,"' ").concat(n,". Received ").concat(a)},TypeError),s("ERR_INVALID_RETURN_VALUE",function(i,r,n){var a;return a=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):"type ".concat(S(n)),"Expected ".concat(i,' to be returned from the "').concat(r,'"')+" function but got ".concat(a,".")},TypeError),s("ERR_MISSING_ARGS",function(){for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];T===void 0&&(T=t(32791)),T(r.length>0,"At least one arg needs to be specified");var a="The ",o=r.length;switch(r=r.map(function(u){return'"'.concat(u,'"')}),o){case 1:a+="".concat(r[0]," argument");break;case 2:a+="".concat(r[0]," and ").concat(r[1]," arguments");break;default:a+=r.slice(0,o-1).join(", "),a+=", and ".concat(r[o-1]," arguments")}return"".concat(a," must be specified")},TypeError),Q.exports.codes=d},74061:function(Q,z,t){function S(ee,re){return function(ae){if(Array.isArray(ae))return ae}(ee)||function(ae,oe){var ce=[],pe=!0,ve=!1,we=void 0;try{for(var xe,ge=ae[Symbol.iterator]();!(pe=(xe=ge.next()).done)&&(ce.push(xe.value),!oe||ce.length!==oe);pe=!0);}catch(Oe){ve=!0,we=Oe}finally{try{pe||ge.return==null||ge.return()}finally{if(ve)throw we}}return ce}(ee,re)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function k(ee){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(re){return typeof re}:function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},k(ee)}var l=/a/g.flags!==void 0,T=function(ee){var re=[];return ee.forEach(function(ae){return re.push(ae)}),re},b=function(ee){var re=[];return ee.forEach(function(ae,oe){return re.push([oe,ae])}),re},d=Object.is?Object.is:t(64003),s=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},e=Number.isNaN?Number.isNaN:t(15567);function i(ee){return ee.call.bind(ee)}var r=i(Object.prototype.hasOwnProperty),n=i(Object.prototype.propertyIsEnumerable),a=i(Object.prototype.toString),o=t(43827).types,u=o.isAnyArrayBuffer,p=o.isArrayBufferView,c=o.isDate,x=o.isMap,g=o.isRegExp,f=o.isSet,y=o.isNativeError,v=o.isBoxedPrimitive,m=o.isNumberObject,_=o.isStringObject,h=o.isBooleanObject,A=o.isBigIntObject,w=o.isSymbolObject,E=o.isFloat32Array,L=o.isFloat64Array;function C(ee){if(ee.length===0||ee.length>10)return!0;for(var re=0;re<ee.length;re++){var ae=ee.charCodeAt(re);if(ae<48||ae>57)return!0}return ee.length===10&&ee>=Math.pow(2,32)}function P(ee){return Object.keys(ee).filter(C).concat(s(ee).filter(Object.prototype.propertyIsEnumerable.bind(ee)))}function D(ee,re){if(ee===re)return 0;for(var ae=ee.length,oe=re.length,ce=0,pe=Math.min(ae,oe);ce<pe;++ce)if(ee[ce]!==re[ce]){ae=ee[ce],oe=re[ce];break}return ae<oe?-1:oe<ae?1:0}var G=0,I=1,H=2,N=3;function F(ee,re,ae,oe){if(ee===re)return ee!==0||!ae||d(ee,re);if(ae){if(k(ee)!=="object")return typeof ee=="number"&&e(ee)&&e(re);if(k(re)!=="object"||ee===null||re===null||Object.getPrototypeOf(ee)!==Object.getPrototypeOf(re))return!1}else{if(ee===null||k(ee)!=="object")return(re===null||k(re)!=="object")&&ee==re;if(re===null||k(re)!=="object")return!1}var ce,pe,ve,we,xe=a(ee);if(xe!==a(re))return!1;if(Array.isArray(ee)){if(ee.length!==re.length)return!1;var ge=P(ee),Oe=P(re);return ge.length===Oe.length&&q(ee,re,ae,oe,I,ge)}if(xe==="[object Object]"&&(!x(ee)&&x(re)||!f(ee)&&f(re)))return!1;if(c(ee)){if(!c(re)||Date.prototype.getTime.call(ee)!==Date.prototype.getTime.call(re))return!1}else if(g(ee)){if(!g(re)||(ve=ee,we=re,!(l?ve.source===we.source&&ve.flags===we.flags:RegExp.prototype.toString.call(ve)===RegExp.prototype.toString.call(we))))return!1}else if(y(ee)||ee instanceof Error){if(ee.message!==re.message||ee.name!==re.name)return!1}else{if(p(ee)){if(ae||!E(ee)&&!L(ee)){if(!function(se,le){return se.byteLength===le.byteLength&&D(new Uint8Array(se.buffer,se.byteOffset,se.byteLength),new Uint8Array(le.buffer,le.byteOffset,le.byteLength))===0}(ee,re))return!1}else if(!function(se,le){if(se.byteLength!==le.byteLength)return!1;for(var ne=0;ne<se.byteLength;ne++)if(se[ne]!==le[ne])return!1;return!0}(ee,re))return!1;var Ae=P(ee),Te=P(re);return Ae.length===Te.length&&q(ee,re,ae,oe,G,Ae)}if(f(ee))return!(!f(re)||ee.size!==re.size)&&q(ee,re,ae,oe,H);if(x(ee))return!(!x(re)||ee.size!==re.size)&&q(ee,re,ae,oe,N);if(u(ee)){if(pe=re,(ce=ee).byteLength!==pe.byteLength||D(new Uint8Array(ce),new Uint8Array(pe))!==0)return!1}else if(v(ee)&&!function(se,le){return m(se)?m(le)&&d(Number.prototype.valueOf.call(se),Number.prototype.valueOf.call(le)):_(se)?_(le)&&String.prototype.valueOf.call(se)===String.prototype.valueOf.call(le):h(se)?h(le)&&Boolean.prototype.valueOf.call(se)===Boolean.prototype.valueOf.call(le):A(se)?A(le)&&BigInt.prototype.valueOf.call(se)===BigInt.prototype.valueOf.call(le):w(le)&&Symbol.prototype.valueOf.call(se)===Symbol.prototype.valueOf.call(le)}(ee,re))return!1}return q(ee,re,ae,oe,G)}function V(ee,re){return re.filter(function(ae){return n(ee,ae)})}function q(ee,re,ae,oe,ce,pe){if(arguments.length===5){pe=Object.keys(ee);var ve=Object.keys(re);if(pe.length!==ve.length)return!1}for(var we=0;we<pe.length;we++)if(!r(re,pe[we]))return!1;if(ae&&arguments.length===5){var xe=s(ee);if(xe.length!==0){var ge=0;for(we=0;we<xe.length;we++){var Oe=xe[we];if(n(ee,Oe)){if(!n(re,Oe))return!1;pe.push(Oe),ge++}else if(n(re,Oe))return!1}var Ae=s(re);if(xe.length!==Ae.length&&V(re,Ae).length!==ge)return!1}else{var Te=s(re);if(Te.length!==0&&V(re,Te).length!==0)return!1}}if(pe.length===0&&(ce===G||ce===I&&ee.length===0||ee.size===0))return!0;if(oe===void 0)oe={val1:new Map,val2:new Map,position:0};else{var se=oe.val1.get(ee);if(se!==void 0){var le=oe.val2.get(re);if(le!==void 0)return se===le}oe.position++}oe.val1.set(ee,oe.position),oe.val2.set(re,oe.position);var ne=function(me,Ee,be,De,Ue,he){var ke=0;if(he===H){if(!function(Re,He,Ge,$e){for(var st=null,Ke=T(Re),gt=0;gt<Ke.length;gt++){var mt=Ke[gt];if(k(mt)==="object"&&mt!==null)st===null&&(st=new Set),st.add(mt);else if(!He.has(mt)){if(Ge||!W(Re,He,mt))return!1;st===null&&(st=new Set),st.add(mt)}}if(st!==null){for(var at=T(He),rt=0;rt<at.length;rt++){var xt=at[rt];if(k(xt)==="object"&&xt!==null){if(!te(st,xt,Ge,$e))return!1}else if(!Ge&&!Re.has(xt)&&!te(st,xt,Ge,$e))return!1}return st.size===0}return!0}(me,Ee,be,Ue))return!1}else if(he===N){if(!function(Re,He,Ge,$e){for(var st=null,Ke=b(Re),gt=0;gt<Ke.length;gt++){var mt=S(Ke[gt],2),at=mt[0],rt=mt[1];if(k(at)==="object"&&at!==null)st===null&&(st=new Set),st.add(at);else{var xt=He.get(at);if(xt===void 0&&!He.has(at)||!F(rt,xt,Ge,$e)){if(Ge||!Z(Re,He,at,rt,$e))return!1;st===null&&(st=new Set),st.add(at)}}}if(st!==null){for(var Tt=b(He),wt=0;wt<Tt.length;wt++){var Ot=S(Tt[wt],2),Ct=(at=Ot[0],Ot[1]);if(k(at)==="object"&&at!==null){if(!J(st,Re,at,Ct,Ge,$e))return!1}else if(!(Ge||Re.has(at)&&F(Re.get(at),Ct,!1,$e)||J(st,Re,at,Ct,!1,$e)))return!1}return st.size===0}return!0}(me,Ee,be,Ue))return!1}else if(he===I)for(;ke<me.length;ke++){if(!r(me,ke)){if(r(Ee,ke))return!1;for(var _e=Object.keys(me);ke<_e.length;ke++){var Ce=_e[ke];if(!r(Ee,Ce)||!F(me[Ce],Ee[Ce],be,Ue))return!1}return _e.length===Object.keys(Ee).length}if(!r(Ee,ke)||!F(me[ke],Ee[ke],be,Ue))return!1}for(ke=0;ke<De.length;ke++){var Fe=De[ke];if(!F(me[Fe],Ee[Fe],be,Ue))return!1}return!0}(ee,re,ae,pe,oe,ce);return oe.val1.delete(ee),oe.val2.delete(re),ne}function te(ee,re,ae,oe){for(var ce=T(ee),pe=0;pe<ce.length;pe++){var ve=ce[pe];if(F(re,ve,ae,oe))return ee.delete(ve),!0}return!1}function $(ee){switch(k(ee)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":ee=+ee;case"number":if(e(ee))return!1}return!0}function W(ee,re,ae){var oe=$(ae);return oe??(re.has(oe)&&!ee.has(oe))}function Z(ee,re,ae,oe,ce){var pe=$(ae);if(pe!=null)return pe;var ve=re.get(pe);return!(ve===void 0&&!re.has(pe)||!F(oe,ve,!1,ce))&&!ee.has(pe)&&F(oe,ve,!1,ce)}function J(ee,re,ae,oe,ce,pe){for(var ve=T(ee),we=0;we<ve.length;we++){var xe=ve[we];if(F(ae,xe,ce,pe)&&F(oe,re.get(xe),ce,pe))return ee.delete(xe),!0}return!1}Q.exports={isDeepEqual:function(ee,re){return F(ee,re,!1)},isDeepStrictEqual:function(ee,re){return F(ee,re,!0)}}},95341:function(Q,z){z.byteLength=function(s){var e=b(s),i=e[0],r=e[1];return 3*(i+r)/4-r},z.toByteArray=function(s){var e,i,r=b(s),n=r[0],a=r[1],o=new k(function(c,x,g){return 3*(x+g)/4-g}(0,n,a)),u=0,p=a>0?n-4:n;for(i=0;i<p;i+=4)e=S[s.charCodeAt(i)]<<18|S[s.charCodeAt(i+1)]<<12|S[s.charCodeAt(i+2)]<<6|S[s.charCodeAt(i+3)],o[u++]=e>>16&255,o[u++]=e>>8&255,o[u++]=255&e;return a===2&&(e=S[s.charCodeAt(i)]<<2|S[s.charCodeAt(i+1)]>>4,o[u++]=255&e),a===1&&(e=S[s.charCodeAt(i)]<<10|S[s.charCodeAt(i+1)]<<4|S[s.charCodeAt(i+2)]>>2,o[u++]=e>>8&255,o[u++]=255&e),o},z.fromByteArray=function(s){for(var e,i=s.length,r=i%3,n=[],a=16383,o=0,u=i-r;o<u;o+=a)n.push(d(s,o,o+a>u?u:o+a));return r===1?(e=s[i-1],n.push(t[e>>2]+t[e<<4&63]+"==")):r===2&&(e=(s[i-2]<<8)+s[i-1],n.push(t[e>>10]+t[e>>4&63]+t[e<<2&63]+"=")),n.join("")};for(var t=[],S=[],k=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=0;T<64;++T)t[T]=l[T],S[l.charCodeAt(T)]=T;function b(s){var e=s.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=s.indexOf("=");return i===-1&&(i=e),[i,i===e?0:4-i%4]}function d(s,e,i){for(var r,n,a=[],o=e;o<i;o+=3)r=(s[o]<<16&16711680)+(s[o+1]<<8&65280)+(255&s[o+2]),a.push(t[(n=r)>>18&63]+t[n>>12&63]+t[n>>6&63]+t[63&n]);return a.join("")}S["-".charCodeAt(0)]=62,S["_".charCodeAt(0)]=63},91358:function(Q){function z(b,d,s,e,i){for(var r=i+1;e<=i;){var n=e+i>>>1,a=b[n];(s!==void 0?s(a,d):a-d)>=0?(r=n,i=n-1):e=n+1}return r}function t(b,d,s,e,i){for(var r=i+1;e<=i;){var n=e+i>>>1,a=b[n];(s!==void 0?s(a,d):a-d)>0?(r=n,i=n-1):e=n+1}return r}function S(b,d,s,e,i){for(var r=e-1;e<=i;){var n=e+i>>>1,a=b[n];(s!==void 0?s(a,d):a-d)<0?(r=n,e=n+1):i=n-1}return r}function k(b,d,s,e,i){for(var r=e-1;e<=i;){var n=e+i>>>1,a=b[n];(s!==void 0?s(a,d):a-d)<=0?(r=n,e=n+1):i=n-1}return r}function l(b,d,s,e,i){for(;e<=i;){var r=e+i>>>1,n=b[r],a=s!==void 0?s(n,d):n-d;if(a===0)return r;a<=0?e=r+1:i=r-1}return-1}function T(b,d,s,e,i,r){return typeof s=="function"?r(b,d,s,e===void 0?0:0|e,i===void 0?b.length-1:0|i):r(b,d,void 0,s===void 0?0:0|s,e===void 0?b.length-1:0|e)}Q.exports={ge:function(b,d,s,e,i){return T(b,d,s,e,i,z)},gt:function(b,d,s,e,i){return T(b,d,s,e,i,t)},lt:function(b,d,s,e,i){return T(b,d,s,e,i,S)},le:function(b,d,s,e,i){return T(b,d,s,e,i,k)},eq:function(b,d,s,e,i){return T(b,d,s,e,i,l)}}},13547:function(Q,z){function t(k){var l=32;return(k&=-k)&&l--,65535&k&&(l-=16),16711935&k&&(l-=8),252645135&k&&(l-=4),858993459&k&&(l-=2),1431655765&k&&(l-=1),l}z.INT_BITS=32,z.INT_MAX=2147483647,z.INT_MIN=-2147483648,z.sign=function(k){return(k>0)-(k<0)},z.abs=function(k){var l=k>>31;return(k^l)-l},z.min=function(k,l){return l^(k^l)&-(k<l)},z.max=function(k,l){return k^(k^l)&-(k<l)},z.isPow2=function(k){return!(k&k-1||!k)},z.log2=function(k){var l,T;return l=(k>65535)<<4,l|=T=((k>>>=l)>255)<<3,l|=T=((k>>>=T)>15)<<2,(l|=T=((k>>>=T)>3)<<1)|(k>>>=T)>>1},z.log10=function(k){return k>=1e9?9:k>=1e8?8:k>=1e7?7:k>=1e6?6:k>=1e5?5:k>=1e4?4:k>=1e3?3:k>=100?2:k>=10?1:0},z.popCount=function(k){return 16843009*((k=(858993459&(k-=k>>>1&1431655765))+(k>>>2&858993459))+(k>>>4)&252645135)>>>24},z.countTrailingZeros=t,z.nextPow2=function(k){return k+=k===0,--k,k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,1+(k|=k>>>16)},z.prevPow2=function(k){return k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,(k|=k>>>16)-(k>>>1)},z.parity=function(k){return k^=k>>>16,k^=k>>>8,k^=k>>>4,27030>>>(k&=15)&1};var S=new Array(256);(function(k){for(var l=0;l<256;++l){var T=l,b=l,d=7;for(T>>>=1;T;T>>>=1)b<<=1,b|=1&T,--d;k[l]=b<<d&255}})(S),z.reverse=function(k){return S[255&k]<<24|S[k>>>8&255]<<16|S[k>>>16&255]<<8|S[k>>>24&255]},z.interleave2=function(k,l){return(k=1431655765&((k=858993459&((k=252645135&((k=16711935&((k&=65535)|k<<8))|k<<4))|k<<2))|k<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l&=65535)|l<<8))|l<<4))|l<<2))|l<<1))<<1},z.deinterleave2=function(k,l){return(k=65535&((k=16711935&((k=252645135&((k=858993459&((k=k>>>l&1431655765)|k>>>1))|k>>>2))|k>>>4))|k>>>16))<<16>>16},z.interleave3=function(k,l,T){return k=1227133513&((k=3272356035&((k=251719695&((k=4278190335&((k&=1023)|k<<16))|k<<8))|k<<4))|k<<2),(k|=(l=1227133513&((l=3272356035&((l=251719695&((l=4278190335&((l&=1023)|l<<16))|l<<8))|l<<4))|l<<2))<<1)|(T=1227133513&((T=3272356035&((T=251719695&((T=4278190335&((T&=1023)|T<<16))|T<<8))|T<<4))|T<<2))<<2},z.deinterleave3=function(k,l){return(k=1023&((k=4278190335&((k=251719695&((k=3272356035&((k=k>>>l&1227133513)|k>>>2))|k>>>4))|k>>>8))|k>>>16))<<22>>22},z.nextCombination=function(k){var l=k|k-1;return l+1|(~l&-~l)-1>>>t(k)+1}},44781:function(Q,z,t){var S=t(53435);Q.exports=function(b,d){d||(d={});var s,e,i,r,n,a,o,u,p,c,x,g=d.cutoff==null?.25:d.cutoff,f=d.radius==null?8:d.radius,y=d.channel||0;if(ArrayBuffer.isView(b)||Array.isArray(b)){if(!d.width||!d.height)throw Error("For raw data width and height should be provided by options");s=d.width,e=d.height,r=b,a=d.stride?d.stride:Math.floor(b.length/s/e)}else window.HTMLCanvasElement&&b instanceof window.HTMLCanvasElement?(o=(u=b).getContext("2d"),s=u.width,e=u.height,r=(p=o.getImageData(0,0,s,e)).data,a=4):window.CanvasRenderingContext2D&&b instanceof window.CanvasRenderingContext2D?(o=b,s=(u=b.canvas).width,e=u.height,r=(p=o.getImageData(0,0,s,e)).data,a=4):window.ImageData&&b instanceof window.ImageData&&(p=b,s=b.width,e=b.height,r=p.data,a=4);if(i=Math.max(s,e),window.Uint8ClampedArray&&r instanceof window.Uint8ClampedArray||window.Uint8Array&&r instanceof window.Uint8Array)for(n=r,r=Array(s*e),c=0,x=n.length;c<x;c++)r[c]=n[c*a+y]/255;else if(a!==1)throw Error("Raw data can have only 1 value per pixel");var v=Array(s*e),m=Array(s*e),_=Array(i),h=Array(i),A=Array(i+1),w=Array(i);for(c=0,x=s*e;c<x;c++){var E=r[c];v[c]=E===1?0:E===0?k:Math.pow(Math.max(0,.5-E),2),m[c]=E===1?k:E===0?0:Math.pow(Math.max(0,E-.5),2)}l(v,s,e,_,h,w,A),l(m,s,e,_,h,w,A);var L=window.Float32Array?new Float32Array(s*e):new Array(s*e);for(c=0,x=s*e;c<x;c++)L[c]=S(1-((v[c]-m[c])/f+g),0,1);return L};var k=1e20;function l(b,d,s,e,i,r,n){for(var a=0;a<d;a++){for(var o=0;o<s;o++)e[o]=b[o*d+a];for(T(e,i,r,n,s),o=0;o<s;o++)b[o*d+a]=i[o]}for(o=0;o<s;o++){for(a=0;a<d;a++)e[a]=b[o*d+a];for(T(e,i,r,n,d),a=0;a<d;a++)b[o*d+a]=Math.sqrt(i[a])}}function T(b,d,s,e,i){s[0]=0,e[0]=-k,e[1]=+k;for(var r=1,n=0;r<i;r++){for(var a=(b[r]+r*r-(b[s[n]]+s[n]*s[n]))/(2*r-2*s[n]);a<=e[n];)n--,a=(b[r]+r*r-(b[s[n]]+s[n]*s[n]))/(2*r-2*s[n]);s[++n]=r,e[n]=a,e[n+1]=+k}for(r=0,n=0;r<i;r++){for(;e[n+1]<r;)n++;d[r]=(r-s[n])*(r-s[n])+b[s[n]]}}},6614:function(Q,z,t){var S=t(68318),k=t(68222),l=k(S("String.prototype.indexOf"));Q.exports=function(T,b){var d=S(T,!!b);return typeof d=="function"&&l(T,".prototype.")>-1?k(d):d}},68222:function(Q,z,t){var S=t(77575),k=t(68318),l=k("%Function.prototype.apply%"),T=k("%Function.prototype.call%"),b=k("%Reflect.apply%",!0)||S.call(T,l),d=k("%Object.getOwnPropertyDescriptor%",!0),s=k("%Object.defineProperty%",!0),e=k("%Math.max%");if(s)try{s({},"a",{value:1})}catch{s=null}Q.exports=function(r){var n=b(S,T,arguments);return d&&s&&d(n,"length").configurable&&s(n,"length",{value:1+e(0,r.length-(arguments.length-1))}),n};var i=function(){return b(S,l,arguments)};s?s(Q.exports,"apply",{value:i}):Q.exports.apply=i},53435:function(Q){Q.exports=function(z,t,S){return t<S?z<t?t:z>S?S:z:z<S?S:z>t?t:z}},6475:function(Q,z,t){var S=t(53435);function k(l,T){T==null&&(T=!0);var b=l[0],d=l[1],s=l[2],e=l[3];return e==null&&(e=T?1:255),T&&(b*=255,d*=255,s*=255,e*=255),16777216*(b=255&S(b,0,255))+((d=255&S(d,0,255))<<16)+((s=255&S(s,0,255))<<8)+(255&S(e,0,255))}Q.exports=k,Q.exports.to=k,Q.exports.from=function(l,T){var b=(l=+l)>>>24,d=(16711680&l)>>>16,s=(65280&l)>>>8,e=255&l;return T===!1?[b,d,s,e]:[b/255,d/255,s/255,e/255]}},76857:function(Q){Q.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},25075:function(Q,z,t){var S=t(36652),k=t(53435),l=t(90660);Q.exports=function(T,b){b!=="float"&&b||(b="array"),b==="uint"&&(b="uint8"),b==="uint_clamped"&&(b="uint8_clamped");var d=new(l(b))(4),s=b!=="uint8"&&b!=="uint8_clamped";return T.length&&typeof T!="string"||((T=S(T))[0]/=255,T[1]/=255,T[2]/=255),function(e){return e instanceof Uint8Array||e instanceof Uint8ClampedArray||!!(Array.isArray(e)&&(e[0]>1||e[0]===0)&&(e[1]>1||e[1]===0)&&(e[2]>1||e[2]===0)&&(!e[3]||e[3]>1))}(T)?(d[0]=T[0],d[1]=T[1],d[2]=T[2],d[3]=T[3]!=null?T[3]:255,s&&(d[0]/=255,d[1]/=255,d[2]/=255,d[3]/=255),d):(s?(d[0]=T[0],d[1]=T[1],d[2]=T[2],d[3]=T[3]!=null?T[3]:1):(d[0]=k(Math.floor(255*T[0]),0,255),d[1]=k(Math.floor(255*T[1]),0,255),d[2]=k(Math.floor(255*T[2]),0,255),d[3]=T[3]==null?255:k(Math.floor(255*T[3]),0,255)),d)}},90736:function(Q,z,t){var S=t(76857),k=t(10973),l=t(46775);Q.exports=function(b){var d,s,e=[],i=1;if(typeof b=="string")if(S[b])e=S[b].slice(),s="rgb";else if(b==="transparent")i=0,s="rgb",e=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(b)){var r=b.slice(1);i=1,(o=r.length)<=4?(e=[parseInt(r[0]+r[0],16),parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16)],o===4&&(i=parseInt(r[3]+r[3],16)/255)):(e=[parseInt(r[0]+r[1],16),parseInt(r[2]+r[3],16),parseInt(r[4]+r[5],16)],o===8&&(i=parseInt(r[6]+r[7],16)/255)),e[0]||(e[0]=0),e[1]||(e[1]=0),e[2]||(e[2]=0),s="rgb"}else if(d=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(b)){var n=d[1],a=n==="rgb";s=r=n.replace(/a$/,"");var o=r==="cmyk"?4:r==="gray"?1:3;e=d[2].trim().split(/\s*,\s*/).map(function(p,c){if(/%$/.test(p))return c===o?parseFloat(p)/100:r==="rgb"?255*parseFloat(p)/100:parseFloat(p);if(r[c]==="h"){if(/deg$/.test(p))return parseFloat(p);if(T[p]!==void 0)return T[p]}return parseFloat(p)}),n===r&&e.push(1),i=a||e[o]===void 0?1:e[o],e=e.slice(0,o)}else b.length>10&&/[0-9](?:\s|\/)/.test(b)&&(e=b.match(/([0-9]+)/g).map(function(p){return parseFloat(p)}),s=b.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(b))if(k(b)){var u=l(b.r,b.red,b.R,null);u!==null?(s="rgb",e=[u,l(b.g,b.green,b.G),l(b.b,b.blue,b.B)]):(s="hsl",e=[l(b.h,b.hue,b.H),l(b.s,b.saturation,b.S),l(b.l,b.lightness,b.L,b.b,b.brightness)]),i=l(b.a,b.alpha,b.opacity,1),b.opacity!=null&&(i/=100)}else(Array.isArray(b)||t.g.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(b))&&(e=[b[0],b[1],b[2]],s="rgb",i=b.length===4?b[3]:1);else s="rgb",e=[b>>>16,(65280&b)>>>8,255&b];return{space:s,values:e,alpha:i}};var T={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},36652:function(Q,z,t){var S=t(90736),k=t(80009),l=t(53435);Q.exports=function(T){var b,d=S(T);return d.space?((b=Array(3))[0]=l(d.values[0],0,255),b[1]=l(d.values[1],0,255),b[2]=l(d.values[2],0,255),d.space[0]==="h"&&(b=k.rgb(b)),b.push(l(d.alpha,0,1)),b):[]}},80009:function(Q,z,t){var S=t(6866);Q.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(k){var l,T,b,d,s,e=k[0]/360,i=k[1]/100,r=k[2]/100;if(i===0)return[s=255*r,s,s];l=2*r-(T=r<.5?r*(1+i):r+i-r*i),d=[0,0,0];for(var n=0;n<3;n++)(b=e+.3333333333333333*-(n-1))<0?b++:b>1&&b--,s=6*b<1?l+6*(T-l)*b:2*b<1?T:3*b<2?l+(T-l)*(.6666666666666666-b)*6:l,d[n]=255*s;return d}},S.hsl=function(k){var l,T,b=k[0]/255,d=k[1]/255,s=k[2]/255,e=Math.min(b,d,s),i=Math.max(b,d,s),r=i-e;return i===e?l=0:b===i?l=(d-s)/r:d===i?l=2+(s-b)/r:s===i&&(l=4+(b-d)/r),(l=Math.min(60*l,360))<0&&(l+=360),T=(e+i)/2,[l,100*(i===e?0:T<=.5?r/(i+e):r/(2-i-e)),100*T]}},6866:function(Q){Q.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},24138:function(Q){Q.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|)o.?tom(e|)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},72791:function(Q,z,t){Q.exports={parse:t(41004),stringify:t(53313)}},63625:function(Q,z,t){var S=t(40402);Q.exports={isSize:function(k){return/^[\d\.]/.test(k)||k.indexOf("/")!==-1||S.indexOf(k)!==-1}}},41004:function(Q,z,t){var S=t(90448),k=t(38732),l=t(41901),T=t(15659),b=t(96209),d=t(83794),s=t(99011),e=t(63625).isSize;Q.exports=r;var i=r.cache={};function r(a){if(typeof a!="string")throw new Error("Font argument must be a string.");if(i[a])return i[a];if(a==="")throw new Error("Cannot parse an empty string.");if(l.indexOf(a)!==-1)return i[a]={system:a};for(var o,u={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},p=s(a,/\s+/);o=p.shift();){if(k.indexOf(o)!==-1)return["style","variant","weight","stretch"].forEach(function(x){u[x]=o}),i[a]=u;if(b.indexOf(o)===-1)if(o!=="normal"&&o!=="small-caps")if(d.indexOf(o)===-1){if(T.indexOf(o)===-1){if(e(o)){var c=s(o,"/");if(u.size=c[0],c[1]!=null?u.lineHeight=n(c[1]):p[0]==="/"&&(p.shift(),u.lineHeight=n(p.shift())),!p.length)throw new Error("Missing required font-family.");return u.family=s(p.join(" "),/\s*,\s*/).map(S),i[a]=u}throw new Error("Unknown or unsupported font token: "+o)}u.weight=o}else u.stretch=o;else u.variant=o;else u.style=o}throw new Error("Missing required font-size.")}function n(a){var o=parseFloat(a);return o.toString()===a?o:a}},53313:function(Q,z,t){var S=t(71299),k=t(63625).isSize,l=a(t(38732)),T=a(t(41901)),b=a(t(15659)),d=a(t(96209)),s=a(t(83794)),e={normal:1,"small-caps":1},i={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},r="serif";function n(o,u){if(o&&!u[o]&&!l[o])throw Error("Unknown keyword `"+o+"`");return o}function a(o){for(var u={},p=0;p<o.length;p++)u[o[p]]=1;return u}Q.exports=function(o){if((o=S(o,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return o.system&&n(o.system,T),o.system;if(n(o.style,d),n(o.variant,e),n(o.weight,b),n(o.stretch,s),o.size==null&&(o.size="1rem"),typeof o.size=="number"&&(o.size+="px"),!k)throw Error("Bad size value `"+o.size+"`");o.family||(o.family=r),Array.isArray(o.family)&&(o.family.length||(o.family=[r]),o.family=o.family.map(function(p){return i[p]?p:'"'+p+'"'}).join(", "));var u=[];return u.push(o.style),o.variant!==o.style&&u.push(o.variant),o.weight!==o.variant&&o.weight!==o.style&&u.push(o.weight),o.stretch!==o.weight&&o.stretch!==o.variant&&o.stretch!==o.style&&u.push(o.stretch),u.push(o.size+(o.lineHeight==null||o.lineHeight==="normal"||o.lineHeight+""=="1"?"":"/"+o.lineHeight)),u.push(o.family),u.filter(Boolean).join(" ")}},55174:function(Q,z,t){var S,k=t(24582),l=t(10424),T=t(82527),b=t(19012),d=t(21780),s=t(16906),e=Function.prototype.bind,i=Object.defineProperty,r=Object.prototype.hasOwnProperty;S=function(n,a,o){var u,p=l(a)&&T(a.value);return delete(u=b(a)).writable,delete u.value,u.get=function(){return!o.overwriteDefinition&&r.call(this,n)?p:(a.value=e.call(p,o.resolveContext?o.resolveContext(this):this),i(this,n,a),this[n])},u},Q.exports=function(n){var a=d(arguments[1]);return k(a.resolveContext)&&T(a.resolveContext),s(n,function(o,u){return S(u,o,a)})}},62072:function(Q,z,t){var S=t(24582),k=t(84985),l=t(95879),T=t(21780),b=t(66741),d=Q.exports=function(s,e){var i,r,n,a,o;return arguments.length<2||typeof s!="string"?(a=e,e=s,s=null):a=arguments[2],S(s)?(i=b.call(s,"c"),r=b.call(s,"e"),n=b.call(s,"w")):(i=n=!0,r=!1),o={value:e,configurable:i,enumerable:r,writable:n},a?l(T(a),o):o};d.gs=function(s,e,i){var r,n,a,o;return typeof s!="string"?(a=i,i=e,e=s,s=null):a=arguments[3],S(e)?k(e)?S(i)?k(i)||(a=i,i=void 0):i=void 0:(a=e,e=i=void 0):e=void 0,S(s)?(r=b.call(s,"c"),n=b.call(s,"e")):(r=!0,n=!1),o={get:e,set:i,configurable:r,enumerable:n},a?l(T(a),o):o}},33064:function(Q,z,t){function S(n,a){return n<a?-1:n>a?1:n>=a?0:NaN}t.d(z,{j2:function(){return S},Fp:function(){return T},J6:function(){return d},TS:function(){return s},VV:function(){return e},w6:function(){return i},Sm:function(){return r}}),(k=S).length===1&&(l=k,k=function(n,a){return S(l(n),a)});var k,l;function T(n,a){var o,u,p=n.length,c=-1;if(a==null){for(;++c<p;)if((o=n[c])!=null&&o>=o)for(u=o;++c<p;)(o=n[c])!=null&&o>u&&(u=o)}else for(;++c<p;)if((o=a(n[c],c,n))!=null&&o>=o)for(u=o;++c<p;)(o=a(n[c],c,n))!=null&&o>u&&(u=o);return u}function b(n){return n===null?NaN:+n}function d(n,a){var o,u=n.length,p=u,c=-1,x=0;if(a==null)for(;++c<u;)isNaN(o=b(n[c]))?--p:x+=o;else for(;++c<u;)isNaN(o=b(a(n[c],c,n)))?--p:x+=o;if(p)return x/p}function s(n){for(var a,o,u,p=n.length,c=-1,x=0;++c<p;)x+=n[c].length;for(o=new Array(x);--p>=0;)for(a=(u=n[p]).length;--a>=0;)o[--x]=u[a];return o}function e(n,a){var o,u,p=n.length,c=-1;if(a==null){for(;++c<p;)if((o=n[c])!=null&&o>=o)for(u=o;++c<p;)(o=n[c])!=null&&u>o&&(u=o)}else for(;++c<p;)if((o=a(n[c],c,n))!=null&&o>=o)for(u=o;++c<p;)(o=a(n[c],c,n))!=null&&u>o&&(u=o);return u}function i(n,a,o){n=+n,a=+a,o=(p=arguments.length)<2?(a=n,n=0,1):p<3?1:+o;for(var u=-1,p=0|Math.max(0,Math.ceil((a-n)/o)),c=new Array(p);++u<p;)c[u]=n+u*o;return c}function r(n,a){var o,u=n.length,p=-1,c=0;if(a==null)for(;++p<u;)(o=+n[p])&&(c+=o);else for(;++p<u;)(o=+a(n[p],p,n))&&(c+=o);return c}},15140:function(Q,z,t){t.d(z,{UI:function(){return T},b1:function(){return b}});var S="$";function k(){}function l(a,o){var u=new k;if(a instanceof k)a.each(function(f,y){u.set(y,f)});else if(Array.isArray(a)){var p,c=-1,x=a.length;if(o==null)for(;++c<x;)u.set(c,a[c]);else for(;++c<x;)u.set(o(p=a[c],c,a),p)}else if(a)for(var g in a)u.set(g,a[g]);return u}k.prototype=l.prototype={constructor:k,has:function(a){return S+a in this},get:function(a){return this[S+a]},set:function(a,o){return this[S+a]=o,this},remove:function(a){var o=S+a;return o in this&&delete this[o]},clear:function(){for(var a in this)a[0]===S&&delete this[a]},keys:function(){var a=[];for(var o in this)o[0]===S&&a.push(o.slice(1));return a},values:function(){var a=[];for(var o in this)o[0]===S&&a.push(this[o]);return a},entries:function(){var a=[];for(var o in this)o[0]===S&&a.push({key:o.slice(1),value:this[o]});return a},size:function(){var a=0;for(var o in this)o[0]===S&&++a;return a},empty:function(){for(var a in this)if(a[0]===S)return!1;return!0},each:function(a){for(var o in this)o[0]===S&&a(this[o],o.slice(1),this)}};var T=l;function b(){var a,o,u,p=[],c=[];function x(f,y,v,m){if(y>=p.length)return a!=null&&f.sort(a),o!=null?o(f):f;for(var _,h,A,w=-1,E=f.length,L=p[y++],C=T(),P=v();++w<E;)(A=C.get(_=L(h=f[w])+""))?A.push(h):C.set(_,[h]);return C.each(function(D,G){m(P,G,x(D,y,v,m))}),P}function g(f,y){if(++y>p.length)return f;var v,m=c[y-1];return o!=null&&y>=p.length?v=f.entries():(v=[],f.each(function(_,h){v.push({key:h,values:g(_,y)})})),m!=null?v.sort(function(_,h){return m(_.key,h.key)}):v}return u={object:function(f){return x(f,0,d,s)},map:function(f){return x(f,0,e,i)},entries:function(f){return g(x(f,0,e,i),0)},key:function(f){return p.push(f),u},sortKeys:function(f){return c[p.length-1]=f,u},sortValues:function(f){return a=f,u},rollup:function(f){return o=f,u}}}function d(){return{}}function s(a,o,u){a[o]=u}function e(){return T()}function i(a,o,u){a.set(o,u)}function r(){}var n=T.prototype;r.prototype={constructor:r,has:n.has,add:function(a){return this[S+(a+="")]=a,this},remove:n.remove,clear:n.clear,values:n.keys,size:n.size,empty:n.empty,each:n.each}},49887:function(Q,z,t){function S(xe,ge){var Oe;function Ae(){var Te,se,le=Oe.length,ne=0,me=0;for(Te=0;Te<le;++Te)ne+=(se=Oe[Te]).x,me+=se.y;for(ne=ne/le-xe,me=me/le-ge,Te=0;Te<le;++Te)(se=Oe[Te]).x-=ne,se.y-=me}return xe==null&&(xe=0),ge==null&&(ge=0),Ae.initialize=function(Te){Oe=Te},Ae.x=function(Te){return arguments.length?(xe=+Te,Ae):xe},Ae.y=function(Te){return arguments.length?(ge=+Te,Ae):ge},Ae}function k(xe){return function(){return xe}}function l(){return 1e-6*(Math.random()-.5)}function T(xe,ge,Oe,Ae){if(isNaN(ge)||isNaN(Oe))return xe;var Te,se,le,ne,me,Ee,be,De,Ue,he=xe._root,ke={data:Ae},_e=xe._x0,Ce=xe._y0,Fe=xe._x1,Re=xe._y1;if(!he)return xe._root=ke,xe;for(;he.length;)if((Ee=ge>=(se=(_e+Fe)/2))?_e=se:Fe=se,(be=Oe>=(le=(Ce+Re)/2))?Ce=le:Re=le,Te=he,!(he=he[De=be<<1|Ee]))return Te[De]=ke,xe;if(ne=+xe._x.call(null,he.data),me=+xe._y.call(null,he.data),ge===ne&&Oe===me)return ke.next=he,Te?Te[De]=ke:xe._root=ke,xe;do Te=Te?Te[De]=new Array(4):xe._root=new Array(4),(Ee=ge>=(se=(_e+Fe)/2))?_e=se:Fe=se,(be=Oe>=(le=(Ce+Re)/2))?Ce=le:Re=le;while((De=be<<1|Ee)==(Ue=(me>=le)<<1|ne>=se));return Te[Ue]=he,Te[De]=ke,xe}function b(xe,ge,Oe,Ae,Te){this.node=xe,this.x0=ge,this.y0=Oe,this.x1=Ae,this.y1=Te}function d(xe){return xe[0]}function s(xe){return xe[1]}function e(xe,ge,Oe){var Ae=new i(ge??d,Oe??s,NaN,NaN,NaN,NaN);return xe==null?Ae:Ae.addAll(xe)}function i(xe,ge,Oe,Ae,Te,se){this._x=xe,this._y=ge,this._x0=Oe,this._y0=Ae,this._x1=Te,this._y1=se,this._root=void 0}function r(xe){for(var ge={data:xe.data},Oe=ge;xe=xe.next;)Oe=Oe.next={data:xe.data};return ge}t.r(z),t.d(z,{forceCenter:function(){return S},forceCollide:function(){return u},forceLink:function(){return g},forceManyBody:function(){return ce},forceRadial:function(){return pe},forceSimulation:function(){return oe},forceX:function(){return ve},forceY:function(){return we}});var n=e.prototype=i.prototype;function a(xe){return xe.x+xe.vx}function o(xe){return xe.y+xe.vy}function u(xe){var ge,Oe,Ae=1,Te=1;function se(){for(var me,Ee,be,De,Ue,he,ke,_e=ge.length,Ce=0;Ce<Te;++Ce)for(Ee=e(ge,a,o).visitAfter(le),me=0;me<_e;++me)be=ge[me],he=Oe[be.index],ke=he*he,De=be.x+be.vx,Ue=be.y+be.vy,Ee.visit(Fe);function Fe(Re,He,Ge,$e,st){var Ke=Re.data,gt=Re.r,mt=he+gt;if(!Ke)return He>De+mt||$e<De-mt||Ge>Ue+mt||st<Ue-mt;if(Ke.index>be.index){var at=De-Ke.x-Ke.vx,rt=Ue-Ke.y-Ke.vy,xt=at*at+rt*rt;xt<mt*mt&&(at===0&&(xt+=(at=l())*at),rt===0&&(xt+=(rt=l())*rt),xt=(mt-(xt=Math.sqrt(xt)))/xt*Ae,be.vx+=(at*=xt)*(mt=(gt*=gt)/(ke+gt)),be.vy+=(rt*=xt)*mt,Ke.vx-=at*(mt=1-mt),Ke.vy-=rt*mt)}}}function le(me){if(me.data)return me.r=Oe[me.data.index];for(var Ee=me.r=0;Ee<4;++Ee)me[Ee]&&me[Ee].r>me.r&&(me.r=me[Ee].r)}function ne(){if(ge){var me,Ee,be=ge.length;for(Oe=new Array(be),me=0;me<be;++me)Ee=ge[me],Oe[Ee.index]=+xe(Ee,me,ge)}}return typeof xe!="function"&&(xe=k(xe==null?1:+xe)),se.initialize=function(me){ge=me,ne()},se.iterations=function(me){return arguments.length?(Te=+me,se):Te},se.strength=function(me){return arguments.length?(Ae=+me,se):Ae},se.radius=function(me){return arguments.length?(xe=typeof me=="function"?me:k(+me),ne(),se):xe},se}n.copy=function(){var xe,ge,Oe=new i(this._x,this._y,this._x0,this._y0,this._x1,this._y1),Ae=this._root;if(!Ae)return Oe;if(!Ae.length)return Oe._root=r(Ae),Oe;for(xe=[{source:Ae,target:Oe._root=new Array(4)}];Ae=xe.pop();)for(var Te=0;Te<4;++Te)(ge=Ae.source[Te])&&(ge.length?xe.push({source:ge,target:Ae.target[Te]=new Array(4)}):Ae.target[Te]=r(ge));return Oe},n.add=function(xe){var ge=+this._x.call(null,xe),Oe=+this._y.call(null,xe);return T(this.cover(ge,Oe),ge,Oe,xe)},n.addAll=function(xe){var ge,Oe,Ae,Te,se=xe.length,le=new Array(se),ne=new Array(se),me=1/0,Ee=1/0,be=-1/0,De=-1/0;for(Oe=0;Oe<se;++Oe)isNaN(Ae=+this._x.call(null,ge=xe[Oe]))||isNaN(Te=+this._y.call(null,ge))||(le[Oe]=Ae,ne[Oe]=Te,Ae<me&&(me=Ae),Ae>be&&(be=Ae),Te<Ee&&(Ee=Te),Te>De&&(De=Te));if(me>be||Ee>De)return this;for(this.cover(me,Ee).cover(be,De),Oe=0;Oe<se;++Oe)T(this,le[Oe],ne[Oe],xe[Oe]);return this},n.cover=function(xe,ge){if(isNaN(xe=+xe)||isNaN(ge=+ge))return this;var Oe=this._x0,Ae=this._y0,Te=this._x1,se=this._y1;if(isNaN(Oe))Te=(Oe=Math.floor(xe))+1,se=(Ae=Math.floor(ge))+1;else{for(var le,ne,me=Te-Oe,Ee=this._root;Oe>xe||xe>=Te||Ae>ge||ge>=se;)switch(ne=(ge<Ae)<<1|xe<Oe,(le=new Array(4))[ne]=Ee,Ee=le,me*=2,ne){case 0:Te=Oe+me,se=Ae+me;break;case 1:Oe=Te-me,se=Ae+me;break;case 2:Te=Oe+me,Ae=se-me;break;case 3:Oe=Te-me,Ae=se-me}this._root&&this._root.length&&(this._root=Ee)}return this._x0=Oe,this._y0=Ae,this._x1=Te,this._y1=se,this},n.data=function(){var xe=[];return this.visit(function(ge){if(!ge.length)do xe.push(ge.data);while(ge=ge.next)}),xe},n.extent=function(xe){return arguments.length?this.cover(+xe[0][0],+xe[0][1]).cover(+xe[1][0],+xe[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n.find=function(xe,ge,Oe){var Ae,Te,se,le,ne,me,Ee,be=this._x0,De=this._y0,Ue=this._x1,he=this._y1,ke=[],_e=this._root;for(_e&&ke.push(new b(_e,be,De,Ue,he)),Oe==null?Oe=1/0:(be=xe-Oe,De=ge-Oe,Ue=xe+Oe,he=ge+Oe,Oe*=Oe);me=ke.pop();)if(!(!(_e=me.node)||(Te=me.x0)>Ue||(se=me.y0)>he||(le=me.x1)<be||(ne=me.y1)<De))if(_e.length){var Ce=(Te+le)/2,Fe=(se+ne)/2;ke.push(new b(_e[3],Ce,Fe,le,ne),new b(_e[2],Te,Fe,Ce,ne),new b(_e[1],Ce,se,le,Fe),new b(_e[0],Te,se,Ce,Fe)),(Ee=(ge>=Fe)<<1|xe>=Ce)&&(me=ke[ke.length-1],ke[ke.length-1]=ke[ke.length-1-Ee],ke[ke.length-1-Ee]=me)}else{var Re=xe-+this._x.call(null,_e.data),He=ge-+this._y.call(null,_e.data),Ge=Re*Re+He*He;if(Ge<Oe){var $e=Math.sqrt(Oe=Ge);be=xe-$e,De=ge-$e,Ue=xe+$e,he=ge+$e,Ae=_e.data}}return Ae},n.remove=function(xe){if(isNaN(se=+this._x.call(null,xe))||isNaN(le=+this._y.call(null,xe)))return this;var ge,Oe,Ae,Te,se,le,ne,me,Ee,be,De,Ue,he=this._root,ke=this._x0,_e=this._y0,Ce=this._x1,Fe=this._y1;if(!he)return this;if(he.length)for(;;){if((Ee=se>=(ne=(ke+Ce)/2))?ke=ne:Ce=ne,(be=le>=(me=(_e+Fe)/2))?_e=me:Fe=me,ge=he,!(he=he[De=be<<1|Ee]))return this;if(!he.length)break;(ge[De+1&3]||ge[De+2&3]||ge[De+3&3])&&(Oe=ge,Ue=De)}for(;he.data!==xe;)if(Ae=he,!(he=he.next))return this;return(Te=he.next)&&delete he.next,Ae?(Te?Ae.next=Te:delete Ae.next,this):ge?(Te?ge[De]=Te:delete ge[De],(he=ge[0]||ge[1]||ge[2]||ge[3])&&he===(ge[3]||ge[2]||ge[1]||ge[0])&&!he.length&&(Oe?Oe[Ue]=he:this._root=he),this):(this._root=Te,this)},n.removeAll=function(xe){for(var ge=0,Oe=xe.length;ge<Oe;++ge)this.remove(xe[ge]);return this},n.root=function(){return this._root},n.size=function(){var xe=0;return this.visit(function(ge){if(!ge.length)do++xe;while(ge=ge.next)}),xe},n.visit=function(xe){var ge,Oe,Ae,Te,se,le,ne=[],me=this._root;for(me&&ne.push(new b(me,this._x0,this._y0,this._x1,this._y1));ge=ne.pop();)if(!xe(me=ge.node,Ae=ge.x0,Te=ge.y0,se=ge.x1,le=ge.y1)&&me.length){var Ee=(Ae+se)/2,be=(Te+le)/2;(Oe=me[3])&&ne.push(new b(Oe,Ee,be,se,le)),(Oe=me[2])&&ne.push(new b(Oe,Ae,be,Ee,le)),(Oe=me[1])&&ne.push(new b(Oe,Ee,Te,se,be)),(Oe=me[0])&&ne.push(new b(Oe,Ae,Te,Ee,be))}return this},n.visitAfter=function(xe){var ge,Oe=[],Ae=[];for(this._root&&Oe.push(new b(this._root,this._x0,this._y0,this._x1,this._y1));ge=Oe.pop();){var Te=ge.node;if(Te.length){var se,le=ge.x0,ne=ge.y0,me=ge.x1,Ee=ge.y1,be=(le+me)/2,De=(ne+Ee)/2;(se=Te[0])&&Oe.push(new b(se,le,ne,be,De)),(se=Te[1])&&Oe.push(new b(se,be,ne,me,De)),(se=Te[2])&&Oe.push(new b(se,le,De,be,Ee)),(se=Te[3])&&Oe.push(new b(se,be,De,me,Ee))}Ae.push(ge)}for(;ge=Ae.pop();)xe(ge.node,ge.x0,ge.y0,ge.x1,ge.y1);return this},n.x=function(xe){return arguments.length?(this._x=xe,this):this._x},n.y=function(xe){return arguments.length?(this._y=xe,this):this._y};var p=t(15140);function c(xe){return xe.index}function x(xe,ge){var Oe=xe.get(ge);if(!Oe)throw new Error("missing: "+ge);return Oe}function g(xe){var ge,Oe,Ae,Te,se,le=c,ne=function(ke){return 1/Math.min(Te[ke.source.index],Te[ke.target.index])},me=k(30),Ee=1;function be(ke){for(var _e=0,Ce=xe.length;_e<Ee;++_e)for(var Fe,Re,He,Ge,$e,st,Ke,gt=0;gt<Ce;++gt)Re=(Fe=xe[gt]).source,Ge=(He=Fe.target).x+He.vx-Re.x-Re.vx||l(),$e=He.y+He.vy-Re.y-Re.vy||l(),Ge*=st=((st=Math.sqrt(Ge*Ge+$e*$e))-Oe[gt])/st*ke*ge[gt],$e*=st,He.vx-=Ge*(Ke=se[gt]),He.vy-=$e*Ke,Re.vx+=Ge*(Ke=1-Ke),Re.vy+=$e*Ke}function De(){if(Ae){var ke,_e,Ce=Ae.length,Fe=xe.length,Re=(0,p.UI)(Ae,le);for(ke=0,Te=new Array(Ce);ke<Fe;++ke)(_e=xe[ke]).index=ke,typeof _e.source!="object"&&(_e.source=x(Re,_e.source)),typeof _e.target!="object"&&(_e.target=x(Re,_e.target)),Te[_e.source.index]=(Te[_e.source.index]||0)+1,Te[_e.target.index]=(Te[_e.target.index]||0)+1;for(ke=0,se=new Array(Fe);ke<Fe;++ke)_e=xe[ke],se[ke]=Te[_e.source.index]/(Te[_e.source.index]+Te[_e.target.index]);ge=new Array(Fe),Ue(),Oe=new Array(Fe),he()}}function Ue(){if(Ae)for(var ke=0,_e=xe.length;ke<_e;++ke)ge[ke]=+ne(xe[ke],ke,xe)}function he(){if(Ae)for(var ke=0,_e=xe.length;ke<_e;++ke)Oe[ke]=+me(xe[ke],ke,xe)}return xe==null&&(xe=[]),be.initialize=function(ke){Ae=ke,De()},be.links=function(ke){return arguments.length?(xe=ke,De(),be):xe},be.id=function(ke){return arguments.length?(le=ke,be):le},be.iterations=function(ke){return arguments.length?(Ee=+ke,be):Ee},be.strength=function(ke){return arguments.length?(ne=typeof ke=="function"?ke:k(+ke),Ue(),be):ne},be.distance=function(ke){return arguments.length?(me=typeof ke=="function"?ke:k(+ke),he(),be):me},be}var f={value:function(){}};function y(){for(var xe,ge=0,Oe=arguments.length,Ae={};ge<Oe;++ge){if(!(xe=arguments[ge]+"")||xe in Ae||/[\s.]/.test(xe))throw new Error("illegal type: "+xe);Ae[xe]=[]}return new v(Ae)}function v(xe){this._=xe}function m(xe,ge){for(var Oe,Ae=0,Te=xe.length;Ae<Te;++Ae)if((Oe=xe[Ae]).name===ge)return Oe.value}function _(xe,ge,Oe){for(var Ae=0,Te=xe.length;Ae<Te;++Ae)if(xe[Ae].name===ge){xe[Ae]=f,xe=xe.slice(0,Ae).concat(xe.slice(Ae+1));break}return Oe!=null&&xe.push({name:ge,value:Oe}),xe}v.prototype=y.prototype={constructor:v,on:function(xe,ge){var Oe,Ae,Te=this._,se=(Ae=Te,(xe+"").trim().split(/^|\s+/).map(function(me){var Ee="",be=me.indexOf(".");if(be>=0&&(Ee=me.slice(be+1),me=me.slice(0,be)),me&&!Ae.hasOwnProperty(me))throw new Error("unknown type: "+me);return{type:me,name:Ee}})),le=-1,ne=se.length;if(!(arguments.length<2)){if(ge!=null&&typeof ge!="function")throw new Error("invalid callback: "+ge);for(;++le<ne;)if(Oe=(xe=se[le]).type)Te[Oe]=_(Te[Oe],xe.name,ge);else if(ge==null)for(Oe in Te)Te[Oe]=_(Te[Oe],xe.name,null);return this}for(;++le<ne;)if((Oe=(xe=se[le]).type)&&(Oe=m(Te[Oe],xe.name)))return Oe},copy:function(){var xe={},ge=this._;for(var Oe in ge)xe[Oe]=ge[Oe].slice();return new v(xe)},call:function(xe,ge){if((Oe=arguments.length-2)>0)for(var Oe,Ae,Te=new Array(Oe),se=0;se<Oe;++se)Te[se]=arguments[se+2];if(!this._.hasOwnProperty(xe))throw new Error("unknown type: "+xe);for(se=0,Oe=(Ae=this._[xe]).length;se<Oe;++se)Ae[se].value.apply(ge,Te)},apply:function(xe,ge,Oe){if(!this._.hasOwnProperty(xe))throw new Error("unknown type: "+xe);for(var Ae=this._[xe],Te=0,se=Ae.length;Te<se;++Te)Ae[Te].value.apply(ge,Oe)}};var h,A,w=y,E=0,L=0,C=0,P=1e3,D=0,G=0,I=0,H=typeof performance=="object"&&performance.now?performance:Date,N=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(xe){setTimeout(xe,17)};function F(){return G||(N(V),G=H.now()+I)}function V(){G=0}function q(){this._call=this._time=this._next=null}function te(xe,ge,Oe){var Ae=new q;return Ae.restart(xe,ge,Oe),Ae}function $(){G=(D=H.now())+I,E=L=0;try{(function(){F(),++E;for(var xe,ge=h;ge;)(xe=G-ge._time)>=0&&ge._call.call(null,xe),ge=ge._next;--E})()}finally{E=0,function(){for(var xe,ge,Oe=h,Ae=1/0;Oe;)Oe._call?(Ae>Oe._time&&(Ae=Oe._time),xe=Oe,Oe=Oe._next):(ge=Oe._next,Oe._next=null,Oe=xe?xe._next=ge:h=ge);A=xe,Z(Ae)}(),G=0}}function W(){var xe=H.now(),ge=xe-D;ge>P&&(I-=ge,D=xe)}function Z(xe){E||(L&&(L=clearTimeout(L)),xe-G>24?(xe<1/0&&(L=setTimeout($,xe-H.now()-I)),C&&(C=clearInterval(C))):(C||(D=H.now(),C=setInterval(W,P)),E=1,N($)))}function J(xe){return xe.x}function ee(xe){return xe.y}q.prototype=te.prototype={constructor:q,restart:function(xe,ge,Oe){if(typeof xe!="function")throw new TypeError("callback is not a function");Oe=(Oe==null?F():+Oe)+(ge==null?0:+ge),this._next||A===this||(A?A._next=this:h=this,A=this),this._call=xe,this._time=Oe,Z()},stop:function(){this._call&&(this._call=null,this._time=1/0,Z())}};var re=10,ae=Math.PI*(3-Math.sqrt(5));function oe(xe){var ge,Oe=1,Ae=.001,Te=1-Math.pow(Ae,1/300),se=0,le=.6,ne=(0,p.UI)(),me=te(be),Ee=w("tick","end");function be(){De(),Ee.call("tick",ge),Oe<Ae&&(me.stop(),Ee.call("end",ge))}function De(ke){var _e,Ce,Fe=xe.length;ke===void 0&&(ke=1);for(var Re=0;Re<ke;++Re)for(Oe+=(se-Oe)*Te,ne.each(function(He){He(Oe)}),_e=0;_e<Fe;++_e)(Ce=xe[_e]).fx==null?Ce.x+=Ce.vx*=le:(Ce.x=Ce.fx,Ce.vx=0),Ce.fy==null?Ce.y+=Ce.vy*=le:(Ce.y=Ce.fy,Ce.vy=0);return ge}function Ue(){for(var ke,_e=0,Ce=xe.length;_e<Ce;++_e){if((ke=xe[_e]).index=_e,ke.fx!=null&&(ke.x=ke.fx),ke.fy!=null&&(ke.y=ke.fy),isNaN(ke.x)||isNaN(ke.y)){var Fe=re*Math.sqrt(_e),Re=_e*ae;ke.x=Fe*Math.cos(Re),ke.y=Fe*Math.sin(Re)}(isNaN(ke.vx)||isNaN(ke.vy))&&(ke.vx=ke.vy=0)}}function he(ke){return ke.initialize&&ke.initialize(xe),ke}return xe==null&&(xe=[]),Ue(),ge={tick:De,restart:function(){return me.restart(be),ge},stop:function(){return me.stop(),ge},nodes:function(ke){return arguments.length?(xe=ke,Ue(),ne.each(he),ge):xe},alpha:function(ke){return arguments.length?(Oe=+ke,ge):Oe},alphaMin:function(ke){return arguments.length?(Ae=+ke,ge):Ae},alphaDecay:function(ke){return arguments.length?(Te=+ke,ge):+Te},alphaTarget:function(ke){return arguments.length?(se=+ke,ge):se},velocityDecay:function(ke){return arguments.length?(le=1-ke,ge):1-le},force:function(ke,_e){return arguments.length>1?(_e==null?ne.remove(ke):ne.set(ke,he(_e)),ge):ne.get(ke)},find:function(ke,_e,Ce){var Fe,Re,He,Ge,$e,st=0,Ke=xe.length;for(Ce==null?Ce=1/0:Ce*=Ce,st=0;st<Ke;++st)(He=(Fe=ke-(Ge=xe[st]).x)*Fe+(Re=_e-Ge.y)*Re)<Ce&&($e=Ge,Ce=He);return $e},on:function(ke,_e){return arguments.length>1?(Ee.on(ke,_e),ge):Ee.on(ke)}}}function ce(){var xe,ge,Oe,Ae,Te=k(-30),se=1,le=1/0,ne=.81;function me(Ue){var he,ke=xe.length,_e=e(xe,J,ee).visitAfter(be);for(Oe=Ue,he=0;he<ke;++he)ge=xe[he],_e.visit(De)}function Ee(){if(xe){var Ue,he,ke=xe.length;for(Ae=new Array(ke),Ue=0;Ue<ke;++Ue)he=xe[Ue],Ae[he.index]=+Te(he,Ue,xe)}}function be(Ue){var he,ke,_e,Ce,Fe,Re=0,He=0;if(Ue.length){for(_e=Ce=Fe=0;Fe<4;++Fe)(he=Ue[Fe])&&(ke=Math.abs(he.value))&&(Re+=he.value,He+=ke,_e+=ke*he.x,Ce+=ke*he.y);Ue.x=_e/He,Ue.y=Ce/He}else{(he=Ue).x=he.data.x,he.y=he.data.y;do Re+=Ae[he.data.index];while(he=he.next)}Ue.value=Re}function De(Ue,he,ke,_e){if(!Ue.value)return!0;var Ce=Ue.x-ge.x,Fe=Ue.y-ge.y,Re=_e-he,He=Ce*Ce+Fe*Fe;if(Re*Re/ne<He)return He<le&&(Ce===0&&(He+=(Ce=l())*Ce),Fe===0&&(He+=(Fe=l())*Fe),He<se&&(He=Math.sqrt(se*He)),ge.vx+=Ce*Ue.value*Oe/He,ge.vy+=Fe*Ue.value*Oe/He),!0;if(!(Ue.length||He>=le)){(Ue.data!==ge||Ue.next)&&(Ce===0&&(He+=(Ce=l())*Ce),Fe===0&&(He+=(Fe=l())*Fe),He<se&&(He=Math.sqrt(se*He)));do Ue.data!==ge&&(Re=Ae[Ue.data.index]*Oe/He,ge.vx+=Ce*Re,ge.vy+=Fe*Re);while(Ue=Ue.next)}}return me.initialize=function(Ue){xe=Ue,Ee()},me.strength=function(Ue){return arguments.length?(Te=typeof Ue=="function"?Ue:k(+Ue),Ee(),me):Te},me.distanceMin=function(Ue){return arguments.length?(se=Ue*Ue,me):Math.sqrt(se)},me.distanceMax=function(Ue){return arguments.length?(le=Ue*Ue,me):Math.sqrt(le)},me.theta=function(Ue){return arguments.length?(ne=Ue*Ue,me):Math.sqrt(ne)},me}function pe(xe,ge,Oe){var Ae,Te,se,le=k(.1);function ne(Ee){for(var be=0,De=Ae.length;be<De;++be){var Ue=Ae[be],he=Ue.x-ge||1e-6,ke=Ue.y-Oe||1e-6,_e=Math.sqrt(he*he+ke*ke),Ce=(se[be]-_e)*Te[be]*Ee/_e;Ue.vx+=he*Ce,Ue.vy+=ke*Ce}}function me(){if(Ae){var Ee,be=Ae.length;for(Te=new Array(be),se=new Array(be),Ee=0;Ee<be;++Ee)se[Ee]=+xe(Ae[Ee],Ee,Ae),Te[Ee]=isNaN(se[Ee])?0:+le(Ae[Ee],Ee,Ae)}}return typeof xe!="function"&&(xe=k(+xe)),ge==null&&(ge=0),Oe==null&&(Oe=0),ne.initialize=function(Ee){Ae=Ee,me()},ne.strength=function(Ee){return arguments.length?(le=typeof Ee=="function"?Ee:k(+Ee),me(),ne):le},ne.radius=function(Ee){return arguments.length?(xe=typeof Ee=="function"?Ee:k(+Ee),me(),ne):xe},ne.x=function(Ee){return arguments.length?(ge=+Ee,ne):ge},ne.y=function(Ee){return arguments.length?(Oe=+Ee,ne):Oe},ne}function ve(xe){var ge,Oe,Ae,Te=k(.1);function se(ne){for(var me,Ee=0,be=ge.length;Ee<be;++Ee)(me=ge[Ee]).vx+=(Ae[Ee]-me.x)*Oe[Ee]*ne}function le(){if(ge){var ne,me=ge.length;for(Oe=new Array(me),Ae=new Array(me),ne=0;ne<me;++ne)Oe[ne]=isNaN(Ae[ne]=+xe(ge[ne],ne,ge))?0:+Te(ge[ne],ne,ge)}}return typeof xe!="function"&&(xe=k(xe==null?0:+xe)),se.initialize=function(ne){ge=ne,le()},se.strength=function(ne){return arguments.length?(Te=typeof ne=="function"?ne:k(+ne),le(),se):Te},se.x=function(ne){return arguments.length?(xe=typeof ne=="function"?ne:k(+ne),le(),se):xe},se}function we(xe){var ge,Oe,Ae,Te=k(.1);function se(ne){for(var me,Ee=0,be=ge.length;Ee<be;++Ee)(me=ge[Ee]).vy+=(Ae[Ee]-me.y)*Oe[Ee]*ne}function le(){if(ge){var ne,me=ge.length;for(Oe=new Array(me),Ae=new Array(me),ne=0;ne<me;++ne)Oe[ne]=isNaN(Ae[ne]=+xe(ge[ne],ne,ge))?0:+Te(ge[ne],ne,ge)}}return typeof xe!="function"&&(xe=k(xe==null?0:+xe)),se.initialize=function(ne){ge=ne,le()},se.strength=function(ne){return arguments.length?(Te=typeof ne=="function"?ne:k(+ne),le(),se):Te},se.y=function(ne){return arguments.length?(xe=typeof ne=="function"?ne:k(+ne),le(),se):xe},se}},60721:function(Q,z,t){function S(u,p){if((c=(u=p?u.toExponential(p-1):u.toExponential()).indexOf("e"))<0)return null;var c,x=u.slice(0,c);return[x.length>1?x[0]+x.slice(2):x,+u.slice(c+1)]}t.d(z,{WU:function(){return r},FF:function(){return o}});var k,l=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function T(u){if(!(p=l.exec(u)))throw new Error("invalid format: "+u);var p;return new b({fill:p[1],align:p[2],sign:p[3],symbol:p[4],zero:p[5],width:p[6],comma:p[7],precision:p[8]&&p[8].slice(1),trim:p[9],type:p[10]})}function b(u){this.fill=u.fill===void 0?" ":u.fill+"",this.align=u.align===void 0?">":u.align+"",this.sign=u.sign===void 0?"-":u.sign+"",this.symbol=u.symbol===void 0?"":u.symbol+"",this.zero=!!u.zero,this.width=u.width===void 0?void 0:+u.width,this.comma=!!u.comma,this.precision=u.precision===void 0?void 0:+u.precision,this.trim=!!u.trim,this.type=u.type===void 0?"":u.type+""}function d(u,p){var c=S(u,p);if(!c)return u+"";var x=c[0],g=c[1];return g<0?"0."+new Array(-g).join("0")+x:x.length>g+1?x.slice(0,g+1)+"."+x.slice(g+1):x+new Array(g-x.length+2).join("0")}T.prototype=b.prototype,b.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var s={"%":function(u,p){return(100*u).toFixed(p)},b:function(u){return Math.round(u).toString(2)},c:function(u){return u+""},d:function(u){return Math.abs(u=Math.round(u))>=1e21?u.toLocaleString("en").replace(/,/g,""):u.toString(10)},e:function(u,p){return u.toExponential(p)},f:function(u,p){return u.toFixed(p)},g:function(u,p){return u.toPrecision(p)},o:function(u){return Math.round(u).toString(8)},p:function(u,p){return d(100*u,p)},r:d,s:function(u,p){var c=S(u,p);if(!c)return u+"";var x=c[0],g=c[1],f=g-(k=3*Math.max(-8,Math.min(8,Math.floor(g/3))))+1,y=x.length;return f===y?x:f>y?x+new Array(f-y+1).join("0"):f>0?x.slice(0,f)+"."+x.slice(f):"0."+new Array(1-f).join("0")+S(u,Math.max(0,p+f-1))[0]},X:function(u){return Math.round(u).toString(16).toUpperCase()},x:function(u){return Math.round(u).toString(16)}};function e(u){return u}var i,r,n=Array.prototype.map,a=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function o(u){var p,c,x=u.grouping===void 0||u.thousands===void 0?e:(p=n.call(u.grouping,Number),c=u.thousands+"",function(w,E){for(var L=w.length,C=[],P=0,D=p[0],G=0;L>0&&D>0&&(G+D+1>E&&(D=Math.max(1,E-G)),C.push(w.substring(L-=D,L+D)),!((G+=D+1)>E));)D=p[P=(P+1)%p.length];return C.reverse().join(c)}),g=u.currency===void 0?"":u.currency[0]+"",f=u.currency===void 0?"":u.currency[1]+"",y=u.decimal===void 0?".":u.decimal+"",v=u.numerals===void 0?e:function(w){return function(E){return E.replace(/[0-9]/g,function(L){return w[+L]})}}(n.call(u.numerals,String)),m=u.percent===void 0?"%":u.percent+"",_=u.minus===void 0?"-":u.minus+"",h=u.nan===void 0?"NaN":u.nan+"";function A(w){var E=(w=T(w)).fill,L=w.align,C=w.sign,P=w.symbol,D=w.zero,G=w.width,I=w.comma,H=w.precision,N=w.trim,F=w.type;F==="n"?(I=!0,F="g"):s[F]||(H===void 0&&(H=12),N=!0,F="g"),(D||E==="0"&&L==="=")&&(D=!0,E="0",L="=");var V=P==="$"?g:P==="#"&&/[boxX]/.test(F)?"0"+F.toLowerCase():"",q=P==="$"?f:/[%p]/.test(F)?m:"",te=s[F],$=/[defgprs%]/.test(F);function W(Z){var J,ee,re,ae=V,oe=q;if(F==="c")oe=te(Z)+oe,Z="";else{var ce=(Z=+Z)<0||1/Z<0;if(Z=isNaN(Z)?h:te(Math.abs(Z),H),N&&(Z=function(we){e:for(var xe,ge=we.length,Oe=1,Ae=-1;Oe<ge;++Oe)switch(we[Oe]){case".":Ae=xe=Oe;break;case"0":Ae===0&&(Ae=Oe),xe=Oe;break;default:if(!+we[Oe])break e;Ae>0&&(Ae=0)}return Ae>0?we.slice(0,Ae)+we.slice(xe+1):we}(Z)),ce&&+Z==0&&C!=="+"&&(ce=!1),ae=(ce?C==="("?C:_:C==="-"||C==="("?"":C)+ae,oe=(F==="s"?a[8+k/3]:"")+oe+(ce&&C==="("?")":""),$){for(J=-1,ee=Z.length;++J<ee;)if(48>(re=Z.charCodeAt(J))||re>57){oe=(re===46?y+Z.slice(J+1):Z.slice(J))+oe,Z=Z.slice(0,J);break}}}I&&!D&&(Z=x(Z,1/0));var pe=ae.length+Z.length+oe.length,ve=pe<G?new Array(G-pe+1).join(E):"";switch(I&&D&&(Z=x(ve+Z,ve.length?G-oe.length:1/0),ve=""),L){case"<":Z=ae+Z+oe+ve;break;case"=":Z=ae+ve+Z+oe;break;case"^":Z=ve.slice(0,pe=ve.length>>1)+ae+Z+oe+ve.slice(pe);break;default:Z=ve+ae+Z+oe}return v(Z)}return H=H===void 0?6:/[gprs]/.test(F)?Math.max(1,Math.min(21,H)):Math.max(0,Math.min(20,H)),W.toString=function(){return w+""},W}return{format:A,formatPrefix:function(w,E){var L,C=A(((w=T(w)).type="f",w)),P=3*Math.max(-8,Math.min(8,Math.floor((L=E,((L=S(Math.abs(L)))?L[1]:NaN)/3)))),D=Math.pow(10,-P),G=a[8+P/3];return function(I){return C(D*I)+G}}}}i=o({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),r=i.format,i.formatPrefix},65704:function(Q,z,t){t.r(z),t.d(z,{geoAiry:function(){return I},geoAiryRaw:function(){return G},geoAitoff:function(){return N},geoAitoffRaw:function(){return H},geoArmadillo:function(){return V},geoArmadilloRaw:function(){return F},geoAugust:function(){return te},geoAugustRaw:function(){return q},geoBaker:function(){return J},geoBakerRaw:function(){return Z},geoBerghaus:function(){return ae},geoBerghausRaw:function(){return re},geoBertin1953:function(){return Oe},geoBertin1953Raw:function(){return ge},geoBoggs:function(){return be},geoBoggsRaw:function(){return Ee},geoBonne:function(){return _e},geoBonneRaw:function(){return ke},geoBottomley:function(){return Fe},geoBottomleyRaw:function(){return Ce},geoBromley:function(){return He},geoBromleyRaw:function(){return Re},geoChamberlin:function(){return xt},geoChamberlinAfrica:function(){return rt},geoChamberlinRaw:function(){return mt},geoCollignon:function(){return wt},geoCollignonRaw:function(){return Tt},geoCraig:function(){return Ct},geoCraigRaw:function(){return Ot},geoCraster:function(){return Ve},geoCrasterRaw:function(){return Xe},geoCylindricalEqualArea:function(){return nt},geoCylindricalEqualAreaRaw:function(){return We},geoCylindricalStereographic:function(){return Ie},geoCylindricalStereographicRaw:function(){return ot},geoEckert1:function(){return et},geoEckert1Raw:function(){return ze},geoEckert2:function(){return dt},geoEckert2Raw:function(){return tt},geoEckert3:function(){return vt},geoEckert3Raw:function(){return pt},geoEckert4:function(){return kt},geoEckert4Raw:function(){return ct},geoEckert5:function(){return ft},geoEckert5Raw:function(){return ut},geoEckert6:function(){return It},geoEckert6Raw:function(){return bt},geoEisenlohr:function(){return Jt},geoEisenlohrRaw:function(){return Rt},geoFahey:function(){return jt},geoFaheyRaw:function(){return Wt},geoFoucaut:function(){return xn},geoFoucautRaw:function(){return fn},geoFoucautSinusoidal:function(){return Ht},geoFoucautSinusoidalRaw:function(){return un},geoGilbert:function(){return dn},geoGingery:function(){return Pn},geoGingeryRaw:function(){return Mn},geoGinzburg4:function(){return ar},geoGinzburg4Raw:function(){return $n},geoGinzburg5:function(){return Gn},geoGinzburg5Raw:function(){return Qn},geoGinzburg6:function(){return Bt},geoGinzburg6Raw:function(){return dr},geoGinzburg8:function(){return cn},geoGinzburg8Raw:function(){return tn},geoGinzburg9:function(){return kn},geoGinzburg9Raw:function(){return gn},geoGringorten:function(){return Dn},geoGringortenQuincuncial:function(){return Sa},geoGringortenRaw:function(){return In},geoGuyou:function(){return At},geoGuyouRaw:function(){return bn},geoHammer:function(){return ve},geoHammerRaw:function(){return ce},geoHammerRetroazimuthal:function(){return yn},geoHammerRetroazimuthalRaw:function(){return $t},geoHealpix:function(){return jn},geoHealpixRaw:function(){return an},geoHill:function(){return Xn},geoHillRaw:function(){return Fn},geoHomolosine:function(){return ur},geoHomolosineRaw:function(){return lr},geoHufnagel:function(){return Zn},geoHufnagelRaw:function(){return br},geoHyperelliptical:function(){return ai},geoHyperellipticalRaw:function(){return Gr},geoInterrupt:function(){return Kr},geoInterruptedBoggs:function(){return Ha},geoInterruptedHomolosine:function(){return eo},geoInterruptedMollweide:function(){return Ro},geoInterruptedMollweideHemispheres:function(){return Hs},geoInterruptedQuarticAuthalic:function(){return gs},geoInterruptedSinuMollweide:function(){return nl},geoInterruptedSinusoidal:function(){return Bo},geoKavrayskiy7:function(){return Si},geoKavrayskiy7Raw:function(){return Ga},geoLagrange:function(){return Vr},geoLagrangeRaw:function(){return ps},geoLarrivee:function(){return to},geoLarriveeRaw:function(){return ba},geoLaskowski:function(){return mo},geoLaskowskiRaw:function(){return Ia},geoLittrow:function(){return ro},geoLittrowRaw:function(){return no},geoLoximuthal:function(){return rl},geoLoximuthalRaw:function(){return Cs},geoMiller:function(){return il},geoMillerRaw:function(){return yo},geoModifiedStereographic:function(){return Aa},geoModifiedStereographicAlaska:function(){return No},geoModifiedStereographicGs48:function(){return ts},geoModifiedStereographicGs50:function(){return Ps},geoModifiedStereographicLee:function(){return Ys},geoModifiedStereographicMiller:function(){return Zs},geoModifiedStereographicRaw:function(){return qs},geoMollweide:function(){return le},geoMollweideRaw:function(){return se},geoMtFlatPolarParabolic:function(){return sl},geoMtFlatPolarParabolicRaw:function(){return io},geoMtFlatPolarQuartic:function(){return $r},geoMtFlatPolarQuarticRaw:function(){return bo},geoMtFlatPolarSinusoidal:function(){return ds},geoMtFlatPolarSinusoidalRaw:function(){return Da},geoNaturalEarth:function(){return Ma.Z},geoNaturalEarth2:function(){return yl},geoNaturalEarth2Raw:function(){return Uo},geoNaturalEarthRaw:function(){return Ma.K},geoNellHammer:function(){return ll},geoNellHammerRaw:function(){return Os},geoNicolosi:function(){return vs},geoNicolosiRaw:function(){return ns},geoPatterson:function(){return zs},geoPattersonRaw:function(){return To},geoPeirceQuincuncial:function(){return Rs},geoPierceQuincuncial:function(){return Rs},geoPolyconic:function(){return Ws},geoPolyconicRaw:function(){return Vo},geoPolyhedral:function(){return ko},geoPolyhedralButterfly:function(){return Xs},geoPolyhedralCollignon:function(){return xs},geoPolyhedralWaterman:function(){return uo},geoProject:function(){return Zo},geoQuantize:function(){return Ea},geoQuincuncial:function(){return _a},geoRectangularPolyconic:function(){return xr},geoRectangularPolyconicRaw:function(){return Ui},geoRobinson:function(){return Fs},geoRobinsonRaw:function(){return bs},geoSatellite:function(){return Wo},geoSatelliteRaw:function(){return Yo},geoSinuMollweide:function(){return tr},geoSinuMollweideRaw:function(){return er},geoSinusoidal:function(){return he},geoSinusoidalRaw:function(){return Ue},geoStitch:function(){return Di},geoTimes:function(){return Js},geoTimesRaw:function(){return Xa},geoTwoPointAzimuthal:function(){return Ja},geoTwoPointAzimuthalRaw:function(){return Xr},geoTwoPointAzimuthalUsa:function(){return Ta},geoTwoPointEquidistant:function(){return Lo},geoTwoPointEquidistantRaw:function(){return Na},geoTwoPointEquidistantUsa:function(){return Bs},geoVanDerGrinten:function(){return Ei},geoVanDerGrinten2:function(){return Tr},geoVanDerGrinten2Raw:function(){return Yi},geoVanDerGrinten3:function(){return ss},geoVanDerGrinten3Raw:function(){return Ar},geoVanDerGrinten4:function(){return Co},geoVanDerGrinten4Raw:function(){return ia},geoVanDerGrintenRaw:function(){return Jo},geoWagner:function(){return ls},geoWagner4:function(){return zi},geoWagner4Raw:function(){return Cr},geoWagner6:function(){return da},geoWagner6Raw:function(){return Ka},geoWagner7:function(){return Xi},geoWagnerRaw:function(){return Wi},geoWiechel:function(){return us},geoWiechelRaw:function(){return Ko},geoWinkel3:function(){return ho},geoWinkel3Raw:function(){return $o}});var S=t(15002),k=Math.abs,l=Math.atan,T=Math.atan2,b=Math.cos,d=Math.exp,s=Math.floor,e=Math.log,i=Math.max,r=Math.min,n=Math.pow,a=Math.round,o=Math.sign||function(R){return R>0?1:R<0?-1:0},u=Math.sin,p=Math.tan,c=1e-6,x=1e-12,g=Math.PI,f=g/2,y=g/4,v=Math.SQRT1_2,m=C(2),_=C(g),h=2*g,A=180/g,w=g/180;function E(R){return R>1?f:R<-1?-f:Math.asin(R)}function L(R){return R>1?0:R<-1?g:Math.acos(R)}function C(R){return R>0?Math.sqrt(R):0}function P(R){return(d(R)-d(-R))/2}function D(R){return(d(R)+d(-R))/2}function G(R){var U=p(R/2),j=2*e(b(R/2))/(U*U);function X(fe,Me){var B=b(fe),K=b(Me),ie=u(Me),de=K*B,ye=-((1-de?e((1+de)/2)/(1-de):-.5)+j/(1+de));return[ye*K*u(fe),ye*ie]}return X.invert=function(fe,Me){var B,K=C(fe*fe+Me*Me),ie=-R/2,de=50;if(!K)return[0,0];do{var ye=ie/2,Le=b(ye),Be=u(ye),je=Be/Le,qe=-e(k(Le));ie-=B=(2/je*qe-j*je-K)/(-qe/(Be*Be)+1-j/(2*Le*Le))*(Le<0?.7:1)}while(k(B)>c&&--de>0);var Ze=u(ie);return[T(fe*Ze,K*b(ie)),E(Me*Ze/K)]},X}function I(){var R=f,U=(0,S.r)(G),j=U(R);return j.radius=function(X){return arguments.length?U(R=X*w):R*A},j.scale(179.976).clipAngle(147)}function H(R,U){var j=b(U),X=function(fe){return fe?fe/Math.sin(fe):1}(L(j*b(R/=2)));return[2*j*u(R)*X,u(U)*X]}function N(){return(0,S.Z)(H).scale(152.63)}function F(R){var U=u(R),j=b(R),X=R>=0?1:-1,fe=p(X*R),Me=(1+U-j)/2;function B(K,ie){var de=b(ie),ye=b(K/=2);return[(1+de)*u(K),(X*ie>-T(ye,fe)-.001?0:10*-X)+Me+u(ie)*j-(1+de)*U*ye]}return B.invert=function(K,ie){var de=0,ye=0,Le=50;do{var Be=b(de),je=u(de),qe=b(ye),Ze=u(ye),Qe=1+qe,lt=Qe*je-K,ht=Me+Ze*j-Qe*U*Be-ie,St=Qe*Be/2,Lt=-je*Ze,Mt=U*Qe*je/2,Ft=j*qe+U*Be*Ze,Et=Lt*Mt-Ft*St,en=(ht*Lt-lt*Ft)/Et/2,Zt=(lt*Mt-ht*St)/Et;k(Zt)>2&&(Zt/=2),de-=en,ye-=Zt}while((k(en)>c||k(Zt)>c)&&--Le>0);return X*ye>-T(b(de),fe)-.001?[2*de,ye]:null},B}function V(){var R=20*w,U=R>=0?1:-1,j=p(U*R),X=(0,S.r)(F),fe=X(R),Me=fe.stream;return fe.parallel=function(B){return arguments.length?(j=p((U=(R=B*w)>=0?1:-1)*R),X(R)):R*A},fe.stream=function(B){var K=fe.rotate(),ie=Me(B),de=(fe.rotate([0,0]),Me(B)),ye=fe.precision();return fe.rotate(K),ie.sphere=function(){de.polygonStart(),de.lineStart();for(var Le=-180*U;U*Le<180;Le+=90*U)de.point(Le,90*U);if(R)for(;U*(Le-=3*U*ye)>=-180;)de.point(Le,U*-T(b(Le*w/2),j)*A);de.lineEnd(),de.polygonEnd()},ie},fe.scale(218.695).center([0,28.0974])}function q(R,U){var j=p(U/2),X=C(1-j*j),fe=1+X*b(R/=2),Me=u(R)*X/fe,B=j/fe,K=Me*Me,ie=B*B;return[1.3333333333333333*Me*(3+K-3*ie),1.3333333333333333*B*(3+3*K-ie)]}function te(){return(0,S.Z)(q).scale(66.1603)}H.invert=function(R,U){if(!(R*R+4*U*U>g*g+c)){var j=R,X=U,fe=25;do{var Me,B=u(j),K=u(j/2),ie=b(j/2),de=u(X),ye=b(X),Le=u(2*X),Be=de*de,je=ye*ye,qe=K*K,Ze=1-je*ie*ie,Qe=Ze?L(ye*ie)*C(Me=1/Ze):Me=0,lt=2*Qe*ye*K-R,ht=Qe*de-U,St=Me*(je*qe+Qe*ye*ie*Be),Lt=Me*(.5*B*Le-2*Qe*de*K),Mt=.25*Me*(Le*K-Qe*de*je*B),Ft=Me*(Be*ie+Qe*qe*ye),Et=Lt*Mt-Ft*St;if(!Et)break;var en=(ht*Lt-lt*Ft)/Et,Zt=(lt*Mt-ht*St)/Et;j-=en,X-=Zt}while((k(en)>c||k(Zt)>c)&&--fe>0);return[j,X]}},q.invert=function(R,U){if(U*=.375,!(R*=.375)&&k(U)>1)return null;var j=1+R*R+U*U,X=C((j-C(j*j-4*U*U))/2),fe=E(X)/3,Me=X?function(de){return e(de+C(de*de-1))}(k(U/X))/3:function(de){return e(de+C(de*de+1))}(k(R))/3,B=b(fe),K=D(Me),ie=K*K-B*B;return[2*o(R)*T(P(Me)*B,.25-ie),2*o(U)*T(K*u(fe),.25+ie)]};var $=C(8),W=e(1+m);function Z(R,U){var j=k(U);return j<y?[R,e(p(y+U/2))]:[R*b(j)*(2*m-1/u(j)),o(U)*(2*m*(j-y)-e(p(j/2)))]}function J(){return(0,S.Z)(Z).scale(112.314)}Z.invert=function(R,U){if((X=k(U))<W)return[R,2*l(d(U))-f];var j,X,fe=y,Me=25;do{var B=b(fe/2),K=p(fe/2);fe-=j=($*(fe-y)-e(K)-X)/($-B*B/(2*K))}while(k(j)>x&&--Me>0);return[R/(b(fe)*($-1/u(fe))),o(U)*fe]};var ee=t(17889);function re(R){var U=2*g/R;function j(X,fe){var Me=(0,ee.N)(X,fe);if(k(X)>f){var B=T(Me[1],Me[0]),K=C(Me[0]*Me[0]+Me[1]*Me[1]),ie=U*a((B-f)/U)+f,de=T(u(B-=ie),2-b(B));B=ie+E(g/K*u(de))-de,Me[0]=K*b(B),Me[1]=K*u(B)}return Me}return j.invert=function(X,fe){var Me=C(X*X+fe*fe);if(Me>f){var B=T(fe,X),K=U*a((B-f)/U)+f,ie=B>K?-1:1,de=Me*b(K-B),ye=1/p(ie*L((de-g)/C(g*(g-2*de)+Me*Me)));B=K+2*l((ye+ie*C(ye*ye-3))/3),X=Me*b(B),fe=Me*u(B)}return ee.N.invert(X,fe)},j}function ae(){var R=5,U=(0,S.r)(re),j=U(R),X=j.stream,fe=.01,Me=-b(fe*w),B=u(fe*w);return j.lobes=function(K){return arguments.length?U(R=+K):R},j.stream=function(K){var ie=j.rotate(),de=X(K),ye=(j.rotate([0,0]),X(K));return j.rotate(ie),de.sphere=function(){ye.polygonStart(),ye.lineStart();for(var Le=0,Be=360/R,je=2*g/R,qe=90-180/R,Ze=f;Le<R;++Le,qe-=Be,Ze-=je)ye.point(T(B*b(Ze),Me)*A,E(B*u(Ze))*A),qe<-90?(ye.point(-90,-180-qe-fe),ye.point(-90,-180-qe+fe)):(ye.point(90,qe+fe),ye.point(90,qe-fe));ye.lineEnd(),ye.polygonEnd()},de},j.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var oe=t(12956);function ce(R,U){if(arguments.length<2&&(U=R),U===1)return oe.l;if(U===1/0)return pe;function j(X,fe){var Me=(0,oe.l)(X/U,fe);return Me[0]*=R,Me}return j.invert=function(X,fe){var Me=oe.l.invert(X/R,fe);return Me[0]*=U,Me},j}function pe(R,U){return[R*b(U)/b(U/=2),2*u(U)]}function ve(){var R=2,U=(0,S.r)(ce),j=U(R);return j.coefficient=function(X){return arguments.length?U(R=+X):R},j.scale(169.529)}function we(R,U,j){var X,fe,Me,B=100;j=j===void 0?0:+j,U=+U;do(fe=R(j))===(Me=R(j+c))&&(Me=fe+c),j-=X=-1*c*(fe-U)/(fe-Me);while(B-- >0&&k(X)>c);return B<0?NaN:j}function xe(R,U,j){return U===void 0&&(U=40),j===void 0&&(j=x),function(X,fe,Me,B){var K,ie,de;Me=Me===void 0?0:+Me,B=B===void 0?0:+B;for(var ye=0;ye<U;ye++){var Le=R(Me,B),Be=Le[0]-X,je=Le[1]-fe;if(k(Be)<j&&k(je)<j)break;var qe=Be*Be+je*je;if(qe>K)Me-=ie/=2,B-=de/=2;else{K=qe;var Ze=(Me>0?-1:1)*j,Qe=(B>0?-1:1)*j,lt=R(Me+Ze,B),ht=R(Me,B+Qe),St=(lt[0]-Le[0])/Ze,Lt=(lt[1]-Le[1])/Ze,Mt=(ht[0]-Le[0])/Qe,Ft=(ht[1]-Le[1])/Qe,Et=Ft*St-Lt*Mt,en=(k(Et)<.5?.5:1)/Et;if(Me+=ie=(je*Mt-Be*Ft)*en,B+=de=(Be*Lt-je*St)*en,k(ie)<j&&k(de)<j)break}}return[Me,B]}}function ge(){var R=ce(1.68,2);function U(j,X){if(j+X<-1.4){var fe=(j-X+1.6)*(j+X+1.4)/8;j+=fe,X-=.8*fe*u(X+g/2)}var Me=R(j,X),B=(1-b(j*X))/12;return Me[1]<0&&(Me[0]*=1+B),Me[1]>0&&(Me[1]*=1+B/1.5*Me[0]*Me[0]),Me}return U.invert=xe(U),U}function Oe(){return(0,S.Z)(ge()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function Ae(R,U){var j,X=R*u(U),fe=30;do U-=j=(U+u(U)-X)/(1+b(U));while(k(j)>c&&--fe>0);return U/2}function Te(R,U,j){function X(fe,Me){return[R*fe*b(Me=Ae(j,Me)),U*u(Me)]}return X.invert=function(fe,Me){return Me=E(Me/U),[fe/(R*b(Me)),E((2*Me+u(2*Me))/j)]},X}pe.invert=function(R,U){var j=2*E(U/2);return[R*b(j/2)/b(j),j]};var se=Te(m/f,m,g);function le(){return(0,S.Z)(se).scale(169.529)}var ne=2.00276,me=1.11072;function Ee(R,U){var j=Ae(g,U);return[ne*R/(1/b(U)+me/b(j)),(U+m*u(j))/ne]}function be(){return(0,S.Z)(Ee).scale(160.857)}function De(R){var U=0,j=(0,S.r)(R),X=j(U);return X.parallel=function(fe){return arguments.length?j(U=fe*w):U*A},X}function Ue(R,U){return[R*b(U),U]}function he(){return(0,S.Z)(Ue).scale(152.63)}function ke(R){if(!R)return Ue;var U=1/p(R);function j(X,fe){var Me=U+R-fe,B=Me&&X*b(fe)/Me;return[Me*u(B),U-Me*b(B)]}return j.invert=function(X,fe){var Me=C(X*X+(fe=U-fe)*fe),B=U+R-Me;return[Me/b(B)*T(X,fe),B]},j}function _e(){return De(ke).scale(123.082).center([0,26.1441]).parallel(45)}function Ce(R){function U(j,X){var fe=f-X,Me=fe&&j*R*u(fe)/fe;return[fe*u(Me)/R,f-fe*b(Me)]}return U.invert=function(j,X){var fe=j*R,Me=f-X,B=C(fe*fe+Me*Me),K=T(fe,Me);return[(B?B/u(B):1)*K/R,f-B]},U}function Fe(){var R=.5,U=(0,S.r)(Ce),j=U(R);return j.fraction=function(X){return arguments.length?U(R=+X):R},j.scale(158.837)}Ee.invert=function(R,U){var j,X,fe=ne*U,Me=U<0?-y:y,B=25;do X=fe-m*u(Me),Me-=j=(u(2*Me)+2*Me-g*u(X))/(2*b(2*Me)+2+g*b(X)*m*b(Me));while(k(j)>c&&--B>0);return X=fe-m*u(Me),[R*(1/b(X)+me/b(Me))/ne,X]},Ue.invert=function(R,U){return[R/b(U),U]};var Re=Te(1,4/g,g);function He(){return(0,S.Z)(Re).scale(152.63)}var Ge=t(66624),$e=t(49386);function st(R,U,j,X,fe,Me){var B,K=b(Me);if(k(R)>1||k(Me)>1)B=L(j*fe+U*X*K);else{var ie=u(R/2),de=u(Me/2);B=2*E(C(ie*ie+U*X*de*de))}return k(B)>c?[B,T(X*u(Me),U*fe-j*X*K)]:[0,0]}function Ke(R,U,j){return L((R*R+U*U-j*j)/(2*R*U))}function gt(R){return R-2*g*s((R+g)/(2*g))}function mt(R,U,j){for(var X,fe=[[R[0],R[1],u(R[1]),b(R[1])],[U[0],U[1],u(U[1]),b(U[1])],[j[0],j[1],u(j[1]),b(j[1])]],Me=fe[2],B=0;B<3;++B,Me=X)X=fe[B],Me.v=st(X[1]-Me[1],Me[3],Me[2],X[3],X[2],X[0]-Me[0]),Me.point=[0,0];var K=Ke(fe[0].v[0],fe[2].v[0],fe[1].v[0]),ie=Ke(fe[0].v[0],fe[1].v[0],fe[2].v[0]),de=g-K;fe[2].point[1]=0,fe[0].point[0]=-(fe[1].point[0]=fe[0].v[0]/2);var ye=[fe[2].point[0]=fe[0].point[0]+fe[2].v[0]*b(K),2*(fe[0].point[1]=fe[1].point[1]=fe[2].v[0]*u(K))];return function(Le,Be){var je,qe=u(Be),Ze=b(Be),Qe=new Array(3);for(je=0;je<3;++je){var lt=fe[je];if(Qe[je]=st(Be-lt[1],lt[3],lt[2],Ze,qe,Le-lt[0]),!Qe[je][0])return lt.point;Qe[je][1]=gt(Qe[je][1]-lt.v[1])}var ht=ye.slice();for(je=0;je<3;++je){var St=je==2?0:je+1,Lt=Ke(fe[je].v[0],Qe[je][0],Qe[St][0]);Qe[je][1]<0&&(Lt=-Lt),je?je==1?(Lt=ie-Lt,ht[0]-=Qe[je][0]*b(Lt),ht[1]-=Qe[je][0]*u(Lt)):(Lt=de-Lt,ht[0]+=Qe[je][0]*b(Lt),ht[1]+=Qe[je][0]*u(Lt)):(ht[0]+=Qe[je][0]*b(Lt),ht[1]-=Qe[je][0]*u(Lt))}return ht[0]/=3,ht[1]/=3,ht}}function at(R){return R[0]*=w,R[1]*=w,R}function rt(){return xt([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function xt(R,U,j){var X=(0,Ge.Z)({type:"MultiPoint",coordinates:[R,U,j]}),fe=[-X[0],-X[1]],Me=(0,$e.Z)(fe),B=mt(at(Me(R)),at(Me(U)),at(Me(j)));B.invert=xe(B);var K=(0,S.Z)(B).rotate(fe),ie=K.center;return delete K.rotate,K.center=function(de){return arguments.length?ie(Me(de)):Me.invert(ie())},K.clipAngle(90)}function Tt(R,U){var j=C(1-u(U));return[2/_*R*j,_*(1-j)]}function wt(){return(0,S.Z)(Tt).scale(95.6464).center([0,30])}function Ot(R){var U=p(R);function j(X,fe){return[X,(X?X/u(X):1)*(u(fe)*b(X)-U*b(fe))]}return j.invert=U?function(X,fe){X&&(fe*=u(X)/X);var Me=b(X);return[X,2*T(C(Me*Me+U*U-fe*fe)-Me,U-fe)]}:function(X,fe){return[X,E(X?fe*p(X)/X:fe)]},j}function Ct(){return De(Ot).scale(249.828).clipAngle(90)}Tt.invert=function(R,U){var j=(j=U/_-1)*j;return[j>0?R*C(g/j)/2:0,E(1-j)]};var Ye=C(3);function Xe(R,U){return[Ye*R*(2*b(2*U/3)-1)/_,Ye*_*u(U/3)]}function Ve(){return(0,S.Z)(Xe).scale(156.19)}function We(R){var U=b(R);function j(X,fe){return[X*U,u(fe)/U]}return j.invert=function(X,fe){return[X/U,E(fe*U)]},j}function nt(){return De(We).parallel(38.58).scale(195.044)}function ot(R){var U=b(R);function j(X,fe){return[X*U,(1+U)*p(fe/2)]}return j.invert=function(X,fe){return[X/U,2*l(fe/(1+U))]},j}function Ie(){return De(ot).scale(124.75)}function ze(R,U){var j=C(8/(3*g));return[j*R*(1-k(U)/g),j*U]}function et(){return(0,S.Z)(ze).scale(165.664)}function tt(R,U){var j=C(4-3*u(k(U)));return[2/C(6*g)*R*j,o(U)*C(2*g/3)*(2-j)]}function dt(){return(0,S.Z)(tt).scale(165.664)}function pt(R,U){var j=C(g*(4+g));return[2/j*R*(1+C(1-4*U*U/(g*g))),4/j*U]}function vt(){return(0,S.Z)(pt).scale(180.739)}function ct(R,U){var j=(2+f)*u(U);U/=2;for(var X=0,fe=1/0;X<10&&k(fe)>c;X++){var Me=b(U);U-=fe=(U+u(U)*(Me+2)-j)/(2*Me*(1+Me))}return[2/C(g*(4+g))*R*(1+b(U)),2*C(g/(4+g))*u(U)]}function kt(){return(0,S.Z)(ct).scale(180.739)}function ut(R,U){return[R*(1+b(U))/C(2+g),2*U/C(2+g)]}function ft(){return(0,S.Z)(ut).scale(173.044)}function bt(R,U){for(var j=(1+f)*u(U),X=0,fe=1/0;X<10&&k(fe)>c;X++)U-=fe=(U+u(U)-j)/(1+b(U));return j=C(2+g),[R*(1+b(U))/j,2*U/j]}function It(){return(0,S.Z)(bt).scale(173.044)}Xe.invert=function(R,U){var j=3*E(U/(Ye*_));return[_*R/(Ye*(2*b(2*j/3)-1)),j]},ze.invert=function(R,U){var j=C(8/(3*g)),X=U/j;return[R/(j*(1-k(X)/g)),X]},tt.invert=function(R,U){var j=2-k(U)/C(2*g/3);return[R*C(6*g)/(2*j),o(U)*E((4-j*j)/3)]},pt.invert=function(R,U){var j=C(g*(4+g))/2;return[R*j/(1+C(1-U*U*(4+g)/(4*g))),U*j/2]},ct.invert=function(R,U){var j=U*C((4+g)/g)/2,X=E(j),fe=b(X);return[R/(2/C(g*(4+g))*(1+fe)),E((X+j*(fe+2))/(2+f))]},ut.invert=function(R,U){var j=C(2+g),X=U*j/2;return[j*R/(1+b(X)),X]},bt.invert=function(R,U){var j=1+f,X=C(j/2);return[2*R*X/(1+b(U*=X)),E((U+u(U))/j)]};var zt=3+2*m;function Rt(R,U){var j=u(R/=2),X=b(R),fe=C(b(U)),Me=b(U/=2),B=u(U)/(Me+m*X*fe),K=C(2/(1+B*B)),ie=C((m*Me+(X+j)*fe)/(m*Me+(X-j)*fe));return[zt*(K*(ie-1/ie)-2*e(ie)),zt*(K*B*(ie+1/ie)-2*l(B))]}function Jt(){return(0,S.Z)(Rt).scale(62.5271)}Rt.invert=function(R,U){if(!(j=q.invert(R/1.2,1.065*U)))return null;var j,X=j[0],fe=j[1],Me=20;R/=zt,U/=zt;do{var B=X/2,K=fe/2,ie=u(B),de=b(B),ye=u(K),Le=b(K),Be=b(fe),je=C(Be),qe=ye/(Le+m*de*je),Ze=qe*qe,Qe=C(2/(1+Ze)),lt=(m*Le+(de+ie)*je)/(m*Le+(de-ie)*je),ht=C(lt),St=ht-1/ht,Lt=ht+1/ht,Mt=Qe*St-2*e(ht)-R,Ft=Qe*qe*Lt-2*l(qe)-U,Et=ye&&v*je*ie*Ze/ye,en=(m*de*Le+je)/(2*(Le+m*de*je)*(Le+m*de*je)*je),Zt=-.5*qe*Qe*Qe*Qe,Vt=Zt*Et,pn=Zt*en,vn=(vn=2*Le+m*je*(de-ie))*vn*ht,zn=(m*de*Le*je+Be)/vn,Rn=-m*ie*ye/(je*vn),Un=St*Vt-2*zn/ht+Qe*(zn+zn/lt),Yn=St*pn-2*Rn/ht+Qe*(Rn+Rn/lt),or=qe*Lt*Vt-2*Et/(1+Ze)+Qe*Lt*Et+Qe*qe*(zn-zn/lt),ir=qe*Lt*pn-2*en/(1+Ze)+Qe*Lt*en+Qe*qe*(Rn-Rn/lt),cr=Yn*or-ir*Un;if(!cr)break;var mr=(Ft*Yn-Mt*ir)/cr,Lr=(Mt*or-Ft*Un)/cr;X-=mr,fe=i(-f,r(f,fe-Lr))}while((k(mr)>c||k(Lr)>c)&&--Me>0);return k(k(fe)-f)<c?[0,fe]:Me&&[X,fe]};var qt=b(35*w);function Wt(R,U){var j=p(U/2);return[R*qt*C(1-j*j),(1+qt)*j]}function jt(){return(0,S.Z)(Wt).scale(137.152)}function fn(R,U){var j=U/2,X=b(j);return[2*R/_*b(U)*X*X,_*p(j)]}function xn(){return(0,S.Z)(fn).scale(135.264)}function un(R){var U=1-R,j=fe(g,0)[0]-fe(-g,0)[0],X=C(2*(fe(0,f)[1]-fe(0,-f)[1])/j);function fe(K,ie){var de=b(ie),ye=u(ie);return[de/(U+R*de)*K,U*ie+R*ye]}function Me(K,ie){var de=fe(K,ie);return[de[0]*X,de[1]/X]}function B(K){return Me(0,K)[1]}return Me.invert=function(K,ie){var de=we(B,ie);return[K/X*(R+U/b(de)),de]},Me}function Ht(){var R=.5,U=(0,S.r)(un),j=U(R);return j.alpha=function(X){return arguments.length?U(R=+X):R},j.scale(168.725)}Wt.invert=function(R,U){var j=U/(1+qt);return[R&&R/(qt*C(1-j*j)),2*l(j)]},fn.invert=function(R,U){var j=l(U/_),X=b(j),fe=2*j;return[R*_/2/(b(fe)*X*X),fe]};var nn=t(57962),Kt=t(97492);function on(R){return[R[0]/2,E(p(R[1]/2*w))*A]}function hn(R){return[2*R[0],2*l(u(R[1]*w))*A]}function dn(R){R==null&&(R=nn.Z);var U=R(),j=(0,Kt.Z)().scale(A).precision(0).clipAngle(null).translate([0,0]);function X(Me){return U(on(Me))}function fe(Me){X[Me]=function(){return arguments.length?(U[Me].apply(U,arguments),X):U[Me]()}}return U.invert&&(X.invert=function(Me){return hn(U.invert(Me))}),X.stream=function(Me){var B=U.stream(Me),K=j.stream({point:function(ie,de){B.point(ie/2,E(p(-de/2*w))*A)},lineStart:function(){B.lineStart()},lineEnd:function(){B.lineEnd()},polygonStart:function(){B.polygonStart()},polygonEnd:function(){B.polygonEnd()}});return K.sphere=B.sphere,K},X.rotate=function(Me){return arguments.length?(j.rotate(Me),X):j.rotate()},X.center=function(Me){return arguments.length?(U.center(on(Me)),X):hn(U.center())},fe("angle"),fe("clipAngle"),fe("clipExtent"),fe("fitExtent"),fe("fitHeight"),fe("fitSize"),fe("fitWidth"),fe("scale"),fe("translate"),fe("precision"),X.scale(249.5)}function Mn(R,U){var j=2*g/U,X=R*R;function fe(Me,B){var K=(0,ee.N)(Me,B),ie=K[0],de=K[1],ye=ie*ie+de*de;if(ye>X){var Le=C(ye),Be=T(de,ie),je=j*a(Be/j),qe=Be-je,Ze=R*b(qe),Qe=(R*u(qe)-qe*u(Ze))/(f-Ze),lt=Cn(qe,Qe),ht=(g-R)/Tn(lt,Ze,g);ie=Le;var St,Lt=50;do ie-=St=(R+Tn(lt,Ze,ie)*ht-Le)/(lt(ie)*ht);while(k(St)>c&&--Lt>0);de=qe*u(ie),ie<f&&(de-=Qe*(ie-f));var Mt=u(je),Ft=b(je);K[0]=ie*Ft-de*Mt,K[1]=ie*Mt+de*Ft}return K}return fe.invert=function(Me,B){var K=Me*Me+B*B;if(K>X){var ie=C(K),de=T(B,Me),ye=j*a(de/j),Le=de-ye;Me=ie*b(Le),B=ie*u(Le);for(var Be=Me-f,je=u(Me),qe=B/je,Ze=Me<f?1/0:0,Qe=10;;){var lt=R*u(qe),ht=R*b(qe),St=u(ht),Lt=f-ht,Mt=(lt-qe*St)/Lt,Ft=Cn(qe,Mt);if(k(Ze)<x||!--Qe)break;qe-=Ze=(qe*je-Mt*Be-B)/(je-2*Be*(Lt*(ht+qe*lt*b(ht)-St)-lt*(lt-qe*St))/(Lt*Lt))}Me=(ie=R+Tn(Ft,ht,Me)*(g-R)/Tn(Ft,ht,g))*b(de=ye+qe),B=ie*u(de)}return ee.N.invert(Me,B)},fe}function Cn(R,U){return function(j){var X=R*b(j);return j<f&&(X-=U),C(1+X*X)}}function Tn(R,U,j){for(var X=(j-U)/50,fe=R(U)+R(j),Me=1,B=U;Me<50;++Me)fe+=2*R(B+=X);return .5*fe*X}function Pn(){var R=6,U=30*w,j=b(U),X=u(U),fe=(0,S.r)(Mn),Me=fe(U,R),B=Me.stream,K=-b(.01*w),ie=u(.01*w);return Me.radius=function(de){return arguments.length?(j=b(U=de*w),X=u(U),fe(U,R)):U*A},Me.lobes=function(de){return arguments.length?fe(U,R=+de):R},Me.stream=function(de){var ye=Me.rotate(),Le=B(de),Be=(Me.rotate([0,0]),B(de));return Me.rotate(ye),Le.sphere=function(){Be.polygonStart(),Be.lineStart();for(var je=0,qe=2*g/R,Ze=0;je<R;++je,Ze-=qe)Be.point(T(ie*b(Ze),K)*A,E(ie*u(Ze))*A),Be.point(T(X*b(Ze-qe/2),j)*A,E(X*u(Ze-qe/2))*A);Be.lineEnd(),Be.polygonEnd()},Le},Me.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function Wn(R,U,j,X,fe,Me,B,K){function ie(de,ye){if(!ye)return[R*de/g,0];var Le=ye*ye,Be=R+Le*(U+Le*(j+Le*X)),je=ye*(fe-1+Le*(Me-K+Le*B)),qe=(Be*Be+je*je)/(2*je),Ze=de*E(Be/qe)/g;return[qe*u(Ze),ye*(1+Le*K)+qe*(1-b(Ze))]}return arguments.length<8&&(K=0),ie.invert=function(de,ye){var Le,Be,je=g*de/R,qe=ye,Ze=50;do{var Qe=qe*qe,lt=R+Qe*(U+Qe*(j+Qe*X)),ht=qe*(fe-1+Qe*(Me-K+Qe*B)),St=lt*lt+ht*ht,Lt=2*ht,Mt=St/Lt,Ft=Mt*Mt,Et=E(lt/Mt)/g,en=je*Et,Zt=lt*lt,Vt=(2*U+Qe*(4*j+6*Qe*X))*qe,pn=fe+Qe*(3*Me+5*Qe*B),vn=(2*(lt*Vt+ht*(pn-1))*Lt-St*(2*(pn-1)))/(Lt*Lt),zn=b(en),Rn=u(en),Un=Mt*zn,Yn=Mt*Rn,or=je/g*(1/C(1-Zt/Ft))*(Vt*Mt-lt*vn)/Ft,ir=Yn-de,cr=qe*(1+Qe*K)+Mt-Un-ye,mr=vn*Rn+Un*or,Lr=Un*Et,Bn=1+vn-(vn*zn-Yn*or),rr=Yn*Et,fr=mr*rr-Bn*Lr;if(!fr)break;je-=Le=(cr*mr-ir*Bn)/fr,qe-=Be=(ir*rr-cr*Lr)/fr}while((k(Le)>c||k(Be)>c)&&--Ze>0);return[je,qe]},ie}var $n=Wn(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function ar(){return(0,S.Z)($n).scale(149.995)}var Qn=Wn(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Gn(){return(0,S.Z)(Qn).scale(153.93)}var dr=Wn(5/6*g,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Bt(){return(0,S.Z)(dr).scale(130.945)}function tn(R,U){var j=R*R,X=U*U;return[R*(1-.162388*X)*(.87-952426e-9*j*j),U*(1+X/12)]}function cn(){return(0,S.Z)(tn).scale(131.747)}tn.invert=function(R,U){var j,X=R,fe=U,Me=50;do{var B=fe*fe;fe-=j=(fe*(1+B/12)-U)/(1+B/4)}while(k(j)>c&&--Me>0);Me=50,R/=1-.162388*B;do{var K=(K=X*X)*K;X-=j=(X*(.87-952426e-9*K)-R)/(.87-.00476213*K)}while(k(j)>c&&--Me>0);return[X,fe]};var gn=Wn(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function kn(){return(0,S.Z)(gn).scale(131.087)}function Vn(R){var U=R(f,0)[0]-R(-f,0)[0];function j(X,fe){var Me=X>0?-.5:.5,B=R(X+Me*g,fe);return B[0]-=Me*U,B}return R.invert&&(j.invert=function(X,fe){var Me=X>0?-.5:.5,B=R.invert(X+Me*U,fe),K=B[0]-Me*g;return K<-g?K+=2*g:K>g&&(K-=2*g),B[0]=K,B}),j}function In(R,U){var j=o(R),X=o(U),fe=b(U),Me=b(R)*fe,B=u(R)*fe,K=u(X*U);R=k(T(B,K)),U=E(Me),k(R-f)>c&&(R%=f);var ie=function(de,ye){if(ye===f)return[0,0];var Le,Be,je=u(ye),qe=je*je,Ze=qe*qe,Qe=1+Ze,lt=1+3*Ze,ht=1-Ze,St=E(1/C(Qe)),Lt=ht+qe*Qe*St,Mt=(1-je)/Lt,Ft=C(Mt),Et=Mt*Qe,en=C(Et),Zt=Ft*ht;if(de===0)return[0,-(Zt+qe*en)];var Vt,pn=b(ye),vn=1/pn,zn=2*je*pn,Rn=(-Lt*pn-(1-je)*((-3*qe+St*lt)*zn))/(Lt*Lt),Un=-vn*zn,Yn=-vn*(qe*Qe*Rn+Mt*lt*zn),or=-2*vn*(ht*(.5*Rn/Ft)-2*qe*Ft*zn),ir=4*de/g;if(de>.222*g||ye<g/4&&de>.175*g){if(Le=(Zt+qe*C(Et*(1+Ze)-Zt*Zt))/(1+Ze),de>g/4)return[Le,Le];var cr=Le,mr=.5*Le;Le=.5*(mr+cr),Be=50;do{var Lr=Le*(or+Un*C(Et-Le*Le))+Yn*E(Le/en)-ir;if(!Lr)break;Lr<0?mr=Le:cr=Le,Le=.5*(mr+cr)}while(k(cr-mr)>c&&--Be>0)}else{Le=c,Be=25;do{var Bn=Le*Le,rr=C(Et-Bn),fr=or+Un*rr,yr=Le*fr+Yn*E(Le/en)-ir;Le-=Vt=rr?yr/(fr+(Yn-Un*Bn)/rr):0}while(k(Vt)>c&&--Be>0)}return[Le,-Zt-qe*C(Et-Le*Le)]}(R>g/4?f-R:R,U);return R>g/4&&(K=ie[0],ie[0]=-ie[1],ie[1]=-K),ie[0]*=j,ie[1]*=-X,ie}function Dn(){return(0,S.Z)(Vn(In)).scale(239.75)}function Kn(R,U){var j,X,fe,Me,B,K;if(U<c)return[(Me=u(R))-(j=U*(R-Me*(X=b(R)))/4)*X,X+j*Me,1-U*Me*Me/2,R-j];if(U>=1-c)return j=(1-U)/4,fe=1/(X=D(R)),[(Me=((K=d(2*(K=R)))-1)/(K+1))+j*((B=X*P(R))-R)/(X*X),fe-j*Me*fe*(B-R),fe+j*Me*fe*(B+R),2*l(d(R))-f+j*(B-R)/X];var ie=[1,0,0,0,0,0,0,0,0],de=[C(U),0,0,0,0,0,0,0,0],ye=0;for(X=C(1-U),B=1;k(de[ye]/ie[ye])>c&&ye<8;)j=ie[ye++],de[ye]=(j-X)/2,ie[ye]=(j+X)/2,X=C(j*X),B*=2;fe=B*ie[ye]*R;do fe=(E(Me=de[ye]*u(X=fe)/ie[ye])+fe)/2;while(--ye);return[u(fe),Me=b(fe),Me/b(fe-X),fe]}function Ut(R,U){if(!U)return R;if(U===1)return e(p(R/2+y));for(var j=1,X=C(1-U),fe=C(U),Me=0;k(fe)>c;Me++){if(R%g){var B=l(X*p(R)/j);B<0&&(B+=g),R+=B+~~(R/g)*g}else R+=R;fe=(j+X)/2,X=C(j*X),fe=((j=fe)-X)/2}return R/(n(2,Me)*j)}function bn(R,U){var j=(m-1)/(m+1),X=C(1-j*j),fe=Ut(f,X*X),Me=e(p(g/4+k(U)/2)),B=d(-1*Me)/C(j),K=function(de,ye){var Le=de*de,Be=ye+1,je=1-Le-ye*ye;return[.5*((de>=0?f:-f)-T(je,2*de)),-.25*e(je*je+4*Le)+.5*e(Be*Be+Le)]}(B*b(-1*R),B*u(-1*R)),ie=function(de,ye,Le){var Be=k(de),je=P(k(ye));if(Be){var qe=1/u(Be),Ze=1/(p(Be)*p(Be)),Qe=-(Ze+Le*(je*je*qe*qe)-1+Le),lt=(-Qe+C(Qe*Qe-(Le-1)*Ze*4))/2;return[Ut(l(1/C(lt)),Le)*o(de),Ut(l(C((lt/Ze-1)/Le)),1-Le)*o(ye)]}return[0,Ut(l(je),1-Le)*o(ye)]}(K[0],K[1],X*X);return[-ie[1],(U>=0?1:-1)*(.5*fe-ie[0])]}function At(){return(0,S.Z)(Vn(bn)).scale(151.496)}In.invert=function(R,U){k(R)>1&&(R=2*o(R)-R),k(U)>1&&(U=2*o(U)-U);var j=o(R),X=o(U),fe=-j*R,Me=-X*U,B=Me/fe<1,K=function(Le,Be){for(var je=0,qe=1,Ze=.5,Qe=50;;){var lt=Ze*Ze,ht=C(Ze),St=E(1/C(1+lt)),Lt=1-lt+Ze*(1+lt)*St,Mt=(1-ht)/Lt,Ft=C(Mt),Et=Mt*(1+lt),en=Ft*(1-lt),Zt=C(Et-Le*Le),Vt=Be+en+Ze*Zt;if(k(qe-je)<x||--Qe==0||Vt===0)break;Vt>0?je=Ze:qe=Ze,Ze=.5*(je+qe)}if(!Qe)return null;var pn=E(ht),vn=b(pn),zn=1/vn,Rn=2*ht*vn,Un=(-Lt*vn-(-3*Ze+St*(1+3*lt))*Rn*(1-ht))/(Lt*Lt);return[g/4*(Le*(-2*zn*((1-lt)*(.5*Un/Ft)-2*Ze*Ft*Rn)+-zn*Rn*Zt)+-zn*(Ze*(1+lt)*Un+Mt*(1+3*lt)*Rn)*E(Le/C(Et))),pn]}(B?Me:fe,B?fe:Me),ie=K[0],de=K[1],ye=b(de);return B&&(ie=-f-ie),[j*(T(u(ie)*ye,-u(de))+g),X*E(b(ie)*ye)]},bn.invert=function(R,U){var j,X,fe,Me,B,K,ie=(m-1)/(m+1),de=C(1-ie*ie),ye=(X=-R,fe=de*de,(j=.5*Ut(f,de*de)-U)?(Me=Kn(j,fe),X?(K=(B=Kn(X,1-fe))[1]*B[1]+fe*Me[0]*Me[0]*B[0]*B[0],[[Me[0]*B[2]/K,Me[1]*Me[2]*B[0]*B[1]/K],[Me[1]*B[1]/K,-Me[0]*Me[2]*B[0]*B[2]/K],[Me[2]*B[1]*B[2]/K,-fe*Me[0]*Me[1]*B[0]/K]]):[[Me[0],0],[Me[1],0],[Me[2],0]]):[[0,(B=Kn(X,1-fe))[0]/B[1]],[1/B[1],0],[B[2]/B[1],0]]),Le=function(Be,je){var qe=je[0]*je[0]+je[1]*je[1];return[(Be[0]*je[0]+Be[1]*je[1])/qe,(Be[1]*je[0]-Be[0]*je[1])/qe]}(ye[0],ye[1]);return[T(Le[1],Le[0])/-1,2*l(d(-.5*e(ie*Le[0]*Le[0]+ie*Le[1]*Le[1])))-f]};var Gt=t(7613);function $t(R){var U=u(R),j=b(R),X=mn(R);function fe(Me,B){var K=X(Me,B);Me=K[0],B=K[1];var ie=u(B),de=b(B),ye=b(Me),Le=L(U*ie+j*de*ye),Be=u(Le),je=k(Be)>c?Le/Be:1;return[je*j*u(Me),(k(Me)>f?je:-je)*(U*de-j*ie*ye)]}return X.invert=mn(-R),fe.invert=function(Me,B){var K=C(Me*Me+B*B),ie=-u(K),de=b(K),ye=K*de,Le=-B*ie,Be=K*U,je=C(ye*ye+Le*Le-Be*Be),qe=T(ye*Be+Le*je,Le*Be-ye*je),Ze=(K>f?-1:1)*T(Me*ie,K*b(qe)*de+B*u(qe)*ie);return X.invert(Ze,qe)},fe}function mn(R){var U=u(R),j=b(R);return function(X,fe){var Me=b(fe),B=b(X)*Me,K=u(X)*Me,ie=u(fe);return[T(K,B*j-ie*U),E(ie*j+B*U)]}}function yn(){var R=0,U=(0,S.r)($t),j=U(R),X=j.rotate,fe=j.stream,Me=(0,Gt.Z)();return j.parallel=function(B){if(!arguments.length)return R*A;var K=j.rotate();return U(R=B*w).rotate(K)},j.rotate=function(B){return arguments.length?(X.call(j,[B[0],B[1]-R*A]),Me.center([-B[0],-B[1]]),j):((B=X.call(j))[1]+=R*A,B)},j.stream=function(B){return(B=fe(B)).sphere=function(){B.polygonStart();var K,ie=Me.radius(89.99)().coordinates[0],de=ie.length-1,ye=-1;for(B.lineStart();++ye<de;)B.point((K=ie[ye])[0],K[1]);for(B.lineEnd(),de=(ie=Me.radius(90.01)().coordinates[0]).length-1,B.lineStart();--ye>=0;)B.point((K=ie[ye])[0],K[1]);B.lineEnd(),B.polygonEnd()},B},j.scale(79.4187).parallel(45).clipAngle(179.999)}var An=t(33064),sn=t(72736),Yt=E(1-1/3)*A,Xt=We(0);function an(R){var U=Yt*w,j=Tt(g,U)[0]-Tt(-g,U)[0],X=Xt(0,U)[1],fe=Tt(0,U)[1],Me=_-fe,B=h/R,K=4/h,ie=X+Me*Me*4/h;function de(ye,Le){var Be,je=k(Le);if(je>U){var qe=r(R-1,i(0,s((ye+g)/B)));(Be=Tt(ye+=g*(R-1)/R-qe*B,je))[0]=Be[0]*h/j-h*(R-1)/(2*R)+qe*h/R,Be[1]=X+4*(Be[1]-fe)*Me/h,Le<0&&(Be[1]=-Be[1])}else Be=Xt(ye,Le);return Be[0]*=K,Be[1]/=ie,Be}return de.invert=function(ye,Le){ye/=K;var Be=k(Le*=ie);if(Be>X){var je=r(R-1,i(0,s((ye+g)/B)));ye=(ye+g*(R-1)/R-je*B)*j/h;var qe=Tt.invert(ye,.25*(Be-X)*h/Me+fe);return qe[0]-=g*(R-1)/R-je*B,Le<0&&(qe[1]=-qe[1]),qe}return Xt.invert(ye,Le)},de}function ln(R,U){return[R,1&U?90-c:Yt]}function Sn(R,U){return[R,1&U?-90+c:-Yt]}function En(R){return[R[0]*(1-c),R[1]]}function jn(){var R=4,U=(0,S.r)(an),j=U(R),X=j.stream;return j.lobes=function(fe){return arguments.length?U(R=+fe):R},j.stream=function(fe){var Me=j.rotate(),B=X(fe),K=(j.rotate([0,0]),X(fe));return j.rotate(Me),B.sphere=function(){var ie,de;(0,sn.Z)((ie=180/R,de=[].concat((0,An.w6)(-180,180+ie/2,ie).map(ln),(0,An.w6)(180,-180-ie/2,-ie).map(Sn)),{type:"Polygon",coordinates:[ie===180?de.map(En):de]}),K)},B},j.scale(239.75)}function Fn(R){var U,j=1+R,X=E(u(1/j)),fe=2*C(g/(U=g+4*X*j)),Me=.5*fe*(j+C(R*(2+R))),B=R*R,K=j*j;function ie(de,ye){var Le,Be,je=1-u(ye);if(je&&je<2){var qe,Ze=f-ye,Qe=25;do{var lt=u(Ze),ht=b(Ze),St=X+T(lt,j-ht),Lt=1+K-2*j*ht;Ze-=qe=(Ze-B*X-j*lt+Lt*St-.5*je*U)/(2*j*lt*St)}while(k(qe)>x&&--Qe>0);Le=fe*C(Lt),Be=de*St/g}else Le=fe*(R+je),Be=de*X/g;return[Le*u(Be),Me-Le*b(Be)]}return ie.invert=function(de,ye){var Le=de*de+(ye-=Me)*ye,Be=(1+K-Le/(fe*fe))/(2*j),je=L(Be),qe=u(je),Ze=X+T(qe,j-Be);return[E(de/C(Le))*g/Ze,E(1-2*(je-B*X-j*qe+(1+K-2*j*Be)*Ze)/U)]},ie}function Xn(){var R=1,U=(0,S.r)(Fn),j=U(R);return j.ratio=function(X){return arguments.length?U(R=+X):R},j.scale(167.774).center([0,18.67])}var Hn=.7109889596207567,nr=.0528035274542;function er(R,U){return U>-Hn?((R=se(R,U))[1]+=nr,R):Ue(R,U)}function tr(){return(0,S.Z)(er).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function lr(R,U){return k(U)>Hn?((R=se(R,U))[1]-=U>0?nr:-nr,R):Ue(R,U)}function ur(){return(0,S.Z)(lr).scale(152.63)}function br(R,U,j,X){var fe=C(4*g/(2*j+(1+R-U/2)*u(2*j)+(R+U)/2*u(4*j)+U/2*u(6*j))),Me=C(X*u(j)*C((1+R*b(2*j)+U*b(4*j))/(1+R+U))),B=j*ie(1);function K(Le){return C(1+R*b(2*Le)+U*b(4*Le))}function ie(Le){var Be=Le*j;return(2*Be+(1+R-U/2)*u(2*Be)+(R+U)/2*u(4*Be)+U/2*u(6*Be))/j}function de(Le){return K(Le)*u(Le)}var ye=function(Le,Be){var je=j*we(ie,B*u(Be)/j,Be/g);isNaN(je)&&(je=j*o(Be));var qe=fe*K(je);return[qe*Me*Le/g*b(je),qe/Me*u(je)]};return ye.invert=function(Le,Be){var je=we(de,Be*Me/fe);return[Le*g/(b(je)*fe*Me*K(je)),E(j*ie(je/j)/B)]},j===0&&(fe=C(X/g),(ye=function(Le,Be){return[Le*fe,u(Be)/fe]}).invert=function(Le,Be){return[Le/fe,E(Be*fe)]}),ye}function Zn(){var R=1,U=0,j=45*w,X=2,fe=(0,S.r)(br),Me=fe(R,U,j,X);return Me.a=function(B){return arguments.length?fe(R=+B,U,j,X):R},Me.b=function(B){return arguments.length?fe(R,U=+B,j,X):U},Me.psiMax=function(B){return arguments.length?fe(R,U,j=+B*w,X):j*A},Me.ratio=function(B){return arguments.length?fe(R,U,j,X=+B):X},Me.scale(180.739)}function pr(R,U,j,X,fe,Me,B,K,ie,de,ye){if(ye.nanEncountered)return NaN;var Le,Be,je,qe,Ze,Qe,lt,ht,St,Lt;if(Be=R(U+.25*(Le=j-U)),je=R(j-.25*Le),isNaN(Be))ye.nanEncountered=!0;else{if(!isNaN(je))return Lt=((Qe=(qe=Le*(X+4*Be+fe)/12)+(Ze=Le*(fe+4*je+Me)/12))-B)/15,de>ie?(ye.maxDepthCount++,Qe+Lt):Math.abs(Lt)<K?Qe+Lt:(ht=pr(R,U,lt=U+.5*Le,X,Be,fe,qe,.5*K,ie,de+1,ye),isNaN(ht)?(ye.nanEncountered=!0,NaN):(St=pr(R,lt,j,fe,je,Me,Ze,.5*K,ie,de+1,ye),isNaN(St)?(ye.nanEncountered=!0,NaN):ht+St));ye.nanEncountered=!0}}function Sr(R,U,j,X,fe){X===void 0&&(X=1e-8),fe===void 0&&(fe=20);var Me=R(U),B=R(.5*(U+j)),K=R(j);return pr(R,U,j,Me,B,K,(Me+4*B+K)*(j-U)/6,X,fe,1,{maxDepthCount:0,nanEncountered:!1})}function Gr(R,U,j){function X(je){return R+(1-R)*n(1-n(je,U),1/U)}function fe(je){return Sr(X,0,je,1e-4)}for(var Me=1/fe(1),B=1e3,K=1.00000001*Me,ie=[],de=0;de<=B;de++)ie.push(fe(de/B)*K);function ye(je){var qe=0,Ze=B,Qe=500;do ie[Qe]>je?Ze=Qe:qe=Qe,Qe=qe+Ze>>1;while(Qe>qe);var lt=ie[Qe+1]-ie[Qe];return lt&&(lt=(je-ie[Qe+1])/lt),(Qe+1+lt)/B}var Le=2*ye(1)/g*Me/j,Be=function(je,qe){var Ze=ye(k(u(qe))),Qe=X(Ze)*je;return Ze/=Le,[Qe,qe>=0?Ze:-Ze]};return Be.invert=function(je,qe){var Ze;return k(qe*=Le)<1&&(Ze=o(qe)*E(fe(k(qe))*Me)),[je/X(k(qe)),Ze]},Be}function ai(){var R=0,U=2.5,j=1.183136,X=(0,S.r)(Gr),fe=X(R,U,j);return fe.alpha=function(Me){return arguments.length?X(R=+Me,U,j):R},fe.k=function(Me){return arguments.length?X(R,U=+Me,j):U},fe.gamma=function(Me){return arguments.length?X(R,U,j=+Me):j},fe.scale(152.63)}function ni(R,U){return k(R[0]-U[0])<c&&k(R[1]-U[1])<c}function ci(R,U){for(var j,X,fe,Me=-1,B=R.length,K=R[0],ie=[];++Me<B;){X=((j=R[Me])[0]-K[0])/U,fe=(j[1]-K[1])/U;for(var de=0;de<U;++de)ie.push([K[0]+de*X,K[1]+de*fe]);K=j}return ie.push(j),ie}function Kr(R,U,j){var X,fe;function Me(ie,de){for(var ye=de<0?-1:1,Le=U[+(de<0)],Be=0,je=Le.length-1;Be<je&&ie>Le[Be][2][0];++Be);var qe=R(ie-Le[Be][1][0],de);return qe[0]+=R(Le[Be][1][0],ye*de>ye*Le[Be][0][1]?Le[Be][0][1]:de)[0],qe}j?Me.invert=j(Me):R.invert&&(Me.invert=function(ie,de){for(var ye=fe[+(de<0)],Le=U[+(de<0)],Be=0,je=ye.length;Be<je;++Be){var qe=ye[Be];if(qe[0][0]<=ie&&ie<qe[1][0]&&qe[0][1]<=de&&de<qe[1][1]){var Ze=R.invert(ie-R(Le[Be][1][0],0)[0],de);return Ze[0]+=Le[Be][1][0],ni(Me(Ze[0],Ze[1]),[ie,de])?Ze:null}}});var B=(0,S.Z)(Me),K=B.stream;return B.stream=function(ie){var de=B.rotate(),ye=K(ie),Le=(B.rotate([0,0]),K(ie));return B.rotate(de),ye.sphere=function(){(0,sn.Z)(X,Le)},ye},B.lobes=function(ie){return arguments.length?(X=function(de){var ye,Le,Be,je,qe,Ze,Qe,lt=[],ht=de[0].length;for(Qe=0;Qe<ht;++Qe)Le=(ye=de[0][Qe])[0][0],Be=ye[0][1],je=ye[1][1],qe=ye[2][0],Ze=ye[2][1],lt.push(ci([[Le+c,Be+c],[Le+c,je-c],[qe-c,je-c],[qe-c,Ze+c]],30));for(Qe=de[1].length-1;Qe>=0;--Qe)Le=(ye=de[1][Qe])[0][0],Be=ye[0][1],je=ye[1][1],qe=ye[2][0],Ze=ye[2][1],lt.push(ci([[qe-c,Ze-c],[qe-c,je+c],[Le+c,je+c],[Le+c,Be-c]],30));return{type:"Polygon",coordinates:[(0,An.TS)(lt)]}}(ie),U=ie.map(function(de){return de.map(function(ye){return[[ye[0][0]*w,ye[0][1]*w],[ye[1][0]*w,ye[1][1]*w],[ye[2][0]*w,ye[2][1]*w]]})}),fe=U.map(function(de){return de.map(function(ye){var Le,Be=R(ye[0][0],ye[0][1])[0],je=R(ye[2][0],ye[2][1])[0],qe=R(ye[1][0],ye[0][1])[1],Ze=R(ye[1][0],ye[1][1])[1];return qe>Ze&&(Le=qe,qe=Ze,Ze=Le),[[Be,qe],[je,Ze]]})}),B):U.map(function(de){return de.map(function(ye){return[[ye[0][0]*A,ye[0][1]*A],[ye[1][0]*A,ye[1][1]*A],[ye[2][0]*A,ye[2][1]*A]]})})},U!=null&&B.lobes(U),B}er.invert=function(R,U){return U>-Hn?se.invert(R,U-nr):Ue.invert(R,U)},lr.invert=function(R,U){return k(U)>Hn?se.invert(R,U+(U>0?nr:-nr)):Ue.invert(R,U)};var bi=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Ha(){return Kr(Ee,bi).scale(160.857)}var ha=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function eo(){return Kr(lr,ha).scale(152.63)}var Vs=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Ro(){return Kr(se,Vs).scale(169.529)}var hs=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Hs(){return Kr(se,hs).scale(169.529).rotate([20,0])}var qa=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function nl(){return Kr(er,qa,xe).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var Fo=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Bo(){return Kr(Ue,Fo).scale(152.63).rotate([-20,0])}function Ga(R,U){return[3/h*R*C(g*g/3-U*U),U]}function Si(){return(0,S.Z)(Ga).scale(158.837)}function ps(R){function U(j,X){if(k(k(X)-f)<c)return[0,X<0?-2:2];var fe=u(X),Me=n((1+fe)/(1-fe),R/2),B=.5*(Me+1/Me)+b(j*=R);return[2*u(j)/B,(Me-1/Me)/B]}return U.invert=function(j,X){var fe=k(X);if(k(fe-2)<c)return j?null:[0,o(X)*f];if(fe>2)return null;var Me=(j/=2)*j,B=(X/=2)*X,K=2*X/(1+Me+B);return K=n((1+K)/(1-K),1/R),[T(2*j,1-Me-B)/R,E((K-1)/(K+1))]},U}function Vr(){var R=.5,U=(0,S.r)(ps),j=U(R);return j.spacing=function(X){return arguments.length?U(R=+X):R},j.scale(124.75)}Ga.invert=function(R,U){return[h/3*R/C(g*g/3-U*U),U]};var Za=g/m;function ba(R,U){return[R*(1+C(b(U)))/2,U/(b(U/2)*b(R/6))]}function to(){return(0,S.Z)(ba).scale(97.2672)}function Ia(R,U){var j=R*R,X=U*U;return[R*(.975534+X*(-.0143059*j-.119161+-.0547009*X)),U*(1.00384+j*(.0802894+-.02855*X+199025e-9*j)+X*(.0998909+-.0491032*X))]}function mo(){return(0,S.Z)(Ia).scale(139.98)}function no(R,U){return[u(R)/b(U),p(U)*b(R)]}function ro(){return(0,S.Z)(no).scale(144.049).clipAngle(89.999)}function Cs(R){var U=b(R),j=p(y+R/2);function X(fe,Me){var B=Me-R,K=k(B)<c?fe*U:k(K=y+Me/2)<c||k(k(K)-f)<c?0:fe*B/e(p(K)/j);return[K,B]}return X.invert=function(fe,Me){var B,K=Me+R;return[k(Me)<c?fe/U:k(B=y+K/2)<c||k(k(B)-f)<c?0:fe*e(p(B)/j)/Me,K]},X}function rl(){return De(Cs).parallel(40).scale(158.837)}function yo(R,U){return[R,1.25*e(p(y+.4*U))]}function il(){return(0,S.Z)(yo).scale(108.318)}function qs(R){var U=R.length-1;function j(X,fe){for(var Me,B=b(fe),K=2/(1+B*b(X)),ie=K*B*u(X),de=K*u(fe),ye=U,Le=R[ye],Be=Le[0],je=Le[1];--ye>=0;)Be=(Le=R[ye])[0]+ie*(Me=Be)-de*je,je=Le[1]+ie*je+de*Me;return[Be=ie*(Me=Be)-de*je,je=ie*je+de*Me]}return j.invert=function(X,fe){var Me=20,B=X,K=fe;do{for(var ie,de=U,ye=R[de],Le=ye[0],Be=ye[1],je=0,qe=0;--de>=0;)je=Le+B*(ie=je)-K*qe,qe=Be+B*qe+K*ie,Le=(ye=R[de])[0]+B*(ie=Le)-K*Be,Be=ye[1]+B*Be+K*ie;var Ze,Qe,lt=(je=Le+B*(ie=je)-K*qe)*je+(qe=Be+B*qe+K*ie)*qe;B-=Ze=((Le=B*(ie=Le)-K*Be-X)*je+(Be=B*Be+K*ie-fe)*qe)/lt,K-=Qe=(Be*je-Le*qe)/lt}while(k(Ze)+k(Qe)>c*c&&--Me>0);if(Me){var ht=C(B*B+K*K),St=2*l(.5*ht),Lt=u(St);return[T(B*Lt,ht*b(St)),ht?E(K*Lt/ht):0]}},j}ba.invert=function(R,U){var j=k(R),X=k(U),fe=c,Me=f;X<Za?Me*=X/Za:fe+=6*L(Za/X);for(var B=0;B<25;B++){var K=u(Me),ie=C(b(Me)),de=u(Me/2),ye=b(Me/2),Le=u(fe/6),Be=b(fe/6),je=.5*fe*(1+ie)-j,qe=Me/(ye*Be)-X,Ze=ie?-.25*fe*K/ie:0,Qe=.5*(1+ie),lt=(1+.5*Me*de/ye)/(ye*Be),ht=Me/ye*(Le/6)/(Be*Be),St=Ze*ht-lt*Qe,Lt=(je*ht-qe*Qe)/St,Mt=(qe*Ze-je*lt)/St;if(Me-=Lt,fe-=Mt,k(Lt)<c&&k(Mt)<c)break}return[R<0?-fe:fe,U<0?-Me:Me]},Ia.invert=function(R,U){var j=o(R)*g,X=U/2,fe=50;do{var Me=j*j,B=X*X,K=j*X,ie=j*(.975534+B*(-.0143059*Me-.119161+-.0547009*B))-R,de=X*(1.00384+Me*(.0802894+-.02855*B+199025e-9*Me)+B*(.0998909+-.0491032*B))-U,ye=.975534-B*(.119161+3*Me*.0143059+.0547009*B),Le=-K*(.238322+.2188036*B+.0286118*Me),Be=K*(.1605788+7961e-7*Me+-.0571*B),je=1.00384+Me*(.0802894+199025e-9*Me)+B*(3*(.0998909-.02855*Me)-.245516*B),qe=Le*Be-je*ye,Ze=(de*Le-ie*je)/qe,Qe=(ie*Be-de*ye)/qe;j-=Ze,X-=Qe}while((k(Ze)>c||k(Qe)>c)&&--fe>0);return fe&&[j,X]},no.invert=function(R,U){var j=R*R,X=U*U+1,fe=j+X,Me=R?v*C((fe-C(fe*fe-4*j))/j):1/C(X);return[E(R*Me),o(U)*L(Me)]},yo.invert=function(R,U){return[R,2.5*l(d(.8*U))-.625*g]};var al=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Gs=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],ol=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],es=[[.9245,0],[0,0],[.01943,0]],xo=[[.721316,0],[0,0],[-.00881625,-.00617325]];function No(){return Aa(al,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function ts(){return Aa(Gs,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Ps(){return Aa(ol,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Zs(){return Aa(es,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function Ys(){return Aa(xo,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Aa(R,U){var j=(0,S.Z)(qs(R)).rotate(U).clipAngle(90),X=(0,$e.Z)(U),fe=j.center;return delete j.rotate,j.center=function(Me){return arguments.length?fe(X(Me)):X.invert(fe())},j}var jo=C(6),Ya=C(7);function io(R,U){var j=E(7*u(U)/(3*jo));return[jo*R*(2*b(2*j/3)-1)/Ya,9*u(j/3)/Ya]}function sl(){return(0,S.Z)(io).scale(164.859)}function bo(R,U){for(var j,X=(1+v)*u(U),fe=U,Me=0;Me<25&&(fe-=j=(u(fe/2)+u(fe)-X)/(.5*b(fe/2)+b(fe)),!(k(j)<c));Me++);return[R*(1+2*b(fe)/b(fe/2))/(3*m),2*C(3)*u(fe/2)/C(2+m)]}function $r(){return(0,S.Z)(bo).scale(188.209)}function Da(R,U){for(var j,X=C(6/(4+g)),fe=(1+g/4)*u(U),Me=U/2,B=0;B<25&&(Me-=j=(Me/2+u(Me)-fe)/(.5+b(Me)),!(k(j)<c));B++);return[X*(.5+b(Me))*R/1.5,X*Me]}function ds(){return(0,S.Z)(Da).scale(166.518)}io.invert=function(R,U){var j=3*E(U*Ya/9);return[R*Ya/(jo*(2*b(2*j/3)-1)),E(3*u(j)*jo/7)]},bo.invert=function(R,U){var j=U*C(2+m)/(2*C(3)),X=2*E(j);return[3*m*R/(1+2*b(X)/b(X/2)),E((j+u(X))/(1+v))]},Da.invert=function(R,U){var j=C(6/(4+g)),X=U/j;return k(k(X)-f)<c&&(X=X<0?-f:f),[1.5*R/(j*(.5+b(X))),E((X/2+u(X))/(1+g/4))]};var Ma=t(26867);function Uo(R,U){var j=U*U,X=j*j,fe=j*X;return[R*(.84719-.13063*j+fe*fe*(.05494*j-.04515-.02326*X+.00331*fe)),U*(1.01183+X*X*(.01926*j-.02625-.00396*X))]}function yl(){return(0,S.Z)(Uo).scale(175.295)}function Os(R,U){return[R*(1+b(U))/2,2*(U-p(U/2))]}function ll(){return(0,S.Z)(Os).scale(152.63)}Uo.invert=function(R,U){var j,X,fe,Me,B=U,K=25;do B-=j=(B*(1.01183+(fe=(X=B*B)*X)*fe*(.01926*X-.02625-.00396*fe))-U)/(1.01183+fe*fe*(.21186*X-.23625+-.05148*fe));while(k(j)>x&&--K>0);return[R/(.84719-.13063*(X=B*B)+(Me=X*(fe=X*X))*Me*(.05494*X-.04515-.02326*fe+.00331*Me)),B]},Os.invert=function(R,U){for(var j=U/2,X=0,fe=1/0;X<10&&k(fe)>c;++X){var Me=b(U/2);U-=fe=(U-p(U/2)-j)/(1-.5/(Me*Me))}return[2*R/(1+b(U)),U]};var ul=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function gs(){return Kr(ce(1/0),ul).rotate([20,0]).scale(152.63)}function ns(R,U){var j=u(U),X=b(U),fe=o(R);if(R===0||k(U)===f)return[0,U];if(U===0)return[R,0];if(k(R)===f)return[R*X,f*j];var Me=g/(2*R)-2*R/g,B=2*U/g,K=(1-B*B)/(j-B),ie=Me*Me,de=K*K,ye=1+ie/de,Le=1+de/ie,Be=(Me*j/K-Me/2)/ye,je=(de*j/ie+K/2)/Le,qe=je*je-(de*j*j/ie+K*j-1)/Le;return[f*(Be+C(Be*Be+X*X/ye)*fe),f*(je+C(qe<0?0:qe)*o(-U*Me)*fe)]}function vs(){return(0,S.Z)(ns).scale(127.267)}ns.invert=function(R,U){var j=(R/=f)*R,X=j+(U/=f)*U,fe=g*g;return[R?(X-1+C((1-X)*(1-X)+4*j))/(2*R)*f:0,we(function(Me){return X*(g*u(Me)-2*Me)*g+4*Me*Me*(U-u(Me))+2*g*Me-fe*U},0)]};var _o=1.0148,ao=.23185,wo=-.14499,oo=.02406,Is=_o,za=5*ao,cl=7*wo,fl=9*oo,Ds=1.790857183;function To(R,U){var j=U*U;return[R,U*(_o+j*j*(ao+j*(wo+oo*j)))]}function zs(){return(0,S.Z)(To).scale(139.319)}function Vo(R,U){if(k(U)<c)return[R,0];var j=p(U),X=R*u(U);return[u(X)/j,U+(1-b(X))/j]}function Ws(){return(0,S.Z)(Vo).scale(103.74)}To.invert=function(R,U){U>Ds?U=Ds:U<-1.790857183&&(U=-1.790857183);var j,X=U;do{var fe=X*X;X-=j=(X*(_o+fe*fe*(ao+fe*(wo+oo*fe)))-U)/(Is+fe*fe*(za+fe*(cl+fl*fe)))}while(k(j)>c);return[R,X]},Vo.invert=function(R,U){if(k(U)<c)return[R,0];var j,X=R*R+U*U,fe=.5*U,Me=10;do{var B=p(fe),K=1/b(fe),ie=X-2*U*fe+fe*fe;fe-=j=(B*ie+2*(fe-U))/(2+ie*K*K+2*(fe-U)*B)}while(k(j)>c&&--Me>0);return B=p(fe),[(k(U)<k(fe+1/B)?E(R*B):o(U)*o(R)*(L(k(R*B))+f))/u(fe),fe]};var rs=t(77338),Ho=t(83074);function ms(R,U){return[R[0]*U[0]+R[1]*U[3],R[0]*U[1]+R[1]*U[4],R[0]*U[2]+R[1]*U[5]+R[2],R[3]*U[0]+R[4]*U[3],R[3]*U[1]+R[4]*U[4],R[3]*U[2]+R[4]*U[5]+R[5]]}function is(R,U){return[R[0]-U[0],R[1]-U[1]]}function Qr(R){return C(R[0]*R[0]+R[1]*R[1])}function ko(R,U,j){function X(K,ie){var de,ye=U(K,ie),Le=ye.project([K*A,ie*A]);return(de=ye.transform)?[de[0]*Le[0]+de[1]*Le[1]+de[2],-(de[3]*Le[0]+de[4]*Le[1]+de[5])]:(Le[1]=-Le[1],Le)}function fe(K,ie){var de=K.project.invert,ye=K.transform,Le=ie;if(ye&&(ye=function(Qe){var lt=1/(Qe[0]*Qe[4]-Qe[1]*Qe[3]);return[lt*Qe[4],-lt*Qe[1],lt*(Qe[1]*Qe[5]-Qe[2]*Qe[4]),-lt*Qe[3],lt*Qe[0],lt*(Qe[2]*Qe[3]-Qe[0]*Qe[5])]}(ye),Le=[ye[0]*Le[0]+ye[1]*Le[1]+ye[2],ye[3]*Le[0]+ye[4]*Le[1]+ye[5]]),de&&K===function(Qe){return U(Qe[0]*w,Qe[1]*w)}(Be=de(Le)))return Be;for(var Be,je=K.children,qe=0,Ze=je&&je.length;qe<Ze;++qe)if(Be=fe(je[qe],ie))return Be}(function K(ie,de){if(ie.edges=function(Mt){for(var Ft=Mt.length,Et=[],en=Mt[Ft-1],Zt=0;Zt<Ft;++Zt)Et.push([en,en=Mt[Zt]]);return Et}(ie.face),de.face){var ye=ie.shared=function(Mt,Ft){for(var Et,en,Zt=Mt.length,Vt=null,pn=0;pn<Zt;++pn){Et=Mt[pn];for(var vn=Ft.length;--vn>=0;)if(en=Ft[vn],Et[0]===en[0]&&Et[1]===en[1]){if(Vt)return[Vt,Et];Vt=Et}}}(ie.face,de.face),Le=(Ze=ye.map(de.project),Qe=ye.map(ie.project),lt=is(Ze[1],Ze[0]),ht=is(Qe[1],Qe[0]),St=function(Mt,Ft){return T(Mt[0]*Ft[1]-Mt[1]*Ft[0],Mt[0]*Ft[0]+Mt[1]*Ft[1])}(lt,ht),Lt=Qr(lt)/Qr(ht),ms([1,0,Ze[0][0],0,1,Ze[0][1]],ms([Lt,0,0,0,Lt,0],ms([b(St),u(St),0,-u(St),b(St),0],[1,0,-Qe[0][0],0,1,-Qe[0][1]]))));ie.transform=de.transform?ms(de.transform,Le):Le;for(var Be=de.edges,je=0,qe=Be.length;je<qe;++je)Ni(ye[0],Be[je][1])&&Ni(ye[1],Be[je][0])&&(Be[je]=ie),Ni(ye[0],Be[je][0])&&Ni(ye[1],Be[je][1])&&(Be[je]=ie);for(je=0,qe=(Be=ie.edges).length;je<qe;++je)Ni(ye[0],Be[je][0])&&Ni(ye[1],Be[je][1])&&(Be[je]=de),Ni(ye[0],Be[je][1])&&Ni(ye[1],Be[je][0])&&(Be[je]=de)}else ie.transform=de.transform;var Ze,Qe,lt,ht,St,Lt;return ie.children&&ie.children.forEach(function(Mt){K(Mt,ie)}),ie})(R,{transform:null}),Nr(R)&&(X.invert=function(K,ie){var de=fe(R,[K,-ie]);return de&&(de[0]*=w,de[1]*=w,de)});var Me=(0,S.Z)(X),B=Me.stream;return Me.stream=function(K){var ie=Me.rotate(),de=B(K),ye=(Me.rotate([0,0]),B(K));return Me.rotate(ie),de.sphere=function(){ye.polygonStart(),ye.lineStart(),so(ye,R),ye.lineEnd(),ye.polygonEnd()},de},Me.angle(j==null?-30:j*A)}function so(R,U,j){var X,fe,Me=U.edges,B=Me.length,K={type:"MultiPoint",coordinates:U.face},ie=U.face.filter(function(Ze){return k(Ze[1])!==90}),de=(0,rs.Z)({type:"MultiPoint",coordinates:ie}),ye=!1,Le=-1,Be=de[1][0]-de[0][0],je=Be===180||Be===360?[(de[0][0]+de[1][0])/2,(de[0][1]+de[1][1])/2]:(0,Ge.Z)(K);if(j)for(;++Le<B&&Me[Le]!==j;);++Le;for(var qe=0;qe<B;++qe)fe=Me[(qe+Le)%B],Array.isArray(fe)?(ye||(R.point((X=(0,Ho.Z)(fe[0],je)(c))[0],X[1]),ye=!0),R.point((X=(0,Ho.Z)(fe[1],je)(c))[0],X[1])):(ye=!1,fe!==j&&so(R,fe,U))}function Ni(R,U){return R&&U&&R[0]===U[0]&&R[1]===U[1]}function Nr(R){return R.project.invert||R.children&&R.children.some(Nr)}var Hr=t(98936),Ao=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],lo=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(R){return R.map(function(U){return Ao[U]})});function Xs(R){R=R||function(j){var X=(0,Ge.Z)({type:"MultiPoint",coordinates:j});return(0,Hr.Z)().scale(1).translate([0,0]).rotate([-X[0],-X[1]])};var U=lo.map(function(j){return{face:j,project:R(j)}});return[-1,0,0,1,0,1,4,5].forEach(function(j,X){var fe=U[j];fe&&(fe.children||(fe.children=[])).push(U[X])}),ko(U[0],function(j,X){return U[j<-g/2?X<0?6:4:j<0?X<0?2:0:j<g/2?X<0?3:1:X<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var ys=2/C(3);function Mo(R,U){var j=Tt(R,U);return[j[0]*ys,j[1]]}function xs(R){R=R||function(j){var X=(0,Ge.Z)({type:"MultiPoint",coordinates:j});return(0,S.Z)(Mo).translate([0,0]).scale(1).rotate(X[1]>0?[-X[0],0]:[180-X[0],180])};var U=lo.map(function(j){return{face:j,project:R(j)}});return[-1,0,0,1,0,1,4,5].forEach(function(j,X){var fe=U[j];fe&&(fe.children||(fe.children=[])).push(U[X])}),ko(U[0],function(j,X){return U[j<-g/2?X<0?6:4:j<0?X<0?2:0:j<g/2?X<0?3:1:X<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function uo(R){R=R||function(Me){var B=Me.length===6?(0,Ge.Z)({type:"MultiPoint",coordinates:Me}):Me[0];return(0,Hr.Z)().scale(1).translate([0,0]).rotate([-B[0],-B[1]])};var U=lo.map(function(Me){for(var B,K=Me.map(di),ie=K.length,de=K[ie-1],ye=[],Le=0;Le<ie;++Le)B=K[Le],ye.push(So([.9486832980505138*de[0]+.31622776601683794*B[0],.9486832980505138*de[1]+.31622776601683794*B[1],.9486832980505138*de[2]+.31622776601683794*B[2]]),So([.9486832980505138*B[0]+.31622776601683794*de[0],.9486832980505138*B[1]+.31622776601683794*de[1],.9486832980505138*B[2]+.31622776601683794*de[2]])),de=B;return ye}),j=[],X=[-1,0,0,1,0,1,4,5];U.forEach(function(Me,B){for(var K,ie,de=lo[B],ye=de.length,Le=j[B]=[],Be=0;Be<ye;++Be)U.push([de[Be],Me[(2*Be+2)%(2*ye)],Me[(2*Be+1)%(2*ye)]]),X.push(B),Le.push((K=di(Me[(2*Be+2)%(2*ye)]),ie=di(Me[(2*Be+1)%(2*ye)]),[K[1]*ie[2]-K[2]*ie[1],K[2]*ie[0]-K[0]*ie[2],K[0]*ie[1]-K[1]*ie[0]]))});var fe=U.map(function(Me){return{project:R(Me),face:Me}});return X.forEach(function(Me,B){var K=fe[Me];K&&(K.children||(K.children=[])).push(fe[B])}),ko(fe[0],function(Me,B){var K=b(B),ie=[K*b(Me),K*u(Me),u(B)],de=Me<-g/2?B<0?6:4:Me<0?B<0?2:0:Me<g/2?B<0?3:1:B<0?7:5,ye=j[de];return fe[qo(ye[0],ie)<0?8+3*de:qo(ye[1],ie)<0?8+3*de+1:qo(ye[2],ie)<0?8+3*de+2:de]}).angle(-30).scale(110.625).center([0,45])}function qo(R,U){for(var j=0,X=R.length,fe=0;j<X;++j)fe+=R[j]*U[j];return fe}function So(R){return[T(R[1],R[0])*A,E(i(-1,r(1,R[2])))*A]}function di(R){var U=R[0]*w,j=R[1]*w,X=b(j);return[X*b(U),X*u(U),u(j)]}function Go(){}function Zo(R,U){var j,X=U.stream;if(!X)throw new Error("invalid projection");switch(R&&R.type){case"Feature":j=Ji;break;case"FeatureCollection":j=Pi;break;default:j=Zi}return j(R,X)}function Pi(R,U){return{type:"FeatureCollection",features:R.features.map(function(j){return Ji(j,U)})}}function Ji(R,U){return{type:"Feature",id:R.id,properties:R.properties,geometry:Zi(R.geometry,U)}}function Zi(R,U){if(!R)return null;if(R.type==="GeometryCollection")return function(X,fe){return{type:"GeometryCollection",geometries:X.geometries.map(function(Me){return Zi(Me,fe)})}}(R,U);var j;switch(R.type){case"Point":case"MultiPoint":j=Eo;break;case"LineString":case"MultiLineString":j=Ra;break;case"Polygon":case"MultiPolygon":case"Sphere":j=ji;break;default:return null}return(0,sn.Z)(R,U(j)),j.result()}Mo.invert=function(R,U){return Tt.invert(R/ys,U)};var Oi=[],ra=[],Eo={point:function(R,U){Oi.push([R,U])},result:function(){var R=Oi.length?Oi.length<2?{type:"Point",coordinates:Oi[0]}:{type:"MultiPoint",coordinates:Oi}:null;return Oi=[],R}},Ra={lineStart:Go,point:function(R,U){Oi.push([R,U])},lineEnd:function(){Oi.length&&(ra.push(Oi),Oi=[])},result:function(){var R=ra.length?ra.length<2?{type:"LineString",coordinates:ra[0]}:{type:"MultiLineString",coordinates:ra}:null;return ra=[],R}},ji={polygonStart:Go,lineStart:Go,point:function(R,U){Oi.push([R,U])},lineEnd:function(){var R=Oi.length;if(R){do Oi.push(Oi[0].slice());while(++R<4);ra.push(Oi),Oi=[]}},polygonEnd:Go,result:function(){if(!ra.length)return null;var R=[],U=[];return ra.forEach(function(j){(function(X){if((fe=X.length)<4)return!1;for(var fe,Me=0,B=X[fe-1][1]*X[0][0]-X[fe-1][0]*X[0][1];++Me<fe;)B+=X[Me-1][1]*X[Me][0]-X[Me-1][0]*X[Me][1];return B<=0})(j)?R.push([j]):U.push(j)}),U.forEach(function(j){var X=j[0];R.some(function(fe){if(function(Me,B){for(var K=B[0],ie=B[1],de=!1,ye=0,Le=Me.length,Be=Le-1;ye<Le;Be=ye++){var je=Me[ye],qe=je[0],Ze=je[1],Qe=Me[Be],lt=Qe[0],ht=Qe[1];Ze>ie^ht>ie&&K<(lt-qe)*(ie-Ze)/(ht-Ze)+qe&&(de=!de)}return de}(fe[0],X))return fe.push(j),!0})||R.push([j])}),ra=[],R.length?R.length>1?{type:"MultiPolygon",coordinates:R}:{type:"Polygon",coordinates:R[0]}:null}};function _a(R){var U=R(f,0)[0]-R(-f,0)[0];function j(X,fe){var Me=k(X)<f,B=R(Me?X:X>0?X-g:X+g,fe),K=(B[0]-B[1])*v,ie=(B[0]+B[1])*v;if(Me)return[K,ie];var de=U*v,ye=K>0^ie>0?-1:1;return[ye*K-o(ie)*de,ye*ie-o(K)*de]}return R.invert&&(j.invert=function(X,fe){var Me=(X+fe)*v,B=(fe-X)*v,K=k(Me)<.5*U&&k(B)<.5*U;if(!K){var ie=U*v,de=Me>0^B>0?-1:1,ye=-de*X+(B>0?1:-1)*ie,Le=-de*fe+(Me>0?1:-1)*ie;Me=(-ye-Le)*v,B=(ye-Le)*v}var Be=R.invert(Me,B);return K||(Be[0]+=Me>0?g:-g),Be}),(0,S.Z)(j).rotate([-90,-90,45]).clipAngle(179.999)}function Sa(){return _a(In).scale(176.423)}function Rs(){return _a(bn).scale(111.48)}function Ea(R,U){if(!(0<=(U=+U)&&U<=20))throw new Error("invalid digits");function j(de){var ye=de.length,Le=2,Be=new Array(ye);for(Be[0]=+de[0].toFixed(U),Be[1]=+de[1].toFixed(U);Le<ye;)Be[Le]=de[Le],++Le;return Be}function X(de){return de.map(j)}function fe(de){for(var ye=j(de[0]),Le=[ye],Be=1;Be<de.length;Be++){var je=j(de[Be]);(je.length>2||je[0]!=ye[0]||je[1]!=ye[1])&&(Le.push(je),ye=je)}return Le.length===1&&de.length>1&&Le.push(j(de[de.length-1])),Le}function Me(de){return de.map(fe)}function B(de){if(de==null)return de;var ye;switch(de.type){case"GeometryCollection":ye={type:"GeometryCollection",geometries:de.geometries.map(B)};break;case"Point":ye={type:"Point",coordinates:j(de.coordinates)};break;case"MultiPoint":ye={type:de.type,coordinates:X(de.coordinates)};break;case"LineString":ye={type:de.type,coordinates:fe(de.coordinates)};break;case"MultiLineString":case"Polygon":ye={type:de.type,coordinates:Me(de.coordinates)};break;case"MultiPolygon":ye={type:"MultiPolygon",coordinates:de.coordinates.map(Me)};break;default:return de}return de.bbox!=null&&(ye.bbox=de.bbox),ye}function K(de){var ye={type:"Feature",properties:de.properties,geometry:B(de.geometry)};return de.id!=null&&(ye.id=de.id),de.bbox!=null&&(ye.bbox=de.bbox),ye}if(R!=null)switch(R.type){case"Feature":return K(R);case"FeatureCollection":var ie={type:"FeatureCollection",features:R.features.map(K)};return R.bbox!=null&&(ie.bbox=R.bbox),ie;default:return B(R)}return R}function Ui(R){var U=u(R);function j(X,fe){var Me=U?p(X*U/2)/U:X/2;if(!fe)return[2*Me,-R];var B=2*l(Me*u(fe)),K=1/p(fe);return[u(B)*K,fe+(1-b(B))*K-R]}return j.invert=function(X,fe){if(k(fe+=R)<c)return[U?2*l(U*X/2)/U:X,0];var Me,B=X*X+fe*fe,K=0,ie=10;do{var de=p(K),ye=1/b(K),Le=B-2*fe*K+K*K;K-=Me=(de*Le+2*(K-fe))/(2+Le*ye*ye+2*(K-fe)*de)}while(k(Me)>c&&--ie>0);var Be=X*(de=p(K)),je=p(k(fe)<k(K+1/de)?.5*E(Be):.5*L(Be)+g/4)/u(K);return[U?2*l(U*je)/U:2*je,K]},j}function xr(){return De(Ui).scale(131.215)}var Ki=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function bs(R,U){var j,X=r(18,36*k(U)/g),fe=s(X),Me=X-fe,B=(j=Ki[fe])[0],K=j[1],ie=(j=Ki[++fe])[0],de=j[1],ye=(j=Ki[r(19,++fe)])[0],Le=j[1];return[R*(ie+Me*(ye-B)/2+Me*Me*(ye-2*ie+B)/2),(U>0?f:-f)*(de+Me*(Le-K)/2+Me*Me*(Le-2*de+K)/2)]}function Fs(){return(0,S.Z)(bs).scale(152.63)}function Yo(R,U){var j=function(B){function K(ie,de){var ye=b(de),Le=(B-1)/(B-ye*b(ie));return[Le*ye*u(ie),Le*u(de)]}return K.invert=function(ie,de){var ye=ie*ie+de*de,Le=C(ye),Be=(B-C(1-ye*(B+1)/(B-1)))/((B-1)/Le+Le/(B-1));return[T(ie*Be,Le*C(1-Be*Be)),Le?E(de*Be/Le):0]},K}(R);if(!U)return j;var X=b(U),fe=u(U);function Me(B,K){var ie=j(B,K),de=ie[1],ye=de*fe/(R-1)+X;return[ie[0]*X/ye,de/ye]}return Me.invert=function(B,K){var ie=(R-1)/(R-1-K*fe);return j.invert(ie*B,ie*K*X)},Me}function Wo(){var R=2,U=0,j=(0,S.r)(Yo),X=j(R,U);return X.distance=function(fe){return arguments.length?j(R=+fe,U):R},X.tilt=function(fe){return arguments.length?j(R,U=fe*w):U*A},X.scale(432.147).clipAngle(L(1/R)*A-1e-6)}Ki.forEach(function(R){R[1]*=1.0144}),bs.invert=function(R,U){var j=U/f,X=90*j,fe=r(18,k(X/5)),Me=i(0,s(fe));do{var B=Ki[Me][1],K=Ki[Me+1][1],ie=Ki[r(19,Me+2)][1],de=ie-B,ye=ie-2*K+B,Le=2*(k(j)-K)/de,Be=ye/de,je=Le*(1-Be*Le*(1-2*Be*Le));if(je>=0||Me===1){X=(U>=0?5:-5)*(je+fe);var qe,Ze=50;do je=(fe=r(18,k(X)/5))-(Me=s(fe)),B=Ki[Me][1],K=Ki[Me+1][1],ie=Ki[r(19,Me+2)][1],X-=(qe=(U>=0?f:-f)*(K+je*(ie-B)/2+je*je*(ie-2*K+B)/2)-U)*A;while(k(qe)>x&&--Ze>0);break}}while(--Me>=0);var Qe=Ki[Me][0],lt=Ki[Me+1][0],ht=Ki[r(19,Me+2)][0];return[R/(lt+je*(ht-Qe)/2+je*je*(ht-2*lt+Qe)/2),X*w]};var co=1e-4,vr=1e4,Fa=-180,as=Fa+co,_s=180,$i=_s-co,Ba=-90,La=Ba+co,wa=90,Wa=wa-co;function fo(R){return R.length>0}function Ii(R){return R===Ba||R===wa?[0,R]:[Fa,(U=R,Math.floor(U*vr)/vr)];var U}function Xo(R){var U=R[0],j=R[1],X=!1;return U<=as?(U=Fa,X=!0):U>=$i&&(U=_s,X=!0),j<=La?(j=Ba,X=!0):j>=Wa&&(j=wa,X=!0),X?[U,j]:R}function os(R){return R.map(Xo)}function Vi(R,U,j){for(var X=0,fe=R.length;X<fe;++X){var Me=R[X].slice();j.push({index:-1,polygon:U,ring:Me});for(var B=0,K=Me.length;B<K;++B){var ie=Me[B],de=ie[0],ye=ie[1];if(de<=as||de>=$i||ye<=La||ye>=Wa){Me[B]=Xo(ie);for(var Le=B+1;Le<K;++Le){var Be=Me[Le],je=Be[0],qe=Be[1];if(je>as&&je<$i&&qe>La&&qe<Wa)break}if(Le===B+1)continue;if(B){var Ze={index:-1,polygon:U,ring:Me.slice(0,B+1)};Ze.ring[Ze.ring.length-1]=Ii(ye),j[j.length-1]=Ze}else j.pop();if(Le>=K)break;j.push({index:-1,polygon:U,ring:Me=Me.slice(Le-1)}),Me[0]=Ii(Me[0][1]),B=-1,K=Me.length}}}}function ei(R){var U,j,X,fe,Me,B,K=R.length,ie={},de={};for(U=0;U<K;++U)X=(j=R[U]).ring[0],Me=j.ring[j.ring.length-1],X[0]!==Me[0]||X[1]!==Me[1]?(j.index=U,ie[X]=de[Me]=j):(j.polygon.push(j.ring),R[U]=null);for(U=0;U<K;++U)if(j=R[U]){if(X=j.ring[0],Me=j.ring[j.ring.length-1],fe=de[X],B=ie[Me],delete ie[X],delete de[Me],X[0]===Me[0]&&X[1]===Me[1]){j.polygon.push(j.ring);continue}fe?(delete de[X],delete ie[fe.ring[0]],fe.ring.pop(),R[fe.index]=null,j={index:-1,polygon:fe.polygon,ring:fe.ring.concat(j.ring)},fe===B?j.polygon.push(j.ring):(j.index=K++,R.push(ie[j.ring[0]]=de[j.ring[j.ring.length-1]]=j))):B?(delete ie[Me],delete de[B.ring[B.ring.length-1]],j.ring.pop(),j={index:K++,polygon:B.polygon,ring:j.ring.concat(B.ring)},R[B.index]=null,R.push(ie[j.ring[0]]=de[j.ring[j.ring.length-1]]=j)):(j.ring.push(j.ring[0]),j.polygon.push(j.ring))}}function ws(R){var U={type:"Feature",geometry:pa(R.geometry)};return R.id!=null&&(U.id=R.id),R.bbox!=null&&(U.bbox=R.bbox),R.properties!=null&&(U.properties=R.properties),U}function pa(R){if(R==null)return R;var U,j,X,fe;switch(R.type){case"GeometryCollection":U={type:"GeometryCollection",geometries:R.geometries.map(pa)};break;case"Point":U={type:"Point",coordinates:Xo(R.coordinates)};break;case"MultiPoint":case"LineString":U={type:R.type,coordinates:os(R.coordinates)};break;case"MultiLineString":U={type:"MultiLineString",coordinates:R.coordinates.map(os)};break;case"Polygon":var Me=[];Vi(R.coordinates,Me,j=[]),ei(j),U={type:"Polygon",coordinates:Me};break;case"MultiPolygon":j=[],X=-1,fe=R.coordinates.length;for(var B=new Array(fe);++X<fe;)Vi(R.coordinates[X],B[X]=[],j);ei(j),U={type:"MultiPolygon",coordinates:B.filter(fo)};break;default:return R}return R.bbox!=null&&(U.bbox=R.bbox),U}function Di(R){if(R==null)return R;switch(R.type){case"Feature":return ws(R);case"FeatureCollection":var U={type:"FeatureCollection",features:R.features.map(ws)};return R.bbox!=null&&(U.bbox=R.bbox),U;default:return pa(R)}}function Xa(R,U){var j=p(U/2),X=u(y*j);return[R*(.74482-.34588*X*X),1.70711*j]}function Js(){return(0,S.Z)(Xa).scale(146.153)}function _i(R,U,j){var X=(0,Ho.Z)(U,j),fe=X(.5),Me=(0,$e.Z)([-fe[0],-fe[1]])(U),B=X.distance/2,K=-E(u(Me[1]*w)/u(B)),ie=[-fe[0],-fe[1],-(Me[0]>0?g-K:K)*A],de=(0,S.Z)(R(B)).rotate(ie),ye=(0,$e.Z)(ie),Le=de.center;return delete de.rotate,de.center=function(Be){return arguments.length?Le(ye(Be)):ye.invert(Le())},de.clipAngle(90)}function Xr(R){var U=b(R);function j(X,fe){var Me=(0,Hr.M)(X,fe);return Me[0]*=U,Me}return j.invert=function(X,fe){return Hr.M.invert(X/U,fe)},j}function Ta(){return Ja([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Ja(R,U){return _i(Xr,R,U)}function Na(R){if(!(R*=2))return ee.N;var U=-R/2,j=-U,X=R*R,fe=p(j),Me=.5/u(j);function B(K,ie){var de=L(b(ie)*b(K-U)),ye=L(b(ie)*b(K-j));return[((de*=de)-(ye*=ye))/(2*R),(ie<0?-1:1)*C(4*X*ye-(X-de+ye)*(X-de+ye))/(2*R)]}return B.invert=function(K,ie){var de,ye,Le=ie*ie,Be=b(C(Le+(de=K+U)*de)),je=b(C(Le+(de=K+j)*de));return[T(ye=Be-je,de=(Be+je)*fe),(ie<0?-1:1)*L(C(de*de+ye*ye)*Me)]},B}function Bs(){return Lo([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Lo(R,U){return _i(Na,R,U)}function Jo(R,U){if(k(U)<c)return[R,0];var j=k(U/f),X=E(j);if(k(R)<c||k(k(U)-f)<c)return[0,o(U)*g*p(X/2)];var fe=b(X),Me=k(g/R-R/g)/2,B=Me*Me,K=fe/(j+fe-1),ie=K*(2/j-1),de=ie*ie,ye=de+B,Le=K-de,Be=B+K;return[o(R)*g*(Me*Le+C(B*Le*Le-ye*(K*K-de)))/ye,o(U)*g*(ie*Be-Me*C((B+1)*ye-Be*Be))/ye]}function Ei(){return(0,S.Z)(Jo).scale(79.4183)}function Yi(R,U){if(k(U)<c)return[R,0];var j=k(U/f),X=E(j);if(k(R)<c||k(k(U)-f)<c)return[0,o(U)*g*p(X/2)];var fe=b(X),Me=k(g/R-R/g)/2,B=Me*Me,K=fe*(C(1+B)-Me*fe)/(1+B*j*j);return[o(R)*g*K,o(U)*g*C(1-K*(2*Me+K))]}function Tr(){return(0,S.Z)(Yi).scale(79.4183)}function Ar(R,U){if(k(U)<c)return[R,0];var j=U/f,X=E(j);if(k(R)<c||k(k(U)-f)<c)return[0,g*p(X/2)];var fe=(g/R-R/g)/2,Me=j/(1+b(X));return[g*(o(R)*C(fe*fe+1-Me*Me)-fe),g*Me]}function ss(){return(0,S.Z)(Ar).scale(79.4183)}function ia(R,U){if(!U)return[R,0];var j=k(U);if(!R||j===f)return[0,U];var X=j/f,fe=X*X,Me=(8*X-fe*(fe+2)-5)/(2*fe*(X-1)),B=Me*Me,K=X*Me,ie=fe+B+2*K,de=X+3*Me,ye=R/f,Le=ye+1/ye,Be=o(k(R)-f)*C(Le*Le-4),je=Be*Be,qe=(Be*(ie+B-1)+2*C(ie*(fe+B*je-1)+(1-fe)*(fe*(de*de+4*B)+12*K*B+4*B*B)))/(4*ie+je);return[o(R)*f*qe,o(U)*f*C(1+Be*k(qe)-qe*qe)]}function Co(){return(0,S.Z)(ia).scale(127.16)}function Wi(R,U,j,X){var fe=g/3;R=i(R,c),U=i(U,c),R=r(R,f),U=r(U,g-c),j=i(j,0),j=r(j,100-c);var Me=(X=i(X,c))/100,B=L((j/100+1)*b(fe))/fe,K=u(R)/u(B*f),ie=U/g,de=C(Me*u(R/2)/u(U/2));return function(ye,Le,Be,je,qe){function Ze(Qe,lt){var ht=Be*u(je*lt),St=C(1-ht*ht),Lt=C(2/(1+St*b(Qe*=qe)));return[ye*St*Lt*u(Qe),Le*ht*Lt]}return Ze.invert=function(Qe,lt){var ht=Qe/ye,St=lt/Le,Lt=C(ht*ht+St*St),Mt=2*E(Lt/2);return[T(Qe*p(Mt),ye*Lt)/qe,Lt&&E(lt*u(Mt)/(Le*Be*Lt))/je]},Ze}(de/C(ie*K*B),1/(de*C(ie*K*B)),K,B,ie)}function ls(){var R=65*w,U=60*w,j=20,X=200,fe=(0,S.r)(Wi),Me=fe(R,U,j,X);return Me.poleline=function(B){return arguments.length?fe(R=+B*w,U,j,X):R*A},Me.parallels=function(B){return arguments.length?fe(R,U=+B*w,j,X):U*A},Me.inflation=function(B){return arguments.length?fe(R,U,j=+B,X):j},Me.ratio=function(B){return arguments.length?fe(R,U,j,X=+B):X},Me.scale(163.775)}function Xi(){return ls().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}Xa.invert=function(R,U){var j=U/1.70711,X=u(y*j);return[R/(.74482-.34588*X*X),2*l(j)]},Jo.invert=function(R,U){if(k(U)<c)return[R,0];if(k(R)<c)return[0,f*u(2*l(U/g))];var j=(R/=g)*R,X=(U/=g)*U,fe=j+X,Me=fe*fe,B=-k(U)*(1+fe),K=B-2*X+j,ie=-2*B+1+2*X+Me,de=X/ie+(2*K*K*K/(ie*ie*ie)-9*B*K/(ie*ie))/27,ye=(B-K*K/(3*ie))/ie,Le=2*C(-ye/3),Be=L(3*de/(ye*Le))/3;return[g*(fe-1+C(1+2*(j-X)+Me))/(2*R),o(U)*g*(-Le*b(Be+g/3)-K/(3*ie))]},Yi.invert=function(R,U){if(!R)return[0,f*u(2*l(U/g))];var j=k(R/g),X=(1-j*j-(U/=g)*U)/(2*j),fe=C(X*X+1);return[o(R)*g*(fe-X),o(U)*f*u(2*T(C((1-2*X*j)*(X+fe)-j),C(fe+X+j)))]},Ar.invert=function(R,U){if(!U)return[R,0];var j=U/g,X=(g*g*(1-j*j)-R*R)/(2*g*R);return[R?g*(o(R)*C(X*X+1)-X):0,f*u(2*l(j))]},ia.invert=function(R,U){var j;if(!R||!U)return[R,U];U/=g;var X=o(R)*R/f,fe=(X*X-1+4*U*U)/k(X),Me=fe*fe,B=2*U,K=50;do{var ie=B*B,de=(8*B-ie*(ie+2)-5)/(2*ie*(B-1)),ye=(3*B-ie*B-10)/(2*ie*B),Le=de*de,Be=B*de,je=B+de,qe=je*je,Ze=B+3*de,Qe=-2*je*(4*Be*Le+(1-4*ie+3*ie*ie)*(1+ye)+Le*(14*ie-6-Me+(8*ie-8-2*Me)*ye)+Be*(12*ie-8+(10*ie-10-Me)*ye)),lt=C(qe*(ie+Le*Me-1)+(1-ie)*(ie*(Ze*Ze+4*Le)+Le*(12*Be+4*Le)));B-=j=(fe*(qe+Le-1)+2*lt-X*(4*qe+Me))/(fe*(2*de*ye+2*je*(1+ye))+Qe/lt-8*je*(fe*(-1+Le+qe)+2*lt)*(1+ye)/(Me+4*qe))}while(j>c&&--K>0);return[o(R)*(C(fe*fe+4)+fe)*g/4,f*B]};var Po=4*g+3*C(3),Oo=2*C(2*g*C(3)/Po),Cr=Te(Oo*C(3)/g,Oo,Po/6);function zi(){return(0,S.Z)(Cr).scale(176.84)}function Ka(R,U){return[R*C(1-3*U*U/(g*g)),U]}function da(){return(0,S.Z)(Ka).scale(152.63)}function Ko(R,U){var j=b(U),X=b(R)*j,fe=1-X,Me=b(R=T(u(R)*j,-u(U))),B=u(R);return[B*(j=C(1-X*X))-Me*fe,-Me*j-B*fe]}function us(){return(0,S.Z)(Ko).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function $o(R,U){var j=H(R,U);return[(j[0]+R/f)/2,(j[1]+U)/2]}function ho(){return(0,S.Z)($o).scale(158.837)}Ka.invert=function(R,U){return[R/C(1-3*U*U/(g*g)),U]},Ko.invert=function(R,U){var j=(R*R+U*U)/-2,X=C(-j*(2+j)),fe=U*j+R*X,Me=R*j-U*X,B=C(Me*Me+fe*fe);return[T(X*fe,B*(1+j)),B?-E(X*Me/B):0]},$o.invert=function(R,U){var j=R,X=U,fe=25;do{var Me,B=b(X),K=u(X),ie=u(2*X),de=K*K,ye=B*B,Le=u(j),Be=b(j/2),je=u(j/2),qe=je*je,Ze=1-ye*Be*Be,Qe=Ze?L(B*Be)*C(Me=1/Ze):Me=0,lt=.5*(2*Qe*B*je+j/f)-R,ht=.5*(Qe*K+X)-U,St=.5*Me*(ye*qe+Qe*B*Be*de)+.5/f,Lt=Me*(Le*ie/4-Qe*K*je),Mt=.125*Me*(ie*je-Qe*K*ye*Le),Ft=.5*Me*(de*Be+Qe*qe*B)+.5,Et=Lt*Mt-Ft*St,en=(ht*Lt-lt*Ft)/Et,Zt=(lt*Mt-ht*St)/Et;j-=en,X-=Zt}while((k(en)>c||k(Zt)>c)&&--fe>0);return[j,X]}},33940:function(Q,z,t){function S(){return new k}function k(){this.reset()}t.d(z,{Z:function(){return S}}),k.prototype={constructor:k,reset:function(){this.s=this.t=0},add:function(b){T(l,b,this.t),T(this,l.s,this.s),this.s?this.t+=l.t:this.s=l.t},valueOf:function(){return this.s}};var l=new k;function T(b,d,s){var e=b.s=d+s,i=e-d,r=e-i;b.t=d-r+(s-i)}},97860:function(Q,z,t){t.d(z,{L9:function(){return r},ZP:function(){return x},gL:function(){return a}});var S,k,l,T,b,d=t(33940),s=t(39695),e=t(73182),i=t(72736),r=(0,d.Z)(),n=(0,d.Z)(),a={point:e.Z,lineStart:e.Z,lineEnd:e.Z,polygonStart:function(){r.reset(),a.lineStart=o,a.lineEnd=u},polygonEnd:function(){var g=+r;n.add(g<0?s.BZ+g:g),this.lineStart=this.lineEnd=this.point=e.Z},sphere:function(){n.add(s.BZ)}};function o(){a.point=p}function u(){c(S,k)}function p(g,f){a.point=c,S=g,k=f,g*=s.uR,f*=s.uR,l=g,T=(0,s.mC)(f=f/2+s.pu),b=(0,s.O$)(f)}function c(g,f){g*=s.uR,f=(f*=s.uR)/2+s.pu;var y=g-l,v=y>=0?1:-1,m=v*y,_=(0,s.mC)(f),h=(0,s.O$)(f),A=b*h,w=T*_+A*(0,s.mC)(m),E=A*v*(0,s.O$)(m);r.add((0,s.fv)(E,w)),l=g,T=_,b=h}function x(g){return n.reset(),(0,i.Z)(g,a),2*n}},77338:function(Q,z,t){t.d(z,{Z:function(){return L}});var S,k,l,T,b,d,s,e,i,r,n=t(33940),a=t(97860),o=t(7620),u=t(39695),p=t(72736),c=(0,n.Z)(),x={point:g,lineStart:y,lineEnd:v,polygonStart:function(){x.point=m,x.lineStart=_,x.lineEnd=h,c.reset(),a.gL.polygonStart()},polygonEnd:function(){a.gL.polygonEnd(),x.point=g,x.lineStart=y,x.lineEnd=v,a.L9<0?(S=-(l=180),k=-(T=90)):c>u.Ho?T=90:c<-u.Ho&&(k=-90),r[0]=S,r[1]=l},sphere:function(){S=-(l=180),k=-(T=90)}};function g(C,P){i.push(r=[S=C,l=C]),P<k&&(k=P),P>T&&(T=P)}function f(C,P){var D=(0,o.Og)([C*u.uR,P*u.uR]);if(e){var G=(0,o.T5)(e,D),I=[G[1],-G[0],0],H=(0,o.T5)(I,G);(0,o.iJ)(H),H=(0,o.Y1)(H);var N,F=C-b,V=F>0?1:-1,q=H[0]*u.RW*V,te=(0,u.Wn)(F)>180;te^(V*b<q&&q<V*C)?(N=H[1]*u.RW)>T&&(T=N):te^(V*b<(q=(q+360)%360-180)&&q<V*C)?(N=-H[1]*u.RW)<k&&(k=N):(P<k&&(k=P),P>T&&(T=P)),te?C<b?A(S,C)>A(S,l)&&(l=C):A(C,l)>A(S,l)&&(S=C):l>=S?(C<S&&(S=C),C>l&&(l=C)):C>b?A(S,C)>A(S,l)&&(l=C):A(C,l)>A(S,l)&&(S=C)}else i.push(r=[S=C,l=C]);P<k&&(k=P),P>T&&(T=P),e=D,b=C}function y(){x.point=f}function v(){r[0]=S,r[1]=l,x.point=g,e=null}function m(C,P){if(e){var D=C-b;c.add((0,u.Wn)(D)>180?D+(D>0?360:-360):D)}else d=C,s=P;a.gL.point(C,P),f(C,P)}function _(){a.gL.lineStart()}function h(){m(d,s),a.gL.lineEnd(),(0,u.Wn)(c)>u.Ho&&(S=-(l=180)),r[0]=S,r[1]=l,e=null}function A(C,P){return(P-=C)<0?P+360:P}function w(C,P){return C[0]-P[0]}function E(C,P){return C[0]<=C[1]?C[0]<=P&&P<=C[1]:P<C[0]||C[1]<P}function L(C){var P,D,G,I,H,N,F;if(T=l=-(S=k=1/0),i=[],(0,p.Z)(C,x),D=i.length){for(i.sort(w),P=1,H=[G=i[0]];P<D;++P)E(G,(I=i[P])[0])||E(G,I[1])?(A(G[0],I[1])>A(G[0],G[1])&&(G[1]=I[1]),A(I[0],G[1])>A(G[0],G[1])&&(G[0]=I[0])):H.push(G=I);for(N=-1/0,P=0,G=H[D=H.length-1];P<=D;G=I,++P)I=H[P],(F=A(G[1],I[0]))>N&&(N=F,S=I[0],l=G[1])}return i=r=null,S===1/0||k===1/0?[[NaN,NaN],[NaN,NaN]]:[[S,k],[l,T]]}},7620:function(Q,z,t){t.d(z,{Og:function(){return l},T:function(){return s},T5:function(){return b},Y1:function(){return k},iJ:function(){return e},j9:function(){return T},s0:function(){return d}});var S=t(39695);function k(i){return[(0,S.fv)(i[1],i[0]),(0,S.ZR)(i[2])]}function l(i){var r=i[0],n=i[1],a=(0,S.mC)(n);return[a*(0,S.mC)(r),a*(0,S.O$)(r),(0,S.O$)(n)]}function T(i,r){return i[0]*r[0]+i[1]*r[1]+i[2]*r[2]}function b(i,r){return[i[1]*r[2]-i[2]*r[1],i[2]*r[0]-i[0]*r[2],i[0]*r[1]-i[1]*r[0]]}function d(i,r){i[0]+=r[0],i[1]+=r[1],i[2]+=r[2]}function s(i,r){return[i[0]*r,i[1]*r,i[2]*r]}function e(i){var r=(0,S._b)(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=r,i[1]/=r,i[2]/=r}},66624:function(Q,z,t){t.d(z,{Z:function(){return D}});var S,k,l,T,b,d,s,e,i,r,n,a,o,u,p,c,x=t(39695),g=t(73182),f=t(72736),y={sphere:g.Z,point:v,lineStart:_,lineEnd:w,polygonStart:function(){y.lineStart=E,y.lineEnd=L},polygonEnd:function(){y.lineStart=_,y.lineEnd=w}};function v(G,I){G*=x.uR,I*=x.uR;var H=(0,x.mC)(I);m(H*(0,x.mC)(G),H*(0,x.O$)(G),(0,x.O$)(I))}function m(G,I,H){++S,l+=(G-l)/S,T+=(I-T)/S,b+=(H-b)/S}function _(){y.point=h}function h(G,I){G*=x.uR,I*=x.uR;var H=(0,x.mC)(I);u=H*(0,x.mC)(G),p=H*(0,x.O$)(G),c=(0,x.O$)(I),y.point=A,m(u,p,c)}function A(G,I){G*=x.uR,I*=x.uR;var H=(0,x.mC)(I),N=H*(0,x.mC)(G),F=H*(0,x.O$)(G),V=(0,x.O$)(I),q=(0,x.fv)((0,x._b)((q=p*V-c*F)*q+(q=c*N-u*V)*q+(q=u*F-p*N)*q),u*N+p*F+c*V);k+=q,d+=q*(u+(u=N)),s+=q*(p+(p=F)),e+=q*(c+(c=V)),m(u,p,c)}function w(){y.point=v}function E(){y.point=C}function L(){P(a,o),y.point=v}function C(G,I){a=G,o=I,G*=x.uR,I*=x.uR,y.point=P;var H=(0,x.mC)(I);u=H*(0,x.mC)(G),p=H*(0,x.O$)(G),c=(0,x.O$)(I),m(u,p,c)}function P(G,I){G*=x.uR,I*=x.uR;var H=(0,x.mC)(I),N=H*(0,x.mC)(G),F=H*(0,x.O$)(G),V=(0,x.O$)(I),q=p*V-c*F,te=c*N-u*V,$=u*F-p*N,W=(0,x._b)(q*q+te*te+$*$),Z=(0,x.ZR)(W),J=W&&-Z/W;i+=J*q,r+=J*te,n+=J*$,k+=Z,d+=Z*(u+(u=N)),s+=Z*(p+(p=F)),e+=Z*(c+(c=V)),m(u,p,c)}function D(G){S=k=l=T=b=d=s=e=i=r=n=0,(0,f.Z)(G,y);var I=i,H=r,N=n,F=I*I+H*H+N*N;return F<x.aW&&(I=d,H=s,N=e,k<x.Ho&&(I=l,H=T,N=b),(F=I*I+H*H+N*N)<x.aW)?[NaN,NaN]:[(0,x.fv)(H,I)*x.RW,(0,x.ZR)(N/(0,x._b)(F))*x.RW]}},7613:function(Q,z,t){t.d(z,{m:function(){return b},Z:function(){return s}});var S=t(7620);function k(e){return function(){return e}}var l=t(39695),T=t(49386);function b(e,i,r,n,a,o){if(r){var u=(0,l.mC)(i),p=(0,l.O$)(i),c=n*r;a==null?(a=i+n*l.BZ,o=i-c/2):(a=d(u,a),o=d(u,o),(n>0?a<o:a>o)&&(a+=n*l.BZ));for(var x,g=a;n>0?g>o:g<o;g-=c)x=(0,S.Y1)([u,-p*(0,l.mC)(g),-p*(0,l.O$)(g)]),e.point(x[0],x[1])}}function d(e,i){(i=(0,S.Og)(i))[0]-=e,(0,S.iJ)(i);var r=(0,l.Kh)(-i[1]);return((-i[2]<0?-r:r)+l.BZ-l.Ho)%l.BZ}function s(){var e,i,r=k([0,0]),n=k(90),a=k(6),o={point:function(p,c){e.push(p=i(p,c)),p[0]*=l.RW,p[1]*=l.RW}};function u(){var p=r.apply(this,arguments),c=n.apply(this,arguments)*l.uR,x=a.apply(this,arguments)*l.uR;return e=[],i=(0,T.I)(-p[0]*l.uR,-p[1]*l.uR,0).invert,b(o,c,x,1),p={type:"Polygon",coordinates:[e]},e=i=null,p}return u.center=function(p){return arguments.length?(r=typeof p=="function"?p:k([+p[0],+p[1]]),u):r},u.radius=function(p){return arguments.length?(n=typeof p=="function"?p:k(+p),u):n},u.precision=function(p){return arguments.length?(a=typeof p=="function"?p:k(+p),u):a},u}},87070:function(Q,z,t){var S=t(97023),k=t(39695);z.Z=(0,S.Z)(function(){return!0},function(l){var T,b=NaN,d=NaN,s=NaN;return{lineStart:function(){l.lineStart(),T=1},point:function(e,i){var r=e>0?k.pi:-k.pi,n=(0,k.Wn)(e-b);(0,k.Wn)(n-k.pi)<k.Ho?(l.point(b,d=(d+i)/2>0?k.ou:-k.ou),l.point(s,d),l.lineEnd(),l.lineStart(),l.point(r,d),l.point(e,d),T=0):s!==r&&n>=k.pi&&((0,k.Wn)(b-s)<k.Ho&&(b-=s*k.Ho),(0,k.Wn)(e-r)<k.Ho&&(e-=r*k.Ho),d=function(a,o,u,p){var c,x,g=(0,k.O$)(a-u);return(0,k.Wn)(g)>k.Ho?(0,k.z4)(((0,k.O$)(o)*(x=(0,k.mC)(p))*(0,k.O$)(u)-(0,k.O$)(p)*(c=(0,k.mC)(o))*(0,k.O$)(a))/(c*x*g)):(o+p)/2}(b,d,e,i),l.point(s,d),l.lineEnd(),l.lineStart(),l.point(r,d),T=0),l.point(b=e,d=i),s=r},lineEnd:function(){l.lineEnd(),b=d=NaN},clean:function(){return 2-T}}},function(l,T,b,d){var s;if(l==null)s=b*k.ou,d.point(-k.pi,s),d.point(0,s),d.point(k.pi,s),d.point(k.pi,0),d.point(k.pi,-s),d.point(0,-s),d.point(-k.pi,-s),d.point(-k.pi,0),d.point(-k.pi,s);else if((0,k.Wn)(l[0]-T[0])>k.Ho){var e=l[0]<T[0]?k.pi:-k.pi;s=b*e/2,d.point(-e,s),d.point(0,s),d.point(e,s)}else d.point(T[0],T[1])},[-k.pi,-k.ou])},85272:function(Q,z,t){t.d(z,{Z:function(){return k}});var S=t(73182);function k(){var l,T=[];return{point:function(b,d,s){l.push([b,d,s])},lineStart:function(){T.push(l=[])},lineEnd:S.Z,rejoin:function(){T.length>1&&T.push(T.pop().concat(T.shift()))},result:function(){var b=T;return T=[],l=null,b}}}},1457:function(Q,z,t){t.d(z,{Z:function(){return d}});var S=t(7620),k=t(7613),l=t(39695),T=t(67108),b=t(97023);function d(s){var e=(0,l.mC)(s),i=6*l.uR,r=e>0,n=(0,l.Wn)(e)>l.Ho;function a(p,c){return(0,l.mC)(p)*(0,l.mC)(c)>e}function o(p,c,x){var g=(0,S.Og)(p),f=(0,S.Og)(c),y=[1,0,0],v=(0,S.T5)(g,f),m=(0,S.j9)(v,v),_=v[0],h=m-_*_;if(!h)return!x&&p;var A=e*m/h,w=-e*_/h,E=(0,S.T5)(y,v),L=(0,S.T)(y,A),C=(0,S.T)(v,w);(0,S.s0)(L,C);var P=E,D=(0,S.j9)(L,P),G=(0,S.j9)(P,P),I=D*D-G*((0,S.j9)(L,L)-1);if(!(I<0)){var H=(0,l._b)(I),N=(0,S.T)(P,(-D-H)/G);if((0,S.s0)(N,L),N=(0,S.Y1)(N),!x)return N;var F,V=p[0],q=c[0],te=p[1],$=c[1];q<V&&(F=V,V=q,q=F);var W=q-V,Z=(0,l.Wn)(W-l.pi)<l.Ho;if(!Z&&$<te&&(F=te,te=$,$=F),Z||W<l.Ho?Z?te+$>0^N[1]<((0,l.Wn)(N[0]-V)<l.Ho?te:$):te<=N[1]&&N[1]<=$:W>l.pi^(V<=N[0]&&N[0]<=q)){var J=(0,S.T)(P,(-D+H)/G);return(0,S.s0)(J,L),[N,(0,S.Y1)(J)]}}}function u(p,c){var x=r?s:l.pi-s,g=0;return p<-x?g|=1:p>x&&(g|=2),c<-x?g|=4:c>x&&(g|=8),g}return(0,b.Z)(a,function(p){var c,x,g,f,y;return{lineStart:function(){f=g=!1,y=1},point:function(v,m){var _,h=[v,m],A=a(v,m),w=r?A?0:u(v,m):A?u(v+(v<0?l.pi:-l.pi),m):0;if(!c&&(f=g=A)&&p.lineStart(),A!==g&&(!(_=o(c,h))||(0,T.Z)(c,_)||(0,T.Z)(h,_))&&(h[2]=1),A!==g)y=0,A?(p.lineStart(),_=o(h,c),p.point(_[0],_[1])):(_=o(c,h),p.point(_[0],_[1],2),p.lineEnd()),c=_;else if(n&&c&&r^A){var E;w&x||!(E=o(h,c,!0))||(y=0,r?(p.lineStart(),p.point(E[0][0],E[0][1]),p.point(E[1][0],E[1][1]),p.lineEnd()):(p.point(E[1][0],E[1][1]),p.lineEnd(),p.lineStart(),p.point(E[0][0],E[0][1],3)))}!A||c&&(0,T.Z)(c,h)||p.point(h[0],h[1]),c=h,g=A,x=w},lineEnd:function(){g&&p.lineEnd(),c=null},clean:function(){return y|(f&&g)<<1}}},function(p,c,x,g){(0,k.m)(g,s,i,x,p,c)},r?[0,-s]:[-l.pi,s-l.pi])}},97023:function(Q,z,t){t.d(z,{Z:function(){return d}});var S=t(85272),k=t(46225),l=t(39695),T=t(23071),b=t(33064);function d(i,r,n,a){return function(o){var u,p,c,x=r(o),g=(0,S.Z)(),f=r(g),y=!1,v={point:m,lineStart:h,lineEnd:A,polygonStart:function(){v.point=w,v.lineStart=E,v.lineEnd=L,p=[],u=[]},polygonEnd:function(){v.point=m,v.lineStart=h,v.lineEnd=A,p=(0,b.TS)(p);var C=(0,T.Z)(u,a);p.length?(y||(o.polygonStart(),y=!0),(0,k.Z)(p,e,C,n,o)):C&&(y||(o.polygonStart(),y=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),y&&(o.polygonEnd(),y=!1),p=u=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function m(C,P){i(C,P)&&o.point(C,P)}function _(C,P){x.point(C,P)}function h(){v.point=_,x.lineStart()}function A(){v.point=m,x.lineEnd()}function w(C,P){c.push([C,P]),f.point(C,P)}function E(){f.lineStart(),c=[]}function L(){w(c[0][0],c[0][1]),f.lineEnd();var C,P,D,G,I=f.clean(),H=g.result(),N=H.length;if(c.pop(),u.push(c),c=null,N)if(1&I){if((P=(D=H[0]).length-1)>0){for(y||(o.polygonStart(),y=!0),o.lineStart(),C=0;C<P;++C)o.point((G=D[C])[0],G[1]);o.lineEnd()}}else N>1&&2&I&&H.push(H.pop().concat(H.shift())),p.push(H.filter(s))}return v}}function s(i){return i.length>1}function e(i,r){return((i=i.x)[0]<0?i[1]-l.ou-l.Ho:l.ou-i[1])-((r=r.x)[0]<0?r[1]-l.ou-l.Ho:l.ou-r[1])}},87605:function(Q,z,t){t.d(z,{Z:function(){return s}});var S=t(39695),k=t(85272),l=t(46225),T=t(33064),b=1e9,d=-b;function s(e,i,r,n){function a(x,g){return e<=x&&x<=r&&i<=g&&g<=n}function o(x,g,f,y){var v=0,m=0;if(x==null||(v=u(x,f))!==(m=u(g,f))||c(x,g)<0^f>0)do y.point(v===0||v===3?e:r,v>1?n:i);while((v=(v+f+4)%4)!==m);else y.point(g[0],g[1])}function u(x,g){return(0,S.Wn)(x[0]-e)<S.Ho?g>0?0:3:(0,S.Wn)(x[0]-r)<S.Ho?g>0?2:1:(0,S.Wn)(x[1]-i)<S.Ho?g>0?1:0:g>0?3:2}function p(x,g){return c(x.x,g.x)}function c(x,g){var f=u(x,1),y=u(g,1);return f!==y?f-y:f===0?g[1]-x[1]:f===1?x[0]-g[0]:f===2?x[1]-g[1]:g[0]-x[0]}return function(x){var g,f,y,v,m,_,h,A,w,E,L,C=x,P=(0,k.Z)(),D={point:G,lineStart:function(){D.point=I,f&&f.push(y=[]),E=!0,w=!1,h=A=NaN},lineEnd:function(){g&&(I(v,m),_&&w&&P.rejoin(),g.push(P.result())),D.point=G,w&&C.lineEnd()},polygonStart:function(){C=P,g=[],f=[],L=!0},polygonEnd:function(){var H=function(){for(var V=0,q=0,te=f.length;q<te;++q)for(var $,W,Z=f[q],J=1,ee=Z.length,re=Z[0],ae=re[0],oe=re[1];J<ee;++J)$=ae,W=oe,ae=(re=Z[J])[0],oe=re[1],W<=n?oe>n&&(ae-$)*(n-W)>(oe-W)*(e-$)&&++V:oe<=n&&(ae-$)*(n-W)<(oe-W)*(e-$)&&--V;return V}(),N=L&&H,F=(g=(0,T.TS)(g)).length;(N||F)&&(x.polygonStart(),N&&(x.lineStart(),o(null,null,1,x),x.lineEnd()),F&&(0,l.Z)(g,p,H,o,x),x.polygonEnd()),C=x,g=f=y=null}};function G(H,N){a(H,N)&&C.point(H,N)}function I(H,N){var F=a(H,N);if(f&&y.push([H,N]),E)v=H,m=N,_=F,E=!1,F&&(C.lineStart(),C.point(H,N));else if(F&&w)C.point(H,N);else{var V=[h=Math.max(d,Math.min(b,h)),A=Math.max(d,Math.min(b,A))],q=[H=Math.max(d,Math.min(b,H)),N=Math.max(d,Math.min(b,N))];(function(te,$,W,Z,J,ee){var re,ae=te[0],oe=te[1],ce=0,pe=1,ve=$[0]-ae,we=$[1]-oe;if(re=W-ae,ve||!(re>0)){if(re/=ve,ve<0){if(re<ce)return;re<pe&&(pe=re)}else if(ve>0){if(re>pe)return;re>ce&&(ce=re)}if(re=J-ae,ve||!(re<0)){if(re/=ve,ve<0){if(re>pe)return;re>ce&&(ce=re)}else if(ve>0){if(re<ce)return;re<pe&&(pe=re)}if(re=Z-oe,we||!(re>0)){if(re/=we,we<0){if(re<ce)return;re<pe&&(pe=re)}else if(we>0){if(re>pe)return;re>ce&&(ce=re)}if(re=ee-oe,we||!(re<0)){if(re/=we,we<0){if(re>pe)return;re>ce&&(ce=re)}else if(we>0){if(re<ce)return;re<pe&&(pe=re)}return ce>0&&(te[0]=ae+ce*ve,te[1]=oe+ce*we),pe<1&&($[0]=ae+pe*ve,$[1]=oe+pe*we),!0}}}}})(V,q,e,i,r,n)?(w||(C.lineStart(),C.point(V[0],V[1])),C.point(q[0],q[1]),F||C.lineEnd(),L=!1):F&&(C.lineStart(),C.point(H,N),L=!1)}h=H,A=N,w=F}return D}}},46225:function(Q,z,t){t.d(z,{Z:function(){return T}});var S=t(67108),k=t(39695);function l(d,s,e,i){this.x=d,this.z=s,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function T(d,s,e,i,r){var n,a,o=[],u=[];if(d.forEach(function(y){if(!((v=y.length-1)<=0)){var v,m,_=y[0],h=y[v];if((0,S.Z)(_,h)){if(!_[2]&&!h[2]){for(r.lineStart(),n=0;n<v;++n)r.point((_=y[n])[0],_[1]);return void r.lineEnd()}h[0]+=2*k.Ho}o.push(m=new l(_,y,null,!0)),u.push(m.o=new l(_,null,m,!1)),o.push(m=new l(h,y,null,!1)),u.push(m.o=new l(h,null,m,!0))}}),o.length){for(u.sort(s),b(o),b(u),n=0,a=u.length;n<a;++n)u[n].e=e=!e;for(var p,c,x=o[0];;){for(var g=x,f=!0;g.v;)if((g=g.n)===x)return;p=g.z,r.lineStart();do{if(g.v=g.o.v=!0,g.e){if(f)for(n=0,a=p.length;n<a;++n)r.point((c=p[n])[0],c[1]);else i(g.x,g.n.x,1,r);g=g.n}else{if(f)for(p=g.p.z,n=p.length-1;n>=0;--n)r.point((c=p[n])[0],c[1]);else i(g.x,g.p.x,-1,r);g=g.p}p=(g=g.o).z,f=!f}while(!g.v);r.lineEnd()}}}function b(d){if(s=d.length){for(var s,e,i=0,r=d[0];++i<s;)r.n=e=d[i],e.p=r,r=e;r.n=e=d[0],e.p=r}}},96059:function(Q,z,t){function S(k,l){function T(b,d){return b=k(b,d),l(b[0],b[1])}return k.invert&&l.invert&&(T.invert=function(b,d){return(b=l.invert(b,d))&&k.invert(b[0],b[1])}),T}t.d(z,{Z:function(){return S}})},8593:function(Q,z,t){function S(k){return k}t.d(z,{Z:function(){return S}})},27362:function(Q,z,t){t.r(z),t.d(z,{geoAlbers:function(){return vt},geoAlbersUsa:function(){return kt},geoArea:function(){return S.ZP},geoAzimuthalEqualArea:function(){return ut.Z},geoAzimuthalEqualAreaRaw:function(){return ut.l},geoAzimuthalEquidistant:function(){return ft.Z},geoAzimuthalEquidistantRaw:function(){return ft.N},geoBounds:function(){return k.Z},geoCentroid:function(){return l.Z},geoCircle:function(){return T.Z},geoClipAntimeridian:function(){return b.Z},geoClipCircle:function(){return d.Z},geoClipExtent:function(){return e},geoClipRectangle:function(){return s.Z},geoConicConformal:function(){return Wt},geoConicConformalRaw:function(){return qt},geoConicEqualArea:function(){return pt},geoConicEqualAreaRaw:function(){return dt},geoConicEquidistant:function(){return xn},geoConicEquidistantRaw:function(){return fn},geoContains:function(){return H},geoDistance:function(){return A},geoEqualEarth:function(){return dn},geoEqualEarthRaw:function(){return hn},geoEquirectangular:function(){return jt.Z},geoEquirectangularRaw:function(){return jt.k},geoGnomonic:function(){return Mn.Z},geoGnomonicRaw:function(){return Mn.M},geoGraticule:function(){return q},geoGraticule10:function(){return te},geoIdentity:function(){return Tn},geoInterpolate:function(){return ee.Z},geoLength:function(){return m},geoMercator:function(){return zt},geoMercatorRaw:function(){return It},geoNaturalEarth1:function(){return Pn.Z},geoNaturalEarth1Raw:function(){return Pn.K},geoOrthographic:function(){return Wn.Z},geoOrthographicRaw:function(){return Wn.I},geoPath:function(){return ze},geoProjection:function(){return et.Z},geoProjectionMutator:function(){return et.r},geoRotation:function(){return bt.Z},geoStereographic:function(){return Qn},geoStereographicRaw:function(){return ar},geoStream:function(){return c.Z},geoTransform:function(){return Cn.Z},geoTransverseMercator:function(){return dr},geoTransverseMercatorRaw:function(){return Gn}});var S=t(97860),k=t(77338),l=t(66624),T=t(7613),b=t(87070),d=t(1457),s=t(87605);function e(){var Bt,tn,cn,gn=0,kn=0,Vn=960,In=500;return cn={stream:function(Dn){return Bt&&tn===Dn?Bt:Bt=(0,s.Z)(gn,kn,Vn,In)(tn=Dn)},extent:function(Dn){return arguments.length?(gn=+Dn[0][0],kn=+Dn[0][1],Vn=+Dn[1][0],In=+Dn[1][1],Bt=tn=null,cn):[[gn,kn],[Vn,In]]}}}var i,r,n,a=t(23071),o=t(33940),u=t(39695),p=t(73182),c=t(72736),x=(0,o.Z)(),g={sphere:p.Z,point:p.Z,lineStart:function(){g.point=y,g.lineEnd=f},lineEnd:p.Z,polygonStart:p.Z,polygonEnd:p.Z};function f(){g.point=g.lineEnd=p.Z}function y(Bt,tn){Bt*=u.uR,tn*=u.uR,i=Bt,r=(0,u.O$)(tn),n=(0,u.mC)(tn),g.point=v}function v(Bt,tn){Bt*=u.uR,tn*=u.uR;var cn=(0,u.O$)(tn),gn=(0,u.mC)(tn),kn=(0,u.Wn)(Bt-i),Vn=(0,u.mC)(kn),In=gn*(0,u.O$)(kn),Dn=n*cn-r*gn*Vn,Kn=r*cn+n*gn*Vn;x.add((0,u.fv)((0,u._b)(In*In+Dn*Dn),Kn)),i=Bt,r=cn,n=gn}function m(Bt){return x.reset(),(0,c.Z)(Bt,g),+x}var _=[null,null],h={type:"LineString",coordinates:_};function A(Bt,tn){return _[0]=Bt,_[1]=tn,m(h)}var w={Feature:function(Bt,tn){return L(Bt.geometry,tn)},FeatureCollection:function(Bt,tn){for(var cn=Bt.features,gn=-1,kn=cn.length;++gn<kn;)if(L(cn[gn].geometry,tn))return!0;return!1}},E={Sphere:function(){return!0},Point:function(Bt,tn){return C(Bt.coordinates,tn)},MultiPoint:function(Bt,tn){for(var cn=Bt.coordinates,gn=-1,kn=cn.length;++gn<kn;)if(C(cn[gn],tn))return!0;return!1},LineString:function(Bt,tn){return P(Bt.coordinates,tn)},MultiLineString:function(Bt,tn){for(var cn=Bt.coordinates,gn=-1,kn=cn.length;++gn<kn;)if(P(cn[gn],tn))return!0;return!1},Polygon:function(Bt,tn){return D(Bt.coordinates,tn)},MultiPolygon:function(Bt,tn){for(var cn=Bt.coordinates,gn=-1,kn=cn.length;++gn<kn;)if(D(cn[gn],tn))return!0;return!1},GeometryCollection:function(Bt,tn){for(var cn=Bt.geometries,gn=-1,kn=cn.length;++gn<kn;)if(L(cn[gn],tn))return!0;return!1}};function L(Bt,tn){return!(!Bt||!E.hasOwnProperty(Bt.type))&&E[Bt.type](Bt,tn)}function C(Bt,tn){return A(Bt,tn)===0}function P(Bt,tn){for(var cn,gn,kn,Vn=0,In=Bt.length;Vn<In;Vn++){if((gn=A(Bt[Vn],tn))===0||Vn>0&&(kn=A(Bt[Vn],Bt[Vn-1]))>0&&cn<=kn&&gn<=kn&&(cn+gn-kn)*(1-Math.pow((cn-gn)/kn,2))<u.aW*kn)return!0;cn=gn}return!1}function D(Bt,tn){return!!(0,a.Z)(Bt.map(G),I(tn))}function G(Bt){return(Bt=Bt.map(I)).pop(),Bt}function I(Bt){return[Bt[0]*u.uR,Bt[1]*u.uR]}function H(Bt,tn){return(Bt&&w.hasOwnProperty(Bt.type)?w[Bt.type]:L)(Bt,tn)}var N=t(33064);function F(Bt,tn,cn){var gn=(0,N.w6)(Bt,tn-u.Ho,cn).concat(tn);return function(kn){return gn.map(function(Vn){return[kn,Vn]})}}function V(Bt,tn,cn){var gn=(0,N.w6)(Bt,tn-u.Ho,cn).concat(tn);return function(kn){return gn.map(function(Vn){return[Vn,kn]})}}function q(){var Bt,tn,cn,gn,kn,Vn,In,Dn,Kn,Ut,bn,At,Gt=10,$t=Gt,mn=90,yn=360,An=2.5;function sn(){return{type:"MultiLineString",coordinates:Yt()}}function Yt(){return(0,N.w6)((0,u.mD)(gn/mn)*mn,cn,mn).map(bn).concat((0,N.w6)((0,u.mD)(Dn/yn)*yn,In,yn).map(At)).concat((0,N.w6)((0,u.mD)(tn/Gt)*Gt,Bt,Gt).filter(function(Xt){return(0,u.Wn)(Xt%mn)>u.Ho}).map(Kn)).concat((0,N.w6)((0,u.mD)(Vn/$t)*$t,kn,$t).filter(function(Xt){return(0,u.Wn)(Xt%yn)>u.Ho}).map(Ut))}return sn.lines=function(){return Yt().map(function(Xt){return{type:"LineString",coordinates:Xt}})},sn.outline=function(){return{type:"Polygon",coordinates:[bn(gn).concat(At(In).slice(1),bn(cn).reverse().slice(1),At(Dn).reverse().slice(1))]}},sn.extent=function(Xt){return arguments.length?sn.extentMajor(Xt).extentMinor(Xt):sn.extentMinor()},sn.extentMajor=function(Xt){return arguments.length?(gn=+Xt[0][0],cn=+Xt[1][0],Dn=+Xt[0][1],In=+Xt[1][1],gn>cn&&(Xt=gn,gn=cn,cn=Xt),Dn>In&&(Xt=Dn,Dn=In,In=Xt),sn.precision(An)):[[gn,Dn],[cn,In]]},sn.extentMinor=function(Xt){return arguments.length?(tn=+Xt[0][0],Bt=+Xt[1][0],Vn=+Xt[0][1],kn=+Xt[1][1],tn>Bt&&(Xt=tn,tn=Bt,Bt=Xt),Vn>kn&&(Xt=Vn,Vn=kn,kn=Xt),sn.precision(An)):[[tn,Vn],[Bt,kn]]},sn.step=function(Xt){return arguments.length?sn.stepMajor(Xt).stepMinor(Xt):sn.stepMinor()},sn.stepMajor=function(Xt){return arguments.length?(mn=+Xt[0],yn=+Xt[1],sn):[mn,yn]},sn.stepMinor=function(Xt){return arguments.length?(Gt=+Xt[0],$t=+Xt[1],sn):[Gt,$t]},sn.precision=function(Xt){return arguments.length?(An=+Xt,Kn=F(Vn,kn,90),Ut=V(tn,Bt,An),bn=F(Dn,In,90),At=V(gn,cn,An),sn):An},sn.extentMajor([[-180,-90+u.Ho],[180,90-u.Ho]]).extentMinor([[-180,-80-u.Ho],[180,80+u.Ho]])}function te(){return q()()}var $,W,Z,J,ee=t(83074),re=t(8593),ae=(0,o.Z)(),oe=(0,o.Z)(),ce={point:p.Z,lineStart:p.Z,lineEnd:p.Z,polygonStart:function(){ce.lineStart=pe,ce.lineEnd=xe},polygonEnd:function(){ce.lineStart=ce.lineEnd=ce.point=p.Z,ae.add((0,u.Wn)(oe)),oe.reset()},result:function(){var Bt=ae/2;return ae.reset(),Bt}};function pe(){ce.point=ve}function ve(Bt,tn){ce.point=we,$=Z=Bt,W=J=tn}function we(Bt,tn){oe.add(J*Bt-Z*tn),Z=Bt,J=tn}function xe(){we($,W)}var ge,Oe,Ae,Te,se=ce,le=t(3559),ne=0,me=0,Ee=0,be=0,De=0,Ue=0,he=0,ke=0,_e=0,Ce={point:Fe,lineStart:Re,lineEnd:$e,polygonStart:function(){Ce.lineStart=st,Ce.lineEnd=Ke},polygonEnd:function(){Ce.point=Fe,Ce.lineStart=Re,Ce.lineEnd=$e},result:function(){var Bt=_e?[he/_e,ke/_e]:Ue?[be/Ue,De/Ue]:Ee?[ne/Ee,me/Ee]:[NaN,NaN];return ne=me=Ee=be=De=Ue=he=ke=_e=0,Bt}};function Fe(Bt,tn){ne+=Bt,me+=tn,++Ee}function Re(){Ce.point=He}function He(Bt,tn){Ce.point=Ge,Fe(Ae=Bt,Te=tn)}function Ge(Bt,tn){var cn=Bt-Ae,gn=tn-Te,kn=(0,u._b)(cn*cn+gn*gn);be+=kn*(Ae+Bt)/2,De+=kn*(Te+tn)/2,Ue+=kn,Fe(Ae=Bt,Te=tn)}function $e(){Ce.point=Fe}function st(){Ce.point=gt}function Ke(){mt(ge,Oe)}function gt(Bt,tn){Ce.point=mt,Fe(ge=Ae=Bt,Oe=Te=tn)}function mt(Bt,tn){var cn=Bt-Ae,gn=tn-Te,kn=(0,u._b)(cn*cn+gn*gn);be+=kn*(Ae+Bt)/2,De+=kn*(Te+tn)/2,Ue+=kn,he+=(kn=Te*Bt-Ae*tn)*(Ae+Bt),ke+=kn*(Te+tn),_e+=3*kn,Fe(Ae=Bt,Te=tn)}var at=Ce;function rt(Bt){this._context=Bt}rt.prototype={_radius:4.5,pointRadius:function(Bt){return this._radius=Bt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(Bt,tn){switch(this._point){case 0:this._context.moveTo(Bt,tn),this._point=1;break;case 1:this._context.lineTo(Bt,tn);break;default:this._context.moveTo(Bt+this._radius,tn),this._context.arc(Bt,tn,this._radius,0,u.BZ)}},result:p.Z};var xt,Tt,wt,Ot,Ct,Ye=(0,o.Z)(),Xe={point:p.Z,lineStart:function(){Xe.point=Ve},lineEnd:function(){xt&&We(Tt,wt),Xe.point=p.Z},polygonStart:function(){xt=!0},polygonEnd:function(){xt=null},result:function(){var Bt=+Ye;return Ye.reset(),Bt}};function Ve(Bt,tn){Xe.point=We,Tt=Ot=Bt,wt=Ct=tn}function We(Bt,tn){Ot-=Bt,Ct-=tn,Ye.add((0,u._b)(Ot*Ot+Ct*Ct)),Ot=Bt,Ct=tn}var nt=Xe;function ot(){this._string=[]}function Ie(Bt){return"m0,"+Bt+"a"+Bt+","+Bt+" 0 1,1 0,"+-2*Bt+"a"+Bt+","+Bt+" 0 1,1 0,"+2*Bt+"z"}function ze(Bt,tn){var cn,gn,kn=4.5;function Vn(In){return In&&(typeof kn=="function"&&gn.pointRadius(+kn.apply(this,arguments)),(0,c.Z)(In,cn(gn))),gn.result()}return Vn.area=function(In){return(0,c.Z)(In,cn(se)),se.result()},Vn.measure=function(In){return(0,c.Z)(In,cn(nt)),nt.result()},Vn.bounds=function(In){return(0,c.Z)(In,cn(le.Z)),le.Z.result()},Vn.centroid=function(In){return(0,c.Z)(In,cn(at)),at.result()},Vn.projection=function(In){return arguments.length?(cn=In==null?(Bt=null,re.Z):(Bt=In).stream,Vn):Bt},Vn.context=function(In){return arguments.length?(gn=In==null?(tn=null,new ot):new rt(tn=In),typeof kn!="function"&&gn.pointRadius(kn),Vn):tn},Vn.pointRadius=function(In){return arguments.length?(kn=typeof In=="function"?In:(gn.pointRadius(+In),+In),Vn):kn},Vn.projection(Bt).context(tn)}ot.prototype={_radius:4.5,_circle:Ie(4.5),pointRadius:function(Bt){return(Bt=+Bt)!==this._radius&&(this._radius=Bt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(Bt,tn){switch(this._point){case 0:this._string.push("M",Bt,",",tn),this._point=1;break;case 1:this._string.push("L",Bt,",",tn);break;default:this._circle==null&&(this._circle=Ie(this._radius)),this._string.push("M",Bt,",",tn,this._circle)}},result:function(){if(this._string.length){var Bt=this._string.join("");return this._string=[],Bt}return null}};var et=t(15002);function tt(Bt){var tn=0,cn=u.pi/3,gn=(0,et.r)(Bt),kn=gn(tn,cn);return kn.parallels=function(Vn){return arguments.length?gn(tn=Vn[0]*u.uR,cn=Vn[1]*u.uR):[tn*u.RW,cn*u.RW]},kn}function dt(Bt,tn){var cn=(0,u.O$)(Bt),gn=(cn+(0,u.O$)(tn))/2;if((0,u.Wn)(gn)<u.Ho)return function(Dn){var Kn=(0,u.mC)(Dn);function Ut(bn,At){return[bn*Kn,(0,u.O$)(At)/Kn]}return Ut.invert=function(bn,At){return[bn/Kn,(0,u.ZR)(At*Kn)]},Ut}(Bt);var kn=1+cn*(2*gn-cn),Vn=(0,u._b)(kn)/gn;function In(Dn,Kn){var Ut=(0,u._b)(kn-2*gn*(0,u.O$)(Kn))/gn;return[Ut*(0,u.O$)(Dn*=gn),Vn-Ut*(0,u.mC)(Dn)]}return In.invert=function(Dn,Kn){var Ut=Vn-Kn,bn=(0,u.fv)(Dn,(0,u.Wn)(Ut))*(0,u.Xx)(Ut);return Ut*gn<0&&(bn-=u.pi*(0,u.Xx)(Dn)*(0,u.Xx)(Ut)),[bn/gn,(0,u.ZR)((kn-(Dn*Dn+Ut*Ut)*gn*gn)/(2*gn))]},In}function pt(){return tt(dt).scale(155.424).center([0,33.6442])}function vt(){return pt().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var ct=t(47589);function kt(){var Bt,tn,cn,gn,kn,Vn,In=vt(),Dn=pt().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Kn=pt().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Ut={point:function(Gt,$t){Vn=[Gt,$t]}};function bn(Gt){var $t=Gt[0],mn=Gt[1];return Vn=null,cn.point($t,mn),Vn||(gn.point($t,mn),Vn)||(kn.point($t,mn),Vn)}function At(){return Bt=tn=null,bn}return bn.invert=function(Gt){var $t=In.scale(),mn=In.translate(),yn=(Gt[0]-mn[0])/$t,An=(Gt[1]-mn[1])/$t;return(An>=.12&&An<.234&&yn>=-.425&&yn<-.214?Dn:An>=.166&&An<.234&&yn>=-.214&&yn<-.115?Kn:In).invert(Gt)},bn.stream=function(Gt){return Bt&&tn===Gt?Bt:($t=[In.stream(tn=Gt),Dn.stream(Gt),Kn.stream(Gt)],mn=$t.length,Bt={point:function(yn,An){for(var sn=-1;++sn<mn;)$t[sn].point(yn,An)},sphere:function(){for(var yn=-1;++yn<mn;)$t[yn].sphere()},lineStart:function(){for(var yn=-1;++yn<mn;)$t[yn].lineStart()},lineEnd:function(){for(var yn=-1;++yn<mn;)$t[yn].lineEnd()},polygonStart:function(){for(var yn=-1;++yn<mn;)$t[yn].polygonStart()},polygonEnd:function(){for(var yn=-1;++yn<mn;)$t[yn].polygonEnd()}});var $t,mn},bn.precision=function(Gt){return arguments.length?(In.precision(Gt),Dn.precision(Gt),Kn.precision(Gt),At()):In.precision()},bn.scale=function(Gt){return arguments.length?(In.scale(Gt),Dn.scale(.35*Gt),Kn.scale(Gt),bn.translate(In.translate())):In.scale()},bn.translate=function(Gt){if(!arguments.length)return In.translate();var $t=In.scale(),mn=+Gt[0],yn=+Gt[1];return cn=In.translate(Gt).clipExtent([[mn-.455*$t,yn-.238*$t],[mn+.455*$t,yn+.238*$t]]).stream(Ut),gn=Dn.translate([mn-.307*$t,yn+.201*$t]).clipExtent([[mn-.425*$t+u.Ho,yn+.12*$t+u.Ho],[mn-.214*$t-u.Ho,yn+.234*$t-u.Ho]]).stream(Ut),kn=Kn.translate([mn-.205*$t,yn+.212*$t]).clipExtent([[mn-.214*$t+u.Ho,yn+.166*$t+u.Ho],[mn-.115*$t-u.Ho,yn+.234*$t-u.Ho]]).stream(Ut),At()},bn.fitExtent=function(Gt,$t){return(0,ct.qg)(bn,Gt,$t)},bn.fitSize=function(Gt,$t){return(0,ct.mF)(bn,Gt,$t)},bn.fitWidth=function(Gt,$t){return(0,ct.V6)(bn,Gt,$t)},bn.fitHeight=function(Gt,$t){return(0,ct.rf)(bn,Gt,$t)},bn.scale(1070)}var ut=t(12956),ft=t(17889),bt=t(49386);function It(Bt,tn){return[Bt,(0,u.cM)((0,u.OR)((u.ou+tn)/2))]}function zt(){return Rt(It).scale(961/u.BZ)}function Rt(Bt){var tn,cn,gn,kn=(0,et.Z)(Bt),Vn=kn.center,In=kn.scale,Dn=kn.translate,Kn=kn.clipExtent,Ut=null;function bn(){var At=u.pi*In(),Gt=kn((0,bt.Z)(kn.rotate()).invert([0,0]));return Kn(Ut==null?[[Gt[0]-At,Gt[1]-At],[Gt[0]+At,Gt[1]+At]]:Bt===It?[[Math.max(Gt[0]-At,Ut),tn],[Math.min(Gt[0]+At,cn),gn]]:[[Ut,Math.max(Gt[1]-At,tn)],[cn,Math.min(Gt[1]+At,gn)]])}return kn.scale=function(At){return arguments.length?(In(At),bn()):In()},kn.translate=function(At){return arguments.length?(Dn(At),bn()):Dn()},kn.center=function(At){return arguments.length?(Vn(At),bn()):Vn()},kn.clipExtent=function(At){return arguments.length?(At==null?Ut=tn=cn=gn=null:(Ut=+At[0][0],tn=+At[0][1],cn=+At[1][0],gn=+At[1][1]),bn()):Ut==null?null:[[Ut,tn],[cn,gn]]},bn()}function Jt(Bt){return(0,u.OR)((u.ou+Bt)/2)}function qt(Bt,tn){var cn=(0,u.mC)(Bt),gn=Bt===tn?(0,u.O$)(Bt):(0,u.cM)(cn/(0,u.mC)(tn))/(0,u.cM)(Jt(tn)/Jt(Bt)),kn=cn*(0,u.sQ)(Jt(Bt),gn)/gn;if(!gn)return It;function Vn(In,Dn){kn>0?Dn<-u.ou+u.Ho&&(Dn=-u.ou+u.Ho):Dn>u.ou-u.Ho&&(Dn=u.ou-u.Ho);var Kn=kn/(0,u.sQ)(Jt(Dn),gn);return[Kn*(0,u.O$)(gn*In),kn-Kn*(0,u.mC)(gn*In)]}return Vn.invert=function(In,Dn){var Kn=kn-Dn,Ut=(0,u.Xx)(gn)*(0,u._b)(In*In+Kn*Kn),bn=(0,u.fv)(In,(0,u.Wn)(Kn))*(0,u.Xx)(Kn);return Kn*gn<0&&(bn-=u.pi*(0,u.Xx)(In)*(0,u.Xx)(Kn)),[bn/gn,2*(0,u.z4)((0,u.sQ)(kn/Ut,1/gn))-u.ou]},Vn}function Wt(){return tt(qt).scale(109.5).parallels([30,30])}It.invert=function(Bt,tn){return[Bt,2*(0,u.z4)((0,u.Qq)(tn))-u.ou]};var jt=t(97492);function fn(Bt,tn){var cn=(0,u.mC)(Bt),gn=Bt===tn?(0,u.O$)(Bt):(cn-(0,u.mC)(tn))/(tn-Bt),kn=cn/gn+Bt;if((0,u.Wn)(gn)<u.Ho)return jt.k;function Vn(In,Dn){var Kn=kn-Dn,Ut=gn*In;return[Kn*(0,u.O$)(Ut),kn-Kn*(0,u.mC)(Ut)]}return Vn.invert=function(In,Dn){var Kn=kn-Dn,Ut=(0,u.fv)(In,(0,u.Wn)(Kn))*(0,u.Xx)(Kn);return Kn*gn<0&&(Ut-=u.pi*(0,u.Xx)(In)*(0,u.Xx)(Kn)),[Ut/gn,kn-(0,u.Xx)(gn)*(0,u._b)(In*In+Kn*Kn)]},Vn}function xn(){return tt(fn).scale(131.154).center([0,13.9389])}var un=1.340264,Ht=-.081106,nn=893e-6,Kt=.003796,on=(0,u._b)(3)/2;function hn(Bt,tn){var cn=(0,u.ZR)(on*(0,u.O$)(tn)),gn=cn*cn,kn=gn*gn*gn;return[Bt*(0,u.mC)(cn)/(on*(un+3*Ht*gn+kn*(7*nn+9*Kt*gn))),cn*(un+Ht*gn+kn*(nn+Kt*gn))]}function dn(){return(0,et.Z)(hn).scale(177.158)}hn.invert=function(Bt,tn){for(var cn,gn=tn,kn=gn*gn,Vn=kn*kn*kn,In=0;In<12&&(Vn=(kn=(gn-=cn=(gn*(un+Ht*kn+Vn*(nn+Kt*kn))-tn)/(un+3*Ht*kn+Vn*(7*nn+9*Kt*kn)))*gn)*kn*kn,!((0,u.Wn)(cn)<u.aW));++In);return[on*Bt*(un+3*Ht*kn+Vn*(7*nn+9*Kt*kn))/(0,u.mC)(gn),(0,u.ZR)((0,u.O$)(gn)/on)]};var Mn=t(98936),Cn=t(64684);function Tn(){var Bt,tn,cn,gn,kn,Vn,In,Dn=1,Kn=0,Ut=0,bn=1,At=1,Gt=0,$t=null,mn=1,yn=1,An=(0,Cn.l)({point:function(an,ln){var Sn=Xt([an,ln]);this.stream.point(Sn[0],Sn[1])}}),sn=re.Z;function Yt(){return mn=Dn*bn,yn=Dn*At,Vn=In=null,Xt}function Xt(an){var ln=an[0]*mn,Sn=an[1]*yn;if(Gt){var En=Sn*Bt-ln*tn;ln=ln*Bt+Sn*tn,Sn=En}return[ln+Kn,Sn+Ut]}return Xt.invert=function(an){var ln=an[0]-Kn,Sn=an[1]-Ut;if(Gt){var En=Sn*Bt+ln*tn;ln=ln*Bt-Sn*tn,Sn=En}return[ln/mn,Sn/yn]},Xt.stream=function(an){return Vn&&In===an?Vn:Vn=An(sn(In=an))},Xt.postclip=function(an){return arguments.length?(sn=an,$t=cn=gn=kn=null,Yt()):sn},Xt.clipExtent=function(an){return arguments.length?(sn=an==null?($t=cn=gn=kn=null,re.Z):(0,s.Z)($t=+an[0][0],cn=+an[0][1],gn=+an[1][0],kn=+an[1][1]),Yt()):$t==null?null:[[$t,cn],[gn,kn]]},Xt.scale=function(an){return arguments.length?(Dn=+an,Yt()):Dn},Xt.translate=function(an){return arguments.length?(Kn=+an[0],Ut=+an[1],Yt()):[Kn,Ut]},Xt.angle=function(an){return arguments.length?(Gt=an%360*u.uR,tn=(0,u.O$)(Gt),Bt=(0,u.mC)(Gt),Yt()):Gt*u.RW},Xt.reflectX=function(an){return arguments.length?(bn=an?-1:1,Yt()):bn<0},Xt.reflectY=function(an){return arguments.length?(At=an?-1:1,Yt()):At<0},Xt.fitExtent=function(an,ln){return(0,ct.qg)(Xt,an,ln)},Xt.fitSize=function(an,ln){return(0,ct.mF)(Xt,an,ln)},Xt.fitWidth=function(an,ln){return(0,ct.V6)(Xt,an,ln)},Xt.fitHeight=function(an,ln){return(0,ct.rf)(Xt,an,ln)},Xt}var Pn=t(26867),Wn=t(57962),$n=t(25382);function ar(Bt,tn){var cn=(0,u.mC)(tn),gn=1+(0,u.mC)(Bt)*cn;return[cn*(0,u.O$)(Bt)/gn,(0,u.O$)(tn)/gn]}function Qn(){return(0,et.Z)(ar).scale(250).clipAngle(142)}function Gn(Bt,tn){return[(0,u.cM)((0,u.OR)((u.ou+tn)/2)),-Bt]}function dr(){var Bt=Rt(Gn),tn=Bt.center,cn=Bt.rotate;return Bt.center=function(gn){return arguments.length?tn([-gn[1],gn[0]]):[(gn=tn())[1],-gn[0]]},Bt.rotate=function(gn){return arguments.length?cn([gn[0],gn[1],gn.length>2?gn[2]+90:90]):[(gn=cn())[0],gn[1],gn[2]-90]},cn([0,0,90]).scale(159.155)}ar.invert=(0,$n.O)(function(Bt){return 2*(0,u.z4)(Bt)}),Gn.invert=function(Bt,tn){return[-tn,2*(0,u.z4)((0,u.Qq)(Bt))-u.ou]}},83074:function(Q,z,t){t.d(z,{Z:function(){return k}});var S=t(39695);function k(l,T){var b=l[0]*S.uR,d=l[1]*S.uR,s=T[0]*S.uR,e=T[1]*S.uR,i=(0,S.mC)(d),r=(0,S.O$)(d),n=(0,S.mC)(e),a=(0,S.O$)(e),o=i*(0,S.mC)(b),u=i*(0,S.O$)(b),p=n*(0,S.mC)(s),c=n*(0,S.O$)(s),x=2*(0,S.ZR)((0,S._b)((0,S.Jy)(e-d)+i*n*(0,S.Jy)(s-b))),g=(0,S.O$)(x),f=x?function(y){var v=(0,S.O$)(y*=x)/g,m=(0,S.O$)(x-y)/g,_=m*o+v*p,h=m*u+v*c,A=m*r+v*a;return[(0,S.fv)(h,_)*S.RW,(0,S.fv)(A,(0,S._b)(_*_+h*h))*S.RW]}:function(){return[b*S.RW,d*S.RW]};return f.distance=x,f}},39695:function(Q,z,t){t.d(z,{BZ:function(){return d},Ho:function(){return S},Jy:function(){return _},Kh:function(){return v},O$:function(){return x},OR:function(){return y},Qq:function(){return u},RW:function(){return s},Wn:function(){return i},Xx:function(){return g},ZR:function(){return m},_b:function(){return f},aW:function(){return k},cM:function(){return p},fv:function(){return n},mC:function(){return a},mD:function(){return o},ou:function(){return T},pi:function(){return l},pu:function(){return b},sQ:function(){return c},uR:function(){return e},z4:function(){return r}});var S=1e-6,k=1e-12,l=Math.PI,T=l/2,b=l/4,d=2*l,s=180/l,e=l/180,i=Math.abs,r=Math.atan,n=Math.atan2,a=Math.cos,o=Math.ceil,u=Math.exp,p=Math.log,c=Math.pow,x=Math.sin,g=Math.sign||function(h){return h>0?1:h<0?-1:0},f=Math.sqrt,y=Math.tan;function v(h){return h>1?0:h<-1?l:Math.acos(h)}function m(h){return h>1?T:h<-1?-T:Math.asin(h)}function _(h){return(h=x(h/2))*h}},73182:function(Q,z,t){function S(){}t.d(z,{Z:function(){return S}})},3559:function(Q,z,t){var S=t(73182),k=1/0,l=k,T=-k,b=T,d={point:function(s,e){s<k&&(k=s),s>T&&(T=s),e<l&&(l=e),e>b&&(b=e)},lineStart:S.Z,lineEnd:S.Z,polygonStart:S.Z,polygonEnd:S.Z,result:function(){var s=[[k,l],[T,b]];return T=b=-(l=k=1/0),s}};z.Z=d},67108:function(Q,z,t){t.d(z,{Z:function(){return k}});var S=t(39695);function k(l,T){return(0,S.Wn)(l[0]-T[0])<S.Ho&&(0,S.Wn)(l[1]-T[1])<S.Ho}},23071:function(Q,z,t){t.d(z,{Z:function(){return d}});var S=t(33940),k=t(7620),l=t(39695),T=(0,S.Z)();function b(s){return(0,l.Wn)(s[0])<=l.pi?s[0]:(0,l.Xx)(s[0])*(((0,l.Wn)(s[0])+l.pi)%l.BZ-l.pi)}function d(s,e){var i=b(e),r=e[1],n=(0,l.O$)(r),a=[(0,l.O$)(i),-(0,l.mC)(i),0],o=0,u=0;T.reset(),n===1?r=l.ou+l.Ho:n===-1&&(r=-l.ou-l.Ho);for(var p=0,c=s.length;p<c;++p)if(g=(x=s[p]).length)for(var x,g,f=x[g-1],y=b(f),v=f[1]/2+l.pu,m=(0,l.O$)(v),_=(0,l.mC)(v),h=0;h<g;++h,y=w,m=L,_=C,f=A){var A=x[h],w=b(A),E=A[1]/2+l.pu,L=(0,l.O$)(E),C=(0,l.mC)(E),P=w-y,D=P>=0?1:-1,G=D*P,I=G>l.pi,H=m*L;if(T.add((0,l.fv)(H*D*(0,l.O$)(G),_*C+H*(0,l.mC)(G))),o+=I?P+D*l.BZ:P,I^y>=i^w>=i){var N=(0,k.T5)((0,k.Og)(f),(0,k.Og)(A));(0,k.iJ)(N);var F=(0,k.T5)(a,N);(0,k.iJ)(F);var V=(I^P>=0?-1:1)*(0,l.ZR)(F[2]);(r>V||r===V&&(N[0]||N[1]))&&(u+=I^P>=0?1:-1)}}return(o<-l.Ho||o<l.Ho&&T<-l.Ho)^1&u}},25382:function(Q,z,t){t.d(z,{O:function(){return l},W:function(){return k}});var S=t(39695);function k(T){return function(b,d){var s=(0,S.mC)(b),e=(0,S.mC)(d),i=T(s*e);return[i*e*(0,S.O$)(b),i*(0,S.O$)(d)]}}function l(T){return function(b,d){var s=(0,S._b)(b*b+d*d),e=T(s),i=(0,S.O$)(e),r=(0,S.mC)(e);return[(0,S.fv)(b*i,s*r),(0,S.ZR)(s&&d*i/s)]}}},12956:function(Q,z,t){t.d(z,{Z:function(){return b},l:function(){return T}});var S=t(39695),k=t(25382),l=t(15002),T=(0,k.W)(function(d){return(0,S._b)(2/(1+d))});function b(){return(0,l.Z)(T).scale(124.75).clipAngle(179.999)}T.invert=(0,k.O)(function(d){return 2*(0,S.ZR)(d/2)})},17889:function(Q,z,t){t.d(z,{N:function(){return T},Z:function(){return b}});var S=t(39695),k=t(25382),l=t(15002),T=(0,k.W)(function(d){return(d=(0,S.Kh)(d))&&d/(0,S.O$)(d)});function b(){return(0,l.Z)(T).scale(79.4188).clipAngle(179.999)}T.invert=(0,k.O)(function(d){return d})},97492:function(Q,z,t){t.d(z,{Z:function(){return l},k:function(){return k}});var S=t(15002);function k(T,b){return[T,b]}function l(){return(0,S.Z)(k).scale(152.63)}k.invert=k},47589:function(Q,z,t){t.d(z,{V6:function(){return d},mF:function(){return b},qg:function(){return T},rf:function(){return s}});var S=t(72736),k=t(3559);function l(e,i,r){var n=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),n!=null&&e.clipExtent(null),(0,S.Z)(r,e.stream(k.Z)),i(k.Z.result()),n!=null&&e.clipExtent(n),e}function T(e,i,r){return l(e,function(n){var a=i[1][0]-i[0][0],o=i[1][1]-i[0][1],u=Math.min(a/(n[1][0]-n[0][0]),o/(n[1][1]-n[0][1])),p=+i[0][0]+(a-u*(n[1][0]+n[0][0]))/2,c=+i[0][1]+(o-u*(n[1][1]+n[0][1]))/2;e.scale(150*u).translate([p,c])},r)}function b(e,i,r){return T(e,[[0,0],i],r)}function d(e,i,r){return l(e,function(n){var a=+i,o=a/(n[1][0]-n[0][0]),u=(a-o*(n[1][0]+n[0][0]))/2,p=-o*n[0][1];e.scale(150*o).translate([u,p])},r)}function s(e,i,r){return l(e,function(n){var a=+i,o=a/(n[1][1]-n[0][1]),u=-o*n[0][0],p=(a-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([u,p])},r)}},98936:function(Q,z,t){t.d(z,{M:function(){return T},Z:function(){return b}});var S=t(39695),k=t(25382),l=t(15002);function T(d,s){var e=(0,S.mC)(s),i=(0,S.mC)(d)*e;return[e*(0,S.O$)(d)/i,(0,S.O$)(s)/i]}function b(){return(0,l.Z)(T).scale(144.049).clipAngle(60)}T.invert=(0,k.O)(S.z4)},15002:function(Q,z,t){t.d(z,{Z:function(){return x},r:function(){return g}});var S=t(87070),k=t(1457),l=t(87605),T=t(96059),b=t(8593),d=t(39695),s=t(49386),e=t(64684),i=t(47589),r=t(7620),n=16,a=(0,d.mC)(30*d.uR);function o(f,y){return+y?function(v,m){function _(h,A,w,E,L,C,P,D,G,I,H,N,F,V){var q=P-h,te=D-A,$=q*q+te*te;if($>4*m&&F--){var W=E+I,Z=L+H,J=C+N,ee=(0,d._b)(W*W+Z*Z+J*J),re=(0,d.ZR)(J/=ee),ae=(0,d.Wn)((0,d.Wn)(J)-1)<d.Ho||(0,d.Wn)(w-G)<d.Ho?(w+G)/2:(0,d.fv)(Z,W),oe=v(ae,re),ce=oe[0],pe=oe[1],ve=ce-h,we=pe-A,xe=te*ve-q*we;(xe*xe/$>m||(0,d.Wn)((q*ve+te*we)/$-.5)>.3||E*I+L*H+C*N<a)&&(_(h,A,w,E,L,C,ce,pe,ae,W/=ee,Z/=ee,J,F,V),V.point(ce,pe),_(ce,pe,ae,W,Z,J,P,D,G,I,H,N,F,V))}}return function(h){var A,w,E,L,C,P,D,G,I,H,N,F,V={point:q,lineStart:te,lineEnd:W,polygonStart:function(){h.polygonStart(),V.lineStart=Z},polygonEnd:function(){h.polygonEnd(),V.lineStart=te}};function q(re,ae){re=v(re,ae),h.point(re[0],re[1])}function te(){G=NaN,V.point=$,h.lineStart()}function $(re,ae){var oe=(0,r.Og)([re,ae]),ce=v(re,ae);_(G,I,D,H,N,F,G=ce[0],I=ce[1],D=re,H=oe[0],N=oe[1],F=oe[2],n,h),h.point(G,I)}function W(){V.point=q,h.lineEnd()}function Z(){te(),V.point=J,V.lineEnd=ee}function J(re,ae){$(A=re,ae),w=G,E=I,L=H,C=N,P=F,V.point=$}function ee(){_(G,I,D,H,N,F,w,E,A,L,C,P,n,h),V.lineEnd=W,W()}return V}}(f,y):function(v){return(0,e.l)({point:function(m,_){m=v(m,_),this.stream.point(m[0],m[1])}})}(f)}var u=(0,e.l)({point:function(f,y){this.stream.point(f*d.uR,y*d.uR)}});function p(f,y,v,m,_){function h(A,w){return[y+f*(A*=m),v-f*(w*=_)]}return h.invert=function(A,w){return[(A-y)/f*m,(v-w)/f*_]},h}function c(f,y,v,m,_,h){var A=(0,d.mC)(h),w=(0,d.O$)(h),E=A*f,L=w*f,C=A/f,P=w/f,D=(w*v-A*y)/f,G=(w*y+A*v)/f;function I(H,N){return[E*(H*=m)-L*(N*=_)+y,v-L*H-E*N]}return I.invert=function(H,N){return[m*(C*H-P*N+D),_*(G-P*H-C*N)]},I}function x(f){return g(function(){return f})()}function g(f){var y,v,m,_,h,A,w,E,L,C,P=150,D=480,G=250,I=0,H=0,N=0,F=0,V=0,q=0,te=1,$=1,W=null,Z=S.Z,J=null,ee=b.Z,re=.5;function ae(ve){return E(ve[0]*d.uR,ve[1]*d.uR)}function oe(ve){return(ve=E.invert(ve[0],ve[1]))&&[ve[0]*d.RW,ve[1]*d.RW]}function ce(){var ve=c(P,0,0,te,$,q).apply(null,y(I,H)),we=(q?c:p)(P,D-ve[0],G-ve[1],te,$,q);return v=(0,s.I)(N,F,V),w=(0,T.Z)(y,we),E=(0,T.Z)(v,w),A=o(w,re),pe()}function pe(){return L=C=null,ae}return ae.stream=function(ve){return L&&C===ve?L:L=u(function(we){return(0,e.l)({point:function(xe,ge){var Oe=we(xe,ge);return this.stream.point(Oe[0],Oe[1])}})}(v)(Z(A(ee(C=ve)))))},ae.preclip=function(ve){return arguments.length?(Z=ve,W=void 0,pe()):Z},ae.postclip=function(ve){return arguments.length?(ee=ve,J=m=_=h=null,pe()):ee},ae.clipAngle=function(ve){return arguments.length?(Z=+ve?(0,k.Z)(W=ve*d.uR):(W=null,S.Z),pe()):W*d.RW},ae.clipExtent=function(ve){return arguments.length?(ee=ve==null?(J=m=_=h=null,b.Z):(0,l.Z)(J=+ve[0][0],m=+ve[0][1],_=+ve[1][0],h=+ve[1][1]),pe()):J==null?null:[[J,m],[_,h]]},ae.scale=function(ve){return arguments.length?(P=+ve,ce()):P},ae.translate=function(ve){return arguments.length?(D=+ve[0],G=+ve[1],ce()):[D,G]},ae.center=function(ve){return arguments.length?(I=ve[0]%360*d.uR,H=ve[1]%360*d.uR,ce()):[I*d.RW,H*d.RW]},ae.rotate=function(ve){return arguments.length?(N=ve[0]%360*d.uR,F=ve[1]%360*d.uR,V=ve.length>2?ve[2]%360*d.uR:0,ce()):[N*d.RW,F*d.RW,V*d.RW]},ae.angle=function(ve){return arguments.length?(q=ve%360*d.uR,ce()):q*d.RW},ae.reflectX=function(ve){return arguments.length?(te=ve?-1:1,ce()):te<0},ae.reflectY=function(ve){return arguments.length?($=ve?-1:1,ce()):$<0},ae.precision=function(ve){return arguments.length?(A=o(w,re=ve*ve),pe()):(0,d._b)(re)},ae.fitExtent=function(ve,we){return(0,i.qg)(ae,ve,we)},ae.fitSize=function(ve,we){return(0,i.mF)(ae,ve,we)},ae.fitWidth=function(ve,we){return(0,i.V6)(ae,ve,we)},ae.fitHeight=function(ve,we){return(0,i.rf)(ae,ve,we)},function(){return y=f.apply(this,arguments),ae.invert=y.invert&&oe,ce()}}},26867:function(Q,z,t){t.d(z,{K:function(){return l},Z:function(){return T}});var S=t(15002),k=t(39695);function l(b,d){var s=d*d,e=s*s;return[b*(.8707-.131979*s+e*(e*(.003971*s-.001529*e)-.013791)),d*(1.007226+s*(.015085+e*(.028874*s-.044475-.005916*e)))]}function T(){return(0,S.Z)(l).scale(175.295)}l.invert=function(b,d){var s,e=d,i=25;do{var r=e*e,n=r*r;e-=s=(e*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))-d)/(1.007226+r*(.045255+n*(.259866*r-.311325-.06507600000000001*n)))}while((0,k.Wn)(s)>k.Ho&&--i>0);return[b/(.8707+(r=e*e)*(r*(r*r*r*(.003971-.001529*r)-.013791)-.131979)),e]}},57962:function(Q,z,t){t.d(z,{I:function(){return T},Z:function(){return b}});var S=t(39695),k=t(25382),l=t(15002);function T(d,s){return[(0,S.mC)(s)*(0,S.O$)(d),(0,S.O$)(s)]}function b(){return(0,l.Z)(T).scale(249.5).clipAngle(90+S.Ho)}T.invert=(0,k.O)(S.ZR)},49386:function(Q,z,t){t.d(z,{I:function(){return T},Z:function(){return e}});var S=t(96059),k=t(39695);function l(i,r){return[(0,k.Wn)(i)>k.pi?i+Math.round(-i/k.BZ)*k.BZ:i,r]}function T(i,r,n){return(i%=k.BZ)?r||n?(0,S.Z)(d(i),s(r,n)):d(i):r||n?s(r,n):l}function b(i){return function(r,n){return[(r+=i)>k.pi?r-k.BZ:r<-k.pi?r+k.BZ:r,n]}}function d(i){var r=b(i);return r.invert=b(-i),r}function s(i,r){var n=(0,k.mC)(i),a=(0,k.O$)(i),o=(0,k.mC)(r),u=(0,k.O$)(r);function p(c,x){var g=(0,k.mC)(x),f=(0,k.mC)(c)*g,y=(0,k.O$)(c)*g,v=(0,k.O$)(x),m=v*n+f*a;return[(0,k.fv)(y*o-m*u,f*n-v*a),(0,k.ZR)(m*o+y*u)]}return p.invert=function(c,x){var g=(0,k.mC)(x),f=(0,k.mC)(c)*g,y=(0,k.O$)(c)*g,v=(0,k.O$)(x),m=v*o-y*u;return[(0,k.fv)(y*o+v*u,f*n+m*a),(0,k.ZR)(m*n-f*a)]},p}function e(i){function r(n){return(n=i(n[0]*k.uR,n[1]*k.uR))[0]*=k.RW,n[1]*=k.RW,n}return i=T(i[0]*k.uR,i[1]*k.uR,i.length>2?i[2]*k.uR:0),r.invert=function(n){return(n=i.invert(n[0]*k.uR,n[1]*k.uR))[0]*=k.RW,n[1]*=k.RW,n},r}l.invert=l},72736:function(Q,z,t){function S(s,e){s&&l.hasOwnProperty(s.type)&&l[s.type](s,e)}t.d(z,{Z:function(){return d}});var k={Feature:function(s,e){S(s.geometry,e)},FeatureCollection:function(s,e){for(var i=s.features,r=-1,n=i.length;++r<n;)S(i[r].geometry,e)}},l={Sphere:function(s,e){e.sphere()},Point:function(s,e){s=s.coordinates,e.point(s[0],s[1],s[2])},MultiPoint:function(s,e){for(var i=s.coordinates,r=-1,n=i.length;++r<n;)s=i[r],e.point(s[0],s[1],s[2])},LineString:function(s,e){T(s.coordinates,e,0)},MultiLineString:function(s,e){for(var i=s.coordinates,r=-1,n=i.length;++r<n;)T(i[r],e,0)},Polygon:function(s,e){b(s.coordinates,e)},MultiPolygon:function(s,e){for(var i=s.coordinates,r=-1,n=i.length;++r<n;)b(i[r],e)},GeometryCollection:function(s,e){for(var i=s.geometries,r=-1,n=i.length;++r<n;)S(i[r],e)}};function T(s,e,i){var r,n=-1,a=s.length-i;for(e.lineStart();++n<a;)r=s[n],e.point(r[0],r[1],r[2]);e.lineEnd()}function b(s,e){var i=-1,r=s.length;for(e.polygonStart();++i<r;)T(s[i],e,1);e.polygonEnd()}function d(s,e){s&&k.hasOwnProperty(s.type)?k[s.type](s,e):S(s,e)}},64684:function(Q,z,t){function S(T){return{stream:k(T)}}function k(T){return function(b){var d=new l;for(var s in T)d[s]=T[s];return d.stream=b,d}}function l(){}t.d(z,{Z:function(){return S},l:function(){return k}}),l.prototype={constructor:l,point:function(T,b){this.stream.point(T,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},674:function(Q,z,t){function S(le,ne){return le.parent===ne.parent?1:2}function k(le,ne){return le+ne.x}function l(le,ne){return Math.max(le,ne.y)}function T(){var le=S,ne=1,me=1,Ee=!1;function be(De){var Ue,he=0;De.eachAfter(function(Re){var He=Re.children;He?(Re.x=function(Ge){return Ge.reduce(k,0)/Ge.length}(He),Re.y=function(Ge){return 1+Ge.reduce(l,0)}(He)):(Re.x=Ue?he+=le(Re,Ue):0,Re.y=0,Ue=Re)});var ke=function(Re){for(var He;He=Re.children;)Re=He[0];return Re}(De),_e=function(Re){for(var He;He=Re.children;)Re=He[He.length-1];return Re}(De),Ce=ke.x-le(ke,_e)/2,Fe=_e.x+le(_e,ke)/2;return De.eachAfter(Ee?function(Re){Re.x=(Re.x-De.x)*ne,Re.y=(De.y-Re.y)*me}:function(Re){Re.x=(Re.x-Ce)/(Fe-Ce)*ne,Re.y=(1-(De.y?Re.y/De.y:1))*me})}return be.separation=function(De){return arguments.length?(le=De,be):le},be.size=function(De){return arguments.length?(Ee=!1,ne=+De[0],me=+De[1],be):Ee?null:[ne,me]},be.nodeSize=function(De){return arguments.length?(Ee=!0,ne=+De[0],me=+De[1],be):Ee?[ne,me]:null},be}function b(le){var ne=0,me=le.children,Ee=me&&me.length;if(Ee)for(;--Ee>=0;)ne+=me[Ee].value;else ne=1;le.value=ne}function d(le,ne){var me,Ee,be,De,Ue,he=new r(le),ke=+le.value&&(he.value=le.value),_e=[he];for(ne==null&&(ne=s);me=_e.pop();)if(ke&&(me.value=+me.data.value),(be=ne(me.data))&&(Ue=be.length))for(me.children=new Array(Ue),De=Ue-1;De>=0;--De)_e.push(Ee=me.children[De]=new r(be[De])),Ee.parent=me,Ee.depth=me.depth+1;return he.eachBefore(i)}function s(le){return le.children}function e(le){le.data=le.data.data}function i(le){var ne=0;do le.height=ne;while((le=le.parent)&&le.height<++ne)}function r(le){this.data=le,this.depth=this.height=0,this.parent=null}t.r(z),t.d(z,{cluster:function(){return T},hierarchy:function(){return d},pack:function(){return P},packEnclose:function(){return a},packSiblings:function(){return A},partition:function(){return F},stratify:function(){return Z},tree:function(){return pe},treemap:function(){return Oe},treemapBinary:function(){return Ae},treemapDice:function(){return N},treemapResquarify:function(){return se},treemapSlice:function(){return ve},treemapSliceDice:function(){return Te},treemapSquarify:function(){return ge}}),r.prototype=d.prototype={constructor:r,count:function(){return this.eachAfter(b)},each:function(le){var ne,me,Ee,be,De=this,Ue=[De];do for(ne=Ue.reverse(),Ue=[];De=ne.pop();)if(le(De),me=De.children)for(Ee=0,be=me.length;Ee<be;++Ee)Ue.push(me[Ee]);while(Ue.length);return this},eachAfter:function(le){for(var ne,me,Ee,be=this,De=[be],Ue=[];be=De.pop();)if(Ue.push(be),ne=be.children)for(me=0,Ee=ne.length;me<Ee;++me)De.push(ne[me]);for(;be=Ue.pop();)le(be);return this},eachBefore:function(le){for(var ne,me,Ee=this,be=[Ee];Ee=be.pop();)if(le(Ee),ne=Ee.children)for(me=ne.length-1;me>=0;--me)be.push(ne[me]);return this},sum:function(le){return this.eachAfter(function(ne){for(var me=+le(ne.data)||0,Ee=ne.children,be=Ee&&Ee.length;--be>=0;)me+=Ee[be].value;ne.value=me})},sort:function(le){return this.eachBefore(function(ne){ne.children&&ne.children.sort(le)})},path:function(le){for(var ne=this,me=function(De,Ue){if(De===Ue)return De;var he=De.ancestors(),ke=Ue.ancestors(),_e=null;for(De=he.pop(),Ue=ke.pop();De===Ue;)_e=De,De=he.pop(),Ue=ke.pop();return _e}(ne,le),Ee=[ne];ne!==me;)ne=ne.parent,Ee.push(ne);for(var be=Ee.length;le!==me;)Ee.splice(be,0,le),le=le.parent;return Ee},ancestors:function(){for(var le=this,ne=[le];le=le.parent;)ne.push(le);return ne},descendants:function(){var le=[];return this.each(function(ne){le.push(ne)}),le},leaves:function(){var le=[];return this.eachBefore(function(ne){ne.children||le.push(ne)}),le},links:function(){var le=this,ne=[];return le.each(function(me){me!==le&&ne.push({source:me.parent,target:me})}),ne},copy:function(){return d(this).eachBefore(e)}};var n=Array.prototype.slice;function a(le){for(var ne,me,Ee=0,be=(le=function(Ue){for(var he,ke,_e=Ue.length;_e;)ke=Math.random()*_e--|0,he=Ue[_e],Ue[_e]=Ue[ke],Ue[ke]=he;return Ue}(n.call(le))).length,De=[];Ee<be;)ne=le[Ee],me&&p(me,ne)?++Ee:(me=x(De=o(De,ne)),Ee=0);return me}function o(le,ne){var me,Ee;if(c(ne,le))return[ne];for(me=0;me<le.length;++me)if(u(ne,le[me])&&c(g(le[me],ne),le))return[le[me],ne];for(me=0;me<le.length-1;++me)for(Ee=me+1;Ee<le.length;++Ee)if(u(g(le[me],le[Ee]),ne)&&u(g(le[me],ne),le[Ee])&&u(g(le[Ee],ne),le[me])&&c(f(le[me],le[Ee],ne),le))return[le[me],le[Ee],ne];throw new Error}function u(le,ne){var me=le.r-ne.r,Ee=ne.x-le.x,be=ne.y-le.y;return me<0||me*me<Ee*Ee+be*be}function p(le,ne){var me=le.r-ne.r+1e-6,Ee=ne.x-le.x,be=ne.y-le.y;return me>0&&me*me>Ee*Ee+be*be}function c(le,ne){for(var me=0;me<ne.length;++me)if(!p(le,ne[me]))return!1;return!0}function x(le){switch(le.length){case 1:return{x:(ne=le[0]).x,y:ne.y,r:ne.r};case 2:return g(le[0],le[1]);case 3:return f(le[0],le[1],le[2])}var ne}function g(le,ne){var me=le.x,Ee=le.y,be=le.r,De=ne.x,Ue=ne.y,he=ne.r,ke=De-me,_e=Ue-Ee,Ce=he-be,Fe=Math.sqrt(ke*ke+_e*_e);return{x:(me+De+ke/Fe*Ce)/2,y:(Ee+Ue+_e/Fe*Ce)/2,r:(Fe+be+he)/2}}function f(le,ne,me){var Ee=le.x,be=le.y,De=le.r,Ue=ne.x,he=ne.y,ke=ne.r,_e=me.x,Ce=me.y,Fe=me.r,Re=Ee-Ue,He=Ee-_e,Ge=be-he,$e=be-Ce,st=ke-De,Ke=Fe-De,gt=Ee*Ee+be*be-De*De,mt=gt-Ue*Ue-he*he+ke*ke,at=gt-_e*_e-Ce*Ce+Fe*Fe,rt=He*Ge-Re*$e,xt=(Ge*at-$e*mt)/(2*rt)-Ee,Tt=($e*st-Ge*Ke)/rt,wt=(He*mt-Re*at)/(2*rt)-be,Ot=(Re*Ke-He*st)/rt,Ct=Tt*Tt+Ot*Ot-1,Ye=2*(De+xt*Tt+wt*Ot),Xe=xt*xt+wt*wt-De*De,Ve=-(Ct?(Ye+Math.sqrt(Ye*Ye-4*Ct*Xe))/(2*Ct):Xe/Ye);return{x:Ee+xt+Tt*Ve,y:be+wt+Ot*Ve,r:Ve}}function y(le,ne,me){var Ee,be,De,Ue,he=le.x-ne.x,ke=le.y-ne.y,_e=he*he+ke*ke;_e?(be=ne.r+me.r,be*=be,Ue=le.r+me.r,be>(Ue*=Ue)?(Ee=(_e+Ue-be)/(2*_e),De=Math.sqrt(Math.max(0,Ue/_e-Ee*Ee)),me.x=le.x-Ee*he-De*ke,me.y=le.y-Ee*ke+De*he):(Ee=(_e+be-Ue)/(2*_e),De=Math.sqrt(Math.max(0,be/_e-Ee*Ee)),me.x=ne.x+Ee*he-De*ke,me.y=ne.y+Ee*ke+De*he)):(me.x=ne.x+me.r,me.y=ne.y)}function v(le,ne){var me=le.r+ne.r-1e-6,Ee=ne.x-le.x,be=ne.y-le.y;return me>0&&me*me>Ee*Ee+be*be}function m(le){var ne=le._,me=le.next._,Ee=ne.r+me.r,be=(ne.x*me.r+me.x*ne.r)/Ee,De=(ne.y*me.r+me.y*ne.r)/Ee;return be*be+De*De}function _(le){this._=le,this.next=null,this.previous=null}function h(le){if(!(be=le.length))return 0;var ne,me,Ee,be,De,Ue,he,ke,_e,Ce,Fe;if((ne=le[0]).x=0,ne.y=0,!(be>1))return ne.r;if(me=le[1],ne.x=-me.r,me.x=ne.r,me.y=0,!(be>2))return ne.r+me.r;y(me,ne,Ee=le[2]),ne=new _(ne),me=new _(me),Ee=new _(Ee),ne.next=Ee.previous=me,me.next=ne.previous=Ee,Ee.next=me.previous=ne;e:for(he=3;he<be;++he){y(ne._,me._,Ee=le[he]),Ee=new _(Ee),ke=me.next,_e=ne.previous,Ce=me._.r,Fe=ne._.r;do if(Ce<=Fe){if(v(ke._,Ee._)){me=ke,ne.next=me,me.previous=ne,--he;continue e}Ce+=ke._.r,ke=ke.next}else{if(v(_e._,Ee._)){(ne=_e).next=me,me.previous=ne,--he;continue e}Fe+=_e._.r,_e=_e.previous}while(ke!==_e.next);for(Ee.previous=ne,Ee.next=me,ne.next=me.previous=me=Ee,De=m(ne);(Ee=Ee.next)!==me;)(Ue=m(Ee))<De&&(ne=Ee,De=Ue);me=ne.next}for(ne=[me._],Ee=me;(Ee=Ee.next)!==me;)ne.push(Ee._);for(Ee=a(ne),he=0;he<be;++he)(ne=le[he]).x-=Ee.x,ne.y-=Ee.y;return Ee.r}function A(le){return h(le),le}function w(le){if(typeof le!="function")throw new Error;return le}function E(){return 0}function L(le){return function(){return le}}function C(le){return Math.sqrt(le.value)}function P(){var le=null,ne=1,me=1,Ee=E;function be(De){return De.x=ne/2,De.y=me/2,le?De.eachBefore(D(le)).eachAfter(G(Ee,.5)).eachBefore(I(1)):De.eachBefore(D(C)).eachAfter(G(E,1)).eachAfter(G(Ee,De.r/Math.min(ne,me))).eachBefore(I(Math.min(ne,me)/(2*De.r))),De}return be.radius=function(De){return arguments.length?(le=(Ue=De)==null?null:w(Ue),be):le;var Ue},be.size=function(De){return arguments.length?(ne=+De[0],me=+De[1],be):[ne,me]},be.padding=function(De){return arguments.length?(Ee=typeof De=="function"?De:L(+De),be):Ee},be}function D(le){return function(ne){ne.children||(ne.r=Math.max(0,+le(ne)||0))}}function G(le,ne){return function(me){if(Ee=me.children){var Ee,be,De,Ue=Ee.length,he=le(me)*ne||0;if(he)for(be=0;be<Ue;++be)Ee[be].r+=he;if(De=h(Ee),he)for(be=0;be<Ue;++be)Ee[be].r-=he;me.r=De+he}}}function I(le){return function(ne){var me=ne.parent;ne.r*=le,me&&(ne.x=me.x+le*ne.x,ne.y=me.y+le*ne.y)}}function H(le){le.x0=Math.round(le.x0),le.y0=Math.round(le.y0),le.x1=Math.round(le.x1),le.y1=Math.round(le.y1)}function N(le,ne,me,Ee,be){for(var De,Ue=le.children,he=-1,ke=Ue.length,_e=le.value&&(Ee-ne)/le.value;++he<ke;)(De=Ue[he]).y0=me,De.y1=be,De.x0=ne,De.x1=ne+=De.value*_e}function F(){var le=1,ne=1,me=0,Ee=!1;function be(De){var Ue=De.height+1;return De.x0=De.y0=me,De.x1=le,De.y1=ne/Ue,De.eachBefore(function(he,ke){return function(_e){_e.children&&N(_e,_e.x0,he*(_e.depth+1)/ke,_e.x1,he*(_e.depth+2)/ke);var Ce=_e.x0,Fe=_e.y0,Re=_e.x1-me,He=_e.y1-me;Re<Ce&&(Ce=Re=(Ce+Re)/2),He<Fe&&(Fe=He=(Fe+He)/2),_e.x0=Ce,_e.y0=Fe,_e.x1=Re,_e.y1=He}}(ne,Ue)),Ee&&De.eachBefore(H),De}return be.round=function(De){return arguments.length?(Ee=!!De,be):Ee},be.size=function(De){return arguments.length?(le=+De[0],ne=+De[1],be):[le,ne]},be.padding=function(De){return arguments.length?(me=+De,be):me},be}var V="$",q={depth:-1},te={};function $(le){return le.id}function W(le){return le.parentId}function Z(){var le=$,ne=W;function me(Ee){var be,De,Ue,he,ke,_e,Ce,Fe=Ee.length,Re=new Array(Fe),He={};for(De=0;De<Fe;++De)be=Ee[De],ke=Re[De]=new r(be),(_e=le(be,De,Ee))!=null&&(_e+="")&&(He[Ce=V+(ke.id=_e)]=Ce in He?te:ke);for(De=0;De<Fe;++De)if(ke=Re[De],(_e=ne(Ee[De],De,Ee))!=null&&(_e+="")){if(!(he=He[V+_e]))throw new Error("missing: "+_e);if(he===te)throw new Error("ambiguous: "+_e);he.children?he.children.push(ke):he.children=[ke],ke.parent=he}else{if(Ue)throw new Error("multiple roots");Ue=ke}if(!Ue)throw new Error("no root");if(Ue.parent=q,Ue.eachBefore(function(Ge){Ge.depth=Ge.parent.depth+1,--Fe}).eachBefore(i),Ue.parent=null,Fe>0)throw new Error("cycle");return Ue}return me.id=function(Ee){return arguments.length?(le=w(Ee),me):le},me.parentId=function(Ee){return arguments.length?(ne=w(Ee),me):ne},me}function J(le,ne){return le.parent===ne.parent?1:2}function ee(le){var ne=le.children;return ne?ne[0]:le.t}function re(le){var ne=le.children;return ne?ne[ne.length-1]:le.t}function ae(le,ne,me){var Ee=me/(ne.i-le.i);ne.c-=Ee,ne.s+=me,le.c+=Ee,ne.z+=me,ne.m+=me}function oe(le,ne,me){return le.a.parent===ne.parent?le.a:me}function ce(le,ne){this._=le,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=ne}function pe(){var le=J,ne=1,me=1,Ee=null;function be(ke){var _e=function(Ke){for(var gt,mt,at,rt,xt,Tt=new ce(Ke,0),wt=[Tt];gt=wt.pop();)if(at=gt._.children)for(gt.children=new Array(xt=at.length),rt=xt-1;rt>=0;--rt)wt.push(mt=gt.children[rt]=new ce(at[rt],rt)),mt.parent=gt;return(Tt.parent=new ce(null,0)).children=[Tt],Tt}(ke);if(_e.eachAfter(De),_e.parent.m=-_e.z,_e.eachBefore(Ue),Ee)ke.eachBefore(he);else{var Ce=ke,Fe=ke,Re=ke;ke.eachBefore(function(Ke){Ke.x<Ce.x&&(Ce=Ke),Ke.x>Fe.x&&(Fe=Ke),Ke.depth>Re.depth&&(Re=Ke)});var He=Ce===Fe?1:le(Ce,Fe)/2,Ge=He-Ce.x,$e=ne/(Fe.x+He+Ge),st=me/(Re.depth||1);ke.eachBefore(function(Ke){Ke.x=(Ke.x+Ge)*$e,Ke.y=Ke.depth*st})}return ke}function De(ke){var _e=ke.children,Ce=ke.parent.children,Fe=ke.i?Ce[ke.i-1]:null;if(_e){(function(He){for(var Ge,$e=0,st=0,Ke=He.children,gt=Ke.length;--gt>=0;)(Ge=Ke[gt]).z+=$e,Ge.m+=$e,$e+=Ge.s+(st+=Ge.c)})(ke);var Re=(_e[0].z+_e[_e.length-1].z)/2;Fe?(ke.z=Fe.z+le(ke._,Fe._),ke.m=ke.z-Re):ke.z=Re}else Fe&&(ke.z=Fe.z+le(ke._,Fe._));ke.parent.A=function(He,Ge,$e){if(Ge){for(var st,Ke=He,gt=He,mt=Ge,at=Ke.parent.children[0],rt=Ke.m,xt=gt.m,Tt=mt.m,wt=at.m;mt=re(mt),Ke=ee(Ke),mt&&Ke;)at=ee(at),(gt=re(gt)).a=He,(st=mt.z+Tt-Ke.z-rt+le(mt._,Ke._))>0&&(ae(oe(mt,He,$e),He,st),rt+=st,xt+=st),Tt+=mt.m,rt+=Ke.m,wt+=at.m,xt+=gt.m;mt&&!re(gt)&&(gt.t=mt,gt.m+=Tt-xt),Ke&&!ee(at)&&(at.t=Ke,at.m+=rt-wt,$e=He)}return $e}(ke,Fe,ke.parent.A||Ce[0])}function Ue(ke){ke._.x=ke.z+ke.parent.m,ke.m+=ke.parent.m}function he(ke){ke.x*=ne,ke.y=ke.depth*me}return be.separation=function(ke){return arguments.length?(le=ke,be):le},be.size=function(ke){return arguments.length?(Ee=!1,ne=+ke[0],me=+ke[1],be):Ee?null:[ne,me]},be.nodeSize=function(ke){return arguments.length?(Ee=!0,ne=+ke[0],me=+ke[1],be):Ee?[ne,me]:null},be}function ve(le,ne,me,Ee,be){for(var De,Ue=le.children,he=-1,ke=Ue.length,_e=le.value&&(be-me)/le.value;++he<ke;)(De=Ue[he]).x0=ne,De.x1=Ee,De.y0=me,De.y1=me+=De.value*_e}ce.prototype=Object.create(r.prototype);var we=(1+Math.sqrt(5))/2;function xe(le,ne,me,Ee,be,De){for(var Ue,he,ke,_e,Ce,Fe,Re,He,Ge,$e,st,Ke=[],gt=ne.children,mt=0,at=0,rt=gt.length,xt=ne.value;mt<rt;){ke=be-me,_e=De-Ee;do Ce=gt[at++].value;while(!Ce&&at<rt);for(Fe=Re=Ce,st=Ce*Ce*($e=Math.max(_e/ke,ke/_e)/(xt*le)),Ge=Math.max(Re/st,st/Fe);at<rt;++at){if(Ce+=he=gt[at].value,he<Fe&&(Fe=he),he>Re&&(Re=he),st=Ce*Ce*$e,(He=Math.max(Re/st,st/Fe))>Ge){Ce-=he;break}Ge=He}Ke.push(Ue={value:Ce,dice:ke<_e,children:gt.slice(mt,at)}),Ue.dice?N(Ue,me,Ee,be,xt?Ee+=_e*Ce/xt:De):ve(Ue,me,Ee,xt?me+=ke*Ce/xt:be,De),xt-=Ce,mt=at}return Ke}var ge=function le(ne){function me(Ee,be,De,Ue,he){xe(ne,Ee,be,De,Ue,he)}return me.ratio=function(Ee){return le((Ee=+Ee)>1?Ee:1)},me}(we);function Oe(){var le=ge,ne=!1,me=1,Ee=1,be=[0],De=E,Ue=E,he=E,ke=E,_e=E;function Ce(Re){return Re.x0=Re.y0=0,Re.x1=me,Re.y1=Ee,Re.eachBefore(Fe),be=[0],ne&&Re.eachBefore(H),Re}function Fe(Re){var He=be[Re.depth],Ge=Re.x0+He,$e=Re.y0+He,st=Re.x1-He,Ke=Re.y1-He;st<Ge&&(Ge=st=(Ge+st)/2),Ke<$e&&($e=Ke=($e+Ke)/2),Re.x0=Ge,Re.y0=$e,Re.x1=st,Re.y1=Ke,Re.children&&(He=be[Re.depth+1]=De(Re)/2,Ge+=_e(Re)-He,$e+=Ue(Re)-He,(st-=he(Re)-He)<Ge&&(Ge=st=(Ge+st)/2),(Ke-=ke(Re)-He)<$e&&($e=Ke=($e+Ke)/2),le(Re,Ge,$e,st,Ke))}return Ce.round=function(Re){return arguments.length?(ne=!!Re,Ce):ne},Ce.size=function(Re){return arguments.length?(me=+Re[0],Ee=+Re[1],Ce):[me,Ee]},Ce.tile=function(Re){return arguments.length?(le=w(Re),Ce):le},Ce.padding=function(Re){return arguments.length?Ce.paddingInner(Re).paddingOuter(Re):Ce.paddingInner()},Ce.paddingInner=function(Re){return arguments.length?(De=typeof Re=="function"?Re:L(+Re),Ce):De},Ce.paddingOuter=function(Re){return arguments.length?Ce.paddingTop(Re).paddingRight(Re).paddingBottom(Re).paddingLeft(Re):Ce.paddingTop()},Ce.paddingTop=function(Re){return arguments.length?(Ue=typeof Re=="function"?Re:L(+Re),Ce):Ue},Ce.paddingRight=function(Re){return arguments.length?(he=typeof Re=="function"?Re:L(+Re),Ce):he},Ce.paddingBottom=function(Re){return arguments.length?(ke=typeof Re=="function"?Re:L(+Re),Ce):ke},Ce.paddingLeft=function(Re){return arguments.length?(_e=typeof Re=="function"?Re:L(+Re),Ce):_e},Ce}function Ae(le,ne,me,Ee,be){var De,Ue,he=le.children,ke=he.length,_e=new Array(ke+1);for(_e[0]=Ue=De=0;De<ke;++De)_e[De+1]=Ue+=he[De].value;(function Ce(Fe,Re,He,Ge,$e,st,Ke){if(Fe>=Re-1){var gt=he[Fe];return gt.x0=Ge,gt.y0=$e,gt.x1=st,void(gt.y1=Ke)}for(var mt=_e[Fe],at=He/2+mt,rt=Fe+1,xt=Re-1;rt<xt;){var Tt=rt+xt>>>1;_e[Tt]<at?rt=Tt+1:xt=Tt}at-_e[rt-1]<_e[rt]-at&&Fe+1<rt&&--rt;var wt=_e[rt]-mt,Ot=He-wt;if(st-Ge>Ke-$e){var Ct=(Ge*Ot+st*wt)/He;Ce(Fe,rt,wt,Ge,$e,Ct,Ke),Ce(rt,Re,Ot,Ct,$e,st,Ke)}else{var Ye=($e*Ot+Ke*wt)/He;Ce(Fe,rt,wt,Ge,$e,st,Ye),Ce(rt,Re,Ot,Ge,Ye,st,Ke)}})(0,ke,le.value,ne,me,Ee,be)}function Te(le,ne,me,Ee,be){(1&le.depth?ve:N)(le,ne,me,Ee,be)}var se=function le(ne){function me(Ee,be,De,Ue,he){if((ke=Ee._squarify)&&ke.ratio===ne)for(var ke,_e,Ce,Fe,Re,He=-1,Ge=ke.length,$e=Ee.value;++He<Ge;){for(Ce=(_e=ke[He]).children,Fe=_e.value=0,Re=Ce.length;Fe<Re;++Fe)_e.value+=Ce[Fe].value;_e.dice?N(_e,be,De,Ue,De+=(he-De)*_e.value/$e):ve(_e,be,De,be+=(Ue-be)*_e.value/$e,he),$e-=_e.value}else Ee._squarify=ke=xe(ne,Ee,be,De,Ue,he),ke.ratio=ne}return me.ratio=function(Ee){return le((Ee=+Ee)>1?Ee:1)},me}(we)},45879:function(Q,z,t){t.d(z,{h5:function(){return p}});var S=Math.PI,k=2*S,l=1e-6,T=k-l;function b(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function d(){return new b}b.prototype=d.prototype={constructor:b,moveTo:function(c,x){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+x)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(c,x){this._+="L"+(this._x1=+c)+","+(this._y1=+x)},quadraticCurveTo:function(c,x,g,f){this._+="Q"+ +c+","+ +x+","+(this._x1=+g)+","+(this._y1=+f)},bezierCurveTo:function(c,x,g,f,y,v){this._+="C"+ +c+","+ +x+","+ +g+","+ +f+","+(this._x1=+y)+","+(this._y1=+v)},arcTo:function(c,x,g,f,y){c=+c,x=+x,g=+g,f=+f,y=+y;var v=this._x1,m=this._y1,_=g-c,h=f-x,A=v-c,w=m-x,E=A*A+w*w;if(y<0)throw new Error("negative radius: "+y);if(this._x1===null)this._+="M"+(this._x1=c)+","+(this._y1=x);else if(E>l)if(Math.abs(w*_-h*A)>l&&y){var L=g-v,C=f-m,P=_*_+h*h,D=L*L+C*C,G=Math.sqrt(P),I=Math.sqrt(E),H=y*Math.tan((S-Math.acos((P+E-D)/(2*G*I)))/2),N=H/I,F=H/G;Math.abs(N-1)>l&&(this._+="L"+(c+N*A)+","+(x+N*w)),this._+="A"+y+","+y+",0,0,"+ +(w*L>A*C)+","+(this._x1=c+F*_)+","+(this._y1=x+F*h)}else this._+="L"+(this._x1=c)+","+(this._y1=x)},arc:function(c,x,g,f,y,v){c=+c,x=+x,v=!!v;var m=(g=+g)*Math.cos(f),_=g*Math.sin(f),h=c+m,A=x+_,w=1^v,E=v?f-y:y-f;if(g<0)throw new Error("negative radius: "+g);this._x1===null?this._+="M"+h+","+A:(Math.abs(this._x1-h)>l||Math.abs(this._y1-A)>l)&&(this._+="L"+h+","+A),g&&(E<0&&(E=E%k+k),E>T?this._+="A"+g+","+g+",0,1,"+w+","+(c-m)+","+(x-_)+"A"+g+","+g+",0,1,"+w+","+(this._x1=h)+","+(this._y1=A):E>l&&(this._+="A"+g+","+g+",0,"+ +(E>=S)+","+w+","+(this._x1=c+g*Math.cos(y))+","+(this._y1=x+g*Math.sin(y))))},rect:function(c,x,g,f){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+x)+"h"+ +g+"v"+ +f+"h"+-g+"Z"},toString:function(){return this._}};var s=d,e=Array.prototype.slice;function i(c){return function(){return c}}function r(c){return c[0]}function n(c){return c[1]}function a(c){return c.source}function o(c){return c.target}function u(c,x,g,f,y){c.moveTo(x,g),c.bezierCurveTo(x=(x+f)/2,g,x,y,f,y)}function p(){return function(c){var x=a,g=o,f=r,y=n,v=null;function m(){var _,h=e.call(arguments),A=x.apply(this,h),w=g.apply(this,h);if(v||(v=_=s()),c(v,+f.apply(this,(h[0]=A,h)),+y.apply(this,h),+f.apply(this,(h[0]=w,h)),+y.apply(this,h)),_)return v=null,_+""||null}return m.source=function(_){return arguments.length?(x=_,m):x},m.target=function(_){return arguments.length?(g=_,m):g},m.x=function(_){return arguments.length?(f=typeof _=="function"?_:i(+_),m):f},m.y=function(_){return arguments.length?(y=typeof _=="function"?_:i(+_),m):y},m.context=function(_){return arguments.length?(v=_??null,m):v},m}(u)}},84096:function(Q,z,t){t.d(z,{i$:function(){return a},Dq:function(){return r},g0:function(){return o}});var S=t(58176),k=t(48480),l=t(59879),T=t(82301),b=t(34823),d=t(79791);function s(rt){if(0<=rt.y&&rt.y<100){var xt=new Date(-1,rt.m,rt.d,rt.H,rt.M,rt.S,rt.L);return xt.setFullYear(rt.y),xt}return new Date(rt.y,rt.m,rt.d,rt.H,rt.M,rt.S,rt.L)}function e(rt){if(0<=rt.y&&rt.y<100){var xt=new Date(Date.UTC(-1,rt.m,rt.d,rt.H,rt.M,rt.S,rt.L));return xt.setUTCFullYear(rt.y),xt}return new Date(Date.UTC(rt.y,rt.m,rt.d,rt.H,rt.M,rt.S,rt.L))}function i(rt,xt,Tt){return{y:rt,m:xt,d:Tt,H:0,M:0,S:0,L:0}}function r(rt){var xt=rt.dateTime,Tt=rt.date,wt=rt.time,Ot=rt.periods,Ct=rt.days,Ye=rt.shortDays,Xe=rt.months,Ve=rt.shortMonths,We=y(Ot),nt=v(Ot),ot=y(Ct),Ie=v(Ct),ze=y(Ye),et=v(Ye),tt=y(Xe),dt=v(Xe),pt=y(Ve),vt=v(Ve),ct={a:function(zt){return Ye[zt.getDay()]},A:function(zt){return Ct[zt.getDay()]},b:function(zt){return Ve[zt.getMonth()]},B:function(zt){return Xe[zt.getMonth()]},c:null,d:Z,e:Z,f:oe,H:J,I:ee,j:re,L:ae,m:ce,M:pe,p:function(zt){return Ot[+(zt.getHours()>=12)]},q:function(zt){return 1+~~(zt.getMonth()/3)},Q:mt,s:at,S:ve,u:we,U:xe,V:ge,w:Oe,W:Ae,x:null,X:null,y:Te,Y:se,Z:le,"%":gt},kt={a:function(zt){return Ye[zt.getUTCDay()]},A:function(zt){return Ct[zt.getUTCDay()]},b:function(zt){return Ve[zt.getUTCMonth()]},B:function(zt){return Xe[zt.getUTCMonth()]},c:null,d:ne,e:ne,f:Ue,H:me,I:Ee,j:be,L:De,m:he,M:ke,p:function(zt){return Ot[+(zt.getUTCHours()>=12)]},q:function(zt){return 1+~~(zt.getUTCMonth()/3)},Q:mt,s:at,S:_e,u:Ce,U:Fe,V:Re,w:He,W:Ge,x:null,X:null,y:$e,Y:st,Z:Ke,"%":gt},ut={a:function(zt,Rt,Jt){var qt=ze.exec(Rt.slice(Jt));return qt?(zt.w=et[qt[0].toLowerCase()],Jt+qt[0].length):-1},A:function(zt,Rt,Jt){var qt=ot.exec(Rt.slice(Jt));return qt?(zt.w=Ie[qt[0].toLowerCase()],Jt+qt[0].length):-1},b:function(zt,Rt,Jt){var qt=pt.exec(Rt.slice(Jt));return qt?(zt.m=vt[qt[0].toLowerCase()],Jt+qt[0].length):-1},B:function(zt,Rt,Jt){var qt=tt.exec(Rt.slice(Jt));return qt?(zt.m=dt[qt[0].toLowerCase()],Jt+qt[0].length):-1},c:function(zt,Rt,Jt){return It(zt,xt,Rt,Jt)},d:G,e:G,f:q,H,I:H,j:I,L:V,m:D,M:N,p:function(zt,Rt,Jt){var qt=We.exec(Rt.slice(Jt));return qt?(zt.p=nt[qt[0].toLowerCase()],Jt+qt[0].length):-1},q:P,Q:$,s:W,S:F,u:_,U:h,V:A,w:m,W:w,x:function(zt,Rt,Jt){return It(zt,Tt,Rt,Jt)},X:function(zt,Rt,Jt){return It(zt,wt,Rt,Jt)},y:L,Y:E,Z:C,"%":te};function ft(zt,Rt){return function(Jt){var qt,Wt,jt,fn=[],xn=-1,un=0,Ht=zt.length;for(Jt instanceof Date||(Jt=new Date(+Jt));++xn<Ht;)zt.charCodeAt(xn)===37&&(fn.push(zt.slice(un,xn)),(Wt=u[qt=zt.charAt(++xn)])!=null?qt=zt.charAt(++xn):Wt=qt==="e"?" ":"0",(jt=Rt[qt])&&(qt=jt(Jt,Wt)),fn.push(qt),un=xn+1);return fn.push(zt.slice(un,xn)),fn.join("")}}function bt(zt,Rt){return function(Jt){var qt,Wt,jt=i(1900,void 0,1);if(It(jt,zt,Jt+="",0)!=Jt.length)return null;if("Q"in jt)return new Date(jt.Q);if("s"in jt)return new Date(1e3*jt.s+("L"in jt?jt.L:0));if(Rt&&!("Z"in jt)&&(jt.Z=0),"p"in jt&&(jt.H=jt.H%12+12*jt.p),jt.m===void 0&&(jt.m="q"in jt?jt.q:0),"V"in jt){if(jt.V<1||jt.V>53)return null;"w"in jt||(jt.w=1),"Z"in jt?(Wt=(qt=e(i(jt.y,0,1))).getUTCDay(),qt=Wt>4||Wt===0?S.l6.ceil(qt):(0,S.l6)(qt),qt=k.Z.offset(qt,7*(jt.V-1)),jt.y=qt.getUTCFullYear(),jt.m=qt.getUTCMonth(),jt.d=qt.getUTCDate()+(jt.w+6)%7):(Wt=(qt=s(i(jt.y,0,1))).getDay(),qt=Wt>4||Wt===0?l.wA.ceil(qt):(0,l.wA)(qt),qt=T.Z.offset(qt,7*(jt.V-1)),jt.y=qt.getFullYear(),jt.m=qt.getMonth(),jt.d=qt.getDate()+(jt.w+6)%7)}else("W"in jt||"U"in jt)&&("w"in jt||(jt.w="u"in jt?jt.u%7:"W"in jt?1:0),Wt="Z"in jt?e(i(jt.y,0,1)).getUTCDay():s(i(jt.y,0,1)).getDay(),jt.m=0,jt.d="W"in jt?(jt.w+6)%7+7*jt.W-(Wt+5)%7:jt.w+7*jt.U-(Wt+6)%7);return"Z"in jt?(jt.H+=jt.Z/100|0,jt.M+=jt.Z%100,e(jt)):s(jt)}}function It(zt,Rt,Jt,qt){for(var Wt,jt,fn=0,xn=Rt.length,un=Jt.length;fn<xn;){if(qt>=un)return-1;if((Wt=Rt.charCodeAt(fn++))===37){if(Wt=Rt.charAt(fn++),!(jt=ut[Wt in u?Rt.charAt(fn++):Wt])||(qt=jt(zt,Jt,qt))<0)return-1}else if(Wt!=Jt.charCodeAt(qt++))return-1}return qt}return ct.x=ft(Tt,ct),ct.X=ft(wt,ct),ct.c=ft(xt,ct),kt.x=ft(Tt,kt),kt.X=ft(wt,kt),kt.c=ft(xt,kt),{format:function(zt){var Rt=ft(zt+="",ct);return Rt.toString=function(){return zt},Rt},parse:function(zt){var Rt=bt(zt+="",!1);return Rt.toString=function(){return zt},Rt},utcFormat:function(zt){var Rt=ft(zt+="",kt);return Rt.toString=function(){return zt},Rt},utcParse:function(zt){var Rt=bt(zt+="",!0);return Rt.toString=function(){return zt},Rt}}}var n,a,o,u={"-":"",_:" ",0:"0"},p=/^\s*\d+/,c=/^%/,x=/[\\^$*+?|[\]().{}]/g;function g(rt,xt,Tt){var wt=rt<0?"-":"",Ot=(wt?-rt:rt)+"",Ct=Ot.length;return wt+(Ct<Tt?new Array(Tt-Ct+1).join(xt)+Ot:Ot)}function f(rt){return rt.replace(x,"\\$&")}function y(rt){return new RegExp("^(?:"+rt.map(f).join("|")+")","i")}function v(rt){for(var xt={},Tt=-1,wt=rt.length;++Tt<wt;)xt[rt[Tt].toLowerCase()]=Tt;return xt}function m(rt,xt,Tt){var wt=p.exec(xt.slice(Tt,Tt+1));return wt?(rt.w=+wt[0],Tt+wt[0].length):-1}function _(rt,xt,Tt){var wt=p.exec(xt.slice(Tt,Tt+1));return wt?(rt.u=+wt[0],Tt+wt[0].length):-1}function h(rt,xt,Tt){var wt=p.exec(xt.slice(Tt,Tt+2));return wt?(rt.U=+wt[0],Tt+wt[0].length):-1}function A(rt,xt,Tt){var wt=p.exec(xt.slice(Tt,Tt+2));return wt?(rt.V=+wt[0],Tt+wt[0].length):-1}function w(rt,xt,Tt){var wt=p.exec(xt.slice(Tt,Tt+2));return wt?(rt.W=+wt[0],Tt+wt[0].length):-1}function E(rt,xt,Tt){var wt=p.exec(xt.slice(Tt,Tt+4));return wt?(rt.y=+wt[0],Tt+wt[0].length):-1}function L(rt,xt,Tt){var wt=p.exec(xt.slice(Tt,Tt+2));return wt?(rt.y=+wt[0]+(+wt[0]>68?1900:2e3),Tt+wt[0].length):-1}function C(rt,xt,Tt){var wt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(xt.slice(Tt,Tt+6));return wt?(rt.Z=wt[1]?0:-(wt[2]+(wt[3]||"00")),Tt+wt[0].length):-1}function P(rt,xt,Tt){var wt=p.exec(xt.slice(Tt,Tt+1));return wt?(rt.q=3*wt[0]-3,Tt+wt[0].length):-1}function D(rt,xt,Tt){var wt=p.exec(xt.slice(Tt,Tt+2));return wt?(rt.m=wt[0]-1,Tt+wt[0].length):-1}function G(rt,xt,Tt){var wt=p.exec(xt.slice(Tt,Tt+2));return wt?(rt.d=+wt[0],Tt+wt[0].length):-1}function I(rt,xt,Tt){var wt=p.exec(xt.slice(Tt,Tt+3));return wt?(rt.m=0,rt.d=+wt[0],Tt+wt[0].length):-1}function H(rt,xt,Tt){var wt=p.exec(xt.slice(Tt,Tt+2));return wt?(rt.H=+wt[0],Tt+wt[0].length):-1}function N(rt,xt,Tt){var wt=p.exec(xt.slice(Tt,Tt+2));return wt?(rt.M=+wt[0],Tt+wt[0].length):-1}function F(rt,xt,Tt){var wt=p.exec(xt.slice(Tt,Tt+2));return wt?(rt.S=+wt[0],Tt+wt[0].length):-1}function V(rt,xt,Tt){var wt=p.exec(xt.slice(Tt,Tt+3));return wt?(rt.L=+wt[0],Tt+wt[0].length):-1}function q(rt,xt,Tt){var wt=p.exec(xt.slice(Tt,Tt+6));return wt?(rt.L=Math.floor(wt[0]/1e3),Tt+wt[0].length):-1}function te(rt,xt,Tt){var wt=c.exec(xt.slice(Tt,Tt+1));return wt?Tt+wt[0].length:-1}function $(rt,xt,Tt){var wt=p.exec(xt.slice(Tt));return wt?(rt.Q=+wt[0],Tt+wt[0].length):-1}function W(rt,xt,Tt){var wt=p.exec(xt.slice(Tt));return wt?(rt.s=+wt[0],Tt+wt[0].length):-1}function Z(rt,xt){return g(rt.getDate(),xt,2)}function J(rt,xt){return g(rt.getHours(),xt,2)}function ee(rt,xt){return g(rt.getHours()%12||12,xt,2)}function re(rt,xt){return g(1+T.Z.count((0,b.Z)(rt),rt),xt,3)}function ae(rt,xt){return g(rt.getMilliseconds(),xt,3)}function oe(rt,xt){return ae(rt,xt)+"000"}function ce(rt,xt){return g(rt.getMonth()+1,xt,2)}function pe(rt,xt){return g(rt.getMinutes(),xt,2)}function ve(rt,xt){return g(rt.getSeconds(),xt,2)}function we(rt){var xt=rt.getDay();return xt===0?7:xt}function xe(rt,xt){return g(l.OM.count((0,b.Z)(rt)-1,rt),xt,2)}function ge(rt,xt){var Tt=rt.getDay();return rt=Tt>=4||Tt===0?(0,l.bL)(rt):l.bL.ceil(rt),g(l.bL.count((0,b.Z)(rt),rt)+((0,b.Z)(rt).getDay()===4),xt,2)}function Oe(rt){return rt.getDay()}function Ae(rt,xt){return g(l.wA.count((0,b.Z)(rt)-1,rt),xt,2)}function Te(rt,xt){return g(rt.getFullYear()%100,xt,2)}function se(rt,xt){return g(rt.getFullYear()%1e4,xt,4)}function le(rt){var xt=rt.getTimezoneOffset();return(xt>0?"-":(xt*=-1,"+"))+g(xt/60|0,"0",2)+g(xt%60,"0",2)}function ne(rt,xt){return g(rt.getUTCDate(),xt,2)}function me(rt,xt){return g(rt.getUTCHours(),xt,2)}function Ee(rt,xt){return g(rt.getUTCHours()%12||12,xt,2)}function be(rt,xt){return g(1+k.Z.count((0,d.Z)(rt),rt),xt,3)}function De(rt,xt){return g(rt.getUTCMilliseconds(),xt,3)}function Ue(rt,xt){return De(rt,xt)+"000"}function he(rt,xt){return g(rt.getUTCMonth()+1,xt,2)}function ke(rt,xt){return g(rt.getUTCMinutes(),xt,2)}function _e(rt,xt){return g(rt.getUTCSeconds(),xt,2)}function Ce(rt){var xt=rt.getUTCDay();return xt===0?7:xt}function Fe(rt,xt){return g(S.Ox.count((0,d.Z)(rt)-1,rt),xt,2)}function Re(rt,xt){var Tt=rt.getUTCDay();return rt=Tt>=4||Tt===0?(0,S.hB)(rt):S.hB.ceil(rt),g(S.hB.count((0,d.Z)(rt),rt)+((0,d.Z)(rt).getUTCDay()===4),xt,2)}function He(rt){return rt.getUTCDay()}function Ge(rt,xt){return g(S.l6.count((0,d.Z)(rt)-1,rt),xt,2)}function $e(rt,xt){return g(rt.getUTCFullYear()%100,xt,2)}function st(rt,xt){return g(rt.getUTCFullYear()%1e4,xt,4)}function Ke(){return"+0000"}function gt(){return"%"}function mt(rt){return+rt}function at(rt){return Math.floor(+rt/1e3)}n=r({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),a=n.format,n.parse,o=n.utcFormat,n.utcParse},82301:function(Q,z,t){t.d(z,{a:function(){return T}});var S=t(30052),k=t(54263),l=(0,S.Z)(function(b){b.setHours(0,0,0,0)},function(b,d){b.setDate(b.getDate()+d)},function(b,d){return(d-b-(d.getTimezoneOffset()-b.getTimezoneOffset())*k.yB)/k.UD},function(b){return b.getDate()-1});z.Z=l;var T=l.range},54263:function(Q,z,t){t.d(z,{UD:function(){return T},Y2:function(){return l},Ym:function(){return S},iM:function(){return b},yB:function(){return k}});var S=1e3,k=6e4,l=36e5,T=864e5,b=6048e5},81041:function(Q,z,t){t.r(z),t.d(z,{timeDay:function(){return p.Z},timeDays:function(){return p.a},timeFriday:function(){return c.mC},timeFridays:function(){return c.b$},timeHour:function(){return o},timeHours:function(){return u},timeInterval:function(){return S.Z},timeMillisecond:function(){return l},timeMilliseconds:function(){return T},timeMinute:function(){return r},timeMinutes:function(){return n},timeMonday:function(){return c.wA},timeMondays:function(){return c.bJ},timeMonth:function(){return g},timeMonths:function(){return f},timeSaturday:function(){return c.EY},timeSaturdays:function(){return c.Ff},timeSecond:function(){return s},timeSeconds:function(){return e},timeSunday:function(){return c.OM},timeSundays:function(){return c.vm},timeThursday:function(){return c.bL},timeThursdays:function(){return c.$t},timeTuesday:function(){return c.sy},timeTuesdays:function(){return c.aU},timeWednesday:function(){return c.zg},timeWednesdays:function(){return c.Ld},timeWeek:function(){return c.OM},timeWeeks:function(){return c.vm},timeYear:function(){return y.Z},timeYears:function(){return y.g},utcDay:function(){return E.Z},utcDays:function(){return E.y},utcFriday:function(){return L.QQ},utcFridays:function(){return L.fz},utcHour:function(){return A},utcHours:function(){return w},utcMillisecond:function(){return l},utcMilliseconds:function(){return T},utcMinute:function(){return m},utcMinutes:function(){return _},utcMonday:function(){return L.l6},utcMondays:function(){return L.$3},utcMonth:function(){return P},utcMonths:function(){return D},utcSaturday:function(){return L.g4},utcSaturdays:function(){return L.Q_},utcSecond:function(){return s},utcSeconds:function(){return e},utcSunday:function(){return L.Ox},utcSundays:function(){return L.SU},utcThursday:function(){return L.hB},utcThursdays:function(){return L.xj},utcTuesday:function(){return L.J1},utcTuesdays:function(){return L.DK},utcWednesday:function(){return L.b3},utcWednesdays:function(){return L.uy},utcWeek:function(){return L.Ox},utcWeeks:function(){return L.SU},utcYear:function(){return G.Z},utcYears:function(){return G.D}});var S=t(30052),k=(0,S.Z)(function(){},function(I,H){I.setTime(+I+H)},function(I,H){return H-I});k.every=function(I){return I=Math.floor(I),isFinite(I)&&I>0?I>1?(0,S.Z)(function(H){H.setTime(Math.floor(H/I)*I)},function(H,N){H.setTime(+H+N*I)},function(H,N){return(N-H)/I}):k:null};var l=k,T=k.range,b=t(54263),d=(0,S.Z)(function(I){I.setTime(I-I.getMilliseconds())},function(I,H){I.setTime(+I+H*b.Ym)},function(I,H){return(H-I)/b.Ym},function(I){return I.getUTCSeconds()}),s=d,e=d.range,i=(0,S.Z)(function(I){I.setTime(I-I.getMilliseconds()-I.getSeconds()*b.Ym)},function(I,H){I.setTime(+I+H*b.yB)},function(I,H){return(H-I)/b.yB},function(I){return I.getMinutes()}),r=i,n=i.range,a=(0,S.Z)(function(I){I.setTime(I-I.getMilliseconds()-I.getSeconds()*b.Ym-I.getMinutes()*b.yB)},function(I,H){I.setTime(+I+H*b.Y2)},function(I,H){return(H-I)/b.Y2},function(I){return I.getHours()}),o=a,u=a.range,p=t(82301),c=t(59879),x=(0,S.Z)(function(I){I.setDate(1),I.setHours(0,0,0,0)},function(I,H){I.setMonth(I.getMonth()+H)},function(I,H){return H.getMonth()-I.getMonth()+12*(H.getFullYear()-I.getFullYear())},function(I){return I.getMonth()}),g=x,f=x.range,y=t(34823),v=(0,S.Z)(function(I){I.setUTCSeconds(0,0)},function(I,H){I.setTime(+I+H*b.yB)},function(I,H){return(H-I)/b.yB},function(I){return I.getUTCMinutes()}),m=v,_=v.range,h=(0,S.Z)(function(I){I.setUTCMinutes(0,0,0)},function(I,H){I.setTime(+I+H*b.Y2)},function(I,H){return(H-I)/b.Y2},function(I){return I.getUTCHours()}),A=h,w=h.range,E=t(48480),L=t(58176),C=(0,S.Z)(function(I){I.setUTCDate(1),I.setUTCHours(0,0,0,0)},function(I,H){I.setUTCMonth(I.getUTCMonth()+H)},function(I,H){return H.getUTCMonth()-I.getUTCMonth()+12*(H.getUTCFullYear()-I.getUTCFullYear())},function(I){return I.getUTCMonth()}),P=C,D=C.range,G=t(79791)},30052:function(Q,z,t){t.d(z,{Z:function(){return l}});var S=new Date,k=new Date;function l(T,b,d,s){function e(i){return T(i=arguments.length===0?new Date:new Date(+i)),i}return e.floor=function(i){return T(i=new Date(+i)),i},e.ceil=function(i){return T(i=new Date(i-1)),b(i,1),T(i),i},e.round=function(i){var r=e(i),n=e.ceil(i);return i-r<n-i?r:n},e.offset=function(i,r){return b(i=new Date(+i),r==null?1:Math.floor(r)),i},e.range=function(i,r,n){var a,o=[];if(i=e.ceil(i),n=n==null?1:Math.floor(n),!(i<r&&n>0))return o;do o.push(a=new Date(+i)),b(i,n),T(i);while(a<i&&i<r);return o},e.filter=function(i){return l(function(r){if(r>=r)for(;T(r),!i(r);)r.setTime(r-1)},function(r,n){if(r>=r)if(n<0)for(;++n<=0;)for(;b(r,-1),!i(r););else for(;--n>=0;)for(;b(r,1),!i(r););})},d&&(e.count=function(i,r){return S.setTime(+i),k.setTime(+r),T(S),T(k),Math.floor(d(S,k))},e.every=function(i){return i=Math.floor(i),isFinite(i)&&i>0?i>1?e.filter(s?function(r){return s(r)%i==0}:function(r){return e.count(0,r)%i==0}):e:null}),e}},48480:function(Q,z,t){t.d(z,{y:function(){return T}});var S=t(30052),k=t(54263),l=(0,S.Z)(function(b){b.setUTCHours(0,0,0,0)},function(b,d){b.setUTCDate(b.getUTCDate()+d)},function(b,d){return(d-b)/k.UD},function(b){return b.getUTCDate()-1});z.Z=l;var T=l.range},58176:function(Q,z,t){t.d(z,{$3:function(){return a},DK:function(){return o},J1:function(){return d},Ox:function(){return T},QQ:function(){return i},Q_:function(){return x},SU:function(){return n},b3:function(){return s},fz:function(){return c},g4:function(){return r},hB:function(){return e},l6:function(){return b},uy:function(){return u},xj:function(){return p}});var S=t(30052),k=t(54263);function l(g){return(0,S.Z)(function(f){f.setUTCDate(f.getUTCDate()-(f.getUTCDay()+7-g)%7),f.setUTCHours(0,0,0,0)},function(f,y){f.setUTCDate(f.getUTCDate()+7*y)},function(f,y){return(y-f)/k.iM})}var T=l(0),b=l(1),d=l(2),s=l(3),e=l(4),i=l(5),r=l(6),n=T.range,a=b.range,o=d.range,u=s.range,p=e.range,c=i.range,x=r.range},79791:function(Q,z,t){t.d(z,{D:function(){return l}});var S=t(30052),k=(0,S.Z)(function(T){T.setUTCMonth(0,1),T.setUTCHours(0,0,0,0)},function(T,b){T.setUTCFullYear(T.getUTCFullYear()+b)},function(T,b){return b.getUTCFullYear()-T.getUTCFullYear()},function(T){return T.getUTCFullYear()});k.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,S.Z)(function(b){b.setUTCFullYear(Math.floor(b.getUTCFullYear()/T)*T),b.setUTCMonth(0,1),b.setUTCHours(0,0,0,0)},function(b,d){b.setUTCFullYear(b.getUTCFullYear()+d*T)}):null},z.Z=k;var l=k.range},59879:function(Q,z,t){t.d(z,{$t:function(){return p},EY:function(){return r},Ff:function(){return x},Ld:function(){return u},OM:function(){return T},aU:function(){return o},b$:function(){return c},bJ:function(){return a},bL:function(){return e},mC:function(){return i},sy:function(){return d},vm:function(){return n},wA:function(){return b},zg:function(){return s}});var S=t(30052),k=t(54263);function l(g){return(0,S.Z)(function(f){f.setDate(f.getDate()-(f.getDay()+7-g)%7),f.setHours(0,0,0,0)},function(f,y){f.setDate(f.getDate()+7*y)},function(f,y){return(y-f-(y.getTimezoneOffset()-f.getTimezoneOffset())*k.yB)/k.iM})}var T=l(0),b=l(1),d=l(2),s=l(3),e=l(4),i=l(5),r=l(6),n=T.range,a=b.range,o=d.range,u=s.range,p=e.range,c=i.range,x=r.range},34823:function(Q,z,t){t.d(z,{g:function(){return l}});var S=t(30052),k=(0,S.Z)(function(T){T.setMonth(0,1),T.setHours(0,0,0,0)},function(T,b){T.setFullYear(T.getFullYear()+b)},function(T,b){return b.getFullYear()-T.getFullYear()},function(T){return T.getFullYear()});k.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,S.Z)(function(b){b.setFullYear(Math.floor(b.getFullYear()/T)*T),b.setMonth(0,1),b.setHours(0,0,0,0)},function(b,d){b.setFullYear(b.getFullYear()+d*T)}):null},z.Z=k;var l=k.range},17045:function(Q,z,t){var S=t(8709),k=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",l=Object.prototype.toString,T=Array.prototype.concat,b=Object.defineProperty,d=t(55622)(),s=b&&d,e=function(r,n,a,o){if(n in r){if(o===!0){if(r[n]===a)return}else if(typeof(u=o)!="function"||l.call(u)!=="[object Function]"||!o())return}var u;s?b(r,n,{configurable:!0,enumerable:!1,value:a,writable:!0}):r[n]=a},i=function(r,n){var a=arguments.length>2?arguments[2]:{},o=S(n);k&&(o=T.call(o,Object.getOwnPropertySymbols(n)));for(var u=0;u<o.length;u+=1)e(r,o[u],n[o[u]],a[o[u]])};i.supportsDescriptors=!!s,Q.exports=i},46775:function(Q){Q.exports=function(){for(var z=0;z<arguments.length;z++)if(arguments[z]!==void 0)return arguments[z]}},53545:function(Q){Q.exports=S;var z=(S.canvas=document.createElement("canvas")).getContext("2d"),t=k([32,126]);function S(l,T){Array.isArray(l)&&(l=l.join(", "));var b,d={},s=16,e=.05;T&&(T.length===2&&typeof T[0]=="number"?b=k(T):Array.isArray(T)?b=T:(T.o?b=k(T.o):T.pairs&&(b=T.pairs),T.fontSize&&(s=T.fontSize),T.threshold!=null&&(e=T.threshold))),b||(b=t),z.font=s+"px "+l;for(var i=0;i<b.length;i++){var r=b[i],n=z.measureText(r[0]).width+z.measureText(r[1]).width,a=z.measureText(r).width;if(Math.abs(n-a)>s*e){var o=(a-n)/s;d[r]=1e3*o}}return d}function k(l){for(var T=[],b=l[0];b<=l[1];b++)for(var d=String.fromCharCode(b),s=l[0];s<l[1];s++){var e=d+String.fromCharCode(s);T.push(e)}return T}S.createPairs=k,S.ascii=t},31457:function(Q,z,t){var S=t(65185),k=t(18625),l={M:"moveTo",C:"bezierCurveTo"};Q.exports=function(T,b){T.beginPath(),k(S(b)).forEach(function(d){var s=d[0],e=d.slice(1);T[l[s]].apply(T,e)}),T.closePath()}},90660:function(Q){Q.exports=function(z){switch(z){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},12129:function(Q){function z(t,S,k){var l=0|t[k];if(l<=0)return[];var T,b=new Array(l);if(k===t.length-1)for(T=0;T<l;++T)b[T]=S;else for(T=0;T<l;++T)b[T]=z(t,S,k+1);return b}Q.exports=function(t,S){switch(S===void 0&&(S=0),typeof t){case"number":if(t>0)return function(k,l){var T,b;for(T=new Array(k),b=0;b<k;++b)T[b]=l;return T}(0|t,S);break;case"object":if(typeof t.length=="number")return z(t,S,0)}return[]}},11474:function(Q){function z(A,w,E){E=E||2;var L,C,P,D,G,I,H,N=w&&w.length,F=N?w[0]*E:A.length,V=t(A,0,F,E,!0),q=[];if(!V||V.next===V.prev)return q;if(N&&(V=function($,W,Z,J){var ee,re,ae,oe=[];for(ee=0,re=W.length;ee<re;ee++)(ae=t($,W[ee]*J,ee<re-1?W[ee+1]*J:$.length,J,!1))===ae.next&&(ae.steiner=!0),oe.push(n(ae));for(oe.sort(s),ee=0;ee<oe.length;ee++)e(oe[ee],Z),Z=S(Z,Z.next);return Z}(A,w,V,E)),A.length>80*E){L=P=A[0],C=D=A[1];for(var te=E;te<F;te+=E)(G=A[te])<L&&(L=G),(I=A[te+1])<C&&(C=I),G>P&&(P=G),I>D&&(D=I);H=(H=Math.max(P-L,D-C))!==0?1/H:0}return k(V,q,E,L,C,H),q}function t(A,w,E,L,C){var P,D;if(C===h(A,w,E,L)>0)for(P=w;P<E;P+=L)D=v(P,A[P],A[P+1],D);else for(P=E-L;P>=w;P-=L)D=v(P,A[P],A[P+1],D);return D&&p(D,D.next)&&(m(D),D=D.next),D}function S(A,w){if(!A)return A;w||(w=A);var E,L=A;do if(E=!1,L.steiner||!p(L,L.next)&&u(L.prev,L,L.next)!==0)L=L.next;else{if(m(L),(L=w=L.prev)===L.next)break;E=!0}while(E||L!==w);return w}function k(A,w,E,L,C,P,D){if(A){!D&&P&&function(N,F,V,q){var te=N;do te.z===null&&(te.z=r(te.x,te.y,F,V,q)),te.prevZ=te.prev,te.nextZ=te.next,te=te.next;while(te!==N);te.prevZ.nextZ=null,te.prevZ=null,function($){var W,Z,J,ee,re,ae,oe,ce,pe=1;do{for(Z=$,$=null,re=null,ae=0;Z;){for(ae++,J=Z,oe=0,W=0;W<pe&&(oe++,J=J.nextZ);W++);for(ce=pe;oe>0||ce>0&&J;)oe!==0&&(ce===0||!J||Z.z<=J.z)?(ee=Z,Z=Z.nextZ,oe--):(ee=J,J=J.nextZ,ce--),re?re.nextZ=ee:$=ee,ee.prevZ=re,re=ee;Z=J}re.nextZ=null,pe*=2}while(ae>1)}(te)}(A,L,C,P);for(var G,I,H=A;A.prev!==A.next;)if(G=A.prev,I=A.next,P?T(A,L,C,P):l(A))w.push(G.i/E),w.push(A.i/E),w.push(I.i/E),m(A),A=I.next,H=I.next;else if((A=I)===H){D?D===1?k(A=b(S(A),w,E),w,E,L,C,P,2):D===2&&d(A,w,E,L,C,P):k(S(A),w,E,L,C,P,1);break}}}function l(A){var w=A.prev,E=A,L=A.next;if(u(w,E,L)>=0)return!1;for(var C=A.next.next;C!==A.prev;){if(a(w.x,w.y,E.x,E.y,L.x,L.y,C.x,C.y)&&u(C.prev,C,C.next)>=0)return!1;C=C.next}return!0}function T(A,w,E,L){var C=A.prev,P=A,D=A.next;if(u(C,P,D)>=0)return!1;for(var G=C.x<P.x?C.x<D.x?C.x:D.x:P.x<D.x?P.x:D.x,I=C.y<P.y?C.y<D.y?C.y:D.y:P.y<D.y?P.y:D.y,H=C.x>P.x?C.x>D.x?C.x:D.x:P.x>D.x?P.x:D.x,N=C.y>P.y?C.y>D.y?C.y:D.y:P.y>D.y?P.y:D.y,F=r(G,I,w,E,L),V=r(H,N,w,E,L),q=A.prevZ,te=A.nextZ;q&&q.z>=F&&te&&te.z<=V;){if(q!==A.prev&&q!==A.next&&a(C.x,C.y,P.x,P.y,D.x,D.y,q.x,q.y)&&u(q.prev,q,q.next)>=0||(q=q.prevZ,te!==A.prev&&te!==A.next&&a(C.x,C.y,P.x,P.y,D.x,D.y,te.x,te.y)&&u(te.prev,te,te.next)>=0))return!1;te=te.nextZ}for(;q&&q.z>=F;){if(q!==A.prev&&q!==A.next&&a(C.x,C.y,P.x,P.y,D.x,D.y,q.x,q.y)&&u(q.prev,q,q.next)>=0)return!1;q=q.prevZ}for(;te&&te.z<=V;){if(te!==A.prev&&te!==A.next&&a(C.x,C.y,P.x,P.y,D.x,D.y,te.x,te.y)&&u(te.prev,te,te.next)>=0)return!1;te=te.nextZ}return!0}function b(A,w,E){var L=A;do{var C=L.prev,P=L.next.next;!p(C,P)&&c(C,L,L.next,P)&&f(C,P)&&f(P,C)&&(w.push(C.i/E),w.push(L.i/E),w.push(P.i/E),m(L),m(L.next),L=A=P),L=L.next}while(L!==A);return S(L)}function d(A,w,E,L,C,P){var D=A;do{for(var G=D.next.next;G!==D.prev;){if(D.i!==G.i&&o(D,G)){var I=y(D,G);return D=S(D,D.next),I=S(I,I.next),k(D,w,E,L,C,P),void k(I,w,E,L,C,P)}G=G.next}D=D.next}while(D!==A)}function s(A,w){return A.x-w.x}function e(A,w){if(w=function(L,C){var P,D=C,G=L.x,I=L.y,H=-1/0;do{if(I<=D.y&&I>=D.next.y&&D.next.y!==D.y){var N=D.x+(I-D.y)*(D.next.x-D.x)/(D.next.y-D.y);if(N<=G&&N>H){if(H=N,N===G){if(I===D.y)return D;if(I===D.next.y)return D.next}P=D.x<D.next.x?D:D.next}}D=D.next}while(D!==C);if(!P)return null;if(G===H)return P;var F,V=P,q=P.x,te=P.y,$=1/0;D=P;do G>=D.x&&D.x>=q&&G!==D.x&&a(I<te?G:H,I,q,te,I<te?H:G,I,D.x,D.y)&&(F=Math.abs(I-D.y)/(G-D.x),f(D,L)&&(F<$||F===$&&(D.x>P.x||D.x===P.x&&i(P,D)))&&(P=D,$=F)),D=D.next;while(D!==V);return P}(A,w),w){var E=y(w,A);S(w,w.next),S(E,E.next)}}function i(A,w){return u(A.prev,A,w.prev)<0&&u(w.next,A,A.next)<0}function r(A,w,E,L,C){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=32767*(A-E)*C)|A<<8))|A<<4))|A<<2))|A<<1))|(w=1431655765&((w=858993459&((w=252645135&((w=16711935&((w=32767*(w-L)*C)|w<<8))|w<<4))|w<<2))|w<<1))<<1}function n(A){var w=A,E=A;do(w.x<E.x||w.x===E.x&&w.y<E.y)&&(E=w),w=w.next;while(w!==A);return E}function a(A,w,E,L,C,P,D,G){return(C-D)*(w-G)-(A-D)*(P-G)>=0&&(A-D)*(L-G)-(E-D)*(w-G)>=0&&(E-D)*(P-G)-(C-D)*(L-G)>=0}function o(A,w){return A.next.i!==w.i&&A.prev.i!==w.i&&!function(E,L){var C=E;do{if(C.i!==E.i&&C.next.i!==E.i&&C.i!==L.i&&C.next.i!==L.i&&c(C,C.next,E,L))return!0;C=C.next}while(C!==E);return!1}(A,w)&&(f(A,w)&&f(w,A)&&function(E,L){var C=E,P=!1,D=(E.x+L.x)/2,G=(E.y+L.y)/2;do C.y>G!=C.next.y>G&&C.next.y!==C.y&&D<(C.next.x-C.x)*(G-C.y)/(C.next.y-C.y)+C.x&&(P=!P),C=C.next;while(C!==E);return P}(A,w)&&(u(A.prev,A,w.prev)||u(A,w.prev,w))||p(A,w)&&u(A.prev,A,A.next)>0&&u(w.prev,w,w.next)>0)}function u(A,w,E){return(w.y-A.y)*(E.x-w.x)-(w.x-A.x)*(E.y-w.y)}function p(A,w){return A.x===w.x&&A.y===w.y}function c(A,w,E,L){var C=g(u(A,w,E)),P=g(u(A,w,L)),D=g(u(E,L,A)),G=g(u(E,L,w));return C!==P&&D!==G||!(C!==0||!x(A,E,w))||!(P!==0||!x(A,L,w))||!(D!==0||!x(E,A,L))||!(G!==0||!x(E,w,L))}function x(A,w,E){return w.x<=Math.max(A.x,E.x)&&w.x>=Math.min(A.x,E.x)&&w.y<=Math.max(A.y,E.y)&&w.y>=Math.min(A.y,E.y)}function g(A){return A>0?1:A<0?-1:0}function f(A,w){return u(A.prev,A,A.next)<0?u(A,w,A.next)>=0&&u(A,A.prev,w)>=0:u(A,w,A.prev)<0||u(A,A.next,w)<0}function y(A,w){var E=new _(A.i,A.x,A.y),L=new _(w.i,w.x,w.y),C=A.next,P=w.prev;return A.next=w,w.prev=A,E.next=C,C.prev=E,L.next=E,E.prev=L,P.next=L,L.prev=P,L}function v(A,w,E,L){var C=new _(A,w,E);return L?(C.next=L.next,C.prev=L,L.next.prev=C,L.next=C):(C.prev=C,C.next=C),C}function m(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function _(A,w,E){this.i=A,this.x=w,this.y=E,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function h(A,w,E,L){for(var C=0,P=w,D=E-L;P<E;P+=L)C+=(A[D]-A[P])*(A[P+1]+A[D+1]),D=P;return C}Q.exports=z,Q.exports.default=z,z.deviation=function(A,w,E,L){var C=w&&w.length,P=C?w[0]*E:A.length,D=Math.abs(h(A,0,P,E));if(C)for(var G=0,I=w.length;G<I;G++){var H=w[G]*E,N=G<I-1?w[G+1]*E:A.length;D-=Math.abs(h(A,H,N,E))}var F=0;for(G=0;G<L.length;G+=3){var V=L[G]*E,q=L[G+1]*E,te=L[G+2]*E;F+=Math.abs((A[V]-A[te])*(A[q+1]-A[V+1])-(A[V]-A[q])*(A[te+1]-A[V+1]))}return D===0&&F===0?0:Math.abs((F-D)/D)},z.flatten=function(A){for(var w=A[0][0].length,E={vertices:[],holes:[],dimensions:w},L=0,C=0;C<A.length;C++){for(var P=0;P<A[C].length;P++)for(var D=0;D<w;D++)E.vertices.push(A[C][P][D]);C>0&&(L+=A[C-1].length,E.holes.push(L))}return E}},2502:function(Q,z,t){var S=t(68664);Q.exports=function(k,l){var T,b=[],d=[],s=[],e={},i=[];function r(f){s[f]=!1,e.hasOwnProperty(f)&&Object.keys(e[f]).forEach(function(y){delete e[f][y],s[y]&&r(y)})}function n(f){var y,v,m=!1;for(d.push(f),s[f]=!0,y=0;y<i[f].length;y++)(v=i[f][y])===T?(a(T,d),m=!0):s[v]||(m=n(v));if(m)r(f);else for(y=0;y<i[f].length;y++){v=i[f][y];var _=e[v];_||(_={},e[v]=_),_[v]=!0}return d.pop(),m}function a(f,y){var v=[].concat(y).concat(f);l?l(n):b.push(v)}function o(f){(function(E){for(var L=0;L<k.length;L++)L<E&&(k[L]=[]),k[L]=k[L].filter(function(C){return C>=E})})(f);for(var y,v=S(k).components.filter(function(E){return E.length>1}),m=1/0,_=0;_<v.length;_++)for(var h=0;h<v[_].length;h++)v[_][h]<m&&(m=v[_][h],y=_);var A=v[y];if(!A)return!1;var w=k.map(function(E,L){return A.indexOf(L)===-1?[]:E.filter(function(C){return A.indexOf(C)!==-1})});return{leastVertex:m,adjList:w}}T=0;for(var u=k.length;T<u;){var p=o(T);if(T=p.leastVertex,i=p.adjList){for(var c=0;c<i.length;c++)for(var x=0;x<i[c].length;x++){var g=i[c][x];s[+g]=!1,e[g]={}}n(T),T+=1}else T=u}return l?void 0:b}},16134:function(Q,z,t){var S=t(36672);Q.exports=function(){return S(this).length=0,this}},4892:function(Q,z,t){Q.exports=t(64404)()?Array.from:t(49441)},64404:function(Q){Q.exports=function(){var z,t,S=Array.from;return typeof S=="function"&&(t=S(z=["raz","dwa"]),!!(t&&t!==z&&t[1]==="dwa"))}},49441:function(Q,z,t){var S=t(8260).iterator,k=t(73051),l=t(33717),T=t(35976),b=t(78513),d=t(36672),s=t(95296),e=t(87963),i=Array.isArray,r=Function.prototype.call,n={configurable:!0,enumerable:!0,writable:!0,value:null},a=Object.defineProperty;Q.exports=function(o){var u,p,c,x,g,f,y,v,m,_,h=arguments[1],A=arguments[2];if(o=Object(d(o)),s(h)&&b(h),this&&this!==Array&&l(this))u=this;else{if(!h){if(k(o))return(g=o.length)!==1?Array.apply(null,o):((x=new Array(1))[0]=o[0],x);if(i(o)){for(x=new Array(g=o.length),p=0;p<g;++p)x[p]=o[p];return x}}x=[]}if(!i(o)){if((m=o[S])!==void 0){for(y=b(m).call(o),u&&(x=new u),v=y.next(),p=0;!v.done;)_=h?r.call(h,A,v.value,p):v.value,u?(n.value=_,a(x,p,n)):x[p]=_,v=y.next(),++p;g=p}else if(e(o)){for(g=o.length,u&&(x=new u),p=0,c=0;p<g;++p)_=o[p],p+1<g&&(f=_.charCodeAt(0))>=55296&&f<=56319&&(_+=o[++p]),_=h?r.call(h,A,_,c):_,u?(n.value=_,a(x,c,n)):x[c]=_,++c;g=c}}if(g===void 0)for(g=T(o.length),u&&(x=new u(g)),p=0;p<g;++p)_=h?r.call(h,A,o[p],p):o[p],u?(n.value=_,a(x,p,n)):x[p]=_;return u&&(n.value=null,x.length=g),x}},73051:function(Q){var z=Object.prototype.toString,t=z.call(function(){return arguments}());Q.exports=function(S){return z.call(S)===t}},33717:function(Q){var z=Object.prototype.toString,t=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);Q.exports=function(S){return typeof S=="function"&&t(z.call(S))}},52345:function(Q){Q.exports=function(){}},9953:function(Q,z,t){Q.exports=t(90436)()?Math.sign:t(6069)},90436:function(Q){Q.exports=function(){var z=Math.sign;return typeof z=="function"&&z(10)===1&&z(-20)===-1}},6069:function(Q){Q.exports=function(z){return z=Number(z),isNaN(z)||z===0?z:z>0?1:-1}},56247:function(Q,z,t){var S=t(9953),k=Math.abs,l=Math.floor;Q.exports=function(T){return isNaN(T)?0:(T=Number(T))!==0&&isFinite(T)?S(T)*l(k(T)):T}},35976:function(Q,z,t){var S=t(56247),k=Math.max;Q.exports=function(l){return k(0,S(l))}},67260:function(Q,z,t){var S=t(78513),k=t(36672),l=Function.prototype.bind,T=Function.prototype.call,b=Object.keys,d=Object.prototype.propertyIsEnumerable;Q.exports=function(s,e){return function(i,r){var n,a=arguments[2],o=arguments[3];return i=Object(k(i)),S(r),n=b(i),o&&n.sort(typeof o=="function"?l.call(o,i):void 0),typeof s!="function"&&(s=n[s]),T.call(s,n,function(u,p){return d.call(i,u)?T.call(r,a,i[u],u,i,p):e})}}},95879:function(Q,z,t){Q.exports=t(73583)()?Object.assign:t(34205)},73583:function(Q){Q.exports=function(){var z,t=Object.assign;return typeof t=="function"&&(t(z={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),z.foo+z.bar+z.trzy==="razdwatrzy")}},34205:function(Q,z,t){var S=t(68700),k=t(36672),l=Math.max;Q.exports=function(T,b){var d,s,e,i=l(arguments.length,2);for(T=Object(k(T)),e=function(r){try{T[r]=b[r]}catch(n){d||(d=n)}},s=1;s<i;++s)S(b=arguments[s]).forEach(e);if(d!==void 0)throw d;return T}},19012:function(Q,z,t){var S=t(4892),k=t(95879),l=t(36672);Q.exports=function(T){var b=Object(l(T)),d=arguments[1],s=Object(arguments[2]);if(b!==T&&!d)return b;var e={};return d?S(d,function(i){(s.ensure||i in T)&&(e[i]=T[i])}):k(e,T),e}},52818:function(Q,z,t){var S,k,l,T,b=Object.create;t(33247)()||(S=t(51882)),Q.exports=S?S.level!==1?b:(k={},l={},T={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(d){l[d]=d!=="__proto__"?T:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(k,l),Object.defineProperty(S,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:k}),function(d,s){return b(d===null?k:d,s)}):b},96437:function(Q,z,t){Q.exports=t(67260)("forEach")},99611:function(Q,z,t){var S=t(95296),k={function:!0,object:!0};Q.exports=function(l){return S(l)&&k[typeof l]||!1}},95296:function(Q,z,t){var S=t(52345)();Q.exports=function(k){return k!==S&&k!==null}},68700:function(Q,z,t){Q.exports=t(13895)()?Object.keys:t(25217)},13895:function(Q){Q.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},25217:function(Q,z,t){var S=t(95296),k=Object.keys;Q.exports=function(l){return k(S(l)?Object(l):l)}},16906:function(Q,z,t){var S=t(78513),k=t(96437),l=Function.prototype.call;Q.exports=function(T,b){var d={},s=arguments[2];return S(b),k(T,function(e,i,r,n){d[i]=l.call(b,s,e,i,r,n)}),d}},21780:function(Q,z,t){var S=t(95296),k=Array.prototype.forEach,l=Object.create;Q.exports=function(T){var b=l(null);return k.call(arguments,function(d){S(d)&&function(s,e){var i;for(i in s)e[i]=s[i]}(Object(d),b)}),b}},1496:function(Q,z,t){Q.exports=t(33247)()?Object.setPrototypeOf:t(51882)},33247:function(Q){var z=Object.create,t=Object.getPrototypeOf,S={};Q.exports=function(){var k=Object.setPrototypeOf;return typeof k=="function"&&t(k((arguments[0]||z)(null),S))===S}},51882:function(Q,z,t){var S,k,l,T,b=t(99611),d=t(36672),s=Object.prototype.isPrototypeOf,e=Object.defineProperty,i={configurable:!0,enumerable:!1,writable:!0,value:void 0};S=function(r,n){if(d(r),n===null||b(n))return r;throw new TypeError("Prototype must be null or an object")},Q.exports=(k=function(){var r,n=Object.create(null),a={},o=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(o){try{(r=o.set).call(n,a)}catch{}if(Object.getPrototypeOf(n)===a)return{set:r,level:2}}return n.__proto__=a,Object.getPrototypeOf(n)===a?{level:2}:((n={}).__proto__=a,Object.getPrototypeOf(n)===a&&{level:1})}(),k?(k.level===2?k.set?(T=k.set,l=function(r,n){return T.call(S(r,n),n),r}):l=function(r,n){return S(r,n).__proto__=n,r}:l=function r(n,a){var o;return S(n,a),(o=s.call(r.nullPolyfill,n))&&delete r.nullPolyfill.__proto__,a===null&&(a=r.nullPolyfill),n.__proto__=a,o&&e(r.nullPolyfill,"__proto__",i),n},Object.defineProperty(l,"level",{configurable:!1,enumerable:!1,writable:!1,value:k.level})):null),t(52818)},78513:function(Q){Q.exports=function(z){if(typeof z!="function")throw new TypeError(z+" is not a function");return z}},98976:function(Q,z,t){var S=t(99611);Q.exports=function(k){if(!S(k))throw new TypeError(k+" is not an Object");return k}},36672:function(Q,z,t){var S=t(95296);Q.exports=function(k){if(!S(k))throw new TypeError("Cannot use null or undefined");return k}},66741:function(Q,z,t){Q.exports=t(17557)()?String.prototype.contains:t(60381)},17557:function(Q){var z="razdwatrzy";Q.exports=function(){return typeof z.contains=="function"&&z.contains("dwa")===!0&&z.contains("foo")===!1}},60381:function(Q){var z=String.prototype.indexOf;Q.exports=function(t){return z.call(this,t,arguments[1])>-1}},87963:function(Q){var z=Object.prototype.toString,t=z.call("");Q.exports=function(S){return typeof S=="string"||S&&typeof S=="object"&&(S instanceof String||z.call(S)===t)||!1}},43043:function(Q){var z=Object.create(null),t=Math.random;Q.exports=function(){var S;do S=t().toString(36).slice(2);while(z[S]);return S}},32411:function(Q,z,t){var S,k=t(1496),l=t(66741),T=t(62072),b=t(8260),d=t(95426),s=Object.defineProperty;S=Q.exports=function(e,i){if(!(this instanceof S))throw new TypeError("Constructor requires 'new'");d.call(this,e),i=i?l.call(i,"key+value")?"key+value":l.call(i,"key")?"key":"value":"value",s(this,"__kind__",T("",i))},k&&k(S,d),delete S.prototype.constructor,S.prototype=Object.create(d.prototype,{_resolve:T(function(e){return this.__kind__==="value"?this.__list__[e]:this.__kind__==="key+value"?[e,this.__list__[e]]:e})}),s(S.prototype,b.toStringTag,T("c","Array Iterator"))},27515:function(Q,z,t){var S=t(73051),k=t(78513),l=t(87963),T=t(66661),b=Array.isArray,d=Function.prototype.call,s=Array.prototype.some;Q.exports=function(e,i){var r,n,a,o,u,p,c,x,g=arguments[2];if(b(e)||S(e)?r="array":l(e)?r="string":e=T(e),k(i),a=function(){o=!0},r!=="array")if(r!=="string")for(n=e.next();!n.done;){if(d.call(i,g,n.value,a),o)return;n=e.next()}else for(p=e.length,u=0;u<p&&(c=e[u],u+1<p&&(x=c.charCodeAt(0))>=55296&&x<=56319&&(c+=e[++u]),d.call(i,g,c,a),!o);++u);else s.call(e,function(f){return d.call(i,g,f,a),o})}},66661:function(Q,z,t){var S=t(73051),k=t(87963),l=t(32411),T=t(259),b=t(58095),d=t(8260).iterator;Q.exports=function(s){return typeof b(s)[d]=="function"?s[d]():S(s)?new l(s):k(s)?new T(s):new l(s)}},95426:function(Q,z,t){var S,k=t(16134),l=t(95879),T=t(78513),b=t(36672),d=t(62072),s=t(55174),e=t(8260),i=Object.defineProperty,r=Object.defineProperties;Q.exports=S=function(n,a){if(!(this instanceof S))throw new TypeError("Constructor requires 'new'");r(this,{__list__:d("w",b(n)),__context__:d("w",a),__nextIndex__:d("w",0)}),a&&(T(a.on),a.on("_add",this._onAdd),a.on("_delete",this._onDelete),a.on("_clear",this._onClear))},delete S.prototype.constructor,r(S.prototype,l({_next:d(function(){var n;if(this.__list__)return this.__redo__&&(n=this.__redo__.shift())!==void 0?n:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:d(function(){return this._createResult(this._next())}),_createResult:d(function(n){return n===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(n)}}),_resolve:d(function(n){return this.__list__[n]}),_unBind:d(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:d(function(){return"[object "+(this[e.toStringTag]||"Object")+"]"})},s({_onAdd:d(function(n){n>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(a,o){a>=n&&(this.__redo__[o]=++a)},this),this.__redo__.push(n)):i(this,"__redo__",d("c",[n])))}),_onDelete:d(function(n){var a;n>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&((a=this.__redo__.indexOf(n))!==-1&&this.__redo__.splice(a,1),this.__redo__.forEach(function(o,u){o>n&&(this.__redo__[u]=--o)},this)))}),_onClear:d(function(){this.__redo__&&k.call(this.__redo__),this.__nextIndex__=0})}))),i(S.prototype,e.iterator,d(function(){return this}))},35940:function(Q,z,t){var S=t(73051),k=t(95296),l=t(87963),T=t(8260).iterator,b=Array.isArray;Q.exports=function(d){return!(!k(d)||!b(d)&&!l(d)&&!S(d)&&typeof d[T]!="function")}},259:function(Q,z,t){var S,k=t(1496),l=t(62072),T=t(8260),b=t(95426),d=Object.defineProperty;S=Q.exports=function(s){if(!(this instanceof S))throw new TypeError("Constructor requires 'new'");s=String(s),b.call(this,s),d(this,"__length__",l("",s.length))},k&&k(S,b),delete S.prototype.constructor,S.prototype=Object.create(b.prototype,{_next:l(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:l(function(s){var e,i=this.__list__[s];return this.__nextIndex__===this.__length__?i:(e=i.charCodeAt(0))>=55296&&e<=56319?i+this.__list__[this.__nextIndex__++]:i})}),d(S.prototype,T.toStringTag,l("c","String Iterator"))},58095:function(Q,z,t){var S=t(35940);Q.exports=function(k){if(!S(k))throw new TypeError(k+" is not iterable");return k}},73523:function(Q){function z(t,S){if(t==null)throw new TypeError("Cannot convert first argument to object");for(var k=Object(t),l=1;l<arguments.length;l++){var T=arguments[l];if(T!=null)for(var b=Object.keys(Object(T)),d=0,s=b.length;d<s;d++){var e=b[d],i=Object.getOwnPropertyDescriptor(T,e);i!==void 0&&i.enumerable&&(k[e]=T[e])}}return k}Q.exports={assign:z,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:z})}}},8260:function(Q,z,t){Q.exports=t(69711)()?t(94908).Symbol:t(18415)},69711:function(Q,z,t){var S=t(94908),k={object:!0,symbol:!0};Q.exports=function(){var l,T=S.Symbol;if(typeof T!="function")return!1;l=T("test symbol");try{String(l)}catch{return!1}return!!k[typeof T.iterator]&&!!k[typeof T.toPrimitive]&&!!k[typeof T.toStringTag]}},82276:function(Q){Q.exports=function(z){return!!z&&(typeof z=="symbol"||!!z.constructor&&z.constructor.name==="Symbol"&&z[z.constructor.toStringTag]==="Symbol")}},29366:function(Q,z,t){var S=t(62072),k=Object.create,l=Object.defineProperty,T=Object.prototype,b=k(null);Q.exports=function(d){for(var s,e,i=0;b[d+(i||"")];)++i;return b[d+=i||""]=!0,l(T,s="@@"+d,S.gs(null,function(r){e||(e=!0,l(this,s,S(r)),e=!1)})),s}},92842:function(Q,z,t){var S=t(62072),k=t(94908).Symbol;Q.exports=function(l){return Object.defineProperties(l,{hasInstance:S("",k&&k.hasInstance||l("hasInstance")),isConcatSpreadable:S("",k&&k.isConcatSpreadable||l("isConcatSpreadable")),iterator:S("",k&&k.iterator||l("iterator")),match:S("",k&&k.match||l("match")),replace:S("",k&&k.replace||l("replace")),search:S("",k&&k.search||l("search")),species:S("",k&&k.species||l("species")),split:S("",k&&k.split||l("split")),toPrimitive:S("",k&&k.toPrimitive||l("toPrimitive")),toStringTag:S("",k&&k.toStringTag||l("toStringTag")),unscopables:S("",k&&k.unscopables||l("unscopables"))})}},13304:function(Q,z,t){var S=t(62072),k=t(53308),l=Object.create(null);Q.exports=function(T){return Object.defineProperties(T,{for:S(function(b){return l[b]?l[b]:l[b]=T(String(b))}),keyFor:S(function(b){var d;for(d in k(b),l)if(l[d]===b)return d})})}},18415:function(Q,z,t){var S,k,l,T=t(62072),b=t(53308),d=t(94908).Symbol,s=t(29366),e=t(92842),i=t(13304),r=Object.create,n=Object.defineProperties,a=Object.defineProperty;if(typeof d=="function")try{String(d()),l=!0}catch{}else d=null;k=function(o){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return S(o)},Q.exports=S=function o(u){var p;if(this instanceof o)throw new TypeError("Symbol is not a constructor");return l?d(u):(p=r(k.prototype),u=u===void 0?"":String(u),n(p,{__description__:T("",u),__name__:T("",s(u))}))},e(S),i(S),n(k.prototype,{constructor:T(S),toString:T("",function(){return this.__name__})}),n(S.prototype,{toString:T(function(){return"Symbol ("+b(this).__description__+")"}),valueOf:T(function(){return b(this)})}),a(S.prototype,S.toPrimitive,T("",function(){var o=b(this);return typeof o=="symbol"?o:o.toString()})),a(S.prototype,S.toStringTag,T("c","Symbol")),a(k.prototype,S.toStringTag,T("c",S.prototype[S.toStringTag])),a(k.prototype,S.toPrimitive,T("c",S.prototype[S.toPrimitive]))},53308:function(Q,z,t){var S=t(82276);Q.exports=function(k){if(!S(k))throw new TypeError(k+" is not a symbol");return k}},83522:function(Q,z,t){Q.exports=t(96402)()?WeakMap:t(329)},96402:function(Q){Q.exports=function(){var z,t;if(typeof WeakMap!="function")return!1;try{z=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return String(z)==="[object WeakMap]"&&typeof z.set=="function"&&z.set({},1)===z&&typeof z.delete=="function"&&typeof z.has=="function"&&z.get(t)==="one"}},96416:function(Q){Q.exports=typeof WeakMap=="function"&&Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"},329:function(Q,z,t){var S,k=t(95296),l=t(1496),T=t(98976),b=t(36672),d=t(43043),s=t(62072),e=t(66661),i=t(27515),r=t(8260).toStringTag,n=t(96416),a=Array.isArray,o=Object.defineProperty,u=Object.prototype.hasOwnProperty,p=Object.getPrototypeOf;Q.exports=S=function(){var c,x=arguments[0];if(!(this instanceof S))throw new TypeError("Constructor requires 'new'");return c=n&&l&&WeakMap!==S?l(new WeakMap,p(this)):this,k(x)&&(a(x)||(x=e(x))),o(c,"__weakMapData__",s("c","$weakMap$"+d())),x&&i(x,function(g){b(g),c.set(g[0],g[1])}),c},n&&(l&&l(S,WeakMap),S.prototype=Object.create(WeakMap.prototype,{constructor:s(S)})),Object.defineProperties(S.prototype,{delete:s(function(c){return!!u.call(T(c),this.__weakMapData__)&&(delete c[this.__weakMapData__],!0)}),get:s(function(c){if(u.call(T(c),this.__weakMapData__))return c[this.__weakMapData__]}),has:s(function(c){return u.call(T(c),this.__weakMapData__)}),set:s(function(c,x){return o(T(c),this.__weakMapData__,s("c",x)),this}),toString:s(function(){return"[object WeakMap]"})}),o(S.prototype,r,s("c","WeakMap"))},15398:function(Q){var z,t=typeof Reflect=="object"?Reflect:null,S=t&&typeof t.apply=="function"?t.apply:function(u,p,c){return Function.prototype.apply.call(u,p,c)};z=t&&typeof t.ownKeys=="function"?t.ownKeys:Object.getOwnPropertySymbols?function(u){return Object.getOwnPropertyNames(u).concat(Object.getOwnPropertySymbols(u))}:function(u){return Object.getOwnPropertyNames(u)};var k=Number.isNaN||function(u){return u!=u};function l(){l.init.call(this)}Q.exports=l,Q.exports.once=function(u,p){return new Promise(function(c,x){function g(y){u.removeListener(p,f),x(y)}function f(){typeof u.removeListener=="function"&&u.removeListener("error",g),c([].slice.call(arguments))}o(u,p,f,{once:!0}),p!=="error"&&function(y,v,m){typeof y.on=="function"&&o(y,"error",v,{once:!0})}(u,g)})},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var T=10;function b(u){if(typeof u!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof u)}function d(u){return u._maxListeners===void 0?l.defaultMaxListeners:u._maxListeners}function s(u,p,c,x){var g,f,y,v;if(b(c),(f=u._events)===void 0?(f=u._events=Object.create(null),u._eventsCount=0):(f.newListener!==void 0&&(u.emit("newListener",p,c.listener?c.listener:c),f=u._events),y=f[p]),y===void 0)y=f[p]=c,++u._eventsCount;else if(typeof y=="function"?y=f[p]=x?[c,y]:[y,c]:x?y.unshift(c):y.push(c),(g=d(u))>0&&y.length>g&&!y.warned){y.warned=!0;var m=new Error("Possible EventEmitter memory leak detected. "+y.length+" "+String(p)+" listeners added. Use emitter.setMaxListeners() to increase limit");m.name="MaxListenersExceededWarning",m.emitter=u,m.type=p,m.count=y.length,v=m,console&&console.warn&&console.warn(v)}return u}function e(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function i(u,p,c){var x={fired:!1,wrapFn:void 0,target:u,type:p,listener:c},g=e.bind(x);return g.listener=c,x.wrapFn=g,g}function r(u,p,c){var x=u._events;if(x===void 0)return[];var g=x[p];return g===void 0?[]:typeof g=="function"?c?[g.listener||g]:[g]:c?function(f){for(var y=new Array(f.length),v=0;v<y.length;++v)y[v]=f[v].listener||f[v];return y}(g):a(g,g.length)}function n(u){var p=this._events;if(p!==void 0){var c=p[u];if(typeof c=="function")return 1;if(c!==void 0)return c.length}return 0}function a(u,p){for(var c=new Array(p),x=0;x<p;++x)c[x]=u[x];return c}function o(u,p,c,x){if(typeof u.on=="function")x.once?u.once(p,c):u.on(p,c);else{if(typeof u.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof u);u.addEventListener(p,function g(f){x.once&&u.removeEventListener(p,g),c(f)})}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(u){if(typeof u!="number"||u<0||k(u))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+u+".");T=u}}),l.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(u){if(typeof u!="number"||u<0||k(u))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+u+".");return this._maxListeners=u,this},l.prototype.getMaxListeners=function(){return d(this)},l.prototype.emit=function(u){for(var p=[],c=1;c<arguments.length;c++)p.push(arguments[c]);var x=u==="error",g=this._events;if(g!==void 0)x=x&&g.error===void 0;else if(!x)return!1;if(x){var f;if(p.length>0&&(f=p[0]),f instanceof Error)throw f;var y=new Error("Unhandled error."+(f?" ("+f.message+")":""));throw y.context=f,y}var v=g[u];if(v===void 0)return!1;if(typeof v=="function")S(v,this,p);else{var m=v.length,_=a(v,m);for(c=0;c<m;++c)S(_[c],this,p)}return!0},l.prototype.addListener=function(u,p){return s(this,u,p,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(u,p){return s(this,u,p,!0)},l.prototype.once=function(u,p){return b(p),this.on(u,i(this,u,p)),this},l.prototype.prependOnceListener=function(u,p){return b(p),this.prependListener(u,i(this,u,p)),this},l.prototype.removeListener=function(u,p){var c,x,g,f,y;if(b(p),(x=this._events)===void 0)return this;if((c=x[u])===void 0)return this;if(c===p||c.listener===p)--this._eventsCount==0?this._events=Object.create(null):(delete x[u],x.removeListener&&this.emit("removeListener",u,c.listener||p));else if(typeof c!="function"){for(g=-1,f=c.length-1;f>=0;f--)if(c[f]===p||c[f].listener===p){y=c[f].listener,g=f;break}if(g<0)return this;g===0?c.shift():function(v,m){for(;m+1<v.length;m++)v[m]=v[m+1];v.pop()}(c,g),c.length===1&&(x[u]=c[0]),x.removeListener!==void 0&&this.emit("removeListener",u,y||p)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(u){var p,c,x;if((c=this._events)===void 0)return this;if(c.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):c[u]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete c[u]),this;if(arguments.length===0){var g,f=Object.keys(c);for(x=0;x<f.length;++x)(g=f[x])!=="removeListener"&&this.removeAllListeners(g);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(p=c[u])=="function")this.removeListener(u,p);else if(p!==void 0)for(x=p.length-1;x>=0;x--)this.removeListener(u,p[x]);return this},l.prototype.listeners=function(u){return r(this,u,!0)},l.prototype.rawListeners=function(u){return r(this,u,!1)},l.listenerCount=function(u,p){return typeof u.listenerCount=="function"?u.listenerCount(p):n.call(u,p)},l.prototype.listenerCount=n,l.prototype.eventNames=function(){return this._eventsCount>0?z(this._events):[]}},60774:function(Q){var z=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};Q.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return z()}try{return __global__||z()}finally{delete Object.prototype.__global__}}()},94908:function(Q,z,t){Q.exports=t(51152)()?globalThis:t(60774)},51152:function(Q){Q.exports=function(){return typeof globalThis=="object"&&!!globalThis&&globalThis.Array===Array}},92770:function(Q,z,t){var S=t(18546);Q.exports=function(k){var l=typeof k;if(l==="string"){var T=k;if((k=+k)==0&&S(T))return!1}else if(l!=="number")return!1;return k-k<1}},30120:function(Q,z,t){var S=t(90660);Q.exports=function(k,l,T){if(!k)throw new TypeError("must specify data as first parameter");if(T=0|+(T||0),Array.isArray(k)&&k[0]&&typeof k[0][0]=="number"){var b,d,s,e,i=k[0].length,r=k.length*i;l&&typeof l!="string"||(l=new(S(l||"float32"))(r+T));var n=l.length-T;if(r!==n)throw new Error("source length "+r+" ("+i+"x"+k.length+") does not match destination length "+n);for(b=0,s=T;b<k.length;b++)for(d=0;d<i;d++)l[s++]=k[b][d]===null?NaN:k[b][d]}else if(l&&typeof l!="string")l.set(k,T);else{var a=S(l||"float32");if(Array.isArray(k)||l==="array")for(b=0,s=T,e=(l=new a(k.length+T)).length;s<e;s++,b++)l[s]=k[b]===null?NaN:k[b];else T===0?l=new a(k):(l=new a(k.length+T)).set(k,T)}return l}},68016:function(Q,z,t){var S=t(53313),k=[32,126];Q.exports=function(l){var T=(l=l||{}).shape?l.shape:l.canvas?[l.canvas.width,l.canvas.height]:[512,512],b=l.canvas||document.createElement("canvas"),d=l.font,s=typeof l.step=="number"?[l.step,l.step]:l.step||[32,32],e=l.chars||k;if(d&&typeof d!="string"&&(d=S(d)),Array.isArray(e)){if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"){for(var i=[],r=e[0],n=0;r<=e[1];r++)i[n++]=String.fromCharCode(r);e=i}}else e=String(e).split("");T=T.slice(),b.width=T[0],b.height=T[1];var a=b.getContext("2d");a.fillStyle="#000",a.fillRect(0,0,b.width,b.height),a.font=d,a.textAlign="center",a.textBaseline="middle",a.fillStyle="#fff";var o=s[0]/2,u=s[1]/2;for(r=0;r<e.length;r++)a.fillText(e[r],o,u),(o+=s[0])>T[0]-s[0]/2&&(o=s[0]/2,u+=s[1]);return b}},32879:function(Q){function z(l,T){T||(T={}),(typeof l=="string"||Array.isArray(l))&&(T.family=l);var b=Array.isArray(T.family)?T.family.join(", "):T.family;if(!b)throw Error("`family` must be defined");var d=T.size||T.fontSize||T.em||48,s=T.weight||T.fontWeight||"",e=(l=[T.style||T.fontStyle||"",s,d].join(" ")+"px "+b,T.origin||"top");if(z.cache[b]&&d<=z.cache[b].em)return t(z.cache[b],e);var i=T.canvas||z.canvas,r=i.getContext("2d"),n={upper:T.upper!==void 0?T.upper:"H",lower:T.lower!==void 0?T.lower:"x",descent:T.descent!==void 0?T.descent:"p",ascent:T.ascent!==void 0?T.ascent:"h",tittle:T.tittle!==void 0?T.tittle:"i",overshoot:T.overshoot!==void 0?T.overshoot:"O"},a=Math.ceil(1.5*d);i.height=a,i.width=.5*a,r.font=l;var o="H",u={top:0};r.clearRect(0,0,a,a),r.textBaseline="top",r.fillStyle="black",r.fillText(o,0,0);var p=S(r.getImageData(0,0,a,a));r.clearRect(0,0,a,a),r.textBaseline="bottom",r.fillText(o,0,a);var c=S(r.getImageData(0,0,a,a));u.lineHeight=u.bottom=a-c+p,r.clearRect(0,0,a,a),r.textBaseline="alphabetic",r.fillText(o,0,a);var x=a-S(r.getImageData(0,0,a,a))-1+p;u.baseline=u.alphabetic=x,r.clearRect(0,0,a,a),r.textBaseline="middle",r.fillText(o,0,.5*a);var g=S(r.getImageData(0,0,a,a));u.median=u.middle=a-g-1+p-.5*a,r.clearRect(0,0,a,a),r.textBaseline="hanging",r.fillText(o,0,.5*a);var f=S(r.getImageData(0,0,a,a));u.hanging=a-f-1+p-.5*a,r.clearRect(0,0,a,a),r.textBaseline="ideographic",r.fillText(o,0,a);var y=S(r.getImageData(0,0,a,a));if(u.ideographic=a-y-1+p,n.upper&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.upper,0,0),u.upper=S(r.getImageData(0,0,a,a)),u.capHeight=u.baseline-u.upper),n.lower&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.lower,0,0),u.lower=S(r.getImageData(0,0,a,a)),u.xHeight=u.baseline-u.lower),n.tittle&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.tittle,0,0),u.tittle=S(r.getImageData(0,0,a,a))),n.ascent&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.ascent,0,0),u.ascent=S(r.getImageData(0,0,a,a))),n.descent&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.descent,0,0),u.descent=k(r.getImageData(0,0,a,a))),n.overshoot){r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.overshoot,0,0);var v=k(r.getImageData(0,0,a,a));u.overshoot=v-x}for(var m in u)u[m]/=d;return u.em=d,z.cache[b]=u,t(u,e)}function t(l,T){var b={};for(var d in typeof T=="string"&&(T=l[T]),l)d!=="em"&&(b[d]=l[d]-T);return b}function S(l){for(var T=l.height,b=l.data,d=3;d<b.length;d+=4)if(b[d]!==0)return Math.floor(.25*(d-3)/T)}function k(l){for(var T=l.height,b=l.data,d=b.length-1;d>0;d-=4)if(b[d]!==0)return Math.floor(.25*(d-3)/T)}Q.exports=z,z.canvas=document.createElement("canvas"),z.cache={}},31353:function(Q,z,t){var S=t(85395),k=Object.prototype.toString,l=Object.prototype.hasOwnProperty;Q.exports=function(T,b,d){if(!S(b))throw new TypeError("iterator must be a function");var s;arguments.length>=3&&(s=d),k.call(T)==="[object Array]"?function(e,i,r){for(var n=0,a=e.length;n<a;n++)l.call(e,n)&&(r==null?i(e[n],n,e):i.call(r,e[n],n,e))}(T,b,s):typeof T=="string"?function(e,i,r){for(var n=0,a=e.length;n<a;n++)r==null?i(e.charAt(n),n,e):i.call(r,e.charAt(n),n,e)}(T,b,s):function(e,i,r){for(var n in e)l.call(e,n)&&(r==null?i(e[n],n,e):i.call(r,e[n],n,e))}(T,b,s)}},73047:function(Q){var z=Array.prototype.slice,t=Object.prototype.toString;Q.exports=function(S){var k=this;if(typeof k!="function"||t.call(k)!=="[object Function]")throw new TypeError("Function.prototype.bind called on incompatible "+k);for(var l,T=z.call(arguments,1),b=Math.max(0,k.length-T.length),d=[],s=0;s<b;s++)d.push("$"+s);if(l=Function("binder","return function ("+d.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof l){var i=k.apply(this,T.concat(z.call(arguments)));return Object(i)===i?i:this}return k.apply(S,T.concat(z.call(arguments)))}),k.prototype){var e=function(){};e.prototype=k.prototype,l.prototype=new e,e.prototype=null}return l}},77575:function(Q,z,t){var S=t(73047);Q.exports=Function.prototype.bind||S},86249:function(Q){Q.exports=function(z,t){if(typeof z!="string")throw new TypeError("must specify type string");if(t=t||{},typeof document>"u"&&!t.canvas)return null;var S=t.canvas||document.createElement("canvas");typeof t.width=="number"&&(S.width=t.width),typeof t.height=="number"&&(S.height=t.height);var k,l=t;try{var T=[z];z.indexOf("webgl")===0&&T.push("experimental-"+z);for(var b=0;b<T.length;b++)if(k=S.getContext(T[b],l))return k}catch{k=null}return k||null}},68318:function(Q,z,t){var S,k=SyntaxError,l=Function,T=TypeError,b=function(E){try{return l('"use strict"; return ('+E+").constructor;")()}catch{}},d=Object.getOwnPropertyDescriptor;if(d)try{d({},"")}catch{d=null}var s=function(){throw new T},e=d?function(){try{return s}catch{try{return d(arguments,"callee").get}catch{return s}}}():s,i=t(57877)(),r=Object.getPrototypeOf||function(E){return E.__proto__},n={},a=typeof Uint8Array>"u"?S:r(Uint8Array),o={"%AggregateError%":typeof AggregateError>"u"?S:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?S:ArrayBuffer,"%ArrayIteratorPrototype%":i?r([][Symbol.iterator]()):S,"%AsyncFromSyncIteratorPrototype%":S,"%AsyncFunction%":n,"%AsyncGenerator%":n,"%AsyncGeneratorFunction%":n,"%AsyncIteratorPrototype%":n,"%Atomics%":typeof Atomics>"u"?S:Atomics,"%BigInt%":typeof BigInt>"u"?S:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?S:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?S:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?S:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?S:Float32Array,"%Float64Array%":typeof Float64Array>"u"?S:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?S:FinalizationRegistry,"%Function%":l,"%GeneratorFunction%":n,"%Int8Array%":typeof Int8Array>"u"?S:Int8Array,"%Int16Array%":typeof Int16Array>"u"?S:Int16Array,"%Int32Array%":typeof Int32Array>"u"?S:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":i?r(r([][Symbol.iterator]())):S,"%JSON%":typeof JSON=="object"?JSON:S,"%Map%":typeof Map>"u"?S:Map,"%MapIteratorPrototype%":typeof Map<"u"&&i?r(new Map()[Symbol.iterator]()):S,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?S:Promise,"%Proxy%":typeof Proxy>"u"?S:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?S:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?S:Set,"%SetIteratorPrototype%":typeof Set<"u"&&i?r(new Set()[Symbol.iterator]()):S,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?S:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":i?r(""[Symbol.iterator]()):S,"%Symbol%":i?Symbol:S,"%SyntaxError%":k,"%ThrowTypeError%":e,"%TypedArray%":a,"%TypeError%":T,"%Uint8Array%":typeof Uint8Array>"u"?S:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?S:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?S:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?S:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?S:WeakMap,"%WeakRef%":typeof WeakRef>"u"?S:WeakRef,"%WeakSet%":typeof WeakSet>"u"?S:WeakSet};try{null.error}catch(E){var u=r(r(E));o["%Error.prototype%"]=u}var p=function E(L){var C;if(L==="%AsyncFunction%")C=b("async function () {}");else if(L==="%GeneratorFunction%")C=b("function* () {}");else if(L==="%AsyncGeneratorFunction%")C=b("async function* () {}");else if(L==="%AsyncGenerator%"){var P=E("%AsyncGeneratorFunction%");P&&(C=P.prototype)}else if(L==="%AsyncIteratorPrototype%"){var D=E("%AsyncGenerator%");D&&(C=r(D.prototype))}return o[L]=C,C},c={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},x=t(77575),g=t(35065),f=x.call(Function.call,Array.prototype.concat),y=x.call(Function.apply,Array.prototype.splice),v=x.call(Function.call,String.prototype.replace),m=x.call(Function.call,String.prototype.slice),_=x.call(Function.call,RegExp.prototype.exec),h=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,A=/\\(\\)?/g,w=function(E,L){var C,P=E;if(g(c,P)&&(P="%"+(C=c[P])[0]+"%"),g(o,P)){var D=o[P];if(D===n&&(D=p(P)),D===void 0&&!L)throw new T("intrinsic "+E+" exists, but is not available. Please file an issue!");return{alias:C,name:P,value:D}}throw new k("intrinsic "+E+" does not exist!")};Q.exports=function(E,L){if(typeof E!="string"||E.length===0)throw new T("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof L!="boolean")throw new T('"allowMissing" argument must be a boolean');if(_(/^%?[^%]*%?$/,E)===null)throw new k("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var C=function(Z){var J=m(Z,0,1),ee=m(Z,-1);if(J==="%"&&ee!=="%")throw new k("invalid intrinsic syntax, expected closing `%`");if(ee==="%"&&J!=="%")throw new k("invalid intrinsic syntax, expected opening `%`");var re=[];return v(Z,h,function(ae,oe,ce,pe){re[re.length]=ce?v(pe,A,"$1"):oe||ae}),re}(E),P=C.length>0?C[0]:"",D=w("%"+P+"%",L),G=D.name,I=D.value,H=!1,N=D.alias;N&&(P=N[0],y(C,f([0,1],N)));for(var F=1,V=!0;F<C.length;F+=1){var q=C[F],te=m(q,0,1),$=m(q,-1);if((te==='"'||te==="'"||te==="`"||$==='"'||$==="'"||$==="`")&&te!==$)throw new k("property names with quotes must have matching quotes");if(q!=="constructor"&&V||(H=!0),g(o,G="%"+(P+="."+q)+"%"))I=o[G];else if(I!=null){if(!(q in I)){if(!L)throw new T("base intrinsic for "+E+" exists, but the property is not available.");return}if(d&&F+1>=C.length){var W=d(I,q);I=(V=!!W)&&"get"in W&&!("originalValue"in W.get)?W.get:I[q]}else V=g(I,q),I=I[q];V&&!H&&(o[G]=I)}}return I}},85400:function(Q){Q.exports=function(z,t){var S=t[0],k=t[1],l=t[2],T=t[3],b=t[4],d=t[5],s=t[6],e=t[7],i=t[8],r=t[9],n=t[10],a=t[11],o=t[12],u=t[13],p=t[14],c=t[15];return z[0]=d*(n*c-a*p)-r*(s*c-e*p)+u*(s*a-e*n),z[1]=-(k*(n*c-a*p)-r*(l*c-T*p)+u*(l*a-T*n)),z[2]=k*(s*c-e*p)-d*(l*c-T*p)+u*(l*e-T*s),z[3]=-(k*(s*a-e*n)-d*(l*a-T*n)+r*(l*e-T*s)),z[4]=-(b*(n*c-a*p)-i*(s*c-e*p)+o*(s*a-e*n)),z[5]=S*(n*c-a*p)-i*(l*c-T*p)+o*(l*a-T*n),z[6]=-(S*(s*c-e*p)-b*(l*c-T*p)+o*(l*e-T*s)),z[7]=S*(s*a-e*n)-b*(l*a-T*n)+i*(l*e-T*s),z[8]=b*(r*c-a*u)-i*(d*c-e*u)+o*(d*a-e*r),z[9]=-(S*(r*c-a*u)-i*(k*c-T*u)+o*(k*a-T*r)),z[10]=S*(d*c-e*u)-b*(k*c-T*u)+o*(k*e-T*d),z[11]=-(S*(d*a-e*r)-b*(k*a-T*r)+i*(k*e-T*d)),z[12]=-(b*(r*p-n*u)-i*(d*p-s*u)+o*(d*n-s*r)),z[13]=S*(r*p-n*u)-i*(k*p-l*u)+o*(k*n-l*r),z[14]=-(S*(d*p-s*u)-b*(k*p-l*u)+o*(k*s-l*d)),z[15]=S*(d*n-s*r)-b*(k*n-l*r)+i*(k*s-l*d),z}},42331:function(Q){Q.exports=function(z){var t=new Float32Array(16);return t[0]=z[0],t[1]=z[1],t[2]=z[2],t[3]=z[3],t[4]=z[4],t[5]=z[5],t[6]=z[6],t[7]=z[7],t[8]=z[8],t[9]=z[9],t[10]=z[10],t[11]=z[11],t[12]=z[12],t[13]=z[13],t[14]=z[14],t[15]=z[15],t}},31042:function(Q){Q.exports=function(z,t){return z[0]=t[0],z[1]=t[1],z[2]=t[2],z[3]=t[3],z[4]=t[4],z[5]=t[5],z[6]=t[6],z[7]=t[7],z[8]=t[8],z[9]=t[9],z[10]=t[10],z[11]=t[11],z[12]=t[12],z[13]=t[13],z[14]=t[14],z[15]=t[15],z}},11902:function(Q){Q.exports=function(){var z=new Float32Array(16);return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},89887:function(Q){Q.exports=function(z){var t=z[0],S=z[1],k=z[2],l=z[3],T=z[4],b=z[5],d=z[6],s=z[7],e=z[8],i=z[9],r=z[10],n=z[11],a=z[12],o=z[13],u=z[14],p=z[15];return(t*b-S*T)*(r*p-n*u)-(t*d-k*T)*(i*p-n*o)+(t*s-l*T)*(i*u-r*o)+(S*d-k*b)*(e*p-n*a)-(S*s-l*b)*(e*u-r*a)+(k*s-l*d)*(e*o-i*a)}},27812:function(Q){Q.exports=function(z,t){var S=t[0],k=t[1],l=t[2],T=t[3],b=S+S,d=k+k,s=l+l,e=S*b,i=k*b,r=k*d,n=l*b,a=l*d,o=l*s,u=T*b,p=T*d,c=T*s;return z[0]=1-r-o,z[1]=i+c,z[2]=n-p,z[3]=0,z[4]=i-c,z[5]=1-e-o,z[6]=a+u,z[7]=0,z[8]=n+p,z[9]=a-u,z[10]=1-e-r,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},34045:function(Q){Q.exports=function(z,t,S){var k,l,T,b=S[0],d=S[1],s=S[2],e=Math.sqrt(b*b+d*d+s*s);return Math.abs(e)<1e-6?null:(b*=e=1/e,d*=e,s*=e,k=Math.sin(t),T=1-(l=Math.cos(t)),z[0]=b*b*T+l,z[1]=d*b*T+s*k,z[2]=s*b*T-d*k,z[3]=0,z[4]=b*d*T-s*k,z[5]=d*d*T+l,z[6]=s*d*T+b*k,z[7]=0,z[8]=b*s*T+d*k,z[9]=d*s*T-b*k,z[10]=s*s*T+l,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z)}},45973:function(Q){Q.exports=function(z,t,S){var k=t[0],l=t[1],T=t[2],b=t[3],d=k+k,s=l+l,e=T+T,i=k*d,r=k*s,n=k*e,a=l*s,o=l*e,u=T*e,p=b*d,c=b*s,x=b*e;return z[0]=1-(a+u),z[1]=r+x,z[2]=n-c,z[3]=0,z[4]=r-x,z[5]=1-(i+u),z[6]=o+p,z[7]=0,z[8]=n+c,z[9]=o-p,z[10]=1-(i+a),z[11]=0,z[12]=S[0],z[13]=S[1],z[14]=S[2],z[15]=1,z}},81472:function(Q){Q.exports=function(z,t){return z[0]=t[0],z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=t[1],z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=t[2],z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},14669:function(Q){Q.exports=function(z,t){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=t[0],z[13]=t[1],z[14]=t[2],z[15]=1,z}},75262:function(Q){Q.exports=function(z,t){var S=Math.sin(t),k=Math.cos(t);return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=k,z[6]=S,z[7]=0,z[8]=0,z[9]=-S,z[10]=k,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},331:function(Q){Q.exports=function(z,t){var S=Math.sin(t),k=Math.cos(t);return z[0]=k,z[1]=0,z[2]=-S,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=S,z[9]=0,z[10]=k,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},11049:function(Q){Q.exports=function(z,t){var S=Math.sin(t),k=Math.cos(t);return z[0]=k,z[1]=S,z[2]=0,z[3]=0,z[4]=-S,z[5]=k,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},75195:function(Q){Q.exports=function(z,t,S,k,l,T,b){var d=1/(S-t),s=1/(l-k),e=1/(T-b);return z[0]=2*T*d,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=2*T*s,z[6]=0,z[7]=0,z[8]=(S+t)*d,z[9]=(l+k)*s,z[10]=(b+T)*e,z[11]=-1,z[12]=0,z[13]=0,z[14]=b*T*2*e,z[15]=0,z}},71551:function(Q){Q.exports=function(z){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},79576:function(Q,z,t){Q.exports={create:t(11902),clone:t(42331),copy:t(31042),identity:t(71551),transpose:t(88654),invert:t(95874),adjoint:t(85400),determinant:t(89887),multiply:t(91362),translate:t(31283),scale:t(10789),rotate:t(65074),rotateX:t(35545),rotateY:t(94918),rotateZ:t(15692),fromRotation:t(34045),fromRotationTranslation:t(45973),fromScaling:t(81472),fromTranslation:t(14669),fromXRotation:t(75262),fromYRotation:t(331),fromZRotation:t(11049),fromQuat:t(27812),frustum:t(75195),perspective:t(7864),perspectiveFromFieldOfView:t(35279),ortho:t(60378),lookAt:t(65551),str:t(6726)}},95874:function(Q){Q.exports=function(z,t){var S=t[0],k=t[1],l=t[2],T=t[3],b=t[4],d=t[5],s=t[6],e=t[7],i=t[8],r=t[9],n=t[10],a=t[11],o=t[12],u=t[13],p=t[14],c=t[15],x=S*d-k*b,g=S*s-l*b,f=S*e-T*b,y=k*s-l*d,v=k*e-T*d,m=l*e-T*s,_=i*u-r*o,h=i*p-n*o,A=i*c-a*o,w=r*p-n*u,E=r*c-a*u,L=n*c-a*p,C=x*L-g*E+f*w+y*A-v*h+m*_;return C?(C=1/C,z[0]=(d*L-s*E+e*w)*C,z[1]=(l*E-k*L-T*w)*C,z[2]=(u*m-p*v+c*y)*C,z[3]=(n*v-r*m-a*y)*C,z[4]=(s*A-b*L-e*h)*C,z[5]=(S*L-l*A+T*h)*C,z[6]=(p*f-o*m-c*g)*C,z[7]=(i*m-n*f+a*g)*C,z[8]=(b*E-d*A+e*_)*C,z[9]=(k*A-S*E-T*_)*C,z[10]=(o*v-u*f+c*x)*C,z[11]=(r*f-i*v-a*x)*C,z[12]=(d*h-b*w-s*_)*C,z[13]=(S*w-k*h+l*_)*C,z[14]=(u*g-o*y-p*x)*C,z[15]=(i*y-r*g+n*x)*C,z):null}},65551:function(Q,z,t){var S=t(71551);Q.exports=function(k,l,T,b){var d,s,e,i,r,n,a,o,u,p,c=l[0],x=l[1],g=l[2],f=b[0],y=b[1],v=b[2],m=T[0],_=T[1],h=T[2];return Math.abs(c-m)<1e-6&&Math.abs(x-_)<1e-6&&Math.abs(g-h)<1e-6?S(k):(a=c-m,o=x-_,u=g-h,d=y*(u*=p=1/Math.sqrt(a*a+o*o+u*u))-v*(o*=p),s=v*(a*=p)-f*u,e=f*o-y*a,(p=Math.sqrt(d*d+s*s+e*e))?(d*=p=1/p,s*=p,e*=p):(d=0,s=0,e=0),i=o*e-u*s,r=u*d-a*e,n=a*s-o*d,(p=Math.sqrt(i*i+r*r+n*n))?(i*=p=1/p,r*=p,n*=p):(i=0,r=0,n=0),k[0]=d,k[1]=i,k[2]=a,k[3]=0,k[4]=s,k[5]=r,k[6]=o,k[7]=0,k[8]=e,k[9]=n,k[10]=u,k[11]=0,k[12]=-(d*c+s*x+e*g),k[13]=-(i*c+r*x+n*g),k[14]=-(a*c+o*x+u*g),k[15]=1,k)}},91362:function(Q){Q.exports=function(z,t,S){var k=t[0],l=t[1],T=t[2],b=t[3],d=t[4],s=t[5],e=t[6],i=t[7],r=t[8],n=t[9],a=t[10],o=t[11],u=t[12],p=t[13],c=t[14],x=t[15],g=S[0],f=S[1],y=S[2],v=S[3];return z[0]=g*k+f*d+y*r+v*u,z[1]=g*l+f*s+y*n+v*p,z[2]=g*T+f*e+y*a+v*c,z[3]=g*b+f*i+y*o+v*x,g=S[4],f=S[5],y=S[6],v=S[7],z[4]=g*k+f*d+y*r+v*u,z[5]=g*l+f*s+y*n+v*p,z[6]=g*T+f*e+y*a+v*c,z[7]=g*b+f*i+y*o+v*x,g=S[8],f=S[9],y=S[10],v=S[11],z[8]=g*k+f*d+y*r+v*u,z[9]=g*l+f*s+y*n+v*p,z[10]=g*T+f*e+y*a+v*c,z[11]=g*b+f*i+y*o+v*x,g=S[12],f=S[13],y=S[14],v=S[15],z[12]=g*k+f*d+y*r+v*u,z[13]=g*l+f*s+y*n+v*p,z[14]=g*T+f*e+y*a+v*c,z[15]=g*b+f*i+y*o+v*x,z}},60378:function(Q){Q.exports=function(z,t,S,k,l,T,b){var d=1/(t-S),s=1/(k-l),e=1/(T-b);return z[0]=-2*d,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=-2*s,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=2*e,z[11]=0,z[12]=(t+S)*d,z[13]=(l+k)*s,z[14]=(b+T)*e,z[15]=1,z}},7864:function(Q){Q.exports=function(z,t,S,k,l){var T=1/Math.tan(t/2),b=1/(k-l);return z[0]=T/S,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=T,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=(l+k)*b,z[11]=-1,z[12]=0,z[13]=0,z[14]=2*l*k*b,z[15]=0,z}},35279:function(Q){Q.exports=function(z,t,S,k){var l=Math.tan(t.upDegrees*Math.PI/180),T=Math.tan(t.downDegrees*Math.PI/180),b=Math.tan(t.leftDegrees*Math.PI/180),d=Math.tan(t.rightDegrees*Math.PI/180),s=2/(b+d),e=2/(l+T);return z[0]=s,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=e,z[6]=0,z[7]=0,z[8]=-(b-d)*s*.5,z[9]=(l-T)*e*.5,z[10]=k/(S-k),z[11]=-1,z[12]=0,z[13]=0,z[14]=k*S/(S-k),z[15]=0,z}},65074:function(Q){Q.exports=function(z,t,S,k){var l,T,b,d,s,e,i,r,n,a,o,u,p,c,x,g,f,y,v,m,_,h,A,w,E=k[0],L=k[1],C=k[2],P=Math.sqrt(E*E+L*L+C*C);return Math.abs(P)<1e-6?null:(E*=P=1/P,L*=P,C*=P,l=Math.sin(S),b=1-(T=Math.cos(S)),d=t[0],s=t[1],e=t[2],i=t[3],r=t[4],n=t[5],a=t[6],o=t[7],u=t[8],p=t[9],c=t[10],x=t[11],g=E*E*b+T,f=L*E*b+C*l,y=C*E*b-L*l,v=E*L*b-C*l,m=L*L*b+T,_=C*L*b+E*l,h=E*C*b+L*l,A=L*C*b-E*l,w=C*C*b+T,z[0]=d*g+r*f+u*y,z[1]=s*g+n*f+p*y,z[2]=e*g+a*f+c*y,z[3]=i*g+o*f+x*y,z[4]=d*v+r*m+u*_,z[5]=s*v+n*m+p*_,z[6]=e*v+a*m+c*_,z[7]=i*v+o*m+x*_,z[8]=d*h+r*A+u*w,z[9]=s*h+n*A+p*w,z[10]=e*h+a*A+c*w,z[11]=i*h+o*A+x*w,t!==z&&(z[12]=t[12],z[13]=t[13],z[14]=t[14],z[15]=t[15]),z)}},35545:function(Q){Q.exports=function(z,t,S){var k=Math.sin(S),l=Math.cos(S),T=t[4],b=t[5],d=t[6],s=t[7],e=t[8],i=t[9],r=t[10],n=t[11];return t!==z&&(z[0]=t[0],z[1]=t[1],z[2]=t[2],z[3]=t[3],z[12]=t[12],z[13]=t[13],z[14]=t[14],z[15]=t[15]),z[4]=T*l+e*k,z[5]=b*l+i*k,z[6]=d*l+r*k,z[7]=s*l+n*k,z[8]=e*l-T*k,z[9]=i*l-b*k,z[10]=r*l-d*k,z[11]=n*l-s*k,z}},94918:function(Q){Q.exports=function(z,t,S){var k=Math.sin(S),l=Math.cos(S),T=t[0],b=t[1],d=t[2],s=t[3],e=t[8],i=t[9],r=t[10],n=t[11];return t!==z&&(z[4]=t[4],z[5]=t[5],z[6]=t[6],z[7]=t[7],z[12]=t[12],z[13]=t[13],z[14]=t[14],z[15]=t[15]),z[0]=T*l-e*k,z[1]=b*l-i*k,z[2]=d*l-r*k,z[3]=s*l-n*k,z[8]=T*k+e*l,z[9]=b*k+i*l,z[10]=d*k+r*l,z[11]=s*k+n*l,z}},15692:function(Q){Q.exports=function(z,t,S){var k=Math.sin(S),l=Math.cos(S),T=t[0],b=t[1],d=t[2],s=t[3],e=t[4],i=t[5],r=t[6],n=t[7];return t!==z&&(z[8]=t[8],z[9]=t[9],z[10]=t[10],z[11]=t[11],z[12]=t[12],z[13]=t[13],z[14]=t[14],z[15]=t[15]),z[0]=T*l+e*k,z[1]=b*l+i*k,z[2]=d*l+r*k,z[3]=s*l+n*k,z[4]=e*l-T*k,z[5]=i*l-b*k,z[6]=r*l-d*k,z[7]=n*l-s*k,z}},10789:function(Q){Q.exports=function(z,t,S){var k=S[0],l=S[1],T=S[2];return z[0]=t[0]*k,z[1]=t[1]*k,z[2]=t[2]*k,z[3]=t[3]*k,z[4]=t[4]*l,z[5]=t[5]*l,z[6]=t[6]*l,z[7]=t[7]*l,z[8]=t[8]*T,z[9]=t[9]*T,z[10]=t[10]*T,z[11]=t[11]*T,z[12]=t[12],z[13]=t[13],z[14]=t[14],z[15]=t[15],z}},6726:function(Q){Q.exports=function(z){return"mat4("+z[0]+", "+z[1]+", "+z[2]+", "+z[3]+", "+z[4]+", "+z[5]+", "+z[6]+", "+z[7]+", "+z[8]+", "+z[9]+", "+z[10]+", "+z[11]+", "+z[12]+", "+z[13]+", "+z[14]+", "+z[15]+")"}},31283:function(Q){Q.exports=function(z,t,S){var k,l,T,b,d,s,e,i,r,n,a,o,u=S[0],p=S[1],c=S[2];return t===z?(z[12]=t[0]*u+t[4]*p+t[8]*c+t[12],z[13]=t[1]*u+t[5]*p+t[9]*c+t[13],z[14]=t[2]*u+t[6]*p+t[10]*c+t[14],z[15]=t[3]*u+t[7]*p+t[11]*c+t[15]):(k=t[0],l=t[1],T=t[2],b=t[3],d=t[4],s=t[5],e=t[6],i=t[7],r=t[8],n=t[9],a=t[10],o=t[11],z[0]=k,z[1]=l,z[2]=T,z[3]=b,z[4]=d,z[5]=s,z[6]=e,z[7]=i,z[8]=r,z[9]=n,z[10]=a,z[11]=o,z[12]=k*u+d*p+r*c+t[12],z[13]=l*u+s*p+n*c+t[13],z[14]=T*u+e*p+a*c+t[14],z[15]=b*u+i*p+o*c+t[15]),z}},88654:function(Q){Q.exports=function(z,t){if(z===t){var S=t[1],k=t[2],l=t[3],T=t[6],b=t[7],d=t[11];z[1]=t[4],z[2]=t[8],z[3]=t[12],z[4]=S,z[6]=t[9],z[7]=t[13],z[8]=k,z[9]=T,z[11]=t[14],z[12]=l,z[13]=b,z[14]=d}else z[0]=t[0],z[1]=t[4],z[2]=t[8],z[3]=t[12],z[4]=t[1],z[5]=t[5],z[6]=t[9],z[7]=t[13],z[8]=t[2],z[9]=t[6],z[10]=t[10],z[11]=t[14],z[12]=t[3],z[13]=t[7],z[14]=t[11],z[15]=t[15];return z}},42505:function(Q,z,t){var S=t(72791),k=t(71299),l=t(98580),T=t(12018),b=t(83522),d=t(25075),s=t(68016),e=t(58404),i=t(18863),r=t(10973),n=t(25677),a=t(75686),o=t(53545),u=t(56131),p=t(32879),c=t(30120),x=t(13547).nextPow2,g=new b,f=!1;if(document.body){var y=document.body.appendChild(document.createElement("div"));y.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(y).fontStretch&&(f=!0),document.body.removeChild(y)}var v=function(m){(function(_){return typeof _=="function"&&_._gl&&_.prop&&_.texture&&_.buffer})(m)?(m={regl:m},this.gl=m.regl._gl):this.gl=T(m),this.shader=g.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=m.regl||l({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),g.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(r(m)?m:{})};v.prototype.createShader=function(){var m=this.regl,_=m({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:m.prop("count"),offset:m.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:m.this("sizeBuffer")},width:{offset:0,stride:8,buffer:m.this("sizeBuffer")},char:m.this("charBuffer"),position:m.this("position")},uniforms:{atlasSize:function(h,A){return[A.atlas.width,A.atlas.height]},atlasDim:function(h,A){return[A.atlas.cols,A.atlas.rows]},atlas:function(h,A){return A.atlas.texture},charStep:function(h,A){return A.atlas.step},em:function(h,A){return A.atlas.em},color:m.prop("color"),opacity:m.prop("opacity"),viewport:m.this("viewportArray"),scale:m.this("scale"),align:m.prop("align"),baseline:m.prop("baseline"),translate:m.this("translate"),positionOffset:m.prop("positionOffset")},primitive:"points",viewport:m.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`});return{regl:m,draw:_,atlas:{}}},v.prototype.update=function(m){var _=this;if(typeof m=="string")m={text:m};else if(!m)return;(m=k(m,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity!=null&&(Array.isArray(m.opacity)?this.opacity=m.opacity.map(function(ne){return parseFloat(ne)}):this.opacity=parseFloat(m.opacity)),m.viewport!=null&&(this.viewport=i(m.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),m.kerning!=null&&(this.kerning=m.kerning),m.offset!=null&&(typeof m.offset=="number"&&(m.offset=[m.offset,0]),this.positionOffset=c(m.offset)),m.direction&&(this.direction=m.direction),m.range&&(this.range=m.range,this.scale=[1/(m.range[2]-m.range[0]),1/(m.range[3]-m.range[1])],this.translate=[-m.range[0],-m.range[1]]),m.scale&&(this.scale=m.scale),m.translate&&(this.translate=m.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||m.font||(m.font=v.baseFontSize+"px sans-serif");var h,A=!1,w=!1;if(m.font&&(Array.isArray(m.font)?m.font:[m.font]).forEach(function(ne,me){if(typeof ne=="string")try{ne=S.parse(ne)}catch{ne=S.parse(v.baseFontSize+"px "+ne)}else ne=S.parse(S.stringify(ne));var Ee=S.stringify({size:v.baseFontSize,family:ne.family,stretch:f?ne.stretch:void 0,variant:ne.variant,weight:ne.weight,style:ne.style}),be=n(ne.size),De=Math.round(be[0]*a(be[1]));if(De!==_.fontSize[me]&&(w=!0,_.fontSize[me]=De),!(_.font[me]&&Ee==_.font[me].baseString||(A=!0,_.font[me]=v.fonts[Ee],_.font[me]))){var Ue=ne.family.join(", "),he=[ne.style];ne.style!=ne.variant&&he.push(ne.variant),ne.variant!=ne.weight&&he.push(ne.weight),f&&ne.weight!=ne.stretch&&he.push(ne.stretch),_.font[me]={baseString:Ee,family:Ue,weight:ne.weight,stretch:ne.stretch,style:ne.style,variant:ne.variant,width:{},kerning:{},metrics:p(Ue,{origin:"top",fontSize:v.baseFontSize,fontStyle:he.join(" ")})},v.fonts[Ee]=_.font[me]}}),(A||w)&&this.font.forEach(function(ne,me){var Ee=S.stringify({size:_.fontSize[me],family:ne.family,stretch:f?ne.stretch:void 0,variant:ne.variant,weight:ne.weight,style:ne.style});if(_.fontAtlas[me]=_.shader.atlas[Ee],!_.fontAtlas[me]){var be=ne.metrics;_.shader.atlas[Ee]=_.fontAtlas[me]={fontString:Ee,step:2*Math.ceil(_.fontSize[me]*be.bottom*.5),em:_.fontSize[me],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:_.regl.texture()}}m.text==null&&(m.text=_.text)}),typeof m.text=="string"&&m.position&&m.position.length>2){for(var E=Array(.5*m.position.length),L=0;L<E.length;L++)E[L]=m.text;m.text=E}if(m.text!=null||A){if(this.textOffsets=[0],Array.isArray(m.text)){this.count=m.text[0].length,this.counts=[this.count];for(var C=1;C<m.text.length;C++)this.textOffsets[C]=this.textOffsets[C-1]+m.text[C-1].length,this.count+=m.text[C].length,this.counts.push(m.text[C].length);this.text=m.text.join("")}else this.text=m.text,this.count=this.text.length,this.counts=[this.count];h=[],this.font.forEach(function(ne,me){v.atlasContext.font=ne.baseString;for(var Ee=_.fontAtlas[me],be=0;be<_.text.length;be++){var De=_.text.charAt(be);if(Ee.ids[De]==null&&(Ee.ids[De]=Ee.chars.length,Ee.chars.push(De),h.push(De)),ne.width[De]==null&&(ne.width[De]=v.atlasContext.measureText(De).width/v.baseFontSize,_.kerning)){var Ue=[];for(var he in ne.width)Ue.push(he+De,De+he);u(ne.kerning,o(ne.family,{pairs:Ue}))}}})}if(m.position)if(m.position.length>2){for(var P=!m.position[0].length,D=e.mallocFloat(2*this.count),G=0,I=0;G<this.counts.length;G++){var H=this.counts[G];if(P)for(var N=0;N<H;N++)D[I++]=m.position[2*G],D[I++]=m.position[2*G+1];else for(var F=0;F<H;F++)D[I++]=m.position[G][0],D[I++]=m.position[G][1]}this.position.call?this.position({type:"float",data:D}):this.position=this.regl.buffer({type:"float",data:D}),e.freeFloat(D)}else this.position.destroy&&this.position.destroy(),this.position={constant:m.position};if(m.text||A){var V=e.mallocUint8(this.count),q=e.mallocFloat(2*this.count);this.textWidth=[];for(var te=0,$=0;te<this.counts.length;te++){for(var W=this.counts[te],Z=this.font[te]||this.font[0],J=this.fontAtlas[te]||this.fontAtlas[0],ee=0;ee<W;ee++){var re=this.text.charAt($),ae=this.text.charAt($-1);if(V[$]=J.ids[re],q[2*$]=Z.width[re],ee){var oe=q[2*$-2],ce=q[2*$],pe=q[2*$-1]+.5*oe+.5*ce;if(this.kerning){var ve=Z.kerning[ae+re];ve&&(pe+=.001*ve)}q[2*$+1]=pe}else q[2*$+1]=.5*q[2*$];$++}this.textWidth.push(q.length?.5*q[2*$-2]+q[2*$-1]:0)}m.align||(m.align=this.align),this.charBuffer({data:V,type:"uint8",usage:"stream"}),this.sizeBuffer({data:q,type:"float",usage:"stream"}),e.freeUint8(V),e.freeFloat(q),h.length&&this.font.forEach(function(ne,me){var Ee=_.fontAtlas[me],be=Ee.step,De=Math.floor(v.maxAtlasSize/be),Ue=Math.min(De,Ee.chars.length),he=Math.ceil(Ee.chars.length/Ue),ke=x(Ue*be),_e=x(he*be);Ee.width=ke,Ee.height=_e,Ee.rows=he,Ee.cols=Ue,Ee.em&&Ee.texture({data:s({canvas:v.atlasCanvas,font:Ee.fontString,chars:Ee.chars,shape:[ke,_e],step:[be,be]})})})}if(m.align&&(this.align=m.align,this.alignOffset=this.textWidth.map(function(ne,me){var Ee=Array.isArray(_.align)?_.align.length>1?_.align[me]:_.align[0]:_.align;if(typeof Ee=="number")return Ee;switch(Ee){case"right":case"end":return-ne;case"center":case"centre":case"middle":return .5*-ne}return 0})),this.baseline==null&&m.baseline==null&&(m.baseline=0),m.baseline!=null&&(this.baseline=m.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(ne,me){var Ee=(_.font[me]||_.font[0]).metrics,be=0;return be+=.5*Ee.bottom,-1*(be+=typeof ne=="number"?ne-Ee.baseline:-Ee[ne])})),m.color!=null)if(m.color||(m.color="transparent"),typeof m.color!="string"&&isNaN(m.color)){var we;if(typeof m.color[0]=="number"&&m.color.length>this.counts.length){var xe=m.color.length;we=e.mallocUint8(xe);for(var ge=(m.color.subarray||m.color.slice).bind(m.color),Oe=0;Oe<xe;Oe+=4)we.set(d(ge(Oe,Oe+4),"uint8"),Oe)}else{var Ae=m.color.length;we=e.mallocUint8(4*Ae);for(var Te=0;Te<Ae;Te++)we.set(d(m.color[Te]||0,"uint8"),4*Te)}this.color=we}else this.color=d(m.color,"uint8");if(m.position||m.text||m.color||m.baseline||m.align||m.font||m.offset||m.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var se=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(se);for(var le=0;le<this.batch.length;le++)this.batch[le]={count:this.counts.length>1?this.counts[le]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[le]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*le,4*le+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[le]:this.opacity,baseline:this.baselineOffset[le]!=null?this.baselineOffset[le]:this.baselineOffset[0],align:this.align?this.alignOffset[le]!=null?this.alignOffset[le]:this.alignOffset[0]:0,atlas:this.fontAtlas[le]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*le,2*le+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]},v.prototype.destroy=function(){},v.prototype.kerning=!0,v.prototype.position={constant:new Float32Array(2)},v.prototype.translate=null,v.prototype.scale=null,v.prototype.font=null,v.prototype.text="",v.prototype.positionOffset=[0,0],v.prototype.opacity=1,v.prototype.color=new Uint8Array([0,0,0,255]),v.prototype.alignOffset=[0,0],v.maxAtlasSize=1024,v.atlasCanvas=document.createElement("canvas"),v.atlasContext=v.atlasCanvas.getContext("2d",{alpha:!1}),v.baseFontSize=64,v.fonts={},Q.exports=v},12018:function(Q,z,t){var S=t(71299);function k(b){if(b.container)if(b.container==document.body)document.body.style.width||(b.canvas.width=b.width||b.pixelRatio*t.g.innerWidth),document.body.style.height||(b.canvas.height=b.height||b.pixelRatio*t.g.innerHeight);else{var d=b.container.getBoundingClientRect();b.canvas.width=b.width||d.right-d.left,b.canvas.height=b.height||d.bottom-d.top}}function l(b){return typeof b.getContext=="function"&&"width"in b&&"height"in b}function T(){var b=document.createElement("canvas");return b.style.position="absolute",b.style.top=0,b.style.left=0,b}Q.exports=function(b){var d;if(b?typeof b=="string"&&(b={container:b}):b={},(b=l(b)||typeof(d=b).nodeName=="string"&&typeof d.appendChild=="function"&&typeof d.getBoundingClientRect=="function"?{container:b}:function(e){return typeof e.drawArrays=="function"||typeof e.drawElements=="function"}(b)?{gl:b}:S(b,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(b.pixelRatio=t.g.pixelRatio||1),b.gl)return b.gl;if(b.canvas&&(b.container=b.canvas.parentNode),b.container){if(typeof b.container=="string"){var s=document.querySelector(b.container);if(!s)throw Error("Element "+b.container+" is not found");b.container=s}l(b.container)?(b.canvas=b.container,b.container=b.canvas.parentNode):b.canvas||(b.canvas=T(),b.container.appendChild(b.canvas),k(b))}else if(!b.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");b.container=document.body||document.documentElement,b.canvas=T(),b.container.appendChild(b.canvas),k(b)}return b.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(e){try{b.gl=b.canvas.getContext(e,b.attrs)}catch{}return b.gl}),b.gl}},56068:function(Q){Q.exports=function(z){typeof z=="string"&&(z=[z]);for(var t=[].slice.call(arguments,1),S=[],k=0;k<z.length-1;k++)S.push(z[k],t[k]||"");return S.push(z[k]),S.join("")}},40383:function(Q,z,t){var S=t(68318)("%Object.getOwnPropertyDescriptor%",!0);if(S)try{S([],"length")}catch{S=null}Q.exports=S},57035:function(Q,z,t){var S,k=t(54404);S=typeof t.g.matchMedia=="function"?!t.g.matchMedia("(hover: none)").matches:k,Q.exports=S},38520:function(Q,z,t){var S=t(54404);Q.exports=S&&function(){var k=!1;try{var l=Object.defineProperty({},"passive",{get:function(){k=!0}});window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch{k=!1}return k}()},55622:function(Q,z,t){var S=t(68318)("%Object.defineProperty%",!0),k=function(){if(S)try{return S({},"a",{value:1}),!0}catch{return!1}return!1};k.hasArrayLengthDefineBug=function(){if(!k())return null;try{return S([],"length",{value:1}).length!==1}catch{return!0}},Q.exports=k},57877:function(Q,z,t){var S=typeof Symbol<"u"&&Symbol,k=t(35638);Q.exports=function(){return typeof S=="function"&&typeof Symbol=="function"&&typeof S("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&k()}},35638:function(Q){Q.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var z={},t=Symbol("test"),S=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(S)!=="[object Symbol]")return!1;for(t in z[t]=42,z)return!1;if(typeof Object.keys=="function"&&Object.keys(z).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(z).length!==0)return!1;var k=Object.getOwnPropertySymbols(z);if(k.length!==1||k[0]!==t||!Object.prototype.propertyIsEnumerable.call(z,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(z,t);if(l.value!==42||l.enumerable!==!0)return!1}return!0}},84543:function(Q,z,t){var S=t(35638);Q.exports=function(){return S()&&!!Symbol.toStringTag}},35065:function(Q,z,t){var S=t(77575);Q.exports=S.call(Function.call,Object.prototype.hasOwnProperty)},95280:function(Q,z){z.read=function(t,S,k,l,T){var b,d,s=8*T-l-1,e=(1<<s)-1,i=e>>1,r=-7,n=k?T-1:0,a=k?-1:1,o=t[S+n];for(n+=a,b=o&(1<<-r)-1,o>>=-r,r+=s;r>0;b=256*b+t[S+n],n+=a,r-=8);for(d=b&(1<<-r)-1,b>>=-r,r+=l;r>0;d=256*d+t[S+n],n+=a,r-=8);if(b===0)b=1-i;else{if(b===e)return d?NaN:1/0*(o?-1:1);d+=Math.pow(2,l),b-=i}return(o?-1:1)*d*Math.pow(2,b-l)},z.write=function(t,S,k,l,T,b){var d,s,e,i=8*b-T-1,r=(1<<i)-1,n=r>>1,a=T===23?Math.pow(2,-24)-Math.pow(2,-77):0,o=l?0:b-1,u=l?1:-1,p=S<0||S===0&&1/S<0?1:0;for(S=Math.abs(S),isNaN(S)||S===1/0?(s=isNaN(S)?1:0,d=r):(d=Math.floor(Math.log(S)/Math.LN2),S*(e=Math.pow(2,-d))<1&&(d--,e*=2),(S+=d+n>=1?a/e:a*Math.pow(2,1-n))*e>=2&&(d++,e/=2),d+n>=r?(s=0,d=r):d+n>=1?(s=(S*e-1)*Math.pow(2,T),d+=n):(s=S*Math.pow(2,n-1)*Math.pow(2,T),d=0));T>=8;t[k+o]=255&s,o+=u,s/=256,T-=8);for(d=d<<T|s,i+=T;i>0;t[k+o]=255&d,o+=u,d/=256,i-=8);t[k+o-u]|=128*p}},42018:function(Q){typeof Object.create=="function"?Q.exports=function(z,t){t&&(z.super_=t,z.prototype=Object.create(t.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}))}:Q.exports=function(z,t){if(t){z.super_=t;var S=function(){};S.prototype=t.prototype,z.prototype=new S,z.prototype.constructor=z}}},47216:function(Q,z,t){var S=t(84543)(),k=t(6614)("Object.prototype.toString"),l=function(d){return!(S&&d&&typeof d=="object"&&Symbol.toStringTag in d)&&k(d)==="[object Arguments]"},T=function(d){return!!l(d)||d!==null&&typeof d=="object"&&typeof d.length=="number"&&d.length>=0&&k(d)!=="[object Array]"&&k(d.callee)==="[object Function]"},b=function(){return l(arguments)}();l.isLegacyArguments=T,Q.exports=b?l:T},54404:function(Q){Q.exports=!0},85395:function(Q){var z,t,S=Function.prototype.toString,k=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply;if(typeof k=="function"&&typeof Object.defineProperty=="function")try{z=Object.defineProperty({},"length",{get:function(){throw t}}),t={},k(function(){throw 42},null,z)}catch(n){n!==t&&(k=null)}else k=null;var l=/^\s*class\b/,T=function(n){try{var a=S.call(n);return l.test(a)}catch{return!1}},b=function(n){try{return!T(n)&&(S.call(n),!0)}catch{return!1}},d=Object.prototype.toString,s=typeof Symbol=="function"&&!!Symbol.toStringTag,e=!(0 in[,]),i=function(){return!1};if(typeof document=="object"){var r=document.all;d.call(r)===d.call(document.all)&&(i=function(n){if((e||!n)&&(n===void 0||typeof n=="object"))try{var a=d.call(n);return(a==="[object HTMLAllCollection]"||a==="[object HTML document.all class]"||a==="[object HTMLCollection]"||a==="[object Object]")&&n("")==null}catch{}return!1})}Q.exports=k?function(n){if(i(n))return!0;if(!n||typeof n!="function"&&typeof n!="object")return!1;try{k(n,null,z)}catch(a){if(a!==t)return!1}return!T(n)&&b(n)}:function(n){if(i(n))return!0;if(!n||typeof n!="function"&&typeof n!="object")return!1;if(s)return b(n);if(T(n))return!1;var a=d.call(n);return!(a!=="[object Function]"&&a!=="[object GeneratorFunction]"&&!/^\[object HTML/.test(a))&&b(n)}},65481:function(Q,z,t){var S,k=Object.prototype.toString,l=Function.prototype.toString,T=/^\s*(?:function)?\*/,b=t(84543)(),d=Object.getPrototypeOf;Q.exports=function(s){if(typeof s!="function")return!1;if(T.test(l.call(s)))return!0;if(!b)return k.call(s)==="[object GeneratorFunction]";if(!d)return!1;if(S===void 0){var e=function(){if(!b)return!1;try{return Function("return function*() {}")()}catch{}}();S=!!e&&d(e)}return d(s)===S}},62683:function(Q){Q.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},64274:function(Q){Q.exports=function(z){return z!=z}},15567:function(Q,z,t){var S=t(68222),k=t(17045),l=t(64274),T=t(14922),b=t(22442),d=S(T(),Number);k(d,{getPolyfill:T,implementation:l,shim:b}),Q.exports=d},14922:function(Q,z,t){var S=t(64274);Q.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:S}},22442:function(Q,z,t){var S=t(17045),k=t(14922);Q.exports=function(){var l=k();return S(Number,{isNaN:l},{isNaN:function(){return Number.isNaN!==l}}),l}},64941:function(Q){Q.exports=function(z){var t=typeof z;return z!==null&&(t==="object"||t==="function")}},10973:function(Q){var z=Object.prototype.toString;Q.exports=function(t){var S;return z.call(t)==="[object Object]"&&((S=Object.getPrototypeOf(t))===null||S===Object.getPrototypeOf({}))}},18546:function(Q){Q.exports=function(z){for(var t,S=z.length,k=0;k<S;k++)if(((t=z.charCodeAt(k))<9||t>13)&&t!==32&&t!==133&&t!==160&&t!==5760&&t!==6158&&(t<8192||t>8205)&&t!==8232&&t!==8233&&t!==8239&&t!==8287&&t!==8288&&t!==12288&&t!==65279)return!1;return!0}},89546:function(Q){Q.exports=function(z){return typeof z=="string"&&(z=z.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(z)&&/[\dz]$/i.test(z)&&z.length>4))}},9187:function(Q,z,t){var S=t(31353),k=t(72077),l=t(6614),T=l("Object.prototype.toString"),b=t(84543)(),d=t(40383),s=typeof globalThis>"u"?t.g:globalThis,e=k(),i=l("Array.prototype.indexOf",!0)||function(o,u){for(var p=0;p<o.length;p+=1)if(o[p]===u)return p;return-1},r=l("String.prototype.slice"),n={},a=Object.getPrototypeOf;b&&d&&a&&S(e,function(o){var u=new s[o];if(Symbol.toStringTag in u){var p=a(u),c=d(p,Symbol.toStringTag);if(!c){var x=a(p);c=d(x,Symbol.toStringTag)}n[o]=c.get}}),Q.exports=function(o){if(!o||typeof o!="object")return!1;if(!b||!(Symbol.toStringTag in o)){var u=r(T(o),8,-1);return i(e,u)>-1}return!!d&&function(p){var c=!1;return S(n,function(x,g){if(!c)try{c=x.call(p)===g}catch{}}),c}(o)}},44517:function(Q){Q.exports=function(){var z,t,S;function k(l,T){if(z)if(t){var b="var sharedChunk = {}; ("+z+")(sharedChunk); ("+t+")(sharedChunk);",d={};z(d),(S=T(d)).workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"}))}else t=T;else z=T}return k(0,function(l){function T(M,O){return M(O={exports:{}},O.exports),O.exports}var b="1.10.1",d=s;function s(M,O,Y,ue){this.cx=3*M,this.bx=3*(Y-M)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*O,this.by=3*(ue-O)-this.cy,this.ay=1-this.cy-this.by,this.p1x=M,this.p1y=ue,this.p2x=Y,this.p2y=ue}s.prototype.sampleCurveX=function(M){return((this.ax*M+this.bx)*M+this.cx)*M},s.prototype.sampleCurveY=function(M){return((this.ay*M+this.by)*M+this.cy)*M},s.prototype.sampleCurveDerivativeX=function(M){return(3*this.ax*M+2*this.bx)*M+this.cx},s.prototype.solveCurveX=function(M,O){var Y,ue,Se,Pe,Ne;for(O===void 0&&(O=1e-6),Se=M,Ne=0;Ne<8;Ne++){if(Pe=this.sampleCurveX(Se)-M,Math.abs(Pe)<O)return Se;var Je=this.sampleCurveDerivativeX(Se);if(Math.abs(Je)<1e-6)break;Se-=Pe/Je}if((Se=M)<(Y=0))return Y;if(Se>(ue=1))return ue;for(;Y<ue;){if(Pe=this.sampleCurveX(Se),Math.abs(Pe-M)<O)return Se;M>Pe?Y=Se:ue=Se,Se=.5*(ue-Y)+Y}return Se},s.prototype.solve=function(M,O){return this.sampleCurveY(this.solveCurveX(M,O))};var e=i;function i(M,O){this.x=M,this.y=O}function r(M,O,Y,ue){var Se=new d(M,O,Y,ue);return function(Pe){return Se.solve(Pe)}}i.prototype={clone:function(){return new i(this.x,this.y)},add:function(M){return this.clone()._add(M)},sub:function(M){return this.clone()._sub(M)},multByPoint:function(M){return this.clone()._multByPoint(M)},divByPoint:function(M){return this.clone()._divByPoint(M)},mult:function(M){return this.clone()._mult(M)},div:function(M){return this.clone()._div(M)},rotate:function(M){return this.clone()._rotate(M)},rotateAround:function(M,O){return this.clone()._rotateAround(M,O)},matMult:function(M){return this.clone()._matMult(M)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(M){return this.x===M.x&&this.y===M.y},dist:function(M){return Math.sqrt(this.distSqr(M))},distSqr:function(M){var O=M.x-this.x,Y=M.y-this.y;return O*O+Y*Y},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(M){return Math.atan2(this.y-M.y,this.x-M.x)},angleWith:function(M){return this.angleWithSep(M.x,M.y)},angleWithSep:function(M,O){return Math.atan2(this.x*O-this.y*M,this.x*M+this.y*O)},_matMult:function(M){var O=M[0]*this.x+M[1]*this.y,Y=M[2]*this.x+M[3]*this.y;return this.x=O,this.y=Y,this},_add:function(M){return this.x+=M.x,this.y+=M.y,this},_sub:function(M){return this.x-=M.x,this.y-=M.y,this},_mult:function(M){return this.x*=M,this.y*=M,this},_div:function(M){return this.x/=M,this.y/=M,this},_multByPoint:function(M){return this.x*=M.x,this.y*=M.y,this},_divByPoint:function(M){return this.x/=M.x,this.y/=M.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var M=this.y;return this.y=this.x,this.x=-M,this},_rotate:function(M){var O=Math.cos(M),Y=Math.sin(M),ue=O*this.x-Y*this.y,Se=Y*this.x+O*this.y;return this.x=ue,this.y=Se,this},_rotateAround:function(M,O){var Y=Math.cos(M),ue=Math.sin(M),Se=O.x+Y*(this.x-O.x)-ue*(this.y-O.y),Pe=O.y+ue*(this.x-O.x)+Y*(this.y-O.y);return this.x=Se,this.y=Pe,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(M){return M instanceof i?M:Array.isArray(M)?new i(M[0],M[1]):M};var n=r(.25,.1,.25,1);function a(M,O,Y){return Math.min(Y,Math.max(O,M))}function o(M,O,Y){var ue=Y-O,Se=((M-O)%ue+ue)%ue+O;return Se===O?Y:Se}function u(M){for(var O=[],Y=arguments.length-1;Y-- >0;)O[Y]=arguments[Y+1];for(var ue=0,Se=O;ue<Se.length;ue+=1){var Pe=Se[ue];for(var Ne in Pe)M[Ne]=Pe[Ne]}return M}var p=1;function c(){return p++}function x(){return function M(O){return O?(O^16*Math.random()>>O/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,M)}()}function g(M){return!!M&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(M)}function f(M,O){M.forEach(function(Y){O[Y]&&(O[Y]=O[Y].bind(O))})}function y(M,O){return M.indexOf(O,M.length-O.length)!==-1}function v(M,O,Y){var ue={};for(var Se in M)ue[Se]=O.call(Y||this,M[Se],Se,M);return ue}function m(M,O,Y){var ue={};for(var Se in M)O.call(Y||this,M[Se],Se,M)&&(ue[Se]=M[Se]);return ue}function _(M){return Array.isArray(M)?M.map(_):typeof M=="object"&&M?v(M,_):M}var h={};function A(M){h[M]||(typeof console<"u"&&console.warn(M),h[M]=!0)}function w(M,O,Y){return(Y.y-M.y)*(O.x-M.x)>(O.y-M.y)*(Y.x-M.x)}function E(M){for(var O=0,Y=0,ue=M.length,Se=ue-1,Pe=void 0,Ne=void 0;Y<ue;Se=Y++)Pe=M[Y],O+=((Ne=M[Se]).x-Pe.x)*(Pe.y+Ne.y);return O}function L(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function C(M){var O={};if(M.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(ue,Se,Pe,Ne){var Je=Pe||Ne;return O[Se]=!Je||Je.toLowerCase(),""}),O["max-age"]){var Y=parseInt(O["max-age"],10);isNaN(Y)?delete O["max-age"]:O["max-age"]=Y}return O}var P=null;function D(M){if(P==null){var O=M.navigator?M.navigator.userAgent:null;P=!!M.safari||!(!O||!(/\b(iPad|iPhone|iPod)\b/.test(O)||O.match("Safari")&&!O.match("Chrome")))}return P}function G(M){try{var O=self[M];return O.setItem("_mapbox_test_",1),O.removeItem("_mapbox_test_"),!0}catch{return!1}}var I,H,N,F,V=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),q=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,te=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,$={now:V,frame:function(M){var O=q(M);return{cancel:function(){return te(O)}}},getImageData:function(M,O){O===void 0&&(O=0);var Y=self.document.createElement("canvas"),ue=Y.getContext("2d");if(!ue)throw new Error("failed to create canvas 2d context");return Y.width=M.width,Y.height=M.height,ue.drawImage(M,0,0,M.width,M.height),ue.getImageData(-O,-O,M.width+2*O,M.height+2*O)},resolveURL:function(M){return I||(I=self.document.createElement("a")),I.href=M,I.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(H==null&&(H=self.matchMedia("(prefers-reduced-motion: reduce)")),H.matches)}},W={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Z={supported:!1,testSupport:function(M){!J&&F&&(ee?re(M):N=M)}},J=!1,ee=!1;function re(M){var O=M.createTexture();M.bindTexture(M.TEXTURE_2D,O);try{if(M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,F),M.isContextLost())return;Z.supported=!0}catch{}M.deleteTexture(O),J=!0}self.document&&((F=self.document.createElement("img")).onload=function(){N&&re(N),N=null,ee=!0},F.onerror=function(){J=!0,N=null},F.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ae="01",oe=function(M,O){this._transformRequestFn=M,this._customAccessToken=O,this._createSkuToken()};function ce(M){return M.indexOf("mapbox:")===0}oe.prototype._createSkuToken=function(){var M=function(){for(var O="",Y=0;Y<10;Y++)O+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ae,O].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=M.token,this._skuTokenExpiresAt=M.tokenExpiresAt},oe.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},oe.prototype.transformRequest=function(M,O){return this._transformRequestFn&&this._transformRequestFn(M,O)||{url:M}},oe.prototype.normalizeStyleURL=function(M,O){if(!ce(M))return M;var Y=xe(M);return Y.path="/styles/v1"+Y.path,this._makeAPIURL(Y,this._customAccessToken||O)},oe.prototype.normalizeGlyphsURL=function(M,O){if(!ce(M))return M;var Y=xe(M);return Y.path="/fonts/v1"+Y.path,this._makeAPIURL(Y,this._customAccessToken||O)},oe.prototype.normalizeSourceURL=function(M,O){if(!ce(M))return M;var Y=xe(M);return Y.path="/v4/"+Y.authority+".json",Y.params.push("secure"),this._makeAPIURL(Y,this._customAccessToken||O)},oe.prototype.normalizeSpriteURL=function(M,O,Y,ue){var Se=xe(M);return ce(M)?(Se.path="/styles/v1"+Se.path+"/sprite"+O+Y,this._makeAPIURL(Se,this._customAccessToken||ue)):(Se.path+=""+O+Y,ge(Se))},oe.prototype.normalizeTileURL=function(M,O){if(this._isSkuTokenExpired()&&this._createSkuToken(),M&&!ce(M))return M;var Y=xe(M),ue=$.devicePixelRatio>=2||O===512?"@2x":"",Se=Z.supported?".webp":"$1";Y.path=Y.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+ue+Se),Y.path=Y.path.replace(/^.+\/v4\//,"/"),Y.path="/v4"+Y.path;var Pe=this._customAccessToken||function(Ne){for(var Je=0,it=Ne;Je<it.length;Je+=1){var yt=it[Je].match(/^access_token=(.*)$/);if(yt)return yt[1]}return null}(Y.params)||W.ACCESS_TOKEN;return W.REQUIRE_ACCESS_TOKEN&&Pe&&this._skuToken&&Y.params.push("sku="+this._skuToken),this._makeAPIURL(Y,Pe)},oe.prototype.canonicalizeTileURL=function(M,O){var Y=xe(M);if(!Y.path.match(/(^\/v4\/)/)||!Y.path.match(/\.[\w]+$/))return M;var ue="mapbox://tiles/";ue+=Y.path.replace("/v4/","");var Se=Y.params;return O&&(Se=Se.filter(function(Pe){return!Pe.match(/^access_token=/)})),Se.length&&(ue+="?"+Se.join("&")),ue},oe.prototype.canonicalizeTileset=function(M,O){for(var Y=!!O&&ce(O),ue=[],Se=0,Pe=M.tiles||[];Se<Pe.length;Se+=1){var Ne=Pe[Se];ve(Ne)?ue.push(this.canonicalizeTileURL(Ne,Y)):ue.push(Ne)}return ue},oe.prototype._makeAPIURL=function(M,O){var Y="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ue=xe(W.API_URL);if(M.protocol=ue.protocol,M.authority=ue.authority,ue.path!=="/"&&(M.path=""+ue.path+M.path),!W.REQUIRE_ACCESS_TOKEN)return ge(M);if(!(O=O||W.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+Y);if(O[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+Y);return M.params=M.params.filter(function(Se){return Se.indexOf("access_token")===-1}),M.params.push("access_token="+O),ge(M)};var pe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function ve(M){return pe.test(M)}var we=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function xe(M){var O=M.match(we);if(!O)throw new Error("Unable to parse URL object");return{protocol:O[1],authority:O[2],path:O[3]||"/",params:O[4]?O[4].split("&"):[]}}function ge(M){var O=M.params.length?"?"+M.params.join("&"):"";return M.protocol+"://"+M.authority+M.path+O}var Oe="mapbox.eventData";function Ae(M){if(!M)return null;var O,Y=M.split(".");if(!Y||Y.length!==3)return null;try{return JSON.parse((O=Y[1],decodeURIComponent(self.atob(O).split("").map(function(ue){return"%"+("00"+ue.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch{return null}}var Te=function(M){this.type=M,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Te.prototype.getStorageKey=function(M){var O,Y,ue=Ae(W.ACCESS_TOKEN);return O=ue&&ue.u?(Y=ue.u,self.btoa(encodeURIComponent(Y).replace(/%([0-9A-F]{2})/g,function(Se,Pe){return String.fromCharCode(+("0x"+Pe))}))):W.ACCESS_TOKEN||"",M?Oe+"."+M+":"+O:Oe+":"+O},Te.prototype.fetchEventData=function(){var M=G("localStorage"),O=this.getStorageKey(),Y=this.getStorageKey("uuid");if(M)try{var ue=self.localStorage.getItem(O);ue&&(this.eventData=JSON.parse(ue));var Se=self.localStorage.getItem(Y);Se&&(this.anonId=Se)}catch{A("Unable to read from LocalStorage")}},Te.prototype.saveEventData=function(){var M=G("localStorage"),O=this.getStorageKey(),Y=this.getStorageKey("uuid");if(M)try{self.localStorage.setItem(Y,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(O,JSON.stringify(this.eventData))}catch{A("Unable to write to LocalStorage")}},Te.prototype.processRequests=function(M){},Te.prototype.postEvent=function(M,O,Y,ue){var Se=this;if(W.EVENTS_URL){var Pe=xe(W.EVENTS_URL);Pe.params.push("access_token="+(ue||W.ACCESS_TOKEN||""));var Ne={event:this.type,created:new Date(M).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:b,skuId:ae,userId:this.anonId},Je=O?u(Ne,O):Ne,it={url:ge(Pe),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Je])};this.pendingRequest=wt(it,function(yt){Se.pendingRequest=null,Y(yt),Se.saveEventData(),Se.processRequests(ue)})}},Te.prototype.queueRequest=function(M,O){this.queue.push(M),this.processRequests(O)};var se,le,ne=function(M){function O(){M.call(this,"map.load"),this.success={},this.skuToken=""}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.postMapLoadEvent=function(Y,ue,Se,Pe){this.skuToken=Se,(W.EVENTS_URL&&Pe||W.ACCESS_TOKEN&&Array.isArray(Y)&&Y.some(function(Ne){return ce(Ne)||ve(Ne)}))&&this.queueRequest({id:ue,timestamp:Date.now()},Pe)},O.prototype.processRequests=function(Y){var ue=this;if(!this.pendingRequest&&this.queue.length!==0){var Se=this.queue.shift(),Pe=Se.id,Ne=Se.timestamp;Pe&&this.success[Pe]||(this.anonId||this.fetchEventData(),g(this.anonId)||(this.anonId=x()),this.postEvent(Ne,{skuToken:this.skuToken},function(Je){Je||Pe&&(ue.success[Pe]=!0)},Y))}},O}(Te),me=function(M){function O(Y){M.call(this,"appUserTurnstile"),this._customAccessToken=Y}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.postTurnstileEvent=function(Y,ue){W.EVENTS_URL&&W.ACCESS_TOKEN&&Array.isArray(Y)&&Y.some(function(Se){return ce(Se)||ve(Se)})&&this.queueRequest(Date.now(),ue)},O.prototype.processRequests=function(Y){var ue=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var Se=Ae(W.ACCESS_TOKEN),Pe=Se?Se.u:W.ACCESS_TOKEN,Ne=Pe!==this.eventData.tokenU;g(this.anonId)||(this.anonId=x(),Ne=!0);var Je=this.queue.shift();if(this.eventData.lastSuccess){var it=new Date(this.eventData.lastSuccess),yt=new Date(Je),_t=(Je-this.eventData.lastSuccess)/864e5;Ne=Ne||_t>=1||_t<-1||it.getDate()!==yt.getDate()}else Ne=!0;if(!Ne)return this.processRequests();this.postEvent(Je,{"enabled.telemetry":!1},function(Pt){Pt||(ue.eventData.lastSuccess=Je,ue.eventData.tokenU=Pe)},Y)}},O}(Te),Ee=new me,be=Ee.postTurnstileEvent.bind(Ee),De=new ne,Ue=De.postMapLoadEvent.bind(De),he="mapbox-tiles",ke=500,_e=50,Ce=42e4;function Fe(){self.caches&&!se&&(se=self.caches.open(he))}function Re(M,O,Y){if(Fe(),se){var ue={status:O.status,statusText:O.statusText,headers:new self.Headers};O.headers.forEach(function(Pe,Ne){return ue.headers.set(Ne,Pe)});var Se=C(O.headers.get("Cache-Control")||"");Se["no-store"]||(Se["max-age"]&&ue.headers.set("Expires",new Date(Y+1e3*Se["max-age"]).toUTCString()),new Date(ue.headers.get("Expires")).getTime()-Y<Ce||function(Pe,Ne){if(le===void 0)try{new Response(new ReadableStream),le=!0}catch{le=!1}le?Ne(Pe.body):Pe.blob().then(Ne)}(O,function(Pe){var Ne=new self.Response(Pe,ue);Fe(),se&&se.then(function(Je){return Je.put(He(M.url),Ne)}).catch(function(Je){return A(Je.message)})}))}}function He(M){var O=M.indexOf("?");return O<0?M:M.slice(0,O)}function Ge(M,O){if(Fe(),!se)return O(null);var Y=He(M.url);se.then(function(ue){ue.match(Y).then(function(Se){var Pe=function(Ne){if(!Ne)return!1;var Je=new Date(Ne.headers.get("Expires")||0),it=C(Ne.headers.get("Cache-Control")||"");return Je>Date.now()&&!it["no-cache"]}(Se);ue.delete(Y),Pe&&ue.put(Y,Se.clone()),O(null,Se,Pe)}).catch(O)}).catch(O)}var $e,st=1/0;function Ke(){return $e==null&&($e=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),$e}var gt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(gt);var mt=function(M){function O(Y,ue,Se){ue===401&&ve(Se)&&(Y+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),M.call(this,Y),this.status=ue,this.url=Se,this.name=this.constructor.name,this.message=Y}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},O}(Error),at=L()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href};function rt(M,O){var Y,ue=new self.AbortController,Se=new self.Request(M.url,{method:M.method||"GET",body:M.body,credentials:M.credentials,headers:M.headers,referrer:at(),signal:ue.signal}),Pe=!1,Ne=!1,Je=(Y=Se.url).indexOf("sku=")>0&&ve(Y);M.type==="json"&&Se.headers.set("Accept","application/json");var it=function(_t,Pt,Nt){if(!Ne){if(_t&&_t.message!=="SecurityError"&&A(_t),Pt&&Nt)return yt(Pt);var Dt=Date.now();self.fetch(Se).then(function(Qt){if(Qt.ok){var rn=Je?Qt.clone():null;return yt(Qt,rn,Dt)}return O(new mt(Qt.statusText,Qt.status,M.url))}).catch(function(Qt){Qt.code!==20&&O(new Error(Qt.message))})}},yt=function(_t,Pt,Nt){(M.type==="arrayBuffer"?_t.arrayBuffer():M.type==="json"?_t.json():_t.text()).then(function(Dt){Ne||(Pt&&Nt&&Re(Se,Pt,Nt),Pe=!0,O(null,Dt,_t.headers.get("Cache-Control"),_t.headers.get("Expires")))}).catch(function(Dt){Ne||O(new Error(Dt.message))})};return Je?Ge(Se,it):it(null,null),{cancel:function(){Ne=!0,Pe||ue.abort()}}}var xt=function(M,O){if(Y=M.url,!(/^file:/.test(Y)||/^file:/.test(at())&&!/^\w+:/.test(Y))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return rt(M,O);if(L()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",M,O,void 0,!0)}var Y;return function(ue,Se){var Pe=new self.XMLHttpRequest;for(var Ne in Pe.open(ue.method||"GET",ue.url,!0),ue.type==="arrayBuffer"&&(Pe.responseType="arraybuffer"),ue.headers)Pe.setRequestHeader(Ne,ue.headers[Ne]);return ue.type==="json"&&(Pe.responseType="text",Pe.setRequestHeader("Accept","application/json")),Pe.withCredentials=ue.credentials==="include",Pe.onerror=function(){Se(new Error(Pe.statusText))},Pe.onload=function(){if((Pe.status>=200&&Pe.status<300||Pe.status===0)&&Pe.response!==null){var Je=Pe.response;if(ue.type==="json")try{Je=JSON.parse(Pe.response)}catch(it){return Se(it)}Se(null,Je,Pe.getResponseHeader("Cache-Control"),Pe.getResponseHeader("Expires"))}else Se(new mt(Pe.statusText,Pe.status,ue.url))},Pe.send(ue.body),{cancel:function(){return Pe.abort()}}}(M,O)},Tt=function(M,O){return xt(u(M,{type:"arrayBuffer"}),O)},wt=function(M,O){return xt(u(M,{method:"POST"}),O)},Ot,Ct;Ot=[],Ct=0;var Ye=function(M,O){if(Z.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),Ct>=W.MAX_PARALLEL_IMAGE_REQUESTS){var Y={requestParameters:M,callback:O,cancelled:!1,cancel:function(){this.cancelled=!0}};return Ot.push(Y),Y}Ct++;var ue=!1,Se=function(){if(!ue)for(ue=!0,Ct--;Ot.length&&Ct<W.MAX_PARALLEL_IMAGE_REQUESTS;){var Ne=Ot.shift(),Je=Ne.requestParameters,it=Ne.callback;Ne.cancelled||(Ne.cancel=Ye(Je,it).cancel)}},Pe=Tt(M,function(Ne,Je,it,yt){Se(),Ne?O(Ne):Je&&(Ke()?function(_t,Pt){var Nt=new self.Blob([new Uint8Array(_t)],{type:"image/png"});self.createImageBitmap(Nt).then(function(Dt){Pt(null,Dt)}).catch(function(Dt){Pt(new Error("Could not load image because of "+Dt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Je,O):function(_t,Pt,Nt,Dt){var Qt=new self.Image,rn=self.URL;Qt.onload=function(){Pt(null,Qt),rn.revokeObjectURL(Qt.src)},Qt.onerror=function(){return Pt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var wn=new self.Blob([new Uint8Array(_t)],{type:"image/png"});Qt.cacheControl=Nt,Qt.expires=Dt,Qt.src=_t.byteLength?rn.createObjectURL(wn):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Je,O,it,yt))});return{cancel:function(){Pe.cancel(),Se()}}};function Xe(M,O,Y){Y[M]&&Y[M].indexOf(O)!==-1||(Y[M]=Y[M]||[],Y[M].push(O))}function Ve(M,O,Y){if(Y&&Y[M]){var ue=Y[M].indexOf(O);ue!==-1&&Y[M].splice(ue,1)}}var We=function(M,O){O===void 0&&(O={}),u(this,O),this.type=M},nt=function(M){function O(Y,ue){ue===void 0&&(ue={}),M.call(this,"error",u({error:Y},ue))}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O}(We),ot=function(){};ot.prototype.on=function(M,O){return this._listeners=this._listeners||{},Xe(M,O,this._listeners),this},ot.prototype.off=function(M,O){return Ve(M,O,this._listeners),Ve(M,O,this._oneTimeListeners),this},ot.prototype.once=function(M,O){return this._oneTimeListeners=this._oneTimeListeners||{},Xe(M,O,this._oneTimeListeners),this},ot.prototype.fire=function(M,O){typeof M=="string"&&(M=new We(M,O||{}));var Y=M.type;if(this.listens(Y)){M.target=this;for(var ue=0,Se=this._listeners&&this._listeners[Y]?this._listeners[Y].slice():[];ue<Se.length;ue+=1)Se[ue].call(this,M);for(var Pe=0,Ne=this._oneTimeListeners&&this._oneTimeListeners[Y]?this._oneTimeListeners[Y].slice():[];Pe<Ne.length;Pe+=1){var Je=Ne[Pe];Ve(Y,Je,this._oneTimeListeners),Je.call(this,M)}var it=this._eventedParent;it&&(u(M,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),it.fire(M))}else M instanceof nt&&console.error(M.error);return this},ot.prototype.listens=function(M){return this._listeners&&this._listeners[M]&&this._listeners[M].length>0||this._oneTimeListeners&&this._oneTimeListeners[M]&&this._oneTimeListeners[M].length>0||this._eventedParent&&this._eventedParent.listens(M)},ot.prototype.setEventedParent=function(M,O){return this._eventedParent=M,this._eventedParentData=O,this};var Ie={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ze=function(M,O,Y,ue){this.message=(M?M+": ":"")+Y,ue&&(this.identifier=ue),O!=null&&O.__line__&&(this.line=O.__line__)};function et(M){var O=M.key,Y=M.value;return Y?[new ze(O,Y,"constants have been deprecated as of v8")]:[]}function tt(M){for(var O=[],Y=arguments.length-1;Y-- >0;)O[Y]=arguments[Y+1];for(var ue=0,Se=O;ue<Se.length;ue+=1){var Pe=Se[ue];for(var Ne in Pe)M[Ne]=Pe[Ne]}return M}function dt(M){return M instanceof Number||M instanceof String||M instanceof Boolean?M.valueOf():M}function pt(M){if(Array.isArray(M))return M.map(pt);if(M instanceof Object&&!(M instanceof Number||M instanceof String||M instanceof Boolean)){var O={};for(var Y in M)O[Y]=pt(M[Y]);return O}return dt(M)}var vt=function(M){function O(Y,ue){M.call(this,ue),this.message=ue,this.key=Y}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O}(Error),ct=function(M,O){O===void 0&&(O=[]),this.parent=M,this.bindings={};for(var Y=0,ue=O;Y<ue.length;Y+=1){var Se=ue[Y],Pe=Se[0],Ne=Se[1];this.bindings[Pe]=Ne}};ct.prototype.concat=function(M){return new ct(this,M)},ct.prototype.get=function(M){if(this.bindings[M])return this.bindings[M];if(this.parent)return this.parent.get(M);throw new Error(M+" not found in scope.")},ct.prototype.has=function(M){return!!this.bindings[M]||!!this.parent&&this.parent.has(M)};var kt={kind:"null"},ut={kind:"number"},ft={kind:"string"},bt={kind:"boolean"},It={kind:"color"},zt={kind:"object"},Rt={kind:"value"},Jt={kind:"collator"},qt={kind:"formatted"},Wt={kind:"resolvedImage"};function jt(M,O){return{kind:"array",itemType:M,N:O}}function fn(M){if(M.kind==="array"){var O=fn(M.itemType);return typeof M.N=="number"?"array<"+O+", "+M.N+">":M.itemType.kind==="value"?"array":"array<"+O+">"}return M.kind}var xn=[kt,ut,ft,bt,It,qt,zt,jt(Rt),Wt];function un(M,O){if(O.kind==="error")return null;if(M.kind==="array"){if(O.kind==="array"&&(O.N===0&&O.itemType.kind==="value"||!un(M.itemType,O.itemType))&&(typeof M.N!="number"||M.N===O.N))return null}else{if(M.kind===O.kind)return null;if(M.kind==="value"){for(var Y=0,ue=xn;Y<ue.length;Y+=1)if(!un(ue[Y],O))return null}}return"Expected "+fn(M)+" but found "+fn(O)+" instead."}function Ht(M,O){return O.some(function(Y){return Y.kind===M.kind})}function nn(M,O){return O.some(function(Y){return Y==="null"?M===null:Y==="array"?Array.isArray(M):Y==="object"?M&&!Array.isArray(M)&&typeof M=="object":Y===typeof M})}var Kt=T(function(M,O){var Y={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ue(it){return(it=Math.round(it))<0?0:it>255?255:it}function Se(it){return it<0?0:it>1?1:it}function Pe(it){return it[it.length-1]==="%"?ue(parseFloat(it)/100*255):ue(parseInt(it))}function Ne(it){return it[it.length-1]==="%"?Se(parseFloat(it)/100):Se(parseFloat(it))}function Je(it,yt,_t){return _t<0?_t+=1:_t>1&&(_t-=1),6*_t<1?it+(yt-it)*_t*6:2*_t<1?yt:3*_t<2?it+(yt-it)*(2/3-_t)*6:it}try{O.parseCSSColor=function(it){var yt,_t=it.replace(/ /g,"").toLowerCase();if(_t in Y)return Y[_t].slice();if(_t[0]==="#")return _t.length===4?(yt=parseInt(_t.substr(1),16))>=0&&yt<=4095?[(3840&yt)>>4|(3840&yt)>>8,240&yt|(240&yt)>>4,15&yt|(15&yt)<<4,1]:null:_t.length===7&&(yt=parseInt(_t.substr(1),16))>=0&&yt<=16777215?[(16711680&yt)>>16,(65280&yt)>>8,255&yt,1]:null;var Pt=_t.indexOf("("),Nt=_t.indexOf(")");if(Pt!==-1&&Nt+1===_t.length){var Dt=_t.substr(0,Pt),Qt=_t.substr(Pt+1,Nt-(Pt+1)).split(","),rn=1;switch(Dt){case"rgba":if(Qt.length!==4)return null;rn=Ne(Qt.pop());case"rgb":return Qt.length!==3?null:[Pe(Qt[0]),Pe(Qt[1]),Pe(Qt[2]),rn];case"hsla":if(Qt.length!==4)return null;rn=Ne(Qt.pop());case"hsl":if(Qt.length!==3)return null;var wn=(parseFloat(Qt[0])%360+360)%360/360,_n=Ne(Qt[1]),Ln=Ne(Qt[2]),On=Ln<=.5?Ln*(_n+1):Ln+_n-Ln*_n,Nn=2*Ln-On;return[ue(255*Je(Nn,On,wn+1/3)),ue(255*Je(Nn,On,wn)),ue(255*Je(Nn,On,wn-1/3)),rn];default:return null}}return null}}catch{}}),on=Kt.parseCSSColor,hn=function(M,O,Y,ue){ue===void 0&&(ue=1),this.r=M,this.g=O,this.b=Y,this.a=ue};hn.parse=function(M){if(M){if(M instanceof hn)return M;if(typeof M=="string"){var O=on(M);if(O)return new hn(O[0]/255*O[3],O[1]/255*O[3],O[2]/255*O[3],O[3])}}},hn.prototype.toString=function(){var M=this.toArray(),O=M[0],Y=M[1],ue=M[2],Se=M[3];return"rgba("+Math.round(O)+","+Math.round(Y)+","+Math.round(ue)+","+Se+")"},hn.prototype.toArray=function(){var M=this,O=M.r,Y=M.g,ue=M.b,Se=M.a;return Se===0?[0,0,0,0]:[255*O/Se,255*Y/Se,255*ue/Se,Se]},hn.black=new hn(0,0,0,1),hn.white=new hn(1,1,1,1),hn.transparent=new hn(0,0,0,0),hn.red=new hn(1,0,0,1);var dn=function(M,O,Y){this.sensitivity=M?O?"variant":"case":O?"accent":"base",this.locale=Y,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};dn.prototype.compare=function(M,O){return this.collator.compare(M,O)},dn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Mn=function(M,O,Y,ue,Se){this.text=M,this.image=O,this.scale=Y,this.fontStack=ue,this.textColor=Se},Cn=function(M){this.sections=M};Cn.fromString=function(M){return new Cn([new Mn(M,null,null,null,null)])},Cn.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(M){return M.text.length!==0||M.image&&M.image.name.length!==0})},Cn.factory=function(M){return M instanceof Cn?M:Cn.fromString(M)},Cn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(M){return M.text}).join("")},Cn.prototype.serialize=function(){for(var M=["format"],O=0,Y=this.sections;O<Y.length;O+=1){var ue=Y[O];if(ue.image)M.push(["image",ue.image.name]);else{M.push(ue.text);var Se={};ue.fontStack&&(Se["text-font"]=["literal",ue.fontStack.split(",")]),ue.scale&&(Se["font-scale"]=ue.scale),ue.textColor&&(Se["text-color"]=["rgba"].concat(ue.textColor.toArray())),M.push(Se)}}return M};var Tn=function(M){this.name=M.name,this.available=M.available};function Pn(M,O,Y,ue){return typeof M=="number"&&M>=0&&M<=255&&typeof O=="number"&&O>=0&&O<=255&&typeof Y=="number"&&Y>=0&&Y<=255?ue===void 0||typeof ue=="number"&&ue>=0&&ue<=1?null:"Invalid rgba value ["+[M,O,Y,ue].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof ue=="number"?[M,O,Y,ue]:[M,O,Y]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Wn(M){if(M===null||typeof M=="string"||typeof M=="boolean"||typeof M=="number"||M instanceof hn||M instanceof dn||M instanceof Cn||M instanceof Tn)return!0;if(Array.isArray(M)){for(var O=0,Y=M;O<Y.length;O+=1)if(!Wn(Y[O]))return!1;return!0}if(typeof M=="object"){for(var ue in M)if(!Wn(M[ue]))return!1;return!0}return!1}function $n(M){if(M===null)return kt;if(typeof M=="string")return ft;if(typeof M=="boolean")return bt;if(typeof M=="number")return ut;if(M instanceof hn)return It;if(M instanceof dn)return Jt;if(M instanceof Cn)return qt;if(M instanceof Tn)return Wt;if(Array.isArray(M)){for(var O,Y=M.length,ue=0,Se=M;ue<Se.length;ue+=1){var Pe=$n(Se[ue]);if(O){if(O===Pe)continue;O=Rt;break}O=Pe}return jt(O||Rt,Y)}return zt}function ar(M){var O=typeof M;return M===null?"":O==="string"||O==="number"||O==="boolean"?String(M):M instanceof hn||M instanceof Cn||M instanceof Tn?M.toString():JSON.stringify(M)}Tn.prototype.toString=function(){return this.name},Tn.fromString=function(M){return M?new Tn({name:M,available:!1}):null},Tn.prototype.serialize=function(){return["image",this.name]};var Qn=function(M,O){this.type=M,this.value=O};Qn.parse=function(M,O){if(M.length!==2)return O.error("'literal' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(!Wn(M[1]))return O.error("invalid value");var Y=M[1],ue=$n(Y),Se=O.expectedType;return ue.kind!=="array"||ue.N!==0||!Se||Se.kind!=="array"||typeof Se.N=="number"&&Se.N!==0||(ue=Se),new Qn(ue,Y)},Qn.prototype.evaluate=function(){return this.value},Qn.prototype.eachChild=function(){},Qn.prototype.outputDefined=function(){return!0},Qn.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof hn?["rgba"].concat(this.value.toArray()):this.value instanceof Cn?this.value.serialize():this.value};var Gn=function(M){this.name="ExpressionEvaluationError",this.message=M};Gn.prototype.toJSON=function(){return this.message};var dr={string:ft,number:ut,boolean:bt,object:zt},Bt=function(M,O){this.type=M,this.args=O};Bt.parse=function(M,O){if(M.length<2)return O.error("Expected at least one argument.");var Y,ue=1,Se=M[0];if(Se==="array"){var Pe,Ne;if(M.length>2){var Je=M[1];if(typeof Je!="string"||!(Je in dr)||Je==="object")return O.error('The item type argument of "array" must be one of string, number, boolean',1);Pe=dr[Je],ue++}else Pe=Rt;if(M.length>3){if(M[2]!==null&&(typeof M[2]!="number"||M[2]<0||M[2]!==Math.floor(M[2])))return O.error('The length argument to "array" must be a positive integer literal',2);Ne=M[2],ue++}Y=jt(Pe,Ne)}else Y=dr[Se];for(var it=[];ue<M.length;ue++){var yt=O.parse(M[ue],ue,Rt);if(!yt)return null;it.push(yt)}return new Bt(Y,it)},Bt.prototype.evaluate=function(M){for(var O=0;O<this.args.length;O++){var Y=this.args[O].evaluate(M);if(!un(this.type,$n(Y)))return Y;if(O===this.args.length-1)throw new Gn("Expected value to be of type "+fn(this.type)+", but found "+fn($n(Y))+" instead.")}return null},Bt.prototype.eachChild=function(M){this.args.forEach(M)},Bt.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},Bt.prototype.serialize=function(){var M=this.type,O=[M.kind];if(M.kind==="array"){var Y=M.itemType;if(Y.kind==="string"||Y.kind==="number"||Y.kind==="boolean"){O.push(Y.kind);var ue=M.N;(typeof ue=="number"||this.args.length>1)&&O.push(ue)}}return O.concat(this.args.map(function(Se){return Se.serialize()}))};var tn=function(M){this.type=qt,this.sections=M};tn.parse=function(M,O){if(M.length<2)return O.error("Expected at least one argument.");var Y=M[1];if(!Array.isArray(Y)&&typeof Y=="object")return O.error("First argument must be an image or text section.");for(var ue=[],Se=!1,Pe=1;Pe<=M.length-1;++Pe){var Ne=M[Pe];if(Se&&typeof Ne=="object"&&!Array.isArray(Ne)){Se=!1;var Je=null;if(Ne["font-scale"]&&!(Je=O.parse(Ne["font-scale"],1,ut)))return null;var it=null;if(Ne["text-font"]&&!(it=O.parse(Ne["text-font"],1,jt(ft))))return null;var yt=null;if(Ne["text-color"]&&!(yt=O.parse(Ne["text-color"],1,It)))return null;var _t=ue[ue.length-1];_t.scale=Je,_t.font=it,_t.textColor=yt}else{var Pt=O.parse(M[Pe],1,Rt);if(!Pt)return null;var Nt=Pt.type.kind;if(Nt!=="string"&&Nt!=="value"&&Nt!=="null"&&Nt!=="resolvedImage")return O.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Se=!0,ue.push({content:Pt,scale:null,font:null,textColor:null})}}return new tn(ue)},tn.prototype.evaluate=function(M){return new Cn(this.sections.map(function(O){var Y=O.content.evaluate(M);return $n(Y)===Wt?new Mn("",Y,null,null,null):new Mn(ar(Y),null,O.scale?O.scale.evaluate(M):null,O.font?O.font.evaluate(M).join(","):null,O.textColor?O.textColor.evaluate(M):null)}))},tn.prototype.eachChild=function(M){for(var O=0,Y=this.sections;O<Y.length;O+=1){var ue=Y[O];M(ue.content),ue.scale&&M(ue.scale),ue.font&&M(ue.font),ue.textColor&&M(ue.textColor)}},tn.prototype.outputDefined=function(){return!1},tn.prototype.serialize=function(){for(var M=["format"],O=0,Y=this.sections;O<Y.length;O+=1){var ue=Y[O];M.push(ue.content.serialize());var Se={};ue.scale&&(Se["font-scale"]=ue.scale.serialize()),ue.font&&(Se["text-font"]=ue.font.serialize()),ue.textColor&&(Se["text-color"]=ue.textColor.serialize()),M.push(Se)}return M};var cn=function(M){this.type=Wt,this.input=M};cn.parse=function(M,O){if(M.length!==2)return O.error("Expected two arguments.");var Y=O.parse(M[1],1,ft);return Y?new cn(Y):O.error("No image name provided.")},cn.prototype.evaluate=function(M){var O=this.input.evaluate(M),Y=Tn.fromString(O);return Y&&M.availableImages&&(Y.available=M.availableImages.indexOf(O)>-1),Y},cn.prototype.eachChild=function(M){M(this.input)},cn.prototype.outputDefined=function(){return!1},cn.prototype.serialize=function(){return["image",this.input.serialize()]};var gn={"to-boolean":bt,"to-color":It,"to-number":ut,"to-string":ft},kn=function(M,O){this.type=M,this.args=O};kn.parse=function(M,O){if(M.length<2)return O.error("Expected at least one argument.");var Y=M[0];if((Y==="to-boolean"||Y==="to-string")&&M.length!==2)return O.error("Expected one argument.");for(var ue=gn[Y],Se=[],Pe=1;Pe<M.length;Pe++){var Ne=O.parse(M[Pe],Pe,Rt);if(!Ne)return null;Se.push(Ne)}return new kn(ue,Se)},kn.prototype.evaluate=function(M){if(this.type.kind==="boolean")return!!this.args[0].evaluate(M);if(this.type.kind==="color"){for(var O,Y,ue=0,Se=this.args;ue<Se.length;ue+=1){if(Y=null,(O=Se[ue].evaluate(M))instanceof hn)return O;if(typeof O=="string"){var Pe=M.parseColor(O);if(Pe)return Pe}else if(Array.isArray(O)&&!(Y=O.length<3||O.length>4?"Invalid rbga value "+JSON.stringify(O)+": expected an array containing either three or four numeric values.":Pn(O[0],O[1],O[2],O[3])))return new hn(O[0]/255,O[1]/255,O[2]/255,O[3])}throw new Gn(Y||"Could not parse color from value '"+(typeof O=="string"?O:String(JSON.stringify(O)))+"'")}if(this.type.kind==="number"){for(var Ne=null,Je=0,it=this.args;Je<it.length;Je+=1){if((Ne=it[Je].evaluate(M))===null)return 0;var yt=Number(Ne);if(!isNaN(yt))return yt}throw new Gn("Could not convert "+JSON.stringify(Ne)+" to number.")}return this.type.kind==="formatted"?Cn.fromString(ar(this.args[0].evaluate(M))):this.type.kind==="resolvedImage"?Tn.fromString(ar(this.args[0].evaluate(M))):ar(this.args[0].evaluate(M))},kn.prototype.eachChild=function(M){this.args.forEach(M)},kn.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},kn.prototype.serialize=function(){if(this.type.kind==="formatted")return new tn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new cn(this.args[0]).serialize();var M=["to-"+this.type.kind];return this.eachChild(function(O){M.push(O.serialize())}),M};var Vn=["Unknown","Point","LineString","Polygon"],In=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};In.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},In.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Vn[this.feature.type]:this.feature.type:null},In.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},In.prototype.canonicalID=function(){return this.canonical},In.prototype.properties=function(){return this.feature&&this.feature.properties||{}},In.prototype.parseColor=function(M){var O=this._parseColorCache[M];return O||(O=this._parseColorCache[M]=hn.parse(M)),O};var Dn=function(M,O,Y,ue){this.name=M,this.type=O,this._evaluate=Y,this.args=ue};Dn.prototype.evaluate=function(M){return this._evaluate(M,this.args)},Dn.prototype.eachChild=function(M){this.args.forEach(M)},Dn.prototype.outputDefined=function(){return!1},Dn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(M){return M.serialize()}))},Dn.parse=function(M,O){var Y,ue=M[0],Se=Dn.definitions[ue];if(!Se)return O.error('Unknown expression "'+ue+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Pe=Array.isArray(Se)?Se[0]:Se.type,Ne=Array.isArray(Se)?[[Se[1],Se[2]]]:Se.overloads,Je=Ne.filter(function(Dr){var kr=Dr[0];return!Array.isArray(kr)||kr.length===M.length-1}),it=null,yt=0,_t=Je;yt<_t.length;yt+=1){var Pt=_t[yt],Nt=Pt[0],Dt=Pt[1];it=new tr(O.registry,O.path,null,O.scope);for(var Qt=[],rn=!1,wn=1;wn<M.length;wn++){var _n=M[wn],Ln=Array.isArray(Nt)?Nt[wn-1]:Nt.type,On=it.parse(_n,1+Qt.length,Ln);if(!On){rn=!0;break}Qt.push(On)}if(!rn)if(Array.isArray(Nt)&&Nt.length!==Qt.length)it.error("Expected "+Nt.length+" arguments, but found "+Qt.length+" instead.");else{for(var Nn=0;Nn<Qt.length;Nn++){var qn=Array.isArray(Nt)?Nt[Nn]:Nt.type,Jn=Qt[Nn];it.concat(Nn+1).checkSubtype(qn,Jn.type)}if(it.errors.length===0)return new Dn(ue,Pe,Dt,Qt)}}if(Je.length===1)(Y=O.errors).push.apply(Y,it.errors);else{for(var hr=(Je.length?Je:Ne).map(function(Dr){return kr=Dr[0],Array.isArray(kr)?"("+kr.map(fn).join(", ")+")":"("+fn(kr.type)+"...)";var kr}).join(" | "),sr=[],gr=1;gr<M.length;gr++){var _r=O.parse(M[gr],1+sr.length);if(!_r)return null;sr.push(fn(_r.type))}O.error("Expected arguments of type "+hr+", but found ("+sr.join(", ")+") instead.")}return null},Dn.register=function(M,O){for(var Y in Dn.definitions=O,O)M[Y]=Dn};var Kn=function(M,O,Y){this.type=Jt,this.locale=Y,this.caseSensitive=M,this.diacriticSensitive=O};Kn.parse=function(M,O){if(M.length!==2)return O.error("Expected one argument.");var Y=M[1];if(typeof Y!="object"||Array.isArray(Y))return O.error("Collator options argument must be an object.");var ue=O.parse(Y["case-sensitive"]!==void 0&&Y["case-sensitive"],1,bt);if(!ue)return null;var Se=O.parse(Y["diacritic-sensitive"]!==void 0&&Y["diacritic-sensitive"],1,bt);if(!Se)return null;var Pe=null;return Y.locale&&!(Pe=O.parse(Y.locale,1,ft))?null:new Kn(ue,Se,Pe)},Kn.prototype.evaluate=function(M){return new dn(this.caseSensitive.evaluate(M),this.diacriticSensitive.evaluate(M),this.locale?this.locale.evaluate(M):null)},Kn.prototype.eachChild=function(M){M(this.caseSensitive),M(this.diacriticSensitive),this.locale&&M(this.locale)},Kn.prototype.outputDefined=function(){return!1},Kn.prototype.serialize=function(){var M={};return M["case-sensitive"]=this.caseSensitive.serialize(),M["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(M.locale=this.locale.serialize()),["collator",M]};var Ut=8192;function bn(M,O){M[0]=Math.min(M[0],O[0]),M[1]=Math.min(M[1],O[1]),M[2]=Math.max(M[2],O[0]),M[3]=Math.max(M[3],O[1])}function At(M,O){return!(M[0]<=O[0]||M[2]>=O[2]||M[1]<=O[1]||M[3]>=O[3])}function Gt(M,O){var Y,ue=(180+M[0])/360,Se=(Y=M[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+Y*Math.PI/360)))/360),Pe=Math.pow(2,O.z);return[Math.round(ue*Pe*Ut),Math.round(Se*Pe*Ut)]}function $t(M,O,Y){return O[1]>M[1]!=Y[1]>M[1]&&M[0]<(Y[0]-O[0])*(M[1]-O[1])/(Y[1]-O[1])+O[0]}function mn(M,O){for(var Y=!1,ue=0,Se=O.length;ue<Se;ue++)for(var Pe=O[ue],Ne=0,Je=Pe.length;Ne<Je-1;Ne++){if(it=M,yt=Pe[Ne],_t=Pe[Ne+1],Pt=void 0,Nt=void 0,Dt=void 0,Qt=void 0,Pt=it[0]-yt[0],Nt=it[1]-yt[1],Dt=it[0]-_t[0],Qt=it[1]-_t[1],Pt*Qt-Dt*Nt==0&&Pt*Dt<=0&&Nt*Qt<=0)return!1;$t(M,Pe[Ne],Pe[Ne+1])&&(Y=!Y)}var it,yt,_t,Pt,Nt,Dt,Qt;return Y}function yn(M,O){for(var Y=0;Y<O.length;Y++)if(mn(M,O[Y]))return!0;return!1}function An(M,O,Y,ue){var Se=M[0]-Y[0],Pe=M[1]-Y[1],Ne=O[0]-Y[0],Je=O[1]-Y[1],it=ue[0]-Y[0],yt=ue[1]-Y[1],_t=Se*yt-it*Pe,Pt=Ne*yt-it*Je;return _t>0&&Pt<0||_t<0&&Pt>0}function sn(M,O,Y){for(var ue=0,Se=Y;ue<Se.length;ue+=1)for(var Pe=Se[ue],Ne=0;Ne<Pe.length-1;++Ne)if(Je=M,it=O,yt=Pe[Ne],_t=Pe[Ne+1],Pt=void 0,Nt=void 0,Dt=void 0,Dt=[it[0]-Je[0],it[1]-Je[1]],Pt=[_t[0]-yt[0],_t[1]-yt[1]],Nt=Dt,Pt[0]*Nt[1]-Pt[1]*Nt[0]!=0&&An(Je,it,yt,_t)&&An(yt,_t,Je,it))return!0;var Je,it,yt,_t,Pt,Nt,Dt;return!1}function Yt(M,O){for(var Y=0;Y<M.length;++Y)if(!mn(M[Y],O))return!1;for(var ue=0;ue<M.length-1;++ue)if(sn(M[ue],M[ue+1],O))return!1;return!0}function Xt(M,O){for(var Y=0;Y<O.length;Y++)if(Yt(M,O[Y]))return!0;return!1}function an(M,O,Y){for(var ue=[],Se=0;Se<M.length;Se++){for(var Pe=[],Ne=0;Ne<M[Se].length;Ne++){var Je=Gt(M[Se][Ne],Y);bn(O,Je),Pe.push(Je)}ue.push(Pe)}return ue}function ln(M,O,Y){for(var ue=[],Se=0;Se<M.length;Se++){var Pe=an(M[Se],O,Y);ue.push(Pe)}return ue}function Sn(M,O,Y,ue){if(M[0]<Y[0]||M[0]>Y[2]){var Se=.5*ue,Pe=M[0]-Y[0]>Se?-ue:Y[0]-M[0]>Se?ue:0;Pe===0&&(Pe=M[0]-Y[2]>Se?-ue:Y[2]-M[0]>Se?ue:0),M[0]+=Pe}bn(O,M)}function En(M,O,Y,ue){for(var Se=Math.pow(2,ue.z)*Ut,Pe=[ue.x*Ut,ue.y*Ut],Ne=[],Je=0,it=M;Je<it.length;Je+=1)for(var yt=0,_t=it[Je];yt<_t.length;yt+=1){var Pt=_t[yt],Nt=[Pt.x+Pe[0],Pt.y+Pe[1]];Sn(Nt,O,Y,Se),Ne.push(Nt)}return Ne}function jn(M,O,Y,ue){for(var Se=Math.pow(2,ue.z)*Ut,Pe=[ue.x*Ut,ue.y*Ut],Ne=[],Je=0,it=M;Je<it.length;Je+=1){for(var yt=[],_t=0,Pt=it[Je];_t<Pt.length;_t+=1){var Nt=Pt[_t],Dt=[Nt.x+Pe[0],Nt.y+Pe[1]];bn(O,Dt),yt.push(Dt)}Ne.push(yt)}if(O[2]-O[0]<=Se/2){(Ln=O)[0]=Ln[1]=1/0,Ln[2]=Ln[3]=-1/0;for(var Qt=0,rn=Ne;Qt<rn.length;Qt+=1)for(var wn=0,_n=rn[Qt];wn<_n.length;wn+=1)Sn(_n[wn],O,Y,Se)}var Ln;return Ne}var Fn=function(M,O){this.type=bt,this.geojson=M,this.geometries=O};function Xn(M){if(M instanceof Dn&&(M.name==="get"&&M.args.length===1||M.name==="feature-state"||M.name==="has"&&M.args.length===1||M.name==="properties"||M.name==="geometry-type"||M.name==="id"||/^filter-/.test(M.name))||M instanceof Fn)return!1;var O=!0;return M.eachChild(function(Y){O&&!Xn(Y)&&(O=!1)}),O}function Hn(M){if(M instanceof Dn&&M.name==="feature-state")return!1;var O=!0;return M.eachChild(function(Y){O&&!Hn(Y)&&(O=!1)}),O}function nr(M,O){if(M instanceof Dn&&O.indexOf(M.name)>=0)return!1;var Y=!0;return M.eachChild(function(ue){Y&&!nr(ue,O)&&(Y=!1)}),Y}Fn.parse=function(M,O){if(M.length!==2)return O.error("'within' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(Wn(M[1])){var Y=M[1];if(Y.type==="FeatureCollection")for(var ue=0;ue<Y.features.length;++ue){var Se=Y.features[ue].geometry.type;if(Se==="Polygon"||Se==="MultiPolygon")return new Fn(Y,Y.features[ue].geometry)}else if(Y.type==="Feature"){var Pe=Y.geometry.type;if(Pe==="Polygon"||Pe==="MultiPolygon")return new Fn(Y,Y.geometry)}else if(Y.type==="Polygon"||Y.type==="MultiPolygon")return new Fn(Y,Y)}return O.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Fn.prototype.evaluate=function(M){if(M.geometry()!=null&&M.canonicalID()!=null){if(M.geometryType()==="Point")return function(O,Y){var ue=[1/0,1/0,-1/0,-1/0],Se=[1/0,1/0,-1/0,-1/0],Pe=O.canonicalID();if(Y.type==="Polygon"){var Ne=an(Y.coordinates,Se,Pe),Je=En(O.geometry(),ue,Se,Pe);if(!At(ue,Se))return!1;for(var it=0,yt=Je;it<yt.length;it+=1)if(!mn(yt[it],Ne))return!1}if(Y.type==="MultiPolygon"){var _t=ln(Y.coordinates,Se,Pe),Pt=En(O.geometry(),ue,Se,Pe);if(!At(ue,Se))return!1;for(var Nt=0,Dt=Pt;Nt<Dt.length;Nt+=1)if(!yn(Dt[Nt],_t))return!1}return!0}(M,this.geometries);if(M.geometryType()==="LineString")return function(O,Y){var ue=[1/0,1/0,-1/0,-1/0],Se=[1/0,1/0,-1/0,-1/0],Pe=O.canonicalID();if(Y.type==="Polygon"){var Ne=an(Y.coordinates,Se,Pe),Je=jn(O.geometry(),ue,Se,Pe);if(!At(ue,Se))return!1;for(var it=0,yt=Je;it<yt.length;it+=1)if(!Yt(yt[it],Ne))return!1}if(Y.type==="MultiPolygon"){var _t=ln(Y.coordinates,Se,Pe),Pt=jn(O.geometry(),ue,Se,Pe);if(!At(ue,Se))return!1;for(var Nt=0,Dt=Pt;Nt<Dt.length;Nt+=1)if(!Xt(Dt[Nt],_t))return!1}return!0}(M,this.geometries)}return!1},Fn.prototype.eachChild=function(){},Fn.prototype.outputDefined=function(){return!0},Fn.prototype.serialize=function(){return["within",this.geojson]};var er=function(M,O){this.type=O.type,this.name=M,this.boundExpression=O};er.parse=function(M,O){if(M.length!==2||typeof M[1]!="string")return O.error("'var' expression requires exactly one string literal argument.");var Y=M[1];return O.scope.has(Y)?new er(Y,O.scope.get(Y)):O.error('Unknown variable "'+Y+'". Make sure "'+Y+'" has been bound in an enclosing "let" expression before using it.',1)},er.prototype.evaluate=function(M){return this.boundExpression.evaluate(M)},er.prototype.eachChild=function(){},er.prototype.outputDefined=function(){return!1},er.prototype.serialize=function(){return["var",this.name]};var tr=function(M,O,Y,ue,Se){O===void 0&&(O=[]),ue===void 0&&(ue=new ct),Se===void 0&&(Se=[]),this.registry=M,this.path=O,this.key=O.map(function(Pe){return"["+Pe+"]"}).join(""),this.scope=ue,this.errors=Se,this.expectedType=Y};function lr(M){if(M instanceof er)return lr(M.boundExpression);if(M instanceof Dn&&M.name==="error"||M instanceof Kn||M instanceof Fn)return!1;var O=M instanceof kn||M instanceof Bt,Y=!0;return M.eachChild(function(ue){Y=O?Y&&lr(ue):Y&&ue instanceof Qn}),!!Y&&Xn(M)&&nr(M,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ur(M,O){for(var Y,ue,Se=M.length-1,Pe=0,Ne=Se,Je=0;Pe<=Ne;)if(Y=M[Je=Math.floor((Pe+Ne)/2)],ue=M[Je+1],Y<=O){if(Je===Se||O<ue)return Je;Pe=Je+1}else{if(!(Y>O))throw new Gn("Input is not a number.");Ne=Je-1}return 0}tr.prototype.parse=function(M,O,Y,ue,Se){return Se===void 0&&(Se={}),O?this.concat(O,Y,ue)._parse(M,Se):this._parse(M,Se)},tr.prototype._parse=function(M,O){function Y(yt,_t,Pt){return Pt==="assert"?new Bt(_t,[yt]):Pt==="coerce"?new kn(_t,[yt]):yt}if(M!==null&&typeof M!="string"&&typeof M!="boolean"&&typeof M!="number"||(M=["literal",M]),Array.isArray(M)){if(M.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ue=M[0];if(typeof ue!="string")return this.error("Expression name must be a string, but found "+typeof ue+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var Se=this.registry[ue];if(Se){var Pe=Se.parse(M,this);if(!Pe)return null;if(this.expectedType){var Ne=this.expectedType,Je=Pe.type;if(Ne.kind!=="string"&&Ne.kind!=="number"&&Ne.kind!=="boolean"&&Ne.kind!=="object"&&Ne.kind!=="array"||Je.kind!=="value")if(Ne.kind!=="color"&&Ne.kind!=="formatted"&&Ne.kind!=="resolvedImage"||Je.kind!=="value"&&Je.kind!=="string"){if(this.checkSubtype(Ne,Je))return null}else Pe=Y(Pe,Ne,O.typeAnnotation||"coerce");else Pe=Y(Pe,Ne,O.typeAnnotation||"assert")}if(!(Pe instanceof Qn)&&Pe.type.kind!=="resolvedImage"&&lr(Pe)){var it=new In;try{Pe=new Qn(Pe.type,Pe.evaluate(it))}catch(yt){return this.error(yt.message),null}}return Pe}return this.error('Unknown expression "'+ue+'". If you wanted a literal array, use ["literal", [...]].',0)}return M===void 0?this.error("'undefined' value invalid. Use null instead."):typeof M=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof M+" instead.")},tr.prototype.concat=function(M,O,Y){var ue=typeof M=="number"?this.path.concat(M):this.path,Se=Y?this.scope.concat(Y):this.scope;return new tr(this.registry,ue,O||null,Se,this.errors)},tr.prototype.error=function(M){for(var O=[],Y=arguments.length-1;Y-- >0;)O[Y]=arguments[Y+1];var ue=""+this.key+O.map(function(Se){return"["+Se+"]"}).join("");this.errors.push(new vt(ue,M))},tr.prototype.checkSubtype=function(M,O){var Y=un(M,O);return Y&&this.error(Y),Y};var br=function(M,O,Y){this.type=M,this.input=O,this.labels=[],this.outputs=[];for(var ue=0,Se=Y;ue<Se.length;ue+=1){var Pe=Se[ue],Ne=Pe[0],Je=Pe[1];this.labels.push(Ne),this.outputs.push(Je)}};function Zn(M,O,Y){return M*(1-Y)+O*Y}br.parse=function(M,O){if(M.length-1<4)return O.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return O.error("Expected an even number of arguments.");var Y=O.parse(M[1],1,ut);if(!Y)return null;var ue=[],Se=null;O.expectedType&&O.expectedType.kind!=="value"&&(Se=O.expectedType);for(var Pe=1;Pe<M.length;Pe+=2){var Ne=Pe===1?-1/0:M[Pe],Je=M[Pe+1],it=Pe,yt=Pe+1;if(typeof Ne!="number")return O.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',it);if(ue.length&&ue[ue.length-1][0]>=Ne)return O.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',it);var _t=O.parse(Je,yt,Se);if(!_t)return null;Se=Se||_t.type,ue.push([Ne,_t])}return new br(Se,Y,ue)},br.prototype.evaluate=function(M){var O=this.labels,Y=this.outputs;if(O.length===1)return Y[0].evaluate(M);var ue=this.input.evaluate(M);if(ue<=O[0])return Y[0].evaluate(M);var Se=O.length;return ue>=O[Se-1]?Y[Se-1].evaluate(M):Y[ur(O,ue)].evaluate(M)},br.prototype.eachChild=function(M){M(this.input);for(var O=0,Y=this.outputs;O<Y.length;O+=1)M(Y[O])},br.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},br.prototype.serialize=function(){for(var M=["step",this.input.serialize()],O=0;O<this.labels.length;O++)O>0&&M.push(this.labels[O]),M.push(this.outputs[O].serialize());return M};var pr=Object.freeze({__proto__:null,number:Zn,color:function(M,O,Y){return new hn(Zn(M.r,O.r,Y),Zn(M.g,O.g,Y),Zn(M.b,O.b,Y),Zn(M.a,O.a,Y))},array:function(M,O,Y){return M.map(function(ue,Se){return Zn(ue,O[Se],Y)})}}),Sr=.95047,Gr=1,ai=1.08883,ni=4/29,ci=6/29,Kr=3*ci*ci,bi=ci*ci*ci,Ha=Math.PI/180,ha=180/Math.PI;function eo(M){return M>bi?Math.pow(M,.3333333333333333):M/Kr+ni}function Vs(M){return M>ci?M*M*M:Kr*(M-ni)}function Ro(M){return 255*(M<=.0031308?12.92*M:1.055*Math.pow(M,.4166666666666667)-.055)}function hs(M){return(M/=255)<=.04045?M/12.92:Math.pow((M+.055)/1.055,2.4)}function Hs(M){var O=hs(M.r),Y=hs(M.g),ue=hs(M.b),Se=eo((.4124564*O+.3575761*Y+.1804375*ue)/Sr),Pe=eo((.2126729*O+.7151522*Y+.072175*ue)/Gr);return{l:116*Pe-16,a:500*(Se-Pe),b:200*(Pe-eo((.0193339*O+.119192*Y+.9503041*ue)/ai)),alpha:M.a}}function qa(M){var O=(M.l+16)/116,Y=isNaN(M.a)?O:O+M.a/500,ue=isNaN(M.b)?O:O-M.b/200;return O=Gr*Vs(O),Y=Sr*Vs(Y),ue=ai*Vs(ue),new hn(Ro(3.2404542*Y-1.5371385*O-.4985314*ue),Ro(-.969266*Y+1.8760108*O+.041556*ue),Ro(.0556434*Y-.2040259*O+1.0572252*ue),M.alpha)}function nl(M,O,Y){var ue=O-M;return M+Y*(ue>180||ue<-180?ue-360*Math.round(ue/360):ue)}var Fo={forward:Hs,reverse:qa,interpolate:function(M,O,Y){return{l:Zn(M.l,O.l,Y),a:Zn(M.a,O.a,Y),b:Zn(M.b,O.b,Y),alpha:Zn(M.alpha,O.alpha,Y)}}},Bo={forward:function(M){var O=Hs(M),Y=O.l,ue=O.a,Se=O.b,Pe=Math.atan2(Se,ue)*ha;return{h:Pe<0?Pe+360:Pe,c:Math.sqrt(ue*ue+Se*Se),l:Y,alpha:M.a}},reverse:function(M){var O=M.h*Ha,Y=M.c;return qa({l:M.l,a:Math.cos(O)*Y,b:Math.sin(O)*Y,alpha:M.alpha})},interpolate:function(M,O,Y){return{h:nl(M.h,O.h,Y),c:Zn(M.c,O.c,Y),l:Zn(M.l,O.l,Y),alpha:Zn(M.alpha,O.alpha,Y)}}},Ga=Object.freeze({__proto__:null,lab:Fo,hcl:Bo}),Si=function(M,O,Y,ue,Se){this.type=M,this.operator=O,this.interpolation=Y,this.input=ue,this.labels=[],this.outputs=[];for(var Pe=0,Ne=Se;Pe<Ne.length;Pe+=1){var Je=Ne[Pe],it=Je[0],yt=Je[1];this.labels.push(it),this.outputs.push(yt)}};function ps(M,O,Y,ue){var Se=ue-Y,Pe=M-Y;return Se===0?0:O===1?Pe/Se:(Math.pow(O,Pe)-1)/(Math.pow(O,Se)-1)}Si.interpolationFactor=function(M,O,Y,ue){var Se=0;if(M.name==="exponential")Se=ps(O,M.base,Y,ue);else if(M.name==="linear")Se=ps(O,1,Y,ue);else if(M.name==="cubic-bezier"){var Pe=M.controlPoints;Se=new d(Pe[0],Pe[1],Pe[2],Pe[3]).solve(ps(O,1,Y,ue))}return Se},Si.parse=function(M,O){var Y=M[0],ue=M[1],Se=M[2],Pe=M.slice(3);if(!Array.isArray(ue)||ue.length===0)return O.error("Expected an interpolation type expression.",1);if(ue[0]==="linear")ue={name:"linear"};else if(ue[0]==="exponential"){var Ne=ue[1];if(typeof Ne!="number")return O.error("Exponential interpolation requires a numeric base.",1,1);ue={name:"exponential",base:Ne}}else{if(ue[0]!=="cubic-bezier")return O.error("Unknown interpolation type "+String(ue[0]),1,0);var Je=ue.slice(1);if(Je.length!==4||Je.some(function(wn){return typeof wn!="number"||wn<0||wn>1}))return O.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ue={name:"cubic-bezier",controlPoints:Je}}if(M.length-1<4)return O.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return O.error("Expected an even number of arguments.");if(!(Se=O.parse(Se,2,ut)))return null;var it=[],yt=null;Y==="interpolate-hcl"||Y==="interpolate-lab"?yt=It:O.expectedType&&O.expectedType.kind!=="value"&&(yt=O.expectedType);for(var _t=0;_t<Pe.length;_t+=2){var Pt=Pe[_t],Nt=Pe[_t+1],Dt=_t+3,Qt=_t+4;if(typeof Pt!="number")return O.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Dt);if(it.length&&it[it.length-1][0]>=Pt)return O.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Dt);var rn=O.parse(Nt,Qt,yt);if(!rn)return null;yt=yt||rn.type,it.push([Pt,rn])}return yt.kind==="number"||yt.kind==="color"||yt.kind==="array"&&yt.itemType.kind==="number"&&typeof yt.N=="number"?new Si(yt,Y,ue,Se,it):O.error("Type "+fn(yt)+" is not interpolatable.")},Si.prototype.evaluate=function(M){var O=this.labels,Y=this.outputs;if(O.length===1)return Y[0].evaluate(M);var ue=this.input.evaluate(M);if(ue<=O[0])return Y[0].evaluate(M);var Se=O.length;if(ue>=O[Se-1])return Y[Se-1].evaluate(M);var Pe=ur(O,ue),Ne=O[Pe],Je=O[Pe+1],it=Si.interpolationFactor(this.interpolation,ue,Ne,Je),yt=Y[Pe].evaluate(M),_t=Y[Pe+1].evaluate(M);return this.operator==="interpolate"?pr[this.type.kind.toLowerCase()](yt,_t,it):this.operator==="interpolate-hcl"?Bo.reverse(Bo.interpolate(Bo.forward(yt),Bo.forward(_t),it)):Fo.reverse(Fo.interpolate(Fo.forward(yt),Fo.forward(_t),it))},Si.prototype.eachChild=function(M){M(this.input);for(var O=0,Y=this.outputs;O<Y.length;O+=1)M(Y[O])},Si.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},Si.prototype.serialize=function(){var M;M=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var O=[this.operator,M,this.input.serialize()],Y=0;Y<this.labels.length;Y++)O.push(this.labels[Y],this.outputs[Y].serialize());return O};var Vr=function(M,O){this.type=M,this.args=O};Vr.parse=function(M,O){if(M.length<2)return O.error("Expectected at least one argument.");var Y=null,ue=O.expectedType;ue&&ue.kind!=="value"&&(Y=ue);for(var Se=[],Pe=0,Ne=M.slice(1);Pe<Ne.length;Pe+=1){var Je=Ne[Pe],it=O.parse(Je,1+Se.length,Y,void 0,{typeAnnotation:"omit"});if(!it)return null;Y=Y||it.type,Se.push(it)}var yt=ue&&Se.some(function(_t){return un(ue,_t.type)});return new Vr(yt?Rt:Y,Se)},Vr.prototype.evaluate=function(M){for(var O,Y=null,ue=0,Se=0,Pe=this.args;Se<Pe.length&&(ue++,(Y=Pe[Se].evaluate(M))&&Y instanceof Tn&&!Y.available&&(O||(O=Y.name),Y=null,ue===this.args.length&&(Y=O)),Y===null);Se+=1);return Y},Vr.prototype.eachChild=function(M){this.args.forEach(M)},Vr.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},Vr.prototype.serialize=function(){var M=["coalesce"];return this.eachChild(function(O){M.push(O.serialize())}),M};var Za=function(M,O){this.type=O.type,this.bindings=[].concat(M),this.result=O};Za.prototype.evaluate=function(M){return this.result.evaluate(M)},Za.prototype.eachChild=function(M){for(var O=0,Y=this.bindings;O<Y.length;O+=1)M(Y[O][1]);M(this.result)},Za.parse=function(M,O){if(M.length<4)return O.error("Expected at least 3 arguments, but found "+(M.length-1)+" instead.");for(var Y=[],ue=1;ue<M.length-1;ue+=2){var Se=M[ue];if(typeof Se!="string")return O.error("Expected string, but found "+typeof Se+" instead.",ue);if(/[^a-zA-Z0-9_]/.test(Se))return O.error("Variable names must contain only alphanumeric characters or '_'.",ue);var Pe=O.parse(M[ue+1],ue+1);if(!Pe)return null;Y.push([Se,Pe])}var Ne=O.parse(M[M.length-1],M.length-1,O.expectedType,Y);return Ne?new Za(Y,Ne):null},Za.prototype.outputDefined=function(){return this.result.outputDefined()},Za.prototype.serialize=function(){for(var M=["let"],O=0,Y=this.bindings;O<Y.length;O+=1){var ue=Y[O],Se=ue[0],Pe=ue[1];M.push(Se,Pe.serialize())}return M.push(this.result.serialize()),M};var ba=function(M,O,Y){this.type=M,this.index=O,this.input=Y};ba.parse=function(M,O){if(M.length!==3)return O.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var Y=O.parse(M[1],1,ut),ue=O.parse(M[2],2,jt(O.expectedType||Rt));if(!Y||!ue)return null;var Se=ue.type;return new ba(Se.itemType,Y,ue)},ba.prototype.evaluate=function(M){var O=this.index.evaluate(M),Y=this.input.evaluate(M);if(O<0)throw new Gn("Array index out of bounds: "+O+" < 0.");if(O>=Y.length)throw new Gn("Array index out of bounds: "+O+" > "+(Y.length-1)+".");if(O!==Math.floor(O))throw new Gn("Array index must be an integer, but found "+O+" instead.");return Y[O]},ba.prototype.eachChild=function(M){M(this.index),M(this.input)},ba.prototype.outputDefined=function(){return!1},ba.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var to=function(M,O){this.type=bt,this.needle=M,this.haystack=O};to.parse=function(M,O){if(M.length!==3)return O.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var Y=O.parse(M[1],1,Rt),ue=O.parse(M[2],2,Rt);return Y&&ue?Ht(Y.type,[bt,ft,ut,kt,Rt])?new to(Y,ue):O.error("Expected first argument to be of type boolean, string, number or null, but found "+fn(Y.type)+" instead"):null},to.prototype.evaluate=function(M){var O=this.needle.evaluate(M),Y=this.haystack.evaluate(M);if(!Y)return!1;if(!nn(O,["boolean","string","number","null"]))throw new Gn("Expected first argument to be of type boolean, string, number or null, but found "+fn($n(O))+" instead.");if(!nn(Y,["string","array"]))throw new Gn("Expected second argument to be of type array or string, but found "+fn($n(Y))+" instead.");return Y.indexOf(O)>=0},to.prototype.eachChild=function(M){M(this.needle),M(this.haystack)},to.prototype.outputDefined=function(){return!0},to.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ia=function(M,O,Y){this.type=ut,this.needle=M,this.haystack=O,this.fromIndex=Y};Ia.parse=function(M,O){if(M.length<=2||M.length>=5)return O.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var Y=O.parse(M[1],1,Rt),ue=O.parse(M[2],2,Rt);if(!Y||!ue)return null;if(!Ht(Y.type,[bt,ft,ut,kt,Rt]))return O.error("Expected first argument to be of type boolean, string, number or null, but found "+fn(Y.type)+" instead");if(M.length===4){var Se=O.parse(M[3],3,ut);return Se?new Ia(Y,ue,Se):null}return new Ia(Y,ue)},Ia.prototype.evaluate=function(M){var O=this.needle.evaluate(M),Y=this.haystack.evaluate(M);if(!nn(O,["boolean","string","number","null"]))throw new Gn("Expected first argument to be of type boolean, string, number or null, but found "+fn($n(O))+" instead.");if(!nn(Y,["string","array"]))throw new Gn("Expected second argument to be of type array or string, but found "+fn($n(Y))+" instead.");if(this.fromIndex){var ue=this.fromIndex.evaluate(M);return Y.indexOf(O,ue)}return Y.indexOf(O)},Ia.prototype.eachChild=function(M){M(this.needle),M(this.haystack),this.fromIndex&&M(this.fromIndex)},Ia.prototype.outputDefined=function(){return!1},Ia.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var M=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),M]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var mo=function(M,O,Y,ue,Se,Pe){this.inputType=M,this.type=O,this.input=Y,this.cases=ue,this.outputs=Se,this.otherwise=Pe};mo.parse=function(M,O){if(M.length<5)return O.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if(M.length%2!=1)return O.error("Expected an even number of arguments.");var Y,ue;O.expectedType&&O.expectedType.kind!=="value"&&(ue=O.expectedType);for(var Se={},Pe=[],Ne=2;Ne<M.length-1;Ne+=2){var Je=M[Ne],it=M[Ne+1];Array.isArray(Je)||(Je=[Je]);var yt=O.concat(Ne);if(Je.length===0)return yt.error("Expected at least one branch label.");for(var _t=0,Pt=Je;_t<Pt.length;_t+=1){var Nt=Pt[_t];if(typeof Nt!="number"&&typeof Nt!="string")return yt.error("Branch labels must be numbers or strings.");if(typeof Nt=="number"&&Math.abs(Nt)>Number.MAX_SAFE_INTEGER)return yt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Nt=="number"&&Math.floor(Nt)!==Nt)return yt.error("Numeric branch labels must be integer values.");if(Y){if(yt.checkSubtype(Y,$n(Nt)))return null}else Y=$n(Nt);if(Se[String(Nt)]!==void 0)return yt.error("Branch labels must be unique.");Se[String(Nt)]=Pe.length}var Dt=O.parse(it,Ne,ue);if(!Dt)return null;ue=ue||Dt.type,Pe.push(Dt)}var Qt=O.parse(M[1],1,Rt);if(!Qt)return null;var rn=O.parse(M[M.length-1],M.length-1,ue);return rn?Qt.type.kind!=="value"&&O.concat(1).checkSubtype(Y,Qt.type)?null:new mo(Y,ue,Qt,Se,Pe,rn):null},mo.prototype.evaluate=function(M){var O=this.input.evaluate(M);return($n(O)===this.inputType&&this.outputs[this.cases[O]]||this.otherwise).evaluate(M)},mo.prototype.eachChild=function(M){M(this.input),this.outputs.forEach(M),M(this.otherwise)},mo.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})&&this.otherwise.outputDefined()},mo.prototype.serialize=function(){for(var M=this,O=["match",this.input.serialize()],Y=[],ue={},Se=0,Pe=Object.keys(this.cases).sort();Se<Pe.length;Se+=1){var Ne=Pe[Se];(Pt=ue[this.cases[Ne]])===void 0?(ue[this.cases[Ne]]=Y.length,Y.push([this.cases[Ne],[Ne]])):Y[Pt][1].push(Ne)}for(var Je=function(Dt){return M.inputType.kind==="number"?Number(Dt):Dt},it=0,yt=Y;it<yt.length;it+=1){var _t=yt[it],Pt=_t[0],Nt=_t[1];Nt.length===1?O.push(Je(Nt[0])):O.push(Nt.map(Je)),O.push(this.outputs[outputIndex$1].serialize())}return O.push(this.otherwise.serialize()),O};var no=function(M,O,Y){this.type=M,this.branches=O,this.otherwise=Y};no.parse=function(M,O){if(M.length<4)return O.error("Expected at least 3 arguments, but found only "+(M.length-1)+".");if(M.length%2!=0)return O.error("Expected an odd number of arguments.");var Y;O.expectedType&&O.expectedType.kind!=="value"&&(Y=O.expectedType);for(var ue=[],Se=1;Se<M.length-1;Se+=2){var Pe=O.parse(M[Se],Se,bt);if(!Pe)return null;var Ne=O.parse(M[Se+1],Se+1,Y);if(!Ne)return null;ue.push([Pe,Ne]),Y=Y||Ne.type}var Je=O.parse(M[M.length-1],M.length-1,Y);return Je?new no(Y,ue,Je):null},no.prototype.evaluate=function(M){for(var O=0,Y=this.branches;O<Y.length;O+=1){var ue=Y[O],Se=ue[0],Pe=ue[1];if(Se.evaluate(M))return Pe.evaluate(M)}return this.otherwise.evaluate(M)},no.prototype.eachChild=function(M){for(var O=0,Y=this.branches;O<Y.length;O+=1){var ue=Y[O],Se=ue[0],Pe=ue[1];M(Se),M(Pe)}M(this.otherwise)},no.prototype.outputDefined=function(){return this.branches.every(function(M){return M[0],M[1].outputDefined()})&&this.otherwise.outputDefined()},no.prototype.serialize=function(){var M=["case"];return this.eachChild(function(O){M.push(O.serialize())}),M};var ro=function(M,O,Y,ue){this.type=M,this.input=O,this.beginIndex=Y,this.endIndex=ue};function Cs(M,O){return M==="=="||M==="!="?O.kind==="boolean"||O.kind==="string"||O.kind==="number"||O.kind==="null"||O.kind==="value":O.kind==="string"||O.kind==="number"||O.kind==="value"}function rl(M,O,Y,ue){return ue.compare(O,Y)===0}function yo(M,O,Y){var ue=M!=="=="&&M!=="!=";return function(){function Se(Pe,Ne,Je){this.type=bt,this.lhs=Pe,this.rhs=Ne,this.collator=Je,this.hasUntypedArgument=Pe.type.kind==="value"||Ne.type.kind==="value"}return Se.parse=function(Pe,Ne){if(Pe.length!==3&&Pe.length!==4)return Ne.error("Expected two or three arguments.");var Je=Pe[0],it=Ne.parse(Pe[1],1,Rt);if(!it)return null;if(!Cs(Je,it.type))return Ne.concat(1).error('"'+Je+`" comparisons are not supported for type '`+fn(it.type)+"'.");var yt=Ne.parse(Pe[2],2,Rt);if(!yt)return null;if(!Cs(Je,yt.type))return Ne.concat(2).error('"'+Je+`" comparisons are not supported for type '`+fn(yt.type)+"'.");if(it.type.kind!==yt.type.kind&&it.type.kind!=="value"&&yt.type.kind!=="value")return Ne.error("Cannot compare types '"+fn(it.type)+"' and '"+fn(yt.type)+"'.");ue&&(it.type.kind==="value"&&yt.type.kind!=="value"?it=new Bt(yt.type,[it]):it.type.kind!=="value"&&yt.type.kind==="value"&&(yt=new Bt(it.type,[yt])));var _t=null;if(Pe.length===4){if(it.type.kind!=="string"&&yt.type.kind!=="string"&&it.type.kind!=="value"&&yt.type.kind!=="value")return Ne.error("Cannot use collator to compare non-string types.");if(!(_t=Ne.parse(Pe[3],3,Jt)))return null}return new Se(it,yt,_t)},Se.prototype.evaluate=function(Pe){var Ne=this.lhs.evaluate(Pe),Je=this.rhs.evaluate(Pe);if(ue&&this.hasUntypedArgument){var it=$n(Ne),yt=$n(Je);if(it.kind!==yt.kind||it.kind!=="string"&&it.kind!=="number")throw new Gn('Expected arguments for "'+M+'" to be (string, string) or (number, number), but found ('+it.kind+", "+yt.kind+") instead.")}if(this.collator&&!ue&&this.hasUntypedArgument){var _t=$n(Ne),Pt=$n(Je);if(_t.kind!=="string"||Pt.kind!=="string")return O(Pe,Ne,Je)}return this.collator?Y(Pe,Ne,Je,this.collator.evaluate(Pe)):O(Pe,Ne,Je)},Se.prototype.eachChild=function(Pe){Pe(this.lhs),Pe(this.rhs),this.collator&&Pe(this.collator)},Se.prototype.outputDefined=function(){return!0},Se.prototype.serialize=function(){var Pe=[M];return this.eachChild(function(Ne){Pe.push(Ne.serialize())}),Pe},Se}()}ro.parse=function(M,O){if(M.length<=2||M.length>=5)return O.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var Y=O.parse(M[1],1,Rt),ue=O.parse(M[2],2,ut);if(!Y||!ue)return null;if(!Ht(Y.type,[jt(Rt),ft,Rt]))return O.error("Expected first argument to be of type array or string, but found "+fn(Y.type)+" instead");if(M.length===4){var Se=O.parse(M[3],3,ut);return Se?new ro(Y.type,Y,ue,Se):null}return new ro(Y.type,Y,ue)},ro.prototype.evaluate=function(M){var O=this.input.evaluate(M),Y=this.beginIndex.evaluate(M);if(!nn(O,["string","array"]))throw new Gn("Expected first argument to be of type array or string, but found "+fn($n(O))+" instead.");if(this.endIndex){var ue=this.endIndex.evaluate(M);return O.slice(Y,ue)}return O.slice(Y)},ro.prototype.eachChild=function(M){M(this.input),M(this.beginIndex),this.endIndex&&M(this.endIndex)},ro.prototype.outputDefined=function(){return!1},ro.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var M=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),M]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var il=yo("==",function(M,O,Y){return O===Y},rl),qs=yo("!=",function(M,O,Y){return O!==Y},function(M,O,Y,ue){return!rl(0,O,Y,ue)}),al=yo("<",function(M,O,Y){return O<Y},function(M,O,Y,ue){return ue.compare(O,Y)<0}),Gs=yo(">",function(M,O,Y){return O>Y},function(M,O,Y,ue){return ue.compare(O,Y)>0}),ol=yo("<=",function(M,O,Y){return O<=Y},function(M,O,Y,ue){return ue.compare(O,Y)<=0}),es=yo(">=",function(M,O,Y){return O>=Y},function(M,O,Y,ue){return ue.compare(O,Y)>=0}),xo=function(M,O,Y,ue,Se){this.type=ft,this.number=M,this.locale=O,this.currency=Y,this.minFractionDigits=ue,this.maxFractionDigits=Se};xo.parse=function(M,O){if(M.length!==3)return O.error("Expected two arguments.");var Y=O.parse(M[1],1,ut);if(!Y)return null;var ue=M[2];if(typeof ue!="object"||Array.isArray(ue))return O.error("NumberFormat options argument must be an object.");var Se=null;if(ue.locale&&!(Se=O.parse(ue.locale,1,ft)))return null;var Pe=null;if(ue.currency&&!(Pe=O.parse(ue.currency,1,ft)))return null;var Ne=null;if(ue["min-fraction-digits"]&&!(Ne=O.parse(ue["min-fraction-digits"],1,ut)))return null;var Je=null;return ue["max-fraction-digits"]&&!(Je=O.parse(ue["max-fraction-digits"],1,ut))?null:new xo(Y,Se,Pe,Ne,Je)},xo.prototype.evaluate=function(M){return new Intl.NumberFormat(this.locale?this.locale.evaluate(M):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(M):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(M):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(M):void 0}).format(this.number.evaluate(M))},xo.prototype.eachChild=function(M){M(this.number),this.locale&&M(this.locale),this.currency&&M(this.currency),this.minFractionDigits&&M(this.minFractionDigits),this.maxFractionDigits&&M(this.maxFractionDigits)},xo.prototype.outputDefined=function(){return!1},xo.prototype.serialize=function(){var M={};return this.locale&&(M.locale=this.locale.serialize()),this.currency&&(M.currency=this.currency.serialize()),this.minFractionDigits&&(M["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(M["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),M]};var No=function(M){this.type=ut,this.input=M};No.parse=function(M,O){if(M.length!==2)return O.error("Expected 1 argument, but found "+(M.length-1)+" instead.");var Y=O.parse(M[1],1);return Y?Y.type.kind!=="array"&&Y.type.kind!=="string"&&Y.type.kind!=="value"?O.error("Expected argument of type string or array, but found "+fn(Y.type)+" instead."):new No(Y):null},No.prototype.evaluate=function(M){var O=this.input.evaluate(M);if(typeof O=="string"||Array.isArray(O))return O.length;throw new Gn("Expected value to be of type string or array, but found "+fn($n(O))+" instead.")},No.prototype.eachChild=function(M){M(this.input)},No.prototype.outputDefined=function(){return!1},No.prototype.serialize=function(){var M=["length"];return this.eachChild(function(O){M.push(O.serialize())}),M};var ts={"==":il,"!=":qs,">":Gs,"<":al,">=":es,"<=":ol,array:Bt,at:ba,boolean:Bt,case:no,coalesce:Vr,collator:Kn,format:tn,image:cn,in:to,"index-of":Ia,interpolate:Si,"interpolate-hcl":Si,"interpolate-lab":Si,length:No,let:Za,literal:Qn,match:mo,number:Bt,"number-format":xo,object:Bt,slice:ro,step:br,string:Bt,"to-boolean":kn,"to-color":kn,"to-number":kn,"to-string":kn,var:er,within:Fn};function Ps(M,O){var Y=O[0],ue=O[1],Se=O[2],Pe=O[3];Y=Y.evaluate(M),ue=ue.evaluate(M),Se=Se.evaluate(M);var Ne=Pe?Pe.evaluate(M):1,Je=Pn(Y,ue,Se,Ne);if(Je)throw new Gn(Je);return new hn(Y/255*Ne,ue/255*Ne,Se/255*Ne,Ne)}function Zs(M,O){return M in O}function Ys(M,O){var Y=O[M];return Y===void 0?null:Y}function Aa(M){return{type:M}}function jo(M){return{result:"success",value:M}}function Ya(M){return{result:"error",value:M}}function io(M){return M["property-type"]==="data-driven"||M["property-type"]==="cross-faded-data-driven"}function sl(M){return!!M.expression&&M.expression.parameters.indexOf("zoom")>-1}function bo(M){return!!M.expression&&M.expression.interpolated}function $r(M){return M instanceof Number?"number":M instanceof String?"string":M instanceof Boolean?"boolean":Array.isArray(M)?"array":M===null?"null":typeof M}function Da(M){return typeof M=="object"&&M!==null&&!Array.isArray(M)}function ds(M){return M}function Ma(M,O){var Y,ue,Se,Pe=O.type==="color",Ne=M.stops&&typeof M.stops[0][0]=="object",Je=Ne||M.property!==void 0,it=Ne||!Je,yt=M.type||(bo(O)?"exponential":"interval");if(Pe&&((M=tt({},M)).stops&&(M.stops=M.stops.map(function(sr){return[sr[0],hn.parse(sr[1])]})),M.default?M.default=hn.parse(M.default):M.default=hn.parse(O.default)),M.colorSpace&&M.colorSpace!=="rgb"&&!Ga[M.colorSpace])throw new Error("Unknown color space: "+M.colorSpace);if(yt==="exponential")Y=ll;else if(yt==="interval")Y=Os;else if(yt==="categorical"){Y=yl,ue=Object.create(null);for(var _t=0,Pt=M.stops;_t<Pt.length;_t+=1){var Nt=Pt[_t];ue[Nt[0]]=Nt[1]}Se=typeof M.stops[0][0]}else{if(yt!=="identity")throw new Error('Unknown function type "'+yt+'"');Y=ul}if(Ne){for(var Dt={},Qt=[],rn=0;rn<M.stops.length;rn++){var wn=M.stops[rn],_n=wn[0].zoom;Dt[_n]===void 0&&(Dt[_n]={zoom:_n,type:M.type,property:M.property,default:M.default,stops:[]},Qt.push(_n)),Dt[_n].stops.push([wn[0].value,wn[1]])}for(var Ln=[],On=0,Nn=Qt;On<Nn.length;On+=1){var qn=Nn[On];Ln.push([Dt[qn].zoom,Ma(Dt[qn],O)])}var Jn={name:"linear"};return{kind:"composite",interpolationType:Jn,interpolationFactor:Si.interpolationFactor.bind(void 0,Jn),zoomStops:Ln.map(function(sr){return sr[0]}),evaluate:function(sr,gr){var _r=sr.zoom;return ll({stops:Ln,base:M.base},O,_r).evaluate(_r,gr)}}}if(it){var hr=yt==="exponential"?{name:"exponential",base:M.base!==void 0?M.base:1}:null;return{kind:"camera",interpolationType:hr,interpolationFactor:Si.interpolationFactor.bind(void 0,hr),zoomStops:M.stops.map(function(sr){return sr[0]}),evaluate:function(sr){var gr=sr.zoom;return Y(M,O,gr,ue,Se)}}}return{kind:"source",evaluate:function(sr,gr){var _r=gr&&gr.properties?gr.properties[M.property]:void 0;return _r===void 0?Uo(M.default,O.default):Y(M,O,_r,ue,Se)}}}function Uo(M,O,Y){return M!==void 0?M:O!==void 0?O:Y!==void 0?Y:void 0}function yl(M,O,Y,ue,Se){return Uo(typeof Y===Se?ue[Y]:void 0,M.default,O.default)}function Os(M,O,Y){if($r(Y)!=="number")return Uo(M.default,O.default);var ue=M.stops.length;if(ue===1||Y<=M.stops[0][0])return M.stops[0][1];if(Y>=M.stops[ue-1][0])return M.stops[ue-1][1];var Se=ur(M.stops.map(function(Pe){return Pe[0]}),Y);return M.stops[Se][1]}function ll(M,O,Y){var ue=M.base!==void 0?M.base:1;if($r(Y)!=="number")return Uo(M.default,O.default);var Se=M.stops.length;if(Se===1||Y<=M.stops[0][0])return M.stops[0][1];if(Y>=M.stops[Se-1][0])return M.stops[Se-1][1];var Pe=ur(M.stops.map(function(Pt){return Pt[0]}),Y),Ne=function(Pt,Nt,Dt,Qt){var rn=Qt-Dt,wn=Pt-Dt;return rn===0?0:Nt===1?wn/rn:(Math.pow(Nt,wn)-1)/(Math.pow(Nt,rn)-1)}(Y,ue,M.stops[Pe][0],M.stops[Pe+1][0]),Je=M.stops[Pe][1],it=M.stops[Pe+1][1],yt=pr[O.type]||ds;if(M.colorSpace&&M.colorSpace!=="rgb"){var _t=Ga[M.colorSpace];yt=function(Pt,Nt){return _t.reverse(_t.interpolate(_t.forward(Pt),_t.forward(Nt),Ne))}}return typeof Je.evaluate=="function"?{evaluate:function(){for(var Pt=[],Nt=arguments.length;Nt--;)Pt[Nt]=arguments[Nt];var Dt=Je.evaluate.apply(void 0,Pt),Qt=it.evaluate.apply(void 0,Pt);if(Dt!==void 0&&Qt!==void 0)return yt(Dt,Qt,Ne)}}:yt(Je,it,Ne)}function ul(M,O,Y){return O.type==="color"?Y=hn.parse(Y):O.type==="formatted"?Y=Cn.fromString(Y.toString()):O.type==="resolvedImage"?Y=Tn.fromString(Y.toString()):$r(Y)===O.type||O.type==="enum"&&O.values[Y]||(Y=void 0),Uo(Y,M.default,O.default)}Dn.register(ts,{error:[{kind:"error"},[ft],function(M,O){var Y=O[0];throw new Gn(Y.evaluate(M))}],typeof:[ft,[Rt],function(M,O){return fn($n(O[0].evaluate(M)))}],"to-rgba":[jt(ut,4),[It],function(M,O){return O[0].evaluate(M).toArray()}],rgb:[It,[ut,ut,ut],Ps],rgba:[It,[ut,ut,ut,ut],Ps],has:{type:bt,overloads:[[[ft],function(M,O){return Zs(O[0].evaluate(M),M.properties())}],[[ft,zt],function(M,O){var Y=O[0],ue=O[1];return Zs(Y.evaluate(M),ue.evaluate(M))}]]},get:{type:Rt,overloads:[[[ft],function(M,O){return Ys(O[0].evaluate(M),M.properties())}],[[ft,zt],function(M,O){var Y=O[0],ue=O[1];return Ys(Y.evaluate(M),ue.evaluate(M))}]]},"feature-state":[Rt,[ft],function(M,O){return Ys(O[0].evaluate(M),M.featureState||{})}],properties:[zt,[],function(M){return M.properties()}],"geometry-type":[ft,[],function(M){return M.geometryType()}],id:[Rt,[],function(M){return M.id()}],zoom:[ut,[],function(M){return M.globals.zoom}],"heatmap-density":[ut,[],function(M){return M.globals.heatmapDensity||0}],"line-progress":[ut,[],function(M){return M.globals.lineProgress||0}],accumulated:[Rt,[],function(M){return M.globals.accumulated===void 0?null:M.globals.accumulated}],"+":[ut,Aa(ut),function(M,O){for(var Y=0,ue=0,Se=O;ue<Se.length;ue+=1)Y+=Se[ue].evaluate(M);return Y}],"*":[ut,Aa(ut),function(M,O){for(var Y=1,ue=0,Se=O;ue<Se.length;ue+=1)Y*=Se[ue].evaluate(M);return Y}],"-":{type:ut,overloads:[[[ut,ut],function(M,O){var Y=O[0],ue=O[1];return Y.evaluate(M)-ue.evaluate(M)}],[[ut],function(M,O){return-O[0].evaluate(M)}]]},"/":[ut,[ut,ut],function(M,O){var Y=O[0],ue=O[1];return Y.evaluate(M)/ue.evaluate(M)}],"%":[ut,[ut,ut],function(M,O){var Y=O[0],ue=O[1];return Y.evaluate(M)%ue.evaluate(M)}],ln2:[ut,[],function(){return Math.LN2}],pi:[ut,[],function(){return Math.PI}],e:[ut,[],function(){return Math.E}],"^":[ut,[ut,ut],function(M,O){var Y=O[0],ue=O[1];return Math.pow(Y.evaluate(M),ue.evaluate(M))}],sqrt:[ut,[ut],function(M,O){var Y=O[0];return Math.sqrt(Y.evaluate(M))}],log10:[ut,[ut],function(M,O){var Y=O[0];return Math.log(Y.evaluate(M))/Math.LN10}],ln:[ut,[ut],function(M,O){var Y=O[0];return Math.log(Y.evaluate(M))}],log2:[ut,[ut],function(M,O){var Y=O[0];return Math.log(Y.evaluate(M))/Math.LN2}],sin:[ut,[ut],function(M,O){var Y=O[0];return Math.sin(Y.evaluate(M))}],cos:[ut,[ut],function(M,O){var Y=O[0];return Math.cos(Y.evaluate(M))}],tan:[ut,[ut],function(M,O){var Y=O[0];return Math.tan(Y.evaluate(M))}],asin:[ut,[ut],function(M,O){var Y=O[0];return Math.asin(Y.evaluate(M))}],acos:[ut,[ut],function(M,O){var Y=O[0];return Math.acos(Y.evaluate(M))}],atan:[ut,[ut],function(M,O){var Y=O[0];return Math.atan(Y.evaluate(M))}],min:[ut,Aa(ut),function(M,O){return Math.min.apply(Math,O.map(function(Y){return Y.evaluate(M)}))}],max:[ut,Aa(ut),function(M,O){return Math.max.apply(Math,O.map(function(Y){return Y.evaluate(M)}))}],abs:[ut,[ut],function(M,O){var Y=O[0];return Math.abs(Y.evaluate(M))}],round:[ut,[ut],function(M,O){var Y=O[0].evaluate(M);return Y<0?-Math.round(-Y):Math.round(Y)}],floor:[ut,[ut],function(M,O){var Y=O[0];return Math.floor(Y.evaluate(M))}],ceil:[ut,[ut],function(M,O){var Y=O[0];return Math.ceil(Y.evaluate(M))}],"filter-==":[bt,[ft,Rt],function(M,O){var Y=O[0],ue=O[1];return M.properties()[Y.value]===ue.value}],"filter-id-==":[bt,[Rt],function(M,O){var Y=O[0];return M.id()===Y.value}],"filter-type-==":[bt,[ft],function(M,O){var Y=O[0];return M.geometryType()===Y.value}],"filter-<":[bt,[ft,Rt],function(M,O){var Y=O[0],ue=O[1],Se=M.properties()[Y.value],Pe=ue.value;return typeof Se==typeof Pe&&Se<Pe}],"filter-id-<":[bt,[Rt],function(M,O){var Y=O[0],ue=M.id(),Se=Y.value;return typeof ue==typeof Se&&ue<Se}],"filter->":[bt,[ft,Rt],function(M,O){var Y=O[0],ue=O[1],Se=M.properties()[Y.value],Pe=ue.value;return typeof Se==typeof Pe&&Se>Pe}],"filter-id->":[bt,[Rt],function(M,O){var Y=O[0],ue=M.id(),Se=Y.value;return typeof ue==typeof Se&&ue>Se}],"filter-<=":[bt,[ft,Rt],function(M,O){var Y=O[0],ue=O[1],Se=M.properties()[Y.value],Pe=ue.value;return typeof Se==typeof Pe&&Se<=Pe}],"filter-id-<=":[bt,[Rt],function(M,O){var Y=O[0],ue=M.id(),Se=Y.value;return typeof ue==typeof Se&&ue<=Se}],"filter->=":[bt,[ft,Rt],function(M,O){var Y=O[0],ue=O[1],Se=M.properties()[Y.value],Pe=ue.value;return typeof Se==typeof Pe&&Se>=Pe}],"filter-id->=":[bt,[Rt],function(M,O){var Y=O[0],ue=M.id(),Se=Y.value;return typeof ue==typeof Se&&ue>=Se}],"filter-has":[bt,[Rt],function(M,O){return O[0].value in M.properties()}],"filter-has-id":[bt,[],function(M){return M.id()!==null&&M.id()!==void 0}],"filter-type-in":[bt,[jt(ft)],function(M,O){return O[0].value.indexOf(M.geometryType())>=0}],"filter-id-in":[bt,[jt(Rt)],function(M,O){return O[0].value.indexOf(M.id())>=0}],"filter-in-small":[bt,[ft,jt(Rt)],function(M,O){var Y=O[0];return O[1].value.indexOf(M.properties()[Y.value])>=0}],"filter-in-large":[bt,[ft,jt(Rt)],function(M,O){var Y=O[0],ue=O[1];return function(Se,Pe,Ne,Je){for(;Ne<=Je;){var it=Ne+Je>>1;if(Pe[it]===Se)return!0;Pe[it]>Se?Je=it-1:Ne=it+1}return!1}(M.properties()[Y.value],ue.value,0,ue.value.length-1)}],all:{type:bt,overloads:[[[bt,bt],function(M,O){var Y=O[0],ue=O[1];return Y.evaluate(M)&&ue.evaluate(M)}],[Aa(bt),function(M,O){for(var Y=0,ue=O;Y<ue.length;Y+=1)if(!ue[Y].evaluate(M))return!1;return!0}]]},any:{type:bt,overloads:[[[bt,bt],function(M,O){var Y=O[0],ue=O[1];return Y.evaluate(M)||ue.evaluate(M)}],[Aa(bt),function(M,O){for(var Y=0,ue=O;Y<ue.length;Y+=1)if(ue[Y].evaluate(M))return!0;return!1}]]},"!":[bt,[bt],function(M,O){return!O[0].evaluate(M)}],"is-supported-script":[bt,[ft],function(M,O){var Y=O[0],ue=M.globals&&M.globals.isSupportedScript;return!ue||ue(Y.evaluate(M))}],upcase:[ft,[ft],function(M,O){return O[0].evaluate(M).toUpperCase()}],downcase:[ft,[ft],function(M,O){return O[0].evaluate(M).toLowerCase()}],concat:[ft,Aa(Rt),function(M,O){return O.map(function(Y){return ar(Y.evaluate(M))}).join("")}],"resolved-locale":[ft,[Jt],function(M,O){return O[0].evaluate(M).resolvedLocale()}]});var gs=function(M,O){this.expression=M,this._warningHistory={},this._evaluator=new In,this._defaultValue=O?function(Y){return Y.type==="color"&&Da(Y.default)?new hn(0,0,0,0):Y.type==="color"?hn.parse(Y.default)||null:Y.default===void 0?null:Y.default}(O):null,this._enumValues=O&&O.type==="enum"?O.values:null};function ns(M){return Array.isArray(M)&&M.length>0&&typeof M[0]=="string"&&M[0]in ts}function vs(M,O){var Y=new tr(ts,[],O?function(Se){var Pe={color:It,string:ft,number:ut,enum:ft,boolean:bt,formatted:qt,resolvedImage:Wt};return Se.type==="array"?jt(Pe[Se.value]||Rt,Se.length):Pe[Se.type]}(O):void 0),ue=Y.parse(M,void 0,void 0,void 0,O&&O.type==="string"?{typeAnnotation:"coerce"}:void 0);return ue?jo(new gs(ue,O)):Ya(Y.errors)}gs.prototype.evaluateWithoutErrorHandling=function(M,O,Y,ue,Se,Pe){return this._evaluator.globals=M,this._evaluator.feature=O,this._evaluator.featureState=Y,this._evaluator.canonical=ue,this._evaluator.availableImages=Se||null,this._evaluator.formattedSection=Pe,this.expression.evaluate(this._evaluator)},gs.prototype.evaluate=function(M,O,Y,ue,Se,Pe){this._evaluator.globals=M,this._evaluator.feature=O||null,this._evaluator.featureState=Y||null,this._evaluator.canonical=ue,this._evaluator.availableImages=Se||null,this._evaluator.formattedSection=Pe||null;try{var Ne=this.expression.evaluate(this._evaluator);if(Ne==null||typeof Ne=="number"&&Ne!=Ne)return this._defaultValue;if(this._enumValues&&!(Ne in this._enumValues))throw new Gn("Expected value to be one of "+Object.keys(this._enumValues).map(function(Je){return JSON.stringify(Je)}).join(", ")+", but found "+JSON.stringify(Ne)+" instead.");return Ne}catch(Je){return this._warningHistory[Je.message]||(this._warningHistory[Je.message]=!0,typeof console<"u"&&console.warn(Je.message)),this._defaultValue}};var _o=function(M,O){this.kind=M,this._styleExpression=O,this.isStateDependent=M!=="constant"&&!Hn(O.expression)};_o.prototype.evaluateWithoutErrorHandling=function(M,O,Y,ue,Se,Pe){return this._styleExpression.evaluateWithoutErrorHandling(M,O,Y,ue,Se,Pe)},_o.prototype.evaluate=function(M,O,Y,ue,Se,Pe){return this._styleExpression.evaluate(M,O,Y,ue,Se,Pe)};var ao=function(M,O,Y,ue){this.kind=M,this.zoomStops=Y,this._styleExpression=O,this.isStateDependent=M!=="camera"&&!Hn(O.expression),this.interpolationType=ue};function wo(M,O){if((M=vs(M,O)).result==="error")return M;var Y=M.value.expression,ue=Xn(Y);if(!ue&&!io(O))return Ya([new vt("","data expressions not supported")]);var Se=nr(Y,["zoom"]);if(!Se&&!sl(O))return Ya([new vt("","zoom expressions not supported")]);var Pe=Is(Y);if(!Pe&&!Se)return Ya([new vt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(Pe instanceof vt)return Ya([Pe]);if(Pe instanceof Si&&!bo(O))return Ya([new vt("",'"interpolate" expressions cannot be used with this property')]);if(!Pe)return jo(new _o(ue?"constant":"source",M.value));var Ne=Pe instanceof Si?Pe.interpolation:void 0;return jo(new ao(ue?"camera":"composite",M.value,Pe.labels,Ne))}ao.prototype.evaluateWithoutErrorHandling=function(M,O,Y,ue,Se,Pe){return this._styleExpression.evaluateWithoutErrorHandling(M,O,Y,ue,Se,Pe)},ao.prototype.evaluate=function(M,O,Y,ue,Se,Pe){return this._styleExpression.evaluate(M,O,Y,ue,Se,Pe)},ao.prototype.interpolationFactor=function(M,O,Y){return this.interpolationType?Si.interpolationFactor(this.interpolationType,M,O,Y):0};var oo=function(M,O){this._parameters=M,this._specification=O,tt(this,Ma(this._parameters,this._specification))};function Is(M){var O=null;if(M instanceof Za)O=Is(M.result);else if(M instanceof Vr)for(var Y=0,ue=M.args;Y<ue.length;Y+=1){var Se=ue[Y];if(O=Is(Se))break}else(M instanceof br||M instanceof Si)&&M.input instanceof Dn&&M.input.name==="zoom"&&(O=M);return O instanceof vt||M.eachChild(function(Pe){var Ne=Is(Pe);Ne instanceof vt?O=Ne:!O&&Ne?O=new vt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):O&&Ne&&O!==Ne&&(O=new vt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),O}function za(M){var O=M.key,Y=M.value,ue=M.valueSpec||{},Se=M.objectElementValidators||{},Pe=M.style,Ne=M.styleSpec,Je=[],it=$r(Y);if(it!=="object")return[new ze(O,Y,"object expected, "+it+" found")];for(var yt in Y){var _t=yt.split(".")[0],Pt=ue[_t]||ue["*"],Nt=void 0;if(Se[_t])Nt=Se[_t];else if(ue[_t])Nt=di;else if(Se["*"])Nt=Se["*"];else{if(!ue["*"]){Je.push(new ze(O,Y[yt],'unknown property "'+yt+'"'));continue}Nt=di}Je=Je.concat(Nt({key:(O&&O+".")+yt,value:Y[yt],valueSpec:Pt,style:Pe,styleSpec:Ne,object:Y,objectKey:yt},Y))}for(var Dt in ue)Se[Dt]||ue[Dt].required&&ue[Dt].default===void 0&&Y[Dt]===void 0&&Je.push(new ze(O,Y,'missing required property "'+Dt+'"'));return Je}function cl(M){var O=M.value,Y=M.valueSpec,ue=M.style,Se=M.styleSpec,Pe=M.key,Ne=M.arrayElementValidator||di;if($r(O)!=="array")return[new ze(Pe,O,"array expected, "+$r(O)+" found")];if(Y.length&&O.length!==Y.length)return[new ze(Pe,O,"array length "+Y.length+" expected, length "+O.length+" found")];if(Y["min-length"]&&O.length<Y["min-length"])return[new ze(Pe,O,"array length at least "+Y["min-length"]+" expected, length "+O.length+" found")];var Je={type:Y.value,values:Y.values};Se.$version<7&&(Je.function=Y.function),$r(Y.value)==="object"&&(Je=Y.value);for(var it=[],yt=0;yt<O.length;yt++)it=it.concat(Ne({array:O,arrayIndex:yt,value:O[yt],valueSpec:Je,style:ue,styleSpec:Se,key:Pe+"["+yt+"]"}));return it}function fl(M){var O=M.key,Y=M.value,ue=M.valueSpec,Se=$r(Y);return Se==="number"&&Y!=Y&&(Se="NaN"),Se!=="number"?[new ze(O,Y,"number expected, "+Se+" found")]:"minimum"in ue&&Y<ue.minimum?[new ze(O,Y,Y+" is less than the minimum value "+ue.minimum)]:"maximum"in ue&&Y>ue.maximum?[new ze(O,Y,Y+" is greater than the maximum value "+ue.maximum)]:[]}function Ds(M){var O,Y,ue,Se=M.valueSpec,Pe=dt(M.value.type),Ne={},Je=Pe!=="categorical"&&M.value.property===void 0,it=!Je,yt=$r(M.value.stops)==="array"&&$r(M.value.stops[0])==="array"&&$r(M.value.stops[0][0])==="object",_t=za({key:M.key,value:M.value,valueSpec:M.styleSpec.function,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{stops:function(Dt){if(Pe==="identity")return[new ze(Dt.key,Dt.value,'identity function may not have a "stops" property')];var Qt=[],rn=Dt.value;return Qt=Qt.concat(cl({key:Dt.key,value:rn,valueSpec:Dt.valueSpec,style:Dt.style,styleSpec:Dt.styleSpec,arrayElementValidator:Pt})),$r(rn)==="array"&&rn.length===0&&Qt.push(new ze(Dt.key,rn,"array must have at least one stop")),Qt},default:function(Dt){return di({key:Dt.key,value:Dt.value,valueSpec:Se,style:Dt.style,styleSpec:Dt.styleSpec})}}});return Pe==="identity"&&Je&&_t.push(new ze(M.key,M.value,'missing required property "property"')),Pe==="identity"||M.value.stops||_t.push(new ze(M.key,M.value,'missing required property "stops"')),Pe==="exponential"&&M.valueSpec.expression&&!bo(M.valueSpec)&&_t.push(new ze(M.key,M.value,"exponential functions not supported")),M.styleSpec.$version>=8&&(it&&!io(M.valueSpec)?_t.push(new ze(M.key,M.value,"property functions not supported")):Je&&!sl(M.valueSpec)&&_t.push(new ze(M.key,M.value,"zoom functions not supported"))),Pe!=="categorical"&&!yt||M.value.property!==void 0||_t.push(new ze(M.key,M.value,'"property" property is required')),_t;function Pt(Dt){var Qt=[],rn=Dt.value,wn=Dt.key;if($r(rn)!=="array")return[new ze(wn,rn,"array expected, "+$r(rn)+" found")];if(rn.length!==2)return[new ze(wn,rn,"array length 2 expected, length "+rn.length+" found")];if(yt){if($r(rn[0])!=="object")return[new ze(wn,rn,"object expected, "+$r(rn[0])+" found")];if(rn[0].zoom===void 0)return[new ze(wn,rn,"object stop key must have zoom")];if(rn[0].value===void 0)return[new ze(wn,rn,"object stop key must have value")];if(ue&&ue>dt(rn[0].zoom))return[new ze(wn,rn[0].zoom,"stop zoom values must appear in ascending order")];dt(rn[0].zoom)!==ue&&(ue=dt(rn[0].zoom),Y=void 0,Ne={}),Qt=Qt.concat(za({key:wn+"[0]",value:rn[0],valueSpec:{zoom:{}},style:Dt.style,styleSpec:Dt.styleSpec,objectElementValidators:{zoom:fl,value:Nt}}))}else Qt=Qt.concat(Nt({key:wn+"[0]",value:rn[0],valueSpec:{},style:Dt.style,styleSpec:Dt.styleSpec},rn));return ns(pt(rn[1]))?Qt.concat([new ze(wn+"[1]",rn[1],"expressions are not allowed in function stops.")]):Qt.concat(di({key:wn+"[1]",value:rn[1],valueSpec:Se,style:Dt.style,styleSpec:Dt.styleSpec}))}function Nt(Dt,Qt){var rn=$r(Dt.value),wn=dt(Dt.value),_n=Dt.value!==null?Dt.value:Qt;if(O){if(rn!==O)return[new ze(Dt.key,_n,rn+" stop domain type must match previous stop domain type "+O)]}else O=rn;if(rn!=="number"&&rn!=="string"&&rn!=="boolean")return[new ze(Dt.key,_n,"stop domain value must be a number, string, or boolean")];if(rn!=="number"&&Pe!=="categorical"){var Ln="number expected, "+rn+" found";return io(Se)&&Pe===void 0&&(Ln+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ze(Dt.key,_n,Ln)]}return Pe!=="categorical"||rn!=="number"||isFinite(wn)&&Math.floor(wn)===wn?Pe!=="categorical"&&rn==="number"&&Y!==void 0&&wn<Y?[new ze(Dt.key,_n,"stop domain values must appear in ascending order")]:(Y=wn,Pe==="categorical"&&wn in Ne?[new ze(Dt.key,_n,"stop domain values must be unique")]:(Ne[wn]=!0,[])):[new ze(Dt.key,_n,"integer expected, found "+wn)]}}function To(M){var O=(M.expressionContext==="property"?wo:vs)(pt(M.value),M.valueSpec);if(O.result==="error")return O.value.map(function(ue){return new ze(""+M.key+ue.key,M.value,ue.message)});var Y=O.value.expression||O.value._styleExpression.expression;if(M.expressionContext==="property"&&M.propertyKey==="text-font"&&!Y.outputDefined())return[new ze(M.key,M.value,'Invalid data expression for "'+M.propertyKey+'". Output values must be contained as literals within the expression.')];if(M.expressionContext==="property"&&M.propertyType==="layout"&&!Hn(Y))return[new ze(M.key,M.value,'"feature-state" data expressions are not supported with layout properties.')];if(M.expressionContext==="filter"&&!Hn(Y))return[new ze(M.key,M.value,'"feature-state" data expressions are not supported with filters.')];if(M.expressionContext&&M.expressionContext.indexOf("cluster")===0){if(!nr(Y,["zoom","feature-state"]))return[new ze(M.key,M.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(M.expressionContext==="cluster-initial"&&!Xn(Y))return[new ze(M.key,M.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function zs(M){var O=M.key,Y=M.value,ue=M.valueSpec,Se=[];return Array.isArray(ue.values)?ue.values.indexOf(dt(Y))===-1&&Se.push(new ze(O,Y,"expected one of ["+ue.values.join(", ")+"], "+JSON.stringify(Y)+" found")):Object.keys(ue.values).indexOf(dt(Y))===-1&&Se.push(new ze(O,Y,"expected one of ["+Object.keys(ue.values).join(", ")+"], "+JSON.stringify(Y)+" found")),Se}function Vo(M){if(M===!0||M===!1)return!0;if(!Array.isArray(M)||M.length===0)return!1;switch(M[0]){case"has":return M.length>=2&&M[1]!=="$id"&&M[1]!=="$type";case"in":return M.length>=3&&(typeof M[1]!="string"||Array.isArray(M[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return M.length!==3||Array.isArray(M[1])||Array.isArray(M[2]);case"any":case"all":for(var O=0,Y=M.slice(1);O<Y.length;O+=1){var ue=Y[O];if(!Vo(ue)&&typeof ue!="boolean")return!1}return!0;default:return!0}}oo.deserialize=function(M){return new oo(M._parameters,M._specification)},oo.serialize=function(M){return{_parameters:M._parameters,_specification:M._specification}};var Ws={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function rs(M){if(M==null)return{filter:function(){return!0},needGeometry:!1};Vo(M)||(M=is(M));var O=vs(M,Ws);if(O.result==="error")throw new Error(O.value.map(function(Y){return Y.key+": "+Y.message}).join(", "));return{filter:function(Y,ue,Se){return O.value.evaluate(Y,ue,{},Se)},needGeometry:ms(M)}}function Ho(M,O){return M<O?-1:M>O?1:0}function ms(M){if(!Array.isArray(M))return!1;if(M[0]==="within")return!0;for(var O=1;O<M.length;O++)if(ms(M[O]))return!0;return!1}function is(M){if(!M)return!0;var O,Y=M[0];return M.length<=1?Y!=="any":Y==="=="?Qr(M[1],M[2],"=="):Y==="!="?Ni(Qr(M[1],M[2],"==")):Y==="<"||Y===">"||Y==="<="||Y===">="?Qr(M[1],M[2],Y):Y==="any"?(O=M.slice(1),["any"].concat(O.map(is))):Y==="all"?["all"].concat(M.slice(1).map(is)):Y==="none"?["all"].concat(M.slice(1).map(is).map(Ni)):Y==="in"?ko(M[1],M.slice(2)):Y==="!in"?Ni(ko(M[1],M.slice(2))):Y==="has"?so(M[1]):Y==="!has"?Ni(so(M[1])):Y!=="within"||M}function Qr(M,O,Y){switch(M){case"$type":return["filter-type-"+Y,O];case"$id":return["filter-id-"+Y,O];default:return["filter-"+Y,M,O]}}function ko(M,O){if(O.length===0)return!1;switch(M){case"$type":return["filter-type-in",["literal",O]];case"$id":return["filter-id-in",["literal",O]];default:return O.length>200&&!O.some(function(Y){return typeof Y!=typeof O[0]})?["filter-in-large",M,["literal",O.sort(Ho)]]:["filter-in-small",M,["literal",O]]}}function so(M){switch(M){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",M]}}function Ni(M){return["!",M]}function Nr(M){return Vo(pt(M.value))?To(tt({},M,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Hr(M)}function Hr(M){var O=M.value,Y=M.key;if($r(O)!=="array")return[new ze(Y,O,"array expected, "+$r(O)+" found")];var ue,Se=M.styleSpec,Pe=[];if(O.length<1)return[new ze(Y,O,"filter array must have at least 1 element")];switch(Pe=Pe.concat(zs({key:Y+"[0]",value:O[0],valueSpec:Se.filter_operator,style:M.style,styleSpec:M.styleSpec})),dt(O[0])){case"<":case"<=":case">":case">=":O.length>=2&&dt(O[1])==="$type"&&Pe.push(new ze(Y,O,'"$type" cannot be use with operator "'+O[0]+'"'));case"==":case"!=":O.length!==3&&Pe.push(new ze(Y,O,'filter array for operator "'+O[0]+'" must have 3 elements'));case"in":case"!in":O.length>=2&&(ue=$r(O[1]))!=="string"&&Pe.push(new ze(Y+"[1]",O[1],"string expected, "+ue+" found"));for(var Ne=2;Ne<O.length;Ne++)ue=$r(O[Ne]),dt(O[1])==="$type"?Pe=Pe.concat(zs({key:Y+"["+Ne+"]",value:O[Ne],valueSpec:Se.geometry_type,style:M.style,styleSpec:M.styleSpec})):ue!=="string"&&ue!=="number"&&ue!=="boolean"&&Pe.push(new ze(Y+"["+Ne+"]",O[Ne],"string, number, or boolean expected, "+ue+" found"));break;case"any":case"all":case"none":for(var Je=1;Je<O.length;Je++)Pe=Pe.concat(Hr({key:Y+"["+Je+"]",value:O[Je],style:M.style,styleSpec:M.styleSpec}));break;case"has":case"!has":ue=$r(O[1]),O.length!==2?Pe.push(new ze(Y,O,'filter array for "'+O[0]+'" operator must have 2 elements')):ue!=="string"&&Pe.push(new ze(Y+"[1]",O[1],"string expected, "+ue+" found"));break;case"within":ue=$r(O[1]),O.length!==2?Pe.push(new ze(Y,O,'filter array for "'+O[0]+'" operator must have 2 elements')):ue!=="object"&&Pe.push(new ze(Y+"[1]",O[1],"object expected, "+ue+" found"))}return Pe}function Ao(M,O){var Y=M.key,ue=M.style,Se=M.styleSpec,Pe=M.value,Ne=M.objectKey,Je=Se[O+"_"+M.layerType];if(!Je)return[];var it=Ne.match(/^(.*)-transition$/);if(O==="paint"&&it&&Je[it[1]]&&Je[it[1]].transition)return di({key:Y,value:Pe,valueSpec:Se.transition,style:ue,styleSpec:Se});var yt,_t=M.valueSpec||Je[Ne];if(!_t)return[new ze(Y,Pe,'unknown property "'+Ne+'"')];if($r(Pe)==="string"&&io(_t)&&!_t.tokens&&(yt=/^{([^}]+)}$/.exec(Pe)))return[new ze(Y,Pe,'"'+Ne+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(yt[1])+" }`.")];var Pt=[];return M.layerType==="symbol"&&(Ne==="text-field"&&ue&&!ue.glyphs&&Pt.push(new ze(Y,Pe,'use of "text-field" requires a style "glyphs" property')),Ne==="text-font"&&Da(pt(Pe))&&dt(Pe.type)==="identity"&&Pt.push(new ze(Y,Pe,'"text-font" does not support identity functions'))),Pt.concat(di({key:M.key,value:Pe,valueSpec:_t,style:ue,styleSpec:Se,expressionContext:"property",propertyType:O,propertyKey:Ne}))}function lo(M){return Ao(M,"paint")}function Xs(M){return Ao(M,"layout")}function ys(M){var O=[],Y=M.value,ue=M.key,Se=M.style,Pe=M.styleSpec;Y.type||Y.ref||O.push(new ze(ue,Y,'either "type" or "ref" is required'));var Ne,Je=dt(Y.type),it=dt(Y.ref);if(Y.id)for(var yt=dt(Y.id),_t=0;_t<M.arrayIndex;_t++){var Pt=Se.layers[_t];dt(Pt.id)===yt&&O.push(new ze(ue,Y.id,'duplicate layer id "'+Y.id+'", previously used at line '+Pt.id.__line__))}if("ref"in Y)["type","source","source-layer","filter","layout"].forEach(function(Qt){Qt in Y&&O.push(new ze(ue,Y[Qt],'"'+Qt+'" is prohibited for ref layers'))}),Se.layers.forEach(function(Qt){dt(Qt.id)===it&&(Ne=Qt)}),Ne?Ne.ref?O.push(new ze(ue,Y.ref,"ref cannot reference another ref layer")):Je=dt(Ne.type):O.push(new ze(ue,Y.ref,'ref layer "'+it+'" not found'));else if(Je!=="background")if(Y.source){var Nt=Se.sources&&Se.sources[Y.source],Dt=Nt&&dt(Nt.type);Nt?Dt==="vector"&&Je==="raster"?O.push(new ze(ue,Y.source,'layer "'+Y.id+'" requires a raster source')):Dt==="raster"&&Je!=="raster"?O.push(new ze(ue,Y.source,'layer "'+Y.id+'" requires a vector source')):Dt!=="vector"||Y["source-layer"]?Dt==="raster-dem"&&Je!=="hillshade"?O.push(new ze(ue,Y.source,"raster-dem source can only be used with layer type 'hillshade'.")):Je!=="line"||!Y.paint||!Y.paint["line-gradient"]||Dt==="geojson"&&Nt.lineMetrics||O.push(new ze(ue,Y,'layer "'+Y.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):O.push(new ze(ue,Y,'layer "'+Y.id+'" must specify a "source-layer"')):O.push(new ze(ue,Y.source,'source "'+Y.source+'" not found'))}else O.push(new ze(ue,Y,'missing required property "source"'));return O=O.concat(za({key:ue,value:Y,valueSpec:Pe.layer,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return di({key:ue+".type",value:Y.type,valueSpec:Pe.layer.type,style:M.style,styleSpec:M.styleSpec,object:Y,objectKey:"type"})},filter:Nr,layout:function(Qt){return za({layer:Y,key:Qt.key,value:Qt.value,style:Qt.style,styleSpec:Qt.styleSpec,objectElementValidators:{"*":function(rn){return Xs(tt({layerType:Je},rn))}}})},paint:function(Qt){return za({layer:Y,key:Qt.key,value:Qt.value,style:Qt.style,styleSpec:Qt.styleSpec,objectElementValidators:{"*":function(rn){return lo(tt({layerType:Je},rn))}}})}}})),O}function Mo(M){var O=M.value,Y=M.key,ue=$r(O);return ue!=="string"?[new ze(Y,O,"string expected, "+ue+" found")]:[]}var xs={promoteId:function(M){var O=M.key,Y=M.value;if($r(Y)==="string")return Mo({key:O,value:Y});var ue=[];for(var Se in Y)ue.push.apply(ue,Mo({key:O+"."+Se,value:Y[Se]}));return ue}};function uo(M){var O=M.value,Y=M.key,ue=M.styleSpec,Se=M.style;if(!O.type)return[new ze(Y,O,'"type" is required')];var Pe,Ne=dt(O.type);switch(Ne){case"vector":case"raster":case"raster-dem":return za({key:Y,value:O,valueSpec:ue["source_"+Ne.replace("-","_")],style:M.style,styleSpec:ue,objectElementValidators:xs});case"geojson":if(Pe=za({key:Y,value:O,valueSpec:ue.source_geojson,style:Se,styleSpec:ue,objectElementValidators:xs}),O.cluster)for(var Je in O.clusterProperties){var it=O.clusterProperties[Je],yt=it[0],_t=it[1],Pt=typeof yt=="string"?[yt,["accumulated"],["get",Je]]:yt;Pe.push.apply(Pe,To({key:Y+"."+Je+".map",value:_t,expressionContext:"cluster-map"})),Pe.push.apply(Pe,To({key:Y+"."+Je+".reduce",value:Pt,expressionContext:"cluster-reduce"}))}return Pe;case"video":return za({key:Y,value:O,valueSpec:ue.source_video,style:Se,styleSpec:ue});case"image":return za({key:Y,value:O,valueSpec:ue.source_image,style:Se,styleSpec:ue});case"canvas":return[new ze(Y,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return zs({key:Y+".type",value:O.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:Se,styleSpec:ue})}}function qo(M){var O=M.value,Y=M.styleSpec,ue=Y.light,Se=M.style,Pe=[],Ne=$r(O);if(O===void 0)return Pe;if(Ne!=="object")return Pe.concat([new ze("light",O,"object expected, "+Ne+" found")]);for(var Je in O){var it=Je.match(/^(.*)-transition$/);Pe=it&&ue[it[1]]&&ue[it[1]].transition?Pe.concat(di({key:Je,value:O[Je],valueSpec:Y.transition,style:Se,styleSpec:Y})):ue[Je]?Pe.concat(di({key:Je,value:O[Je],valueSpec:ue[Je],style:Se,styleSpec:Y})):Pe.concat([new ze(Je,O[Je],'unknown property "'+Je+'"')])}return Pe}var So={"*":function(){return[]},array:cl,boolean:function(M){var O=M.value,Y=M.key,ue=$r(O);return ue!=="boolean"?[new ze(Y,O,"boolean expected, "+ue+" found")]:[]},number:fl,color:function(M){var O=M.key,Y=M.value,ue=$r(Y);return ue!=="string"?[new ze(O,Y,"color expected, "+ue+" found")]:on(Y)===null?[new ze(O,Y,'color expected, "'+Y+'" found')]:[]},constants:et,enum:zs,filter:Nr,function:Ds,layer:ys,object:za,source:uo,light:qo,string:Mo,formatted:function(M){return Mo(M).length===0?[]:To(M)},resolvedImage:function(M){return Mo(M).length===0?[]:To(M)}};function di(M){var O=M.value,Y=M.valueSpec,ue=M.styleSpec;return Y.expression&&Da(dt(O))?Ds(M):Y.expression&&ns(pt(O))?To(M):Y.type&&So[Y.type]?So[Y.type](M):za(tt({},M,{valueSpec:Y.type?ue[Y.type]:Y}))}function Go(M){var O=M.value,Y=M.key,ue=Mo(M);return ue.length||(O.indexOf("{fontstack}")===-1&&ue.push(new ze(Y,O,'"glyphs" url must include a "{fontstack}" token')),O.indexOf("{range}")===-1&&ue.push(new ze(Y,O,'"glyphs" url must include a "{range}" token'))),ue}function Zo(M,O){O===void 0&&(O=Ie);var Y=[];return Y=Y.concat(di({key:"",value:M,valueSpec:O.$root,styleSpec:O,style:M,objectElementValidators:{glyphs:Go,"*":function(){return[]}}})),M.constants&&(Y=Y.concat(et({key:"constants",value:M.constants,style:M,styleSpec:O}))),Pi(Y)}function Pi(M){return[].concat(M).sort(function(O,Y){return O.line-Y.line})}function Ji(M){return function(){for(var O=[],Y=arguments.length;Y--;)O[Y]=arguments[Y];return Pi(M.apply(this,O))}}Zo.source=Ji(uo),Zo.light=Ji(qo),Zo.layer=Ji(ys),Zo.filter=Ji(Nr),Zo.paintProperty=Ji(lo),Zo.layoutProperty=Ji(Xs);var Zi=Zo,Oi=Zi.light,ra=Zi.paintProperty,Eo=Zi.layoutProperty;function Ra(M,O){var Y=!1;if(O&&O.length)for(var ue=0,Se=O;ue<Se.length;ue+=1){var Pe=Se[ue];M.fire(new nt(new Error(Pe.message))),Y=!0}return Y}var ji=Sa,_a=3;function Sa(M,O,Y){var ue=this.cells=[];if(M instanceof ArrayBuffer){this.arrayBuffer=M;var Se=new Int32Array(this.arrayBuffer);M=Se[0],O=Se[1],Y=Se[2],this.d=O+2*Y;for(var Pe=0;Pe<this.d*this.d;Pe++){var Ne=Se[_a+Pe],Je=Se[_a+Pe+1];ue.push(Ne===Je?null:Se.subarray(Ne,Je))}var it=Se[_a+ue.length],yt=Se[_a+ue.length+1];this.keys=Se.subarray(it,yt),this.bboxes=Se.subarray(yt),this.insert=this._insertReadonly}else{this.d=O+2*Y;for(var _t=0;_t<this.d*this.d;_t++)ue.push([]);this.keys=[],this.bboxes=[]}this.n=O,this.extent=M,this.padding=Y,this.scale=O/M,this.uid=0;var Pt=Y/O*M;this.min=-Pt,this.max=M+Pt}Sa.prototype.insert=function(M,O,Y,ue,Se){this._forEachCell(O,Y,ue,Se,this._insertCell,this.uid++),this.keys.push(M),this.bboxes.push(O),this.bboxes.push(Y),this.bboxes.push(ue),this.bboxes.push(Se)},Sa.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Sa.prototype._insertCell=function(M,O,Y,ue,Se,Pe){this.cells[Se].push(Pe)},Sa.prototype.query=function(M,O,Y,ue,Se){var Pe=this.min,Ne=this.max;if(M<=Pe&&O<=Pe&&Ne<=Y&&Ne<=ue&&!Se)return Array.prototype.slice.call(this.keys);var Je=[];return this._forEachCell(M,O,Y,ue,this._queryCell,Je,{},Se),Je},Sa.prototype._queryCell=function(M,O,Y,ue,Se,Pe,Ne,Je){var it=this.cells[Se];if(it!==null)for(var yt=this.keys,_t=this.bboxes,Pt=0;Pt<it.length;Pt++){var Nt=it[Pt];if(Ne[Nt]===void 0){var Dt=4*Nt;(Je?Je(_t[Dt+0],_t[Dt+1],_t[Dt+2],_t[Dt+3]):M<=_t[Dt+2]&&O<=_t[Dt+3]&&Y>=_t[Dt+0]&&ue>=_t[Dt+1])?(Ne[Nt]=!0,Pe.push(yt[Nt])):Ne[Nt]=!1}}},Sa.prototype._forEachCell=function(M,O,Y,ue,Se,Pe,Ne,Je){for(var it=this._convertToCellCoord(M),yt=this._convertToCellCoord(O),_t=this._convertToCellCoord(Y),Pt=this._convertToCellCoord(ue),Nt=it;Nt<=_t;Nt++)for(var Dt=yt;Dt<=Pt;Dt++){var Qt=this.d*Dt+Nt;if((!Je||Je(this._convertFromCellCoord(Nt),this._convertFromCellCoord(Dt),this._convertFromCellCoord(Nt+1),this._convertFromCellCoord(Dt+1)))&&Se.call(this,M,O,Y,ue,Qt,Pe,Ne,Je))return}},Sa.prototype._convertFromCellCoord=function(M){return(M-this.padding)/this.scale},Sa.prototype._convertToCellCoord=function(M){return Math.max(0,Math.min(this.d-1,Math.floor(M*this.scale)+this.padding))},Sa.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var M=this.cells,O=_a+this.cells.length+1+1,Y=0,ue=0;ue<this.cells.length;ue++)Y+=this.cells[ue].length;var Se=new Int32Array(O+Y+this.keys.length+this.bboxes.length);Se[0]=this.extent,Se[1]=this.n,Se[2]=this.padding;for(var Pe=O,Ne=0;Ne<M.length;Ne++){var Je=M[Ne];Se[_a+Ne]=Pe,Se.set(Je,Pe),Pe+=Je.length}return Se[_a+M.length]=Pe,Se.set(this.keys,Pe),Pe+=this.keys.length,Se[_a+M.length+1]=Pe,Se.set(this.bboxes,Pe),Pe+=this.bboxes.length,Se.buffer};var Rs=self.ImageData,Ea=self.ImageBitmap,Ui={};function xr(M,O,Y){Y===void 0&&(Y={}),Object.defineProperty(O,"_classRegistryKey",{value:M,writeable:!1}),Ui[M]={klass:O,omit:Y.omit||[],shallow:Y.shallow||[]}}for(var Ki in xr("Object",Object),ji.serialize=function(M,O){var Y=M.toArrayBuffer();return O&&O.push(Y),{buffer:Y}},ji.deserialize=function(M){return new ji(M.buffer)},xr("Grid",ji),xr("Color",hn),xr("Error",Error),xr("ResolvedImage",Tn),xr("StylePropertyFunction",oo),xr("StyleExpression",gs,{omit:["_evaluator"]}),xr("ZoomDependentExpression",ao),xr("ZoomConstantExpression",_o),xr("CompoundExpression",Dn,{omit:["_evaluate"]}),ts)ts[Ki]._classRegistryKey||xr("Expression_"+Ki,ts[Ki]);function bs(M){return M&&typeof ArrayBuffer<"u"&&(M instanceof ArrayBuffer||M.constructor&&M.constructor.name==="ArrayBuffer")}function Fs(M){return Ea&&M instanceof Ea}function Yo(M,O){if(M==null||typeof M=="boolean"||typeof M=="number"||typeof M=="string"||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp)return M;if(bs(M)||Fs(M))return O&&O.push(M),M;if(ArrayBuffer.isView(M)){var Y=M;return O&&O.push(Y.buffer),Y}if(M instanceof Rs)return O&&O.push(M.data.buffer),M;if(Array.isArray(M)){for(var ue=[],Se=0,Pe=M;Se<Pe.length;Se+=1){var Ne=Pe[Se];ue.push(Yo(Ne,O))}return ue}if(typeof M=="object"){var Je=M.constructor,it=Je._classRegistryKey;if(!it)throw new Error("can't serialize object of unregistered class");var yt=Je.serialize?Je.serialize(M,O):{};if(!Je.serialize){for(var _t in M)if(M.hasOwnProperty(_t)&&!(Ui[it].omit.indexOf(_t)>=0)){var Pt=M[_t];yt[_t]=Ui[it].shallow.indexOf(_t)>=0?Pt:Yo(Pt,O)}M instanceof Error&&(yt.message=M.message)}if(yt.$name)throw new Error("$name property is reserved for worker serialization logic.");return it!=="Object"&&(yt.$name=it),yt}throw new Error("can't serialize object of type "+typeof M)}function Wo(M){if(M==null||typeof M=="boolean"||typeof M=="number"||typeof M=="string"||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp||bs(M)||Fs(M)||ArrayBuffer.isView(M)||M instanceof Rs)return M;if(Array.isArray(M))return M.map(Wo);if(typeof M=="object"){var O=M.$name||"Object",Y=Ui[O].klass;if(!Y)throw new Error("can't deserialize unregistered class "+O);if(Y.deserialize)return Y.deserialize(M);for(var ue=Object.create(Y.prototype),Se=0,Pe=Object.keys(M);Se<Pe.length;Se+=1){var Ne=Pe[Se];if(Ne!=="$name"){var Je=M[Ne];ue[Ne]=Ui[O].shallow.indexOf(Ne)>=0?Je:Wo(Je)}}return ue}throw new Error("can't deserialize object of type "+typeof M)}var co=function(){this.first=!0};co.prototype.update=function(M,O){var Y=Math.floor(M);return this.first?(this.first=!1,this.lastIntegerZoom=Y,this.lastIntegerZoomTime=0,this.lastZoom=M,this.lastFloorZoom=Y,!0):(this.lastFloorZoom>Y?(this.lastIntegerZoom=Y+1,this.lastIntegerZoomTime=O):this.lastFloorZoom<Y&&(this.lastIntegerZoom=Y,this.lastIntegerZoomTime=O),M!==this.lastZoom&&(this.lastZoom=M,this.lastFloorZoom=Y,!0))};var vr={"Latin-1 Supplement":function(M){return M>=128&&M<=255},Arabic:function(M){return M>=1536&&M<=1791},"Arabic Supplement":function(M){return M>=1872&&M<=1919},"Arabic Extended-A":function(M){return M>=2208&&M<=2303},"Hangul Jamo":function(M){return M>=4352&&M<=4607},"Unified Canadian Aboriginal Syllabics":function(M){return M>=5120&&M<=5759},Khmer:function(M){return M>=6016&&M<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(M){return M>=6320&&M<=6399},"General Punctuation":function(M){return M>=8192&&M<=8303},"Letterlike Symbols":function(M){return M>=8448&&M<=8527},"Number Forms":function(M){return M>=8528&&M<=8591},"Miscellaneous Technical":function(M){return M>=8960&&M<=9215},"Control Pictures":function(M){return M>=9216&&M<=9279},"Optical Character Recognition":function(M){return M>=9280&&M<=9311},"Enclosed Alphanumerics":function(M){return M>=9312&&M<=9471},"Geometric Shapes":function(M){return M>=9632&&M<=9727},"Miscellaneous Symbols":function(M){return M>=9728&&M<=9983},"Miscellaneous Symbols and Arrows":function(M){return M>=11008&&M<=11263},"CJK Radicals Supplement":function(M){return M>=11904&&M<=12031},"Kangxi Radicals":function(M){return M>=12032&&M<=12255},"Ideographic Description Characters":function(M){return M>=12272&&M<=12287},"CJK Symbols and Punctuation":function(M){return M>=12288&&M<=12351},Hiragana:function(M){return M>=12352&&M<=12447},Katakana:function(M){return M>=12448&&M<=12543},Bopomofo:function(M){return M>=12544&&M<=12591},"Hangul Compatibility Jamo":function(M){return M>=12592&&M<=12687},Kanbun:function(M){return M>=12688&&M<=12703},"Bopomofo Extended":function(M){return M>=12704&&M<=12735},"CJK Strokes":function(M){return M>=12736&&M<=12783},"Katakana Phonetic Extensions":function(M){return M>=12784&&M<=12799},"Enclosed CJK Letters and Months":function(M){return M>=12800&&M<=13055},"CJK Compatibility":function(M){return M>=13056&&M<=13311},"CJK Unified Ideographs Extension A":function(M){return M>=13312&&M<=19903},"Yijing Hexagram Symbols":function(M){return M>=19904&&M<=19967},"CJK Unified Ideographs":function(M){return M>=19968&&M<=40959},"Yi Syllables":function(M){return M>=40960&&M<=42127},"Yi Radicals":function(M){return M>=42128&&M<=42191},"Hangul Jamo Extended-A":function(M){return M>=43360&&M<=43391},"Hangul Syllables":function(M){return M>=44032&&M<=55215},"Hangul Jamo Extended-B":function(M){return M>=55216&&M<=55295},"Private Use Area":function(M){return M>=57344&&M<=63743},"CJK Compatibility Ideographs":function(M){return M>=63744&&M<=64255},"Arabic Presentation Forms-A":function(M){return M>=64336&&M<=65023},"Vertical Forms":function(M){return M>=65040&&M<=65055},"CJK Compatibility Forms":function(M){return M>=65072&&M<=65103},"Small Form Variants":function(M){return M>=65104&&M<=65135},"Arabic Presentation Forms-B":function(M){return M>=65136&&M<=65279},"Halfwidth and Fullwidth Forms":function(M){return M>=65280&&M<=65519}};function Fa(M){for(var O=0,Y=M;O<Y.length;O+=1)if(as(Y[O].charCodeAt(0)))return!0;return!1}function as(M){return!(M!==746&&M!==747&&(M<4352||!(vr["Bopomofo Extended"](M)||vr.Bopomofo(M)||vr["CJK Compatibility Forms"](M)&&!(M>=65097&&M<=65103)||vr["CJK Compatibility Ideographs"](M)||vr["CJK Compatibility"](M)||vr["CJK Radicals Supplement"](M)||vr["CJK Strokes"](M)||!(!vr["CJK Symbols and Punctuation"](M)||M>=12296&&M<=12305||M>=12308&&M<=12319||M===12336)||vr["CJK Unified Ideographs Extension A"](M)||vr["CJK Unified Ideographs"](M)||vr["Enclosed CJK Letters and Months"](M)||vr["Hangul Compatibility Jamo"](M)||vr["Hangul Jamo Extended-A"](M)||vr["Hangul Jamo Extended-B"](M)||vr["Hangul Jamo"](M)||vr["Hangul Syllables"](M)||vr.Hiragana(M)||vr["Ideographic Description Characters"](M)||vr.Kanbun(M)||vr["Kangxi Radicals"](M)||vr["Katakana Phonetic Extensions"](M)||vr.Katakana(M)&&M!==12540||!(!vr["Halfwidth and Fullwidth Forms"](M)||M===65288||M===65289||M===65293||M>=65306&&M<=65310||M===65339||M===65341||M===65343||M>=65371&&M<=65503||M===65507||M>=65512&&M<=65519)||!(!vr["Small Form Variants"](M)||M>=65112&&M<=65118||M>=65123&&M<=65126)||vr["Unified Canadian Aboriginal Syllabics"](M)||vr["Unified Canadian Aboriginal Syllabics Extended"](M)||vr["Vertical Forms"](M)||vr["Yijing Hexagram Symbols"](M)||vr["Yi Syllables"](M)||vr["Yi Radicals"](M))))}function _s(M){return!(as(M)||function(O){return!!(vr["Latin-1 Supplement"](O)&&(O===167||O===169||O===174||O===177||O===188||O===189||O===190||O===215||O===247)||vr["General Punctuation"](O)&&(O===8214||O===8224||O===8225||O===8240||O===8241||O===8251||O===8252||O===8258||O===8263||O===8264||O===8265||O===8273)||vr["Letterlike Symbols"](O)||vr["Number Forms"](O)||vr["Miscellaneous Technical"](O)&&(O>=8960&&O<=8967||O>=8972&&O<=8991||O>=8996&&O<=9e3||O===9003||O>=9085&&O<=9114||O>=9150&&O<=9165||O===9167||O>=9169&&O<=9179||O>=9186&&O<=9215)||vr["Control Pictures"](O)&&O!==9251||vr["Optical Character Recognition"](O)||vr["Enclosed Alphanumerics"](O)||vr["Geometric Shapes"](O)||vr["Miscellaneous Symbols"](O)&&!(O>=9754&&O<=9759)||vr["Miscellaneous Symbols and Arrows"](O)&&(O>=11026&&O<=11055||O>=11088&&O<=11097||O>=11192&&O<=11243)||vr["CJK Symbols and Punctuation"](O)||vr.Katakana(O)||vr["Private Use Area"](O)||vr["CJK Compatibility Forms"](O)||vr["Small Form Variants"](O)||vr["Halfwidth and Fullwidth Forms"](O)||O===8734||O===8756||O===8757||O>=9984&&O<=10087||O>=10102&&O<=10131||O===65532||O===65533)}(M))}function $i(M){return vr.Arabic(M)||vr["Arabic Supplement"](M)||vr["Arabic Extended-A"](M)||vr["Arabic Presentation Forms-A"](M)||vr["Arabic Presentation Forms-B"](M)}function Ba(M){return M>=1424&&M<=2303||vr["Arabic Presentation Forms-A"](M)||vr["Arabic Presentation Forms-B"](M)}function La(M,O){return!(!O&&Ba(M)||M>=2304&&M<=3583||M>=3840&&M<=4255||vr.Khmer(M))}function wa(M){for(var O=0,Y=M;O<Y.length;O+=1)if(Ba(Y[O].charCodeAt(0)))return!0;return!1}var Wa="deferred",fo="loading",Ii="loaded",Xo="error",os=null,Vi="unavailable",ei=null,ws=function(M){M&&typeof M=="string"&&M.indexOf("NetworkError")>-1&&(Vi=Xo),os&&os(M)};function pa(){Di.fire(new We("pluginStateChange",{pluginStatus:Vi,pluginURL:ei}))}var Di=new ot,Xa=function(){return Vi},Js=function(){if(Vi!==Wa||!ei)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Vi=fo,pa(),ei&&Tt({url:ei},function(M){M?ws(M):(Vi=Ii,pa())})},_i={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Vi===Ii||_i.applyArabicShaping!=null},isLoading:function(){return Vi===fo},setState:function(M){Vi=M.pluginStatus,ei=M.pluginURL},isParsed:function(){return _i.applyArabicShaping!=null&&_i.processBidirectionalText!=null&&_i.processStyledBidirectionalText!=null},getPluginURL:function(){return ei}},Xr=function(M,O){this.zoom=M,O?(this.now=O.now,this.fadeDuration=O.fadeDuration,this.zoomHistory=O.zoomHistory,this.transition=O.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new co,this.transition={})};Xr.prototype.isSupportedScript=function(M){return function(O,Y){for(var ue=0,Se=O;ue<Se.length;ue+=1)if(!La(Se[ue].charCodeAt(0),Y))return!1;return!0}(M,_i.isLoaded())},Xr.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Xr.prototype.getCrossfadeParameters=function(){var M=this.zoom,O=M-Math.floor(M),Y=this.crossFadingFactor();return M>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:O+(1-O)*Y}:{fromScale:.5,toScale:1,t:1-(1-Y)*O}};var Ta=function(M,O){this.property=M,this.value=O,this.expression=function(Y,ue){if(Da(Y))return new oo(Y,ue);if(ns(Y)){var Se=wo(Y,ue);if(Se.result==="error")throw new Error(Se.value.map(function(Ne){return Ne.key+": "+Ne.message}).join(", "));return Se.value}var Pe=Y;return typeof Y=="string"&&ue.type==="color"&&(Pe=hn.parse(Y)),{kind:"constant",evaluate:function(){return Pe}}}(O===void 0?M.specification.default:O,M.specification)};Ta.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Ta.prototype.possiblyEvaluate=function(M,O,Y){return this.property.possiblyEvaluate(this,M,O,Y)};var Ja=function(M){this.property=M,this.value=new Ta(M,void 0)};Ja.prototype.transitioned=function(M,O){return new Bs(this.property,this.value,O,u({},M.transition,this.transition),M.now)},Ja.prototype.untransitioned=function(){return new Bs(this.property,this.value,null,{},0)};var Na=function(M){this._properties=M,this._values=Object.create(M.defaultTransitionablePropertyValues)};Na.prototype.getValue=function(M){return _(this._values[M].value.value)},Na.prototype.setValue=function(M,O){this._values.hasOwnProperty(M)||(this._values[M]=new Ja(this._values[M].property)),this._values[M].value=new Ta(this._values[M].property,O===null?void 0:_(O))},Na.prototype.getTransition=function(M){return _(this._values[M].transition)},Na.prototype.setTransition=function(M,O){this._values.hasOwnProperty(M)||(this._values[M]=new Ja(this._values[M].property)),this._values[M].transition=_(O)||void 0},Na.prototype.serialize=function(){for(var M={},O=0,Y=Object.keys(this._values);O<Y.length;O+=1){var ue=Y[O],Se=this.getValue(ue);Se!==void 0&&(M[ue]=Se);var Pe=this.getTransition(ue);Pe!==void 0&&(M[ue+"-transition"]=Pe)}return M},Na.prototype.transitioned=function(M,O){for(var Y=new Lo(this._properties),ue=0,Se=Object.keys(this._values);ue<Se.length;ue+=1){var Pe=Se[ue];Y._values[Pe]=this._values[Pe].transitioned(M,O._values[Pe])}return Y},Na.prototype.untransitioned=function(){for(var M=new Lo(this._properties),O=0,Y=Object.keys(this._values);O<Y.length;O+=1){var ue=Y[O];M._values[ue]=this._values[ue].untransitioned()}return M};var Bs=function(M,O,Y,ue,Se){this.property=M,this.value=O,this.begin=Se+ue.delay||0,this.end=this.begin+ue.duration||0,M.specification.transition&&(ue.delay||ue.duration)&&(this.prior=Y)};Bs.prototype.possiblyEvaluate=function(M,O,Y){var ue=M.now||0,Se=this.value.possiblyEvaluate(M,O,Y),Pe=this.prior;if(Pe){if(ue>this.end)return this.prior=null,Se;if(this.value.isDataDriven())return this.prior=null,Se;if(ue<this.begin)return Pe.possiblyEvaluate(M,O,Y);var Ne=(ue-this.begin)/(this.end-this.begin);return this.property.interpolate(Pe.possiblyEvaluate(M,O,Y),Se,function(Je){if(Je<=0)return 0;if(Je>=1)return 1;var it=Je*Je,yt=it*Je;return 4*(Je<.5?yt:3*(Je-it)+yt-.75)}(Ne))}return Se};var Lo=function(M){this._properties=M,this._values=Object.create(M.defaultTransitioningPropertyValues)};Lo.prototype.possiblyEvaluate=function(M,O,Y){for(var ue=new Yi(this._properties),Se=0,Pe=Object.keys(this._values);Se<Pe.length;Se+=1){var Ne=Pe[Se];ue._values[Ne]=this._values[Ne].possiblyEvaluate(M,O,Y)}return ue},Lo.prototype.hasTransition=function(){for(var M=0,O=Object.keys(this._values);M<O.length;M+=1){var Y=O[M];if(this._values[Y].prior)return!0}return!1};var Jo=function(M){this._properties=M,this._values=Object.create(M.defaultPropertyValues)};Jo.prototype.getValue=function(M){return _(this._values[M].value)},Jo.prototype.setValue=function(M,O){this._values[M]=new Ta(this._values[M].property,O===null?void 0:_(O))},Jo.prototype.serialize=function(){for(var M={},O=0,Y=Object.keys(this._values);O<Y.length;O+=1){var ue=Y[O],Se=this.getValue(ue);Se!==void 0&&(M[ue]=Se)}return M},Jo.prototype.possiblyEvaluate=function(M,O,Y){for(var ue=new Yi(this._properties),Se=0,Pe=Object.keys(this._values);Se<Pe.length;Se+=1){var Ne=Pe[Se];ue._values[Ne]=this._values[Ne].possiblyEvaluate(M,O,Y)}return ue};var Ei=function(M,O,Y){this.property=M,this.value=O,this.parameters=Y};Ei.prototype.isConstant=function(){return this.value.kind==="constant"},Ei.prototype.constantOr=function(M){return this.value.kind==="constant"?this.value.value:M},Ei.prototype.evaluate=function(M,O,Y,ue){return this.property.evaluate(this.value,this.parameters,M,O,Y,ue)};var Yi=function(M){this._properties=M,this._values=Object.create(M.defaultPossiblyEvaluatedValues)};Yi.prototype.get=function(M){return this._values[M]};var Tr=function(M){this.specification=M};Tr.prototype.possiblyEvaluate=function(M,O){return M.expression.evaluate(O)},Tr.prototype.interpolate=function(M,O,Y){var ue=pr[this.specification.type];return ue?ue(M,O,Y):M};var Ar=function(M,O){this.specification=M,this.overrides=O};Ar.prototype.possiblyEvaluate=function(M,O,Y,ue){return M.expression.kind==="constant"||M.expression.kind==="camera"?new Ei(this,{kind:"constant",value:M.expression.evaluate(O,null,{},Y,ue)},O):new Ei(this,M.expression,O)},Ar.prototype.interpolate=function(M,O,Y){if(M.value.kind!=="constant"||O.value.kind!=="constant")return M;if(M.value.value===void 0||O.value.value===void 0)return new Ei(this,{kind:"constant",value:void 0},M.parameters);var ue=pr[this.specification.type];return ue?new Ei(this,{kind:"constant",value:ue(M.value.value,O.value.value,Y)},M.parameters):M},Ar.prototype.evaluate=function(M,O,Y,ue,Se,Pe){return M.kind==="constant"?M.value:M.evaluate(O,Y,ue,Se,Pe)};var ss=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.possiblyEvaluate=function(Y,ue,Se,Pe){if(Y.value===void 0)return new Ei(this,{kind:"constant",value:void 0},ue);if(Y.expression.kind==="constant"){var Ne=Y.expression.evaluate(ue,null,{},Se,Pe),Je=Y.property.specification.type==="resolvedImage"&&typeof Ne!="string"?Ne.name:Ne,it=this._calculate(Je,Je,Je,ue);return new Ei(this,{kind:"constant",value:it},ue)}if(Y.expression.kind==="camera"){var yt=this._calculate(Y.expression.evaluate({zoom:ue.zoom-1}),Y.expression.evaluate({zoom:ue.zoom}),Y.expression.evaluate({zoom:ue.zoom+1}),ue);return new Ei(this,{kind:"constant",value:yt},ue)}return new Ei(this,Y.expression,ue)},O.prototype.evaluate=function(Y,ue,Se,Pe,Ne,Je){if(Y.kind==="source"){var it=Y.evaluate(ue,Se,Pe,Ne,Je);return this._calculate(it,it,it,ue)}return Y.kind==="composite"?this._calculate(Y.evaluate({zoom:Math.floor(ue.zoom)-1},Se,Pe),Y.evaluate({zoom:Math.floor(ue.zoom)},Se,Pe),Y.evaluate({zoom:Math.floor(ue.zoom)+1},Se,Pe),ue):Y.value},O.prototype._calculate=function(Y,ue,Se,Pe){return Pe.zoom>Pe.zoomHistory.lastIntegerZoom?{from:Y,to:ue}:{from:Se,to:ue}},O.prototype.interpolate=function(Y){return Y},O}(Ar),ia=function(M){this.specification=M};ia.prototype.possiblyEvaluate=function(M,O,Y,ue){if(M.value!==void 0){if(M.expression.kind==="constant"){var Se=M.expression.evaluate(O,null,{},Y,ue);return this._calculate(Se,Se,Se,O)}return this._calculate(M.expression.evaluate(new Xr(Math.floor(O.zoom-1),O)),M.expression.evaluate(new Xr(Math.floor(O.zoom),O)),M.expression.evaluate(new Xr(Math.floor(O.zoom+1),O)),O)}},ia.prototype._calculate=function(M,O,Y,ue){return ue.zoom>ue.zoomHistory.lastIntegerZoom?{from:M,to:O}:{from:Y,to:O}},ia.prototype.interpolate=function(M){return M};var Co=function(M){this.specification=M};Co.prototype.possiblyEvaluate=function(M,O,Y,ue){return!!M.expression.evaluate(O,null,{},Y,ue)},Co.prototype.interpolate=function(){return!1};var Wi=function(M){for(var O in this.properties=M,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],M){var Y=M[O];Y.specification.overridable&&this.overridableProperties.push(O);var ue=this.defaultPropertyValues[O]=new Ta(Y,void 0),Se=this.defaultTransitionablePropertyValues[O]=new Ja(Y);this.defaultTransitioningPropertyValues[O]=Se.untransitioned(),this.defaultPossiblyEvaluatedValues[O]=ue.possiblyEvaluate({})}};xr("DataDrivenProperty",Ar),xr("DataConstantProperty",Tr),xr("CrossFadedDataDrivenProperty",ss),xr("CrossFadedProperty",ia),xr("ColorRampProperty",Co);var ls="-transition",Xi=function(M){function O(Y,ue){if(M.call(this),this.id=Y.id,this.type=Y.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},Y.type!=="custom"&&(this.metadata=Y.metadata,this.minzoom=Y.minzoom,this.maxzoom=Y.maxzoom,Y.type!=="background"&&(this.source=Y.source,this.sourceLayer=Y["source-layer"],this.filter=Y.filter),ue.layout&&(this._unevaluatedLayout=new Jo(ue.layout)),ue.paint)){for(var Se in this._transitionablePaint=new Na(ue.paint),Y.paint)this.setPaintProperty(Se,Y.paint[Se],{validate:!1});for(var Pe in Y.layout)this.setLayoutProperty(Pe,Y.layout[Pe],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Yi(ue.paint)}}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},O.prototype.getLayoutProperty=function(Y){return Y==="visibility"?this.visibility:this._unevaluatedLayout.getValue(Y)},O.prototype.setLayoutProperty=function(Y,ue,Se){if(Se===void 0&&(Se={}),ue!=null){var Pe="layers."+this.id+".layout."+Y;if(this._validate(Eo,Pe,Y,ue,Se))return}Y!=="visibility"?this._unevaluatedLayout.setValue(Y,ue):this.visibility=ue},O.prototype.getPaintProperty=function(Y){return y(Y,ls)?this._transitionablePaint.getTransition(Y.slice(0,-11)):this._transitionablePaint.getValue(Y)},O.prototype.setPaintProperty=function(Y,ue,Se){if(Se===void 0&&(Se={}),ue!=null){var Pe="layers."+this.id+".paint."+Y;if(this._validate(ra,Pe,Y,ue,Se))return!1}if(y(Y,ls))return this._transitionablePaint.setTransition(Y.slice(0,-11),ue||void 0),!1;var Ne=this._transitionablePaint._values[Y],Je=Ne.property.specification["property-type"]==="cross-faded-data-driven",it=Ne.value.isDataDriven(),yt=Ne.value;this._transitionablePaint.setValue(Y,ue),this._handleSpecialPaintPropertyUpdate(Y);var _t=this._transitionablePaint._values[Y].value;return _t.isDataDriven()||it||Je||this._handleOverridablePaintPropertyUpdate(Y,yt,_t)},O.prototype._handleSpecialPaintPropertyUpdate=function(Y){},O.prototype._handleOverridablePaintPropertyUpdate=function(Y,ue,Se){return!1},O.prototype.isHidden=function(Y){return!!(this.minzoom&&Y<this.minzoom)||!!(this.maxzoom&&Y>=this.maxzoom)||this.visibility==="none"},O.prototype.updateTransitions=function(Y){this._transitioningPaint=this._transitionablePaint.transitioned(Y,this._transitioningPaint)},O.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},O.prototype.recalculate=function(Y,ue){Y.getCrossfadeParameters&&(this._crossfadeParameters=Y.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(Y,void 0,ue)),this.paint=this._transitioningPaint.possiblyEvaluate(Y,void 0,ue)},O.prototype.serialize=function(){var Y={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(Y.layout=Y.layout||{},Y.layout.visibility=this.visibility),m(Y,function(ue,Se){return!(ue===void 0||Se==="layout"&&!Object.keys(ue).length||Se==="paint"&&!Object.keys(ue).length)})},O.prototype._validate=function(Y,ue,Se,Pe,Ne){return Ne===void 0&&(Ne={}),(!Ne||Ne.validate!==!1)&&Ra(this,Y.call(Zi,{key:ue,layerType:this.type,objectKey:Se,value:Pe,styleSpec:Ie,style:{glyphs:!0,sprite:!0}}))},O.prototype.is3D=function(){return!1},O.prototype.isTileClipped=function(){return!1},O.prototype.hasOffscreenPass=function(){return!1},O.prototype.resize=function(){},O.prototype.isStateDependent=function(){for(var Y in this.paint._values){var ue=this.paint.get(Y);if(ue instanceof Ei&&io(ue.property.specification)&&(ue.value.kind==="source"||ue.value.kind==="composite")&&ue.value.isStateDependent)return!0}return!1},O}(ot),Po={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Oo=function(M,O){this._structArray=M,this._pos1=O*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Cr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function zi(M,O){O===void 0&&(O=1);var Y=0,ue=0;return{members:M.map(function(Se){var Pe,Ne=(Pe=Se.type,Po[Pe].BYTES_PER_ELEMENT),Je=Y=Ka(Y,Math.max(O,Ne)),it=Se.components||1;return ue=Math.max(ue,Ne),Y+=Ne*it,{name:Se.name,type:Se.type,components:it,offset:Je}}),size:Ka(Y,Math.max(ue,O)),alignment:O}}function Ka(M,O){return Math.ceil(M/O)*O}Cr.serialize=function(M,O){return M._trim(),O&&(M.isTransferred=!0,O.push(M.arrayBuffer)),{length:M.length,arrayBuffer:M.arrayBuffer}},Cr.deserialize=function(M){var O=Object.create(this.prototype);return O.arrayBuffer=M.arrayBuffer,O.length=M.length,O.capacity=M.arrayBuffer.byteLength/O.bytesPerElement,O._refreshViews(),O},Cr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Cr.prototype.clear=function(){this.length=0},Cr.prototype.resize=function(M){this.reserve(M),this.length=M},Cr.prototype.reserve=function(M){if(M>this.capacity){this.capacity=Math.max(M,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var O=this.uint8;this._refreshViews(),O&&this.uint8.set(O)}},Cr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var da=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Y,ue){var Se=this.length;return this.resize(Se+1),this.emplace(Se,Y,ue)},O.prototype.emplace=function(Y,ue,Se){var Pe=2*Y;return this.int16[Pe+0]=ue,this.int16[Pe+1]=Se,Y},O}(Cr);da.prototype.bytesPerElement=4,xr("StructArrayLayout2i4",da);var Ko=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Y,ue,Se,Pe){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,Y,ue,Se,Pe)},O.prototype.emplace=function(Y,ue,Se,Pe,Ne){var Je=4*Y;return this.int16[Je+0]=ue,this.int16[Je+1]=Se,this.int16[Je+2]=Pe,this.int16[Je+3]=Ne,Y},O}(Cr);Ko.prototype.bytesPerElement=8,xr("StructArrayLayout4i8",Ko);var us=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Y,ue,Se,Pe,Ne,Je){var it=this.length;return this.resize(it+1),this.emplace(it,Y,ue,Se,Pe,Ne,Je)},O.prototype.emplace=function(Y,ue,Se,Pe,Ne,Je,it){var yt=6*Y;return this.int16[yt+0]=ue,this.int16[yt+1]=Se,this.int16[yt+2]=Pe,this.int16[yt+3]=Ne,this.int16[yt+4]=Je,this.int16[yt+5]=it,Y},O}(Cr);us.prototype.bytesPerElement=12,xr("StructArrayLayout2i4i12",us);var $o=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Y,ue,Se,Pe,Ne,Je){var it=this.length;return this.resize(it+1),this.emplace(it,Y,ue,Se,Pe,Ne,Je)},O.prototype.emplace=function(Y,ue,Se,Pe,Ne,Je,it){var yt=4*Y,_t=8*Y;return this.int16[yt+0]=ue,this.int16[yt+1]=Se,this.uint8[_t+4]=Pe,this.uint8[_t+5]=Ne,this.uint8[_t+6]=Je,this.uint8[_t+7]=it,Y},O}(Cr);$o.prototype.bytesPerElement=8,xr("StructArrayLayout2i4ub8",$o);var ho=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Y,ue,Se,Pe,Ne,Je,it,yt,_t,Pt){var Nt=this.length;return this.resize(Nt+1),this.emplace(Nt,Y,ue,Se,Pe,Ne,Je,it,yt,_t,Pt)},O.prototype.emplace=function(Y,ue,Se,Pe,Ne,Je,it,yt,_t,Pt,Nt){var Dt=9*Y,Qt=18*Y;return this.uint16[Dt+0]=ue,this.uint16[Dt+1]=Se,this.uint16[Dt+2]=Pe,this.uint16[Dt+3]=Ne,this.uint16[Dt+4]=Je,this.uint16[Dt+5]=it,this.uint16[Dt+6]=yt,this.uint16[Dt+7]=_t,this.uint8[Qt+16]=Pt,this.uint8[Qt+17]=Nt,Y},O}(Cr);ho.prototype.bytesPerElement=18,xr("StructArrayLayout8ui2ub18",ho);var R=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Y,ue,Se,Pe,Ne,Je,it,yt,_t,Pt,Nt,Dt){var Qt=this.length;return this.resize(Qt+1),this.emplace(Qt,Y,ue,Se,Pe,Ne,Je,it,yt,_t,Pt,Nt,Dt)},O.prototype.emplace=function(Y,ue,Se,Pe,Ne,Je,it,yt,_t,Pt,Nt,Dt,Qt){var rn=12*Y;return this.int16[rn+0]=ue,this.int16[rn+1]=Se,this.int16[rn+2]=Pe,this.int16[rn+3]=Ne,this.uint16[rn+4]=Je,this.uint16[rn+5]=it,this.uint16[rn+6]=yt,this.uint16[rn+7]=_t,this.int16[rn+8]=Pt,this.int16[rn+9]=Nt,this.int16[rn+10]=Dt,this.int16[rn+11]=Qt,Y},O}(Cr);R.prototype.bytesPerElement=24,xr("StructArrayLayout4i4ui4i24",R);var U=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Y,ue,Se){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,Y,ue,Se)},O.prototype.emplace=function(Y,ue,Se,Pe){var Ne=3*Y;return this.float32[Ne+0]=ue,this.float32[Ne+1]=Se,this.float32[Ne+2]=Pe,Y},O}(Cr);U.prototype.bytesPerElement=12,xr("StructArrayLayout3f12",U);var j=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Y){var ue=this.length;return this.resize(ue+1),this.emplace(ue,Y)},O.prototype.emplace=function(Y,ue){var Se=1*Y;return this.uint32[Se+0]=ue,Y},O}(Cr);j.prototype.bytesPerElement=4,xr("StructArrayLayout1ul4",j);var X=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Y,ue,Se,Pe,Ne,Je,it,yt,_t){var Pt=this.length;return this.resize(Pt+1),this.emplace(Pt,Y,ue,Se,Pe,Ne,Je,it,yt,_t)},O.prototype.emplace=function(Y,ue,Se,Pe,Ne,Je,it,yt,_t,Pt){var Nt=10*Y,Dt=5*Y;return this.int16[Nt+0]=ue,this.int16[Nt+1]=Se,this.int16[Nt+2]=Pe,this.int16[Nt+3]=Ne,this.int16[Nt+4]=Je,this.int16[Nt+5]=it,this.uint32[Dt+3]=yt,this.uint16[Nt+8]=_t,this.uint16[Nt+9]=Pt,Y},O}(Cr);X.prototype.bytesPerElement=20,xr("StructArrayLayout6i1ul2ui20",X);var fe=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Y,ue,Se,Pe,Ne,Je){var it=this.length;return this.resize(it+1),this.emplace(it,Y,ue,Se,Pe,Ne,Je)},O.prototype.emplace=function(Y,ue,Se,Pe,Ne,Je,it){var yt=6*Y;return this.int16[yt+0]=ue,this.int16[yt+1]=Se,this.int16[yt+2]=Pe,this.int16[yt+3]=Ne,this.int16[yt+4]=Je,this.int16[yt+5]=it,Y},O}(Cr);fe.prototype.bytesPerElement=12,xr("StructArrayLayout2i2i2i12",fe);var Me=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Y,ue,Se,Pe,Ne){var Je=this.length;return this.resize(Je+1),this.emplace(Je,Y,ue,Se,Pe,Ne)},O.prototype.emplace=function(Y,ue,Se,Pe,Ne,Je){var it=4*Y,yt=8*Y;return this.float32[it+0]=ue,this.float32[it+1]=Se,this.float32[it+2]=Pe,this.int16[yt+6]=Ne,this.int16[yt+7]=Je,Y},O}(Cr);Me.prototype.bytesPerElement=16,xr("StructArrayLayout2f1f2i16",Me);var B=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Y,ue,Se,Pe){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,Y,ue,Se,Pe)},O.prototype.emplace=function(Y,ue,Se,Pe,Ne){var Je=12*Y,it=3*Y;return this.uint8[Je+0]=ue,this.uint8[Je+1]=Se,this.float32[it+1]=Pe,this.float32[it+2]=Ne,Y},O}(Cr);B.prototype.bytesPerElement=12,xr("StructArrayLayout2ub2f12",B);var K=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Y,ue,Se){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,Y,ue,Se)},O.prototype.emplace=function(Y,ue,Se,Pe){var Ne=3*Y;return this.uint16[Ne+0]=ue,this.uint16[Ne+1]=Se,this.uint16[Ne+2]=Pe,Y},O}(Cr);K.prototype.bytesPerElement=6,xr("StructArrayLayout3ui6",K);var ie=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Y,ue,Se,Pe,Ne,Je,it,yt,_t,Pt,Nt,Dt,Qt,rn,wn,_n,Ln){var On=this.length;return this.resize(On+1),this.emplace(On,Y,ue,Se,Pe,Ne,Je,it,yt,_t,Pt,Nt,Dt,Qt,rn,wn,_n,Ln)},O.prototype.emplace=function(Y,ue,Se,Pe,Ne,Je,it,yt,_t,Pt,Nt,Dt,Qt,rn,wn,_n,Ln,On){var Nn=24*Y,qn=12*Y,Jn=48*Y;return this.int16[Nn+0]=ue,this.int16[Nn+1]=Se,this.uint16[Nn+2]=Pe,this.uint16[Nn+3]=Ne,this.uint32[qn+2]=Je,this.uint32[qn+3]=it,this.uint32[qn+4]=yt,this.uint16[Nn+10]=_t,this.uint16[Nn+11]=Pt,this.uint16[Nn+12]=Nt,this.float32[qn+7]=Dt,this.float32[qn+8]=Qt,this.uint8[Jn+36]=rn,this.uint8[Jn+37]=wn,this.uint8[Jn+38]=_n,this.uint32[qn+10]=Ln,this.int16[Nn+22]=On,Y},O}(Cr);ie.prototype.bytesPerElement=48,xr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ie);var de=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Y,ue,Se,Pe,Ne,Je,it,yt,_t,Pt,Nt,Dt,Qt,rn,wn,_n,Ln,On,Nn,qn,Jn,hr,sr,gr,_r,Dr,kr,Or){var Er=this.length;return this.resize(Er+1),this.emplace(Er,Y,ue,Se,Pe,Ne,Je,it,yt,_t,Pt,Nt,Dt,Qt,rn,wn,_n,Ln,On,Nn,qn,Jn,hr,sr,gr,_r,Dr,kr,Or)},O.prototype.emplace=function(Y,ue,Se,Pe,Ne,Je,it,yt,_t,Pt,Nt,Dt,Qt,rn,wn,_n,Ln,On,Nn,qn,Jn,hr,sr,gr,_r,Dr,kr,Or,Er){var wr=34*Y,jr=17*Y;return this.int16[wr+0]=ue,this.int16[wr+1]=Se,this.int16[wr+2]=Pe,this.int16[wr+3]=Ne,this.int16[wr+4]=Je,this.int16[wr+5]=it,this.int16[wr+6]=yt,this.int16[wr+7]=_t,this.uint16[wr+8]=Pt,this.uint16[wr+9]=Nt,this.uint16[wr+10]=Dt,this.uint16[wr+11]=Qt,this.uint16[wr+12]=rn,this.uint16[wr+13]=wn,this.uint16[wr+14]=_n,this.uint16[wr+15]=Ln,this.uint16[wr+16]=On,this.uint16[wr+17]=Nn,this.uint16[wr+18]=qn,this.uint16[wr+19]=Jn,this.uint16[wr+20]=hr,this.uint16[wr+21]=sr,this.uint16[wr+22]=gr,this.uint32[jr+12]=_r,this.float32[jr+13]=Dr,this.float32[jr+14]=kr,this.float32[jr+15]=Or,this.float32[jr+16]=Er,Y},O}(Cr);de.prototype.bytesPerElement=68,xr("StructArrayLayout8i15ui1ul4f68",de);var ye=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Y){var ue=this.length;return this.resize(ue+1),this.emplace(ue,Y)},O.prototype.emplace=function(Y,ue){var Se=1*Y;return this.float32[Se+0]=ue,Y},O}(Cr);ye.prototype.bytesPerElement=4,xr("StructArrayLayout1f4",ye);var Le=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Y,ue,Se){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,Y,ue,Se)},O.prototype.emplace=function(Y,ue,Se,Pe){var Ne=3*Y;return this.int16[Ne+0]=ue,this.int16[Ne+1]=Se,this.int16[Ne+2]=Pe,Y},O}(Cr);Le.prototype.bytesPerElement=6,xr("StructArrayLayout3i6",Le);var Be=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Y,ue,Se){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,Y,ue,Se)},O.prototype.emplace=function(Y,ue,Se,Pe){var Ne=2*Y,Je=4*Y;return this.uint32[Ne+0]=ue,this.uint16[Je+2]=Se,this.uint16[Je+3]=Pe,Y},O}(Cr);Be.prototype.bytesPerElement=8,xr("StructArrayLayout1ul2ui8",Be);var je=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Y,ue){var Se=this.length;return this.resize(Se+1),this.emplace(Se,Y,ue)},O.prototype.emplace=function(Y,ue,Se){var Pe=2*Y;return this.uint16[Pe+0]=ue,this.uint16[Pe+1]=Se,Y},O}(Cr);je.prototype.bytesPerElement=4,xr("StructArrayLayout2ui4",je);var qe=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Y){var ue=this.length;return this.resize(ue+1),this.emplace(ue,Y)},O.prototype.emplace=function(Y,ue){var Se=1*Y;return this.uint16[Se+0]=ue,Y},O}(Cr);qe.prototype.bytesPerElement=2,xr("StructArrayLayout1ui2",qe);var Ze=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Y,ue){var Se=this.length;return this.resize(Se+1),this.emplace(Se,Y,ue)},O.prototype.emplace=function(Y,ue,Se){var Pe=2*Y;return this.float32[Pe+0]=ue,this.float32[Pe+1]=Se,Y},O}(Cr);Ze.prototype.bytesPerElement=8,xr("StructArrayLayout2f8",Ze);var Qe=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Y,ue,Se,Pe){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,Y,ue,Se,Pe)},O.prototype.emplace=function(Y,ue,Se,Pe,Ne){var Je=4*Y;return this.float32[Je+0]=ue,this.float32[Je+1]=Se,this.float32[Je+2]=Pe,this.float32[Je+3]=Ne,Y},O}(Cr);Qe.prototype.bytesPerElement=16,xr("StructArrayLayout4f16",Qe);var lt=function(M){function O(){M.apply(this,arguments)}M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O;var Y={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return Y.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},Y.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},Y.x1.get=function(){return this._structArray.int16[this._pos2+2]},Y.y1.get=function(){return this._structArray.int16[this._pos2+3]},Y.x2.get=function(){return this._structArray.int16[this._pos2+4]},Y.y2.get=function(){return this._structArray.int16[this._pos2+5]},Y.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Y.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},Y.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Y.anchorPoint.get=function(){return new e(this.anchorPointX,this.anchorPointY)},Object.defineProperties(O.prototype,Y),O}(Oo);lt.prototype.size=20;var ht=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.get=function(Y){return new lt(this,Y)},O}(X);xr("CollisionBoxArray",ht);var St=function(M){function O(){M.apply(this,arguments)}M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O;var Y={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return Y.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Y.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Y.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Y.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},Y.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},Y.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Y.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},Y.segment.get=function(){return this._structArray.uint16[this._pos2+10]},Y.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},Y.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},Y.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},Y.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},Y.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},Y.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},Y.placedOrientation.set=function(ue){this._structArray.uint8[this._pos1+37]=ue},Y.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},Y.hidden.set=function(ue){this._structArray.uint8[this._pos1+38]=ue},Y.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},Y.crossTileID.set=function(ue){this._structArray.uint32[this._pos4+10]=ue},Y.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(O.prototype,Y),O}(Oo);St.prototype.size=48;var Lt=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.get=function(Y){return new St(this,Y)},O}(ie);xr("PlacedSymbolArray",Lt);var Mt=function(M){function O(){M.apply(this,arguments)}M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O;var Y={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return Y.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Y.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Y.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},Y.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},Y.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},Y.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},Y.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},Y.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},Y.key.get=function(){return this._structArray.uint16[this._pos2+8]},Y.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Y.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},Y.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},Y.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},Y.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},Y.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},Y.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},Y.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},Y.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},Y.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},Y.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},Y.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},Y.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},Y.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},Y.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},Y.crossTileID.set=function(ue){this._structArray.uint32[this._pos4+12]=ue},Y.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},Y.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},Y.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},Y.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(O.prototype,Y),O}(Oo);Mt.prototype.size=68;var Ft=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.get=function(Y){return new Mt(this,Y)},O}(de);xr("SymbolInstanceArray",Ft);var Et=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.getoffsetX=function(Y){return this.float32[1*Y+0]},O}(ye);xr("GlyphOffsetArray",Et);var en=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.getx=function(Y){return this.int16[3*Y+0]},O.prototype.gety=function(Y){return this.int16[3*Y+1]},O.prototype.gettileUnitDistanceFromAnchor=function(Y){return this.int16[3*Y+2]},O}(Le);xr("SymbolLineVertexArray",en);var Zt=function(M){function O(){M.apply(this,arguments)}M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O;var Y={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return Y.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},Y.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Y.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(O.prototype,Y),O}(Oo);Zt.prototype.size=8;var Vt=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.get=function(Y){return new Zt(this,Y)},O}(Be);xr("FeatureIndexArray",Vt);var pn=zi([{name:"a_pos",components:2,type:"Int16"}],4).members,vn=function(M){M===void 0&&(M=[]),this.segments=M};function zn(M,O){return 256*(M=a(Math.floor(M),0,255))+a(Math.floor(O),0,255)}vn.prototype.prepareSegment=function(M,O,Y,ue){var Se=this.segments[this.segments.length-1];return M>vn.MAX_VERTEX_ARRAY_LENGTH&&A("Max vertices per segment is "+vn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+M),(!Se||Se.vertexLength+M>vn.MAX_VERTEX_ARRAY_LENGTH||Se.sortKey!==ue)&&(Se={vertexOffset:O.length,primitiveOffset:Y.length,vertexLength:0,primitiveLength:0},ue!==void 0&&(Se.sortKey=ue),this.segments.push(Se)),Se},vn.prototype.get=function(){return this.segments},vn.prototype.destroy=function(){for(var M=0,O=this.segments;M<O.length;M+=1){var Y=O[M];for(var ue in Y.vaos)Y.vaos[ue].destroy()}},vn.simpleSegment=function(M,O,Y,ue){return new vn([{vertexOffset:M,primitiveOffset:O,vertexLength:Y,primitiveLength:ue,vaos:{},sortKey:0}])},vn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,xr("SegmentVector",vn);var Rn=zi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),Un=T(function(M){M.exports=function(O,Y){var ue,Se,Pe,Ne,Je,it,yt,_t;for(ue=3&O.length,Se=O.length-ue,Pe=Y,Je=3432918353,it=461845907,_t=0;_t<Se;)yt=255&O.charCodeAt(_t)|(255&O.charCodeAt(++_t))<<8|(255&O.charCodeAt(++_t))<<16|(255&O.charCodeAt(++_t))<<24,++_t,Pe=27492+(65535&(Ne=5*(65535&(Pe=(Pe^=yt=(65535&(yt=(yt=(65535&yt)*Je+(((yt>>>16)*Je&65535)<<16)&4294967295)<<15|yt>>>17))*it+(((yt>>>16)*it&65535)<<16)&4294967295)<<13|Pe>>>19))+((5*(Pe>>>16)&65535)<<16)&4294967295))+((58964+(Ne>>>16)&65535)<<16);switch(yt=0,ue){case 3:yt^=(255&O.charCodeAt(_t+2))<<16;case 2:yt^=(255&O.charCodeAt(_t+1))<<8;case 1:Pe^=yt=(65535&(yt=(yt=(65535&(yt^=255&O.charCodeAt(_t)))*Je+(((yt>>>16)*Je&65535)<<16)&4294967295)<<15|yt>>>17))*it+(((yt>>>16)*it&65535)<<16)&4294967295}return Pe^=O.length,Pe=2246822507*(65535&(Pe^=Pe>>>16))+((2246822507*(Pe>>>16)&65535)<<16)&4294967295,Pe=3266489909*(65535&(Pe^=Pe>>>13))+((3266489909*(Pe>>>16)&65535)<<16)&4294967295,(Pe^=Pe>>>16)>>>0}}),Yn=T(function(M){M.exports=function(O,Y){for(var ue,Se=O.length,Pe=Y^Se,Ne=0;Se>=4;)ue=1540483477*(65535&(ue=255&O.charCodeAt(Ne)|(255&O.charCodeAt(++Ne))<<8|(255&O.charCodeAt(++Ne))<<16|(255&O.charCodeAt(++Ne))<<24))+((1540483477*(ue>>>16)&65535)<<16),Pe=1540483477*(65535&Pe)+((1540483477*(Pe>>>16)&65535)<<16)^(ue=1540483477*(65535&(ue^=ue>>>24))+((1540483477*(ue>>>16)&65535)<<16)),Se-=4,++Ne;switch(Se){case 3:Pe^=(255&O.charCodeAt(Ne+2))<<16;case 2:Pe^=(255&O.charCodeAt(Ne+1))<<8;case 1:Pe=1540483477*(65535&(Pe^=255&O.charCodeAt(Ne)))+((1540483477*(Pe>>>16)&65535)<<16)}return Pe=1540483477*(65535&(Pe^=Pe>>>13))+((1540483477*(Pe>>>16)&65535)<<16),(Pe^=Pe>>>15)>>>0}}),or=Un,ir=Un,cr=Yn;or.murmur3=ir,or.murmur2=cr;var mr=function(){this.ids=[],this.positions=[],this.indexed=!1};mr.prototype.add=function(M,O,Y,ue){this.ids.push(Bn(M)),this.positions.push(O,Y,ue)},mr.prototype.getPositions=function(M){for(var O=Bn(M),Y=0,ue=this.ids.length-1;Y<ue;){var Se=Y+ue>>1;this.ids[Se]>=O?ue=Se:Y=Se+1}for(var Pe=[];this.ids[Y]===O;){var Ne=this.positions[3*Y],Je=this.positions[3*Y+1],it=this.positions[3*Y+2];Pe.push({index:Ne,start:Je,end:it}),Y++}return Pe},mr.serialize=function(M,O){var Y=new Float64Array(M.ids),ue=new Uint32Array(M.positions);return rr(Y,ue,0,Y.length-1),O&&O.push(Y.buffer,ue.buffer),{ids:Y,positions:ue}},mr.deserialize=function(M){var O=new mr;return O.ids=M.ids,O.positions=M.positions,O.indexed=!0,O};var Lr=Math.pow(2,53)-1;function Bn(M){var O=+M;return!isNaN(O)&&O<=Lr?O:or(String(M))}function rr(M,O,Y,ue){for(;Y<ue;){for(var Se=M[Y+ue>>1],Pe=Y-1,Ne=ue+1;;){do Pe++;while(M[Pe]<Se);do Ne--;while(M[Ne]>Se);if(Pe>=Ne)break;fr(M,Pe,Ne),fr(O,3*Pe,3*Ne),fr(O,3*Pe+1,3*Ne+1),fr(O,3*Pe+2,3*Ne+2)}Ne-Y<ue-Ne?(rr(M,O,Y,Ne),Y=Ne+1):(rr(M,O,Ne+1,ue),ue=Ne)}}function fr(M,O,Y){var ue=M[O];M[O]=M[Y],M[Y]=ue}xr("FeaturePositionMap",mr);var yr=function(M,O){this.gl=M.gl,this.location=O},Mr=function(M){function O(Y,ue){M.call(this,Y,ue),this.current=0}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(Y){this.current!==Y&&(this.current=Y,this.gl.uniform1i(this.location,Y))},O}(yr),Ir=function(M){function O(Y,ue){M.call(this,Y,ue),this.current=0}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(Y){this.current!==Y&&(this.current=Y,this.gl.uniform1f(this.location,Y))},O}(yr),Br=function(M){function O(Y,ue){M.call(this,Y,ue),this.current=[0,0]}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(Y){Y[0]===this.current[0]&&Y[1]===this.current[1]||(this.current=Y,this.gl.uniform2f(this.location,Y[0],Y[1]))},O}(yr),Zr=function(M){function O(Y,ue){M.call(this,Y,ue),this.current=[0,0,0]}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(Y){Y[0]===this.current[0]&&Y[1]===this.current[1]&&Y[2]===this.current[2]||(this.current=Y,this.gl.uniform3f(this.location,Y[0],Y[1],Y[2]))},O}(yr),oi=function(M){function O(Y,ue){M.call(this,Y,ue),this.current=[0,0,0,0]}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(Y){Y[0]===this.current[0]&&Y[1]===this.current[1]&&Y[2]===this.current[2]&&Y[3]===this.current[3]||(this.current=Y,this.gl.uniform4f(this.location,Y[0],Y[1],Y[2],Y[3]))},O}(yr),si=function(M){function O(Y,ue){M.call(this,Y,ue),this.current=hn.transparent}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(Y){Y.r===this.current.r&&Y.g===this.current.g&&Y.b===this.current.b&&Y.a===this.current.a||(this.current=Y,this.gl.uniform4f(this.location,Y.r,Y.g,Y.b,Y.a))},O}(yr),Yr=new Float32Array(16),wi=function(M){function O(Y,ue){M.call(this,Y,ue),this.current=Yr}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(Y){if(Y[12]!==this.current[12]||Y[0]!==this.current[0])return this.current=Y,void this.gl.uniformMatrix4fv(this.location,!1,Y);for(var ue=1;ue<16;ue++)if(Y[ue]!==this.current[ue]){this.current=Y,this.gl.uniformMatrix4fv(this.location,!1,Y);break}},O}(yr);function Hi(M){return[zn(255*M.r,255*M.g),zn(255*M.b,255*M.a)]}var Li=function(M,O,Y){this.value=M,this.uniformNames=O.map(function(ue){return"u_"+ue}),this.type=Y};Li.prototype.setUniform=function(M,O,Y){M.set(Y.constantOr(this.value))},Li.prototype.getBinding=function(M,O,Y){return this.type==="color"?new si(M,O):new Ir(M,O)};var Ri=function(M,O){this.uniformNames=O.map(function(Y){return"u_"+Y}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ri.prototype.setConstantPatternPositions=function(M,O){this.pixelRatioFrom=O.pixelRatio,this.pixelRatioTo=M.pixelRatio,this.patternFrom=O.tlbr,this.patternTo=M.tlbr},Ri.prototype.setUniform=function(M,O,Y,ue){var Se=ue==="u_pattern_to"?this.patternTo:ue==="u_pattern_from"?this.patternFrom:ue==="u_pixel_ratio_to"?this.pixelRatioTo:ue==="u_pixel_ratio_from"?this.pixelRatioFrom:null;Se&&M.set(Se)},Ri.prototype.getBinding=function(M,O,Y){return Y.substr(0,9)==="u_pattern"?new oi(M,O):new Ir(M,O)};var Ur=function(M,O,Y,ue){this.expression=M,this.type=Y,this.maxValue=0,this.paintVertexAttributes=O.map(function(Se){return{name:"a_"+Se,type:"Float32",components:Y==="color"?2:1,offset:0}}),this.paintVertexArray=new ue};Ur.prototype.populatePaintArray=function(M,O,Y,ue,Se){var Pe=this.paintVertexArray.length,Ne=this.expression.evaluate(new Xr(0),O,{},ue,[],Se);this.paintVertexArray.resize(M),this._setPaintValue(Pe,M,Ne)},Ur.prototype.updatePaintArray=function(M,O,Y,ue){var Se=this.expression.evaluate({zoom:0},Y,ue);this._setPaintValue(M,O,Se)},Ur.prototype._setPaintValue=function(M,O,Y){if(this.type==="color")for(var ue=Hi(Y),Se=M;Se<O;Se++)this.paintVertexArray.emplace(Se,ue[0],ue[1]);else{for(var Pe=M;Pe<O;Pe++)this.paintVertexArray.emplace(Pe,Y);this.maxValue=Math.max(this.maxValue,Math.abs(Y))}},Ur.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ur.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Fr=function(M,O,Y,ue,Se,Pe){this.expression=M,this.uniformNames=O.map(function(Ne){return"u_"+Ne+"_t"}),this.type=Y,this.useIntegerZoom=ue,this.zoom=Se,this.maxValue=0,this.paintVertexAttributes=O.map(function(Ne){return{name:"a_"+Ne,type:"Float32",components:Y==="color"?4:2,offset:0}}),this.paintVertexArray=new Pe};Fr.prototype.populatePaintArray=function(M,O,Y,ue,Se){var Pe=this.expression.evaluate(new Xr(this.zoom),O,{},ue,[],Se),Ne=this.expression.evaluate(new Xr(this.zoom+1),O,{},ue,[],Se),Je=this.paintVertexArray.length;this.paintVertexArray.resize(M),this._setPaintValue(Je,M,Pe,Ne)},Fr.prototype.updatePaintArray=function(M,O,Y,ue){var Se=this.expression.evaluate({zoom:this.zoom},Y,ue),Pe=this.expression.evaluate({zoom:this.zoom+1},Y,ue);this._setPaintValue(M,O,Se,Pe)},Fr.prototype._setPaintValue=function(M,O,Y,ue){if(this.type==="color")for(var Se=Hi(Y),Pe=Hi(ue),Ne=M;Ne<O;Ne++)this.paintVertexArray.emplace(Ne,Se[0],Se[1],Pe[0],Pe[1]);else{for(var Je=M;Je<O;Je++)this.paintVertexArray.emplace(Je,Y,ue);this.maxValue=Math.max(this.maxValue,Math.abs(Y),Math.abs(ue))}},Fr.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Fr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Fr.prototype.setUniform=function(M,O){var Y=this.useIntegerZoom?Math.floor(O.zoom):O.zoom,ue=a(this.expression.interpolationFactor(Y,this.zoom,this.zoom+1),0,1);M.set(ue)},Fr.prototype.getBinding=function(M,O,Y){return new Ir(M,O)};var li=function(M,O,Y,ue,Se,Pe){this.expression=M,this.type=O,this.useIntegerZoom=Y,this.zoom=ue,this.layerId=Pe,this.zoomInPaintVertexArray=new Se,this.zoomOutPaintVertexArray=new Se};li.prototype.populatePaintArray=function(M,O,Y){var ue=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(M),this.zoomOutPaintVertexArray.resize(M),this._setPaintValues(ue,M,O.patterns&&O.patterns[this.layerId],Y)},li.prototype.updatePaintArray=function(M,O,Y,ue,Se){this._setPaintValues(M,O,Y.patterns&&Y.patterns[this.layerId],Se)},li.prototype._setPaintValues=function(M,O,Y,ue){if(ue&&Y){var Se=Y.min,Pe=Y.mid,Ne=Y.max,Je=ue[Se],it=ue[Pe],yt=ue[Ne];if(Je&&it&&yt)for(var _t=M;_t<O;_t++)this.zoomInPaintVertexArray.emplace(_t,it.tl[0],it.tl[1],it.br[0],it.br[1],Je.tl[0],Je.tl[1],Je.br[0],Je.br[1],it.pixelRatio,Je.pixelRatio),this.zoomOutPaintVertexArray.emplace(_t,it.tl[0],it.tl[1],it.br[0],it.br[1],yt.tl[0],yt.tl[1],yt.br[0],yt.br[1],it.pixelRatio,yt.pixelRatio)}},li.prototype.upload=function(M){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=M.createVertexBuffer(this.zoomInPaintVertexArray,Rn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=M.createVertexBuffer(this.zoomOutPaintVertexArray,Rn.members,this.expression.isStateDependent))},li.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ti=function(M,O,Y,ue){this.binders={},this.layoutAttributes=ue,this._buffers=[];var Se=[];for(var Pe in M.paint._values)if(Y(Pe)){var Ne=M.paint.get(Pe);if(Ne instanceof Ei&&io(Ne.property.specification)){var Je=sa(Pe,M.type),it=Ne.value,yt=Ne.property.specification.type,_t=Ne.property.useIntegerZoom,Pt=Ne.property.specification["property-type"],Nt=Pt==="cross-faded"||Pt==="cross-faded-data-driven";if(it.kind==="constant")this.binders[Pe]=Nt?new Ri(it.value,Je):new Li(it.value,Je,yt),Se.push("/u_"+Pe);else if(it.kind==="source"||Nt){var Dt=mi(Pe,yt,"source");this.binders[Pe]=Nt?new li(it,yt,_t,O,Dt,M.id):new Ur(it,Je,yt,Dt),Se.push("/a_"+Pe)}else{var Qt=mi(Pe,yt,"composite");this.binders[Pe]=new Fr(it,Je,yt,_t,O,Qt),Se.push("/z_"+Pe)}}}this.cacheKey=Se.sort().join("")};ti.prototype.getMaxValue=function(M){var O=this.binders[M];return O instanceof Ur||O instanceof Fr?O.maxValue:0},ti.prototype.populatePaintArrays=function(M,O,Y,ue,Se){for(var Pe in this.binders){var Ne=this.binders[Pe];(Ne instanceof Ur||Ne instanceof Fr||Ne instanceof li)&&Ne.populatePaintArray(M,O,Y,ue,Se)}},ti.prototype.setConstantPatternPositions=function(M,O){for(var Y in this.binders){var ue=this.binders[Y];ue instanceof Ri&&ue.setConstantPatternPositions(M,O)}},ti.prototype.updatePaintArrays=function(M,O,Y,ue,Se){var Pe=!1;for(var Ne in M)for(var Je=0,it=O.getPositions(Ne);Je<it.length;Je+=1){var yt=it[Je],_t=Y.feature(yt.index);for(var Pt in this.binders){var Nt=this.binders[Pt];if((Nt instanceof Ur||Nt instanceof Fr||Nt instanceof li)&&Nt.expression.isStateDependent===!0){var Dt=ue.paint.get(Pt);Nt.expression=Dt.value,Nt.updatePaintArray(yt.start,yt.end,_t,M[Ne],Se),Pe=!0}}}return Pe},ti.prototype.defines=function(){var M=[];for(var O in this.binders){var Y=this.binders[O];(Y instanceof Li||Y instanceof Ri)&&M.push.apply(M,Y.uniformNames.map(function(ue){return"#define HAS_UNIFORM_"+ue}))}return M},ti.prototype.getPaintVertexBuffers=function(){return this._buffers},ti.prototype.getUniforms=function(M,O){var Y=[];for(var ue in this.binders){var Se=this.binders[ue];if(Se instanceof Li||Se instanceof Ri||Se instanceof Fr)for(var Pe=0,Ne=Se.uniformNames;Pe<Ne.length;Pe+=1){var Je=Ne[Pe];if(O[Je]){var it=Se.getBinding(M,O[Je],Je);Y.push({name:Je,property:ue,binding:it})}}}return Y},ti.prototype.setUniforms=function(M,O,Y,ue){for(var Se=0,Pe=O;Se<Pe.length;Se+=1){var Ne=Pe[Se],Je=Ne.name,it=Ne.property,yt=Ne.binding;this.binders[it].setUniform(yt,ue,Y.get(it),Je)}},ti.prototype.updatePaintBuffers=function(M){for(var O in this._buffers=[],this.binders){var Y=this.binders[O];if(M&&Y instanceof li){var ue=M.fromScale===2?Y.zoomInPaintVertexBuffer:Y.zoomOutPaintVertexBuffer;ue&&this._buffers.push(ue)}else(Y instanceof Ur||Y instanceof Fr)&&Y.paintVertexBuffer&&this._buffers.push(Y.paintVertexBuffer)}},ti.prototype.upload=function(M){for(var O in this.binders){var Y=this.binders[O];(Y instanceof Ur||Y instanceof Fr||Y instanceof li)&&Y.upload(M)}this.updatePaintBuffers()},ti.prototype.destroy=function(){for(var M in this.binders){var O=this.binders[M];(O instanceof Ur||O instanceof Fr||O instanceof li)&&O.destroy()}};var fi=function(M,O,Y,ue){ue===void 0&&(ue=function(){return!0}),this.programConfigurations={};for(var Se=0,Pe=O;Se<Pe.length;Se+=1){var Ne=Pe[Se];this.programConfigurations[Ne.id]=new ti(Ne,Y,ue,M)}this.needsUpload=!1,this._featureMap=new mr,this._bufferOffset=0};function sa(M,O){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[M]||[M.replace(O+"-","").replace(/-/g,"_")]}function mi(M,O,Y){var ue={color:{source:Ze,composite:Qe},number:{source:ye,composite:Ze}},Se=function(Pe){return{"line-pattern":{source:ho,composite:ho},"fill-pattern":{source:ho,composite:ho},"fill-extrusion-pattern":{source:ho,composite:ho}}[Pe]}(M);return Se&&Se[Y]||ue[O][Y]}fi.prototype.populatePaintArrays=function(M,O,Y,ue,Se,Pe){for(var Ne in this.programConfigurations)this.programConfigurations[Ne].populatePaintArrays(M,O,ue,Se,Pe);O.id!==void 0&&this._featureMap.add(O.id,Y,this._bufferOffset,M),this._bufferOffset=M,this.needsUpload=!0},fi.prototype.updatePaintArrays=function(M,O,Y,ue){for(var Se=0,Pe=Y;Se<Pe.length;Se+=1){var Ne=Pe[Se];this.needsUpload=this.programConfigurations[Ne.id].updatePaintArrays(M,this._featureMap,O,Ne,ue)||this.needsUpload}},fi.prototype.get=function(M){return this.programConfigurations[M]},fi.prototype.upload=function(M){if(this.needsUpload){for(var O in this.programConfigurations)this.programConfigurations[O].upload(M);this.needsUpload=!1}},fi.prototype.destroy=function(){for(var M in this.programConfigurations)this.programConfigurations[M].destroy()},xr("ConstantBinder",Li),xr("CrossFadedConstantBinder",Ri),xr("SourceExpressionBinder",Ur),xr("CrossFadedCompositeBinder",li),xr("CompositeExpressionBinder",Fr),xr("ProgramConfiguration",ti,{omit:["_buffers"]}),xr("ProgramConfigurationSet",fi);var Wr=8192,Qo,ga=(Qo=15,{min:-1*Math.pow(2,Qo-1),max:Math.pow(2,Qo-1)-1});function Ca(M){for(var O=Wr/M.extent,Y=M.loadGeometry(),ue=0;ue<Y.length;ue++)for(var Se=Y[ue],Pe=0;Pe<Se.length;Pe++){var Ne=Se[Pe];Ne.x=Math.round(Ne.x*O),Ne.y=Math.round(Ne.y*O),(Ne.x<ga.min||Ne.x>ga.max||Ne.y<ga.min||Ne.y>ga.max)&&(A("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Ne.x=a(Ne.x,ga.min,ga.max),Ne.y=a(Ne.y,ga.min,ga.max))}return Y}function Ai(M,O,Y,ue,Se){M.emplaceBack(2*O+(ue+1)/2,2*Y+(Se+1)/2)}var qi=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new da,this.indexArray=new K,this.segments=new vn,this.programConfigurations=new fi(pn,M.layers,M.zoom),this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};function ja(M,O){for(var Y=0;Y<M.length;Y++)if(hl(O,M[Y]))return!0;for(var ue=0;ue<O.length;ue++)if(hl(M,O[ue]))return!0;return!!eu(M,O)}function Cl(M,O,Y){return!!hl(M,O)||!!tu(O,M,Y)}function Pu(M,O){if(M.length===1)return Ou(O,M[0]);for(var Y=0;Y<O.length;Y++)for(var ue=O[Y],Se=0;Se<ue.length;Se++)if(hl(M,ue[Se]))return!0;for(var Pe=0;Pe<M.length;Pe++)if(Ou(O,M[Pe]))return!0;for(var Ne=0;Ne<O.length;Ne++)if(eu(M,O[Ne]))return!0;return!1}function vc(M,O,Y){if(M.length>1){if(eu(M,O))return!0;for(var ue=0;ue<O.length;ue++)if(tu(O[ue],M,Y))return!0}for(var Se=0;Se<M.length;Se++)if(tu(M[Se],O,Y))return!0;return!1}function eu(M,O){if(M.length===0||O.length===0)return!1;for(var Y=0;Y<M.length-1;Y++)for(var ue=M[Y],Se=M[Y+1],Pe=0;Pe<O.length-1;Pe++)if(Pl(ue,Se,O[Pe],O[Pe+1]))return!0;return!1}function Pl(M,O,Y,ue){return w(M,Y,ue)!==w(O,Y,ue)&&w(M,O,Y)!==w(M,O,ue)}function tu(M,O,Y){var ue=Y*Y;if(O.length===1)return M.distSqr(O[0])<ue;for(var Se=1;Se<O.length;Se++)if(xl(M,O[Se-1],O[Se])<ue)return!0;return!1}function xl(M,O,Y){var ue=O.distSqr(Y);if(ue===0)return M.distSqr(O);var Se=((M.x-O.x)*(Y.x-O.x)+(M.y-O.y)*(Y.y-O.y))/ue;return Se<0?M.distSqr(O):Se>1?M.distSqr(Y):M.distSqr(Y.sub(O)._mult(Se)._add(O))}function Ou(M,O){for(var Y,ue,Se,Pe=!1,Ne=0;Ne<M.length;Ne++)for(var Je=0,it=(Y=M[Ne]).length-1;Je<Y.length;it=Je++)ue=Y[Je],Se=Y[it],ue.y>O.y!=Se.y>O.y&&O.x<(Se.x-ue.x)*(O.y-ue.y)/(Se.y-ue.y)+ue.x&&(Pe=!Pe);return Pe}function hl(M,O){for(var Y=!1,ue=0,Se=M.length-1;ue<M.length;Se=ue++){var Pe=M[ue],Ne=M[Se];Pe.y>O.y!=Ne.y>O.y&&O.x<(Ne.x-Pe.x)*(O.y-Pe.y)/(Ne.y-Pe.y)+Pe.x&&(Y=!Y)}return Y}function nu(M,O,Y){var ue=Y[0],Se=Y[2];if(M.x<ue.x&&O.x<ue.x||M.x>Se.x&&O.x>Se.x||M.y<ue.y&&O.y<ue.y||M.y>Se.y&&O.y>Se.y)return!1;var Pe=w(M,O,Y[0]);return Pe!==w(M,O,Y[1])||Pe!==w(M,O,Y[2])||Pe!==w(M,O,Y[3])}function ru(M,O,Y){var ue=O.paint.get(M).value;return ue.kind==="constant"?ue.value:Y.programConfigurations.get(O.id).getMaxValue(M)}function Iu(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])}function Du(M,O,Y,ue,Se){if(!O[0]&&!O[1])return M;var Pe=e.convert(O)._mult(Se);Y==="viewport"&&Pe._rotate(-ue);for(var Ne=[],Je=0;Je<M.length;Je++){var it=M[Je];Ne.push(it.sub(Pe))}return Ne}qi.prototype.populate=function(M,O,Y){var ue=this.layers[0],Se=[],Pe=null;ue.type==="circle"&&(Pe=ue.layout.get("circle-sort-key"));for(var Ne=0,Je=M;Ne<Je.length;Ne+=1){var it=Je[Ne],yt=it.feature,_t=it.id,Pt=it.index,Nt=it.sourceLayerIndex,Dt=this.layers[0]._featureFilter.needGeometry,Qt={type:yt.type,id:_t,properties:yt.properties,geometry:Dt?Ca(yt):[]};if(this.layers[0]._featureFilter.filter(new Xr(this.zoom),Qt,Y)){Dt||(Qt.geometry=Ca(yt));var rn=Pe?Pe.evaluate(Qt,{},Y):void 0,wn={id:_t,properties:yt.properties,type:yt.type,sourceLayerIndex:Nt,index:Pt,geometry:Qt.geometry,patterns:{},sortKey:rn};Se.push(wn)}}Pe&&Se.sort(function(gr,_r){return gr.sortKey-_r.sortKey});for(var _n=0,Ln=Se;_n<Ln.length;_n+=1){var On=Ln[_n],Nn=On,qn=Nn.geometry,Jn=Nn.index,hr=Nn.sourceLayerIndex,sr=M[Jn].feature;this.addFeature(On,qn,Jn,Y),O.featureIndex.insert(sr,qn,Jn,hr,this.index)}},qi.prototype.update=function(M,O,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,O,this.stateDependentLayers,Y)},qi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},qi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},qi.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,pn),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},qi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},qi.prototype.addFeature=function(M,O,Y,ue){for(var Se=0,Pe=O;Se<Pe.length;Se+=1)for(var Ne=0,Je=Pe[Se];Ne<Je.length;Ne+=1){var it=Je[Ne],yt=it.x,_t=it.y;if(!(yt<0||yt>=Wr||_t<0||_t>=Wr)){var Pt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,M.sortKey),Nt=Pt.vertexLength;Ai(this.layoutVertexArray,yt,_t,-1,-1),Ai(this.layoutVertexArray,yt,_t,1,-1),Ai(this.layoutVertexArray,yt,_t,1,1),Ai(this.layoutVertexArray,yt,_t,-1,1),this.indexArray.emplaceBack(Nt,Nt+1,Nt+2),this.indexArray.emplaceBack(Nt,Nt+3,Nt+2),Pt.vertexLength+=4,Pt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,Y,{},ue)},xr("CircleBucket",qi,{omit:["layers"]});var Uh=new Wi({"circle-sort-key":new Ar(Ie.layout_circle["circle-sort-key"])}),Vh={paint:new Wi({"circle-radius":new Ar(Ie.paint_circle["circle-radius"]),"circle-color":new Ar(Ie.paint_circle["circle-color"]),"circle-blur":new Ar(Ie.paint_circle["circle-blur"]),"circle-opacity":new Ar(Ie.paint_circle["circle-opacity"]),"circle-translate":new Tr(Ie.paint_circle["circle-translate"]),"circle-translate-anchor":new Tr(Ie.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Tr(Ie.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Tr(Ie.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ar(Ie.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ar(Ie.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ar(Ie.paint_circle["circle-stroke-opacity"])}),layout:Uh},Io=typeof Float32Array<"u"?Float32Array:Array;function mc(M){return M[0]=1,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=1,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=1,M[11]=0,M[12]=0,M[13]=0,M[14]=0,M[15]=1,M}function rf(M,O,Y){var ue=O[0],Se=O[1],Pe=O[2],Ne=O[3],Je=O[4],it=O[5],yt=O[6],_t=O[7],Pt=O[8],Nt=O[9],Dt=O[10],Qt=O[11],rn=O[12],wn=O[13],_n=O[14],Ln=O[15],On=Y[0],Nn=Y[1],qn=Y[2],Jn=Y[3];return M[0]=On*ue+Nn*Je+qn*Pt+Jn*rn,M[1]=On*Se+Nn*it+qn*Nt+Jn*wn,M[2]=On*Pe+Nn*yt+qn*Dt+Jn*_n,M[3]=On*Ne+Nn*_t+qn*Qt+Jn*Ln,On=Y[4],Nn=Y[5],qn=Y[6],Jn=Y[7],M[4]=On*ue+Nn*Je+qn*Pt+Jn*rn,M[5]=On*Se+Nn*it+qn*Nt+Jn*wn,M[6]=On*Pe+Nn*yt+qn*Dt+Jn*_n,M[7]=On*Ne+Nn*_t+qn*Qt+Jn*Ln,On=Y[8],Nn=Y[9],qn=Y[10],Jn=Y[11],M[8]=On*ue+Nn*Je+qn*Pt+Jn*rn,M[9]=On*Se+Nn*it+qn*Nt+Jn*wn,M[10]=On*Pe+Nn*yt+qn*Dt+Jn*_n,M[11]=On*Ne+Nn*_t+qn*Qt+Jn*Ln,On=Y[12],Nn=Y[13],qn=Y[14],Jn=Y[15],M[12]=On*ue+Nn*Je+qn*Pt+Jn*rn,M[13]=On*Se+Nn*it+qn*Nt+Jn*wn,M[14]=On*Pe+Nn*yt+qn*Dt+Jn*_n,M[15]=On*Ne+Nn*_t+qn*Qt+Jn*Ln,M}Math.hypot||(Math.hypot=function(){for(var M=arguments,O=0,Y=arguments.length;Y--;)O+=M[Y]*M[Y];return Math.sqrt(O)});var Hh=rf,zu,qh=function(M,O,Y){return M[0]=O[0]-Y[0],M[1]=O[1]-Y[1],M[2]=O[2]-Y[2],M};function Ru(M,O,Y){var ue=O[0],Se=O[1],Pe=O[2],Ne=O[3];return M[0]=Y[0]*ue+Y[4]*Se+Y[8]*Pe+Y[12]*Ne,M[1]=Y[1]*ue+Y[5]*Se+Y[9]*Pe+Y[13]*Ne,M[2]=Y[2]*ue+Y[6]*Se+Y[10]*Pe+Y[14]*Ne,M[3]=Y[3]*ue+Y[7]*Se+Y[11]*Pe+Y[15]*Ne,M}zu=new Io(3),Io!=Float32Array&&(zu[0]=0,zu[1]=0,zu[2]=0),function(){var M=new Io(4);Io!=Float32Array&&(M[0]=0,M[1]=0,M[2]=0,M[3]=0)}();var Gh=function(M){var O=M[0],Y=M[1];return O*O+Y*Y},Zh=(function(){var M=new Io(2);Io!=Float32Array&&(M[0]=0,M[1]=0)}(),function(M){function O(Y){M.call(this,Y,Vh)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.createBucket=function(Y){return new qi(Y)},O.prototype.queryRadius=function(Y){var ue=Y;return ru("circle-radius",this,ue)+ru("circle-stroke-width",this,ue)+Iu(this.paint.get("circle-translate"))},O.prototype.queryIntersectsFeature=function(Y,ue,Se,Pe,Ne,Je,it,yt){for(var _t=Du(Y,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Je.angle,it),Pt=this.paint.get("circle-radius").evaluate(ue,Se)+this.paint.get("circle-stroke-width").evaluate(ue,Se),Nt=this.paint.get("circle-pitch-alignment")==="map",Dt=Nt?_t:function(hr,sr){return hr.map(function(gr){return af(gr,sr)})}(_t,yt),Qt=Nt?Pt*it:Pt,rn=0,wn=Pe;rn<wn.length;rn+=1)for(var _n=0,Ln=wn[rn];_n<Ln.length;_n+=1){var On=Ln[_n],Nn=Nt?On:af(On,yt),qn=Qt,Jn=Ru([],[On.x,On.y,0,1],yt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?qn*=Jn[3]/Je.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(qn*=Je.cameraToCenterDistance/Jn[3]),Cl(Dt,Nn,qn))return!0}return!1},O}(Xi));function af(M,O){var Y=Ru([],[M.x,M.y,0,1],O);return new e(Y[0]/Y[3],Y[1]/Y[3])}var of=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O}(qi);function yc(M,O,Y,ue){var Se=O.width,Pe=O.height;if(ue){if(ue instanceof Uint8ClampedArray)ue=new Uint8Array(ue.buffer);else if(ue.length!==Se*Pe*Y)throw new RangeError("mismatched image size")}else ue=new Uint8Array(Se*Pe*Y);return M.width=Se,M.height=Pe,M.data=ue,M}function sf(M,O,Y){var ue=O.width,Se=O.height;if(ue!==M.width||Se!==M.height){var Pe=yc({},{width:ue,height:Se},Y);xc(M,Pe,{x:0,y:0},{x:0,y:0},{width:Math.min(M.width,ue),height:Math.min(M.height,Se)},Y),M.width=ue,M.height=Se,M.data=Pe.data}}function xc(M,O,Y,ue,Se,Pe){if(Se.width===0||Se.height===0)return O;if(Se.width>M.width||Se.height>M.height||Y.x>M.width-Se.width||Y.y>M.height-Se.height)throw new RangeError("out of range source coordinates for image copy");if(Se.width>O.width||Se.height>O.height||ue.x>O.width-Se.width||ue.y>O.height-Se.height)throw new RangeError("out of range destination coordinates for image copy");for(var Ne=M.data,Je=O.data,it=0;it<Se.height;it++)for(var yt=((Y.y+it)*M.width+Y.x)*Pe,_t=((ue.y+it)*O.width+ue.x)*Pe,Pt=0;Pt<Se.width*Pe;Pt++)Je[_t+Pt]=Ne[yt+Pt];return O}xr("HeatmapBucket",of,{omit:["layers"]});var bl=function(M,O){yc(this,M,1,O)};bl.prototype.resize=function(M){sf(this,M,1)},bl.prototype.clone=function(){return new bl({width:this.width,height:this.height},new Uint8Array(this.data))},bl.copy=function(M,O,Y,ue,Se){xc(M,O,Y,ue,Se,1)};var $a=function(M,O){yc(this,M,4,O)};$a.prototype.resize=function(M){sf(this,M,4)},$a.prototype.replace=function(M,O){O?this.data.set(M):M instanceof Uint8ClampedArray?this.data=new Uint8Array(M.buffer):this.data=M},$a.prototype.clone=function(){return new $a({width:this.width,height:this.height},new Uint8Array(this.data))},$a.copy=function(M,O,Y,ue,Se){xc(M,O,Y,ue,Se,4)},xr("AlphaImage",bl),xr("RGBAImage",$a);var Yh={paint:new Wi({"heatmap-radius":new Ar(Ie.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ar(Ie.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Tr(Ie.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Co(Ie.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Tr(Ie.paint_heatmap["heatmap-opacity"])})};function lf(M,O){for(var Y=new Uint8Array(1024),ue={},Se=0,Pe=0;Se<256;Se++,Pe+=4){ue[O]=Se/255;var Ne=M.evaluate(ue);Y[Pe+0]=Math.floor(255*Ne.r/Ne.a),Y[Pe+1]=Math.floor(255*Ne.g/Ne.a),Y[Pe+2]=Math.floor(255*Ne.b/Ne.a),Y[Pe+3]=Math.floor(255*Ne.a)}return new $a({width:256,height:1},Y)}var Wh=function(M){function O(Y){M.call(this,Y,Yh),this._updateColorRamp()}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.createBucket=function(Y){return new of(Y)},O.prototype._handleSpecialPaintPropertyUpdate=function(Y){Y==="heatmap-color"&&this._updateColorRamp()},O.prototype._updateColorRamp=function(){var Y=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=lf(Y,"heatmapDensity"),this.colorRampTexture=null},O.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},O.prototype.queryRadius=function(){return 0},O.prototype.queryIntersectsFeature=function(){return!1},O.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},O}(Xi),Xh={paint:new Wi({"hillshade-illumination-direction":new Tr(Ie.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Tr(Ie.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Tr(Ie.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Tr(Ie.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Tr(Ie.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Tr(Ie.paint_hillshade["hillshade-accent-color"])})},Jh=function(M){function O(Y){M.call(this,Y,Xh)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},O}(Xi),uf=zi([{name:"a_pos",components:2,type:"Int16"}],4).members,bc=Fu,Kh=Fu;function Fu(M,O,Y){Y=Y||2;var ue,Se,Pe,Ne,Je,it,yt,_t=O&&O.length,Pt=_t?O[0]*Y:M.length,Nt=cf(M,0,Pt,Y,!0),Dt=[];if(!Nt||Nt.next===Nt.prev)return Dt;if(_t&&(Nt=function(rn,wn,_n,Ln){var On,Nn,qn,Jn=[];for(On=0,Nn=wn.length;On<Nn;On++)(qn=cf(rn,wn[On]*Ln,On<Nn-1?wn[On+1]*Ln:rn.length,Ln,!1))===qn.next&&(qn.steiner=!0),Jn.push(ap(qn));for(Jn.sort(np),On=0;On<Jn.length;On++)rp(Jn[On],_n),_n=pl(_n,_n.next);return _n}(M,O,Nt,Y)),M.length>80*Y){ue=Pe=M[0],Se=Ne=M[1];for(var Qt=Y;Qt<Pt;Qt+=Y)(Je=M[Qt])<ue&&(ue=Je),(it=M[Qt+1])<Se&&(Se=it),Je>Pe&&(Pe=Je),it>Ne&&(Ne=it);yt=(yt=Math.max(Pe-ue,Ne-Se))!==0?1/yt:0}return iu(Nt,Dt,Y,ue,Se,yt),Dt}function cf(M,O,Y,ue,Se){var Pe,Ne;if(Se===Tc(M,O,Y,ue)>0)for(Pe=O;Pe<Y;Pe+=ue)Ne=pf(Pe,M[Pe],M[Pe+1],Ne);else for(Pe=Y-ue;Pe>=O;Pe-=ue)Ne=pf(Pe,M[Pe],M[Pe+1],Ne);return Ne&&Bu(Ne,Ne.next)&&(ou(Ne),Ne=Ne.next),Ne}function pl(M,O){if(!M)return M;O||(O=M);var Y,ue=M;do if(Y=!1,ue.steiner||!Bu(ue,ue.next)&&Qi(ue.prev,ue,ue.next)!==0)ue=ue.next;else{if(ou(ue),(ue=O=ue.prev)===ue.next)break;Y=!0}while(Y||ue!==O);return O}function iu(M,O,Y,ue,Se,Pe,Ne){if(M){!Ne&&Pe&&function(_t,Pt,Nt,Dt){var Qt=_t;do Qt.z===null&&(Qt.z=_c(Qt.x,Qt.y,Pt,Nt,Dt)),Qt.prevZ=Qt.prev,Qt.nextZ=Qt.next,Qt=Qt.next;while(Qt!==_t);Qt.prevZ.nextZ=null,Qt.prevZ=null,function(rn){var wn,_n,Ln,On,Nn,qn,Jn,hr,sr=1;do{for(_n=rn,rn=null,Nn=null,qn=0;_n;){for(qn++,Ln=_n,Jn=0,wn=0;wn<sr&&(Jn++,Ln=Ln.nextZ);wn++);for(hr=sr;Jn>0||hr>0&&Ln;)Jn!==0&&(hr===0||!Ln||_n.z<=Ln.z)?(On=_n,_n=_n.nextZ,Jn--):(On=Ln,Ln=Ln.nextZ,hr--),Nn?Nn.nextZ=On:rn=On,On.prevZ=Nn,Nn=On;_n=Ln}Nn.nextZ=null,sr*=2}while(qn>1)}(Qt)}(M,ue,Se,Pe);for(var Je,it,yt=M;M.prev!==M.next;)if(Je=M.prev,it=M.next,Pe?Qh(M,ue,Se,Pe):$h(M))O.push(Je.i/Y),O.push(M.i/Y),O.push(it.i/Y),ou(M),M=it.next,yt=it.next;else if((M=it)===yt){Ne?Ne===1?iu(M=ep(pl(M),O,Y),O,Y,ue,Se,Pe,2):Ne===2&&tp(M,O,Y,ue,Se,Pe):iu(pl(M),O,Y,ue,Se,Pe,1);break}}}function $h(M){var O=M.prev,Y=M,ue=M.next;if(Qi(O,Y,ue)>=0)return!1;for(var Se=M.next.next;Se!==M.prev;){if(Ol(O.x,O.y,Y.x,Y.y,ue.x,ue.y,Se.x,Se.y)&&Qi(Se.prev,Se,Se.next)>=0)return!1;Se=Se.next}return!0}function Qh(M,O,Y,ue){var Se=M.prev,Pe=M,Ne=M.next;if(Qi(Se,Pe,Ne)>=0)return!1;for(var Je=Se.x<Pe.x?Se.x<Ne.x?Se.x:Ne.x:Pe.x<Ne.x?Pe.x:Ne.x,it=Se.y<Pe.y?Se.y<Ne.y?Se.y:Ne.y:Pe.y<Ne.y?Pe.y:Ne.y,yt=Se.x>Pe.x?Se.x>Ne.x?Se.x:Ne.x:Pe.x>Ne.x?Pe.x:Ne.x,_t=Se.y>Pe.y?Se.y>Ne.y?Se.y:Ne.y:Pe.y>Ne.y?Pe.y:Ne.y,Pt=_c(Je,it,O,Y,ue),Nt=_c(yt,_t,O,Y,ue),Dt=M.prevZ,Qt=M.nextZ;Dt&&Dt.z>=Pt&&Qt&&Qt.z<=Nt;){if(Dt!==M.prev&&Dt!==M.next&&Ol(Se.x,Se.y,Pe.x,Pe.y,Ne.x,Ne.y,Dt.x,Dt.y)&&Qi(Dt.prev,Dt,Dt.next)>=0||(Dt=Dt.prevZ,Qt!==M.prev&&Qt!==M.next&&Ol(Se.x,Se.y,Pe.x,Pe.y,Ne.x,Ne.y,Qt.x,Qt.y)&&Qi(Qt.prev,Qt,Qt.next)>=0))return!1;Qt=Qt.nextZ}for(;Dt&&Dt.z>=Pt;){if(Dt!==M.prev&&Dt!==M.next&&Ol(Se.x,Se.y,Pe.x,Pe.y,Ne.x,Ne.y,Dt.x,Dt.y)&&Qi(Dt.prev,Dt,Dt.next)>=0)return!1;Dt=Dt.prevZ}for(;Qt&&Qt.z<=Nt;){if(Qt!==M.prev&&Qt!==M.next&&Ol(Se.x,Se.y,Pe.x,Pe.y,Ne.x,Ne.y,Qt.x,Qt.y)&&Qi(Qt.prev,Qt,Qt.next)>=0)return!1;Qt=Qt.nextZ}return!0}function ep(M,O,Y){var ue=M;do{var Se=ue.prev,Pe=ue.next.next;!Bu(Se,Pe)&&ff(Se,ue,ue.next,Pe)&&au(Se,Pe)&&au(Pe,Se)&&(O.push(Se.i/Y),O.push(ue.i/Y),O.push(Pe.i/Y),ou(ue),ou(ue.next),ue=M=Pe),ue=ue.next}while(ue!==M);return pl(ue)}function tp(M,O,Y,ue,Se,Pe){var Ne=M;do{for(var Je=Ne.next.next;Je!==Ne.prev;){if(Ne.i!==Je.i&&op(Ne,Je)){var it=hf(Ne,Je);return Ne=pl(Ne,Ne.next),it=pl(it,it.next),iu(Ne,O,Y,ue,Se,Pe),void iu(it,O,Y,ue,Se,Pe)}Je=Je.next}Ne=Ne.next}while(Ne!==M)}function np(M,O){return M.x-O.x}function rp(M,O){if(O=function(ue,Se){var Pe,Ne=Se,Je=ue.x,it=ue.y,yt=-1/0;do{if(it<=Ne.y&&it>=Ne.next.y&&Ne.next.y!==Ne.y){var _t=Ne.x+(it-Ne.y)*(Ne.next.x-Ne.x)/(Ne.next.y-Ne.y);if(_t<=Je&&_t>yt){if(yt=_t,_t===Je){if(it===Ne.y)return Ne;if(it===Ne.next.y)return Ne.next}Pe=Ne.x<Ne.next.x?Ne:Ne.next}}Ne=Ne.next}while(Ne!==Se);if(!Pe)return null;if(Je===yt)return Pe;var Pt,Nt=Pe,Dt=Pe.x,Qt=Pe.y,rn=1/0;Ne=Pe;do Je>=Ne.x&&Ne.x>=Dt&&Je!==Ne.x&&Ol(it<Qt?Je:yt,it,Dt,Qt,it<Qt?yt:Je,it,Ne.x,Ne.y)&&(Pt=Math.abs(it-Ne.y)/(Je-Ne.x),au(Ne,ue)&&(Pt<rn||Pt===rn&&(Ne.x>Pe.x||Ne.x===Pe.x&&ip(Pe,Ne)))&&(Pe=Ne,rn=Pt)),Ne=Ne.next;while(Ne!==Nt);return Pe}(M,O)){var Y=hf(O,M);pl(O,O.next),pl(Y,Y.next)}}function ip(M,O){return Qi(M.prev,M,O.prev)<0&&Qi(O.next,M,M.next)<0}function _c(M,O,Y,ue,Se){return(M=1431655765&((M=858993459&((M=252645135&((M=16711935&((M=32767*(M-Y)*Se)|M<<8))|M<<4))|M<<2))|M<<1))|(O=1431655765&((O=858993459&((O=252645135&((O=16711935&((O=32767*(O-ue)*Se)|O<<8))|O<<4))|O<<2))|O<<1))<<1}function ap(M){var O=M,Y=M;do(O.x<Y.x||O.x===Y.x&&O.y<Y.y)&&(Y=O),O=O.next;while(O!==M);return Y}function Ol(M,O,Y,ue,Se,Pe,Ne,Je){return(Se-Ne)*(O-Je)-(M-Ne)*(Pe-Je)>=0&&(M-Ne)*(ue-Je)-(Y-Ne)*(O-Je)>=0&&(Y-Ne)*(Pe-Je)-(Se-Ne)*(ue-Je)>=0}function op(M,O){return M.next.i!==O.i&&M.prev.i!==O.i&&!function(Y,ue){var Se=Y;do{if(Se.i!==Y.i&&Se.next.i!==Y.i&&Se.i!==ue.i&&Se.next.i!==ue.i&&ff(Se,Se.next,Y,ue))return!0;Se=Se.next}while(Se!==Y);return!1}(M,O)&&(au(M,O)&&au(O,M)&&function(Y,ue){var Se=Y,Pe=!1,Ne=(Y.x+ue.x)/2,Je=(Y.y+ue.y)/2;do Se.y>Je!=Se.next.y>Je&&Se.next.y!==Se.y&&Ne<(Se.next.x-Se.x)*(Je-Se.y)/(Se.next.y-Se.y)+Se.x&&(Pe=!Pe),Se=Se.next;while(Se!==Y);return Pe}(M,O)&&(Qi(M.prev,M,O.prev)||Qi(M,O.prev,O))||Bu(M,O)&&Qi(M.prev,M,M.next)>0&&Qi(O.prev,O,O.next)>0)}function Qi(M,O,Y){return(O.y-M.y)*(Y.x-O.x)-(O.x-M.x)*(Y.y-O.y)}function Bu(M,O){return M.x===O.x&&M.y===O.y}function ff(M,O,Y,ue){var Se=ju(Qi(M,O,Y)),Pe=ju(Qi(M,O,ue)),Ne=ju(Qi(Y,ue,M)),Je=ju(Qi(Y,ue,O));return Se!==Pe&&Ne!==Je||!(Se!==0||!Nu(M,Y,O))||!(Pe!==0||!Nu(M,ue,O))||!(Ne!==0||!Nu(Y,M,ue))||!(Je!==0||!Nu(Y,O,ue))}function Nu(M,O,Y){return O.x<=Math.max(M.x,Y.x)&&O.x>=Math.min(M.x,Y.x)&&O.y<=Math.max(M.y,Y.y)&&O.y>=Math.min(M.y,Y.y)}function ju(M){return M>0?1:M<0?-1:0}function au(M,O){return Qi(M.prev,M,M.next)<0?Qi(M,O,M.next)>=0&&Qi(M,M.prev,O)>=0:Qi(M,O,M.prev)<0||Qi(M,M.next,O)<0}function hf(M,O){var Y=new wc(M.i,M.x,M.y),ue=new wc(O.i,O.x,O.y),Se=M.next,Pe=O.prev;return M.next=O,O.prev=M,Y.next=Se,Se.prev=Y,ue.next=Y,Y.prev=ue,Pe.next=ue,ue.prev=Pe,ue}function pf(M,O,Y,ue){var Se=new wc(M,O,Y);return ue?(Se.next=ue.next,Se.prev=ue,ue.next.prev=Se,ue.next=Se):(Se.prev=Se,Se.next=Se),Se}function ou(M){M.next.prev=M.prev,M.prev.next=M.next,M.prevZ&&(M.prevZ.nextZ=M.nextZ),M.nextZ&&(M.nextZ.prevZ=M.prevZ)}function wc(M,O,Y){this.i=M,this.x=O,this.y=Y,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Tc(M,O,Y,ue){for(var Se=0,Pe=O,Ne=Y-ue;Pe<Y;Pe+=ue)Se+=(M[Ne]-M[Pe])*(M[Pe+1]+M[Ne+1]),Ne=Pe;return Se}function sp(M,O,Y,ue,Se){df(M,O,Y||0,ue||M.length-1,Se||lp)}function df(M,O,Y,ue,Se){for(;ue>Y;){if(ue-Y>600){var Pe=ue-Y+1,Ne=O-Y+1,Je=Math.log(Pe),it=.5*Math.exp(2*Je/3),yt=.5*Math.sqrt(Je*it*(Pe-it)/Pe)*(Ne-Pe/2<0?-1:1);df(M,O,Math.max(Y,Math.floor(O-Ne*it/Pe+yt)),Math.min(ue,Math.floor(O+(Pe-Ne)*it/Pe+yt)),Se)}var _t=M[O],Pt=Y,Nt=ue;for(su(M,Y,O),Se(M[ue],_t)>0&&su(M,Y,ue);Pt<Nt;){for(su(M,Pt,Nt),Pt++,Nt--;Se(M[Pt],_t)<0;)Pt++;for(;Se(M[Nt],_t)>0;)Nt--}Se(M[Y],_t)===0?su(M,Y,Nt):su(M,++Nt,ue),Nt<=O&&(Y=Nt+1),O<=Nt&&(ue=Nt-1)}}function su(M,O,Y){var ue=M[O];M[O]=M[Y],M[Y]=ue}function lp(M,O){return M<O?-1:M>O?1:0}function kc(M,O){var Y=M.length;if(Y<=1)return[M];for(var ue,Se,Pe=[],Ne=0;Ne<Y;Ne++){var Je=E(M[Ne]);Je!==0&&(M[Ne].area=Math.abs(Je),Se===void 0&&(Se=Je<0),Se===Je<0?(ue&&Pe.push(ue),ue=[M[Ne]]):ue.push(M[Ne]))}if(ue&&Pe.push(ue),O>1)for(var it=0;it<Pe.length;it++)Pe[it].length<=O||(sp(Pe[it],O,1,Pe[it].length-1,up),Pe[it]=Pe[it].slice(0,O));return Pe}function up(M,O){return O.area-M.area}function Ac(M,O,Y){for(var ue=Y.patternDependencies,Se=!1,Pe=0,Ne=O;Pe<Ne.length;Pe+=1){var Je=Ne[Pe].paint.get(M+"-pattern");Je.isConstant()||(Se=!0);var it=Je.constantOr(null);it&&(Se=!0,ue[it.to]=!0,ue[it.from]=!0)}return Se}function Mc(M,O,Y,ue,Se){for(var Pe=Se.patternDependencies,Ne=0,Je=O;Ne<Je.length;Ne+=1){var it=Je[Ne],yt=it.paint.get(M+"-pattern").value;if(yt.kind!=="constant"){var _t=yt.evaluate({zoom:ue-1},Y,{},Se.availableImages),Pt=yt.evaluate({zoom:ue},Y,{},Se.availableImages),Nt=yt.evaluate({zoom:ue+1},Y,{},Se.availableImages);_t=_t&&_t.name?_t.name:_t,Pt=Pt&&Pt.name?Pt.name:Pt,Nt=Nt&&Nt.name?Nt.name:Nt,Pe[_t]=!0,Pe[Pt]=!0,Pe[Nt]=!0,Y.patterns[it.id]={min:_t,mid:Pt,max:Nt}}}return Y}Fu.deviation=function(M,O,Y,ue){var Se=O&&O.length,Pe=Se?O[0]*Y:M.length,Ne=Math.abs(Tc(M,0,Pe,Y));if(Se)for(var Je=0,it=O.length;Je<it;Je++){var yt=O[Je]*Y,_t=Je<it-1?O[Je+1]*Y:M.length;Ne-=Math.abs(Tc(M,yt,_t,Y))}var Pt=0;for(Je=0;Je<ue.length;Je+=3){var Nt=ue[Je]*Y,Dt=ue[Je+1]*Y,Qt=ue[Je+2]*Y;Pt+=Math.abs((M[Nt]-M[Qt])*(M[Dt+1]-M[Nt+1])-(M[Nt]-M[Dt])*(M[Qt+1]-M[Nt+1]))}return Ne===0&&Pt===0?0:Math.abs((Pt-Ne)/Ne)},Fu.flatten=function(M){for(var O=M[0][0].length,Y={vertices:[],holes:[],dimensions:O},ue=0,Se=0;Se<M.length;Se++){for(var Pe=0;Pe<M[Se].length;Pe++)for(var Ne=0;Ne<O;Ne++)Y.vertices.push(M[Se][Pe][Ne]);Se>0&&(ue+=M[Se-1].length,Y.holes.push(ue))}return Y},bc.default=Kh;var Ts=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new da,this.indexArray=new K,this.indexArray2=new je,this.programConfigurations=new fi(uf,M.layers,M.zoom),this.segments=new vn,this.segments2=new vn,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};Ts.prototype.populate=function(M,O,Y){this.hasPattern=Ac("fill",this.layers,O);for(var ue=this.layers[0].layout.get("fill-sort-key"),Se=[],Pe=0,Ne=M;Pe<Ne.length;Pe+=1){var Je=Ne[Pe],it=Je.feature,yt=Je.id,_t=Je.index,Pt=Je.sourceLayerIndex,Nt=this.layers[0]._featureFilter.needGeometry,Dt={type:it.type,id:yt,properties:it.properties,geometry:Nt?Ca(it):[]};if(this.layers[0]._featureFilter.filter(new Xr(this.zoom),Dt,Y)){Nt||(Dt.geometry=Ca(it));var Qt=ue?ue.evaluate(Dt,{},Y,O.availableImages):void 0,rn={id:yt,properties:it.properties,type:it.type,sourceLayerIndex:Pt,index:_t,geometry:Dt.geometry,patterns:{},sortKey:Qt};Se.push(rn)}}ue&&Se.sort(function(gr,_r){return gr.sortKey-_r.sortKey});for(var wn=0,_n=Se;wn<_n.length;wn+=1){var Ln=_n[wn],On=Ln,Nn=On.geometry,qn=On.index,Jn=On.sourceLayerIndex;if(this.hasPattern){var hr=Mc("fill",this.layers,Ln,this.zoom,O);this.patternFeatures.push(hr)}else this.addFeature(Ln,Nn,qn,Y,{});var sr=M[qn].feature;O.featureIndex.insert(sr,Nn,qn,Jn,this.index)}},Ts.prototype.update=function(M,O,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,O,this.stateDependentLayers,Y)},Ts.prototype.addFeatures=function(M,O,Y){for(var ue=0,Se=this.patternFeatures;ue<Se.length;ue+=1){var Pe=Se[ue];this.addFeature(Pe,Pe.geometry,Pe.index,O,Y)}},Ts.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ts.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ts.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,uf),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.indexBuffer2=M.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(M),this.uploaded=!0},Ts.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Ts.prototype.addFeature=function(M,O,Y,ue,Se){for(var Pe=0,Ne=kc(O,500);Pe<Ne.length;Pe+=1){for(var Je=Ne[Pe],it=0,yt=0,_t=Je;yt<_t.length;yt+=1)it+=_t[yt].length;for(var Pt=this.segments.prepareSegment(it,this.layoutVertexArray,this.indexArray),Nt=Pt.vertexLength,Dt=[],Qt=[],rn=0,wn=Je;rn<wn.length;rn+=1){var _n=wn[rn];if(_n.length!==0){_n!==Je[0]&&Qt.push(Dt.length/2);var Ln=this.segments2.prepareSegment(_n.length,this.layoutVertexArray,this.indexArray2),On=Ln.vertexLength;this.layoutVertexArray.emplaceBack(_n[0].x,_n[0].y),this.indexArray2.emplaceBack(On+_n.length-1,On),Dt.push(_n[0].x),Dt.push(_n[0].y);for(var Nn=1;Nn<_n.length;Nn++)this.layoutVertexArray.emplaceBack(_n[Nn].x,_n[Nn].y),this.indexArray2.emplaceBack(On+Nn-1,On+Nn),Dt.push(_n[Nn].x),Dt.push(_n[Nn].y);Ln.vertexLength+=_n.length,Ln.primitiveLength+=_n.length}}for(var qn=bc(Dt,Qt),Jn=0;Jn<qn.length;Jn+=3)this.indexArray.emplaceBack(Nt+qn[Jn],Nt+qn[Jn+1],Nt+qn[Jn+2]);Pt.vertexLength+=it,Pt.primitiveLength+=qn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,Y,Se,ue)},xr("FillBucket",Ts,{omit:["layers","patternFeatures"]});var cp=new Wi({"fill-sort-key":new Ar(Ie.layout_fill["fill-sort-key"])}),fp={paint:new Wi({"fill-antialias":new Tr(Ie.paint_fill["fill-antialias"]),"fill-opacity":new Ar(Ie.paint_fill["fill-opacity"]),"fill-color":new Ar(Ie.paint_fill["fill-color"]),"fill-outline-color":new Ar(Ie.paint_fill["fill-outline-color"]),"fill-translate":new Tr(Ie.paint_fill["fill-translate"]),"fill-translate-anchor":new Tr(Ie.paint_fill["fill-translate-anchor"]),"fill-pattern":new ss(Ie.paint_fill["fill-pattern"])}),layout:cp},hp=function(M){function O(Y){M.call(this,Y,fp)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.recalculate=function(Y,ue){M.prototype.recalculate.call(this,Y,ue);var Se=this.paint._values["fill-outline-color"];Se.value.kind==="constant"&&Se.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},O.prototype.createBucket=function(Y){return new Ts(Y)},O.prototype.queryRadius=function(){return Iu(this.paint.get("fill-translate"))},O.prototype.queryIntersectsFeature=function(Y,ue,Se,Pe,Ne,Je,it){return Pu(Du(Y,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Je.angle,it),Pe)},O.prototype.isTileClipped=function(){return!0},O}(Xi),gf=zi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,vf=Il;function Il(M,O,Y,ue,Se){this.properties={},this.extent=Y,this.type=0,this._pbf=M,this._geometry=-1,this._keys=ue,this._values=Se,M.readFields(pp,this,O)}function pp(M,O,Y){M==1?O.id=Y.readVarint():M==2?function(ue,Se){for(var Pe=ue.readVarint()+ue.pos;ue.pos<Pe;){var Ne=Se._keys[ue.readVarint()],Je=Se._values[ue.readVarint()];Se.properties[Ne]=Je}}(Y,O):M==3?O.type=Y.readVarint():M==4&&(O._geometry=Y.pos)}function dp(M){for(var O,Y,ue=0,Se=0,Pe=M.length,Ne=Pe-1;Se<Pe;Ne=Se++)O=M[Se],ue+=((Y=M[Ne]).x-O.x)*(O.y+Y.y);return ue}Il.types=["Unknown","Point","LineString","Polygon"],Il.prototype.loadGeometry=function(){var M=this._pbf;M.pos=this._geometry;for(var O,Y=M.readVarint()+M.pos,ue=1,Se=0,Pe=0,Ne=0,Je=[];M.pos<Y;){if(Se<=0){var it=M.readVarint();ue=7&it,Se=it>>3}if(Se--,ue===1||ue===2)Pe+=M.readSVarint(),Ne+=M.readSVarint(),ue===1&&(O&&Je.push(O),O=[]),O.push(new e(Pe,Ne));else{if(ue!==7)throw new Error("unknown command "+ue);O&&O.push(O[0].clone())}}return O&&Je.push(O),Je},Il.prototype.bbox=function(){var M=this._pbf;M.pos=this._geometry;for(var O=M.readVarint()+M.pos,Y=1,ue=0,Se=0,Pe=0,Ne=1/0,Je=-1/0,it=1/0,yt=-1/0;M.pos<O;){if(ue<=0){var _t=M.readVarint();Y=7&_t,ue=_t>>3}if(ue--,Y===1||Y===2)(Se+=M.readSVarint())<Ne&&(Ne=Se),Se>Je&&(Je=Se),(Pe+=M.readSVarint())<it&&(it=Pe),Pe>yt&&(yt=Pe);else if(Y!==7)throw new Error("unknown command "+Y)}return[Ne,it,Je,yt]},Il.prototype.toGeoJSON=function(M,O,Y){var ue,Se,Pe=this.extent*Math.pow(2,Y),Ne=this.extent*M,Je=this.extent*O,it=this.loadGeometry(),yt=Il.types[this.type];function _t(Dt){for(var Qt=0;Qt<Dt.length;Qt++){var rn=Dt[Qt],wn=180-360*(rn.y+Je)/Pe;Dt[Qt]=[360*(rn.x+Ne)/Pe-180,360/Math.PI*Math.atan(Math.exp(wn*Math.PI/180))-90]}}switch(this.type){case 1:var Pt=[];for(ue=0;ue<it.length;ue++)Pt[ue]=it[ue][0];_t(it=Pt);break;case 2:for(ue=0;ue<it.length;ue++)_t(it[ue]);break;case 3:for(it=function(Dt){var Qt=Dt.length;if(Qt<=1)return[Dt];for(var rn,wn,_n=[],Ln=0;Ln<Qt;Ln++){var On=dp(Dt[Ln]);On!==0&&(wn===void 0&&(wn=On<0),wn===On<0?(rn&&_n.push(rn),rn=[Dt[Ln]]):rn.push(Dt[Ln]))}return rn&&_n.push(rn),_n}(it),ue=0;ue<it.length;ue++)for(Se=0;Se<it[ue].length;Se++)_t(it[ue][Se])}it.length===1?it=it[0]:yt="Multi"+yt;var Nt={type:"Feature",geometry:{type:yt,coordinates:it},properties:this.properties};return"id"in this&&(Nt.id=this.id),Nt};var mf=yf;function yf(M,O){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=M,this._keys=[],this._values=[],this._features=[],M.readFields(gp,this,O),this.length=this._features.length}function gp(M,O,Y){M===15?O.version=Y.readVarint():M===1?O.name=Y.readString():M===5?O.extent=Y.readVarint():M===2?O._features.push(Y.pos):M===3?O._keys.push(Y.readString()):M===4&&O._values.push(function(ue){for(var Se=null,Pe=ue.readVarint()+ue.pos;ue.pos<Pe;){var Ne=ue.readVarint()>>3;Se=Ne===1?ue.readString():Ne===2?ue.readFloat():Ne===3?ue.readDouble():Ne===4?ue.readVarint64():Ne===5?ue.readVarint():Ne===6?ue.readSVarint():Ne===7?ue.readBoolean():null}return Se}(Y))}function vp(M,O,Y){if(M===3){var ue=new mf(Y,Y.readVarint()+Y.pos);ue.length&&(O[ue.name]=ue)}}yf.prototype.feature=function(M){if(M<0||M>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[M];var O=this._pbf.readVarint()+this._pbf.pos;return new vf(this._pbf,O,this.extent,this._keys,this._values)};var Dl={VectorTile:function(M,O){this.layers=M.readFields(vp,{},O)},VectorTileFeature:vf,VectorTileLayer:mf},mp=Dl.VectorTileFeature.types,Sc=Math.pow(2,13);function lu(M,O,Y,ue,Se,Pe,Ne,Je){M.emplaceBack(O,Y,2*Math.floor(ue*Sc)+Ne,Se*Sc*2,Pe*Sc*2,Math.round(Je))}var ks=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new us,this.indexArray=new K,this.programConfigurations=new fi(gf,M.layers,M.zoom),this.segments=new vn,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};function yp(M,O){return M.x===O.x&&(M.x<0||M.x>Wr)||M.y===O.y&&(M.y<0||M.y>Wr)}ks.prototype.populate=function(M,O,Y){this.features=[],this.hasPattern=Ac("fill-extrusion",this.layers,O);for(var ue=0,Se=M;ue<Se.length;ue+=1){var Pe=Se[ue],Ne=Pe.feature,Je=Pe.id,it=Pe.index,yt=Pe.sourceLayerIndex,_t=this.layers[0]._featureFilter.needGeometry,Pt={type:Ne.type,id:Je,properties:Ne.properties,geometry:_t?Ca(Ne):[]};if(this.layers[0]._featureFilter.filter(new Xr(this.zoom),Pt,Y)){var Nt={id:Je,sourceLayerIndex:yt,index:it,geometry:_t?Pt.geometry:Ca(Ne),properties:Ne.properties,type:Ne.type,patterns:{}};Ne.id!==void 0&&(Nt.id=Ne.id),this.hasPattern?this.features.push(Mc("fill-extrusion",this.layers,Nt,this.zoom,O)):this.addFeature(Nt,Nt.geometry,it,Y,{}),O.featureIndex.insert(Ne,Nt.geometry,it,yt,this.index,!0)}}},ks.prototype.addFeatures=function(M,O,Y){for(var ue=0,Se=this.features;ue<Se.length;ue+=1){var Pe=Se[ue],Ne=Pe.geometry;this.addFeature(Pe,Ne,Pe.index,O,Y)}},ks.prototype.update=function(M,O,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,O,this.stateDependentLayers,Y)},ks.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ks.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ks.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,gf),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},ks.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ks.prototype.addFeature=function(M,O,Y,ue,Se){for(var Pe=0,Ne=kc(O,500);Pe<Ne.length;Pe+=1){for(var Je=Ne[Pe],it=0,yt=0,_t=Je;yt<_t.length;yt+=1)it+=_t[yt].length;for(var Pt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Nt=0,Dt=Je;Nt<Dt.length;Nt+=1){var Qt=Dt[Nt];if(Qt.length!==0&&!((jr=Qt).every(function(zr){return zr.x<0})||jr.every(function(zr){return zr.x>Wr})||jr.every(function(zr){return zr.y<0})||jr.every(function(zr){return zr.y>Wr})))for(var rn=0,wn=0;wn<Qt.length;wn++){var _n=Qt[wn];if(wn>=1){var Ln=Qt[wn-1];if(!yp(_n,Ln)){Pt.vertexLength+4>vn.MAX_VERTEX_ARRAY_LENGTH&&(Pt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var On=_n.sub(Ln)._perp()._unit(),Nn=Ln.dist(_n);rn+Nn>32768&&(rn=0),lu(this.layoutVertexArray,_n.x,_n.y,On.x,On.y,0,0,rn),lu(this.layoutVertexArray,_n.x,_n.y,On.x,On.y,0,1,rn),rn+=Nn,lu(this.layoutVertexArray,Ln.x,Ln.y,On.x,On.y,0,0,rn),lu(this.layoutVertexArray,Ln.x,Ln.y,On.x,On.y,0,1,rn);var qn=Pt.vertexLength;this.indexArray.emplaceBack(qn,qn+2,qn+1),this.indexArray.emplaceBack(qn+1,qn+2,qn+3),Pt.vertexLength+=4,Pt.primitiveLength+=2}}}}if(Pt.vertexLength+it>vn.MAX_VERTEX_ARRAY_LENGTH&&(Pt=this.segments.prepareSegment(it,this.layoutVertexArray,this.indexArray)),mp[M.type]==="Polygon"){for(var Jn=[],hr=[],sr=Pt.vertexLength,gr=0,_r=Je;gr<_r.length;gr+=1){var Dr=_r[gr];if(Dr.length!==0){Dr!==Je[0]&&hr.push(Jn.length/2);for(var kr=0;kr<Dr.length;kr++){var Or=Dr[kr];lu(this.layoutVertexArray,Or.x,Or.y,0,0,1,1,0),Jn.push(Or.x),Jn.push(Or.y)}}}for(var Er=bc(Jn,hr),wr=0;wr<Er.length;wr+=3)this.indexArray.emplaceBack(sr+Er[wr],sr+Er[wr+2],sr+Er[wr+1]);Pt.primitiveLength+=Er.length/3,Pt.vertexLength+=it}}var jr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,Y,Se,ue)},xr("FillExtrusionBucket",ks,{omit:["layers","features"]});var xp={paint:new Wi({"fill-extrusion-opacity":new Tr(Ie["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ar(Ie["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Tr(Ie["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Tr(Ie["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ss(Ie["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ar(Ie["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ar(Ie["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Tr(Ie["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},bp=function(M){function O(Y){M.call(this,Y,xp)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.createBucket=function(Y){return new ks(Y)},O.prototype.queryRadius=function(){return Iu(this.paint.get("fill-extrusion-translate"))},O.prototype.is3D=function(){return!0},O.prototype.queryIntersectsFeature=function(Y,ue,Se,Pe,Ne,Je,it,yt){var _t=Du(Y,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Je.angle,it),Pt=this.paint.get("fill-extrusion-height").evaluate(ue,Se),Nt=this.paint.get("fill-extrusion-base").evaluate(ue,Se),Dt=function(rn,wn,_n,Ln){for(var On=[],Nn=0,qn=rn;Nn<qn.length;Nn+=1){var Jn=qn[Nn],hr=[Jn.x,Jn.y,Ln,1];Ru(hr,hr,wn),On.push(new e(hr[0]/hr[3],hr[1]/hr[3]))}return On}(_t,yt,0,0),Qt=function(rn,wn,_n,Ln){for(var On=[],Nn=[],qn=Ln[8]*wn,Jn=Ln[9]*wn,hr=Ln[10]*wn,sr=Ln[11]*wn,gr=Ln[8]*_n,_r=Ln[9]*_n,Dr=Ln[10]*_n,kr=Ln[11]*_n,Or=0,Er=rn;Or<Er.length;Or+=1){for(var wr=[],jr=[],zr=0,hi=Er[Or];zr<hi.length;zr+=1){var Pr=hi[zr],ii=Pr.x,vi=Pr.y,yi=Ln[0]*ii+Ln[4]*vi+Ln[12],xi=Ln[1]*ii+Ln[5]*vi+Ln[13],pi=Ln[2]*ii+Ln[6]*vi+Ln[14],na=Ln[3]*ii+Ln[7]*vi+Ln[15],Mi=pi+hr,ua=na+sr,ka=yi+gr,ma=xi+_r,Ua=pi+Dr,ya=na+kr,aa=new e((yi+qn)/ua,(xi+Jn)/ua);aa.z=Mi/ua,wr.push(aa);var xa=new e(ka/ya,ma/ya);xa.z=Ua/ya,jr.push(xa)}On.push(wr),Nn.push(jr)}return[On,Nn]}(Pe,Nt,Pt,yt);return function(rn,wn,_n){var Ln=1/0;Pu(_n,wn)&&(Ln=xf(_n,wn[0]));for(var On=0;On<wn.length;On++)for(var Nn=wn[On],qn=rn[On],Jn=0;Jn<Nn.length-1;Jn++){var hr=Nn[Jn],sr=Nn[Jn+1],gr=qn[Jn],_r=[hr,sr,qn[Jn+1],gr,hr];ja(_n,_r)&&(Ln=Math.min(Ln,xf(_n,_r)))}return Ln!==1/0&&Ln}(Qt[0],Qt[1],Dt)},O}(Xi);function uu(M,O){return M.x*O.x+M.y*O.y}function xf(M,O){if(M.length===1){for(var Y,ue=0,Se=O[ue++];!Y||Se.equals(Y);)if(!(Y=O[ue++]))return 1/0;for(;ue<O.length;ue++){var Pe=O[ue],Ne=M[0],Je=Y.sub(Se),it=Pe.sub(Se),yt=Ne.sub(Se),_t=uu(Je,Je),Pt=uu(Je,it),Nt=uu(it,it),Dt=uu(yt,Je),Qt=uu(yt,it),rn=_t*Nt-Pt*Pt,wn=(Nt*Dt-Pt*Qt)/rn,_n=(_t*Qt-Pt*Dt)/rn,Ln=1-wn-_n,On=Se.z*Ln+Y.z*wn+Pe.z*_n;if(isFinite(On))return On}return 1/0}for(var Nn=1/0,qn=0,Jn=O;qn<Jn.length;qn+=1){var hr=Jn[qn];Nn=Math.min(Nn,hr.z)}return Nn}var bf=zi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,_p=Dl.VectorTileFeature.types,wp=Math.cos(Math.PI/180*37.5),_f=Math.pow(2,14)/.5,Qa=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new $o,this.indexArray=new K,this.programConfigurations=new fi(bf,M.layers,M.zoom),this.segments=new vn,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};Qa.prototype.populate=function(M,O,Y){this.hasPattern=Ac("line",this.layers,O);for(var ue=this.layers[0].layout.get("line-sort-key"),Se=[],Pe=0,Ne=M;Pe<Ne.length;Pe+=1){var Je=Ne[Pe],it=Je.feature,yt=Je.id,_t=Je.index,Pt=Je.sourceLayerIndex,Nt=this.layers[0]._featureFilter.needGeometry,Dt={type:it.type,id:yt,properties:it.properties,geometry:Nt?Ca(it):[]};if(this.layers[0]._featureFilter.filter(new Xr(this.zoom),Dt,Y)){Nt||(Dt.geometry=Ca(it));var Qt=ue?ue.evaluate(Dt,{},Y):void 0,rn={id:yt,properties:it.properties,type:it.type,sourceLayerIndex:Pt,index:_t,geometry:Dt.geometry,patterns:{},sortKey:Qt};Se.push(rn)}}ue&&Se.sort(function(gr,_r){return gr.sortKey-_r.sortKey});for(var wn=0,_n=Se;wn<_n.length;wn+=1){var Ln=_n[wn],On=Ln,Nn=On.geometry,qn=On.index,Jn=On.sourceLayerIndex;if(this.hasPattern){var hr=Mc("line",this.layers,Ln,this.zoom,O);this.patternFeatures.push(hr)}else this.addFeature(Ln,Nn,qn,Y,{});var sr=M[qn].feature;O.featureIndex.insert(sr,Nn,qn,Jn,this.index)}},Qa.prototype.update=function(M,O,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,O,this.stateDependentLayers,Y)},Qa.prototype.addFeatures=function(M,O,Y){for(var ue=0,Se=this.patternFeatures;ue<Se.length;ue+=1){var Pe=Se[ue];this.addFeature(Pe,Pe.geometry,Pe.index,O,Y)}},Qa.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Qa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Qa.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,bf),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},Qa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Qa.prototype.addFeature=function(M,O,Y,ue,Se){for(var Pe=this.layers[0].layout,Ne=Pe.get("line-join").evaluate(M,{}),Je=Pe.get("line-cap"),it=Pe.get("line-miter-limit"),yt=Pe.get("line-round-limit"),_t=0,Pt=O;_t<Pt.length;_t+=1){var Nt=Pt[_t];this.addLine(Nt,M,Ne,Je,it,yt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,Y,Se,ue)},Qa.prototype.addLine=function(M,O,Y,ue,Se,Pe){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,O.properties&&O.properties.hasOwnProperty("mapbox_clip_start")&&O.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+O.properties.mapbox_clip_start,this.clipEnd=+O.properties.mapbox_clip_end;for(var Ne=0;Ne<M.length-1;Ne++)this.totalDistance+=M[Ne].dist(M[Ne+1]);this.updateScaledDistance()}for(var Je=_p[O.type]==="Polygon",it=M.length;it>=2&&M[it-1].equals(M[it-2]);)it--;for(var yt=0;yt<it-1&&M[yt].equals(M[yt+1]);)yt++;if(!(it<(Je?3:2))){Y==="bevel"&&(Se=1.05);var _t,Pt=this.overscaling<=16?15*Wr/(512*this.overscaling):0,Nt=this.segments.prepareSegment(10*it,this.layoutVertexArray,this.indexArray),Dt=void 0,Qt=void 0,rn=void 0,wn=void 0;this.e1=this.e2=-1,Je&&(_t=M[it-2],wn=M[yt].sub(_t)._unit()._perp());for(var _n=yt;_n<it;_n++)if(!(Qt=_n===it-1?Je?M[yt+1]:void 0:M[_n+1])||!M[_n].equals(Qt)){wn&&(rn=wn),_t&&(Dt=_t),_t=M[_n],wn=Qt?Qt.sub(_t)._unit()._perp():rn;var Ln=(rn=rn||wn).add(wn);Ln.x===0&&Ln.y===0||Ln._unit();var On=rn.x*wn.x+rn.y*wn.y,Nn=Ln.x*wn.x+Ln.y*wn.y,qn=Nn!==0?1/Nn:1/0,Jn=2*Math.sqrt(2-2*Nn),hr=Nn<wp&&Dt&&Qt,sr=rn.x*wn.y-rn.y*wn.x>0;if(hr&&_n>yt){var gr=_t.dist(Dt);if(gr>2*Pt){var _r=_t.sub(_t.sub(Dt)._mult(Pt/gr)._round());this.updateDistance(Dt,_r),this.addCurrentVertex(_r,rn,0,0,Nt),Dt=_r}}var Dr=Dt&&Qt,kr=Dr?Y:Je?"butt":ue;if(Dr&&kr==="round"&&(qn<Pe?kr="miter":qn<=2&&(kr="fakeround")),kr==="miter"&&qn>Se&&(kr="bevel"),kr==="bevel"&&(qn>2&&(kr="flipbevel"),qn<Se&&(kr="miter")),Dt&&this.updateDistance(Dt,_t),kr==="miter")Ln._mult(qn),this.addCurrentVertex(_t,Ln,0,0,Nt);else if(kr==="flipbevel"){if(qn>100)Ln=wn.mult(-1);else{var Or=qn*rn.add(wn).mag()/rn.sub(wn).mag();Ln._perp()._mult(Or*(sr?-1:1))}this.addCurrentVertex(_t,Ln,0,0,Nt),this.addCurrentVertex(_t,Ln.mult(-1),0,0,Nt)}else if(kr==="bevel"||kr==="fakeround"){var Er=-Math.sqrt(qn*qn-1),wr=sr?Er:0,jr=sr?0:Er;if(Dt&&this.addCurrentVertex(_t,rn,wr,jr,Nt),kr==="fakeround")for(var zr=Math.round(180*Jn/Math.PI/20),hi=1;hi<zr;hi++){var Pr=hi/zr;if(Pr!==.5){var ii=Pr-.5;Pr+=Pr*ii*(Pr-1)*((1.0904+On*(On*(3.55645-1.43519*On)-3.2452))*ii*ii+(.848013+On*(.215638*On-1.06021)))}var vi=wn.sub(rn)._mult(Pr)._add(rn)._unit()._mult(sr?-1:1);this.addHalfVertex(_t,vi.x,vi.y,!1,sr,0,Nt)}Qt&&this.addCurrentVertex(_t,wn,-wr,-jr,Nt)}else if(kr==="butt")this.addCurrentVertex(_t,Ln,0,0,Nt);else if(kr==="square"){var yi=Dt?1:-1;this.addCurrentVertex(_t,Ln,yi,yi,Nt)}else kr==="round"&&(Dt&&(this.addCurrentVertex(_t,rn,0,0,Nt),this.addCurrentVertex(_t,rn,1,1,Nt,!0)),Qt&&(this.addCurrentVertex(_t,wn,-1,-1,Nt,!0),this.addCurrentVertex(_t,wn,0,0,Nt)));if(hr&&_n<it-1){var xi=_t.dist(Qt);if(xi>2*Pt){var pi=_t.add(Qt.sub(_t)._mult(Pt/xi)._round());this.updateDistance(_t,pi),this.addCurrentVertex(pi,wn,0,0,Nt),_t=pi}}}}},Qa.prototype.addCurrentVertex=function(M,O,Y,ue,Se,Pe){Pe===void 0&&(Pe=!1);var Ne=O.x+O.y*Y,Je=O.y-O.x*Y,it=-O.x+O.y*ue,yt=-O.y-O.x*ue;this.addHalfVertex(M,Ne,Je,Pe,!1,Y,Se),this.addHalfVertex(M,it,yt,Pe,!0,-ue,Se),this.distance>_f/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(M,O,Y,ue,Se,Pe))},Qa.prototype.addHalfVertex=function(M,O,Y,ue,Se,Pe,Ne){var Je=M.x,it=M.y,yt=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((Je<<1)+(ue?1:0),(it<<1)+(Se?1:0),Math.round(63*O)+128,Math.round(63*Y)+128,1+(Pe===0?0:Pe<0?-1:1)|(63&yt)<<2,yt>>6);var _t=Ne.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,_t),Ne.primitiveLength++),Se?this.e2=_t:this.e1=_t},Qa.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(_f-1):this.distance},Qa.prototype.updateDistance=function(M,O){this.distance+=M.dist(O),this.updateScaledDistance()},xr("LineBucket",Qa,{omit:["layers","patternFeatures"]});var Tp=new Wi({"line-cap":new Tr(Ie.layout_line["line-cap"]),"line-join":new Ar(Ie.layout_line["line-join"]),"line-miter-limit":new Tr(Ie.layout_line["line-miter-limit"]),"line-round-limit":new Tr(Ie.layout_line["line-round-limit"]),"line-sort-key":new Ar(Ie.layout_line["line-sort-key"])}),wf={paint:new Wi({"line-opacity":new Ar(Ie.paint_line["line-opacity"]),"line-color":new Ar(Ie.paint_line["line-color"]),"line-translate":new Tr(Ie.paint_line["line-translate"]),"line-translate-anchor":new Tr(Ie.paint_line["line-translate-anchor"]),"line-width":new Ar(Ie.paint_line["line-width"]),"line-gap-width":new Ar(Ie.paint_line["line-gap-width"]),"line-offset":new Ar(Ie.paint_line["line-offset"]),"line-blur":new Ar(Ie.paint_line["line-blur"]),"line-dasharray":new ia(Ie.paint_line["line-dasharray"]),"line-pattern":new ss(Ie.paint_line["line-pattern"]),"line-gradient":new Co(Ie.paint_line["line-gradient"])}),layout:Tp},kp=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.possiblyEvaluate=function(Y,ue){return ue=new Xr(Math.floor(ue.zoom),{now:ue.now,fadeDuration:ue.fadeDuration,zoomHistory:ue.zoomHistory,transition:ue.transition}),M.prototype.possiblyEvaluate.call(this,Y,ue)},O.prototype.evaluate=function(Y,ue,Se,Pe){return ue=u({},ue,{zoom:Math.floor(ue.zoom)}),M.prototype.evaluate.call(this,Y,ue,Se,Pe)},O}(Ar),Tf=new kp(wf.paint.properties["line-width"].specification);Tf.useIntegerZoom=!0;var Ap=function(M){function O(Y){M.call(this,Y,wf)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._handleSpecialPaintPropertyUpdate=function(Y){Y==="line-gradient"&&this._updateGradient()},O.prototype._updateGradient=function(){var Y=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=lf(Y,"lineProgress"),this.gradientTexture=null},O.prototype.recalculate=function(Y,ue){M.prototype.recalculate.call(this,Y,ue),this.paint._values["line-floorwidth"]=Tf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,Y)},O.prototype.createBucket=function(Y){return new Qa(Y)},O.prototype.queryRadius=function(Y){var ue=Y,Se=kf(ru("line-width",this,ue),ru("line-gap-width",this,ue)),Pe=ru("line-offset",this,ue);return Se/2+Math.abs(Pe)+Iu(this.paint.get("line-translate"))},O.prototype.queryIntersectsFeature=function(Y,ue,Se,Pe,Ne,Je,it){var yt=Du(Y,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Je.angle,it),_t=it/2*kf(this.paint.get("line-width").evaluate(ue,Se),this.paint.get("line-gap-width").evaluate(ue,Se)),Pt=this.paint.get("line-offset").evaluate(ue,Se);return Pt&&(Pe=function(Nt,Dt){for(var Qt=[],rn=new e(0,0),wn=0;wn<Nt.length;wn++){for(var _n=Nt[wn],Ln=[],On=0;On<_n.length;On++){var Nn=_n[On-1],qn=_n[On],Jn=_n[On+1],hr=On===0?rn:qn.sub(Nn)._unit()._perp(),sr=On===_n.length-1?rn:Jn.sub(qn)._unit()._perp(),gr=hr._add(sr)._unit(),_r=gr.x*sr.x+gr.y*sr.y;gr._mult(1/_r),Ln.push(gr._mult(Dt)._add(qn))}Qt.push(Ln)}return Qt}(Pe,Pt*it)),function(Nt,Dt,Qt){for(var rn=0;rn<Dt.length;rn++){var wn=Dt[rn];if(Nt.length>=3){for(var _n=0;_n<wn.length;_n++)if(hl(Nt,wn[_n]))return!0}if(vc(Nt,wn,Qt))return!0}return!1}(yt,Pe,_t)},O.prototype.isTileClipped=function(){return!0},O}(Xi);function kf(M,O){return O>0?O+2*M:M}var Ec=zi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Mp=zi([{name:"a_projected_pos",components:3,type:"Float32"}],4),Sp=(zi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),zi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Af=(zi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),zi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Ep=zi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Lp(M,O,Y){return M.sections.forEach(function(ue){ue.text=function(Se,Pe,Ne){var Je=Pe.layout.get("text-transform").evaluate(Ne,{});return Je==="uppercase"?Se=Se.toLocaleUpperCase():Je==="lowercase"&&(Se=Se.toLocaleLowerCase()),_i.applyArabicShaping&&(Se=_i.applyArabicShaping(Se)),Se}(ue.text,O,Y)}),M}zi([{name:"triangle",components:3,type:"Uint16"}]),zi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),zi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),zi([{type:"Float32",name:"offsetX"}]),zi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var cu={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},va=24,Mf=function(M,O,Y,ue,Se){var Pe,Ne,Je=8*Se-ue-1,it=(1<<Je)-1,yt=it>>1,_t=-7,Pt=Y?Se-1:0,Nt=Y?-1:1,Dt=M[O+Pt];for(Pt+=Nt,Pe=Dt&(1<<-_t)-1,Dt>>=-_t,_t+=Je;_t>0;Pe=256*Pe+M[O+Pt],Pt+=Nt,_t-=8);for(Ne=Pe&(1<<-_t)-1,Pe>>=-_t,_t+=ue;_t>0;Ne=256*Ne+M[O+Pt],Pt+=Nt,_t-=8);if(Pe===0)Pe=1-yt;else{if(Pe===it)return Ne?NaN:1/0*(Dt?-1:1);Ne+=Math.pow(2,ue),Pe-=yt}return(Dt?-1:1)*Ne*Math.pow(2,Pe-ue)},Sf=function(M,O,Y,ue,Se,Pe){var Ne,Je,it,yt=8*Pe-Se-1,_t=(1<<yt)-1,Pt=_t>>1,Nt=Se===23?Math.pow(2,-24)-Math.pow(2,-77):0,Dt=ue?0:Pe-1,Qt=ue?1:-1,rn=O<0||O===0&&1/O<0?1:0;for(O=Math.abs(O),isNaN(O)||O===1/0?(Je=isNaN(O)?1:0,Ne=_t):(Ne=Math.floor(Math.log(O)/Math.LN2),O*(it=Math.pow(2,-Ne))<1&&(Ne--,it*=2),(O+=Ne+Pt>=1?Nt/it:Nt*Math.pow(2,1-Pt))*it>=2&&(Ne++,it/=2),Ne+Pt>=_t?(Je=0,Ne=_t):Ne+Pt>=1?(Je=(O*it-1)*Math.pow(2,Se),Ne+=Pt):(Je=O*Math.pow(2,Pt-1)*Math.pow(2,Se),Ne=0));Se>=8;M[Y+Dt]=255&Je,Dt+=Qt,Je/=256,Se-=8);for(Ne=Ne<<Se|Je,yt+=Se;yt>0;M[Y+Dt]=255&Ne,Dt+=Qt,Ne/=256,yt-=8);M[Y+Dt-Qt]|=128*rn},Uu=gi;function gi(M){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(M)?M:new Uint8Array(M||0),this.pos=0,this.type=0,this.length=this.buf.length}gi.Varint=0,gi.Fixed64=1,gi.Bytes=2,gi.Fixed32=5;var Lc=4294967296,Ef=1/Lc,Lf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ks(M){return M.type===gi.Bytes?M.readVarint()+M.pos:M.pos+1}function zl(M,O,Y){return Y?4294967296*O+(M>>>0):4294967296*(O>>>0)+(M>>>0)}function Cf(M,O,Y){var ue=O<=16383?1:O<=2097151?2:O<=268435455?3:Math.floor(Math.log(O)/(7*Math.LN2));Y.realloc(ue);for(var Se=Y.pos-1;Se>=M;Se--)Y.buf[Se+ue]=Y.buf[Se]}function Cp(M,O){for(var Y=0;Y<M.length;Y++)O.writeVarint(M[Y])}function Pp(M,O){for(var Y=0;Y<M.length;Y++)O.writeSVarint(M[Y])}function Op(M,O){for(var Y=0;Y<M.length;Y++)O.writeFloat(M[Y])}function Ip(M,O){for(var Y=0;Y<M.length;Y++)O.writeDouble(M[Y])}function Dp(M,O){for(var Y=0;Y<M.length;Y++)O.writeBoolean(M[Y])}function zp(M,O){for(var Y=0;Y<M.length;Y++)O.writeFixed32(M[Y])}function Rp(M,O){for(var Y=0;Y<M.length;Y++)O.writeSFixed32(M[Y])}function Fp(M,O){for(var Y=0;Y<M.length;Y++)O.writeFixed64(M[Y])}function Bp(M,O){for(var Y=0;Y<M.length;Y++)O.writeSFixed64(M[Y])}function Vu(M,O){return(M[O]|M[O+1]<<8|M[O+2]<<16)+16777216*M[O+3]}function Rl(M,O,Y){M[Y]=O,M[Y+1]=O>>>8,M[Y+2]=O>>>16,M[Y+3]=O>>>24}function Pf(M,O){return(M[O]|M[O+1]<<8|M[O+2]<<16)+(M[O+3]<<24)}gi.prototype={destroy:function(){this.buf=null},readFields:function(M,O,Y){for(Y=Y||this.length;this.pos<Y;){var ue=this.readVarint(),Se=ue>>3,Pe=this.pos;this.type=7&ue,M(Se,O,this),this.pos===Pe&&this.skip(ue)}return O},readMessage:function(M,O){return this.readFields(M,O,this.readVarint()+this.pos)},readFixed32:function(){var M=Vu(this.buf,this.pos);return this.pos+=4,M},readSFixed32:function(){var M=Pf(this.buf,this.pos);return this.pos+=4,M},readFixed64:function(){var M=Vu(this.buf,this.pos)+Vu(this.buf,this.pos+4)*Lc;return this.pos+=8,M},readSFixed64:function(){var M=Vu(this.buf,this.pos)+Pf(this.buf,this.pos+4)*Lc;return this.pos+=8,M},readFloat:function(){var M=Mf(this.buf,this.pos,!0,23,4);return this.pos+=4,M},readDouble:function(){var M=Mf(this.buf,this.pos,!0,52,8);return this.pos+=8,M},readVarint:function(M){var O,Y,ue=this.buf;return O=127&(Y=ue[this.pos++]),Y<128?O:(O|=(127&(Y=ue[this.pos++]))<<7,Y<128?O:(O|=(127&(Y=ue[this.pos++]))<<14,Y<128?O:(O|=(127&(Y=ue[this.pos++]))<<21,Y<128?O:function(Se,Pe,Ne){var Je,it,yt=Ne.buf;if(Je=(112&(it=yt[Ne.pos++]))>>4,it<128||(Je|=(127&(it=yt[Ne.pos++]))<<3,it<128)||(Je|=(127&(it=yt[Ne.pos++]))<<10,it<128)||(Je|=(127&(it=yt[Ne.pos++]))<<17,it<128)||(Je|=(127&(it=yt[Ne.pos++]))<<24,it<128)||(Je|=(1&(it=yt[Ne.pos++]))<<31,it<128))return zl(Se,Je,Pe);throw new Error("Expected varint not more than 10 bytes")}(O|=(15&(Y=ue[this.pos]))<<28,M,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var M=this.readVarint();return M%2==1?(M+1)/-2:M/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var M=this.readVarint()+this.pos,O=this.pos;return this.pos=M,M-O>=12&&Lf?function(Y,ue,Se){return Lf.decode(Y.subarray(ue,Se))}(this.buf,O,M):function(Y,ue,Se){for(var Pe="",Ne=ue;Ne<Se;){var Je,it,yt,_t=Y[Ne],Pt=null,Nt=_t>239?4:_t>223?3:_t>191?2:1;if(Ne+Nt>Se)break;Nt===1?_t<128&&(Pt=_t):Nt===2?(192&(Je=Y[Ne+1]))==128&&(Pt=(31&_t)<<6|63&Je)<=127&&(Pt=null):Nt===3?(Je=Y[Ne+1],it=Y[Ne+2],(192&Je)==128&&(192&it)==128&&((Pt=(15&_t)<<12|(63&Je)<<6|63&it)<=2047||Pt>=55296&&Pt<=57343)&&(Pt=null)):Nt===4&&(Je=Y[Ne+1],it=Y[Ne+2],yt=Y[Ne+3],(192&Je)==128&&(192&it)==128&&(192&yt)==128&&((Pt=(15&_t)<<18|(63&Je)<<12|(63&it)<<6|63&yt)<=65535||Pt>=1114112)&&(Pt=null)),Pt===null?(Pt=65533,Nt=1):Pt>65535&&(Pt-=65536,Pe+=String.fromCharCode(Pt>>>10&1023|55296),Pt=56320|1023&Pt),Pe+=String.fromCharCode(Pt),Ne+=Nt}return Pe}(this.buf,O,M)},readBytes:function(){var M=this.readVarint()+this.pos,O=this.buf.subarray(this.pos,M);return this.pos=M,O},readPackedVarint:function(M,O){if(this.type!==gi.Bytes)return M.push(this.readVarint(O));var Y=Ks(this);for(M=M||[];this.pos<Y;)M.push(this.readVarint(O));return M},readPackedSVarint:function(M){if(this.type!==gi.Bytes)return M.push(this.readSVarint());var O=Ks(this);for(M=M||[];this.pos<O;)M.push(this.readSVarint());return M},readPackedBoolean:function(M){if(this.type!==gi.Bytes)return M.push(this.readBoolean());var O=Ks(this);for(M=M||[];this.pos<O;)M.push(this.readBoolean());return M},readPackedFloat:function(M){if(this.type!==gi.Bytes)return M.push(this.readFloat());var O=Ks(this);for(M=M||[];this.pos<O;)M.push(this.readFloat());return M},readPackedDouble:function(M){if(this.type!==gi.Bytes)return M.push(this.readDouble());var O=Ks(this);for(M=M||[];this.pos<O;)M.push(this.readDouble());return M},readPackedFixed32:function(M){if(this.type!==gi.Bytes)return M.push(this.readFixed32());var O=Ks(this);for(M=M||[];this.pos<O;)M.push(this.readFixed32());return M},readPackedSFixed32:function(M){if(this.type!==gi.Bytes)return M.push(this.readSFixed32());var O=Ks(this);for(M=M||[];this.pos<O;)M.push(this.readSFixed32());return M},readPackedFixed64:function(M){if(this.type!==gi.Bytes)return M.push(this.readFixed64());var O=Ks(this);for(M=M||[];this.pos<O;)M.push(this.readFixed64());return M},readPackedSFixed64:function(M){if(this.type!==gi.Bytes)return M.push(this.readSFixed64());var O=Ks(this);for(M=M||[];this.pos<O;)M.push(this.readSFixed64());return M},skip:function(M){var O=7&M;if(O===gi.Varint)for(;this.buf[this.pos++]>127;);else if(O===gi.Bytes)this.pos=this.readVarint()+this.pos;else if(O===gi.Fixed32)this.pos+=4;else{if(O!==gi.Fixed64)throw new Error("Unimplemented type: "+O);this.pos+=8}},writeTag:function(M,O){this.writeVarint(M<<3|O)},realloc:function(M){for(var O=this.length||16;O<this.pos+M;)O*=2;if(O!==this.length){var Y=new Uint8Array(O);Y.set(this.buf),this.buf=Y,this.length=O}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(M){this.realloc(4),Rl(this.buf,M,this.pos),this.pos+=4},writeSFixed32:function(M){this.realloc(4),Rl(this.buf,M,this.pos),this.pos+=4},writeFixed64:function(M){this.realloc(8),Rl(this.buf,-1&M,this.pos),Rl(this.buf,Math.floor(M*Ef),this.pos+4),this.pos+=8},writeSFixed64:function(M){this.realloc(8),Rl(this.buf,-1&M,this.pos),Rl(this.buf,Math.floor(M*Ef),this.pos+4),this.pos+=8},writeVarint:function(M){(M=+M||0)>268435455||M<0?function(O,Y){var ue,Se;if(O>=0?(ue=O%4294967296|0,Se=O/4294967296|0):(Se=~(-O/4294967296),4294967295^(ue=~(-O%4294967296))?ue=ue+1|0:(ue=0,Se=Se+1|0)),O>=18446744073709552e3||O<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Y.realloc(10),function(Pe,Ne,Je){Je.buf[Je.pos++]=127&Pe|128,Pe>>>=7,Je.buf[Je.pos++]=127&Pe|128,Pe>>>=7,Je.buf[Je.pos++]=127&Pe|128,Pe>>>=7,Je.buf[Je.pos++]=127&Pe|128,Pe>>>=7,Je.buf[Je.pos]=127&Pe}(ue,0,Y),function(Pe,Ne){var Je=(7&Pe)<<4;Ne.buf[Ne.pos++]|=Je|((Pe>>>=3)?128:0),Pe&&(Ne.buf[Ne.pos++]=127&Pe|((Pe>>>=7)?128:0),Pe&&(Ne.buf[Ne.pos++]=127&Pe|((Pe>>>=7)?128:0),Pe&&(Ne.buf[Ne.pos++]=127&Pe|((Pe>>>=7)?128:0),Pe&&(Ne.buf[Ne.pos++]=127&Pe|((Pe>>>=7)?128:0),Pe&&(Ne.buf[Ne.pos++]=127&Pe)))))}(Se,Y)}(M,this):(this.realloc(4),this.buf[this.pos++]=127&M|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=M>>>7&127))))},writeSVarint:function(M){this.writeVarint(M<0?2*-M-1:2*M)},writeBoolean:function(M){this.writeVarint(!!M)},writeString:function(M){M=String(M),this.realloc(4*M.length),this.pos++;var O=this.pos;this.pos=function(ue,Se,Pe){for(var Ne,Je,it=0;it<Se.length;it++){if((Ne=Se.charCodeAt(it))>55295&&Ne<57344){if(!Je){Ne>56319||it+1===Se.length?(ue[Pe++]=239,ue[Pe++]=191,ue[Pe++]=189):Je=Ne;continue}if(Ne<56320){ue[Pe++]=239,ue[Pe++]=191,ue[Pe++]=189,Je=Ne;continue}Ne=Je-55296<<10|Ne-56320|65536,Je=null}else Je&&(ue[Pe++]=239,ue[Pe++]=191,ue[Pe++]=189,Je=null);Ne<128?ue[Pe++]=Ne:(Ne<2048?ue[Pe++]=Ne>>6|192:(Ne<65536?ue[Pe++]=Ne>>12|224:(ue[Pe++]=Ne>>18|240,ue[Pe++]=Ne>>12&63|128),ue[Pe++]=Ne>>6&63|128),ue[Pe++]=63&Ne|128)}return Pe}(this.buf,M,this.pos);var Y=this.pos-O;Y>=128&&Cf(O,Y,this),this.pos=O-1,this.writeVarint(Y),this.pos+=Y},writeFloat:function(M){this.realloc(4),Sf(this.buf,M,this.pos,!0,23,4),this.pos+=4},writeDouble:function(M){this.realloc(8),Sf(this.buf,M,this.pos,!0,52,8),this.pos+=8},writeBytes:function(M){var O=M.length;this.writeVarint(O),this.realloc(O);for(var Y=0;Y<O;Y++)this.buf[this.pos++]=M[Y]},writeRawMessage:function(M,O){this.pos++;var Y=this.pos;M(O,this);var ue=this.pos-Y;ue>=128&&Cf(Y,ue,this),this.pos=Y-1,this.writeVarint(ue),this.pos+=ue},writeMessage:function(M,O,Y){this.writeTag(M,gi.Bytes),this.writeRawMessage(O,Y)},writePackedVarint:function(M,O){O.length&&this.writeMessage(M,Cp,O)},writePackedSVarint:function(M,O){O.length&&this.writeMessage(M,Pp,O)},writePackedBoolean:function(M,O){O.length&&this.writeMessage(M,Dp,O)},writePackedFloat:function(M,O){O.length&&this.writeMessage(M,Op,O)},writePackedDouble:function(M,O){O.length&&this.writeMessage(M,Ip,O)},writePackedFixed32:function(M,O){O.length&&this.writeMessage(M,zp,O)},writePackedSFixed32:function(M,O){O.length&&this.writeMessage(M,Rp,O)},writePackedFixed64:function(M,O){O.length&&this.writeMessage(M,Fp,O)},writePackedSFixed64:function(M,O){O.length&&this.writeMessage(M,Bp,O)},writeBytesField:function(M,O){this.writeTag(M,gi.Bytes),this.writeBytes(O)},writeFixed32Field:function(M,O){this.writeTag(M,gi.Fixed32),this.writeFixed32(O)},writeSFixed32Field:function(M,O){this.writeTag(M,gi.Fixed32),this.writeSFixed32(O)},writeFixed64Field:function(M,O){this.writeTag(M,gi.Fixed64),this.writeFixed64(O)},writeSFixed64Field:function(M,O){this.writeTag(M,gi.Fixed64),this.writeSFixed64(O)},writeVarintField:function(M,O){this.writeTag(M,gi.Varint),this.writeVarint(O)},writeSVarintField:function(M,O){this.writeTag(M,gi.Varint),this.writeSVarint(O)},writeStringField:function(M,O){this.writeTag(M,gi.Bytes),this.writeString(O)},writeFloatField:function(M,O){this.writeTag(M,gi.Fixed32),this.writeFloat(O)},writeDoubleField:function(M,O){this.writeTag(M,gi.Fixed64),this.writeDouble(O)},writeBooleanField:function(M,O){this.writeVarintField(M,!!O)}};var Cc=3;function Np(M,O,Y){M===1&&Y.readMessage(jp,O)}function jp(M,O,Y){if(M===3){var ue=Y.readMessage(Up,{}),Se=ue.id,Pe=ue.bitmap,Ne=ue.width,Je=ue.height,it=ue.left,yt=ue.top,_t=ue.advance;O.push({id:Se,bitmap:new bl({width:Ne+2*Cc,height:Je+2*Cc},Pe),metrics:{width:Ne,height:Je,left:it,top:yt,advance:_t}})}}function Up(M,O,Y){M===1?O.id=Y.readVarint():M===2?O.bitmap=Y.readBytes():M===3?O.width=Y.readVarint():M===4?O.height=Y.readVarint():M===5?O.left=Y.readSVarint():M===6?O.top=Y.readSVarint():M===7&&(O.advance=Y.readVarint())}var Of=Cc;function If(M){for(var O=0,Y=0,ue=0,Se=M;ue<Se.length;ue+=1){var Pe=Se[ue];O+=Pe.w*Pe.h,Y=Math.max(Y,Pe.w)}M.sort(function(rn,wn){return wn.h-rn.h});for(var Ne=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(O/.95)),Y),h:1/0}],Je=0,it=0,yt=0,_t=M;yt<_t.length;yt+=1)for(var Pt=_t[yt],Nt=Ne.length-1;Nt>=0;Nt--){var Dt=Ne[Nt];if(!(Pt.w>Dt.w||Pt.h>Dt.h)){if(Pt.x=Dt.x,Pt.y=Dt.y,it=Math.max(it,Pt.y+Pt.h),Je=Math.max(Je,Pt.x+Pt.w),Pt.w===Dt.w&&Pt.h===Dt.h){var Qt=Ne.pop();Nt<Ne.length&&(Ne[Nt]=Qt)}else Pt.h===Dt.h?(Dt.x+=Pt.w,Dt.w-=Pt.w):Pt.w===Dt.w?(Dt.y+=Pt.h,Dt.h-=Pt.h):(Ne.push({x:Dt.x+Pt.w,y:Dt.y,w:Dt.w-Pt.w,h:Pt.h}),Dt.y+=Pt.h,Dt.h-=Pt.h);break}}return{w:Je,h:it,fill:O/(Je*it)||0}}var po=1,Hu=function(M,O){var Y=O.pixelRatio,ue=O.version,Se=O.stretchX,Pe=O.stretchY,Ne=O.content;this.paddedRect=M,this.pixelRatio=Y,this.stretchX=Se,this.stretchY=Pe,this.content=Ne,this.version=ue},fu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};fu.tl.get=function(){return[this.paddedRect.x+po,this.paddedRect.y+po]},fu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-po,this.paddedRect.y+this.paddedRect.h-po]},fu.tlbr.get=function(){return this.tl.concat(this.br)},fu.displaySize.get=function(){return[(this.paddedRect.w-2*po)/this.pixelRatio,(this.paddedRect.h-2*po)/this.pixelRatio]},Object.defineProperties(Hu.prototype,fu);var hu=function(M,O){var Y={},ue={};this.haveRenderCallbacks=[];var Se=[];this.addImages(M,Y,Se),this.addImages(O,ue,Se);var Pe=If(Se),Ne=Pe.w,Je=Pe.h,it=new $a({width:Ne||1,height:Je||1});for(var yt in M){var _t=M[yt],Pt=Y[yt].paddedRect;$a.copy(_t.data,it,{x:0,y:0},{x:Pt.x+po,y:Pt.y+po},_t.data)}for(var Nt in O){var Dt=O[Nt],Qt=ue[Nt].paddedRect,rn=Qt.x+po,wn=Qt.y+po,_n=Dt.data.width,Ln=Dt.data.height;$a.copy(Dt.data,it,{x:0,y:0},{x:rn,y:wn},Dt.data),$a.copy(Dt.data,it,{x:0,y:Ln-1},{x:rn,y:wn-1},{width:_n,height:1}),$a.copy(Dt.data,it,{x:0,y:0},{x:rn,y:wn+Ln},{width:_n,height:1}),$a.copy(Dt.data,it,{x:_n-1,y:0},{x:rn-1,y:wn},{width:1,height:Ln}),$a.copy(Dt.data,it,{x:0,y:0},{x:rn+_n,y:wn},{width:1,height:Ln})}this.image=it,this.iconPositions=Y,this.patternPositions=ue};hu.prototype.addImages=function(M,O,Y){for(var ue in M){var Se=M[ue],Pe={x:0,y:0,w:Se.data.width+2*po,h:Se.data.height+2*po};Y.push(Pe),O[ue]=new Hu(Pe,Se),Se.hasRenderCallback&&this.haveRenderCallbacks.push(ue)}},hu.prototype.patchUpdatedImages=function(M,O){for(var Y in M.dispatchRenderCallbacks(this.haveRenderCallbacks),M.updatedImages)this.patchUpdatedImage(this.iconPositions[Y],M.getImage(Y),O),this.patchUpdatedImage(this.patternPositions[Y],M.getImage(Y),O)},hu.prototype.patchUpdatedImage=function(M,O,Y){if(M&&O&&M.version!==O.version){M.version=O.version;var ue=M.tl,Se=ue[0],Pe=ue[1];Y.update(O.data,void 0,{x:Se,y:Pe})}},xr("ImagePosition",Hu),xr("ImageAtlas",hu);var Do={horizontal:1,vertical:2,horizontalOnly:3},pu=-17,Fl=function(){this.scale=1,this.fontStack="",this.imageName=null};Fl.forText=function(M,O){var Y=new Fl;return Y.scale=M||1,Y.fontStack=O,Y},Fl.forImage=function(M){var O=new Fl;return O.imageName=M,O};var Pa=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function qu(M,O,Y,ue,Se,Pe,Ne,Je,it,yt,_t,Pt,Nt,Dt,Qt,rn){var wn,_n=Pa.fromFeature(M,Se);Pt===Do.vertical&&_n.verticalizePunctuation();var Ln=_i.processBidirectionalText,On=_i.processStyledBidirectionalText;if(Ln&&_n.sections.length===1){wn=[];for(var Nn=0,qn=Ln(_n.toString(),Pc(_n,yt,Pe,O,ue,Dt,Qt));Nn<qn.length;Nn+=1){var Jn=qn[Nn],hr=new Pa;hr.text=Jn,hr.sections=_n.sections;for(var sr=0;sr<Jn.length;sr++)hr.sectionIndex.push(0);wn.push(hr)}}else if(On){wn=[];for(var gr=0,_r=On(_n.text,_n.sectionIndex,Pc(_n,yt,Pe,O,ue,Dt,Qt));gr<_r.length;gr+=1){var Dr=_r[gr],kr=new Pa;kr.text=Dr[0],kr.sectionIndex=Dr[1],kr.sections=_n.sections,wn.push(kr)}}else wn=function(wr,jr){for(var zr=[],hi=wr.text,Pr=0,ii=0,vi=jr;ii<vi.length;ii+=1){var yi=vi[ii];zr.push(wr.substring(Pr,yi)),Pr=yi}return Pr<hi.length&&zr.push(wr.substring(Pr,hi.length)),zr}(_n,Pc(_n,yt,Pe,O,ue,Dt,Qt));var Or=[],Er={positionedLines:Or,text:_n.toString(),top:_t[1],bottom:_t[1],left:_t[0],right:_t[0],writingMode:Pt,iconsInText:!1,verticalizable:!1};return function(wr,jr,zr,hi,Pr,ii,vi,yi,xi,pi,na,Mi){for(var ua=0,ka=pu,ma=0,Ua=0,ya=yi==="right"?1:yi==="left"?0:.5,aa=0,xa=0,ca=Pr;xa<ca.length;xa+=1){var oa=ca[xa];oa.trim();var Rr=oa.getMaxScale(),qr=(Rr-1)*va,Fi={positionedGlyphs:[],lineOffset:0};wr.positionedLines[aa]=Fi;var ui=Fi.positionedGlyphs,Ci=0;if(oa.length()){for(var ki=0;ki<oa.length();ki++){var Jr=oa.getSection(ki),Bi=oa.getSectionIndex(ki),Va=oa.getCharCode(ki),vo=0,Oa=null,Ms=null,el=null,fa=va,Ss=!(xi===Do.horizontal||!na&&!as(Va)||na&&(Gu[Va]||$i(Va)));if(Jr.imageName){var cs=hi[Jr.imageName];if(!cs)continue;el=Jr.imageName,wr.iconsInText=wr.iconsInText||!0,Ms=cs.paddedRect;var fs=cs.displaySize;Jr.scale=Jr.scale*va/Mi,Oa={width:fs[0],height:fs[1],left:po,top:-Of,advance:Ss?fs[1]:fs[0]},vo=qr+(va-fs[1]*Jr.scale),fa=Oa.advance;var kl=Ss?fs[0]*Jr.scale-va*Rr:fs[1]*Jr.scale-va*Rr;kl>0&&kl>Ci&&(Ci=kl)}else{var ec=zr[Jr.fontStack],Al=ec&&ec[Va];if(Al&&Al.rect)Ms=Al.rect,Oa=Al.metrics;else{var tc=jr[Jr.fontStack],mu=tc&&tc[Va];if(!mu)continue;Oa=mu.metrics}vo=(Rr-Jr.scale)*va}Ss?(wr.verticalizable=!0,ui.push({glyph:Va,imageName:el,x:ua,y:ka+vo,vertical:Ss,scale:Jr.scale,fontStack:Jr.fontStack,sectionIndex:Bi,metrics:Oa,rect:Ms}),ua+=fa*Jr.scale+pi):(ui.push({glyph:Va,imageName:el,x:ua,y:ka+vo,vertical:Ss,scale:Jr.scale,fontStack:Jr.fontStack,sectionIndex:Bi,metrics:Oa,rect:Ms}),ua+=Oa.advance*Jr.scale+pi)}if(ui.length!==0){var Uc=ua-pi;ma=Math.max(Uc,ma),Hp(ui,0,ui.length-1,ya,Ci)}ua=0;var nc=ii*Rr+Ci;Fi.lineOffset=Math.max(Ci,qr),ka+=nc,Ua=Math.max(nc,Ua),++aa}else ka+=ii,++aa}var Yl=ka-pu,rc=Oc(vi),ic=rc.horizontalAlign,yu=rc.verticalAlign;(function(Vc,xu,Ml,Wl,ac,oc,Xl,sc,lc){var bu=(xu-Ml)*ac,_u=0;_u=oc!==Xl?-sc*Wl-pu:(-Wl*lc+.5)*Xl;for(var Sl=0,wu=Vc;Sl<wu.length;Sl+=1)for(var El=0,Tu=wu[Sl].positionedGlyphs;El<Tu.length;El+=1){var ku=Tu[El];ku.x+=bu,ku.y+=_u}})(wr.positionedLines,ya,ic,yu,ma,Ua,ii,Yl,Pr.length),wr.top+=-yu*Yl,wr.bottom=wr.top+Yl,wr.left+=-ic*ma,wr.right=wr.left+ma}(Er,O,Y,ue,wn,Ne,Je,it,Pt,yt,Nt,rn),!function(wr){for(var jr=0,zr=wr;jr<zr.length;jr+=1)if(zr[jr].positionedGlyphs.length!==0)return!1;return!0}(Or)&&Er}Pa.fromFeature=function(M,O){for(var Y=new Pa,ue=0;ue<M.sections.length;ue++){var Se=M.sections[ue];Se.image?Y.addImageSection(Se):Y.addTextSection(Se,O)}return Y},Pa.prototype.length=function(){return this.text.length},Pa.prototype.getSection=function(M){return this.sections[this.sectionIndex[M]]},Pa.prototype.getSectionIndex=function(M){return this.sectionIndex[M]},Pa.prototype.getCharCode=function(M){return this.text.charCodeAt(M)},Pa.prototype.verticalizePunctuation=function(){this.text=function(M){for(var O="",Y=0;Y<M.length;Y++){var ue=M.charCodeAt(Y+1)||null,Se=M.charCodeAt(Y-1)||null;ue&&_s(ue)&&!cu[M[Y+1]]||Se&&_s(Se)&&!cu[M[Y-1]]||!cu[M[Y]]?O+=M[Y]:O+=cu[M[Y]]}return O}(this.text)},Pa.prototype.trim=function(){for(var M=0,O=0;O<this.text.length&&Gu[this.text.charCodeAt(O)];O++)M++;for(var Y=this.text.length,ue=this.text.length-1;ue>=0&&ue>=M&&Gu[this.text.charCodeAt(ue)];ue--)Y--;this.text=this.text.substring(M,Y),this.sectionIndex=this.sectionIndex.slice(M,Y)},Pa.prototype.substring=function(M,O){var Y=new Pa;return Y.text=this.text.substring(M,O),Y.sectionIndex=this.sectionIndex.slice(M,O),Y.sections=this.sections,Y},Pa.prototype.toString=function(){return this.text},Pa.prototype.getMaxScale=function(){var M=this;return this.sectionIndex.reduce(function(O,Y){return Math.max(O,M.sections[Y].scale)},0)},Pa.prototype.addTextSection=function(M,O){this.text+=M.text,this.sections.push(Fl.forText(M.scale,M.fontStack||O));for(var Y=this.sections.length-1,ue=0;ue<M.text.length;++ue)this.sectionIndex.push(Y)},Pa.prototype.addImageSection=function(M){var O=M.image?M.image.name:"";if(O.length!==0){var Y=this.getNextImageSectionCharCode();Y?(this.text+=String.fromCharCode(Y),this.sections.push(Fl.forImage(O)),this.sectionIndex.push(this.sections.length-1)):A("Reached maximum number of images 6401")}else A("Can't add FormattedSection with an empty image.")},Pa.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Gu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},go={};function Df(M,O,Y,ue,Se,Pe){if(O.imageName){var Ne=ue[O.imageName];return Ne?Ne.displaySize[0]*O.scale*va/Pe+Se:0}var Je=Y[O.fontStack],it=Je&&Je[M];return it?it.metrics.advance*O.scale+Se:0}function zf(M,O,Y,ue){var Se=Math.pow(M-O,2);return ue?M<O?Se/2:2*Se:Se+Math.abs(Y)*Y}function Vp(M,O,Y){var ue=0;return M===10&&(ue-=1e4),Y&&(ue+=150),M!==40&&M!==65288||(ue+=50),O!==41&&O!==65289||(ue+=50),ue}function Rf(M,O,Y,ue,Se,Pe){for(var Ne=null,Je=zf(O,Y,Se,Pe),it=0,yt=ue;it<yt.length;it+=1){var _t=yt[it],Pt=zf(O-_t.x,Y,Se,Pe)+_t.badness;Pt<=Je&&(Ne=_t,Je=Pt)}return{index:M,x:O,priorBreak:Ne,badness:Je}}function Ff(M){return M?Ff(M.priorBreak).concat(M.index):[]}function Pc(M,O,Y,ue,Se,Pe,Ne){if(Pe!=="point")return[];if(!M)return[];for(var Je=[],it=function(wn,_n,Ln,On,Nn,qn){for(var Jn=0,hr=0;hr<wn.length();hr++){var sr=wn.getSection(hr);Jn+=Df(wn.getCharCode(hr),sr,On,Nn,_n,qn)}return Jn/Math.max(1,Math.ceil(Jn/Ln))}(M,O,Y,ue,Se,Ne),yt=M.text.indexOf("")>=0,_t=0,Pt=0;Pt<M.length();Pt++){var Nt=M.getSection(Pt),Dt=M.getCharCode(Pt);if(Gu[Dt]||(_t+=Df(Dt,Nt,ue,Se,O,Ne)),Pt<M.length()-1){var Qt=!((rn=Dt)<11904||!(vr["Bopomofo Extended"](rn)||vr.Bopomofo(rn)||vr["CJK Compatibility Forms"](rn)||vr["CJK Compatibility Ideographs"](rn)||vr["CJK Compatibility"](rn)||vr["CJK Radicals Supplement"](rn)||vr["CJK Strokes"](rn)||vr["CJK Symbols and Punctuation"](rn)||vr["CJK Unified Ideographs Extension A"](rn)||vr["CJK Unified Ideographs"](rn)||vr["Enclosed CJK Letters and Months"](rn)||vr["Halfwidth and Fullwidth Forms"](rn)||vr.Hiragana(rn)||vr["Ideographic Description Characters"](rn)||vr["Kangxi Radicals"](rn)||vr["Katakana Phonetic Extensions"](rn)||vr.Katakana(rn)||vr["Vertical Forms"](rn)||vr["Yi Radicals"](rn)||vr["Yi Syllables"](rn)));(go[Dt]||Qt||Nt.imageName)&&Je.push(Rf(Pt+1,_t,it,Je,Vp(Dt,M.getCharCode(Pt+1),Qt&&yt),!1))}}var rn;return Ff(Rf(M.length(),_t,it,Je,0,!0))}function Oc(M){var O=.5,Y=.5;switch(M){case"right":case"top-right":case"bottom-right":O=1;break;case"left":case"top-left":case"bottom-left":O=0}switch(M){case"bottom":case"bottom-right":case"bottom-left":Y=1;break;case"top":case"top-right":case"top-left":Y=0}return{horizontalAlign:O,verticalAlign:Y}}function Hp(M,O,Y,ue,Se){if(ue||Se)for(var Pe=M[Y],Ne=Pe.metrics.advance*Pe.scale,Je=(M[Y].x+Ne)*ue,it=O;it<=Y;it++)M[it].x-=Je,M[it].y+=Se}function Bf(M,O,Y,ue,Se,Pe){var Ne,Je=M.image;if(Je.content){var it=Je.content,yt=Je.pixelRatio||1;Ne=[it[0]/yt,it[1]/yt,Je.displaySize[0]-it[2]/yt,Je.displaySize[1]-it[3]/yt]}var _t,Pt,Nt,Dt,Qt=O.left*Pe,rn=O.right*Pe;Y==="width"||Y==="both"?(Dt=Se[0]+Qt-ue[3],Pt=Se[0]+rn+ue[1]):Pt=(Dt=Se[0]+(Qt+rn-Je.displaySize[0])/2)+Je.displaySize[0];var wn=O.top*Pe,_n=O.bottom*Pe;return Y==="height"||Y==="both"?(_t=Se[1]+wn-ue[0],Nt=Se[1]+_n+ue[2]):Nt=(_t=Se[1]+(wn+_n-Je.displaySize[1])/2)+Je.displaySize[1],{image:Je,top:_t,right:Pt,bottom:Nt,left:Dt,collisionPadding:Ne}}go[10]=!0,go[32]=!0,go[38]=!0,go[40]=!0,go[41]=!0,go[43]=!0,go[45]=!0,go[47]=!0,go[173]=!0,go[183]=!0,go[8203]=!0,go[8208]=!0,go[8211]=!0,go[8231]=!0;var Bl=function(M){function O(Y,ue,Se,Pe){M.call(this,Y,ue),this.angle=Se,Pe!==void 0&&(this.segment=Pe)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.clone=function(){return new O(this.x,this.y,this.angle,this.segment)},O}(e);xr("Anchor",Bl);var As=128;function Ic(M,O){var Y=O.expression;if(Y.kind==="constant")return{kind:"constant",layoutSize:Y.evaluate(new Xr(M+1))};if(Y.kind==="source")return{kind:"source"};for(var ue=Y.zoomStops,Se=Y.interpolationType,Pe=0;Pe<ue.length&&ue[Pe]<=M;)Pe++;for(var Ne=Pe=Math.max(0,Pe-1);Ne<ue.length&&ue[Ne]<M+1;)Ne++;Ne=Math.min(ue.length-1,Ne);var Je=ue[Pe],it=ue[Ne];return Y.kind==="composite"?{kind:"composite",minZoom:Je,maxZoom:it,interpolationType:Se}:{kind:"camera",minZoom:Je,maxZoom:it,minSize:Y.evaluate(new Xr(Je)),maxSize:Y.evaluate(new Xr(it)),interpolationType:Se}}function Nf(M,O,Y){var ue=O.uSize,Se=O.uSizeT,Pe=Y.lowerSize,Ne=Y.upperSize;return M.kind==="source"?Pe/As:M.kind==="composite"?Zn(Pe/As,Ne/As,Se):ue}function jf(M,O){var Y=0,ue=0;if(M.kind==="constant")ue=M.layoutSize;else if(M.kind!=="source"){var Se=M.interpolationType,Pe=M.minZoom,Ne=M.maxZoom,Je=Se?a(Si.interpolationFactor(Se,O,Pe,Ne),0,1):0;M.kind==="camera"?ue=Zn(M.minSize,M.maxSize,Je):Y=Je}return{uSizeT:Y,uSize:ue}}var qp=Object.freeze({__proto__:null,getSizeData:Ic,evaluateSizeForFeature:Nf,evaluateSizeForZoom:jf,SIZE_PACK_FACTOR:As});function Uf(M,O,Y,ue,Se){if(O.segment===void 0)return!0;for(var Pe=O,Ne=O.segment+1,Je=0;Je>-Y/2;){if(--Ne<0)return!1;Je-=M[Ne].dist(Pe),Pe=M[Ne]}Je+=M[Ne].dist(M[Ne+1]),Ne++;for(var it=[],yt=0;Je<Y/2;){var _t=M[Ne-1],Pt=M[Ne],Nt=M[Ne+1];if(!Nt)return!1;var Dt=_t.angleTo(Pt)-Pt.angleTo(Nt);for(Dt=Math.abs((Dt+3*Math.PI)%(2*Math.PI)-Math.PI),it.push({distance:Je,angleDelta:Dt}),yt+=Dt;Je-it[0].distance>ue;)yt-=it.shift().angleDelta;if(yt>Se)return!1;Ne++,Je+=Pt.dist(Nt)}return!0}function Vf(M){for(var O=0,Y=0;Y<M.length-1;Y++)O+=M[Y].dist(M[Y+1]);return O}function Hf(M,O,Y){return M?.6*O*Y:0}function qf(M,O){return Math.max(M?M.right-M.left:0,O?O.right-O.left:0)}function Gp(M,O,Y,ue,Se,Pe){for(var Ne=Hf(Y,Se,Pe),Je=qf(Y,ue)*Pe,it=0,yt=Vf(M)/2,_t=0;_t<M.length-1;_t++){var Pt=M[_t],Nt=M[_t+1],Dt=Pt.dist(Nt);if(it+Dt>yt){var Qt=(yt-it)/Dt,rn=Zn(Pt.x,Nt.x,Qt),wn=Zn(Pt.y,Nt.y,Qt),_n=new Bl(rn,wn,Nt.angleTo(Pt),_t);return _n._round(),!Ne||Uf(M,_n,Je,Ne,O)?_n:void 0}it+=Dt}}function Zp(M,O,Y,ue,Se,Pe,Ne,Je,it){var yt=Hf(ue,Pe,Ne),_t=qf(ue,Se),Pt=_t*Ne,Nt=M[0].x===0||M[0].x===it||M[0].y===0||M[0].y===it;return O-Pt<O/4&&(O=Pt+O/4),Gf(M,Nt?O/2*Je%O:(_t/2+2*Pe)*Ne*Je%O,O,yt,Y,Pt,Nt,!1,it)}function Gf(M,O,Y,ue,Se,Pe,Ne,Je,it){for(var yt=Pe/2,_t=Vf(M),Pt=0,Nt=O-Y,Dt=[],Qt=0;Qt<M.length-1;Qt++){for(var rn=M[Qt],wn=M[Qt+1],_n=rn.dist(wn),Ln=wn.angleTo(rn);Nt+Y<Pt+_n;){var On=((Nt+=Y)-Pt)/_n,Nn=Zn(rn.x,wn.x,On),qn=Zn(rn.y,wn.y,On);if(Nn>=0&&Nn<it&&qn>=0&&qn<it&&Nt-yt>=0&&Nt+yt<=_t){var Jn=new Bl(Nn,qn,Ln,Qt);Jn._round(),ue&&!Uf(M,Jn,Pe,ue,Se)||Dt.push(Jn)}}Pt+=_n}return Je||Dt.length||Ne||(Dt=Gf(M,Pt/2,Y,ue,Se,Pe,Ne,!0,it)),Dt}function Zf(M,O,Y,ue,Se){for(var Pe=[],Ne=0;Ne<M.length;Ne++)for(var Je=M[Ne],it=void 0,yt=0;yt<Je.length-1;yt++){var _t=Je[yt],Pt=Je[yt+1];_t.x<O&&Pt.x<O||(_t.x<O?_t=new e(O,_t.y+(Pt.y-_t.y)*((O-_t.x)/(Pt.x-_t.x)))._round():Pt.x<O&&(Pt=new e(O,_t.y+(Pt.y-_t.y)*((O-_t.x)/(Pt.x-_t.x)))._round()),_t.y<Y&&Pt.y<Y||(_t.y<Y?_t=new e(_t.x+(Pt.x-_t.x)*((Y-_t.y)/(Pt.y-_t.y)),Y)._round():Pt.y<Y&&(Pt=new e(_t.x+(Pt.x-_t.x)*((Y-_t.y)/(Pt.y-_t.y)),Y)._round()),_t.x>=ue&&Pt.x>=ue||(_t.x>=ue?_t=new e(ue,_t.y+(Pt.y-_t.y)*((ue-_t.x)/(Pt.x-_t.x)))._round():Pt.x>=ue&&(Pt=new e(ue,_t.y+(Pt.y-_t.y)*((ue-_t.x)/(Pt.x-_t.x)))._round()),_t.y>=Se&&Pt.y>=Se||(_t.y>=Se?_t=new e(_t.x+(Pt.x-_t.x)*((Se-_t.y)/(Pt.y-_t.y)),Se)._round():Pt.y>=Se&&(Pt=new e(_t.x+(Pt.x-_t.x)*((Se-_t.y)/(Pt.y-_t.y)),Se)._round()),it&&_t.equals(it[it.length-1])||(it=[_t],Pe.push(it)),it.push(Pt)))))}return Pe}var Nl=po;function Yf(M,O,Y,ue){var Se=[],Pe=M.image,Ne=Pe.pixelRatio,Je=Pe.paddedRect.w-2*Nl,it=Pe.paddedRect.h-2*Nl,yt=M.right-M.left,_t=M.bottom-M.top,Pt=Pe.stretchX||[[0,Je]],Nt=Pe.stretchY||[[0,it]],Dt=function(ii,vi){return ii+vi[1]-vi[0]},Qt=Pt.reduce(Dt,0),rn=Nt.reduce(Dt,0),wn=Je-Qt,_n=it-rn,Ln=0,On=Qt,Nn=0,qn=rn,Jn=0,hr=wn,sr=0,gr=_n;if(Pe.content&&ue){var _r=Pe.content;Ln=Zu(Pt,0,_r[0]),Nn=Zu(Nt,0,_r[1]),On=Zu(Pt,_r[0],_r[2]),qn=Zu(Nt,_r[1],_r[3]),Jn=_r[0]-Ln,sr=_r[1]-Nn,hr=_r[2]-_r[0]-On,gr=_r[3]-_r[1]-qn}var Dr=function(ii,vi,yi,xi){var pi=Yu(ii.stretch-Ln,On,yt,M.left),na=Wu(ii.fixed-Jn,hr,ii.stretch,Qt),Mi=Yu(vi.stretch-Nn,qn,_t,M.top),ua=Wu(vi.fixed-sr,gr,vi.stretch,rn),ka=Yu(yi.stretch-Ln,On,yt,M.left),ma=Wu(yi.fixed-Jn,hr,yi.stretch,Qt),Ua=Yu(xi.stretch-Nn,qn,_t,M.top),ya=Wu(xi.fixed-sr,gr,xi.stretch,rn),aa=new e(pi,Mi),xa=new e(ka,Mi),ca=new e(ka,Ua),oa=new e(pi,Ua),Rr=new e(na/Ne,ua/Ne),qr=new e(ma/Ne,ya/Ne),Fi=O*Math.PI/180;if(Fi){var ui=Math.sin(Fi),Ci=Math.cos(Fi),ki=[Ci,-ui,ui,Ci];aa._matMult(ki),xa._matMult(ki),oa._matMult(ki),ca._matMult(ki)}var Jr=ii.stretch+ii.fixed,Bi=yi.stretch+yi.fixed,Va=vi.stretch+vi.fixed,vo=xi.stretch+xi.fixed;return{tl:aa,tr:xa,bl:oa,br:ca,tex:{x:Pe.paddedRect.x+Nl+Jr,y:Pe.paddedRect.y+Nl+Va,w:Bi-Jr,h:vo-Va},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Rr,pixelOffsetBR:qr,minFontScaleX:hr/Ne/yt,minFontScaleY:gr/Ne/_t,isSDF:Y}};if(ue&&(Pe.stretchX||Pe.stretchY))for(var kr=Wf(Pt,wn,Qt),Or=Wf(Nt,_n,rn),Er=0;Er<kr.length-1;Er++)for(var wr=kr[Er],jr=kr[Er+1],zr=0;zr<Or.length-1;zr++){var hi=Or[zr],Pr=Or[zr+1];Se.push(Dr(wr,hi,jr,Pr))}else Se.push(Dr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Je+1},{fixed:0,stretch:it+1}));return Se}function Zu(M,O,Y){for(var ue=0,Se=0,Pe=M;Se<Pe.length;Se+=1){var Ne=Pe[Se];ue+=Math.max(O,Math.min(Y,Ne[1]))-Math.max(O,Math.min(Y,Ne[0]))}return ue}function Wf(M,O,Y){for(var ue=[{fixed:-Nl,stretch:0}],Se=0,Pe=M;Se<Pe.length;Se+=1){var Ne=Pe[Se],Je=Ne[0],it=Ne[1],yt=ue[ue.length-1];ue.push({fixed:Je-yt.stretch,stretch:yt.stretch}),ue.push({fixed:Je-yt.stretch,stretch:yt.stretch+(it-Je)})}return ue.push({fixed:O+Nl,stretch:Y}),ue}function Yu(M,O,Y,ue){return M/O*Y+ue}function Wu(M,O,Y,ue){return M-O*Y/ue}var Xu=function(M,O,Y,ue,Se,Pe,Ne,Je,it,yt){if(this.boxStartIndex=M.length,it){var _t=Pe.top,Pt=Pe.bottom,Nt=Pe.collisionPadding;Nt&&(_t-=Nt[1],Pt+=Nt[3]);var Dt=Pt-_t;Dt>0&&(Dt=Math.max(10,Dt),this.circleDiameter=Dt)}else{var Qt=Pe.top*Ne-Je,rn=Pe.bottom*Ne+Je,wn=Pe.left*Ne-Je,_n=Pe.right*Ne+Je,Ln=Pe.collisionPadding;if(Ln&&(wn-=Ln[0]*Ne,Qt-=Ln[1]*Ne,_n+=Ln[2]*Ne,rn+=Ln[3]*Ne),yt){var On=new e(wn,Qt),Nn=new e(_n,Qt),qn=new e(wn,rn),Jn=new e(_n,rn),hr=yt*Math.PI/180;On._rotate(hr),Nn._rotate(hr),qn._rotate(hr),Jn._rotate(hr),wn=Math.min(On.x,Nn.x,qn.x,Jn.x),_n=Math.max(On.x,Nn.x,qn.x,Jn.x),Qt=Math.min(On.y,Nn.y,qn.y,Jn.y),rn=Math.max(On.y,Nn.y,qn.y,Jn.y)}M.emplaceBack(O.x,O.y,wn,Qt,_n,rn,Y,ue,Se)}this.boxEndIndex=M.length},jl=function(M,O){if(M===void 0&&(M=[]),O===void 0&&(O=Yp),this.data=M,this.length=this.data.length,this.compare=O,this.length>0)for(var Y=(this.length>>1)-1;Y>=0;Y--)this._down(Y)};function Yp(M,O){return M<O?-1:M>O?1:0}function Wp(M,O,Y){O===void 0&&(O=1),Y===void 0&&(Y=!1);for(var ue=1/0,Se=1/0,Pe=-1/0,Ne=-1/0,Je=M[0],it=0;it<Je.length;it++){var yt=Je[it];(!it||yt.x<ue)&&(ue=yt.x),(!it||yt.y<Se)&&(Se=yt.y),(!it||yt.x>Pe)&&(Pe=yt.x),(!it||yt.y>Ne)&&(Ne=yt.y)}var _t=Pe-ue,Pt=Ne-Se,Nt=Math.min(_t,Pt),Dt=Nt/2,Qt=new jl([],Xp);if(Nt===0)return new e(ue,Se);for(var rn=ue;rn<Pe;rn+=Nt)for(var wn=Se;wn<Ne;wn+=Nt)Qt.push(new Ul(rn+Dt,wn+Dt,Dt,M));for(var _n=function(Nn){for(var qn=0,Jn=0,hr=0,sr=Nn[0],gr=0,_r=sr.length,Dr=_r-1;gr<_r;Dr=gr++){var kr=sr[gr],Or=sr[Dr],Er=kr.x*Or.y-Or.x*kr.y;Jn+=(kr.x+Or.x)*Er,hr+=(kr.y+Or.y)*Er,qn+=3*Er}return new Ul(Jn/qn,hr/qn,0,Nn)}(M),Ln=Qt.length;Qt.length;){var On=Qt.pop();(On.d>_n.d||!_n.d)&&(_n=On,Y&&console.log("found best %d after %d probes",Math.round(1e4*On.d)/1e4,Ln)),On.max-_n.d<=O||(Dt=On.h/2,Qt.push(new Ul(On.p.x-Dt,On.p.y-Dt,Dt,M)),Qt.push(new Ul(On.p.x+Dt,On.p.y-Dt,Dt,M)),Qt.push(new Ul(On.p.x-Dt,On.p.y+Dt,Dt,M)),Qt.push(new Ul(On.p.x+Dt,On.p.y+Dt,Dt,M)),Ln+=4)}return Y&&(console.log("num probes: "+Ln),console.log("best distance: "+_n.d)),_n.p}function Xp(M,O){return O.max-M.max}function Ul(M,O,Y,ue){this.p=new e(M,O),this.h=Y,this.d=function(Se,Pe){for(var Ne=!1,Je=1/0,it=0;it<Pe.length;it++)for(var yt=Pe[it],_t=0,Pt=yt.length,Nt=Pt-1;_t<Pt;Nt=_t++){var Dt=yt[_t],Qt=yt[Nt];Dt.y>Se.y!=Qt.y>Se.y&&Se.x<(Qt.x-Dt.x)*(Se.y-Dt.y)/(Qt.y-Dt.y)+Dt.x&&(Ne=!Ne),Je=Math.min(Je,xl(Se,Dt,Qt))}return(Ne?1:-1)*Math.sqrt(Je)}(this.p,ue),this.max=this.d+this.h*Math.SQRT2}jl.prototype.push=function(M){this.data.push(M),this.length++,this._up(this.length-1)},jl.prototype.pop=function(){if(this.length!==0){var M=this.data[0],O=this.data.pop();return this.length--,this.length>0&&(this.data[0]=O,this._down(0)),M}},jl.prototype.peek=function(){return this.data[0]},jl.prototype._up=function(M){for(var O=this.data,Y=this.compare,ue=O[M];M>0;){var Se=M-1>>1,Pe=O[Se];if(Y(ue,Pe)>=0)break;O[M]=Pe,M=Se}O[M]=ue},jl.prototype._down=function(M){for(var O=this.data,Y=this.compare,ue=this.length>>1,Se=O[M];M<ue;){var Pe=1+(M<<1),Ne=O[Pe],Je=Pe+1;if(Je<this.length&&Y(O[Je],Ne)<0&&(Pe=Je,Ne=O[Je]),Y(Ne,Se)>=0)break;O[M]=Ne,M=Pe}O[M]=Se};var Vl=7,Dc=Number.POSITIVE_INFINITY;function Xf(M,O){return O[1]!==Dc?function(Y,ue,Se){var Pe=0,Ne=0;switch(ue=Math.abs(ue),Se=Math.abs(Se),Y){case"top-right":case"top-left":case"top":Ne=Se-Vl;break;case"bottom-right":case"bottom-left":case"bottom":Ne=-Se+Vl}switch(Y){case"top-right":case"bottom-right":case"right":Pe=-ue;break;case"top-left":case"bottom-left":case"left":Pe=ue}return[Pe,Ne]}(M,O[0],O[1]):function(Y,ue){var Se=0,Pe=0;ue<0&&(ue=0);var Ne=ue/Math.sqrt(2);switch(Y){case"top-right":case"top-left":Pe=Ne-Vl;break;case"bottom-right":case"bottom-left":Pe=-Ne+Vl;break;case"bottom":Pe=-ue+Vl;break;case"top":Pe=ue-Vl}switch(Y){case"top-right":case"bottom-right":Se=-Ne;break;case"top-left":case"bottom-left":Se=Ne;break;case"left":Se=ue;break;case"right":Se=-ue}return[Se,Pe]}(M,O[0])}function zc(M){switch(M){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var du=255,dl=du*As;function Jf(M,O,Y,ue,Se,Pe,Ne,Je,it,yt,_t,Pt,Nt,Dt,Qt){var rn=function(Nn,qn,Jn,hr,sr,gr,_r,Dr){for(var kr=hr.layout.get("text-rotate").evaluate(gr,{})*Math.PI/180,Or=[],Er=0,wr=qn.positionedLines;Er<wr.length;Er+=1)for(var jr=wr[Er],zr=0,hi=jr.positionedGlyphs;zr<hi.length;zr+=1){var Pr=hi[zr];if(Pr.rect){var ii=Pr.rect||{},vi=Of+1,yi=!0,xi=1,pi=0,na=(sr||Dr)&&Pr.vertical,Mi=Pr.metrics.advance*Pr.scale/2;if(Dr&&qn.verticalizable){var ua=(Pr.scale-1)*va,ka=(va-Pr.metrics.width*Pr.scale)/2;pi=jr.lineOffset/2-(Pr.imageName?-ka:ua)}if(Pr.imageName){var ma=_r[Pr.imageName];yi=ma.sdf,xi=ma.pixelRatio,vi=po/xi}var Ua=sr?[Pr.x+Mi,Pr.y]:[0,0],ya=sr?[0,0]:[Pr.x+Mi+Jn[0],Pr.y+Jn[1]-pi],aa=[0,0];na&&(aa=ya,ya=[0,0]);var xa=(Pr.metrics.left-vi)*Pr.scale-Mi+ya[0],ca=(-Pr.metrics.top-vi)*Pr.scale+ya[1],oa=xa+ii.w*Pr.scale/xi,Rr=ca+ii.h*Pr.scale/xi,qr=new e(xa,ca),Fi=new e(oa,ca),ui=new e(xa,Rr),Ci=new e(oa,Rr);if(na){var ki=new e(-Mi,Mi-pu),Jr=-Math.PI/2,Bi=va/2-Mi,Va=Pr.imageName?Bi:0,vo=new e(5-pu-Bi,-Va),Oa=new(Function.prototype.bind.apply(e,[null].concat(aa)));qr._rotateAround(Jr,ki)._add(vo)._add(Oa),Fi._rotateAround(Jr,ki)._add(vo)._add(Oa),ui._rotateAround(Jr,ki)._add(vo)._add(Oa),Ci._rotateAround(Jr,ki)._add(vo)._add(Oa)}if(kr){var Ms=Math.sin(kr),el=Math.cos(kr),fa=[el,-Ms,Ms,el];qr._matMult(fa),Fi._matMult(fa),ui._matMult(fa),Ci._matMult(fa)}var Ss=new e(0,0),cs=new e(0,0);Or.push({tl:qr,tr:Fi,bl:ui,br:Ci,tex:ii,writingMode:qn.writingMode,glyphOffset:Ua,sectionIndex:Pr.sectionIndex,isSDF:yi,pixelOffsetTL:Ss,pixelOffsetBR:cs,minFontScaleX:0,minFontScaleY:0})}}return Or}(0,Y,Je,Se,Pe,Ne,ue,M.allowVerticalPlacement),wn=M.textSizeData,_n=null;wn.kind==="source"?(_n=[As*Se.layout.get("text-size").evaluate(Ne,{})])[0]>dl&&A(M.layerIds[0]+': Value for "text-size" is >= '+du+'. Reduce your "text-size".'):wn.kind==="composite"&&((_n=[As*Dt.compositeTextSizes[0].evaluate(Ne,{},Qt),As*Dt.compositeTextSizes[1].evaluate(Ne,{},Qt)])[0]>dl||_n[1]>dl)&&A(M.layerIds[0]+': Value for "text-size" is >= '+du+'. Reduce your "text-size".'),M.addSymbols(M.text,rn,_n,Je,Pe,Ne,yt,O,it.lineStartIndex,it.lineLength,Nt,Qt);for(var Ln=0,On=_t;Ln<On.length;Ln+=1)Pt[On[Ln]]=M.text.placedSymbolArray.length-1;return 4*rn.length}function Kf(M){for(var O in M)return M[O];return null}function Jp(M,O,Y,ue){var Se=M.compareText;if(O in Se){for(var Pe=Se[O],Ne=Pe.length-1;Ne>=0;Ne--)if(ue.dist(Pe[Ne])<Y)return!0}else Se[O]=[];return Se[O].push(ue),!1}var Kp=Dl.VectorTileFeature.types,$p=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ju(M,O,Y,ue,Se,Pe,Ne,Je,it,yt,_t,Pt,Nt){var Dt=Je?Math.min(dl,Math.round(Je[0])):0,Qt=Je?Math.min(dl,Math.round(Je[1])):0;M.emplaceBack(O,Y,Math.round(32*ue),Math.round(32*Se),Pe,Ne,(Dt<<1)+(it?1:0),Qt,16*yt,16*_t,256*Pt,256*Nt)}function Rc(M,O,Y){M.emplaceBack(O.x,O.y,Y),M.emplaceBack(O.x,O.y,Y),M.emplaceBack(O.x,O.y,Y),M.emplaceBack(O.x,O.y,Y)}function Qp(M){for(var O=0,Y=M.sections;O<Y.length;O+=1)if(wa(Y[O].text))return!0;return!1}var Hl=function(M){this.layoutVertexArray=new R,this.indexArray=new K,this.programConfigurations=M,this.segments=new vn,this.dynamicLayoutVertexArray=new U,this.opacityVertexArray=new j,this.placedSymbolArray=new Lt};Hl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Hl.prototype.upload=function(M,O,Y,ue){this.isEmpty()||(Y&&(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Ec.members),this.indexBuffer=M.createIndexBuffer(this.indexArray,O),this.dynamicLayoutVertexBuffer=M.createVertexBuffer(this.dynamicLayoutVertexArray,Mp.members,!0),this.opacityVertexBuffer=M.createVertexBuffer(this.opacityVertexArray,$p,!0),this.opacityVertexBuffer.itemSize=1),(Y||ue)&&this.programConfigurations.upload(M))},Hl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},xr("SymbolBuffers",Hl);var gu=function(M,O,Y){this.layoutVertexArray=new M,this.layoutAttributes=O,this.indexArray=new Y,this.segments=new vn,this.collisionVertexArray=new B};gu.prototype.upload=function(M){this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=M.createVertexBuffer(this.collisionVertexArray,Sp.members,!0)},gu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},xr("CollisionBuffers",gu);var ri=function(M){this.collisionBoxArray=M.collisionBoxArray,this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(Ne){return Ne.id}),this.index=M.index,this.pixelRatio=M.pixelRatio,this.sourceLayerIndex=M.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=mc([]),this.placementViewportMatrix=mc([]);var O=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ic(this.zoom,O["text-size"]),this.iconSizeData=Ic(this.zoom,O["icon-size"]);var Y=this.layers[0].layout,ue=Y.get("symbol-sort-key"),Se=Y.get("symbol-z-order");this.sortFeaturesByKey=Se!=="viewport-y"&&ue.constantOr(1)!==void 0;var Pe=Se==="viewport-y"||Se==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Pe&&(Y.get("text-allow-overlap")||Y.get("icon-allow-overlap")||Y.get("text-ignore-placement")||Y.get("icon-ignore-placement")),Y.get("symbol-placement")==="point"&&(this.writingModes=Y.get("text-writing-mode").map(function(Ne){return Do[Ne]})),this.stateDependentLayerIds=this.layers.filter(function(Ne){return Ne.isStateDependent()}).map(function(Ne){return Ne.id}),this.sourceID=M.sourceID};ri.prototype.createArrays=function(){this.text=new Hl(new fi(Ec.members,this.layers,this.zoom,function(M){return/^text/.test(M)})),this.icon=new Hl(new fi(Ec.members,this.layers,this.zoom,function(M){return/^icon/.test(M)})),this.glyphOffsetArray=new Et,this.lineVertexArray=new en,this.symbolInstances=new Ft},ri.prototype.calculateGlyphDependencies=function(M,O,Y,ue,Se){for(var Pe=0;Pe<M.length;Pe++)if(O[M.charCodeAt(Pe)]=!0,(Y||ue)&&Se){var Ne=cu[M.charAt(Pe)];Ne&&(O[Ne.charCodeAt(0)]=!0)}},ri.prototype.populate=function(M,O,Y){var ue=this.layers[0],Se=ue.layout,Pe=Se.get("text-font"),Ne=Se.get("text-field"),Je=Se.get("icon-image"),it=(Ne.value.kind!=="constant"||Ne.value.value instanceof Cn&&!Ne.value.value.isEmpty()||Ne.value.value.toString().length>0)&&(Pe.value.kind!=="constant"||Pe.value.value.length>0),yt=Je.value.kind!=="constant"||!!Je.value.value||Object.keys(Je.parameters).length>0,_t=Se.get("symbol-sort-key");if(this.features=[],it||yt){for(var Pt=O.iconDependencies,Nt=O.glyphDependencies,Dt=O.availableImages,Qt=new Xr(this.zoom),rn=0,wn=M;rn<wn.length;rn+=1){var _n=wn[rn],Ln=_n.feature,On=_n.id,Nn=_n.index,qn=_n.sourceLayerIndex,Jn=ue._featureFilter.needGeometry,hr={type:Ln.type,id:On,properties:Ln.properties,geometry:Jn?Ca(Ln):[]};if(ue._featureFilter.filter(Qt,hr,Y)){Jn||(hr.geometry=Ca(Ln));var sr=void 0;if(it){var gr=ue.getValueAndResolveTokens("text-field",hr,Y,Dt),_r=Cn.factory(gr);Qp(_r)&&(this.hasRTLText=!0),(!this.hasRTLText||Xa()==="unavailable"||this.hasRTLText&&_i.isParsed())&&(sr=Lp(_r,ue,hr))}var Dr=void 0;if(yt){var kr=ue.getValueAndResolveTokens("icon-image",hr,Y,Dt);Dr=kr instanceof Tn?kr:Tn.fromString(kr)}if(sr||Dr){var Or=this.sortFeaturesByKey?_t.evaluate(hr,{},Y):void 0,Er={id:On,text:sr,icon:Dr,index:Nn,sourceLayerIndex:qn,geometry:Ca(Ln),properties:Ln.properties,type:Kp[Ln.type],sortKey:Or};if(this.features.push(Er),Dr&&(Pt[Dr.name]=!0),sr){var wr=Pe.evaluate(hr,{},Y).join(","),jr=Se.get("text-rotation-alignment")==="map"&&Se.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Do.vertical)>=0;for(var zr=0,hi=sr.sections;zr<hi.length;zr+=1){var Pr=hi[zr];if(Pr.image)Pt[Pr.image.name]=!0;else{var ii=Fa(sr.toString()),vi=Pr.fontStack||wr,yi=Nt[vi]=Nt[vi]||{};this.calculateGlyphDependencies(Pr.text,yi,jr,this.allowVerticalPlacement,ii)}}}}}}Se.get("symbol-placement")==="line"&&(this.features=function(xi){var pi={},na={},Mi=[],ua=0;function ka(Ci){Mi.push(xi[Ci]),ua++}function ma(Ci,ki,Jr){var Bi=na[Ci];return delete na[Ci],na[ki]=Bi,Mi[Bi].geometry[0].pop(),Mi[Bi].geometry[0]=Mi[Bi].geometry[0].concat(Jr[0]),Bi}function Ua(Ci,ki,Jr){var Bi=pi[ki];return delete pi[ki],pi[Ci]=Bi,Mi[Bi].geometry[0].shift(),Mi[Bi].geometry[0]=Jr[0].concat(Mi[Bi].geometry[0]),Bi}function ya(Ci,ki,Jr){var Bi=Jr?ki[0][ki[0].length-1]:ki[0][0];return Ci+":"+Bi.x+":"+Bi.y}for(var aa=0;aa<xi.length;aa++){var xa=xi[aa],ca=xa.geometry,oa=xa.text?xa.text.toString():null;if(oa){var Rr=ya(oa,ca),qr=ya(oa,ca,!0);if(Rr in na&&qr in pi&&na[Rr]!==pi[qr]){var Fi=Ua(Rr,qr,ca),ui=ma(Rr,qr,Mi[Fi].geometry);delete pi[Rr],delete na[qr],na[ya(oa,Mi[ui].geometry,!0)]=ui,Mi[Fi].geometry=null}else Rr in na?ma(Rr,qr,ca):qr in pi?Ua(Rr,qr,ca):(ka(aa),pi[Rr]=ua-1,na[qr]=ua-1)}else ka(aa)}return Mi.filter(function(Ci){return Ci.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(xi,pi){return xi.sortKey-pi.sortKey})}},ri.prototype.update=function(M,O,Y){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(M,O,this.layers,Y),this.icon.programConfigurations.updatePaintArrays(M,O,this.layers,Y))},ri.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},ri.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},ri.prototype.upload=function(M){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(M),this.iconCollisionBox.upload(M)),this.text.upload(M,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(M,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},ri.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},ri.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},ri.prototype.addToLineVertexArray=function(M,O){var Y=this.lineVertexArray.length;if(M.segment!==void 0){for(var ue=M.dist(O[M.segment+1]),Se=M.dist(O[M.segment]),Pe={},Ne=M.segment+1;Ne<O.length;Ne++)Pe[Ne]={x:O[Ne].x,y:O[Ne].y,tileUnitDistanceFromAnchor:ue},Ne<O.length-1&&(ue+=O[Ne+1].dist(O[Ne]));for(var Je=M.segment||0;Je>=0;Je--)Pe[Je]={x:O[Je].x,y:O[Je].y,tileUnitDistanceFromAnchor:Se},Je>0&&(Se+=O[Je-1].dist(O[Je]));for(var it=0;it<O.length;it++){var yt=Pe[it];this.lineVertexArray.emplaceBack(yt.x,yt.y,yt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:Y,lineLength:this.lineVertexArray.length-Y}},ri.prototype.addSymbols=function(M,O,Y,ue,Se,Pe,Ne,Je,it,yt,_t,Pt){for(var Nt=M.indexArray,Dt=M.layoutVertexArray,Qt=M.segments.prepareSegment(4*O.length,Dt,Nt,Pe.sortKey),rn=this.glyphOffsetArray.length,wn=Qt.vertexLength,_n=this.allowVerticalPlacement&&Ne===Do.vertical?Math.PI/2:0,Ln=Pe.text&&Pe.text.sections,On=0;On<O.length;On++){var Nn=O[On],qn=Nn.tl,Jn=Nn.tr,hr=Nn.bl,sr=Nn.br,gr=Nn.tex,_r=Nn.pixelOffsetTL,Dr=Nn.pixelOffsetBR,kr=Nn.minFontScaleX,Or=Nn.minFontScaleY,Er=Nn.glyphOffset,wr=Nn.isSDF,jr=Nn.sectionIndex,zr=Qt.vertexLength,hi=Er[1];Ju(Dt,Je.x,Je.y,qn.x,hi+qn.y,gr.x,gr.y,Y,wr,_r.x,_r.y,kr,Or),Ju(Dt,Je.x,Je.y,Jn.x,hi+Jn.y,gr.x+gr.w,gr.y,Y,wr,Dr.x,_r.y,kr,Or),Ju(Dt,Je.x,Je.y,hr.x,hi+hr.y,gr.x,gr.y+gr.h,Y,wr,_r.x,Dr.y,kr,Or),Ju(Dt,Je.x,Je.y,sr.x,hi+sr.y,gr.x+gr.w,gr.y+gr.h,Y,wr,Dr.x,Dr.y,kr,Or),Rc(M.dynamicLayoutVertexArray,Je,_n),Nt.emplaceBack(zr,zr+1,zr+2),Nt.emplaceBack(zr+1,zr+2,zr+3),Qt.vertexLength+=4,Qt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Er[0]),On!==O.length-1&&jr===O[On+1].sectionIndex||M.programConfigurations.populatePaintArrays(Dt.length,Pe,Pe.index,{},Pt,Ln&&Ln[jr])}M.placedSymbolArray.emplaceBack(Je.x,Je.y,rn,this.glyphOffsetArray.length-rn,wn,it,yt,Je.segment,Y?Y[0]:0,Y?Y[1]:0,ue[0],ue[1],Ne,0,!1,0,_t)},ri.prototype._addCollisionDebugVertex=function(M,O,Y,ue,Se,Pe){return O.emplaceBack(0,0),M.emplaceBack(Y.x,Y.y,ue,Se,Math.round(Pe.x),Math.round(Pe.y))},ri.prototype.addCollisionDebugVertices=function(M,O,Y,ue,Se,Pe,Ne){var Je=Se.segments.prepareSegment(4,Se.layoutVertexArray,Se.indexArray),it=Je.vertexLength,yt=Se.layoutVertexArray,_t=Se.collisionVertexArray,Pt=Ne.anchorX,Nt=Ne.anchorY;this._addCollisionDebugVertex(yt,_t,Pe,Pt,Nt,new e(M,O)),this._addCollisionDebugVertex(yt,_t,Pe,Pt,Nt,new e(Y,O)),this._addCollisionDebugVertex(yt,_t,Pe,Pt,Nt,new e(Y,ue)),this._addCollisionDebugVertex(yt,_t,Pe,Pt,Nt,new e(M,ue)),Je.vertexLength+=4;var Dt=Se.indexArray;Dt.emplaceBack(it,it+1),Dt.emplaceBack(it+1,it+2),Dt.emplaceBack(it+2,it+3),Dt.emplaceBack(it+3,it),Je.primitiveLength+=4},ri.prototype.addDebugCollisionBoxes=function(M,O,Y,ue){for(var Se=M;Se<O;Se++){var Pe=this.collisionBoxArray.get(Se),Ne=Pe.x1,Je=Pe.y1,it=Pe.x2,yt=Pe.y2;this.addCollisionDebugVertices(Ne,Je,it,yt,ue?this.textCollisionBox:this.iconCollisionBox,Pe.anchorPoint,Y)}},ri.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new gu(fe,Af.members,je),this.iconCollisionBox=new gu(fe,Af.members,je);for(var M=0;M<this.symbolInstances.length;M++){var O=this.symbolInstances.get(M);this.addDebugCollisionBoxes(O.textBoxStartIndex,O.textBoxEndIndex,O,!0),this.addDebugCollisionBoxes(O.verticalTextBoxStartIndex,O.verticalTextBoxEndIndex,O,!0),this.addDebugCollisionBoxes(O.iconBoxStartIndex,O.iconBoxEndIndex,O,!1),this.addDebugCollisionBoxes(O.verticalIconBoxStartIndex,O.verticalIconBoxEndIndex,O,!1)}},ri.prototype._deserializeCollisionBoxesForSymbol=function(M,O,Y,ue,Se,Pe,Ne,Je,it){for(var yt={},_t=O;_t<Y;_t++){var Pt=M.get(_t);yt.textBox={x1:Pt.x1,y1:Pt.y1,x2:Pt.x2,y2:Pt.y2,anchorPointX:Pt.anchorPointX,anchorPointY:Pt.anchorPointY},yt.textFeatureIndex=Pt.featureIndex;break}for(var Nt=ue;Nt<Se;Nt++){var Dt=M.get(Nt);yt.verticalTextBox={x1:Dt.x1,y1:Dt.y1,x2:Dt.x2,y2:Dt.y2,anchorPointX:Dt.anchorPointX,anchorPointY:Dt.anchorPointY},yt.verticalTextFeatureIndex=Dt.featureIndex;break}for(var Qt=Pe;Qt<Ne;Qt++){var rn=M.get(Qt);yt.iconBox={x1:rn.x1,y1:rn.y1,x2:rn.x2,y2:rn.y2,anchorPointX:rn.anchorPointX,anchorPointY:rn.anchorPointY},yt.iconFeatureIndex=rn.featureIndex;break}for(var wn=Je;wn<it;wn++){var _n=M.get(wn);yt.verticalIconBox={x1:_n.x1,y1:_n.y1,x2:_n.x2,y2:_n.y2,anchorPointX:_n.anchorPointX,anchorPointY:_n.anchorPointY},yt.verticalIconFeatureIndex=_n.featureIndex;break}return yt},ri.prototype.deserializeCollisionBoxes=function(M){this.collisionArrays=[];for(var O=0;O<this.symbolInstances.length;O++){var Y=this.symbolInstances.get(O);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(M,Y.textBoxStartIndex,Y.textBoxEndIndex,Y.verticalTextBoxStartIndex,Y.verticalTextBoxEndIndex,Y.iconBoxStartIndex,Y.iconBoxEndIndex,Y.verticalIconBoxStartIndex,Y.verticalIconBoxEndIndex))}},ri.prototype.hasTextData=function(){return this.text.segments.get().length>0},ri.prototype.hasIconData=function(){return this.icon.segments.get().length>0},ri.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},ri.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},ri.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},ri.prototype.addIndicesForPlacedSymbol=function(M,O){for(var Y=M.placedSymbolArray.get(O),ue=Y.vertexStartIndex+4*Y.numGlyphs,Se=Y.vertexStartIndex;Se<ue;Se+=4)M.indexArray.emplaceBack(Se,Se+1,Se+2),M.indexArray.emplaceBack(Se+1,Se+2,Se+3)},ri.prototype.getSortedSymbolIndexes=function(M){if(this.sortedAngle===M&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var O=Math.sin(M),Y=Math.cos(M),ue=[],Se=[],Pe=[],Ne=0;Ne<this.symbolInstances.length;++Ne){Pe.push(Ne);var Je=this.symbolInstances.get(Ne);ue.push(0|Math.round(O*Je.anchorX+Y*Je.anchorY)),Se.push(Je.featureIndex)}return Pe.sort(function(it,yt){return ue[it]-ue[yt]||Se[yt]-Se[it]}),Pe},ri.prototype.addToSortKeyRanges=function(M,O){var Y=this.sortKeyRanges[this.sortKeyRanges.length-1];Y&&Y.sortKey===O?Y.symbolInstanceEnd=M+1:this.sortKeyRanges.push({sortKey:O,symbolInstanceStart:M,symbolInstanceEnd:M+1})},ri.prototype.sortFeatures=function(M){var O=this;if(this.sortFeaturesByY&&this.sortedAngle!==M&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(M),this.sortedAngle=M,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var Y=0,ue=this.symbolInstanceIndexes;Y<ue.length;Y+=1){var Se=ue[Y],Pe=this.symbolInstances.get(Se);this.featureSortOrder.push(Pe.featureIndex),[Pe.rightJustifiedTextSymbolIndex,Pe.centerJustifiedTextSymbolIndex,Pe.leftJustifiedTextSymbolIndex].forEach(function(Ne,Je,it){Ne>=0&&it.indexOf(Ne)===Je&&O.addIndicesForPlacedSymbol(O.text,Ne)}),Pe.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Pe.verticalPlacedTextSymbolIndex),Pe.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Pe.placedIconSymbolIndex),Pe.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Pe.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},xr("SymbolBucket",ri,{omit:["layers","collisionBoxArray","features","compareText"]}),ri.MAX_GLYPHS=65535,ri.addDynamicAttributes=Rc;var ed=new Wi({"symbol-placement":new Tr(Ie.layout_symbol["symbol-placement"]),"symbol-spacing":new Tr(Ie.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Tr(Ie.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ar(Ie.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Tr(Ie.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Tr(Ie.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Tr(Ie.layout_symbol["icon-ignore-placement"]),"icon-optional":new Tr(Ie.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Tr(Ie.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ar(Ie.layout_symbol["icon-size"]),"icon-text-fit":new Tr(Ie.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Tr(Ie.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ar(Ie.layout_symbol["icon-image"]),"icon-rotate":new Ar(Ie.layout_symbol["icon-rotate"]),"icon-padding":new Tr(Ie.layout_symbol["icon-padding"]),"icon-keep-upright":new Tr(Ie.layout_symbol["icon-keep-upright"]),"icon-offset":new Ar(Ie.layout_symbol["icon-offset"]),"icon-anchor":new Ar(Ie.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Tr(Ie.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Tr(Ie.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Tr(Ie.layout_symbol["text-rotation-alignment"]),"text-field":new Ar(Ie.layout_symbol["text-field"]),"text-font":new Ar(Ie.layout_symbol["text-font"]),"text-size":new Ar(Ie.layout_symbol["text-size"]),"text-max-width":new Ar(Ie.layout_symbol["text-max-width"]),"text-line-height":new Tr(Ie.layout_symbol["text-line-height"]),"text-letter-spacing":new Ar(Ie.layout_symbol["text-letter-spacing"]),"text-justify":new Ar(Ie.layout_symbol["text-justify"]),"text-radial-offset":new Ar(Ie.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Tr(Ie.layout_symbol["text-variable-anchor"]),"text-anchor":new Ar(Ie.layout_symbol["text-anchor"]),"text-max-angle":new Tr(Ie.layout_symbol["text-max-angle"]),"text-writing-mode":new Tr(Ie.layout_symbol["text-writing-mode"]),"text-rotate":new Ar(Ie.layout_symbol["text-rotate"]),"text-padding":new Tr(Ie.layout_symbol["text-padding"]),"text-keep-upright":new Tr(Ie.layout_symbol["text-keep-upright"]),"text-transform":new Ar(Ie.layout_symbol["text-transform"]),"text-offset":new Ar(Ie.layout_symbol["text-offset"]),"text-allow-overlap":new Tr(Ie.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Tr(Ie.layout_symbol["text-ignore-placement"]),"text-optional":new Tr(Ie.layout_symbol["text-optional"])}),Fc={paint:new Wi({"icon-opacity":new Ar(Ie.paint_symbol["icon-opacity"]),"icon-color":new Ar(Ie.paint_symbol["icon-color"]),"icon-halo-color":new Ar(Ie.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ar(Ie.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ar(Ie.paint_symbol["icon-halo-blur"]),"icon-translate":new Tr(Ie.paint_symbol["icon-translate"]),"icon-translate-anchor":new Tr(Ie.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ar(Ie.paint_symbol["text-opacity"]),"text-color":new Ar(Ie.paint_symbol["text-color"],{runtimeType:It,getOverride:function(M){return M.textColor},hasOverride:function(M){return!!M.textColor}}),"text-halo-color":new Ar(Ie.paint_symbol["text-halo-color"]),"text-halo-width":new Ar(Ie.paint_symbol["text-halo-width"]),"text-halo-blur":new Ar(Ie.paint_symbol["text-halo-blur"]),"text-translate":new Tr(Ie.paint_symbol["text-translate"]),"text-translate-anchor":new Tr(Ie.paint_symbol["text-translate-anchor"])}),layout:ed},ql=function(M){this.type=M.property.overrides?M.property.overrides.runtimeType:kt,this.defaultValue=M};ql.prototype.evaluate=function(M){if(M.formattedSection){var O=this.defaultValue.property.overrides;if(O&&O.hasOverride(M.formattedSection))return O.getOverride(M.formattedSection)}return M.feature&&M.featureState?this.defaultValue.evaluate(M.feature,M.featureState):this.defaultValue.property.specification.default},ql.prototype.eachChild=function(M){this.defaultValue.isConstant()||M(this.defaultValue.value._styleExpression.expression)},ql.prototype.outputDefined=function(){return!1},ql.prototype.serialize=function(){return null},xr("FormatSectionOverride",ql,{omit:["defaultValue"]});var td=function(M){function O(Y){M.call(this,Y,Fc)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.recalculate=function(Y,ue){if(M.prototype.recalculate.call(this,Y,ue),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var Se=this.layout.get("text-writing-mode");if(Se){for(var Pe=[],Ne=0,Je=Se;Ne<Je.length;Ne+=1){var it=Je[Ne];Pe.indexOf(it)<0&&Pe.push(it)}this.layout._values["text-writing-mode"]=Pe}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},O.prototype.getValueAndResolveTokens=function(Y,ue,Se,Pe){var Ne=this.layout.get(Y).evaluate(ue,{},Se,Pe),Je=this._unevaluatedLayout._values[Y];return Je.isDataDriven()||ns(Je.value)||!Ne?Ne:function(it,yt){return yt.replace(/{([^{}]+)}/g,function(_t,Pt){return Pt in it?String(it[Pt]):""})}(ue.properties,Ne)},O.prototype.createBucket=function(Y){return new ri(Y)},O.prototype.queryRadius=function(){return 0},O.prototype.queryIntersectsFeature=function(){return!1},O.prototype._setPaintOverrides=function(){for(var Y=0,ue=Fc.paint.overridableProperties;Y<ue.length;Y+=1){var Se=ue[Y];if(O.hasPaintOverride(this.layout,Se)){var Pe,Ne=this.paint.get(Se),Je=new ql(Ne),it=new gs(Je,Ne.property.specification);Pe=Ne.value.kind==="constant"||Ne.value.kind==="source"?new _o("source",it):new ao("composite",it,Ne.value.zoomStops,Ne.value._interpolationType),this.paint._values[Se]=new Ei(Ne.property,Pe,Ne.parameters)}}},O.prototype._handleOverridablePaintPropertyUpdate=function(Y,ue,Se){return!(!this.layout||ue.isDataDriven()||Se.isDataDriven())&&O.hasPaintOverride(this.layout,Y)},O.hasPaintOverride=function(Y,ue){var Se=Y.get("text-field"),Pe=Fc.paint.properties[ue],Ne=!1,Je=function(_t){for(var Pt=0,Nt=_t;Pt<Nt.length;Pt+=1){var Dt=Nt[Pt];if(Pe.overrides&&Pe.overrides.hasOverride(Dt))return void(Ne=!0)}};if(Se.value.kind==="constant"&&Se.value.value instanceof Cn)Je(Se.value.value.sections);else if(Se.value.kind==="source"){var it=function(_t){if(!Ne)if(_t instanceof Qn&&$n(_t.value)===qt){var Pt=_t.value;Je(Pt.sections)}else _t instanceof tn?Je(_t.sections):_t.eachChild(it)},yt=Se.value;yt._styleExpression&&it(yt._styleExpression.expression)}return Ne},O}(Xi),nd={paint:new Wi({"background-color":new Tr(Ie.paint_background["background-color"]),"background-pattern":new ia(Ie.paint_background["background-pattern"]),"background-opacity":new Tr(Ie.paint_background["background-opacity"])})},rd=function(M){function O(Y){M.call(this,Y,nd)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O}(Xi),id={paint:new Wi({"raster-opacity":new Tr(Ie.paint_raster["raster-opacity"]),"raster-hue-rotate":new Tr(Ie.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Tr(Ie.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Tr(Ie.paint_raster["raster-brightness-max"]),"raster-saturation":new Tr(Ie.paint_raster["raster-saturation"]),"raster-contrast":new Tr(Ie.paint_raster["raster-contrast"]),"raster-resampling":new Tr(Ie.paint_raster["raster-resampling"]),"raster-fade-duration":new Tr(Ie.paint_raster["raster-fade-duration"])})},ad=function(M){function O(Y){M.call(this,Y,id)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O}(Xi),od=function(M){function O(Y){M.call(this,Y,{}),this.implementation=Y}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},O.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},O.prototype.recalculate=function(){},O.prototype.updateTransitions=function(){},O.prototype.hasTransition=function(){},O.prototype.serialize=function(){},O.prototype.onAdd=function(Y){this.implementation.onAdd&&this.implementation.onAdd(Y,Y.painter.context.gl)},O.prototype.onRemove=function(Y){this.implementation.onRemove&&this.implementation.onRemove(Y,Y.painter.context.gl)},O}(Xi),sd={circle:Zh,heatmap:Wh,hillshade:Jh,fill:hp,"fill-extrusion":bp,line:Ap,symbol:td,background:rd,raster:ad},$f=self.HTMLImageElement,Qf=self.HTMLCanvasElement,eh=self.HTMLVideoElement,th=self.ImageData,Ku=self.ImageBitmap,_l=function(M,O,Y,ue){this.context=M,this.format=Y,this.texture=M.gl.createTexture(),this.update(O,ue)};_l.prototype.update=function(M,O,Y){var ue=M.width,Se=M.height,Pe=!(this.size&&this.size[0]===ue&&this.size[1]===Se||Y),Ne=this.context,Je=Ne.gl;if(this.useMipmap=!!(O&&O.useMipmap),Je.bindTexture(Je.TEXTURE_2D,this.texture),Ne.pixelStoreUnpackFlipY.set(!1),Ne.pixelStoreUnpack.set(1),Ne.pixelStoreUnpackPremultiplyAlpha.set(this.format===Je.RGBA&&(!O||O.premultiply!==!1)),Pe)this.size=[ue,Se],M instanceof $f||M instanceof Qf||M instanceof eh||M instanceof th||Ku&&M instanceof Ku?Je.texImage2D(Je.TEXTURE_2D,0,this.format,this.format,Je.UNSIGNED_BYTE,M):Je.texImage2D(Je.TEXTURE_2D,0,this.format,ue,Se,0,this.format,Je.UNSIGNED_BYTE,M.data);else{var it=Y||{x:0,y:0},yt=it.x,_t=it.y;M instanceof $f||M instanceof Qf||M instanceof eh||M instanceof th||Ku&&M instanceof Ku?Je.texSubImage2D(Je.TEXTURE_2D,0,yt,_t,Je.RGBA,Je.UNSIGNED_BYTE,M):Je.texSubImage2D(Je.TEXTURE_2D,0,yt,_t,ue,Se,Je.RGBA,Je.UNSIGNED_BYTE,M.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Je.generateMipmap(Je.TEXTURE_2D)},_l.prototype.bind=function(M,O,Y){var ue=this.context.gl;ue.bindTexture(ue.TEXTURE_2D,this.texture),Y!==ue.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(Y=ue.LINEAR),M!==this.filter&&(ue.texParameteri(ue.TEXTURE_2D,ue.TEXTURE_MAG_FILTER,M),ue.texParameteri(ue.TEXTURE_2D,ue.TEXTURE_MIN_FILTER,Y||M),this.filter=M),O!==this.wrap&&(ue.texParameteri(ue.TEXTURE_2D,ue.TEXTURE_WRAP_S,O),ue.texParameteri(ue.TEXTURE_2D,ue.TEXTURE_WRAP_T,O),this.wrap=O)},_l.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},_l.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Bc=function(M){var O=this;this._callback=M,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){O._triggered=!1,O._callback()})};Bc.prototype.trigger=function(){var M=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){M._triggered=!1,M._callback()},0))},Bc.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Gl=function(M,O,Y){this.target=M,this.parent=O,this.mapId=Y,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},f(["receive","process"],this),this.invoker=new Bc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=L()?M:self};function nh(M,O,Y){var ue=2*Math.PI*6378137/256/Math.pow(2,Y);return[M*ue-2*Math.PI*6378137/2,O*ue-2*Math.PI*6378137/2]}Gl.prototype.send=function(M,O,Y,ue,Se){var Pe=this;Se===void 0&&(Se=!1);var Ne=Math.round(1e18*Math.random()).toString(36).substring(0,10);Y&&(this.callbacks[Ne]=Y);var Je=D(this.globalScope)?void 0:[];return this.target.postMessage({id:Ne,type:M,hasCallback:!!Y,targetMapId:ue,mustQueue:Se,sourceMapId:this.mapId,data:Yo(O,Je)},Je),{cancel:function(){Y&&delete Pe.callbacks[Ne],Pe.target.postMessage({id:Ne,type:"<cancel>",targetMapId:ue,sourceMapId:Pe.mapId})}}},Gl.prototype.receive=function(M){var O=M.data,Y=O.id;if(Y&&(!O.targetMapId||this.mapId===O.targetMapId))if(O.type==="<cancel>"){delete this.tasks[Y];var ue=this.cancelCallbacks[Y];delete this.cancelCallbacks[Y],ue&&ue()}else L()||O.mustQueue?(this.tasks[Y]=O,this.taskQueue.push(Y),this.invoker.trigger()):this.processTask(Y,O)},Gl.prototype.process=function(){if(this.taskQueue.length){var M=this.taskQueue.shift(),O=this.tasks[M];delete this.tasks[M],this.taskQueue.length&&this.invoker.trigger(),O&&this.processTask(M,O)}},Gl.prototype.processTask=function(M,O){var Y=this;if(O.type==="<response>"){var ue=this.callbacks[M];delete this.callbacks[M],ue&&(O.error?ue(Wo(O.error)):ue(null,Wo(O.data)))}else{var Se=!1,Pe=D(this.globalScope)?void 0:[],Ne=O.hasCallback?function(_t,Pt){Se=!0,delete Y.cancelCallbacks[M],Y.target.postMessage({id:M,type:"<response>",sourceMapId:Y.mapId,error:_t?Yo(_t):null,data:Yo(Pt,Pe)},Pe)}:function(_t){Se=!0},Je=null,it=Wo(O.data);if(this.parent[O.type])Je=this.parent[O.type](O.sourceMapId,it,Ne);else if(this.parent.getWorkerSource){var yt=O.type.split(".");Je=this.parent.getWorkerSource(O.sourceMapId,yt[0],it.source)[yt[1]](it,Ne)}else Ne(new Error("Could not find function "+O.type));!Se&&Je&&Je.cancel&&(this.cancelCallbacks[M]=Je.cancel)}},Gl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var ea=function(M,O){M&&(O?this.setSouthWest(M).setNorthEast(O):M.length===4?this.setSouthWest([M[0],M[1]]).setNorthEast([M[2],M[3]]):this.setSouthWest(M[0]).setNorthEast(M[1]))};ea.prototype.setNorthEast=function(M){return this._ne=M instanceof Ti?new Ti(M.lng,M.lat):Ti.convert(M),this},ea.prototype.setSouthWest=function(M){return this._sw=M instanceof Ti?new Ti(M.lng,M.lat):Ti.convert(M),this},ea.prototype.extend=function(M){var O,Y,ue=this._sw,Se=this._ne;if(M instanceof Ti)O=M,Y=M;else{if(!(M instanceof ea)){if(Array.isArray(M)){if(M.length===4||M.every(Array.isArray)){var Pe=M;return this.extend(ea.convert(Pe))}var Ne=M;return this.extend(Ti.convert(Ne))}return this}if(O=M._sw,Y=M._ne,!O||!Y)return this}return ue||Se?(ue.lng=Math.min(O.lng,ue.lng),ue.lat=Math.min(O.lat,ue.lat),Se.lng=Math.max(Y.lng,Se.lng),Se.lat=Math.max(Y.lat,Se.lat)):(this._sw=new Ti(O.lng,O.lat),this._ne=new Ti(Y.lng,Y.lat)),this},ea.prototype.getCenter=function(){return new Ti((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ea.prototype.getSouthWest=function(){return this._sw},ea.prototype.getNorthEast=function(){return this._ne},ea.prototype.getNorthWest=function(){return new Ti(this.getWest(),this.getNorth())},ea.prototype.getSouthEast=function(){return new Ti(this.getEast(),this.getSouth())},ea.prototype.getWest=function(){return this._sw.lng},ea.prototype.getSouth=function(){return this._sw.lat},ea.prototype.getEast=function(){return this._ne.lng},ea.prototype.getNorth=function(){return this._ne.lat},ea.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ea.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ea.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ea.prototype.contains=function(M){var O=Ti.convert(M),Y=O.lng,ue=O.lat,Se=this._sw.lat<=ue&&ue<=this._ne.lat,Pe=this._sw.lng<=Y&&Y<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Pe=this._sw.lng>=Y&&Y>=this._ne.lng),Se&&Pe},ea.convert=function(M){return!M||M instanceof ea?M:new ea(M)};var rh=63710088e-1,Ti=function(M,O){if(isNaN(M)||isNaN(O))throw new Error("Invalid LngLat object: ("+M+", "+O+")");if(this.lng=+M,this.lat=+O,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ti.prototype.wrap=function(){return new Ti(o(this.lng,-180,180),this.lat)},Ti.prototype.toArray=function(){return[this.lng,this.lat]},Ti.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ti.prototype.distanceTo=function(M){var O=Math.PI/180,Y=this.lat*O,ue=M.lat*O,Se=Math.sin(Y)*Math.sin(ue)+Math.cos(Y)*Math.cos(ue)*Math.cos((M.lng-this.lng)*O);return rh*Math.acos(Math.min(Se,1))},Ti.prototype.toBounds=function(M){M===void 0&&(M=0);var O=360*M/40075017,Y=O/Math.cos(Math.PI/180*this.lat);return new ea(new Ti(this.lng-Y,this.lat-O),new Ti(this.lng+Y,this.lat+O))},Ti.convert=function(M){if(M instanceof Ti)return M;if(Array.isArray(M)&&(M.length===2||M.length===3))return new Ti(Number(M[0]),Number(M[1]));if(!Array.isArray(M)&&typeof M=="object"&&M!==null)return new Ti(Number("lng"in M?M.lng:M.lon),Number(M.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var ih=2*Math.PI*rh;function ah(M){return ih*Math.cos(M*Math.PI/180)}function oh(M){return(180+M)/360}function sh(M){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+M*Math.PI/360)))/360}function lh(M,O){return M/ah(O)}function Nc(M){var O=180-360*M;return 360/Math.PI*Math.atan(Math.exp(O*Math.PI/180))-90}var wl=function(M,O,Y){Y===void 0&&(Y=0),this.x=+M,this.y=+O,this.z=+Y};wl.fromLngLat=function(M,O){O===void 0&&(O=0);var Y=Ti.convert(M);return new wl(oh(Y.lng),sh(Y.lat),lh(O,Y.lat))},wl.prototype.toLngLat=function(){return new Ti(360*this.x-180,Nc(this.y))},wl.prototype.toAltitude=function(){return M=this.z,O=this.y,M*ah(Nc(O));var M,O},wl.prototype.meterInMercatorCoordinateUnits=function(){return 1/ih*(M=Nc(this.y),1/Math.cos(M*Math.PI/180));var M};var Tl=function(M,O,Y){this.z=M,this.x=O,this.y=Y,this.key=vu(0,M,M,O,Y)};Tl.prototype.equals=function(M){return this.z===M.z&&this.x===M.x&&this.y===M.y},Tl.prototype.url=function(M,O){var Y,ue,Se,Pe,Ne,Je=(Y=this.x,ue=this.y,Se=this.z,Pe=nh(256*Y,256*(ue=Math.pow(2,Se)-ue-1),Se),Ne=nh(256*(Y+1),256*(ue+1),Se),Pe[0]+","+Pe[1]+","+Ne[0]+","+Ne[1]),it=function(yt,_t,Pt){for(var Nt,Dt="",Qt=yt;Qt>0;Qt--)Dt+=(_t&(Nt=1<<Qt-1)?1:0)+(Pt&Nt?2:0);return Dt}(this.z,this.x,this.y);return M[(this.x+this.y)%M.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(O==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",it).replace("{bbox-epsg-3857}",Je)},Tl.prototype.getTilePoint=function(M){var O=Math.pow(2,this.z);return new e((M.x*O-this.x)*Wr,(M.y*O-this.y)*Wr)},Tl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var uh=function(M,O){this.wrap=M,this.canonical=O,this.key=vu(M,O.z,O.z,O.x,O.y)},ta=function(M,O,Y,ue,Se){this.overscaledZ=M,this.wrap=O,this.canonical=new Tl(Y,+ue,+Se),this.key=vu(O,M,Y,ue,Se)};function vu(M,O,Y,ue,Se){(M*=2)<0&&(M=-1*M-1);var Pe=1<<Y;return(Pe*Pe*M+Pe*Se+ue).toString(36)+Y.toString(36)+O.toString(36)}ta.prototype.equals=function(M){return this.overscaledZ===M.overscaledZ&&this.wrap===M.wrap&&this.canonical.equals(M.canonical)},ta.prototype.scaledTo=function(M){var O=this.canonical.z-M;return M>this.canonical.z?new ta(M,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ta(M,this.wrap,M,this.canonical.x>>O,this.canonical.y>>O)},ta.prototype.calculateScaledKey=function(M,O){var Y=this.canonical.z-M;return M>this.canonical.z?vu(this.wrap*+O,M,this.canonical.z,this.canonical.x,this.canonical.y):vu(this.wrap*+O,M,M,this.canonical.x>>Y,this.canonical.y>>Y)},ta.prototype.isChildOf=function(M){if(M.wrap!==this.wrap)return!1;var O=this.canonical.z-M.canonical.z;return M.overscaledZ===0||M.overscaledZ<this.overscaledZ&&M.canonical.x===this.canonical.x>>O&&M.canonical.y===this.canonical.y>>O},ta.prototype.children=function(M){if(this.overscaledZ>=M)return[new ta(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var O=this.canonical.z+1,Y=2*this.canonical.x,ue=2*this.canonical.y;return[new ta(O,this.wrap,O,Y,ue),new ta(O,this.wrap,O,Y+1,ue),new ta(O,this.wrap,O,Y,ue+1),new ta(O,this.wrap,O,Y+1,ue+1)]},ta.prototype.isLessThan=function(M){return this.wrap<M.wrap||!(this.wrap>M.wrap)&&(this.overscaledZ<M.overscaledZ||!(this.overscaledZ>M.overscaledZ)&&(this.canonical.x<M.canonical.x||!(this.canonical.x>M.canonical.x)&&this.canonical.y<M.canonical.y))},ta.prototype.wrapped=function(){return new ta(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ta.prototype.unwrapTo=function(M){return new ta(this.overscaledZ,M,this.canonical.z,this.canonical.x,this.canonical.y)},ta.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ta.prototype.toUnwrapped=function(){return new uh(this.wrap,this.canonical)},ta.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ta.prototype.getTilePoint=function(M){return this.canonical.getTilePoint(new wl(M.x-this.wrap,M.y))},xr("CanonicalTileID",Tl),xr("OverscaledTileID",ta,{omit:["posMatrix"]});var $s=function(M,O,Y){if(this.uid=M,O.height!==O.width)throw new RangeError("DEM tiles must be square");if(Y&&Y!=="mapbox"&&Y!=="terrarium")return A('"'+Y+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=O.height;var ue=this.dim=O.height-2;this.data=new Uint32Array(O.data.buffer),this.encoding=Y||"mapbox";for(var Se=0;Se<ue;Se++)this.data[this._idx(-1,Se)]=this.data[this._idx(0,Se)],this.data[this._idx(ue,Se)]=this.data[this._idx(ue-1,Se)],this.data[this._idx(Se,-1)]=this.data[this._idx(Se,0)],this.data[this._idx(Se,ue)]=this.data[this._idx(Se,ue-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ue,-1)]=this.data[this._idx(ue-1,0)],this.data[this._idx(-1,ue)]=this.data[this._idx(0,ue-1)],this.data[this._idx(ue,ue)]=this.data[this._idx(ue-1,ue-1)]};$s.prototype.get=function(M,O){var Y=new Uint8Array(this.data.buffer),ue=4*this._idx(M,O);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(Y[ue],Y[ue+1],Y[ue+2])},$s.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},$s.prototype._idx=function(M,O){if(M<-1||M>=this.dim+1||O<-1||O>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(O+1)*this.stride+(M+1)},$s.prototype._unpackMapbox=function(M,O,Y){return(256*M*256+256*O+Y)/10-1e4},$s.prototype._unpackTerrarium=function(M,O,Y){return 256*M+O+Y/256-32768},$s.prototype.getPixels=function(){return new $a({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},$s.prototype.backfillBorder=function(M,O,Y){if(this.dim!==M.dim)throw new Error("dem dimension mismatch");var ue=O*this.dim,Se=O*this.dim+this.dim,Pe=Y*this.dim,Ne=Y*this.dim+this.dim;switch(O){case-1:ue=Se-1;break;case 1:Se=ue+1}switch(Y){case-1:Pe=Ne-1;break;case 1:Ne=Pe+1}for(var Je=-O*this.dim,it=-Y*this.dim,yt=Pe;yt<Ne;yt++)for(var _t=ue;_t<Se;_t++)this.data[this._idx(_t,yt)]=M.data[this._idx(_t+Je,yt+it)]},xr("DEMData",$s);var $u=function(M){this._stringToNumber={},this._numberToString=[];for(var O=0;O<M.length;O++){var Y=M[O];this._stringToNumber[Y]=O,this._numberToString[O]=Y}};$u.prototype.encode=function(M){return this._stringToNumber[M]},$u.prototype.decode=function(M){return this._numberToString[M]};var Qu=function(M,O,Y,ue,Se){this.type="Feature",this._vectorTileFeature=M,M._z=O,M._x=Y,M._y=ue,this.properties=M.properties,this.id=Se},jc={geometry:{configurable:!0}};jc.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},jc.geometry.set=function(M){this._geometry=M},Qu.prototype.toJSON=function(){var M={geometry:this.geometry};for(var O in this)O!=="_geometry"&&O!=="_vectorTileFeature"&&(M[O]=this[O]);return M},Object.defineProperties(Qu.prototype,jc);var Zl=function(){this.state={},this.stateChanges={},this.deletedStates={}};Zl.prototype.updateState=function(M,O,Y){var ue=String(O);if(this.stateChanges[M]=this.stateChanges[M]||{},this.stateChanges[M][ue]=this.stateChanges[M][ue]||{},u(this.stateChanges[M][ue],Y),this.deletedStates[M]===null)for(var Se in this.deletedStates[M]={},this.state[M])Se!==ue&&(this.deletedStates[M][Se]=null);else if(this.deletedStates[M]&&this.deletedStates[M][ue]===null)for(var Pe in this.deletedStates[M][ue]={},this.state[M][ue])Y[Pe]||(this.deletedStates[M][ue][Pe]=null);else for(var Ne in Y)this.deletedStates[M]&&this.deletedStates[M][ue]&&this.deletedStates[M][ue][Ne]===null&&delete this.deletedStates[M][ue][Ne]},Zl.prototype.removeFeatureState=function(M,O,Y){if(this.deletedStates[M]!==null){var ue=String(O);if(this.deletedStates[M]=this.deletedStates[M]||{},Y&&O!==void 0)this.deletedStates[M][ue]!==null&&(this.deletedStates[M][ue]=this.deletedStates[M][ue]||{},this.deletedStates[M][ue][Y]=null);else if(O!==void 0)if(this.stateChanges[M]&&this.stateChanges[M][ue])for(Y in this.deletedStates[M][ue]={},this.stateChanges[M][ue])this.deletedStates[M][ue][Y]=null;else this.deletedStates[M][ue]=null;else this.deletedStates[M]=null}},Zl.prototype.getState=function(M,O){var Y=String(O),ue=this.state[M]||{},Se=this.stateChanges[M]||{},Pe=u({},ue[Y],Se[Y]);if(this.deletedStates[M]===null)return{};if(this.deletedStates[M]){var Ne=this.deletedStates[M][O];if(Ne===null)return{};for(var Je in Ne)delete Pe[Je]}return Pe},Zl.prototype.initializeTileState=function(M,O){M.setFeatureState(this.state,O)},Zl.prototype.coalesceChanges=function(M,O){var Y={};for(var ue in this.stateChanges){this.state[ue]=this.state[ue]||{};var Se={};for(var Pe in this.stateChanges[ue])this.state[ue][Pe]||(this.state[ue][Pe]={}),u(this.state[ue][Pe],this.stateChanges[ue][Pe]),Se[Pe]=this.state[ue][Pe];Y[ue]=Se}for(var Ne in this.deletedStates){this.state[Ne]=this.state[Ne]||{};var Je={};if(this.deletedStates[Ne]===null)for(var it in this.state[Ne])Je[it]={},this.state[Ne][it]={};else for(var yt in this.deletedStates[Ne]){if(this.deletedStates[Ne][yt]===null)this.state[Ne][yt]={};else for(var _t=0,Pt=Object.keys(this.deletedStates[Ne][yt]);_t<Pt.length;_t+=1){var Nt=Pt[_t];delete this.state[Ne][yt][Nt]}Je[yt]=this.state[Ne][yt]}Y[Ne]=Y[Ne]||{},u(Y[Ne],Je)}if(this.stateChanges={},this.deletedStates={},Object.keys(Y).length!==0)for(var Dt in M)M[Dt].setFeatureState(Y,O)};var Qs=function(M,O){this.tileID=M,this.x=M.canonical.x,this.y=M.canonical.y,this.z=M.canonical.z,this.grid=new ji(Wr,16,0),this.grid3D=new ji(Wr,16,0),this.featureIndexArray=new Vt,this.promoteId=O};function ch(M,O,Y,ue,Se){return v(M,function(Pe,Ne){var Je=O instanceof Yi?O.get(Ne):null;return Je&&Je.evaluate?Je.evaluate(Y,ue,Se):Je})}function fh(M){for(var O=1/0,Y=1/0,ue=-1/0,Se=-1/0,Pe=0,Ne=M;Pe<Ne.length;Pe+=1){var Je=Ne[Pe];O=Math.min(O,Je.x),Y=Math.min(Y,Je.y),ue=Math.max(ue,Je.x),Se=Math.max(Se,Je.y)}return{minX:O,minY:Y,maxX:ue,maxY:Se}}function ld(M,O){return O-M}Qs.prototype.insert=function(M,O,Y,ue,Se,Pe){var Ne=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(Y,ue,Se);for(var Je=Pe?this.grid3D:this.grid,it=0;it<O.length;it++){for(var yt=O[it],_t=[1/0,1/0,-1/0,-1/0],Pt=0;Pt<yt.length;Pt++){var Nt=yt[Pt];_t[0]=Math.min(_t[0],Nt.x),_t[1]=Math.min(_t[1],Nt.y),_t[2]=Math.max(_t[2],Nt.x),_t[3]=Math.max(_t[3],Nt.y)}_t[0]<Wr&&_t[1]<Wr&&_t[2]>=0&&_t[3]>=0&&Je.insert(Ne,_t[0],_t[1],_t[2],_t[3])}},Qs.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Dl.VectorTile(new Uu(this.rawTileData)).layers,this.sourceLayerCoder=new $u(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Qs.prototype.query=function(M,O,Y,ue){var Se=this;this.loadVTLayers();for(var Pe=M.params||{},Ne=Wr/M.tileSize/M.scale,Je=rs(Pe.filter),it=M.queryGeometry,yt=M.queryPadding*Ne,_t=fh(it),Pt=this.grid.query(_t.minX-yt,_t.minY-yt,_t.maxX+yt,_t.maxY+yt),Nt=fh(M.cameraQueryGeometry),Dt=0,Qt=this.grid3D.query(Nt.minX-yt,Nt.minY-yt,Nt.maxX+yt,Nt.maxY+yt,function(Nn,qn,Jn,hr){return function(sr,gr,_r,Dr,kr){for(var Or=0,Er=sr;Or<Er.length;Or+=1){var wr=Er[Or];if(gr<=wr.x&&_r<=wr.y&&Dr>=wr.x&&kr>=wr.y)return!0}var jr=[new e(gr,_r),new e(gr,kr),new e(Dr,kr),new e(Dr,_r)];if(sr.length>2){for(var zr=0,hi=jr;zr<hi.length;zr+=1)if(hl(sr,hi[zr]))return!0}for(var Pr=0;Pr<sr.length-1;Pr++)if(nu(sr[Pr],sr[Pr+1],jr))return!0;return!1}(M.cameraQueryGeometry,Nn-yt,qn-yt,Jn+yt,hr+yt)});Dt<Qt.length;Dt+=1){var rn=Qt[Dt];Pt.push(rn)}Pt.sort(ld);for(var wn,_n={},Ln=function(Nn){var qn=Pt[Nn];if(qn!==wn){wn=qn;var Jn=Se.featureIndexArray.get(qn),hr=null;Se.loadMatchingFeature(_n,Jn.bucketIndex,Jn.sourceLayerIndex,Jn.featureIndex,Je,Pe.layers,Pe.availableImages,O,Y,ue,function(sr,gr,_r){return hr||(hr=Ca(sr)),gr.queryIntersectsFeature(it,sr,_r,hr,Se.z,M.transform,Ne,M.pixelPosMatrix)})}},On=0;On<Pt.length;On++)Ln(On);return _n},Qs.prototype.loadMatchingFeature=function(M,O,Y,ue,Se,Pe,Ne,Je,it,yt,_t){var Pt=this.bucketLayerIDs[O];if(!Pe||function(hr,sr){for(var gr=0;gr<hr.length;gr++)if(sr.indexOf(hr[gr])>=0)return!0;return!1}(Pe,Pt)){var Nt=this.sourceLayerCoder.decode(Y),Dt=this.vtLayers[Nt].feature(ue);if(Se.filter(new Xr(this.tileID.overscaledZ),Dt))for(var Qt=this.getId(Dt,Nt),rn=0;rn<Pt.length;rn++){var wn=Pt[rn];if(!(Pe&&Pe.indexOf(wn)<0)){var _n=Je[wn];if(_n){var Ln={};Qt!==void 0&&yt&&(Ln=yt.getState(_n.sourceLayer||"_geojsonTileLayer",Qt));var On=it[wn];On.paint=ch(On.paint,_n.paint,Dt,Ln,Ne),On.layout=ch(On.layout,_n.layout,Dt,Ln,Ne);var Nn=!_t||_t(Dt,_n,Ln);if(Nn){var qn=new Qu(Dt,this.z,this.x,this.y,Qt);qn.layer=On;var Jn=M[wn];Jn===void 0&&(Jn=M[wn]=[]),Jn.push({featureIndex:ue,feature:qn,intersectionZ:Nn})}}}}}},Qs.prototype.lookupSymbolFeatures=function(M,O,Y,ue,Se,Pe,Ne,Je){var it={};this.loadVTLayers();for(var yt=rs(Se),_t=0,Pt=M;_t<Pt.length;_t+=1){var Nt=Pt[_t];this.loadMatchingFeature(it,Y,ue,Nt,yt,Pe,Ne,Je,O)}return it},Qs.prototype.hasLayer=function(M){for(var O=0,Y=this.bucketLayerIDs;O<Y.length;O+=1)for(var ue=0,Se=Y[O];ue<Se.length;ue+=1)if(M===Se[ue])return!0;return!1},Qs.prototype.getId=function(M,O){var Y=M.id;if(this.promoteId){var ue=typeof this.promoteId=="string"?this.promoteId:this.promoteId[O];typeof(Y=M.properties[ue])=="boolean"&&(Y=Number(Y))}return Y},xr("FeatureIndex",Qs,{omit:["rawTileData","sourceLayerCoder"]});var la=function(M,O){this.tileID=M,this.uid=c(),this.uses=0,this.tileSize=O,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};la.prototype.registerFadeDuration=function(M){var O=M+this.timeAdded;O<$.now()||this.fadeEndTime&&O<this.fadeEndTime||(this.fadeEndTime=O)},la.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},la.prototype.loadVectorData=function(M,O,Y){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",M){for(var ue in M.featureIndex&&(this.latestFeatureIndex=M.featureIndex,M.rawTileData?(this.latestRawTileData=M.rawTileData,this.latestFeatureIndex.rawTileData=M.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=M.collisionBoxArray,this.buckets=function(yt,_t){var Pt={};if(!_t)return Pt;for(var Nt=function(){var rn=Qt[Dt],wn=rn.layerIds.map(function(Nn){return _t.getLayer(Nn)}).filter(Boolean);if(wn.length!==0){rn.layers=wn,rn.stateDependentLayerIds&&(rn.stateDependentLayers=rn.stateDependentLayerIds.map(function(Nn){return wn.filter(function(qn){return qn.id===Nn})[0]}));for(var _n=0,Ln=wn;_n<Ln.length;_n+=1){var On=Ln[_n];Pt[On.id]=rn}}},Dt=0,Qt=yt;Dt<Qt.length;Dt+=1)Nt();return Pt}(M.buckets,O.style),this.hasSymbolBuckets=!1,this.buckets){var Se=this.buckets[ue];if(Se instanceof ri){if(this.hasSymbolBuckets=!0,!Y)break;Se.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Pe in this.buckets){var Ne=this.buckets[Pe];if(Ne instanceof ri&&Ne.hasRTLText){this.hasRTLText=!0,_i.isLoading()||_i.isLoaded()||Xa()!=="deferred"||Js();break}}for(var Je in this.queryPadding=0,this.buckets){var it=this.buckets[Je];this.queryPadding=Math.max(this.queryPadding,O.style.getLayer(Je).queryRadius(it))}M.imageAtlas&&(this.imageAtlas=M.imageAtlas),M.glyphAtlasImage&&(this.glyphAtlasImage=M.glyphAtlasImage)}else this.collisionBoxArray=new ht},la.prototype.unloadVectorData=function(){for(var M in this.buckets)this.buckets[M].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},la.prototype.getBucket=function(M){return this.buckets[M.id]},la.prototype.upload=function(M){for(var O in this.buckets){var Y=this.buckets[O];Y.uploadPending()&&Y.upload(M)}var ue=M.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new _l(M,this.imageAtlas.image,ue.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new _l(M,this.glyphAtlasImage,ue.ALPHA),this.glyphAtlasImage=null)},la.prototype.prepare=function(M){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(M,this.imageAtlasTexture)},la.prototype.queryRenderedFeatures=function(M,O,Y,ue,Se,Pe,Ne,Je,it,yt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ue,cameraQueryGeometry:Se,scale:Pe,tileSize:this.tileSize,pixelPosMatrix:yt,transform:Je,params:Ne,queryPadding:this.queryPadding*it},M,O,Y):{}},la.prototype.querySourceFeatures=function(M,O){var Y=this.latestFeatureIndex;if(Y&&Y.rawTileData){var ue=Y.loadVTLayers(),Se=O?O.sourceLayer:"",Pe=ue._geojsonTileLayer||ue[Se];if(Pe)for(var Ne=rs(O&&O.filter),Je=this.tileID.canonical,it=Je.z,yt=Je.x,_t=Je.y,Pt={z:it,x:yt,y:_t},Nt=0;Nt<Pe.length;Nt++){var Dt=Pe.feature(Nt);if(Ne.filter(new Xr(this.tileID.overscaledZ),Dt)){var Qt=Y.getId(Dt,Se),rn=new Qu(Dt,it,yt,_t,Qt);rn.tile=Pt,M.push(rn)}}}},la.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},la.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},la.prototype.setExpiryData=function(M){var O=this.expirationTime;if(M.cacheControl){var Y=C(M.cacheControl);Y["max-age"]&&(this.expirationTime=Date.now()+1e3*Y["max-age"])}else M.expires&&(this.expirationTime=new Date(M.expires).getTime());if(this.expirationTime){var ue=Date.now(),Se=!1;if(this.expirationTime>ue)Se=!1;else if(O)if(this.expirationTime<O)Se=!0;else{var Pe=this.expirationTime-O;Pe?this.expirationTime=ue+Math.max(Pe,3e4):Se=!0}else Se=!0;Se?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},la.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},la.prototype.setFeatureState=function(M,O){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(M).length!==0){var Y=this.latestFeatureIndex.loadVTLayers();for(var ue in this.buckets)if(O.style.hasLayer(ue)){var Se=this.buckets[ue],Pe=Se.layers[0].sourceLayer||"_geojsonTileLayer",Ne=Y[Pe],Je=M[Pe];if(Ne&&Je&&Object.keys(Je).length!==0){Se.update(Je,Ne,this.imageAtlas&&this.imageAtlas.patternPositions||{});var it=O&&O.style&&O.style.getLayer(ue);it&&(this.queryPadding=Math.max(this.queryPadding,it.queryRadius(Se)))}}}},la.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},la.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<$.now()},la.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},la.prototype.setHoldDuration=function(M){this.symbolFadeHoldUntil=$.now()+M},la.prototype.setDependencies=function(M,O){for(var Y={},ue=0,Se=O;ue<Se.length;ue+=1)Y[Se[ue]]=!0;this.dependencies[M]=Y},la.prototype.hasDependency=function(M,O){for(var Y=0,ue=M;Y<ue.length;Y+=1){var Se=ue[Y],Pe=this.dependencies[Se];if(Pe){for(var Ne=0,Je=O;Ne<Je.length;Ne+=1)if(Pe[Je[Ne]])return!0}}return!1};var vl=self.performance,hh=function(M){this._marks={start:[M.url,"start"].join("#"),end:[M.url,"end"].join("#"),measure:M.url.toString()},vl.mark(this._marks.start)};hh.prototype.finish=function(){vl.mark(this._marks.end);var M=vl.getEntriesByName(this._marks.measure);return M.length===0&&(vl.measure(this._marks.measure,this._marks.start,this._marks.end),M=vl.getEntriesByName(this._marks.measure),vl.clearMarks(this._marks.start),vl.clearMarks(this._marks.end),vl.clearMeasures(this._marks.measure)),M},l.Actor=Gl,l.AlphaImage=bl,l.CanonicalTileID=Tl,l.CollisionBoxArray=ht,l.Color=hn,l.DEMData=$s,l.DataConstantProperty=Tr,l.DictionaryCoder=$u,l.EXTENT=Wr,l.ErrorEvent=nt,l.EvaluationParameters=Xr,l.Event=We,l.Evented=ot,l.FeatureIndex=Qs,l.FillBucket=Ts,l.FillExtrusionBucket=ks,l.ImageAtlas=hu,l.ImagePosition=Hu,l.LineBucket=Qa,l.LngLat=Ti,l.LngLatBounds=ea,l.MercatorCoordinate=wl,l.ONE_EM=va,l.OverscaledTileID=ta,l.Point=e,l.Point$1=e,l.Properties=Wi,l.Protobuf=Uu,l.RGBAImage=$a,l.RequestManager=oe,l.RequestPerformance=hh,l.ResourceType=gt,l.SegmentVector=vn,l.SourceFeatureState=Zl,l.StructArrayLayout1ui2=qe,l.StructArrayLayout2f1f2i16=Me,l.StructArrayLayout2i4=da,l.StructArrayLayout3ui6=K,l.StructArrayLayout4i8=Ko,l.SymbolBucket=ri,l.Texture=_l,l.Tile=la,l.Transitionable=Na,l.Uniform1f=Ir,l.Uniform1i=Mr,l.Uniform2f=Br,l.Uniform3f=Zr,l.Uniform4f=oi,l.UniformColor=si,l.UniformMatrix4f=wi,l.UnwrappedTileID=uh,l.ValidationError=ze,l.WritingMode=Do,l.ZoomHistory=co,l.add=function(M,O,Y){return M[0]=O[0]+Y[0],M[1]=O[1]+Y[1],M[2]=O[2]+Y[2],M},l.addDynamicAttributes=Rc,l.asyncAll=function(M,O,Y){if(!M.length)return Y(null,[]);var ue=M.length,Se=new Array(M.length),Pe=null;M.forEach(function(Ne,Je){O(Ne,function(it,yt){it&&(Pe=it),Se[Je]=yt,--ue==0&&Y(Pe,Se)})})},l.bezier=r,l.bindAll=f,l.browser=$,l.cacheEntryPossiblyAdded=function(M){++st>_e&&(M.getActor().send("enforceCacheSizeLimit",ke),st=0)},l.clamp=a,l.clearTileCache=function(M){var O=self.caches.delete(he);M&&O.catch(M).then(function(){return M()})},l.clipLine=Zf,l.clone=function(M){var O=new Io(16);return O[0]=M[0],O[1]=M[1],O[2]=M[2],O[3]=M[3],O[4]=M[4],O[5]=M[5],O[6]=M[6],O[7]=M[7],O[8]=M[8],O[9]=M[9],O[10]=M[10],O[11]=M[11],O[12]=M[12],O[13]=M[13],O[14]=M[14],O[15]=M[15],O},l.clone$1=_,l.clone$2=function(M){var O=new Io(3);return O[0]=M[0],O[1]=M[1],O[2]=M[2],O},l.collisionCircleLayout=Ep,l.config=W,l.create=function(){var M=new Io(16);return Io!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=0,M[12]=0,M[13]=0,M[14]=0),M[0]=1,M[5]=1,M[10]=1,M[15]=1,M},l.create$1=function(){var M=new Io(9);return Io!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[5]=0,M[6]=0,M[7]=0),M[0]=1,M[4]=1,M[8]=1,M},l.create$2=function(){var M=new Io(4);return Io!=Float32Array&&(M[1]=0,M[2]=0),M[0]=1,M[3]=1,M},l.createCommonjsModule=T,l.createExpression=vs,l.createLayout=zi,l.createStyleLayer=function(M){return M.type==="custom"?new od(M):new sd[M.type](M)},l.cross=function(M,O,Y){var ue=O[0],Se=O[1],Pe=O[2],Ne=Y[0],Je=Y[1],it=Y[2];return M[0]=Se*it-Pe*Je,M[1]=Pe*Ne-ue*it,M[2]=ue*Je-Se*Ne,M},l.deepEqual=function M(O,Y){if(Array.isArray(O)){if(!Array.isArray(Y)||O.length!==Y.length)return!1;for(var ue=0;ue<O.length;ue++)if(!M(O[ue],Y[ue]))return!1;return!0}if(typeof O=="object"&&O!==null&&Y!==null){if(typeof Y!="object"||Object.keys(O).length!==Object.keys(Y).length)return!1;for(var Se in O)if(!M(O[Se],Y[Se]))return!1;return!0}return O===Y},l.dot=function(M,O){return M[0]*O[0]+M[1]*O[1]+M[2]*O[2]},l.dot$1=function(M,O){return M[0]*O[0]+M[1]*O[1]+M[2]*O[2]+M[3]*O[3]},l.ease=n,l.emitValidationErrors=Ra,l.endsWith=y,l.enforceCacheSizeLimit=function(M){Fe(),se&&se.then(function(O){O.keys().then(function(Y){for(var ue=0;ue<Y.length-M;ue++)O.delete(Y[ue])})})},l.evaluateSizeForFeature=Nf,l.evaluateSizeForZoom=jf,l.evaluateVariableOffset=Xf,l.evented=Di,l.extend=u,l.featureFilter=rs,l.filterObject=m,l.fromRotation=function(M,O){var Y=Math.sin(O),ue=Math.cos(O);return M[0]=ue,M[1]=Y,M[2]=0,M[3]=-Y,M[4]=ue,M[5]=0,M[6]=0,M[7]=0,M[8]=1,M},l.getAnchorAlignment=Oc,l.getAnchorJustification=zc,l.getArrayBuffer=Tt,l.getImage=Ye,l.getJSON=function(M,O){return xt(u(M,{type:"json"}),O)},l.getRTLTextPluginStatus=Xa,l.getReferrer=at,l.getVideo=function(M,O){var Y,ue,Se=self.document.createElement("video");Se.muted=!0,Se.onloadstart=function(){O(null,Se)};for(var Pe=0;Pe<M.length;Pe++){var Ne=self.document.createElement("source");Y=M[Pe],ue=void 0,(ue=self.document.createElement("a")).href=Y,ue.protocol===self.document.location.protocol&&ue.host===self.document.location.host||(Se.crossOrigin="Anonymous"),Ne.src=M[Pe],Se.appendChild(Ne)}return{cancel:function(){}}},l.identity=mc,l.invert=function(M,O){var Y=O[0],ue=O[1],Se=O[2],Pe=O[3],Ne=O[4],Je=O[5],it=O[6],yt=O[7],_t=O[8],Pt=O[9],Nt=O[10],Dt=O[11],Qt=O[12],rn=O[13],wn=O[14],_n=O[15],Ln=Y*Je-ue*Ne,On=Y*it-Se*Ne,Nn=Y*yt-Pe*Ne,qn=ue*it-Se*Je,Jn=ue*yt-Pe*Je,hr=Se*yt-Pe*it,sr=_t*rn-Pt*Qt,gr=_t*wn-Nt*Qt,_r=_t*_n-Dt*Qt,Dr=Pt*wn-Nt*rn,kr=Pt*_n-Dt*rn,Or=Nt*_n-Dt*wn,Er=Ln*Or-On*kr+Nn*Dr+qn*_r-Jn*gr+hr*sr;return Er?(Er=1/Er,M[0]=(Je*Or-it*kr+yt*Dr)*Er,M[1]=(Se*kr-ue*Or-Pe*Dr)*Er,M[2]=(rn*hr-wn*Jn+_n*qn)*Er,M[3]=(Nt*Jn-Pt*hr-Dt*qn)*Er,M[4]=(it*_r-Ne*Or-yt*gr)*Er,M[5]=(Y*Or-Se*_r+Pe*gr)*Er,M[6]=(wn*Nn-Qt*hr-_n*On)*Er,M[7]=(_t*hr-Nt*Nn+Dt*On)*Er,M[8]=(Ne*kr-Je*_r+yt*sr)*Er,M[9]=(ue*_r-Y*kr-Pe*sr)*Er,M[10]=(Qt*Jn-rn*Nn+_n*Ln)*Er,M[11]=(Pt*Nn-_t*Jn-Dt*Ln)*Er,M[12]=(Je*gr-Ne*Dr-it*sr)*Er,M[13]=(Y*Dr-ue*gr+Se*sr)*Er,M[14]=(rn*On-Qt*qn-wn*Ln)*Er,M[15]=(_t*qn-Pt*On+Nt*Ln)*Er,M):null},l.isChar=vr,l.isMapboxURL=ce,l.keysDifference=function(M,O){var Y=[];for(var ue in M)ue in O||Y.push(ue);return Y},l.makeRequest=xt,l.mapObject=v,l.mercatorXfromLng=oh,l.mercatorYfromLat=sh,l.mercatorZfromAltitude=lh,l.mul=Hh,l.multiply=rf,l.mvt=Dl,l.normalize=function(M,O){var Y=O[0],ue=O[1],Se=O[2],Pe=Y*Y+ue*ue+Se*Se;return Pe>0&&(Pe=1/Math.sqrt(Pe)),M[0]=O[0]*Pe,M[1]=O[1]*Pe,M[2]=O[2]*Pe,M},l.number=Zn,l.offscreenCanvasSupported=Ke,l.ortho=function(M,O,Y,ue,Se,Pe,Ne){var Je=1/(O-Y),it=1/(ue-Se),yt=1/(Pe-Ne);return M[0]=-2*Je,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=-2*it,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=2*yt,M[11]=0,M[12]=(O+Y)*Je,M[13]=(Se+ue)*it,M[14]=(Ne+Pe)*yt,M[15]=1,M},l.parseGlyphPBF=function(M){return new Uu(M).readFields(Np,[])},l.pbf=Uu,l.performSymbolLayout=function(M,O,Y,ue,Se,Pe,Ne){M.createArrays();var Je=512*M.overscaling;M.tilePixelRatio=Wr/Je,M.compareText={},M.iconsNeedLinear=!1;var it=M.layers[0].layout,yt=M.layers[0]._unevaluatedLayout._values,_t={};if(M.textSizeData.kind==="composite"){var Pt=M.textSizeData,Nt=Pt.minZoom,Dt=Pt.maxZoom;_t.compositeTextSizes=[yt["text-size"].possiblyEvaluate(new Xr(Nt),Ne),yt["text-size"].possiblyEvaluate(new Xr(Dt),Ne)]}if(M.iconSizeData.kind==="composite"){var Qt=M.iconSizeData,rn=Qt.minZoom,wn=Qt.maxZoom;_t.compositeIconSizes=[yt["icon-size"].possiblyEvaluate(new Xr(rn),Ne),yt["icon-size"].possiblyEvaluate(new Xr(wn),Ne)]}_t.layoutTextSize=yt["text-size"].possiblyEvaluate(new Xr(M.zoom+1),Ne),_t.layoutIconSize=yt["icon-size"].possiblyEvaluate(new Xr(M.zoom+1),Ne),_t.textMaxSize=yt["text-size"].possiblyEvaluate(new Xr(18));for(var _n=it.get("text-line-height")*va,Ln=it.get("text-rotation-alignment")==="map"&&it.get("symbol-placement")!=="point",On=it.get("text-keep-upright"),Nn=it.get("text-size"),qn=function(){var sr=hr[Jn],gr=it.get("text-font").evaluate(sr,{},Ne).join(","),_r=Nn.evaluate(sr,{},Ne),Dr=_t.layoutTextSize.evaluate(sr,{},Ne),kr=_t.layoutIconSize.evaluate(sr,{},Ne),Or={horizontal:{},vertical:void 0},Er=sr.text,wr=[0,0];if(Er){var jr=Er.toString(),zr=it.get("text-letter-spacing").evaluate(sr,{},Ne)*va,hi=function(Rr){for(var qr=0,Fi=Rr;qr<Fi.length;qr+=1)if(ui=Fi[qr].charCodeAt(0),vr.Arabic(ui)||vr["Arabic Supplement"](ui)||vr["Arabic Extended-A"](ui)||vr["Arabic Presentation Forms-A"](ui)||vr["Arabic Presentation Forms-B"](ui))return!1;var ui;return!0}(jr)?zr:0,Pr=it.get("text-anchor").evaluate(sr,{},Ne),ii=it.get("text-variable-anchor");if(!ii){var vi=it.get("text-radial-offset").evaluate(sr,{},Ne);wr=vi?Xf(Pr,[vi*va,Dc]):it.get("text-offset").evaluate(sr,{},Ne).map(function(Rr){return Rr*va})}var yi=Ln?"center":it.get("text-justify").evaluate(sr,{},Ne),xi=it.get("symbol-placement"),pi=xi==="point"?it.get("text-max-width").evaluate(sr,{},Ne)*va:0,na=function(){M.allowVerticalPlacement&&Fa(jr)&&(Or.vertical=qu(Er,O,Y,Se,gr,pi,_n,Pr,"left",hi,wr,Do.vertical,!0,xi,Dr,_r))};if(!Ln&&ii){for(var Mi=yi==="auto"?ii.map(function(Rr){return zc(Rr)}):[yi],ua=!1,ka=0;ka<Mi.length;ka++){var ma=Mi[ka];if(!Or.horizontal[ma])if(ua)Or.horizontal[ma]=Or.horizontal[0];else{var Ua=qu(Er,O,Y,Se,gr,pi,_n,"center",ma,hi,wr,Do.horizontal,!1,xi,Dr,_r);Ua&&(Or.horizontal[ma]=Ua,ua=Ua.positionedLines.length===1)}}na()}else{yi==="auto"&&(yi=zc(Pr));var ya=qu(Er,O,Y,Se,gr,pi,_n,Pr,yi,hi,wr,Do.horizontal,!1,xi,Dr,_r);ya&&(Or.horizontal[yi]=ya),na(),Fa(jr)&&Ln&&On&&(Or.vertical=qu(Er,O,Y,Se,gr,pi,_n,Pr,yi,hi,wr,Do.vertical,!1,xi,Dr,_r))}}var aa=void 0,xa=!1;if(sr.icon&&sr.icon.name){var ca=ue[sr.icon.name];ca&&(aa=function(Rr,qr,Fi){var ui=Oc(Fi),Ci=ui.horizontalAlign,ki=ui.verticalAlign,Jr=qr[0],Bi=qr[1],Va=Jr-Rr.displaySize[0]*Ci,vo=Va+Rr.displaySize[0],Oa=Bi-Rr.displaySize[1]*ki;return{image:Rr,top:Oa,bottom:Oa+Rr.displaySize[1],left:Va,right:vo}}(Se[sr.icon.name],it.get("icon-offset").evaluate(sr,{},Ne),it.get("icon-anchor").evaluate(sr,{},Ne)),xa=ca.sdf,M.sdfIcons===void 0?M.sdfIcons=ca.sdf:M.sdfIcons!==ca.sdf&&A("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ca.pixelRatio!==M.pixelRatio||it.get("icon-rotate").constantOr(1)!==0)&&(M.iconsNeedLinear=!0))}var oa=Kf(Or.horizontal)||Or.vertical;M.iconsInText=!!oa&&oa.iconsInText,(oa||aa)&&function(Rr,qr,Fi,ui,Ci,ki,Jr,Bi,Va,vo,Oa){var Ms=ki.textMaxSize.evaluate(qr,{});Ms===void 0&&(Ms=Jr);var el,fa=Rr.layers[0].layout,Ss=fa.get("icon-offset").evaluate(qr,{},Oa),cs=Kf(Fi.horizontal),fs=24,kl=Jr/fs,ec=Rr.tilePixelRatio*kl,Al=Rr.tilePixelRatio*Ms/fs,tc=Rr.tilePixelRatio*Bi,mu=Rr.tilePixelRatio*fa.get("symbol-spacing"),Uc=fa.get("text-padding")*Rr.tilePixelRatio,nc=fa.get("icon-padding")*Rr.tilePixelRatio,Yl=fa.get("text-max-angle")/180*Math.PI,rc=fa.get("text-rotation-alignment")==="map"&&fa.get("symbol-placement")!=="point",ic=fa.get("icon-rotation-alignment")==="map"&&fa.get("symbol-placement")!=="point",yu=fa.get("symbol-placement"),Vc=mu/2,xu=fa.get("icon-text-fit");ui&&xu!=="none"&&(Rr.allowVerticalPlacement&&Fi.vertical&&(el=Bf(ui,Fi.vertical,xu,fa.get("icon-text-fit-padding"),Ss,kl)),cs&&(ui=Bf(ui,cs,xu,fa.get("icon-text-fit-padding"),Ss,kl)));var Ml=function(ud,Au){Au.x<0||Au.x>=Wr||Au.y<0||Au.y>=Wr||function(Gi,Es,cd,ml,Wc,mh,uc,Ns,cc,Mu,fc,hc,Xc,yh,Su,xh,bh,_h,wh,Th,zo,pc,kh,js,fd){var Ah,Ll,Jl,Kl,$l,Ql=Gi.addToLineVertexArray(Es,cd),Mh=0,Sh=0,Eh=0,Lh=0,Jc=-1,Kc=-1,tl={},Ch=or(""),$c=0,Qc=0;if(Ns._unevaluatedLayout.getValue("text-radial-offset")===void 0?($c=(Ah=Ns.layout.get("text-offset").evaluate(zo,{},js).map(function(Lu){return Lu*va}))[0],Qc=Ah[1]):($c=Ns.layout.get("text-radial-offset").evaluate(zo,{},js)*va,Qc=Dc),Gi.allowVerticalPlacement&&ml.vertical){var Ph=Ns.layout.get("text-rotate").evaluate(zo,{},js)+90,hd=ml.vertical;Kl=new Xu(cc,Es,Mu,fc,hc,hd,Xc,yh,Su,Ph),uc&&($l=new Xu(cc,Es,Mu,fc,hc,uc,bh,_h,Su,Ph))}if(Wc){var ef=Ns.layout.get("icon-rotate").evaluate(zo,{}),Oh=Ns.layout.get("icon-text-fit")!=="none",Ih=Yf(Wc,ef,kh,Oh),tf=uc?Yf(uc,ef,kh,Oh):void 0;Jl=new Xu(cc,Es,Mu,fc,hc,Wc,bh,_h,!1,ef),Mh=4*Ih.length;var Dh=Gi.iconSizeData,Eu=null;Dh.kind==="source"?(Eu=[As*Ns.layout.get("icon-size").evaluate(zo,{})])[0]>dl&&A(Gi.layerIds[0]+': Value for "icon-size" is >= '+du+'. Reduce your "icon-size".'):Dh.kind==="composite"&&((Eu=[As*pc.compositeIconSizes[0].evaluate(zo,{},js),As*pc.compositeIconSizes[1].evaluate(zo,{},js)])[0]>dl||Eu[1]>dl)&&A(Gi.layerIds[0]+': Value for "icon-size" is >= '+du+'. Reduce your "icon-size".'),Gi.addSymbols(Gi.icon,Ih,Eu,Th,wh,zo,!1,Es,Ql.lineStartIndex,Ql.lineLength,-1,js),Jc=Gi.icon.placedSymbolArray.length-1,tf&&(Sh=4*tf.length,Gi.addSymbols(Gi.icon,tf,Eu,Th,wh,zo,Do.vertical,Es,Ql.lineStartIndex,Ql.lineLength,-1,js),Kc=Gi.icon.placedSymbolArray.length-1)}for(var zh in ml.horizontal){var dc=ml.horizontal[zh];if(!Ll){Ch=or(dc.text);var pd=Ns.layout.get("text-rotate").evaluate(zo,{},js);Ll=new Xu(cc,Es,Mu,fc,hc,dc,Xc,yh,Su,pd)}var Rh=dc.positionedLines.length===1;if(Eh+=Jf(Gi,Es,dc,mh,Ns,Su,zo,xh,Ql,ml.vertical?Do.horizontal:Do.horizontalOnly,Rh?Object.keys(ml.horizontal):[zh],tl,Jc,pc,js),Rh)break}ml.vertical&&(Lh+=Jf(Gi,Es,ml.vertical,mh,Ns,Su,zo,xh,Ql,Do.vertical,["vertical"],tl,Kc,pc,js));var dd=Ll?Ll.boxStartIndex:Gi.collisionBoxArray.length,gd=Ll?Ll.boxEndIndex:Gi.collisionBoxArray.length,vd=Kl?Kl.boxStartIndex:Gi.collisionBoxArray.length,md=Kl?Kl.boxEndIndex:Gi.collisionBoxArray.length,yd=Jl?Jl.boxStartIndex:Gi.collisionBoxArray.length,xd=Jl?Jl.boxEndIndex:Gi.collisionBoxArray.length,bd=$l?$l.boxStartIndex:Gi.collisionBoxArray.length,_d=$l?$l.boxEndIndex:Gi.collisionBoxArray.length,Us=-1,gc=function(Lu,Bh){return Lu&&Lu.circleDiameter?Math.max(Lu.circleDiameter,Bh):Bh};Us=gc(Ll,Us),Us=gc(Kl,Us),Us=gc(Jl,Us);var Fh=(Us=gc($l,Us))>-1?1:0;Fh&&(Us*=fd/va),Gi.glyphOffsetArray.length>=ri.MAX_GLYPHS&&A("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),zo.sortKey!==void 0&&Gi.addToSortKeyRanges(Gi.symbolInstances.length,zo.sortKey),Gi.symbolInstances.emplaceBack(Es.x,Es.y,tl.right>=0?tl.right:-1,tl.center>=0?tl.center:-1,tl.left>=0?tl.left:-1,tl.vertical||-1,Jc,Kc,Ch,dd,gd,vd,md,yd,xd,bd,_d,Mu,Eh,Lh,Mh,Sh,Fh,0,Xc,$c,Qc,Us)}(Rr,Au,ud,Fi,ui,Ci,el,Rr.layers[0],Rr.collisionBoxArray,qr.index,qr.sourceLayerIndex,Rr.index,ec,Uc,rc,Va,tc,nc,ic,Ss,qr,ki,vo,Oa,Jr)};if(yu==="line")for(var Wl=0,ac=Zf(qr.geometry,0,0,Wr,Wr);Wl<ac.length;Wl+=1)for(var oc=ac[Wl],Xl=0,sc=Zp(oc,mu,Yl,Fi.vertical||cs,ui,fs,Al,Rr.overscaling,Wr);Xl<sc.length;Xl+=1){var lc=sc[Xl];cs&&Jp(Rr,cs.text,Vc,lc)||Ml(oc,lc)}else if(yu==="line-center")for(var bu=0,_u=qr.geometry;bu<_u.length;bu+=1){var Sl=_u[bu];if(Sl.length>1){var wu=Gp(Sl,Yl,Fi.vertical||cs,ui,fs,Al);wu&&Ml(Sl,wu)}}else if(qr.type==="Polygon")for(var El=0,Tu=kc(qr.geometry,0);El<Tu.length;El+=1){var ku=Tu[El],ph=Wp(ku,16);Ml(ku[0],new Bl(ph.x,ph.y,0))}else if(qr.type==="LineString")for(var Hc=0,dh=qr.geometry;Hc<dh.length;Hc+=1){var qc=dh[Hc];Ml(qc,new Bl(qc[0].x,qc[0].y,0))}else if(qr.type==="Point")for(var Gc=0,gh=qr.geometry;Gc<gh.length;Gc+=1)for(var Zc=0,vh=gh[Gc];Zc<vh.length;Zc+=1){var Yc=vh[Zc];Ml([Yc],new Bl(Yc.x,Yc.y,0))}}(M,sr,Or,aa,ue,_t,Dr,kr,wr,xa,Ne)},Jn=0,hr=M.features;Jn<hr.length;Jn+=1)qn();Pe&&M.generateCollisionDebugBuffers()},l.perspective=function(M,O,Y,ue,Se){var Pe,Ne=1/Math.tan(O/2);return M[0]=Ne/Y,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=Ne,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=-1,M[12]=0,M[13]=0,M[15]=0,Se!=null&&Se!==1/0?(Pe=1/(ue-Se),M[10]=(Se+ue)*Pe,M[14]=2*Se*ue*Pe):(M[10]=-1,M[14]=-2*ue),M},l.pick=function(M,O){for(var Y={},ue=0;ue<O.length;ue++){var Se=O[ue];Se in M&&(Y[Se]=M[Se])}return Y},l.plugin=_i,l.polygonIntersectsPolygon=ja,l.postMapLoadEvent=Ue,l.postTurnstileEvent=be,l.potpack=If,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=xr,l.registerForPluginStateChange=function(M){return M({pluginStatus:Vi,pluginURL:ei}),Di.on("pluginStateChange",M),M},l.rotate=function(M,O,Y){var ue=O[0],Se=O[1],Pe=O[2],Ne=O[3],Je=Math.sin(Y),it=Math.cos(Y);return M[0]=ue*it+Pe*Je,M[1]=Se*it+Ne*Je,M[2]=ue*-Je+Pe*it,M[3]=Se*-Je+Ne*it,M},l.rotateX=function(M,O,Y){var ue=Math.sin(Y),Se=Math.cos(Y),Pe=O[4],Ne=O[5],Je=O[6],it=O[7],yt=O[8],_t=O[9],Pt=O[10],Nt=O[11];return O!==M&&(M[0]=O[0],M[1]=O[1],M[2]=O[2],M[3]=O[3],M[12]=O[12],M[13]=O[13],M[14]=O[14],M[15]=O[15]),M[4]=Pe*Se+yt*ue,M[5]=Ne*Se+_t*ue,M[6]=Je*Se+Pt*ue,M[7]=it*Se+Nt*ue,M[8]=yt*Se-Pe*ue,M[9]=_t*Se-Ne*ue,M[10]=Pt*Se-Je*ue,M[11]=Nt*Se-it*ue,M},l.rotateZ=function(M,O,Y){var ue=Math.sin(Y),Se=Math.cos(Y),Pe=O[0],Ne=O[1],Je=O[2],it=O[3],yt=O[4],_t=O[5],Pt=O[6],Nt=O[7];return O!==M&&(M[8]=O[8],M[9]=O[9],M[10]=O[10],M[11]=O[11],M[12]=O[12],M[13]=O[13],M[14]=O[14],M[15]=O[15]),M[0]=Pe*Se+yt*ue,M[1]=Ne*Se+_t*ue,M[2]=Je*Se+Pt*ue,M[3]=it*Se+Nt*ue,M[4]=yt*Se-Pe*ue,M[5]=_t*Se-Ne*ue,M[6]=Pt*Se-Je*ue,M[7]=Nt*Se-it*ue,M},l.scale=function(M,O,Y){var ue=Y[0],Se=Y[1],Pe=Y[2];return M[0]=O[0]*ue,M[1]=O[1]*ue,M[2]=O[2]*ue,M[3]=O[3]*ue,M[4]=O[4]*Se,M[5]=O[5]*Se,M[6]=O[6]*Se,M[7]=O[7]*Se,M[8]=O[8]*Pe,M[9]=O[9]*Pe,M[10]=O[10]*Pe,M[11]=O[11]*Pe,M[12]=O[12],M[13]=O[13],M[14]=O[14],M[15]=O[15],M},l.scale$1=function(M,O,Y){return M[0]=O[0]*Y,M[1]=O[1]*Y,M[2]=O[2]*Y,M[3]=O[3]*Y,M},l.scale$2=function(M,O,Y){return M[0]=O[0]*Y,M[1]=O[1]*Y,M[2]=O[2]*Y,M},l.setCacheLimits=function(M,O){ke=M,_e=O},l.setRTLTextPlugin=function(M,O,Y){if(Y===void 0&&(Y=!1),Vi===Wa||Vi===fo||Vi===Ii)throw new Error("setRTLTextPlugin cannot be called multiple times.");ei=$.resolveURL(M),Vi=Wa,os=O,pa(),Y||Js()},l.sphericalToCartesian=function(M){var O=M[0],Y=M[1],ue=M[2];return Y+=90,Y*=Math.PI/180,ue*=Math.PI/180,{x:O*Math.cos(Y)*Math.sin(ue),y:O*Math.sin(Y)*Math.sin(ue),z:O*Math.cos(ue)}},l.sqrLen=Gh,l.styleSpec=Ie,l.sub=qh,l.symbolSize=qp,l.transformMat3=function(M,O,Y){var ue=O[0],Se=O[1],Pe=O[2];return M[0]=ue*Y[0]+Se*Y[3]+Pe*Y[6],M[1]=ue*Y[1]+Se*Y[4]+Pe*Y[7],M[2]=ue*Y[2]+Se*Y[5]+Pe*Y[8],M},l.transformMat4=Ru,l.translate=function(M,O,Y){var ue,Se,Pe,Ne,Je,it,yt,_t,Pt,Nt,Dt,Qt,rn=Y[0],wn=Y[1],_n=Y[2];return O===M?(M[12]=O[0]*rn+O[4]*wn+O[8]*_n+O[12],M[13]=O[1]*rn+O[5]*wn+O[9]*_n+O[13],M[14]=O[2]*rn+O[6]*wn+O[10]*_n+O[14],M[15]=O[3]*rn+O[7]*wn+O[11]*_n+O[15]):(ue=O[0],Se=O[1],Pe=O[2],Ne=O[3],Je=O[4],it=O[5],yt=O[6],_t=O[7],Pt=O[8],Nt=O[9],Dt=O[10],Qt=O[11],M[0]=ue,M[1]=Se,M[2]=Pe,M[3]=Ne,M[4]=Je,M[5]=it,M[6]=yt,M[7]=_t,M[8]=Pt,M[9]=Nt,M[10]=Dt,M[11]=Qt,M[12]=ue*rn+Je*wn+Pt*_n+O[12],M[13]=Se*rn+it*wn+Nt*_n+O[13],M[14]=Pe*rn+yt*wn+Dt*_n+O[14],M[15]=Ne*rn+_t*wn+Qt*_n+O[15]),M},l.triggerPluginCompletionEvent=ws,l.uniqueId=c,l.validateCustomStyleLayer=function(M){var O=[],Y=M.id;return Y===void 0&&O.push({message:"layers."+Y+': missing required property "id"'}),M.render===void 0&&O.push({message:"layers."+Y+': missing required method "render"'}),M.renderingMode&&M.renderingMode!=="2d"&&M.renderingMode!=="3d"&&O.push({message:"layers."+Y+': property "renderingMode" must be either "2d" or "3d"'}),O},l.validateLight=Oi,l.validateStyle=Zi,l.values=function(M){var O=[];for(var Y in M)O.push(M[Y]);return O},l.vectorTile=Dl,l.version=b,l.warnOnce=A,l.webpSupported=Z,l.window=self,l.wrap=o}),k(0,function(l){function T(Ye){var Xe=typeof Ye;if(Xe==="number"||Xe==="boolean"||Xe==="string"||Ye==null)return JSON.stringify(Ye);if(Array.isArray(Ye)){for(var Ve="[",We=0,nt=Ye;We<nt.length;We+=1)Ve+=T(nt[We])+",";return Ve+"]"}for(var ot=Object.keys(Ye).sort(),Ie="{",ze=0;ze<ot.length;ze++)Ie+=JSON.stringify(ot[ze])+":"+T(Ye[ot[ze]])+",";return Ie+"}"}function b(Ye){for(var Xe="",Ve=0,We=l.refProperties;Ve<We.length;Ve+=1)Xe+="/"+T(Ye[We[Ve]]);return Xe}var d=function(Ye){this.keyCache={},Ye&&this.replace(Ye)};d.prototype.replace=function(Ye){this._layerConfigs={},this._layers={},this.update(Ye,[])},d.prototype.update=function(Ye,Xe){for(var Ve=this,We=0,nt=Ye;We<nt.length;We+=1){var ot=nt[We];this._layerConfigs[ot.id]=ot;var Ie=this._layers[ot.id]=l.createStyleLayer(ot);Ie._featureFilter=l.featureFilter(Ie.filter),this.keyCache[ot.id]&&delete this.keyCache[ot.id]}for(var ze=0,et=Xe;ze<et.length;ze+=1){var tt=et[ze];delete this.keyCache[tt],delete this._layerConfigs[tt],delete this._layers[tt]}this.familiesBySource={};for(var dt=0,pt=function(It,zt){for(var Rt={},Jt=0;Jt<It.length;Jt++){var qt=zt&&zt[It[Jt].id]||b(It[Jt]);zt&&(zt[It[Jt].id]=qt);var Wt=Rt[qt];Wt||(Wt=Rt[qt]=[]),Wt.push(It[Jt])}var jt=[];for(var fn in Rt)jt.push(Rt[fn]);return jt}(l.values(this._layerConfigs),this.keyCache);dt<pt.length;dt+=1){var vt=pt[dt].map(function(It){return Ve._layers[It.id]}),ct=vt[0];if(ct.visibility!=="none"){var kt=ct.source||"",ut=this.familiesBySource[kt];ut||(ut=this.familiesBySource[kt]={});var ft=ct.sourceLayer||"_geojsonTileLayer",bt=ut[ft];bt||(bt=ut[ft]=[]),bt.push(vt)}}};var s=function(Ye){var Xe={},Ve=[];for(var We in Ye){var nt=Ye[We],ot=Xe[We]={};for(var Ie in nt){var ze=nt[+Ie];if(ze&&ze.bitmap.width!==0&&ze.bitmap.height!==0){var et={x:0,y:0,w:ze.bitmap.width+2,h:ze.bitmap.height+2};Ve.push(et),ot[Ie]={rect:et,metrics:ze.metrics}}}}var tt=l.potpack(Ve),dt=tt.w,pt=tt.h,vt=new l.AlphaImage({width:dt||1,height:pt||1});for(var ct in Ye){var kt=Ye[ct];for(var ut in kt){var ft=kt[+ut];if(ft&&ft.bitmap.width!==0&&ft.bitmap.height!==0){var bt=Xe[ct][ut].rect;l.AlphaImage.copy(ft.bitmap,vt,{x:0,y:0},{x:bt.x+1,y:bt.y+1},ft.bitmap)}}}this.image=vt,this.positions=Xe};l.register("GlyphAtlas",s);var e=function(Ye){this.tileID=new l.OverscaledTileID(Ye.tileID.overscaledZ,Ye.tileID.wrap,Ye.tileID.canonical.z,Ye.tileID.canonical.x,Ye.tileID.canonical.y),this.uid=Ye.uid,this.zoom=Ye.zoom,this.pixelRatio=Ye.pixelRatio,this.tileSize=Ye.tileSize,this.source=Ye.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ye.showCollisionBoxes,this.collectResourceTiming=!!Ye.collectResourceTiming,this.returnDependencies=!!Ye.returnDependencies,this.promoteId=Ye.promoteId};function i(Ye,Xe,Ve){for(var We=new l.EvaluationParameters(Xe),nt=0,ot=Ye;nt<ot.length;nt+=1)ot[nt].recalculate(We,Ve)}function r(Ye,Xe){var Ve=l.getArrayBuffer(Ye.request,function(We,nt,ot,Ie){We?Xe(We):nt&&Xe(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(nt)),rawData:nt,cacheControl:ot,expires:Ie})});return function(){Ve.cancel(),Xe()}}e.prototype.parse=function(Ye,Xe,Ve,We,nt){var ot=this;this.status="parsing",this.data=Ye,this.collisionBoxArray=new l.CollisionBoxArray;var Ie=new l.DictionaryCoder(Object.keys(Ye.layers).sort()),ze=new l.FeatureIndex(this.tileID,this.promoteId);ze.bucketLayerIDs=[];var et,tt,dt,pt,vt={},ct={featureIndex:ze,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ve},kt=Xe.familiesBySource[this.source];for(var ut in kt){var ft=Ye.layers[ut];if(ft){ft.version===1&&l.warnOnce('Vector tile source "'+this.source+'" layer "'+ut+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var bt=Ie.encode(ut),It=[],zt=0;zt<ft.length;zt++){var Rt=ft.feature(zt),Jt=ze.getId(Rt,ut);It.push({feature:Rt,id:Jt,index:zt,sourceLayerIndex:bt})}for(var qt=0,Wt=kt[ut];qt<Wt.length;qt+=1){var jt=Wt[qt],fn=jt[0];fn.minzoom&&this.zoom<Math.floor(fn.minzoom)||fn.maxzoom&&this.zoom>=fn.maxzoom||fn.visibility!=="none"&&(i(jt,this.zoom,Ve),(vt[fn.id]=fn.createBucket({index:ze.bucketLayerIDs.length,layers:jt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:bt,sourceID:this.source})).populate(It,ct,this.tileID.canonical),ze.bucketLayerIDs.push(jt.map(function(Kt){return Kt.id})))}}}var xn=l.mapObject(ct.glyphDependencies,function(Kt){return Object.keys(Kt).map(Number)});Object.keys(xn).length?We.send("getGlyphs",{uid:this.uid,stacks:xn},function(Kt,on){et||(et=Kt,tt=on,nn.call(ot))}):tt={};var un=Object.keys(ct.iconDependencies);un.length?We.send("getImages",{icons:un,source:this.source,tileID:this.tileID,type:"icons"},function(Kt,on){et||(et=Kt,dt=on,nn.call(ot))}):dt={};var Ht=Object.keys(ct.patternDependencies);function nn(){if(et)return nt(et);if(tt&&dt&&pt){var Kt=new s(tt),on=new l.ImageAtlas(dt,pt);for(var hn in vt){var dn=vt[hn];dn instanceof l.SymbolBucket?(i(dn.layers,this.zoom,Ve),l.performSymbolLayout(dn,tt,Kt.positions,dt,on.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):dn.hasPattern&&(dn instanceof l.LineBucket||dn instanceof l.FillBucket||dn instanceof l.FillExtrusionBucket)&&(i(dn.layers,this.zoom,Ve),dn.addFeatures(ct,this.tileID.canonical,on.patternPositions))}this.status="done",nt(null,{buckets:l.values(vt).filter(function(Mn){return!Mn.isEmpty()}),featureIndex:ze,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Kt.image,imageAtlas:on,glyphMap:this.returnDependencies?tt:null,iconMap:this.returnDependencies?dt:null,glyphPositions:this.returnDependencies?Kt.positions:null})}}Ht.length?We.send("getImages",{icons:Ht,source:this.source,tileID:this.tileID,type:"patterns"},function(Kt,on){et||(et=Kt,pt=on,nn.call(ot))}):pt={},nn.call(this)};var n=function(Ye,Xe,Ve,We){this.actor=Ye,this.layerIndex=Xe,this.availableImages=Ve,this.loadVectorData=We||r,this.loading={},this.loaded={}};n.prototype.loadTile=function(Ye,Xe){var Ve=this,We=Ye.uid;this.loading||(this.loading={});var nt=!!(Ye&&Ye.request&&Ye.request.collectResourceTiming)&&new l.RequestPerformance(Ye.request),ot=this.loading[We]=new e(Ye);ot.abort=this.loadVectorData(Ye,function(Ie,ze){if(delete Ve.loading[We],Ie||!ze)return ot.status="done",Ve.loaded[We]=ot,Xe(Ie);var et=ze.rawData,tt={};ze.expires&&(tt.expires=ze.expires),ze.cacheControl&&(tt.cacheControl=ze.cacheControl);var dt={};if(nt){var pt=nt.finish();pt&&(dt.resourceTiming=JSON.parse(JSON.stringify(pt)))}ot.vectorTile=ze.vectorTile,ot.parse(ze.vectorTile,Ve.layerIndex,Ve.availableImages,Ve.actor,function(vt,ct){if(vt||!ct)return Xe(vt);Xe(null,l.extend({rawTileData:et.slice(0)},ct,tt,dt))}),Ve.loaded=Ve.loaded||{},Ve.loaded[We]=ot})},n.prototype.reloadTile=function(Ye,Xe){var Ve=this,We=this.loaded,nt=Ye.uid,ot=this;if(We&&We[nt]){var Ie=We[nt];Ie.showCollisionBoxes=Ye.showCollisionBoxes;var ze=function(et,tt){var dt=Ie.reloadCallback;dt&&(delete Ie.reloadCallback,Ie.parse(Ie.vectorTile,ot.layerIndex,Ve.availableImages,ot.actor,dt)),Xe(et,tt)};Ie.status==="parsing"?Ie.reloadCallback=ze:Ie.status==="done"&&(Ie.vectorTile?Ie.parse(Ie.vectorTile,this.layerIndex,this.availableImages,this.actor,ze):ze())}},n.prototype.abortTile=function(Ye,Xe){var Ve=this.loading,We=Ye.uid;Ve&&Ve[We]&&Ve[We].abort&&(Ve[We].abort(),delete Ve[We]),Xe()},n.prototype.removeTile=function(Ye,Xe){var Ve=this.loaded,We=Ye.uid;Ve&&Ve[We]&&delete Ve[We],Xe()};var a=l.window.ImageBitmap,o=function(){this.loaded={}};o.prototype.loadTile=function(Ye,Xe){var Ve=Ye.uid,We=Ye.encoding,nt=Ye.rawImageData,ot=a&&nt instanceof a?this.getImageData(nt):nt,Ie=new l.DEMData(Ve,ot,We);this.loaded=this.loaded||{},this.loaded[Ve]=Ie,Xe(null,Ie)},o.prototype.getImageData=function(Ye){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ye.width,Ye.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ye.width,this.offscreenCanvas.height=Ye.height,this.offscreenCanvasContext.drawImage(Ye,0,0,Ye.width,Ye.height);var Xe=this.offscreenCanvasContext.getImageData(-1,-1,Ye.width+2,Ye.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:Xe.width,height:Xe.height},Xe.data)},o.prototype.removeTile=function(Ye){var Xe=this.loaded,Ve=Ye.uid;Xe&&Xe[Ve]&&delete Xe[Ve]};var u=function Ye(Xe,Ve){var We,nt=Xe&&Xe.type;if(nt==="FeatureCollection")for(We=0;We<Xe.features.length;We++)Ye(Xe.features[We],Ve);else if(nt==="GeometryCollection")for(We=0;We<Xe.geometries.length;We++)Ye(Xe.geometries[We],Ve);else if(nt==="Feature")Ye(Xe.geometry,Ve);else if(nt==="Polygon")p(Xe.coordinates,Ve);else if(nt==="MultiPolygon")for(We=0;We<Xe.coordinates.length;We++)p(Xe.coordinates[We],Ve);return Xe};function p(Ye,Xe){if(Ye.length!==0){c(Ye[0],Xe);for(var Ve=1;Ve<Ye.length;Ve++)c(Ye[Ve],!Xe)}}function c(Ye,Xe){for(var Ve=0,We=0,nt=Ye.length,ot=nt-1;We<nt;ot=We++)Ve+=(Ye[We][0]-Ye[ot][0])*(Ye[ot][1]+Ye[We][1]);Ve>=0!=!!Xe&&Ye.reverse()}var x=l.vectorTile.VectorTileFeature.prototype.toGeoJSON,g=function(Ye){this._feature=Ye,this.extent=l.EXTENT,this.type=Ye.type,this.properties=Ye.tags,"id"in Ye&&!isNaN(Ye.id)&&(this.id=parseInt(Ye.id,10))};g.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Ye=[],Xe=0,Ve=this._feature.geometry;Xe<Ve.length;Xe+=1){var We=Ve[Xe];Ye.push([new l.Point$1(We[0],We[1])])}return Ye}for(var nt=[],ot=0,Ie=this._feature.geometry;ot<Ie.length;ot+=1){for(var ze=[],et=0,tt=Ie[ot];et<tt.length;et+=1){var dt=tt[et];ze.push(new l.Point$1(dt[0],dt[1]))}nt.push(ze)}return nt},g.prototype.toGeoJSON=function(Ye,Xe,Ve){return x.call(this,Ye,Xe,Ve)};var f=function(Ye){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=Ye.length,this._features=Ye};f.prototype.feature=function(Ye){return new g(this._features[Ye])};var y=l.vectorTile.VectorTileFeature,v=m;function m(Ye,Xe){this.options=Xe||{},this.features=Ye,this.length=Ye.length}function _(Ye,Xe){this.id=typeof Ye.id=="number"?Ye.id:void 0,this.type=Ye.type,this.rawGeometry=Ye.type===1?[Ye.geometry]:Ye.geometry,this.properties=Ye.tags,this.extent=Xe||4096}m.prototype.feature=function(Ye){return new _(this.features[Ye],this.options.extent)},_.prototype.loadGeometry=function(){var Ye=this.rawGeometry;this.geometry=[];for(var Xe=0;Xe<Ye.length;Xe++){for(var Ve=Ye[Xe],We=[],nt=0;nt<Ve.length;nt++)We.push(new l.Point$1(Ve[nt][0],Ve[nt][1]));this.geometry.push(We)}return this.geometry},_.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ye=this.geometry,Xe=1/0,Ve=-1/0,We=1/0,nt=-1/0,ot=0;ot<Ye.length;ot++)for(var Ie=Ye[ot],ze=0;ze<Ie.length;ze++){var et=Ie[ze];Xe=Math.min(Xe,et.x),Ve=Math.max(Ve,et.x),We=Math.min(We,et.y),nt=Math.max(nt,et.y)}return[Xe,We,Ve,nt]},_.prototype.toGeoJSON=y.prototype.toGeoJSON;var h=L,A=L,w=function(Ye,Xe){Xe=Xe||{};var Ve={};for(var We in Ye)Ve[We]=new v(Ye[We].features,Xe),Ve[We].name=We,Ve[We].version=Xe.version,Ve[We].extent=Xe.extent;return L({layers:Ve})},E=v;function L(Ye){var Xe=new l.pbf;return function(Ve,We){for(var nt in Ve.layers)We.writeMessage(3,C,Ve.layers[nt])}(Ye,Xe),Xe.finish()}function C(Ye,Xe){var Ve;Xe.writeVarintField(15,Ye.version||1),Xe.writeStringField(1,Ye.name||""),Xe.writeVarintField(5,Ye.extent||4096);var We={keys:[],values:[],keycache:{},valuecache:{}};for(Ve=0;Ve<Ye.length;Ve++)We.feature=Ye.feature(Ve),Xe.writeMessage(2,P,We);var nt=We.keys;for(Ve=0;Ve<nt.length;Ve++)Xe.writeStringField(3,nt[Ve]);var ot=We.values;for(Ve=0;Ve<ot.length;Ve++)Xe.writeMessage(4,N,ot[Ve])}function P(Ye,Xe){var Ve=Ye.feature;Ve.id!==void 0&&Xe.writeVarintField(1,Ve.id),Xe.writeMessage(2,D,Ye),Xe.writeVarintField(3,Ve.type),Xe.writeMessage(4,H,Ve)}function D(Ye,Xe){var Ve=Ye.feature,We=Ye.keys,nt=Ye.values,ot=Ye.keycache,Ie=Ye.valuecache;for(var ze in Ve.properties){var et=ot[ze];et===void 0&&(We.push(ze),et=We.length-1,ot[ze]=et),Xe.writeVarint(et);var tt=Ve.properties[ze],dt=typeof tt;dt!=="string"&&dt!=="boolean"&&dt!=="number"&&(tt=JSON.stringify(tt));var pt=dt+":"+tt,vt=Ie[pt];vt===void 0&&(nt.push(tt),vt=nt.length-1,Ie[pt]=vt),Xe.writeVarint(vt)}}function G(Ye,Xe){return(Xe<<3)+(7&Ye)}function I(Ye){return Ye<<1^Ye>>31}function H(Ye,Xe){for(var Ve=Ye.loadGeometry(),We=Ye.type,nt=0,ot=0,Ie=Ve.length,ze=0;ze<Ie;ze++){var et=Ve[ze],tt=1;We===1&&(tt=et.length),Xe.writeVarint(G(1,tt));for(var dt=We===3?et.length-1:et.length,pt=0;pt<dt;pt++){pt===1&&We!==1&&Xe.writeVarint(G(2,dt-1));var vt=et[pt].x-nt,ct=et[pt].y-ot;Xe.writeVarint(I(vt)),Xe.writeVarint(I(ct)),nt+=vt,ot+=ct}We===3&&Xe.writeVarint(G(7,1))}}function N(Ye,Xe){var Ve=typeof Ye;Ve==="string"?Xe.writeStringField(1,Ye):Ve==="boolean"?Xe.writeBooleanField(7,Ye):Ve==="number"&&(Ye%1!=0?Xe.writeDoubleField(3,Ye):Ye<0?Xe.writeSVarintField(6,Ye):Xe.writeVarintField(5,Ye))}function F(Ye,Xe,Ve,We,nt,ot){if(!(nt-We<=Ve)){var Ie=We+nt>>1;V(Ye,Xe,Ie,We,nt,ot%2),F(Ye,Xe,Ve,We,Ie-1,ot+1),F(Ye,Xe,Ve,Ie+1,nt,ot+1)}}function V(Ye,Xe,Ve,We,nt,ot){for(;nt>We;){if(nt-We>600){var Ie=nt-We+1,ze=Ve-We+1,et=Math.log(Ie),tt=.5*Math.exp(2*et/3),dt=.5*Math.sqrt(et*tt*(Ie-tt)/Ie)*(ze-Ie/2<0?-1:1);V(Ye,Xe,Ve,Math.max(We,Math.floor(Ve-ze*tt/Ie+dt)),Math.min(nt,Math.floor(Ve+(Ie-ze)*tt/Ie+dt)),ot)}var pt=Xe[2*Ve+ot],vt=We,ct=nt;for(q(Ye,Xe,We,Ve),Xe[2*nt+ot]>pt&&q(Ye,Xe,We,nt);vt<ct;){for(q(Ye,Xe,vt,ct),vt++,ct--;Xe[2*vt+ot]<pt;)vt++;for(;Xe[2*ct+ot]>pt;)ct--}Xe[2*We+ot]===pt?q(Ye,Xe,We,ct):q(Ye,Xe,++ct,nt),ct<=Ve&&(We=ct+1),Ve<=ct&&(nt=ct-1)}}function q(Ye,Xe,Ve,We){te(Ye,Ve,We),te(Xe,2*Ve,2*We),te(Xe,2*Ve+1,2*We+1)}function te(Ye,Xe,Ve){var We=Ye[Xe];Ye[Xe]=Ye[Ve],Ye[Ve]=We}function $(Ye,Xe,Ve,We){var nt=Ye-Ve,ot=Xe-We;return nt*nt+ot*ot}h.fromVectorTileJs=A,h.fromGeojsonVt=w,h.GeoJSONWrapper=E;var W=function(Ye){return Ye[0]},Z=function(Ye){return Ye[1]},J=function(Ye,Xe,Ve,We,nt){Xe===void 0&&(Xe=W),Ve===void 0&&(Ve=Z),We===void 0&&(We=64),nt===void 0&&(nt=Float64Array),this.nodeSize=We,this.points=Ye;for(var ot=Ye.length<65536?Uint16Array:Uint32Array,Ie=this.ids=new ot(Ye.length),ze=this.coords=new nt(2*Ye.length),et=0;et<Ye.length;et++)Ie[et]=et,ze[2*et]=Xe(Ye[et]),ze[2*et+1]=Ve(Ye[et]);F(Ie,ze,We,0,Ie.length-1,0)};J.prototype.range=function(Ye,Xe,Ve,We){return function(nt,ot,Ie,ze,et,tt,dt){for(var pt,vt,ct=[0,nt.length-1,0],kt=[];ct.length;){var ut=ct.pop(),ft=ct.pop(),bt=ct.pop();if(ft-bt<=dt)for(var It=bt;It<=ft;It++)pt=ot[2*It],vt=ot[2*It+1],pt>=Ie&&pt<=et&&vt>=ze&&vt<=tt&&kt.push(nt[It]);else{var zt=Math.floor((bt+ft)/2);pt=ot[2*zt],vt=ot[2*zt+1],pt>=Ie&&pt<=et&&vt>=ze&&vt<=tt&&kt.push(nt[zt]);var Rt=(ut+1)%2;(ut===0?Ie<=pt:ze<=vt)&&(ct.push(bt),ct.push(zt-1),ct.push(Rt)),(ut===0?et>=pt:tt>=vt)&&(ct.push(zt+1),ct.push(ft),ct.push(Rt))}}return kt}(this.ids,this.coords,Ye,Xe,Ve,We,this.nodeSize)},J.prototype.within=function(Ye,Xe,Ve){return function(We,nt,ot,Ie,ze,et){for(var tt=[0,We.length-1,0],dt=[],pt=ze*ze;tt.length;){var vt=tt.pop(),ct=tt.pop(),kt=tt.pop();if(ct-kt<=et)for(var ut=kt;ut<=ct;ut++)$(nt[2*ut],nt[2*ut+1],ot,Ie)<=pt&&dt.push(We[ut]);else{var ft=Math.floor((kt+ct)/2),bt=nt[2*ft],It=nt[2*ft+1];$(bt,It,ot,Ie)<=pt&&dt.push(We[ft]);var zt=(vt+1)%2;(vt===0?ot-ze<=bt:Ie-ze<=It)&&(tt.push(kt),tt.push(ft-1),tt.push(zt)),(vt===0?ot+ze>=bt:Ie+ze>=It)&&(tt.push(ft+1),tt.push(ct),tt.push(zt))}}return dt}(this.ids,this.coords,Ye,Xe,Ve,this.nodeSize)};var ee={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Ye){return Ye}},re=function(Ye){this.options=xe(Object.create(ee),Ye),this.trees=new Array(this.options.maxZoom+1)};function ae(Ye,Xe,Ve,We,nt){return{x:Ye,y:Xe,zoom:1/0,id:Ve,parentId:-1,numPoints:We,properties:nt}}function oe(Ye,Xe){var Ve=Ye.geometry.coordinates,We=Ve[0],nt=Ve[1];return{x:ve(We),y:we(nt),zoom:1/0,index:Xe,parentId:-1}}function ce(Ye){return{type:"Feature",id:Ye.id,properties:pe(Ye),geometry:{type:"Point",coordinates:[(We=Ye.x,360*(We-.5)),(Xe=Ye.y,Ve=(180-360*Xe)*Math.PI/180,360*Math.atan(Math.exp(Ve))/Math.PI-90)]}};var Xe,Ve,We}function pe(Ye){var Xe=Ye.numPoints,Ve=Xe>=1e4?Math.round(Xe/1e3)+"k":Xe>=1e3?Math.round(Xe/100)/10+"k":Xe;return xe(xe({},Ye.properties),{cluster:!0,cluster_id:Ye.id,point_count:Xe,point_count_abbreviated:Ve})}function ve(Ye){return Ye/360+.5}function we(Ye){var Xe=Math.sin(Ye*Math.PI/180),Ve=.5-.25*Math.log((1+Xe)/(1-Xe))/Math.PI;return Ve<0?0:Ve>1?1:Ve}function xe(Ye,Xe){for(var Ve in Xe)Ye[Ve]=Xe[Ve];return Ye}function ge(Ye){return Ye.x}function Oe(Ye){return Ye.y}function Ae(Ye,Xe,Ve,We){for(var nt,ot=We,Ie=Ve-Xe>>1,ze=Ve-Xe,et=Ye[Xe],tt=Ye[Xe+1],dt=Ye[Ve],pt=Ye[Ve+1],vt=Xe+3;vt<Ve;vt+=3){var ct=Te(Ye[vt],Ye[vt+1],et,tt,dt,pt);if(ct>ot)nt=vt,ot=ct;else if(ct===ot){var kt=Math.abs(vt-Ie);kt<ze&&(nt=vt,ze=kt)}}ot>We&&(nt-Xe>3&&Ae(Ye,Xe,nt,We),Ye[nt+2]=ot,Ve-nt>3&&Ae(Ye,nt,Ve,We))}function Te(Ye,Xe,Ve,We,nt,ot){var Ie=nt-Ve,ze=ot-We;if(Ie!==0||ze!==0){var et=((Ye-Ve)*Ie+(Xe-We)*ze)/(Ie*Ie+ze*ze);et>1?(Ve=nt,We=ot):et>0&&(Ve+=Ie*et,We+=ze*et)}return(Ie=Ye-Ve)*Ie+(ze=Xe-We)*ze}function se(Ye,Xe,Ve,We){var nt={id:Ye===void 0?null:Ye,type:Xe,geometry:Ve,tags:We,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ot){var Ie=ot.geometry,ze=ot.type;if(ze==="Point"||ze==="MultiPoint"||ze==="LineString")le(ot,Ie);else if(ze==="Polygon"||ze==="MultiLineString")for(var et=0;et<Ie.length;et++)le(ot,Ie[et]);else if(ze==="MultiPolygon")for(et=0;et<Ie.length;et++)for(var tt=0;tt<Ie[et].length;tt++)le(ot,Ie[et][tt])}(nt),nt}function le(Ye,Xe){for(var Ve=0;Ve<Xe.length;Ve+=3)Ye.minX=Math.min(Ye.minX,Xe[Ve]),Ye.minY=Math.min(Ye.minY,Xe[Ve+1]),Ye.maxX=Math.max(Ye.maxX,Xe[Ve]),Ye.maxY=Math.max(Ye.maxY,Xe[Ve+1])}function ne(Ye,Xe,Ve,We){if(Xe.geometry){var nt=Xe.geometry.coordinates,ot=Xe.geometry.type,Ie=Math.pow(Ve.tolerance/((1<<Ve.maxZoom)*Ve.extent),2),ze=[],et=Xe.id;if(Ve.promoteId?et=Xe.properties[Ve.promoteId]:Ve.generateId&&(et=We||0),ot==="Point")me(nt,ze);else if(ot==="MultiPoint")for(var tt=0;tt<nt.length;tt++)me(nt[tt],ze);else if(ot==="LineString")Ee(nt,ze,Ie,!1);else if(ot==="MultiLineString"){if(Ve.lineMetrics){for(tt=0;tt<nt.length;tt++)ze=[],Ee(nt[tt],ze,Ie,!1),Ye.push(se(et,"LineString",ze,Xe.properties));return}be(nt,ze,Ie,!1)}else if(ot==="Polygon")be(nt,ze,Ie,!0);else{if(ot!=="MultiPolygon"){if(ot==="GeometryCollection"){for(tt=0;tt<Xe.geometry.geometries.length;tt++)ne(Ye,{id:et,geometry:Xe.geometry.geometries[tt],properties:Xe.properties},Ve,We);return}throw new Error("Input data is not a valid GeoJSON object.")}for(tt=0;tt<nt.length;tt++){var dt=[];be(nt[tt],dt,Ie,!0),ze.push(dt)}}Ye.push(se(et,ot,ze,Xe.properties))}}function me(Ye,Xe){Xe.push(De(Ye[0])),Xe.push(Ue(Ye[1])),Xe.push(0)}function Ee(Ye,Xe,Ve,We){for(var nt,ot,Ie=0,ze=0;ze<Ye.length;ze++){var et=De(Ye[ze][0]),tt=Ue(Ye[ze][1]);Xe.push(et),Xe.push(tt),Xe.push(0),ze>0&&(Ie+=We?(nt*tt-et*ot)/2:Math.sqrt(Math.pow(et-nt,2)+Math.pow(tt-ot,2))),nt=et,ot=tt}var dt=Xe.length-3;Xe[2]=1,Ae(Xe,0,dt,Ve),Xe[dt+2]=1,Xe.size=Math.abs(Ie),Xe.start=0,Xe.end=Xe.size}function be(Ye,Xe,Ve,We){for(var nt=0;nt<Ye.length;nt++){var ot=[];Ee(Ye[nt],ot,Ve,We),Xe.push(ot)}}function De(Ye){return Ye/360+.5}function Ue(Ye){var Xe=Math.sin(Ye*Math.PI/180),Ve=.5-.25*Math.log((1+Xe)/(1-Xe))/Math.PI;return Ve<0?0:Ve>1?1:Ve}function he(Ye,Xe,Ve,We,nt,ot,Ie,ze){if(We/=Xe,ot>=(Ve/=Xe)&&Ie<We)return Ye;if(Ie<Ve||ot>=We)return null;for(var et=[],tt=0;tt<Ye.length;tt++){var dt=Ye[tt],pt=dt.geometry,vt=dt.type,ct=nt===0?dt.minX:dt.minY,kt=nt===0?dt.maxX:dt.maxY;if(ct>=Ve&&kt<We)et.push(dt);else if(!(kt<Ve||ct>=We)){var ut=[];if(vt==="Point"||vt==="MultiPoint")ke(pt,ut,Ve,We,nt);else if(vt==="LineString")_e(pt,ut,Ve,We,nt,!1,ze.lineMetrics);else if(vt==="MultiLineString")Fe(pt,ut,Ve,We,nt,!1);else if(vt==="Polygon")Fe(pt,ut,Ve,We,nt,!0);else if(vt==="MultiPolygon")for(var ft=0;ft<pt.length;ft++){var bt=[];Fe(pt[ft],bt,Ve,We,nt,!0),bt.length&&ut.push(bt)}if(ut.length){if(ze.lineMetrics&&vt==="LineString"){for(ft=0;ft<ut.length;ft++)et.push(se(dt.id,vt,ut[ft],dt.tags));continue}vt!=="LineString"&&vt!=="MultiLineString"||(ut.length===1?(vt="LineString",ut=ut[0]):vt="MultiLineString"),vt!=="Point"&&vt!=="MultiPoint"||(vt=ut.length===3?"Point":"MultiPoint"),et.push(se(dt.id,vt,ut,dt.tags))}}}return et.length?et:null}function ke(Ye,Xe,Ve,We,nt){for(var ot=0;ot<Ye.length;ot+=3){var Ie=Ye[ot+nt];Ie>=Ve&&Ie<=We&&(Xe.push(Ye[ot]),Xe.push(Ye[ot+1]),Xe.push(Ye[ot+2]))}}function _e(Ye,Xe,Ve,We,nt,ot,Ie){for(var ze,et,tt=Ce(Ye),dt=nt===0?He:Ge,pt=Ye.start,vt=0;vt<Ye.length-3;vt+=3){var ct=Ye[vt],kt=Ye[vt+1],ut=Ye[vt+2],ft=Ye[vt+3],bt=Ye[vt+4],It=nt===0?ct:kt,zt=nt===0?ft:bt,Rt=!1;Ie&&(ze=Math.sqrt(Math.pow(ct-ft,2)+Math.pow(kt-bt,2))),It<Ve?zt>Ve&&(et=dt(tt,ct,kt,ft,bt,Ve),Ie&&(tt.start=pt+ze*et)):It>We?zt<We&&(et=dt(tt,ct,kt,ft,bt,We),Ie&&(tt.start=pt+ze*et)):Re(tt,ct,kt,ut),zt<Ve&&It>=Ve&&(et=dt(tt,ct,kt,ft,bt,Ve),Rt=!0),zt>We&&It<=We&&(et=dt(tt,ct,kt,ft,bt,We),Rt=!0),!ot&&Rt&&(Ie&&(tt.end=pt+ze*et),Xe.push(tt),tt=Ce(Ye)),Ie&&(pt+=ze)}var Jt=Ye.length-3;ct=Ye[Jt],kt=Ye[Jt+1],ut=Ye[Jt+2],(It=nt===0?ct:kt)>=Ve&&It<=We&&Re(tt,ct,kt,ut),Jt=tt.length-3,ot&&Jt>=3&&(tt[Jt]!==tt[0]||tt[Jt+1]!==tt[1])&&Re(tt,tt[0],tt[1],tt[2]),tt.length&&Xe.push(tt)}function Ce(Ye){var Xe=[];return Xe.size=Ye.size,Xe.start=Ye.start,Xe.end=Ye.end,Xe}function Fe(Ye,Xe,Ve,We,nt,ot){for(var Ie=0;Ie<Ye.length;Ie++)_e(Ye[Ie],Xe,Ve,We,nt,ot,!1)}function Re(Ye,Xe,Ve,We){Ye.push(Xe),Ye.push(Ve),Ye.push(We)}function He(Ye,Xe,Ve,We,nt,ot){var Ie=(ot-Xe)/(We-Xe);return Ye.push(ot),Ye.push(Ve+(nt-Ve)*Ie),Ye.push(1),Ie}function Ge(Ye,Xe,Ve,We,nt,ot){var Ie=(ot-Ve)/(nt-Ve);return Ye.push(Xe+(We-Xe)*Ie),Ye.push(ot),Ye.push(1),Ie}function $e(Ye,Xe){for(var Ve=[],We=0;We<Ye.length;We++){var nt,ot=Ye[We],Ie=ot.type;if(Ie==="Point"||Ie==="MultiPoint"||Ie==="LineString")nt=st(ot.geometry,Xe);else if(Ie==="MultiLineString"||Ie==="Polygon"){nt=[];for(var ze=0;ze<ot.geometry.length;ze++)nt.push(st(ot.geometry[ze],Xe))}else if(Ie==="MultiPolygon")for(nt=[],ze=0;ze<ot.geometry.length;ze++){for(var et=[],tt=0;tt<ot.geometry[ze].length;tt++)et.push(st(ot.geometry[ze][tt],Xe));nt.push(et)}Ve.push(se(ot.id,Ie,nt,ot.tags))}return Ve}function st(Ye,Xe){var Ve=[];Ve.size=Ye.size,Ye.start!==void 0&&(Ve.start=Ye.start,Ve.end=Ye.end);for(var We=0;We<Ye.length;We+=3)Ve.push(Ye[We]+Xe,Ye[We+1],Ye[We+2]);return Ve}function Ke(Ye,Xe){if(Ye.transformed)return Ye;var Ve,We,nt,ot=1<<Ye.z,Ie=Ye.x,ze=Ye.y;for(Ve=0;Ve<Ye.features.length;Ve++){var et=Ye.features[Ve],tt=et.geometry,dt=et.type;if(et.geometry=[],dt===1)for(We=0;We<tt.length;We+=2)et.geometry.push(gt(tt[We],tt[We+1],Xe,ot,Ie,ze));else for(We=0;We<tt.length;We++){var pt=[];for(nt=0;nt<tt[We].length;nt+=2)pt.push(gt(tt[We][nt],tt[We][nt+1],Xe,ot,Ie,ze));et.geometry.push(pt)}}return Ye.transformed=!0,Ye}function gt(Ye,Xe,Ve,We,nt,ot){return[Math.round(Ve*(Ye*We-nt)),Math.round(Ve*(Xe*We-ot))]}function mt(Ye,Xe,Ve,We,nt){for(var ot=Xe===nt.maxZoom?0:nt.tolerance/((1<<Xe)*nt.extent),Ie={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ve,y:We,z:Xe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ze=0;ze<Ye.length;ze++){Ie.numFeatures++,at(Ie,Ye[ze],ot,nt);var et=Ye[ze].minX,tt=Ye[ze].minY,dt=Ye[ze].maxX,pt=Ye[ze].maxY;et<Ie.minX&&(Ie.minX=et),tt<Ie.minY&&(Ie.minY=tt),dt>Ie.maxX&&(Ie.maxX=dt),pt>Ie.maxY&&(Ie.maxY=pt)}return Ie}function at(Ye,Xe,Ve,We){var nt=Xe.geometry,ot=Xe.type,Ie=[];if(ot==="Point"||ot==="MultiPoint")for(var ze=0;ze<nt.length;ze+=3)Ie.push(nt[ze]),Ie.push(nt[ze+1]),Ye.numPoints++,Ye.numSimplified++;else if(ot==="LineString")rt(Ie,nt,Ye,Ve,!1,!1);else if(ot==="MultiLineString"||ot==="Polygon")for(ze=0;ze<nt.length;ze++)rt(Ie,nt[ze],Ye,Ve,ot==="Polygon",ze===0);else if(ot==="MultiPolygon")for(var et=0;et<nt.length;et++){var tt=nt[et];for(ze=0;ze<tt.length;ze++)rt(Ie,tt[ze],Ye,Ve,!0,ze===0)}if(Ie.length){var dt=Xe.tags||null;if(ot==="LineString"&&We.lineMetrics){for(var pt in dt={},Xe.tags)dt[pt]=Xe.tags[pt];dt.mapbox_clip_start=nt.start/nt.size,dt.mapbox_clip_end=nt.end/nt.size}var vt={geometry:Ie,type:ot==="Polygon"||ot==="MultiPolygon"?3:ot==="LineString"||ot==="MultiLineString"?2:1,tags:dt};Xe.id!==null&&(vt.id=Xe.id),Ye.features.push(vt)}}function rt(Ye,Xe,Ve,We,nt,ot){var Ie=We*We;if(We>0&&Xe.size<(nt?Ie:We))Ve.numPoints+=Xe.length/3;else{for(var ze=[],et=0;et<Xe.length;et+=3)(We===0||Xe[et+2]>Ie)&&(Ve.numSimplified++,ze.push(Xe[et]),ze.push(Xe[et+1])),Ve.numPoints++;nt&&function(tt,dt){for(var pt=0,vt=0,ct=tt.length,kt=ct-2;vt<ct;kt=vt,vt+=2)pt+=(tt[vt]-tt[kt])*(tt[vt+1]+tt[kt+1]);if(pt>0===dt)for(vt=0,ct=tt.length;vt<ct/2;vt+=2){var ut=tt[vt],ft=tt[vt+1];tt[vt]=tt[ct-2-vt],tt[vt+1]=tt[ct-1-vt],tt[ct-2-vt]=ut,tt[ct-1-vt]=ft}}(ze,ot),Ye.push(ze)}}function xt(Ye,Xe){var Ve=(Xe=this.options=function(nt,ot){for(var Ie in ot)nt[Ie]=ot[Ie];return nt}(Object.create(this.options),Xe)).debug;if(Ve&&console.time("preprocess data"),Xe.maxZoom<0||Xe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Xe.promoteId&&Xe.generateId)throw new Error("promoteId and generateId cannot be used together.");var We=function(nt,ot){var Ie=[];if(nt.type==="FeatureCollection")for(var ze=0;ze<nt.features.length;ze++)ne(Ie,nt.features[ze],ot,ze);else nt.type==="Feature"?ne(Ie,nt,ot):ne(Ie,{geometry:nt},ot);return Ie}(Ye,Xe);this.tiles={},this.tileCoords=[],Ve&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Xe.indexMaxZoom,Xe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(We=function(nt,ot){var Ie=ot.buffer/ot.extent,ze=nt,et=he(nt,1,-1-Ie,Ie,0,-1,2,ot),tt=he(nt,1,1-Ie,2+Ie,0,-1,2,ot);return(et||tt)&&(ze=he(nt,1,-Ie,1+Ie,0,-1,2,ot)||[],et&&(ze=$e(et,1).concat(ze)),tt&&(ze=ze.concat($e(tt,-1)))),ze}(We,Xe)).length&&this.splitTile(We,0,0,0),Ve&&(We.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Tt(Ye,Xe,Ve){return 32*((1<<Ye)*Ve+Xe)+Ye}function wt(Ye,Xe){var Ve=Ye.tileID.canonical;if(!this._geoJSONIndex)return Xe(null,null);var We=this._geoJSONIndex.getTile(Ve.z,Ve.x,Ve.y);if(!We)return Xe(null,null);var nt=new f(We.features),ot=h(nt);ot.byteOffset===0&&ot.byteLength===ot.buffer.byteLength||(ot=new Uint8Array(ot)),Xe(null,{vectorTile:nt,rawData:ot.buffer})}re.prototype.load=function(Ye){var Xe=this.options,Ve=Xe.log,We=Xe.minZoom,nt=Xe.maxZoom,ot=Xe.nodeSize;Ve&&console.time("total time");var Ie="prepare "+Ye.length+" points";Ve&&console.time(Ie),this.points=Ye;for(var ze=[],et=0;et<Ye.length;et++)Ye[et].geometry&&ze.push(oe(Ye[et],et));this.trees[nt+1]=new J(ze,ge,Oe,ot,Float32Array),Ve&&console.timeEnd(Ie);for(var tt=nt;tt>=We;tt--){var dt=+Date.now();ze=this._cluster(ze,tt),this.trees[tt]=new J(ze,ge,Oe,ot,Float32Array),Ve&&console.log("z%d: %d clusters in %dms",tt,ze.length,+Date.now()-dt)}return Ve&&console.timeEnd("total time"),this},re.prototype.getClusters=function(Ye,Xe){var Ve=((Ye[0]+180)%360+360)%360-180,We=Math.max(-90,Math.min(90,Ye[1])),nt=Ye[2]===180?180:((Ye[2]+180)%360+360)%360-180,ot=Math.max(-90,Math.min(90,Ye[3]));if(Ye[2]-Ye[0]>=360)Ve=-180,nt=180;else if(Ve>nt){var Ie=this.getClusters([Ve,We,180,ot],Xe),ze=this.getClusters([-180,We,nt,ot],Xe);return Ie.concat(ze)}for(var et=this.trees[this._limitZoom(Xe)],tt=[],dt=0,pt=et.range(ve(Ve),we(ot),ve(nt),we(We));dt<pt.length;dt+=1){var vt=pt[dt],ct=et.points[vt];tt.push(ct.numPoints?ce(ct):this.points[ct.index])}return tt},re.prototype.getChildren=function(Ye){var Xe=this._getOriginId(Ye),Ve=this._getOriginZoom(Ye),We="No cluster with the specified id.",nt=this.trees[Ve];if(!nt)throw new Error(We);var ot=nt.points[Xe];if(!ot)throw new Error(We);for(var Ie=this.options.radius/(this.options.extent*Math.pow(2,Ve-1)),ze=[],et=0,tt=nt.within(ot.x,ot.y,Ie);et<tt.length;et+=1){var dt=tt[et],pt=nt.points[dt];pt.parentId===Ye&&ze.push(pt.numPoints?ce(pt):this.points[pt.index])}if(ze.length===0)throw new Error(We);return ze},re.prototype.getLeaves=function(Ye,Xe,Ve){Xe=Xe||10,Ve=Ve||0;var We=[];return this._appendLeaves(We,Ye,Xe,Ve,0),We},re.prototype.getTile=function(Ye,Xe,Ve){var We=this.trees[this._limitZoom(Ye)],nt=Math.pow(2,Ye),ot=this.options,Ie=ot.extent,ze=ot.radius/Ie,et=(Ve-ze)/nt,tt=(Ve+1+ze)/nt,dt={features:[]};return this._addTileFeatures(We.range((Xe-ze)/nt,et,(Xe+1+ze)/nt,tt),We.points,Xe,Ve,nt,dt),Xe===0&&this._addTileFeatures(We.range(1-ze/nt,et,1,tt),We.points,nt,Ve,nt,dt),Xe===nt-1&&this._addTileFeatures(We.range(0,et,ze/nt,tt),We.points,-1,Ve,nt,dt),dt.features.length?dt:null},re.prototype.getClusterExpansionZoom=function(Ye){for(var Xe=this._getOriginZoom(Ye)-1;Xe<=this.options.maxZoom;){var Ve=this.getChildren(Ye);if(Xe++,Ve.length!==1)break;Ye=Ve[0].properties.cluster_id}return Xe},re.prototype._appendLeaves=function(Ye,Xe,Ve,We,nt){for(var ot=0,Ie=this.getChildren(Xe);ot<Ie.length;ot+=1){var ze=Ie[ot],et=ze.properties;if(et&&et.cluster?nt+et.point_count<=We?nt+=et.point_count:nt=this._appendLeaves(Ye,et.cluster_id,Ve,We,nt):nt<We?nt++:Ye.push(ze),Ye.length===Ve)break}return nt},re.prototype._addTileFeatures=function(Ye,Xe,Ve,We,nt,ot){for(var Ie=0,ze=Ye;Ie<ze.length;Ie+=1){var et=Xe[ze[Ie]],tt=et.numPoints,dt={type:1,geometry:[[Math.round(this.options.extent*(et.x*nt-Ve)),Math.round(this.options.extent*(et.y*nt-We))]],tags:tt?pe(et):this.points[et.index].properties},pt=void 0;tt?pt=et.id:this.options.generateId?pt=et.index:this.points[et.index].id&&(pt=this.points[et.index].id),pt!==void 0&&(dt.id=pt),ot.features.push(dt)}},re.prototype._limitZoom=function(Ye){return Math.max(this.options.minZoom,Math.min(Ye,this.options.maxZoom+1))},re.prototype._cluster=function(Ye,Xe){for(var Ve=[],We=this.options,nt=We.radius,ot=We.extent,Ie=We.reduce,ze=nt/(ot*Math.pow(2,Xe)),et=0;et<Ye.length;et++){var tt=Ye[et];if(!(tt.zoom<=Xe)){tt.zoom=Xe;for(var dt=this.trees[Xe+1],pt=dt.within(tt.x,tt.y,ze),vt=tt.numPoints||1,ct=tt.x*vt,kt=tt.y*vt,ut=Ie&&vt>1?this._map(tt,!0):null,ft=(et<<5)+(Xe+1)+this.points.length,bt=0,It=pt;bt<It.length;bt+=1){var zt=It[bt],Rt=dt.points[zt];if(!(Rt.zoom<=Xe)){Rt.zoom=Xe;var Jt=Rt.numPoints||1;ct+=Rt.x*Jt,kt+=Rt.y*Jt,vt+=Jt,Rt.parentId=ft,Ie&&(ut||(ut=this._map(tt,!0)),Ie(ut,this._map(Rt)))}}vt===1?Ve.push(tt):(tt.parentId=ft,Ve.push(ae(ct/vt,kt/vt,ft,vt,ut)))}}return Ve},re.prototype._getOriginId=function(Ye){return Ye-this.points.length>>5},re.prototype._getOriginZoom=function(Ye){return(Ye-this.points.length)%32},re.prototype._map=function(Ye,Xe){if(Ye.numPoints)return Xe?xe({},Ye.properties):Ye.properties;var Ve=this.points[Ye.index].properties,We=this.options.map(Ve);return Xe&&We===Ve?xe({},We):We},xt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},xt.prototype.splitTile=function(Ye,Xe,Ve,We,nt,ot,Ie){for(var ze=[Ye,Xe,Ve,We],et=this.options,tt=et.debug;ze.length;){We=ze.pop(),Ve=ze.pop(),Xe=ze.pop(),Ye=ze.pop();var dt=1<<Xe,pt=Tt(Xe,Ve,We),vt=this.tiles[pt];if(!vt&&(tt>1&&console.time("creation"),vt=this.tiles[pt]=mt(Ye,Xe,Ve,We,et),this.tileCoords.push({z:Xe,x:Ve,y:We}),tt)){tt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Xe,Ve,We,vt.numFeatures,vt.numPoints,vt.numSimplified),console.timeEnd("creation"));var ct="z"+Xe;this.stats[ct]=(this.stats[ct]||0)+1,this.total++}if(vt.source=Ye,nt){if(Xe===et.maxZoom||Xe===nt)continue;var kt=1<<nt-Xe;if(Ve!==Math.floor(ot/kt)||We!==Math.floor(Ie/kt))continue}else if(Xe===et.indexMaxZoom||vt.numPoints<=et.indexMaxPoints)continue;if(vt.source=null,Ye.length!==0){tt>1&&console.time("clipping");var ut,ft,bt,It,zt,Rt,Jt=.5*et.buffer/et.extent,qt=.5-Jt,Wt=.5+Jt,jt=1+Jt;ut=ft=bt=It=null,zt=he(Ye,dt,Ve-Jt,Ve+Wt,0,vt.minX,vt.maxX,et),Rt=he(Ye,dt,Ve+qt,Ve+jt,0,vt.minX,vt.maxX,et),Ye=null,zt&&(ut=he(zt,dt,We-Jt,We+Wt,1,vt.minY,vt.maxY,et),ft=he(zt,dt,We+qt,We+jt,1,vt.minY,vt.maxY,et),zt=null),Rt&&(bt=he(Rt,dt,We-Jt,We+Wt,1,vt.minY,vt.maxY,et),It=he(Rt,dt,We+qt,We+jt,1,vt.minY,vt.maxY,et),Rt=null),tt>1&&console.timeEnd("clipping"),ze.push(ut||[],Xe+1,2*Ve,2*We),ze.push(ft||[],Xe+1,2*Ve,2*We+1),ze.push(bt||[],Xe+1,2*Ve+1,2*We),ze.push(It||[],Xe+1,2*Ve+1,2*We+1)}}},xt.prototype.getTile=function(Ye,Xe,Ve){var We=this.options,nt=We.extent,ot=We.debug;if(Ye<0||Ye>24)return null;var Ie=1<<Ye,ze=Tt(Ye,Xe=(Xe%Ie+Ie)%Ie,Ve);if(this.tiles[ze])return Ke(this.tiles[ze],nt);ot>1&&console.log("drilling down to z%d-%d-%d",Ye,Xe,Ve);for(var et,tt=Ye,dt=Xe,pt=Ve;!et&&tt>0;)tt--,dt=Math.floor(dt/2),pt=Math.floor(pt/2),et=this.tiles[Tt(tt,dt,pt)];return et&&et.source?(ot>1&&console.log("found parent tile z%d-%d-%d",tt,dt,pt),ot>1&&console.time("drilling down"),this.splitTile(et.source,tt,dt,pt,Ye,Xe,Ve),ot>1&&console.timeEnd("drilling down"),this.tiles[ze]?Ke(this.tiles[ze],nt):null):null};var Ot=function(Ye){function Xe(Ve,We,nt,ot){Ye.call(this,Ve,We,nt,wt),ot&&(this.loadGeoJSON=ot)}return Ye&&(Xe.__proto__=Ye),Xe.prototype=Object.create(Ye&&Ye.prototype),Xe.prototype.constructor=Xe,Xe.prototype.loadData=function(Ve,We){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=We,this._pendingLoadDataParams=Ve,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Xe.prototype._loadData=function(){var Ve=this;if(this._pendingCallback&&this._pendingLoadDataParams){var We=this._pendingCallback,nt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ot=!!(nt&&nt.request&&nt.request.collectResourceTiming)&&new l.RequestPerformance(nt.request);this.loadGeoJSON(nt,function(Ie,ze){if(Ie||!ze)return We(Ie);if(typeof ze!="object")return We(new Error("Input data given to '"+nt.source+"' is not a valid GeoJSON object."));u(ze,!0);try{Ve._geoJSONIndex=nt.cluster?new re(function(dt){var pt=dt.superclusterOptions,vt=dt.clusterProperties;if(!vt||!pt)return pt;for(var ct={},kt={},ut={accumulated:null,zoom:0},ft={properties:null},bt=Object.keys(vt),It=0,zt=bt;It<zt.length;It+=1){var Rt=zt[It],Jt=vt[Rt],qt=Jt[0],Wt=Jt[1],jt=l.createExpression(Wt),fn=l.createExpression(typeof qt=="string"?[qt,["accumulated"],["get",Rt]]:qt);ct[Rt]=jt.value,kt[Rt]=fn.value}return pt.map=function(xn){ft.properties=xn;for(var un={},Ht=0,nn=bt;Ht<nn.length;Ht+=1){var Kt=nn[Ht];un[Kt]=ct[Kt].evaluate(ut,ft)}return un},pt.reduce=function(xn,un){ft.properties=un;for(var Ht=0,nn=bt;Ht<nn.length;Ht+=1){var Kt=nn[Ht];ut.accumulated=xn[Kt],xn[Kt]=kt[Kt].evaluate(ut,ft)}},pt}(nt)).load(ze.features):function(dt,pt){return new xt(dt,pt)}(ze,nt.geojsonVtOptions)}catch(dt){return We(dt)}Ve.loaded={};var et={};if(ot){var tt=ot.finish();tt&&(et.resourceTiming={},et.resourceTiming[nt.source]=JSON.parse(JSON.stringify(tt)))}We(null,et)})}},Xe.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Xe.prototype.reloadTile=function(Ve,We){var nt=this.loaded,ot=Ve.uid;return nt&&nt[ot]?Ye.prototype.reloadTile.call(this,Ve,We):this.loadTile(Ve,We)},Xe.prototype.loadGeoJSON=function(Ve,We){if(Ve.request)l.getJSON(Ve.request,We);else{if(typeof Ve.data!="string")return We(new Error("Input data given to '"+Ve.source+"' is not a valid GeoJSON object."));try{return We(null,JSON.parse(Ve.data))}catch{return We(new Error("Input data given to '"+Ve.source+"' is not a valid GeoJSON object."))}}},Xe.prototype.removeSource=function(Ve,We){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),We()},Xe.prototype.getClusterExpansionZoom=function(Ve,We){try{We(null,this._geoJSONIndex.getClusterExpansionZoom(Ve.clusterId))}catch(nt){We(nt)}},Xe.prototype.getClusterChildren=function(Ve,We){try{We(null,this._geoJSONIndex.getChildren(Ve.clusterId))}catch(nt){We(nt)}},Xe.prototype.getClusterLeaves=function(Ve,We){try{We(null,this._geoJSONIndex.getLeaves(Ve.clusterId,Ve.limit,Ve.offset))}catch(nt){We(nt)}},Xe}(n),Ct=function(Ye){var Xe=this;this.self=Ye,this.actor=new l.Actor(Ye,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:n,geojson:Ot},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Ve,We){if(Xe.workerSourceTypes[Ve])throw new Error('Worker source with name "'+Ve+'" already registered.');Xe.workerSourceTypes[Ve]=We},this.self.registerRTLTextPlugin=function(Ve){if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=Ve.applyArabicShaping,l.plugin.processBidirectionalText=Ve.processBidirectionalText,l.plugin.processStyledBidirectionalText=Ve.processStyledBidirectionalText}};return Ct.prototype.setReferrer=function(Ye,Xe){this.referrer=Xe},Ct.prototype.setImages=function(Ye,Xe,Ve){for(var We in this.availableImages[Ye]=Xe,this.workerSources[Ye]){var nt=this.workerSources[Ye][We];for(var ot in nt)nt[ot].availableImages=Xe}Ve()},Ct.prototype.setLayers=function(Ye,Xe,Ve){this.getLayerIndex(Ye).replace(Xe),Ve()},Ct.prototype.updateLayers=function(Ye,Xe,Ve){this.getLayerIndex(Ye).update(Xe.layers,Xe.removedIds),Ve()},Ct.prototype.loadTile=function(Ye,Xe,Ve){this.getWorkerSource(Ye,Xe.type,Xe.source).loadTile(Xe,Ve)},Ct.prototype.loadDEMTile=function(Ye,Xe,Ve){this.getDEMWorkerSource(Ye,Xe.source).loadTile(Xe,Ve)},Ct.prototype.reloadTile=function(Ye,Xe,Ve){this.getWorkerSource(Ye,Xe.type,Xe.source).reloadTile(Xe,Ve)},Ct.prototype.abortTile=function(Ye,Xe,Ve){this.getWorkerSource(Ye,Xe.type,Xe.source).abortTile(Xe,Ve)},Ct.prototype.removeTile=function(Ye,Xe,Ve){this.getWorkerSource(Ye,Xe.type,Xe.source).removeTile(Xe,Ve)},Ct.prototype.removeDEMTile=function(Ye,Xe){this.getDEMWorkerSource(Ye,Xe.source).removeTile(Xe)},Ct.prototype.removeSource=function(Ye,Xe,Ve){if(this.workerSources[Ye]&&this.workerSources[Ye][Xe.type]&&this.workerSources[Ye][Xe.type][Xe.source]){var We=this.workerSources[Ye][Xe.type][Xe.source];delete this.workerSources[Ye][Xe.type][Xe.source],We.removeSource!==void 0?We.removeSource(Xe,Ve):Ve()}},Ct.prototype.loadWorkerSource=function(Ye,Xe,Ve){try{this.self.importScripts(Xe.url),Ve()}catch(We){Ve(We.toString())}},Ct.prototype.syncRTLPluginState=function(Ye,Xe,Ve){try{l.plugin.setState(Xe);var We=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&We!=null){this.self.importScripts(We);var nt=l.plugin.isParsed();Ve(nt?void 0:new Error("RTL Text Plugin failed to import scripts from "+We),nt)}}catch(ot){Ve(ot.toString())}},Ct.prototype.getAvailableImages=function(Ye){var Xe=this.availableImages[Ye];return Xe||(Xe=[]),Xe},Ct.prototype.getLayerIndex=function(Ye){var Xe=this.layerIndexes[Ye];return Xe||(Xe=this.layerIndexes[Ye]=new d),Xe},Ct.prototype.getWorkerSource=function(Ye,Xe,Ve){var We=this;if(this.workerSources[Ye]||(this.workerSources[Ye]={}),this.workerSources[Ye][Xe]||(this.workerSources[Ye][Xe]={}),!this.workerSources[Ye][Xe][Ve]){var nt={send:function(ot,Ie,ze){We.actor.send(ot,Ie,ze,Ye)}};this.workerSources[Ye][Xe][Ve]=new this.workerSourceTypes[Xe](nt,this.getLayerIndex(Ye),this.getAvailableImages(Ye))}return this.workerSources[Ye][Xe][Ve]},Ct.prototype.getDEMWorkerSource=function(Ye,Xe){return this.demWorkerSources[Ye]||(this.demWorkerSources[Ye]={}),this.demWorkerSources[Ye][Xe]||(this.demWorkerSources[Ye][Xe]=new o),this.demWorkerSources[Ye][Xe]},Ct.prototype.enforceCacheSizeLimit=function(Ye,Xe){l.enforceCacheSizeLimit(Xe)},typeof WorkerGlobalScope<"u"&&l.window!==void 0&&l.window instanceof WorkerGlobalScope&&(l.window.worker=new Ct(l.window)),Ct}),k(0,function(l){var T=l.createCommonjsModule(function(R){function U(fe){return!j(fe)}function j(fe){return typeof window<"u"&&typeof document<"u"?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var B,K,ie=new Blob([""],{type:"text/javascript"}),de=URL.createObjectURL(ie);try{K=new Worker(de),B=!0}catch{B=!1}return K&&K.terminate(),URL.revokeObjectURL(de),B}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var B=document.createElement("canvas");B.width=B.height=1;var K=B.getContext("2d");if(!K)return!1;var ie=K.getImageData(0,0,1,1);return ie&&ie.width===B.width}()?(Me=fe&&fe.failIfMajorPerformanceCaveat,X[Me]===void 0&&(X[Me]=function(B){var K=function(de){var ye=document.createElement("canvas"),Le=Object.create(U.webGLContextAttributes);return Le.failIfMajorPerformanceCaveat=de,ye.probablySupportsContext?ye.probablySupportsContext("webgl",Le)||ye.probablySupportsContext("experimental-webgl",Le):ye.supportsContext?ye.supportsContext("webgl",Le)||ye.supportsContext("experimental-webgl",Le):ye.getContext("webgl",Le)||ye.getContext("experimental-webgl",Le)}(B);if(!K)return!1;var ie=K.createShader(K.VERTEX_SHADER);return!(!ie||K.isContextLost())&&(K.shaderSource(ie,"void main() {}"),K.compileShader(ie),K.getShaderParameter(ie,K.COMPILE_STATUS)===!0)}(Me)),X[Me]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var Me}R.exports?R.exports=U:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=U,window.mapboxgl.notSupportedReason=j);var X={};U.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),b={create:function(R,U,j){var X=l.window.document.createElement(R);return U!==void 0&&(X.className=U),j&&j.appendChild(X),X},createNS:function(R,U){return l.window.document.createElementNS(R,U)}},d=l.window.document.documentElement.style;function s(R){if(!d)return R[0];for(var U=0;U<R.length;U++)if(R[U]in d)return R[U];return R[0]}var e,i=s(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);b.disableDrag=function(){d&&i&&(e=d[i],d[i]="none")},b.enableDrag=function(){d&&i&&(d[i]=e)};var r=s(["transform","WebkitTransform"]);b.setTransform=function(R,U){R.style[r]=U};var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){n=!0}});l.window.addEventListener("test",a,a),l.window.removeEventListener("test",a,a)}catch{n=!1}b.addEventListener=function(R,U,j,X){X===void 0&&(X={}),"passive"in X&&n?R.addEventListener(U,j,X):R.addEventListener(U,j,X.capture)},b.removeEventListener=function(R,U,j,X){X===void 0&&(X={}),"passive"in X&&n?R.removeEventListener(U,j,X):R.removeEventListener(U,j,X.capture)};var o=function(R){R.preventDefault(),R.stopPropagation(),l.window.removeEventListener("click",o,!0)};function u(R){var U=R.userImage;return!!(U&&U.render&&U.render())&&(R.data.replace(new Uint8Array(U.data.buffer)),!0)}b.suppressClick=function(){l.window.addEventListener("click",o,!0),l.window.setTimeout(function(){l.window.removeEventListener("click",o,!0)},0)},b.mousePos=function(R,U){var j=R.getBoundingClientRect();return new l.Point(U.clientX-j.left-R.clientLeft,U.clientY-j.top-R.clientTop)},b.touchPos=function(R,U){for(var j=R.getBoundingClientRect(),X=[],fe=0;fe<U.length;fe++)X.push(new l.Point(U[fe].clientX-j.left-R.clientLeft,U[fe].clientY-j.top-R.clientTop));return X},b.mouseButton=function(R){return l.window.InstallTrigger!==void 0&&R.button===2&&R.ctrlKey&&l.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:R.button},b.remove=function(R){R.parentNode&&R.parentNode.removeChild(R)};var p=function(R){function U(){R.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.isLoaded=function(){return this.loaded},U.prototype.setLoaded=function(j){if(this.loaded!==j&&(this.loaded=j,j)){for(var X=0,fe=this.requestors;X<fe.length;X+=1){var Me=fe[X],B=Me.ids,K=Me.callback;this._notify(B,K)}this.requestors=[]}},U.prototype.getImage=function(j){return this.images[j]},U.prototype.addImage=function(j,X){this._validate(j,X)&&(this.images[j]=X)},U.prototype._validate=function(j,X){var fe=!0;return this._validateStretch(X.stretchX,X.data&&X.data.width)||(this.fire(new l.ErrorEvent(new Error('Image "'+j+'" has invalid "stretchX" value'))),fe=!1),this._validateStretch(X.stretchY,X.data&&X.data.height)||(this.fire(new l.ErrorEvent(new Error('Image "'+j+'" has invalid "stretchY" value'))),fe=!1),this._validateContent(X.content,X)||(this.fire(new l.ErrorEvent(new Error('Image "'+j+'" has invalid "content" value'))),fe=!1),fe},U.prototype._validateStretch=function(j,X){if(!j)return!0;for(var fe=0,Me=0,B=j;Me<B.length;Me+=1){var K=B[Me];if(K[0]<fe||K[1]<K[0]||X<K[1])return!1;fe=K[1]}return!0},U.prototype._validateContent=function(j,X){return!(j&&(j.length!==4||j[0]<0||X.data.width<j[0]||j[1]<0||X.data.height<j[1]||j[2]<0||X.data.width<j[2]||j[3]<0||X.data.height<j[3]||j[2]<j[0]||j[3]<j[1]))},U.prototype.updateImage=function(j,X){var fe=this.images[j];X.version=fe.version+1,this.images[j]=X,this.updatedImages[j]=!0},U.prototype.removeImage=function(j){var X=this.images[j];delete this.images[j],delete this.patterns[j],X.userImage&&X.userImage.onRemove&&X.userImage.onRemove()},U.prototype.listImages=function(){return Object.keys(this.images)},U.prototype.getImages=function(j,X){var fe=!0;if(!this.isLoaded())for(var Me=0,B=j;Me<B.length;Me+=1){var K=B[Me];this.images[K]||(fe=!1)}this.isLoaded()||fe?this._notify(j,X):this.requestors.push({ids:j,callback:X})},U.prototype._notify=function(j,X){for(var fe={},Me=0,B=j;Me<B.length;Me+=1){var K=B[Me];this.images[K]||this.fire(new l.Event("styleimagemissing",{id:K}));var ie=this.images[K];ie?fe[K]={data:ie.data.clone(),pixelRatio:ie.pixelRatio,sdf:ie.sdf,version:ie.version,stretchX:ie.stretchX,stretchY:ie.stretchY,content:ie.content,hasRenderCallback:!!(ie.userImage&&ie.userImage.render)}:l.warnOnce('Image "'+K+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}X(null,fe)},U.prototype.getPixelSize=function(){var j=this.atlasImage;return{width:j.width,height:j.height}},U.prototype.getPattern=function(j){var X=this.patterns[j],fe=this.getImage(j);if(!fe)return null;if(X&&X.position.version===fe.version)return X.position;if(X)X.position.version=fe.version;else{var Me={w:fe.data.width+2,h:fe.data.height+2,x:0,y:0},B=new l.ImagePosition(Me,fe);this.patterns[j]={bin:Me,position:B}}return this._updatePatternAtlas(),this.patterns[j].position},U.prototype.bind=function(j){var X=j.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.Texture(j,this.atlasImage,X.RGBA),this.atlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE)},U.prototype._updatePatternAtlas=function(){var j=[];for(var X in this.patterns)j.push(this.patterns[X].bin);var fe=l.potpack(j),Me=fe.w,B=fe.h,K=this.atlasImage;for(var ie in K.resize({width:Me||1,height:B||1}),this.patterns){var de=this.patterns[ie].bin,ye=de.x+1,Le=de.y+1,Be=this.images[ie].data,je=Be.width,qe=Be.height;l.RGBAImage.copy(Be,K,{x:0,y:0},{x:ye,y:Le},{width:je,height:qe}),l.RGBAImage.copy(Be,K,{x:0,y:qe-1},{x:ye,y:Le-1},{width:je,height:1}),l.RGBAImage.copy(Be,K,{x:0,y:0},{x:ye,y:Le+qe},{width:je,height:1}),l.RGBAImage.copy(Be,K,{x:je-1,y:0},{x:ye-1,y:Le},{width:1,height:qe}),l.RGBAImage.copy(Be,K,{x:0,y:0},{x:ye+je,y:Le},{width:1,height:qe})}this.dirty=!0},U.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},U.prototype.dispatchRenderCallbacks=function(j){for(var X=0,fe=j;X<fe.length;X+=1){var Me=fe[X];if(!this.callbackDispatchedThisFrame[Me]){this.callbackDispatchedThisFrame[Me]=!0;var B=this.images[Me];u(B)&&this.updateImage(Me,B)}}},U}(l.Evented),c=f,x=f,g=1e20;function f(R,U,j,X,fe,Me){this.fontSize=R||24,this.buffer=U===void 0?3:U,this.cutoff=X||.25,this.fontFamily=fe||"sans-serif",this.fontWeight=Me||"normal",this.radius=j||8;var B=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=B,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(B*B),this.gridInner=new Float64Array(B*B),this.f=new Float64Array(B),this.d=new Float64Array(B),this.z=new Float64Array(B+1),this.v=new Int16Array(B),this.middle=Math.round(B/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function y(R,U,j,X,fe,Me,B){for(var K=0;K<U;K++){for(var ie=0;ie<j;ie++)X[ie]=R[ie*U+K];for(v(X,fe,Me,B,j),ie=0;ie<j;ie++)R[ie*U+K]=fe[ie]}for(ie=0;ie<j;ie++){for(K=0;K<U;K++)X[K]=R[ie*U+K];for(v(X,fe,Me,B,U),K=0;K<U;K++)R[ie*U+K]=Math.sqrt(fe[K])}}function v(R,U,j,X,fe){j[0]=0,X[0]=-g,X[1]=+g;for(var Me=1,B=0;Me<fe;Me++){for(var K=(R[Me]+Me*Me-(R[j[B]]+j[B]*j[B]))/(2*Me-2*j[B]);K<=X[B];)B--,K=(R[Me]+Me*Me-(R[j[B]]+j[B]*j[B]))/(2*Me-2*j[B]);j[++B]=Me,X[B]=K,X[B+1]=+g}for(Me=0,B=0;Me<fe;Me++){for(;X[B+1]<Me;)B++;U[Me]=(Me-j[B])*(Me-j[B])+R[j[B]]}}f.prototype.draw=function(R){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(R,this.buffer,this.middle);for(var U=this.ctx.getImageData(0,0,this.size,this.size),j=new Uint8ClampedArray(this.size*this.size),X=0;X<this.size*this.size;X++){var fe=U.data[4*X+3]/255;this.gridOuter[X]=fe===1?0:fe===0?g:Math.pow(Math.max(0,.5-fe),2),this.gridInner[X]=fe===1?g:fe===0?0:Math.pow(Math.max(0,fe-.5),2)}for(y(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),y(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),X=0;X<this.size*this.size;X++){var Me=this.gridOuter[X]-this.gridInner[X];j[X]=Math.max(0,Math.min(255,Math.round(255-255*(Me/this.radius+this.cutoff))))}return j},c.default=x;var m=function(R,U){this.requestManager=R,this.localIdeographFontFamily=U,this.entries={}};m.prototype.setURL=function(R){this.url=R},m.prototype.getGlyphs=function(R,U){var j=this,X=[];for(var fe in R)for(var Me=0,B=R[fe];Me<B.length;Me+=1){var K=B[Me];X.push({stack:fe,id:K})}l.asyncAll(X,function(ie,de){var ye=ie.stack,Le=ie.id,Be=j.entries[ye];Be||(Be=j.entries[ye]={glyphs:{},requests:{},ranges:{}});var je=Be.glyphs[Le];if(je===void 0){if(je=j._tinySDF(Be,ye,Le))return Be.glyphs[Le]=je,void de(null,{stack:ye,id:Le,glyph:je});var qe=Math.floor(Le/256);if(256*qe>65535)de(new Error("glyphs > 65535 not supported"));else if(Be.ranges[qe])de(null,{stack:ye,id:Le,glyph:je});else{var Ze=Be.requests[qe];Ze||(Ze=Be.requests[qe]=[],m.loadGlyphRange(ye,qe,j.url,j.requestManager,function(Qe,lt){if(lt){for(var ht in lt)j._doesCharSupportLocalGlyph(+ht)||(Be.glyphs[+ht]=lt[+ht]);Be.ranges[qe]=!0}for(var St=0,Lt=Ze;St<Lt.length;St+=1)(0,Lt[St])(Qe,lt);delete Be.requests[qe]})),Ze.push(function(Qe,lt){Qe?de(Qe):lt&&de(null,{stack:ye,id:Le,glyph:lt[Le]||null})})}}else de(null,{stack:ye,id:Le,glyph:je})},function(ie,de){if(ie)U(ie);else if(de){for(var ye={},Le=0,Be=de;Le<Be.length;Le+=1){var je=Be[Le],qe=je.stack,Ze=je.id,Qe=je.glyph;(ye[qe]||(ye[qe]={}))[Ze]=Qe&&{id:Qe.id,bitmap:Qe.bitmap.clone(),metrics:Qe.metrics}}U(null,ye)}})},m.prototype._doesCharSupportLocalGlyph=function(R){return!!this.localIdeographFontFamily&&(l.isChar["CJK Unified Ideographs"](R)||l.isChar["Hangul Syllables"](R)||l.isChar.Hiragana(R)||l.isChar.Katakana(R))},m.prototype._tinySDF=function(R,U,j){var X=this.localIdeographFontFamily;if(X&&this._doesCharSupportLocalGlyph(j)){var fe=R.tinySDF;if(!fe){var Me="400";/bold/i.test(U)?Me="900":/medium/i.test(U)?Me="500":/light/i.test(U)&&(Me="200"),fe=R.tinySDF=new m.TinySDF(24,3,8,.25,X,Me)}return{id:j,bitmap:new l.AlphaImage({width:30,height:30},fe.draw(String.fromCharCode(j))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},m.loadGlyphRange=function(R,U,j,X,fe){var Me=256*U,B=Me+255,K=X.transformRequest(X.normalizeGlyphsURL(j).replace("{fontstack}",R).replace("{range}",Me+"-"+B),l.ResourceType.Glyphs);l.getArrayBuffer(K,function(ie,de){if(ie)fe(ie);else if(de){for(var ye={},Le=0,Be=l.parseGlyphPBF(de);Le<Be.length;Le+=1){var je=Be[Le];ye[je.id]=je}fe(null,ye)}})},m.TinySDF=c;var _=function(){this.specification=l.styleSpec.light.position};_.prototype.possiblyEvaluate=function(R,U){return l.sphericalToCartesian(R.expression.evaluate(U))},_.prototype.interpolate=function(R,U,j){return{x:l.number(R.x,U.x,j),y:l.number(R.y,U.y,j),z:l.number(R.z,U.z,j)}};var h=new l.Properties({anchor:new l.DataConstantProperty(l.styleSpec.light.anchor),position:new _,color:new l.DataConstantProperty(l.styleSpec.light.color),intensity:new l.DataConstantProperty(l.styleSpec.light.intensity)}),A="-transition",w=function(R){function U(j){R.call(this),this._transitionable=new l.Transitionable(h),this.setLight(j),this._transitioning=this._transitionable.untransitioned()}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getLight=function(){return this._transitionable.serialize()},U.prototype.setLight=function(j,X){if(X===void 0&&(X={}),!this._validate(l.validateLight,j,X))for(var fe in j){var Me=j[fe];l.endsWith(fe,A)?this._transitionable.setTransition(fe.slice(0,-11),Me):this._transitionable.setValue(fe,Me)}},U.prototype.updateTransitions=function(j){this._transitioning=this._transitionable.transitioned(j,this._transitioning)},U.prototype.hasTransition=function(){return this._transitioning.hasTransition()},U.prototype.recalculate=function(j){this.properties=this._transitioning.possiblyEvaluate(j)},U.prototype._validate=function(j,X,fe){return(!fe||fe.validate!==!1)&&l.emitValidationErrors(this,j.call(l.validateStyle,l.extend({value:X,style:{glyphs:!0,sprite:!0},styleSpec:l.styleSpec})))},U}(l.Evented),E=function(R,U){this.width=R,this.height=U,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};E.prototype.getDash=function(R,U){var j=R.join(",")+String(U);return this.dashEntry[j]||(this.dashEntry[j]=this.addDash(R,U)),this.dashEntry[j]},E.prototype.getDashRanges=function(R,U,j){var X=[],fe=R.length%2==1?-R[R.length-1]*j:0,Me=R[0]*j,B=!0;X.push({left:fe,right:Me,isDash:B,zeroLength:R[0]===0});for(var K=R[0],ie=1;ie<R.length;ie++){B=!B;var de=R[ie];fe=K*j,Me=(K+=de)*j,X.push({left:fe,right:Me,isDash:B,zeroLength:de===0})}return X},E.prototype.addRoundDash=function(R,U,j){for(var X=U/2,fe=-j;fe<=j;fe++)for(var Me=this.nextRow+j+fe,B=this.width*Me,K=0,ie=R[K],de=0;de<this.width;de++){de/ie.right>1&&(ie=R[++K]);var ye=Math.abs(de-ie.left),Le=Math.abs(de-ie.right),Be=Math.min(ye,Le),je=void 0,qe=fe/j*(X+1);if(ie.isDash){var Ze=X-Math.abs(qe);je=Math.sqrt(Be*Be+Ze*Ze)}else je=X-Math.sqrt(Be*Be+qe*qe);this.data[B+de]=Math.max(0,Math.min(255,je+128))}},E.prototype.addRegularDash=function(R){for(var U=R.length-1;U>=0;--U){var j=R[U],X=R[U+1];j.zeroLength?R.splice(U,1):X&&X.isDash===j.isDash&&(X.left=j.left,R.splice(U,1))}var fe=R[0],Me=R[R.length-1];fe.isDash===Me.isDash&&(fe.left=Me.left-this.width,Me.right=fe.right+this.width);for(var B=this.width*this.nextRow,K=0,ie=R[K],de=0;de<this.width;de++){de/ie.right>1&&(ie=R[++K]);var ye=Math.abs(de-ie.left),Le=Math.abs(de-ie.right),Be=Math.min(ye,Le),je=ie.isDash?Be:-Be;this.data[B+de]=Math.max(0,Math.min(255,je+128))}},E.prototype.addDash=function(R,U){var j=U?7:0,X=2*j+1;if(this.nextRow+X>this.height)return l.warnOnce("LineAtlas out of space"),null;for(var fe=0,Me=0;Me<R.length;Me++)fe+=R[Me];if(fe!==0){var B=this.width/fe,K=this.getDashRanges(R,this.width,B);U?this.addRoundDash(K,B,j):this.addRegularDash(K)}var ie={y:(this.nextRow+j+.5)/this.height,height:2*j/this.height,width:fe};return this.nextRow+=X,this.dirty=!0,ie},E.prototype.bind=function(R){var U=R.gl;this.texture?(U.bindTexture(U.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,U.texSubImage2D(U.TEXTURE_2D,0,0,0,this.width,this.height,U.ALPHA,U.UNSIGNED_BYTE,this.data))):(this.texture=U.createTexture(),U.bindTexture(U.TEXTURE_2D,this.texture),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_S,U.REPEAT),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_T,U.REPEAT),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MIN_FILTER,U.LINEAR),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MAG_FILTER,U.LINEAR),U.texImage2D(U.TEXTURE_2D,0,U.ALPHA,this.width,this.height,0,U.ALPHA,U.UNSIGNED_BYTE,this.data))};var L=function R(U,j){this.workerPool=U,this.actors=[],this.currentActor=0,this.id=l.uniqueId();for(var X=this.workerPool.acquire(this.id),fe=0;fe<X.length;fe++){var Me=X[fe],B=new R.Actor(Me,j,this.id);B.name="Worker "+fe,this.actors.push(B)}};function C(R,U,j){var X=function(fe,Me){if(fe)return j(fe);if(Me){var B=l.pick(l.extend(Me,R),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Me.vector_layers&&(B.vectorLayers=Me.vector_layers,B.vectorLayerIds=B.vectorLayers.map(function(K){return K.id})),B.tiles=U.canonicalizeTileset(B,R.url),j(null,B)}};return R.url?l.getJSON(U.transformRequest(U.normalizeSourceURL(R.url),l.ResourceType.Source),X):l.browser.frame(function(){return X(null,R)})}L.prototype.broadcast=function(R,U,j){j=j||function(){},l.asyncAll(this.actors,function(X,fe){X.send(R,U,fe)},j)},L.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},L.prototype.remove=function(){this.actors.forEach(function(R){R.remove()}),this.actors=[],this.workerPool.release(this.id)},L.Actor=l.Actor;var P=function(R,U,j){this.bounds=l.LngLatBounds.convert(this.validateBounds(R)),this.minzoom=U||0,this.maxzoom=j||24};P.prototype.validateBounds=function(R){return Array.isArray(R)&&R.length===4?[Math.max(-180,R[0]),Math.max(-90,R[1]),Math.min(180,R[2]),Math.min(90,R[3])]:[-180,-90,180,90]},P.prototype.contains=function(R){var U=Math.pow(2,R.z),j=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*U),X=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*U),fe=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*U),Me=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*U);return R.x>=j&&R.x<fe&&R.y>=X&&R.y<Me};var D=function(R){function U(j,X,fe,Me){if(R.call(this),this.id=j,this.dispatcher=fe,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(X,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},X),this._collectResourceTiming=X.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Me)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.load=function(){var j=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(X,fe){j._tileJSONRequest=null,j._loaded=!0,X?j.fire(new l.ErrorEvent(X)):fe&&(l.extend(j,fe),fe.bounds&&(j.tileBounds=new P(fe.bounds,j.minzoom,j.maxzoom)),l.postTurnstileEvent(fe.tiles,j.map._requestManager._customAccessToken),l.postMapLoadEvent(fe.tiles,j.map._getMapId(),j.map._requestManager._skuToken,j.map._requestManager._customAccessToken),j.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),j.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},U.prototype.loaded=function(){return this._loaded},U.prototype.hasTile=function(j){return!this.tileBounds||this.tileBounds.contains(j.canonical)},U.prototype.onAdd=function(j){this.map=j,this.load()},U.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},U.prototype.serialize=function(){return l.extend({},this._options)},U.prototype.loadTile=function(j,X){var fe=this.map._requestManager.normalizeTileURL(j.tileID.canonical.url(this.tiles,this.scheme)),Me={request:this.map._requestManager.transformRequest(fe,l.ResourceType.Tile),uid:j.uid,tileID:j.tileID,zoom:j.tileID.overscaledZ,tileSize:this.tileSize*j.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function B(K,ie){return delete j.request,j.aborted?X(null):K&&K.status!==404?X(K):(ie&&ie.resourceTiming&&(j.resourceTiming=ie.resourceTiming),this.map._refreshExpiredTiles&&ie&&j.setExpiryData(ie),j.loadVectorData(ie,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),X(null),void(j.reloadCallback&&(this.loadTile(j,j.reloadCallback),j.reloadCallback=null)))}Me.request.collectResourceTiming=this._collectResourceTiming,j.actor&&j.state!=="expired"?j.state==="loading"?j.reloadCallback=X:j.request=j.actor.send("reloadTile",Me,B.bind(this)):(j.actor=this.dispatcher.getActor(),j.request=j.actor.send("loadTile",Me,B.bind(this)))},U.prototype.abortTile=function(j){j.request&&(j.request.cancel(),delete j.request),j.actor&&j.actor.send("abortTile",{uid:j.uid,type:this.type,source:this.id},void 0)},U.prototype.unloadTile=function(j){j.unloadVectorData(),j.actor&&j.actor.send("removeTile",{uid:j.uid,type:this.type,source:this.id},void 0)},U.prototype.hasTransition=function(){return!1},U}(l.Evented),G=function(R){function U(j,X,fe,Me){R.call(this),this.id=j,this.dispatcher=fe,this.setEventedParent(Me),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},X),l.extend(this,l.pick(X,["url","scheme","tileSize"]))}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.load=function(){var j=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(X,fe){j._tileJSONRequest=null,j._loaded=!0,X?j.fire(new l.ErrorEvent(X)):fe&&(l.extend(j,fe),fe.bounds&&(j.tileBounds=new P(fe.bounds,j.minzoom,j.maxzoom)),l.postTurnstileEvent(fe.tiles),l.postMapLoadEvent(fe.tiles,j.map._getMapId(),j.map._requestManager._skuToken),j.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),j.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},U.prototype.loaded=function(){return this._loaded},U.prototype.onAdd=function(j){this.map=j,this.load()},U.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},U.prototype.serialize=function(){return l.extend({},this._options)},U.prototype.hasTile=function(j){return!this.tileBounds||this.tileBounds.contains(j.canonical)},U.prototype.loadTile=function(j,X){var fe=this,Me=this.map._requestManager.normalizeTileURL(j.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);j.request=l.getImage(this.map._requestManager.transformRequest(Me,l.ResourceType.Tile),function(B,K){if(delete j.request,j.aborted)j.state="unloaded",X(null);else if(B)j.state="errored",X(B);else if(K){fe.map._refreshExpiredTiles&&j.setExpiryData(K),delete K.cacheControl,delete K.expires;var ie=fe.map.painter.context,de=ie.gl;j.texture=fe.map.painter.getTileTexture(K.width),j.texture?j.texture.update(K,{useMipmap:!0}):(j.texture=new l.Texture(ie,K,de.RGBA,{useMipmap:!0}),j.texture.bind(de.LINEAR,de.CLAMP_TO_EDGE,de.LINEAR_MIPMAP_NEAREST),ie.extTextureFilterAnisotropic&&de.texParameterf(de.TEXTURE_2D,ie.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ie.extTextureFilterAnisotropicMax)),j.state="loaded",l.cacheEntryPossiblyAdded(fe.dispatcher),X(null)}})},U.prototype.abortTile=function(j,X){j.request&&(j.request.cancel(),delete j.request),X()},U.prototype.unloadTile=function(j,X){j.texture&&this.map.painter.saveTileTexture(j.texture),X()},U.prototype.hasTransition=function(){return!1},U}(l.Evented),I=function(R){function U(j,X,fe,Me){R.call(this,j,X,fe,Me),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},X),this.encoding=X.encoding||"mapbox"}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},U.prototype.loadTile=function(j,X){var fe=this.map._requestManager.normalizeTileURL(j.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Me(B,K){B&&(j.state="errored",X(B)),K&&(j.dem=K,j.needsHillshadePrepare=!0,j.state="loaded",X(null))}j.request=l.getImage(this.map._requestManager.transformRequest(fe,l.ResourceType.Tile),function(B,K){if(delete j.request,j.aborted)j.state="unloaded",X(null);else if(B)j.state="errored",X(B);else if(K){this.map._refreshExpiredTiles&&j.setExpiryData(K),delete K.cacheControl,delete K.expires;var ie=l.window.ImageBitmap&&K instanceof l.window.ImageBitmap&&l.offscreenCanvasSupported()?K:l.browser.getImageData(K,1),de={uid:j.uid,coord:j.tileID,source:this.id,rawImageData:ie,encoding:this.encoding};j.actor&&j.state!=="expired"||(j.actor=this.dispatcher.getActor(),j.actor.send("loadDEMTile",de,Me.bind(this)))}}.bind(this)),j.neighboringTiles=this._getNeighboringTiles(j.tileID)},U.prototype._getNeighboringTiles=function(j){var X=j.canonical,fe=Math.pow(2,X.z),Me=(X.x-1+fe)%fe,B=X.x===0?j.wrap-1:j.wrap,K=(X.x+1+fe)%fe,ie=X.x+1===fe?j.wrap+1:j.wrap,de={};return de[new l.OverscaledTileID(j.overscaledZ,B,X.z,Me,X.y).key]={backfilled:!1},de[new l.OverscaledTileID(j.overscaledZ,ie,X.z,K,X.y).key]={backfilled:!1},X.y>0&&(de[new l.OverscaledTileID(j.overscaledZ,B,X.z,Me,X.y-1).key]={backfilled:!1},de[new l.OverscaledTileID(j.overscaledZ,j.wrap,X.z,X.x,X.y-1).key]={backfilled:!1},de[new l.OverscaledTileID(j.overscaledZ,ie,X.z,K,X.y-1).key]={backfilled:!1}),X.y+1<fe&&(de[new l.OverscaledTileID(j.overscaledZ,B,X.z,Me,X.y+1).key]={backfilled:!1},de[new l.OverscaledTileID(j.overscaledZ,j.wrap,X.z,X.x,X.y+1).key]={backfilled:!1},de[new l.OverscaledTileID(j.overscaledZ,ie,X.z,K,X.y+1).key]={backfilled:!1}),de},U.prototype.unloadTile=function(j){j.demTexture&&this.map.painter.saveTileTexture(j.demTexture),j.fbo&&(j.fbo.destroy(),delete j.fbo),j.dem&&delete j.dem,delete j.neighboringTiles,j.state="unloaded",j.actor&&j.actor.send("removeDEMTile",{uid:j.uid,source:this.id})},U}(G),H=function(R){function U(j,X,fe,Me){R.call(this),this.id=j,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=fe.getActor(),this.setEventedParent(Me),this._data=X.data,this._options=l.extend({},X),this._collectResourceTiming=X.collectResourceTiming,this._resourceTiming=[],X.maxzoom!==void 0&&(this.maxzoom=X.maxzoom),X.type&&(this.type=X.type),X.attribution&&(this.attribution=X.attribution),this.promoteId=X.promoteId;var B=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:X.cluster||!1,geojsonVtOptions:{buffer:(X.buffer!==void 0?X.buffer:128)*B,tolerance:(X.tolerance!==void 0?X.tolerance:.375)*B,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:X.lineMetrics||!1,generateId:X.generateId||!1},superclusterOptions:{maxZoom:X.clusterMaxZoom!==void 0?Math.min(X.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:l.EXTENT,radius:(X.clusterRadius||50)*B,log:!1,generateId:X.generateId||!1},clusterProperties:X.clusterProperties},X.workerOptions)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.load=function(){var j=this;this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(X){if(X)j.fire(new l.ErrorEvent(X));else{var fe={dataType:"source",sourceDataType:"metadata"};j._collectResourceTiming&&j._resourceTiming&&j._resourceTiming.length>0&&(fe.resourceTiming=j._resourceTiming,j._resourceTiming=[]),j.fire(new l.Event("data",fe))}})},U.prototype.onAdd=function(j){this.map=j,this.load()},U.prototype.setData=function(j){var X=this;return this._data=j,this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(fe){if(fe)X.fire(new l.ErrorEvent(fe));else{var Me={dataType:"source",sourceDataType:"content"};X._collectResourceTiming&&X._resourceTiming&&X._resourceTiming.length>0&&(Me.resourceTiming=X._resourceTiming,X._resourceTiming=[]),X.fire(new l.Event("data",Me))}}),this},U.prototype.getClusterExpansionZoom=function(j,X){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:j,source:this.id},X),this},U.prototype.getClusterChildren=function(j,X){return this.actor.send("geojson.getClusterChildren",{clusterId:j,source:this.id},X),this},U.prototype.getClusterLeaves=function(j,X,fe,Me){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:j,limit:X,offset:fe},Me),this},U.prototype._updateWorkerData=function(j){var X=this;this._loaded=!1;var fe=l.extend({},this.workerOptions),Me=this._data;typeof Me=="string"?(fe.request=this.map._requestManager.transformRequest(l.browser.resolveURL(Me),l.ResourceType.Source),fe.request.collectResourceTiming=this._collectResourceTiming):fe.data=JSON.stringify(Me),this.actor.send(this.type+".loadData",fe,function(B,K){X._removed||K&&K.abandoned||(X._loaded=!0,K&&K.resourceTiming&&K.resourceTiming[X.id]&&(X._resourceTiming=K.resourceTiming[X.id].slice(0)),X.actor.send(X.type+".coalesce",{source:fe.source},null),j(B))})},U.prototype.loaded=function(){return this._loaded},U.prototype.loadTile=function(j,X){var fe=this,Me=j.actor?"reloadTile":"loadTile";j.actor=this.actor;var B={type:this.type,uid:j.uid,tileID:j.tileID,zoom:j.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};j.request=this.actor.send(Me,B,function(K,ie){return delete j.request,j.unloadVectorData(),j.aborted?X(null):K?X(K):(j.loadVectorData(ie,fe.map.painter,Me==="reloadTile"),X(null))})},U.prototype.abortTile=function(j){j.request&&(j.request.cancel(),delete j.request),j.aborted=!0},U.prototype.unloadTile=function(j){j.unloadVectorData(),this.actor.send("removeTile",{uid:j.uid,type:this.type,source:this.id})},U.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},U.prototype.serialize=function(){return l.extend({},this._options,{type:this.type,data:this._data})},U.prototype.hasTransition=function(){return!1},U}(l.Evented),N=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),F=function(R){function U(j,X,fe,Me){R.call(this),this.id=j,this.dispatcher=fe,this.coordinates=X.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Me),this.options=X}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.load=function(j,X){var fe=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),function(Me,B){fe._loaded=!0,Me?fe.fire(new l.ErrorEvent(Me)):B&&(fe.image=B,j&&(fe.coordinates=j),X&&X(),fe._finishLoading())})},U.prototype.loaded=function(){return this._loaded},U.prototype.updateImage=function(j){var X=this;return this.image&&j.url?(this.options.url=j.url,this.load(j.coordinates,function(){X.texture=null}),this):this},U.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))},U.prototype.onAdd=function(j){this.map=j,this.load()},U.prototype.setCoordinates=function(j){var X=this;this.coordinates=j;var fe=j.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(B){for(var K=1/0,ie=1/0,de=-1/0,ye=-1/0,Le=0,Be=B;Le<Be.length;Le+=1){var je=Be[Le];K=Math.min(K,je.x),ie=Math.min(ie,je.y),de=Math.max(de,je.x),ye=Math.max(ye,je.y)}var qe=de-K,Ze=ye-ie,Qe=Math.max(qe,Ze),lt=Math.max(0,Math.floor(-Math.log(Qe)/Math.LN2)),ht=Math.pow(2,lt);return new l.CanonicalTileID(lt,Math.floor((K+de)/2*ht),Math.floor((ie+ye)/2*ht))}(fe),this.minzoom=this.maxzoom=this.tileID.z;var Me=fe.map(function(B){return X.tileID.getTilePoint(B)._round()});return this._boundsArray=new l.StructArrayLayout4i8,this._boundsArray.emplaceBack(Me[0].x,Me[0].y,0,0),this._boundsArray.emplaceBack(Me[1].x,Me[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(Me[3].x,Me[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(Me[2].x,Me[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this},U.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var j=this.map.painter.context,X=j.gl;for(var fe in this.boundsBuffer||(this.boundsBuffer=j.createVertexBuffer(this._boundsArray,N.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new l.Texture(j,this.image,X.RGBA),this.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE)),this.tiles){var Me=this.tiles[fe];Me.state!=="loaded"&&(Me.state="loaded",Me.texture=this.texture)}}},U.prototype.loadTile=function(j,X){this.tileID&&this.tileID.equals(j.tileID.canonical)?(this.tiles[String(j.tileID.wrap)]=j,j.buckets={},X(null)):(j.state="errored",X(null))},U.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},U.prototype.hasTransition=function(){return!1},U}(l.Evented),V=function(R){function U(j,X,fe,Me){R.call(this,j,X,fe,Me),this.roundZoom=!0,this.type="video",this.options=X}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.load=function(){var j=this;this._loaded=!1;var X=this.options;this.urls=[];for(var fe=0,Me=X.urls;fe<Me.length;fe+=1){var B=Me[fe];this.urls.push(this.map._requestManager.transformRequest(B,l.ResourceType.Source).url)}l.getVideo(this.urls,function(K,ie){j._loaded=!0,K?j.fire(new l.ErrorEvent(K)):ie&&(j.video=ie,j.video.loop=!0,j.video.addEventListener("playing",function(){j.map.triggerRepaint()}),j.map&&j.video.play(),j._finishLoading())})},U.prototype.pause=function(){this.video&&this.video.pause()},U.prototype.play=function(){this.video&&this.video.play()},U.prototype.seek=function(j){if(this.video){var X=this.video.seekable;j<X.start(0)||j>X.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+X.start(0)+" and "+X.end(0)+"-second mark."))):this.video.currentTime=j}},U.prototype.getVideo=function(){return this.video},U.prototype.onAdd=function(j){this.map||(this.map=j,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},U.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var j=this.map.painter.context,X=j.gl;for(var fe in this.boundsBuffer||(this.boundsBuffer=j.createVertexBuffer(this._boundsArray,N.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE),X.texSubImage2D(X.TEXTURE_2D,0,0,0,X.RGBA,X.UNSIGNED_BYTE,this.video)):(this.texture=new l.Texture(j,this.video,X.RGBA),this.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE)),this.tiles){var Me=this.tiles[fe];Me.state!=="loaded"&&(Me.state="loaded",Me.texture=this.texture)}}},U.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},U.prototype.hasTransition=function(){return this.video&&!this.video.paused},U}(F),q=function(R){function U(j,X,fe,Me){R.call(this,j,X,fe,Me),X.coordinates?Array.isArray(X.coordinates)&&X.coordinates.length===4&&!X.coordinates.some(function(B){return!Array.isArray(B)||B.length!==2||B.some(function(K){return typeof K!="number"})})||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+j,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+j,null,'missing required property "coordinates"'))),X.animate&&typeof X.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError("sources."+j,null,'optional "animate" property must be a boolean value'))),X.canvas?typeof X.canvas=="string"||X.canvas instanceof l.window.HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+j,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+j,null,'missing required property "canvas"'))),this.options=X,this.animate=X.animate===void 0||X.animate}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof l.window.HTMLCanvasElement?this.options.canvas:l.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},U.prototype.getCanvas=function(){return this.canvas},U.prototype.onAdd=function(j){this.map=j,this.load(),this.canvas&&this.animate&&this.play()},U.prototype.onRemove=function(){this.pause()},U.prototype.prepare=function(){var j=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,j=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,j=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var X=this.map.painter.context,fe=X.gl;for(var Me in this.boundsBuffer||(this.boundsBuffer=X.createVertexBuffer(this._boundsArray,N.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(j||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.Texture(X,this.canvas,fe.RGBA,{premultiply:!0}),this.tiles){var B=this.tiles[Me];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture)}}},U.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},U.prototype.hasTransition=function(){return this._playing},U.prototype._hasInvalidDimensions=function(){for(var j=0,X=[this.canvas.width,this.canvas.height];j<X.length;j+=1){var fe=X[j];if(isNaN(fe)||fe<=0)return!0}return!1},U}(F),te={vector:D,raster:G,"raster-dem":I,geojson:H,video:V,image:F,canvas:q};function $(R,U){var j=l.identity([]);return l.translate(j,j,[1,1,0]),l.scale(j,j,[.5*R.width,.5*R.height,1]),l.multiply(j,j,R.calculatePosMatrix(U.toUnwrapped()))}function W(R,U,j,X,fe,Me){var B=function(Ze,Qe,lt){if(Ze)for(var ht=0,St=Ze;ht<St.length;ht+=1){var Lt=Qe[St[ht]];if(Lt&&Lt.source===lt&&Lt.type==="fill-extrusion")return!0}else for(var Mt in Qe){var Ft=Qe[Mt];if(Ft.source===lt&&Ft.type==="fill-extrusion")return!0}return!1}(fe&&fe.layers,U,R.id),K=Me.maxPitchScaleFactor(),ie=R.tilesIn(X,K,B);ie.sort(Z);for(var de=[],ye=0,Le=ie;ye<Le.length;ye+=1){var Be=Le[ye];de.push({wrappedTileID:Be.tileID.wrapped().key,queryResults:Be.tile.queryRenderedFeatures(U,j,R._state,Be.queryGeometry,Be.cameraQueryGeometry,Be.scale,fe,Me,K,$(R.transform,Be.tileID))})}var je=function(Ze){for(var Qe={},lt={},ht=0,St=Ze;ht<St.length;ht+=1){var Lt=St[ht],Mt=Lt.queryResults,Ft=Lt.wrappedTileID,Et=lt[Ft]=lt[Ft]||{};for(var en in Mt)for(var Zt=Mt[en],Vt=Et[en]=Et[en]||{},pn=Qe[en]=Qe[en]||[],vn=0,zn=Zt;vn<zn.length;vn+=1){var Rn=zn[vn];Vt[Rn.featureIndex]||(Vt[Rn.featureIndex]=!0,pn.push(Rn))}}return Qe}(de);for(var qe in je)je[qe].forEach(function(Ze){var Qe=Ze.feature,lt=R.getFeatureState(Qe.layer["source-layer"],Qe.id);Qe.source=Qe.layer.source,Qe.layer["source-layer"]&&(Qe.sourceLayer=Qe.layer["source-layer"]),Qe.state=lt});return je}function Z(R,U){var j=R.tileID,X=U.tileID;return j.overscaledZ-X.overscaledZ||j.canonical.y-X.canonical.y||j.wrap-X.wrap||j.canonical.x-X.canonical.x}var J=function(R,U){this.max=R,this.onRemove=U,this.reset()};J.prototype.reset=function(){for(var R in this.data)for(var U=0,j=this.data[R];U<j.length;U+=1){var X=j[U];X.timeout&&clearTimeout(X.timeout),this.onRemove(X.value)}return this.data={},this.order=[],this},J.prototype.add=function(R,U,j){var X=this,fe=R.wrapped().key;this.data[fe]===void 0&&(this.data[fe]=[]);var Me={value:U,timeout:void 0};if(j!==void 0&&(Me.timeout=setTimeout(function(){X.remove(R,Me)},j)),this.data[fe].push(Me),this.order.push(fe),this.order.length>this.max){var B=this._getAndRemoveByKey(this.order[0]);B&&this.onRemove(B)}return this},J.prototype.has=function(R){return R.wrapped().key in this.data},J.prototype.getAndRemove=function(R){return this.has(R)?this._getAndRemoveByKey(R.wrapped().key):null},J.prototype._getAndRemoveByKey=function(R){var U=this.data[R].shift();return U.timeout&&clearTimeout(U.timeout),this.data[R].length===0&&delete this.data[R],this.order.splice(this.order.indexOf(R),1),U.value},J.prototype.getByKey=function(R){var U=this.data[R];return U?U[0].value:null},J.prototype.get=function(R){return this.has(R)?this.data[R.wrapped().key][0].value:null},J.prototype.remove=function(R,U){if(!this.has(R))return this;var j=R.wrapped().key,X=U===void 0?0:this.data[j].indexOf(U),fe=this.data[j][X];return this.data[j].splice(X,1),fe.timeout&&clearTimeout(fe.timeout),this.data[j].length===0&&delete this.data[j],this.onRemove(fe.value),this.order.splice(this.order.indexOf(j),1),this},J.prototype.setMaxSize=function(R){for(this.max=R;this.order.length>this.max;){var U=this._getAndRemoveByKey(this.order[0]);U&&this.onRemove(U)}return this},J.prototype.filter=function(R){var U=[];for(var j in this.data)for(var X=0,fe=this.data[j];X<fe.length;X+=1){var Me=fe[X];R(Me.value)||U.push(Me)}for(var B=0,K=U;B<K.length;B+=1){var ie=K[B];this.remove(ie.value.tileID,ie)}};var ee=function(R,U,j){this.context=R;var X=R.gl;this.buffer=X.createBuffer(),this.dynamicDraw=!!j,this.context.unbindVAO(),R.bindElementBuffer.set(this.buffer),X.bufferData(X.ELEMENT_ARRAY_BUFFER,U.arrayBuffer,this.dynamicDraw?X.DYNAMIC_DRAW:X.STATIC_DRAW),this.dynamicDraw||delete U.arrayBuffer};ee.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},ee.prototype.updateData=function(R){var U=this.context.gl;this.context.unbindVAO(),this.bind(),U.bufferSubData(U.ELEMENT_ARRAY_BUFFER,0,R.arrayBuffer)},ee.prototype.destroy=function(){var R=this.context.gl;this.buffer&&(R.deleteBuffer(this.buffer),delete this.buffer)};var re={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ae=function(R,U,j,X){this.length=U.length,this.attributes=j,this.itemSize=U.bytesPerElement,this.dynamicDraw=X,this.context=R;var fe=R.gl;this.buffer=fe.createBuffer(),R.bindVertexBuffer.set(this.buffer),fe.bufferData(fe.ARRAY_BUFFER,U.arrayBuffer,this.dynamicDraw?fe.DYNAMIC_DRAW:fe.STATIC_DRAW),this.dynamicDraw||delete U.arrayBuffer};ae.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ae.prototype.updateData=function(R){var U=this.context.gl;this.bind(),U.bufferSubData(U.ARRAY_BUFFER,0,R.arrayBuffer)},ae.prototype.enableAttributes=function(R,U){for(var j=0;j<this.attributes.length;j++){var X=this.attributes[j],fe=U.attributes[X.name];fe!==void 0&&R.enableVertexAttribArray(fe)}},ae.prototype.setVertexAttribPointers=function(R,U,j){for(var X=0;X<this.attributes.length;X++){var fe=this.attributes[X],Me=U.attributes[fe.name];Me!==void 0&&R.vertexAttribPointer(Me,fe.components,R[re[fe.type]],!1,this.itemSize,fe.offset+this.itemSize*(j||0))}},ae.prototype.destroy=function(){var R=this.context.gl;this.buffer&&(R.deleteBuffer(this.buffer),delete this.buffer)};var oe=function(R){this.gl=R.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};oe.prototype.get=function(){return this.current},oe.prototype.set=function(R){},oe.prototype.getDefault=function(){return this.default},oe.prototype.setDefault=function(){this.set(this.default)};var ce=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return l.Color.transparent},U.prototype.set=function(j){var X=this.current;(j.r!==X.r||j.g!==X.g||j.b!==X.b||j.a!==X.a||this.dirty)&&(this.gl.clearColor(j.r,j.g,j.b,j.a),this.current=j,this.dirty=!1)},U}(oe),pe=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return 1},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.clearDepth(j),this.current=j,this.dirty=!1)},U}(oe),ve=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return 0},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.clearStencil(j),this.current=j,this.dirty=!1)},U}(oe),we=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return[!0,!0,!0,!0]},U.prototype.set=function(j){var X=this.current;(j[0]!==X[0]||j[1]!==X[1]||j[2]!==X[2]||j[3]!==X[3]||this.dirty)&&(this.gl.colorMask(j[0],j[1],j[2],j[3]),this.current=j,this.dirty=!1)},U}(oe),xe=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return!0},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.depthMask(j),this.current=j,this.dirty=!1)},U}(oe),ge=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return 255},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.stencilMask(j),this.current=j,this.dirty=!1)},U}(oe),Oe=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},U.prototype.set=function(j){var X=this.current;(j.func!==X.func||j.ref!==X.ref||j.mask!==X.mask||this.dirty)&&(this.gl.stencilFunc(j.func,j.ref,j.mask),this.current=j,this.dirty=!1)},U}(oe),Ae=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){var j=this.gl;return[j.KEEP,j.KEEP,j.KEEP]},U.prototype.set=function(j){var X=this.current;(j[0]!==X[0]||j[1]!==X[1]||j[2]!==X[2]||this.dirty)&&(this.gl.stencilOp(j[0],j[1],j[2]),this.current=j,this.dirty=!1)},U}(oe),Te=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return!1},U.prototype.set=function(j){if(j!==this.current||this.dirty){var X=this.gl;j?X.enable(X.STENCIL_TEST):X.disable(X.STENCIL_TEST),this.current=j,this.dirty=!1}},U}(oe),se=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return[0,1]},U.prototype.set=function(j){var X=this.current;(j[0]!==X[0]||j[1]!==X[1]||this.dirty)&&(this.gl.depthRange(j[0],j[1]),this.current=j,this.dirty=!1)},U}(oe),le=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return!1},U.prototype.set=function(j){if(j!==this.current||this.dirty){var X=this.gl;j?X.enable(X.DEPTH_TEST):X.disable(X.DEPTH_TEST),this.current=j,this.dirty=!1}},U}(oe),ne=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return this.gl.LESS},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.depthFunc(j),this.current=j,this.dirty=!1)},U}(oe),me=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return!1},U.prototype.set=function(j){if(j!==this.current||this.dirty){var X=this.gl;j?X.enable(X.BLEND):X.disable(X.BLEND),this.current=j,this.dirty=!1}},U}(oe),Ee=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){var j=this.gl;return[j.ONE,j.ZERO]},U.prototype.set=function(j){var X=this.current;(j[0]!==X[0]||j[1]!==X[1]||this.dirty)&&(this.gl.blendFunc(j[0],j[1]),this.current=j,this.dirty=!1)},U}(oe),be=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return l.Color.transparent},U.prototype.set=function(j){var X=this.current;(j.r!==X.r||j.g!==X.g||j.b!==X.b||j.a!==X.a||this.dirty)&&(this.gl.blendColor(j.r,j.g,j.b,j.a),this.current=j,this.dirty=!1)},U}(oe),De=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return this.gl.FUNC_ADD},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.blendEquation(j),this.current=j,this.dirty=!1)},U}(oe),Ue=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return!1},U.prototype.set=function(j){if(j!==this.current||this.dirty){var X=this.gl;j?X.enable(X.CULL_FACE):X.disable(X.CULL_FACE),this.current=j,this.dirty=!1}},U}(oe),he=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return this.gl.BACK},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.cullFace(j),this.current=j,this.dirty=!1)},U}(oe),ke=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return this.gl.CCW},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.frontFace(j),this.current=j,this.dirty=!1)},U}(oe),_e=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return null},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.useProgram(j),this.current=j,this.dirty=!1)},U}(oe),Ce=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return this.gl.TEXTURE0},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.activeTexture(j),this.current=j,this.dirty=!1)},U}(oe),Fe=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){var j=this.gl;return[0,0,j.drawingBufferWidth,j.drawingBufferHeight]},U.prototype.set=function(j){var X=this.current;(j[0]!==X[0]||j[1]!==X[1]||j[2]!==X[2]||j[3]!==X[3]||this.dirty)&&(this.gl.viewport(j[0],j[1],j[2],j[3]),this.current=j,this.dirty=!1)},U}(oe),Re=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return null},U.prototype.set=function(j){if(j!==this.current||this.dirty){var X=this.gl;X.bindFramebuffer(X.FRAMEBUFFER,j),this.current=j,this.dirty=!1}},U}(oe),He=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return null},U.prototype.set=function(j){if(j!==this.current||this.dirty){var X=this.gl;X.bindRenderbuffer(X.RENDERBUFFER,j),this.current=j,this.dirty=!1}},U}(oe),Ge=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return null},U.prototype.set=function(j){if(j!==this.current||this.dirty){var X=this.gl;X.bindTexture(X.TEXTURE_2D,j),this.current=j,this.dirty=!1}},U}(oe),$e=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return null},U.prototype.set=function(j){if(j!==this.current||this.dirty){var X=this.gl;X.bindBuffer(X.ARRAY_BUFFER,j),this.current=j,this.dirty=!1}},U}(oe),st=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return null},U.prototype.set=function(j){var X=this.gl;X.bindBuffer(X.ELEMENT_ARRAY_BUFFER,j),this.current=j,this.dirty=!1},U}(oe),Ke=function(R){function U(j){R.call(this,j),this.vao=j.extVertexArrayObject}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return null},U.prototype.set=function(j){this.vao&&(j!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(j),this.current=j,this.dirty=!1)},U}(oe),gt=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return 4},U.prototype.set=function(j){if(j!==this.current||this.dirty){var X=this.gl;X.pixelStorei(X.UNPACK_ALIGNMENT,j),this.current=j,this.dirty=!1}},U}(oe),mt=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return!1},U.prototype.set=function(j){if(j!==this.current||this.dirty){var X=this.gl;X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j),this.current=j,this.dirty=!1}},U}(oe),at=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return!1},U.prototype.set=function(j){if(j!==this.current||this.dirty){var X=this.gl;X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,j),this.current=j,this.dirty=!1}},U}(oe),rt=function(R){function U(j,X){R.call(this,j),this.context=j,this.parent=X}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return null},U}(oe),xt=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.setDirty=function(){this.dirty=!0},U.prototype.set=function(j){if(j!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var X=this.gl;X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,j,0),this.current=j,this.dirty=!1}},U}(rt),Tt=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.set=function(j){if(j!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var X=this.gl;X.framebufferRenderbuffer(X.FRAMEBUFFER,X.DEPTH_ATTACHMENT,X.RENDERBUFFER,j),this.current=j,this.dirty=!1}},U}(rt),wt=function(R,U,j,X){this.context=R,this.width=U,this.height=j;var fe=R.gl,Me=this.framebuffer=fe.createFramebuffer();this.colorAttachment=new xt(R,Me),X&&(this.depthAttachment=new Tt(R,Me))};wt.prototype.destroy=function(){var R=this.context.gl,U=this.colorAttachment.get();if(U&&R.deleteTexture(U),this.depthAttachment){var j=this.depthAttachment.get();j&&R.deleteRenderbuffer(j)}R.deleteFramebuffer(this.framebuffer)};var Ot=function(R,U,j){this.func=R,this.mask=U,this.range=j};Ot.ReadOnly=!1,Ot.ReadWrite=!0,Ot.disabled=new Ot(519,Ot.ReadOnly,[0,1]);var Ct=7680,Ye=function(R,U,j,X,fe,Me){this.test=R,this.ref=U,this.mask=j,this.fail=X,this.depthFail=fe,this.pass=Me};Ye.disabled=new Ye({func:519,mask:0},0,0,Ct,Ct,Ct);var Xe=function(R,U,j){this.blendFunction=R,this.blendColor=U,this.mask=j};Xe.Replace=[1,0],Xe.disabled=new Xe(Xe.Replace,l.Color.transparent,[!1,!1,!1,!1]),Xe.unblended=new Xe(Xe.Replace,l.Color.transparent,[!0,!0,!0,!0]),Xe.alphaBlended=new Xe([1,771],l.Color.transparent,[!0,!0,!0,!0]);var Ve=function(R,U,j){this.enable=R,this.mode=U,this.frontFace=j};Ve.disabled=new Ve(!1,1029,2305),Ve.backCCW=new Ve(!0,1029,2305);var We=function(R){this.gl=R,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ce(this),this.clearDepth=new pe(this),this.clearStencil=new ve(this),this.colorMask=new we(this),this.depthMask=new xe(this),this.stencilMask=new ge(this),this.stencilFunc=new Oe(this),this.stencilOp=new Ae(this),this.stencilTest=new Te(this),this.depthRange=new se(this),this.depthTest=new le(this),this.depthFunc=new ne(this),this.blend=new me(this),this.blendFunc=new Ee(this),this.blendColor=new be(this),this.blendEquation=new De(this),this.cullFace=new Ue(this),this.cullFaceSide=new he(this),this.frontFace=new ke(this),this.program=new _e(this),this.activeTexture=new Ce(this),this.viewport=new Fe(this),this.bindFramebuffer=new Re(this),this.bindRenderbuffer=new He(this),this.bindTexture=new Ge(this),this.bindVertexBuffer=new $e(this),this.bindElementBuffer=new st(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ke(this),this.pixelStoreUnpack=new gt(this),this.pixelStoreUnpackPremultiplyAlpha=new mt(this),this.pixelStoreUnpackFlipY=new at(this),this.extTextureFilterAnisotropic=R.getExtension("EXT_texture_filter_anisotropic")||R.getExtension("MOZ_EXT_texture_filter_anisotropic")||R.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=R.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=R.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(R.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=R.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=R.getExtension("EXT_disjoint_timer_query")};We.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},We.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},We.prototype.createIndexBuffer=function(R,U){return new ee(this,R,U)},We.prototype.createVertexBuffer=function(R,U,j){return new ae(this,R,U,j)},We.prototype.createRenderbuffer=function(R,U,j){var X=this.gl,fe=X.createRenderbuffer();return this.bindRenderbuffer.set(fe),X.renderbufferStorage(X.RENDERBUFFER,R,U,j),this.bindRenderbuffer.set(null),fe},We.prototype.createFramebuffer=function(R,U,j){return new wt(this,R,U,j)},We.prototype.clear=function(R){var U=R.color,j=R.depth,X=this.gl,fe=0;U&&(fe|=X.COLOR_BUFFER_BIT,this.clearColor.set(U),this.colorMask.set([!0,!0,!0,!0])),j!==void 0&&(fe|=X.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(j),this.depthMask.set(!0)),X.clear(fe)},We.prototype.setCullFace=function(R){R.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(R.mode),this.frontFace.set(R.frontFace))},We.prototype.setDepthMode=function(R){R.func!==this.gl.ALWAYS||R.mask?(this.depthTest.set(!0),this.depthFunc.set(R.func),this.depthMask.set(R.mask),this.depthRange.set(R.range)):this.depthTest.set(!1)},We.prototype.setStencilMode=function(R){R.test.func!==this.gl.ALWAYS||R.mask?(this.stencilTest.set(!0),this.stencilMask.set(R.mask),this.stencilOp.set([R.fail,R.depthFail,R.pass]),this.stencilFunc.set({func:R.test.func,ref:R.ref,mask:R.test.mask})):this.stencilTest.set(!1)},We.prototype.setColorMode=function(R){l.deepEqual(R.blendFunction,Xe.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(R.blendFunction),this.blendColor.set(R.blendColor)),this.colorMask.set(R.mask)},We.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var nt=function(R){function U(j,X,fe){var Me=this;R.call(this),this.id=j,this.dispatcher=fe,this.on("data",function(B){B.dataType==="source"&&B.sourceDataType==="metadata"&&(Me._sourceLoaded=!0),Me._sourceLoaded&&!Me._paused&&B.dataType==="source"&&B.sourceDataType==="content"&&(Me.reload(),Me.transform&&Me.update(Me.transform))}),this.on("error",function(){Me._sourceErrored=!0}),this._source=function(B,K,ie,de){var ye=new te[K.type](B,K,ie,de);if(ye.id!==B)throw new Error("Expected Source id to be "+B+" instead of "+ye.id);return l.bindAll(["load","abort","unload","serialize","prepare"],ye),ye}(j,X,fe,this),this._tiles={},this._cache=new J(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new l.SourceFeatureState}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.onAdd=function(j){this.map=j,this._maxTileCacheSize=j?j._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(j)},U.prototype.onRemove=function(j){this._source&&this._source.onRemove&&this._source.onRemove(j)},U.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var j in this._tiles){var X=this._tiles[j];if(X.state!=="loaded"&&X.state!=="errored")return!1}return!0},U.prototype.getSource=function(){return this._source},U.prototype.pause=function(){this._paused=!0},U.prototype.resume=function(){if(this._paused){var j=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,j&&this.reload(),this.transform&&this.update(this.transform)}},U.prototype._loadTile=function(j,X){return this._source.loadTile(j,X)},U.prototype._unloadTile=function(j){if(this._source.unloadTile)return this._source.unloadTile(j,function(){})},U.prototype._abortTile=function(j){if(this._source.abortTile)return this._source.abortTile(j,function(){})},U.prototype.serialize=function(){return this._source.serialize()},U.prototype.prepare=function(j){for(var X in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var fe=this._tiles[X];fe.upload(j),fe.prepare(this.map.style.imageManager)}},U.prototype.getIds=function(){return l.values(this._tiles).map(function(j){return j.tileID}).sort(ot).map(function(j){return j.key})},U.prototype.getRenderableIds=function(j){var X=this,fe=[];for(var Me in this._tiles)this._isIdRenderable(Me,j)&&fe.push(this._tiles[Me]);return j?fe.sort(function(B,K){var ie=B.tileID,de=K.tileID,ye=new l.Point(ie.canonical.x,ie.canonical.y)._rotate(X.transform.angle),Le=new l.Point(de.canonical.x,de.canonical.y)._rotate(X.transform.angle);return ie.overscaledZ-de.overscaledZ||Le.y-ye.y||Le.x-ye.x}).map(function(B){return B.tileID.key}):fe.map(function(B){return B.tileID}).sort(ot).map(function(B){return B.key})},U.prototype.hasRenderableParent=function(j){var X=this.findLoadedParent(j,0);return!!X&&this._isIdRenderable(X.tileID.key)},U.prototype._isIdRenderable=function(j,X){return this._tiles[j]&&this._tiles[j].hasData()&&!this._coveredTiles[j]&&(X||!this._tiles[j].holdingForFade())},U.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var j in this._cache.reset(),this._tiles)this._tiles[j].state!=="errored"&&this._reloadTile(j,"reloading")},U.prototype._reloadTile=function(j,X){var fe=this._tiles[j];fe&&(fe.state!=="loading"&&(fe.state=X),this._loadTile(fe,this._tileLoaded.bind(this,fe,j,X)))},U.prototype._tileLoaded=function(j,X,fe,Me){if(Me)return j.state="errored",void(Me.status!==404?this._source.fire(new l.ErrorEvent(Me,{tile:j})):this.update(this.transform));j.timeAdded=l.browser.now(),fe==="expired"&&(j.refreshedUponExpiration=!0),this._setTileReloadTimer(X,j),this.getSource().type==="raster-dem"&&j.dem&&this._backfillDEM(j),this._state.initializeTileState(j,this.map?this.map.painter:null),this._source.fire(new l.Event("data",{dataType:"source",tile:j,coord:j.tileID}))},U.prototype._backfillDEM=function(j){for(var X=this.getRenderableIds(),fe=0;fe<X.length;fe++){var Me=X[fe];if(j.neighboringTiles&&j.neighboringTiles[Me]){var B=this.getTileByID(Me);K(j,B),K(B,j)}}function K(ie,de){ie.needsHillshadePrepare=!0;var ye=de.tileID.canonical.x-ie.tileID.canonical.x,Le=de.tileID.canonical.y-ie.tileID.canonical.y,Be=Math.pow(2,ie.tileID.canonical.z),je=de.tileID.key;ye===0&&Le===0||Math.abs(Le)>1||(Math.abs(ye)>1&&(Math.abs(ye+Be)===1?ye+=Be:Math.abs(ye-Be)===1&&(ye-=Be)),de.dem&&ie.dem&&(ie.dem.backfillBorder(de.dem,ye,Le),ie.neighboringTiles&&ie.neighboringTiles[je]&&(ie.neighboringTiles[je].backfilled=!0)))}},U.prototype.getTile=function(j){return this.getTileByID(j.key)},U.prototype.getTileByID=function(j){return this._tiles[j]},U.prototype._retainLoadedChildren=function(j,X,fe,Me){for(var B in this._tiles){var K=this._tiles[B];if(!(Me[B]||!K.hasData()||K.tileID.overscaledZ<=X||K.tileID.overscaledZ>fe)){for(var ie=K.tileID;K&&K.tileID.overscaledZ>X+1;){var de=K.tileID.scaledTo(K.tileID.overscaledZ-1);(K=this._tiles[de.key])&&K.hasData()&&(ie=de)}for(var ye=ie;ye.overscaledZ>X;)if(j[(ye=ye.scaledTo(ye.overscaledZ-1)).key]){Me[ie.key]=ie;break}}}},U.prototype.findLoadedParent=function(j,X){if(j.key in this._loadedParentTiles){var fe=this._loadedParentTiles[j.key];return fe&&fe.tileID.overscaledZ>=X?fe:null}for(var Me=j.overscaledZ-1;Me>=X;Me--){var B=j.scaledTo(Me),K=this._getLoadedTile(B);if(K)return K}},U.prototype._getLoadedTile=function(j){var X=this._tiles[j.key];return X&&X.hasData()?X:this._cache.getByKey(j.wrapped().key)},U.prototype.updateCacheSize=function(j){var X=(Math.ceil(j.width/this._source.tileSize)+1)*(Math.ceil(j.height/this._source.tileSize)+1),fe=Math.floor(5*X),Me=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,fe):fe;this._cache.setMaxSize(Me)},U.prototype.handleWrapJump=function(j){var X=(j-(this._prevLng===void 0?j:this._prevLng))/360,fe=Math.round(X);if(this._prevLng=j,fe){var Me={};for(var B in this._tiles){var K=this._tiles[B];K.tileID=K.tileID.unwrapTo(K.tileID.wrap+fe),Me[K.tileID.key]=K}for(var ie in this._tiles=Me,this._timers)clearTimeout(this._timers[ie]),delete this._timers[ie];for(var de in this._tiles){var ye=this._tiles[de];this._setTileReloadTimer(de,ye)}}},U.prototype.update=function(j){var X=this;if(this.transform=j,this._sourceLoaded&&!this._paused){var fe;this.updateCacheSize(j),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?fe=j.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Et){return new l.OverscaledTileID(Et.canonical.z,Et.wrap,Et.canonical.z,Et.canonical.x,Et.canonical.y)}):(fe=j.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(fe=fe.filter(function(Et){return X._source.hasTile(Et)}))):fe=[];var Me=j.coveringZoomLevel(this._source),B=Math.max(Me-U.maxOverzooming,this._source.minzoom),K=Math.max(Me+U.maxUnderzooming,this._source.minzoom),ie=this._updateRetainedTiles(fe,Me);if(Ie(this._source.type)){for(var de={},ye={},Le=0,Be=Object.keys(ie);Le<Be.length;Le+=1){var je=Be[Le],qe=ie[je],Ze=this._tiles[je];if(Ze&&!(Ze.fadeEndTime&&Ze.fadeEndTime<=l.browser.now())){var Qe=this.findLoadedParent(qe,B);Qe&&(this._addTile(Qe.tileID),de[Qe.tileID.key]=Qe.tileID),ye[je]=qe}}for(var lt in this._retainLoadedChildren(ye,Me,K,ie),de)ie[lt]||(this._coveredTiles[lt]=!0,ie[lt]=de[lt])}for(var ht in ie)this._tiles[ht].clearFadeHold();for(var St=0,Lt=l.keysDifference(this._tiles,ie);St<Lt.length;St+=1){var Mt=Lt[St],Ft=this._tiles[Mt];Ft.hasSymbolBuckets&&!Ft.holdingForFade()?Ft.setHoldDuration(this.map._fadeDuration):Ft.hasSymbolBuckets&&!Ft.symbolFadeFinished()||this._removeTile(Mt)}this._updateLoadedParentTileCache()}},U.prototype.releaseSymbolFadeTiles=function(){for(var j in this._tiles)this._tiles[j].holdingForFade()&&this._removeTile(j)},U.prototype._updateRetainedTiles=function(j,X){for(var fe={},Me={},B=Math.max(X-U.maxOverzooming,this._source.minzoom),K=Math.max(X+U.maxUnderzooming,this._source.minzoom),ie={},de=0,ye=j;de<ye.length;de+=1){var Le=ye[de],Be=this._addTile(Le);fe[Le.key]=Le,Be.hasData()||X<this._source.maxzoom&&(ie[Le.key]=Le)}this._retainLoadedChildren(ie,X,K,fe);for(var je=0,qe=j;je<qe.length;je+=1){var Ze=qe[je],Qe=this._tiles[Ze.key];if(!Qe.hasData()){if(X+1>this._source.maxzoom){var lt=Ze.children(this._source.maxzoom)[0],ht=this.getTile(lt);if(ht&&ht.hasData()){fe[lt.key]=lt;continue}}else{var St=Ze.children(this._source.maxzoom);if(fe[St[0].key]&&fe[St[1].key]&&fe[St[2].key]&&fe[St[3].key])continue}for(var Lt=Qe.wasRequested(),Mt=Ze.overscaledZ-1;Mt>=B;--Mt){var Ft=Ze.scaledTo(Mt);if(Me[Ft.key]||(Me[Ft.key]=!0,!(Qe=this.getTile(Ft))&&Lt&&(Qe=this._addTile(Ft)),Qe&&(fe[Ft.key]=Ft,Lt=Qe.wasRequested(),Qe.hasData())))break}}}return fe},U.prototype._updateLoadedParentTileCache=function(){for(var j in this._loadedParentTiles={},this._tiles){for(var X=[],fe=void 0,Me=this._tiles[j].tileID;Me.overscaledZ>0;){if(Me.key in this._loadedParentTiles){fe=this._loadedParentTiles[Me.key];break}X.push(Me.key);var B=Me.scaledTo(Me.overscaledZ-1);if(fe=this._getLoadedTile(B))break;Me=B}for(var K=0,ie=X;K<ie.length;K+=1){var de=ie[K];this._loadedParentTiles[de]=fe}}},U.prototype._addTile=function(j){var X=this._tiles[j.key];if(X)return X;(X=this._cache.getAndRemove(j))&&(this._setTileReloadTimer(j.key,X),X.tileID=j,this._state.initializeTileState(X,this.map?this.map.painter:null),this._cacheTimers[j.key]&&(clearTimeout(this._cacheTimers[j.key]),delete this._cacheTimers[j.key],this._setTileReloadTimer(j.key,X)));var fe=!!X;return fe||(X=new l.Tile(j,this._source.tileSize*j.overscaleFactor()),this._loadTile(X,this._tileLoaded.bind(this,X,j.key,X.state))),X?(X.uses++,this._tiles[j.key]=X,fe||this._source.fire(new l.Event("dataloading",{tile:X,coord:X.tileID,dataType:"source"})),X):null},U.prototype._setTileReloadTimer=function(j,X){var fe=this;j in this._timers&&(clearTimeout(this._timers[j]),delete this._timers[j]);var Me=X.getExpiryTimeout();Me&&(this._timers[j]=setTimeout(function(){fe._reloadTile(j,"expired"),delete fe._timers[j]},Me))},U.prototype._removeTile=function(j){var X=this._tiles[j];X&&(X.uses--,delete this._tiles[j],this._timers[j]&&(clearTimeout(this._timers[j]),delete this._timers[j]),X.uses>0||(X.hasData()&&X.state!=="reloading"?this._cache.add(X.tileID,X,X.getExpiryTimeout()):(X.aborted=!0,this._abortTile(X),this._unloadTile(X))))},U.prototype.clearTiles=function(){for(var j in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(j);this._cache.reset()},U.prototype.tilesIn=function(j,X,fe){var Me=this,B=[],K=this.transform;if(!K)return B;for(var ie=fe?K.getCameraQueryGeometry(j):j,de=j.map(function(Mt){return K.pointCoordinate(Mt)}),ye=ie.map(function(Mt){return K.pointCoordinate(Mt)}),Le=this.getIds(),Be=1/0,je=1/0,qe=-1/0,Ze=-1/0,Qe=0,lt=ye;Qe<lt.length;Qe+=1){var ht=lt[Qe];Be=Math.min(Be,ht.x),je=Math.min(je,ht.y),qe=Math.max(qe,ht.x),Ze=Math.max(Ze,ht.y)}for(var St=function(Mt){var Ft=Me._tiles[Le[Mt]];if(!Ft.holdingForFade()){var Et=Ft.tileID,en=Math.pow(2,K.zoom-Ft.tileID.overscaledZ),Zt=X*Ft.queryPadding*l.EXTENT/Ft.tileSize/en,Vt=[Et.getTilePoint(new l.MercatorCoordinate(Be,je)),Et.getTilePoint(new l.MercatorCoordinate(qe,Ze))];if(Vt[0].x-Zt<l.EXTENT&&Vt[0].y-Zt<l.EXTENT&&Vt[1].x+Zt>=0&&Vt[1].y+Zt>=0){var pn=de.map(function(zn){return Et.getTilePoint(zn)}),vn=ye.map(function(zn){return Et.getTilePoint(zn)});B.push({tile:Ft,tileID:Et,queryGeometry:pn,cameraQueryGeometry:vn,scale:en})}}},Lt=0;Lt<Le.length;Lt++)St(Lt);return B},U.prototype.getVisibleCoordinates=function(j){for(var X=this,fe=this.getRenderableIds(j).map(function(ie){return X._tiles[ie].tileID}),Me=0,B=fe;Me<B.length;Me+=1){var K=B[Me];K.posMatrix=this.transform.calculatePosMatrix(K.toUnwrapped())}return fe},U.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ie(this._source.type))for(var j in this._tiles){var X=this._tiles[j];if(X.fadeEndTime!==void 0&&X.fadeEndTime>=l.browser.now())return!0}return!1},U.prototype.setFeatureState=function(j,X,fe){j=j||"_geojsonTileLayer",this._state.updateState(j,X,fe)},U.prototype.removeFeatureState=function(j,X,fe){j=j||"_geojsonTileLayer",this._state.removeFeatureState(j,X,fe)},U.prototype.getFeatureState=function(j,X){return j=j||"_geojsonTileLayer",this._state.getState(j,X)},U.prototype.setDependencies=function(j,X,fe){var Me=this._tiles[j];Me&&Me.setDependencies(X,fe)},U.prototype.reloadTilesForDependencies=function(j,X){for(var fe in this._tiles)this._tiles[fe].hasDependency(j,X)&&this._reloadTile(fe,"reloading");this._cache.filter(function(Me){return!Me.hasDependency(j,X)})},U}(l.Evented);function ot(R,U){var j=Math.abs(2*R.wrap)-+(R.wrap<0),X=Math.abs(2*U.wrap)-+(U.wrap<0);return R.overscaledZ-U.overscaledZ||X-j||U.canonical.y-R.canonical.y||U.canonical.x-R.canonical.x}function Ie(R){return R==="raster"||R==="image"||R==="video"}function ze(){return new l.window.Worker(ho.workerUrl)}nt.maxOverzooming=10,nt.maxUnderzooming=3;var et="mapboxgl_preloaded_worker_pool",tt=function(){this.active={}};tt.prototype.acquire=function(R){if(!this.workers)for(this.workers=[];this.workers.length<tt.workerCount;)this.workers.push(new ze);return this.active[R]=!0,this.workers.slice()},tt.prototype.release=function(R){delete this.active[R],this.numActive()===0&&(this.workers.forEach(function(U){U.terminate()}),this.workers=null)},tt.prototype.isPreloaded=function(){return!!this.active[et]},tt.prototype.numActive=function(){return Object.keys(this.active).length};var dt,pt=Math.floor(l.browser.hardwareConcurrency/2);function vt(){return dt||(dt=new tt),dt}function ct(R,U){var j={};for(var X in R)X!=="ref"&&(j[X]=R[X]);return l.refProperties.forEach(function(fe){fe in U&&(j[fe]=U[fe])}),j}function kt(R){R=R.slice();for(var U=Object.create(null),j=0;j<R.length;j++)U[R[j].id]=R[j];for(var X=0;X<R.length;X++)"ref"in R[X]&&(R[X]=ct(R[X],U[R[X].ref]));return R}tt.workerCount=Math.max(Math.min(pt,6),1);var ut={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ft(R,U,j){j.push({command:ut.addSource,args:[R,U[R]]})}function bt(R,U,j){U.push({command:ut.removeSource,args:[R]}),j[R]=!0}function It(R,U,j,X){bt(R,j,X),ft(R,U,j)}function zt(R,U,j){var X;for(X in R[j])if(R[j].hasOwnProperty(X)&&X!=="data"&&!l.deepEqual(R[j][X],U[j][X]))return!1;for(X in U[j])if(U[j].hasOwnProperty(X)&&X!=="data"&&!l.deepEqual(R[j][X],U[j][X]))return!1;return!0}function Rt(R,U,j,X,fe,Me){var B;for(B in U=U||{},R=R||{})R.hasOwnProperty(B)&&(l.deepEqual(R[B],U[B])||j.push({command:Me,args:[X,B,U[B],fe]}));for(B in U)U.hasOwnProperty(B)&&!R.hasOwnProperty(B)&&(l.deepEqual(R[B],U[B])||j.push({command:Me,args:[X,B,U[B],fe]}))}function Jt(R){return R.id}function qt(R,U){return R[U.id]=U,R}function Wt(R,U){if(!R)return[{command:ut.setStyle,args:[U]}];var j=[];try{if(!l.deepEqual(R.version,U.version))return[{command:ut.setStyle,args:[U]}];l.deepEqual(R.center,U.center)||j.push({command:ut.setCenter,args:[U.center]}),l.deepEqual(R.zoom,U.zoom)||j.push({command:ut.setZoom,args:[U.zoom]}),l.deepEqual(R.bearing,U.bearing)||j.push({command:ut.setBearing,args:[U.bearing]}),l.deepEqual(R.pitch,U.pitch)||j.push({command:ut.setPitch,args:[U.pitch]}),l.deepEqual(R.sprite,U.sprite)||j.push({command:ut.setSprite,args:[U.sprite]}),l.deepEqual(R.glyphs,U.glyphs)||j.push({command:ut.setGlyphs,args:[U.glyphs]}),l.deepEqual(R.transition,U.transition)||j.push({command:ut.setTransition,args:[U.transition]}),l.deepEqual(R.light,U.light)||j.push({command:ut.setLight,args:[U.light]});var X={},fe=[];(function(B,K,ie,de){var ye;for(ye in K=K||{},B=B||{})B.hasOwnProperty(ye)&&(K.hasOwnProperty(ye)||bt(ye,ie,de));for(ye in K)K.hasOwnProperty(ye)&&(B.hasOwnProperty(ye)?l.deepEqual(B[ye],K[ye])||(B[ye].type==="geojson"&&K[ye].type==="geojson"&&zt(B,K,ye)?ie.push({command:ut.setGeoJSONSourceData,args:[ye,K[ye].data]}):It(ye,K,ie,de)):ft(ye,K,ie))})(R.sources,U.sources,fe,X);var Me=[];R.layers&&R.layers.forEach(function(B){X[B.source]?j.push({command:ut.removeLayer,args:[B.id]}):Me.push(B)}),j=j.concat(fe),function(B,K,ie){K=K||[];var de,ye,Le,Be,je,qe,Ze,Qe=(B=B||[]).map(Jt),lt=K.map(Jt),ht=B.reduce(qt,{}),St=K.reduce(qt,{}),Lt=Qe.slice(),Mt=Object.create(null);for(de=0,ye=0;de<Qe.length;de++)Le=Qe[de],St.hasOwnProperty(Le)?ye++:(ie.push({command:ut.removeLayer,args:[Le]}),Lt.splice(Lt.indexOf(Le,ye),1));for(de=0,ye=0;de<lt.length;de++)Le=lt[lt.length-1-de],Lt[Lt.length-1-de]!==Le&&(ht.hasOwnProperty(Le)?(ie.push({command:ut.removeLayer,args:[Le]}),Lt.splice(Lt.lastIndexOf(Le,Lt.length-ye),1)):ye++,qe=Lt[Lt.length-de],ie.push({command:ut.addLayer,args:[St[Le],qe]}),Lt.splice(Lt.length-de,0,Le),Mt[Le]=!0);for(de=0;de<lt.length;de++)if(Be=ht[Le=lt[de]],je=St[Le],!Mt[Le]&&!l.deepEqual(Be,je))if(l.deepEqual(Be.source,je.source)&&l.deepEqual(Be["source-layer"],je["source-layer"])&&l.deepEqual(Be.type,je.type)){for(Ze in Rt(Be.layout,je.layout,ie,Le,null,ut.setLayoutProperty),Rt(Be.paint,je.paint,ie,Le,null,ut.setPaintProperty),l.deepEqual(Be.filter,je.filter)||ie.push({command:ut.setFilter,args:[Le,je.filter]}),l.deepEqual(Be.minzoom,je.minzoom)&&l.deepEqual(Be.maxzoom,je.maxzoom)||ie.push({command:ut.setLayerZoomRange,args:[Le,je.minzoom,je.maxzoom]}),Be)Be.hasOwnProperty(Ze)&&Ze!=="layout"&&Ze!=="paint"&&Ze!=="filter"&&Ze!=="metadata"&&Ze!=="minzoom"&&Ze!=="maxzoom"&&(Ze.indexOf("paint.")===0?Rt(Be[Ze],je[Ze],ie,Le,Ze.slice(6),ut.setPaintProperty):l.deepEqual(Be[Ze],je[Ze])||ie.push({command:ut.setLayerProperty,args:[Le,Ze,je[Ze]]}));for(Ze in je)je.hasOwnProperty(Ze)&&!Be.hasOwnProperty(Ze)&&Ze!=="layout"&&Ze!=="paint"&&Ze!=="filter"&&Ze!=="metadata"&&Ze!=="minzoom"&&Ze!=="maxzoom"&&(Ze.indexOf("paint.")===0?Rt(Be[Ze],je[Ze],ie,Le,Ze.slice(6),ut.setPaintProperty):l.deepEqual(Be[Ze],je[Ze])||ie.push({command:ut.setLayerProperty,args:[Le,Ze,je[Ze]]}))}else ie.push({command:ut.removeLayer,args:[Le]}),qe=Lt[Lt.lastIndexOf(Le)+1],ie.push({command:ut.addLayer,args:[je,qe]})}(Me,U.layers,j)}catch(B){console.warn("Unable to compute style diff:",B),j=[{command:ut.setStyle,args:[U]}]}return j}var jt=function(R,U){this.reset(R,U)};jt.prototype.reset=function(R,U){this.points=R||[],this._distances=[0];for(var j=1;j<this.points.length;j++)this._distances[j]=this._distances[j-1]+this.points[j].dist(this.points[j-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(U||0,.5*this.length),this.paddedLength=this.length-2*this.padding},jt.prototype.lerp=function(R){if(this.points.length===1)return this.points[0];R=l.clamp(R,0,1);for(var U=1,j=this._distances[U],X=R*this.paddedLength+this.padding;j<X&&U<this._distances.length;)j=this._distances[++U];var fe=U-1,Me=this._distances[fe],B=j-Me,K=B>0?(X-Me)/B:0;return this.points[fe].mult(1-K).add(this.points[U].mult(K))};var fn=function(R,U,j){var X=this.boxCells=[],fe=this.circleCells=[];this.xCellCount=Math.ceil(R/j),this.yCellCount=Math.ceil(U/j);for(var Me=0;Me<this.xCellCount*this.yCellCount;Me++)X.push([]),fe.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=R,this.height=U,this.xScale=this.xCellCount/R,this.yScale=this.yCellCount/U,this.boxUid=0,this.circleUid=0};function xn(R,U,j,X,fe){var Me=l.create();return U?(l.scale(Me,Me,[1/fe,1/fe,1]),j||l.rotateZ(Me,Me,X.angle)):l.multiply(Me,X.labelPlaneMatrix,R),Me}function un(R,U,j,X,fe){if(U){var Me=l.clone(R);return l.scale(Me,Me,[fe,fe,1]),j||l.rotateZ(Me,Me,-X.angle),Me}return X.glCoordMatrix}function Ht(R,U){var j=[R.x,R.y,0,1];$n(j,j,U);var X=j[3];return{point:new l.Point(j[0]/X,j[1]/X),signedDistanceFromCamera:X}}function nn(R,U){return .5+R/U*.5}function Kt(R,U){var j=R[0]/R[3],X=R[1]/R[3];return j>=-U[0]&&j<=U[0]&&X>=-U[1]&&X<=U[1]}function on(R,U,j,X,fe,Me,B,K){var ie=X?R.textSizeData:R.iconSizeData,de=l.evaluateSizeForZoom(ie,j.transform.zoom),ye=[256/j.width*2+1,256/j.height*2+1],Le=X?R.text.dynamicLayoutVertexArray:R.icon.dynamicLayoutVertexArray;Le.clear();for(var Be=R.lineVertexArray,je=X?R.text.placedSymbolArray:R.icon.placedSymbolArray,qe=j.transform.width/j.transform.height,Ze=!1,Qe=0;Qe<je.length;Qe++){var lt=je.get(Qe);if(lt.hidden||lt.writingMode===l.WritingMode.vertical&&!Ze)Wn(lt.numGlyphs,Le);else{Ze=!1;var ht=[lt.anchorX,lt.anchorY,0,1];if(l.transformMat4(ht,ht,U),Kt(ht,ye)){var St=ht[3],Lt=nn(j.transform.cameraToCenterDistance,St),Mt=l.evaluateSizeForFeature(ie,de,lt),Ft=B?Mt/Lt:Mt*Lt,Et=new l.Point(lt.anchorX,lt.anchorY),en=Ht(Et,fe).point,Zt={},Vt=Mn(lt,Ft,!1,K,U,fe,Me,R.glyphOffsetArray,Be,Le,en,Et,Zt,qe);Ze=Vt.useVertical,(Vt.notEnoughRoom||Ze||Vt.needsFlipping&&Mn(lt,Ft,!0,K,U,fe,Me,R.glyphOffsetArray,Be,Le,en,Et,Zt,qe).notEnoughRoom)&&Wn(lt.numGlyphs,Le)}else Wn(lt.numGlyphs,Le)}}X?R.text.dynamicLayoutVertexBuffer.updateData(Le):R.icon.dynamicLayoutVertexBuffer.updateData(Le)}function hn(R,U,j,X,fe,Me,B,K,ie,de,ye){var Le=K.glyphStartIndex+K.numGlyphs,Be=K.lineStartIndex,je=K.lineStartIndex+K.lineLength,qe=U.getoffsetX(K.glyphStartIndex),Ze=U.getoffsetX(Le-1),Qe=Tn(R*qe,j,X,fe,Me,B,K.segment,Be,je,ie,de,ye);if(!Qe)return null;var lt=Tn(R*Ze,j,X,fe,Me,B,K.segment,Be,je,ie,de,ye);return lt?{first:Qe,last:lt}:null}function dn(R,U,j,X){return R===l.WritingMode.horizontal&&Math.abs(j.y-U.y)>Math.abs(j.x-U.x)*X?{useVertical:!0}:(R===l.WritingMode.vertical?U.y<j.y:U.x>j.x)?{needsFlipping:!0}:null}function Mn(R,U,j,X,fe,Me,B,K,ie,de,ye,Le,Be,je){var qe,Ze=U/24,Qe=R.lineOffsetX*Ze,lt=R.lineOffsetY*Ze;if(R.numGlyphs>1){var ht=R.glyphStartIndex+R.numGlyphs,St=R.lineStartIndex,Lt=R.lineStartIndex+R.lineLength,Mt=hn(Ze,K,Qe,lt,j,ye,Le,R,ie,Me,Be);if(!Mt)return{notEnoughRoom:!0};var Ft=Ht(Mt.first.point,B).point,Et=Ht(Mt.last.point,B).point;if(X&&!j){var en=dn(R.writingMode,Ft,Et,je);if(en)return en}qe=[Mt.first];for(var Zt=R.glyphStartIndex+1;Zt<ht-1;Zt++)qe.push(Tn(Ze*K.getoffsetX(Zt),Qe,lt,j,ye,Le,R.segment,St,Lt,ie,Me,Be));qe.push(Mt.last)}else{if(X&&!j){var Vt=Ht(Le,fe).point,pn=R.lineStartIndex+R.segment+1,vn=new l.Point(ie.getx(pn),ie.gety(pn)),zn=Ht(vn,fe),Rn=zn.signedDistanceFromCamera>0?zn.point:Cn(Le,vn,Vt,1,fe),Un=dn(R.writingMode,Vt,Rn,je);if(Un)return Un}var Yn=Tn(Ze*K.getoffsetX(R.glyphStartIndex),Qe,lt,j,ye,Le,R.segment,R.lineStartIndex,R.lineStartIndex+R.lineLength,ie,Me,Be);if(!Yn)return{notEnoughRoom:!0};qe=[Yn]}for(var or=0,ir=qe;or<ir.length;or+=1){var cr=ir[or];l.addDynamicAttributes(de,cr.point,cr.angle)}return{}}function Cn(R,U,j,X,fe){var Me=Ht(R.add(R.sub(U)._unit()),fe).point,B=j.sub(Me);return j.add(B._mult(X/B.mag()))}function Tn(R,U,j,X,fe,Me,B,K,ie,de,ye,Le){var Be=X?R-U:R+U,je=Be>0?1:-1,qe=0;X&&(je*=-1,qe=Math.PI),je<0&&(qe+=Math.PI);for(var Ze=je>0?K+B:K+B+1,Qe=fe,lt=fe,ht=0,St=0,Lt=Math.abs(Be),Mt=[];ht+St<=Lt;){if((Ze+=je)<K||Ze>=ie)return null;if(lt=Qe,Mt.push(Qe),(Qe=Le[Ze])===void 0){var Ft=new l.Point(de.getx(Ze),de.gety(Ze)),Et=Ht(Ft,ye);if(Et.signedDistanceFromCamera>0)Qe=Le[Ze]=Et.point;else{var en=Ze-je;Qe=Cn(ht===0?Me:new l.Point(de.getx(en),de.gety(en)),Ft,lt,Lt-ht+1,ye)}}ht+=St,St=lt.dist(Qe)}var Zt=(Lt-ht)/St,Vt=Qe.sub(lt),pn=Vt.mult(Zt)._add(lt);pn._add(Vt._unit()._perp()._mult(j*je));var vn=qe+Math.atan2(Qe.y-lt.y,Qe.x-lt.x);return Mt.push(pn),{point:pn,angle:vn,path:Mt}}fn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},fn.prototype.insert=function(R,U,j,X,fe){this._forEachCell(U,j,X,fe,this._insertBoxCell,this.boxUid++),this.boxKeys.push(R),this.bboxes.push(U),this.bboxes.push(j),this.bboxes.push(X),this.bboxes.push(fe)},fn.prototype.insertCircle=function(R,U,j,X){this._forEachCell(U-X,j-X,U+X,j+X,this._insertCircleCell,this.circleUid++),this.circleKeys.push(R),this.circles.push(U),this.circles.push(j),this.circles.push(X)},fn.prototype._insertBoxCell=function(R,U,j,X,fe,Me){this.boxCells[fe].push(Me)},fn.prototype._insertCircleCell=function(R,U,j,X,fe,Me){this.circleCells[fe].push(Me)},fn.prototype._query=function(R,U,j,X,fe,Me){if(j<0||R>this.width||X<0||U>this.height)return!fe&&[];var B=[];if(R<=0&&U<=0&&this.width<=j&&this.height<=X){if(fe)return!0;for(var K=0;K<this.boxKeys.length;K++)B.push({key:this.boxKeys[K],x1:this.bboxes[4*K],y1:this.bboxes[4*K+1],x2:this.bboxes[4*K+2],y2:this.bboxes[4*K+3]});for(var ie=0;ie<this.circleKeys.length;ie++){var de=this.circles[3*ie],ye=this.circles[3*ie+1],Le=this.circles[3*ie+2];B.push({key:this.circleKeys[ie],x1:de-Le,y1:ye-Le,x2:de+Le,y2:ye+Le})}return Me?B.filter(Me):B}var Be={hitTest:fe,seenUids:{box:{},circle:{}}};return this._forEachCell(R,U,j,X,this._queryCell,B,Be,Me),fe?B.length>0:B},fn.prototype._queryCircle=function(R,U,j,X,fe){var Me=R-j,B=R+j,K=U-j,ie=U+j;if(B<0||Me>this.width||ie<0||K>this.height)return!X&&[];var de=[],ye={hitTest:X,circle:{x:R,y:U,radius:j},seenUids:{box:{},circle:{}}};return this._forEachCell(Me,K,B,ie,this._queryCellCircle,de,ye,fe),X?de.length>0:de},fn.prototype.query=function(R,U,j,X,fe){return this._query(R,U,j,X,!1,fe)},fn.prototype.hitTest=function(R,U,j,X,fe){return this._query(R,U,j,X,!0,fe)},fn.prototype.hitTestCircle=function(R,U,j,X){return this._queryCircle(R,U,j,!0,X)},fn.prototype._queryCell=function(R,U,j,X,fe,Me,B,K){var ie=B.seenUids,de=this.boxCells[fe];if(de!==null)for(var ye=this.bboxes,Le=0,Be=de;Le<Be.length;Le+=1){var je=Be[Le];if(!ie.box[je]){ie.box[je]=!0;var qe=4*je;if(R<=ye[qe+2]&&U<=ye[qe+3]&&j>=ye[qe+0]&&X>=ye[qe+1]&&(!K||K(this.boxKeys[je]))){if(B.hitTest)return Me.push(!0),!0;Me.push({key:this.boxKeys[je],x1:ye[qe],y1:ye[qe+1],x2:ye[qe+2],y2:ye[qe+3]})}}}var Ze=this.circleCells[fe];if(Ze!==null)for(var Qe=this.circles,lt=0,ht=Ze;lt<ht.length;lt+=1){var St=ht[lt];if(!ie.circle[St]){ie.circle[St]=!0;var Lt=3*St;if(this._circleAndRectCollide(Qe[Lt],Qe[Lt+1],Qe[Lt+2],R,U,j,X)&&(!K||K(this.circleKeys[St]))){if(B.hitTest)return Me.push(!0),!0;var Mt=Qe[Lt],Ft=Qe[Lt+1],Et=Qe[Lt+2];Me.push({key:this.circleKeys[St],x1:Mt-Et,y1:Ft-Et,x2:Mt+Et,y2:Ft+Et})}}}},fn.prototype._queryCellCircle=function(R,U,j,X,fe,Me,B,K){var ie=B.circle,de=B.seenUids,ye=this.boxCells[fe];if(ye!==null)for(var Le=this.bboxes,Be=0,je=ye;Be<je.length;Be+=1){var qe=je[Be];if(!de.box[qe]){de.box[qe]=!0;var Ze=4*qe;if(this._circleAndRectCollide(ie.x,ie.y,ie.radius,Le[Ze+0],Le[Ze+1],Le[Ze+2],Le[Ze+3])&&(!K||K(this.boxKeys[qe])))return Me.push(!0),!0}}var Qe=this.circleCells[fe];if(Qe!==null)for(var lt=this.circles,ht=0,St=Qe;ht<St.length;ht+=1){var Lt=St[ht];if(!de.circle[Lt]){de.circle[Lt]=!0;var Mt=3*Lt;if(this._circlesCollide(lt[Mt],lt[Mt+1],lt[Mt+2],ie.x,ie.y,ie.radius)&&(!K||K(this.circleKeys[Lt])))return Me.push(!0),!0}}},fn.prototype._forEachCell=function(R,U,j,X,fe,Me,B,K){for(var ie=this._convertToXCellCoord(R),de=this._convertToYCellCoord(U),ye=this._convertToXCellCoord(j),Le=this._convertToYCellCoord(X),Be=ie;Be<=ye;Be++)for(var je=de;je<=Le;je++){var qe=this.xCellCount*je+Be;if(fe.call(this,R,U,j,X,qe,Me,B,K))return}},fn.prototype._convertToXCellCoord=function(R){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(R*this.xScale)))},fn.prototype._convertToYCellCoord=function(R){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(R*this.yScale)))},fn.prototype._circlesCollide=function(R,U,j,X,fe,Me){var B=X-R,K=fe-U,ie=j+Me;return ie*ie>B*B+K*K},fn.prototype._circleAndRectCollide=function(R,U,j,X,fe,Me,B){var K=(Me-X)/2,ie=Math.abs(R-(X+K));if(ie>K+j)return!1;var de=(B-fe)/2,ye=Math.abs(U-(fe+de));if(ye>de+j)return!1;if(ie<=K||ye<=de)return!0;var Le=ie-K,Be=ye-de;return Le*Le+Be*Be<=j*j};var Pn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Wn(R,U){for(var j=0;j<R;j++){var X=U.length;U.resize(X+4),U.float32.set(Pn,3*X)}}function $n(R,U,j){var X=U[0],fe=U[1];return R[0]=j[0]*X+j[4]*fe+j[12],R[1]=j[1]*X+j[5]*fe+j[13],R[3]=j[3]*X+j[7]*fe+j[15],R}var ar=100,Qn=function(R,U,j){U===void 0&&(U=new fn(R.width+200,R.height+200,25)),j===void 0&&(j=new fn(R.width+200,R.height+200,25)),this.transform=R,this.grid=U,this.ignoredGrid=j,this.pitchfactor=Math.cos(R._pitch)*R.cameraToCenterDistance,this.screenRightBoundary=R.width+ar,this.screenBottomBoundary=R.height+ar,this.gridRightBoundary=R.width+200,this.gridBottomBoundary=R.height+200};function Gn(R,U,j){return U*(l.EXTENT/(R.tileSize*Math.pow(2,j-R.tileID.overscaledZ)))}Qn.prototype.placeCollisionBox=function(R,U,j,X,fe){var Me=this.projectAndGetPerspectiveRatio(X,R.anchorPointX,R.anchorPointY),B=j*Me.perspectiveRatio,K=R.x1*B+Me.point.x,ie=R.y1*B+Me.point.y,de=R.x2*B+Me.point.x,ye=R.y2*B+Me.point.y;return!this.isInsideGrid(K,ie,de,ye)||!U&&this.grid.hitTest(K,ie,de,ye,fe)?{box:[],offscreen:!1}:{box:[K,ie,de,ye],offscreen:this.isOffscreen(K,ie,de,ye)}},Qn.prototype.placeCollisionCircles=function(R,U,j,X,fe,Me,B,K,ie,de,ye,Le,Be){var je=[],qe=new l.Point(U.anchorX,U.anchorY),Ze=Ht(qe,Me),Qe=nn(this.transform.cameraToCenterDistance,Ze.signedDistanceFromCamera),lt=(de?fe/Qe:fe*Qe)/l.ONE_EM,ht=Ht(qe,B).point,St=hn(lt,X,U.lineOffsetX*lt,U.lineOffsetY*lt,!1,ht,qe,U,j,B,{}),Lt=!1,Mt=!1,Ft=!0;if(St){for(var Et=.5*Le*Qe+Be,en=new l.Point(-100,-100),Zt=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),Vt=new jt,pn=St.first,vn=St.last,zn=[],Rn=pn.path.length-1;Rn>=1;Rn--)zn.push(pn.path[Rn]);for(var Un=1;Un<vn.path.length;Un++)zn.push(vn.path[Un]);var Yn=2.5*Et;if(K){var or=zn.map(function(Li){return Ht(Li,K)});zn=or.some(function(Li){return Li.signedDistanceFromCamera<=0})?[]:or.map(function(Li){return Li.point})}var ir=[];if(zn.length>0){for(var cr=zn[0].clone(),mr=zn[0].clone(),Lr=1;Lr<zn.length;Lr++)cr.x=Math.min(cr.x,zn[Lr].x),cr.y=Math.min(cr.y,zn[Lr].y),mr.x=Math.max(mr.x,zn[Lr].x),mr.y=Math.max(mr.y,zn[Lr].y);ir=cr.x>=en.x&&mr.x<=Zt.x&&cr.y>=en.y&&mr.y<=Zt.y?[zn]:mr.x<en.x||cr.x>Zt.x||mr.y<en.y||cr.y>Zt.y?[]:l.clipLine([zn],en.x,en.y,Zt.x,Zt.y)}for(var Bn=0,rr=ir;Bn<rr.length;Bn+=1){var fr=rr[Bn];Vt.reset(fr,.25*Et);var yr;yr=Vt.length<=.5*Et?1:Math.ceil(Vt.paddedLength/Yn)+1;for(var Mr=0;Mr<yr;Mr++){var Ir=Mr/Math.max(yr-1,1),Br=Vt.lerp(Ir),Zr=Br.x+ar,oi=Br.y+ar;je.push(Zr,oi,Et,0);var si=Zr-Et,Yr=oi-Et,wi=Zr+Et,Hi=oi+Et;if(Ft=Ft&&this.isOffscreen(si,Yr,wi,Hi),Mt=Mt||this.isInsideGrid(si,Yr,wi,Hi),!R&&this.grid.hitTestCircle(Zr,oi,Et,ye)&&(Lt=!0,!ie))return{circles:[],offscreen:!1,collisionDetected:Lt}}}}return{circles:!ie&&Lt||!Mt?[]:je,offscreen:Ft,collisionDetected:Lt}},Qn.prototype.queryRenderedSymbols=function(R){if(R.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var U=[],j=1/0,X=1/0,fe=-1/0,Me=-1/0,B=0,K=R;B<K.length;B+=1){var ie=K[B],de=new l.Point(ie.x+ar,ie.y+ar);j=Math.min(j,de.x),X=Math.min(X,de.y),fe=Math.max(fe,de.x),Me=Math.max(Me,de.y),U.push(de)}for(var ye={},Le={},Be=0,je=this.grid.query(j,X,fe,Me).concat(this.ignoredGrid.query(j,X,fe,Me));Be<je.length;Be+=1){var qe=je[Be],Ze=qe.key;if(ye[Ze.bucketInstanceId]===void 0&&(ye[Ze.bucketInstanceId]={}),!ye[Ze.bucketInstanceId][Ze.featureIndex]){var Qe=[new l.Point(qe.x1,qe.y1),new l.Point(qe.x2,qe.y1),new l.Point(qe.x2,qe.y2),new l.Point(qe.x1,qe.y2)];l.polygonIntersectsPolygon(U,Qe)&&(ye[Ze.bucketInstanceId][Ze.featureIndex]=!0,Le[Ze.bucketInstanceId]===void 0&&(Le[Ze.bucketInstanceId]=[]),Le[Ze.bucketInstanceId].push(Ze.featureIndex))}}return Le},Qn.prototype.insertCollisionBox=function(R,U,j,X,fe){var Me={bucketInstanceId:j,featureIndex:X,collisionGroupID:fe};(U?this.ignoredGrid:this.grid).insert(Me,R[0],R[1],R[2],R[3])},Qn.prototype.insertCollisionCircles=function(R,U,j,X,fe){for(var Me=U?this.ignoredGrid:this.grid,B={bucketInstanceId:j,featureIndex:X,collisionGroupID:fe},K=0;K<R.length;K+=4)Me.insertCircle(B,R[K],R[K+1],R[K+2])},Qn.prototype.projectAndGetPerspectiveRatio=function(R,U,j){var X=[U,j,0,1];return $n(X,X,R),{point:new l.Point((X[0]/X[3]+1)/2*this.transform.width+ar,(-X[1]/X[3]+1)/2*this.transform.height+ar),perspectiveRatio:.5+this.transform.cameraToCenterDistance/X[3]*.5}},Qn.prototype.isOffscreen=function(R,U,j,X){return j<ar||R>=this.screenRightBoundary||X<ar||U>this.screenBottomBoundary},Qn.prototype.isInsideGrid=function(R,U,j,X){return j>=0&&R<this.gridRightBoundary&&X>=0&&U<this.gridBottomBoundary},Qn.prototype.getViewportMatrix=function(){var R=l.identity([]);return l.translate(R,R,[-100,-100,0]),R};var dr=function(R,U,j,X){this.opacity=R?Math.max(0,Math.min(1,R.opacity+(R.placed?U:-U))):X&&j?1:0,this.placed=j};dr.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Bt=function(R,U,j,X,fe){this.text=new dr(R?R.text:null,U,j,fe),this.icon=new dr(R?R.icon:null,U,X,fe)};Bt.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var tn=function(R,U,j){this.text=R,this.icon=U,this.skipFade=j},cn=function(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]},gn=function(R,U,j,X,fe){this.bucketInstanceId=R,this.featureIndex=U,this.sourceLayerIndex=j,this.bucketIndex=X,this.tileID=fe},kn=function(R){this.crossSourceCollisions=R,this.maxGroupID=0,this.collisionGroups={}};function Vn(R,U,j,X,fe){var Me=l.getAnchorAlignment(R),B=-(Me.horizontalAlign-.5)*U,K=-(Me.verticalAlign-.5)*j,ie=l.evaluateVariableOffset(R,X);return new l.Point(B+ie[0]*fe,K+ie[1]*fe)}function In(R,U,j,X,fe,Me){var B=R.x1,K=R.x2,ie=R.y1,de=R.y2,ye=R.anchorPointX,Le=R.anchorPointY,Be=new l.Point(U,j);return X&&Be._rotate(fe?Me:-Me),{x1:B+Be.x,y1:ie+Be.y,x2:K+Be.x,y2:de+Be.y,anchorPointX:ye,anchorPointY:Le}}kn.prototype.get=function(R){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[R]){var U=++this.maxGroupID;this.collisionGroups[R]={ID:U,predicate:function(j){return j.collisionGroupID===U}}}return this.collisionGroups[R]};var Dn=function(R,U,j,X){this.transform=R.clone(),this.collisionIndex=new Qn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=U,this.retainedQueryData={},this.collisionGroups=new kn(j),this.collisionCircleArrays={},this.prevPlacement=X,X&&(X.prevPlacement=void 0),this.placedOrientations={}};function Kn(R,U,j,X,fe){R.emplaceBack(U?1:0,j?1:0,X||0,fe||0),R.emplaceBack(U?1:0,j?1:0,X||0,fe||0),R.emplaceBack(U?1:0,j?1:0,X||0,fe||0),R.emplaceBack(U?1:0,j?1:0,X||0,fe||0)}Dn.prototype.getBucketParts=function(R,U,j,X){var fe=j.getBucket(U),Me=j.latestFeatureIndex;if(fe&&Me&&U.id===fe.layerIds[0]){var B=j.collisionBoxArray,K=fe.layers[0].layout,ie=Math.pow(2,this.transform.zoom-j.tileID.overscaledZ),de=j.tileSize/l.EXTENT,ye=this.transform.calculatePosMatrix(j.tileID.toUnwrapped()),Le=K.get("text-pitch-alignment")==="map",Be=K.get("text-rotation-alignment")==="map",je=Gn(j,1,this.transform.zoom),qe=xn(ye,Le,Be,this.transform,je),Ze=null;if(Le){var Qe=un(ye,Le,Be,this.transform,je);Ze=l.multiply([],this.transform.labelPlaneMatrix,Qe)}this.retainedQueryData[fe.bucketInstanceId]=new gn(fe.bucketInstanceId,Me,fe.sourceLayerIndex,fe.index,j.tileID);var lt={bucket:fe,layout:K,posMatrix:ye,textLabelPlaneMatrix:qe,labelToScreenMatrix:Ze,scale:ie,textPixelRatio:de,holdingForFade:j.holdingForFade(),collisionBoxArray:B,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(fe.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(fe.sourceID)};if(X)for(var ht=0,St=fe.sortKeyRanges;ht<St.length;ht+=1){var Lt=St[ht],Mt=Lt.sortKey,Ft=Lt.symbolInstanceStart,Et=Lt.symbolInstanceEnd;R.push({sortKey:Mt,symbolInstanceStart:Ft,symbolInstanceEnd:Et,parameters:lt})}else R.push({symbolInstanceStart:0,symbolInstanceEnd:fe.symbolInstances.length,parameters:lt})}},Dn.prototype.attemptAnchorPlacement=function(R,U,j,X,fe,Me,B,K,ie,de,ye,Le,Be,je,qe){var Ze,Qe=[Le.textOffset0,Le.textOffset1],lt=Vn(R,j,X,Qe,fe),ht=this.collisionIndex.placeCollisionBox(In(U,lt.x,lt.y,Me,B,this.transform.angle),ye,K,ie,de.predicate);if(!qe||this.collisionIndex.placeCollisionBox(In(qe,lt.x,lt.y,Me,B,this.transform.angle),ye,K,ie,de.predicate).box.length!==0)return ht.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Le.crossTileID]&&this.prevPlacement.placements[Le.crossTileID]&&this.prevPlacement.placements[Le.crossTileID].text&&(Ze=this.prevPlacement.variableOffsets[Le.crossTileID].anchor),this.variableOffsets[Le.crossTileID]={textOffset:Qe,width:j,height:X,anchor:R,textBoxScale:fe,prevAnchor:Ze},this.markUsedJustification(Be,R,Le,je),Be.allowVerticalPlacement&&(this.markUsedOrientation(Be,je,Le),this.placedOrientations[Le.crossTileID]=je),{shift:lt,placedGlyphBoxes:ht}):void 0},Dn.prototype.placeLayerBucketPart=function(R,U,j){var X=this,fe=R.parameters,Me=fe.bucket,B=fe.layout,K=fe.posMatrix,ie=fe.textLabelPlaneMatrix,de=fe.labelToScreenMatrix,ye=fe.textPixelRatio,Le=fe.holdingForFade,Be=fe.collisionBoxArray,je=fe.partiallyEvaluatedTextSize,qe=fe.collisionGroup,Ze=B.get("text-optional"),Qe=B.get("icon-optional"),lt=B.get("text-allow-overlap"),ht=B.get("icon-allow-overlap"),St=B.get("text-rotation-alignment")==="map",Lt=B.get("text-pitch-alignment")==="map",Mt=B.get("icon-text-fit")!=="none",Ft=B.get("symbol-z-order")==="viewport-y",Et=lt&&(ht||!Me.hasIconData()||Qe),en=ht&&(lt||!Me.hasTextData()||Ze);!Me.collisionArrays&&Be&&Me.deserializeCollisionBoxes(Be);var Zt=function(Un,Yn){if(!U[Un.crossTileID])if(Le)X.placements[Un.crossTileID]=new tn(!1,!1,!1);else{var or,ir=!1,cr=!1,mr=!0,Lr=null,Bn={box:null,offscreen:null},rr={box:null,offscreen:null},fr=null,yr=null,Mr=0,Ir=0,Br=0;Yn.textFeatureIndex?Mr=Yn.textFeatureIndex:Un.useRuntimeCollisionCircles&&(Mr=Un.featureIndex),Yn.verticalTextFeatureIndex&&(Ir=Yn.verticalTextFeatureIndex);var Zr=Yn.textBox;if(Zr){var oi=function(Ai){var qi=l.WritingMode.horizontal;if(Me.allowVerticalPlacement&&!Ai&&X.prevPlacement){var ja=X.prevPlacement.placedOrientations[Un.crossTileID];ja&&(X.placedOrientations[Un.crossTileID]=ja,qi=ja,X.markUsedOrientation(Me,qi,Un))}return qi},si=function(Ai,qi){if(Me.allowVerticalPlacement&&Un.numVerticalGlyphVertices>0&&Yn.verticalTextBox)for(var ja=0,Cl=Me.writingModes;ja<Cl.length&&(Cl[ja]===l.WritingMode.vertical?(Bn=qi(),rr=Bn):Bn=Ai(),!(Bn&&Bn.box&&Bn.box.length));ja+=1);else Bn=Ai()};if(B.get("text-variable-anchor")){var Yr=B.get("text-variable-anchor");if(X.prevPlacement&&X.prevPlacement.variableOffsets[Un.crossTileID]){var wi=X.prevPlacement.variableOffsets[Un.crossTileID];Yr.indexOf(wi.anchor)>0&&(Yr=Yr.filter(function(Ai){return Ai!==wi.anchor})).unshift(wi.anchor)}var Hi=function(Ai,qi,ja){for(var Cl=Ai.x2-Ai.x1,Pu=Ai.y2-Ai.y1,vc=Un.textBoxScale,eu=Mt&&!ht?qi:null,Pl={box:[],offscreen:!1},tu=lt?2*Yr.length:Yr.length,xl=0;xl<tu;++xl){var Ou=Yr[xl%Yr.length],hl=xl>=Yr.length,nu=X.attemptAnchorPlacement(Ou,Ai,Cl,Pu,vc,St,Lt,ye,K,qe,hl,Un,Me,ja,eu);if(nu&&(Pl=nu.placedGlyphBoxes)&&Pl.box&&Pl.box.length){ir=!0,Lr=nu.shift;break}}return Pl};si(function(){return Hi(Zr,Yn.iconBox,l.WritingMode.horizontal)},function(){var Ai=Yn.verticalTextBox,qi=Bn&&Bn.box&&Bn.box.length;return Me.allowVerticalPlacement&&!qi&&Un.numVerticalGlyphVertices>0&&Ai?Hi(Ai,Yn.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),Bn&&(ir=Bn.box,mr=Bn.offscreen);var Li=oi(Bn&&Bn.box);if(!ir&&X.prevPlacement){var Ri=X.prevPlacement.variableOffsets[Un.crossTileID];Ri&&(X.variableOffsets[Un.crossTileID]=Ri,X.markUsedJustification(Me,Ri.anchor,Un,Li))}}else{var Ur=function(Ai,qi){var ja=X.collisionIndex.placeCollisionBox(Ai,lt,ye,K,qe.predicate);return ja&&ja.box&&ja.box.length&&(X.markUsedOrientation(Me,qi,Un),X.placedOrientations[Un.crossTileID]=qi),ja};si(function(){return Ur(Zr,l.WritingMode.horizontal)},function(){var Ai=Yn.verticalTextBox;return Me.allowVerticalPlacement&&Un.numVerticalGlyphVertices>0&&Ai?Ur(Ai,l.WritingMode.vertical):{box:null,offscreen:null}}),oi(Bn&&Bn.box&&Bn.box.length)}}if(ir=(or=Bn)&&or.box&&or.box.length>0,mr=or&&or.offscreen,Un.useRuntimeCollisionCircles){var Fr=Me.text.placedSymbolArray.get(Un.centerJustifiedTextSymbolIndex),li=l.evaluateSizeForFeature(Me.textSizeData,je,Fr),ti=B.get("text-padding"),fi=Un.collisionCircleDiameter;fr=X.collisionIndex.placeCollisionCircles(lt,Fr,Me.lineVertexArray,Me.glyphOffsetArray,li,K,ie,de,j,Lt,qe.predicate,fi,ti),ir=lt||fr.circles.length>0&&!fr.collisionDetected,mr=mr&&fr.offscreen}if(Yn.iconFeatureIndex&&(Br=Yn.iconFeatureIndex),Yn.iconBox){var sa=function(Ai){var qi=Mt&&Lr?In(Ai,Lr.x,Lr.y,St,Lt,X.transform.angle):Ai;return X.collisionIndex.placeCollisionBox(qi,ht,ye,K,qe.predicate)};cr=rr&&rr.box&&rr.box.length&&Yn.verticalIconBox?(yr=sa(Yn.verticalIconBox)).box.length>0:(yr=sa(Yn.iconBox)).box.length>0,mr=mr&&yr.offscreen}var mi=Ze||Un.numHorizontalGlyphVertices===0&&Un.numVerticalGlyphVertices===0,Wr=Qe||Un.numIconVertices===0;if(mi||Wr?Wr?mi||(cr=cr&&ir):ir=cr&&ir:cr=ir=cr&&ir,ir&&or&&or.box&&(rr&&rr.box&&Ir?X.collisionIndex.insertCollisionBox(or.box,B.get("text-ignore-placement"),Me.bucketInstanceId,Ir,qe.ID):X.collisionIndex.insertCollisionBox(or.box,B.get("text-ignore-placement"),Me.bucketInstanceId,Mr,qe.ID)),cr&&yr&&X.collisionIndex.insertCollisionBox(yr.box,B.get("icon-ignore-placement"),Me.bucketInstanceId,Br,qe.ID),fr&&(ir&&X.collisionIndex.insertCollisionCircles(fr.circles,B.get("text-ignore-placement"),Me.bucketInstanceId,Mr,qe.ID),j)){var Qo=Me.bucketInstanceId,ga=X.collisionCircleArrays[Qo];ga===void 0&&(ga=X.collisionCircleArrays[Qo]=new cn);for(var Ca=0;Ca<fr.circles.length;Ca+=4)ga.circles.push(fr.circles[Ca+0]),ga.circles.push(fr.circles[Ca+1]),ga.circles.push(fr.circles[Ca+2]),ga.circles.push(fr.collisionDetected?1:0)}X.placements[Un.crossTileID]=new tn(ir||Et,cr||en,mr||Me.justReloaded),U[Un.crossTileID]=!0}};if(Ft)for(var Vt=Me.getSortedSymbolIndexes(this.transform.angle),pn=Vt.length-1;pn>=0;--pn){var vn=Vt[pn];Zt(Me.symbolInstances.get(vn),Me.collisionArrays[vn])}else for(var zn=R.symbolInstanceStart;zn<R.symbolInstanceEnd;zn++)Zt(Me.symbolInstances.get(zn),Me.collisionArrays[zn]);if(j&&Me.bucketInstanceId in this.collisionCircleArrays){var Rn=this.collisionCircleArrays[Me.bucketInstanceId];l.invert(Rn.invProjMatrix,K),Rn.viewportMatrix=this.collisionIndex.getViewportMatrix()}Me.justReloaded=!1},Dn.prototype.markUsedJustification=function(R,U,j,X){var fe,Me={left:j.leftJustifiedTextSymbolIndex,center:j.centerJustifiedTextSymbolIndex,right:j.rightJustifiedTextSymbolIndex};fe=X===l.WritingMode.vertical?j.verticalPlacedTextSymbolIndex:Me[l.getAnchorJustification(U)];for(var B=0,K=[j.leftJustifiedTextSymbolIndex,j.centerJustifiedTextSymbolIndex,j.rightJustifiedTextSymbolIndex,j.verticalPlacedTextSymbolIndex];B<K.length;B+=1){var ie=K[B];ie>=0&&(R.text.placedSymbolArray.get(ie).crossTileID=fe>=0&&ie!==fe?0:j.crossTileID)}},Dn.prototype.markUsedOrientation=function(R,U,j){for(var X=U===l.WritingMode.horizontal||U===l.WritingMode.horizontalOnly?U:0,fe=U===l.WritingMode.vertical?U:0,Me=0,B=[j.leftJustifiedTextSymbolIndex,j.centerJustifiedTextSymbolIndex,j.rightJustifiedTextSymbolIndex];Me<B.length;Me+=1){var K=B[Me];R.text.placedSymbolArray.get(K).placedOrientation=X}j.verticalPlacedTextSymbolIndex&&(R.text.placedSymbolArray.get(j.verticalPlacedTextSymbolIndex).placedOrientation=fe)},Dn.prototype.commit=function(R){this.commitTime=R,this.zoomAtLastRecencyCheck=this.transform.zoom;var U=this.prevPlacement,j=!1;this.prevZoomAdjustment=U?U.zoomAdjustment(this.transform.zoom):0;var X=U?U.symbolFadeChange(R):1,fe=U?U.opacities:{},Me=U?U.variableOffsets:{},B=U?U.placedOrientations:{};for(var K in this.placements){var ie=this.placements[K],de=fe[K];de?(this.opacities[K]=new Bt(de,X,ie.text,ie.icon),j=j||ie.text!==de.text.placed||ie.icon!==de.icon.placed):(this.opacities[K]=new Bt(null,X,ie.text,ie.icon,ie.skipFade),j=j||ie.text||ie.icon)}for(var ye in fe){var Le=fe[ye];if(!this.opacities[ye]){var Be=new Bt(Le,X,!1,!1);Be.isHidden()||(this.opacities[ye]=Be,j=j||Le.text.placed||Le.icon.placed)}}for(var je in Me)this.variableOffsets[je]||!this.opacities[je]||this.opacities[je].isHidden()||(this.variableOffsets[je]=Me[je]);for(var qe in B)this.placedOrientations[qe]||!this.opacities[qe]||this.opacities[qe].isHidden()||(this.placedOrientations[qe]=B[qe]);j?this.lastPlacementChangeTime=R:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=U?U.lastPlacementChangeTime:R)},Dn.prototype.updateLayerOpacities=function(R,U){for(var j={},X=0,fe=U;X<fe.length;X+=1){var Me=fe[X],B=Me.getBucket(R);B&&Me.latestFeatureIndex&&R.id===B.layerIds[0]&&this.updateBucketOpacities(B,j,Me.collisionBoxArray)}},Dn.prototype.updateBucketOpacities=function(R,U,j){var X=this;R.hasTextData()&&R.text.opacityVertexArray.clear(),R.hasIconData()&&R.icon.opacityVertexArray.clear(),R.hasIconCollisionBoxData()&&R.iconCollisionBox.collisionVertexArray.clear(),R.hasTextCollisionBoxData()&&R.textCollisionBox.collisionVertexArray.clear();var fe=R.layers[0].layout,Me=new Bt(null,0,!1,!1,!0),B=fe.get("text-allow-overlap"),K=fe.get("icon-allow-overlap"),ie=fe.get("text-variable-anchor"),de=fe.get("text-rotation-alignment")==="map",ye=fe.get("text-pitch-alignment")==="map",Le=fe.get("icon-text-fit")!=="none",Be=new Bt(null,0,B&&(K||!R.hasIconData()||fe.get("icon-optional")),K&&(B||!R.hasTextData()||fe.get("text-optional")),!0);!R.collisionArrays&&j&&(R.hasIconCollisionBoxData()||R.hasTextCollisionBoxData())&&R.deserializeCollisionBoxes(j);for(var je=function(lt,ht,St){for(var Lt=0;Lt<ht/4;Lt++)lt.opacityVertexArray.emplaceBack(St)},qe=function(lt){var ht=R.symbolInstances.get(lt),St=ht.numHorizontalGlyphVertices,Lt=ht.numVerticalGlyphVertices,Mt=ht.crossTileID,Ft=U[Mt],Et=X.opacities[Mt];Ft?Et=Me:Et||(Et=Be,X.opacities[Mt]=Et),U[Mt]=!0;var en=St>0||Lt>0,Zt=ht.numIconVertices>0,Vt=X.placedOrientations[ht.crossTileID],pn=Vt===l.WritingMode.vertical,vn=Vt===l.WritingMode.horizontal||Vt===l.WritingMode.horizontalOnly;if(en){var zn=An(Et.text),Rn=pn?sn:zn;je(R.text,St,Rn);var Un=vn?sn:zn;je(R.text,Lt,Un);var Yn=Et.text.isHidden();[ht.rightJustifiedTextSymbolIndex,ht.centerJustifiedTextSymbolIndex,ht.leftJustifiedTextSymbolIndex].forEach(function(Br){Br>=0&&(R.text.placedSymbolArray.get(Br).hidden=Yn||pn?1:0)}),ht.verticalPlacedTextSymbolIndex>=0&&(R.text.placedSymbolArray.get(ht.verticalPlacedTextSymbolIndex).hidden=Yn||vn?1:0);var or=X.variableOffsets[ht.crossTileID];or&&X.markUsedJustification(R,or.anchor,ht,Vt);var ir=X.placedOrientations[ht.crossTileID];ir&&(X.markUsedJustification(R,"left",ht,ir),X.markUsedOrientation(R,ir,ht))}if(Zt){var cr=An(Et.icon),mr=!(Le&&ht.verticalPlacedIconSymbolIndex&&pn);if(ht.placedIconSymbolIndex>=0){var Lr=mr?cr:sn;je(R.icon,ht.numIconVertices,Lr),R.icon.placedSymbolArray.get(ht.placedIconSymbolIndex).hidden=Et.icon.isHidden()}if(ht.verticalPlacedIconSymbolIndex>=0){var Bn=mr?sn:cr;je(R.icon,ht.numVerticalIconVertices,Bn),R.icon.placedSymbolArray.get(ht.verticalPlacedIconSymbolIndex).hidden=Et.icon.isHidden()}}if(R.hasIconCollisionBoxData()||R.hasTextCollisionBoxData()){var rr=R.collisionArrays[lt];if(rr){var fr=new l.Point(0,0);if(rr.textBox||rr.verticalTextBox){var yr=!0;if(ie){var Mr=X.variableOffsets[Mt];Mr?(fr=Vn(Mr.anchor,Mr.width,Mr.height,Mr.textOffset,Mr.textBoxScale),de&&fr._rotate(ye?X.transform.angle:-X.transform.angle)):yr=!1}rr.textBox&&Kn(R.textCollisionBox.collisionVertexArray,Et.text.placed,!yr||pn,fr.x,fr.y),rr.verticalTextBox&&Kn(R.textCollisionBox.collisionVertexArray,Et.text.placed,!yr||vn,fr.x,fr.y)}var Ir=!!(!vn&&rr.verticalIconBox);rr.iconBox&&Kn(R.iconCollisionBox.collisionVertexArray,Et.icon.placed,Ir,Le?fr.x:0,Le?fr.y:0),rr.verticalIconBox&&Kn(R.iconCollisionBox.collisionVertexArray,Et.icon.placed,!Ir,Le?fr.x:0,Le?fr.y:0)}}},Ze=0;Ze<R.symbolInstances.length;Ze++)qe(Ze);if(R.sortFeatures(this.transform.angle),this.retainedQueryData[R.bucketInstanceId]&&(this.retainedQueryData[R.bucketInstanceId].featureSortOrder=R.featureSortOrder),R.hasTextData()&&R.text.opacityVertexBuffer&&R.text.opacityVertexBuffer.updateData(R.text.opacityVertexArray),R.hasIconData()&&R.icon.opacityVertexBuffer&&R.icon.opacityVertexBuffer.updateData(R.icon.opacityVertexArray),R.hasIconCollisionBoxData()&&R.iconCollisionBox.collisionVertexBuffer&&R.iconCollisionBox.collisionVertexBuffer.updateData(R.iconCollisionBox.collisionVertexArray),R.hasTextCollisionBoxData()&&R.textCollisionBox.collisionVertexBuffer&&R.textCollisionBox.collisionVertexBuffer.updateData(R.textCollisionBox.collisionVertexArray),R.bucketInstanceId in this.collisionCircleArrays){var Qe=this.collisionCircleArrays[R.bucketInstanceId];R.placementInvProjMatrix=Qe.invProjMatrix,R.placementViewportMatrix=Qe.viewportMatrix,R.collisionCircleArray=Qe.circles,delete this.collisionCircleArrays[R.bucketInstanceId]}},Dn.prototype.symbolFadeChange=function(R){return this.fadeDuration===0?1:(R-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Dn.prototype.zoomAdjustment=function(R){return Math.max(0,(this.transform.zoom-R)/1.5)},Dn.prototype.hasTransitions=function(R){return this.stale||R-this.lastPlacementChangeTime<this.fadeDuration},Dn.prototype.stillRecent=function(R,U){var j=this.zoomAtLastRecencyCheck===U?1-this.zoomAdjustment(U):1;return this.zoomAtLastRecencyCheck=U,this.commitTime+this.fadeDuration*j>R},Dn.prototype.setStale=function(){this.stale=!0};var Ut=Math.pow(2,25),bn=Math.pow(2,24),At=Math.pow(2,17),Gt=Math.pow(2,16),$t=Math.pow(2,9),mn=Math.pow(2,8),yn=Math.pow(2,1);function An(R){if(R.opacity===0&&!R.placed)return 0;if(R.opacity===1&&R.placed)return 4294967295;var U=R.placed?1:0,j=Math.floor(127*R.opacity);return j*Ut+U*bn+j*At+U*Gt+j*$t+U*mn+j*yn+U}var sn=0,Yt=function(R){this._sortAcrossTiles=R.layout.get("symbol-z-order")!=="viewport-y"&&R.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Yt.prototype.continuePlacement=function(R,U,j,X,fe){for(var Me=this._bucketParts;this._currentTileIndex<R.length;){var B=R[this._currentTileIndex];if(U.getBucketParts(Me,X,B,this._sortAcrossTiles),this._currentTileIndex++,fe())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Me.sort(function(ie,de){return ie.sortKey-de.sortKey}));this._currentPartIndex<Me.length;){var K=Me[this._currentPartIndex];if(U.placeLayerBucketPart(K,this._seenCrossTileIDs,j),this._currentPartIndex++,fe())return!0}return!1};var Xt=function(R,U,j,X,fe,Me,B){this.placement=new Dn(R,fe,Me,B),this._currentPlacementIndex=U.length-1,this._forceFullPlacement=j,this._showCollisionBoxes=X,this._done=!1};Xt.prototype.isDone=function(){return this._done},Xt.prototype.continuePlacement=function(R,U,j){for(var X=this,fe=l.browser.now(),Me=function(){var ie=l.browser.now()-fe;return!X._forceFullPlacement&&ie>2};this._currentPlacementIndex>=0;){var B=U[R[this._currentPlacementIndex]],K=this.placement.collisionIndex.transform.zoom;if(B.type==="symbol"&&(!B.minzoom||B.minzoom<=K)&&(!B.maxzoom||B.maxzoom>K)){if(this._inProgressLayer||(this._inProgressLayer=new Yt(B)),this._inProgressLayer.continuePlacement(j[B.source],this.placement,this._showCollisionBoxes,B,Me))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Xt.prototype.commit=function(R){return this.placement.commit(R),this.placement};var an=512/l.EXTENT/2,ln=function(R,U,j){this.tileID=R,this.indexedSymbolInstances={},this.bucketInstanceId=j;for(var X=0;X<U.length;X++){var fe=U.get(X),Me=fe.key;this.indexedSymbolInstances[Me]||(this.indexedSymbolInstances[Me]=[]),this.indexedSymbolInstances[Me].push({crossTileID:fe.crossTileID,coord:this.getScaledCoordinates(fe,R)})}};ln.prototype.getScaledCoordinates=function(R,U){var j=U.canonical.z-this.tileID.canonical.z,X=an/Math.pow(2,j);return{x:Math.floor((U.canonical.x*l.EXTENT+R.anchorX)*X),y:Math.floor((U.canonical.y*l.EXTENT+R.anchorY)*X)}},ln.prototype.findMatches=function(R,U,j){for(var X=this.tileID.canonical.z<U.canonical.z?1:Math.pow(2,this.tileID.canonical.z-U.canonical.z),fe=0;fe<R.length;fe++){var Me=R.get(fe);if(!Me.crossTileID){var B=this.indexedSymbolInstances[Me.key];if(B)for(var K=this.getScaledCoordinates(Me,U),ie=0,de=B;ie<de.length;ie+=1){var ye=de[ie];if(Math.abs(ye.coord.x-K.x)<=X&&Math.abs(ye.coord.y-K.y)<=X&&!j[ye.crossTileID]){j[ye.crossTileID]=!0,Me.crossTileID=ye.crossTileID;break}}}}};var Sn=function(){this.maxCrossTileID=0};Sn.prototype.generate=function(){return++this.maxCrossTileID};var En=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};En.prototype.handleWrapJump=function(R){var U=Math.round((R-this.lng)/360);if(U!==0)for(var j in this.indexes){var X=this.indexes[j],fe={};for(var Me in X){var B=X[Me];B.tileID=B.tileID.unwrapTo(B.tileID.wrap+U),fe[B.tileID.key]=B}this.indexes[j]=fe}this.lng=R},En.prototype.addBucket=function(R,U,j){if(this.indexes[R.overscaledZ]&&this.indexes[R.overscaledZ][R.key]){if(this.indexes[R.overscaledZ][R.key].bucketInstanceId===U.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(R.overscaledZ,this.indexes[R.overscaledZ][R.key])}for(var X=0;X<U.symbolInstances.length;X++)U.symbolInstances.get(X).crossTileID=0;this.usedCrossTileIDs[R.overscaledZ]||(this.usedCrossTileIDs[R.overscaledZ]={});var fe=this.usedCrossTileIDs[R.overscaledZ];for(var Me in this.indexes){var B=this.indexes[Me];if(Number(Me)>R.overscaledZ)for(var K in B){var ie=B[K];ie.tileID.isChildOf(R)&&ie.findMatches(U.symbolInstances,R,fe)}else{var de=B[R.scaledTo(Number(Me)).key];de&&de.findMatches(U.symbolInstances,R,fe)}}for(var ye=0;ye<U.symbolInstances.length;ye++){var Le=U.symbolInstances.get(ye);Le.crossTileID||(Le.crossTileID=j.generate(),fe[Le.crossTileID]=!0)}return this.indexes[R.overscaledZ]===void 0&&(this.indexes[R.overscaledZ]={}),this.indexes[R.overscaledZ][R.key]=new ln(R,U.symbolInstances,U.bucketInstanceId),!0},En.prototype.removeBucketCrossTileIDs=function(R,U){for(var j in U.indexedSymbolInstances)for(var X=0,fe=U.indexedSymbolInstances[j];X<fe.length;X+=1){var Me=fe[X];delete this.usedCrossTileIDs[R][Me.crossTileID]}},En.prototype.removeStaleBuckets=function(R){var U=!1;for(var j in this.indexes){var X=this.indexes[j];for(var fe in X)R[X[fe].bucketInstanceId]||(this.removeBucketCrossTileIDs(j,X[fe]),delete X[fe],U=!0)}return U};var jn=function(){this.layerIndexes={},this.crossTileIDs=new Sn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};jn.prototype.addLayer=function(R,U,j){var X=this.layerIndexes[R.id];X===void 0&&(X=this.layerIndexes[R.id]=new En);var fe=!1,Me={};X.handleWrapJump(j);for(var B=0,K=U;B<K.length;B+=1){var ie=K[B],de=ie.getBucket(R);de&&R.id===de.layerIds[0]&&(de.bucketInstanceId||(de.bucketInstanceId=++this.maxBucketInstanceId),X.addBucket(ie.tileID,de,this.crossTileIDs)&&(fe=!0),Me[de.bucketInstanceId]=!0)}return X.removeStaleBuckets(Me)&&(fe=!0),fe},jn.prototype.pruneUnusedLayers=function(R){var U={};for(var j in R.forEach(function(X){U[X]=!0}),this.layerIndexes)U[j]||delete this.layerIndexes[j]};var Fn=function(R,U){return l.emitValidationErrors(R,U&&U.filter(function(j){return j.identifier!=="source.canvas"}))},Xn=l.pick(ut,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Hn=l.pick(ut,["setCenter","setZoom","setBearing","setPitch"]),nr=function(){var R={},U=l.styleSpec.$version;for(var j in l.styleSpec.$root){var X=l.styleSpec.$root[j];if(X.required){var fe;(fe=j==="version"?U:X.type==="array"?[]:{})!=null&&(R[j]=fe)}}return R}(),er=function(R){function U(j,X){var fe=this;X===void 0&&(X={}),R.call(this),this.map=j,this.dispatcher=new L(vt(),this),this.imageManager=new p,this.imageManager.setEventedParent(this),this.glyphManager=new m(j._requestManager,X.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new jn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());var Me=this;this._rtlTextPluginCallback=U.registerForPluginStateChange(function(B){var K={pluginStatus:B.pluginStatus,pluginURL:B.pluginURL};Me.dispatcher.broadcast("syncRTLPluginState",K,function(ie,de){if(l.triggerPluginCompletionEvent(ie),de&&de.every(function(Le){return Le}))for(var ye in Me.sourceCaches)Me.sourceCaches[ye].reload()})}),this.on("data",function(B){if(B.dataType==="source"&&B.sourceDataType==="metadata"){var K=fe.sourceCaches[B.sourceId];if(K){var ie=K.getSource();if(ie&&ie.vectorLayerIds)for(var de in fe._layers){var ye=fe._layers[de];ye.source===ie.id&&fe._validateLayer(ye)}}}})}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.loadURL=function(j,X){var fe=this;X===void 0&&(X={}),this.fire(new l.Event("dataloading",{dataType:"style"}));var Me=typeof X.validate=="boolean"?X.validate:!l.isMapboxURL(j);j=this.map._requestManager.normalizeStyleURL(j,X.accessToken);var B=this.map._requestManager.transformRequest(j,l.ResourceType.Style);this._request=l.getJSON(B,function(K,ie){fe._request=null,K?fe.fire(new l.ErrorEvent(K)):ie&&fe._load(ie,Me)})},U.prototype.loadJSON=function(j,X){var fe=this;X===void 0&&(X={}),this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.browser.frame(function(){fe._request=null,fe._load(j,X.validate!==!1)})},U.prototype.loadEmpty=function(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(nr,!1)},U.prototype._load=function(j,X){if(!X||!Fn(this,l.validateStyle(j))){for(var fe in this._loaded=!0,this.stylesheet=j,j.sources)this.addSource(fe,j.sources[fe],{validate:!1});j.sprite?this._loadSprite(j.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(j.glyphs);var Me=kt(this.stylesheet.layers);this._order=Me.map(function(de){return de.id}),this._layers={},this._serializedLayers={};for(var B=0,K=Me;B<K.length;B+=1){var ie=K[B];(ie=l.createStyleLayer(ie)).setEventedParent(this,{layer:{id:ie.id}}),this._layers[ie.id]=ie,this._serializedLayers[ie.id]=ie.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}},U.prototype._loadSprite=function(j){var X=this;this._spriteRequest=function(fe,Me,B){var K,ie,de,ye=l.browser.devicePixelRatio>1?"@2x":"",Le=l.getJSON(Me.transformRequest(Me.normalizeSpriteURL(fe,ye,".json"),l.ResourceType.SpriteJSON),function(qe,Ze){Le=null,de||(de=qe,K=Ze,je())}),Be=l.getImage(Me.transformRequest(Me.normalizeSpriteURL(fe,ye,".png"),l.ResourceType.SpriteImage),function(qe,Ze){Be=null,de||(de=qe,ie=Ze,je())});function je(){if(de)B(de);else if(K&&ie){var qe=l.browser.getImageData(ie),Ze={};for(var Qe in K){var lt=K[Qe],ht=lt.width,St=lt.height,Lt=lt.x,Mt=lt.y,Ft=lt.sdf,Et=lt.pixelRatio,en=lt.stretchX,Zt=lt.stretchY,Vt=lt.content,pn=new l.RGBAImage({width:ht,height:St});l.RGBAImage.copy(qe,pn,{x:Lt,y:Mt},{x:0,y:0},{width:ht,height:St}),Ze[Qe]={data:pn,pixelRatio:Et,sdf:Ft,stretchX:en,stretchY:Zt,content:Vt}}B(null,Ze)}}return{cancel:function(){Le&&(Le.cancel(),Le=null),Be&&(Be.cancel(),Be=null)}}}(j,this.map._requestManager,function(fe,Me){if(X._spriteRequest=null,fe)X.fire(new l.ErrorEvent(fe));else if(Me)for(var B in Me)X.imageManager.addImage(B,Me[B]);X.imageManager.setLoaded(!0),X._availableImages=X.imageManager.listImages(),X.dispatcher.broadcast("setImages",X._availableImages),X.fire(new l.Event("data",{dataType:"style"}))})},U.prototype._validateLayer=function(j){var X=this.sourceCaches[j.source];if(X){var fe=j.sourceLayer;if(fe){var Me=X.getSource();(Me.type==="geojson"||Me.vectorLayerIds&&Me.vectorLayerIds.indexOf(fe)===-1)&&this.fire(new l.ErrorEvent(new Error('Source layer "'+fe+'" does not exist on source "'+Me.id+'" as specified by style layer "'+j.id+'"')))}}},U.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var j in this.sourceCaches)if(!this.sourceCaches[j].loaded())return!1;return!!this.imageManager.isLoaded()},U.prototype._serializeLayers=function(j){for(var X=[],fe=0,Me=j;fe<Me.length;fe+=1){var B=Me[fe],K=this._layers[B];K.type!=="custom"&&X.push(K.serialize())}return X},U.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var j in this.sourceCaches)if(this.sourceCaches[j].hasTransition())return!0;for(var X in this._layers)if(this._layers[X].hasTransition())return!0;return!1},U.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},U.prototype.update=function(j){if(this._loaded){var X=this._changed;if(this._changed){var fe=Object.keys(this._updatedLayers),Me=Object.keys(this._removedLayers);for(var B in(fe.length||Me.length)&&this._updateWorkerLayers(fe,Me),this._updatedSources){var K=this._updatedSources[B];K==="reload"?this._reloadSource(B):K==="clear"&&this._clearSource(B)}for(var ie in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[ie].updateTransitions(j);this.light.updateTransitions(j),this._resetUpdates()}for(var de in this.sourceCaches)this.sourceCaches[de].used=!1;for(var ye=0,Le=this._order;ye<Le.length;ye+=1){var Be=Le[ye],je=this._layers[Be];je.recalculate(j,this._availableImages),!je.isHidden(j.zoom)&&je.source&&(this.sourceCaches[je.source].used=!0)}this.light.recalculate(j),this.z=j.zoom,X&&this.fire(new l.Event("data",{dataType:"style"}))}},U.prototype._updateTilesForChangedImages=function(){var j=Object.keys(this._changedImages);if(j.length){for(var X in this.sourceCaches)this.sourceCaches[X].reloadTilesForDependencies(["icons","patterns"],j);this._changedImages={}}},U.prototype._updateWorkerLayers=function(j,X){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(j),removedIds:X})},U.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},U.prototype.setState=function(j){var X=this;if(this._checkLoaded(),Fn(this,l.validateStyle(j)))return!1;(j=l.clone$1(j)).layers=kt(j.layers);var fe=Wt(this.serialize(),j).filter(function(B){return!(B.command in Hn)});if(fe.length===0)return!1;var Me=fe.filter(function(B){return!(B.command in Xn)});if(Me.length>0)throw new Error("Unimplemented: "+Me.map(function(B){return B.command}).join(", ")+".");return fe.forEach(function(B){B.command!=="setTransition"&&X[B.command].apply(X,B.args)}),this.stylesheet=j,!0},U.prototype.addImage=function(j,X){if(this.getImage(j))return this.fire(new l.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(j,X),this._availableImages=this.imageManager.listImages(),this._changedImages[j]=!0,this._changed=!0,this.fire(new l.Event("data",{dataType:"style"}))},U.prototype.updateImage=function(j,X){this.imageManager.updateImage(j,X)},U.prototype.getImage=function(j){return this.imageManager.getImage(j)},U.prototype.removeImage=function(j){if(!this.getImage(j))return this.fire(new l.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(j),this._availableImages=this.imageManager.listImages(),this._changedImages[j]=!0,this._changed=!0,this.fire(new l.Event("data",{dataType:"style"}))},U.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},U.prototype.addSource=function(j,X,fe){var Me=this;if(fe===void 0&&(fe={}),this._checkLoaded(),this.sourceCaches[j]!==void 0)throw new Error("There is already a source with this ID");if(!X.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(X).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(X.type)>=0&&this._validate(l.validateStyle.source,"sources."+j,X,null,fe))){this.map&&this.map._collectResourceTiming&&(X.collectResourceTiming=!0);var B=this.sourceCaches[j]=new nt(j,X,this.dispatcher);B.style=this,B.setEventedParent(this,function(){return{isSourceLoaded:Me.loaded(),source:B.serialize(),sourceId:j}}),B.onAdd(this.map),this._changed=!0}},U.prototype.removeSource=function(j){if(this._checkLoaded(),this.sourceCaches[j]===void 0)throw new Error("There is no source with this ID");for(var X in this._layers)if(this._layers[X].source===j)return this.fire(new l.ErrorEvent(new Error('Source "'+j+'" cannot be removed while layer "'+X+'" is using it.')));var fe=this.sourceCaches[j];delete this.sourceCaches[j],delete this._updatedSources[j],fe.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:j})),fe.setEventedParent(null),fe.clearTiles(),fe.onRemove&&fe.onRemove(this.map),this._changed=!0},U.prototype.setGeoJSONSourceData=function(j,X){this._checkLoaded(),this.sourceCaches[j].getSource().setData(X),this._changed=!0},U.prototype.getSource=function(j){return this.sourceCaches[j]&&this.sourceCaches[j].getSource()},U.prototype.addLayer=function(j,X,fe){fe===void 0&&(fe={}),this._checkLoaded();var Me=j.id;if(this.getLayer(Me))this.fire(new l.ErrorEvent(new Error('Layer with id "'+Me+'" already exists on this map')));else{var B;if(j.type==="custom"){if(Fn(this,l.validateCustomStyleLayer(j)))return;B=l.createStyleLayer(j)}else{if(typeof j.source=="object"&&(this.addSource(Me,j.source),j=l.clone$1(j),j=l.extend(j,{source:Me})),this._validate(l.validateStyle.layer,"layers."+Me,j,{arrayIndex:-1},fe))return;B=l.createStyleLayer(j),this._validateLayer(B),B.setEventedParent(this,{layer:{id:Me}}),this._serializedLayers[B.id]=B.serialize()}var K=X?this._order.indexOf(X):this._order.length;if(X&&K===-1)this.fire(new l.ErrorEvent(new Error('Layer with id "'+X+'" does not exist on this map.')));else{if(this._order.splice(K,0,Me),this._layerOrderChanged=!0,this._layers[Me]=B,this._removedLayers[Me]&&B.source&&B.type!=="custom"){var ie=this._removedLayers[Me];delete this._removedLayers[Me],ie.type!==B.type?this._updatedSources[B.source]="clear":(this._updatedSources[B.source]="reload",this.sourceCaches[B.source].pause())}this._updateLayer(B),B.onAdd&&B.onAdd(this.map)}}},U.prototype.moveLayer=function(j,X){if(this._checkLoaded(),this._changed=!0,this._layers[j]){if(j!==X){var fe=this._order.indexOf(j);this._order.splice(fe,1);var Me=X?this._order.indexOf(X):this._order.length;X&&Me===-1?this.fire(new l.ErrorEvent(new Error('Layer with id "'+X+'" does not exist on this map.'))):(this._order.splice(Me,0,j),this._layerOrderChanged=!0)}}else this.fire(new l.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be moved.")))},U.prototype.removeLayer=function(j){this._checkLoaded();var X=this._layers[j];if(X){X.setEventedParent(null);var fe=this._order.indexOf(j);this._order.splice(fe,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[j]=X,delete this._layers[j],delete this._serializedLayers[j],delete this._updatedLayers[j],delete this._updatedPaintProps[j],X.onRemove&&X.onRemove(this.map)}else this.fire(new l.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be removed.")))},U.prototype.getLayer=function(j){return this._layers[j]},U.prototype.hasLayer=function(j){return j in this._layers},U.prototype.setLayerZoomRange=function(j,X,fe){this._checkLoaded();var Me=this.getLayer(j);Me?Me.minzoom===X&&Me.maxzoom===fe||(X!=null&&(Me.minzoom=X),fe!=null&&(Me.maxzoom=fe),this._updateLayer(Me)):this.fire(new l.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot have zoom extent.")))},U.prototype.setFilter=function(j,X,fe){fe===void 0&&(fe={}),this._checkLoaded();var Me=this.getLayer(j);if(Me){if(!l.deepEqual(Me.filter,X))return X==null?(Me.filter=void 0,void this._updateLayer(Me)):void(this._validate(l.validateStyle.filter,"layers."+Me.id+".filter",X,null,fe)||(Me.filter=l.clone$1(X),this._updateLayer(Me)))}else this.fire(new l.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be filtered.")))},U.prototype.getFilter=function(j){return l.clone$1(this.getLayer(j).filter)},U.prototype.setLayoutProperty=function(j,X,fe,Me){Me===void 0&&(Me={}),this._checkLoaded();var B=this.getLayer(j);B?l.deepEqual(B.getLayoutProperty(X),fe)||(B.setLayoutProperty(X,fe,Me),this._updateLayer(B)):this.fire(new l.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be styled.")))},U.prototype.getLayoutProperty=function(j,X){var fe=this.getLayer(j);if(fe)return fe.getLayoutProperty(X);this.fire(new l.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style.")))},U.prototype.setPaintProperty=function(j,X,fe,Me){Me===void 0&&(Me={}),this._checkLoaded();var B=this.getLayer(j);B?l.deepEqual(B.getPaintProperty(X),fe)||(B.setPaintProperty(X,fe,Me)&&this._updateLayer(B),this._changed=!0,this._updatedPaintProps[j]=!0):this.fire(new l.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be styled.")))},U.prototype.getPaintProperty=function(j,X){return this.getLayer(j).getPaintProperty(X)},U.prototype.setFeatureState=function(j,X){this._checkLoaded();var fe=j.source,Me=j.sourceLayer,B=this.sourceCaches[fe];if(B!==void 0){var K=B.getSource().type;K==="geojson"&&Me?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):K!=="vector"||Me?(j.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),B.setFeatureState(Me,j.id,X)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+fe+"' does not exist in the map's style.")))},U.prototype.removeFeatureState=function(j,X){this._checkLoaded();var fe=j.source,Me=this.sourceCaches[fe];if(Me!==void 0){var B=Me.getSource().type,K=B==="vector"?j.sourceLayer:void 0;B!=="vector"||K?X&&typeof j.id!="string"&&typeof j.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):Me.removeFeatureState(K,j.id,X):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+fe+"' does not exist in the map's style.")))},U.prototype.getFeatureState=function(j){this._checkLoaded();var X=j.source,fe=j.sourceLayer,Me=this.sourceCaches[X];if(Me!==void 0){if(Me.getSource().type!=="vector"||fe)return j.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),Me.getFeatureState(fe,j.id);this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+X+"' does not exist in the map's style.")))},U.prototype.getTransition=function(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},U.prototype.serialize=function(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,function(j){return j.serialize()}),layers:this._serializeLayers(this._order)},function(j){return j!==void 0})},U.prototype._updateLayer=function(j){this._updatedLayers[j.id]=!0,j.source&&!this._updatedSources[j.source]&&this.sourceCaches[j.source].getSource().type!=="raster"&&(this._updatedSources[j.source]="reload",this.sourceCaches[j.source].pause()),this._changed=!0},U.prototype._flattenAndSortRenderedFeatures=function(j){for(var X=this,fe=function(Vt){return X._layers[Vt].type==="fill-extrusion"},Me={},B=[],K=this._order.length-1;K>=0;K--){var ie=this._order[K];if(fe(ie)){Me[ie]=K;for(var de=0,ye=j;de<ye.length;de+=1){var Le=ye[de][ie];if(Le)for(var Be=0,je=Le;Be<je.length;Be+=1){var qe=je[Be];B.push(qe)}}}}B.sort(function(Vt,pn){return pn.intersectionZ-Vt.intersectionZ});for(var Ze=[],Qe=this._order.length-1;Qe>=0;Qe--){var lt=this._order[Qe];if(fe(lt))for(var ht=B.length-1;ht>=0;ht--){var St=B[ht].feature;if(Me[St.layer.id]<Qe)break;Ze.push(St),B.pop()}else for(var Lt=0,Mt=j;Lt<Mt.length;Lt+=1){var Ft=Mt[Lt][lt];if(Ft)for(var Et=0,en=Ft;Et<en.length;Et+=1){var Zt=en[Et];Ze.push(Zt.feature)}}}return Ze},U.prototype.queryRenderedFeatures=function(j,X,fe){X&&X.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",X.filter,null,X);var Me={};if(X&&X.layers){if(!Array.isArray(X.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var B=0,K=X.layers;B<K.length;B+=1){var ie=K[B],de=this._layers[ie];if(!de)return this.fire(new l.ErrorEvent(new Error("The layer '"+ie+"' does not exist in the map's style and cannot be queried for features."))),[];Me[de.source]=!0}}var ye=[];for(var Le in X.availableImages=this._availableImages,this.sourceCaches)X.layers&&!Me[Le]||ye.push(W(this.sourceCaches[Le],this._layers,this._serializedLayers,j,X,fe));return this.placement&&ye.push(function(Be,je,qe,Ze,Qe,lt,ht){for(var St={},Lt=lt.queryRenderedSymbols(Ze),Mt=[],Ft=0,Et=Object.keys(Lt).map(Number);Ft<Et.length;Ft+=1){var en=Et[Ft];Mt.push(ht[en])}Mt.sort(Z);for(var Zt=function(){var Rn=pn[Vt],Un=Rn.featureIndex.lookupSymbolFeatures(Lt[Rn.bucketInstanceId],je,Rn.bucketIndex,Rn.sourceLayerIndex,Qe.filter,Qe.layers,Qe.availableImages,Be);for(var Yn in Un){var or=St[Yn]=St[Yn]||[],ir=Un[Yn];ir.sort(function(Bn,rr){var fr=Rn.featureSortOrder;if(fr){var yr=fr.indexOf(Bn.featureIndex);return fr.indexOf(rr.featureIndex)-yr}return rr.featureIndex-Bn.featureIndex});for(var cr=0,mr=ir;cr<mr.length;cr+=1){var Lr=mr[cr];or.push(Lr)}}},Vt=0,pn=Mt;Vt<pn.length;Vt+=1)Zt();var vn=function(Rn){St[Rn].forEach(function(Un){var Yn=Un.feature,or=Be[Rn],ir=qe[or.source].getFeatureState(Yn.layer["source-layer"],Yn.id);Yn.source=Yn.layer.source,Yn.layer["source-layer"]&&(Yn.sourceLayer=Yn.layer["source-layer"]),Yn.state=ir})};for(var zn in St)vn(zn);return St}(this._layers,this._serializedLayers,this.sourceCaches,j,X,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(ye)},U.prototype.querySourceFeatures=function(j,X){X&&X.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",X.filter,null,X);var fe=this.sourceCaches[j];return fe?function(Me,B){for(var K=Me.getRenderableIds().map(function(je){return Me.getTileByID(je)}),ie=[],de={},ye=0;ye<K.length;ye++){var Le=K[ye],Be=Le.tileID.canonical.key;de[Be]||(de[Be]=!0,Le.querySourceFeatures(ie,B))}return ie}(fe,X):[]},U.prototype.addSourceType=function(j,X,fe){return U.getSourceType(j)?fe(new Error('A source type called "'+j+'" already exists.')):(U.setSourceType(j,X),X.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:j,url:X.workerSourceURL},fe):fe(null,null))},U.prototype.getLight=function(){return this.light.getLight()},U.prototype.setLight=function(j,X){X===void 0&&(X={}),this._checkLoaded();var fe=this.light.getLight(),Me=!1;for(var B in j)if(!l.deepEqual(j[B],fe[B])){Me=!0;break}if(Me){var K={now:l.browser.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(j,X),this.light.updateTransitions(K)}},U.prototype._validate=function(j,X,fe,Me,B){return B===void 0&&(B={}),(!B||B.validate!==!1)&&Fn(this,j.call(l.validateStyle,l.extend({key:X,style:this.serialize(),value:fe,styleSpec:l.styleSpec},Me)))},U.prototype._remove=function(){for(var j in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[j].setEventedParent(null);for(var X in this.sourceCaches)this.sourceCaches[X].clearTiles(),this.sourceCaches[X].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},U.prototype._clearSource=function(j){this.sourceCaches[j].clearTiles()},U.prototype._reloadSource=function(j){this.sourceCaches[j].resume(),this.sourceCaches[j].reload()},U.prototype._updateSources=function(j){for(var X in this.sourceCaches)this.sourceCaches[X].update(j)},U.prototype._generateCollisionBoxes=function(){for(var j in this.sourceCaches)this._reloadSource(j)},U.prototype._updatePlacement=function(j,X,fe,Me,B){B===void 0&&(B=!1);for(var K=!1,ie=!1,de={},ye=0,Le=this._order;ye<Le.length;ye+=1){var Be=Le[ye],je=this._layers[Be];if(je.type==="symbol"){if(!de[je.source]){var qe=this.sourceCaches[je.source];de[je.source]=qe.getRenderableIds(!0).map(function(Lt){return qe.getTileByID(Lt)}).sort(function(Lt,Mt){return Mt.tileID.overscaledZ-Lt.tileID.overscaledZ||(Lt.tileID.isLessThan(Mt.tileID)?-1:1)})}var Ze=this.crossTileSymbolIndex.addLayer(je,de[je.source],j.center.lng);K=K||Ze}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((B=B||this._layerOrderChanged||fe===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.browser.now(),j.zoom))&&(this.pauseablePlacement=new Xt(j,this._order,B,X,fe,Me,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,de),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.browser.now()),ie=!0),K&&this.pauseablePlacement.placement.setStale()),ie||K)for(var Qe=0,lt=this._order;Qe<lt.length;Qe+=1){var ht=lt[Qe],St=this._layers[ht];St.type==="symbol"&&this.placement.updateLayerOpacities(St,de[St.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.browser.now())},U.prototype._releaseSymbolFadeTiles=function(){for(var j in this.sourceCaches)this.sourceCaches[j].releaseSymbolFadeTiles()},U.prototype.getImages=function(j,X,fe){this.imageManager.getImages(X.icons,fe),this._updateTilesForChangedImages();var Me=this.sourceCaches[X.source];Me&&Me.setDependencies(X.tileID.key,X.type,X.icons)},U.prototype.getGlyphs=function(j,X,fe){this.glyphManager.getGlyphs(X.stacks,fe)},U.prototype.getResource=function(j,X,fe){return l.makeRequest(X,fe)},U}(l.Evented);er.getSourceType=function(R){return te[R]},er.setSourceType=function(R,U){te[R]=U},er.registerForPluginStateChange=l.registerForPluginStateChange;var tr=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),lr=Vr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),ur=Vr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),br=Vr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Zn=Vr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),pr=Vr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Sr=Vr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Gr=Vr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),ai=Vr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),ni=Vr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),ci=Vr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Kr=Vr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),bi=Vr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Ha=Vr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ha=Vr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),eo=Vr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Vs=Vr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Ro=Vr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hs=Vr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Hs=Vr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),qa=Vr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),nl=Vr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Fo=Vr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Bo=Vr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Ga=Vr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Si=Vr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),ps=Vr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Vr(R,U){var j=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,X={};return{fragmentSource:R=R.replace(j,function(fe,Me,B,K,ie){return X[ie]=!0,Me==="define"?`
#ifndef HAS_UNIFORM_u_`+ie+`
varying `+B+" "+K+" "+ie+`;
#else
uniform `+B+" "+K+" u_"+ie+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+ie+`
    `+B+" "+K+" "+ie+" = u_"+ie+`;
#endif
`}),vertexSource:U=U.replace(j,function(fe,Me,B,K,ie){var de=K==="float"?"vec2":"vec4",ye=ie.match(/color/)?"color":de;return X[ie]?Me==="define"?`
#ifndef HAS_UNIFORM_u_`+ie+`
uniform lowp float u_`+ie+`_t;
attribute `+B+" "+de+" a_"+ie+`;
varying `+B+" "+K+" "+ie+`;
#else
uniform `+B+" "+K+" u_"+ie+`;
#endif
`:ye==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ie+`
    `+ie+" = a_"+ie+`;
#else
    `+B+" "+K+" "+ie+" = u_"+ie+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ie+`
    `+ie+" = unpack_mix_"+ye+"(a_"+ie+", u_"+ie+`_t);
#else
    `+B+" "+K+" "+ie+" = u_"+ie+`;
#endif
`:Me==="define"?`
#ifndef HAS_UNIFORM_u_`+ie+`
uniform lowp float u_`+ie+`_t;
attribute `+B+" "+de+" a_"+ie+`;
#else
uniform `+B+" "+K+" u_"+ie+`;
#endif
`:ye==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ie+`
    `+B+" "+K+" "+ie+" = a_"+ie+`;
#else
    `+B+" "+K+" "+ie+" = u_"+ie+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ie+`
    `+B+" "+K+" "+ie+" = unpack_mix_"+ye+"(a_"+ie+", u_"+ie+`_t);
#else
    `+B+" "+K+" "+ie+" = u_"+ie+`;
#endif
`})}}var Za=Object.freeze({__proto__:null,prelude:lr,background:ur,backgroundPattern:br,circle:Zn,clippingMask:pr,heatmap:Sr,heatmapTexture:Gr,collisionBox:ai,collisionCircle:ni,debug:ci,fill:Kr,fillOutline:bi,fillOutlinePattern:Ha,fillPattern:ha,fillExtrusion:eo,fillExtrusionPattern:Vs,hillshadePrepare:Ro,hillshade:hs,line:Hs,lineGradient:qa,linePattern:nl,lineSDF:Fo,raster:Bo,symbolIcon:Ga,symbolSDF:Si,symbolTextAndIcon:ps}),ba=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};ba.prototype.bind=function(R,U,j,X,fe,Me,B,K){this.context=R;for(var ie=this.boundPaintVertexBuffers.length!==X.length,de=0;!ie&&de<X.length;de++)this.boundPaintVertexBuffers[de]!==X[de]&&(ie=!0);var ye=!this.vao||this.boundProgram!==U||this.boundLayoutVertexBuffer!==j||ie||this.boundIndexBuffer!==fe||this.boundVertexOffset!==Me||this.boundDynamicVertexBuffer!==B||this.boundDynamicVertexBuffer2!==K;!R.extVertexArrayObject||ye?this.freshBind(U,j,X,fe,Me,B,K):(R.bindVertexArrayOES.set(this.vao),B&&B.bind(),fe&&fe.dynamicDraw&&fe.bind(),K&&K.bind())},ba.prototype.freshBind=function(R,U,j,X,fe,Me,B){var K,ie=R.numAttributes,de=this.context,ye=de.gl;if(de.extVertexArrayObject)this.vao&&this.destroy(),this.vao=de.extVertexArrayObject.createVertexArrayOES(),de.bindVertexArrayOES.set(this.vao),K=0,this.boundProgram=R,this.boundLayoutVertexBuffer=U,this.boundPaintVertexBuffers=j,this.boundIndexBuffer=X,this.boundVertexOffset=fe,this.boundDynamicVertexBuffer=Me,this.boundDynamicVertexBuffer2=B;else{K=de.currentNumAttributes||0;for(var Le=ie;Le<K;Le++)ye.disableVertexAttribArray(Le)}U.enableAttributes(ye,R);for(var Be=0,je=j;Be<je.length;Be+=1)je[Be].enableAttributes(ye,R);Me&&Me.enableAttributes(ye,R),B&&B.enableAttributes(ye,R),U.bind(),U.setVertexAttribPointers(ye,R,fe);for(var qe=0,Ze=j;qe<Ze.length;qe+=1){var Qe=Ze[qe];Qe.bind(),Qe.setVertexAttribPointers(ye,R,fe)}Me&&(Me.bind(),Me.setVertexAttribPointers(ye,R,fe)),X&&X.bind(),B&&(B.bind(),B.setVertexAttribPointers(ye,R,fe)),de.currentNumAttributes=ie},ba.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var to=function(R,U,j,X,fe){var Me=R.gl;this.program=Me.createProgram();var B=j?j.defines():[];fe&&B.push("#define OVERDRAW_INSPECTOR;");var K=B.concat(lr.fragmentSource,U.fragmentSource).join(`
`),ie=B.concat(lr.vertexSource,U.vertexSource).join(`
`),de=Me.createShader(Me.FRAGMENT_SHADER);if(Me.isContextLost())this.failedToCreate=!0;else{Me.shaderSource(de,K),Me.compileShader(de),Me.attachShader(this.program,de);var ye=Me.createShader(Me.VERTEX_SHADER);if(Me.isContextLost())this.failedToCreate=!0;else{Me.shaderSource(ye,ie),Me.compileShader(ye),Me.attachShader(this.program,ye);for(var Le=j?j.layoutAttributes:[],Be=0;Be<Le.length;Be++)Me.bindAttribLocation(this.program,Be,Le[Be].name);Me.linkProgram(this.program),Me.deleteShader(ye),Me.deleteShader(de),this.numAttributes=Me.getProgramParameter(this.program,Me.ACTIVE_ATTRIBUTES),this.attributes={};for(var je={},qe=0;qe<this.numAttributes;qe++){var Ze=Me.getActiveAttrib(this.program,qe);Ze&&(this.attributes[Ze.name]=Me.getAttribLocation(this.program,Ze.name))}for(var Qe=Me.getProgramParameter(this.program,Me.ACTIVE_UNIFORMS),lt=0;lt<Qe;lt++){var ht=Me.getActiveUniform(this.program,lt);ht&&(je[ht.name]=Me.getUniformLocation(this.program,ht.name))}this.fixedUniforms=X(R,je),this.binderUniforms=j?j.getUniforms(R,je):[]}}};function Ia(R,U,j){var X=1/Gn(j,1,U.transform.tileZoom),fe=Math.pow(2,j.tileID.overscaledZ),Me=j.tileSize*Math.pow(2,U.transform.tileZoom)/fe,B=Me*(j.tileID.canonical.x+j.tileID.wrap*fe),K=Me*j.tileID.canonical.y;return{u_image:0,u_texsize:j.imageAtlasTexture.size,u_scale:[X,R.fromScale,R.toScale],u_fade:R.t,u_pixel_coord_upper:[B>>16,K>>16],u_pixel_coord_lower:[65535&B,65535&K]}}to.prototype.draw=function(R,U,j,X,fe,Me,B,K,ie,de,ye,Le,Be,je,qe,Ze){var Qe,lt=R.gl;if(!this.failedToCreate){for(var ht in R.program.set(this.program),R.setDepthMode(j),R.setStencilMode(X),R.setColorMode(fe),R.setCullFace(Me),this.fixedUniforms)this.fixedUniforms[ht].set(B[ht]);je&&je.setUniforms(R,this.binderUniforms,Le,{zoom:Be});for(var St=(Qe={},Qe[lt.LINES]=2,Qe[lt.TRIANGLES]=3,Qe[lt.LINE_STRIP]=1,Qe)[U],Lt=0,Mt=ye.get();Lt<Mt.length;Lt+=1){var Ft=Mt[Lt],Et=Ft.vaos||(Ft.vaos={});(Et[K]||(Et[K]=new ba)).bind(R,this,ie,je?je.getPaintVertexBuffers():[],de,Ft.vertexOffset,qe,Ze),lt.drawElements(U,Ft.primitiveLength*St,lt.UNSIGNED_SHORT,Ft.primitiveOffset*St*2)}}};var mo=function(R,U,j,X){var fe=U.style.light,Me=fe.properties.get("position"),B=[Me.x,Me.y,Me.z],K=l.create$1();fe.properties.get("anchor")==="viewport"&&l.fromRotation(K,-U.transform.angle),l.transformMat3(B,B,K);var ie=fe.properties.get("color");return{u_matrix:R,u_lightpos:B,u_lightintensity:fe.properties.get("intensity"),u_lightcolor:[ie.r,ie.g,ie.b],u_vertical_gradient:+j,u_opacity:X}},no=function(R,U,j,X,fe,Me,B){return l.extend(mo(R,U,j,X),Ia(Me,U,B),{u_height_factor:-Math.pow(2,fe.overscaledZ)/B.tileSize/8})},ro=function(R){return{u_matrix:R}},Cs=function(R,U,j,X){return l.extend(ro(R),Ia(j,U,X))},rl=function(R,U){return{u_matrix:R,u_world:U}},yo=function(R,U,j,X,fe){return l.extend(Cs(R,U,j,X),{u_world:fe})},il=function(R,U,j,X){var fe,Me,B=R.transform;if(X.paint.get("circle-pitch-alignment")==="map"){var K=Gn(j,1,B.zoom);fe=!0,Me=[K,K]}else fe=!1,Me=B.pixelsToGLUnits;return{u_camera_to_center_distance:B.cameraToCenterDistance,u_scale_with_map:+(X.paint.get("circle-pitch-scale")==="map"),u_matrix:R.translatePosMatrix(U.posMatrix,j,X.paint.get("circle-translate"),X.paint.get("circle-translate-anchor")),u_pitch_with_map:+fe,u_device_pixel_ratio:l.browser.devicePixelRatio,u_extrude_scale:Me}},qs=function(R,U,j){var X=Gn(j,1,U.zoom),fe=Math.pow(2,U.zoom-j.tileID.overscaledZ),Me=j.tileID.overscaleFactor();return{u_matrix:R,u_camera_to_center_distance:U.cameraToCenterDistance,u_pixels_to_tile_units:X,u_extrude_scale:[U.pixelsToGLUnits[0]/(X*fe),U.pixelsToGLUnits[1]/(X*fe)],u_overscale_factor:Me}},al=function(R,U,j){return{u_matrix:R,u_inv_matrix:U,u_camera_to_center_distance:j.cameraToCenterDistance,u_viewport_size:[j.width,j.height]}},Gs=function(R,U,j){return j===void 0&&(j=1),{u_matrix:R,u_color:U,u_overlay:0,u_overlay_scale:j}},ol=function(R){return{u_matrix:R}},es=function(R,U,j,X){return{u_matrix:R,u_extrude_scale:Gn(U,1,j),u_intensity:X}},xo=function(R,U,j,X){var fe=l.create();l.ortho(fe,0,R.width,R.height,0,0,1);var Me=R.context.gl;return{u_matrix:fe,u_world:[Me.drawingBufferWidth,Me.drawingBufferHeight],u_image:j,u_color_ramp:X,u_opacity:U.paint.get("heatmap-opacity")}},No=function(R,U,j){var X=j.paint.get("hillshade-shadow-color"),fe=j.paint.get("hillshade-highlight-color"),Me=j.paint.get("hillshade-accent-color"),B=j.paint.get("hillshade-illumination-direction")*(Math.PI/180);j.paint.get("hillshade-illumination-anchor")==="viewport"&&(B-=R.transform.angle);var K,ie,de,ye=!R.options.moving;return{u_matrix:R.transform.calculatePosMatrix(U.tileID.toUnwrapped(),ye),u_image:0,u_latrange:(K=U.tileID,ie=Math.pow(2,K.canonical.z),de=K.canonical.y,[new l.MercatorCoordinate(0,de/ie).toLngLat().lat,new l.MercatorCoordinate(0,(de+1)/ie).toLngLat().lat]),u_light:[j.paint.get("hillshade-exaggeration"),B],u_shadow:X,u_highlight:fe,u_accent:Me}},ts=function(R,U,j){var X=U.stride,fe=l.create();return l.ortho(fe,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(fe,fe,[0,-l.EXTENT,0]),{u_matrix:fe,u_image:1,u_dimension:[X,X],u_zoom:R.overscaledZ,u_maxzoom:j,u_unpack:U.getUnpackVector()}},Ps=function(R,U,j){var X=R.transform;return{u_matrix:Ya(R,U,j),u_ratio:1/Gn(U,1,X.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_units_to_pixels:[1/X.pixelsToGLUnits[0],1/X.pixelsToGLUnits[1]]}},Zs=function(R,U,j){return l.extend(Ps(R,U,j),{u_image:0})},Ys=function(R,U,j,X){var fe=R.transform,Me=jo(U,fe);return{u_matrix:Ya(R,U,j),u_texsize:U.imageAtlasTexture.size,u_ratio:1/Gn(U,1,fe.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_image:0,u_scale:[Me,X.fromScale,X.toScale],u_fade:X.t,u_units_to_pixels:[1/fe.pixelsToGLUnits[0],1/fe.pixelsToGLUnits[1]]}},Aa=function(R,U,j,X,fe){var Me=R.transform,B=R.lineAtlas,K=jo(U,Me),ie=j.layout.get("line-cap")==="round",de=B.getDash(X.from,ie),ye=B.getDash(X.to,ie),Le=de.width*fe.fromScale,Be=ye.width*fe.toScale;return l.extend(Ps(R,U,j),{u_patternscale_a:[K/Le,-de.height/2],u_patternscale_b:[K/Be,-ye.height/2],u_sdfgamma:B.width/(256*Math.min(Le,Be)*l.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:de.y,u_tex_y_b:ye.y,u_mix:fe.t})};function jo(R,U){return 1/Gn(R,1,U.tileZoom)}function Ya(R,U,j){return R.translatePosMatrix(U.tileID.posMatrix,U,j.paint.get("line-translate"),j.paint.get("line-translate-anchor"))}var io=function(R,U,j,X,fe){return{u_matrix:R,u_tl_parent:U,u_scale_parent:j,u_buffer_scale:1,u_fade_t:X.mix,u_opacity:X.opacity*fe.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:fe.paint.get("raster-brightness-min"),u_brightness_high:fe.paint.get("raster-brightness-max"),u_saturation_factor:(B=fe.paint.get("raster-saturation"),B>0?1-1/(1.001-B):-B),u_contrast_factor:(Me=fe.paint.get("raster-contrast"),Me>0?1/(1-Me):1+Me),u_spin_weights:sl(fe.paint.get("raster-hue-rotate"))};var Me,B};function sl(R){R*=Math.PI/180;var U=Math.sin(R),j=Math.cos(R);return[(2*j+1)/3,(-Math.sqrt(3)*U-j+1)/3,(Math.sqrt(3)*U-j+1)/3]}var bo,$r=function(R,U,j,X,fe,Me,B,K,ie,de){var ye=fe.transform;return{u_is_size_zoom_constant:+(R==="constant"||R==="source"),u_is_size_feature_constant:+(R==="constant"||R==="camera"),u_size_t:U?U.uSizeT:0,u_size:U?U.uSize:0,u_camera_to_center_distance:ye.cameraToCenterDistance,u_pitch:ye.pitch/360*2*Math.PI,u_rotate_symbol:+j,u_aspect_ratio:ye.width/ye.height,u_fade_change:fe.options.fadeDuration?fe.symbolFadeChange:1,u_matrix:Me,u_label_plane_matrix:B,u_coord_matrix:K,u_is_text:+ie,u_pitch_with_map:+X,u_texsize:de,u_texture:0}},Da=function(R,U,j,X,fe,Me,B,K,ie,de,ye){var Le=fe.transform;return l.extend($r(R,U,j,X,fe,Me,B,K,ie,de),{u_gamma_scale:X?Math.cos(Le._pitch)*Le.cameraToCenterDistance:1,u_device_pixel_ratio:l.browser.devicePixelRatio,u_is_halo:+ye})},ds=function(R,U,j,X,fe,Me,B,K,ie,de){return l.extend(Da(R,U,j,X,fe,Me,B,K,!0,ie,!0),{u_texsize_icon:de,u_texture_icon:1})},Ma=function(R,U,j){return{u_matrix:R,u_opacity:U,u_color:j}},Uo=function(R,U,j,X,fe,Me){return l.extend(function(B,K,ie,de){var ye=ie.imageManager.getPattern(B.from.toString()),Le=ie.imageManager.getPattern(B.to.toString()),Be=ie.imageManager.getPixelSize(),je=Be.width,qe=Be.height,Ze=Math.pow(2,de.tileID.overscaledZ),Qe=de.tileSize*Math.pow(2,ie.transform.tileZoom)/Ze,lt=Qe*(de.tileID.canonical.x+de.tileID.wrap*Ze),ht=Qe*de.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ye.tl,u_pattern_br_a:ye.br,u_pattern_tl_b:Le.tl,u_pattern_br_b:Le.br,u_texsize:[je,qe],u_mix:K.t,u_pattern_size_a:ye.displaySize,u_pattern_size_b:Le.displaySize,u_scale_a:K.fromScale,u_scale_b:K.toScale,u_tile_units_to_pixels:1/Gn(de,1,ie.transform.tileZoom),u_pixel_coord_upper:[lt>>16,ht>>16],u_pixel_coord_lower:[65535&lt,65535&ht]}}(X,Me,j,fe),{u_matrix:R,u_opacity:U})},yl={fillExtrusion:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_lightpos:new l.Uniform3f(R,U.u_lightpos),u_lightintensity:new l.Uniform1f(R,U.u_lightintensity),u_lightcolor:new l.Uniform3f(R,U.u_lightcolor),u_vertical_gradient:new l.Uniform1f(R,U.u_vertical_gradient),u_opacity:new l.Uniform1f(R,U.u_opacity)}},fillExtrusionPattern:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_lightpos:new l.Uniform3f(R,U.u_lightpos),u_lightintensity:new l.Uniform1f(R,U.u_lightintensity),u_lightcolor:new l.Uniform3f(R,U.u_lightcolor),u_vertical_gradient:new l.Uniform1f(R,U.u_vertical_gradient),u_height_factor:new l.Uniform1f(R,U.u_height_factor),u_image:new l.Uniform1i(R,U.u_image),u_texsize:new l.Uniform2f(R,U.u_texsize),u_pixel_coord_upper:new l.Uniform2f(R,U.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(R,U.u_pixel_coord_lower),u_scale:new l.Uniform3f(R,U.u_scale),u_fade:new l.Uniform1f(R,U.u_fade),u_opacity:new l.Uniform1f(R,U.u_opacity)}},fill:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix)}},fillPattern:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_image:new l.Uniform1i(R,U.u_image),u_texsize:new l.Uniform2f(R,U.u_texsize),u_pixel_coord_upper:new l.Uniform2f(R,U.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(R,U.u_pixel_coord_lower),u_scale:new l.Uniform3f(R,U.u_scale),u_fade:new l.Uniform1f(R,U.u_fade)}},fillOutline:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_world:new l.Uniform2f(R,U.u_world)}},fillOutlinePattern:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_world:new l.Uniform2f(R,U.u_world),u_image:new l.Uniform1i(R,U.u_image),u_texsize:new l.Uniform2f(R,U.u_texsize),u_pixel_coord_upper:new l.Uniform2f(R,U.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(R,U.u_pixel_coord_lower),u_scale:new l.Uniform3f(R,U.u_scale),u_fade:new l.Uniform1f(R,U.u_fade)}},circle:function(R,U){return{u_camera_to_center_distance:new l.Uniform1f(R,U.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(R,U.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(R,U.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(R,U.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(R,U.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(R,U.u_matrix)}},collisionBox:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_camera_to_center_distance:new l.Uniform1f(R,U.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(R,U.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(R,U.u_extrude_scale),u_overscale_factor:new l.Uniform1f(R,U.u_overscale_factor)}},collisionCircle:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_inv_matrix:new l.UniformMatrix4f(R,U.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(R,U.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(R,U.u_viewport_size)}},debug:function(R,U){return{u_color:new l.UniformColor(R,U.u_color),u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_overlay:new l.Uniform1i(R,U.u_overlay),u_overlay_scale:new l.Uniform1f(R,U.u_overlay_scale)}},clippingMask:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix)}},heatmap:function(R,U){return{u_extrude_scale:new l.Uniform1f(R,U.u_extrude_scale),u_intensity:new l.Uniform1f(R,U.u_intensity),u_matrix:new l.UniformMatrix4f(R,U.u_matrix)}},heatmapTexture:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_world:new l.Uniform2f(R,U.u_world),u_image:new l.Uniform1i(R,U.u_image),u_color_ramp:new l.Uniform1i(R,U.u_color_ramp),u_opacity:new l.Uniform1f(R,U.u_opacity)}},hillshade:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_image:new l.Uniform1i(R,U.u_image),u_latrange:new l.Uniform2f(R,U.u_latrange),u_light:new l.Uniform2f(R,U.u_light),u_shadow:new l.UniformColor(R,U.u_shadow),u_highlight:new l.UniformColor(R,U.u_highlight),u_accent:new l.UniformColor(R,U.u_accent)}},hillshadePrepare:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_image:new l.Uniform1i(R,U.u_image),u_dimension:new l.Uniform2f(R,U.u_dimension),u_zoom:new l.Uniform1f(R,U.u_zoom),u_maxzoom:new l.Uniform1f(R,U.u_maxzoom),u_unpack:new l.Uniform4f(R,U.u_unpack)}},line:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_ratio:new l.Uniform1f(R,U.u_ratio),u_device_pixel_ratio:new l.Uniform1f(R,U.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(R,U.u_units_to_pixels)}},lineGradient:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_ratio:new l.Uniform1f(R,U.u_ratio),u_device_pixel_ratio:new l.Uniform1f(R,U.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(R,U.u_units_to_pixels),u_image:new l.Uniform1i(R,U.u_image)}},linePattern:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_texsize:new l.Uniform2f(R,U.u_texsize),u_ratio:new l.Uniform1f(R,U.u_ratio),u_device_pixel_ratio:new l.Uniform1f(R,U.u_device_pixel_ratio),u_image:new l.Uniform1i(R,U.u_image),u_units_to_pixels:new l.Uniform2f(R,U.u_units_to_pixels),u_scale:new l.Uniform3f(R,U.u_scale),u_fade:new l.Uniform1f(R,U.u_fade)}},lineSDF:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_ratio:new l.Uniform1f(R,U.u_ratio),u_device_pixel_ratio:new l.Uniform1f(R,U.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(R,U.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(R,U.u_patternscale_a),u_patternscale_b:new l.Uniform2f(R,U.u_patternscale_b),u_sdfgamma:new l.Uniform1f(R,U.u_sdfgamma),u_image:new l.Uniform1i(R,U.u_image),u_tex_y_a:new l.Uniform1f(R,U.u_tex_y_a),u_tex_y_b:new l.Uniform1f(R,U.u_tex_y_b),u_mix:new l.Uniform1f(R,U.u_mix)}},raster:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_tl_parent:new l.Uniform2f(R,U.u_tl_parent),u_scale_parent:new l.Uniform1f(R,U.u_scale_parent),u_buffer_scale:new l.Uniform1f(R,U.u_buffer_scale),u_fade_t:new l.Uniform1f(R,U.u_fade_t),u_opacity:new l.Uniform1f(R,U.u_opacity),u_image0:new l.Uniform1i(R,U.u_image0),u_image1:new l.Uniform1i(R,U.u_image1),u_brightness_low:new l.Uniform1f(R,U.u_brightness_low),u_brightness_high:new l.Uniform1f(R,U.u_brightness_high),u_saturation_factor:new l.Uniform1f(R,U.u_saturation_factor),u_contrast_factor:new l.Uniform1f(R,U.u_contrast_factor),u_spin_weights:new l.Uniform3f(R,U.u_spin_weights)}},symbolIcon:function(R,U){return{u_is_size_zoom_constant:new l.Uniform1i(R,U.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(R,U.u_is_size_feature_constant),u_size_t:new l.Uniform1f(R,U.u_size_t),u_size:new l.Uniform1f(R,U.u_size),u_camera_to_center_distance:new l.Uniform1f(R,U.u_camera_to_center_distance),u_pitch:new l.Uniform1f(R,U.u_pitch),u_rotate_symbol:new l.Uniform1i(R,U.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(R,U.u_aspect_ratio),u_fade_change:new l.Uniform1f(R,U.u_fade_change),u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(R,U.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(R,U.u_coord_matrix),u_is_text:new l.Uniform1i(R,U.u_is_text),u_pitch_with_map:new l.Uniform1i(R,U.u_pitch_with_map),u_texsize:new l.Uniform2f(R,U.u_texsize),u_texture:new l.Uniform1i(R,U.u_texture)}},symbolSDF:function(R,U){return{u_is_size_zoom_constant:new l.Uniform1i(R,U.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(R,U.u_is_size_feature_constant),u_size_t:new l.Uniform1f(R,U.u_size_t),u_size:new l.Uniform1f(R,U.u_size),u_camera_to_center_distance:new l.Uniform1f(R,U.u_camera_to_center_distance),u_pitch:new l.Uniform1f(R,U.u_pitch),u_rotate_symbol:new l.Uniform1i(R,U.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(R,U.u_aspect_ratio),u_fade_change:new l.Uniform1f(R,U.u_fade_change),u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(R,U.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(R,U.u_coord_matrix),u_is_text:new l.Uniform1i(R,U.u_is_text),u_pitch_with_map:new l.Uniform1i(R,U.u_pitch_with_map),u_texsize:new l.Uniform2f(R,U.u_texsize),u_texture:new l.Uniform1i(R,U.u_texture),u_gamma_scale:new l.Uniform1f(R,U.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(R,U.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(R,U.u_is_halo)}},symbolTextAndIcon:function(R,U){return{u_is_size_zoom_constant:new l.Uniform1i(R,U.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(R,U.u_is_size_feature_constant),u_size_t:new l.Uniform1f(R,U.u_size_t),u_size:new l.Uniform1f(R,U.u_size),u_camera_to_center_distance:new l.Uniform1f(R,U.u_camera_to_center_distance),u_pitch:new l.Uniform1f(R,U.u_pitch),u_rotate_symbol:new l.Uniform1i(R,U.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(R,U.u_aspect_ratio),u_fade_change:new l.Uniform1f(R,U.u_fade_change),u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(R,U.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(R,U.u_coord_matrix),u_is_text:new l.Uniform1i(R,U.u_is_text),u_pitch_with_map:new l.Uniform1i(R,U.u_pitch_with_map),u_texsize:new l.Uniform2f(R,U.u_texsize),u_texsize_icon:new l.Uniform2f(R,U.u_texsize_icon),u_texture:new l.Uniform1i(R,U.u_texture),u_texture_icon:new l.Uniform1i(R,U.u_texture_icon),u_gamma_scale:new l.Uniform1f(R,U.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(R,U.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(R,U.u_is_halo)}},background:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_opacity:new l.Uniform1f(R,U.u_opacity),u_color:new l.UniformColor(R,U.u_color)}},backgroundPattern:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_opacity:new l.Uniform1f(R,U.u_opacity),u_image:new l.Uniform1i(R,U.u_image),u_pattern_tl_a:new l.Uniform2f(R,U.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(R,U.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(R,U.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(R,U.u_pattern_br_b),u_texsize:new l.Uniform2f(R,U.u_texsize),u_mix:new l.Uniform1f(R,U.u_mix),u_pattern_size_a:new l.Uniform2f(R,U.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(R,U.u_pattern_size_b),u_scale_a:new l.Uniform1f(R,U.u_scale_a),u_scale_b:new l.Uniform1f(R,U.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(R,U.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(R,U.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(R,U.u_tile_units_to_pixels)}}};function Os(R,U,j,X,fe,Me,B){for(var K=R.context,ie=K.gl,de=R.useProgram("collisionBox"),ye=[],Le=0,Be=0,je=0;je<X.length;je++){var qe=X[je],Ze=U.getTile(qe),Qe=Ze.getBucket(j);if(Qe){var lt=qe.posMatrix;fe[0]===0&&fe[1]===0||(lt=R.translatePosMatrix(qe.posMatrix,Ze,fe,Me));var ht=B?Qe.textCollisionBox:Qe.iconCollisionBox,St=Qe.collisionCircleArray;if(St.length>0){var Lt=l.create(),Mt=lt;l.mul(Lt,Qe.placementInvProjMatrix,R.transform.glCoordMatrix),l.mul(Lt,Lt,Qe.placementViewportMatrix),ye.push({circleArray:St,circleOffset:Be,transform:Mt,invTransform:Lt}),Be=Le+=St.length/4}ht&&de.draw(K,ie.LINES,Ot.disabled,Ye.disabled,R.colorModeForRenderPass(),Ve.disabled,qs(lt,R.transform,Ze),j.id,ht.layoutVertexBuffer,ht.indexBuffer,ht.segments,null,R.transform.zoom,null,null,ht.collisionVertexBuffer)}}if(B&&ye.length){var Ft=R.useProgram("collisionCircle"),Et=new l.StructArrayLayout2f1f2i16;Et.resize(4*Le),Et._trim();for(var en=0,Zt=0,Vt=ye;Zt<Vt.length;Zt+=1)for(var pn=Vt[Zt],vn=0;vn<pn.circleArray.length/4;vn++){var zn=4*vn,Rn=pn.circleArray[zn+0],Un=pn.circleArray[zn+1],Yn=pn.circleArray[zn+2],or=pn.circleArray[zn+3];Et.emplace(en++,Rn,Un,Yn,or,0),Et.emplace(en++,Rn,Un,Yn,or,1),Et.emplace(en++,Rn,Un,Yn,or,2),Et.emplace(en++,Rn,Un,Yn,or,3)}(!bo||bo.length<2*Le)&&(bo=function(fr){var yr=2*fr,Mr=new l.StructArrayLayout3ui6;Mr.resize(yr),Mr._trim();for(var Ir=0;Ir<yr;Ir++){var Br=6*Ir;Mr.uint16[Br+0]=4*Ir+0,Mr.uint16[Br+1]=4*Ir+1,Mr.uint16[Br+2]=4*Ir+2,Mr.uint16[Br+3]=4*Ir+2,Mr.uint16[Br+4]=4*Ir+3,Mr.uint16[Br+5]=4*Ir+0}return Mr}(Le));for(var ir=K.createIndexBuffer(bo,!0),cr=K.createVertexBuffer(Et,l.collisionCircleLayout.members,!0),mr=0,Lr=ye;mr<Lr.length;mr+=1){var Bn=Lr[mr],rr=al(Bn.transform,Bn.invTransform,R.transform);Ft.draw(K,ie.TRIANGLES,Ot.disabled,Ye.disabled,R.colorModeForRenderPass(),Ve.disabled,rr,j.id,cr,ir,l.SegmentVector.simpleSegment(0,2*Bn.circleOffset,Bn.circleArray.length,Bn.circleArray.length/2),null,R.transform.zoom,null,null,null)}cr.destroy(),ir.destroy()}}var ll=l.identity(new Float32Array(16));function ul(R,U,j,X,fe,Me){var B=l.getAnchorAlignment(R),K=-(B.horizontalAlign-.5)*U,ie=-(B.verticalAlign-.5)*j,de=l.evaluateVariableOffset(R,X);return new l.Point((K/fe+de[0])*Me,(ie/fe+de[1])*Me)}function gs(R,U,j,X,fe,Me,B,K,ie,de,ye){var Le=R.text.placedSymbolArray,Be=R.text.dynamicLayoutVertexArray,je=R.icon.dynamicLayoutVertexArray,qe={};Be.clear();for(var Ze=0;Ze<Le.length;Ze++){var Qe=Le.get(Ze),lt=R.allowVerticalPlacement&&!Qe.placedOrientation,ht=Qe.hidden||!Qe.crossTileID||lt?null:X[Qe.crossTileID];if(ht){var St=new l.Point(Qe.anchorX,Qe.anchorY),Lt=Ht(St,j?K:B),Mt=nn(Me.cameraToCenterDistance,Lt.signedDistanceFromCamera),Ft=fe.evaluateSizeForFeature(R.textSizeData,de,Qe)*Mt/l.ONE_EM;j&&(Ft*=R.tilePixelRatio/ie);for(var Et=ht.width,en=ht.height,Zt=ul(ht.anchor,Et,en,ht.textOffset,ht.textBoxScale,Ft),Vt=j?Ht(St.add(Zt),B).point:Lt.point.add(U?Zt.rotate(-Me.angle):Zt),pn=R.allowVerticalPlacement&&Qe.placedOrientation===l.WritingMode.vertical?Math.PI/2:0,vn=0;vn<Qe.numGlyphs;vn++)l.addDynamicAttributes(Be,Vt,pn);ye&&Qe.associatedIconIndex>=0&&(qe[Qe.associatedIconIndex]={shiftedAnchor:Vt,angle:pn})}else Wn(Qe.numGlyphs,Be)}if(ye){je.clear();for(var zn=R.icon.placedSymbolArray,Rn=0;Rn<zn.length;Rn++){var Un=zn.get(Rn);if(Un.hidden)Wn(Un.numGlyphs,je);else{var Yn=qe[Rn];if(Yn)for(var or=0;or<Un.numGlyphs;or++)l.addDynamicAttributes(je,Yn.shiftedAnchor,Yn.angle);else Wn(Un.numGlyphs,je)}}R.icon.dynamicLayoutVertexBuffer.updateData(je)}R.text.dynamicLayoutVertexBuffer.updateData(Be)}function ns(R,U,j){return j.iconsInText&&U?"symbolTextAndIcon":R?"symbolSDF":"symbolIcon"}function vs(R,U,j,X,fe,Me,B,K,ie,de,ye,Le){for(var Be=R.context,je=Be.gl,qe=R.transform,Ze=K==="map",Qe=ie==="map",lt=Ze&&j.layout.get("symbol-placement")!=="point",ht=Ze&&!Qe&&!lt,St=j.layout.get("symbol-sort-key").constantOr(1)!==void 0,Lt=R.depthModeForSublayer(0,Ot.ReadOnly),Mt=j.layout.get("text-variable-anchor"),Ft=[],Et=0,en=X;Et<en.length;Et+=1){var Zt=en[Et],Vt=U.getTile(Zt),pn=Vt.getBucket(j);if(pn){var vn=fe?pn.text:pn.icon;if(vn&&vn.segments.get().length){var zn=vn.programConfigurations.get(j.id),Rn=fe||pn.sdfIcons,Un=fe?pn.textSizeData:pn.iconSizeData,Yn=Qe||qe.pitch!==0,or=R.useProgram(ns(Rn,fe,pn),zn),ir=l.evaluateSizeForZoom(Un,qe.zoom),cr=void 0,mr=[0,0],Lr=void 0,Bn=void 0,rr=null,fr=void 0;if(fe){if(Lr=Vt.glyphAtlasTexture,Bn=je.LINEAR,cr=Vt.glyphAtlasTexture.size,pn.iconsInText){mr=Vt.imageAtlasTexture.size,rr=Vt.imageAtlasTexture;var yr=Un.kind==="composite"||Un.kind==="camera";fr=Yn||R.options.rotating||R.options.zooming||yr?je.LINEAR:je.NEAREST}}else{var Mr=j.layout.get("icon-size").constantOr(0)!==1||pn.iconsNeedLinear;Lr=Vt.imageAtlasTexture,Bn=Rn||R.options.rotating||R.options.zooming||Mr||Yn?je.LINEAR:je.NEAREST,cr=Vt.imageAtlasTexture.size}var Ir=Gn(Vt,1,R.transform.zoom),Br=xn(Zt.posMatrix,Qe,Ze,R.transform,Ir),Zr=un(Zt.posMatrix,Qe,Ze,R.transform,Ir),oi=Mt&&pn.hasTextData(),si=j.layout.get("icon-text-fit")!=="none"&&oi&&pn.hasIconData();lt&&on(pn,Zt.posMatrix,R,fe,Br,Zr,Qe,de);var Yr=R.translatePosMatrix(Zt.posMatrix,Vt,Me,B),wi=lt||fe&&Mt||si?ll:Br,Hi=R.translatePosMatrix(Zr,Vt,Me,B,!0),Li=Rn&&j.paint.get(fe?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Ri={program:or,buffers:vn,uniformValues:Rn?pn.iconsInText?ds(Un.kind,ir,ht,Qe,R,Yr,wi,Hi,cr,mr):Da(Un.kind,ir,ht,Qe,R,Yr,wi,Hi,fe,cr,!0):$r(Un.kind,ir,ht,Qe,R,Yr,wi,Hi,fe,cr),atlasTexture:Lr,atlasTextureIcon:rr,atlasInterpolation:Bn,atlasInterpolationIcon:fr,isSDF:Rn,hasHalo:Li};if(St)for(var Ur=0,Fr=vn.segments.get();Ur<Fr.length;Ur+=1){var li=Fr[Ur];Ft.push({segments:new l.SegmentVector([li]),sortKey:li.sortKey,state:Ri})}else Ft.push({segments:vn.segments,sortKey:0,state:Ri})}}}St&&Ft.sort(function(Qo,ga){return Qo.sortKey-ga.sortKey});for(var ti=0,fi=Ft;ti<fi.length;ti+=1){var sa=fi[ti],mi=sa.state;if(Be.activeTexture.set(je.TEXTURE0),mi.atlasTexture.bind(mi.atlasInterpolation,je.CLAMP_TO_EDGE),mi.atlasTextureIcon&&(Be.activeTexture.set(je.TEXTURE1),mi.atlasTextureIcon&&mi.atlasTextureIcon.bind(mi.atlasInterpolationIcon,je.CLAMP_TO_EDGE)),mi.isSDF){var Wr=mi.uniformValues;mi.hasHalo&&(Wr.u_is_halo=1,_o(mi.buffers,sa.segments,j,R,mi.program,Lt,ye,Le,Wr)),Wr.u_is_halo=0}_o(mi.buffers,sa.segments,j,R,mi.program,Lt,ye,Le,mi.uniformValues)}}function _o(R,U,j,X,fe,Me,B,K,ie){var de=X.context,ye=de.gl;fe.draw(de,ye.TRIANGLES,Me,B,K,Ve.disabled,ie,j.id,R.layoutVertexBuffer,R.indexBuffer,U,j.paint,X.transform.zoom,R.programConfigurations.get(j.id),R.dynamicLayoutVertexBuffer,R.opacityVertexBuffer)}function ao(R,U,j,X,fe,Me,B){var K,ie,de,ye,Le,Be=R.context.gl,je=j.paint.get("fill-pattern"),qe=je&&je.constantOr(1),Ze=j.getCrossfadeParameters();B?(ie=qe&&!j.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",K=Be.LINES):(ie=qe?"fillPattern":"fill",K=Be.TRIANGLES);for(var Qe=0,lt=X;Qe<lt.length;Qe+=1){var ht=lt[Qe],St=U.getTile(ht);if(!qe||St.patternsLoaded()){var Lt=St.getBucket(j);if(Lt){var Mt=Lt.programConfigurations.get(j.id),Ft=R.useProgram(ie,Mt);qe&&(R.context.activeTexture.set(Be.TEXTURE0),St.imageAtlasTexture.bind(Be.LINEAR,Be.CLAMP_TO_EDGE),Mt.updatePaintBuffers(Ze));var Et=je.constantOr(null);if(Et&&St.imageAtlas){var en=St.imageAtlas,Zt=en.patternPositions[Et.to.toString()],Vt=en.patternPositions[Et.from.toString()];Zt&&Vt&&Mt.setConstantPatternPositions(Zt,Vt)}var pn=R.translatePosMatrix(ht.posMatrix,St,j.paint.get("fill-translate"),j.paint.get("fill-translate-anchor"));if(B){ye=Lt.indexBuffer2,Le=Lt.segments2;var vn=[Be.drawingBufferWidth,Be.drawingBufferHeight];de=ie==="fillOutlinePattern"&&qe?yo(pn,R,Ze,St,vn):rl(pn,vn)}else ye=Lt.indexBuffer,Le=Lt.segments,de=qe?Cs(pn,R,Ze,St):ro(pn);Ft.draw(R.context,K,fe,R.stencilModeForClipping(ht),Me,Ve.disabled,de,j.id,Lt.layoutVertexBuffer,ye,Le,j.paint,R.transform.zoom,Mt)}}}}function wo(R,U,j,X,fe,Me,B){for(var K=R.context,ie=K.gl,de=j.paint.get("fill-extrusion-pattern"),ye=de.constantOr(1),Le=j.getCrossfadeParameters(),Be=j.paint.get("fill-extrusion-opacity"),je=0,qe=X;je<qe.length;je+=1){var Ze=qe[je],Qe=U.getTile(Ze),lt=Qe.getBucket(j);if(lt){var ht=lt.programConfigurations.get(j.id),St=R.useProgram(ye?"fillExtrusionPattern":"fillExtrusion",ht);ye&&(R.context.activeTexture.set(ie.TEXTURE0),Qe.imageAtlasTexture.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),ht.updatePaintBuffers(Le));var Lt=de.constantOr(null);if(Lt&&Qe.imageAtlas){var Mt=Qe.imageAtlas,Ft=Mt.patternPositions[Lt.to.toString()],Et=Mt.patternPositions[Lt.from.toString()];Ft&&Et&&ht.setConstantPatternPositions(Ft,Et)}var en=R.translatePosMatrix(Ze.posMatrix,Qe,j.paint.get("fill-extrusion-translate"),j.paint.get("fill-extrusion-translate-anchor")),Zt=j.paint.get("fill-extrusion-vertical-gradient"),Vt=ye?no(en,R,Zt,Be,Ze,Le,Qe):mo(en,R,Zt,Be);St.draw(K,K.gl.TRIANGLES,fe,Me,B,Ve.backCCW,Vt,j.id,lt.layoutVertexBuffer,lt.indexBuffer,lt.segments,j.paint,R.transform.zoom,ht)}}}function oo(R,U,j,X,fe,Me){var B=R.context,K=B.gl,ie=U.fbo;if(ie){var de=R.useProgram("hillshade");B.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,ie.colorAttachment.get());var ye=No(R,U,j);de.draw(B,K.TRIANGLES,X,fe,Me,Ve.disabled,ye,j.id,R.rasterBoundsBuffer,R.quadTriangleIndexBuffer,R.rasterBoundsSegments)}}function Is(R,U,j,X,fe,Me,B){var K=R.context,ie=K.gl,de=U.dem;if(de&&de.data){var ye=de.dim,Le=de.stride,Be=de.getPixels();if(K.activeTexture.set(ie.TEXTURE1),K.pixelStoreUnpackPremultiplyAlpha.set(!1),U.demTexture=U.demTexture||R.getTileTexture(Le),U.demTexture){var je=U.demTexture;je.update(Be,{premultiply:!1}),je.bind(ie.NEAREST,ie.CLAMP_TO_EDGE)}else U.demTexture=new l.Texture(K,Be,ie.RGBA,{premultiply:!1}),U.demTexture.bind(ie.NEAREST,ie.CLAMP_TO_EDGE);K.activeTexture.set(ie.TEXTURE0);var qe=U.fbo;if(!qe){var Ze=new l.Texture(K,{width:ye,height:ye,data:null},ie.RGBA);Ze.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),(qe=U.fbo=K.createFramebuffer(ye,ye,!0)).colorAttachment.set(Ze.texture)}K.bindFramebuffer.set(qe.framebuffer),K.viewport.set([0,0,ye,ye]),R.useProgram("hillshadePrepare").draw(K,ie.TRIANGLES,fe,Me,B,Ve.disabled,ts(U.tileID,de,X),j.id,R.rasterBoundsBuffer,R.quadTriangleIndexBuffer,R.rasterBoundsSegments),U.needsHillshadePrepare=!1}}function za(R,U,j,X,fe){var Me=X.paint.get("raster-fade-duration");if(Me>0){var B=l.browser.now(),K=(B-R.timeAdded)/Me,ie=U?(B-U.timeAdded)/Me:-1,de=j.getSource(),ye=fe.coveringZoomLevel({tileSize:de.tileSize,roundZoom:de.roundZoom}),Le=!U||Math.abs(U.tileID.overscaledZ-ye)>Math.abs(R.tileID.overscaledZ-ye),Be=Le&&R.refreshedUponExpiration?1:l.clamp(Le?K:1-ie,0,1);return R.refreshedUponExpiration&&K>=1&&(R.refreshedUponExpiration=!1),U?{opacity:1,mix:1-Be}:{opacity:Be,mix:0}}return{opacity:1,mix:0}}var cl=new l.Color(1,0,0,1),fl=new l.Color(0,1,0,1),Ds=new l.Color(0,0,1,1),To=new l.Color(1,0,1,1),zs=new l.Color(0,1,1,1);function Vo(R){var U=R.transform.padding;Ws(R,R.transform.height-(U.top||0),3,cl),Ws(R,U.bottom||0,3,fl),rs(R,U.left||0,3,Ds),rs(R,R.transform.width-(U.right||0),3,To);var j=R.transform.centerPoint;(function(X,fe,Me,B){var K=20,ie=2;Ho(X,fe-ie/2,Me-K/2,ie,K,B),Ho(X,fe-K/2,Me-ie/2,K,ie,B)})(R,j.x,R.transform.height-j.y,zs)}function Ws(R,U,j,X){Ho(R,0,U+j/2,R.transform.width,j,X)}function rs(R,U,j,X){Ho(R,U-j/2,0,j,R.transform.height,X)}function Ho(R,U,j,X,fe,Me){var B=R.context,K=B.gl;K.enable(K.SCISSOR_TEST),K.scissor(U*l.browser.devicePixelRatio,j*l.browser.devicePixelRatio,X*l.browser.devicePixelRatio,fe*l.browser.devicePixelRatio),B.clear({color:Me}),K.disable(K.SCISSOR_TEST)}function ms(R,U,j){var X=R.context,fe=X.gl,Me=j.posMatrix,B=R.useProgram("debug"),K=Ot.disabled,ie=Ye.disabled,de=R.colorModeForRenderPass(),ye="$debug";X.activeTexture.set(fe.TEXTURE0),R.emptyTexture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE),B.draw(X,fe.LINE_STRIP,K,ie,de,Ve.disabled,Gs(Me,l.Color.red),ye,R.debugBuffer,R.tileBorderIndexBuffer,R.debugSegments);var Le=U.getTileByID(j.key).latestRawTileData,Be=Le&&Le.byteLength||0,je=Math.floor(Be/1024),qe=U.getTile(j).tileSize,Ze=512/Math.min(qe,512)*(j.overscaledZ/R.transform.zoom)*.5,Qe=j.canonical.toString();j.overscaledZ!==j.canonical.z&&(Qe+=" => "+j.overscaledZ),function(lt,ht){lt.initDebugOverlayCanvas();var St=lt.debugOverlayCanvas,Lt=lt.context.gl,Mt=lt.debugOverlayCanvas.getContext("2d");Mt.clearRect(0,0,St.width,St.height),Mt.shadowColor="white",Mt.shadowBlur=2,Mt.lineWidth=1.5,Mt.strokeStyle="white",Mt.textBaseline="top",Mt.font="bold 36px Open Sans, sans-serif",Mt.fillText(ht,5,5),Mt.strokeText(ht,5,5),lt.debugOverlayTexture.update(St),lt.debugOverlayTexture.bind(Lt.LINEAR,Lt.CLAMP_TO_EDGE)}(R,Qe+" "+je+"kb"),B.draw(X,fe.TRIANGLES,K,ie,Xe.alphaBlended,Ve.disabled,Gs(Me,l.Color.transparent,Ze),ye,R.debugBuffer,R.quadTriangleIndexBuffer,R.debugSegments)}var is={symbol:function(R,U,j,X,fe){if(R.renderPass==="translucent"){var Me=Ye.disabled,B=R.colorModeForRenderPass();j.layout.get("text-variable-anchor")&&function(K,ie,de,ye,Le,Be,je){for(var qe=ie.transform,Ze=Le==="map",Qe=Be==="map",lt=0,ht=K;lt<ht.length;lt+=1){var St=ht[lt],Lt=ye.getTile(St),Mt=Lt.getBucket(de);if(Mt&&Mt.text&&Mt.text.segments.get().length){var Ft=Mt.textSizeData,Et=l.evaluateSizeForZoom(Ft,qe.zoom),en=Gn(Lt,1,ie.transform.zoom),Zt=xn(St.posMatrix,Qe,Ze,ie.transform,en),Vt=de.layout.get("icon-text-fit")!=="none"&&Mt.hasIconData();if(Et){var pn=Math.pow(2,qe.zoom-Lt.tileID.overscaledZ);gs(Mt,Ze,Qe,je,l.symbolSize,qe,Zt,St.posMatrix,pn,Et,Vt)}}}}(X,R,j,U,j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),fe),j.paint.get("icon-opacity").constantOr(1)!==0&&vs(R,U,j,X,!1,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),j.layout.get("icon-rotation-alignment"),j.layout.get("icon-pitch-alignment"),j.layout.get("icon-keep-upright"),Me,B),j.paint.get("text-opacity").constantOr(1)!==0&&vs(R,U,j,X,!0,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),j.layout.get("text-keep-upright"),Me,B),U.map.showCollisionBoxes&&(Os(R,U,j,X,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),!0),Os(R,U,j,X,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),!1))}},circle:function(R,U,j,X){if(R.renderPass==="translucent"){var fe=j.paint.get("circle-opacity"),Me=j.paint.get("circle-stroke-width"),B=j.paint.get("circle-stroke-opacity"),K=j.layout.get("circle-sort-key").constantOr(1)!==void 0;if(fe.constantOr(1)!==0||Me.constantOr(1)!==0&&B.constantOr(1)!==0){for(var ie=R.context,de=ie.gl,ye=R.depthModeForSublayer(0,Ot.ReadOnly),Le=Ye.disabled,Be=R.colorModeForRenderPass(),je=[],qe=0;qe<X.length;qe++){var Ze=X[qe],Qe=U.getTile(Ze),lt=Qe.getBucket(j);if(lt){var ht=lt.programConfigurations.get(j.id),St={programConfiguration:ht,program:R.useProgram("circle",ht),layoutVertexBuffer:lt.layoutVertexBuffer,indexBuffer:lt.indexBuffer,uniformValues:il(R,Ze,Qe,j)};if(K)for(var Lt=0,Mt=lt.segments.get();Lt<Mt.length;Lt+=1){var Ft=Mt[Lt];je.push({segments:new l.SegmentVector([Ft]),sortKey:Ft.sortKey,state:St})}else je.push({segments:lt.segments,sortKey:0,state:St})}}K&&je.sort(function(or,ir){return or.sortKey-ir.sortKey});for(var Et=0,en=je;Et<en.length;Et+=1){var Zt=en[Et],Vt=Zt.state,pn=Vt.programConfiguration,vn=Vt.program,zn=Vt.layoutVertexBuffer,Rn=Vt.indexBuffer,Un=Vt.uniformValues,Yn=Zt.segments;vn.draw(ie,de.TRIANGLES,ye,Le,Be,Ve.disabled,Un,j.id,zn,Rn,Yn,j.paint,R.transform.zoom,pn)}}}},heatmap:function(R,U,j,X){if(j.paint.get("heatmap-opacity")!==0)if(R.renderPass==="offscreen"){var fe=R.context,Me=fe.gl,B=Ye.disabled,K=new Xe([Me.ONE,Me.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(Ze,Qe,lt){var ht=Ze.gl;Ze.activeTexture.set(ht.TEXTURE1),Ze.viewport.set([0,0,Qe.width/4,Qe.height/4]);var St=lt.heatmapFbo;if(St)ht.bindTexture(ht.TEXTURE_2D,St.colorAttachment.get()),Ze.bindFramebuffer.set(St.framebuffer);else{var Lt=ht.createTexture();ht.bindTexture(ht.TEXTURE_2D,Lt),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_WRAP_S,ht.CLAMP_TO_EDGE),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_WRAP_T,ht.CLAMP_TO_EDGE),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_MIN_FILTER,ht.LINEAR),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_MAG_FILTER,ht.LINEAR),St=lt.heatmapFbo=Ze.createFramebuffer(Qe.width/4,Qe.height/4,!1),function(Mt,Ft,Et,en){var Zt=Mt.gl,Vt=Mt.extRenderToTextureHalfFloat?Mt.extTextureHalfFloat.HALF_FLOAT_OES:Zt.UNSIGNED_BYTE;Zt.texImage2D(Zt.TEXTURE_2D,0,Zt.RGBA,Ft.width/4,Ft.height/4,0,Zt.RGBA,Vt,null),en.colorAttachment.set(Et)}(Ze,Qe,Lt,St)}})(fe,R,j),fe.clear({color:l.Color.transparent});for(var ie=0;ie<X.length;ie++){var de=X[ie];if(!U.hasRenderableParent(de)){var ye=U.getTile(de),Le=ye.getBucket(j);if(Le){var Be=Le.programConfigurations.get(j.id),je=R.useProgram("heatmap",Be),qe=R.transform.zoom;je.draw(fe,Me.TRIANGLES,Ot.disabled,B,K,Ve.disabled,es(de.posMatrix,ye,qe,j.paint.get("heatmap-intensity")),j.id,Le.layoutVertexBuffer,Le.indexBuffer,Le.segments,j.paint,R.transform.zoom,Be)}}}fe.viewport.set([0,0,R.width,R.height])}else R.renderPass==="translucent"&&(R.context.setColorMode(R.colorModeForRenderPass()),function(Ze,Qe){var lt=Ze.context,ht=lt.gl,St=Qe.heatmapFbo;if(St){lt.activeTexture.set(ht.TEXTURE0),ht.bindTexture(ht.TEXTURE_2D,St.colorAttachment.get()),lt.activeTexture.set(ht.TEXTURE1);var Lt=Qe.colorRampTexture;Lt||(Lt=Qe.colorRampTexture=new l.Texture(lt,Qe.colorRamp,ht.RGBA)),Lt.bind(ht.LINEAR,ht.CLAMP_TO_EDGE),Ze.useProgram("heatmapTexture").draw(lt,ht.TRIANGLES,Ot.disabled,Ye.disabled,Ze.colorModeForRenderPass(),Ve.disabled,xo(Ze,Qe,0,1),Qe.id,Ze.viewportBuffer,Ze.quadTriangleIndexBuffer,Ze.viewportSegments,Qe.paint,Ze.transform.zoom)}}(R,j))},line:function(R,U,j,X){if(R.renderPass==="translucent"){var fe=j.paint.get("line-opacity"),Me=j.paint.get("line-width");if(fe.constantOr(1)!==0&&Me.constantOr(1)!==0){var B=R.depthModeForSublayer(0,Ot.ReadOnly),K=R.colorModeForRenderPass(),ie=j.paint.get("line-dasharray"),de=j.paint.get("line-pattern"),ye=de.constantOr(1),Le=j.paint.get("line-gradient"),Be=j.getCrossfadeParameters(),je=ye?"linePattern":ie?"lineSDF":Le?"lineGradient":"line",qe=R.context,Ze=qe.gl,Qe=!0;if(Le){qe.activeTexture.set(Ze.TEXTURE0);var lt=j.gradientTexture;if(!j.gradient)return;lt||(lt=j.gradientTexture=new l.Texture(qe,j.gradient,Ze.RGBA)),lt.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE)}for(var ht=0,St=X;ht<St.length;ht+=1){var Lt=St[ht],Mt=U.getTile(Lt);if(!ye||Mt.patternsLoaded()){var Ft=Mt.getBucket(j);if(Ft){var Et=Ft.programConfigurations.get(j.id),en=R.context.program.get(),Zt=R.useProgram(je,Et),Vt=Qe||Zt.program!==en,pn=de.constantOr(null);if(pn&&Mt.imageAtlas){var vn=Mt.imageAtlas,zn=vn.patternPositions[pn.to.toString()],Rn=vn.patternPositions[pn.from.toString()];zn&&Rn&&Et.setConstantPatternPositions(zn,Rn)}var Un=ye?Ys(R,Mt,j,Be):ie?Aa(R,Mt,j,ie,Be):Le?Zs(R,Mt,j):Ps(R,Mt,j);ye?(qe.activeTexture.set(Ze.TEXTURE0),Mt.imageAtlasTexture.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE),Et.updatePaintBuffers(Be)):ie&&(Vt||R.lineAtlas.dirty)&&(qe.activeTexture.set(Ze.TEXTURE0),R.lineAtlas.bind(qe)),Zt.draw(qe,Ze.TRIANGLES,B,R.stencilModeForClipping(Lt),K,Ve.disabled,Un,j.id,Ft.layoutVertexBuffer,Ft.indexBuffer,Ft.segments,j.paint,R.transform.zoom,Et),Qe=!1}}}}}},fill:function(R,U,j,X){var fe=j.paint.get("fill-color"),Me=j.paint.get("fill-opacity");if(Me.constantOr(1)!==0){var B=R.colorModeForRenderPass(),K=j.paint.get("fill-pattern"),ie=R.opaquePassEnabledForLayer()&&!K.constantOr(1)&&fe.constantOr(l.Color.transparent).a===1&&Me.constantOr(0)===1?"opaque":"translucent";if(R.renderPass===ie){var de=R.depthModeForSublayer(1,R.renderPass==="opaque"?Ot.ReadWrite:Ot.ReadOnly);ao(R,U,j,X,de,B,!1)}if(R.renderPass==="translucent"&&j.paint.get("fill-antialias")){var ye=R.depthModeForSublayer(j.getPaintProperty("fill-outline-color")?2:0,Ot.ReadOnly);ao(R,U,j,X,ye,B,!0)}}},"fill-extrusion":function(R,U,j,X){var fe=j.paint.get("fill-extrusion-opacity");if(fe!==0&&R.renderPass==="translucent"){var Me=new Ot(R.context.gl.LEQUAL,Ot.ReadWrite,R.depthRangeFor3D);if(fe!==1||j.paint.get("fill-extrusion-pattern").constantOr(1))wo(R,U,j,X,Me,Ye.disabled,Xe.disabled),wo(R,U,j,X,Me,R.stencilModeFor3D(),R.colorModeForRenderPass());else{var B=R.colorModeForRenderPass();wo(R,U,j,X,Me,Ye.disabled,B)}}},hillshade:function(R,U,j,X){if(R.renderPass==="offscreen"||R.renderPass==="translucent"){for(var fe=R.context,Me=U.getSource().maxzoom,B=R.depthModeForSublayer(0,Ot.ReadOnly),K=R.colorModeForRenderPass(),ie=R.renderPass==="translucent"?R.stencilConfigForOverlap(X):[{},X],de=ie[0],ye=0,Le=ie[1];ye<Le.length;ye+=1){var Be=Le[ye],je=U.getTile(Be);je.needsHillshadePrepare&&R.renderPass==="offscreen"?Is(R,je,j,Me,B,Ye.disabled,K):R.renderPass==="translucent"&&oo(R,je,j,B,de[Be.overscaledZ],K)}fe.viewport.set([0,0,R.width,R.height])}},raster:function(R,U,j,X){if(R.renderPass==="translucent"&&j.paint.get("raster-opacity")!==0&&X.length)for(var fe=R.context,Me=fe.gl,B=U.getSource(),K=R.useProgram("raster"),ie=R.colorModeForRenderPass(),de=B instanceof F?[{},X]:R.stencilConfigForOverlap(X),ye=de[0],Le=de[1],Be=Le[Le.length-1].overscaledZ,je=!R.options.moving,qe=0,Ze=Le;qe<Ze.length;qe+=1){var Qe=Ze[qe],lt=R.depthModeForSublayer(Qe.overscaledZ-Be,j.paint.get("raster-opacity")===1?Ot.ReadWrite:Ot.ReadOnly,Me.LESS),ht=U.getTile(Qe),St=R.transform.calculatePosMatrix(Qe.toUnwrapped(),je);ht.registerFadeDuration(j.paint.get("raster-fade-duration"));var Lt=U.findLoadedParent(Qe,0),Mt=za(ht,Lt,U,j,R.transform),Ft=void 0,Et=void 0,en=j.paint.get("raster-resampling")==="nearest"?Me.NEAREST:Me.LINEAR;fe.activeTexture.set(Me.TEXTURE0),ht.texture.bind(en,Me.CLAMP_TO_EDGE,Me.LINEAR_MIPMAP_NEAREST),fe.activeTexture.set(Me.TEXTURE1),Lt?(Lt.texture.bind(en,Me.CLAMP_TO_EDGE,Me.LINEAR_MIPMAP_NEAREST),Ft=Math.pow(2,Lt.tileID.overscaledZ-ht.tileID.overscaledZ),Et=[ht.tileID.canonical.x*Ft%1,ht.tileID.canonical.y*Ft%1]):ht.texture.bind(en,Me.CLAMP_TO_EDGE,Me.LINEAR_MIPMAP_NEAREST);var Zt=io(St,Et||[0,0],Ft||1,Mt,j);B instanceof F?K.draw(fe,Me.TRIANGLES,lt,Ye.disabled,ie,Ve.disabled,Zt,j.id,B.boundsBuffer,R.quadTriangleIndexBuffer,B.boundsSegments):K.draw(fe,Me.TRIANGLES,lt,ye[Qe.overscaledZ],ie,Ve.disabled,Zt,j.id,R.rasterBoundsBuffer,R.quadTriangleIndexBuffer,R.rasterBoundsSegments)}},background:function(R,U,j){var X=j.paint.get("background-color"),fe=j.paint.get("background-opacity");if(fe!==0){var Me=R.context,B=Me.gl,K=R.transform,ie=K.tileSize,de=j.paint.get("background-pattern");if(!R.isPatternMissing(de)){var ye=!de&&X.a===1&&fe===1&&R.opaquePassEnabledForLayer()?"opaque":"translucent";if(R.renderPass===ye){var Le=Ye.disabled,Be=R.depthModeForSublayer(0,ye==="opaque"?Ot.ReadWrite:Ot.ReadOnly),je=R.colorModeForRenderPass(),qe=R.useProgram(de?"backgroundPattern":"background"),Ze=K.coveringTiles({tileSize:ie});de&&(Me.activeTexture.set(B.TEXTURE0),R.imageManager.bind(R.context));for(var Qe=j.getCrossfadeParameters(),lt=0,ht=Ze;lt<ht.length;lt+=1){var St=ht[lt],Lt=R.transform.calculatePosMatrix(St.toUnwrapped()),Mt=de?Uo(Lt,fe,R,de,{tileID:St,tileSize:ie},Qe):Ma(Lt,fe,X);qe.draw(Me,B.TRIANGLES,Be,Le,je,Ve.disabled,Mt,j.id,R.tileExtentBuffer,R.quadTriangleIndexBuffer,R.tileExtentSegments)}}}}},debug:function(R,U,j){for(var X=0;X<j.length;X++)ms(R,U,j[X])},custom:function(R,U,j){var X=R.context,fe=j.implementation;if(R.renderPass==="offscreen"){var Me=fe.prerender;Me&&(R.setCustomLayerDefaults(),X.setColorMode(R.colorModeForRenderPass()),Me.call(fe,X.gl,R.transform.customLayerMatrix()),X.setDirty(),R.setBaseState())}else if(R.renderPass==="translucent"){R.setCustomLayerDefaults(),X.setColorMode(R.colorModeForRenderPass()),X.setStencilMode(Ye.disabled);var B=fe.renderingMode==="3d"?new Ot(R.context.gl.LEQUAL,Ot.ReadWrite,R.depthRangeFor3D):R.depthModeForSublayer(0,Ot.ReadOnly);X.setDepthMode(B),fe.render(X.gl,R.transform.customLayerMatrix()),X.setDirty(),R.setBaseState(),X.bindFramebuffer.set(null)}}},Qr=function(R,U){this.context=new We(R),this.transform=U,this._tileTextures={},this.setup(),this.numSublayers=nt.maxUnderzooming+nt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new jn,this.gpuTimers={}};Qr.prototype.resize=function(R,U){if(this.width=R*l.browser.devicePixelRatio,this.height=U*l.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var j=0,X=this.style._order;j<X.length;j+=1){var fe=X[j];this.style._layers[fe].resize()}},Qr.prototype.setup=function(){var R=this.context,U=new l.StructArrayLayout2i4;U.emplaceBack(0,0),U.emplaceBack(l.EXTENT,0),U.emplaceBack(0,l.EXTENT),U.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=R.createVertexBuffer(U,tr.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);var j=new l.StructArrayLayout2i4;j.emplaceBack(0,0),j.emplaceBack(l.EXTENT,0),j.emplaceBack(0,l.EXTENT),j.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=R.createVertexBuffer(j,tr.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);var X=new l.StructArrayLayout4i8;X.emplaceBack(0,0,0,0),X.emplaceBack(l.EXTENT,0,l.EXTENT,0),X.emplaceBack(0,l.EXTENT,0,l.EXTENT),X.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=R.createVertexBuffer(X,N.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);var fe=new l.StructArrayLayout2i4;fe.emplaceBack(0,0),fe.emplaceBack(1,0),fe.emplaceBack(0,1),fe.emplaceBack(1,1),this.viewportBuffer=R.createVertexBuffer(fe,tr.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);var Me=new l.StructArrayLayout1ui2;Me.emplaceBack(0),Me.emplaceBack(1),Me.emplaceBack(3),Me.emplaceBack(2),Me.emplaceBack(0),this.tileBorderIndexBuffer=R.createIndexBuffer(Me);var B=new l.StructArrayLayout3ui6;B.emplaceBack(0,1,2),B.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=R.createIndexBuffer(B),this.emptyTexture=new l.Texture(R,{width:1,height:1,data:new Uint8Array([0,0,0,0])},R.gl.RGBA);var K=this.context.gl;this.stencilClearMode=new Ye({func:K.ALWAYS,mask:0},0,255,K.ZERO,K.ZERO,K.ZERO)},Qr.prototype.clearStencil=function(){var R=this.context,U=R.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var j=l.create();l.ortho(j,0,this.width,this.height,0,0,1),l.scale(j,j,[U.drawingBufferWidth,U.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(R,U.TRIANGLES,Ot.disabled,this.stencilClearMode,Xe.disabled,Ve.disabled,ol(j),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Qr.prototype._renderTileClippingMasks=function(R,U){if(this.currentStencilSource!==R.source&&R.isTileClipped()&&U&&U.length){this.currentStencilSource=R.source;var j=this.context,X=j.gl;this.nextStencilID+U.length>256&&this.clearStencil(),j.setColorMode(Xe.disabled),j.setDepthMode(Ot.disabled);var fe=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Me=0,B=U;Me<B.length;Me+=1){var K=B[Me],ie=this._tileClippingMaskIDs[K.key]=this.nextStencilID++;fe.draw(j,X.TRIANGLES,Ot.disabled,new Ye({func:X.ALWAYS,mask:0},ie,255,X.KEEP,X.KEEP,X.REPLACE),Xe.disabled,Ve.disabled,ol(K.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Qr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var R=this.nextStencilID++,U=this.context.gl;return new Ye({func:U.NOTEQUAL,mask:255},R,255,U.KEEP,U.KEEP,U.REPLACE)},Qr.prototype.stencilModeForClipping=function(R){var U=this.context.gl;return new Ye({func:U.EQUAL,mask:255},this._tileClippingMaskIDs[R.key],0,U.KEEP,U.KEEP,U.REPLACE)},Qr.prototype.stencilConfigForOverlap=function(R){var U,j=this.context.gl,X=R.sort(function(ie,de){return de.overscaledZ-ie.overscaledZ}),fe=X[X.length-1].overscaledZ,Me=X[0].overscaledZ-fe+1;if(Me>1){this.currentStencilSource=void 0,this.nextStencilID+Me>256&&this.clearStencil();for(var B={},K=0;K<Me;K++)B[K+fe]=new Ye({func:j.GEQUAL,mask:255},K+this.nextStencilID,255,j.KEEP,j.KEEP,j.REPLACE);return this.nextStencilID+=Me,[B,X]}return[(U={},U[fe]=Ye.disabled,U),X]},Qr.prototype.colorModeForRenderPass=function(){var R=this.context.gl;if(this._showOverdrawInspector){var U=.125;return new Xe([R.CONSTANT_COLOR,R.ONE],new l.Color(U,U,U,0),[!0,!0,!0,!0])}return this.renderPass==="opaque"?Xe.unblended:Xe.alphaBlended},Qr.prototype.depthModeForSublayer=function(R,U,j){if(!this.opaquePassEnabledForLayer())return Ot.disabled;var X=1-((1+this.currentLayer)*this.numSublayers+R)*this.depthEpsilon;return new Ot(j||this.context.gl.LEQUAL,U,[X,X])},Qr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Qr.prototype.render=function(R,U){var j=this;this.style=R,this.options=U,this.lineAtlas=R.lineAtlas,this.imageManager=R.imageManager,this.glyphManager=R.glyphManager,this.symbolFadeChange=R.placement.symbolFadeChange(l.browser.now()),this.imageManager.beginFrame();var X=this.style._order,fe=this.style.sourceCaches;for(var Me in fe){var B=fe[Me];B.used&&B.prepare(this.context)}var K,ie,de={},ye={},Le={};for(var Be in fe){var je=fe[Be];de[Be]=je.getVisibleCoordinates(),ye[Be]=de[Be].slice().reverse(),Le[Be]=je.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var qe=0;qe<X.length;qe++){var Ze=X[qe];if(this.style._layers[Ze].is3D()){this.opaquePassCutoff=qe;break}}this.renderPass="offscreen";for(var Qe=0,lt=X;Qe<lt.length;Qe+=1){var ht=lt[Qe],St=this.style._layers[ht];if(St.hasOffscreenPass()&&!St.isHidden(this.transform.zoom)){var Lt=ye[St.source];(St.type==="custom"||Lt.length)&&this.renderLayer(this,fe[St.source],St,Lt)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:U.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=U.showOverdrawInspector,this.depthRangeFor3D=[0,1-(R._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=X.length-1;this.currentLayer>=0;this.currentLayer--){var Mt=this.style._layers[X[this.currentLayer]],Ft=fe[Mt.source],Et=de[Mt.source];this._renderTileClippingMasks(Mt,Et),this.renderLayer(this,Ft,Mt,Et)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<X.length;this.currentLayer++){var en=this.style._layers[X[this.currentLayer]],Zt=fe[en.source],Vt=(en.type==="symbol"?Le:ye)[en.source];this._renderTileClippingMasks(en,de[en.source]),this.renderLayer(this,Zt,en,Vt)}this.options.showTileBoundaries&&(l.values(this.style._layers).forEach(function(pn){pn.source&&!pn.isHidden(j.transform.zoom)&&(pn.source!==(ie&&ie.id)&&(ie=j.style.sourceCaches[pn.source]),(!K||K.getSource().maxzoom<ie.getSource().maxzoom)&&(K=ie))}),K&&is.debug(this,K,K.getVisibleCoordinates())),this.options.showPadding&&Vo(this),this.context.setDefault()},Qr.prototype.renderLayer=function(R,U,j,X){j.isHidden(this.transform.zoom)||(j.type==="background"||j.type==="custom"||X.length)&&(this.id=j.id,this.gpuTimingStart(j),is[j.type](R,U,j,X,this.style.placement.variableOffsets),this.gpuTimingEnd())},Qr.prototype.gpuTimingStart=function(R){if(this.options.gpuTiming){var U=this.context.extTimerQuery,j=this.gpuTimers[R.id];j||(j=this.gpuTimers[R.id]={calls:0,cpuTime:0,query:U.createQueryEXT()}),j.calls++,U.beginQueryEXT(U.TIME_ELAPSED_EXT,j.query)}},Qr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var R=this.context.extTimerQuery;R.endQueryEXT(R.TIME_ELAPSED_EXT)}},Qr.prototype.collectGpuTimers=function(){var R=this.gpuTimers;return this.gpuTimers={},R},Qr.prototype.queryGpuTimers=function(R){var U={};for(var j in R){var X=R[j],fe=this.context.extTimerQuery,Me=fe.getQueryObjectEXT(X.query,fe.QUERY_RESULT_EXT)/1e6;fe.deleteQueryEXT(X.query),U[j]=Me}return U},Qr.prototype.translatePosMatrix=function(R,U,j,X,fe){if(!j[0]&&!j[1])return R;var Me=fe?X==="map"?this.transform.angle:0:X==="viewport"?-this.transform.angle:0;if(Me){var B=Math.sin(Me),K=Math.cos(Me);j=[j[0]*K-j[1]*B,j[0]*B+j[1]*K]}var ie=[fe?j[0]:Gn(U,j[0],this.transform.zoom),fe?j[1]:Gn(U,j[1],this.transform.zoom),0],de=new Float32Array(16);return l.translate(de,R,ie),de},Qr.prototype.saveTileTexture=function(R){var U=this._tileTextures[R.size[0]];U?U.push(R):this._tileTextures[R.size[0]]=[R]},Qr.prototype.getTileTexture=function(R){var U=this._tileTextures[R];return U&&U.length>0?U.pop():null},Qr.prototype.isPatternMissing=function(R){if(!R)return!1;if(!R.from||!R.to)return!0;var U=this.imageManager.getPattern(R.from.toString()),j=this.imageManager.getPattern(R.to.toString());return!U||!j},Qr.prototype.useProgram=function(R,U){this.cache=this.cache||{};var j=""+R+(U?U.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[j]||(this.cache[j]=new to(this.context,Za[R],U,yl[R],this._showOverdrawInspector)),this.cache[j]},Qr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Qr.prototype.setBaseState=function(){var R=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(R.FUNC_ADD)},Qr.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=l.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var R=this.context.gl;this.debugOverlayTexture=new l.Texture(this.context,this.debugOverlayCanvas,R.RGBA)}},Qr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var ko=function(R,U){this.points=R,this.planes=U};ko.fromInvProjectionMatrix=function(R,U,j){var X=Math.pow(2,j),fe=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(B){return l.transformMat4([],B,R)}).map(function(B){return l.scale$1([],B,1/B[3]/U*X)}),Me=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(B){var K=l.sub([],fe[B[0]],fe[B[1]]),ie=l.sub([],fe[B[2]],fe[B[1]]),de=l.normalize([],l.cross([],K,ie)),ye=-l.dot(de,fe[B[1]]);return de.concat(ye)});return new ko(fe,Me)};var so=function(R,U){this.min=R,this.max=U,this.center=l.scale$2([],l.add([],this.min,this.max),.5)};so.prototype.quadrant=function(R){for(var U=[R%2==0,R<2],j=l.clone$2(this.min),X=l.clone$2(this.max),fe=0;fe<U.length;fe++)j[fe]=U[fe]?this.min[fe]:this.center[fe],X[fe]=U[fe]?this.center[fe]:this.max[fe];return X[2]=this.max[2],new so(j,X)},so.prototype.distanceX=function(R){return Math.max(Math.min(this.max[0],R[0]),this.min[0])-R[0]},so.prototype.distanceY=function(R){return Math.max(Math.min(this.max[1],R[1]),this.min[1])-R[1]},so.prototype.intersects=function(R){for(var U=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],j=!0,X=0;X<R.planes.length;X++){for(var fe=R.planes[X],Me=0,B=0;B<U.length;B++)Me+=l.dot$1(fe,U[B])>=0;if(Me===0)return 0;Me!==U.length&&(j=!1)}if(j)return 2;for(var K=0;K<3;K++){for(var ie=Number.MAX_VALUE,de=-Number.MAX_VALUE,ye=0;ye<R.points.length;ye++){var Le=R.points[ye][K]-this.min[K];ie=Math.min(ie,Le),de=Math.max(de,Le)}if(de<0||ie>this.max[K]-this.min[K])return 0}return 1};var Ni=function(R,U,j,X){if(R===void 0&&(R=0),U===void 0&&(U=0),j===void 0&&(j=0),X===void 0&&(X=0),isNaN(R)||R<0||isNaN(U)||U<0||isNaN(j)||j<0||isNaN(X)||X<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=R,this.bottom=U,this.left=j,this.right=X};Ni.prototype.interpolate=function(R,U,j){return U.top!=null&&R.top!=null&&(this.top=l.number(R.top,U.top,j)),U.bottom!=null&&R.bottom!=null&&(this.bottom=l.number(R.bottom,U.bottom,j)),U.left!=null&&R.left!=null&&(this.left=l.number(R.left,U.left,j)),U.right!=null&&R.right!=null&&(this.right=l.number(R.right,U.right,j)),this},Ni.prototype.getCenter=function(R,U){var j=l.clamp((this.left+R-this.right)/2,0,R),X=l.clamp((this.top+U-this.bottom)/2,0,U);return new l.Point(j,X)},Ni.prototype.equals=function(R){return this.top===R.top&&this.bottom===R.bottom&&this.left===R.left&&this.right===R.right},Ni.prototype.clone=function(){return new Ni(this.top,this.bottom,this.left,this.right)},Ni.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Nr=function(R,U,j,X,fe){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=fe===void 0||fe,this._minZoom=R||0,this._maxZoom=U||22,this._minPitch=j??0,this._maxPitch=X??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ni,this._posMatrixCache={},this._alignedPosMatrixCache={}},Hr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Nr.prototype.clone=function(){var R=new Nr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return R.tileSize=this.tileSize,R.latRange=this.latRange,R.width=this.width,R.height=this.height,R._center=this._center,R.zoom=this.zoom,R.angle=this.angle,R._fov=this._fov,R._pitch=this._pitch,R._unmodified=this._unmodified,R._edgeInsets=this._edgeInsets.clone(),R._calcMatrices(),R},Hr.minZoom.get=function(){return this._minZoom},Hr.minZoom.set=function(R){this._minZoom!==R&&(this._minZoom=R,this.zoom=Math.max(this.zoom,R))},Hr.maxZoom.get=function(){return this._maxZoom},Hr.maxZoom.set=function(R){this._maxZoom!==R&&(this._maxZoom=R,this.zoom=Math.min(this.zoom,R))},Hr.minPitch.get=function(){return this._minPitch},Hr.minPitch.set=function(R){this._minPitch!==R&&(this._minPitch=R,this.pitch=Math.max(this.pitch,R))},Hr.maxPitch.get=function(){return this._maxPitch},Hr.maxPitch.set=function(R){this._maxPitch!==R&&(this._maxPitch=R,this.pitch=Math.min(this.pitch,R))},Hr.renderWorldCopies.get=function(){return this._renderWorldCopies},Hr.renderWorldCopies.set=function(R){R===void 0?R=!0:R===null&&(R=!1),this._renderWorldCopies=R},Hr.worldSize.get=function(){return this.tileSize*this.scale},Hr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Hr.size.get=function(){return new l.Point(this.width,this.height)},Hr.bearing.get=function(){return-this.angle/Math.PI*180},Hr.bearing.set=function(R){var U=-l.wrap(R,-180,180)*Math.PI/180;this.angle!==U&&(this._unmodified=!1,this.angle=U,this._calcMatrices(),this.rotationMatrix=l.create$2(),l.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Hr.pitch.get=function(){return this._pitch/Math.PI*180},Hr.pitch.set=function(R){var U=l.clamp(R,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==U&&(this._unmodified=!1,this._pitch=U,this._calcMatrices())},Hr.fov.get=function(){return this._fov/Math.PI*180},Hr.fov.set=function(R){R=Math.max(.01,Math.min(60,R)),this._fov!==R&&(this._unmodified=!1,this._fov=R/180*Math.PI,this._calcMatrices())},Hr.zoom.get=function(){return this._zoom},Hr.zoom.set=function(R){var U=Math.min(Math.max(R,this.minZoom),this.maxZoom);this._zoom!==U&&(this._unmodified=!1,this._zoom=U,this.scale=this.zoomScale(U),this.tileZoom=Math.floor(U),this.zoomFraction=U-this.tileZoom,this._constrain(),this._calcMatrices())},Hr.center.get=function(){return this._center},Hr.center.set=function(R){R.lat===this._center.lat&&R.lng===this._center.lng||(this._unmodified=!1,this._center=R,this._constrain(),this._calcMatrices())},Hr.padding.get=function(){return this._edgeInsets.toJSON()},Hr.padding.set=function(R){this._edgeInsets.equals(R)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,R,1),this._calcMatrices())},Hr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Nr.prototype.isPaddingEqual=function(R){return this._edgeInsets.equals(R)},Nr.prototype.interpolatePadding=function(R,U,j){this._unmodified=!1,this._edgeInsets.interpolate(R,U,j),this._constrain(),this._calcMatrices()},Nr.prototype.coveringZoomLevel=function(R){var U=(R.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/R.tileSize));return Math.max(0,U)},Nr.prototype.getVisibleUnwrappedCoordinates=function(R){var U=[new l.UnwrappedTileID(0,R)];if(this._renderWorldCopies)for(var j=this.pointCoordinate(new l.Point(0,0)),X=this.pointCoordinate(new l.Point(this.width,0)),fe=this.pointCoordinate(new l.Point(this.width,this.height)),Me=this.pointCoordinate(new l.Point(0,this.height)),B=Math.floor(Math.min(j.x,X.x,fe.x,Me.x)),K=Math.floor(Math.max(j.x,X.x,fe.x,Me.x)),ie=B-1;ie<=K+1;ie++)ie!==0&&U.push(new l.UnwrappedTileID(ie,R));return U},Nr.prototype.coveringTiles=function(R){var U=this.coveringZoomLevel(R),j=U;if(R.minzoom!==void 0&&U<R.minzoom)return[];R.maxzoom!==void 0&&U>R.maxzoom&&(U=R.maxzoom);var X=l.MercatorCoordinate.fromLngLat(this.center),fe=Math.pow(2,U),Me=[fe*X.x,fe*X.y,0],B=ko.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,U),K=R.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(K=U);var ie=function(Vt){return{aabb:new so([Vt*fe,0,0],[(Vt+1)*fe,fe,0]),zoom:0,x:0,y:0,wrap:Vt,fullyVisible:!1}},de=[],ye=[],Le=U,Be=R.reparseOverscaled?j:U;if(this._renderWorldCopies)for(var je=1;je<=3;je++)de.push(ie(-je)),de.push(ie(je));for(de.push(ie(0));de.length>0;){var qe=de.pop(),Ze=qe.x,Qe=qe.y,lt=qe.fullyVisible;if(!lt){var ht=qe.aabb.intersects(B);if(ht===0)continue;lt=ht===2}var St=qe.aabb.distanceX(Me),Lt=qe.aabb.distanceY(Me),Mt=Math.max(Math.abs(St),Math.abs(Lt)),Ft=3+(1<<Le-qe.zoom)-2;if(qe.zoom===Le||Mt>Ft&&qe.zoom>=K)ye.push({tileID:new l.OverscaledTileID(qe.zoom===Le?Be:qe.zoom,qe.wrap,qe.zoom,Ze,Qe),distanceSq:l.sqrLen([Me[0]-.5-Ze,Me[1]-.5-Qe])});else for(var Et=0;Et<4;Et++){var en=(Ze<<1)+Et%2,Zt=(Qe<<1)+(Et>>1);de.push({aabb:qe.aabb.quadrant(Et),zoom:qe.zoom+1,x:en,y:Zt,wrap:qe.wrap,fullyVisible:lt})}}return ye.sort(function(Vt,pn){return Vt.distanceSq-pn.distanceSq}).map(function(Vt){return Vt.tileID})},Nr.prototype.resize=function(R,U){this.width=R,this.height=U,this.pixelsToGLUnits=[2/R,-2/U],this._constrain(),this._calcMatrices()},Hr.unmodified.get=function(){return this._unmodified},Nr.prototype.zoomScale=function(R){return Math.pow(2,R)},Nr.prototype.scaleZoom=function(R){return Math.log(R)/Math.LN2},Nr.prototype.project=function(R){var U=l.clamp(R.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.Point(l.mercatorXfromLng(R.lng)*this.worldSize,l.mercatorYfromLat(U)*this.worldSize)},Nr.prototype.unproject=function(R){return new l.MercatorCoordinate(R.x/this.worldSize,R.y/this.worldSize).toLngLat()},Hr.point.get=function(){return this.project(this.center)},Nr.prototype.setLocationAtPoint=function(R,U){var j=this.pointCoordinate(U),X=this.pointCoordinate(this.centerPoint),fe=this.locationCoordinate(R),Me=new l.MercatorCoordinate(fe.x-(j.x-X.x),fe.y-(j.y-X.y));this.center=this.coordinateLocation(Me),this._renderWorldCopies&&(this.center=this.center.wrap())},Nr.prototype.locationPoint=function(R){return this.coordinatePoint(this.locationCoordinate(R))},Nr.prototype.pointLocation=function(R){return this.coordinateLocation(this.pointCoordinate(R))},Nr.prototype.locationCoordinate=function(R){return l.MercatorCoordinate.fromLngLat(R)},Nr.prototype.coordinateLocation=function(R){return R.toLngLat()},Nr.prototype.pointCoordinate=function(R){var U=[R.x,R.y,0,1],j=[R.x,R.y,1,1];l.transformMat4(U,U,this.pixelMatrixInverse),l.transformMat4(j,j,this.pixelMatrixInverse);var X=U[3],fe=j[3],Me=U[0]/X,B=j[0]/fe,K=U[1]/X,ie=j[1]/fe,de=U[2]/X,ye=j[2]/fe,Le=de===ye?0:(0-de)/(ye-de);return new l.MercatorCoordinate(l.number(Me,B,Le)/this.worldSize,l.number(K,ie,Le)/this.worldSize)},Nr.prototype.coordinatePoint=function(R){var U=[R.x*this.worldSize,R.y*this.worldSize,0,1];return l.transformMat4(U,U,this.pixelMatrix),new l.Point(U[0]/U[3],U[1]/U[3])},Nr.prototype.getBounds=function(){return new l.LngLatBounds().extend(this.pointLocation(new l.Point(0,0))).extend(this.pointLocation(new l.Point(this.width,0))).extend(this.pointLocation(new l.Point(this.width,this.height))).extend(this.pointLocation(new l.Point(0,this.height)))},Nr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Nr.prototype.setMaxBounds=function(R){R?(this.lngRange=[R.getWest(),R.getEast()],this.latRange=[R.getSouth(),R.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Nr.prototype.calculatePosMatrix=function(R,U){U===void 0&&(U=!1);var j=R.key,X=U?this._alignedPosMatrixCache:this._posMatrixCache;if(X[j])return X[j];var fe=R.canonical,Me=this.worldSize/this.zoomScale(fe.z),B=fe.x+Math.pow(2,fe.z)*R.wrap,K=l.identity(new Float64Array(16));return l.translate(K,K,[B*Me,fe.y*Me,0]),l.scale(K,K,[Me/l.EXTENT,Me/l.EXTENT,1]),l.multiply(K,U?this.alignedProjMatrix:this.projMatrix,K),X[j]=new Float32Array(K),X[j]},Nr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Nr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var R,U,j,X,fe=-90,Me=90,B=-180,K=180,ie=this.size,de=this._unmodified;if(this.latRange){var ye=this.latRange;fe=l.mercatorYfromLat(ye[1])*this.worldSize,R=(Me=l.mercatorYfromLat(ye[0])*this.worldSize)-fe<ie.y?ie.y/(Me-fe):0}if(this.lngRange){var Le=this.lngRange;B=l.mercatorXfromLng(Le[0])*this.worldSize,U=(K=l.mercatorXfromLng(Le[1])*this.worldSize)-B<ie.x?ie.x/(K-B):0}var Be=this.point,je=Math.max(U||0,R||0);if(je)return this.center=this.unproject(new l.Point(U?(K+B)/2:Be.x,R?(Me+fe)/2:Be.y)),this.zoom+=this.scaleZoom(je),this._unmodified=de,void(this._constraining=!1);if(this.latRange){var qe=Be.y,Ze=ie.y/2;qe-Ze<fe&&(X=fe+Ze),qe+Ze>Me&&(X=Me-Ze)}if(this.lngRange){var Qe=Be.x,lt=ie.x/2;Qe-lt<B&&(j=B+lt),Qe+lt>K&&(j=K-lt)}j===void 0&&X===void 0||(this.center=this.unproject(new l.Point(j!==void 0?j:Be.x,X!==void 0?X:Be.y))),this._unmodified=de,this._constraining=!1}},Nr.prototype._calcMatrices=function(){if(this.height){var R=this._fov/2,U=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(R)*this.height;var j=Math.PI/2+this._pitch,X=this._fov*(.5+U.y/this.height),fe=Math.sin(X)*this.cameraToCenterDistance/Math.sin(l.clamp(Math.PI-j-X,.01,Math.PI-.01)),Me=this.point,B=Me.x,K=Me.y,ie=1.01*(Math.cos(Math.PI/2-this._pitch)*fe+this.cameraToCenterDistance),de=this.height/50,ye=new Float64Array(16);l.perspective(ye,this._fov,this.width/this.height,de,ie),ye[8]=2*-U.x/this.width,ye[9]=2*U.y/this.height,l.scale(ye,ye,[1,-1,1]),l.translate(ye,ye,[0,0,-this.cameraToCenterDistance]),l.rotateX(ye,ye,this._pitch),l.rotateZ(ye,ye,this.angle),l.translate(ye,ye,[-B,-K,0]),this.mercatorMatrix=l.scale([],ye,[this.worldSize,this.worldSize,this.worldSize]),l.scale(ye,ye,[1,1,l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=ye,this.invProjMatrix=l.invert([],this.projMatrix);var Le=this.width%2/2,Be=this.height%2/2,je=Math.cos(this.angle),qe=Math.sin(this.angle),Ze=B-Math.round(B)+je*Le+qe*Be,Qe=K-Math.round(K)+je*Be+qe*Le,lt=new Float64Array(ye);if(l.translate(lt,lt,[Ze>.5?Ze-1:Ze,Qe>.5?Qe-1:Qe,0]),this.alignedProjMatrix=lt,ye=l.create(),l.scale(ye,ye,[this.width/2,-this.height/2,1]),l.translate(ye,ye,[1,-1,0]),this.labelPlaneMatrix=ye,ye=l.create(),l.scale(ye,ye,[1,-1,1]),l.translate(ye,ye,[-1,-1,0]),l.scale(ye,ye,[2/this.width,2/this.height,1]),this.glCoordMatrix=ye,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(ye=l.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=ye,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Nr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var R=this.pointCoordinate(new l.Point(0,0)),U=[R.x*this.worldSize,R.y*this.worldSize,0,1];return l.transformMat4(U,U,this.pixelMatrix)[3]/this.cameraToCenterDistance},Nr.prototype.getCameraPoint=function(){var R=this._pitch,U=Math.tan(R)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,U))},Nr.prototype.getCameraQueryGeometry=function(R){var U=this.getCameraPoint();if(R.length===1)return[R[0],U];for(var j=U.x,X=U.y,fe=U.x,Me=U.y,B=0,K=R;B<K.length;B+=1){var ie=K[B];j=Math.min(j,ie.x),X=Math.min(X,ie.y),fe=Math.max(fe,ie.x),Me=Math.max(Me,ie.y)}return[new l.Point(j,X),new l.Point(fe,X),new l.Point(fe,Me),new l.Point(j,Me),new l.Point(j,X)]},Object.defineProperties(Nr.prototype,Hr);var Ao=function(R){var U,j,X,fe,Me;this._hashName=R&&encodeURIComponent(R),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(U=this._updateHashUnthrottled.bind(this),j=300,X=!1,fe=null,Me=function(){fe=null,X&&(U(),fe=setTimeout(Me,j),X=!1)},function(){return X=!0,fe||Me(),fe})};Ao.prototype.addTo=function(R){return this._map=R,l.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ao.prototype.remove=function(){return l.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ao.prototype.getHashString=function(R){var U=this._map.getCenter(),j=Math.round(100*this._map.getZoom())/100,X=Math.ceil((j*Math.LN2+Math.log(512/360/.5))/Math.LN10),fe=Math.pow(10,X),Me=Math.round(U.lng*fe)/fe,B=Math.round(U.lat*fe)/fe,K=this._map.getBearing(),ie=this._map.getPitch(),de="";if(de+=R?"/"+Me+"/"+B+"/"+j:j+"/"+B+"/"+Me,(K||ie)&&(de+="/"+Math.round(10*K)/10),ie&&(de+="/"+Math.round(ie)),this._hashName){var ye=this._hashName,Le=!1,Be=l.window.location.hash.slice(1).split("&").map(function(je){var qe=je.split("=")[0];return qe===ye?(Le=!0,qe+"="+de):je}).filter(function(je){return je});return Le||Be.push(ye+"="+de),"#"+Be.join("&")}return"#"+de},Ao.prototype._getCurrentHash=function(){var R,U=this,j=l.window.location.hash.replace("#","");return this._hashName?(j.split("&").map(function(X){return X.split("=")}).forEach(function(X){X[0]===U._hashName&&(R=X)}),(R&&R[1]||"").split("/")):j.split("/")},Ao.prototype._onHashChange=function(){var R=this._getCurrentHash();if(R.length>=3&&!R.some(function(j){return isNaN(j)})){var U=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(R[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+R[2],+R[1]],zoom:+R[0],bearing:U,pitch:+(R[4]||0)}),!0}return!1},Ao.prototype._updateHashUnthrottled=function(){var R=this.getHashString();try{l.window.history.replaceState(l.window.history.state,"",R)}catch{}};var lo={linearity:.3,easing:l.bezier(0,0,.3,1)},Xs=l.extend({deceleration:2500,maxSpeed:1400},lo),ys=l.extend({deceleration:20,maxSpeed:1400},lo),Mo=l.extend({deceleration:1e3,maxSpeed:360},lo),xs=l.extend({deceleration:1e3,maxSpeed:90},lo),uo=function(R){this._map=R,this.clear()};function qo(R,U){(!R.duration||R.duration<U.duration)&&(R.duration=U.duration,R.easing=U.easing)}function So(R,U,j){var X=j.maxSpeed,fe=j.linearity,Me=j.deceleration,B=l.clamp(R*fe/(U/1e3),-X,X),K=Math.abs(B)/(Me*fe);return{easing:j.easing,duration:1e3*K,amount:B*(K/2)}}uo.prototype.clear=function(){this._inertiaBuffer=[]},uo.prototype.record=function(R){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.browser.now(),settings:R})},uo.prototype._drainInertiaBuffer=function(){for(var R=this._inertiaBuffer,U=l.browser.now();R.length>0&&U-R[0].time>160;)R.shift()},uo.prototype._onMoveEnd=function(R){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var U={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0},j=0,X=this._inertiaBuffer;j<X.length;j+=1){var fe=X[j].settings;U.zoom+=fe.zoomDelta||0,U.bearing+=fe.bearingDelta||0,U.pitch+=fe.pitchDelta||0,fe.panDelta&&U.pan._add(fe.panDelta),fe.around&&(U.around=fe.around),fe.pinchAround&&(U.pinchAround=fe.pinchAround)}var Me=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,B={};if(U.pan.mag()){var K=So(U.pan.mag(),Me,l.extend({},Xs,R||{}));B.offset=U.pan.mult(K.amount/U.pan.mag()),B.center=this._map.transform.center,qo(B,K)}if(U.zoom){var ie=So(U.zoom,Me,ys);B.zoom=this._map.transform.zoom+ie.amount,qo(B,ie)}if(U.bearing){var de=So(U.bearing,Me,Mo);B.bearing=this._map.transform.bearing+l.clamp(de.amount,-179,179),qo(B,de)}if(U.pitch){var ye=So(U.pitch,Me,xs);B.pitch=this._map.transform.pitch+ye.amount,qo(B,ye)}if(B.zoom||B.bearing){var Le=U.pinchAround===void 0?U.around:U.pinchAround;B.around=Le?this._map.unproject(Le):this._map.getCenter()}return this.clear(),l.extend(B,{noMoveStart:!0})}};var di=function(R){function U(X,fe,Me,B){B===void 0&&(B={});var K=b.mousePos(fe.getCanvasContainer(),Me),ie=fe.unproject(K);R.call(this,X,l.extend({point:K,lngLat:ie,originalEvent:Me},B)),this._defaultPrevented=!1,this.target=fe}R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U;var j={defaultPrevented:{configurable:!0}};return U.prototype.preventDefault=function(){this._defaultPrevented=!0},j.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(U.prototype,j),U}(l.Event),Go=function(R){function U(X,fe,Me){var B=X==="touchend"?Me.changedTouches:Me.touches,K=b.touchPos(fe.getCanvasContainer(),B),ie=K.map(function(Le){return fe.unproject(Le)}),de=K.reduce(function(Le,Be,je,qe){return Le.add(Be.div(qe.length))},new l.Point(0,0)),ye=fe.unproject(de);R.call(this,X,{points:K,point:de,lngLats:ie,lngLat:ye,originalEvent:Me}),this._defaultPrevented=!1}R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U;var j={defaultPrevented:{configurable:!0}};return U.prototype.preventDefault=function(){this._defaultPrevented=!0},j.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(U.prototype,j),U}(l.Event),Zo=function(R){function U(X,fe,Me){R.call(this,X,{originalEvent:Me}),this._defaultPrevented=!1}R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U;var j={defaultPrevented:{configurable:!0}};return U.prototype.preventDefault=function(){this._defaultPrevented=!0},j.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(U.prototype,j),U}(l.Event),Pi=function(R,U){this._map=R,this._clickTolerance=U.clickTolerance};Pi.prototype.reset=function(){delete this._mousedownPos},Pi.prototype.wheel=function(R){return this._firePreventable(new Zo(R.type,this._map,R))},Pi.prototype.mousedown=function(R,U){return this._mousedownPos=U,this._firePreventable(new di(R.type,this._map,R))},Pi.prototype.mouseup=function(R){this._map.fire(new di(R.type,this._map,R))},Pi.prototype.click=function(R,U){this._mousedownPos&&this._mousedownPos.dist(U)>=this._clickTolerance||this._map.fire(new di(R.type,this._map,R))},Pi.prototype.dblclick=function(R){return this._firePreventable(new di(R.type,this._map,R))},Pi.prototype.mouseover=function(R){this._map.fire(new di(R.type,this._map,R))},Pi.prototype.mouseout=function(R){this._map.fire(new di(R.type,this._map,R))},Pi.prototype.touchstart=function(R){return this._firePreventable(new Go(R.type,this._map,R))},Pi.prototype.touchmove=function(R){this._map.fire(new Go(R.type,this._map,R))},Pi.prototype.touchend=function(R){this._map.fire(new Go(R.type,this._map,R))},Pi.prototype.touchcancel=function(R){this._map.fire(new Go(R.type,this._map,R))},Pi.prototype._firePreventable=function(R){if(this._map.fire(R),R.defaultPrevented)return{}},Pi.prototype.isEnabled=function(){return!0},Pi.prototype.isActive=function(){return!1},Pi.prototype.enable=function(){},Pi.prototype.disable=function(){};var Ji=function(R){this._map=R};Ji.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Ji.prototype.mousemove=function(R){this._map.fire(new di(R.type,this._map,R))},Ji.prototype.mousedown=function(){this._delayContextMenu=!0},Ji.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new di("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Ji.prototype.contextmenu=function(R){this._delayContextMenu?this._contextMenuEvent=R:this._map.fire(new di(R.type,this._map,R)),this._map.listens("contextmenu")&&R.preventDefault()},Ji.prototype.isEnabled=function(){return!0},Ji.prototype.isActive=function(){return!1},Ji.prototype.enable=function(){},Ji.prototype.disable=function(){};var Zi=function(R,U){this._map=R,this._el=R.getCanvasContainer(),this._container=R.getContainer(),this._clickTolerance=U.clickTolerance||1};function Oi(R,U){for(var j={},X=0;X<R.length;X++)j[R[X].identifier]=U[X];return j}Zi.prototype.isEnabled=function(){return!!this._enabled},Zi.prototype.isActive=function(){return!!this._active},Zi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Zi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Zi.prototype.mousedown=function(R,U){this.isEnabled()&&R.shiftKey&&R.button===0&&(b.disableDrag(),this._startPos=this._lastPos=U,this._active=!0)},Zi.prototype.mousemoveWindow=function(R,U){if(this._active){var j=U;if(!(this._lastPos.equals(j)||!this._box&&j.dist(this._startPos)<this._clickTolerance)){var X=this._startPos;this._lastPos=j,this._box||(this._box=b.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",R));var fe=Math.min(X.x,j.x),Me=Math.max(X.x,j.x),B=Math.min(X.y,j.y),K=Math.max(X.y,j.y);b.setTransform(this._box,"translate("+fe+"px,"+B+"px)"),this._box.style.width=Me-fe+"px",this._box.style.height=K-B+"px"}}},Zi.prototype.mouseupWindow=function(R,U){var j=this;if(this._active&&R.button===0){var X=this._startPos,fe=U;if(this.reset(),b.suppressClick(),X.x!==fe.x||X.y!==fe.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:R})),{cameraAnimation:function(Me){return Me.fitScreenCoordinates(X,fe,j._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",R)}},Zi.prototype.keydown=function(R){this._active&&R.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",R))},Zi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos},Zi.prototype._fireEvent=function(R,U){return this._map.fire(new l.Event(R,{originalEvent:U}))};var ra=function(R){this.reset(),this.numTouches=R.numTouches};ra.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},ra.prototype.touchstart=function(R,U,j){(this.centroid||j.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=R.timeStamp),j.length===this.numTouches&&(this.centroid=function(X){for(var fe=new l.Point(0,0),Me=0,B=X;Me<B.length;Me+=1){var K=B[Me];fe._add(K)}return fe.div(X.length)}(U),this.touches=Oi(j,U)))},ra.prototype.touchmove=function(R,U,j){if(!this.aborted&&this.centroid){var X=Oi(j,U);for(var fe in this.touches){var Me=this.touches[fe],B=X[fe];(!B||B.dist(Me)>30)&&(this.aborted=!0)}}},ra.prototype.touchend=function(R,U,j){if((!this.centroid||R.timeStamp-this.startTime>500)&&(this.aborted=!0),j.length===0){var X=!this.aborted&&this.centroid;if(this.reset(),X)return X}};var Eo=function(R){this.singleTap=new ra(R),this.numTaps=R.numTaps,this.reset()};Eo.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Eo.prototype.touchstart=function(R,U,j){this.singleTap.touchstart(R,U,j)},Eo.prototype.touchmove=function(R,U,j){this.singleTap.touchmove(R,U,j)},Eo.prototype.touchend=function(R,U,j){var X=this.singleTap.touchend(R,U,j);if(X){var fe=R.timeStamp-this.lastTime<500,Me=!this.lastTap||this.lastTap.dist(X)<30;if(fe&&Me||this.reset(),this.count++,this.lastTime=R.timeStamp,this.lastTap=X,this.count===this.numTaps)return this.reset(),X}};var Ra=function(){this._zoomIn=new Eo({numTouches:1,numTaps:2}),this._zoomOut=new Eo({numTouches:2,numTaps:1}),this.reset()};Ra.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Ra.prototype.touchstart=function(R,U,j){this._zoomIn.touchstart(R,U,j),this._zoomOut.touchstart(R,U,j)},Ra.prototype.touchmove=function(R,U,j){this._zoomIn.touchmove(R,U,j),this._zoomOut.touchmove(R,U,j)},Ra.prototype.touchend=function(R,U,j){var X=this,fe=this._zoomIn.touchend(R,U,j),Me=this._zoomOut.touchend(R,U,j);return fe?(this._active=!0,R.preventDefault(),setTimeout(function(){return X.reset()},0),{cameraAnimation:function(B){return B.easeTo({duration:300,zoom:B.getZoom()+1,around:B.unproject(fe)},{originalEvent:R})}}):Me?(this._active=!0,R.preventDefault(),setTimeout(function(){return X.reset()},0),{cameraAnimation:function(B){return B.easeTo({duration:300,zoom:B.getZoom()-1,around:B.unproject(Me)},{originalEvent:R})}}):void 0},Ra.prototype.touchcancel=function(){this.reset()},Ra.prototype.enable=function(){this._enabled=!0},Ra.prototype.disable=function(){this._enabled=!1,this.reset()},Ra.prototype.isEnabled=function(){return this._enabled},Ra.prototype.isActive=function(){return this._active};var ji=function(R){this.reset(),this._clickTolerance=R.clickTolerance||1};ji.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ji.prototype._correctButton=function(R,U){return!1},ji.prototype._move=function(R,U){return{}},ji.prototype.mousedown=function(R,U){if(!this._lastPoint){var j=b.mouseButton(R);this._correctButton(R,j)&&(this._lastPoint=U,this._eventButton=j)}},ji.prototype.mousemoveWindow=function(R,U){var j=this._lastPoint;if(j&&(R.preventDefault(),this._moved||!(U.dist(j)<this._clickTolerance)))return this._moved=!0,this._lastPoint=U,this._move(j,U)},ji.prototype.mouseupWindow=function(R){b.mouseButton(R)===this._eventButton&&(this._moved&&b.suppressClick(),this.reset())},ji.prototype.enable=function(){this._enabled=!0},ji.prototype.disable=function(){this._enabled=!1,this.reset()},ji.prototype.isEnabled=function(){return this._enabled},ji.prototype.isActive=function(){return this._active};var _a=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.mousedown=function(j,X){R.prototype.mousedown.call(this,j,X),this._lastPoint&&(this._active=!0)},U.prototype._correctButton=function(j,X){return X===0&&!j.ctrlKey},U.prototype._move=function(j,X){return{around:X,panDelta:X.sub(j)}},U}(ji),Sa=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype._correctButton=function(j,X){return X===0&&j.ctrlKey||X===2},U.prototype._move=function(j,X){var fe=.8*(X.x-j.x);if(fe)return this._active=!0,{bearingDelta:fe}},U.prototype.contextmenu=function(j){j.preventDefault()},U}(ji),Rs=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype._correctButton=function(j,X){return X===0&&j.ctrlKey||X===2},U.prototype._move=function(j,X){var fe=-.5*(X.y-j.y);if(fe)return this._active=!0,{pitchDelta:fe}},U.prototype.contextmenu=function(j){j.preventDefault()},U}(ji),Ea=function(R){this._minTouches=1,this._clickTolerance=R.clickTolerance||1,this.reset()};Ea.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new l.Point(0,0)},Ea.prototype.touchstart=function(R,U,j){return this._calculateTransform(R,U,j)},Ea.prototype.touchmove=function(R,U,j){if(this._active)return R.preventDefault(),this._calculateTransform(R,U,j)},Ea.prototype.touchend=function(R,U,j){this._calculateTransform(R,U,j),this._active&&j.length<this._minTouches&&this.reset()},Ea.prototype.touchcancel=function(){this.reset()},Ea.prototype._calculateTransform=function(R,U,j){j.length>0&&(this._active=!0);var X=Oi(j,U),fe=new l.Point(0,0),Me=new l.Point(0,0),B=0;for(var K in X){var ie=X[K],de=this._touches[K];de&&(fe._add(ie),Me._add(ie.sub(de)),B++,X[K]=ie)}if(this._touches=X,!(B<this._minTouches)&&Me.mag()){var ye=Me.div(B);if(this._sum._add(ye),!(this._sum.mag()<this._clickTolerance))return{around:fe.div(B),panDelta:ye}}},Ea.prototype.enable=function(){this._enabled=!0},Ea.prototype.disable=function(){this._enabled=!1,this.reset()},Ea.prototype.isEnabled=function(){return this._enabled},Ea.prototype.isActive=function(){return this._active};var Ui=function(){this.reset()};function xr(R,U,j){for(var X=0;X<R.length;X++)if(R[X].identifier===j)return U[X]}Ui.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Ui.prototype._start=function(R){},Ui.prototype._move=function(R,U,j){return{}},Ui.prototype.touchstart=function(R,U,j){this._firstTwoTouches||j.length<2||(this._firstTwoTouches=[j[0].identifier,j[1].identifier],this._start([U[0],U[1]]))},Ui.prototype.touchmove=function(R,U,j){if(this._firstTwoTouches){R.preventDefault();var X=this._firstTwoTouches,fe=X[0],Me=X[1],B=xr(j,U,fe),K=xr(j,U,Me);if(B&&K){var ie=this._aroundCenter?null:B.add(K).div(2);return this._move([B,K],ie,R)}}},Ui.prototype.touchend=function(R,U,j){if(this._firstTwoTouches){var X=this._firstTwoTouches,fe=X[0],Me=X[1],B=xr(j,U,fe),K=xr(j,U,Me);B&&K||(this._active&&b.suppressClick(),this.reset())}},Ui.prototype.touchcancel=function(){this.reset()},Ui.prototype.enable=function(R){this._enabled=!0,this._aroundCenter=!!R&&R.around==="center"},Ui.prototype.disable=function(){this._enabled=!1,this.reset()},Ui.prototype.isEnabled=function(){return this._enabled},Ui.prototype.isActive=function(){return this._active};function Ki(R,U){return Math.log(R/U)/Math.LN2}var bs=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.reset=function(){R.prototype.reset.call(this),delete this._distance,delete this._startDistance},U.prototype._start=function(j){this._startDistance=this._distance=j[0].dist(j[1])},U.prototype._move=function(j,X){var fe=this._distance;if(this._distance=j[0].dist(j[1]),this._active||!(Math.abs(Ki(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ki(this._distance,fe),pinchAround:X}},U}(Ui);function Fs(R,U){return 180*R.angleWith(U)/Math.PI}var Yo=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.reset=function(){R.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},U.prototype._start=function(j){this._startVector=this._vector=j[0].sub(j[1]),this._minDiameter=j[0].dist(j[1])},U.prototype._move=function(j,X){var fe=this._vector;if(this._vector=j[0].sub(j[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Fs(this._vector,fe),pinchAround:X}},U.prototype._isBelowThreshold=function(j){this._minDiameter=Math.min(this._minDiameter,j.mag());var X=25/(Math.PI*this._minDiameter)*360,fe=Fs(j,this._startVector);return Math.abs(fe)<X},U}(Ui);function Wo(R){return Math.abs(R.y)>Math.abs(R.x)}var co=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.reset=function(){R.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},U.prototype._start=function(j){this._lastPoints=j,Wo(j[0].sub(j[1]))&&(this._valid=!1)},U.prototype._move=function(j,X,fe){var Me=j[0].sub(this._lastPoints[0]),B=j[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Me,B,fe.timeStamp),this._valid)return this._lastPoints=j,this._active=!0,{pitchDelta:(Me.y+B.y)/2*-.5}},U.prototype.gestureBeginsVertically=function(j,X,fe){if(this._valid!==void 0)return this._valid;var Me=j.mag()>=2,B=X.mag()>=2;if(Me||B){if(!Me||!B)return this._firstMove===void 0&&(this._firstMove=fe),fe-this._firstMove<100&&void 0;var K=j.y>0==X.y>0;return Wo(j)&&Wo(X)&&K}},U}(Ui),vr={panStep:100,bearingStep:15,pitchStep:10},Fa=function(){var R=vr;this._panStep=R.panStep,this._bearingStep=R.bearingStep,this._pitchStep=R.pitchStep};function as(R){return R*(2-R)}Fa.prototype.reset=function(){this._active=!1},Fa.prototype.keydown=function(R){var U=this;if(!(R.altKey||R.ctrlKey||R.metaKey)){var j=0,X=0,fe=0,Me=0,B=0;switch(R.keyCode){case 61:case 107:case 171:case 187:j=1;break;case 189:case 109:case 173:j=-1;break;case 37:R.shiftKey?X=-1:(R.preventDefault(),Me=-1);break;case 39:R.shiftKey?X=1:(R.preventDefault(),Me=1);break;case 38:R.shiftKey?fe=1:(R.preventDefault(),B=-1);break;case 40:R.shiftKey?fe=-1:(R.preventDefault(),B=1);break;default:return}return{cameraAnimation:function(K){var ie=K.getZoom();K.easeTo({duration:300,easeId:"keyboardHandler",easing:as,zoom:j?Math.round(ie)+j*(R.shiftKey?2:1):ie,bearing:K.getBearing()+X*U._bearingStep,pitch:K.getPitch()+fe*U._pitchStep,offset:[-Me*U._panStep,-B*U._panStep],center:K.getCenter()},{originalEvent:R})}}}},Fa.prototype.enable=function(){this._enabled=!0},Fa.prototype.disable=function(){this._enabled=!1,this.reset()},Fa.prototype.isEnabled=function(){return this._enabled},Fa.prototype.isActive=function(){return this._active};var _s=4.000244140625,$i=function(R,U){this._map=R,this._el=R.getCanvasContainer(),this._handler=U,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};$i.prototype.setZoomRate=function(R){this._defaultZoomRate=R},$i.prototype.setWheelZoomRate=function(R){this._wheelZoomRate=R},$i.prototype.isEnabled=function(){return!!this._enabled},$i.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},$i.prototype.isZooming=function(){return!!this._zooming},$i.prototype.enable=function(R){this.isEnabled()||(this._enabled=!0,this._aroundCenter=R&&R.around==="center")},$i.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},$i.prototype.wheel=function(R){if(this.isEnabled()){var U=R.deltaMode===l.window.WheelEvent.DOM_DELTA_LINE?40*R.deltaY:R.deltaY,j=l.browser.now(),X=j-(this._lastWheelEventTime||0);this._lastWheelEventTime=j,U!==0&&U%_s==0?this._type="wheel":U!==0&&Math.abs(U)<4?this._type="trackpad":X>400?(this._type=null,this._lastValue=U,this._timeout=setTimeout(this._onTimeout,40,R)):this._type||(this._type=Math.abs(X*U)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,U+=this._lastValue)),R.shiftKey&&U&&(U/=4),this._type&&(this._lastWheelEvent=R,this._delta-=U,this._active||this._start(R)),R.preventDefault()}},$i.prototype._onTimeout=function(R){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(R)},$i.prototype._start=function(R){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var U=b.mousePos(this._el,R);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(U)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},$i.prototype.renderFrame=function(){return this._onScrollFrame()},$i.prototype._onScrollFrame=function(){var R=this;if(this._frameId&&(this._frameId=null,this.isActive())){var U=this._map.transform;if(this._delta!==0){var j=this._type==="wheel"&&Math.abs(this._delta)>_s?this._wheelZoomRate:this._defaultZoomRate,X=2/(1+Math.exp(-Math.abs(this._delta*j)));this._delta<0&&X!==0&&(X=1/X);var fe=typeof this._targetZoom=="number"?U.zoomScale(this._targetZoom):U.scale;this._targetZoom=Math.min(U.maxZoom,Math.max(U.minZoom,U.scaleZoom(fe*X))),this._type==="wheel"&&(this._startZoom=U.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Me,B=typeof this._targetZoom=="number"?this._targetZoom:U.zoom,K=this._startZoom,ie=this._easing,de=!1;if(this._type==="wheel"&&K&&ie){var ye=Math.min((l.browser.now()-this._lastWheelEventTime)/200,1),Le=ie(ye);Me=l.number(K,B,Le),ye<1?this._frameId||(this._frameId=!0):de=!0}else Me=B,de=!0;return this._active=!0,de&&(this._active=!1,this._finishTimeout=setTimeout(function(){R._zooming=!1,R._handler._triggerRenderFrame(),delete R._targetZoom,delete R._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!de,zoomDelta:Me-U.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},$i.prototype._smoothOutEasing=function(R){var U=l.ease;if(this._prevEase){var j=this._prevEase,X=(l.browser.now()-j.start)/j.duration,fe=j.easing(X+.01)-j.easing(X),Me=.27/Math.sqrt(fe*fe+1e-4)*.01,B=Math.sqrt(.0729-Me*Me);U=l.bezier(Me,B,.25,1)}return this._prevEase={start:l.browser.now(),duration:R,easing:U},U},$i.prototype.reset=function(){this._active=!1};var Ba=function(R,U){this._clickZoom=R,this._tapZoom=U};Ba.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Ba.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Ba.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Ba.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var La=function(){this.reset()};La.prototype.reset=function(){this._active=!1},La.prototype.dblclick=function(R,U){return R.preventDefault(),{cameraAnimation:function(j){j.easeTo({duration:300,zoom:j.getZoom()+(R.shiftKey?-1:1),around:j.unproject(U)},{originalEvent:R})}}},La.prototype.enable=function(){this._enabled=!0},La.prototype.disable=function(){this._enabled=!1,this.reset()},La.prototype.isEnabled=function(){return this._enabled},La.prototype.isActive=function(){return this._active};var wa=function(){this._tap=new Eo({numTouches:1,numTaps:1}),this.reset()};wa.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},wa.prototype.touchstart=function(R,U,j){this._swipePoint||(this._tapTime&&R.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?j.length>0&&(this._swipePoint=U[0],this._swipeTouch=j[0].identifier):this._tap.touchstart(R,U,j))},wa.prototype.touchmove=function(R,U,j){if(this._tapTime){if(this._swipePoint){if(j[0].identifier!==this._swipeTouch)return;var X=U[0],fe=X.y-this._swipePoint.y;return this._swipePoint=X,R.preventDefault(),this._active=!0,{zoomDelta:fe/128}}}else this._tap.touchmove(R,U,j)},wa.prototype.touchend=function(R,U,j){this._tapTime?this._swipePoint&&j.length===0&&this.reset():this._tap.touchend(R,U,j)&&(this._tapTime=R.timeStamp)},wa.prototype.touchcancel=function(){this.reset()},wa.prototype.enable=function(){this._enabled=!0},wa.prototype.disable=function(){this._enabled=!1,this.reset()},wa.prototype.isEnabled=function(){return this._enabled},wa.prototype.isActive=function(){return this._active};var Wa=function(R,U,j){this._el=R,this._mousePan=U,this._touchPan=j};Wa.prototype.enable=function(R){this._inertiaOptions=R||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Wa.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Wa.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Wa.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var fo=function(R,U,j){this._pitchWithRotate=R.pitchWithRotate,this._mouseRotate=U,this._mousePitch=j};fo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},fo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},fo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},fo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Ii=function(R,U,j,X){this._el=R,this._touchZoom=U,this._touchRotate=j,this._tapDragZoom=X,this._rotationDisabled=!1,this._enabled=!0};Ii.prototype.enable=function(R){this._touchZoom.enable(R),this._rotationDisabled||this._touchRotate.enable(R),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Ii.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Ii.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Ii.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Ii.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Ii.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Xo=function(R){return R.zoom||R.drag||R.pitch||R.rotate},os=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U}(l.Event);function Vi(R){return R.panDelta&&R.panDelta.mag()||R.zoomDelta||R.bearingDelta||R.pitchDelta}var ei=function(R,U){this._map=R,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new uo(R),this._bearingSnap=U.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(U),l.bindAll(["handleEvent","handleWindowEvent"],this);var j=this._el;this._listeners=[[j,"touchstart",{passive:!1}],[j,"touchmove",{passive:!1}],[j,"touchend",void 0],[j,"touchcancel",void 0],[j,"mousedown",void 0],[j,"mousemove",void 0],[j,"mouseup",void 0],[l.window.document,"mousemove",{capture:!0}],[l.window.document,"mouseup",void 0],[j,"mouseover",void 0],[j,"mouseout",void 0],[j,"dblclick",void 0],[j,"click",void 0],[j,"keydown",{capture:!1}],[j,"keyup",void 0],[j,"wheel",{passive:!1}],[j,"contextmenu",void 0],[l.window,"blur",void 0]];for(var X=0,fe=this._listeners;X<fe.length;X+=1){var Me=fe[X],B=Me[0],K=Me[1],ie=Me[2];b.addEventListener(B,K,B===l.window.document?this.handleWindowEvent:this.handleEvent,ie)}};ei.prototype.destroy=function(){for(var R=0,U=this._listeners;R<U.length;R+=1){var j=U[R],X=j[0],fe=j[1],Me=j[2];b.removeEventListener(X,fe,X===l.window.document?this.handleWindowEvent:this.handleEvent,Me)}},ei.prototype._addDefaultHandlers=function(R){var U=this._map,j=U.getCanvasContainer();this._add("mapEvent",new Pi(U,R));var X=U.boxZoom=new Zi(U,R);this._add("boxZoom",X);var fe=new Ra,Me=new La;U.doubleClickZoom=new Ba(Me,fe),this._add("tapZoom",fe),this._add("clickZoom",Me);var B=new wa;this._add("tapDragZoom",B);var K=U.touchPitch=new co;this._add("touchPitch",K);var ie=new Sa(R),de=new Rs(R);U.dragRotate=new fo(R,ie,de),this._add("mouseRotate",ie,["mousePitch"]),this._add("mousePitch",de,["mouseRotate"]);var ye=new _a(R),Le=new Ea(R);U.dragPan=new Wa(j,ye,Le),this._add("mousePan",ye),this._add("touchPan",Le,["touchZoom","touchRotate"]);var Be=new Yo,je=new bs;U.touchZoomRotate=new Ii(j,je,Be,B),this._add("touchRotate",Be,["touchPan","touchZoom"]),this._add("touchZoom",je,["touchPan","touchRotate"]);var qe=U.scrollZoom=new $i(U,this);this._add("scrollZoom",qe,["mousePan"]);var Ze=U.keyboard=new Fa;this._add("keyboard",Ze),this._add("blockableMapEvent",new Ji(U));for(var Qe=0,lt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Qe<lt.length;Qe+=1){var ht=lt[Qe];R.interactive&&R[ht]&&U[ht].enable(R[ht])}},ei.prototype._add=function(R,U,j){this._handlers.push({handlerName:R,handler:U,allowed:j}),this._handlersById[R]=U},ei.prototype.stop=function(){if(!this._updatingCamera){for(var R=0,U=this._handlers;R<U.length;R+=1)U[R].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},ei.prototype.isActive=function(){for(var R=0,U=this._handlers;R<U.length;R+=1)if(U[R].handler.isActive())return!0;return!1},ei.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ei.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ei.prototype.isMoving=function(){return!!Xo(this._eventsInProgress)||this.isZooming()},ei.prototype._blockedByActive=function(R,U,j){for(var X in R)if(X!==j&&(!U||U.indexOf(X)<0))return!0;return!1},ei.prototype.handleWindowEvent=function(R){this.handleEvent(R,R.type+"Window")},ei.prototype._getMapTouches=function(R){for(var U=[],j=0,X=R;j<X.length;j+=1){var fe=X[j],Me=fe.target;this._el.contains(Me)&&U.push(fe)}return U},ei.prototype.handleEvent=function(R,U){if(R.type!=="blur"){this._updatingCamera=!0;for(var j=R.type==="renderFrame"?void 0:R,X={needsRenderFrame:!1},fe={},Me={},B=R.touches?this._getMapTouches(R.touches):void 0,K=B?b.touchPos(this._el,B):b.mousePos(this._el,R),ie=0,de=this._handlers;ie<de.length;ie+=1){var ye=de[ie],Le=ye.handlerName,Be=ye.handler,je=ye.allowed;if(Be.isEnabled()){var qe=void 0;this._blockedByActive(Me,je,Le)?Be.reset():Be[U||R.type]&&(qe=Be[U||R.type](R,K,B),this.mergeHandlerResult(X,fe,qe,Le,j),qe&&qe.needsRenderFrame&&this._triggerRenderFrame()),(qe||Be.isActive())&&(Me[Le]=Be)}}var Ze={};for(var Qe in this._previousActiveHandlers)Me[Qe]||(Ze[Qe]=j);this._previousActiveHandlers=Me,(Object.keys(Ze).length||Vi(X))&&(this._changes.push([X,fe,Ze]),this._triggerRenderFrame()),(Object.keys(Me).length||Vi(X))&&this._map._stop(!0),this._updatingCamera=!1;var lt=X.cameraAnimation;lt&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],lt(this._map))}else this.stop()},ei.prototype.mergeHandlerResult=function(R,U,j,X,fe){if(j){l.extend(R,j);var Me={handlerName:X,originalEvent:j.originalEvent||fe};j.zoomDelta!==void 0&&(U.zoom=Me),j.panDelta!==void 0&&(U.drag=Me),j.pitchDelta!==void 0&&(U.pitch=Me),j.bearingDelta!==void 0&&(U.rotate=Me)}},ei.prototype._applyChanges=function(){for(var R={},U={},j={},X=0,fe=this._changes;X<fe.length;X+=1){var Me=fe[X],B=Me[0],K=Me[1],ie=Me[2];B.panDelta&&(R.panDelta=(R.panDelta||new l.Point(0,0))._add(B.panDelta)),B.zoomDelta&&(R.zoomDelta=(R.zoomDelta||0)+B.zoomDelta),B.bearingDelta&&(R.bearingDelta=(R.bearingDelta||0)+B.bearingDelta),B.pitchDelta&&(R.pitchDelta=(R.pitchDelta||0)+B.pitchDelta),B.around!==void 0&&(R.around=B.around),B.pinchAround!==void 0&&(R.pinchAround=B.pinchAround),B.noInertia&&(R.noInertia=B.noInertia),l.extend(U,K),l.extend(j,ie)}this._updateMapTransform(R,U,j),this._changes=[]},ei.prototype._updateMapTransform=function(R,U,j){var X=this._map,fe=X.transform;if(!Vi(R))return this._fireEvents(U,j);var Me=R.panDelta,B=R.zoomDelta,K=R.bearingDelta,ie=R.pitchDelta,de=R.around,ye=R.pinchAround;ye!==void 0&&(de=ye),X._stop(!0),de=de||X.transform.centerPoint;var Le=fe.pointLocation(Me?de.sub(Me):de);K&&(fe.bearing+=K),ie&&(fe.pitch+=ie),B&&(fe.zoom+=B),fe.setLocationAtPoint(Le,de),this._map._update(),R.noInertia||this._inertia.record(R),this._fireEvents(U,j)},ei.prototype._fireEvents=function(R,U){var j=this,X=Xo(this._eventsInProgress),fe=Xo(R),Me={};for(var B in R){var K=R[B].originalEvent;this._eventsInProgress[B]||(Me[B+"start"]=K),this._eventsInProgress[B]=R[B]}for(var ie in!X&&fe&&this._fireEvent("movestart",fe.originalEvent),Me)this._fireEvent(ie,Me[ie]);for(var de in R.rotate&&(this._bearingChanged=!0),fe&&this._fireEvent("move",fe.originalEvent),R){var ye=R[de].originalEvent;this._fireEvent(de,ye)}var Le,Be={};for(var je in this._eventsInProgress){var qe=this._eventsInProgress[je],Ze=qe.handlerName,Qe=qe.originalEvent;this._handlersById[Ze].isActive()||(delete this._eventsInProgress[je],Le=U[Ze]||Qe,Be[je+"end"]=Le)}for(var lt in Be)this._fireEvent(lt,Be[lt]);var ht=Xo(this._eventsInProgress);if((X||fe)&&!ht){this._updatingCamera=!0;var St=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Lt=function(Mt){return Mt!==0&&-j._bearingSnap<Mt&&Mt<j._bearingSnap};St?(Lt(St.bearing||this._map.getBearing())&&(St.bearing=0),this._map.easeTo(St,{originalEvent:Le})):(this._map.fire(new l.Event("moveend",{originalEvent:Le})),Lt(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},ei.prototype._fireEvent=function(R,U){this._map.fire(new l.Event(R,U?{originalEvent:U}:{}))},ei.prototype._triggerRenderFrame=function(){var R=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(U){delete R._frameId,R.handleEvent(new os("renderFrame",{timeStamp:U})),R._applyChanges()}))};var ws=function(R){function U(j,X){R.call(this),this._moving=!1,this._zooming=!1,this.transform=j,this._bearingSnap=X.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getCenter=function(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)},U.prototype.setCenter=function(j,X){return this.jumpTo({center:j},X)},U.prototype.panBy=function(j,X,fe){return j=l.Point.convert(j).mult(-1),this.panTo(this.transform.center,l.extend({offset:j},X),fe)},U.prototype.panTo=function(j,X,fe){return this.easeTo(l.extend({center:j},X),fe)},U.prototype.getZoom=function(){return this.transform.zoom},U.prototype.setZoom=function(j,X){return this.jumpTo({zoom:j},X),this},U.prototype.zoomTo=function(j,X,fe){return this.easeTo(l.extend({zoom:j},X),fe)},U.prototype.zoomIn=function(j,X){return this.zoomTo(this.getZoom()+1,j,X),this},U.prototype.zoomOut=function(j,X){return this.zoomTo(this.getZoom()-1,j,X),this},U.prototype.getBearing=function(){return this.transform.bearing},U.prototype.setBearing=function(j,X){return this.jumpTo({bearing:j},X),this},U.prototype.getPadding=function(){return this.transform.padding},U.prototype.setPadding=function(j,X){return this.jumpTo({padding:j},X),this},U.prototype.rotateTo=function(j,X,fe){return this.easeTo(l.extend({bearing:j},X),fe)},U.prototype.resetNorth=function(j,X){return this.rotateTo(0,l.extend({duration:1e3},j),X),this},U.prototype.resetNorthPitch=function(j,X){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},j),X),this},U.prototype.snapToNorth=function(j,X){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(j,X):this},U.prototype.getPitch=function(){return this.transform.pitch},U.prototype.setPitch=function(j,X){return this.jumpTo({pitch:j},X),this},U.prototype.cameraForBounds=function(j,X){return j=l.LngLatBounds.convert(j),this._cameraForBoxAndBearing(j.getNorthWest(),j.getSouthEast(),0,X)},U.prototype._cameraForBoxAndBearing=function(j,X,fe,Me){var B={top:0,bottom:0,right:0,left:0};if(typeof(Me=l.extend({padding:B,offset:[0,0],maxZoom:this.transform.maxZoom},Me)).padding=="number"){var K=Me.padding;Me.padding={top:K,bottom:K,right:K,left:K}}Me.padding=l.extend(B,Me.padding);var ie=this.transform,de=ie.padding,ye=ie.project(l.LngLat.convert(j)),Le=ie.project(l.LngLat.convert(X)),Be=ye.rotate(-fe*Math.PI/180),je=Le.rotate(-fe*Math.PI/180),qe=new l.Point(Math.max(Be.x,je.x),Math.max(Be.y,je.y)),Ze=new l.Point(Math.min(Be.x,je.x),Math.min(Be.y,je.y)),Qe=qe.sub(Ze),lt=(ie.width-(de.left+de.right+Me.padding.left+Me.padding.right))/Qe.x,ht=(ie.height-(de.top+de.bottom+Me.padding.top+Me.padding.bottom))/Qe.y;if(!(ht<0||lt<0)){var St=Math.min(ie.scaleZoom(ie.scale*Math.min(lt,ht)),Me.maxZoom),Lt=l.Point.convert(Me.offset),Mt=(Me.padding.left-Me.padding.right)/2,Ft=(Me.padding.top-Me.padding.bottom)/2,Et=new l.Point(Lt.x+Mt,Lt.y+Ft).mult(ie.scale/ie.zoomScale(St));return{center:ie.unproject(ye.add(Le).div(2).sub(Et)),zoom:St,bearing:fe}}l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},U.prototype.fitBounds=function(j,X,fe){return this._fitInternal(this.cameraForBounds(j,X),X,fe)},U.prototype.fitScreenCoordinates=function(j,X,fe,Me,B){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.Point.convert(j)),this.transform.pointLocation(l.Point.convert(X)),fe,Me),Me,B)},U.prototype._fitInternal=function(j,X,fe){return j?(delete(X=l.extend(j,X)).padding,X.linear?this.easeTo(X,fe):this.flyTo(X,fe)):this},U.prototype.jumpTo=function(j,X){this.stop();var fe=this.transform,Me=!1,B=!1,K=!1;return"zoom"in j&&fe.zoom!==+j.zoom&&(Me=!0,fe.zoom=+j.zoom),j.center!==void 0&&(fe.center=l.LngLat.convert(j.center)),"bearing"in j&&fe.bearing!==+j.bearing&&(B=!0,fe.bearing=+j.bearing),"pitch"in j&&fe.pitch!==+j.pitch&&(K=!0,fe.pitch=+j.pitch),j.padding==null||fe.isPaddingEqual(j.padding)||(fe.padding=j.padding),this.fire(new l.Event("movestart",X)).fire(new l.Event("move",X)),Me&&this.fire(new l.Event("zoomstart",X)).fire(new l.Event("zoom",X)).fire(new l.Event("zoomend",X)),B&&this.fire(new l.Event("rotatestart",X)).fire(new l.Event("rotate",X)).fire(new l.Event("rotateend",X)),K&&this.fire(new l.Event("pitchstart",X)).fire(new l.Event("pitch",X)).fire(new l.Event("pitchend",X)),this.fire(new l.Event("moveend",X))},U.prototype.easeTo=function(j,X){var fe=this;this._stop(!1,j.easeId),((j=l.extend({offset:[0,0],duration:500,easing:l.ease},j)).animate===!1||!j.essential&&l.browser.prefersReducedMotion)&&(j.duration=0);var Me=this.transform,B=this.getZoom(),K=this.getBearing(),ie=this.getPitch(),de=this.getPadding(),ye="zoom"in j?+j.zoom:B,Le="bearing"in j?this._normalizeBearing(j.bearing,K):K,Be="pitch"in j?+j.pitch:ie,je="padding"in j?j.padding:Me.padding,qe=l.Point.convert(j.offset),Ze=Me.centerPoint.add(qe),Qe=Me.pointLocation(Ze),lt=l.LngLat.convert(j.center||Qe);this._normalizeCenter(lt);var ht,St,Lt=Me.project(Qe),Mt=Me.project(lt).sub(Lt),Ft=Me.zoomScale(ye-B);j.around&&(ht=l.LngLat.convert(j.around),St=Me.locationPoint(ht));var Et={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ye!==B,this._rotating=this._rotating||K!==Le,this._pitching=this._pitching||Be!==ie,this._padding=!Me.isPaddingEqual(je),this._easeId=j.easeId,this._prepareEase(X,j.noMoveStart,Et),clearTimeout(this._easeEndTimeoutID),this._ease(function(en){if(fe._zooming&&(Me.zoom=l.number(B,ye,en)),fe._rotating&&(Me.bearing=l.number(K,Le,en)),fe._pitching&&(Me.pitch=l.number(ie,Be,en)),fe._padding&&(Me.interpolatePadding(de,je,en),Ze=Me.centerPoint.add(qe)),ht)Me.setLocationAtPoint(ht,St);else{var Zt=Me.zoomScale(Me.zoom-B),Vt=ye>B?Math.min(2,Ft):Math.max(.5,Ft),pn=Math.pow(Vt,1-en),vn=Me.unproject(Lt.add(Mt.mult(en*pn)).mult(Zt));Me.setLocationAtPoint(Me.renderWorldCopies?vn.wrap():vn,Ze)}fe._fireMoveEvents(X)},function(en){fe._afterEase(X,en)},j),this},U.prototype._prepareEase=function(j,X,fe){fe===void 0&&(fe={}),this._moving=!0,X||fe.moving||this.fire(new l.Event("movestart",j)),this._zooming&&!fe.zooming&&this.fire(new l.Event("zoomstart",j)),this._rotating&&!fe.rotating&&this.fire(new l.Event("rotatestart",j)),this._pitching&&!fe.pitching&&this.fire(new l.Event("pitchstart",j))},U.prototype._fireMoveEvents=function(j){this.fire(new l.Event("move",j)),this._zooming&&this.fire(new l.Event("zoom",j)),this._rotating&&this.fire(new l.Event("rotate",j)),this._pitching&&this.fire(new l.Event("pitch",j))},U.prototype._afterEase=function(j,X){if(!this._easeId||!X||this._easeId!==X){delete this._easeId;var fe=this._zooming,Me=this._rotating,B=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,fe&&this.fire(new l.Event("zoomend",j)),Me&&this.fire(new l.Event("rotateend",j)),B&&this.fire(new l.Event("pitchend",j)),this.fire(new l.Event("moveend",j))}},U.prototype.flyTo=function(j,X){var fe=this;if(!j.essential&&l.browser.prefersReducedMotion){var Me=l.pick(j,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Me,X)}this.stop(),j=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},j);var B=this.transform,K=this.getZoom(),ie=this.getBearing(),de=this.getPitch(),ye=this.getPadding(),Le="zoom"in j?l.clamp(+j.zoom,B.minZoom,B.maxZoom):K,Be="bearing"in j?this._normalizeBearing(j.bearing,ie):ie,je="pitch"in j?+j.pitch:de,qe="padding"in j?j.padding:B.padding,Ze=B.zoomScale(Le-K),Qe=l.Point.convert(j.offset),lt=B.centerPoint.add(Qe),ht=B.pointLocation(lt),St=l.LngLat.convert(j.center||ht);this._normalizeCenter(St);var Lt=B.project(ht),Mt=B.project(St).sub(Lt),Ft=j.curve,Et=Math.max(B.width,B.height),en=Et/Ze,Zt=Mt.mag();if("minZoom"in j){var Vt=l.clamp(Math.min(j.minZoom,K,Le),B.minZoom,B.maxZoom),pn=Et/B.zoomScale(Vt-K);Ft=Math.sqrt(pn/Zt*2)}var vn=Ft*Ft;function zn(Bn){var rr=(en*en-Et*Et+(Bn?-1:1)*vn*vn*Zt*Zt)/(2*(Bn?en:Et)*vn*Zt);return Math.log(Math.sqrt(rr*rr+1)-rr)}function Rn(Bn){return(Math.exp(Bn)-Math.exp(-Bn))/2}function Un(Bn){return(Math.exp(Bn)+Math.exp(-Bn))/2}var Yn=zn(0),or=function(Bn){return Un(Yn)/Un(Yn+Ft*Bn)},ir=function(Bn){return Et*((Un(Yn)*(Rn(rr=Yn+Ft*Bn)/Un(rr))-Rn(Yn))/vn)/Zt;var rr},cr=(zn(1)-Yn)/Ft;if(Math.abs(Zt)<1e-6||!isFinite(cr)){if(Math.abs(Et-en)<1e-6)return this.easeTo(j,X);var mr=en<Et?-1:1;cr=Math.abs(Math.log(en/Et))/Ft,ir=function(){return 0},or=function(Bn){return Math.exp(mr*Ft*Bn)}}if("duration"in j)j.duration=+j.duration;else{var Lr="screenSpeed"in j?+j.screenSpeed/Ft:+j.speed;j.duration=1e3*cr/Lr}return j.maxDuration&&j.duration>j.maxDuration&&(j.duration=0),this._zooming=!0,this._rotating=ie!==Be,this._pitching=je!==de,this._padding=!B.isPaddingEqual(qe),this._prepareEase(X,!1),this._ease(function(Bn){var rr=Bn*cr,fr=1/or(rr);B.zoom=Bn===1?Le:K+B.scaleZoom(fr),fe._rotating&&(B.bearing=l.number(ie,Be,Bn)),fe._pitching&&(B.pitch=l.number(de,je,Bn)),fe._padding&&(B.interpolatePadding(ye,qe,Bn),lt=B.centerPoint.add(Qe));var yr=Bn===1?St:B.unproject(Lt.add(Mt.mult(ir(rr))).mult(fr));B.setLocationAtPoint(B.renderWorldCopies?yr.wrap():yr,lt),fe._fireMoveEvents(X)},function(){return fe._afterEase(X)},j),this},U.prototype.isEasing=function(){return!!this._easeFrameId},U.prototype.stop=function(){return this._stop()},U.prototype._stop=function(j,X){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var fe=this._onEaseEnd;delete this._onEaseEnd,fe.call(this,X)}if(!j){var Me=this.handlers;Me&&Me.stop()}return this},U.prototype._ease=function(j,X,fe){fe.animate===!1||fe.duration===0?(j(1),X()):(this._easeStart=l.browser.now(),this._easeOptions=fe,this._onEaseFrame=j,this._onEaseEnd=X,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},U.prototype._renderFrameCallback=function(){var j=Math.min((l.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(j)),j<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},U.prototype._normalizeBearing=function(j,X){j=l.wrap(j,-180,180);var fe=Math.abs(j-X);return Math.abs(j-360-X)<fe&&(j-=360),Math.abs(j+360-X)<fe&&(j+=360),j},U.prototype._normalizeCenter=function(j){var X=this.transform;if(X.renderWorldCopies&&!X.lngRange){var fe=j.lng-X.center.lng;j.lng+=fe>180?-360:fe<-180?360:0}},U}(l.Evented),pa=function(R){R===void 0&&(R={}),this.options=R,l.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};pa.prototype.getDefaultPosition=function(){return"bottom-right"},pa.prototype.onAdd=function(R){var U=this.options&&this.options.compact;return this._map=R,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=b.create("div","mapboxgl-ctrl-attrib-inner",this._container),U&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),U===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},pa.prototype.onRemove=function(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},pa.prototype._updateEditLink=function(){var R=this._editLink;R||(R=this._editLink=this._container.querySelector(".mapbox-improve-map"));var U=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||l.config.ACCESS_TOKEN}];if(R){var j=U.reduce(function(X,fe,Me){return fe.value&&(X+=fe.key+"="+fe.value+(Me<U.length-1?"&":"")),X},"?");R.href=l.config.FEEDBACK_URL+"/"+j+(this._map._hash?this._map._hash.getHashString(!0):""),R.rel="noopener nofollow"}},pa.prototype._updateData=function(R){!R||R.sourceDataType!=="metadata"&&R.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},pa.prototype._updateAttributions=function(){if(this._map.style){var R=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?R=R.concat(this.options.customAttribution.map(function(K){return typeof K!="string"?"":K})):typeof this.options.customAttribution=="string"&&R.push(this.options.customAttribution)),this._map.style.stylesheet){var U=this._map.style.stylesheet;this.styleOwner=U.owner,this.styleId=U.id}var j=this._map.style.sourceCaches;for(var X in j){var fe=j[X];if(fe.used){var Me=fe.getSource();Me.attribution&&R.indexOf(Me.attribution)<0&&R.push(Me.attribution)}}R.sort(function(K,ie){return K.length-ie.length});var B=(R=R.filter(function(K,ie){for(var de=ie+1;de<R.length;de++)if(R[de].indexOf(K)>=0)return!1;return!0})).join(" | ");B!==this._attribHTML&&(this._attribHTML=B,R.length?(this._innerContainer.innerHTML=B,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},pa.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Di=function(){l.bindAll(["_updateLogo"],this),l.bindAll(["_updateCompact"],this)};Di.prototype.onAdd=function(R){this._map=R,this._container=b.create("div","mapboxgl-ctrl");var U=b.create("a","mapboxgl-ctrl-logo");return U.target="_blank",U.rel="noopener nofollow",U.href="https://www.mapbox.com/",U.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),U.setAttribute("rel","noopener nofollow"),this._container.appendChild(U),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Di.prototype.onRemove=function(){b.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Di.prototype.getDefaultPosition=function(){return"bottom-left"},Di.prototype._updateLogo=function(R){R&&R.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Di.prototype._logoRequired=function(){if(this._map.style){var R=this._map.style.sourceCaches;for(var U in R)if(R[U].getSource().mapbox_logo)return!0;return!1}},Di.prototype._updateCompact=function(){var R=this._container.children;if(R.length){var U=R[0];this._map.getCanvasContainer().offsetWidth<250?U.classList.add("mapboxgl-compact"):U.classList.remove("mapboxgl-compact")}};var Xa=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Xa.prototype.add=function(R){var U=++this._id;return this._queue.push({callback:R,id:U,cancelled:!1}),U},Xa.prototype.remove=function(R){for(var U=this._currentlyRunning,j=0,X=U?this._queue.concat(U):this._queue;j<X.length;j+=1){var fe=X[j];if(fe.id===R)return void(fe.cancelled=!0)}},Xa.prototype.run=function(R){R===void 0&&(R=0);var U=this._currentlyRunning=this._queue;this._queue=[];for(var j=0,X=U;j<X.length;j+=1){var fe=X[j];if(!fe.cancelled&&(fe.callback(R),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Xa.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Js={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},_i=l.window.HTMLImageElement,Xr=l.window.HTMLElement,Ta=l.window.ImageBitmap,Ja=60,Na={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:Ja,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Bs=function(R){function U(X){var fe=this;if((X=l.extend({},Na,X)).minZoom!=null&&X.maxZoom!=null&&X.minZoom>X.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(X.minPitch!=null&&X.maxPitch!=null&&X.minPitch>X.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(X.minPitch!=null&&X.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(X.maxPitch!=null&&X.maxPitch>Ja)throw new Error("maxPitch must be less than or equal to 60");var Me=new Nr(X.minZoom,X.maxZoom,X.minPitch,X.maxPitch,X.renderWorldCopies);if(R.call(this,Me,X),this._interactive=X.interactive,this._maxTileCacheSize=X.maxTileCacheSize,this._failIfMajorPerformanceCaveat=X.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=X.preserveDrawingBuffer,this._antialias=X.antialias,this._trackResize=X.trackResize,this._bearingSnap=X.bearingSnap,this._refreshExpiredTiles=X.refreshExpiredTiles,this._fadeDuration=X.fadeDuration,this._crossSourceCollisions=X.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=X.collectResourceTiming,this._renderTaskQueue=new Xa,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},Js,X.locale),this._requestManager=new l.RequestManager(X.transformRequest,X.accessToken),typeof X.container=="string"){if(this._container=l.window.document.getElementById(X.container),!this._container)throw new Error("Container '"+X.container+"' not found.")}else{if(!(X.container instanceof Xr))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=X.container}if(X.maxBounds&&this.setMaxBounds(X.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return fe._update(!1)}),this.on("moveend",function(){return fe._update(!1)}),this.on("zoom",function(){return fe._update(!0)}),l.window!==void 0&&(l.window.addEventListener("online",this._onWindowOnline,!1),l.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new ei(this,X);var B=typeof X.hash=="string"&&X.hash||void 0;this._hash=X.hash&&new Ao(B).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:X.center,zoom:X.zoom,bearing:X.bearing,pitch:X.pitch}),X.bounds&&(this.resize(),this.fitBounds(X.bounds,l.extend({},X.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=X.localIdeographFontFamily,X.style&&this.setStyle(X.style,{localIdeographFontFamily:X.localIdeographFontFamily}),X.attributionControl&&this.addControl(new pa({customAttribution:X.customAttribution})),this.addControl(new Di,X.logoPosition),this.on("style.load",function(){fe.transform.unmodified&&fe.jumpTo(fe.style.stylesheet)}),this.on("data",function(K){fe._update(K.dataType==="style"),fe.fire(new l.Event(K.dataType+"data",K))}),this.on("dataloading",function(K){fe.fire(new l.Event(K.dataType+"dataloading",K))})}R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U;var j={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return U.prototype._getMapId=function(){return this._mapId},U.prototype.addControl=function(X,fe){if(fe===void 0&&X.getDefaultPosition&&(fe=X.getDefaultPosition()),fe===void 0&&(fe="top-right"),!X||!X.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Me=X.onAdd(this);this._controls.push(X);var B=this._controlPositions[fe];return fe.indexOf("bottom")!==-1?B.insertBefore(Me,B.firstChild):B.appendChild(Me),this},U.prototype.removeControl=function(X){if(!X||!X.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var fe=this._controls.indexOf(X);return fe>-1&&this._controls.splice(fe,1),X.onRemove(this),this},U.prototype.resize=function(X){var fe=this._containerDimensions(),Me=fe[0],B=fe[1];this._resizeCanvas(Me,B),this.transform.resize(Me,B),this.painter.resize(Me,B);var K=!this._moving;return K&&(this.stop(),this.fire(new l.Event("movestart",X)).fire(new l.Event("move",X))),this.fire(new l.Event("resize",X)),K&&this.fire(new l.Event("moveend",X)),this},U.prototype.getBounds=function(){return this.transform.getBounds()},U.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},U.prototype.setMaxBounds=function(X){return this.transform.setMaxBounds(l.LngLatBounds.convert(X)),this._update()},U.prototype.setMinZoom=function(X){if((X=X??-2)>=-2&&X<=this.transform.maxZoom)return this.transform.minZoom=X,this._update(),this.getZoom()<X&&this.setZoom(X),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},U.prototype.getMinZoom=function(){return this.transform.minZoom},U.prototype.setMaxZoom=function(X){if((X=X??22)>=this.transform.minZoom)return this.transform.maxZoom=X,this._update(),this.getZoom()>X&&this.setZoom(X),this;throw new Error("maxZoom must be greater than the current minZoom")},U.prototype.getMaxZoom=function(){return this.transform.maxZoom},U.prototype.setMinPitch=function(X){if((X=X??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(X>=0&&X<=this.transform.maxPitch)return this.transform.minPitch=X,this._update(),this.getPitch()<X&&this.setPitch(X),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},U.prototype.getMinPitch=function(){return this.transform.minPitch},U.prototype.setMaxPitch=function(X){if((X=X??Ja)>Ja)throw new Error("maxPitch must be less than or equal to 60");if(X>=this.transform.minPitch)return this.transform.maxPitch=X,this._update(),this.getPitch()>X&&this.setPitch(X),this;throw new Error("maxPitch must be greater than the current minPitch")},U.prototype.getMaxPitch=function(){return this.transform.maxPitch},U.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},U.prototype.setRenderWorldCopies=function(X){return this.transform.renderWorldCopies=X,this._update()},U.prototype.project=function(X){return this.transform.locationPoint(l.LngLat.convert(X))},U.prototype.unproject=function(X){return this.transform.pointLocation(l.Point.convert(X))},U.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},U.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},U.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},U.prototype._createDelegatedListener=function(X,fe,Me){var B,K=this;if(X==="mouseenter"||X==="mouseover"){var ie=!1;return{layer:fe,listener:Me,delegates:{mousemove:function(ye){var Le=K.getLayer(fe)?K.queryRenderedFeatures(ye.point,{layers:[fe]}):[];Le.length?ie||(ie=!0,Me.call(K,new di(X,K,ye.originalEvent,{features:Le}))):ie=!1},mouseout:function(){ie=!1}}}}if(X==="mouseleave"||X==="mouseout"){var de=!1;return{layer:fe,listener:Me,delegates:{mousemove:function(ye){(K.getLayer(fe)?K.queryRenderedFeatures(ye.point,{layers:[fe]}):[]).length?de=!0:de&&(de=!1,Me.call(K,new di(X,K,ye.originalEvent)))},mouseout:function(ye){de&&(de=!1,Me.call(K,new di(X,K,ye.originalEvent)))}}}}return{layer:fe,listener:Me,delegates:(B={},B[X]=function(ye){var Le=K.getLayer(fe)?K.queryRenderedFeatures(ye.point,{layers:[fe]}):[];Le.length&&(ye.features=Le,Me.call(K,ye),delete ye.features)},B)}},U.prototype.on=function(X,fe,Me){if(Me===void 0)return R.prototype.on.call(this,X,fe);var B=this._createDelegatedListener(X,fe,Me);for(var K in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[X]=this._delegatedListeners[X]||[],this._delegatedListeners[X].push(B),B.delegates)this.on(K,B.delegates[K]);return this},U.prototype.once=function(X,fe,Me){if(Me===void 0)return R.prototype.once.call(this,X,fe);var B=this._createDelegatedListener(X,fe,Me);for(var K in B.delegates)this.once(K,B.delegates[K]);return this},U.prototype.off=function(X,fe,Me){var B=this;return Me===void 0?R.prototype.off.call(this,X,fe):(this._delegatedListeners&&this._delegatedListeners[X]&&function(K){for(var ie=K[X],de=0;de<ie.length;de++){var ye=ie[de];if(ye.layer===fe&&ye.listener===Me){for(var Le in ye.delegates)B.off(Le,ye.delegates[Le]);return ie.splice(de,1),B}}}(this._delegatedListeners),this)},U.prototype.queryRenderedFeatures=function(X,fe){if(!this.style)return[];var Me;if(fe!==void 0||X===void 0||X instanceof l.Point||Array.isArray(X)||(fe=X,X=void 0),fe=fe||{},(X=X||[[0,0],[this.transform.width,this.transform.height]])instanceof l.Point||typeof X[0]=="number")Me=[l.Point.convert(X)];else{var B=l.Point.convert(X[0]),K=l.Point.convert(X[1]);Me=[B,new l.Point(K.x,B.y),K,new l.Point(B.x,K.y),B]}return this.style.queryRenderedFeatures(Me,fe,this.transform)},U.prototype.querySourceFeatures=function(X,fe){return this.style.querySourceFeatures(X,fe)},U.prototype.setStyle=function(X,fe){return(fe=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},fe)).diff!==!1&&fe.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&X?(this._diffStyle(X,fe),this):(this._localIdeographFontFamily=fe.localIdeographFontFamily,this._updateStyle(X,fe))},U.prototype._getUIString=function(X){var fe=this._locale[X];if(fe==null)throw new Error("Missing UI string '"+X+"'");return fe},U.prototype._updateStyle=function(X,fe){return this.style&&(this.style.setEventedParent(null),this.style._remove()),X?(this.style=new er(this,fe||{}),this.style.setEventedParent(this,{style:this.style}),typeof X=="string"?this.style.loadURL(X):this.style.loadJSON(X),this):(delete this.style,this)},U.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new er(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},U.prototype._diffStyle=function(X,fe){var Me=this;if(typeof X=="string"){var B=this._requestManager.normalizeStyleURL(X),K=this._requestManager.transformRequest(B,l.ResourceType.Style);l.getJSON(K,function(ie,de){ie?Me.fire(new l.ErrorEvent(ie)):de&&Me._updateDiff(de,fe)})}else typeof X=="object"&&this._updateDiff(X,fe)},U.prototype._updateDiff=function(X,fe){try{this.style.setState(X)&&this._update(!0)}catch(Me){l.warnOnce("Unable to perform style diff: "+(Me.message||Me.error||Me)+".  Rebuilding the style from scratch."),this._updateStyle(X,fe)}},U.prototype.getStyle=function(){if(this.style)return this.style.serialize()},U.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")},U.prototype.addSource=function(X,fe){return this._lazyInitEmptyStyle(),this.style.addSource(X,fe),this._update(!0)},U.prototype.isSourceLoaded=function(X){var fe=this.style&&this.style.sourceCaches[X];if(fe!==void 0)return fe.loaded();this.fire(new l.ErrorEvent(new Error("There is no source with ID '"+X+"'")))},U.prototype.areTilesLoaded=function(){var X=this.style&&this.style.sourceCaches;for(var fe in X){var Me=X[fe]._tiles;for(var B in Me){var K=Me[B];if(K.state!=="loaded"&&K.state!=="errored")return!1}}return!0},U.prototype.addSourceType=function(X,fe,Me){return this._lazyInitEmptyStyle(),this.style.addSourceType(X,fe,Me)},U.prototype.removeSource=function(X){return this.style.removeSource(X),this._update(!0)},U.prototype.getSource=function(X){return this.style.getSource(X)},U.prototype.addImage=function(X,fe,Me){Me===void 0&&(Me={});var B=Me.pixelRatio;B===void 0&&(B=1);var K=Me.sdf;K===void 0&&(K=!1);var ie=Me.stretchX,de=Me.stretchY,ye=Me.content;if(this._lazyInitEmptyStyle(),fe instanceof _i||Ta&&fe instanceof Ta){var Le=l.browser.getImageData(fe),Be=Le.width,je=Le.height,qe=Le.data;this.style.addImage(X,{data:new l.RGBAImage({width:Be,height:je},qe),pixelRatio:B,stretchX:ie,stretchY:de,content:ye,sdf:K,version:0})}else{if(fe.width===void 0||fe.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Ze=fe.width,Qe=fe.height,lt=fe.data,ht=fe;this.style.addImage(X,{data:new l.RGBAImage({width:Ze,height:Qe},new Uint8Array(lt)),pixelRatio:B,stretchX:ie,stretchY:de,content:ye,sdf:K,version:0,userImage:ht}),ht.onAdd&&ht.onAdd(this,X)}},U.prototype.updateImage=function(X,fe){var Me=this.style.getImage(X);if(!Me)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var B=fe instanceof _i||Ta&&fe instanceof Ta?l.browser.getImageData(fe):fe,K=B.width,ie=B.height,de=B.data;if(K===void 0||ie===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(K!==Me.data.width||ie!==Me.data.height)return this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var ye=!(fe instanceof _i||Ta&&fe instanceof Ta);Me.data.replace(de,ye),this.style.updateImage(X,Me)},U.prototype.hasImage=function(X){return X?!!this.style.getImage(X):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)},U.prototype.removeImage=function(X){this.style.removeImage(X)},U.prototype.loadImage=function(X,fe){l.getImage(this._requestManager.transformRequest(X,l.ResourceType.Image),fe)},U.prototype.listImages=function(){return this.style.listImages()},U.prototype.addLayer=function(X,fe){return this._lazyInitEmptyStyle(),this.style.addLayer(X,fe),this._update(!0)},U.prototype.moveLayer=function(X,fe){return this.style.moveLayer(X,fe),this._update(!0)},U.prototype.removeLayer=function(X){return this.style.removeLayer(X),this._update(!0)},U.prototype.getLayer=function(X){return this.style.getLayer(X)},U.prototype.setLayerZoomRange=function(X,fe,Me){return this.style.setLayerZoomRange(X,fe,Me),this._update(!0)},U.prototype.setFilter=function(X,fe,Me){return Me===void 0&&(Me={}),this.style.setFilter(X,fe,Me),this._update(!0)},U.prototype.getFilter=function(X){return this.style.getFilter(X)},U.prototype.setPaintProperty=function(X,fe,Me,B){return B===void 0&&(B={}),this.style.setPaintProperty(X,fe,Me,B),this._update(!0)},U.prototype.getPaintProperty=function(X,fe){return this.style.getPaintProperty(X,fe)},U.prototype.setLayoutProperty=function(X,fe,Me,B){return B===void 0&&(B={}),this.style.setLayoutProperty(X,fe,Me,B),this._update(!0)},U.prototype.getLayoutProperty=function(X,fe){return this.style.getLayoutProperty(X,fe)},U.prototype.setLight=function(X,fe){return fe===void 0&&(fe={}),this._lazyInitEmptyStyle(),this.style.setLight(X,fe),this._update(!0)},U.prototype.getLight=function(){return this.style.getLight()},U.prototype.setFeatureState=function(X,fe){return this.style.setFeatureState(X,fe),this._update()},U.prototype.removeFeatureState=function(X,fe){return this.style.removeFeatureState(X,fe),this._update()},U.prototype.getFeatureState=function(X){return this.style.getFeatureState(X)},U.prototype.getContainer=function(){return this._container},U.prototype.getCanvasContainer=function(){return this._canvasContainer},U.prototype.getCanvas=function(){return this._canvas},U.prototype._containerDimensions=function(){var X=0,fe=0;return this._container&&(X=this._container.clientWidth||400,fe=this._container.clientHeight||300),[X,fe]},U.prototype._detectMissingCSS=function(){l.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&l.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},U.prototype._setupContainer=function(){var X=this._container;X.classList.add("mapboxgl-map"),(this._missingCSSCanary=b.create("div","mapboxgl-canary",X)).style.visibility="hidden",this._detectMissingCSS();var fe=this._canvasContainer=b.create("div","mapboxgl-canvas-container",X);this._interactive&&fe.classList.add("mapboxgl-interactive"),this._canvas=b.create("canvas","mapboxgl-canvas",fe),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Me=this._containerDimensions();this._resizeCanvas(Me[0],Me[1]);var B=this._controlContainer=b.create("div","mapboxgl-control-container",X),K=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(ie){K[ie]=b.create("div","mapboxgl-ctrl-"+ie,B)})},U.prototype._resizeCanvas=function(X,fe){var Me=l.browser.devicePixelRatio||1;this._canvas.width=Me*X,this._canvas.height=Me*fe,this._canvas.style.width=X+"px",this._canvas.style.height=fe+"px"},U.prototype._setupPainter=function(){var X=l.extend({},T.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),fe=this._canvas.getContext("webgl",X)||this._canvas.getContext("experimental-webgl",X);fe?(this.painter=new Qr(fe,this.transform),l.webpSupported.testSupport(fe)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))},U.prototype._contextLost=function(X){X.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:X}))},U.prototype._contextRestored=function(X){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:X}))},U.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},U.prototype._update=function(X){return this.style?(this._styleDirty=this._styleDirty||X,this._sourcesDirty=!0,this.triggerRepaint(),this):this},U.prototype._requestRenderFrame=function(X){return this._update(),this._renderTaskQueue.add(X)},U.prototype._cancelRenderFrame=function(X){this._renderTaskQueue.remove(X)},U.prototype._render=function(X){var fe,Me=this,B=0,K=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(fe=K.createQueryEXT(),K.beginQueryEXT(K.TIME_ELAPSED_EXT,fe),B=l.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(X),!this._removed){var ie=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var de=this.transform.zoom,ye=l.browser.now();this.style.zoomHistory.update(de,ye);var Le=new l.EvaluationParameters(de,{now:ye,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Be=Le.crossFadingFactor();Be===1&&Be===this._crossFadingFactor||(ie=!0,this._crossFadingFactor=Be),this.style.update(Le)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||ie)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var je=l.browser.now()-B;K.endQueryEXT(K.TIME_ELAPSED_EXT,fe),setTimeout(function(){var Ze=K.getQueryObjectEXT(fe,K.QUERY_RESULT_EXT)/1e6;K.deleteQueryEXT(fe),Me.fire(new l.Event("gpu-timing-frame",{cpuTime:je,gpuTime:Ze}))},50)}if(this.listens("gpu-timing-layer")){var qe=this.painter.collectGpuTimers();setTimeout(function(){var Ze=Me.painter.queryGpuTimers(qe);Me.fire(new l.Event("gpu-timing-layer",{layerTimes:Ze}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new l.Event("idle"))),this}},U.prototype.remove=function(){this._hash&&this._hash.remove();for(var X=0,fe=this._controls;X<fe.length;X+=1)fe[X].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),l.window!==void 0&&(l.window.removeEventListener("resize",this._onWindowResize,!1),l.window.removeEventListener("online",this._onWindowOnline,!1));var Me=this.painter.context.gl.getExtension("WEBGL_lose_context");Me&&Me.loseContext(),Lo(this._canvasContainer),Lo(this._controlContainer),Lo(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new l.Event("remove"))},U.prototype.triggerRepaint=function(){var X=this;this.style&&!this._frame&&(this._frame=l.browser.frame(function(fe){X._frame=null,X._render(fe)}))},U.prototype._onWindowOnline=function(){this._update()},U.prototype._onWindowResize=function(X){this._trackResize&&this.resize({originalEvent:X})._update()},j.showTileBoundaries.get=function(){return!!this._showTileBoundaries},j.showTileBoundaries.set=function(X){this._showTileBoundaries!==X&&(this._showTileBoundaries=X,this._update())},j.showPadding.get=function(){return!!this._showPadding},j.showPadding.set=function(X){this._showPadding!==X&&(this._showPadding=X,this._update())},j.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},j.showCollisionBoxes.set=function(X){this._showCollisionBoxes!==X&&(this._showCollisionBoxes=X,X?this.style._generateCollisionBoxes():this._update())},j.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},j.showOverdrawInspector.set=function(X){this._showOverdrawInspector!==X&&(this._showOverdrawInspector=X,this._update())},j.repaint.get=function(){return!!this._repaint},j.repaint.set=function(X){this._repaint!==X&&(this._repaint=X,this.triggerRepaint())},j.vertices.get=function(){return!!this._vertices},j.vertices.set=function(X){this._vertices=X,this._update()},U.prototype._setCacheLimits=function(X,fe){l.setCacheLimits(X,fe)},j.version.get=function(){return l.version},Object.defineProperties(U.prototype,j),U}(ws);function Lo(R){R.parentNode&&R.parentNode.removeChild(R)}var Jo={showCompass:!0,showZoom:!0,visualizePitch:!1},Ei=function(R){var U=this;this.options=l.extend({},Jo,R),this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(j){return j.preventDefault()}),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(j){return U._map.zoomIn({},{originalEvent:j})}),b.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(j){return U._map.zoomOut({},{originalEvent:j})}),b.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(j){U.options.visualizePitch?U._map.resetNorthPitch({},{originalEvent:j}):U._map.resetNorth({},{originalEvent:j})}),this._compassIcon=b.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ei.prototype._updateZoomButtons=function(){var R=this._map.getZoom();this._zoomInButton.disabled=R===this._map.getMaxZoom(),this._zoomOutButton.disabled=R===this._map.getMinZoom()},Ei.prototype._rotateCompassArrow=function(){var R=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=R},Ei.prototype.onAdd=function(R){return this._map=R,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Yi(this._map,this._compass,this.options.visualizePitch)),this._container},Ei.prototype.onRemove=function(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ei.prototype._createButton=function(R,U){var j=b.create("button",R,this._container);return j.type="button",j.addEventListener("click",U),j},Ei.prototype._setButtonTitle=function(R,U){var j=this._map._getUIString("NavigationControl."+U);R.title=j,R.setAttribute("aria-label",j)};var Yi=function(R,U,j){j===void 0&&(j=!1),this._clickTolerance=10,this.element=U,this.mouseRotate=new Sa({clickTolerance:R.dragRotate._mouseRotate._clickTolerance}),this.map=R,j&&(this.mousePitch=new Rs({clickTolerance:R.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),b.addEventListener(U,"mousedown",this.mousedown),b.addEventListener(U,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(U,"touchmove",this.touchmove),b.addEventListener(U,"touchend",this.touchend),b.addEventListener(U,"touchcancel",this.reset)};function Tr(R,U,j){if(R=new l.LngLat(R.lng,R.lat),U){var X=new l.LngLat(R.lng-360,R.lat),fe=new l.LngLat(R.lng+360,R.lat),Me=j.locationPoint(R).distSqr(U);j.locationPoint(X).distSqr(U)<Me?R=X:j.locationPoint(fe).distSqr(U)<Me&&(R=fe)}for(;Math.abs(R.lng-j.center.lng)>180;){var B=j.locationPoint(R);if(B.x>=0&&B.y>=0&&B.x<=j.width&&B.y<=j.height)break;R.lng>j.center.lng?R.lng-=360:R.lng+=360}return R}Yi.prototype.down=function(R,U){this.mouseRotate.mousedown(R,U),this.mousePitch&&this.mousePitch.mousedown(R,U),b.disableDrag()},Yi.prototype.move=function(R,U){var j=this.map,X=this.mouseRotate.mousemoveWindow(R,U);if(X&&X.bearingDelta&&j.setBearing(j.getBearing()+X.bearingDelta),this.mousePitch){var fe=this.mousePitch.mousemoveWindow(R,U);fe&&fe.pitchDelta&&j.setPitch(j.getPitch()+fe.pitchDelta)}},Yi.prototype.off=function(){var R=this.element;b.removeEventListener(R,"mousedown",this.mousedown),b.removeEventListener(R,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(R,"touchmove",this.touchmove),b.removeEventListener(R,"touchend",this.touchend),b.removeEventListener(R,"touchcancel",this.reset),this.offTemp()},Yi.prototype.offTemp=function(){b.enableDrag(),b.removeEventListener(l.window,"mousemove",this.mousemove),b.removeEventListener(l.window,"mouseup",this.mouseup)},Yi.prototype.mousedown=function(R){this.down(l.extend({},R,{ctrlKey:!0,preventDefault:function(){return R.preventDefault()}}),b.mousePos(this.element,R)),b.addEventListener(l.window,"mousemove",this.mousemove),b.addEventListener(l.window,"mouseup",this.mouseup)},Yi.prototype.mousemove=function(R){this.move(R,b.mousePos(this.element,R))},Yi.prototype.mouseup=function(R){this.mouseRotate.mouseupWindow(R),this.mousePitch&&this.mousePitch.mouseupWindow(R),this.offTemp()},Yi.prototype.touchstart=function(R){R.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,R.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return R.preventDefault()}},this._startPos))},Yi.prototype.touchmove=function(R){R.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,R.targetTouches)[0],this.move({preventDefault:function(){return R.preventDefault()}},this._lastPos))},Yi.prototype.touchend=function(R){R.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Yi.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Ar={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ss(R,U,j){var X=R.classList;for(var fe in Ar)X.remove("mapboxgl-"+j+"-anchor-"+fe);X.add("mapboxgl-"+j+"-anchor-"+U)}var ia,Co=function(R){function U(j,X){var fe=this;if(R.call(this),(j instanceof l.window.HTMLElement||X)&&(j=l.extend({element:j},X)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=j&&j.anchor||"center",this._color=j&&j.color||"#3FB1CE",this._draggable=j&&j.draggable||!1,this._state="inactive",this._rotation=j&&j.rotation||0,this._rotationAlignment=j&&j.rotationAlignment||"auto",this._pitchAlignment=j&&j.pitchAlignment&&j.pitchAlignment!=="auto"?j.pitchAlignment:this._rotationAlignment,j&&j.element)this._element=j.element,this._offset=l.Point.convert(j&&j.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div"),this._element.setAttribute("aria-label","Map marker");var Me=b.createNS("http://www.w3.org/2000/svg","svg");Me.setAttributeNS(null,"display","block"),Me.setAttributeNS(null,"height","41px"),Me.setAttributeNS(null,"width","27px"),Me.setAttributeNS(null,"viewBox","0 0 27 41");var B=b.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"stroke","none"),B.setAttributeNS(null,"stroke-width","1"),B.setAttributeNS(null,"fill","none"),B.setAttributeNS(null,"fill-rule","evenodd");var K=b.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"fill-rule","nonzero");var ie=b.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ie.setAttributeNS(null,"fill","#000000");for(var de=0,ye=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];de<ye.length;de+=1){var Le=ye[de],Be=b.createNS("http://www.w3.org/2000/svg","ellipse");Be.setAttributeNS(null,"opacity","0.04"),Be.setAttributeNS(null,"cx","10.5"),Be.setAttributeNS(null,"cy","5.80029008"),Be.setAttributeNS(null,"rx",Le.rx),Be.setAttributeNS(null,"ry",Le.ry),ie.appendChild(Be)}var je=b.createNS("http://www.w3.org/2000/svg","g");je.setAttributeNS(null,"fill",this._color);var qe=b.createNS("http://www.w3.org/2000/svg","path");qe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),je.appendChild(qe);var Ze=b.createNS("http://www.w3.org/2000/svg","g");Ze.setAttributeNS(null,"opacity","0.25"),Ze.setAttributeNS(null,"fill","#000000");var Qe=b.createNS("http://www.w3.org/2000/svg","path");Qe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ze.appendChild(Qe);var lt=b.createNS("http://www.w3.org/2000/svg","g");lt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),lt.setAttributeNS(null,"fill","#FFFFFF");var ht=b.createNS("http://www.w3.org/2000/svg","g");ht.setAttributeNS(null,"transform","translate(8.0, 8.0)");var St=b.createNS("http://www.w3.org/2000/svg","circle");St.setAttributeNS(null,"fill","#000000"),St.setAttributeNS(null,"opacity","0.25"),St.setAttributeNS(null,"cx","5.5"),St.setAttributeNS(null,"cy","5.5"),St.setAttributeNS(null,"r","5.4999962");var Lt=b.createNS("http://www.w3.org/2000/svg","circle");Lt.setAttributeNS(null,"fill","#FFFFFF"),Lt.setAttributeNS(null,"cx","5.5"),Lt.setAttributeNS(null,"cy","5.5"),Lt.setAttributeNS(null,"r","5.4999962"),ht.appendChild(St),ht.appendChild(Lt),K.appendChild(ie),K.appendChild(je),K.appendChild(Ze),K.appendChild(lt),K.appendChild(ht),Me.appendChild(K),this._element.appendChild(Me),this._offset=l.Point.convert(j&&j.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Mt){Mt.preventDefault()}),this._element.addEventListener("mousedown",function(Mt){Mt.preventDefault()}),this._element.addEventListener("focus",function(){var Mt=fe._map.getContainer();Mt.scrollTop=0,Mt.scrollLeft=0}),ss(this._element,this._anchor,"marker"),this._popup=null}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.addTo=function(j){return this.remove(),this._map=j,j.getCanvasContainer().appendChild(this._element),j.on("move",this._update),j.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},U.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this},U.prototype.getLngLat=function(){return this._lngLat},U.prototype.setLngLat=function(j){return this._lngLat=l.LngLat.convert(j),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},U.prototype.getElement=function(){return this._element},U.prototype.setPopup=function(j){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),j){if(!("offset"in j.options)){var X=13.5,fe=Math.sqrt(Math.pow(X,2)/2);j.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[fe,-1*(24.6+fe)],"bottom-right":[-fe,-1*(24.6+fe)],left:[X,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=j,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},U.prototype._onKeyPress=function(j){var X=j.code,fe=j.charCode||j.keyCode;X!=="Space"&&X!=="Enter"&&fe!==32&&fe!==13||this.togglePopup()},U.prototype._onMapClick=function(j){var X=j.originalEvent.target,fe=this._element;this._popup&&(X===fe||fe.contains(X))&&this.togglePopup()},U.prototype.getPopup=function(){return this._popup},U.prototype.togglePopup=function(){var j=this._popup;return j?(j.isOpen()?j.remove():j.addTo(this._map),this):this},U.prototype._update=function(j){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Tr(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var X="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?X="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(X="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var fe="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?fe="rotateX(0deg)":this._pitchAlignment==="map"&&(fe="rotateX("+this._map.getPitch()+"deg)"),j&&j.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,Ar[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+fe+" "+X)}},U.prototype.getOffset=function(){return this._offset},U.prototype.setOffset=function(j){return this._offset=l.Point.convert(j),this._update(),this},U.prototype._onMove=function(j){this._pos=j.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag"))},U.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"},U.prototype._addDragHandler=function(j){this._element.contains(j.originalEvent.target)&&(j.preventDefault(),this._positionDelta=j.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},U.prototype.setDraggable=function(j){return this._draggable=!!j,this._map&&(j?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},U.prototype.isDraggable=function(){return this._draggable},U.prototype.setRotation=function(j){return this._rotation=j||0,this._update(),this},U.prototype.getRotation=function(){return this._rotation},U.prototype.setRotationAlignment=function(j){return this._rotationAlignment=j||"auto",this._update(),this},U.prototype.getRotationAlignment=function(){return this._rotationAlignment},U.prototype.setPitchAlignment=function(j){return this._pitchAlignment=j&&j!=="auto"?j:this._rotationAlignment,this._update(),this},U.prototype.getPitchAlignment=function(){return this._pitchAlignment},U}(l.Evented),Wi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ls=0,Xi=!1,Po=function(R){function U(j){R.call(this),this.options=l.extend({},Wi,j),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.onAdd=function(j){return this._map=j,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),X=this._setupUI,ia!==void 0?X(ia):l.window.navigator.permissions!==void 0?l.window.navigator.permissions.query({name:"geolocation"}).then(function(fe){ia=fe.state!=="denied",X(ia)}):(ia=!!l.window.navigator.geolocation,X(ia)),this._container;var X},U.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ls=0,Xi=!1},U.prototype._isOutOfMapMaxBounds=function(j){var X=this._map.getMaxBounds(),fe=j.coords;return X&&(fe.longitude<X.getWest()||fe.longitude>X.getEast()||fe.latitude<X.getSouth()||fe.latitude>X.getNorth())},U.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},U.prototype._onSuccess=function(j){if(this._map){if(this._isOutOfMapMaxBounds(j))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",j)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=j,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(j),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(j),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",j)),this._finish()}},U.prototype._updateCamera=function(j){var X=new l.LngLat(j.coords.longitude,j.coords.latitude),fe=j.coords.accuracy,Me=this._map.getBearing(),B=l.extend({bearing:Me},this.options.fitBoundsOptions);this._map.fitBounds(X.toBounds(fe),B,{geolocateSource:!0})},U.prototype._updateMarker=function(j){if(j){var X=new l.LngLat(j.coords.longitude,j.coords.latitude);this._accuracyCircleMarker.setLngLat(X).addTo(this._map),this._userLocationDotMarker.setLngLat(X).addTo(this._map),this._accuracy=j.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},U.prototype._updateCircleRadius=function(){var j=this._map._container.clientHeight/2,X=this._map.unproject([0,j]),fe=this._map.unproject([1,j]),Me=X.distanceTo(fe),B=Math.ceil(2*this._accuracy/Me);this._circleElement.style.width=B+"px",this._circleElement.style.height=B+"px"},U.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},U.prototype._onError=function(j){if(this._map){if(this.options.trackUserLocation)if(j.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var X=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=X,this._geolocateButton.setAttribute("aria-label",X),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(j.code===3&&Xi)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",j)),this._finish()}},U.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},U.prototype._setupUI=function(j){var X=this;if(this._container.addEventListener("contextmenu",function(B){return B.preventDefault()}),this._geolocateButton=b.create("button","mapboxgl-ctrl-geolocate",this._container),b.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",j===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var fe=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=fe,this._geolocateButton.setAttribute("aria-label",fe)}else{var Me=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Me,this._geolocateButton.setAttribute("aria-label",Me)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Co(this._dotElement),this._circleElement=b.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Co({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(B){var K=B.originalEvent&&B.originalEvent.type==="resize";B.geolocateSource||X._watchState!=="ACTIVE_LOCK"||K||(X._watchState="BACKGROUND",X._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),X._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),X.fire(new l.Event("trackuserlocationend")))})},U.prototype.trigger=function(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ls--,Xi=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var j;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++ls>1?(j={maximumAge:6e5,timeout:0},Xi=!0):(j=this.options.positionOptions,Xi=!1),this._geolocationWatchID=l.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,j)}}else l.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},U.prototype._clearWatch=function(){l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},U}(l.Evented),Oo={maxWidth:100,unit:"metric"},Cr=function(R){this.options=l.extend({},Oo,R),l.bindAll(["_onMove","setUnit"],this)};function zi(R,U,j){var X=j&&j.maxWidth||100,fe=R._container.clientHeight/2,Me=R.unproject([0,fe]),B=R.unproject([X,fe]),K=Me.distanceTo(B);if(j&&j.unit==="imperial"){var ie=3.2808*K;ie>5280?Ka(U,X,ie/5280,R._getUIString("ScaleControl.Miles")):Ka(U,X,ie,R._getUIString("ScaleControl.Feet"))}else j&&j.unit==="nautical"?Ka(U,X,K/1852,R._getUIString("ScaleControl.NauticalMiles")):K>=1e3?Ka(U,X,K/1e3,R._getUIString("ScaleControl.Kilometers")):Ka(U,X,K,R._getUIString("ScaleControl.Meters"))}function Ka(R,U,j,X){var fe,Me,B,K=(fe=j,(Me=Math.pow(10,(""+Math.floor(fe)).length-1))*((B=fe/Me)>=10?10:B>=5?5:B>=3?3:B>=2?2:B>=1?1:function(de){var ye=Math.pow(10,Math.ceil(-Math.log(de)/Math.LN10));return Math.round(de*ye)/ye}(B))),ie=K/j;R.style.width=U*ie+"px",R.innerHTML=K+"&nbsp;"+X}Cr.prototype.getDefaultPosition=function(){return"bottom-left"},Cr.prototype._onMove=function(){zi(this._map,this._container,this.options)},Cr.prototype.onAdd=function(R){return this._map=R,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",R.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Cr.prototype.onRemove=function(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Cr.prototype.setUnit=function(R){this.options.unit=R,zi(this._map,this._container,this.options)};var da=function(R){this._fullscreen=!1,R&&R.container&&(R.container instanceof l.window.HTMLElement?this._container=R.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in l.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in l.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in l.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in l.window.document&&(this._fullscreenchange="MSFullscreenChange")};da.prototype.onAdd=function(R){return this._map=R,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},da.prototype.onRemove=function(){b.remove(this._controlContainer),this._map=null,l.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},da.prototype._checkFullscreenSupport=function(){return!!(l.window.document.fullscreenEnabled||l.window.document.mozFullScreenEnabled||l.window.document.msFullscreenEnabled||l.window.document.webkitFullscreenEnabled)},da.prototype._setupUI=function(){var R=this._fullscreenButton=b.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);b.create("span","mapboxgl-ctrl-icon",R).setAttribute("aria-hidden",!0),R.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),l.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},da.prototype._updateTitle=function(){var R=this._getTitle();this._fullscreenButton.setAttribute("aria-label",R),this._fullscreenButton.title=R},da.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},da.prototype._isFullscreen=function(){return this._fullscreen},da.prototype._changeIcon=function(){(l.window.document.fullscreenElement||l.window.document.mozFullScreenElement||l.window.document.webkitFullscreenElement||l.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},da.prototype._onClickFullscreen=function(){this._isFullscreen()?l.window.document.exitFullscreen?l.window.document.exitFullscreen():l.window.document.mozCancelFullScreen?l.window.document.mozCancelFullScreen():l.window.document.msExitFullscreen?l.window.document.msExitFullscreen():l.window.document.webkitCancelFullScreen&&l.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Ko={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},us=function(R){function U(j){R.call(this),this.options=l.extend(Object.create(Ko),j),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.addTo=function(j){return this._map&&this.remove(),this._map=j,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this},U.prototype.isOpen=function(){return!!this._map},U.prototype.remove=function(){return this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this},U.prototype.getLngLat=function(){return this._lngLat},U.prototype.setLngLat=function(j){return this._lngLat=l.LngLat.convert(j),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},U.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},U.prototype.getElement=function(){return this._container},U.prototype.setText=function(j){return this.setDOMContent(l.window.document.createTextNode(j))},U.prototype.setHTML=function(j){var X,fe=l.window.document.createDocumentFragment(),Me=l.window.document.createElement("body");for(Me.innerHTML=j;X=Me.firstChild;)fe.appendChild(X);return this.setDOMContent(fe)},U.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},U.prototype.setMaxWidth=function(j){return this.options.maxWidth=j,this._update(),this},U.prototype.setDOMContent=function(j){return this._createContent(),this._content.appendChild(j),this._update(),this},U.prototype.addClassName=function(j){this._container&&this._container.classList.add(j)},U.prototype.removeClassName=function(j){this._container&&this._container.classList.remove(j)},U.prototype.toggleClassName=function(j){if(this._container)return this._container.classList.toggle(j)},U.prototype._createContent=function(){this._content&&b.remove(this._content),this._content=b.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=b.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},U.prototype._onMouseUp=function(j){this._update(j.point)},U.prototype._onMouseMove=function(j){this._update(j.point)},U.prototype._onDrag=function(j){this._update(j.point)},U.prototype._update=function(j){var X=this,fe=this._lngLat||this._trackPointer;if(this._map&&fe&&this._content&&(this._container||(this._container=b.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=b.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Be){return X._container.classList.add(Be)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Tr(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||j)){var Me=this._pos=this._trackPointer&&j?j:this._map.project(this._lngLat),B=this.options.anchor,K=$o(this.options.offset);if(!B){var ie,de=this._container.offsetWidth,ye=this._container.offsetHeight;ie=Me.y+K.bottom.y<ye?["top"]:Me.y>this._map.transform.height-ye?["bottom"]:[],Me.x<de/2?ie.push("left"):Me.x>this._map.transform.width-de/2&&ie.push("right"),B=ie.length===0?"bottom":ie.join("-")}var Le=Me.add(K[B]).round();b.setTransform(this._container,Ar[B]+" translate("+Le.x+"px,"+Le.y+"px)"),ss(this._container,B,"popup")}},U.prototype._onClose=function(){this.remove()},U}(l.Evented);function $o(R){if(R){if(typeof R=="number"){var U=Math.round(Math.sqrt(.5*Math.pow(R,2)));return{center:new l.Point(0,0),top:new l.Point(0,R),"top-left":new l.Point(U,U),"top-right":new l.Point(-U,U),bottom:new l.Point(0,-R),"bottom-left":new l.Point(U,-U),"bottom-right":new l.Point(-U,-U),left:new l.Point(R,0),right:new l.Point(-R,0)}}if(R instanceof l.Point||Array.isArray(R)){var j=l.Point.convert(R);return{center:j,top:j,"top-left":j,"top-right":j,bottom:j,"bottom-left":j,"bottom-right":j,left:j,right:j}}return{center:l.Point.convert(R.center||[0,0]),top:l.Point.convert(R.top||[0,0]),"top-left":l.Point.convert(R["top-left"]||[0,0]),"top-right":l.Point.convert(R["top-right"]||[0,0]),bottom:l.Point.convert(R.bottom||[0,0]),"bottom-left":l.Point.convert(R["bottom-left"]||[0,0]),"bottom-right":l.Point.convert(R["bottom-right"]||[0,0]),left:l.Point.convert(R.left||[0,0]),right:l.Point.convert(R.right||[0,0])}}return $o(new l.Point(0,0))}var ho={version:l.version,supported:T,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:Bs,NavigationControl:Ei,GeolocateControl:Po,AttributionControl:pa,ScaleControl:Cr,FullscreenControl:da,Popup:us,Marker:Co,Style:er,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.Point,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,config:l.config,prewarm:function(){vt().acquire(et)},clearPrewarmedResources:function(){var R=dt;R&&(R.isPreloaded()&&R.numActive()===1?(R.release(et),dt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return l.config.ACCESS_TOKEN},set accessToken(R){l.config.ACCESS_TOKEN=R},get baseApiUrl(){return l.config.API_URL},set baseApiUrl(R){l.config.API_URL=R},get workerCount(){return tt.workerCount},set workerCount(R){tt.workerCount=R},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(R){l.config.MAX_PARALLEL_IMAGE_REQUESTS=R},clearStorage:function(R){l.clearTileCache(R)},workerUrl:""};return ho}),S}()},27084:function(Q){Q.exports=Math.log2||function(z){return Math.log(z)*Math.LOG2E}},16825:function(Q,z,t){Q.exports=function(k,l){l||(l=k,k=window);var T=0,b=0,d=0,s={shift:!1,alt:!1,control:!1,meta:!1},e=!1;function i(f){var y=!1;return"altKey"in f&&(y=y||f.altKey!==s.alt,s.alt=!!f.altKey),"shiftKey"in f&&(y=y||f.shiftKey!==s.shift,s.shift=!!f.shiftKey),"ctrlKey"in f&&(y=y||f.ctrlKey!==s.control,s.control=!!f.ctrlKey),"metaKey"in f&&(y=y||f.metaKey!==s.meta,s.meta=!!f.metaKey),y}function r(f,y){var v=S.x(y),m=S.y(y);"buttons"in y&&(f=0|y.buttons),(f!==T||v!==b||m!==d||i(y))&&(T=0|f,b=v||0,d=m||0,l&&l(T,b,d,s))}function n(f){r(0,f)}function a(){(T||b||d||s.shift||s.alt||s.meta||s.control)&&(b=d=0,T=0,s.shift=s.alt=s.control=s.meta=!1,l&&l(0,0,0,s))}function o(f){i(f)&&l&&l(T,b,d,s)}function u(f){S.buttons(f)===0?r(0,f):r(T,f)}function p(f){r(T|S.buttons(f),f)}function c(f){r(T&~S.buttons(f),f)}function x(){e||(e=!0,k.addEventListener("mousemove",u),k.addEventListener("mousedown",p),k.addEventListener("mouseup",c),k.addEventListener("mouseleave",n),k.addEventListener("mouseenter",n),k.addEventListener("mouseout",n),k.addEventListener("mouseover",n),k.addEventListener("blur",a),k.addEventListener("keyup",o),k.addEventListener("keydown",o),k.addEventListener("keypress",o),k!==window&&(window.addEventListener("blur",a),window.addEventListener("keyup",o),window.addEventListener("keydown",o),window.addEventListener("keypress",o)))}x();var g={element:k};return Object.defineProperties(g,{enabled:{get:function(){return e},set:function(f){f?x():e&&(e=!1,k.removeEventListener("mousemove",u),k.removeEventListener("mousedown",p),k.removeEventListener("mouseup",c),k.removeEventListener("mouseleave",n),k.removeEventListener("mouseenter",n),k.removeEventListener("mouseout",n),k.removeEventListener("mouseover",n),k.removeEventListener("blur",a),k.removeEventListener("keyup",o),k.removeEventListener("keydown",o),k.removeEventListener("keypress",o),k!==window&&(window.removeEventListener("blur",a),window.removeEventListener("keyup",o),window.removeEventListener("keydown",o),window.removeEventListener("keypress",o)))},enumerable:!0},buttons:{get:function(){return T},enumerable:!0},x:{get:function(){return b},enumerable:!0},y:{get:function(){return d},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),g};var S=t(74311)},48956:function(Q){var z={left:0,top:0};Q.exports=function(t,S,k){S=S||t.currentTarget||t.srcElement,Array.isArray(k)||(k=[0,0]);var l,T=t.clientX||0,b=t.clientY||0,d=(l=S)===window||l===document||l===document.body?z:l.getBoundingClientRect();return k[0]=T-d.left,k[1]=b-d.top,k}},74311:function(Q,z){function t(S){return S.target||S.srcElement||window}z.buttons=function(S){if(typeof S=="object"){if("buttons"in S)return S.buttons;if("which"in S){if((k=S.which)===2)return 4;if(k===3)return 2;if(k>0)return 1<<k-1}else if("button"in S){var k;if((k=S.button)===1)return 4;if(k===2)return 2;if(k>=0)return 1<<k}}return 0},z.element=t,z.x=function(S){if(typeof S=="object"){if("offsetX"in S)return S.offsetX;var k=t(S).getBoundingClientRect();return S.clientX-k.left}return 0},z.y=function(S){if(typeof S=="object"){if("offsetY"in S)return S.offsetY;var k=t(S).getBoundingClientRect();return S.clientY-k.top}return 0}},1195:function(Q,z,t){var S=t(75686);Q.exports=function(k,l,T){typeof k=="function"&&(T=!!l,l=k,k=window);var b=S("ex",k),d=function(s){T&&s.preventDefault();var e=s.deltaX||0,i=s.deltaY||0,r=s.deltaZ||0,n=1;switch(s.deltaMode){case 1:n=b;break;case 2:n=window.innerHeight}if(i*=n,r*=n,(e*=n)||i||r)return l(e,i,r,s)};return k.addEventListener("wheel",d),d}},7417:function(Q,z,t){var S;(function(k,l,T){l[k]=l[k]||function(){var b,d,s,e=Object.prototype.toString,i=typeof setImmediate<"u"?function(v){return setImmediate(v)}:setTimeout;try{Object.defineProperty({},"x",{}),b=function(v,m,_,h){return Object.defineProperty(v,m,{value:_,writable:!0,configurable:h!==!1})}}catch{b=function(m,_,h){return m[_]=h,m}}function r(v,m){s.add(v,m),d||(d=i(s.drain))}function n(v){var m,_=typeof v;return v==null||_!="object"&&_!="function"||(m=v.then),typeof m=="function"&&m}function a(){for(var v=0;v<this.chain.length;v++)o(this,this.state===1?this.chain[v].success:this.chain[v].failure,this.chain[v]);this.chain.length=0}function o(v,m,_){var h,A;try{m===!1?_.reject(v.msg):(h=m===!0?v.msg:m.call(void 0,v.msg))===_.promise?_.reject(TypeError("Promise-chain cycle")):(A=n(h))?A.call(h,_.resolve,_.reject):_.resolve(h)}catch(w){_.reject(w)}}function u(v){var m,_=this;if(!_.triggered){_.triggered=!0,_.def&&(_=_.def);try{(m=n(v))?r(function(){var h=new x(_);try{m.call(v,function(){u.apply(h,arguments)},function(){p.apply(h,arguments)})}catch(A){p.call(h,A)}}):(_.msg=v,_.state=1,_.chain.length>0&&r(a,_))}catch(h){p.call(new x(_),h)}}}function p(v){var m=this;m.triggered||(m.triggered=!0,m.def&&(m=m.def),m.msg=v,m.state=2,m.chain.length>0&&r(a,m))}function c(v,m,_,h){for(var A=0;A<m.length;A++)(function(w){v.resolve(m[w]).then(function(E){_(w,E)},h)})(A)}function x(v){this.def=v,this.triggered=!1}function g(v){this.promise=v,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function f(v){if(typeof v!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var m=new g(this);this.then=function(_,h){var A={success:typeof _!="function"||_,failure:typeof h=="function"&&h};return A.promise=new this.constructor(function(w,E){if(typeof w!="function"||typeof E!="function")throw TypeError("Not a function");A.resolve=w,A.reject=E}),m.chain.push(A),m.state!==0&&r(a,m),A.promise},this.catch=function(_){return this.then(void 0,_)};try{v.call(void 0,function(_){u.call(m,_)},function(_){p.call(m,_)})}catch(_){p.call(m,_)}}s=function(){var v,m,_;function h(A,w){this.fn=A,this.self=w,this.next=void 0}return{add:function(A,w){_=new h(A,w),m?m.next=_:v=_,m=_,_=void 0},drain:function(){var A=v;for(v=m=d=void 0;A;)A.fn.call(A.self),A=A.next}}}();var y=b({},"constructor",f,!1);return f.prototype=y,b(y,"__NPO__",0,!1),b(f,"resolve",function(v){return v&&typeof v=="object"&&v.__NPO__===1?v:new this(function(m,_){if(typeof m!="function"||typeof _!="function")throw TypeError("Not a function");m(v)})}),b(f,"reject",function(v){return new this(function(m,_){if(typeof m!="function"||typeof _!="function")throw TypeError("Not a function");_(v)})}),b(f,"all",function(v){var m=this;return e.call(v)!="[object Array]"?m.reject(TypeError("Not an array")):v.length===0?m.resolve([]):new m(function(_,h){if(typeof _!="function"||typeof h!="function")throw TypeError("Not a function");var A=v.length,w=Array(A),E=0;c(m,v,function(L,C){w[L]=C,++E===A&&_(w)},h)})}),b(f,"race",function(v){var m=this;return e.call(v)!="[object Array]"?m.reject(TypeError("Not an array")):new m(function(_,h){if(typeof _!="function"||typeof h!="function")throw TypeError("Not a function");c(m,v,function(A,w){_(w)},h)})}),f}(),Q.exports?Q.exports=l[k]:(S=function(){return l[k]}.call(z,t,z,Q))===void 0||(Q.exports=S)})("Promise",t.g!==void 0?t.g:this)},18625:function(Q){var z=Math.PI,t=b(120);function S(d,s,e,i){return["C",d,s,e,i,e,i]}function k(d,s,e,i,r,n){return["C",d/3+.6666666666666666*e,s/3+.6666666666666666*i,r/3+.6666666666666666*e,n/3+.6666666666666666*i,r,n]}function l(d,s,e,i,r,n,a,o,u,p){if(p)A=p[0],w=p[1],_=p[2],h=p[3];else{var c=T(d,s,-r);d=c.x,s=c.y;var x=(d-(o=(c=T(o,u,-r)).x))/2,g=(s-(u=c.y))/2,f=x*x/(e*e)+g*g/(i*i);f>1&&(e*=f=Math.sqrt(f),i*=f);var y=e*e,v=i*i,m=(n==a?-1:1)*Math.sqrt(Math.abs((y*v-y*g*g-v*x*x)/(y*g*g+v*x*x)));m==1/0&&(m=1);var _=m*e*g/i+(d+o)/2,h=m*-i*x/e+(s+u)/2,A=Math.asin(((s-h)/i).toFixed(9)),w=Math.asin(((u-h)/i).toFixed(9));(A=d<_?z-A:A)<0&&(A=2*z+A),(w=o<_?z-w:w)<0&&(w=2*z+w),a&&A>w&&(A-=2*z),!a&&w>A&&(w-=2*z)}if(Math.abs(w-A)>t){var E=w,L=o,C=u;w=A+t*(a&&w>A?1:-1);var P=l(o=_+e*Math.cos(w),u=h+i*Math.sin(w),e,i,r,0,a,L,C,[w,E,_,h])}var D=Math.tan((w-A)/4),G=4/3*e*D,I=4/3*i*D,H=[2*d-(d+G*Math.sin(A)),2*s-(s-I*Math.cos(A)),o+G*Math.sin(w),u-I*Math.cos(w),o,u];if(p)return H;P&&(H=H.concat(P));for(var N=0;N<H.length;){var F=T(H[N],H[N+1],r);H[N++]=F.x,H[N++]=F.y}return H}function T(d,s,e){return{x:d*Math.cos(e)-s*Math.sin(e),y:d*Math.sin(e)+s*Math.cos(e)}}function b(d){return d*(z/180)}Q.exports=function(d){for(var s,e=[],i=0,r=0,n=0,a=0,o=null,u=null,p=0,c=0,x=0,g=d.length;x<g;x++){var f=d[x],y=f[0];switch(y){case"M":n=f[1],a=f[2];break;case"A":(f=l(p,c,f[1],f[2],b(f[3]),f[4],f[5],f[6],f[7])).unshift("C"),f.length>7&&(e.push(f.splice(0,7)),f.unshift("C"));break;case"S":var v=p,m=c;s!="C"&&s!="S"||(v+=v-i,m+=m-r),f=["C",v,m,f[1],f[2],f[3],f[4]];break;case"T":s=="Q"||s=="T"?(o=2*p-o,u=2*c-u):(o=p,u=c),f=k(p,c,o,u,f[1],f[2]);break;case"Q":o=f[1],u=f[2],f=k(p,c,f[1],f[2],f[3],f[4]);break;case"L":f=S(p,c,f[1],f[2]);break;case"H":f=S(p,c,f[1],c);break;case"V":f=S(p,c,p,f[1]);break;case"Z":f=S(p,c,n,a)}s=y,p=f[f.length-2],c=f[f.length-1],f.length>4?(i=f[f.length-4],r=f[f.length-3]):(i=p,r=c),e.push(f)}return e}},56131:function(Q){var z=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;Q.exports=function(){try{if(!Object.assign)return!1;var k=new String("abc");if(k[5]="de",Object.getOwnPropertyNames(k)[0]==="5")return!1;for(var l={},T=0;T<10;T++)l["_"+String.fromCharCode(T)]=T;if(Object.getOwnPropertyNames(l).map(function(d){return l[d]}).join("")!=="0123456789")return!1;var b={};return"abcdefghijklmnopqrst".split("").forEach(function(d){b[d]=d}),Object.keys(Object.assign({},b)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(k,l){for(var T,b,d=function(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}(k),s=1;s<arguments.length;s++){for(var e in T=Object(arguments[s]))t.call(T,e)&&(d[e]=T[e]);if(z){b=z(T);for(var i=0;i<b.length;i++)S.call(T,b[i])&&(d[b[i]]=T[b[i]])}}return d}},65848:function(Q){var z=function(t){return t!=t};Q.exports=function(t,S){return t===0&&S===0?1/t==1/S:t===S||!(!z(t)||!z(S))}},64003:function(Q,z,t){var S=t(17045),k=t(68222),l=t(65848),T=t(27015),b=t(55572),d=k(T(),Object);S(d,{getPolyfill:T,implementation:l,shim:b}),Q.exports=d},27015:function(Q,z,t){var S=t(65848);Q.exports=function(){return typeof Object.is=="function"?Object.is:S}},55572:function(Q,z,t){var S=t(27015),k=t(17045);Q.exports=function(){var l=S();return k(Object,{is:l},{is:function(){return Object.is!==l}}),l}},99019:function(Q,z,t){var S;if(!Object.keys){var k=Object.prototype.hasOwnProperty,l=Object.prototype.toString,T=t(64178),b=Object.prototype.propertyIsEnumerable,d=!b.call({toString:null},"toString"),s=b.call(function(){},"prototype"),e=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=function(a){var o=a.constructor;return o&&o.prototype===a},r={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},n=function(){if(typeof window>"u")return!1;for(var a in window)try{if(!r["$"+a]&&k.call(window,a)&&window[a]!==null&&typeof window[a]=="object")try{i(window[a])}catch{return!0}}catch{return!0}return!1}();S=function(a){var o=a!==null&&typeof a=="object",u=l.call(a)==="[object Function]",p=T(a),c=o&&l.call(a)==="[object String]",x=[];if(!o&&!u&&!p)throw new TypeError("Object.keys called on a non-object");var g=s&&u;if(c&&a.length>0&&!k.call(a,0))for(var f=0;f<a.length;++f)x.push(String(f));if(p&&a.length>0)for(var y=0;y<a.length;++y)x.push(String(y));else for(var v in a)g&&v==="prototype"||!k.call(a,v)||x.push(String(v));if(d)for(var m=function(h){if(typeof window>"u"||!n)return i(h);try{return i(h)}catch{return!1}}(a),_=0;_<e.length;++_)m&&e[_]==="constructor"||!k.call(a,e[_])||x.push(e[_]);return x}}Q.exports=S},8709:function(Q,z,t){var S=Array.prototype.slice,k=t(64178),l=Object.keys,T=l?function(d){return l(d)}:t(99019),b=Object.keys;T.shim=function(){if(Object.keys){var d=function(){var s=Object.keys(arguments);return s&&s.length===arguments.length}(1,2);d||(Object.keys=function(s){return k(s)?b(S.call(s)):b(s)})}else Object.keys=T;return Object.keys||T},Q.exports=T},64178:function(Q){var z=Object.prototype.toString;Q.exports=function(t){var S=z.call(t),k=S==="[object Arguments]";return k||(k=S!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&z.call(t.callee)==="[object Function]"),k}},88641:function(Q){function z(k,l){if(typeof k!="string")return[k];var T=[k];typeof l=="string"||Array.isArray(l)?l={brackets:l}:l||(l={});var b=l.brackets?Array.isArray(l.brackets)?l.brackets:[l.brackets]:["{}","[]","()"],d=l.escape||"___",s=!!l.flat;b.forEach(function(i){var r=new RegExp(["\\",i[0],"[^\\",i[0],"\\",i[1],"]*\\",i[1]].join("")),n=[];function a(o,u,p){var c=T.push(o.slice(i[0].length,-i[1].length))-1;return n.push(c),d+c+d}T.forEach(function(o,u){for(var p,c=0;o!=p;)if(p=o,o=o.replace(r,a),c++>1e4)throw Error("References have circular dependency. Please, check them.");T[u]=o}),n=n.reverse(),T=T.map(function(o){return n.forEach(function(u){o=o.replace(new RegExp("(\\"+d+u+"\\"+d+")","g"),i[0]+"$1"+i[1])}),o})});var e=new RegExp("\\"+d+"([0-9]+)\\"+d);return s?T:function i(r,n,a){for(var o,u=[],p=0;o=e.exec(r);){if(p++>1e4)throw Error("Circular references in parenthesis");u.push(r.slice(0,o.index)),u.push(i(n[o[1]],n)),r=r.slice(o.index+o[0].length)}return u.push(r),u}(T[0],T)}function t(k,l){if(l&&l.flat){var T,b=l&&l.escape||"___",d=k[0];if(!d)return"";for(var s=new RegExp("\\"+b+"([0-9]+)\\"+b),e=0;d!=T;){if(e++>1e4)throw Error("Circular references in "+k);T=d,d=d.replace(s,i)}return d}return k.reduce(function r(n,a){return Array.isArray(a)&&(a=a.reduce(r,"")),n+a},"");function i(r,n){if(k[n]==null)throw Error("Reference "+n+"is undefined");return k[n]}}function S(k,l){return Array.isArray(k)?t(k,l):z(k,l)}S.parse=z,S.stringify=t,Q.exports=S},18863:function(Q,z,t){var S=t(71299);Q.exports=function(k){var l;return arguments.length>1&&(k=arguments),typeof k=="string"?k=k.split(/\s/).map(parseFloat):typeof k=="number"&&(k=[k]),k.length&&typeof k[0]=="number"?l=k.length===1?{width:k[0],height:k[0],x:0,y:0}:k.length===2?{width:k[0],height:k[1],x:0,y:0}:{x:k[0],y:k[1],width:k[2]-k[0]||0,height:k[3]-k[1]||0}:k&&(l={x:(k=S(k,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:k.top||0},k.width==null?k.right?l.width=k.right-l.x:l.width=0:l.width=k.width,k.height==null?k.bottom?l.height=k.bottom-l.y:l.height=0:l.height=k.height),l}},95616:function(Q){Q.exports=function(k){var l=[];return k.replace(t,function(T,b,d){var s=b.toLowerCase();for(d=function(e){var i=e.match(S);return i?i.map(Number):[]}(d),s=="m"&&d.length>2&&(l.push([b].concat(d.splice(0,2))),s="l",b=b=="m"?"l":"L");;){if(d.length==z[s])return d.unshift(b),l.push(d);if(d.length<z[s])throw new Error("malformed path data");l.push([b].concat(d.splice(0,z[s])))}}),l};var z={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/gi,S=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},25677:function(Q){Q.exports=function(z,t){t||(t=[0,""]),z=String(z);var S=parseFloat(z,10);return t[0]=S,t[1]=z.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},9748:function(Q,z,t){var S=t(90386);(function(){var k,l,T,b,d,s;typeof performance<"u"&&performance!==null&&performance.now?Q.exports=function(){return performance.now()}:S!=null&&S.hrtime?(Q.exports=function(){return(k()-d)/1e6},l=S.hrtime,b=(k=function(){var e;return 1e9*(e=l())[0]+e[1]})(),s=1e9*S.uptime(),d=b-s):Date.now?(Q.exports=function(){return Date.now()-T},T=Date.now()):(Q.exports=function(){return new Date().getTime()-T},T=new Date().getTime())}).call(this)},71299:function(Q){Q.exports=function(S,k,l){var T,b,d={};if(typeof k=="string"&&(k=t(k)),Array.isArray(k)){var s={};for(b=0;b<k.length;b++)s[k[b]]=!0;k=s}for(T in k)k[T]=t(k[T]);var e={};for(T in k){var i=k[T];if(Array.isArray(i))for(b=0;b<i.length;b++){var r=i[b];if(l&&(e[r]=!0),r in S){if(d[T]=S[r],l)for(var n=b;n<i.length;n++)e[i[n]]=!0;break}}else T in S&&(k[T]&&(d[T]=S[T]),l&&(e[T]=!0))}if(l)for(T in S)e[T]||(d[T]=S[T]);return d};var z={};function t(S){return z[S]?z[S]:(typeof S=="string"&&(S=z[S]=S.split(/\s*,\s*|\s+/)),S)}},38258:function(Q){Q.exports=function(z,t,S,k){var l=z[0],T=z[1],b=!1;S===void 0&&(S=0),k===void 0&&(k=t.length);for(var d=k-S,s=0,e=d-1;s<d;e=s++){var i=t[s+S][0],r=t[s+S][1],n=t[e+S][0],a=t[e+S][1];r>T!=a>T&&l<(n-i)*(T-r)/(a-r)+i&&(b=!b)}return b}},52142:function(Q,z,t){var S,k=t(69444),l=t(29023),T=t(87263),b=t(11328),d=t(55968),s=t(10670),e=!1,i=l();function r(n,a,o){var u=S.segments(n),p=S.segments(a),c=o(S.combine(u,p));return S.polygon(c)}S={buildLog:function(n){return n===!0?e=k():n===!1&&(e=!1),e!==!1&&e.list},epsilon:function(n){return i.epsilon(n)},segments:function(n){var a=T(!0,i,e);return n.regions.forEach(a.addRegion),{segments:a.calculate(n.inverted),inverted:n.inverted}},combine:function(n,a){return{combined:T(!1,i,e).calculate(n.segments,n.inverted,a.segments,a.inverted),inverted1:n.inverted,inverted2:a.inverted}},selectUnion:function(n){return{segments:d.union(n.combined,e),inverted:n.inverted1||n.inverted2}},selectIntersect:function(n){return{segments:d.intersect(n.combined,e),inverted:n.inverted1&&n.inverted2}},selectDifference:function(n){return{segments:d.difference(n.combined,e),inverted:n.inverted1&&!n.inverted2}},selectDifferenceRev:function(n){return{segments:d.differenceRev(n.combined,e),inverted:!n.inverted1&&n.inverted2}},selectXor:function(n){return{segments:d.xor(n.combined,e),inverted:n.inverted1!==n.inverted2}},polygon:function(n){return{regions:b(n.segments,i,e),inverted:n.inverted}},polygonFromGeoJSON:function(n){return s.toPolygon(S,n)},polygonToGeoJSON:function(n){return s.fromPolygon(S,i,n)},union:function(n,a){return r(n,a,S.selectUnion)},intersect:function(n,a){return r(n,a,S.selectIntersect)},difference:function(n,a){return r(n,a,S.selectDifference)},differenceRev:function(n,a){return r(n,a,S.selectDifferenceRev)},xor:function(n,a){return r(n,a,S.selectXor)}},typeof window=="object"&&(window.PolyBool=S),Q.exports=S},69444:function(Q){Q.exports=function(){var z,t=0,S=!1;function k(l,T){return z.list.push({type:l,data:T?JSON.parse(JSON.stringify(T)):void 0}),z}return z={list:[],segmentId:function(){return t++},checkIntersection:function(l,T){return k("check",{seg1:l,seg2:T})},segmentChop:function(l,T){return k("div_seg",{seg:l,pt:T}),k("chop",{seg:l,pt:T})},statusRemove:function(l){return k("pop_seg",{seg:l})},segmentUpdate:function(l){return k("seg_update",{seg:l})},segmentNew:function(l,T){return k("new_seg",{seg:l,primary:T})},segmentRemove:function(l){return k("rem_seg",{seg:l})},tempStatus:function(l,T,b){return k("temp_status",{seg:l,above:T,below:b})},rewind:function(l){return k("rewind",{seg:l})},status:function(l,T,b){return k("status",{seg:l,above:T,below:b})},vert:function(l){return l===S?z:(S=l,k("vert",{x:l}))},log:function(l){return typeof l!="string"&&(l=JSON.stringify(l,!1,"  ")),k("log",{txt:l})},reset:function(){return k("reset")},selected:function(l){return k("selected",{segs:l})},chainStart:function(l){return k("chain_start",{seg:l})},chainRemoveHead:function(l,T){return k("chain_rem_head",{index:l,pt:T})},chainRemoveTail:function(l,T){return k("chain_rem_tail",{index:l,pt:T})},chainNew:function(l,T){return k("chain_new",{pt1:l,pt2:T})},chainMatch:function(l){return k("chain_match",{index:l})},chainClose:function(l){return k("chain_close",{index:l})},chainAddHead:function(l,T){return k("chain_add_head",{index:l,pt:T})},chainAddTail:function(l,T){return k("chain_add_tail",{index:l,pt:T})},chainConnect:function(l,T){return k("chain_con",{index1:l,index2:T})},chainReverse:function(l){return k("chain_rev",{index:l})},chainJoin:function(l,T){return k("chain_join",{index1:l,index2:T})},done:function(){return k("done")}}}},29023:function(Q){Q.exports=function(z){typeof z!="number"&&(z=1e-10);var t={epsilon:function(S){return typeof S=="number"&&(z=S),z},pointAboveOrOnLine:function(S,k,l){var T=k[0],b=k[1],d=l[0],s=l[1],e=S[0];return(d-T)*(S[1]-b)-(s-b)*(e-T)>=-z},pointBetween:function(S,k,l){var T=S[1]-k[1],b=l[0]-k[0],d=S[0]-k[0],s=l[1]-k[1],e=d*b+T*s;return!(e<z||e-(b*b+s*s)>-z)},pointsSameX:function(S,k){return Math.abs(S[0]-k[0])<z},pointsSameY:function(S,k){return Math.abs(S[1]-k[1])<z},pointsSame:function(S,k){return t.pointsSameX(S,k)&&t.pointsSameY(S,k)},pointsCompare:function(S,k){return t.pointsSameX(S,k)?t.pointsSameY(S,k)?0:S[1]<k[1]?-1:1:S[0]<k[0]?-1:1},pointsCollinear:function(S,k,l){var T=S[0]-k[0],b=S[1]-k[1],d=k[0]-l[0],s=k[1]-l[1];return Math.abs(T*s-d*b)<z},linesIntersect:function(S,k,l,T){var b=k[0]-S[0],d=k[1]-S[1],s=T[0]-l[0],e=T[1]-l[1],i=b*e-d*s;if(Math.abs(i)<z)return!1;var r=S[0]-l[0],n=S[1]-l[1],a=(s*n-e*r)/i,o=(b*n-d*r)/i,u={alongA:0,alongB:0,pt:[S[0]+a*b,S[1]+a*d]};return u.alongA=a<=-z?-2:a<z?-1:a-1<=-z?0:a-1<z?1:2,u.alongB=o<=-z?-2:o<z?-1:o-1<=-z?0:o-1<z?1:2,u},pointInsideRegion:function(S,k){for(var l=S[0],T=S[1],b=k[k.length-1][0],d=k[k.length-1][1],s=!1,e=0;e<k.length;e++){var i=k[e][0],r=k[e][1];r-T>z!=d-T>z&&(b-i)*(T-r)/(d-r)+i-l>z&&(s=!s),b=i,d=r}return s}};return t}},10670:function(Q){var z={toPolygon:function(t,S){function k(b){if(b.length<=0)return t.segments({inverted:!1,regions:[]});function d(i){var r=i.slice(0,i.length-1);return t.segments({inverted:!1,regions:[r]})}for(var s=d(b[0]),e=1;e<b.length;e++)s=t.selectDifference(t.combine(s,d(b[e])));return s}if(S.type==="Polygon")return t.polygon(k(S.coordinates));if(S.type==="MultiPolygon"){for(var l=t.segments({inverted:!1,regions:[]}),T=0;T<S.coordinates.length;T++)l=t.selectUnion(t.combine(l,k(S.coordinates[T])));return t.polygon(l)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(t,S,k){function l(o,u){return S.pointInsideRegion([.5*(o[0][0]+o[1][0]),.5*(o[0][1]+o[1][1])],u)}function T(o){return{region:o,children:[]}}k=t.polygon(t.segments(k));var b=T(null);function d(o,u){for(var p=0;p<o.children.length;p++)if(l(u,(x=o.children[p]).region))return void d(x,u);var c=T(u);for(p=0;p<o.children.length;p++){var x;l((x=o.children[p]).region,u)&&(c.children.push(x),o.children.splice(p,1),p--)}o.children.push(c)}for(var s=0;s<k.regions.length;s++){var e=k.regions[s];e.length<3||d(b,e)}function i(o,u){for(var p=0,c=o[o.length-1][0],x=o[o.length-1][1],g=[],f=0;f<o.length;f++){var y=o[f][0],v=o[f][1];g.push([y,v]),p+=v*c-y*x,c=y,x=v}return p<0!==u&&g.reverse(),g.push([g[0][0],g[0][1]]),g}var r=[];function n(o){var u=[i(o.region,!1)];r.push(u);for(var p=0;p<o.children.length;p++)u.push(a(o.children[p]))}function a(o){for(var u=0;u<o.children.length;u++)n(o.children[u]);return i(o.region,!0)}for(s=0;s<b.children.length;s++)n(b.children[s]);return r.length<=0?{type:"Polygon",coordinates:[]}:r.length==1?{type:"Polygon",coordinates:r[0]}:{type:"MultiPolygon",coordinates:r}}};Q.exports=z},87263:function(Q,z,t){var S=t(26859);Q.exports=function(k,l,T){function b(n,a,o){return{id:T?T.segmentId():-1,start:n,end:a,myFill:{above:o.myFill.above,below:o.myFill.below},otherFill:null}}var d=S.create();function s(n,a){d.insertBefore(n,function(o){return u=n.isStart,p=n.pt,c=a,x=o.isStart,g=o.pt,f=o.other.pt,((y=l.pointsCompare(p,g))!==0?y:l.pointsSame(c,f)?0:u!==x?u?1:-1:l.pointAboveOrOnLine(c,x?g:f,x?f:g)?1:-1)<0;var u,p,c,x,g,f,y})}function e(n,a){var o=function(u,p){var c=S.node({isStart:!0,pt:u.start,seg:u,primary:p,other:null,status:null});return s(c,u.end),c}(n,a);return function(u,p,c){var x=S.node({isStart:!1,pt:p.end,seg:p,primary:c,other:u,status:null});u.other=x,s(x,u.pt)}(o,n,a),o}function i(n,a){var o=b(a,n.seg.end,n.seg);return function(u,p){T&&T.segmentChop(u.seg,p),u.other.remove(),u.seg.end=p,u.other.pt=p,s(u.other,u.pt)}(n,a),e(o,n.primary)}function r(n,a){var o=S.create();function u(w){return o.findTransition(function(E){var L,C,P,D,G,I;return L=w,C=E.ev,P=L.seg.start,D=L.seg.end,G=C.seg.start,I=C.seg.end,(l.pointsCollinear(P,G,I)?l.pointsCollinear(D,G,I)||l.pointAboveOrOnLine(D,G,I)?1:-1:l.pointAboveOrOnLine(P,G,I)?1:-1)>0})}function p(w,E){var L=w.seg,C=E.seg,P=L.start,D=L.end,G=C.start,I=C.end;T&&T.checkIntersection(L,C);var H=l.linesIntersect(P,D,G,I);if(H===!1){if(!l.pointsCollinear(P,D,G)||l.pointsSame(P,I)||l.pointsSame(D,G))return!1;var N=l.pointsSame(P,G),F=l.pointsSame(D,I);if(N&&F)return E;var V=!N&&l.pointBetween(P,G,I),q=!F&&l.pointBetween(D,G,I);if(N)return q?i(E,D):i(w,I),E;V&&(F||(q?i(E,D):i(w,I)),i(E,P))}else H.alongA===0&&(H.alongB===-1?i(w,G):H.alongB===0?i(w,H.pt):H.alongB===1&&i(w,I)),H.alongB===0&&(H.alongA===-1?i(E,P):H.alongA===0?i(E,H.pt):H.alongA===1&&i(E,D));return!1}for(var c=[];!d.isEmpty();){var x=d.getHead();if(T&&T.vert(x.pt[0]),x.isStart){let w=function(){if(f){var E=p(x,f);if(E)return E}return!!y&&p(x,y)};T&&T.segmentNew(x.seg,x.primary);var g=u(x),f=g.before?g.before.ev:null,y=g.after?g.after.ev:null;T&&T.tempStatus(x.seg,!!f&&f.seg,!!y&&y.seg);var v,m,_=w();if(_&&(k?(m=x.seg.myFill.below===null||x.seg.myFill.above!==x.seg.myFill.below)&&(_.seg.myFill.above=!_.seg.myFill.above):_.seg.otherFill=x.seg.myFill,T&&T.segmentUpdate(_.seg),x.other.remove(),x.remove()),d.getHead()!==x){T&&T.rewind(x.seg);continue}k?(m=x.seg.myFill.below===null||x.seg.myFill.above!==x.seg.myFill.below,x.seg.myFill.below=y?y.seg.myFill.above:n,x.seg.myFill.above=m?!x.seg.myFill.below:x.seg.myFill.below):x.seg.otherFill===null&&(v=y?x.primary===y.primary?y.seg.otherFill.above:y.seg.myFill.above:x.primary?a:n,x.seg.otherFill={above:v,below:v}),T&&T.status(x.seg,!!f&&f.seg,!!y&&y.seg),x.other.status=g.insert(S.node({ev:x}))}else{var h=x.status;if(h===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(o.exists(h.prev)&&o.exists(h.next)&&p(h.prev.ev,h.next.ev),T&&T.statusRemove(h.ev.seg),h.remove(),!x.primary){var A=x.seg.myFill;x.seg.myFill=x.seg.otherFill,x.seg.otherFill=A}c.push(x.seg)}d.getHead().remove()}return T&&T.done(),c}return k?{addRegion:function(n){for(var a,o,u,p=n[n.length-1],c=0;c<n.length;c++){a=p,p=n[c];var x=l.pointsCompare(a,p);x!==0&&e((o=x<0?a:p,u=x<0?p:a,{id:T?T.segmentId():-1,start:o,end:u,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(n){return r(n,!1)}}:{calculate:function(n,a,o,u){return n.forEach(function(p){e(b(p.start,p.end,p),!0)}),o.forEach(function(p){e(b(p.start,p.end,p),!1)}),r(a,u)}}}},26859:function(Q){Q.exports={create:function(){var z={root:{root:!0,next:null},exists:function(t){return t!==null&&t!==z.root},isEmpty:function(){return z.root.next===null},getHead:function(){return z.root.next},insertBefore:function(t,S){for(var k=z.root,l=z.root.next;l!==null;){if(S(l))return t.prev=l.prev,t.next=l,l.prev.next=t,void(l.prev=t);k=l,l=l.next}k.next=t,t.prev=k,t.next=null},findTransition:function(t){for(var S=z.root,k=z.root.next;k!==null&&!t(k);)S=k,k=k.next;return{before:S===z.root?null:S,after:k,insert:function(l){return l.prev=S,l.next=k,S.next=l,k!==null&&(k.prev=l),l}}}};return z},node:function(z){return z.prev=null,z.next=null,z.remove=function(){z.prev.next=z.next,z.next&&(z.next.prev=z.prev),z.prev=null,z.next=null},z}}},11328:function(Q){Q.exports=function(z,t,S){var k=[],l=[];return z.forEach(function(T){var b=T.start,d=T.end;if(t.pointsSame(b,d))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{S&&S.chainStart(T);for(var s={index:0,matches_head:!1,matches_pt1:!1},e={index:0,matches_head:!1,matches_pt1:!1},i=s,r=0;r<k.length;r++){var n=(c=k[r])[0],a=(c[1],c[c.length-1]);if(c[c.length-2],t.pointsSame(n,b)){if(h(r,!0,!0))break}else if(t.pointsSame(n,d)){if(h(r,!0,!1))break}else if(t.pointsSame(a,b)){if(h(r,!1,!0))break}else if(t.pointsSame(a,d)&&h(r,!1,!1))break}if(i===s)return k.push([b,d]),void(S&&S.chainNew(b,d));if(i===e){S&&S.chainMatch(s.index);var o=s.index,u=s.matches_pt1?d:b,p=s.matches_head,c=k[o],x=p?c[0]:c[c.length-1],g=p?c[1]:c[c.length-2],f=p?c[c.length-1]:c[0],y=p?c[c.length-2]:c[1];return t.pointsCollinear(g,x,u)&&(p?(S&&S.chainRemoveHead(s.index,u),c.shift()):(S&&S.chainRemoveTail(s.index,u),c.pop()),x=g),t.pointsSame(f,u)?(k.splice(o,1),t.pointsCollinear(y,f,x)&&(p?(S&&S.chainRemoveTail(s.index,x),c.pop()):(S&&S.chainRemoveHead(s.index,x),c.shift())),S&&S.chainClose(s.index),void l.push(c)):void(p?(S&&S.chainAddHead(s.index,u),c.unshift(u)):(S&&S.chainAddTail(s.index,u),c.push(u)))}var v=s.index,m=e.index;S&&S.chainConnect(v,m);var _=k[v].length<k[m].length;s.matches_head?e.matches_head?_?(A(v),w(v,m)):(A(m),w(m,v)):w(m,v):e.matches_head?w(v,m):_?(A(v),w(m,v)):(A(m),w(v,m))}function h(E,L,C){return i.index=E,i.matches_head=L,i.matches_pt1=C,i===s?(i=e,!1):(i=null,!0)}function A(E){S&&S.chainReverse(E),k[E].reverse()}function w(E,L){var C=k[E],P=k[L],D=C[C.length-1],G=C[C.length-2],I=P[0],H=P[1];t.pointsCollinear(G,D,I)&&(S&&S.chainRemoveTail(E,D),C.pop(),D=G),t.pointsCollinear(D,I,H)&&(S&&S.chainRemoveHead(L,I),P.shift()),S&&S.chainJoin(E,L),k[E]=C.concat(P),k.splice(L,1)}}),l}},55968:function(Q){function z(S,k,l){var T=[];return S.forEach(function(b){var d=(b.myFill.above?8:0)+(b.myFill.below?4:0)+(b.otherFill&&b.otherFill.above?2:0)+(b.otherFill&&b.otherFill.below?1:0);k[d]!==0&&T.push({id:l?l.segmentId():-1,start:b.start,end:b.end,myFill:{above:k[d]===1,below:k[d]===2},otherFill:null})}),l&&l.selected(T),T}var t={union:function(S,k){return z(S,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],k)},intersect:function(S,k){return z(S,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],k)},difference:function(S,k){return z(S,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],k)},differenceRev:function(S,k){return z(S,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],k)},xor:function(S,k){return z(S,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],k)}};Q.exports=t},14847:function(Q,z,t){var S=t(21630).Transform,k=t(90715);function l(){S.call(this,{readableObjectMode:!0})}function T(b,d,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=b,d&&(this.code=d),s&&(this.statusCode=s)}l.prototype=Object.create(S.prototype),l.prototype.constructor=l,k(l.prototype),z.OF=function(b,d,s){for(var e=d,i=0;i<s.length;)if(b[e++]!==s[i++])return!1;return!0},z.eG=function(b,d){var s=[],e=0;if(d&&d==="hex")for(;e<b.length;)s.push(parseInt(b.slice(e,e+2),16)),e+=2;else for(;e<b.length;e++)s.push(255&b.charCodeAt(e));return s},z.mP=function(b,d){return b[d]|b[d+1]<<8},z.n8=function(b,d){return b[d+1]|b[d]<<8},z.nm=function(b,d){return b[d]|b[d+1]<<8|b[d+2]<<16|16777216*b[d+3]},z.Ag=function(b,d){return b[d+3]|b[d+2]<<8|b[d+1]<<16|16777216*b[d]},T.prototype=Object.create(Error.prototype),T.prototype.constructor=T},71371:function(Q){function z(k,l){var T=new Error(k);return T.code=l,T}function t(k){try{return decodeURIComponent(escape(k))}catch{return k}}function S(k,l,T){this.input=k.subarray(l,T),this.start=l;var b=String.fromCharCode.apply(null,this.input.subarray(0,4));if(b!=="II*\0"&&b!=="MM\0*")throw z("invalid TIFF signature","EBADDATA");this.big_endian=b[0]==="M"}S.prototype.each=function(k){this.aborted=!1;var l=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:l}];this.ifds_to_read.length>0&&!this.aborted;){var T=this.ifds_to_read.shift();T.offset&&this.scan_ifd(T.id,T.offset,k)}},S.prototype.read_uint16=function(k){var l=this.input;if(k+2>l.length)throw z("unexpected EOF","EBADDATA");return this.big_endian?256*l[k]+l[k+1]:l[k]+256*l[k+1]},S.prototype.read_uint32=function(k){var l=this.input;if(k+4>l.length)throw z("unexpected EOF","EBADDATA");return this.big_endian?16777216*l[k]+65536*l[k+1]+256*l[k+2]+l[k+3]:l[k]+256*l[k+1]+65536*l[k+2]+16777216*l[k+3]},S.prototype.is_subifd_link=function(k,l){return k===0&&l===34665||k===0&&l===34853||k===34665&&l===40965},S.prototype.exif_format_length=function(k){switch(k){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},S.prototype.exif_format_read=function(k,l){var T;switch(k){case 1:case 2:return this.input[l];case 6:return(T=this.input[l])|33554430*(128&T);case 3:return this.read_uint16(l);case 8:return(T=this.read_uint16(l))|131070*(32768&T);case 4:return this.read_uint32(l);case 9:return 0|this.read_uint32(l);default:return null}},S.prototype.scan_ifd=function(k,l,T){var b=this.read_uint16(l);l+=2;for(var d=0;d<b;d++){var s=this.read_uint16(l),e=this.read_uint16(l+2),i=this.read_uint32(l+4),r=this.exif_format_length(e),n=i*r,a=n<=4?l+8:this.read_uint32(l+8),o=!1;if(a+n>this.input.length)throw z("unexpected EOF","EBADDATA");for(var u=[],p=a,c=0;c<i;c++,p+=r){var x=this.exif_format_read(e,p);if(x===null){u=null;break}u.push(x)}if(Array.isArray(u)&&e===2&&(u=t(String.fromCharCode.apply(null,u)))&&u[u.length-1]==="\0"&&(u=u.slice(0,-1)),this.is_subifd_link(k,s)&&Array.isArray(u)&&Number.isInteger(u[0])&&u[0]>0&&(this.ifds_to_read.push({id:s,offset:u[0]}),o=!0),T({is_big_endian:this.big_endian,ifd:k,tag:s,format:e,count:i,entry_offset:l+this.start,data_length:n,data_offset:a+this.start,value:u,is_subifd_link:o})===!1)return void(this.aborted=!0);l+=12}k===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(l)})},Q.exports.ExifParser=S,Q.exports.get_orientation=function(k){var l=0;try{return new S(k,0,k.length).each(function(T){if(T.ifd===0&&T.tag===274&&Array.isArray(T.value))return l=T.value[0],!1}),l}catch{return-1}}},76767:function(Q,z,t){var S=t(14847).n8,k=t(14847).Ag;function l(i,r){if(i.length<4+r)return null;var n=k(i,r);return i.length<n+r||n<8?null:{boxtype:String.fromCharCode.apply(null,i.slice(r+4,r+8)),data:i.slice(r+8,r+n),end:r+n}}function T(i,r){for(var n=0;;){var a=l(i,n);if(!a)break;switch(a.boxtype){case"ispe":r.sizes.push({width:k(a.data,4),height:k(a.data,8)});break;case"irot":r.transforms.push({type:"irot",value:3&a.data[0]});break;case"imir":r.transforms.push({type:"imir",value:1&a.data[0]})}n=a.end}}function b(i,r,n){for(var a=0,o=0;o<n;o++)a=256*a+(i[r+o]||0);return a}function d(i,r){for(var n=i[4]>>4&15,a=15&i[4],o=i[5]>>4&15,u=S(i,6),p=8,c=0;c<u;c++){var x=S(i,p),g=S(i,p+=2),f=b(i,p+=2,o),y=S(i,p+=o);if(p+=2,g===0&&y===1){var v=b(i,p,n),m=b(i,p+n,a);r.item_loc[x]={length:m,offset:v+f}}p+=y*(n+a)}}function s(i,r){for(var n=S(i,4),a=6,o=0;o<n;o++){var u=l(i,a);if(!u)break;if(u.boxtype==="infe"){for(var p=S(u.data,4),c="",x=8;x<u.data.length&&u.data[x];x++)c+=String.fromCharCode(u.data[x]);r.item_inf[c]=p}a=u.end}}function e(i,r){for(var n=0;;){var a=l(i,n);if(!a)break;a.boxtype==="ipco"&&T(a.data,r),n=a.end}}Q.exports.unbox=l,Q.exports.readSizeFromMeta=function(i){var r={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(x,g){for(var f=4;;){var y=l(x,f);if(!y)break;y.boxtype==="iprp"&&e(y.data,g),y.boxtype==="iloc"&&d(y.data,g),y.boxtype==="iinf"&&s(y.data,g),f=y.end}}(i,r),r.sizes.length){var n,a,o,u=(a=(n=r.sizes).reduce(function(x,g){return x.width>g.width||x.width===g.width&&x.height>g.height?x:g}),o=n.reduce(function(x,g){return x.height>g.height||x.height===g.height&&x.width>g.width?x:g}),a.width>o.height||a.width===o.height&&a.height>o.width?a:o),p=1;r.transforms.forEach(function(x){var g={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},f={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(x.type==="imir"&&(p=x.value===0?f[p]:g[p=g[p=f[p]]]),x.type==="irot")for(var y=0;y<x.value;y++)p=g[p]});var c=null;return r.item_inf.Exif&&(c=r.item_loc[r.item_inf.Exif]),{width:u.width,height:u.height,orientation:r.transforms.length?p:null,variants:r.sizes,exif_location:c}}},Q.exports.getMimeType=function(i){var r=String.fromCharCode.apply(null,i.slice(0,4)),n={};n[r]=!0;for(var a=8;a<i.length;a+=4)n[String.fromCharCode.apply(null,i.slice(a,a+4))]=!0;if(n.mif1||n.msf1||n.miaf)return r==="avif"||r==="avis"||r==="avio"?{type:"avif",mime:"image/avif"}:r==="heic"||r==="heix"?{type:"heic",mime:"image/heic"}:r==="hevc"||r==="hevx"?{type:"heic",mime:"image/heic-sequence"}:n.avif||n.avis?{type:"avif",mime:"image/avif"}:n.heic||n.heix||n.hevc||n.hevx||n.heis?n.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},24461:function(Q,z,t){var S=t(14847).eG,k=t(14847).OF,l=t(14847).Ag,T=t(76767),b=t(71371),d=S("ftyp");Q.exports=function(s){if(k(s,4,d)){var e=T.unbox(s,0);if(e){var i=T.getMimeType(e.data);if(i){for(var r,n=e.end;;){var a=T.unbox(s,n);if(!a)break;if(n=a.end,a.boxtype==="mdat")return;if(a.boxtype==="meta"){r=a.data;break}}if(r){var o=T.readSizeFromMeta(r);if(o){var u={width:o.width,height:o.height,type:i.type,mime:i.mime,wUnits:"px",hUnits:"px"};if(o.variants.length>1&&(u.variants=o.variants),o.orientation&&(u.orientation=o.orientation),o.exif_location&&o.exif_location.offset+o.exif_location.length<=s.length){var p=l(s,o.exif_location.offset),c=s.slice(o.exif_location.offset+p+4,o.exif_location.offset+o.exif_location.length),x=b.get_orientation(c);x>0&&(u.orientation=x)}return u}}}}}}},2504:function(Q,z,t){var S=t(14847).eG,k=t(14847).OF,l=t(14847).mP,T=S("BM");Q.exports=function(b){if(!(b.length<26)&&k(b,0,T))return{width:l(b,18),height:l(b,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},47342:function(Q,z,t){var S=t(14847).eG,k=t(14847).OF,l=t(14847).mP,T=S("GIF87a"),b=S("GIF89a");Q.exports=function(d){if(!(d.length<10)&&(k(d,0,T)||k(d,0,b)))return{width:l(d,6),height:l(d,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},31355:function(Q,z,t){var S=t(14847).mP;Q.exports=function(k){var l=S(k,0),T=S(k,2),b=S(k,4);if(l===0&&T===1&&b){for(var d=[],s={width:0,height:0},e=0;e<b;e++){var i=k[6+16*e]||256,r=k[6+16*e+1]||256,n={width:i,height:r};d.push(n),(i>s.width||r>s.height)&&(s=n)}return{width:s.width,height:s.height,variants:d,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},54261:function(Q,z,t){var S=t(14847).n8,k=t(14847).eG,l=t(14847).OF,T=t(71371),b=k("Exif\0\0");Q.exports=function(d){if(!(d.length<2)&&d[0]===255&&d[1]===216&&d[2]===255)for(var s=2;;){for(;;){if(d.length-s<2)return;if(d[s++]===255)break}for(var e,i,r=d[s++];r===255;)r=d[s++];if(208<=r&&r<=217||r===1)e=0;else{if(!(192<=r&&r<=254)||d.length-s<2)return;e=S(d,s)-2,s+=2}if(r===217||r===218)return;if(r===225&&e>=10&&l(d,s,b)&&(i=T.get_orientation(d.slice(s+6,s+e))),e>=5&&192<=r&&r<=207&&r!==196&&r!==200&&r!==204){if(d.length-s<e)return;var n={width:S(d,s+3),height:S(d,s+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return i>0&&(n.orientation=i),n}s+=e}}},6303:function(Q,z,t){var S=t(14847).eG,k=t(14847).OF,l=t(14847).Ag,T=S(`PNG\r

`),b=S("IHDR");Q.exports=function(d){if(!(d.length<24)&&k(d,0,T)&&k(d,12,b))return{width:l(d,16),height:l(d,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},38689:function(Q,z,t){var S=t(14847).eG,k=t(14847).OF,l=t(14847).Ag,T=S("8BPS\0");Q.exports=function(b){if(!(b.length<22)&&k(b,0,T))return{width:l(b,18),height:l(b,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},6881:function(Q){function z(s){return typeof s=="number"&&isFinite(s)&&s>0}var t=/<[-_.:a-zA-Z0-9][^>]*>/,S=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,k=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,l=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,T=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,b=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function d(s){return b.test(s)?s.match(b)[0]:"px"}Q.exports=function(s){if(function(f){var y,v=0,m=f.length;for(f[0]===239&&f[1]===187&&f[2]===191&&(v=3);v<m&&((y=f[v])===32||y===9||y===13||y===10);)v++;return v!==m&&f[v]===60}(s)){for(var e="",i=0;i<s.length;i++)e+=String.fromCharCode(s[i]);var r=(e.match(t)||[""])[0];if(S.test(r)){var n=function(f){var y=f.match(k),v=f.match(l),m=f.match(T);return{width:y&&(y[1]||y[2]),height:v&&(v[1]||v[2]),viewbox:m&&(m[1]||m[2])}}(r),a=parseFloat(n.width),o=parseFloat(n.height);if(n.width&&n.height)return!z(a)||!z(o)?void 0:{width:a,height:o,type:"svg",mime:"image/svg+xml",wUnits:d(n.width),hUnits:d(n.height)};var u=(n.viewbox||"").split(" "),p={width:u[2],height:u[3]},c=parseFloat(p.width),x=parseFloat(p.height);if(z(c)&&z(x)&&d(p.width)===d(p.height)){var g=c/x;return n.width?z(a)?{width:a,height:a/g,type:"svg",mime:"image/svg+xml",wUnits:d(n.width),hUnits:d(n.width)}:void 0:n.height?z(o)?{width:o*g,height:o,type:"svg",mime:"image/svg+xml",wUnits:d(n.height),hUnits:d(n.height)}:void 0:{width:c,height:x,type:"svg",mime:"image/svg+xml",wUnits:d(p.width),hUnits:d(p.height)}}}}}},66278:function(Q,z,t){var S=t(14847).eG,k=t(14847).OF,l=t(14847).mP,T=t(14847).n8,b=t(14847).nm,d=t(14847).Ag,s=S("II*\0"),e=S("MM\0*");function i(a,o,u){return u?T(a,o):l(a,o)}function r(a,o,u){return u?d(a,o):b(a,o)}function n(a,o,u){var p=i(a,o+2,u);return r(a,o+4,u)!==1||p!==3&&p!==4?null:p===3?i(a,o+8,u):r(a,o+8,u)}Q.exports=function(a){if(!(a.length<8)&&(k(a,0,s)||k(a,0,e))){var o=a[0]===77,u=r(a,4,o)-8;if(!(u<0)){var p=u+8;if(!(a.length-p<2)){var c=12*i(a,p+0,o);if(!(c<=0||(p+=2,a.length-p<c))){var x,g,f,y;for(x=0;x<c;x+=12)(y=i(a,p+x,o))===256?g=n(a,p+x,o):y===257&&(f=n(a,p+x,o));return g&&f?{width:g,height:f,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},90784:function(Q,z,t){var S=t(14847).eG,k=t(14847).OF,l=t(14847).mP,T=t(14847).nm,b=t(71371),d=S("RIFF"),s=S("WEBP");function e(n,a){if(n[a+3]===157&&n[a+4]===1&&n[a+5]===42)return{width:16383&l(n,a+6),height:16383&l(n,a+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function i(n,a){if(n[a]===47){var o=T(n,a+1);return{width:1+(16383&o),height:1+(o>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function r(n,a){return{width:1+(n[a+6]<<16|n[a+5]<<8|n[a+4]),height:1+(n[a+9]<<a|n[a+8]<<8|n[a+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}Q.exports=function(n){if(!(n.length<16)&&(k(n,0,d)||k(n,8,s))){var a=12,o=null,u=0,p=T(n,4)+8;if(!(p>n.length)){for(;a+8<p;)if(n[a]!==0){var c=String.fromCharCode.apply(null,n.slice(a,a+4)),x=T(n,a+4);c==="VP8 "&&x>=10?o=o||e(n,a+8):c==="VP8L"&&x>=9?o=o||i(n,a+8):c==="VP8X"&&x>=10?o=o||r(n,a+8):c==="EXIF"&&(u=b.get_orientation(n.slice(a+8,a+8+x)),a=1/0),a+=8+x}else a++;if(o)return u>0&&(o.orientation=u),o}}}},91497:function(Q,z,t){Q.exports={avif:t(24461),bmp:t(2504),gif:t(47342),ico:t(31355),jpeg:t(54261),png:t(6303),psd:t(38689),svg:t(6881),tiff:t(66278),webp:t(90784)}},33575:function(Q,z,t){var S=t(91497);Q.exports=function(k){return function(l){for(var T=Object.keys(S),b=0;b<T.length;b++){var d=S[T[b]](l);if(d)return d}return null}(k)},Q.exports.parsers=S},90386:function(Q){var z,t,S=Q.exports={};function k(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function T(o){if(z===setTimeout)return setTimeout(o,0);if((z===k||!z)&&setTimeout)return z=setTimeout,setTimeout(o,0);try{return z(o,0)}catch{try{return z.call(null,o,0)}catch{return z.call(this,o,0)}}}(function(){try{z=typeof setTimeout=="function"?setTimeout:k}catch{z=k}try{t=typeof clearTimeout=="function"?clearTimeout:l}catch{t=l}})();var b,d=[],s=!1,e=-1;function i(){s&&b&&(s=!1,b.length?d=b.concat(d):e=-1,d.length&&r())}function r(){if(!s){var o=T(i);s=!0;for(var u=d.length;u;){for(b=d,d=[];++e<u;)b&&b[e].run();e=-1,u=d.length}b=null,s=!1,function(p){if(t===clearTimeout)return clearTimeout(p);if((t===l||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(p);try{return t(p)}catch{try{return t.call(null,p)}catch{return t.call(this,p)}}}(o)}}function n(o,u){this.fun=o,this.array=u}function a(){}S.nextTick=function(o){var u=new Array(arguments.length-1);if(arguments.length>1)for(var p=1;p<arguments.length;p++)u[p-1]=arguments[p];d.push(new n(o,u)),d.length!==1||s||T(r)},n.prototype.run=function(){this.fun.apply(null,this.array)},S.title="browser",S.browser=!0,S.env={},S.argv=[],S.version="",S.versions={},S.on=a,S.addListener=a,S.once=a,S.off=a,S.removeListener=a,S.removeAllListeners=a,S.emit=a,S.prependListener=a,S.prependOnceListener=a,S.listeners=function(o){return[]},S.binding=function(o){throw new Error("process.binding is not supported")},S.cwd=function(){return"/"},S.chdir=function(o){throw new Error("process.chdir is not supported")},S.umask=function(){return 0}},5877:function(Q,z,t){for(var S=t(9748),k=typeof window>"u"?t.g:window,l=["moz","webkit"],T="AnimationFrame",b=k["request"+T],d=k["cancel"+T]||k["cancelRequest"+T],s=0;!b&&s<l.length;s++)b=k[l[s]+"Request"+T],d=k[l[s]+"Cancel"+T]||k[l[s]+"CancelRequest"+T];if(!b||!d){var e=0,i=0,r=[];b=function(n){if(r.length===0){var a=S(),o=Math.max(0,16.666666666666668-(a-e));e=o+a,setTimeout(function(){var u=r.slice(0);r.length=0;for(var p=0;p<u.length;p++)if(!u[p].cancelled)try{u[p].callback(e)}catch(c){setTimeout(function(){throw c},0)}},Math.round(o))}return r.push({handle:++i,callback:n,cancelled:!1}),i},d=function(n){for(var a=0;a<r.length;a++)r[a].handle===n&&(r[a].cancelled=!0)}}Q.exports=function(n){return b.call(k,n)},Q.exports.cancel=function(){d.apply(k,arguments)},Q.exports.polyfill=function(n){n||(n=k),n.requestAnimationFrame=b,n.cancelAnimationFrame=d}},3593:function(Q,z,t){var S=t(21527),k=t(25075),l=t(93447),T=t(71299),b=t(56131),d=t(30120),s=t(57060),e=s.float32,i=s.fract32;Q.exports=function(n,a){if(typeof n=="function"?(a||(a={}),a.regl=n):a=n,a.length&&(a.positions=a),!(n=a.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var o,u,p,c,x,g,f=n._gl,y={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},v=[];return c=n.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),u=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),p=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),x=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),g=n.buffer({usage:"static",type:"float",data:r}),A(a),o=n({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:n.prop("range"),lineWidth:n.prop("lineWidth"),capSize:n.prop("capSize"),opacity:n.prop("opacity"),scale:n.prop("scale"),translate:n.prop("translate"),scaleFract:n.prop("scaleFract"),translateFract:n.prop("translateFract"),viewport:function(E,L){return[L.viewport.x,L.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:c,offset:function(E,L){return 4*L.offset},divisor:1},position:{buffer:u,offset:function(E,L){return 8*L.offset},divisor:1},positionFract:{buffer:p,offset:function(E,L){return 8*L.offset},divisor:1},error:{buffer:x,offset:function(E,L){return 16*L.offset},divisor:1},direction:{buffer:g,stride:24,offset:0},lineOffset:{buffer:g,stride:24,offset:8},capOffset:{buffer:g,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:n.prop("viewport")},viewport:n.prop("viewport"),stencil:!1,instances:n.prop("count"),count:r.length}),b(m,{update:A,draw:_,destroy:w,regl:n,gl:f,canvas:f.canvas,groups:v}),m;function m(E){E?A(E):E===null&&w(),_()}function _(E){if(typeof E=="number")return h(E);E&&!Array.isArray(E)&&(E=[E]),n._refresh(),v.forEach(function(L,C){L&&(E&&(E[C]?L.draw=!0:L.draw=!1),L.draw?h(C):L.draw=!0)})}function h(E){typeof E=="number"&&(E=v[E]),E!=null&&E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1&&(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],o(E),E.after&&E.after(E))}function A(E){if(E){E.length!=null?typeof E[0]=="number"&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var L=0,C=0;if(m.groups=v=E.map(function(F,V){var q=v[V];return F&&(typeof F=="function"?F={after:F}:typeof F[0]=="number"&&(F={positions:F}),F=T(F,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),q||(v[V]=q={id:V,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},F=b({},y,F)),l(q,F,[{lineWidth:function(te){return .5*+te},capSize:function(te){return .5*+te},opacity:parseFloat,errors:function(te){return te=d(te),C+=te.length,te},positions:function(te,$){return te=d(te,"float64"),$.count=Math.floor(te.length/2),$.bounds=S(te,2),$.offset=L,L+=$.count,te}},{color:function(te,$){var W=$.count;if(te||(te="transparent"),!Array.isArray(te)||typeof te[0]=="number"){var Z=te;te=Array(W);for(var J=0;J<W;J++)te[J]=Z}if(te.length<W)throw Error("Not enough colors");for(var ee=new Uint8Array(4*W),re=0;re<W;re++){var ae=k(te[re],"uint8");ee.set(ae,4*re)}return ee},range:function(te,$,W){var Z=$.bounds;return te||(te=Z),$.scale=[1/(te[2]-te[0]),1/(te[3]-te[1])],$.translate=[-te[0],-te[1]],$.scaleFract=i($.scale),$.translateFract=i($.translate),te},viewport:function(te){var $;return Array.isArray(te)?$={x:te[0],y:te[1],width:te[2]-te[0],height:te[3]-te[1]}:te?($={x:te.x||te.left||0,y:te.y||te.top||0},te.right?$.width=te.right-$.x:$.width=te.w||te.width||0,te.bottom?$.height=te.bottom-$.y:$.height=te.h||te.height||0):$={x:0,y:0,width:f.drawingBufferWidth,height:f.drawingBufferHeight},$}}])),q}),L||C){var P=v.reduce(function(F,V,q){return F+(V?V.count:0)},0),D=new Float64Array(2*P),G=new Uint8Array(4*P),I=new Float32Array(4*P);v.forEach(function(F,V){if(F){var q=F.positions,te=F.count,$=F.offset,W=F.color,Z=F.errors;te&&(G.set(W,4*$),I.set(Z,4*$),D.set(q,2*$))}});var H=e(D);u(H);var N=i(D,H);p(N),c(G),x(I)}}}function w(){u.destroy(),p.destroy(),c.destroy(),x.destroy(),g.destroy()}};var r=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},46075:function(Q,z,t){var S=t(25075),k=t(21527),l=t(56131),T=t(56068),b=t(71299),d=t(30120),s=t(11474),e=t(54),i=t(57060),r=i.float32,n=i.fract32,a=t(83522),o=t(18863),u=t(6851);function p(c,x){if(!(this instanceof p))return new p(c,x);if(typeof c=="function"?(x||(x={}),x.regl=c):x=c,x.length&&(x.positions=x),!(c=x.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=c._gl,this.regl=c,this.passes=[],this.shaders=p.shaders.has(c)?p.shaders.get(c):p.shaders.set(c,p.createShaders(c)).get(c),this.update(x)}Q.exports=p,p.dashMult=2,p.maxPatternLength=256,p.precisionThreshold=3e6,p.maxPoints=1e4,p.maxLines=2048,p.shaders=new a,p.createShaders=function(c){var x,g=c.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),f={primitive:"triangle strip",instances:c.prop("count"),count:4,offset:0,uniforms:{miterMode:function(v,m){return m.join==="round"?2:1},miterLimit:c.prop("miterLimit"),scale:c.prop("scale"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),translate:c.prop("translate"),thickness:c.prop("thickness"),dashTexture:c.prop("dashTexture"),opacity:c.prop("opacity"),pixelRatio:c.context("pixelRatio"),id:c.prop("id"),dashLength:c.prop("dashLength"),viewport:function(v,m){return[m.viewport.x,m.viewport.y,v.viewportWidth,v.viewportHeight]},depth:c.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(v,m){return!m.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:c.prop("viewport")},viewport:c.prop("viewport")},y=c(l({vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:g,divisor:0,stride:8,offset:0},lineTop:{buffer:g,divisor:0,stride:8,offset:4},aCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:c.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},f));try{x=c(l({cull:{enable:!0,face:"back"},vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:g,divisor:0,stride:8,offset:0},lineTop:{buffer:g,divisor:0,stride:8,offset:4},aColor:{buffer:c.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:c.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},f))}catch{x=y}return{fill:c({primitive:"triangle",elements:function(v,m){return m.triangles},offset:0,vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:c.prop("scale"),color:c.prop("fill"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),translate:c.prop("translate"),opacity:c.prop("opacity"),pixelRatio:c.context("pixelRatio"),id:c.prop("id"),viewport:function(v,m){return[m.viewport.x,m.viewport.y,v.viewportWidth,v.viewportHeight]}},attributes:{position:{buffer:c.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:8}},blend:f.blend,depth:{enable:!1},scissor:f.scissor,stencil:f.stencil,viewport:f.viewport}),rect:y,miter:x}},p.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},p.prototype.render=function(){for(var c,x=[],g=arguments.length;g--;)x[g]=arguments[g];x.length&&(c=this).update.apply(c,x),this.draw()},p.prototype.draw=function(){for(var c=this,x=[],g=arguments.length;g--;)x[g]=arguments[g];return(x.length?x:this.passes).forEach(function(f,y){var v;if(f&&Array.isArray(f))return(v=c).draw.apply(v,f);typeof f=="number"&&(f=c.passes[f]),f&&f.count>1&&f.opacity&&(c.regl._refresh(),f.fill&&f.triangles&&f.triangles.length>2&&c.shaders.fill(f),f.thickness&&(f.scale[0]*f.viewport.width>p.precisionThreshold||f.scale[1]*f.viewport.height>p.precisionThreshold||f.join==="rect"||!f.join&&(f.thickness<=2||f.count>=p.maxPoints)?c.shaders.rect(f):c.shaders.miter(f)))}),this},p.prototype.update=function(c){var x=this;if(c){c.length!=null?typeof c[0]=="number"&&(c=[{positions:c}]):Array.isArray(c)||(c=[c]);var g=this.regl,f=this.gl;if(c.forEach(function(h,A){var w=x.passes[A];if(h!==void 0)if(h!==null){if(typeof h[0]=="number"&&(h={positions:h}),h=b(h,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),w||(x.passes[A]=w={id:A,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:g.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:g.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:g.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:g.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},h=l({},p.defaults,h)),h.thickness!=null&&(w.thickness=parseFloat(h.thickness)),h.opacity!=null&&(w.opacity=parseFloat(h.opacity)),h.miterLimit!=null&&(w.miterLimit=parseFloat(h.miterLimit)),h.overlay!=null&&(w.overlay=!!h.overlay,A<p.maxLines&&(w.depth=2*(p.maxLines-1-A%p.maxLines)/p.maxLines-1)),h.join!=null&&(w.join=h.join),h.hole!=null&&(w.hole=h.hole),h.fill!=null&&(w.fill=h.fill?S(h.fill,"uint8"):null),h.viewport!=null&&(w.viewport=o(h.viewport)),w.viewport||(w.viewport=o([f.drawingBufferWidth,f.drawingBufferHeight])),h.close!=null&&(w.close=h.close),h.positions===null&&(h.positions=[]),h.positions){var E,L;if(h.positions.x&&h.positions.y){var C=h.positions.x,P=h.positions.y;L=w.count=Math.max(C.length,P.length),E=new Float64Array(2*L);for(var D=0;D<L;D++)E[2*D]=C[D],E[2*D+1]=P[D]}else E=d(h.positions,"float64"),L=w.count=Math.floor(E.length/2);var G=w.bounds=k(E,2);if(w.fill){for(var I=[],H={},N=0,F=0,V=0,q=w.count;F<q;F++){var te=E[2*F],$=E[2*F+1];isNaN(te)||isNaN($)||te==null||$==null?(te=E[2*N],$=E[2*N+1],H[F]=N):N=F,I[V++]=te,I[V++]=$}if(h.splitNull){w.count-1 in H||(H[w.count]=w.count-1);var W=Object.keys(H).map(Number).sort(function(at,rt){return at-rt}),Z=[],J=0,ee=w.hole!=null?w.hole[0]:null;if(ee!=null){var re=u(W,function(at){return at>=ee});(W=W.slice(0,re)).push(ee)}for(var ae=function(at){var rt=I.slice(2*J,2*W[at]).concat(ee?I.slice(2*ee):[]),xt=(w.hole||[]).map(function(wt){return wt-ee+(W[at]-J)}),Tt=s(rt,xt);Tt=Tt.map(function(wt){return wt+J+(wt+J<W[at]?0:ee-W[at])}),Z.push.apply(Z,Tt),J=W[at]+1},oe=0;oe<W.length;oe++)ae(oe);for(var ce=0,pe=Z.length;ce<pe;ce++)H[Z[ce]]!=null&&(Z[ce]=H[Z[ce]]);w.triangles=Z}else{for(var ve=s(I,w.hole||[]),we=0,xe=ve.length;we<xe;we++)H[ve[we]]!=null&&(ve[we]=H[ve[we]]);w.triangles=ve}}var ge=new Float64Array(E);e(ge,2,G);var Oe=new Float64Array(2*L+6);w.close?E[0]===E[2*L-2]&&E[1]===E[2*L-1]?(Oe[0]=ge[2*L-4],Oe[1]=ge[2*L-3]):(Oe[0]=ge[2*L-2],Oe[1]=ge[2*L-1]):(Oe[0]=ge[0],Oe[1]=ge[1]),Oe.set(ge,2),w.close?E[0]===E[2*L-2]&&E[1]===E[2*L-1]?(Oe[2*L+2]=ge[2],Oe[2*L+3]=ge[3],w.count-=1):(Oe[2*L+2]=ge[0],Oe[2*L+3]=ge[1],Oe[2*L+4]=ge[2],Oe[2*L+5]=ge[3]):(Oe[2*L+2]=ge[2*L-2],Oe[2*L+3]=ge[2*L-1],Oe[2*L+4]=ge[2*L-2],Oe[2*L+5]=ge[2*L-1]);var Ae=r(Oe);w.positionBuffer(Ae);var Te=n(Oe,Ae);w.positionFractBuffer(Te)}if(h.range?w.range=h.range:w.range||(w.range=w.bounds),(h.range||h.positions)&&w.count){var se=w.bounds,le=se[2]-se[0],ne=se[3]-se[1],me=w.range[2]-w.range[0],Ee=w.range[3]-w.range[1];w.scale=[le/me,ne/Ee],w.translate=[-w.range[0]/me+se[0]/me||0,-w.range[1]/Ee+se[1]/Ee||0],w.scaleFract=n(w.scale),w.translateFract=n(w.translate)}if(h.dashes){var be,De=0;if(!h.dashes||h.dashes.length<2)De=1,be=new Uint8Array([255,255,255,255,255,255,255,255]);else{De=0;for(var Ue=0;Ue<h.dashes.length;++Ue)De+=h.dashes[Ue];be=new Uint8Array(De*p.dashMult);for(var he=0,ke=255,_e=0;_e<2;_e++)for(var Ce=0;Ce<h.dashes.length;++Ce){for(var Fe=0,Re=h.dashes[Ce]*p.dashMult*.5;Fe<Re;++Fe)be[he++]=ke;ke^=255}}w.dashLength=De,w.dashTexture({channels:1,data:be,width:be.length,height:1,mag:"linear",min:"linear"},0,0)}if(h.color){var He=w.count,Ge=h.color;Ge||(Ge="transparent");var $e=new Uint8Array(4*He+4);if(Array.isArray(Ge)&&typeof Ge[0]!="number"){for(var st=0;st<He;st++){var Ke=S(Ge[st],"uint8");$e.set(Ke,4*st)}$e.set(S(Ge[0],"uint8"),4*He)}else for(var gt=S(Ge,"uint8"),mt=0;mt<He+1;mt++)$e.set(gt,4*mt);w.colorBuffer({usage:"dynamic",type:"uint8",data:$e})}}else x.passes[A]=null}),c.length<this.passes.length){for(var y=c.length;y<this.passes.length;y++){var v=this.passes[y];v&&(v.colorBuffer.destroy(),v.positionBuffer.destroy(),v.dashTexture.destroy())}this.passes.length=c.length}for(var m=[],_=0;_<this.passes.length;_++)this.passes[_]!==null&&m.push(this.passes[_]);return this.passes=m,this}},p.prototype.destroy=function(){return this.passes.forEach(function(c){c.colorBuffer.destroy(),c.positionBuffer.destroy(),c.dashTexture.destroy()}),this.passes.length=0,this}},11870:function(Q,z,t){function S(f,y){return function(v){if(Array.isArray(v))return v}(f)||function(v,m){var _=v==null?null:typeof Symbol<"u"&&v[Symbol.iterator]||v["@@iterator"];if(_!=null){var h,A,w=[],E=!0,L=!1;try{for(_=_.call(v);!(E=(h=_.next()).done)&&(w.push(h.value),!m||w.length!==m);E=!0);}catch(C){L=!0,A=C}finally{try{E||_.return==null||_.return()}finally{if(L)throw A}}return w}}(f,y)||k(f,y)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function k(f,y){if(f){if(typeof f=="string")return l(f,y);var v=Object.prototype.toString.call(f).slice(8,-1);return v==="Object"&&f.constructor&&(v=f.constructor.name),v==="Map"||v==="Set"?Array.from(f):v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v)?l(f,y):void 0}}function l(f,y){(y==null||y>f.length)&&(y=f.length);for(var v=0,m=new Array(y);v<y;v++)m[v]=f[v];return m}var T=t(25075),b=t(21527),d=t(6475),s=t(88294),e=t(56131),i=t(56068),r=t(71299),n=t(93447),a=t(30120),o=t(62683),u=t(57060),p=t(18863),c=x;function x(f,y){var v=this;if(!(this instanceof x))return new x(f,y);typeof f=="function"?(y||(y={}),y.regl=f):(y=f,f=null),y&&y.length&&(y.positions=y);var m,_=(f=y.regl)._gl,h=[];this.tooManyColors=o,m=f.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),e(this,{regl:f,gl:_,groups:[],markerCache:[null],markerTextures:[null],palette:h,paletteIds:{},paletteTexture:m,maxColors:255,maxSize:100,canvas:_.canvas}),this.update(y);var A={uniforms:{constPointSize:!!y.constPointSize,opacity:f.prop("opacity"),paletteSize:function(L,C){return[v.tooManyColors?0:255,m.height]},pixelRatio:f.context("pixelRatio"),scale:f.prop("scale"),scaleFract:f.prop("scaleFract"),translate:f.prop("translate"),translateFract:f.prop("translateFract"),markerTexture:f.prop("markerTexture"),paletteTexture:m},attributes:{x:function(L,C){return C.xAttr||{buffer:C.positionBuffer,stride:8,offset:0}},y:function(L,C){return C.yAttr||{buffer:C.positionBuffer,stride:8,offset:4}},xFract:function(L,C){return C.xAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:0}},yFract:function(L,C){return C.yAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:4}},size:function(L,C){return C.size.length?{buffer:C.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*C.size/v.maxSize)]}},borderSize:function(L,C){return C.borderSize.length?{buffer:C.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*C.borderSize/v.maxSize)]}},colorId:function(L,C){return C.color.length?{buffer:C.colorBuffer,stride:v.tooManyColors?8:4,offset:0}:{constant:v.tooManyColors?h.slice(4*C.color,4*C.color+4):[C.color]}},borderColorId:function(L,C){return C.borderColor.length?{buffer:C.colorBuffer,stride:v.tooManyColors?8:4,offset:v.tooManyColors?4:2}:{constant:v.tooManyColors?h.slice(4*C.borderColor,4*C.borderColor+4):[C.borderColor]}},isActive:function(L,C){return C.activation===!0?{constant:[1]}:C.activation?C.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:f.prop("viewport")},viewport:f.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:f.prop("elements"),count:f.prop("count"),offset:f.prop("offset"),primitive:"points"},w=e({},A);w.frag=i([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),w.vert=i([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=f(w);var E=e({},A);E.frag=i([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),E.vert=i([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),o&&(E.frag=E.frag.replace("smoothstep","smoothStep"),w.frag=w.frag.replace("smoothstep","smoothStep")),this.drawCircle=f(E)}x.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},x.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},x.prototype.draw=function(){for(var f=this,y=arguments.length,v=new Array(y),m=0;m<y;m++)v[m]=arguments[m];var _=this.groups;if(v.length===1&&Array.isArray(v[0])&&(v[0][0]===null||Array.isArray(v[0][0]))&&(v=v[0]),this.regl._refresh(),v.length)for(var h=0;h<v.length;h++)this.drawItem(h,v[h]);else _.forEach(function(A,w){f.drawItem(w)});return this},x.prototype.drawItem=function(f,y){var v,m=this.groups,_=m[f];if(typeof y=="number"&&(f=y,_=m[y],y=null),_&&_.count&&_.opacity){_.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,_,y));for(var h=[],A=1;A<_.activation.length;A++)_.activation[A]&&(_.activation[A]===!0||_.activation[A].data.length)&&h.push.apply(h,function(w){if(Array.isArray(w))return l(w)}(v=this.getMarkerDrawOptions(A,_,y))||function(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}(v)||k(v)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}());h.length&&this.drawMarker(h)}},x.prototype.getMarkerDrawOptions=function(f,y,v){var m=y.range,_=y.tree,h=y.viewport,A=y.activation,w=y.selectionBuffer,E=y.count;if(this.regl,!_)return v?[e({},y,{markerTexture:this.markerTextures[f],activation:A[f],count:v.length,elements:v,offset:0})]:[e({},y,{markerTexture:this.markerTextures[f],activation:A[f],offset:0})];var L=[],C=_.range(m,{lod:!0,px:[(m[2]-m[0])/h.width,(m[3]-m[1])/h.height]});if(v){for(var P=A[f].data,D=new Uint8Array(E),G=0;G<v.length;G++){var I=v[G];D[I]=P?P[I]:1}w.subdata(D)}for(var H=C.length;H--;){var N=S(C[H],2),F=N[0],V=N[1];L.push(e({},y,{markerTexture:this.markerTextures[f],activation:v?w:A[f],offset:F,count:V-F}))}return L},x.prototype.update=function(){for(var f=this,y=arguments.length,v=new Array(y),m=0;m<y;m++)v[m]=arguments[m];if(v.length){v.length===1&&Array.isArray(v[0])&&(v=v[0]);var _=this.groups,h=this.gl,A=this.regl,w=this.maxSize,E=this.maxColors,L=this.palette;this.groups=_=v.map(function(C,P){var D=_[P];if(C===void 0)return D;C===null?C={positions:null}:typeof C=="function"?C={ondraw:C}:typeof C[0]=="number"&&(C={positions:C}),(C=r(C,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions===null&&(C.positions=[]),C.tooManyColors!=null&&(f.tooManyColors=C.tooManyColors),D||(_[P]=D={id:P,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:A.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:A.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:A.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:A.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:A.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},C=e({},x.defaults,C)),C.positions&&!("marker"in C)&&(C.marker=D.marker,delete D.marker),C.marker&&!("positions"in C)&&(C.positions=D.positions,delete D.positions);var G=0,I=0;if(n(D,C,[{snap:!0,size:function(we,xe){return we==null&&(we=x.defaults.size),G+=we&&we.length?1:0,we},borderSize:function(we,xe){return we==null&&(we=x.defaults.borderSize),G+=we&&we.length?1:0,we},opacity:parseFloat,color:function(we,xe){return we==null&&(we=x.defaults.color),we=f.updateColor(we),I++,we},borderColor:function(we,xe){return we==null&&(we=x.defaults.borderColor),we=f.updateColor(we),I++,we},bounds:function(we,xe,ge){return"range"in ge||(ge.range=null),we},positions:function(we,xe,ge){var Oe=xe.snap,Ae=xe.positionBuffer,Te=xe.positionFractBuffer,se=xe.selectionBuffer;if(we.x||we.y)return we.x.length?xe.xAttr={buffer:A.buffer(we.x),offset:0,stride:4,count:we.x.length}:xe.xAttr={buffer:we.x.buffer,offset:4*we.x.offset||0,stride:4*(we.x.stride||1),count:we.x.count},we.y.length?xe.yAttr={buffer:A.buffer(we.y),offset:0,stride:4,count:we.y.length}:xe.yAttr={buffer:we.y.buffer,offset:4*we.y.offset||0,stride:4*(we.y.stride||1),count:we.y.count},xe.count=Math.max(xe.xAttr.count,xe.yAttr.count),we;we=a(we,"float64");var le=xe.count=Math.floor(we.length/2),ne=xe.bounds=le?b(we,2):null;if(ge.range||xe.range||(delete xe.range,ge.range=ne),ge.marker||xe.marker||(delete xe.marker,ge.marker=null),Oe&&(Oe===!0||le>Oe)?xe.tree=s(we,{bounds:ne}):Oe&&Oe.length&&(xe.tree=Oe),xe.tree){var me={primitive:"points",usage:"static",data:xe.tree,type:"uint32"};xe.elements?xe.elements(me):xe.elements=A.elements(me)}var Ee=u.float32(we);return Ae({data:Ee,usage:"dynamic"}),Te({data:u.fract32(we,Ee),usage:"dynamic"}),se({data:new Uint8Array(le),type:"uint8",usage:"stream"}),we}},{marker:function(we,xe,ge){var Oe=xe.activation;if(Oe.forEach(function(Ee){return Ee&&Ee.destroy&&Ee.destroy()}),Oe.length=0,we&&typeof we[0]!="number"){for(var Ae=[],Te=0,se=Math.min(we.length,xe.count);Te<se;Te++){var le=f.addMarker(we[Te]);Ae[le]||(Ae[le]=new Uint8Array(xe.count)),Ae[le][Te]=1}for(var ne=0;ne<Ae.length;ne++)if(Ae[ne]){var me={data:Ae[ne],type:"uint8",usage:"static"};Oe[ne]?Oe[ne](me):Oe[ne]=A.buffer(me),Oe[ne].data=Ae[ne]}}else Oe[f.addMarker(we)]=!0;return we},range:function(we,xe,ge){var Oe=xe.bounds;if(Oe)return we||(we=Oe),xe.scale=[1/(we[2]-we[0]),1/(we[3]-we[1])],xe.translate=[-we[0],-we[1]],xe.scaleFract=u.fract(xe.scale),xe.translateFract=u.fract(xe.translate),we},viewport:function(we){return p(we||[h.drawingBufferWidth,h.drawingBufferHeight])}}]),G){var H=D,N=H.count,F=H.size,V=H.borderSize,q=H.sizeBuffer,te=new Uint8Array(2*N);if(F.length||V.length)for(var $=0;$<N;$++)te[2*$]=Math.round(255*(F[$]==null?F:F[$])/w),te[2*$+1]=Math.round(255*(V[$]==null?V:V[$])/w);q({data:te,usage:"dynamic"})}if(I){var W,Z=D,J=Z.count,ee=Z.color,re=Z.borderColor,ae=Z.colorBuffer;if(f.tooManyColors){if(ee.length||re.length){W=new Uint8Array(8*J);for(var oe=0;oe<J;oe++){var ce=ee[oe];W[8*oe]=L[4*ce],W[8*oe+1]=L[4*ce+1],W[8*oe+2]=L[4*ce+2],W[8*oe+3]=L[4*ce+3];var pe=re[oe];W[8*oe+4]=L[4*pe],W[8*oe+5]=L[4*pe+1],W[8*oe+6]=L[4*pe+2],W[8*oe+7]=L[4*pe+3]}}}else if(ee.length||re.length){W=new Uint8Array(4*J+2);for(var ve=0;ve<J;ve++)ee[ve]!=null&&(W[4*ve]=ee[ve]%E,W[4*ve+1]=Math.floor(ee[ve]/E)),re[ve]!=null&&(W[4*ve+2]=re[ve]%E,W[4*ve+3]=Math.floor(re[ve]/E))}ae({data:W||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return D})}},x.prototype.addMarker=function(f){var y,v=this.markerTextures,m=this.regl,_=this.markerCache,h=f==null?0:_.indexOf(f);if(h>=0)return h;if(f instanceof Uint8Array||f instanceof Uint8ClampedArray)y=f;else{y=new Uint8Array(f.length);for(var A=0,w=f.length;A<w;A++)y[A]=255*f[A]}var E=Math.floor(Math.sqrt(y.length));return h=v.length,_.push(f),v.push(m.texture({channels:1,data:y,radius:E,mag:"linear",min:"linear"})),h},x.prototype.updateColor=function(f){var y=this.paletteIds,v=this.palette,m=this.maxColors;Array.isArray(f)||(f=[f]);var _=[];if(typeof f[0]=="number"){var h=[];if(Array.isArray(f))for(var A=0;A<f.length;A+=4)h.push(f.slice(A,A+4));else for(var w=0;w<f.length;w+=4)h.push(f.subarray(w,w+4));f=h}for(var E=0;E<f.length;E++){var L=f[E];L=T(L,"uint8");var C=d(L,!1);if(y[C]==null){var P=v.length;y[C]=Math.floor(P/4),v[P]=L[0],v[P+1]=L[1],v[P+2]=L[2],v[P+3]=L[3]}_[E]=y[C]}return!this.tooManyColors&&v.length>4*m&&(this.tooManyColors=!0),this.updatePalette(v),_.length===1?_[0]:_},x.prototype.updatePalette=function(f){if(!this.tooManyColors){var y=this.maxColors,v=this.paletteTexture,m=Math.ceil(.25*f.length/y);if(m>1)for(var _=.25*(f=f.slice()).length%y;_<m*y;_++)f.push(0,0,0,0);v.height<m&&v.resize(y,m),v.subimage({width:Math.min(.25*f.length,y),height:m,data:f},0,0)}},x.prototype.destroy=function(){return this.groups.forEach(function(f){f.sizeBuffer.destroy(),f.positionBuffer.destroy(),f.positionFractBuffer.destroy(),f.colorBuffer.destroy(),f.activation.forEach(function(y){return y&&y.destroy&&y.destroy()}),f.selectionBuffer.destroy(),f.elements&&f.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(f){return f&&f.destroy&&f.destroy()}),this};var g=t(56131);Q.exports=function(f,y){var v=new c(f,y),m=v.render.bind(v);return g(m,{render:m,update:v.update.bind(v),draw:v.draw.bind(v),destroy:v.destroy.bind(v),regl:v.regl,gl:v.gl,canvas:v.gl.canvas,groups:v.groups,markers:v.markerCache,palette:v.palette}),m}},60487:function(Q,z,t){var S=t(11870),k=t(71299),l=t(21527),T=t(5877),b=t(57471),d=t(18863),s=t(30120);function e(a,o){if(!(this instanceof e))return new e(a);this.traces=[],this.passes={},this.regl=a,this.scatter=S(a),this.canvas=this.scatter.canvas}function i(a,o,u){return(a.id!=null?a.id:a)<<16|(255&o)<<8|255&u}function r(a,o,u){var p,c,x,g,f=a[o],y=a[u];return f.length>2?(f[0],f[2],p=f[1],c=f[3]):f.length?(p=f[0],c=f[1]):(f.x,p=f.y,f.x,f.width,c=f.y+f.height),y.length>2?(x=y[0],g=y[2],y[1],y[3]):y.length?(x=y[0],g=y[1]):(x=y.x,y.y,g=y.x+y.width,y.y,y.height),[x,p,g,c]}function n(a){if(typeof a=="number")return[a,a,a,a];if(a.length===2)return[a[0],a[1],a[0],a[1]];var o=d(a);return[o.x,o.y,o.x+o.width,o.y+o.height]}Q.exports=e,e.prototype.render=function(){for(var a,o=this,u=[],p=arguments.length;p--;)u[p]=arguments[p];return u.length&&(a=this).update.apply(a,u),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=T(function(){o.draw(),o.dirty=!0,o.planned=null})):(this.draw(),this.dirty=!0,T(function(){o.dirty=!1})),this)},e.prototype.update=function(){for(var a,o=[],u=arguments.length;u--;)o[u]=arguments[u];if(o.length){for(var p=0;p<o.length;p++)this.updateItem(p,o[p]);this.traces=this.traces.filter(Boolean);for(var c=[],x=0,g=0;g<this.traces.length;g++){for(var f=this.traces[g],y=this.traces[g].passes,v=0;v<y.length;v++)c.push(this.passes[y[v]]);f.passOffset=x,x+=f.passes.length}return(a=this.scatter).update.apply(a,c),this}},e.prototype.updateItem=function(a,o){var u=this.regl;if(o===null)return this.traces[a]=null,this;if(!o)return this;var p,c=k(o,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),x=this.traces[a]||(this.traces[a]={id:a,buffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:d([u._gl.drawingBufferWidth,u._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(c.color!=null&&(x.color=c.color),c.size!=null&&(x.size=c.size),c.marker!=null&&(x.marker=c.marker),c.borderColor!=null&&(x.borderColor=c.borderColor),c.borderSize!=null&&(x.borderSize=c.borderSize),c.opacity!=null&&(x.opacity=c.opacity),c.viewport&&(x.viewport=d(c.viewport)),c.diagonal!=null&&(x.diagonal=c.diagonal),c.upper!=null&&(x.upper=c.upper),c.lower!=null&&(x.lower=c.lower),c.data){x.buffer(s(c.data)),x.columns=c.data.length,x.count=c.data[0].length,x.bounds=[];for(var g=0;g<x.columns;g++)x.bounds[g]=l(c.data[g],1)}c.range&&(x.range=c.range,p=x.range&&typeof x.range[0]!="number"),c.domain&&(x.domain=c.domain);var f=!1;c.padding!=null&&(Array.isArray(c.padding)&&c.padding.length===x.columns&&typeof c.padding[c.padding.length-1]=="number"?(x.padding=c.padding.map(n),f=!0):x.padding=n(c.padding));var y=x.columns,v=x.count,m=x.viewport.width,_=x.viewport.height,h=x.viewport.x,A=x.viewport.y,w=m/y,E=_/y;x.passes=[];for(var L=0;L<y;L++)for(var C=0;C<y;C++)if((x.diagonal||C!==L)&&(x.upper||!(L>C))&&(x.lower||!(L<C))){var P=i(x.id,L,C),D=this.passes[P]||(this.passes[P]={});if(c.data&&(c.transpose?D.positions={x:{buffer:x.buffer,offset:C,count:v,stride:y},y:{buffer:x.buffer,offset:L,count:v,stride:y}}:D.positions={x:{buffer:x.buffer,offset:C*v,count:v},y:{buffer:x.buffer,offset:L*v,count:v}},D.bounds=r(x.bounds,L,C)),c.domain||c.viewport||c.data){var G=f?r(x.padding,L,C):x.padding;if(x.domain){var I=r(x.domain,L,C),H=I[0],N=I[1],F=I[2],V=I[3];D.viewport=[h+H*m+G[0],A+N*_+G[1],h+F*m-G[2],A+V*_-G[3]]}else D.viewport=[h+C*w+w*G[0],A+L*E+E*G[1],h+(C+1)*w-w*G[2],A+(L+1)*E-E*G[3]]}c.color&&(D.color=x.color),c.size&&(D.size=x.size),c.marker&&(D.marker=x.marker),c.borderSize&&(D.borderSize=x.borderSize),c.borderColor&&(D.borderColor=x.borderColor),c.opacity&&(D.opacity=x.opacity),c.range&&(D.range=p?r(x.range,L,C):x.range||D.bounds),x.passes.push(P)}return this},e.prototype.draw=function(){for(var a,o=[],u=arguments.length;u--;)o[u]=arguments[u];if(o.length){for(var p=[],c=0;c<o.length;c++)if(typeof o[c]=="number"){var x=this.traces[o[c]],g=x.passes,f=x.passOffset;p.push.apply(p,b(f,f+g.length))}else if(o[c].length){var y=o[c],v=this.traces[c],m=v.passes,_=v.passOffset;m=m.map(function(h,A){p[_+A]=y})}(a=this.scatter).draw.apply(a,p)}else this.scatter.draw();return this},e.prototype.destroy=function(){return this.traces.forEach(function(a){a.buffer&&a.buffer.destroy&&a.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},98580:function(Q){Q.exports=function(){function z(Ve,We){this.id=re++,this.type=Ve,this.data=We}function t(Ve){if(Ve.length===0)return[];var We=Ve.charAt(0),nt=Ve.charAt(Ve.length-1);if(1<Ve.length&&We===nt&&(We==='"'||We==="'"))return['"'+Ve.substr(1,Ve.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(We=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ve))return t(Ve.substr(0,We.index)).concat(t(We[1])).concat(t(Ve.substr(We.index+We[0].length)));if((We=Ve.split(".")).length===1)return['"'+Ve.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Ve=[],nt=0;nt<We.length;++nt)Ve=Ve.concat(t(We[nt]));return Ve}function S(Ve){return"["+t(Ve).join("][")+"]"}function k(Ve){return typeof Ve=="string"?Ve.split():Ve}function l(Ve){return typeof Ve=="string"?document.querySelector(Ve):Ve}function T(Ve){var We,nt,ot,Ie,ze=Ve||{};Ve={};var et=[],tt=[],dt=typeof window>"u"?1:window.devicePixelRatio,pt=!1,vt={},ct=function(ut){},kt=function(){};if(typeof ze=="string"?We=document.querySelector(ze):typeof ze=="object"&&(typeof ze.nodeName=="string"&&typeof ze.appendChild=="function"&&typeof ze.getBoundingClientRect=="function"?We=ze:typeof ze.drawArrays=="function"||typeof ze.drawElements=="function"?ot=(Ie=ze).canvas:("gl"in ze?Ie=ze.gl:"canvas"in ze?ot=l(ze.canvas):"container"in ze&&(nt=l(ze.container)),"attributes"in ze&&(Ve=ze.attributes),"extensions"in ze&&(et=k(ze.extensions)),"optionalExtensions"in ze&&(tt=k(ze.optionalExtensions)),"onDone"in ze&&(ct=ze.onDone),"profile"in ze&&(pt=!!ze.profile),"pixelRatio"in ze&&(dt=+ze.pixelRatio),"cachedCode"in ze&&(vt=ze.cachedCode))),We&&(We.nodeName.toLowerCase()==="canvas"?ot=We:nt=We),!Ie){if(!ot){if(!(We=function(ut,ft,bt){function It(){var Jt=window.innerWidth,qt=window.innerHeight;ut!==document.body&&(Jt=(qt=Rt.getBoundingClientRect()).right-qt.left,qt=qt.bottom-qt.top),Rt.width=bt*Jt,Rt.height=bt*qt}var zt,Rt=document.createElement("canvas");return ee(Rt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),ut.appendChild(Rt),ut===document.body&&(Rt.style.position="absolute",ee(ut.style,{margin:0,padding:0})),ut!==document.body&&typeof ResizeObserver=="function"?(zt=new ResizeObserver(function(){setTimeout(It)})).observe(ut):window.addEventListener("resize",It,!1),It(),{canvas:Rt,onDestroy:function(){zt?zt.disconnect():window.removeEventListener("resize",It),ut.removeChild(Rt)}}}(nt||document.body,0,dt)))return null;ot=We.canvas,kt=We.onDestroy}Ve.premultipliedAlpha===void 0&&(Ve.premultipliedAlpha=!0),Ie=function(ut,ft){function bt(It){try{return ut.getContext(It,ft)}catch{return null}}return bt("webgl")||bt("experimental-webgl")||bt("webgl-experimental")}(ot,Ve)}return Ie?{gl:Ie,canvas:ot,container:nt,extensions:et,optionalExtensions:tt,pixelRatio:dt,profile:pt,cachedCode:vt,onDone:ct,onDestroy:kt}:(kt(),ct("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function b(Ve,We){for(var nt=Array(Ve),ot=0;ot<Ve;++ot)nt[ot]=We(ot);return nt}function d(Ve){var We,nt;return We=(65535<Ve)<<4,We|=nt=(255<(Ve>>>=We))<<3,(We|=nt=(15<(Ve>>>=nt))<<2)|(nt=(3<(Ve>>>=nt))<<1)|Ve>>>nt>>1}function s(){function Ve(ot){e:{for(var Ie=16;268435456>=Ie;Ie*=16)if(ot<=Ie){ot=Ie;break e}ot=0}return 0<(Ie=nt[d(ot)>>2]).length?Ie.pop():new ArrayBuffer(ot)}function We(ot){nt[d(ot.byteLength)>>2].push(ot)}var nt=b(8,function(){return[]});return{alloc:Ve,free:We,allocType:function(ot,Ie){var ze=null;switch(ot){case 5120:ze=new Int8Array(Ve(Ie),0,Ie);break;case 5121:ze=new Uint8Array(Ve(Ie),0,Ie);break;case 5122:ze=new Int16Array(Ve(2*Ie),0,Ie);break;case 5123:ze=new Uint16Array(Ve(2*Ie),0,Ie);break;case 5124:ze=new Int32Array(Ve(4*Ie),0,Ie);break;case 5125:ze=new Uint32Array(Ve(4*Ie),0,Ie);break;case 5126:ze=new Float32Array(Ve(4*Ie),0,Ie);break;default:return null}return ze.length!==Ie?ze.subarray(0,Ie):ze},freeType:function(ot){We(ot.buffer)}}}function e(Ve){return!!Ve&&typeof Ve=="object"&&Array.isArray(Ve.shape)&&Array.isArray(Ve.stride)&&typeof Ve.offset=="number"&&Ve.shape.length===Ve.stride.length&&(Array.isArray(Ve.data)||we(Ve.data))}function i(Ve,We,nt,ot,Ie,ze){for(var et=0;et<We;++et)for(var tt=Ve[et],dt=0;dt<nt;++dt)for(var pt=tt[dt],vt=0;vt<ot;++vt)Ie[ze++]=pt[vt]}function r(Ve,We,nt,ot,Ie){for(var ze=1,et=nt+1;et<We.length;++et)ze*=We[et];var tt=We[nt];if(We.length-nt==4){var dt=We[nt+1],pt=We[nt+2];for(We=We[nt+3],et=0;et<tt;++et)i(Ve[et],dt,pt,We,ot,Ie),Ie+=ze}else for(et=0;et<tt;++et)r(Ve[et],We,nt+1,ot,Ie),Ie+=ze}function n(Ve){return 0|Oe[Object.prototype.toString.call(Ve)]}function a(Ve,We){for(var nt=0;nt<We.length;++nt)Ve[nt]=We[nt]}function o(Ve,We,nt,ot,Ie,ze,et){for(var tt=0,dt=0;dt<nt;++dt)for(var pt=0;pt<ot;++pt)Ve[tt++]=We[Ie*dt+ze*pt+et]}function u(Ve,We,nt,ot){function Ie(ct){this.id=dt++,this.buffer=Ve.createBuffer(),this.type=ct,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,nt.profile&&(this.stats={size:0})}function ze(ct,kt,ut){ct.byteLength=kt.byteLength,Ve.bufferData(ct.type,kt,ut)}function et(ct,kt,ut,ft,bt,It){if(ct.usage=ut,Array.isArray(kt)){if(ct.dtype=ft||5126,0<kt.length)if(Array.isArray(kt[0])){bt=le(kt);for(var zt=ft=1;zt<bt.length;++zt)ft*=bt[zt];ct.dimension=ft,ze(ct,kt=se(kt,bt,ct.dtype),ut),It?ct.persistentData=kt:pe.freeType(kt)}else typeof kt[0]=="number"?(ct.dimension=bt,a(bt=pe.allocType(ct.dtype,kt.length),kt),ze(ct,bt,ut),It?ct.persistentData=bt:pe.freeType(bt)):we(kt[0])&&(ct.dimension=kt[0].length,ct.dtype=ft||n(kt[0])||5126,ze(ct,kt=se(kt,[kt.length,kt[0].length],ct.dtype),ut),It?ct.persistentData=kt:pe.freeType(kt))}else if(we(kt))ct.dtype=ft||n(kt),ct.dimension=bt,ze(ct,kt,ut),It&&(ct.persistentData=new Uint8Array(new Uint8Array(kt.buffer)));else if(e(kt)){bt=kt.shape;var Rt=kt.stride,Jt=(zt=kt.offset,0),qt=0,Wt=0,jt=0;bt.length===1?(Jt=bt[0],qt=1,Wt=Rt[0],jt=0):bt.length===2&&(Jt=bt[0],qt=bt[1],Wt=Rt[0],jt=Rt[1]),ct.dtype=ft||n(kt.data)||5126,ct.dimension=qt,o(bt=pe.allocType(ct.dtype,Jt*qt),kt.data,Jt,qt,Wt,jt,zt),ze(ct,bt,ut),It?ct.persistentData=bt:pe.freeType(bt)}else kt instanceof ArrayBuffer&&(ct.dtype=5121,ct.dimension=bt,ze(ct,kt,ut),It&&(ct.persistentData=new Uint8Array(new Uint8Array(kt))))}function tt(ct){We.bufferCount--,ot(ct),Ve.deleteBuffer(ct.buffer),ct.buffer=null,delete pt[ct.id]}var dt=0,pt={};Ie.prototype.bind=function(){Ve.bindBuffer(this.type,this.buffer)},Ie.prototype.destroy=function(){tt(this)};var vt=[];return nt.profile&&(We.getTotalBufferSize=function(){var ct=0;return Object.keys(pt).forEach(function(kt){ct+=pt[kt].stats.size}),ct}),{create:function(ct,kt,ut,ft){function bt(zt){var Rt=35044,Jt=null,qt=0,Wt=0,jt=1;return Array.isArray(zt)||we(zt)||e(zt)||zt instanceof ArrayBuffer?Jt=zt:typeof zt=="number"?qt=0|zt:zt&&("data"in zt&&(Jt=zt.data),"usage"in zt&&(Rt=Te[zt.usage]),"type"in zt&&(Wt=Ae[zt.type]),"dimension"in zt&&(jt=0|zt.dimension),"length"in zt&&(qt=0|zt.length)),It.bind(),Jt?et(It,Jt,Rt,Wt,jt,ft):(qt&&Ve.bufferData(It.type,qt,Rt),It.dtype=Wt||5121,It.usage=Rt,It.dimension=jt,It.byteLength=qt),nt.profile&&(It.stats.size=It.byteLength*ne[It.dtype]),bt}We.bufferCount++;var It=new Ie(kt);return pt[It.id]=It,ut||bt(ct),bt._reglType="buffer",bt._buffer=It,bt.subdata=function(zt,Rt){var Jt,qt=0|(Rt||0);if(It.bind(),we(zt)||zt instanceof ArrayBuffer)Ve.bufferSubData(It.type,qt,zt);else if(Array.isArray(zt)){if(0<zt.length)if(typeof zt[0]=="number"){var Wt=pe.allocType(It.dtype,zt.length);a(Wt,zt),Ve.bufferSubData(It.type,qt,Wt),pe.freeType(Wt)}else(Array.isArray(zt[0])||we(zt[0]))&&(Jt=le(zt),Wt=se(zt,Jt,It.dtype),Ve.bufferSubData(It.type,qt,Wt),pe.freeType(Wt))}else if(e(zt)){Jt=zt.shape;var jt=zt.stride,fn=Wt=0,xn=0,un=0;Jt.length===1?(Wt=Jt[0],fn=1,xn=jt[0],un=0):Jt.length===2&&(Wt=Jt[0],fn=Jt[1],xn=jt[0],un=jt[1]),Jt=Array.isArray(zt.data)?It.dtype:n(zt.data),o(Jt=pe.allocType(Jt,Wt*fn),zt.data,Wt,fn,xn,un,zt.offset),Ve.bufferSubData(It.type,qt,Jt),pe.freeType(Jt)}return bt},nt.profile&&(bt.stats=It.stats),bt.destroy=function(){tt(It)},bt},createStream:function(ct,kt){var ut=vt.pop();return ut||(ut=new Ie(ct)),ut.bind(),et(ut,kt,35040,0,1,!1),ut},destroyStream:function(ct){vt.push(ct)},clear:function(){xe(pt).forEach(tt),vt.forEach(tt)},getBuffer:function(ct){return ct&&ct._buffer instanceof Ie?ct._buffer:null},restore:function(){xe(pt).forEach(function(ct){ct.buffer=Ve.createBuffer(),Ve.bindBuffer(ct.type,ct.buffer),Ve.bufferData(ct.type,ct.persistentData||ct.byteLength,ct.usage)})},_initBuffer:et}}function p(Ve,We,nt,ot){function Ie(ct){this.id=dt++,tt[this.id]=this,this.buffer=ct,this.primType=4,this.type=this.vertCount=0}function ze(ct,kt,ut,ft,bt,It,zt){var Rt;if(ct.buffer.bind(),kt?((Rt=zt)||we(kt)&&(!e(kt)||we(kt.data))||(Rt=We.oes_element_index_uint?5125:5123),nt._initBuffer(ct.buffer,kt,ut,Rt,3)):(Ve.bufferData(34963,It,ut),ct.buffer.dtype=Rt||5121,ct.buffer.usage=ut,ct.buffer.dimension=3,ct.buffer.byteLength=It),Rt=zt,!zt){switch(ct.buffer.dtype){case 5121:case 5120:Rt=5121;break;case 5123:case 5122:Rt=5123;break;case 5125:case 5124:Rt=5125}ct.buffer.dtype=Rt}ct.type=Rt,0>(kt=bt)&&(kt=ct.buffer.byteLength,Rt===5123?kt>>=1:Rt===5125&&(kt>>=2)),ct.vertCount=kt,kt=ft,0>ft&&(kt=4,(ft=ct.buffer.dimension)===1&&(kt=0),ft===2&&(kt=1),ft===3&&(kt=4)),ct.primType=kt}function et(ct){ot.elementsCount--,delete tt[ct.id],ct.buffer.destroy(),ct.buffer=null}var tt={},dt=0,pt={uint8:5121,uint16:5123};We.oes_element_index_uint&&(pt.uint32=5125),Ie.prototype.bind=function(){this.buffer.bind()};var vt=[];return{create:function(ct,kt){function ut(It){if(It)if(typeof It=="number")ft(It),bt.primType=4,bt.vertCount=0|It,bt.type=5121;else{var zt=null,Rt=35044,Jt=-1,qt=-1,Wt=0,jt=0;Array.isArray(It)||we(It)||e(It)?zt=It:("data"in It&&(zt=It.data),"usage"in It&&(Rt=Te[It.usage]),"primitive"in It&&(Jt=me[It.primitive]),"count"in It&&(qt=0|It.count),"type"in It&&(jt=pt[It.type]),"length"in It?Wt=0|It.length:(Wt=qt,jt===5123||jt===5122?Wt*=2:jt!==5125&&jt!==5124||(Wt*=4))),ze(bt,zt,Rt,Jt,qt,Wt,jt)}else ft(),bt.primType=4,bt.vertCount=0,bt.type=5121;return ut}var ft=nt.create(null,34963,!0),bt=new Ie(ft._buffer);return ot.elementsCount++,ut(ct),ut._reglType="elements",ut._elements=bt,ut.subdata=function(It,zt){return ft.subdata(It,zt),ut},ut.destroy=function(){et(bt)},ut},createStream:function(ct){var kt=vt.pop();return kt||(kt=new Ie(nt.create(null,34963,!0,!1)._buffer)),ze(kt,ct,35040,-1,-1,0,0),kt},destroyStream:function(ct){vt.push(ct)},getElements:function(ct){return typeof ct=="function"&&ct._elements instanceof Ie?ct._elements:null},clear:function(){xe(tt).forEach(et)}}}function c(Ve){for(var We=pe.allocType(5123,Ve.length),nt=0;nt<Ve.length;++nt)if(isNaN(Ve[nt]))We[nt]=65535;else if(Ve[nt]===1/0)We[nt]=31744;else if(Ve[nt]===-1/0)We[nt]=64512;else{Ee[0]=Ve[nt];var ot=(ze=be[0])>>>31<<15,Ie=(ze<<1>>>24)-127,ze=ze>>13&1023;We[nt]=-24>Ie?ot:-14>Ie?ot+(ze+1024>>-14-Ie):15<Ie?ot+31744:ot+(Ie+15<<10)+ze}return We}function x(Ve){return Array.isArray(Ve)||we(Ve)}function g(Ve){return"[object "+Ve+"]"}function f(Ve){return Array.isArray(Ve)&&(Ve.length===0||typeof Ve[0]=="number")}function y(Ve){return!(!Array.isArray(Ve)||Ve.length===0||!x(Ve[0]))}function v(Ve){return Object.prototype.toString.call(Ve)}function m(Ve){if(!Ve)return!1;var We=v(Ve);return 0<=Ge.indexOf(We)||f(Ve)||y(Ve)||e(Ve)}function _(Ve,We){Ve.type===36193?(Ve.data=c(We),pe.freeType(We)):Ve.data=We}function h(Ve,We,nt,ot,Ie,ze){if(Ve=st[Ve]!==void 0?st[Ve]:he[Ve]*$e[We],ze&&(Ve*=6),Ie){for(ot=0;1<=nt;)ot+=Ve*nt*nt,nt/=2;return ot}return Ve*nt*ot}function A(Ve,We,nt,ot,Ie,ze,et){function tt(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function dt(Ut,bn){Ut.internalformat=bn.internalformat,Ut.format=bn.format,Ut.type=bn.type,Ut.compressed=bn.compressed,Ut.premultiplyAlpha=bn.premultiplyAlpha,Ut.flipY=bn.flipY,Ut.unpackAlignment=bn.unpackAlignment,Ut.colorSpace=bn.colorSpace,Ut.width=bn.width,Ut.height=bn.height,Ut.channels=bn.channels}function pt(Ut,bn){if(typeof bn=="object"&&bn){"premultiplyAlpha"in bn&&(Ut.premultiplyAlpha=bn.premultiplyAlpha),"flipY"in bn&&(Ut.flipY=bn.flipY),"alignment"in bn&&(Ut.unpackAlignment=bn.alignment),"colorSpace"in bn&&(Ut.colorSpace=Cn[bn.colorSpace]),"type"in bn&&(Ut.type=Tn[bn.type]);var At=Ut.width,Gt=Ut.height,$t=Ut.channels,mn=!1;"shape"in bn?(At=bn.shape[0],Gt=bn.shape[1],bn.shape.length===3&&($t=bn.shape[2],mn=!0)):("radius"in bn&&(At=Gt=bn.radius),"width"in bn&&(At=bn.width),"height"in bn&&(Gt=bn.height),"channels"in bn&&($t=bn.channels,mn=!0)),Ut.width=0|At,Ut.height=0|Gt,Ut.channels=0|$t,At=!1,"format"in bn&&(At=bn.format,Gt=Ut.internalformat=Pn[At],Ut.format=cn[Gt],At in Tn&&!("type"in bn)&&(Ut.type=Tn[At]),At in Wn&&(Ut.compressed=!0),At=!0),!mn&&At?Ut.channels=he[Ut.format]:mn&&!At&&Ut.channels!==Ue[Ut.format]&&(Ut.format=Ut.internalformat=Ue[Ut.channels])}}function vt(Ut){Ve.pixelStorei(37440,Ut.flipY),Ve.pixelStorei(37441,Ut.premultiplyAlpha),Ve.pixelStorei(37443,Ut.colorSpace),Ve.pixelStorei(3317,Ut.unpackAlignment)}function ct(){tt.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function kt(Ut,bn){var At=null;if(m(bn)?At=bn:bn&&(pt(Ut,bn),"x"in bn&&(Ut.xOffset=0|bn.x),"y"in bn&&(Ut.yOffset=0|bn.y),m(bn.data)&&(At=bn.data)),bn.copy){var Gt=Ie.viewportWidth,$t=Ie.viewportHeight;Ut.width=Ut.width||Gt-Ut.xOffset,Ut.height=Ut.height||$t-Ut.yOffset,Ut.needsCopy=!0}else if(At){if(we(At))Ut.channels=Ut.channels||4,Ut.data=At,"type"in bn||Ut.type!==5121||(Ut.type=0|Oe[Object.prototype.toString.call(At)]);else if(f(At)){switch(Ut.channels=Ut.channels||4,$t=(Gt=At).length,Ut.type){case 5121:case 5123:case 5125:case 5126:($t=pe.allocType(Ut.type,$t)).set(Gt),Ut.data=$t;break;case 36193:Ut.data=c(Gt)}Ut.alignment=1,Ut.needsFree=!0}else if(e(At)){Gt=At.data,Array.isArray(Gt)||Ut.type!==5121||(Ut.type=0|Oe[Object.prototype.toString.call(Gt)]),$t=At.shape;var mn,yn,An,sn,Yt=At.stride;$t.length===3?(An=$t[2],sn=Yt[2]):sn=An=1,mn=$t[0],yn=$t[1],$t=Yt[0],Yt=Yt[1],Ut.alignment=1,Ut.width=mn,Ut.height=yn,Ut.channels=An,Ut.format=Ut.internalformat=Ue[An],Ut.needsFree=!0,mn=sn,At=At.offset,An=Ut.width,sn=Ut.height,yn=Ut.channels;for(var Xt=pe.allocType(Ut.type===36193?5126:Ut.type,An*sn*yn),an=0,ln=0;ln<sn;++ln)for(var Sn=0;Sn<An;++Sn)for(var En=0;En<yn;++En)Xt[an++]=Gt[$t*Sn+Yt*ln+mn*En+At];_(Ut,Xt)}else if(v(At)===ke||v(At)===_e||v(At)===Ce)v(At)===ke||v(At)===_e?Ut.element=At:Ut.element=At.canvas,Ut.width=Ut.element.width,Ut.height=Ut.element.height,Ut.channels=4;else if(v(At)===Fe)Ut.element=At,Ut.width=At.width,Ut.height=At.height,Ut.channels=4;else if(v(At)===Re)Ut.element=At,Ut.width=At.naturalWidth,Ut.height=At.naturalHeight,Ut.channels=4;else if(v(At)===He)Ut.element=At,Ut.width=At.videoWidth,Ut.height=At.videoHeight,Ut.channels=4;else if(y(At)){for(Gt=Ut.width||At[0].length,$t=Ut.height||At.length,Yt=Ut.channels,Yt=x(At[0][0])?Yt||At[0][0].length:Yt||1,mn=ge.shape(At),An=1,sn=0;sn<mn.length;++sn)An*=mn[sn];An=pe.allocType(Ut.type===36193?5126:Ut.type,An),ge.flatten(At,mn,"",An),_(Ut,An),Ut.alignment=1,Ut.width=Gt,Ut.height=$t,Ut.channels=Yt,Ut.format=Ut.internalformat=Ue[Yt],Ut.needsFree=!0}}else Ut.width=Ut.width||1,Ut.height=Ut.height||1,Ut.channels=Ut.channels||4}function ut(Ut,bn,At,Gt,$t){var mn=Ut.element,yn=Ut.data,An=Ut.internalformat,sn=Ut.format,Yt=Ut.type,Xt=Ut.width,an=Ut.height;vt(Ut),mn?Ve.texSubImage2D(bn,$t,At,Gt,sn,Yt,mn):Ut.compressed?Ve.compressedTexSubImage2D(bn,$t,At,Gt,An,Xt,an,yn):Ut.needsCopy?(ot(),Ve.copyTexSubImage2D(bn,$t,At,Gt,Ut.xOffset,Ut.yOffset,Xt,an)):Ve.texSubImage2D(bn,$t,At,Gt,Xt,an,sn,Yt,yn)}function ft(){return gn.pop()||new ct}function bt(Ut){Ut.needsFree&&pe.freeType(Ut.data),ct.call(Ut),gn.push(Ut)}function It(){tt.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function zt(Ut,bn,At){var Gt=Ut.images[0]=ft();Ut.mipmask=1,Gt.width=Ut.width=bn,Gt.height=Ut.height=At,Gt.channels=Ut.channels=4}function Rt(Ut,bn){var At=null;if(m(bn))dt(At=Ut.images[0]=ft(),Ut),kt(At,bn),Ut.mipmask=1;else if(pt(Ut,bn),Array.isArray(bn.mipmap))for(var Gt=bn.mipmap,$t=0;$t<Gt.length;++$t)dt(At=Ut.images[$t]=ft(),Ut),At.width>>=$t,At.height>>=$t,kt(At,Gt[$t]),Ut.mipmask|=1<<$t;else dt(At=Ut.images[0]=ft(),Ut),kt(At,bn),Ut.mipmask=1;dt(Ut,Ut.images[0])}function Jt(Ut,bn){for(var At=Ut.images,Gt=0;Gt<At.length&&At[Gt];++Gt){var $t=At[Gt],mn=bn,yn=Gt,An=$t.element,sn=$t.data,Yt=$t.internalformat,Xt=$t.format,an=$t.type,ln=$t.width,Sn=$t.height;vt($t),An?Ve.texImage2D(mn,yn,Xt,Xt,an,An):$t.compressed?Ve.compressedTexImage2D(mn,yn,Yt,ln,Sn,0,sn):$t.needsCopy?(ot(),Ve.copyTexImage2D(mn,yn,Xt,$t.xOffset,$t.yOffset,ln,Sn,0)):Ve.texImage2D(mn,yn,Xt,ln,Sn,0,Xt,an,sn||null)}}function qt(){var Ut=kn.pop()||new It;tt.call(Ut);for(var bn=Ut.mipmask=0;16>bn;++bn)Ut.images[bn]=null;return Ut}function Wt(Ut){for(var bn=Ut.images,At=0;At<bn.length;++At)bn[At]&&bt(bn[At]),bn[At]=null;kn.push(Ut)}function jt(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function fn(Ut,bn){"min"in bn&&(Ut.minFilter=Mn[bn.min],0<=De.indexOf(Ut.minFilter)&&!("faces"in bn)&&(Ut.genMipmaps=!0)),"mag"in bn&&(Ut.magFilter=dn[bn.mag]);var At=Ut.wrapS,Gt=Ut.wrapT;if("wrap"in bn){var $t=bn.wrap;typeof $t=="string"?At=Gt=hn[$t]:Array.isArray($t)&&(At=hn[$t[0]],Gt=hn[$t[1]])}else"wrapS"in bn&&(At=hn[bn.wrapS]),"wrapT"in bn&&(Gt=hn[bn.wrapT]);if(Ut.wrapS=At,Ut.wrapT=Gt,"anisotropic"in bn&&(Ut.anisotropic=bn.anisotropic),"mipmap"in bn){switch(At=!1,typeof bn.mipmap){case"string":Ut.mipmapHint=on[bn.mipmap],At=Ut.genMipmaps=!0;break;case"boolean":At=Ut.genMipmaps=bn.mipmap;break;case"object":Ut.genMipmaps=!1,At=!0}!At||"min"in bn||(Ut.minFilter=9984)}}function xn(Ut,bn){Ve.texParameteri(bn,10241,Ut.minFilter),Ve.texParameteri(bn,10240,Ut.magFilter),Ve.texParameteri(bn,10242,Ut.wrapS),Ve.texParameteri(bn,10243,Ut.wrapT),We.ext_texture_filter_anisotropic&&Ve.texParameteri(bn,34046,Ut.anisotropic),Ut.genMipmaps&&(Ve.hint(33170,Ut.mipmapHint),Ve.generateMipmap(bn))}function un(Ut){tt.call(this),this.mipmask=0,this.internalformat=6408,this.id=Vn++,this.refCount=1,this.target=Ut,this.texture=Ve.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new jt,et.profile&&(this.stats={size:0})}function Ht(Ut){Ve.activeTexture(33984),Ve.bindTexture(Ut.target,Ut.texture)}function nn(){var Ut=Kn[0];Ut?Ve.bindTexture(Ut.target,Ut.texture):Ve.bindTexture(3553,null)}function Kt(Ut){var bn=Ut.texture,At=Ut.unit,Gt=Ut.target;0<=At&&(Ve.activeTexture(33984+At),Ve.bindTexture(Gt,null),Kn[At]=null),Ve.deleteTexture(bn),Ut.texture=null,Ut.params=null,Ut.pixels=null,Ut.refCount=0,delete In[Ut.id],ze.textureCount--}var on={"don't care":4352,"dont care":4352,nice:4354,fast:4353},hn={repeat:10497,clamp:33071,mirror:33648},dn={nearest:9728,linear:9729},Mn=ee({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},dn),Cn={none:0,browser:37444},Tn={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Pn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Wn={};We.ext_srgb&&(Pn.srgb=35904,Pn.srgba=35906),We.oes_texture_float&&(Tn.float32=Tn.float=5126),We.oes_texture_half_float&&(Tn.float16=Tn["half float"]=36193),We.webgl_depth_texture&&(ee(Pn,{depth:6402,"depth stencil":34041}),ee(Tn,{uint16:5123,uint32:5125,"depth stencil":34042})),We.webgl_compressed_texture_s3tc&&ee(Wn,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),We.webgl_compressed_texture_atc&&ee(Wn,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),We.webgl_compressed_texture_pvrtc&&ee(Wn,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),We.webgl_compressed_texture_etc1&&(Wn["rgb etc1"]=36196);var $n=Array.prototype.slice.call(Ve.getParameter(34467));Object.keys(Wn).forEach(function(Ut){var bn=Wn[Ut];0<=$n.indexOf(bn)&&(Pn[Ut]=bn)});var ar=Object.keys(Pn);nt.textureFormats=ar;var Qn=[];Object.keys(Pn).forEach(function(Ut){Qn[Pn[Ut]]=Ut});var Gn=[];Object.keys(Tn).forEach(function(Ut){Gn[Tn[Ut]]=Ut});var dr=[];Object.keys(dn).forEach(function(Ut){dr[dn[Ut]]=Ut});var Bt=[];Object.keys(Mn).forEach(function(Ut){Bt[Mn[Ut]]=Ut});var tn=[];Object.keys(hn).forEach(function(Ut){tn[hn[Ut]]=Ut});var cn=ar.reduce(function(Ut,bn){var At=Pn[bn];return At===6409||At===6406||At===6409||At===6410||At===6402||At===34041||We.ext_srgb&&(At===35904||At===35906)?Ut[At]=At:At===32855||0<=bn.indexOf("rgba")?Ut[At]=6408:Ut[At]=6407,Ut},{}),gn=[],kn=[],Vn=0,In={},Dn=nt.maxTextureUnits,Kn=Array(Dn).map(function(){return null});return ee(un.prototype,{bind:function(){this.bindCount+=1;var Ut=this.unit;if(0>Ut){for(var bn=0;bn<Dn;++bn){var At=Kn[bn];if(At){if(0<At.bindCount)continue;At.unit=-1}Kn[bn]=this,Ut=bn;break}et.profile&&ze.maxTextureUnits<Ut+1&&(ze.maxTextureUnits=Ut+1),this.unit=Ut,Ve.activeTexture(33984+Ut),Ve.bindTexture(this.target,this.texture)}return Ut},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Kt(this)}}),et.profile&&(ze.getTotalTextureSize=function(){var Ut=0;return Object.keys(In).forEach(function(bn){Ut+=In[bn].stats.size}),Ut}),{create2D:function(Ut,bn){function At($t,mn){var yn=Gt.texInfo;jt.call(yn);var An=qt();return typeof $t=="number"?zt(An,0|$t,typeof mn=="number"?0|mn:0|$t):$t?(fn(yn,$t),Rt(An,$t)):zt(An,1,1),yn.genMipmaps&&(An.mipmask=(An.width<<1)-1),Gt.mipmask=An.mipmask,dt(Gt,An),Gt.internalformat=An.internalformat,At.width=An.width,At.height=An.height,Ht(Gt),Jt(An,3553),xn(yn,3553),nn(),Wt(An),et.profile&&(Gt.stats.size=h(Gt.internalformat,Gt.type,An.width,An.height,yn.genMipmaps,!1)),At.format=Qn[Gt.internalformat],At.type=Gn[Gt.type],At.mag=dr[yn.magFilter],At.min=Bt[yn.minFilter],At.wrapS=tn[yn.wrapS],At.wrapT=tn[yn.wrapT],At}var Gt=new un(3553);return In[Gt.id]=Gt,ze.textureCount++,At(Ut,bn),At.subimage=function($t,mn,yn,An){mn|=0,yn|=0,An|=0;var sn=ft();return dt(sn,Gt),sn.width=0,sn.height=0,kt(sn,$t),sn.width=sn.width||(Gt.width>>An)-mn,sn.height=sn.height||(Gt.height>>An)-yn,Ht(Gt),ut(sn,3553,mn,yn,An),nn(),bt(sn),At},At.resize=function($t,mn){var yn=0|$t,An=0|mn||yn;if(yn===Gt.width&&An===Gt.height)return At;At.width=Gt.width=yn,At.height=Gt.height=An,Ht(Gt);for(var sn=0;Gt.mipmask>>sn;++sn){var Yt=yn>>sn,Xt=An>>sn;if(!Yt||!Xt)break;Ve.texImage2D(3553,sn,Gt.format,Yt,Xt,0,Gt.format,Gt.type,null)}return nn(),et.profile&&(Gt.stats.size=h(Gt.internalformat,Gt.type,yn,An,!1,!1)),At},At._reglType="texture2d",At._texture=Gt,et.profile&&(At.stats=Gt.stats),At.destroy=function(){Gt.decRef()},At},createCube:function(Ut,bn,At,Gt,$t,mn){function yn(Yt,Xt,an,ln,Sn,En){var jn,Fn=An.texInfo;for(jt.call(Fn),jn=0;6>jn;++jn)sn[jn]=qt();if(typeof Yt!="number"&&Yt){if(typeof Yt=="object")if(Xt)Rt(sn[0],Yt),Rt(sn[1],Xt),Rt(sn[2],an),Rt(sn[3],ln),Rt(sn[4],Sn),Rt(sn[5],En);else if(fn(Fn,Yt),pt(An,Yt),"faces"in Yt)for(Yt=Yt.faces,jn=0;6>jn;++jn)dt(sn[jn],An),Rt(sn[jn],Yt[jn]);else for(jn=0;6>jn;++jn)Rt(sn[jn],Yt)}else for(Yt=0|Yt||1,jn=0;6>jn;++jn)zt(sn[jn],Yt,Yt);for(dt(An,sn[0]),An.mipmask=Fn.genMipmaps?(sn[0].width<<1)-1:sn[0].mipmask,An.internalformat=sn[0].internalformat,yn.width=sn[0].width,yn.height=sn[0].height,Ht(An),jn=0;6>jn;++jn)Jt(sn[jn],34069+jn);for(xn(Fn,34067),nn(),et.profile&&(An.stats.size=h(An.internalformat,An.type,yn.width,yn.height,Fn.genMipmaps,!0)),yn.format=Qn[An.internalformat],yn.type=Gn[An.type],yn.mag=dr[Fn.magFilter],yn.min=Bt[Fn.minFilter],yn.wrapS=tn[Fn.wrapS],yn.wrapT=tn[Fn.wrapT],jn=0;6>jn;++jn)Wt(sn[jn]);return yn}var An=new un(34067);In[An.id]=An,ze.cubeCount++;var sn=Array(6);return yn(Ut,bn,At,Gt,$t,mn),yn.subimage=function(Yt,Xt,an,ln,Sn){an|=0,ln|=0,Sn|=0;var En=ft();return dt(En,An),En.width=0,En.height=0,kt(En,Xt),En.width=En.width||(An.width>>Sn)-an,En.height=En.height||(An.height>>Sn)-ln,Ht(An),ut(En,34069+Yt,an,ln,Sn),nn(),bt(En),yn},yn.resize=function(Yt){if((Yt|=0)!==An.width){yn.width=An.width=Yt,yn.height=An.height=Yt,Ht(An);for(var Xt=0;6>Xt;++Xt)for(var an=0;An.mipmask>>an;++an)Ve.texImage2D(34069+Xt,an,An.format,Yt>>an,Yt>>an,0,An.format,An.type,null);return nn(),et.profile&&(An.stats.size=h(An.internalformat,An.type,yn.width,yn.height,!1,!0)),yn}},yn._reglType="textureCube",yn._texture=An,et.profile&&(yn.stats=An.stats),yn.destroy=function(){An.decRef()},yn},clear:function(){for(var Ut=0;Ut<Dn;++Ut)Ve.activeTexture(33984+Ut),Ve.bindTexture(3553,null),Kn[Ut]=null;xe(In).forEach(Kt),ze.cubeCount=0,ze.textureCount=0},getTexture:function(Ut){return null},restore:function(){for(var Ut=0;Ut<Dn;++Ut){var bn=Kn[Ut];bn&&(bn.bindCount=0,bn.unit=-1,Kn[Ut]=null)}xe(In).forEach(function(At){At.texture=Ve.createTexture(),Ve.bindTexture(At.target,At.texture);for(var Gt=0;32>Gt;++Gt)if(At.mipmask&1<<Gt)if(At.target===3553)Ve.texImage2D(3553,Gt,At.internalformat,At.width>>Gt,At.height>>Gt,0,At.internalformat,At.type,null);else for(var $t=0;6>$t;++$t)Ve.texImage2D(34069+$t,Gt,At.internalformat,At.width>>Gt,At.height>>Gt,0,At.internalformat,At.type,null);xn(At.texInfo,At.target)})},refresh:function(){for(var Ut=0;Ut<Dn;++Ut){var bn=Kn[Ut];bn&&(bn.bindCount=0,bn.unit=-1,Kn[Ut]=null),Ve.activeTexture(33984+Ut),Ve.bindTexture(3553,null),Ve.bindTexture(34067,null)}}}}function w(Ve,We,nt,ot,Ie,ze){function et(un,Ht,nn){this.target=un,this.texture=Ht,this.renderbuffer=nn;var Kt=un=0;Ht?(un=Ht.width,Kt=Ht.height):nn&&(un=nn.width,Kt=nn.height),this.width=un,this.height=Kt}function tt(un){un&&(un.texture&&un.texture._texture.decRef(),un.renderbuffer&&un.renderbuffer._renderbuffer.decRef())}function dt(un,Ht,nn){un&&(un.texture?un.texture._texture.refCount+=1:un.renderbuffer._renderbuffer.refCount+=1)}function pt(un,Ht){Ht&&(Ht.texture?Ve.framebufferTexture2D(36160,un,Ht.target,Ht.texture._texture.texture,0):Ve.framebufferRenderbuffer(36160,un,36161,Ht.renderbuffer._renderbuffer.renderbuffer))}function vt(un){var Ht=3553,nn=null,Kt=null,on=un;return typeof un=="object"&&(on=un.data,"target"in un&&(Ht=0|un.target)),(un=on._reglType)==="texture2d"||un==="textureCube"?nn=on:un==="renderbuffer"&&(Kt=on,Ht=36161),new et(Ht,nn,Kt)}function ct(un,Ht,nn,Kt,on){return nn?((un=ot.create2D({width:un,height:Ht,format:Kt,type:on}))._texture.refCount=0,new et(3553,un,null)):((un=Ie.create({width:un,height:Ht,format:Kt}))._renderbuffer.refCount=0,new et(36161,null,un))}function kt(un){return un&&(un.texture||un.renderbuffer)}function ut(un,Ht,nn){un&&(un.texture?un.texture.resize(Ht,nn):un.renderbuffer&&un.renderbuffer.resize(Ht,nn),un.width=Ht,un.height=nn)}function ft(){this.id=fn++,xn[this.id]=this,this.framebuffer=Ve.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function bt(un){un.colorAttachments.forEach(tt),tt(un.depthAttachment),tt(un.stencilAttachment),tt(un.depthStencilAttachment)}function It(un){Ve.deleteFramebuffer(un.framebuffer),un.framebuffer=null,ze.framebufferCount--,delete xn[un.id]}function zt(un){var Ht;Ve.bindFramebuffer(36160,un.framebuffer);var nn=un.colorAttachments;for(Ht=0;Ht<nn.length;++Ht)pt(36064+Ht,nn[Ht]);for(Ht=nn.length;Ht<nt.maxColorAttachments;++Ht)Ve.framebufferTexture2D(36160,36064+Ht,3553,null,0);Ve.framebufferTexture2D(36160,33306,3553,null,0),Ve.framebufferTexture2D(36160,36096,3553,null,0),Ve.framebufferTexture2D(36160,36128,3553,null,0),pt(36096,un.depthAttachment),pt(36128,un.stencilAttachment),pt(33306,un.depthStencilAttachment),Ve.checkFramebufferStatus(36160),Ve.isContextLost(),Ve.bindFramebuffer(36160,Jt.next?Jt.next.framebuffer:null),Jt.cur=Jt.next,Ve.getError()}function Rt(un,Ht){function nn(on,hn){var dn,Mn=0,Cn=0,Tn=!0,Pn=!0;dn=null;var Wn=!0,$n="rgba",ar="uint8",Qn=1,Gn=null,dr=null,Bt=null,tn=!1;typeof on=="number"?(Mn=0|on,Cn=0|hn||Mn):on?("shape"in on?(Mn=(Cn=on.shape)[0],Cn=Cn[1]):("radius"in on&&(Mn=Cn=on.radius),"width"in on&&(Mn=on.width),"height"in on&&(Cn=on.height)),("color"in on||"colors"in on)&&(dn=on.color||on.colors,Array.isArray(dn)),dn||("colorCount"in on&&(Qn=0|on.colorCount),"colorTexture"in on&&(Wn=!!on.colorTexture,$n="rgba4"),"colorType"in on&&(ar=on.colorType,!Wn)&&(ar==="half float"||ar==="float16"?$n="rgba16f":ar!=="float"&&ar!=="float32"||($n="rgba32f")),"colorFormat"in on&&($n=on.colorFormat,0<=qt.indexOf($n)?Wn=!0:0<=Wt.indexOf($n)&&(Wn=!1))),("depthTexture"in on||"depthStencilTexture"in on)&&(tn=!(!on.depthTexture&&!on.depthStencilTexture)),"depth"in on&&(typeof on.depth=="boolean"?Tn=on.depth:(Gn=on.depth,Pn=!1)),"stencil"in on&&(typeof on.stencil=="boolean"?Pn=on.stencil:(dr=on.stencil,Tn=!1)),"depthStencil"in on&&(typeof on.depthStencil=="boolean"?Tn=Pn=on.depthStencil:(Bt=on.depthStencil,Pn=Tn=!1))):Mn=Cn=1;var cn=null,gn=null,kn=null,Vn=null;if(Array.isArray(dn))cn=dn.map(vt);else if(dn)cn=[vt(dn)];else for(cn=Array(Qn),dn=0;dn<Qn;++dn)cn[dn]=ct(Mn,Cn,Wn,$n,ar);for(Mn=Mn||cn[0].width,Cn=Cn||cn[0].height,Gn?gn=vt(Gn):Tn&&!Pn&&(gn=ct(Mn,Cn,tn,"depth","uint32")),dr?kn=vt(dr):Pn&&!Tn&&(kn=ct(Mn,Cn,!1,"stencil","uint8")),Bt?Vn=vt(Bt):!Gn&&!dr&&Pn&&Tn&&(Vn=ct(Mn,Cn,tn,"depth stencil","depth stencil")),Tn=null,dn=0;dn<cn.length;++dn)dt(cn[dn]),cn[dn]&&cn[dn].texture&&(Pn=mt[cn[dn].texture._texture.format]*at[cn[dn].texture._texture.type],Tn===null&&(Tn=Pn));return dt(gn),dt(kn),dt(Vn),bt(Kt),Kt.width=Mn,Kt.height=Cn,Kt.colorAttachments=cn,Kt.depthAttachment=gn,Kt.stencilAttachment=kn,Kt.depthStencilAttachment=Vn,nn.color=cn.map(kt),nn.depth=kt(gn),nn.stencil=kt(kn),nn.depthStencil=kt(Vn),nn.width=Kt.width,nn.height=Kt.height,zt(Kt),nn}var Kt=new ft;return ze.framebufferCount++,nn(un,Ht),ee(nn,{resize:function(on,hn){var dn=Math.max(0|on,1),Mn=Math.max(0|hn||dn,1);if(dn===Kt.width&&Mn===Kt.height)return nn;for(var Cn=Kt.colorAttachments,Tn=0;Tn<Cn.length;++Tn)ut(Cn[Tn],dn,Mn);return ut(Kt.depthAttachment,dn,Mn),ut(Kt.stencilAttachment,dn,Mn),ut(Kt.depthStencilAttachment,dn,Mn),Kt.width=nn.width=dn,Kt.height=nn.height=Mn,zt(Kt),nn},_reglType:"framebuffer",_framebuffer:Kt,destroy:function(){It(Kt),bt(Kt)},use:function(on){Jt.setFBO({framebuffer:nn},on)}})}var Jt={cur:null,next:null,dirty:!1,setFBO:null},qt=["rgba"],Wt=["rgba4","rgb565","rgb5 a1"];We.ext_srgb&&Wt.push("srgba"),We.ext_color_buffer_half_float&&Wt.push("rgba16f","rgb16f"),We.webgl_color_buffer_float&&Wt.push("rgba32f");var jt=["uint8"];We.oes_texture_half_float&&jt.push("half float","float16"),We.oes_texture_float&&jt.push("float","float32");var fn=0,xn={};return ee(Jt,{getFramebuffer:function(un){return typeof un=="function"&&un._reglType==="framebuffer"&&(un=un._framebuffer)instanceof ft?un:null},create:Rt,createCube:function(un){function Ht(Kt){var on,hn={color:null},dn=0,Mn=null;on="rgba";var Cn="uint8",Tn=1;if(typeof Kt=="number"?dn=0|Kt:Kt?("shape"in Kt?dn=Kt.shape[0]:("radius"in Kt&&(dn=0|Kt.radius),"width"in Kt?dn=0|Kt.width:"height"in Kt&&(dn=0|Kt.height)),("color"in Kt||"colors"in Kt)&&(Mn=Kt.color||Kt.colors,Array.isArray(Mn)),Mn||("colorCount"in Kt&&(Tn=0|Kt.colorCount),"colorType"in Kt&&(Cn=Kt.colorType),"colorFormat"in Kt&&(on=Kt.colorFormat)),"depth"in Kt&&(hn.depth=Kt.depth),"stencil"in Kt&&(hn.stencil=Kt.stencil),"depthStencil"in Kt&&(hn.depthStencil=Kt.depthStencil)):dn=1,Mn)if(Array.isArray(Mn))for(Kt=[],on=0;on<Mn.length;++on)Kt[on]=Mn[on];else Kt=[Mn];else for(Kt=Array(Tn),Mn={radius:dn,format:on,type:Cn},on=0;on<Tn;++on)Kt[on]=ot.createCube(Mn);for(hn.color=Array(Kt.length),on=0;on<Kt.length;++on)Tn=Kt[on],dn=dn||Tn.width,hn.color[on]={target:34069,data:Kt[on]};for(on=0;6>on;++on){for(Tn=0;Tn<Kt.length;++Tn)hn.color[Tn].target=34069+on;0<on&&(hn.depth=nn[0].depth,hn.stencil=nn[0].stencil,hn.depthStencil=nn[0].depthStencil),nn[on]?nn[on](hn):nn[on]=Rt(hn)}return ee(Ht,{width:dn,height:dn,color:Kt})}var nn=Array(6);return Ht(un),ee(Ht,{faces:nn,resize:function(Kt){var on=0|Kt;if(on===Ht.width)return Ht;var hn=Ht.color;for(Kt=0;Kt<hn.length;++Kt)hn[Kt].resize(on);for(Kt=0;6>Kt;++Kt)nn[Kt].resize(on);return Ht.width=Ht.height=on,Ht},_reglType:"framebufferCube",destroy:function(){nn.forEach(function(Kt){Kt.destroy()})}})},clear:function(){xe(xn).forEach(It)},restore:function(){Jt.cur=null,Jt.next=null,Jt.dirty=!0,xe(xn).forEach(function(un){un.framebuffer=Ve.createFramebuffer(),zt(un)})}})}function E(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function L(Ve,We,nt,ot,Ie,ze,et){function tt(){this.id=++vt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var ut=We.oes_vertex_array_object;this.vao=ut?ut.createVertexArrayOES():null,ct[this.id]=this,this.buffers=[]}var dt=nt.maxAttributes,pt=Array(dt);for(nt=0;nt<dt;++nt)pt[nt]=new E;var vt=0,ct={},kt={Record:E,scope:{},state:pt,currentVAO:null,targetVAO:null,restore:We.oes_vertex_array_object?function(){We.oes_vertex_array_object&&xe(ct).forEach(function(ut){ut.refresh()})}:function(){},createVAO:function(ut){function ft(It){var zt;Array.isArray(It)?(zt=It,bt.elements&&bt.ownsElements&&bt.elements.destroy(),bt.elements=null,bt.ownsElements=!1,bt.offset=0,bt.count=0,bt.instances=-1,bt.primitive=4):(It.elements?(zt=It.elements,bt.ownsElements?(typeof zt=="function"&&zt._reglType==="elements"?bt.elements.destroy():bt.elements(zt),bt.ownsElements=!1):ze.getElements(It.elements)?(bt.elements=It.elements,bt.ownsElements=!1):(bt.elements=ze.create(It.elements),bt.ownsElements=!0)):(bt.elements=null,bt.ownsElements=!1),zt=It.attributes,bt.offset=0,bt.count=-1,bt.instances=-1,bt.primitive=4,bt.elements&&(bt.count=bt.elements._elements.vertCount,bt.primitive=bt.elements._elements.primType),"offset"in It&&(bt.offset=0|It.offset),"count"in It&&(bt.count=0|It.count),"instances"in It&&(bt.instances=0|It.instances),"primitive"in It&&(bt.primitive=me[It.primitive])),It={};var Rt=bt.attributes;Rt.length=zt.length;for(var Jt=0;Jt<zt.length;++Jt){var qt,Wt=zt[Jt],jt=Rt[Jt]=new E,fn=Wt.data||Wt;Array.isArray(fn)||we(fn)||e(fn)?(bt.buffers[Jt]&&(qt=bt.buffers[Jt],we(fn)&&qt._buffer.byteLength>=fn.byteLength?qt.subdata(fn):(qt.destroy(),bt.buffers[Jt]=null)),bt.buffers[Jt]||(qt=bt.buffers[Jt]=Ie.create(Wt,34962,!1,!0)),jt.buffer=Ie.getBuffer(qt),jt.size=0|jt.buffer.dimension,jt.normalized=!1,jt.type=jt.buffer.dtype,jt.offset=0,jt.stride=0,jt.divisor=0,jt.state=1,It[Jt]=1):Ie.getBuffer(Wt)?(jt.buffer=Ie.getBuffer(Wt),jt.size=0|jt.buffer.dimension,jt.normalized=!1,jt.type=jt.buffer.dtype,jt.offset=0,jt.stride=0,jt.divisor=0,jt.state=1):Ie.getBuffer(Wt.buffer)?(jt.buffer=Ie.getBuffer(Wt.buffer),jt.size=0|(+Wt.size||jt.buffer.dimension),jt.normalized=!!Wt.normalized||!1,jt.type="type"in Wt?Ae[Wt.type]:jt.buffer.dtype,jt.offset=0|(Wt.offset||0),jt.stride=0|(Wt.stride||0),jt.divisor=0|(Wt.divisor||0),jt.state=1):"x"in Wt&&(jt.x=+Wt.x||0,jt.y=+Wt.y||0,jt.z=+Wt.z||0,jt.w=+Wt.w||0,jt.state=2)}for(qt=0;qt<bt.buffers.length;++qt)!It[qt]&&bt.buffers[qt]&&(bt.buffers[qt].destroy(),bt.buffers[qt]=null);return bt.refresh(),ft}var bt=new tt;return ot.vaoCount+=1,ft.destroy=function(){for(var It=0;It<bt.buffers.length;++It)bt.buffers[It]&&bt.buffers[It].destroy();bt.buffers.length=0,bt.ownsElements&&(bt.elements.destroy(),bt.elements=null,bt.ownsElements=!1),bt.destroy()},ft._vao=bt,ft._reglType="vao",ft(ut)},getVAO:function(ut){return typeof ut=="function"&&ut._vao?ut._vao:null},destroyBuffer:function(ut){for(var ft=0;ft<pt.length;++ft){var bt=pt[ft];bt.buffer===ut&&(Ve.disableVertexAttribArray(ft),bt.buffer=null)}},setVAO:We.oes_vertex_array_object?function(ut){if(ut!==kt.currentVAO){var ft=We.oes_vertex_array_object;ut?ft.bindVertexArrayOES(ut.vao):ft.bindVertexArrayOES(null),kt.currentVAO=ut}}:function(ut){if(ut!==kt.currentVAO){if(ut)ut.bindAttrs();else{for(var ft=We.angle_instanced_arrays,bt=0;bt<pt.length;++bt){var It=pt[bt];It.buffer?(Ve.enableVertexAttribArray(bt),It.buffer.bind(),Ve.vertexAttribPointer(bt,It.size,It.type,It.normalized,It.stride,It.offfset),ft&&It.divisor&&ft.vertexAttribDivisorANGLE(bt,It.divisor)):(Ve.disableVertexAttribArray(bt),Ve.vertexAttrib4f(bt,It.x,It.y,It.z,It.w))}et.elements?Ve.bindBuffer(34963,et.elements.buffer.buffer):Ve.bindBuffer(34963,null)}kt.currentVAO=ut}},clear:We.oes_vertex_array_object?function(){xe(ct).forEach(function(ut){ut.destroy()})}:function(){}};return tt.prototype.bindAttrs=function(){for(var ut=We.angle_instanced_arrays,ft=this.attributes,bt=0;bt<ft.length;++bt){var It=ft[bt];It.buffer?(Ve.enableVertexAttribArray(bt),Ve.bindBuffer(34962,It.buffer.buffer),Ve.vertexAttribPointer(bt,It.size,It.type,It.normalized,It.stride,It.offset),ut&&It.divisor&&ut.vertexAttribDivisorANGLE(bt,It.divisor)):(Ve.disableVertexAttribArray(bt),Ve.vertexAttrib4f(bt,It.x,It.y,It.z,It.w))}for(ut=ft.length;ut<dt;++ut)Ve.disableVertexAttribArray(ut);(ut=ze.getElements(this.elements))?Ve.bindBuffer(34963,ut.buffer.buffer):Ve.bindBuffer(34963,null)},tt.prototype.refresh=function(){var ut=We.oes_vertex_array_object;ut&&(ut.bindVertexArrayOES(this.vao),this.bindAttrs(),kt.currentVAO=null,ut.bindVertexArrayOES(null))},tt.prototype.destroy=function(){if(this.vao){var ut=We.oes_vertex_array_object;this===kt.currentVAO&&(kt.currentVAO=null,ut.bindVertexArrayOES(null)),ut.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ct[this.id]&&(delete ct[this.id],--ot.vaoCount)},kt}function C(Ve,We,nt,ot){function Ie(ft,bt,It,zt){this.name=ft,this.id=bt,this.location=It,this.info=zt}function ze(ft,bt){for(var It=0;It<ft.length;++It)if(ft[It].id===bt.id)return void(ft[It].location=bt.location);ft.push(bt)}function et(ft,bt,It){if(!(Rt=(It=ft===35632?pt:vt)[bt])){var zt=We.str(bt),Rt=Ve.createShader(ft);Ve.shaderSource(Rt,zt),Ve.compileShader(Rt),It[bt]=Rt}return Rt}function tt(ft,bt){this.id=ut++,this.fragId=ft,this.vertId=bt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,ot.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function dt(ft,bt,It){var zt;zt=et(35632,ft.fragId);var Rt=et(35633,ft.vertId);if(bt=ft.program=Ve.createProgram(),Ve.attachShader(bt,zt),Ve.attachShader(bt,Rt),It)for(zt=0;zt<It.length;++zt)Rt=It[zt],Ve.bindAttribLocation(bt,Rt[0],Rt[1]);Ve.linkProgram(bt),Rt=Ve.getProgramParameter(bt,35718),ot.profile&&(ft.stats.uniformsCount=Rt);var Jt=ft.uniforms;for(zt=0;zt<Rt;++zt)if(It=Ve.getActiveUniform(bt,zt))if(1<It.size)for(var qt=0;qt<It.size;++qt){var Wt=It.name.replace("[0]","["+qt+"]");ze(Jt,new Ie(Wt,We.id(Wt),Ve.getUniformLocation(bt,Wt),It))}else ze(Jt,new Ie(It.name,We.id(It.name),Ve.getUniformLocation(bt,It.name),It));for(Rt=Ve.getProgramParameter(bt,35721),ot.profile&&(ft.stats.attributesCount=Rt),ft=ft.attributes,zt=0;zt<Rt;++zt)(It=Ve.getActiveAttrib(bt,zt))&&ze(ft,new Ie(It.name,We.id(It.name),Ve.getAttribLocation(bt,It.name),It))}var pt={},vt={},ct={},kt=[],ut=0;return ot.profile&&(nt.getMaxUniformsCount=function(){var ft=0;return kt.forEach(function(bt){bt.stats.uniformsCount>ft&&(ft=bt.stats.uniformsCount)}),ft},nt.getMaxAttributesCount=function(){var ft=0;return kt.forEach(function(bt){bt.stats.attributesCount>ft&&(ft=bt.stats.attributesCount)}),ft}),{clear:function(){var ft=Ve.deleteShader.bind(Ve);xe(pt).forEach(ft),pt={},xe(vt).forEach(ft),vt={},kt.forEach(function(bt){Ve.deleteProgram(bt.program)}),kt.length=0,ct={},nt.shaderCount=0},program:function(ft,bt,It,zt){var Rt=ct[bt];Rt||(Rt=ct[bt]={});var Jt=Rt[ft];if(Jt&&(Jt.refCount++,!zt))return Jt;var qt=new tt(bt,ft);return nt.shaderCount++,dt(qt,It,zt),Jt||(Rt[ft]=qt),kt.push(qt),ee(qt,{destroy:function(){if(qt.refCount--,0>=qt.refCount){Ve.deleteProgram(qt.program);var Wt=kt.indexOf(qt);kt.splice(Wt,1),nt.shaderCount--}0>=Rt[qt.vertId].refCount&&(Ve.deleteShader(vt[qt.vertId]),delete vt[qt.vertId],delete ct[qt.fragId][qt.vertId]),Object.keys(ct[qt.fragId]).length||(Ve.deleteShader(pt[qt.fragId]),delete pt[qt.fragId],delete ct[qt.fragId])}})},restore:function(){pt={},vt={};for(var ft=0;ft<kt.length;++ft)dt(kt[ft],null,kt[ft].attributes.map(function(bt){return[bt.location,bt.name]}))},shader:et,frag:-1,vert:-1}}function P(Ve,We,nt,ot,Ie,ze,et){function tt(dt){var pt;pt=We.next===null?5121:We.next.colorAttachments[0].texture._texture.type;var vt=0,ct=0,kt=ot.framebufferWidth,ut=ot.framebufferHeight,ft=null;return we(dt)?ft=dt:dt&&(vt=0|dt.x,ct=0|dt.y,kt=0|(dt.width||ot.framebufferWidth-vt),ut=0|(dt.height||ot.framebufferHeight-ct),ft=dt.data||null),nt(),dt=kt*ut*4,ft||(pt===5121?ft=new Uint8Array(dt):pt===5126&&(ft=ft||new Float32Array(dt))),Ve.pixelStorei(3333,4),Ve.readPixels(vt,ct,kt,ut,6408,pt,ft),ft}return function(dt){return dt&&"framebuffer"in dt?function(pt){var vt;return We.setFBO({framebuffer:pt.framebuffer},function(){vt=tt(pt)}),vt}(dt):tt(dt)}}function D(Ve,We){return Ve>>>We|Ve<<32-We}function G(Ve,We){var nt=(65535&Ve)+(65535&We);return(Ve>>16)+(We>>16)+(nt>>16)<<16|65535&nt}function I(Ve){return Array.prototype.slice.call(Ve)}function H(Ve){return I(Ve).join("")}function N(Ve){function We(){var vt=[],ct=[];return ee(function(){vt.push.apply(vt,I(arguments))},{def:function(){var kt="v"+Ie++;return ct.push(kt),0<arguments.length&&(vt.push(kt,"="),vt.push.apply(vt,I(arguments)),vt.push(";")),kt},toString:function(){return H([0<ct.length?"var "+ct.join(",")+";":"",H(vt)])}})}function nt(){function vt(bt,It){kt(bt,It,"=",ct.def(bt,It),";")}var ct=We(),kt=We(),ut=ct.toString,ft=kt.toString;return ee(function(){ct.apply(ct,I(arguments))},{def:ct.def,entry:ct,exit:kt,save:vt,set:function(bt,It,zt){vt(bt,It),ct(bt,It,"=",zt,";")},toString:function(){return ut()+ft()}})}var ot=Ve&&Ve.cache,Ie=0,ze=[],et=[],tt=[],dt=We(),pt={};return{global:dt,link:function(vt,ct){var kt=ct&&ct.stable;if(!kt){for(var ut=0;ut<et.length;++ut)if(et[ut]===vt&&!tt[ut])return ze[ut]}return ut="g"+Ie++,ze.push(ut),et.push(vt),tt.push(kt),ut},block:We,proc:function(vt,ct){function kt(){var It="a"+ut.length;return ut.push(It),It}var ut=[];ct=ct||0;for(var ft=0;ft<ct;++ft)kt();var bt=(ft=nt()).toString;return pt[vt]=ee(ft,{arg:kt,toString:function(){return H(["function(",ut.join(),"){",bt(),"}"])}})},scope:nt,cond:function(){var vt=H(arguments),ct=nt(),kt=nt(),ut=ct.toString,ft=kt.toString;return ee(ct,{then:function(){return ct.apply(ct,I(arguments)),this},else:function(){return kt.apply(kt,I(arguments)),this},toString:function(){var bt=ft();return bt&&(bt="else{"+bt+"}"),H(["if(",vt,"){",ut(),"}",bt])}})},compile:function(){var vt=['"use strict";',dt,"return {"];Object.keys(pt).forEach(function(ut){vt.push('"',ut,'":',pt[ut].toString(),",")}),vt.push("}");var ct,kt=H(vt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return ot&&(ct=function(ut){for(var ft,bt="",It=0;It<ut.length;It++)ft=ut.charCodeAt(It),bt+="0123456789abcdef".charAt(ft>>>4&15)+"0123456789abcdef".charAt(15&ft);return bt}(function(ut){for(var ft=Array(ut.length>>2),bt=0;bt<ft.length;bt++)ft[bt]=0;for(bt=0;bt<8*ut.length;bt+=8)ft[bt>>5]|=(255&ut.charCodeAt(bt/8))<<24-bt%32;var It,zt,Rt,Jt,qt,Wt,jt,fn,xn,un,Ht,nn=8*ut.length;for(ut=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],bt=Array(64),ft[nn>>5]|=128<<24-nn%32,ft[15+(nn+64>>9<<4)]=nn,fn=0;fn<ft.length;fn+=16){for(nn=ut[0],It=ut[1],zt=ut[2],Rt=ut[3],Jt=ut[4],qt=ut[5],Wt=ut[6],jt=ut[7],xn=0;64>xn;xn++){var Kt;16>xn?bt[xn]=ft[xn+fn]:(un=xn,Ht=G(Ht=D(Ht=bt[xn-2],17)^D(Ht,19)^Ht>>>10,bt[xn-7]),Kt=D(Kt=bt[xn-15],7)^D(Kt,18)^Kt>>>3,bt[un]=G(G(Ht,Kt),bt[xn-16])),un=G(G(G(G(jt,un=D(un=Jt,6)^D(un,11)^D(un,25)),Jt&qt^~Jt&Wt),rt[xn]),bt[xn]),Ht=G(jt=D(jt=nn,2)^D(jt,13)^D(jt,22),nn&It^nn&zt^It&zt),jt=Wt,Wt=qt,qt=Jt,Jt=G(Rt,un),Rt=zt,zt=It,It=nn,nn=G(un,Ht)}ut[0]=G(nn,ut[0]),ut[1]=G(It,ut[1]),ut[2]=G(zt,ut[2]),ut[3]=G(Rt,ut[3]),ut[4]=G(Jt,ut[4]),ut[5]=G(qt,ut[5]),ut[6]=G(Wt,ut[6]),ut[7]=G(jt,ut[7])}for(ft="",bt=0;bt<32*ut.length;bt+=8)ft+=String.fromCharCode(ut[bt>>5]>>>24-bt%32&255);return ft}(function(ut){for(var ft,bt,It="",zt=-1;++zt<ut.length;)ft=ut.charCodeAt(zt),bt=zt+1<ut.length?ut.charCodeAt(zt+1):0,55296<=ft&&56319>=ft&&56320<=bt&&57343>=bt&&(ft=65536+((1023&ft)<<10)+(1023&bt),zt++),127>=ft?It+=String.fromCharCode(ft):2047>=ft?It+=String.fromCharCode(192|ft>>>6&31,128|63&ft):65535>=ft?It+=String.fromCharCode(224|ft>>>12&15,128|ft>>>6&63,128|63&ft):2097151>=ft&&(It+=String.fromCharCode(240|ft>>>18&7,128|ft>>>12&63,128|ft>>>6&63,128|63&ft));return It}(kt))),ot[ct])?ot[ct].apply(null,et):(kt=Function.apply(null,ze.concat(kt)),ot&&(ot[ct]=kt),kt.apply(null,et))}}}function F(Ve){return Array.isArray(Ve)||we(Ve)||e(Ve)}function V(Ve){return Ve.sort(function(We,nt){return We==="viewport"?-1:nt==="viewport"?1:We<nt?-1:1})}function q(Ve,We,nt,ot){this.thisDep=Ve,this.contextDep=We,this.propDep=nt,this.append=ot}function te(Ve){return Ve&&!(Ve.thisDep||Ve.contextDep||Ve.propDep)}function $(Ve){return new q(!1,!1,!1,Ve)}function W(Ve,We){var nt=Ve.type;if(nt===0)return new q(!0,1<=(nt=Ve.data.length),2<=nt,We);if(nt===4)return new q((nt=Ve.data).thisDep,nt.contextDep,nt.propDep,We);if(nt===5)return new q(!1,!1,!1,We);if(nt===6){for(var ot=nt=!1,Ie=!1,ze=0;ze<Ve.data.length;++ze){var et=Ve.data[ze];et.type===1?Ie=!0:et.type===2?ot=!0:et.type===3?nt=!0:et.type===0?(nt=!0,1<=(et=et.data)&&(ot=!0),2<=et&&(Ie=!0)):et.type===4&&(nt=nt||et.data.thisDep,ot=ot||et.data.contextDep,Ie=Ie||et.data.propDep)}return new q(nt,ot,Ie,We)}return new q(nt===3,nt===2,nt===1,We)}function Z(Ve,We,nt,ot,Ie,ze,et,tt,dt,pt,vt,ct,kt,ut,ft,bt){function It(At){return At.replace(".","_")}function zt(At,Gt,$t){var mn=It(At);Vn.push(At),kn[mn]=gn[mn]=!!$t,In[mn]=Gt}function Rt(At,Gt,$t){var mn=It(At);Vn.push(At),Array.isArray($t)?(gn[mn]=$t.slice(),kn[mn]=$t.slice()):gn[mn]=kn[mn]=$t,Dn[mn]=Gt}function Jt(){var At=N({cache:ft}),Gt=At.link,$t=At.global;At.id=bn++,At.batchId="0";var mn=Gt(Kn),yn=At.shared={props:"a0"};Object.keys(Kn).forEach(function(an){yn[an]=$t.def(mn,".",an)});var An=At.next={},sn=At.current={};Object.keys(Dn).forEach(function(an){Array.isArray(gn[an])&&(An[an]=$t.def(yn.next,".",an),sn[an]=$t.def(yn.current,".",an))});var Yt=At.constants={};Object.keys(Ut).forEach(function(an){Yt[an]=$t.def(JSON.stringify(Ut[an]))}),At.invoke=function(an,ln){switch(ln.type){case 0:var Sn=["this",yn.context,yn.props,At.batchId];return an.def(Gt(ln.data),".call(",Sn.slice(0,Math.max(ln.data.length+1,4)),")");case 1:return an.def(yn.props,ln.data);case 2:return an.def(yn.context,ln.data);case 3:return an.def("this",ln.data);case 4:return ln.data.append(At,an),ln.data.ref;case 5:return ln.data.toString();case 6:return ln.data.map(function(En){return At.invoke(an,En)})}},At.attribCache={};var Xt={};return At.scopeAttrib=function(an){if((an=We.id(an))in Xt)return Xt[an];var ln=pt.scope[an];return ln||(ln=pt.scope[an]=new Gn),Xt[an]=Gt(ln)},At}function qt(At,Gt){var $t=At.static,mn=At.dynamic;if("framebuffer"in $t){var yn=$t.framebuffer;return yn?(yn=tt.getFramebuffer(yn),$(function(sn,Yt){var Xt=sn.link(yn),an=sn.shared;return Yt.set(an.framebuffer,".next",Xt),an=an.context,Yt.set(an,".framebufferWidth",Xt+".width"),Yt.set(an,".framebufferHeight",Xt+".height"),Xt})):$(function(sn,Yt){var Xt=sn.shared;return Yt.set(Xt.framebuffer,".next","null"),Xt=Xt.context,Yt.set(Xt,".framebufferWidth",Xt+".drawingBufferWidth"),Yt.set(Xt,".framebufferHeight",Xt+".drawingBufferHeight"),"null"})}if("framebuffer"in mn){var An=mn.framebuffer;return W(An,function(sn,Yt){var Xt=sn.invoke(Yt,An),an=sn.shared,ln=an.framebuffer;return Xt=Yt.def(ln,".getFramebuffer(",Xt,")"),Yt.set(ln,".next",Xt),an=an.context,Yt.set(an,".framebufferWidth",Xt+"?"+Xt+".width:"+an+".drawingBufferWidth"),Yt.set(an,".framebufferHeight",Xt+"?"+Xt+".height:"+an+".drawingBufferHeight"),Xt})}return null}function Wt(At,Gt,$t){function mn(an){if(an in yn){var ln=We.id(yn[an]);return(an=$(function(){return ln})).id=ln,an}if(an in An){var Sn=An[an];return W(Sn,function(En,jn){var Fn=En.invoke(jn,Sn);return jn.def(En.shared.strings,".id(",Fn,")")})}return null}var yn=At.static,An=At.dynamic,sn=mn("frag"),Yt=mn("vert"),Xt=null;return te(sn)&&te(Yt)?(Xt=vt.program(Yt.id,sn.id,null,$t),At=$(function(an,ln){return an.link(Xt)})):At=new q(sn&&sn.thisDep||Yt&&Yt.thisDep,sn&&sn.contextDep||Yt&&Yt.contextDep,sn&&sn.propDep||Yt&&Yt.propDep,function(an,ln){var Sn,En,jn=an.shared.shader;return Sn=sn?sn.append(an,ln):ln.def(jn,".","frag"),En=Yt?Yt.append(an,ln):ln.def(jn,".","vert"),ln.def(jn+".program("+En+","+Sn+")")}),{frag:sn,vert:Yt,progVar:At,program:Xt}}function jt(At,Gt){function $t(Fn,Xn){if(Fn in mn){var Hn=0|mn[Fn];return Xn?An.offset=Hn:An.instances=Hn,$(function(er,tr){return Xn&&(er.OFFSET=Hn),Hn})}if(Fn in yn){var nr=yn[Fn];return W(nr,function(er,tr){var lr=er.invoke(tr,nr);return Xn&&(er.OFFSET=lr),lr})}if(Xn){if(Xt)return $(function(er,tr){return er.OFFSET=0});if(sn)return new q(Yt.thisDep,Yt.contextDep,Yt.propDep,function(er,tr){return tr.def(er.shared.vao+".currentVAO?"+er.shared.vao+".currentVAO.offset:0")})}else if(sn)return new q(Yt.thisDep,Yt.contextDep,Yt.propDep,function(er,tr){return tr.def(er.shared.vao+".currentVAO?"+er.shared.vao+".currentVAO.instances:-1")});return null}var mn=At.static,yn=At.dynamic,An={},sn=!1,Yt=function(){if("vao"in mn){var Fn=mn.vao;return Fn!==null&&pt.getVAO(Fn)===null&&(Fn=pt.createVAO(Fn)),sn=!0,An.vao=Fn,$(function(Hn){var nr=pt.getVAO(Fn);return nr?Hn.link(nr):"null"})}if("vao"in yn){sn=!0;var Xn=yn.vao;return W(Xn,function(Hn,nr){var er=Hn.invoke(nr,Xn);return nr.def(Hn.shared.vao+".getVAO("+er+")")})}return null}(),Xt=!1,an=function(){if("elements"in mn){var Fn=mn.elements;if(An.elements=Fn,F(Fn)){var Xn=An.elements=ze.create(Fn,!0);Fn=ze.getElements(Xn),Xt=!0}else Fn&&(Fn=ze.getElements(Fn),Xt=!0);return Xn=$(function(nr,er){if(Fn){var tr=nr.link(Fn);return nr.ELEMENTS=tr}return nr.ELEMENTS=null}),Xn.value=Fn,Xn}if("elements"in yn){Xt=!0;var Hn=yn.elements;return W(Hn,function(nr,er){var tr=(lr=nr.shared).isBufferArgs,lr=lr.elements,ur=nr.invoke(er,Hn),br=er.def("null");return tr=er.def(tr,"(",ur,")"),ur=nr.cond(tr).then(br,"=",lr,".createStream(",ur,");").else(br,"=",lr,".getElements(",ur,");"),er.entry(ur),er.exit(nr.cond(tr).then(lr,".destroyStream(",br,");")),nr.ELEMENTS=br})}return sn?new q(Yt.thisDep,Yt.contextDep,Yt.propDep,function(nr,er){return er.def(nr.shared.vao+".currentVAO?"+nr.shared.elements+".getElements("+nr.shared.vao+".currentVAO.elements):null")}):null}(),ln=$t("offset",!0),Sn=function(){if("primitive"in mn){var Fn=mn.primitive;return An.primitive=Fn,$(function(Hn,nr){return me[Fn]})}if("primitive"in yn){var Xn=yn.primitive;return W(Xn,function(Hn,nr){var er=Hn.constants.primTypes,tr=Hn.invoke(nr,Xn);return nr.def(er,"[",tr,"]")})}return Xt?te(an)?an.value?$(function(Hn,nr){return nr.def(Hn.ELEMENTS,".primType")}):$(function(){return 4}):new q(an.thisDep,an.contextDep,an.propDep,function(Hn,nr){var er=Hn.ELEMENTS;return nr.def(er,"?",er,".primType:",4)}):sn?new q(Yt.thisDep,Yt.contextDep,Yt.propDep,function(Hn,nr){return nr.def(Hn.shared.vao+".currentVAO?"+Hn.shared.vao+".currentVAO.primitive:4")}):null}(),En=function(){if("count"in mn){var Fn=0|mn.count;return An.count=Fn,$(function(){return Fn})}if("count"in yn){var Xn=yn.count;return W(Xn,function(Hn,nr){return Hn.invoke(nr,Xn)})}return Xt?te(an)?an?ln?new q(ln.thisDep,ln.contextDep,ln.propDep,function(Hn,nr){return nr.def(Hn.ELEMENTS,".vertCount-",Hn.OFFSET)}):$(function(Hn,nr){return nr.def(Hn.ELEMENTS,".vertCount")}):$(function(){return-1}):new q(an.thisDep||ln.thisDep,an.contextDep||ln.contextDep,an.propDep||ln.propDep,function(Hn,nr){var er=Hn.ELEMENTS;return Hn.OFFSET?nr.def(er,"?",er,".vertCount-",Hn.OFFSET,":-1"):nr.def(er,"?",er,".vertCount:-1")}):sn?new q(Yt.thisDep,Yt.contextDep,Yt.propDep,function(Hn,nr){return nr.def(Hn.shared.vao,".currentVAO?",Hn.shared.vao,".currentVAO.count:-1")}):null}(),jn=$t("instances",!1);return{elements:an,primitive:Sn,count:En,instances:jn,offset:ln,vao:Yt,vaoActive:sn,elementsActive:Xt,static:An}}function fn(At,Gt){var $t=At.static,mn=At.dynamic,yn={};return Object.keys($t).forEach(function(An){var sn=$t[An],Yt=We.id(An),Xt=new Gn;if(F(sn))Xt.state=1,Xt.buffer=Ie.getBuffer(Ie.create(sn,34962,!1,!0)),Xt.type=0;else if(ln=Ie.getBuffer(sn))Xt.state=1,Xt.buffer=ln,Xt.type=0;else if("constant"in sn){var an=sn.constant;Xt.buffer="null",Xt.state=2,typeof an=="number"?Xt.x=an:xt.forEach(function(Hn,nr){nr<an.length&&(Xt[Hn]=an[nr])})}else{var ln=F(sn.buffer)?Ie.getBuffer(Ie.create(sn.buffer,34962,!1,!0)):Ie.getBuffer(sn.buffer),Sn=0|sn.offset,En=0|sn.stride,jn=0|sn.size,Fn=!!sn.normalized,Xn=0;"type"in sn&&(Xn=Ae[sn.type]),sn=0|sn.divisor,Xt.buffer=ln,Xt.state=1,Xt.size=jn,Xt.normalized=Fn,Xt.type=Xn||ln.dtype,Xt.offset=Sn,Xt.stride=En,Xt.divisor=sn}yn[An]=$(function(Hn,nr){var er=Hn.attribCache;if(Yt in er)return er[Yt];var tr={isStream:!1};return Object.keys(Xt).forEach(function(lr){tr[lr]=Xt[lr]}),Xt.buffer&&(tr.buffer=Hn.link(Xt.buffer),tr.type=tr.type||tr.buffer+".dtype"),er[Yt]=tr})}),Object.keys(mn).forEach(function(An){var sn=mn[An];yn[An]=W(sn,function(Yt,Xt){function an(er){Xt(Fn[er],"=",ln,".",er,"|0;")}var ln=Yt.invoke(Xt,sn),Sn=Yt.shared,En=Yt.constants,jn=Sn.isBufferArgs,Fn=(Sn=Sn.buffer,{isStream:Xt.def(!1)}),Xn=new Gn;Xn.state=1,Object.keys(Xn).forEach(function(er){Fn[er]=Xt.def(""+Xn[er])});var Hn=Fn.buffer,nr=Fn.type;return Xt("if(",jn,"(",ln,")){",Fn.isStream,"=true;",Hn,"=",Sn,".createStream(",34962,",",ln,");",nr,"=",Hn,".dtype;","}else{",Hn,"=",Sn,".getBuffer(",ln,");","if(",Hn,"){",nr,"=",Hn,".dtype;",'}else if("constant" in ',ln,"){",Fn.state,"=",2,";","if(typeof "+ln+'.constant === "number"){',Fn[xt[0]],"=",ln,".constant;",xt.slice(1).map(function(er){return Fn[er]}).join("="),"=0;","}else{",xt.map(function(er,tr){return Fn[er]+"="+ln+".constant.length>"+tr+"?"+ln+".constant["+tr+"]:0;"}).join(""),"}}else{","if(",jn,"(",ln,".buffer)){",Hn,"=",Sn,".createStream(",34962,",",ln,".buffer);","}else{",Hn,"=",Sn,".getBuffer(",ln,".buffer);","}",nr,'="type" in ',ln,"?",En.glTypes,"[",ln,".type]:",Hn,".dtype;",Fn.normalized,"=!!",ln,".normalized;"),an("size"),an("offset"),an("stride"),an("divisor"),Xt("}}"),Xt.exit("if(",Fn.isStream,"){",Sn,".destroyStream(",Hn,");","}"),Fn})}),yn}function xn(At,Gt,$t,mn,yn){function An(Xn){var Hn=Yt[Xn];Hn&&(an[Xn]=Hn)}var sn=function(Xn,Hn){if(typeof(nr=Xn.static).frag=="string"&&typeof nr.vert=="string"){if(0<Object.keys(Hn.dynamic).length)return null;var nr=Hn.static,er=Object.keys(nr);if(0<er.length&&typeof nr[er[0]]=="number"){for(var tr=[],lr=0;lr<er.length;++lr)tr.push([0|nr[er[lr]],er[lr]]);return tr}}return null}(At,Gt),Yt=function(Xn,Hn,nr){function er(br){if(br in tr){var Zn=tr[br];br=!0;var pr,Sr,Gr=0|Zn.x,ai=0|Zn.y;return"width"in Zn?pr=0|Zn.width:br=!1,"height"in Zn?Sr=0|Zn.height:br=!1,new q(!br&&Hn&&Hn.thisDep,!br&&Hn&&Hn.contextDep,!br&&Hn&&Hn.propDep,function(ci,Kr){var bi=ci.shared.context,Ha=pr;"width"in Zn||(Ha=Kr.def(bi,".","framebufferWidth","-",Gr));var ha=Sr;return"height"in Zn||(ha=Kr.def(bi,".","framebufferHeight","-",ai)),[Gr,ai,Ha,ha]})}if(br in lr){var ni=lr[br];return br=W(ni,function(ci,Kr){var bi=ci.invoke(Kr,ni),Ha=ci.shared.context,ha=Kr.def(bi,".x|0"),eo=Kr.def(bi,".y|0");return[ha,eo,Kr.def('"width" in ',bi,"?",bi,".width|0:","(",Ha,".","framebufferWidth","-",ha,")"),bi=Kr.def('"height" in ',bi,"?",bi,".height|0:","(",Ha,".","framebufferHeight","-",eo,")")]}),Hn&&(br.thisDep=br.thisDep||Hn.thisDep,br.contextDep=br.contextDep||Hn.contextDep,br.propDep=br.propDep||Hn.propDep),br}return Hn?new q(Hn.thisDep,Hn.contextDep,Hn.propDep,function(ci,Kr){var bi=ci.shared.context;return[0,0,Kr.def(bi,".","framebufferWidth"),Kr.def(bi,".","framebufferHeight")]}):null}var tr=Xn.static,lr=Xn.dynamic;if(Xn=er("viewport")){var ur=Xn;Xn=new q(Xn.thisDep,Xn.contextDep,Xn.propDep,function(br,Zn){var pr=ur.append(br,Zn),Sr=br.shared.context;return Zn.set(Sr,".viewportWidth",pr[2]),Zn.set(Sr,".viewportHeight",pr[3]),pr})}return{viewport:Xn,scissor_box:er("scissor.box")}}(At,Sn=qt(At)),Xt=jt(At),an=function(Xn,Hn){var nr=Xn.static,er=Xn.dynamic,tr={};return Vn.forEach(function(lr){function ur(Zn,pr){if(lr in nr){var Sr=Zn(nr[lr]);tr[br]=$(function(){return Sr})}else if(lr in er){var Gr=er[lr];tr[br]=W(Gr,function(ai,ni){return pr(ai,ni,ai.invoke(ni,Gr))})}}var br=It(lr);switch(lr){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return ur(function(Zn){return Zn},function(Zn,pr,Sr){return Sr});case"depth.func":return ur(function(Zn){return Ot[Zn]},function(Zn,pr,Sr){return pr.def(Zn.constants.compareFuncs,"[",Sr,"]")});case"depth.range":return ur(function(Zn){return Zn},function(Zn,pr,Sr){return[pr.def("+",Sr,"[0]"),pr=pr.def("+",Sr,"[1]")]});case"blend.func":return ur(function(Zn){return[wt["srcRGB"in Zn?Zn.srcRGB:Zn.src],wt["dstRGB"in Zn?Zn.dstRGB:Zn.dst],wt["srcAlpha"in Zn?Zn.srcAlpha:Zn.src],wt["dstAlpha"in Zn?Zn.dstAlpha:Zn.dst]]},function(Zn,pr,Sr){function Gr(Kr,bi){return pr.def('"',Kr,bi,'" in ',Sr,"?",Sr,".",Kr,bi,":",Sr,".",Kr)}Zn=Zn.constants.blendFuncs;var ai=Gr("src","RGB"),ni=Gr("dst","RGB"),ci=(ai=pr.def(Zn,"[",ai,"]"),pr.def(Zn,"[",Gr("src","Alpha"),"]"));return[ai,ni=pr.def(Zn,"[",ni,"]"),ci,Zn=pr.def(Zn,"[",Gr("dst","Alpha"),"]")]});case"blend.equation":return ur(function(Zn){return typeof Zn=="string"?[dr[Zn],dr[Zn]]:typeof Zn=="object"?[dr[Zn.rgb],dr[Zn.alpha]]:void 0},function(Zn,pr,Sr){var Gr=Zn.constants.blendEquations,ai=pr.def(),ni=pr.def();return(Zn=Zn.cond("typeof ",Sr,'==="string"')).then(ai,"=",ni,"=",Gr,"[",Sr,"];"),Zn.else(ai,"=",Gr,"[",Sr,".rgb];",ni,"=",Gr,"[",Sr,".alpha];"),pr(Zn),[ai,ni]});case"blend.color":return ur(function(Zn){return b(4,function(pr){return+Zn[pr]})},function(Zn,pr,Sr){return b(4,function(Gr){return pr.def("+",Sr,"[",Gr,"]")})});case"stencil.mask":return ur(function(Zn){return 0|Zn},function(Zn,pr,Sr){return pr.def(Sr,"|0")});case"stencil.func":return ur(function(Zn){return[Ot[Zn.cmp||"keep"],Zn.ref||0,"mask"in Zn?Zn.mask:-1]},function(Zn,pr,Sr){return[Zn=pr.def('"cmp" in ',Sr,"?",Zn.constants.compareFuncs,"[",Sr,".cmp]",":",7680),pr.def(Sr,".ref|0"),pr=pr.def('"mask" in ',Sr,"?",Sr,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return ur(function(Zn){return[lr==="stencil.opBack"?1029:1028,Ct[Zn.fail||"keep"],Ct[Zn.zfail||"keep"],Ct[Zn.zpass||"keep"]]},function(Zn,pr,Sr){function Gr(ni){return pr.def('"',ni,'" in ',Sr,"?",ai,"[",Sr,".",ni,"]:",7680)}var ai=Zn.constants.stencilOps;return[lr==="stencil.opBack"?1029:1028,Gr("fail"),Gr("zfail"),Gr("zpass")]});case"polygonOffset.offset":return ur(function(Zn){return[0|Zn.factor,0|Zn.units]},function(Zn,pr,Sr){return[pr.def(Sr,".factor|0"),pr=pr.def(Sr,".units|0")]});case"cull.face":return ur(function(Zn){var pr=0;return Zn==="front"?pr=1028:Zn==="back"&&(pr=1029),pr},function(Zn,pr,Sr){return pr.def(Sr,'==="front"?',1028,":",1029)});case"frontFace":return ur(function(Zn){return Ye[Zn]},function(Zn,pr,Sr){return pr.def(Sr+'==="cw"?2304:2305')});case"colorMask":return ur(function(Zn){return Zn.map(function(pr){return!!pr})},function(Zn,pr,Sr){return b(4,function(Gr){return"!!"+Sr+"["+Gr+"]"})});case"sample.coverage":return ur(function(Zn){return["value"in Zn?Zn.value:1,!!Zn.invert]},function(Zn,pr,Sr){return[pr.def('"value" in ',Sr,"?+",Sr,".value:1"),pr=pr.def("!!",Sr,".invert")]})}}),tr}(At),ln=Wt(At,0,sn);An("viewport"),An(It("scissor.box"));var Sn,En=0<Object.keys(an).length;if((Sn={framebuffer:Sn,draw:Xt,shader:ln,state:an,dirty:En,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(Xn){var Hn,nr=Xn.static;if(Xn=Xn.dynamic,"profile"in nr){var er=!!nr.profile;(Hn=$(function(lr,ur){return er})).enable=er}else if("profile"in Xn){var tr=Xn.profile;Hn=W(tr,function(lr,ur){return lr.invoke(ur,tr)})}return Hn}(At),Sn.uniforms=function(Xn,Hn){var nr=Xn.static,er=Xn.dynamic,tr={};return Object.keys(nr).forEach(function(lr){var ur,br=nr[lr];if(typeof br=="number"||typeof br=="boolean")ur=$(function(){return br});else if(typeof br=="function"){var Zn=br._reglType;Zn==="texture2d"||Zn==="textureCube"?ur=$(function(pr){return pr.link(br)}):Zn!=="framebuffer"&&Zn!=="framebufferCube"||(ur=$(function(pr){return pr.link(br.color[0])}))}else x(br)&&(ur=$(function(pr){return pr.global.def("[",b(br.length,function(Sr){return br[Sr]}),"]")}));ur.value=br,tr[lr]=ur}),Object.keys(er).forEach(function(lr){var ur=er[lr];tr[lr]=W(ur,function(br,Zn){return br.invoke(Zn,ur)})}),tr}($t),Sn.drawVAO=Sn.scopeVAO=Xt.vao,!Sn.drawVAO&&ln.program&&!sn&&nt.angle_instanced_arrays&&Xt.static.elements){var jn=!0;if(At=ln.program.attributes.map(function(Xn){return Xn=Gt.static[Xn],jn=jn&&!!Xn,Xn}),jn&&0<At.length){var Fn=pt.getVAO(pt.createVAO({attributes:At,elements:Xt.static.elements}));Sn.drawVAO=new q(null,null,null,function(Xn,Hn){return Xn.link(Fn)}),Sn.useVAO=!0}}return sn?Sn.useVAO=!0:Sn.attributes=fn(Gt),Sn.context=function(Xn){var Hn=Xn.static,nr=Xn.dynamic,er={};return Object.keys(Hn).forEach(function(tr){var lr=Hn[tr];er[tr]=$(function(ur,br){return typeof lr=="number"||typeof lr=="boolean"?""+lr:ur.link(lr)})}),Object.keys(nr).forEach(function(tr){var lr=nr[tr];er[tr]=W(lr,function(ur,br){return ur.invoke(br,lr)})}),er}(mn),Sn}function un(At,Gt,$t){var mn=At.shared.context,yn=At.scope();Object.keys($t).forEach(function(An){Gt.save(mn,"."+An);var sn=$t[An].append(At,Gt);Array.isArray(sn)?yn(mn,".",An,"=[",sn.join(),"];"):yn(mn,".",An,"=",sn,";")}),Gt(yn)}function Ht(At,Gt,$t,mn){var yn,An=(Yt=At.shared).gl,sn=Yt.framebuffer;tn&&(yn=Gt.def(Yt.extensions,".webgl_draw_buffers"));var Yt=(Xt=At.constants).drawBuffer,Xt=Xt.backBuffer;At=$t?$t.append(At,Gt):Gt.def(sn,".next"),mn||Gt("if(",At,"!==",sn,".cur){"),Gt("if(",At,"){",An,".bindFramebuffer(",36160,",",At,".framebuffer);"),tn&&Gt(yn,".drawBuffersWEBGL(",Yt,"[",At,".colorAttachments.length]);"),Gt("}else{",An,".bindFramebuffer(",36160,",null);"),tn&&Gt(yn,".drawBuffersWEBGL(",Xt,");"),Gt("}",sn,".cur=",At,";"),mn||Gt("}")}function nn(At,Gt,$t){var mn=At.shared,yn=mn.gl,An=At.current,sn=At.next,Yt=mn.current,Xt=mn.next,an=At.cond(Yt,".dirty");Vn.forEach(function(ln){var Sn,En;if(!((ln=It(ln))in $t.state))if(ln in sn){Sn=sn[ln],En=An[ln];var jn=b(gn[ln].length,function(Fn){return an.def(Sn,"[",Fn,"]")});an(At.cond(jn.map(function(Fn,Xn){return Fn+"!=="+En+"["+Xn+"]"}).join("||")).then(yn,".",Dn[ln],"(",jn,");",jn.map(function(Fn,Xn){return En+"["+Xn+"]="+Fn}).join(";"),";"))}else Sn=an.def(Xt,".",ln),jn=At.cond(Sn,"!==",Yt,".",ln),an(jn),ln in In?jn(At.cond(Sn).then(yn,".enable(",In[ln],");").else(yn,".disable(",In[ln],");"),Yt,".",ln,"=",Sn,";"):jn(yn,".",Dn[ln],"(",Sn,");",Yt,".",ln,"=",Sn,";")}),Object.keys($t.state).length===0&&an(Yt,".dirty=false;"),Gt(an)}function Kt(At,Gt,$t,mn){var yn,An=At.shared,sn=At.current,Yt=An.current,Xt=An.gl;V(Object.keys($t)).forEach(function(an){var ln=$t[an];if(!mn||mn(ln)){var Sn=ln.append(At,Gt);if(In[an]){var En=In[an];te(ln)?(yn=At.link(Sn,{stable:!0}),Gt(At.cond(yn).then(Xt,".enable(",En,");").else(Xt,".disable(",En,");")),Gt(Yt,".",an,"=",yn,";")):(Gt(At.cond(Sn).then(Xt,".enable(",En,");").else(Xt,".disable(",En,");")),Gt(Yt,".",an,"=",Sn,";"))}else if(x(Sn)){var jn=sn[an];Gt(Xt,".",Dn[an],"(",Sn,");",Sn.map(function(Fn,Xn){return jn+"["+Xn+"]="+Fn}).join(";"),";")}else te(ln)?(yn=At.link(Sn,{stable:!0}),Gt(Xt,".",Dn[an],"(",yn,");",Yt,".",an,"=",yn,";")):Gt(Xt,".",Dn[an],"(",Sn,");",Yt,".",an,"=",Sn,";")}})}function on(At,Gt){Bt&&(At.instancing=Gt.def(At.shared.extensions,".angle_instanced_arrays"))}function hn(At,Gt,$t,mn,yn){function An(){return typeof performance>"u"?"Date.now()":"performance.now()"}function sn(Xn){Xn(an=Gt.def(),"=",An(),";"),typeof yn=="string"?Xn(En,".count+=",yn,";"):Xn(En,".count++;"),ut&&(mn?Xn(ln=Gt.def(),"=",Fn,".getNumPendingQueries();"):Xn(Fn,".beginQuery(",En,");"))}function Yt(Xn){Xn(En,".cpuTime+=",An(),"-",an,";"),ut&&(mn?Xn(Fn,".pushScopeStats(",ln,",",Fn,".getNumPendingQueries(),",En,");"):Xn(Fn,".endQuery();"))}function Xt(Xn){var Hn=Gt.def(jn,".profile");Gt(jn,".profile=",Xn,";"),Gt.exit(jn,".profile=",Hn,";")}var an,ln,Sn=At.shared,En=At.stats,jn=Sn.current,Fn=Sn.timer;if($t=$t.profile){if(te($t))return void($t.enable?(sn(Gt),Yt(Gt.exit),Xt("true")):Xt("false"));Xt($t=$t.append(At,Gt))}else $t=Gt.def(jn,".profile");sn(Sn=At.block()),Gt("if(",$t,"){",Sn,"}"),Yt(At=At.block()),Gt.exit("if(",$t,"){",At,"}")}function dn(At,Gt,$t,mn,yn){function An(Yt,Xt,an){function ln(){Gt("if(!",Fn,".buffer){",En,".enableVertexAttribArray(",jn,");}");var er,tr=an.type;er=an.size?Gt.def(an.size,"||",Xt):Xt,Gt("if(",Fn,".type!==",tr,"||",Fn,".size!==",er,"||",nr.map(function(lr){return Fn+"."+lr+"!=="+an[lr]}).join("||"),"){",En,".bindBuffer(",34962,",",Xn,".buffer);",En,".vertexAttribPointer(",[jn,er,tr,an.normalized,an.stride,an.offset],");",Fn,".type=",tr,";",Fn,".size=",er,";",nr.map(function(lr){return Fn+"."+lr+"="+an[lr]+";"}).join(""),"}"),Bt&&(tr=an.divisor,Gt("if(",Fn,".divisor!==",tr,"){",At.instancing,".vertexAttribDivisorANGLE(",[jn,tr],");",Fn,".divisor=",tr,";}"))}function Sn(){Gt("if(",Fn,".buffer){",En,".disableVertexAttribArray(",jn,");",Fn,".buffer=null;","}if(",xt.map(function(er,tr){return Fn+"."+er+"!=="+Hn[tr]}).join("||"),"){",En,".vertexAttrib4f(",jn,",",Hn,");",xt.map(function(er,tr){return Fn+"."+er+"="+Hn[tr]+";"}).join(""),"}")}var En=sn.gl,jn=Gt.def(Yt,".location"),Fn=Gt.def(sn.attributes,"[",jn,"]");Yt=an.state;var Xn=an.buffer,Hn=[an.x,an.y,an.z,an.w],nr=["buffer","normalized","offset","stride"];Yt===1?ln():Yt===2?Sn():(Gt("if(",Yt,"===",1,"){"),ln(),Gt("}else{"),Sn(),Gt("}"))}var sn=At.shared;mn.forEach(function(Yt){var Xt,an=Yt.name,ln=$t.attributes[an];if(ln){if(!yn(ln))return;Xt=ln.append(At,Gt)}else{if(!yn(Xe))return;var Sn=At.scopeAttrib(an);Xt={},Object.keys(new Gn).forEach(function(En){Xt[En]=Gt.def(Sn,".",En)})}An(At.link(Yt),function(En){switch(En){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(Yt.info.type),Xt)})}function Mn(At,Gt,$t,mn,yn,An){for(var sn,Yt=At.shared,Xt=Yt.gl,an=0;an<mn.length;++an){var ln,Sn=(Fn=mn[an]).name,En=Fn.info.type,jn=$t.uniforms[Sn],Fn=At.link(Fn)+".location";if(jn){if(!yn(jn))continue;if(te(jn)){if(Sn=jn.value,En===35678||En===35680)Gt(Xt,".uniform1i(",Fn,",",(En=At.link(Sn._texture||Sn.color[0]._texture))+".bind());"),Gt.exit(En,".unbind();");else if(En===35674||En===35675||En===35676)jn=2,En===35675?jn=3:En===35676&&(jn=4),Gt(Xt,".uniformMatrix",jn,"fv(",Fn,",false,",Sn=At.global.def("new Float32Array(["+Array.prototype.slice.call(Sn)+"])"),");");else{switch(En){case 5126:sn="1f";break;case 35664:sn="2f";break;case 35665:sn="3f";break;case 35666:sn="4f";break;case 35670:case 5124:sn="1i";break;case 35671:case 35667:sn="2i";break;case 35672:case 35668:sn="3i";break;case 35673:case 35669:sn="4i"}Gt(Xt,".uniform",sn,"(",Fn,",",x(Sn)?Array.prototype.slice.call(Sn):Sn,");")}continue}ln=jn.append(At,Gt)}else{if(!yn(Xe))continue;ln=Gt.def(Yt.uniforms,"[",We.id(Sn),"]")}switch(En===35678?Gt("if(",ln,"&&",ln,'._reglType==="framebuffer"){',ln,"=",ln,".color[0];","}"):En===35680&&Gt("if(",ln,"&&",ln,'._reglType==="framebufferCube"){',ln,"=",ln,".color[0];","}"),Sn=1,En){case 35678:case 35680:En=Gt.def(ln,"._texture"),Gt(Xt,".uniform1i(",Fn,",",En,".bind());"),Gt.exit(En,".unbind();");continue;case 5124:case 35670:sn="1i";break;case 35667:case 35671:sn="2i",Sn=2;break;case 35668:case 35672:sn="3i",Sn=3;break;case 35669:case 35673:sn="4i",Sn=4;break;case 5126:sn="1f";break;case 35664:sn="2f",Sn=2;break;case 35665:sn="3f",Sn=3;break;case 35666:sn="4f",Sn=4;break;case 35674:sn="Matrix2fv";break;case 35675:sn="Matrix3fv";break;case 35676:sn="Matrix4fv"}if(sn.charAt(0)==="M"){Gt(Xt,".uniform",sn,"(",Fn,","),Fn=Math.pow(En-35674+2,2);var Xn=At.global.def("new Float32Array(",Fn,")");Array.isArray(ln)?Gt("false,(",b(Fn,function(nr){return Xn+"["+nr+"]="+ln[nr]}),",",Xn,")"):Gt("false,(Array.isArray(",ln,")||",ln," instanceof Float32Array)?",ln,":(",b(Fn,function(nr){return Xn+"["+nr+"]="+ln+"["+nr+"]"}),",",Xn,")"),Gt(");")}else{if(1<Sn){En=[];var Hn=[];for(jn=0;jn<Sn;++jn)Array.isArray(ln)?Hn.push(ln[jn]):Hn.push(Gt.def(ln+"["+jn+"]")),An&&En.push(Gt.def());An&&Gt("if(!",At.batchId,"||",En.map(function(nr,er){return nr+"!=="+Hn[er]}).join("||"),"){",En.map(function(nr,er){return nr+"="+Hn[er]+";"}).join("")),Gt(Xt,".uniform",sn,"(",Fn,",",Hn.join(","),");")}else An&&(En=Gt.def(),Gt("if(!",At.batchId,"||",En,"!==",ln,"){",En,"=",ln,";")),Gt(Xt,".uniform",sn,"(",Fn,",",ln,");");An&&Gt("}")}}}function Cn(At,Gt,$t,mn){function yn(tr){var lr=En[tr];return lr?lr.contextDep&&mn.contextDynamic||lr.propDep?lr.append(At,$t):lr.append(At,Gt):Gt.def(Sn,".",tr)}function An(){function tr(){$t(Xt,".drawElementsInstancedANGLE(",[Fn,Hn,nr,Xn+"<<(("+nr+"-5121)>>1)",Yt],");")}function lr(){$t(Xt,".drawArraysInstancedANGLE(",[Fn,Xn,Hn,Yt],");")}jn&&jn!=="null"?er?tr():($t("if(",jn,"){"),tr(),$t("}else{"),lr(),$t("}")):lr()}function sn(){function tr(){$t(ln+".drawElements("+[Fn,Hn,nr,Xn+"<<(("+nr+"-5121)>>1)"]+");")}function lr(){$t(ln+".drawArrays("+[Fn,Xn,Hn]+");")}jn&&jn!=="null"?er?tr():($t("if(",jn,"){"),tr(),$t("}else{"),lr(),$t("}")):lr()}var Yt,Xt,an=At.shared,ln=an.gl,Sn=an.draw,En=mn.draw,jn=function(){var tr=En.elements,lr=Gt;return tr?((tr.contextDep&&mn.contextDynamic||tr.propDep)&&(lr=$t),tr=tr.append(At,lr),En.elementsActive&&lr("if("+tr+")"+ln+".bindBuffer(34963,"+tr+".buffer.buffer);")):(tr=lr.def(),lr(tr,"=",Sn,".","elements",";","if(",tr,"){",ln,".bindBuffer(",34963,",",tr,".buffer.buffer);}","else if(",an.vao,".currentVAO){",tr,"=",At.shared.elements+".getElements("+an.vao,".currentVAO.elements);",cn?"":"if("+tr+")"+ln+".bindBuffer(34963,"+tr+".buffer.buffer);","}")),tr}(),Fn=yn("primitive"),Xn=yn("offset"),Hn=function(){var tr=En.count,lr=Gt;return tr?((tr.contextDep&&mn.contextDynamic||tr.propDep)&&(lr=$t),tr=tr.append(At,lr)):tr=lr.def(Sn,".","count"),tr}();if(typeof Hn=="number"){if(Hn===0)return}else $t("if(",Hn,"){"),$t.exit("}");Bt&&(Yt=yn("instances"),Xt=At.instancing);var nr=jn+".type",er=En.elements&&te(En.elements)&&!En.vaoActive;Bt&&(typeof Yt!="number"||0<=Yt)?typeof Yt=="string"?($t("if(",Yt,">0){"),An(),$t("}else if(",Yt,"<0){"),sn(),$t("}")):An():sn()}function Tn(At,Gt,$t,mn,yn){return yn=(Gt=Jt()).proc("body",yn),Bt&&(Gt.instancing=yn.def(Gt.shared.extensions,".angle_instanced_arrays")),At(Gt,yn,$t,mn),Gt.compile().body}function Pn(At,Gt,$t,mn){on(At,Gt),$t.useVAO?$t.drawVAO?Gt(At.shared.vao,".setVAO(",$t.drawVAO.append(At,Gt),");"):Gt(At.shared.vao,".setVAO(",At.shared.vao,".targetVAO);"):(Gt(At.shared.vao,".setVAO(null);"),dn(At,Gt,$t,mn.attributes,function(){return!0})),Mn(At,Gt,$t,mn.uniforms,function(){return!0},!1),Cn(At,Gt,Gt,$t)}function Wn(At,Gt,$t,mn){function yn(){return!0}At.batchId="a1",on(At,Gt),dn(At,Gt,$t,mn.attributes,yn),Mn(At,Gt,$t,mn.uniforms,yn,!1),Cn(At,Gt,Gt,$t)}function $n(At,Gt,$t,mn){function yn(Sn){return Sn.contextDep&&sn||Sn.propDep}function An(Sn){return!yn(Sn)}on(At,Gt);var sn=$t.contextDep,Yt=Gt.def(),Xt=Gt.def();At.shared.props=Xt,At.batchId=Yt;var an=At.scope(),ln=At.scope();Gt(an.entry,"for(",Yt,"=0;",Yt,"<","a1",";++",Yt,"){",Xt,"=","a0","[",Yt,"];",ln,"}",an.exit),$t.needsContext&&un(At,ln,$t.context),$t.needsFramebuffer&&Ht(At,ln,$t.framebuffer),Kt(At,ln,$t.state,yn),$t.profile&&yn($t.profile)&&hn(At,ln,$t,!1,!0),mn?($t.useVAO?$t.drawVAO?yn($t.drawVAO)?ln(At.shared.vao,".setVAO(",$t.drawVAO.append(At,ln),");"):an(At.shared.vao,".setVAO(",$t.drawVAO.append(At,an),");"):an(At.shared.vao,".setVAO(",At.shared.vao,".targetVAO);"):(an(At.shared.vao,".setVAO(null);"),dn(At,an,$t,mn.attributes,An),dn(At,ln,$t,mn.attributes,yn)),Mn(At,an,$t,mn.uniforms,An,!1),Mn(At,ln,$t,mn.uniforms,yn,!0),Cn(At,an,ln,$t)):(Gt=At.global.def("{}"),mn=$t.shader.progVar.append(At,ln),Xt=ln.def(mn,".id"),an=ln.def(Gt,"[",Xt,"]"),ln(At.shared.gl,".useProgram(",mn,".program);","if(!",an,"){",an,"=",Gt,"[",Xt,"]=",At.link(function(Sn){return Tn(Wn,At,$t,Sn,2)}),"(",mn,");}",an,".call(this,a0[",Yt,"],",Yt,");"))}function ar(At,Gt){function $t(Yt){var Xt=Gt.shader[Yt];Xt&&(Xt=Xt.append(At,mn),isNaN(Xt)?mn.set(yn.shader,"."+Yt,Xt):mn.set(yn.shader,"."+Yt,At.link(Xt,{stable:!0})))}var mn=At.proc("scope",3);At.batchId="a2";var yn=At.shared,An=yn.current;if(un(At,mn,Gt.context),Gt.framebuffer&&Gt.framebuffer.append(At,mn),V(Object.keys(Gt.state)).forEach(function(Yt){var Xt=Gt.state[Yt],an=Xt.append(At,mn);x(an)?an.forEach(function(ln,Sn){isNaN(ln)?mn.set(At.next[Yt],"["+Sn+"]",ln):mn.set(At.next[Yt],"["+Sn+"]",At.link(ln,{stable:!0}))}):te(Xt)?mn.set(yn.next,"."+Yt,At.link(an,{stable:!0})):mn.set(yn.next,"."+Yt,an)}),hn(At,mn,Gt,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(Yt){var Xt=Gt.draw[Yt];Xt&&(Xt=Xt.append(At,mn),isNaN(Xt)?mn.set(yn.draw,"."+Yt,Xt):mn.set(yn.draw,"."+Yt,At.link(Xt),{stable:!0}))}),Object.keys(Gt.uniforms).forEach(function(Yt){var Xt=Gt.uniforms[Yt].append(At,mn);Array.isArray(Xt)&&(Xt="["+Xt.map(function(an){return isNaN(an)?an:At.link(an,{stable:!0})})+"]"),mn.set(yn.uniforms,"["+At.link(We.id(Yt),{stable:!0})+"]",Xt)}),Object.keys(Gt.attributes).forEach(function(Yt){var Xt=Gt.attributes[Yt].append(At,mn),an=At.scopeAttrib(Yt);Object.keys(new Gn).forEach(function(ln){mn.set(an,"."+ln,Xt[ln])})}),Gt.scopeVAO){var sn=Gt.scopeVAO.append(At,mn);isNaN(sn)?mn.set(yn.vao,".targetVAO",sn):mn.set(yn.vao,".targetVAO",At.link(sn,{stable:!0}))}$t("vert"),$t("frag"),0<Object.keys(Gt.state).length&&(mn(An,".dirty=true;"),mn.exit(An,".dirty=true;")),mn("a1(",At.shared.context,",a0,",At.batchId,");")}function Qn(At,Gt,$t){var mn=Gt.static[$t];if(mn&&function(ln){if(typeof ln=="object"&&!x(ln)){for(var Sn=Object.keys(ln),En=0;En<Sn.length;++En)if(ae.isDynamic(ln[Sn[En]]))return!0;return!1}}(mn)){var yn=At.global,An=Object.keys(mn),sn=!1,Yt=!1,Xt=!1,an=At.global.def("{}");An.forEach(function(ln){var Sn=mn[ln];if(ae.isDynamic(Sn))typeof Sn=="function"&&(Sn=mn[ln]=ae.unbox(Sn)),ln=W(Sn,null),sn=sn||ln.thisDep,Xt=Xt||ln.propDep,Yt=Yt||ln.contextDep;else{switch(yn(an,".",ln,"="),typeof Sn){case"number":yn(Sn);break;case"string":yn('"',Sn,'"');break;case"object":Array.isArray(Sn)&&yn("[",Sn.join(),"]");break;default:yn(At.link(Sn))}yn(";")}}),Gt.dynamic[$t]=new ae.DynamicVariable(4,{thisDep:sn,contextDep:Yt,propDep:Xt,ref:an,append:function(ln,Sn){An.forEach(function(En){var jn=mn[En];ae.isDynamic(jn)&&(jn=ln.invoke(Sn,jn),Sn(an,".",En,"=",jn,";"))})}}),delete Gt.static[$t]}}var Gn=pt.Record,dr={add:32774,subtract:32778,"reverse subtract":32779};nt.ext_blend_minmax&&(dr.min=32775,dr.max=32776);var Bt=nt.angle_instanced_arrays,tn=nt.webgl_draw_buffers,cn=nt.oes_vertex_array_object,gn={dirty:!0,profile:bt.profile},kn={},Vn=[],In={},Dn={};zt("dither",3024),zt("blend.enable",3042),Rt("blend.color","blendColor",[0,0,0,0]),Rt("blend.equation","blendEquationSeparate",[32774,32774]),Rt("blend.func","blendFuncSeparate",[1,0,1,0]),zt("depth.enable",2929,!0),Rt("depth.func","depthFunc",513),Rt("depth.range","depthRange",[0,1]),Rt("depth.mask","depthMask",!0),Rt("colorMask","colorMask",[!0,!0,!0,!0]),zt("cull.enable",2884),Rt("cull.face","cullFace",1029),Rt("frontFace","frontFace",2305),Rt("lineWidth","lineWidth",1),zt("polygonOffset.enable",32823),Rt("polygonOffset.offset","polygonOffset",[0,0]),zt("sample.alpha",32926),zt("sample.enable",32928),Rt("sample.coverage","sampleCoverage",[1,!1]),zt("stencil.enable",2960),Rt("stencil.mask","stencilMask",-1),Rt("stencil.func","stencilFunc",[519,0,-1]),Rt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Rt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),zt("scissor.enable",3089),Rt("scissor.box","scissor",[0,0,Ve.drawingBufferWidth,Ve.drawingBufferHeight]),Rt("viewport","viewport",[0,0,Ve.drawingBufferWidth,Ve.drawingBufferHeight]);var Kn={gl:Ve,context:kt,strings:We,next:kn,current:gn,draw:ct,elements:ze,buffer:Ie,shader:vt,attributes:pt.state,vao:pt,uniforms:dt,framebuffer:tt,extensions:nt,timer:ut,isBufferArgs:F},Ut={primTypes:me,compareFuncs:Ot,blendFuncs:wt,blendEquations:dr,stencilOps:Ct,glTypes:Ae,orientationType:Ye};tn&&(Ut.backBuffer=[1029],Ut.drawBuffer=b(ot.maxDrawbuffers,function(At){return At===0?[0]:b(At,function(Gt){return 36064+Gt})}));var bn=0;return{next:kn,current:gn,procs:function(){var At=Jt(),Gt=At.proc("poll"),$t=At.proc("refresh"),mn=At.block();Gt(mn),$t(mn);var yn,An=(Xt=At.shared).gl,sn=Xt.next,Yt=Xt.current;mn(Yt,".dirty=false;"),Ht(At,Gt),Ht(At,$t,null,!0),Bt&&(yn=At.link(Bt)),nt.oes_vertex_array_object&&$t(At.link(nt.oes_vertex_array_object),".bindVertexArrayOES(null);");var Xt=$t.def(Xt.attributes),an=$t.def(0),ln=At.cond(an,".buffer");ln.then(An,".enableVertexAttribArray(i);",An,".bindBuffer(",34962,",",an,".buffer.buffer);",An,".vertexAttribPointer(i,",an,".size,",an,".type,",an,".normalized,",an,".stride,",an,".offset);").else(An,".disableVertexAttribArray(i);",An,".vertexAttrib4f(i,",an,".x,",an,".y,",an,".z,",an,".w);",an,".buffer=null;");var Sn=At.link(ot.maxAttributes,{stable:!0});return $t("for(var i=0;i<",Sn,";++i){",an,"=",Xt,"[i];",ln,"}"),Bt&&$t("for(var i=0;i<",Sn,";++i){",yn,".vertexAttribDivisorANGLE(i,",Xt,"[i].divisor);","}"),$t(At.shared.vao,".currentVAO=null;",At.shared.vao,".setVAO(",At.shared.vao,".targetVAO);"),Object.keys(In).forEach(function(En){var jn=In[En],Fn=mn.def(sn,".",En),Xn=At.block();Xn("if(",Fn,"){",An,".enable(",jn,")}else{",An,".disable(",jn,")}",Yt,".",En,"=",Fn,";"),$t(Xn),Gt("if(",Fn,"!==",Yt,".",En,"){",Xn,"}")}),Object.keys(Dn).forEach(function(En){var jn,Fn,Xn=Dn[En],Hn=gn[En],nr=At.block();nr(An,".",Xn,"("),x(Hn)?(Xn=Hn.length,jn=At.global.def(sn,".",En),Fn=At.global.def(Yt,".",En),nr(b(Xn,function(er){return jn+"["+er+"]"}),");",b(Xn,function(er){return Fn+"["+er+"]="+jn+"["+er+"];"}).join("")),Gt("if(",b(Xn,function(er){return jn+"["+er+"]!=="+Fn+"["+er+"]"}).join("||"),"){",nr,"}")):(jn=mn.def(sn,".",En),Fn=mn.def(Yt,".",En),nr(jn,");",Yt,".",En,"=",jn,";"),Gt("if(",jn,"!==",Fn,"){",nr,"}")),$t(nr)}),At.compile()}(),compile:function(At,Gt,$t,mn,yn){var An=Jt();An.stats=An.link(yn),Object.keys(Gt.static).forEach(function(Yt){Qn(An,Gt,Yt)}),Tt.forEach(function(Yt){Qn(An,At,Yt)});var sn=xn(At,Gt,$t,mn);return sn.shader.program&&(sn.shader.program.attributes.sort(function(Yt,Xt){return Yt.name<Xt.name?-1:1}),sn.shader.program.uniforms.sort(function(Yt,Xt){return Yt.name<Xt.name?-1:1})),function(Yt,Xt){var an=Yt.proc("draw",1);on(Yt,an),un(Yt,an,Xt.context),Ht(Yt,an,Xt.framebuffer),nn(Yt,an,Xt),Kt(Yt,an,Xt.state),hn(Yt,an,Xt,!1,!0);var ln=Xt.shader.progVar.append(Yt,an);if(an(Yt.shared.gl,".useProgram(",ln,".program);"),Xt.shader.program)Pn(Yt,an,Xt,Xt.shader.program);else{an(Yt.shared.vao,".setVAO(null);");var Sn=Yt.global.def("{}"),En=an.def(ln,".id"),jn=an.def(Sn,"[",En,"]");an(Yt.cond(jn).then(jn,".call(this,a0);").else(jn,"=",Sn,"[",En,"]=",Yt.link(function(Fn){return Tn(Pn,Yt,Xt,Fn,1)}),"(",ln,");",jn,".call(this,a0);"))}0<Object.keys(Xt.state).length&&an(Yt.shared.current,".dirty=true;"),Yt.shared.vao&&an(Yt.shared.vao,".setVAO(null);")}(An,sn),ar(An,sn),function(Yt,Xt){function an(Hn){return Hn.contextDep&&Sn||Hn.propDep}var ln=Yt.proc("batch",2);Yt.batchId="0",on(Yt,ln);var Sn=!1,En=!0;Object.keys(Xt.context).forEach(function(Hn){Sn=Sn||Xt.context[Hn].propDep}),Sn||(un(Yt,ln,Xt.context),En=!1);var jn=!1;if((Fn=Xt.framebuffer)?(Fn.propDep?Sn=jn=!0:Fn.contextDep&&Sn&&(jn=!0),jn||Ht(Yt,ln,Fn)):Ht(Yt,ln,null),Xt.state.viewport&&Xt.state.viewport.propDep&&(Sn=!0),nn(Yt,ln,Xt),Kt(Yt,ln,Xt.state,function(Hn){return!an(Hn)}),Xt.profile&&an(Xt.profile)||hn(Yt,ln,Xt,!1,"a1"),Xt.contextDep=Sn,Xt.needsContext=En,Xt.needsFramebuffer=jn,(En=Xt.shader.progVar).contextDep&&Sn||En.propDep)$n(Yt,ln,Xt,null);else if(En=En.append(Yt,ln),ln(Yt.shared.gl,".useProgram(",En,".program);"),Xt.shader.program)$n(Yt,ln,Xt,Xt.shader.program);else{ln(Yt.shared.vao,".setVAO(null);");var Fn=Yt.global.def("{}"),Xn=(jn=ln.def(En,".id"),ln.def(Fn,"[",jn,"]"));ln(Yt.cond(Xn).then(Xn,".call(this,a0,a1);").else(Xn,"=",Fn,"[",jn,"]=",Yt.link(function(Hn){return Tn($n,Yt,Xt,Hn,2)}),"(",En,");",Xn,".call(this,a0,a1);"))}0<Object.keys(Xt.state).length&&ln(Yt.shared.current,".dirty=true;"),Yt.shared.vao&&ln(Yt.shared.vao,".setVAO(null);")}(An,sn),ee(An.compile(),{destroy:function(){sn.shader.program.destroy()}})}}}function J(Ve,We){for(var nt=0;nt<Ve.length;++nt)if(Ve[nt]===We)return nt;return-1}var ee=function(Ve,We){for(var nt=Object.keys(We),ot=0;ot<nt.length;++ot)Ve[nt[ot]]=We[nt[ot]];return Ve},re=0,ae={DynamicVariable:z,define:function(Ve,We){return new z(Ve,S(We+""))},isDynamic:function(Ve){return typeof Ve=="function"&&!Ve._reglType||Ve instanceof z},unbox:function Ve(We,nt){return typeof We=="function"?new z(0,We):typeof We=="number"||typeof We=="boolean"?new z(5,We):Array.isArray(We)?new z(6,We.map(function(ot,Ie){return Ve(ot)})):We instanceof z?We:void 0},accessor:S},oe={next:typeof requestAnimationFrame=="function"?function(Ve){return requestAnimationFrame(Ve)}:function(Ve){return setTimeout(Ve,16)},cancel:typeof cancelAnimationFrame=="function"?function(Ve){return cancelAnimationFrame(Ve)}:clearTimeout},ce=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},pe=s();pe.zero=s();var ve=function(Ve,We){var nt=1;We.ext_texture_filter_anisotropic&&(nt=Ve.getParameter(34047));var ot=1,Ie=1;We.webgl_draw_buffers&&(ot=Ve.getParameter(34852),Ie=Ve.getParameter(36063));var ze=!!We.oes_texture_float;if(ze){ze=Ve.createTexture(),Ve.bindTexture(3553,ze),Ve.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var et=Ve.createFramebuffer();if(Ve.bindFramebuffer(36160,et),Ve.framebufferTexture2D(36160,36064,3553,ze,0),Ve.bindTexture(3553,null),Ve.checkFramebufferStatus(36160)!==36053)ze=!1;else{Ve.viewport(0,0,1,1),Ve.clearColor(1,0,0,1),Ve.clear(16384);var tt=pe.allocType(5126,4);Ve.readPixels(0,0,1,1,6408,5126,tt),Ve.getError()?ze=!1:(Ve.deleteFramebuffer(et),Ve.deleteTexture(ze),ze=tt[0]===1),pe.freeType(tt)}}return tt=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(tt=Ve.createTexture(),et=pe.allocType(5121,36),Ve.activeTexture(33984),Ve.bindTexture(34067,tt),Ve.texImage2D(34069,0,6408,3,3,0,6408,5121,et),pe.freeType(et),Ve.bindTexture(34067,null),Ve.deleteTexture(tt),tt=!Ve.getError()),{colorBits:[Ve.getParameter(3410),Ve.getParameter(3411),Ve.getParameter(3412),Ve.getParameter(3413)],depthBits:Ve.getParameter(3414),stencilBits:Ve.getParameter(3415),subpixelBits:Ve.getParameter(3408),extensions:Object.keys(We).filter(function(dt){return!!We[dt]}),maxAnisotropic:nt,maxDrawbuffers:ot,maxColorAttachments:Ie,pointSizeDims:Ve.getParameter(33901),lineWidthDims:Ve.getParameter(33902),maxViewportDims:Ve.getParameter(3386),maxCombinedTextureUnits:Ve.getParameter(35661),maxCubeMapSize:Ve.getParameter(34076),maxRenderbufferSize:Ve.getParameter(34024),maxTextureUnits:Ve.getParameter(34930),maxTextureSize:Ve.getParameter(3379),maxAttributes:Ve.getParameter(34921),maxVertexUniforms:Ve.getParameter(36347),maxVertexTextureUnits:Ve.getParameter(35660),maxVaryingVectors:Ve.getParameter(36348),maxFragmentUniforms:Ve.getParameter(36349),glsl:Ve.getParameter(35724),renderer:Ve.getParameter(7937),vendor:Ve.getParameter(7936),version:Ve.getParameter(7938),readFloat:ze,npotTextureCube:tt}},we=function(Ve){return Ve instanceof Uint8Array||Ve instanceof Uint16Array||Ve instanceof Uint32Array||Ve instanceof Int8Array||Ve instanceof Int16Array||Ve instanceof Int32Array||Ve instanceof Float32Array||Ve instanceof Float64Array||Ve instanceof Uint8ClampedArray},xe=function(Ve){return Object.keys(Ve).map(function(We){return Ve[We]})},ge={shape:function(Ve){for(var We=[];Ve.length;Ve=Ve[0])We.push(Ve.length);return We},flatten:function(Ve,We,nt,ot){var Ie=1;if(We.length)for(var ze=0;ze<We.length;++ze)Ie*=We[ze];else Ie=0;switch(nt=ot||pe.allocType(nt,Ie),We.length){case 0:break;case 1:for(ot=We[0],We=0;We<ot;++We)nt[We]=Ve[We];break;case 2:for(ot=We[0],We=We[1],ze=Ie=0;ze<ot;++ze)for(var et=Ve[ze],tt=0;tt<We;++tt)nt[Ie++]=et[tt];break;case 3:i(Ve,We[0],We[1],We[2],nt,0);break;default:r(Ve,We,0,nt,0)}return nt}},Oe={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ae={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Te={dynamic:35048,stream:35040,static:35044},se=ge.flatten,le=ge.shape,ne=[];ne[5120]=1,ne[5122]=2,ne[5124]=4,ne[5121]=1,ne[5123]=2,ne[5125]=4,ne[5126]=4;var me={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ee=new Float32Array(1),be=new Uint32Array(Ee.buffer),De=[9984,9986,9985,9987],Ue=[0,6409,6410,6407,6408],he={};he[6409]=he[6406]=he[6402]=1,he[34041]=he[6410]=2,he[6407]=he[35904]=3,he[6408]=he[35906]=4;var ke=g("HTMLCanvasElement"),_e=g("OffscreenCanvas"),Ce=g("CanvasRenderingContext2D"),Fe=g("ImageBitmap"),Re=g("HTMLImageElement"),He=g("HTMLVideoElement"),Ge=Object.keys(Oe).concat([ke,_e,Ce,Fe,Re,He]),$e=[];$e[5121]=1,$e[5126]=4,$e[36193]=2,$e[5123]=2,$e[5125]=4;var st=[];st[32854]=2,st[32855]=2,st[36194]=2,st[34041]=4,st[33776]=.5,st[33777]=.5,st[33778]=1,st[33779]=1,st[35986]=.5,st[35987]=1,st[34798]=1,st[35840]=.5,st[35841]=.25,st[35842]=.5,st[35843]=.25,st[36196]=.5;var Ke=[];Ke[32854]=2,Ke[32855]=2,Ke[36194]=2,Ke[33189]=2,Ke[36168]=1,Ke[34041]=4,Ke[35907]=4,Ke[34836]=16,Ke[34842]=8,Ke[34843]=6;var gt=function(Ve,We,nt,ot,Ie){function ze(ct){this.id=pt++,this.refCount=1,this.renderbuffer=ct,this.format=32854,this.height=this.width=0,Ie.profile&&(this.stats={size:0})}function et(ct){var kt=ct.renderbuffer;Ve.bindRenderbuffer(36161,null),Ve.deleteRenderbuffer(kt),ct.renderbuffer=null,ct.refCount=0,delete vt[ct.id],ot.renderbufferCount--}var tt={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};We.ext_srgb&&(tt.srgba=35907),We.ext_color_buffer_half_float&&(tt.rgba16f=34842,tt.rgb16f=34843),We.webgl_color_buffer_float&&(tt.rgba32f=34836);var dt=[];Object.keys(tt).forEach(function(ct){dt[tt[ct]]=ct});var pt=0,vt={};return ze.prototype.decRef=function(){0>=--this.refCount&&et(this)},Ie.profile&&(ot.getTotalRenderbufferSize=function(){var ct=0;return Object.keys(vt).forEach(function(kt){ct+=vt[kt].stats.size}),ct}),{create:function(ct,kt){function ut(bt,It){var zt=0,Rt=0,Jt=32854;if(typeof bt=="object"&&bt?("shape"in bt?(zt=0|(Rt=bt.shape)[0],Rt=0|Rt[1]):("radius"in bt&&(zt=Rt=0|bt.radius),"width"in bt&&(zt=0|bt.width),"height"in bt&&(Rt=0|bt.height)),"format"in bt&&(Jt=tt[bt.format])):typeof bt=="number"?(zt=0|bt,Rt=typeof It=="number"?0|It:zt):bt||(zt=Rt=1),zt!==ft.width||Rt!==ft.height||Jt!==ft.format)return ut.width=ft.width=zt,ut.height=ft.height=Rt,ft.format=Jt,Ve.bindRenderbuffer(36161,ft.renderbuffer),Ve.renderbufferStorage(36161,Jt,zt,Rt),Ie.profile&&(ft.stats.size=Ke[ft.format]*ft.width*ft.height),ut.format=dt[ft.format],ut}var ft=new ze(Ve.createRenderbuffer());return vt[ft.id]=ft,ot.renderbufferCount++,ut(ct,kt),ut.resize=function(bt,It){var zt=0|bt,Rt=0|It||zt;return zt===ft.width&&Rt===ft.height||(ut.width=ft.width=zt,ut.height=ft.height=Rt,Ve.bindRenderbuffer(36161,ft.renderbuffer),Ve.renderbufferStorage(36161,ft.format,zt,Rt),Ie.profile&&(ft.stats.size=Ke[ft.format]*ft.width*ft.height)),ut},ut._reglType="renderbuffer",ut._renderbuffer=ft,Ie.profile&&(ut.stats=ft.stats),ut.destroy=function(){ft.decRef()},ut},clear:function(){xe(vt).forEach(et)},restore:function(){xe(vt).forEach(function(ct){ct.renderbuffer=Ve.createRenderbuffer(),Ve.bindRenderbuffer(36161,ct.renderbuffer),Ve.renderbufferStorage(36161,ct.format,ct.width,ct.height)}),Ve.bindRenderbuffer(36161,null)}}},mt=[];mt[6408]=4,mt[6407]=3;var at=[];at[5121]=1,at[5126]=4,at[36193]=2;var rt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],xt=["x","y","z","w"],Tt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),wt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ot={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ct={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ye={cw:2304,ccw:2305},Xe=new q(!1,!1,!1,function(){});return function(Ve){function We(){if(Wn.length===0)qt&&qt.update(),Gn=null;else{Gn=oe.next(We),vt();for(var Bt=Wn.length-1;0<=Bt;--Bt){var tn=Wn[Bt];tn&&tn(xn,null,0)}ut.flush(),qt&&qt.update()}}function nt(){!Gn&&0<Wn.length&&(Gn=oe.next(We))}function ot(){Gn&&(oe.cancel(We),Gn=null)}function Ie(Bt){Bt.preventDefault(),ot(),$n.forEach(function(tn){tn()})}function ze(Bt){ut.getError(),bt.restore(),on.restore(),Ht.restore(),hn.restore(),dn.restore(),Mn.restore(),Kt.restore(),qt&&qt.restore(),Cn.procs.refresh(),nt(),ar.forEach(function(tn){tn()})}function et(Bt){function tn(At,Gt){var $t={},mn={};return Object.keys(At).forEach(function(yn){var An=At[yn];if(ae.isDynamic(An))mn[yn]=ae.unbox(An,yn);else{if(Gt&&Array.isArray(An)){for(var sn=0;sn<An.length;++sn)if(ae.isDynamic(An[sn]))return void(mn[yn]=ae.unbox(An,yn))}$t[yn]=An}}),{dynamic:mn,static:$t}}var cn=tn(Bt.context||{},!0),gn=tn(Bt.uniforms||{},!0),kn=tn(Bt.attributes||{},!1);Bt=tn(function(At){function Gt(mn){if(mn in $t){var yn=$t[mn];delete $t[mn],Object.keys(yn).forEach(function(An){$t[mn+"."+An]=yn[An]})}}var $t=ee({},At);return delete $t.uniforms,delete $t.attributes,delete $t.context,delete $t.vao,"stencil"in $t&&$t.stencil.op&&($t.stencil.opBack=$t.stencil.opFront=$t.stencil.op,delete $t.stencil.op),Gt("blend"),Gt("depth"),Gt("cull"),Gt("stencil"),Gt("polygonOffset"),Gt("scissor"),Gt("sample"),"vao"in At&&($t.vao=At.vao),$t}(Bt),!1);var Vn={gpuTime:0,cpuTime:0,count:0},In=Cn.compile(Bt,kn,gn,cn,Vn),Dn=In.draw,Kn=In.batch,Ut=In.scope,bn=[];return ee(function(At,Gt){var $t;if(typeof At=="function")return Ut.call(this,null,At,0);if(typeof Gt=="function")if(typeof At=="number")for($t=0;$t<At;++$t)Ut.call(this,null,Gt,$t);else{if(!Array.isArray(At))return Ut.call(this,At,Gt,0);for($t=0;$t<At.length;++$t)Ut.call(this,At[$t],Gt,$t)}else if(typeof At=="number"){if(0<At)return Kn.call(this,function(mn){for(;bn.length<mn;)bn.push(null);return bn}(0|At),0|At)}else{if(!Array.isArray(At))return Dn.call(this,At);if(At.length)return Kn.call(this,At,At.length)}},{stats:Vn,destroy:function(){In.destroy()}})}function tt(Bt,tn){var cn=0;Cn.procs.poll();var gn=tn.color;gn&&(ut.clearColor(+gn[0]||0,+gn[1]||0,+gn[2]||0,+gn[3]||0),cn|=16384),"depth"in tn&&(ut.clearDepth(+tn.depth),cn|=256),"stencil"in tn&&(ut.clearStencil(0|tn.stencil),cn|=1024),ut.clear(cn)}function dt(Bt){return Wn.push(Bt),nt(),{cancel:function(){var tn=J(Wn,Bt);Wn[tn]=function cn(){var gn=J(Wn,cn);Wn[gn]=Wn[Wn.length-1],--Wn.length,0>=Wn.length&&ot()}}}}function pt(){var Bt=Tn.viewport,tn=Tn.scissor_box;Bt[0]=Bt[1]=tn[0]=tn[1]=0,xn.viewportWidth=xn.framebufferWidth=xn.drawingBufferWidth=Bt[2]=tn[2]=ut.drawingBufferWidth,xn.viewportHeight=xn.framebufferHeight=xn.drawingBufferHeight=Bt[3]=tn[3]=ut.drawingBufferHeight}function vt(){xn.tick+=1,xn.time=kt(),pt(),Cn.procs.poll()}function ct(){hn.refresh(),pt(),Cn.procs.refresh(),qt&&qt.update()}function kt(){return(ce()-Wt)/1e3}if(!(Ve=T(Ve)))return null;var ut=Ve.gl,ft=ut.getContextAttributes();ut.isContextLost();var bt=function(Bt,tn){function cn(In){var Dn;In=In.toLowerCase();try{Dn=gn[In]=Bt.getExtension(In)}catch{}return!!Dn}for(var gn={},kn=0;kn<tn.extensions.length;++kn){var Vn=tn.extensions[kn];if(!cn(Vn))return tn.onDestroy(),tn.onDone('"'+Vn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return tn.optionalExtensions.forEach(cn),{extensions:gn,restore:function(){Object.keys(gn).forEach(function(In){if(gn[In]&&!cn(In))throw Error("(regl): error restoring extension "+In)})}}}(ut,Ve);if(!bt)return null;var It=function(){var Bt={"":0},tn=[""];return{id:function(cn){var gn=Bt[cn];return gn||(gn=Bt[cn]=tn.length,tn.push(cn),gn)},str:function(cn){return tn[cn]}}}(),zt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Rt=Ve.cachedCode||{},Jt=bt.extensions,qt=function(Bt,tn){function cn(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function gn(bn,At,Gt){var $t=In.pop()||new cn;$t.startQueryIndex=bn,$t.endQueryIndex=At,$t.sum=0,$t.stats=Gt,Dn.push($t)}if(!tn.ext_disjoint_timer_query)return null;var kn=[],Vn=[],In=[],Dn=[],Kn=[],Ut=[];return{beginQuery:function(bn){var At=kn.pop()||tn.ext_disjoint_timer_query.createQueryEXT();tn.ext_disjoint_timer_query.beginQueryEXT(35007,At),Vn.push(At),gn(Vn.length-1,Vn.length,bn)},endQuery:function(){tn.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:gn,update:function(){var bn,At;if((bn=Vn.length)!==0){Ut.length=Math.max(Ut.length,bn+1),Kn.length=Math.max(Kn.length,bn+1),Kn[0]=0;var Gt=Ut[0]=0;for(At=bn=0;At<Vn.length;++At){var $t=Vn[At];tn.ext_disjoint_timer_query.getQueryObjectEXT($t,34919)?(Gt+=tn.ext_disjoint_timer_query.getQueryObjectEXT($t,34918),kn.push($t)):Vn[bn++]=$t,Kn[At+1]=Gt,Ut[At+1]=bn}for(Vn.length=bn,At=bn=0;At<Dn.length;++At){var mn=(Gt=Dn[At]).startQueryIndex;$t=Gt.endQueryIndex,Gt.sum+=Kn[$t]-Kn[mn],mn=Ut[mn],($t=Ut[$t])===mn?(Gt.stats.gpuTime+=Gt.sum/1e6,In.push(Gt)):(Gt.startQueryIndex=mn,Gt.endQueryIndex=$t,Dn[bn++]=Gt)}Dn.length=bn}},getNumPendingQueries:function(){return Vn.length},clear:function(){kn.push.apply(kn,Vn);for(var bn=0;bn<kn.length;bn++)tn.ext_disjoint_timer_query.deleteQueryEXT(kn[bn]);Vn.length=0,kn.length=0},restore:function(){Vn.length=0,kn.length=0}}}(0,Jt),Wt=ce(),jt=ut.drawingBufferWidth,fn=ut.drawingBufferHeight,xn={tick:0,time:0,viewportWidth:jt,viewportHeight:fn,framebufferWidth:jt,framebufferHeight:fn,drawingBufferWidth:jt,drawingBufferHeight:fn,pixelRatio:Ve.pixelRatio},un=(jt={elements:null,primitive:4,count:-1,offset:0,instances:-1},ve(ut,Jt)),Ht=u(ut,zt,Ve,function(Bt){return Kt.destroyBuffer(Bt)}),nn=p(ut,Jt,Ht,zt),Kt=L(ut,Jt,un,zt,Ht,nn,jt),on=C(ut,It,zt,Ve),hn=A(ut,Jt,un,function(){Cn.procs.poll()},xn,zt,Ve),dn=gt(ut,Jt,0,zt,Ve),Mn=w(ut,Jt,un,hn,dn,zt),Cn=Z(ut,It,Jt,un,Ht,nn,0,Mn,{},Kt,on,jt,xn,qt,Rt,Ve),Tn=(It=P(ut,Mn,Cn.procs.poll,xn),Cn.next),Pn=ut.canvas,Wn=[],$n=[],ar=[],Qn=[Ve.onDestroy],Gn=null;Pn&&(Pn.addEventListener("webglcontextlost",Ie,!1),Pn.addEventListener("webglcontextrestored",ze,!1));var dr=Mn.setFBO=et({framebuffer:ae.define.call(null,1,"framebuffer")});return ct(),ft=ee(et,{clear:function(Bt){if("framebuffer"in Bt)if(Bt.framebuffer&&Bt.framebuffer_reglType==="framebufferCube")for(var tn=0;6>tn;++tn)dr(ee({framebuffer:Bt.framebuffer.faces[tn]},Bt),tt);else dr(Bt,tt);else tt(0,Bt)},prop:ae.define.bind(null,1),context:ae.define.bind(null,2),this:ae.define.bind(null,3),draw:et({}),buffer:function(Bt){return Ht.create(Bt,34962,!1,!1)},elements:function(Bt){return nn.create(Bt,!1)},texture:hn.create2D,cube:hn.createCube,renderbuffer:dn.create,framebuffer:Mn.create,framebufferCube:Mn.createCube,vao:Kt.createVAO,attributes:ft,frame:dt,on:function(Bt,tn){var cn;switch(Bt){case"frame":return dt(tn);case"lost":cn=$n;break;case"restore":cn=ar;break;case"destroy":cn=Qn}return cn.push(tn),{cancel:function(){for(var gn=0;gn<cn.length;++gn)if(cn[gn]===tn){cn[gn]=cn[cn.length-1],cn.pop();break}}}},limits:un,hasExtension:function(Bt){return 0<=un.extensions.indexOf(Bt.toLowerCase())},read:It,destroy:function(){Wn.length=0,ot(),Pn&&(Pn.removeEventListener("webglcontextlost",Ie),Pn.removeEventListener("webglcontextrestored",ze)),on.clear(),Mn.clear(),dn.clear(),Kt.clear(),hn.clear(),nn.clear(),Ht.clear(),qt&&qt.clear(),Qn.forEach(function(Bt){Bt()})},_gl:ut,_refresh:ct,poll:function(){vt(),qt&&qt.update()},now:kt,stats:zt,getCachedCode:function(){return Rt},preloadCachedCode:function(Bt){Object.entries(Bt).forEach(function(tn){Rt[tn[0]]=tn[1]})}}),Ve.onDone(null,ft),ft}}()},71665:function(Q,z,t){var S=t(12856),k=S.Buffer;function l(b,d){for(var s in b)d[s]=b[s]}function T(b,d,s){return k(b,d,s)}k.from&&k.alloc&&k.allocUnsafe&&k.allocUnsafeSlow?Q.exports=S:(l(S,z),z.Buffer=T),T.prototype=Object.create(k.prototype),l(k,T),T.from=function(b,d,s){if(typeof b=="number")throw new TypeError("Argument must not be a number");return k(b,d,s)},T.alloc=function(b,d,s){if(typeof b!="number")throw new TypeError("Argument must be a number");var e=k(b);return d!==void 0?typeof s=="string"?e.fill(d,s):e.fill(d):e.fill(0),e},T.allocUnsafe=function(b){if(typeof b!="number")throw new TypeError("Argument must be a number");return k(b)},T.allocUnsafeSlow=function(b){if(typeof b!="number")throw new TypeError("Argument must be a number");return S.SlowBuffer(b)}},21630:function(Q,z,t){Q.exports=k;var S=t(15398).EventEmitter;function k(){S.call(this)}t(42018)(k,S),k.Readable=t(40410),k.Writable=t(37493),k.Duplex=t(37865),k.Transform=t(74308),k.PassThrough=t(66897),k.finished=t(12726),k.pipeline=t(10168),k.Stream=k,k.prototype.pipe=function(l,T){var b=this;function d(o){l.writable&&l.write(o)===!1&&b.pause&&b.pause()}function s(){b.readable&&b.resume&&b.resume()}b.on("data",d),l.on("drain",s),l._isStdio||T&&T.end===!1||(b.on("end",i),b.on("close",r));var e=!1;function i(){e||(e=!0,l.end())}function r(){e||(e=!0,typeof l.destroy=="function"&&l.destroy())}function n(o){if(a(),S.listenerCount(this,"error")===0)throw o}function a(){b.removeListener("data",d),l.removeListener("drain",s),b.removeListener("end",i),b.removeListener("close",r),b.removeListener("error",n),l.removeListener("error",n),b.removeListener("end",a),b.removeListener("close",a),l.removeListener("close",a)}return b.on("error",n),l.on("error",n),b.on("end",a),b.on("close",a),l.on("close",a),l.emit("pipe",b),l}},74322:function(Q){var z={};function t(k,l,T){T||(T=Error);var b=function(d){var s,e;function i(r,n,a){return d.call(this,function(o,u,p){return typeof l=="string"?l:l(o,u,p)}(r,n,a))||this}return e=d,(s=i).prototype=Object.create(e.prototype),s.prototype.constructor=s,s.__proto__=e,i}(T);b.prototype.name=T.name,b.prototype.code=k,z[k]=b}function S(k,l){if(Array.isArray(k)){var T=k.length;return k=k.map(function(b){return String(b)}),T>2?"one of ".concat(l," ").concat(k.slice(0,T-1).join(", "),", or ")+k[T-1]:T===2?"one of ".concat(l," ").concat(k[0]," or ").concat(k[1]):"of ".concat(l," ").concat(k[0])}return"of ".concat(l," ").concat(String(k))}t("ERR_INVALID_OPT_VALUE",function(k,l){return'The value "'+l+'" is invalid for option "'+k+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(k,l,T){var b,d,s,e,i;if(typeof l=="string"&&(d="not ",l.substr(0,4)===d)?(b="must not be",l=l.replace(/^not /,"")):b="must be",function(n,a,o){return(o===void 0||o>n.length)&&(o=n.length),n.substring(o-9,o)===a}(k," argument"))s="The ".concat(k," ").concat(b," ").concat(S(l,"type"));else{var r=(typeof i!="number"&&(i=0),i+1>(e=k).length||e.indexOf(".",i)===-1?"argument":"property");s='The "'.concat(k,'" ').concat(r," ").concat(b," ").concat(S(l,"type"))}return s+". Received type ".concat(typeof T)},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(k){return"The "+k+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(k){return"Cannot call "+k+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(k){return"Unknown encoding: "+k},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Q.exports.q=z},37865:function(Q,z,t){var S=t(90386),k=Object.keys||function(n){var a=[];for(var o in n)a.push(o);return a};Q.exports=e;var l=t(40410),T=t(37493);t(42018)(e,l);for(var b=k(T.prototype),d=0;d<b.length;d++){var s=b[d];e.prototype[s]||(e.prototype[s]=T.prototype[s])}function e(n){if(!(this instanceof e))return new e(n);l.call(this,n),T.call(this,n),this.allowHalfOpen=!0,n&&(n.readable===!1&&(this.readable=!1),n.writable===!1&&(this.writable=!1),n.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",i)))}function i(){this._writableState.ended||S.nextTick(r,this)}function r(n){n.end()}Object.defineProperty(e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(e.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(n){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=n,this._writableState.destroyed=n)}})},66897:function(Q,z,t){Q.exports=k;var S=t(74308);function k(l){if(!(this instanceof k))return new k(l);S.call(this,l)}t(42018)(k,S),k.prototype._transform=function(l,T,b){b(null,l)}},40410:function(Q,z,t){var S,k=t(90386);Q.exports=_,_.ReadableState=m,t(15398).EventEmitter;var l,T=function($,W){return $.listeners(W).length},b=t(71405),d=t(12856).Buffer,s=t.g.Uint8Array||function(){},e=t(40964);l=e&&e.debuglog?e.debuglog("stream"):function(){};var i,r,n,a=t(31125),o=t(65756),u=t(56306).getHighWaterMark,p=t(74322).q,c=p.ERR_INVALID_ARG_TYPE,x=p.ERR_STREAM_PUSH_AFTER_EOF,g=p.ERR_METHOD_NOT_IMPLEMENTED,f=p.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t(42018)(_,b);var y=o.errorOrDestroy,v=["error","close","destroy","pause","resume"];function m($,W,Z){S=S||t(37865),$=$||{},typeof Z!="boolean"&&(Z=W instanceof S),this.objectMode=!!$.objectMode,Z&&(this.objectMode=this.objectMode||!!$.readableObjectMode),this.highWaterMark=u(this,$,"readableHighWaterMark",Z),this.buffer=new a,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=$.emitClose!==!1,this.autoDestroy=!!$.autoDestroy,this.destroyed=!1,this.defaultEncoding=$.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,$.encoding&&(i||(i=t(68019).s),this.decoder=new i($.encoding),this.encoding=$.encoding)}function _($){if(S=S||t(37865),!(this instanceof _))return new _($);var W=this instanceof S;this._readableState=new m($,this,W),this.readable=!0,$&&(typeof $.read=="function"&&(this._read=$.read),typeof $.destroy=="function"&&(this._destroy=$.destroy)),b.call(this)}function h($,W,Z,J,ee){l("readableAddChunk",W);var re,ae=$._readableState;if(W===null)ae.reading=!1,function(oe,ce){if(l("onEofChunk"),!ce.ended){if(ce.decoder){var pe=ce.decoder.end();pe&&pe.length&&(ce.buffer.push(pe),ce.length+=ce.objectMode?1:pe.length)}ce.ended=!0,ce.sync?L(oe):(ce.needReadable=!1,ce.emittedReadable||(ce.emittedReadable=!0,C(oe)))}}($,ae);else if(ee||(re=function(oe,ce){var pe,ve;return ve=ce,d.isBuffer(ve)||ve instanceof s||typeof ce=="string"||ce===void 0||oe.objectMode||(pe=new c("chunk",["string","Buffer","Uint8Array"],ce)),pe}(ae,W)),re)y($,re);else if(ae.objectMode||W&&W.length>0)if(typeof W=="string"||ae.objectMode||Object.getPrototypeOf(W)===d.prototype||(W=function(oe){return d.from(oe)}(W)),J)ae.endEmitted?y($,new f):A($,ae,W,!0);else if(ae.ended)y($,new x);else{if(ae.destroyed)return!1;ae.reading=!1,ae.decoder&&!Z?(W=ae.decoder.write(W),ae.objectMode||W.length!==0?A($,ae,W,!1):P($,ae)):A($,ae,W,!1)}else J||(ae.reading=!1,P($,ae));return!ae.ended&&(ae.length<ae.highWaterMark||ae.length===0)}function A($,W,Z,J){W.flowing&&W.length===0&&!W.sync?(W.awaitDrain=0,$.emit("data",Z)):(W.length+=W.objectMode?1:Z.length,J?W.buffer.unshift(Z):W.buffer.push(Z),W.needReadable&&L($)),P($,W)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function($){this._readableState&&(this._readableState.destroyed=$)}}),_.prototype.destroy=o.destroy,_.prototype._undestroy=o.undestroy,_.prototype._destroy=function($,W){W($)},_.prototype.push=function($,W){var Z,J=this._readableState;return J.objectMode?Z=!0:typeof $=="string"&&((W=W||J.defaultEncoding)!==J.encoding&&($=d.from($,W),W=""),Z=!0),h(this,$,W,!1,Z)},_.prototype.unshift=function($){return h(this,$,null,!0,!1)},_.prototype.isPaused=function(){return this._readableState.flowing===!1},_.prototype.setEncoding=function($){i||(i=t(68019).s);var W=new i($);this._readableState.decoder=W,this._readableState.encoding=this._readableState.decoder.encoding;for(var Z=this._readableState.buffer.head,J="";Z!==null;)J+=W.write(Z.data),Z=Z.next;return this._readableState.buffer.clear(),J!==""&&this._readableState.buffer.push(J),this._readableState.length=J.length,this};var w=1073741824;function E($,W){return $<=0||W.length===0&&W.ended?0:W.objectMode?1:$!=$?W.flowing&&W.length?W.buffer.head.data.length:W.length:($>W.highWaterMark&&(W.highWaterMark=function(Z){return Z>=w?Z=w:(Z--,Z|=Z>>>1,Z|=Z>>>2,Z|=Z>>>4,Z|=Z>>>8,Z|=Z>>>16,Z++),Z}($)),$<=W.length?$:W.ended?W.length:(W.needReadable=!0,0))}function L($){var W=$._readableState;l("emitReadable",W.needReadable,W.emittedReadable),W.needReadable=!1,W.emittedReadable||(l("emitReadable",W.flowing),W.emittedReadable=!0,k.nextTick(C,$))}function C($){var W=$._readableState;l("emitReadable_",W.destroyed,W.length,W.ended),W.destroyed||!W.length&&!W.ended||($.emit("readable"),W.emittedReadable=!1),W.needReadable=!W.flowing&&!W.ended&&W.length<=W.highWaterMark,N($)}function P($,W){W.readingMore||(W.readingMore=!0,k.nextTick(D,$,W))}function D($,W){for(;!W.reading&&!W.ended&&(W.length<W.highWaterMark||W.flowing&&W.length===0);){var Z=W.length;if(l("maybeReadMore read 0"),$.read(0),Z===W.length)break}W.readingMore=!1}function G($){var W=$._readableState;W.readableListening=$.listenerCount("readable")>0,W.resumeScheduled&&!W.paused?W.flowing=!0:$.listenerCount("data")>0&&$.resume()}function I($){l("readable nexttick read 0"),$.read(0)}function H($,W){l("resume",W.reading),W.reading||$.read(0),W.resumeScheduled=!1,$.emit("resume"),N($),W.flowing&&!W.reading&&$.read(0)}function N($){var W=$._readableState;for(l("flow",W.flowing);W.flowing&&$.read()!==null;);}function F($,W){return W.length===0?null:(W.objectMode?Z=W.buffer.shift():!$||$>=W.length?(Z=W.decoder?W.buffer.join(""):W.buffer.length===1?W.buffer.first():W.buffer.concat(W.length),W.buffer.clear()):Z=W.buffer.consume($,W.decoder),Z);var Z}function V($){var W=$._readableState;l("endReadable",W.endEmitted),W.endEmitted||(W.ended=!0,k.nextTick(q,W,$))}function q($,W){if(l("endReadableNT",$.endEmitted,$.length),!$.endEmitted&&$.length===0&&($.endEmitted=!0,W.readable=!1,W.emit("end"),$.autoDestroy)){var Z=W._writableState;(!Z||Z.autoDestroy&&Z.finished)&&W.destroy()}}function te($,W){for(var Z=0,J=$.length;Z<J;Z++)if($[Z]===W)return Z;return-1}_.prototype.read=function($){l("read",$),$=parseInt($,10);var W=this._readableState,Z=$;if($!==0&&(W.emittedReadable=!1),$===0&&W.needReadable&&((W.highWaterMark!==0?W.length>=W.highWaterMark:W.length>0)||W.ended))return l("read: emitReadable",W.length,W.ended),W.length===0&&W.ended?V(this):L(this),null;if(($=E($,W))===0&&W.ended)return W.length===0&&V(this),null;var J,ee=W.needReadable;return l("need readable",ee),(W.length===0||W.length-$<W.highWaterMark)&&l("length less than watermark",ee=!0),W.ended||W.reading?l("reading or ended",ee=!1):ee&&(l("do read"),W.reading=!0,W.sync=!0,W.length===0&&(W.needReadable=!0),this._read(W.highWaterMark),W.sync=!1,W.reading||($=E(Z,W))),(J=$>0?F($,W):null)===null?(W.needReadable=W.length<=W.highWaterMark,$=0):(W.length-=$,W.awaitDrain=0),W.length===0&&(W.ended||(W.needReadable=!0),Z!==$&&W.ended&&V(this)),J!==null&&this.emit("data",J),J},_.prototype._read=function($){y(this,new g("_read()"))},_.prototype.pipe=function($,W){var Z=this,J=this._readableState;switch(J.pipesCount){case 0:J.pipes=$;break;case 1:J.pipes=[J.pipes,$];break;default:J.pipes.push($)}J.pipesCount+=1,l("pipe count=%d opts=%j",J.pipesCount,W);var ee=W&&W.end===!1||$===k.stdout||$===k.stderr?xe:re;function re(){l("onend"),$.end()}J.endEmitted?k.nextTick(ee):Z.once("end",ee),$.on("unpipe",function ge(Oe,Ae){l("onunpipe"),Oe===Z&&Ae&&Ae.hasUnpiped===!1&&(Ae.hasUnpiped=!0,l("cleanup"),$.removeListener("close",ve),$.removeListener("finish",we),$.removeListener("drain",ae),$.removeListener("error",pe),$.removeListener("unpipe",ge),Z.removeListener("end",re),Z.removeListener("end",xe),Z.removeListener("data",ce),oe=!0,!J.awaitDrain||$._writableState&&!$._writableState.needDrain||ae())});var ae=function(ge){return function(){var Oe=ge._readableState;l("pipeOnDrain",Oe.awaitDrain),Oe.awaitDrain&&Oe.awaitDrain--,Oe.awaitDrain===0&&T(ge,"data")&&(Oe.flowing=!0,N(ge))}}(Z);$.on("drain",ae);var oe=!1;function ce(ge){l("ondata");var Oe=$.write(ge);l("dest.write",Oe),Oe===!1&&((J.pipesCount===1&&J.pipes===$||J.pipesCount>1&&te(J.pipes,$)!==-1)&&!oe&&(l("false write response, pause",J.awaitDrain),J.awaitDrain++),Z.pause())}function pe(ge){l("onerror",ge),xe(),$.removeListener("error",pe),T($,"error")===0&&y($,ge)}function ve(){$.removeListener("finish",we),xe()}function we(){l("onfinish"),$.removeListener("close",ve),xe()}function xe(){l("unpipe"),Z.unpipe($)}return Z.on("data",ce),function(ge,Oe,Ae){if(typeof ge.prependListener=="function")return ge.prependListener(Oe,Ae);ge._events&&ge._events[Oe]?Array.isArray(ge._events[Oe])?ge._events[Oe].unshift(Ae):ge._events[Oe]=[Ae,ge._events[Oe]]:ge.on(Oe,Ae)}($,"error",pe),$.once("close",ve),$.once("finish",we),$.emit("pipe",Z),J.flowing||(l("pipe resume"),Z.resume()),$},_.prototype.unpipe=function($){var W=this._readableState,Z={hasUnpiped:!1};if(W.pipesCount===0)return this;if(W.pipesCount===1)return $&&$!==W.pipes||($||($=W.pipes),W.pipes=null,W.pipesCount=0,W.flowing=!1,$&&$.emit("unpipe",this,Z)),this;if(!$){var J=W.pipes,ee=W.pipesCount;W.pipes=null,W.pipesCount=0,W.flowing=!1;for(var re=0;re<ee;re++)J[re].emit("unpipe",this,{hasUnpiped:!1});return this}var ae=te(W.pipes,$);return ae===-1||(W.pipes.splice(ae,1),W.pipesCount-=1,W.pipesCount===1&&(W.pipes=W.pipes[0]),$.emit("unpipe",this,Z)),this},_.prototype.on=function($,W){var Z=b.prototype.on.call(this,$,W),J=this._readableState;return $==="data"?(J.readableListening=this.listenerCount("readable")>0,J.flowing!==!1&&this.resume()):$==="readable"&&(J.endEmitted||J.readableListening||(J.readableListening=J.needReadable=!0,J.flowing=!1,J.emittedReadable=!1,l("on readable",J.length,J.reading),J.length?L(this):J.reading||k.nextTick(I,this))),Z},_.prototype.addListener=_.prototype.on,_.prototype.removeListener=function($,W){var Z=b.prototype.removeListener.call(this,$,W);return $==="readable"&&k.nextTick(G,this),Z},_.prototype.removeAllListeners=function($){var W=b.prototype.removeAllListeners.apply(this,arguments);return $!=="readable"&&$!==void 0||k.nextTick(G,this),W},_.prototype.resume=function(){var $=this._readableState;return $.flowing||(l("resume"),$.flowing=!$.readableListening,function(W,Z){Z.resumeScheduled||(Z.resumeScheduled=!0,k.nextTick(H,W,Z))}(this,$)),$.paused=!1,this},_.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},_.prototype.wrap=function($){var W=this,Z=this._readableState,J=!1;for(var ee in $.on("end",function(){if(l("wrapped end"),Z.decoder&&!Z.ended){var ae=Z.decoder.end();ae&&ae.length&&W.push(ae)}W.push(null)}),$.on("data",function(ae){l("wrapped data"),Z.decoder&&(ae=Z.decoder.write(ae)),Z.objectMode&&ae==null||(Z.objectMode||ae&&ae.length)&&(W.push(ae)||(J=!0,$.pause()))}),$)this[ee]===void 0&&typeof $[ee]=="function"&&(this[ee]=function(ae){return function(){return $[ae].apply($,arguments)}}(ee));for(var re=0;re<v.length;re++)$.on(v[re],this.emit.bind(this,v[re]));return this._read=function(ae){l("wrapped _read",ae),J&&(J=!1,$.resume())},this},typeof Symbol=="function"&&(_.prototype[Symbol.asyncIterator]=function(){return r===void 0&&(r=t(68221)),r(this)}),Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function($){this._readableState&&(this._readableState.flowing=$)}}),_._fromList=F,Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(_.from=function($,W){return n===void 0&&(n=t(31748)),n(_,$,W)})},74308:function(Q,z,t){Q.exports=e;var S=t(74322).q,k=S.ERR_METHOD_NOT_IMPLEMENTED,l=S.ERR_MULTIPLE_CALLBACK,T=S.ERR_TRANSFORM_ALREADY_TRANSFORMING,b=S.ERR_TRANSFORM_WITH_LENGTH_0,d=t(37865);function s(n,a){var o=this._transformState;o.transforming=!1;var u=o.writecb;if(u===null)return this.emit("error",new l);o.writechunk=null,o.writecb=null,a!=null&&this.push(a),u(n);var p=this._readableState;p.reading=!1,(p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}function e(n){if(!(this instanceof e))return new e(n);d.call(this,n),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,n&&(typeof n.transform=="function"&&(this._transform=n.transform),typeof n.flush=="function"&&(this._flush=n.flush)),this.on("prefinish",i)}function i(){var n=this;typeof this._flush!="function"||this._readableState.destroyed?r(this,null,null):this._flush(function(a,o){r(n,a,o)})}function r(n,a,o){if(a)return n.emit("error",a);if(o!=null&&n.push(o),n._writableState.length)throw new b;if(n._transformState.transforming)throw new T;return n.push(null)}t(42018)(e,d),e.prototype.push=function(n,a){return this._transformState.needTransform=!1,d.prototype.push.call(this,n,a)},e.prototype._transform=function(n,a,o){o(new k("_transform()"))},e.prototype._write=function(n,a,o){var u=this._transformState;if(u.writecb=o,u.writechunk=n,u.writeencoding=a,!u.transforming){var p=this._readableState;(u.needTransform||p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}},e.prototype._read=function(n){var a=this._transformState;a.writechunk===null||a.transforming?a.needTransform=!0:(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform))},e.prototype._destroy=function(n,a){d.prototype._destroy.call(this,n,function(o){a(o)})}},37493:function(Q,z,t){var S,k=t(90386);function l(P){var D=this;this.next=null,this.entry=null,this.finish=function(){(function(G,I,H){var N=G.entry;for(G.entry=null;N;){var F=N.callback;I.pendingcb--,F(void 0),N=N.next}I.corkedRequestsFree.next=G})(D,P)}}Q.exports=_,_.WritableState=m;var T,b={deprecate:t(20588)},d=t(71405),s=t(12856).Buffer,e=t.g.Uint8Array||function(){},i=t(65756),r=t(56306).getHighWaterMark,n=t(74322).q,a=n.ERR_INVALID_ARG_TYPE,o=n.ERR_METHOD_NOT_IMPLEMENTED,u=n.ERR_MULTIPLE_CALLBACK,p=n.ERR_STREAM_CANNOT_PIPE,c=n.ERR_STREAM_DESTROYED,x=n.ERR_STREAM_NULL_VALUES,g=n.ERR_STREAM_WRITE_AFTER_END,f=n.ERR_UNKNOWN_ENCODING,y=i.errorOrDestroy;function v(){}function m(P,D,G){S=S||t(37865),P=P||{},typeof G!="boolean"&&(G=D instanceof S),this.objectMode=!!P.objectMode,G&&(this.objectMode=this.objectMode||!!P.writableObjectMode),this.highWaterMark=r(this,P,"writableHighWaterMark",G),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var I=P.decodeStrings===!1;this.decodeStrings=!I,this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(H){(function(N,F){var V=N._writableState,q=V.sync,te=V.writecb;if(typeof te!="function")throw new u;if(function(W){W.writing=!1,W.writecb=null,W.length-=W.writelen,W.writelen=0}(V),F)(function(W,Z,J,ee,re){--Z.pendingcb,J?(k.nextTick(re,ee),k.nextTick(C,W,Z),W._writableState.errorEmitted=!0,y(W,ee)):(re(ee),W._writableState.errorEmitted=!0,y(W,ee),C(W,Z))})(N,V,q,F,te);else{var $=E(V)||N.destroyed;$||V.corked||V.bufferProcessing||!V.bufferedRequest||w(N,V),q?k.nextTick(A,N,V,$,te):A(N,V,$,te)}})(D,H)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=P.emitClose!==!1,this.autoDestroy=!!P.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new l(this)}function _(P){var D=this instanceof(S=S||t(37865));if(!D&&!T.call(_,this))return new _(P);this._writableState=new m(P,this,D),this.writable=!0,P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final)),d.call(this)}function h(P,D,G,I,H,N,F){D.writelen=I,D.writecb=F,D.writing=!0,D.sync=!0,D.destroyed?D.onwrite(new c("write")):G?P._writev(H,D.onwrite):P._write(H,N,D.onwrite),D.sync=!1}function A(P,D,G,I){G||function(H,N){N.length===0&&N.needDrain&&(N.needDrain=!1,H.emit("drain"))}(P,D),D.pendingcb--,I(),C(P,D)}function w(P,D){D.bufferProcessing=!0;var G=D.bufferedRequest;if(P._writev&&G&&G.next){var I=D.bufferedRequestCount,H=new Array(I),N=D.corkedRequestsFree;N.entry=G;for(var F=0,V=!0;G;)H[F]=G,G.isBuf||(V=!1),G=G.next,F+=1;H.allBuffers=V,h(P,D,!0,D.length,H,"",N.finish),D.pendingcb++,D.lastBufferedRequest=null,N.next?(D.corkedRequestsFree=N.next,N.next=null):D.corkedRequestsFree=new l(D),D.bufferedRequestCount=0}else{for(;G;){var q=G.chunk,te=G.encoding,$=G.callback;if(h(P,D,!1,D.objectMode?1:q.length,q,te,$),G=G.next,D.bufferedRequestCount--,D.writing)break}G===null&&(D.lastBufferedRequest=null)}D.bufferedRequest=G,D.bufferProcessing=!1}function E(P){return P.ending&&P.length===0&&P.bufferedRequest===null&&!P.finished&&!P.writing}function L(P,D){P._final(function(G){D.pendingcb--,G&&y(P,G),D.prefinished=!0,P.emit("prefinish"),C(P,D)})}function C(P,D){var G=E(D);if(G&&(function(H,N){N.prefinished||N.finalCalled||(typeof H._final!="function"||N.destroyed?(N.prefinished=!0,H.emit("prefinish")):(N.pendingcb++,N.finalCalled=!0,k.nextTick(L,H,N)))}(P,D),D.pendingcb===0&&(D.finished=!0,P.emit("finish"),D.autoDestroy))){var I=P._readableState;(!I||I.autoDestroy&&I.endEmitted)&&P.destroy()}return G}t(42018)(_,d),m.prototype.getBuffer=function(){for(var P=this.bufferedRequest,D=[];P;)D.push(P),P=P.next;return D},function(){try{Object.defineProperty(m.prototype,"buffer",{get:b.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(T=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(P){return!!T.call(this,P)||this===_&&P&&P._writableState instanceof m}})):T=function(P){return P instanceof this},_.prototype.pipe=function(){y(this,new p)},_.prototype.write=function(P,D,G){var I,H=this._writableState,N=!1,F=!H.objectMode&&(I=P,s.isBuffer(I)||I instanceof e);return F&&!s.isBuffer(P)&&(P=function(V){return s.from(V)}(P)),typeof D=="function"&&(G=D,D=null),F?D="buffer":D||(D=H.defaultEncoding),typeof G!="function"&&(G=v),H.ending?function(V,q){var te=new g;y(V,te),k.nextTick(q,te)}(this,G):(F||function(V,q,te,$){var W;return te===null?W=new x:typeof te=="string"||q.objectMode||(W=new a("chunk",["string","Buffer"],te)),!W||(y(V,W),k.nextTick($,W),!1)}(this,H,P,G))&&(H.pendingcb++,N=function(V,q,te,$,W,Z){if(!te){var J=function(oe,ce,pe){return oe.objectMode||oe.decodeStrings===!1||typeof ce!="string"||(ce=s.from(ce,pe)),ce}(q,$,W);$!==J&&(te=!0,W="buffer",$=J)}var ee=q.objectMode?1:$.length;q.length+=ee;var re=q.length<q.highWaterMark;if(re||(q.needDrain=!0),q.writing||q.corked){var ae=q.lastBufferedRequest;q.lastBufferedRequest={chunk:$,encoding:W,isBuf:te,callback:Z,next:null},ae?ae.next=q.lastBufferedRequest:q.bufferedRequest=q.lastBufferedRequest,q.bufferedRequestCount+=1}else h(V,q,!1,ee,$,W,Z);return re}(this,H,F,P,D,G)),N},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,P.writing||P.corked||P.bufferProcessing||!P.bufferedRequest||w(this,P))},_.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=P.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((P+"").toLowerCase())>-1))throw new f(P);return this._writableState.defaultEncoding=P,this},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(P,D,G){G(new o("_write()"))},_.prototype._writev=null,_.prototype.end=function(P,D,G){var I=this._writableState;return typeof P=="function"?(G=P,P=null,D=null):typeof D=="function"&&(G=D,D=null),P!=null&&this.write(P,D),I.corked&&(I.corked=1,this.uncork()),I.ending||function(H,N,F){N.ending=!0,C(H,N),F&&(N.finished?k.nextTick(F):H.once("finish",F)),N.ended=!0,H.writable=!1}(this,I,G),this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(P){this._writableState&&(this._writableState.destroyed=P)}}),_.prototype.destroy=i.destroy,_.prototype._undestroy=i.undestroy,_.prototype._destroy=function(P,D){D(P)}},68221:function(Q,z,t){var S,k=t(90386);function l(x,g,f){return g in x?Object.defineProperty(x,g,{value:f,enumerable:!0,configurable:!0,writable:!0}):x[g]=f,x}var T=t(12726),b=Symbol("lastResolve"),d=Symbol("lastReject"),s=Symbol("error"),e=Symbol("ended"),i=Symbol("lastPromise"),r=Symbol("handlePromise"),n=Symbol("stream");function a(x,g){return{value:x,done:g}}function o(x){var g=x[b];if(g!==null){var f=x[n].read();f!==null&&(x[i]=null,x[b]=null,x[d]=null,g(a(f,!1)))}}function u(x){k.nextTick(o,x)}var p=Object.getPrototypeOf(function(){}),c=Object.setPrototypeOf((l(S={get stream(){return this[n]},next:function(){var x=this,g=this[s];if(g!==null)return Promise.reject(g);if(this[e])return Promise.resolve(a(void 0,!0));if(this[n].destroyed)return new Promise(function(m,_){k.nextTick(function(){x[s]?_(x[s]):m(a(void 0,!0))})});var f,y=this[i];if(y)f=new Promise(function(m,_){return function(h,A){m.then(function(){_[e]?h(a(void 0,!0)):_[r](h,A)},A)}}(y,this));else{var v=this[n].read();if(v!==null)return Promise.resolve(a(v,!1));f=new Promise(this[r])}return this[i]=f,f}},Symbol.asyncIterator,function(){return this}),l(S,"return",function(){var x=this;return new Promise(function(g,f){x[n].destroy(null,function(y){y?f(y):g(a(void 0,!0))})})}),S),p);Q.exports=function(x){var g,f=Object.create(c,(l(g={},n,{value:x,writable:!0}),l(g,b,{value:null,writable:!0}),l(g,d,{value:null,writable:!0}),l(g,s,{value:null,writable:!0}),l(g,e,{value:x._readableState.endEmitted,writable:!0}),l(g,r,{value:function(y,v){var m=f[n].read();m?(f[i]=null,f[b]=null,f[d]=null,y(a(m,!1))):(f[b]=y,f[d]=v)},writable:!0}),g));return f[i]=null,T(x,function(y){if(y&&y.code!=="ERR_STREAM_PREMATURE_CLOSE"){var v=f[d];return v!==null&&(f[i]=null,f[b]=null,f[d]=null,v(y)),void(f[s]=y)}var m=f[b];m!==null&&(f[i]=null,f[b]=null,f[d]=null,m(a(void 0,!0))),f[e]=!0}),x.on("readable",u.bind(null,f)),f}},31125:function(Q,z,t){function S(s,e){var i=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),i.push.apply(i,r)}return i}function k(s,e,i){return e in s?Object.defineProperty(s,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[e]=i,s}function l(s,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,r.key,r)}}var T=t(12856).Buffer,b=t(69862).inspect,d=b&&b.custom||"inspect";Q.exports=function(){function s(){(function(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")})(this,s),this.head=null,this.tail=null,this.length=0}var e,i;return e=s,i=[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,a=""+n.data;n=n.next;)a+=r+n.data;return a}},{key:"concat",value:function(r){if(this.length===0)return T.alloc(0);for(var n,a,o,u=T.allocUnsafe(r>>>0),p=this.head,c=0;p;)n=p.data,a=u,o=c,T.prototype.copy.call(n,a,o),c+=p.data.length,p=p.next;return u}},{key:"consume",value:function(r,n){var a;return r<this.head.data.length?(a=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):a=r===this.head.data.length?this.shift():n?this._getString(r):this._getBuffer(r),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,a=1,o=n.data;for(r-=o.length;n=n.next;){var u=n.data,p=r>u.length?u.length:r;if(p===u.length?o+=u:o+=u.slice(0,r),(r-=p)==0){p===u.length?(++a,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=u.slice(p));break}++a}return this.length-=a,o}},{key:"_getBuffer",value:function(r){var n=T.allocUnsafe(r),a=this.head,o=1;for(a.data.copy(n),r-=a.data.length;a=a.next;){var u=a.data,p=r>u.length?u.length:r;if(u.copy(n,n.length-r,0,p),(r-=p)==0){p===u.length?(++o,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=u.slice(p));break}++o}return this.length-=o,n}},{key:d,value:function(r,n){return b(this,function(a){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?S(Object(u),!0).forEach(function(p){k(a,p,u[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(u)):S(Object(u)).forEach(function(p){Object.defineProperty(a,p,Object.getOwnPropertyDescriptor(u,p))})}return a}({},n,{depth:0,customInspect:!1}))}}],i&&l(e.prototype,i),s}()},65756:function(Q,z,t){var S=t(90386);function k(b,d){T(b,d),l(b)}function l(b){b._writableState&&!b._writableState.emitClose||b._readableState&&!b._readableState.emitClose||b.emit("close")}function T(b,d){b.emit("error",d)}Q.exports={destroy:function(b,d){var s=this,e=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return e||i?(d?d(b):b&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,S.nextTick(T,this,b)):S.nextTick(T,this,b)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(b||null,function(r){!d&&r?s._writableState?s._writableState.errorEmitted?S.nextTick(l,s):(s._writableState.errorEmitted=!0,S.nextTick(k,s,r)):S.nextTick(k,s,r):d?(S.nextTick(l,s),d(r)):S.nextTick(l,s)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(b,d){var s=b._readableState,e=b._writableState;s&&s.autoDestroy||e&&e.autoDestroy?b.destroy(d):b.emit("error",d)}}},12726:function(Q,z,t){var S=t(74322).q.ERR_STREAM_PREMATURE_CLOSE;function k(){}Q.exports=function l(T,b,d){if(typeof b=="function")return l(T,null,b);b||(b={}),d=function(x){var g=!1;return function(){if(!g){g=!0;for(var f=arguments.length,y=new Array(f),v=0;v<f;v++)y[v]=arguments[v];x.apply(this,y)}}}(d||k);var s=b.readable||b.readable!==!1&&T.readable,e=b.writable||b.writable!==!1&&T.writable,i=function(){T.writable||n()},r=T._writableState&&T._writableState.finished,n=function(){e=!1,r=!0,s||d.call(T)},a=T._readableState&&T._readableState.endEmitted,o=function(){s=!1,a=!0,e||d.call(T)},u=function(x){d.call(T,x)},p=function(){var x;return s&&!a?(T._readableState&&T._readableState.ended||(x=new S),d.call(T,x)):e&&!r?(T._writableState&&T._writableState.ended||(x=new S),d.call(T,x)):void 0},c=function(){T.req.on("finish",n)};return function(x){return x.setHeader&&typeof x.abort=="function"}(T)?(T.on("complete",n),T.on("abort",p),T.req?c():T.on("request",c)):e&&!T._writableState&&(T.on("end",i),T.on("close",i)),T.on("end",o),T.on("finish",n),b.error!==!1&&T.on("error",u),T.on("close",p),function(){T.removeListener("complete",n),T.removeListener("abort",p),T.removeListener("request",c),T.req&&T.req.removeListener("finish",n),T.removeListener("end",i),T.removeListener("close",i),T.removeListener("finish",n),T.removeListener("end",o),T.removeListener("error",u),T.removeListener("close",p)}}},31748:function(Q){Q.exports=function(){throw new Error("Readable.from is not available in the browser")}},10168:function(Q,z,t){var S,k=t(74322).q,l=k.ERR_MISSING_ARGS,T=k.ERR_STREAM_DESTROYED;function b(e){if(e)throw e}function d(e){e()}function s(e,i){return e.pipe(i)}Q.exports=function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];var n,a=function(u){return u.length?typeof u[u.length-1]!="function"?b:u.pop():b}(i);if(Array.isArray(i[0])&&(i=i[0]),i.length<2)throw new l("streams");var o=i.map(function(u,p){var c=p<i.length-1;return function(x,g,f,y){y=function(_){var h=!1;return function(){h||(h=!0,_.apply(void 0,arguments))}}(y);var v=!1;x.on("close",function(){v=!0}),S===void 0&&(S=t(12726)),S(x,{readable:g,writable:f},function(_){if(_)return y(_);v=!0,y()});var m=!1;return function(_){if(!v&&!m)return m=!0,function(h){return h.setHeader&&typeof h.abort=="function"}(x)?x.abort():typeof x.destroy=="function"?x.destroy():void y(_||new T("pipe"))}}(u,c,p>0,function(x){n||(n=x),x&&o.forEach(d),c||(o.forEach(d),a(n))})});return i.reduce(s)}},56306:function(Q,z,t){var S=t(74322).q.ERR_INVALID_OPT_VALUE;Q.exports={getHighWaterMark:function(k,l,T,b){var d=function(s,e,i){return s.highWaterMark!=null?s.highWaterMark:e?s[i]:null}(l,b,T);if(d!=null){if(!isFinite(d)||Math.floor(d)!==d||d<0)throw new S(b?T:"highWaterMark",d);return Math.floor(d)}return k.objectMode?16:16384}}},71405:function(Q,z,t){Q.exports=t(15398).EventEmitter},68019:function(Q,z,t){var S=t(71665).Buffer,k=S.isEncoding||function(a){switch((a=""+a)&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function l(a){var o;switch(this.encoding=function(u){var p=function(c){if(!c)return"utf8";for(var x;;)switch(c){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return c;default:if(x)return;c=(""+c).toLowerCase(),x=!0}}(u);if(typeof p!="string"&&(S.isEncoding===k||!k(u)))throw new Error("Unknown encoding: "+u);return p||u}(a),this.encoding){case"utf16le":this.text=d,this.end=s,o=4;break;case"utf8":this.fillLast=b,o=4;break;case"base64":this.text=e,this.end=i,o=3;break;default:return this.write=r,void(this.end=n)}this.lastNeed=0,this.lastTotal=0,this.lastChar=S.allocUnsafe(o)}function T(a){return a<=127?0:a>>5==6?2:a>>4==14?3:a>>3==30?4:a>>6==2?-1:-2}function b(a){var o=this.lastTotal-this.lastNeed,u=function(p,c,x){if((192&c[0])!=128)return p.lastNeed=0,"";if(p.lastNeed>1&&c.length>1){if((192&c[1])!=128)return p.lastNeed=1,"";if(p.lastNeed>2&&c.length>2&&(192&c[2])!=128)return p.lastNeed=2,""}}(this,a);return u!==void 0?u:this.lastNeed<=a.length?(a.copy(this.lastChar,o,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(a.copy(this.lastChar,o,0,a.length),void(this.lastNeed-=a.length))}function d(a,o){if((a.length-o)%2==0){var u=a.toString("utf16le",o);if(u){var p=u.charCodeAt(u.length-1);if(p>=55296&&p<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=a[a.length-1],a.toString("utf16le",o,a.length-1)}function s(a){var o=a&&a.length?this.write(a):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return o+this.lastChar.toString("utf16le",0,u)}return o}function e(a,o){var u=(a.length-o)%3;return u===0?a.toString("base64",o):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]),a.toString("base64",o,a.length-u))}function i(a){var o=a&&a.length?this.write(a):"";return this.lastNeed?o+this.lastChar.toString("base64",0,3-this.lastNeed):o}function r(a){return a.toString(this.encoding)}function n(a){return a&&a.length?this.write(a):""}z.s=l,l.prototype.write=function(a){if(a.length===0)return"";var o,u;if(this.lastNeed){if((o=this.fillLast(a))===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<a.length?o?o+this.text(a,u):this.text(a,u):o||""},l.prototype.end=function(a){var o=a&&a.length?this.write(a):"";return this.lastNeed?o+"":o},l.prototype.text=function(a,o){var u=function(c,x,g){var f=x.length-1;if(f<g)return 0;var y=T(x[f]);return y>=0?(y>0&&(c.lastNeed=y-1),y):--f<g||y===-2?0:(y=T(x[f]))>=0?(y>0&&(c.lastNeed=y-2),y):--f<g||y===-2?0:(y=T(x[f]))>=0?(y>0&&(y===2?y=0:c.lastNeed=y-3),y):0}(this,a,o);if(!this.lastNeed)return a.toString("utf8",o);this.lastTotal=u;var p=a.length-(u-this.lastNeed);return a.copy(this.lastChar,0,p),a.toString("utf8",o,p)},l.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length),this.lastNeed-=a.length}},90715:function(Q,z,t){var S=t(32791),k=t(41633)("stream-parser");Q.exports=function(c){var x=c&&typeof c._transform=="function",g=c&&typeof c._write=="function";if(!x&&!g)throw new Error("must pass a Writable or Transform stream in");k("extending Parser into stream"),c._bytes=e,c._skipBytes=i,x&&(c._passthrough=r),x?c._transform=a:c._write=n};var l=-1,T=0,b=1,d=2;function s(c){k("initializing parser stream"),c._parserBytesLeft=0,c._parserBuffers=[],c._parserBuffered=0,c._parserState=l,c._parserCallback=null,typeof c.push=="function"&&(c._parserOutput=c.push.bind(c)),c._parserInit=!0}function e(c,x){S(!this._parserCallback,'there is already a "callback" set!'),S(isFinite(c)&&c>0,'can only buffer a finite number of bytes > 0, got "'+c+'"'),this._parserInit||s(this),k("buffering %o bytes",c),this._parserBytesLeft=c,this._parserCallback=x,this._parserState=T}function i(c,x){S(!this._parserCallback,'there is already a "callback" set!'),S(c>0,'can only skip > 0 bytes, got "'+c+'"'),this._parserInit||s(this),k("skipping %o bytes",c),this._parserBytesLeft=c,this._parserCallback=x,this._parserState=b}function r(c,x){S(!this._parserCallback,'There is already a "callback" set!'),S(c>0,'can only pass through > 0 bytes, got "'+c+'"'),this._parserInit||s(this),k("passing through %o bytes",c),this._parserBytesLeft=c,this._parserCallback=x,this._parserState=d}function n(c,x,g){this._parserInit||s(this),k("write(%o bytes)",c.length),typeof x=="function"&&(g=x),u(this,c,null,g)}function a(c,x,g){this._parserInit||s(this),k("transform(%o bytes)",c.length),typeof x!="function"&&(x=this._parserOutput),u(this,c,x,g)}function o(c,x,g,f){if(c._parserBytesLeft-=x.length,k("%o bytes left for stream piece",c._parserBytesLeft),c._parserState===T?(c._parserBuffers.push(x),c._parserBuffered+=x.length):c._parserState===d&&g(x),c._parserBytesLeft!==0)return f;var y=c._parserCallback;if(y&&c._parserState===T&&c._parserBuffers.length>1&&(x=Buffer.concat(c._parserBuffers,c._parserBuffered)),c._parserState!==T&&(x=null),c._parserCallback=null,c._parserBuffered=0,c._parserState=l,c._parserBuffers.splice(0),y){var v=[];x&&v.push(x),g&&v.push(g);var m=y.length>v.length;m&&v.push(p(f));var _=y.apply(c,v);if(!m||f===_)return f}}var u=p(function c(x,g,f,y){return x._parserBytesLeft<=0?y(new Error("got data but not currently parsing anything")):g.length<=x._parserBytesLeft?function(){return o(x,g,f,y)}:function(){var v=g.slice(0,x._parserBytesLeft);return o(x,v,f,function(m){return m?y(m):g.length>v.length?function(){return c(x,g.slice(v.length),f,y)}:void 0})}});function p(c){return function(){for(var x=c.apply(this,arguments);typeof x=="function";)x=x();return x}}},41633:function(Q,z,t){var S=t(90386);function k(){var l;try{l=z.storage.debug}catch{}return!l&&S!==void 0&&"env"in S&&(l=S.env.DEBUG),l}(z=Q.exports=t(74469)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},z.formatArgs=function(l){var T=this.useColors;if(l[0]=(T?"%c":"")+this.namespace+(T?" %c":" ")+l[0]+(T?"%c ":" ")+"+"+z.humanize(this.diff),T){var b="color: "+this.color;l.splice(1,0,b,"color: inherit");var d=0,s=0;l[0].replace(/%[a-zA-Z%]/g,function(e){e!=="%%"&&(d++,e==="%c"&&(s=d))}),l.splice(s,0,b)}},z.save=function(l){try{l==null?z.storage.removeItem("debug"):z.storage.debug=l}catch{}},z.load=k,z.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},z.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),z.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],z.formatters.j=function(l){try{return JSON.stringify(l)}catch(T){return"[UnexpectedJSONParseError]: "+T.message}},z.enable(k())},74469:function(Q,z,t){var S;function k(l){function T(){if(T.enabled){var b=T,d=+new Date,s=d-(S||d);b.diff=s,b.prev=S,b.curr=d,S=d;for(var e=new Array(arguments.length),i=0;i<e.length;i++)e[i]=arguments[i];e[0]=z.coerce(e[0]),typeof e[0]!="string"&&e.unshift("%O");var r=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,function(n,a){if(n==="%%")return n;r++;var o=z.formatters[a];if(typeof o=="function"){var u=e[r];n=o.call(b,u),e.splice(r,1),r--}return n}),z.formatArgs.call(b,e),(T.log||z.log||console.log.bind(console)).apply(b,e)}}return T.namespace=l,T.enabled=z.enabled(l),T.useColors=z.useColors(),T.color=function(b){var d,s=0;for(d in b)s=(s<<5)-s+b.charCodeAt(d),s|=0;return z.colors[Math.abs(s)%z.colors.length]}(l),typeof z.init=="function"&&z.init(T),T}(z=Q.exports=k.debug=k.default=k).coerce=function(l){return l instanceof Error?l.stack||l.message:l},z.disable=function(){z.enable("")},z.enable=function(l){z.save(l),z.names=[],z.skips=[];for(var T=(typeof l=="string"?l:"").split(/[\s,]+/),b=T.length,d=0;d<b;d++)T[d]&&((l=T[d].replace(/\*/g,".*?"))[0]==="-"?z.skips.push(new RegExp("^"+l.substr(1)+"$")):z.names.push(new RegExp("^"+l+"$")))},z.enabled=function(l){var T,b;for(T=0,b=z.skips.length;T<b;T++)if(z.skips[T].test(l))return!1;for(T=0,b=z.names.length;T<b;T++)if(z.names[T].test(l))return!0;return!1},z.humanize=t(11375),z.names=[],z.skips=[],z.formatters={}},11375:function(Q){var z=1e3,t=60*z,S=60*t,k=24*S;function l(T,b,d){if(!(T<b))return T<1.5*b?Math.floor(T/b)+" "+d:Math.ceil(T/b)+" "+d+"s"}Q.exports=function(T,b){b=b||{};var d,s=typeof T;if(s==="string"&&T.length>0)return function(e){if(!((e=String(e)).length>100)){var i=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(i){var r=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"days":case"day":case"d":return r*k;case"hours":case"hour":case"hrs":case"hr":case"h":return r*S;case"minutes":case"minute":case"mins":case"min":case"m":return r*t;case"seconds":case"second":case"secs":case"sec":case"s":return r*z;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(T);if(s==="number"&&isNaN(T)===!1)return b.long?l(d=T,k,"day")||l(d,S,"hour")||l(d,t,"minute")||l(d,z,"second")||d+" ms":function(e){return e>=k?Math.round(e/k)+"d":e>=S?Math.round(e/S)+"h":e>=t?Math.round(e/t)+"m":e>=z?Math.round(e/z)+"s":e+"ms"}(T);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(T))}},99011:function(Q,z,t){var S=t(88641);Q.exports=function(k,l,T){if(k==null)throw Error("First argument should be a string");if(l==null)throw Error("Separator should be a string or a RegExp");T?(typeof T=="string"||Array.isArray(T))&&(T={ignore:T}):T={},T.escape==null&&(T.escape=!0),T.ignore==null?T.ignore=["[]","()","{}","<>",'""',"''","``","",""]:(typeof T.ignore=="string"&&(T.ignore=[T.ignore]),T.ignore=T.ignore.map(function(n){return n.length===1&&(n+=n),n}));var b=S.parse(k,{flat:!0,brackets:T.ignore}),d=b[0].split(l);if(T.escape){for(var s=[],e=0;e<d.length;e++){var i=d[e],r=d[e+1];i[i.length-1]==="\\"&&i[i.length-2]!=="\\"?(s.push(i+l+r),e++):s.push(i)}d=s}for(e=0;e<d.length;e++)b[0]=d[e],d[e]=S.stringify(b,{flat:!0});return d}},68664:function(Q){Q.exports=function(z){for(var t=z.length,S=new Array(t),k=new Array(t),l=new Array(t),T=new Array(t),b=new Array(t),d=new Array(t),s=0;s<t;++s)S[s]=-1,k[s]=0,l[s]=!1,T[s]=0,b[s]=-1,d[s]=[];var e,i=0,r=[],n=[];function a(p){var c=[p],x=[p];for(S[p]=k[p]=i,l[p]=!0,i+=1;x.length>0;){p=x[x.length-1];var g=z[p];if(T[p]<g.length){for(var f=T[p];f<g.length;++f){var y=g[f];if(S[y]<0){S[y]=k[y]=i,l[y]=!0,i+=1,c.push(y),x.push(y);break}l[y]&&(k[p]=0|Math.min(k[p],k[y])),b[y]>=0&&d[p].push(b[y])}T[p]=f}else{if(k[p]===S[p]){var v=[],m=[],_=0;for(f=c.length-1;f>=0;--f){var h=c[f];if(l[h]=!1,v.push(h),m.push(d[h]),_+=d[h].length,b[h]=r.length,h===p){c.length=f;break}}r.push(v);var A=new Array(_);for(f=0;f<m.length;f++)for(var w=0;w<m[f].length;w++)A[--_]=m[f][w];n.push(A)}x.pop()}}}for(s=0;s<t;++s)S[s]<0&&a(s);for(s=0;s<n.length;s++){var o=n[s];if(o.length!==0){o.sort(function(p,c){return p-c}),e=[o[0]];for(var u=1;u<o.length;u++)o[u]!==o[u-1]&&e.push(o[u]);n[s]=e}}return{components:r,adjacencyList:n}}},7095:function(Q,z,t){t.r(z);var S=2*Math.PI,k=function(b,d,s,e,i,r,n){var a=b.x,o=b.y;return{x:e*(a*=d)-i*(o*=s)+r,y:i*a+e*o+n}},l=function(b,d){var s=d===1.5707963267948966?.551915024494:d===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(d/4),e=Math.cos(b),i=Math.sin(b),r=Math.cos(b+d),n=Math.sin(b+d);return[{x:e-i*s,y:i+e*s},{x:r+n*s,y:n-r*s},{x:r,y:n}]},T=function(b,d,s,e){var i=b*s+d*e;return i>1&&(i=1),i<-1&&(i=-1),(b*e-d*s<0?-1:1)*Math.acos(i)};z.default=function(b){var d=b.px,s=b.py,e=b.cx,i=b.cy,r=b.rx,n=b.ry,a=b.xAxisRotation,o=a===void 0?0:a,u=b.largeArcFlag,p=u===void 0?0:u,c=b.sweepFlag,x=c===void 0?0:c,g=[];if(r===0||n===0)return[];var f=Math.sin(o*S/360),y=Math.cos(o*S/360),v=y*(d-e)/2+f*(s-i)/2,m=-f*(d-e)/2+y*(s-i)/2;if(v===0&&m===0)return[];r=Math.abs(r),n=Math.abs(n);var _=Math.pow(v,2)/Math.pow(r,2)+Math.pow(m,2)/Math.pow(n,2);_>1&&(r*=Math.sqrt(_),n*=Math.sqrt(_));var h=function(I,H,N,F,V,q,te,$,W,Z,J,ee){var re=Math.pow(V,2),ae=Math.pow(q,2),oe=Math.pow(J,2),ce=Math.pow(ee,2),pe=re*ae-re*ce-ae*oe;pe<0&&(pe=0),pe/=re*ce+ae*oe;var ve=(pe=Math.sqrt(pe)*(te===$?-1:1))*V/q*ee,we=pe*-q/V*J,xe=Z*ve-W*we+(I+N)/2,ge=W*ve+Z*we+(H+F)/2,Oe=(J-ve)/V,Ae=(ee-we)/q,Te=(-J-ve)/V,se=(-ee-we)/q,le=T(1,0,Oe,Ae),ne=T(Oe,Ae,Te,se);return $===0&&ne>0&&(ne-=S),$===1&&ne<0&&(ne+=S),[xe,ge,le,ne]}(d,s,e,i,r,n,p,x,f,y,v,m),A=function(I,H){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return function(N,F){var V=[],q=!0,te=!1,$=void 0;try{for(var W,Z=N[Symbol.iterator]();!(q=(W=Z.next()).done)&&(V.push(W.value),!F||V.length!==F);q=!0);}catch(J){te=!0,$=J}finally{try{!q&&Z.return&&Z.return()}finally{if(te)throw $}}return V}(I,H);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(h,4),w=A[0],E=A[1],L=A[2],C=A[3],P=Math.abs(C)/(S/4);Math.abs(1-P)<1e-7&&(P=1);var D=Math.max(Math.ceil(P),1);C/=D;for(var G=0;G<D;G++)g.push(l(L,C)),L+=C;return g.map(function(I){var H=k(I[0],r,n,y,f,w,E),N=H.x,F=H.y,V=k(I[1],r,n,y,f,w,E),q=V.x,te=V.y,$=k(I[2],r,n,y,f,w,E);return{x1:N,y1:F,x2:q,y2:te,x:$.x,y:$.y}})}},1750:function(Q,z,t){var S=t(95616),k=t(65185),l=t(29988),T=t(89546),b=t(32791);Q.exports=function(d){if(Array.isArray(d)&&d.length===1&&typeof d[0]=="string"&&(d=d[0]),typeof d=="string"&&(b(T(d),"String is not an SVG path."),d=S(d)),b(Array.isArray(d),"Argument should be a string or an array of path segments."),d=k(d),!(d=l(d)).length)return[0,0,0,0];for(var s=[1/0,1/0,-1/0,-1/0],e=0,i=d.length;e<i;e++)for(var r=d[e].slice(1),n=0;n<r.length;n+=2)r[n+0]<s[0]&&(s[0]=r[n+0]),r[n+1]<s[1]&&(s[1]=r[n+1]),r[n+0]>s[2]&&(s[2]=r[n+0]),r[n+1]>s[3]&&(s[3]=r[n+1]);return s}},29988:function(Q,z,t){Q.exports=function(T){for(var b,d=[],s=0,e=0,i=0,r=0,n=null,a=null,o=0,u=0,p=0,c=T.length;p<c;p++){var x=T[p],g=x[0];switch(g){case"M":i=x[1],r=x[2];break;case"A":var f=S({px:o,py:u,cx:x[6],cy:x[7],rx:x[1],ry:x[2],xAxisRotation:x[3],largeArcFlag:x[4],sweepFlag:x[5]});if(!f.length)continue;for(var y,v=0;v<f.length;v++)x=["C",(y=f[v]).x1,y.y1,y.x2,y.y2,y.x,y.y],v<f.length-1&&d.push(x);break;case"S":var m=o,_=u;b!="C"&&b!="S"||(m+=m-s,_+=_-e),x=["C",m,_,x[1],x[2],x[3],x[4]];break;case"T":b=="Q"||b=="T"?(n=2*o-n,a=2*u-a):(n=o,a=u),x=l(o,u,n,a,x[1],x[2]);break;case"Q":n=x[1],a=x[2],x=l(o,u,x[1],x[2],x[3],x[4]);break;case"L":x=k(o,u,x[1],x[2]);break;case"H":x=k(o,u,x[1],u);break;case"V":x=k(o,u,o,x[1]);break;case"Z":x=k(o,u,i,r)}b=g,o=x[x.length-2],u=x[x.length-1],x.length>4?(s=x[x.length-4],e=x[x.length-3]):(s=o,e=u),d.push(x)}return d};var S=t(7095);function k(T,b,d,s){return["C",T,b,d,s,d,s]}function l(T,b,d,s,e,i){return["C",T/3+.6666666666666666*d,b/3+.6666666666666666*s,e/3+.6666666666666666*d,i/3+.6666666666666666*s,e,i]}},82019:function(Q,z,t){var S,k=t(1750),l=t(95616),T=t(31457),b=t(89546),d=t(44781),s=document.createElement("canvas"),e=s.getContext("2d");Q.exports=function(i,r){if(!b(i))throw Error("Argument should be valid svg path string");var n,a;r||(r={}),r.shape?(n=r.shape[0],a=r.shape[1]):(n=s.width=r.w||r.width||200,a=s.height=r.h||r.height||200);var o=Math.min(n,a),u=r.stroke||0,p=r.viewbox||r.viewBox||k(i),c=[n/(p[2]-p[0]),a/(p[3]-p[1])],x=Math.min(c[0]||0,c[1]||0)/2;if(e.fillStyle="black",e.fillRect(0,0,n,a),e.fillStyle="white",u&&(typeof u!="number"&&(u=1),e.strokeStyle=u>0?"white":"black",e.lineWidth=Math.abs(u)),e.translate(.5*n,.5*a),e.scale(x,x),function(){if(S!=null)return S;var y=document.createElement("canvas").getContext("2d");if(y.canvas.width=y.canvas.height=1,!window.Path2D)return S=!1;var v=new Path2D("M0,0h1v1h-1v-1Z");y.fillStyle="black",y.fill(v);var m=y.getImageData(0,0,1,1);return S=m&&m.data&&m.data[3]===255}()){var g=new Path2D(i);e.fill(g),u&&e.stroke(g)}else{var f=l(i);T(e,f),e.fill(),u&&e.stroke()}return e.setTransform(1,0,0,1,0,0),d(e,{cutoff:r.cutoff!=null?r.cutoff:.5,radius:r.radius!=null?r.radius:.5*o})}},84267:function(Q,z,t){var S;(function(k){var l=/^\s+/,T=/\s+$/,b=0,d=k.round,s=k.min,e=k.max,i=k.random;function r(J,ee){if(ee=ee||{},(J=J||"")instanceof r)return J;if(!(this instanceof r))return new r(J,ee);var re=function(ae){var oe,ce,pe,ve={r:0,g:0,b:0},we=1,xe=null,ge=null,Oe=null,Ae=!1,Te=!1;return typeof ae=="string"&&(ae=function(se){se=se.replace(l,"").replace(T,"").toLowerCase();var le,ne=!1;if(L[se])se=L[se],ne=!0;else if(se=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(le=W.rgb.exec(se))?{r:le[1],g:le[2],b:le[3]}:(le=W.rgba.exec(se))?{r:le[1],g:le[2],b:le[3],a:le[4]}:(le=W.hsl.exec(se))?{h:le[1],s:le[2],l:le[3]}:(le=W.hsla.exec(se))?{h:le[1],s:le[2],l:le[3],a:le[4]}:(le=W.hsv.exec(se))?{h:le[1],s:le[2],v:le[3]}:(le=W.hsva.exec(se))?{h:le[1],s:le[2],v:le[3],a:le[4]}:(le=W.hex8.exec(se))?{r:I(le[1]),g:I(le[2]),b:I(le[3]),a:V(le[4]),format:ne?"name":"hex8"}:(le=W.hex6.exec(se))?{r:I(le[1]),g:I(le[2]),b:I(le[3]),format:ne?"name":"hex"}:(le=W.hex4.exec(se))?{r:I(le[1]+""+le[1]),g:I(le[2]+""+le[2]),b:I(le[3]+""+le[3]),a:V(le[4]+""+le[4]),format:ne?"name":"hex8"}:!!(le=W.hex3.exec(se))&&{r:I(le[1]+""+le[1]),g:I(le[2]+""+le[2]),b:I(le[3]+""+le[3]),format:ne?"name":"hex"}}(ae)),typeof ae=="object"&&(Z(ae.r)&&Z(ae.g)&&Z(ae.b)?(oe=ae.r,ce=ae.g,pe=ae.b,ve={r:255*D(oe,255),g:255*D(ce,255),b:255*D(pe,255)},Ae=!0,Te=String(ae.r).substr(-1)==="%"?"prgb":"rgb"):Z(ae.h)&&Z(ae.s)&&Z(ae.v)?(xe=N(ae.s),ge=N(ae.v),ve=function(se,le,ne){se=6*D(se,360),le=D(le,100),ne=D(ne,100);var me=k.floor(se),Ee=se-me,be=ne*(1-le),De=ne*(1-Ee*le),Ue=ne*(1-(1-Ee)*le),he=me%6;return{r:255*[ne,De,be,be,Ue,ne][he],g:255*[Ue,ne,ne,De,be,be][he],b:255*[be,be,Ue,ne,ne,De][he]}}(ae.h,xe,ge),Ae=!0,Te="hsv"):Z(ae.h)&&Z(ae.s)&&Z(ae.l)&&(xe=N(ae.s),Oe=N(ae.l),ve=function(se,le,ne){var me,Ee,be;function De(ke,_e,Ce){return Ce<0&&(Ce+=1),Ce>1&&(Ce-=1),Ce<1/6?ke+6*(_e-ke)*Ce:Ce<.5?_e:Ce<2/3?ke+(_e-ke)*(2/3-Ce)*6:ke}if(se=D(se,360),le=D(le,100),ne=D(ne,100),le===0)me=Ee=be=ne;else{var Ue=ne<.5?ne*(1+le):ne+le-ne*le,he=2*ne-Ue;me=De(he,Ue,se+1/3),Ee=De(he,Ue,se),be=De(he,Ue,se-1/3)}return{r:255*me,g:255*Ee,b:255*be}}(ae.h,xe,Oe),Ae=!0,Te="hsl"),ae.hasOwnProperty("a")&&(we=ae.a)),we=P(we),{ok:Ae,format:ae.format||Te,r:s(255,e(ve.r,0)),g:s(255,e(ve.g,0)),b:s(255,e(ve.b,0)),a:we}}(J);this._originalInput=J,this._r=re.r,this._g=re.g,this._b=re.b,this._a=re.a,this._roundA=d(100*this._a)/100,this._format=ee.format||re.format,this._gradientType=ee.gradientType,this._r<1&&(this._r=d(this._r)),this._g<1&&(this._g=d(this._g)),this._b<1&&(this._b=d(this._b)),this._ok=re.ok,this._tc_id=b++}function n(J,ee,re){J=D(J,255),ee=D(ee,255),re=D(re,255);var ae,oe,ce=e(J,ee,re),pe=s(J,ee,re),ve=(ce+pe)/2;if(ce==pe)ae=oe=0;else{var we=ce-pe;switch(oe=ve>.5?we/(2-ce-pe):we/(ce+pe),ce){case J:ae=(ee-re)/we+(ee<re?6:0);break;case ee:ae=(re-J)/we+2;break;case re:ae=(J-ee)/we+4}ae/=6}return{h:ae,s:oe,l:ve}}function a(J,ee,re){J=D(J,255),ee=D(ee,255),re=D(re,255);var ae,oe,ce=e(J,ee,re),pe=s(J,ee,re),ve=ce,we=ce-pe;if(oe=ce===0?0:we/ce,ce==pe)ae=0;else{switch(ce){case J:ae=(ee-re)/we+(ee<re?6:0);break;case ee:ae=(re-J)/we+2;break;case re:ae=(J-ee)/we+4}ae/=6}return{h:ae,s:oe,v:ve}}function o(J,ee,re,ae){var oe=[H(d(J).toString(16)),H(d(ee).toString(16)),H(d(re).toString(16))];return ae&&oe[0].charAt(0)==oe[0].charAt(1)&&oe[1].charAt(0)==oe[1].charAt(1)&&oe[2].charAt(0)==oe[2].charAt(1)?oe[0].charAt(0)+oe[1].charAt(0)+oe[2].charAt(0):oe.join("")}function u(J,ee,re,ae){return[H(F(ae)),H(d(J).toString(16)),H(d(ee).toString(16)),H(d(re).toString(16))].join("")}function p(J,ee){ee=ee===0?0:ee||10;var re=r(J).toHsl();return re.s-=ee/100,re.s=G(re.s),r(re)}function c(J,ee){ee=ee===0?0:ee||10;var re=r(J).toHsl();return re.s+=ee/100,re.s=G(re.s),r(re)}function x(J){return r(J).desaturate(100)}function g(J,ee){ee=ee===0?0:ee||10;var re=r(J).toHsl();return re.l+=ee/100,re.l=G(re.l),r(re)}function f(J,ee){ee=ee===0?0:ee||10;var re=r(J).toRgb();return re.r=e(0,s(255,re.r-d(-ee/100*255))),re.g=e(0,s(255,re.g-d(-ee/100*255))),re.b=e(0,s(255,re.b-d(-ee/100*255))),r(re)}function y(J,ee){ee=ee===0?0:ee||10;var re=r(J).toHsl();return re.l-=ee/100,re.l=G(re.l),r(re)}function v(J,ee){var re=r(J).toHsl(),ae=(re.h+ee)%360;return re.h=ae<0?360+ae:ae,r(re)}function m(J){var ee=r(J).toHsl();return ee.h=(ee.h+180)%360,r(ee)}function _(J){var ee=r(J).toHsl(),re=ee.h;return[r(J),r({h:(re+120)%360,s:ee.s,l:ee.l}),r({h:(re+240)%360,s:ee.s,l:ee.l})]}function h(J){var ee=r(J).toHsl(),re=ee.h;return[r(J),r({h:(re+90)%360,s:ee.s,l:ee.l}),r({h:(re+180)%360,s:ee.s,l:ee.l}),r({h:(re+270)%360,s:ee.s,l:ee.l})]}function A(J){var ee=r(J).toHsl(),re=ee.h;return[r(J),r({h:(re+72)%360,s:ee.s,l:ee.l}),r({h:(re+216)%360,s:ee.s,l:ee.l})]}function w(J,ee,re){ee=ee||6,re=re||30;var ae=r(J).toHsl(),oe=360/re,ce=[r(J)];for(ae.h=(ae.h-(oe*ee>>1)+720)%360;--ee;)ae.h=(ae.h+oe)%360,ce.push(r(ae));return ce}function E(J,ee){ee=ee||6;for(var re=r(J).toHsv(),ae=re.h,oe=re.s,ce=re.v,pe=[],ve=1/ee;ee--;)pe.push(r({h:ae,s:oe,v:ce})),ce=(ce+ve)%1;return pe}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var J=this.toRgb();return(299*J.r+587*J.g+114*J.b)/1e3},getLuminance:function(){var J,ee,re,ae=this.toRgb();return J=ae.r/255,ee=ae.g/255,re=ae.b/255,.2126*(J<=.03928?J/12.92:k.pow((J+.055)/1.055,2.4))+.7152*(ee<=.03928?ee/12.92:k.pow((ee+.055)/1.055,2.4))+.0722*(re<=.03928?re/12.92:k.pow((re+.055)/1.055,2.4))},setAlpha:function(J){return this._a=P(J),this._roundA=d(100*this._a)/100,this},toHsv:function(){var J=a(this._r,this._g,this._b);return{h:360*J.h,s:J.s,v:J.v,a:this._a}},toHsvString:function(){var J=a(this._r,this._g,this._b),ee=d(360*J.h),re=d(100*J.s),ae=d(100*J.v);return this._a==1?"hsv("+ee+", "+re+"%, "+ae+"%)":"hsva("+ee+", "+re+"%, "+ae+"%, "+this._roundA+")"},toHsl:function(){var J=n(this._r,this._g,this._b);return{h:360*J.h,s:J.s,l:J.l,a:this._a}},toHslString:function(){var J=n(this._r,this._g,this._b),ee=d(360*J.h),re=d(100*J.s),ae=d(100*J.l);return this._a==1?"hsl("+ee+", "+re+"%, "+ae+"%)":"hsla("+ee+", "+re+"%, "+ae+"%, "+this._roundA+")"},toHex:function(J){return o(this._r,this._g,this._b,J)},toHexString:function(J){return"#"+this.toHex(J)},toHex8:function(J){return function(ee,re,ae,oe,ce){var pe=[H(d(ee).toString(16)),H(d(re).toString(16)),H(d(ae).toString(16)),H(F(oe))];return ce&&pe[0].charAt(0)==pe[0].charAt(1)&&pe[1].charAt(0)==pe[1].charAt(1)&&pe[2].charAt(0)==pe[2].charAt(1)&&pe[3].charAt(0)==pe[3].charAt(1)?pe[0].charAt(0)+pe[1].charAt(0)+pe[2].charAt(0)+pe[3].charAt(0):pe.join("")}(this._r,this._g,this._b,this._a,J)},toHex8String:function(J){return"#"+this.toHex8(J)},toRgb:function(){return{r:d(this._r),g:d(this._g),b:d(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+d(this._r)+", "+d(this._g)+", "+d(this._b)+")":"rgba("+d(this._r)+", "+d(this._g)+", "+d(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:d(100*D(this._r,255))+"%",g:d(100*D(this._g,255))+"%",b:d(100*D(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+d(100*D(this._r,255))+"%, "+d(100*D(this._g,255))+"%, "+d(100*D(this._b,255))+"%)":"rgba("+d(100*D(this._r,255))+"%, "+d(100*D(this._g,255))+"%, "+d(100*D(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(C[o(this._r,this._g,this._b,!0)]||!1)},toFilter:function(J){var ee="#"+u(this._r,this._g,this._b,this._a),re=ee,ae=this._gradientType?"GradientType = 1, ":"";if(J){var oe=r(J);re="#"+u(oe._r,oe._g,oe._b,oe._a)}return"progid:DXImageTransform.Microsoft.gradient("+ae+"startColorstr="+ee+",endColorstr="+re+")"},toString:function(J){var ee=!!J;J=J||this._format;var re=!1,ae=this._a<1&&this._a>=0;return ee||!ae||J!=="hex"&&J!=="hex6"&&J!=="hex3"&&J!=="hex4"&&J!=="hex8"&&J!=="name"?(J==="rgb"&&(re=this.toRgbString()),J==="prgb"&&(re=this.toPercentageRgbString()),J!=="hex"&&J!=="hex6"||(re=this.toHexString()),J==="hex3"&&(re=this.toHexString(!0)),J==="hex4"&&(re=this.toHex8String(!0)),J==="hex8"&&(re=this.toHex8String()),J==="name"&&(re=this.toName()),J==="hsl"&&(re=this.toHslString()),J==="hsv"&&(re=this.toHsvString()),re||this.toHexString()):J==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(J,ee){var re=J.apply(null,[this].concat([].slice.call(ee)));return this._r=re._r,this._g=re._g,this._b=re._b,this.setAlpha(re._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(f,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(c,arguments)},greyscale:function(){return this._applyModification(x,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(J,ee){return J.apply(null,[this].concat([].slice.call(ee)))},analogous:function(){return this._applyCombination(w,arguments)},complement:function(){return this._applyCombination(m,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(A,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(h,arguments)}},r.fromRatio=function(J,ee){if(typeof J=="object"){var re={};for(var ae in J)J.hasOwnProperty(ae)&&(re[ae]=ae==="a"?J[ae]:N(J[ae]));J=re}return r(J,ee)},r.equals=function(J,ee){return!(!J||!ee)&&r(J).toRgbString()==r(ee).toRgbString()},r.random=function(){return r.fromRatio({r:i(),g:i(),b:i()})},r.mix=function(J,ee,re){re=re===0?0:re||50;var ae=r(J).toRgb(),oe=r(ee).toRgb(),ce=re/100;return r({r:(oe.r-ae.r)*ce+ae.r,g:(oe.g-ae.g)*ce+ae.g,b:(oe.b-ae.b)*ce+ae.b,a:(oe.a-ae.a)*ce+ae.a})},r.readability=function(J,ee){var re=r(J),ae=r(ee);return(k.max(re.getLuminance(),ae.getLuminance())+.05)/(k.min(re.getLuminance(),ae.getLuminance())+.05)},r.isReadable=function(J,ee,re){var ae,oe,ce,pe,ve,we=r.readability(J,ee);switch(oe=!1,(ce=re,(pe=((ce=ce||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&pe!=="AAA"&&(pe="AA"),(ve=(ce.size||"small").toLowerCase())!=="small"&&ve!=="large"&&(ve="small"),ae={level:pe,size:ve}).level+ae.size){case"AAsmall":case"AAAlarge":oe=we>=4.5;break;case"AAlarge":oe=we>=3;break;case"AAAsmall":oe=we>=7}return oe},r.mostReadable=function(J,ee,re){var ae,oe,ce,pe,ve=null,we=0;oe=(re=re||{}).includeFallbackColors,ce=re.level,pe=re.size;for(var xe=0;xe<ee.length;xe++)(ae=r.readability(J,ee[xe]))>we&&(we=ae,ve=r(ee[xe]));return r.isReadable(J,ve,{level:ce,size:pe})||!oe?ve:(re.includeFallbackColors=!1,r.mostReadable(J,["#fff","#000"],re))};var L=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},C=r.hexNames=function(J){var ee={};for(var re in J)J.hasOwnProperty(re)&&(ee[J[re]]=re);return ee}(L);function P(J){return J=parseFloat(J),(isNaN(J)||J<0||J>1)&&(J=1),J}function D(J,ee){(function(ae){return typeof ae=="string"&&ae.indexOf(".")!=-1&&parseFloat(ae)===1})(J)&&(J="100%");var re=function(ae){return typeof ae=="string"&&ae.indexOf("%")!=-1}(J);return J=s(ee,e(0,parseFloat(J))),re&&(J=parseInt(J*ee,10)/100),k.abs(J-ee)<1e-6?1:J%ee/parseFloat(ee)}function G(J){return s(1,e(0,J))}function I(J){return parseInt(J,16)}function H(J){return J.length==1?"0"+J:""+J}function N(J){return J<=1&&(J=100*J+"%"),J}function F(J){return k.round(255*parseFloat(J)).toString(16)}function V(J){return I(J)/255}var q,te,$,W=(te="[\\s|\\(]+("+(q="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+q+")[,|\\s]+("+q+")\\s*\\)?",$="[\\s|\\(]+("+q+")[,|\\s]+("+q+")[,|\\s]+("+q+")[,|\\s]+("+q+")\\s*\\)?",{CSS_UNIT:new RegExp(q),rgb:new RegExp("rgb"+te),rgba:new RegExp("rgba"+$),hsl:new RegExp("hsl"+te),hsla:new RegExp("hsla"+$),hsv:new RegExp("hsv"+te),hsva:new RegExp("hsva"+$),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Z(J){return!!W.CSS_UNIT.exec(J)}Q.exports?Q.exports=r:(S=function(){return r}.call(z,t,z,Q))===void 0||(Q.exports=S)})(Math)},57060:function(Q){Q.exports=t,Q.exports.float32=Q.exports.float=t,Q.exports.fract32=Q.exports.fract=function(S,k){if(S.length){if(S instanceof Float32Array)return new Float32Array(S.length);k instanceof Float32Array||(k=t(S));for(var l=0,T=k.length;l<T;l++)k[l]=S[l]-k[l];return k}return t(S-t(S))};var z=new Float32Array(1);function t(S){return S.length?S instanceof Float32Array?S:new Float32Array(S):(z[0]=S,z[0])}},75686:function(Q,z,t){var S=t(25677);Q.exports=T;var k=96;function l(b,d){var s=S(getComputedStyle(b).getPropertyValue(d));return s[0]*T(s[1],b)}function T(b,d){switch(d=d||document.body,b=(b||"px").trim().toLowerCase(),d!==window&&d!==document||(d=document.body),b){case"%":return d.clientHeight/100;case"ch":case"ex":return function(s,e){var i=document.createElement("div");i.style["font-size"]="128"+s,e.appendChild(i);var r=l(i,"font-size")/128;return e.removeChild(i),r}(b,d);case"em":return l(d,"font-size");case"rem":return l(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return k;case"cm":return k/2.54;case"mm":return k/25.4;case"pt":return k/72;case"pc":return k/6}return 1}},96892:function(Q,z,t){function S(T){return T}function k(T,b){return typeof b=="string"&&(b=T.objects[b]),b.type==="GeometryCollection"?{type:"FeatureCollection",features:b.geometries.map(function(d){return l(T,d)})}:l(T,b)}function l(T,b){var d=b.id,s=b.bbox,e=b.properties==null?{}:b.properties,i=function(r,n){var a=function(f){if(f==null)return S;var y,v,m=f.scale[0],_=f.scale[1],h=f.translate[0],A=f.translate[1];return function(w,E){E||(y=v=0);var L=2,C=w.length,P=new Array(C);for(P[0]=(y+=w[0])*m+h,P[1]=(v+=w[1])*_+A;L<C;)P[L]=w[L],++L;return P}}(r.transform),o=r.arcs;function u(f,y){y.length&&y.pop();for(var v=o[f<0?~f:f],m=0,_=v.length;m<_;++m)y.push(a(v[m],m));f<0&&function(h,A){for(var w,E=h.length,L=E-A;L<--E;)w=h[L],h[L++]=h[E],h[E]=w}(y,_)}function p(f){return a(f)}function c(f){for(var y=[],v=0,m=f.length;v<m;++v)u(f[v],y);return y.length<2&&y.push(y[0]),y}function x(f){for(var y=c(f);y.length<4;)y.push(y[0]);return y}function g(f){return f.map(x)}return function f(y){var v,m=y.type;switch(m){case"GeometryCollection":return{type:m,geometries:y.geometries.map(f)};case"Point":v=p(y.coordinates);break;case"MultiPoint":v=y.coordinates.map(p);break;case"LineString":v=c(y.arcs);break;case"MultiLineString":v=y.arcs.map(c);break;case"Polygon":v=g(y.arcs);break;case"MultiPolygon":v=y.arcs.map(g);break;default:return null}return{type:m,coordinates:v}}(n)}(T,b);return d==null&&s==null?{type:"Feature",properties:e,geometry:i}:s==null?{type:"Feature",id:d,properties:e,geometry:i}:{type:"Feature",id:d,bbox:s,properties:e,geometry:i}}t.d(z,{zL:function(){return k}})},73116:function(Q,z,t){var S=t(24511);Q.exports=function(k){if(typeof k!="function"||!hasOwnProperty.call(k,"length"))return!1;try{if(typeof k.length!="number"||typeof k.call!="function"||typeof k.apply!="function")return!1}catch{return!1}return!S(k)}},69190:function(Q,z,t){var S=t(24582),k=t(47403),l=t(9234),T=t(6048),b=function(d,s){return d.replace("%v",T(s))};Q.exports=function(d,s,e){if(!k(e))throw new TypeError(b(s,d));if(!S(d)){if("default"in e)return e.default;if(e.isOptional)return null}var i=l(e.errorMessage);throw S(i)||(i=s),new TypeError(b(i,d))}},18497:function(Q){Q.exports=function(z){try{return z.toString()}catch{try{return String(z)}catch{return null}}}},6048:function(Q,z,t){var S=t(18497),k=/[\n\r\u2028\u2029]/g;Q.exports=function(l){var T=S(l);return T===null?"<Non-coercible to string value>":(T.length>100&&(T=T.slice(0,99)+""),T=T.replace(k,function(b){switch(b){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},47403:function(Q,z,t){var S=t(24582),k={object:!0,function:!0,undefined:!0};Q.exports=function(l){return!!S(l)&&hasOwnProperty.call(k,typeof l)}},82527:function(Q,z,t){var S=t(69190),k=t(84985);Q.exports=function(l){return k(l)?l:S(l,"%v is not a plain function",arguments[1])}},84985:function(Q,z,t){var S=t(73116),k=/^\s*class[\s{/}]/,l=Function.prototype.toString;Q.exports=function(T){return!!S(T)&&!k.test(l.call(T))}},24511:function(Q,z,t){var S=t(47403);Q.exports=function(k){if(!S(k))return!1;try{return!!k.constructor&&k.constructor.prototype===k}catch{return!1}}},9234:function(Q,z,t){var S=t(24582),k=t(47403),l=Object.prototype.toString;Q.exports=function(T){if(!S(T))return null;if(k(T)){var b=T.toString;if(typeof b!="function"||b===l)return null}try{return""+T}catch{return null}}},10424:function(Q,z,t){var S=t(69190),k=t(24582);Q.exports=function(l){return k(l)?l:S(l,"Cannot use %v",arguments[1])}},24582:function(Q){Q.exports=function(z){return z!=null}},58404:function(Q,z,t){var S=t(13547),k=t(12129),l=t(12856).Buffer;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:k([32,0]),UINT16:k([32,0]),UINT32:k([32,0]),BIGUINT64:k([32,0]),INT8:k([32,0]),INT16:k([32,0]),INT32:k([32,0]),BIGINT64:k([32,0]),FLOAT:k([32,0]),DOUBLE:k([32,0]),DATA:k([32,0]),UINT8C:k([32,0]),BUFFER:k([32,0])});var T=typeof Uint8ClampedArray<"u",b=typeof BigUint64Array<"u",d=typeof BigInt64Array<"u",s=t.g.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=k([32,0])),s.BIGUINT64||(s.BIGUINT64=k([32,0])),s.BIGINT64||(s.BIGINT64=k([32,0])),s.BUFFER||(s.BUFFER=k([32,0]));var e=s.DATA,i=s.BUFFER;function r(A){if(A){var w=A.length||A.byteLength,E=S.log2(w);e[E].push(A)}}function n(A){A=S.nextPow2(A);var w=S.log2(A),E=e[w];return E.length>0?E.pop():new ArrayBuffer(A)}function a(A){return new Uint8Array(n(A),0,A)}function o(A){return new Uint16Array(n(2*A),0,A)}function u(A){return new Uint32Array(n(4*A),0,A)}function p(A){return new Int8Array(n(A),0,A)}function c(A){return new Int16Array(n(2*A),0,A)}function x(A){return new Int32Array(n(4*A),0,A)}function g(A){return new Float32Array(n(4*A),0,A)}function f(A){return new Float64Array(n(8*A),0,A)}function y(A){return T?new Uint8ClampedArray(n(A),0,A):a(A)}function v(A){return b?new BigUint64Array(n(8*A),0,A):null}function m(A){return d?new BigInt64Array(n(8*A),0,A):null}function _(A){return new DataView(n(A),0,A)}function h(A){A=S.nextPow2(A);var w=S.log2(A),E=i[w];return E.length>0?E.pop():new l(A)}z.free=function(A){if(l.isBuffer(A))i[S.log2(A.length)].push(A);else{if(Object.prototype.toString.call(A)!=="[object ArrayBuffer]"&&(A=A.buffer),!A)return;var w=A.length||A.byteLength,E=0|S.log2(w);e[E].push(A)}},z.freeUint8=z.freeUint16=z.freeUint32=z.freeBigUint64=z.freeInt8=z.freeInt16=z.freeInt32=z.freeBigInt64=z.freeFloat32=z.freeFloat=z.freeFloat64=z.freeDouble=z.freeUint8Clamped=z.freeDataView=function(A){r(A.buffer)},z.freeArrayBuffer=r,z.freeBuffer=function(A){i[S.log2(A.length)].push(A)},z.malloc=function(A,w){if(w===void 0||w==="arraybuffer")return n(A);switch(w){case"uint8":return a(A);case"uint16":return o(A);case"uint32":return u(A);case"int8":return p(A);case"int16":return c(A);case"int32":return x(A);case"float":case"float32":return g(A);case"double":case"float64":return f(A);case"uint8_clamped":return y(A);case"bigint64":return m(A);case"biguint64":return v(A);case"buffer":return h(A);case"data":case"dataview":return _(A);default:return null}return null},z.mallocArrayBuffer=n,z.mallocUint8=a,z.mallocUint16=o,z.mallocUint32=u,z.mallocInt8=p,z.mallocInt16=c,z.mallocInt32=x,z.mallocFloat32=z.mallocFloat=g,z.mallocFloat64=z.mallocDouble=f,z.mallocUint8Clamped=y,z.mallocBigUint64=v,z.mallocBigInt64=m,z.mallocDataView=_,z.mallocBuffer=h,z.clearCache=function(){for(var A=0;A<32;++A)s.UINT8[A].length=0,s.UINT16[A].length=0,s.UINT32[A].length=0,s.INT8[A].length=0,s.INT16[A].length=0,s.INT32[A].length=0,s.FLOAT[A].length=0,s.DOUBLE[A].length=0,s.BIGUINT64[A].length=0,s.BIGINT64[A].length=0,s.UINT8C[A].length=0,e[A].length=0,i[A].length=0}},90448:function(Q){var z=/[\'\"]/;Q.exports=function(t){return t?(z.test(t.charAt(0))&&(t=t.substr(1)),z.test(t.charAt(t.length-1))&&(t=t.substr(0,t.length-1)),t):""}},93447:function(Q){Q.exports=function(z,t,S){Array.isArray(S)||(S=[].slice.call(arguments,2));for(var k=0,l=S.length;k<l;k++){var T=S[k];for(var b in T)if((t[b]===void 0||Array.isArray(t[b])||z[b]!==t[b])&&b in t){var d;if(T[b]===!0)d=t[b];else if(T[b]===!1||typeof T[b]=="function"&&(d=T[b](t[b],z,t))===void 0)continue;z[b]=d}}return z}},20588:function(Q,z,t){function S(k){try{if(!t.g.localStorage)return!1}catch{return!1}var l=t.g.localStorage[k];return l!=null&&String(l).toLowerCase()==="true"}Q.exports=function(k,l){if(S("noDeprecation"))return k;var T=!1;return function(){if(!T){if(S("throwDeprecation"))throw new Error(l);S("traceDeprecation")?console.trace(l):console.warn(l),T=!0}return k.apply(this,arguments)}}},45920:function(Q){Q.exports=function(z){return z&&typeof z=="object"&&typeof z.copy=="function"&&typeof z.fill=="function"&&typeof z.readUInt8=="function"}},4936:function(Q,z,t){var S=t(47216),k=t(65481),l=t(21099),T=t(9187);function b(D){return D.call.bind(D)}var d=typeof BigInt<"u",s=typeof Symbol<"u",e=b(Object.prototype.toString),i=b(Number.prototype.valueOf),r=b(String.prototype.valueOf),n=b(Boolean.prototype.valueOf);if(d)var a=b(BigInt.prototype.valueOf);if(s)var o=b(Symbol.prototype.valueOf);function u(D,G){if(typeof D!="object")return!1;try{return G(D),!0}catch{return!1}}function p(D){return e(D)==="[object Map]"}function c(D){return e(D)==="[object Set]"}function x(D){return e(D)==="[object WeakMap]"}function g(D){return e(D)==="[object WeakSet]"}function f(D){return e(D)==="[object ArrayBuffer]"}function y(D){return typeof ArrayBuffer<"u"&&(f.working?f(D):D instanceof ArrayBuffer)}function v(D){return e(D)==="[object DataView]"}function m(D){return typeof DataView<"u"&&(v.working?v(D):D instanceof DataView)}z.isArgumentsObject=S,z.isGeneratorFunction=k,z.isTypedArray=T,z.isPromise=function(D){return typeof Promise<"u"&&D instanceof Promise||D!==null&&typeof D=="object"&&typeof D.then=="function"&&typeof D.catch=="function"},z.isArrayBufferView=function(D){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(D):T(D)||m(D)},z.isUint8Array=function(D){return l(D)==="Uint8Array"},z.isUint8ClampedArray=function(D){return l(D)==="Uint8ClampedArray"},z.isUint16Array=function(D){return l(D)==="Uint16Array"},z.isUint32Array=function(D){return l(D)==="Uint32Array"},z.isInt8Array=function(D){return l(D)==="Int8Array"},z.isInt16Array=function(D){return l(D)==="Int16Array"},z.isInt32Array=function(D){return l(D)==="Int32Array"},z.isFloat32Array=function(D){return l(D)==="Float32Array"},z.isFloat64Array=function(D){return l(D)==="Float64Array"},z.isBigInt64Array=function(D){return l(D)==="BigInt64Array"},z.isBigUint64Array=function(D){return l(D)==="BigUint64Array"},p.working=typeof Map<"u"&&p(new Map),z.isMap=function(D){return typeof Map<"u"&&(p.working?p(D):D instanceof Map)},c.working=typeof Set<"u"&&c(new Set),z.isSet=function(D){return typeof Set<"u"&&(c.working?c(D):D instanceof Set)},x.working=typeof WeakMap<"u"&&x(new WeakMap),z.isWeakMap=function(D){return typeof WeakMap<"u"&&(x.working?x(D):D instanceof WeakMap)},g.working=typeof WeakSet<"u"&&g(new WeakSet),z.isWeakSet=function(D){return g(D)},f.working=typeof ArrayBuffer<"u"&&f(new ArrayBuffer),z.isArrayBuffer=y,v.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&v(new DataView(new ArrayBuffer(1),0,1)),z.isDataView=m;var _=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function h(D){return e(D)==="[object SharedArrayBuffer]"}function A(D){return _!==void 0&&(h.working===void 0&&(h.working=h(new _)),h.working?h(D):D instanceof _)}function w(D){return u(D,i)}function E(D){return u(D,r)}function L(D){return u(D,n)}function C(D){return d&&u(D,a)}function P(D){return s&&u(D,o)}z.isSharedArrayBuffer=A,z.isAsyncFunction=function(D){return e(D)==="[object AsyncFunction]"},z.isMapIterator=function(D){return e(D)==="[object Map Iterator]"},z.isSetIterator=function(D){return e(D)==="[object Set Iterator]"},z.isGeneratorObject=function(D){return e(D)==="[object Generator]"},z.isWebAssemblyCompiledModule=function(D){return e(D)==="[object WebAssembly.Module]"},z.isNumberObject=w,z.isStringObject=E,z.isBooleanObject=L,z.isBigIntObject=C,z.isSymbolObject=P,z.isBoxedPrimitive=function(D){return w(D)||E(D)||L(D)||C(D)||P(D)},z.isAnyArrayBuffer=function(D){return typeof Uint8Array<"u"&&(y(D)||A(D))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(D){Object.defineProperty(z,D,{enumerable:!1,value:function(){throw new Error(D+" is not supported in userland")}})})},43827:function(Q,z,t){var S=t(90386),k=Object.getOwnPropertyDescriptors||function(P){for(var D=Object.keys(P),G={},I=0;I<D.length;I++)G[D[I]]=Object.getOwnPropertyDescriptor(P,D[I]);return G},l=/%[sdj%]/g;z.format=function(P){if(!x(P)){for(var D=[],G=0;G<arguments.length;G++)D.push(s(arguments[G]));return D.join(" ")}G=1;for(var I=arguments,H=I.length,N=String(P).replace(l,function(V){if(V==="%%")return"%";if(G>=H)return V;switch(V){case"%s":return String(I[G++]);case"%d":return Number(I[G++]);case"%j":try{return JSON.stringify(I[G++])}catch{return"[Circular]"}default:return V}}),F=I[G];G<H;F=I[++G])p(F)||!y(F)?N+=" "+F:N+=" "+s(F);return N},z.deprecate=function(P,D){if(S!==void 0&&S.noDeprecation===!0)return P;if(S===void 0)return function(){return z.deprecate(P,D).apply(this,arguments)};var G=!1;return function(){if(!G){if(S.throwDeprecation)throw new Error(D);S.traceDeprecation?console.trace(D):console.error(D),G=!0}return P.apply(this,arguments)}};var T={},b=/^$/;if(S.env.NODE_DEBUG){var d=S.env.NODE_DEBUG;d=d.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),b=new RegExp("^"+d+"$","i")}function s(P,D){var G={seen:[],stylize:i};return arguments.length>=3&&(G.depth=arguments[2]),arguments.length>=4&&(G.colors=arguments[3]),u(D)?G.showHidden=D:D&&z._extend(G,D),g(G.showHidden)&&(G.showHidden=!1),g(G.depth)&&(G.depth=2),g(G.colors)&&(G.colors=!1),g(G.customInspect)&&(G.customInspect=!0),G.colors&&(G.stylize=e),r(G,P,G.depth)}function e(P,D){var G=s.styles[D];return G?"\x1B["+s.colors[G][0]+"m"+P+"\x1B["+s.colors[G][1]+"m":P}function i(P,D){return P}function r(P,D,G){if(P.customInspect&&D&&_(D.inspect)&&D.inspect!==z.inspect&&(!D.constructor||D.constructor.prototype!==D)){var I=D.inspect(G,P);return x(I)||(I=r(P,I,G)),I}var H=function(Z,J){if(g(J))return Z.stylize("undefined","undefined");if(x(J)){var ee="'"+JSON.stringify(J).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Z.stylize(ee,"string")}return c(J)?Z.stylize(""+J,"number"):u(J)?Z.stylize(""+J,"boolean"):p(J)?Z.stylize("null","null"):void 0}(P,D);if(H)return H;var N=Object.keys(D),F=function(Z){var J={};return Z.forEach(function(ee,re){J[ee]=!0}),J}(N);if(P.showHidden&&(N=Object.getOwnPropertyNames(D)),m(D)&&(N.indexOf("message")>=0||N.indexOf("description")>=0))return n(D);if(N.length===0){if(_(D)){var V=D.name?": "+D.name:"";return P.stylize("[Function"+V+"]","special")}if(f(D))return P.stylize(RegExp.prototype.toString.call(D),"regexp");if(v(D))return P.stylize(Date.prototype.toString.call(D),"date");if(m(D))return n(D)}var q,te="",$=!1,W=["{","}"];return o(D)&&($=!0,W=["[","]"]),_(D)&&(te=" [Function"+(D.name?": "+D.name:"")+"]"),f(D)&&(te=" "+RegExp.prototype.toString.call(D)),v(D)&&(te=" "+Date.prototype.toUTCString.call(D)),m(D)&&(te=" "+n(D)),N.length!==0||$&&D.length!=0?G<0?f(D)?P.stylize(RegExp.prototype.toString.call(D),"regexp"):P.stylize("[Object]","special"):(P.seen.push(D),q=$?function(Z,J,ee,re,ae){for(var oe=[],ce=0,pe=J.length;ce<pe;++ce)E(J,String(ce))?oe.push(a(Z,J,ee,re,String(ce),!0)):oe.push("");return ae.forEach(function(ve){ve.match(/^\d+$/)||oe.push(a(Z,J,ee,re,ve,!0))}),oe}(P,D,G,F,N):N.map(function(Z){return a(P,D,G,F,Z,$)}),P.seen.pop(),function(Z,J,ee){return Z.reduce(function(re,ae){return ae.indexOf(`
`),re+ae.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?ee[0]+(J===""?"":J+`
 `)+" "+Z.join(`,
  `)+" "+ee[1]:ee[0]+J+" "+Z.join(", ")+" "+ee[1]}(q,te,W)):W[0]+te+W[1]}function n(P){return"["+Error.prototype.toString.call(P)+"]"}function a(P,D,G,I,H,N){var F,V,q;if((q=Object.getOwnPropertyDescriptor(D,H)||{value:D[H]}).get?V=q.set?P.stylize("[Getter/Setter]","special"):P.stylize("[Getter]","special"):q.set&&(V=P.stylize("[Setter]","special")),E(I,H)||(F="["+H+"]"),V||(P.seen.indexOf(q.value)<0?(V=p(G)?r(P,q.value,null):r(P,q.value,G-1)).indexOf(`
`)>-1&&(V=N?V.split(`
`).map(function(te){return"  "+te}).join(`
`).slice(2):`
`+V.split(`
`).map(function(te){return"   "+te}).join(`
`)):V=P.stylize("[Circular]","special")),g(F)){if(N&&H.match(/^\d+$/))return V;(F=JSON.stringify(""+H)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(F=F.slice(1,-1),F=P.stylize(F,"name")):(F=F.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),F=P.stylize(F,"string"))}return F+": "+V}function o(P){return Array.isArray(P)}function u(P){return typeof P=="boolean"}function p(P){return P===null}function c(P){return typeof P=="number"}function x(P){return typeof P=="string"}function g(P){return P===void 0}function f(P){return y(P)&&h(P)==="[object RegExp]"}function y(P){return typeof P=="object"&&P!==null}function v(P){return y(P)&&h(P)==="[object Date]"}function m(P){return y(P)&&(h(P)==="[object Error]"||P instanceof Error)}function _(P){return typeof P=="function"}function h(P){return Object.prototype.toString.call(P)}function A(P){return P<10?"0"+P.toString(10):P.toString(10)}z.debuglog=function(P){if(P=P.toUpperCase(),!T[P])if(b.test(P)){var D=S.pid;T[P]=function(){var G=z.format.apply(z,arguments);console.error("%s %d: %s",P,D,G)}}else T[P]=function(){};return T[P]},z.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},z.types=t(4936),z.isArray=o,z.isBoolean=u,z.isNull=p,z.isNullOrUndefined=function(P){return P==null},z.isNumber=c,z.isString=x,z.isSymbol=function(P){return typeof P=="symbol"},z.isUndefined=g,z.isRegExp=f,z.types.isRegExp=f,z.isObject=y,z.isDate=v,z.types.isDate=v,z.isError=m,z.types.isNativeError=m,z.isFunction=_,z.isPrimitive=function(P){return P===null||typeof P=="boolean"||typeof P=="number"||typeof P=="string"||typeof P=="symbol"||P===void 0},z.isBuffer=t(45920);var w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(P,D){return Object.prototype.hasOwnProperty.call(P,D)}z.log=function(){var P,D;console.log("%s - %s",(D=[A((P=new Date).getHours()),A(P.getMinutes()),A(P.getSeconds())].join(":"),[P.getDate(),w[P.getMonth()],D].join(" ")),z.format.apply(z,arguments))},z.inherits=t(42018),z._extend=function(P,D){if(!D||!y(D))return P;for(var G=Object.keys(D),I=G.length;I--;)P[G[I]]=D[G[I]];return P};var L=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function C(P,D){if(!P){var G=new Error("Promise was rejected with a falsy value");G.reason=P,P=G}return D(P)}z.promisify=function(P){if(typeof P!="function")throw new TypeError('The "original" argument must be of type Function');if(L&&P[L]){var D;if(typeof(D=P[L])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(D,L,{value:D,enumerable:!1,writable:!1,configurable:!0}),D}function D(){for(var G,I,H=new Promise(function(V,q){G=V,I=q}),N=[],F=0;F<arguments.length;F++)N.push(arguments[F]);N.push(function(V,q){V?I(V):G(q)});try{P.apply(this,N)}catch(V){I(V)}return H}return Object.setPrototypeOf(D,Object.getPrototypeOf(P)),L&&Object.defineProperty(D,L,{value:D,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(D,k(P))},z.promisify.custom=L,z.callbackify=function(P){if(typeof P!="function")throw new TypeError('The "original" argument must be of type Function');function D(){for(var G=[],I=0;I<arguments.length;I++)G.push(arguments[I]);var H=G.pop();if(typeof H!="function")throw new TypeError("The last argument must be of type Function");var N=this,F=function(){return H.apply(N,arguments)};P.apply(this,G).then(function(V){S.nextTick(F.bind(null,null,V))},function(V){S.nextTick(C.bind(null,V,F))})}return Object.setPrototypeOf(D,Object.getPrototypeOf(P)),Object.defineProperties(D,k(P)),D}},40372:function(Q,z,t){var S=t(86249);Q.exports=function(k){return S("webgl",k)}},21099:function(Q,z,t){var S=t(31353),k=t(72077),l=t(6614),T=t(40383),b=l("Object.prototype.toString"),d=t(84543)(),s=typeof globalThis>"u"?t.g:globalThis,e=k(),i=l("String.prototype.slice"),r={},n=Object.getPrototypeOf;d&&T&&n&&S(e,function(o){if(typeof s[o]=="function"){var u=new s[o];if(Symbol.toStringTag in u){var p=n(u),c=T(p,Symbol.toStringTag);if(!c){var x=n(p);c=T(x,Symbol.toStringTag)}r[o]=c.get}}});var a=t(9187);Q.exports=function(o){return!!a(o)&&(d&&Symbol.toStringTag in o?function(u){var p=!1;return S(r,function(c,x){if(!p)try{var g=c.call(u);g===x&&(p=g)}catch{}}),p}(o):i(b(o),8,-1))}},3961:function(Q,z,t){var S=t(63489),k=t(56131),l=S.instance();function T(n){this.local=this.regionalOptions[n||""]||this.regionalOptions[""]}T.prototype=new S.baseCalendar,k(T.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(n,a){if(typeof n=="string"){var o=n.match(d);return o?o[0]:""}var u=this._validateYear(n),p=n.month(),c=""+this.toChineseMonth(u,p);return a&&c.length<2&&(c="0"+c),this.isIntercalaryMonth(u,p)&&(c+="i"),c},monthNames:function(n){if(typeof n=="string"){var a=n.match(s);return a?a[0]:""}var o=this._validateYear(n),u=n.month(),p=["","","","","","","","","","","",""][this.toChineseMonth(o,u)-1];return this.isIntercalaryMonth(o,u)&&(p=""+p),p},monthNamesShort:function(n){if(typeof n=="string"){var a=n.match(e);return a?a[0]:""}var o=this._validateYear(n),u=n.month(),p=["","","","","","","","","","","",""][this.toChineseMonth(o,u)-1];return this.isIntercalaryMonth(o,u)&&(p=""+p),p},parseMonth:function(n,a){n=this._validateYear(n);var o,u=parseInt(a);if(isNaN(u))a[0]===""&&(o=!0,a=a.substring(1)),a[a.length-1]===""&&(a=a.substring(0,a.length-1)),u=1+["","","","","","","","","","","",""].indexOf(a);else{var p=a[a.length-1];o=p==="i"||p==="I"}return this.toMonthIndex(n,u,o)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(n,a){if(n.year&&(n=n.year()),typeof n!="number"||n<1888||n>2111)throw a.replace(/\{0\}/,this.local.name);return n},toMonthIndex:function(n,a,o){var u=this.intercalaryMonth(n);if(o&&a!==u||a<1||a>12)throw S.local.invalidMonth.replace(/\{0\}/,this.local.name);return u?!o&&a<=u?a-1:a:a-1},toChineseMonth:function(n,a){n.year&&(a=(n=n.year()).month());var o=this.intercalaryMonth(n);if(a<0||a>(o?12:11))throw S.local.invalidMonth.replace(/\{0\}/,this.local.name);return o?a<o?a+1:a:a+1},intercalaryMonth:function(n){return n=this._validateYear(n),i[n-i[0]]>>13},isIntercalaryMonth:function(n,a){n.year&&(a=(n=n.year()).month());var o=this.intercalaryMonth(n);return!!o&&o===a},leapYear:function(n){return this.intercalaryMonth(n)!==0},weekOfYear:function(n,a,o){var u,p=this._validateYear(n,S.local.invalidyear),c=r[p-r[0]],x=c>>9&4095,g=c>>5&15,f=31&c;(u=l.newDate(x,g,f)).add(4-(u.dayOfWeek()||7),"d");var y=this.toJD(n,a,o)-u.toJD();return 1+Math.floor(y/7)},monthsInYear:function(n){return this.leapYear(n)?13:12},daysInMonth:function(n,a){n.year&&(a=n.month(),n=n.year()),n=this._validateYear(n);var o=i[n-i[0]];if(a>(o>>13?12:11))throw S.local.invalidMonth.replace(/\{0\}/,this.local.name);return o&1<<12-a?30:29},weekDay:function(n,a,o){return(this.dayOfWeek(n,a,o)||7)<6},toJD:function(n,a,o){var u=this._validate(n,c,o,S.local.invalidDate);n=this._validateYear(u.year()),a=u.month(),o=u.day();var p=this.isIntercalaryMonth(n,a),c=this.toChineseMonth(n,a),x=function(g,f,y,v,m){var _,h,A;if(typeof g=="object")h=g,_=f||{};else{var w;if(!(typeof g=="number"&&g>=1888&&g<=2111))throw new Error("Lunar year outside range 1888-2111");if(!(typeof f=="number"&&f>=1&&f<=12))throw new Error("Lunar month outside range 1 - 12");if(!(typeof y=="number"&&y>=1&&y<=30))throw new Error("Lunar day outside range 1 - 30");typeof v=="object"?(w=!1,_=v):(w=!!v,_={}),h={year:g,month:f,day:y,isIntercalary:w}}A=h.day-1;var E,L=i[h.year-i[0]],C=L>>13;E=C&&(h.month>C||h.isIntercalary)?h.month:h.month-1;for(var P=0;P<E;P++)A+=L&1<<12-P?30:29;var D=r[h.year-r[0]],G=new Date(D>>9&4095,(D>>5&15)-1,(31&D)+A);return _.year=G.getFullYear(),_.month=1+G.getMonth(),_.day=G.getDate(),_}(n,c,o,p);return l.toJD(x.year,x.month,x.day)},fromJD:function(n){var a=l.fromJD(n),o=function(p,c,x,g){var f,y;if(typeof p=="object")f=p,y=c||{};else{if(!(typeof p=="number"&&p>=1888&&p<=2111))throw new Error("Solar year outside range 1888-2111");if(!(typeof c=="number"&&c>=1&&c<=12))throw new Error("Solar month outside range 1 - 12");if(!(typeof x=="number"&&x>=1&&x<=31))throw new Error("Solar day outside range 1 - 31");f={year:p,month:c,day:x},y={}}var v=r[f.year-r[0]],m=f.year<<9|f.month<<5|f.day;y.year=m>=v?f.year:f.year-1,v=r[y.year-r[0]];var _,h=new Date(v>>9&4095,(v>>5&15)-1,31&v),A=new Date(f.year,f.month-1,f.day);_=Math.round((A-h)/864e5);var w,E=i[y.year-i[0]];for(w=0;w<13;w++){var L=E&1<<12-w?30:29;if(_<L)break;_-=L}var C=E>>13;return!C||w<C?(y.isIntercalary=!1,y.month=1+w):w===C?(y.isIntercalary=!0,y.month=w):(y.isIntercalary=!1,y.month=w),y.day=1+_,y}(a.year(),a.month(),a.day()),u=this.toMonthIndex(o.year,o.month,o.isIntercalary);return this.newDate(o.year,u,o.day)},fromString:function(n){var a=n.match(b),o=this._validateYear(+a[1]),u=+a[2],p=!!a[3],c=this.toMonthIndex(o,u,p),x=+a[4];return this.newDate(o,c,x)},add:function(n,a,o){var u=n.year(),p=n.month(),c=this.isIntercalaryMonth(u,p),x=this.toChineseMonth(u,p),g=Object.getPrototypeOf(T.prototype).add.call(this,n,a,o);if(o==="y"){var f=g.year(),y=g.month(),v=this.isIntercalaryMonth(f,x),m=c&&v?this.toMonthIndex(f,x,!0):this.toMonthIndex(f,x,!1);m!==y&&g.month(m)}return g}});var b=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,d=/^\d?\d[iI]?/m,s=/^??[]?/m,e=/^??[]?/m;S.calendars.chinese=T;var i=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],r=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},38751:function(Q,z,t){var S=t(63489),k=t(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new S.baseCalendar,k(l.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,S.local.invalidYear);return(T=b.year()+(b.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,S.local.invalidYear||S.regionalOptions[""].invalidYear),13},weekOfYear:function(T,b,d){var s=this.newDate(T,b,d);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var d=this._validate(T,b,this.minDay,S.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===13&&this.leapYear(d.year())?1:0)},weekDay:function(T,b,d){return(this.dayOfWeek(T,b,d)||7)<6},toJD:function(T,b,d){var s=this._validate(T,b,d,S.local.invalidDate);return(T=s.year())<0&&T++,s.day()+30*(s.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var b=Math.floor(T)+.5-this.jdEpoch,d=Math.floor((b-Math.floor((b+366)/1461))/365)+1;d<=0&&d--,b=Math.floor(T)+.5-this.newDate(d,1,1).toJD();var s=Math.floor(b/30)+1,e=b-30*(s-1)+1;return this.newDate(d,s,e)}}),S.calendars.coptic=l},86825:function(Q,z,t){var S=t(63489),k=t(56131);function l(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}l.prototype=new S.baseCalendar,k(l.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(b){return this._validate(b,this.minMonth,this.minDay,S.local.invalidYear),!1},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,S.local.invalidYear),13},daysInYear:function(b){return this._validate(b,this.minMonth,this.minDay,S.local.invalidYear),400},weekOfYear:function(b,d,s){var e=this.newDate(b,d,s);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/8)+1},daysInMonth:function(b,d){var s=this._validate(b,d,this.minDay,S.local.invalidMonth);return this.daysPerMonth[s.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(b,d,s){return(this._validate(b,d,s,S.local.invalidDate).day()+1)%8},weekDay:function(b,d,s){var e=this.dayOfWeek(b,d,s);return e>=2&&e<=6},extraInfo:function(b,d,s){var e=this._validate(b,d,s,S.local.invalidDate);return{century:T[Math.floor((e.year()-1)/100)+1]||""}},toJD:function(b,d,s){var e=this._validate(b,d,s,S.local.invalidDate);return b=e.year()+(e.year()<0?1:0),d=e.month(),(s=e.day())+(d>1?16:0)+(d>2?32*(d-2):0)+400*(b-1)+this.jdEpoch-1},fromJD:function(b){b=Math.floor(b+.5)-Math.floor(this.jdEpoch)-1;var d=Math.floor(b/400)+1;b-=400*(d-1),b+=b>15?16:0;var s=Math.floor(b/32)+1,e=b-32*(s-1)+1;return this.newDate(d<=0?d-1:d,s,e)}});var T={20:"Fruitbat",21:"Anchovy"};S.calendars.discworld=l},37715:function(Q,z,t){var S=t(63489),k=t(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new S.baseCalendar,k(l.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,S.local.invalidYear);return(T=b.year()+(b.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,S.local.invalidYear||S.regionalOptions[""].invalidYear),13},weekOfYear:function(T,b,d){var s=this.newDate(T,b,d);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var d=this._validate(T,b,this.minDay,S.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===13&&this.leapYear(d.year())?1:0)},weekDay:function(T,b,d){return(this.dayOfWeek(T,b,d)||7)<6},toJD:function(T,b,d){var s=this._validate(T,b,d,S.local.invalidDate);return(T=s.year())<0&&T++,s.day()+30*(s.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var b=Math.floor(T)+.5-this.jdEpoch,d=Math.floor((b-Math.floor((b+366)/1461))/365)+1;d<=0&&d--,b=Math.floor(T)+.5-this.newDate(d,1,1).toJD();var s=Math.floor(b/30)+1,e=b-30*(s-1)+1;return this.newDate(d,s,e)}}),S.calendars.ethiopian=l},99384:function(Q,z,t){var S=t(63489),k=t(56131);function l(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}function T(b,d){return b-d*Math.floor(b/d)}l.prototype=new S.baseCalendar,k(l.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var d=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear);return this._leapYear(d.year())},_leapYear:function(b){return T(7*(b=b<0?b+1:b)+1,19)<7},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,S.local.invalidYear),this._leapYear(b.year?b.year():b)?13:12},weekOfYear:function(b,d,s){var e=this.newDate(b,d,s);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInYear:function(b){return b=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear).year(),this.toJD(b===-1?1:b+1,7,1)-this.toJD(b,7,1)},daysInMonth:function(b,d){return b.year&&(d=b.month(),b=b.year()),this._validate(b,d,this.minDay,S.local.invalidMonth),d===12&&this.leapYear(b)||d===8&&T(this.daysInYear(b),10)===5?30:d===9&&T(this.daysInYear(b),10)===3?29:this.daysPerMonth[d-1]},weekDay:function(b,d,s){return this.dayOfWeek(b,d,s)!==6},extraInfo:function(b,d,s){var e=this._validate(b,d,s,S.local.invalidDate);return{yearType:(this.leapYear(e)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(e)%10-3]}},toJD:function(b,d,s){var e=this._validate(b,d,s,S.local.invalidDate);b=e.year(),d=e.month(),s=e.day();var i=b<=0?b+1:b,r=this.jdEpoch+this._delay1(i)+this._delay2(i)+s+1;if(d<7){for(var n=7;n<=this.monthsInYear(b);n++)r+=this.daysInMonth(b,n);for(n=1;n<d;n++)r+=this.daysInMonth(b,n)}else for(n=7;n<d;n++)r+=this.daysInMonth(b,n);return r},_delay1:function(b){var d=Math.floor((235*b-234)/19),s=12084+13753*d,e=29*d+Math.floor(s/25920);return T(3*(e+1),7)<3&&e++,e},_delay2:function(b){var d=this._delay1(b-1),s=this._delay1(b);return this._delay1(b+1)-s==356?2:s-d==382?1:0},fromJD:function(b){b=Math.floor(b)+.5;for(var d=Math.floor(98496*(b-this.jdEpoch)/35975351)-1;b>=this.toJD(d===-1?1:d+1,7,1);)d++;for(var s=b<this.toJD(d,1,1)?7:1;b>this.toJD(d,s,this.daysInMonth(d,s));)s++;var e=b-this.toJD(d,s,1)+1;return this.newDate(d,s,e)}}),S.calendars.hebrew=l},43805:function(Q,z,t){var S=t(63489),k=t(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new S.baseCalendar,k(l.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){return(11*this._validate(T,this.minMonth,this.minDay,S.local.invalidYear).year()+14)%30<11},weekOfYear:function(T,b,d){var s=this.newDate(T,b,d);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(T){return this.leapYear(T)?355:354},daysInMonth:function(T,b){var d=this._validate(T,b,this.minDay,S.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===12&&this.leapYear(d.year())?1:0)},weekDay:function(T,b,d){return this.dayOfWeek(T,b,d)!==5},toJD:function(T,b,d){var s=this._validate(T,b,d,S.local.invalidDate);return T=s.year(),b=s.month(),T=T<=0?T+1:T,(d=s.day())+Math.ceil(29.5*(b-1))+354*(T-1)+Math.floor((3+11*T)/30)+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var b=Math.floor((30*(T-this.jdEpoch)+10646)/10631);b=b<=0?b-1:b;var d=Math.min(12,Math.ceil((T-29-this.toJD(b,1,1))/29.5)+1),s=T-this.toJD(b,d,1)+1;return this.newDate(b,d,s)}}),S.calendars.islamic=l},88874:function(Q,z,t){var S=t(63489),k=t(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new S.baseCalendar,k(l.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,S.local.invalidYear);return(T=b.year()<0?b.year()+1:b.year())%4==0},weekOfYear:function(T,b,d){var s=this.newDate(T,b,d);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var d=this._validate(T,b,this.minDay,S.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===2&&this.leapYear(d.year())?1:0)},weekDay:function(T,b,d){return(this.dayOfWeek(T,b,d)||7)<6},toJD:function(T,b,d){var s=this._validate(T,b,d,S.local.invalidDate);return T=s.year(),b=s.month(),d=s.day(),T<0&&T++,b<=2&&(T--,b+=12),Math.floor(365.25*(T+4716))+Math.floor(30.6001*(b+1))+d-1524.5},fromJD:function(T){var b=Math.floor(T+.5)+1524,d=Math.floor((b-122.1)/365.25),s=Math.floor(365.25*d),e=Math.floor((b-s)/30.6001),i=e-Math.floor(e<14?1:13),r=d-Math.floor(i>2?4716:4715),n=b-s-Math.floor(30.6001*e);return r<=0&&r--,this.newDate(r,i,n)}}),S.calendars.julian=l},83290:function(Q,z,t){var S=t(63489),k=t(56131);function l(d){this.local=this.regionalOptions[d||""]||this.regionalOptions[""]}function T(d,s){return d-s*Math.floor(d/s)}function b(d,s){return T(d-1,s)+1}l.prototype=new S.baseCalendar,k(l.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(d){return this._validate(d,this.minMonth,this.minDay,S.local.invalidYear),!1},formatYear:function(d){d=this._validate(d,this.minMonth,this.minDay,S.local.invalidYear).year();var s=Math.floor(d/400);return d%=400,d+=d<0?400:0,s+"."+Math.floor(d/20)+"."+d%20},forYear:function(d){if((d=d.split(".")).length<3)throw"Invalid Mayan year";for(var s=0,e=0;e<d.length;e++){var i=parseInt(d[e],10);if(Math.abs(i)>19||e>0&&i<0)throw"Invalid Mayan year";s=20*s+i}return s},monthsInYear:function(d){return this._validate(d,this.minMonth,this.minDay,S.local.invalidYear),18},weekOfYear:function(d,s,e){return this._validate(d,s,e,S.local.invalidDate),0},daysInYear:function(d){return this._validate(d,this.minMonth,this.minDay,S.local.invalidYear),360},daysInMonth:function(d,s){return this._validate(d,s,this.minDay,S.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(d,s,e){return this._validate(d,s,e,S.local.invalidDate).day()},weekDay:function(d,s,e){return this._validate(d,s,e,S.local.invalidDate),!0},extraInfo:function(d,s,e){var i=this._validate(d,s,e,S.local.invalidDate).toJD(),r=this._toHaab(i),n=this._toTzolkin(i);return{haabMonthName:this.local.haabMonths[r[0]-1],haabMonth:r[0],haabDay:r[1],tzolkinDayName:this.local.tzolkinMonths[n[0]-1],tzolkinDay:n[0],tzolkinTrecena:n[1]}},_toHaab:function(d){var s=T(8+(d-=this.jdEpoch)+340,365);return[Math.floor(s/20)+1,T(s,20)]},_toTzolkin:function(d){return[b(20+(d-=this.jdEpoch),20),b(d+4,13)]},toJD:function(d,s,e){var i=this._validate(d,s,e,S.local.invalidDate);return i.day()+20*i.month()+360*i.year()+this.jdEpoch},fromJD:function(d){d=Math.floor(d)+.5-this.jdEpoch;var s=Math.floor(d/360);d%=360,d+=d<0?360:0;var e=Math.floor(d/20),i=d%20;return this.newDate(s,e,i)}}),S.calendars.mayan=l},29108:function(Q,z,t){var S=t(63489),k=t(56131);function l(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}l.prototype=new S.baseCalendar;var T=S.instance("gregorian");k(l.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var d=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear||S.regionalOptions[""].invalidYear);return T.leapYear(d.year()+(d.year()<1?1:0)+1469)},weekOfYear:function(b,d,s){var e=this.newDate(b,d,s);return e.add(1-(e.dayOfWeek()||7),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInMonth:function(b,d){var s=this._validate(b,d,this.minDay,S.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(b,d,s){return(this.dayOfWeek(b,d,s)||7)<6},toJD:function(b,d,s){var e=this._validate(b,d,s,S.local.invalidMonth);(b=e.year())<0&&b++;for(var i=e.day(),r=1;r<e.month();r++)i+=this.daysPerMonth[r-1];return i+T.toJD(b+1468,3,13)},fromJD:function(b){b=Math.floor(b+.5);for(var d=Math.floor((b-(this.jdEpoch-1))/366);b>=this.toJD(d+1,1,1);)d++;for(var s=b-Math.floor(this.toJD(d,1,1)+.5)+1,e=1;s>this.daysInMonth(d,e);)s-=this.daysInMonth(d,e),e++;return this.newDate(d,e,s)}}),S.calendars.nanakshahi=l},55422:function(Q,z,t){var S=t(63489),k=t(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new S.baseCalendar,k(l.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(T){return this.daysInYear(T)!==this.daysPerYear},weekOfYear:function(T,b,d){var s=this.newDate(T,b,d);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(T){if(T=this._validate(T,this.minMonth,this.minDay,S.local.invalidYear).year(),this.NEPALI_CALENDAR_DATA[T]===void 0)return this.daysPerYear;for(var b=0,d=this.minMonth;d<=12;d++)b+=this.NEPALI_CALENDAR_DATA[T][d];return b},daysInMonth:function(T,b){return T.year&&(b=T.month(),T=T.year()),this._validate(T,b,this.minDay,S.local.invalidMonth),this.NEPALI_CALENDAR_DATA[T]===void 0?this.daysPerMonth[b-1]:this.NEPALI_CALENDAR_DATA[T][b]},weekDay:function(T,b,d){return this.dayOfWeek(T,b,d)!==6},toJD:function(T,b,d){var s=this._validate(T,b,d,S.local.invalidDate);T=s.year(),b=s.month(),d=s.day();var e=S.instance(),i=0,r=b,n=T;this._createMissingCalendarData(T);var a=T-(r>9||r===9&&d>=this.NEPALI_CALENDAR_DATA[n][0]?56:57);for(b!==9&&(i=d,r--);r!==9;)r<=0&&(r=12,n--),i+=this.NEPALI_CALENDAR_DATA[n][r],r--;return b===9?(i+=d-this.NEPALI_CALENDAR_DATA[n][0])<0&&(i+=e.daysInYear(a)):i+=this.NEPALI_CALENDAR_DATA[n][9]-this.NEPALI_CALENDAR_DATA[n][0],e.newDate(a,1,1).add(i,"d").toJD()},fromJD:function(T){var b=S.instance().fromJD(T),d=b.year(),s=b.dayOfYear(),e=d+56;this._createMissingCalendarData(e);for(var i=9,r=this.NEPALI_CALENDAR_DATA[e][0],n=this.NEPALI_CALENDAR_DATA[e][i]-r+1;s>n;)++i>12&&(i=1,e++),n+=this.NEPALI_CALENDAR_DATA[e][i];var a=this.NEPALI_CALENDAR_DATA[e][i]-(n-s);return this.newDate(e,i,a)},_createMissingCalendarData:function(T){var b=this.daysPerMonth.slice(0);b.unshift(17);for(var d=T-1;d<T+2;d++)this.NEPALI_CALENDAR_DATA[d]===void 0&&(this.NEPALI_CALENDAR_DATA[d]=b)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),S.calendars.nepali=l},94320:function(Q,z,t){var S=t(63489),k=t(56131);function l(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}function T(b,d){return b-d*Math.floor(b/d)}l.prototype=new S.baseCalendar,k(l.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(b){var d=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear);return 682*((d.year()-(d.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(b,d,s){var e=this.newDate(b,d,s);return e.add(-(e.dayOfWeek()+1)%7,"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInMonth:function(b,d){var s=this._validate(b,d,this.minDay,S.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(b,d,s){return this.dayOfWeek(b,d,s)!==5},toJD:function(b,d,s){var e=this._validate(b,d,s,S.local.invalidDate);b=e.year(),d=e.month(),s=e.day();var i=b-(b>=0?474:473),r=474+T(i,2820);return s+(d<=7?31*(d-1):30*(d-1)+6)+Math.floor((682*r-110)/2816)+365*(r-1)+1029983*Math.floor(i/2820)+this.jdEpoch-1},fromJD:function(b){var d=(b=Math.floor(b)+.5)-this.toJD(475,1,1),s=Math.floor(d/1029983),e=T(d,1029983),i=2820;if(e!==1029982){var r=Math.floor(e/366),n=T(e,366);i=Math.floor((2134*r+2816*n+2815)/1028522)+r+1}var a=i+2820*s+474;a=a<=0?a-1:a;var o=b-this.toJD(a,1,1)+1,u=o<=186?Math.ceil(o/31):Math.ceil((o-6)/30),p=b-this.toJD(a,u,1)+1;return this.newDate(a,u,p)}}),S.calendars.persian=l,S.calendars.jalali=l},31320:function(Q,z,t){var S=t(63489),k=t(56131),l=S.instance();function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}T.prototype=new S.baseCalendar,k(T.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(b){var d=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear);return b=this._t2gYear(d.year()),l.leapYear(b)},weekOfYear:function(b,d,s){var e=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear);return b=this._t2gYear(e.year()),l.weekOfYear(b,e.month(),e.day())},daysInMonth:function(b,d){var s=this._validate(b,d,this.minDay,S.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(b,d,s){return(this.dayOfWeek(b,d,s)||7)<6},toJD:function(b,d,s){var e=this._validate(b,d,s,S.local.invalidDate);return b=this._t2gYear(e.year()),l.toJD(b,e.month(),e.day())},fromJD:function(b){var d=l.fromJD(b),s=this._g2tYear(d.year());return this.newDate(s,d.month(),d.day())},_t2gYear:function(b){return b+this.yearsOffset+(b>=-this.yearsOffset&&b<=-1?1:0)},_g2tYear:function(b){return b-this.yearsOffset-(b>=1&&b<=this.yearsOffset?1:0)}}),S.calendars.taiwan=T},51367:function(Q,z,t){var S=t(63489),k=t(56131),l=S.instance();function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}T.prototype=new S.baseCalendar,k(T.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var d=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear);return b=this._t2gYear(d.year()),l.leapYear(b)},weekOfYear:function(b,d,s){var e=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear);return b=this._t2gYear(e.year()),l.weekOfYear(b,e.month(),e.day())},daysInMonth:function(b,d){var s=this._validate(b,d,this.minDay,S.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(b,d,s){return(this.dayOfWeek(b,d,s)||7)<6},toJD:function(b,d,s){var e=this._validate(b,d,s,S.local.invalidDate);return b=this._t2gYear(e.year()),l.toJD(b,e.month(),e.day())},fromJD:function(b){var d=l.fromJD(b),s=this._g2tYear(d.year());return this.newDate(s,d.month(),d.day())},_t2gYear:function(b){return b-this.yearsOffset-(b>=1&&b<=this.yearsOffset?1:0)},_g2tYear:function(b){return b+this.yearsOffset+(b>=-this.yearsOffset&&b<=-1?1:0)}}),S.calendars.thai=T},21457:function(Q,z,t){var S=t(63489),k=t(56131);function l(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}l.prototype=new S.baseCalendar,k(l.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(b){var d=this._validate(b,this.minMonth,this.minDay,S.local.invalidYear);return this.daysInYear(d.year())===355},weekOfYear:function(b,d,s){var e=this.newDate(b,d,s);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInYear:function(b){for(var d=0,s=1;s<=12;s++)d+=this.daysInMonth(b,s);return d},daysInMonth:function(b,d){for(var s=this._validate(b,d,this.minDay,S.local.invalidMonth).toJD()-24e5+.5,e=0,i=0;i<T.length;i++){if(T[i]>s)return T[e]-T[e-1];e++}return 30},weekDay:function(b,d,s){return this.dayOfWeek(b,d,s)!==5},toJD:function(b,d,s){var e=this._validate(b,d,s,S.local.invalidDate),i=12*(e.year()-1)+e.month()-15292;return e.day()+T[i-1]-1+24e5-.5},fromJD:function(b){for(var d=b-24e5+.5,s=0,e=0;e<T.length&&!(T[e]>d);e++)s++;var i=s+15292,r=Math.floor((i-1)/12),n=r+1,a=i-12*r,o=d-T[s-1]+1;return this.newDate(n,a,o)},isValid:function(b,d,s){var e=S.baseCalendar.prototype.isValid.apply(this,arguments);return e&&(e=(b=b.year!=null?b.year:b)>=1276&&b<=1500),e},_validate:function(b,d,s,e){var i=S.baseCalendar.prototype._validate.apply(this,arguments);if(i.year<1276||i.year>1500)throw e.replace(/\{0\}/,this.local.name);return i}}),S.calendars.ummalqura=l;var T=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},63489:function(Q,z,t){var S=t(56131);function k(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function l(e,i,r,n){if(this._calendar=e,this._year=i,this._month=r,this._day=n,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function T(e,i){return"000000".substring(0,i-(e=""+e).length)+e}function b(){this.shortYearCutoff="+10"}function d(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}S(k.prototype,{instance:function(e,i){e=(e||"gregorian").toLowerCase(),i=i||"";var r=this._localCals[e+"-"+i];if(!r&&this.calendars[e]&&(r=new this.calendars[e](i),this._localCals[e+"-"+i]=r),!r)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e);return r},newDate:function(e,i,r,n,a){return(n=(e!=null&&e.year?e.calendar():typeof n=="string"?this.instance(n,a):n)||this.instance()).newDate(e,i,r)},substituteDigits:function(e){return function(i){return(i+"").replace(/[0-9]/g,function(r){return e[r]})}},substituteChineseDigits:function(e,i){return function(r){for(var n="",a=0;r>0;){var o=r%10;n=(o===0?"":e[o]+i[a])+n,a++,r=Math.floor(r/10)}return n.indexOf(e[1]+i[1])===0&&(n=n.substr(1)),n||e[0]}}}),S(l.prototype,{newDate:function(e,i,r){return this._calendar.newDate(e??this,i,r)},year:function(e){return arguments.length===0?this._year:this.set(e,"y")},month:function(e){return arguments.length===0?this._month:this.set(e,"m")},day:function(e){return arguments.length===0?this._day:this.set(e,"d")},date:function(e,i,r){if(!this._calendar.isValid(e,i,r))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=e,this._month=i,this._day=r,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,i){return this._calendar.add(this,e,i)},set:function(e,i){return this._calendar.set(this,e,i)},compareTo:function(e){if(this._calendar.name!==e._calendar.name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);var i=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return i===0?0:i<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+T(Math.abs(this.year()),4)+"-"+T(this.month(),2)+"-"+T(this.day(),2)}}),S(b.prototype,{_validateLevel:0,newDate:function(e,i,r){return e==null?this.today():(e.year&&(this._validate(e,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),r=e.day(),i=e.month(),e=e.year()),new l(this,e,i,r))},today:function(){return this.fromJSDate(new Date)},epoch:function(e){return this._validate(e,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){var i=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(i.year()<0?"-":"")+T(Math.abs(i.year()),4)},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear),12},monthOfYear:function(e,i){var r=this._validate(e,i,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(e,i){var r=(i+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;return this._validate(e,r,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth),r},daysInYear:function(e){var i=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return this.leapYear(i)?366:365},dayOfYear:function(e,i,r){var n=this._validate(e,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return n.toJD()-this.newDate(n.year(),this.fromMonthOfYear(n.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,i,r){var n=this._validate(e,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(n))+2)%this.daysInWeek()},extraInfo:function(e,i,r){return this._validate(e,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),{}},add:function(e,i,r){return this._validate(e,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate),this._correctAdd(e,this._add(e,i,r),i,r)},_add:function(e,i,r){if(this._validateLevel++,r==="d"||r==="w"){var n=e.toJD()+i*(r==="w"?this.daysInWeek():1),a=e.calendar().fromJD(n);return this._validateLevel--,[a.year(),a.month(),a.day()]}try{var o=e.year()+(r==="y"?i:0),u=e.monthOfYear()+(r==="m"?i:0);a=e.day(),r==="y"?(e.month()!==this.fromMonthOfYear(o,u)&&(u=this.newDate(o,e.month(),this.minDay).monthOfYear()),u=Math.min(u,this.monthsInYear(o)),a=Math.min(a,this.daysInMonth(o,this.fromMonthOfYear(o,u)))):r==="m"&&(function(c){for(;u<c.minMonth;)o--,u+=c.monthsInYear(o);for(var x=c.monthsInYear(o);u>x-1+c.minMonth;)o++,u-=x,x=c.monthsInYear(o)}(this),a=Math.min(a,this.daysInMonth(o,this.fromMonthOfYear(o,u))));var p=[o,this.fromMonthOfYear(o,u),a];return this._validateLevel--,p}catch(c){throw this._validateLevel--,c}},_correctAdd:function(e,i,r,n){if(!(this.hasYearZero||n!=="y"&&n!=="m"||i[0]!==0&&e.year()>0==i[0]>0)){var a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[n],o=r<0?-1:1;i=this._add(e,r*a[0]+o*a[1],a[2])}return e.date(i[0],i[1],i[2])},set:function(e,i,r){this._validate(e,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate);var n=r==="y"?i:e.year(),a=r==="m"?i:e.month(),o=r==="d"?i:e.day();return r!=="y"&&r!=="m"||(o=Math.min(o,this.daysInMonth(n,a))),e.date(n,a,o)},isValid:function(e,i,r){this._validateLevel++;var n=this.hasYearZero||e!==0;if(n){var a=this.newDate(e,i,this.minDay);n=i>=this.minMonth&&i-this.minMonth<this.monthsInYear(a)&&r>=this.minDay&&r-this.minDay<this.daysInMonth(a)}return this._validateLevel--,n},toJSDate:function(e,i,r){var n=this._validate(e,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return s.instance().fromJD(this.toJD(n)).toJSDate()},fromJSDate:function(e){return this.fromJD(s.instance().fromJSDate(e).toJD())},_validate:function(e,i,r,n){if(e.year){if(this._validateLevel===0&&this.name!==e.calendar().name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(e,i,r))throw n.replace(/\{0\}/,this.local.name);var a=this.newDate(e,i,r);return this._validateLevel--,a}catch(o){throw this._validateLevel--,o}}}),d.prototype=new b,S(d.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var i=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(e=i.year()+(i.year()<0?1:0))%4==0&&(e%100!=0||e%400==0)},weekOfYear:function(e,i,r){var n=this.newDate(e,i,r);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,i){var r=this._validate(e,i,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,i,r){return(this.dayOfWeek(e,i,r)||7)<6},toJD:function(e,i,r){var n=this._validate(e,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);e=n.year(),i=n.month(),r=n.day(),e<0&&e++,i<3&&(i+=12,e--);var a=Math.floor(e/100),o=2-a+Math.floor(a/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(i+1))+r+o-1524.5},fromJD:function(e){var i=Math.floor(e+.5),r=Math.floor((i-186721625e-2)/36524.25),n=1524+(r=i+1+r-Math.floor(r/4)),a=Math.floor((n-122.1)/365.25),o=Math.floor(365.25*a),u=Math.floor((n-o)/30.6001),p=n-o-Math.floor(30.6001*u),c=u-(u>13.5?13:1),x=a-(c>2.5?4716:4715);return x<=0&&x--,this.newDate(x,c,p)},toJSDate:function(e,i,r){var n=this._validate(e,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),a=new Date(n.year(),n.month()-1,n.day());return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(a.getHours()>12?a.getHours()+2:0),a},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var s=Q.exports=new k;s.cdate=l,s.baseCalendar=b,s.calendars.gregorian=d},94338:function(Q,z,t){var S=t(56131),k=t(63489);S(k.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),k.local=k.regionalOptions[""],S(k.cdate.prototype,{formatDate:function(l,T){return typeof l!="string"&&(T=l,l=""),this._calendar.formatDate(l||"",this,T)}}),S(k.baseCalendar.prototype,{UNIX_EPOCH:k.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:k.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(l,T,b){if(typeof l!="string"&&(b=T,T=l,l=""),!T)return"";if(T.calendar()!==this)throw k.local.invalidFormat||k.regionalOptions[""].invalidFormat;l=l||this.local.dateFormat;for(var d,s,e,i=(b=b||{}).dayNamesShort||this.local.dayNamesShort,r=b.dayNames||this.local.dayNames,n=b.monthNumbers||this.local.monthNumbers,a=b.monthNamesShort||this.local.monthNamesShort,o=b.monthNames||this.local.monthNames,u=(b.calculateWeek||this.local.calculateWeek,function(h,A){for(var w=1;_+w<l.length&&l.charAt(_+w)===h;)w++;return _+=w-1,Math.floor(w/(A||1))>1}),p=function(h,A,w,E){var L=""+A;if(u(h,E))for(;L.length<w;)L="0"+L;return L},c=this,x=function(h){return typeof n=="function"?n.call(c,h,u("m")):y(p("m",h.month(),2))},g=function(h,A){return A?typeof o=="function"?o.call(c,h):o[h.month()-c.minMonth]:typeof a=="function"?a.call(c,h):a[h.month()-c.minMonth]},f=this.local.digits,y=function(h){return b.localNumbers&&f?f(h):h},v="",m=!1,_=0;_<l.length;_++)if(m)l.charAt(_)!=="'"||u("'")?v+=l.charAt(_):m=!1;else switch(l.charAt(_)){case"d":v+=y(p("d",T.day(),2));break;case"D":v+=(d=T.dayOfWeek(),s=i,e=r,u("D")?e[d]:s[d]);break;case"o":v+=p("o",T.dayOfYear(),3);break;case"w":v+=p("w",T.weekOfYear(),2);break;case"m":v+=x(T);break;case"M":v+=g(T,u("M"));break;case"y":v+=u("y",2)?T.year():(T.year()%100<10?"0":"")+T.year()%100;break;case"Y":u("Y",2),v+=T.formatYear();break;case"J":v+=T.toJD();break;case"@":v+=(T.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":v+=(T.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":u("'")?v+="'":m=!0;break;default:v+=l.charAt(_)}return v},parseDate:function(l,T,b){if(T==null)throw k.local.invalidArguments||k.regionalOptions[""].invalidArguments;if((T=typeof T=="object"?T.toString():T+"")==="")return null;l=l||this.local.dateFormat;var d=(b=b||{}).shortYearCutoff||this.shortYearCutoff;d=typeof d!="string"?d:this.today().year()%100+parseInt(d,10);for(var s=b.dayNamesShort||this.local.dayNamesShort,e=b.dayNames||this.local.dayNames,i=b.parseMonth||this.local.parseMonth,r=b.monthNumbers||this.local.monthNumbers,n=b.monthNamesShort||this.local.monthNamesShort,a=b.monthNames||this.local.monthNames,o=-1,u=-1,p=-1,c=-1,x=-1,g=!1,f=!1,y=function(D,G){for(var I=1;L+I<l.length&&l.charAt(L+I)===D;)I++;return L+=I-1,Math.floor(I/(G||1))>1},v=function(D,G){var I=y(D,G),H=[2,3,I?4:2,I?4:2,10,11,20]["oyYJ@!".indexOf(D)+1],N=new RegExp("^-?\\d{1,"+H+"}"),F=T.substring(E).match(N);if(!F)throw(k.local.missingNumberAt||k.regionalOptions[""].missingNumberAt).replace(/\{0\}/,E);return E+=F[0].length,parseInt(F[0],10)},m=this,_=function(){if(typeof r=="function"){y("m");var D=r.call(m,T.substring(E));return E+=D.length,D}return v("m")},h=function(D,G,I,H){for(var N=y(D,H)?I:G,F=0;F<N.length;F++)if(T.substr(E,N[F].length).toLowerCase()===N[F].toLowerCase())return E+=N[F].length,F+m.minMonth;throw(k.local.unknownNameAt||k.regionalOptions[""].unknownNameAt).replace(/\{0\}/,E)},A=function(){if(typeof a=="function"){var D=y("M")?a.call(m,T.substring(E)):n.call(m,T.substring(E));return E+=D.length,D}return h("M",n,a)},w=function(){if(T.charAt(E)!==l.charAt(L))throw(k.local.unexpectedLiteralAt||k.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,E);E++},E=0,L=0;L<l.length;L++)if(f)l.charAt(L)!=="'"||y("'")?w():f=!1;else switch(l.charAt(L)){case"d":c=v("d");break;case"D":h("D",s,e);break;case"o":x=v("o");break;case"w":v("w");break;case"m":p=_();break;case"M":p=A();break;case"y":var C=L;g=!y("y",2),L=C,u=v("y",2);break;case"Y":u=v("Y",2);break;case"J":o=v("J")+.5,T.charAt(E)==="."&&(E++,v("J"));break;case"@":o=v("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":o=v("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":E=T.length;break;case"'":y("'")?w():f=!0;break;default:w()}if(E<T.length)throw k.local.unexpectedText||k.regionalOptions[""].unexpectedText;if(u===-1?u=this.today().year():u<100&&g&&(u+=d===-1?1900:this.today().year()-this.today().year()%100-(u<=d?0:100)),typeof p=="string"&&(p=i.call(this,u,p)),x>-1){p=1,c=x;for(var P=this.daysInMonth(u,p);c>P;P=this.daysInMonth(u,p))p++,c-=P}return o>-1?this.fromJD(o):this.newDate(u,p,c)},determineDate:function(l,T,b,d,s){b&&typeof b!="object"&&(s=d,d=b,b=null),typeof d!="string"&&(s=d,d="");var e=this;return T=T?T.newDate():null,l==null?T:typeof l=="string"?function(i){try{return e.parseDate(d,i,s)}catch{}for(var r=((i=i.toLowerCase()).match(/^c/)&&b?b.newDate():null)||e.today(),n=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,a=n.exec(i);a;)r.add(parseInt(a[1],10),a[2]||"d"),a=n.exec(i);return r}(l):typeof l=="number"?isNaN(l)||l===1/0||l===-1/0?T:e.today().add(l,"d"):e.newDate(l)}})},69862:function(){},40964:function(){},72077:function(Q,z,t){var S=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],k=typeof globalThis>"u"?t.g:globalThis;Q.exports=function(){for(var l=[],T=0;T<S.length;T++)typeof k[S[T]]=="function"&&(l[l.length]=S[T]);return l}},81684:function(Q,z,t){function S(pe,ve,we){pe.prototype=ve.prototype=we,we.constructor=pe}function k(pe,ve){var we=Object.create(pe.prototype);for(var xe in ve)we[xe]=ve[xe];return we}function l(){}t.d(z,{sX:function(){return ce},k4:function(){return $}});var T=.7,b=1/T,d="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",i=/^#([0-9a-f]{3,8})$/,r=new RegExp("^rgb\\(".concat(d,",").concat(d,",").concat(d,"\\)$")),n=new RegExp("^rgb\\(".concat(e,",").concat(e,",").concat(e,"\\)$")),a=new RegExp("^rgba\\(".concat(d,",").concat(d,",").concat(d,",").concat(s,"\\)$")),o=new RegExp("^rgba\\(".concat(e,",").concat(e,",").concat(e,",").concat(s,"\\)$")),u=new RegExp("^hsl\\(".concat(s,",").concat(e,",").concat(e,"\\)$")),p=new RegExp("^hsla\\(".concat(s,",").concat(e,",").concat(e,",").concat(s,"\\)$")),c={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function x(){return this.rgb().formatHex()}function g(){return this.rgb().formatRgb()}function f(pe){var ve,we;return pe=(pe+"").trim().toLowerCase(),(ve=i.exec(pe))?(we=ve[1].length,ve=parseInt(ve[1],16),we===6?y(ve):we===3?new _(ve>>8&15|ve>>4&240,ve>>4&15|240&ve,(15&ve)<<4|15&ve,1):we===8?v(ve>>24&255,ve>>16&255,ve>>8&255,(255&ve)/255):we===4?v(ve>>12&15|ve>>8&240,ve>>8&15|ve>>4&240,ve>>4&15|240&ve,((15&ve)<<4|15&ve)/255):null):(ve=r.exec(pe))?new _(ve[1],ve[2],ve[3],1):(ve=n.exec(pe))?new _(255*ve[1]/100,255*ve[2]/100,255*ve[3]/100,1):(ve=a.exec(pe))?v(ve[1],ve[2],ve[3],ve[4]):(ve=o.exec(pe))?v(255*ve[1]/100,255*ve[2]/100,255*ve[3]/100,ve[4]):(ve=u.exec(pe))?C(ve[1],ve[2]/100,ve[3]/100,1):(ve=p.exec(pe))?C(ve[1],ve[2]/100,ve[3]/100,ve[4]):c.hasOwnProperty(pe)?y(c[pe]):pe==="transparent"?new _(NaN,NaN,NaN,0):null}function y(pe){return new _(pe>>16&255,pe>>8&255,255&pe,1)}function v(pe,ve,we,xe){return xe<=0&&(pe=ve=we=NaN),new _(pe,ve,we,xe)}function m(pe,ve,we,xe){return arguments.length===1?((ge=pe)instanceof l||(ge=f(ge)),ge?new _((ge=ge.rgb()).r,ge.g,ge.b,ge.opacity):new _):new _(pe,ve,we,xe??1);var ge}function _(pe,ve,we,xe){this.r=+pe,this.g=+ve,this.b=+we,this.opacity=+xe}function h(){return"#".concat(L(this.r)).concat(L(this.g)).concat(L(this.b))}function A(){var pe=w(this.opacity);return"".concat(pe===1?"rgb(":"rgba(").concat(E(this.r),", ").concat(E(this.g),", ").concat(E(this.b)).concat(pe===1?")":", ".concat(pe,")"))}function w(pe){return isNaN(pe)?1:Math.max(0,Math.min(1,pe))}function E(pe){return Math.max(0,Math.min(255,Math.round(pe)||0))}function L(pe){return((pe=E(pe))<16?"0":"")+pe.toString(16)}function C(pe,ve,we,xe){return xe<=0?pe=ve=we=NaN:we<=0||we>=1?pe=ve=NaN:ve<=0&&(pe=NaN),new D(pe,ve,we,xe)}function P(pe){if(pe instanceof D)return new D(pe.h,pe.s,pe.l,pe.opacity);if(pe instanceof l||(pe=f(pe)),!pe)return new D;if(pe instanceof D)return pe;var ve=(pe=pe.rgb()).r/255,we=pe.g/255,xe=pe.b/255,ge=Math.min(ve,we,xe),Oe=Math.max(ve,we,xe),Ae=NaN,Te=Oe-ge,se=(Oe+ge)/2;return Te?(Ae=ve===Oe?(we-xe)/Te+6*(we<xe):we===Oe?(xe-ve)/Te+2:(ve-we)/Te+4,Te/=se<.5?Oe+ge:2-Oe-ge,Ae*=60):Te=se>0&&se<1?0:Ae,new D(Ae,Te,se,pe.opacity)}function D(pe,ve,we,xe){this.h=+pe,this.s=+ve,this.l=+we,this.opacity=+xe}function G(pe){return(pe=(pe||0)%360)<0?pe+360:pe}function I(pe){return Math.max(0,Math.min(1,pe||0))}function H(pe,ve,we){return 255*(pe<60?ve+(we-ve)*pe/60:pe<180?we:pe<240?ve+(we-ve)*(240-pe)/60:ve)}S(l,f,{copy:function(pe){return Object.assign(new this.constructor,this,pe)},displayable:function(){return this.rgb().displayable()},hex:x,formatHex:x,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return P(this).formatHsl()},formatRgb:g,toString:g}),S(_,m,k(l,{brighter:function(pe){return pe=pe==null?b:Math.pow(b,pe),new _(this.r*pe,this.g*pe,this.b*pe,this.opacity)},darker:function(pe){return pe=pe==null?T:Math.pow(T,pe),new _(this.r*pe,this.g*pe,this.b*pe,this.opacity)},rgb:function(){return this},clamp:function(){return new _(E(this.r),E(this.g),E(this.b),w(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:h,formatHex:h,formatHex8:function(){return"#".concat(L(this.r)).concat(L(this.g)).concat(L(this.b)).concat(L(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:A,toString:A})),S(D,function(pe,ve,we,xe){return arguments.length===1?P(pe):new D(pe,ve,we,xe??1)},k(l,{brighter:function(pe){return pe=pe==null?b:Math.pow(b,pe),new D(this.h,this.s,this.l*pe,this.opacity)},darker:function(pe){return pe=pe==null?T:Math.pow(T,pe),new D(this.h,this.s,this.l*pe,this.opacity)},rgb:function(){var pe=this.h%360+360*(this.h<0),ve=isNaN(pe)||isNaN(this.s)?0:this.s,we=this.l,xe=we+(we<.5?we:1-we)*ve,ge=2*we-xe;return new _(H(pe>=240?pe-240:pe+120,ge,xe),H(pe,ge,xe),H(pe<120?pe+240:pe-120,ge,xe),this.opacity)},clamp:function(){return new D(G(this.h),I(this.s),I(this.l),w(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var pe=w(this.opacity);return"".concat(pe===1?"hsl(":"hsla(").concat(G(this.h),", ").concat(100*I(this.s),"%, ").concat(100*I(this.l),"%").concat(pe===1?")":", ".concat(pe,")"))}}));var N=function(pe){return function(){return pe}};function F(pe,ve){var we=ve-pe;return we?function(xe,ge){return function(Oe){return xe+Oe*ge}}(pe,we):N(isNaN(pe)?ve:pe)}var V=function pe(ve){var we=function(ge){return(ge=+ge)==1?F:function(Oe,Ae){return Ae-Oe?function(Te,se,le){return Te=Math.pow(Te,le),se=Math.pow(se,le)-Te,le=1/le,function(ne){return Math.pow(Te+ne*se,le)}}(Oe,Ae,ge):N(isNaN(Oe)?Ae:Oe)}}(ve);function xe(ge,Oe){var Ae=we((ge=m(ge)).r,(Oe=m(Oe)).r),Te=we(ge.g,Oe.g),se=we(ge.b,Oe.b),le=F(ge.opacity,Oe.opacity);return function(ne){return ge.r=Ae(ne),ge.g=Te(ne),ge.b=se(ne),ge.opacity=le(ne),ge+""}}return xe.gamma=pe,xe}(1);function q(pe,ve){var we,xe=ve?ve.length:0,ge=pe?Math.min(xe,pe.length):0,Oe=new Array(ge),Ae=new Array(xe);for(we=0;we<ge;++we)Oe[we]=ce(pe[we],ve[we]);for(;we<xe;++we)Ae[we]=ve[we];return function(Te){for(we=0;we<ge;++we)Ae[we]=Oe[we](Te);return Ae}}function te(pe,ve){var we=new Date;return pe=+pe,ve=+ve,function(xe){return we.setTime(pe*(1-xe)+ve*xe),we}}function $(pe,ve){return pe=+pe,ve=+ve,function(we){return pe*(1-we)+ve*we}}function W(pe){return W=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ve){return typeof ve}:function(ve){return ve&&typeof Symbol=="function"&&ve.constructor===Symbol&&ve!==Symbol.prototype?"symbol":typeof ve},W(pe)}function Z(pe,ve){var we,xe={},ge={};for(we in pe!==null&&W(pe)==="object"||(pe={}),ve!==null&&W(ve)==="object"||(ve={}),ve)we in pe?xe[we]=ce(pe[we],ve[we]):ge[we]=ve[we];return function(Oe){for(we in xe)ge[we]=xe[we](Oe);return ge}}var J=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ee=new RegExp(J.source,"g");function re(pe,ve){var we,xe,ge,Oe=J.lastIndex=ee.lastIndex=0,Ae=-1,Te=[],se=[];for(pe+="",ve+="";(we=J.exec(pe))&&(xe=ee.exec(ve));)(ge=xe.index)>Oe&&(ge=ve.slice(Oe,ge),Te[Ae]?Te[Ae]+=ge:Te[++Ae]=ge),(we=we[0])===(xe=xe[0])?Te[Ae]?Te[Ae]+=xe:Te[++Ae]=xe:(Te[++Ae]=null,se.push({i:Ae,x:$(we,xe)})),Oe=ee.lastIndex;return Oe<ve.length&&(ge=ve.slice(Oe),Te[Ae]?Te[Ae]+=ge:Te[++Ae]=ge),Te.length<2?se[0]?function(le){return function(ne){return le(ne)+""}}(se[0].x):function(le){return function(){return le}}(ve):(ve=se.length,function(le){for(var ne,me=0;me<ve;++me)Te[(ne=se[me]).i]=ne.x(le);return Te.join("")})}function ae(pe,ve){ve||(ve=[]);var we,xe=pe?Math.min(ve.length,pe.length):0,ge=ve.slice();return function(Oe){for(we=0;we<xe;++we)ge[we]=pe[we]*(1-Oe)+ve[we]*Oe;return ge}}function oe(pe){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ve){return typeof ve}:function(ve){return ve&&typeof Symbol=="function"&&ve.constructor===Symbol&&ve!==Symbol.prototype?"symbol":typeof ve},oe(pe)}function ce(pe,ve){var we,xe,ge=oe(ve);return ve==null||ge==="boolean"?N(ve):(ge==="number"?$:ge==="string"?(we=f(ve))?(ve=we,V):re:ve instanceof f?V:ve instanceof Date?te:(xe=ve,!ArrayBuffer.isView(xe)||xe instanceof DataView?Array.isArray(ve)?q:typeof ve.valueOf!="function"&&typeof ve.toString!="function"||isNaN(ve)?Z:$:ae))(pe,ve)}},40402:function(Q){Q.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},83794:function(Q){Q.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},96209:function(Q){Q.exports=JSON.parse('["normal","italic","oblique"]')},15659:function(Q){Q.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},38732:function(Q){Q.exports=JSON.parse('["inherit","initial","unset"]')},41901:function(Q){Q.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},Cu={};function Ls(Q){var z=Cu[Q];if(z!==void 0)return z.exports;var t=Cu[Q]={exports:{}};return nf[Q].call(t.exports,t,t.exports,Ls),t.exports}return Ls.n=function(Q){var z=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return Ls.d(z,{a:z}),z},Ls.d=function(Q,z){for(var t in z)Ls.o(z,t)&&!Ls.o(Q,t)&&Object.defineProperty(Q,t,{enumerable:!0,get:z[t]})},Ls.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Ls.o=function(Q,z){return Object.prototype.hasOwnProperty.call(Q,z)},Ls.r=function(Q){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},Ls(27909)}()})})(Nh);var Td=Nh.exports;const Md=wd(Td);export{Md as P};
