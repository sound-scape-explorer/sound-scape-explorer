function M(n,t){var e=n.length*t;if(n.length===0)throw new Error("quantile requires at least one data point.");if(t<0||t>1)throw new Error("quantiles must be between 0 and 1");return t===1?n[n.length-1]:t===0?n[0]:e%1!==0?n[Math.ceil(e)-1]:n.length%2===0?(n[e-1]+n[e])/2:n[e]}function f(n,t,e,a){for(e=e||0,a=a||n.length-1;a>e;){if(a-e>600){var o=a-e+1,u=t-e+1,h=Math.log(o),i=.5*Math.exp(2*h/3),s=.5*Math.sqrt(h*i*(o-i)/o);u-o/2<0&&(s*=-1);var d=Math.max(e,Math.floor(t-u*i/o+s)),y=Math.min(a,Math.floor(t+(o-u)*i/o+s));f(n,t,d,y)}var c=n[t],r=e,l=a;for(v(n,e,t),n[a]>c&&v(n,e,a);r<l;){for(v(n,r,l),r++,l--;n[r]<c;)r++;for(;n[l]>c;)l--}n[e]===c?v(n,e,l):(l++,v(n,l,a)),l<=t&&(e=l+1),t<=l&&(a=l-1)}}function v(n,t,e){var a=n[t];n[t]=n[e],n[e]=a}function g(n,t){var e=n.slice();if(Array.isArray(t)){S(e,t);for(var a=[],o=0;o<t.length;o++)a[o]=M(e,t[o]);return a}else{var u=q(e.length,t);return w(e,u,0,e.length-1),M(e,t)}}function w(n,t,e,a){t%1===0?f(n,t,e,a):(t=Math.floor(t),f(n,t,e,a),f(n,t+1,t+1,a))}function S(n,t){for(var e=[0],a=0;a<t.length;a++)e.push(q(n.length,t[a]));e.push(n.length-1),e.sort(b);for(var o=[0,e.length-1];o.length;){var u=Math.ceil(o.pop()),h=Math.floor(o.pop());if(!(u-h<=1)){var i=Math.floor((h+u)/2);w(n,e[i],Math.floor(e[h]),Math.ceil(e[u])),o.push(h,i,i,u)}}}function b(n,t){return n-t}function q(n,t){var e=n*t;return t===1?n-1:t===0?0:e%1!==0?Math.ceil(e)-1:n%2===0?e-.5:e}export{g as q};
