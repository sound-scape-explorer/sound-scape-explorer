var b={},C={get exports(){return b},set exports(c){b=c}};(function(c){function M(r,t){if(t=t||{},r=a(r),r===null)throw new TypeError("Invalid AudioData");var n=!!(t.floatingPoint||t.float),e=n?32:t.bitDepth|0||16,h=e>>3,i=r.length*r.numberOfChannels*h,o=new DataView(new Uint8Array(44+i).buffer),s=y(o),f={formatId:n?3:1,floatingPoint:n,numberOfChannels:r.numberOfChannels,sampleRate:r.sampleRate,bitDepth:e};g(s,f,o.buffer.byteLength-8);var m=F(s,f,i,r,t);if(m instanceof Error)throw m;return o.buffer}function u(r,t){return new Promise(function(n){n(M(r,t))})}function a(r){var t={};return typeof r.sampleRate!="number"||!Array.isArray(r.channelData)||!(r.channelData[0]instanceof Float32Array)?null:(t.numberOfChannels=r.channelData.length,t.length=r.channelData[0].length|0,t.sampleRate=r.sampleRate|0,t.channelData=r.channelData,t)}function g(r,t,n){var e=t.bitDepth>>3;r.string("RIFF"),r.uint32(n),r.string("WAVE"),r.string("fmt "),r.uint32(16),r.uint16(t.floatingPoint?3:1),r.uint16(t.numberOfChannels),r.uint32(t.sampleRate),r.uint32(t.sampleRate*t.numberOfChannels*e),r.uint16(t.numberOfChannels*e),r.uint16(t.bitDepth)}function F(r,t,n,e,h){var i=t.bitDepth,o=t.floatingPoint?"f":h.symmetric?"s":"",s="pcm"+i+o;if(!r[s])return new TypeError("Not supported bit depth: "+i);var f=r[s].bind(r),m=t.numberOfChannels,D=e.channelData;r.string("data"),r.uint32(n);for(var p=0,U=e.length;p<U;p++)for(var x=0;x<m;x++)f(D[x][p])}function y(r){var t=0;return{int16:function(n){r.setInt16(t,n,!0),t+=2},uint16:function(n){r.setUint16(t,n,!0),t+=2},uint32:function(n){r.setUint32(t,n,!0),t+=4},string:function(n){for(var e=0,h=n.length;e<h;e++)r.setUint8(t++,n.charCodeAt(e))},pcm8:function(n){n=Math.max(-1,Math.min(n,1)),n=(n*.5+.5)*255,n=Math.round(n)|0,r.setUint8(t,n,!0),t+=1},pcm8s:function(n){n=Math.round(n*128)+128,n=Math.max(0,Math.min(n,255)),r.setUint8(t,n,!0),t+=1},pcm16:function(n){n=Math.max(-1,Math.min(n,1)),n=n<0?n*32768:n*32767,n=Math.round(n)|0,r.setInt16(t,n,!0),t+=2},pcm16s:function(n){n=Math.round(n*32768),n=Math.max(-32768,Math.min(n,32767)),r.setInt16(t,n,!0),t+=2},pcm24:function(n){n=Math.max(-1,Math.min(n,1)),n=n<0?16777216+n*8388608:n*8388607,n=Math.round(n)|0;var e=n>>0&255,h=n>>8&255,i=n>>16&255;r.setUint8(t+0,e),r.setUint8(t+1,h),r.setUint8(t+2,i),t+=3},pcm24s:function(n){n=Math.round(n*8388608),n=Math.max(-8388608,Math.min(n,8388607));var e=n>>0&255,h=n>>8&255,i=n>>16&255;r.setUint8(t+0,e),r.setUint8(t+1,h),r.setUint8(t+2,i),t+=3},pcm32:function(n){n=Math.max(-1,Math.min(n,1)),n=n<0?n*2147483648:n*2147483647,n=Math.round(n)|0,r.setInt32(t,n,!0),t+=4},pcm32s:function(n){n=Math.round(n*2147483648),n=Math.max(-2147483648,Math.min(n,2147483647)),r.setInt32(t,n,!0),t+=4},pcm32f:function(n){r.setFloat32(t,n,!0),t+=4}}}c.exports.encode=u,c.exports.encode.sync=M})(C);const O=b;export{O as W};
